---
title: "faz com que o aaaCommon de reciclagem de funções de serviço de nuvem | Microsoft Docs"
description: "Uma função de serviço de nuvem que é reciclada repentinamente pode causar um tempo de inatividade significativo. Aqui estão alguns problemas comuns que causam funções toobe reciclado, o que pode ajudar a reduzir o tempo de inatividade."
services: cloud-services
documentationcenter: 
author: simonxjx
manager: felixwu
editor: 
tags: top-support-issue
ms.assetid: 533930d1-8035-4402-b16a-cf887b2c4f85
ms.service: cloud-services
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: tbd
ms.date: 7/26/2017
ms.author: v-six
ms.openlocfilehash: 8fa152b33d2b22a8a02f834d4bc38519b4272f7b
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="common-issues-that-cause-roles-toorecycle"></a><span data-ttu-id="24881-104">Problemas comuns que causam toorecycle funções</span><span class="sxs-lookup"><span data-stu-id="24881-104">Common issues that cause roles toorecycle</span></span>
<span data-ttu-id="24881-105">Este artigo aborda algumas das causas comuns de saudação de problemas de implantação e fornece dicas de solução de problemas toohelp resolver esses problemas.</span><span class="sxs-lookup"><span data-stu-id="24881-105">This article discusses some of hello common causes of deployment problems and provides troubleshooting tips toohelp you resolve these problems.</span></span> <span data-ttu-id="24881-106">Uma indicação de que existe um problema com um aplicativo é quando a instância de função hello falha toostart ou circula entre os estados inicializando, ocupado e parando de saudação.</span><span class="sxs-lookup"><span data-stu-id="24881-106">An indication that a problem exists with an application is when hello role instance fails toostart, or it cycles between hello initializing, busy, and stopping states.</span></span>

[!INCLUDE [support-disclaimer](../../includes/support-disclaimer.md)]

## <a name="missing-runtime-dependencies"></a><span data-ttu-id="24881-107">Dependências de tempo de execução ausentes</span><span class="sxs-lookup"><span data-stu-id="24881-107">Missing runtime dependencies</span></span>
<span data-ttu-id="24881-108">Se uma função em seu aplicativo depende de qualquer assembly que não faz parte da saudação biblioteca gerenciada do .NET Framework ou saudação do Azure, você deve incluir explicitamente esse assembly no pacote de aplicativo hello.</span><span class="sxs-lookup"><span data-stu-id="24881-108">If a role in your application relies on any assembly that is not part of hello .NET Framework or hello Azure managed library, you must explicitly include that assembly in hello application package.</span></span> <span data-ttu-id="24881-109">Tenha em mente que outras estruturas da Microsoft não estão disponíveis no Azure por padrão.</span><span class="sxs-lookup"><span data-stu-id="24881-109">Keep in mind that other Microsoft frameworks are not available on Azure by default.</span></span> <span data-ttu-id="24881-110">Se sua função depender de tal estrutura, você deve adicionar o pacote de aplicativo de toohello desses assemblies.</span><span class="sxs-lookup"><span data-stu-id="24881-110">If your role relies on such a framework, you must add those assemblies toohello application package.</span></span>

<span data-ttu-id="24881-111">Antes que você compile e empacote seu aplicativo, verifique se a seguir hello:</span><span class="sxs-lookup"><span data-stu-id="24881-111">Before you build and package your application, verify hello following:</span></span>

* <span data-ttu-id="24881-112">Se usando o Visual studio, verifique se Olá **Copy Local** propriedade for definida muito**True** para cada assembly referenciada no seu projeto que não faz parte de saudação do SDK do Azure ou Olá do .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="24881-112">If using Visual studio, make sure hello **Copy Local** property is set too**True** for each referenced assembly in your project that is not part of hello Azure SDK or hello .NET Framework.</span></span>
* <span data-ttu-id="24881-113">Verifique se o arquivo Web. config de saudação não faz referência aos assemblies não usados no elemento de compilação de saudação.</span><span class="sxs-lookup"><span data-stu-id="24881-113">Make sure hello web.config file does not reference any unused assemblies in hello compilation element.</span></span>
* <span data-ttu-id="24881-114">Olá **ação de compilação** de cada. cshtml arquivo está definido muito**conteúdo**.</span><span class="sxs-lookup"><span data-stu-id="24881-114">hello **Build Action** of every .cshtml file is set too**Content**.</span></span> <span data-ttu-id="24881-115">Isso garante que os arquivos de saudação sejam exibidos corretamente no pacote de saudação e permite tooappear outros arquivos referenciados no pacote de saudação.</span><span class="sxs-lookup"><span data-stu-id="24881-115">This ensures that hello files will appear correctly in hello package and enables other referenced files tooappear in hello package.</span></span>

## <a name="assembly-targets-wrong-platform"></a><span data-ttu-id="24881-116">Plataforma incorreta de destinos de assembly</span><span class="sxs-lookup"><span data-stu-id="24881-116">Assembly targets wrong platform</span></span>
<span data-ttu-id="24881-117">O Azure é um ambiente de 64 bits.</span><span class="sxs-lookup"><span data-stu-id="24881-117">Azure is a 64-bit environment.</span></span> <span data-ttu-id="24881-118">Portanto, os assemblies do .NET compilados para um destino de 32 bits não funcionarão no Azure.</span><span class="sxs-lookup"><span data-stu-id="24881-118">Therefore, .NET assemblies compiled for a 32-bit target won't work on Azure.</span></span>

## <a name="role-throws-unhandled-exceptions-while-initializing-or-stopping"></a><span data-ttu-id="24881-119">A função gera exceções sem tratamento durante a inicialização ou interrupção</span><span class="sxs-lookup"><span data-stu-id="24881-119">Role throws unhandled exceptions while initializing or stopping</span></span>
<span data-ttu-id="24881-120">Todas as exceções que são geradas pelos métodos de saudação da saudação [RoleEntryPoint] classe, que inclui a saudação [OnStart], [OnStop], e [executar]os métodos são exceções sem tratamento.</span><span class="sxs-lookup"><span data-stu-id="24881-120">Any exceptions that are thrown by hello methods of hello [RoleEntryPoint] class, which includes hello [OnStart], [OnStop], and [Run] methods, are unhandled exceptions.</span></span> <span data-ttu-id="24881-121">Se uma exceção não tratada ocorrer em um desses métodos, a função hello reciclará.</span><span class="sxs-lookup"><span data-stu-id="24881-121">If an unhandled exception occurs in one of these methods, hello role will recycle.</span></span> <span data-ttu-id="24881-122">Se a função hello estiver Reciclando repetidamente, ela poderá lançar uma exceção sem tratamento toda vez que ele tenta toostart.</span><span class="sxs-lookup"><span data-stu-id="24881-122">If hello role is recycling repeatedly, it may be throwing an unhandled exception each time it tries toostart.</span></span>

## <a name="role-returns-from-run-method"></a><span data-ttu-id="24881-123">A função é retornada do método Run</span><span class="sxs-lookup"><span data-stu-id="24881-123">Role returns from Run method</span></span>
<span data-ttu-id="24881-124">Olá [executar] método é pretendido toorun indefinidamente.</span><span class="sxs-lookup"><span data-stu-id="24881-124">hello [Run] method is intended toorun indefinitely.</span></span> <span data-ttu-id="24881-125">Se seu código substituir Olá [executar] método, ele deverá ser suspendo indefinidamente.</span><span class="sxs-lookup"><span data-stu-id="24881-125">If your code overrides hello [Run] method, it should sleep indefinitely.</span></span> <span data-ttu-id="24881-126">Se hello [executar] método retorna, Olá função se reciclar.</span><span class="sxs-lookup"><span data-stu-id="24881-126">If hello [Run] method returns, hello role recycles.</span></span>

## <a name="incorrect-diagnosticsconnectionstring-setting"></a><span data-ttu-id="24881-127">Configuração incorreta de DiagnosticsConnectionString</span><span class="sxs-lookup"><span data-stu-id="24881-127">Incorrect DiagnosticsConnectionString setting</span></span>
<span data-ttu-id="24881-128">Se o aplicativo usa o diagnóstico do Azure, o arquivo de configuração do serviço deve especificar Olá `DiagnosticsConnectionString` configuração.</span><span class="sxs-lookup"><span data-stu-id="24881-128">If application uses Azure Diagnostics, your service configuration file must specify hello `DiagnosticsConnectionString` configuration setting.</span></span> <span data-ttu-id="24881-129">Essa configuração deve especificar uma conta de armazenamento do tooyour de conexão HTTPS no Azure.</span><span class="sxs-lookup"><span data-stu-id="24881-129">This setting should specify an HTTPS connection tooyour storage account in Azure.</span></span>

<span data-ttu-id="24881-130">tooensure que seu `DiagnosticsConnectionString` configuração está correta antes de implantar seu tooAzure do pacote de aplicativo, verifique se a seguinte hello:</span><span class="sxs-lookup"><span data-stu-id="24881-130">tooensure that your `DiagnosticsConnectionString` setting is correct before you deploy your application package tooAzure, verify hello following:</span></span>  

* <span data-ttu-id="24881-131">Olá `DiagnosticsConnectionString` definindo pontos de conta de armazenamento válida tooa no Azure.</span><span class="sxs-lookup"><span data-stu-id="24881-131">hello `DiagnosticsConnectionString` setting points tooa valid storage account in Azure.</span></span>  
  <span data-ttu-id="24881-132">Por padrão, essa configuração aponta toohello emulado conta de armazenamento, portanto você precisa alterar explicitamente essa configuração antes de implantar seu pacote de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="24881-132">By default, this setting points toohello emulated storage account, so you must explicitly change this setting before you deploy your application package.</span></span> <span data-ttu-id="24881-133">Se você não alterar essa configuração, uma exceção é lançada quando a instância de função hello tentativas de monitor de diagnóstico toostart hello.</span><span class="sxs-lookup"><span data-stu-id="24881-133">If you do not change this setting, an exception is thrown when hello role instance attempts toostart hello diagnostic monitor.</span></span> <span data-ttu-id="24881-134">Isso pode causar toorecycle de instância de função hello indefinidamente.</span><span class="sxs-lookup"><span data-stu-id="24881-134">This may cause hello role instance toorecycle indefinitely.</span></span>
* <span data-ttu-id="24881-135">Olá cadeia de caracteres de conexão é especificada no seguinte Olá [formato](../storage/common/storage-configure-connection-string.md).</span><span class="sxs-lookup"><span data-stu-id="24881-135">hello connection string is specified in hello following [format](../storage/common/storage-configure-connection-string.md).</span></span> <span data-ttu-id="24881-136">(protocolo de saudação deve ser especificado como HTTPS). Substituir *MyAccountName* com o nome de saudação da sua conta de armazenamento e *MyAccountKey* com sua chave de acesso:</span><span class="sxs-lookup"><span data-stu-id="24881-136">(hello protocol must be specified as HTTPS.) Replace *MyAccountName* with hello name of your storage account, and *MyAccountKey* with your access key:</span></span>    

        DefaultEndpointsProtocol=https;AccountName=MyAccountName;AccountKey=MyAccountKey

  <span data-ttu-id="24881-137">Se você estiver desenvolvendo seu aplicativo usando ferramentas do Azure para Microsoft Visual Studio, você pode usar tooset de páginas de propriedade Olá esse valor.</span><span class="sxs-lookup"><span data-stu-id="24881-137">If you are developing your application by using Azure Tools for Microsoft Visual Studio, you can use hello property pages tooset this value.</span></span>

## <a name="exported-certificate-does-not-include-private-key"></a><span data-ttu-id="24881-138">O certificado exportado não inclui a chave privada</span><span class="sxs-lookup"><span data-stu-id="24881-138">Exported certificate does not include private key</span></span>
<span data-ttu-id="24881-139">toorun uma função web no SSL, você deve garantir que seu certificado de gerenciamento exportado inclui a chave privada hello.</span><span class="sxs-lookup"><span data-stu-id="24881-139">toorun a web role under SSL, you must ensure that your exported management certificate includes hello private key.</span></span> <span data-ttu-id="24881-140">Se você usar o hello *Gerenciador de certificados do Windows* tooexport certificado do hello, ser tooselect se **Sim** para Olá **chave privada de saudação de exportação** opção.</span><span class="sxs-lookup"><span data-stu-id="24881-140">If you use hello *Windows Certificate Manager* tooexport hello certificate, be sure tooselect **Yes** for hello **Export hello private key** option.</span></span> <span data-ttu-id="24881-141">certificado Olá deve ser exportado em formato PFX hello, o que é Olá formato só tem suportado no momento.</span><span class="sxs-lookup"><span data-stu-id="24881-141">hello certificate must be exported in hello PFX format, which is hello only format currently supported.</span></span>

## <a name="next-steps"></a><span data-ttu-id="24881-142">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="24881-142">Next steps</span></span>
<span data-ttu-id="24881-143">Confira mais [artigos sobre solução de problemas](https://azure.microsoft.com/documentation/articles/?tag=top-support-issue&product=cloud-services) para serviços de nuvem.</span><span class="sxs-lookup"><span data-stu-id="24881-143">View more [troubleshooting articles](https://azure.microsoft.com/documentation/articles/?tag=top-support-issue&product=cloud-services) for cloud services.</span></span>

<span data-ttu-id="24881-144">Veja mais cenários de reciclagem da função na [Série de blogs de Kevin Williamson](http://blogs.msdn.com/b/kwill/archive/2013/08/09/windows-azure-paas-compute-diagnostics-data.aspx).</span><span class="sxs-lookup"><span data-stu-id="24881-144">View more role recycling scenarios at [Kevin Williamson's blog series](http://blogs.msdn.com/b/kwill/archive/2013/08/09/windows-azure-paas-compute-diagnostics-data.aspx).</span></span>

[RoleEntryPoint]: https://msdn.microsoft.com/library/microsoft.windowsazure.serviceruntime.roleentrypoint.aspx
[OnStart]: https://msdn.microsoft.com/library/microsoft.windowsazure.serviceruntime.roleentrypoint.onstart.aspx
[OnStop]: https://msdn.microsoft.com/library/microsoft.windowsazure.serviceruntime.roleentrypoint.onstop.aspx
[executar]: https://msdn.microsoft.com/library/microsoft.windowsazure.serviceruntime.roleentrypoint.run.aspx
