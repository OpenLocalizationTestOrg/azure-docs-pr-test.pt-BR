---
title: "Como monitorar um serviço de nuvem | Microsoft Docs"
description: "Saiba como monitorar serviços de nuvem usando o portal clássico do Azure."
services: cloud-services
documentationcenter: 
author: thraka
manager: timlt
editor: 
ms.assetid: 5c48d2fb-b8ea-420f-80df-7aebe2b66b1b
ms.service: cloud-services
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 12/07/2015
ms.author: adegeo
ms.openlocfilehash: c369b22cf068a473343b006eb1b06fdd350d31db
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/29/2017
---
# <a name="how-to-monitor-cloud-services"></a><span data-ttu-id="92db4-103">Como monitorar serviços de nuvem</span><span class="sxs-lookup"><span data-stu-id="92db4-103">How to Monitor Cloud Services</span></span>
[!INCLUDE [disclaimer](../../includes/disclaimer.md)]

<span data-ttu-id="92db4-104">Você pode monitorar as `key` métricas de desempenho de seus serviços de nuvem no portal clássico do Azure.</span><span class="sxs-lookup"><span data-stu-id="92db4-104">You can monitor `key` performance metrics for your cloud services in the Azure classic portal.</span></span> <span data-ttu-id="92db4-105">Você pode definir o nível de monitoramento como mínimo e detalhado para cada função do serviço, além de poder personalizar as exibições de monitoramento.</span><span class="sxs-lookup"><span data-stu-id="92db4-105">You can set the level of monitoring to minimal and verbose for each service role, and can customize the monitoring displays.</span></span> <span data-ttu-id="92db4-106">Os dados de monitoramento detalhados são armazenados em uma conta do armazenamento, que você poderá acessar fora do portal.</span><span class="sxs-lookup"><span data-stu-id="92db4-106">Verbose monitoring data is stored in a storage account, which you can access outside the portal.</span></span> 

<span data-ttu-id="92db4-107">O monitoramento das exibições no portal clássico do Azure são altamente configuráveis.</span><span class="sxs-lookup"><span data-stu-id="92db4-107">Monitoring displays in the Azure classic portal are highly configurable.</span></span> <span data-ttu-id="92db4-108">Você pode escolher as métricas que você deseja monitorar na lista de métricas na página **Monitoramento** e pode escolher quais métricas para plotar em gráficos de métricas na página **Monitoramento** e no painel.</span><span class="sxs-lookup"><span data-stu-id="92db4-108">You can choose the metrics you want to monitor in the metrics list on the **Monitor** page, and you can choose which metrics to plot in metrics charts on the **Monitor** page and the dashboard.</span></span> 

## <a name="concepts"></a><span data-ttu-id="92db4-109">Conceitos</span><span class="sxs-lookup"><span data-stu-id="92db4-109">Concepts</span></span>
<span data-ttu-id="92db4-110">Por padrão, o monitoramento mínimo é fornecido para um novo serviço de nuvem usando os contadores do desempenho coletados do sistema operacional do host para as instâncias de função (máquinas virtuais).</span><span class="sxs-lookup"><span data-stu-id="92db4-110">By default, minimal monitoring is provided for a new cloud service using performance counters gathered from the host operating system for the roles instances (virtual machines).</span></span> <span data-ttu-id="92db4-111">As métricas mínimas estão limitadas a percentual de CPU, entrada de dados, saída de dados, transferência de leitura e gravação de disco.</span><span class="sxs-lookup"><span data-stu-id="92db4-111">The minimal metrics are limited to CPU Percentage, Data In, Data Out, Disk Read Throughput, and Disk Write Throughput.</span></span> <span data-ttu-id="92db4-112">Configurando o monitoramento detalhado, você pode receber métricas adicionais com base nos dados de desempenho em máquinas virtuais (instâncias de função).</span><span class="sxs-lookup"><span data-stu-id="92db4-112">By configuring verbose monitoring, you can receive additional metrics based on performance data within the virtual machines (role instances).</span></span> <span data-ttu-id="92db4-113">As métricas detalhadas permitem uma análise mais próxima dos problemas que ocorrem durante operações de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="92db4-113">The verbose metrics enable closer analysis of issues that occur during application operations.</span></span>

<span data-ttu-id="92db4-114">Por padrão, os dados do contador de desempenho das instâncias de função passam por amostragem e são transferidos da instância de função em intervalos de 3 minutos.</span><span class="sxs-lookup"><span data-stu-id="92db4-114">By default performance counter data from role instances is sampled and transferred from the role instance at 3-minute intervals.</span></span> <span data-ttu-id="92db4-115">Quando você habilita o monitoramento detalhado, os dados brutos do contador de desempenho são agregados para cada instância de função e por instâncias de função para cada função em intervalos de 5 minutos, 1 hora e 12 horas.</span><span class="sxs-lookup"><span data-stu-id="92db4-115">When you enable verbose monitoring, the raw performance counter data is aggregated for each role instance and across role instances for each role at intervals of 5 minutes, 1 hour, and 12 hours.</span></span> <span data-ttu-id="92db4-116">Os dados agregados são limpos após 10 dias.</span><span class="sxs-lookup"><span data-stu-id="92db4-116">The aggregated data is purged after 10 days.</span></span>

<span data-ttu-id="92db4-117">Após habilitar o monitoramento detalhado, os dados de monitoramento agregados são armazenados nas tabelas em sua conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="92db4-117">After you enable verbose monitoring, the aggregated monitoring data is stored in tables in your storage account.</span></span> <span data-ttu-id="92db4-118">Para habilitar o monitoramento detalhado para uma função, você deve configurar uma cadeia de conexão de diagnóstico vinculada à sua conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="92db4-118">To enable verbose monitoring for a role, you must configure a diagnostics connection string that links to the storage account.</span></span> <span data-ttu-id="92db4-119">Você pode usar contas de armazenamento diferentes para funções diferentes.</span><span class="sxs-lookup"><span data-stu-id="92db4-119">You can use different storage accounts for different roles.</span></span>

<span data-ttu-id="92db4-120">Habilitar o monitoramento detalhado aumentará os custos de armazenamento relacionados ao armazenamento de dados, transferência de dados e às transações do armazenamento.</span><span class="sxs-lookup"><span data-stu-id="92db4-120">Enabling verbose monitoring increases your storage costs related to data storage, data transfer, and storage transactions.</span></span> <span data-ttu-id="92db4-121">O monitoramento mínimo não requer uma conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="92db4-121">Minimal monitoring does not require a storage account.</span></span> <span data-ttu-id="92db4-122">Os dados para as métricas, expostos no nível mínimo do monitoramento, não são armazenados na sua conta de armazenamento, mesmo que você defina o nível de monitoramento para detalhado.</span><span class="sxs-lookup"><span data-stu-id="92db4-122">The data for the metrics that are exposed at the minimal monitoring level are not stored in your storage account, even if you set the monitoring level to verbose.</span></span>

## <a name="how-to-configure-monitoring-for-cloud-services"></a><span data-ttu-id="92db4-123">Tutorial: Configurar o monitoramento para serviços de nuvem</span><span class="sxs-lookup"><span data-stu-id="92db4-123">How to: Configure monitoring for cloud services</span></span>
<span data-ttu-id="92db4-124">Use os procedimentos a seguir para configurar o monitoramento mínimo ou detalhado no portal clássico do Azure.</span><span class="sxs-lookup"><span data-stu-id="92db4-124">Use the following procedures to configure verbose or minimal monitoring in the Azure classic portal.</span></span> 

### <a name="before-you-begin"></a><span data-ttu-id="92db4-125">Antes de começar</span><span class="sxs-lookup"><span data-stu-id="92db4-125">Before you begin</span></span>
* <span data-ttu-id="92db4-126">Crie uma conta de armazenamento *clássico* para armazenar os dados de monitoramento.</span><span class="sxs-lookup"><span data-stu-id="92db4-126">Create a *classic* storage account to store the monitoring data.</span></span> <span data-ttu-id="92db4-127">Você pode usar contas de armazenamento diferentes para funções diferentes.</span><span class="sxs-lookup"><span data-stu-id="92db4-127">You can use different storage accounts for different roles.</span></span> <span data-ttu-id="92db4-128">Para obter mais informações, consulte [Como criar contas de armazenamento](../storage/common/storage-create-storage-account.md#create-a-storage-account).</span><span class="sxs-lookup"><span data-stu-id="92db4-128">For more information, see [How to create a storage account](../storage/common/storage-create-storage-account.md#create-a-storage-account).</span></span>
* <span data-ttu-id="92db4-129">Habilite o Diagnóstico do Azure para as funções do seu serviço de nuvem.</span><span class="sxs-lookup"><span data-stu-id="92db4-129">Enable Azure Diagnostics for your cloud service roles.</span></span> <span data-ttu-id="92db4-130">Consulte [Configurando os diagnósticos para os Serviços de Nuvem](cloud-services-dotnet-diagnostics.md).</span><span class="sxs-lookup"><span data-stu-id="92db4-130">See [Configuring Diagnostics for Cloud Services](cloud-services-dotnet-diagnostics.md).</span></span>

<span data-ttu-id="92db4-131">Certifique-se de que a cadeia de conexão de diagnóstico esteja presente na configuração da Função.</span><span class="sxs-lookup"><span data-stu-id="92db4-131">Ensure that the diagnostics connection string is present in the Role configuration.</span></span> <span data-ttu-id="92db4-132">Você não pode ativar o monitoramento detalhado até que habilite o Diagnóstico do Azure e inclua uma cadeia de conexão de diagnóstico na configuração da Função.</span><span class="sxs-lookup"><span data-stu-id="92db4-132">You cannot turn on verbose monitoring until you enable Azure Diagnostics and include a diagnostics connection string in the Role configuration.</span></span>   

> [!NOTE]
> <span data-ttu-id="92db4-133">Projetos direcionados ao Azure SDK 2.5 não incluíam automaticamente a cadeia de conexão de diagnóstico no modelo do projeto.</span><span class="sxs-lookup"><span data-stu-id="92db4-133">Projects targeting Azure SDK 2.5 did not automatically include the diagnostics connection string in the project template.</span></span> <span data-ttu-id="92db4-134">Para esses projetos, você precisa adicionar manualmente a cadeia de conexão de diagnóstico à configuração da Função.</span><span class="sxs-lookup"><span data-stu-id="92db4-134">For these projects, you need to manually add the diagnostics connection string to the Role configuration.</span></span>
> 
> 

<span data-ttu-id="92db4-135">**Para adicionar manualmente a cadeia de conexão de diagnóstico à configuração da Função**</span><span class="sxs-lookup"><span data-stu-id="92db4-135">**To manually add diagnostics connection string to Role configuration**</span></span>

1. <span data-ttu-id="92db4-136">Abra o projeto Serviço de Nuvem no Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="92db4-136">Open the Cloud Service project in Visual Studio</span></span>
2. <span data-ttu-id="92db4-137">Clique duas vezes em **Função** para abrir o designer de Função e selecione a guia **Configurações**</span><span class="sxs-lookup"><span data-stu-id="92db4-137">Double-click on the **Role** to open the Role designer and select the **Settings** tab</span></span>
3. <span data-ttu-id="92db4-138">Procure por uma configuração chamada **Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString**.</span><span class="sxs-lookup"><span data-stu-id="92db4-138">Look for a setting named **Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString**.</span></span> 
4. <span data-ttu-id="92db4-139">Se essa configuração não estiver presente, clique no botão **Adicionar Configuração** para adicioná-la à configuração e altere o tipo para a nova configuração **ConnectionString**</span><span class="sxs-lookup"><span data-stu-id="92db4-139">If this setting is not present, click on the **Add Setting** button to add it to the configuration and change the type for the new setting to **ConnectionString**</span></span>
5. <span data-ttu-id="92db4-140">Definir o valor da cadeia de conexão clicando no botão **...** .</span><span class="sxs-lookup"><span data-stu-id="92db4-140">Set the value for connection string the by clicking on the **...** button.</span></span> <span data-ttu-id="92db4-141">Isso abrirá uma caixa de diálogo que permite a seleção de uma conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="92db4-141">This will open up a dialog allowing you to select a storage account.</span></span>
   
    ![Configurações do Visual Studio](./media/cloud-services-how-to-monitor/CloudServices_Monitor_VisualStudioDiagnosticsConnectionString.png)

### <a name="to-change-the-monitoring-level-to-verbose-or-minimal"></a><span data-ttu-id="92db4-143">Para alterar o nível de monitoramento para detalhado ou mínimo</span><span class="sxs-lookup"><span data-stu-id="92db4-143">To change the monitoring level to verbose or minimal</span></span>
1. <span data-ttu-id="92db4-144">No [portal clássico do Azure](https://manage.windowsazure.com/), abra a página **Configurar** para implantar o serviço de nuvem.</span><span class="sxs-lookup"><span data-stu-id="92db4-144">In the [Azure classic portal](https://manage.windowsazure.com/), open the **Configure** page for the cloud service deployment.</span></span>
2. <span data-ttu-id="92db4-145">Em **Nível**, clique em **Detalhado** ou **Mínimo**.</span><span class="sxs-lookup"><span data-stu-id="92db4-145">In **Level**, click **Verbose** or **Minimal**.</span></span> 
3. <span data-ttu-id="92db4-146">Clique em **Salvar**.</span><span class="sxs-lookup"><span data-stu-id="92db4-146">Click **Save**.</span></span>

<span data-ttu-id="92db4-147">Após ativar o monitoramento detalhado, deve ser possível ver os dados de monitoramento no portal clássico do Azure dentro de uma hora.</span><span class="sxs-lookup"><span data-stu-id="92db4-147">After you turn on verbose monitoring, you should start seeing the monitoring data in the Azure classic portal within the hour.</span></span>

<span data-ttu-id="92db4-148">Os dados brutos do contador de desempenho e os dados de monitoramento agregados são armazenados na conta de armazenamento, em tabelas qualificadas pela ID da implantação para as funções.</span><span class="sxs-lookup"><span data-stu-id="92db4-148">The raw performance counter data and aggregated monitoring data are stored in the storage account in tables qualified by the deployment ID for the roles.</span></span> 

## <a name="how-to-receive-alerts-for-cloud-service-metrics"></a><span data-ttu-id="92db4-149">Tutorial: Receber alertas para métricas dos serviços de nuvem</span><span class="sxs-lookup"><span data-stu-id="92db4-149">How to: Receive alerts for cloud service metrics</span></span>
<span data-ttu-id="92db4-150">Você pode receber alertas baseados nas métricas de monitoramento do serviço de nuvem.</span><span class="sxs-lookup"><span data-stu-id="92db4-150">You can receive alerts based on your cloud service monitoring metrics.</span></span> <span data-ttu-id="92db4-151">Na página **Serviços de Gerenciamento** do portal clássico do Azure, você pode criar uma regra para disparar um alerta quando a métrica escolhida alcançar um valor especificado.</span><span class="sxs-lookup"><span data-stu-id="92db4-151">On the **Management Services** page of the Azure classic portal, you can create a rule to trigger an alert when the metric you choose reaches a value that you specify.</span></span> <span data-ttu-id="92db4-152">Você também pode escolher que um email seja enviado quando o alerta é disparado.</span><span class="sxs-lookup"><span data-stu-id="92db4-152">You can also choose to have email sent when the alert is triggered.</span></span> <span data-ttu-id="92db4-153">Para saber mais, confira [Como: receber notificações de alerta e gerenciar regras de alerta no Azure](http://go.microsoft.com/fwlink/?LinkId=309356).</span><span class="sxs-lookup"><span data-stu-id="92db4-153">For more information, see [How to: Receive Alert Notifications and Manage Alert Rules in Azure](http://go.microsoft.com/fwlink/?LinkId=309356).</span></span>

## <a name="how-to-add-metrics-to-the-metrics-table"></a><span data-ttu-id="92db4-154">Tutorial: Adicionar métricas à tabela de métricas</span><span class="sxs-lookup"><span data-stu-id="92db4-154">How to: Add metrics to the metrics table</span></span>
1. <span data-ttu-id="92db4-155">No [portal clássico do Azure](http://manage.windowsazure.com/), abra a página **Monitorar** para o serviço de nuvem.</span><span class="sxs-lookup"><span data-stu-id="92db4-155">In the [Azure classic portal](http://manage.windowsazure.com/), open the **Monitor** page for the cloud service.</span></span>
   
    <span data-ttu-id="92db4-156">Por padrão, a tabela de métricas exibe um subconjunto de métricas disponíveis.</span><span class="sxs-lookup"><span data-stu-id="92db4-156">By default, the metrics table displays a subset of the available metrics.</span></span> <span data-ttu-id="92db4-157">A ilustração mostra as métricas detalhadas padrão para um serviço de nuvem, que estão limitadas à contador de desempenho de memória\MBytes disponíveis, com os dados agregados à nível de função.</span><span class="sxs-lookup"><span data-stu-id="92db4-157">The illustration shows the default verbose metrics for a cloud service, which is limited to the Memory\Available MBytes performance counter, with data aggregated at the role level.</span></span> <span data-ttu-id="92db4-158">Use **Adicionar Métricas** para selecionar métricas agregadas e de nível de função adicionais para monitorar o portal clássico do Azure.</span><span class="sxs-lookup"><span data-stu-id="92db4-158">Use **Add Metrics** to select additional aggregate and role-level metrics to monitor in the Azure classic portal.</span></span>
   
    ![Exibição detalhada](./media/cloud-services-how-to-monitor/CloudServices_DefaultVerboseDisplay.png)
2. <span data-ttu-id="92db4-160">Para adicionar métricas à tabela de métricas:</span><span class="sxs-lookup"><span data-stu-id="92db4-160">To add metrics to the metrics table:</span></span>
   
   1. <span data-ttu-id="92db4-161">Clique em **Adicionar Métricas** para abrir **Escolher Métricas**, conforme mostrado abaixo.</span><span class="sxs-lookup"><span data-stu-id="92db4-161">Click **Add Metrics** to open **Choose Metrics**, shown below.</span></span>
      
       <span data-ttu-id="92db4-162">A primeira métrica disponível é expandida para mostrar as opções disponíveis.</span><span class="sxs-lookup"><span data-stu-id="92db4-162">The first available metric is expanded to show options that are available.</span></span> <span data-ttu-id="92db4-163">Para cada métrica, a primeira opção exibe os dados agregados de monitoramento para todas as funções.</span><span class="sxs-lookup"><span data-stu-id="92db4-163">For each metric, the top option displays aggregated monitoring data for all roles.</span></span> <span data-ttu-id="92db4-164">Além disso, você pode escolher funções individuais para a exibição de dados.</span><span class="sxs-lookup"><span data-stu-id="92db4-164">In addition, you can choose individual roles to display data for.</span></span>
      
       ![Adicionar Métricas](./media/cloud-services-how-to-monitor/CloudServices_AddMetrics.png)
   2. <span data-ttu-id="92db4-166">Para selecionar as métricas a exibir</span><span class="sxs-lookup"><span data-stu-id="92db4-166">To select metrics to display</span></span>
      
      * <span data-ttu-id="92db4-167">Clique na seta para baixo próxima à métrica para expandir as opções de monitoramento.</span><span class="sxs-lookup"><span data-stu-id="92db4-167">Click the down arrow by the metric to expand the monitoring options.</span></span>
      * <span data-ttu-id="92db4-168">Marque a caixa de seleção para cada opção de monitoramento que você deseja exibir.</span><span class="sxs-lookup"><span data-stu-id="92db4-168">Select the check box for each monitoring option you want to display.</span></span>
        
        <span data-ttu-id="92db4-169">Você pode exibir até 50 métricas na tabela de métricas.</span><span class="sxs-lookup"><span data-stu-id="92db4-169">You can display up to 50 metrics in the metrics table.</span></span>
        
        > [!TIP]
        > <span data-ttu-id="92db4-170">No monitoramento detalhado, a lista de métricas pode conter dezenas de métricas.</span><span class="sxs-lookup"><span data-stu-id="92db4-170">In verbose monitoring, the metrics list can contain dozens of metrics.</span></span> <span data-ttu-id="92db4-171">Para exibir uma barra de rolagem, passe o cursor do mouse pelo lado direito da caixa de diálogo.</span><span class="sxs-lookup"><span data-stu-id="92db4-171">To display a scrollbar, hover over the right side of the dialog box.</span></span> <span data-ttu-id="92db4-172">Para filtrar a lista, clique no ícone da busca e digite o texto na caixa da busca, conforme mostrado abaixo.</span><span class="sxs-lookup"><span data-stu-id="92db4-172">To filter the list, click the search icon, and enter text in the search box, as shown below.</span></span>
        > 
        > 
        
        ![Pesquisa de métricas adicionadas](./media/cloud-services-how-to-monitor/CloudServices_AddMetrics_Search.png)
3. <span data-ttu-id="92db4-174">Após concluir a seleção de métricas, clique em OK (marca de seleção).</span><span class="sxs-lookup"><span data-stu-id="92db4-174">After you finish selecting metrics, click OK (checkmark).</span></span>
   
    <span data-ttu-id="92db4-175">As métricas selecionadas são adicionadas à tabela de métricas, conforme mostrado abaixo.</span><span class="sxs-lookup"><span data-stu-id="92db4-175">The selected metrics are added to the metrics table, as shown below.</span></span>
   
    ![métricas de monitoramento](./media/cloud-services-how-to-monitor/CloudServices_Monitor_UpdatedMetrics.png)
4. <span data-ttu-id="92db4-177">Para excluir uma métrica da tabela de métricas, clique na métrica para selecioná-la e clique em **Excluir Métricas**.</span><span class="sxs-lookup"><span data-stu-id="92db4-177">To delete a metric from the metrics table, click the metric to select it, and then click **Delete Metric**.</span></span> <span data-ttu-id="92db4-178">(Você poderá ver **Excluir Métricas** somente quando uma métrica for selecionada).</span><span class="sxs-lookup"><span data-stu-id="92db4-178">(You only see **Delete Metric** when you have a metric selected.)</span></span>

### <a name="to-add-custom-metrics-to-the-metrics-table"></a><span data-ttu-id="92db4-179">Para adicionar métricas personalizadas à tabela de métricas</span><span class="sxs-lookup"><span data-stu-id="92db4-179">To add custom metrics to the metrics table</span></span>
<span data-ttu-id="92db4-180">O nível de monitoramento **detalhado** fornece uma lista de métricas padrão que você pode monitorar no portal.</span><span class="sxs-lookup"><span data-stu-id="92db4-180">The **Verbose** monitoring level provides a list of default metrics that you can monitor on the portal.</span></span> <span data-ttu-id="92db4-181">Além delas, você pode monitorar quaisquer métricas personalizadas ou contadores de desempenho definidos por seu aplicativo por meio do portal.</span><span class="sxs-lookup"><span data-stu-id="92db4-181">In addition to these you can monitor any custom metrics or performance counters defined by your application through the portal.</span></span>

<span data-ttu-id="92db4-182">As etapas a seguir pressupõem que você ativou nível de monitoramento **Detalhado** e configurou seu aplicativo para coletar e transferir os contadores de desempenho personalizados.</span><span class="sxs-lookup"><span data-stu-id="92db4-182">The following steps assume that you have turned on **Verbose** monitoring level and have configured your application to collect and transfer custom performance counters.</span></span> 

<span data-ttu-id="92db4-183">Para exibir os contadores de desempenho personalizados no portal, você precisa atualizar a configuração no wad-control-container:</span><span class="sxs-lookup"><span data-stu-id="92db4-183">To display the custom performance counters in the portal you need to update the configuration in wad-control-container:</span></span>

1. <span data-ttu-id="92db4-184">Abra o blob wad-control-container em sua conta de armazenamento de diagnóstico.</span><span class="sxs-lookup"><span data-stu-id="92db4-184">Open the wad-control-container blob in your diagnostics storage account.</span></span> <span data-ttu-id="92db4-185">Você pode usar o Visual Studio ou qualquer outro gerenciador de armazenamento para fazer isso.</span><span class="sxs-lookup"><span data-stu-id="92db4-185">You can use Visual Studio or any other storage explorer to do this.</span></span>
   
    ![Gerenciador de Servidores do Visual Studio](./media/cloud-services-how-to-monitor/CloudServices_Monitor_VisualStudioBlobExplorer.png)
2. <span data-ttu-id="92db4-187">Navegue pelo caminho do blob usando o padrão **DeploymentId/RoleName/RoleInstance** para localizar a configuração para sua instância de função.</span><span class="sxs-lookup"><span data-stu-id="92db4-187">Navigate the blob path using the pattern **DeploymentId/RoleName/RoleInstance** to find the configuration for your role instance.</span></span> 
   
    ![Gerenciador de Armazenamento do Visual Studio](./media/cloud-services-how-to-monitor/CloudServices_Monitor_VisualStudioStorage.png)
3. <span data-ttu-id="92db4-189">Baixe o arquivo de configuração em sua instância de função e atualize-o para incluir todos os contadores de desempenho personalizados.</span><span class="sxs-lookup"><span data-stu-id="92db4-189">Download the configuration file for your role instance and update it to include any custom performance counters.</span></span> <span data-ttu-id="92db4-190">Por exemplo, para monitorar *Bytes de Gravação de Disco/s* para a *unidade C* adicione o seguinte no nó **PerformanceCounters\Subscriptions**</span><span class="sxs-lookup"><span data-stu-id="92db4-190">For example to monitor *Disk Write Bytes/sec* for the *C drive* add the following under **PerformanceCounters\Subscriptions** node</span></span>
   
    ```xml
    <PerformanceCounterConfiguration>
    <CounterSpecifier>\LogicalDisk(C:)\Disk Write Bytes/sec</CounterSpecifier>
    <SampleRateInSeconds>180</SampleRateInSeconds>
    </PerformanceCounterConfiguration>
    ```
4. <span data-ttu-id="92db4-191">Salve as alterações e carregue o arquivo de configuração no mesmo local, substituindo o arquivo existente no blob.</span><span class="sxs-lookup"><span data-stu-id="92db4-191">Save the changes and upload the configuration file back to the same location overwriting the existing file in the blob.</span></span>
5. <span data-ttu-id="92db4-192">Alterne para modo Detalhado na configuração do portal clássico do Azure.</span><span class="sxs-lookup"><span data-stu-id="92db4-192">Toggle to Verbose mode in the Azure classic portal configuration.</span></span> <span data-ttu-id="92db4-193">Se você já estivesse no modo Detalhado, teria que alternar para o modo mínimo e voltar ao detalhado.</span><span class="sxs-lookup"><span data-stu-id="92db4-193">If you were in Verbose mode already you will have to toggle to minimal and back to verbose.</span></span>
6. <span data-ttu-id="92db4-194">O contador de desempenho personalizados estará disponível na caixa de diálogo **Adicionar Métricas** .</span><span class="sxs-lookup"><span data-stu-id="92db4-194">The custom performance counter will now be available in the **Add Metrics** dialog box.</span></span> 

## <a name="how-to-customize-the-metrics-chart"></a><span data-ttu-id="92db4-195">Tutorial: Personalizar o gráfico de métricas</span><span class="sxs-lookup"><span data-stu-id="92db4-195">How to: Customize the metrics chart</span></span>
1. <span data-ttu-id="92db4-196">Na tabela de métricas, selecione até 6 métricas para plotar no gráfico de métricas.</span><span class="sxs-lookup"><span data-stu-id="92db4-196">In the metrics table, select up to 6 metrics to plot on the metrics chart.</span></span> <span data-ttu-id="92db4-197">Para selecionar uma métrica, clique na caixa de seleção à esquerda.</span><span class="sxs-lookup"><span data-stu-id="92db4-197">To select a metric, click the check box on its left side.</span></span> <span data-ttu-id="92db4-198">Para remover uma métrica do gráfico de métricas, desmarque a caixa de seleção na tabela de métricas.</span><span class="sxs-lookup"><span data-stu-id="92db4-198">To remove a metric from the metrics chart, clear its check box in the metrics table.</span></span>
   
    <span data-ttu-id="92db4-199">Conforme você seleciona métricas da tabela de métricas, elas são adicionadas ao gráfico de métricas.</span><span class="sxs-lookup"><span data-stu-id="92db4-199">As you select metrics in the metrics table, the metrics are added to the metrics chart.</span></span> <span data-ttu-id="92db4-200">Em uma exibição estreita, uma lista suspensa de **n mais** contém os cabeçalhos de métrica que não caberão na exibição.</span><span class="sxs-lookup"><span data-stu-id="92db4-200">On a narrow display, an **n more** drop-down list contains metric headers that won't fit the display.</span></span>
2. <span data-ttu-id="92db4-201">Para alternar entre a exibição dos valores relativos (somente valor final para cada métrica) e os valores absolutos (eixo Y exibido), selecione Relativo ou Absoluto na parte superior do gráfico.</span><span class="sxs-lookup"><span data-stu-id="92db4-201">To switch between displaying relative values (final value only for each metric) and absolute values (Y axis displayed), select Relative or Absolute at the top of the chart.</span></span>
   
    ![Relativo ou Absoluto](./media/cloud-services-how-to-monitor/CloudServices_Monitor_RelativeAbsolute.png)
3. <span data-ttu-id="92db4-203">Para alterar o intervalo de tempo de exibição do gráfico de métricas, selecione 1 hora, 24 horas ou 7 dias na parte superior do gráfico.</span><span class="sxs-lookup"><span data-stu-id="92db4-203">To change the time range the metrics chart displays, select 1 hour, 24 hours, or 7 days at the top of the chart.</span></span>
   
    ![Período de exibição do monitoramento](./media/cloud-services-how-to-monitor/CloudServices_Monitor_DisplayPeriod.png)
   
    <span data-ttu-id="92db4-205">No gráfico de métricas do painel, o método para plotar métricas é diferente.</span><span class="sxs-lookup"><span data-stu-id="92db4-205">On the dashboard metrics chart, the method for plotting metrics is different.</span></span> <span data-ttu-id="92db4-206">Um conjunto padrão de métricas está disponível e métricas são adicionadas ou removidas selecionando o cabeçalho da métrica.</span><span class="sxs-lookup"><span data-stu-id="92db4-206">A standard set of metrics is available, and metrics are added or removed by selecting the metric header.</span></span>

### <a name="to-customize-the-metrics-chart-on-the-dashboard"></a><span data-ttu-id="92db4-207">Para personalizar o gráfico de métricas no painel</span><span class="sxs-lookup"><span data-stu-id="92db4-207">To customize the metrics chart on the dashboard</span></span>
1. <span data-ttu-id="92db4-208">Abra o painel do serviço de nuvem.</span><span class="sxs-lookup"><span data-stu-id="92db4-208">Open the dashboard for the cloud service.</span></span>
2. <span data-ttu-id="92db4-209">Adicionar ou remover métricas do gráfico:</span><span class="sxs-lookup"><span data-stu-id="92db4-209">Add or remove metrics from the chart:</span></span>
   
   * <span data-ttu-id="92db4-210">Para plotar uma nova métrica, marque a caixa de seleção da métrica nos cabeçalhos do gráfico.</span><span class="sxs-lookup"><span data-stu-id="92db4-210">To plot a new metric, select the check box for the metric in the chart headers.</span></span> <span data-ttu-id="92db4-211">Em uma exibição estreita, clique na seta para baixo ***n*??metrics** para plotar uma métrica que a área de cabeçalho do gráfico não pode exibir.</span><span class="sxs-lookup"><span data-stu-id="92db4-211">On a narrow display, click the down arrow by ***n*??metrics** to plot a metric the chart header area can't display.</span></span>
   * <span data-ttu-id="92db4-212">Para excluir uma métrica que seja plotada no gráfico, desmarque a caixa de seleção próxima ao cabeçalho.</span><span class="sxs-lookup"><span data-stu-id="92db4-212">To delete a metric that is plotted on the chart, clear the check box by its header.</span></span>
   
3. <span data-ttu-id="92db4-213">Alterne entre exibições **Relativas** e **Absoluta**.</span><span class="sxs-lookup"><span data-stu-id="92db4-213">Switch between **Relative** and **Absolute** displays.</span></span>
4. <span data-ttu-id="92db4-214">Escolha 1 hora, 24, horas ou 7 dias para exibição dos dados.</span><span class="sxs-lookup"><span data-stu-id="92db4-214">Choose 1 hour, 24 hours, or 7 days of data to display.</span></span>

## <a name="how-to-access-verbose-monitoring-data-outside-the-azure-classic-portal"></a><span data-ttu-id="92db4-215">Como acessar dados do monitoramento detalhado fora do portal clássico do Azure</span><span class="sxs-lookup"><span data-stu-id="92db4-215">How to: Access verbose monitoring data outside the Azure classic portal</span></span>
<span data-ttu-id="92db4-216">Os dados do monitoramento detalhado são armazenados em tabelas nas contas de armazenamento que você especifica para cada função.</span><span class="sxs-lookup"><span data-stu-id="92db4-216">Verbose monitoring data is stored in tables in the storage accounts that you specify for each role.</span></span> <span data-ttu-id="92db4-217">Para cada implantação do serviço de nuvem, seis tabelas são criadas para a função.</span><span class="sxs-lookup"><span data-stu-id="92db4-217">For each cloud service deployment, six tables are created for the role.</span></span> <span data-ttu-id="92db4-218">Duas tabelas são criadas para cada (5 minutos, 1 hora e 12 horas).</span><span class="sxs-lookup"><span data-stu-id="92db4-218">Two tables are created for each (5 minutes, 1 hour, and 12 hours).</span></span> <span data-ttu-id="92db4-219">Uma dessas tabelas armazena as agregações de nível de função; outra tabela armazena as agregações para as instâncias de função.</span><span class="sxs-lookup"><span data-stu-id="92db4-219">One of these tables stores role-level aggregations; the other table stores aggregations for role instances.</span></span> 

<span data-ttu-id="92db4-220">Os nomes das tabelas têm o formato a seguir:</span><span class="sxs-lookup"><span data-stu-id="92db4-220">The table names have the following format:</span></span>

```
WAD*deploymentID*PT*aggregation_interval*[R|RI]Table
```

<span data-ttu-id="92db4-221">onde:</span><span class="sxs-lookup"><span data-stu-id="92db4-221">where:</span></span>

* <span data-ttu-id="92db4-222">*deploymentID* é a GUID atribuída à implantação do serviço de nuvem</span><span class="sxs-lookup"><span data-stu-id="92db4-222">*deploymentID* is the GUID assigned to the cloud service deployment</span></span>
* <span data-ttu-id="92db4-223">*aggregation_interval* = 5M, 1H ou 12H</span><span class="sxs-lookup"><span data-stu-id="92db4-223">*aggregation_interval* = 5M, 1H, or 12H</span></span>
* <span data-ttu-id="92db4-224">agregações de nível de função = R</span><span class="sxs-lookup"><span data-stu-id="92db4-224">role-level aggregations = R</span></span>
* <span data-ttu-id="92db4-225">agregações para instâncias de função = RI</span><span class="sxs-lookup"><span data-stu-id="92db4-225">aggregations for role instances = RI</span></span>

<span data-ttu-id="92db4-226">Por exemplo, as tabelas a seguir armazenariam os dados agregados do monitoramento detalhado em intervalos de 1 hora:</span><span class="sxs-lookup"><span data-stu-id="92db4-226">For example, the following tables would store verbose monitoring data aggregated at 1-hour intervals:</span></span>

```
WAD8b7c4233802442b494d0cc9eb9d8dd9fPT1HRTable (hourly aggregations for the role)

WAD8b7c4233802442b494d0cc9eb9d8dd9fPT1HRITable (hourly aggregations for role instances)
```
