---
title: "Preparar uma implantação do serviço de nuvem (Node.js) | Microsoft Docs"
description: "Saiba como implantar seu aplicativo Azure para um ambiente de preparo e depois implantar em um ambiente de produção usando a permuta do IP Virtual (VIP)."
services: cloud-services
documentationcenter: nodejs
author: TomArcher
manager: routlaw
editor: 
ms.assetid: d65d26a6-b424-49cd-a88c-7ef46bb112a8
ms.service: cloud-services
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: nodejs
ms.topic: article
ms.date: 08/17/2017
ms.author: tarcher
ms.openlocfilehash: b3000ed769e8c60eccb21e26f53ce7ccb7e68d7f
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/18/2017
---
# <a name="staging-an-application-in-azure"></a><span data-ttu-id="65edd-103">Preparando um aplicativo no Azure</span><span class="sxs-lookup"><span data-stu-id="65edd-103">Staging an Application in Azure</span></span>
<span data-ttu-id="65edd-104">Um aplicativo empacotado pode ser implantado no ambiente de preparo no Azure para ser testado antes de movê-lo para o ambiente de produção onde o aplicativo pode ser acessado na Internet.</span><span class="sxs-lookup"><span data-stu-id="65edd-104">A packaged application can be deployed to the staging environment in Azure to be tested before you move it to the production environment in which the application is accessible on the Internet.</span></span> <span data-ttu-id="65edd-105">O ambiente de preparo é exatamente igual ao ambiente de produção, exceto que você só poderá acessar o aplicativo preparado com uma URL ofuscada que é gerada pelo Azure.</span><span class="sxs-lookup"><span data-stu-id="65edd-105">The staging environment is exactly like the production environment, except that you can only access the staged application with an obfuscated URL that is generated by Azure.</span></span> <span data-ttu-id="65edd-106">Após verificar que seu aplicativo está funcionando corretamente, ele pode ser implantado no ambiente de produção executando uma permuta do VIP (IP Virtual).</span><span class="sxs-lookup"><span data-stu-id="65edd-106">After you have verified that your application is working correctly, it can be deployed to the production environment by performing a Virtual IP (VIP) swap.</span></span>

> [!NOTE]
> <span data-ttu-id="65edd-107">As etapas deste artigo se aplicam somente a aplicativos de nó hospedados como um Serviço de Nuvem do Azure.</span><span class="sxs-lookup"><span data-stu-id="65edd-107">The steps in this article only apply to node applications hosted as an Azure Cloud Service.</span></span>
> 
> 

## <a name="step-1-stage-an-application"></a><span data-ttu-id="65edd-108">Etapa 1: Preparar um aplicativo</span><span class="sxs-lookup"><span data-stu-id="65edd-108">Step 1: Stage an Application</span></span>
<span data-ttu-id="65edd-109">Esta tarefa aborda como preparar um aplicativo usando o **Microsoft Azure PowerShell**.</span><span class="sxs-lookup"><span data-stu-id="65edd-109">This task covers how to stage an application by using the **Microsoft Azure PowerShell**.</span></span>

1. <span data-ttu-id="65edd-110">Ao publicar um serviço, basta passar o parâmetro **-Slot** para o cmdlet **Publish-AzureServiceProject**.</span><span class="sxs-lookup"><span data-stu-id="65edd-110">When publishing a service, simply pass the **-Slot** parameter to the **Publish-AzureServiceProject** cmdlet.</span></span>
   
   ```powershell
   Publish-AzureServiceProject -Slot staging
   ```
2. <span data-ttu-id="65edd-111">Faça logon no [portal clássico do Azure] e selecione **Serviços de Nuvem**.</span><span class="sxs-lookup"><span data-stu-id="65edd-111">Log on to the [Azure classic portal] and select **Cloud Services**.</span></span> <span data-ttu-id="65edd-112">Após o serviço de nuvem ser criado e o status da coluna **Preparo** ter sido atualizado para **Executando**, clique no nome de serviço.</span><span class="sxs-lookup"><span data-stu-id="65edd-112">After the cloud service is created and the **Staging** column status has been updated to **Running**, click on the service name.</span></span>
   
   ![portal exibindo um serviço em execução][cloud-service]
3. <span data-ttu-id="65edd-114">Selecione o **Painel** e, em seguida, selecione **Preparo**.</span><span class="sxs-lookup"><span data-stu-id="65edd-114">Select the **Dashboard**, and then select **Staging**.</span></span>
   
   ![painel de serviço de nuvem][cloud-service-dashboard]
4. <span data-ttu-id="65edd-116">Observe o valor na entrada da **URL do Site** à direita.</span><span class="sxs-lookup"><span data-stu-id="65edd-116">Note the value in the **Site URL** entry to the right.</span></span> <span data-ttu-id="65edd-117">O nome DNS é uma ID interna ofuscada que é gerada pelo Azure.</span><span class="sxs-lookup"><span data-stu-id="65edd-117">The DNS name is an obfuscated internal ID that Azure generated.</span></span>
   
    ![URL do Site][cloud-service-staging-url]

<span data-ttu-id="65edd-119">Agora você pode verificar que o aplicativo está funcionando corretamente no ambiente de preparo usando a URL do site de preparo.</span><span class="sxs-lookup"><span data-stu-id="65edd-119">Now you can verify that the application is working correctly in the staging environment by using the staging site URL.</span></span>

## <a name="step-2-upgrade-an-application-in-production-by-swapping-vips"></a><span data-ttu-id="65edd-120">Etapa 2: Atualizar um aplicativo em produção permutando VIPs</span><span class="sxs-lookup"><span data-stu-id="65edd-120">Step 2: Upgrade an Application in Production by Swapping VIPs</span></span>
<span data-ttu-id="65edd-121">Após verificar a versão atualizada de um aplicativo no ambiente de preparo, você pode rapidamente torná-lo disponível em produção permutando os VIPs (IPs virtuais) do ambiente de preparo e de produção.</span><span class="sxs-lookup"><span data-stu-id="65edd-121">After you have verified the upgraded version of an application in the staging environment, you can quickly make it available in production by swapping the virtual IPs (VIPs) of the staging and production environments.</span></span>

> [!NOTE]
> <span data-ttu-id="65edd-122">Essa etapa pressupõe que você já implantou um aplicativo na produção e preparou a versão atualizada do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="65edd-122">This step assumes that you have already deployed an application to production and staged the upgraded version of the application.</span></span>
> 
> 

1. <span data-ttu-id="65edd-123">Faça logon no [portal clássico do Azure], clique em **Serviços de Nuvem** e selecione o nome do serviço.</span><span class="sxs-lookup"><span data-stu-id="65edd-123">Log into the [Azure classic portal], click **Cloud Services** and then select the service name.</span></span>
2. <span data-ttu-id="65edd-124">No **Painel**, selecione **Preparo** e, em seguida, clique em **Permutar** na parte inferior da página.</span><span class="sxs-lookup"><span data-stu-id="65edd-124">From the **Dashboard**, select **Staging**, and then click **Swap** at the bottom of the page.</span></span> <span data-ttu-id="65edd-125">Isso abre a caixa de diálogo Permuta de VIP.</span><span class="sxs-lookup"><span data-stu-id="65edd-125">This opens the VIP Swap dialog.</span></span>
   
   ![caixa de diálogo permuta de vip][vip-swap-dialog]
3. <span data-ttu-id="65edd-127">Revise as informações e, em seguida, clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="65edd-127">Review the information, and then click **OK**.</span></span> <span data-ttu-id="65edd-128">As duas implantações começam a ser atualizadas à medida que o ambiente de preparo é permutado para a produção e a implantação de produção é permutada para o preparo.</span><span class="sxs-lookup"><span data-stu-id="65edd-128">The two deployments begin updating as the staging deployment switches to production and the production deployment switches to staging.</span></span>

<span data-ttu-id="65edd-129">Você preparou uma implantação e atualizou uma implantação em produção com sucesso permutando VIPs com a implantação em preparo.</span><span class="sxs-lookup"><span data-stu-id="65edd-129">You have successfully staged a deployment and upgraded a production deployment by swapping VIPs with the deployment in staging.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="65edd-130">Recursos adicionais</span><span class="sxs-lookup"><span data-stu-id="65edd-130">Additional Resources</span></span>
* <span data-ttu-id="65edd-131">[Como implantar um serviço atualizado na produção permutando VIPs no Azure]</span><span class="sxs-lookup"><span data-stu-id="65edd-131">[How to Deploy a Service Upgrade to Production by Swapping VIPs in Azure]</span></span>

<span data-ttu-id="65edd-132">[portal clássico do Azure]: http://manage.windowsazure.com</span><span class="sxs-lookup"><span data-stu-id="65edd-132">[Azure classic portal]: http://manage.windowsazure.com</span></span>
[cloud-service]: ./media/cloud-services-nodejs-stage-application/staging-cloud-service-running.png
[cloud-service-dashboard]: ./media/cloud-services-nodejs-stage-application/cloud-service-dashboard-staging.png
[cloud-service-staging-url]: ./media/cloud-services-nodejs-stage-application/cloud-service-staging-url.png
[vip-swap-dialog]: ./media/cloud-services-nodejs-stage-application/vip-swap-dialog.png
<span data-ttu-id="65edd-133">[Como implantar um serviço atualizado na produção permutando VIPs no Azure]: cloud-services-how-to-manage.md#how-to-swap-deployments-to-promote-a-staged-deployment-to-production</span><span class="sxs-lookup"><span data-stu-id="65edd-133">[How to Deploy a Service Upgrade to Production by Swapping VIPs in Azure]: cloud-services-how-to-manage.md#how-to-swap-deployments-to-promote-a-staged-deployment-to-production</span></span>
