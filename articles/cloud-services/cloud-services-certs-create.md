---
title: "Serviços de nuvem e certificados de gerenciamento | Microsoft Docs"
description: Saiba como criar e usar certificados com o Microsoft Azure
services: cloud-services
documentationcenter: .net
author: Thraka
manager: timlt
editor: 
ms.assetid: fc70d00d-899b-4771-855f-44574dc4bfc6
ms.service: cloud-services
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/19/2017
ms.author: adegeo
ms.openlocfilehash: f760bfd93b19c43d12889b5dd38015c5eba0a8ac
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/18/2017
---
# <a name="certificates-overview-for-azure-cloud-services"></a><span data-ttu-id="627f0-103">Visão geral sobre certificados para os Serviços de Nuvem do Azure</span><span class="sxs-lookup"><span data-stu-id="627f0-103">Certificates overview for Azure Cloud Services</span></span>
<span data-ttu-id="627f0-104">Os certificados são usados no Azure para os serviços de nuvem ([certificados de serviço](#what-are-service-certificates)) e para a autenticação na API de gerenciamento ([certificados de gerenciamento](#what-are-management-certificates) ao usar o Portal Clássico do Azure e não o Portal não clássico do Azure).</span><span class="sxs-lookup"><span data-stu-id="627f0-104">Certificates are used in Azure for cloud services ([service certificates](#what-are-service-certificates)) and for authenticating with the management API ([management certificates](#what-are-management-certificates) when using the Azure classic portal and not the non-classic Azure portal).</span></span> <span data-ttu-id="627f0-105">Esse tópico fornece uma visão geral de ambos os tipos de certificado, como [criá-los](#create) e [implantá-los](#deploy) no Azure.</span><span class="sxs-lookup"><span data-stu-id="627f0-105">This topic gives a general overview of both certificate types, how to [create](#create) and [deploy](#deploy) them to Azure.</span></span>

<span data-ttu-id="627f0-106">Os certificados usados no Azure são certificados x.509 v3, que podem ser assinados por outro certificado confiável ou ser autoassinados.</span><span class="sxs-lookup"><span data-stu-id="627f0-106">Certificates used in Azure are x.509 v3 certificates and can be signed by another trusted certificate or they can be self-signed.</span></span> <span data-ttu-id="627f0-107">Um certificado autoassinado é assinado por seu próprio criador, portanto não é considerado confiável por padrão.</span><span class="sxs-lookup"><span data-stu-id="627f0-107">A self-signed certificate is signed by its own creator, therefore it is not trusted by default.</span></span> <span data-ttu-id="627f0-108">A maioria dos navegadores pode ignorar esse problema.</span><span class="sxs-lookup"><span data-stu-id="627f0-108">Most browsers can ignore this problem.</span></span> <span data-ttu-id="627f0-109">Você só deve usar certificados autoassinados ao desenvolver e testar seus serviços de nuvem.</span><span class="sxs-lookup"><span data-stu-id="627f0-109">You should only use self-signed certificates when developing and testing your cloud services.</span></span> 

<span data-ttu-id="627f0-110">Os certificados usados pelo Azure podem conter uma chave particular ou pública.</span><span class="sxs-lookup"><span data-stu-id="627f0-110">Certificates used by Azure can contain a private or a public key.</span></span> <span data-ttu-id="627f0-111">Certificados têm uma impressão digital, que é um meio de identificá-los de maneira inequívoca.</span><span class="sxs-lookup"><span data-stu-id="627f0-111">Certificates have a thumbprint that provides a means to identify them in an unambiguous way.</span></span> <span data-ttu-id="627f0-112">Essa impressão digital é usada no [arquivo de configuração](cloud-services-configure-ssl-certificate.md) do Azure para identificar qual certificado um serviço de nuvem deve usar.</span><span class="sxs-lookup"><span data-stu-id="627f0-112">This thumbprint is used in the Azure [configuration file](cloud-services-configure-ssl-certificate.md) to identify which certificate a cloud service should use.</span></span> 

## <a name="what-are-service-certificates"></a><span data-ttu-id="627f0-113">O que são certificados de serviço?</span><span class="sxs-lookup"><span data-stu-id="627f0-113">What are service certificates?</span></span>
<span data-ttu-id="627f0-114">Certificados de serviço são anexados aos serviços de nuvem e possibilitam que a comunicação feita com e por meio deles seja segura.</span><span class="sxs-lookup"><span data-stu-id="627f0-114">Service certificates are attached to cloud services and enable secure communication to and from the service.</span></span> <span data-ttu-id="627f0-115">Por exemplo, se você implantou uma função web, convém fornecer um certificado que pode autenticar um ponto de extremidade HTTPS exposto.</span><span class="sxs-lookup"><span data-stu-id="627f0-115">For example, if you deployed a web role, you would want to supply a certificate that can authenticate an exposed HTTPS endpoint.</span></span> <span data-ttu-id="627f0-116">Certificados de serviço, definidos em sua definição de serviço, são implantados automaticamente na máquina virtual que está executando uma instância de sua função.</span><span class="sxs-lookup"><span data-stu-id="627f0-116">Service certificates, defined in your service definition, are automatically deployed to the virtual machine that is running an instance of your role.</span></span> 

<span data-ttu-id="627f0-117">Você pode carregar certificados de serviço no Portal Clássico do Azure usando o Portal Clássico do Azure ou o modelo de implantação clássico.</span><span class="sxs-lookup"><span data-stu-id="627f0-117">You can upload service certificates to Azure classic portal either using the Azure classic portal or by using the classic deployment model.</span></span> <span data-ttu-id="627f0-118">Os certificados de serviço são associados um serviço de nuvem específico.</span><span class="sxs-lookup"><span data-stu-id="627f0-118">Service certificates are associated with a specific cloud service.</span></span> <span data-ttu-id="627f0-119">Eles são atribuídos a uma implantação no arquivo de definição de serviço.</span><span class="sxs-lookup"><span data-stu-id="627f0-119">They are assigned to a deployment in the service definition file.</span></span>

<span data-ttu-id="627f0-120">Certificados de serviço podem ser gerenciados separadamente de seus serviços e podem ser gerenciados por indivíduos diferentes.</span><span class="sxs-lookup"><span data-stu-id="627f0-120">Service certificates can be managed separately from your services, and may be managed by different individuals.</span></span> <span data-ttu-id="627f0-121">Por exemplo, um desenvolvedor pode carregar um pacote de serviço que se refere a um certificado que um gerente de TI carregou anteriormente no Azure.</span><span class="sxs-lookup"><span data-stu-id="627f0-121">For example, a developer may upload a service package that refers to a certificate that an IT manager has previously uploaded to Azure.</span></span> <span data-ttu-id="627f0-122">Um gerente de TI pode gerenciar e renovar esse certificado alterando a configuração do serviço sem precisar carregar um novo pacote de serviço.</span><span class="sxs-lookup"><span data-stu-id="627f0-122">An IT manager can manage and renew that certificate (changing the configuration of the service) without needing to upload a new service package.</span></span> <span data-ttu-id="627f0-123">A atualização sem um novo pacote de serviço é possível porque o nome lógico, o nome do repositório e o local do certificado estão no arquivo de definição de serviço, enquanto que a impressão digital do certificado está especificada no arquivo de configuração de serviço.</span><span class="sxs-lookup"><span data-stu-id="627f0-123">Updating without a new service package is possible because the logical name, store name, and location of the certificate is in the service definition file and while the certificate thumbprint is specified in the service configuration file.</span></span> <span data-ttu-id="627f0-124">Para atualizar o certificado, é necessário apenas carregar um novo certificado e alterar o valor da impressão digital no arquivo de configuração de serviço.</span><span class="sxs-lookup"><span data-stu-id="627f0-124">To update the certificate, it's only necessary to upload a new certificate and change the thumbprint value in the service configuration file.</span></span>

>[!Note]
><span data-ttu-id="627f0-125">O artigo [Perguntas frequentes sobre Serviços de Nuvem](cloud-services-faq.md) tem algumas informações úteis sobre certificados.</span><span class="sxs-lookup"><span data-stu-id="627f0-125">The [Cloud Services FAQ](cloud-services-faq.md) article has some helpful information about certificates.</span></span>

## <a name="what-are-management-certificates"></a><span data-ttu-id="627f0-126">O que são certificados de gerenciamento?</span><span class="sxs-lookup"><span data-stu-id="627f0-126">What are management certificates?</span></span>
<span data-ttu-id="627f0-127">Os certificados de gerenciamento permitem que você autentique com o modelo de implantação clássico.</span><span class="sxs-lookup"><span data-stu-id="627f0-127">Management certificates allow you to authenticate with the classic deployment model.</span></span> <span data-ttu-id="627f0-128">Muitos programas e ferramentas (como o Visual Studio ou o SDK do Azure) usam esses certificados para automatizar a configuração e a implantação de diversos serviços do Azure.</span><span class="sxs-lookup"><span data-stu-id="627f0-128">Many programs and tools (such as Visual Studio or the Azure SDK) use these certificates to automate configuration and deployment of various Azure services.</span></span> <span data-ttu-id="627f0-129">Eles serviços não estão, na verdade, relacionados a serviços de nuvem.</span><span class="sxs-lookup"><span data-stu-id="627f0-129">These are not really related to cloud services.</span></span> 

> [!WARNING]
> <span data-ttu-id="627f0-130">Portanto, tenha cuidado!</span><span class="sxs-lookup"><span data-stu-id="627f0-130">Be careful!</span></span> <span data-ttu-id="627f0-131">Esses tipos de certificados permitem que qualquer pessoa que os utilize para autenticação gerencie a assinatura à qual eles estão associados.</span><span class="sxs-lookup"><span data-stu-id="627f0-131">These types of certificates allow anyone who authenticates with them to manage the subscription they are associated with.</span></span> 
> 
> 

### <a name="limitations"></a><span data-ttu-id="627f0-132">Limitações</span><span class="sxs-lookup"><span data-stu-id="627f0-132">Limitations</span></span>
<span data-ttu-id="627f0-133">Há um limite de 100 certificados de gerenciamento por assinatura.</span><span class="sxs-lookup"><span data-stu-id="627f0-133">There is a limit of 100 management certificates per subscription.</span></span> <span data-ttu-id="627f0-134">Também há um limite de 100 certificados de gerenciamento para todas as assinaturas com a ID de usuário de um administrador de serviços específico.</span><span class="sxs-lookup"><span data-stu-id="627f0-134">There is also a limit of 100 management certificates for all subscriptions under a specific service administrator’s user ID.</span></span> <span data-ttu-id="627f0-135">Se a ID de usuário do administrador da conta já foi usada para adicionar 100 certificados de gerenciamento e houver necessidade de mais certificados, você pode adicionar um coadministrador para adicionar esses certificados.</span><span class="sxs-lookup"><span data-stu-id="627f0-135">If the user ID for the account administrator has already been used to add 100 management certificates and there is a need for more certificates, you can add a co-administrator to add the additional certificates.</span></span> 

<span data-ttu-id="627f0-136">Antes de adicionar mais de 100 certificados, veja se é possível reutilizar um certificado existente.</span><span class="sxs-lookup"><span data-stu-id="627f0-136">Before adding more than 100 certificates, see if you can reuse an existing certificate.</span></span> <span data-ttu-id="627f0-137">O uso de coadministradores adiciona uma complexidade potencial desnecessária ao processo de gerenciamento de certificados.</span><span class="sxs-lookup"><span data-stu-id="627f0-137">Using co-administrators adds potentially unneeded complexity to your certificate management process.</span></span>

<a name="create"></a>
## <a name="create-a-new-self-signed-certificate"></a><span data-ttu-id="627f0-138">Criar um Novo certificado autoassinado</span><span class="sxs-lookup"><span data-stu-id="627f0-138">Create a new self-signed certificate</span></span>
<span data-ttu-id="627f0-139">Você pode usar qualquer ferramenta disponível para criar um certificado autoassinado, desde que ela esteja de acordo com estas configurações:</span><span class="sxs-lookup"><span data-stu-id="627f0-139">You can use any tool available to create a self-signed certificate as long as they adhere to these settings:</span></span>

* <span data-ttu-id="627f0-140">Um certificado X.509.</span><span class="sxs-lookup"><span data-stu-id="627f0-140">An X.509 certificate.</span></span>
* <span data-ttu-id="627f0-141">Contém uma chave privada.</span><span class="sxs-lookup"><span data-stu-id="627f0-141">Contains a private key.</span></span>
* <span data-ttu-id="627f0-142">Criado para troca de chaves (arquivo. pfx).</span><span class="sxs-lookup"><span data-stu-id="627f0-142">Created for key exchange (.pfx file).</span></span>
* <span data-ttu-id="627f0-143">O nome de assunto deve corresponder ao domínio usado para acessar o serviço de nuvem.</span><span class="sxs-lookup"><span data-stu-id="627f0-143">Subject name must match the domain used to access the cloud service.</span></span>

    > <span data-ttu-id="627f0-144">Você não pode adquirir um certificado SSL para o domínio cloudapp.net (ou para qualquer um relacionado ao Azure); o nome de assunto do certificado deve corresponder ao nome do domínio personalizado usado para acessar o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="627f0-144">You cannot acquire an SSL certificate for the cloudapp.net (or for any Azure-related) domain; the certificate's subject name must match the custom domain name used to access your application.</span></span> <span data-ttu-id="627f0-145">Por exemplo, **contoso.net** e não **contoso.cloudapp.net**.</span><span class="sxs-lookup"><span data-stu-id="627f0-145">For example, **contoso.net**, not **contoso.cloudapp.net**.</span></span>

* <span data-ttu-id="627f0-146">Mínimo de criptografia de 2048 bits.</span><span class="sxs-lookup"><span data-stu-id="627f0-146">Minimum of 2048-bit encryption.</span></span>
* <span data-ttu-id="627f0-147">**Apenas Certificado de Serviço**: o certificado do cliente deve residir no repositório de certificados *Pessoal* .</span><span class="sxs-lookup"><span data-stu-id="627f0-147">**Service Certificate Only**: Client-side certificate must reside in the *Personal* certificate store.</span></span>

<span data-ttu-id="627f0-148">Há duas maneiras fáceis de criar um certificado no Windows, com o utilitário `makecert.exe` ou o IIS.</span><span class="sxs-lookup"><span data-stu-id="627f0-148">There are two easy ways to create a certificate on Windows, with the `makecert.exe` utility, or IIS.</span></span>

### <a name="makecertexe"></a><span data-ttu-id="627f0-149">Makecert.exe</span><span class="sxs-lookup"><span data-stu-id="627f0-149">Makecert.exe</span></span>
<span data-ttu-id="627f0-150">Esse utilitário foi preterido e não está documentado aqui.</span><span class="sxs-lookup"><span data-stu-id="627f0-150">This utility has been deprecated and is no longer documented here.</span></span> <span data-ttu-id="627f0-151">Para obter mais informações, consulte [este artigo do MSDN](https://msdn.microsoft.com/library/windows/desktop/aa386968).</span><span class="sxs-lookup"><span data-stu-id="627f0-151">For more information, see [this MSDN article](https://msdn.microsoft.com/library/windows/desktop/aa386968).</span></span>

### <a name="powershell"></a><span data-ttu-id="627f0-152">PowerShell</span><span class="sxs-lookup"><span data-stu-id="627f0-152">PowerShell</span></span>
```powershell
$cert = New-SelfSignedCertificate -DnsName yourdomain.cloudapp.net -CertStoreLocation "cert:\LocalMachine\My"
$password = ConvertTo-SecureString -String "your-password" -Force -AsPlainText
Export-PfxCertificate -Cert $cert -FilePath ".\my-cert-file.pfx" -Password $password
```

> [!NOTE]
> <span data-ttu-id="627f0-153">Se você quiser usar o certificado com um endereço IP em vez de um domínio, use o endereço IP no parâmetro - DnsName.</span><span class="sxs-lookup"><span data-stu-id="627f0-153">If you want to use the certificate with an IP address instead of a domain, use the IP address in the -DnsName parameter.</span></span>


<span data-ttu-id="627f0-154">Se você quiser usar este [certificado com o portal de gerenciamento](../azure-api-management-certs.md), exporte-o para um arquivo **.cer** :</span><span class="sxs-lookup"><span data-stu-id="627f0-154">If you want to use this [certificate with the management portal](../azure-api-management-certs.md), export it to a **.cer** file:</span></span>

```powershell
Export-Certificate -Type CERT -Cert $cert -FilePath .\my-cert-file.cer
```

### <a name="internet-information-services-iis"></a><span data-ttu-id="627f0-155">IIS (Serviços de Informações da Internet)</span><span class="sxs-lookup"><span data-stu-id="627f0-155">Internet Information Services (IIS)</span></span>
<span data-ttu-id="627f0-156">Há muitas páginas na Internet que tratam de como fazer isso com o IIS.</span><span class="sxs-lookup"><span data-stu-id="627f0-156">There are many pages on the internet that cover how to do this with IIS.</span></span> <span data-ttu-id="627f0-157">[Este](https://www.sslshopper.com/article-how-to-create-a-self-signed-certificate-in-iis-7.html) é um ótimo site que descobri e que acho que explica bem.</span><span class="sxs-lookup"><span data-stu-id="627f0-157">[Here](https://www.sslshopper.com/article-how-to-create-a-self-signed-certificate-in-iis-7.html) is a great one I found that I think explains it well.</span></span> 

### <a name="java"></a><span data-ttu-id="627f0-158">Java</span><span class="sxs-lookup"><span data-stu-id="627f0-158">Java</span></span>
<span data-ttu-id="627f0-159">Você pode usar o Java para [criar um certificado](../app-service-web/java-create-azure-website-using-java-sdk.md#create-a-certificate).</span><span class="sxs-lookup"><span data-stu-id="627f0-159">You can use Java to [create a certificate](../app-service-web/java-create-azure-website-using-java-sdk.md#create-a-certificate).</span></span>

### <a name="linux"></a><span data-ttu-id="627f0-160">Linux</span><span class="sxs-lookup"><span data-stu-id="627f0-160">Linux</span></span>
<span data-ttu-id="627f0-161">[Este](../virtual-machines/linux/mac-create-ssh-keys.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) artigo descreve como criar certificados com SSH.</span><span class="sxs-lookup"><span data-stu-id="627f0-161">[This](../virtual-machines/linux/mac-create-ssh-keys.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) article describes how to create certificates with SSH.</span></span>

## <a name="next-steps"></a><span data-ttu-id="627f0-162">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="627f0-162">Next steps</span></span>
<span data-ttu-id="627f0-163">[Carregue seu certificado de serviço no Portal Clássico do Azure](cloud-services-configure-ssl-certificate.md) (ou no [Portal do Azure](cloud-services-configure-ssl-certificate-portal.md)).</span><span class="sxs-lookup"><span data-stu-id="627f0-163">[Upload your service certificate to the Azure classic portal](cloud-services-configure-ssl-certificate.md) (or the [Azure portal](cloud-services-configure-ssl-certificate-portal.md)).</span></span>

<span data-ttu-id="627f0-164">Carregue um [certificado de API de gerenciamento](../azure-api-management-certs.md) no portal clássico do Azure.</span><span class="sxs-lookup"><span data-stu-id="627f0-164">Upload a [management API certificate](../azure-api-management-certs.md) to the Azure classic portal.</span></span> <span data-ttu-id="627f0-165">O portal do Azure não usa certificados de gerenciamento para autenticação.</span><span class="sxs-lookup"><span data-stu-id="627f0-165">The Azure portal does not use management certificates for authentication.</span></span>

