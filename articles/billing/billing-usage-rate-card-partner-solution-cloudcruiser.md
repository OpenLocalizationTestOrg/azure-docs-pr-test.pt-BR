---
title: "aaaCloud cruiser em e integração de API de cobrança do Microsoft Azure | Microsoft Docs"
description: "Fornece uma perspectiva exclusiva do parceiro de cobrança do Microsoft Azure cruiser em nuvem, em suas experiências integrar Olá APIs de cobrança do Azure em seus produtos.  Isso é especialmente útil para clientes do Azure e do Cloud Cruiser que estejam interessados em usar/experimentar o Cloud Cruiser para o pacote do Microsoft Azure."
services: 
documentationcenter: 
author: BryanLa
manager: tonguyen
editor: 
tags: billing
ms.assetid: b65128cf-5d4d-4cbd-b81e-d3dceab44271
ms.service: billing
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: billing
ms.date: 02/03/2017
ms.author: mobandyo;sirishap;bryanla
ms.openlocfilehash: 74cc19bdeed26c6684210736caa0cb365e8f8821
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="cloud-cruiser-and-microsoft-azure-billing-api-integration"></a><span data-ttu-id="54428-104">Integração da API de Cobrança do Microsoft Azure e Cloud Cruiser</span><span class="sxs-lookup"><span data-stu-id="54428-104">Cloud Cruiser and Microsoft Azure Billing API Integration</span></span>
<span data-ttu-id="54428-105">Este artigo descreve como informações de saudação coletadas Olá que novas APIs de cobrança do Microsoft Azure pode ser usado em cruiser em nuvem para o fluxo de trabalho custam simulação e análise.</span><span class="sxs-lookup"><span data-stu-id="54428-105">This article describes how hello information collected from hello new Microsoft Azure Billing APIs can be used in Cloud Cruiser for workflow cost simulation and analysis.</span></span>

## <a name="azure-ratecard-api"></a><span data-ttu-id="54428-106">API RateCard do Azure</span><span class="sxs-lookup"><span data-stu-id="54428-106">Azure RateCard API</span></span>
<span data-ttu-id="54428-107">Olá API RateCard fornece informações de taxa do Azure.</span><span class="sxs-lookup"><span data-stu-id="54428-107">hello RateCard API provides rate information from Azure.</span></span> <span data-ttu-id="54428-108">Depois de autenticar com credenciais apropriadas hello, você pode consultar Olá API toocollect metadados sobre os serviços de saudação disponíveis no Azure, junto com as taxas de saudação associadas com sua ID de oferta</span><span class="sxs-lookup"><span data-stu-id="54428-108">After authenticating with hello proper credentials, you can query hello API toocollect metadata about hello services available on Azure, along with hello rates associated with your Offer ID.</span></span>

<span data-ttu-id="54428-109">Olá, a seguir está um exemplo de resposta da API de saudação mostrando preços Olá para Olá A0 (Windows) instância:</span><span class="sxs-lookup"><span data-stu-id="54428-109">hello following is a sample response from hello API showing hello prices for hello A0 (Windows) instance:</span></span>

    {
        "MeterId": "0e59ad56-03e5-4c3d-90d4-6670874d7e29",
        "MeterName": "Compute Hours",
        "MeterCategory": "Virtual Machines",
        "MeterSubCategory": "A0 VM (Windows)",
        "Unit": "Hours",
        "MeterRates":
        {
            "0": 0.029
        },
        "EffectiveDate": "2014-08-01T00:00:00Z",
        "IncludedQuantity": 0.0,
        "MeterStatus": "Active"
    },

### <a name="cloud-cruisers-interface-tooazure-ratecard-api"></a><span data-ttu-id="54428-110">TooAzure de Interface do cruiser em RateCard API de nuvem</span><span class="sxs-lookup"><span data-stu-id="54428-110">Cloud Cruiser’s Interface tooAzure RateCard API</span></span>
<span data-ttu-id="54428-111">Cruiser em de nuvem pode aproveitar informações de API RateCard Olá maneiras diferentes.</span><span class="sxs-lookup"><span data-stu-id="54428-111">Cloud Cruiser can leverage hello RateCard API information in different ways.</span></span> <span data-ttu-id="54428-112">Neste artigo, mostramos como ela pode ser usado toomake IaaS cargas de trabalho custo simulação e análise.</span><span class="sxs-lookup"><span data-stu-id="54428-112">For this article, we will show how it can be used toomake IaaS workload cost simulation and analysis.</span></span>

<span data-ttu-id="54428-113">toodemonstrate esse caso de uso, imagine uma carga de trabalho de várias instâncias em execução no Microsoft Azure Pack (WAP).</span><span class="sxs-lookup"><span data-stu-id="54428-113">toodemonstrate this use case, imagine a workload of several instances running on Microsoft Azure Pack (WAP).</span></span> <span data-ttu-id="54428-114">meta de saudação é toosimulate essa mesma carga de trabalho no Azure e os custos de saudação de estimativa de fazer essa migração.</span><span class="sxs-lookup"><span data-stu-id="54428-114">hello goal is toosimulate this same workload on Azure, and estimate hello costs of doing such migration.</span></span> <span data-ttu-id="54428-115">Em ordem toocreate esta simulação, há dois toobe principais tarefas executadas:</span><span class="sxs-lookup"><span data-stu-id="54428-115">In order toocreate this simulation, there are two main tasks toobe performed:</span></span>

1. <span data-ttu-id="54428-116">**Importação e processo Olá serviço informações coletadas de saudação RateCard API.**</span><span class="sxs-lookup"><span data-stu-id="54428-116">**Import and process hello service information collected from hello RateCard API.**</span></span> <span data-ttu-id="54428-117">Essa tarefa também é executada em pastas de trabalho hello, onde a extração de saudação da saudação RateCard API é tooa transformados e publicados novo plano de taxa.</span><span class="sxs-lookup"><span data-stu-id="54428-117">This task is also performed on hello workbooks, where hello extract from hello RateCard API is transformed and published tooa new rate plan.</span></span> <span data-ttu-id="54428-118">Este novo plano de taxa será usado nos tooestimate de simulações Olá Olá preços do Azure.</span><span class="sxs-lookup"><span data-stu-id="54428-118">This new rate plan will be used on hello simulations tooestimate hello Azure prices.</span></span>
2. <span data-ttu-id="54428-119">**Normalizar serviços WAP e serviços do Azure para IaaS.**</span><span class="sxs-lookup"><span data-stu-id="54428-119">**Normalize WAP services and Azure services for IaaS.**</span></span> <span data-ttu-id="54428-120">Por padrão, os serviços WAP se baseiam em recursos individuais (CPU, tamanho da memória, tamanho do disco, etc.) enquanto os serviços do Azure baseiam-se no tamanho da instância (A0 A1, A2, etc.).</span><span class="sxs-lookup"><span data-stu-id="54428-120">By default, WAP services are based on individual resources (CPU, Memory Size, Disk Size, etc.) while Azure services are based on instance size (A0, A1, A2, etc.).</span></span> <span data-ttu-id="54428-121">A primeira tarefa pode ser realizada pelo mecanismo ETL do cruiser em nuvem, chamado de pastas de trabalho, onde esses recursos podem ser incorporados em tamanhos de instância, análogo tooAzure instância services.</span><span class="sxs-lookup"><span data-stu-id="54428-121">This first task can be performed by Cloud Cruiser’s ETL engine, called workbooks, where these resources can be bundled on instance sizes, analogous tooAzure instance services.</span></span>

### <a name="import-data-from-hello-ratecard-api"></a><span data-ttu-id="54428-122">Importar dados de saudação RateCard API</span><span class="sxs-lookup"><span data-stu-id="54428-122">Import data from hello RateCard API</span></span>
<span data-ttu-id="54428-123">Pastas de trabalho de cruiser em nuvem fornecem uma forma automatizada toocollect e processo de informações de saudação RateCard API.</span><span class="sxs-lookup"><span data-stu-id="54428-123">Cloud Cruiser workbooks provide an automated way toocollect and process information from hello RateCard API.</span></span>  <span data-ttu-id="54428-124">Pastas de trabalho ETL (extrair, transformar e carregar) permitem a coleção de saudação tooconfigure, transformação e publicação de dados no banco de dados do hello cruiser em nuvem.</span><span class="sxs-lookup"><span data-stu-id="54428-124">ETL (extract-transform-load) workbooks allow you tooconfigure hello collection, transformation, and publishing of data into hello Cloud Cruiser database.</span></span>

<span data-ttu-id="54428-125">Cada pasta de trabalho pode ter uma ou várias coleções, permitindo que você toocorrelate informações toocomplement de origens diferentes ou aumentar dados de uso de saudação.</span><span class="sxs-lookup"><span data-stu-id="54428-125">Each workbook can have one or multiple collections, allowing you toocorrelate information from different sources toocomplement or augment hello usage data.</span></span> <span data-ttu-id="54428-126">Olá mostrar dois de capturas de tela a seguir como toocreate um novo *coleção* em uma pasta de trabalho e a importação de informações para hello *coleção* de saudação RateCard API:</span><span class="sxs-lookup"><span data-stu-id="54428-126">hello following two screenshots show how toocreate a new *collection* in an existing workbook, and importing information into hello *collection* from hello RateCard API:</span></span>

<span data-ttu-id="54428-127">![Figura 1 — Criando uma nova coleção][1]</span><span class="sxs-lookup"><span data-stu-id="54428-127">![Figure 1 - Creating a new collection][1]</span></span>

<span data-ttu-id="54428-128">![Figura 2: importar dados do novo conjunto de saudação][2]</span><span class="sxs-lookup"><span data-stu-id="54428-128">![Figure 2 - Import data from hello new collection][2]</span></span>

<span data-ttu-id="54428-129">Depois de importar dados saudação na pasta de trabalho Olá, é possível toocreate várias etapas e os processos de transformação, toomodify e modelo Olá dados.</span><span class="sxs-lookup"><span data-stu-id="54428-129">After importing hello data into hello workbook, it’s possible toocreate multiple steps and transformation processes, toomodify and model hello data.</span></span> <span data-ttu-id="54428-130">Neste exemplo, já que estamos interessados apenas na infraestrutura-como-um-serviço (IaaS), podemos usar linhas desnecessárias do hello transformação etapas tooremove ou registros, relacionadas tooservices diferente de IaaS.</span><span class="sxs-lookup"><span data-stu-id="54428-130">For this example, since we are only interested in infrastructure-as-a-Service (IaaS) we can use hello transformation steps tooremove unnecessary rows, or records, related tooservices other than IaaS.</span></span>

<span data-ttu-id="54428-131">Hello seguinte captura de tela mostra as etapas de transformação de saudação usados dados de saudação tooprocess coletados da API RateCard:</span><span class="sxs-lookup"><span data-stu-id="54428-131">hello following screenshot shows hello transformation steps used tooprocess hello data collected from RateCard API:</span></span>

<span data-ttu-id="54428-132">![Figura 3 - transformação etapas tooprocess coletados dados de API RateCard][3]</span><span class="sxs-lookup"><span data-stu-id="54428-132">![Figure 3 - Transformation steps tooprocess collected data from RateCard API][3]</span></span>

### <a name="defining-new-services-and-rate-plans"></a><span data-ttu-id="54428-133">Definindo novos serviços e a planos de taxa</span><span class="sxs-lookup"><span data-stu-id="54428-133">Defining New Services and Rate Plans</span></span>
<span data-ttu-id="54428-134">Existem serviços de toodefine de diferentes maneiras cruiser em nuvem.</span><span class="sxs-lookup"><span data-stu-id="54428-134">There are different ways toodefine services on Cloud Cruiser.</span></span> <span data-ttu-id="54428-135">Uma das opções de saudação é tooimport serviços de Olá Olá de dados de uso.</span><span class="sxs-lookup"><span data-stu-id="54428-135">One of hello options is tooimport hello services from hello usage data.</span></span> <span data-ttu-id="54428-136">Esse método normalmente é usado quando se trabalha com nuvens públicas, onde os serviços de saudação já são definidos pelo provedor de saudação.</span><span class="sxs-lookup"><span data-stu-id="54428-136">This method is commonly used when working with public clouds, where hello services are already defined by hello provider.</span></span>

<span data-ttu-id="54428-137">Um plano de taxas é um conjunto de taxas ou preços que podem ser aplicado toodifferent serviços, com base em datas de efetivação ou grupo de clientes, entre outras opções.</span><span class="sxs-lookup"><span data-stu-id="54428-137">A Rate Plan is a set of rates or prices that can be applied toodifferent services, based on effective dates, or group of customers, among other options.</span></span> <span data-ttu-id="54428-138">Planos de taxa também podem ser usados em simulação de toocreate cruiser em nuvem ou "" cenários, toounderstand como as alterações em serviços podem afetar o custo total de saudação de uma carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="54428-138">Rate Plans can also be used on Cloud Cruiser toocreate simulation or “What-if” scenarios, toounderstand how changes in services can affect hello total cost of a workload.</span></span>

<span data-ttu-id="54428-139">Neste exemplo, usaremos informações do serviço de saudação de novos serviços de saudação RateCard API toodefine em cruiser em nuvem.</span><span class="sxs-lookup"><span data-stu-id="54428-139">In this example, we will use hello service information from hello RateCard API toodefine new services in Cloud Cruiser.</span></span> <span data-ttu-id="54428-140">Em Olá mesmo propósito, podemos usar taxas Olá associadas toohello serviços toocreate um novo plano de taxa no cruiser em nuvem.</span><span class="sxs-lookup"><span data-stu-id="54428-140">In hello same way, we can use hello rates associated toohello services toocreate a new Rate Plan on Cloud Cruiser.</span></span>

<span data-ttu-id="54428-141">No final de saudação do processo de transformação de Olá, é possível toocreate uma nova etapa e publicar dados Olá Olá RateCard API como taxas e novos serviços.</span><span class="sxs-lookup"><span data-stu-id="54428-141">At hello end of hello transformation process, it is possible toocreate a new step and publish hello data from hello RateCard API as new services and rates.</span></span>

<span data-ttu-id="54428-142">![Figura 4: publicando dados de saudação do hello RateCard API como novos serviços e taxas][4]</span><span class="sxs-lookup"><span data-stu-id="54428-142">![Figure 4 - Publishing hello data from hello RateCard API as new Services and Rates][4]</span></span>

### <a name="verify-azure-services-and-rates"></a><span data-ttu-id="54428-143">Verificação das taxas e os serviços do Azure</span><span class="sxs-lookup"><span data-stu-id="54428-143">Verify Azure Services and Rates</span></span>
<span data-ttu-id="54428-144">Depois de publicar serviços hello e taxas, você pode verificar a lista de saudação de serviços importados do cruiser em nuvem *serviços* guia:</span><span class="sxs-lookup"><span data-stu-id="54428-144">After publishing hello services and rates, you can verify hello list of imported services in Cloud Cruiser’s *Services* tab:</span></span>

<span data-ttu-id="54428-145">![Figura 5 - verificando Olá novos serviços][5]</span><span class="sxs-lookup"><span data-stu-id="54428-145">![Figure 5 - Verifying hello new Services][5]</span></span>

<span data-ttu-id="54428-146">Em Olá *taxa planos* guia, você pode verificar Olá novo taxa plano chamado "AzureSimulation" com taxas de saudação importado de saudação RateCard API.</span><span class="sxs-lookup"><span data-stu-id="54428-146">On hello *Rate Plans* tab, you can check hello new rate plan called “AzureSimulation” with hello rates imported from hello RateCard API.</span></span>

<span data-ttu-id="54428-147">![Figura 6: verificando Olá novo plano de taxa e as taxas associadas][6]</span><span class="sxs-lookup"><span data-stu-id="54428-147">![Figure 6 - Verifying hello new Rate Plan and associated rates][6]</span></span>

### <a name="normalize-wap-and-azure-services"></a><span data-ttu-id="54428-148">Normalização WAP e Serviços do Azure</span><span class="sxs-lookup"><span data-stu-id="54428-148">Normalize WAP and Azure Services</span></span>
<span data-ttu-id="54428-149">Por padrão, o WAP fornece informações de uso com base no uso de saudação de computação, memória e recursos de rede.</span><span class="sxs-lookup"><span data-stu-id="54428-149">By default, WAP provides usage information based on hello use of compute, memory, and network resources.</span></span> <span data-ttu-id="54428-150">No cruiser em nuvem, você pode definir sua alocação de saudação diretamente em serviços com base ou limitado uso desses recursos.</span><span class="sxs-lookup"><span data-stu-id="54428-150">In Cloud Cruiser, you can define your services based directly on hello allocation or metered usage of these resources.</span></span> <span data-ttu-id="54428-151">Por exemplo, você pode definir uma taxa básica para cada hora de uso da CPU ou custos Olá GB de memória alocada tooan instância.</span><span class="sxs-lookup"><span data-stu-id="54428-151">For example, you can set a basic rate for each hour of CPU usage, or charge hello GB of memory allocated tooan instance.</span></span>

<span data-ttu-id="54428-152">Neste exemplo, nos custos de toocompare ordem entre WAP e o Azure, é preciso tooaggregate Olá utilização de recursos WAP em pacotes, que pode ser mapeado tooAzure serviços.</span><span class="sxs-lookup"><span data-stu-id="54428-152">For this example, in order toocompare costs between WAP and Azure, we need tooaggregate hello resource usage on WAP into bundles, which can then be mapped tooAzure services.</span></span> <span data-ttu-id="54428-153">Essa transformação pode ser implementada facilmente em pastas de trabalho hello:</span><span class="sxs-lookup"><span data-stu-id="54428-153">This transformation can be implemented easily in hello workbooks:</span></span>

<span data-ttu-id="54428-154">![Figura 7: transformar os serviços de dados do toonormalize WAP][7]</span><span class="sxs-lookup"><span data-stu-id="54428-154">![Figure 7 - Transforming WAP data toonormalize services][7]</span></span>

<span data-ttu-id="54428-155">Olá última etapa na pasta de trabalho de saudação é dados de saudação toopublish no banco de dados do hello cruiser em nuvem.</span><span class="sxs-lookup"><span data-stu-id="54428-155">hello last step at hello workbook is toopublish hello data into hello Cloud Cruiser database.</span></span> <span data-ttu-id="54428-156">Durante essa etapa, os dados de uso de saudação são fornecidos para os serviços (que mapeiam toohello serviços do Azure) e ligado encargos de saudação do toodefault taxas toocreate.</span><span class="sxs-lookup"><span data-stu-id="54428-156">During this step, hello usage data is now bundled into services (that map toohello Azure Services) and tied toodefault rates toocreate hello charges.</span></span>

<span data-ttu-id="54428-157">Depois de terminar de pasta de trabalho de Olá, você pode automatizar processamento Olá de dados Olá, adicionando uma tarefa no Agendador de saudação e especificando a frequência de saudação e a hora de saudação toorun de pasta de trabalho.</span><span class="sxs-lookup"><span data-stu-id="54428-157">After finishing hello workbook, you can automate hello processing of hello data, by adding a task on hello scheduler and specifying hello frequency and time for hello workbook toorun.</span></span>

<span data-ttu-id="54428-158">![Figura 8 — Planejamento de pasta de trabalho][8]</span><span class="sxs-lookup"><span data-stu-id="54428-158">![Figure 8 - Workbook scheduling][8]</span></span>

### <a name="create-reports-for-workload-cost-simulation-analysis"></a><span data-ttu-id="54428-159">Criação de relatórios para análise de custo de simulação de carga de trabalho</span><span class="sxs-lookup"><span data-stu-id="54428-159">Create Reports for Workload Cost Simulation Analysis</span></span>
<span data-ttu-id="54428-160">Depois de uso de saudação é coletado e encargos são carregados no banco de dados do hello cruiser em nuvem, podemos aproveitar Olá Insights de cruiser em nuvem módulo toocreate Olá cargas de trabalho custo simulação é desejado.</span><span class="sxs-lookup"><span data-stu-id="54428-160">After hello usage is collected and charges are loaded into hello Cloud Cruiser database, we can leverage hello Cloud Cruiser Insights module toocreate hello workload cost simulation that we desire.</span></span>

<span data-ttu-id="54428-161">Em ordem toodemonstrate neste cenário, criamos Olá relatórios a seguir:</span><span class="sxs-lookup"><span data-stu-id="54428-161">In order toodemonstrate this scenario, we created hello following report:</span></span>

<span data-ttu-id="54428-162">![Comparação de custos][9]</span><span class="sxs-lookup"><span data-stu-id="54428-162">![Cost Comparison][9]</span></span>

<span data-ttu-id="54428-163">gráfico de saudação superior mostra uma comparação de custo por serviços, comparando o preço de saudação de carga de trabalho de saudação em execução para cada serviço específico entre WAP (azul escuro) e o Azure (azul claro).</span><span class="sxs-lookup"><span data-stu-id="54428-163">hello top graph shows a cost comparison by services, comparing hello price of running hello workload for each specific service between WAP (dark blue) and Azure (light blue).</span></span>

<span data-ttu-id="54428-164">gráfico do Hello inferior mostra Olá mesmo dados mas divididos por departamento.</span><span class="sxs-lookup"><span data-stu-id="54428-164">hello bottom graph shows hello same data but broken down by department.</span></span> <span data-ttu-id="54428-165">Isso mostra Olá custos para cada departamento toorun sua carga de trabalho WAP e no Azure, junto com a diferença de saudação entre eles na barra de economia de saudação (verde).</span><span class="sxs-lookup"><span data-stu-id="54428-165">This shows hello costs for each department toorun their workload on WAP and Azure, along with hello difference between them in hello Savings bar (green).</span></span>

## <a name="azure-usage-api"></a><span data-ttu-id="54428-166">API de Uso do Azure</span><span class="sxs-lookup"><span data-stu-id="54428-166">Azure Usage API</span></span>
### <a name="introduction"></a><span data-ttu-id="54428-167">Introdução</span><span class="sxs-lookup"><span data-stu-id="54428-167">Introduction</span></span>
<span data-ttu-id="54428-168">Recentemente, a Microsoft introduziu Olá API de uso do Azure, permitindo que os assinantes pull tooprogrammatically no ideias de toogain de dados de uso sobre seu consumo.</span><span class="sxs-lookup"><span data-stu-id="54428-168">Microsoft recently introduced hello Azure Usage API, allowing subscribers tooprogrammatically pull in usage data toogain insights into their consumption.</span></span> <span data-ttu-id="54428-169">Isso é uma ótima notícia para clientes cruiser em nuvem que pode se beneficiar da saudação mais rico conjunto de dados disponível por essa API.</span><span class="sxs-lookup"><span data-stu-id="54428-169">This is great news for Cloud Cruiser customers that can take advantage of hello richer dataset available through this API.</span></span>

<span data-ttu-id="54428-170">Cruiser em de nuvem pode Aproveite a integração de saudação com hello API de uso de várias maneiras.</span><span class="sxs-lookup"><span data-stu-id="54428-170">Cloud Cruiser can leverage hello integration with hello Usage API in several ways.</span></span> <span data-ttu-id="54428-171">granularidade da saudação (informações de uso por hora) e informações de metadados de recursos disponíveis por meio de saudação que API fornece Olá necessário do conjunto de dados toosupport flexível Showback ou estorno modelos.</span><span class="sxs-lookup"><span data-stu-id="54428-171">hello granularity (hourly usage information) and resource metadata information available through hello API provides hello necessary dataset toosupport flexible Showback or Chargeback models.</span></span> 

<span data-ttu-id="54428-172">Neste tutorial, apresentaremos um exemplo de como cruiser em nuvem pode se beneficiar de saudação informações de uso de API.</span><span class="sxs-lookup"><span data-stu-id="54428-172">In this tutorial, we will present one example of how Cloud Cruiser can benefit from hello Usage API information.</span></span> <span data-ttu-id="54428-173">Mais especificamente, podemos será criar um grupo de recursos no Azure, associar marcas para estrutura de conta Olá e descrevem Olá o processo de extração e processamento das informações de marca de saudação em cruiser em nuvem.</span><span class="sxs-lookup"><span data-stu-id="54428-173">More specifically, we will create a Resource Group on Azure, associate tags for hello account structure, then describe hello process of pulling and processing hello tag information into Cloud Cruiser.</span></span>

<span data-ttu-id="54428-174">objetivo final de saudação é toobe toocreate capaz de relatórios como Olá seguindo um e ser capaz de tooanalyze de custo e consumo com base na estrutura de conta Olá preenchida por marcas de saudação.</span><span class="sxs-lookup"><span data-stu-id="54428-174">hello final goal is toobe able toocreate reports like hello following one, and be able tooanalyze cost and consumption based on hello account structure populated by hello tags.</span></span>

<span data-ttu-id="54428-175">![Figura 10 — Relatório com divisões usando marcações][10]</span><span class="sxs-lookup"><span data-stu-id="54428-175">![Figure 10 - Report with breakdowns using tags][10]</span></span>

### <a name="microsoft-azure-tags"></a><span data-ttu-id="54428-176">Marcas do Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="54428-176">Microsoft Azure Tags</span></span>
<span data-ttu-id="54428-177">dados de saudação disponíveis por meio de saudação API de uso do Azure incluem não apenas informações de consumo, mas também metadados de recursos, incluindo marcas associadas a ele.</span><span class="sxs-lookup"><span data-stu-id="54428-177">hello data available through hello Azure Usage API includes not only consumption information, but also resource metadata including any tags associated with it.</span></span> <span data-ttu-id="54428-178">Marcas fornecem uma maneira fácil tooorganize seus recursos, mas em toobe ordem eficaz, você precisa tooensure que:</span><span class="sxs-lookup"><span data-stu-id="54428-178">Tags provide an easy way tooorganize your resources, but in order toobe effective, you need tooensure that:</span></span>

* <span data-ttu-id="54428-179">Marcas são aplicadas corretamente toohello recursos em tempo de provisão</span><span class="sxs-lookup"><span data-stu-id="54428-179">Tags are correctly applied toohello resources at provision time</span></span>
* <span data-ttu-id="54428-180">Marcas corretamente são usadas na estrutura de conta Olá Showback/estorno processo tootie Olá uso toohello da organização.</span><span class="sxs-lookup"><span data-stu-id="54428-180">Tags are properly used on hello Showback/Chargeback process tootie hello usage toohello organization’s account structure.</span></span>

<span data-ttu-id="54428-181">Estes dois requisitos podem ser desafiadoras, especialmente quando há um processo manual sobre como provisionar hello ou carregar lado.</span><span class="sxs-lookup"><span data-stu-id="54428-181">Both of these requirements can be challenging, especially when there is a manual process on hello provision or charging side.</span></span> <span data-ttu-id="54428-182">Marcas de digitação, incorretas ou ausentes ainda são reclamações comuns dos clientes quando usando marcas e esses erros pode tornar a vida em Olá Carregando lado muito difícil.</span><span class="sxs-lookup"><span data-stu-id="54428-182">Mistyped, incorrect or even missing tags are common complaints from customers when using tags and these errors can make life on hello charging side very difficult.</span></span>

<span data-ttu-id="54428-183">Com hello nova API de uso do Azure, cruiser em nuvem pode extrair informações de identificação de recurso e através de uma ferramenta ETL sofisticada, chamada de pastas de trabalho, corrigir esses erros comuns de marcação.</span><span class="sxs-lookup"><span data-stu-id="54428-183">With hello new Azure Usage API, Cloud Cruiser can pull resource tagging information, and through a sophisticated ETL tool called workbooks, fix these common tagging errors.</span></span> <span data-ttu-id="54428-184">Por meio de transformações usando expressões regulares e correlação de dados, cruiser em nuvem pode identificar recursos marcados incorretamente e aplicar marcas correto do hello, garantindo a associação correta Olá dos recursos de saudação com consumidor hello.</span><span class="sxs-lookup"><span data-stu-id="54428-184">Through transformation using regular expressions and data correlation, Cloud Cruiser can identify incorrectly tagged resources and apply hello correct tags, ensuring hello correct association of hello resources with hello consumer.</span></span>

<span data-ttu-id="54428-185">Em Olá Carregando lado, cruiser nuvem em automatiza Olá Showback/estorno processo e podem utilizar Olá marca informações tootie Olá uso toohello apropriado consumidor (departamento, divisão, projeto, etc.).</span><span class="sxs-lookup"><span data-stu-id="54428-185">On hello charging side, Cloud Cruiser automates hello Showback/Chargeback process, and can leverage hello tag information tootie hello usage toohello appropriate consumer (Department, Division, Project, etc.).</span></span> <span data-ttu-id="54428-186">Essa automação é um enorme aprimoramento e pode assegurar um processo de cobrança consistente e auditável.</span><span class="sxs-lookup"><span data-stu-id="54428-186">This automation provides a huge improvement and can ensure a consistent and auditable charging process.</span></span>

### <a name="creating-a-resource-group-with-tags-on-microsoft-azure"></a><span data-ttu-id="54428-187">Criando um grupo de recursos com marcas no Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="54428-187">Creating a Resource Group with tags on Microsoft Azure</span></span>
<span data-ttu-id="54428-188">Olá primeira etapa deste tutorial é toocreate um grupo de recursos no hello portal do Azure, então, criar novas marcas tooassociate toohello recursos.</span><span class="sxs-lookup"><span data-stu-id="54428-188">hello first step in this tutorial is toocreate a Resource Group in hello Azure portal, then create new tags tooassociate toohello resources.</span></span> <span data-ttu-id="54428-189">Neste exemplo, estamos criando Olá marcas a seguir: departamento, ambiente, proprietário, o projeto.</span><span class="sxs-lookup"><span data-stu-id="54428-189">For this example, we will be creating hello following tags: Department, Environment, Owner, Project.</span></span>

<span data-ttu-id="54428-190">saudação de captura de tela abaixo mostra um exemplo de que marcas associada ao grupo de recursos com hello.</span><span class="sxs-lookup"><span data-stu-id="54428-190">hello screenshot below shows a sample Resource Group with hello associated tags.</span></span>

<span data-ttu-id="54428-191">![Figura 11 — Grupo de Recursos com as marcações associadas no Portal do Azure][11]</span><span class="sxs-lookup"><span data-stu-id="54428-191">![Figure 11 - Resource Group with associated tags on Azure portal][11]</span></span>

<span data-ttu-id="54428-192">Olá próxima etapa é toopull Olá informações das Olá API uso cruiser em nuvem.</span><span class="sxs-lookup"><span data-stu-id="54428-192">hello next step is toopull hello information from hello Usage API into Cloud Cruiser.</span></span> <span data-ttu-id="54428-193">Olá API de uso no momento fornece respostas em formato JSON.</span><span class="sxs-lookup"><span data-stu-id="54428-193">hello Usage API currently provides responses in JSON format.</span></span> <span data-ttu-id="54428-194">Aqui está um exemplo de hello dados recuperados:</span><span class="sxs-lookup"><span data-stu-id="54428-194">Here is a sample of hello data retrieved:</span></span>

    {
      "id": "/subscriptions/bb678b04-0e48-4b44-XXXX-XXXXXXX/providers/Microsoft.Commerce/UsageAggregates/Daily_BRSDT_20150623_0000",
      "name": "Daily_BRSDT_20150623_0000",
      "type": "Microsoft.Commerce/UsageAggregate",
      "properties":
      {
        "subscriptionId": "bb678b04-0e48-4b44-XXXX-XXXXXXXXX",
        "usageStartTime": "2015-06-22T00:00:00+00:00",
        "usageEndTime": "2015-06-23T00:00:00+00:00",
        "meterName": "Compute Hours",
        "meterRegion": "",
        "meterCategory": "Virtual Machines",
        "meterSubCategory": "Standard_D1 VM (Non-Windows)",
        "unit": "Hours",
        "instanceData": "{\"Microsoft.Resources\":{\"resourceUri\":\"/subscriptions/bb678b04-0e48-4b44-XXXX-XXXXXXXX/resourceGroups/DEMOUSAGEAPI/providers/Microsoft.Compute/virtualMachines/MyDockerVM\",\"location\":\"eastus\",\"tags\":{\"Department\":\"Sales\",\"Project\":\"Demo Usage API\",\"Environment\":\"Test\",\"Owner\":\"RSE\"},\"additionalInfo\":{\"ImageType\":\"Canonical\",\"ServiceType\":\"Standard_D1\"}}}",
        "meterId": "e60caf26-9ba0-413d-a422-6141f58081d6",
        "infoFields": {},
        "quantity": 8

      },
    },


### <a name="import-data-from-hello-usage-api-into-cloud-cruiser"></a><span data-ttu-id="54428-195">Importar dados de saudação API de uso para cruiser em nuvem</span><span class="sxs-lookup"><span data-stu-id="54428-195">Import data from hello Usage API into Cloud Cruiser</span></span>
<span data-ttu-id="54428-196">Pastas de trabalho de cruiser em nuvem fornecem uma forma automatizada toocollect e processo de informações de Olá API de uso.</span><span class="sxs-lookup"><span data-stu-id="54428-196">Cloud Cruiser workbooks provide an automated way toocollect and process information from hello Usage API.</span></span> <span data-ttu-id="54428-197">Uma pasta de trabalho ETL (extrair, transformar e carregar) permite a coleta de saudação tooconfigure, transformação e publicação de dados no banco de dados do hello cruiser em nuvem.</span><span class="sxs-lookup"><span data-stu-id="54428-197">An ETL (extract-transform-load) workbook allows you tooconfigure hello collection, transformation, and publishing of data into hello Cloud Cruiser database.</span></span>

<span data-ttu-id="54428-198">Cada pasta de trabalho pode ter uma ou várias coleções.</span><span class="sxs-lookup"><span data-stu-id="54428-198">Each workbook can have one or multiple collections.</span></span> <span data-ttu-id="54428-199">Isso permite que informações toocorrelate fontes diferentes toocomplement ou ampliar Olá de dados de uso.</span><span class="sxs-lookup"><span data-stu-id="54428-199">This allows you toocorrelate information from different sources toocomplement or augment hello usage data.</span></span> <span data-ttu-id="54428-200">Neste exemplo, vamos criar uma nova planilha na pasta de trabalho de modelo do Azure hello (*UsageAPI)* e definir uma nova *coleção* informações tooimport Olá API de uso.</span><span class="sxs-lookup"><span data-stu-id="54428-200">For this example, we will create a new sheet in hello Azure template workbook (*UsageAPI)* and set a new *collection* tooimport information from hello Usage API.</span></span>

<span data-ttu-id="54428-201">![Figura 3: dados de uso API importados para a folha de UsageAPI Olá][12]</span><span class="sxs-lookup"><span data-stu-id="54428-201">![Figure 3 - Usage API data imported into hello UsageAPI sheet][12]</span></span>

<span data-ttu-id="54428-202">Observe que esta pasta de trabalho já possui outra folhas tooimport serviços do Azure (*ImportServices*) e processar informações de consumo de saudação do hello API de cobrança (*PublishData*).</span><span class="sxs-lookup"><span data-stu-id="54428-202">Notice that this workbook already has other sheets tooimport services from Azure (*ImportServices*), and process hello consumption information from hello Billing API (*PublishData*).</span></span>

<span data-ttu-id="54428-203">Em seguida, usaremos Olá Olá de toopopulate de API de uso *UsageAPI* folha e informações de Olá correlacionar com os dados de consumo de saudação do hello API de cobrança em Olá *PublishData* folha.</span><span class="sxs-lookup"><span data-stu-id="54428-203">Next we will use hello Usage API toopopulate hello *UsageAPI* sheet, and correlate hello information with hello consumption data from hello Billing API on hello *PublishData* sheet.</span></span>

### <a name="processing-hello-tag-information-from-hello-usage-api"></a><span data-ttu-id="54428-204">Processar informações de marca de saudação do hello API de uso</span><span class="sxs-lookup"><span data-stu-id="54428-204">Processing hello tag information from hello Usage API</span></span>
<span data-ttu-id="54428-205">Depois de importar dados saudação na pasta de trabalho Olá, vamos criar etapas de transformação em Olá *UsageAPI* planilha nas informações de saudação tooprocess ordem de saudação API.</span><span class="sxs-lookup"><span data-stu-id="54428-205">After importing hello data into hello workbook, we will create transformation steps in hello *UsageAPI* sheet in order tooprocess hello information from hello API.</span></span> <span data-ttu-id="54428-206">Primeira etapa é toouse uma saudação "JSON dividir" tooextract do processador marcas de um único campo, em seguida, criar campos para cada um deles (departamento, projeto, proprietário e ambiente).</span><span class="sxs-lookup"><span data-stu-id="54428-206">First step is toouse a “JSON split” processor tooextract hello tags from a single field, then create fields for each one of them (Department, Project, Owner, and Environment).</span></span>

<span data-ttu-id="54428-207">![Figura 4 - criar novos campos de informações de marca de saudação][13]</span><span class="sxs-lookup"><span data-stu-id="54428-207">![Figure 4 - Create new fields for hello tag information][13]</span></span>

<span data-ttu-id="54428-208">Saudação de aviso "Rede" serviço não tem informações de marca hello (caixa amarela), mas podemos verificar que faz parte de saudação mesmo grupo de recursos, observando Olá *ResourceGroupName* campo.</span><span class="sxs-lookup"><span data-stu-id="54428-208">Notice hello “Networking” service is missing hello tag information (yellow box), but we can verify that it is part of hello same Resource Group by looking at hello *ResourceGroupName* field.</span></span> <span data-ttu-id="54428-209">Como temos marcas Olá para Olá outros recursos do grupo de recursos, podemos usar esta saudação de tooapply informações marcas toothis recurso posteriormente no processo de saudação ausente.</span><span class="sxs-lookup"><span data-stu-id="54428-209">Since we have hello tags for hello other resources from this Resource Group, we can use this information tooapply hello missing tags toothis resource later in hello process.</span></span>

<span data-ttu-id="54428-210">Olá, próxima etapa é toocreate uma pesquisa associando Olá informações da tabela de saudação marcas toohello *ResourceGroupName*.</span><span class="sxs-lookup"><span data-stu-id="54428-210">hello next step is toocreate a lookup table associating hello information from hello tags toohello *ResourceGroupName*.</span></span> <span data-ttu-id="54428-211">Essa tabela de pesquisa será usada na próxima etapa tooenrich Olá consumo dados saudação com informações de marca.</span><span class="sxs-lookup"><span data-stu-id="54428-211">This lookup table will be used on hello next step tooenrich hello consumption data with tag information.</span></span>

### <a name="adding-hello-tag-information-toohello-consumption-data"></a><span data-ttu-id="54428-212">Adicionando dados de consumo Olá marca informações toohello</span><span class="sxs-lookup"><span data-stu-id="54428-212">Adding hello tag information toohello consumption data</span></span>
<span data-ttu-id="54428-213">Agora podemos pode saltar toohello *PublishData* folha, quais processos Olá informações de consumo de saudação API de cobrança e adicionar campos Olá extraídos de marcas de saudação.</span><span class="sxs-lookup"><span data-stu-id="54428-213">Now we can jump toohello *PublishData* sheet, which processes hello consumption information from hello Billing API, and add hello fields extracted from hello tags.</span></span> <span data-ttu-id="54428-214">Esse processo é executado examinando a tabela de pesquisa de saudação criada na etapa anterior de saudação, usando Olá *ResourceGroupName* como chave Olá para pesquisas de saudação.</span><span class="sxs-lookup"><span data-stu-id="54428-214">This process is performed by looking at hello lookup table created on hello previous step, using hello *ResourceGroupName* as hello key for hello lookups.</span></span>

<span data-ttu-id="54428-215">![Figura 5 - populando a estrutura de conta Olá com informações de saudação do pesquisas Olá][14]</span><span class="sxs-lookup"><span data-stu-id="54428-215">![Figure 5 - Populating hello account structure with hello information from hello lookups][14]</span></span>

<span data-ttu-id="54428-216">Observe que foram aplicados a campos de estrutura Olá conta apropriada para o serviço de "Rede" Olá, corrigir o problema de saudação com hello ausente marcas.</span><span class="sxs-lookup"><span data-stu-id="54428-216">Notice that hello appropriate account structure fields for hello “Networking” service were applied, fixing hello issue with hello missing tags.</span></span> <span data-ttu-id="54428-217">É populado também campos de estrutura de conta Olá para recursos que não seja nosso grupo de recursos de destino com "Outros", em ordem toodifferentiate em Olá relatórios.</span><span class="sxs-lookup"><span data-stu-id="54428-217">We also populated hello account structure fields for resources other than our target Resource Group with “Other”, in order toodifferentiate them on hello reports.</span></span>

<span data-ttu-id="54428-218">Agora precisamos apenas tooadd dados de uso uma etapa toopublish hello.</span><span class="sxs-lookup"><span data-stu-id="54428-218">Now we just need tooadd a step toopublish hello usage data.</span></span> <span data-ttu-id="54428-219">Durante esta etapa, taxas de saudação apropriadas para cada serviço definidos no nosso plano de taxa será aplicada toohello as informações de uso com custos resultante de saudação carregados no banco de dados de saudação.</span><span class="sxs-lookup"><span data-stu-id="54428-219">During this step, hello appropriate rates for each service defined on our Rate Plan will be applied toohello usage information, with hello resulting charge loaded into hello database.</span></span>

<span data-ttu-id="54428-220">Olá mais importante é que você só tem toogo esse processo por meio de uma vez.</span><span class="sxs-lookup"><span data-stu-id="54428-220">hello best part is that you only have toogo through this process once.</span></span> <span data-ttu-id="54428-221">Quando a pasta de trabalho de saudação for concluída, você precisa apenas tooadd-Agendador toohello e ele serão executado por hora ou diariamente Olá agendado.</span><span class="sxs-lookup"><span data-stu-id="54428-221">When hello workbook is completed, you just need tooadd it toohello scheduler and it will run hourly or daily at hello scheduled time.</span></span> <span data-ttu-id="54428-222">Em seguida, ele é apenas uma questão de criar novos relatórios, ou personalizar os existentes, em ordem tooanalyze Olá tooget significativo análises de dados com o uso de nuvem.</span><span class="sxs-lookup"><span data-stu-id="54428-222">Then it’s just a matter of creating new reports, or customizing existing ones, in order tooanalyze hello data tooget meaningful insights from your cloud usage.</span></span>

### <a name="next-steps"></a><span data-ttu-id="54428-223">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="54428-223">Next Steps</span></span>
* <span data-ttu-id="54428-224">Para obter instruções detalhadas sobre a criação de pastas de trabalho cruiser em nuvem e relatórios, consulte tooCloud cruiser em do on-line [documentação](http://docs.cloudcruiser.com/) (logon válido necessário).</span><span class="sxs-lookup"><span data-stu-id="54428-224">For detailed instructions on creating Cloud Cruiser workbooks and reports, please refer tooCloud Cruiser’s online [documentation](http://docs.cloudcruiser.com/) (valid login required).</span></span>  <span data-ttu-id="54428-225">Para obter mais informações sobre o Cloud Cruiser, entre em contato com [info@cloudcruiser.com](mailto:info@cloudcruiser.com).</span><span class="sxs-lookup"><span data-stu-id="54428-225">For more information about Cloud Cruiser, please contact [info@cloudcruiser.com](mailto:info@cloudcruiser.com).</span></span>
* <span data-ttu-id="54428-226">Consulte [obter ideias sobre o consumo de recursos do Microsoft Azure](billing-usage-rate-card-overview.md) para uma visão geral das APIs de RateCard e Olá uso de recursos do Azure.</span><span class="sxs-lookup"><span data-stu-id="54428-226">See [Gain insights into your Microsoft Azure resource consumption](billing-usage-rate-card-overview.md) for an overview of hello Azure Resource Usage and RateCard APIs.</span></span>
* <span data-ttu-id="54428-227">Check-out Olá [referência da API REST do Azure cobrança](https://msdn.microsoft.com/library/azure/1ea5b323-54bb-423d-916f-190de96c6a3c) para obter mais informações sobre as duas APIs, que fazem parte do conjunto de saudação de APIs fornecidas pelo hello Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="54428-227">Check out hello [Azure Billing REST API Reference](https://msdn.microsoft.com/library/azure/1ea5b323-54bb-423d-916f-190de96c6a3c) for more information on both APIs, which are part of hello set of APIs provided by hello Azure Resource Manager.</span></span>
* <span data-ttu-id="54428-228">Se você quiser toodive diretamente no código de exemplo hello, check-out de nosso Microsoft Azure cobrança API exemplos de código em [exemplos de código do Azure](https://azure.microsoft.com/documentation/samples/?term=billing).</span><span class="sxs-lookup"><span data-stu-id="54428-228">If you would like toodive right into hello sample code, check out our Microsoft Azure Billing API Code Samples on [Azure Code Samples](https://azure.microsoft.com/documentation/samples/?term=billing).</span></span>

### <a name="learn-more"></a><span data-ttu-id="54428-229">Saiba mais</span><span class="sxs-lookup"><span data-stu-id="54428-229">Learn More</span></span>
* <span data-ttu-id="54428-230">Consulte Olá [visão geral do Gerenciador de recursos do Azure](../azure-resource-manager/resource-group-overview.md) artigo toolearn mais sobre hello Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="54428-230">See hello [Azure Resource Manager Overview](../azure-resource-manager/resource-group-overview.md) article toolearn more about hello Azure Resource Manager.</span></span>

<!--Image references-->

[1]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Create-New-Workbook-Collection.png "Figura 1 — Criando uma nova coleção"
[2]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Import-Data-From-RateCard.png "Figura 2: importar dados do novo conjunto de saudação"
[3]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Transformation-Steps-Process-RateCard-Data.png "Figura 3 - transformação etapas tooprocess coletados dados de API RateCard"
[4]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Publish-RateCard-Data-New-Services-Rates.png "Figura 4: publicando dados de saudação do hello RateCard API como novos serviços e taxas"
[5]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Verify-Azure-Services-And-Pricing1.png "Figura 5 - verificando Olá novos serviços"
[6]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Verify-Azure-Services-And-Pricing2.png "Figura 6: verificando Olá novo plano de taxa e as taxas associadas"
[7]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Transforming-WAP-Normalize-Services.png "Figura 7: transformar os serviços de dados do toonormalize WAP"
[8]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Workbook-Scheduling.png "Figura 8 — Planejamento de pasta de trabalho"
[9]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Workload-Cost-Simulation-Report.png "Figura 9 - relatório de exemplo de cenário de comparação de custo de carga de trabalho Olá"
[10]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/1_ReportWithTags.png "Figura 10 — Relatório com divisões usando marcações"
[11]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/2_ResourceGroupsWithTags.png "Figura 11 — Grupo de Recursos com as marcações associadas no Portal do Azure"
[12]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/3_ImportIntoUsageAPISheet.png "Figura 12 - dados de uso API importados para a folha de UsageAPI Olá"
[13]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/4_NewTagField.png "Figura 13 - criar novos campos de informações de marca de saudação"
[14]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/5_PopulateAccountStructure.png "Figura 14 - populando a estrutura de conta Olá com informações de saudação do pesquisas Olá"
