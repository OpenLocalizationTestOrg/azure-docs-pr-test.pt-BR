---
title: aaaHandling ordem de eventos e lateness com o Azure Stream Analytics | Microsoft Docs
description: Saiba como o Stream Analytics funciona com eventos fora de ordem ou atrasados nos fluxos de dados.
keywords: fora de ordem, atraso, eventos
documentationcenter: 
services: stream-analytics
author: jeffstokes72
manager: jhubbard
editor: cgronlun
ms.assetid: 
ms.service: stream-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-services
ms.date: 04/20/2017
ms.author: jeffstok
ms.openlocfilehash: 87c028662fbafbf4f72f57f215d017f65bb649f0
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="azure-stream-analytics-event-order-handling"></a><span data-ttu-id="b9e7a-104">Manipulação da ordem dos eventos do Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="b9e7a-104">Azure Stream Analytics event order handling</span></span>

<span data-ttu-id="b9e7a-105">Em um fluxo de dados temporais dos eventos, cada evento é registrado com o tempo de saudação Olá evento é recebido.</span><span class="sxs-lookup"><span data-stu-id="b9e7a-105">In a temporal data stream of events, each event is recorded with hello time that hello event is received.</span></span> <span data-ttu-id="b9e7a-106">Algumas condições podem causar fluxos de eventos toooccasionally receber alguns eventos em uma ordem diferente do qual eles foram enviados.</span><span class="sxs-lookup"><span data-stu-id="b9e7a-106">Some conditions might cause event streams toooccasionally receive some events in a different order than which they were sent.</span></span> <span data-ttu-id="b9e7a-107">Um simple TCP retransmitir ou até mesmo uma defasagem horária entre hello enviando dispositivo e hello recebendo hub de eventos pode causar esse toooccur.</span><span class="sxs-lookup"><span data-stu-id="b9e7a-107">A simple TCP retransmit, or even a clock skew between hello sending device and hello receiving event hub might cause this toooccur.</span></span> <span data-ttu-id="b9e7a-108">Eventos de "Pontuação" também são adicionados tooreceived fluxos de eventos, tempo de saudação tooadvance na ausência de saudação de entradas de eventos.</span><span class="sxs-lookup"><span data-stu-id="b9e7a-108">“Punctuation” events also are added tooreceived event streams, tooadvance hello time in hello absence of event arrivals.</span></span> <span data-ttu-id="b9e7a-109">Eles são necessários em cenários como "Notificar-me quando nenhum logon ocorrer por três minutos".</span><span class="sxs-lookup"><span data-stu-id="b9e7a-109">These are needed in scenarios like “Notify me when no logins occur for 3 minutes."</span></span>

<span data-ttu-id="b9e7a-110">Os fluxos de entrada que não estão em ordem são:</span><span class="sxs-lookup"><span data-stu-id="b9e7a-110">Input streams that are not in order are either:</span></span>
* <span data-ttu-id="b9e7a-111">Classificados (e, portanto, **atrasados**).</span><span class="sxs-lookup"><span data-stu-id="b9e7a-111">Sorted (and therefore **delayed**).</span></span>
* <span data-ttu-id="b9e7a-112">Ajustada pelo sistema hello, de acordo com a política de usuário especificado de tooa.</span><span class="sxs-lookup"><span data-stu-id="b9e7a-112">Adjusted by hello system, according tooa user-specified policy.</span></span>


## <a name="lateness-tolerance"></a><span data-ttu-id="b9e7a-113">Tolerância de atraso</span><span class="sxs-lookup"><span data-stu-id="b9e7a-113">Lateness tolerance</span></span>
<span data-ttu-id="b9e7a-114">O Stream Analytics tolera esses tipos de cenários.</span><span class="sxs-lookup"><span data-stu-id="b9e7a-114">Stream Analytics tolerates these types of scenarios.</span></span> <span data-ttu-id="b9e7a-115">O Stream Analytics tem tratamento para eventos "fora de ordem" e "em atraso".</span><span class="sxs-lookup"><span data-stu-id="b9e7a-115">Stream Analytics has handling for "out-of-order" and "late" events.</span></span> <span data-ttu-id="b9e7a-116">Ele trata esses eventos em Olá maneiras a seguir:</span><span class="sxs-lookup"><span data-stu-id="b9e7a-116">It handles these events in hello following ways:</span></span>

* <span data-ttu-id="b9e7a-117">Os eventos que chegam fora de ordem, mas dentro Olá definir tolerância são **reordenadas por data/hora**.</span><span class="sxs-lookup"><span data-stu-id="b9e7a-117">Events that arrive out of order but within hello set tolerance are **reordered by timestamp**.</span></span>
* <span data-ttu-id="b9e7a-118">Os eventos que chegam após o tempo de tolerância são **removidos ou ajustados**.</span><span class="sxs-lookup"><span data-stu-id="b9e7a-118">Events that arrive later than tolerance are **dropped or adjusted**.</span></span>
    * <span data-ttu-id="b9e7a-119">**Ajustado**: toohave tooappear ajustada acessou hello mais recente de tempo aceitável.</span><span class="sxs-lookup"><span data-stu-id="b9e7a-119">**Adjusted**: Adjusted tooappear toohave arrived at hello latest acceptable time.</span></span>
    * <span data-ttu-id="b9e7a-120">**Removidos**: descartados.</span><span class="sxs-lookup"><span data-stu-id="b9e7a-120">**Dropped**: Discarded.</span></span>

![Manipulação de eventos do Stream Analytics](media/stream-analytics-event-handling/stream-analytics-event-handling.png)

## <a name="reduce-hello-number-of-out-of-order-events"></a><span data-ttu-id="b9e7a-122">Reduzir o número de saudação de eventos fora de ordem</span><span class="sxs-lookup"><span data-stu-id="b9e7a-122">Reduce hello number of out-of-order events</span></span>

<span data-ttu-id="b9e7a-123">Uma vez que o Stream Analytics aplica uma transformação temporal quando processa eventos de entrada (por exemplo, para agregações com janela ou uniões temporais), ele classifica eventos de entrada pela ordem do carimbo de data/hora.</span><span class="sxs-lookup"><span data-stu-id="b9e7a-123">Because Stream Analytics applies a temporal transformation when it processes incoming events (for example, for windowed aggregates or temporal joins), Stream Analytics sorts incoming events by timestamp order.</span></span>

<span data-ttu-id="b9e7a-124">Quando for hello "timestamp por" palavra-chave **não** usado, o tempo de enfileiramento de evento de Hubs de eventos do Azure Olá é usado por padrão.</span><span class="sxs-lookup"><span data-stu-id="b9e7a-124">When hello “timestamp by” keyword is **not** used, hello Azure Event Hubs event enqueue time is used by default.</span></span> <span data-ttu-id="b9e7a-125">Hubs de eventos garante monotonicidade do hello timestamp em cada partição do hub de eventos de saudação.</span><span class="sxs-lookup"><span data-stu-id="b9e7a-125">Event Hubs guarantees monotonicity of hello timestamp on each partition of hello event hub.</span></span> <span data-ttu-id="b9e7a-126">Eles também garantem que os eventos de todas as partições sejam mesclados na ordem do carimbo de data/hora.</span><span class="sxs-lookup"><span data-stu-id="b9e7a-126">It also guarantees that events from all partitions will be merged in timestamp order.</span></span> <span data-ttu-id="b9e7a-127">Essas duas garantias dos Hubs de Eventos asseguram que não haja eventos fora de ordem.</span><span class="sxs-lookup"><span data-stu-id="b9e7a-127">These two Event Hubs guarantees ensure no out-of-order events.</span></span>

<span data-ttu-id="b9e7a-128">Às vezes, é importante para o carimbo de hora você toouse saudação do remetente.</span><span class="sxs-lookup"><span data-stu-id="b9e7a-128">Sometimes, it’s important for you toouse hello sender’s timestamp.</span></span> <span data-ttu-id="b9e7a-129">Nesse caso, um carimbo de hora de carga do evento Olá é escolhido usando "timestamp por".</span><span class="sxs-lookup"><span data-stu-id="b9e7a-129">In that case, a timestamp from hello event payload is chosen by using “timestamp by.”</span></span> <span data-ttu-id="b9e7a-130">Nesses cenários, uma ou mais fontes de ordem incorreta podem ser introduzidas:</span><span class="sxs-lookup"><span data-stu-id="b9e7a-130">In these scenarios, one or more sources of event misorder might be introduced:</span></span>

* <span data-ttu-id="b9e7a-131">Os produtores de eventos têm defasagem horária.</span><span class="sxs-lookup"><span data-stu-id="b9e7a-131">Event producers have clock skews.</span></span> <span data-ttu-id="b9e7a-132">Isso é comum quando produtores são de diferentes computadores, pois eles têm relógios diferentes.</span><span class="sxs-lookup"><span data-stu-id="b9e7a-132">This is common when producers are from different computers, so they have different clocks.</span></span>
* <span data-ttu-id="b9e7a-133">Há um atraso de rede da fonte de saudação do hub de eventos Olá eventos toohello destino.</span><span class="sxs-lookup"><span data-stu-id="b9e7a-133">There's a network delay from hello source of hello events toohello destination event hub.</span></span>
* <span data-ttu-id="b9e7a-134">As defasagens horárias existem entre partições do hub de eventos.</span><span class="sxs-lookup"><span data-stu-id="b9e7a-134">Clock skews exist between event hub partitions.</span></span> <span data-ttu-id="b9e7a-135">O Stream Analytics primeiro classifica os eventos de todas as partições do hub de eventos pela hora de enfileiramento do evento.</span><span class="sxs-lookup"><span data-stu-id="b9e7a-135">Stream Analytics first sorts events from all event hub partitions by event enqueue time.</span></span> <span data-ttu-id="b9e7a-136">Em seguida, ele examina TDS Olá para ordenação incorreta desses eventos.</span><span class="sxs-lookup"><span data-stu-id="b9e7a-136">Then, it examines hello data stream for misordered events.</span></span>

<span data-ttu-id="b9e7a-137">Na guia de configuração do hello, você verá Olá padrões a seguir:</span><span class="sxs-lookup"><span data-stu-id="b9e7a-137">On hello configuration tab, you see hello following defaults:</span></span>

![Manipulação de eventos fora de ordem do Stream Analytics](media/stream-analytics-event-handling/stream-analytics-out-of-order-handling.png)

<span data-ttu-id="b9e7a-139">Se você usar 0 segundos como a janela de tolerância de fora de ordem de hello, está afirmando que todos os eventos estão na ordem todo o tempo de saudação.</span><span class="sxs-lookup"><span data-stu-id="b9e7a-139">If you use 0 seconds as hello out-of-order tolerance window, you are asserting that all events are in order all hello time.</span></span> <span data-ttu-id="b9e7a-140">Fontes de saudação três de ordenação incorreta desses eventos, é improvável que isso é verdadeiro.</span><span class="sxs-lookup"><span data-stu-id="b9e7a-140">Given hello three sources of misordered events, it’s unlikely that this is true.</span></span> 

<span data-ttu-id="b9e7a-141">Análise de fluxo de tooallow toocorrect misorder um evento, você pode especificar uma janela de tolerância de fora de ordem diferente de zero.</span><span class="sxs-lookup"><span data-stu-id="b9e7a-141">tooallow Stream Analytics toocorrect an event misorder, you can specify a non-zero out-of-order tolerance window.</span></span> <span data-ttu-id="b9e7a-142">Eventos de buffers de análise de fluxo toothat janela e, em seguida, reorganiza-los usando Olá carimbo de hora que você escolheu.</span><span class="sxs-lookup"><span data-stu-id="b9e7a-142">Stream Analytics buffers events up toothat window, and then reorders them by using hello timestamp you chose.</span></span> <span data-ttu-id="b9e7a-143">Ele aplica transformação temporal hello.</span><span class="sxs-lookup"><span data-stu-id="b9e7a-143">It then applies hello temporal transformation.</span></span> <span data-ttu-id="b9e7a-144">Você pode começar com uma janela de 3 segundos e ajustar Olá valor tooreduce Olá quantos eventos de tempo ajustado.</span><span class="sxs-lookup"><span data-stu-id="b9e7a-144">You can start with a 3-second window, and tune hello value tooreduce hello number of events that are time-adjusted.</span></span> 

<span data-ttu-id="b9e7a-145">Um efeito colateral do buffer de saudação é saída de hello **atrasado por Olá mesmo período de tempo**.</span><span class="sxs-lookup"><span data-stu-id="b9e7a-145">A side effect of hello buffering is that hello output is **delayed by hello same amount of time**.</span></span> <span data-ttu-id="b9e7a-146">Você pode ajustar Olá valor tooreduce Olá quantos eventos fora de ordem e reduzir a latência de saudação do trabalho.</span><span class="sxs-lookup"><span data-stu-id="b9e7a-146">You can tune hello value tooreduce hello number of out-of-order events, and keep hello job latency low.</span></span>

## <a name="get-help"></a><span data-ttu-id="b9e7a-147">Obter ajuda</span><span class="sxs-lookup"><span data-stu-id="b9e7a-147">Get help</span></span>
<span data-ttu-id="b9e7a-148">Para obter mais ajuda, teste nosso [fórum do Stream Analytics do Azure](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span><span class="sxs-lookup"><span data-stu-id="b9e7a-148">For additional assistance, try our [Azure Stream Analytics forum](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span></span>

## <a name="next-steps"></a><span data-ttu-id="b9e7a-149">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="b9e7a-149">Next steps</span></span>
* [<span data-ttu-id="b9e7a-150">Introdução tooStream análise</span><span class="sxs-lookup"><span data-stu-id="b9e7a-150">Introduction tooStream Analytics</span></span>](stream-analytics-introduction.md)
* [<span data-ttu-id="b9e7a-151">Introdução ao Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="b9e7a-151">Get started with Stream Analytics</span></span>](stream-analytics-real-time-fraud-detection.md)
* [<span data-ttu-id="b9e7a-152">Dimensionar trabalhos do Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="b9e7a-152">Scale Stream Analytics jobs</span></span>](stream-analytics-scale-jobs.md)
* [<span data-ttu-id="b9e7a-153">Referência da linguagem de consulta do Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="b9e7a-153">Stream Analytics query language reference</span></span>](https://msdn.microsoft.com/library/azure/dn834998.aspx)
* [<span data-ttu-id="b9e7a-154">Referência da API REST de gerenciamento do Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="b9e7a-154">Stream Analytics management REST API reference</span></span>](https://msdn.microsoft.com/library/azure/dn835031.aspx)