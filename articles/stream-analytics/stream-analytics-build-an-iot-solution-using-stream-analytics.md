---
title: "uma solução de IoT usando a análise de fluxo de aaaBuild | Microsoft Docs"
description: "Tutorial de Introdução para Olá solução de IoT de análise de fluxo de um cenário de cabina de cobrança"
keywords: "solução de iot, funções da janela"
documentationcenter: 
services: stream-analytics
author: samacha
manager: jhubbard
editor: cgronlun
ms.assetid: a473ea0a-3eaa-4e5b-aaa1-fec7e9069f20
ms.service: stream-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-services
ms.date: 03/28/2017
ms.author: samacha
ms.openlocfilehash: e37fc5b56c4ffc4a2d7b820afe0c17631e577ea0
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="build-an-iot-solution-by-using-stream-analytics"></a><span data-ttu-id="72d55-104">Compilar uma solução de IoT usando o Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="72d55-104">Build an IoT solution by using Stream Analytics</span></span>
## <a name="introduction"></a><span data-ttu-id="72d55-105">Introdução</span><span class="sxs-lookup"><span data-stu-id="72d55-105">Introduction</span></span>
<span data-ttu-id="72d55-106">Neste tutorial, você aprenderá como informações em tempo real do toouse Azure Stream Analytics tooget de seus dados.</span><span class="sxs-lookup"><span data-stu-id="72d55-106">In this tutorial, you will learn how toouse Azure Stream Analytics tooget real-time insights from your data.</span></span> <span data-ttu-id="72d55-107">Os desenvolvedores podem facilmente combinar fluxos de dados, como fluxos de clique, logs e eventos gerados pelo dispositivo com registros históricos ou informações de negócios de tooderive de dados de referência.</span><span class="sxs-lookup"><span data-stu-id="72d55-107">Developers can easily combine streams of data, such as click-streams, logs, and device-generated events, with historical records or reference data tooderive business insights.</span></span> <span data-ttu-id="72d55-108">Como um serviço de computação de fluxo em tempo real, totalmente gerenciado que é hospedado no Microsoft Azure, Azure Stream Analytics fornece resiliência interna, baixa latência e escalabilidade tooget preparam em minutos.</span><span class="sxs-lookup"><span data-stu-id="72d55-108">As a fully managed, real-time stream computation service that's hosted in Microsoft Azure, Azure Stream Analytics provides built-in resiliency, low latency, and scalability tooget you up and running in minutes.</span></span>

<span data-ttu-id="72d55-109">Depois de concluir este tutorial, você poderá:</span><span class="sxs-lookup"><span data-stu-id="72d55-109">After completing this tutorial, you will be able to:</span></span>

* <span data-ttu-id="72d55-110">Familiarize-se com o portal do Azure Stream Analytics hello.</span><span class="sxs-lookup"><span data-stu-id="72d55-110">Familiarize yourself with hello Azure Stream Analytics portal.</span></span>
* <span data-ttu-id="72d55-111">Configurar e implantar um trabalho de transmissão.</span><span class="sxs-lookup"><span data-stu-id="72d55-111">Configure and deploy a streaming job.</span></span>
* <span data-ttu-id="72d55-112">Descrever os problemas do mundo real e resolvê-los usando a linguagem de consulta do Stream Analytics hello.</span><span class="sxs-lookup"><span data-stu-id="72d55-112">Articulate real-world problems and solve them by using hello Stream Analytics query language.</span></span>
* <span data-ttu-id="72d55-113">Desenvolver com confiança soluções de transmissão para seus clientes usando o Stream Analytics do Azure.</span><span class="sxs-lookup"><span data-stu-id="72d55-113">Develop streaming solutions for your customers by using Stream Analytics with confidence.</span></span>
* <span data-ttu-id="72d55-114">Use Olá monitoramento e registro em log experiência tootroubleshoot problemas.</span><span class="sxs-lookup"><span data-stu-id="72d55-114">Use hello monitoring and logging experience tootroubleshoot issues.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="72d55-115">Pré-requisitos</span><span class="sxs-lookup"><span data-stu-id="72d55-115">Prerequisites</span></span>
<span data-ttu-id="72d55-116">Você será necessário Olá toocomplete pré-requisitos a seguir este tutorial:</span><span class="sxs-lookup"><span data-stu-id="72d55-116">You will need hello following prerequisites toocomplete this tutorial:</span></span>

* <span data-ttu-id="72d55-117">versão mais recente de saudação do [PowerShell do Azure](/powershell/azure/overview)</span><span class="sxs-lookup"><span data-stu-id="72d55-117">hello latest version of [Azure PowerShell](/powershell/azure/overview)</span></span>
* <span data-ttu-id="72d55-118">Visual Studio de 2017, 2015 ou hello livre [Visual Studio Community](https://www.visualstudio.com/products/visual-studio-community-vs.aspx)</span><span class="sxs-lookup"><span data-stu-id="72d55-118">Visual Studio 2017, 2015, or hello free [Visual Studio Community](https://www.visualstudio.com/products/visual-studio-community-vs.aspx)</span></span>
* <span data-ttu-id="72d55-119">Uma [assinatura do Azure](https://azure.microsoft.com/pricing/free-trial/)</span><span class="sxs-lookup"><span data-stu-id="72d55-119">An [Azure subscription](https://azure.microsoft.com/pricing/free-trial/)</span></span>
* <span data-ttu-id="72d55-120">Privilégios administrativos no computador de saudação</span><span class="sxs-lookup"><span data-stu-id="72d55-120">Administrative privileges on hello computer</span></span>
* <span data-ttu-id="72d55-121">Download de [TollApp.zip](https://github.com/Azure/azure-stream-analytics/blob/master/Samples/TollApp/TollApp.zip) de saudação Microsoft Download Center</span><span class="sxs-lookup"><span data-stu-id="72d55-121">Download of [TollApp.zip](https://github.com/Azure/azure-stream-analytics/blob/master/Samples/TollApp/TollApp.zip) from hello Microsoft Download Center</span></span>
* <span data-ttu-id="72d55-122">Opcional: Código gerador de evento Olá TollApp em [GitHub](https://aka.ms/azure-stream-analytics-toll-source)</span><span class="sxs-lookup"><span data-stu-id="72d55-122">Optional: Source code for hello TollApp event generator in [GitHub](https://aka.ms/azure-stream-analytics-toll-source)</span></span>

## <a name="scenario-introduction-hello-toll"></a><span data-ttu-id="72d55-123">Introdução ao cenário: “Olá, pedágio!”</span><span class="sxs-lookup"><span data-stu-id="72d55-123">Scenario introduction: “Hello, Toll!”</span></span>
<span data-ttu-id="72d55-124">Uma praça de pedágio é um fenômeno comum.</span><span class="sxs-lookup"><span data-stu-id="72d55-124">A toll station is a common phenomenon.</span></span> <span data-ttu-id="72d55-125">Você encontre-los em várias estradas, pontes e túneis em Olá, mundo.</span><span class="sxs-lookup"><span data-stu-id="72d55-125">You encounter them on many expressways, bridges, and tunnels across hello world.</span></span> <span data-ttu-id="72d55-126">Cada praça de pedágio tem várias cabines do pedágio.</span><span class="sxs-lookup"><span data-stu-id="72d55-126">Each toll station has multiple toll booths.</span></span> <span data-ttu-id="72d55-127">Em cabines manuais, você pare atendente de tooan toopay Olá pedágio.</span><span class="sxs-lookup"><span data-stu-id="72d55-127">At manual booths, you stop toopay hello toll tooan attendant.</span></span> <span data-ttu-id="72d55-128">Em cabines automatizadas, um sensor na parte superior de cada cabine examina um cartão RFID que é afixada toohello para-brisa do seu veículo conforme você passa pedágio hello.</span><span class="sxs-lookup"><span data-stu-id="72d55-128">At automated booths, a sensor on top of each booth scans an RFID card that's affixed toohello windshield of your vehicle as you pass hello toll booth.</span></span> <span data-ttu-id="72d55-129">É fácil toovisualize passagem de saudação dos veículos por essas estações de pedágio como um fluxo de eventos onde operações interessantes podem ser executadas.</span><span class="sxs-lookup"><span data-stu-id="72d55-129">It is easy toovisualize hello passage of vehicles through these toll stations as an event stream over which interesting operations can be performed.</span></span>

![Imagem de carros em cabines de pedágio](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image1.jpg)

## <a name="incoming-data"></a><span data-ttu-id="72d55-131">Dados de entrada</span><span class="sxs-lookup"><span data-stu-id="72d55-131">Incoming data</span></span>
<span data-ttu-id="72d55-132">Este tutorial funciona com dois fluxos de dados.</span><span class="sxs-lookup"><span data-stu-id="72d55-132">This tutorial works with two streams of data.</span></span> <span data-ttu-id="72d55-133">Sensores instalados em entrada hello e saída de estações de pedágio Olá produzir primeiro fluxo de saudação.</span><span class="sxs-lookup"><span data-stu-id="72d55-133">Sensors installed in hello entrance and exit of hello toll stations produce hello first stream.</span></span> <span data-ttu-id="72d55-134">segundo fluxo de saudação é um conjunto de dados de pesquisa estática que tem dados de registro de veículo.</span><span class="sxs-lookup"><span data-stu-id="72d55-134">hello second stream is a static lookup dataset that has vehicle registration data.</span></span>

### <a name="entry-data-stream"></a><span data-ttu-id="72d55-135">Fluxo de dados de entrada</span><span class="sxs-lookup"><span data-stu-id="72d55-135">Entry data stream</span></span>
<span data-ttu-id="72d55-136">fluxo de dados de entrada Hello contém informações sobre o carro conforme ele entra estações de pedágio.</span><span class="sxs-lookup"><span data-stu-id="72d55-136">hello entry data stream contains information about cars as they enter toll stations.</span></span>

| <span data-ttu-id="72d55-137">TollID</span><span class="sxs-lookup"><span data-stu-id="72d55-137">TollID</span></span> | <span data-ttu-id="72d55-138">EntryTime</span><span class="sxs-lookup"><span data-stu-id="72d55-138">EntryTime</span></span> | <span data-ttu-id="72d55-139">PlacaDeCarro</span><span class="sxs-lookup"><span data-stu-id="72d55-139">LicensePlate</span></span> | <span data-ttu-id="72d55-140">Estado</span><span class="sxs-lookup"><span data-stu-id="72d55-140">State</span></span> | <span data-ttu-id="72d55-141">Faça</span><span class="sxs-lookup"><span data-stu-id="72d55-141">Make</span></span> | <span data-ttu-id="72d55-142">Modelo</span><span class="sxs-lookup"><span data-stu-id="72d55-142">Model</span></span> | <span data-ttu-id="72d55-143">VehicleType</span><span class="sxs-lookup"><span data-stu-id="72d55-143">VehicleType</span></span> | <span data-ttu-id="72d55-144">VehicleWeight</span><span class="sxs-lookup"><span data-stu-id="72d55-144">VehicleWeight</span></span> | <span data-ttu-id="72d55-145">Pedágio</span><span class="sxs-lookup"><span data-stu-id="72d55-145">Toll</span></span> | <span data-ttu-id="72d55-146">Marca</span><span class="sxs-lookup"><span data-stu-id="72d55-146">Tag</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="72d55-147">1</span><span class="sxs-lookup"><span data-stu-id="72d55-147">1</span></span> |<span data-ttu-id="72d55-148">2014-09-10 12:01:00.000</span><span class="sxs-lookup"><span data-stu-id="72d55-148">2014-09-10 12:01:00.000</span></span> |<span data-ttu-id="72d55-149">JNB 7001</span><span class="sxs-lookup"><span data-stu-id="72d55-149">JNB 7001</span></span> |<span data-ttu-id="72d55-150">NOVA IORQUE</span><span class="sxs-lookup"><span data-stu-id="72d55-150">NY</span></span> |<span data-ttu-id="72d55-151">Honda</span><span class="sxs-lookup"><span data-stu-id="72d55-151">Honda</span></span> |<span data-ttu-id="72d55-152">CRV</span><span class="sxs-lookup"><span data-stu-id="72d55-152">CRV</span></span> |<span data-ttu-id="72d55-153">1</span><span class="sxs-lookup"><span data-stu-id="72d55-153">1</span></span> |<span data-ttu-id="72d55-154">0</span><span class="sxs-lookup"><span data-stu-id="72d55-154">0</span></span> |<span data-ttu-id="72d55-155">7</span><span class="sxs-lookup"><span data-stu-id="72d55-155">7</span></span> | |
| <span data-ttu-id="72d55-156">1</span><span class="sxs-lookup"><span data-stu-id="72d55-156">1</span></span> |<span data-ttu-id="72d55-157">2014-09-10 12:02:00.000</span><span class="sxs-lookup"><span data-stu-id="72d55-157">2014-09-10 12:02:00.000</span></span> |<span data-ttu-id="72d55-158">1001 YXZ</span><span class="sxs-lookup"><span data-stu-id="72d55-158">YXZ 1001</span></span> |<span data-ttu-id="72d55-159">NOVA IORQUE</span><span class="sxs-lookup"><span data-stu-id="72d55-159">NY</span></span> |<span data-ttu-id="72d55-160">Toyota</span><span class="sxs-lookup"><span data-stu-id="72d55-160">Toyota</span></span> |<span data-ttu-id="72d55-161">Camry</span><span class="sxs-lookup"><span data-stu-id="72d55-161">Camry</span></span> |<span data-ttu-id="72d55-162">1</span><span class="sxs-lookup"><span data-stu-id="72d55-162">1</span></span> |<span data-ttu-id="72d55-163">0</span><span class="sxs-lookup"><span data-stu-id="72d55-163">0</span></span> |<span data-ttu-id="72d55-164">4</span><span class="sxs-lookup"><span data-stu-id="72d55-164">4</span></span> |<span data-ttu-id="72d55-165">123456789</span><span class="sxs-lookup"><span data-stu-id="72d55-165">123456789</span></span> |
| <span data-ttu-id="72d55-166">3</span><span class="sxs-lookup"><span data-stu-id="72d55-166">3</span></span> |<span data-ttu-id="72d55-167">2014-09-10 12:02:00.000</span><span class="sxs-lookup"><span data-stu-id="72d55-167">2014-09-10 12:02:00.000</span></span> |<span data-ttu-id="72d55-168">ABC 1004</span><span class="sxs-lookup"><span data-stu-id="72d55-168">ABC 1004</span></span> |<span data-ttu-id="72d55-169">CT</span><span class="sxs-lookup"><span data-stu-id="72d55-169">CT</span></span> |<span data-ttu-id="72d55-170">Ford</span><span class="sxs-lookup"><span data-stu-id="72d55-170">Ford</span></span> |<span data-ttu-id="72d55-171">Taurus</span><span class="sxs-lookup"><span data-stu-id="72d55-171">Taurus</span></span> |<span data-ttu-id="72d55-172">1</span><span class="sxs-lookup"><span data-stu-id="72d55-172">1</span></span> |<span data-ttu-id="72d55-173">0</span><span class="sxs-lookup"><span data-stu-id="72d55-173">0</span></span> |<span data-ttu-id="72d55-174">5</span><span class="sxs-lookup"><span data-stu-id="72d55-174">5</span></span> |<span data-ttu-id="72d55-175">456789123</span><span class="sxs-lookup"><span data-stu-id="72d55-175">456789123</span></span> |
| <span data-ttu-id="72d55-176">2</span><span class="sxs-lookup"><span data-stu-id="72d55-176">2</span></span> |<span data-ttu-id="72d55-177">2014-09-10 12:03:00.000</span><span class="sxs-lookup"><span data-stu-id="72d55-177">2014-09-10 12:03:00.000</span></span> |<span data-ttu-id="72d55-178">1003 XYZ</span><span class="sxs-lookup"><span data-stu-id="72d55-178">XYZ 1003</span></span> |<span data-ttu-id="72d55-179">CT</span><span class="sxs-lookup"><span data-stu-id="72d55-179">CT</span></span> |<span data-ttu-id="72d55-180">Toyota</span><span class="sxs-lookup"><span data-stu-id="72d55-180">Toyota</span></span> |<span data-ttu-id="72d55-181">Corolla</span><span class="sxs-lookup"><span data-stu-id="72d55-181">Corolla</span></span> |<span data-ttu-id="72d55-182">1</span><span class="sxs-lookup"><span data-stu-id="72d55-182">1</span></span> |<span data-ttu-id="72d55-183">0</span><span class="sxs-lookup"><span data-stu-id="72d55-183">0</span></span> |<span data-ttu-id="72d55-184">4</span><span class="sxs-lookup"><span data-stu-id="72d55-184">4</span></span> | |
| <span data-ttu-id="72d55-185">1</span><span class="sxs-lookup"><span data-stu-id="72d55-185">1</span></span> |<span data-ttu-id="72d55-186">2014-09-10 12:03:00.000</span><span class="sxs-lookup"><span data-stu-id="72d55-186">2014-09-10 12:03:00.000</span></span> |<span data-ttu-id="72d55-187">1007 BNJ</span><span class="sxs-lookup"><span data-stu-id="72d55-187">BNJ 1007</span></span> |<span data-ttu-id="72d55-188">NOVA IORQUE</span><span class="sxs-lookup"><span data-stu-id="72d55-188">NY</span></span> |<span data-ttu-id="72d55-189">Honda</span><span class="sxs-lookup"><span data-stu-id="72d55-189">Honda</span></span> |<span data-ttu-id="72d55-190">CRV</span><span class="sxs-lookup"><span data-stu-id="72d55-190">CRV</span></span> |<span data-ttu-id="72d55-191">1</span><span class="sxs-lookup"><span data-stu-id="72d55-191">1</span></span> |<span data-ttu-id="72d55-192">0</span><span class="sxs-lookup"><span data-stu-id="72d55-192">0</span></span> |<span data-ttu-id="72d55-193">5</span><span class="sxs-lookup"><span data-stu-id="72d55-193">5</span></span> |<span data-ttu-id="72d55-194">789123456</span><span class="sxs-lookup"><span data-stu-id="72d55-194">789123456</span></span> |
| <span data-ttu-id="72d55-195">2</span><span class="sxs-lookup"><span data-stu-id="72d55-195">2</span></span> |<span data-ttu-id="72d55-196">2014-09-10 12:05:00.000</span><span class="sxs-lookup"><span data-stu-id="72d55-196">2014-09-10 12:05:00.000</span></span> |<span data-ttu-id="72d55-197">CDE 1007</span><span class="sxs-lookup"><span data-stu-id="72d55-197">CDE 1007</span></span> |<span data-ttu-id="72d55-198">NJ</span><span class="sxs-lookup"><span data-stu-id="72d55-198">NJ</span></span> |<span data-ttu-id="72d55-199">Toyota</span><span class="sxs-lookup"><span data-stu-id="72d55-199">Toyota</span></span> |<span data-ttu-id="72d55-200">4x4</span><span class="sxs-lookup"><span data-stu-id="72d55-200">4x4</span></span> |<span data-ttu-id="72d55-201">1</span><span class="sxs-lookup"><span data-stu-id="72d55-201">1</span></span> |<span data-ttu-id="72d55-202">0</span><span class="sxs-lookup"><span data-stu-id="72d55-202">0</span></span> |<span data-ttu-id="72d55-203">6</span><span class="sxs-lookup"><span data-stu-id="72d55-203">6</span></span> |<span data-ttu-id="72d55-204">321987654</span><span class="sxs-lookup"><span data-stu-id="72d55-204">321987654</span></span> |

<span data-ttu-id="72d55-205">Aqui está uma breve descrição das colunas de saudação:</span><span class="sxs-lookup"><span data-stu-id="72d55-205">Here is a short description of hello columns:</span></span>

| <span data-ttu-id="72d55-206">Coluna</span><span class="sxs-lookup"><span data-stu-id="72d55-206">Column</span></span> | <span data-ttu-id="72d55-207">Descrição</span><span class="sxs-lookup"><span data-stu-id="72d55-207">Description</span></span> |
| --- | --- |
| <span data-ttu-id="72d55-208">TollID</span><span class="sxs-lookup"><span data-stu-id="72d55-208">TollID</span></span> |<span data-ttu-id="72d55-209">ID de cabine do pedágio Olá que identifica exclusivamente um pedágio</span><span class="sxs-lookup"><span data-stu-id="72d55-209">hello toll booth ID that uniquely identifies a toll booth</span></span> |
| <span data-ttu-id="72d55-210">EntryTime</span><span class="sxs-lookup"><span data-stu-id="72d55-210">EntryTime</span></span> |<span data-ttu-id="72d55-211">Data de saudação e a hora da entrada de saudação veículo toohello pedágio em UTC</span><span class="sxs-lookup"><span data-stu-id="72d55-211">hello date and time of entry of hello vehicle toohello toll booth in UTC</span></span> |
| <span data-ttu-id="72d55-212">PlacaDeCarro</span><span class="sxs-lookup"><span data-stu-id="72d55-212">LicensePlate</span></span> |<span data-ttu-id="72d55-213">número de placa de saudação do veículo Olá</span><span class="sxs-lookup"><span data-stu-id="72d55-213">hello license plate number of hello vehicle</span></span> |
| <span data-ttu-id="72d55-214">Estado</span><span class="sxs-lookup"><span data-stu-id="72d55-214">State</span></span> |<span data-ttu-id="72d55-215">Um estado nos Estados Unidos</span><span class="sxs-lookup"><span data-stu-id="72d55-215">A state in United States</span></span> |
| <span data-ttu-id="72d55-216">Faça</span><span class="sxs-lookup"><span data-stu-id="72d55-216">Make</span></span> |<span data-ttu-id="72d55-217">fabricante de saudação do automóvel Olá</span><span class="sxs-lookup"><span data-stu-id="72d55-217">hello manufacturer of hello automobile</span></span> |
| <span data-ttu-id="72d55-218">Modelo</span><span class="sxs-lookup"><span data-stu-id="72d55-218">Model</span></span> |<span data-ttu-id="72d55-219">número de modelo de saudação do automóvel Olá</span><span class="sxs-lookup"><span data-stu-id="72d55-219">hello model number of hello automobile</span></span> |
| <span data-ttu-id="72d55-220">VehicleType</span><span class="sxs-lookup"><span data-stu-id="72d55-220">VehicleType</span></span> |<span data-ttu-id="72d55-221">1 para veículos de passageiros ou 2 para veículos comerciais</span><span class="sxs-lookup"><span data-stu-id="72d55-221">Either 1 for passenger vehicles or 2 for commercial vehicles</span></span> |
| <span data-ttu-id="72d55-222">WeightType</span><span class="sxs-lookup"><span data-stu-id="72d55-222">WeightType</span></span> |<span data-ttu-id="72d55-223">Peso do veículo em toneladas; 0 para veículos de passageiros</span><span class="sxs-lookup"><span data-stu-id="72d55-223">Vehicle weight in tons; 0 for passenger vehicles</span></span> |
| <span data-ttu-id="72d55-224">Pedágio</span><span class="sxs-lookup"><span data-stu-id="72d55-224">Toll</span></span> |<span data-ttu-id="72d55-225">valor de pedágio Olá em USD</span><span class="sxs-lookup"><span data-stu-id="72d55-225">hello toll value in USD</span></span> |
| <span data-ttu-id="72d55-226">Marca</span><span class="sxs-lookup"><span data-stu-id="72d55-226">Tag</span></span> |<span data-ttu-id="72d55-227">Olá e-Tag em automóvel Olá que automatiza o pagamento; espaço em branco em que o pagamento Olá foi feito manualmente</span><span class="sxs-lookup"><span data-stu-id="72d55-227">hello e-Tag on hello automobile that automates payment; blank where hello payment was done manually</span></span> |

### <a name="exit-data-stream"></a><span data-ttu-id="72d55-228">Fluxo de dados de saída</span><span class="sxs-lookup"><span data-stu-id="72d55-228">Exit data stream</span></span>
<span data-ttu-id="72d55-229">fluxo de dados de saída de Hello contém informações sobre carros deixa a estação de pedágio hello.</span><span class="sxs-lookup"><span data-stu-id="72d55-229">hello exit data stream contains information about cars leaving hello toll station.</span></span>

| <span data-ttu-id="72d55-230">**TollId**</span><span class="sxs-lookup"><span data-stu-id="72d55-230">**TollId**</span></span> | <span data-ttu-id="72d55-231">**ExitTime**</span><span class="sxs-lookup"><span data-stu-id="72d55-231">**ExitTime**</span></span> | <span data-ttu-id="72d55-232">**PlacaDeCarro**</span><span class="sxs-lookup"><span data-stu-id="72d55-232">**LicensePlate**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="72d55-233">1</span><span class="sxs-lookup"><span data-stu-id="72d55-233">1</span></span> |<span data-ttu-id="72d55-234">2014-09-10T12:03:00.0000000Z</span><span class="sxs-lookup"><span data-stu-id="72d55-234">2014-09-10T12:03:00.0000000Z</span></span> |<span data-ttu-id="72d55-235">JNB 7001</span><span class="sxs-lookup"><span data-stu-id="72d55-235">JNB 7001</span></span> |
| <span data-ttu-id="72d55-236">1</span><span class="sxs-lookup"><span data-stu-id="72d55-236">1</span></span> |<span data-ttu-id="72d55-237">2014-09-10T12:03:00.0000000Z</span><span class="sxs-lookup"><span data-stu-id="72d55-237">2014-09-10T12:03:00.0000000Z</span></span> |<span data-ttu-id="72d55-238">1001 YXZ</span><span class="sxs-lookup"><span data-stu-id="72d55-238">YXZ 1001</span></span> |
| <span data-ttu-id="72d55-239">3</span><span class="sxs-lookup"><span data-stu-id="72d55-239">3</span></span> |<span data-ttu-id="72d55-240">2014-09-10T12:04:00.0000000Z</span><span class="sxs-lookup"><span data-stu-id="72d55-240">2014-09-10T12:04:00.0000000Z</span></span> |<span data-ttu-id="72d55-241">ABC 1004</span><span class="sxs-lookup"><span data-stu-id="72d55-241">ABC 1004</span></span> |
| <span data-ttu-id="72d55-242">2</span><span class="sxs-lookup"><span data-stu-id="72d55-242">2</span></span> |<span data-ttu-id="72d55-243">2014-09-10T12:07:00.0000000Z</span><span class="sxs-lookup"><span data-stu-id="72d55-243">2014-09-10T12:07:00.0000000Z</span></span> |<span data-ttu-id="72d55-244">1003 XYZ</span><span class="sxs-lookup"><span data-stu-id="72d55-244">XYZ 1003</span></span> |
| <span data-ttu-id="72d55-245">1</span><span class="sxs-lookup"><span data-stu-id="72d55-245">1</span></span> |<span data-ttu-id="72d55-246">2014-09-10T12:08:00.0000000Z</span><span class="sxs-lookup"><span data-stu-id="72d55-246">2014-09-10T12:08:00.0000000Z</span></span> |<span data-ttu-id="72d55-247">1007 BNJ</span><span class="sxs-lookup"><span data-stu-id="72d55-247">BNJ 1007</span></span> |
| <span data-ttu-id="72d55-248">2</span><span class="sxs-lookup"><span data-stu-id="72d55-248">2</span></span> |<span data-ttu-id="72d55-249">2014-09-10T12:07:00.0000000Z</span><span class="sxs-lookup"><span data-stu-id="72d55-249">2014-09-10T12:07:00.0000000Z</span></span> |<span data-ttu-id="72d55-250">CDE 1007</span><span class="sxs-lookup"><span data-stu-id="72d55-250">CDE 1007</span></span> |

<span data-ttu-id="72d55-251">Aqui está uma breve descrição das colunas de saudação:</span><span class="sxs-lookup"><span data-stu-id="72d55-251">Here is a short description of hello columns:</span></span>

| <span data-ttu-id="72d55-252">Coluna</span><span class="sxs-lookup"><span data-stu-id="72d55-252">Column</span></span> | <span data-ttu-id="72d55-253">Descrição</span><span class="sxs-lookup"><span data-stu-id="72d55-253">Description</span></span> |
| --- | --- |
| <span data-ttu-id="72d55-254">TollID</span><span class="sxs-lookup"><span data-stu-id="72d55-254">TollID</span></span> |<span data-ttu-id="72d55-255">ID de cabine do pedágio Olá que identifica exclusivamente um pedágio</span><span class="sxs-lookup"><span data-stu-id="72d55-255">hello toll booth ID that uniquely identifies a toll booth</span></span> |
| <span data-ttu-id="72d55-256">ExitTime</span><span class="sxs-lookup"><span data-stu-id="72d55-256">ExitTime</span></span> |<span data-ttu-id="72d55-257">Data de saudação e a hora de saída do veículo de saudação do pedágio em UTC</span><span class="sxs-lookup"><span data-stu-id="72d55-257">hello date and time of exit of hello vehicle from toll booth in UTC</span></span> |
| <span data-ttu-id="72d55-258">PlacaDeCarro</span><span class="sxs-lookup"><span data-stu-id="72d55-258">LicensePlate</span></span> |<span data-ttu-id="72d55-259">número de placa de saudação do veículo Olá</span><span class="sxs-lookup"><span data-stu-id="72d55-259">hello license plate number of hello vehicle</span></span> |

### <a name="commercial-vehicle-registration-data"></a><span data-ttu-id="72d55-260">Dados de registro de veículo comercial</span><span class="sxs-lookup"><span data-stu-id="72d55-260">Commercial vehicle registration data</span></span>
<span data-ttu-id="72d55-261">tutorial de saudação usa um instantâneo estático de um banco de dados de registro de veículo comercial.</span><span class="sxs-lookup"><span data-stu-id="72d55-261">hello tutorial uses a static snapshot of a commercial vehicle registration database.</span></span>

| <span data-ttu-id="72d55-262">PlacaDeCarro</span><span class="sxs-lookup"><span data-stu-id="72d55-262">LicensePlate</span></span> | <span data-ttu-id="72d55-263">RegistrationId</span><span class="sxs-lookup"><span data-stu-id="72d55-263">RegistrationId</span></span> | <span data-ttu-id="72d55-264">Expirado</span><span class="sxs-lookup"><span data-stu-id="72d55-264">Expired</span></span> |
| --- | --- | --- |
| <span data-ttu-id="72d55-265">SVT 6023</span><span class="sxs-lookup"><span data-stu-id="72d55-265">SVT 6023</span></span> |<span data-ttu-id="72d55-266">285429838</span><span class="sxs-lookup"><span data-stu-id="72d55-266">285429838</span></span> |<span data-ttu-id="72d55-267">1</span><span class="sxs-lookup"><span data-stu-id="72d55-267">1</span></span> |
| <span data-ttu-id="72d55-268">XLZ 3463</span><span class="sxs-lookup"><span data-stu-id="72d55-268">XLZ 3463</span></span> |<span data-ttu-id="72d55-269">362715656</span><span class="sxs-lookup"><span data-stu-id="72d55-269">362715656</span></span> |<span data-ttu-id="72d55-270">0</span><span class="sxs-lookup"><span data-stu-id="72d55-270">0</span></span> |
| <span data-ttu-id="72d55-271">BAC 1005</span><span class="sxs-lookup"><span data-stu-id="72d55-271">BAC 1005</span></span> |<span data-ttu-id="72d55-272">876133137</span><span class="sxs-lookup"><span data-stu-id="72d55-272">876133137</span></span> |<span data-ttu-id="72d55-273">1</span><span class="sxs-lookup"><span data-stu-id="72d55-273">1</span></span> |
| <span data-ttu-id="72d55-274">RIV 8632</span><span class="sxs-lookup"><span data-stu-id="72d55-274">RIV 8632</span></span> |<span data-ttu-id="72d55-275">992711956</span><span class="sxs-lookup"><span data-stu-id="72d55-275">992711956</span></span> |<span data-ttu-id="72d55-276">0</span><span class="sxs-lookup"><span data-stu-id="72d55-276">0</span></span> |
| <span data-ttu-id="72d55-277">SNY 7188</span><span class="sxs-lookup"><span data-stu-id="72d55-277">SNY 7188</span></span> |<span data-ttu-id="72d55-278">592133890</span><span class="sxs-lookup"><span data-stu-id="72d55-278">592133890</span></span> |<span data-ttu-id="72d55-279">0</span><span class="sxs-lookup"><span data-stu-id="72d55-279">0</span></span> |
| <span data-ttu-id="72d55-280">ELH 9896</span><span class="sxs-lookup"><span data-stu-id="72d55-280">ELH 9896</span></span> |<span data-ttu-id="72d55-281">678427724</span><span class="sxs-lookup"><span data-stu-id="72d55-281">678427724</span></span> |<span data-ttu-id="72d55-282">1</span><span class="sxs-lookup"><span data-stu-id="72d55-282">1</span></span> |

<span data-ttu-id="72d55-283">Aqui está uma breve descrição das colunas de saudação:</span><span class="sxs-lookup"><span data-stu-id="72d55-283">Here is a short description of hello columns:</span></span>

| <span data-ttu-id="72d55-284">Coluna</span><span class="sxs-lookup"><span data-stu-id="72d55-284">Column</span></span> | <span data-ttu-id="72d55-285">Descrição</span><span class="sxs-lookup"><span data-stu-id="72d55-285">Description</span></span> |
| --- | --- |
| <span data-ttu-id="72d55-286">PlacaDeCarro</span><span class="sxs-lookup"><span data-stu-id="72d55-286">LicensePlate</span></span> |<span data-ttu-id="72d55-287">número de placa de saudação do veículo Olá</span><span class="sxs-lookup"><span data-stu-id="72d55-287">hello license plate number of hello vehicle</span></span> |
| <span data-ttu-id="72d55-288">RegistrationId</span><span class="sxs-lookup"><span data-stu-id="72d55-288">RegistrationId</span></span> |<span data-ttu-id="72d55-289">ID de registro do veículo Olá</span><span class="sxs-lookup"><span data-stu-id="72d55-289">hello vehicle's registration ID</span></span> |
| <span data-ttu-id="72d55-290">Expirado</span><span class="sxs-lookup"><span data-stu-id="72d55-290">Expired</span></span> |<span data-ttu-id="72d55-291">Olá status de registro de veículo Olá: 0 se o registro de veículo estiver ativo, 1 se o registro está vencido</span><span class="sxs-lookup"><span data-stu-id="72d55-291">hello registration status of hello vehicle: 0 if vehicle registration is active, 1 if registration is expired</span></span> |

## <a name="set-up-hello-environment-for-azure-stream-analytics"></a><span data-ttu-id="72d55-292">Configurar o ambiente de saudação para análise de fluxo do Azure</span><span class="sxs-lookup"><span data-stu-id="72d55-292">Set up hello environment for Azure Stream Analytics</span></span>
<span data-ttu-id="72d55-293">toocomplete neste tutorial, você precisa de uma assinatura Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="72d55-293">toocomplete this tutorial, you need a Microsoft Azure subscription.</span></span> <span data-ttu-id="72d55-294">A Microsoft oferece uma avaliação gratuita dos serviços do Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="72d55-294">Microsoft offers free trial for Microsoft Azure services.</span></span>

<span data-ttu-id="72d55-295">Se não tiver uma conta do Azure, [solicite uma versão de avaliação gratuita](http://azure.microsoft.com/pricing/free-trial/).</span><span class="sxs-lookup"><span data-stu-id="72d55-295">If you do not have an Azure account, you can [request a free trial version](http://azure.microsoft.com/pricing/free-trial/).</span></span>

> [!NOTE]
> <span data-ttu-id="72d55-296">toosign para uma avaliação gratuita, você precisa de um dispositivo móvel que pode receber mensagens de texto e um cartão de crédito válido.</span><span class="sxs-lookup"><span data-stu-id="72d55-296">toosign up for a free trial, you need a mobile device that can receive text messages and a valid credit card.</span></span>
> 
> 

<span data-ttu-id="72d55-297">Certifique-se de que toofollow Olá as etapas na seção de "Limpar sua conta do Azure" hello final Olá deste artigo para que você possa fazer melhor uso de saudação do seu crédito do Azure.</span><span class="sxs-lookup"><span data-stu-id="72d55-297">Be sure toofollow hello steps in hello “Clean up your Azure account” section at hello end of this article so that you can make hello best use of your Azure credit.</span></span>

## <a name="provision-azure-resources-required-for-hello-tutorial"></a><span data-ttu-id="72d55-298">Provisionar recursos do Azure necessários para o tutorial Olá</span><span class="sxs-lookup"><span data-stu-id="72d55-298">Provision Azure resources required for hello tutorial</span></span>
<span data-ttu-id="72d55-299">Este tutorial requer dois tooreceive de hubs de evento *entrada* e *sair* fluxos de dados.</span><span class="sxs-lookup"><span data-stu-id="72d55-299">This tutorial requires two event hubs tooreceive *entry* and *exit* data streams.</span></span> <span data-ttu-id="72d55-300">Banco de dados SQL do Azure gera resultados de saudação de trabalhos do Stream Analytics hello.</span><span class="sxs-lookup"><span data-stu-id="72d55-300">Azure SQL Database outputs hello results of hello Stream Analytics jobs.</span></span> <span data-ttu-id="72d55-301">O Armazenamento do Azure armazena dados de referência sobre o registro do veículo.</span><span class="sxs-lookup"><span data-stu-id="72d55-301">Azure Storage stores reference data about vehicle registrations.</span></span>

<span data-ttu-id="72d55-302">Você pode usar Olá Setup.ps1 script na pasta de TollApp Olá no GitHub toocreate todos os recursos necessários.</span><span class="sxs-lookup"><span data-stu-id="72d55-302">You can use hello Setup.ps1 script in hello TollApp folder on GitHub toocreate all required resources.</span></span> <span data-ttu-id="72d55-303">Interesse Olá de tempo, recomendamos que você executá-lo.</span><span class="sxs-lookup"><span data-stu-id="72d55-303">In hello interest of time, we recommend that you run it.</span></span> <span data-ttu-id="72d55-304">Se você quiser toolearn mais informações sobre como tooconfigure desses recursos no hello portal do Azure, consulte o apêndice de "Configurando recursos de tutorial no portal do Azure" toohello.</span><span class="sxs-lookup"><span data-stu-id="72d55-304">If you would like toolearn more about how tooconfigure these resources in hello Azure portal, refer toohello “Configuring tutorial resources in Azure portal” appendix.</span></span>

<span data-ttu-id="72d55-305">Baixar e salvar Olá suporte [TollApp](https://github.com/Azure/azure-stream-analytics/blob/master/Samples/TollApp/TollApp.zip) arquivos e pastas.</span><span class="sxs-lookup"><span data-stu-id="72d55-305">Download and save hello supporting [TollApp](https://github.com/Azure/azure-stream-analytics/blob/master/Samples/TollApp/TollApp.zip) folder and files.</span></span>

<span data-ttu-id="72d55-306">Abra uma janela do **Microsoft Azure PowerShell***como administrador*.</span><span class="sxs-lookup"><span data-stu-id="72d55-306">Open a **Microsoft Azure PowerShell** window *as an administrator*.</span></span> <span data-ttu-id="72d55-307">Se ainda não tiver o Azure PowerShell, siga as instruções de saudação em [instalar e configurar o Azure PowerShell](/powershell/azure/overview) tooinstall-lo.</span><span class="sxs-lookup"><span data-stu-id="72d55-307">If you do not yet have Azure PowerShell, follow hello instructions in [Install and configure Azure PowerShell](/powershell/azure/overview) tooinstall it.</span></span>

<span data-ttu-id="72d55-308">Como o Windows bloqueia automaticamente. ps1,. dll e arquivos de .exe, é necessário tooset política de execução de saudação antes de executar o script hello.</span><span class="sxs-lookup"><span data-stu-id="72d55-308">Because Windows automatically blocks .ps1, .dll, and .exe files, you need tooset hello execution policy before you run hello script.</span></span> <span data-ttu-id="72d55-309">Verifique se está executando a janela do PowerShell do Azure Olá *como um administrador*.</span><span class="sxs-lookup"><span data-stu-id="72d55-309">Make sure hello Azure PowerShell window is running *as an administrator*.</span></span> <span data-ttu-id="72d55-310">Execute **Set-ExecutionPolicy unrestricted**.</span><span class="sxs-lookup"><span data-stu-id="72d55-310">Run **Set-ExecutionPolicy unrestricted**.</span></span> <span data-ttu-id="72d55-311">Quando solicitado, digite **Y**.</span><span class="sxs-lookup"><span data-stu-id="72d55-311">When prompted, type **Y**.</span></span>

![Captura de tela de "Set-ExecutionPolicy unrestricted" em execução na janela do Azure PowerShell](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image2.png)

<span data-ttu-id="72d55-313">Executar **Get-ExecutionPolicy** toomake-se de que o comando Olá trabalhou.</span><span class="sxs-lookup"><span data-stu-id="72d55-313">Run **Get-ExecutionPolicy** toomake sure that hello command worked.</span></span>

![Captura de tela de "Get-ExecutionPolicy" em execução na janela do Azure PowerShell](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image3.png)

<span data-ttu-id="72d55-315">Acesse o diretório toohello com scripts de saudação e o aplicativo gerador.</span><span class="sxs-lookup"><span data-stu-id="72d55-315">Go toohello directory that has hello scripts and generator application.</span></span>

![Captura de tela de "cd .\TollApp\TollApp" em execução na janela do PowerShell do Azure Olá](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image4.png)

<span data-ttu-id="72d55-317">Tipo **.\\ Setup.ps1** tooset a sua conta do Azure, criar e configurar todos os recursos necessários e iniciar toogenerate eventos.</span><span class="sxs-lookup"><span data-stu-id="72d55-317">Type **.\\Setup.ps1** tooset up your Azure account, create and configure all required resources, and start toogenerate events.</span></span> <span data-ttu-id="72d55-318">script Hello aleatoriamente seleciona uma região toocreate seus recursos.</span><span class="sxs-lookup"><span data-stu-id="72d55-318">hello script randomly picks up a region toocreate your resources.</span></span> <span data-ttu-id="72d55-319">tooexplicitly especificar uma região, você pode passar Olá **-local** parâmetro como Olá exemplo a seguir:</span><span class="sxs-lookup"><span data-stu-id="72d55-319">tooexplicitly specify a region, you can pass hello **-location** parameter as in hello following example:</span></span>

<span data-ttu-id="72d55-320">**.\\Setup.ps1 -location “Central US”**</span><span class="sxs-lookup"><span data-stu-id="72d55-320">**.\\Setup.ps1 -location “Central US”**</span></span>

![Captura de tela da página Olá entrada do Azure](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image5.png)

<span data-ttu-id="72d55-322">script Hello abre Olá **entrar** página do Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="72d55-322">hello script opens hello **Sign In** page for Microsoft Azure.</span></span> <span data-ttu-id="72d55-323">Insira suas credenciais de conta.</span><span class="sxs-lookup"><span data-stu-id="72d55-323">Enter your account credentials.</span></span>

> [!NOTE]
> <span data-ttu-id="72d55-324">Se sua conta tiver acesso toomultiple assinaturas, você será o nome da assinatura que você deseja toouse tutorial Olá Olá tooenter frequentes.</span><span class="sxs-lookup"><span data-stu-id="72d55-324">If your account has access toomultiple subscriptions, you will be asked tooenter hello subscription name that you want toouse for hello tutorial.</span></span>
> 
> 

<span data-ttu-id="72d55-325">script Hello pode levar vários toorun de minutos.</span><span class="sxs-lookup"><span data-stu-id="72d55-325">hello script can take several minutes toorun.</span></span> <span data-ttu-id="72d55-326">Depois da conclusão, saída de hello deve ter a aparência Olá captura de tela a seguir.</span><span class="sxs-lookup"><span data-stu-id="72d55-326">After it finishes, hello output should look like hello following screenshot.</span></span>

![Captura de tela de saída do script hello na janela do PowerShell do Azure Olá](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image6.PNG)

<span data-ttu-id="72d55-328">Você também verá outra janela é semelhante toohello captura de tela a seguir.</span><span class="sxs-lookup"><span data-stu-id="72d55-328">You will also see another window that's similar toohello following screenshot.</span></span> <span data-ttu-id="72d55-329">Este aplicativo está enviando eventos tooAzure Hubs de eventos, que é necessário toorun tutorial de saudação.</span><span class="sxs-lookup"><span data-stu-id="72d55-329">This application is sending events tooAzure Event Hubs, which is required toorun hello tutorial.</span></span> <span data-ttu-id="72d55-330">Assim, não pare o aplicativo hello ou fechar esta janela até que você concluir o tutorial hello.</span><span class="sxs-lookup"><span data-stu-id="72d55-330">So, do not stop hello application or close this window until you finish hello tutorial.</span></span>

![Captura de tela de "Enviando dados de hub de evento"](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image7.png)

<span data-ttu-id="72d55-332">Você deve ser capaz de toosee seus recursos no portal do Azure agora.</span><span class="sxs-lookup"><span data-stu-id="72d55-332">You should be able toosee your resources in Azure portal now.</span></span> <span data-ttu-id="72d55-333">Vá muito<https://portal.azure.com>e entre com suas credenciais de conta.</span><span class="sxs-lookup"><span data-stu-id="72d55-333">Go too<https://portal.azure.com>, and sign in with your account credentials.</span></span> <span data-ttu-id="72d55-334">Observe que no momento algumas funcionalidades utiliza o portal clássico do hello.</span><span class="sxs-lookup"><span data-stu-id="72d55-334">Note that currently some functionality utilizes hello classic portal.</span></span> <span data-ttu-id="72d55-335">Essas etapas serão indicadas claramente.</span><span class="sxs-lookup"><span data-stu-id="72d55-335">These steps will be clearly indicated.</span></span>

### <a name="azure-event-hubs"></a><span data-ttu-id="72d55-336">Hubs de eventos do Azure</span><span class="sxs-lookup"><span data-stu-id="72d55-336">Azure Event Hubs</span></span>
<span data-ttu-id="72d55-337">No portal do Azure de Olá, clique em **mais serviços** na parte inferior de saudação do painel de gerenciamento esquerdo hello.</span><span class="sxs-lookup"><span data-stu-id="72d55-337">In hello Azure portal, click **More services** on hello bottom of hello left management pane.</span></span> <span data-ttu-id="72d55-338">Tipo **hubs de eventos** no hello campo fornecido e clique em **hubs de eventos**.</span><span class="sxs-lookup"><span data-stu-id="72d55-338">Type **Event hubs** in hello field provided and click **Event hubs**.</span></span> <span data-ttu-id="72d55-339">Isso inicia uma nova saudação de toodisplay de janela de navegador **SERVICE BUS** área Olá **portal clássico**.</span><span class="sxs-lookup"><span data-stu-id="72d55-339">This launches a new browser window toodisplay hello **SERVICE BUS** area in hello **classic portal**.</span></span> <span data-ttu-id="72d55-340">Aqui você pode ver Olá Hub de eventos criados pelo Olá Setup.ps1 script.</span><span class="sxs-lookup"><span data-stu-id="72d55-340">Here you can see hello Event Hub created by hello Setup.ps1 script.</span></span>

![Barramento de Serviço](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image8.png)

<span data-ttu-id="72d55-342">Clique em Olá que inicia com *tolldata*.</span><span class="sxs-lookup"><span data-stu-id="72d55-342">Click hello one that starts with *tolldata*.</span></span> <span data-ttu-id="72d55-343">Clique em Olá **HUBS de eventos** guia. Você verá dois Hubs de Eventos chamados *entry* e *exit* criados nesse namespace.</span><span class="sxs-lookup"><span data-stu-id="72d55-343">Click hello **EVENT HUBS** tab. You will see two event hubs named *entry* and *exit* created in this namespace.</span></span>

![Guia de Hubs de evento no portal clássico Olá](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image9.png)

### <a name="azure-storage-container"></a><span data-ttu-id="72d55-345">Contêiner de armazenamento do Azure</span><span class="sxs-lookup"><span data-stu-id="72d55-345">Azure Storage container</span></span>
1. <span data-ttu-id="72d55-346">Volte a guia toohello no portal de tooAzure abra seu navegador.</span><span class="sxs-lookup"><span data-stu-id="72d55-346">Go back toohello tab in your browser open tooAzure portal.</span></span> <span data-ttu-id="72d55-347">Clique em **armazenamento** em Olá lado esquerdo da saudação toosee portal do Azure hello Azure contêiner de armazenamento que é usado no tutorial de saudação.</span><span class="sxs-lookup"><span data-stu-id="72d55-347">Click **STORAGE** on hello left side of hello Azure portal toosee hello Azure Storage container that's used in hello tutorial.</span></span>
   
    ![Item de menu de armazenamento](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image11.png)
2. <span data-ttu-id="72d55-349">Clique em Olá que começam com *tolldata*.</span><span class="sxs-lookup"><span data-stu-id="72d55-349">Click hello one that start with *tolldata*.</span></span> <span data-ttu-id="72d55-350">Clique em Olá **CONTÊINERES** contêiner do guia toosee Olá criado.</span><span class="sxs-lookup"><span data-stu-id="72d55-350">Click hello **CONTAINERS** tab toosee hello created container.</span></span>
   
    ![Guia de contêineres no hello portal do Azure](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image10.png)
3. <span data-ttu-id="72d55-352">Clique em Olá **tolldata** saudação do contêiner toosee carregado o arquivo JSON que contém dados de registro de veículo.</span><span class="sxs-lookup"><span data-stu-id="72d55-352">Click hello **tolldata** container toosee hello uploaded JSON file that has vehicle registration data.</span></span>
   
    ![Captura de tela de arquivo de registration.json Olá no contêiner de saudação](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image12.png)

### <a name="azure-sql-database"></a><span data-ttu-id="72d55-354">Banco de Dados SQL do Azure</span><span class="sxs-lookup"><span data-stu-id="72d55-354">Azure SQL Database</span></span>
1. <span data-ttu-id="72d55-355">Volte toohello portal do Azure na guia de primeira Olá que foi aberto no navegador de saudação.</span><span class="sxs-lookup"><span data-stu-id="72d55-355">Go back toohello Azure portal on hello first tab that was opened in hello browser.</span></span> <span data-ttu-id="72d55-356">Clique em **bancos de dados SQL** em Olá lado esquerdo da saudação toosee portal do Azure Olá banco de dados SQL que será usado no tutorial hello e clique em **tolldatadb**.</span><span class="sxs-lookup"><span data-stu-id="72d55-356">Click **SQL DATABASES** on hello left side of hello Azure portal toosee hello SQL database that will be used in hello tutorial and click **tolldatadb**.</span></span>
   
    ![Captura de tela da saudação criado o banco de dados SQL](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image15.png)
2. <span data-ttu-id="72d55-358">Nome do servidor de saudação cópia sem número de porta de saudação (*servername*. t, por exemplo).</span><span class="sxs-lookup"><span data-stu-id="72d55-358">Copy hello server name without hello port number (*servername*.database.windows.net, for example).</span></span>
    <span data-ttu-id="72d55-359">![Captura de tela da saudação criado o banco de dados de banco de dados SQL](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image15a.png)</span><span class="sxs-lookup"><span data-stu-id="72d55-359">![Screenshot of hello created SQL database db](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image15a.png)</span></span>

## <a name="connect-toohello-database-from-visual-studio"></a><span data-ttu-id="72d55-360">Conecte-se o banco de dados toohello do Visual Studio</span><span class="sxs-lookup"><span data-stu-id="72d55-360">Connect toohello database from Visual Studio</span></span>
<span data-ttu-id="72d55-361">Use o Visual Studio tooaccess resultados da consulta no banco de dados de saída de hello.</span><span class="sxs-lookup"><span data-stu-id="72d55-361">Use Visual Studio tooaccess query results in hello output database.</span></span>

<span data-ttu-id="72d55-362">Conecte-se toohello banco de dados do SQL (destino Olá) do Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="72d55-362">Connect toohello SQL database (hello destination) from Visual Studio:</span></span>

1. <span data-ttu-id="72d55-363">Abra o Visual Studio e, em seguida, clique em **ferramentas** > **conectar tooDatabase**.</span><span class="sxs-lookup"><span data-stu-id="72d55-363">Open Visual Studio, and then click **Tools** > **Connect tooDatabase**.</span></span>
2. <span data-ttu-id="72d55-364">Se for solicitado, clique em **Microsoft SQL Server** como uma fonte de dados.</span><span class="sxs-lookup"><span data-stu-id="72d55-364">If asked, click **Microsoft SQL Server** as a data source.</span></span>
   
    ![Caixa de diálogo Alterar Fonte de Dados](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image16.png)
3. <span data-ttu-id="72d55-366">Em Olá **nome do servidor** campo, cole o nome hello que você copiou na seção anterior de saudação do hello portal do Azure (ou seja, *servername*. t).</span><span class="sxs-lookup"><span data-stu-id="72d55-366">In hello **Server name** field, paste hello name that you copied in hello previous section from hello Azure portal (that is, *servername*.database.windows.net).</span></span>
4. <span data-ttu-id="72d55-367">Clique em **Usar Autenticação do SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="72d55-367">Click **Use SQL Server Authentication**.</span></span>
5. <span data-ttu-id="72d55-368">Digite **tolladmin** em Olá **nome de usuário** campo e **123toll!**</span><span class="sxs-lookup"><span data-stu-id="72d55-368">Enter **tolladmin** in hello **User name** field and **123toll!**</span></span> <span data-ttu-id="72d55-369">em Olá **senha** campo.</span><span class="sxs-lookup"><span data-stu-id="72d55-369">in hello **Password** field.</span></span>
6. <span data-ttu-id="72d55-370">Clique em **selecionar ou digitar um nome de banco de dados**e selecione **TollDataDB** como banco de dados de saudação.</span><span class="sxs-lookup"><span data-stu-id="72d55-370">Click **Select or enter a database name**, and select **TollDataDB** as hello database.</span></span>
   
    ![Caixa de diálogo Adicionar Conexão](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image17.jpg)
7. <span data-ttu-id="72d55-372">Clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="72d55-372">Click **OK**.</span></span>
8. <span data-ttu-id="72d55-373">Abra o Gerenciador de Servidores.</span><span class="sxs-lookup"><span data-stu-id="72d55-373">Open Server Explorer.</span></span>
   
    ![Gerenciador de Servidores](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image18.png)
9. <span data-ttu-id="72d55-375">Consulte as quatro tabelas no banco de dados de TollDataDB hello.</span><span class="sxs-lookup"><span data-stu-id="72d55-375">See four tables in hello TollDataDB database.</span></span>
   
    ![Tabelas no banco de dados de TollDataDB Olá](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image19.jpg)

## <a name="event-generator-tollapp-sample-project"></a><span data-ttu-id="72d55-377">Gerador de eventos: projeto de exemplo TollApp</span><span class="sxs-lookup"><span data-stu-id="72d55-377">Event generator: TollApp sample project</span></span>
<span data-ttu-id="72d55-378">saudação de script do PowerShell é iniciado automaticamente toosend eventos usando o programa de aplicativo de exemplo hello TollApp.</span><span class="sxs-lookup"><span data-stu-id="72d55-378">hello PowerShell script automatically starts toosend events by using hello TollApp sample application program.</span></span> <span data-ttu-id="72d55-379">Você não precisa tooperform as etapas adicionais.</span><span class="sxs-lookup"><span data-stu-id="72d55-379">You don’t need tooperform any additional steps.</span></span>

<span data-ttu-id="72d55-380">No entanto, se você estiver interessado nos detalhes de implementação, você pode encontrar código-fonte do hello TollApp aplicativo hello no GitHub [exemplos/TollApp](https://aka.ms/azure-stream-analytics-toll-source).</span><span class="sxs-lookup"><span data-stu-id="72d55-380">However, if you are interested in implementation details, you can find hello source code of hello TollApp application in GitHub [samples/TollApp](https://aka.ms/azure-stream-analytics-toll-source).</span></span>

![Captura de tela do código de exemplo exibido no Visual Studio](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image20.png)

## <a name="create-a-stream-analytics-job"></a><span data-ttu-id="72d55-382">Criar um trabalho de Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="72d55-382">Create a Stream Analytics job</span></span>
1. <span data-ttu-id="72d55-383">Olá portal do Azure, o clique Olá sinal de adição verde no canto superior esquerdo Olá Olá página toocreate um novo trabalho de análise de fluxo.</span><span class="sxs-lookup"><span data-stu-id="72d55-383">In hello Azure portal, click hello green plus sign in hello top-left corner of hello page toocreate a new Stream Analytics job.</span></span> <span data-ttu-id="72d55-384">Selecione **Inteligência + Análise** e clique em **Trabalho do Stream Analytics**.</span><span class="sxs-lookup"><span data-stu-id="72d55-384">Select **Intelligence + Analytics** and then click **Stream Analytics job**.</span></span>
   
    ![Novo botão](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image21.png)
2. <span data-ttu-id="72d55-386">Forneça um nome de trabalho, validar assinatura hello está correto e, em seguida, criar um novo grupo de recursos no hello mesma região Olá armazenamento de hub de evento (o padrão é Centro Sul dos EUA para script hello).</span><span class="sxs-lookup"><span data-stu-id="72d55-386">Provide a job name, validate hello subscription is correct and then create a new Resource group in hello same region as hello Event hub storage (default is South Central US for hello script).</span></span>
3. <span data-ttu-id="72d55-387">Clique em **Pin toodashboard** e **criar** final Olá Olá página.</span><span class="sxs-lookup"><span data-stu-id="72d55-387">Click **Pin toodashboard** and then **CREATE** at hello bottom of hello page.</span></span>
   
    ![Opção Criar um Trabalho do Stream Analytics](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image22.png)

## <a name="define-input-sources"></a><span data-ttu-id="72d55-389">Definir fontes de entrada</span><span class="sxs-lookup"><span data-stu-id="72d55-389">Define input sources</span></span>
1. <span data-ttu-id="72d55-390">Olá trabalho criar e abrir a página de saudação do trabalho.</span><span class="sxs-lookup"><span data-stu-id="72d55-390">hello job will create and open hello job page.</span></span> <span data-ttu-id="72d55-391">Ou você pode clicar em Olá ao criar trabalho de análise no painel do portal hello.</span><span class="sxs-lookup"><span data-stu-id="72d55-391">Or you can click hello created analytics job on hello portal dashboard.</span></span>

2. <span data-ttu-id="72d55-392">Clique em Olá **ENTRADAS** guia toodefine Olá fonte de dados.</span><span class="sxs-lookup"><span data-stu-id="72d55-392">Click hello **INPUTS** tab toodefine hello source data.</span></span>
   
    ![Guia de entradas de saudação](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image24.png)
3. <span data-ttu-id="72d55-394">Clique em **ADICIONAR UMA ENTRADA**.</span><span class="sxs-lookup"><span data-stu-id="72d55-394">Click **ADD AN INPUT**.</span></span>
   
    ![Olá, adicionar uma opção de entrada](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image25.png)
4. <span data-ttu-id="72d55-396">Digite **EntryStream** como **ALIAS DE ENTRADA**.</span><span class="sxs-lookup"><span data-stu-id="72d55-396">Enter **EntryStream** as **INPUT ALIAS**.</span></span>
5. <span data-ttu-id="72d55-397">O Tipo de Origem é **Transmissão de Dados**</span><span class="sxs-lookup"><span data-stu-id="72d55-397">Source Type is **Data Stream**</span></span>
6. <span data-ttu-id="72d55-398">A Fonte é **Hub de eventos**.</span><span class="sxs-lookup"><span data-stu-id="72d55-398">Source is **Event hub**.</span></span>
7. <span data-ttu-id="72d55-399">**Namespace de barramento de serviço** devem ser Olá TollData uma saudação lista suspensa.</span><span class="sxs-lookup"><span data-stu-id="72d55-399">**Service bus namespace** should be hello TollData one in hello drop down.</span></span>
8. <span data-ttu-id="72d55-400">**Nome do hub de evento** deve ser definido muito**entrada**.</span><span class="sxs-lookup"><span data-stu-id="72d55-400">**Event hub name** should be set too**entry**.</span></span>
9. <span data-ttu-id="72d55-401">**Nome de política do hub de evento*é **RootManageSharedAccessKey** (Olá valor padrão).</span><span class="sxs-lookup"><span data-stu-id="72d55-401">**Event hub policy name*is **RootManageSharedAccessKey**  (hello default value).</span></span>
10. <span data-ttu-id="72d55-402">Selecione **JSON** como **FORMATO DE SERIALIZAÇÃO DO EVENTO** e **UTF8** como **CODIFICAÇÃO**.</span><span class="sxs-lookup"><span data-stu-id="72d55-402">Select **JSON** for **EVENT SERIALIZATION FORMAT** and **UTF8** for **ENCODING**.</span></span>
   
    <span data-ttu-id="72d55-403">As configurações ficarão semelhantes:</span><span class="sxs-lookup"><span data-stu-id="72d55-403">Your settings will look like:</span></span>
   
    ![Configurações do hub de evento](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image28.png)

10. <span data-ttu-id="72d55-405">Clique em **criar** na parte inferior de saudação do Assistente de Olá Olá página toofinish.</span><span class="sxs-lookup"><span data-stu-id="72d55-405">Click **Create** at hello bottom of hello page toofinish hello wizard.</span></span>
    
    <span data-ttu-id="72d55-406">Agora que você criou o fluxo de entrada hello, você seguirá Olá mesmo fluxo de saída etapas toocreate hello.</span><span class="sxs-lookup"><span data-stu-id="72d55-406">Now that you've created hello entry stream, you will follow hello same steps toocreate hello exit stream.</span></span> <span data-ttu-id="72d55-407">Ser valores de tooenter-se em Olá captura de tela a seguir.</span><span class="sxs-lookup"><span data-stu-id="72d55-407">Be sure tooenter values as on hello following screenshot.</span></span>
    
    ![Configurações de fluxo de saída de saudação de](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image31.png)
    
    <span data-ttu-id="72d55-409">Você definiu dois fluxos de entrada:</span><span class="sxs-lookup"><span data-stu-id="72d55-409">You have defined two input streams:</span></span>
    
    ![Fluxos de entrada definidos no hello portal do Azure](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image32.png)
    
    <span data-ttu-id="72d55-411">Em seguida, você irá adicionar a entrada de dados de referência para o arquivo de blob de saudação que contém dados de registro de carro.</span><span class="sxs-lookup"><span data-stu-id="72d55-411">Next, you will add reference data input for hello blob file that contains car registration data.</span></span>
11. <span data-ttu-id="72d55-412">Clique em **adicionar**e, em seguida, siga Olá mesmo processo para entradas de fluxo hello, mas selecionar **dados de referência** em vez de **fluxo de dados** e hello **Alias de entrada**  é **registro**.</span><span class="sxs-lookup"><span data-stu-id="72d55-412">Click **ADD**, and then follow hello same process for hello stream inputs but select **REFERENCE DATA** instead of **Data Stream** and hello **Input Alias** is **Registration**.</span></span>

12. <span data-ttu-id="72d55-413">conta de armazenamento que começa com **tolldata**.</span><span class="sxs-lookup"><span data-stu-id="72d55-413">storage account that starts with **tolldata**.</span></span> <span data-ttu-id="72d55-414">nome do contêiner Olá deve ser **tolldata**e hello **padrão de caminho** devem ser **registration.json**.</span><span class="sxs-lookup"><span data-stu-id="72d55-414">hello container name should be **tolldata**, and hello **PATH PATTERN** should be **registration.json**.</span></span> <span data-ttu-id="72d55-415">Este nome de arquivo diferencia maiúsculas de minúsculas e deve estar em **minúsculas**.</span><span class="sxs-lookup"><span data-stu-id="72d55-415">This file name is case sensitive and should be **lowercase**.</span></span>
    
    ![Configurações de armazenamento de blob](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image34.png)
13. <span data-ttu-id="72d55-417">Clique em **criar** toofinish Assistente de saudação.</span><span class="sxs-lookup"><span data-stu-id="72d55-417">Click **Create** toofinish hello wizard.</span></span>

<span data-ttu-id="72d55-418">Agora, todas as entradas são definidas.</span><span class="sxs-lookup"><span data-stu-id="72d55-418">Now all inputs are defined.</span></span>

## <a name="define-output"></a><span data-ttu-id="72d55-419">Definir saída</span><span class="sxs-lookup"><span data-stu-id="72d55-419">Define output</span></span>
1. <span data-ttu-id="72d55-420">No painel de visão geral do trabalho do Stream Analytics hello, selecione **SAÍDAS**.</span><span class="sxs-lookup"><span data-stu-id="72d55-420">On hello Stream Analytics job overview pane, select **OUTPUTS**.</span></span>
   
    ![Olá, guia saída e a opção "Adicionar uma saída de"](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image37.png)
2. <span data-ttu-id="72d55-422">Clique em **Adicionar**.</span><span class="sxs-lookup"><span data-stu-id="72d55-422">Click **Add**.</span></span>
3. <span data-ttu-id="72d55-423">Saudação de conjunto **alias de saída** too'output' e, em seguida, **coletor** muito**banco de dados SQL**.</span><span class="sxs-lookup"><span data-stu-id="72d55-423">Set hello **Output alias** too'output' and then **Sink** too**SQL database**.</span></span>
3. <span data-ttu-id="72d55-424">Selecione o nome do servidor de saudação que foi usado no Olá a seção "Conectar tooDatabase do Visual Studio" do artigo hello.</span><span class="sxs-lookup"><span data-stu-id="72d55-424">Select hello server name that was used in hello “Connect tooDatabase from Visual Studio” section of hello article.</span></span> <span data-ttu-id="72d55-425">nome do banco de dados de saudação é **TollDataDB**.</span><span class="sxs-lookup"><span data-stu-id="72d55-425">hello database name is **TollDataDB**.</span></span>
4. <span data-ttu-id="72d55-426">Digite **tolladmin** em Olá **USERNAME** campo, **123toll!**</span><span class="sxs-lookup"><span data-stu-id="72d55-426">Enter **tolladmin** in hello **USERNAME** field, **123toll!**</span></span> <span data-ttu-id="72d55-427">em Olá **senha** campo, e **TollDataRefJoin** em Olá **tabela** campo.</span><span class="sxs-lookup"><span data-stu-id="72d55-427">in hello **PASSWORD** field, and **TollDataRefJoin** in hello **TABLE** field.</span></span>
   
    ![Configurações do Banco de Dados SQL](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image38.png)
5. <span data-ttu-id="72d55-429">Clique em **Criar**.</span><span class="sxs-lookup"><span data-stu-id="72d55-429">Click **Create**.</span></span>

## <a name="azure-stream-analytics-query"></a><span data-ttu-id="72d55-430">Consulta do Stream Analytics do Azure</span><span class="sxs-lookup"><span data-stu-id="72d55-430">Azure Stream analytics query</span></span>
<span data-ttu-id="72d55-431">Olá **consulta** guia contém uma consulta SQL transformações Olá os dados de entrada.</span><span class="sxs-lookup"><span data-stu-id="72d55-431">hello **QUERY** tab contains a SQL query that transforms hello incoming data.</span></span>

![Uma consulta adicionada toohello guia de consulta](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image39.png)

<span data-ttu-id="72d55-433">Este tutorial tentativas tooanswer várias questões comerciais que estão relacionadas a dados tootoll e construtores de análise de fluxo de consultas que podem ser usados no Azure Stream Analytics tooprovide uma resposta relevante.</span><span class="sxs-lookup"><span data-stu-id="72d55-433">This tutorial attempts tooanswer several business questions that are related tootoll data and constructs Stream Analytics queries that can be used in Azure Stream Analytics tooprovide a relevant answer.</span></span>

<span data-ttu-id="72d55-434">Antes de iniciar o trabalho do Stream Analytics primeiro, vamos explorar alguns cenários e sintaxe de consulta de saudação.</span><span class="sxs-lookup"><span data-stu-id="72d55-434">Before you start your first Stream Analytics job, let’s explore a few scenarios and hello query syntax.</span></span>

## <a name="introduction-tooazure-stream-analytics-query-language"></a><span data-ttu-id="72d55-435">Introdução tooAzure linguagem de consulta do Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="72d55-435">Introduction tooAzure Stream Analytics query language</span></span>
- - -
<span data-ttu-id="72d55-436">Digamos que você precisa que o número de saudação toocount dos veículos que insere um pedágio.</span><span class="sxs-lookup"><span data-stu-id="72d55-436">Let’s say that you need toocount hello number of vehicles that enter a toll booth.</span></span> <span data-ttu-id="72d55-437">Como esse é um fluxo contínuo de eventos, você tem toodefine um "período de tempo."</span><span class="sxs-lookup"><span data-stu-id="72d55-437">Because this is a continuous stream of events, you have toodefine a “period of time.”</span></span> <span data-ttu-id="72d55-438">Vamos modificar Olá pergunta toobe "quantos veículos inserir um pedágio a cada três minutos?".</span><span class="sxs-lookup"><span data-stu-id="72d55-438">Let's modify hello question toobe “How many vehicles enter a toll booth every three minutes?”.</span></span> <span data-ttu-id="72d55-439">Isso é normalmente chamados tooas Olá em cascata contagem.</span><span class="sxs-lookup"><span data-stu-id="72d55-439">This is commonly referred tooas hello tumbling count.</span></span>

<span data-ttu-id="72d55-440">Vamos analisar consulta do Stream Analytics do Azure Olá que responde a essa pergunta:</span><span class="sxs-lookup"><span data-stu-id="72d55-440">Let’s look at hello Azure Stream Analytics query that answers this question:</span></span>

    SELECT TollId, System.Timestamp AS WindowEnd, COUNT(*) AS Count
    FROM EntryStream TIMESTAMP BY EntryTime
    GROUP BY TUMBLINGWINDOW(minute, 3), TollId

<span data-ttu-id="72d55-441">Como você pode ver, o Azure Stream Analytics usa uma linguagem de consulta como SQL e adiciona algumas extensões toospecify tempo aspectos relacionados à consulta hello.</span><span class="sxs-lookup"><span data-stu-id="72d55-441">As you can see, Azure Stream Analytics uses a query language that's like SQL and adds a few extensions toospecify time-related aspects of hello query.</span></span>

<span data-ttu-id="72d55-442">Para obter mais detalhes, leia sobre [gerenciamento de tempo](https://msdn.microsoft.com/library/azure/mt582045.aspx) e [janelas](https://msdn.microsoft.com/library/azure/dn835019.aspx) construções usadas na consulta de saudação do MSDN.</span><span class="sxs-lookup"><span data-stu-id="72d55-442">For more details, read about [Time Management](https://msdn.microsoft.com/library/azure/mt582045.aspx) and [Windowing](https://msdn.microsoft.com/library/azure/dn835019.aspx) constructs used in hello query from MSDN.</span></span>

## <a name="testing-azure-stream-analytics-queries"></a><span data-ttu-id="72d55-443">Testando consultas do Stream Analytics do Azure</span><span class="sxs-lookup"><span data-stu-id="72d55-443">Testing Azure Stream Analytics queries</span></span>
<span data-ttu-id="72d55-444">Agora que você tenha escrito a primeira consulta do Stream Analytics do Azure, é hora tootest usando arquivos de dados de exemplo localizado na pasta TollApp no Olá que caminho a seguir:</span><span class="sxs-lookup"><span data-stu-id="72d55-444">Now that you have written your first Azure Stream Analytics query, it is time tootest it by using sample data files located in your TollApp folder in hello following path:</span></span>

<span data-ttu-id="72d55-445">**..\\TollApp\\TollApp\\Data**</span><span class="sxs-lookup"><span data-stu-id="72d55-445">**..\\TollApp\\TollApp\\Data**</span></span>

<span data-ttu-id="72d55-446">Esta pasta contém Olá seguintes arquivos:</span><span class="sxs-lookup"><span data-stu-id="72d55-446">This folder contains hello following files:</span></span>

* <span data-ttu-id="72d55-447">Entry.json</span><span class="sxs-lookup"><span data-stu-id="72d55-447">Entry.json</span></span>
* <span data-ttu-id="72d55-448">Exit.JSON</span><span class="sxs-lookup"><span data-stu-id="72d55-448">Exit.json</span></span>
* <span data-ttu-id="72d55-449">registration.json</span><span class="sxs-lookup"><span data-stu-id="72d55-449">Registration.json</span></span>

## <a name="question-1-number-of-vehicles-entering-a-toll-booth"></a><span data-ttu-id="72d55-450">Pergunta 1: número de veículos que entram em uma cabine de pedágio</span><span class="sxs-lookup"><span data-stu-id="72d55-450">Question 1: Number of vehicles entering a toll booth</span></span>
1. <span data-ttu-id="72d55-451">Abra hello portal do Azure e o trabalho do Stream Analytics do Azure vá tooyour criado.</span><span class="sxs-lookup"><span data-stu-id="72d55-451">Open hello Azure portal and go tooyour created Azure Stream Analytics job.</span></span> <span data-ttu-id="72d55-452">Clique em Olá **consulta** guia e cole a consulta da seção anterior hello.</span><span class="sxs-lookup"><span data-stu-id="72d55-452">Click hello **QUERY** tab and paste query from hello previous section.</span></span>

2. <span data-ttu-id="72d55-453">toovalidate esta consulta em relação aos dados de exemplo, carregar dados Olá Olá EntryStream entrada clicando … Olá símbolo e selecionando **carregar dados de exemplo do arquivo**.</span><span class="sxs-lookup"><span data-stu-id="72d55-453">toovalidate this query against sample data, upload hello data into hello EntryStream input by clicking hello ... symbol and selecting **Upload sample data from file**.</span></span>

    ![Captura de tela de arquivo de Entry.json Olá](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image41.png)
3. <span data-ttu-id="72d55-455">No painel de saudação que aparece arquivo hello select (Entry.json) no seu computador local e clique em **Okey**.</span><span class="sxs-lookup"><span data-stu-id="72d55-455">In hello pane that appears select hello file (Entry.json) on your local machine and click **OK**.</span></span> <span data-ttu-id="72d55-456">Olá **teste** ícone agora iluminam e ser clicável.</span><span class="sxs-lookup"><span data-stu-id="72d55-456">hello **Test** icon will now illuminate and be clickable.</span></span>
   
    ![Captura de tela de arquivo de Entry.json Olá](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image42.png)
3. <span data-ttu-id="72d55-458">Valide que saída Olá consulta Olá é conforme o esperado:</span><span class="sxs-lookup"><span data-stu-id="72d55-458">Validate that hello output of hello query is as expected:</span></span>
   
    ![Resultados de teste de saudação](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image43.png)

## <a name="question-2-report-total-time-for-each-car-toopass-through-hello-toll-booth"></a><span data-ttu-id="72d55-460">Pergunta 2: Tempo total para cada toopass carro por meio de pedágio Olá de relatório</span><span class="sxs-lookup"><span data-stu-id="72d55-460">Question 2: Report total time for each car toopass through hello toll booth</span></span>
<span data-ttu-id="72d55-461">tempo médio de saudação necessária para toopass um carro por meio de pedágio Olá ajuda a eficiência de saudação tooassess do processo de saudação e experiência de saudação do cliente.</span><span class="sxs-lookup"><span data-stu-id="72d55-461">hello average time that's required for a car toopass through hello toll helps tooassess hello efficiency of hello process and hello customer experience.</span></span>

<span data-ttu-id="72d55-462">tempo total do toofind Olá, é necessário toojoin Olá EntryTime fluxo com o fluxo de ExitTime hello.</span><span class="sxs-lookup"><span data-stu-id="72d55-462">toofind hello total time, you need toojoin hello EntryTime stream with hello ExitTime stream.</span></span> <span data-ttu-id="72d55-463">Você adicionará fluxos Olá nas colunas TollId e LicencePlate.</span><span class="sxs-lookup"><span data-stu-id="72d55-463">You will join hello streams on TollId and LicencePlate columns.</span></span> <span data-ttu-id="72d55-464">Olá **INGRESSAR** operador requer toospecify reserva temporal que descreve a diferença entre hello Unido eventos de tempo aceitável de saudação.</span><span class="sxs-lookup"><span data-stu-id="72d55-464">hello **JOIN** operator requires you toospecify temporal leeway that describes hello acceptable time difference between hello joined events.</span></span> <span data-ttu-id="72d55-465">Você usará **DATEDIFF** função toospecify que eventos devem ser não mais de 15 minutos entre si.</span><span class="sxs-lookup"><span data-stu-id="72d55-465">You will use **DATEDIFF** function toospecify that events should be no more than 15 minutes from each other.</span></span> <span data-ttu-id="72d55-466">Você também aplicará Olá **DATEDIFF** estação de chamada de função tooexit e entrada vezes toocompute Olá tempo real que um carro gasta em hello.</span><span class="sxs-lookup"><span data-stu-id="72d55-466">You will also apply hello **DATEDIFF** function tooexit and entry times toocompute hello actual time that a car spends in hello toll station.</span></span> <span data-ttu-id="72d55-467">Observe a diferença de saudação do uso de saudação do **DATEDIFF** quando ele é usado em uma **selecione** instrução em vez de **INGRESSAR** condição.</span><span class="sxs-lookup"><span data-stu-id="72d55-467">Note hello difference of hello use of **DATEDIFF** when it's used in a **SELECT** statement rather than a **JOIN** condition.</span></span>

    SELECT EntryStream.TollId, EntryStream.EntryTime, ExitStream.ExitTime, EntryStream.LicensePlate, DATEDIFF (minute , EntryStream.EntryTime, ExitStream.ExitTime) AS DurationInMinutes
    FROM EntryStream TIMESTAMP BY EntryTime
    JOIN ExitStream TIMESTAMP BY ExitTime
    ON (EntryStream.TollId= ExitStream.TollId AND EntryStream.LicensePlate = ExitStream.LicensePlate)
    AND DATEDIFF (minute, EntryStream, ExitStream ) BETWEEN 0 AND 15

1. <span data-ttu-id="72d55-468">tootest nesta consulta, atualização Olá consulta em Olá **consulta** para trabalho hello.</span><span class="sxs-lookup"><span data-stu-id="72d55-468">tootest this query, update hello query on hello **QUERY** for hello job.</span></span> <span data-ttu-id="72d55-469">Adicionar arquivo de teste Olá para **ExitStream** como **EntryStream** foi especificado acima.</span><span class="sxs-lookup"><span data-stu-id="72d55-469">Add hello test file for **ExitStream** just like **EntryStream** was entered above.</span></span>
   
2. <span data-ttu-id="72d55-470">Clique em **Testar**.</span><span class="sxs-lookup"><span data-stu-id="72d55-470">Click **Test**.</span></span>

3. <span data-ttu-id="72d55-471">Selecione Olá caixa de seleção tootest Olá consulta e exibição Olá saída:</span><span class="sxs-lookup"><span data-stu-id="72d55-471">Select hello check box tootest hello query and view hello output:</span></span>
   
    ![Saída do teste Olá](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image45.png)

## <a name="question-3-report-all-commercial-vehicles-with-expired-registration"></a><span data-ttu-id="72d55-473">Pergunta 3: relatar todos os veículos comerciais com o registro vencido</span><span class="sxs-lookup"><span data-stu-id="72d55-473">Question 3: Report all commercial vehicles with expired registration</span></span>
<span data-ttu-id="72d55-474">O Azure Stream Analytics pode usar instantâneos estáticos dos dados toojoin com fluxos de dados temporais.</span><span class="sxs-lookup"><span data-stu-id="72d55-474">Azure Stream Analytics can use static snapshots of data toojoin with temporal data streams.</span></span> <span data-ttu-id="72d55-475">toodemonstrate esse recurso, use Olá pergunta de exemplo a seguir.</span><span class="sxs-lookup"><span data-stu-id="72d55-475">toodemonstrate this capability, use hello following sample question.</span></span>

<span data-ttu-id="72d55-476">Se um veículo comercial é registrado com a empresa de pedágio Olá, ele pode passar pelo pedágio Olá sem ser parado para inspeção.</span><span class="sxs-lookup"><span data-stu-id="72d55-476">If a commercial vehicle is registered with hello toll company, it can pass through hello toll booth without being stopped for inspection.</span></span> <span data-ttu-id="72d55-477">Você usará tooidentify de tabela de pesquisa de registro de veículo comercial todos os veículos comerciais registros expirados.</span><span class="sxs-lookup"><span data-stu-id="72d55-477">You will use Commercial Vehicle Registration lookup table tooidentify all commercial vehicles that have expired registrations.</span></span>

```
SELECT EntryStream.EntryTime, EntryStream.LicensePlate, EntryStream.TollId, Registration.RegistrationId
FROM EntryStream TIMESTAMP BY EntryTime
JOIN Registration
ON EntryStream.LicensePlate = Registration.LicensePlate
WHERE Registration.Expired = '1'
```

<span data-ttu-id="72d55-478">tootest uma consulta usando dados de referência, você precisa toodefine uma fonte de entrada hello dados de referência, que você tenha feito.</span><span class="sxs-lookup"><span data-stu-id="72d55-478">tootest a query by using reference data, you need toodefine an input source for hello reference data, which you have done already.</span></span>

<span data-ttu-id="72d55-479">tootest nesta consulta, cole Olá consulta em hello **consulta** , clique em **teste**e especificar as fontes de entrada hello dois e o registro de saudação dados de exemplo e clique em **teste**.</span><span class="sxs-lookup"><span data-stu-id="72d55-479">tootest this query, paste hello query into hello **QUERY** tab, click **Test**, and specify hello two input sources and hello registration sample data and click **Test**.</span></span>  
   
![Saída do teste Olá](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image46.png)

## <a name="start-hello-stream-analytics-job"></a><span data-ttu-id="72d55-481">Iniciar o trabalho de análise de fluxo de saudação</span><span class="sxs-lookup"><span data-stu-id="72d55-481">Start hello Stream Analytics job</span></span>
<span data-ttu-id="72d55-482">Agora é hora toofinish Olá configuração e início Olá trabalho.</span><span class="sxs-lookup"><span data-stu-id="72d55-482">Now it's time toofinish hello configuration and start hello job.</span></span> <span data-ttu-id="72d55-483">Salvar a consulta de saudação da pergunta 3, que irá gerar saída correspondências Olá esquema da saudação **TollDataRefJoin** tabela de saída.</span><span class="sxs-lookup"><span data-stu-id="72d55-483">Save hello query from Question 3, which will produce output that matches hello schema of hello **TollDataRefJoin** output table.</span></span>

<span data-ttu-id="72d55-484">Trabalho vá toohello **painel**e clique em **iniciar**.</span><span class="sxs-lookup"><span data-stu-id="72d55-484">Go toohello job **DASHBOARD**, and click **START**.</span></span>

![Captura de tela do botão Iniciar de saudação no painel de trabalho Olá](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image48.png)

<span data-ttu-id="72d55-486">Na caixa de diálogo de saudação que é aberta, alterar Olá **iniciar saída** muito tempo**tempo personalizado**.</span><span class="sxs-lookup"><span data-stu-id="72d55-486">In hello dialog box that opens, change hello **START OUTPUT** time too**CUSTOM TIME**.</span></span> <span data-ttu-id="72d55-487">Alteração Olá hora tooone hora antes Olá hora atual.</span><span class="sxs-lookup"><span data-stu-id="72d55-487">Change hello hour tooone hour before hello current time.</span></span> <span data-ttu-id="72d55-488">Essa alteração garante que todos os eventos do hub de eventos de saudação são processados desde o início de eventos de saudação toogenerate no início de saudação do tutorial de saudação.</span><span class="sxs-lookup"><span data-stu-id="72d55-488">This change ensures that all events from hello event hub are processed since you started toogenerate hello events at hello beginning of hello tutorial.</span></span> <span data-ttu-id="72d55-489">Agora clique Olá **iniciar** trabalho de saudação do botão toostart.</span><span class="sxs-lookup"><span data-stu-id="72d55-489">Now click hello **Start** button toostart hello job.</span></span>

![Seleção de hora personalizada](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image49.png)

<span data-ttu-id="72d55-491">Iniciando o trabalho Olá pode levar alguns minutos.</span><span class="sxs-lookup"><span data-stu-id="72d55-491">Starting hello job can take a few minutes.</span></span> <span data-ttu-id="72d55-492">Você pode ver o status de saudação na página de nível superior Olá para análises de fluxo.</span><span class="sxs-lookup"><span data-stu-id="72d55-492">You can see hello status on hello top-level page for Stream Analytics.</span></span>

![Captura de tela de status de saudação do trabalho de saudação](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image50.png)

## <a name="check-results-in-visual-studio"></a><span data-ttu-id="72d55-494">Verificar resultados no Visual Studio</span><span class="sxs-lookup"><span data-stu-id="72d55-494">Check results in Visual Studio</span></span>
1. <span data-ttu-id="72d55-495">Abra o Visual Studio Server Explorer e clique Olá **TollDataRefJoin** tabela.</span><span class="sxs-lookup"><span data-stu-id="72d55-495">Open Visual Studio Server Explorer, and right-click hello **TollDataRefJoin** table.</span></span>
2. <span data-ttu-id="72d55-496">Clique em **Mostrar dados da tabela** toosee saída de saudação do seu trabalho.</span><span class="sxs-lookup"><span data-stu-id="72d55-496">Click **Show Table Data** toosee hello output of your job.</span></span>
   
    ![Seleção de "Mostrar Dados da Tabela" no Gerenciador de Servidores](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image51.jpg)

## <a name="scale-out-azure-stream-analytics-jobs"></a><span data-ttu-id="72d55-498">Escalar horizontalmente trabalhos do Stream Analytics do Azure</span><span class="sxs-lookup"><span data-stu-id="72d55-498">Scale out Azure Stream Analytics jobs</span></span>
<span data-ttu-id="72d55-499">O Azure Stream Analytics foi projetado tooelastically dimensionar para que ele possa manipular a muitos dados.</span><span class="sxs-lookup"><span data-stu-id="72d55-499">Azure Stream Analytics is designed tooelastically scale so that it can handle a lot of data.</span></span> <span data-ttu-id="72d55-500">consulta do Stream Analytics do Azure Olá pode usar um **PARTITION BY** sistema de saudação do tootell cláusula esta etapa será escalável. **PartitionId** é uma coluna especial Olá sistema adiciona toomatch Olá partição ID de entrada hello (hub de eventos).</span><span class="sxs-lookup"><span data-stu-id="72d55-500">hello Azure Stream Analytics query can use a **PARTITION BY** clause tootell hello system that this step will scale out. **PartitionId** is a special column that hello system adds toomatch hello partition ID of hello input (event hub).</span></span>

    SELECT TollId, System.Timestamp AS WindowEnd, COUNT(*)AS Count
    FROM EntryStream TIMESTAMP BY EntryTime PARTITION BY PartitionId
    GROUP BY TUMBLINGWINDOW(minute,3), TollId, PartitionId

1. <span data-ttu-id="72d55-501">Trabalho atual parar hello, atualização Olá consulta em Olá **consulta** guia e abra Olá **configurações** engrenagem no painel de trabalho hello.</span><span class="sxs-lookup"><span data-stu-id="72d55-501">Stop hello current job, update hello query in hello **QUERY** tab, and open hello **Settings** gear in hello job dashboard.</span></span> <span data-ttu-id="72d55-502">Clique em **Escala**.</span><span class="sxs-lookup"><span data-stu-id="72d55-502">Click **Scale**.</span></span>
   
    <span data-ttu-id="72d55-503">**UNIDADES de STREAMING** definir Olá o valor de capacidade de computação que Olá trabalho pode receber.</span><span class="sxs-lookup"><span data-stu-id="72d55-503">**STREAMING UNITS** define hello amount of compute power that hello job can receive.</span></span>
2. <span data-ttu-id="72d55-504">Olá suspenso Change de 1 de 6.</span><span class="sxs-lookup"><span data-stu-id="72d55-504">Change hello drop down from 1 from 6.</span></span>
   
    ![Captura de tela da seleção de 6 unidades de streaming](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image52.png)
3. <span data-ttu-id="72d55-506">Vá toohello **SAÍDAS** guia e altere o nome de saudação da tabela do SQL Olá muito**TollDataTumblingCountPartitioned**.</span><span class="sxs-lookup"><span data-stu-id="72d55-506">Go toohello **OUTPUTS** tab and change hello name of hello SQL table too**TollDataTumblingCountPartitioned**.</span></span>

<span data-ttu-id="72d55-507">Se você iniciar o trabalho de saudação agora, Stream Analytics do Azure pode distribuir o trabalho entre mais recursos de computação e obter melhor taxa de transferência.</span><span class="sxs-lookup"><span data-stu-id="72d55-507">If you start hello job now, Azure Stream Analytics can distribute work across more compute resources and achieve better throughput.</span></span> <span data-ttu-id="72d55-508">Observe que esse aplicativo TollApp Olá também está enviando eventos particionados por TollId.</span><span class="sxs-lookup"><span data-stu-id="72d55-508">Please note that hello TollApp application is also sending events partitioned by TollId.</span></span>

## <a name="monitor"></a><span data-ttu-id="72d55-509">Monitoramento</span><span class="sxs-lookup"><span data-stu-id="72d55-509">Monitor</span></span>
<span data-ttu-id="72d55-510">Olá **MONITOR** área contém estatísticas sobre Olá executando o trabalho.</span><span class="sxs-lookup"><span data-stu-id="72d55-510">hello **MONITOR** area contains statistics about hello running job.</span></span> <span data-ttu-id="72d55-511">Primeira vez que a configuração é necessária toouse Olá conta de armazenamento Olá mesma região (nome de pedágio como Olá restante deste documento).</span><span class="sxs-lookup"><span data-stu-id="72d55-511">First time configuration is needed toouse hello storage account in hello same region (name toll like hello rest of this document).</span></span>   

![Captura de tela do monitor](media/stream-analytics-build-an-iot-solution-using-stream-analytics/monitoring.png)

<span data-ttu-id="72d55-513">Você pode acessar **Logs de atividade** do painel de trabalho Olá **configurações** área também.</span><span class="sxs-lookup"><span data-stu-id="72d55-513">You can access **Activity Logs** from hello job dashboard **Settings** area as well.</span></span>


## <a name="conclusion"></a><span data-ttu-id="72d55-514">Conclusão</span><span class="sxs-lookup"><span data-stu-id="72d55-514">Conclusion</span></span>
<span data-ttu-id="72d55-515">Este tutorial introduziu um serviço do Azure Stream Analytics toohello.</span><span class="sxs-lookup"><span data-stu-id="72d55-515">This tutorial introduced you toohello Azure Stream Analytics service.</span></span> <span data-ttu-id="72d55-516">Ele demonstrou como tooconfigure entradas e saídas para Olá trabalho do Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="72d55-516">It demonstrated how tooconfigure inputs and outputs for hello Stream Analytics job.</span></span> <span data-ttu-id="72d55-517">Usando o cenário de pedágio dados hello, tutorial Olá explicado tipos comuns de problemas que surgem no espaço de saudação de dados em movimento e como eles podem ser resolvidos com simples consultas SQL no Azure Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="72d55-517">Using hello Toll Data scenario, hello tutorial explained common types of problems that arise in hello space of data in motion and how they can be solved with simple SQL-like queries in Azure Stream Analytics.</span></span> <span data-ttu-id="72d55-518">tutorial de saudação descrito SQL construções de extensão para trabalhar com dados temporais.</span><span class="sxs-lookup"><span data-stu-id="72d55-518">hello tutorial described SQL extension constructs for working with temporal data.</span></span> <span data-ttu-id="72d55-519">Ele mostrou como toojoin fluxos de dados, como o fluxo de dados de saudação do tooenrich com dados de referência estática e tooscale-out de uma consulta tooachieve maior taxa de transferência.</span><span class="sxs-lookup"><span data-stu-id="72d55-519">It showed how toojoin data streams, how tooenrich hello data stream with static reference data, and how tooscale out a query tooachieve higher throughput.</span></span>

<span data-ttu-id="72d55-520">Embora este tutorial forneça uma boa introdução, ele não é, de forma alguma, completo.</span><span class="sxs-lookup"><span data-stu-id="72d55-520">Although this tutorial provides a good introduction, it is not complete by any means.</span></span> <span data-ttu-id="72d55-521">Você pode encontrar mais padrões de consulta usando a linguagem SAQL Olá em [consultar exemplos de padrões de uso comuns do Stream Analytics](stream-analytics-stream-analytics-query-patterns.md).</span><span class="sxs-lookup"><span data-stu-id="72d55-521">You can find more query patterns using hello SAQL language at [Query examples for common Stream Analytics usage patterns](stream-analytics-stream-analytics-query-patterns.md).</span></span>
<span data-ttu-id="72d55-522">Consulte toohello [documentação on-line](https://azure.microsoft.com/documentation/services/stream-analytics/) toolearn mais sobre o Azure Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="72d55-522">Refer toohello [online documentation](https://azure.microsoft.com/documentation/services/stream-analytics/) toolearn more about Azure Stream Analytics.</span></span>

## <a name="clean-up-your-azure-account"></a><span data-ttu-id="72d55-523">Limpar sua conta do Azure</span><span class="sxs-lookup"><span data-stu-id="72d55-523">Clean up your Azure account</span></span>
1. <span data-ttu-id="72d55-524">Pare o trabalho de análise de fluxo de saudação no hello portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="72d55-524">Stop hello Stream Analytics job in hello Azure portal.</span></span>
   
    <span data-ttu-id="72d55-525">Olá Setup.ps1 script cria dois hubs de eventos e um banco de dados SQL.</span><span class="sxs-lookup"><span data-stu-id="72d55-525">hello Setup.ps1 script creates two event hubs and a SQL database.</span></span> <span data-ttu-id="72d55-526">Olá você limpar os recursos no final de saudação do tutorial de saudação de ajuda de instruções a seguir.</span><span class="sxs-lookup"><span data-stu-id="72d55-526">hello following instructions help you clean up resources at hello end of hello tutorial.</span></span>
2. <span data-ttu-id="72d55-527">Em uma janela do PowerShell, digite **.\\ CleanUp.ps1** script hello toostart exclui os recursos usados no tutorial de saudação.</span><span class="sxs-lookup"><span data-stu-id="72d55-527">In a PowerShell window, type **.\\Cleanup.ps1** toostart hello script that deletes resources used in hello tutorial.</span></span>
   
   > [!NOTE]
   > <span data-ttu-id="72d55-528">Recursos são identificados pelo nome da saudação.</span><span class="sxs-lookup"><span data-stu-id="72d55-528">Resources are identified by hello name.</span></span> <span data-ttu-id="72d55-529">Certifique-se de examinar cuidadosamente cada item antes de confirmar a remoção.</span><span class="sxs-lookup"><span data-stu-id="72d55-529">Make sure you carefully review each item before confirming removal.</span></span>
   > 
   > 


