# <a name="get-started-using-azure-stream-analytics-real-time-fraud-detection"></a><span data-ttu-id="8cfbe-101">Introdução ao uso de Stream Analytics do Azure: detecção de fraudes em tempo real</span><span class="sxs-lookup"><span data-stu-id="8cfbe-101">Get started using Azure Stream Analytics: Real-time fraud detection</span></span>

<span data-ttu-id="8cfbe-102">Este tutorial fornece uma ilustração de ponta a ponta de como toouse Stream Analytics do Azure.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-102">This tutorial provides an end-to-end illustration of how toouse Azure Stream Analytics.</span></span> <span data-ttu-id="8cfbe-103">Você aprenderá como:</span><span class="sxs-lookup"><span data-stu-id="8cfbe-103">You learn how to:</span></span> 

* <span data-ttu-id="8cfbe-104">Colocar o fluxo de eventos em uma instância de Hubs de eventos do Azure.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-104">Bring streaming events into an instance of Azure Event Hubs.</span></span> <span data-ttu-id="8cfbe-105">Neste tutorial, você usará um aplicativo que fornecemos que simula um fluxo de registros de metadados de telefone celular.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-105">In this tutorial, you'll use an app that we provide that simulates a stream of mobile-phone metadata records.</span></span>

* <span data-ttu-id="8cfbe-106">Grave dados do tipo SQL Stream Analytics consultas tootransform, agregar informações ou procurando padrões.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-106">Write SQL-like Stream Analytics queries tootransform data, aggregating information or looking for patterns.</span></span> <span data-ttu-id="8cfbe-107">Você verá como toouse tooexamine uma consulta Olá fluxo de entrada e procure chamadas que podem ser fraudulentas.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-107">You will see how toouse a query tooexamine hello incoming stream and look for calls that might be fraudulent.</span></span>

* <span data-ttu-id="8cfbe-108">Envie Olá resultados tooan coletor de saída (armazenamento) que você pode analisar informações adicionais.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-108">Send hello results tooan output sink (storage) that you can analyze for additional insights.</span></span> <span data-ttu-id="8cfbe-109">Nesse caso, você enviará o armazenamento de BLOBs do hello chamada suspeitas dados tooAzure.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-109">In this case, you'll send hello suspicious call data tooAzure Blob storage.</span></span>

<span data-ttu-id="8cfbe-110">Neste tutorial, usamos o exemplo hello de detecção de fraudes em tempo real com base nos dados de chamada telefônica.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-110">In  this tutorial, we use hello example of real-time fraud detection based on phone-call data.</span></span> <span data-ttu-id="8cfbe-111">Mas técnica Olá que ilustraremos também é adequada para outros tipos de detecção de fraudes, como um cartão de crédito fraude ou roubo de identidade.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-111">But hello technique we illustrate is also suited for other types of fraud detection, such as credit card fraud or identity theft.</span></span> 

## <a name="scenario-telecommunications-and-sim-fraud-detection-in-real-time"></a><span data-ttu-id="8cfbe-112">Cenário: detecção de fraudes de telecomunicações e SIM em tempo real</span><span class="sxs-lookup"><span data-stu-id="8cfbe-112">Scenario: Telecommunications and SIM fraud detection in real time</span></span>

<span data-ttu-id="8cfbe-113">Uma empresa de telecomunicações tem um grande volume de dados para as chamadas de entrada.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-113">A telecommunications company has a large volume of data for incoming calls.</span></span> <span data-ttu-id="8cfbe-114">empresa de saudação deseja toodetect fraudulenta chamadas em tempo real para que eles possam notificar clientes ou desligar o serviço para um número específico.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-114">hello company wants toodetect fraudulent calls in real time so that they can notify customers or shut down service for a specific number.</span></span> <span data-ttu-id="8cfbe-115">Um tipo de fraude SIM envolve várias chamadas de saudação mesma identidade ao redor Olá a mesma hora mas em locais geograficamente diferentes.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-115">One type of SIM fraud involves multiple calls from hello same identity around hello same time but in geographically different locations.</span></span> <span data-ttu-id="8cfbe-116">toodetect esse tipo de fraude, Olá registros tooexamine phone entrada necessidades da empresa e procurar padrões específicos – nesse caso, para chamadas feitas ao redor Olá simultaneamente em diferentes países.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-116">toodetect this type of fraud, hello company needs tooexamine incoming phone records and look for specific patterns—in this case, for calls made around hello same time in different countries.</span></span> <span data-ttu-id="8cfbe-117">Os registros de telefone que entram nesta categoria são gravados toostorage para análise posterior.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-117">Any phone records that fall into this category are written toostorage for subsequent analysis.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="8cfbe-118">Pré-requisitos</span><span class="sxs-lookup"><span data-stu-id="8cfbe-118">Prerequisites</span></span>

<span data-ttu-id="8cfbe-119">Neste tutorial, você vai simular dados de chamada telefônica usando um aplicativo cliente que gera os metadados de exemplo de chamada telefônica.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-119">In this tutorial, you'll simulate phone-call data by using a client app that generates sample phone call metadata.</span></span> <span data-ttu-id="8cfbe-120">Alguns dos registros de Olá Olá aplicativo produz a aparência de chamadas fraudulentas.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-120">Some of hello records that hello app produces look like fraudulent calls.</span></span> 

<span data-ttu-id="8cfbe-121">Antes de começar, verifique se que você tem o seguinte hello:</span><span class="sxs-lookup"><span data-stu-id="8cfbe-121">Before you start, make sure you have hello following:</span></span>

* <span data-ttu-id="8cfbe-122">Uma conta do Azure.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-122">An Azure account.</span></span>
* <span data-ttu-id="8cfbe-123">aplicativo de gerador de evento de chamada Hello.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-123">hello call-event generator app.</span></span> <span data-ttu-id="8cfbe-124">Você pode obter isso baixando Olá [TelcoGenerator.zip arquivo](http://download.microsoft.com/download/8/B/D/8BD50991-8D54-4F59-AB83-3354B69C8A7E/TelcoGenerator.zip) da saudação Microsoft Download Center.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-124">You can get this by downloading hello [TelcoGenerator.zip file](http://download.microsoft.com/download/8/B/D/8BD50991-8D54-4F59-AB83-3354B69C8A7E/TelcoGenerator.zip) from hello Microsoft Download Center.</span></span> <span data-ttu-id="8cfbe-125">Descompacte este pacote em uma pasta no seu computador.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-125">Unzip this package into a folder on your computer.</span></span> <span data-ttu-id="8cfbe-126">Se desejar que o código-fonte toosee hello e aplicativo hello execução em um depurador, você pode obter o código-fonte aplicativo hello de [GitHub](https://aka.ms/azure-stream-analytics-telcogenerator).</span><span class="sxs-lookup"><span data-stu-id="8cfbe-126">If you want toosee hello source code and run hello app in a debugger, you can get hello app source code from [GitHub](https://aka.ms/azure-stream-analytics-telcogenerator).</span></span> 

    >[!NOTE]
    ><span data-ttu-id="8cfbe-127">Windows podem bloquear o arquivo. zip de saudação baixado.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-127">Windows might block hello downloaded .zip file.</span></span> <span data-ttu-id="8cfbe-128">Se você não pode descompactá-lo, arquivo hello e selecione **propriedades**.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-128">If you can't unzip it, right-click hello file and select **Properties**.</span></span> <span data-ttu-id="8cfbe-129">Se você vir Olá mensagem "Este arquivo veio de outro computador e pode ser bloqueado toohelp proteger este computador", selecione Olá **desbloquear** opção e, em seguida, clique em **aplicar**.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-129">If you see hello "This file came from another computer and might be blocked toohelp protect this computer" message, select hello **Unblock** option and then click **Apply**.</span></span>

<span data-ttu-id="8cfbe-130">Se quiser tooexamine Olá resultados do trabalho de análise de fluxo contínuo do hello, você também precisa de uma ferramenta para exibir o conteúdo de saudação de um contêiner de armazenamento de BLOBs do Azure.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-130">If you want tooexamine hello results of hello Streaming Analytics job, you also need a tool for viewing hello contents of a Azure Blob Storage container.</span></span> <span data-ttu-id="8cfbe-131">Se você usar o Visual Studio, você pode usar [ferramentas do Azure para Visual Studio](https://docs.microsoft.com/en-us/azure/vs-azure-tools-storage-resources-server-explorer-browse-manage) ou [Visual Studio Cloud Explorer](https://docs.microsoft.com/en-us/azure/vs-azure-tools-resources-managing-with-cloud-explorer).</span><span class="sxs-lookup"><span data-stu-id="8cfbe-131">If you use Visual Studio, you can use [Azure Tools for Visual Studio](https://docs.microsoft.com/en-us/azure/vs-azure-tools-storage-resources-server-explorer-browse-manage) or [Visual Studio Cloud Explorer](https://docs.microsoft.com/en-us/azure/vs-azure-tools-resources-managing-with-cloud-explorer).</span></span> <span data-ttu-id="8cfbe-132">Como alternativa, você pode instalar ferramentas autônomas como [Azure Storage Explorer](http://storageexplorer.com/) ou [Azure Explorer](http://www.cerebrata.com/products/azure-explorer/introduction).</span><span class="sxs-lookup"><span data-stu-id="8cfbe-132">Alternatively, you can install standalone tools like [Azure Storage Explorer](http://storageexplorer.com/) or [Azure Explorer](http://www.cerebrata.com/products/azure-explorer/introduction).</span></span> 

## <a name="create-an-azure-event-hubs-tooingest-events"></a><span data-ttu-id="8cfbe-133">Criar um evento do Azure tooingest dos hubs de eventos</span><span class="sxs-lookup"><span data-stu-id="8cfbe-133">Create an Azure event hubs tooingest events</span></span>

<span data-ttu-id="8cfbe-134">tooanalyze um fluxo de dados, você *ingestão* -lo no Azure.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-134">tooanalyze a data stream, you *ingest* it into Azure.</span></span> <span data-ttu-id="8cfbe-135">Uma maneira comum de dados de tooingest é toouse [Hubs de eventos do Azure](../event-hubs/event-hubs-what-is-event-hubs.md), que permite ingestão milhões de eventos por segundo e, em seguida, processar e armazenar informações de evento hello.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-135">A typical way tooingest data is toouse [Azure Event Hubs](../event-hubs/event-hubs-what-is-event-hubs.md), which lets you ingest millions of events per second and then process and store hello event information.</span></span> <span data-ttu-id="8cfbe-136">Para este tutorial, você criar um hub de eventos e, em seguida, tiver Olá evento de chamada gerador aplicativo enviar chamada dados toothat hub de eventos.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-136">For this tutorial, you create an event hub and then have hello call-event generator app send call data toothat event hub.</span></span> <span data-ttu-id="8cfbe-137">Para obter mais informações sobre hubs de eventos, consulte Olá [documentação do Azure Service Bus](https://docs.microsoft.com/en-us/azure/service-bus/).</span><span class="sxs-lookup"><span data-stu-id="8cfbe-137">For more about event hubs, see hello [Azure Service Bus documentation](https://docs.microsoft.com/en-us/azure/service-bus/).</span></span>

>[!NOTE]
><span data-ttu-id="8cfbe-138">Para obter uma versão mais detalhada deste procedimento, consulte [criar um namespace de Hubs de eventos e um hub de eventos usando o portal do Azure de Olá](../event-hubs/event-hubs-create.md).</span><span class="sxs-lookup"><span data-stu-id="8cfbe-138">For a more detailed version of this procedure, see [Create an Event Hubs namespace and an event hub using hello Azure portal](../event-hubs/event-hubs-create.md).</span></span> 

### <a name="create-a-namespace-and-event-hub"></a><span data-ttu-id="8cfbe-139">Criar um hub de evento e de namespace</span><span class="sxs-lookup"><span data-stu-id="8cfbe-139">Create a namespace and event hub</span></span>
<span data-ttu-id="8cfbe-140">Neste procedimento, você primeiro criar um namespace de hub de eventos e, em seguida, você pode adicionar um namepsace de toothat do hub de eventos.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-140">In this procedure, you first create an event hub namespace, and then you add an event hub toothat namepsace.</span></span> <span data-ttu-id="8cfbe-141">Namespaces do hub de eventos são usados toologically grupo relacionadas a instâncias de barramento de eventos.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-141">Event hub namespaces are used toologically group related event bus instances.</span></span> 

1. <span data-ttu-id="8cfbe-142">Faça logon no portal do Azure de saudação e clique em **novo** > **Internet das coisas** > **Hub de eventos**.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-142">Log  into hello Azure portal and click **New** > **Internet of Things** > **Event Hub**.</span></span> 

2. <span data-ttu-id="8cfbe-143">Em Olá **criar namespace** folha, insira um nome de namespace como `<yourname>-eh-ns-demo`.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-143">In hello **Create namespace** blade, enter a namespace name such as `<yourname>-eh-ns-demo`.</span></span> <span data-ttu-id="8cfbe-144">Você pode usar qualquer nome de namespace hello, mas nome hello deve ser válido para uma URL e deve ser exclusivo no Azure.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-144">You can use any name for hello namespace, but hello name must be valid for a URL and it must be unique across Azure.</span></span> 
    
3. <span data-ttu-id="8cfbe-145">Selecione uma assinatura e crie ou escolha um grupo de recursos e clique em **Criar**.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-145">Select a subscription and create or choose a resource group , then click **Create**.</span></span> 

    ![Criar um namespace do hub de eventos](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-eventhub-namespace-new-portal.png)
 
4. <span data-ttu-id="8cfbe-147">Ao namespace Olá terminou de implantação, encontre hello namespace de hub de eventos na lista de recursos do Azure.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-147">When hello namespace has finished deploying, find hello event hub namespace in your list of Azure resources.</span></span> 

5. <span data-ttu-id="8cfbe-148">Clique em novo namespace de saudação e na folha de namespace hello, clique em  **+ &nbsp;Hub de eventos**.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-148">Click hello new namespace, and in hello namespace blade, click **+&nbsp;Event Hub**.</span></span> 

    ![<span data-ttu-id="8cfbe-149">botão de adicionar o Hub de eventos Olá para criar um novo hub de eventos</span><span class="sxs-lookup"><span data-stu-id="8cfbe-149">hello Add Event Hub button for creating a new event hub</span></span> ](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-eventhub-button-new-portal.png)    
 
6. <span data-ttu-id="8cfbe-150">Nome hello novo hub de eventos `sa-eh-frauddetection-demo`.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-150">Name hello new event hub `sa-eh-frauddetection-demo`.</span></span> <span data-ttu-id="8cfbe-151">Você pode usar um nome diferente.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-151">You can use a different name.</span></span> <span data-ttu-id="8cfbe-152">Se você fizer isso, anote-lo, porque você precisa de nome hello mais tarde.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-152">If you do, make a note of it, because you need hello name later.</span></span> <span data-ttu-id="8cfbe-153">Você não precisa tooset quaisquer outras opções para o hub de eventos Olá agora.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-153">You don't need tooset any other options for hello event hub right now.</span></span>

    ![Folha para a criação de um novo hub de eventos](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-eventhub-new-portal.png)
    
 
7. <span data-ttu-id="8cfbe-155">Clique em **Criar**.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-155">Click **Create**.</span></span>
### <a name="grant-access-toohello-event-hub-and-get-a-connection-string"></a><span data-ttu-id="8cfbe-156">Conceda o hub de eventos de toohello de acesso e obter uma cadeia de caracteres de conexão</span><span class="sxs-lookup"><span data-stu-id="8cfbe-156">Grant access toohello event hub and get a connection string</span></span>

<span data-ttu-id="8cfbe-157">Antes de um processo pode enviar o hub de eventos de tooan de dados, o hub de eventos Olá deve ter uma política que permite o acesso apropriado.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-157">Before a process can send data tooan event hub, hello event hub must have a policy that allows appropriate access.</span></span> <span data-ttu-id="8cfbe-158">política de acesso de saudação produz uma cadeia de caracteres de conexão que inclui informações de autorização.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-158">hello access policy produces a connection string that includes authorization information.</span></span>

1.  <span data-ttu-id="8cfbe-159">Na folha de namespace do evento hello, clique em **Hubs de eventos** e, em seguida, clique em nome de saudação do seu novo hub de eventos.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-159">In hello event namespace blade, click **Event Hubs** and then click hello name of your new event hub.</span></span>

2.  <span data-ttu-id="8cfbe-160">Na folha de hub de evento hello, clique em **políticas de acesso compartilhado** e, em seguida, clique em  **+ &nbsp;adicionar**.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-160">In hello event hub blade, click **Shared access policies** and then click **+&nbsp;Add**.</span></span>

    >[!NOTE]
    ><span data-ttu-id="8cfbe-161">Verifique se que você estiver trabalhando com o hub de eventos hello, não Olá namespace de hub de eventos.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-161">Make sure you're working with hello event hub, not hello event hub namespace.</span></span>

3.  <span data-ttu-id="8cfbe-162">Adicione uma política chamada `sa-policy-manage-demo` e para **Declaração**, selecione **Gerenciar**.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-162">Add a policy named `sa-policy-manage-demo` and for **Claim**, select **Manage**.</span></span>

    ![Folha para a criação de uma nova política de acesso de hub de eventos](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-shared-access-policy-manage-new-portal.png)
 
4.  <span data-ttu-id="8cfbe-164">Clique em **Criar**.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-164">Click **Create**.</span></span>

5.  <span data-ttu-id="8cfbe-165">Após a implantação de política de saudação, clique na lista de saudação de políticas de acesso compartilhado.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-165">After hello policy has been deployed, click it in hello list of shared access policies.</span></span>

6.  <span data-ttu-id="8cfbe-166">Caixa de saudação localizar **chave primária de cadeia de caracteres de conexão** e clique em cadeia de conexão do hello cópia botão Avançar toohello.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-166">Find hello box labeled **CONNECTION STRING-PRIMARY KEY** and click hello copy button next toohello connection string.</span></span> 
    
    ![Copiar a chave de cadeia de caracteres de conexão primária de saudação da política de acesso de saudação](./media/stream-analytics-real-time-fraud-detection/stream-analytics-shared-access-policy-copy-connection-string-new-portal.png)
 
7.  <span data-ttu-id="8cfbe-168">Cole a cadeia de caracteres de conexão de saudação em um editor de texto.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-168">Paste hello connection string into a text editor.</span></span> <span data-ttu-id="8cfbe-169">É necessário essa cadeia de caracteres de conexão para a próxima seção de hello, depois de fazer algumas pequenas edições tooit.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-169">You need this connection string for hello next section, after you make some small edits tooit.</span></span>

    <span data-ttu-id="8cfbe-170">cadeia de caracteres de conexão Olá tem esta aparência:</span><span class="sxs-lookup"><span data-stu-id="8cfbe-170">hello connection string looks like this:</span></span>

        Endpoint=sb://YOURNAME-eh-ns-demo.servicebus.windows.net/;SharedAccessKeyName=sa-policy-manage-demo;SharedAccessKey=Gw2NFZwU1Di+rxA2T+6hJYAtFExKRXaC2oSQa0ZsPkI=;EntityPath=sa-eh-frauddetection-demo

    <span data-ttu-id="8cfbe-171">Observe que a cadeia de caracteres de conexão Olá contém vários pares de chave-valor, separados por ponto e vírgula: `Endpoint`, `SharedAccessKeyName`, `SharedAccessKey`, e `EntityPath`.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-171">Notice that hello connection string contains multiple key-value pairs, separated with semicolons: `Endpoint`, `SharedAccessKeyName`, `SharedAccessKey`, and `EntityPath`.</span></span>  

## <a name="configure-and-start-hello-event-generator-application"></a><span data-ttu-id="8cfbe-172">Configurar e iniciar o aplicativo de gerador de evento hello</span><span class="sxs-lookup"><span data-stu-id="8cfbe-172">Configure and start hello event generator application</span></span>

<span data-ttu-id="8cfbe-173">Antes de iniciar o aplicativo de TelcoGenerator hello, você configurá-lo para que você acabou de criar hub de eventos chamada registros toohello será enviada.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-173">Before you start hello TelcoGenerator app, you configure it so that it will send call records toohello event hub you just created.</span></span>

### <a name="configure-hello-telcogeneratorapp"></a><span data-ttu-id="8cfbe-174">Configurar Olá TelcoGeneratorapp</span><span class="sxs-lookup"><span data-stu-id="8cfbe-174">Configure hello TelcoGeneratorapp</span></span>

1.  <span data-ttu-id="8cfbe-175">No editor de saudação onde você copiou a cadeia de caracteres de conexão hello, anote Olá `EntityPath` valor e, em seguida, remover Olá `EntityPath` par (não se esqueça de tooremove Olá-e-vírgula anterior).</span><span class="sxs-lookup"><span data-stu-id="8cfbe-175">In hello editor where you copied hello connection string, make a note of hello `EntityPath` value, and then remove hello `EntityPath` pair (don't forget tooremove hello semicolon that precedes it).</span></span> 

2.  <span data-ttu-id="8cfbe-176">Na pasta de Olá onde você descompactou Olá TelcoGenerator.zip arquivo, abra o arquivo de telcodatagen.exe.config Olá em um editor.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-176">In hello folder where you unzipped hello TelcoGenerator.zip file, open hello telcodatagen.exe.config file in an editor.</span></span> <span data-ttu-id="8cfbe-177">(Há mais de um arquivo. config, portanto certifique-se de que você abrir um direito de saudação).</span><span class="sxs-lookup"><span data-stu-id="8cfbe-177">(There is more than one .config file, so be sure that you open hello right one.)</span></span>

3.  <span data-ttu-id="8cfbe-178">Em Olá `<appSettings>` elemento, fazer isso:</span><span class="sxs-lookup"><span data-stu-id="8cfbe-178">In hello `<appSettings>` element, do this:</span></span>

    * <span data-ttu-id="8cfbe-179">Definir valor Olá Olá `EventHubName` toohello chave nome do hub de evento (ou seja, o valor de toohello do caminho de entidade Olá).</span><span class="sxs-lookup"><span data-stu-id="8cfbe-179">Set hello value of hello `EventHubName` key toohello event hub name (that is, toohello value of hello entity path).</span></span>
    * <span data-ttu-id="8cfbe-180">Definir valor Olá Olá `Microsoft.ServiceBus.ConnectionString` chave de cadeia de caracteres de conexão toohello.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-180">Set hello value of hello `Microsoft.ServiceBus.ConnectionString` key toohello connection string.</span></span> 

    <span data-ttu-id="8cfbe-181">Olá `<appSettings>` seção será semelhante a saudação de exemplo a seguir.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-181">hello `<appSettings>` section will look like hello following example.</span></span> <span data-ttu-id="8cfbe-182">(Para maior clareza, é encapsulado linhas hello e removido alguns caracteres do token de autorização hello.)</span><span class="sxs-lookup"><span data-stu-id="8cfbe-182">(For clarity, we wrapped hello lines and removed some characters from hello authorization token.)</span></span>

    ![Arquivo de configuração de aplicativo TelcoGenerator mostrando a sequência de nome e a conexão de hub de evento do hello](./media/stream-analytics-real-time-fraud-detection/stream-analytics-telcogenerator-config-file-app-settings.png)
 
4.  <span data-ttu-id="8cfbe-184">Salve o arquivo hello.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-184">Save hello file.</span></span> 

### <a name="start-hello-app"></a><span data-ttu-id="8cfbe-185">Iniciar aplicativo hello</span><span class="sxs-lookup"><span data-stu-id="8cfbe-185">Start hello app</span></span>
1.  <span data-ttu-id="8cfbe-186">Abra uma janela de comando e altere a pasta toohello onde Olá TelcoGenerator aplicativo é descompactado.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-186">Open a command window and change toohello folder where hello TelcoGenerator app is unzipped.</span></span>
2.  <span data-ttu-id="8cfbe-187">Digite hello comando a seguir:</span><span class="sxs-lookup"><span data-stu-id="8cfbe-187">Enter hello following command:</span></span>

        telcodatagen.exe 1000 .2 2

    <span data-ttu-id="8cfbe-188">Olá parâmetros são:</span><span class="sxs-lookup"><span data-stu-id="8cfbe-188">hello parameters are:</span></span> 

    * <span data-ttu-id="8cfbe-189">Número de CDRs por hora.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-189">Number of CDRs per hour.</span></span> 
    * <span data-ttu-id="8cfbe-190">Probabilidade de fraude de cartão SIM: Frequência, como uma porcentagem de todas as chamadas, que o aplicativo hello deve simular uma chamada fraudulenta.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-190">SIM Card Fraud Probability: How often, as a percentage of all calls, that hello app should simulate a fraudulent call.</span></span> <span data-ttu-id="8cfbe-191">o valor de saudação.2 significa que cerca de 20% dos registros de chamada hello parecerá fraudulentas.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-191">hello value .2 means that about 20% of hello call records will look fraudulent.</span></span>
    * <span data-ttu-id="8cfbe-192">Duração em horas.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-192">Duration in hours.</span></span> <span data-ttu-id="8cfbe-193">número de saudação de horas que Olá aplicativo deve ser executado.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-193">hello number of hours that hello app should run.</span></span> <span data-ttu-id="8cfbe-194">Você também pode parar aplicativo hello qualquer momento pressionando Ctrl + C na linha de comando hello.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-194">You can also stop hello app any time by pressing Ctrl+C at hello command line.</span></span>

    <span data-ttu-id="8cfbe-195">Após alguns segundos, o aplicativo hello inicia exibindo registros de chamada telefônica na tela hello que ele envia toohello hub de eventos.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-195">After a few seconds, hello app starts displaying phone call records on hello screen as it sends them toohello event hub.</span></span>

<span data-ttu-id="8cfbe-196">Alguns dos campos de chave de saudação que você usará neste aplicativo de detecção de fraudes em tempo real são seguinte hello:</span><span class="sxs-lookup"><span data-stu-id="8cfbe-196">Some of hello key fields that you will be using in this real-time fraud detection application are hello following:</span></span>

|<span data-ttu-id="8cfbe-197">**Registro**</span><span class="sxs-lookup"><span data-stu-id="8cfbe-197">**Record**</span></span>|<span data-ttu-id="8cfbe-198">**Definição**</span><span class="sxs-lookup"><span data-stu-id="8cfbe-198">**Definition**</span></span>|
|----------|--------------|
|`CallrecTime`|<span data-ttu-id="8cfbe-199">Olá carimbo de hora de início de chamada hello.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-199">hello timestamp for hello call start time.</span></span> |
|`SwitchNum`|<span data-ttu-id="8cfbe-200">opção de telefone de saudação usada tooconnect chamada de saudação.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-200">hello telephone switch used tooconnect hello call.</span></span> <span data-ttu-id="8cfbe-201">Neste exemplo, comutadores de saudação são cadeias de caracteres que representam o país de saudação de origem (Estados Unidos, China, Reino Unido, Alemanha ou Austrália).</span><span class="sxs-lookup"><span data-stu-id="8cfbe-201">For this example, hello switches are strings that represent hello country of origin (US, China, UK, Germany, or Australia).</span></span> |
|`CallingNum`|<span data-ttu-id="8cfbe-202">número de telefone de saudação do chamador hello.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-202">hello phone number of hello caller.</span></span> |
|`CallingIMSI`|<span data-ttu-id="8cfbe-203">Olá International Mobile IMSI (Subscriber Identity).</span><span class="sxs-lookup"><span data-stu-id="8cfbe-203">hello International Mobile Subscriber Identity (IMSI).</span></span> <span data-ttu-id="8cfbe-204">Este é o identificador exclusivo de saudação do chamador hello.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-204">This is hello Unique identifier of hello caller.</span></span> |
|`CalledNum`|<span data-ttu-id="8cfbe-205">número de telefone de saudação do destinatário da chamada de saudação.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-205">hello phone number of hello call recipient.</span></span> |
|`CalledIMSI`|<span data-ttu-id="8cfbe-206">Identidade do Assinante Móvel Internacional (IMSI).</span><span class="sxs-lookup"><span data-stu-id="8cfbe-206">International Mobile Subscriber Identity (IMSI).</span></span> <span data-ttu-id="8cfbe-207">Este é o identificador exclusivo de saudação do destinatário da chamada de saudação.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-207">This is hello unique identifier of hello call recipient.</span></span> |


## <a name="create-a-stream-analytics-job-toomanage-streaming-data"></a><span data-ttu-id="8cfbe-208">Criar um toomanage de trabalho do Stream Analytics fluxo de dados</span><span class="sxs-lookup"><span data-stu-id="8cfbe-208">Create a Stream Analytics job toomanage streaming data</span></span>

<span data-ttu-id="8cfbe-209">Agora que você tem um fluxo de eventos de chamada, você pode configurar um trabalho do Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-209">Now that you have a stream of call events, you can set up a Stream Analytics job.</span></span> <span data-ttu-id="8cfbe-210">trabalho de saudação lê dados de hub de eventos de saudação configurado.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-210">hello job will read data from hello event hub that you set up.</span></span> 

### <a name="create-hello-job"></a><span data-ttu-id="8cfbe-211">Criar trabalho de saudação</span><span class="sxs-lookup"><span data-stu-id="8cfbe-211">Create hello job</span></span> 

1. <span data-ttu-id="8cfbe-212">No portal do Azure de Olá, clique em **novo** > **Internet das coisas** > **trabalho do Stream Analytics**.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-212">In hello Azure portal, click **New** > **Internet of Things** > **Stream Analytics job**.</span></span>

2. <span data-ttu-id="8cfbe-213">Nome do trabalho Olá `sa_frauddetection_job_demo`, especifique uma assinatura, o grupo de recursos e o local.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-213">Name hello job `sa_frauddetection_job_demo`, specify a subscription, resource group, and location.</span></span>

    <span data-ttu-id="8cfbe-214">É uma boa ideia tooplace Olá trabalho e hello hub de evento Olá mesma região para melhor desempenho e, portanto, que não é necessário pagar tootransfer dados entre regiões.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-214">It's a good idea tooplace hello job and hello event hub in hello same region for best performance and so that you don't pay tootransfer data between regions.</span></span>

    ![Criar um novo trabalho do Stream Analytics](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-sa-job-new-portal.png)

3. <span data-ttu-id="8cfbe-216">Clique em **Criar**.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-216">Click **Create**.</span></span>

    <span data-ttu-id="8cfbe-217">Olá trabalho é criado e o portal de saudação exibe detalhes do trabalho.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-217">hello job is created and hello portal displays job details.</span></span> <span data-ttu-id="8cfbe-218">Nada ainda estiver em execução, no entanto, você tem o trabalho de saudação tooconfigure antes que ele possa ser iniciado.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-218">Nothing is running yet, though—you have tooconfigure hello job before it can be started.</span></span>

### <a name="configure-job-input"></a><span data-ttu-id="8cfbe-219">Configurar entrada de trabalho</span><span class="sxs-lookup"><span data-stu-id="8cfbe-219">Configure job input</span></span>

1. <span data-ttu-id="8cfbe-220">No painel de saudação ou hello **todos os recursos** folha, encontre e selecione Olá `sa_frauddetection_job_demo` trabalho do Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-220">In hello dashboard or hello **All resources** blade, find and select hello `sa_frauddetection_job_demo` Stream Analytics job.</span></span> 
2. <span data-ttu-id="8cfbe-221">Em Olá **trabalho topologia** seção Olá folha de trabalho do Stream Analytics, clique em Olá **entrada** caixa.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-221">In hello **Job Topology** section of hello Stream Analytics job blade, click hello **Input** box.</span></span>

    ![Caixa de entrada em topologia na folha do hello análise de fluxo de trabalho](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-input-box-new-portal.png)
 
3. <span data-ttu-id="8cfbe-223">Clique em  **+ &nbsp;adicionar** e, em seguida, preencha a folha Olá com estes valores:</span><span class="sxs-lookup"><span data-stu-id="8cfbe-223">Click **+&nbsp;Add** and then fill out hello blade with these values:</span></span>

    * <span data-ttu-id="8cfbe-224">**Alias de entrada**: Use o nome de saudação `CallStream`.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-224">**Input alias**: Use hello name `CallStream`.</span></span> <span data-ttu-id="8cfbe-225">Se você usar um nome diferente, anote-o porque você precisará dele depois.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-225">If you use a different name, make a note of it because you'll need it later.</span></span>
    * <span data-ttu-id="8cfbe-226">**Tipo de Origem**: Selecione **Fluxo de Dados**.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-226">**Source type**: Select **Data stream**.</span></span> <span data-ttu-id="8cfbe-227">(**Dados de referência** refere-se a dados de pesquisa toostatic, que você não usar neste tutorial.)</span><span class="sxs-lookup"><span data-stu-id="8cfbe-227">(**Reference data** refers toostatic lookup data, which you won't use in this tutorial.)</span></span>
    * <span data-ttu-id="8cfbe-228">**Origem**: Selecione **hub de eventos**.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-228">**Source**: Select **Event hub**.</span></span>
    * <span data-ttu-id="8cfbe-229">**Opção de importação**: Selecione **Usar hub de evento da assinatura atual**.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-229">**Import option**: Select **Use event hub from current subscription**.</span></span> 
    * <span data-ttu-id="8cfbe-230">**Namespace de barramento de serviço**: selecione Olá namespace de hub de eventos que você criou anteriormente (`<yourname>-eh-ns-demo`).</span><span class="sxs-lookup"><span data-stu-id="8cfbe-230">**Service bus namespace**: Select hello event hub namespace that you created earlier (`<yourname>-eh-ns-demo`).</span></span>
    * <span data-ttu-id="8cfbe-231">**Hub de eventos**: hub de eventos Olá selecione que você criou anteriormente (`sa-eh-frauddetection-demo`).</span><span class="sxs-lookup"><span data-stu-id="8cfbe-231">**Event hub**: Select hello event hub that you created earlier (`sa-eh-frauddetection-demo`).</span></span>
    * <span data-ttu-id="8cfbe-232">**Nome de política do hub de evento**: selecione a política de acesso de saudação que você criou anteriormente (`sa-policy-manage-demo`).</span><span class="sxs-lookup"><span data-stu-id="8cfbe-232">**Event hub policy name**: Select hello access policy that you created earlier (`sa-policy-manage-demo`).</span></span>

    ![Criar nova entrada para o trabalho de Streaming Analytics](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-sa-input-new-portal.png)

4. <span data-ttu-id="8cfbe-234">Clique em **Criar**.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-234">Click **Create**.</span></span>

## <a name="create-queries-tootransform-real-time-data"></a><span data-ttu-id="8cfbe-235">Criar consultas de dados em tempo real tootransform</span><span class="sxs-lookup"><span data-stu-id="8cfbe-235">Create queries tootransform real-time data</span></span>

<span data-ttu-id="8cfbe-236">Neste ponto, você tem um trabalho do Stream Analytics configurar tooread um fluxo de dados de entrada.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-236">At this point, you have a Stream Analytics job set up tooread an incoming data stream.</span></span> <span data-ttu-id="8cfbe-237">Olá próxima etapa é toocreate uma transformação que analisa dados de saudação em tempo real.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-237">hello next step is toocreate a transformation that analyzes hello data in real time.</span></span> <span data-ttu-id="8cfbe-238">Você pode fazer isso criando uma consulta.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-238">You do this by creating a query.</span></span> <span data-ttu-id="8cfbe-239">O Stream Analytics dá suporte a um modelo de consulta simples e declarativo para descrever as transformações para processamento em tempo real.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-239">Stream Analytics supports a simple, declarative query model that describes transformations for real-time processing.</span></span> <span data-ttu-id="8cfbe-240">consultas de saudação usam uma linguagem semelhante a SQL que tem algumas análises de toostream específico de extensões.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-240">hello queries use a SQL-like language that has some extensions specific toostream analytics.</span></span> 

<span data-ttu-id="8cfbe-241">Uma consulta muito simple simplesmente pode ler todos os dados de entrada hello.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-241">A very simple query might simply read all hello incoming data.</span></span> <span data-ttu-id="8cfbe-242">No entanto, geralmente você criar consultas que procuram dados específicos ou relações nos dados de saudação.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-242">However, you often create queries that look for specific data or for relationships in hello data.</span></span> <span data-ttu-id="8cfbe-243">Esta seção do tutorial hello, você criará e testar várias consultas toolearn algumas maneiras em que você pode transformar um fluxo de entrada para análise.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-243">In this section of hello tutorial, you will create and test several queries toolearn a few ways in which you can transform an input stream for analysis.</span></span> 

<span data-ttu-id="8cfbe-244">consultas Olá criadas aqui apenas exibirá a tela de toohello hello dados transformados.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-244">hello queries you create here will just display hello transformed data toohello screen.</span></span> <span data-ttu-id="8cfbe-245">Em uma seção posterior, você vai configurar um coletor de saída e uma consulta que grava Olá dados transformados toothat coletor.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-245">In a later section, you'll configure an output sink and a query that writes hello transformed data toothat sink.</span></span>

<span data-ttu-id="8cfbe-246">toolearn mais sobre a linguagem hello, consulte Olá [referência de linguagem do Azure Stream Analytics consulta](https://msdn.microsoft.com/library/dn834998.aspx).</span><span class="sxs-lookup"><span data-stu-id="8cfbe-246">toolearn more about hello language, see hello [Azure Stream Analytics Query Language Reference](https://msdn.microsoft.com/library/dn834998.aspx).</span></span>

### <a name="get-sample-data-for-testing-queries"></a><span data-ttu-id="8cfbe-247">Obter dados de exemplo para teste de consultas</span><span class="sxs-lookup"><span data-stu-id="8cfbe-247">Get sample data for testing queries</span></span>

<span data-ttu-id="8cfbe-248">Olá TelcoGenerator aplicativo está enviando o hub de eventos de toohello de registros de chamada e o trabalho do Stream Analytics é configurado tooread de hub de eventos de saudação.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-248">hello TelcoGenerator app is sending call records toohello event hub, and your Stream Analytics job is configured tooread from hello event hub.</span></span> <span data-ttu-id="8cfbe-249">Você pode usar uma consulta tootest Olá trabalho toomake-se de que está lendo corretamente.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-249">You can use a query tootest hello job toomake sure that it's reading correctly.</span></span> <span data-ttu-id="8cfbe-250">muito testar uma consulta em Olá console do Azure, você precisa de dados de exemplo.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-250">too test a query in hello Azure console, you need sample data.</span></span> <span data-ttu-id="8cfbe-251">Para este passo a passo, você vai extrair dados de exemplo de fluxo de saudação que vêm no hub de eventos de saudação.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-251">For this walkthrough, you'll extract sample data from hello stream that's coming into hello event hub.</span></span>

1. <span data-ttu-id="8cfbe-252">Certifique-se de que TelcoGenerator o aplicativo hello está em execução e gera os registros de chamada.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-252">Make sure that hello TelcoGenerator app is running and producing call records.</span></span>
2. <span data-ttu-id="8cfbe-253">No portal de hello, retorne toohello folha de trabalho de análise de fluxo contínuo.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-253">In hello portal, return toohello Streaming Analytics job blade.</span></span> <span data-ttu-id="8cfbe-254">(Se você fechou folha hello, procure `sa_frauddetection_job_demo` em Olá **todos os recursos** folha.)</span><span class="sxs-lookup"><span data-stu-id="8cfbe-254">(If you closed hello blade, search for `sa_frauddetection_job_demo` in hello **All resources** blade.)</span></span>
3. <span data-ttu-id="8cfbe-255">Clique em Olá **consulta** caixa.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-255">Click hello **Query** box.</span></span> <span data-ttu-id="8cfbe-256">Azure lista entradas hello e saídas que são configuradas para trabalho hello e permite que você crie uma consulta que permite transform o fluxo de entrada hello como saída toohello é enviado.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-256">Azure lists hello inputs and outputs that are configured for hello job, and lets you create a query that lets you transform hello input stream as it is sent toohello output.</span></span>
4. <span data-ttu-id="8cfbe-257">Em hello **consulta** folha, clique em Olá pontos próximo toohello `CallStream` de entrada e, em seguida, selecione **dados de entrada de exemplo**.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-257">In hello **Query** blade, click hello dots next toohello `CallStream` input and then select **Sample data from input**.</span></span>

    ![Dados de exemplo do menu Opções toouse para Olá análise de fluxo de trabalho da entrada, "Dados de exemplo de entrada" selecionados](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-sample-data-from-input.png)

    <span data-ttu-id="8cfbe-259">Isso abrirá uma folha que permite que você especifique a quantidade tooget de dados de exemplo, definida em termos de quanto tempo o fluxo de entrada hello tooread.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-259">This opens a blade that lets you specify how much sample data tooget, defined in terms of how long tooread hello input stream.</span></span>

5. <span data-ttu-id="8cfbe-260">Definir **minutos** too3 e, em seguida, clique em **Okey**.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-260">Set **Minutes** too3 and then click **OK**.</span></span> 
    
    ![Opções de amostragem de fluxo de entrada hello, com "3 minutos" selecionados.](./media/stream-analytics-real-time-fraud-detection/stream-analytics-input-create-sample-data.png)

    <span data-ttu-id="8cfbe-262">O Azure amostras de amostra de dados de fluxo de entrada hello de 3 minutos e notifica você quando os dados de exemplo hello estão prontos.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-262">Azure samples 3 minutes' worth of data from hello input stream and notifies you when hello sample data is ready.</span></span> <span data-ttu-id="8cfbe-263">(Isso pode levar um tempo.)</span><span class="sxs-lookup"><span data-stu-id="8cfbe-263">(This takes a short while.)</span></span> 

<span data-ttu-id="8cfbe-264">dados de exemplo Hello são armazenados temporariamente e estão disponíveis enquanto janela de consulta Olá aberto.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-264">hello sample data is stored temporarily and is available while you have hello query window open.</span></span> <span data-ttu-id="8cfbe-265">Se você fechar a janela de consulta hello, dados de exemplo hello serão descartados e você terá toocreate um novo conjunto de dados de exemplo.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-265">If you close hello query window, hello sample data is discarded, and you'll have toocreate a new set of sample data.</span></span> 

<span data-ttu-id="8cfbe-266">Como alternativa, você pode obter um arquivo. JSON que contém dados de exemplo de [do GitHub](https://github.com/Azure/azure-stream-analytics/blob/master/Sample%20Data/telco.json)e, em seguida, carregar esse toouse de arquivo. JSON como dados de exemplo para Olá `CallStream` entrada.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-266">As an alternative, you can get a .json file that has sample data in it [from GitHub](https://github.com/Azure/azure-stream-analytics/blob/master/Sample%20Data/telco.json), and then upload that .json file toouse as sample data for hello `CallStream` input .</span></span> 

### <a name="test-using-a-pass-through-query"></a><span data-ttu-id="8cfbe-267">Teste usando uma consulta de passagem</span><span class="sxs-lookup"><span data-stu-id="8cfbe-267">Test using a pass-through query</span></span>

<span data-ttu-id="8cfbe-268">Se você quiser tooarchive todos os eventos, você pode usar tooread uma consulta de passagem todos os campos de Olá na carga de saudação do evento hello.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-268">If you want tooarchive every event, you can use a pass-through query tooread all hello fields in hello payload of hello event.</span></span>

1. <span data-ttu-id="8cfbe-269">Na janela de consulta hello, insira esta consulta:</span><span class="sxs-lookup"><span data-stu-id="8cfbe-269">In hello query window, enter this query:</span></span>

        SELECT 
            *
        FROM 
            CallStream

    >[!NOTE]
    ><span data-ttu-id="8cfbe-270">Assim como acontece com SQL, as palavras-chave não diferenciam maiúsculas de minúsculas e espaço em branco não é significativo.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-270">As with SQL, keywords are not case sensitive, and whitespace is not significant.</span></span>

    <span data-ttu-id="8cfbe-271">Nesta consulta, `CallStream` é Olá alias que você especificou ao criar entrada hello.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-271">In this query, `CallStream` is hello alias that you specified when you created hello input.</span></span> <span data-ttu-id="8cfbe-272">Se você tiver usado um alias diferente, use esse nome.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-272">If you used a different alias, use that name instead.</span></span>

2. <span data-ttu-id="8cfbe-273">Clique em **Testar**.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-273">Click **Test**.</span></span>

    <span data-ttu-id="8cfbe-274">trabalho de análise de fluxo de saudação executa a consulta de saudação em dados de exemplo hello e exibe a saída de hello na parte inferior da saudação da janela de saudação.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-274">hello Stream Analytics job runs hello query against hello sample data and displays hello output at hello bottom of hello window.</span></span> <span data-ttu-id="8cfbe-275">Isso indica que o hub de eventos hello e trabalho de análise de fluxo contínuo de saudação estão configurados corretamente.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-275">This tells you that hello event hub and hello Streaming Analytics job are configured correctly.</span></span> <span data-ttu-id="8cfbe-276">(Conforme observado, mais tarde você criará um coletor de saída que Olá consulta possa gravar dados.)</span><span class="sxs-lookup"><span data-stu-id="8cfbe-276">(As noted, later you'll create an output sink that hello query can write data to.)</span></span>

    ![Saída de trabalho do Stream Analytics, mostrando 73 registros gerados](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output.png)

    <span data-ttu-id="8cfbe-278">número exato de saudação de registros que você vê dependerá quantos registros foram capturados em sua amostra de 3 minutos.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-278">hello exact number of records you see will depend on how many records were captured in your 3-minute sample.</span></span>
 
### <a name="reduce-hello-number-of-fields-using-a-column-projection"></a><span data-ttu-id="8cfbe-279">Reduzir o número Olá campos usando uma projeção de coluna</span><span class="sxs-lookup"><span data-stu-id="8cfbe-279">Reduce hello number of fields using a column projection</span></span>

<span data-ttu-id="8cfbe-280">Em muitos casos, a análise não precisa de todas as colunas de saudação do fluxo de entrada hello.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-280">In many cases, your analysis doesn't need all hello columns from hello input stream.</span></span> <span data-ttu-id="8cfbe-281">Você pode usar um tooproject consulta um conjunto menor de retornado de campos que na consulta de passagem de saudação.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-281">You can use a query tooproject a smaller set of returned fields than in hello pass-through query.</span></span>

1. <span data-ttu-id="8cfbe-282">Alterar consulta Olá Olá código editor toohello seguinte:</span><span class="sxs-lookup"><span data-stu-id="8cfbe-282">Change hello query in hello code editor toohello following:</span></span>

        SELECT CallRecTime, SwitchNum, CallingIMSI, CallingNum, CalledNum 
        FROM 
            CallStream

2. <span data-ttu-id="8cfbe-283">Clique em **Testar** novamente.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-283">Click **Test** again.</span></span> 

    ![Saída de trabalho do Stream Analytics para projeção, mostrando 25 registros gerados](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output-projection.png)
 
### <a name="count-incoming-calls-by-region-tumbling-window-with-aggregation"></a><span data-ttu-id="8cfbe-285">Contagem de chamadas de entrada por região: janela em cascata com agregação</span><span class="sxs-lookup"><span data-stu-id="8cfbe-285">Count incoming calls by region: Tumbling window with aggregation</span></span>

<span data-ttu-id="8cfbe-286">Suponha que você deseja toocount Olá número de chamadas por região.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-286">Suppose you want toocount hello number of incoming calls per region.</span></span> <span data-ttu-id="8cfbe-287">No fluxo de dados, quando você quiser tooperform funções de agregação como contagem, é necessário toosegment Olá fluxo em unidades temporal (uma vez que o próprio fluxo de dados Olá é efetivamente uma infinidade).</span><span class="sxs-lookup"><span data-stu-id="8cfbe-287">In streaming data, when you want tooperform aggregate functions like counting, you need toosegment hello stream into temporal units (since hello data stream itself is effectively endless).</span></span> <span data-ttu-id="8cfbe-288">Você faz isso usando a [função de janela](stream-analytics-window-functions.md) do Streaming Analytics.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-288">You do this using a Streaming Analytics [window function](stream-analytics-window-functions.md).</span></span> <span data-ttu-id="8cfbe-289">Em seguida, você pode trabalhar com dados hello dentro dessa janela como uma unidade.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-289">You can then work with hello data inside that window as a unit.</span></span>

<span data-ttu-id="8cfbe-290">Para essa transformação, você deseja uma sequência de janelas temporais que não se sobrepõem — cada janela terá um conjunto discreto de dados que você pode agrupar e agregar.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-290">For this transformation, you want a sequence of temporal windows that don't overlap—each window will have a discrete set of data that you can group and aggregate.</span></span> <span data-ttu-id="8cfbe-291">Esse tipo de janela é chamado tooas um *janela em cascata* .</span><span class="sxs-lookup"><span data-stu-id="8cfbe-291">This type of window is referred tooas a *Tumbling window* .</span></span> <span data-ttu-id="8cfbe-292">Na janela em cascata de saudação, você pode obter uma contagem de chamadas de entrada hello agrupados por `SwitchNum`, que representa o país Olá que originou a chamada de saudação.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-292">Within hello Tumbling window, you can get a count of hello incoming calls grouped by `SwitchNum`, which represents hello country where hello call originated.</span></span> 

1. <span data-ttu-id="8cfbe-293">Alterar consulta Olá Olá código editor toohello seguinte:</span><span class="sxs-lookup"><span data-stu-id="8cfbe-293">Change hello query in hello code editor toohello following:</span></span>

        SELECT 
            System.Timestamp as WindowEnd, SwitchNum, COUNT(*) as CallCount 
        FROM
            CallStream TIMESTAMP BY CallRecTime 
        GROUP BY TUMBLINGWINDOW(s, 5), SwitchNum

    <span data-ttu-id="8cfbe-294">Essa consulta usa Olá `Timestamp By` palavra-chave em Olá `FROM` cláusula toospecify qual campo de carimbo de hora no hello janela em cascata do fluxo toouse toodefine Olá de entrada.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-294">This query uses hello `Timestamp By` keyword in hello `FROM` clause toospecify which timestamp field in hello input stream toouse toodefine hello Tumbling window.</span></span> <span data-ttu-id="8cfbe-295">Nesse caso, janela Olá divide dados saudação em segmentos por Olá `CallRecTime` campo em cada registro.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-295">In this case, hello window divides hello data into segments by hello `CallRecTime` field in each record.</span></span> <span data-ttu-id="8cfbe-296">(Se nenhum campo for especificado, Olá windowing operação usa tempo de saudação que cada evento chega no hub de eventos de saudação.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-296">(If no field is specified, hello windowing operation uses hello time that each event arrives at hello event hub.</span></span> <span data-ttu-id="8cfbe-297">Consulte "Hora de chegada versus hora do aplicativo" na [Referência de linguagem de consulta de Stream Analytics](https://msdn.microsoft.com/library/azure/dn834998.aspx).</span><span class="sxs-lookup"><span data-stu-id="8cfbe-297">See "Arrival Time Vs Application Time" in [Stream Analytics Query Language Reference](https://msdn.microsoft.com/library/azure/dn834998.aspx).</span></span> 

    <span data-ttu-id="8cfbe-298">projeção de saudação inclui `System.Timestamp`, que retorna um carimbo de hora de término hello de cada janela.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-298">hello projection includes `System.Timestamp`, which returns a timestamp for hello end of each window.</span></span> 

    <span data-ttu-id="8cfbe-299">toospecify que você deseja toouse uma janela em cascata, que você usar o hello [TUMBLINGWINDOW](https://msdn.microsoft.com/library/dn835055.aspx) função hello `GROUP BY `cláusula.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-299">toospecify that you want toouse a Tumbling window, you use hello [TUMBLINGWINDOW](https://msdn.microsoft.com/library/dn835055.aspx) function in hello `GROUP BY `clause.</span></span> <span data-ttu-id="8cfbe-300">Função hello, especifique uma unidade de tempo (em qualquer lugar de um dia de tooa microssegundos) e um tamanho de janela (quantas unidades).</span><span class="sxs-lookup"><span data-stu-id="8cfbe-300">In hello function, you specify a time unit (anywhere from a microsecond tooa day) and a window size (how many units).</span></span> <span data-ttu-id="8cfbe-301">Neste exemplo, janela em cascata de saudação consiste em intervalos de 5 segundos, para que você obterá uma contagem por país para o valor de cada 5 segundos de chamadas.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-301">In this example, hello Tumbling window consists of 5-second intervals, so you will get a count by country for every 5 seconds' worth of calls.</span></span>

2. <span data-ttu-id="8cfbe-302">Clique em **Testar** novamente.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-302">Click **Test** again.</span></span> <span data-ttu-id="8cfbe-303">Nos resultados de hello, observe que os Olá carimbos de hora em **WindowEnd** estão em incrementos de 5 segundos.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-303">In hello results, notice that hello timestamps under **WindowEnd** are in 5-second increments.</span></span>

    ![Saída de trabalho do Stream Analytics para agregação, mostrando 13 registros gerados](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output-aggregation.png)
 
### <a name="detect-sim-fraud-using-a-self-join"></a><span data-ttu-id="8cfbe-305">Detectar fraudes SIM usando uma autojunção</span><span class="sxs-lookup"><span data-stu-id="8cfbe-305">Detect SIM fraud using a self-join</span></span>

<span data-ttu-id="8cfbe-306">Neste exemplo, pode consideramos uso fraudulento toobe chamadas que se originam Olá mesmo usuário, mas em diferentes locais dentro de 5 segundos uma da outra.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-306">For this example, we can consider fraudulent usage toobe calls that originate from hello same user but in different locations within 5 seconds of one another.</span></span> <span data-ttu-id="8cfbe-307">Por exemplo, hello mesmo usuário não é possível legitimamente fazer uma chamada do hello dos EUA e Austrália no hello simultaneamente.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-307">For example, hello same user can't legitimately make a call from hello US and Australia at hello same time.</span></span> 

<span data-ttu-id="8cfbe-308">toocheck para esses casos, você pode usar uma autojunção da saudação streaming dados toojoin Olá fluxo tooitself com base em Olá `CallRecTime` valor.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-308">toocheck for these cases, you can use a self-join of hello streaming data toojoin hello stream tooitself based on hello `CallRecTime` value.</span></span> <span data-ttu-id="8cfbe-309">Você pode, em seguida, procure chamada registra onde hello `CallingIMSI` valor (número de origem Olá) é Olá mesmo, mas Olá `SwitchNum` valor (país de origem) não é Olá mesmo.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-309">You can then look for call records where hello `CallingIMSI` value (hello originating number) is hello same, but hello `SwitchNum` value (country of origin) is not hello same.</span></span>

<span data-ttu-id="8cfbe-310">Quando você usa uma associação com o fluxo de dados, junção Olá deve fornecer alguns limites no hello quanto a correspondência de linhas podem ser separados no tempo.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-310">When you use a join with streaming data, hello join must provide some limits on how far hello matching rows can be separated in time.</span></span> <span data-ttu-id="8cfbe-311">(Como observado anteriormente, Olá fluxo de dados é efetivamente uma infinidade.) limites de tempo de saudação para relação Olá são especificados dentro Olá `ON` cláusula de junção hello, usando Olá `DATEDIFF` função.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-311">(As noted earlier, hello streaming data is effectively endless.) hello time bounds for hello relationship are specified inside hello `ON` clause of hello join, using hello `DATEDIFF` function .</span></span> <span data-ttu-id="8cfbe-312">Nesse caso, a junção de Olá é baseada em um intervalo de 5 segundos de dados de chamada.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-312">In this case, hello join is based on a 5-second interval of call data .</span></span>

1. <span data-ttu-id="8cfbe-313">Alterar consulta Olá Olá código editor toohello seguinte:</span><span class="sxs-lookup"><span data-stu-id="8cfbe-313">Change hello query in hello code editor toohello following:</span></span> 

        SELECT  System.Timestamp as Time, 
            CS1.CallingIMSI, 
            CS1.CallingNum as CallingNum1, 
            CS2.CallingNum as CallingNum2, 
            CS1.SwitchNum as Switch1, 
            CS2.SwitchNum as Switch2 
        FROM CallStream CS1 TIMESTAMP BY CallRecTime 
            JOIN CallStream CS2 TIMESTAMP BY CallRecTime 
            ON CS1.CallingIMSI = CS2.CallingIMSI 
            AND DATEDIFF(ss, CS1, CS2) BETWEEN 1 AND 5 
        WHERE CS1.SwitchNum != CS2.SwitchNum

    <span data-ttu-id="8cfbe-314">Essa consulta é como qualquer associação SQL, exceto Olá `DATEDIFF` função na junção hello.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-314">This query is like any SQL join except for hello `DATEDIFF` function in hello join.</span></span> <span data-ttu-id="8cfbe-315">Esta é uma versão de `DATEDIFF` tooStreaming específico análise, e ele deve aparecer no hello `ON...BETWEEN` cláusula.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-315">This is a version of `DATEDIFF` that's specific tooStreaming Analytics, and it must appear in hello `ON...BETWEEN` clause.</span></span> <span data-ttu-id="8cfbe-316">parâmetros de saudação são aliases de saudação de duas fontes Olá para junção Olá e uma unidade de tempo (segundos neste exemplo).</span><span class="sxs-lookup"><span data-stu-id="8cfbe-316">hello parameters are a time unit (seconds in this example) and hello aliases of hello two sources for hello join.</span></span> <span data-ttu-id="8cfbe-317">(Isso é diferente do hello SQL padrão `DATEDIFF` função.)</span><span class="sxs-lookup"><span data-stu-id="8cfbe-317">(This is different from hello standard SQL `DATEDIFF` function.)</span></span> 

    <span data-ttu-id="8cfbe-318">Olá `WHERE` cláusula inclui condição Olá sinalizadores chamada fraudulentas Olá: opções de origem Olá não são Olá mesmo.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-318">hello `WHERE` clause includes hello condition that flags hello fraudulent call: hello originating switches are not hello same.</span></span> 

2. <span data-ttu-id="8cfbe-319">Clique em **Testar** novamente.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-319">Click **Test** again.</span></span> 

    ![Saída de trabalho do Stream Analytics para autojunção, mostrando 6 registros gerados](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output-self-join.png)

3. <span data-ttu-id="8cfbe-321">Clique em **Salvar**.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-321">Click **Save**.</span></span> <span data-ttu-id="8cfbe-322">Isso salva a consulta de associação a mesmo de saudação como parte do trabalho de análise de fluxo contínuo de saudação.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-322">This saves hello self-join query as part of hello Streaming Analytics job.</span></span> <span data-ttu-id="8cfbe-323">(Ele não salva os dados de exemplo hello.)</span><span class="sxs-lookup"><span data-stu-id="8cfbe-323">(It doesn't save hello sample data.)</span></span>

    ![Salvar o trabalho do Stream Analytics](./media/stream-analytics-real-time-fraud-detection/stream-analytics-query-editor-save-button-new-portal.png)

## <a name="create-an-output-sink-toostore-transformed-data"></a><span data-ttu-id="8cfbe-325">Criar um coletor de saída toostore transformado dados</span><span class="sxs-lookup"><span data-stu-id="8cfbe-325">Create an output sink toostore transformed data</span></span>

<span data-ttu-id="8cfbe-326">Você definiu um fluxo de eventos, uma entrada tooingest do hub de eventos e uma consulta tooperform uma transformação em fluxo hello.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-326">You've defined an event stream, an event hub input tooingest events, and a query tooperform a transformation over hello stream.</span></span> <span data-ttu-id="8cfbe-327">Olá última etapa é toodefine um coletor de saída para o trabalho de saudação — ou seja, uma saudação de toowrite local transformado fluxo para.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-327">hello last step is toodefine an output sink for hello job—that is, a place toowrite hello transformed stream to.</span></span> 

<span data-ttu-id="8cfbe-328">Você pode usar muitos recursos como coletores de saída — um banco de dados do SQL Server, o armazenamento de tabela, armazenamento do Data Lake, Power BI e até mesmo outro hub de eventos.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-328">You can use many resources as output sinks—a SQL Server database, table storage, Data Lake storage, Power BI, and even another event hub.</span></span> <span data-ttu-id="8cfbe-329">Para este tutorial, você escreverá Olá fluxo tooAzure armazenamento de Blob, que é uma opção típica para coletar informações de evento para análise posterior, já que inclua dados não estruturados.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-329">For this tutorial, you'll write hello stream tooAzure Blob Storage, which is a typical choice for collecting event information for later analysis, since it accommodates unstructured data .</span></span>

<span data-ttu-id="8cfbe-330">Se você tiver uma conta de armazenamento de Blobs existente, poderá usá-la.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-330">If you have an existing blob storage account, you can use that.</span></span> <span data-ttu-id="8cfbe-331">Para este tutorial, vamos mostrar como toocreate um nova conta de armazenamento para este tutorial.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-331">For this tutorial, we'll show you how toocreate a new storage account just for this tutorial.</span></span>

### <a name="create-an-azure-blob-storage-account"></a><span data-ttu-id="8cfbe-332">Criar uma conta de Armazenamento de Blobs do Azure</span><span class="sxs-lookup"><span data-stu-id="8cfbe-332">Create an Azure Blob Storage account</span></span>

1. <span data-ttu-id="8cfbe-333">Olá portal do Azure, retorne toohello folha de trabalho de análise de fluxo contínuo.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-333">In hello Azure portal, return toohello Streaming Analytics job blade.</span></span> <span data-ttu-id="8cfbe-334">(Se você fechou folha hello, procure `sa_frauddetection_job_demo` em Olá **todos os recursos** folha.)</span><span class="sxs-lookup"><span data-stu-id="8cfbe-334">(If you closed hello blade, search for `sa_frauddetection_job_demo` in hello **All resources** blade.)</span></span>
2. <span data-ttu-id="8cfbe-335">Em Olá **trabalho topologia** seção, clique em Olá **saída** caixa.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-335">In hello **Job Topology** section, click hello **Output** box.</span></span> 
3. <span data-ttu-id="8cfbe-336">Em Olá **saídas** folha, clique em  **+ &nbsp;adicionar** e, em seguida, preencha a folha Olá com estes valores:</span><span class="sxs-lookup"><span data-stu-id="8cfbe-336">In hello **Outputs** blade, click **+&nbsp;Add** and then fill out hello blade with these values:</span></span>

    * <span data-ttu-id="8cfbe-337">**Alias de saída**: Use o nome de saudação `CallStream-FraudulentCalls`.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-337">**Output alias**: Use hello name `CallStream-FraudulentCalls`.</span></span> 
    * <span data-ttu-id="8cfbe-338">**Coletor**: selecione **Armazenamento de blobs**.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-338">**Sink**: Select **Blob storage**.</span></span>
    * <span data-ttu-id="8cfbe-339">**Opções de importação**: Selecione **Usar armazenamento de blobs da assinatura atual**.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-339">**Import options**: Select **Use blob storage from current subscription**.</span></span>
    * <span data-ttu-id="8cfbe-340">**Conta de armazenamento**.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-340">**Storage account**.</span></span> <span data-ttu-id="8cfbe-341">Selecione **Criar nova conta de armazenamento.**</span><span class="sxs-lookup"><span data-stu-id="8cfbe-341">Select **Create new storage account.**</span></span>
    * <span data-ttu-id="8cfbe-342">**Conta de armazenamento** (segunda caixa).</span><span class="sxs-lookup"><span data-stu-id="8cfbe-342">**Storage account** (second box).</span></span> <span data-ttu-id="8cfbe-343">Digite `YOURNAMEsademo`, onde `YOURNAME` é o seu nome ou outra cadeia de caracteres exclusiva.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-343">Enter `YOURNAMEsademo`, where `YOURNAME` is your name or another unique string.</span></span> <span data-ttu-id="8cfbe-344">nome de saudação pode usar apenas letras minúsculas e números e deve ser exclusivo no Azure.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-344">hello name can use only lowercase letters and numbers, and it must be unique across Azure.</span></span> 
    * <span data-ttu-id="8cfbe-345">**Contêiner**.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-345">**Container**.</span></span> <span data-ttu-id="8cfbe-346">Digite `sa-fraudulentcalls-demo`.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-346">Enter `sa-fraudulentcalls-demo`.</span></span>
    <span data-ttu-id="8cfbe-347">nome de conta de armazenamento Hello e o nome do contêiner são tooprovide usado junto um URI para o armazenamento de blob hello, como este:</span><span class="sxs-lookup"><span data-stu-id="8cfbe-347">hello storage account name and container name are used together tooprovide a URI for hello blob storage, like this:</span></span> 

    `http://yournamesademo.blob.core.windows.net/sa-fraudulentcalls-demo/...`
    
    ![Folha "Nova saída" para trabalho do Stream Analytics](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-output-blob-storage-new-console.png)
    
4. <span data-ttu-id="8cfbe-349">Clique em **Criar**.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-349">Click **Create**.</span></span> 

    <span data-ttu-id="8cfbe-350">Azure cria a conta de armazenamento hello e gera uma chave automaticamente.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-350">Azure creates hello storage account and generates a key automatically.</span></span> 

5. <span data-ttu-id="8cfbe-351">Olá fechar **saídas** folha.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-351">Close hello **Outputs** blade.</span></span> 

## <a name="start-hello-streaming-analytics-job"></a><span data-ttu-id="8cfbe-352">Iniciar Olá análise de fluxo de trabalho</span><span class="sxs-lookup"><span data-stu-id="8cfbe-352">Start hello Streaming Analytics job</span></span>

<span data-ttu-id="8cfbe-353">trabalho de saudação agora está configurado.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-353">hello job is now configured.</span></span> <span data-ttu-id="8cfbe-354">Você especificou uma entrada (hub de eventos de saudação), uma transformação (Olá toolook de consulta para chamadas fraudulentas) e uma saída (armazenamento de blob).</span><span class="sxs-lookup"><span data-stu-id="8cfbe-354">You've specified an input (hello event hub), a transformation (hello query toolook for fraudulent calls), and an output (blob storage).</span></span> <span data-ttu-id="8cfbe-355">Agora você pode iniciar o trabalho de saudação.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-355">You can now start hello job.</span></span> 

1. <span data-ttu-id="8cfbe-356">Certifique-se de saudação TelcoGenerator aplicativo está em execução.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-356">Make sure hello TelcoGenerator app is running.</span></span>

2. <span data-ttu-id="8cfbe-357">Na folha de trabalho hello, clique em **iniciar**.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-357">In hello job blade, click **Start**.</span></span>

    ![Iniciar o trabalho de análise de fluxo de saudação](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-start-output.png)

3. <span data-ttu-id="8cfbe-359">Em Olá **Iniciar trabalho** folha para a hora de início saída trabalho, selecione **agora**.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-359">In hello **Start job** blade, for Job output start time, select **Now**.</span></span> 

4. <span data-ttu-id="8cfbe-360">Clique em **Iniciar**.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-360">Click **Start**.</span></span> 

    ![Folha "Iniciar o trabalho" para o trabalho de análise de fluxo de saudação](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-start-job-blade.png)

    <span data-ttu-id="8cfbe-362">Azure notifica quando o trabalho Olá foi iniciado e, na folha de trabalho hello, status de saudação é exibido como **executando**.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-362">Azure notifies you when hello job has started, and in hello job blade, hello status is displayed as **Running**.</span></span>

    ![Status do trabalho de Stream Analytics, mostrando "Em execução"](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-running-status.png)
    

## <a name="examine-hello-transformed-data"></a><span data-ttu-id="8cfbe-364">Examine os dados transformado de saudação</span><span class="sxs-lookup"><span data-stu-id="8cfbe-364">Examine hello transformed data</span></span>

<span data-ttu-id="8cfbe-365">Agora você tem um trabalho de Streaming Analytics completo.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-365">You now have a complete Streaming Analytics job.</span></span> <span data-ttu-id="8cfbe-366">trabalho de saudação é examinando um fluxo de metadados de chamada telefônica, procurando fraudulentas chamadas telefônicas em tempo real e gravar as informações sobre essas chamadas fraudulentas toostorage.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-366">hello job is examining a stream of phone call metadata, looking for fraudulent phone calls in real time, and writing information about those fraudulent calls toostorage.</span></span> 

<span data-ttu-id="8cfbe-367">toocomplete neste tutorial, talvez você queira toolook dados Olá sejam capturados pelo trabalho de análise de fluxo contínuo de saudação.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-367">toocomplete this tutorial, you might want toolook at hello data being captured by hello Streaming Analytics job.</span></span> <span data-ttu-id="8cfbe-368">dados Hello está sendo gravados tooAzure armazenamento de Blog em partes (arquivos).</span><span class="sxs-lookup"><span data-stu-id="8cfbe-368">hello data is being written tooAzure Blog Storage in chunks (files).</span></span> <span data-ttu-id="8cfbe-369">Você pode usar qualquer ferramenta que leia o armazenamento de Blobs do Azure.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-369">You can use any tool that reads Azure Blob Storage.</span></span> <span data-ttu-id="8cfbe-370">Conforme observado na seção pré-requisitos do hello, você pode usar extensões do Azure no Visual Studio, ou você pode usar uma ferramenta como [Azure Storage Explorer](http://storageexplorer.com/) ou [Azure Explorer](http://www.cerebrata.com/products/azure-explorer/introduction).</span><span class="sxs-lookup"><span data-stu-id="8cfbe-370">As noted in hello Prerequisites section, you can use Azure extensions in Visual Studio, or you can use a tool like [Azure Storage Explorer](http://storageexplorer.com/) or [Azure Explorer](http://www.cerebrata.com/products/azure-explorer/introduction).</span></span> 

<span data-ttu-id="8cfbe-371">Ao examinar o conteúdo de saudação de um arquivo no armazenamento de blob, você ver algo como Olá a seguir:</span><span class="sxs-lookup"><span data-stu-id="8cfbe-371">When you examine hello contents of a file in blob storage, you see something like hello following :</span></span>

![Armazenamento de Blobs do Azure com saída de Streaming Analytics](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-blob-storage-view.png)
 

## <a name="clean-up-resources"></a><span data-ttu-id="8cfbe-373">Limpar recursos</span><span class="sxs-lookup"><span data-stu-id="8cfbe-373">Clean up resources</span></span>

<span data-ttu-id="8cfbe-374">Temos artigos adicionais que continue com o cenário de detecção de fraudes hello e que usam recursos Olá criado por você neste tutorial.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-374">We have additional articles that continue with hello fraud-detection scenario and that use hello resources that you've created in this tutorial.</span></span> <span data-ttu-id="8cfbe-375">Se você quiser toocontinue, consulte sugestões de saudação em **próximas etapas** mais tarde.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-375">If you want toocontinue, see hello suggestions under **Next steps** later.</span></span>

<span data-ttu-id="8cfbe-376">No entanto, se tiver terminado e você não precisa de recursos de saudação que você criou, você pode excluí-los para que não imponha o Azure cobra desnecessário.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-376">However, if you're done and you don't need hello resources you've created, you can delete them so that you don't incur unnecessary Azure charges.</span></span> <span data-ttu-id="8cfbe-377">Nesse caso, sugerimos que você Olá a seguir:</span><span class="sxs-lookup"><span data-stu-id="8cfbe-377">In that case, we suggest that you do hello following:</span></span>

1. <span data-ttu-id="8cfbe-378">Interrompa o trabalho de análise de fluxo contínuo de saudação.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-378">Stop hello Streaming Analytics job.</span></span> <span data-ttu-id="8cfbe-379">Em Olá **trabalhos** folha, clique em **parar** na parte superior da saudação.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-379">In hello **Jobs** blade, click **Stop** at hello top.</span></span>
2. <span data-ttu-id="8cfbe-380">Pare o aplicativo de telecomunicações gerador de saudação.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-380">Stop hello Telco Generator app.</span></span> <span data-ttu-id="8cfbe-381">Na janela de comando Olá onde você iniciou o aplicativo hello, pressione Ctrl + C.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-381">In hello command window where you started hello app, press Ctrl+C.</span></span>
3. <span data-ttu-id="8cfbe-382">Se você criou uma nova conta de armazenamento de blobs apenas para este tutorial, exclua essa conta.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-382">If you created a new blob storage account just for this tutorial, delete it.</span></span> 
4. <span data-ttu-id="8cfbe-383">Exclua Olá análise de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-383">Delete hello Streaming Analytics job.</span></span>
5. <span data-ttu-id="8cfbe-384">Exclua hub de eventos de saudação.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-384">Delete hello event hub.</span></span>
6. <span data-ttu-id="8cfbe-385">Exclua o namespace de hub de eventos de saudação.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-385">Delete hello event hub namespace.</span></span>

## <a name="get-support"></a><span data-ttu-id="8cfbe-386">Obtenha suporte</span><span class="sxs-lookup"><span data-stu-id="8cfbe-386">Get support</span></span>

<span data-ttu-id="8cfbe-387">Para obter mais assistência, experimente nosso [fórum do Stream Analytics do Azure](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics)</span><span class="sxs-lookup"><span data-stu-id="8cfbe-387">For further assistance, try our [Azure Stream Analytics forum](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span></span>

## <a name="next-steps"></a><span data-ttu-id="8cfbe-388">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="8cfbe-388">Next steps</span></span>

<span data-ttu-id="8cfbe-389">Você pode continuar este tutorial com hello artigos a seguir:</span><span class="sxs-lookup"><span data-stu-id="8cfbe-389">You can continue this tutorial with hello following articles:</span></span>

* <span data-ttu-id="8cfbe-390">[Stream Analytics e Power BI: um dashboard de análise em tempo real para fluxo de dados](stream-analytics-power-bi-dashboard.md).</span><span class="sxs-lookup"><span data-stu-id="8cfbe-390">[Stream Analytics and Power BI: A real-time analytics dashboard for streaming data](stream-analytics-power-bi-dashboard.md).</span></span> <span data-ttu-id="8cfbe-391">Este artigo mostra como toosend Olá saída de telecomunicações de saudação do Stream Analytics trabalho tooPower BI para visualização em tempo real e análise.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-391">This article shows you how toosend hello TelCo output of hello Stream Analytics job tooPower BI for real-time visualization and analysis.</span></span>
* <span data-ttu-id="8cfbe-392">[Como os dados de toostore do Azure Stream Analytics em um Cache Redis do Azure usando funções do Azure](stream-analytics-functions-redis.md).</span><span class="sxs-lookup"><span data-stu-id="8cfbe-392">[How toostore data from Azure Stream Analytics in an Azure Redis Cache using Azure Functions](stream-analytics-functions-redis.md).</span></span> <span data-ttu-id="8cfbe-393">Este artigo mostra como toouse funções do Azure toowrite fraudulenta chama tooan Azure Redis cache por meio de uma fila do barramento de serviço.</span><span class="sxs-lookup"><span data-stu-id="8cfbe-393">This article shows how toouse Azure Functions toowrite fraudulent calls tooan Azure Redis cache via a Service Bus queue.</span></span>

<span data-ttu-id="8cfbe-394">Para obter mais informações sobre Stream Analytics em geral, leia estes artigos:</span><span class="sxs-lookup"><span data-stu-id="8cfbe-394">For more information about Stream Analytics in general, try these articles:</span></span>

* [<span data-ttu-id="8cfbe-395">Introdução tooAzure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="8cfbe-395">Introduction tooAzure Stream Analytics</span></span>](stream-analytics-introduction.md)
* [<span data-ttu-id="8cfbe-396">Dimensionar trabalhos do Stream Analytics do Azure</span><span class="sxs-lookup"><span data-stu-id="8cfbe-396">Scale Azure Stream Analytics jobs</span></span>](stream-analytics-scale-jobs.md)
* [<span data-ttu-id="8cfbe-397">Referência de Linguagem de Consulta do Stream Analytics do Azure</span><span class="sxs-lookup"><span data-stu-id="8cfbe-397">Azure Stream Analytics Query Language Reference</span></span>](https://msdn.microsoft.com/library/azure/dn834998.aspx)
* [<span data-ttu-id="8cfbe-398">Referência da API REST do Gerenciamento do Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="8cfbe-398">Azure Stream Analytics Management REST API Reference</span></span>](https://msdn.microsoft.com/library/azure/dn835031.aspx)
