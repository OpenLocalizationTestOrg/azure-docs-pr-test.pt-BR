---
title: "Visão geral do balanceador de carga aaaAzure | Microsoft Docs"
description: "Visão geral dos recursos do Balanceador de Carga do Azure, arquitetura e implementação. Saiba como funciona o balanceador de carga hello e aproveitá-lo na nuvem hello."
services: load-balancer
documentationcenter: na
author: kumudd
manager: timlt
editor: 
ms.assetid: 0f313dc0-f007-4cee-b2b9-f542357925a3
ms.service: load-balancer
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 10/24/2016
ms.author: kumud
ms.openlocfilehash: 2376a02f7cbbbed6a90f216419c0c3d30f594272
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="azure-load-balancer-overview"></a><span data-ttu-id="e1c9a-104">Visão geral do Balanceador de Carga do Azure</span><span class="sxs-lookup"><span data-stu-id="e1c9a-104">Azure Load Balancer overview</span></span>

<span data-ttu-id="e1c9a-105">O balanceador de carga do Azure fornece tooyour aplicativos de alto desempenho de disponibilidade e rede.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-105">Azure Load Balancer delivers high availability and network performance tooyour applications.</span></span> <span data-ttu-id="e1c9a-106">É um balanceador de carga do tipo Camada 4 (TCP, UDP) que distribui o tráfego de entrada entre as instâncias de serviço íntegras definidas em um conjunto de balanceadores de carga.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-106">It is a Layer 4 (TCP, UDP) load balancer that distributes incoming traffic among healthy instances of services defined in a load-balanced set.</span></span>

<span data-ttu-id="e1c9a-107">O Azure Load Balancer pode ser configurado para:</span><span class="sxs-lookup"><span data-stu-id="e1c9a-107">Azure Load Balancer can be configured to:</span></span>

* <span data-ttu-id="e1c9a-108">Balancear cargas de entrada da Internet tráfego toovirtual máquinas.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-108">Load balance incoming Internet traffic toovirtual machines.</span></span> <span data-ttu-id="e1c9a-109">Essa configuração é conhecida como [balanceamento de carga voltada para a Internet](load-balancer-internet-overview.md).</span><span class="sxs-lookup"><span data-stu-id="e1c9a-109">This configuration is known as [Internet-facing load balancing](load-balancer-internet-overview.md).</span></span>
* <span data-ttu-id="e1c9a-110">Balanceie o tráfego de carga entre as máquinas virtuais em uma rede virtual, entre as máquinas virtuais nos serviços de nuvem ou entre os computadores locais e as máquinas virtuais em uma rede virtual entre as instalações.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-110">Load balance traffic between virtual machines in a virtual network, between virtual machines in cloud services, or between on-premises computers and virtual machines in a cross-premises virtual network.</span></span> <span data-ttu-id="e1c9a-111">Essa configuração é conhecida como [balanceamento de carga interno](load-balancer-internal-overview.md).</span><span class="sxs-lookup"><span data-stu-id="e1c9a-111">This configuration is known as [internal load balancing](load-balancer-internal-overview.md).</span></span>
* <span data-ttu-id="e1c9a-112">Encaminhar o tráfego externo tooa específico de máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-112">Forward external traffic tooa specific virtual machine.</span></span>

<span data-ttu-id="e1c9a-113">Todos os recursos em nuvem Olá necessário um toobe de endereço IP público de saudação à Internet.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-113">All resources in hello cloud need a public IP address toobe reachable from hello Internet.</span></span> <span data-ttu-id="e1c9a-114">infraestrutura de nuvem Olá no Azure usa endereços IP não roteável para seus recursos.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-114">hello cloud infrastructure in Azure uses non-routable IP addresses for its resources.</span></span> <span data-ttu-id="e1c9a-115">O Azure usa a conversão de endereços de rede (NAT) com IP endereços toocommunicate toohello Internet pública.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-115">Azure uses network address translation (NAT) with public IP addresses toocommunicate toohello Internet.</span></span>

## <a name="azure-deployment-models"></a><span data-ttu-id="e1c9a-116">Modelos de implantação do Azure</span><span class="sxs-lookup"><span data-stu-id="e1c9a-116">Azure deployment models</span></span>

<span data-ttu-id="e1c9a-117">É importante toounderstand Olá diferenças hello clássico do Azure e o Gerenciador de recursos de [modelos de implantação](../azure-resource-manager/resource-manager-deployment-model.md).</span><span class="sxs-lookup"><span data-stu-id="e1c9a-117">It's important toounderstand hello differences between hello Azure classic and Resource Manager [deployment models](../azure-resource-manager/resource-manager-deployment-model.md).</span></span> <span data-ttu-id="e1c9a-118">O Azure Load Balancer está configurado de forma diferente em cada modelo.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-118">Azure Load Balancer is configured differently in each model.</span></span>

### <a name="azure-classic-deployment-model"></a><span data-ttu-id="e1c9a-119">modelo de implantação clássico do Azure</span><span class="sxs-lookup"><span data-stu-id="e1c9a-119">Azure classic deployment model</span></span>

<span data-ttu-id="e1c9a-120">Máquinas virtuais implantadas em um limite de serviço de nuvem podem ser agrupado toouse um balanceador de carga.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-120">Virtual machines deployed within a cloud service boundary can be grouped toouse a load balancer.</span></span> <span data-ttu-id="e1c9a-121">Neste modelo um endereço IP público e um nome de domínio totalmente qualificado, (FQDN) são atribuídos tooa serviço de nuvem.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-121">In this model a public IP address and a Fully Qualified Domain Name, (FQDN) are assigned tooa cloud service.</span></span> <span data-ttu-id="e1c9a-122">o balanceador de carga Olá porta tradução e balanceamento de carga de tráfego de rede hello usando o endereço IP público de Olá Olá serviço de nuvem.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-122">hello load balancer does port translation and load balances hello network traffic by using hello public IP address for hello cloud service.</span></span>

<span data-ttu-id="e1c9a-123">O tráfego de balanceamento de carga é definido por pontos de extremidade.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-123">Load-balanced traffic is defined by endpoints.</span></span> <span data-ttu-id="e1c9a-124">Pontos de extremidade de conversão de porta têm uma relação um para um entre a porta atribuída público saudação do endereço IP público de saudação e a porta local de Olá atribuído toohello serviço em uma máquina virtual específica.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-124">Port translation endpoints have a one-to-one relationship between hello public-assigned port of hello public IP address and hello local port assigned toohello service on a specific virtual machine.</span></span> <span data-ttu-id="e1c9a-125">Pontos de extremidade de balanceamento de carga têm uma relação um-para-muitos entre o endereço IP público de saudação e Olá local portas atribuídas toohello serviços em máquinas virtuais de saudação no serviço de nuvem hello.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-125">Load balancing endpoints have a one-to-many relationship between hello public IP address and hello local ports assigned toohello services on hello virtual machines in hello cloud service.</span></span>

![Balanceador de carga do Azure no modelo de implantação clássico Olá](./media/load-balancer-overview/asm-lb.png)

<span data-ttu-id="e1c9a-127">Figura 1 - balanceador de carga do Azure no modelo de implantação clássico Olá</span><span class="sxs-lookup"><span data-stu-id="e1c9a-127">Figure 1 - Azure Load Balancer in hello classic deployment model</span></span>

<span data-ttu-id="e1c9a-128">rótulo de endereço IP público Olá que Olá usos do balanceador de carga para esse modelo de implantação do domínio de saudação é \<nome do serviço de nuvem\>. cloudapp.net.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-128">hello domain label for hello public IP address that hello load balancer uses for this deployment model is \<cloud service name\>.cloudapp.net.</span></span> <span data-ttu-id="e1c9a-129">Olá gráfico a seguir mostra Olá balanceador de carga do Azure neste modelo.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-129">hello following graphic shows hello Azure Load Balancer in this model.</span></span>

### <a name="azure-resource-manager-deployment-model"></a><span data-ttu-id="e1c9a-130">modelo de implantação do Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="e1c9a-130">Azure Resource Manager deployment model</span></span>

<span data-ttu-id="e1c9a-131">No modelo de implantação do Gerenciador de recursos de saudação há toocreate sem necessidade de um serviço de nuvem.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-131">In hello Resource Manager deployment model there is no need toocreate a Cloud service.</span></span> <span data-ttu-id="e1c9a-132">Balanceador de carga de saudação é criado tooexplicitly rotear o tráfego entre várias máquinas virtuais.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-132">hello load balancer is created tooexplicitly route traffic among multiple virtual machines.</span></span>

<span data-ttu-id="e1c9a-133">Um endereço IP público é um recurso individual que tem um rótulo de domínio (nome DNS).</span><span class="sxs-lookup"><span data-stu-id="e1c9a-133">A public IP address is an individual resource that has a domain label (DNS name).</span></span> <span data-ttu-id="e1c9a-134">endereço IP público de saudação é associado ao recurso de Balanceador de carga hello.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-134">hello public IP address is associated with hello load balancer resource.</span></span> <span data-ttu-id="e1c9a-135">Regras de Balanceador de carga e regras de NAT de entrada usam endereço IP público de saudação conforme Olá ponto de extremidade de Internet para recursos de saudação que está recebendo o tráfego de balanceamento de carga de rede.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-135">Load balancer rules and inbound NAT rules use hello public IP address as hello Internet endpoint for hello resources that are receiving load-balanced network traffic.</span></span>

<span data-ttu-id="e1c9a-136">Um endereço IP público ou privado é atribuído a máquina de virtual de tooa toohello rede interface recursos anexado.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-136">A private or public IP address is assigned toohello network interface resource attached tooa virtual machine.</span></span> <span data-ttu-id="e1c9a-137">Depois que uma interface de rede é adicionada um pool de endereços IP de back-end do balanceador de carga tooa, o balanceador de carga de saudação é toosend capaz de balanceamento de carga de tráfego de rede com base em regras Olá com balanceamento de carga que são criadas.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-137">Once a network interface is added tooa load balancer's back-end IP address pool, hello load balancer is able toosend load-balanced network traffic based on hello load-balanced rules that are created.</span></span>

<span data-ttu-id="e1c9a-138">Olá gráfico a seguir mostra Olá balanceador de carga do Azure neste modelo:</span><span class="sxs-lookup"><span data-stu-id="e1c9a-138">hello following graphic shows hello Azure Load Balancer in this model:</span></span>

![Azure Load Balancer no Gerenciador de Recursos](./media/load-balancer-overview/arm-lb.png)

<span data-ttu-id="e1c9a-140">Figura 2 – Azure Load Balancer no Resource Manager</span><span class="sxs-lookup"><span data-stu-id="e1c9a-140">Figure 2 - Azure Load Balancer in Resource Manager</span></span>

<span data-ttu-id="e1c9a-141">o balanceador de carga Olá pode ser gerenciado por meio do Gerenciador de recursos com base em modelos, APIs e ferramentas.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-141">hello load balancer can be managed through Resource Manager-based templates, APIs, and tools.</span></span> <span data-ttu-id="e1c9a-142">toolearn mais sobre o Gerenciador de recursos, consulte Olá [visão geral do Gerenciador de recursos](../azure-resource-manager/resource-group-overview.md).</span><span class="sxs-lookup"><span data-stu-id="e1c9a-142">toolearn more about Resource Manager, see hello [Resource Manager overview](../azure-resource-manager/resource-group-overview.md).</span></span>

## <a name="load-balancer-features"></a><span data-ttu-id="e1c9a-143">Recursos do balanceador de carga</span><span class="sxs-lookup"><span data-stu-id="e1c9a-143">Load Balancer features</span></span>

* <span data-ttu-id="e1c9a-144">Distribuição baseada em hash</span><span class="sxs-lookup"><span data-stu-id="e1c9a-144">Hash-based distribution</span></span>

    <span data-ttu-id="e1c9a-145">O Balanceador de Carga do Azure usa um algoritmo de distribuição baseado em hash.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-145">Azure Load Balancer uses a hash-based distribution algorithm.</span></span> <span data-ttu-id="e1c9a-146">Por padrão, ele usa um hash tupla 5 composto de IP de origem, porta de origem, IP de destino, porta de destino e servidores do protocolo tipo toomap tráfego tooavailable.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-146">By default, it uses a 5-tuple hash composed of source IP, source port, destination IP, destination port, and protocol type toomap traffic tooavailable servers.</span></span> <span data-ttu-id="e1c9a-147">Ele fornece permanência somente *dentro* de uma sessão de transporte.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-147">It provides stickiness only *within* a transport session.</span></span> <span data-ttu-id="e1c9a-148">Pacotes em Olá mesma sessão TCP ou UDP será direcionado toohello mesmo instância por trás do ponto de extremidade com balanceamento de carga do hello.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-148">Packets in hello same TCP or UDP session will be directed toohello same instance behind hello load-balanced endpoint.</span></span> <span data-ttu-id="e1c9a-149">Quando o cliente Olá fecha e reabre a conexão de saudação ou inicia uma nova sessão de Olá mesmo IP de origem, as alterações de porta de origem hello.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-149">When hello client closes and reopens hello connection or starts a new session from hello same source IP, hello source port changes.</span></span> <span data-ttu-id="e1c9a-150">Isso pode causar Olá tráfego toogo tooa ponto de extremidade diferente em um datacenter diferente.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-150">This may cause hello traffic toogo tooa different endpoint in a different datacenter.</span></span>

    <span data-ttu-id="e1c9a-151">Para obter mais detalhes, consulte [Modo de distribuição do balanceador de carga](load-balancer-distribution-mode.md).</span><span class="sxs-lookup"><span data-stu-id="e1c9a-151">For more details, see [Load balancer distribution mode](load-balancer-distribution-mode.md).</span></span> <span data-ttu-id="e1c9a-152">Olá gráfico a seguir mostra a distribuição de baseadas em hash de saudação:</span><span class="sxs-lookup"><span data-stu-id="e1c9a-152">hello following graphic shows hello hash-based distribution:</span></span>

    ![Distribuição baseada em hash](./media/load-balancer-overview/load-balancer-distribution.png)

    <span data-ttu-id="e1c9a-154">Figura 3 – Distribuição baseada em hash</span><span class="sxs-lookup"><span data-stu-id="e1c9a-154">Figure 3 - Hash based distribution</span></span>

* <span data-ttu-id="e1c9a-155">Encaminhamento de porta</span><span class="sxs-lookup"><span data-stu-id="e1c9a-155">Port forwarding</span></span>

    <span data-ttu-id="e1c9a-156">O Balanceador de Carga do Azure oferece-lhe controle sobre como a comunicação de entrada é gerenciada.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-156">Azure Load Balancer gives you control over how inbound communication is managed.</span></span> <span data-ttu-id="e1c9a-157">Essa comunicação inclui o tráfego iniciado de hosts da Internet ou de máquinas virtuais em outros serviços de nuvem ou redes virtuais.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-157">This communication includes traffic initiated from Internet hosts, virtual machines in other cloud services, or virtual networks.</span></span> <span data-ttu-id="e1c9a-158">Esse controle é representado por um ponto de extremidade (também chamado de ponto de extremidade de entrada).</span><span class="sxs-lookup"><span data-stu-id="e1c9a-158">This control is represented by an endpoint (also called an input endpoint).</span></span>

    <span data-ttu-id="e1c9a-159">Um ponto de extremidade de entrada escuta em uma porta pública e encaminha o tráfego de porta interna tooan.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-159">An input endpoint listens on a public port and forwards traffic tooan internal port.</span></span> <span data-ttu-id="e1c9a-160">Você pode mapear Olá mesmo portas para um ponto de extremidade interno ou externo ou usar uma porta diferente para eles.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-160">You can map hello same ports for an internal or external endpoint or use a different port for them.</span></span> <span data-ttu-id="e1c9a-161">Por exemplo, você pode ter um tooport de toolisten do web server configurado 81 enquanto o mapeamento de ponto de extremidade público Olá é a porta 80.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-161">For example, you can have a web server configured toolisten tooport 81 while hello public endpoint mapping is port 80.</span></span> <span data-ttu-id="e1c9a-162">a criação de um ponto de extremidade público Olá dispara a criação de saudação de uma instância do balanceador de carga.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-162">hello creation of a public endpoint triggers hello creation of a load balancer instance.</span></span>

    <span data-ttu-id="e1c9a-163">Quando criado usando hello portal do Azure, o portal de saudação cria automaticamente pontos de extremidade toohello máquina virtual Olá protocolo de área de trabalho remota (RDP) e o tráfego da sessão remoto do Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-163">When created using hello Azure portal, hello portal automatically creates endpoints toohello virtual machine for hello Remote Desktop Protocol (RDP) and remote Windows PowerShell session traffic.</span></span> <span data-ttu-id="e1c9a-164">Você pode usar esses pontos de extremidade tooremotely administrar Olá VM por meio de saudação da Internet.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-164">You can use these endpoints tooremotely administer hello virtual machine over hello Internet.</span></span>

* <span data-ttu-id="e1c9a-165">Reconfiguração automática</span><span class="sxs-lookup"><span data-stu-id="e1c9a-165">Automatic reconfiguration</span></span>

    <span data-ttu-id="e1c9a-166">O Balanceador de Carga do Azure reconfigura-se instantaneamente quando você aumenta ou diminui as instâncias.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-166">Azure Load Balancer instantly reconfigures itself when you scale instances up or down.</span></span> <span data-ttu-id="e1c9a-167">Por exemplo, essa reconfiguração ocorre quando você aumenta Olá contagem de instâncias para funções web/de trabalho em um serviço de nuvem ou quando você adiciona máquinas virtuais adicionais em Olá mesmo com balanceamento de carga definido.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-167">For example, this reconfiguration happens when you increase hello instance count for web/worker roles in a cloud service or when you add additional virtual machines into hello same load-balanced set.</span></span>

* <span data-ttu-id="e1c9a-168">Monitoramento do serviço</span><span class="sxs-lookup"><span data-stu-id="e1c9a-168">Service monitoring</span></span>

    <span data-ttu-id="e1c9a-169">Balanceador de carga do Azure pode investigação de integridade de saudação do hello várias instâncias do servidor.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-169">Azure Load Balancer can probe hello health of hello various server instances.</span></span> <span data-ttu-id="e1c9a-170">Quando um teste falha toorespond, balanceador de carga hello para enviar novas conexões instâncias não íntegras toohello.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-170">When a probe fails toorespond, hello load balancer stops sending new connections toohello unhealthy instances.</span></span> <span data-ttu-id="e1c9a-171">As conexões existentes não são afetadas.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-171">Existing connections are not impacted.</span></span>

    <span data-ttu-id="e1c9a-172">Existem três tipos de investigação com suporte:</span><span class="sxs-lookup"><span data-stu-id="e1c9a-172">Three types of probes are supported:</span></span>

    + <span data-ttu-id="e1c9a-173">**Investigação de agente convidado (na plataforma como um serviço de máquinas virtuais somente):** balanceador de carga Olá utiliza o agente convidado Olá em máquina virtual de saudação.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-173">**Guest agent probe (on Platform as a Service Virtual Machines only):** hello load balancer utilizes hello guest agent inside hello virtual machine.</span></span> <span data-ttu-id="e1c9a-174">Olá agente convidado escuta e responde com uma resposta HTTP 200 Okey somente quando hello instância está no estado pronto do hello (ou seja, Olá instância não está em um estado como ocupado, Reciclando ou parando).</span><span class="sxs-lookup"><span data-stu-id="e1c9a-174">hello guest agent listens and responds with an HTTP 200 OK response only when hello instance is in hello ready state (i.e. hello instance is not in a state like busy, recycling, or stopping).</span></span> <span data-ttu-id="e1c9a-175">Se o agente de saudação falhar toorespond com um Okey de 200 HTTP, marcas de Balanceador de carga Olá Olá instância como sem resposta e deixa de enviar a instância de toothat de tráfego.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-175">If hello agent fails toorespond with an HTTP 200 OK, hello load balancer marks hello instance as unresponsive and stops sending traffic toothat instance.</span></span> <span data-ttu-id="e1c9a-176">o balanceador de carga Olá continua a instância de saudação do tooping.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-176">hello load balancer continues tooping hello instance.</span></span> <span data-ttu-id="e1c9a-177">Se o agente de convidado Olá responder com HTTP 200, o balanceador de carga Olá enviará instância de toothat tráfego novamente.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-177">If hello guest agent responds with an HTTP 200, hello load balancer will send traffic toothat instance again.</span></span> <span data-ttu-id="e1c9a-178">Quando você estiver usando uma função web, o código do site será executado normalmente em w3wp.exe, que não é monitorada por Olá malha do Azure ou o agente convidado.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-178">When you're using a web role, your website code typically runs in w3wp.exe, which is not monitored by hello Azure fabric or guest agent.</span></span> <span data-ttu-id="e1c9a-179">Isso significa que falhas no w3wp.exe (por exemplo, respostas HTTP 500) não será relatado toohello agente de convidado e o balanceador de carga Olá não saberá tootake essa instância fora de rotação.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-179">This means that failures in w3wp.exe (e.g. HTTP 500 responses) will not be reported toohello guest agent, and hello load balancer will not know tootake that instance out of rotation.</span></span>
    + <span data-ttu-id="e1c9a-180">**Investigação personalizada de HTTP:** essa investigação substituições da investigação saudação padrão (agente de convidado).</span><span class="sxs-lookup"><span data-stu-id="e1c9a-180">**HTTP custom probe:** This probe overrides hello default (guest agent) probe.</span></span> <span data-ttu-id="e1c9a-181">Você pode usá-lo toocreate sua integridade do lógica personalizada toodetermine Olá Olá da instância de função.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-181">You can use it toocreate your own custom logic toodetermine hello health of hello role instance.</span></span> <span data-ttu-id="e1c9a-182">o balanceador de carga Olá regularmente será teste seu ponto de extremidade (cada 15 segundos, por padrão).</span><span class="sxs-lookup"><span data-stu-id="e1c9a-182">hello load balancer will regularly probe your endpoint (every 15 seconds, by default).</span></span> <span data-ttu-id="e1c9a-183">instância de saudação é considerada toobe em rotação se ele responde com um ACK TCP ou HTTP 200 dentro do período de tempo limite da saudação (padrão de 31 segundos).</span><span class="sxs-lookup"><span data-stu-id="e1c9a-183">hello instance is considered toobe in rotation if it responds with a TCP ACK or HTTP 200 within hello timeout period (default of 31 seconds).</span></span> <span data-ttu-id="e1c9a-184">Isso é útil para implementar seus próprio instâncias de tooremove lógica da rotação do balanceador de carga hello.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-184">This is useful for implementing your own logic tooremove instances from hello load balancer's rotation.</span></span> <span data-ttu-id="e1c9a-185">Por exemplo, você pode configurar Olá instância tooreturn um status de não-200 se instância Olá estiver acima de 90% da CPU.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-185">For example, you can configure hello instance tooreturn a non-200 status if hello instance is above 90% CPU.</span></span> <span data-ttu-id="e1c9a-186">Para funções da web que usam w3wp.exe, você também obtém automática de monitoramento do seu site, como falhas no código do site da Web retornam um teste de toohello do status de 200 não.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-186">For web roles that use w3wp.exe, you also get automatic monitoring of your website, since failures in your website code return a non-200 status toohello probe.</span></span>
    + <span data-ttu-id="e1c9a-187">**Investigação personalizada de TCP:** esse teste depende de porta de investigação de tooa definido de estabelecimento do TCP sessão bem-sucedida.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-187">**TCP custom probe:** This probe relies on successful TCP session establishment tooa defined probe port.</span></span>

    <span data-ttu-id="e1c9a-188">Para obter mais informações, consulte Olá [esquema LoadBalancerProbe](https://msdn.microsoft.com/library/azure/jj151530.aspx).</span><span class="sxs-lookup"><span data-stu-id="e1c9a-188">For more information, see hello [LoadBalancerProbe schema](https://msdn.microsoft.com/library/azure/jj151530.aspx).</span></span>

* <span data-ttu-id="e1c9a-189">NAT de Origem</span><span class="sxs-lookup"><span data-stu-id="e1c9a-189">Source NAT</span></span>

    <span data-ttu-id="e1c9a-190">Todos os toohello de tráfego de saída Internet que se origina de seu serviço sofre NAT (SNAT) de origem usando Olá mesmo endereço VIP como Olá tráfego de entrada.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-190">All outbound traffic toohello Internet that originates from your service undergoes source NAT (SNAT) by using hello same VIP address as hello incoming traffic.</span></span> <span data-ttu-id="e1c9a-191">A SNAT fornece benefícios importantes:</span><span class="sxs-lookup"><span data-stu-id="e1c9a-191">SNAT provides important benefits:</span></span>

    + <span data-ttu-id="e1c9a-192">Ele permite fácil atualização e recuperação de desastres de serviços, como Olá que VIP pode ser dinamicamente mapeado tooanother instância do serviço de saudação.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-192">It enables easy upgrade and disaster recovery of services, since hello VIP can be dynamically mapped tooanother instance of hello service.</span></span>
    + <span data-ttu-id="e1c9a-193">Facilita o gerenciamento de ACL (lista de controle de acesso).</span><span class="sxs-lookup"><span data-stu-id="e1c9a-193">It makes access control list (ACL) management easier.</span></span> <span data-ttu-id="e1c9a-194">ACLs expressadas em termos de VIPs não mudam à medida que os serviços são escalados verticalmente ou reimplantados.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-194">ACLs expressed in terms of VIPs do not change as services scale up, down, or get redeployed.</span></span>

    <span data-ttu-id="e1c9a-195">configuração de Balanceador de carga Olá suporta cone completo NAT para UDP.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-195">hello load balancer configuration supports full cone NAT for UDP.</span></span> <span data-ttu-id="e1c9a-196">Cone completo NAT é um tipo de NAT onde a porta Olá permite conexões de entrada de qualquer host externo (na solicitação de saída tooan de resposta).</span><span class="sxs-lookup"><span data-stu-id="e1c9a-196">Full cone NAT is a type of NAT where hello port allows inbound connections from any external host (in response tooan outbound request).</span></span>

    <span data-ttu-id="e1c9a-197">Para cada conexão de saída nova que inicia uma máquina virtual, uma porta de saída também é alocada pelo Balanceador de carga de saudação.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-197">For each new outbound connection that a virtual machine initiates, an outbound port is also allocated by hello load balancer.</span></span> <span data-ttu-id="e1c9a-198">host externo Olá vê o tráfego com uma porta virtual alocada pelo VIP IP.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-198">hello external host sees traffic with a virtual IP (VIP)-allocated port.</span></span> <span data-ttu-id="e1c9a-199">Para cenários que exigem um grande número de conexões de saída, é recomendável toouse [IP público de nível de instância](../virtual-network/virtual-networks-instance-level-public-ip.md) endereços para que VMs Olá tenham um endereço IP de saída dedicado para SNAT.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-199">For scenarios that require a large number of outbound connections, it is recommended toouse [instance-level public IP](../virtual-network/virtual-networks-instance-level-public-ip.md) addresses so that hello VMs have a dedicated outbound IP address for SNAT.</span></span> <span data-ttu-id="e1c9a-200">Isso reduz o risco de saudação do esgotamento de porta.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-200">This reduces hello risk of port exhaustion.</span></span>

    <span data-ttu-id="e1c9a-201">Consulte [conexões de saída](load-balancer-outbound-connections.md) para obter mais detalhes sobre esse tópico.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-201">Please see [outbound connections](load-balancer-outbound-connections.md) article for more details on this topic.</span></span>

### <a name="support-for-multiple-load-balanced-ip-addresses-for-virtual-machines"></a><span data-ttu-id="e1c9a-202">Suporte para vários endereços IP com balanceamento de carga para máquinas virtuais</span><span class="sxs-lookup"><span data-stu-id="e1c9a-202">Support for multiple load-balanced IP addresses for virtual machines</span></span>
<span data-ttu-id="e1c9a-203">Você pode atribuir mais de um balanceamento de carga público tooa conjunto de endereços IP de máquinas virtuais.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-203">You can assign more than one load-balanced public IP address tooa set of virtual machines.</span></span> <span data-ttu-id="e1c9a-204">Com essa capacidade, você pode hospedar vários sites SSL e/ou em vários ouvintes de grupo de disponibilidade do AlwaysOn do SQL Server no mesmo conjunto de máquinas virtuais de saudação.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-204">With this ability, you can host multiple SSL websites and/or multiple SQL Server AlwaysOn Availability Group listeners on hello same set of virtual machines.</span></span> <span data-ttu-id="e1c9a-205">Para obter mais informações, consulte [Vários VIPs por serviço de nuvem](load-balancer-multivip.md).</span><span class="sxs-lookup"><span data-stu-id="e1c9a-205">For more information, see [Multiple VIPs per cloud service](load-balancer-multivip.md).</span></span>

[!INCLUDE [load-balancer-compare-tm-ag-lb-include.md](../../includes/load-balancer-compare-tm-ag-lb-include.md)]

## <a name="limitations"></a><span data-ttu-id="e1c9a-206">Limitações</span><span class="sxs-lookup"><span data-stu-id="e1c9a-206">Limitations</span></span>

<span data-ttu-id="e1c9a-207">Pools de back-end do Load Balancer podem conter qualquer SKU de VM exceto camada Básica.</span><span class="sxs-lookup"><span data-stu-id="e1c9a-207">Load Balancer backend pools can contain any VM SKU except Basic tier.</span></span>

## <a name="next-steps"></a><span data-ttu-id="e1c9a-208">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="e1c9a-208">Next steps</span></span>

- <span data-ttu-id="e1c9a-209">Saiba mais sobre o [balanceador de carga para a Internet](load-balancer-internet-overview.md)</span><span class="sxs-lookup"><span data-stu-id="e1c9a-209">Learn more about [Internet-facing load balancer](load-balancer-internet-overview.md)</span></span>

- <span data-ttu-id="e1c9a-210">Saiba mais sobre a [Visão geral do balanceador de carga interno](load-balancer-internal-overview.md)</span><span class="sxs-lookup"><span data-stu-id="e1c9a-210">Learn more about [Internal load balancer overview](load-balancer-internal-overview.md)</span></span>

- <span data-ttu-id="e1c9a-211">Criar um [balanceador de carga para a Internet](load-balancer-get-started-internet-portal.md)</span><span class="sxs-lookup"><span data-stu-id="e1c9a-211">Create an [Internet-facing load balancer](load-balancer-get-started-internet-portal.md)</span></span>

- <span data-ttu-id="e1c9a-212">Saiba mais sobre alguns dos Olá outra chave [recursos de rede](../networking/networking-overview.md) do Azure</span><span class="sxs-lookup"><span data-stu-id="e1c9a-212">Learn about some of hello other key [networking capabilities](../networking/networking-overview.md) of Azure</span></span>

