---
title: Criar um balanceador de carga voltado para a Internet - Portal do Azure | Microsoft Docs
description: Saiba como criar um balanceador de carga voltado para a Internet no Gerenciador de Recursos usando o portal do Azure
services: load-balancer
documentationcenter: na
author: anavinahar
manager: narayan
editor: 
tags: azure-resource-manager
ms.assetid: aa9d26ca-3d8a-4a99-83b7-c410dd20b9d0
ms.service: load-balancer
ms.devlang: na
ms.topic: hero-article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 01/23/2017
ms.author: annahar
ms.openlocfilehash: db7c328b2ba7008b9d34275341fa4bad9522b028
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/11/2017
---
# <a name="creating-an-internet-facing-load-balancer-using-the-azure-portal"></a><span data-ttu-id="05891-103">Criar um balanceador de carga para a Internet usando o Portal do Azure</span><span class="sxs-lookup"><span data-stu-id="05891-103">Creating an Internet-facing load balancer using the Azure portal</span></span>

> [!div class="op_single_selector"]
> * [<span data-ttu-id="05891-104">Portal</span><span class="sxs-lookup"><span data-stu-id="05891-104">Portal</span></span>](../load-balancer/load-balancer-get-started-internet-portal.md)
> * [<span data-ttu-id="05891-105">PowerShell</span><span class="sxs-lookup"><span data-stu-id="05891-105">PowerShell</span></span>](../load-balancer/load-balancer-get-started-internet-arm-ps.md)
> * [<span data-ttu-id="05891-106">CLI do Azure</span><span class="sxs-lookup"><span data-stu-id="05891-106">Azure CLI</span></span>](../load-balancer/load-balancer-get-started-internet-arm-cli.md)
> * [<span data-ttu-id="05891-107">Modelo</span><span class="sxs-lookup"><span data-stu-id="05891-107">Template</span></span>](../load-balancer/load-balancer-get-started-internet-arm-template.md)

[!INCLUDE [load-balancer-get-started-internet-intro-include.md](../../includes/load-balancer-get-started-internet-intro-include.md)]

[!INCLUDE [azure-arm-classic-important-include](../../includes/azure-arm-classic-important-include.md)]

<span data-ttu-id="05891-108">Este artigo aborda o modelo de implantação do Gerenciador de Recursos.</span><span class="sxs-lookup"><span data-stu-id="05891-108">This article covers the Resource Manager deployment model.</span></span> <span data-ttu-id="05891-109">Também é possível [Saber como criar um balanceador de carga para a Internet usando a implantação clássica](load-balancer-get-started-internet-classic-portal.md)</span><span class="sxs-lookup"><span data-stu-id="05891-109">You can also [Learn how to create an Internet-facing load balancer using classic deployment](load-balancer-get-started-internet-classic-portal.md)</span></span>

[!INCLUDE [load-balancer-get-started-internet-scenario-include.md](../../includes/load-balancer-get-started-internet-scenario-include.md)]

<span data-ttu-id="05891-110">Isto aborda a sequência de tarefas individuais que precisam ser realizadas para a criação de um balanceador de carga e explica em detalhes o que é feito para atingir essa meta.</span><span class="sxs-lookup"><span data-stu-id="05891-110">This covers the sequence of individual tasks that have to be done to create a load balancer and explain in detail what is being done to accomplish the goal.</span></span>

## <a name="what-is-required-to-create-an-internet-facing-load-balancer"></a><span data-ttu-id="05891-111">O que é necessário para criar um balanceador de carga para a Internet?</span><span class="sxs-lookup"><span data-stu-id="05891-111">What is required to create an Internet-facing load balancer?</span></span>

<span data-ttu-id="05891-112">Você precisa criar e configurar os objetos a seguir para implantar um balanceador de carga.</span><span class="sxs-lookup"><span data-stu-id="05891-112">You need to create and configure the following objects to deploy a load balancer.</span></span>

* <span data-ttu-id="05891-113">Configuração de IP de front-end – contém endereços IP públicos para o tráfego de rede de entrada.</span><span class="sxs-lookup"><span data-stu-id="05891-113">Front-end IP configuration - contains public IP addresses for incoming network traffic.</span></span>
* <span data-ttu-id="05891-114">Pool de endereços de back-end – contém NICs (interfaces de rede) para que as máquinas virtuais recebam o tráfego de rede do balanceador de carga.</span><span class="sxs-lookup"><span data-stu-id="05891-114">Back-end address pool - contains network interfaces (NICs) for the virtual machines to receive network traffic from the load balancer.</span></span>
* <span data-ttu-id="05891-115">Regras de balanceamento de carga – contém regras de mapeamento de uma porta pública no balanceador de carga para uma porta no pool de endereços de back-end.</span><span class="sxs-lookup"><span data-stu-id="05891-115">Load balancing rules - contains rules mapping a public port on the load balancer to port in the back-end address pool.</span></span>
* <span data-ttu-id="05891-116">Regras NAT de entrada – contém regras de mapeamento de uma porta pública no balanceador de carga para uma porta de uma máquina virtual específica no pool de endereços de back-end.</span><span class="sxs-lookup"><span data-stu-id="05891-116">Inbound NAT rules - contains rules mapping a public port on the load balancer to a port for a specific virtual machine in the back-end address pool.</span></span>
* <span data-ttu-id="05891-117">Investigações – contém investigações de integridade usadas para verificar a disponibilidade de instâncias de máquinas virtuais no pool de endereços de back-end.</span><span class="sxs-lookup"><span data-stu-id="05891-117">Probes - contains health probes used to check availability of virtual machines instances in the back-end address pool.</span></span>

<span data-ttu-id="05891-118">É possível obter mais informações sobre componentes do balanceador de carga com o gerenciador de recursos do Azure em [Suporte do Azure Resource Manager para o Balanceador de Carga](load-balancer-arm.md).</span><span class="sxs-lookup"><span data-stu-id="05891-118">You can get more information about load balancer components with Azure Resource Manager at [Azure Resource Manager support for Load Balancer](load-balancer-arm.md).</span></span>

## <a name="set-up-a-load-balancer-in-azure-portal"></a><span data-ttu-id="05891-119">Configurar um balanceador de carga no portal do Azure</span><span class="sxs-lookup"><span data-stu-id="05891-119">Set up a load balancer in Azure portal</span></span>

> [!IMPORTANT]
> <span data-ttu-id="05891-120">Este exemplo pressupõe que você tem uma rede virtual chamada **myVNet**.</span><span class="sxs-lookup"><span data-stu-id="05891-120">This example assumes you have a virtual network called **myVNet**.</span></span> <span data-ttu-id="05891-121">Consulte [Criar rede virtual](../virtual-network/virtual-networks-create-vnet-arm-pportal.md) para fazer isso.</span><span class="sxs-lookup"><span data-stu-id="05891-121">Refer to [create virtual network](../virtual-network/virtual-networks-create-vnet-arm-pportal.md) to do this.</span></span> <span data-ttu-id="05891-122">Ele também pressupõe que há uma sub-rede dentro de **myVNet** chamada **LB-Subnet-BE** e duas VMs chamadas **web1** e **web2**, respectivamente, no mesmo conjunto de disponibilidade chamado **myAvailSet** em **myVNet**.</span><span class="sxs-lookup"><span data-stu-id="05891-122">It also assumes there is a subnet within **myVNet** called **LB-Subnet-BE** and two VMs called **web1** and **web2** respectively within the same availability set called **myAvailSet** in **myVNet**.</span></span> <span data-ttu-id="05891-123">Consulte [esse link](../virtual-machines/virtual-machines-windows-hero-tutorial.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) para criar VMs.</span><span class="sxs-lookup"><span data-stu-id="05891-123">Refer to [this link](../virtual-machines/virtual-machines-windows-hero-tutorial.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) to create VMs.</span></span>

1. <span data-ttu-id="05891-124">Em um navegador, navegue até o portal do Azure: [http://portal.azure.com](http://portal.azure.com) e faça logon com sua conta do Azure.</span><span class="sxs-lookup"><span data-stu-id="05891-124">From a browser navigate to the Azure portal: [http://portal.azure.com](http://portal.azure.com) and login with your Azure account.</span></span>
2. <span data-ttu-id="05891-125">No canto superior esquerdo da tela, clique em **Novo** > **Rede** > **Balanceador de Carga.**</span><span class="sxs-lookup"><span data-stu-id="05891-125">On the top left-hand side of the screen select **New** > **Networking** > **Load Balancer.**</span></span>
3. <span data-ttu-id="05891-126">Na folha **Criar balanceador de carga** , digite um nome para o balanceador de carga.</span><span class="sxs-lookup"><span data-stu-id="05891-126">In the **Create load balancer** blade, type a name for your load balancer.</span></span> <span data-ttu-id="05891-127">Aqui, ele é chamado de **myLoadBalancer**.</span><span class="sxs-lookup"><span data-stu-id="05891-127">Here it is called **myLoadBalancer**.</span></span>
4. <span data-ttu-id="05891-128">Em **Tipo**, selecione **Público**.</span><span class="sxs-lookup"><span data-stu-id="05891-128">Under **Type**, select **Public**.</span></span>
5. <span data-ttu-id="05891-129">Em **Endereço IP público**, crie um novo IP público chamado **myPublicIP**.</span><span class="sxs-lookup"><span data-stu-id="05891-129">Under **Public IP address**, create a new public IP called **myPublicIP**.</span></span>
6. <span data-ttu-id="05891-130">Em Grupo de Recursos, selecione **myRG**.</span><span class="sxs-lookup"><span data-stu-id="05891-130">Under Resource Group, select **myRG**.</span></span> <span data-ttu-id="05891-131">Em seguida, selecione uma **Localização** apropriada e clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="05891-131">Then select an appropriate **Location**, and then click **OK**.</span></span> <span data-ttu-id="05891-132">A implantação do balanceador de carga começará e levará alguns minutos para ser concluída com êxito.</span><span class="sxs-lookup"><span data-stu-id="05891-132">The load balancer will then start to deploy and will take a few minutes to successfully complete deployment.</span></span>

    ![Atualizando o grupo de recursos do balanceador de carga](./media/load-balancer-get-started-internet-portal/1-load-balancer.png)

## <a name="create-a-back-end-address-pool"></a><span data-ttu-id="05891-134">Criar um pool de endereços de back-end</span><span class="sxs-lookup"><span data-stu-id="05891-134">Create a back-end address pool</span></span>

1. <span data-ttu-id="05891-135">Depois que o balanceador de carga for implantado com êxito, selecione-o dentro de seus recursos.</span><span class="sxs-lookup"><span data-stu-id="05891-135">Once your load balancer has successfully deployed, select it from within your resources.</span></span> <span data-ttu-id="05891-136">Em configurações, selecione Pools de Back-end.</span><span class="sxs-lookup"><span data-stu-id="05891-136">Under settings, select Backend Pools.</span></span> <span data-ttu-id="05891-137">Digite um nome para o seu pool de back-end.</span><span class="sxs-lookup"><span data-stu-id="05891-137">Type a name for your backend pool.</span></span> <span data-ttu-id="05891-138">Em seguida, clique no botão **Adicionar** na parte superior da folha que aparece.</span><span class="sxs-lookup"><span data-stu-id="05891-138">Then click on the **Add** button toward the top of the blade that shows up.</span></span>
2. <span data-ttu-id="05891-139">Clique em **Adicionar máquina virtual** na folha **Adicionar pool de back-end**.</span><span class="sxs-lookup"><span data-stu-id="05891-139">Click on **Add a virtual machine** in the **Add backend pool** blade.</span></span>  <span data-ttu-id="05891-140">Selecione **Escolher um conjunto de disponibilidade** em **Conjunto de disponibilidade** e selecione **myAvailSet**.</span><span class="sxs-lookup"><span data-stu-id="05891-140">Select **Choose an availability set** under **Availability set** and select **myAvailSet**.</span></span> <span data-ttu-id="05891-141">Em seguida, selecione **Escolher as máquinas virtuais** na seção Máquinas Virtuais na folha e clique em **web1** e **web2**, as duas VMs criadas para balanceamento de carga.</span><span class="sxs-lookup"><span data-stu-id="05891-141">Next, select **Choose the virtual machines** under the Virtual Machines section in the blade and click on **web1** and **web2**, the two VMs created for load balancing.</span></span> <span data-ttu-id="05891-142">Verifique se ambas têm marcas de seleção azuis à esquerda, conforme mostrado na imagem abaixo.</span><span class="sxs-lookup"><span data-stu-id="05891-142">Ensure that both have blue check marks to the left as shown in the image below.</span></span> <span data-ttu-id="05891-143">Em seguida, clique em **Selecionar** nessa folha seguido de OK na folha **Escolher máquinas virtuais** e, em seguida, **OK** na folha **Adicionar pool de back-end**.</span><span class="sxs-lookup"><span data-stu-id="05891-143">Then, click **Select** in that blade followed by OK in the **Choose Virtual machines** blade and then **OK** in the **Add backend pool** blade.</span></span>

    ![<span data-ttu-id="05891-144">Adicionando ao pool de endereços de back-end –</span><span class="sxs-lookup"><span data-stu-id="05891-144">Adding to the backend address pool -</span></span> ](./media/load-balancer-get-started-internet-portal/3-load-balancer-backend-02.png)

3. <span data-ttu-id="05891-145">Verifique se as notificações de lista suspensa têm uma atualização relacionada a salvar o pool de back-end do balanceador de carga, além de atualizar o adaptador de rede para ambas as VMs, **web1** e **web2**.</span><span class="sxs-lookup"><span data-stu-id="05891-145">Check to make sure your notifications drop down list has an update regarding saving the load balancer backend pool in addition to updating the network interface for both the VMs **web1** and **web2**.</span></span>

## <a name="create-a-probe-lb-rule-and-nat-rules"></a><span data-ttu-id="05891-146">Criar uma investigação, regra de balanceamento de carga e regras de NAT</span><span class="sxs-lookup"><span data-stu-id="05891-146">Create a probe, LB rule, and NAT rules</span></span>

1. <span data-ttu-id="05891-147">Crie um teste de integridade.</span><span class="sxs-lookup"><span data-stu-id="05891-147">Create a health probe.</span></span>

    <span data-ttu-id="05891-148">Em Configurações do balanceador de carga, selecione Investigações.</span><span class="sxs-lookup"><span data-stu-id="05891-148">Under Settings of your load balancer, select Probes.</span></span> <span data-ttu-id="05891-149">Na parte superior da folha, clique em **Adicionar** .</span><span class="sxs-lookup"><span data-stu-id="05891-149">Then click **Add** located at the top of the blade.</span></span>

    <span data-ttu-id="05891-150">Há duas maneiras de configurar uma investigação: HTTP ou TCP.</span><span class="sxs-lookup"><span data-stu-id="05891-150">There are two ways to configure a probe: HTTP or TCP.</span></span> <span data-ttu-id="05891-151">Este exemplo mostra HTTP, mas TCP pode ser configurado de maneira semelhante.</span><span class="sxs-lookup"><span data-stu-id="05891-151">This example shows HTTP, but TCP can be configured in a similar manner.</span></span>
    <span data-ttu-id="05891-152">Atualize as informações necessárias.</span><span class="sxs-lookup"><span data-stu-id="05891-152">Update the necessary information.</span></span> <span data-ttu-id="05891-153">Conforme mencionado, **myLoadBalancer** balanceará a carga do tráfego na Porta 80.</span><span class="sxs-lookup"><span data-stu-id="05891-153">As mentioned, **myLoadBalancer** will load balance traffic on Port 80.</span></span> <span data-ttu-id="05891-154">O caminho selecionado é HealthProbe.aspx, o Intervalo é de 15 segundos e o Limite não íntegro é 2.</span><span class="sxs-lookup"><span data-stu-id="05891-154">The path selected is HealthProbe.aspx, Interval is 15 seconds, and Unhealthy threshold is 2.</span></span> <span data-ttu-id="05891-155">Quando terminar, clique em **OK** para criar a investigação.</span><span class="sxs-lookup"><span data-stu-id="05891-155">Once finished, click **OK** to create the probe.</span></span>

    <span data-ttu-id="05891-156">Coloque o ponteiro sobre o ícone 'i' para saber mais sobre essas configurações individuais e como elas podem ser alteradas para atender às suas necessidades.</span><span class="sxs-lookup"><span data-stu-id="05891-156">Hover your pointer over the 'i' icon to learn more about these individual configurations and how they can be changed to cater to your requirements.</span></span>

    ![Adicionando uma investigação](./media/load-balancer-get-started-internet-portal/4-load-balancer-probes.png)

2. <span data-ttu-id="05891-158">Crie uma regra de balanceador de carga.</span><span class="sxs-lookup"><span data-stu-id="05891-158">Create a load balancer rule.</span></span>

    <span data-ttu-id="05891-159">Clique em regras de balanceamento de carga na seção Configurações do balanceador de carga.</span><span class="sxs-lookup"><span data-stu-id="05891-159">Click on Load balancing rules in the Settings section of your load balancer.</span></span> <span data-ttu-id="05891-160">Na nova folha, clique em **Adicionar**.</span><span class="sxs-lookup"><span data-stu-id="05891-160">In the new blade, click on **Add**.</span></span> <span data-ttu-id="05891-161">Nomeie a regra.</span><span class="sxs-lookup"><span data-stu-id="05891-161">Name your rule.</span></span> <span data-ttu-id="05891-162">Aqui, seu nome é HTTP.</span><span class="sxs-lookup"><span data-stu-id="05891-162">Here, it is HTTP.</span></span> <span data-ttu-id="05891-163">Escolha as portas de front-end e back-end.</span><span class="sxs-lookup"><span data-stu-id="05891-163">Choose the frontend port and Backend port.</span></span> <span data-ttu-id="05891-164">Aqui, o valor 80 é escolhido para ambas.</span><span class="sxs-lookup"><span data-stu-id="05891-164">Here, 80 is chosen for both.</span></span> <span data-ttu-id="05891-165">Escolha **LB-backend** como o Pool de back-end e a **HealthProbe** criada anteriormente como a Investigação.</span><span class="sxs-lookup"><span data-stu-id="05891-165">Choose **LB-backend** as your Backend pool and the previously created **HealthProbe** as the Probe.</span></span> <span data-ttu-id="05891-166">Outras configurações podem ser definidas de acordo com suas necessidades.</span><span class="sxs-lookup"><span data-stu-id="05891-166">Other configurations can be set according to your requirements.</span></span> <span data-ttu-id="05891-167">Em seguida, clique em OK para salvar a regra de balanceamento de carga.</span><span class="sxs-lookup"><span data-stu-id="05891-167">Then click OK to save the load balancing rule.</span></span>

    ![Adicionando uma regra de balanceamento de carga](./media/load-balancer-get-started-internet-portal/5-load-balancing-rules.png)

3. <span data-ttu-id="05891-169">Criar regras NAT de entrada</span><span class="sxs-lookup"><span data-stu-id="05891-169">Create inbound NAT rules</span></span>

    <span data-ttu-id="05891-170">Clique em regras NAT de entrada na seção de configurações do balanceador de carga.</span><span class="sxs-lookup"><span data-stu-id="05891-170">Click on Inbound NAT rules under the settings section of your load balancer.</span></span> <span data-ttu-id="05891-171">Na nova folha, clique em **Adicionar**.</span><span class="sxs-lookup"><span data-stu-id="05891-171">In the new blade that, click **Add**.</span></span> <span data-ttu-id="05891-172">Em seguida, nomeie a regra NAT de entrada.</span><span class="sxs-lookup"><span data-stu-id="05891-172">Then name your inbound NAT rule.</span></span> <span data-ttu-id="05891-173">Aqui, ela é chamada de **inboundNATrule1**.</span><span class="sxs-lookup"><span data-stu-id="05891-173">Here it is called **inboundNATrule1**.</span></span> <span data-ttu-id="05891-174">O destino deve ser o IP público criado anteriormente.</span><span class="sxs-lookup"><span data-stu-id="05891-174">The destination should be the Public IP previously created.</span></span> <span data-ttu-id="05891-175">Selecione Personalizado em Serviço e selecione o protocolo que você deseja usar.</span><span class="sxs-lookup"><span data-stu-id="05891-175">Select Custom under Service and select the protocol you would like to use.</span></span> <span data-ttu-id="05891-176">Aqui, a opção TCP foi selecionada.</span><span class="sxs-lookup"><span data-stu-id="05891-176">Here TCP is selected.</span></span> <span data-ttu-id="05891-177">Insira a porta 3441 e a Porta de destino, que nesse caso é 3389.</span><span class="sxs-lookup"><span data-stu-id="05891-177">Enter the port, 3441, and the Target port, in this case, 3389.</span></span> <span data-ttu-id="05891-178">Em seguida, clique em OK para salvar essa regra.</span><span class="sxs-lookup"><span data-stu-id="05891-178">then click OK to save this rule.</span></span>

    <span data-ttu-id="05891-179">Depois de criar a primeira regra, repita essa etapa para a segunda regra NAT de entrada chamada inboundNATrule2 da porta 3442 para a Porta de destino 3389.</span><span class="sxs-lookup"><span data-stu-id="05891-179">Once the first rule is created, repeat this step for the second inbound NAT rule called inboundNATrule2 from port 3442 to Target port 3389.</span></span>

    ![Adicionando uma regra NAT de entrada](./media/load-balancer-get-started-internet-portal/6-load-balancer-inbound-nat-rules.png)

## <a name="remove-a-load-balancer"></a><span data-ttu-id="05891-181">Remover um balanceador de carga</span><span class="sxs-lookup"><span data-stu-id="05891-181">Remove a Load Balancer</span></span>

<span data-ttu-id="05891-182">Para excluir um balanceador de carga, selecione o balanceador de carga que deseja remover.</span><span class="sxs-lookup"><span data-stu-id="05891-182">To delete a load balancer, select the load balancer you want to remove.</span></span> <span data-ttu-id="05891-183">Na folha *Balanceador de Carga* , clique em **Excluir** na parte superior da folha.</span><span class="sxs-lookup"><span data-stu-id="05891-183">In the *Load Balancer* blade, click on **Delete** located at the top of the blade.</span></span> <span data-ttu-id="05891-184">Em seguida, selecione **Sim** quando solicitado.</span><span class="sxs-lookup"><span data-stu-id="05891-184">Then select **Yes** when prompted.</span></span>

## <a name="next-steps"></a><span data-ttu-id="05891-185">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="05891-185">Next steps</span></span>

[<span data-ttu-id="05891-186">Introdução à configuração de um balanceador de carga interno</span><span class="sxs-lookup"><span data-stu-id="05891-186">Get started configuring an internal load balancer</span></span>](load-balancer-get-started-ilb-arm-cli.md)

[<span data-ttu-id="05891-187">Configurar um modo de distribuição do balanceador de carga</span><span class="sxs-lookup"><span data-stu-id="05891-187">Configure a load balancer distribution mode</span></span>](load-balancer-distribution-mode.md)

[<span data-ttu-id="05891-188">Definir configurações de tempo limite de TCP ocioso para o balanceador de carga</span><span class="sxs-lookup"><span data-stu-id="05891-188">Configure idle TCP timeout settings for your load balancer</span></span>](load-balancer-tcp-idle-timeout.md)
