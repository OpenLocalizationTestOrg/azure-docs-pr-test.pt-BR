---
title: "scripts de aprendizado de máquina de Python de aaaExecute | Microsoft Docs"
description: "Descreve princípios de design subjacentes ao suporte a Python no Azure Machine Learning e seus cenários de uso básico, recursos e limitações."
keywords: "aprendizado de máquina em python, pandas, python pandas, scripts python, executar scripts python"
services: machine-learning
documentationcenter: 
author: bradsev
manager: jhubbard
editor: cgronlun
ms.assetid: ee9eb764-0d3e-4104-a797-19fc29345d39
ms.service: machine-learning
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/26/2017
ms.author: bradsev
ms.openlocfilehash: 8d23aaa972a46cb1a07ea0f18cc1e24933fe3e6f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="execute-python-machine-learning-scripts-in-azure-machine-learning-studio"></a><span data-ttu-id="3525c-104">Executar scripts Python de aprendizado de máquina no Azure Machine Learning Studio</span><span class="sxs-lookup"><span data-stu-id="3525c-104">Execute Python machine learning scripts in Azure Machine Learning Studio</span></span>

<span data-ttu-id="3525c-105">Este tópico descreve os princípios de design Olá Olá de suporte atual para scripts Python no aprendizado de máquina do Azure subjacente.</span><span class="sxs-lookup"><span data-stu-id="3525c-105">This topic describes hello design principles underlying hello current support for Python scripts in Azure Machine Learning.</span></span> <span data-ttu-id="3525c-106">recursos principais do Hello fornecidos também são descritos, incluindo:</span><span class="sxs-lookup"><span data-stu-id="3525c-106">hello main capabilities provided are also outlined, including:</span></span>

- <span data-ttu-id="3525c-107">executar cenários de uso básico</span><span class="sxs-lookup"><span data-stu-id="3525c-107">execute basic usage scenarios</span></span>
- <span data-ttu-id="3525c-108">pontuação de um experimento em um serviço Web</span><span class="sxs-lookup"><span data-stu-id="3525c-108">score an experiment in a web service</span></span>
- <span data-ttu-id="3525c-109">suporte para importação de código existente</span><span class="sxs-lookup"><span data-stu-id="3525c-109">support for importing existing code</span></span>
- <span data-ttu-id="3525c-110">exportar visualizações</span><span class="sxs-lookup"><span data-stu-id="3525c-110">export visualizations</span></span>
- <span data-ttu-id="3525c-111">executar seleção de recursos supervisionada</span><span class="sxs-lookup"><span data-stu-id="3525c-111">perform supervised feature selection</span></span>
- <span data-ttu-id="3525c-112">entender algumas limitações</span><span class="sxs-lookup"><span data-stu-id="3525c-112">understand some limitations</span></span>

<span data-ttu-id="3525c-113">[Python](https://www.python.org/) é uma ferramenta indispensável no conjunto de ferramentas de saudação de muitos cientistas de dados.</span><span class="sxs-lookup"><span data-stu-id="3525c-113">[Python](https://www.python.org/) is an indispensable tool in hello tool chest of many data scientists.</span></span> <span data-ttu-id="3525c-114">Ele tem:</span><span class="sxs-lookup"><span data-stu-id="3525c-114">It has:</span></span>

* <span data-ttu-id="3525c-115">uma sintaxe elegante e concisa,</span><span class="sxs-lookup"><span data-stu-id="3525c-115">an elegant and concise syntax,</span></span> 
* <span data-ttu-id="3525c-116">suporte de plataforma cruzada,</span><span class="sxs-lookup"><span data-stu-id="3525c-116">cross-platform support,</span></span> 
* <span data-ttu-id="3525c-117">uma grande coleção de bibliotecas eficientes, e</span><span class="sxs-lookup"><span data-stu-id="3525c-117">a vast collection of powerful libraries, and</span></span> 
* <span data-ttu-id="3525c-118">ferramentas de desenvolvimento sólidas.</span><span class="sxs-lookup"><span data-stu-id="3525c-118">mature development tools.</span></span> 

<span data-ttu-id="3525c-119">O Python está sendo usado em todas as fases de um fluxo de trabalho normalmente usado na modelagem de aprendizado de máquina:</span><span class="sxs-lookup"><span data-stu-id="3525c-119">Python is being used in all phases of a workflow typically used in machine learning modeling:</span></span>

- <span data-ttu-id="3525c-120">ingestão de dados e processamento</span><span class="sxs-lookup"><span data-stu-id="3525c-120">data ingest and processing</span></span> 
- <span data-ttu-id="3525c-121">construção de recurso</span><span class="sxs-lookup"><span data-stu-id="3525c-121">feature construction</span></span>
- <span data-ttu-id="3525c-122">treinamento do modelo</span><span class="sxs-lookup"><span data-stu-id="3525c-122">model training</span></span> 
- <span data-ttu-id="3525c-123">validação de modelo</span><span class="sxs-lookup"><span data-stu-id="3525c-123">model validation</span></span>
- <span data-ttu-id="3525c-124">implantação de modelos de saudação</span><span class="sxs-lookup"><span data-stu-id="3525c-124">deployment of hello models</span></span>

<span data-ttu-id="3525c-125">O Azure Machine Learning Studio dá suporte à inclusão de scripts de Python em várias partes de um experimento de aprendizado de máquina, bem como à sua publicação integrada como serviços Web no Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="3525c-125">Azure Machine Learning Studio supports embedding Python scripts into various parts of a machine learning experiment and also seamlessly publishing them as web services on Microsoft Azure.</span></span>

[!INCLUDE [machine-learning-free-trial](../../includes/machine-learning-free-trial.md)]


## <a name="design-principles-of-python-scripts-in-machine-learning"></a><span data-ttu-id="3525c-126">Princípios de design de scripts Python no Machine Learning</span><span class="sxs-lookup"><span data-stu-id="3525c-126">Design principles of Python scripts in Machine Learning</span></span>

<span data-ttu-id="3525c-127">Olá principal interface tooPython no estúdio de aprendizado de máquina do Azure é por meio de saudação [Executar Script Python] [ execute-python-script] módulo mostrado na Figura 1.</span><span class="sxs-lookup"><span data-stu-id="3525c-127">hello primary interface tooPython in Azure Machine Learning Studio is via hello [Execute Python Script][execute-python-script] module shown in Figure 1.</span></span>

![image1](./media/machine-learning-execute-python-scripts/execute-machine-learning-python-scripts-module.png)

![image2](./media/machine-learning-execute-python-scripts/embedded-machine-learning-python-script.png)

<span data-ttu-id="3525c-130">Figura 1.</span><span class="sxs-lookup"><span data-stu-id="3525c-130">Figure 1.</span></span> <span data-ttu-id="3525c-131">Olá **Executar Script Python** módulo.</span><span class="sxs-lookup"><span data-stu-id="3525c-131">hello **Execute Python Script** module.</span></span>

<span data-ttu-id="3525c-132">Olá [Executar Script Python] [ execute-python-script] módulo no Azure ML Studio aceita backup toothree entradas e produz o tootwo saídas (discutidas Olá seção a seguir), como seu análogo de R, hello [ Executar Script R] [ execute-r-script] módulo.</span><span class="sxs-lookup"><span data-stu-id="3525c-132">hello [Execute Python Script][execute-python-script] module in Azure ML Studio accepts up toothree inputs and produces up tootwo outputs (discussed in hello following section), like its R analogue, hello [Execute R Script][execute-r-script] module.</span></span> <span data-ttu-id="3525c-133">Hello toobe de código Python executado é inserido na caixa de parâmetro hello como uma nomeada chamada de função de ponto de entrada `azureml_main`.</span><span class="sxs-lookup"><span data-stu-id="3525c-133">hello Python code toobe executed is entered into hello parameter box as a specially named entry-point function called `azureml_main`.</span></span> <span data-ttu-id="3525c-134">Aqui estão os princípios usado tooimplement esse módulo de design principais do hello:</span><span class="sxs-lookup"><span data-stu-id="3525c-134">Here are hello key design principles used tooimplement this module:</span></span>

1. <span data-ttu-id="3525c-135">*Devem ser expressões idiomáticas para usuários de Python.*</span><span class="sxs-lookup"><span data-stu-id="3525c-135">*Must be idiomatic for Python users.*</span></span> <span data-ttu-id="3525c-136">A maioria dos usuários de Python fatora o código como funções em módulos.</span><span class="sxs-lookup"><span data-stu-id="3525c-136">Most Python users factor their code as functions inside modules.</span></span> <span data-ttu-id="3525c-137">Portanto, colocar um lote de instruções executáveis em um módulo de nível superior é relativamente raro.</span><span class="sxs-lookup"><span data-stu-id="3525c-137">So putting a lot of executable statements in a top-level module is relatively rare.</span></span> <span data-ttu-id="3525c-138">Como resultado, caixa de script hello também usa uma função de Python especialmente nomeada como toojust contrário uma sequência de instruções.</span><span class="sxs-lookup"><span data-stu-id="3525c-138">As a result, hello script box also takes a specially named Python function as opposed toojust a sequence of statements.</span></span> <span data-ttu-id="3525c-139">Olá objetos expostos na função hello são tipos de biblioteca do Python padrão como [Pandas](http://pandas.pydata.org/) quadros de dados e [NumPy](http://www.numpy.org/) matrizes.</span><span class="sxs-lookup"><span data-stu-id="3525c-139">hello objects exposed in hello function are standard Python library types such as [Pandas](http://pandas.pydata.org/) data frames and [NumPy](http://www.numpy.org/) arrays.</span></span>
2. <span data-ttu-id="3525c-140">*Deve ter alta fidelidade entre execuções locais e na nuvem.*</span><span class="sxs-lookup"><span data-stu-id="3525c-140">*Must have high-fidelity between local and cloud executions.*</span></span> <span data-ttu-id="3525c-141">Olá Olá tooexecute de back-end usado código Python baseia [Anaconda](https://store.continuum.io/cshop/anaconda/), um amplamente usada distribuição de Python científica de plataforma cruzada.</span><span class="sxs-lookup"><span data-stu-id="3525c-141">hello backend used tooexecute hello Python code is based on [Anaconda](https://store.continuum.io/cshop/anaconda/), a widely used cross-platform scientific Python distribution.</span></span> <span data-ttu-id="3525c-142">Ele acompanha fechar too200 dos pacotes Python mais comuns de saudação.</span><span class="sxs-lookup"><span data-stu-id="3525c-142">It comes with close too200 of hello most common Python packages.</span></span> <span data-ttu-id="3525c-143">Portanto, os cientistas de dados podem depurar e qualificar seu código no ambiente Anaconda compatível com o Azure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="3525c-143">Therefore, data scientists can debug and qualify their code on their local Azure Machine Learning-compatible Anaconda environment.</span></span> <span data-ttu-id="3525c-144">Em seguida, usar um ambiente de desenvolvimento existente, como [IPython](http://ipython.org/) notebook ou [ferramentas Python para Visual Studio](http://aka.ms/ptvs), toorun-lo como parte de um experimento ML do Azure.</span><span class="sxs-lookup"><span data-stu-id="3525c-144">Then use an existing development environment, such as [IPython](http://ipython.org/) notebook or [Python Tools for Visual Studio](http://aka.ms/ptvs), toorun it as part of an Azure ML experiment.</span></span> <span data-ttu-id="3525c-145">Olá `azureml_main` ponto de entrada é uma função de Python baunilha e, portanto * pode ser criado sem código específico do ML do Azure ou Olá SDK instalado.</span><span class="sxs-lookup"><span data-stu-id="3525c-145">hello `azureml_main` entry point is a vanilla Python function and so ****can be authored without Azure ML-specific code or hello SDK installed.</span></span>
3. <span data-ttu-id="3525c-146">
            *Deve ser totalmente combinável com outros módulos do Azure Machine Learning.*</span><span class="sxs-lookup"><span data-stu-id="3525c-146">*Must be seamlessly composable with other Azure Machine Learning modules.*</span></span> <span data-ttu-id="3525c-147">Olá [Executar Script Python] [ execute-python-script] módulo aceita, como entradas e saídas, conjuntos de dados de aprendizado de máquina do Azure padrão.</span><span class="sxs-lookup"><span data-stu-id="3525c-147">hello [Execute Python Script][execute-python-script] module accepts, as inputs and outputs, standard Azure Machine Learning datasets.</span></span> <span data-ttu-id="3525c-148">estrutura subjacente Olá modo transparente e eficiente preenche Olá tempos de execução de ML do Azure e Python.</span><span class="sxs-lookup"><span data-stu-id="3525c-148">hello underlying framework transparently and efficiently bridges hello Azure ML and Python runtimes.</span></span> <span data-ttu-id="3525c-149">Portanto, o Python pode ser usado em conjunto com fluxos de trabalho do Azure ML existentes, incluindo aqueles que chamam o R e o SQLite.</span><span class="sxs-lookup"><span data-stu-id="3525c-149">So Python can be used in conjunction with existing Azure ML workflows, including those that call into R and SQLite.</span></span> <span data-ttu-id="3525c-150">Como resultado, um cientista de dados pôde compor fluxos de trabalho que:</span><span class="sxs-lookup"><span data-stu-id="3525c-150">A  result, data scientist could compose workflows that:</span></span>
   * <span data-ttu-id="3525c-151">usam o Python e o Pandas para pré-processando e limpeza de dados</span><span class="sxs-lookup"><span data-stu-id="3525c-151">use Python and Pandas for data pre-processing and cleaning</span></span>
   * <span data-ttu-id="3525c-152">transformação de SQL do feed Olá dados tooa, unir vários conjuntos de dados tooform recursos</span><span class="sxs-lookup"><span data-stu-id="3525c-152">feed hello data tooa SQL transformation, joining multiple datasets tooform features</span></span>
   * <span data-ttu-id="3525c-153">treinar modelos usando algoritmos de saudação no aprendizado de máquina do Azure</span><span class="sxs-lookup"><span data-stu-id="3525c-153">train models using hello algorithms in Azure Machine Learning</span></span> 
   * <span data-ttu-id="3525c-154">Avalie e pós-processamento resultados hello usando R.</span><span class="sxs-lookup"><span data-stu-id="3525c-154">evaluate and post-process hello results using R.</span></span>


## <a name="basic-usage-scenarios-in-ml-for-python-scripts"></a><span data-ttu-id="3525c-155">Cenários de uso básico no ML para scripts Python</span><span class="sxs-lookup"><span data-stu-id="3525c-155">Basic usage scenarios in ML for Python scripts</span></span>

<span data-ttu-id="3525c-156">Nesta seção, podemos pesquisa alguns dos usos básicos Olá Olá [Executar Script Python] [ execute-python-script] módulo.</span><span class="sxs-lookup"><span data-stu-id="3525c-156">In this section, we survey some of hello basic uses of hello [Execute Python Script][execute-python-script] module.</span></span> <span data-ttu-id="3525c-157">Módulo de Python toohello entradas são expostos como quadros de dados Pandas.</span><span class="sxs-lookup"><span data-stu-id="3525c-157">Inputs toohello Python module are exposed as Pandas data frames.</span></span> <span data-ttu-id="3525c-158">Olá função deve retornar uma única estrutura de dados Pandas empacotada dentro de um Python [sequência](https://docs.python.org/2/c-api/sequence.html) como uma tupla, lista ou matriz NumPy.</span><span class="sxs-lookup"><span data-stu-id="3525c-158">hello function must return a single Pandas data frame packaged inside of a Python [sequence](https://docs.python.org/2/c-api/sequence.html) such as a tuple, list, or NumPy array.</span></span> <span data-ttu-id="3525c-159">primeiro elemento Olá dessa sequência, em seguida, é retornado em hello, a primeira porta de saída do módulo de saudação.</span><span class="sxs-lookup"><span data-stu-id="3525c-159">hello first element of this sequence is then returned in hello first output port of hello module.</span></span> <span data-ttu-id="3525c-160">O esquema é mostrado na Figura 2.</span><span class="sxs-lookup"><span data-stu-id="3525c-160">This scheme is shown in Figure 2.</span></span>

![image3](./media/machine-learning-execute-python-scripts/map-of-python-script-inputs-outputs.png)

<span data-ttu-id="3525c-162">Figura 2.</span><span class="sxs-lookup"><span data-stu-id="3525c-162">Figure 2.</span></span> <span data-ttu-id="3525c-163">Mapeamento de porta de toooutput de valor de retorno e de tooparameters de portas de entrada.</span><span class="sxs-lookup"><span data-stu-id="3525c-163">Mapping of input ports tooparameters and return value toooutput port.</span></span>

<span data-ttu-id="3525c-164">Mais detalhadas a semântica de como portas de entrada hello obtém tooparameters mapeada de saudação `azureml_main` função são mostrados na tabela 1:</span><span class="sxs-lookup"><span data-stu-id="3525c-164">More detailed semantics of how hello input ports get mapped tooparameters of hello `azureml_main` function are shown in Table 1:</span></span>

![image1T](./media/machine-learning-execute-python-scripts/python-script-inputs-mapped-to-parameters.png)

<span data-ttu-id="3525c-166">Tabela 1.</span><span class="sxs-lookup"><span data-stu-id="3525c-166">Table 1.</span></span> <span data-ttu-id="3525c-167">Mapeamento de parâmetros de toofunction portas de entrada.</span><span class="sxs-lookup"><span data-stu-id="3525c-167">Mapping of input ports toofunction parameters.</span></span>

<span data-ttu-id="3525c-168">mapeamento de saudação entre as portas de entrada e os parâmetros de função é posicional:</span><span class="sxs-lookup"><span data-stu-id="3525c-168">hello mapping between input ports and function parameters is positional:</span></span>

- <span data-ttu-id="3525c-169">porta de entrada conectado primeiro Olá é mapeada toohello primeiro parâmetro da função de saudação.</span><span class="sxs-lookup"><span data-stu-id="3525c-169">hello first connected input port is mapped toohello first parameter of hello function.</span></span> 
- <span data-ttu-id="3525c-170">Olá segunda entrada (se conectado) é mapeado toohello segundo parâmetro de função hello.</span><span class="sxs-lookup"><span data-stu-id="3525c-170">hello second input (if connected) is mapped toohello second parameter of hello function.</span></span>

<span data-ttu-id="3525c-171">Consulte *Python para análise de dados* (o ' Reilly, 2012) por McKinney Oeste para saber mais sobre Pandas Python e como ele pode ser usado toomanipulate dados eficaz e eficiente.</span><span class="sxs-lookup"><span data-stu-id="3525c-171">See *Python for Data Analysis* (O'Reilly, 2012) by W. McKinney for more information on Python Pandas and on how it can be used toomanipulate data effectively and efficiently.</span></span> 


## <a name="translation-of-input-and-output-types"></a><span data-ttu-id="3525c-172">Conversão de tipos de entrada e saída</span><span class="sxs-lookup"><span data-stu-id="3525c-172">Translation of input and output types</span></span> 
<span data-ttu-id="3525c-173">Conjuntos de dados de entrada no Azure ML são quadros toodata convertido em Pandas.</span><span class="sxs-lookup"><span data-stu-id="3525c-173">Input datasets in Azure ML are converted toodata frames in Pandas.</span></span> <span data-ttu-id="3525c-174">Quadros de dados de saída são convertidos tooAzure back ML conjuntos de dados.</span><span class="sxs-lookup"><span data-stu-id="3525c-174">Output data frames are converted back tooAzure ML datasets.</span></span> <span data-ttu-id="3525c-175">Olá conversões a seguir é executada:</span><span class="sxs-lookup"><span data-stu-id="3525c-175">hello following conversions are performed:</span></span>

1. <span data-ttu-id="3525c-176">Colunas de cadeia de caracteres e numéricos são convertidas como-é e valores ausentes em um conjunto de dados são convertidos too'NA' valores em Pandas.</span><span class="sxs-lookup"><span data-stu-id="3525c-176">String and numeric columns are converted as-is and missing values in a dataset are converted too‘NA’ values in Pandas.</span></span> <span data-ttu-id="3525c-177">Olá mesmo conversão ocorre no hello antigos (NA valores na Pandas são convertidos toomissing no ML do Azure).</span><span class="sxs-lookup"><span data-stu-id="3525c-177">hello same conversion happens on hello way back (NA values in Pandas are converted toomissing values in Azure ML).</span></span>
2. <span data-ttu-id="3525c-178">Os vetores de índice no Pandas não têm suporte no Azure ML.</span><span class="sxs-lookup"><span data-stu-id="3525c-178">Index vectors in Pandas are not supported in Azure ML.</span></span> <span data-ttu-id="3525c-179">Todos os quadros de dados de entrada na função de Python Olá sempre tem um índice numérico de 64 bits do número de 0 toohello de linhas menos 1.</span><span class="sxs-lookup"><span data-stu-id="3525c-179">All input data frames in hello Python function always have a 64-bit numerical index from 0 toohello number of rows minus 1.</span></span> 
3. <span data-ttu-id="3525c-180">Conjuntos de dados do Azure ML não podem ter nomes de coluna duplicados e nomes de coluna que não são cadeias de caracteres.</span><span class="sxs-lookup"><span data-stu-id="3525c-180">Azure ML datasets cannot have duplicate column names and column names that are not strings.</span></span> <span data-ttu-id="3525c-181">Se um quadro de dados de saída contém colunas não numéricas, Olá estrutura chama `str` em nomes de coluna hello.</span><span class="sxs-lookup"><span data-stu-id="3525c-181">If an output data frame contains non-numeric columns, hello framework calls `str` on hello column names.</span></span> <span data-ttu-id="3525c-182">Da mesma forma, os nomes de coluna duplicados são automaticamente danificado tooinsure Olá nomes são exclusivos.</span><span class="sxs-lookup"><span data-stu-id="3525c-182">Likewise, any duplicate column names are automatically mangled tooinsure hello names are unique.</span></span> <span data-ttu-id="3525c-183">sufixo de saudação (2) é adicionado a duplicata primeiro toohello, (3) toohello duplicata de segundo e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="3525c-183">hello suffix (2) is added toohello first duplicate, (3) toohello second duplicate, and so on.</span></span>


## <a name="operationalizing-python-scripts"></a><span data-ttu-id="3525c-184">Operacionalizando scripts Python</span><span class="sxs-lookup"><span data-stu-id="3525c-184">Operationalizing Python scripts</span></span>

<span data-ttu-id="3525c-185">Quaisquer módulos [Executar Script Python][execute-python-script] usados em um teste de pontuação são chamados quando publicados como um serviço Web.</span><span class="sxs-lookup"><span data-stu-id="3525c-185">Any [Execute Python Script][execute-python-script] modules used in a scoring experiment are called when published as a web service.</span></span> <span data-ttu-id="3525c-186">Por exemplo, a Figura 3 mostra um experimento de pontuação que contém o código de saudação tooevaluate uma única expressão de Python.</span><span class="sxs-lookup"><span data-stu-id="3525c-186">For example, Figure 3 shows a scoring experiment that contains hello code tooevaluate a single Python expression.</span></span> 

![image4](./media/machine-learning-execute-python-scripts/figure3a.png)

![image5](./media/machine-learning-execute-python-scripts/python-script-with-python-pandas.png)

<span data-ttu-id="3525c-189">Figura 3.</span><span class="sxs-lookup"><span data-stu-id="3525c-189">Figure 3.</span></span> <span data-ttu-id="3525c-190">Serviço Web para avaliar uma expressão de Python.</span><span class="sxs-lookup"><span data-stu-id="3525c-190">Web service for evaluating a Python expression.</span></span>

<span data-ttu-id="3525c-191">Um serviço Web criado com base neste teste:</span><span class="sxs-lookup"><span data-stu-id="3525c-191">A web service created from this experiment:</span></span>

- <span data-ttu-id="3525c-192">aceita como entrada uma expressão Python (como uma cadeia de caracteres)</span><span class="sxs-lookup"><span data-stu-id="3525c-192">takes as input a Python expression (as a string)</span></span>
- <span data-ttu-id="3525c-193">envia o interpretador do Python toohello</span><span class="sxs-lookup"><span data-stu-id="3525c-193">sends it toohello Python interpreter</span></span> 
- <span data-ttu-id="3525c-194">Retorna uma tabela que contém a expressão hello e resultado Olá avaliada.</span><span class="sxs-lookup"><span data-stu-id="3525c-194">returns a table containing both hello expression and hello evaluated result.</span></span>


## <a name="importing-existing-python-script-modules"></a><span data-ttu-id="3525c-195">Importando módulos de script Python existentes</span><span class="sxs-lookup"><span data-stu-id="3525c-195">Importing existing Python script modules</span></span>

<span data-ttu-id="3525c-196">Um caso de uso comum para muitos cientistas de dados é tooincorporate scripts existentes do Python em experiências de ML do Azure.</span><span class="sxs-lookup"><span data-stu-id="3525c-196">A common use-case for many data scientists is tooincorporate existing Python scripts into Azure ML experiments.</span></span> <span data-ttu-id="3525c-197">Em vez de exigir que todos os códigos de ser concatenados e colados em uma caixa de script simples, Olá [Executar Script Python] [ execute-python-script] módulo aceita um arquivo zip que contém módulos Python na porta de entrada terceiro hello.</span><span class="sxs-lookup"><span data-stu-id="3525c-197">Instead of requiring that all code be concatenated and pasted into a single script box, hello [Execute Python Script][execute-python-script] module accepts a zip file that contains Python modules at hello third input port.</span></span> <span data-ttu-id="3525c-198">arquivo Hello é descompactado pelo framework de execução de saudação em tempo de execução e conteúdo de saudação é adicionado toohello caminho da biblioteca do interpretador do Python hello.</span><span class="sxs-lookup"><span data-stu-id="3525c-198">hello file is unzipped by hello execution framework at runtime and hello contents are added toohello library path of hello Python interpreter.</span></span> <span data-ttu-id="3525c-199">Olá `azureml_main` função pode importar esses módulos diretamente do ponto de entrada.</span><span class="sxs-lookup"><span data-stu-id="3525c-199">hello `azureml_main` entry point function can then import these modules directly.</span></span>

<span data-ttu-id="3525c-200">Por exemplo, considere a possibilidade de arquivo hello Hello.py que contém uma função simples "Olá, mundo".</span><span class="sxs-lookup"><span data-stu-id="3525c-200">As an example, consider hello file Hello.py containing a simple “Hello, World” function.</span></span>

![image6](./media/machine-learning-execute-python-scripts/figure4.png)

<span data-ttu-id="3525c-202">Figura 4.</span><span class="sxs-lookup"><span data-stu-id="3525c-202">Figure 4.</span></span> <span data-ttu-id="3525c-203">Função definida pelo usuário no arquivo Hello.py.</span><span class="sxs-lookup"><span data-stu-id="3525c-203">User-defined function in Hello.py file.</span></span>

<span data-ttu-id="3525c-204">Em seguida, criamos um arquivo Hello.zip que contenha o Hello.py:</span><span class="sxs-lookup"><span data-stu-id="3525c-204">Next, we create a file Hello.zip that contains Hello.py:</span></span>

![image7](./media/machine-learning-execute-python-scripts/figure5.png)

<span data-ttu-id="3525c-206">Figura 5.</span><span class="sxs-lookup"><span data-stu-id="3525c-206">Figure 5.</span></span> <span data-ttu-id="3525c-207">Arquivo zip que contém o código Python definido pelo usuário.</span><span class="sxs-lookup"><span data-stu-id="3525c-207">Zip file containing user-defined Python code.</span></span>

<span data-ttu-id="3525c-208">Carregar arquivo zip de saudação como um conjunto de dados no estúdio de aprendizado de máquina do Azure.</span><span class="sxs-lookup"><span data-stu-id="3525c-208">Upload hello zip file as a dataset into Azure Machine Learning Studio.</span></span> <span data-ttu-id="3525c-209">Em seguida, criar e executar um teste que usa código Python a saudação Olá Hello arquivo anexando-porta de entrada terceiro toohello de saudação **Executar Script Python** módulo, conforme mostrado na figura.</span><span class="sxs-lookup"><span data-stu-id="3525c-209">Then create and run an experiment that uses hello Python code in hello Hello.zip file by attaching it toohello third input port of hello **Execute Python Script** module, as shown in this figure.</span></span>

![image8](./media/machine-learning-execute-python-scripts/figure6a.png)

![image9](./media/machine-learning-execute-python-scripts/figure6b.png)

<span data-ttu-id="3525c-212">Figura 6.</span><span class="sxs-lookup"><span data-stu-id="3525c-212">Figure 6.</span></span> <span data-ttu-id="3525c-213">Exemplo de experimento com código Python definido pelo usuário carregado como um arquivo zip.</span><span class="sxs-lookup"><span data-stu-id="3525c-213">Sample experiment with user-defined Python code uploaded as a zip file.</span></span>

<span data-ttu-id="3525c-214">saída de módulo Hello mostra o arquivo zip Olá foi descompactado e essa função hello `print_hello` foi executado.</span><span class="sxs-lookup"><span data-stu-id="3525c-214">hello module output shows that hello zip file has been unpackaged and that hello function `print_hello` has been run.</span></span>
<span data-ttu-id="3525c-215"> 
![image10](./media/machine-learning-execute-python-scripts/figure7.png)</span><span class="sxs-lookup"><span data-stu-id="3525c-215"> 
![image10](./media/machine-learning-execute-python-scripts/figure7.png)</span></span>

<span data-ttu-id="3525c-216">Figura 7.</span><span class="sxs-lookup"><span data-stu-id="3525c-216">Figure 7.</span></span> <span data-ttu-id="3525c-217">Função definida pelo usuário em uso dentro de saudação [Executar Script Python] [ execute-python-script] módulo.</span><span class="sxs-lookup"><span data-stu-id="3525c-217">User-defined function in use inside hello [Execute Python Script][execute-python-script] module.</span></span>


## <a name="working-with-visualizations"></a><span data-ttu-id="3525c-218">Trabalhando com visualizações</span><span class="sxs-lookup"><span data-stu-id="3525c-218">Working with visualizations</span></span>

<span data-ttu-id="3525c-219">Os gráficos criados usando MatplotLib que pode ser visualizado no navegador de saudação podem ser retornados por hello [Executar Script Python][execute-python-script].</span><span class="sxs-lookup"><span data-stu-id="3525c-219">Plots created using MatplotLib that can be visualized on hello browser can be returned by hello [Execute Python Script][execute-python-script].</span></span> <span data-ttu-id="3525c-220">Mas Olá gráficos não são automaticamente redirecionado tooimages quando forem ao usar R. Para que usuário Olá deve explicitamente salvar qualquer gráficos tooPNG arquivos se eles estiverem toobe retornou tooAzure back aprendizado de máquina.</span><span class="sxs-lookup"><span data-stu-id="3525c-220">But hello plots are not automatically redirected tooimages as they are when using R. So hello user must explicitly save any plots tooPNG files if they are toobe returned back tooAzure Machine Learning.</span></span> 

<span data-ttu-id="3525c-221">imagens de toogenerate de MatplotLib, você deve concluir Olá procedimento a seguir:</span><span class="sxs-lookup"><span data-stu-id="3525c-221">toogenerate images from MatplotLib, you must complete hello following procedure:</span></span>

* <span data-ttu-id="3525c-222">comutador hello back-end muito "AGG" da saudação padrão com base em Qt renderizador</span><span class="sxs-lookup"><span data-stu-id="3525c-222">switch hello backend too“AGG” from hello default Qt-based renderer</span></span> 
* <span data-ttu-id="3525c-223">criar um novo objeto de figura</span><span class="sxs-lookup"><span data-stu-id="3525c-223">create a new figure object</span></span> 
* <span data-ttu-id="3525c-224">obter eixo hello e gerar todos os gráficos para ele</span><span class="sxs-lookup"><span data-stu-id="3525c-224">get hello axis and generate all plots into it</span></span> 
* <span data-ttu-id="3525c-225">Salve o arquivo PNG do hello Figura tooa</span><span class="sxs-lookup"><span data-stu-id="3525c-225">save hello figure tooa PNG file</span></span> 

<span data-ttu-id="3525c-226">Esse processo é ilustrado no hello Figura 8 que cria uma matriz de gráfico de dispersão usando a função de scatter_matrix hello em Pandas a seguir.</span><span class="sxs-lookup"><span data-stu-id="3525c-226">This process is illustrated in hello following Figure 8 that creates a scatter plot matrix using hello scatter_matrix function in Pandas.</span></span>

![image1v](./media/machine-learning-execute-python-scripts/figure-v1-8.png)

<span data-ttu-id="3525c-228">Figura 8.</span><span class="sxs-lookup"><span data-stu-id="3525c-228">Figure 8.</span></span> <span data-ttu-id="3525c-229">O código de toosave que matplotlib figuras tooimages.</span><span class="sxs-lookup"><span data-stu-id="3525c-229">Code toosave MatplotLib figures tooimages.</span></span>

<span data-ttu-id="3525c-230">A Figura 9 mostra um experimento que use o script hello mostrada anteriormente tooreturn plota via hello segunda porta de saída.</span><span class="sxs-lookup"><span data-stu-id="3525c-230">Figure 9 shows an experiment that uses hello script shown previously tooreturn plots via hello second output port.</span></span>

![image2v](./media/machine-learning-execute-python-scripts/figure-v2-9a.png) 

![image2v](./media/machine-learning-execute-python-scripts/figure-v2-9b.png) 

<span data-ttu-id="3525c-233">Figura 9.</span><span class="sxs-lookup"><span data-stu-id="3525c-233">Figure 9.</span></span> <span data-ttu-id="3525c-234">Visualizando gráficos de plotagem gerados por meio do código Python.</span><span class="sxs-lookup"><span data-stu-id="3525c-234">Visualizing plots generated from Python code.</span></span>

<span data-ttu-id="3525c-235">É tooreturn possíveis múltiplas figuras salvando-os em diferentes imagens, Olá em tempo de execução do aprendizado de máquina do Azure capta todas as imagens e os concatena para visualização.</span><span class="sxs-lookup"><span data-stu-id="3525c-235">It is possible tooreturn multiple figures by saving them into different images, hello Azure Machine Learning runtime picks up all images and concatenates them for visualization.</span></span>


## <a name="advanced-examples"></a><span data-ttu-id="3525c-236">Exemplos avançados</span><span class="sxs-lookup"><span data-stu-id="3525c-236">Advanced examples</span></span>

<span data-ttu-id="3525c-237">ambiente de Anaconda Olá instalado no aprendizado de máquina do Azure contém pacotes comuns como NumPy, SciPy e Scikits-Learn.</span><span class="sxs-lookup"><span data-stu-id="3525c-237">hello Anaconda environment installed in Azure Machine Learning contains common packages such as NumPy, SciPy, and Scikits-Learn.</span></span> <span data-ttu-id="3525c-238">Esses pacotes podem ser usados com eficiência para várias tarefas de processamento de dados em um pipeline de aprendizado de máquina.</span><span class="sxs-lookup"><span data-stu-id="3525c-238">These packages can be effectively used for various data processing tasks in a machine learning pipeline.</span></span> <span data-ttu-id="3525c-239">Como exemplo, hello script e experiência seguinte ilustram Olá uso de aprendizes ensemble em Scikits-Learn pontuações de importância de recurso toocompute um conjunto de dados.</span><span class="sxs-lookup"><span data-stu-id="3525c-239">As an example, hello following experiment and script illustrate hello use of ensemble learners in Scikits-Learn toocompute feature importance scores for a dataset.</span></span> <span data-ttu-id="3525c-240">pontuações de saudação podem ser usado tooperform supervisionado de seleção de recursos antes de ser alimentado no outro modelo ML.</span><span class="sxs-lookup"><span data-stu-id="3525c-240">hello scores can be used tooperform supervised feature selection before being fed into another ML model.</span></span>

<span data-ttu-id="3525c-241">Aqui está o pontuações de importância de Olá Olá Python função usada toocompute e recursos de saudação de ordem com base em pontuações hello:</span><span class="sxs-lookup"><span data-stu-id="3525c-241">Here is hello Python function used toocompute hello importance scores and order hello features based on hello scores:</span></span>

![image11](./media/machine-learning-execute-python-scripts/figure8.png)

<span data-ttu-id="3525c-243">Figura 10.</span><span class="sxs-lookup"><span data-stu-id="3525c-243">Figure 10.</span></span> <span data-ttu-id="3525c-244">Função toorank recursos pontuações.</span><span class="sxs-lookup"><span data-stu-id="3525c-244">Function toorank features by scores.</span></span>
<span data-ttu-id="3525c-245"> Olá experimento seguinte, em seguida, calcula e retorna pontuações de importância de saudação de recursos no conjunto de dados do hello "Pima índico Diabetes" no aprendizado de máquina do Azure:</span><span class="sxs-lookup"><span data-stu-id="3525c-245">  hello following experiment then computes and returns hello importance scores of features in hello “Pima Indian Diabetes” dataset in Azure Machine Learning:</span></span>

<span data-ttu-id="3525c-246">![image12](./media/machine-learning-execute-python-scripts/figure9a.png)
![image13](./media/machine-learning-execute-python-scripts/figure9b.png)</span><span class="sxs-lookup"><span data-stu-id="3525c-246">![image12](./media/machine-learning-execute-python-scripts/figure9a.png)
![image13](./media/machine-learning-execute-python-scripts/figure9b.png)</span></span>    

<span data-ttu-id="3525c-247">Figura 11.</span><span class="sxs-lookup"><span data-stu-id="3525c-247">Figure 11.</span></span> <span data-ttu-id="3525c-248">Experiência toorank recursos Olá Pima índico Diabetes dataset.</span><span class="sxs-lookup"><span data-stu-id="3525c-248">Experiment toorank features in hello Pima Indian Diabetes dataset.</span></span>

## <a name="limitations"></a><span data-ttu-id="3525c-249">Limitações</span><span class="sxs-lookup"><span data-stu-id="3525c-249">Limitations</span></span>
<span data-ttu-id="3525c-250">Olá [Executar Script Python] [ execute-python-script] atualmente tem Olá seguintes limitações:</span><span class="sxs-lookup"><span data-stu-id="3525c-250">hello [Execute Python Script][execute-python-script] currently has hello following limitations:</span></span>

1. <span data-ttu-id="3525c-251">*Execução em modo seguro.*</span><span class="sxs-lookup"><span data-stu-id="3525c-251">*Sandboxed execution.*</span></span> <span data-ttu-id="3525c-252">tempo de execução do Python Hello está atualmente em modo seguro e, como resultado, não permite sistema de arquivos local acesso toohello toohello ou de rede de maneira persistente.</span><span class="sxs-lookup"><span data-stu-id="3525c-252">hello Python runtime is currently sandboxed and, as a result, does not allow access toohello network or toohello local file system in a persistent manner.</span></span> <span data-ttu-id="3525c-253">Todos os arquivos salvos localmente são isolados e excluídos depois de termina de módulo de saudação.</span><span class="sxs-lookup"><span data-stu-id="3525c-253">All files saved locally are isolated and deleted once hello module finishes.</span></span> <span data-ttu-id="3525c-254">Olá código Python não pode acessar a maioria dos diretórios na máquina de saudação em que é executado, Olá exceção sendo Olá diretório atual e seus subdiretórios.</span><span class="sxs-lookup"><span data-stu-id="3525c-254">hello Python code cannot access most directories on hello machine it runs on, hello exception being hello current directory and its subdirectories.</span></span>
2. <span data-ttu-id="3525c-255">*Falta de suporte para desenvolvimento e depuração sofisticados.*</span><span class="sxs-lookup"><span data-stu-id="3525c-255">*Lack of sophisticated development and debugging support.*</span></span> <span data-ttu-id="3525c-256">módulo de Python Olá atualmente não suporta recursos IDE como intellisense e depuração.</span><span class="sxs-lookup"><span data-stu-id="3525c-256">hello Python module currently does not support IDE features such as intellisense and debugging.</span></span> <span data-ttu-id="3525c-257">Além disso, se o módulo de saudação falhar em tempo de execução, hello rastreamento de pilha de Python completo está disponível.</span><span class="sxs-lookup"><span data-stu-id="3525c-257">Also, if hello module fails at runtime, hello full Python stack trace is available.</span></span> <span data-ttu-id="3525c-258">Mas, ela deve ser exibida no log de saída Olá para o módulo de saudação.</span><span class="sxs-lookup"><span data-stu-id="3525c-258">But it must be viewed in hello output log for hello module.</span></span> <span data-ttu-id="3525c-259">Atualmente, é recomendável desenvolver e depurar scripts Python em um ambiente, como IPython e, em seguida, Importar código Olá para módulo de saudação.</span><span class="sxs-lookup"><span data-stu-id="3525c-259">We currently recommend that you develop and debug Python scripts in an environment such as IPython and then import hello code into hello module.</span></span>
3. <span data-ttu-id="3525c-260">*Saída de estruturas de dados únicas.*</span><span class="sxs-lookup"><span data-stu-id="3525c-260">*Single data frame output.*</span></span> <span data-ttu-id="3525c-261">ponto de entrada Hello Python é tooreturn permitido somente um quadro de dados único como saída.</span><span class="sxs-lookup"><span data-stu-id="3525c-261">hello Python entry point is only permitted tooreturn a single data frame as output.</span></span> <span data-ttu-id="3525c-262">Não é possível no momento tooreturn que Python arbitrário objetos como modelos treinados diretamente fazer toohello tempo de execução do aprendizado de máquina do Azure.</span><span class="sxs-lookup"><span data-stu-id="3525c-262">It is not currently possible tooreturn arbitrary Python objects such as trained models directly back toohello Azure Machine Learning runtime.</span></span> <span data-ttu-id="3525c-263">Como [Executar Script R][execute-r-script], que tem Olá mesma limitação, é possível em muitos casos toopickle objetos em um byte de matriz e, em seguida, retornam que dentro de um quadro de dados.</span><span class="sxs-lookup"><span data-stu-id="3525c-263">Like [Execute R Script][execute-r-script], which has hello same limitation, it is possible in many cases toopickle objects into a byte array and then return that inside of a data frame.</span></span>
4. <span data-ttu-id="3525c-264">*Incapacidade toocustomize instalação Python*.</span><span class="sxs-lookup"><span data-stu-id="3525c-264">*Inability toocustomize Python installation*.</span></span> <span data-ttu-id="3525c-265">Atualmente, hello somente modo tooadd Python módulos personalizados é por meio do mecanismo de arquivo zip Olá descrito anteriormente.</span><span class="sxs-lookup"><span data-stu-id="3525c-265">Currently, hello only way tooadd custom Python modules is via hello zip file mechanism described earlier.</span></span> <span data-ttu-id="3525c-266">Embora isso seja viável para pequenos módulos, é complicado para módulos grandes (especialmente aqueles com DLLs nativos) ou um grande número de módulos.</span><span class="sxs-lookup"><span data-stu-id="3525c-266">While this is feasible for small modules, it is cumbersome for large modules (especially those with native DLLs) or a large number of modules.</span></span> 

## <a name="conclusions"></a><span data-ttu-id="3525c-267">Conclusões</span><span class="sxs-lookup"><span data-stu-id="3525c-267">Conclusions</span></span>
<span data-ttu-id="3525c-268">Olá [Executar Script Python] [ execute-python-script] módulo permite código Python existente de tooincorporate um cientista de dados em fluxos de trabalho de aprendizado de máquina hospedados em nuvem no aprendizado de máquina do Azure e tooseamlessly operacionalizá-los como parte de um serviço web.</span><span class="sxs-lookup"><span data-stu-id="3525c-268">hello [Execute Python Script][execute-python-script] module allows a data scientist tooincorporate existing Python code into cloud-hosted machine learning workflows in Azure Machine Learning and tooseamlessly operationalize them as part of a web service.</span></span> <span data-ttu-id="3525c-269">módulo de script de Python Olá naturalmente interage com outros módulos no aprendizado de máquina do Azure.</span><span class="sxs-lookup"><span data-stu-id="3525c-269">hello Python script module interoperates naturally with other modules in Azure Machine Learning.</span></span> <span data-ttu-id="3525c-270">módulo de saudação pode ser usado para uma variedade de tarefas de processamento de toopre de exploração de dados e extração de um recurso e, em seguida, tooevaluation e pós-processamento de resultados de saudação.</span><span class="sxs-lookup"><span data-stu-id="3525c-270">hello module can be used for a range of tasks from data exploration toopre-processing and feature extraction, and then tooevaluation and post-processing of hello results.</span></span> <span data-ttu-id="3525c-271">Olá back-end em tempo de execução usado para a execução se baseia em Anaconda, uma distribuição de Python bem testada e amplamente usada.</span><span class="sxs-lookup"><span data-stu-id="3525c-271">hello backend runtime used for execution is based on Anaconda, a well-tested and widely used Python distribution.</span></span> <span data-ttu-id="3525c-272">Essa back-end torna simples para você ativos de código existente do quadro tooon em nuvem hello.</span><span class="sxs-lookup"><span data-stu-id="3525c-272">This backend makes it simple for you tooon-board existing code assets into hello cloud.</span></span>

<span data-ttu-id="3525c-273">Esperamos que tooprovide funcionalidade adicional toohello [Executar Script Python] [ execute-python-script] módulo como Olá tootrain de capacidade e colocar os modelos no Python e tooadd melhor suporte para Olá desenvolvimento e depuração de código no estúdio de aprendizado de máquina do Azure.</span><span class="sxs-lookup"><span data-stu-id="3525c-273">We expect tooprovide additional functionality toohello [Execute Python Script][execute-python-script] module such as hello ability tootrain and operationalize models in Python and tooadd better support for hello development and debugging code in Azure Machine Learning Studio.</span></span>

## <a name="next-steps"></a><span data-ttu-id="3525c-274">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="3525c-274">Next steps</span></span>
<span data-ttu-id="3525c-275">Para obter mais informações, consulte Olá [Central de desenvolvedores de Python](https://azure.microsoft.com/develop/python/).</span><span class="sxs-lookup"><span data-stu-id="3525c-275">For more information, see hello [Python Developer Center](https://azure.microsoft.com/develop/python/).</span></span>

<!-- Module References -->
[execute-python-script]: https://msdn.microsoft.com/library/azure/cdb56f95-7f4c-404d-bde7-5bb972e6f232/
[execute-r-script]: https://msdn.microsoft.com/library/azure/30806023-392b-42e0-94d6-6b775a6e0fd5/
