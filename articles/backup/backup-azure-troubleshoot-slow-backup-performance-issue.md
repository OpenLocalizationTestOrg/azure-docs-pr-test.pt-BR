---
title: backup de aaaTroubleshoot lenta de arquivos e pastas no Backup do Azure | Microsoft Docs
description: "Fornece orientação toohelp de solução de problemas você diagnostica a causa de saudação dos problemas de desempenho de Backup do Azure"
services: backup
documentationcenter: 
author: genlin
manager: cshepard
editor: 
ms.assetid: e379180a-db13-4e0c-90e4-28e5dd6f5b14
ms.service: backup
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/13/2017
ms.author: genli
ms.openlocfilehash: 21d79bbd03c2706bc43fcc7c14020cffd6b919c7
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="troubleshoot-slow-backup-of-files-and-folders-in-azure-backup"></a><span data-ttu-id="01f69-103">Solução de problemas de lentidão de backup de arquivos e pastas no Backup do Azure</span><span class="sxs-lookup"><span data-stu-id="01f69-103">Troubleshoot slow backup of files and folders in Azure Backup</span></span>
<span data-ttu-id="01f69-104">Este artigo fornece orientação para a solução toohelp diagnosticar causa Olá de baixo desempenho de backup de arquivos e pastas quando você estiver usando o Backup do Azure.</span><span class="sxs-lookup"><span data-stu-id="01f69-104">This article provides troubleshooting guidance toohelp you diagnose hello cause of slow backup performance for files and folders when you're using Azure Backup.</span></span> <span data-ttu-id="01f69-105">Quando você usa hello Azure Backup agent tooback backup de arquivos, o processo de backup Olá pode demorar mais do que o esperado.</span><span class="sxs-lookup"><span data-stu-id="01f69-105">When you use hello Azure Backup agent tooback up files, hello backup process might take longer than expected.</span></span> <span data-ttu-id="01f69-106">Esse atraso pode ser causado por um ou mais dos seguintes hello:</span><span class="sxs-lookup"><span data-stu-id="01f69-106">This delay might be caused by one or more of hello following:</span></span>

* [<span data-ttu-id="01f69-107">Existem afunilamentos de desempenho no computador de saudação que está sendo feito.</span><span class="sxs-lookup"><span data-stu-id="01f69-107">There are performance bottlenecks on hello computer that’s being backed up.</span></span>](#cause1)
* [<span data-ttu-id="01f69-108">Outro processo ou um software antivírus está interferindo Olá processo de Backup do Azure.</span><span class="sxs-lookup"><span data-stu-id="01f69-108">Another process or antivirus software is interfering with hello Azure Backup process.</span></span>](#cause2)
* [<span data-ttu-id="01f69-109">Agente de Backup Hello está em execução em uma máquina virtual do Azure (VM).</span><span class="sxs-lookup"><span data-stu-id="01f69-109">hello Backup agent is running on an Azure virtual machine (VM).</span></span>](#cause3)  
* [<span data-ttu-id="01f69-110">Você está fazendo backup de um grande número de arquivos (milhões).</span><span class="sxs-lookup"><span data-stu-id="01f69-110">You're backing up a large number (millions) of files.</span></span>](#cause4)

<span data-ttu-id="01f69-111">Antes de iniciar a solução de problemas, recomendamos que você baixe e instale Olá [agente mais recente do Backup do Azure](http://aka.ms/azurebackup_agent).</span><span class="sxs-lookup"><span data-stu-id="01f69-111">Before you start troubleshooting issues, we recommend that you download and install hello [latest Azure Backup agent](http://aka.ms/azurebackup_agent).</span></span> <span data-ttu-id="01f69-112">Fazer atualizações frequentes toohello Backup agent toofix vários problemas, adicionar recursos e melhorar o desempenho.</span><span class="sxs-lookup"><span data-stu-id="01f69-112">We make frequent updates toohello Backup agent toofix various issues, add features, and improve performance.</span></span>

<span data-ttu-id="01f69-113">Também recomendamos que você revise Olá [perguntas frequentes sobre o serviço de Backup do Azure](backup-azure-backup-faq.md) toomake-se de que você não está enfrentando problemas de configuração comuns hello.</span><span class="sxs-lookup"><span data-stu-id="01f69-113">We also strongly recommend that you review hello [Azure Backup service FAQ](backup-azure-backup-faq.md) toomake sure you're not experiencing any of hello common configuration issues.</span></span>

[!INCLUDE [support-disclaimer](../../includes/support-disclaimer.md)]

<a id="cause1"></a>

## <a name="cause-performance-bottlenecks-on-hello-computer"></a><span data-ttu-id="01f69-114">Causa: Afunilamentos de desempenho em computador Olá</span><span class="sxs-lookup"><span data-stu-id="01f69-114">Cause: Performance bottlenecks on hello computer</span></span>
<span data-ttu-id="01f69-115">Afunilamentos no computador de saudação que está sendo feito backup podem causar atrasos.</span><span class="sxs-lookup"><span data-stu-id="01f69-115">Bottlenecks on hello computer that's being backed up can cause delays.</span></span> <span data-ttu-id="01f69-116">Por exemplo, Olá toodisk de tooread ou gravação de capacidade do computador ou dados de toosend de largura de banda disponível pela rede hello, pode provocar afunilamentos.</span><span class="sxs-lookup"><span data-stu-id="01f69-116">For example, hello computer's ability tooread or write toodisk, or available bandwidth toosend data over hello network, can cause bottlenecks.</span></span>

<span data-ttu-id="01f69-117">O Windows fornece uma ferramenta interna que é chamada [Monitor de desempenho](https://technet.microsoft.com/magazine/2008.08.pulse.aspx) (Perfmon) toodetect esses afunilamentos.</span><span class="sxs-lookup"><span data-stu-id="01f69-117">Windows provides a built-in tool that's called [Performance Monitor](https://technet.microsoft.com/magazine/2008.08.pulse.aspx) (Perfmon) toodetect these bottlenecks.</span></span>

<span data-ttu-id="01f69-118">Veja alguns contadores de desempenho e intervalos que podem ser úteis para diagnosticar afunilamentos para obter o backup ideal.</span><span class="sxs-lookup"><span data-stu-id="01f69-118">Here are some performance counters and ranges that can be helpful in diagnosing bottlenecks for optimal backups.</span></span>

| <span data-ttu-id="01f69-119">Contador</span><span class="sxs-lookup"><span data-stu-id="01f69-119">Counter</span></span> | <span data-ttu-id="01f69-120">Status</span><span class="sxs-lookup"><span data-stu-id="01f69-120">Status</span></span> |
| --- | --- |
| <span data-ttu-id="01f69-121">Disco Lógico(Disco Físico) – %ocioso</span><span class="sxs-lookup"><span data-stu-id="01f69-121">Logical Disk(Physical Disk)--%idle</span></span> |<span data-ttu-id="01f69-122">• too50 ocioso 100% % ocioso = Íntegro</span><span class="sxs-lookup"><span data-stu-id="01f69-122">• 100% idle too50% idle = Healthy</span></span></br><span data-ttu-id="01f69-123">• too20 ocioso 49% % ocioso = aviso ou Monitor</span><span class="sxs-lookup"><span data-stu-id="01f69-123">• 49% idle too20% idle = Warning or Monitor</span></span></br><span data-ttu-id="01f69-124">• too0 ocioso 19% % ocioso = crítico ou especificação</span><span class="sxs-lookup"><span data-stu-id="01f69-124">• 19% idle too0% idle = Critical or Out of Spec</span></span> |
| <span data-ttu-id="01f69-125">Disco Lógico(Disco Físico) -- %média Leitura ou Gravação do Disco por S</span><span class="sxs-lookup"><span data-stu-id="01f69-125">Logical Disk(Physical Disk)--%Avg. Disk Sec Read or Write</span></span> |<span data-ttu-id="01f69-126">• 0,001 ms de too0.015 ms = Íntegro</span><span class="sxs-lookup"><span data-stu-id="01f69-126">• 0.001 ms too0.015 ms  = Healthy</span></span></br><span data-ttu-id="01f69-127">• 0,015 ms de too0.025 ms = aviso ou Monitor</span><span class="sxs-lookup"><span data-stu-id="01f69-127">• 0.015 ms too0.025 ms = Warning or Monitor</span></span></br><span data-ttu-id="01f69-128">• 0,026 ms ou mais = Crítico ou Fora de Especificação</span><span class="sxs-lookup"><span data-stu-id="01f69-128">• 0.026 ms or longer = Critical or Out of Spec</span></span> |
| <span data-ttu-id="01f69-129">Disco Lógico(Disco Físico) -- Comprimento da Fila do Disco Atual (para todas as instâncias)</span><span class="sxs-lookup"><span data-stu-id="01f69-129">Logical Disk(Physical Disk)--Current Disk Queue Length (for all instances)</span></span> |<span data-ttu-id="01f69-130">80 solicitações por mais de seis minutos</span><span class="sxs-lookup"><span data-stu-id="01f69-130">80 requests for more than 6 minutes</span></span> |
| <span data-ttu-id="01f69-131">Memória--Bytes de Pool não Pagináveis</span><span class="sxs-lookup"><span data-stu-id="01f69-131">Memory--Pool Non Paged Bytes</span></span> |<span data-ttu-id="01f69-132">• Menos de 60% do pool consumidos = Íntegro</span><span class="sxs-lookup"><span data-stu-id="01f69-132">• Less than 60% of pool consumed = Healthy</span></span><br><span data-ttu-id="01f69-133">• too80 61% % do pool consumido = aviso ou Monitor</span><span class="sxs-lookup"><span data-stu-id="01f69-133">• 61% too80% of pool consumed = Warning or Monitor</span></span></br><span data-ttu-id="01f69-134">• Mais de 80% do pool consumidos = Crítico ou Fora de Especificação</span><span class="sxs-lookup"><span data-stu-id="01f69-134">• Greater than 80% pool consumed = Critical or Out of Spec</span></span> |
| <span data-ttu-id="01f69-135">Memória--Bytes de Pool Pagináveis</span><span class="sxs-lookup"><span data-stu-id="01f69-135">Memory--Pool Paged Bytes</span></span> |<span data-ttu-id="01f69-136">• Menos de 60% do pool consumidos = Íntegro</span><span class="sxs-lookup"><span data-stu-id="01f69-136">• Less than 60% of pool consumed = Healthy</span></span></br><span data-ttu-id="01f69-137">• too80 61% % do pool consumido = aviso ou Monitor</span><span class="sxs-lookup"><span data-stu-id="01f69-137">• 61% too80% of pool consumed = Warning or Monitor</span></span></br><span data-ttu-id="01f69-138">• Mais de 80% do pool consumidos = Crítico ou Fora de Especificação</span><span class="sxs-lookup"><span data-stu-id="01f69-138">• Greater than 80% pool consumed = Critical or Out of Spec</span></span> |
| <span data-ttu-id="01f69-139">Memória--Megabytes disponíveis</span><span class="sxs-lookup"><span data-stu-id="01f69-139">Memory--Available Megabytes</span></span> |<span data-ttu-id="01f69-140">• 50% de memória livre disponíveis ou mais = Íntegro</span><span class="sxs-lookup"><span data-stu-id="01f69-140">• 50% of free memory available or more = Healthy</span></span></br><span data-ttu-id="01f69-141">• 25% de memória livre disponível = Monitor</span><span class="sxs-lookup"><span data-stu-id="01f69-141">• 25% of free memory available = Monitor</span></span></br><span data-ttu-id="01f69-142">• 10% de memória livre disponível = Aviso</span><span class="sxs-lookup"><span data-stu-id="01f69-142">• 10% of free memory available = Warning</span></span></br><span data-ttu-id="01f69-143">• Menos de 100 MB ou 100% de memória livre disponíveis = Crítico ou Fora de Especificação</span><span class="sxs-lookup"><span data-stu-id="01f69-143">• Less than 100 MB or 5% of free memory available = Critical or Out of Spec</span></span> |
| <span data-ttu-id="01f69-144">Processor--\%Tempo do Processor (todas as instâncias)</span><span class="sxs-lookup"><span data-stu-id="01f69-144">Processor--\%Processor Time (all instances)</span></span> |<span data-ttu-id="01f69-145">• Menos de 60% consumido = Íntegro</span><span class="sxs-lookup"><span data-stu-id="01f69-145">• Less than 60% consumed = Healthy</span></span></br><span data-ttu-id="01f69-146">• 61% too90% consumido = Monitor ou cuidado</span><span class="sxs-lookup"><span data-stu-id="01f69-146">• 61% too90% consumed = Monitor or Caution</span></span></br><span data-ttu-id="01f69-147">• 91% too100% consumido = crítico</span><span class="sxs-lookup"><span data-stu-id="01f69-147">• 91% too100% consumed = Critical</span></span> |

> [!NOTE]
> <span data-ttu-id="01f69-148">Se você determinar que a infraestrutura Olá é responsável hello, recomendamos que você desfragmentar discos Olá regularmente para melhorar o desempenho.</span><span class="sxs-lookup"><span data-stu-id="01f69-148">If you determine that hello infrastructure is hello culprit, we recommend that you defragment hello disks regularly for better performance.</span></span>
>
>

<a id="cause2"></a>

## <a name="cause-another-process-or-antivirus-software-interfering-with-azure-backup"></a><span data-ttu-id="01f69-149">Causa: outro processo ou software antivírus está interferindo com o Backup do Azure</span><span class="sxs-lookup"><span data-stu-id="01f69-149">Cause: Another process or antivirus software interfering with Azure Backup</span></span>
<span data-ttu-id="01f69-150">Já vimos várias instâncias em que outros processos no sistema Windows de saudação piorar significativamente o desempenho de saudação processo do agente de Backup do Azure.</span><span class="sxs-lookup"><span data-stu-id="01f69-150">We've seen several instances where other processes in hello Windows system have negatively affected performance of hello Azure Backup agent process.</span></span> <span data-ttu-id="01f69-151">Por exemplo, se você usar o agente de Backup do Azure hello e tooback de programa outro backup de dados, ou se o software antivírus está em execução e tem um bloqueio em arquivos toobe backup, Olá vários bloqueios nos arquivos podem causar contenção.</span><span class="sxs-lookup"><span data-stu-id="01f69-151">For example, if you use both hello Azure Backup agent and another program tooback up data, or if antivirus software is running and has a lock on files toobe backed up, hello multiple locks on files might cause contention.</span></span> <span data-ttu-id="01f69-152">Nessa situação, Olá backup pode falhar ou trabalho Olá pode levar mais tempo do que o esperado.</span><span class="sxs-lookup"><span data-stu-id="01f69-152">In this situation, hello backup might fail, or hello job might take longer than expected.</span></span>

<span data-ttu-id="01f69-153">Olá recomendada neste cenário é tooturn off Olá toosee outro programa de backup se Olá horário de backup para o agente de Backup Azure hello.</span><span class="sxs-lookup"><span data-stu-id="01f69-153">hello best recommendation in this scenario is tooturn off hello other backup program toosee whether hello backup time for hello Azure Backup agent changes.</span></span> <span data-ttu-id="01f69-154">Geralmente, certificando-se de que vários trabalhos de backup não estão em execução no hello simultaneamente é suficiente tooprevent eles afetem uns aos outros.</span><span class="sxs-lookup"><span data-stu-id="01f69-154">Usually, making sure that multiple backup jobs are not running at hello same time is sufficient tooprevent them from affecting each other.</span></span>

<span data-ttu-id="01f69-155">Para programas antivírus, recomendamos que você exclua a seguir Olá arquivos e locais:</span><span class="sxs-lookup"><span data-stu-id="01f69-155">For antivirus programs, we recommend that you exclude hello following files and locations:</span></span>

* <span data-ttu-id="01f69-156">C:\Program Files\Microsoft Azure Recovery Services Agent\bin\cbengine.exe como um processo</span><span class="sxs-lookup"><span data-stu-id="01f69-156">C:\Program Files\Microsoft Azure Recovery Services Agent\bin\cbengine.exe as a process</span></span>
* <span data-ttu-id="01f69-157">C:\Program Files\Microsoft Azure Recovery Services Agent\ pastas</span><span class="sxs-lookup"><span data-stu-id="01f69-157">C:\Program Files\Microsoft Azure Recovery Services Agent\ folders</span></span>
* <span data-ttu-id="01f69-158">Rascunho local (se você não estiver usando o local padrão de saudação)</span><span class="sxs-lookup"><span data-stu-id="01f69-158">Scratch location (if you're not using hello standard location)</span></span>

<a id="cause3"></a>

## <a name="cause-backup-agent-running-on-an-azure-virtual-machine"></a><span data-ttu-id="01f69-159">Causa: agente de backup em execução em uma máquina virtual do Azure</span><span class="sxs-lookup"><span data-stu-id="01f69-159">Cause: Backup agent running on an Azure virtual machine</span></span>
<span data-ttu-id="01f69-160">Se você estiver executando o agente de Backup de saudação em uma máquina virtual, o desempenho será mais lento do que quando você executá-lo em um computador físico.</span><span class="sxs-lookup"><span data-stu-id="01f69-160">If you're running hello Backup agent on a VM, performance will be slower than when you run it on a physical machine.</span></span> <span data-ttu-id="01f69-161">Isso é esperado, devido a limitações de tooIOPS.</span><span class="sxs-lookup"><span data-stu-id="01f69-161">This is expected due tooIOPS limitations.</span></span>  <span data-ttu-id="01f69-162">No entanto, você pode otimizar o desempenho de saudação ao alternar as unidades de dados de saudação que estão sendo feitas backup tooAzure armazenamento Premium.</span><span class="sxs-lookup"><span data-stu-id="01f69-162">However, you can optimize hello performance by switching hello data drives that are being backed up tooAzure Premium Storage.</span></span> <span data-ttu-id="01f69-163">Estamos trabalhando para corrigir esse problema e correção de saudação estará disponível em uma versão futura.</span><span class="sxs-lookup"><span data-stu-id="01f69-163">We're working on fixing this issue, and hello fix will be available in a future release.</span></span>

<a id="cause4"></a>

## <a name="cause-backing-up-a-large-number-millions-of-files"></a><span data-ttu-id="01f69-164">Causa: backup de um grande número de arquivos (milhões)</span><span class="sxs-lookup"><span data-stu-id="01f69-164">Cause: Backing up a large number (millions) of files</span></span>
<span data-ttu-id="01f69-165">Mover um grande volume de dados levará mais tempo do que mover um menor volume de dados.</span><span class="sxs-lookup"><span data-stu-id="01f69-165">Moving a large volume of data will take longer than moving a smaller volume of data.</span></span> <span data-ttu-id="01f69-166">Em alguns casos, o tempo de backup está relacionado toonot Olá somente o tamanho dos dados hello, mas o número Olá dos arquivos ou pastas.</span><span class="sxs-lookup"><span data-stu-id="01f69-166">In some cases, backup time is related toonot only hello size of hello data, but also hello number of files or folders.</span></span> <span data-ttu-id="01f69-167">Isso é especialmente verdadeiro quando milhões de arquivos pequenos (alguns tooa de bytes alguns quilobytes) está sendo feito backup.</span><span class="sxs-lookup"><span data-stu-id="01f69-167">This is especially true when millions of small files (a few bytes tooa few kilobytes) are being backed up.</span></span>

<span data-ttu-id="01f69-168">Esse comportamento ocorre porque, enquanto você estiver fazendo backup de dados de saudação e movê-lo tooAzure, o Azure simultaneamente é catalogação seus arquivos.</span><span class="sxs-lookup"><span data-stu-id="01f69-168">This behavior occurs because while you're backing up hello data and moving it tooAzure, Azure is simultaneously cataloging your files.</span></span> <span data-ttu-id="01f69-169">Em algumas situações raras, a operação de catálogo de saudação pode demorar mais do que o esperado.</span><span class="sxs-lookup"><span data-stu-id="01f69-169">In some rare scenarios, hello catalog operation might take longer than expected.</span></span>

<span data-ttu-id="01f69-170">Olá indicadores a seguir pode ajudar a entender o afunilamento hello e adequadamente sobre as próximas etapas hello:</span><span class="sxs-lookup"><span data-stu-id="01f69-170">hello following indicators can help you understand hello bottleneck and accordingly work on hello next steps:</span></span>

* <span data-ttu-id="01f69-171">**Interface do usuário é mostrando o andamento de transferência de dados de saudação**.</span><span class="sxs-lookup"><span data-stu-id="01f69-171">**UI is showing progress for hello data transfer**.</span></span> <span data-ttu-id="01f69-172">dados de saudação ainda estão sendo transferidos.</span><span class="sxs-lookup"><span data-stu-id="01f69-172">hello data is still being transferred.</span></span> <span data-ttu-id="01f69-173">largura de banda de rede Hello ou tamanho de saudação de dados pode estar causando atrasos.</span><span class="sxs-lookup"><span data-stu-id="01f69-173">hello network bandwidth or hello size of data might be causing delays.</span></span>
* <span data-ttu-id="01f69-174">**Interface do usuário não está mostrando o andamento da saudação para transferência de dados**.</span><span class="sxs-lookup"><span data-stu-id="01f69-174">**UI is not showing progress for hello data transfer**.</span></span> <span data-ttu-id="01f69-175">Olá abrir logs localizado em C:\Microsoft Azure Recovery Services Agent\Temp e, em seguida, verifique Olá FileProvider::EndData entrada nos logs de saudação.</span><span class="sxs-lookup"><span data-stu-id="01f69-175">Open hello logs located at C:\Microsoft Azure Recovery Services Agent\Temp, and then check for hello FileProvider::EndData entry in hello logs.</span></span> <span data-ttu-id="01f69-176">Essa entrada significa que terminar de transferência de dados hello e operação de catálogo hello está acontecendo.</span><span class="sxs-lookup"><span data-stu-id="01f69-176">This entry signifies that hello data transfer finished and hello catalog operation is happening.</span></span> <span data-ttu-id="01f69-177">Não cancele os trabalhos de backup hello.</span><span class="sxs-lookup"><span data-stu-id="01f69-177">Don't cancel hello backup jobs.</span></span> <span data-ttu-id="01f69-178">Em vez disso, aguarde um pouco mais para Olá toofinish de operação de catálogo.</span><span class="sxs-lookup"><span data-stu-id="01f69-178">Instead, wait a little longer for hello catalog operation toofinish.</span></span> <span data-ttu-id="01f69-179">Se Olá problema persistir, entre em contato com [suporte do Azure](https://portal.azure.com/#create/Microsoft.Support).</span><span class="sxs-lookup"><span data-stu-id="01f69-179">If hello problem persists, contact [Azure support](https://portal.azure.com/#create/Microsoft.Support).</span></span>
