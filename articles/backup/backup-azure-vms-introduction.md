---
title: aaaPlanning sua infra-estrutura de backup de VM no Azure | Microsoft Docs
description: "Considerações importantes ao planejar tooback backup de máquinas virtuais no Azure"
services: backup
documentationcenter: 
author: markgalioto
manager: carmonm
editor: 
keywords: "backup de vms, backup de máquinas virtuais"
ms.assetid: 19d2cf82-1f60-43e1-b089-9238042887a9
ms.service: backup
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 7/18/2017
ms.author: markgal;trinadhk
ms.openlocfilehash: d11982431610000293038ee6aa7df8e7bc2d8b70
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="plan-your-vm-backup-infrastructure-in-azure"></a><span data-ttu-id="05f2a-104">Planejar sua infraestrutura de backup da VM no Azure</span><span class="sxs-lookup"><span data-stu-id="05f2a-104">Plan your VM backup infrastructure in Azure</span></span>
<span data-ttu-id="05f2a-105">Este artigo fornece desempenho e recurso sugestões toohelp planejar sua infra-estrutura de backup de VM.</span><span class="sxs-lookup"><span data-stu-id="05f2a-105">This article provides performance and resource suggestions toohelp you plan your VM backup infrastructure.</span></span> <span data-ttu-id="05f2a-106">Ele também define os aspectos fundamentais do serviço de Backup Olá; Esses aspectos podem ser essenciais para determinar sua arquitetura, planejamento de capacidade e agendamento.</span><span class="sxs-lookup"><span data-stu-id="05f2a-106">It also defines key aspects of hello Backup service; these aspects can be critical in determining your architecture, capacity planning, and scheduling.</span></span> <span data-ttu-id="05f2a-107">Se você tiver [preparar o ambiente](backup-azure-vms-prepare.md), planejamento é a próxima etapa de saudação antes de começar a [tooback máquinas virtuais](backup-azure-vms.md).</span><span class="sxs-lookup"><span data-stu-id="05f2a-107">If you've [prepared your environment](backup-azure-vms-prepare.md), planning is hello next step before you begin [tooback up VMs](backup-azure-vms.md).</span></span> <span data-ttu-id="05f2a-108">Se você precisar de mais informações sobre máquinas virtuais do Azure, consulte Olá [documentação de máquinas virtuais](https://azure.microsoft.com/documentation/services/virtual-machines/).</span><span class="sxs-lookup"><span data-stu-id="05f2a-108">If you need more information about Azure virtual machines, see hello [Virtual Machines documentation](https://azure.microsoft.com/documentation/services/virtual-machines/).</span></span>

## <a name="how-does-azure-back-up-virtual-machines"></a><span data-ttu-id="05f2a-109">Como o Azure faz backup de máquinas virtuais?</span><span class="sxs-lookup"><span data-stu-id="05f2a-109">How does Azure back up virtual machines?</span></span>
<span data-ttu-id="05f2a-110">Quando Olá serviço Backup do Azure inicia um trabalho de backup no tempo de saudação agendado, ela aciona Olá extensão backup tootake um instantâneo point-in-time.</span><span class="sxs-lookup"><span data-stu-id="05f2a-110">When hello Azure Backup service initiates a backup job at hello scheduled time, it triggers hello backup extension tootake a point-in-time snapshot.</span></span> <span data-ttu-id="05f2a-111">saudação de serviço de Backup do Azure usa Olá _VMSnapshot_ extensão no Windows e hello _VMSnapshotLinux_ extensão no Linux.</span><span class="sxs-lookup"><span data-stu-id="05f2a-111">hello Azure Backup service uses hello _VMSnapshot_ extension in Windows, and hello _VMSnapshotLinux_ extension in Linux.</span></span> <span data-ttu-id="05f2a-112">extensão de saudação é instalado durante o primeiro backup VM hello.</span><span class="sxs-lookup"><span data-stu-id="05f2a-112">hello extension is installed during hello first VM backup.</span></span> <span data-ttu-id="05f2a-113">extensão de saudação tooinstall, Olá VM deve estar em execução.</span><span class="sxs-lookup"><span data-stu-id="05f2a-113">tooinstall hello extension, hello VM must be running.</span></span> <span data-ttu-id="05f2a-114">Se hello VM não está em execução, Olá serviço de Backup tira um instantâneo de saudação armazenamento subjacente (já que nenhum aplicativo grava ocorre durante a saudação que VM estiver parada).</span><span class="sxs-lookup"><span data-stu-id="05f2a-114">If hello VM is not running, hello Backup service takes a snapshot of hello underlying storage (since no application writes occur while hello VM is stopped).</span></span>

<span data-ttu-id="05f2a-115">Ao tirar um instantâneo de máquinas virtuais do Windows, o serviço de Backup Olá coordena com hello Volume Shadow Copy Service (VSS) tooget um instantâneo consistente dos discos da máquina de virtual hello.</span><span class="sxs-lookup"><span data-stu-id="05f2a-115">When taking a snapshot of Windows VMs, hello Backup service coordinates with hello Volume Shadow Copy Service (VSS) tooget a consistent snapshot of hello virtual machine's disks.</span></span> <span data-ttu-id="05f2a-116">Se você estiver fazendo backup de máquinas virtuais do Linux, você pode escrever a consistência de tooensure seus próprios scripts personalizados quando tirar um instantâneo VM.</span><span class="sxs-lookup"><span data-stu-id="05f2a-116">If you're backing up Linux VMs, you can write your own custom scripts tooensure consistency when taking a VM snapshot.</span></span> <span data-ttu-id="05f2a-117">Detalhes sobre como invocar esses scripts são fornecidos posteriormente neste artigo.</span><span class="sxs-lookup"><span data-stu-id="05f2a-117">Details on invoking these scripts are provided later in this article.</span></span>

<span data-ttu-id="05f2a-118">Depois de saudação serviço Backup do Azure usa instantâneo hello, dados saudação são toohello transferidos cofre.</span><span class="sxs-lookup"><span data-stu-id="05f2a-118">Once hello Azure Backup service takes hello snapshot, hello data is transferred toohello vault.</span></span> <span data-ttu-id="05f2a-119">toomaximize eficiência, o serviço de saudação identifica e transfere apenas os blocos de dados que foram alterados desde o backup anterior de saudação hello.</span><span class="sxs-lookup"><span data-stu-id="05f2a-119">toomaximize efficiency, hello service identifies and transfers only hello blocks of data that have changed since hello previous backup.</span></span>

![Arquitetura de backup de máquinas virtuais do Azure](./media/backup-azure-vms-introduction/vmbackup-architecture.png)

<span data-ttu-id="05f2a-121">Quando a transferência de dados de saudação for concluída, Olá é removido e um ponto de recuperação é criado.</span><span class="sxs-lookup"><span data-stu-id="05f2a-121">When hello data transfer is complete, hello snapshot is removed and a recovery point is created.</span></span>

> [!NOTE]
> 1. <span data-ttu-id="05f2a-122">Durante o processo de backup hello, Backup do Azure não inclui Olá temporário em disco anexado toohello VM.</span><span class="sxs-lookup"><span data-stu-id="05f2a-122">During hello backup process, Azure Backup doesn't include hello temporary disk attached toohello virtual machine.</span></span> <span data-ttu-id="05f2a-123">Para obter mais informações, consulte o blog de saudação em [armazenamento temporário](https://blogs.msdn.microsoft.com/mast/2013/12/06/understanding-the-temporary-drive-on-windows-azure-virtual-machines/).</span><span class="sxs-lookup"><span data-stu-id="05f2a-123">For more information, see hello blog on [temporary storage](https://blogs.msdn.microsoft.com/mast/2013/12/06/understanding-the-temporary-drive-on-windows-azure-virtual-machines/).</span></span>
> 2. <span data-ttu-id="05f2a-124">Desde o Backup do Azure usa um instantâneo do nível de armazenamento e transferências que toovault de instantâneo, não altere chaves de conta de armazenamento Olá até a conclusão do trabalho de backup hello.</span><span class="sxs-lookup"><span data-stu-id="05f2a-124">Since Azure Backup takes a storage-level snapshot and transfers that snapshot toovault, do not change hello storage account keys until hello backup job finishes.</span></span>
> 3. <span data-ttu-id="05f2a-125">Para VMs premium, podemos copiar conta de toostorage Olá instantâneo.</span><span class="sxs-lookup"><span data-stu-id="05f2a-125">For premium VMs, we copy hello snapshot toostorage account.</span></span> <span data-ttu-id="05f2a-126">Trata-se de que o serviço de Backup do Azure obtém IOPS suficientes para a transferência de dados toovault de toomake.</span><span class="sxs-lookup"><span data-stu-id="05f2a-126">This is toomake sure that Azure Backup service gets sufficient IOPS for transferring data toovault.</span></span> <span data-ttu-id="05f2a-127">Essa cópia adicional de armazenamento é cobrada de acordo com a saudação tamanho alocado de VM.</span><span class="sxs-lookup"><span data-stu-id="05f2a-127">This additional copy of storage is charged as per hello VM allocated size.</span></span> 
>

### <a name="data-consistency"></a><span data-ttu-id="05f2a-128">Consistência de dados</span><span class="sxs-lookup"><span data-stu-id="05f2a-128">Data consistency</span></span>
<span data-ttu-id="05f2a-129">Fazendo backup e restaurando dados críticos de negócios é complicada pelo fato de saudação que dados corporativos críticos devem ser feitos enquanto os aplicativos de saudação que produzem Olá dados estão em execução.</span><span class="sxs-lookup"><span data-stu-id="05f2a-129">Backing up and restoring business critical data is complicated by hello fact that business critical data must be backed up while hello applications that produce hello data are running.</span></span> <span data-ttu-id="05f2a-130">tooaddress essa, Backup do Azure suporta os backups consistentes com aplicativos para Windows e VMs do Linux</span><span class="sxs-lookup"><span data-stu-id="05f2a-130">tooaddress this, Azure Backup supports application-consistent backups for both Windows and Linux VMs</span></span>
#### <a name="windows-vm"></a><span data-ttu-id="05f2a-131">VM Windows</span><span class="sxs-lookup"><span data-stu-id="05f2a-131">Windows VM</span></span>
<span data-ttu-id="05f2a-132">O Backup do Azure realiza backups completos de VSS em VMs do Windows (leia mais sobre [backup completo de VSS](http://blogs.technet.com/b/filecab/archive/2008/05/21/what-is-the-difference-between-vss-full-backup-and-vss-copy-backup-in-windows-server-2008.aspx)).</span><span class="sxs-lookup"><span data-stu-id="05f2a-132">Azure Backup takes VSS full backups on Windows VMs (read more about [VSS full backup](http://blogs.technet.com/b/filecab/archive/2008/05/21/what-is-the-difference-between-vss-full-backup-and-vss-copy-backup-in-windows-server-2008.aspx)).</span></span> <span data-ttu-id="05f2a-133">backups de cópia VSS tooenable, Olá conjunto de toobe de necessidades de chave do registro a seguir em Olá VM.</span><span class="sxs-lookup"><span data-stu-id="05f2a-133">tooenable VSS copy backups, hello following registry key needs toobe set on hello VM.</span></span>

```
[HKEY_LOCAL_MACHINE\SOFTWARE\MICROSOFT\BCDRAGENT]
"USEVSSCOPYBACKUP"="TRUE"
```

#### <a name="linux-vms"></a><span data-ttu-id="05f2a-134">VMs Linux</span><span class="sxs-lookup"><span data-stu-id="05f2a-134">Linux VMs</span></span>
<span data-ttu-id="05f2a-135">O Backup do Azure fornece uma estrutura de script.</span><span class="sxs-lookup"><span data-stu-id="05f2a-135">Azure Backup provides a scripting framework.</span></span> <span data-ttu-id="05f2a-136">consistência do aplicativo tooensure ao fazer backup de máquinas virtuais Linux, criar personalizados scripts de pré e pós-que controlam o fluxo de trabalho de backup hello e ambiente.</span><span class="sxs-lookup"><span data-stu-id="05f2a-136">tooensure application consistency when backing up Linux VMs, create custom pre-scripts and post-scripts that control hello backup workflow and environment.</span></span> <span data-ttu-id="05f2a-137">O Backup do Azure invoca pré-script Olá antes de tirar instantâneo VM hello e invoca pós-script Olá, após a conclusão do trabalho de instantâneo VM hello.</span><span class="sxs-lookup"><span data-stu-id="05f2a-137">Azure Backup invokes hello pre-script before taking hello VM snapshot and invokes hello post-script once hello VM snapshot job completes.</span></span> <span data-ttu-id="05f2a-138">Para obter mais detalhes, consulte [Backup de VM Linux consistente com o aplicativo usando pré-script e pós-script](https://docs.microsoft.com/azure/backup/backup-azure-linux-app-consistent).</span><span class="sxs-lookup"><span data-stu-id="05f2a-138">For more details, see [application consistent VM backups using pre-script and post-script](https://docs.microsoft.com/azure/backup/backup-azure-linux-app-consistent).</span></span>
> [!NOTE]
> <span data-ttu-id="05f2a-139">O Backup do Azure apenas invoca Olá gravados pelo cliente pré e pós-scripts.</span><span class="sxs-lookup"><span data-stu-id="05f2a-139">Azure Backup only invokes hello customer-written pre- and post-scripts.</span></span> <span data-ttu-id="05f2a-140">Se o pré-script de Olá e pós-scripts executar com êxito, o Backup do Azure marca Olá ponto de recuperação como aplicativo consistente.</span><span class="sxs-lookup"><span data-stu-id="05f2a-140">If hello pre-script and post-scripts execute successfully, Azure Backup marks hello recovery point as application consistent.</span></span> <span data-ttu-id="05f2a-141">No entanto, o cliente Olá é basicamente responsável pelos consistência do aplicativo hello ao usar scripts personalizados.</span><span class="sxs-lookup"><span data-stu-id="05f2a-141">However, hello customer is ultimately responsible for hello application consistency when using custom scripts.</span></span>
>


<span data-ttu-id="05f2a-142">Esta tabela explica os tipos de saudação de consistência e hello condições que ocorrem em durante o backup de VM do Azure e os procedimentos de restauração.</span><span class="sxs-lookup"><span data-stu-id="05f2a-142">This table explains hello types of consistency and hello conditions that they occur under during Azure VM backup and restore procedures.</span></span>

| <span data-ttu-id="05f2a-143">Consistência</span><span class="sxs-lookup"><span data-stu-id="05f2a-143">Consistency</span></span> | <span data-ttu-id="05f2a-144">Baseado em VSS</span><span class="sxs-lookup"><span data-stu-id="05f2a-144">VSS-based</span></span> | <span data-ttu-id="05f2a-145">Explicação e detalhes</span><span class="sxs-lookup"><span data-stu-id="05f2a-145">Explanation and details</span></span> |
| --- | --- | --- |
| <span data-ttu-id="05f2a-146">Consistência de aplicativo</span><span class="sxs-lookup"><span data-stu-id="05f2a-146">Application consistency</span></span> |<span data-ttu-id="05f2a-147">Sim para Windows</span><span class="sxs-lookup"><span data-stu-id="05f2a-147">Yes for Windows</span></span>|<span data-ttu-id="05f2a-148">A consistência do aplicativo é ideal para cargas de trabalho, pois garante que:</span><span class="sxs-lookup"><span data-stu-id="05f2a-148">Application consistency is ideal for workloads as it ensures that:</span></span><ol><li> <span data-ttu-id="05f2a-149">Olá VM *é inicializado*.</span><span class="sxs-lookup"><span data-stu-id="05f2a-149">hello VM *boots up*.</span></span> <li><span data-ttu-id="05f2a-150">Não há *corrupção*.</span><span class="sxs-lookup"><span data-stu-id="05f2a-150">There is *no corruption*.</span></span> <li><span data-ttu-id="05f2a-151">*Não há perda de dados*.</span><span class="sxs-lookup"><span data-stu-id="05f2a-151">There is *no data loss*.</span></span><li> <span data-ttu-id="05f2a-152">dados saudação são aplicativo toohello consistente que usa dados hello, envolvendo o aplicativo hello no tempo de saudação do backup – usando o script VSS ou pré/pós.</span><span class="sxs-lookup"><span data-stu-id="05f2a-152">hello data is consistent toohello application that uses hello data, by involving hello application at hello time of backup--using VSS or pre/post script.</span></span></ol> <li><span data-ttu-id="05f2a-153">*Máquinas virtuais do Windows*-cargas de trabalho Microsoft mais tem gravadores VSS que realizam ações específicas da carga de trabalho relacionados toodata consistência.</span><span class="sxs-lookup"><span data-stu-id="05f2a-153">*Windows VMs*- Most Microsoft workloads have VSS writers that do workload-specific actions related toodata consistency.</span></span> <span data-ttu-id="05f2a-154">Por exemplo, Microsoft SQL Server tem um gravador VSS que garante que o arquivo de log de transações do hello gravações toohello e banco de dados de saudação são feitas corretamente.</span><span class="sxs-lookup"><span data-stu-id="05f2a-154">For example, Microsoft SQL Server has a VSS writer that ensures that hello writes toohello transaction log file and hello database are done correctly.</span></span> <span data-ttu-id="05f2a-155">Para backups de VM do Windows Azure, toocreate um ponto de recuperação consistentes com aplicativos, extensão de backup Olá deve invocar o fluxo de trabalho do hello VSS e concluí-la antes de tirar instantâneo VM hello.</span><span class="sxs-lookup"><span data-stu-id="05f2a-155">For Azure Windows VM backups, toocreate an application-consistent recovery point, hello backup extension must invoke hello VSS workflow and complete it before taking hello VM snapshot.</span></span> <span data-ttu-id="05f2a-156">Para hello Azure VM instantâneo toobe precisa, gravadores VSS de saudação de todos os aplicativos de máquina virtual do Azure devem concluir também.</span><span class="sxs-lookup"><span data-stu-id="05f2a-156">For hello Azure VM snapshot toobe accurate, hello VSS writers of all Azure VM applications must complete as well.</span></span> <span data-ttu-id="05f2a-157">(Aprenda Olá [Noções básicas do VSS](http://blogs.technet.com/b/josebda/archive/2007/10/10/the-basics-of-the-volume-shadow-copy-service-vss.aspx) e aprofundar nos detalhes de saudação do [como ele funciona](https://technet.microsoft.com/library/cc785914%28v=ws.10%29.aspx)).</span><span class="sxs-lookup"><span data-stu-id="05f2a-157">(Learn hello [basics of VSS](http://blogs.technet.com/b/josebda/archive/2007/10/10/the-basics-of-the-volume-shadow-copy-service-vss.aspx) and dive deep into hello details of [how it works](https://technet.microsoft.com/library/cc785914%28v=ws.10%29.aspx)).</span></span> </li> <li> <span data-ttu-id="05f2a-158">*Máquinas virtuais de Linux*-os clientes podem executar [consistência do aplicativo personalizado tooensure script de pré e pós-](https://docs.microsoft.com/azure/backup/backup-azure-linux-app-consistent).</span><span class="sxs-lookup"><span data-stu-id="05f2a-158">*Linux VMs*- Customers can execute [custom pre-script and post-script tooensure application consistency](https://docs.microsoft.com/azure/backup/backup-azure-linux-app-consistent).</span></span> </li> |
| <span data-ttu-id="05f2a-159">Consistência do sistema de arquivos</span><span class="sxs-lookup"><span data-stu-id="05f2a-159">File-system consistency</span></span> |<span data-ttu-id="05f2a-160">Sim - para computadores baseados em Windows</span><span class="sxs-lookup"><span data-stu-id="05f2a-160">Yes - for Windows-based computers</span></span> |<span data-ttu-id="05f2a-161">Há dois cenários em que o ponto de recuperação Olá pode ser *no sistema de arquivos consistente*:</span><span class="sxs-lookup"><span data-stu-id="05f2a-161">There are two scenarios where hello recovery point can be *file-system consistent*:</span></span><ul><li><span data-ttu-id="05f2a-162">Backups de VMs Linux no Azure, sem pré-script/pós-script ou se o pré-script/pós-script falhou.</span><span class="sxs-lookup"><span data-stu-id="05f2a-162">Backups of Linux VMs in Azure, without pre-script/post-script or if pre-script/post-script failed.</span></span> <li><span data-ttu-id="05f2a-163">Falha do VSS durante o backup de VMs Windows no Azure.</span><span class="sxs-lookup"><span data-stu-id="05f2a-163">VSS failure during backup for Windows VMs in Azure.</span></span></li></ul> <span data-ttu-id="05f2a-164">Em ambos os casos esses Olá melhor que pode ser feito é tooensure que:</span><span class="sxs-lookup"><span data-stu-id="05f2a-164">In both these cases, hello best that can be done is tooensure that:</span></span> <ol><li> <span data-ttu-id="05f2a-165">Olá VM *é inicializado*.</span><span class="sxs-lookup"><span data-stu-id="05f2a-165">hello VM *boots up*.</span></span> <li><span data-ttu-id="05f2a-166">Não há *corrupção*.</span><span class="sxs-lookup"><span data-stu-id="05f2a-166">There is *no corruption*.</span></span><li><span data-ttu-id="05f2a-167">*Não há perda de dados*.</span><span class="sxs-lookup"><span data-stu-id="05f2a-167">There is *no data loss*.</span></span></ol> <span data-ttu-id="05f2a-168">Aplicativos precisam tooimplement seu próprios "corrigir o" mecanismo em dados Olá restaurado.</span><span class="sxs-lookup"><span data-stu-id="05f2a-168">Applications need tooimplement their own "fix-up" mechanism on hello restored data.</span></span> |
| <span data-ttu-id="05f2a-169">Consistência de falhas</span><span class="sxs-lookup"><span data-stu-id="05f2a-169">Crash consistency</span></span> |<span data-ttu-id="05f2a-170">Não</span><span class="sxs-lookup"><span data-stu-id="05f2a-170">No</span></span> |<span data-ttu-id="05f2a-171">Essa situação é máquina virtual de tooa equivalente com "Falha" (por meio de um software ou hardware Redefinir).</span><span class="sxs-lookup"><span data-stu-id="05f2a-171">This situation is equivalent tooa virtual machine experiencing a "crash" (through either a soft or hard reset).</span></span> <span data-ttu-id="05f2a-172">Consistência de falha normalmente acontece quando Olá máquina virtual do Azure está desligado no momento de saudação do backup.</span><span class="sxs-lookup"><span data-stu-id="05f2a-172">Crash consistency typically happens when hello Azure virtual machine is shut down at hello time of backup.</span></span> <span data-ttu-id="05f2a-173">Um ponto de recuperação consistente não fornece nenhuma garantia de consistência de saudação dos dados de saudação na mídia de armazenamento hello – da perspectiva de saudação do sistema operacional de saudação ou aplicativo hello.</span><span class="sxs-lookup"><span data-stu-id="05f2a-173">A crash-consistent recovery point provides no guarantees around hello consistency of hello data on hello storage medium--either from hello perspective of hello operating system or hello application.</span></span> <span data-ttu-id="05f2a-174">Somente os dados Olá que já existe no disco Olá no momento de saudação do backup são capturados e backup.</span><span class="sxs-lookup"><span data-stu-id="05f2a-174">Only hello data that already exists on hello disk at hello time of backup is captured and backed up.</span></span> <br/> <br/> <span data-ttu-id="05f2a-175">Embora não haja nenhuma garantia, geralmente, Olá a inicialização do sistema operacional, seguida de verificação de disco procedimento, como chkdsk, toofix quaisquer erros de corrupção.</span><span class="sxs-lookup"><span data-stu-id="05f2a-175">While there are no guarantees, usually, hello operating system boots, followed by disk-checking procedure, like chkdsk, toofix any corruption errors.</span></span> <span data-ttu-id="05f2a-176">Todos os dados na memória ou gravações não foram transferidos toohello disco serão perdidas.</span><span class="sxs-lookup"><span data-stu-id="05f2a-176">Any in-memory data or writes that have not been transferred toohello disk are lost.</span></span> <span data-ttu-id="05f2a-177">aplicativo Hello geralmente segue com seu próprio mecanismo de verificação, no caso de reversão de dados precisa toobe feito.</span><span class="sxs-lookup"><span data-stu-id="05f2a-177">hello application typically follows with its own verification mechanism in case data rollback needs toobe done.</span></span> <br><br><span data-ttu-id="05f2a-178">Por exemplo, se o log de transações Olá tem entradas que não estão presentes no banco de dados hello, em seguida, software de banco de dados de saudação faz uma reversão até que dados saudação são consistentes.</span><span class="sxs-lookup"><span data-stu-id="05f2a-178">As an example, if hello transaction log has entries that are not present in hello database, then hello database software does a rollback until hello data is consistent.</span></span> <span data-ttu-id="05f2a-179">Quando dados são distribuídos entre vários discos virtuais (como volumes estendidos), um ponto de recuperação consistente não fornece nenhuma garantia de correção de saudação de dados de saudação.</span><span class="sxs-lookup"><span data-stu-id="05f2a-179">When data is spread across multiple virtual disks (like spanned volumes), a crash-consistent recovery point provides no guarantees for hello correctness of hello data.</span></span> |

## <a name="performance-and-resource-utilization"></a><span data-ttu-id="05f2a-180">Desempenho e utilização de recursos</span><span class="sxs-lookup"><span data-stu-id="05f2a-180">Performance and resource utilization</span></span>
<span data-ttu-id="05f2a-181">Assim como o software de backup que é implantado localmente, você deve se planejar em termos das necessidades de utilização de recursos e capacidade ao fazer o backup de VMs no Azure.</span><span class="sxs-lookup"><span data-stu-id="05f2a-181">Like backup software that is deployed on-premises, you should plan for capacity and resource utilization needs when backing up VMs in Azure.</span></span> <span data-ttu-id="05f2a-182">Olá [limites de armazenamento do Azure](../azure-subscription-service-limits.md#storage-limits) definir como toostructure VM implantações tooget máximo desempenho com mínimo impacto toorunning cargas de trabalho.</span><span class="sxs-lookup"><span data-stu-id="05f2a-182">hello [Azure Storage limits](../azure-subscription-service-limits.md#storage-limits) define how toostructure VM deployments tooget maximum performance with minimum impact toorunning workloads.</span></span>

<span data-ttu-id="05f2a-183">Preste atenção toohello que limita o armazenamento do Azure a seguir ao planejar o desempenho de backup:</span><span class="sxs-lookup"><span data-stu-id="05f2a-183">Pay attention toohello following Azure Storage limits when planning backup performance:</span></span>

* <span data-ttu-id="05f2a-184">Egresso máximo por conta de armazenamento</span><span class="sxs-lookup"><span data-stu-id="05f2a-184">Max egress per storage account</span></span>
* <span data-ttu-id="05f2a-185">Taxa de solicitação total por conta de armazenamento</span><span class="sxs-lookup"><span data-stu-id="05f2a-185">Total request rate per storage account</span></span>

### <a name="storage-account-limits"></a><span data-ttu-id="05f2a-186">Limites da conta de armazenamento</span><span class="sxs-lookup"><span data-stu-id="05f2a-186">Storage account limits</span></span>
<span data-ttu-id="05f2a-187">Dados de backup copiados de uma conta de armazenamento, adiciona toohello operações de entrada/saída por segundo (IOPS) e métricas de saída (ou a taxa de transferência) Olá da conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="05f2a-187">Backup data copied from a storage account, adds toohello input/output operations per second (IOPS) and egress (or throughput) metrics of hello storage account.</span></span> <span data-ttu-id="05f2a-188">AT Olá mesmo tempo máquinas virtuais também estão consumindo IOPS e taxa de transferência.</span><span class="sxs-lookup"><span data-stu-id="05f2a-188">At hello same time, virtual machines are also consuming IOPS and throughput.</span></span> <span data-ttu-id="05f2a-189">meta de saudação é tooensure Backup e tráfego de máquina virtual não excedam os limites da conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="05f2a-189">hello goal is tooensure Backup and virtual machine traffic don't exceed your storage account limits.</span></span>

### <a name="number-of-disks"></a><span data-ttu-id="05f2a-190">Número de discos</span><span class="sxs-lookup"><span data-stu-id="05f2a-190">Number of disks</span></span>
<span data-ttu-id="05f2a-191">o processo de backup Olá tenta toocomplete um trabalho de backup mais rápido possível.</span><span class="sxs-lookup"><span data-stu-id="05f2a-191">hello backup process tries toocomplete a backup job as quickly as possible.</span></span> <span data-ttu-id="05f2a-192">Dessa forma, ele consome o mínimo de recursos possível.</span><span class="sxs-lookup"><span data-stu-id="05f2a-192">In doing so, it consumes as many resources as it can.</span></span> <span data-ttu-id="05f2a-193">No entanto, todas as operações de e/s são limitadas por Olá *meta de produtividade para Blob único*, que tem um limite de 60 MB por segundo.</span><span class="sxs-lookup"><span data-stu-id="05f2a-193">However, all I/O operations are limited by hello *Target Throughput for Single Blob*, which has a limit of 60 MB per second.</span></span> <span data-ttu-id="05f2a-194">Em uma tentativa de toomaximize sua velocidade, o processo de backup Olá tenta tooback a cada um dos discos da VM Olá *em paralelo*.</span><span class="sxs-lookup"><span data-stu-id="05f2a-194">In an attempt toomaximize its speed, hello backup process tries tooback up each of hello VM's disks *in parallel*.</span></span> <span data-ttu-id="05f2a-195">Se uma VM tiver quatro discos, o serviço de saudação tenta tooback backup de todos os quatro discos em paralelo.</span><span class="sxs-lookup"><span data-stu-id="05f2a-195">If a VM has four disks, hello service attempts tooback up all four disks in parallel.</span></span> <span data-ttu-id="05f2a-196">Olá **número de discos** está sendo feito, é o fator mais importante Olá para determinar o tráfego de backup de conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="05f2a-196">hello **number of disks** being backed up, is hello most important factor in determining storage account backup traffic.</span></span>

### <a name="backup-schedule"></a><span data-ttu-id="05f2a-197">Agendamento de backup</span><span class="sxs-lookup"><span data-stu-id="05f2a-197">Backup schedule</span></span>
<span data-ttu-id="05f2a-198">Um fator adicional que afeta o desempenho é hello **agendamento de backup**.</span><span class="sxs-lookup"><span data-stu-id="05f2a-198">An additional factor that impacts performance is hello **backup schedule**.</span></span> <span data-ttu-id="05f2a-199">Se você configurar políticas de saudação para todas as máquinas virtuais são feitas no hello mesmo tempo, você tiver agendado uma retenção de tráfego.</span><span class="sxs-lookup"><span data-stu-id="05f2a-199">If you configure hello policies so all VMs are backed up at hello same time, you have scheduled a traffic jam.</span></span> <span data-ttu-id="05f2a-200">o processo de backup Olá tentativas tooback backup de todos os discos em paralelo.</span><span class="sxs-lookup"><span data-stu-id="05f2a-200">hello backup process attempts tooback up all disks in parallel.</span></span> <span data-ttu-id="05f2a-201">tooreduce Olá tráfego de backup de uma conta de armazenamento, faça backup diferentes VMs em um horário diferente do hello, sem sobreposição.</span><span class="sxs-lookup"><span data-stu-id="05f2a-201">tooreduce hello backup traffic from a storage account, back up different VMs at different time of hello day, with no overlap.</span></span>

## <a name="capacity-planning"></a><span data-ttu-id="05f2a-202">Planejamento da capacidade</span><span class="sxs-lookup"><span data-stu-id="05f2a-202">Capacity planning</span></span>
<span data-ttu-id="05f2a-203">Reunindo fatores anteriores Olá, é necessário tooplan Olá necessidades de uso de conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="05f2a-203">Putting hello previous factors together, you need tooplan for hello storage account usage needs.</span></span> <span data-ttu-id="05f2a-204">Baixar Olá [planilha de planejamento de capacidade de backup VM](https://gallery.technet.microsoft.com/Azure-Backup-Storage-a46d7e33) toosee impacto de saudação do disco e opções de agendamento de backup.</span><span class="sxs-lookup"><span data-stu-id="05f2a-204">Download hello [VM backup capacity planning Excel spreadsheet](https://gallery.technet.microsoft.com/Azure-Backup-Storage-a46d7e33) toosee hello impact of your disk and backup schedule choices.</span></span>

### <a name="backup-throughput"></a><span data-ttu-id="05f2a-205">Taxa de transferência de backup</span><span class="sxs-lookup"><span data-stu-id="05f2a-205">Backup throughput</span></span>
<span data-ttu-id="05f2a-206">Para cada disco que está sendo feito, Backup do Azure lê blocos Olá no disco hello e armazena apenas Olá dados alterados (backup incremental).</span><span class="sxs-lookup"><span data-stu-id="05f2a-206">For each disk being backed up, Azure Backup reads hello blocks on hello disk and stores only hello changed data (incremental backup).</span></span> <span data-ttu-id="05f2a-207">Olá tabela a seguir mostra valores de taxa de transferência de serviço de Backup médios de saudação.</span><span class="sxs-lookup"><span data-stu-id="05f2a-207">hello following table shows hello average Backup service throughput values.</span></span> <span data-ttu-id="05f2a-208">Usando Olá dados a seguir, você pode estimar a quantidade de saudação de tempo necessário tooback backup de um disco de um determinado tamanho.</span><span class="sxs-lookup"><span data-stu-id="05f2a-208">Using hello following data, you can estimate hello amount of time needed tooback up a disk of a given size.</span></span>

| <span data-ttu-id="05f2a-209">Operação de backup</span><span class="sxs-lookup"><span data-stu-id="05f2a-209">Backup operation</span></span> | <span data-ttu-id="05f2a-210">Melhor taxa de transferência possível</span><span class="sxs-lookup"><span data-stu-id="05f2a-210">Best-case throughput</span></span> |
| --- | --- |
| <span data-ttu-id="05f2a-211">Backup inicial</span><span class="sxs-lookup"><span data-stu-id="05f2a-211">Initial backup</span></span> |<span data-ttu-id="05f2a-212">160 Mbps</span><span class="sxs-lookup"><span data-stu-id="05f2a-212">160 Mbps</span></span> |
| <span data-ttu-id="05f2a-213">Backup incremental (DR)</span><span class="sxs-lookup"><span data-stu-id="05f2a-213">Incremental backup (DR)</span></span> |<span data-ttu-id="05f2a-214">640 Mbps </span><span class="sxs-lookup"><span data-stu-id="05f2a-214">640 Mbps</span></span> <br><br> <span data-ttu-id="05f2a-215">Descartes de taxa de transferência significativamente se Olá alterado dados (que precisa toobe backup) é espalhada disco hello.</span><span class="sxs-lookup"><span data-stu-id="05f2a-215">Throughput drops significantly if hello changed data (that needs toobe backed up) is dispersed across hello disk.</span></span>|

## <a name="total-vm-backup-time"></a><span data-ttu-id="05f2a-216">Tempo total de backup da VM</span><span class="sxs-lookup"><span data-stu-id="05f2a-216">Total VM backup time</span></span>
<span data-ttu-id="05f2a-217">Enquanto a maior parte do tempo de backup de saudação é gasto ler e copiar dados, outras operações contribuem toohello tooback de tempo total necessário a uma máquina virtual:</span><span class="sxs-lookup"><span data-stu-id="05f2a-217">While most of hello backup time is spent reading and copying data, other operations contribute toohello total time needed tooback up a VM:</span></span>

* <span data-ttu-id="05f2a-218">Tempo necessário muito[instalar ou atualizar a extensão de backup Olá](backup-azure-vms.md).</span><span class="sxs-lookup"><span data-stu-id="05f2a-218">Time needed too[install or update hello backup extension](backup-azure-vms.md).</span></span>
* <span data-ttu-id="05f2a-219">Hora do instantâneo, que é Olá tempo tootrigger um instantâneo.</span><span class="sxs-lookup"><span data-stu-id="05f2a-219">Snapshot time, which is hello time taken tootrigger a snapshot.</span></span> <span data-ttu-id="05f2a-220">Os instantâneos são disparados toohello fechar agendado tempo de backup.</span><span class="sxs-lookup"><span data-stu-id="05f2a-220">Snapshots are triggered close toohello scheduled backup time.</span></span>
* <span data-ttu-id="05f2a-221">Tempo de espera da fila.</span><span class="sxs-lookup"><span data-stu-id="05f2a-221">Queue wait time.</span></span> <span data-ttu-id="05f2a-222">Desde que o serviço de Backup hello está processando os backups de vários clientes, copiando dados de backup do backup do instantâneo toohello ou serviços de recuperação cofre não seja iniciada imediatamente.</span><span class="sxs-lookup"><span data-stu-id="05f2a-222">Since hello Backup service is processing backups from multiple customers, copying backup data from snapshot toohello backup or Recovery Services vault might not start immediately.</span></span> <span data-ttu-id="05f2a-223">Em períodos de pico de carga, espera Olá pode ampliar o tooeight horas devido toohello número de backups que estão sendo processados.</span><span class="sxs-lookup"><span data-stu-id="05f2a-223">In times of peak load, hello wait can stretch up tooeight hours due toohello number of backups being processed.</span></span> <span data-ttu-id="05f2a-224">No entanto, o tempo total de backup de VM Olá é menor que 24 horas para políticas de backup diárias.</span><span class="sxs-lookup"><span data-stu-id="05f2a-224">However, hello total VM backup time is less than 24 hours for daily backup policies.</span></span>
* <span data-ttu-id="05f2a-225">Tempo de transferência de dados, tempo necessário para backup toocompute Olá incremental alterações de backup anterior de serviço e transferir o armazenamento de toovault essas alterações.</span><span class="sxs-lookup"><span data-stu-id="05f2a-225">Data transfer time, time needed for backup service toocompute hello incremental changes from previous backup and transfer those changes toovault storage.</span></span>

### <a name="why-am-i-observing-longer12-hours-backup-time"></a><span data-ttu-id="05f2a-226">Por que eu estou observando tempos de backup mais longos (mais de 12 horas)?</span><span class="sxs-lookup"><span data-stu-id="05f2a-226">Why am I observing longer(>12 hours) backup time?</span></span>
<span data-ttu-id="05f2a-227">Backup consiste em duas fases: criação de instantâneos e transferindo Olá instantâneos toohello cofre.</span><span class="sxs-lookup"><span data-stu-id="05f2a-227">Backup consists of two phases: taking snapshots and transferring hello snapshots toohello vault.</span></span> <span data-ttu-id="05f2a-228">otimiza o Hello serviço de Backup de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="05f2a-228">hello Backup service optimizes for storage.</span></span> <span data-ttu-id="05f2a-229">Ao transferir Olá instantâneo dados tooa cofre, o serviço de Olá transfere apenas as alterações incrementais do instantâneo anterior hello.</span><span class="sxs-lookup"><span data-stu-id="05f2a-229">When transferring hello snapshot data tooa vault, hello service only transfers incremental changes from hello previous snapshot.</span></span>  <span data-ttu-id="05f2a-230">alterações incrementais de saudação de toodetermine, o serviço Olá computa a soma de verificação de saudação de blocos de saudação.</span><span class="sxs-lookup"><span data-stu-id="05f2a-230">toodetermine hello incremental changes, hello service computes hello checksum of hello blocks.</span></span> <span data-ttu-id="05f2a-231">Se um bloco for alterado, bloco de saudação é identificado como um toobe bloco enviado toohello cofre.</span><span class="sxs-lookup"><span data-stu-id="05f2a-231">If a block is changed, hello block is identified as a block toobe sent toohello vault.</span></span> <span data-ttu-id="05f2a-232">Detalhada do serviço de saudação adicional em cada um dos Olá identificados blocos, procurando oportunidades toominimize Olá dados tootransfer.</span><span class="sxs-lookup"><span data-stu-id="05f2a-232">Then hello service drills further into each of hello identified blocks, looking for opportunities toominimize hello data tootransfer.</span></span> <span data-ttu-id="05f2a-233">Depois de avaliar todos os blocos alterados, o serviço de Olá mescla alterações hello e envia toohello cofre.</span><span class="sxs-lookup"><span data-stu-id="05f2a-233">After evaluating all changed blocks, hello service coalesces hello changes and sends them toohello vault.</span></span> <span data-ttu-id="05f2a-234">Em alguns aplicativos herdados, gravações pequenas e fragmentadas não são ideais para armazenamento.</span><span class="sxs-lookup"><span data-stu-id="05f2a-234">In some legacy applications, small, fragmented writes are not optimal for storage.</span></span> <span data-ttu-id="05f2a-235">Se o instantâneo Olá contém muitas gravações pequenas, fragmentadas, serviço Olá gasta mais tempo de processamento de dados Olá gravados por aplicativos de saudação.</span><span class="sxs-lookup"><span data-stu-id="05f2a-235">If hello snapshot contains many small, fragmented writes, hello service spends additional time processing hello data written by hello applications.</span></span> <span data-ttu-id="05f2a-236">Olá recomendado gravar bloco de aplicativo do Azure, para aplicativos em execução dentro de saudação VM, é um mínimo de 8 KB.</span><span class="sxs-lookup"><span data-stu-id="05f2a-236">hello recommended application write block from Azure, for applications running inside hello VM, is a minimum of 8 KB.</span></span> <span data-ttu-id="05f2a-237">Se o aplicativo usar um bloco inferior a 8 KB, o desempenho do backup será afetado.</span><span class="sxs-lookup"><span data-stu-id="05f2a-237">If your application uses a block of less than 8 KB, backup performance is effected.</span></span> <span data-ttu-id="05f2a-238">Para obter ajuda com o ajuste de desempenho do backup tooimprove seu aplicativo, consulte [ajuste de aplicativos para o desempenho ideal com o armazenamento do Azure](../storage/common/storage-premium-storage-performance.md).</span><span class="sxs-lookup"><span data-stu-id="05f2a-238">For help with tuning your application tooimprove backup performance, see [Tuning applications for optimal performance with Azure storage](../storage/common/storage-premium-storage-performance.md).</span></span> <span data-ttu-id="05f2a-239">Embora o artigo Olá no desempenho de backup usa exemplos de armazenamento Premium, diretrizes de saudação são aplicável para discos de armazenamento padrão.</span><span class="sxs-lookup"><span data-stu-id="05f2a-239">Though hello article on backup performance uses Premium storage examples, hello guidance is applicable for Standard storage disks.</span></span>

## <a name="total-restore-time"></a><span data-ttu-id="05f2a-240">Tempo total de restauração</span><span class="sxs-lookup"><span data-stu-id="05f2a-240">Total restore time</span></span>
<span data-ttu-id="05f2a-241">Uma operação de restauração consiste em duas tarefas principais sub: copiar dados da conta de armazenamento do cliente do hello cofre toohello escolhido e criação de máquina virtual de saudação.</span><span class="sxs-lookup"><span data-stu-id="05f2a-241">A restore operation consists of two main sub tasks: Copying data back from hello vault toohello chosen customer storage account, and creating hello virtual machine.</span></span> <span data-ttu-id="05f2a-242">Copiando dados do cofre Olá depende de onde os backups de saudação são armazenados internamente no Azure, e onde a conta de armazenamento do cliente hello está armazenada.</span><span class="sxs-lookup"><span data-stu-id="05f2a-242">Copying data back from hello vault depends on where hello backups are stored internally in Azure, and where hello customer storage account is stored.</span></span> <span data-ttu-id="05f2a-243">Tempo gasto toocopy dados depende de:</span><span class="sxs-lookup"><span data-stu-id="05f2a-243">Time taken toocopy data depends upon:</span></span>
* <span data-ttu-id="05f2a-244">Fila esperas - como processos de serviço Olá trabalhos de restauração de vários clientes da saudação mesmo tempo, a solicitações de restauração são colocados em uma fila.</span><span class="sxs-lookup"><span data-stu-id="05f2a-244">Queue wait time - Since hello service processes restore jobs from multiple customers at hello same time, restore requests are put in a queue.</span></span>
* <span data-ttu-id="05f2a-245">Cópia de dados de tempo - dados são copiados da conta de armazenamento Olá cofre toohello cliente.</span><span class="sxs-lookup"><span data-stu-id="05f2a-245">Data copy time - Data is copied from hello vault toohello customer storage account.</span></span> <span data-ttu-id="05f2a-246">Restaurar tempo depende de IOPS e taxa de transferência do serviço de Backup do Azure obtém na conta de armazenamento do cliente de saudação selecionada.</span><span class="sxs-lookup"><span data-stu-id="05f2a-246">Restore time depends on IOPS and throughput Azure Backup service gets on hello selected customer storage account.</span></span> <span data-ttu-id="05f2a-247">tooreduce Olá copiando a hora durante o processo de restauração hello, selecione uma conta de armazenamento não foi carregada com outras leituras e gravações de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="05f2a-247">tooreduce hello copying time during hello restore process, select a storage account not loaded with other application writes and reads.</span></span>

## <a name="best-practices"></a><span data-ttu-id="05f2a-248">Práticas recomendadas</span><span class="sxs-lookup"><span data-stu-id="05f2a-248">Best practices</span></span>
<span data-ttu-id="05f2a-249">É recomendável seguir essas práticas ao configurar backups de máquinas virtuais:</span><span class="sxs-lookup"><span data-stu-id="05f2a-249">We suggest following these practices while configuring backups for virtual machines:</span></span>

* <span data-ttu-id="05f2a-250">Não agende mais de 10 VMs clássicas de Olá mesmo nuvem tooback de serviço para cima em Olá simultaneamente.</span><span class="sxs-lookup"><span data-stu-id="05f2a-250">Don't schedule more than 10 classic VMs from hello same cloud service tooback up at hello same time.</span></span> <span data-ttu-id="05f2a-251">Se você quiser tooback várias máquinas virtuais do mesmo serviço de nuvem, balancear os horários de início de saudação por uma hora.</span><span class="sxs-lookup"><span data-stu-id="05f2a-251">If you want tooback up multiple VMs from same cloud service, stagger hello backup start times by an hour.</span></span>
* <span data-ttu-id="05f2a-252">Não agende mais de 40 tooback de VMs para cima em Olá simultaneamente.</span><span class="sxs-lookup"><span data-stu-id="05f2a-252">Do not schedule more than 40 VMs tooback up at hello same time.</span></span>
* <span data-ttu-id="05f2a-253">Agende os backups de VM fora do horário de pico.</span><span class="sxs-lookup"><span data-stu-id="05f2a-253">Schedule VM backups during non-peak hours.</span></span> <span data-ttu-id="05f2a-254">Olá essa forma serviço de Backup usa o IOPS para transferir dados do cofre toohello de conta de armazenamento do hello cliente.</span><span class="sxs-lookup"><span data-stu-id="05f2a-254">This way hello Backup service uses IOPS for transferring data from hello customer storage account toohello vault.</span></span>
* <span data-ttu-id="05f2a-255">Certifique-se de que uma política seja aplicada às VMs distribuídas entre diferentes contas de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="05f2a-255">Make sure that a policy is applied on VMs spread across different storage accounts.</span></span> <span data-ttu-id="05f2a-256">Sugerimos que não mais do que 20 discos total de uma única conta de armazenamento protegida pelo Olá mesmo agendamento de backup.</span><span class="sxs-lookup"><span data-stu-id="05f2a-256">We suggest no more than 20 total disks from a single storage account be protected by hello same backup schedule.</span></span> <span data-ttu-id="05f2a-257">Se você tiver mais de 20 discos em uma conta de armazenamento, distribuir as VMs em várias tooget de políticas Olá IOPS necessários durante a fase de transferência Olá Olá do processo de backup.</span><span class="sxs-lookup"><span data-stu-id="05f2a-257">If you have greater than 20 disks in a storage account, spread those VMs across multiple policies tooget hello required IOPS during hello transfer phase of hello backup process.</span></span>
* <span data-ttu-id="05f2a-258">Não restaure uma VM em execução na conta de armazenamento de toosame de armazenamento Premium.</span><span class="sxs-lookup"><span data-stu-id="05f2a-258">Do not restore a VM running on Premium storage toosame storage account.</span></span> <span data-ttu-id="05f2a-259">Se o processo de operação de restauração Olá coincide com a operação de backup hello, ele reduz Olá IOPS disponível para backup.</span><span class="sxs-lookup"><span data-stu-id="05f2a-259">If hello restore operation process coincides with hello backup operation, it reduces hello available IOPS for backup.</span></span>
* <span data-ttu-id="05f2a-260">Para backup de VM Premium, certifique-se de que a conta de armazenamento que hospeda os discos premium tem pelo menos 50% de espaço livre para preparar instantâneo de um backup bem-sucedido.</span><span class="sxs-lookup"><span data-stu-id="05f2a-260">For Premium VM backup, ensure that storage account that hosts premium disks has atleast 50% free space for staging snapshot for a successful backup.</span></span> 
* <span data-ttu-id="05f2a-261">Verifique se essa versão do python em VMs do Linux habilitado para backup é 2.7</span><span class="sxs-lookup"><span data-stu-id="05f2a-261">Make sure that python version on Linux VMs enabled for backup is 2.7</span></span>

## <a name="data-encryption"></a><span data-ttu-id="05f2a-262">Criptografia de dados</span><span class="sxs-lookup"><span data-stu-id="05f2a-262">Data encryption</span></span>
<span data-ttu-id="05f2a-263">O Backup do Azure não criptografa os dados como parte do processo de backup hello.</span><span class="sxs-lookup"><span data-stu-id="05f2a-263">Azure Backup does not encrypt data as a part of hello backup process.</span></span> <span data-ttu-id="05f2a-264">No entanto, você pode criptografar os dados dentro de saudação VM e faça backup Olá dados protegidos diretamente (Leia mais sobre [backup de dados criptografados](backup-azure-vms-encryption.md)).</span><span class="sxs-lookup"><span data-stu-id="05f2a-264">However, you can encrypt data within hello VM and back up hello protected data seamlessly (read more about [backup of encrypted data](backup-azure-vms-encryption.md)).</span></span>

## <a name="calculating-hello-cost-of-protected-instances"></a><span data-ttu-id="05f2a-265">Calcular o custo de saudação de instâncias protegidas</span><span class="sxs-lookup"><span data-stu-id="05f2a-265">Calculating hello cost of protected instances</span></span>
<span data-ttu-id="05f2a-266">Máquinas virtuais do Azure que são feitas por meio do Backup do Azure são sujeitas muito[preços do Azure Backup](https://azure.microsoft.com/pricing/details/backup/).</span><span class="sxs-lookup"><span data-stu-id="05f2a-266">Azure virtual machines that are backed up through Azure Backup are subject too[Azure Backup pricing](https://azure.microsoft.com/pricing/details/backup/).</span></span> <span data-ttu-id="05f2a-267">Olá cálculo protegido instâncias baseia-se a saudação *real* tamanho da máquina virtual de saudação, que é a soma de saudação de todos os dados de saudação na máquina virtual de hello – excluindo hello "disco de recurso".</span><span class="sxs-lookup"><span data-stu-id="05f2a-267">hello Protected Instances calculation is based on hello *actual* size of hello virtual machine, which is hello sum of all hello data in hello virtual machine--excluding hello “resource disk.”</span></span>

<span data-ttu-id="05f2a-268">Os preços para fazer backup de máquinas virtuais é *não* com base no tamanho de saudação máximo com suporte para cada máquina virtual do disco anexado toohello de dados.</span><span class="sxs-lookup"><span data-stu-id="05f2a-268">Pricing for backing up VMs is *not* based on hello maximum supported size for each data disk attached toohello virtual machine.</span></span> <span data-ttu-id="05f2a-269">Preços baseia-se em dados reais de saudação armazenados no disco de dados hello.</span><span class="sxs-lookup"><span data-stu-id="05f2a-269">Pricing is based on hello actual data stored in hello data disk.</span></span> <span data-ttu-id="05f2a-270">Da mesma forma, conta de armazenamento de backup Olá baseia-se na quantidade de saudação de dados que são armazenados no Backup do Azure, que é a soma de saudação dos dados reais de saudação em cada ponto de recuperação.</span><span class="sxs-lookup"><span data-stu-id="05f2a-270">Similarly, hello backup storage bill is based on hello amount of data that is stored in Azure Backup, which is hello sum of hello actual data in each recovery point.</span></span>

<span data-ttu-id="05f2a-271">Por exemplo, considere uma máquina virtual de tamanho A2 Standard que tem dois discos de dados adicionais com um tamanho máximo de 1 TB cada.</span><span class="sxs-lookup"><span data-stu-id="05f2a-271">For example, take an A2 Standard-sized virtual machine that has two additional data disks with a maximum size of 1 TB each.</span></span> <span data-ttu-id="05f2a-272">Olá tabela a seguir fornece os dados reais Olá armazenados em cada um desses discos:</span><span class="sxs-lookup"><span data-stu-id="05f2a-272">hello following table gives hello actual data stored on each of these disks:</span></span>

| <span data-ttu-id="05f2a-273">Tipo de disco</span><span class="sxs-lookup"><span data-stu-id="05f2a-273">Disk type</span></span> | <span data-ttu-id="05f2a-274">Tamanho máx.</span><span class="sxs-lookup"><span data-stu-id="05f2a-274">Max size</span></span> | <span data-ttu-id="05f2a-275">Dados reais presentes</span><span class="sxs-lookup"><span data-stu-id="05f2a-275">Actual data present</span></span> |
| --- | --- | --- |
| <span data-ttu-id="05f2a-276">Disco do sistema operacional</span><span class="sxs-lookup"><span data-stu-id="05f2a-276">Operating system disk</span></span> |<span data-ttu-id="05f2a-277">1023 GB</span><span class="sxs-lookup"><span data-stu-id="05f2a-277">1023 GB</span></span> |<span data-ttu-id="05f2a-278">17 GB</span><span class="sxs-lookup"><span data-stu-id="05f2a-278">17 GB</span></span> |
| <span data-ttu-id="05f2a-279">Disco local/disco de recursos</span><span class="sxs-lookup"><span data-stu-id="05f2a-279">Local disk / Resource disk</span></span> |<span data-ttu-id="05f2a-280">135 GB</span><span class="sxs-lookup"><span data-stu-id="05f2a-280">135 GB</span></span> |<span data-ttu-id="05f2a-281">5 GB (não incluído no backup)</span><span class="sxs-lookup"><span data-stu-id="05f2a-281">5 GB (not included for backup)</span></span> |
| <span data-ttu-id="05f2a-282">Disco de dados 1</span><span class="sxs-lookup"><span data-stu-id="05f2a-282">Data disk 1</span></span> |<span data-ttu-id="05f2a-283">1023 GB</span><span class="sxs-lookup"><span data-stu-id="05f2a-283">1023 GB</span></span> |<span data-ttu-id="05f2a-284">30 GB</span><span class="sxs-lookup"><span data-stu-id="05f2a-284">30 GB</span></span> |
| <span data-ttu-id="05f2a-285">Disco de dados 2</span><span class="sxs-lookup"><span data-stu-id="05f2a-285">Data disk 2</span></span> |<span data-ttu-id="05f2a-286">1023 GB</span><span class="sxs-lookup"><span data-stu-id="05f2a-286">1023 GB</span></span> |<span data-ttu-id="05f2a-287">0 GB</span><span class="sxs-lookup"><span data-stu-id="05f2a-287">0 GB</span></span> |

<span data-ttu-id="05f2a-288">Olá *real* tamanho da máquina virtual de saudação nesse caso é 17 GB + 30 GB + 0 GB = 47 GB.</span><span class="sxs-lookup"><span data-stu-id="05f2a-288">hello *actual* size of hello virtual machine in this case is 17 GB + 30 GB + 0 GB = 47 GB.</span></span> <span data-ttu-id="05f2a-289">Esse tamanho de instância protegida (47 GB) se torna a base de saudação para cobrança mensal hello.</span><span class="sxs-lookup"><span data-stu-id="05f2a-289">This Protected Instance size (47 GB) becomes hello basis for hello monthly bill.</span></span> <span data-ttu-id="05f2a-290">Como Olá quantidade de dados na máquina virtual de saudação cresce, tamanho de instância protegida Olá usado adequadamente para alterações na cobrança.</span><span class="sxs-lookup"><span data-stu-id="05f2a-290">As hello amount of data in hello virtual machine grows, hello Protected Instance size used for billing changes accordingly.</span></span>

<span data-ttu-id="05f2a-291">Cobrança não inicia até que o backup bem-sucedido do primeiro Olá for concluída.</span><span class="sxs-lookup"><span data-stu-id="05f2a-291">Billing does not start until hello first successful backup completes.</span></span> <span data-ttu-id="05f2a-292">Neste ponto, cobrança Olá para armazenamento e instâncias protegido começa.</span><span class="sxs-lookup"><span data-stu-id="05f2a-292">At this point, hello billing for both Storage and Protected Instances begins.</span></span> <span data-ttu-id="05f2a-293">Cobrança continuará desde que haja *quaisquer dados armazenados em um cofre de backup* para a máquina virtual de saudação.</span><span class="sxs-lookup"><span data-stu-id="05f2a-293">Billing continues as long as there is *any backup data stored in a vault* for hello virtual machine.</span></span> <span data-ttu-id="05f2a-294">Se você interromper a proteção na máquina virtual de hello, mas os dados de backup de máquina virtual existem em um cofre, a cobrança continuará.</span><span class="sxs-lookup"><span data-stu-id="05f2a-294">If you stop protection on hello virtual machine, but virtual machine backup data exists in a vault, billing continues.</span></span>

<span data-ttu-id="05f2a-295">Para uma máquina virtual especificada para apenas se Olá proteção foi parada de cobrança *e* todos os dados de backup é excluído.</span><span class="sxs-lookup"><span data-stu-id="05f2a-295">Billing for a specified virtual machine stops only if hello protection is stopped *and* all backup data is deleted.</span></span> <span data-ttu-id="05f2a-296">Quando a proteção for interrompido e não há nenhum trabalho de backup ativo, tamanho de saudação do último backup VM bem-sucedido Olá torna-se o tamanho de instância protegida Olá usado para cobrança mensal hello.</span><span class="sxs-lookup"><span data-stu-id="05f2a-296">When protection stops and there are no active backup jobs, hello size of hello last successful VM backup becomes hello Protected Instance size used for hello monthly bill.</span></span>

## <a name="questions"></a><span data-ttu-id="05f2a-297">Perguntas?</span><span class="sxs-lookup"><span data-stu-id="05f2a-297">Questions?</span></span>
<span data-ttu-id="05f2a-298">Se você tiver dúvidas ou se houver qualquer recurso que você gostaria que toosee incluído, [nos enviar comentários](http://aka.ms/azurebackup_feedback).</span><span class="sxs-lookup"><span data-stu-id="05f2a-298">If you have questions, or if there is any feature that you would like toosee included, [send us feedback](http://aka.ms/azurebackup_feedback).</span></span>

## <a name="next-steps"></a><span data-ttu-id="05f2a-299">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="05f2a-299">Next steps</span></span>
* [<span data-ttu-id="05f2a-300">Backup de máquinas virtuais</span><span class="sxs-lookup"><span data-stu-id="05f2a-300">Back up virtual machines</span></span>](backup-azure-vms.md)
* [<span data-ttu-id="05f2a-301">Gerenciar o backup de máquinas virtuais</span><span class="sxs-lookup"><span data-stu-id="05f2a-301">Manage virtual machine backup</span></span>](backup-azure-manage-vms.md)
* [<span data-ttu-id="05f2a-302">Restaurar máquinas virtuais</span><span class="sxs-lookup"><span data-stu-id="05f2a-302">Restore virtual machines</span></span>](backup-azure-restore-vms.md)
* [<span data-ttu-id="05f2a-303">Solucionar problemas de backup da VM</span><span class="sxs-lookup"><span data-stu-id="05f2a-303">Troubleshoot VM backup issues</span></span>](backup-azure-vms-troubleshoot.md)
