---
title: 'Backup do Azure: Recuperar arquivos e pastas de um backup de VM do Azure | Microsoft Docs'
description: "Recuperar arquivos de um ponto de recuperação de uma máquina virtual do Azure"
services: backup
documentationcenter: dev-center-name
author: pvrk
manager: shivamg
keywords: "recuperação a nível de item; recuperação de arquivos de backup da VM do Azure; restaurar arquivos de uma VM do Azure"
ms.assetid: f1c067a2-4826-4da4-b97a-c5fd6c189a77
ms.service: backup
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: storage-backup-recovery
ms.date: 07/20/2017
ms.author: pullabhk;markgal
ms.openlocfilehash: ae7c345c11a7db25413d60ad822f16f84ca37362
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/03/2017
---
# <a name="recover-files-from-azure-virtual-machine-backup"></a><span data-ttu-id="e362b-104">Recuperar arquivos de um backup de máquina virtual do Azure</span><span class="sxs-lookup"><span data-stu-id="e362b-104">Recover files from Azure virtual machine backup</span></span>

<span data-ttu-id="e362b-105">O backup do Azure oferece a funcionalidade de restaurar [VMs e discos do Azure](./backup-azure-arm-restore-vms.md) de backups de VM do Azure.</span><span class="sxs-lookup"><span data-stu-id="e362b-105">Azure backup provides the capability to restore [Azure VMs and disks](./backup-azure-arm-restore-vms.md) from Azure VM backups.</span></span> <span data-ttu-id="e362b-106">Este artigo explica como você pode recuperar itens, como arquivos e pastas, de um backup de VM do Azure.</span><span class="sxs-lookup"><span data-stu-id="e362b-106">Now this article explains how you can recover items such as files and folders from an Azure VM backup.</span></span>

> [!Note]
> <span data-ttu-id="e362b-107">Esse recurso está disponível para máquinas virtuais do Azure implantadas usando o modelo do Resource Manager e protegidas em um cofre de Serviços de Recuperação.</span><span class="sxs-lookup"><span data-stu-id="e362b-107">This feature is available for Azure VMs deployed using the Resource Manager model and protected to a Recovery services vault.</span></span>
> <span data-ttu-id="e362b-108">Não há suporte para a recuperação de arquivos de um backup criptografado de VM.</span><span class="sxs-lookup"><span data-stu-id="e362b-108">File recovery from an encrypted VM backup is not supported.</span></span>
>

## <a name="mount-the-volume-and-copy-files"></a><span data-ttu-id="e362b-109">Montar os volume e copiar arquivos</span><span class="sxs-lookup"><span data-stu-id="e362b-109">Mount the volume and copy files</span></span>

1. <span data-ttu-id="e362b-110">Faça logon no [Portal do Azure](http://portal.Azure.com).</span><span class="sxs-lookup"><span data-stu-id="e362b-110">Sign into the [Azure portal](http://portal.Azure.com).</span></span> <span data-ttu-id="e362b-111">Encontre o cofre de Serviços de Recuperação relevante e os itens de backup necessários.</span><span class="sxs-lookup"><span data-stu-id="e362b-111">Find the relevant Recovery services vault and the required backup item.</span></span>

2. <span data-ttu-id="e362b-112">Na folha Item de Backup, clique em **Recuperação de Arquivo**</span><span class="sxs-lookup"><span data-stu-id="e362b-112">On the Backup Item blade, click **File Recovery**</span></span>

    ![Abra o item de backup do cofre de Serviços de Recuperação](./media/backup-azure-restore-files-from-vm/open-vault-item.png)

    <span data-ttu-id="e362b-114">A folha **Recuperação de arquivo** será aberta.</span><span class="sxs-lookup"><span data-stu-id="e362b-114">The **File Recovery** blade opens.</span></span>

    ![Folha de recuperação de arquivo](./media/backup-azure-restore-files-from-vm/file-recovery-blade.png)

3. <span data-ttu-id="e362b-116">No menu suspenso **Selecionar ponto de recuperação**, selecione o ponto de recuperação que contém os arquivos desejados.</span><span class="sxs-lookup"><span data-stu-id="e362b-116">From the **Select recovery point** drop-down menu, select the recovery point that contains the files you want.</span></span> <span data-ttu-id="e362b-117">Por padrão, o ponto de recuperação mais recente já está selecionado.</span><span class="sxs-lookup"><span data-stu-id="e362b-117">By default, the latest recovery point is already selected.</span></span>

4. <span data-ttu-id="e362b-118">Clique em **Baixar Executável** (para VM do Windows Azure) ou **Baixar Script** (para VM Linux) para baixar o software que você usará para copiar os arquivos do ponto de recuperação.</span><span class="sxs-lookup"><span data-stu-id="e362b-118">Click **Download Executable** (for Windows Azure VM) or **Download Script** (for Linux Azure VM) to download the software that you'll use to copy files from the recovery point.</span></span>

  <span data-ttu-id="e362b-119">O arquivo executável/script cria uma conexão entre o computador local e o ponto de recuperação especificado.</span><span class="sxs-lookup"><span data-stu-id="e362b-119">The executable/script creates a connection between the local computer and the specified recovery point.</span></span>

5. <span data-ttu-id="e362b-120">É necessária uma senha para executar o script/executável baixado.</span><span class="sxs-lookup"><span data-stu-id="e362b-120">You need a password to run the downloaded script/executable.</span></span> <span data-ttu-id="e362b-121">Copie a senha do portal usando o botão Copiar ao lado da senha gerada</span><span class="sxs-lookup"><span data-stu-id="e362b-121">You can copy the password from the portal using the copy button beside the generated password</span></span>

    ![Senha gerada](./media/backup-azure-restore-files-from-vm/generated-pswd.png)

6. <span data-ttu-id="e362b-123">No computador no qual você deseja recuperar os arquivos, execute o arquivo executável/script.</span><span class="sxs-lookup"><span data-stu-id="e362b-123">On the computer where you want to recover the files, run the executable/script.</span></span> <span data-ttu-id="e362b-124">Execute o script com credenciais de administrador.</span><span class="sxs-lookup"><span data-stu-id="e362b-124">You must run it with Administrator credentials.</span></span> <span data-ttu-id="e362b-125">Se você executar o script em um computador com acesso restrito, verifique se há acesso a:</span><span class="sxs-lookup"><span data-stu-id="e362b-125">If you run the script on a computer with restricted access, ensure there is access to:</span></span>

    - <span data-ttu-id="e362b-126">download.microsoft.com</span><span class="sxs-lookup"><span data-stu-id="e362b-126">download.microsoft.com</span></span>
    - <span data-ttu-id="e362b-127">Pontos de extremidade do Azure usados para backups de VM do Azure</span><span class="sxs-lookup"><span data-stu-id="e362b-127">Azure endpoints used for Azure VM backups</span></span>
    - <span data-ttu-id="e362b-128">porta de saída 3260</span><span class="sxs-lookup"><span data-stu-id="e362b-128">outbound port 3260</span></span>

   <span data-ttu-id="e362b-129">Para o Linux, o script exige os componentes 'open-iscsi' e 'lshw' para se conectar ao ponto de recuperação.</span><span class="sxs-lookup"><span data-stu-id="e362b-129">For Linux, the script requires 'open-iscsi' and 'lshw' components to connect to the recovery point.</span></span> <span data-ttu-id="e362b-130">Se eles não existirem no computador no qual serão executados, ele solicitará a permissão para instalar os componentes relevantes, e os instalará mediante consentimento.</span><span class="sxs-lookup"><span data-stu-id="e362b-130">If those do not exist on the machine where it is run, it asks for permission to install the relevant components and installs them upon consent.</span></span>
   
   <span data-ttu-id="e362b-131">Insira a senha copiada do portal quando solicitado.</span><span class="sxs-lookup"><span data-stu-id="e362b-131">Enter the password copied from the portal when prompted.</span></span> <span data-ttu-id="e362b-132">Depois de inserir a senha válida, os scripts se conectam ao ponto de recuperação.</span><span class="sxs-lookup"><span data-stu-id="e362b-132">Once the valid password is entered the scripts connects to the recovery point.</span></span>
      
    ![Folha de recuperação de arquivo](./media/backup-azure-restore-files-from-vm/executable-output.png)
    
   
   <span data-ttu-id="e362b-134">Você pode executar o script em qualquer máquina que tenha o mesmo sistema operacional (ou compatível) que a VM do backup.</span><span class="sxs-lookup"><span data-stu-id="e362b-134">You can run the script on any machine that has the same (or compatible) operating system as the backed-up VM.</span></span> <span data-ttu-id="e362b-135">Consulte a [tabela Sistema operacional compatível](backup-azure-restore-files-from-vm.md#compatible-os) para saber mais sobre os sistemas operacionais compatíveis.</span><span class="sxs-lookup"><span data-stu-id="e362b-135">See the [Compatible OS table](backup-azure-restore-files-from-vm.md#compatible-os) for compatible operating systems.</span></span> <span data-ttu-id="e362b-136">Se a máquina virtual do Azure protegida usar espaços de Armazenamento do Windows (para VMs do Windows) ou Matrizes LVM/RAID (para VMs Linux), você não poderá executar o arquivo executável/script nesta máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="e362b-136">If the protected Azure virtual machine uses Windows Storage Spaces (for Windows Azure VMs) or LVM/RAID Arrays(for Linux VMs), then you can't run the executable/script on the same virtual machine.</span></span> <span data-ttu-id="e362b-137">Em vez disso, execute-o em qualquer outra máquina com um sistema operacional compatível.</span><span class="sxs-lookup"><span data-stu-id="e362b-137">Instead, run it on any other machine with a compatible operating system.</span></span>

### <a name="compatible-os"></a><span data-ttu-id="e362b-138">Sistema operacional compatível</span><span class="sxs-lookup"><span data-stu-id="e362b-138">Compatible OS</span></span>

#### <a name="for-windows"></a><span data-ttu-id="e362b-139">Para Windows</span><span class="sxs-lookup"><span data-stu-id="e362b-139">For Windows</span></span>

<span data-ttu-id="e362b-140">A tabela a seguir mostra a compatibilidade entre os sistemas operacionais de computador e servidor.</span><span class="sxs-lookup"><span data-stu-id="e362b-140">The following table shows the compatibility between server and computer operating systems.</span></span> <span data-ttu-id="e362b-141">Ao recuperar arquivos, você não pode restaurar arquivos entre sistemas operacionais incompatíveis.</span><span class="sxs-lookup"><span data-stu-id="e362b-141">When recovering files, you can't restore files between incompatible operating systems.</span></span>

|<span data-ttu-id="e362b-142">Sistema operacional de servidor</span><span class="sxs-lookup"><span data-stu-id="e362b-142">Server OS</span></span> | <span data-ttu-id="e362b-143">Sistema operacional de cliente compatível</span><span class="sxs-lookup"><span data-stu-id="e362b-143">Compatible client OS</span></span>  |
| --------------- | ---- |
| <span data-ttu-id="e362b-144">Windows Server 2012 R2</span><span class="sxs-lookup"><span data-stu-id="e362b-144">Windows Server 2012 R2</span></span> | <span data-ttu-id="e362b-145">Windows 8.1</span><span class="sxs-lookup"><span data-stu-id="e362b-145">Windows 8.1</span></span> |
| <span data-ttu-id="e362b-146">Windows Server 2012</span><span class="sxs-lookup"><span data-stu-id="e362b-146">Windows Server 2012</span></span>    | <span data-ttu-id="e362b-147">Windows 8</span><span class="sxs-lookup"><span data-stu-id="e362b-147">Windows 8</span></span>  |
| <span data-ttu-id="e362b-148">Windows Server 2008 R2</span><span class="sxs-lookup"><span data-stu-id="e362b-148">Windows Server 2008 R2</span></span> | <span data-ttu-id="e362b-149">Windows 7</span><span class="sxs-lookup"><span data-stu-id="e362b-149">Windows 7</span></span>   |

#### <a name="for-linux"></a><span data-ttu-id="e362b-150">Para Linux</span><span class="sxs-lookup"><span data-stu-id="e362b-150">For Linux</span></span>

<span data-ttu-id="e362b-151">No Linux, o requisito fundamental é que o sistema operacional da máquina onde o script será executado deve oferecer suporte ao sistema de arquivos dos arquivos presentes na VM Linux de backup.</span><span class="sxs-lookup"><span data-stu-id="e362b-151">In Linux, the fundamental requirement is that the OS of the machine where the script is run should support the filesystem of the files present in the backed-up Linux VM.</span></span> <span data-ttu-id="e362b-152">Ao selecionar uma máquina para executar o script, verifique se ela tem o sistema operacional compatível e as versões mencionadas na tabela a seguir.</span><span class="sxs-lookup"><span data-stu-id="e362b-152">While selecting a machine to run the script, please ensure it has the compatible OS and the versions as mentioned in the table below.</span></span>

|<span data-ttu-id="e362b-153">Sistema operacional Linux</span><span class="sxs-lookup"><span data-stu-id="e362b-153">Linux OS</span></span> | <span data-ttu-id="e362b-154">Versões</span><span class="sxs-lookup"><span data-stu-id="e362b-154">Versions</span></span>  |
| --------------- | ---- |
| <span data-ttu-id="e362b-155">Ubuntu</span><span class="sxs-lookup"><span data-stu-id="e362b-155">Ubuntu</span></span> | <span data-ttu-id="e362b-156">12.04 e acima</span><span class="sxs-lookup"><span data-stu-id="e362b-156">12.04 and above</span></span> |
| <span data-ttu-id="e362b-157">CentOS</span><span class="sxs-lookup"><span data-stu-id="e362b-157">CentOS</span></span> | <span data-ttu-id="e362b-158">6.5 e acima</span><span class="sxs-lookup"><span data-stu-id="e362b-158">6.5 and above</span></span>  |
| <span data-ttu-id="e362b-159">RHEL</span><span class="sxs-lookup"><span data-stu-id="e362b-159">RHEL</span></span> | <span data-ttu-id="e362b-160">6.7 e acima</span><span class="sxs-lookup"><span data-stu-id="e362b-160">6.7 and above</span></span> |
| <span data-ttu-id="e362b-161">Debian</span><span class="sxs-lookup"><span data-stu-id="e362b-161">Debian</span></span> | <span data-ttu-id="e362b-162">7 e acima</span><span class="sxs-lookup"><span data-stu-id="e362b-162">7 and above</span></span> |
| <span data-ttu-id="e362b-163">Oracle Linux</span><span class="sxs-lookup"><span data-stu-id="e362b-163">Oracle Linux</span></span> | <span data-ttu-id="e362b-164">6.4 e acima</span><span class="sxs-lookup"><span data-stu-id="e362b-164">6.4 and above</span></span> |

<span data-ttu-id="e362b-165">O script também exige componentes python e bash para executar e se conectar com segurança ao ponto de recuperação.</span><span class="sxs-lookup"><span data-stu-id="e362b-165">The script also requires python and bash components to execute and connect securely to the recovery point.</span></span>

|<span data-ttu-id="e362b-166">Componente</span><span class="sxs-lookup"><span data-stu-id="e362b-166">Component</span></span> | <span data-ttu-id="e362b-167">Versão</span><span class="sxs-lookup"><span data-stu-id="e362b-167">Version</span></span>  |
| --------------- | ---- |
| <span data-ttu-id="e362b-168">bash</span><span class="sxs-lookup"><span data-stu-id="e362b-168">bash</span></span> | <span data-ttu-id="e362b-169">4 e acima</span><span class="sxs-lookup"><span data-stu-id="e362b-169">4 and above</span></span> |
| <span data-ttu-id="e362b-170">python</span><span class="sxs-lookup"><span data-stu-id="e362b-170">python</span></span> | <span data-ttu-id="e362b-171">2.6.6 e acima</span><span class="sxs-lookup"><span data-stu-id="e362b-171">2.6.6 and above</span></span>  |


### <a name="identifying-volumes"></a><span data-ttu-id="e362b-172">Identificação de Volumes</span><span class="sxs-lookup"><span data-stu-id="e362b-172">Identifying Volumes</span></span>

#### <a name="for-windows"></a><span data-ttu-id="e362b-173">Para Windows</span><span class="sxs-lookup"><span data-stu-id="e362b-173">For Windows</span></span>

<span data-ttu-id="e362b-174">Quando você executa o arquivo executável, o sistema operacional monta os novos volumes e atribui letras de unidade.</span><span class="sxs-lookup"><span data-stu-id="e362b-174">When you run the exectuable, the operating system mounts the new volumes and assigns drive letters.</span></span> <span data-ttu-id="e362b-175">Você pode usar o Windows Explorer ou o Explorador de arquivos para procurar essas unidades.</span><span class="sxs-lookup"><span data-stu-id="e362b-175">You can use Windows Explorer or File Explorer to browse those drives.</span></span> <span data-ttu-id="e362b-176">As letras de unidade atribuídas aos volumes podem não ser as mesmas letras da máquina virtual original, no entanto, o nome do volume é preservado.</span><span class="sxs-lookup"><span data-stu-id="e362b-176">The drive letters assigned to the volumes may not be the same letters as the original virtual machine, however, the volume name is preserved.</span></span> <span data-ttu-id="e362b-177">Por exemplo, se o volume na máquina virtual original era “disco de dados (E:\)”, esse volume pode ser anexado como “disco de dados ('Qualquer letra da unidade disponível':\)” no computador local.</span><span class="sxs-lookup"><span data-stu-id="e362b-177">For example, if the volume on the original virtual machine was “Data Disk (E:\)”, that volume can be attached as “Data Disk ('Any drive letter available':\) on the local computer.</span></span> <span data-ttu-id="e362b-178">Busque em todos os volumes mencionados na saída do script até encontrar a pasta/arquivos.</span><span class="sxs-lookup"><span data-stu-id="e362b-178">Browse through all volumes mentioned in the script output until you find your files/folder.</span></span>  
       
   ![Folha de recuperação de arquivo](./media/backup-azure-restore-files-from-vm/volumes-attached.png)
           
#### <a name="for-linux"></a><span data-ttu-id="e362b-180">Para Linux</span><span class="sxs-lookup"><span data-stu-id="e362b-180">For Linux</span></span>

<span data-ttu-id="e362b-181">No Linux, os volumes do ponto de recuperação são montados para a pasta onde o script é executado.</span><span class="sxs-lookup"><span data-stu-id="e362b-181">In Linux, the volumes of the recovery point are mounted to the folder where the script is run.</span></span> <span data-ttu-id="e362b-182">Os discos anexados, volumes e os caminhos de montagem correspondente são mostrados adequadamente.</span><span class="sxs-lookup"><span data-stu-id="e362b-182">The attached disks, volumes and the corresponding mount paths are shown accordingly.</span></span> <span data-ttu-id="e362b-183">Esses caminhos de montagem ficam visíveis aos usuários que têm acesso ao nível raiz.</span><span class="sxs-lookup"><span data-stu-id="e362b-183">These mount paths are visible to users having root level access.</span></span> <span data-ttu-id="e362b-184">Percorra os volumes mencionados na saída do script.</span><span class="sxs-lookup"><span data-stu-id="e362b-184">Browse through the volumes mentioned in the script output.</span></span>

  ![Folha Recuperação de Arquivo do Linux](./media/backup-azure-restore-files-from-vm/linux-mount-paths.png)
  

## <a name="closing-the-connection"></a><span data-ttu-id="e362b-186">Encerrando a conexão</span><span class="sxs-lookup"><span data-stu-id="e362b-186">Closing the connection</span></span>

<span data-ttu-id="e362b-187">Depois de identificar os arquivos e copiá-los para um local de armazenamento local, remova ou desmonte as unidades adicionais.</span><span class="sxs-lookup"><span data-stu-id="e362b-187">After identifying the files and copying them to a local storage location, remove (or unmount) the additional drives.</span></span> <span data-ttu-id="e362b-188">Para desmontar as unidades na folha **recuperação de arquivos** no portal do Azure, clique em **Desmontar discos**.</span><span class="sxs-lookup"><span data-stu-id="e362b-188">To unmount the drives, on the **File Recovery** blade in the Azure portal, click **Unmount Disks**.</span></span>

![Desmontar discos](./media/backup-azure-restore-files-from-vm/unmount-disks3.png)

<span data-ttu-id="e362b-190">Quando os discos tiverem sido desmontados, você receberá uma mensagem informando que tudo correu bem.</span><span class="sxs-lookup"><span data-stu-id="e362b-190">Once the disks have been unmounted, you receive a message letting you know it was successful.</span></span> <span data-ttu-id="e362b-191">Pode levar alguns minutos até que a conexão seja atualizada para que você possa remover os discos.</span><span class="sxs-lookup"><span data-stu-id="e362b-191">It may take a few minutes for the connection to refresh so that you can remove the disks.</span></span>

<span data-ttu-id="e362b-192">No Linux, após a conexão com o ponto de recuperação ser interrompida, o sistema operacional não removerá automaticamente os caminhos de montagem correspondentes.</span><span class="sxs-lookup"><span data-stu-id="e362b-192">In Linux, after the connection to the recovery point is severed, the OS doesn't remove the corresponding mount paths automatically.</span></span> <span data-ttu-id="e362b-193">Eles existem como volumes "órfãos" e são visíveis, mas geram um erro quando você acessa/grava os arquivos.</span><span class="sxs-lookup"><span data-stu-id="e362b-193">These exist as "orphan" volumes and they are visible but throw an error when you access/write the files.</span></span> <span data-ttu-id="e362b-194">Eles podem ser removidos manualmente.</span><span class="sxs-lookup"><span data-stu-id="e362b-194">They can be manually removed.</span></span> <span data-ttu-id="e362b-195">O script, quando executado, identifica esses volumes existentes em qualquer ponto de recuperação anterior e limpa mediante consentimento.</span><span class="sxs-lookup"><span data-stu-id="e362b-195">The script, when run, identifies any such volumes existing from any previous recovery points and cleans them up upon consent.</span></span>

## <a name="special-configurations"></a><span data-ttu-id="e362b-196">Configurações especiais</span><span class="sxs-lookup"><span data-stu-id="e362b-196">Special configurations</span></span>

### <a name="dynamic-disks"></a><span data-ttu-id="e362b-197">Discos Dinâmicos</span><span class="sxs-lookup"><span data-stu-id="e362b-197">Dynamic Disks</span></span>

<span data-ttu-id="e362b-198">Se a VM do Azure com backup possuir volumes que abrangem discos múltiplos (volumes estendidos e distribuídos) e/ou volumes tolerantes a falhas (volumes RAID-5 e espelhados) em discos dinâmicos, então, você não poderá executar o script executável na mesma VM.</span><span class="sxs-lookup"><span data-stu-id="e362b-198">If the Azure VM that was backed up has volumes that span multiple disks (spanned and striped volumes) and/or fault-tolerant volumes (mirrored and RAID-5 volumes) on dynamic disks, then you can't run the executable script on the same VM.</span></span> <span data-ttu-id="e362b-199">Em vez disso, execute o script executável em qualquer outra máquina com um sistema operacional compatível.</span><span class="sxs-lookup"><span data-stu-id="e362b-199">Instead, run the executable script on any other machine with a compatible operating system.</span></span>

### <a name="windows-storage-spaces"></a><span data-ttu-id="e362b-200">Espaços de Armazenamento do Windows</span><span class="sxs-lookup"><span data-stu-id="e362b-200">Windows Storage Spaces</span></span>

<span data-ttu-id="e362b-201">Os Espaços de Armazenamento do Windows são uma tecnologia no Armazenamento do Windows que permitem que você virtualize o armazenamento.</span><span class="sxs-lookup"><span data-stu-id="e362b-201">Windows Storage Spaces is a technology in Windows storage that enables you to virtualize storage.</span></span> <span data-ttu-id="e362b-202">Com os Espaços de Armazenamento do Windows, você pode agrupar discos padrão da indústria em pools de armazenamento e, em seguida, criar discos virtuais, chamados de espaços de armazenamento, no espaço disponível nesses pools de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="e362b-202">With Windows Storage Spaces you can group industry-standard disks into storage pools, and then create virtual disks, called storage spaces, from the available space in those storage pools.</span></span>

<span data-ttu-id="e362b-203">Se a VM do Azure que passou por backup usa Espaços de Armazenamento do Windows, você não pode executar o script executável na mesma VM.</span><span class="sxs-lookup"><span data-stu-id="e362b-203">If the Azure VM that was backed up uses Windows Storage Spaces, then you can't run the executable script on the same VM.</span></span> <span data-ttu-id="e362b-204">Em vez disso, execute o script executável em qualquer outra máquina com um sistema operacional compatível.</span><span class="sxs-lookup"><span data-stu-id="e362b-204">Instead, run the executable script on any other machine with a compatible operating system.</span></span>

### <a name="lvmraid-arrays"></a><span data-ttu-id="e362b-205">Matrizes LVM/RAID</span><span class="sxs-lookup"><span data-stu-id="e362b-205">LVM/RAID Arrays</span></span>

<span data-ttu-id="e362b-206">No Linux, o LVM (Gerenciador de volumes lógicos) e/ou Matrizes RAID de software são usados para gerenciar volumes lógicos em vários discos.</span><span class="sxs-lookup"><span data-stu-id="e362b-206">In Linux, Logical volume manager (LVM) and/or software RAID Arrays are used to manage logical volumes over multiple disks.</span></span> <span data-ttu-id="e362b-207">Se a VM de Linux de backup usar LVM e/ou Matrizes RAID, não será possível executar o script na mesma VM.</span><span class="sxs-lookup"><span data-stu-id="e362b-207">If the backed up Linux VM uses LVM and/or RAID Arrays, you can't run the script on the same VM.</span></span> <span data-ttu-id="e362b-208">Em vez disso, execute o script em qualquer outro computador com sistema operacional compatível e que ofereça suporte a sistema de arquivos da VM de backup.</span><span class="sxs-lookup"><span data-stu-id="e362b-208">Instead run the script on any other machine with compatible OS and which supports filesystem of the backed up VM.</span></span>

<span data-ttu-id="e362b-209">A saída do script exibe os discos de LVM e/ou Matrizes RAID e os volumes com o tipo de partição, conforme mostrado abaixo</span><span class="sxs-lookup"><span data-stu-id="e362b-209">The script output displays the LVM and/or RAID Arrays disks and the volumes with the partition type as shown below</span></span>

   ![Folha Saída de LVM do Linux](./media/backup-azure-restore-files-from-vm/linux-LVMOutput.png)
   
<span data-ttu-id="e362b-211">Os comandos a seguir precisam ser executados pelo usuário para colocar essas partições online.</span><span class="sxs-lookup"><span data-stu-id="e362b-211">The following commands need to be run by the user to bring these partitions online.</span></span> 

<span data-ttu-id="e362b-212">**Para partições LVM**</span><span class="sxs-lookup"><span data-stu-id="e362b-212">**For LVM Partitions**</span></span>

```
$ pvs <volume name as shown above in the script output> 
```
<span data-ttu-id="e362b-213">Isso lista os nomes de grupo de volume em um volume físico.</span><span class="sxs-lookup"><span data-stu-id="e362b-213">This lists the volume group names under a physical volume.</span></span>

```
$ lvdisplay <volume-group-name from the pvs command’s results> 
```
<span data-ttu-id="e362b-214">Isso lista todos os volumes lógicos, os nomes e os seus caminhos em um grupo de volumes.</span><span class="sxs-lookup"><span data-stu-id="e362b-214">This lists all logical volumes, names and their paths in a volume group.</span></span>

```
$ mount <LV path> </mountpath>
```
<span data-ttu-id="e362b-215">Para montar os volumes lógicos no caminho de sua escolha.</span><span class="sxs-lookup"><span data-stu-id="e362b-215">To mount the logical volumes to the path of your choice.</span></span>


<span data-ttu-id="e362b-216">**Para Matrizes RAID**</span><span class="sxs-lookup"><span data-stu-id="e362b-216">**For RAID Arrays**</span></span>

```
$ mdadm –detail –scan
```
<span data-ttu-id="e362b-217">Isso exibe detalhes sobre todos os discos raid.</span><span class="sxs-lookup"><span data-stu-id="e362b-217">This displays details about all raid disks.</span></span> <span data-ttu-id="e362b-218">O disco RAID relevante será exibido como`/dev/mdm/<RAID array name in the backed up VM>`</span><span class="sxs-lookup"><span data-stu-id="e362b-218">The relevant RAID disk will be displayed as `/dev/mdm/<RAID array name in the backed up VM>`</span></span>

<span data-ttu-id="e362b-219">Use o comando de montagem se o disco RAID tiver volumes físicos.</span><span class="sxs-lookup"><span data-stu-id="e362b-219">Use the mount command if the RAID disk has physical volumes.</span></span>
```
$ mount [RAID Disk Path] [/mounthpath]
```

<span data-ttu-id="e362b-220">Se esse disco RAID tiver outro LVM configurado, siga o mesmo procedimento, conforme descrito acima, para partições LVM com o nome do volume igual ao nome do Disco RAID</span><span class="sxs-lookup"><span data-stu-id="e362b-220">If this RAID disk has another LVM configured in it then follow the same procedure as outlined above for LVM partitions with the volume name being the RAID Disk name</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="e362b-221">Solucionar problemas</span><span class="sxs-lookup"><span data-stu-id="e362b-221">Troubleshooting</span></span>

<span data-ttu-id="e362b-222">Se você tiver problemas durante a recuperação de arquivos de máquinas virtuais, verifique a tabela a seguir para obter informações adicionais.</span><span class="sxs-lookup"><span data-stu-id="e362b-222">If you have problems while recovering files from the virtual machines, check the following table for additional information.</span></span>

| <span data-ttu-id="e362b-223">Mensagem de erro/Cenário</span><span class="sxs-lookup"><span data-stu-id="e362b-223">Error Message / Scenario</span></span> | <span data-ttu-id="e362b-224">Causas prováveis</span><span class="sxs-lookup"><span data-stu-id="e362b-224">Probable Cause</span></span> | <span data-ttu-id="e362b-225">Ação recomendada</span><span class="sxs-lookup"><span data-stu-id="e362b-225">Recommended action</span></span> |
| ------------------------ | -------------- | ------------------ |
| <span data-ttu-id="e362b-226">Saída de exe: *exceção ao se conectar ao destino*</span><span class="sxs-lookup"><span data-stu-id="e362b-226">Exe output: *Exception connecting to the target*</span></span> |<span data-ttu-id="e362b-227">O script não é capaz de acessar o ponto de recuperação</span><span class="sxs-lookup"><span data-stu-id="e362b-227">Script is not able to access the recovery point</span></span> | <span data-ttu-id="e362b-228">Verifique se o computador atende aos requisitos de acesso mencionados acima</span><span class="sxs-lookup"><span data-stu-id="e362b-228">Check whether the machine fulfills the access requirements mentioned above</span></span>|  
|   <span data-ttu-id="e362b-229">Saída de exe: *o destino já foi acessado por meio de uma sessão iSCSI.*</span><span class="sxs-lookup"><span data-stu-id="e362b-229">Exe output: *The target has already been logged in via an ISCSI session.*</span></span> | <span data-ttu-id="e362b-230">O script já foi executado na mesma máquina e as unidades foram anexadas</span><span class="sxs-lookup"><span data-stu-id="e362b-230">The script was already executed on the same machine and the drives have been attached</span></span> | <span data-ttu-id="e362b-231">Os volumes do ponto de recuperação já foram anexados.</span><span class="sxs-lookup"><span data-stu-id="e362b-231">The volumes of the recovery point have already been attached.</span></span> <span data-ttu-id="e362b-232">Eles NÃO podem ser montados com as mesmas letras de unidade da VM original.</span><span class="sxs-lookup"><span data-stu-id="e362b-232">They may NOT be mounted with the same drive letters of the original VM.</span></span> <span data-ttu-id="e362b-233">Navegue por todos os volumes disponíveis no Explorer para encontrar o arquivo</span><span class="sxs-lookup"><span data-stu-id="e362b-233">Browse through all the available volumes in the file explorer for your file</span></span> |
| <span data-ttu-id="e362b-234">Saída de exe: *esse script é inválido porque os discos foram desmontados por meio do portal/o limite de 12 horas foi excedido. Baixe um novo script do portal.*</span><span class="sxs-lookup"><span data-stu-id="e362b-234">Exe output: *This script is invalid because the disks have been dismounted via portal/exceeded the 12-hr limit. Please download a new script from the portal.*</span></span> |  <span data-ttu-id="e362b-235">Os discos foram desmontados do portal ou o limite de 12 horas foi excedido</span><span class="sxs-lookup"><span data-stu-id="e362b-235">The disks have been dismounted from the portal or the 12-hr limit exceeded</span></span> |    <span data-ttu-id="e362b-236">Esse exe é inválido e não pode ser executado.</span><span class="sxs-lookup"><span data-stu-id="e362b-236">This particular exe is now invalid and can’t be run.</span></span> <span data-ttu-id="e362b-237">Se você desejar acessar os arquivos desse ponto de recuperação a tempo, visite o portal para obter um novo exe</span><span class="sxs-lookup"><span data-stu-id="e362b-237">If you want to access the files of that recovery point-in-time, visit the portal for a new exe</span></span>|
| <span data-ttu-id="e362b-238">Na máquina na qual o exe é executado: novos volumes não serão desmontados depois que o botão de desmontagem for clicado</span><span class="sxs-lookup"><span data-stu-id="e362b-238">On the machine where the exe is run: The new volumes are not dismounted after the dismount button is clicked</span></span> |    <span data-ttu-id="e362b-239">O Iniciador iSCSI na máquina não está respondendo/atualizando sua conexão para o destino e manutenção do cache</span><span class="sxs-lookup"><span data-stu-id="e362b-239">The ISCSI initiator on the machine is not responding/refreshing its connection to the target and maintaining the cache</span></span> |    <span data-ttu-id="e362b-240">Aguarde alguns minutos depois que o botão de desmontagem for pressionado.</span><span class="sxs-lookup"><span data-stu-id="e362b-240">Wait for some mins after the dismount button is pressed.</span></span> <span data-ttu-id="e362b-241">Se os novos volumes ainda não estiverem desmontados, navegue por todos os volumes.</span><span class="sxs-lookup"><span data-stu-id="e362b-241">If the new volumes are still not dismounted, please browse through all the volumes.</span></span> <span data-ttu-id="e362b-242">Isso força o iniciador a atualizar a conexão e o volume é desmontado com uma mensagem de erro de que o disco não está disponível</span><span class="sxs-lookup"><span data-stu-id="e362b-242">This forces the initiator to refresh the connection and the volume is dismounted with an error message that the disk is not available</span></span>|
| <span data-ttu-id="e362b-243">Saída de exe: o script é executado com êxito, mas a mensagem "Novos volumes anexados" não é exibida na saída do script</span><span class="sxs-lookup"><span data-stu-id="e362b-243">Exe output: Script is run successfully but “New volumes attached” is not displayed on the script output</span></span> | <span data-ttu-id="e362b-244">Esse é um problema temporário</span><span class="sxs-lookup"><span data-stu-id="e362b-244">This is a transient error</span></span>   | <span data-ttu-id="e362b-245">Os volumes já foram anexados.</span><span class="sxs-lookup"><span data-stu-id="e362b-245">The volumes would have been already attached.</span></span> <span data-ttu-id="e362b-246">Abra o Explorer para navegar.</span><span class="sxs-lookup"><span data-stu-id="e362b-246">Open Explorer to browse.</span></span> <span data-ttu-id="e362b-247">Se você estiver usando a mesma máquina para todas as execuções de scripts, considere reiniciar a máquina, e a lista deverá ser exibida nas execuções subsequentes do exe.</span><span class="sxs-lookup"><span data-stu-id="e362b-247">If you are using the same machine for running scripts every time, consider restarting the machine and the list should be displayed in the subsequent exe runs.</span></span> |
| <span data-ttu-id="e362b-248">Específico do Linux: não é possível exibir os volumes desejados</span><span class="sxs-lookup"><span data-stu-id="e362b-248">Linux specific: Not able to view the desired volumes</span></span> | <span data-ttu-id="e362b-249">O sistema operacional da máquina na qual o script é executado pode não reconhecer o sistema de arquivos subjacente da VM de backup</span><span class="sxs-lookup"><span data-stu-id="e362b-249">The OS of the machine where the script is run may not recognize the underlying filesystem of the backed up VM</span></span> | <span data-ttu-id="e362b-250">Verifique se o ponto de recuperação é consistente com a falha ou consistentes com o arquivo.</span><span class="sxs-lookup"><span data-stu-id="e362b-250">Check whether the recovery point is crash consistent or file-consistent.</span></span> <span data-ttu-id="e362b-251">Se for consistente com o arquivo, execute o script em outro computador cujo sistema operacional reconheça o sistema de arquivos da VM de backup</span><span class="sxs-lookup"><span data-stu-id="e362b-251">If file consistent, run the script on another machine whose OS recognizes the backed up VM's filesystem</span></span> |
| <span data-ttu-id="e362b-252">Específico do Windows: não é possível exibir os volumes desejados</span><span class="sxs-lookup"><span data-stu-id="e362b-252">Windows specific: Not able to view the desired volumes</span></span> | <span data-ttu-id="e362b-253">Os discos podem ter sido anexados, mas os volumes não foram configurados</span><span class="sxs-lookup"><span data-stu-id="e362b-253">The disks may have been attached but the volumes were not configured</span></span> | <span data-ttu-id="e362b-254">Na tela de gerenciamento de disco, identifique os discos adicionais relacionados ao ponto de recuperação.</span><span class="sxs-lookup"><span data-stu-id="e362b-254">From the disk management screen, identify the additional disks related to the recovery point.</span></span> <span data-ttu-id="e362b-255">Se algum desses discos estiver no estado offline, tente torná-los online clicando com o botão direito do mouse no disco e, em seguida, em 'Online'</span><span class="sxs-lookup"><span data-stu-id="e362b-255">If any of these disks are in offline state try making them online by right-clicking on the disk and click 'Online'</span></span>|
