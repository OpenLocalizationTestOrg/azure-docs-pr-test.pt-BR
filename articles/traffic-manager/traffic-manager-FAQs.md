---
title: "Gerenciador de Tráfego do Azure — perguntas frequentes | Microsoft Docs"
description: "Este artigo fornece respostas a perguntas frequentes sobre o Gerenciador de Tráfego"
services: traffic-manager
documentationcenter: 
author: kumudd
manager: timlt
editor: 
ms.assetid: 75d5ff9a-f4b9-4b05-af32-700e7bdfea5a
ms.service: traffic-manager
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 06/15/2017
ms.author: kumud
ms.openlocfilehash: 44762864e0a5adf568fcd4928b48661196f05b9e
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/11/2017
---
# <a name="traffic-manager-frequently-asked-questions-faq"></a><span data-ttu-id="6521a-103">Perguntas frequentes sobre o Gerenciador de Tráfego</span><span class="sxs-lookup"><span data-stu-id="6521a-103">Traffic Manager Frequently Asked Questions (FAQ)</span></span>

## <a name="traffic-manager-basics"></a><span data-ttu-id="6521a-104">Noções básicas sobre o Gerenciador de Tráfego</span><span class="sxs-lookup"><span data-stu-id="6521a-104">Traffic Manager basics</span></span>

### <a name="what-ip-address-does-traffic-manager-use"></a><span data-ttu-id="6521a-105">Qual endereço IP o Gerenciador de Tráfego usa?</span><span class="sxs-lookup"><span data-stu-id="6521a-105">What IP address does Traffic Manager use?</span></span>

<span data-ttu-id="6521a-106">Conforme explicado em [Como funciona o Gerenciador de Tráfego](../traffic-manager/traffic-manager-overview.md#how-traffic-manager-works), o Gerenciador de Tráfego funciona no nível do DNS.</span><span class="sxs-lookup"><span data-stu-id="6521a-106">As explained in [How Traffic Manager Works](../traffic-manager/traffic-manager-overview.md#how-traffic-manager-works), Traffic Manager works at the DNS level.</span></span> <span data-ttu-id="6521a-107">Ele envia as respostas DNS para direcionar os clientes ao ponto de extremidade de serviço apropriado.</span><span class="sxs-lookup"><span data-stu-id="6521a-107">It sends DNS responses to direct clients to the appropriate service endpoint.</span></span> <span data-ttu-id="6521a-108">Em seguida, os clientes se conectam diretamente ao ponto de extremidade de serviço, não pelo Gerenciador de Tráfego.</span><span class="sxs-lookup"><span data-stu-id="6521a-108">Clients then connect to the service endpoint directly, not through Traffic Manager.</span></span>

<span data-ttu-id="6521a-109">Portanto, o Gerenciador de Tráfego não fornece um ponto de extremidade ou o endereço IP para que os clientes se conectem.</span><span class="sxs-lookup"><span data-stu-id="6521a-109">Therefore, Traffic Manager does not provide an endpoint or IP address for clients to connect to.</span></span> <span data-ttu-id="6521a-110">Portanto, se você desejar um endereço IP estático para o serviço, isso deverá ser configurado no serviço, não no Gerenciador de Tráfego.</span><span class="sxs-lookup"><span data-stu-id="6521a-110">Therefore, if you want static IP address for your service, that must be configured at the service, not in Traffic Manager.</span></span>

### <a name="does-traffic-manager-support-sticky-sessions"></a><span data-ttu-id="6521a-111">O Gerenciador de Tráfego dá suporte a sessões “temporárias”?</span><span class="sxs-lookup"><span data-stu-id="6521a-111">Does Traffic Manager support 'sticky' sessions?</span></span>

<span data-ttu-id="6521a-112">Conforme explicado em [Como funciona o Gerenciador de Tráfego](../traffic-manager/traffic-manager-overview.md#how-traffic-manager-works), o Gerenciador de Tráfego funciona no nível do DNS.</span><span class="sxs-lookup"><span data-stu-id="6521a-112">As explained in [How Traffic Manager Works](../traffic-manager/traffic-manager-overview.md#how-traffic-manager-works), Traffic Manager works at the DNS level.</span></span> <span data-ttu-id="6521a-113">Ele usa as respostas DNS para direcionar os clientes ao ponto de extremidade de serviço apropriado.</span><span class="sxs-lookup"><span data-stu-id="6521a-113">It uses DNS responses to direct clients to the appropriate service endpoint.</span></span> <span data-ttu-id="6521a-114">Os clientes se conectam diretamente ao ponto de extremidade de serviço, não pelo Gerenciador de Tráfego.</span><span class="sxs-lookup"><span data-stu-id="6521a-114">Clients connect to the service endpoint directly, not through Traffic Manager.</span></span> <span data-ttu-id="6521a-115">Portanto, o Gerenciador de Tráfego não vê o tráfego HTTP entre o cliente e o servidor.</span><span class="sxs-lookup"><span data-stu-id="6521a-115">Therefore, Traffic Manager does not see the HTTP traffic between the client and the server.</span></span>

<span data-ttu-id="6521a-116">Além disso, o endereço IP de origem da consulta DNS recebida pelo Gerenciador de Tráfego pertence ao serviço DNS recursivo, não ao cliente.</span><span class="sxs-lookup"><span data-stu-id="6521a-116">Additionally, the source IP address of the DNS query received by Traffic Manager belongs to the recursive DNS service, not the client.</span></span> <span data-ttu-id="6521a-117">Portanto, o Gerenciador de Tráfego não consegue acompanhar clientes individuais e não pode implementar sessões “temporárias”.</span><span class="sxs-lookup"><span data-stu-id="6521a-117">Therefore, Traffic Manager has no way to track individual clients and cannot implement 'sticky' sessions.</span></span> <span data-ttu-id="6521a-118">Essa limitação é comum a todos os sistemas de gerenciamento de tráfego baseados em DNS e não é específica ao Gerenciador de Tráfego.</span><span class="sxs-lookup"><span data-stu-id="6521a-118">This limitation is common to all DNS-based traffic management systems and is not specific to Traffic Manager.</span></span>

### <a name="why-am-i-seeing-an-http-error-when-using-traffic-manager"></a><span data-ttu-id="6521a-119">Por que vejo um erro de HTTP ao usar o Gerenciador de Tráfego?</span><span class="sxs-lookup"><span data-stu-id="6521a-119">Why am I seeing an HTTP error when using Traffic Manager?</span></span>

<span data-ttu-id="6521a-120">Conforme explicado em [Como funciona o Gerenciador de Tráfego](../traffic-manager/traffic-manager-overview.md#how-traffic-manager-works), o Gerenciador de Tráfego funciona no nível do DNS.</span><span class="sxs-lookup"><span data-stu-id="6521a-120">As explained in [How Traffic Manager Works](../traffic-manager/traffic-manager-overview.md#how-traffic-manager-works), Traffic Manager works at the DNS level.</span></span> <span data-ttu-id="6521a-121">Ele usa as respostas DNS para direcionar os clientes ao ponto de extremidade de serviço apropriado.</span><span class="sxs-lookup"><span data-stu-id="6521a-121">It uses DNS responses to direct clients to the appropriate service endpoint.</span></span> <span data-ttu-id="6521a-122">Em seguida, os clientes se conectam diretamente ao ponto de extremidade de serviço, não pelo Gerenciador de Tráfego.</span><span class="sxs-lookup"><span data-stu-id="6521a-122">Clients then connect to the service endpoint directly, not through Traffic Manager.</span></span> <span data-ttu-id="6521a-123">O Gerenciador de Tráfego não vê o tráfego HTTP entre o cliente e o servidor.</span><span class="sxs-lookup"><span data-stu-id="6521a-123">Traffic Manager does not see HTTP traffic between client and server.</span></span> <span data-ttu-id="6521a-124">Portanto, qualquer erro HTTP visto deve ser proveniente do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="6521a-124">Therefore, any HTTP error you see must be coming from your application.</span></span> <span data-ttu-id="6521a-125">Para que o cliente se conecte ao aplicativo, todas as etapas de resolução DNS são concluídas.</span><span class="sxs-lookup"><span data-stu-id="6521a-125">For the client to connect to the application, all DNS resolution steps are complete.</span></span> <span data-ttu-id="6521a-126">Isso inclui qualquer interação que o Gerenciador de Tráfego tem no fluxo de tráfego do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="6521a-126">That includes any interaction that Traffic Manager has on the application traffic flow.</span></span>

<span data-ttu-id="6521a-127">Portanto, as investigações adicionais devem se concentrar no aplicativo.</span><span class="sxs-lookup"><span data-stu-id="6521a-127">Further investigation should therefore focus on the application.</span></span>

<span data-ttu-id="6521a-128">O cabeçalho de host HTTP enviado do navegador do cliente é a fonte mais comum de problemas.</span><span class="sxs-lookup"><span data-stu-id="6521a-128">The HTTP host header sent from the client's browser is the most common source of problems.</span></span> <span data-ttu-id="6521a-129">Verifique se o aplicativo está configurado para aceitar o cabeçalho de host correto para o nome de domínio que está sendo usado.</span><span class="sxs-lookup"><span data-stu-id="6521a-129">Make sure that the application is configured to accept the correct host header for the domain name you are using.</span></span> <span data-ttu-id="6521a-130">Para pontos de extremidade que usam o Serviço de Aplicativo do Azure, consulte [Configurando um nome de domínio personalizado para um aplicativo Web no Serviço de Aplicativo do Azure usando o Gerenciador de Tráfego](../app-service-web/web-sites-traffic-manager-custom-domain-name.md).</span><span class="sxs-lookup"><span data-stu-id="6521a-130">For endpoints using the Azure App Service, see [configuring a custom domain name for a web app in Azure App Service using Traffic Manager](../app-service-web/web-sites-traffic-manager-custom-domain-name.md).</span></span>

### <a name="what-is-the-performance-impact-of-using-traffic-manager"></a><span data-ttu-id="6521a-131">Qual é o impacto no desempenho de usar o Gerenciador de Tráfego?</span><span class="sxs-lookup"><span data-stu-id="6521a-131">What is the performance impact of using Traffic Manager?</span></span>

<span data-ttu-id="6521a-132">Conforme explicado em [Como funciona o Gerenciador de Tráfego](../traffic-manager/traffic-manager-overview.md#how-traffic-manager-works), o Gerenciador de Tráfego funciona no nível do DNS.</span><span class="sxs-lookup"><span data-stu-id="6521a-132">As explained in [How Traffic Manager Works](../traffic-manager/traffic-manager-overview.md#how-traffic-manager-works), Traffic Manager works at the DNS level.</span></span> <span data-ttu-id="6521a-133">Como os clientes se conectam diretamente ao pontos de extremidade de seu serviço, não há qualquer impacto no desempenho ao usar o Gerenciador de Tráfego quando a conexão é estabelecida.</span><span class="sxs-lookup"><span data-stu-id="6521a-133">Since clients connect to your service endpoints directly, there is no performance impact incurred when using Traffic Manager once the connection is established.</span></span>

<span data-ttu-id="6521a-134">Como o Gerenciador de Tráfego é integrado aos aplicativos no nível de DNS, ele requer uma pesquisa de DNS adicional para ser inserido na cadeia de resolução de DNS.</span><span class="sxs-lookup"><span data-stu-id="6521a-134">Since Traffic Manager integrates with applications at the DNS level, it does require an additional DNS lookup to be inserted into the DNS resolution chain.</span></span> <span data-ttu-id="6521a-135">O impacto do Gerenciador de Tráfego no tempo de resolução de DNS é mínimo.</span><span class="sxs-lookup"><span data-stu-id="6521a-135">The impact of Traffic Manager on DNS resolution time is minimal.</span></span> <span data-ttu-id="6521a-136">O Gerenciador de Tráfego usa uma rede global de servidores de nomes, bem como a rede [anycast](https://en.wikipedia.org/wiki/Anycast) para garantir que as consultas DNS são sempre encaminhadas para o servidor de nomes mais próximo disponível.</span><span class="sxs-lookup"><span data-stu-id="6521a-136">Traffic Manager uses a global network of name servers, and uses [anycast](https://en.wikipedia.org/wiki/Anycast) networking to ensure DNS queries are always routed to the closest available name server.</span></span> <span data-ttu-id="6521a-137">Além disso, o armazenamento em cache de respostas DNS significa que a latência DNS adicional gerada pelo uso do Gerenciador de Tráfego só se aplica a uma fração de sessões.</span><span class="sxs-lookup"><span data-stu-id="6521a-137">In addition, caching of DNS responses means that the additional DNS latency incurred by using Traffic Manager applies only to a fraction of sessions.</span></span>

<span data-ttu-id="6521a-138">O método por Desempenho encaminha o tráfego para o ponto de extremidade mais próximo disponível.</span><span class="sxs-lookup"><span data-stu-id="6521a-138">The Performance method routes traffic to the closest available endpoint.</span></span> <span data-ttu-id="6521a-139">O resultado final é que o impacto de desempenho geral associado a esse método deve ser mínimo.</span><span class="sxs-lookup"><span data-stu-id="6521a-139">The net result is that the overall performance impact associated with this method should be minimal.</span></span> <span data-ttu-id="6521a-140">Qualquer aumento na latência DNS deve ser deslocado pela menor latência de rede para o ponto de extremidade.</span><span class="sxs-lookup"><span data-stu-id="6521a-140">Any increase in DNS latency should be offset by lower network latency to the endpoint.</span></span>

### <a name="what-application-protocols-can-i-use-with-traffic-manager"></a><span data-ttu-id="6521a-141">Quais protocolos de aplicativo posso usar com o Gerenciador de Tráfego?</span><span class="sxs-lookup"><span data-stu-id="6521a-141">What application protocols can I use with Traffic Manager?</span></span>

<span data-ttu-id="6521a-142">Conforme explicado em [Como funciona o Gerenciador de Tráfego](../traffic-manager/traffic-manager-overview.md#how-traffic-manager-works), o Gerenciador de Tráfego funciona no nível do DNS.</span><span class="sxs-lookup"><span data-stu-id="6521a-142">As explained in [How Traffic Manager Works](../traffic-manager/traffic-manager-overview.md#how-traffic-manager-works), Traffic Manager works at the DNS level.</span></span> <span data-ttu-id="6521a-143">Após a conclusão da pesquisa de DNS, os clientes se conectam diretamente ao ponto de extremidade do aplicativo, não pelo Gerenciador de Tráfego.</span><span class="sxs-lookup"><span data-stu-id="6521a-143">Once the DNS lookup is complete, clients connect to the application endpoint directly, not through Traffic Manager.</span></span> <span data-ttu-id="6521a-144">Portanto, a conexão pode usar qualquer protocolo de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="6521a-144">Therefore, the connection can use any application protocol.</span></span> <span data-ttu-id="6521a-145">Se você selecionar TCP como protocolo de monitoramento, o monitoramento de integridade do ponto de extremidade do Gerenciador de Tráfego poderá ser feito sem usar qualquer protocolo de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="6521a-145">If you select TCP as the monitoring protocol, Traffic Manager's endpoint health monitoring can be done without using any application protocols.</span></span> <span data-ttu-id="6521a-146">Se você optar por ter a integridade verificada usando um protocolo de aplicativo, o ponto de extremidade precisará ser capaz de responder às solicitações HTTP ou HTTPS GET.</span><span class="sxs-lookup"><span data-stu-id="6521a-146">If you choose to have the health verified using an application protocol, the endpoint needs to be able to respond to either HTTP or HTTPS GET requests.</span></span>

### <a name="can-i-use-traffic-manager-with-a-naked-domain-name"></a><span data-ttu-id="6521a-147">Posso usar o Gerenciador de Tráfego com um nome de domínio raiz?</span><span class="sxs-lookup"><span data-stu-id="6521a-147">Can I use Traffic Manager with a 'naked' domain name?</span></span>

<span data-ttu-id="6521a-148">Nº</span><span class="sxs-lookup"><span data-stu-id="6521a-148">No.</span></span> <span data-ttu-id="6521a-149">Os padrões de DNS não permitem que CNAMEs coexistam com outros registros DNS do mesmo nome.</span><span class="sxs-lookup"><span data-stu-id="6521a-149">The DNS standards do not permit CNAMEs to co-exist with other DNS records of the same name.</span></span> <span data-ttu-id="6521a-150">O apex (ou raiz) de uma zona DNS sempre contém dois registros DNS já existentes: a SOA e os registros NS autoritativos.</span><span class="sxs-lookup"><span data-stu-id="6521a-150">The apex (or root) of a DNS zone always contains two pre-existing DNS records; the SOA and the authoritative NS records.</span></span> <span data-ttu-id="6521a-151">Isso significa que um registro CNAME não pode ser criado no apex da zona sem violar os padrões do DNS.</span><span class="sxs-lookup"><span data-stu-id="6521a-151">This means a CNAME record cannot be created at the zone apex without violating the DNS standards.</span></span>

<span data-ttu-id="6521a-152">O Gerenciador de Tráfego exige um registro CNAME DNS para mapear o nome DNS intuitivo.</span><span class="sxs-lookup"><span data-stu-id="6521a-152">Traffic Manager requires a DNS CNAME record to map the vanity DNS name.</span></span> <span data-ttu-id="6521a-153">Por exemplo, você mapeia www.contoso.com para o nome DNS do perfil do Gerenciador de Tráfego contoso.trafficmanager.net.</span><span class="sxs-lookup"><span data-stu-id="6521a-153">For example, you map www.contoso.com to the Traffic Manager profile DNS name contoso.trafficmanager.net.</span></span> <span data-ttu-id="6521a-154">Além disso, o perfil do Gerenciador de Tráfego retorna um segundo DNS CNAME para indicar a qual ponto de extremidade o cliente deve se conectar.</span><span class="sxs-lookup"><span data-stu-id="6521a-154">Additionally, the Traffic Manager profile returns a second DNS CNAME to indicate which endpoint the client should connect to.</span></span>

<span data-ttu-id="6521a-155">Para solucionar esse problema, recomendamos o uso de um redirecionamento HTTP para direcionar o tráfego do nome de domínio raiz para uma URL diferente, que então poderá usar o Gerenciador de Tráfego.</span><span class="sxs-lookup"><span data-stu-id="6521a-155">To work around this issue, we recommend using an HTTP redirect to direct traffic from the naked domain name to a different URL, which can then use Traffic Manager.</span></span> <span data-ttu-id="6521a-156">Por exemplo, o domínio raiz “contoso.com” pode redirecionar os usuários para o CNAME “www.contoso.com” que aponta para o nome DNS do Gerenciador de Tráfego.</span><span class="sxs-lookup"><span data-stu-id="6521a-156">For example, the naked domain 'contoso.com' can redirect users to the CNAME 'www.contoso.com' that points to the Traffic Manager DNS name.</span></span>

<span data-ttu-id="6521a-157">O suporte completo para domínios naked no Gerenciador de Tráfego é controlado em nossa lista de pendências de recurso.</span><span class="sxs-lookup"><span data-stu-id="6521a-157">Full support for naked domains in Traffic Manager is tracked in our feature backlog.</span></span> <span data-ttu-id="6521a-158">Você pode registrar seu suporte para essa solicitação de recurso [votando em nosso site de comentários da comunidade](https://feedback.azure.com/forums/217313-networking/suggestions/5485350-support-apex-naked-domains-more-seamlessly).</span><span class="sxs-lookup"><span data-stu-id="6521a-158">You can register your support for this feature request by [voting for it on our community feedback site](https://feedback.azure.com/forums/217313-networking/suggestions/5485350-support-apex-naked-domains-more-seamlessly).</span></span>

### <a name="does-traffic-manager-consider-the-client-subnet-address-when-handling-dns-queries"></a><span data-ttu-id="6521a-159">O Gerenciador de Tráfego considera o endereço de sub-rede do cliente ao manipular consultas DNS?</span><span class="sxs-lookup"><span data-stu-id="6521a-159">Does Traffic Manager consider the client subnet address when handling DNS queries?</span></span> 
<span data-ttu-id="6521a-160">Não, no momento o Gerenciador de Tráfego considera apenas o endereço IP de origem da consulta DNS que ele recebe, que normalmente é o endereço IP do resolvedor DNS, ao executar pesquisas de métodos de roteamento geográfico e de desempenho.</span><span class="sxs-lookup"><span data-stu-id="6521a-160">No, currently Traffic Manager considers only the source IP address of the DNS query it receives, which usually is the IP address of the DNS resolver, when performing lookups for Geographic and Performance routing methods.</span></span>  
<span data-ttu-id="6521a-161">Especificamente, o Gerenciador de Tráfego não dá suporte atualmente à [RFC 7871 – Sub-rede de Cliente em Consultas DNS](https://tools.ietf.org/html/rfc7871), que fornece um [Mecanismo de Extensão para DNS (EDNS0)](https://tools.ietf.org/html/rfc2671) que pode passar o endereço de sub-rede do cliente de resolvedores que dão suporte a ele para servidores DNS.</span><span class="sxs-lookup"><span data-stu-id="6521a-161">Specifically, [RFC 7871 – Client Subnet in DNS Queries](https://tools.ietf.org/html/rfc7871) that provides an [Extension Mechanism for DNS (EDNS0)](https://tools.ietf.org/html/rfc2671) which can pass on the client subnet address from resolvers that support it to DNS servers is currently not supported in Traffic Manager.</span></span> <span data-ttu-id="6521a-162">Você pode registrar seu suporte para essa solicitação de recurso por meio de nosso [site de comentários da comunidade](https://feedback.azure.com/forums/217313-networking).</span><span class="sxs-lookup"><span data-stu-id="6521a-162">You can register your support for this feature request through our [community feedback site](https://feedback.azure.com/forums/217313-networking).</span></span>


### <a name="what-is-dns-ttl-and-how-does-it-impact-my-users"></a><span data-ttu-id="6521a-163">O que é o TTL do DNS e como ele afeta os meus usuários?</span><span class="sxs-lookup"><span data-stu-id="6521a-163">What is DNS TTL and how does it impact my users?</span></span>

<span data-ttu-id="6521a-164">Quando uma consulta DNS chega no Gerenciador de Tráfego, ela define um valor na resposta chamado tempo de vida (TTL).</span><span class="sxs-lookup"><span data-stu-id="6521a-164">When a DNS query lands on Traffic Manager, it sets a value in the response called time-to-live (TTL).</span></span> <span data-ttu-id="6521a-165">Esse valor, cuja unidade é em segundos, indica ao downstream dos resolvedores DNS o tempo necessário para armazenar em cache essa resposta.</span><span class="sxs-lookup"><span data-stu-id="6521a-165">This value, whose unit is in seconds, indicates to DNS resolvers downstream on how long to cache this response.</span></span> <span data-ttu-id="6521a-166">Enquanto não há garantia de que os resolvedores DNS armazenem esse resultado em cache, este armazenamento permite que respondam a todas as consultas subsequentes além do cache, em vez de irem para servidores DNS do Gerenciador de Tráfego.</span><span class="sxs-lookup"><span data-stu-id="6521a-166">While DNS resolvers are not guaranteed to cache this result, caching it enables them to respond to any subsequent queries off the cache instead of going to Traffic Manager DNS servers.</span></span> <span data-ttu-id="6521a-167">Isso afeta as respostas da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="6521a-167">This impacts the responses as follows:</span></span>
- <span data-ttu-id="6521a-168">um TTL maior reduz o número de consultas que chegam aos servidores DNS do Gerenciador de Tráfego, o que pode reduzir o custo para um cliente, pois o número de consultas apresentadas é um uso faturável.</span><span class="sxs-lookup"><span data-stu-id="6521a-168">a higher TTL reduces the number of queries that land on the Traffic Manager DNS servers, which can reduce the cost for a customer since number of queries served is a billable usage.</span></span>
- <span data-ttu-id="6521a-169">um TTL maior pode reduzir potencialmente o tempo que leva para realizar uma pesquisa de DNS.</span><span class="sxs-lookup"><span data-stu-id="6521a-169">a higher TTL can potentially reduce the time it takes to do a DNS lookup.</span></span>
- <span data-ttu-id="6521a-170">um TTL maior também significa que os dados não refletem as últimas informações sobre integridade que o Gerenciador de Tráfego obteve por meio de seus agentes de investigação.</span><span class="sxs-lookup"><span data-stu-id="6521a-170">a higher TTL also means that your data does not reflect the latest health information that Traffic Manager has obtained through its probing agents.</span></span>

### <a name="how-high-or-low-can-i-set-the-ttl-for-traffic-manager-responses"></a><span data-ttu-id="6521a-171">Como posso definir o nível (alto ou baixo) do TTL para respostas do Gerenciador de Tráfego?</span><span class="sxs-lookup"><span data-stu-id="6521a-171">How high or low can I set the TTL for Traffic Manager responses?</span></span>

<span data-ttu-id="6521a-172">Você pode definir, em um nível por perfil, o TTL do DNS tão baixo quanto 0 segundos e tão alto quanto 2.147.483.647 segundos (o intervalo máximo em conformidade com [RFC-1035](https://www.ietf.org/rfc/rfc1035.txt )).</span><span class="sxs-lookup"><span data-stu-id="6521a-172">You can set, at a per profile level, the DNS TTL to be as low as 0 seconds and as high as 2,147,483,647 seconds (the maximum range compliant with [RFC-1035](https://www.ietf.org/rfc/rfc1035.txt )).</span></span> <span data-ttu-id="6521a-173">Um TTL de 0 significa que os resolvedores DNS de downstream não armazenam em cache respostas de consultas e que todas as consultas devem alcançar os servidores DNS do Gerenciador de Tráfego para a resolução.</span><span class="sxs-lookup"><span data-stu-id="6521a-173">A TTL of 0 means that downstream DNS resolvers do not cache query responses and all queries are expected to reach the Traffic Manager DNS servers for resolution.</span></span>

## <a name="traffic-manager-geographic-traffic-routing-method"></a><span data-ttu-id="6521a-174">Método de roteamento de tráfego geográfico do Gerenciador de Tráfego</span><span class="sxs-lookup"><span data-stu-id="6521a-174">Traffic Manager Geographic traffic routing method</span></span>

### <a name="what-are-some-use-cases-where-geographic-routing-is-useful"></a><span data-ttu-id="6521a-175">Quais são alguns casos de uso em que o roteamento geográfico é útil?</span><span class="sxs-lookup"><span data-stu-id="6521a-175">What are some use cases where geographic routing is useful?</span></span> 
<span data-ttu-id="6521a-176">O tipo de roteamento geográfico pode ser usado em qualquer cenário em que um cliente do Azure precise diferenciar seus usuários com base nas regiões geográficas.</span><span class="sxs-lookup"><span data-stu-id="6521a-176">Geographic routing type can be used in any scenario where an Azure customer needs to distinguish their users based on geographic regions.</span></span> <span data-ttu-id="6521a-177">Por exemplo, ao usar o método de roteamento de tráfego geográfico, você proporciona aos usuários de regiões específicas uma experiência de usuário diferente daquelas de outras regiões.</span><span class="sxs-lookup"><span data-stu-id="6521a-177">For example, using the Geographic traffic routing method, you can give users from specific regions a different user experience than those from other regions.</span></span> <span data-ttu-id="6521a-178">Outro exemplo é estar em conformidade com as normas soberanas de dados locais que exigem que os usuários de uma região específica sejam atendidos somente pelos pontos de extremidade dessa região.</span><span class="sxs-lookup"><span data-stu-id="6521a-178">Another example is complying with local data sovereignty mandates that require that users from a specific region be served only by endpoints in that region.</span></span>

### <a name="what-are-the-regions-that-are-supported-by-traffic-manager-for-geographic-routing"></a><span data-ttu-id="6521a-179">Quais são as regiões com suporte do Gerenciador de Tráfego para roteamento geográfico?</span><span class="sxs-lookup"><span data-stu-id="6521a-179">What are the regions that are supported by Traffic Manager for geographic routing?</span></span> 
<span data-ttu-id="6521a-180">A hierarquia de país/região usada pelo Gerenciador de Tráfego pode ser encontrada [aqui](traffic-manager-geographic-regions.md).</span><span class="sxs-lookup"><span data-stu-id="6521a-180">The country/region hierarchy that is used by Traffic Manager can be found [here](traffic-manager-geographic-regions.md).</span></span> <span data-ttu-id="6521a-181">Embora essa página esteja sempre atualizada com todas as alterações, você também pode recuperar, de modo programático, as mesmas informações usando a [API REST do Gerenciador de Tráfego do Azure](https://docs.microsoft.com/rest/api/trafficmanager/).</span><span class="sxs-lookup"><span data-stu-id="6521a-181">While this page is kept up-to-date with any changes, you can also programmatically retrieve the same information by using the [Azure Traffic Manager REST API](https://docs.microsoft.com/rest/api/trafficmanager/).</span></span> 

### <a name="how-does-traffic-manager-determine-where-a-user-is-querying-from"></a><span data-ttu-id="6521a-182">Como o Gerenciador de Tráfego determina de que região um usuário está fazendo uma consulta?</span><span class="sxs-lookup"><span data-stu-id="6521a-182">How does traffic manager determine where a user is querying from?</span></span> 
<span data-ttu-id="6521a-183">O Gerenciador de Tráfego analisa o IP de origem da consulta (provavelmente é um resolvedor DNS local fazendo a consulta em nome do usuário) e usa um IP interno do mapa da região para determinar o local.</span><span class="sxs-lookup"><span data-stu-id="6521a-183">Traffic Manager looks at the source IP of the query (this most likely is a local DNS resolver doing the querying on behalf of the user) and uses an internal IP to region map to determine the location.</span></span> <span data-ttu-id="6521a-184">Esse mapa é atualizado continuamente para levar em conta as alterações na Internet.</span><span class="sxs-lookup"><span data-stu-id="6521a-184">This map is updated on an ongoing basis to account for changes in the internet.</span></span> 

### <a name="is-it-guaranteed-that-traffic-manager-can-correctly-determine-the-exact-geographic-location-of-the-user-in-every-case"></a><span data-ttu-id="6521a-185">Há garantia de que o Gerenciador de Tráfego possa determinar o local geográfico exato do usuário em todos os casos corretamente?</span><span class="sxs-lookup"><span data-stu-id="6521a-185">Is it guaranteed that Traffic Manager can correctly determine the exact geographic location of the user in every case?</span></span>
<span data-ttu-id="6521a-186">Não, o Gerenciador de Tráfego não pode assegurar que a região geográfica que podemos deduzir do endereço IP de origem de uma consulta DNS sempre corresponderá ao local do usuário, pelos seguintes motivos:</span><span class="sxs-lookup"><span data-stu-id="6521a-186">No, Traffic Manager cannot guarantee that the geographic region we infer from the source IP address of a DNS query will always correspond to the user’s location due to the following reasons:</span></span> 

- <span data-ttu-id="6521a-187">Primeiro, conforme descrito nas perguntas frequentes anteriores, o endereço IP de origem que vemos é aquele de um resolvedor DNS fazendo a pesquisa em nome do usuário.</span><span class="sxs-lookup"><span data-stu-id="6521a-187">First, as described in the previous FAQ, the source IP address we see is that of a DNS resolver doing the lookup on behalf of the user.</span></span> <span data-ttu-id="6521a-188">Embora a localização geográfica do resolvedor DNS seja um bom proxy para a localização geográfica do usuário, ela também pode ser diferente dependendo da superfície de serviço de resolvedor DNS e do serviço de resolvedor DNS específico que um cliente tiver optado por usar.</span><span class="sxs-lookup"><span data-stu-id="6521a-188">While the geographic location of the DNS resolver is a good proxy for the geographic location of the user, it can also be different depending upon the footprint of the DNS resolver service and the specific DNS resolver service a customer has chosen to use.</span></span> <span data-ttu-id="6521a-189">Por exemplo, um cliente localizado na Malásia poderia especificar no uso de configurações do seu dispositivo um serviço de resolução DNS cujo servidor DNS em Cingapura pode selecionado para tratar as resoluções de consulta desse usuário/dispositivo.</span><span class="sxs-lookup"><span data-stu-id="6521a-189">As an example, a customer located in Malaysia could specify in their device’s settings use a DNS resolver service whose DNS server in Singapore might get picked to handle the query resolutions for that user/device.</span></span> <span data-ttu-id="6521a-190">Nesse caso, o Gerenciador de Tráfego pode ver somente o endereço IP do resolvedor que corresponde à localização de Cingapura.</span><span class="sxs-lookup"><span data-stu-id="6521a-190">In that case, Traffic Manager can only see the resolver’s IP address that corresponds to the Singapore location.</span></span> <span data-ttu-id="6521a-191">Além disso, consulte as Perguntas Frequentes anteriores sobre o suporte de endereço de sub-rede do cliente nesta página.</span><span class="sxs-lookup"><span data-stu-id="6521a-191">Also, see the earlier FAQ regarding client subnet address support on this page.</span></span>

- <span data-ttu-id="6521a-192">Em segundo lugar, o Gerenciador de Tráfego usa um mapa interno para fazer a conversão do endereço IP para a região geográfica.</span><span class="sxs-lookup"><span data-stu-id="6521a-192">Second, Traffic Manager uses an internal map to do the IP address to geographic region translation.</span></span> <span data-ttu-id="6521a-193">Embora esse mapa seja validado e atualizado regularmente para aumentar a precisão e leve em conta a natureza evolutiva da Internet, ainda há a possibilidade de que nossas informações não sejam uma representação exata da localização geográfica de todos os endereços IP.</span><span class="sxs-lookup"><span data-stu-id="6521a-193">While this map is validated and updated on an ongoing basis to increase its accuracy and account for the evolving nature of the internet, there is still the possibility that our information is not an exact representation of the geographic location of all the IP addresses.</span></span>


###  <a name="does-an-endpoint-need-to-be-physically-located-in-the-same-region-as-the-one-it-is-configured-with-for-geographic-routing"></a><span data-ttu-id="6521a-194">Um ponto de extremidade precisa estar fisicamente localizado na mesma região com a qual ele foi configurado para roteamento geográfico?</span><span class="sxs-lookup"><span data-stu-id="6521a-194">Does an endpoint need to be physically located in the same region as the one it is configured with for geographic routing?</span></span> 
<span data-ttu-id="6521a-195">Não, o local do ponto de extremidade não impõe restrições sobre quais regiões podem ser mapeadas para ele.</span><span class="sxs-lookup"><span data-stu-id="6521a-195">No, the location of the endpoint imposes no restrictions on which regions can be mapped to it.</span></span> <span data-ttu-id="6521a-196">Por exemplo, um ponto de extremidade na região Central dos EUA do Azure pode ter todos os usuários da Índia direcionados para ele.</span><span class="sxs-lookup"><span data-stu-id="6521a-196">For example, an endpoint in US-Central Azure region can have all users from India directed to it.</span></span>

### <a name="can-i-assign-geographic-regions-to-endpoints-in-a-profile-that-is-not-configured-to-do-geographic-routing"></a><span data-ttu-id="6521a-197">Posso atribuir regiões geográficas aos pontos de extremidade em um perfil que não esteja configurado para fazer roteamento geográfico?</span><span class="sxs-lookup"><span data-stu-id="6521a-197">Can I assign geographic regions to endpoints in a profile that is not configured to do geographic routing?</span></span> 

<span data-ttu-id="6521a-198">Sim, se o método de roteamento de um perfil não for geográfico, você poderá usar a [API REST do Gerenciador de Tráfego do Azure](https://docs.microsoft.com/rest/api/trafficmanager/) para atribuir regiões geográficas aos pontos de extremidade nesse perfil.</span><span class="sxs-lookup"><span data-stu-id="6521a-198">Yes, if the routing method of a profile is not geographic, you can use the [Azure Traffic Manager REST API](https://docs.microsoft.com/rest/api/trafficmanager/) to assign geographic regions to endpoints in that profile.</span></span> <span data-ttu-id="6521a-199">No caso de perfis de tipo de roteamento não geográfico, essa configuração será ignorada.</span><span class="sxs-lookup"><span data-stu-id="6521a-199">In the case of non-geographic routing type profiles, this configuration is ignored.</span></span> <span data-ttu-id="6521a-200">Se você alterar esse perfil para tipo de roteamento geográfico em um momento posterior, o Gerenciador de Tráfego usará esses mapeamentos.</span><span class="sxs-lookup"><span data-stu-id="6521a-200">If you change such a profile to geographic routing type at a later time, Traffic Manager can use those mappings.</span></span>


### <a name="why-am-i-getting-an-error-when-i-try-to-change-the-routing-method-of-an-existing-profile-to-geographic"></a><span data-ttu-id="6521a-201">Por que está ocorrendo um erro ao tentar alterar o método de roteamento de um perfil existente para Geográfico?</span><span class="sxs-lookup"><span data-stu-id="6521a-201">Why am I getting an error when I try to change the routing method of an existing profile to Geographic?</span></span>

<span data-ttu-id="6521a-202">Todos os pontos de extremidade em um perfil com roteamento geográfico precisam ter pelo menos uma região mapeada para eles.</span><span class="sxs-lookup"><span data-stu-id="6521a-202">All the endpoints under a profile with geographic routing need to have at least one region mapped to it.</span></span> <span data-ttu-id="6521a-203">Para converter um perfil existente em tipo de roteamento geográfico, primeiramente, você precisa associar regiões geográficas a todos os respectivos pontos de extremidade usando a [API REST do Gerenciador de Tráfego do Azure](https://docs.microsoft.com/rest/api/trafficmanager/) antes de alterar o tipo de roteamento para geográfico.</span><span class="sxs-lookup"><span data-stu-id="6521a-203">To convert an existing profile to geographic routing type, you first need to associate geographic regions to all its endpoints using the [Azure Traffic Manager REST API](https://docs.microsoft.com/rest/api/trafficmanager/) before changing the routing type to geographic.</span></span> <span data-ttu-id="6521a-204">Se for usar o portal, primeiramente exclua os pontos de extremidade, altere o método de roteamento do perfil para geográfico e, por fim, adicione os pontos de extremidade com o respectivo mapeamento da região geográfica.</span><span class="sxs-lookup"><span data-stu-id="6521a-204">If using portal, first delete the endpoints, change the routing method of the profile to geographic and then add the endpoints along with their geographic region mapping.</span></span> 


###  <a name="why-is-it-strongly-recommended-that-customers-create-nested-profiles-instead-of-endpoints-under-a-profile-with-geographic-routing-enabled"></a><span data-ttu-id="6521a-205">Por que é enfaticamente aconselhável que os clientes criem perfis aninhados em vez de pontos de extremidade em um perfil com o roteamento geográfico habilitado?</span><span class="sxs-lookup"><span data-stu-id="6521a-205">Why is it strongly recommended that customers create nested profiles instead of endpoints under a profile with geographic routing enabled?</span></span> 

<span data-ttu-id="6521a-206">Uma região poderá ser atribuída apenas a um ponto de extremidade em um perfil se ela estiver usando tipo de roteamento geográfico.</span><span class="sxs-lookup"><span data-stu-id="6521a-206">A region can be assigned to only one endpoint within a profile if its using geographic routing type.</span></span> <span data-ttu-id="6521a-207">Se esse ponto de extremidade não for um tipo aninhado com um perfil filho conectado a ele, caso esse ponto de extremidade se torne não íntegro, o Gerenciador de Tráfego continuará enviando tráfego a ele, pois a alternativa de não enviar tráfego não é a opção melhor.</span><span class="sxs-lookup"><span data-stu-id="6521a-207">If that endpoint is not a nested type with a child profile attached to it, if that endpoint going unhealthy, Traffic Manager continues to send traffic to it since the alternative of not sending any traffic isn’t any better.</span></span> <span data-ttu-id="6521a-208">O Gerenciador de Tráfego não faz failover para outro ponto de extremidade, mesmo quando a região atribuída for um "pai" da região atribuída ao ponto de extremidade que se tornou não íntegro (por exemplo, se um ponto de extremidade que tenha a região Espanha se tornar não íntegro, não faremos failover para outro ponto de extremidade que tenha a região Europa atribuída a ele).</span><span class="sxs-lookup"><span data-stu-id="6521a-208">Traffic Manager does not failover to another endpoint, even when the region assigned is a “parent” of the region assigned to the endpoint that went unhealthy (for example, if an endpoint that has region Spain goes unhealthy, we will not failover to another endpoint that has the region Europe assigned to it).</span></span> <span data-ttu-id="6521a-209">Isso é para garantir que o Gerenciador de Tráfego respeite os limites geográficos que um cliente configurou em seu perfil.</span><span class="sxs-lookup"><span data-stu-id="6521a-209">This is done to ensure that Traffic Manager respects the geographic boundaries that a customer has setup in their profile.</span></span> <span data-ttu-id="6521a-210">Para obter o benefício de fazer failover para outro ponto de extremidade quando um se torna não íntegro, é aconselhável que as regiões geográficas sejam atribuídas a perfis aninhados com vários pontos de extremidade neles, em vez de pontos de extremidade individuais.</span><span class="sxs-lookup"><span data-stu-id="6521a-210">To get the benefit of failing over to another endpoint when an endpoint goes unhealthy, it is recommended that geographic regions be assigned to nested profiles with multiple endpoints within it instead of individual endpoints.</span></span> <span data-ttu-id="6521a-211">Dessa forma, se um ponto de extremidade no perfil filho aninhado falhar, o tráfego pode fazer failover para outro ponto de extremidade no mesmo perfil filho aninhado.</span><span class="sxs-lookup"><span data-stu-id="6521a-211">In this way, if an endpoint in the nested child profile fails, traffic can failover to another endpoint inside the same nested child profile.</span></span>

### <a name="are-there-any-restrictions-on-the-api-version-that-supports-this-routing-type"></a><span data-ttu-id="6521a-212">Existem restrições quanto à versão de API que oferece suporte a esse tipo de roteamento?</span><span class="sxs-lookup"><span data-stu-id="6521a-212">Are there any restrictions on the API version that supports this routing type?</span></span>

<span data-ttu-id="6521a-213">Sim, somente a versão 2017-03-01 da API e as mais recentes dão suporte ao tipo de roteamento Geográfico.</span><span class="sxs-lookup"><span data-stu-id="6521a-213">Yes, only API version 2017-03-01 and newer supports the Geographic routing type.</span></span> <span data-ttu-id="6521a-214">Qualquer versão de API mais antiga não pode ser usada para criar perfis de tipo de roteamento Geográfico ou atribuir regiões geográficas aos pontos de extremidade.</span><span class="sxs-lookup"><span data-stu-id="6521a-214">Any older API versions cannot be used to created profiles of Geographic routing type or assign geographic regions to endpoints.</span></span> <span data-ttu-id="6521a-215">Se uma versão de API mais antiga for usada para recuperar perfis de uma assinatura do Azure, nenhum perfil de tipo de roteamento Geográfico será retornado.</span><span class="sxs-lookup"><span data-stu-id="6521a-215">If an older API version is used to retrieve profiles from an Azure subscription, any profile of Geographic routing type is not returned.</span></span> <span data-ttu-id="6521a-216">Além disso, ao usar versões de API mais antigas, todos os perfis retornados que tiverem pontos de extremidade com uma atribuição de região geográfica não terão essa atribuição exibida.</span><span class="sxs-lookup"><span data-stu-id="6521a-216">In addition, when using older API versions, any profile returned that has endpoints with a geographic region assignment, does not have its geographic region assignment shown.</span></span>



## <a name="traffic-manager-endpoints"></a><span data-ttu-id="6521a-217">Pontos de extremidade do Gerenciador de Tráfego</span><span class="sxs-lookup"><span data-stu-id="6521a-217">Traffic Manager endpoints</span></span>

### <a name="can-i-use-traffic-manager-with-endpoints-from-multiple-subscriptions"></a><span data-ttu-id="6521a-218">Posso usar o Gerenciador de Tráfego com pontos de extremidade de várias assinaturas?</span><span class="sxs-lookup"><span data-stu-id="6521a-218">Can I use Traffic Manager with endpoints from multiple subscriptions?</span></span>

<span data-ttu-id="6521a-219">Não é possível usar pontos de extremidade de várias assinaturas com Aplicativos Web do Azure.</span><span class="sxs-lookup"><span data-stu-id="6521a-219">Using endpoints from multiple subscriptions is not possible with Azure Web Apps.</span></span> <span data-ttu-id="6521a-220">Os Aplicativos Web do Azure exigem que qualquer nome de domínio personalizado usado com Aplicativos Web seja usado somente em uma única assinatura.</span><span class="sxs-lookup"><span data-stu-id="6521a-220">Azure Web Apps requires that any custom domain name used with Web Apps is only used within a single subscription.</span></span> <span data-ttu-id="6521a-221">Não é possível usar Aplicativos Web de várias assinaturas com o mesmo nome de domínio.</span><span class="sxs-lookup"><span data-stu-id="6521a-221">It is not possible to use Web Apps from multiple subscriptions with the same domain name.</span></span>

<span data-ttu-id="6521a-222">Para outros tipos de ponto de extremidade, é possível usar o Gerenciador de Tráfego com pontos de extremidade de mais de uma assinatura.</span><span class="sxs-lookup"><span data-stu-id="6521a-222">For other endpoint types, it is possible to use Traffic Manager with endpoints from more than one subscription.</span></span> <span data-ttu-id="6521a-223">No Gerenciador de Recursos, os pontos de extremidade de qualquer assinatura podem ser adicionados ao Gerenciador de Tráfego, desde que a pessoa que configura o perfil do Gerenciador de Tráfego tenha o acesso de leitura ao ponto de extremidade.</span><span class="sxs-lookup"><span data-stu-id="6521a-223">In Resource Manager, endpoints from any subscription can be added to Traffic Manager, as long as the person configuring the Traffic Manager profile has read access to the endpoint.</span></span> <span data-ttu-id="6521a-224">Essas permissões podem ser concedidas usando o [RBAC (controle de acesso baseado em função) do Azure Resource Manager](../active-directory/role-based-access-control-configure.md).</span><span class="sxs-lookup"><span data-stu-id="6521a-224">These permissions can be granted using [Azure Resource Manager role-based access control (RBAC)](../active-directory/role-based-access-control-configure.md).</span></span>


### <a name="can-i-use-traffic-manager-with-cloud-service-staging-slots"></a><span data-ttu-id="6521a-225">Posso usar o Gerenciador de Tráfego com os slots de “Preparo” do Serviço de Nuvem?</span><span class="sxs-lookup"><span data-stu-id="6521a-225">Can I use Traffic Manager with Cloud Service 'Staging' slots?</span></span>

<span data-ttu-id="6521a-226">Sim.</span><span class="sxs-lookup"><span data-stu-id="6521a-226">Yes.</span></span> <span data-ttu-id="6521a-227">Os slots de “preparo” do Serviço de Nuvem podem ser configurados no Gerenciador de Tráfego como pontos de extremidade Externos.</span><span class="sxs-lookup"><span data-stu-id="6521a-227">Cloud Service 'staging' slots can be configured in Traffic Manager as External endpoints.</span></span> <span data-ttu-id="6521a-228">Verificações de integridade ainda são cobradas à taxa de Pontos de Extremidade do Azure.</span><span class="sxs-lookup"><span data-stu-id="6521a-228">Health checks are still be charged at the Azure Endpoints rate.</span></span> <span data-ttu-id="6521a-229">Como o tipo do ponto de extremidade externo está em uso, as alterações no serviço subjacente não serão selecionadas automaticamente.</span><span class="sxs-lookup"><span data-stu-id="6521a-229">Because the External endpoint type is in use, changes to the underlying service are not picked up automatically.</span></span> <span data-ttu-id="6521a-230">Com pontos de extremidade externos, o Gerenciador de Tráfego não consegue detectar quando o Serviço de Nuvem é parado ou excluído.</span><span class="sxs-lookup"><span data-stu-id="6521a-230">With external endpoints, Traffic Manager cannot detect when the Cloud Service is stopped or deleted.</span></span> <span data-ttu-id="6521a-231">Portanto, o Gerenciador de Tráfego continua cobrando por verificações de integridade até que o ponto de extremidade seja desabilitado ou excluído.</span><span class="sxs-lookup"><span data-stu-id="6521a-231">Therefore, the Traffic Manager continues billing for health checks until the endpoint is disabled or deleted.</span></span>

### <a name="does-traffic-manager-support-ipv6-endpoints"></a><span data-ttu-id="6521a-232">O Gerenciador de Tráfego dá suporte aos pontos de extremidade IPv6?</span><span class="sxs-lookup"><span data-stu-id="6521a-232">Does Traffic Manager support IPv6 endpoints?</span></span>

<span data-ttu-id="6521a-233">No momento, o Gerenciador de Tráfego não oferece servidores de nome endereçáveis por IPv6.</span><span class="sxs-lookup"><span data-stu-id="6521a-233">Traffic Manager does not currently provide IPv6-addressible name servers.</span></span> <span data-ttu-id="6521a-234">No entanto, o Gerenciador de Tráfego ainda pode ser usado por clientes IPv6 que se conectem a pontos de extremidade IPv6.</span><span class="sxs-lookup"><span data-stu-id="6521a-234">However, Traffic Manager can still be used by IPv6 clients connecting to IPv6 endpoints.</span></span> <span data-ttu-id="6521a-235">Um cliente não faz solicitações DNS diretamente ao Gerenciador de tráfego.</span><span class="sxs-lookup"><span data-stu-id="6521a-235">A client does not make DNS requests directly to Traffic Manager.</span></span> <span data-ttu-id="6521a-236">Em vez disso, o cliente usa um serviço DNS recursivo.</span><span class="sxs-lookup"><span data-stu-id="6521a-236">Instead, the client uses a recursive DNS service.</span></span> <span data-ttu-id="6521a-237">Um cliente somente IPv6 envia solicitações para o serviço DNS recursivo via IPv6.</span><span class="sxs-lookup"><span data-stu-id="6521a-237">An IPv6-only client sends requests to the recursive DNS service via IPv6.</span></span> <span data-ttu-id="6521a-238">Então o serviço recursivo deve conseguir contatar os servidores de nome do Gerenciador de Tráfego usando IPv4.</span><span class="sxs-lookup"><span data-stu-id="6521a-238">Then the recursive service should be able to contact the Traffic Manager name servers using IPv4.</span></span>

<span data-ttu-id="6521a-239">O Gerenciador de Tráfego responde com o nome DNS do ponto de extremidade.</span><span class="sxs-lookup"><span data-stu-id="6521a-239">Traffic Manager responds with the DNS name of the endpoint.</span></span> <span data-ttu-id="6521a-240">Para dar suporte a um ponto de extremidade IPv6, deve haver um registro DNS AAAA apontando o nome DNS do ponto de extremidade para o endereço IPv6.</span><span class="sxs-lookup"><span data-stu-id="6521a-240">To support an IPv6 endpoint, a DNS AAAA record pointing the endpoint DNS name to the IPv6 address must exist.</span></span> <span data-ttu-id="6521a-241">Verificações de integridade do Gerenciador de Tráfego dão suporte apenas a endereços IPv4.</span><span class="sxs-lookup"><span data-stu-id="6521a-241">Traffic Manager health checks only support IPv4 addresses.</span></span> <span data-ttu-id="6521a-242">O serviço deve expor um ponto de extremidade IPv4 no mesmo nome DNS.</span><span class="sxs-lookup"><span data-stu-id="6521a-242">The service needs to expose an IPv4 endpoint on the same DNS name.</span></span>

### <a name="can-i-use-traffic-manager-with-more-than-one-web-app-in-the-same-region"></a><span data-ttu-id="6521a-243">Posso usar o Gerenciador de Tráfego com mais de um Aplicativo Web na mesma região?</span><span class="sxs-lookup"><span data-stu-id="6521a-243">Can I use Traffic Manager with more than one Web App in the same region?</span></span>

<span data-ttu-id="6521a-244">Normalmente, o Gerenciador de Tráfego é usado para direcionar o tráfego para os aplicativos implantados em regiões diferentes.</span><span class="sxs-lookup"><span data-stu-id="6521a-244">Typically, Traffic Manager is used to direct traffic to applications deployed in different regions.</span></span> <span data-ttu-id="6521a-245">No entanto, ele também pode ser usado onde um aplicativo tem mais de uma implantação na mesma região.</span><span class="sxs-lookup"><span data-stu-id="6521a-245">However, it can also be used where an application has more than one deployment in the same region.</span></span> <span data-ttu-id="6521a-246">Os pontos de extremidade do Gerenciador de Tráfego do Azure não permitem adicionar mais de um ponto de extremidade do Aplicativo Web da mesma região do Azure ao mesmo perfil do Gerenciador de Tráfego.</span><span class="sxs-lookup"><span data-stu-id="6521a-246">The Traffic Manager Azure endpoints do not permit more than one Web App endpoint from the same Azure region to be added to the same Traffic Manager profile.</span></span>

##  <a name="traffic-manager-endpoint-monitoring"></a><span data-ttu-id="6521a-247">Monitoramento de ponto de extremidade do Gerenciador de Tráfego</span><span class="sxs-lookup"><span data-stu-id="6521a-247">Traffic Manager endpoint monitoring</span></span>

### <a name="is-traffic-manager-resilient-to-azure-region-failures"></a><span data-ttu-id="6521a-248">O Gerenciador de Tráfego é resistente a falhas de região do Azure?</span><span class="sxs-lookup"><span data-stu-id="6521a-248">Is Traffic Manager resilient to Azure region failures?</span></span>

<span data-ttu-id="6521a-249">O Gerenciador de Tráfego é um componente fundamental da entrega de aplicativos altamente disponíveis no Azure.</span><span class="sxs-lookup"><span data-stu-id="6521a-249">Traffic Manager is a key component of the delivery of highly available applications in Azure.</span></span>
<span data-ttu-id="6521a-250">Para entregar alta disponibilidade, o Gerenciador de Tráfego deve ter um nível muito alto de disponibilidade e ser resiliente a falhas de região.</span><span class="sxs-lookup"><span data-stu-id="6521a-250">To deliver high availability, Traffic Manager must have an exceptionally high level of availability and be resilient to regional failure.</span></span>

<span data-ttu-id="6521a-251">Por design, os componentes do Gerenciador de Tráfego são resilientes a uma falha completa de qualquer região do Azure.</span><span class="sxs-lookup"><span data-stu-id="6521a-251">By design, Traffic Manager components are resilient to a complete failure of any Azure region.</span></span> <span data-ttu-id="6521a-252">Essa resiliência se aplica a todos os componentes do Gerenciador de Tráfego: os servidores de nome DNS, a API, a camada de armazenamento e o serviço de monitoramento de ponto de extremidade.</span><span class="sxs-lookup"><span data-stu-id="6521a-252">This resilience applies to all Traffic Manager components: the DNS name servers, the API, the storage layer, and the endpoint monitoring service.</span></span>

<span data-ttu-id="6521a-253">No caso improvável de uma falha de uma região do Azure inteira, Gerenciador de Tráfego deve continuar a funcionar normalmente.</span><span class="sxs-lookup"><span data-stu-id="6521a-253">In the unlikely event of an outage of an entire Azure region, Traffic Manager is expected to continue to function normally.</span></span> <span data-ttu-id="6521a-254">Os aplicativos implantados em várias regiões do Azure podem contar com o Gerenciador de Tráfego para direcionar o tráfego para uma instância disponível de seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="6521a-254">Applications deployed in multiple Azure regions can rely on Traffic Manager to direct traffic to an available instance of their application.</span></span>

### <a name="how-does-the-choice-of-resource-group-location-affect-traffic-manager"></a><span data-ttu-id="6521a-255">Como a escolha da localização do grupo de recursos afeta o Gerenciador de Tráfego?</span><span class="sxs-lookup"><span data-stu-id="6521a-255">How does the choice of resource group location affect Traffic Manager?</span></span>

<span data-ttu-id="6521a-256">O Gerenciador de Tráfego é um serviço global único.</span><span class="sxs-lookup"><span data-stu-id="6521a-256">Traffic Manager is a single, global service.</span></span> <span data-ttu-id="6521a-257">Não é regional.</span><span class="sxs-lookup"><span data-stu-id="6521a-257">It is not regional.</span></span> <span data-ttu-id="6521a-258">A escolha do local do grupo de recursos não faz diferença para perfis do Gerenciador de Tráfego implantados nesse grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="6521a-258">The choice of resource group location makes no difference to Traffic Manager profiles deployed in that resource group.</span></span>

<span data-ttu-id="6521a-259">O Azure Resource Manager exige que todos os grupos de recursos especifiquem uma localização, que determina a localização padrão para os recursos implantados nesse grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="6521a-259">Azure Resource Manager requires all resource groups to specify a location, which determines the default location for resources deployed in that resource group.</span></span> <span data-ttu-id="6521a-260">Quando você cria um perfil do Gerenciador de Tráfego, ele é criado em um grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="6521a-260">When you create a Traffic Manager profile, it is created in a resource group.</span></span> <span data-ttu-id="6521a-261">Todos os perfis do Gerenciador de Tráfego usam **global** como a localização, substituindo o padrão do grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="6521a-261">All Traffic Manager profiles use **global** as their location, overriding the resource group default.</span></span>

### <a name="how-do-i-determine-the-current-health-of-each-endpoint"></a><span data-ttu-id="6521a-262">Como determinar a integridade atual de cada ponto de extremidade?</span><span class="sxs-lookup"><span data-stu-id="6521a-262">How do I determine the current health of each endpoint?</span></span>

<span data-ttu-id="6521a-263">O status de monitoramento atual de cada ponto de extremidade, bem como o perfil geral, é exibido no portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="6521a-263">The current monitoring status of each endpoint, in addition to the overall profile, is displayed in the Azure portal.</span></span> <span data-ttu-id="6521a-264">Essas informações também estão disponíveis por meio da [API REST](https://msdn.microsoft.com/library/azure/mt163667.aspx) do Traffic Monitor, dos [cmdlets do PowerShell](https://msdn.microsoft.com/library/mt125941.aspx) e da [CLI do Azure entre plataformas](../cli-install-nodejs.md).</span><span class="sxs-lookup"><span data-stu-id="6521a-264">This information also is available via the Traffic Monitor [REST API](https://msdn.microsoft.com/library/azure/mt163667.aspx), [PowerShell cmdlets](https://msdn.microsoft.com/library/mt125941.aspx), and [cross-platform Azure CLI](../cli-install-nodejs.md).</span></span>

<span data-ttu-id="6521a-265">O Azure não fornece informações históricas sobre dados passados referentes à integridade do ponto de extremidade ou à capacidade de emitir alertas sobre alterações na integridade do ponto de extremidade.</span><span class="sxs-lookup"><span data-stu-id="6521a-265">Azure does not provide historical information about past endpoint health or the ability to raise alerts about changes to endpoint health.</span></span>

### <a name="can-i-monitor-https-endpoints"></a><span data-ttu-id="6521a-266">Posso monitorar os pontos de extremidade HTTPS?</span><span class="sxs-lookup"><span data-stu-id="6521a-266">Can I monitor HTTPS endpoints?</span></span>

<span data-ttu-id="6521a-267">Sim.</span><span class="sxs-lookup"><span data-stu-id="6521a-267">Yes.</span></span> <span data-ttu-id="6521a-268">O Gerenciador de Tráfego oferece suporte à investigação por HTTPS.</span><span class="sxs-lookup"><span data-stu-id="6521a-268">Traffic Manager supports probing over HTTPS.</span></span> <span data-ttu-id="6521a-269">Configure **HTTPS** como o protocolo na configuração de monitoramento.</span><span class="sxs-lookup"><span data-stu-id="6521a-269">Configure **HTTPS** as the protocol in the monitoring configuration.</span></span>

<span data-ttu-id="6521a-270">O Gerenciador de Tráfego não pode fornecer nenhuma validação de certificado, incluindo:</span><span class="sxs-lookup"><span data-stu-id="6521a-270">Traffic manager cannot provide any certificate validation, including:</span></span>

* <span data-ttu-id="6521a-271">Certificados no lado do servidor não estão validados</span><span class="sxs-lookup"><span data-stu-id="6521a-271">Server-side certificates are not validated</span></span>
* <span data-ttu-id="6521a-272">Certificados no lado do servidor SNI não estão validados</span><span class="sxs-lookup"><span data-stu-id="6521a-272">SNI server-side certificates are not supported</span></span>
* <span data-ttu-id="6521a-273">Não há suporte para certificados de cliente</span><span class="sxs-lookup"><span data-stu-id="6521a-273">Client certificates are not supported</span></span>

### <a name="can-i-use-traffic-manager-even-if-my-application-does-not-have-support-for-http-or-https"></a><span data-ttu-id="6521a-274">Posso usar o Gerenciador de Tráfego mesmo se o aplicativo não tiver suporte para HTTP ou HTTPS?</span><span class="sxs-lookup"><span data-stu-id="6521a-274">Can I use Traffic Manager even if my application does not have support for HTTP or HTTPS?</span></span>

<span data-ttu-id="6521a-275">Sim.</span><span class="sxs-lookup"><span data-stu-id="6521a-275">Yes.</span></span> <span data-ttu-id="6521a-276">É possível especificar o TCP como protocolo de monitoramento e o Gerenciador de Tráfego pode iniciar uma conexão TCP e aguardar uma resposta do ponto de extremidade.</span><span class="sxs-lookup"><span data-stu-id="6521a-276">You can specify TCP as the monitoring protocol and Traffic Manager can initiate a TCP connection and wait for a response from the endpoint.</span></span> <span data-ttu-id="6521a-277">Se o ponto de extremidade responder à solicitação de conexão com uma resposta para estabelecer a conexão, dentro do período de tempo limite, esse ponto de extremidade será marcado como íntegro.</span><span class="sxs-lookup"><span data-stu-id="6521a-277">If the endpoint replies to the connection request with a response to establish the connection, within the timeout period, then that endpoint is marked as healthy.</span></span>

### <a name="what-specific-responses-are-required-from-the-endpoint-when-using-tcp-monitoring"></a><span data-ttu-id="6521a-278">Quais respostas específicas são necessárias do ponto de extremidade ao usar o monitoramento de TCP?</span><span class="sxs-lookup"><span data-stu-id="6521a-278">What specific responses are required from the endpoint when using TCP monitoring?</span></span>

<span data-ttu-id="6521a-279">Quando o monitoramento de TCP é usado, o Gerenciador de Tráfego inicia um handshake TCP de três vias enviando uma solicitação SYN ao ponto de extremidade na porta especificada.</span><span class="sxs-lookup"><span data-stu-id="6521a-279">When TCP monitoring is used, Traffic Manager starts a three-way TCP handshake by sending a SYN request to endpoint at the specified port.</span></span> <span data-ttu-id="6521a-280">Em seguida, ele aguarda um período de tempo (como especificado nas configurações de tempo limite) por uma resposta do ponto de extremidade.</span><span class="sxs-lookup"><span data-stu-id="6521a-280">It then waits for a period of time (as specified in the timeout settings) for a response from the endpoint.</span></span> <span data-ttu-id="6521a-281">Se o ponto de extremidade responde à solicitação de SYN com uma resposta de SYN-ACK dentro do período de tempo limite especificado nas configurações de monitoramento, então esse ponto de extremidade será considerado íntegro.</span><span class="sxs-lookup"><span data-stu-id="6521a-281">If the endpoint responds to the SYN request with a SYN-ACK response within the timeout period specified in the monitoring settings, then that endpoint is considered healthy.</span></span> <span data-ttu-id="6521a-282">Se a resposta de SYN-ACK for recebida, o Gerenciador de Tráfego redefinirá a conexão ao responder novamente com um RST.</span><span class="sxs-lookup"><span data-stu-id="6521a-282">If the SYN-ACK response is received, the Traffic Manager resets the connection by responding back with a RST.</span></span>

### <a name="how-fast-does-traffic-manager-move-my-users-away-from-an-unhealthy-endpoint"></a><span data-ttu-id="6521a-283">Com qual velocidade o Gerenciador de Tráfego move meus usuários para fora de um ponto de extremidade não íntegro?</span><span class="sxs-lookup"><span data-stu-id="6521a-283">How fast does Traffic Manager move my users away from an unhealthy endpoint?</span></span>

<span data-ttu-id="6521a-284">O Gerenciador de Tráfego fornece várias configurações que podem ajudar a controlar o comportamento de failover do seu perfil do Gerenciador de Tráfego da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="6521a-284">Traffic Manager provides multiple settings that can help you to control the failover behavior of your Traffic Manager profile as follows:</span></span>
- <span data-ttu-id="6521a-285">você pode especificar que o Gerenciador de Tráfego investigue os pontos de extremidade com mais frequência ao configurando o intervalo de investigação em 10 segundos.</span><span class="sxs-lookup"><span data-stu-id="6521a-285">you can specify that the Traffic Manager probes the endpoints more frequently by setting the Probing Interval at 10 seconds.</span></span> <span data-ttu-id="6521a-286">Isso garante que qualquer ponto de extremidade que esteja ficando não íntegro possa ser detectado assim que possível.</span><span class="sxs-lookup"><span data-stu-id="6521a-286">This ensures that any endpoint going unhealthy can be detected as soon as possible.</span></span> 
- <span data-ttu-id="6521a-287">você pode especificar quanto tempo deve aguardar antes que uma solicitação de verificação de integridade atinja o tempo limite (valor de tempo limite mínimo é 5s).</span><span class="sxs-lookup"><span data-stu-id="6521a-287">you can specify how long to wait before a health check request times out (minimum time out value is 5 sec).</span></span>
- <span data-ttu-id="6521a-288">você pode especificar quantas falhas podem ocorrer antes de o ponto de extremidade ser marcado como não íntegro.</span><span class="sxs-lookup"><span data-stu-id="6521a-288">you can specify how many failures can occur before the endpoint is marked as unhealthy.</span></span> <span data-ttu-id="6521a-289">Esse valor pode ser baixo como 0. Nesse caso, o ponto de extremidade será marcado como não íntegro assim que a primeira verificação de integridade falhar.</span><span class="sxs-lookup"><span data-stu-id="6521a-289">This value can be low as 0, in which case the endpoint is marked unhealthy as soon as it fails the first health check.</span></span> <span data-ttu-id="6521a-290">No entanto, usar o valor mínimo de 0 para o número tolerado de falhas pode levar a pontos de extremidade que estão sendo retirados da rotação devido a problemas transitórios que podem ocorrer na hora da investigação.</span><span class="sxs-lookup"><span data-stu-id="6521a-290">However, using the minimum value of 0 for the tolerated number of failures can lead to endpoints being taken out of rotation due to any transient issues that may occur at the time of probing.</span></span>
- <span data-ttu-id="6521a-291">você pode especificar o tempo de vida (TTL) para a resposta DNS tão baixo quanto 0.</span><span class="sxs-lookup"><span data-stu-id="6521a-291">you can specify the time-to-live (TTL) for the DNS response to be as low as 0.</span></span> <span data-ttu-id="6521a-292">Essa ação significa que os resolvedores DNS não podem armazenar a resposta em cache e cada nova consulta obtém uma resposta que incorpora as informações de integridade mais atualizadas que o Gerenciador de Tráfego tem.</span><span class="sxs-lookup"><span data-stu-id="6521a-292">Doing so means that DNS resolvers cannot cache the response and each new query gets a response that incorporates the most up-to-date health information that the Traffic Manager has.</span></span>

<span data-ttu-id="6521a-293">Ao usar essas configurações, o Gerenciador de Tráfego pode fornecer failovers de até 10 segundos depois que um ponto de extremidade ficar não íntegro e uma consulta DNS for feita com base no perfil correspondente.</span><span class="sxs-lookup"><span data-stu-id="6521a-293">By using these settings, Traffic Manager can provide failovers under 10 seconds after an endpoint goes unhealthy and a DNS query is made against the corresponding profile.</span></span>

### <a name="how-can-i-specify-different-monitoring-settings-for-different-endpoints-in-a-profile"></a><span data-ttu-id="6521a-294">Como especificar diferentes configurações de monitoramento para diferentes pontos de extremidade em um perfil?</span><span class="sxs-lookup"><span data-stu-id="6521a-294">How can I specify different monitoring settings for different endpoints in a profile?</span></span>

<span data-ttu-id="6521a-295">As configurações de monitoramento do Gerenciador de Tráfego estão em um nível por perfil.</span><span class="sxs-lookup"><span data-stu-id="6521a-295">Traffic Manager monitoring settings are at a per profile level.</span></span> <span data-ttu-id="6521a-296">Se você precisar usar uma configuração de monitoramento diferente para somente um ponto de extremidade, isso será possível ao ter esse ponto de extremidade como um [perfil aninhado](traffic-manager-nested-profiles.md), cujas configurações de monitoramento são diferentes do perfil pai.</span><span class="sxs-lookup"><span data-stu-id="6521a-296">If you need to use a different monitoring setting for only one endpoint, it can be done by having that endpoint as a [nested profile](traffic-manager-nested-profiles.md) whose monitoring settings are different from the parent profile.</span></span>

### <a name="what-host-header-do-endpoint-health-checks-use"></a><span data-ttu-id="6521a-297">Qual cabeçalho host as verificações de integridade do ponto de extremidade usam?</span><span class="sxs-lookup"><span data-stu-id="6521a-297">What host header do endpoint health checks use?</span></span>

<span data-ttu-id="6521a-298">O Gerenciador de Tráfego usa cabeçalhos de host em verificações de integridade HTTP e HTTPS.</span><span class="sxs-lookup"><span data-stu-id="6521a-298">Traffic Manager uses host headers in HTTP and HTTPS health checks.</span></span> <span data-ttu-id="6521a-299">O cabeçalho de host usado pelo Gerenciador de Tráfego é o nome do ponto de extremidade de destino configurado no perfil.</span><span class="sxs-lookup"><span data-stu-id="6521a-299">The host header used by Traffic Manager is the name of the endpoint target configured in the profile.</span></span> <span data-ttu-id="6521a-300">O valor usado no cabeçalho do host não pode ser especificado separadamente da propriedade “target”.</span><span class="sxs-lookup"><span data-stu-id="6521a-300">The value used in the host header cannot be specified separately from the target property.</span></span>

### <a name="what-are-the-ip-addresses-from-which-the-health-checks-originate"></a><span data-ttu-id="6521a-301">Quais são os endereços IP dos quais as verificações de integridade se originam?</span><span class="sxs-lookup"><span data-stu-id="6521a-301">What are the IP addresses from which the health checks originate?</span></span>

<span data-ttu-id="6521a-302">A lista a seguir contém os endereços IP dos quais as verificações de integridade do Gerenciador de Tráfego podem se originar.</span><span class="sxs-lookup"><span data-stu-id="6521a-302">The following list contains the IP addresses from which Traffic Manager health checks can originate.</span></span> <span data-ttu-id="6521a-303">Você pode usar esta lista para garantir que as conexões de entrada desses endereços IP sejam permitidas nos pontos de extremidades para verificar o status de integridade.</span><span class="sxs-lookup"><span data-stu-id="6521a-303">You may use this list to ensure that incoming connections from these IP addresses are allowed at the endpoints to check its health status.</span></span>

* <span data-ttu-id="6521a-304">40.68.30.66</span><span class="sxs-lookup"><span data-stu-id="6521a-304">40.68.30.66</span></span>
* <span data-ttu-id="6521a-305">40.68.31.178</span><span class="sxs-lookup"><span data-stu-id="6521a-305">40.68.31.178</span></span>
* <span data-ttu-id="6521a-306">137.135.80.149</span><span class="sxs-lookup"><span data-stu-id="6521a-306">137.135.80.149</span></span>
* <span data-ttu-id="6521a-307">137.135.82.249</span><span class="sxs-lookup"><span data-stu-id="6521a-307">137.135.82.249</span></span>
* <span data-ttu-id="6521a-308">23.96.236.252</span><span class="sxs-lookup"><span data-stu-id="6521a-308">23.96.236.252</span></span>
* <span data-ttu-id="6521a-309">65.52.217.19</span><span class="sxs-lookup"><span data-stu-id="6521a-309">65.52.217.19</span></span>
* <span data-ttu-id="6521a-310">40.87.147.10</span><span class="sxs-lookup"><span data-stu-id="6521a-310">40.87.147.10</span></span>
* <span data-ttu-id="6521a-311">40.87.151.34</span><span class="sxs-lookup"><span data-stu-id="6521a-311">40.87.151.34</span></span>
* <span data-ttu-id="6521a-312">13.75.124.254</span><span class="sxs-lookup"><span data-stu-id="6521a-312">13.75.124.254</span></span>
* <span data-ttu-id="6521a-313">13.75.127.63</span><span class="sxs-lookup"><span data-stu-id="6521a-313">13.75.127.63</span></span>
* <span data-ttu-id="6521a-314">52.172.155.168</span><span class="sxs-lookup"><span data-stu-id="6521a-314">52.172.155.168</span></span>
* <span data-ttu-id="6521a-315">52.172.158.37</span><span class="sxs-lookup"><span data-stu-id="6521a-315">52.172.158.37</span></span>
* <span data-ttu-id="6521a-316">104.215.91.84</span><span class="sxs-lookup"><span data-stu-id="6521a-316">104.215.91.84</span></span>
* <span data-ttu-id="6521a-317">13.75.153.124</span><span class="sxs-lookup"><span data-stu-id="6521a-317">13.75.153.124</span></span>
* <span data-ttu-id="6521a-318">13.84.222.37</span><span class="sxs-lookup"><span data-stu-id="6521a-318">13.84.222.37</span></span>
* <span data-ttu-id="6521a-319">23.101.191.199</span><span class="sxs-lookup"><span data-stu-id="6521a-319">23.101.191.199</span></span>
* <span data-ttu-id="6521a-320">23.96.213.12</span><span class="sxs-lookup"><span data-stu-id="6521a-320">23.96.213.12</span></span>
* <span data-ttu-id="6521a-321">137.135.46.163</span><span class="sxs-lookup"><span data-stu-id="6521a-321">137.135.46.163</span></span>
* <span data-ttu-id="6521a-322">137.135.47.215</span><span class="sxs-lookup"><span data-stu-id="6521a-322">137.135.47.215</span></span>
* <span data-ttu-id="6521a-323">191.232.208.52</span><span class="sxs-lookup"><span data-stu-id="6521a-323">191.232.208.52</span></span>
* <span data-ttu-id="6521a-324">191.232.214.62</span><span class="sxs-lookup"><span data-stu-id="6521a-324">191.232.214.62</span></span>
* <span data-ttu-id="6521a-325">13.75.152.253</span><span class="sxs-lookup"><span data-stu-id="6521a-325">13.75.152.253</span></span>
* <span data-ttu-id="6521a-326">104.41.187.209</span><span class="sxs-lookup"><span data-stu-id="6521a-326">104.41.187.209</span></span>
* <span data-ttu-id="6521a-327">104.41.190.203</span><span class="sxs-lookup"><span data-stu-id="6521a-327">104.41.190.203</span></span>

### <a name="how-many-health-checks-to-my-endpoint-can-i-expect-from-traffic-manager"></a><span data-ttu-id="6521a-328">Quantas verificações de integridade no meu ponto de extremidade posso esperar do Gerenciador de Tráfego?</span><span class="sxs-lookup"><span data-stu-id="6521a-328">How many health checks to my endpoint can I expect from Traffic Manager?</span></span>

<span data-ttu-id="6521a-329">O número de verificações de integridade do Gerenciador de Tráfego que atingem seu ponto de extremidade depende do seguinte:</span><span class="sxs-lookup"><span data-stu-id="6521a-329">The number of Traffic Manager health checks reaching your endpoint depends on the following:</span></span>
- <span data-ttu-id="6521a-330">o valor que você definiu para o intervalo de monitoramento (intervalo menor significa que mais solicitações chegaram no ponto de extremidade em um determinado período de tempo).</span><span class="sxs-lookup"><span data-stu-id="6521a-330">the value that you have set for the monitoring interval (smaller interval means more requests landing on your endpoint in any given time period).</span></span>
- <span data-ttu-id="6521a-331">o número de locais dos quais as verificações de integridade se originam (os endereços IP dos quais você pode esperar essas verificações estão listados nas perguntas frequentes anteriores).</span><span class="sxs-lookup"><span data-stu-id="6521a-331">the number of locations from where the health checks originate (the IP addresses from where you can expect these checks is listed in the preceding FAQ).</span></span>

## <a name="traffic-manager-nested-profiles"></a><span data-ttu-id="6521a-332">Perfis aninhados do Gerenciador de Tráfego</span><span class="sxs-lookup"><span data-stu-id="6521a-332">Traffic Manager nested profiles</span></span>

### <a name="how-do-i-configure-nested-profiles"></a><span data-ttu-id="6521a-333">Como posso configurar perfis aninhados?</span><span class="sxs-lookup"><span data-stu-id="6521a-333">How do I configure nested profiles?</span></span>

<span data-ttu-id="6521a-334">Os perfis aninhados do Gerenciador de Tráfego podem ser configurados usando o Azure Resource Manager e as APIs REST clássicas do Azure, cmdlets do Azure PowerShell e comandos da CLI do Azure de plataforma cruzada.</span><span class="sxs-lookup"><span data-stu-id="6521a-334">Nested Traffic Manager profiles can be configured using both the Azure Resource Manager and the classic Azure REST APIs, Azure PowerShell cmdlets and cross-platform Azure CLI commands.</span></span> <span data-ttu-id="6521a-335">Também há suporte para eles no novo portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="6521a-335">They are also supported via the new Azure portal.</span></span> <span data-ttu-id="6521a-336">Não há suporte para eles no portal clássico.</span><span class="sxs-lookup"><span data-stu-id="6521a-336">They are not supported in the classic portal.</span></span>

### <a name="how-many-layers-of-nesting-does-traffic-manger-support"></a><span data-ttu-id="6521a-337">A quantas camadas de aninhamento o Gerenciador de Tráfego dá suporte?</span><span class="sxs-lookup"><span data-stu-id="6521a-337">How many layers of nesting does Traffic Manger support?</span></span>

<span data-ttu-id="6521a-338">Você pode aninhar perfis em até 10 níveis de profundidade.</span><span class="sxs-lookup"><span data-stu-id="6521a-338">You can nest profiles up to 10 levels deep.</span></span> <span data-ttu-id="6521a-339">“Loops” não são permitidos.</span><span class="sxs-lookup"><span data-stu-id="6521a-339">'Loops' are not permitted.</span></span>

### <a name="can-i-mix-other-endpoint-types-with-nested-child-profiles-in-the-same-traffic-manager-profile"></a><span data-ttu-id="6521a-340">Posso combinar outros tipos de ponto de extremidade com perfis filho aninhados no mesmo perfil do Gerenciador de Tráfego?</span><span class="sxs-lookup"><span data-stu-id="6521a-340">Can I mix other endpoint types with nested child profiles, in the same Traffic Manager profile?</span></span>

<span data-ttu-id="6521a-341">Sim.</span><span class="sxs-lookup"><span data-stu-id="6521a-341">Yes.</span></span> <span data-ttu-id="6521a-342">Não há nenhuma restrição sobre como combinar os pontos de extremidade de diferentes tipos em um perfil.</span><span class="sxs-lookup"><span data-stu-id="6521a-342">There are no restrictions on how you combine endpoints of different types within a profile.</span></span>

### <a name="how-does-the-billing-model-apply-for-nested-profiles"></a><span data-ttu-id="6521a-343">Como o modelo de cobrança se aplica a perfis aninhados?</span><span class="sxs-lookup"><span data-stu-id="6521a-343">How does the billing model apply for Nested profiles?</span></span>

<span data-ttu-id="6521a-344">Há não impacto negativo sobre os preços ao usar perfis aninhados.</span><span class="sxs-lookup"><span data-stu-id="6521a-344">There is no negative pricing impact of using nested profiles.</span></span>

<span data-ttu-id="6521a-345">A cobrança do Gerenciador de Tráfego tem dois componentes: verificações de integridade do ponto de extremidade e milhões de consultas DNS</span><span class="sxs-lookup"><span data-stu-id="6521a-345">Traffic Manager billing has two components: endpoint health checks and millions of DNS queries</span></span>

* <span data-ttu-id="6521a-346">Verificações de integridade de ponto de extremidade: não há nenhum encargo para um perfil filho quando configurado como um ponto de extremidade em um perfil pai.</span><span class="sxs-lookup"><span data-stu-id="6521a-346">Endpoint health checks: There is no charge for a child profile when configured as an endpoint in a parent profile.</span></span> <span data-ttu-id="6521a-347">O monitoramento dos pontos de extremidade no perfil filho é cobrado como de costume.</span><span class="sxs-lookup"><span data-stu-id="6521a-347">Monitoring of the endpoints in the child profile is billed in the usual way.</span></span>
* <span data-ttu-id="6521a-348">Consultas DNS: cada consulta é contada apenas uma vez.</span><span class="sxs-lookup"><span data-stu-id="6521a-348">DNS queries: Each query is only counted once.</span></span> <span data-ttu-id="6521a-349">Uma consulta em um perfil pai que retorna um ponto de extremidade de um perfil filho é contada apenas no perfil pai.</span><span class="sxs-lookup"><span data-stu-id="6521a-349">A query against a parent profile that returns an endpoint from a child profile is counted against the parent profile only.</span></span>

<span data-ttu-id="6521a-350">Para obter detalhes completos, consulte a [página de preços do Gerenciador de Tráfego](https://azure.microsoft.com/pricing/details/traffic-manager/).</span><span class="sxs-lookup"><span data-stu-id="6521a-350">For full details, see the [Traffic Manager pricing page](https://azure.microsoft.com/pricing/details/traffic-manager/).</span></span>

### <a name="is-there-a-performance-impact-for-nested-profiles"></a><span data-ttu-id="6521a-351">Há impacto no desempenho para perfis aninhados?</span><span class="sxs-lookup"><span data-stu-id="6521a-351">Is there a performance impact for nested profiles?</span></span>

<span data-ttu-id="6521a-352">Nº</span><span class="sxs-lookup"><span data-stu-id="6521a-352">No.</span></span> <span data-ttu-id="6521a-353">Não há nenhum impacto no desempenho ao usar perfis aninhados.</span><span class="sxs-lookup"><span data-stu-id="6521a-353">There is no performance impact incurred when using nested profiles.</span></span>

<span data-ttu-id="6521a-354">Os servidores de nomes do Gerenciador de Tráfego atravessam a hierarquia de perfil internamente durante o processamento de cada consulta DNS.</span><span class="sxs-lookup"><span data-stu-id="6521a-354">The Traffic Manager name servers traverse the profile hierarchy internally when processing each DNS query.</span></span> <span data-ttu-id="6521a-355">Uma consulta DNS a um perfil pai pode receber uma resposta DNS com um ponto de extremidade de um perfil filho.</span><span class="sxs-lookup"><span data-stu-id="6521a-355">A DNS query to a parent profile can receive a DNS response with an endpoint from a child profile.</span></span> <span data-ttu-id="6521a-356">Um único registro CNAME é usado se você está usando um único perfil ou perfis aninhados.</span><span class="sxs-lookup"><span data-stu-id="6521a-356">A single CNAME record is used whether you are using a single profile or nested profiles.</span></span> <span data-ttu-id="6521a-357">Não é necessário criar um registro CNAME para cada perfil na hierarquia.</span><span class="sxs-lookup"><span data-stu-id="6521a-357">There is no need to create a CNAME record for each profile in the hierarchy.</span></span>

### <a name="how-does-traffic-manager-compute-the-health-of-a-nested-endpoint-in-a-parent-profile"></a><span data-ttu-id="6521a-358">Como o Gerenciador de Tráfego calcula a integridade de um ponto de extremidade aninhado em um perfil pai?</span><span class="sxs-lookup"><span data-stu-id="6521a-358">How does Traffic Manager compute the health of a nested endpoint in a parent profile?</span></span>

<span data-ttu-id="6521a-359">O perfil pai não executa verificações de integridade no filho diretamente.</span><span class="sxs-lookup"><span data-stu-id="6521a-359">The parent profile doesn't perform health checks on the child directly.</span></span> <span data-ttu-id="6521a-360">Em vez disso, a integridade dos pontos de extremidade do perfil filho é usada para calcular a integridade geral do perfil filho.</span><span class="sxs-lookup"><span data-stu-id="6521a-360">Instead, the health of the child profile's endpoints are used to calculate the overall health of the child profile.</span></span> <span data-ttu-id="6521a-361">Essas informações são propagadas até a hierarquia do perfil aninhado para determinar a integridade do ponto de extremidade aninhado.</span><span class="sxs-lookup"><span data-stu-id="6521a-361">This information is propagated up the nested profile hierarchy to determine the health of the nested endpoint.</span></span> <span data-ttu-id="6521a-362">O perfil pai usa essa integridade agregada para determinar se o tráfego pode ser direcionado para o filho.</span><span class="sxs-lookup"><span data-stu-id="6521a-362">The parent profile uses this aggregated health to determine whether the traffic can be directed to the child.</span></span>

<span data-ttu-id="6521a-363">A tabela a seguir descreve o comportamento das verificações de integridade do Gerenciador de Tráfego de um ponto de extremidade aninhado.</span><span class="sxs-lookup"><span data-stu-id="6521a-363">The following table describes the behavior of Traffic Manager health checks for a nested endpoint.</span></span>

| <span data-ttu-id="6521a-364">Status do Monitor de perfil filho</span><span class="sxs-lookup"><span data-stu-id="6521a-364">Child Profile Monitor status</span></span> | <span data-ttu-id="6521a-365">Status do monitor de ponto de extremidade pai</span><span class="sxs-lookup"><span data-stu-id="6521a-365">Parent Endpoint Monitor status</span></span> | <span data-ttu-id="6521a-366">Observações</span><span class="sxs-lookup"><span data-stu-id="6521a-366">Notes</span></span> |
| --- | --- | --- |
| <span data-ttu-id="6521a-367">Desabilitado.</span><span class="sxs-lookup"><span data-stu-id="6521a-367">Disabled.</span></span> <span data-ttu-id="6521a-368">O perfil filho foi desabilitado.</span><span class="sxs-lookup"><span data-stu-id="6521a-368">The child profile has been disabled.</span></span> |<span data-ttu-id="6521a-369">Parada</span><span class="sxs-lookup"><span data-stu-id="6521a-369">Stopped</span></span> |<span data-ttu-id="6521a-370">O estado do ponto de extremidade pai é Parado, não Desabilitado.</span><span class="sxs-lookup"><span data-stu-id="6521a-370">The parent endpoint state is Stopped, not Disabled.</span></span> <span data-ttu-id="6521a-371">O estado Desabilitado é reservado para indicar que você desabilitou o ponto de extremidade no perfil pai.</span><span class="sxs-lookup"><span data-stu-id="6521a-371">The Disabled state is reserved for indicating that you have disabled the endpoint in the parent profile.</span></span> |
| <span data-ttu-id="6521a-372">Degradado.</span><span class="sxs-lookup"><span data-stu-id="6521a-372">Degraded.</span></span> <span data-ttu-id="6521a-373">Pelo menos um ponto de extremidade do perfil filho está no estado Degradado.</span><span class="sxs-lookup"><span data-stu-id="6521a-373">At least one child profile endpoint is in a Degraded state.</span></span> |<span data-ttu-id="6521a-374">Online: o número de pontos de extremidade Online no perfil filho é pelo menos o valor de MinChildEndpoints.</span><span class="sxs-lookup"><span data-stu-id="6521a-374">Online: the number of Online endpoints in the child profile is at least the value of MinChildEndpoints.</span></span><BR><span data-ttu-id="6521a-375">CheckingEndpoint: o número de pontos de extremidade Online mais CheckingEndpoint no perfil filho é pelo menos o valor de MinChildEndpoints.</span><span class="sxs-lookup"><span data-stu-id="6521a-375">CheckingEndpoint: the number of Online plus CheckingEndpoint endpoints in the child profile is at least the value of MinChildEndpoints.</span></span><BR><span data-ttu-id="6521a-376">Degradado: caso contrário.</span><span class="sxs-lookup"><span data-stu-id="6521a-376">Degraded: otherwise.</span></span> |<span data-ttu-id="6521a-377">O tráfego é roteado para um ponto de extremidade do status CheckingEndpoint.</span><span class="sxs-lookup"><span data-stu-id="6521a-377">Traffic is routed to an endpoint of status CheckingEndpoint.</span></span> <span data-ttu-id="6521a-378">Se MinChildEndpoints estiver definido com um valor muito alto, o ponto de extremidade estará sempre degradado.</span><span class="sxs-lookup"><span data-stu-id="6521a-378">If MinChildEndpoints is set too high, the endpoint is always degraded.</span></span> |
| <span data-ttu-id="6521a-379">Online.</span><span class="sxs-lookup"><span data-stu-id="6521a-379">Online.</span></span> <span data-ttu-id="6521a-380">Pelo menos, um ponto de extremidade do perfil filho está em um estado Online.</span><span class="sxs-lookup"><span data-stu-id="6521a-380">At least one child profile endpoint is an Online state.</span></span> <span data-ttu-id="6521a-381">Nenhum ponto de extremidade está no estado Degradado.</span><span class="sxs-lookup"><span data-stu-id="6521a-381">No endpoint is in the Degraded state.</span></span> |<span data-ttu-id="6521a-382">Veja acima.</span><span class="sxs-lookup"><span data-stu-id="6521a-382">See above.</span></span> | |
| <span data-ttu-id="6521a-383">CheckingEndpoints.</span><span class="sxs-lookup"><span data-stu-id="6521a-383">CheckingEndpoints.</span></span> <span data-ttu-id="6521a-384">Pelo menos, um ponto de extremidade do perfil filho é um 'CheckingEndpoint'.</span><span class="sxs-lookup"><span data-stu-id="6521a-384">At least one child profile endpoint is 'CheckingEndpoint'.</span></span> <span data-ttu-id="6521a-385">Nenhum ponto de extremidade está ‘Online’ ou ‘Degradado’</span><span class="sxs-lookup"><span data-stu-id="6521a-385">No endpoints are 'Online' or 'Degraded'</span></span> |<span data-ttu-id="6521a-386">Mesmo que acima.</span><span class="sxs-lookup"><span data-stu-id="6521a-386">Same as above.</span></span> | |
| <span data-ttu-id="6521a-387">Inativo.</span><span class="sxs-lookup"><span data-stu-id="6521a-387">Inactive.</span></span> <span data-ttu-id="6521a-388">Todos os pontos de extremidade de perfil filho estão com status Desabilitado ou Parado ou esse é um perfil que não tem nenhum ponto de extremidade.</span><span class="sxs-lookup"><span data-stu-id="6521a-388">All child profile endpoints are either Disabled or Stopped, or this profile has no endpoints.</span></span> |<span data-ttu-id="6521a-389">Parada</span><span class="sxs-lookup"><span data-stu-id="6521a-389">Stopped</span></span> | |

## <a name="next-steps"></a><span data-ttu-id="6521a-390">Próximas etapas:</span><span class="sxs-lookup"><span data-stu-id="6521a-390">Next steps:</span></span>
- <span data-ttu-id="6521a-391">Saiba mais sobre o [failover automático e monitoramento do ponto de extremidade](../traffic-manager/traffic-manager-monitoring.md)do Gerenciador de Tráfego.</span><span class="sxs-lookup"><span data-stu-id="6521a-391">Learn more about Traffic Manager [endpoint monitoring and automatic failover](../traffic-manager/traffic-manager-monitoring.md).</span></span>
- <span data-ttu-id="6521a-392">Saiba mais sobre os [métodos de roteamento de tráfego](../traffic-manager/traffic-manager-routing-methods.md)do Gerenciador de Tráfego.</span><span class="sxs-lookup"><span data-stu-id="6521a-392">Learn more about Traffic Manager [traffic routing methods](../traffic-manager/traffic-manager-routing-methods.md).</span></span>