---
title: monitoramento do ponto de extremidade do Traffic Manager aaaAzure | Microsoft Docs
description: "Este artigo pode ajudá-lo a entender como o Traffic Manager usa o monitoramento de ponto de extremidade e toohelp de failover automático do ponto de extremidade do Azure clientes implantam aplicativos de alta disponibilidade"
services: traffic-manager
documentationcenter: 
author: kumudd
manager: timlt
editor: 
ms.assetid: fff25ac3-d13a-4af9-8916-7c72e3d64bc7
ms.service: traffic-manager
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 06/22/2017
ms.author: kumud
ms.openlocfilehash: b4862499c88bdb1951833d06199b034a07ac7576
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="traffic-manager-endpoint-monitoring"></a><span data-ttu-id="91cb8-103">Monitoramento de ponto de extremidade do Gerenciador de Tráfego</span><span class="sxs-lookup"><span data-stu-id="91cb8-103">Traffic Manager endpoint monitoring</span></span>

<span data-ttu-id="91cb8-104">O Gerenciador de Tráfego do Azure inclui monitoramento de ponto de extremidade interno e failover automático de ponto de extremidade.</span><span class="sxs-lookup"><span data-stu-id="91cb8-104">Azure Traffic Manager includes built-in endpoint monitoring and automatic endpoint failover.</span></span> <span data-ttu-id="91cb8-105">Esse recurso ajuda a fornecer aplicativos de alta disponibilidade que são falha tooendpoint resiliente, inclusive falhas de região do Azure.</span><span class="sxs-lookup"><span data-stu-id="91cb8-105">This feature helps you deliver high-availability applications that are resilient tooendpoint failure, including Azure region failures.</span></span>

## <a name="configure-endpoint-monitoring"></a><span data-ttu-id="91cb8-106">Configurar o monitoramento de pontos de extremidade</span><span class="sxs-lookup"><span data-stu-id="91cb8-106">Configure endpoint monitoring</span></span>

<span data-ttu-id="91cb8-107">monitoramento de ponto de extremidade tooconfigure, você deve especificar Olá configurações a seguir em seu perfil do Gerenciador de tráfego:</span><span class="sxs-lookup"><span data-stu-id="91cb8-107">tooconfigure endpoint monitoring, you must specify hello following settings on your Traffic Manager profile:</span></span>

* <span data-ttu-id="91cb8-108">**Protocolo**.</span><span class="sxs-lookup"><span data-stu-id="91cb8-108">**Protocol**.</span></span> <span data-ttu-id="91cb8-109">Escolha HTTP, HTTPS ou TCP como protocolo de saudação do Traffic Manager usa quando probing toocheck seu ponto de extremidade sua integridade.</span><span class="sxs-lookup"><span data-stu-id="91cb8-109">Choose HTTP, HTTPS, or TCP as hello protocol that Traffic Manager uses when probing your endpoint toocheck its health.</span></span> <span data-ttu-id="91cb8-110">O monitoramento HTTPS não verifica se o certificado SSL é válido - ele verifica apenas esse Olá certificado está presente.</span><span class="sxs-lookup"><span data-stu-id="91cb8-110">HTTPS monitoring does not verify whether your SSL certificate is valid--it only checks that hello certificate is present.</span></span>
* <span data-ttu-id="91cb8-111">**Porta**.</span><span class="sxs-lookup"><span data-stu-id="91cb8-111">**Port**.</span></span> <span data-ttu-id="91cb8-112">Escolha Olá porta usada para a solicitação de saudação.</span><span class="sxs-lookup"><span data-stu-id="91cb8-112">Choose hello port used for hello request.</span></span>
* <span data-ttu-id="91cb8-113">**Caminho**.</span><span class="sxs-lookup"><span data-stu-id="91cb8-113">**Path**.</span></span> <span data-ttu-id="91cb8-114">Esta configuração é válida somente para Olá protocolos HTTP e HTTPS, para o qual configuração de caminho de saudação especificando é necessária.</span><span class="sxs-lookup"><span data-stu-id="91cb8-114">This configuration setting is valid only for hello HTTP and HTTPS protocols, for which specifying hello path setting is required.</span></span> <span data-ttu-id="91cb8-115">Fornecendo essa configuração para Olá TCP monitoramento protocolo resulta em erro.</span><span class="sxs-lookup"><span data-stu-id="91cb8-115">Providing this setting for hello TCP monitoring protocol results in an error.</span></span> <span data-ttu-id="91cb8-116">Para o protocolo TCP, forneça caminho relativo da saudação e nome de saudação do Olá página da Web ou arquivo hello que Olá acessos de monitoramento.</span><span class="sxs-lookup"><span data-stu-id="91cb8-116">For TCP protocol, give hello relative path and hello name of hello webpage or hello file that hello monitoring accesses.</span></span> <span data-ttu-id="91cb8-117">Uma barra invertida (/) é uma entrada válida para o caminho relativo da saudação.</span><span class="sxs-lookup"><span data-stu-id="91cb8-117">A forward slash (/) is a valid entry for hello relative path.</span></span> <span data-ttu-id="91cb8-118">Esse valor indica que se o arquivo hello está no diretório raiz de saudação (padrão).</span><span class="sxs-lookup"><span data-stu-id="91cb8-118">This value implies that hello file is in hello root directory (default).</span></span>
* <span data-ttu-id="91cb8-119">**Intervalo de investigação**.</span><span class="sxs-lookup"><span data-stu-id="91cb8-119">**Probing Interval**.</span></span> <span data-ttu-id="91cb8-120">Esse valor especifica a frequência com que a integridade de um ponto de extremidade é verificada usando um agente de investigação do Gerenciador de Tráfego.</span><span class="sxs-lookup"><span data-stu-id="91cb8-120">This value specifies how often an endpoint is checked for its health from a Traffic Manager probing agent.</span></span> <span data-ttu-id="91cb8-121">Você pode especificar dois valores aqui: 30 segundos (investigação normal) e 10 segundos (investigação rápida).</span><span class="sxs-lookup"><span data-stu-id="91cb8-121">You can specify two values here: 30 seconds (normal probing) and 10 seconds (fast probing).</span></span> <span data-ttu-id="91cb8-122">Se nenhum valor for fornecido, o perfil de saudação define tooa valor de padrão de 30 segundos.</span><span class="sxs-lookup"><span data-stu-id="91cb8-122">If no values are provided, hello profile sets tooa default value of 30 seconds.</span></span> <span data-ttu-id="91cb8-123">Visite Olá [preços do Gerenciador de tráfego](https://azure.microsoft.com/pricing/details/traffic-manager) página toolearn mais sobre preços de probing rápida.</span><span class="sxs-lookup"><span data-stu-id="91cb8-123">Visit hello [Traffic Manager Pricing](https://azure.microsoft.com/pricing/details/traffic-manager) page toolearn more about fast probing pricing.</span></span>
* <span data-ttu-id="91cb8-124">**Número de falhas tolerado**.</span><span class="sxs-lookup"><span data-stu-id="91cb8-124">**Tolerated Number of Failures**.</span></span> <span data-ttu-id="91cb8-125">Esse valor especifica quantas falhas um agente de investigação do Gerenciador de Tráfego tolera antes de marcar o ponto de extremidade como não íntegro.</span><span class="sxs-lookup"><span data-stu-id="91cb8-125">This value specifies how many failures a Traffic Manager probing agent tolerates before marking that endpoint as unhealthy.</span></span> <span data-ttu-id="91cb8-126">Seu valor pode variar entre 0 e 9.</span><span class="sxs-lookup"><span data-stu-id="91cb8-126">Its value can range between 0 and 9.</span></span> <span data-ttu-id="91cb8-127">Um valor 0 significa que uma única falha de monitoramento pode causar esse toobe de ponto de extremidade marcado como não íntegro.</span><span class="sxs-lookup"><span data-stu-id="91cb8-127">A value of 0 means a single monitoring failure can cause that endpoint toobe marked as unhealthy.</span></span> <span data-ttu-id="91cb8-128">Se nenhum valor for especificado, ele usa o valor padrão de saudação de 3.</span><span class="sxs-lookup"><span data-stu-id="91cb8-128">If no value is specified, it uses hello default value of 3.</span></span>
* <span data-ttu-id="91cb8-129">**Tempo limite de monitoramento**.</span><span class="sxs-lookup"><span data-stu-id="91cb8-129">**Monitoring Timeout**.</span></span> <span data-ttu-id="91cb8-130">Essa propriedade especifica a quantidade de saudação de saudação do tempo do Traffic Manager agent probing deve aguardar antes de considerar que verificam a uma falha quando um teste de verificação de integridade é enviado toohello de ponto de extremidade.</span><span class="sxs-lookup"><span data-stu-id="91cb8-130">This property specifies hello amount of time hello Traffic Manager probing agent should wait before considering that check a failure when a health check probe is sent toohello endpoint.</span></span> <span data-ttu-id="91cb8-131">Se Olá que intervalo de sondagem é definido too30 segundos, em seguida, você pode definir o valor de tempo limite de saudação entre 5 e 10 segundos.</span><span class="sxs-lookup"><span data-stu-id="91cb8-131">If hello Probing Interval is set too30 seconds, then you can set hello Timeout value between 5 and 10 seconds.</span></span> <span data-ttu-id="91cb8-132">Se nenhum valor for especificado, ele usará um valor padrão de 10 segundos.</span><span class="sxs-lookup"><span data-stu-id="91cb8-132">If no value is specified, it uses a default value of 10 seconds.</span></span> <span data-ttu-id="91cb8-133">Se Olá que intervalo de sondagem é definido too10 segundos, em seguida, você pode definir o valor de tempo limite de saudação entre 5 e 9 segundos.</span><span class="sxs-lookup"><span data-stu-id="91cb8-133">If hello Probing Interval is set too10 seconds, then you can set hello Timeout value between 5 and 9 seconds.</span></span> <span data-ttu-id="91cb8-134">Se nenhum valor de Tempo Limite for especificado, ele usará um valor padrão de 9 segundos.</span><span class="sxs-lookup"><span data-stu-id="91cb8-134">If no Timeout value is specified, it uses a default value of 9 seconds.</span></span>

![Monitoramento de ponto de extremidade do Gerenciador de Tráfego](./media/traffic-manager-monitoring/endpoint-monitoring-settings.png)

<span data-ttu-id="91cb8-136">**Figura 1: Monitoramento de ponto de extremidade do Gerenciador de Tráfego**</span><span class="sxs-lookup"><span data-stu-id="91cb8-136">**Figure 1:  Traffic Manager endpoint monitoring**</span></span>

## <a name="how-endpoint-monitoring-works"></a><span data-ttu-id="91cb8-137">Como o monitoramento de ponto de extremidade funciona</span><span class="sxs-lookup"><span data-stu-id="91cb8-137">How endpoint monitoring works</span></span>

<span data-ttu-id="91cb8-138">Se Olá monitoramento protocolo é definido como HTTP ou HTTPS, agente probing do hello Traffic Manager faz um GET solicitação toohello ponto de extremidade usando o protocolo de saudação, porta e caminho relativo fornecido.</span><span class="sxs-lookup"><span data-stu-id="91cb8-138">If hello monitoring protocol is set as HTTP or HTTPS, hello Traffic Manager probing agent makes a GET request toohello endpoint using hello protocol, port, and relative path given.</span></span> <span data-ttu-id="91cb8-139">Se ele obtiver de volta uma resposta 200-OK, esse ponto de extremidade será considerado íntegro.</span><span class="sxs-lookup"><span data-stu-id="91cb8-139">If it gets back a 200-OK response, then that endpoint is considered healthy.</span></span> <span data-ttu-id="91cb8-140">Se a resposta de saudação é um valor diferente, ou se nenhuma resposta for recebida dentro do período de tempo limite de saudação especificado, hello sondando o agente do Traffic Manager tentará novamente configuração tolerado, número de falhas de toohello (não tentará novamente terminar se essa configuração for 0) de acordo com .</span><span class="sxs-lookup"><span data-stu-id="91cb8-140">If hello response is a different value, or, if no response is received within hello timeout period specified, then hello Traffic Manager probing agent re-attempts according toohello Tolerated Number of Failures setting (no re-attempts are done if this setting is 0).</span></span> <span data-ttu-id="91cb8-141">Se várias falhas consecutivas Olá for maior do que a configuração de tolerado, número de falhas de saudação, esse ponto de extremidade está marcado como não íntegro.</span><span class="sxs-lookup"><span data-stu-id="91cb8-141">If hello number of consecutive failures is higher than hello Tolerated Number of Failures setting, then that endpoint is marked as unhealthy.</span></span> 

<span data-ttu-id="91cb8-142">Se Olá monitoramento protocolo for TCP, o agente de probing de Gerenciador de tráfego de Olá inicia uma solicitação de conexão TCP usando a porta de saudação especificada.</span><span class="sxs-lookup"><span data-stu-id="91cb8-142">If hello monitoring protocol is TCP, hello Traffic Manager probing agent initiates a TCP connection request using hello port specified.</span></span> <span data-ttu-id="91cb8-143">Se o ponto de extremidade Olá responde solicitação toohello com uma conexão de saudação do resposta tooestablish, que a verificação de integridade está marcada como um êxito e agente probing do Gerenciador de tráfego Olá redefine a conexão de TCP hello.</span><span class="sxs-lookup"><span data-stu-id="91cb8-143">If hello endpoint responds toohello request with a response tooestablish hello connection, that health check is marked as a success and hello Traffic Manager probing agent resets hello TCP connection.</span></span> <span data-ttu-id="91cb8-144">Se a resposta de saudação é um valor diferente, ou se nenhuma resposta for recebida dentro de período de tempo limite de saudação especificado, Olá sondando o agente do Traffic Manager tentará novamente a configuração de tolerado, número de falhas de toohello (nenhum novamente são feitas tentativas de se essa configuração for 0) de acordo com.</span><span class="sxs-lookup"><span data-stu-id="91cb8-144">If hello response is a different value, or if no response is received within hello timeout period specified, hello Traffic Manager probing agent re-attempts according toohello Tolerated Number of Failures setting (no re-attempts are made if this setting is 0).</span></span> <span data-ttu-id="91cb8-145">Se várias falhas consecutivas Olá for maior do que a configuração de tolerado, número de falhas de saudação, esse ponto de extremidade é marcado não íntegro.</span><span class="sxs-lookup"><span data-stu-id="91cb8-145">If hello number of consecutive failures is higher than hello Tolerated Number of Failures setting, then that endpoint is marked unhealthy.</span></span>

<span data-ttu-id="91cb8-146">Em todos os casos, o Traffic Manager sondas de vários locais e determinação de falhas consecutivas Olá acontece dentro de cada região.</span><span class="sxs-lookup"><span data-stu-id="91cb8-146">In all cases, Traffic Manager probes from multiple locations and hello consecutive failure determination happens within each region.</span></span> <span data-ttu-id="91cb8-147">Isso também significa que os pontos de extremidade estão recebendo investigações de integridade do Gerenciador de tráfego com uma frequência superior configuração Olá usada para o intervalo de sondagem.</span><span class="sxs-lookup"><span data-stu-id="91cb8-147">This also means that endpoints are receiving health probes from Traffic Manager with a higher frequency than hello setting used for Probing Interval.</span></span>

>[!NOTE]
><span data-ttu-id="91cb8-148">Para HTTP ou HTTPS de protocolo de monitoramento, uma prática comum no lado do ponto de extremidade de saudação é tooimplement uma página personalizada dentro de seu aplicativo - por exemplo, /health.aspx.</span><span class="sxs-lookup"><span data-stu-id="91cb8-148">For HTTP or HTTPS monitoring protocol, a common practice on hello endpoint side is tooimplement a custom page within your application - for example, /health.aspx.</span></span> <span data-ttu-id="91cb8-149">Usando esse caminho para monitoramento, você pode executar verificações específicas do aplicativo, como verificação de contadores de desempenho ou da disponibilidade do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="91cb8-149">Using this path for monitoring, you can perform application-specific checks, such as checking performance counters or verifying database availability.</span></span> <span data-ttu-id="91cb8-150">Página de saudação com base nessas verificações personalizadas, retorna um código de status HTTP apropriado.</span><span class="sxs-lookup"><span data-stu-id="91cb8-150">Based on these custom checks, hello page returns an appropriate HTTP status code.</span></span>

<span data-ttu-id="91cb8-151">Todos os pontos de extremidade em um perfil do Gerenciador de Tráfego compartilham configurações de monitoramento.</span><span class="sxs-lookup"><span data-stu-id="91cb8-151">All endpoints in a Traffic Manager profile share monitoring settings.</span></span> <span data-ttu-id="91cb8-152">Se você precisar toouse diferentes configurações de monitoramento para diferentes pontos de extremidade, você pode criar [aninhados perfis do Traffic Manager](traffic-manager-nested-profiles.md#example-5-per-endpoint-monitoring-settings).</span><span class="sxs-lookup"><span data-stu-id="91cb8-152">If you need toouse different monitoring settings for different endpoints, you can create [nested Traffic Manager profiles](traffic-manager-nested-profiles.md#example-5-per-endpoint-monitoring-settings).</span></span>

## <a name="endpoint-and-profile-status"></a><span data-ttu-id="91cb8-153">Status do ponto de extremidade e do perfil</span><span class="sxs-lookup"><span data-stu-id="91cb8-153">Endpoint and profile status</span></span>

<span data-ttu-id="91cb8-154">Você pode habilitar e desabilitar pontos de extremidade e perfis do Gerenciador de Tráfego.</span><span class="sxs-lookup"><span data-stu-id="91cb8-154">You can enable and disable Traffic Manager profiles and endpoints.</span></span> <span data-ttu-id="91cb8-155">No entanto, uma alteração no status do ponto de extremidade também pode ocorrer como resultado das configurações e processos automatizados do Gerenciador de Tráfego.</span><span class="sxs-lookup"><span data-stu-id="91cb8-155">However, a change in endpoint status also might occur as a result of Traffic Manager automated settings and processes.</span></span>

### <a name="endpoint-status"></a><span data-ttu-id="91cb8-156">Status do ponto de extremidade</span><span class="sxs-lookup"><span data-stu-id="91cb8-156">Endpoint status</span></span>

<span data-ttu-id="91cb8-157">Você pode habilitar ou desabilitar um ponto de extremidade específico.</span><span class="sxs-lookup"><span data-stu-id="91cb8-157">You can enable or disable a specific endpoint.</span></span> <span data-ttu-id="91cb8-158">serviço subjacente Hello, que pode ainda ser íntegro, não é afetado.</span><span class="sxs-lookup"><span data-stu-id="91cb8-158">hello underlying service, which might still be healthy, is unaffected.</span></span> <span data-ttu-id="91cb8-159">Controles alteração de status de ponto de extremidade Olá Olá disponibilidade do ponto de extremidade de Olá Olá perfil do Traffic Manager.</span><span class="sxs-lookup"><span data-stu-id="91cb8-159">Changing hello endpoint status controls hello availability of hello endpoint in hello Traffic Manager profile.</span></span> <span data-ttu-id="91cb8-160">Quando um status de ponto de extremidade estiver desabilitado, Gerenciador de tráfego não verifica sua integridade e ponto de extremidade de saudação não está incluído em uma resposta DNS.</span><span class="sxs-lookup"><span data-stu-id="91cb8-160">When an endpoint status is disabled, Traffic Manager does not check its health and hello endpoint is not included in a DNS response.</span></span>

### <a name="profile-status"></a><span data-ttu-id="91cb8-161">Status do perfil</span><span class="sxs-lookup"><span data-stu-id="91cb8-161">Profile status</span></span>

<span data-ttu-id="91cb8-162">Usando a configuração de status de perfil hello, você pode habilitar ou desabilitar um perfil específico.</span><span class="sxs-lookup"><span data-stu-id="91cb8-162">Using hello profile status setting, you can enable or disable a specific profile.</span></span> <span data-ttu-id="91cb8-163">Enquanto o status do ponto de extremidade afeta um único ponto de extremidade, o status do perfil afeta todo perfil hello, incluindo todos os pontos de extremidade.</span><span class="sxs-lookup"><span data-stu-id="91cb8-163">While endpoint status affects a single endpoint, profile status affects hello entire profile, including all endpoints.</span></span> <span data-ttu-id="91cb8-164">Quando você desabilita um perfil, pontos de extremidade de saudação não são verificados quanto à integridade e nenhum ponto de extremidade está incluídos em uma resposta DNS.</span><span class="sxs-lookup"><span data-stu-id="91cb8-164">When you disable a profile, hello endpoints are not checked for health and no endpoints are included in a DNS response.</span></span> <span data-ttu-id="91cb8-165">Um [NXDOMAIN](https://tools.ietf.org/html/rfc2308) código de resposta é retornado para consultas DNS hello.</span><span class="sxs-lookup"><span data-stu-id="91cb8-165">An [NXDOMAIN](https://tools.ietf.org/html/rfc2308) response code is returned for hello DNS query.</span></span>

### <a name="endpoint-monitor-status"></a><span data-ttu-id="91cb8-166">Status do monitor de ponto de extremidade</span><span class="sxs-lookup"><span data-stu-id="91cb8-166">Endpoint monitor status</span></span>

<span data-ttu-id="91cb8-167">Monitora o status de ponto de extremidade é um valor gerado pelo Gerenciador de tráfego que mostra o status de saudação do ponto de extremidade de saudação.</span><span class="sxs-lookup"><span data-stu-id="91cb8-167">Endpoint monitor status is a Traffic Manager-generated value that shows hello status of hello endpoint.</span></span> <span data-ttu-id="91cb8-168">Você não pode alterar essa configuração manualmente.</span><span class="sxs-lookup"><span data-stu-id="91cb8-168">You cannot change this setting manually.</span></span> <span data-ttu-id="91cb8-169">status do monitor de ponto de extremidade de saudação é uma combinação dos resultados de saudação do monitoramento de ponto de extremidade e Olá status do ponto de extremidade configurado.</span><span class="sxs-lookup"><span data-stu-id="91cb8-169">hello endpoint monitor status is a combination of hello results of endpoint monitoring and hello configured endpoint status.</span></span> <span data-ttu-id="91cb8-170">os valores possíveis de saudação do status do monitor de ponto de extremidade são mostrados na Olá a tabela a seguir:</span><span class="sxs-lookup"><span data-stu-id="91cb8-170">hello possible values of endpoint monitor status are shown in hello following table:</span></span>

| <span data-ttu-id="91cb8-171">Status do perfil</span><span class="sxs-lookup"><span data-stu-id="91cb8-171">Profile status</span></span> | <span data-ttu-id="91cb8-172">Status do ponto de extremidade</span><span class="sxs-lookup"><span data-stu-id="91cb8-172">Endpoint status</span></span> | <span data-ttu-id="91cb8-173">Status do monitor de ponto de extremidade</span><span class="sxs-lookup"><span data-stu-id="91cb8-173">Endpoint monitor status</span></span> | <span data-ttu-id="91cb8-174">Observações</span><span class="sxs-lookup"><span data-stu-id="91cb8-174">Notes</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="91cb8-175">Desabilitado</span><span class="sxs-lookup"><span data-stu-id="91cb8-175">Disabled</span></span> |<span data-ttu-id="91cb8-176">Habilitado</span><span class="sxs-lookup"><span data-stu-id="91cb8-176">Enabled</span></span> |<span data-ttu-id="91cb8-177">Inativo</span><span class="sxs-lookup"><span data-stu-id="91cb8-177">Inactive</span></span> |<span data-ttu-id="91cb8-178">perfil de saudação foi desabilitado.</span><span class="sxs-lookup"><span data-stu-id="91cb8-178">hello profile has been disabled.</span></span> <span data-ttu-id="91cb8-179">Embora o status do ponto de extremidade Olá estiver habilitado, o status do perfil hello (desabilitado) terá precedência.</span><span class="sxs-lookup"><span data-stu-id="91cb8-179">Although hello endpoint status is Enabled, hello profile status (Disabled) takes precedence.</span></span> <span data-ttu-id="91cb8-180">Pontos de extremidade em perfis desabilitados não são monitorados.</span><span class="sxs-lookup"><span data-stu-id="91cb8-180">Endpoints in disabled profiles are not monitored.</span></span> <span data-ttu-id="91cb8-181">Um código de resposta NXDOMAIN é retornado para a consulta DNS hello.</span><span class="sxs-lookup"><span data-stu-id="91cb8-181">An NXDOMAIN response code is returned for hello DNS query.</span></span> |
| <span data-ttu-id="91cb8-182">&lt;qualquer&gt;</span><span class="sxs-lookup"><span data-stu-id="91cb8-182">&lt;any&gt;</span></span> |<span data-ttu-id="91cb8-183">Desabilitado</span><span class="sxs-lookup"><span data-stu-id="91cb8-183">Disabled</span></span> |<span data-ttu-id="91cb8-184">Desabilitado</span><span class="sxs-lookup"><span data-stu-id="91cb8-184">Disabled</span></span> |<span data-ttu-id="91cb8-185">ponto de extremidade de saudação foi desabilitado.</span><span class="sxs-lookup"><span data-stu-id="91cb8-185">hello endpoint has been disabled.</span></span> <span data-ttu-id="91cb8-186">Pontos de extremidade desabilitados não são monitorados.</span><span class="sxs-lookup"><span data-stu-id="91cb8-186">Disabled endpoints are not monitored.</span></span> <span data-ttu-id="91cb8-187">ponto de extremidade de saudação não está incluído em respostas DNS, portanto, ele não receber tráfego.</span><span class="sxs-lookup"><span data-stu-id="91cb8-187">hello endpoint is not included in DNS responses, therefore, it does not receive traffic.</span></span> |
| <span data-ttu-id="91cb8-188">habilitado</span><span class="sxs-lookup"><span data-stu-id="91cb8-188">Enabled</span></span> |<span data-ttu-id="91cb8-189">Habilitado</span><span class="sxs-lookup"><span data-stu-id="91cb8-189">Enabled</span></span> |<span data-ttu-id="91cb8-190">Online</span><span class="sxs-lookup"><span data-stu-id="91cb8-190">Online</span></span> |<span data-ttu-id="91cb8-191">ponto de extremidade de saudação é monitorado e está íntegro.</span><span class="sxs-lookup"><span data-stu-id="91cb8-191">hello endpoint is monitored and is healthy.</span></span> <span data-ttu-id="91cb8-192">Ele é incluído em respostas DNS e pode receber tráfego.</span><span class="sxs-lookup"><span data-stu-id="91cb8-192">It is included in DNS responses and can receive traffic.</span></span> |
| <span data-ttu-id="91cb8-193">Habilitado</span><span class="sxs-lookup"><span data-stu-id="91cb8-193">Enabled</span></span> |<span data-ttu-id="91cb8-194">Habilitado</span><span class="sxs-lookup"><span data-stu-id="91cb8-194">Enabled</span></span> |<span data-ttu-id="91cb8-195">Degradado</span><span class="sxs-lookup"><span data-stu-id="91cb8-195">Degraded</span></span> |<span data-ttu-id="91cb8-196">As verificações de integridade de monitoramento do ponto de extremidade estão falhando.</span><span class="sxs-lookup"><span data-stu-id="91cb8-196">Endpoint monitoring health checks are failing.</span></span> <span data-ttu-id="91cb8-197">ponto de extremidade de saudação não está incluído em respostas DNS e não recebe o tráfego.</span><span class="sxs-lookup"><span data-stu-id="91cb8-197">hello endpoint is not included in DNS responses and does not receive traffic.</span></span> <br><span data-ttu-id="91cb8-198">Toothis uma exceção é se todos os pontos de extremidade são degradados, caso em que todos eles são considerados toobe retornado na resposta de consulta de saudação).</span><span class="sxs-lookup"><span data-stu-id="91cb8-198">An exception toothis is if all endpoints are degraded, in which case all of them are considered toobe returned in hello query response).</span></span></br>|
| <span data-ttu-id="91cb8-199">habilitado</span><span class="sxs-lookup"><span data-stu-id="91cb8-199">Enabled</span></span> |<span data-ttu-id="91cb8-200">Habilitado</span><span class="sxs-lookup"><span data-stu-id="91cb8-200">Enabled</span></span> |<span data-ttu-id="91cb8-201">Verificando ponto de extremidade</span><span class="sxs-lookup"><span data-stu-id="91cb8-201">CheckingEndpoint</span></span> |<span data-ttu-id="91cb8-202">ponto de extremidade Olá será monitorado, mas os resultados de saudação da saudação primeira investigação ainda não foram recebidos.</span><span class="sxs-lookup"><span data-stu-id="91cb8-202">hello endpoint is monitored, but hello results of hello first probe have not been received yet.</span></span> <span data-ttu-id="91cb8-203">Verificando ponto de extremidade é um estado temporário que geralmente ocorre imediatamente após a adição ou habilitar um ponto de extremidade no perfil de saudação.</span><span class="sxs-lookup"><span data-stu-id="91cb8-203">CheckingEndpoint is a temporary state that usually occurs immediately after adding or enabling an endpoint in hello profile.</span></span> <span data-ttu-id="91cb8-204">Um ponto de extremidade nesse estado é incluído em respostas DNS e pode receber tráfego.</span><span class="sxs-lookup"><span data-stu-id="91cb8-204">An endpoint in this state is included in DNS responses and can receive traffic.</span></span> |
| <span data-ttu-id="91cb8-205">Habilitado</span><span class="sxs-lookup"><span data-stu-id="91cb8-205">Enabled</span></span> |<span data-ttu-id="91cb8-206">Habilitado</span><span class="sxs-lookup"><span data-stu-id="91cb8-206">Enabled</span></span> |<span data-ttu-id="91cb8-207">Parada</span><span class="sxs-lookup"><span data-stu-id="91cb8-207">Stopped</span></span> |<span data-ttu-id="91cb8-208">Olá nuvem serviço ou aplicativo web que Olá toois de pontos de extremidade não está em execução.</span><span class="sxs-lookup"><span data-stu-id="91cb8-208">hello cloud service or web app that hello endpoint points toois not running.</span></span> <span data-ttu-id="91cb8-209">Verifique as configurações do aplicativo hello nuvem web ou serviço.</span><span class="sxs-lookup"><span data-stu-id="91cb8-209">Check hello cloud service or web app settings.</span></span> <span data-ttu-id="91cb8-210">Isso também pode ocorrer se o ponto de extremidade de saudação é do tipo aninhado de ponto de extremidade e perfil de filho hello está desabilitado ou está inativo.</span><span class="sxs-lookup"><span data-stu-id="91cb8-210">This can also happen if hello endpoint is of type nested endpoint and hello child profile is disabled or is inactive.</span></span> <br><span data-ttu-id="91cb8-211">Um ponto de extremidade com um status Parado não é monitorado.</span><span class="sxs-lookup"><span data-stu-id="91cb8-211">An endpoint with a Stopped status is not monitored.</span></span> <span data-ttu-id="91cb8-212">Ele não é incluído em respostas DNS e não recebe tráfego.</span><span class="sxs-lookup"><span data-stu-id="91cb8-212">It is not included in DNS responses and does not receive traffic.</span></span> <span data-ttu-id="91cb8-213">Toothis uma exceção é se todos os pontos de extremidade são degradados, caso em que todos eles serão considerados toobe retornado na resposta de consulta de saudação.</span><span class="sxs-lookup"><span data-stu-id="91cb8-213">An exception toothis is if all endpoints are degraded, in which case all of them will be considered toobe returned in hello query response.</span></span></br>|

<span data-ttu-id="91cb8-214">Para obter detalhes sobre como o status do monitor de ponto de extremidade é calculado para pontos de extremidade aninhados, veja [Perfis aninhados do Gerenciador de Tráfego](traffic-manager-nested-profiles.md).</span><span class="sxs-lookup"><span data-stu-id="91cb8-214">For details about how endpoint monitor status is calculated for nested endpoints, see [nested Traffic Manager profiles](traffic-manager-nested-profiles.md).</span></span>

### <a name="profile-monitor-status"></a><span data-ttu-id="91cb8-215">Status do monitor de perfil</span><span class="sxs-lookup"><span data-stu-id="91cb8-215">Profile monitor status</span></span>

<span data-ttu-id="91cb8-216">status do monitor de perfil de saudação é uma combinação de valores de status de monitor de ponto de extremidade de Olá para todos os pontos de extremidade e de status do perfil de saudação configurado.</span><span class="sxs-lookup"><span data-stu-id="91cb8-216">hello profile monitor status is a combination of hello configured profile status and hello endpoint monitor status values for all endpoints.</span></span> <span data-ttu-id="91cb8-217">Olá possíveis valores são descritos em Olá a tabela a seguir:</span><span class="sxs-lookup"><span data-stu-id="91cb8-217">hello possible values are described in hello following table:</span></span>

| <span data-ttu-id="91cb8-218">Status do perfil (conforme configurado)</span><span class="sxs-lookup"><span data-stu-id="91cb8-218">Profile status (as configured)</span></span> | <span data-ttu-id="91cb8-219">Status do monitor de ponto de extremidade</span><span class="sxs-lookup"><span data-stu-id="91cb8-219">Endpoint monitor status</span></span> | <span data-ttu-id="91cb8-220">Status do monitor de perfil</span><span class="sxs-lookup"><span data-stu-id="91cb8-220">Profile monitor status</span></span> | <span data-ttu-id="91cb8-221">Observações</span><span class="sxs-lookup"><span data-stu-id="91cb8-221">Notes</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="91cb8-222">Desabilitado</span><span class="sxs-lookup"><span data-stu-id="91cb8-222">Disabled</span></span> |<span data-ttu-id="91cb8-223">&lt;qualquer&gt; ou um perfil sem pontos de extremidade definidos.</span><span class="sxs-lookup"><span data-stu-id="91cb8-223">&lt;any&gt; or a profile with no defined endpoints.</span></span> |<span data-ttu-id="91cb8-224">Desabilitado</span><span class="sxs-lookup"><span data-stu-id="91cb8-224">Disabled</span></span> |<span data-ttu-id="91cb8-225">perfil de saudação foi desabilitado.</span><span class="sxs-lookup"><span data-stu-id="91cb8-225">hello profile has been disabled.</span></span> |
| <span data-ttu-id="91cb8-226">habilitado</span><span class="sxs-lookup"><span data-stu-id="91cb8-226">Enabled</span></span> |<span data-ttu-id="91cb8-227">status de saudação de pelo menos um ponto de extremidade está degradado.</span><span class="sxs-lookup"><span data-stu-id="91cb8-227">hello status of at least one endpoint is Degraded.</span></span> |<span data-ttu-id="91cb8-228">Degradado</span><span class="sxs-lookup"><span data-stu-id="91cb8-228">Degraded</span></span> |<span data-ttu-id="91cb8-229">Examine o status de cada ponto de extremidade de Olá valores toodetermine quais pontos de extremidade exigem atenção adicional.</span><span class="sxs-lookup"><span data-stu-id="91cb8-229">Review hello individual endpoint status values toodetermine which endpoints require further attention.</span></span> |
| <span data-ttu-id="91cb8-230">habilitado</span><span class="sxs-lookup"><span data-stu-id="91cb8-230">Enabled</span></span> |<span data-ttu-id="91cb8-231">status de saudação de pelo menos um ponto de extremidade está Online.</span><span class="sxs-lookup"><span data-stu-id="91cb8-231">hello status of at least one endpoint is Online.</span></span> <span data-ttu-id="91cb8-232">Nenhum ponto de extremidade tem o status Degradado.</span><span class="sxs-lookup"><span data-stu-id="91cb8-232">No endpoints have a Degraded status.</span></span> |<span data-ttu-id="91cb8-233">Online</span><span class="sxs-lookup"><span data-stu-id="91cb8-233">Online</span></span> |<span data-ttu-id="91cb8-234">serviço de saudação está aceitando o tráfego.</span><span class="sxs-lookup"><span data-stu-id="91cb8-234">hello service is accepting traffic.</span></span> <span data-ttu-id="91cb8-235">Nenhuma ação adicional é necessária.</span><span class="sxs-lookup"><span data-stu-id="91cb8-235">No further action is required.</span></span> |
| <span data-ttu-id="91cb8-236">habilitado</span><span class="sxs-lookup"><span data-stu-id="91cb8-236">Enabled</span></span> |<span data-ttu-id="91cb8-237">status de saudação de pelo menos um ponto de extremidade está verificando ponto de extremidade.</span><span class="sxs-lookup"><span data-stu-id="91cb8-237">hello status of at least one endpoint is CheckingEndpoint.</span></span> <span data-ttu-id="91cb8-238">Nenhum ponto de extremidade tem status Online ou Degradado.</span><span class="sxs-lookup"><span data-stu-id="91cb8-238">No endpoints are in Online or Degraded status.</span></span> |<span data-ttu-id="91cb8-239">Verificando pontos de extremidade</span><span class="sxs-lookup"><span data-stu-id="91cb8-239">CheckingEndpoints</span></span> |<span data-ttu-id="91cb8-240">Esse estado de transição ocorre quando um perfil é criado ou habilitado.</span><span class="sxs-lookup"><span data-stu-id="91cb8-240">This transition state occurs when a profile if created or enabled.</span></span> <span data-ttu-id="91cb8-241">integridade do ponto de extremidade Hello está sendo verificada para Olá primeira vez.</span><span class="sxs-lookup"><span data-stu-id="91cb8-241">hello endpoint health is being checked for hello first time.</span></span> |
| <span data-ttu-id="91cb8-242">habilitado</span><span class="sxs-lookup"><span data-stu-id="91cb8-242">Enabled</span></span> |<span data-ttu-id="91cb8-243">status de saudação de todos os pontos de extremidade no perfil de saudação são desativados ou interrompidos ou perfil de saudação não tem nenhum ponto de extremidade definido.</span><span class="sxs-lookup"><span data-stu-id="91cb8-243">hello statuses of all endpoints in hello profile are either Disabled or Stopped, or hello profile has no defined endpoints.</span></span> |<span data-ttu-id="91cb8-244">Inativo</span><span class="sxs-lookup"><span data-stu-id="91cb8-244">Inactive</span></span> |<span data-ttu-id="91cb8-245">Nenhum ponto de extremidade está ativo, mas Olá perfil ainda está habilitado.</span><span class="sxs-lookup"><span data-stu-id="91cb8-245">No endpoints are active, but hello profile is still Enabled.</span></span> |

## <a name="endpoint-failover-and-recovery"></a><span data-ttu-id="91cb8-246">Failover e recuperação do ponto de extremidade</span><span class="sxs-lookup"><span data-stu-id="91cb8-246">Endpoint failover and recovery</span></span>

<span data-ttu-id="91cb8-247">Gerenciador de tráfego periodicamente verifica a integridade de saudação de cada ponto de extremidade, incluindo pontos de extremidade não íntegro.</span><span class="sxs-lookup"><span data-stu-id="91cb8-247">Traffic Manager periodically checks hello health of every endpoint, including unhealthy endpoints.</span></span> <span data-ttu-id="91cb8-248">O Gerenciador de Tráfego detecta quando um ponto de extremidade se torna íntegro e coloca-o de volta em rotação.</span><span class="sxs-lookup"><span data-stu-id="91cb8-248">Traffic Manager detects when an endpoint becomes healthy and brings it back into rotation.</span></span>

<span data-ttu-id="91cb8-249">Um ponto de extremidade não está íntegro quando qualquer Olá eventos a seguir ocorrer:</span><span class="sxs-lookup"><span data-stu-id="91cb8-249">An endpoint is unhealthy when any of hello following events occur:</span></span>
- <span data-ttu-id="91cb8-250">Se Olá monitoramento protocolo HTTP ou HTTPS:</span><span class="sxs-lookup"><span data-stu-id="91cb8-250">If hello monitoring protocol is HTTP or HTTPS:</span></span>
    - <span data-ttu-id="91cb8-251">Uma resposta diferente de 200 será recebida (incluindo um código 2xx diferente ou um redirecionamento 301/302).</span><span class="sxs-lookup"><span data-stu-id="91cb8-251">A non-200 response is received (including a different 2xx code, or a 301/302 redirect).</span></span>
- <span data-ttu-id="91cb8-252">Se Olá monitoramento protocolo for TCP:</span><span class="sxs-lookup"><span data-stu-id="91cb8-252">If hello monitoring protocol is TCP:</span></span> 
    - <span data-ttu-id="91cb8-253">Uma resposta diferente de ACK ou SYN ACK é recebido na solicitação de sincronização de toohello de resposta enviada pelo Gerenciador de tráfego tooattempt um estabelecimento de conexão.</span><span class="sxs-lookup"><span data-stu-id="91cb8-253">A response other than ACK or SYN-ACK is received in response toohello SYNC request sent by Traffic Manager tooattempt a connection establishment.</span></span>
- <span data-ttu-id="91cb8-254">Tempo limite.</span><span class="sxs-lookup"><span data-stu-id="91cb8-254">Timeout.</span></span> 
- <span data-ttu-id="91cb8-255">Qualquer outro conexão problema resultante no ponto de extremidade de saudação que não estão acessíveis.</span><span class="sxs-lookup"><span data-stu-id="91cb8-255">Any other connection issue resulting in hello endpoint being not reachable.</span></span>

<span data-ttu-id="91cb8-256">Para obter mais informações sobre como solucionar problemas de verificações com falha, consulte [Solução de problemas de status degradado no Gerenciador de Tráfego do Azure](traffic-manager-troubleshooting-degraded.md).</span><span class="sxs-lookup"><span data-stu-id="91cb8-256">For more information about troubleshooting failed checks, see [Troubleshooting Degraded status on Azure Traffic Manager](traffic-manager-troubleshooting-degraded.md).</span></span> 

<span data-ttu-id="91cb8-257">Olá, linha do tempo abaixo na Figura 2 é uma descrição detalhada da saudação monitorando o processo de ponto de extremidade do Gerenciador de tráfego que tem Olá configurações a seguir: monitoramento protocolo é HTTP, o intervalo de sondagem é de 30 segundos, o número de falhas toleradas é 3, o valor de tempo limite é de 10 segundos e TTL do DNS é de 30 segundos.</span><span class="sxs-lookup"><span data-stu-id="91cb8-257">hello following timeline in Figure 2 is a detailed description of hello monitoring process of Traffic Manager endpoint that has hello following settings: monitoring protocol is HTTP, probing interval is 30 seconds, number of tolerated failures is 3, timeout value is 10 seconds, and DNS TTL is 30 seconds.</span></span>

![Sequência de failover e failback de ponto de extremidade do Gerenciador de Tráfego](./media/traffic-manager-monitoring/timeline.png)

<span data-ttu-id="91cb8-259">**Figura 2: Failover do ponto de extremidade do Gerenciador de Tráfego e sequência de recuperação**</span><span class="sxs-lookup"><span data-stu-id="91cb8-259">**Figure 2:  Traffic manager endpoint failover and recovery sequence**</span></span>

1. <span data-ttu-id="91cb8-260">**GET**.</span><span class="sxs-lookup"><span data-stu-id="91cb8-260">**GET**.</span></span> <span data-ttu-id="91cb8-261">Para cada ponto de extremidade, Olá sistema de monitoramento do Traffic Manager executa uma solicitação GET no caminho de saudação especificado no hello configurações de monitoramento.</span><span class="sxs-lookup"><span data-stu-id="91cb8-261">For each endpoint, hello Traffic Manager monitoring system performs a GET request on hello path specified in hello monitoring settings.</span></span>
2. <span data-ttu-id="91cb8-262">**200 OK**.</span><span class="sxs-lookup"><span data-stu-id="91cb8-262">**200 OK**.</span></span> <span data-ttu-id="91cb8-263">saudação de sistema de monitoramento espera uma toobe de mensagem HTTP 200 Okey retornada dentro de 10 segundos.</span><span class="sxs-lookup"><span data-stu-id="91cb8-263">hello monitoring system expects an HTTP 200 OK message toobe returned within 10 seconds.</span></span> <span data-ttu-id="91cb8-264">Quando ele recebe essa resposta, ele reconhecerá que Olá serviço está disponível.</span><span class="sxs-lookup"><span data-stu-id="91cb8-264">When it receives this response, it recognizes that hello service is available.</span></span>
3. <span data-ttu-id="91cb8-265">**30 segundos entre verificações**.</span><span class="sxs-lookup"><span data-stu-id="91cb8-265">**30 seconds between checks**.</span></span> <span data-ttu-id="91cb8-266">verificação de integridade do ponto de extremidade de saudação é repetida a cada 30 segundos.</span><span class="sxs-lookup"><span data-stu-id="91cb8-266">hello endpoint health check is repeated every 30 seconds.</span></span>
4. <span data-ttu-id="91cb8-267">**Serviço indisponível**.</span><span class="sxs-lookup"><span data-stu-id="91cb8-267">**Service unavailable**.</span></span> <span data-ttu-id="91cb8-268">serviço de saudação se torna indisponível.</span><span class="sxs-lookup"><span data-stu-id="91cb8-268">hello service becomes unavailable.</span></span> <span data-ttu-id="91cb8-269">Gerenciador de tráfego não saberá até a próxima verificação de integridade hello.</span><span class="sxs-lookup"><span data-stu-id="91cb8-269">Traffic Manager will not know until hello next health check.</span></span>
5. <span data-ttu-id="91cb8-270">**Saudação de tooaccess tentativas monitoramento caminho**.</span><span class="sxs-lookup"><span data-stu-id="91cb8-270">**Attempts tooaccess hello monitoring path**.</span></span> <span data-ttu-id="91cb8-271">saudação de sistema de monitoramento executa uma solicitação GET, mas não receber uma resposta no período de tempo limite de saudação de 10 segundos (como alternativa, uma resposta 200 não pode ser recebida).</span><span class="sxs-lookup"><span data-stu-id="91cb8-271">hello monitoring system performs a GET request, but does not receive a response within hello timeout period of 10 seconds (alternatively, a non-200 response may be received).</span></span> <span data-ttu-id="91cb8-272">Posteriormente, ele realiza mais três tentativas em intervalos de 30 segundos.</span><span class="sxs-lookup"><span data-stu-id="91cb8-272">It then tries three more times, at 30-second intervals.</span></span> <span data-ttu-id="91cb8-273">Se uma das tentativas de saudação for bem-sucedida, número de saudação de tentativas será redefinido.</span><span class="sxs-lookup"><span data-stu-id="91cb8-273">If one of hello tries is successful, then hello number of tries is reset.</span></span>
6. <span data-ttu-id="91cb8-274">**Status definido tooDegraded**.</span><span class="sxs-lookup"><span data-stu-id="91cb8-274">**Status set tooDegraded**.</span></span> <span data-ttu-id="91cb8-275">Após a quarta falha consecutiva, Olá sistema de monitoramento marca status do ponto de extremidade disponível hello como degradado.</span><span class="sxs-lookup"><span data-stu-id="91cb8-275">After a fourth consecutive failure, hello monitoring system marks hello unavailable endpoint status as Degraded.</span></span>
7. <span data-ttu-id="91cb8-276">**O tráfego é pontos de extremidade desviadas tooother**.</span><span class="sxs-lookup"><span data-stu-id="91cb8-276">**Traffic is diverted tooother endpoints**.</span></span> <span data-ttu-id="91cb8-277">Olá servidores de nome DNS do Traffic Manager são atualizados e Gerenciador de tráfego não retorna o ponto de extremidade de saudação em consultas de tooDNS de resposta.</span><span class="sxs-lookup"><span data-stu-id="91cb8-277">hello Traffic Manager DNS name servers are updated and Traffic Manager no longer returns hello endpoint in response tooDNS queries.</span></span> <span data-ttu-id="91cb8-278">Novas conexões são tooother direcionado, pontos de extremidade disponíveis.</span><span class="sxs-lookup"><span data-stu-id="91cb8-278">New connections are directed tooother, available endpoints.</span></span> <span data-ttu-id="91cb8-279">No entanto, respostas DNS anteriores que incluem esse ponto de extremidade ainda poderão ser armazenadas em cache por servidores DNS recursivos e clientes DNS.</span><span class="sxs-lookup"><span data-stu-id="91cb8-279">However, previous DNS responses that include this endpoint may still be cached by recursive DNS servers and DNS clients.</span></span> <span data-ttu-id="91cb8-280">Os clientes continuam o ponto de extremidade do toouse Olá até expira Olá cache DNS.</span><span class="sxs-lookup"><span data-stu-id="91cb8-280">Clients continue toouse hello endpoint until hello DNS cache expires.</span></span> <span data-ttu-id="91cb8-281">Como Olá cache DNS expira, os clientes fazem novas consultas DNS e toodifferent direcionado de pontos de extremidade.</span><span class="sxs-lookup"><span data-stu-id="91cb8-281">As hello DNS cache expires, clients make new DNS queries and are directed toodifferent endpoints.</span></span> <span data-ttu-id="91cb8-282">duração do cache de saudação é controlada pela configuração de TTL Olá no hello perfil do Traffic Manager, por exemplo, de 30 segundos.</span><span class="sxs-lookup"><span data-stu-id="91cb8-282">hello cache duration is controlled by hello TTL setting in hello Traffic Manager profile, for example, 30 seconds.</span></span>
8. <span data-ttu-id="91cb8-283">**Continuação das verificações de integridade**.</span><span class="sxs-lookup"><span data-stu-id="91cb8-283">**Health checks continue**.</span></span> <span data-ttu-id="91cb8-284">O Traffic Manager continuará toocheck integridade de saudação do ponto de extremidade de saudação enquanto ele tem um status degradado.</span><span class="sxs-lookup"><span data-stu-id="91cb8-284">Traffic Manager continues toocheck hello health of hello endpoint while it has a Degraded status.</span></span> <span data-ttu-id="91cb8-285">O Traffic Manager detecta quando o ponto de extremidade de saudação retorna toohealth.</span><span class="sxs-lookup"><span data-stu-id="91cb8-285">Traffic Manager detects when hello endpoint returns toohealth.</span></span>
9. <span data-ttu-id="91cb8-286">**Serviço volta a ficar online**.</span><span class="sxs-lookup"><span data-stu-id="91cb8-286">**Service comes back online**.</span></span> <span data-ttu-id="91cb8-287">serviço de saudação se torna disponível.</span><span class="sxs-lookup"><span data-stu-id="91cb8-287">hello service becomes available.</span></span> <span data-ttu-id="91cb8-288">ponto de extremidade Olá retém seu status de degradado no Traffic Manager até que o sistema de monitoramento de saudação executa sua próxima verificação de integridade.</span><span class="sxs-lookup"><span data-stu-id="91cb8-288">hello endpoint retains its Degraded status in Traffic Manager until hello monitoring system performs its next health check.</span></span>
10. <span data-ttu-id="91cb8-289">**Tráfego tooservice retoma**.</span><span class="sxs-lookup"><span data-stu-id="91cb8-289">**Traffic tooservice resumes**.</span></span> <span data-ttu-id="91cb8-290">O Gerenciador de Tráfego envia uma solicitação GET e recebe uma resposta de status 200 OK.</span><span class="sxs-lookup"><span data-stu-id="91cb8-290">Traffic Manager sends a GET request and receives a 200 OK status response.</span></span> <span data-ttu-id="91cb8-291">serviço de saudação retornou tooa o estado íntegro.</span><span class="sxs-lookup"><span data-stu-id="91cb8-291">hello service has returned tooa healthy state.</span></span> <span data-ttu-id="91cb8-292">servidores de nome do Gerenciador de tráfego de saudação são atualizados e iniciar toohand nome de DNS do serviço de saudação em respostas DNS.</span><span class="sxs-lookup"><span data-stu-id="91cb8-292">hello Traffic Manager name servers are updated, and they begin toohand out hello service's DNS name in DNS responses.</span></span> <span data-ttu-id="91cb8-293">Tráfego retorna toohello de ponto de extremidade como expirarem em cache as respostas DNS que retornam outros pontos de extremidade e como as conexões existentes são encerrados tooother pontos de extremidade.</span><span class="sxs-lookup"><span data-stu-id="91cb8-293">Traffic returns toohello endpoint as cached DNS responses that return other endpoints expire, and as existing connections tooother endpoints are terminated.</span></span>

    > [!NOTE]
    > <span data-ttu-id="91cb8-294">Como o Traffic Manager funciona no nível DNS de saudação, ele não pode influenciar o ponto de extremidade de tooany conexões existentes.</span><span class="sxs-lookup"><span data-stu-id="91cb8-294">Because Traffic Manager works at hello DNS level, it cannot influence existing connections tooany endpoint.</span></span> <span data-ttu-id="91cb8-295">Quando ele direciona o tráfego entre os pontos de extremidade (ou pelas configurações de perfil alterados ou durante o failover ou failback), o Traffic Manager direciona novos pontos de extremidade de tooavailable de conexões.</span><span class="sxs-lookup"><span data-stu-id="91cb8-295">When it directs traffic between endpoints (either by changed profile settings, or during failover or failback), Traffic Manager directs new connections tooavailable endpoints.</span></span> <span data-ttu-id="91cb8-296">No entanto, outros pontos de extremidade podem continuar tooreceive tráfego por meio de conexões existentes até que as sessões são encerradas.</span><span class="sxs-lookup"><span data-stu-id="91cb8-296">However, other endpoints might continue tooreceive traffic via existing connections until those sessions are terminated.</span></span> <span data-ttu-id="91cb8-297">aplicativos do tooenable toodrain de tráfego de conexões existentes, devem limitar Olá usada com cada ponto de extremidade de duração da sessão.</span><span class="sxs-lookup"><span data-stu-id="91cb8-297">tooenable traffic toodrain from existing connections, applications should limit hello session duration used with each endpoint.</span></span>

## <a name="traffic-routing-methods"></a><span data-ttu-id="91cb8-298">Métodos de roteamento de tráfego</span><span class="sxs-lookup"><span data-stu-id="91cb8-298">Traffic-routing methods</span></span>

<span data-ttu-id="91cb8-299">Quando um ponto de extremidade tem um status degradado, ele não é retornado em consultas de tooDNS de resposta.</span><span class="sxs-lookup"><span data-stu-id="91cb8-299">When an endpoint has a Degraded status, it is no longer returned in response tooDNS queries.</span></span> <span data-ttu-id="91cb8-300">Em vez disso, um ponto de extremidade alternativo será escolhido e retornado.</span><span class="sxs-lookup"><span data-stu-id="91cb8-300">Instead, an alternative endpoint is chosen and returned.</span></span> <span data-ttu-id="91cb8-301">o método de roteamento de tráfego de saudação configurado no perfil de saudação determina como o ponto de extremidade alternativo Olá é escolhido.</span><span class="sxs-lookup"><span data-stu-id="91cb8-301">hello traffic-routing method configured in hello profile determines how hello alternative endpoint is chosen.</span></span>

* <span data-ttu-id="91cb8-302">**Prioridade**.</span><span class="sxs-lookup"><span data-stu-id="91cb8-302">**Priority**.</span></span> <span data-ttu-id="91cb8-303">Os pontos de extremidade formam uma lista priorizada.</span><span class="sxs-lookup"><span data-stu-id="91cb8-303">Endpoints form a prioritized list.</span></span> <span data-ttu-id="91cb8-304">Olá primeiro ponto de extremidade disponível na lista de saudação sempre é retornado.</span><span class="sxs-lookup"><span data-stu-id="91cb8-304">hello first available endpoint on hello list is always returned.</span></span> <span data-ttu-id="91cb8-305">Se um status de ponto de extremidade está degradado, Olá próximo disponível ponto de extremidade é retornado.</span><span class="sxs-lookup"><span data-stu-id="91cb8-305">If an endpoint status is Degraded, then hello next available endpoint is returned.</span></span>
* <span data-ttu-id="91cb8-306">**Ponderado**.</span><span class="sxs-lookup"><span data-stu-id="91cb8-306">**Weighted**.</span></span> <span data-ttu-id="91cb8-307">Qualquer ponto de extremidade disponível é escolhido aleatoriamente com base em seus pesos atribuídos e Olá pesos de saudação outros pontos de extremidade disponíveis.</span><span class="sxs-lookup"><span data-stu-id="91cb8-307">Any available endpoint is chosen at random based on their assigned weights and hello weights of hello other available endpoints.</span></span>
* <span data-ttu-id="91cb8-308">**Desempenho**.</span><span class="sxs-lookup"><span data-stu-id="91cb8-308">**Performance**.</span></span> <span data-ttu-id="91cb8-309">Olá ponto de extremidade mais próximo usuário final toohello é retornado.</span><span class="sxs-lookup"><span data-stu-id="91cb8-309">hello endpoint closest toohello end user is returned.</span></span> <span data-ttu-id="91cb8-310">Se esse ponto de extremidade não estiver disponível, um ponto de extremidade é escolhido aleatoriamente de Olá a todos os outros pontos de extremidade disponíveis.</span><span class="sxs-lookup"><span data-stu-id="91cb8-310">If that endpoint is unavailable, an endpoint is randomly chosen from all hello other available endpoints.</span></span> <span data-ttu-id="91cb8-311">Escolher um ponto de extremidade aleatório evita uma falha em cascata que pode ocorrer quando o ponto de extremidade mais próximo Avançar Olá fica sobrecarregado.</span><span class="sxs-lookup"><span data-stu-id="91cb8-311">Choosing a random endpoint avoids a cascading failure that can occur when hello next-closest endpoint becomes overloaded.</span></span> <span data-ttu-id="91cb8-312">Você pode configurar planos de failover alternativos para o roteamento de tráfego de desempenho usando [perfis aninhados do Gerenciador de Tráfego](traffic-manager-nested-profiles.md#example-4-controlling-performance-traffic-routing-between-multiple-endpoints-in-the-same-region).</span><span class="sxs-lookup"><span data-stu-id="91cb8-312">You can configure alternative failover plans for performance traffic-routing by using [nested Traffic Manager profiles](traffic-manager-nested-profiles.md#example-4-controlling-performance-traffic-routing-between-multiple-endpoints-in-the-same-region).</span></span>
* <span data-ttu-id="91cb8-313">**Geográfico**.</span><span class="sxs-lookup"><span data-stu-id="91cb8-313">**Geographic**.</span></span> <span data-ttu-id="91cb8-314">ponto de extremidade de saudação mapeado tooserve Olá geográfica com base na solicitação de consulta de saudação que IP será retornado.</span><span class="sxs-lookup"><span data-stu-id="91cb8-314">hello endpoint mapped tooserve hello geographic location based on hello query request IP’s is returned.</span></span> <span data-ttu-id="91cb8-315">Se esse ponto de extremidade não estiver disponível, outro ponto de extremidade não será toofailover selecionado, como uma localização geográfica pode ser mapeado somente tooone ponto de extremidade em um perfil (mais detalhes estão na Olá [perguntas frequentes sobre](traffic-manager-FAQs.md#traffic-manager-geographic-traffic-routing-method)).</span><span class="sxs-lookup"><span data-stu-id="91cb8-315">If that endpoint is unavailable, another endpoint will not be selected toofailover to, since a geographic location can be mapped only tooone endpoint in a profile (more details are in hello [FAQ](traffic-manager-FAQs.md#traffic-manager-geographic-traffic-routing-method)).</span></span> <span data-ttu-id="91cb8-316">Como prática recomendada, ao usar o roteamento geográfico, é recomendável clientes perfis do Gerenciador de tráfego toouse aninhado com mais de um ponto de extremidade como pontos de extremidade de saudação do perfil de saudação.</span><span class="sxs-lookup"><span data-stu-id="91cb8-316">As a best practice, when using geographic routing, we recommend customers toouse nested Traffic Manager profiles with more than one endpoint as hello endpoints of hello profile.</span></span>

<span data-ttu-id="91cb8-317">Para obter mais informações, consulte [Métodos de roteamento de tráfego do Gerenciador de Tráfego](traffic-manager-routing-methods.md).</span><span class="sxs-lookup"><span data-stu-id="91cb8-317">For more information, see [Traffic Manager traffic-routing methods](traffic-manager-routing-methods.md).</span></span>

> [!NOTE]
> <span data-ttu-id="91cb8-318">Uma exceção toonormal roteamento de tráfego ocorre quando todos os pontos de extremidade qualificados têm um estado degradado.</span><span class="sxs-lookup"><span data-stu-id="91cb8-318">One exception toonormal traffic-routing behavior occurs when all eligible endpoints have a degraded status.</span></span> <span data-ttu-id="91cb8-319">O Traffic Manager faz a tentativa de "melhor esforço" e *responde como se todos os pontos de status degradado Olá realmente estão no estado online*.</span><span class="sxs-lookup"><span data-stu-id="91cb8-319">Traffic Manager makes a "best effort" attempt and *responds as if all hello Degraded status endpoints actually are in an online state*.</span></span> <span data-ttu-id="91cb8-320">Esse comportamento é preferível toohello alternativa, que seria toonot retornar qualquer ponto de extremidade em Olá resposta DNS.</span><span class="sxs-lookup"><span data-stu-id="91cb8-320">This behavior is preferable toohello alternative, which would be toonot return any endpoint in hello DNS response.</span></span> <span data-ttu-id="91cb8-321">Pontos de extremidade com status Parado ou Desabilitado não são monitorados e, portanto, não são considerados qualificados para o tráfego.</span><span class="sxs-lookup"><span data-stu-id="91cb8-321">Disabled or Stopped endpoints are not monitored, therefore, they are not considered eligible for traffic.</span></span>
>
> <span data-ttu-id="91cb8-322">Essa condição geralmente é causada pela configuração incorreta do serviço Olá, como:</span><span class="sxs-lookup"><span data-stu-id="91cb8-322">This condition is commonly caused by improper configuration of hello service, such as:</span></span>
>
> * <span data-ttu-id="91cb8-323">Verifica uma lista de controle de acesso (ACL) bloqueando a integridade do Gerenciador de tráfego de saudação.</span><span class="sxs-lookup"><span data-stu-id="91cb8-323">An access control list [ACL] blocking hello Traffic Manager health checks.</span></span>
> * <span data-ttu-id="91cb8-324">Uma configuração incorreta de monitoramento de porta ou protocolo no perfil do Gerenciador de tráfego de saudação do hello.</span><span class="sxs-lookup"><span data-stu-id="91cb8-324">An improper configuration of hello monitoring port or protocol in hello Traffic manager profile.</span></span>
>
> <span data-ttu-id="91cb8-325">Olá consequência desse comportamento é que, se as verificações de integridade do Traffic Manager não estiverem configuradas corretamente, talvez pareça tráfego hello como se o roteamento do Traffic Manager *é* funcionando corretamente.</span><span class="sxs-lookup"><span data-stu-id="91cb8-325">hello consequence of this behavior is that if Traffic Manager health checks are not configured correctly, it might appear from hello traffic routing as though Traffic Manager *is* working properly.</span></span> <span data-ttu-id="91cb8-326">No entanto, neste caso, o failover do ponto de extremidade não acontece e isso afeta a disponibilidade geral do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="91cb8-326">However, in this case, endpoint failover cannot happen which affects overall application availability.</span></span> <span data-ttu-id="91cb8-327">É importante toocheck perfil Olá mostra um status Online, não um status degradado.</span><span class="sxs-lookup"><span data-stu-id="91cb8-327">It is important toocheck that hello profile shows an Online status, not a Degraded status.</span></span> <span data-ttu-id="91cb8-328">Um status Online indica que Olá Traffic Manager verificações de integridade estão funcionando como esperado.</span><span class="sxs-lookup"><span data-stu-id="91cb8-328">An Online status indicates that hello Traffic Manager health checks are working as expected.</span></span>

<span data-ttu-id="91cb8-329">Para obter mais informações sobre como solucionar problemas de verificações de integridade com falha, consulte [Solução de problemas de status Degradado no Gerenciador de Tráfego do Azure](traffic-manager-troubleshooting-degraded.md).</span><span class="sxs-lookup"><span data-stu-id="91cb8-329">For more information about troubleshooting failed health checks, see [Troubleshooting Degraded status on Azure Traffic Manager](traffic-manager-troubleshooting-degraded.md).</span></span>



## <a name="next-steps"></a><span data-ttu-id="91cb8-330">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="91cb8-330">Next steps</span></span>

<span data-ttu-id="91cb8-331">Saiba [como funciona o Gerenciador de Tráfego](traffic-manager-how-traffic-manager-works.md)</span><span class="sxs-lookup"><span data-stu-id="91cb8-331">Learn [how Traffic Manager works](traffic-manager-how-traffic-manager-works.md)</span></span>

<span data-ttu-id="91cb8-332">Saiba mais sobre Olá [métodos de roteamento de tráfego](traffic-manager-routing-methods.md) suportada pelo Gerenciador de tráfego</span><span class="sxs-lookup"><span data-stu-id="91cb8-332">Learn more about hello [traffic-routing methods](traffic-manager-routing-methods.md) supported by Traffic Manager</span></span>

<span data-ttu-id="91cb8-333">Saiba como muito[criar um perfil do Gerenciador de tráfego](traffic-manager-manage-profiles.md)</span><span class="sxs-lookup"><span data-stu-id="91cb8-333">Learn how too[create a Traffic Manager profile](traffic-manager-manage-profiles.md)</span></span>

<span data-ttu-id="91cb8-334">[Solucionar problemas de status Degradado](traffic-manager-troubleshooting-degraded.md) em um ponto de extremidade do Gerenciador de Tráfego</span><span class="sxs-lookup"><span data-stu-id="91cb8-334">[Troubleshoot Degraded status](traffic-manager-troubleshooting-degraded.md) on a Traffic Manager endpoint</span></span>
