---
title: "métodos de roteamento de tráfego aaaAzure Traffic Manager - | Microsoft Docs"
description: "Isso ajuda a que entender os métodos de roteamento de tráfego diferente do hello usados pelo Gerenciador de tráfego de artigos"
services: traffic-manager
documentationcenter: 
author: KumudD
manager: timlt
editor: 
ms.assetid: db1efbf6-6762-4c7a-ac99-675d4eeb54d0
ms.service: traffic-manager
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/13/2017
ms.author: kumud
ms.openlocfilehash: b3eeca63ab5f2b9cd4a3a6b6a8fd3e40059e32b5
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="traffic-manager-routing-methods"></a><span data-ttu-id="d5599-103">Métodos de roteamento do Gerenciador de Tráfego</span><span class="sxs-lookup"><span data-stu-id="d5599-103">Traffic Manager routing methods</span></span>

<span data-ttu-id="d5599-104">Azure Traffic Manager oferece suporte a quatro roteamento de tráfego métodos toodetermine como tooroute rede tráfego toohello vários pontos de extremidade de serviço.</span><span class="sxs-lookup"><span data-stu-id="d5599-104">Azure Traffic Manager supports four traffic-routing methods toodetermine how tooroute network traffic toohello various service endpoints.</span></span> <span data-ttu-id="d5599-105">Gerenciador de tráfego se aplica a saudação roteamento de tráfego método tooeach consulta DNS recebe.</span><span class="sxs-lookup"><span data-stu-id="d5599-105">Traffic Manager applies hello traffic-routing method tooeach DNS query it receives.</span></span> <span data-ttu-id="d5599-106">método de roteamento de tráfego Hello determina qual ponto de extremidade retornado na resposta do DNS hello.</span><span class="sxs-lookup"><span data-stu-id="d5599-106">hello traffic-routing method determines which endpoint returned in hello DNS response.</span></span>

<span data-ttu-id="d5599-107">Quatro métodos de roteamento de tráfego estão disponíveis no Gerenciador de Tráfego:</span><span class="sxs-lookup"><span data-stu-id="d5599-107">There are four traffic routing methods available in Traffic Manager:</span></span>

* <span data-ttu-id="d5599-108">**[Prioridade](#priority):** selecione **prioridade** quando você deseja toouse um ponto de extremidade de serviço primário para todo o tráfego e fornecer backups caso Olá primário ou pontos de extremidade de backup Olá estão indisponíveis.</span><span class="sxs-lookup"><span data-stu-id="d5599-108">**[Priority](#priority):** Select **Priority** when you want toouse a primary service endpoint for all traffic, and provide backups in case hello primary or hello backup endpoints are unavailable.</span></span>
* <span data-ttu-id="d5599-109">**[Ponderado](#weighted):** selecione **ponderado** quando você quiser toodistribute tráfego em um conjunto de pontos de extremidade, ou uniformemente ou tooweights acordo, que você definir.</span><span class="sxs-lookup"><span data-stu-id="d5599-109">**[Weighted](#weighted):** Select **Weighted** when you want toodistribute traffic across a set of endpoints, either evenly or according tooweights, which you define.</span></span>
* <span data-ttu-id="d5599-110">**[Desempenho](#performance):** selecione **desempenho** quando tiver pontos de extremidade em diferentes locais geográficos e desejar que os usuários finais toouse hello "mais próximo" ponto de extremidade em termos da menor latência de rede hello.</span><span class="sxs-lookup"><span data-stu-id="d5599-110">**[Performance](#performance):** Select **Performance** when you have endpoints in different geographic locations and you want end users toouse hello "closest" endpoint in terms of hello lowest network latency.</span></span>
* <span data-ttu-id="d5599-111">**[Geográfico](#geographic):** selecione **geográfica** para que os usuários toospecific direcionado pontos de extremidade (do Azure, externa ou aninhadas) com base em qual localização geográfica sua consulta DNS se origina.</span><span class="sxs-lookup"><span data-stu-id="d5599-111">**[Geographic](#geographic):** Select **Geographic** so that users are directed toospecific endpoints (Azure, External, or Nested) based on which geographic location their DNS query originates from.</span></span> <span data-ttu-id="d5599-112">Isso permite cenários de tooenable de clientes do Traffic Manager onde saber região geográfica do usuário e roteá-los com base no que são importante.</span><span class="sxs-lookup"><span data-stu-id="d5599-112">This empowers Traffic Manager customers tooenable scenarios where knowing a user’s geographic region and routing them based on that is important.</span></span> <span data-ttu-id="d5599-113">Os exemplos incluem conformidade com normas de soberania de dados, localização de conteúdo e experiência do usuário, bem como medição do tráfego de diferentes regiões.</span><span class="sxs-lookup"><span data-stu-id="d5599-113">Examples include complying with data sovereignty mandates, localization of content & user experience and measuring traffic from different regions.</span></span>

<span data-ttu-id="d5599-114">Todos os perfis do Gerenciador de Tráfego incluem o monitoramento da integridade do ponto de extremidade e o failover automático do ponto de extremidade.</span><span class="sxs-lookup"><span data-stu-id="d5599-114">All Traffic Manager profiles include monitoring of endpoint health and automatic endpoint failover.</span></span> <span data-ttu-id="d5599-115">Para obter mais informações, consulte [Monitoramento do Ponto de Extremidade do Gerenciador de Tráfego](traffic-manager-monitoring.md).</span><span class="sxs-lookup"><span data-stu-id="d5599-115">For more information, see [Traffic Manager Endpoint Monitoring](traffic-manager-monitoring.md).</span></span> <span data-ttu-id="d5599-116">Um único perfil do Gerenciador de Tráfego pode usar apenas um único método de roteamento de tráfego.</span><span class="sxs-lookup"><span data-stu-id="d5599-116">A single Traffic Manager profile can use only one traffic routing method.</span></span> <span data-ttu-id="d5599-117">Você pode selecionar um método de roteamento de tráfego diferente para o seu perfil a qualquer momento.</span><span class="sxs-lookup"><span data-stu-id="d5599-117">You can select a different traffic routing method for your profile at any time.</span></span> <span data-ttu-id="d5599-118">As alterações são aplicadas em até um minuto e não há tempo de inatividade.</span><span class="sxs-lookup"><span data-stu-id="d5599-118">Changes are applied within one minute, and no downtime is incurred.</span></span> <span data-ttu-id="d5599-119">Métodos de roteamento de tráfego podem ser combinados usando perfis aninhados do Gerenciador de Tráfego.</span><span class="sxs-lookup"><span data-stu-id="d5599-119">Traffic-routing methods can be combined by using nested Traffic Manager profiles.</span></span> <span data-ttu-id="d5599-120">O aninhamento permite sofisticadas e flexíveis configurações de roteamento de tráfego que atendam às necessidades de saudação de maiores aplicativos complexos.</span><span class="sxs-lookup"><span data-stu-id="d5599-120">Nesting enables sophisticated and flexible traffic-routing configurations that meet hello needs of larger, complex applications.</span></span> <span data-ttu-id="d5599-121">Para obter mais informações, consulte [perfis aninhados do Gerenciador de Tráfego](traffic-manager-nested-profiles.md).</span><span class="sxs-lookup"><span data-stu-id="d5599-121">For more information, see [nested Traffic Manager profiles](traffic-manager-nested-profiles.md).</span></span>

## <span data-ttu-id="d5599-122"><a name = "priority"></a>Método de roteamento de tráfego por prioridade</span><span class="sxs-lookup"><span data-stu-id="d5599-122"><a name = "priority"></a>Priority traffic-routing method</span></span>

<span data-ttu-id="d5599-123">Geralmente uma organização deseja tooprovide confiabilidade de seus serviços Implantando um ou mais serviços de backup no caso do serviço primário fica.</span><span class="sxs-lookup"><span data-stu-id="d5599-123">Often an organization wants tooprovide reliability for its services by deploying one or more backup services in case their primary service goes down.</span></span> <span data-ttu-id="d5599-124">método Hello roteamento de tráfego 'Priority' permite que o Azure clientes tooeasily implementar esse padrão de failover.</span><span class="sxs-lookup"><span data-stu-id="d5599-124">hello 'Priority' traffic-routing method allows Azure customers tooeasily implement this failover pattern.</span></span>

![Método de roteamento de tráfego por “Prioridade” do Gerenciador de Tráfego do Azure][1]

<span data-ttu-id="d5599-126">Olá perfil do Traffic Manager contém uma lista priorizada de pontos de extremidade de serviço.</span><span class="sxs-lookup"><span data-stu-id="d5599-126">hello Traffic Manager profile contains a prioritized list of service endpoints.</span></span> <span data-ttu-id="d5599-127">Por padrão, o Traffic Manager envia todos os tráfego toohello (prioridade mais alta-) ponto de extremidade primário.</span><span class="sxs-lookup"><span data-stu-id="d5599-127">By default, Traffic Manager sends all traffic toohello primary (highest-priority) endpoint.</span></span> <span data-ttu-id="d5599-128">Se o ponto de extremidade Olá primário não estiver disponível, o Gerenciador de tráfego rotas Olá segundo ponto de extremidade do tráfego toohello.</span><span class="sxs-lookup"><span data-stu-id="d5599-128">If hello primary endpoint is not available, Traffic Manager routes hello traffic toohello second endpoint.</span></span> <span data-ttu-id="d5599-129">Se ambos os pontos de extremidade primário e secundário Olá não estiverem disponíveis, o tráfego de saudação vai toohello em terceiro lugar, e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="d5599-129">If both hello primary and secondary endpoints are not available, hello traffic goes toohello third, and so on.</span></span> <span data-ttu-id="d5599-130">Disponibilidade do ponto de extremidade de saudação é com base no status de saudação configurada (habilitado ou desabilitado) e Olá monitoramento de ponto de extremidade em andamento.</span><span class="sxs-lookup"><span data-stu-id="d5599-130">Availability of hello endpoint is based on hello configured status (enabled or disabled) and hello ongoing endpoint monitoring.</span></span>

### <a name="configuring-endpoints"></a><span data-ttu-id="d5599-131">Configurando pontos de extremidade</span><span class="sxs-lookup"><span data-stu-id="d5599-131">Configuring endpoints</span></span>

<span data-ttu-id="d5599-132">No Gerenciador de recursos do Azure, você configurar a prioridade de ponto de extremidade Olá explicitamente usando a propriedade de 'priority' hello para cada ponto de extremidade.</span><span class="sxs-lookup"><span data-stu-id="d5599-132">With Azure Resource Manager, you configure hello endpoint priority explicitly using hello 'priority' property for each endpoint.</span></span> <span data-ttu-id="d5599-133">Essa propriedade é um valor entre 1 e 1000.</span><span class="sxs-lookup"><span data-stu-id="d5599-133">This property is a value between 1 and 1000.</span></span> <span data-ttu-id="d5599-134">Valores mais baixos representam uma prioridade mais alta.</span><span class="sxs-lookup"><span data-stu-id="d5599-134">Lower values represent a higher priority.</span></span> <span data-ttu-id="d5599-135">Pontos de extremidade não podem compartilhar os valores de prioridade.</span><span class="sxs-lookup"><span data-stu-id="d5599-135">Endpoints cannot share priority values.</span></span> <span data-ttu-id="d5599-136">Definir propriedade de saudação é opcional.</span><span class="sxs-lookup"><span data-stu-id="d5599-136">Setting hello property is optional.</span></span> <span data-ttu-id="d5599-137">Quando omitido, uma prioridade padrão com base na ordem de ponto de extremidade de saudação é usada.</span><span class="sxs-lookup"><span data-stu-id="d5599-137">When omitted, a default priority based on hello endpoint order is used.</span></span>

##<span data-ttu-id="d5599-138"><a name = "weighted"></a>Método de roteamento de tráfego ponderado</span><span class="sxs-lookup"><span data-stu-id="d5599-138"><a name = "weighted"></a>Weighted traffic-routing method</span></span>
<span data-ttu-id="d5599-139">método Hello roteamento de tráfego 'Ponderado' permite tráfego toodistribute uniformemente ou toouse uma ponderação predefinida.</span><span class="sxs-lookup"><span data-stu-id="d5599-139">hello 'Weighted' traffic-routing method allows you toodistribute traffic evenly or toouse a pre-defined weighting.</span></span>

![Método de roteamento de tráfego “Ponderado” do Gerenciador de Tráfego do Azure][2]

<span data-ttu-id="d5599-141">Método roteamento de tráfego ponderada de hello, você atribuir um ponto de extremidade de tooeach peso na configuração do perfil do Traffic Manager hello.</span><span class="sxs-lookup"><span data-stu-id="d5599-141">In hello Weighted traffic-routing method, you assign a weight tooeach endpoint in hello Traffic Manager profile configuration.</span></span> <span data-ttu-id="d5599-142">peso de saudação é um inteiro de 1 too1000.</span><span class="sxs-lookup"><span data-stu-id="d5599-142">hello weight is an integer from 1 too1000.</span></span> <span data-ttu-id="d5599-143">Esse parâmetro é opcional.</span><span class="sxs-lookup"><span data-stu-id="d5599-143">This parameter is optional.</span></span> <span data-ttu-id="d5599-144">Se ele for omitido, os Gerenciadores de Tráfego usarão um peso padrão de “1”.</span><span class="sxs-lookup"><span data-stu-id="d5599-144">If omitted, Traffic Managers uses a default weight of '1'.</span></span>

<span data-ttu-id="d5599-145">Para cada consulta DNS recebida, o Gerenciador de Tráfego escolhe aleatoriamente um ponto de extremidade disponível.</span><span class="sxs-lookup"><span data-stu-id="d5599-145">For each DNS query received, Traffic Manager randomly chooses an available endpoint.</span></span> <span data-ttu-id="d5599-146">probabilidade de saudação de escolher um ponto de extremidade baseia-se em Olá pesos atribuídos tooall pontos de extremidade disponíveis.</span><span class="sxs-lookup"><span data-stu-id="d5599-146">hello probability of choosing an endpoint is based on hello weights assigned tooall available endpoints.</span></span> <span data-ttu-id="d5599-147">Mesmo usando Olá peso em todos os resultados de pontos de extremidade em um mesmo a distribuição de tráfego.</span><span class="sxs-lookup"><span data-stu-id="d5599-147">Using hello same weight across all endpoints results in an even traffic distribution.</span></span> <span data-ttu-id="d5599-148">Usando pesos superior ou inferiores em pontos de extremidade específicos faz com que esses toobe de pontos de extremidade mais ou menos frequente retornados em respostas DNS de saudação.</span><span class="sxs-lookup"><span data-stu-id="d5599-148">Using higher or lower weights on specific endpoints causes those endpoints toobe returned more or less frequently in hello DNS responses.</span></span>

<span data-ttu-id="d5599-149">método Hello ponderada permite que alguns cenários úteis:</span><span class="sxs-lookup"><span data-stu-id="d5599-149">hello weighted method enables some useful scenarios:</span></span>

* <span data-ttu-id="d5599-150">Atualização gradual do aplicativo: alocar uma percentagem do tráfego tooroute tooa novo ponto de extremidade e aumentar gradualmente o tráfego de Olá % too100 de tempo.</span><span class="sxs-lookup"><span data-stu-id="d5599-150">Gradual application upgrade: Allocate a percentage of traffic tooroute tooa new endpoint, and gradually increase hello traffic over time too100%.</span></span>
* <span data-ttu-id="d5599-151">TooAzure de migração do aplicativo: criar um perfil com pontos de extremidade do Azure e externos.</span><span class="sxs-lookup"><span data-stu-id="d5599-151">Application migration tooAzure: Create a profile with both Azure and external endpoints.</span></span> <span data-ttu-id="d5599-152">Ajuste o peso de saudação do hello pontos de extremidade tooprefer Olá novos pontos de extremidade.</span><span class="sxs-lookup"><span data-stu-id="d5599-152">Adjust hello weight of hello endpoints tooprefer hello new endpoints.</span></span>
* <span data-ttu-id="d5599-153">Intermitência de nuvem para capacidade adicional: expandir rapidamente uma implantação de local para nuvem hello, colocando atrás de um perfil do Gerenciador de tráfego.</span><span class="sxs-lookup"><span data-stu-id="d5599-153">Cloud-bursting for additional capacity: Quickly expand an on-premises deployment into hello cloud by putting it behind a Traffic Manager profile.</span></span> <span data-ttu-id="d5599-154">Quando precisar de capacidade extra na nuvem Olá, você pode adicionar ou permitir mais pontos de extremidade e especificar qual parte do tráfego vai tooeach de ponto de extremidade.</span><span class="sxs-lookup"><span data-stu-id="d5599-154">When you need extra capacity in hello cloud, you can add or enable more endpoints and specify what portion of traffic goes tooeach endpoint.</span></span>

<span data-ttu-id="d5599-155">Olá portal do Gerenciador de recursos do Azure dá suporte à configuração de saudação do roteamento de tráfego ponderado.</span><span class="sxs-lookup"><span data-stu-id="d5599-155">hello Resource Manager Azure portal supports hello configuration of weighted traffic routing.</span></span>  <span data-ttu-id="d5599-156">Você pode configurar pesos usando versões do Gerenciador de recursos de saudação do Azure PowerShell, CLI e Olá APIs REST.</span><span class="sxs-lookup"><span data-stu-id="d5599-156">You can configure weights using hello Resource Manager versions of Azure PowerShell, CLI, and hello REST APIs.</span></span>

<span data-ttu-id="d5599-157">É importante toounderstand que as respostas DNS são armazenados em cache por clientes em por Olá recursiva os servidores DNS que Olá clientes usam os nomes DNS tooresolve.</span><span class="sxs-lookup"><span data-stu-id="d5599-157">It is important toounderstand that DNS responses are cached by clients and by hello recursive DNS servers that hello clients use tooresolve DNS names.</span></span> <span data-ttu-id="d5599-158">Esse cache pode ter um impacto nas distribuições de tráfego ponderado.</span><span class="sxs-lookup"><span data-stu-id="d5599-158">This caching can have an impact on weighted traffic distributions.</span></span> <span data-ttu-id="d5599-159">Quando o número de saudação de clientes e servidores DNS recursivo é grande, a distribuição de tráfego funciona conforme o esperado.</span><span class="sxs-lookup"><span data-stu-id="d5599-159">When hello number of clients and recursive DNS servers is large, traffic distribution works as expected.</span></span> <span data-ttu-id="d5599-160">No entanto, quando o número de saudação de clientes ou servidores DNS recursivo é pequeno, o cache pode afetar significativamente a distribuição de tráfego hello.</span><span class="sxs-lookup"><span data-stu-id="d5599-160">However, when hello number of clients or recursive DNS servers is small, caching can significantly skew hello traffic distribution.</span></span>

<span data-ttu-id="d5599-161">Os casos de uso comuns incluem:</span><span class="sxs-lookup"><span data-stu-id="d5599-161">Common use cases include:</span></span>

* <span data-ttu-id="d5599-162">Ambientes de desenvolvimento e teste</span><span class="sxs-lookup"><span data-stu-id="d5599-162">Development and testing environments</span></span>
* <span data-ttu-id="d5599-163">Comunicações de aplicativo para aplicativo</span><span class="sxs-lookup"><span data-stu-id="d5599-163">Application-to-application communications</span></span>
* <span data-ttu-id="d5599-164">Aplicativos voltados para uma base de usuários estreita que compartilha uma infraestrutura comum de DNS recursivo (por exemplo, funcionários de uma empresa que se conectam por meio de um proxy)</span><span class="sxs-lookup"><span data-stu-id="d5599-164">Applications aimed at a narrow user-base that share a common recursive DNS infrastructure (for example, employees of company connecting through a proxy)</span></span>

<span data-ttu-id="d5599-165">Esses efeitos de cache DNS são comuns tooall tráfego com base em DNS roteamento sistemas, não apenas o Azure Traffic Manager.</span><span class="sxs-lookup"><span data-stu-id="d5599-165">These DNS caching effects are common tooall DNS-based traffic routing systems, not just Azure Traffic Manager.</span></span> <span data-ttu-id="d5599-166">Em alguns casos, limpar explicitamente Olá cache DNS pode fornecer uma solução alternativa.</span><span class="sxs-lookup"><span data-stu-id="d5599-166">In some cases, explicitly clearing hello DNS cache may provide a workaround.</span></span> <span data-ttu-id="d5599-167">Em outros casos, um método alternativo de roteamento de tráfego pode ser mais apropriado.</span><span class="sxs-lookup"><span data-stu-id="d5599-167">In other cases, an alternative traffic-routing method may be more appropriate.</span></span>

## <span data-ttu-id="d5599-168"><a name = "performance"></a>Método de roteamento de tráfego por desempenho</span><span class="sxs-lookup"><span data-stu-id="d5599-168"><a name = "performance"></a>Performance traffic-routing method</span></span>

<span data-ttu-id="d5599-169">Implantar os pontos de extremidade em dois ou mais locais globo Olá pode melhorar a capacidade de resposta de saudação de muitos aplicativos pelo roteamento tráfego toohello local tooyou 'mais próximo'.</span><span class="sxs-lookup"><span data-stu-id="d5599-169">Deploying endpoints in two or more locations across hello globe can improve hello responsiveness of many applications by routing traffic toohello location that is 'closest' tooyou.</span></span> <span data-ttu-id="d5599-170">Olá método de roteamento de tráfego 'Desempenho' fornece essa funcionalidade.</span><span class="sxs-lookup"><span data-stu-id="d5599-170">hello 'Performance' traffic-routing method provides this capability.</span></span>

![Método de roteamento de tráfego por “Desempenho” do Gerenciador de Tráfego do Azure][3]

<span data-ttu-id="d5599-172">ponto de extremidade 'mais próximo' Hello não é necessariamente mais próximo, conforme medido pela distância geográfica.</span><span class="sxs-lookup"><span data-stu-id="d5599-172">hello 'closest' endpoint is not necessarily closest as measured by geographic distance.</span></span> <span data-ttu-id="d5599-173">Em vez disso, Olá método de roteamento de tráfego 'Desempenho' determina o ponto de extremidade mais próximo Olá medindo a latência de rede.</span><span class="sxs-lookup"><span data-stu-id="d5599-173">Instead, hello 'Performance' traffic-routing method determines hello closest endpoint by measuring network latency.</span></span> <span data-ttu-id="d5599-174">Gerenciador de tráfego mantém um tempo tabela de latência de Internet tootrack Olá ida e volta entre os intervalos de endereços IP e cada data center do Azure.</span><span class="sxs-lookup"><span data-stu-id="d5599-174">Traffic Manager maintains an Internet Latency Table tootrack hello round-trip time between IP address ranges and each Azure datacenter.</span></span>

<span data-ttu-id="d5599-175">Gerenciador de tráfego procura Olá endereço IP de origem da solicitação DNS entrada hello na tabela de latência de Internet de saudação.</span><span class="sxs-lookup"><span data-stu-id="d5599-175">Traffic Manager looks up hello source IP address of hello incoming DNS request in hello Internet Latency Table.</span></span> <span data-ttu-id="d5599-176">Gerenciador de tráfego escolhe um ponto de extremidade disponível no hello datacenter do Azure que tem a menor latência Olá para esse intervalo de endereço IP e retorna o ponto de extremidade em Olá resposta DNS.</span><span class="sxs-lookup"><span data-stu-id="d5599-176">Traffic Manager chooses an available endpoint in hello Azure datacenter that has hello lowest latency for that IP address range, then returns that endpoint in hello DNS response.</span></span>

<span data-ttu-id="d5599-177">Como explicamos em [Como funciona o Gerenciador de Tráfego](traffic-manager-overview.md#how-traffic-manager-works), o Gerenciador de Tráfego não recebe consultas DNS diretamente de clientes.</span><span class="sxs-lookup"><span data-stu-id="d5599-177">As explained in [How Traffic Manager Works](traffic-manager-overview.md#how-traffic-manager-works), Traffic Manager does not receive DNS queries directly from clients.</span></span> <span data-ttu-id="d5599-178">Em vez disso, as consultas DNS provenientes de serviço DNS recursivo Olá clientes Olá são toouse configurado.</span><span class="sxs-lookup"><span data-stu-id="d5599-178">Rather, DNS queries come from hello recursive DNS service that hello clients are configured toouse.</span></span> <span data-ttu-id="d5599-179">Portanto, hello endereço usado toodetermine Olá 'mais próximo' ponto de extremidade IP não é endereço IP saudação do cliente, mas ele é o endereço IP de saudação do serviço DNS recursivo hello.</span><span class="sxs-lookup"><span data-stu-id="d5599-179">Therefore, hello IP address used toodetermine hello 'closest' endpoint is not hello client's IP address, but it is hello IP address of hello recursive DNS service.</span></span> <span data-ttu-id="d5599-180">Na prática, esse endereço IP é um proxy válido para cliente hello.</span><span class="sxs-lookup"><span data-stu-id="d5599-180">In practice, this IP address is a good proxy for hello client.</span></span>


<span data-ttu-id="d5599-181">Gerenciador de tráfego regularmente atualizações Olá tooaccount da tabela de latência de Internet para alterações em Olá Internet global e novas regiões do Azure.</span><span class="sxs-lookup"><span data-stu-id="d5599-181">Traffic Manager regularly updates hello Internet Latency Table tooaccount for changes in hello global Internet and new Azure regions.</span></span> <span data-ttu-id="d5599-182">No entanto, desempenho do aplicativo varia de acordo com variações em tempo real de carga entre Olá da Internet.</span><span class="sxs-lookup"><span data-stu-id="d5599-182">However, application performance varies based on real-time variations in load across hello Internet.</span></span> <span data-ttu-id="d5599-183">O roteamento de tráfego por desempenho não monitora a carga em um ponto de extremidade de serviço específico.</span><span class="sxs-lookup"><span data-stu-id="d5599-183">Performance traffic-routing does not monitor load on a given service endpoint.</span></span> <span data-ttu-id="d5599-184">No entanto, se um ponto de extremidade ficar indisponível, o Gerenciador de Tráfego não incluirá isso nas respostas a consultas DNS.</span><span class="sxs-lookup"><span data-stu-id="d5599-184">However, if an endpoint becomes unavailable, Traffic Manager does not include it in DNS query responses.</span></span>


<span data-ttu-id="d5599-185">Toonote pontos:</span><span class="sxs-lookup"><span data-stu-id="d5599-185">Points toonote:</span></span>

* <span data-ttu-id="d5599-186">Se seu perfil contiver vários pontos de extremidade no hello mesma região do Azure, em seguida, o Traffic Manager distribui o tráfego igualmente entre pontos de extremidade disponíveis nessa região hello.</span><span class="sxs-lookup"><span data-stu-id="d5599-186">If your profile contains multiple endpoints in hello same Azure region, then Traffic Manager distributes traffic evenly across hello available endpoints in that region.</span></span> <span data-ttu-id="d5599-187">Se preferir uma distribuição de tráfego diferente em uma região, use os [perfis aninhados do Gerenciador de Tráfego](traffic-manager-nested-profiles.md).</span><span class="sxs-lookup"><span data-stu-id="d5599-187">If you prefer a different traffic distribution within a region, you can use [nested Traffic Manager profiles](traffic-manager-nested-profiles.md).</span></span>
* <span data-ttu-id="d5599-188">Se todos habilitados os pontos de extremidade mais próximo de saudação região do Azure está degradado, Gerenciador de tráfego move pontos de extremidade do tráfego toohello na próxima região do Azure mais próximo hello.</span><span class="sxs-lookup"><span data-stu-id="d5599-188">If all enabled endpoints in hello closest Azure region are degraded, Traffic Manager moves traffic toohello endpoints in hello next closest Azure region.</span></span> <span data-ttu-id="d5599-189">Se você quiser toodefine uma sequência de failover preferencial, use [aninhados perfis do Traffic Manager](traffic-manager-nested-profiles.md).</span><span class="sxs-lookup"><span data-stu-id="d5599-189">If you want toodefine a preferred failover sequence, use [nested Traffic Manager profiles](traffic-manager-nested-profiles.md).</span></span>
* <span data-ttu-id="d5599-190">Ao usar o método de roteamento de tráfego Olá desempenho com pontos de extremidade externos ou pontos de extremidade aninhados, você precisa toospecify localização Olá desses pontos.</span><span class="sxs-lookup"><span data-stu-id="d5599-190">When using hello Performance traffic routing method with external endpoints or nested endpoints, you need toospecify hello location of those endpoints.</span></span> <span data-ttu-id="d5599-191">Escolha a implantação de tooyour mais próxima do hello região do Azure.</span><span class="sxs-lookup"><span data-stu-id="d5599-191">Choose hello Azure region closest tooyour deployment.</span></span> <span data-ttu-id="d5599-192">Esses locais são valores de Olá Olá tabela de latência de Internet com suporte.</span><span class="sxs-lookup"><span data-stu-id="d5599-192">Those locations are hello values supported by hello Internet Latency Table.</span></span>
* <span data-ttu-id="d5599-193">algoritmo de saudação que escolhe o ponto de extremidade de saudação é determinístico.</span><span class="sxs-lookup"><span data-stu-id="d5599-193">hello algorithm that chooses hello endpoint is deterministic.</span></span> <span data-ttu-id="d5599-194">Repetido consultas DNS de saudação mesmo cliente é direcionados toohello mesmo ponto de extremidade.</span><span class="sxs-lookup"><span data-stu-id="d5599-194">Repeated DNS queries from hello same client are directed toohello same endpoint.</span></span> <span data-ttu-id="d5599-195">Normalmente, os clientes usam servidores DNS recursivo diferentes quando estão viajando.</span><span class="sxs-lookup"><span data-stu-id="d5599-195">Typically, clients use different recursive DNS servers when traveling.</span></span> <span data-ttu-id="d5599-196">cliente Olá pode ser roteado tooa de ponto de extremidade diferente.</span><span class="sxs-lookup"><span data-stu-id="d5599-196">hello client may be routed tooa different endpoint.</span></span> <span data-ttu-id="d5599-197">Roteamento também pode ser afetado por atualizações toohello tabela de latência de Internet.</span><span class="sxs-lookup"><span data-stu-id="d5599-197">Routing can also be affected by updates toohello Internet Latency Table.</span></span> <span data-ttu-id="d5599-198">Portanto, Olá desempenho método de roteamento de tráfego não garante que um cliente sempre é roteada toohello mesmo ponto de extremidade.</span><span class="sxs-lookup"><span data-stu-id="d5599-198">Therefore, hello Performance traffic-routing method does not guarantee that a client is always routed toohello same endpoint.</span></span>
* <span data-ttu-id="d5599-199">Quando altera Olá tabela de latência de Internet, você pode perceber que alguns clientes são direcionados tooa de ponto de extremidade diferente.</span><span class="sxs-lookup"><span data-stu-id="d5599-199">When hello Internet Latency Table changes, you may notice that some clients are directed tooa different endpoint.</span></span> <span data-ttu-id="d5599-200">Essa alteração de roteamento é mais precisa com base nos dados de latência atuais.</span><span class="sxs-lookup"><span data-stu-id="d5599-200">This routing change is more accurate based on current latency data.</span></span> <span data-ttu-id="d5599-201">Essas atualizações são essenciais toomaintain precisão de saudação de desempenho como Olá que Internet continuamente evolui-roteamento de tráfego.</span><span class="sxs-lookup"><span data-stu-id="d5599-201">These updates are essential toomaintain hello accuracy of Performance traffic-routing as hello Internet continually evolves.</span></span>

## <span data-ttu-id="d5599-202"><a name = "geographic"></a>Método de roteamento de tráfego geográfico</span><span class="sxs-lookup"><span data-stu-id="d5599-202"><a name = "geographic"></a>Geographic traffic-routing method</span></span>

<span data-ttu-id="d5599-203">Perfis do Traffic Manager podem ser configurado toouse Olá geográfico método de roteamento para que os usuários são direcionados a pontos de extremidade toospecific (do Azure ou externas aninhadas) com base em qual localização geográfica, sua consulta DNS se origina de.</span><span class="sxs-lookup"><span data-stu-id="d5599-203">Traffic Manager profiles can be configured toouse hello Geographic routing method so that users are directed toospecific endpoints (Azure, External or Nested) based on which geographic location their DNS query originates from.</span></span> <span data-ttu-id="d5599-204">Isso permite cenários de tooenable de clientes do Traffic Manager onde saber região geográfica do usuário e roteá-los com base no que são importante.</span><span class="sxs-lookup"><span data-stu-id="d5599-204">This empowers Traffic Manager customers tooenable scenarios where knowing a user’s geographic region and routing them based on that is important.</span></span> <span data-ttu-id="d5599-205">Os exemplos incluem conformidade com normas de soberania de dados, localização de conteúdo e experiência do usuário, bem como medição do tráfego de diferentes regiões.</span><span class="sxs-lookup"><span data-stu-id="d5599-205">Examples include complying with data sovereignty mandates, localization of content & user experience and measuring traffic from different regions.</span></span>
<span data-ttu-id="d5599-206">Quando um perfil é configurado para roteamento geográfico, cada ponto de extremidade associado perfil precisa toohave um conjunto de regiões geográficas atribuídos tooit.</span><span class="sxs-lookup"><span data-stu-id="d5599-206">When a profile is configured for geographic routing, each endpoint associated with that profile needs toohave a set of geographic regions assigned tooit.</span></span> <span data-ttu-id="d5599-207">Uma região geográfica pode estar nos seguintes níveis de granularidade</span><span class="sxs-lookup"><span data-stu-id="d5599-207">A geographic region can be at following levels of granularity</span></span> 
- <span data-ttu-id="d5599-208">Mundo – qualquer região</span><span class="sxs-lookup"><span data-stu-id="d5599-208">World– any region</span></span>
- <span data-ttu-id="d5599-209">Agrupamento Regional – por exemplo, África, Oriente Médio, Austrália/Pacífico etc.</span><span class="sxs-lookup"><span data-stu-id="d5599-209">Regional Grouping – for example, Africa, Middle East, Australia/Pacific etc.</span></span> 
- <span data-ttu-id="d5599-210">País/região – por exemplo, Irlanda, Peru, RAE de Hong Kong etc.</span><span class="sxs-lookup"><span data-stu-id="d5599-210">Country/Region – for example, Ireland, Peru, Hong Kong SAR etc.</span></span> 
- <span data-ttu-id="d5599-211">Estado/Província – por exemplo, EUA-Califórnia, Austrália-Queensland, Canadá-Alberta etc. (observação: esse nível de granularidade conta com suporte apenas em Estados/províncias da Austrália, do Canadá, do Reino Unido e dos EUA).</span><span class="sxs-lookup"><span data-stu-id="d5599-211">State/Province – for example, USA-California, Australia-Queensland, Canada-Alberta etc. (note: this granularity level is supported only for states / provinces in Australia, Canada, UK, and USA).</span></span>

<span data-ttu-id="d5599-212">Quando uma região ou um conjunto de regiões é atribuído o ponto de extremidade tooan, todas as solicitações dessas regiões obtém toothat somente roteado de ponto de extremidade.</span><span class="sxs-lookup"><span data-stu-id="d5599-212">When a region or a set of regions is assigned tooan endpoint, any requests from those regions gets routed only toothat endpoint.</span></span> <span data-ttu-id="d5599-213">O Traffic Manager usa o endereço IP de origem Olá Olá DNS consulta toodetermine Olá da região do qual um usuário está consultando de – geralmente esse é o endereço IP de saudação do resolvedor DNS local Olá fazendo consulta Olá em nome de usuário de saudação.</span><span class="sxs-lookup"><span data-stu-id="d5599-213">Traffic Manager uses hello source IP address of hello DNS query toodetermine hello region from which a user is querying from – usually this is hello IP address of hello local DNS resolver doing hello query on behalf of hello user.</span></span>  

![Método de roteamento de tráfego "Geográfico" do Gerenciador de Tráfego do Azure](./media/traffic-manager-routing-methods/geographic.png)

<span data-ttu-id="d5599-215">O Traffic Manager lê o endereço IP de origem da saudação de consulta DNS hello e decide qual região geográfica se origina.</span><span class="sxs-lookup"><span data-stu-id="d5599-215">Traffic Manager reads hello source IP address of hello DNS query and decides which geographic region it is originating from.</span></span> <span data-ttu-id="d5599-216">Em seguida, parece toosee se houver um ponto de extremidade que tem este tooit região geográfica mapeado.</span><span class="sxs-lookup"><span data-stu-id="d5599-216">It then looks toosee if there is an endpoint that has this geographic region mapped tooit.</span></span> <span data-ttu-id="d5599-217">Essa pesquisa começa no nível de granularidade mais baixo de saudação (estado/província onde ele é suportado, ou no nível de país/região Olá) e vai todos Olá um nível mais alto toohello, que é **World**.</span><span class="sxs-lookup"><span data-stu-id="d5599-217">This lookup starts at hello lowest granularity level (State/Province where it is supported, else at hello Country/Region level) and goes all hello way up toohello highest level, which is **World**.</span></span> <span data-ttu-id="d5599-218">primeira correspondência de saudação encontrada usar essa passagem é designado como Olá tooreturn de ponto de extremidade na resposta de consulta de saudação.</span><span class="sxs-lookup"><span data-stu-id="d5599-218">hello first match found using this traversal is designated as hello endpoint tooreturn in hello query response.</span></span> <span data-ttu-id="d5599-219">Quando houver correspondência com um ponto de extremidade do tipo Aninhado, um ponto de extremidade nesse perfil filho será retornado, com base em seu método de roteamento.</span><span class="sxs-lookup"><span data-stu-id="d5599-219">When matching with a Nested type endpoint, an endpoint within that child profile is returned, based on its routing method.</span></span> <span data-ttu-id="d5599-220">Olá pontos a seguir é aplicáveis toothis comportamento:</span><span class="sxs-lookup"><span data-stu-id="d5599-220">hello following points are applicable toothis behavior:</span></span>

- <span data-ttu-id="d5599-221">Uma região geográfica pode ser mapeado somente tooone ponto de extremidade em um perfil do Gerenciador de tráfego quando o tipo de roteamento Olá geográfica roteamento.</span><span class="sxs-lookup"><span data-stu-id="d5599-221">A geographic region can be mapped only tooone endpoint in a Traffic Manager profile when hello routing type is Geographic Routing.</span></span> <span data-ttu-id="d5599-222">Isso garante que o roteamento dos usuários seja determinístico e que os clientes possam habilitar cenários que exijam limites geográficos inequívocos.</span><span class="sxs-lookup"><span data-stu-id="d5599-222">This ensures that routing of users is deterministic, and customers can enable scenarios that require unambiguous geographic boundaries.</span></span>
- <span data-ttu-id="d5599-223">Se a região do usuário trata mapeamento geográfico em duas empresas diferentes, o Traffic Manager seleciona o ponto de extremidade de saudação com granularidade menor hello e não considera rotear solicitações de toohello essa região outro ponto de extremidade.</span><span class="sxs-lookup"><span data-stu-id="d5599-223">If a user’s region comes under two different endpoints’ geographic mapping, Traffic Manager selects hello endpoint with hello lowest granularity and does not consider routing requests from that region toohello other endpoint.</span></span> <span data-ttu-id="d5599-224">Por exemplo, considere um perfil de tipo de Roteamento Geográfico com dois pontos de extremidade: Ponto de Extremidade 1 e Ponto de Extremidade 2.</span><span class="sxs-lookup"><span data-stu-id="d5599-224">For example, consider a Geographic Routing type profile with two endpoints - Endpoint1 and Endpoint2.</span></span> <span data-ttu-id="d5599-225">Endpoint1 está configurado tooreceive tráfego da Irlanda e Endpoint2 está configurado tooreceive tráfego na Europa.</span><span class="sxs-lookup"><span data-stu-id="d5599-225">Endpoint1 is configured tooreceive traffic from Ireland and Endpoint2 is configured tooreceive traffic from Europe.</span></span> <span data-ttu-id="d5599-226">Se uma solicitação se origina da Irlanda, é sempre tooEndpoint1 roteadas.</span><span class="sxs-lookup"><span data-stu-id="d5599-226">If a request originates from Ireland, it is always routed tooEndpoint1.</span></span>
- <span data-ttu-id="d5599-227">Como uma região pode ser mapeado somente de ponto de extremidade de tooone, o Traffic Manager retorna independentemente se o ponto de extremidade hello está íntegro ou não.</span><span class="sxs-lookup"><span data-stu-id="d5599-227">Since a region can be mapped only tooone endpoint, Traffic Manager returns it regardless of whether hello endpoint is healthy or not.</span></span>

    >[!IMPORTANT]
    ><span data-ttu-id="d5599-228">É altamente recomendável que os clientes que usam o método de roteamento geográfico hello associá-lo com pontos de extremidade do hello aninhadas tipo que tem perfis filho que contém pelo menos dois pontos de extremidade dentro de cada.</span><span class="sxs-lookup"><span data-stu-id="d5599-228">It is strongly recommended that customers using hello geographic routing method associate it with hello Nested type endpoints that has child profiles containing at least two endpoints within each.</span></span>
- <span data-ttu-id="d5599-229">Se for encontrada uma correspondência de ponto de extremidade e esse ponto de extremidade é Olá **parado** estado, o Traffic Manager retorna uma resposta NODATA.</span><span class="sxs-lookup"><span data-stu-id="d5599-229">If an endpoint match is found and that endpoint is in hello **Stopped** state, Traffic Manager returns a NODATA response.</span></span> <span data-ttu-id="d5599-230">Nesse caso, nenhum pesquisas adicionais é feita mais acima na hierarquia de região geográfica hello.</span><span class="sxs-lookup"><span data-stu-id="d5599-230">In this case, no further lookups is made higher up in hello geographic region hierarchy.</span></span> <span data-ttu-id="d5599-231">Esse comportamento também é aplicável para os tipos de ponto de extremidade aninhada quando o perfil filho hello está no hello **parado** ou **desabilitado** estado.</span><span class="sxs-lookup"><span data-stu-id="d5599-231">This behavior is also applicable for nested endpoint types when hello child profile is in hello **Stopped** or **Disabled** state.</span></span>
- <span data-ttu-id="d5599-232">Se um ponto de extremidade exibe um **desabilitado** status, ele não será incluído na região Olá processo de correspondência.</span><span class="sxs-lookup"><span data-stu-id="d5599-232">If an endpoint displays a **Disabled** status, it won’t be included in hello region matching process.</span></span> <span data-ttu-id="d5599-233">Esse comportamento também é aplicável para os tipos de ponto de extremidade aninhada ao ponto de extremidade de saudação é Olá **desabilitado** estado.</span><span class="sxs-lookup"><span data-stu-id="d5599-233">This behavior is also applicable for nested endpoint types when hello endpoint is in hello **Disabled** state.</span></span>
- <span data-ttu-id="d5599-234">Se uma consulta estiver vindo proveniente de uma região geográfica que não tenha mapeamento no perfil, o Gerenciador de Tráfego retornará uma resposta NODATA.</span><span class="sxs-lookup"><span data-stu-id="d5599-234">If a query is coming from a geographic region that has no mapping in that profile, Traffic Manager returns a NODATA response.</span></span> <span data-ttu-id="d5599-235">Portanto, é altamente recomendável que os clientes usem o roteamento geográfico com um ponto de extremidade, o ideal é do tipo aninhado pelo menos dois pontos de extremidade no perfil de filho hello, com a região Olá **World** atribuído tooit.</span><span class="sxs-lookup"><span data-stu-id="d5599-235">Therefore, it is strongly recommended that customers use geographic routing with one endpoint, ideally of type Nested with at least two endpoints within hello child profile, with hello region **World** assigned tooit.</span></span> <span data-ttu-id="d5599-236">Isso também garante que os endereços IP que não mapeiam tooa região são manipulados.</span><span class="sxs-lookup"><span data-stu-id="d5599-236">This also ensures that any IP addresses that do not map tooa region are handled.</span></span>

<span data-ttu-id="d5599-237">Como explicamos em [Como funciona o Gerenciador de Tráfego](traffic-manager-how-traffic-manager-works.md), o Gerenciador de Tráfego não recebe consultas DNS diretamente de clientes.</span><span class="sxs-lookup"><span data-stu-id="d5599-237">As explained in [How Traffic Manager Works](traffic-manager-how-traffic-manager-works.md), Traffic Manager does not receive DNS queries directly from clients.</span></span> <span data-ttu-id="d5599-238">Em vez disso, as consultas DNS provenientes de serviço DNS recursivo Olá clientes Olá são toouse configurado.</span><span class="sxs-lookup"><span data-stu-id="d5599-238">Rather, DNS queries come from hello recursive DNS service that hello clients are configured toouse.</span></span> <span data-ttu-id="d5599-239">Portanto, Olá IP endereço usado toodetermine Olá região não é Olá o endereço IP do cliente, mas ele é o endereço IP de saudação do serviço DNS recursivo hello.</span><span class="sxs-lookup"><span data-stu-id="d5599-239">Therefore, hello IP address used toodetermine hello region is not hello client's IP address, but it is hello IP address of hello recursive DNS service.</span></span> <span data-ttu-id="d5599-240">Na prática, esse endereço IP é um proxy válido para cliente hello.</span><span class="sxs-lookup"><span data-stu-id="d5599-240">In practice, this IP address is a good proxy for hello client.</span></span>


## <a name="next-steps"></a><span data-ttu-id="d5599-241">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="d5599-241">Next steps</span></span>

<span data-ttu-id="d5599-242">Saiba como aplicativos de alta disponibilidade toodevelop usando [monitoramento de ponto de extremidade do Traffic Manager](traffic-manager-monitoring.md)</span><span class="sxs-lookup"><span data-stu-id="d5599-242">Learn how toodevelop high-availability applications using [Traffic Manager endpoint monitoring](traffic-manager-monitoring.md)</span></span>

<span data-ttu-id="d5599-243">Saiba como muito[criar um perfil do Gerenciador de tráfego](traffic-manager-create-profile.md)</span><span class="sxs-lookup"><span data-stu-id="d5599-243">Learn how too[create a Traffic Manager profile](traffic-manager-create-profile.md)</span></span>

<!--Image references-->
[1]: ./media/traffic-manager-routing-methods/priority.png
[2]: ./media/traffic-manager-routing-methods/weighted.png
[3]: ./media/traffic-manager-routing-methods/performance.png



