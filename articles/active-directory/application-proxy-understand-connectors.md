---
title: "Noções básicas sobre conectores do Proxy de Aplicativo Azure AD | Microsoft Docs"
description: "Cobre as noções básicas sobre os conectores do Proxy de Aplicativo Azure AD."
services: active-directory
documentationcenter: 
author: kgremban
manager: femila
ms.assetid: 
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/03/2017
ms.author: kgremban
ms.reviewer: harshja
ms.custom: it-pro
ms.openlocfilehash: c18d0a2bff654573e6e28a7cd7fad853b3a11346
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/18/2017
---
# <a name="understand-azure-ad-application-proxy-connectors"></a><span data-ttu-id="029ee-103">Noções básicas sobre conectores de Proxy de Aplicativo Azure AD</span><span class="sxs-lookup"><span data-stu-id="029ee-103">Understand Azure AD Application Proxy connectors</span></span>

<span data-ttu-id="029ee-104">Os conectores são o que torna o Proxy de Aplicativo Azure AD possível.</span><span class="sxs-lookup"><span data-stu-id="029ee-104">Connectors are what make Azure AD Application Proxy possible.</span></span> <span data-ttu-id="029ee-105">Eles são simples, fáceis de implantar e manter, além de superpotentes.</span><span class="sxs-lookup"><span data-stu-id="029ee-105">They are simple, easy to deploy and maintain, and super powerful.</span></span> <span data-ttu-id="029ee-106">Este artigo aborda o que são conectores, como eles funcionam e algumas sugestões sobre como otimizar sua implantação.</span><span class="sxs-lookup"><span data-stu-id="029ee-106">This article discusses what connectors are, how they work, and some suggestions for how to optimize your deployment.</span></span> 

## <a name="what-is-an-application-proxy-connector"></a><span data-ttu-id="029ee-107">O que é um conector do Proxy de Aplicativo</span><span class="sxs-lookup"><span data-stu-id="029ee-107">What is an Application Proxy connector</span></span>

<span data-ttu-id="029ee-108">Conectores são agentes leves que ficam no local e facilitam a conexão de saída para o serviço Proxy de Aplicativo.</span><span class="sxs-lookup"><span data-stu-id="029ee-108">Connectors are lightweight agents that sit on-premises and facilitate the outbound connection to the Application Proxy service.</span></span> <span data-ttu-id="029ee-109">Os conectores devem ser instalados em um servidor Windows que tenha acesso ao aplicativo de back-end.</span><span class="sxs-lookup"><span data-stu-id="029ee-109">Connectors must be installed on a Windows Server that has access to the backend application.</span></span> <span data-ttu-id="029ee-110">Você pode organizar os conectores em grupos de conector, com cada grupo tratando o tráfego de aplicativos específicos.</span><span class="sxs-lookup"><span data-stu-id="029ee-110">You can organize connectors into connector groups, with each group handling traffic to specific applications.</span></span> <span data-ttu-id="029ee-111">Os conectores fazem o balanceamento de carga automaticamente e podem ajudar a otimizar sua estrutura de rede.</span><span class="sxs-lookup"><span data-stu-id="029ee-111">Connectors load-balance automatically, and can help to optimize your network structure.</span></span> 

## <a name="requirements-and-deployment"></a><span data-ttu-id="029ee-112">Requisitos e implantação</span><span class="sxs-lookup"><span data-stu-id="029ee-112">Requirements and deployment</span></span>

<span data-ttu-id="029ee-113">Para implantar o Proxy de Aplicativo com êxito, você precisa de pelo menos um conector, mas recomendamos dois ou mais para uma maior capacidade de recuperação.</span><span class="sxs-lookup"><span data-stu-id="029ee-113">To deploy Application Proxy successfully, you need at least one connector, but we recommend two or more for greater resiliency.</span></span> <span data-ttu-id="029ee-114">Instale o conector em um Windows Server 2012 R2 ou em uma computador de 2016.</span><span class="sxs-lookup"><span data-stu-id="029ee-114">Install the connector on a Windows Server 2012 R2 or 2016 machine.</span></span> <span data-ttu-id="029ee-115">O conector deve ser capaz de se comunicar com o serviço Proxy de Aplicativo e com os aplicativos locais que você publicar.</span><span class="sxs-lookup"><span data-stu-id="029ee-115">The connector needs to be able to communicate with the Application Proxy service as well as the on-premises applications that you publish.</span></span> 

<span data-ttu-id="029ee-116">Para saber mais sobre os requisitos de rede para o servidor de conector, confira [Introdução ao Proxy de Aplicativo e instalar um conector](active-directory-application-proxy-enable.md).</span><span class="sxs-lookup"><span data-stu-id="029ee-116">For more information about the network requirements for the connector server, see [Get started with Application Proxy and install a connector](active-directory-application-proxy-enable.md).</span></span>

## <a name="maintenance"></a><span data-ttu-id="029ee-117">Manutenção </span><span class="sxs-lookup"><span data-stu-id="029ee-117">Maintenance</span></span>
<span data-ttu-id="029ee-118">Os conectores e o serviço cuidam de todas as tarefas de alta disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="029ee-118">The connectors and the service take care of all the high availability tasks.</span></span> <span data-ttu-id="029ee-119">Eles podem ser adicionados ou removidos dinamicamente.</span><span class="sxs-lookup"><span data-stu-id="029ee-119">They can be added or removed dynamically.</span></span> <span data-ttu-id="029ee-120">Sempre que uma nova solicitação chega, ela é roteada para um dos conectores que está disponível no momento.</span><span class="sxs-lookup"><span data-stu-id="029ee-120">Each time a new request arrives it is routed to one of the connectors that is currently available.</span></span> <span data-ttu-id="029ee-121">Se um conector estiver temporariamente indisponível, ele não responderá a esse tráfego.</span><span class="sxs-lookup"><span data-stu-id="029ee-121">If a connector is temporarily not available, it doesn't respond to this traffic.</span></span>

<span data-ttu-id="029ee-122">Os conectores são sem estado e não têm nenhum dado de configuração no computador.</span><span class="sxs-lookup"><span data-stu-id="029ee-122">The connectors are stateless and have no configuration data on the machine.</span></span> <span data-ttu-id="029ee-123">Os únicos dados que eles armazenam são as configurações para conectar o serviço e seu certificado de autenticação.</span><span class="sxs-lookup"><span data-stu-id="029ee-123">The only data they store is the settings for connecting the service and its authentication certificate.</span></span> <span data-ttu-id="029ee-124">Quando se conectam ao serviço, eles extraem todos os dados de configuração necessários e os atualizam a cada dois minutos.</span><span class="sxs-lookup"><span data-stu-id="029ee-124">When they connect to the service, they pull all the required configuration data and refresh it every couple of minutes.</span></span>

<span data-ttu-id="029ee-125">Os conectores também sondam o servidor para descobrir se há uma versão mais recente do conector.</span><span class="sxs-lookup"><span data-stu-id="029ee-125">Connectors also poll the server to find out whether there is a newer version of the connector.</span></span> <span data-ttu-id="029ee-126">Se for encontrada, os próprios conectores se atualizam.</span><span class="sxs-lookup"><span data-stu-id="029ee-126">If one is found, the connectors update themselves.</span></span>

<span data-ttu-id="029ee-127">É possível monitorar os conectores no computador em que eles estão em execução, usando o log de eventos e os contadores de desempenho.</span><span class="sxs-lookup"><span data-stu-id="029ee-127">You can monitor your connectors from the machine they are running on, using either the event log and performance counters.</span></span> <span data-ttu-id="029ee-128">Ou você pode exibir o status da página do Proxy de Aplicativo do portal do Azure:</span><span class="sxs-lookup"><span data-stu-id="029ee-128">Or you can view their status from the Application Proxy page of the Azure portal:</span></span>

 ![Conectores do Proxy de Aplicativo Azure AD](./media/application-proxy-understand-connectors/app-proxy-connectors.png)

<span data-ttu-id="029ee-130">Não é necessário excluir manualmente os conectores que não foram utilizados.</span><span class="sxs-lookup"><span data-stu-id="029ee-130">You don't have to manually delete connectors that are unused.</span></span> <span data-ttu-id="029ee-131">Quando um conector está em execução, ele permanece ativo, pois se conecta ao serviço.</span><span class="sxs-lookup"><span data-stu-id="029ee-131">When a connector is running, it remains active as it connects to the service.</span></span> <span data-ttu-id="029ee-132">Os conectores não utilizados são marcados como _inativos_ e são removidos depois de 10 dias de inatividade.</span><span class="sxs-lookup"><span data-stu-id="029ee-132">Unused connectors are tagged as _inactive_ and are removed after 10 days of inactivity.</span></span> <span data-ttu-id="029ee-133">No entanto, se você quiser desinstalar um conector, desinstale o serviço Conector e o serviço Atualizador do servidor.</span><span class="sxs-lookup"><span data-stu-id="029ee-133">If you do want to uninstall a connector, though, uninstall both the Connector service and the Updater service from the server.</span></span> <span data-ttu-id="029ee-134">Reinicie o computador para remover completamente o serviço.</span><span class="sxs-lookup"><span data-stu-id="029ee-134">Restart your computer to fully remove the service.</span></span>

## <a name="automatic-updates"></a><span data-ttu-id="029ee-135">Atualizações automáticas</span><span class="sxs-lookup"><span data-stu-id="029ee-135">Automatic updates</span></span>

<span data-ttu-id="029ee-136">O Azure AD fornece atualizações automáticas para todos conectores que você implanta.</span><span class="sxs-lookup"><span data-stu-id="029ee-136">Azure AD provides automatic updates for all the connectors that you deploy.</span></span> <span data-ttu-id="029ee-137">Desde que o serviço Atualizador do Conector de Proxy de Aplicativo esteja em execução, os conectores são atualizados automaticamente.</span><span class="sxs-lookup"><span data-stu-id="029ee-137">As long as the Application Proxy Connector Updater service is running, your connectors update automatically.</span></span> <span data-ttu-id="029ee-138">Caso você não veja o serviço Atualizador do Conector no servidor, precisará [reinstalar o conector](active-directory-application-proxy-enable.md) para obter todas as atualizações.</span><span class="sxs-lookup"><span data-stu-id="029ee-138">If you don’t see the Connector Updater service on your server, you need to [reinstall your connector](active-directory-application-proxy-enable.md) to get any updates.</span></span> 

<span data-ttu-id="029ee-139">Se você não quiser aguardar uma atualização automática chegar a seu conector, você poderá executar uma atualização manual.</span><span class="sxs-lookup"><span data-stu-id="029ee-139">If you don't want to wait for an automatic update to come to your connector, you can perform a manual upgrade.</span></span> <span data-ttu-id="029ee-140">Vá para o [página de download do conector](https://download.msappproxy.net/subscription/d3c8b69d-6bf7-42be-a529-3fe9c2e70c90/connector/download) no servidor em que o conector está localizado e selecione **Baixar**.</span><span class="sxs-lookup"><span data-stu-id="029ee-140">Go to the [connector download page](https://download.msappproxy.net/subscription/d3c8b69d-6bf7-42be-a529-3fe9c2e70c90/connector/download) on the server where your connector is located and select **Download**.</span></span> <span data-ttu-id="029ee-141">Esse processo inicia uma atualização do conector local.</span><span class="sxs-lookup"><span data-stu-id="029ee-141">This process kicks off an upgrade for the local connector.</span></span> 

<span data-ttu-id="029ee-142">Para locatários com vários conectores, as atualizações automáticas destinam-se a um conector de cada vez em cada grupo para evitar tempo de inatividade em seu ambiente.</span><span class="sxs-lookup"><span data-stu-id="029ee-142">For tenants with multiple connectors, the automatic updates target one connector at a time in each group to prevent downtime in your environment.</span></span> 

<span data-ttu-id="029ee-143">Poderá ocorrer tempo de inatividade quando o conector for atualizado se:</span><span class="sxs-lookup"><span data-stu-id="029ee-143">You may experience downtime when your connector updates if:</span></span>  
- <span data-ttu-id="029ee-144">Você só tiver um conector.</span><span class="sxs-lookup"><span data-stu-id="029ee-144">You only have one connector.</span></span> <span data-ttu-id="029ee-145">Para evitar esse tempo de inatividade e melhorar a alta disponibilidade, recomendamos instalar um segundo conector e [criar um grupo de conectores](active-directory-application-proxy-connectors-azure-portal.md).</span><span class="sxs-lookup"><span data-stu-id="029ee-145">To avoid this downtime and improve high availability, we recommend you install a second connector and [create a connector group](active-directory-application-proxy-connectors-azure-portal.md).</span></span>  
- <span data-ttu-id="029ee-146">Um conector estava no meio de uma transação quando a atualização foi iniciada.</span><span class="sxs-lookup"><span data-stu-id="029ee-146">A connector was in the middle of a transaction when the update began.</span></span> <span data-ttu-id="029ee-147">Embora a transação inicial seja perdida, o navegador deverá repetir a operação automaticamente ou você poderá atualizar a página.</span><span class="sxs-lookup"><span data-stu-id="029ee-147">Although the initial transaction is lost, your browser should automatically retry the operation or you can refresh your page.</span></span> <span data-ttu-id="029ee-148">Quando a solicitação é enviada novamente, o tráfego é direcionado para um conector de backup.</span><span class="sxs-lookup"><span data-stu-id="029ee-148">When the request is resent, the traffic is routed to a backup connector.</span></span>

## <a name="creating-connector-groups"></a><span data-ttu-id="029ee-149">Criando grupos de conector</span><span class="sxs-lookup"><span data-stu-id="029ee-149">Creating connector groups</span></span>

<span data-ttu-id="029ee-150">Os grupos de conectores permitem atribuir conectores específicos para atender a aplicativos específicos.</span><span class="sxs-lookup"><span data-stu-id="029ee-150">Connector groups enable you to assign specific connectors to serve specific applications.</span></span> <span data-ttu-id="029ee-151">Você pode agrupar um número de conectores e, em seguida, atribuir cada aplicativo a um grupo.</span><span class="sxs-lookup"><span data-stu-id="029ee-151">You can group a number of connectors together, and then assign each application to a group.</span></span> 

<span data-ttu-id="029ee-152">Os grupos de conectores facilitam o gerenciamento de grandes implantações.</span><span class="sxs-lookup"><span data-stu-id="029ee-152">Connector groups make it easier to manage large deployments.</span></span> <span data-ttu-id="029ee-153">Eles também melhoram a latência para locatários que têm aplicativos hospedados em regiões diferentes, pois você pode criar grupos com base no local de conector para servir apenas aos aplicativos locais.</span><span class="sxs-lookup"><span data-stu-id="029ee-153">They also improve latency for tenants that have applications hosted in different regions, because you can create location-based connector groups to serve only local applications.</span></span> 

<span data-ttu-id="029ee-154">Para saber mais sobre os grupos de conectores, confira [Publicar aplicativos em redes e locais separados usando grupos de conector](active-directory-application-proxy-connectors-azure-portal.md).</span><span class="sxs-lookup"><span data-stu-id="029ee-154">To learn more about connector groups, see [Publish applications on separate networks and locations using connector groups](active-directory-application-proxy-connectors-azure-portal.md).</span></span>

## <a name="security-and-networking"></a><span data-ttu-id="029ee-155">Rede e segurança</span><span class="sxs-lookup"><span data-stu-id="029ee-155">Security and networking</span></span>

<span data-ttu-id="029ee-156">Os conectores podem ser instalados em qualquer lugar na rede que permite que eles enviem solicitações para o serviço de Proxy de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="029ee-156">Connectors can be installed anywhere on the network that allows them to send requests to the Application Proxy service.</span></span> <span data-ttu-id="029ee-157">O importante é que o computador que executa o conector também tenha acesso aos aplicativos.</span><span class="sxs-lookup"><span data-stu-id="029ee-157">What's important is that the computer running the connector also has access to your apps.</span></span> <span data-ttu-id="029ee-158">Você pode instalar conectores dentro de sua rede corporativa ou em uma máquina virtual que é executada na nuvem.</span><span class="sxs-lookup"><span data-stu-id="029ee-158">You can install connectors inside of your corporate network or on a virtual machine that runs in the cloud.</span></span> <span data-ttu-id="029ee-159">Os conectores podem ser executados em uma DMZ (zona desmilitarizada), mas não é necessário porque todo o tráfego é de saída e, portanto, sua rede fica segura.</span><span class="sxs-lookup"><span data-stu-id="029ee-159">Connectors can run within a demilitarized zone (DMZ), but it's not necessary because all traffic is outbound so your network stays secure.</span></span>

<span data-ttu-id="029ee-160">Os conectores só enviam solicitações de saída.</span><span class="sxs-lookup"><span data-stu-id="029ee-160">Connectors only send outbound requests.</span></span> <span data-ttu-id="029ee-161">O tráfego de saída é enviado ao serviço de Proxy de Aplicativo e aos aplicativos publicados.</span><span class="sxs-lookup"><span data-stu-id="029ee-161">The outbound traffic is sent to the Application Proxy service and to the published applications.</span></span> <span data-ttu-id="029ee-162">Você não precisa abrir portas de entrada porque o tráfego flui nos dois sentidos quando uma sessão é estabelecida.</span><span class="sxs-lookup"><span data-stu-id="029ee-162">You don't have to open inbound ports because traffic flows both ways once a session is established.</span></span> <span data-ttu-id="029ee-163">Você não precisa configurar o balanceamento de carga entre os conectores ou configurar o acesso de entrada por meio dos firewalls.</span><span class="sxs-lookup"><span data-stu-id="029ee-163">You don't have to set up load balancing between the connectors or configure inbound access through your firewalls.</span></span> 

<span data-ttu-id="029ee-164">Para saber mais sobre como configurar regras de firewall de saída, confira [Trabalhar com servidores proxy locais existentes](application-proxy-working-with-proxy-servers.md).</span><span class="sxs-lookup"><span data-stu-id="029ee-164">For more information about configuring outbound firewall rules, see [Work with existing on-premises proxy servers](application-proxy-working-with-proxy-servers.md).</span></span>

<span data-ttu-id="029ee-165">Use a [Ferramenta de Teste de Portas do Conector de Proxy de Aplicativo Azure AD](https://aadap-portcheck.connectorporttest.msappproxy.net/) para verificar se o conector pode alcançar o serviço Proxy de Aplicativo.</span><span class="sxs-lookup"><span data-stu-id="029ee-165">Use the [Azure AD Application Proxy Connector Ports Test Tool](https://aadap-portcheck.connectorporttest.msappproxy.net/) to verify that your connector can reach the Application Proxy service.</span></span> <span data-ttu-id="029ee-166">No mínimo, verifique se a região EUA Central e a região mais próxima de você tem todas as marcas de seleção verdes.</span><span class="sxs-lookup"><span data-stu-id="029ee-166">At a minimum, make sure that the Central US region and the region closest to you have all green checkmarks.</span></span> <span data-ttu-id="029ee-167">Além disso, um número maior de marcas de seleção verdes significa maior resiliência.</span><span class="sxs-lookup"><span data-stu-id="029ee-167">Beyond that, more green checkmarks means greater resiliency.</span></span> 

## <a name="performance-and-scalability"></a><span data-ttu-id="029ee-168">Desempenho e escala</span><span class="sxs-lookup"><span data-stu-id="029ee-168">Performance and scalability</span></span>

<span data-ttu-id="029ee-169">A escala para o serviço Proxy de Aplicativo é transparente, mas a escala é uma questão para conectores.</span><span class="sxs-lookup"><span data-stu-id="029ee-169">Scale for the Application Proxy service is transparent, but scale is a factor for connectors.</span></span> <span data-ttu-id="029ee-170">Você precisa ter conectores suficientes para tratar do pico de tráfego.</span><span class="sxs-lookup"><span data-stu-id="029ee-170">You need to have enough connectors to handle peak traffic.</span></span> <span data-ttu-id="029ee-171">No entanto, você não precisa configurar o balanceamento de carga, pois todos os conectores dentro de um grupo de conector fazem o balanceamento de carga automaticamente.</span><span class="sxs-lookup"><span data-stu-id="029ee-171">However, you don't need to configure load balancing because all connectors within a connector group automatically load balance.</span></span>

<span data-ttu-id="029ee-172">Como os conectores não têm estado, eles não são afetados pelo número de usuários ou sessões.</span><span class="sxs-lookup"><span data-stu-id="029ee-172">Since connectors are stateless, they are not affected by the number of users or sessions.</span></span> <span data-ttu-id="029ee-173">Em vez disso, eles respondem ao número de solicitações e a seu tamanho do conteúdo.</span><span class="sxs-lookup"><span data-stu-id="029ee-173">Instead, they respond to the number of requests and their payload size.</span></span> <span data-ttu-id="029ee-174">Com o tráfego padrão da Web, um computador médio pode manipular milhares de solicitações por segundo.</span><span class="sxs-lookup"><span data-stu-id="029ee-174">With standard web traffic, an average machine can handle a couple thousand requests per second.</span></span> <span data-ttu-id="029ee-175">A capacidade específica depende das características exatas do computador.</span><span class="sxs-lookup"><span data-stu-id="029ee-175">The specific capacity depends on the exact machine characteristics.</span></span> 

<span data-ttu-id="029ee-176">O desempenho do conector está vinculado à CPU e rede.</span><span class="sxs-lookup"><span data-stu-id="029ee-176">The connector performance is bound by CPU and networking.</span></span> <span data-ttu-id="029ee-177">O desempenho da CPU é necessário para criptografia e descriptografia SSL, enquanto a rede é importante para obter conectividade rápida com os aplicativos e com o serviço online no Azure.</span><span class="sxs-lookup"><span data-stu-id="029ee-177">CPU performance is needed for SSL encryption and decryption, while networking is important to get fast connectivity to the applications and the online service in Azure.</span></span>

<span data-ttu-id="029ee-178">Por outro lado, a memória é uma questão menos significativa para os conectores.</span><span class="sxs-lookup"><span data-stu-id="029ee-178">In contrast, memory is less of an issue for connectors.</span></span> <span data-ttu-id="029ee-179">O serviço online cuida de grande parte do processamento e de todo o tráfego não autenticado.</span><span class="sxs-lookup"><span data-stu-id="029ee-179">The online service takes care of much of the processing and all unauthenticated traffic.</span></span> <span data-ttu-id="029ee-180">Tudo o que pode ser feito na nuvem é feito na nuvem.</span><span class="sxs-lookup"><span data-stu-id="029ee-180">Everything that can be done in the cloud is done in the cloud.</span></span> 

<span data-ttu-id="029ee-181">Outro fator que afeta o desempenho é a qualidade da rede entre os conectores, incluindo:</span><span class="sxs-lookup"><span data-stu-id="029ee-181">Another factor that affects performance is the quality of the networking between the connectors, including:</span></span> 

* <span data-ttu-id="029ee-182">**O serviço online**: conexões lentas ou de alta latência para o serviço Proxy de Aplicativo no Azure influenciam o desempenho do conector.</span><span class="sxs-lookup"><span data-stu-id="029ee-182">**The online service**: Slow or high-latency connections to the Application Proxy service in Azure influence the connector performance.</span></span> <span data-ttu-id="029ee-183">Para obter o melhor desempenho, conecte sua organização ao Azure com o ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="029ee-183">For the best performance, connect your organization to Azure with Express Route.</span></span> <span data-ttu-id="029ee-184">Caso contrário, faça com que a equipe de rede garanta que as conexões com o Azure são tratadas da maneira mais eficiente possível.</span><span class="sxs-lookup"><span data-stu-id="029ee-184">Otherwise, have your networking team ensure that connections to Azure are handled as efficiently as possible.</span></span> 
* <span data-ttu-id="029ee-185">**Os aplicativos de back-end:** em alguns casos, há outros proxies entre o conector e os aplicativos de back-end que possam retardar ou impedir as conexões.</span><span class="sxs-lookup"><span data-stu-id="029ee-185">**The backend applications**: In some cases, there are additional proxies between the connector and the backend applications that can slow or prevent connections.</span></span> <span data-ttu-id="029ee-186">Para solucionar problemas nesse cenário, abra um navegador no servidor de conector e tente acessar o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="029ee-186">To troubleshoot this scenario, open a browser from the connector server and try to access the application.</span></span> <span data-ttu-id="029ee-187">Se você executar os conectores no Azure, mas os aplicativos forem locais, a experiência poderá não ocorrer como esperado pelos usuários.</span><span class="sxs-lookup"><span data-stu-id="029ee-187">If you run the connectors in Azure but the applications are on-premises, the experience might not be what your users expect.</span></span>
* <span data-ttu-id="029ee-188">**Os controladores de domínio**: se os conectores executarem SSO usando a KCD (Delegação Restrita de Kerberos), eles contatarão os controladores de domínio antes de enviarem a solicitação ao back-end.</span><span class="sxs-lookup"><span data-stu-id="029ee-188">**The domain controllers**: If the connectors perform SSO using Kerberos Constrained Delegation, they contact the domain controllers before sending the request to the backend.</span></span> <span data-ttu-id="029ee-189">Os conectores têm um cache de tíquetes Kerberos, mas em um ambiente ocupado, a capacidade de resposta dos controladores de domínio pode afetar o desempenho.</span><span class="sxs-lookup"><span data-stu-id="029ee-189">The connectors have a cache of Kerberos tickets, but in a busy environment the responsiveness of the domain controllers can affect performance.</span></span> <span data-ttu-id="029ee-190">Esse problema é mais comum em conectores executados no Azure, mas que se comunicam com os controladores de domínio locais.</span><span class="sxs-lookup"><span data-stu-id="029ee-190">This issue is more common for connectors that run in Azure but communicate with domain controllers that are on-premises.</span></span> 

<span data-ttu-id="029ee-191">Para saber mais sobre como otimizar sua rede, confira [Considerações sobre a topologia de rede ao usar o Proxy de Aplicativo do Azure Active Directory](application-proxy-network-topology-considerations.md).</span><span class="sxs-lookup"><span data-stu-id="029ee-191">For more information about optimizing your network, see [Network topology considerations when using Azure Active Directory Application Proxy](application-proxy-network-topology-considerations.md).</span></span>

## <a name="domain-joining"></a><span data-ttu-id="029ee-192">Ingresso no domínio</span><span class="sxs-lookup"><span data-stu-id="029ee-192">Domain joining</span></span>

<span data-ttu-id="029ee-193">Os conectores podem ser executados em um computador que não foi ingressado no domínio.</span><span class="sxs-lookup"><span data-stu-id="029ee-193">Connectors can run on a machine that is not domain-joined.</span></span> <span data-ttu-id="029ee-194">Entretanto, se você desejar efetuar SSO (logon único) em aplicativos que usam a IWA (Autenticação Integrada do Windows), precisará de um computador ingressado no domínio.</span><span class="sxs-lookup"><span data-stu-id="029ee-194">However, if you want single sign-on (SSO) to applications that use Integrated Windows Authentication (IWA), you need a domain-joined machine.</span></span> <span data-ttu-id="029ee-195">Nesse caso, os computadores do conector devem ser adicionados a um domínio que possa executar a Delegação Restrita de [Kerberos](https://web.mit.edu/kerberos) em nome dos usuários para os aplicativos publicados.</span><span class="sxs-lookup"><span data-stu-id="029ee-195">In this case, the connector machines must be joined to a domain that can perform [Kerberos](https://web.mit.edu/kerberos) Constrained Delegation on behalf of the users for the published applications.</span></span>

<span data-ttu-id="029ee-196">Os conectores também podem ser ingressados em domínios ou florestas que têm uma relação de confiança parcial ou em controladores de domínio somente leitura.</span><span class="sxs-lookup"><span data-stu-id="029ee-196">Connectors can also be joined to domains or forests that have a partial trust, or to read-only domain controllers.</span></span>

## <a name="connector-deployments-on-hardened-environments"></a><span data-ttu-id="029ee-197">Implantações de conector em ambientes protegidos</span><span class="sxs-lookup"><span data-stu-id="029ee-197">Connector deployments on hardened environments</span></span>

<span data-ttu-id="029ee-198">Normalmente, a implantação do conector é simples e não exige nenhuma configuração especial.</span><span class="sxs-lookup"><span data-stu-id="029ee-198">Usually, connector deployment is straightforward and requires no special configuration.</span></span> <span data-ttu-id="029ee-199">No entanto, há algumas condições exclusivas que devem ser consideradas:</span><span class="sxs-lookup"><span data-stu-id="029ee-199">However, there are some unique conditions that should be considered:</span></span>

* <span data-ttu-id="029ee-200">As organizações que limitam o tráfego de saída devem [abrir as portas necessárias](active-directory-application-proxy-enable.md#open-your-ports).</span><span class="sxs-lookup"><span data-stu-id="029ee-200">Organizations that limit the outbound traffic must [open required ports](active-directory-application-proxy-enable.md#open-your-ports).</span></span>
* <span data-ttu-id="029ee-201">Os computadores em conformidade com FIPS podem precisar alterar sua configuração para permitir que os processos do conector gerem e armazenem um certificado.</span><span class="sxs-lookup"><span data-stu-id="029ee-201">FIPS-compliant machines might be required to change their configuration to allow the connector processes to generate and store a certificate.</span></span>
* <span data-ttu-id="029ee-202">As organizações que bloqueiam o ambiente de acordo com os processos que emitem as solicitações de rede precisam ter certeza de que os serviços do conector estão habilitados para acessar todas as portas e IPs necessários.</span><span class="sxs-lookup"><span data-stu-id="029ee-202">Organizations that lock down their environment based on the processes that issue the networking requests have to make sure that both connector services are enabled to access all required ports and IPs.</span></span>
* <span data-ttu-id="029ee-203">Em alguns casos, os proxies de encaminhamento de saída podem interromper a autenticação de certificado bidirecional e causar falha na comunicação.</span><span class="sxs-lookup"><span data-stu-id="029ee-203">In some cases, outbound forward proxies may break the two-way certificate authentication and cause the communication to fail.</span></span>

## <a name="connector-authentication"></a><span data-ttu-id="029ee-204">Autenticação do conector</span><span class="sxs-lookup"><span data-stu-id="029ee-204">Connector authentication</span></span>

<span data-ttu-id="029ee-205">Para fornecer um serviço seguro, os conectores devem fazer a autenticação no serviço e o serviço deve fazer a autenticação no conector.</span><span class="sxs-lookup"><span data-stu-id="029ee-205">To provide a secure service, connectors have to authenticate toward the service, and the service has to authenticate toward the connector.</span></span> <span data-ttu-id="029ee-206">Essa autenticação é feita usando certificados de cliente e servidor quando os conectores iniciam a conexão.</span><span class="sxs-lookup"><span data-stu-id="029ee-206">This authentication is done using client and server certificates when the connectors initiate the connection.</span></span> <span data-ttu-id="029ee-207">Dessa forma, o nome de usuário e a senha do administrador não são armazenados no computador do conector.</span><span class="sxs-lookup"><span data-stu-id="029ee-207">This way the administrator’s username and password are not stored on the connector machine.</span></span>

<span data-ttu-id="029ee-208">Os certificados usados são específicos ao serviço de Proxy de Aplicativo.</span><span class="sxs-lookup"><span data-stu-id="029ee-208">The certificates used are specific to the Application Proxy service.</span></span> <span data-ttu-id="029ee-209">Eles são criados durante o registro inicial e renovados automaticamente pelos conectores no intervalo de alguns meses.</span><span class="sxs-lookup"><span data-stu-id="029ee-209">They get created during the initial registration and are automatically renewed by the connectors every couple of months.</span></span> 

<span data-ttu-id="029ee-210">Se um conector não estiver conectado ao serviço por vários meses, seus certificados poderão estar desatualizados.</span><span class="sxs-lookup"><span data-stu-id="029ee-210">If a connector is not connected to the service for several months, its certificates may be outdated.</span></span> <span data-ttu-id="029ee-211">Nesse caso, desinstale e reinstale o conector para disparar o registro.</span><span class="sxs-lookup"><span data-stu-id="029ee-211">In this case, uninstall and reinstall the connector to trigger registration.</span></span> <span data-ttu-id="029ee-212">É possível executar os seguintes comandos do PowerShell:</span><span class="sxs-lookup"><span data-stu-id="029ee-212">You can run the following PowerShell commands:</span></span>

```
Import-module AppProxyPSModule
Register-AppProxyConnector
```

## <a name="under-the-hood"></a><span data-ttu-id="029ee-213">Nos bastidores</span><span class="sxs-lookup"><span data-stu-id="029ee-213">Under the hood</span></span>

<span data-ttu-id="029ee-214">Os conectores baseiam-se no Proxy de Aplicativo Web do Windows Server e, portanto, têm a maioria das mesmas ferramentas de gerenciamento, incluindo os Logs de Eventos do Windows</span><span class="sxs-lookup"><span data-stu-id="029ee-214">Connectors are based on Windows Server Web Application Proxy, so they have most of the same management tools including Windows Event Logs</span></span>

 ![Gerenciar logs de eventos com o Visualizador de Eventos](./media/application-proxy-understand-connectors/event-view-window.png)

<span data-ttu-id="029ee-216">e contadores de desempenho do Windows.</span><span class="sxs-lookup"><span data-stu-id="029ee-216">and Windows performance counters.</span></span> 

 ![Adicionar contadores ao conector com o Monitor de Desempenho](./media/application-proxy-understand-connectors/performance-monitor.png)

<span data-ttu-id="029ee-218">Os conectores têm logs de administrador e sessão.</span><span class="sxs-lookup"><span data-stu-id="029ee-218">The connectors have both admin and session logs.</span></span> <span data-ttu-id="029ee-219">Os logs de administrador incluem eventos de chave e seus erros.</span><span class="sxs-lookup"><span data-stu-id="029ee-219">The admin logs include key events and their errors.</span></span> <span data-ttu-id="029ee-220">Os logs de sessão incluem todas as transações e seus detalhes de processamento.</span><span class="sxs-lookup"><span data-stu-id="029ee-220">The session logs include all the transactions and their processing details.</span></span> 

<span data-ttu-id="029ee-221">Para ver os logs, acesse o Visualizador de Eventos, abra o menu **Exibir** e habilite **Mostrar logs analíticos e de depuração**.</span><span class="sxs-lookup"><span data-stu-id="029ee-221">To see the logs, go to the Event Viewer, open the **View** menu, and enable **Show analytic and debug logs**.</span></span> <span data-ttu-id="029ee-222">Em seguida, habilite-os para iniciar a coleta de eventos.</span><span class="sxs-lookup"><span data-stu-id="029ee-222">Then, enable them to start collecting events.</span></span> <span data-ttu-id="029ee-223">Esses logs não aparecem no Proxy de Aplicativo Web no Windows Server 2012 R2, pois os conectores são baseados em uma versão mais recente.</span><span class="sxs-lookup"><span data-stu-id="029ee-223">These logs do not appear in Web Application Proxy in Windows Server 2012 R2, as the connectors are based on a more recent version.</span></span>

<span data-ttu-id="029ee-224">Você pode examinar o estado do serviço na janela Serviços.</span><span class="sxs-lookup"><span data-stu-id="029ee-224">You can examine the state of the service in the Services window.</span></span> <span data-ttu-id="029ee-225">O conector é composto por dois Serviços do Windows: o conector real e o atualizador.</span><span class="sxs-lookup"><span data-stu-id="029ee-225">The connector comprises two Windows Services: the actual connector, and the updater.</span></span> <span data-ttu-id="029ee-226">Ambos devem ser executados o tempo todo.</span><span class="sxs-lookup"><span data-stu-id="029ee-226">Both of them must run all the time.</span></span>

 ![Local dos Serviços do Azure AD](./media/application-proxy-understand-connectors/aad-connector-services.png)

## <a name="next-steps"></a><span data-ttu-id="029ee-228">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="029ee-228">Next steps</span></span>


* [<span data-ttu-id="029ee-229">Publicar aplicativos em redes e locais separados usando grupos de conectores</span><span class="sxs-lookup"><span data-stu-id="029ee-229">Publish applications on separate networks and locations using connector groups</span></span>](active-directory-application-proxy-connectors-azure-portal.md)
* [<span data-ttu-id="029ee-230">Trabalhar com servidores proxy locais existentes</span><span class="sxs-lookup"><span data-stu-id="029ee-230">Work with existing on-premises proxy servers</span></span>](application-proxy-working-with-proxy-servers.md)
* [<span data-ttu-id="029ee-231">Solucionar erros do conector e do Proxy de Aplicativo</span><span class="sxs-lookup"><span data-stu-id="029ee-231">Troubleshoot Application Proxy and connector errors</span></span>](active-directory-application-proxy-troubleshoot.md)
* [<span data-ttu-id="029ee-232">Como fazer uma instalação silenciosa do Conector de Proxy de Aplicativo Azure AD</span><span class="sxs-lookup"><span data-stu-id="029ee-232">How to silently install the Azure AD Application Proxy Connector</span></span>](active-directory-application-proxy-silent-installation.md)

