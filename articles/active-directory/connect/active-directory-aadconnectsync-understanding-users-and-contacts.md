---
title: "Sincronização do Azure AD Connect: Noções Básicas sobre Usuários e Contatos | Microsoft Docs"
description: "Explica usuários e contatos na sincronização do Azure AD Connect."
services: active-directory
documentationcenter: 
author: MarkusVi
manager: femila
ms.assetid: 8d204647-213a-4519-bd62-49563c421602
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/12/2017
ms.author: markvi;andkjell
ms.openlocfilehash: 495e926a1975128707212ba571d47cfc7c9507b3
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/03/2017
---
# <a name="azure-ad-connect-sync-understanding-users-and-contacts"></a><span data-ttu-id="326b3-103">Azure AD Connect Sync: noções básicas sobre usuários e contatos</span><span class="sxs-lookup"><span data-stu-id="326b3-103">Azure AD Connect sync: Understanding Users and Contacts</span></span>
<span data-ttu-id="326b3-104">Há vários motivos diferentes de por que existem várias florestas do Active Directory e várias topologias de implantação diferentes.</span><span class="sxs-lookup"><span data-stu-id="326b3-104">There are several different reasons why you would have multiple Active Directory forests and there are several different deployment topologies.</span></span> <span data-ttu-id="326b3-105">Os modelos comuns incluem uma implantação do recurso em conta e florestas sincronizadas de GAL (Lista de Endereços Global) após uma fusão e aquisição.</span><span class="sxs-lookup"><span data-stu-id="326b3-105">Common models include an account-resource deployment and GAL sync’ed forests after a merger & acquisition.</span></span> <span data-ttu-id="326b3-106">Mas mesmo que haja modelos puros, modelos híbridos são comuns também.</span><span class="sxs-lookup"><span data-stu-id="326b3-106">But even if there are pure models, hybrid models are common as well.</span></span> <span data-ttu-id="326b3-107">A configuração padrão da sincronização do Azure AD Connect não assume nenhum modelo específico, mas dependendo de como a compatibilidade de usuário foi selecionada na guia de instalação, comportamentos diferentes podem ser observados.</span><span class="sxs-lookup"><span data-stu-id="326b3-107">The default configuration in Azure AD Connect sync does not assume any particular model but depending on how user matching was selected in the installation guide, different behaviors can be observed.</span></span>

<span data-ttu-id="326b3-108">Neste tópico, veremos como a configuração padrão se comporta em certas topologias.</span><span class="sxs-lookup"><span data-stu-id="326b3-108">In this topic, we will go through how the default configuration behaves in certain topologies.</span></span> <span data-ttu-id="326b3-109">Veremos que a configuração e o Editor de regras de sincronização podem ser usados para examinar a configuração.</span><span class="sxs-lookup"><span data-stu-id="326b3-109">We will go through the configuration and the Synchronization Rules Editor can be used to look at the configuration.</span></span>

<span data-ttu-id="326b3-110">A configuração pressupõe algumas regras gerais:</span><span class="sxs-lookup"><span data-stu-id="326b3-110">There are a few general rules the configuration assumes:</span></span>

* <span data-ttu-id="326b3-111">Independentemente da ordem em que importamos por meio dos Active Directories de origem, o resultado final seria sempre o mesmo.</span><span class="sxs-lookup"><span data-stu-id="326b3-111">Regardless of which order we import from the source Active Directories, the end result should always be the same.</span></span>
* <span data-ttu-id="326b3-112">Uma conta ativa sempre também contribuirá com informações de logon, incluindo **userPrincipalName** e **sourceAnchor**.</span><span class="sxs-lookup"><span data-stu-id="326b3-112">An active account will always contribute sign-in information, including **userPrincipalName** and **sourceAnchor**.</span></span>
* <span data-ttu-id="326b3-113">Uma conta desabilitada contribuirá userPrincipalName e sourceAnchor, a menos que uma caixa de correio vinculada, se não houver nenhuma conta ativa a ser localizada.</span><span class="sxs-lookup"><span data-stu-id="326b3-113">A disabled account will contribute userPrincipalName and sourceAnchor, unless it is a linked mailbox, if there is no active account to be found.</span></span>
* <span data-ttu-id="326b3-114">Uma conta com uma caixa de correio vinculada nunca será usada para userPrincipalName e sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="326b3-114">An account with a linked mailbox will never be used for userPrincipalName and sourceAnchor.</span></span> <span data-ttu-id="326b3-115">Pressupõe-se que uma conta ativa será encontrada posteriormente.</span><span class="sxs-lookup"><span data-stu-id="326b3-115">It is assumed that an active account will be found later.</span></span>
* <span data-ttu-id="326b3-116">Um objeto de contato pode ser provisionado no AD do Azure como um contato ou como um usuário.</span><span class="sxs-lookup"><span data-stu-id="326b3-116">A contact object might be provisioned to Azure AD as a contact or as a user.</span></span> <span data-ttu-id="326b3-117">Você realmente não sabe até que todas as florestas do Active Directory de origem sejam processadas.</span><span class="sxs-lookup"><span data-stu-id="326b3-117">You don’t really know until all source Active Directory forests have been processed.</span></span>

## <a name="contacts"></a><span data-ttu-id="326b3-118">Contatos</span><span class="sxs-lookup"><span data-stu-id="326b3-118">Contacts</span></span>
<span data-ttu-id="326b3-119">Ter contatos que representam um usuário em uma floresta diferente é comum após uma fusão e aquisição em que uma solução GALSync está fazendo a ponte entre duas ou mais florestas do Exchange.</span><span class="sxs-lookup"><span data-stu-id="326b3-119">Having contacts representing a user in a different forest is common after a merger & acquisition where a GALSync solution is bridging two or more Exchange forests.</span></span> <span data-ttu-id="326b3-120">O objeto de contato está sempre unindo o espaço do conector ao metaverso, usando o atributo de email.</span><span class="sxs-lookup"><span data-stu-id="326b3-120">The contact object is always joining from the connector space to the metaverse using the mail attribute.</span></span> <span data-ttu-id="326b3-121">Se já houver um objeto de contato ou um objeto de usuário com o mesmo endereço de email, os objetos serão unidos.</span><span class="sxs-lookup"><span data-stu-id="326b3-121">If there is already a contact object or user object with the same mail address, the objects are joined together.</span></span> <span data-ttu-id="326b3-122">Isso é configurado na regra **Entrada do AD – Junção de Contato**.</span><span class="sxs-lookup"><span data-stu-id="326b3-122">This is configured in the rule **In from AD – Contact Join**.</span></span> <span data-ttu-id="326b3-123">Há também uma regra denominada **Entrada no AD – Contato Comum** com um fluxo de atributos para o atributo de metaverso **sourceObjectType** com a constante **Contato**.</span><span class="sxs-lookup"><span data-stu-id="326b3-123">There is also a rule named **In from AD – Contact Common** with an attribute flow to the metaverse attribute **sourceObjectType** with the constant **Contact**.</span></span> <span data-ttu-id="326b3-124">Essa regra tem precedência muito baixa, portanto se nenhum objeto de usuário estiver associado ao mesmo objeto de metaverso, a regra Entrada do **AD – Usuário Comum** contribuirá com o valor Usuário para esse atributo.</span><span class="sxs-lookup"><span data-stu-id="326b3-124">This rule has very low precedence so if any user object is joined to the same metaverse object, then the rule **In from AD – User Common** will contribute the value User to this attribute.</span></span> <span data-ttu-id="326b3-125">Com essa regra, esse atributo terá o valor Contato, se nenhum usuário tiver sido associado; e o valor Usuário se pelo menos um usuário tiver sido encontrado.</span><span class="sxs-lookup"><span data-stu-id="326b3-125">With this rule, this attribute will have the value Contact if no user has been joined and the value User if at least one user has been found.</span></span>

<span data-ttu-id="326b3-126">Para o provisionamento de um objeto no Azure AD, a regra **Saída para o AAD – Junção de Contato** criará um objeto de contato se o atributo **sourceObjectType** estiver definido como **Contato**.</span><span class="sxs-lookup"><span data-stu-id="326b3-126">For provisioning an object to Azure AD, the outbound rule **Out to AAD – Contact Join** will create a contact object if the metaverse attribute **sourceObjectType** is set to **Contact**.</span></span> <span data-ttu-id="326b3-127">Se esse atributo estiver definido como **Usuário**, a regra **Saída para o AAD – Junção de Usuário** criará um objeto de usuário, em vez disso.</span><span class="sxs-lookup"><span data-stu-id="326b3-127">If this attribute is set to **User**, then the rule **Out to AAD – User Join** will create a user object instead.</span></span>
<span data-ttu-id="326b3-128">É possível que um objeto seja promovido de Contato para Usuário quando mais Active Directories de origem forem importados e sincronizados.</span><span class="sxs-lookup"><span data-stu-id="326b3-128">It is possible that an object is promoted from Contact to User when more source Active Directories are imported and synchronized.</span></span>

<span data-ttu-id="326b3-129">Por exemplo, em uma topologia de GALSync encontraremos objetos de contato para todos da segunda floresta quando importarmos a primeira floresta.</span><span class="sxs-lookup"><span data-stu-id="326b3-129">For example, in a GALSync topology we will find contact objects for everyone in the second forest when we import the first forest.</span></span> <span data-ttu-id="326b3-130">Isso testará novos objetos de contato no conector AAD.</span><span class="sxs-lookup"><span data-stu-id="326b3-130">This will stage new contact objects in the AAD Connector.</span></span> <span data-ttu-id="326b3-131">Quando mais tarde, importarmos e sincronizarmos a segunda floresta, encontraremos os verdadeiros usuários e os uniremos aos objetos de metaverso existentes.</span><span class="sxs-lookup"><span data-stu-id="326b3-131">When we later import and synchronize the second forest, we will find the real users and join them to the existing metaverse objects.</span></span> <span data-ttu-id="326b3-132">Em seguida, excluiremos os objetos de contato no AAD e criaremos um novo objeto de usuário, em vez disso.</span><span class="sxs-lookup"><span data-stu-id="326b3-132">We will then delete the contact object in AAD and create a new user object instead.</span></span>

<span data-ttu-id="326b3-133">Se você tiver uma topologia em que usuários são representados como contatos, certifique-se de selecionar para combinar usuários no atributo de email no guia de instalação.</span><span class="sxs-lookup"><span data-stu-id="326b3-133">If you have a topology where users are represented as contacts, make sure you select to match users on the mail attribute in the installation guide.</span></span> <span data-ttu-id="326b3-134">Se você selecionar outra opção, terá uma configuração dependente de pedido.</span><span class="sxs-lookup"><span data-stu-id="326b3-134">If you select another option, then you will have an order dependent configuration.</span></span> <span data-ttu-id="326b3-135">Objetos de contato sempre ingressarão no atributo de email, mas objetos de usuário só ingressarão no atributo de email se essa opção foi selecionada no guia de instalação.</span><span class="sxs-lookup"><span data-stu-id="326b3-135">Contact objects will always join on the mail attribute, but user objects will only join on the mail attribute if this option was selected in the installation guide.</span></span> <span data-ttu-id="326b3-136">Você pode acabar com dois objetos diferentes no metaverso, com o mesmo atributo de email, se o objeto de contato tiver sido importado antes do objeto de usuário.</span><span class="sxs-lookup"><span data-stu-id="326b3-136">You could then end up with two different objects in the metaverse with the same mail attribute if the contact object was imported before the user object.</span></span> <span data-ttu-id="326b3-137">Durante a exportação para o AD do Azure, um erro será gerado.</span><span class="sxs-lookup"><span data-stu-id="326b3-137">During export to Azure AD, an error will be thrown.</span></span> <span data-ttu-id="326b3-138">Esse comportamento ocorre por design e indica dados incorretos ou que a topologia não foi identificada corretamente durante a instalação.</span><span class="sxs-lookup"><span data-stu-id="326b3-138">This behavior is by design and would indicate bad data or that the topology was not correctly identified during the installation.</span></span>

## <a name="disabled-accounts"></a><span data-ttu-id="326b3-139">Contas desabilitadas</span><span class="sxs-lookup"><span data-stu-id="326b3-139">Disabled accounts</span></span>
<span data-ttu-id="326b3-140">Contas desabilitadas são sincronizadas também ao AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="326b3-140">Disabled accounts are synchronized as well to Azure AD.</span></span> <span data-ttu-id="326b3-141">Contas desabilitadas são comuns para representar recursos no Exchange, por exemplo, salas de conferência.</span><span class="sxs-lookup"><span data-stu-id="326b3-141">Disabled accounts are common to represent resources in Exchange, for example conference rooms.</span></span> <span data-ttu-id="326b3-142">A exceção são usuários com uma caixa de correio vinculada. Conforme mencionado anteriormente, eles nunca provisionarão uma conta no AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="326b3-142">The exception is users with a linked mailbox; as previously mentioned, these will never provision an account to Azure AD.</span></span>

<span data-ttu-id="326b3-143">O pressuposto é que, se uma conta de usuário desabilitada for encontrada, não encontraremos outra conta ativa posteriormente e o objeto será provisionado no AD do Azure com o userPrincipalName e sourceAnchor encontrados.</span><span class="sxs-lookup"><span data-stu-id="326b3-143">The assumption is that if a disabled user account is found, then we will not find another active account later and the object is provisioned to Azure AD with the userPrincipalName and sourceAnchor found.</span></span> <span data-ttu-id="326b3-144">Caso outra conta ativa seja associada ao mesmo objeto de metaverso, seu userPrincipalName e sourceAnchor serão usados.</span><span class="sxs-lookup"><span data-stu-id="326b3-144">In case another active account will join to the same metaverse object, then its userPrincipalName and sourceAnchor will be used.</span></span>

## <a name="changing-sourceanchor"></a><span data-ttu-id="326b3-145">Alterando o sourceAnchor</span><span class="sxs-lookup"><span data-stu-id="326b3-145">Changing sourceAnchor</span></span>
<span data-ttu-id="326b3-146">Quando um objeto é exportado para o AD do Azure, não é mais permitido alterar o sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="326b3-146">When an object has been exported to Azure AD then it is not allowed to change the sourceAnchor anymore.</span></span> <span data-ttu-id="326b3-147">Quando o objeto é exportado do atributo de metaverso **cloudSourceAnchor**, é definido com o valor **sourceAnchor** aceito pelo Azure AD.</span><span class="sxs-lookup"><span data-stu-id="326b3-147">When the object has been exported the metaverse attribute **cloudSourceAnchor** is set with the **sourceAnchor** value accepted by Azure AD.</span></span> <span data-ttu-id="326b3-148">Se o **sourceAnchor** for alterado e não corresponder a **cloudSourceAnchor**, a regra **Saída para o AAD – Junção de Usuário** gerará o erro **atributo sourceAnchor foi alterado**.</span><span class="sxs-lookup"><span data-stu-id="326b3-148">If **sourceAnchor** is changed and not match **cloudSourceAnchor**, the rule **Out to AAD – User Join** will throw the error **sourceAnchor attribute has changed**.</span></span> <span data-ttu-id="326b3-149">Nesse caso, a configuração ou os dados ou devem ser corrigidos para que o mesmo sourceAnchor esteja presente no metaverso novamente antes que o objeto possa ser sincronizado outra vez.</span><span class="sxs-lookup"><span data-stu-id="326b3-149">In this case, the configuration or data must be corrected so the same sourceAnchor is present in the metaverse again before the object can be synchronized again.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="326b3-150">Recursos adicionais</span><span class="sxs-lookup"><span data-stu-id="326b3-150">Additional Resources</span></span>
* [<span data-ttu-id="326b3-151">Azure AD Connect Sync: personalizando opções de sincronização</span><span class="sxs-lookup"><span data-stu-id="326b3-151">Azure AD Connect Sync: Customizing Synchronization options</span></span>](active-directory-aadconnectsync-whatis.md)
* [<span data-ttu-id="326b3-152">Integração de suas identidades locais com o Active Directory do Azure</span><span class="sxs-lookup"><span data-stu-id="326b3-152">Integrating your on-premises identities with Azure Active Directory</span></span>](active-directory-aadconnect.md)

