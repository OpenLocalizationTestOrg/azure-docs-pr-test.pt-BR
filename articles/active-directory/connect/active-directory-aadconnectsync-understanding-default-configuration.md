---
title: "Sincronização do Azure AD Connect: práticas noções básicas sobre a configuração padrão | Microsoft Docs"
description: "Este artigo descreve a configuração padrão na sincronização do Azure AD Connect."
services: active-directory
documentationcenter: 
author: andkjell
manager: femila
editor: 
ms.assetid: ed876f22-6892-4b9d-acbe-6a2d112f1cd1
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/13/2017
ms.author: billmath
ms.openlocfilehash: 32a693c059a1b4261f33a3d6f50f397365e9dac4
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/03/2017
---
# <a name="azure-ad-connect-sync-understanding-the-default-configuration"></a><span data-ttu-id="0f3bd-103">Sincronização do Azure AD Connect: noções básicas sobre a configuração padrão</span><span class="sxs-lookup"><span data-stu-id="0f3bd-103">Azure AD Connect sync: Understanding the default configuration</span></span>
<span data-ttu-id="0f3bd-104">Este artigo explica as regras da configuração pronta para uso.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-104">This article explains the out-of-box configuration rules.</span></span> <span data-ttu-id="0f3bd-105">Ele documenta as regras e como elas afetarão a configuração.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-105">It documents the rules and how these rules impact the configuration.</span></span> <span data-ttu-id="0f3bd-106">Ele também o orienta durante a configuração padrão da sincronização do Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-106">It also walks you through the default configuration of Azure AD Connect sync.</span></span> <span data-ttu-id="0f3bd-107">O objetivo é que o leitor compreenda como o modelo de configuração, chamado de provisionamento declarativo, está funcionando em um exemplo do mundo real.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-107">The goal is that the reader understands how the configuration model, named declarative provisioning, is working in a real-world example.</span></span> <span data-ttu-id="0f3bd-108">Este artigo pressupõe que você já instalou e configurou a sincronização do Azure AD Connect usando o assistente de instalação.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-108">This article assumes that you have already installed and configure Azure AD Connect sync using the installation wizard.</span></span>

<span data-ttu-id="0f3bd-109">Para entender os detalhes do modelo de configuração, leia [Noções básicas do provisionamento declarativo](active-directory-aadconnectsync-understanding-declarative-provisioning.md).</span><span class="sxs-lookup"><span data-stu-id="0f3bd-109">To understand the details of the configuration model, read [Understanding Declarative Provisioning](active-directory-aadconnectsync-understanding-declarative-provisioning.md).</span></span>

## <a name="out-of-box-rules-from-on-premises-to-azure-ad"></a><span data-ttu-id="0f3bd-110">Regras prontas para uso do local ao AD do Azure</span><span class="sxs-lookup"><span data-stu-id="0f3bd-110">Out-of-box rules from on-premises to Azure AD</span></span>
<span data-ttu-id="0f3bd-111">As expressões a seguir podem ser encontradas na configuração pronta para uso.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-111">The following expressions can be found in the out-of-box configuration.</span></span>

### <a name="user-out-of-box-rules"></a><span data-ttu-id="0f3bd-112">Regras prontas para uso do usuário</span><span class="sxs-lookup"><span data-stu-id="0f3bd-112">User out-of-box rules</span></span>
<span data-ttu-id="0f3bd-113">Essas regras também são aplicadas ao tipo de objeto iNetOrgPerson.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-113">These rules also apply to the iNetOrgPerson object type.</span></span>

<span data-ttu-id="0f3bd-114">Um objeto de usuário deve atender ao seguinte para ser sincronizado:</span><span class="sxs-lookup"><span data-stu-id="0f3bd-114">A user object must satisfy the following to be synchronized:</span></span>

* <span data-ttu-id="0f3bd-115">Deve ter um sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-115">Must have a sourceAnchor.</span></span>
* <span data-ttu-id="0f3bd-116">Depois de o objeto ser criado no Azure AD, o sourceAnchor não poderá ser alterado.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-116">After the object has been created in Azure AD, then sourceAnchor cannot change.</span></span> <span data-ttu-id="0f3bd-117">Se o valor for alterado no local, o objeto interromperá a sincronização até que o sourceAnchor seja alterado para seu valor anterior.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-117">If the value is changed on-premises, the object stops synchronizing until the sourceAnchor is changed back to its previous value.</span></span>
* <span data-ttu-id="0f3bd-118">Deve ter o atributo accountEnabled (userAccountControl) preenchido.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-118">Must have the accountEnabled (userAccountControl) attribute populated.</span></span> <span data-ttu-id="0f3bd-119">Com um local no Active Directory, esse atributo sempre está presente e preenchido.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-119">With an on-premises Active Directory, this attribute is always present and populated.</span></span>

<span data-ttu-id="0f3bd-120">Os seguintes objetos de usuário **não** estão sincronizados ao AD do Azure:</span><span class="sxs-lookup"><span data-stu-id="0f3bd-120">The following user objects are **not** synchronized to Azure AD:</span></span>

* <span data-ttu-id="0f3bd-121">`IsPresent([isCriticalSystemObject])`.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-121">`IsPresent([isCriticalSystemObject])`.</span></span> <span data-ttu-id="0f3bd-122">Certifique-se de vários objetos prontos para uso no Active Directory, como a conta de administrador interna, não sejam sincronizados.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-122">Ensure many out-of-box objects in Active Directory, such as the built-in administrator account, are not synchronized.</span></span>
* <span data-ttu-id="0f3bd-123">`IsPresent([sAMAccountName]) = False`.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-123">`IsPresent([sAMAccountName]) = False`.</span></span> <span data-ttu-id="0f3bd-124">Certifique-se de que os objetos de usuário sem o atributo sAMAccountName não estejam sincronizados.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-124">Ensure user objects with no sAMAccountName attribute are not synchronized.</span></span> <span data-ttu-id="0f3bd-125">Esse caso ocorre na prática apenas em um domínio atualizado do NT4.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-125">This case would only practically happen in a domain upgraded from NT4.</span></span>
* <span data-ttu-id="0f3bd-126">`Left([sAMAccountName], 4) = "AAD_"`, `Left([sAMAccountName], 5) = "MSOL_"`.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-126">`Left([sAMAccountName], 4) = "AAD_"`, `Left([sAMAccountName], 5) = "MSOL_"`.</span></span> <span data-ttu-id="0f3bd-127">Não sincronize a conta de serviço usada pelo Azure AD Connect sync e suas versões anteriores.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-127">Do not synchronize the service account used by Azure AD Connect sync and its earlier versions.</span></span>
* <span data-ttu-id="0f3bd-128">Não sincronize contas do Exchange que não funcionem no Exchange Online.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-128">Do not synchronize Exchange accounts that would not work in Exchange Online.</span></span>
  * `[sAMAccountName] = "SUPPORT_388945a0"`
  * `Left([mailNickname], 14) = "SystemMailbox{"`
  * `(Left([mailNickname], 4) = "CAS_" && (InStr([mailNickname], "}") > 0))`
  * `(Left([sAMAccountName], 4) = "CAS_" && (InStr([sAMAccountName], "}")> 0))`
* <span data-ttu-id="0f3bd-129">Não sincronize objetos que não funcionem no Exchange Online.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-129">Do not synchronize objects that would not work in Exchange Online.</span></span>
  `CBool(IIF(IsPresent([msExchRecipientTypeDetails]),BitAnd([msExchRecipientTypeDetails],&H21C07000) > 0,NULL))`  
  <span data-ttu-id="0f3bd-130">Essa máscara de bit (&amp; H21C07000) filtraria os objetos a seguir:</span><span class="sxs-lookup"><span data-stu-id="0f3bd-130">This bitmask (&H21C07000) would filter out the following objects:</span></span>
  * <span data-ttu-id="0f3bd-131">Pasta pública habilitada para email</span><span class="sxs-lookup"><span data-stu-id="0f3bd-131">Mail-enabled Public Folder</span></span>
  * <span data-ttu-id="0f3bd-132">Caixa de correio do Atendedor do sistema</span><span class="sxs-lookup"><span data-stu-id="0f3bd-132">System Attendant Mailbox</span></span>
  * <span data-ttu-id="0f3bd-133">Caixa de correio do banco de dados de correio (caixa de correio do sistema)</span><span class="sxs-lookup"><span data-stu-id="0f3bd-133">Mailbox Database Mailbox (System Mailbox)</span></span>
  * <span data-ttu-id="0f3bd-134">Grupo de segurança universal (não se aplica a um usuário, mas está presente por motivos herdados)</span><span class="sxs-lookup"><span data-stu-id="0f3bd-134">Universal Security Group (wouldn't apply for a user, but is present for legacy reasons)</span></span>
  * <span data-ttu-id="0f3bd-135">Grupo não universal (não se aplica a um usuário, mas está presente por motivos herdados)</span><span class="sxs-lookup"><span data-stu-id="0f3bd-135">Non-Universal Group (wouldn't apply for a user, but is present for legacy reasons)</span></span>
  * <span data-ttu-id="0f3bd-136">Plano de caixa de correio</span><span class="sxs-lookup"><span data-stu-id="0f3bd-136">Mailbox Plan</span></span>
  * <span data-ttu-id="0f3bd-137">Caixa de correio de descoberta</span><span class="sxs-lookup"><span data-stu-id="0f3bd-137">Discovery Mailbox</span></span>
* <span data-ttu-id="0f3bd-138">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-138">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span></span> <span data-ttu-id="0f3bd-139">Não sincronize nenhum objetos vítima de replicação.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-139">Do not synchronize any replication victim objects.</span></span>

<span data-ttu-id="0f3bd-140">As regras de atributos a seguir se aplicam:</span><span class="sxs-lookup"><span data-stu-id="0f3bd-140">The following attribute rules apply:</span></span>

* <span data-ttu-id="0f3bd-141">`sourceAnchor <- IIF([msExchRecipientTypeDetails]=2,NULL,..)`.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-141">`sourceAnchor <- IIF([msExchRecipientTypeDetails]=2,NULL,..)`.</span></span> <span data-ttu-id="0f3bd-142">O atributo sourceAnchor não vem de uma caixa de correio vinculada.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-142">The sourceAnchor attribute is not contributed from a linked mailbox.</span></span> <span data-ttu-id="0f3bd-143">Supõe-se que, se uma caixa de correio vinculada tiver sido encontrada, a conta real será adicionada posteriormente.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-143">It is assumed that if a linked mailbox has been found, the actual account is joined later.</span></span>
* <span data-ttu-id="0f3bd-144">Atributos relacionados ao Exchange só são sincronizados se o atributo **mailNickName** tiver um valor.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-144">Exchange related attributes are only synchronized if the attribute **mailNickName** has a value.</span></span>
* <span data-ttu-id="0f3bd-145">Quando há várias florestas, os atributos são consumidos na seguinte ordem:</span><span class="sxs-lookup"><span data-stu-id="0f3bd-145">When there are multiple forests, then attributes are consumed in the following order:</span></span>
  1. <span data-ttu-id="0f3bd-146">Atributos relacionados a entrada (por exemplo, userPrincipalName) são a contribuição da floresta com uma conta habilitada.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-146">Attributes related to sign-in (for example userPrincipalName) are contributed from the forest with an enabled account.</span></span>
  2. <span data-ttu-id="0f3bd-147">Atributos que podem ser encontrados em uma GAL (Lista de Endereços Global) do Exchange são a contribuição da floresta com uma caixa de correio do Exchange.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-147">Attributes that can be found in an Exchange GAL (Global Address List) are contributed from the forest with an Exchange Mailbox.</span></span>
  3. <span data-ttu-id="0f3bd-148">Se não for possível localizar nenhuma caixa de correio, esses atributos poderão vir de qualquer floresta.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-148">If no mailbox can be found, then these attributes can come from any forest.</span></span>
  4. <span data-ttu-id="0f3bd-149">Atributos relacionados ao Exchange (atributos técnicos não visíveis na GAL) são a contribuição da floresta em que `mailNickname ISNOTNULL`.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-149">Exchange related attributes (technical attributes not visible in the GAL) are contributed from the forest where `mailNickname ISNOTNULL`.</span></span>
  5. <span data-ttu-id="0f3bd-150">Se houver várias florestas que atendam a uma dessas regras, a ordem de criação (data/hora) dos conectores (florestas) será usada para determinar qual floresta contribuirá com os atributos.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-150">If there are multiple forests that would satisfy one of these rules, then the creation order (date/time) of the Connectors (forests) is used to determine which forest contributes the attributes.</span></span>

### <a name="contact-out-of-box-rules"></a><span data-ttu-id="0f3bd-151">Regras prontas para uso de contato</span><span class="sxs-lookup"><span data-stu-id="0f3bd-151">Contact out-of-box rules</span></span>
<span data-ttu-id="0f3bd-152">Um objeto de contato deve atender ao seguinte para ser sincronizado:</span><span class="sxs-lookup"><span data-stu-id="0f3bd-152">A contact object must satisfy the following to be synchronized:</span></span>

* <span data-ttu-id="0f3bd-153">O contato deve ser habilitado para email.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-153">The contact must be mail-enabled.</span></span> <span data-ttu-id="0f3bd-154">É verificado com as seguintes regras:</span><span class="sxs-lookup"><span data-stu-id="0f3bd-154">It is verified with the following rules:</span></span>
  * <span data-ttu-id="0f3bd-155">`IsPresent([proxyAddresses]) = True)`.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-155">`IsPresent([proxyAddresses]) = True)`.</span></span> <span data-ttu-id="0f3bd-156">O atributo proxyAddresses deve ser preenchido.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-156">The proxyAddresses attribute must be populated.</span></span>
  * <span data-ttu-id="0f3bd-157">Um endereço de email principal pode ser encontrado no atributo proxyAddresses ou no atributo de email.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-157">A primary email address can be found in either the proxyAddresses attribute or the mail attribute.</span></span> <span data-ttu-id="0f3bd-158">A presença de um @ é usado para verificar se o conteúdo é um endereço de email.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-158">The presence of an @ is used to verify that the content is an email address.</span></span> <span data-ttu-id="0f3bd-159">Uma dessas duas regras deve ser avaliada como True.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-159">One of these two rules must be evaluated to True.</span></span>
    * <span data-ttu-id="0f3bd-160">`(Contains([proxyAddresses], "SMTP:") > 0) && (InStr(Item([proxyAddresses], Contains([proxyAddresses], "SMTP:")), "@") > 0))`.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-160">`(Contains([proxyAddresses], "SMTP:") > 0) && (InStr(Item([proxyAddresses], Contains([proxyAddresses], "SMTP:")), "@") > 0))`.</span></span> <span data-ttu-id="0f3bd-161">Há uma entrada com "SMTP:" e, se houver, pode um @ ser encontrado na cadeia de caracteres?</span><span class="sxs-lookup"><span data-stu-id="0f3bd-161">Is there an entry with "SMTP:" and if there is, can an @ be found in the string?</span></span>
    * <span data-ttu-id="0f3bd-162">`(IsPresent([mail]) = True && (InStr([mail], "@") > 0)`.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-162">`(IsPresent([mail]) = True && (InStr([mail], "@") > 0)`.</span></span> <span data-ttu-id="0f3bd-163">É o atributo de email preenchido e se for, um @ ser encontrado na cadeia de caracteres?</span><span class="sxs-lookup"><span data-stu-id="0f3bd-163">Is the mail attribute populated and if it is, can an @ be found in the string?</span></span>

<span data-ttu-id="0f3bd-164">Os seguintes objetos de contato **não** estão sincronizados ao AD do Azure:</span><span class="sxs-lookup"><span data-stu-id="0f3bd-164">The following contact objects are **not** synchronized to Azure AD:</span></span>

* <span data-ttu-id="0f3bd-165">`IsPresent([isCriticalSystemObject])`.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-165">`IsPresent([isCriticalSystemObject])`.</span></span> <span data-ttu-id="0f3bd-166">Certifique-se de que nenhum objeto de contato marcado como crítico seja sincronizado.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-166">Ensure no contact objects marked as critical are synchronized.</span></span> <span data-ttu-id="0f3bd-167">Não deve ser nenhum com uma configuração padrão.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-167">Shouldn't be any with a default configuration.</span></span>
* <span data-ttu-id="0f3bd-168">`((InStr([displayName], "(MSOL)") > 0) && (CBool([msExchHideFromAddressLists])))`.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-168">`((InStr([displayName], "(MSOL)") > 0) && (CBool([msExchHideFromAddressLists])))`.</span></span>
* <span data-ttu-id="0f3bd-169">`(Left([mailNickname], 4) = "CAS_" && (InStr([mailNickname], "}") > 0))`.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-169">`(Left([mailNickname], 4) = "CAS_" && (InStr([mailNickname], "}") > 0))`.</span></span> <span data-ttu-id="0f3bd-170">Esses objetos não funcionam no Exchange Online.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-170">These objects wouldn't work in Exchange Online.</span></span>
* <span data-ttu-id="0f3bd-171">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-171">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span></span> <span data-ttu-id="0f3bd-172">Não sincronize nenhum objetos vítima de replicação.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-172">Do not synchronize any replication victim objects.</span></span>

### <a name="group-out-of-box-rules"></a><span data-ttu-id="0f3bd-173">Grupo prontas para uso de grupo</span><span class="sxs-lookup"><span data-stu-id="0f3bd-173">Group out-of-box rules</span></span>
<span data-ttu-id="0f3bd-174">Um objeto de grupo deve atender ao seguinte para ser sincronizado:</span><span class="sxs-lookup"><span data-stu-id="0f3bd-174">A group object must satisfy the following to be synchronized:</span></span>

* <span data-ttu-id="0f3bd-175">Deve ter menos de 50 mil membros.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-175">Must have less than 50,000 members.</span></span> <span data-ttu-id="0f3bd-176">Essa contagem é o número de membros do grupo local.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-176">This count is the number of members in the on-premises group.</span></span>
  * <span data-ttu-id="0f3bd-177">Se tiver mais membros antes de a sincronização iniciar pela primeira vez, o grupo não será sincronizado.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-177">If it has more members before synchronization starts the first time, the group is not synchronized.</span></span>
  * <span data-ttu-id="0f3bd-178">Se o número de membros crescer desde quando ele foi inicialmente criado, quando ele atingir 50 mil membros, a sincronização será interrompida até que a contagem de associação seja inferior a 50 mil novamente.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-178">If the number of members grow from when it was initially created, then when it reaches 50,000 members it stops synchronizing until the membership count is lower than 50,000 again.</span></span>
  * <span data-ttu-id="0f3bd-179">Observação: a contagem de 50 mil associações também é imposta pelo AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-179">Note: The 50,000 membership count is also enforced by Azure AD.</span></span> <span data-ttu-id="0f3bd-180">Você não pode sincronizar grupos com mais membros mesmo que modifique ou remova essa regra.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-180">You are not able to synchronize groups with more members even if you modify or remove this rule.</span></span>
* <span data-ttu-id="0f3bd-181">Se o grupo for um **Grupo de Distribuição**, ele também deverá ser habilitado para email.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-181">If the group is a **Distribution Group**, then it must also be mail enabled.</span></span> <span data-ttu-id="0f3bd-182">Consulte [Regras prontas para uso de contato](#contact-out-of-box-rules) para ver como essa regra é aplicada.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-182">See [Contact out-of-box rules](#contact-out-of-box-rules) for this rule is enforced.</span></span>

<span data-ttu-id="0f3bd-183">Os seguintes objetos de grupo **não** estão sincronizados ao AD do Azure:</span><span class="sxs-lookup"><span data-stu-id="0f3bd-183">The following group objects are **not** synchronized to Azure AD:</span></span>

* <span data-ttu-id="0f3bd-184">`IsPresent([isCriticalSystemObject])`.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-184">`IsPresent([isCriticalSystemObject])`.</span></span> <span data-ttu-id="0f3bd-185">Certifique-se de vários objetos prontos para uso no Active Directory, como o grupo de administrador interno, não sejam sincronizados.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-185">Ensure many out-of-box objects in Active Directory, such as the built-in administrators group, are not synchronized.</span></span>
* <span data-ttu-id="0f3bd-186">`[sAMAccountName] = "MSOL_AD_Sync_RichCoexistence"`.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-186">`[sAMAccountName] = "MSOL_AD_Sync_RichCoexistence"`.</span></span> <span data-ttu-id="0f3bd-187">Grupo herdado usado pelo DirSync.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-187">Legacy group used by DirSync.</span></span>
* <span data-ttu-id="0f3bd-188">`BitAnd([msExchRecipientTypeDetails],&amp;H40000000)`.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-188">`BitAnd([msExchRecipientTypeDetails],&amp;H40000000)`.</span></span> <span data-ttu-id="0f3bd-189">Grupo de funções.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-189">Role Group.</span></span>
* <span data-ttu-id="0f3bd-190">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-190">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span></span> <span data-ttu-id="0f3bd-191">Não sincronize nenhum objetos vítima de replicação.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-191">Do not synchronize any replication victim objects.</span></span>

### <a name="foreignsecurityprincipal-out-of-box-rules"></a><span data-ttu-id="0f3bd-192">Regras prontas para uso de ForeignSecurityPrincipal</span><span class="sxs-lookup"><span data-stu-id="0f3bd-192">ForeignSecurityPrincipal out-of-box rules</span></span>
<span data-ttu-id="0f3bd-193">FSPs são associados a "qualquer" objeto (\*) no metaverso.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-193">FSPs are joined to "any" (\*) object in the metaverse.</span></span> <span data-ttu-id="0f3bd-194">Na verdade, essa junção ocorre apenas para usuários e grupos de segurança.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-194">In reality, this join only happens for users and security groups.</span></span> <span data-ttu-id="0f3bd-195">Essa configuração garante que as associações entre florestas sejam resolvidas e representadas corretamente no Azure AD.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-195">This configuration ensures that cross-forest memberships are resolved and represented correctly in Azure AD.</span></span>

### <a name="computer-out-of-box-rules"></a><span data-ttu-id="0f3bd-196">Regras prontas para uso de computador</span><span class="sxs-lookup"><span data-stu-id="0f3bd-196">Computer out-of-box rules</span></span>
<span data-ttu-id="0f3bd-197">Um objeto de computador deve atender ao seguinte para ser sincronizado:</span><span class="sxs-lookup"><span data-stu-id="0f3bd-197">A computer object must satisfy the following to be synchronized:</span></span>

* <span data-ttu-id="0f3bd-198">`userCertificate ISNOTNULL`.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-198">`userCertificate ISNOTNULL`.</span></span> <span data-ttu-id="0f3bd-199">Somente os computadores Windows 10 populam esse atributo.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-199">Only Windows 10 computers populate this attribute.</span></span> <span data-ttu-id="0f3bd-200">Todos os objetos de computador com um valor nesse atributo serão sincronizados.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-200">All computer objects with a value in this attribute are synchronized.</span></span>

## <a name="understanding-the-out-of-box-rules-scenario"></a><span data-ttu-id="0f3bd-201">Noções básicas sobre o cenário de regras prontas para uso</span><span class="sxs-lookup"><span data-stu-id="0f3bd-201">Understanding the out-of-box rules scenario</span></span>
<span data-ttu-id="0f3bd-202">Neste exemplo, estamos usando uma implantação com uma floresta de contas (A), uma floresta de recursos (R) e um diretório do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-202">In this example, we are using a deployment with one account forest (A), one resource forest (R), and one Azure AD directory.</span></span>

![Imagem com a descrição do cenário](./media/active-directory-aadconnectsync-understanding-default-configuration/scenario.png)

<span data-ttu-id="0f3bd-204">Nessa configuração, pressupomos que haja uma conta habilitada na floresta de contas e uma conta desabilitada na floresta de recursos com uma caixa de correio vinculada.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-204">In this configuration, it is assumed there is an enabled account in the account forest and a disabled account in the resource forest with a linked mailbox.</span></span>

<span data-ttu-id="0f3bd-205">Nosso objetivo com a configuração padrão é:</span><span class="sxs-lookup"><span data-stu-id="0f3bd-205">Our goal with the default configuration is:</span></span>

* <span data-ttu-id="0f3bd-206">Atributos relacionados à entrada são sincronizados com a floresta com a conta habilitada.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-206">Attributes related to sign-in are synchronized from the forest with the enabled account.</span></span>
* <span data-ttu-id="0f3bd-207">Atributos que podem ser encontrados na GAL (Lista de Endereços Global) são sincronizados da floresta com a caixa de correio.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-207">Attributes that can be found in the GAL (Global Address List) are synchronized from the forest with the mailbox.</span></span> <span data-ttu-id="0f3bd-208">Se nenhuma caixa de correio for encontrada, nenhuma outra floresta será usada.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-208">If no mailbox can be found, any other forest is used.</span></span>
* <span data-ttu-id="0f3bd-209">Se uma caixa de correio vinculada for encontrada, a conta habilitada vinculada deverá encontrada para que o objeto seja exportado para o AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-209">If a linked mailbox is found, the linked enabled account must be found for the object to be exported to Azure AD.</span></span>

### <a name="synchronization-rule-editor"></a><span data-ttu-id="0f3bd-210">Editor de Regra de Sincronização</span><span class="sxs-lookup"><span data-stu-id="0f3bd-210">Synchronization Rule Editor</span></span>
<span data-ttu-id="0f3bd-211">O SRE (Editor de Regras de Sincronização) pode exibir e alterar a configuração, e um atalho para ele pode ser encontrado no menu Iniciar.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-211">The configuration can be viewed and changed with the tool Synchronization Rules Editor (SRE) and a shortcut to it can be found in the start menu.</span></span>

![Ícone do Editor de Regras de Sincronização](./media/active-directory-aadconnectsync-understanding-default-configuration/sre.png)

<span data-ttu-id="0f3bd-213">O SRE é uma ferramenta do kit de recursos e é instalado com a sincronização do Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-213">The SRE is a resource kit tool and it is installed with Azure AD Connect sync.</span></span> <span data-ttu-id="0f3bd-214">Para iniciá-lo, você deve ser um membro do grupo ADSyncAdmins.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-214">To be able to start it, you must be a member of the ADSyncAdmins group.</span></span> <span data-ttu-id="0f3bd-215">Quando ele é iniciado, você vê algo assim:</span><span class="sxs-lookup"><span data-stu-id="0f3bd-215">When it starts, you see something like this:</span></span>

![Regras de Sincronização Entrada](./media/active-directory-aadconnectsync-understanding-default-configuration/syncrulesinbound.png)

<span data-ttu-id="0f3bd-217">Nesse painel, você vê todas as regras de sincronização criadas para sua configuração.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-217">In this pane, you see all Synchronization Rules created for your configuration.</span></span> <span data-ttu-id="0f3bd-218">Cada linha na tabela é uma regra de sincronização.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-218">Each line in the table is one Synchronization Rule.</span></span> <span data-ttu-id="0f3bd-219">À esquerda, em Tipos de Regra, são listados os dois tipos diferentes: entrada e saída.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-219">To the left under Rule Types, the two different types are listed: Inbound and Outbound.</span></span> <span data-ttu-id="0f3bd-220">Entrada e saída é da exibição do metaverso.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-220">Inbound and Outbound is from the view of the metaverse.</span></span> <span data-ttu-id="0f3bd-221">Você se concentrará principalmente nas regras de entrada nesta visão geral.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-221">You are mainly going to focus on the inbound rules in this overview.</span></span> <span data-ttu-id="0f3bd-222">A lista atual de Regras de Sincronização depende do esquema detectado no AD.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-222">The actual list of Synchronization Rules depends on the detected schema in AD.</span></span> <span data-ttu-id="0f3bd-223">Na figura acima, a conta de florestas (fabrikamonline.com) não tem serviços, como o Exchange e o Lync, e nenhuma regra de sincronização foi criada para esses serviços.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-223">In the picture above, the account forest (fabrikamonline.com) does not have any services, such as Exchange and Lync, and no Synchronization Rules have been created for these services.</span></span> <span data-ttu-id="0f3bd-224">No entanto, na floresta de recursos (res.fabrikamonline.com), você encontra Regras de Sincronização para esses serviços.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-224">However, in the resource forest (res.fabrikamonline.com) you find Synchronization Rules for these services.</span></span> <span data-ttu-id="0f3bd-225">O conteúdo das regras é diferente dependendo da versão detectada.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-225">The content of the rules is different depending on the version detected.</span></span> <span data-ttu-id="0f3bd-226">Por exemplo, em uma implantação com o Exchange 2013, há mais fluxos de atributo configurados do que no Exchange 2010/2007.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-226">For example, in a deployment with Exchange 2013 there are more attribute flows configured than in Exchange 2010/2007.</span></span>

### <a name="synchronization-rule"></a><span data-ttu-id="0f3bd-227">Regra de Sincronização</span><span class="sxs-lookup"><span data-stu-id="0f3bd-227">Synchronization Rule</span></span>
<span data-ttu-id="0f3bd-228">Uma regra de sincronização é um objeto de configuração com um conjunto de atributos que fluem quando uma condição é atendida.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-228">A Synchronization Rule is a configuration object with a set of attributes flowing when a condition is satisfied.</span></span> <span data-ttu-id="0f3bd-229">Ela também é usado para descrever como um objeto em um espaço de conector está relacionado a um objeto no metaverso, conhecido como **associação** ou **correspondência**.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-229">It is also used to describe how an object in a connector space is related to an object in the metaverse, known as **join** or **match**.</span></span> <span data-ttu-id="0f3bd-230">As Regras de Sincronização têm um valor de precedência indicando como elas se relacionam entre si.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-230">The Synchronization Rules have a precedence value indicating how they relate to each other.</span></span> <span data-ttu-id="0f3bd-231">Uma regra de sincronização com um valor numérico mais baixo tem maior precedência e, em um conflito de fluxo de atributo, a precedência mais alta vence na resolução de conflitos.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-231">A Synchronization Rule with a lower numeric value has a higher precedence and in an attribute flow conflict, higher precedence wins the conflict resolution.</span></span>

<span data-ttu-id="0f3bd-232">Por exemplo, examinaremos a Regra de Sincronização **Entrada do AD – usuário AccountEnabled**.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-232">As an example, look at the Synchronization Rule **In from AD – User AccountEnabled**.</span></span> <span data-ttu-id="0f3bd-233">Marque essa linha no SRE e selecione **Editar**.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-233">Mark this line in the SRE and select **Edit**.</span></span>

<span data-ttu-id="0f3bd-234">Como essa regra é pronta para uso, você receberá um aviso quando abrir a regra.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-234">Since this rule is an out-of-box rule, you receive a warning when you open the rule.</span></span> <span data-ttu-id="0f3bd-235">Você não deve fazer qualquer [alteração em regras prontas para uso](active-directory-aadconnectsync-best-practices-changing-default-configuration.md). Portanto, é indagado sobre suas intenções.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-235">You should not make any [changes to out-of-box rules](active-directory-aadconnectsync-best-practices-changing-default-configuration.md), so you are asked what your intentions are.</span></span> <span data-ttu-id="0f3bd-236">Nesse caso, você só deseja exibir a regra.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-236">In this case, you only want to view the rule.</span></span> <span data-ttu-id="0f3bd-237">Selecione **Não**.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-237">Select **No**.</span></span>

![Aviso de Regras de Sincronização](./media/active-directory-aadconnectsync-understanding-default-configuration/warningeditrule.png)

<span data-ttu-id="0f3bd-239">Uma Regra de Sincronização tem quatro seções de configuração: descrição, filtro de escopo, regras de associação e transformações.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-239">A Synchronization Rule has four configuration sections: Description, Scoping filter, Join rules, and Transformations.</span></span>

#### <a name="description"></a><span data-ttu-id="0f3bd-240">Descrição</span><span class="sxs-lookup"><span data-stu-id="0f3bd-240">Description</span></span>
<span data-ttu-id="0f3bd-241">A primeira seção fornece informações básicas, como nome e descrição.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-241">The first section provides basic information such as a name and description.</span></span>

![<span data-ttu-id="0f3bd-242">Guia Descrição no Editor de regras de sincronização</span><span class="sxs-lookup"><span data-stu-id="0f3bd-242">Description tab in Sync rule editor</span></span> ](./media/active-directory-aadconnectsync-understanding-default-configuration/syncruledescription.png)

<span data-ttu-id="0f3bd-243">Você também encontra informações sobre a qual sistema conectado essa regra está relacionada, a qual objeto de tipo no sistema conectado ela se aplica e o tipo de objeto do metaverso.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-243">You also find information about which connected system this rule is related to, which object type in the connected system it applies to, and the metaverse object type.</span></span> <span data-ttu-id="0f3bd-244">O tipo de objeto do metaverso é sempre pessoa, independentemente de o tipo de objeto de origem ser usuário, iNetOrgPerson ou contato.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-244">The metaverse object type is always person regardless when the source object type is a user, iNetOrgPerson, or contact.</span></span> <span data-ttu-id="0f3bd-245">O tipo de objeto do metaverso nunca deve ser alterado. Portanto, ele é criado como um tipo genérico.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-245">The metaverse object type should never change so it is created as a generic type.</span></span> <span data-ttu-id="0f3bd-246">O Tipo de Link pode ser definido como Associar, StickyJoin ou Provisionar.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-246">The Link Type can be set to Join, StickyJoin, or Provision.</span></span> <span data-ttu-id="0f3bd-247">Essa configuração funciona em conjunto com a seção de regras de junção e é abordada mais tarde.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-247">This setting works together with the Join Rules section and is covered later.</span></span>

<span data-ttu-id="0f3bd-248">Você também pode ver que essa regra de sincronização é usada para a sincronização de senha.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-248">You can also see that this sync rule is used for password sync.</span></span> <span data-ttu-id="0f3bd-249">Se um usuário estiver no escopo dessa regra de sincronização, a senha será sincronizada do local para a nuvem (supondo que você tenha habilitado o recurso de sincronização de senha).</span><span class="sxs-lookup"><span data-stu-id="0f3bd-249">If a user is in scope for this sync rule, the password is synchronized from on-premises to cloud (assuming you have enabled the password sync feature).</span></span>

#### <a name="scoping-filter"></a><span data-ttu-id="0f3bd-250">Filtro de escopo</span><span class="sxs-lookup"><span data-stu-id="0f3bd-250">Scoping filter</span></span>
<span data-ttu-id="0f3bd-251">A seção Filtro de Escopo é usada para configurar quando uma Regra de Sincronização deve ser aplicada.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-251">The Scoping Filter section is used to configure when a Synchronization Rule should apply.</span></span> <span data-ttu-id="0f3bd-252">Como o nome da Regra de Sincronização que você está vendo indica que ela só deve ser aplicada para usuários habilitados, o escopo está configurado para que o atributo do AD **userAccountControl** não precise ter o bit 2 definido.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-252">Since the name of the Synchronization Rule you are looking at indicates it should only be applied for enabled users, the scope is configured so the AD attribute **userAccountControl** must not have the bit 2 set.</span></span> <span data-ttu-id="0f3bd-253">Quando o mecanismo de sincronização encontra um usuário no AD, ele se aplica a essa regra de sincronização quando **userAccountControl** é definido como o valor decimal 512 (usuário normal habilitado).</span><span class="sxs-lookup"><span data-stu-id="0f3bd-253">When the sync engine finds a user in AD, it applies this sync rule when **userAccountControl** is set to the decimal value 512 (enabled normal user).</span></span> <span data-ttu-id="0f3bd-254">A regra não é aplicável quando o usuário tem **userAccountControl** definido como 514 (usuário normal desabilitado).</span><span class="sxs-lookup"><span data-stu-id="0f3bd-254">It does not apply the rule when the user has **userAccountControl** set to 514 (disabled normal user).</span></span>

![<span data-ttu-id="0f3bd-255">Guia Escopo no Editor de regras de sincronização</span><span class="sxs-lookup"><span data-stu-id="0f3bd-255">Scoping tab in Sync rule editor</span></span> ](./media/active-directory-aadconnectsync-understanding-default-configuration/syncrulescopingfilter.png)

<span data-ttu-id="0f3bd-256">O filtro de escopo tem Grupos e Cláusulas que podem ser aninhados.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-256">The scoping filter has Groups and Clauses that can be nested.</span></span> <span data-ttu-id="0f3bd-257">Todas as cláusulas dentro de um grupo devem ser satisfeitas para que uma Regra de Sincronização seja aplicada.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-257">All clauses inside a group must be satisfied for a Synchronization Rule to apply.</span></span> <span data-ttu-id="0f3bd-258">Quando vários grupos são definidos, pelo menos um grupo deve ser satisfeito para que a regra seja aplicada.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-258">When multiple groups are defined, then at least one group must be satisfied for the rule to apply.</span></span> <span data-ttu-id="0f3bd-259">Ou seja, um OR lógico é avaliado entre grupos e um AND lógico é avaliado dentro de um grupo.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-259">That is, a logical OR is evaluated between groups and a logical AND is evaluated inside a group.</span></span> <span data-ttu-id="0f3bd-260">Um exemplo dessa configuração pode ser encontrado na regra de sincronização de saída **Saída para AAD – Associação no grupo**.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-260">An example of this configuration can be found in the outbound Synchronization Rule **Out to AAD – Group Join**.</span></span> <span data-ttu-id="0f3bd-261">Há vários grupos de filtro de sincronização, por exemplo, um para grupos de segurança (`securityEnabled EQUAL True`) e outro para grupos de distribuição (`securityEnabled EQUAL False`).</span><span class="sxs-lookup"><span data-stu-id="0f3bd-261">There are several synchronization filter groups, for example one for security groups (`securityEnabled EQUAL True`) and one for distribution groups (`securityEnabled EQUAL False`).</span></span>

![<span data-ttu-id="0f3bd-262">Guia Escopo no Editor de regras de sincronização</span><span class="sxs-lookup"><span data-stu-id="0f3bd-262">Scoping tab in Sync rule editor</span></span> ](./media/active-directory-aadconnectsync-understanding-default-configuration/syncrulescopingfilterout.png)

<span data-ttu-id="0f3bd-263">Essa regra é usada para definir quais grupos devem ser provisionados ao Azure AD.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-263">This rule is used to define which Groups should be provisioned to Azure AD.</span></span> <span data-ttu-id="0f3bd-264">Grupos de Distribuição devem ser habilitados para email para serem sincronizados com o Azure AD, mas, para os grupos de segurança, o email não é obrigatório.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-264">Distribution Groups must be mail enabled to be synchronized with Azure AD, but for security groups an email is not required.</span></span>

#### <a name="join-rules"></a><span data-ttu-id="0f3bd-265">Regras de associação</span><span class="sxs-lookup"><span data-stu-id="0f3bd-265">Join rules</span></span>
<span data-ttu-id="0f3bd-266">A terceira seção é usada para configurar como os objetos no espaço do conector se relacionam aos objetos no metaverso.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-266">The third section is used to configure how objects in the connector space relate to objects in the metaverse.</span></span> <span data-ttu-id="0f3bd-267">A regra que você viu anteriormente não tem qualquer configuração para Regras de Associação. Então, você vai examinar **Entrada do AD – Associar Usuário**.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-267">The rule you have looked at earlier does not have any configuration for Join Rules, so instead you are going to look at **In from AD – User Join**.</span></span>

![<span data-ttu-id="0f3bd-268">Guia Regras de junção no Editor de regras de sincronização</span><span class="sxs-lookup"><span data-stu-id="0f3bd-268">Join rules tab in Sync rule editor</span></span> ](./media/active-directory-aadconnectsync-understanding-default-configuration/syncrulejoinrules.png)

<span data-ttu-id="0f3bd-269">O conteúdo das regras de associação depende da opção correspondente selecionada no assistente de instalação.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-269">The content of the join rule depends on the matching option selected in the installation wizard.</span></span> <span data-ttu-id="0f3bd-270">Para uma regra de entrada, a avaliação se inicia com um objeto no espaço do conector de origem, e cada grupo de regras de associação é avaliado em sequência.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-270">For an inbound rule, the evaluation starts with an object in the source connector space and each group in the join rules is evaluated in sequence.</span></span> <span data-ttu-id="0f3bd-271">Se um objeto de origem for avaliado para corresponder exatamente a um objeto no metaverso usando uma das regras de associação, os objetos serão associados.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-271">If a source object is evaluated to match exactly one object in the metaverse using one of the join rules, the objects are joined.</span></span> <span data-ttu-id="0f3bd-272">Se todas as regras forem avaliadas e não houver correspondência, o Tipo de Link na página de descrição será usado.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-272">If all rules have been evaluated and there is no match, then the Link Type on the description page is used.</span></span> <span data-ttu-id="0f3bd-273">Se essa configuração for definida como **Provisionar**, um novo objeto será criado no destino, o metaverso.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-273">If this configuration is set to **Provision**, then a new object is created in the target, the metaverse.</span></span> <span data-ttu-id="0f3bd-274">Provisionar um novo objeto para o metaverso também é conhecido como **projetar** um objeto para o metaverso.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-274">To provision a new object to the metaverse is also known as to **project** an object to the metaverse.</span></span>

<span data-ttu-id="0f3bd-275">As regras de associação são avaliadas apenas uma vez.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-275">The join rules are only evaluated once.</span></span> <span data-ttu-id="0f3bd-276">Quando um objeto de espaço do conector e um objeto do metaverso são associados, eles permanecem associados enquanto o escopo da Regra de Sincronização ainda for satisfeito.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-276">When a connector space object and a metaverse object are joined, they remain joined as long as the scope of the Synchronization Rule is still satisfied.</span></span>

<span data-ttu-id="0f3bd-277">Ao serem avaliadas Regras de Sincronização, apenas uma Regra de Sincronização com as regras de associação definidas deve estar no escopo.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-277">When evaluating Synchronization Rules, only one Synchronization Rule with join rules defined must be in scope.</span></span> <span data-ttu-id="0f3bd-278">Se forem encontradas várias Regras de Sincronização com regras de associação para um objeto, um erro será gerado.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-278">If multiple Synchronization Rules with join rules are found for one object, an error is thrown.</span></span> <span data-ttu-id="0f3bd-279">Por esse motivo, a prática recomendada é ter apenas uma Regra de Sincronização com associação definida quando várias Regras de Sincronização estão no escopo de um objeto.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-279">For this reason, the best practice is to have only one Synchronization Rule with join defined when multiple Synchronization Rules are in scope for an object.</span></span> <span data-ttu-id="0f3bd-280">Na configuração pronta para uso para a sincronização do Azure AD Connect, essas regras podem ser encontradas examinando-se o nome para localizar aquelas com a palavra **Join** no fim do nome.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-280">In the out-of-box configuration for Azure AD Connect sync, these rules can be found by looking at the name and find those with the word **Join** at the end of the name.</span></span> <span data-ttu-id="0f3bd-281">Uma Regra de Sincronização sem regras de associação definidas aplicará os fluxos de atributo se outra Regra de Sincronização tiver associado os objetos ou provisionado um novo objeto no destino.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-281">A Synchronization Rule without any join rules defined applies the attribute flows when another Synchronization Rule joined the objects together or provisioned a new object in the target.</span></span>

<span data-ttu-id="0f3bd-282">Se você examinar a figura acima, poderá ver que a regra está tentando associar **objectSID** a **msExchMasterAccountSid** (Exchange) e a **msRTCSIP OriginatorSid (Lync)**, que é o que esperamos em uma topologia de floresta de recurso de conta.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-282">If you look at the picture above, you can see that the rule is trying to join **objectSID** with **msExchMasterAccountSid** (Exchange) and **msRTCSIP-OriginatorSid** (Lync), which is what we expect in an account-resource forest topology.</span></span> <span data-ttu-id="0f3bd-283">Você encontrará a mesma regra em todas as florestas.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-283">You find the same rule on all forests.</span></span> <span data-ttu-id="0f3bd-284">Pressupõe-se que cada floresta possa ser uma conta ou um recurso de floresta.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-284">The assumption is that every forest could be either an account or resource forest.</span></span> <span data-ttu-id="0f3bd-285">Essa configuração também funcionará se você tiver contas que residam em uma única floresta e não precisem ser unidas.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-285">This configuration also works if you have accounts that live in a single forest and do not have to be joined.</span></span>

#### <a name="transformations"></a><span data-ttu-id="0f3bd-286">Transformações</span><span class="sxs-lookup"><span data-stu-id="0f3bd-286">Transformations</span></span>
<span data-ttu-id="0f3bd-287">A seção de transformação define todos os fluxos de atributo que serão aplicados ao objeto de destino quando os objetos forem associados e o filtro de escopo for satisfeito.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-287">The transformation section defines all attribute flows that apply to the target object when the objects are joined and the scope filter is satisfied.</span></span> <span data-ttu-id="0f3bd-288">Voltando à Regra de Sincronização **Entrada do AD – usuário AccountEnabled** , você encontra as seguintes transformações:</span><span class="sxs-lookup"><span data-stu-id="0f3bd-288">Going back to the **In from AD – User AccountEnabled** Synchronization Rule, you find the following transformations:</span></span>

![<span data-ttu-id="0f3bd-289">Guia Transformações no Editor de regras de sincronização</span><span class="sxs-lookup"><span data-stu-id="0f3bd-289">Transformations tab in Sync rule editor</span></span> ](./media/active-directory-aadconnectsync-understanding-default-configuration/syncruletransformations.png)

<span data-ttu-id="0f3bd-290">Para colocar essa configuração em contexto, em uma implantação de floresta de Recurso de Conta, espera-se encontrar uma conta habilitada da floresta de contas e uma conta desabilitada na floresta de recursos com as configurações do Exchange e do Lync.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-290">To put this configuration in context, in an Account-Resource forest deployment, it is expected to find an enabled account in the account forest and a disabled account in the resource forest with Exchange and Lync settings.</span></span> <span data-ttu-id="0f3bd-291">A regra de sincronização que você está examinando contém os atributos necessários para entrada, e esses atributos devem fluir da floresta em que há uma conta habilitada.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-291">The Synchronization Rule you are looking at contains the attributes required for sign-in and these attributes should flow from the forest where there is an enabled account.</span></span> <span data-ttu-id="0f3bd-292">Todos esses fluxos de atributo são colocados juntos em uma Regra de Sincronização.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-292">All these attribute flows are put together in one Synchronization Rule.</span></span>

<span data-ttu-id="0f3bd-293">Uma transformação pode ter diferentes tipos: constante, direta e expressão.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-293">A transformation can have different types: Constant, Direct, and Expression.</span></span>

* <span data-ttu-id="0f3bd-294">Um fluxo constante sempre flui um valor codificado.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-294">A constant flow always flows a hardcoded value.</span></span> <span data-ttu-id="0f3bd-295">Nesse caso, ele sempre define o valor **True** no atributo de metaverso chamado **accountEnabled**.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-295">In the case above, it always sets the value **True** in the metaverse attribute named **accountEnabled**.</span></span>
* <span data-ttu-id="0f3bd-296">Um fluxo direto sempre flui o valor do atributo na fonte para o atributo de destino como está.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-296">A direct flow always flows the value of the attribute in the source to the target attribute as-is.</span></span>
* <span data-ttu-id="0f3bd-297">O terceiro tipo de fluxo é Expressão e permite configurações mais avançadas.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-297">The third flow type is Expression and it allows for more advanced configurations.</span></span>

<span data-ttu-id="0f3bd-298">A linguagem de expressão é VBA (Visual Basic for Applications). Portanto, pessoas com experiência no Microsoft Office ou VBScript reconhecerão o formato.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-298">The expression language is VBA (Visual Basic for Applications), so people with experience of Microsoft Office or VBScript will recognize the format.</span></span> <span data-ttu-id="0f3bd-299">Os atributos são colocados entre colchetes, [attributeName].</span><span class="sxs-lookup"><span data-stu-id="0f3bd-299">Attributes are enclosed in square brackets, [attributeName].</span></span> <span data-ttu-id="0f3bd-300">Os nomes de função e de atributo diferenciam maiúsculas de minúsculas, mas o Editor de Regras de Sincronização avaliará as expressões e fornecerá um aviso se a expressão não for válida.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-300">Attribute names and function names are case-sensitive, but the Synchronization Rules Editor evaluates the expressions and provide a warning if the expression is not valid.</span></span> <span data-ttu-id="0f3bd-301">Todas as expressões são expressas em uma única linha com funções aninhadas.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-301">All expressions are expressed on a single line with nested functions.</span></span> <span data-ttu-id="0f3bd-302">Para mostrar a capacidade da linguagem de configuração, aqui está o fluxo para pwdLastSet, mas com comentários adicionais inseridos:</span><span class="sxs-lookup"><span data-stu-id="0f3bd-302">To show the power of the configuration language, here is the flow for pwdLastSet, but with additional comments inserted:</span></span>

```
// If-then-else
IIF(
// (The evaluation for IIF) Is the attribute pwdLastSet present in AD?
IsPresent([pwdLastSet]),
// (The True part of IIF) If it is, then from right to left, convert the AD time format to a .Net datetime, change it to the time format used by Azure AD, and finally convert it to a string.
CStr(FormatDateTime(DateFromNum([pwdLastSet]),"yyyyMMddHHmmss.0Z")),
// (The False part of IIF) Nothing to contribute
NULL
)
```

<span data-ttu-id="0f3bd-303">Veja [Noções básicas sobre expressões de provisionamento declarativo](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md) para obter mais informações sobre a linguagem de expressão para fluxos de atributo.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-303">See [Understanding Declarative Provisioning Expressions](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md) for more information on the expression language for attribute flows.</span></span>

### <a name="precedence"></a><span data-ttu-id="0f3bd-304">Precedência</span><span class="sxs-lookup"><span data-stu-id="0f3bd-304">Precedence</span></span>
<span data-ttu-id="0f3bd-305">Agora você analisou algumas Regras de Sincronização individuais, mas as regras trabalham juntas na configuração.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-305">You have now looked at some individual Synchronization Rules, but the rules work together in the configuration.</span></span> <span data-ttu-id="0f3bd-306">Em alguns casos, um valor de atributo vêm de várias regras de sincronização para o mesmo atributo de destino.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-306">In some cases, an attribute value is contributed from multiple synchronization rules to the same target attribute.</span></span> <span data-ttu-id="0f3bd-307">Nesse caso, precedência do atributo é usada para determinar qual atributo vence.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-307">In this case, attribute precedence is used to determine which attribute wins.</span></span> <span data-ttu-id="0f3bd-308">Como exemplo, examine o atributo sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-308">As an example, look at the attribute sourceAnchor.</span></span> <span data-ttu-id="0f3bd-309">É um atributo importante para se conseguir entrar no AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-309">This attribute is an important attribute to be able to sign in to Azure AD.</span></span> <span data-ttu-id="0f3bd-310">Você pode encontrar um fluxo de atributo para esse atributo em duas diferentes regras de sincronização, **Entrada do AD – usuário AccountEnabled** e **Entrada do AD – usuário comum**.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-310">You can find an attribute flow for this attribute in two different Synchronization Rules, **In from AD – User AccountEnabled** and **In from AD – User Common**.</span></span> <span data-ttu-id="0f3bd-311">Devido à precedência de Regra de Sincronização, o atributo sourceAnchor terá a contribuição da floresta com uma conta habilitada primeiro se houver vários objetos associados ao objeto metaverso.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-311">Due to Synchronization Rule precedence, the sourceAnchor attribute is contributed from the forest with an enabled account first when there are several objects joined to the metaverse object.</span></span> <span data-ttu-id="0f3bd-312">Se nenhuma conta estiver habilitada, o mecanismo de sincronização usará a Regra de Sincronização para capturar tudo **Entrada do AD – Usuário Comum**.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-312">If there are no enabled accounts, then the sync engine uses the catch-all Synchronization Rule **In from AD – User Common**.</span></span> <span data-ttu-id="0f3bd-313">Essa configuração garante que, até mesmo para contas desabilitadas, ainda haja um sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-313">This configuration ensures that even for accounts that are disabled, there is still a sourceAnchor.</span></span>

![Regras de Sincronização Entrada](./media/active-directory-aadconnectsync-understanding-default-configuration/syncrulesinbound.png)

<span data-ttu-id="0f3bd-315">A precedência de Regras de Sincronização é definida em grupos pelo assistente de instalação.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-315">The precedence for Synchronization Rules is set in groups by the installation wizard.</span></span> <span data-ttu-id="0f3bd-316">Todas as regras em um grupo têm o mesmo nome, mas elas são conectadas a diferentes diretórios conectados.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-316">All rules in a group have the same name, but they are connected to different connected directories.</span></span> <span data-ttu-id="0f3bd-317">O assistente de instalação dá à regra **Entrada do AD – Associação de Usuário** maior precedência e itera por todos os diretórios do AD conectados.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-317">The installation wizard gives the rule **In from AD – User Join** highest precedence and it iterates over all connected AD directories.</span></span> <span data-ttu-id="0f3bd-318">Em seguida, ele continua com os próximos grupos de regras em uma ordem predefinida.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-318">It then continues with the next groups of rules in a predefined order.</span></span> <span data-ttu-id="0f3bd-319">Dentro de um grupo, as regras são adicionadas na ordem em que os conectores foram adicionados ao assistente.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-319">Inside a group, the rules are added in the order the Connectors were added in the wizard.</span></span> <span data-ttu-id="0f3bd-320">Se outro conector for adicionado usando o assistente, as Regras de Sincronização serão reordenadas e as novas regras do conector serão inseridas por último em cada grupo.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-320">If another Connector is added through the wizard, the Synchronization Rules are reordered and the new Connector’s rules are inserted last in each group.</span></span>

### <a name="putting-it-all-together"></a><span data-ttu-id="0f3bd-321">Juntando as peças</span><span class="sxs-lookup"><span data-stu-id="0f3bd-321">Putting it all together</span></span>
<span data-ttu-id="0f3bd-322">Agora sabemos o suficiente sobre Regras de Sincronização para poder entender como a configuração funciona com diferentes Regras de Sincronização.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-322">We now know enough about Synchronization Rules to be able to understand how the configuration works with the different Synchronization Rules.</span></span> <span data-ttu-id="0f3bd-323">Se você observar um usuário e os atributos que contribuíram para o metaverso, as regras são aplicadas na seguinte ordem:</span><span class="sxs-lookup"><span data-stu-id="0f3bd-323">If you look at a user and the attributes that are contributed to the metaverse, the rules are applied in the following order:</span></span>

| <span data-ttu-id="0f3bd-324">Nome</span><span class="sxs-lookup"><span data-stu-id="0f3bd-324">Name</span></span> | <span data-ttu-id="0f3bd-325">Comentário</span><span class="sxs-lookup"><span data-stu-id="0f3bd-325">Comment</span></span> |
|:--- |:--- |
| <span data-ttu-id="0f3bd-326">Entrada do AD – Associação de Usuário</span><span class="sxs-lookup"><span data-stu-id="0f3bd-326">In from AD – User Join</span></span> |<span data-ttu-id="0f3bd-327">Regra para associar objetos de espaço conector com metaverso.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-327">Rule for joining connector space objects with metaverse.</span></span> |
| <span data-ttu-id="0f3bd-328">Entrada do AD – UserAccount habilitada</span><span class="sxs-lookup"><span data-stu-id="0f3bd-328">In from AD – UserAccount Enabled</span></span> |<span data-ttu-id="0f3bd-329">Os atributos necessários para entrar no Azure AD e no Office 365.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-329">Attributes required for sign-in to Azure AD and Office 365.</span></span> <span data-ttu-id="0f3bd-330">Queremos esses atributos da conta habilitada.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-330">We want these attributes from the enabled account.</span></span> |
| <span data-ttu-id="0f3bd-331">Entrada do AD – usuário comum do Exchange</span><span class="sxs-lookup"><span data-stu-id="0f3bd-331">In from AD – User Common from Exchange</span></span> |<span data-ttu-id="0f3bd-332">Atributos encontrados na Lista de Endereços Global.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-332">Attributes found in the Global Address List.</span></span> <span data-ttu-id="0f3bd-333">Vamos supor que a qualidade dos dados é melhor na floresta em que achamos a caixa de correio do usuário.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-333">We assume the data quality is best in the forest where we have found the user’s mailbox.</span></span> |
| <span data-ttu-id="0f3bd-334">Entrada do AD – usuário comum</span><span class="sxs-lookup"><span data-stu-id="0f3bd-334">In from AD – User Common</span></span> |<span data-ttu-id="0f3bd-335">Atributos encontrados na Lista de Endereços Global.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-335">Attributes found in the Global Address List.</span></span> <span data-ttu-id="0f3bd-336">No caso de não encontramos uma caixa de correio, outros objetos associados podem contribuir com o valor do atributo.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-336">In case we didn’t find a mailbox, any other joined object can contribute the attribute value.</span></span> |
| <span data-ttu-id="0f3bd-337">Entrada do AD – usuário do Exchange</span><span class="sxs-lookup"><span data-stu-id="0f3bd-337">In from AD – User Exchange</span></span> |<span data-ttu-id="0f3bd-338">Existe somente se o Exchange foi detectado.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-338">Only exists if Exchange has been detected.</span></span> <span data-ttu-id="0f3bd-339">Flui todos os atributos do Exchange de infraestrutura.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-339">It flows all infrastructure Exchange attributes.</span></span> |
| <span data-ttu-id="0f3bd-340">Entrada do AD – usuário Lync</span><span class="sxs-lookup"><span data-stu-id="0f3bd-340">In from AD – User Lync</span></span> |<span data-ttu-id="0f3bd-341">Existe somente se o Lync foi detectado.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-341">Only exists if Lync has been detected.</span></span> <span data-ttu-id="0f3bd-342">Flui todos os atributos do Lync de infraestrutura.</span><span class="sxs-lookup"><span data-stu-id="0f3bd-342">It flows all infrastructure Lync attributes.</span></span> |

## <a name="next-steps"></a><span data-ttu-id="0f3bd-343">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="0f3bd-343">Next steps</span></span>
* <span data-ttu-id="0f3bd-344">Leia mais sobre o modelo de configuração em [Noções básicas do provisionamento declarativo](active-directory-aadconnectsync-understanding-declarative-provisioning.md).</span><span class="sxs-lookup"><span data-stu-id="0f3bd-344">Read more about the configuration model in [Understanding Declarative Provisioning](active-directory-aadconnectsync-understanding-declarative-provisioning.md).</span></span>
* <span data-ttu-id="0f3bd-345">Leia mais sobre a linguagem de expressão em [Noções básicas sobre expressões de provisionamento declarativo](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md).</span><span class="sxs-lookup"><span data-stu-id="0f3bd-345">Read more about the expression language in [Understanding Declarative Provisioning Expressions](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md).</span></span>
* <span data-ttu-id="0f3bd-346">Continue lendo sobre como a configuração pronta para uso funciona em [Noções básicas sobre usuários e contatos](active-directory-aadconnectsync-understanding-users-and-contacts.md)</span><span class="sxs-lookup"><span data-stu-id="0f3bd-346">Continue reading how the out-of-box configuration works in [Understanding Users and Contacts](active-directory-aadconnectsync-understanding-users-and-contacts.md)</span></span>
* <span data-ttu-id="0f3bd-347">Veja como fazer uma alteração prática usando o provisionamento declarativo em [Como fazer uma alteração na configuração padrão](active-directory-aadconnectsync-change-the-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="0f3bd-347">See how to make a practical change using declarative provisioning in [How to make a change to the default configuration](active-directory-aadconnectsync-change-the-configuration.md).</span></span>

<span data-ttu-id="0f3bd-348">**Tópicos de visão geral**</span><span class="sxs-lookup"><span data-stu-id="0f3bd-348">**Overview topics**</span></span>

* [<span data-ttu-id="0f3bd-349">Sincronização do Azure AD Connect: compreender e personalizar a sincronização</span><span class="sxs-lookup"><span data-stu-id="0f3bd-349">Azure AD Connect sync: Understand and customize synchronization</span></span>](active-directory-aadconnectsync-whatis.md)
* [<span data-ttu-id="0f3bd-350">Integração de suas identidades locais com o Active Directory do Azure</span><span class="sxs-lookup"><span data-stu-id="0f3bd-350">Integrating your on-premises identities with Azure Active Directory</span></span>](active-directory-aadconnect.md)

