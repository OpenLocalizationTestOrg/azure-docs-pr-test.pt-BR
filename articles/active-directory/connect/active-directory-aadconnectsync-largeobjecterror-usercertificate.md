---
title: "Sincronização do Azure AD Connect: Tratamento de erros LargeObject causados pelo atributo userCertificate | Microsoft Docs"
description: "Este tópico fornece as etapas de correção de erros LargeObject causados pelo atributo userCertificate."
services: active-directory
documentationcenter: 
author: cychua
manager: femila
editor: 
ms.assetid: 146ad5b3-74d9-4a83-b9e8-0973a19828d9
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/13/2017
ms.author: billmath
ms.openlocfilehash: 2a5418ff61e07793fceca5a8207c1c5aa18847b4
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/03/2017
---
# <a name="azure-ad-connect-sync-handling-largeobject-errors-caused-by-usercertificate-attribute"></a><span data-ttu-id="e3450-103">Sincronização do Azure AD Connect: Tratamento de erros LargeObject causados pelo atributo userCertificate</span><span class="sxs-lookup"><span data-stu-id="e3450-103">Azure AD Connect sync: Handling LargeObject errors caused by userCertificate attribute</span></span>

<span data-ttu-id="e3450-104">O Azure AD impõe um limite máximo de **15** valores de certificado no atributo **userCertificate**.</span><span class="sxs-lookup"><span data-stu-id="e3450-104">Azure AD enforces a maximum limit of **15** certificate values on the **userCertificate** attribute.</span></span> <span data-ttu-id="e3450-105">Se o Azure AD Connect exportar um objeto com mais de 15 valores para o Azure AD, o Azure AD retornará um erro **LargeObject** com a mensagem:</span><span class="sxs-lookup"><span data-stu-id="e3450-105">If Azure AD Connect exports an object with more than 15 values to Azure AD, Azure AD returns a **LargeObject** error with message:</span></span>

><span data-ttu-id="e3450-106">*“O objeto provisionado é muito grande. Restrinja o número de valores de atributo nesse objeto. A operação será repetida no próximo ciclo de sincronização...”*</span><span class="sxs-lookup"><span data-stu-id="e3450-106">*"The provisioned object is too large. Trim the number of attribute values on this object. The operation will be retried in the next synchronization cycle..."*</span></span>

<span data-ttu-id="e3450-107">O erro LargeObject pode ser causado por outros atributos do AD.</span><span class="sxs-lookup"><span data-stu-id="e3450-107">The LargeObject error may be caused by other AD attributes.</span></span> <span data-ttu-id="e3450-108">Para confirmar se ele realmente é causado pelo atributo userCertificate, você precisa verificar o objeto no AD local ou na [Pesquisa de Metaverso do Synchronization Service Manager](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnectsync-service-manager-ui-mvsearch).</span><span class="sxs-lookup"><span data-stu-id="e3450-108">To confirm it is indeed caused by the userCertificate attribute, you need to verify against the object either in on-premises AD or in the [Synchronization Service Manager Metaverse Search](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnectsync-service-manager-ui-mvsearch).</span></span>

<span data-ttu-id="e3450-109">Para obter a lista de objetos em seu locatário com erros LargeObject, use um dos seguintes métodos:</span><span class="sxs-lookup"><span data-stu-id="e3450-109">To obtain the list of objects in your tenant with LargeObject errors, use one of the following methods:</span></span>

 * <span data-ttu-id="e3450-110">Caso seu locatário esteja habilitado para o Azure AD Connect Health para sincronização, consulte o [Relatório de Erros de Sincronização](https://docs.microsoft.com/azure/active-directory/connect-health/active-directory-aadconnect-health-sync#object-level-synchronization-error-report-preview) fornecido.</span><span class="sxs-lookup"><span data-stu-id="e3450-110">If your tenant is enabled for Azure AD Connect Health for sync, you can refer to the [Synchronization Error Report](https://docs.microsoft.com/azure/active-directory/connect-health/active-directory-aadconnect-health-sync#object-level-synchronization-error-report-preview) provided.</span></span>
 
 * <span data-ttu-id="e3450-111">O email de notificação para erros de sincronização de diretório enviado ao final de cada ciclo de sincronização tem a lista de objetos com erros LargeObject.</span><span class="sxs-lookup"><span data-stu-id="e3450-111">The notification email for directory synchronization errors that is sent at the end of each sync cycle has the list of objects with LargeObject errors.</span></span> 
 * <span data-ttu-id="e3450-112">A [guia Operações do Synchronization Service Manager](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnectsync-service-manager-ui-operations) exibirá a lista de objetos com erros LargeObject se você clicar na última operação Exportar para o Azure AD.</span><span class="sxs-lookup"><span data-stu-id="e3450-112">The [Synchronization Service Manager Operations tab](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnectsync-service-manager-ui-operations) displays the list of objects with LargeObject errors if you click the latest Export to Azure AD operation.</span></span>
 
## <a name="mitigation-options"></a><span data-ttu-id="e3450-113">Opções de mitigação</span><span class="sxs-lookup"><span data-stu-id="e3450-113">Mitigation options</span></span>
<span data-ttu-id="e3450-114">Até que o erro LargeObject seja resolvido, outras alterações de atributo no mesmo objeto não podem ser exportadas para o Azure AD.</span><span class="sxs-lookup"><span data-stu-id="e3450-114">Until the LargeObject error is resolved, other attribute changes to the same object cannot be exported to Azure AD.</span></span> <span data-ttu-id="e3450-115">Para resolver o erro, considere as seguintes opções:</span><span class="sxs-lookup"><span data-stu-id="e3450-115">To resolve the error, you can consider the following options:</span></span>

 * <span data-ttu-id="e3450-116">Atualize o Azure AD Connect para o build 1.1.524.0 ou posterior.</span><span class="sxs-lookup"><span data-stu-id="e3450-116">Upgrade Azure AD Connect to build 1.1.524.0 or after.</span></span> <span data-ttu-id="e3450-117">No build 1.1.524.0 do Azure AD Connect, as regras de sincronização iniciais foram atualizadas para não exportar os atributos userCertificate e userSMIMECertificate se os atributos tiverem mais de 15 valores.</span><span class="sxs-lookup"><span data-stu-id="e3450-117">In Azure AD Connect build 1.1.524.0, the out-of-box synchronization rules have been updated to not export attributes userCertificate and userSMIMECertificate if the attributes have more than 15 values.</span></span> <span data-ttu-id="e3450-118">Para obter detalhes sobre como atualizar o Azure AD Connect, consulte o artigo [Azure AD Connect: atualizar de uma versão anterior para a versão mais recente](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-upgrade-previous-version).</span><span class="sxs-lookup"><span data-stu-id="e3450-118">For details on how to upgrade Azure AD Connect, refer to article [Azure AD Connect: Upgrade from a previous version to the latest](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-upgrade-previous-version).</span></span>

 * <span data-ttu-id="e3450-119">Implemente uma **regra de sincronização de saída** no Azure AD Connect que exporta um **valor nulo em vez dos valores reais de objetos com mais de 15 valores de certificado**.</span><span class="sxs-lookup"><span data-stu-id="e3450-119">Implement an **outbound sync rule** in Azure AD Connect that exports a **null value instead of the actual values for objects with more than 15 certificate values**.</span></span> <span data-ttu-id="e3450-120">Essa opção será adequada se você não precisar que nenhum dos valores de certificado seja exportado para o Azure AD para objetos com mais de 15 valores.</span><span class="sxs-lookup"><span data-stu-id="e3450-120">This option is suitable if you do not require any of the certificate values to be exported to Azure AD for objects with more than 15 values.</span></span> <span data-ttu-id="e3450-121">Para obter detalhes sobre como implementar essa regra de sincronização, consulte a próxima seção [Implementando uma regra de sincronização para limitar a exportação do atributo userCertificate](#implementing-sync-rule-to-limit-export-of-usercertificate-attribute).</span><span class="sxs-lookup"><span data-stu-id="e3450-121">For details on how to implement this sync rule, refer to next section [Implementing sync rule to limit export of userCertificate attribute](#implementing-sync-rule-to-limit-export-of-usercertificate-attribute).</span></span>

 * <span data-ttu-id="e3450-122">Reduza o número de valores de certificado no objeto do AD local (15 ou menos) removendo os valores que não estão mais sendo usados por sua organização.</span><span class="sxs-lookup"><span data-stu-id="e3450-122">Reduce the number of certificate values on the on-premises AD object (15 or less) by removing values that are no longer in use by your organization.</span></span> <span data-ttu-id="e3450-123">Isso será adequado se a sobrecarga do atributo for causada por certificados expirados ou não utilizados.</span><span class="sxs-lookup"><span data-stu-id="e3450-123">This is suitable if the attribute bloat is caused by expired or unused certificates.</span></span> <span data-ttu-id="e3450-124">Use o [script do PowerShell disponível aqui](https://gallery.technet.microsoft.com/Remove-Expired-Certificates-0517e34f) para ajudar a encontrar, fazer backup e excluir certificados expirados no AD local.</span><span class="sxs-lookup"><span data-stu-id="e3450-124">You can use the [PowerShell script available here](https://gallery.technet.microsoft.com/Remove-Expired-Certificates-0517e34f) to help find, backup, and delete expired certificates in your on-premises AD.</span></span> <span data-ttu-id="e3450-125">Antes de excluir os certificados, é recomendável verificar com os administradores de Infraestrutura de Chave Pública de sua organização.</span><span class="sxs-lookup"><span data-stu-id="e3450-125">Before deleting the certificates, it is recommended that you verify with the Public-Key-Infrastructure administrators in your organization.</span></span>

 * <span data-ttu-id="e3450-126">Configure o Azure AD Connect para excluir o atributo userCertificate de ser exportado para o Azure AD.</span><span class="sxs-lookup"><span data-stu-id="e3450-126">Configure Azure AD Connect to exclude the userCertificate attribute from being exported to Azure AD.</span></span> <span data-ttu-id="e3450-127">Em geral, não recomendamos essa opção, pois o atributo pode ser usado pelo Microsoft Online Services para habilitar cenários específicos.</span><span class="sxs-lookup"><span data-stu-id="e3450-127">In general, we do not recommend this option since the attribute may be used by Microsoft Online Services to enable specific scenarios.</span></span> <span data-ttu-id="e3450-128">Especificamente:</span><span class="sxs-lookup"><span data-stu-id="e3450-128">In particular:</span></span>
    * <span data-ttu-id="e3450-129">O atributo userCertificate no objeto User é usado por clientes do Exchange Online e do Outlook para criptografia e autenticação de mensagens.</span><span class="sxs-lookup"><span data-stu-id="e3450-129">The userCertificate attribute on the User object is used by Exchange Online and Outlook clients for message signing and encryption.</span></span> <span data-ttu-id="e3450-130">Para saber mais sobre esse recurso, consulte o artigo [S/MIME para criptografia e autenticação de mensagens](https://technet.microsoft.com/library/dn626158(v=exchg.150).aspx).</span><span class="sxs-lookup"><span data-stu-id="e3450-130">To learn more about this feature, refer to article [S/MIME for message signing and encryption](https://technet.microsoft.com/library/dn626158(v=exchg.150).aspx).</span></span>

    * <span data-ttu-id="e3450-131">O atributo userCertificate no objeto Computer é usado pelo Azure AD para permitir que os dispositivos ingressados no domínio local do Windows 10 se conectem ao Azure AD.</span><span class="sxs-lookup"><span data-stu-id="e3450-131">The userCertificate attribute on the Computer object is used by Azure AD to allow Windows 10 on-premises domain-joined devices to connect to Azure AD.</span></span> <span data-ttu-id="e3450-132">Para saber mais sobre esse recurso, consulte o artigo [Conectar dispositivos ingressados no domínio ao Azure AD para experiências com o Windows 10](https://docs.microsoft.com/azure/active-directory/active-directory-azureadjoin-devices-group-policy).</span><span class="sxs-lookup"><span data-stu-id="e3450-132">To learn more about this feature, please refer to article [Connect domain-joined devices to Azure AD for Windows 10 experiences](https://docs.microsoft.com/azure/active-directory/active-directory-azureadjoin-devices-group-policy).</span></span>

## <a name="implementing-sync-rule-to-limit-export-of-usercertificate-attribute"></a><span data-ttu-id="e3450-133">Implementando a regra de sincronização para limitar a exportação do atributo userCertificate</span><span class="sxs-lookup"><span data-stu-id="e3450-133">Implementing sync rule to limit export of userCertificate attribute</span></span>
<span data-ttu-id="e3450-134">Para resolver o erro LargeObject causado pelo atributo userCertificate, implemente uma regra de sincronização de saída no Azure AD Connect que exporta um **valor nulo em vez dos valores reais de objetos com mais de 15 valores de certificado**.</span><span class="sxs-lookup"><span data-stu-id="e3450-134">To resolve the LargeObject error caused by the userCertificate attribute, you can implement an outbound sync rule in Azure AD Connect that exports a **null value instead of the actual values for objects with more than 15 certificate values**.</span></span> <span data-ttu-id="e3450-135">Esta seção descreve as etapas necessárias para implementar a regra de sincronização em objetos **User**.</span><span class="sxs-lookup"><span data-stu-id="e3450-135">This section describes the steps required to implement the sync rule for **User** objects.</span></span> <span data-ttu-id="e3450-136">As etapas podem ser adaptadas para objetos **Contact** e **Computer**.</span><span class="sxs-lookup"><span data-stu-id="e3450-136">The steps can be adapted for **Contact** and **Computer** objects.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="e3450-137">A exportação de um valor nulo remove os valores de certificado anteriormente exportados com êxito para o Azure AD.</span><span class="sxs-lookup"><span data-stu-id="e3450-137">Exporting null value removes certificate values previously exported successfully to Azure AD.</span></span>

<span data-ttu-id="e3450-138">As etapas podem ser resumidas como:</span><span class="sxs-lookup"><span data-stu-id="e3450-138">The steps can be summarized as:</span></span>

1. <span data-ttu-id="e3450-139">Desabilitar o agendador de sincronização e verificar se não há nenhuma sincronização em andamento.</span><span class="sxs-lookup"><span data-stu-id="e3450-139">Disable sync scheduler and verify there is no synchronization in progress.</span></span>
3. <span data-ttu-id="e3450-140">Encontrar a regra de sincronização de saída existente para o atributo userCertificate.</span><span class="sxs-lookup"><span data-stu-id="e3450-140">Find the existing outbound sync rule for userCertificate attribute.</span></span>
4. <span data-ttu-id="e3450-141">Criar a regra de sincronização de saída necessária.</span><span class="sxs-lookup"><span data-stu-id="e3450-141">Create the outbound sync rule required.</span></span>
5. <span data-ttu-id="e3450-142">Verificar a nova regra de sincronização em um objeto existente com o erro LargeObject.</span><span class="sxs-lookup"><span data-stu-id="e3450-142">Verify the new sync rule on an existing object with LargeObject error.</span></span>
6. <span data-ttu-id="e3450-143">Aplicar a nova regra de sincronização aos objetos restantes com o erro LargeObject.</span><span class="sxs-lookup"><span data-stu-id="e3450-143">Apply the new sync rule to remaining objects with LargeObject error.</span></span>
7. <span data-ttu-id="e3450-144">Verificar se não há alterações inesperadas com exportação pendente para o Azure AD.</span><span class="sxs-lookup"><span data-stu-id="e3450-144">Verify there are no unexpected changes waiting to be exported to Azure AD.</span></span>
8. <span data-ttu-id="e3450-145">Exportar as alterações para o Azure AD.</span><span class="sxs-lookup"><span data-stu-id="e3450-145">Export the changes to Azure AD.</span></span>
9. <span data-ttu-id="e3450-146">Habilitar o agendador de sincronização novamente.</span><span class="sxs-lookup"><span data-stu-id="e3450-146">Re-enable sync scheduler.</span></span>

### <a name="step-1-disable-sync-scheduler-and-verify-there-is-no-synchronization-in-progress"></a><span data-ttu-id="e3450-147">Etapa 1.</span><span class="sxs-lookup"><span data-stu-id="e3450-147">Step 1.</span></span> <span data-ttu-id="e3450-148">Desabilitar o agendador de sincronização e verificar se não há nenhuma sincronização em andamento</span><span class="sxs-lookup"><span data-stu-id="e3450-148">Disable sync scheduler and verify there is no synchronization in progress</span></span>
<span data-ttu-id="e3450-149">Garanta que não há nenhuma sincronização em andamento durante a implementação de uma nova regra de sincronização, a fim de evitar a exportação de alterações indesejadas para o Azure AD.</span><span class="sxs-lookup"><span data-stu-id="e3450-149">Ensure no synchronization takes place while you are in the middle of implementing a new sync rule to avoid unintended changes being exported to Azure AD.</span></span> <span data-ttu-id="e3450-150">Para desabilitar o agendador de sincronização interno:</span><span class="sxs-lookup"><span data-stu-id="e3450-150">To disable the built-in sync scheduler:</span></span>
1. <span data-ttu-id="e3450-151">Inicie uma sessão do PowerShell no servidor do Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="e3450-151">Start PowerShell session on the Azure AD Connect server.</span></span>

2. <span data-ttu-id="e3450-152">Desabilite a sincronização agendada executando o cmdlet: `Set-ADSyncScheduler -SyncCycleEnabled $false`</span><span class="sxs-lookup"><span data-stu-id="e3450-152">Disable scheduled synchronization by running cmdlet: `Set-ADSyncScheduler -SyncCycleEnabled $false`</span></span>

> [!Note]
> <span data-ttu-id="e3450-153">As etapas anteriores só são aplicáveis às versões mais novas (1.1.xxx.x) do Azure AD Connect com o agendador interno.</span><span class="sxs-lookup"><span data-stu-id="e3450-153">The preceding steps are only applicable to newer versions (1.1.xxx.x) of Azure AD Connect with the built-in scheduler.</span></span> <span data-ttu-id="e3450-154">Se você estiver usando versões mais antigas (1.0.xxx.x) do Azure AD Connect que usam o Agendador de Tarefas do Windows ou estiver usando seu próprio agendador personalizado (caso incomum) para disparar a sincronização periódica, precisará desabilitá-las de acordo.</span><span class="sxs-lookup"><span data-stu-id="e3450-154">If you are using older versions (1.0.xxx.x) of Azure AD Connect that uses Windows Task Scheduler, or you are using your own custom scheduler (not common) to trigger periodic synchronization, you need to disable them accordingly.</span></span>

3. <span data-ttu-id="e3450-155">Inicie o **Synchronization Service Manager** acessando INICIAR → Serviço de Sincronização.</span><span class="sxs-lookup"><span data-stu-id="e3450-155">Start the **Synchronization Service Manager** by going to START → Synchronization Service.</span></span>

4. <span data-ttu-id="e3450-156">Acesse a guia **Operações** e confirme se não há nenhuma operação cujo status é *“Em andamento”.*</span><span class="sxs-lookup"><span data-stu-id="e3450-156">Go to the **Operations** tab and confirm there is no operation whose status is *“in progress.”*</span></span>

### <a name="step-2-find-the-existing-outbound-sync-rule-for-usercertificate-attribute"></a><span data-ttu-id="e3450-157">Etapa 2.</span><span class="sxs-lookup"><span data-stu-id="e3450-157">Step 2.</span></span> <span data-ttu-id="e3450-158">Encontrar a regra de sincronização de saída existente para o atributo userCertificate</span><span class="sxs-lookup"><span data-stu-id="e3450-158">Find the existing outbound sync rule for userCertificate attribute</span></span>
<span data-ttu-id="e3450-159">Deve haver uma regra de sincronização existente que é habilitada e configurada para exportar o atributo userCertificate para objetos User para o Azure AD.</span><span class="sxs-lookup"><span data-stu-id="e3450-159">There should be an existing sync rule that is enabled and configured to export userCertificate attribute for User objects to Azure AD.</span></span> <span data-ttu-id="e3450-160">Localize essa regra de sincronização para descobrir sua configuração de **precedência** e **filtro de escopo**:</span><span class="sxs-lookup"><span data-stu-id="e3450-160">Locate this sync rule to find out its **precedence** and **scoping filter** configuration:</span></span>

1. <span data-ttu-id="e3450-161">Inicie o **Editor de Regras de Sincronização** acessando INICIAR → Editor de Regras de Sincronização.</span><span class="sxs-lookup"><span data-stu-id="e3450-161">Start the **Synchronization Rules Editor** by going to START → Synchronization Rules Editor.</span></span>

2. <span data-ttu-id="e3450-162">Configure os filtros de pesquisa com os seguintes valores:</span><span class="sxs-lookup"><span data-stu-id="e3450-162">Configure the search filters with the following values:</span></span>

    | <span data-ttu-id="e3450-163">Atributo</span><span class="sxs-lookup"><span data-stu-id="e3450-163">Attribute</span></span> | <span data-ttu-id="e3450-164">Valor</span><span class="sxs-lookup"><span data-stu-id="e3450-164">Value</span></span> |
    | --- | --- |
    | <span data-ttu-id="e3450-165">Direção</span><span class="sxs-lookup"><span data-stu-id="e3450-165">Direction</span></span> |<span data-ttu-id="e3450-166">**Saída**</span><span class="sxs-lookup"><span data-stu-id="e3450-166">**Outbound**</span></span> |
    | <span data-ttu-id="e3450-167">Tipo de Objeto de MV</span><span class="sxs-lookup"><span data-stu-id="e3450-167">MV Object Type</span></span> |<span data-ttu-id="e3450-168">**Pessoa**</span><span class="sxs-lookup"><span data-stu-id="e3450-168">**Person**</span></span> |
    | <span data-ttu-id="e3450-169">Conector</span><span class="sxs-lookup"><span data-stu-id="e3450-169">Connector</span></span> |<span data-ttu-id="e3450-170">*nome de seu conector do Azure AD*</span><span class="sxs-lookup"><span data-stu-id="e3450-170">*name of your Azure AD connector*</span></span> |
    | <span data-ttu-id="e3450-171">Tipo de Objeto de Conector</span><span class="sxs-lookup"><span data-stu-id="e3450-171">Connector Object Type</span></span> |<span data-ttu-id="e3450-172">**user**</span><span class="sxs-lookup"><span data-stu-id="e3450-172">**user**</span></span> |
    | <span data-ttu-id="e3450-173">Atributos de MV</span><span class="sxs-lookup"><span data-stu-id="e3450-173">MV attribute</span></span> |<span data-ttu-id="e3450-174">**userCertificate**</span><span class="sxs-lookup"><span data-stu-id="e3450-174">**userCertificate**</span></span> |

3. <span data-ttu-id="e3450-175">Se você estiver usando regras de sincronização OOB (integradas) para o conector do Azure AD para exportar o atributo userCertificate de objetos User, deverá retornar à regra *“Saída para AAD – Exchange Online do Usuário”*.</span><span class="sxs-lookup"><span data-stu-id="e3450-175">If you are using OOB (out-of-box) sync rules to Azure AD connector to export userCertficiate attribute for User objects, you should get back the *“Out to AAD – User ExchangeOnline”* rule.</span></span>
4. <span data-ttu-id="e3450-176">Anote o valor de **precedência** dessa regra de sincronização.</span><span class="sxs-lookup"><span data-stu-id="e3450-176">Note down the **precedence** value of this sync rule.</span></span>
5. <span data-ttu-id="e3450-177">Selecione a regra de sincronização e clique em **Editar**.</span><span class="sxs-lookup"><span data-stu-id="e3450-177">Select the sync rule and click **Edit**.</span></span>
6. <span data-ttu-id="e3450-178">Na caixa de diálogo pop-up *“Editar Confirmação de Regra Reservada”*, clique em **Não**.</span><span class="sxs-lookup"><span data-stu-id="e3450-178">In the *“Edit Reserved Rule Confirmation”* pop-up dialog, click **No**.</span></span> <span data-ttu-id="e3450-179">(Não se preocupe; não vamos fazer nenhuma alteração nessa regra de sincronização).</span><span class="sxs-lookup"><span data-stu-id="e3450-179">(Don’t worry, we are not going to make any change to this sync rule).</span></span>
7. <span data-ttu-id="e3450-180">Na tela de edição, selecione a guia **Filtro de escopo**.</span><span class="sxs-lookup"><span data-stu-id="e3450-180">In the edit screen, select the **Scoping filter** tab.</span></span>
8. <span data-ttu-id="e3450-181">Anote a configuração de filtro de escopo.</span><span class="sxs-lookup"><span data-stu-id="e3450-181">Note down the scoping filter configuration.</span></span> <span data-ttu-id="e3450-182">Se você estiver usando a regra de sincronização OOB, deverá haver exatamente **um grupo de filtro de escopo que contém duas cláusulas**, incluindo:</span><span class="sxs-lookup"><span data-stu-id="e3450-182">If you are using the OOB sync rule, there should exactly be **one scoping filter group containing two clauses**, including:</span></span>

    | <span data-ttu-id="e3450-183">Atributo</span><span class="sxs-lookup"><span data-stu-id="e3450-183">Attribute</span></span> | <span data-ttu-id="e3450-184">Operador</span><span class="sxs-lookup"><span data-stu-id="e3450-184">Operator</span></span> | <span data-ttu-id="e3450-185">Valor</span><span class="sxs-lookup"><span data-stu-id="e3450-185">Value</span></span> |
    | --- | --- | --- |
    | <span data-ttu-id="e3450-186">sourceObjectType</span><span class="sxs-lookup"><span data-stu-id="e3450-186">sourceObjectType</span></span> | <span data-ttu-id="e3450-187">EQUAL</span><span class="sxs-lookup"><span data-stu-id="e3450-187">EQUAL</span></span> | <span data-ttu-id="e3450-188">Usuário</span><span class="sxs-lookup"><span data-stu-id="e3450-188">User</span></span> |
    | <span data-ttu-id="e3450-189">cloudMastered</span><span class="sxs-lookup"><span data-stu-id="e3450-189">cloudMastered</span></span> | <span data-ttu-id="e3450-190">NOTEQUAL</span><span class="sxs-lookup"><span data-stu-id="e3450-190">NOTEQUAL</span></span> | <span data-ttu-id="e3450-191">True </span><span class="sxs-lookup"><span data-stu-id="e3450-191">True</span></span> |

### <a name="step-3-create-the-outbound-sync-rule-required"></a><span data-ttu-id="e3450-192">Etapa 3.</span><span class="sxs-lookup"><span data-stu-id="e3450-192">Step 3.</span></span> <span data-ttu-id="e3450-193">Criar a regra de sincronização de saída necessária</span><span class="sxs-lookup"><span data-stu-id="e3450-193">Create the outbound sync rule required</span></span>
<span data-ttu-id="e3450-194">A nova regra de sincronização deve ter o mesmo **filtro de escopo** e a mesma **precedência mais alta** da regra de sincronização existente.</span><span class="sxs-lookup"><span data-stu-id="e3450-194">The new sync rule must have the same **scoping filter** and **higher precedence** than the existing sync rule.</span></span> <span data-ttu-id="e3450-195">Isso garante que a nova regra de sincronização se aplica ao mesmo conjunto de objetos da regra de sincronização existente e substitui a regra de sincronização existente do atributo userCertificate.</span><span class="sxs-lookup"><span data-stu-id="e3450-195">This ensures that the new sync rule applies to the same set of objects as the existing sync rule and overrides the existing sync rule for the userCertificate attribute.</span></span> <span data-ttu-id="e3450-196">Para criar a regra de sincronização:</span><span class="sxs-lookup"><span data-stu-id="e3450-196">To create the sync rule:</span></span>
1. <span data-ttu-id="e3450-197">No Editor de Regras de Sincronização, clique no botão **Adicionar nova regra**.</span><span class="sxs-lookup"><span data-stu-id="e3450-197">In the Synchronization Rules Editor, click the **Add new rule** button.</span></span>
2. <span data-ttu-id="e3450-198">Na **guia Descrição**, forneça a seguinte configuração:</span><span class="sxs-lookup"><span data-stu-id="e3450-198">Under the **Description tab**, provide the following configuration:</span></span>

    | <span data-ttu-id="e3450-199">Atributo</span><span class="sxs-lookup"><span data-stu-id="e3450-199">Attribute</span></span> | <span data-ttu-id="e3450-200">Valor</span><span class="sxs-lookup"><span data-stu-id="e3450-200">Value</span></span> | <span data-ttu-id="e3450-201">Detalhes</span><span class="sxs-lookup"><span data-stu-id="e3450-201">Details</span></span> |
    | --- | --- | --- |
    | <span data-ttu-id="e3450-202">Nome</span><span class="sxs-lookup"><span data-stu-id="e3450-202">Name</span></span> | <span data-ttu-id="e3450-203">*Fornecer um nome*</span><span class="sxs-lookup"><span data-stu-id="e3450-203">*Provide a name*</span></span> | <span data-ttu-id="e3450-204">Por exemplo, *“Saída para AAD – Substituição personalizado para userCertificate”*</span><span class="sxs-lookup"><span data-stu-id="e3450-204">E.g., *“Out to AAD – Custom override for userCertificate”*</span></span> |
    | <span data-ttu-id="e3450-205">Descrição</span><span class="sxs-lookup"><span data-stu-id="e3450-205">Description</span></span> | <span data-ttu-id="e3450-206">*Fornecer uma descrição*</span><span class="sxs-lookup"><span data-stu-id="e3450-206">*Provide a description*</span></span> | <span data-ttu-id="e3450-207">Por exemplo, *“Se o atributo userCertificate tiver mais de 15 valores, exportar NULL”.*</span><span class="sxs-lookup"><span data-stu-id="e3450-207">E.g., *“If userCertificate attribute has more than 15 values, export NULL.”*</span></span> |
    | <span data-ttu-id="e3450-208">Sistema Conectado</span><span class="sxs-lookup"><span data-stu-id="e3450-208">Connected System</span></span> | <span data-ttu-id="e3450-209">*Selecionar o Azure AD Connector*</span><span class="sxs-lookup"><span data-stu-id="e3450-209">*Select the Azure AD Connector*</span></span> |
    | <span data-ttu-id="e3450-210">Tipo de Objeto do Sistema Conectado</span><span class="sxs-lookup"><span data-stu-id="e3450-210">Connected System Object Type</span></span> | <span data-ttu-id="e3450-211">**user**</span><span class="sxs-lookup"><span data-stu-id="e3450-211">**user**</span></span> | |
    | <span data-ttu-id="e3450-212">Tipo de Objeto de Metaverso</span><span class="sxs-lookup"><span data-stu-id="e3450-212">Metaverse Object Type</span></span> | <span data-ttu-id="e3450-213">**person**</span><span class="sxs-lookup"><span data-stu-id="e3450-213">**person**</span></span> | |
    | <span data-ttu-id="e3450-214">Tipo de link</span><span class="sxs-lookup"><span data-stu-id="e3450-214">Link Type</span></span> | <span data-ttu-id="e3450-215">**Join**</span><span class="sxs-lookup"><span data-stu-id="e3450-215">**Join**</span></span> | |
    | <span data-ttu-id="e3450-216">Precedência</span><span class="sxs-lookup"><span data-stu-id="e3450-216">Precedence</span></span> | <span data-ttu-id="e3450-217">*Escolher um número entre 1 a 99*</span><span class="sxs-lookup"><span data-stu-id="e3450-217">*Chose a number between 1 - 99*</span></span> | <span data-ttu-id="e3450-218">O número escolhido não deve ser usado por nenhuma regra de sincronização existente e tem um valor mais baixo (e, portanto, uma precedência mais alta) que a regra de sincronização existente.</span><span class="sxs-lookup"><span data-stu-id="e3450-218">The number chosen must not be used by any existing sync rule and has a lower value (and therefore, higher precedence) than the existing sync rule.</span></span> |

3. <span data-ttu-id="e3450-219">Acesse a guia **Filtro de escopo** e implemente o mesmo filtro de escopo usado pela regra de sincronização existente.</span><span class="sxs-lookup"><span data-stu-id="e3450-219">Go to the **Scoping filter** tab and implement the same scoping filter the existing sync rule is using.</span></span>
4. <span data-ttu-id="e3450-220">Ignore a guia **Regras de junção**.</span><span class="sxs-lookup"><span data-stu-id="e3450-220">Skip the **Join rules** tab.</span></span>
5. <span data-ttu-id="e3450-221">Acesse a guia **Transformações** para adicionar uma nova transformação usando a seguinte configuração:</span><span class="sxs-lookup"><span data-stu-id="e3450-221">Go to the **Transformations** tab to add a new transformation using following configuration:</span></span>

    | <span data-ttu-id="e3450-222">Atributo</span><span class="sxs-lookup"><span data-stu-id="e3450-222">Attribute</span></span> | <span data-ttu-id="e3450-223">Valor</span><span class="sxs-lookup"><span data-stu-id="e3450-223">Value</span></span> |
    | --- | --- |
    | <span data-ttu-id="e3450-224">Tipo de Fluxo</span><span class="sxs-lookup"><span data-stu-id="e3450-224">Flow Type</span></span> |<span data-ttu-id="e3450-225">**Expressão**</span><span class="sxs-lookup"><span data-stu-id="e3450-225">**Expression**</span></span> |
    | <span data-ttu-id="e3450-226">Atributo de Destino</span><span class="sxs-lookup"><span data-stu-id="e3450-226">Target Attribute</span></span> |<span data-ttu-id="e3450-227">**userCertificate**</span><span class="sxs-lookup"><span data-stu-id="e3450-227">**userCertificate**</span></span> |
    | <span data-ttu-id="e3450-228">Atributo de Origem</span><span class="sxs-lookup"><span data-stu-id="e3450-228">Source Attribute</span></span> |<span data-ttu-id="e3450-229">*Use a seguinte expressão*: `IIF(IsNullOrEmpty([userCertificate]), NULL, IIF((Count([userCertificate])> 15),AuthoritativeNull,[userCertificate]))`</span><span class="sxs-lookup"><span data-stu-id="e3450-229">*Use the following expression*: `IIF(IsNullOrEmpty([userCertificate]), NULL, IIF((Count([userCertificate])> 15),AuthoritativeNull,[userCertificate]))`</span></span> |
    
6. <span data-ttu-id="e3450-230">Clique no botão **Adicionar** para criar a regra de sincronização.</span><span class="sxs-lookup"><span data-stu-id="e3450-230">Click the **Add** button to create the sync rule.</span></span>

### <a name="step-4-verify-the-new-sync-rule-on-an-existing-object-with-largeobject-error"></a><span data-ttu-id="e3450-231">Etapa 4.</span><span class="sxs-lookup"><span data-stu-id="e3450-231">Step 4.</span></span> <span data-ttu-id="e3450-232">Verificar a nova regra de sincronização em um objeto existente com o erro LargeObject</span><span class="sxs-lookup"><span data-stu-id="e3450-232">Verify the new sync rule on an existing object with LargeObject error</span></span>
<span data-ttu-id="e3450-233">Isso serve para verificar se a regra de sincronização criada está funcionando corretamente em um objeto existente do AD com o erro LargeObject antes de aplicá-la a outros objetos:</span><span class="sxs-lookup"><span data-stu-id="e3450-233">This is to verify that the sync rule created is working correctly on an existing AD object with LargeObject error before you apply it to other objects:</span></span>
1. <span data-ttu-id="e3450-234">Acesse a guia **Operações** no Synchronization Service Manager.</span><span class="sxs-lookup"><span data-stu-id="e3450-234">Go to the **Operations** tab in the Synchronization Service Manager.</span></span>
2. <span data-ttu-id="e3450-235">Selecione a operação mais recente Exportar para o Azure AD e clique em um dos objetos com erros LargeObject.</span><span class="sxs-lookup"><span data-stu-id="e3450-235">Select the most recent Export to Azure AD operation and click on one of the objects with LargeObject errors.</span></span>
3.  <span data-ttu-id="e3450-236">Na tela pop-up de Propriedades de Objeto do Espaço Conector, clique no botão **Visualizar**.</span><span class="sxs-lookup"><span data-stu-id="e3450-236">In the Connector Space Object Properties pop-up screen, click on the **Preview** button.</span></span>
4. <span data-ttu-id="e3450-237">Na tela pop-up Visualização, selecione **Sincronização total** e clique em **Confirmar Visualização**.</span><span class="sxs-lookup"><span data-stu-id="e3450-237">In the Preview pop-up screen, select **Full synchronization** and click **Commit Preview**.</span></span>
5. <span data-ttu-id="e3450-238">Feche a tela Visualização e a tela Propriedades de Objeto do Espaço Conector.</span><span class="sxs-lookup"><span data-stu-id="e3450-238">Close the Preview screen and the Connector Space Object Properties screen.</span></span>
6. <span data-ttu-id="e3450-239">Acesse a guia **Conectores** no Synchronization Service Manager.</span><span class="sxs-lookup"><span data-stu-id="e3450-239">Go to the **Connectors** tab in the Synchronization Service Manager.</span></span>
7. <span data-ttu-id="e3450-240">Clique com o botão direito do mouse em **Azure AD** Connector e selecione **Executar...**</span><span class="sxs-lookup"><span data-stu-id="e3450-240">Right-click on the **Azure AD** Connector and select **Run...**</span></span>
8. <span data-ttu-id="e3450-241">No pop-up Executar Conector, selecione a etapa **Exportar** e clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="e3450-241">In the Run Connector pop-up, select **Export** step and click **OK**.</span></span>
9. <span data-ttu-id="e3450-242">Aguarde até que a etapa Exportar para o Azure AD seja concluída e confirme se não há mais nenhum erro LargeObject nesse objeto específico.</span><span class="sxs-lookup"><span data-stu-id="e3450-242">Wait for Export to Azure AD to complete and confirm there is no more LargeObject error on this specific object.</span></span>

### <a name="step-5-apply-the-new-sync-rule-to-remaining-objects-with-largeobject-error"></a><span data-ttu-id="e3450-243">Etapa 5.</span><span class="sxs-lookup"><span data-stu-id="e3450-243">Step 5.</span></span> <span data-ttu-id="e3450-244">Aplicar a nova regra de sincronização aos objetos restantes com o erro LargeObject</span><span class="sxs-lookup"><span data-stu-id="e3450-244">Apply the new sync rule to remaining objects with LargeObject error</span></span>
<span data-ttu-id="e3450-245">Depois que a regra de sincronização for adicionada, você precisará executar uma etapa de sincronização completa no AD Connector:</span><span class="sxs-lookup"><span data-stu-id="e3450-245">Once the sync rule has been added, you need to run a full synchronization step on the AD Connector:</span></span>
1. <span data-ttu-id="e3450-246">Acesse a guia **Conectores** no Synchronization Service Manager.</span><span class="sxs-lookup"><span data-stu-id="e3450-246">Go to the **Connectors** tab in the Synchronization Service Manager.</span></span>
2. <span data-ttu-id="e3450-247">Clique com o botão direito do mouse em **AD** Connector e selecione **Executar...**</span><span class="sxs-lookup"><span data-stu-id="e3450-247">Right-click on the **AD** Connector and select **Run...**</span></span>
3. <span data-ttu-id="e3450-248">No pop-up Executar Conector, selecione a etapa **Sincronização Completa** e clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="e3450-248">In the Run Connector pop-up, select **Full Synchronization** step and click **OK**.</span></span>
4. <span data-ttu-id="e3450-249">Aguarde até que a etapa Sincronização Completa seja concluída.</span><span class="sxs-lookup"><span data-stu-id="e3450-249">Wait for the Full Synchronization step to complete.</span></span>
5. <span data-ttu-id="e3450-250">Repita as etapas acima para os AD Connectors restantes caso você tenha mais de um AD Connector.</span><span class="sxs-lookup"><span data-stu-id="e3450-250">Repeat the above steps for the remaining AD Connectors if you have more than one AD Connectors.</span></span> <span data-ttu-id="e3450-251">Normalmente, vários conectores serão necessários se você tiver vários diretórios locais.</span><span class="sxs-lookup"><span data-stu-id="e3450-251">Usually, multiple connectors are required if you have multiple on-premises directories.</span></span>

### <a name="step-6-verify-there-are-no-unexpected-changes-waiting-to-be-exported-to-azure-ad"></a><span data-ttu-id="e3450-252">Etapa 6.</span><span class="sxs-lookup"><span data-stu-id="e3450-252">Step 6.</span></span> <span data-ttu-id="e3450-253">Verificar se não há alterações inesperadas com exportação pendente para o Azure AD</span><span class="sxs-lookup"><span data-stu-id="e3450-253">Verify there are no unexpected changes waiting to be exported to Azure AD</span></span>
1. <span data-ttu-id="e3450-254">Acesse a guia **Conectores** no Synchronization Service Manager.</span><span class="sxs-lookup"><span data-stu-id="e3450-254">Go to the **Connectors** tab in the Synchronization Service Manager.</span></span>
2. <span data-ttu-id="e3450-255">Clique com o botão direito do mouse no **Azure AD** Connector e selecione **Pesquisar Espaço Conector**.</span><span class="sxs-lookup"><span data-stu-id="e3450-255">Right-click on the **Azure AD** Connector and select **Search Connector Space**.</span></span>
3. <span data-ttu-id="e3450-256">No pop-up Pesquisar Espaço Conector:</span><span class="sxs-lookup"><span data-stu-id="e3450-256">In the Search Connector Space pop-up:</span></span>
    1. <span data-ttu-id="e3450-257">Defina o Escopo como **Exportação Pendente**.</span><span class="sxs-lookup"><span data-stu-id="e3450-257">Set Scope to **Pending Export**.</span></span>
    2. <span data-ttu-id="e3450-258">Marque todas as 3 caixas de seleção, incluindo **Adicionar**, **Modificar** e **Excluir**.</span><span class="sxs-lookup"><span data-stu-id="e3450-258">Check all 3 checkboxes, including **Add**, **Modify** and **Delete**.</span></span>
    3. <span data-ttu-id="e3450-259">Clique no botão **Pesquisar** para retornar todos os objetos com alterações com exportação pendente para o Azure AD.</span><span class="sxs-lookup"><span data-stu-id="e3450-259">Click **Search** button to return all objects with changes waiting to be exported to Azure AD.</span></span>
    4. <span data-ttu-id="e3450-260">Verifique se não há alterações inesperadas.</span><span class="sxs-lookup"><span data-stu-id="e3450-260">Verify there are no unexpected changes.</span></span> <span data-ttu-id="e3450-261">Para examinar as alterações de determinado objeto, clique duas vezes nele.</span><span class="sxs-lookup"><span data-stu-id="e3450-261">To examine the changes for a given object, double-click on the object.</span></span>

### <a name="step-7-export-the-changes-to-azure-ad"></a><span data-ttu-id="e3450-262">Etapa 7.</span><span class="sxs-lookup"><span data-stu-id="e3450-262">Step 7.</span></span> <span data-ttu-id="e3450-263">Exportar as alterações para o Azure AD</span><span class="sxs-lookup"><span data-stu-id="e3450-263">Export the changes to Azure AD</span></span>
<span data-ttu-id="e3450-264">Para exportar as alterações para o Azure AD:</span><span class="sxs-lookup"><span data-stu-id="e3450-264">To export the changes to Azure AD:</span></span>
1. <span data-ttu-id="e3450-265">Acesse a guia **Conectores** no Synchronization Service Manager.</span><span class="sxs-lookup"><span data-stu-id="e3450-265">Go to the **Connectors** tab in the Synchronization Service Manager.</span></span>
2. <span data-ttu-id="e3450-266">Clique com o botão direito do mouse em **Azure AD** Connector e selecione **Executar...**</span><span class="sxs-lookup"><span data-stu-id="e3450-266">Right-click on the **Azure AD** Connector and select **Run...**</span></span>
4. <span data-ttu-id="e3450-267">No pop-up Executar Conector, selecione a etapa **Exportar** e clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="e3450-267">In the Run Connector pop-up, select **Export** step and click **OK**.</span></span>
5. <span data-ttu-id="e3450-268">Aguarde até que a etapa Exportar para o Azure AD seja concluída e confirme se não há mais erros LargeObject.</span><span class="sxs-lookup"><span data-stu-id="e3450-268">Wait for Export to Azure AD to complete and confirm there are no more LargeObject errors.</span></span>

### <a name="step-8-re-enable-sync-scheduler"></a><span data-ttu-id="e3450-269">Etapa 8.</span><span class="sxs-lookup"><span data-stu-id="e3450-269">Step 8.</span></span> <span data-ttu-id="e3450-270">Habilitar o agendador de sincronização novamente</span><span class="sxs-lookup"><span data-stu-id="e3450-270">Re-enable sync scheduler</span></span>
<span data-ttu-id="e3450-271">Agora que o problema foi resolvido, habilite o agendador de sincronização interno novamente:</span><span class="sxs-lookup"><span data-stu-id="e3450-271">Now that the issue is resolved, re-enable the built-in sync scheduler:</span></span>
1. <span data-ttu-id="e3450-272">Inicie uma sessão do PowerShell.</span><span class="sxs-lookup"><span data-stu-id="e3450-272">Start PowerShell session.</span></span>
2. <span data-ttu-id="e3450-273">Habilite a sincronização agendada novamente executando o cmdlet: `Set-ADSyncScheduler -SyncCycleEnabled $true`</span><span class="sxs-lookup"><span data-stu-id="e3450-273">Re-enable scheduled synchronization by running cmdlet: `Set-ADSyncScheduler -SyncCycleEnabled $true`</span></span>

> [!Note]
> <span data-ttu-id="e3450-274">As etapas anteriores só são aplicáveis às versões mais novas (1.1.xxx.x) do Azure AD Connect com o agendador interno.</span><span class="sxs-lookup"><span data-stu-id="e3450-274">The preceding steps are only applicable to newer versions (1.1.xxx.x) of Azure AD Connect with the built-in scheduler.</span></span> <span data-ttu-id="e3450-275">Se você estiver usando versões mais antigas (1.0.xxx.x) do Azure AD Connect que usam o Agendador de Tarefas do Windows ou estiver usando seu próprio agendador personalizado (caso incomum) para disparar a sincronização periódica, precisará desabilitá-las de acordo.</span><span class="sxs-lookup"><span data-stu-id="e3450-275">If you are using older versions (1.0.xxx.x) of Azure AD Connect that uses Windows Task Scheduler, or you are using your own custom scheduler (not common) to trigger periodic synchronization, you need to disable them accordingly.</span></span>

## <a name="next-steps"></a><span data-ttu-id="e3450-276">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="e3450-276">Next steps</span></span>
<span data-ttu-id="e3450-277">Saiba mais sobre [Como integrar suas identidades locais ao Active Directory do Azure](active-directory-aadconnect.md).</span><span class="sxs-lookup"><span data-stu-id="e3450-277">Learn more about [Integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>

