---
title: 'Azure AD Connect: conceitos de design | Microsoft Docs'
description: "Este tópico detalha determinadas áreas de design da implementação"
services: active-directory
documentationcenter: 
author: billmath
manager: femila
editor: 
ms.assetid: 4114a6c0-f96a-493c-be74-1153666ce6c9
ms.service: active-directory
ms.custom: azure-ad-connect
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: Identity
ms.date: 07/13/2017
ms.author: billmath
ms.openlocfilehash: 1e5d5c6a716ca653fb14fc059e8155124b433732
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="azure-ad-connect-design-concepts"></a><span data-ttu-id="c4bc1-103">Azure AD Connect: conceitos de design</span><span class="sxs-lookup"><span data-stu-id="c4bc1-103">Azure AD Connect: Design concepts</span></span>
<span data-ttu-id="c4bc1-104">Olá finalidade deste tópico é toodescribe áreas que devem ser consideradas por meio de durante o design de implementação de saudação do Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-104">hello purpose of this topic is toodescribe areas that must be thought through during hello implementation design of Azure AD Connect.</span></span> <span data-ttu-id="c4bc1-105">Este tópico é um aprofundamento em determinadas áreas e esses conceitos também são descritos brevemente em outros tópicos.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-105">This topic is a deep dive on certain areas and these concepts are briefly described in other topics as well.</span></span>

## <a name="sourceanchor"></a><span data-ttu-id="c4bc1-106">sourceAnchor</span><span class="sxs-lookup"><span data-stu-id="c4bc1-106">sourceAnchor</span></span>
<span data-ttu-id="c4bc1-107">atributo sourceAnchor de saudação é definido como *um atributo imutável durante o tempo de vida de saudação de um objeto*.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-107">hello sourceAnchor attribute is defined as *an attribute immutable during hello lifetime of an object*.</span></span> <span data-ttu-id="c4bc1-108">Identifica exclusivamente um objeto como sendo Olá mesmo local do objeto e no AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-108">It uniquely identifies an object as being hello same object on-premises and in Azure AD.</span></span> <span data-ttu-id="c4bc1-109">também é chamado de atributo Olá **immutableId** e nomes de saudação dois são usados intercambiáveis.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-109">hello attribute is also called **immutableId** and hello two names are used interchangeable.</span></span>

<span data-ttu-id="c4bc1-110">palavra de saudação imutável, que é "não pode ser alterado", é importante toothis tópico.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-110">hello word immutable, that is "cannot be changed", is important toothis topic.</span></span> <span data-ttu-id="c4bc1-111">Como valor do atributo não pode ser alterado depois que ele tiver sido definido, é importante toopick um design que dá suporte ao seu cenário.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-111">Since this attribute’s value cannot be changed after it has been set, it is important toopick a design that supports your scenario.</span></span>

<span data-ttu-id="c4bc1-112">Olá atributo é usado para Olá os seguintes cenários:</span><span class="sxs-lookup"><span data-stu-id="c4bc1-112">hello attribute is used for hello following scenarios:</span></span>

* <span data-ttu-id="c4bc1-113">Quando um novo servidor de mecanismo de sincronização é compilado ou recompilado após um cenário de recuperação de desastre, esse atributo vincula objetos existentes no Azure AD a objetos locais.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-113">When a new sync engine server is built, or rebuilt after a disaster recovery scenario, this attribute links existing objects in Azure AD with objects on-premises.</span></span>
* <span data-ttu-id="c4bc1-114">Se você mover de um modelo de identidade sincronizado tooa identidade somente em nuvem, este atributo permite que os objetos muito "correspondência rígido" objetos existentes no AD do Azure com objetos locais.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-114">If you move from a cloud-only identity tooa synchronized identity model, then this attribute allows objects too"hard match" existing objects in Azure AD with on-premises objects.</span></span>
* <span data-ttu-id="c4bc1-115">Se você usar a federação, em seguida, esse atributo junto com hello **userPrincipalName** é usado em Olá declaração toouniquely identificar um usuário.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-115">If you use federation, then this attribute together with hello **userPrincipalName** is used in hello claim toouniquely identify a user.</span></span>

<span data-ttu-id="c4bc1-116">Este tópico trata apenas sourceAnchor toousers relacionado.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-116">This topic only talks about sourceAnchor as it relates toousers.</span></span> <span data-ttu-id="c4bc1-117">Hello mesmas regras se aplicam tooall tipos de objeto, mas é apenas para os usuários que geralmente, esse problema é uma preocupação.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-117">hello same rules apply tooall object types, but it is only for users this problem usually is a concern.</span></span>

### <a name="selecting-a-good-sourceanchor-attribute"></a><span data-ttu-id="c4bc1-118">Selecionando um bom atributo sourceAnchor</span><span class="sxs-lookup"><span data-stu-id="c4bc1-118">Selecting a good sourceAnchor attribute</span></span>
<span data-ttu-id="c4bc1-119">o valor do atributo Olá deve seguir Olá regras a seguir:</span><span class="sxs-lookup"><span data-stu-id="c4bc1-119">hello attribute value must follow hello following rules:</span></span>

* <span data-ttu-id="c4bc1-120">Ter menos de 60 caracteres</span><span class="sxs-lookup"><span data-stu-id="c4bc1-120">Be less than 60 characters in length</span></span>
  * <span data-ttu-id="c4bc1-121">Caracteres diferentes de a-z, A-Z ou 0-9 são codificados e contados como 3 caracteres</span><span class="sxs-lookup"><span data-stu-id="c4bc1-121">Characters not being a-z, A-Z, or 0-9 are encoded and counted as 3 characters</span></span>
* <span data-ttu-id="c4bc1-122">Não conter nenhum caractere especial: &#92; !</span><span class="sxs-lookup"><span data-stu-id="c4bc1-122">Not contain a special character: &#92; !</span></span> <span data-ttu-id="c4bc1-123"># $ % & * + / = ?</span><span class="sxs-lookup"><span data-stu-id="c4bc1-123"># $ % & * + / = ?</span></span> <span data-ttu-id="c4bc1-124">^ &#96; { } | ~ < > ( ) ' ; : , [ ] " @ _</span><span class="sxs-lookup"><span data-stu-id="c4bc1-124">^ &#96; { } | ~ < > ( ) ' ; : , [ ] " @ _</span></span>
* <span data-ttu-id="c4bc1-125">Ser globalmente exclusivo</span><span class="sxs-lookup"><span data-stu-id="c4bc1-125">Must be globally unique</span></span>
* <span data-ttu-id="c4bc1-126">Ser uma cadeia de caracteres, um inteiro ou um binário</span><span class="sxs-lookup"><span data-stu-id="c4bc1-126">Must be either a string, integer, or binary</span></span>
* <span data-ttu-id="c4bc1-127">Não ser baseado no nome do usuário, já que isso muda</span><span class="sxs-lookup"><span data-stu-id="c4bc1-127">Should not be based on user's name, these changes</span></span>
* <span data-ttu-id="c4bc1-128">Não diferenciar maiúsculas de minúsculas e evitar valores que podem variar maiúsculas e minúsculas</span><span class="sxs-lookup"><span data-stu-id="c4bc1-128">Should not be case-sensitive and avoid values that may vary by case</span></span>
* <span data-ttu-id="c4bc1-129">Deve ser atribuído ao objeto Olá é criado</span><span class="sxs-lookup"><span data-stu-id="c4bc1-129">Should be assigned when hello object is created</span></span>

<span data-ttu-id="c4bc1-130">Se Olá selecionado sourceAnchor não é do tipo cadeia de caracteres, e tooensure de valor de atributo de saudação Base64Encode de se conectar do Azure AD sem caracteres especiais são exibidos.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-130">If hello selected sourceAnchor is not of type string, then Azure AD Connect Base64Encode hello attribute value tooensure no special characters appear.</span></span> <span data-ttu-id="c4bc1-131">Se você usar outro servidor de federação que o AD FS, verifique se o servidor também pode Base64Encode atributo de saudação.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-131">If you use another federation server than ADFS, make sure your server can also Base64Encode hello attribute.</span></span>

<span data-ttu-id="c4bc1-132">atributo sourceAnchor de saudação diferencia maiusculas de minúsculas.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-132">hello sourceAnchor attribute is case-sensitive.</span></span> <span data-ttu-id="c4bc1-133">Um valor de "Lucianasilva" não é Olá igual a "lucianasilva".</span><span class="sxs-lookup"><span data-stu-id="c4bc1-133">A value of “JohnDoe” is not hello same as “johndoe”.</span></span> <span data-ttu-id="c4bc1-134">Porém, você não deve ter dois objetos diferentes com apenas uma diferença de uso de maiúsculas.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-134">But you should not have two different objects with only a difference in case.</span></span>

<span data-ttu-id="c4bc1-135">Se você tiver uma única floresta local, atributo de hello, em seguida, você deve usar é **objectGUID**.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-135">If you have a single forest on-premises, then hello attribute you should use is **objectGUID**.</span></span> <span data-ttu-id="c4bc1-136">Isso também é atributo Olá usado quando você usa as configurações expressas no Azure AD Connect e também Olá atributo usado pelo DirSync.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-136">This is also hello attribute used when you use express settings in Azure AD Connect and also hello attribute used by DirSync.</span></span>

<span data-ttu-id="c4bc1-137">Se você tiver várias florestas e não mover os usuários entre florestas e domínios, em seguida, **objectGUID** é uma boa atributo toouse mesmo nesse caso.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-137">If you have multiple forests and do not move users between forests and domains, then **objectGUID** is a good attribute toouse even in this case.</span></span>

<span data-ttu-id="c4bc1-138">Se você mover os usuários entre domínios e florestas, você deve localizar um atributo que não mudam ou pode ser movido com usuários Olá durante saudação movimentação.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-138">If you move users between forests and domains, then you must find an attribute that does not change or can be moved with hello users during hello move.</span></span> <span data-ttu-id="c4bc1-139">Uma abordagem recomendada é toointroduce um atributo sintético.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-139">A recommended approach is toointroduce a synthetic attribute.</span></span> <span data-ttu-id="c4bc1-140">Um atributo que contenha algo parecido com um GUID seria adequado.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-140">An attribute that could hold something that looks like a GUID would be suitable.</span></span> <span data-ttu-id="c4bc1-141">Durante a criação do objeto, um novo GUID é criado e marcado no usuário hello.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-141">During object creation, a new GUID is created and stamped on hello user.</span></span> <span data-ttu-id="c4bc1-142">Uma regra de sincronização personalizadas pode ser criada em toocreate de servidor de mecanismo de sincronização de saudação esse valor com base em Olá **objectGUID** e Olá de atualização de atributo selecionado no ADDS.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-142">A custom sync rule can be created in hello sync engine server toocreate this value based on hello **objectGUID** and update hello selected attribute in ADDS.</span></span> <span data-ttu-id="c4bc1-143">Quando você move o objeto hello, verifique tooalso-se de copiar o conteúdo de saudação desse valor.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-143">When you move hello object, make sure tooalso copy hello content of this value.</span></span>

<span data-ttu-id="c4bc1-144">Outra solução é toopick um atributo existente, você sabe que não é alterado.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-144">Another solution is toopick an existing attribute you know does not change.</span></span> <span data-ttu-id="c4bc1-145">Os atributos usados normalmente incluem **employeeID**.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-145">Commonly used attributes include **employeeID**.</span></span> <span data-ttu-id="c4bc1-146">Se você considerar um atributo que contém letras, verifique se não há que nenhum caso de Olá chance (letras maiusculas e minúsculas) pode ser alteradas para o valor do atributo hello.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-146">If you consider an attribute that contains letters, make sure there is no chance hello case (upper case vs. lower case) can change for hello attribute's value.</span></span> <span data-ttu-id="c4bc1-147">Atributos inválidos que não devem ser usados incluem os atributos com o nome de saudação do usuário hello.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-147">Bad attributes that should not be used include those attributes with hello name of hello user.</span></span> <span data-ttu-id="c4bc1-148">Um casamento ou Divórcio, Olá nome é esperado toochange, que não é permitido para este atributo.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-148">In a marriage or divorce, hello name is expected toochange, which is not allowed for this attribute.</span></span> <span data-ttu-id="c4bc1-149">Isso também é um motivo por que atributos como **userPrincipalName**, **mail**, e **targetAddress** não são tooselect possível na instalação do hello AD do Azure Connect Assistente.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-149">This is also one reason why attributes such as **userPrincipalName**, **mail**, and **targetAddress** are not even possible tooselect in hello Azure AD Connect installation wizard.</span></span> <span data-ttu-id="c4bc1-150">Esses atributos também contêm hello "@" caractere, que não é permitido em Olá sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-150">Those attributes also contain hello "@" character, which is not allowed in hello sourceAnchor.</span></span>

### <a name="changing-hello-sourceanchor-attribute"></a><span data-ttu-id="c4bc1-151">Atributo sourceAnchor de alteração Olá</span><span class="sxs-lookup"><span data-stu-id="c4bc1-151">Changing hello sourceAnchor attribute</span></span>
<span data-ttu-id="c4bc1-152">valor do atributo sourceAnchor Olá não pode ser alterado depois Olá objeto foi criado no AD do Azure e identity Olá é sincronizado.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-152">hello sourceAnchor attribute value cannot be changed after hello object has been created in Azure AD and hello identity is synchronized.</span></span>

<span data-ttu-id="c4bc1-153">Por esse motivo, Olá restrições a seguir se aplicam a tooAzure AD Connect:</span><span class="sxs-lookup"><span data-stu-id="c4bc1-153">For this reason, hello following restrictions apply tooAzure AD Connect:</span></span>

* <span data-ttu-id="c4bc1-154">atributo de sourceAnchor Olá só pode ser definido durante a instalação inicial.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-154">hello sourceAnchor attribute can only be set during initial installation.</span></span> <span data-ttu-id="c4bc1-155">Se você executar novamente o Assistente de instalação hello, essa opção é somente leitura.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-155">If you rerun hello installation wizard, this option is read-only.</span></span> <span data-ttu-id="c4bc1-156">Se você precisar toochange essa configuração, você deve desinstalar e reinstalar.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-156">If you need toochange this setting, then you must uninstall and reinstall.</span></span>
* <span data-ttu-id="c4bc1-157">Se você instalar outro servidor do Azure AD Connect, em seguida, você deve selecionar Olá mesmo atributo sourceAnchor usado anteriormente.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-157">If you install another Azure AD Connect server, then you must select hello same sourceAnchor attribute as previously used.</span></span> <span data-ttu-id="c4bc1-158">Se anteriormente tiver sido usando o DirSync e mover tooAzure AD conectar-se de que, em seguida, você deve usar **objectGUID** já que esse é o atributo de saudação usado pelo DirSync.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-158">If you have earlier been using DirSync and move tooAzure AD Connect, then you must use **objectGUID** since that is hello attribute used by DirSync.</span></span>
* <span data-ttu-id="c4bc1-159">Se Olá valor sourceAnchor é alterado após o objeto de saudação foi exportado tooAzure AD, depois do Azure AD Connect sincronização gera um erro e não permite mais alterações no objeto antes de saudação problema foi corrigido e Olá sourceAnchor é alterado em Olá diretório de origem.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-159">If hello value for sourceAnchor is changed after hello object has been exported tooAzure AD, then Azure AD Connect sync throws an error and does not allow any more changes on that object before hello issue has been fixed and hello sourceAnchor is changed back in hello source directory.</span></span>

## <a name="using-msds-consistencyguid-as-sourceanchor"></a><span data-ttu-id="c4bc1-160">Usando o msDS-ConsistencyGuid como sourceAnchor</span><span class="sxs-lookup"><span data-stu-id="c4bc1-160">Using msDS-ConsistencyGuid as sourceAnchor</span></span>
<span data-ttu-id="c4bc1-161">Por padrão, o Azure AD Connect (versão 1.1.486.0 e anteriores) usa o objectGUID como atributo de sourceAnchor hello.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-161">By default, Azure AD Connect (version 1.1.486.0 and older) uses objectGUID as hello sourceAnchor attribute.</span></span> <span data-ttu-id="c4bc1-162">O ObjectGUID é gerado pelo sistema.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-162">ObjectGUID is system-generated.</span></span> <span data-ttu-id="c4bc1-163">Não é possível especificar seu valor ao criar objetos do AD locais.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-163">You cannot specify its value when creating on-premises AD objects.</span></span> <span data-ttu-id="c4bc1-164">Como explicado na seção [sourceAnchor](#sourceanchor), há cenários em que você precisa que o valor de sourceAnchor toospecify hello.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-164">As explained in section [sourceAnchor](#sourceanchor), there are scenarios where you need toospecify hello sourceAnchor value.</span></span> <span data-ttu-id="c4bc1-165">Se cenários Olá tooyou aplicável, você deve usar um atributo do AD (por exemplo, msDS-ConsistencyGuid) podem ser configurado como atributo de sourceAnchor hello.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-165">If hello scenarios are applicable tooyou, you must use a configurable AD attribute (for example, msDS-ConsistencyGuid) as hello sourceAnchor attribute.</span></span>

<span data-ttu-id="c4bc1-166">Conexão do AD do Azure (versão 1.1.524.0 e posterior) agora facilita o uso de saudação do msDS-ConsistencyGuid como o atributo sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-166">Azure AD Connect (version 1.1.524.0 and after) now facilitates hello use of msDS-ConsistencyGuid as sourceAnchor attribute.</span></span> <span data-ttu-id="c4bc1-167">Ao usar esse recurso, o Azure AD Connect configura automaticamente regras de sincronização Olá para:</span><span class="sxs-lookup"><span data-stu-id="c4bc1-167">When using this feature, Azure AD Connect automatically configures hello synchronization rules to:</span></span>

1. <span data-ttu-id="c4bc1-168">Use msDS-ConsistencyGuid como atributo de sourceAnchor Olá para objetos de usuário.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-168">Use msDS-ConsistencyGuid as hello sourceAnchor attribute for User objects.</span></span> <span data-ttu-id="c4bc1-169">O ObjectGUID é usado para outros tipos de objeto.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-169">ObjectGUID is used for other object types.</span></span>

2. <span data-ttu-id="c4bc1-170">Para qualquer local AD usuário cujo atributo msDS-ConsistencyGuid não está preenchido, o Azure AD Connect grava seu atributo de msDS-ConsistencyGuid toohello back objectGUID valor no Active Directory no local do objeto.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-170">For any given on-premises AD User object whose msDS-ConsistencyGuid attribute isn't populated, Azure AD Connect writes its objectGUID value back toohello msDS-ConsistencyGuid attribute in on-premises Active Directory.</span></span> <span data-ttu-id="c4bc1-171">Depois que o atributo msDS-ConsistencyGuid de saudação for preenchido, Azure AD Connect, em seguida, exporta Olá objeto tooAzure AD.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-171">After hello msDS-ConsistencyGuid attribute is populated, Azure AD Connect then exports hello object tooAzure AD.</span></span>

>[!NOTE]
> <span data-ttu-id="c4bc1-172">Uma vez um local em objeto do AD é importado para o Azure AD Connect (isto é, importado para Olá espaço do conector AD e projetado em Olá metaverso), você não pode alterar seu valor sourceAnchor mais.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-172">Once an on-premises AD object is imported into Azure AD Connect (that is, imported into hello AD Connector Space and projected into hello Metaverse), you cannot change its sourceAnchor value anymore.</span></span> <span data-ttu-id="c4bc1-173">valor de sourceAnchor toospecify Olá para um dado local AD de objeto, defina o atributo msDS-ConsistencyGuid antes de ele ser importado para o Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-173">toospecify hello sourceAnchor value for a given on-premises AD object, configure its msDS-ConsistencyGuid attribute before it is imported into Azure AD Connect.</span></span>

### <a name="permission-required"></a><span data-ttu-id="c4bc1-174">Permissão necessária</span><span class="sxs-lookup"><span data-stu-id="c4bc1-174">Permission required</span></span>
<span data-ttu-id="c4bc1-175">Para esse recurso toowork, Olá AD DS conta usada toosynchronize com o Active Directory no local deve ser concedida gravação permissão toohello msDS-ConsistencyGuid atributo no Active Directory no local.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-175">For this feature toowork, hello AD DS account used toosynchronize with on-premises Active Directory must be granted write permission toohello msDS-ConsistencyGuid attribute in on-premises Active Directory.</span></span>

### <a name="how-tooenable-hello-consistencyguid-feature---new-installation"></a><span data-ttu-id="c4bc1-176">Como tooenable Olá ConsistencyGuid recurso - nova instalação</span><span class="sxs-lookup"><span data-stu-id="c4bc1-176">How tooenable hello ConsistencyGuid feature - New installation</span></span>
<span data-ttu-id="c4bc1-177">Você pode habilitar o uso de saudação do ConsistencyGuid como sourceAnchor durante a instalação de novo.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-177">You can enable hello use of ConsistencyGuid as sourceAnchor during new installation.</span></span> <span data-ttu-id="c4bc1-178">Esta seção aborda tanto a instalação Expressa quanto a Personalizada em detalhes.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-178">This section covers both Express and Custom installation in details.</span></span>

  >[!NOTE]
  > <span data-ttu-id="c4bc1-179">Somente as versões mais recentes do Azure AD Connect (1.1.524.0 e posterior) dá suporte a Olá uso de ConsistencyGuid como sourceAnchor durante a instalação de novo.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-179">Only newer versions of Azure AD Connect (1.1.524.0 and after) supports hello use of ConsistencyGuid as sourceAnchor during new installation.</span></span>

### <a name="how-tooenable-hello-consistencyguid-feature"></a><span data-ttu-id="c4bc1-180">Como tooenable Olá ConsistencyGuid recurso</span><span class="sxs-lookup"><span data-stu-id="c4bc1-180">How tooenable hello ConsistencyGuid feature</span></span>
<span data-ttu-id="c4bc1-181">No momento, o recurso de Olá só pode ser habilitado durante a nova instalação do Azure AD Connect somente.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-181">Currently, hello feature can only be enabled during new Azure AD Connect installation only.</span></span>

#### <a name="express-installation"></a><span data-ttu-id="c4bc1-182">Instalação Expressa</span><span class="sxs-lookup"><span data-stu-id="c4bc1-182">Express Installation</span></span>
<span data-ttu-id="c4bc1-183">Durante a instalação do Azure AD Connect com o modo expresso, o Assistente de conexão do AD do Azure Olá determina automaticamente Olá anúncio mais apropriado atributo toouse como atributo de sourceAnchor hello usando Olá lógica a seguir:</span><span class="sxs-lookup"><span data-stu-id="c4bc1-183">When installing Azure AD Connect with Express mode, hello Azure AD Connect wizard automatically determines hello most appropriate AD attribute toouse as hello sourceAnchor attribute using hello following logic:</span></span>

* <span data-ttu-id="c4bc1-184">Primeiro, consultas de assistente conectar de saudação do AD do Azure que seu atributo do AD do Azure locatário tooretrieve Olá AD usado como Olá atributo sourceAnchor na instalação do hello anterior do Azure AD Connect (se houver).</span><span class="sxs-lookup"><span data-stu-id="c4bc1-184">First, hello Azure AD Connect wizard queries your Azure AD tenant tooretrieve hello AD attribute used as hello sourceAnchor attribute in hello previous Azure AD Connect installation (if any).</span></span> <span data-ttu-id="c4bc1-185">Se essas informações estão disponíveis, o Azure AD Connect usa o atributo de saudação mesmo AD.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-185">If this information is available, Azure AD Connect uses hello same AD attribute.</span></span>

  >[!NOTE]
  > <span data-ttu-id="c4bc1-186">Somente as versões mais recentes do Azure AD Connect (1.1.524.0 e depois) armazena informações em seu locatário do AD do Azure sobre o atributo sourceAnchor de saudação usado durante a instalação.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-186">Only newer versions of Azure AD Connect (1.1.524.0 and after) stores information in your Azure AD tenant about hello sourceAnchor attribute used during installation.</span></span> <span data-ttu-id="c4bc1-187">Versões mais antigas do Azure AD Connect não fazem isso.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-187">Older versions of Azure AD Connect do not.</span></span>

* <span data-ttu-id="c4bc1-188">Se informações sobre Olá sourceAnchor atributo usado não estiverem disponíveis, o Assistente de saudação verifica estado de saudação do atributo de msDS-ConsistencyGuid Olá no Active Directory local.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-188">If information about hello sourceAnchor attribute used isn't available, hello wizard checks hello state of hello msDS-ConsistencyGuid attribute in your on-premises Active Directory.</span></span> <span data-ttu-id="c4bc1-189">Se o atributo de saudação não está configurado em qualquer objeto no diretório Olá, o Assistente de Olá usa Olá msDS-ConsistencyGuid como atributo de sourceAnchor hello.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-189">If hello attribute isn't configured on any object in hello directory, hello wizard uses hello msDS-ConsistencyGuid as hello sourceAnchor attribute.</span></span> <span data-ttu-id="c4bc1-190">Se o atributo Olá estiver configurado em um ou mais objetos no diretório hello, Assistente de saudação conclui atributo hello está sendo usado por outros aplicativos e não é adequado como atributo sourceAnchor...</span><span class="sxs-lookup"><span data-stu-id="c4bc1-190">If hello attribute is configured on one or more objects in hello directory, hello wizard concludes hello attribute is being used by other applications and is not suitable as sourceAnchor attribute...</span></span>

* <span data-ttu-id="c4bc1-191">Nesse caso, Assistente de saudação reverterá toousing objectGUID como atributo de sourceAnchor hello.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-191">In which case, hello wizard falls back toousing objectGUID as hello sourceAnchor attribute.</span></span>

* <span data-ttu-id="c4bc1-192">Depois que o atributo sourceAnchor de saudação é decidido, o assistente Olá armazena informações de saudação em seu locatário do AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-192">Once hello sourceAnchor attribute is decided, hello wizard stores hello information in your Azure AD tenant.</span></span> <span data-ttu-id="c4bc1-193">Olá informações serão usadas pela instalação futuras do Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-193">hello information will be used by future installation of Azure AD Connect.</span></span>

<span data-ttu-id="c4bc1-194">Após a conclusão da instalação do Express, o assistente Olá informa separado qual atributo como atributo de âncora de origem de saudação.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-194">Once Express installation completes, hello wizard informs you which attribute has been picked as hello Source Anchor attribute.</span></span>

![O assistente informa qual atributo do AD foi escolhido como sourceAnchor](./media/active-directory-aadconnect-design-concepts/consistencyGuid-01.png)

#### <a name="custom-installation"></a><span data-ttu-id="c4bc1-196">Instalação personalizada</span><span class="sxs-lookup"><span data-stu-id="c4bc1-196">Custom installation</span></span>
<span data-ttu-id="c4bc1-197">Ao instalar o Azure AD Connect com modo personalizado, o Assistente de conexão do AD do Azure Olá fornece duas opções ao configurar o atributo sourceAnchor:</span><span class="sxs-lookup"><span data-stu-id="c4bc1-197">When installing Azure AD Connect with Custom mode, hello Azure AD Connect wizard provides two options when configuring sourceAnchor attribute:</span></span>

![Instalação personalizada – configuração do sourceAnchor](./media/active-directory-aadconnect-design-concepts/consistencyGuid-02.png)

| <span data-ttu-id="c4bc1-199">Configuração</span><span class="sxs-lookup"><span data-stu-id="c4bc1-199">Setting</span></span> | <span data-ttu-id="c4bc1-200">Descrição</span><span class="sxs-lookup"><span data-stu-id="c4bc1-200">Description</span></span> |
| --- | --- |
| <span data-ttu-id="c4bc1-201">Permitir que o Azure gerenciar âncora de origem Olá para mim</span><span class="sxs-lookup"><span data-stu-id="c4bc1-201">Let Azure manage hello source anchor for me</span></span> | <span data-ttu-id="c4bc1-202">Selecione esta opção se você quiser o atributo do AD do Azure toopick Olá para você.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-202">Select this option if you want Azure AD toopick hello attribute for you.</span></span> <span data-ttu-id="c4bc1-203">Se você selecionar essa opção, o Azure AD Connect assistente aplica Olá mesmo [lógica de seleção do atributo sourceAnchor usada durante a instalação do Express](#express-installation).</span><span class="sxs-lookup"><span data-stu-id="c4bc1-203">If you select this option, Azure AD Connect wizard applies hello same [sourceAnchor attribute selection logic used during Express installation](#express-installation).</span></span> <span data-ttu-id="c4bc1-204">Instalação tooExpress semelhante, o Assistente de saudação informa qual atributo separado como Olá atributo de âncora de origem após a conclusão da instalação personalizada.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-204">Similar tooExpress installation, hello wizard informs you which attribute has been picked as hello Source Anchor attribute after Custom installation completes.</span></span> |
| <span data-ttu-id="c4bc1-205">Um atributo específico</span><span class="sxs-lookup"><span data-stu-id="c4bc1-205">A specific attribute</span></span> | <span data-ttu-id="c4bc1-206">Selecione esta opção se desejar toospecify um atributo de AD existente como Olá sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-206">Select this option if you wish toospecify an existing AD attribute as hello sourceAnchor attribute.</span></span> |

### <a name="how-tooenable-hello-consistencyguid-feature---existing-deployment"></a><span data-ttu-id="c4bc1-207">Como tooenable Olá ConsistencyGuid recurso - implantação existente</span><span class="sxs-lookup"><span data-stu-id="c4bc1-207">How tooenable hello ConsistencyGuid feature - Existing deployment</span></span>
<span data-ttu-id="c4bc1-208">Se você tiver uma implantação existente do Azure AD Connect, que está usando o objectGUID como atributo de âncora de origem hello, você pode desativá-toousing ConsistencyGuid em vez disso.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-208">If you have an existing Azure AD Connect deployment which is using objectGUID as hello Source Anchor attribute, you can switch it toousing ConsistencyGuid instead.</span></span>

>[!NOTE]
> <span data-ttu-id="c4bc1-209">Somente as versões mais recentes do Azure AD Connect (1.1.552.0 e posterior) dá suporte à alternância de tooConsistencyGuid ObjectGuid como atributo de âncora de origem de saudação.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-209">Only newer versions of Azure AD Connect (1.1.552.0 and after) supports switching from ObjectGuid tooConsistencyGuid as hello Source Anchor attribute.</span></span>

<span data-ttu-id="c4bc1-210">tooswitch de tooConsistencyGuid objectGUID como atributo de âncora de origem hello:</span><span class="sxs-lookup"><span data-stu-id="c4bc1-210">tooswitch from objectGUID tooConsistencyGuid as hello Source Anchor attribute:</span></span>

1. <span data-ttu-id="c4bc1-211">Iniciar Assistente para conectar-se de saudação do AD do Azure e clique em **configurar** tela de tarefas toohello toogo.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-211">Start hello Azure AD Connect wizard and click **Configure** toogo toohello Tasks screen.</span></span>

2. <span data-ttu-id="c4bc1-212">Selecione Olá **configurar âncora de origem** opção de tarefas e clique em **próximo**.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-212">Select hello **Configure Source Anchor** task option and click **Next**.</span></span>

   ![Habilitar ConsistencyGuid para implantação existente – etapa 2](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment01.png)

3. <span data-ttu-id="c4bc1-214">Insira suas credenciais de administrador do Azure AD e clique em **Avançar**.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-214">Enter your Azure AD Administrator credentials and click **Next**.</span></span>

4. <span data-ttu-id="c4bc1-215">Assistente de conexão do AD do Azure analisa o estado de saudação do atributo de msDS-ConsistencyGuid Olá no Active Directory local.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-215">Azure AD Connect wizard analyzes hello state of hello msDS-ConsistencyGuid attribute in your on-premises Active Directory.</span></span> <span data-ttu-id="c4bc1-216">Se o atributo de saudação não está configurado em qualquer objeto em Olá que diretório, o Azure AD Connect conclui que nenhum outro aplicativo está usando atualmente o atributo hello e é seguro toouse-lo como atributo de âncora de origem hello.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-216">If hello attribute isn't configured on any object in hello directory, Azure AD Connect concludes that no other application is currently using hello attribute and is safe toouse it as hello Source Anchor attribute.</span></span> <span data-ttu-id="c4bc1-217">Clique em **próximo** toocontinue.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-217">Click **Next** toocontinue.</span></span>

   ![Habilitar ConsistencyGuid para implantação existente – etapa 4](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment02.png)

5. <span data-ttu-id="c4bc1-219">Em Olá **tooConfigure pronto** tela, clique em **configurar** toomake alteração de configuração de saudação.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-219">In hello **Ready tooConfigure** screen, click **Configure** toomake hello configuration change.</span></span>

   ![Habilitar ConsistencyGuid para implantação existente – etapa 5](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment03.png)

6. <span data-ttu-id="c4bc1-221">Após a conclusão da configuração hello, o Assistente de saudação indica que msDS-ConsistencyGuid agora está sendo usada como atributo de âncora de origem hello.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-221">Once hello configuration completes, hello wizard indicates that msDS-ConsistencyGuid is now being used as hello Source Anchor attribute.</span></span>

   ![Habilitar ConsistencyGuid para implantação existente – etapa 6](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment04.png)

<span data-ttu-id="c4bc1-223">Durante a análise da saudação (etapa 4), se o atributo de saudação é configurado em um ou mais objetos no diretório Olá, Assistente de saudação conclui atributo hello está sendo usado por outro aplicativo e retorna um erro, como ilustrado no diagrama de saudação abaixo.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-223">During hello analysis (step 4), if hello attribute is configured on one or more objects in hello directory, hello wizard concludes hello attribute is being used by another application and returns an error as illustrated in hello diagram below.</span></span> <span data-ttu-id="c4bc1-224">Se você tem certeza de que o atributo Olá não é usado por aplicativos existentes, será necessário toocontact suporte para obter informações sobre como toosuppress Olá erro.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-224">If you are certain that hello attribute isn't used by existing applications, you need toocontact Support for information on how toosuppress hello error.</span></span>

![Habilitar ConsistencyGuid para implantação existente – erro](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeploymenterror.png)

### <a name="impact-on-ad-fs-or-third-party-federation-configuration"></a><span data-ttu-id="c4bc1-226">Impacto sobre o AD FS ou a configuração de federação de terceiros</span><span class="sxs-lookup"><span data-stu-id="c4bc1-226">Impact on AD FS or third-party federation configuration</span></span>
<span data-ttu-id="c4bc1-227">Se você estiver usando o Azure AD Connect toomanage de implantação do AD FS no local, Olá do Azure AD Connect atualiza automaticamente Olá regras toouse Olá AD mesmo atributo de declaração de como sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-227">If you are using Azure AD Connect toomanage on-premises AD FS deployment, hello Azure AD Connect automatically updates hello claim rules toouse hello same AD attribute as sourceAnchor.</span></span> <span data-ttu-id="c4bc1-228">Isso garante que essa declaração de ImmutableID Olá gerada pelo AD FS é consistente com hello sourceAnchor valores exportados tooAzure AD.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-228">This ensures that hello ImmutableID claim generated by ADFS is consistent with hello sourceAnchor values exported tooAzure AD.</span></span>

<span data-ttu-id="c4bc1-229">Se você estiver gerenciando o AD FS fora do Azure AD Connect ou você estiver usando servidores de federação de terceiros para autenticação, você deve atualizar manualmente as regras de declaração Olá para ImmutableID declaração toobe consistente com os valores de sourceAnchor hello exportada tooAzure AD como descrito na seção do artigo [regras de declaração de modificar o AD FS](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-federation-management#modclaims).</span><span class="sxs-lookup"><span data-stu-id="c4bc1-229">If you are managing AD FS outside of Azure AD Connect or you are using third-party federation servers for authentication, you must manually update hello claim rules for ImmutableID claim toobe consistent with hello sourceAnchor values exported tooAzure AD as described in article section [Modify AD FS claim rules](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-federation-management#modclaims).</span></span> <span data-ttu-id="c4bc1-230">Assistente de saudação retorna Olá aviso a seguir após a conclusão da instalação:</span><span class="sxs-lookup"><span data-stu-id="c4bc1-230">hello wizard returns hello following warning after installation completes:</span></span>

![Configuração da federação de terceiros](./media/active-directory-aadconnect-design-concepts/consistencyGuid-03.png)

### <a name="adding-new-directories-tooexisting-deployment"></a><span data-ttu-id="c4bc1-232">Adicionar nova implantação de tooexisting de diretórios</span><span class="sxs-lookup"><span data-stu-id="c4bc1-232">Adding new directories tooexisting deployment</span></span>
<span data-ttu-id="c4bc1-233">Suponha que você implantou o Azure AD Connect com hello ConsistencyGuid recurso habilitado, e agora deseja tooadd outra implantação de toohello do diretório.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-233">Suppose you have deployed Azure AD Connect with hello ConsistencyGuid feature enabled, and now you would like tooadd another directory toohello deployment.</span></span> <span data-ttu-id="c4bc1-234">Quando você tenta tooadd diretório de hello, Assistente do Azure AD Connect verifica estado de saudação do atributo de mSDS-ConsistencyGuid Olá no diretório de saudação.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-234">When you try tooadd hello directory, Azure AD Connect wizard checks hello state of hello mSDS-ConsistencyGuid attribute in hello directory.</span></span> <span data-ttu-id="c4bc1-235">Se o atributo Olá estiver configurado em um ou mais objetos no diretório hello, Assistente de saudação conclui atributo hello está sendo usado por outros aplicativos e retorna um erro, como ilustrado no diagrama de saudação abaixo.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-235">If hello attribute is configured on one or more objects in hello directory, hello wizard concludes hello attribute is being used by other applications and returns an error as illustrated in hello diagram below.</span></span> <span data-ttu-id="c4bc1-236">Se você tem certeza de que o atributo Olá não é usado por aplicativos existentes, será necessário toocontact suporte para obter informações sobre como toosuppress Olá erro.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-236">If you are certain that hello attribute isn't used by existing applications, you need toocontact Support for information on how toosuppress hello error.</span></span>

![Adicionar nova implantação de tooexisting de diretórios](./media/active-directory-aadconnect-design-concepts/consistencyGuid-04.png)

## <a name="azure-ad-sign-in"></a><span data-ttu-id="c4bc1-238">Entrar no Azure AD</span><span class="sxs-lookup"><span data-stu-id="c4bc1-238">Azure AD sign-in</span></span>
<span data-ttu-id="c4bc1-239">Ao integrar seu diretório local com o Azure AD, é importante toounderstand como as configurações de sincronização de saudação podem afetar o usuário de maneira Olá autentica.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-239">While integrating your on-premises directory with Azure AD, it is important toounderstand how hello synchronization settings can affect hello way user authenticates.</span></span> <span data-ttu-id="c4bc1-240">AD do Azure usa o usuário de saudação tooauthenticate userPrincipalName (UPN).</span><span class="sxs-lookup"><span data-stu-id="c4bc1-240">Azure AD uses userPrincipalName (UPN) tooauthenticate hello user.</span></span> <span data-ttu-id="c4bc1-241">No entanto, quando você sincroniza os usuários, você deve escolher Olá atributo toobe utilizada para valor de userPrincipalName cuidadosamente.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-241">However, when you synchronize your users, you must choose hello attribute toobe used for value of userPrincipalName carefully.</span></span>

### <a name="choosing-hello-attribute-for-userprincipalname"></a><span data-ttu-id="c4bc1-242">Escolher o atributo userPrincipalName Olá</span><span class="sxs-lookup"><span data-stu-id="c4bc1-242">Choosing hello attribute for userPrincipalName</span></span>
<span data-ttu-id="c4bc1-243">Quando você seleciona atributo Olá para fornecer o valor de saudação do UPN toobe usado no Azure deve verificar</span><span class="sxs-lookup"><span data-stu-id="c4bc1-243">When you are selecting hello attribute for providing hello value of UPN toobe used in Azure one should ensure</span></span>

* <span data-ttu-id="c4bc1-244">toohello UPN sintaxe (RFC 822), que ele deve ter o formato de saudação está de acordo com os valores de atributo Oláusername@domain</span><span class="sxs-lookup"><span data-stu-id="c4bc1-244">hello attribute values conform toohello UPN syntax (RFC 822), that is it should be of hello format username@domain</span></span>
* <span data-ttu-id="c4bc1-245">sufixo Olá Olá valores correspondências tooone de saudação verificado domínios personalizados no AD do Azure</span><span class="sxs-lookup"><span data-stu-id="c4bc1-245">hello suffix in hello values matches tooone of hello verified custom domains in Azure AD</span></span>

<span data-ttu-id="c4bc1-246">Em configurações expressas, Olá assumido escolha para atributo Olá é userPrincipalName.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-246">In express settings, hello assumed choice for hello attribute is userPrincipalName.</span></span> <span data-ttu-id="c4bc1-247">Se o atributo userPrincipalName de saudação não contém um valor de saudação desejado toosign seus usuários em tooAzure, você deve escolher **instalação personalizada**.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-247">If hello userPrincipalName attribute does not contain hello value you want your users toosign in tooAzure, then you must choose **Custom Installation**.</span></span>

### <a name="custom-domain-state-and-upn"></a><span data-ttu-id="c4bc1-248">Estado de domínio personalizado e UPN</span><span class="sxs-lookup"><span data-stu-id="c4bc1-248">Custom domain state and UPN</span></span>
<span data-ttu-id="c4bc1-249">É importante tooensure que há um domínio verificado para o sufixo UPN hello.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-249">It is important tooensure that there is a verified domain for hello UPN suffix.</span></span>

<span data-ttu-id="c4bc1-250">John é um usuário em contoso.com. Você deseja John toouse Olá UPN local john@contoso.com toosign em tooAzure após foram sincronizadas usuários tooyour AD do Azure diretório contoso.onmicrosoft.com. toodo assim, você precisa tooadd e verifique se o contoso.com como um domínio personalizado no AD do Azure antes de começar sincronizar usuários hello.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-250">John is a user in contoso.com. You want John toouse hello on-premises UPN john@contoso.com toosign in tooAzure after you have synced users tooyour Azure AD directory contoso.onmicrosoft.com. toodo so, you need tooadd and verify contoso.com as a custom domain in Azure AD before you can start syncing hello users.</span></span> <span data-ttu-id="c4bc1-251">Se o sufixo UPN Olá John, por exemplo, contoso.com, não coincide com um domínio verificado no AD do Azure, o AD do Azure substitui sufixo UPN Olá com contoso.onmicrosoft.com.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-251">If hello UPN suffix of John, for example contoso.com, does not match a verified domain in Azure AD, then Azure AD replaces hello UPN suffix with contoso.onmicrosoft.com.</span></span>

### <a name="non-routable-on-premises-domains-and-upn-for-azure-ad"></a><span data-ttu-id="c4bc1-252">Domínios locais não roteáveis e UPN para Azure AD</span><span class="sxs-lookup"><span data-stu-id="c4bc1-252">Non-routable on-premises domains and UPN for Azure AD</span></span>
<span data-ttu-id="c4bc1-253">Algumas organizações têm domínios não roteáveis, como contoso.local ou domínios de rótulo único simples, como contoso.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-253">Some organizations have non-routable domains, like contoso.local, or simple single label domains like contoso.</span></span> <span data-ttu-id="c4bc1-254">Você não é capaz de tooverify um domínio não roteável no AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-254">You are not able tooverify a non-routable domain in Azure AD.</span></span> <span data-ttu-id="c4bc1-255">Conexão do AD do Azure pode sincronizar tooonly um domínio verificado no AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-255">Azure AD Connect can sync tooonly a verified domain in Azure AD.</span></span> <span data-ttu-id="c4bc1-256">Quando você cria um diretório do Azure AD, ele cria um domínio roteável que torna-se o domínio padrão do Azure AD, por exemplo, contoso.onmicrosoft.com. Portanto, é necessário tooverify qualquer outro domínio roteável nesse cenário caso você não deseje toosync toohello padrão onmicrosoft.com domínio.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-256">When you create an Azure AD directory, it creates a routable domain that becomes default domain for your Azure AD for example, contoso.onmicrosoft.com. Therefore, it becomes necessary tooverify any other routable domain in such a scenario in case you don't want toosync toohello default onmicrosoft.com domain.</span></span>

<span data-ttu-id="c4bc1-257">Leitura [adicionar seu nome de domínio personalizado tooAzure do Active Directory](../active-directory-add-domain.md) para obter mais informações sobre como adicionar e verificar os domínios.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-257">Read [Add your custom domain name tooAzure Active Directory](../active-directory-add-domain.md) for more info on adding and verifying domains.</span></span>

<span data-ttu-id="c4bc1-258">O Azure AD Connect detecta se você está executando em um ambiente de domínio não roteável e avisa corretamente para não prosseguir com configurações expressas.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-258">Azure AD Connect detects if you are running in a non-routable domain environment and would appropriately warn you from going ahead with express settings.</span></span> <span data-ttu-id="c4bc1-259">Se você estiver operando em um domínio não pode ser roteado, em seguida, é provável que UPN de usuários Olá Olá ter muito sufixos não roteável.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-259">If you are operating in a non-routable domain, then it is likely that hello UPN of hello users have non-routable suffixes too.</span></span> <span data-ttu-id="c4bc1-260">Por exemplo, se você estiver executando em contoso. local, o Azure AD Connect sugere você toouse configurações personalizadas em vez de usar configurações expressas.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-260">For example, if you are running under contoso.local, Azure AD Connect suggests you toouse custom settings rather than using express settings.</span></span> <span data-ttu-id="c4bc1-261">Usando configurações personalizadas, você está toospecify capaz de atributo de saudação que deve ser usado como o UPN toosign em tooAzure depois usuários Olá são sincronizado tooAzure AD.</span><span class="sxs-lookup"><span data-stu-id="c4bc1-261">Using custom settings, you are able toospecify hello attribute that should be used as UPN toosign in tooAzure after hello users are synced tooAzure AD.</span></span>

## <a name="next-steps"></a><span data-ttu-id="c4bc1-262">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="c4bc1-262">Next steps</span></span>
<span data-ttu-id="c4bc1-263">Saiba mais sobre [Como integrar suas identidades locais ao Active Directory do Azure](active-directory-aadconnect.md).</span><span class="sxs-lookup"><span data-stu-id="c4bc1-263">Learn more about [Integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>
