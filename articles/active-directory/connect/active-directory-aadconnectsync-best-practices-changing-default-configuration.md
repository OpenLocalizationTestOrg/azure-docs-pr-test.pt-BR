---
title: "Sincronização do Azure AD Connect: alteração da configuração padrão | Microsoft Docs"
description: "Fornece práticas recomendadas para alterar a configuração padrão da sincronização do Azure AD Connect."
services: active-directory
documentationcenter: 
author: andkjell
manager: femila
editor: 
ms.assetid: 7638a031-1635-4942-94c3-fce8f09eed5e
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/12/2017
ms.author: billmath
ms.openlocfilehash: b723ad800ccc0f3040eb480bb72960943b1fdb16
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/03/2017
---
# <a name="azure-ad-connect-sync-best-practices-for-changing-the-default-configuration"></a><span data-ttu-id="ad0f7-103">Sincronização do Azure AD Connect: práticas recomendadas para alterar a configuração padrão</span><span class="sxs-lookup"><span data-stu-id="ad0f7-103">Azure AD Connect sync: Best practices for changing the default configuration</span></span>
<span data-ttu-id="ad0f7-104">O objetivo deste tópico é descrever as alterações com e sem suporte para a sincronização do Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="ad0f7-104">The purpose of this topic is to describe supported and unsupported changes to Azure AD Connect sync.</span></span>

<span data-ttu-id="ad0f7-105">A configuração criada pelo Azure AD Connect funciona "da forma como é" para a maioria dos ambientes que sincronizam o Active Directory local com o AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="ad0f7-105">The configuration created by Azure AD Connect works “as is” for most environments that synchronize on-premises Active Directory with Azure AD.</span></span> <span data-ttu-id="ad0f7-106">No entanto, em alguns casos, é necessário aplicar alterações a uma configuração para atender a uma necessidade ou requisito específico.</span><span class="sxs-lookup"><span data-stu-id="ad0f7-106">However, in some cases, it is necessary to apply some changes to a configuration to satisfy a particular need or requirement.</span></span>

## <a name="changes-to-the-service-account"></a><span data-ttu-id="ad0f7-107">Alterações na conta de serviço</span><span class="sxs-lookup"><span data-stu-id="ad0f7-107">Changes to the service account</span></span>
<span data-ttu-id="ad0f7-108">A sincronização do Azure AD Connect é executada em uma conta de serviço criada pelo assistente de instalação.</span><span class="sxs-lookup"><span data-stu-id="ad0f7-108">Azure AD Connect sync is running under a service account created by the installation wizard.</span></span> <span data-ttu-id="ad0f7-109">Essa conta de serviço mantém as chaves de criptografia no banco de dados usado pela sincronização.</span><span class="sxs-lookup"><span data-stu-id="ad0f7-109">This service account holds the encryption keys to the database used by sync.</span></span> <span data-ttu-id="ad0f7-110">Ela é criada com uma senha de 127 caracteres que é definida para não expirar.</span><span class="sxs-lookup"><span data-stu-id="ad0f7-110">It is created with a 127 characters long password and the password is set to not expire.</span></span>

* <span data-ttu-id="ad0f7-111">**Não há suporte** para alteração ou redefinição da senha da conta de serviço.</span><span class="sxs-lookup"><span data-stu-id="ad0f7-111">It is **unsupported** to change or reset the password of the service account.</span></span> <span data-ttu-id="ad0f7-112">Isso destruirá as chaves de criptografia e o serviço não poderá acessar o banco de dados e iniciar.</span><span class="sxs-lookup"><span data-stu-id="ad0f7-112">Doing so destroys the encryption keys and the service is not able to access the database and is not able to start.</span></span>

## <a name="changes-to-the-scheduler"></a><span data-ttu-id="ad0f7-113">Alterações no agendador</span><span class="sxs-lookup"><span data-stu-id="ad0f7-113">Changes to the scheduler</span></span>
<span data-ttu-id="ad0f7-114">A partir da versão 1.1 (fevereiro de 2016), você pode configurar o [agendador](active-directory-aadconnectsync-feature-scheduler.md) para ter um ciclo de sincronização diferente do padrão de 30 minutos.</span><span class="sxs-lookup"><span data-stu-id="ad0f7-114">Starting with the releases from build 1.1 (February 2016) you can configure the [scheduler](active-directory-aadconnectsync-feature-scheduler.md) to have a different sync cycle than the default 30 minutes.</span></span>

## <a name="changes-to-synchronization-rules"></a><span data-ttu-id="ad0f7-115">Alterações nas regras de sincronização</span><span class="sxs-lookup"><span data-stu-id="ad0f7-115">Changes to Synchronization Rules</span></span>
<span data-ttu-id="ad0f7-116">O assistente de instalação fornece uma configuração que deve funcionar nos cenários mais comuns.</span><span class="sxs-lookup"><span data-stu-id="ad0f7-116">The installation wizard provides a configuration that is supposed to work for the most common scenarios.</span></span> <span data-ttu-id="ad0f7-117">No caso de precisar fazer alterações na configuração, você deve seguir estas regras para continuar com uma configuração com suporte.</span><span class="sxs-lookup"><span data-stu-id="ad0f7-117">In case you need to make changes to the configuration, then you must follow these rules to still have a supported configuration.</span></span>

* <span data-ttu-id="ad0f7-118">Você poderá [alterar fluxos de atributos](active-directory-aadconnectsync-change-the-configuration.md#other-common-attribute-flow-changes) se os fluxos de atributos diretos padrão não forem adequados para sua organização.</span><span class="sxs-lookup"><span data-stu-id="ad0f7-118">You can [change attribute flows](active-directory-aadconnectsync-change-the-configuration.md#other-common-attribute-flow-changes) if the default direct attribute flows are not suitable for your organization.</span></span>
* <span data-ttu-id="ad0f7-119">Se você optar por [não fluir um atributo](active-directory-aadconnectsync-change-the-configuration.md#do-not-flow-an-attribute) e remover valores do atributo existentes no Azure AD, você precisará criar uma regra para este cenário.</span><span class="sxs-lookup"><span data-stu-id="ad0f7-119">If you want to [not flow an attribute](active-directory-aadconnectsync-change-the-configuration.md#do-not-flow-an-attribute) and remove any existing attribute values in Azure AD, then you need to create a rule for this scenario.</span></span>
* <span data-ttu-id="ad0f7-120">[Desabilite uma Regra de sincronização indesejada](#disable-an-unwanted-sync-rule) em vez de excluí-la.</span><span class="sxs-lookup"><span data-stu-id="ad0f7-120">[Disable an unwanted Sync Rule](#disable-an-unwanted-sync-rule) rather than deleting it.</span></span> <span data-ttu-id="ad0f7-121">Uma regra excluída é recriada durante uma atualização.</span><span class="sxs-lookup"><span data-stu-id="ad0f7-121">A deleted rule is recreated during an upgrade.</span></span>
* <span data-ttu-id="ad0f7-122">Para [alterar uma regra integrada](#change-an-out-of-box-rule), você deverá fazer uma cópia da regra original e desabilitar a regra integrada.</span><span class="sxs-lookup"><span data-stu-id="ad0f7-122">To [change an out-of-box rule](#change-an-out-of-box-rule), you should make a copy of the original rule and disable the out-of-box rule.</span></span> <span data-ttu-id="ad0f7-123">O Editor de Regra de Sincronização solicita e ajuda você.</span><span class="sxs-lookup"><span data-stu-id="ad0f7-123">The Sync Rule Editor prompts and helps you.</span></span>
* <span data-ttu-id="ad0f7-124">Exporte suas regras de sincronização personalizadas usando o Editor de regras de sincronização.</span><span class="sxs-lookup"><span data-stu-id="ad0f7-124">Export your custom synchronization rules using the Synchronization Rules Editor.</span></span> <span data-ttu-id="ad0f7-125">O editor fornece um script do PowerShell que você pode usar para recriá-los facilmente em um cenário de recuperação de desastres.</span><span class="sxs-lookup"><span data-stu-id="ad0f7-125">The editor provides you with a PowerShell script you can use to easily recreate them in a disaster recovery scenario.</span></span>

> [!WARNING]
> <span data-ttu-id="ad0f7-126">As regras de sincronização integrada têm uma impressão digital.</span><span class="sxs-lookup"><span data-stu-id="ad0f7-126">The out-of-box sync rules have a thumbprint.</span></span> <span data-ttu-id="ad0f7-127">Se você fizer uma alteração a essas regras, a impressão digital não corresponderá mais.</span><span class="sxs-lookup"><span data-stu-id="ad0f7-127">If you make a change to these rules, the thumbprint is no longer matching.</span></span> <span data-ttu-id="ad0f7-128">Você pode ter problemas no futuro, quando tentar aplicar uma nova versão do Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="ad0f7-128">You might have problems in the future when you try to apply a new release of Azure AD Connect.</span></span> <span data-ttu-id="ad0f7-129">Faça alterações somente como é descrito neste artigo.</span><span class="sxs-lookup"><span data-stu-id="ad0f7-129">Only make changes the way it is described in this article.</span></span>

### <a name="disable-an-unwanted-sync-rule"></a><span data-ttu-id="ad0f7-130">Desabilite uma Regra de sincronização indesejada</span><span class="sxs-lookup"><span data-stu-id="ad0f7-130">Disable an unwanted Sync Rule</span></span>
<span data-ttu-id="ad0f7-131">Não exclua uma regra de sincronização integrada.</span><span class="sxs-lookup"><span data-stu-id="ad0f7-131">Do not delete an out-of-box sync rule.</span></span> <span data-ttu-id="ad0f7-132">Ela será recriada durante a próxima atualização.</span><span class="sxs-lookup"><span data-stu-id="ad0f7-132">It is recreated during next upgrade.</span></span>

<span data-ttu-id="ad0f7-133">Em alguns casos, o assistente de instalação produz uma configuração que não funciona para sua topologia.</span><span class="sxs-lookup"><span data-stu-id="ad0f7-133">In some cases, the installation wizard has produced a configuration that is not working for your topology.</span></span> <span data-ttu-id="ad0f7-134">Por exemplo, se houver uma topologia de floresta de recurso de conta, mas você estendeu o esquema na floresta de conta com o esquema do Exchange, as regras do Exchange serão criadas para a floresta de contas e para a floresta de recursos.</span><span class="sxs-lookup"><span data-stu-id="ad0f7-134">For example, if you have an account-resource forest topology but you have extended the schema in the account forest with the Exchange schema, then rules for Exchange are created for the account forest and the resource forest.</span></span> <span data-ttu-id="ad0f7-135">Nesse caso, você deverá desabilitar a Regra de Sincronização do Exchange.</span><span class="sxs-lookup"><span data-stu-id="ad0f7-135">In this case, you need to disable the Sync Rule for Exchange.</span></span>

![Regra de sincronização desabilitada](./media/active-directory-aadconnectsync-best-practices-changing-default-configuration/exchangedisabledrule.png)

<span data-ttu-id="ad0f7-137">Na figura acima, o assistente de instalação encontrou um esquema antigo do Exchange 2003 na floresta de contas.</span><span class="sxs-lookup"><span data-stu-id="ad0f7-137">In the picture above, the installation wizard has found an old Exchange 2003 schema in the account forest.</span></span> <span data-ttu-id="ad0f7-138">Esta extensão de esquema foi adicionada antes da floresta de recursos ter sido introduzida no ambiente da Fabrikam.</span><span class="sxs-lookup"><span data-stu-id="ad0f7-138">This schema extension was added before the resource forest was introduced in Fabrikam's environment.</span></span> <span data-ttu-id="ad0f7-139">Para garantir que nenhum atributo da implementação do Exchange antigo seja sincronizado, a regra de sincronização deve ser desabilitada conforme mostrado.</span><span class="sxs-lookup"><span data-stu-id="ad0f7-139">To ensure no attributes from the old Exchange implementation are synchronized, the sync rule should be disabled as shown.</span></span>

### <a name="change-an-out-of-box-rule"></a><span data-ttu-id="ad0f7-140">alterar uma regra integrada</span><span class="sxs-lookup"><span data-stu-id="ad0f7-140">Change an out-of-box rule</span></span>
<span data-ttu-id="ad0f7-141">A única vez em que você deve alterar uma regra pronta para uso é quando você precisa alterar a regra de associação.</span><span class="sxs-lookup"><span data-stu-id="ad0f7-141">The only time you should change an out-of-box rule is when you need to change the join rule.</span></span> <span data-ttu-id="ad0f7-142">Se você precisar alterar um fluxo de atributos, deverá criar uma regra de sincronização com precedência maior do que as regras prontas para uso.</span><span class="sxs-lookup"><span data-stu-id="ad0f7-142">If you need to change an attribute flow, then you should create a sync rule with higher precedence than the out-of-box rules.</span></span> <span data-ttu-id="ad0f7-143">A única regra é praticamente necessário clone é a regra **em do AD – usuário Join**.</span><span class="sxs-lookup"><span data-stu-id="ad0f7-143">The only rule you practically need to clone is the rule **In from AD - User Join**.</span></span> <span data-ttu-id="ad0f7-144">Você pode substituir todas as outras regras com uma regra de prioridade mais alta.</span><span class="sxs-lookup"><span data-stu-id="ad0f7-144">You can override all other rules with a higher precedence rule.</span></span>

<span data-ttu-id="ad0f7-145">Se você precisar fazer alterações em uma regra integrada, deverá fazer uma cópia da regra integrada e desabilitar a regra original.</span><span class="sxs-lookup"><span data-stu-id="ad0f7-145">If you need to make changes to an out-of-box rule, then you should make a copy of the out-of-box rule and disable the original rule.</span></span> <span data-ttu-id="ad0f7-146">Em seguida, faça as alterações desejadas à regra clonada.</span><span class="sxs-lookup"><span data-stu-id="ad0f7-146">Then make the changes to the cloned rule.</span></span> <span data-ttu-id="ad0f7-147">O Editor de Regra de Sincronização ajuda você com essas etapas.</span><span class="sxs-lookup"><span data-stu-id="ad0f7-147">The Sync Rule Editor is helping you with those steps.</span></span> <span data-ttu-id="ad0f7-148">Quando você abre uma regra integrada, vê essa caixa de diálogo: </span><span class="sxs-lookup"><span data-stu-id="ad0f7-148">When you open an out-of-box rule, you are presented with this dialog box:</span></span>  
![Aviso de regra integrada](./media/active-directory-aadconnectsync-best-practices-changing-default-configuration/warningoutofboxrule.png)

<span data-ttu-id="ad0f7-150">Selecione **Sim** para criar uma cópia da regra.</span><span class="sxs-lookup"><span data-stu-id="ad0f7-150">Select **Yes** to create a copy of the rule.</span></span> <span data-ttu-id="ad0f7-151">Então, a regra clonada é aberta.</span><span class="sxs-lookup"><span data-stu-id="ad0f7-151">The cloned rule is then opened.</span></span>  
<span data-ttu-id="ad0f7-152">![Regra clonada](./media/active-directory-aadconnectsync-best-practices-changing-default-configuration/clonedrule.png)</span><span class="sxs-lookup"><span data-stu-id="ad0f7-152">![Cloned rule](./media/active-directory-aadconnectsync-best-practices-changing-default-configuration/clonedrule.png)</span></span>

<span data-ttu-id="ad0f7-153">Na regra clonada, faça as alterações necessárias no escopo, na associação e nas transformações.</span><span class="sxs-lookup"><span data-stu-id="ad0f7-153">On this cloned rule, make any necessary changes to scope, join, and transformations.</span></span>

## <a name="next-steps"></a><span data-ttu-id="ad0f7-154">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="ad0f7-154">Next steps</span></span>
<span data-ttu-id="ad0f7-155">**Tópicos de visão geral**</span><span class="sxs-lookup"><span data-stu-id="ad0f7-155">**Overview topics**</span></span>

* [<span data-ttu-id="ad0f7-156">Sincronização do Azure AD Connect: compreender e personalizar a sincronização</span><span class="sxs-lookup"><span data-stu-id="ad0f7-156">Azure AD Connect sync: Understand and customize synchronization</span></span>](active-directory-aadconnectsync-whatis.md)
* [<span data-ttu-id="ad0f7-157">Integração de suas identidades locais com o Active Directory do Azure</span><span class="sxs-lookup"><span data-stu-id="ad0f7-157">Integrating your on-premises identities with Azure Active Directory</span></span>](active-directory-aadconnect.md)
