---
title: "Azure AD Connect: Noções básicas sobre provisionamento declarativo | Microsoft Docs"
description: "Explica o modelo de configuração de provisionamento declarativo no Azure AD Connect."
services: active-directory
documentationcenter: 
author: andkjell
manager: femila
editor: 
ms.assetid: cfbb870d-be7d-47b3-ba01-9e78121f0067
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/13/2017
ms.author: billmath
ms.openlocfilehash: 7497ec2ca658c3790227c56ef1755d9a1cb74e0a
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/03/2017
---
# <a name="azure-ad-connect-sync-understanding-declarative-provisioning"></a><span data-ttu-id="0aac1-103">Sincronização do Azure AD Connect: noções básicas sobre expressões de provisionamento declarativo</span><span class="sxs-lookup"><span data-stu-id="0aac1-103">Azure AD Connect sync: Understanding Declarative Provisioning</span></span>
<span data-ttu-id="0aac1-104">Este tópico explica o modelo de configuração no Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="0aac1-104">This topic explains the configuration model in Azure AD Connect.</span></span> <span data-ttu-id="0aac1-105">O modelo é chamado de Provisionamento Declarativo e permite que você altere uma configuração com facilidade.</span><span class="sxs-lookup"><span data-stu-id="0aac1-105">The model is called Declarative Provisioning and it allows you to make a configuration change with ease.</span></span> <span data-ttu-id="0aac1-106">Muitos itens descritos neste tópico são avançados e não são necessários para a maioria dos cenários do cliente.</span><span class="sxs-lookup"><span data-stu-id="0aac1-106">Many things described in this topic are advanced and not required for most customer scenarios.</span></span>

## <a name="overview"></a><span data-ttu-id="0aac1-107">Visão geral</span><span class="sxs-lookup"><span data-stu-id="0aac1-107">Overview</span></span>
<span data-ttu-id="0aac1-108">O provisionamento declarativo está processando objetos provenientes um diretório de origem conectado e determina como o objeto e os atributos devem ser transformados de uma origem para um destino.</span><span class="sxs-lookup"><span data-stu-id="0aac1-108">Declarative provisioning is processing objects coming in from a source connected directory and determines how the object and attributes should be transformed from a source to a target.</span></span> <span data-ttu-id="0aac1-109">Um objeto é processado em um pipeline de sincronização, e o pipeline é o mesmo para regras de entrada e saída.</span><span class="sxs-lookup"><span data-stu-id="0aac1-109">An object is processed in a sync pipeline and the pipeline is the same for inbound and outbound rules.</span></span> <span data-ttu-id="0aac1-110">Uma regra de entrada é de um espaço de conector para o metaverso, e uma regra de saída é do metaverso para um espaço do conector.</span><span class="sxs-lookup"><span data-stu-id="0aac1-110">An inbound rule is from a connector space to the metaverse and an outbound rule is from the metaverse to a connector space.</span></span>

![Pipeline de sincronização](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/sync1.png)  

<span data-ttu-id="0aac1-112">O pipeline tem vários módulos diferentes.</span><span class="sxs-lookup"><span data-stu-id="0aac1-112">The pipeline has several different modules.</span></span> <span data-ttu-id="0aac1-113">Cada um é responsável por um conceito na sincronização de objeto.</span><span class="sxs-lookup"><span data-stu-id="0aac1-113">Each one is responsible for one concept in object synchronization.</span></span>

![Pipeline de sincronização](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/pipeline.png)  

* <span data-ttu-id="0aac1-115">Origem, objeto de origem</span><span class="sxs-lookup"><span data-stu-id="0aac1-115">Source, The source object</span></span>
* <span data-ttu-id="0aac1-116">[Escopo](#scope)localiza todas as regras de sincronização que estão no escopo</span><span class="sxs-lookup"><span data-stu-id="0aac1-116">[Scope](#scope), Finds all sync rules that are in scope</span></span>
* <span data-ttu-id="0aac1-117">[Ingressar](#join)determina a relação entre o metaverso e o espaço do conector</span><span class="sxs-lookup"><span data-stu-id="0aac1-117">[Join](#join), Determines relationship between connector space and metaverse</span></span>
* <span data-ttu-id="0aac1-118">[Transformar](#transform)calcula como os atributos devem ser transformados e fluir</span><span class="sxs-lookup"><span data-stu-id="0aac1-118">[Transform](#transform), Calculates how attributes should be transformed and flow</span></span>
* <span data-ttu-id="0aac1-119">[Precedência](#precedence)resolve conflitos de contribuições de atributo</span><span class="sxs-lookup"><span data-stu-id="0aac1-119">[Precedence](#precedence), Resolves conflicting attribute contributions</span></span>
* <span data-ttu-id="0aac1-120">Destino, objeto de destino</span><span class="sxs-lookup"><span data-stu-id="0aac1-120">Target, The target object</span></span>

## <a name="scope"></a><span data-ttu-id="0aac1-121">Escopo</span><span class="sxs-lookup"><span data-stu-id="0aac1-121">Scope</span></span>
<span data-ttu-id="0aac1-122">O módulo de escopo está avaliando um objeto e determina as regras que estão no escopo e devem ser incluídas no processamento.</span><span class="sxs-lookup"><span data-stu-id="0aac1-122">The scope module is evaluating an object and determines the rules that are in scope and should be included in the processing.</span></span> <span data-ttu-id="0aac1-123">Dependendo dos valores de atributos no objeto, regras de sincronização diferentes são avaliadas como estando no escopo.</span><span class="sxs-lookup"><span data-stu-id="0aac1-123">Depending on the attributes values on the object, different sync rules are evaluated to be in scope.</span></span> <span data-ttu-id="0aac1-124">Por exemplo, um usuário desabilitado sem uma caixa de correio do Exchange tem regras diferentes das de um usuário habilitado com uma caixa de correio.</span><span class="sxs-lookup"><span data-stu-id="0aac1-124">For example, a disabled user with no Exchange mailbox does have different rules than an enabled user with a mailbox.</span></span>  
![Escopo](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/scope1.png)  

<span data-ttu-id="0aac1-126">O escopo é definido como grupos e cláusulas.</span><span class="sxs-lookup"><span data-stu-id="0aac1-126">The scope is defined as groups and clauses.</span></span> <span data-ttu-id="0aac1-127">As cláusulas estão dentro de um grupo.</span><span class="sxs-lookup"><span data-stu-id="0aac1-127">The clauses are inside a group.</span></span> <span data-ttu-id="0aac1-128">Um E lógico é usado entre todas as cláusulas em um grupo.</span><span class="sxs-lookup"><span data-stu-id="0aac1-128">A logical AND is used between all clauses in a group.</span></span> <span data-ttu-id="0aac1-129">Por exemplo, (department =TI E country = Dinamarca).</span><span class="sxs-lookup"><span data-stu-id="0aac1-129">For example, (department =IT AND country = Denmark).</span></span> <span data-ttu-id="0aac1-130">Um OU lógico é usado entre grupos.</span><span class="sxs-lookup"><span data-stu-id="0aac1-130">A logical OR is used between groups.</span></span>

![Escopo](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/scope2.png)  
<span data-ttu-id="0aac1-132">O escopo nesta imagem deve ser lido como (department = TI e country = Dinamarca) ou (country = Suécia).</span><span class="sxs-lookup"><span data-stu-id="0aac1-132">The scope in this picture should be read as (department = IT AND country = Denmark) OR (country=Sweden).</span></span> <span data-ttu-id="0aac1-133">Se o grupo 1 ou 2 for avaliado como true, a regra está no escopo.</span><span class="sxs-lookup"><span data-stu-id="0aac1-133">If either group 1 or group 2 is evaluated to true, then the rule is in scope.</span></span>

<span data-ttu-id="0aac1-134">O módulo de escopo dá suporte às operações a seguir.</span><span class="sxs-lookup"><span data-stu-id="0aac1-134">The scope module supports the following operations.</span></span>

| <span data-ttu-id="0aac1-135">Operação</span><span class="sxs-lookup"><span data-stu-id="0aac1-135">Operation</span></span> | <span data-ttu-id="0aac1-136">Descrição</span><span class="sxs-lookup"><span data-stu-id="0aac1-136">Description</span></span> |
| --- | --- |
| <span data-ttu-id="0aac1-137">EQUAL, NOTEQUAL</span><span class="sxs-lookup"><span data-stu-id="0aac1-137">EQUAL, NOTEQUAL</span></span> |<span data-ttu-id="0aac1-138">Uma comparação de cadeia de caracteres que avalia se o valor é igual ao valor do atributo.</span><span class="sxs-lookup"><span data-stu-id="0aac1-138">A string compare that evaluates if value is equal to the value in the attribute.</span></span> <span data-ttu-id="0aac1-139">Para atributos com valores múltiplos, confira ISIN e ISNOTIN.</span><span class="sxs-lookup"><span data-stu-id="0aac1-139">For multi-valued attributes, see ISIN and ISNOTIN.</span></span> |
| <span data-ttu-id="0aac1-140">LESSTHAN, LESSTHAN_OR_EQUAL</span><span class="sxs-lookup"><span data-stu-id="0aac1-140">LESSTHAN, LESSTHAN_OR_EQUAL</span></span> |<span data-ttu-id="0aac1-141">Uma comparação de cadeia de caracteres que avalia se o valor é menor do que o valor do atributo.</span><span class="sxs-lookup"><span data-stu-id="0aac1-141">A string compare that evaluates if value is less than of the value in the attribute.</span></span> |
| <span data-ttu-id="0aac1-142">CONTAINS, NOTCONTAINS</span><span class="sxs-lookup"><span data-stu-id="0aac1-142">CONTAINS, NOTCONTAINS</span></span> |<span data-ttu-id="0aac1-143">Comparação de cadeia de caracteres que avalia se o valor pode ser encontrado em algum lugar no valor do atributo.</span><span class="sxs-lookup"><span data-stu-id="0aac1-143">A string compare that evaluates if value can be found somewhere inside value in the attribute.</span></span> |
| <span data-ttu-id="0aac1-144">STARTSWITH, NOTSTARTSWITH</span><span class="sxs-lookup"><span data-stu-id="0aac1-144">STARTSWITH, NOTSTARTSWITH</span></span> |<span data-ttu-id="0aac1-145">Comparação de cadeia de caracteres que avalia se o valor está no início do valor do atributo.</span><span class="sxs-lookup"><span data-stu-id="0aac1-145">A string compare that evaluates if value is in the beginning of the value in the attribute.</span></span> |
| <span data-ttu-id="0aac1-146">ENDSWITH, NOTENDSWITH</span><span class="sxs-lookup"><span data-stu-id="0aac1-146">ENDSWITH, NOTENDSWITH</span></span> |<span data-ttu-id="0aac1-147">Comparação de cadeia de caracteres que avalia se o valor está no fim do valor do atributo.</span><span class="sxs-lookup"><span data-stu-id="0aac1-147">A string compare that evaluates if value is in the end of the value in the attribute.</span></span> |
| <span data-ttu-id="0aac1-148">GREATERTHAN, GREATERTHAN_OR_EQUAL</span><span class="sxs-lookup"><span data-stu-id="0aac1-148">GREATERTHAN, GREATERTHAN_OR_EQUAL</span></span> |<span data-ttu-id="0aac1-149">Comparação de cadeia de caracteres que avalia se o valor é maior do que o valor do atributo.</span><span class="sxs-lookup"><span data-stu-id="0aac1-149">A string compare that evaluates if value is greater than of the value in the attribute.</span></span> |
| <span data-ttu-id="0aac1-150">ISNULL, ISNOTNULL</span><span class="sxs-lookup"><span data-stu-id="0aac1-150">ISNULL, ISNOTNULL</span></span> |<span data-ttu-id="0aac1-151">Avalia se o atributo está ausente do objeto.</span><span class="sxs-lookup"><span data-stu-id="0aac1-151">Evaluates if the attribute is absent from the object.</span></span> <span data-ttu-id="0aac1-152">Se o atributo não estiver presente e, portanto, for nulo, a regra está no escopo.</span><span class="sxs-lookup"><span data-stu-id="0aac1-152">If the attribute is not present and therefore null, then the rule is in scope.</span></span> |
| <span data-ttu-id="0aac1-153">ISIN, ISNOTIN</span><span class="sxs-lookup"><span data-stu-id="0aac1-153">ISIN, ISNOTIN</span></span> |<span data-ttu-id="0aac1-154">Avalia se o valor está presente no atributo definido.</span><span class="sxs-lookup"><span data-stu-id="0aac1-154">Evaluates if the value is present in the defined attribute.</span></span> <span data-ttu-id="0aac1-155">Essa operação é a variação de valores múltiplos de EQUAL e NOTEQUAL.</span><span class="sxs-lookup"><span data-stu-id="0aac1-155">This operation is the multi-valued variation of EQUAL and NOTEQUAL.</span></span> <span data-ttu-id="0aac1-156">O atributo deve para ser um atributo com valores múltiplos e, se o valor puder ser encontrado em qualquer um dos valores de atributo, a regra está no escopo.</span><span class="sxs-lookup"><span data-stu-id="0aac1-156">The attribute is supposed to be a multi-valued attribute and if the value can be found in any of the attribute values, then the rule is in scope.</span></span> |
| <span data-ttu-id="0aac1-157">ISBITSET, ISNOTBITSET</span><span class="sxs-lookup"><span data-stu-id="0aac1-157">ISBITSET, ISNOTBITSET</span></span> |<span data-ttu-id="0aac1-158">Avalia se um bit específico está definido.</span><span class="sxs-lookup"><span data-stu-id="0aac1-158">Evaluates if a particular bit is set.</span></span> <span data-ttu-id="0aac1-159">Por exemplo, pode ser usado para avaliar os bits em userAccountControl para ver se um usuário está habilitado ou desabilitado.</span><span class="sxs-lookup"><span data-stu-id="0aac1-159">For example, can be used to evaluate the bits in userAccountControl to see if a user is enabled or disabled.</span></span> |
| <span data-ttu-id="0aac1-160">ISMEMBEROF, ISNOTMEMBEROF</span><span class="sxs-lookup"><span data-stu-id="0aac1-160">ISMEMBEROF, ISNOTMEMBEROF</span></span> |<span data-ttu-id="0aac1-161">O valor deve conter um DN para um grupo no espaço do conector.</span><span class="sxs-lookup"><span data-stu-id="0aac1-161">The value should contain a DN to a group in the connector space.</span></span> <span data-ttu-id="0aac1-162">Se o objeto for membro do grupo especificado, a regra está no escopo.</span><span class="sxs-lookup"><span data-stu-id="0aac1-162">If the object is a member of the group specified, the rule is in scope.</span></span> |

## <a name="join"></a><span data-ttu-id="0aac1-163">Ingressar</span><span class="sxs-lookup"><span data-stu-id="0aac1-163">Join</span></span>
<span data-ttu-id="0aac1-164">O módulo de junção no pipeline de sincronização é responsável por localizar a relação entre o objeto de origem e um objeto de destino.</span><span class="sxs-lookup"><span data-stu-id="0aac1-164">The join module in the sync pipeline is responsible for finding the relationship between the object in the source and an object in the target.</span></span> <span data-ttu-id="0aac1-165">Em uma regra de entrada, essa relação seria um objeto em um espaço de conector que localiza uma relação com um objeto no metaverso.</span><span class="sxs-lookup"><span data-stu-id="0aac1-165">On an inbound rule, this relationship would be an object in a connector space finding a relationship to an object in the metaverse.</span></span>  
![Junção entre cs e mv](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/join1.png)  
<span data-ttu-id="0aac1-167">O objetivo é ver se já existe um objeto no metaverso, criado por outro Conector ao qual ele deve ser associado.</span><span class="sxs-lookup"><span data-stu-id="0aac1-167">The goal is to see if there is an object already in the metaverse, created by another Connector, it should be associated with.</span></span> <span data-ttu-id="0aac1-168">Por exemplo, em uma floresta de recursos de conta, o usuário da floresta de contas deve ser unido ao usuário da floresta de recursos.</span><span class="sxs-lookup"><span data-stu-id="0aac1-168">For example, in an account-resource forest the user from the account forest should be joined with the user from the resource forest.</span></span>

<span data-ttu-id="0aac1-169">As junções são usadas principalmente em regras de entrada para unir os objetos de espaço do conector ao mesmo objeto do metaverso.</span><span class="sxs-lookup"><span data-stu-id="0aac1-169">Joins are used mostly on inbound rules to join connector space objects together to the same metaverse object.</span></span>

<span data-ttu-id="0aac1-170">As junções são definidas como um ou mais grupos.</span><span class="sxs-lookup"><span data-stu-id="0aac1-170">The joins are defined as one or more groups.</span></span> <span data-ttu-id="0aac1-171">Dentro de um grupo, há cláusulas.</span><span class="sxs-lookup"><span data-stu-id="0aac1-171">Inside a group, you have clauses.</span></span> <span data-ttu-id="0aac1-172">Um E lógico é usado entre todas as cláusulas em um grupo.</span><span class="sxs-lookup"><span data-stu-id="0aac1-172">A logical AND is used between all clauses in a group.</span></span> <span data-ttu-id="0aac1-173">Um OU lógico é usado entre grupos.</span><span class="sxs-lookup"><span data-stu-id="0aac1-173">A logical OR is used between groups.</span></span> <span data-ttu-id="0aac1-174">Os grupos são processados na ordem de cima para baixo.</span><span class="sxs-lookup"><span data-stu-id="0aac1-174">The groups are processed in order from top to bottom.</span></span> <span data-ttu-id="0aac1-175">Quando um grupo encontra uma correspondência exata com um objeto de destino, nenhuma outra regra de associação é avaliada.</span><span class="sxs-lookup"><span data-stu-id="0aac1-175">When one group has found exactly one match with an object in the target, then no other join rules are evaluated.</span></span> <span data-ttu-id="0aac1-176">Se zero ou mais de um objeto for localizado, o processamento continuará para o próximo grupo de regras.</span><span class="sxs-lookup"><span data-stu-id="0aac1-176">If zero or more than one object is found, processing continues to the next group of rules.</span></span> <span data-ttu-id="0aac1-177">Por esse motivo, as regras devem ser criadas na ordem com a mais explícita primeiro e a mais difusa no fim.</span><span class="sxs-lookup"><span data-stu-id="0aac1-177">For this reason, the rules should be created in the order of most explicit first and more fuzzy at the end.</span></span>  
![Definição de junção](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/join2.png)  
<span data-ttu-id="0aac1-179">As junções nesta figura são processadas de cima para baixo.</span><span class="sxs-lookup"><span data-stu-id="0aac1-179">The joins in this picture are processed from top to bottom.</span></span> <span data-ttu-id="0aac1-180">Primeiro, o pipeline de sincronização vê se há uma correspondência em employeeID.</span><span class="sxs-lookup"><span data-stu-id="0aac1-180">First the sync pipeline sees if there is a match on employeeID.</span></span> <span data-ttu-id="0aac1-181">Caso contrário, a segunda regra vê se o nome da conta pode ser usado para unir os objetos.</span><span class="sxs-lookup"><span data-stu-id="0aac1-181">If not, the second rule sees if the account name can be used to join the objects together.</span></span> <span data-ttu-id="0aac1-182">Se essa não for uma correspondência, a terceira e última regra será uma correspondência mais difusa usando o nome de usuário.</span><span class="sxs-lookup"><span data-stu-id="0aac1-182">If that is not a match either, the third and final rule is a more fuzzy match by using the name of user.</span></span>

<span data-ttu-id="0aac1-183">Se todas as regras de junção forem avaliadas e não houver exatamente uma correspondência, o **Tipo de Link** na página **Descrição** será usado.</span><span class="sxs-lookup"><span data-stu-id="0aac1-183">If all join rules have been evaluated and there is not exactly one match, the **Link Type** on the **Description** page is used.</span></span> <span data-ttu-id="0aac1-184">Se essa opção for definida como **Provisionar**, será criado um novo objeto de destino.</span><span class="sxs-lookup"><span data-stu-id="0aac1-184">If this option is set to **Provision**, then a new object in the target is created.</span></span>  
<span data-ttu-id="0aac1-185">![Provisionar ou ingressar](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/join3.png)</span><span class="sxs-lookup"><span data-stu-id="0aac1-185">![Provision or join](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/join3.png)</span></span>  

<span data-ttu-id="0aac1-186">Um objeto deve ter apenas uma única regra de sincronização com as regras de associação em escopo.</span><span class="sxs-lookup"><span data-stu-id="0aac1-186">An object should only have one single sync rule with join rules in scope.</span></span> <span data-ttu-id="0aac1-187">Se houver várias regras de sincronização em que a associação esteja definida, ocorrerá um erro.</span><span class="sxs-lookup"><span data-stu-id="0aac1-187">If there are multiple sync rules where join is defined, an error occurs.</span></span> <span data-ttu-id="0aac1-188">A precedência não é usada para resolver conflitos de junção.</span><span class="sxs-lookup"><span data-stu-id="0aac1-188">Precedence is not used to resolve join conflicts.</span></span> <span data-ttu-id="0aac1-189">Um objeto deve ter uma regra de junção no escopo para que os atributos fluam com a mesma direção de entrada/saída.</span><span class="sxs-lookup"><span data-stu-id="0aac1-189">An object must have a join rule in scope for attributes to flow with the same inbound/outbound direction.</span></span> <span data-ttu-id="0aac1-190">Se for preciso que os atributos fluam como entrada e saída para o mesmo objeto, você deverá ter uma entrada e uma regra de sincronização de saída com a junção.</span><span class="sxs-lookup"><span data-stu-id="0aac1-190">If you need to flow attributes both inbound and outbound to the same object, you must have both an inbound and an outbound sync rule with join.</span></span>

<span data-ttu-id="0aac1-191">A junção de saída tem um comportamento especial quando tenta fornecer um objeto para um espaço de conector de destino.</span><span class="sxs-lookup"><span data-stu-id="0aac1-191">Outbound join has a special behavior when it tries to provision an object to a target connector space.</span></span> <span data-ttu-id="0aac1-192">O atributo DN é usado para tentar primeiro uma junção inversa.</span><span class="sxs-lookup"><span data-stu-id="0aac1-192">The DN attribute is used to first try a reverse-join.</span></span> <span data-ttu-id="0aac1-193">Se já houver um objeto no espaço do conector de destino com o mesmo DN, os objetos serão unidos.</span><span class="sxs-lookup"><span data-stu-id="0aac1-193">If there is already an object in the target connector space with the same DN, the objects are joined.</span></span>

<span data-ttu-id="0aac1-194">O módulo de junção é avaliado apenas uma vez quando uma nova regra de sincronização está no escopo.</span><span class="sxs-lookup"><span data-stu-id="0aac1-194">The join module is only evaluated once when a new sync rule comes into scope.</span></span> <span data-ttu-id="0aac1-195">Quando um objeto é unido, ele não é desunido mesmo que os critérios de junção não sejam atendidos.</span><span class="sxs-lookup"><span data-stu-id="0aac1-195">When an object has joined, it is not disjoining even if the join criteria is no longer satisfied.</span></span> <span data-ttu-id="0aac1-196">Se você quiser desunir um objeto, a regra de sincronização que uniu os objetos deverá sair do escopo.</span><span class="sxs-lookup"><span data-stu-id="0aac1-196">If you want to disjoin an object, the sync rule that joined the objects must go out of scope.</span></span>

### <a name="metaverse-delete"></a><span data-ttu-id="0aac1-197">Exclusão de metaverso</span><span class="sxs-lookup"><span data-stu-id="0aac1-197">Metaverse delete</span></span>
<span data-ttu-id="0aac1-198">Um objeto do metaverso permanecerá, desde que haja uma regra de sincronização no escopo com **Tipo de Link** definido como **Provisionar** ou **StickyJoin**.</span><span class="sxs-lookup"><span data-stu-id="0aac1-198">A metaverse object remains as long as there is one sync rule in scope with **Link Type** set to **Provision** or **StickyJoin**.</span></span> <span data-ttu-id="0aac1-199">Um StickyJoin é usado quando um conector não tem permissão para provisionar um novo objeto para o metaverso, mas quando é unido, deve ser excluído na origem antes que o objeto do metaverso seja excluído.</span><span class="sxs-lookup"><span data-stu-id="0aac1-199">A StickyJoin is used when a Connector is not allowed to provision a new object to the metaverse, but when it has joined, it must be deleted in the source before the metaverse object is deleted.</span></span>

<span data-ttu-id="0aac1-200">Quando um objeto do metaverso é excluído, todos os objetos associados a uma regra de sincronização de saída marcada para **provisionar** são marcados para uma exclusão.</span><span class="sxs-lookup"><span data-stu-id="0aac1-200">When a metaverse object is deleted, all objects associated with an outbound sync rule marked for **provision** are marked for a delete.</span></span>

## <a name="transformations"></a><span data-ttu-id="0aac1-201">Transformações</span><span class="sxs-lookup"><span data-stu-id="0aac1-201">Transformations</span></span>
<span data-ttu-id="0aac1-202">As transformações são usadas para definir como os atributos devem fluir da origem para o destino.</span><span class="sxs-lookup"><span data-stu-id="0aac1-202">The transformations are used to define how attributes should flow from the source to the target.</span></span> <span data-ttu-id="0aac1-203">Os fluxos podem ter um dos seguintes **tipos de fluxo**: Direto, Constante ou Expressão.</span><span class="sxs-lookup"><span data-stu-id="0aac1-203">The flows can have one of the following **flow types**: Direct, Constant, or Expression.</span></span> <span data-ttu-id="0aac1-204">Um fluxo direto; flui um valor de atributo como está, sem transformações adicionais.</span><span class="sxs-lookup"><span data-stu-id="0aac1-204">A direct flow, flows an attribute value as-is with no additional transformations.</span></span> <span data-ttu-id="0aac1-205">Um valor constante define o valor especificado.</span><span class="sxs-lookup"><span data-stu-id="0aac1-205">A constant value sets the specified value.</span></span> <span data-ttu-id="0aac1-206">Uma expressão usa a linguagem de expressão de provisionamento declarativo para expressar como a transformação deve ser.</span><span class="sxs-lookup"><span data-stu-id="0aac1-206">An expression uses the declarative provisioning expression language to express how the transformation should be.</span></span> <span data-ttu-id="0aac1-207">Os detalhes para a linguagem de expressão podem ser encontrados no tópico [Noções básicas sobre a linguagem de expressão de provisionamento declarativo](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md) .</span><span class="sxs-lookup"><span data-stu-id="0aac1-207">The details for the expression language can be found in the [understanding declarative provisioning expression language](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md) topic.</span></span>

![Provisionar ou ingressar](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/transformations1.png)  

<span data-ttu-id="0aac1-209">A caixa de seleção **Aplicar uma vez** define que o atributo deve ser definido somente quando o objeto é criado inicialmente.</span><span class="sxs-lookup"><span data-stu-id="0aac1-209">The **Apply once** checkbox defines that the attribute should only be set when the object is initially created.</span></span> <span data-ttu-id="0aac1-210">Por exemplo, essa configuração pode ser usada para definir uma senha inicial para um novo objeto de usuário.</span><span class="sxs-lookup"><span data-stu-id="0aac1-210">For example, this configuration can be used to set an initial password for a new user object.</span></span>

### <a name="merging-attribute-values"></a><span data-ttu-id="0aac1-211">Mesclando valores de atributo</span><span class="sxs-lookup"><span data-stu-id="0aac1-211">Merging attribute values</span></span>
<span data-ttu-id="0aac1-212">Nos fluxos de atributo, há uma configuração para determinar se os atributos com vários valores devem ser mesclados de vários conectores diferentes.</span><span class="sxs-lookup"><span data-stu-id="0aac1-212">In the attribute flows there is a setting to determine if multi-valued attributes should be merged from several different Connectors.</span></span> <span data-ttu-id="0aac1-213">O valor padrão é **Update**, que indica que a regra de sincronização com precedência mais alta deve prevalecer.</span><span class="sxs-lookup"><span data-stu-id="0aac1-213">The default value is **Update**, which indicates that the sync rule with highest precedence should win.</span></span>

![Tipos de mesclagem](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/mergetype.png)  

<span data-ttu-id="0aac1-215">Também há **Merge** e **MergeCaseInsensitive**.</span><span class="sxs-lookup"><span data-stu-id="0aac1-215">There is also **Merge** and **MergeCaseInsensitive**.</span></span> <span data-ttu-id="0aac1-216">Essas opções permitem mesclar valores de diferentes origens.</span><span class="sxs-lookup"><span data-stu-id="0aac1-216">These options allow you to merge values from different sources.</span></span> <span data-ttu-id="0aac1-217">Por exemplo, esses valores podem ser usados para mesclar o membro ou o atributo proxyAddresses de várias florestas diferentes.</span><span class="sxs-lookup"><span data-stu-id="0aac1-217">For example, it can be used to merge the member or proxyAddresses attribute from several different forests.</span></span> <span data-ttu-id="0aac1-218">Quando você usa essa opção, todas as regras de sincronização no escopo de um objeto devem usar o mesmo tipo de mesclagem.</span><span class="sxs-lookup"><span data-stu-id="0aac1-218">When you use this option, all sync rules in scope for an object must use the same merge type.</span></span> <span data-ttu-id="0aac1-219">Não é possível definir **Update** de um conector e **Merge** de outro.</span><span class="sxs-lookup"><span data-stu-id="0aac1-219">You cannot define **Update** from one Connector and **Merge** from another.</span></span> <span data-ttu-id="0aac1-220">Se tentar, você receberá um erro.</span><span class="sxs-lookup"><span data-stu-id="0aac1-220">If you try, you receive an error.</span></span>

<span data-ttu-id="0aac1-221">A diferença entre **Merge** e **MergeCaseInsensitive** é como processar valores de atributo duplicados.</span><span class="sxs-lookup"><span data-stu-id="0aac1-221">The difference between **Merge** and **MergeCaseInsensitive** is how to process duplicate attribute values.</span></span> <span data-ttu-id="0aac1-222">O mecanismo de sincronização garante que os valores duplicados não sejam inseridos no atributo de destino.</span><span class="sxs-lookup"><span data-stu-id="0aac1-222">The sync engine makes sure duplicate values are not inserted into the target attribute.</span></span> <span data-ttu-id="0aac1-223">Com **MergeCaseInsensitive**, os valores duplicados com uma diferença apenas no caso não estarão presentes.</span><span class="sxs-lookup"><span data-stu-id="0aac1-223">With **MergeCaseInsensitive**, duplicate values with only a difference in case are not going to be present.</span></span> <span data-ttu-id="0aac1-224">Por exemplo, você não verá “SMTP:bob@contoso.com” e “smtp:bob@contoso.com” no atributo de destino.</span><span class="sxs-lookup"><span data-stu-id="0aac1-224">For example, you should not see both "SMTP:bob@contoso.com" and "smtp:bob@contoso.com" in the target attribute.</span></span> <span data-ttu-id="0aac1-225">**Merge** está examinando apenas os valores exatos e múltiplos valores onde há apenas uma diferença no caso pode estar presente.</span><span class="sxs-lookup"><span data-stu-id="0aac1-225">**Merge** is only looking at the exact values and multiple values where there only is a difference in case might be present.</span></span>

<span data-ttu-id="0aac1-226">A opção **Replace** é igual a **Update**, mas não é usada.</span><span class="sxs-lookup"><span data-stu-id="0aac1-226">The option **Replace** is the same as **Update**, but it is not used.</span></span>

### <a name="control-the-attribute-flow-process"></a><span data-ttu-id="0aac1-227">Controlar o processo de fluxo de atributos</span><span class="sxs-lookup"><span data-stu-id="0aac1-227">Control the attribute flow process</span></span>
<span data-ttu-id="0aac1-228">Quando várias regras de sincronização de entrada são configuradas para contribuir com o mesmo atributo de metaverso, a precedência é usada para determinar o vencedor.</span><span class="sxs-lookup"><span data-stu-id="0aac1-228">When multiple inbound sync rules are configured to contribute to the same metaverse attribute, then precedence is used to determine the winner.</span></span> <span data-ttu-id="0aac1-229">A regra de sincronização com precedência mais alta (valor numérico menor) contribuirá com o valor.</span><span class="sxs-lookup"><span data-stu-id="0aac1-229">The sync rule with highest precedence (lowest numeric value) is going to contribute the value.</span></span> <span data-ttu-id="0aac1-230">O mesmo ocorre com as regras de saída.</span><span class="sxs-lookup"><span data-stu-id="0aac1-230">The same happens for outbound rules.</span></span> <span data-ttu-id="0aac1-231">A regra de sincronização com a precedência mais alta vence e contribui com o valor para o diretório conectado.</span><span class="sxs-lookup"><span data-stu-id="0aac1-231">The sync rule with highest precedence wins and contribute the value to the connected directory.</span></span>

<span data-ttu-id="0aac1-232">Em alguns casos, em vez de contribuir com um valor, a regra de sincronização deve determinar como as outras regras devem comportar-se.</span><span class="sxs-lookup"><span data-stu-id="0aac1-232">In some cases, rather than contribute a value, the sync rule should determine how other rules should behave.</span></span> <span data-ttu-id="0aac1-233">Há alguns literais especiais usados para esse caso.</span><span class="sxs-lookup"><span data-stu-id="0aac1-233">There are some special literals used for this case.</span></span>

<span data-ttu-id="0aac1-234">Para as Regras de Sincronização de entrada, o literal **NULL** pode ser usado para indicar que o fluxo não tem valores para contribuir.</span><span class="sxs-lookup"><span data-stu-id="0aac1-234">For inbound Synchronization Rules, the literal **NULL** can be used to indicate that the flow has no value to contribute.</span></span> <span data-ttu-id="0aac1-235">Outra regra com menor precedência pode contribuir com um valor.</span><span class="sxs-lookup"><span data-stu-id="0aac1-235">Another rule with lower precedence can contribute a value.</span></span> <span data-ttu-id="0aac1-236">Se nenhuma regra contribuiu com um valor, o atributo metaverso é removido.</span><span class="sxs-lookup"><span data-stu-id="0aac1-236">If no rule contributed a value, then the metaverse attribute is removed.</span></span> <span data-ttu-id="0aac1-237">Para uma regra de saída, se **NULL** for o valor final depois do processamento de todas as regras de sincronização, o valor será removido no diretório conectado.</span><span class="sxs-lookup"><span data-stu-id="0aac1-237">For an outbound rule, if **NULL** is the final value after all sync rules have been processed, then the value is removed in the connected directory.</span></span>

<span data-ttu-id="0aac1-238">O literal **AuthoritativeNull** é semelhante a **NULL**, mas com a diferença de que nenhuma regra de precedência mais baixa pode contribuir com um valor.</span><span class="sxs-lookup"><span data-stu-id="0aac1-238">The literal **AuthoritativeNull** is similar to **NULL** but with the difference that no lower precedence rules can contribute a value.</span></span>

<span data-ttu-id="0aac1-239">Um fluxo de atributos também pode usar **IgnoreThisFlow**.</span><span class="sxs-lookup"><span data-stu-id="0aac1-239">An attribute flow can also use **IgnoreThisFlow**.</span></span> <span data-ttu-id="0aac1-240">É semelhante a NULL no sentido de que indica que não há nada para contribuir.</span><span class="sxs-lookup"><span data-stu-id="0aac1-240">It is similar to NULL in the sense that it indicates there is nothing to contribute.</span></span> <span data-ttu-id="0aac1-241">A diferença é que ele não remove um valor já existente no destino.</span><span class="sxs-lookup"><span data-stu-id="0aac1-241">The difference is that it does not remove an already existing value in the target.</span></span> <span data-ttu-id="0aac1-242">É como se o fluxo de atributos nunca tivesse existido lá.</span><span class="sxs-lookup"><span data-stu-id="0aac1-242">It is like the attribute flow has never been there.</span></span>

<span data-ttu-id="0aac1-243">Veja um exemplo:</span><span class="sxs-lookup"><span data-stu-id="0aac1-243">Here is an example:</span></span>

<span data-ttu-id="0aac1-244">Em *saída para AD – usuário Exchange híbrido* fluxo a seguir pode ser encontrado:</span><span class="sxs-lookup"><span data-stu-id="0aac1-244">In *Out to AD - User Exchange hybrid* the following flow can be found:</span></span>  
`IIF([cloudSOAExchMailbox] = True,[cloudMSExchSafeSendersHash],IgnoreThisFlow)`  
<span data-ttu-id="0aac1-245">esta expressão deve ser lida como: se a caixa de correio do usuário estiver localizada no Azure AD, então, flua o atributo do Azure AD para o AD.</span><span class="sxs-lookup"><span data-stu-id="0aac1-245">This expression should be read as: if the user mailbox is located in Azure AD, then flow the attribute from Azure AD to AD.</span></span> <span data-ttu-id="0aac1-246">Caso contrário, não flua nada de volta para o Active Directory.</span><span class="sxs-lookup"><span data-stu-id="0aac1-246">If not, do not flow anything back to Active Directory.</span></span> <span data-ttu-id="0aac1-247">Neste caso, ele manteria o valor existente no AD.</span><span class="sxs-lookup"><span data-stu-id="0aac1-247">In this case, it would keep the existing value in AD.</span></span>

### <a name="importedvalue"></a><span data-ttu-id="0aac1-248">ImportedValue</span><span class="sxs-lookup"><span data-stu-id="0aac1-248">ImportedValue</span></span>
<span data-ttu-id="0aac1-249">A função ImportedValue é diferente de todas as outras funções, pois o nome do atributo deve ser colocado entre aspas, em vez de colchetes: </span><span class="sxs-lookup"><span data-stu-id="0aac1-249">The function ImportedValue is different than all other functions since the attribute name must be enclosed in quotes rather than square brackets:</span></span>  
<span data-ttu-id="0aac1-250">`ImportedValue("proxyAddresses")`.</span><span class="sxs-lookup"><span data-stu-id="0aac1-250">`ImportedValue("proxyAddresses")`.</span></span>

<span data-ttu-id="0aac1-251">Geralmente, durante a sincronização, um atributo usa o valor esperado, mesmo que ele ainda não tenha sido exportado ou que um erro tenha sido recebido durante a exportação ("topo da torre").</span><span class="sxs-lookup"><span data-stu-id="0aac1-251">Usually during synchronization an attribute uses the expected value, even if it hasn’t been exported yet or an error was received during export (“top of the tower”).</span></span> <span data-ttu-id="0aac1-252">Uma sincronização de entrada presumirá que um atributo que ainda não atingiu um diretório conectado finalmente o atingirá.</span><span class="sxs-lookup"><span data-stu-id="0aac1-252">An inbound synchronization assumes that an attribute that hasn’t yet reached a connected directory eventually reaches it.</span></span> <span data-ttu-id="0aac1-253">Em alguns casos, é importante sincronizar apenas um valor que foi confirmado pelo diretório conectado ("holograma e torre de importação delta").</span><span class="sxs-lookup"><span data-stu-id="0aac1-253">In some cases, it is important to only synchronize a value that has been confirmed by the connected directory (“hologram and delta import tower”).</span></span>

<span data-ttu-id="0aac1-254">Um exemplo dessa função pode ser encontrado na Regra de Sincronização pronta para uso *Entrada do AD – Usuário Comum do Exchange*.</span><span class="sxs-lookup"><span data-stu-id="0aac1-254">An example of this function can be found in the out-of-box Synchronization Rule *In from AD – User Common from Exchange*.</span></span> <span data-ttu-id="0aac1-255">No Exchange Híbrido, o valor adicionado pelo Exchange online só deve ser sincronizado quando confirmado que o valor foi exportado com êxito: </span><span class="sxs-lookup"><span data-stu-id="0aac1-255">In Hybrid Exchange, the value added by Exchange online should only be synchronized when it has been confirmed that the value was exported successfully:</span></span>  
`proxyAddresses` <- `RemoveDuplicates(Trim(ImportedValue("proxyAddresses")))`

## <a name="precedence"></a><span data-ttu-id="0aac1-256">Precedência</span><span class="sxs-lookup"><span data-stu-id="0aac1-256">Precedence</span></span>
<span data-ttu-id="0aac1-257">Quando várias regras de sincronização tentam contribuir com o mesmo valor de atributo para o destino, o valor de precedência é usado para determinar o vencedor.</span><span class="sxs-lookup"><span data-stu-id="0aac1-257">When several sync rules try to contribute the same attribute value to the target, the precedence value is used to determine the winner.</span></span> <span data-ttu-id="0aac1-258">A regra com prioridade mais alta e o menor valor numérico vai contribuir com o atributo em um conflito.</span><span class="sxs-lookup"><span data-stu-id="0aac1-258">The rule with highest precedence, lowest numeric value, is going to contribute the attribute in a conflict.</span></span>

![Tipos de mesclagem](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/precedence1.png)  

<span data-ttu-id="0aac1-260">Essa classificação pode ser usada para definir fluxos de atributo mais precisos para um pequeno subconjunto de objetos.</span><span class="sxs-lookup"><span data-stu-id="0aac1-260">This ordering can be used to define more precise attribute flows for a small subset of objects.</span></span> <span data-ttu-id="0aac1-261">Por exemplo, as regras prontas para uso garantem que os atributos de uma conta habilitada (**Useraccountenabled**) tenham precedência sobre outras contas.</span><span class="sxs-lookup"><span data-stu-id="0aac1-261">For example, the out-of-box-rules make sure that attributes from an enabled account (**User AccountEnabled**) have precedence from other accounts.</span></span>

<span data-ttu-id="0aac1-262">A precedência pode ser definida entre Conectores.</span><span class="sxs-lookup"><span data-stu-id="0aac1-262">Precedence can be defined between Connectors.</span></span> <span data-ttu-id="0aac1-263">Isso permite que os Conectores com dados melhores contribuam com valores primeiro.</span><span class="sxs-lookup"><span data-stu-id="0aac1-263">That allows Connectors with better data to contribute values first.</span></span>

### <a name="multiple-objects-from-the-same-connector-space"></a><span data-ttu-id="0aac1-264">Vários objetos do mesmo espaço do conector</span><span class="sxs-lookup"><span data-stu-id="0aac1-264">Multiple objects from the same connector space</span></span>
<span data-ttu-id="0aac1-265">Se você tiver vários objetos no mesmo espaço do conector associados ao mesmo objeto de metaverso, a precedência deverá ser ajustada.</span><span class="sxs-lookup"><span data-stu-id="0aac1-265">If you have several objects in the same connector space joined to the same metaverse object, precedence must be adjusted.</span></span> <span data-ttu-id="0aac1-266">Se vários objetos estiverem no escopo da mesma regra de sincronização, o mecanismo de sincronização não poderá determinar a precedência.</span><span class="sxs-lookup"><span data-stu-id="0aac1-266">If several objects are in scope of the same sync rule, then the sync engine is not able to determine precedence.</span></span> <span data-ttu-id="0aac1-267">É ambíguo qual objeto de origem deve contribuir com o valor para o metaverso.</span><span class="sxs-lookup"><span data-stu-id="0aac1-267">It is ambiguous which source object should contribute the value to the metaverse.</span></span> <span data-ttu-id="0aac1-268">Essa configuração é relatada como ambígua, mesmo se os atributos na origem tiverem o mesmo valor.</span><span class="sxs-lookup"><span data-stu-id="0aac1-268">This configuration is reported as ambiguous even if the attributes in the source have the same value.</span></span>  
![Vários objetos unidos ao mesmo objeto mv](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/multiple1.png)  

<span data-ttu-id="0aac1-270">Para esse cenário, você precisa alterar o escopo das regras de sincronização para que os objetos de origem tenham regras de sincronização diferentes no escopo.</span><span class="sxs-lookup"><span data-stu-id="0aac1-270">For this scenario, you need to change the scope of the sync rules so the source objects have different sync rules in scope.</span></span> <span data-ttu-id="0aac1-271">Isso permite que você defina uma precedência diferente.</span><span class="sxs-lookup"><span data-stu-id="0aac1-271">That allows you to define different precedence.</span></span>  
![Vários objetos unidos ao mesmo objeto mv](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/multiple2.png)  

## <a name="next-steps"></a><span data-ttu-id="0aac1-273">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="0aac1-273">Next steps</span></span>
* <span data-ttu-id="0aac1-274">Leia mais sobre a linguagem de expressão em [Noções básicas sobre expressões de provisionamento declarativo](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md).</span><span class="sxs-lookup"><span data-stu-id="0aac1-274">Read more about the expression language in [Understanding Declarative Provisioning Expressions](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md).</span></span>
* <span data-ttu-id="0aac1-275">Veja como o provisionamento declarativo está pronto para uso em [Noções básicas sobre a configuração padrão](active-directory-aadconnectsync-understanding-default-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="0aac1-275">See how declarative provisioning is used out-of-box in [Understanding the default configuration](active-directory-aadconnectsync-understanding-default-configuration.md).</span></span>
* <span data-ttu-id="0aac1-276">Veja como fazer uma alteração prática usando o provisionamento declarativo em [Como fazer uma alteração na configuração padrão](active-directory-aadconnectsync-change-the-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="0aac1-276">See how to make a practical change using declarative provisioning in [How to make a change to the default configuration](active-directory-aadconnectsync-change-the-configuration.md).</span></span>
* <span data-ttu-id="0aac1-277">Continue a ler sobre como usuários e contatos funcionam juntos em [Noções básicas sobre usuários e contatos](active-directory-aadconnectsync-understanding-users-and-contacts.md).</span><span class="sxs-lookup"><span data-stu-id="0aac1-277">Continue to read how users and contacts work together in [Understanding Users and Contacts](active-directory-aadconnectsync-understanding-users-and-contacts.md).</span></span>

<span data-ttu-id="0aac1-278">**Tópicos de visão geral**</span><span class="sxs-lookup"><span data-stu-id="0aac1-278">**Overview topics**</span></span>

* [<span data-ttu-id="0aac1-279">Sincronização do Azure AD Connect: compreender e personalizar a sincronização</span><span class="sxs-lookup"><span data-stu-id="0aac1-279">Azure AD Connect sync: Understand and customize synchronization</span></span>](active-directory-aadconnectsync-whatis.md)
* [<span data-ttu-id="0aac1-280">Integração de suas identidades locais com o Active Directory do Azure</span><span class="sxs-lookup"><span data-stu-id="0aac1-280">Integrating your on-premises identities with Azure Active Directory</span></span>](active-directory-aadconnect.md)

<span data-ttu-id="0aac1-281">**Tópicos de referência**</span><span class="sxs-lookup"><span data-stu-id="0aac1-281">**Reference topics**</span></span>

* [<span data-ttu-id="0aac1-282">Azure AD Connect Sync: referência de funções</span><span class="sxs-lookup"><span data-stu-id="0aac1-282">Azure AD Connect sync: Functions Reference</span></span>](active-directory-aadconnectsync-functions-reference.md)
