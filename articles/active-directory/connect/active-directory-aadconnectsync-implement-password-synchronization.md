---
title: "a sincronização de senha aaaImplement com a sincronização do Azure AD Connect | Microsoft Docs"
description: "Fornece informações sobre como funciona a sincronização de senha e tooset backup."
services: active-directory
documentationcenter: 
author: MarkusVi
manager: femila
editor: 
ms.assetid: 05f16c3e-9d23-45dc-afca-3d0fa9dbf501
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/17/2017
ms.author: billmath
ms.openlocfilehash: a0401640f2a4d914419ee4446f923bb3a972389d
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="implement-password-synchronization-with-azure-ad-connect-sync"></a><span data-ttu-id="9cb23-103">Implementar a sincronização de senha com o Azure AD Connect</span><span class="sxs-lookup"><span data-stu-id="9cb23-103">Implement password synchronization with Azure AD Connect sync</span></span>
<span data-ttu-id="9cb23-104">Este artigo fornece informações que você precisa toosynchronize as senhas de usuário de uma instância no local do Active Directory instância tooa baseado em nuvem do Azure Active Directory (AD do Azure).</span><span class="sxs-lookup"><span data-stu-id="9cb23-104">This article provides information that you need toosynchronize your user passwords from an on-premises Active Directory instance tooa cloud-based Azure Active Directory (Azure AD) instance.</span></span>

## <a name="what-is-password-synchronization"></a><span data-ttu-id="9cb23-105">O que é sincronização de senha</span><span class="sxs-lookup"><span data-stu-id="9cb23-105">What is password synchronization</span></span>
<span data-ttu-id="9cb23-106">Olá a probabilidade de que você está impedido de realizar o seu trabalho devido tooa esquecido senha relacionado toohello número de senhas diferentes que você precisa tooremember.</span><span class="sxs-lookup"><span data-stu-id="9cb23-106">hello probability that you're blocked from getting your work done due tooa forgotten password is related toohello number of different passwords you need tooremember.</span></span> <span data-ttu-id="9cb23-107">Olá senhas mais precisar tooremember, Olá superior Olá probabilidade tooforget um.</span><span class="sxs-lookup"><span data-stu-id="9cb23-107">hello more passwords you need tooremember, hello higher hello probability tooforget one.</span></span> <span data-ttu-id="9cb23-108">Perguntas e chamadas sobre redefinições de senha e a demanda de outros problemas relacionados à senha Olá a maioria dos recursos de suporte técnico.</span><span class="sxs-lookup"><span data-stu-id="9cb23-108">Questions and calls about password resets and other password-related issues demand hello most helpdesk resources.</span></span>

<span data-ttu-id="9cb23-109">Sincronização de senha é que um recurso usado toosynchronize senhas de usuário de uma instância de tooa baseado em nuvem do Azure AD instância local do Active Directory.</span><span class="sxs-lookup"><span data-stu-id="9cb23-109">Password synchronization is a feature used toosynchronize user passwords from an on-premises Active Directory instance tooa cloud-based Azure AD instance.</span></span>
<span data-ttu-id="9cb23-110">Use esse recurso toosign em tooAzure AD serviços como o Office 365, Microsoft Intune, CRM Online e serviços de domínio de diretório ativo do Azure (Azure AD DS).</span><span class="sxs-lookup"><span data-stu-id="9cb23-110">Use this feature toosign in tooAzure AD services like Office 365, Microsoft Intune, CRM Online, and Azure Active Directory Domain Services (Azure AD DS).</span></span> <span data-ttu-id="9cb23-111">Entrar no serviço toohello usando Olá mesma senha que você use toosign tooyour local instância do Active Directory.</span><span class="sxs-lookup"><span data-stu-id="9cb23-111">You sign in toohello service by using hello same password you use toosign in tooyour on-premises Active Directory instance.</span></span>

![O que é o Azure AD Connect](./media/active-directory-aadconnectsync-implement-password-synchronization/arch1.png)

<span data-ttu-id="9cb23-113">Reduzindo o número de saudação de senhas, os usuários precisam ter toojust toomaintain um.</span><span class="sxs-lookup"><span data-stu-id="9cb23-113">By reducing hello number of passwords, your users need toomaintain toojust one.</span></span> <span data-ttu-id="9cb23-114">A sincronização de senha ajuda você a:</span><span class="sxs-lookup"><span data-stu-id="9cb23-114">Password synchronization helps you to:</span></span>

* <span data-ttu-id="9cb23-115">Melhore a produtividade dos usuários hello.</span><span class="sxs-lookup"><span data-stu-id="9cb23-115">Improve hello productivity of your users.</span></span>
* <span data-ttu-id="9cb23-116">Reduzir os custos de assistência técnica.</span><span class="sxs-lookup"><span data-stu-id="9cb23-116">Reduce your helpdesk costs.</span></span>  

<span data-ttu-id="9cb23-117">Além disso, se você decidir toouse [federação com os serviços de Federação do Active Directory (AD FS)](https://channel9.msdn.com/Series/Azure-Active-Directory-Videos-Demos/Configuring-AD-FS-for-user-sign-in-with-Azure-AD-Connect), você pode definir opcionalmente a sincronização de senha como um backup no caso de falha de infraestrutura do AD FS.</span><span class="sxs-lookup"><span data-stu-id="9cb23-117">Also, if you decide toouse [Federation with Active Directory Federation Services (AD FS)](https://channel9.msdn.com/Series/Azure-Active-Directory-Videos-Demos/Configuring-AD-FS-for-user-sign-in-with-Azure-AD-Connect), you can optionally set up password synchronization as a backup in case your AD FS infrastructure fails.</span></span>

<span data-ttu-id="9cb23-118">Sincronização de senha é um recurso de sincronização de diretório do extensão toohello implementado pela sincronização do Azure AD Connect. toouse a sincronização de senha em seu ambiente, você precisa:</span><span class="sxs-lookup"><span data-stu-id="9cb23-118">Password synchronization is an extension toohello directory synchronization feature implemented by Azure AD Connect sync. toouse password synchronization in your environment, you need to:</span></span>

* <span data-ttu-id="9cb23-119">Instalar o Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="9cb23-119">Install Azure AD Connect.</span></span>  
* <span data-ttu-id="9cb23-120">Configurar a sincronização de diretórios entre sua instância do Active Directory local e a instância do Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="9cb23-120">Configure directory synchronization between your on-premises Active Directory instance and your Azure Active Directory instance.</span></span>
* <span data-ttu-id="9cb23-121">Habilitar a sincronização de senha.</span><span class="sxs-lookup"><span data-stu-id="9cb23-121">Enable password synchronization.</span></span>

<span data-ttu-id="9cb23-122">Para saber mais, confira [Integrar suas identidades locais ao Azure Active Directory](active-directory-aadconnect.md).</span><span class="sxs-lookup"><span data-stu-id="9cb23-122">For more details, see [Integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>

> [!NOTE]
> <span data-ttu-id="9cb23-123">Para obter mais detalhes sobre Azure Active Directory Domain Services, configurados para sincronização de senha e FIPS, veja “Sincronização de senha e FIPS” posteriormente neste artigo.</span><span class="sxs-lookup"><span data-stu-id="9cb23-123">For more details about Azure Active Directory Domain Services configured for FIPS and password synchronization, see "Password synchronization and FIPS" later in this article.</span></span>
>
>

## <a name="how-password-synchronization-works"></a><span data-ttu-id="9cb23-124">Como a sincronização de senha funciona</span><span class="sxs-lookup"><span data-stu-id="9cb23-124">How password synchronization works</span></span>
<span data-ttu-id="9cb23-125">Olá serviço de domínio do Active Directory armazena senhas na forma de saudação de uma representação do valor de hash de senha de usuário real hello.</span><span class="sxs-lookup"><span data-stu-id="9cb23-125">hello Active Directory domain service stores passwords in hello form of a hash value representation of hello actual user password.</span></span> <span data-ttu-id="9cb23-126">Um valor de hash é um resultado de uma função matemática unidirecional (Olá *algoritmo de hash*).</span><span class="sxs-lookup"><span data-stu-id="9cb23-126">A hash value is a result of a one-way mathematical function (hello *hashing algorithm*).</span></span> <span data-ttu-id="9cb23-127">Não há nenhum resultado do método toorevert saudação de uma versão de texto sem formatação toohello função unidirecional de uma senha.</span><span class="sxs-lookup"><span data-stu-id="9cb23-127">There is no method toorevert hello result of a one-way function toohello plain text version of a password.</span></span> <span data-ttu-id="9cb23-128">Você não pode usar um toosign de hash de senha na rede de local de tooyour.</span><span class="sxs-lookup"><span data-stu-id="9cb23-128">You cannot use a password hash toosign in tooyour on-premises network.</span></span>

<span data-ttu-id="9cb23-129">toosynchronize sua senha, a sincronização do Azure AD Connect extrai o hash de senha de Olá instância do Active Directory local.</span><span class="sxs-lookup"><span data-stu-id="9cb23-129">toosynchronize your password, Azure AD Connect sync extracts your password hash from hello on-premises Active Directory instance.</span></span> <span data-ttu-id="9cb23-130">O processamento de segurança adicional é aplicado toohello hash de senha antes que seja sincronizado toohello serviço de autenticação de Active Directory do Azure.</span><span class="sxs-lookup"><span data-stu-id="9cb23-130">Extra security processing is applied toohello password hash before it is synchronized toohello Azure Active Directory authentication service.</span></span> <span data-ttu-id="9cb23-131">As senhas são sincronizadas por usuário e em ordem cronológica.</span><span class="sxs-lookup"><span data-stu-id="9cb23-131">Passwords are synchronized on a per-user basis and in chronological order.</span></span>

<span data-ttu-id="9cb23-132">fluxo de dados real de saudação do processo de sincronização de senha Olá é semelhante sincronização toohello de dados de usuário como DisplayName ou endereços de Email.</span><span class="sxs-lookup"><span data-stu-id="9cb23-132">hello actual data flow of hello password synchronization process is similar toohello synchronization of user data such as DisplayName or Email Addresses.</span></span> <span data-ttu-id="9cb23-133">No entanto, as senhas são sincronizadas mais frequentemente do que a janela de sincronização de diretório padrão Olá para outros atributos.</span><span class="sxs-lookup"><span data-stu-id="9cb23-133">However, passwords are synchronized more frequently than hello standard directory synchronization window for other attributes.</span></span> <span data-ttu-id="9cb23-134">o processo de sincronização de senha Olá é executado a cada 2 minutos.</span><span class="sxs-lookup"><span data-stu-id="9cb23-134">hello password synchronization process runs every 2 minutes.</span></span> <span data-ttu-id="9cb23-135">Não é possível modificar a frequência hello desse processo.</span><span class="sxs-lookup"><span data-stu-id="9cb23-135">You cannot modify hello frequency of this process.</span></span> <span data-ttu-id="9cb23-136">Quando você sincronizar uma senha, substitua a senha de nuvem existente hello.</span><span class="sxs-lookup"><span data-stu-id="9cb23-136">When you synchronize a password, it overwrites hello existing cloud password.</span></span>

<span data-ttu-id="9cb23-137">Olá primeiro que habilitar o recurso de sincronização de senha hello, ele executa uma sincronização inicial das senhas de saudação de todos os usuários em escopo.</span><span class="sxs-lookup"><span data-stu-id="9cb23-137">hello first time you enable hello password synchronization feature, it performs an initial synchronization of hello passwords of all in-scope users.</span></span> <span data-ttu-id="9cb23-138">Você não pode definir explicitamente um subconjunto das senhas dos usuários que você deseja toosynchronize.</span><span class="sxs-lookup"><span data-stu-id="9cb23-138">You cannot explicitly define a subset of user passwords that you want toosynchronize.</span></span>

<span data-ttu-id="9cb23-139">Quando você altera uma senha local, Olá atualizado senha é sincronizada, geralmente em questão de minutos.</span><span class="sxs-lookup"><span data-stu-id="9cb23-139">When you change an on-premises password, hello updated password is synchronized, most often in a matter of minutes.</span></span>
<span data-ttu-id="9cb23-140">o recurso de sincronização de senha Olá automaticamente repete as tentativas de sincronização com falha.</span><span class="sxs-lookup"><span data-stu-id="9cb23-140">hello password synchronization feature automatically retries failed synchronization attempts.</span></span> <span data-ttu-id="9cb23-141">Se ocorrer um erro durante uma tentativa de toosynchronize uma senha, um erro é registrado no seu visualizador de eventos.</span><span class="sxs-lookup"><span data-stu-id="9cb23-141">If an error occurs during an attempt toosynchronize a password, an error is logged in your event viewer.</span></span>

<span data-ttu-id="9cb23-142">sincronização de saudação de uma senha não tem impacto no usuário de saudação que está conectado no momento.</span><span class="sxs-lookup"><span data-stu-id="9cb23-142">hello synchronization of a password has no impact on hello user  who is currently signed in.</span></span>
<span data-ttu-id="9cb23-143">Sua sessão atual do serviço de nuvem imediatamente não é afetado por uma alteração de senha sincronizado que ocorre enquanto você está conectado no serviço de nuvem tooa.</span><span class="sxs-lookup"><span data-stu-id="9cb23-143">Your current cloud service session is not immediately affected by a synchronized password change that occurs while you are signed in tooa cloud service.</span></span> <span data-ttu-id="9cb23-144">No entanto, quando o serviço de nuvem Olá exige que você tooauthenticate novamente, será necessário tooprovide sua nova senha.</span><span class="sxs-lookup"><span data-stu-id="9cb23-144">However, when hello cloud service requires you tooauthenticate again, you need tooprovide your new password.</span></span>

<span data-ttu-id="9cb23-145">Um usuário deve inserir suas credenciais corporativas tooAzure de tooauthenticate tempo um segundo AD, independentemente se ele estão conectados na rede corporativa tootheir.</span><span class="sxs-lookup"><span data-stu-id="9cb23-145">A user must enter their corporate credentials a second time tooauthenticate tooAzure AD, regardless of whether they're signed in tootheir corporate network.</span></span> <span data-ttu-id="9cb23-146">Esses padrão pode ser minimizado, no entanto, se o usuário Olá selecionará Olá Mantenha-me conectado na caixa de seleção (KMSI) na entrada.</span><span class="sxs-lookup"><span data-stu-id="9cb23-146">These pattern can be minimized, however, if hello user selects hello Keep me signed in (KMSI) check box at sign in.</span></span> <span data-ttu-id="9cb23-147">Essa seleção define um cookie de sessão que ignora a autenticação por um curto período.</span><span class="sxs-lookup"><span data-stu-id="9cb23-147">This selection sets a session cookie that bypasses authentication for a short period.</span></span> <span data-ttu-id="9cb23-148">Comportamento KMSI pode ser habilitado ou desabilitado pelo administrador do AD do Azure hello.</span><span class="sxs-lookup"><span data-stu-id="9cb23-148">KMSI behavior can be enabled or disabled by hello Azure AD administrator.</span></span>

> [!NOTE]
> <span data-ttu-id="9cb23-149">Sincronização de senha só tem suporte para o usuário de tipo de objeto Olá no Active Directory.</span><span class="sxs-lookup"><span data-stu-id="9cb23-149">Password sync is only supported for hello object type user in Active Directory.</span></span> <span data-ttu-id="9cb23-150">Não há suporte para o tipo de objeto iNetOrgPerson hello.</span><span class="sxs-lookup"><span data-stu-id="9cb23-150">It is not supported for hello iNetOrgPerson object type.</span></span>

### <a name="detailed-description-of-how-password-synchronization-works"></a><span data-ttu-id="9cb23-151">Descrição detalhada de como funciona a sincronização de senha</span><span class="sxs-lookup"><span data-stu-id="9cb23-151">Detailed description of how password synchronization works</span></span>
<span data-ttu-id="9cb23-152">a seguir Olá descreve detalhadamente como funciona a sincronização de senha entre o Active Directory e o AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="9cb23-152">hello following describes in-depth how password synchronization works between Active Directory and Azure AD.</span></span>

![Fluxo da senha detalhado](./media/active-directory-aadconnectsync-implement-password-synchronization/arch3.png)


1. <span data-ttu-id="9cb23-154">A cada dois minutos, agente de sincronização de senha Olá no servidor de conectar Olá AD solicitações hashes de senha armazenada (atributo unicodePwd de saudação) de um controlador de domínio por meio de saudação padrão [MS-DRSR](https://msdn.microsoft.com/library/cc228086.aspx) protocolo de replicação usado toosynchronize dados entre os controladores de domínio.</span><span class="sxs-lookup"><span data-stu-id="9cb23-154">Every two minutes, hello password synchronization agent on hello AD Connect server requests stored password hashes (hello unicodePwd attribute) from a DC via hello standard [MS-DRSR](https://msdn.microsoft.com/library/cc228086.aspx) replication protocol used toosynchronize data between DCs.</span></span> <span data-ttu-id="9cb23-155">conta de serviço Olá deve ter replicar alterações de diretório e permissões (por padrão na instalação) replicar Directory todas as alterações de AD Olá tooobtain hashes de senha.</span><span class="sxs-lookup"><span data-stu-id="9cb23-155">hello service account must have Replicate Directory Changes and Replicate Directory Changes All AD permissions (granted by default on installation) tooobtain hello password hashes.</span></span>
2. <span data-ttu-id="9cb23-156">Antes de enviar, Olá DC criptografa o hash de senha Olá MD4 usando uma chave que é um [MD5](http://www.rfc-editor.org/rfc/rfc1321.txt) hash da chave de sessão Olá RPC e um valor falso.</span><span class="sxs-lookup"><span data-stu-id="9cb23-156">Before sending, hello DC encrypts hello MD4 password hash by using a key that is a [MD5](http://www.rfc-editor.org/rfc/rfc1321.txt) hash of hello RPC session key and a salt.</span></span> <span data-ttu-id="9cb23-157">Em seguida, envia o agente de sincronização de senha do hello resultado toohello via RPC.</span><span class="sxs-lookup"><span data-stu-id="9cb23-157">It then sends hello result toohello password synchronization agent over RPC.</span></span> <span data-ttu-id="9cb23-158">Olá DC também passa agente de sincronização de toohello salt hello usando o protocolo de replicação de saudação DC, para que agente Olá seja capaz de toodecrypt envelope de saudação.</span><span class="sxs-lookup"><span data-stu-id="9cb23-158">hello DC also passes hello salt toohello synchronization agent by using hello DC replication protocol, so hello agent will be able toodecrypt hello envelope.</span></span>
3.  <span data-ttu-id="9cb23-159">Depois que o agente de sincronização de senha Olá tem envelope criptografado Olá, ele usa [MD5CryptoServiceProvider](https://msdn.microsoft.com/library/System.Security.Cryptography.MD5CryptoServiceProvider.aspx) e Olá salt toogenerate um toodecrypt chave Olá recebida dados tooits back original MD4 formato.</span><span class="sxs-lookup"><span data-stu-id="9cb23-159">After hello password synchronization agent has hello encrypted envelope, it uses [MD5CryptoServiceProvider](https://msdn.microsoft.com/library/System.Security.Cryptography.MD5CryptoServiceProvider.aspx) and hello salt toogenerate a key toodecrypt hello received data back tooits original MD4 format.</span></span> <span data-ttu-id="9cb23-160">Em nenhum momento agente de sincronização de senha Olá ter senha de texto não criptografado de toohello de acesso.</span><span class="sxs-lookup"><span data-stu-id="9cb23-160">At no point does hello password synchronization agent have access toohello clear text password.</span></span> <span data-ttu-id="9cb23-161">Olá uso do agente de sincronização de senha de MD5 é estritamente para compatibilidade de protocolo de replicação com hello controlador de domínio e é usado somente no local entre hello DC e o agente de sincronização de senha hello.</span><span class="sxs-lookup"><span data-stu-id="9cb23-161">hello password synchronization agent’s use of MD5 is strictly for replication protocol compatibility with hello DC, and it is only used on premises between hello DC and hello password synchronization agent.</span></span>
4.  <span data-ttu-id="9cb23-162">Agente de sincronização de senha Olá expande bytes de too64 de hash de senha de binários de 16 bytes hello, primeiro converter Olá hash tooa 32 bytes cadeia de caracteres hexadecimal, e em seguida, converter essa cadeia de caracteres de volta para o binário com codificação UTF-16.</span><span class="sxs-lookup"><span data-stu-id="9cb23-162">hello password synchronization agent expands hello 16-byte binary password hash too64 bytes by first converting hello hash tooa 32-byte hexadecimal string, then converting this string back into binary with UTF-16 encoding.</span></span>
5.  <span data-ttu-id="9cb23-163">Agente de sincronização de senha Olá adiciona um salt consiste em um salt 10 bytes, toohello 64 bytes binários toofurther proteger hash original hello.</span><span class="sxs-lookup"><span data-stu-id="9cb23-163">hello password synchronization agent adds a salt, consisting of a 10-byte length salt, toohello 64-byte binary toofurther protect hello original hash.</span></span>
6.  <span data-ttu-id="9cb23-164">Agente de sincronização de senha Hello, em seguida, combina hash Olá MD4 mais salt e insere-o em Olá [PBKDF2](https://www.ietf.org/rfc/rfc2898.txt) função.</span><span class="sxs-lookup"><span data-stu-id="9cb23-164">hello password synchronization agent then combines hello MD4 hash plus salt, and inputs it into hello [PBKDF2](https://www.ietf.org/rfc/rfc2898.txt) function.</span></span> <span data-ttu-id="9cb23-165">1000 iterações de saudação [HMAC-SHA256](https://msdn.microsoft.com/library/system.security.cryptography.hmacsha256.aspx) algoritmo de hash com chave é usado.</span><span class="sxs-lookup"><span data-stu-id="9cb23-165">1000 iterations of hello [HMAC-SHA256](https://msdn.microsoft.com/library/system.security.cryptography.hmacsha256.aspx) keyed hashing algorithm is used.</span></span> 
7.  <span data-ttu-id="9cb23-166">Agente de sincronização de senha Olá leva o hash de 32 bytes resultante hello, concatena dois salt Olá Olá inúmeros SHA256 iterações tooit (para uso pelo AD do Azure) e transmite a cadeia de caracteres de saudação do Azure AD Connect tooAzure AD sobre SSL.</span><span class="sxs-lookup"><span data-stu-id="9cb23-166">hello password synchronization agent takes hello resulting 32-byte hash, concatenates both hello salt and hello number of SHA256 iterations tooit (for use by Azure AD), then transmits hello string from Azure AD Connect tooAzure AD over SSL.</span></span></br> 
8.  <span data-ttu-id="9cb23-167">Quando um usuário tenta toosign em tooAzure AD e insere sua senha, a senha de saudação é executado por meio de saudação MD4 mesmo + salt + PBKDF2 + HMAC-SHA256 processo.</span><span class="sxs-lookup"><span data-stu-id="9cb23-167">When a user attempts toosign in tooAzure AD and enters their password, hello password is run through hello same MD4+salt+PBKDF2+HMAC-SHA256 process.</span></span> <span data-ttu-id="9cb23-168">Se hash resultante Olá corresponder hash Olá armazenado no AD do Azure, o usuário de saudação inseriu a senha correta hello e é autenticado.</span><span class="sxs-lookup"><span data-stu-id="9cb23-168">If hello resulting hash matches hello hash stored in Azure AD, hello user has entered hello correct password and is authenticated.</span></span> 

>[!Note] 
><span data-ttu-id="9cb23-169">hash MD4 original de saudação não é transmitida tooAzure AD.</span><span class="sxs-lookup"><span data-stu-id="9cb23-169">hello original MD4 hash is not transmitted tooAzure AD.</span></span> <span data-ttu-id="9cb23-170">Em vez disso, Olá hash SHA256 do hash MD4 original de saudação é transmitido.</span><span class="sxs-lookup"><span data-stu-id="9cb23-170">Instead, hello SHA256 hash of hello original MD4 hash is transmitted.</span></span> <span data-ttu-id="9cb23-171">Como resultado, se o hash de saudação armazenado no AD do Azure é obtido, ele não pode ser usado em um ataque de passagem de hash local.</span><span class="sxs-lookup"><span data-stu-id="9cb23-171">As a result, if hello hash stored in Azure AD is obtained, it cannot be used in an on-premises pass-the-hash attack.</span></span>

### <a name="how-password-synchronization-works-with-azure-active-directory-domain-services"></a><span data-ttu-id="9cb23-172">Como funciona a sincronização de senhas com o Azure Active Directory Domain Services</span><span class="sxs-lookup"><span data-stu-id="9cb23-172">How password synchronization works with Azure Active Directory Domain Services</span></span>
<span data-ttu-id="9cb23-173">Você também pode usar toosynchronize de recurso de sincronização de senha Olá suas senhas locais muito[do Azure Active Directory Domain Services](../../active-directory-domain-services/active-directory-ds-overview.md).</span><span class="sxs-lookup"><span data-stu-id="9cb23-173">You can also use hello password synchronization feature toosynchronize your on-premises passwords too[Azure Active Directory Domain Services](../../active-directory-domain-services/active-directory-ds-overview.md).</span></span> <span data-ttu-id="9cb23-174">Nesse cenário, instância do Azure Active Directory Domain Services Olá autentica os usuários na nuvem Olá com todos os métodos de saudação disponíveis na sua instância do Active Directory local.</span><span class="sxs-lookup"><span data-stu-id="9cb23-174">In this scenario, hello Azure Active Directory Domain Services instance authenticates your users in hello cloud with all hello methods available in your on-premises Active Directory instance.</span></span> <span data-ttu-id="9cb23-175">experiência de Olá deste cenário é semelhante toousing Olá ferramenta de migração do Active Directory (ADMT) em um ambiente local.</span><span class="sxs-lookup"><span data-stu-id="9cb23-175">hello experience of this scenario is similar toousing hello Active Directory Migration Tool (ADMT) in an on-premises environment.</span></span>

### <a name="security-considerations"></a><span data-ttu-id="9cb23-176">Considerações de segurança</span><span class="sxs-lookup"><span data-stu-id="9cb23-176">Security considerations</span></span>
<span data-ttu-id="9cb23-177">Durante a sincronização de senhas, versão de texto sem formatação Olá da sua senha não é exposto toohello recurso de sincronização de senha, tooAzure AD ou qualquer um dos serviços de saudação associado.</span><span class="sxs-lookup"><span data-stu-id="9cb23-177">When synchronizing passwords, hello plain-text version of your password is not exposed toohello password synchronization feature, tooAzure AD, or any of hello associated services.</span></span>

<span data-ttu-id="9cb23-178">Autenticação de usuário ocorre no AD do Azure, em vez de em relação a instância do hello da organização do Active Directory.</span><span class="sxs-lookup"><span data-stu-id="9cb23-178">User authentication takes place against Azure AD rather than against hello organization's own Active Directory instance.</span></span> <span data-ttu-id="9cb23-179">Se sua organização tiver preocupações sobre dados de senha de qualquer forma deixando Olá local, considere fatos Olá que Olá SHA256 dados de senha armazenados no AD do Azure – um hash de hash MD4 da original hello – é significativamente mais segura do que o que é armazenado no Active Directory.</span><span class="sxs-lookup"><span data-stu-id="9cb23-179">If your organization has concerns about password data in any form leaving hello premises, consider hello fact that hello SHA256 password data stored in Azure AD--a hash of hello original MD4 hash--is significantly more secure than what is stored in Active Directory.</span></span> <span data-ttu-id="9cb23-180">Além disso, porque esse hash SHA256 não puder ser descriptografada, ele não pode ser trazido de volta ambiente do Active Directory da organização toohello e apresentado como uma senha de usuário válido em um ataque de passagem de hash.</span><span class="sxs-lookup"><span data-stu-id="9cb23-180">Further, because this SHA256 hash cannot be decrypted, it cannot be brought back toohello organization's Active Directory environment and presented as a valid user password in a pass-the-hash attack.</span></span>





### <a name="password-policy-considerations"></a><span data-ttu-id="9cb23-181">Considerações sobre política de senha</span><span class="sxs-lookup"><span data-stu-id="9cb23-181">Password policy considerations</span></span>
<span data-ttu-id="9cb23-182">Há dois tipos de políticas de senha que são afetadas ao habilitar a sincronização de senha:</span><span class="sxs-lookup"><span data-stu-id="9cb23-182">There are two types of password policies that are affected by enabling password synchronization:</span></span>

* <span data-ttu-id="9cb23-183">Política de complexidade de senha</span><span class="sxs-lookup"><span data-stu-id="9cb23-183">Password complexity policy</span></span>
* <span data-ttu-id="9cb23-184">Política de expiração de senha</span><span class="sxs-lookup"><span data-stu-id="9cb23-184">Password expiration policy</span></span>

#### <a name="password-complexity-policy"></a><span data-ttu-id="9cb23-185">Política de complexidade de senha</span><span class="sxs-lookup"><span data-stu-id="9cb23-185">Password complexity policy</span></span>  
<span data-ttu-id="9cb23-186">Quando a sincronização de senha está habilitada, políticas de complexidade de senha Olá na sua instância do Active Directory local substituem as políticas de complexidade na nuvem Olá para os usuários sincronizados.</span><span class="sxs-lookup"><span data-stu-id="9cb23-186">When password synchronization is enabled, hello password complexity policies in your on-premises Active Directory instance override complexity policies in hello cloud for synchronized users.</span></span> <span data-ttu-id="9cb23-187">Você pode usar todas as senhas de saudação válido do seu tooaccess de instância local do Active Directory do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="9cb23-187">You can use all of hello valid passwords from your on-premises Active Directory instance tooaccess Azure AD services.</span></span>

> [!NOTE]
> <span data-ttu-id="9cb23-188">Senhas de usuários que são criados diretamente na nuvem Olá ainda são políticas de toopassword de assunto conforme definido na nuvem hello.</span><span class="sxs-lookup"><span data-stu-id="9cb23-188">Passwords for users that are created directly in hello cloud are still subject toopassword policies as defined in hello cloud.</span></span>

#### <a name="password-expiration-policy"></a><span data-ttu-id="9cb23-189">Política de expiração de senha</span><span class="sxs-lookup"><span data-stu-id="9cb23-189">Password expiration policy</span></span>  
<span data-ttu-id="9cb23-190">Se um usuário estiver no escopo de saudação da sincronização de senha, a senha da conta de nuvem Olá é definida muito*nunca expirar*.</span><span class="sxs-lookup"><span data-stu-id="9cb23-190">If a user is in hello scope of password synchronization, hello cloud account password is set too*Never Expire*.</span></span>

<span data-ttu-id="9cb23-191">Você pode continuar toosign tooyour em serviços em nuvem usando uma senha sincronizada que expirou em seu ambiente local.</span><span class="sxs-lookup"><span data-stu-id="9cb23-191">You can continue toosign in tooyour cloud services by using a synchronized password that is expired in your on-premises environment.</span></span> <span data-ttu-id="9cb23-192">Sua senha de nuvem é atualizada Olá da próxima vez que você alterar a senha Olá no ambiente de local de saudação.</span><span class="sxs-lookup"><span data-stu-id="9cb23-192">Your cloud password is updated hello next time you change hello password in hello on-premises environment.</span></span>

#### <a name="account-expiration"></a><span data-ttu-id="9cb23-193">Expiração da conta</span><span class="sxs-lookup"><span data-stu-id="9cb23-193">Account expiration</span></span>
<span data-ttu-id="9cb23-194">Se sua organização usa o atributo de accountExpires hello como parte do gerenciamento de contas de usuário, lembre-se de que esse atributo não é sincronizado tooAzure AD.</span><span class="sxs-lookup"><span data-stu-id="9cb23-194">If your organization uses hello accountExpires attribute as part of user account management, be aware that this attribute is not synchronized tooAzure AD.</span></span> <span data-ttu-id="9cb23-195">Como resultado, uma conta expirada do Active Directory em um ambiente configurado para sincronização de senha ainda estará ativa no Azure AD.</span><span class="sxs-lookup"><span data-stu-id="9cb23-195">As a result, an expired Active Directory account in an environment configured for password synchronization will still be active in Azure AD.</span></span> <span data-ttu-id="9cb23-196">É recomendável que, se a conta de saudação expirou, uma ação de fluxo de trabalho deve disparar um script do PowerShell que desabilita a conta do AD do Azure do usuário hello.</span><span class="sxs-lookup"><span data-stu-id="9cb23-196">We recommend that if hello account is expired, a workflow action should trigger a PowerShell script that disables hello user's Azure AD account.</span></span> <span data-ttu-id="9cb23-197">Por outro lado, quando a conta Olá estiver ativada, instância do AD do Azure Olá deve ser ativada.</span><span class="sxs-lookup"><span data-stu-id="9cb23-197">Conversely, when hello account is turned on, hello Azure AD instance should be turned on.</span></span>

### <a name="overwrite-synchronized-passwords"></a><span data-ttu-id="9cb23-198">Substituir senhas sincronizadas</span><span class="sxs-lookup"><span data-stu-id="9cb23-198">Overwrite synchronized passwords</span></span>
<span data-ttu-id="9cb23-199">Um administrador pode redefinir sua senha manualmente usando o Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="9cb23-199">An administrator can manually reset your password by using Windows PowerShell.</span></span>

<span data-ttu-id="9cb23-200">Nesse caso, nova senha de saudação substitui sua senha sincronizada e todas as políticas de senha definidas na nuvem Olá são aplicadas toohello nova senha.</span><span class="sxs-lookup"><span data-stu-id="9cb23-200">In this case, hello new password overrides your synchronized password, and all password policies defined in hello cloud are applied toohello new password.</span></span>

<span data-ttu-id="9cb23-201">Se você alterar sua senha local novamente, Olá nova senha é sincronizada toohello nuvem, e ela substitui a senha Olá atualizado manualmente.</span><span class="sxs-lookup"><span data-stu-id="9cb23-201">If you change your on-premises password again, hello new password is synchronized toohello cloud, and it overrides hello manually updated password.</span></span>

<span data-ttu-id="9cb23-202">sincronização de saudação de uma senha não tem impacto sobre Olá usuário do Azure que está conectado.</span><span class="sxs-lookup"><span data-stu-id="9cb23-202">hello synchronization of a password has no impact on hello Azure user who is signed in.</span></span> <span data-ttu-id="9cb23-203">Sua sessão atual do serviço de nuvem imediatamente não é afetado por uma alteração de senha sincronizado que ocorre enquanto você está conectado no serviço de nuvem tooa.</span><span class="sxs-lookup"><span data-stu-id="9cb23-203">Your current cloud service session is not immediately affected by a synchronized password change that occurs while you're signed in tooa cloud service.</span></span> <span data-ttu-id="9cb23-204">KMSI estende duração Olá dessa diferença.</span><span class="sxs-lookup"><span data-stu-id="9cb23-204">KMSI extends hello duration of this difference.</span></span> <span data-ttu-id="9cb23-205">Quando o serviço de nuvem Olá exige que você tooauthenticate novamente, será necessário tooprovide sua nova senha.</span><span class="sxs-lookup"><span data-stu-id="9cb23-205">When hello cloud service requires you tooauthenticate again, you need tooprovide your new password.</span></span>

### <a name="additional-advantages"></a><span data-ttu-id="9cb23-206">Vantagens adicionais</span><span class="sxs-lookup"><span data-stu-id="9cb23-206">Additional advantages</span></span>

- <span data-ttu-id="9cb23-207">Em geral, a sincronização de senha é mais simples tooimplement que um serviço de Federação.</span><span class="sxs-lookup"><span data-stu-id="9cb23-207">Generally, password synchronization is simpler tooimplement than a federation service.</span></span> <span data-ttu-id="9cb23-208">Ele não requer quaisquer servidores adicionais e elimina a dependência de um tooauthenticate usuários do serviço de Federação altamente disponível.</span><span class="sxs-lookup"><span data-stu-id="9cb23-208">It doesn't require any additional servers, and eliminates dependence on a highly available federation service tooauthenticate users.</span></span> 
- <span data-ttu-id="9cb23-209">Sincronização de senha também pode ser habilitada no toofederation de adição.</span><span class="sxs-lookup"><span data-stu-id="9cb23-209">Password synchronization can also be enabled in addition toofederation.</span></span> <span data-ttu-id="9cb23-210">Ela pode ser usada como um fallback se seu serviço de federação sofrer uma interrupção.</span><span class="sxs-lookup"><span data-stu-id="9cb23-210">It may be used as a fallback if your federation service experiences an outage.</span></span>












## <a name="enable-password-synchronization"></a><span data-ttu-id="9cb23-211">Habilitar a sincronização de senha</span><span class="sxs-lookup"><span data-stu-id="9cb23-211">Enable password synchronization</span></span>
<span data-ttu-id="9cb23-212">Quando você instala o Azure AD Connect usando Olá **configurações expressas** opção, a sincronização de senha é habilitada automaticamente.</span><span class="sxs-lookup"><span data-stu-id="9cb23-212">When you install Azure AD Connect by using hello **Express Settings** option, password synchronization is automatically enabled.</span></span> <span data-ttu-id="9cb23-213">Para obter mais detalhes, confira [Introdução ao Azure AD Connect usando configurações expressas](active-directory-aadconnect-get-started-express.md).</span><span class="sxs-lookup"><span data-stu-id="9cb23-213">For more details, see [Getting started with Azure AD Connect using express settings](active-directory-aadconnect-get-started-express.md).</span></span>

<span data-ttu-id="9cb23-214">Se você usar configurações personalizadas ao instalar o Azure AD Connect, sincronização de senha está disponível na página de entrada do usuário de saudação.</span><span class="sxs-lookup"><span data-stu-id="9cb23-214">If you use custom settings when you install Azure AD Connect, password synchronization is available on hello user sign-in page.</span></span> <span data-ttu-id="9cb23-215">Para obter mais detalhes, confira [Instalação personalizada do Azure AD Connect](active-directory-aadconnect-get-started-custom.md).</span><span class="sxs-lookup"><span data-stu-id="9cb23-215">For more details, see [Custom installation of Azure AD Connect](active-directory-aadconnect-get-started-custom.md).</span></span>

![Habilitando a sincronização de senha](./media/active-directory-aadconnectsync-implement-password-synchronization/usersignin.png)

### <a name="password-synchronization-and-fips"></a><span data-ttu-id="9cb23-217">Sincronização de senha e FIPS</span><span class="sxs-lookup"><span data-stu-id="9cb23-217">Password synchronization and FIPS</span></span>
<span data-ttu-id="9cb23-218">Se seu servidor foi bloqueado de acordo com o tooFederal Information Processing Standard (FIPS), em seguida, MD5 será desabilitada.</span><span class="sxs-lookup"><span data-stu-id="9cb23-218">If your server has been locked down according tooFederal Information Processing Standard (FIPS), then MD5 is disabled.</span></span>

<span data-ttu-id="9cb23-219">**tooenable MD5 para a sincronização de senha, execute Olá etapas a seguir:**</span><span class="sxs-lookup"><span data-stu-id="9cb23-219">**tooenable MD5 for password synchronization, perform hello following steps:**</span></span>

1. <span data-ttu-id="9cb23-220">Vá too%programfiles%\Azure AD Sync\Bin.</span><span class="sxs-lookup"><span data-stu-id="9cb23-220">Go too%programfiles%\Azure AD Sync\Bin.</span></span>
2. <span data-ttu-id="9cb23-221">Abra miiserver.exe.config.</span><span class="sxs-lookup"><span data-stu-id="9cb23-221">Open miiserver.exe.config.</span></span>
3. <span data-ttu-id="9cb23-222">Vá para toohello configuração/runtime nó final de saudação do arquivo hello.</span><span class="sxs-lookup"><span data-stu-id="9cb23-222">Go toohello configuration/runtime node at hello end of hello file.</span></span>
4. <span data-ttu-id="9cb23-223">Adicione Olá seguinte nó:`<enforceFIPSPolicy enabled="false"/>`</span><span class="sxs-lookup"><span data-stu-id="9cb23-223">Add hello following node: `<enforceFIPSPolicy enabled="false"/>`</span></span>
5. <span data-ttu-id="9cb23-224">Salve suas alterações.</span><span class="sxs-lookup"><span data-stu-id="9cb23-224">Save your changes.</span></span>

<span data-ttu-id="9cb23-225">Para referência, essa captura mostra como deve ser a aparência:</span><span class="sxs-lookup"><span data-stu-id="9cb23-225">For reference, this snippet is what it should look like:</span></span>

```
    <configuration>
        <runtime>
            <enforceFIPSPolicy enabled="false"/>
        </runtime>
    </configuration>
```

<span data-ttu-id="9cb23-226">Para saber mais sobre segurança e FIPS, veja [Sincronização de senha do AAD, criptografia e conformidade FIPS](https://blogs.technet.microsoft.com/enterprisemobility/2014/06/28/aad-password-sync-encryption-and-fips-compliance/).</span><span class="sxs-lookup"><span data-stu-id="9cb23-226">For information about security and FIPS, see [AAD Password Sync, encryption and FIPS compliance](https://blogs.technet.microsoft.com/enterprisemobility/2014/06/28/aad-password-sync-encryption-and-fips-compliance/).</span></span>

## <a name="troubleshoot-password-synchronization"></a><span data-ttu-id="9cb23-227">Solucionar problemas de sincronização de senha</span><span class="sxs-lookup"><span data-stu-id="9cb23-227">Troubleshoot password synchronization</span></span>
<span data-ttu-id="9cb23-228">Caso tenha problemas com a sincronização de senha, veja [Solucionar problemas de sincronização de senha](active-directory-aadconnectsync-troubleshoot-password-synchronization.md).</span><span class="sxs-lookup"><span data-stu-id="9cb23-228">If you have problems with password synchronization, see [Troubleshoot password synchronization](active-directory-aadconnectsync-troubleshoot-password-synchronization.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="9cb23-229">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="9cb23-229">Next steps</span></span>
* [<span data-ttu-id="9cb23-230">Sincronização do Azure AD Connect: personalizando opções de sincronização</span><span class="sxs-lookup"><span data-stu-id="9cb23-230">Azure AD Connect sync: Customizing synchronization options</span></span>](active-directory-aadconnectsync-whatis.md)
* [<span data-ttu-id="9cb23-231">Integração de suas identidades locais com o Active Directory do Azure</span><span class="sxs-lookup"><span data-stu-id="9cb23-231">Integrating your on-premises identities with Azure Active Directory</span></span>](active-directory-aadconnect.md)
