---
title: "O que é diferente no ponto de extremidade v2.0 do Azure AD? | Microsoft Docs"
description: "Uma comparação entre o Azure AD original e os pontos de extremidade v2.0."
services: active-directory
documentationcenter: 
author: dstrockis
manager: mbaldwin
editor: 
ms.assetid: 5060da46-b091-4e25-9fa8-af4ae4359b6c
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/01/2017
ms.author: dastrock
ms.custom: aaddev
ms.openlocfilehash: 81de65b0e825dec64383f52b02c5ee56c9434807
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/11/2017
---
# <a name="whats-different-about-the-v20-endpoint"></a><span data-ttu-id="32f40-104">O que há de diferente no ponto de extremidade v2.0?</span><span class="sxs-lookup"><span data-stu-id="32f40-104">What's different about the v2.0 endpoint?</span></span>
<span data-ttu-id="32f40-105">Se você estiver familiarizado com o Azure Active Directory ou se tiver integrado aplicativos com o Azure AD anteriormente, poderá encontrar algumas diferenças inesperadas ponto de extremidade v2.0.</span><span class="sxs-lookup"><span data-stu-id="32f40-105">If you're familiar with Azure Active Directory or have integrated apps with Azure AD in the past, there may be some differences in the v2.0 endpoint that you would not expect.</span></span>  <span data-ttu-id="32f40-106">Este documento chama a atenção para essas diferenças para sua compreensão.</span><span class="sxs-lookup"><span data-stu-id="32f40-106">This document calls out those differences for your understanding.</span></span>

> [!NOTE]
> <span data-ttu-id="32f40-107">Nem todos os recursos e cenários do Azure Active Directory têm suporte no ponto de extremidade v2.0.</span><span class="sxs-lookup"><span data-stu-id="32f40-107">Not all Azure Active Directory scenarios & features are supported by the v2.0 endpoint.</span></span>  <span data-ttu-id="32f40-108">Para determinar se você deve usar o ponto de extremidade v2.0, leia sobre as [limitações da v2.0](active-directory-v2-limitations.md).</span><span class="sxs-lookup"><span data-stu-id="32f40-108">To determine if you should use the v2.0 endpoint, read about [v2.0 limitations](active-directory-v2-limitations.md).</span></span>
>

## <a name="microsoft-accounts-and-azure-ad-accounts"></a><span data-ttu-id="32f40-109">Contas da Microsoft e contas do Azure AD</span><span class="sxs-lookup"><span data-stu-id="32f40-109">Microsoft accounts and Azure AD accounts</span></span>
<span data-ttu-id="32f40-110">O ponto de extremidade v2.0 permite aos desenvolvedores criar aplicativos que aceitam entrada de Contas da Microsoft e de Contas do Azure AD usando um único ponto de extremidade.</span><span class="sxs-lookup"><span data-stu-id="32f40-110">The v2.0 endpoint allow developers to write apps that accept sign-in from both Microsoft Accounts and Azure AD accounts, using a single auth endpoint.</span></span>  <span data-ttu-id="32f40-111">Isso oferece a você a capacidade de escrever seu aplicativo completamente independente de conta; ele não precisa saber o tipo de conta com a qual o usuário entra.</span><span class="sxs-lookup"><span data-stu-id="32f40-111">This gives you the ability to write your app completely account-agnostic; it can be ignorant of the type of account that the user signs in with.</span></span>  <span data-ttu-id="32f40-112">Obviamente, é *possível* deixar seu aplicativo com reconhecimento do tipo de conta que está sendo usada em uma sessão específica, mas isso não é necessário.</span><span class="sxs-lookup"><span data-stu-id="32f40-112">Of course, you *can* make your app aware of the type of account being used in a particular session, but you don't have to.</span></span>

<span data-ttu-id="32f40-113">Por exemplo, se seu aplicativo chamar o [Microsoft Graph](https://graph.microsoft.io), alguns dados e funcionalidades adicionais estarão disponíveis para usuários corporativos, como os sites do SharePoint ou dados do Diretório.</span><span class="sxs-lookup"><span data-stu-id="32f40-113">For instance, if your app calls the [Microsoft Graph](https://graph.microsoft.io), some additional functionality and data will be available to enterprise users, such as their SharePoint sites or Directory data.</span></span>  <span data-ttu-id="32f40-114">Porém, para várias ações, como [Ler o email de um usuário](https://graph.microsoft.io/docs/api-reference/v1.0/resources/message), o código pode ser escrito exatamente da mesma forma para as Contas da Microsoft e do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="32f40-114">But for many actions, such as [Reading a user's mail](https://graph.microsoft.io/docs/api-reference/v1.0/resources/message), the code can be written exactly the same for both Microsoft Accounts and Azure AD accounts.</span></span>  

<span data-ttu-id="32f40-115">Integrar seu aplicativo com as contas da Microsoft e do AD do Azure agora é um processo simples.</span><span class="sxs-lookup"><span data-stu-id="32f40-115">Integrating your app with Microsoft Accounts and Azure AD accounts is now one simple process.</span></span>  <span data-ttu-id="32f40-116">É possível usar um único conjunto de pontos de extremidade, uma única biblioteca e um único registro de aplicativo para acessar os mundos empresarial e do consumidor.</span><span class="sxs-lookup"><span data-stu-id="32f40-116">You can use a single set of endpoints, a single library, and a single app registration to gain access to both the consumer and enterprise worlds.</span></span>  <span data-ttu-id="32f40-117">Para saber mais sobre o ponto de extremidade v2.0, confira [a visão geral](active-directory-appmodel-v2-overview.md).</span><span class="sxs-lookup"><span data-stu-id="32f40-117">To learn more about the v2.0 endpoint, check out [the overview](active-directory-appmodel-v2-overview.md).</span></span>

## <a name="new-app-registration-portal"></a><span data-ttu-id="32f40-118">Novo portal de registro de aplicativos</span><span class="sxs-lookup"><span data-stu-id="32f40-118">New app registration portal</span></span>
<span data-ttu-id="32f40-119">Para registrar um aplicativo que funciona com o ponto de extremidade v2.0, você deve usar um novo portal de registro de aplicativos: [apps.dev.microsoft.com](https://apps.dev.microsoft.com/?referrer=https://azure.microsoft.com/documentation/articles&deeplink=/appList).</span><span class="sxs-lookup"><span data-stu-id="32f40-119">To register an app that works with the v2.0 endpoint, you must use a new app registration portal: [apps.dev.microsoft.com](https://apps.dev.microsoft.com/?referrer=https://azure.microsoft.com/documentation/articles&deeplink=/appList).</span></span>  <span data-ttu-id="32f40-120">Esse é o portal em que é possível obter uma ID de aplicativo, personalizar a aparência da página de conexão do aplicativo e muito mais.</span><span class="sxs-lookup"><span data-stu-id="32f40-120">This is the portal where you can obtain an application ID, customize the appearance of your app's sign-in page, and more.</span></span>  <span data-ttu-id="32f40-121">Tudo que você precisa para acessar o portal é uma conta da plataforma Microsoft, seja ela pessoal ou corporativa/de estudante.</span><span class="sxs-lookup"><span data-stu-id="32f40-121">All you need to access the portal is a Microsoft powered account - either personal or work/school account.</span></span>

## <a name="one-app-id-for-all-platforms"></a><span data-ttu-id="32f40-122">Uma ID do aplicativo para todas as plataformas</span><span class="sxs-lookup"><span data-stu-id="32f40-122">One app ID for all platforms</span></span>
<span data-ttu-id="32f40-123">Se você já usou o Azure Active Directory, provavelmente, você já registrou vários aplicativos diferentes para um único projeto.</span><span class="sxs-lookup"><span data-stu-id="32f40-123">If you've used Azure Active Directory, you've probably registered several different apps for a single project.</span></span>  <span data-ttu-id="32f40-124">Por exemplo, se você criou um site da Web e um aplicativo iOS, era preciso registrá-los separadamente usando duas IDs de Aplicativo diferentes.</span><span class="sxs-lookup"><span data-stu-id="32f40-124">For example, if you built both a website and an iOS app, you had to register them separately, using two different Application Ids.</span></span> <span data-ttu-id="32f40-125">O portal de registro de aplicativos do Azure AD forçou você a fazer essa distinção durante o registro:</span><span class="sxs-lookup"><span data-stu-id="32f40-125">The Azure AD app registration portal forced you to make this distinction during registration:</span></span>

![Interface do usuário do registro de aplicativo antigo](../../media/active-directory-v2-flows/old_app_registration.PNG)

<span data-ttu-id="32f40-127">De forma semelhante, se você tiver um site e uma API Web de back-end, poderá ter registrado cada um deles como um aplicativo separado no Azure AD.</span><span class="sxs-lookup"><span data-stu-id="32f40-127">Similarly, if you had a website and a backend web api, you might have registered each as a separate app in Azure AD.</span></span>  <span data-ttu-id="32f40-128">Ou se você tiver um aplicativo iOS e um aplicativo Android, também poderá ter registrado dois aplicativos diferentes.</span><span class="sxs-lookup"><span data-stu-id="32f40-128">Or if you had an iOS app and an Android app, you also might have registered two different apps.</span></span>  <span data-ttu-id="32f40-129">O registro de cada componente de um aplicativo levou a alguns comportamentos inesperados para os desenvolvedores e seus clientes:</span><span class="sxs-lookup"><span data-stu-id="32f40-129">Registering each component of an application led to some unexpected behaviors for developers and their customers:</span></span>

* <span data-ttu-id="32f40-130">Cada componente apareceu como um aplicativo separado no locatário do Azure Active Directory de cada cliente.</span><span class="sxs-lookup"><span data-stu-id="32f40-130">Each component appeared as a separate app in the Azure Active Directory tenant of each customer.</span></span>
* <span data-ttu-id="32f40-131">Quando um administrador de locatários tentou aplicar políticas, gerenciar o acesso ou excluir um aplicativo, ele precisou fazer isso para cada componente do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="32f40-131">When a tenant administrator attempted to apply policy to, manage access to, or delete an app, they would have to do so for each component of the app.</span></span>
* <span data-ttu-id="32f40-132">Quando os clientes forneceram seu consentimento para um aplicativo, cada componente foi exibido na tela de consentimento como um aplicativo distinto.</span><span class="sxs-lookup"><span data-stu-id="32f40-132">When customers consented to an application, each component would appear in the consent screen as a distinct application.</span></span>

<span data-ttu-id="32f40-133">Com o ponto de extremidade v2.0, agora você pode registrar todos os componentes de seu projeto como um registro de aplicativo único e usar uma única ID de Aplicativo para todo o projeto.</span><span class="sxs-lookup"><span data-stu-id="32f40-133">With the v2.0 endpoint, you can now register all components of your project as a single app registration, and use a single Application Id for your entire project.</span></span>  <span data-ttu-id="32f40-134">É possível adicionar várias "plataformas" a cada projeto e fornecer os dados apropriados para cada plataforma que você adicionar.</span><span class="sxs-lookup"><span data-stu-id="32f40-134">You can add several "platforms" to a each project, and provide the appropriate data for each platform you add.</span></span>  <span data-ttu-id="32f40-135">Claro, você pode criar quantos aplicativos desejar dependendo dos seus requisitos, mas, para a maioria dos casos, apenas uma Id de aplicativo deve ser necessária.</span><span class="sxs-lookup"><span data-stu-id="32f40-135">Of course, you can create as many apps as you like depending on your requirements, but for the majority of cases only one Application Id should be necessary.</span></span>

<span data-ttu-id="32f40-136">Nosso objetivo é que isso resulte em uma experiência de desenvolvimento e gerenciamento de aplicativos mais simplificada e crie uma visão mais consolidada de um projeto simples no qual você estiver trabalhando.</span><span class="sxs-lookup"><span data-stu-id="32f40-136">Our aim is that this will lead to a more simplified app management and development experience, and create a more consolidated view of a single project that you might be working on.</span></span>

## <a name="scopes-not-resources"></a><span data-ttu-id="32f40-137">Escopos, não recursos</span><span class="sxs-lookup"><span data-stu-id="32f40-137">Scopes, not resources</span></span>
<span data-ttu-id="32f40-138">No Azure Active Directory, um aplicativo pode se comportar como um **recurso** ou um contêiner de tokens.</span><span class="sxs-lookup"><span data-stu-id="32f40-138">In Azure Active Directory, an app can behave as a **resource**, or a recipient of tokens.</span></span>  <span data-ttu-id="32f40-139">Um recurso pode definir um número de **escopos** ou **oAuth2Permissions** que ele entende, permitindo que os aplicativos cliente solicitem tokens a esse recurso para um determinado conjunto de escopos.</span><span class="sxs-lookup"><span data-stu-id="32f40-139">A resource can define a number of **scopes** or **oAuth2Permissions** that it understands, allowing client apps to request tokens to that resource for a certain set of scopes.</span></span>  <span data-ttu-id="32f40-140">Considere a Graph API do AD do Azure como um exemplo de um recurso:</span><span class="sxs-lookup"><span data-stu-id="32f40-140">Consider the Azure AD Graph API as an example of a resource:</span></span>

* <span data-ttu-id="32f40-141">Identificador de recurso, ou `AppID URI`: `https://graph.windows.net/`</span><span class="sxs-lookup"><span data-stu-id="32f40-141">Resource Identifier, or `AppID URI`: `https://graph.windows.net/`</span></span>
* <span data-ttu-id="32f40-142">Escopos, ou `OAuth2Permissions`: `Directory.Read`, `Directory.Write`, etc.</span><span class="sxs-lookup"><span data-stu-id="32f40-142">Scopes, or `OAuth2Permissions`: `Directory.Read`, `Directory.Write`, etc.</span></span>  

<span data-ttu-id="32f40-143">Tudo isso se aplica para o ponto de extremidade v2.0.</span><span class="sxs-lookup"><span data-stu-id="32f40-143">All of this holds true for the the v2.0 endpoint.</span></span>  <span data-ttu-id="32f40-144">Um aplicativo ainda pode se comportar como recurso, definir escopos e ser identificado por um URI.</span><span class="sxs-lookup"><span data-stu-id="32f40-144">An app can still behave as resource, define scopes, and be identified by a URI.</span></span>  <span data-ttu-id="32f40-145">Aplicativos cliente ainda podem solicitar acesso a esses escopos.</span><span class="sxs-lookup"><span data-stu-id="32f40-145">Client apps can still request access to those scopes.</span></span>  <span data-ttu-id="32f40-146">No entanto, a maneira na qual um cliente solicita essas permissões foi alterada.</span><span class="sxs-lookup"><span data-stu-id="32f40-146">However, the way in which a client requests those permissions has changed.</span></span>  <span data-ttu-id="32f40-147">No passado, uma solicitação de autorização de OAuth 2.0 ao AD do Azure teria esta aparência:</span><span class="sxs-lookup"><span data-stu-id="32f40-147">In the past, an OAuth 2.0 authorize request to Azure AD might have looked like:</span></span>

```
GET https://login.microsoftonline.com/common/oauth2/authorize?
client_id=2d4d11a2-f814-46a7-890a-274a72a7309e
&resource=https%3A%2F%2Fgraph.windows.net%2F
...
```

<span data-ttu-id="32f40-148">onde o parâmetro **resource** indicava o recurso para o qual o aplicativo cliente estava solicitando a autorização.</span><span class="sxs-lookup"><span data-stu-id="32f40-148">where the **resource** parameter indicated which resource the client app is requesting authorization for.</span></span>  <span data-ttu-id="32f40-149">O AD do Azure computava as permissões exigidas pelo aplicativo com base na configuração estática no Portal do Azure e emitia os tokens de acordo.</span><span class="sxs-lookup"><span data-stu-id="32f40-149">Azure AD computed the permissions required by the app based on static configuration in the Azure Portal, and issued tokens accordingly.</span></span>  <span data-ttu-id="32f40-150">Agora, a mesma solicitação de autorização de OAuth 2.0 se parece com o seguinte:</span><span class="sxs-lookup"><span data-stu-id="32f40-150">Now, the same OAuth 2.0 authorize request looks like:</span></span>

```
GET https://login.microsoftonline.com/common/oauth2/v2.0/authorize?
client_id=2d4d11a2-f814-46a7-890a-274a72a7309e
&scope=https%3A%2F%2Fgraph.windows.net%2Fdirectory.read%20https%3A%2F%2Fgraph.windows.net%2Fdirectory.write
...
```

<span data-ttu-id="32f40-151">onde o parâmetro **scope** indica quais recursos e permissões para o qual o aplicativo está solicitando a autorização.</span><span class="sxs-lookup"><span data-stu-id="32f40-151">where the **scope** parameter indicates which resource and permissions the app is requesting authorization for.</span></span> <span data-ttu-id="32f40-152">O recurso desejado ainda está muito presente na solicitação; ele simplesmente está englobado em cada um dos valores do parâmetro de escopo.</span><span class="sxs-lookup"><span data-stu-id="32f40-152">The desired resource is still very present in the request - it is simply encompassed in each of the values of the scope parameter.</span></span>  <span data-ttu-id="32f40-153">Usar o parâmetro de escopo dessa maneira permite que o ponto de extremidade v2.0 seja mais compatível com a especificação OAuth 2.0 e esteja alinhado mais estreitamente com práticas comuns do setor.</span><span class="sxs-lookup"><span data-stu-id="32f40-153">Using the scope parameter in this manner allows the v2.0 endpoint to be more compliant with the OAuth 2.0 specification, and aligns more closely with common industry practices.</span></span>  <span data-ttu-id="32f40-154">Ele também permite que os aplicativos realizem o [consentimento incremental](#incremental-and-dynamic-consent), que é descrito na próxima seção.</span><span class="sxs-lookup"><span data-stu-id="32f40-154">It also enables apps to perform [incremental consent](#incremental-and-dynamic-consent), which is described in the next section.</span></span>

## <a name="incremental-and-dynamic-consent"></a><span data-ttu-id="32f40-155">Consentimento incremental e dinâmico</span><span class="sxs-lookup"><span data-stu-id="32f40-155">Incremental and dynamic consent</span></span>
<span data-ttu-id="32f40-156">Anteriormente, os aplicativos registrados no Azure AD precisavam especificar suas permissões necessárias do OAuth 2.0 no Portal do Azure, no momento da criação do aplicativo:</span><span class="sxs-lookup"><span data-stu-id="32f40-156">Apps registered in Azure AD previously needed to specify their required OAuth 2.0 permissions in the Azure Portal, at app creation time:</span></span>

![Interface do usuário do registro de permissões](../../media/active-directory-v2-flows/app_reg_permissions.PNG)

<span data-ttu-id="32f40-158">As permissões que um aplicativo precisava foram configuradas **estaticamente**.</span><span class="sxs-lookup"><span data-stu-id="32f40-158">The permissions an app required were configured **statically**.</span></span>  <span data-ttu-id="32f40-159">Embora isso tenha permitido que a configuração do aplicativo exista no Portal do Azure e tenha mantido o código agradável e simples, isso também apresenta alguns problemas para os desenvolvedores:</span><span class="sxs-lookup"><span data-stu-id="32f40-159">While this allowed configuration of the app to exist in the Azure Portal and kept the code nice and simple, it presents a few issues for developers:</span></span>

* <span data-ttu-id="32f40-160">No momento da criação do aplicativo, o aplicativo tinha que conhecer todas as permissões que pudesse precisar.</span><span class="sxs-lookup"><span data-stu-id="32f40-160">An app had to know all of the permissions it would ever need at app creation time.</span></span>  <span data-ttu-id="32f40-161">Adicionar permissões ao longo do tempo era um processo difícil.</span><span class="sxs-lookup"><span data-stu-id="32f40-161">Adding permissions over time was a difficult process.</span></span>
* <span data-ttu-id="32f40-162">Um aplicativo tinha que conhecer todos os recursos que fosse acessar antes do tempo.</span><span class="sxs-lookup"><span data-stu-id="32f40-162">An app had to know all of the resources it would ever access ahead of time.</span></span>  <span data-ttu-id="32f40-163">Era difícil criar aplicativos que pudessem acessar um número arbitrário de recursos.</span><span class="sxs-lookup"><span data-stu-id="32f40-163">It was difficult to create apps that could access an arbitrary number of resources.</span></span>
* <span data-ttu-id="32f40-164">Um aplicativo tinha que solicitar todas as permissões que nunca seriam necessárias após a primeira entrada do usuário.</span><span class="sxs-lookup"><span data-stu-id="32f40-164">An app had to request all the permissions it would ever need upon the user's first sign-in.</span></span>  <span data-ttu-id="32f40-165">Em alguns casos, isso resultava em uma lista muito longa de permissões, o que desencorajava os usuários finais a aprovarem o acesso do aplicativo na entrada inicial.</span><span class="sxs-lookup"><span data-stu-id="32f40-165">In some cases this led to a very long list of permissions, which discouraged end-users from approving the app's access on initial sign-in.</span></span>

<span data-ttu-id="32f40-166">Com o ponto de extremidade v2.0, é possível especificar **dinamicamente**as permissões que o aplicativo precisa, no tempo de execução, durante o uso normal do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="32f40-166">With the v2.0 endpoint, you can specify the permissions your app needs **dynamically**, at runtime, during regular usage of your app.</span></span>  <span data-ttu-id="32f40-167">Para fazer isso, é possível especificar os escopos que o aplicativo precisa em qualquer ponto no tempo incluindo-os no parâmetro `scope` de uma solicitação de autorização:</span><span class="sxs-lookup"><span data-stu-id="32f40-167">To do so, you can specify the scopes your app needs at any given point in time by including them in the `scope` parameter of an authorization request:</span></span>

```
GET https://login.microsoftonline.com/common/oauth2/v2.0/authorize?
client_id=2d4d11a2-f814-46a7-890a-274a72a7309e
&scope=https%3A%2F%2Fgraph.windows.net%2Fdirectory.read%20https%3A%2F%2Fgraph.windows.net%2Fdirectory.write
...
```

<span data-ttu-id="32f40-168">O item acima solicita permissão para o aplicativo ler dados do diretório de um usuário do AD do Azure, bem como gravar dados no diretório dele.</span><span class="sxs-lookup"><span data-stu-id="32f40-168">The above requests permission for the app to read an Azure AD user's directory data, as well as write data to their directory.</span></span>  <span data-ttu-id="32f40-169">Se o usuário aceitou essas permissões no passado para esse aplicativo específico, eles simplesmente digitarão suas credenciais e entrarão no aplicativo.</span><span class="sxs-lookup"><span data-stu-id="32f40-169">If the user has consented to those permissions in the past for this particular app, they will simply enter their credentials and be signed into the app.</span></span>  <span data-ttu-id="32f40-170">Se o usuário não aceitou alguma dessas permissões, o ponto de extremidade v2.0 solicitará ao usuário consentimento para essas permissões.</span><span class="sxs-lookup"><span data-stu-id="32f40-170">If the user has not consented to any of these permissions, the v2.0 endpoint will ask the user for consent to those permissions.</span></span>  <span data-ttu-id="32f40-171">Para obter mais informações, você pode ler sobre [permissões, autorização e escopos](active-directory-v2-scopes.md).</span><span class="sxs-lookup"><span data-stu-id="32f40-171">To learn more, you can read up on [permissions, consent, and scopes](active-directory-v2-scopes.md).</span></span>

<span data-ttu-id="32f40-172">Permitir que um aplicativo solicite permissões dinamicamente por meio do parâmetro `scope` dá controle total a você sobre a experiência do usuário.</span><span class="sxs-lookup"><span data-stu-id="32f40-172">Allowing an app to request permissions dynamically via the `scope` parameter gives you full control over your user's experience.</span></span>  <span data-ttu-id="32f40-173">Se desejar, você pode optar por antecipar a experiência de consentimento e pedir todas as permissões em uma solicitação de autorização inicial.</span><span class="sxs-lookup"><span data-stu-id="32f40-173">If you wish, you can choose to frontload your consent experience and ask for all permissions in one initial authorization request.</span></span>  <span data-ttu-id="32f40-174">Ou, se seu aplicativo precisar de um grande número de permissões, você pode optar por reunir essas permissões do usuário de forma incremental, à medida que ele tentar usar determinados recursos do seu aplicativo ao longo do tempo.</span><span class="sxs-lookup"><span data-stu-id="32f40-174">Or if your app requires a large number of permissions, you can choose to gather those permissions from the user incrementally, as they attempt to use certain features of your app over time.</span></span>

## <a name="well-known-scopes"></a><span data-ttu-id="32f40-175">Escopos conhecidos</span><span class="sxs-lookup"><span data-stu-id="32f40-175">Well-known scopes</span></span>
#### <a name="offline-access"></a><span data-ttu-id="32f40-176">Acesso offline</span><span class="sxs-lookup"><span data-stu-id="32f40-176">Offline access</span></span>
<span data-ttu-id="32f40-177">Os aplicativos que usam o ponto de extremidade v2.0 podem exigir o uso de uma nova permissão conhecida para aplicativos – o escopo `offline_access`.</span><span class="sxs-lookup"><span data-stu-id="32f40-177">Apps using the v2.0 endpoint may require the use of a new well-known permission for apps - the `offline_access` scope.</span></span>  <span data-ttu-id="32f40-178">Todos os aplicativos terão que solicitar essa permissão se precisarem acessar recursos em nome de um usuário por um longo período de tempo, mesmo quando o usuário pode não estiver usando o aplicativo de maneira ativa.</span><span class="sxs-lookup"><span data-stu-id="32f40-178">All apps will need to request this permission if they need to access resources on the behalf of a user for a prolonged period of time, even when the user may not be actively using the app.</span></span>  <span data-ttu-id="32f40-179">O escopo `offline_access` será exibido para o usuário em caixas de diálogo de consentimento como "Acesso a seus dados offline", com as quais o usuário deverá concordar.</span><span class="sxs-lookup"><span data-stu-id="32f40-179">The `offline_access` scope will appear to the user in consent dialogs as "Access your data offline", which the user must agree to.</span></span>  <span data-ttu-id="32f40-180">Solicitar a permissão `offline_access` permitirá que seu aplicativo Web receba refresh_tokens do OAuth 2.0 a partir do ponto de extremidade v2.0.</span><span class="sxs-lookup"><span data-stu-id="32f40-180">Requesting the `offline_access` permission will enable your web app to receive OAuth 2.0 refresh_tokens from the v2.0 endpoint.</span></span>  <span data-ttu-id="32f40-181">Refresh_tokens são duradouros e podem ser trocados por novos access_tokens do OAuth 2.0 por longos períodos de acesso.</span><span class="sxs-lookup"><span data-stu-id="32f40-181">Refresh_tokens are long-lived, and can be exchanged for new OAuth 2.0 access_tokens for extended periods of access.</span></span>  

<span data-ttu-id="32f40-182">Se o aplicativo não solicitar o escopo `offline_access`, ele não receberá refresh_tokens.</span><span class="sxs-lookup"><span data-stu-id="32f40-182">If your app does not request the `offline_access` scope, it will not receive refresh_tokens.</span></span>  <span data-ttu-id="32f40-183">Isso significa que, ao resgatar um authorization_code no fluxo de código de autorização do OAuth 2.0, você só receberá de volta um access_token do ponto de extremidade `/token`.</span><span class="sxs-lookup"><span data-stu-id="32f40-183">This means that when you redeem an authorization_code in the OAuth 2.0 authorization code flow, you will only receive back an access_token from the `/token` endpoint.</span></span>  <span data-ttu-id="32f40-184">Esse access_token permanecerá válido por um curto período de tempo (normalmente uma hora), mas acabará expirando.</span><span class="sxs-lookup"><span data-stu-id="32f40-184">That access_token will remain valid for a short period of time (typically one hour), but will eventually expire.</span></span>  <span data-ttu-id="32f40-185">Nesse momento, seu aplicativo terá que redirecionar o usuário de volta ao ponto de extremidade `/authorize` para recuperar um novo authorization_code.</span><span class="sxs-lookup"><span data-stu-id="32f40-185">At that point in time, your app will need to redirect the user back to the `/authorize` endpoint to retrieve a new authorization_code.</span></span>  <span data-ttu-id="32f40-186">Durante esse redirecionamento, o usuário pode ou não precisar digitar suas credenciais novamente ou consentir de novo as permissões, dependendo do tipo do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="32f40-186">During this redirect, the user may or may not need to enter their credentials again or re-consent to permissions, depending on the the type of app.</span></span>

<span data-ttu-id="32f40-187">Para saber mais sobre OAuth 2.0, refresh_tokens e access_tokens, consulte a [referência de protocolo da v2.0](active-directory-v2-protocols.md).</span><span class="sxs-lookup"><span data-stu-id="32f40-187">To learn more about OAuth 2.0, refresh_tokens, and access_tokens, check out the [v2.0 protocol reference](active-directory-v2-protocols.md).</span></span>

#### <a name="openid-profile-and-email"></a><span data-ttu-id="32f40-188">OpenID, perfil e email</span><span class="sxs-lookup"><span data-stu-id="32f40-188">OpenID, profile and email</span></span>
<span data-ttu-id="32f40-189">Historicamente, o fluxo de conexão mais básico do OpenID Connect com o Azure Active Directory fornecia uma grande quantidade de informações sobre o usuário no id_token resultante.</span><span class="sxs-lookup"><span data-stu-id="32f40-189">Historically, the most basic OpenID Connect sign-in flow with Azure Active Directory would provide a wealth of information about the user in the resulting id_token.</span></span>  <span data-ttu-id="32f40-190">As declarações em um id_token podem incluir o nome do usuário, nome de usuário preferido, endereço de email, ID do objeto e muito mais.</span><span class="sxs-lookup"><span data-stu-id="32f40-190">The claims in an id_token can include the user's name, preferred username, email address, object ID, and more.</span></span>

<span data-ttu-id="32f40-191">Agora estamos restringindo as informações que o escopo de `openid` permite que seu aplicativo acesse.</span><span class="sxs-lookup"><span data-stu-id="32f40-191">We are now restricting the information that the `openid` scope affords your app access to.</span></span>  <span data-ttu-id="32f40-192">O escopo de “openid” apenas permitirá que seu aplicativo faça logon do usuário e receba um identificador específico do aplicativo para o usuário.</span><span class="sxs-lookup"><span data-stu-id="32f40-192">The ‘openid’ scope will only allow your app to sign the user in, and receive an app-specific identifier for the user.</span></span>  <span data-ttu-id="32f40-193">Se você quiser obter informações de identificação pessoal (PII) sobre o usuário em seu aplicativo, seu aplicativo precisará solicitar permissões adicionais do usuário.</span><span class="sxs-lookup"><span data-stu-id="32f40-193">If you want to obtain personally identifiable information (PII) about the user in your app, your app will need to request additional permissions from the user.</span></span>  <span data-ttu-id="32f40-194">Estamos apresentando dois novos escopos, os escopos de `email` e `profile`, que permitem que você faça isso.</span><span class="sxs-lookup"><span data-stu-id="32f40-194">We are introducing two new scopes – the `email` and `profile` scopes – which allow you to do so.</span></span>

<span data-ttu-id="32f40-195">O escopo de `email` é muito simples. Ele permite que seu aplicativo acesse o endereço de email principal do usuário por meio da declaração `email` no id_token.</span><span class="sxs-lookup"><span data-stu-id="32f40-195">The `email` scope is very straightforward – it allows your app access to the user’s primary email address via the `email` claim in the id_token.</span></span>  <span data-ttu-id="32f40-196">O escopo `profile` permite que seu aplicativo acesse todas as outras informações básicas sobre o usuário – seu nome, nome de usuário preferido, ID do objeto etc.</span><span class="sxs-lookup"><span data-stu-id="32f40-196">The `profile` scope affords your app access to all other basic information about the user – their name, preferred username, object ID, and so on.</span></span>

<span data-ttu-id="32f40-197">Isso permite que você codifique seu aplicativo com uma divulgação mínima. Você só pode solicitar ao usuário o conjunto de informações de que seu aplicativo precisa para fazer seu trabalho.</span><span class="sxs-lookup"><span data-stu-id="32f40-197">This allows you to code your app in a minimal-disclosure fashion – you can only ask the user for the set of information that your app requires to do its job.</span></span>  <span data-ttu-id="32f40-198">Para obter mais informações sobre os escopos, consulte a [referência de escopo da v2.0](active-directory-v2-scopes.md).</span><span class="sxs-lookup"><span data-stu-id="32f40-198">For more information on these scopes, refer to [the v2.0 scope reference](active-directory-v2-scopes.md).</span></span>

## <a name="token-claims"></a><span data-ttu-id="32f40-199">Declarações de token</span><span class="sxs-lookup"><span data-stu-id="32f40-199">Token Claims</span></span>
<span data-ttu-id="32f40-200">As declarações em tokens emitidos pelo ponto de extremidade v2.0 não serão idênticas aos tokens emitidos pelos pontos de extremidade do AD do Azure disponíveis ao público geral; os aplicativos que migrarem para o novo serviço não deverão presumir que uma declaração específica existirá em id_tokens ou access_tokens.</span><span class="sxs-lookup"><span data-stu-id="32f40-200">The claims in tokens issued by the v2.0 endpoint will not be identical to tokens issued by the generally available Azure AD endpoints - apps migrating to the new service should not assume a particular claim will exist in id_tokens or access_tokens.</span></span> <span data-ttu-id="32f40-201">Para saber mais sobre as declarações específicas emitidas em tokens da v2.0, consulte a [referência de token v2.0](active-directory-v2-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="32f40-201">To learn about the specific claims emitted in v2.0 tokens, see the [v2.0 token reference](active-directory-v2-tokens.md).</span></span>

## <a name="limitations"></a><span data-ttu-id="32f40-202">Limitações</span><span class="sxs-lookup"><span data-stu-id="32f40-202">Limitations</span></span>
<span data-ttu-id="32f40-203">Há algumas restrições que merecem atenção ao usar o ponto v2.0.</span><span class="sxs-lookup"><span data-stu-id="32f40-203">There are a few restrictions to be aware of when using the v2.0 point.</span></span>  <span data-ttu-id="32f40-204">Consulte o [documento de limitações da v2.0](active-directory-v2-limitations.md) para ver se alguma dessas restrições se aplica ao seu cenário específico.</span><span class="sxs-lookup"><span data-stu-id="32f40-204">Please refer to the [v2.0 limitations doc](active-directory-v2-limitations.md) to see if any of these restrictions apply to your particular scenario.</span></span>
