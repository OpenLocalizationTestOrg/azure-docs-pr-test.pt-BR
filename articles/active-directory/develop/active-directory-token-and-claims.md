---
title: "Saiba mais sobre o token diferente e tipos de declaração suportados pelo Azure AD | Microsoft Docs"
description: "Um guia para compreender e avaliar as declarações em tokens SAML 2.0 e JSON Web Tokens (JWT) emitidos pelo AAD (Active Directory do Azure)"
documentationcenter: na
author: dstrockis
services: active-directory
manager: mbaldwin
editor: 
ms.assetid: 166aa18e-1746-4c5e-b382-68338af921e2
ms.service: active-directory
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 02/08/2017
ms.author: dastrock
ms.custom: aaddev
ms.openlocfilehash: c211c59b00d445a62ebe3ae9334101c983e05c57
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/03/2017
---
# <a name="azure-ad-token-reference"></a><span data-ttu-id="90a34-103">Referência de token do Azure AD</span><span class="sxs-lookup"><span data-stu-id="90a34-103">Azure AD token reference</span></span>
<span data-ttu-id="90a34-104">O Azure Active Directory (Azure AD) emite vários tipos de tokens de segurança no processamento de cada fluxo de autenticação.</span><span class="sxs-lookup"><span data-stu-id="90a34-104">Azure Active Directory (Azure AD) emits several types of security tokens in the processing of each authentication flow.</span></span> <span data-ttu-id="90a34-105">Este documento descreve o formato, as características de segurança e o conteúdo de cada tipo de token.</span><span class="sxs-lookup"><span data-stu-id="90a34-105">This document describes the format, security characteristics, and contents of each type of token.</span></span>

## <a name="types-of-tokens"></a><span data-ttu-id="90a34-106">Tipos de tokens</span><span class="sxs-lookup"><span data-stu-id="90a34-106">Types of tokens</span></span>
<span data-ttu-id="90a34-107">O AD do Azure dá suporte ao [protocolo de autorização do OAuth 2.0](active-directory-protocols-oauth-code.md), que usa access_tokens e refresh_tokens.</span><span class="sxs-lookup"><span data-stu-id="90a34-107">Azure AD supports the [OAuth 2.0 authorization protocol](active-directory-protocols-oauth-code.md), which makes use of both access_tokens and refresh_tokens.</span></span>  <span data-ttu-id="90a34-108">Ele também oferece suporte à autenticação e conexão por meio do [OpenID Connect](active-directory-protocols-openid-connect-code.md), que introduz um terceiro tipo de token, o id_token.</span><span class="sxs-lookup"><span data-stu-id="90a34-108">It also supports authentication and sign-in via [OpenID Connect](active-directory-protocols-openid-connect-code.md), which introduces a third type of token, the id_token.</span></span>  <span data-ttu-id="90a34-109">Cada um desses tokens é representado como um "token de portador".</span><span class="sxs-lookup"><span data-stu-id="90a34-109">Each of these tokens is represented as a "bearer token".</span></span>

<span data-ttu-id="90a34-110">Um token de portador é um token de segurança leve que concede ao "portador" acesso a um recurso protegido.</span><span class="sxs-lookup"><span data-stu-id="90a34-110">A bearer token is a lightweight security token that grants the “bearer” access to a protected resource.</span></span> <span data-ttu-id="90a34-111">Nesse sentido, o "portador" é qualquer parte que possa apresentar o token.</span><span class="sxs-lookup"><span data-stu-id="90a34-111">In this sense, the “bearer” is any party that can present the token.</span></span> <span data-ttu-id="90a34-112">Embora a autenticação com o AD do Azure seja necessária para receber um token de portador, as etapas devem ser executadas para proteger o token, para impedir a interceptação por uma parte não intencional.</span><span class="sxs-lookup"><span data-stu-id="90a34-112">Though authentication with Azure AD is required in order to receive a bearer token, steps must be taken to secure the token, to prevent interception by an unintended party.</span></span> <span data-ttu-id="90a34-113">Como os tokens de portador não têm um mecanismo interno para evitar que partes não autorizadas os utilizem, eles devem ser transportados em um canal seguro, como segurança da camada de transporte (HTTPS).</span><span class="sxs-lookup"><span data-stu-id="90a34-113">Because bearer tokens do not have a built-in mechanism to prevent unauthorized parties from using them, they must be transported in a secure channel such as transport layer security (HTTPS).</span></span> <span data-ttu-id="90a34-114">Se um token de portador for transmitido livremente, um ataque por parte de intermediários pode ser usado para adquirir o token e ganhar acesso não autorizado a um recurso protegido.</span><span class="sxs-lookup"><span data-stu-id="90a34-114">If a bearer token is transmitted in the clear, a man-in the middle attack can be used to acquire the token and gain unauthorized access to a protected resource.</span></span> <span data-ttu-id="90a34-115">Os mesmos princípios de segurança se aplicam ao armazenar ou manter em cache tokens de portador para uso posterior.</span><span class="sxs-lookup"><span data-stu-id="90a34-115">The same security principles apply when storing or caching bearer tokens for later use.</span></span> <span data-ttu-id="90a34-116">Sempre se certifique de que seu aplicativo transmita e armazene tokens de portador de maneira segura.</span><span class="sxs-lookup"><span data-stu-id="90a34-116">Always ensure that your app transmits and stores bearer tokens in a secure manner.</span></span> <span data-ttu-id="90a34-117">Para obter mais considerações de segurança sobre tokens de portador, consulte [RFC 6750 seção 5](http://tools.ietf.org/html/rfc6750).</span><span class="sxs-lookup"><span data-stu-id="90a34-117">For more security considerations on bearer tokens, see [RFC 6750 Section 5](http://tools.ietf.org/html/rfc6750).</span></span>

<span data-ttu-id="90a34-118">Muitos dos tokens emitidos pelo Azure AD são implementados como Tokens Web JSON, ou JWTs.</span><span class="sxs-lookup"><span data-stu-id="90a34-118">Many of the tokens issued by Azure AD are implemented as JSON Web Tokens, or JWTs.</span></span>  <span data-ttu-id="90a34-119">Um JWT é um meio compacto e protegido por URL de transferir informações entre duas partes.</span><span class="sxs-lookup"><span data-stu-id="90a34-119">A JWT is a compact, URL-safe means of transferring information between two parties.</span></span>  <span data-ttu-id="90a34-120">As informações contidas em JWTs são conhecidas como "declarações" ou asserções de informações sobre o portador e o assunto do token.</span><span class="sxs-lookup"><span data-stu-id="90a34-120">The information contained in JWTs are known as "claims", or assertions of information about the bearer and subject of the token.</span></span>  <span data-ttu-id="90a34-121">As declarações em JWTs são objetos JSON codificados e serializados para transmissão.</span><span class="sxs-lookup"><span data-stu-id="90a34-121">The claims in JWTs are JSON objects encoded and serialized for transmission.</span></span>  <span data-ttu-id="90a34-122">Uma vez que os JWTs emitidos pelo Azure AD são assinados, mas não criptografados, você pode inspecionar com facilidade o conteúdo de um JWT para fins de depuração.</span><span class="sxs-lookup"><span data-stu-id="90a34-122">Since the JWTs issued by Azure AD are signed, but not encrypted, you can easily inspect the contents of a JWT for debugging purposes.</span></span>  <span data-ttu-id="90a34-123">Há várias ferramentas disponíveis para isso, como [jwt.calebb.net](http://jwt.calebb.net).</span><span class="sxs-lookup"><span data-stu-id="90a34-123">There are several tools available for doing so, such as [jwt.calebb.net](http://jwt.calebb.net).</span></span> <span data-ttu-id="90a34-124">Para obter mais informações sobre JWTs, você pode consultar a [Especificação do JWT](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html).</span><span class="sxs-lookup"><span data-stu-id="90a34-124">For more information on JWTs, you can refer to the [JWT specification](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html).</span></span>

## <a name="idtokens"></a><span data-ttu-id="90a34-125">Id_tokens</span><span class="sxs-lookup"><span data-stu-id="90a34-125">Id_tokens</span></span>
<span data-ttu-id="90a34-126">Id_tokens são uma forma de token de segurança de conexão que seu aplicativo recebe ao executar a autenticação usando o [OpenID Connect](active-directory-protocols-openid-connect-code.md).</span><span class="sxs-lookup"><span data-stu-id="90a34-126">Id_tokens are a form of sign-in security token that your app receives when performing authentication using [OpenID Connect](active-directory-protocols-openid-connect-code.md).</span></span>  <span data-ttu-id="90a34-127">Eles são representados como [JWTs](#types-of-tokens)e contêm declarações que você pode usar para conectar o usuário ao aplicativo.</span><span class="sxs-lookup"><span data-stu-id="90a34-127">They are represented as [JWTs](#types-of-tokens), and contain claims that you can use for signing the user into your app.</span></span>  <span data-ttu-id="90a34-128">Você pode usar as declarações em um id_token como julgar conveniente — geralmente elas são usadas para exibir informações de conta ou tomar decisões de controle de acesso em um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="90a34-128">You can use the claims in an id_token as you see fit - commonly they are used for displaying account information or making access control decisions in an app.</span></span>

<span data-ttu-id="90a34-129">Atualmente, Id_tokens são assinados, mas não criptografados.</span><span class="sxs-lookup"><span data-stu-id="90a34-129">Id_tokens are signed, but not encrypted at this time.</span></span>  <span data-ttu-id="90a34-130">Quando seu aplicativo recebe um id_token, ele deve [validar a assinatura](#validating-tokens) para comprovar a autenticidade do token e validar algumas declarações no token para comprovar sua validade.</span><span class="sxs-lookup"><span data-stu-id="90a34-130">When your app receives an id_token, it must [validate the signature](#validating-tokens) to prove the token's authenticity and validate a few claims in the token to prove its validity.</span></span>  <span data-ttu-id="90a34-131">As declarações validadas por um aplicativo variam de acordo com os requisitos do cenário, mas há algumas [validações comuns de declaração](#validating-tokens) que seu aplicativo deve executar em cada cenário.</span><span class="sxs-lookup"><span data-stu-id="90a34-131">The claims validated by an app vary depending on scenario requirements, but there are some [common claim validations](#validating-tokens) that your app must perform in every scenario.</span></span>

<span data-ttu-id="90a34-132">Consulte a seção a seguir para obter informações sobre declarações id_tokens, bem como um id_token de exemplo.</span><span class="sxs-lookup"><span data-stu-id="90a34-132">See the following section for information on id_tokens claims, as well as a sample id_token.</span></span>  <span data-ttu-id="90a34-133">Observe que as declarações em id_tokens não são retornadas em uma ordem específica.</span><span class="sxs-lookup"><span data-stu-id="90a34-133">Note that the claims in id_tokens are not returned in any particular order.</span></span>  <span data-ttu-id="90a34-134">Além disso, novas declarações podem ser introduzidas nos id_tokens a qualquer momento — o aplicativo não deve ser interrompido conforme novas declarações são introduzidas.</span><span class="sxs-lookup"><span data-stu-id="90a34-134">In addition, new claims can be introduced into id_tokens at any point in time - your app should not break as new claims are introduced.</span></span>  <span data-ttu-id="90a34-135">A lista a seguir inclui as declarações que o aplicativo pode interpretar confiavelmente no momento em que este documento foi escrito.</span><span class="sxs-lookup"><span data-stu-id="90a34-135">The following list includes the claims that your app can reliably interpret at the time of this writing.</span></span>  <span data-ttu-id="90a34-136">Se necessário, mais detalhes podem ser encontrados na [especificação do OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html).</span><span class="sxs-lookup"><span data-stu-id="90a34-136">If necessary, even more detail can be found in the [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span></span>

#### <a name="sample-idtoken"></a><span data-ttu-id="90a34-137">Exemplo de Id_Token</span><span class="sxs-lookup"><span data-stu-id="90a34-137">Sample id_token</span></span>
```
eyJ0eXAiOiJKV1QiLCJhbGciOiJub25lIn0.eyJhdWQiOiIyZDRkMTFhMi1mODE0LTQ2YTctODkwYS0yNzRhNzJhNzMwOWUiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC83ZmU4MTQ0Ny1kYTU3LTQzODUtYmVjYi02ZGU1N2YyMTQ3N2UvIiwiaWF0IjoxMzg4NDQwODYzLCJuYmYiOjEzODg0NDA4NjMsImV4cCI6MTM4ODQ0NDc2MywidmVyIjoiMS4wIiwidGlkIjoiN2ZlODE0NDctZGE1Ny00Mzg1LWJlY2ItNmRlNTdmMjE0NzdlIiwib2lkIjoiNjgzODlhZTItNjJmYS00YjE4LTkxZmUtNTNkZDEwOWQ3NGY1IiwidXBuIjoiZnJhbmttQGNvbnRvc28uY29tIiwidW5pcXVlX25hbWUiOiJmcmFua21AY29udG9zby5jb20iLCJzdWIiOiJKV3ZZZENXUGhobHBTMVpzZjd5WVV4U2hVd3RVbTV5elBtd18talgzZkhZIiwiZmFtaWx5X25hbWUiOiJNaWxsZXIiLCJnaXZlbl9uYW1lIjoiRnJhbmsifQ.
```

> [!TIP]
> <span data-ttu-id="90a34-138">Para praticar, tente inspecionar as declarações no exemplo de id_token colando-o em [calebb.net](http://jwt.calebb.net).</span><span class="sxs-lookup"><span data-stu-id="90a34-138">For practice, try inspecting the claims in the sample id_token by pasting it into [calebb.net](http://jwt.calebb.net).</span></span>
> 
> 

#### <a name="claims-in-idtokens"></a><span data-ttu-id="90a34-139">Declarações em Id_Tokens</span><span class="sxs-lookup"><span data-stu-id="90a34-139">Claims in id_tokens</span></span>
> [!div class="mx-codeBreakAll"]
| <span data-ttu-id="90a34-140">Declaração JWT</span><span class="sxs-lookup"><span data-stu-id="90a34-140">JWT Claim</span></span> | <span data-ttu-id="90a34-141">Nome</span><span class="sxs-lookup"><span data-stu-id="90a34-141">Name</span></span> | <span data-ttu-id="90a34-142">Descrição</span><span class="sxs-lookup"><span data-stu-id="90a34-142">Description</span></span> |
| --- | --- | --- |
| `appid` |<span data-ttu-id="90a34-143">ID do aplicativo</span><span class="sxs-lookup"><span data-stu-id="90a34-143">Application ID</span></span> |<span data-ttu-id="90a34-144">Identifica o aplicativo que está usando o token para acessar um recurso.</span><span class="sxs-lookup"><span data-stu-id="90a34-144">Identifies the application that is using the token to access a resource.</span></span> <span data-ttu-id="90a34-145">O aplicativo pode agir como ele próprio ou em nome de um usuário.</span><span class="sxs-lookup"><span data-stu-id="90a34-145">The application can act as itself or on behalf of a user.</span></span> <span data-ttu-id="90a34-146">A ID do aplicativo normalmente representa um objeto de aplicativo, mas também pode representar um objeto de entidade de serviço no AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="90a34-146">The application ID typically represents an application object, but it can also represent a service principal object in Azure AD.</span></span> <br><br> <span data-ttu-id="90a34-147">**Valor de exemplo de JWT**:</span><span class="sxs-lookup"><span data-stu-id="90a34-147">**Example JWT Value**:</span></span> <br> `"appid":"15CB020F-3984-482A-864D-1D92265E8268"` |
| `aud` |<span data-ttu-id="90a34-148">Público-alvo</span><span class="sxs-lookup"><span data-stu-id="90a34-148">Audience</span></span> |<span data-ttu-id="90a34-149">O destinatário pretendido do token.</span><span class="sxs-lookup"><span data-stu-id="90a34-149">The intended recipient of the token.</span></span> <span data-ttu-id="90a34-150">O aplicativo que recebe o token deve verificar se o valor de público-alvo está correto e rejeitar quaisquer tokens destinados a um público-alvo diferente.</span><span class="sxs-lookup"><span data-stu-id="90a34-150">The application that receives the token must verify that the audience value is correct and reject any tokens intended for a different audience.</span></span> <br><br> <span data-ttu-id="90a34-151">**Valor de exemplo de SAML**:</span><span class="sxs-lookup"><span data-stu-id="90a34-151">**Example SAML Value**:</span></span> <br> `<AudienceRestriction>`<br>`<Audience>`<br>`https://contoso.com`<br>`</Audience>`<br>`</AudienceRestriction>` <br><br> <span data-ttu-id="90a34-152">**Valor de exemplo de JWT**:</span><span class="sxs-lookup"><span data-stu-id="90a34-152">**Example JWT Value**:</span></span> <br> `"aud":"https://contoso.com"` |
| `appidacr` |<span data-ttu-id="90a34-153">Referência de classe de contexto de autenticação de aplicativo</span><span class="sxs-lookup"><span data-stu-id="90a34-153">Application Authentication Context Class Reference</span></span> |<span data-ttu-id="90a34-154">Indica como o cliente foi autenticado.</span><span class="sxs-lookup"><span data-stu-id="90a34-154">Indicates how the client was authenticated.</span></span> <span data-ttu-id="90a34-155">Para um cliente público, o valor é 0.</span><span class="sxs-lookup"><span data-stu-id="90a34-155">For a public client, the value is 0.</span></span> <span data-ttu-id="90a34-156">Se a ID do cliente e o segredo do cliente são usados, o valor é 1.</span><span class="sxs-lookup"><span data-stu-id="90a34-156">If client ID and client secret are used, the value is 1.</span></span> <br><br> <span data-ttu-id="90a34-157">**Valor de exemplo de JWT**:</span><span class="sxs-lookup"><span data-stu-id="90a34-157">**Example JWT Value**:</span></span> <br> `"appidacr": "0"` |
| `acr` |<span data-ttu-id="90a34-158">Referência de classe de contexto de autenticação</span><span class="sxs-lookup"><span data-stu-id="90a34-158">Authentication Context Class Reference</span></span> |<span data-ttu-id="90a34-159">Indica como o assunto foi autenticado, em oposição ao cliente na declaração de Referência de Classe de Contexto de Autenticação do Aplicativo.</span><span class="sxs-lookup"><span data-stu-id="90a34-159">Indicates how the subject was authenticated, as opposed to the client in the Application Authentication Context Class Reference claim.</span></span> <span data-ttu-id="90a34-160">Um valor "0" indica que a autenticação do usuário final não atendeu aos requisitos da ISO/IEC 29115.</span><span class="sxs-lookup"><span data-stu-id="90a34-160">A value of "0" indicates the end-user authentication did not meet the requirements of ISO/IEC 29115.</span></span> <br><br> <span data-ttu-id="90a34-161">**Valor de exemplo de JWT**:</span><span class="sxs-lookup"><span data-stu-id="90a34-161">**Example JWT Value**:</span></span> <br> `"acr": "0"` |
| <span data-ttu-id="90a34-162">Instante da autenticação</span><span class="sxs-lookup"><span data-stu-id="90a34-162">Authentication Instant</span></span> |<span data-ttu-id="90a34-163">Registra a data e o horário em que ocorreu a autenticação.</span><span class="sxs-lookup"><span data-stu-id="90a34-163">Records the date and time when authentication occurred.</span></span> <br><br> <span data-ttu-id="90a34-164">**Valor de exemplo de SAML**:</span><span class="sxs-lookup"><span data-stu-id="90a34-164">**Example SAML Value**:</span></span> <br> `<AuthnStatement AuthnInstant="2011-12-29T05:35:22.000Z">` | |
| `amr` |<span data-ttu-id="90a34-165">Método de autenticação</span><span class="sxs-lookup"><span data-stu-id="90a34-165">Authentication Method</span></span> |<span data-ttu-id="90a34-166">Identifica como o assunto do token foi autenticado.</span><span class="sxs-lookup"><span data-stu-id="90a34-166">Identifies how the subject of the token was authenticated.</span></span> <br><br> <span data-ttu-id="90a34-167">**Valor de exemplo de SAML**:</span><span class="sxs-lookup"><span data-stu-id="90a34-167">**Example SAML Value**:</span></span> <br> `<AuthnContextClassRef>`<br>`http://schemas.microsoft.com/ws/2008/06/identity/claims/authenticationmethod/password`<br>`</AuthnContextClassRef>` <br><br> <span data-ttu-id="90a34-168">**Valor de exemplo de JWT**: `“amr”: ["pwd"]`</span><span class="sxs-lookup"><span data-stu-id="90a34-168">**Example JWT Value**: `“amr”: ["pwd"]`</span></span> |
| `given_name` |<span data-ttu-id="90a34-169">Nome</span><span class="sxs-lookup"><span data-stu-id="90a34-169">First Name</span></span> |<span data-ttu-id="90a34-170">Fornece o nome ou nome “determinado” do usuário, como definido no objeto de usuário do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="90a34-170">Provides the first or "given" name of the user, as set on the Azure AD user object.</span></span> <br><br> <span data-ttu-id="90a34-171">**Valor de exemplo de SAML**:</span><span class="sxs-lookup"><span data-stu-id="90a34-171">**Example SAML Value**:</span></span> <br> `<Attribute Name=”http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname”>`<br>`<AttributeValue>Frank<AttributeValue>` <br><br> <span data-ttu-id="90a34-172">**Valor de exemplo de JWT**:</span><span class="sxs-lookup"><span data-stu-id="90a34-172">**Example JWT Value**:</span></span> <br> `"given_name": "Frank"` |
| `groups` |<span data-ttu-id="90a34-173">Grupos</span><span class="sxs-lookup"><span data-stu-id="90a34-173">Groups</span></span> |<span data-ttu-id="90a34-174">Fornece IDs de objetos que representam as associações de grupo do assunto.</span><span class="sxs-lookup"><span data-stu-id="90a34-174">Provides object IDs that represent the subject's group memberships.</span></span> <span data-ttu-id="90a34-175">Esses valores são exclusivos (consulte a ID de objeto) e podem ser usados com segurança para gerenciar o acesso, como a imposição da autorização para acessar um recurso.</span><span class="sxs-lookup"><span data-stu-id="90a34-175">These values are unique (see Object ID) and can be safely used for managing access, such as enforcing authorization to access a resource.</span></span> <span data-ttu-id="90a34-176">Os grupos incluídos na declaração grupos são configurados por aplicativo, por meio da propriedade "groupMembershipClaims" do manifesto do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="90a34-176">The groups included in the groups claim are configured on a per-application basis, through the "groupMembershipClaims" property of the application manifest.</span></span> <span data-ttu-id="90a34-177">Um valor nulo exclui todos os grupos; já um valor "SecurityGroup" inclui somente os membros do grupo de segurança do Active Directory, enquanto um valor "All" inclui tanto grupos de segurança quanto listas de distribuição do Office 365.</span><span class="sxs-lookup"><span data-stu-id="90a34-177">A value of null will exclude all groups, a value of "SecurityGroup" will include only Active Directory Security Group memberships, and a value of "All" will include both Security Groups and Office 365 Distribution Lists.</span></span> <br><br> <span data-ttu-id="90a34-178">**Valor de exemplo de SAML**:</span><span class="sxs-lookup"><span data-stu-id="90a34-178">**Example SAML Value**:</span></span> <br> `<Attribute Name="http://schemas.microsoft.com/ws/2008/06/identity/claims/groups">`<br>`<AttributeValue>07dd8a60-bf6d-4e17-8844-230b77145381</AttributeValue>` <br><br> <span data-ttu-id="90a34-179">**Valor de exemplo de JWT**:</span><span class="sxs-lookup"><span data-stu-id="90a34-179">**Example JWT Value**:</span></span> <br> `“groups”: ["0e129f5b-6b0a-4944-982d-f776045632af", … ]` |
| `idp` |<span data-ttu-id="90a34-180">Provedor de identidade</span><span class="sxs-lookup"><span data-stu-id="90a34-180">Identity Provider</span></span> |<span data-ttu-id="90a34-181">Registra o provedor de identidade que autenticou a entidade do token.</span><span class="sxs-lookup"><span data-stu-id="90a34-181">Records the identity provider that authenticated the subject of the token.</span></span> <span data-ttu-id="90a34-182">Esse valor é idêntico ao valor da declaração Emissor, a menos que a conta de usuário esteja em um locatário diferente que o emissor.</span><span class="sxs-lookup"><span data-stu-id="90a34-182">This value is identical to the value of the Issuer claim unless the user account is in a different tenant than the issuer.</span></span> <br><br> <span data-ttu-id="90a34-183">**Valor de exemplo de SAML**:</span><span class="sxs-lookup"><span data-stu-id="90a34-183">**Example SAML Value**:</span></span> <br> `<Attribute Name=” http://schemas.microsoft.com/identity/claims/identityprovider”>`<br>`<AttributeValue>https://sts.windows.net/cbb1a5ac-f33b-45fa-9bf5-f37db0fed422/<AttributeValue>` <br><br> <span data-ttu-id="90a34-184">**Valor de exemplo de JWT**:</span><span class="sxs-lookup"><span data-stu-id="90a34-184">**Example JWT Value**:</span></span> <br> `"idp":”https://sts.windows.net/cbb1a5ac-f33b-45fa-9bf5-f37db0fed422/”` |
| `iat` |<span data-ttu-id="90a34-185">IssuedAt</span><span class="sxs-lookup"><span data-stu-id="90a34-185">IssuedAt</span></span> |<span data-ttu-id="90a34-186">Armazena a hora em que o token foi emitido.</span><span class="sxs-lookup"><span data-stu-id="90a34-186">Stores the time at which the token was issued.</span></span> <span data-ttu-id="90a34-187">Ela geralmente é usada para mensurar o quanto o token é recente.</span><span class="sxs-lookup"><span data-stu-id="90a34-187">It is often used to measure token freshness.</span></span> <br><br> <span data-ttu-id="90a34-188">**Valor de exemplo de SAML**:</span><span class="sxs-lookup"><span data-stu-id="90a34-188">**Example SAML Value**:</span></span> <br> `<Assertion ID="_d5ec7a9b-8d8f-4b44-8c94-9812612142be" IssueInstant="2014-01-06T20:20:23.085Z" Version="2.0" xmlns="urn:oasis:names:tc:SAML:2.0:assertion">` <br><br> <span data-ttu-id="90a34-189">**Valor de exemplo de JWT**:</span><span class="sxs-lookup"><span data-stu-id="90a34-189">**Example JWT Value**:</span></span> <br> `"iat": 1390234181` |
| `iss` |<span data-ttu-id="90a34-190">Emissor</span><span class="sxs-lookup"><span data-stu-id="90a34-190">Issuer</span></span> |<span data-ttu-id="90a34-191">Identifica o STS (serviço de token de segurança) que constrói e retorna o token.</span><span class="sxs-lookup"><span data-stu-id="90a34-191">Identifies the security token service (STS) that constructs and returns the token.</span></span> <span data-ttu-id="90a34-192">Nos tokens que o AD do Azure retorna, o emissor é sts.windows.net.</span><span class="sxs-lookup"><span data-stu-id="90a34-192">In the tokens that Azure AD returns, the issuer is sts.windows.net.</span></span> <span data-ttu-id="90a34-193">A GUID no valor de declaração do emissor é a ID do locatário do diretório do AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="90a34-193">The GUID in the Issuer claim value is the tenant ID of the Azure AD directory.</span></span> <span data-ttu-id="90a34-194">A ID do locatário é um identificador imutável e confiável do diretório.</span><span class="sxs-lookup"><span data-stu-id="90a34-194">The tenant ID is an immutable and reliable identifier of the directory.</span></span> <br><br> <span data-ttu-id="90a34-195">**Valor de exemplo de SAML**:</span><span class="sxs-lookup"><span data-stu-id="90a34-195">**Example SAML Value**:</span></span> <br> `<Issuer>https://sts.windows.net/cbb1a5ac-f33b-45fa-9bf5-f37db0fed422/</Issuer>` <br><br> <span data-ttu-id="90a34-196">**Valor de exemplo de JWT**:</span><span class="sxs-lookup"><span data-stu-id="90a34-196">**Example JWT Value**:</span></span> <br>  `"iss":”https://sts.windows.net/cbb1a5ac-f33b-45fa-9bf5-f37db0fed422/”` |
| `family_name` |<span data-ttu-id="90a34-197">Sobrenome</span><span class="sxs-lookup"><span data-stu-id="90a34-197">Last Name</span></span> |<span data-ttu-id="90a34-198">Fornece o último nome, o sobrenome ou o nome da família do usuário conforme definido no objeto de usuário do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="90a34-198">Provides the last name, surname, or family name of the user as defined in the Azure AD user object.</span></span> <br><br> <span data-ttu-id="90a34-199">**Valor de exemplo de SAML**:</span><span class="sxs-lookup"><span data-stu-id="90a34-199">**Example SAML Value**:</span></span> <br> `<Attribute Name=” http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname”>`<br>`<AttributeValue>Miller<AttributeValue>` <br><br> <span data-ttu-id="90a34-200">**Valor de exemplo de JWT**:</span><span class="sxs-lookup"><span data-stu-id="90a34-200">**Example JWT Value**:</span></span> <br> `"family_name": "Miller"` |
| `unique_name` |<span data-ttu-id="90a34-201">Nome</span><span class="sxs-lookup"><span data-stu-id="90a34-201">Name</span></span> |<span data-ttu-id="90a34-202">Fornece um valor legível que identifica a entidade do token.</span><span class="sxs-lookup"><span data-stu-id="90a34-202">Provides a human readable value that identifies the subject of the token.</span></span> <span data-ttu-id="90a34-203">Não há garantia de que esse valor seja exclusivo dentro de um locatário e ele é projetado para ser usado apenas para fins de exibição.</span><span class="sxs-lookup"><span data-stu-id="90a34-203">This value is not guaranteed to be unique within a tenant and is designed to be used only for display purposes.</span></span> <br><br> <span data-ttu-id="90a34-204">**Valor de exemplo de SAML**:</span><span class="sxs-lookup"><span data-stu-id="90a34-204">**Example SAML Value**:</span></span> <br> `<Attribute Name=”http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name”>`<br>`<AttributeValue>frankm@contoso.com<AttributeValue>` <br><br> <span data-ttu-id="90a34-205">**Valor de exemplo de JWT**:</span><span class="sxs-lookup"><span data-stu-id="90a34-205">**Example JWT Value**:</span></span> <br> `"unique_name": "frankm@contoso.com"` |
| `oid` |<span data-ttu-id="90a34-206">ID de objeto</span><span class="sxs-lookup"><span data-stu-id="90a34-206">Object ID</span></span> |<span data-ttu-id="90a34-207">Contém um identificador único de um objeto no Azure AD.</span><span class="sxs-lookup"><span data-stu-id="90a34-207">Contains a unique identifier of an object in Azure AD.</span></span> <span data-ttu-id="90a34-208">Esse valor é imutável e não pode ser reatribuído nem reutilizado.</span><span class="sxs-lookup"><span data-stu-id="90a34-208">This value is immutable and cannot be reassigned or reused.</span></span> <span data-ttu-id="90a34-209">Use a ID de objeto para identificar um objeto em consultas ao AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="90a34-209">Use the object ID to identify an object in queries to Azure AD.</span></span> <br><br> <span data-ttu-id="90a34-210">**Valor de exemplo de SAML**:</span><span class="sxs-lookup"><span data-stu-id="90a34-210">**Example SAML Value**:</span></span> <br> `<Attribute Name="http://schemas.microsoft.com/identity/claims/objectidentifier">`<br>`<AttributeValue>528b2ac2-aa9c-45e1-88d4-959b53bc7dd0<AttributeValue>` <br><br> <span data-ttu-id="90a34-211">**Valor de exemplo de JWT**:</span><span class="sxs-lookup"><span data-stu-id="90a34-211">**Example JWT Value**:</span></span> <br> `"oid":"528b2ac2-aa9c-45e1-88d4-959b53bc7dd0"` |
| `roles` |<span data-ttu-id="90a34-212">Funções</span><span class="sxs-lookup"><span data-stu-id="90a34-212">Roles</span></span> |<span data-ttu-id="90a34-213">Representa todas as funções de aplicativo que a entidade recebeu direta e indiretamente por meio da associação a um grupo e pode ser usado para impor o controle de acesso baseado em função.</span><span class="sxs-lookup"><span data-stu-id="90a34-213">Represents all application roles that the subject has been granted both directly and indirectly through group membership and can be used to enforce role-based access control.</span></span> <span data-ttu-id="90a34-214">As funções de aplicativo são definidas segundo o aplicativo, por meio da propriedade `appRoles` do manifesto do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="90a34-214">Application roles are defined on a per-application basis, through the `appRoles` property of the application manifest.</span></span> <span data-ttu-id="90a34-215">A propriedade `value` de cada função de aplicativo é o valor que aparece na declaração de funções.</span><span class="sxs-lookup"><span data-stu-id="90a34-215">The `value` property of each application role is the value that appears in the roles claim.</span></span> <br><br> <span data-ttu-id="90a34-216">**Valor de exemplo de SAML**:</span><span class="sxs-lookup"><span data-stu-id="90a34-216">**Example SAML Value**:</span></span> <br> `<Attribute Name="http://schemas.microsoft.com/ws/2008/06/identity/claims/role">`<br>`<AttributeValue>Admin</AttributeValue>` <br><br> <span data-ttu-id="90a34-217">**Valor de exemplo de JWT**:</span><span class="sxs-lookup"><span data-stu-id="90a34-217">**Example JWT Value**:</span></span> <br> `“roles”: ["Admin", … ]` |
| `scp` |<span data-ttu-id="90a34-218">Escopo</span><span class="sxs-lookup"><span data-stu-id="90a34-218">Scope</span></span> |<span data-ttu-id="90a34-219">Indica as permissões de representação concedidas ao aplicativo cliente.</span><span class="sxs-lookup"><span data-stu-id="90a34-219">Indicates the impersonation permissions granted to the client application.</span></span> <span data-ttu-id="90a34-220">A permissão padrão é `user_impersonation`.</span><span class="sxs-lookup"><span data-stu-id="90a34-220">The default permission is `user_impersonation`.</span></span> <span data-ttu-id="90a34-221">O proprietário do recurso protegido pode registrar valores adicionais no AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="90a34-221">The owner of the secured resource can register additional values in Azure AD.</span></span> <br><br> <span data-ttu-id="90a34-222">**Valor de exemplo de JWT**:</span><span class="sxs-lookup"><span data-stu-id="90a34-222">**Example JWT Value**:</span></span> <br> `"scp": "user_impersonation"` |
| `sub` |<span data-ttu-id="90a34-223">Assunto</span><span class="sxs-lookup"><span data-stu-id="90a34-223">Subject</span></span> |<span data-ttu-id="90a34-224">Identifica o item mais importante sobre o qual o token declara informações, como o usuário de um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="90a34-224">Identifies the principal about which the token asserts information, such as the user of an application.</span></span> <span data-ttu-id="90a34-225">Esse valor é imutável e não pode ser reatribuído ou reutilizado, então ele pode ser usado para executar verificações de autorização com segurança.</span><span class="sxs-lookup"><span data-stu-id="90a34-225">This value is immutable and cannot be reassigned or reused, so it can be used to perform authorization checks safely.</span></span> <span data-ttu-id="90a34-226">Como o assunto está sempre presente nos tokens emitidos pelo Azure AD, é recomendável usar esse valor em um sistema de autorização de uso geral.</span><span class="sxs-lookup"><span data-stu-id="90a34-226">Because the subject is always present in the tokens the Azure AD issues, we recommended using this value in a general purpose authorization system.</span></span> <br> <span data-ttu-id="90a34-227">`SubjectConfirmation` não é uma declaração.</span><span class="sxs-lookup"><span data-stu-id="90a34-227">`SubjectConfirmation` is not a claim.</span></span> <span data-ttu-id="90a34-228">Ele descreve como o assunto do token é verificado.</span><span class="sxs-lookup"><span data-stu-id="90a34-228">It describes how the subject of the token is verified.</span></span> <span data-ttu-id="90a34-229">`Bearer` indica que o assunto é confirmado pela posse do token.</span><span class="sxs-lookup"><span data-stu-id="90a34-229">`Bearer` indicates that the subject is confirmed by their possession of the token.</span></span> <br><br> <span data-ttu-id="90a34-230">**Valor de exemplo de SAML**:</span><span class="sxs-lookup"><span data-stu-id="90a34-230">**Example SAML Value**:</span></span> <br> `<Subject>`<br>`<NameID>S40rgb3XjhFTv6EQTETkEzcgVmToHKRkZUIsJlmLdVc</NameID>`<br>`<SubjectConfirmation Method="urn:oasis:names:tc:SAML:2.0:cm:bearer" />`<br>`</Subject>` <br><br> <span data-ttu-id="90a34-231">**Valor de exemplo de JWT**:</span><span class="sxs-lookup"><span data-stu-id="90a34-231">**Example JWT Value**:</span></span> <br> `"sub":"92d0312b-26b9-4887-a338-7b00fb3c5eab"` |
| `tid` |<span data-ttu-id="90a34-232">ID do locatário</span><span class="sxs-lookup"><span data-stu-id="90a34-232">Tenant ID</span></span> |<span data-ttu-id="90a34-233">Um identificador imutável, não reutilizável que identifica o locatário do diretório que emitiu o token.</span><span class="sxs-lookup"><span data-stu-id="90a34-233">An immutable, non-reusable identifier that identifies the directory tenant that issued the token.</span></span> <span data-ttu-id="90a34-234">Você pode usar esse valor para acessar os recursos de diretório específicos de um determinado locatário em um aplicativo multilocatário.</span><span class="sxs-lookup"><span data-stu-id="90a34-234">You can use this value to access tenant-specific directory resources in a multi-tenant application.</span></span> <span data-ttu-id="90a34-235">Por exemplo, você pode usar esse valor para identificar o locatário em uma chamada à Graph API.</span><span class="sxs-lookup"><span data-stu-id="90a34-235">For example, you can use this value to identify the tenant in a call to the Graph API.</span></span> <br><br> <span data-ttu-id="90a34-236">**Valor de exemplo de SAML**:</span><span class="sxs-lookup"><span data-stu-id="90a34-236">**Example SAML Value**:</span></span> <br> `<Attribute Name=”http://schemas.microsoft.com/identity/claims/tenantid”>`<br>`<AttributeValue>cbb1a5ac-f33b-45fa-9bf5-f37db0fed422<AttributeValue>` <br><br> <span data-ttu-id="90a34-237">**Valor de exemplo de JWT**:</span><span class="sxs-lookup"><span data-stu-id="90a34-237">**Example JWT Value**:</span></span> <br> `"tid":"cbb1a5ac-f33b-45fa-9bf5-f37db0fed422"` |
| <span data-ttu-id="90a34-238">`nbf`, `exp`</span><span class="sxs-lookup"><span data-stu-id="90a34-238">`nbf`, `exp`</span></span> |<span data-ttu-id="90a34-239">Tempo de vida do token</span><span class="sxs-lookup"><span data-stu-id="90a34-239">Token Lifetime</span></span> |<span data-ttu-id="90a34-240">Define o intervalo de tempo no qual um token é válido.</span><span class="sxs-lookup"><span data-stu-id="90a34-240">Defines the time interval within which a token is valid.</span></span> <span data-ttu-id="90a34-241">O serviço que valida o token deve verificar se a data atual está dentro do tempo de vida do token; se não estiver, ele deverá rejeitar o token.</span><span class="sxs-lookup"><span data-stu-id="90a34-241">The service that validates the token should verify that the current date is within the token lifetime, else it should reject the token.</span></span> <span data-ttu-id="90a34-242">O serviço pode fornecer uma margem de cinco minutos além do intervalo de tempo de vida do token para levar em conta as diferenças na hora do relógio ("distorção de tempo") entre o AD do Azure e o serviço.</span><span class="sxs-lookup"><span data-stu-id="90a34-242">The service might allow for up to five minutes beyond the token lifetime range to account for any differences in clock time ("time skew") between Azure AD and the service.</span></span> <br><br> <span data-ttu-id="90a34-243">**Valor de exemplo de SAML**:</span><span class="sxs-lookup"><span data-stu-id="90a34-243">**Example SAML Value**:</span></span> <br> `<Conditions`<br>`NotBefore="2013-03-18T21:32:51.261Z"`<br>`NotOnOrAfter="2013-03-18T22:32:51.261Z"`<br>`>` <br><br> <span data-ttu-id="90a34-244">**Valor de exemplo de JWT**:</span><span class="sxs-lookup"><span data-stu-id="90a34-244">**Example JWT Value**:</span></span> <br> `"nbf":1363289634, "exp":1363293234` |
| `upn` |<span data-ttu-id="90a34-245">Nome UPN</span><span class="sxs-lookup"><span data-stu-id="90a34-245">User Principal Name</span></span> |<span data-ttu-id="90a34-246">Armazena o nome de usuário da entidade de usuário.</span><span class="sxs-lookup"><span data-stu-id="90a34-246">Stores the user name of the user principal.</span></span><br><br> <span data-ttu-id="90a34-247">**Valor de exemplo de JWT**:</span><span class="sxs-lookup"><span data-stu-id="90a34-247">**Example JWT Value**:</span></span> <br> `"upn": frankm@contoso.com` |
| `ver` |<span data-ttu-id="90a34-248">Versão</span><span class="sxs-lookup"><span data-stu-id="90a34-248">Version</span></span> |<span data-ttu-id="90a34-249">Armazena o número de versão do token.</span><span class="sxs-lookup"><span data-stu-id="90a34-249">Stores the version number of the token.</span></span> <br><br> <span data-ttu-id="90a34-250">**Valor de exemplo de JWT**:</span><span class="sxs-lookup"><span data-stu-id="90a34-250">**Example JWT Value**:</span></span> <br> `"ver": "1.0"` |

## <a name="access-tokens"></a><span data-ttu-id="90a34-251">Tokens de acesso</span><span class="sxs-lookup"><span data-stu-id="90a34-251">Access tokens</span></span>
<span data-ttu-id="90a34-252">Após a autenticação bem-sucedida, o Azure AD retorna um token de acesso que pode ser usado para acessar recursos protegidos.</span><span class="sxs-lookup"><span data-stu-id="90a34-252">Upon successful authentication, Azure AD returns an access token, which can be used to access protected resources.</span></span> <span data-ttu-id="90a34-253">O token de acesso é um JWT (Token Web JSON) codificado em base 64 e seu conteúdo pode ser inspecionado ao executá-lo por meio de um decodificador.</span><span class="sxs-lookup"><span data-stu-id="90a34-253">The access token is a base 64 encoded JSON Web Token (JWT) and its contents can be inspected by running it through a decoder.</span></span>

<span data-ttu-id="90a34-254">Se seu aplicativo só *usa* tokens de acesso para obter acesso às APIs, você pode (e deve) tratar tokens de acesso como completamente opacos, pois são apenas cadeias de caracteres que seu aplicativo pode passar a recursos em solicitações HTTP.</span><span class="sxs-lookup"><span data-stu-id="90a34-254">If your app only *uses* access tokens to get access to APIs, you can (and should) treat access tokens as completely opaque - they are just strings which your app can pass to resources in HTTP requests.</span></span>

<span data-ttu-id="90a34-255">Quando você solicita um token de acesso, o Azure AD também retorna alguns metadados sobre o token de acesso para consumo do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="90a34-255">When you request an access token, Azure AD also returns some metadata about the access token for your app's consumption.</span></span>  <span data-ttu-id="90a34-256">Essas informações incluem a data de expiração do token de acesso e os escopos para os quais ele é válido.</span><span class="sxs-lookup"><span data-stu-id="90a34-256">This information includes the expiry time of the access token and the scopes for which it is valid.</span></span>  <span data-ttu-id="90a34-257">Isso permite ao aplicativo realizar caching, de modo inteligente, dos tokens de acesso sem precisar analisar abertamente o token de acesso em si.</span><span class="sxs-lookup"><span data-stu-id="90a34-257">This allows your app to perform intelligent caching of access tokens without having to parse open the access token itself.</span></span>

<span data-ttu-id="90a34-258">Se seu aplicativo for uma API protegida com o Azure AD que espera tokens de acesso em solicitações HTTP, você deverá executar a validação e a inspeção dos tokens que receber.</span><span class="sxs-lookup"><span data-stu-id="90a34-258">If your app is an API protected with Azure AD that expects access tokens in HTTP requests, then you should perform validation and inspection of the tokens you receive.</span></span> <span data-ttu-id="90a34-259">Seu aplicativo deve executar a validação do token de acesso antes de usá-lo para acessar recursos.</span><span class="sxs-lookup"><span data-stu-id="90a34-259">Your app should perform validation of the access token before using it to access resources.</span></span> <span data-ttu-id="90a34-260">Para obter mais informações sobre validação, consulte [Validando Tokens](#validating-tokens).</span><span class="sxs-lookup"><span data-stu-id="90a34-260">For more information on validation, please see [Validating Tokens](#validating-tokens).</span></span>  
<span data-ttu-id="90a34-261">Para obter detalhes sobre como fazer isso com o .NET, veja [Proteger uma API da Web usando os tokens de portador do Azure AD](active-directory-devquickstarts-webapi-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="90a34-261">For details on how to do this with .NET, see [Protect a Web API using Bearer tokens from Azure AD](active-directory-devquickstarts-webapi-dotnet.md).</span></span>

## <a name="refresh-tokens"></a><span data-ttu-id="90a34-262">Tokens de atualização</span><span class="sxs-lookup"><span data-stu-id="90a34-262">Refresh tokens</span></span>

<span data-ttu-id="90a34-263">Os tokens de atualização são tokens de segurança que o aplicativo pode usar para adquirir novos tokens de acesso em um fluxo do OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="90a34-263">Refresh tokens are security tokens, which your app can use to acquire new access tokens in an OAuth 2.0 flow.</span></span>  <span data-ttu-id="90a34-264">Ele permite ao aplicativo obter acesso a longo prazo a recursos em nome de um usuário sem a necessidade de interação do usuário.</span><span class="sxs-lookup"><span data-stu-id="90a34-264">It allows your app to achieve long-term access to resources on behalf of a user without requiring interaction by the user.</span></span>

<span data-ttu-id="90a34-265">Os tokens de atualização têm vários recursos.</span><span class="sxs-lookup"><span data-stu-id="90a34-265">Refresh tokens are multi-resource.</span></span>  <span data-ttu-id="90a34-266">Isso quer dizer que um token de atualização recebido durante uma solicitação de token para um recurso pode ser resgatado para tokens de acesso para um recurso totalmente diferente.</span><span class="sxs-lookup"><span data-stu-id="90a34-266">That is to say that a refresh token received during a token request for one resource can be redeemed for access tokens to a completely different resource.</span></span> <span data-ttu-id="90a34-267">Para fazer isso, defina o parâmetro `resource` na solicitação para o recurso de destino.</span><span class="sxs-lookup"><span data-stu-id="90a34-267">To do this, set the `resource` parameter in the request to the targeted resource.</span></span>

<span data-ttu-id="90a34-268">Os tokens de atualização são completamente opacos para seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="90a34-268">Refresh tokens are completely opaque to your app.</span></span> <span data-ttu-id="90a34-269">Eles têm longa duração, mas o aplicativo não deve ser escrito para esperar que um token de atualização dure por qualquer período de tempo.</span><span class="sxs-lookup"><span data-stu-id="90a34-269">They are long-lived, but your app should not be written to expect that a refresh token will last for any period of time.</span></span>  <span data-ttu-id="90a34-270">Os tokens de atualização podem ser invalidados a qualquer momento por vários motivos.</span><span class="sxs-lookup"><span data-stu-id="90a34-270">Refresh tokens can be invalidated at any moment in time for a variety of reasons.</span></span>  <span data-ttu-id="90a34-271">A única maneira de o aplicativo saber se um token de atualização é válido, é tentando resgatá-lo fazendo uma solicitação de token ao ponto de extremidade do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="90a34-271">The only way for your app to know if a refresh token is valid is to attempt to redeem it by making a token request to Azure AD token endpoint.</span></span>

<span data-ttu-id="90a34-272">Ao resgatar um token de atualização para um novo token de acesso, você receberá um novo token de atualização na resposta de token.</span><span class="sxs-lookup"><span data-stu-id="90a34-272">When you redeem a refresh token for a new access token, you will receive a new refresh token in the token response.</span></span>  <span data-ttu-id="90a34-273">É preciso salvar o token de atualização recentemente emitido, substituindo o que você usou na solicitação.</span><span class="sxs-lookup"><span data-stu-id="90a34-273">You should save the newly issued refresh token, replacing the one you used in the request.</span></span>  <span data-ttu-id="90a34-274">Isso garantirá que seus tokens de atualização permanecem válidos pelo máximo tempo possível.</span><span class="sxs-lookup"><span data-stu-id="90a34-274">This will guarantee that your refresh tokens remain valid for as long as possible.</span></span>

## <a name="validating-tokens"></a><span data-ttu-id="90a34-275">Validando tokens</span><span class="sxs-lookup"><span data-stu-id="90a34-275">Validating tokens</span></span>

<span data-ttu-id="90a34-276">Para validar um id_token ou access_token, o aplicativo deverá validar a assinatura e as declarações do token.</span><span class="sxs-lookup"><span data-stu-id="90a34-276">In order to validate an id_token or an access_token, your app should validate both the token's signature and the claims.</span></span> <span data-ttu-id="90a34-277">Para validar os tokens de acesso, o aplicativo também deve validar o emissor, o público-alvo e os tokens de assinatura.</span><span class="sxs-lookup"><span data-stu-id="90a34-277">In order to validate access tokens, your app should also validate the issuer, the audience and the signing tokens.</span></span> <span data-ttu-id="90a34-278">Estes precisam ser validados em relação aos valores no documento de descoberta OpenID.</span><span class="sxs-lookup"><span data-stu-id="90a34-278">These need to be validated against the values in the OpenID discovery document.</span></span> <span data-ttu-id="90a34-279">Por exemplo, a versão independente de locatário do documento está localizada em [https://login.microsoftonline.com/common/.well-known/openid-configuration](https://login.microsoftonline.com/common/.well-known/openid-configuration).</span><span class="sxs-lookup"><span data-stu-id="90a34-279">For example, the tenant independent version of the document is located at [https://login.microsoftonline.com/common/.well-known/openid-configuration](https://login.microsoftonline.com/common/.well-known/openid-configuration).</span></span> <span data-ttu-id="90a34-280">O middleware de Azure AD tem recursos internos para validar os tokens de acesso e você pode navegar pelas nossas [amostras](https://docs.microsoft.com/en-us/azure/active-directory/active-directory-code-samples) para encontrar um no idioma de sua escolha.</span><span class="sxs-lookup"><span data-stu-id="90a34-280">Azure AD middleware has built-in capabilities for validating access tokens, and you can browse through our [samples](https://docs.microsoft.com/en-us/azure/active-directory/active-directory-code-samples) to find one in the language of your choice.</span></span> <span data-ttu-id="90a34-281">Para obter mais informações sobre como validar explicitamente um token JWT, consulte a [amostra de validação manual de JWT](https://github.com/Azure-Samples/active-directory-dotnet-webapi-manual-jwt-validation).</span><span class="sxs-lookup"><span data-stu-id="90a34-281">For more information on how to explicitly validate a JWT token, please see the [manual JWT validation sample](https://github.com/Azure-Samples/active-directory-dotnet-webapi-manual-jwt-validation).</span></span>  

<span data-ttu-id="90a34-282">Fornecemos bibliotecas e códigos de exemplo que mostram como tratar com facilidade a validação do token. As informações abaixo são fornecidas simplesmente para aqueles que desejam entender o processo subjacente.</span><span class="sxs-lookup"><span data-stu-id="90a34-282">We provide libraries and code samples that show how to easily handle token validation - the below information is simply provided for those who wish to understand the underlying process.</span></span>  <span data-ttu-id="90a34-283">Também há várias bibliotecas de software livre de terceiros disponíveis para validação de JWT; há pelo menos uma opção para quase todos os idiomas e plataformas.</span><span class="sxs-lookup"><span data-stu-id="90a34-283">There are also several third party open source libraries available for JWT validation - there is at least one option for almost every platform and language out there.</span></span> <span data-ttu-id="90a34-284">Para saber mais sobre bibliotecas de autenticação e exemplos de código do AD do Azure, veja [bibliotecas de autenticação do AD do Azure](active-directory-authentication-libraries.md).</span><span class="sxs-lookup"><span data-stu-id="90a34-284">For more information about Azure AD authentication libraries and code samples, please see [Azure AD authentication libraries](active-directory-authentication-libraries.md).</span></span>

#### <a name="validating-the-signature"></a><span data-ttu-id="90a34-285">Validação da assinatura</span><span class="sxs-lookup"><span data-stu-id="90a34-285">Validating the signature</span></span>

<span data-ttu-id="90a34-286">Um JWT contém três segmentos, que são separados pelo caractere `.` .</span><span class="sxs-lookup"><span data-stu-id="90a34-286">A JWT contains three segments, which are separated by the `.` character.</span></span>  <span data-ttu-id="90a34-287">O primeiro segmento é conhecido como o **cabeçalho**, o segundo como o **corpo** e o terceiro como a **assinatura**.</span><span class="sxs-lookup"><span data-stu-id="90a34-287">The first segment is known as the **header**, the second as the **body**, and the third as the **signature**.</span></span>  <span data-ttu-id="90a34-288">O segmento de assinatura pode ser usado para validar a autenticidade do token, de modo que seu aplicativo possa confiar nele.</span><span class="sxs-lookup"><span data-stu-id="90a34-288">The signature segment can be used to validate the authenticity of the token so that it can be trusted by your app.</span></span>

<span data-ttu-id="90a34-289">Os tokens emitidos pelo Azure AD são assinados usando algoritmos de criptografia assimétrica padrão do setor, como o RSA 256.</span><span class="sxs-lookup"><span data-stu-id="90a34-289">Tokens issued by Azure AD are signed using industry standard asymmetric encryption algorithms, such as RSA 256.</span></span> <span data-ttu-id="90a34-290">O cabeçalho do JWT contém informações sobre o método de criptografia e a chave usados para assinar o token:</span><span class="sxs-lookup"><span data-stu-id="90a34-290">The header of the JWT contains information about the key and encryption method used to sign the token:</span></span>

```
{
  "typ": "JWT",
  "alg": "RS256",
  "x5t": "kriMPdmBvx68skT8-mPAB3BseeA"
}
```

<span data-ttu-id="90a34-291">A declaração `alg` indica o algoritmo que foi usado para assinar o token, enquanto a declaração `x5t` indica a chave pública privada que foi usada para assinar o token.</span><span class="sxs-lookup"><span data-stu-id="90a34-291">The `alg` claim indicates the algorithm that was used to sign the token, while the `x5t` claim indicates the particular public key that was used to sign the token.</span></span>

<span data-ttu-id="90a34-292">Em qualquer ponto no tempo, o AD do Azure pode assinar um id_token usando qualquer um de um determinado conjunto de pares de chaves públicas-privadas.</span><span class="sxs-lookup"><span data-stu-id="90a34-292">At any given point in time, Azure AD may sign an id_token using any one of a certain set of public-private key pairs.</span></span> <span data-ttu-id="90a34-293">O AD do Azure gira o possível conjunto de chaves em intervalos periódicos, de modo que o aplicativo deve ser escrito para tratar essas mudanças de chave automaticamente.</span><span class="sxs-lookup"><span data-stu-id="90a34-293">Azure AD rotates the possible set of keys on a periodic basis, so your app should be written to handle those key changes automatically.</span></span>  <span data-ttu-id="90a34-294">Uma frequência razoável para verificar se há atualizações para as chaves públicas usadas pelo Azure AD é a cada 24 horas.</span><span class="sxs-lookup"><span data-stu-id="90a34-294">A reasonable frequency to check for updates to the public keys used by Azure AD is every 24 hours.</span></span>

<span data-ttu-id="90a34-295">Você pode adquirir os dados de chave de assinatura necessários para validar a assinatura usando o documento de metadados do OpenID Connect localizado em:</span><span class="sxs-lookup"><span data-stu-id="90a34-295">You can acquire the signing key data necessary to validate the signature by using the OpenID Connect metadata document located at:</span></span>

```
https://login.microsoftonline.com/common/.well-known/openid-configuration
```

> [!TIP]
> <span data-ttu-id="90a34-296">Experimente essa URL em um navegador!</span><span class="sxs-lookup"><span data-stu-id="90a34-296">Try this URL in a browser!</span></span>
> 
> 

<span data-ttu-id="90a34-297">Esse documento de metadados é um objeto JSON que contém várias informações úteis, como o local dos vários pontos de extremidade exigidos para execução da autenticação do OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="90a34-297">This metadata document is a JSON object containing several useful pieces of information, such as the location of the various endpoints required for performing OpenID Connect authentication.</span></span>  

<span data-ttu-id="90a34-298">Ele também inclui um `jwks_uri`, que fornece o local do conjunto de chaves públicas usadas para assinar tokens.</span><span class="sxs-lookup"><span data-stu-id="90a34-298">It also includes a `jwks_uri`, which gives the location of the set of public keys used to sign tokens.</span></span>  <span data-ttu-id="90a34-299">O documento de JSON localizado no `jwks_uri` contém todas as informações de chave pública em uso naquele momento específico.</span><span class="sxs-lookup"><span data-stu-id="90a34-299">The JSON document located at the `jwks_uri` contains all of the public key information in use at that particular moment in time.</span></span>  <span data-ttu-id="90a34-300">Seu aplicativo pode usar a declaração `kid` no cabeçalho do JWT para selecionar qual chave pública neste documento foi usada para assinar um token específico.</span><span class="sxs-lookup"><span data-stu-id="90a34-300">Your app can use the `kid` claim in the JWT header to select which public key in this document has been used to sign a particular token.</span></span>  <span data-ttu-id="90a34-301">Assim, ele pode executar a validação da assinatura usando a chave pública correta e o algoritmo indicado.</span><span class="sxs-lookup"><span data-stu-id="90a34-301">It can then perform signature validation using the correct public key and the indicated algorithm.</span></span>

<span data-ttu-id="90a34-302">Executar a validação da assinatura está fora do escopo deste documento — há muitas bibliotecas de software livre disponíveis para ajudar você a fazer isso, caso seja necessário.</span><span class="sxs-lookup"><span data-stu-id="90a34-302">Performing signature validation is outside the scope of this document - there are many open source libraries available for helping you do so if necessary.</span></span>

#### <a name="validating-the-claims"></a><span data-ttu-id="90a34-303">Validação das declarações</span><span class="sxs-lookup"><span data-stu-id="90a34-303">Validating the claims</span></span>

<span data-ttu-id="90a34-304">Quando seu aplicativo recebe um token (um id_token na entrada do usuário, ou um token de acesso como um token de portador na solicitação HTTP), ele também deve executar algumas verificações em relação às declarações no token.</span><span class="sxs-lookup"><span data-stu-id="90a34-304">When your app receives a token (either an id_token upon user sign-in, or an access token as a bearer token in the HTTP request) it should also perform a few checks against the claims in the token.</span></span>  <span data-ttu-id="90a34-305">Elas incluem, mas sem limitação:</span><span class="sxs-lookup"><span data-stu-id="90a34-305">These include but are not limited to:</span></span>

* <span data-ttu-id="90a34-306">A declaração **Público-alvo** - para verificar se o token foi destinado a ser fornecido ao aplicativo.</span><span class="sxs-lookup"><span data-stu-id="90a34-306">The **Audience** claim - to verify that the token was intended to be given to your app.</span></span>
* <span data-ttu-id="90a34-307">As declarações **Não Antes de** e **Data de Expiração** - para verificar se o token não expirou.</span><span class="sxs-lookup"><span data-stu-id="90a34-307">The **Not Before** and **Expiration Time** claims - to verify that the token has not expired.</span></span>
* <span data-ttu-id="90a34-308">A declaração **Emissor** - para verificar se o token foi de fato emitido para o aplicativo pelo AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="90a34-308">The **Issuer** claim - to verify that the token was indeed issued to your app by Azure AD.</span></span>
* <span data-ttu-id="90a34-309">O **Nonce**: para reduzir o ataque de reprodução do token.</span><span class="sxs-lookup"><span data-stu-id="90a34-309">The **Nonce** -  to mitigate a token replay attack.</span></span>
* <span data-ttu-id="90a34-310">e mais...</span><span class="sxs-lookup"><span data-stu-id="90a34-310">and more...</span></span>

<span data-ttu-id="90a34-311">Para obter uma lista completa das validações de declaração que seu aplicativo deve executar, veja a [especificação do OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html#IDTokenValidation).</span><span class="sxs-lookup"><span data-stu-id="90a34-311">For a full list of claim validations your app should perform for ID Tokens, refer to the [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html#IDTokenValidation).</span></span> <span data-ttu-id="90a34-312">Detalhes dos valores esperados para essas declarações estão incluídos na seção [id_token section](#id-tokens) anterior.</span><span class="sxs-lookup"><span data-stu-id="90a34-312">Details of the expected values for these claims are included in the preceding [id_token section](#id-tokens) section.</span></span>

## <a name="sample-tokens"></a><span data-ttu-id="90a34-313">Tokens de exemplo</span><span class="sxs-lookup"><span data-stu-id="90a34-313">Sample Tokens</span></span>

<span data-ttu-id="90a34-314">Esta seção exibe exemplos de tokens SAML e JWT retornados pelo AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="90a34-314">This section displays samples of SAML and JWT tokens that Azure AD returns.</span></span> <span data-ttu-id="90a34-315">Esses exemplos permitem que você veja as declarações no contexto.</span><span class="sxs-lookup"><span data-stu-id="90a34-315">These samples let you see the claims in context.</span></span>

### <a name="saml-token"></a><span data-ttu-id="90a34-316">Token SAML</span><span class="sxs-lookup"><span data-stu-id="90a34-316">SAML Token</span></span>

<span data-ttu-id="90a34-317">Este é um exemplo de um token SAML típico.</span><span class="sxs-lookup"><span data-stu-id="90a34-317">This is a sample of a typical SAML token.</span></span>

    <?xml version="1.0" encoding="UTF-8"?>
    <t:RequestSecurityTokenResponse xmlns:t="http://schemas.xmlsoap.org/ws/2005/02/trust">
      <t:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">2014-12-24T05:15:47.060Z</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">2014-12-24T06:15:47.060Z</wsu:Expires>
      </t:Lifetime>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <EndpointReference xmlns="http://www.w3.org/2005/08/addressing">
          <Address>https://contoso.onmicrosoft.com/MyWebApp</Address>
        </EndpointReference>
      </wsp:AppliesTo>
      <t:RequestedSecurityToken>
        <Assertion xmlns="urn:oasis:names:tc:SAML:2.0:assertion" ID="_3ef08993-846b-41de-99df-b7f3ff77671b" IssueInstant="2014-12-24T05:20:47.060Z" Version="2.0">
          <Issuer>https://sts.windows.net/b9411234-09af-49c2-b0c3-653adc1f376e/</Issuer>
          <ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
            <ds:SignedInfo>
              <ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
              <ds:SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256" />
              <ds:Reference URI="#_3ef08993-846b-41de-99df-b7f3ff77671b">
                <ds:Transforms>
                  <ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature" />
                  <ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
                </ds:Transforms>
                <ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256" />
                <ds:DigestValue>cV1J580U1pD24hEyGuAxrbtgROVyghCqI32UkER/nDY=</ds:DigestValue>
              </ds:Reference>
            </ds:SignedInfo>
            <ds:SignatureValue>j+zPf6mti8Rq4Kyw2NU2nnu0pbJU1z5bR/zDaKaO7FCTdmjUzAvIVfF8pspVR6CbzcYM3HOAmLhuWmBkAAk6qQUBmKsw+XlmF/pB/ivJFdgZSLrtlBs1P/WBV3t04x6fRW4FcIDzh8KhctzJZfS5wGCfYw95er7WJxJi0nU41d7j5HRDidBoXgP755jQu2ZER7wOYZr6ff+ha+/Aj3UMw+8ZtC+WCJC3yyENHDAnp2RfgdElJal68enn668fk8pBDjKDGzbNBO6qBgFPaBT65YvE/tkEmrUxdWkmUKv3y7JWzUYNMD9oUlut93UTyTAIGOs5fvP9ZfK2vNeMVJW7Xg==</ds:SignatureValue>
            <KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#">
              <X509Data>
                <X509Certificate>MIIDPjCCAabcAwIBAgIQsRiM0jheFZhKk49YD0SK1TAJBgUrDgMCHQUAMC0xKzApBgNVBAMTImFjY291bnRzLmFjY2Vzc2NvbnRyb2wud2luZG93cy5uZXQwHhcNMTQwMTAxMDcwMDAwWhcNMTYwMTAxMDcwMDAwWjAtMSswKQYDVQQDEyJhY2NvdW50cy5hY2Nlc3Njb250cm9sLndpbmRvd3MubmV0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAkSCWg6q9iYxvJE2NIhSyOiKvqoWCO2GFipgH0sTSAs5FalHQosk9ZNTztX0ywS/AHsBeQPqYygfYVJL6/EgzVuwRk5txr9e3n1uml94fLyq/AXbwo9yAduf4dCHTP8CWR1dnDR+Qnz/4PYlWVEuuHHONOw/blbfdMjhY+C/BYM2E3pRxbohBb3x//CfueV7ddz2LYiH3wjz0QS/7kjPiNCsXcNyKQEOTkbHFi3mu0u13SQwNddhcynd/GTgWN8A+6SN1r4hzpjFKFLbZnBt77ACSiYx+IHK4Mp+NaVEi5wQtSsjQtI++XsokxRDqYLwus1I1SihgbV/STTg5enufuwIDAQABo2IwYDBeBgNVHQEEVzBVgBDLebM6bK3BjWGqIBrBNFeNoS8wLTErMCkGA1UEAxMiYWNjb3VudHMuYWNjZXNzY29udHJvbC53aW5kb3dzLm5ldIIQsRiM0jheFZhKk49YD0SK1TAJBgUrDgMCHQUAA4IBAQCJ4JApryF77EKC4zF5bUaBLQHQ1PNtA1uMDbdNVGKCmSp8M65b8h0NwlIjGGGy/unK8P6jWFdm5IlZ0YPTOgzcRZguXDPj7ajyvlVEQ2K2ICvTYiRQqrOhEhZMSSZsTKXFVwNfW6ADDkN3bvVOVbtpty+nBY5UqnI7xbcoHLZ4wYD251uj5+lo13YLnsVrmQ16NCBYq2nQFNPuNJw6t3XUbwBHXpF46aLT1/eGf/7Xx6iy8yPJX4DyrpFTutDz882RWofGEO5t4Cw+zZg70dJ/hH/ODYRMorfXEW+8uKmXMKmX2wyxMKvfiPbTy5LmAU8Jvjs2tLg4rOBcXWLAIarZ</X509Certificate>
              </X509Data>
            </KeyInfo>
          </ds:Signature>
          <Subject>
            <NameID Format="urn:oasis:names:tc:SAML:2.0:nameid-format:persistent">m_H3naDei2LNxUmEcWd0BZlNi_jVET1pMLR6iQSuYmo</NameID>
            <SubjectConfirmation Method="urn:oasis:names:tc:SAML:2.0:cm:bearer" />
          </Subject>
          <Conditions NotBefore="2014-12-24T05:15:47.060Z" NotOnOrAfter="2014-12-24T06:15:47.060Z">
            <AudienceRestriction>
              <Audience>https://contoso.onmicrosoft.com/MyWebApp</Audience>
            </AudienceRestriction>
          </Conditions>
          <AttributeStatement>
            <Attribute Name="http://schemas.microsoft.com/identity/claims/objectidentifier">
              <AttributeValue>a1addde8-e4f9-4571-ad93-3059e3750d23</AttributeValue>
            </Attribute>
            <Attribute Name="http://schemas.microsoft.com/identity/claims/tenantid">
              <AttributeValue>b9411234-09af-49c2-b0c3-653adc1f376e</AttributeValue>
            </Attribute>
            <Attribute Name="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name">
              <AttributeValue>sample.admin@contoso.onmicrosoft.com</AttributeValue>
            </Attribute>
            <Attribute Name="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname">
              <AttributeValue>Admin</AttributeValue>
            </Attribute>
            <Attribute Name="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname">
              <AttributeValue>Sample</AttributeValue>
            </Attribute>
            <Attribute Name="http://schemas.microsoft.com/ws/2008/06/identity/claims/groups">
              <AttributeValue>5581e43f-6096-41d4-8ffa-04e560bab39d</AttributeValue>
              <AttributeValue>07dd8a89-bf6d-4e81-8844-230b77145381</AttributeValue>
              <AttributeValue>0e129f4g-6b0a-4944-982d-f776000632af</AttributeValue>
              <AttributeValue>3ee07328-52ef-4739-a89b-109708c22fb5</AttributeValue>
              <AttributeValue>329k14b3-1851-4b94-947f-9a4dacb595f4</AttributeValue>
              <AttributeValue>6e32c650-9b0a-4491-b429-6c60d2ca9a42</AttributeValue>
              <AttributeValue>f3a169a7-9a58-4e8f-9d47-b70029v07424</AttributeValue>
              <AttributeValue>8e2c86b2-b1ad-476d-9574-544d155aa6ff</AttributeValue>
              <AttributeValue>1bf80264-ff24-4866-b22c-6212e5b9a847</AttributeValue>
              <AttributeValue>4075f9c3-072d-4c32-b542-03e6bc678f3e</AttributeValue>
              <AttributeValue>76f80527-f2cd-46f4-8c52-8jvd8bc749b1</AttributeValue>
              <AttributeValue>0ba31460-44d0-42b5-b90c-47b3fcc48e35</AttributeValue>
              <AttributeValue>edd41703-8652-4948-94a7-2d917bba7667</AttributeValue>
            </Attribute>
            <Attribute Name="http://schemas.microsoft.com/identity/claims/identityprovider">
              <AttributeValue>https://sts.windows.net/b9411234-09af-49c2-b0c3-653adc1f376e/</AttributeValue>
            </Attribute>
          </AttributeStatement>
          <AuthnStatement AuthnInstant="2014-12-23T18:51:11.000Z">
            <AuthnContext>
              <AuthnContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:Password</AuthnContextClassRef>
            </AuthnContext>
          </AuthnStatement>
        </Assertion>
      </t:RequestedSecurityToken>
      <t:RequestedAttachedReference>
        <SecurityTokenReference xmlns="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:d3p1="http://docs.oasis-open.org/wss/oasis-wss-wssecurity-secext-1.1.xsd" d3p1:TokenType="http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0">
          <KeyIdentifier ValueType="http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLID">_3ef08993-846b-41de-99df-b7f3ff77671b</KeyIdentifier>
        </SecurityTokenReference>
      </t:RequestedAttachedReference>
      <t:RequestedUnattachedReference>
        <SecurityTokenReference xmlns="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:d3p1="http://docs.oasis-open.org/wss/oasis-wss-wssecurity-secext-1.1.xsd" d3p1:TokenType="http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0">
          <KeyIdentifier ValueType="http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLID">_3ef08993-846b-41de-99df-b7f3ff77671b</KeyIdentifier>
        </SecurityTokenReference>
      </t:RequestedUnattachedReference>
      <t:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</t:TokenType>
      <t:RequestType>http://schemas.xmlsoap.org/ws/2005/02/trust/Issue</t:RequestType>
      <t:KeyType>http://schemas.xmlsoap.org/ws/2005/05/identity/NoProofKey</t:KeyType>
    </t:RequestSecurityTokenResponse>

### <a name="jwt-token---user-impersonation"></a><span data-ttu-id="90a34-318">Token JWT - representação de usuário</span><span class="sxs-lookup"><span data-stu-id="90a34-318">JWT Token - User Impersonation</span></span>
<span data-ttu-id="90a34-319">Este é um exemplo de um típico JWT (token Web JSON) usado em um fluxo de concessão de código de autorização.</span><span class="sxs-lookup"><span data-stu-id="90a34-319">This is a sample of a typical JSON web token (JWT) used in an authorization code grant flow.</span></span>
<span data-ttu-id="90a34-320">Além de declarações, o token inclui um número de versão em ver; **inclui** também **appidacr**, a referência de classe de contexto de autenticação que indica como o cliente foi autenticado.</span><span class="sxs-lookup"><span data-stu-id="90a34-320">In addition to claims, the token includes a version number in **ver** and **appidacr**, the authentication context class reference, which indicates how the client was authenticated.</span></span> <span data-ttu-id="90a34-321">Para um cliente público, o valor é 0.</span><span class="sxs-lookup"><span data-stu-id="90a34-321">For a public client, the value is 0.</span></span> <span data-ttu-id="90a34-322">Se uma ID de cliente ou um segredo do cliente tiver sido usado, o valor será 1.</span><span class="sxs-lookup"><span data-stu-id="90a34-322">If a client ID or client secret was used, the value is 1.</span></span>

    {
     typ: "JWT",
     alg: "RS256",
     x5t: "kriMPdmBvx68skT8-mPAB3BseeA"
    }.
    {
     aud: "https://contoso.onmicrosoft.com/scratchservice",
     iss: "https://sts.windows.net/b9411234-09af-49c2-b0c3-653adc1f376e/",
     iat: 1416968588,
     nbf: 1416968588,
     exp: 1416972488,
     ver: "1.0",
     tid: "b9411234-09af-49c2-b0c3-653adc1f376e",
     amr: [
      "pwd"
     ],
     roles: [
      "Admin"
     ],
     oid: "6526e123-0ff9-4fec-ae64-a8d5a77cf287",
     upn: "sample.user@contoso.onmicrosoft.com",
     unique_name: "sample.user@contoso.onmicrosoft.com",
     sub: "yf8C5e_VRkR1egGxJSDt5_olDFay6L5ilBA81hZhQEI",
     family_name: "User",
     given_name: "Sample",
     groups: [
      "0e129f6b-6b0a-4944-982d-f776000632af",
      "323b13b3-1851-4b94-947f-9a4dacb595f4",
      "6e32c250-9b0a-4491-b429-6c60d2ca9a42",
      "f3a161a7-9a58-4e8f-9d47-b70022a07424",
      "8d4c81b2-b1ad-476d-9574-544d155aa6ff",
      "1bf80164-ff24-4866-b19c-6212e5b9a847",
      "76f80127-f2cd-46f4-8c52-8edd8bc749b1",
      "0ba27160-44d0-42b5-b90c-47b3fcc48e35"
     ],
     appid: "b075ddef-0efa-123b-997b-de1337c29185",
     appidacr: "1",
     scp: "user_impersonation",
     acr: "1"
    }.

## <a name="related-content"></a><span data-ttu-id="90a34-323">Conteúdo relacionado</span><span class="sxs-lookup"><span data-stu-id="90a34-323">Related content</span></span>
* <span data-ttu-id="90a34-324">Consulte as [Operações de política](https://msdn.microsoft.com/library/azure/ad/graph/api/policy-operations) do Graph do AD do Azure e o [Entidade de política](https://msdn.microsoft.com/library/azure/ad/graph/api/entity-and-complex-type-reference#policy-entity), para saber mais sobre o gerenciamento de políticas de tempo de vida do token por meio da API do Graph do AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="90a34-324">See the Azure AD Graph [Policy operations](https://msdn.microsoft.com/library/azure/ad/graph/api/policy-operations) and the [Policy entity](https://msdn.microsoft.com/library/azure/ad/graph/api/entity-and-complex-type-reference#policy-entity), to learn more about managing token lifetime policy via the Azure AD Graph API.</span></span>
* <span data-ttu-id="90a34-325">Para obter mais informações e exemplos sobre como gerenciar as políticas por meio de cmdlets do PowerShell, incluindo exemplos, consulte [Tempos de vida de token configuráveis no AD do Azure](../active-directory-configurable-token-lifetimes.md).</span><span class="sxs-lookup"><span data-stu-id="90a34-325">For more information and samples on managing policies via PowerShell cmdlets, including samples, see [Configurable token lifetimes in Azure AD](../active-directory-configurable-token-lifetimes.md).</span></span> 
