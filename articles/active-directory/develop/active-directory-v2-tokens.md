---
title: "Referência de tokens do Azure Active Directory v2.0 | Microsoft Docs"
description: "Os tipos de tokens e declarações emitidos pelo ponto de extremidade v2.0 do Azure AD"
services: active-directory
documentationcenter: 
author: dstrockis
manager: mbaldwin
editor: 
ms.assetid: dc58c282-9684-4b38-b151-f3e079f034fd
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/07/2017
ms.author: dastrock
ms.custom: aaddev
ms.openlocfilehash: a3611a239fe044cf1b953220a6e96b0e101f47a4
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/11/2017
---
# <a name="azure-active-directory-v20-tokens-reference"></a><span data-ttu-id="cd289-103">Referência de tokens do Azure Active Directory v2.0</span><span class="sxs-lookup"><span data-stu-id="cd289-103">Azure Active Directory v2.0 tokens reference</span></span>
<span data-ttu-id="cd289-104">O ponto de extremidade do Azure AD (Azure Active Directory) v 2.0 emite vários tipos de tokens de segurança em cada [fluxo de autenticação](active-directory-v2-flows.md).</span><span class="sxs-lookup"><span data-stu-id="cd289-104">The Azure Active Directory (Azure AD) v2.0 endpoint emits several types of security tokens in each [authentication flow](active-directory-v2-flows.md).</span></span> <span data-ttu-id="cd289-105">Esta referência descreve o formato, as características de segurança e o conteúdo de cada tipo de token.</span><span class="sxs-lookup"><span data-stu-id="cd289-105">This reference describes the format, security characteristics, and contents of each type of token.</span></span>

> [!NOTE]
> <span data-ttu-id="cd289-106">O ponto de extremidade v2.0 não dá suporte a todos os cenários e recursos do Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="cd289-106">The v2.0 endpoint does not support all Azure Active Directory scenarios and features.</span></span> <span data-ttu-id="cd289-107">Para determinar se você deve usar o ponto de extremidade v2.0, leia sobre as [limitações da v2.0](active-directory-v2-limitations.md).</span><span class="sxs-lookup"><span data-stu-id="cd289-107">To determine whether you should use the v2.0 endpoint, read about [v2.0 limitations](active-directory-v2-limitations.md).</span></span>
>
>

## <a name="types-of-tokens"></a><span data-ttu-id="cd289-108">Tipos de tokens</span><span class="sxs-lookup"><span data-stu-id="cd289-108">Types of tokens</span></span>
<span data-ttu-id="cd289-109">O ponto de extremidade v2.0 dá suporte ao [protocolo de autorização do OAuth 2.0](active-directory-v2-protocols.md), que usa tokens de acesso e de atualização.</span><span class="sxs-lookup"><span data-stu-id="cd289-109">The v2.0 endpoint supports the [OAuth 2.0 authorization protocol](active-directory-v2-protocols.md), which uses access tokens and refresh tokens.</span></span> <span data-ttu-id="cd289-110">O ponto de extremidade v 2.0 também dá suporte à autenticação e à entrada via [OpenID Connect](active-directory-v2-protocols.md).</span><span class="sxs-lookup"><span data-stu-id="cd289-110">The v2.0 endpoint also supports authentication and sign-in via [OpenID Connect](active-directory-v2-protocols.md).</span></span> <span data-ttu-id="cd289-111">O OpenID Connect introduz um terceiro tipo de token, o token de ID.</span><span class="sxs-lookup"><span data-stu-id="cd289-111">OpenID Connect introduces a third type of token, the ID token.</span></span> <span data-ttu-id="cd289-112">Cada um desses tokens é representado como um token de *portador*.</span><span class="sxs-lookup"><span data-stu-id="cd289-112">Each of these tokens is represented as a *bearer* token.</span></span>

<span data-ttu-id="cd289-113">Um token de portador é um token de segurança leve que concede ao portador acesso a um recurso protegido.</span><span class="sxs-lookup"><span data-stu-id="cd289-113">A bearer token is a lightweight security token that grants the bearer access to a protected resource.</span></span> <span data-ttu-id="cd289-114">O portador é qualquer parte que possa apresentar o token.</span><span class="sxs-lookup"><span data-stu-id="cd289-114">The bearer is any party that can present the token.</span></span> <span data-ttu-id="cd289-115">Embora uma parte deva se autenticar no Azure AD para receber o token de portador, se não forem tomadas medidas para proteger o token durante a transmissão e o armazenamento, ele poderá ser interceptado e usado por uma parte não planejada.</span><span class="sxs-lookup"><span data-stu-id="cd289-115">Although a party must authenticate with Azure AD to receive the bearer token, if steps are not taken to secure the token during transmission and storage, it can be intercepted and used by an unintended party.</span></span> <span data-ttu-id="cd289-116">Alguns tokens de segurança têm um mecanismo interno para evitar que partes não autorizadas os utilizem, mas os tokens de portador não têm isso.</span><span class="sxs-lookup"><span data-stu-id="cd289-116">Some security tokens have a built-in mechanism to prevent unauthorized parties from using them, but bearer tokens do not.</span></span> <span data-ttu-id="cd289-117">Os tokens de portador devem ser transportados em um canal seguro, como segurança da camada de transporte (HTTPS).</span><span class="sxs-lookup"><span data-stu-id="cd289-117">Bearer tokens must be transported in a secure channel such as transport layer security (HTTPS).</span></span> <span data-ttu-id="cd289-118">Se um token de portador for transmitido sem esse tipo de segurança, um terceiro mal-intencionado poderá usar um ataque"man-in-the-middle" para adquirir o token e usá-lo para acesso não autorizado a um recurso protegido.</span><span class="sxs-lookup"><span data-stu-id="cd289-118">If a bearer token is transmitted without this type of security, a malicious party could use a "man-in-the-middle attack" to acquire the token and use it for unauthorized access to a protected resource.</span></span> <span data-ttu-id="cd289-119">Os mesmos princípios de segurança se aplicam ao armazenar ou manter em cache tokens de portador para uso posterior.</span><span class="sxs-lookup"><span data-stu-id="cd289-119">The same security principles apply when storing or caching bearer tokens for later use.</span></span> <span data-ttu-id="cd289-120">Sempre verifique se o aplicativo transmite e armazena tokens de portador com segurança.</span><span class="sxs-lookup"><span data-stu-id="cd289-120">Always ensure that your app securely transmits and stores bearer tokens.</span></span> <span data-ttu-id="cd289-121">Para obter mais considerações de segurança sobre tokens de portador, confira [RFC 6750 seção 5](http://tools.ietf.org/html/rfc6750).</span><span class="sxs-lookup"><span data-stu-id="cd289-121">For more security considerations for bearer tokens, see [RFC 6750 Section 5](http://tools.ietf.org/html/rfc6750).</span></span>

<span data-ttu-id="cd289-122">Muitos dos tokens emitidos pelo ponto de extremidade v2.0 são implementados como Tokens Web JSON (JWTs).</span><span class="sxs-lookup"><span data-stu-id="cd289-122">Many of the tokens issued by the v2.0 endpoint are implemented as JSON Web Tokens (JWTs).</span></span> <span data-ttu-id="cd289-123">JWT é uma maneira compacta e protegida por URL para transferir informações entre duas partes.</span><span class="sxs-lookup"><span data-stu-id="cd289-123">A JWT is a compact, URL-safe way to transfer information between two parties.</span></span> <span data-ttu-id="cd289-124">As informações em um JWT são chamadas de *declaração*.</span><span class="sxs-lookup"><span data-stu-id="cd289-124">The information in a JWT is called a *claim*.</span></span> <span data-ttu-id="cd289-125">É uma asserção de informações sobre o portador e a entidade do token.</span><span class="sxs-lookup"><span data-stu-id="cd289-125">It's an assertion of information about the bearer and subject of the token.</span></span> <span data-ttu-id="cd289-126">As declarações JWT são objetos JSON (JavaScript Object Notation) que são codificados e serializados para transmissão.</span><span class="sxs-lookup"><span data-stu-id="cd289-126">The claims in a JWT are JavaScript Object Notation (JSON) objects that are encoded and serialized for transmission.</span></span> <span data-ttu-id="cd289-127">Como os JWTs emitidos pelo ponto de extremidade v2.0 são assinados, mas não criptografados, você pode inspecionar facilmente o conteúdo de um JWT para fins de depuração.</span><span class="sxs-lookup"><span data-stu-id="cd289-127">Because the JWTs issued by the v2.0 endpoint are signed but not encrypted, you can easily inspect the contents of a JWT for debugging purposes.</span></span> <span data-ttu-id="cd289-128">Para obter mais informações sobre JWTs, confira a [especificação JWT](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html).</span><span class="sxs-lookup"><span data-stu-id="cd289-128">For more information about JWTs, see the [JWT specification](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html).</span></span>

### <a name="id-tokens"></a><span data-ttu-id="cd289-129">Tokens de ID</span><span class="sxs-lookup"><span data-stu-id="cd289-129">ID tokens</span></span>
<span data-ttu-id="cd289-130">Um token de ID é uma forma de token de segurança de entrada que o aplicativo recebe quando ele executa a autenticação usando [OpenID Connect](active-directory-v2-protocols.md).</span><span class="sxs-lookup"><span data-stu-id="cd289-130">An ID token is a form of sign-in security token that your app receives when it performs authentication by using [OpenID Connect](active-directory-v2-protocols.md).</span></span> <span data-ttu-id="cd289-131">Tokens de ID são representadas como [JWTs](#types-of-tokens) e contêm declarações que você pode usar para conectar o usuário ao aplicativo.</span><span class="sxs-lookup"><span data-stu-id="cd289-131">ID tokens are represented as [JWTs](#types-of-tokens), and they contain claims that you can use to sign the user in to your app.</span></span> <span data-ttu-id="cd289-132">Você pode usar as declarações em um token de ID de várias maneiras.</span><span class="sxs-lookup"><span data-stu-id="cd289-132">You can use the claims in an ID token in various ways.</span></span> <span data-ttu-id="cd289-133">Normalmente, os administradores usam tokens de ID para exibir informações de conta ou para tomar decisões de controle de acesso em um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="cd289-133">Typically, admins use ID tokens to display account information or to make access control decisions in an app.</span></span> <span data-ttu-id="cd289-134">O ponto de extremidade v2.0 emitirá somente um tipo de token de ID, que tem um conjunto consistente de declarações, independentemente do tipo de usuário conectado.</span><span class="sxs-lookup"><span data-stu-id="cd289-134">The v2.0 endpoint issues only one type of ID token, which has a consistent set of claims, regardless of the type of user that is signed in.</span></span> <span data-ttu-id="cd289-135">O formato e o conteúdo de tokens de ID são os mesmos para usuários de contas pessoais da Microsoft e para contas corporativas ou de estudante.</span><span class="sxs-lookup"><span data-stu-id="cd289-135">The format and content of ID tokens are the same for personal Microsoft account users and for work or school accounts.</span></span>

<span data-ttu-id="cd289-136">Atualmente, os tokens de ID são assinados, mas não criptografados.</span><span class="sxs-lookup"><span data-stu-id="cd289-136">Currently, ID tokens are signed but not encrypted.</span></span> <span data-ttu-id="cd289-137">Quando o aplicativo recebe um token de ID, ele deve [validar a assinatura](#validating-tokens) para comprovar a autenticidade do token e validar algumas declarações no token para comprovar sua validade.</span><span class="sxs-lookup"><span data-stu-id="cd289-137">When your app receives an ID token, it must [validate the signature](#validating-tokens) to prove the token's authenticity and validate a few claims in the token to prove its validity.</span></span> <span data-ttu-id="cd289-138">As declarações validadas por um aplicativo variam dependendo dos requisitos do cenário, mas o aplicativo deve executar algumas [validações de declaração comuns](#validating-tokens) em cada cenário.</span><span class="sxs-lookup"><span data-stu-id="cd289-138">The claims validated by an app vary depending on scenario requirements, but your app must perform some [common claim validations](#validating-tokens) in every scenario.</span></span>

<span data-ttu-id="cd289-139">Fornecemos os detalhes completos sobre declarações em tokens de ID nas seções a seguir, além de um token de ID de exemplo.</span><span class="sxs-lookup"><span data-stu-id="cd289-139">We give you the full details about claims in ID tokens in the following sections, in addition to a sample ID token.</span></span> <span data-ttu-id="cd289-140">Observe que as declarações em tokens de ID não são retornadas em uma ordem específica.</span><span class="sxs-lookup"><span data-stu-id="cd289-140">Note that claims in ID tokens are not returned in a specific order.</span></span> <span data-ttu-id="cd289-141">Além disso, novas declarações podem ser introduzidas em tokens de ID a qualquer momento.</span><span class="sxs-lookup"><span data-stu-id="cd289-141">Also, new claims can be introduced into ID tokens at any time.</span></span> <span data-ttu-id="cd289-142">O aplicativo não deve ser interrompido quando novas declarações são introduzidas.</span><span class="sxs-lookup"><span data-stu-id="cd289-142">Your app should not break when new claims are introduced.</span></span> <span data-ttu-id="cd289-143">A lista a seguir inclui as declarações que o aplicativo pode interpretar atualmente de forma confiável.</span><span class="sxs-lookup"><span data-stu-id="cd289-143">The following list includes the claims that your app currently can reliably interpret.</span></span> <span data-ttu-id="cd289-144">Você pode encontrar mais detalhes na [especificação OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html).</span><span class="sxs-lookup"><span data-stu-id="cd289-144">You can find more details in the [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span></span>

#### <a name="sample-id-token"></a><span data-ttu-id="cd289-145">Token de ID de exemplo</span><span class="sxs-lookup"><span data-stu-id="cd289-145">Sample ID token</span></span>
```
eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6Ik1uQ19WWmNBVGZNNXBPWWlKSE1iYTlnb0VLWSJ9.eyJhdWQiOiI2NzMxZGU3Ni0xNGE2LTQ5YWUtOTdiYy02ZWJhNjkxNDM5MWUiLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vYjk0MTk4MTgtMDlhZi00OWMyLWIwYzMtNjUzYWRjMWYzNzZlL3YyLjAiLCJpYXQiOjE0NTIyODUzMzEsIm5iZiI6MTQ1MjI4NTMzMSwiZXhwIjoxNDUyMjg5MjMxLCJuYW1lIjoiQmFiZSBSdXRoIiwibm9uY2UiOiIxMjM0NSIsIm9pZCI6ImExZGJkZGU4LWU0ZjktNDU3MS1hZDkzLTMwNTllMzc1MGQyMyIsInByZWZlcnJlZF91c2VybmFtZSI6InRoZWdyZWF0YmFtYmlub0BueXkub25taWNyb3NvZnQuY29tIiwic3ViIjoiTUY0Zi1nZ1dNRWppMTJLeW5KVU5RWnBoYVVUdkxjUXVnNWpkRjJubDAxUSIsInRpZCI6ImI5NDE5ODE4LTA5YWYtNDljMi1iMGMzLTY1M2FkYzFmMzc2ZSIsInZlciI6IjIuMCJ9.p_rYdrtJ1oCmgDBggNHB9O38KTnLCMGbMDODdirdmZbmJcTHiZDdtTc-hguu3krhbtOsoYM2HJeZM3Wsbp_YcfSKDY--X_NobMNsxbT7bqZHxDnA2jTMyrmt5v2EKUnEeVtSiJXyO3JWUq9R0dO-m4o9_8jGP6zHtR62zLaotTBYHmgeKpZgTFB9WtUq8DVdyMn_HSvQEfz-LWqckbcTwM_9RNKoGRVk38KChVJo4z5LkksYRarDo8QgQ7xEKmYmPvRr_I7gvM2bmlZQds2OeqWLB1NSNbFZqyFOCgYn3bAQ-nEQSKwBaA36jYGPOVG2r2Qv1uKcpSOxzxaQybzYpQ
```

> [!TIP]
> <span data-ttu-id="cd289-146">Para praticar, para inspecionar as declarações no token de ID de exemplo, cole o token de ID de exemplo em [calebb.net](http://calebb.net/).</span><span class="sxs-lookup"><span data-stu-id="cd289-146">For practice, to inspect the claims in the sample ID token, paste the sample ID token into [calebb.net](http://calebb.net/).</span></span>
>
>

#### <a name="claims-in-id-tokens"></a><span data-ttu-id="cd289-147">Declarações em tokens de ID</span><span class="sxs-lookup"><span data-stu-id="cd289-147">Claims in ID tokens</span></span>
| <span data-ttu-id="cd289-148">Nome</span><span class="sxs-lookup"><span data-stu-id="cd289-148">Name</span></span> | <span data-ttu-id="cd289-149">Declaração</span><span class="sxs-lookup"><span data-stu-id="cd289-149">Claim</span></span> | <span data-ttu-id="cd289-150">Valor de exemplo</span><span class="sxs-lookup"><span data-stu-id="cd289-150">Example value</span></span> | <span data-ttu-id="cd289-151">Descrição</span><span class="sxs-lookup"><span data-stu-id="cd289-151">Description</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="cd289-152">audiência</span><span class="sxs-lookup"><span data-stu-id="cd289-152">audience</span></span> |`aud` |`6731de76-14a6-49ae-97bc-6eba6914391e` |<span data-ttu-id="cd289-153">Identifica o destinatário pretendido do token.</span><span class="sxs-lookup"><span data-stu-id="cd289-153">Identifies the intended recipient of the token.</span></span> <span data-ttu-id="cd289-154">Em tokens de ID, a audiência é a ID do aplicativo, atribuída ao o aplicativo no Portal de Registro de Aplicativos da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="cd289-154">In ID tokens, the audience is your app's Application ID, assigned to your app in the Microsoft Application Registration Portal.</span></span> <span data-ttu-id="cd289-155">O aplicativo deve validar esse valor e rejeitar o token, caso o valor não seja correspondente.</span><span class="sxs-lookup"><span data-stu-id="cd289-155">Your app should validate this value, and reject the token if the value does not match.</span></span> |
| <span data-ttu-id="cd289-156">emissor</span><span class="sxs-lookup"><span data-stu-id="cd289-156">issuer</span></span> |`iss` |`https://login.microsoftonline.com/b9419818-09af-49c2-b0c3-653adc1f376e/v2.0 ` |<span data-ttu-id="cd289-157">Identifica o STS (Serviço de Token de Segurança) que constrói e retorna o token e o locatário do Azure AD no qual o usuário foi autenticado.</span><span class="sxs-lookup"><span data-stu-id="cd289-157">Identifies the security token service (STS) that constructs and returns the token, and the Azure AD tenant in which the user was authenticated.</span></span> <span data-ttu-id="cd289-158">O aplicativo deve validar a declaração do emissor para garantir que o token venha do ponto de extremidade v2.0.</span><span class="sxs-lookup"><span data-stu-id="cd289-158">Your app should validate the issuer claim to ensure that the token came from the v2.0 endpoint.</span></span> <span data-ttu-id="cd289-159">Ele também deve usar a parte GUID da declaração para restringir o conjunto de locatários podem entrar no aplicativo.</span><span class="sxs-lookup"><span data-stu-id="cd289-159">It also should use the GUID portion of the claim to restrict the set of tenants that can sign in to the app.</span></span> <span data-ttu-id="cd289-160">O GUID que indica que o usuário é um consumidor da conta da Microsoft é `9188040d-6c67-4c5b-b112-36a304b66dad`.</span><span class="sxs-lookup"><span data-stu-id="cd289-160">The GUID that indicates that the user is a consumer user from a Microsoft account is `9188040d-6c67-4c5b-b112-36a304b66dad`.</span></span> |
| <span data-ttu-id="cd289-161">emitido em</span><span class="sxs-lookup"><span data-stu-id="cd289-161">issued at</span></span> |`iat` |`1452285331` |<span data-ttu-id="cd289-162">A hora em que o token foi emitido, representada na época.</span><span class="sxs-lookup"><span data-stu-id="cd289-162">The time at which the token was issued, represented in epoch time.</span></span> |
| <span data-ttu-id="cd289-163">hora de expiração</span><span class="sxs-lookup"><span data-stu-id="cd289-163">expiration time</span></span> |`exp` |`1452289231` |<span data-ttu-id="cd289-164">A hora em que o token se torna inválido, representada na época.</span><span class="sxs-lookup"><span data-stu-id="cd289-164">The time at which the token becomes invalid, represented in epoch time.</span></span> <span data-ttu-id="cd289-165">O aplicativo deve usar essa declaração para verificar a validade do tempo de vida do token.</span><span class="sxs-lookup"><span data-stu-id="cd289-165">Your app should use this claim to verify the validity of the token lifetime.</span></span> |
| <span data-ttu-id="cd289-166">não antes de</span><span class="sxs-lookup"><span data-stu-id="cd289-166">not before</span></span> |`nbf` |`1452285331` |<span data-ttu-id="cd289-167">O horário em que o token se torna inválido, representado no horário da época.</span><span class="sxs-lookup"><span data-stu-id="cd289-167">The time at which the token becomes valid, represented in epoch time.</span></span> <span data-ttu-id="cd289-168">Ele geralmente é o mesmo que o horário de emissão.</span><span class="sxs-lookup"><span data-stu-id="cd289-168">It is usually the same as the issuance time.</span></span> <span data-ttu-id="cd289-169">O aplicativo deve usar essa declaração para verificar a validade do tempo de vida do token.</span><span class="sxs-lookup"><span data-stu-id="cd289-169">Your app should use this claim to verify the validity of the token lifetime.</span></span> |
| <span data-ttu-id="cd289-170">version</span><span class="sxs-lookup"><span data-stu-id="cd289-170">version</span></span> |`ver` |`2.0` |<span data-ttu-id="cd289-171">A versão do token de ID, conforme definida pelo Azure AD.</span><span class="sxs-lookup"><span data-stu-id="cd289-171">The version of the ID token, as defined by Azure AD.</span></span> <span data-ttu-id="cd289-172">Para o ponto de extremidade da v2.0, o valor é `2.0`.</span><span class="sxs-lookup"><span data-stu-id="cd289-172">For the v2.0 endpoint, the value is `2.0`.</span></span> |
| <span data-ttu-id="cd289-173">ID do locatário</span><span class="sxs-lookup"><span data-stu-id="cd289-173">tenant ID</span></span> |`tid` |`b9419818-09af-49c2-b0c3-653adc1f376e` |<span data-ttu-id="cd289-174">Um GUID que representa o locatário do Azure AD do qual o usuário é proveniente.</span><span class="sxs-lookup"><span data-stu-id="cd289-174">A GUID that represents the Azure AD tenant that the user is from.</span></span> <span data-ttu-id="cd289-175">Para contas corporativas e de estudante, o GUID é a ID de locatário imutável da organização à qual o usuário pertence.</span><span class="sxs-lookup"><span data-stu-id="cd289-175">For work and school accounts, the GUID is the immutable tenant ID of the organization that the user belongs to.</span></span> <span data-ttu-id="cd289-176">Para contas pessoais, o valor é `9188040d-6c67-4c5b-b112-36a304b66dad`.</span><span class="sxs-lookup"><span data-stu-id="cd289-176">For personal accounts, the value is `9188040d-6c67-4c5b-b112-36a304b66dad`.</span></span> <span data-ttu-id="cd289-177">O escopo `profile` é necessário para receber essa declaração.</span><span class="sxs-lookup"><span data-stu-id="cd289-177">The `profile` scope is required in order to receive this claim.</span></span> |
| <span data-ttu-id="cd289-178">hash de código</span><span class="sxs-lookup"><span data-stu-id="cd289-178">code hash</span></span> |`c_hash` |`SGCPtt01wxwfgnYZy2VJtQ` |<span data-ttu-id="cd289-179">O hash de código é incluído em tokens de ID apenas quando eles são emitidos com um código de autorização OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="cd289-179">The code hash is included in ID tokens only when the ID token is issued with an OAuth 2.0 authorization code.</span></span> <span data-ttu-id="cd289-180">Ele pode ser usado para validar a autenticidade de um código de autorização.</span><span class="sxs-lookup"><span data-stu-id="cd289-180">It can be used to validate the authenticity of an authorization code.</span></span> <span data-ttu-id="cd289-181">Para obter detalhes sobre como realizar essa validação, confira a [Especificação OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html).</span><span class="sxs-lookup"><span data-stu-id="cd289-181">For details about performing this validation, see the [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span></span> |
| <span data-ttu-id="cd289-182">hash de token de acesso</span><span class="sxs-lookup"><span data-stu-id="cd289-182">access token hash</span></span> |`at_hash` |`SGCPtt01wxwfgnYZy2VJtQ` |<span data-ttu-id="cd289-183">O hash do token de acesso é incluído em tokens de ID apenas quando eles são emitidos com um token de acesso OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="cd289-183">The access token hash is included in ID tokens only when the ID token is issued with an OAuth 2.0 access token.</span></span> <span data-ttu-id="cd289-184">Ele pode ser usado para validar a autenticidade de um token de acesso.</span><span class="sxs-lookup"><span data-stu-id="cd289-184">It can be used to validate the authenticity of an access token.</span></span> <span data-ttu-id="cd289-185">Para obter detalhes sobre como realizar essa validação, confira a [Especificação OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html).</span><span class="sxs-lookup"><span data-stu-id="cd289-185">For details about performing this validation, see the [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span></span> |
| <span data-ttu-id="cd289-186">nonce</span><span class="sxs-lookup"><span data-stu-id="cd289-186">nonce</span></span> |`nonce` |`12345` |<span data-ttu-id="cd289-187">O nonce é uma estratégia para migrar ataques de reprodução de token.</span><span class="sxs-lookup"><span data-stu-id="cd289-187">The nonce is a strategy for mitigating token replay attacks.</span></span> <span data-ttu-id="cd289-188">O aplicativo pode especificar um nonce em uma solicitação de autorização usando o parâmetro de consulta `nonce` .</span><span class="sxs-lookup"><span data-stu-id="cd289-188">Your app can specify a nonce in an authorization request by using the `nonce` query parameter.</span></span> <span data-ttu-id="cd289-189">O valor que você fornece na solicitação é emitido na declaração `nonce` do token de ID, sem modificação.</span><span class="sxs-lookup"><span data-stu-id="cd289-189">The value you provide in the request is emitted in the ID token's `nonce` claim, unmodified.</span></span> <span data-ttu-id="cd289-190">O aplicativo pode verificar o valor em relação ao valor especificado por ele na solicitação, o que associa a sessão do aplicativo a um token de ID específico.</span><span class="sxs-lookup"><span data-stu-id="cd289-190">Your app can verify the value against the value it specified on the request, which associates the app's session with a specific ID token.</span></span> <span data-ttu-id="cd289-191">O aplicativo deve executar essa validação durante o processo de validação do token de ID.</span><span class="sxs-lookup"><span data-stu-id="cd289-191">Your app should perform this validation during the ID token validation process.</span></span> |
| <span data-ttu-id="cd289-192">name</span><span class="sxs-lookup"><span data-stu-id="cd289-192">name</span></span> |`name` |`Babe Ruth` |<span data-ttu-id="cd289-193">A declaração de nome fornece um valor legível por humanos que identifica o assunto do token.</span><span class="sxs-lookup"><span data-stu-id="cd289-193">The name claim provides a human-readable value that identifies the subject of the token.</span></span> <span data-ttu-id="cd289-194">Não há garantia de que o valor seja exclusivo. Ele é mutável e foi projetado para ser usado apenas para fins de exibição.</span><span class="sxs-lookup"><span data-stu-id="cd289-194">The value is not guaranteed to be unique, it is mutable, and it's designed to be used only for display purposes.</span></span> <span data-ttu-id="cd289-195">O escopo `profile` é necessário para receber essa declaração.</span><span class="sxs-lookup"><span data-stu-id="cd289-195">The `profile` scope is required in order to receive this claim.</span></span> |
| <span data-ttu-id="cd289-196">email</span><span class="sxs-lookup"><span data-stu-id="cd289-196">email</span></span> |`email` |`thegreatbambino@nyy.onmicrosoft.com` |<span data-ttu-id="cd289-197">O endereço de email principal associado à conta de usuário, se houver um.</span><span class="sxs-lookup"><span data-stu-id="cd289-197">The primary email address associated with the user account, if one exists.</span></span> <span data-ttu-id="cd289-198">Seu valor é mutável e pode ser alterado ao longo do tempo.</span><span class="sxs-lookup"><span data-stu-id="cd289-198">Its value is mutable and might change over time.</span></span> <span data-ttu-id="cd289-199">O escopo `email` é necessário para receber essa declaração.</span><span class="sxs-lookup"><span data-stu-id="cd289-199">The `email` scope is required in order to receive this claim.</span></span> |
| <span data-ttu-id="cd289-200">nome de usuário preferencial</span><span class="sxs-lookup"><span data-stu-id="cd289-200">preferred username</span></span> |`preferred_username` |`thegreatbambino@nyy.onmicrosoft.com` |<span data-ttu-id="cd289-201">O nome de usuário principal que representa o usuário no ponto de extremidade v 2.0.</span><span class="sxs-lookup"><span data-stu-id="cd289-201">The primary username that represents the user in the v2.0 endpoint.</span></span> <span data-ttu-id="cd289-202">Ele pode ser um endereço de email, número de telefone ou nome de usuário genérico sem um formato especificado.</span><span class="sxs-lookup"><span data-stu-id="cd289-202">It could be an email address, phone number, or a generic username without a specified format.</span></span> <span data-ttu-id="cd289-203">Seu valor é mutável e pode ser alterado ao longo do tempo.</span><span class="sxs-lookup"><span data-stu-id="cd289-203">Its value is mutable and might change over time.</span></span> <span data-ttu-id="cd289-204">O escopo `profile` é necessário para receber essa declaração.</span><span class="sxs-lookup"><span data-stu-id="cd289-204">The `profile` scope is required in order to receive this claim.</span></span> |
| <span data-ttu-id="cd289-205">subject</span><span class="sxs-lookup"><span data-stu-id="cd289-205">subject</span></span> |`sub` |`MF4f-ggWMEji12KynJUNQZphaUTvLcQug5jdF2nl01Q` | <span data-ttu-id="cd289-206">O item mais importante sobre o qual o token declara informações, como o usuário de um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="cd289-206">The principal about which the token asserts information, such as the user of an app.</span></span> <span data-ttu-id="cd289-207">Esse valor é imutável e não pode ser reatribuído nem reutilizado.</span><span class="sxs-lookup"><span data-stu-id="cd289-207">This value is immutable and cannot be reassigned or reused.</span></span> <span data-ttu-id="cd289-208">Pode ser usado para executar verificações de autorização de forma segura, por exemplo, quando o token é usado para acessar um recurso, e pode ser usado como uma chave nas tabelas de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="cd289-208">It can be used to perform authorization checks safely, such as when the token is used to access a resource, and can be used as a key in database tables.</span></span> <span data-ttu-id="cd289-209">Como a entidade está sempre presente nos tokens emitidos pelo Azure AD, é recomendável usar esse valor em um sistema de autorização de uso geral.</span><span class="sxs-lookup"><span data-stu-id="cd289-209">Because the subject is always present in the tokens that Azure AD issues, we recommend using this value in a general-purpose authorization system.</span></span> <span data-ttu-id="cd289-210">O assunto é, no entanto, um identificador de paridade - é exclusivo a uma ID de aplicativo específica.</span><span class="sxs-lookup"><span data-stu-id="cd289-210">The subject is, however, a pairwise identifier - it is unique to a particular application ID.</span></span>  <span data-ttu-id="cd289-211">Portanto, se um único usuário entra em dois aplicativos diferentes usando duas IDs de cliente diferentes, esses aplicativos receberão dois valores diferentes para a declaração do assunto.</span><span class="sxs-lookup"><span data-stu-id="cd289-211">Therefore, if a single user signs into two different apps using two different client IDs, those apps will receive two different values for the subject claim.</span></span>  <span data-ttu-id="cd289-212">Isso pode ou não ser desejável, dependendo dos requisitos de arquitetura e de privacidade.</span><span class="sxs-lookup"><span data-stu-id="cd289-212">This may or may not be desired depending on your architecture and privacy requirements.</span></span> |
| <span data-ttu-id="cd289-213">ID do objeto</span><span class="sxs-lookup"><span data-stu-id="cd289-213">object ID</span></span> |`oid` |`a1dbdde8-e4f9-4571-ad93-3059e3750d23` | <span data-ttu-id="cd289-214">O identificador imutável de um objeto do sistema de identidade da Microsoft, nesse caso, uma conta de usuário.</span><span class="sxs-lookup"><span data-stu-id="cd289-214">The immutable identifier for an object in the Microsoft identity system, in this case, a user account.</span></span>  <span data-ttu-id="cd289-215">Também pode ser usada para realizar verificações de autorização com segurança e como uma chave em tabelas de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="cd289-215">It can also be used to perform authorization checks safely and as a key in database tables.</span></span> <span data-ttu-id="cd289-216">Essa ID identifica exclusivamente o usuário entre os aplicativos - dois aplicativos diferentes autenticando o mesmo usuário receberão o mesmo valor na declaração `oid`.</span><span class="sxs-lookup"><span data-stu-id="cd289-216">This ID uniquely identifies the user across applications - two different applications signing in the same user will receive the same value in the `oid` claim.</span></span>  <span data-ttu-id="cd289-217">Isso significa que pode ser usada ao fazer consultas nos serviços online da Microsoft, como o Microsoft Graph.</span><span class="sxs-lookup"><span data-stu-id="cd289-217">This means that it can be used when making queries to Microsoft online services, such as the Microsoft Graph.</span></span>  <span data-ttu-id="cd289-218">O Microsoft Graph retornará essa ID como a propriedade `id` para uma determinada conta de usuário.</span><span class="sxs-lookup"><span data-stu-id="cd289-218">The Microsoft Graph will return this ID as the `id` property for a given user account.</span></span>  <span data-ttu-id="cd289-219">Como o `oid` permite que vários aplicativos correlacionem usuários, o escopo `profile` é necessário a fim de receber essa declaração.</span><span class="sxs-lookup"><span data-stu-id="cd289-219">Because the `oid` allows multiple apps to correlate users, the `profile` scope is required in order to receive this claim.</span></span> <span data-ttu-id="cd289-220">Observe que, se um único usuário existir em vários locatários, o usuário conterá uma ID de objeto diferentes em cada locatário - são consideradas contas diferentes, mesmo que o usuário faça logon em cada conta com as mesmas credenciais.</span><span class="sxs-lookup"><span data-stu-id="cd289-220">Note that if a single user exists in multiple tenants, the user will contain a different object ID in each tenant - they are considered different accounts, even though the user logs into each account with the same credentials.</span></span> |

### <a name="access-tokens"></a><span data-ttu-id="cd289-221">Tokens de acesso</span><span class="sxs-lookup"><span data-stu-id="cd289-221">Access tokens</span></span>
<span data-ttu-id="cd289-222">Atualmente, os tokens de acesso emitidos pelo ponto de extremidade v 2.0 só podem ser consumidos por Microsoft Services.</span><span class="sxs-lookup"><span data-stu-id="cd289-222">Currently, access tokens issued by the v2.0 endpoint can be consumed only by Microsoft Services.</span></span> <span data-ttu-id="cd289-223">Os aplicativos não precisam executar nenhuma validação ou inspeção de tokens de acesso para qualquer um dos cenários que atualmente têm suporte.</span><span class="sxs-lookup"><span data-stu-id="cd289-223">Your apps shouldn't need to perform any validation or inspection of access tokens for any of the currently supported scenarios.</span></span> <span data-ttu-id="cd289-224">Você pode tratar os tokens de acesso como completamente opacos.</span><span class="sxs-lookup"><span data-stu-id="cd289-224">You can treat access tokens as completely opaque.</span></span> <span data-ttu-id="cd289-225">São apenas cadeias de caracteres que o aplicativo pode passar para a Microsoft em solicitações HTTP.</span><span class="sxs-lookup"><span data-stu-id="cd289-225">They are just strings that your app can pass to Microsoft in HTTP requests.</span></span>

<span data-ttu-id="cd289-226">Em breve, o ponto de extremidade v2.0 apresentará no seu aplicativo a capacidade de receber tokens de acesso de outros clientes.</span><span class="sxs-lookup"><span data-stu-id="cd289-226">In the near future, the v2.0 endpoint will introduce the ability for your app to receive access tokens from other clients.</span></span> <span data-ttu-id="cd289-227">Nesse momento, as informações neste tópico de referência serão atualizadas com as informações de que você precisa para que o aplicativo execute a validação de token de acesso e outras tarefas semelhantes.</span><span class="sxs-lookup"><span data-stu-id="cd289-227">At that time, the information in this reference topic will be updated with the information that you need for your app to perform access token validation and other similar tasks.</span></span>

<span data-ttu-id="cd289-228">Quando você solicita um token de acesso do ponto de extremidade v2.0, ele também retorna metadados sobre o token de acesso para uso pelo aplicativo.</span><span class="sxs-lookup"><span data-stu-id="cd289-228">When you request an access token from the v2.0 endpoint, the v2.0 endpoint also returns metadata about the access token for your app to use.</span></span> <span data-ttu-id="cd289-229">Essas informações incluem a data de expiração do token de acesso e os escopos para os quais ele é válido.</span><span class="sxs-lookup"><span data-stu-id="cd289-229">This information includes the expiry time of the access token and the scopes for which it is valid.</span></span> <span data-ttu-id="cd289-230">O aplicativo usa os metadados para executar o armazenamento em cache inteligente de tokens de acesso sem ter que analisar abertamente o token de acesso.</span><span class="sxs-lookup"><span data-stu-id="cd289-230">Your app uses this metadata to perform intelligent caching of access tokens without having to parse open the access token itself.</span></span>

### <a name="refresh-tokens"></a><span data-ttu-id="cd289-231">Tokens de atualização</span><span class="sxs-lookup"><span data-stu-id="cd289-231">Refresh tokens</span></span>
<span data-ttu-id="cd289-232">Tokens de atualização são tokens de segurança que o aplicativo pode usar para obter novos tokens de acesso em um fluxo OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="cd289-232">Refresh tokens are security tokens that your app can use to get new access tokens in an OAuth 2.0 flow.</span></span> <span data-ttu-id="cd289-233">O aplicativo pode usar tokens de atualização para obter acesso de longo prazo a recursos em nome de um usuário sem a necessidade de interação com o usuário.</span><span class="sxs-lookup"><span data-stu-id="cd289-233">Your app can use refresh tokens to achieve long-term access to resources on behalf of a user without requiring interaction with the user.</span></span>

<span data-ttu-id="cd289-234">Os tokens de atualização têm vários recursos.</span><span class="sxs-lookup"><span data-stu-id="cd289-234">Refresh tokens are multi-resource.</span></span> <span data-ttu-id="cd289-235">Um token de atualização recebido durante uma solicitação de token para um recurso pode ser resgatado para tokens de acesso para um recurso totalmente diferente.</span><span class="sxs-lookup"><span data-stu-id="cd289-235">A refresh token received during a token request for one resource can be redeemed for access tokens to a completely different resource.</span></span>

<span data-ttu-id="cd289-236">Para receber uma atualização em uma resposta de token, o aplicativo deve solicitar e receber o escopo `offline_acesss`.</span><span class="sxs-lookup"><span data-stu-id="cd289-236">To receive a refresh in a token response, your app must request and be granted the `offline_acesss` scope.</span></span> <span data-ttu-id="cd289-237">Para saber mais sobre o escopo `offline_access`, confira o artigo [Consentimento e escopos](active-directory-v2-scopes.md).</span><span class="sxs-lookup"><span data-stu-id="cd289-237">To learn more about the `offline_access` scope, see the [consent and scopes](active-directory-v2-scopes.md) article.</span></span>

<span data-ttu-id="cd289-238">Os tokens de atualização são e sempre serão completamente opacos para o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="cd289-238">Refresh tokens are, and always will be, completely opaque to your app.</span></span> <span data-ttu-id="cd289-239">Eles são emitidos pelo ponto de extremidade v2.0 do Azure AD e podem ser inspecionados e interpretados apenas pelo ponto de extremidade v2.0.</span><span class="sxs-lookup"><span data-stu-id="cd289-239">They are issued by the Azure AD v2.0 endpoint and can only be inspected and interpreted by the v2.0 endpoint.</span></span> <span data-ttu-id="cd289-240">Eles têm longa duração, mas o aplicativo não deve ser escrito para esperar que um token de atualização dure por qualquer período de tempo.</span><span class="sxs-lookup"><span data-stu-id="cd289-240">They are long-lived, but your app should not be written to expect that a refresh token will last for any period of time.</span></span> <span data-ttu-id="cd289-241">Tokens de atualização podem ser invalidados a qualquer momento por vários motivos.</span><span class="sxs-lookup"><span data-stu-id="cd289-241">Refresh tokens can be invalidated at any moment for various reasons.</span></span> <span data-ttu-id="cd289-242">A única maneira de o aplicativo saber se um token de atualização é válido, é tentando resgatá-lo fazendo uma solicitação de token ao ponto de extremidade v2.0.</span><span class="sxs-lookup"><span data-stu-id="cd289-242">The only way for your app to know if a refresh token is valid is to attempt to redeem it by making a token request to the v2.0 endpoint.</span></span>

<span data-ttu-id="cd289-243">Ao resgatar um token de atualização para um novo token de acesso (e se o aplicativo tiver concedido o escopo `offline_access` ), você recebe um novo token de atualização na resposta de token.</span><span class="sxs-lookup"><span data-stu-id="cd289-243">When you redeem a refresh token for a new access token (and if your app had been granted the `offline_access` scope), you receive a new refresh token in the token response.</span></span> <span data-ttu-id="cd289-244">Salve o token de atualização emitido mais recentemente, para substituir o que foi usado na solicitação.</span><span class="sxs-lookup"><span data-stu-id="cd289-244">Save the newly issued refresh token, to replace the one you used in the request.</span></span> <span data-ttu-id="cd289-245">Isso garante que os tokens de atualização permaneçam válidos pelo tempo máximo possível.</span><span class="sxs-lookup"><span data-stu-id="cd289-245">This guarantees that your refresh tokens remain valid for as long as possible.</span></span>

## <a name="validating-tokens"></a><span data-ttu-id="cd289-246">Validando tokens</span><span class="sxs-lookup"><span data-stu-id="cd289-246">Validating tokens</span></span>
<span data-ttu-id="cd289-247">Atualmente, a única validação de token que os aplicativos devem precisar executar é validar os tokens de ID.</span><span class="sxs-lookup"><span data-stu-id="cd289-247">Currently, the only token validation your apps should need to perform is validating ID tokens.</span></span> <span data-ttu-id="cd289-248">Para validar um token de ID, o aplicativo deve validar a assinatura do token de ID e as declarações contidas nele.</span><span class="sxs-lookup"><span data-stu-id="cd289-248">To validate an ID token, your app should validate both the ID token's signature and the claims in the ID token.</span></span>

<!-- TODO: Link -->
<span data-ttu-id="cd289-249">A Microsoft fornece exemplos de código e bibliotecas que mostram como lidar facilmente com a validação de token.</span><span class="sxs-lookup"><span data-stu-id="cd289-249">Microsoft provides libraries and code samples that show you how to easily handle token validation.</span></span> <span data-ttu-id="cd289-250">Nas próximas seções, descrevemos o processo subjacente.</span><span class="sxs-lookup"><span data-stu-id="cd289-250">In the next sections, we describe the underlying process.</span></span> <span data-ttu-id="cd289-251">Várias bibliotecas de software livre de terceiros também estão disponíveis para validação de JWT.</span><span class="sxs-lookup"><span data-stu-id="cd289-251">Several third-party open-source libraries also are available for JWT validation.</span></span> <span data-ttu-id="cd289-252">Há pelo menos uma opção de biblioteca para quase todas as plataformas e idiomas.</span><span class="sxs-lookup"><span data-stu-id="cd289-252">There's at least one library option for almost every platform and language.</span></span>

### <a name="validate-the-signature"></a><span data-ttu-id="cd289-253">validar a assinatura</span><span class="sxs-lookup"><span data-stu-id="cd289-253">Validate the signature</span></span>
<span data-ttu-id="cd289-254">Um JWT contém três segmentos, que são separados pelo caractere `.` .</span><span class="sxs-lookup"><span data-stu-id="cd289-254">A JWT contains three segments, which are separated by the `.` character.</span></span> <span data-ttu-id="cd289-255">O primeiro segmento é conhecido como o *cabeçalho*, o segundo segmento é o *corpo* e o terceiro segmento é a *assinatura*.</span><span class="sxs-lookup"><span data-stu-id="cd289-255">The first segment is known as the *header*, the second segment is the *body*, and the third segment is the *signature*.</span></span> <span data-ttu-id="cd289-256">O segmento de assinatura pode ser usado para validar a autenticidade do token de ID, de modo que o aplicativo possa confiar nele.</span><span class="sxs-lookup"><span data-stu-id="cd289-256">The signature segment can be used to validate the authenticity of the ID token so that it can be trusted by your app.</span></span>

<span data-ttu-id="cd289-257">Os tokens de ID são assinados usando algoritmos de criptografia assimétrica padrão do setor, como RSA 256.</span><span class="sxs-lookup"><span data-stu-id="cd289-257">ID tokens are signed by using industry-standard asymmetric encryption algorithms, such as RSA 256.</span></span> <span data-ttu-id="cd289-258">O cabeçalho do token de ID tem informações sobre o método de criptografia e a chave usados para assinar o token.</span><span class="sxs-lookup"><span data-stu-id="cd289-258">The header of the ID token has information about the key and encryption method used to sign the token.</span></span> <span data-ttu-id="cd289-259">Por exemplo:</span><span class="sxs-lookup"><span data-stu-id="cd289-259">For example:</span></span>

```
{
  "typ": "JWT",
  "alg": "RS256",
  "kid": "MnC_VZcATfM5pOYiJHMba9goEKY"
}
```

<span data-ttu-id="cd289-260">A declaração `alg` indica o algoritmo que foi usado para assinar o token.</span><span class="sxs-lookup"><span data-stu-id="cd289-260">The `alg` claim indicates the algorithm that was used to sign the token.</span></span> <span data-ttu-id="cd289-261">A declaração `kid` indica a chave pública que foi usada para assinar o token.</span><span class="sxs-lookup"><span data-stu-id="cd289-261">The `kid` claim indicates the public key that was used to sign the token.</span></span>

<span data-ttu-id="cd289-262">A qualquer momento, o ponto de extremidade v 2.0 pode assinar um token de ID, usando qualquer conjunto específico de pares de chaves públicas-privadas.</span><span class="sxs-lookup"><span data-stu-id="cd289-262">At any time, the v2.0 endpoint might sign an ID token by using any one of a specific set of public-private key pairs.</span></span> <span data-ttu-id="cd289-263">O ponto de extremidade v2.0 gira periodicamente o possível conjunto de chaves. Assim, o aplicativo deve ser escrito para tratar essas mudanças de chave automaticamente.</span><span class="sxs-lookup"><span data-stu-id="cd289-263">The v2.0 endpoint periodically rotates the possible set of keys, so your app should be written to handle those key changes automatically.</span></span> <span data-ttu-id="cd289-264">Uma frequência razoável para verificar se há atualizações para as chaves públicas usadas pelo ponto de extremidade v2.0 é a cada 24 horas.</span><span class="sxs-lookup"><span data-stu-id="cd289-264">A reasonable frequency to check for updates to the public keys used by the v2.0 endpoint is every 24 hours.</span></span>

<span data-ttu-id="cd289-265">Você pode adquirir os dados de chave de assinatura necessários para validar a assinatura usando o documento de metadados do OpenID Connect localizado em:</span><span class="sxs-lookup"><span data-stu-id="cd289-265">You can acquire the signing key data that you need to validate the signature by using the OpenID Connect metadata document located at:</span></span>

```
https://login.microsoftonline.com/common/v2.0/.well-known/openid-configuration
```

> [!TIP]
> <span data-ttu-id="cd289-266">Experimente a URL em um navegador!</span><span class="sxs-lookup"><span data-stu-id="cd289-266">Try the URL in a browser!</span></span>
>
>

<span data-ttu-id="cd289-267">Esse documento de metadados é um objeto JSON com várias informações úteis, como o local dos vários pontos de extremidade exigidos para a autenticação do OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="cd289-267">This metadata document is a JSON object that has several useful pieces of information, such as the location of the various endpoints required for OpenID Connect authentication.</span></span>  <span data-ttu-id="cd289-268">O documento também inclui um *jwks_uri*, que fornece o local do conjunto de chaves públicas usadas para assinar tokens.</span><span class="sxs-lookup"><span data-stu-id="cd289-268">The document also includes a *jwks_uri*, which gives the location of the set of public keys used to sign tokens.</span></span> <span data-ttu-id="cd289-269">O documento JSON localizado em jwks_uri tem todas as informações de chaves públicas que estão em uso atualmente.</span><span class="sxs-lookup"><span data-stu-id="cd289-269">The JSON document located at the jwks_uri has all the public key information that is currently in use.</span></span> <span data-ttu-id="cd289-270">O aplicativo pode usar a declaração `kid` no cabeçalho do JWT para selecionar qual chave pública neste documento foi usada para assinar um token.</span><span class="sxs-lookup"><span data-stu-id="cd289-270">Your app can use the `kid` claim in the JWT header to select which public key in this document has been used to sign a token.</span></span> <span data-ttu-id="cd289-271">Assim, ele executa a validação da assinatura usando a chave pública correta e o algoritmo indicado.</span><span class="sxs-lookup"><span data-stu-id="cd289-271">It then performs signature validation by using the correct public key and the indicated algorithm.</span></span>

<span data-ttu-id="cd289-272">Executar a validação de assinatura está fora do escopo deste documento.</span><span class="sxs-lookup"><span data-stu-id="cd289-272">Performing signature validation is outside the scope of this document.</span></span> <span data-ttu-id="cd289-273">Muitas bibliotecas de software livre estão disponíveis para ajudá-lo.</span><span class="sxs-lookup"><span data-stu-id="cd289-273">Many open-source libraries are available to help you with this.</span></span>

### <a name="validate-the-claims"></a><span data-ttu-id="cd289-274">Validar as declarações</span><span class="sxs-lookup"><span data-stu-id="cd289-274">Validate the claims</span></span>
<span data-ttu-id="cd289-275">Quando o aplicativo recebe um token de ID na conexão do usuário, ele também deve fazer algumas verificações nas declarações no token de ID.</span><span class="sxs-lookup"><span data-stu-id="cd289-275">When your app receives an ID token upon user sign-in, it should also perform a few checks against the claims in the ID token.</span></span> <span data-ttu-id="cd289-276">Elas incluem, mas sem limitação:</span><span class="sxs-lookup"><span data-stu-id="cd289-276">These include but are not limited to:</span></span>

* <span data-ttu-id="cd289-277">A declaração **público-alvo**, para verificar se o token de ID foi destinado a ser dado ao aplicativo</span><span class="sxs-lookup"><span data-stu-id="cd289-277">**audience** claim, to verify that the ID token was intended to be given to your app</span></span>
* <span data-ttu-id="cd289-278">As declarações **não antes de** e **data de expiração**, para verificar se o token de ID não expirou</span><span class="sxs-lookup"><span data-stu-id="cd289-278">**not before** and **expiration time** claims, to verify that the ID token has not expired</span></span>
* <span data-ttu-id="cd289-279">A declaração **emissor**, para verificar se o token foi de fato emitido para o aplicativo pelo ponto de extremidade v2.0</span><span class="sxs-lookup"><span data-stu-id="cd289-279">**issuer** claim, to verify that the token was issued to your app by the v2.0 endpoint</span></span>
* <span data-ttu-id="cd289-280">**nonce**, como uma redução do ataque de reprodução do token</span><span class="sxs-lookup"><span data-stu-id="cd289-280">**nonce**, as a token replay attack mitigation</span></span>

<span data-ttu-id="cd289-281">Para obter uma lista completa das validações de declaração que o aplicativo deve executar, confira a [especificação do OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html#IDTokenValidation).</span><span class="sxs-lookup"><span data-stu-id="cd289-281">For a full list of claim validations that your app should perform, see the [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html#IDTokenValidation).</span></span>

<span data-ttu-id="cd289-282">Os detalhes dos valores esperados para essas declarações estão incluídos acima na [seção tokens de ID](# ID tokens).</span><span class="sxs-lookup"><span data-stu-id="cd289-282">Details of the expected values for these claims are included in the [ID tokens](# ID tokens) section.</span></span>

## <a name="token-lifetimes"></a><span data-ttu-id="cd289-283">Tempos de vida do token</span><span class="sxs-lookup"><span data-stu-id="cd289-283">Token lifetimes</span></span>
<span data-ttu-id="cd289-284">Fornecemos os tempos de vida de token a seguir para fins informativos.</span><span class="sxs-lookup"><span data-stu-id="cd289-284">We provide the following token lifetimes for your information only.</span></span> <span data-ttu-id="cd289-285">As informações podem ajudá-lo a desenvolver e depurar aplicativos.</span><span class="sxs-lookup"><span data-stu-id="cd289-285">The information might help you as you develop and debug apps.</span></span> <span data-ttu-id="cd289-286">Os aplicativos não devem ser escritos com a expectativa de que esses tempos de vida permaneçam constantes.</span><span class="sxs-lookup"><span data-stu-id="cd289-286">Your apps should not be written to expect any of these lifetimes to remain constant.</span></span> <span data-ttu-id="cd289-287">Os tempos de vida de token podem mudar e mudarão a qualquer momento.</span><span class="sxs-lookup"><span data-stu-id="cd289-287">Token lifetimes can and will change at any time.</span></span>

| <span data-ttu-id="cd289-288">A criptografia do token</span><span class="sxs-lookup"><span data-stu-id="cd289-288">Token</span></span> | <span data-ttu-id="cd289-289">Tempo de vida</span><span class="sxs-lookup"><span data-stu-id="cd289-289">Lifetime</span></span> | <span data-ttu-id="cd289-290">Descrição</span><span class="sxs-lookup"><span data-stu-id="cd289-290">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="cd289-291">Tokens de ID (contas corporativos ou de estudante)</span><span class="sxs-lookup"><span data-stu-id="cd289-291">ID tokens (work or school accounts)</span></span> |<span data-ttu-id="cd289-292">1 hora</span><span class="sxs-lookup"><span data-stu-id="cd289-292">1 hour</span></span> |<span data-ttu-id="cd289-293">Tokens de ID normalmente são válidos por uma hora.</span><span class="sxs-lookup"><span data-stu-id="cd289-293">ID tokens typically are valid for 1 hour.</span></span> <span data-ttu-id="cd289-294">O aplicativo Web pode usar esse mesmo tempo de vida para manter sua própria sessão com o usuário (recomendável) ou você pode escolher um tempo de vida de sessão totalmente diferente.</span><span class="sxs-lookup"><span data-stu-id="cd289-294">Your web app can use this same lifetime to maintain its own session with the user (recommended), or you can choose a completely different session lifetime.</span></span> <span data-ttu-id="cd289-295">Se o aplicativo precisar obter um novo token de ID, precisará fazer uma nova solicitação de entrada para o ponto de extremidade de autorização v2.0.</span><span class="sxs-lookup"><span data-stu-id="cd289-295">If your app needs to get a new ID token, it needs to make a new sign-in request to the v2.0 authorize endpoint.</span></span> <span data-ttu-id="cd289-296">Se o usuário tiver uma sessão de navegador válida com o ponto de extremidade v2.0, talvez não precise inserir suas credenciais novamente.</span><span class="sxs-lookup"><span data-stu-id="cd289-296">If the user has a valid browser session with the v2.0 endpoint, the user might not be required to enter their credentials again.</span></span> |
| <span data-ttu-id="cd289-297">Tokens de ID (contas pessoais)</span><span class="sxs-lookup"><span data-stu-id="cd289-297">ID tokens (personal accounts)</span></span> |<span data-ttu-id="cd289-298">24 horas</span><span class="sxs-lookup"><span data-stu-id="cd289-298">24 hours</span></span> |<span data-ttu-id="cd289-299">Tokens de ID para contas pessoais geralmente são válidos por 24 horas.</span><span class="sxs-lookup"><span data-stu-id="cd289-299">ID tokens for personal accounts typically are valid for 24 hours.</span></span> <span data-ttu-id="cd289-300">O aplicativo Web pode usar esse mesmo tempo de vida para manter sua própria sessão com o usuário (recomendável) ou você pode escolher um tempo de vida de sessão totalmente diferente.</span><span class="sxs-lookup"><span data-stu-id="cd289-300">Your web app can use this same lifetime to maintain its own session with the user (recommended), or you can choose a completely different session lifetime.</span></span> <span data-ttu-id="cd289-301">Se o aplicativo precisar obter um novo token de ID, precisará fazer uma nova solicitação de entrada para o ponto de extremidade de autorização v2.0.</span><span class="sxs-lookup"><span data-stu-id="cd289-301">If your app needs to get a new ID token, it needs to make a new sign-in request to the v2.0 authorize endpoint.</span></span> <span data-ttu-id="cd289-302">Se o usuário tiver uma sessão de navegador válida com o ponto de extremidade v2.0, talvez não precise inserir suas credenciais novamente.</span><span class="sxs-lookup"><span data-stu-id="cd289-302">If the user has a valid browser session with the v2.0 endpoint, the user might not be required to enter their credentials again.</span></span> |
| <span data-ttu-id="cd289-303">Tokens de acesso (contas corporativas ou de estudante)</span><span class="sxs-lookup"><span data-stu-id="cd289-303">Access tokens (work or school accounts)</span></span> |<span data-ttu-id="cd289-304">1 hora</span><span class="sxs-lookup"><span data-stu-id="cd289-304">1 hour</span></span> |<span data-ttu-id="cd289-305">Indicado nas respostas de token como parte dos metadados do token.</span><span class="sxs-lookup"><span data-stu-id="cd289-305">Indicated in token responses as part of the token metadata.</span></span> |
| <span data-ttu-id="cd289-306">Tokens de acesso (contas pessoais)</span><span class="sxs-lookup"><span data-stu-id="cd289-306">Access tokens (personal accounts)</span></span> |<span data-ttu-id="cd289-307">1 hora</span><span class="sxs-lookup"><span data-stu-id="cd289-307">1 hour</span></span> |<span data-ttu-id="cd289-308">Indicado nas respostas de token como parte dos metadados do token.</span><span class="sxs-lookup"><span data-stu-id="cd289-308">Indicated in token responses as part of the token metadata.</span></span> <span data-ttu-id="cd289-309">Tokens de acesso que são emitidos em nome de contas pessoais podem ser configurados com um tempo de vida diferente, mas o valor típico é uma hora.</span><span class="sxs-lookup"><span data-stu-id="cd289-309">Access tokens that are issued on behalf of personal accounts can be configured for a different lifetime, but 1 hour is typical.</span></span> |
| <span data-ttu-id="cd289-310">Tokens de atualização (conta corporativa ou de estudante)</span><span class="sxs-lookup"><span data-stu-id="cd289-310">Refresh tokens (work or school account)</span></span> |<span data-ttu-id="cd289-311">Até 14 dias</span><span class="sxs-lookup"><span data-stu-id="cd289-311">Up to 14 days</span></span> |<span data-ttu-id="cd289-312">Um único token de atualização é válido para um máximo de 14 dias.</span><span class="sxs-lookup"><span data-stu-id="cd289-312">A single refresh token is valid for a maximum of 14 days.</span></span> <span data-ttu-id="cd289-313">No entanto, o token de atualização pode se tornar inválido a qualquer momento por vários motivos. Portanto, o aplicativo deve continuar tentando usar um token de atualização até que ele falhe ou até que o aplicativo o substitua por um novo token de atualização.</span><span class="sxs-lookup"><span data-stu-id="cd289-313">However, the refresh token might become invalid at any time for various reasons, so your app should continue to try to use a refresh token until it fails, or until your app replaces it with a new refresh token.</span></span> <span data-ttu-id="cd289-314">Um token de atualização também se torna inválido caso se passem 90 dias desde que o usuário inseriu suas credenciais.</span><span class="sxs-lookup"><span data-stu-id="cd289-314">A refresh token also becomes invalid if it has been 90 days since the user has entered their credentials.</span></span> |
| <span data-ttu-id="cd289-315">Tokens de atualização (contas pessoais)</span><span class="sxs-lookup"><span data-stu-id="cd289-315">Refresh tokens (personal accounts)</span></span> |<span data-ttu-id="cd289-316">Até 1 ano</span><span class="sxs-lookup"><span data-stu-id="cd289-316">Up to 1 year</span></span> |<span data-ttu-id="cd289-317">Um único token de atualização é válido para um máximo de 1 ano.</span><span class="sxs-lookup"><span data-stu-id="cd289-317">A single refresh token is valid for a maximum of 1 year.</span></span> <span data-ttu-id="cd289-318">No entanto, o token de atualização pode se tornar inválido a qualquer momento por vários motivos. Portanto, o aplicativo deve continuar a tentar usar um token de atualização até falhar.</span><span class="sxs-lookup"><span data-stu-id="cd289-318">However, the refresh token might become invalid at any time for various reasons, so your app should continue to try to use a refresh token until it fails.</span></span> |
| <span data-ttu-id="cd289-319">Códigos de autorização (contas corporativas ou de estudante)</span><span class="sxs-lookup"><span data-stu-id="cd289-319">Authorization codes (work or school accounts)</span></span> |<span data-ttu-id="cd289-320">10 minutos</span><span class="sxs-lookup"><span data-stu-id="cd289-320">10 minutes</span></span> |<span data-ttu-id="cd289-321">Os códigos de autorização são propositadamente de curta duração e devem ser resgatados imediatamente para tokens de acesso e tokens de atualização quando os tokens são recebidos.</span><span class="sxs-lookup"><span data-stu-id="cd289-321">Authorization codes are purposely short-lived, and should be immediately redeemed for access tokens and refresh tokens when the tokens are received.</span></span> |
| <span data-ttu-id="cd289-322">Códigos de autorização (contas pessoais)</span><span class="sxs-lookup"><span data-stu-id="cd289-322">Authorization codes (personal accounts)</span></span> |<span data-ttu-id="cd289-323">5 minutos</span><span class="sxs-lookup"><span data-stu-id="cd289-323">5 minutes</span></span> |<span data-ttu-id="cd289-324">Os códigos de autorização são propositadamente de curta duração e devem ser resgatados imediatamente para tokens de acesso e tokens de atualização quando os tokens são recebidos.</span><span class="sxs-lookup"><span data-stu-id="cd289-324">Authorization codes are purposely short-lived, and should be immediately redeemed for access tokens and refresh tokens when the tokens are received.</span></span> <span data-ttu-id="cd289-325">Códigos de autorização que são emitidos em nome de contas pessoais são para uso ocasional.</span><span class="sxs-lookup"><span data-stu-id="cd289-325">Authorization codes that are issued on behalf of personal accounts are for one-time use.</span></span> |
