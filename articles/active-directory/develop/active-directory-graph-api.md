---
title: Graph API do Azure Active Directory | Microsoft Docs
description: "Uma visão geral e guia de início rápido para a Graph API que permite acesso programático ao Azure AD por meio de pontos de extremidade da API REST."
services: active-directory
documentationcenter: 
author: viv-liu
manager: mbaldwin
editor: mbaldwin
ms.assetid: 5471ad74-20b3-44df-a2b5-43cde2c0a045
ms.service: active-directory
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 04/27/2017
ms.author: viviali
ms.custom: aaddev
ms.openlocfilehash: 79bb96171c00fa62f24113800c3824856febe728
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/11/2017
---
# <a name="azure-active-directory-graph-api"></a><span data-ttu-id="83ae7-103">Graph API do Active Directory do Azure</span><span class="sxs-lookup"><span data-stu-id="83ae7-103">Azure Active Directory Graph API</span></span>
> [!IMPORTANT]
> <span data-ttu-id="83ae7-104">É altamente recomendável usar o [Microsoft Graph](https://graph.microsoft.io/) em vez da API do Azure AD Graph para acessar recursos do Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="83ae7-104">We strongly recommend that you use [Microsoft Graph](https://graph.microsoft.io/) instead of Azure AD Graph API to access Azure Active Directory resources.</span></span> <span data-ttu-id="83ae7-105">Nossos esforços de desenvolvimento agora estão concentrados no Microsoft Graph e não há planejamento de novas melhorias para a API do Azure AD Graph.</span><span class="sxs-lookup"><span data-stu-id="83ae7-105">Our development efforts are now concentrated on Microsoft Graph and no further enhancements are planned for Azure AD Graph API.</span></span> <span data-ttu-id="83ae7-106">Há um número muito limitado de cenários para os quais a API do Azure AD Graph ainda pode ser apropriada; para obter mais informações, consulte a postagem no blog [Microsoft Graph ou o Azure AD Graph](https://dev.office.com/blogs/microsoft-graph-or-azure-ad-graph) no Centro de Desenvolvimento do Office.</span><span class="sxs-lookup"><span data-stu-id="83ae7-106">There are a very limited number of scenarios for which Azure AD Graph API might still be appropriate; for more information, see the [Microsoft Graph or the Azure AD Graph](https://dev.office.com/blogs/microsoft-graph-or-azure-ad-graph) blog post in the Office Dev Center.</span></span>
> 
> 

<span data-ttu-id="83ae7-107">A Graph API do Active Directory do Azure fornece acesso programático ao AD do Azure por meio de pontos de extremidade da API REST.</span><span class="sxs-lookup"><span data-stu-id="83ae7-107">The Azure Active Directory Graph API provides programmatic access to Azure AD through REST API endpoints.</span></span> <span data-ttu-id="83ae7-108">Os aplicativos podem usar a Graph API para realizar operações de criação, leitura, atualização e exclusão (CRUD) nos objetos e dados do diretório.</span><span class="sxs-lookup"><span data-stu-id="83ae7-108">Applications can use the Graph API to perform create, read, update, and delete (CRUD) operations on directory data and objects.</span></span> <span data-ttu-id="83ae7-109">Por exemplo, a Graph API dá suporte às seguintes operações comuns para um objeto de usuário:</span><span class="sxs-lookup"><span data-stu-id="83ae7-109">For example, the Graph API supports the following common operations for a user object:</span></span>

* <span data-ttu-id="83ae7-110">Criar um novo usuário em um diretório</span><span class="sxs-lookup"><span data-stu-id="83ae7-110">Create a new user in a directory</span></span>
* <span data-ttu-id="83ae7-111">Obter propriedades detalhadas do usuário, como seus grupos</span><span class="sxs-lookup"><span data-stu-id="83ae7-111">Get a user’s detailed properties, such as their groups</span></span>
* <span data-ttu-id="83ae7-112">Atualizar as propriedades do usuário, como sua localização e o número de telefone, ou alterar sua senha</span><span class="sxs-lookup"><span data-stu-id="83ae7-112">Update a user’s properties, such as their location and phone number, or change their password</span></span>
* <span data-ttu-id="83ae7-113">Verificar a associação de grupo do usuário para acesso baseado em função</span><span class="sxs-lookup"><span data-stu-id="83ae7-113">Check a user’s group membership for role-based access</span></span>
* <span data-ttu-id="83ae7-114">Desabilitar uma conta de usuário ou excluí-la totalmente</span><span class="sxs-lookup"><span data-stu-id="83ae7-114">Disable a user’s account or delete it entirely</span></span>

<span data-ttu-id="83ae7-115">Além de objetos de usuário, você pode executar operações semelhantes em outros objetos, como grupos e aplicativos.</span><span class="sxs-lookup"><span data-stu-id="83ae7-115">In addition to user objects, you can perform similar operations on other objects such as groups and applications.</span></span> <span data-ttu-id="83ae7-116">Para chamar a Graph API em um diretório, o aplicativo deve ser registrado com o AD do Azure e estar configurado para permitir acesso ao diretório.</span><span class="sxs-lookup"><span data-stu-id="83ae7-116">To call the Graph API on a directory, the application must be registered with Azure AD and be configured to allow access to the directory.</span></span> <span data-ttu-id="83ae7-117">Normalmente, isso é obtido por meio de um fluxo de consentimento do usuário ou administrador.</span><span class="sxs-lookup"><span data-stu-id="83ae7-117">This is normally achieved through a user or admin consent flow.</span></span>

<span data-ttu-id="83ae7-118">Para começar a usar a API do Azure Active Directory Graph, veja o [Guia de início rápido da API do Graph](active-directory-graph-api-quickstart.md) ou a [documentação de referência da API do Graph interativa](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/api-catalog).</span><span class="sxs-lookup"><span data-stu-id="83ae7-118">To begin using the Azure Active Directory Graph API, see the [Graph API Quickstart Guide](active-directory-graph-api-quickstart.md), or view the [interactive Graph API reference documentation](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/api-catalog).</span></span>

## <a name="features"></a><span data-ttu-id="83ae7-119">Recursos</span><span class="sxs-lookup"><span data-stu-id="83ae7-119">Features</span></span>
<span data-ttu-id="83ae7-120">A Graph API fornece os seguintes recursos:</span><span class="sxs-lookup"><span data-stu-id="83ae7-120">The Graph API provides the following features:</span></span>

* <span data-ttu-id="83ae7-121">**Pontos de extremidade da API REST**: a Graph API é um serviço RESTful composto por pontos de extremidade acessados por meio de solicitações HTTP padrão.</span><span class="sxs-lookup"><span data-stu-id="83ae7-121">**REST API Endpoints**: The Graph API is a RESTful service comprised of endpoints that are accessed using standard HTTP requests.</span></span> <span data-ttu-id="83ae7-122">A Graph API dá suporte a tipos de conteúdo XML ou JavaScript Object Notation (JSON) para solicitações e respostas.</span><span class="sxs-lookup"><span data-stu-id="83ae7-122">The Graph API supports XML or Javascript Object Notation (JSON) content types for requests and responses.</span></span> <span data-ttu-id="83ae7-123">Para saber mais, consulte [Referência da Graph API REST do AD do Azure](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/api-catalog).</span><span class="sxs-lookup"><span data-stu-id="83ae7-123">For more information, see [Azure AD Graph REST API Reference](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/api-catalog).</span></span>
* <span data-ttu-id="83ae7-124">**Autenticação com o AD do Azure**: cada solicitação à Graph API deve ser autenticada com o anexo de um JSON Web Token (JWT) no cabeçalho de Autorização da solicitação.</span><span class="sxs-lookup"><span data-stu-id="83ae7-124">**Authentication with Azure AD**: Every request to the Graph API must be authenticated by appending a JSON Web Token (JWT) in the Authorization header of the request.</span></span> <span data-ttu-id="83ae7-125">Esse token é adquirido ao fazer uma solicitação ao ponto de extremidade do AD do Azure e fornecer credenciais válidas.</span><span class="sxs-lookup"><span data-stu-id="83ae7-125">This token is acquired by making a request to Azure AD’s token endpoint and providing valid credentials.</span></span> <span data-ttu-id="83ae7-126">Você pode usar o fluxo de credenciais de cliente OAuth 2.0 ou o fluxo de concessão do código de autorização para adquirir um token para chamar o Graph.</span><span class="sxs-lookup"><span data-stu-id="83ae7-126">You can use the OAuth 2.0 client credentials flow or the authorization code grant flow to acquire a token to call the Graph.</span></span> <span data-ttu-id="83ae7-127">Para obter mais informações, veja [OAuth 2.0 no AD do Azure](https://msdn.microsoft.com/library/azure/dn645545.aspx).</span><span class="sxs-lookup"><span data-stu-id="83ae7-127">For more information, [OAuth 2.0 in Azure AD](https://msdn.microsoft.com/library/azure/dn645545.aspx).</span></span>
* <span data-ttu-id="83ae7-128">**Autorização baseada em função (RBAC)**: grupos de segurança são usados para executar a RBAC na Graph API.</span><span class="sxs-lookup"><span data-stu-id="83ae7-128">**Role-Based Authorization (RBAC)**: Security groups are used to perform RBAC in the Graph API.</span></span> <span data-ttu-id="83ae7-129">Por exemplo, se você quiser determinar se um usuário tem acesso a um recurso específico, o aplicativo pode chamar a operação [Verificar associação de grupo (transitiva)](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/groups-operations#FunctionsandactionsongroupsCheckmembershipinaspecificgrouptransitive) que retorna verdadeiro ou falso.</span><span class="sxs-lookup"><span data-stu-id="83ae7-129">For example, if you want to determine whether a user has access to a specific resource, the application can call the [Check Group Membership (transitive)](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/groups-operations#FunctionsandactionsongroupsCheckmembershipinaspecificgrouptransitive) operation, which returns true or false.</span></span>
* <span data-ttu-id="83ae7-130">**Consulta diferencial**: se quiser verificar alterações em um diretório em dois períodos de tempo sem precisar fazer consultas frequentes à Graph API, você pode fazer uma solicitação de consulta diferencial.</span><span class="sxs-lookup"><span data-stu-id="83ae7-130">**Differential Query**: If you want to check for changes in a directory between two time periods without having to make frequent queries to the Graph API, you can make a differential query request.</span></span> <span data-ttu-id="83ae7-131">Este tipo de solicitação retornará apenas as alterações feitas entre a solicitação de consulta diferencial anterior e a solicitação atual.</span><span class="sxs-lookup"><span data-stu-id="83ae7-131">This type of request will return only the changes made between the previous differential query request and the current request.</span></span> <span data-ttu-id="83ae7-132">Para saber mais, leia [Consulta diferencial da Graph API do AD do Azure](https://msdn.microsoft.com/Library/Azure/Ad/Graph/howto/azure-ad-graph-api-differential-query).</span><span class="sxs-lookup"><span data-stu-id="83ae7-132">For more information, see [Azure AD Graph API Differential Query](https://msdn.microsoft.com/Library/Azure/Ad/Graph/howto/azure-ad-graph-api-differential-query).</span></span>
* <span data-ttu-id="83ae7-133">**Extensões de diretório**: se estiver desenvolvendo um aplicativo que precisa ler ou gravar propriedades exclusivas para objetos de diretório, você pode registrar e usar valores de extensão usando a Graph API.</span><span class="sxs-lookup"><span data-stu-id="83ae7-133">**Directory Extensions**: If you are developing an application that needs to read or write unique properties for directory objects, you can register and use extension values by using the Graph API.</span></span> <span data-ttu-id="83ae7-134">Por exemplo, se seu aplicativo requer uma propriedade Skype ID para cada usuário, você pode registrar a nova propriedade no diretório e ela estará disponível para todos os objetos de usuário.</span><span class="sxs-lookup"><span data-stu-id="83ae7-134">For example, if your application requires a Skype ID property for each user, you can register the new property in the directory and it will be available on every user object.</span></span> <span data-ttu-id="83ae7-135">Para obter mais informações, veja [Extensões de esquema do diretório da Graph API do AD do Azure](https://msdn.microsoft.com/Library/Azure/Ad/Graph/howto/azure-ad-graph-api-directory-schema-extensions).</span><span class="sxs-lookup"><span data-stu-id="83ae7-135">For more information, see [Azure AD Graph API Directory Schema Extensions](https://msdn.microsoft.com/Library/Azure/Ad/Graph/howto/azure-ad-graph-api-directory-schema-extensions).</span></span>
* <span data-ttu-id="83ae7-136">**Protegida por escopos de permissão**: a API do Graph do AAD expõe os escopos de permissão que permitem o acesso seguro/consentido aos dados do AAD e dá suporte a uma variedade de tipos de aplicativo cliente, incluindo:</span><span class="sxs-lookup"><span data-stu-id="83ae7-136">**Secured by permission scopes**: AAD Graph API exposes permission scopes that enable secure/consented access to AAD data, and support a variety of client app types, including:</span></span>
  
  * <span data-ttu-id="83ae7-137">aqueles com uma interface do usuário que recebem acesso delegado aos dados por meio de autorização do usuário conectado (delegado)</span><span class="sxs-lookup"><span data-stu-id="83ae7-137">those with a user interface which are given delegated access to data via authorization from the signed-in user (delegated)</span></span>
  * <span data-ttu-id="83ae7-138">aqueles que usam controle de acesso baseado em função definido por aplicativo, como clientes de serviço/daemon (funções de aplicativo)</span><span class="sxs-lookup"><span data-stu-id="83ae7-138">those that use application-define role-based access control such as service/daemon clients (app roles)</span></span>
    
    <span data-ttu-id="83ae7-139">Os escopos delegado e de permissão de função de aplicativo representam um privilégio exposto pela API do Graph e podem ser solicitados por aplicativos cliente por meio dos recursos de permissões de registro do aplicativo [no Portal do Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="83ae7-139">Both delegated and app role permission scopes represent a privilege exposed by the Graph API and can be requested by client applications through application registration permissions [features in the Azure portal](https://portal.azure.com).</span></span> <span data-ttu-id="83ae7-140">Os clientes podem verificar os escopos de permissão concedidos a eles inspecionando a declaração de escopo (“scp”) recebida no token de acesso quanto às permissões delegadas e a declaração de funções (“funções”) quanto às permissões de função de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="83ae7-140">Clients can verify the permission scopes granted to them by inspecting the scope (“scp”) claim received in the access token for delegated permissions and the roles (“roles”) claim for app role permissions.</span></span> <span data-ttu-id="83ae7-141">Saiba mais sobre [Escopos de permissão da API do Graph do Azure AD](https://msdn.microsoft.com/Library/Azure/Ad/Graph/howto/azure-ad-graph-api-permission-scopes).</span><span class="sxs-lookup"><span data-stu-id="83ae7-141">Learn more about [Azure AD Graph API Permission Scopes](https://msdn.microsoft.com/Library/Azure/Ad/Graph/howto/azure-ad-graph-api-permission-scopes).</span></span>

## <a name="scenarios"></a><span data-ttu-id="83ae7-142">Cenários</span><span class="sxs-lookup"><span data-stu-id="83ae7-142">Scenarios</span></span>
<span data-ttu-id="83ae7-143">A Graph API habilita muitos cenários de aplicativos.</span><span class="sxs-lookup"><span data-stu-id="83ae7-143">The Graph API enables many application scenarios.</span></span> <span data-ttu-id="83ae7-144">A seguir, os cenários mais comuns:</span><span class="sxs-lookup"><span data-stu-id="83ae7-144">The following scenarios are the most common:</span></span>

* <span data-ttu-id="83ae7-145">**Aplicativo de linha de negócios (único locatário)**: neste cenário, um desenvolvedor corporativo trabalha para uma organização que tem uma assinatura do Office 365.</span><span class="sxs-lookup"><span data-stu-id="83ae7-145">**Line of Business (Single Tenant) Application**: In this scenario, an enterprise developer works for an organization that has an Office 365 subscription.</span></span> <span data-ttu-id="83ae7-146">O desenvolvedor está criando um aplicativo Web que interage com o Azure AD para executar tarefas como a atribuição de uma licença para um usuário.</span><span class="sxs-lookup"><span data-stu-id="83ae7-146">The developer is building a web application that interacts with Azure AD to perform tasks such assigning a license to a user.</span></span> <span data-ttu-id="83ae7-147">Esta tarefa exige acesso à Graph API para que o desenvolvedor registre o aplicativo de único locatário no Azure AD e configure as permissões de leitura e gravação para a Graph API.</span><span class="sxs-lookup"><span data-stu-id="83ae7-147">This task requires access to the Graph API, so the developer registers the single tenant application in Azure AD and configures read and write permissions for the Graph API.</span></span> <span data-ttu-id="83ae7-148">Em seguida, o aplicativo é configurado para usar suas próprias credenciais ou aquelas do usuário conectado no momento para adquirir um token para chamar a Graph API.</span><span class="sxs-lookup"><span data-stu-id="83ae7-148">Then the application is configured to use either its own credentials or those of the currently sign-in user to acquire a token to call the Graph API.</span></span>
* <span data-ttu-id="83ae7-149">**Aplicativo de software como serviço (multilocatário)**: neste cenário, um fornecedor de software independente (ISV) está desenvolvendo um aplicativo Web multilocatário hospedado que fornece recursos de gerenciamento de usuário para outras organizações que usam o AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="83ae7-149">**Software as a Service Application (Multi-Tenant)**: In this scenario, an independent software vendor (ISV) is developing hosted multi-tenant web application that provides user management features for other organizations that use Azure AD.</span></span> <span data-ttu-id="83ae7-150">Esses recursos exigem acesso a objetos de diretório, por isso o aplicativo precisa chamar a Graph API.</span><span class="sxs-lookup"><span data-stu-id="83ae7-150">These features require access to directory objects, and so the application needs to call the Graph API.</span></span> <span data-ttu-id="83ae7-151">O desenvolvedor registra o aplicativo no Azure AD, configura para exigir as permissões de leitura e gravação para a Graph API e habilita o acesso externo para que outras organizações possam concordar com o uso do aplicativo em seu diretório.</span><span class="sxs-lookup"><span data-stu-id="83ae7-151">The developer registers the application in Azure AD, configures it to require read and write permissions for the Graph API, and then enables external access so that other organizations can consent to use the application in their directory.</span></span> <span data-ttu-id="83ae7-152">Quando um usuário de outra organização autentica o aplicativo pela primeira vez, é mostrada uma caixa de diálogo de consentimento com as permissões que o aplicativo está solicitando.</span><span class="sxs-lookup"><span data-stu-id="83ae7-152">When a user in another organization authenticates to the application for the first time, they are shown a consent dialog with the permissions the application is requesting.</span></span>  <span data-ttu-id="83ae7-153">Conceder consentimento dará o aplicativo às permissões solicitadas para a Graph API no diretório do usuário.</span><span class="sxs-lookup"><span data-stu-id="83ae7-153">Granting consent will then give the application those requested permissions to the Graph API in the user’s directory.</span></span> <span data-ttu-id="83ae7-154">Para saber mais sobre a estrutura de consentimento, consulte [Visão geral da estrutura de consentimento](active-directory-integrating-applications.md).</span><span class="sxs-lookup"><span data-stu-id="83ae7-154">For more information on the consent framework, see [Overview of the Consent Framework](active-directory-integrating-applications.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="83ae7-155">Consulte também</span><span class="sxs-lookup"><span data-stu-id="83ae7-155">See Also</span></span>
[<span data-ttu-id="83ae7-156">Guia de início rápido para a Graph API do AD do Azure</span><span class="sxs-lookup"><span data-stu-id="83ae7-156">Azure AD Graph API Quickstart Guide</span></span>](active-directory-graph-api-quickstart.md)

[<span data-ttu-id="83ae7-157">Documentação do REST para a Graph AD</span><span class="sxs-lookup"><span data-stu-id="83ae7-157">AD Graph REST documentation</span></span>](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/api-catalog)

[<span data-ttu-id="83ae7-158">Guia do desenvolvedor do Active Directory do Azure</span><span class="sxs-lookup"><span data-stu-id="83ae7-158">Azure Active Directory developer's guide</span></span>](active-directory-developers-guide.md)

