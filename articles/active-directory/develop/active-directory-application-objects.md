---
title: "Objetos de entidade de serviço e aplicativo do Azure Active Directory | Microsoft Docs"
description: "Uma discussão sobre a relação entre objetos de aplicativo e de entidade de serviço no Azure Active Directory"
documentationcenter: dev-center-name
author: dstrockis
manager: mbaldwin
services: active-directory
editor: 
ms.assetid: adfc0569-dc91-48fe-92c3-b5b4833703de
ms.service: active-directory
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 04/28/2016
ms.author: dastrock
ms.custom: aaddev
ms.openlocfilehash: 4c75ade5f4e47ef64ccc0fe8af4b174c377dc7bc
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/11/2017
---
# <a name="application-and-service-principal-objects-in-azure-active-directory-azure-ad"></a><span data-ttu-id="7c534-103">Objetos de entidade de serviço e aplicativo no Azure Active Directory (Azure AD)</span><span class="sxs-lookup"><span data-stu-id="7c534-103">Application and service principal objects in Azure Active Directory (Azure AD)</span></span>
<span data-ttu-id="7c534-104">Às vezes, o significado do termo "aplicativo" pode ser interpretado de forma errada quando usado no contexto do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="7c534-104">Sometimes the meaning of the term "application" can be misunderstood when used in the context of Azure AD.</span></span> <span data-ttu-id="7c534-105">A meta deste artigo é deixar isso claro, esclarecendo os aspectos conceituais e concretos de integração de aplicativos do Azure AD, seguidos de uma ilustração de registro e consentimento para um [aplicativo multilocatário](active-directory-dev-glossary.md#multi-tenant-application).</span><span class="sxs-lookup"><span data-stu-id="7c534-105">The goal of this article is to make it clearer, by clarifying conceptual and concrete aspects of Azure AD application integration, with an illustration of registration and consent for a [multi-tenant application](active-directory-dev-glossary.md#multi-tenant-application).</span></span>

## <a name="overview"></a><span data-ttu-id="7c534-106">Visão geral</span><span class="sxs-lookup"><span data-stu-id="7c534-106">Overview</span></span>
<span data-ttu-id="7c534-107">Um aplicativo que foi integrado ao Azure AD tem implicações que ultrapassam o aspecto de software.</span><span class="sxs-lookup"><span data-stu-id="7c534-107">An application that has been integrated with Azure AD has implications that go beyond the software aspect.</span></span> <span data-ttu-id="7c534-108">"Aplicativo" é frequentemente usado como um termo conceitual, referindo-se não apenas ao software de aplicativo, mas também ao seu registro e função no Azure AD nas "conversas" de autenticação/autorização em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="7c534-108">"Application" is frequently used as a conceptual term, referring to not only the the application software, but also its Azure AD registration and role in authentication/authorization "conversations" at runtime.</span></span> <span data-ttu-id="7c534-109">Por definição, um aplicativo pode funcionar em uma função de [cliente](active-directory-dev-glossary.md#client-application) (consumindo um recurso), uma função de [servidor de recursos](active-directory-dev-glossary.md#resource-server) (expondo APIs a clientes) ou ambos.</span><span class="sxs-lookup"><span data-stu-id="7c534-109">By definition, an application can function in a [client](active-directory-dev-glossary.md#client-application) role (consuming a resource), a [resource server](active-directory-dev-glossary.md#resource-server) role (exposing APIs to clients), or even both.</span></span> <span data-ttu-id="7c534-110">O protocolo de conversa é definido por um [fluxo de Concessão de Autorização OAuth 2.0](active-directory-dev-glossary.md#authorization-grant), permitindo que o cliente/recurso acesse/proteja dados de um recurso, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="7c534-110">The conversation protocol is defined by an [OAuth 2.0 Authorization Grant flow](active-directory-dev-glossary.md#authorization-grant), allowing the client/resource to access/protect a resource's data respectively.</span></span> <span data-ttu-id="7c534-111">Agora, vamos nos aprofundar e ver como o modelo de aplicativo do Azure AD representa um aplicativo no tempo de design e no tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="7c534-111">Now let's go a level deeper, and see how the Azure AD application model represents an application at design-time and run-time.</span></span> 

## <a name="application-registration"></a><span data-ttu-id="7c534-112">Registro de aplicativo</span><span class="sxs-lookup"><span data-stu-id="7c534-112">Application registration</span></span>
<span data-ttu-id="7c534-113">Quando você registra um aplicativo do Azure AD no [Portal do Azure][AZURE-Portal], dois objetos são criados no locatário do Azure AD: um objeto de aplicativo e um objeto de entidade de serviço.</span><span class="sxs-lookup"><span data-stu-id="7c534-113">When you register an Azure AD application in the [Azure portal][AZURE-Portal], two objects are created in your Azure AD tenant: an application object, and a service principal object.</span></span>

#### <a name="application-object"></a><span data-ttu-id="7c534-114">Objeto de aplicativo</span><span class="sxs-lookup"><span data-stu-id="7c534-114">Application object</span></span>
<span data-ttu-id="7c534-115">Um aplicativo do Azure AD é definido por seu único objeto de aplicativo, que reside no locatário do Azure AD em que o aplicativo foi registrado, sendo conhecido como o locatário "inicial" do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="7c534-115">An Azure AD application is defined by its one and only application object, which resides in the Azure AD tenant where the application was registered, known as the application's "home" tenant.</span></span> <span data-ttu-id="7c534-116">A [entidade de Aplicativo][AAD-Graph-App-Entity] do Azure AD Graph define o esquema para as propriedades de um objeto de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="7c534-116">The Azure AD Graph [Application entity][AAD-Graph-App-Entity] defines the schema for an application object's properties.</span></span> 

#### <a name="service-principal-object"></a><span data-ttu-id="7c534-117">Objeto de entidade de serviço</span><span class="sxs-lookup"><span data-stu-id="7c534-117">Service principal object</span></span>
<span data-ttu-id="7c534-118">O objeto de entidade de serviço define a política e as permissões para o uso de um aplicativo em um locatário específico, fornecendo a base para que uma entidade de segurança represente o aplicativo em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="7c534-118">The service principal object defines the policy and permissions for an application's use in a specific tenant, providing the basis for a security principal to represent the application at run-time.</span></span> <span data-ttu-id="7c534-119">A [entidade ServicePrincipal][AAD-Graph-Sp-Entity] do Azure AD Graph define o esquema para as propriedades do objeto de uma entidade de serviço.</span><span class="sxs-lookup"><span data-stu-id="7c534-119">The Azure AD Graph [ServicePrincipal entity][AAD-Graph-Sp-Entity] defines the schema for a service principal object's properties.</span></span> 

#### <a name="application-and-service-principal-relationship"></a><span data-ttu-id="7c534-120">Relação do aplicativo e a entidade de serviço</span><span class="sxs-lookup"><span data-stu-id="7c534-120">Application and service principal relationship</span></span>
<span data-ttu-id="7c534-121">Você pode considerar o aplicativo como a representação *global* de seu aplicativo para uso em todos os locatários, e a entidade de serviço como a representação *local* para uso em um locatário específico.</span><span class="sxs-lookup"><span data-stu-id="7c534-121">Consider the application object as the *global* representation of your application for use across all tenants, and the service principal as the *local* representation for use in a specific tenant.</span></span> <span data-ttu-id="7c534-122">O objeto de aplicativo serve como o modelo do qual as propriedades comuns e padrão são *derivadas* para uso na criação de objetos de entidade de serviço correspondentes.</span><span class="sxs-lookup"><span data-stu-id="7c534-122">The application object serves as the template from which common and default properties are *derived* for use in creating corresponding service principal objects.</span></span> <span data-ttu-id="7c534-123">Portanto, um objeto de aplicativo tem uma relação de um para um com o aplicativo de software, e uma relação de um para muitos com seus objetos de entidade de serviço correspondentes.</span><span class="sxs-lookup"><span data-stu-id="7c534-123">An application object therefore has a 1:1 relationship with the software application, and a 1:many relationship with its corresponding service principal object(s).</span></span>

<span data-ttu-id="7c534-124">Uma entidade de serviço deve ser criada em cada locatário no qual o aplicativo será usado, permitindo o estabelecimento de uma identidade para entrada e/ou acesso aos recursos que estão sendo protegidos pelo locatário.</span><span class="sxs-lookup"><span data-stu-id="7c534-124">A service principal must be created in each tenant where the application will be used, enabling it to establish an identity for sign-in and/or access to resources being secured by the tenant.</span></span> <span data-ttu-id="7c534-125">Um aplicativo de locatário único terá apenas uma entidade de serviço (em seu locatário inicial), geralmente criado e com consentimento para uso durante o registro do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="7c534-125">A single-tenant application will have only one service principal (in its home tenant), usually created and consented for use during application registration.</span></span> <span data-ttu-id="7c534-126">Uma API/aplicativo Web multilocatário também terá uma entidade de serviço criada em cada locatário no qual um usuário consentiu com o uso.</span><span class="sxs-lookup"><span data-stu-id="7c534-126">A multi-tenant Web application/API will also have a service principal created in each tenant where a user from that tenant has consented to its use.</span></span>  

> [!NOTE]
> <span data-ttu-id="7c534-127">As alterações feitas no objeto de aplicativo também são refletidas apenas no objeto de entidade de serviço do locatário inicial do aplicativo (o locatário em que ele foi registrado).</span><span class="sxs-lookup"><span data-stu-id="7c534-127">Any changes you make to your application object, are also reflected in its service principal object in the application's home tenant only (the tenant where it was registered).</span></span> <span data-ttu-id="7c534-128">Para aplicativos multilocatário, as alterações no objeto do aplicativo não serão refletidas em objetos de entidade de serviço dos locatários de qualquer consumidor até que o acesso seja removido por meio do [Painel de Acesso do Aplicativo](https://myapps.microsoft.com) e concedido novamente.</span><span class="sxs-lookup"><span data-stu-id="7c534-128">For multi-tenant applications, changes to the application object are not reflected in any consumer tenants' service principal objects, until the access is removed via the [Application Access Panel](https://myapps.microsoft.com) and granted again.</span></span>
><br>  
> <span data-ttu-id="7c534-129">Observe também que os aplicativos nativos são registrados como multilocatários, por padrão.</span><span class="sxs-lookup"><span data-stu-id="7c534-129">Also note that native applications are registered as multi-tenant by default.</span></span>
> 
> 

## <a name="example"></a><span data-ttu-id="7c534-130">Exemplo</span><span class="sxs-lookup"><span data-stu-id="7c534-130">Example</span></span>
<span data-ttu-id="7c534-131">O diagrama a seguir ilustra o relacionamento entre o objeto de aplicativo de um aplicativo e os objetos de entidade de serviço correspondentes, no contexto de um aplicativo multilocatário de exemplo chamado **aplicativo de RH**.</span><span class="sxs-lookup"><span data-stu-id="7c534-131">The following diagram illustrates the relationship between an application's application object and corresponding service principal objects, in the context of a sample multi-tenant application called **HR app**.</span></span> <span data-ttu-id="7c534-132">Há três locatários do Azure AD nesse cenário:</span><span class="sxs-lookup"><span data-stu-id="7c534-132">There are three Azure AD tenants in this scenario:</span></span> 

* <span data-ttu-id="7c534-133">**Adatum** - o locatário usado pela empresa que desenvolveu o **aplicativo de HR**</span><span class="sxs-lookup"><span data-stu-id="7c534-133">**Adatum** - the tenant used by the company that developed the **HR app**</span></span>
* <span data-ttu-id="7c534-134">**Contoso** - locatário utilizado pela empresa Contoso, que é consumidora do **aplicativo de HR**</span><span class="sxs-lookup"><span data-stu-id="7c534-134">**Contoso** - the tenant used by the Contoso organization, which is a consumer of the **HR app**</span></span>
* <span data-ttu-id="7c534-135">**Fabrikam** - o locatário usado pela organização Fabrikam, que também consome o **aplicativo de HR**</span><span class="sxs-lookup"><span data-stu-id="7c534-135">**Fabrikam** - the tenant used by the Fabrikam organization, which also consumes the **HR app**</span></span>

![Relação entre um objeto de aplicativo e um objeto de entidade de serviço](./media/active-directory-application-objects/application-objects-relationship.png)

<span data-ttu-id="7c534-137">No diagrama acima, a Etapa 1 é o processo de criação do aplicativo e dos objetos de entidade de serviço no locatário inicial do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="7c534-137">In the previous diagram, Step 1 is the process of creating the application and service principal objects in the application's home tenant.</span></span>

<span data-ttu-id="7c534-138">Na Etapa 2, quando os administradores da Contoso e da Fabrikam concluem o consentimento, um objeto de entidade de serviço é criado no locatário do Azure AD da empresa e recebe as permissões concedidas pelo administrador.</span><span class="sxs-lookup"><span data-stu-id="7c534-138">In Step 2, when Contoso and Fabrikam administrators complete consent, a service principal object is created in their company's Azure AD tenant and assigned the permissions that the administrator granted.</span></span> <span data-ttu-id="7c534-139">Observe também que o aplicativo de RH pode ser configurado/projetado para permitir o consentimento pelos usuários para uso individual.</span><span class="sxs-lookup"><span data-stu-id="7c534-139">Also note that the HR app could be configured/designed to allow consent by users for individual use.</span></span>

<span data-ttu-id="7c534-140">Na etapa 3, cada um dos locatários do consumidor do aplicativo de RH (Contoso e Fabrikam) tem seu próprio objeto de entidade de serviço.</span><span class="sxs-lookup"><span data-stu-id="7c534-140">In Step 3, the consumer tenants of the HR application (Contoso and Fabrikam) each have their own service principal object.</span></span> <span data-ttu-id="7c534-141">Cada um deles representa o uso de uma instância do aplicativo em tempo de execução, controlado pelas permissões concedidas pelo respectivo administrador.</span><span class="sxs-lookup"><span data-stu-id="7c534-141">Each represents their use of an instance of the application at runtime, governed by the permissions consented by the respective administrator.</span></span>

## <a name="next-steps"></a><span data-ttu-id="7c534-142">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="7c534-142">Next steps</span></span>
<span data-ttu-id="7c534-143">Um objeto de aplicativo do aplicativo pode ser acessado por meio da API do Graph do Azure AD, do editor de manifesto do aplicativo do [Portal do Azure][AZURE-Portal] ou dos [cmdlets do Azure AD PowerShell](https://docs.microsoft.com/powershell/azure/overview?view=azureadps-2.0) conforme representado por sua [Entidade de aplicativo][AAD-Graph-App-Entity] do OData.</span><span class="sxs-lookup"><span data-stu-id="7c534-143">An application's application object can be accessed via the Azure AD Graph API, the [Azure portal's][AZURE-Portal] application manifest editor, or [Azure AD PowerShell cmdlets](https://docs.microsoft.com/powershell/azure/overview?view=azureadps-2.0), as represented by its OData [Application entity][AAD-Graph-App-Entity].</span></span>

<span data-ttu-id="7c534-144">Um objeto de entidade de serviço do aplicativo pode ser acessado por meio da API do Graph do Azure AD ou dos [cmdlets do Azure AD PowerShell](https://docs.microsoft.com/powershell/azure/overview?view=azureadps-2.0), conforme representado por sua [entidade ServicePrincipal][AAD-Graph-Sp-Entity] do OData.</span><span class="sxs-lookup"><span data-stu-id="7c534-144">An application's service principal object can be accessed via the Azure AD Graph API or [Azure AD PowerShell cmdlets](https://docs.microsoft.com/powershell/azure/overview?view=azureadps-2.0), as represented by its OData [ServicePrincipal entity][AAD-Graph-Sp-Entity].</span></span>

<span data-ttu-id="7c534-145">O [Azure AD Graph Explorer](https://graphexplorer.azurewebsites.net/) é útil para consultar o aplicativo e os objetos de entidade de serviço.</span><span class="sxs-lookup"><span data-stu-id="7c534-145">The [Azure AD Graph Explorer](https://graphexplorer.azurewebsites.net/) is useful for querying both the application and service principal objects.</span></span>

<!--Image references-->

<!--Reference style links -->
[AAD-Graph-App-Entity]: https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/entity-and-complex-type-reference#application-entity
[AAD-Graph-Sp-Entity]: https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/entity-and-complex-type-reference#serviceprincipal-entity
[AZURE-Portal]: https://portal.azure.com
