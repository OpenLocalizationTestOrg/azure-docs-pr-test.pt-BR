---
title: "aaaAuthentication cenários do AD do Azure | Microsoft Docs"
description: "Uma visão geral dos cenários mais comuns de autenticação do hello cinco para Azure Active Directory (AAD)"
services: active-directory
documentationcenter: dev-center-name
author: skwan
manager: mbaldwin
editor: 
ms.assetid: 0c84e7d0-16aa-4897-82f2-f53c6c990fd9
ms.service: active-directory
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 04/27/2017
ms.author: skwan
ms.custom: aaddev
ms.openlocfilehash: 5b391e3f096fcb52934c4a8aff08688352bfd3dc
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="authentication-scenarios-for-azure-ad"></a><span data-ttu-id="eaadd-103">Cenários de autenticação do AD do Azure</span><span class="sxs-lookup"><span data-stu-id="eaadd-103">Authentication Scenarios for Azure AD</span></span>
<span data-ttu-id="eaadd-104">Azure Active Directory (AD do Azure) simplifica a autenticação para desenvolvedores, fornecendo identidade como um serviço, com suporte para protocolos de padrão da indústria, como OAuth 2.0 e OpenID Connect, bem como bibliotecas de código aberto para diferentes plataformas toohelp você Inicie a codificação rapidamente.</span><span class="sxs-lookup"><span data-stu-id="eaadd-104">Azure Active Directory (Azure AD) simplifies authentication for developers by providing identity as a service, with support for industry-standard protocols such as OAuth 2.0 and OpenID Connect, as well as open source libraries for different platforms toohelp you start coding quickly.</span></span> <span data-ttu-id="eaadd-105">Este documento ajudará você entender Olá suporte de vários cenários do AD do Azure e mostrará como tooget iniciada.</span><span class="sxs-lookup"><span data-stu-id="eaadd-105">This document will help you understand hello various scenarios Azure AD supports and will show you how tooget started.</span></span> <span data-ttu-id="eaadd-106">Ele é dividido em Olá seções a seguir:</span><span class="sxs-lookup"><span data-stu-id="eaadd-106">It’s divided into hello following sections:</span></span>

* [<span data-ttu-id="eaadd-107">Noções básicas de autenticação no Azure AD.</span><span class="sxs-lookup"><span data-stu-id="eaadd-107">Basics of Authentication in Azure AD</span></span>](#basics-of-authentication-in-azure-ad)
* [<span data-ttu-id="eaadd-108">Declarações em tokens de segurança do Azure AD</span><span class="sxs-lookup"><span data-stu-id="eaadd-108">Claims in Azure AD Security Tokens</span></span>](#claims-in-azure-ad-security-tokens)
* [<span data-ttu-id="eaadd-109">Noções básicas de registrar um aplicativo no Azure AD</span><span class="sxs-lookup"><span data-stu-id="eaadd-109">Basics of Registering an Application in Azure AD</span></span>](#basics-of-registering-an-application-in-azure-ad)
* [<span data-ttu-id="eaadd-110">Cenários e tipos de aplicativos</span><span class="sxs-lookup"><span data-stu-id="eaadd-110">Application Types and Scenarios</span></span>](#application-types-and-scenarios)
  
  * [<span data-ttu-id="eaadd-111">TooWeb de navegador da Web aplicativo</span><span class="sxs-lookup"><span data-stu-id="eaadd-111">Web Browser tooWeb Application</span></span>](#web-browser-to-web-application)
  * [<span data-ttu-id="eaadd-112">SPA (Aplicativo de Página Única)</span><span class="sxs-lookup"><span data-stu-id="eaadd-112">Single Page Application (SPA)</span></span>](#single-page-application-spa)
  * [<span data-ttu-id="eaadd-113">TooWeb do aplicativo nativo API</span><span class="sxs-lookup"><span data-stu-id="eaadd-113">Native Application tooWeb API</span></span>](#native-application-to-web-api)
  * [<span data-ttu-id="eaadd-114">TooWeb de aplicativo da Web API</span><span class="sxs-lookup"><span data-stu-id="eaadd-114">Web Application tooWeb API</span></span>](#web-application-to-web-api)
  * [<span data-ttu-id="eaadd-115">TooWeb daemon ou aplicativo de servidor API</span><span class="sxs-lookup"><span data-stu-id="eaadd-115">Daemon or Server Application tooWeb API</span></span>](#daemon-or-server-application-to-web-api)

## <a name="basics-of-authentication-in-azure-ad"></a><span data-ttu-id="eaadd-116">Noções básicas de autenticação no Azure AD.</span><span class="sxs-lookup"><span data-stu-id="eaadd-116">Basics of Authentication in Azure AD</span></span>
<span data-ttu-id="eaadd-117">Se você não estiver familiarizado com os conceitos básicos de autenticação no Azure AD, leia esta seção.</span><span class="sxs-lookup"><span data-stu-id="eaadd-117">If you are unfamiliar with basic concepts of authentication in Azure AD, read this section.</span></span> <span data-ttu-id="eaadd-118">Caso contrário, talvez você queira tooskip para baixo demais[tipos de aplicativos e cenários](#application-types-and-scenarios).</span><span class="sxs-lookup"><span data-stu-id="eaadd-118">Otherwise, you may want tooskip down too[Application Types and Scenarios](#application-types-and-scenarios).</span></span>

<span data-ttu-id="eaadd-119">Vamos considerar o cenário mais básico de saudação em que a identidade é necessária: tooauthenticate tooa aplicativo precisa de um usuário em um navegador da web.</span><span class="sxs-lookup"><span data-stu-id="eaadd-119">Let’s consider hello most basic scenario where identity is required: a user in a web browser needs tooauthenticate tooa web application.</span></span> <span data-ttu-id="eaadd-120">Este cenário é descrito mais detalhadamente nos Olá [tooWeb do navegador da Web aplicativo](#web-browser-to-web-application) seção, mas ele do útil iniciando tooillustrate ponto Olá recursos do AD do Azure e Conceituar como funciona o cenário de saudação.</span><span class="sxs-lookup"><span data-stu-id="eaadd-120">This scenario is described in greater detail in hello [Web Browser tooWeb Application](#web-browser-to-web-application) section, but it’s a useful starting point tooillustrate hello capabilities of Azure AD and conceptualize how hello scenario works.</span></span> <span data-ttu-id="eaadd-121">Considere Olá diagrama para este cenário a seguir:</span><span class="sxs-lookup"><span data-stu-id="eaadd-121">Consider hello following diagram for this scenario:</span></span>

![Visão geral do aplicativo de logon tooweb](./media/active-directory-authentication-scenarios/basics_of_auth_in_aad.png)

<span data-ttu-id="eaadd-123">Com o diagrama de saudação acima em mente, aqui está o que você precisa tooknow sobre seus vários componentes:</span><span class="sxs-lookup"><span data-stu-id="eaadd-123">With hello diagram above in mind, here’s what you need tooknow about its various components:</span></span>

* <span data-ttu-id="eaadd-124">O AD do Azure é o provedor de identidade hello, responsável por verificar a identidade de saudação de usuários e aplicativos que existem no diretório da organização e, finalmente, emitir tokens de segurança após a autenticação bem-sucedida desses usuários e aplicativos.</span><span class="sxs-lookup"><span data-stu-id="eaadd-124">Azure AD is hello identity provider, responsible for verifying hello identity of users and applications that exist in an organization’s directory, and ultimately issuing security tokens upon successful authentication of those users and applications.</span></span>
* <span data-ttu-id="eaadd-125">Um aplicativo que deseja toooutsource autenticação tooAzure AD deve ser registrado no AD do Azure, que registra e identifica exclusivamente o aplicativo hello no diretório de saudação.</span><span class="sxs-lookup"><span data-stu-id="eaadd-125">An application that wants toooutsource authentication tooAzure AD must be registered in Azure AD, which registers and uniquely identifies hello app in hello directory.</span></span>
* <span data-ttu-id="eaadd-126">Os desenvolvedores podem usar Olá software livre do AD do Azure bibliotecas toomake autenticação fácil ao manipular detalhes de protocolo Olá para você.</span><span class="sxs-lookup"><span data-stu-id="eaadd-126">Developers can use hello open source Azure AD authentication libraries toomake authentication easy by handling hello protocol details for you.</span></span> <span data-ttu-id="eaadd-127">Consulte [Bibliotecas de autenticação do Azure Active Directory](active-directory-authentication-libraries.md) para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="eaadd-127">See [Azure Active Directory Authentication Libraries](active-directory-authentication-libraries.md) for more information.</span></span>

<span data-ttu-id="eaadd-128">• Uma vez um usuário foi autenticado, o aplicativo hello deve validar tooensure de token de segurança do usuário Olá que a autenticação tenha sido bem-sucedida para Olá se destina a partes.</span><span class="sxs-lookup"><span data-stu-id="eaadd-128">• Once a user has been authenticated, hello application must validate hello user’s security token tooensure that authentication was successful for hello intended parties.</span></span> <span data-ttu-id="eaadd-129">Os desenvolvedores podem usar Olá fornecido a validação de toohandle de bibliotecas de autenticação de qualquer token do AD do Azure, incluindo o JSON Web Tokens (JWT) ou SAML 2.0.</span><span class="sxs-lookup"><span data-stu-id="eaadd-129">Developers can use hello provided authentication libraries toohandle validation of any token from Azure AD, including JSON Web Tokens (JWT) or SAML 2.0.</span></span> <span data-ttu-id="eaadd-130">Se você quiser tooperform validação manualmente, consulte Olá [manipulador de Token de JWT](https://msdn.microsoft.com/library/dn205065.aspx) documentação.</span><span class="sxs-lookup"><span data-stu-id="eaadd-130">If you want tooperform validation manually, see hello [JWT Token Handler](https://msdn.microsoft.com/library/dn205065.aspx) documentation.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="eaadd-131">O AD do Azure usa criptografia de chave pública toosign tokens e verificar se eles são válidos.</span><span class="sxs-lookup"><span data-stu-id="eaadd-131">Azure AD uses public key cryptography toosign tokens and verify that they are valid.</span></span> <span data-ttu-id="eaadd-132">Consulte [importantes informações sobre assinatura de substituição de chave no AD do Azure](active-directory-signing-key-rollover.md) para obter mais informações sobre a lógica necessária Olá que você deve ter em seu aplicativo tooensure ele esteja sempre atualizado com chaves de hello mais recentes.</span><span class="sxs-lookup"><span data-stu-id="eaadd-132">See [Important Information About Signing Key Rollover in Azure AD](active-directory-signing-key-rollover.md) for more information on hello necessary logic you must have in your application tooensure it’s always updated with hello latest keys.</span></span>
> 
> 

<span data-ttu-id="eaadd-133">• fluxo de saudação de solicitações e respostas Olá processo de autenticação é determinado pelo protocolo de autenticação de saudação que foi usado, como OAuth 2.0, OpenID Connect, WS-Federation ou SAML 2.0.</span><span class="sxs-lookup"><span data-stu-id="eaadd-133">• hello flow of requests and responses for hello authentication process is determined by hello authentication protocol that was used, such as OAuth 2.0, OpenID Connect, WS-Federation, or SAML 2.0.</span></span> <span data-ttu-id="eaadd-134">Esses protocolos são discutidos detalhadamente no hello [protocolos de autenticação do Azure Active Directory](active-directory-authentication-protocols.md) tópico e nas seções de saudação abaixo.</span><span class="sxs-lookup"><span data-stu-id="eaadd-134">These protocols are discussed in more detail in hello [Azure Active Directory Authentication Protocols](active-directory-authentication-protocols.md) topic and in hello sections below.</span></span>

> [!NOTE]
> <span data-ttu-id="eaadd-135">AD do Azure suporta Olá OAuth 2.0 e OpenID Connect normas de amplo usam de tokens de portador, incluindo tokens de portador representados como JWTs.</span><span class="sxs-lookup"><span data-stu-id="eaadd-135">Azure AD supports hello OAuth 2.0 and OpenID Connect standards that make extensive use of bearer tokens, including bearer tokens represented as JWTs.</span></span> <span data-ttu-id="eaadd-136">Um token de portador é o recurso protegido de um token de segurança leve que concede Olá tooa de acesso de "portador".</span><span class="sxs-lookup"><span data-stu-id="eaadd-136">A bearer token is a lightweight security token that grants hello “bearer” access tooa protected resource.</span></span> <span data-ttu-id="eaadd-137">Nesse sentido, Olá "portador" é qualquer parte que pode apresentar um token de saudação.</span><span class="sxs-lookup"><span data-stu-id="eaadd-137">In this sense, hello “bearer” is any party that can present hello token.</span></span> <span data-ttu-id="eaadd-138">Embora uma parte deve primeiro autenticar com o token de portador de saudação do AD do Azure tooreceive, se Olá necessárias não são as etapas seguidas token de saudação toosecure durante a transmissão e armazenamento, pode ser interceptado e usado por uma parte não pretendida.</span><span class="sxs-lookup"><span data-stu-id="eaadd-138">Though a party must first authenticate with Azure AD tooreceive hello bearer token, if hello required steps are not taken toosecure hello token in transmission and storage, it can be intercepted and used by an unintended party.</span></span> <span data-ttu-id="eaadd-139">Embora alguns tokens de segurança tenham um mecanismo interno para impedir que partes não autorizadas os utilizem, tokens de portador não possuem esse mecanismo e devem ser transportados em um canal seguro, como segurança da camada de transporte (HTTPS).</span><span class="sxs-lookup"><span data-stu-id="eaadd-139">While some security tokens have a built-in mechanism for preventing unauthorized parties from using them, bearer tokens do not have this mechanism and must be transported in a secure channel such as transport layer security (HTTPS).</span></span> <span data-ttu-id="eaadd-140">Se um token de portador for transmitido no hello criptografado, um ataque intermediária Olá man-in pode ser usado por um token de saudação do terceiro mal-intencionado tooacquire e usá-lo para um recurso de tooa protegido do acesso não autorizado.</span><span class="sxs-lookup"><span data-stu-id="eaadd-140">If a bearer token is transmitted in hello clear, a man-in hello middle attack can be used by a malicious party tooacquire hello token and use it for an unauthorized access tooa protected resource.</span></span> <span data-ttu-id="eaadd-141">Olá mesmos princípios de segurança se aplicam ao armazenar ou armazenamento em cache os tokens de portador para uso posterior.</span><span class="sxs-lookup"><span data-stu-id="eaadd-141">hello same security principles apply when storing or caching bearer tokens for later use.</span></span> <span data-ttu-id="eaadd-142">Sempre certifique-se de que seu aplicativo transmita e armazene tokens de portador de maneira segura.</span><span class="sxs-lookup"><span data-stu-id="eaadd-142">Always ensure that your application transmits and stores bearer tokens in a secure manner.</span></span> <span data-ttu-id="eaadd-143">Para obter mais considerações de segurança sobre tokens de portador, consulte [RFC 6750 seção 5](http://tools.ietf.org/html/rfc6750).</span><span class="sxs-lookup"><span data-stu-id="eaadd-143">For more security considerations on bearer tokens, see [RFC 6750 Section 5](http://tools.ietf.org/html/rfc6750).</span></span>
> 
> 

<span data-ttu-id="eaadd-144">Agora que você tem uma visão geral dos conceitos básicos da saudação, leia as seções de saudação abaixo toounderstand como provisionamento funciona no AD do Azure e oferece suporte a cenários comuns de saudação do AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="eaadd-144">Now that you have an overview of hello basics, read hello sections below toounderstand how provisioning works in Azure AD and hello common scenarios Azure AD supports.</span></span>

## <a name="claims-in-azure-ad-security-tokens"></a><span data-ttu-id="eaadd-145">Declarações em tokens de segurança do Azure AD</span><span class="sxs-lookup"><span data-stu-id="eaadd-145">Claims in Azure AD Security Tokens</span></span>
<span data-ttu-id="eaadd-146">Tokens de segurança emitidos pelo AD do Azure contêm declarações ou asserções de informações sobre o assunto de saudação que foi autenticado.</span><span class="sxs-lookup"><span data-stu-id="eaadd-146">Security tokens issued by Azure AD contain claims, or assertions of information about hello subject that has been authenticated.</span></span> <span data-ttu-id="eaadd-147">Essas declarações podem ser usadas pelo aplicativo hello para várias tarefas.</span><span class="sxs-lookup"><span data-stu-id="eaadd-147">These claims can be used by hello application for various tasks.</span></span> <span data-ttu-id="eaadd-148">Por exemplo, eles podem ser toovalidate usado Olá token, identificar o locatário de diretório da entidade Olá, exibir informações do usuário, determinar a autorização da entidade Olá e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="eaadd-148">For example, they can be used toovalidate hello token, identify hello subject's directory tenant, display user information, determine hello subject's authorization, and so on.</span></span> <span data-ttu-id="eaadd-149">Olá declarações presentes em qualquer token de segurança variam de acordo com o tipo de saudação do token, o tipo de Olá da credencial usada tooauthenticate Olá usuário e a configuração do aplicativo hello.</span><span class="sxs-lookup"><span data-stu-id="eaadd-149">hello claims present in any given security token are dependent upon hello type of token, hello type of credential used tooauthenticate hello user, and hello application configuration.</span></span> <span data-ttu-id="eaadd-150">Uma breve descrição de cada tipo de declaração emitida pelo AD do Azure é fornecida na tabela de saudação abaixo.</span><span class="sxs-lookup"><span data-stu-id="eaadd-150">A brief description of each type of claim emitted by Azure AD is provided in hello table below.</span></span> <span data-ttu-id="eaadd-151">Para obter mais informações, consulte muito[tipos de declaração e Token com suporte](active-directory-token-and-claims.md).</span><span class="sxs-lookup"><span data-stu-id="eaadd-151">For more information, refer too[Supported Token and Claim Types](active-directory-token-and-claims.md).</span></span>

| <span data-ttu-id="eaadd-152">Declaração</span><span class="sxs-lookup"><span data-stu-id="eaadd-152">Claim</span></span> | <span data-ttu-id="eaadd-153">Descrição</span><span class="sxs-lookup"><span data-stu-id="eaadd-153">Description</span></span> |
| --- | --- |
| <span data-ttu-id="eaadd-154">ID do aplicativo</span><span class="sxs-lookup"><span data-stu-id="eaadd-154">Application ID</span></span> |<span data-ttu-id="eaadd-155">Identifica o aplicativo hello que está usando o token de saudação.</span><span class="sxs-lookup"><span data-stu-id="eaadd-155">Identifies hello application that is using hello token.</span></span> |
| <span data-ttu-id="eaadd-156">Público-alvo</span><span class="sxs-lookup"><span data-stu-id="eaadd-156">Audience</span></span> |<span data-ttu-id="eaadd-157">Identifica o recurso do destinatário Olá Olá token é destinado.</span><span class="sxs-lookup"><span data-stu-id="eaadd-157">Identifies hello recipient resource hello token is intended for.</span></span> |
| <span data-ttu-id="eaadd-158">Referência de classe de contexto de autenticação de aplicativo</span><span class="sxs-lookup"><span data-stu-id="eaadd-158">Application Authentication Context Class Reference</span></span> |<span data-ttu-id="eaadd-159">Indica como o cliente Olá foi autenticado (cliente público versus cliente confidencial).</span><span class="sxs-lookup"><span data-stu-id="eaadd-159">Indicates how hello client was authenticated (public client vs. confidential client).</span></span> |
| <span data-ttu-id="eaadd-160">Instante da autenticação</span><span class="sxs-lookup"><span data-stu-id="eaadd-160">Authentication Instant</span></span> |<span data-ttu-id="eaadd-161">Registros Olá data e hora em que ocorreu a autenticação de saudação.</span><span class="sxs-lookup"><span data-stu-id="eaadd-161">Records hello date and time when hello authentication occurred.</span></span> |
| <span data-ttu-id="eaadd-162">Método de autenticação</span><span class="sxs-lookup"><span data-stu-id="eaadd-162">Authentication Method</span></span> |<span data-ttu-id="eaadd-163">Indica como o assunto de saudação do token Olá foi autenticado (senha, certificado, etc.).</span><span class="sxs-lookup"><span data-stu-id="eaadd-163">Indicates how hello subject of hello token was authenticated (password, certificate, etc.).</span></span> |
| <span data-ttu-id="eaadd-164">Nome</span><span class="sxs-lookup"><span data-stu-id="eaadd-164">First Name</span></span> |<span data-ttu-id="eaadd-165">Fornece Olá nome de usuário de saudação conforme definido no AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="eaadd-165">Provides hello given name of hello user as set in Azure AD.</span></span> |
| <span data-ttu-id="eaadd-166">Grupos</span><span class="sxs-lookup"><span data-stu-id="eaadd-166">Groups</span></span> |<span data-ttu-id="eaadd-167">Contém Olá usuário é um membro de grupos de objetos de Ids do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="eaadd-167">Contains object Ids of Azure AD groups hello user is a member of.</span></span> |
| <span data-ttu-id="eaadd-168">Provedor de identidade</span><span class="sxs-lookup"><span data-stu-id="eaadd-168">Identity Provider</span></span> |<span data-ttu-id="eaadd-169">Registros Olá provedor de identidade que autenticou o assunto de saudação do token hello.</span><span class="sxs-lookup"><span data-stu-id="eaadd-169">Records hello identity provider that authenticated hello subject of hello token.</span></span> |
| <span data-ttu-id="eaadd-170">Emitido em</span><span class="sxs-lookup"><span data-stu-id="eaadd-170">Issued At</span></span> |<span data-ttu-id="eaadd-171">Tempo de saudação de registros em qual Olá token foi emitido, geralmente usado para atualização de token.</span><span class="sxs-lookup"><span data-stu-id="eaadd-171">Records hello time at which hello token was issued, often used for token freshness.</span></span> |
| <span data-ttu-id="eaadd-172">Emissor</span><span class="sxs-lookup"><span data-stu-id="eaadd-172">Issuer</span></span> |<span data-ttu-id="eaadd-173">Identifica Olá STS que emitiu o token hello, bem como o locatário do AD do Azure hello.</span><span class="sxs-lookup"><span data-stu-id="eaadd-173">Identifies hello STS that emitted hello token as well as hello Azure AD tenant.</span></span> |
| <span data-ttu-id="eaadd-174">Sobrenome</span><span class="sxs-lookup"><span data-stu-id="eaadd-174">Last Name</span></span> |<span data-ttu-id="eaadd-175">Fornece o sobrenome de saudação do usuário Olá conforme definido no AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="eaadd-175">Provides hello surname of hello user as set in Azure AD.</span></span> |
| <span data-ttu-id="eaadd-176">Nome</span><span class="sxs-lookup"><span data-stu-id="eaadd-176">Name</span></span> |<span data-ttu-id="eaadd-177">Fornece um valor legível que identifica a entidade de saudação do token de saudação.</span><span class="sxs-lookup"><span data-stu-id="eaadd-177">Provides a human readable value that identifies hello subject of hello token.</span></span> |
| <span data-ttu-id="eaadd-178">ID do objeto</span><span class="sxs-lookup"><span data-stu-id="eaadd-178">Object Id</span></span> |<span data-ttu-id="eaadd-179">Contém um identificador exclusivo e imutável do assunto Olá no AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="eaadd-179">Contains an immutable, unique identifier of hello subject in Azure AD.</span></span> |
| <span data-ttu-id="eaadd-180">Funções</span><span class="sxs-lookup"><span data-stu-id="eaadd-180">Roles</span></span> |<span data-ttu-id="eaadd-181">Contém os nomes amigáveis de funções de aplicativo do AD do Azure que o usuário Olá foi concedido.</span><span class="sxs-lookup"><span data-stu-id="eaadd-181">Contains friendly names of Azure AD Application Roles that hello user has been granted.</span></span> |
| <span data-ttu-id="eaadd-182">Escopo</span><span class="sxs-lookup"><span data-stu-id="eaadd-182">Scope</span></span> |<span data-ttu-id="eaadd-183">Indica o aplicativo hello cliente toohello, concedidas permissões.</span><span class="sxs-lookup"><span data-stu-id="eaadd-183">Indicates hello permissions granted toohello client application.</span></span> |
| <span data-ttu-id="eaadd-184">Assunto</span><span class="sxs-lookup"><span data-stu-id="eaadd-184">Subject</span></span> |<span data-ttu-id="eaadd-185">Indica a entidade Olá sobre quais Olá token dá informações.</span><span class="sxs-lookup"><span data-stu-id="eaadd-185">Indicates hello principal about which hello token asserts information.</span></span> |
| <span data-ttu-id="eaadd-186">ID do locatário</span><span class="sxs-lookup"><span data-stu-id="eaadd-186">Tenant Id</span></span> |<span data-ttu-id="eaadd-187">Contém um identificador exclusivo e imutável do locatário de diretório Olá que emitiu o token de saudação.</span><span class="sxs-lookup"><span data-stu-id="eaadd-187">Contains an immutable, unique identifier of hello directory tenant that issued hello token.</span></span> |
| <span data-ttu-id="eaadd-188">Tempo de vida do token</span><span class="sxs-lookup"><span data-stu-id="eaadd-188">Token Lifetime</span></span> |<span data-ttu-id="eaadd-189">Define o intervalo de tempo de saudação no qual um token é válido.</span><span class="sxs-lookup"><span data-stu-id="eaadd-189">Defines hello time interval within which a token is valid.</span></span> |
| <span data-ttu-id="eaadd-190">Nome UPN</span><span class="sxs-lookup"><span data-stu-id="eaadd-190">User Principal Name</span></span> |<span data-ttu-id="eaadd-191">Contém o nome principal do usuário de saudação do assunto de saudação.</span><span class="sxs-lookup"><span data-stu-id="eaadd-191">Contains hello user principal name of hello subject.</span></span> |
| <span data-ttu-id="eaadd-192">Versão</span><span class="sxs-lookup"><span data-stu-id="eaadd-192">Version</span></span> |<span data-ttu-id="eaadd-193">Contém o número de versão de saudação do token de saudação.</span><span class="sxs-lookup"><span data-stu-id="eaadd-193">Contains hello version number of hello token.</span></span> |

## <a name="basics-of-registering-an-application-in-azure-ad"></a><span data-ttu-id="eaadd-194">Noções básicas de registrar um aplicativo no Azure AD</span><span class="sxs-lookup"><span data-stu-id="eaadd-194">Basics of Registering an Application in Azure AD</span></span>
<span data-ttu-id="eaadd-195">Qualquer aplicativo que terceirize a autenticação tooAzure que AD deve ser registrado em um diretório.</span><span class="sxs-lookup"><span data-stu-id="eaadd-195">Any application that outsources authentication tooAzure AD must be registered in a directory.</span></span> <span data-ttu-id="eaadd-196">Esta etapa envolve comunicar ao AD do Azure sobre seu aplicativo, incluindo URL Olá onde ele está localizado, Olá URL toosend respostas após a autenticação, Olá URI tooidentify seu aplicativo e muito mais.</span><span class="sxs-lookup"><span data-stu-id="eaadd-196">This step involves telling Azure AD about your application, including hello URL where it’s located, hello URL toosend replies after authentication, hello URI tooidentify your application, and more.</span></span> <span data-ttu-id="eaadd-197">Essas informações são necessárias por alguns motivos:</span><span class="sxs-lookup"><span data-stu-id="eaadd-197">This information is required for a few key reasons:</span></span>

* <span data-ttu-id="eaadd-198">AD do Azure precisa de coordenadas toocommunicate com o aplicativo hello ao manipular tokens de logon ou de troca.</span><span class="sxs-lookup"><span data-stu-id="eaadd-198">Azure AD needs coordinates toocommunicate with hello application when handling sign-on or exchanging tokens.</span></span> <span data-ttu-id="eaadd-199">Eles incluem o seguinte hello:</span><span class="sxs-lookup"><span data-stu-id="eaadd-199">These include hello following:</span></span>
  
  * <span data-ttu-id="eaadd-200">URI da ID do aplicativo: Olá identificador de um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="eaadd-200">Application ID URI: hello identifier for an application.</span></span> <span data-ttu-id="eaadd-201">Esse valor é enviado tooAzure AD durante a autenticação tooindicate quais chamador de saudação do aplicativo deseja um token.</span><span class="sxs-lookup"><span data-stu-id="eaadd-201">This value is sent tooAzure AD during authentication tooindicate which application hello caller wants a token for.</span></span> <span data-ttu-id="eaadd-202">Além disso, esse valor é incluído no token Olá para que o aplicativo hello Saiba que ele foi Olá se destina o destino.</span><span class="sxs-lookup"><span data-stu-id="eaadd-202">Additionally, this value is included in hello token so that hello application knows it was hello intended target.</span></span>
  * <span data-ttu-id="eaadd-203">Responder a URL e o URI de redirecionamento: no caso de saudação de uma API da web ou aplicativo web, Olá URL de resposta é Olá local toowhich AD do Azure enviará a resposta de autenticação hello, incluindo um token se a autenticação for bem-sucedida.</span><span class="sxs-lookup"><span data-stu-id="eaadd-203">Reply URL and Redirect URI: In hello case of a web API or web application, hello Reply URL is hello location toowhich Azure AD will send hello authentication response, including a token if authentication was successful.</span></span> <span data-ttu-id="eaadd-204">No caso de saudação de um aplicativo nativo, Olá URI de redirecionamento é que um identificador exclusivo de toowhich AD do Azure redirecionará Olá agente do usuário em uma solicitação OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="eaadd-204">In hello case of a native application, hello Redirect URI is a unique identifier toowhich Azure AD will redirect hello user-agent in an OAuth 2.0 request.</span></span>
  * <span data-ttu-id="eaadd-205">ID do aplicativo: hello ID para um aplicativo, que é gerado pelo AD do Azure, quando o aplicativo hello é registrado.</span><span class="sxs-lookup"><span data-stu-id="eaadd-205">Application ID: hello ID for an application, which is generated by Azure AD when hello application is registered.</span></span> <span data-ttu-id="eaadd-206">Ao solicitar um código de autorização ou token, Olá ID do aplicativo e a chave são enviadas tooAzure AD durante a autenticação.</span><span class="sxs-lookup"><span data-stu-id="eaadd-206">When requesting an authorization code or token, hello Application ID and key are sent tooAzure AD during authentication.</span></span>
  * <span data-ttu-id="eaadd-207">: Olá chave enviada juntamente com uma ID de aplicativo ao autenticar tooAzure AD toocall uma API da web.</span><span class="sxs-lookup"><span data-stu-id="eaadd-207">Key: hello key that is sent along with a Application ID when authenticating tooAzure AD toocall a web API.</span></span>
* <span data-ttu-id="eaadd-208">Necessidades de AD do Azure tooensure Olá aplicativo tem Olá permissões necessárias tooaccess os dados do diretório, outros aplicativos em sua organização e assim por diante</span><span class="sxs-lookup"><span data-stu-id="eaadd-208">Azure AD needs tooensure hello application has hello required permissions tooaccess your directory data, other applications in your organization, and so on</span></span>

<span data-ttu-id="eaadd-209">O provisionamento fica mais claro quando você entende que há duas categorias de aplicativos que podem ser desenvolvidos e integrados no Azure AD:</span><span class="sxs-lookup"><span data-stu-id="eaadd-209">Provisioning becomes clearer when you understand that there are two categories of applications that can be developed and integrated with Azure AD:</span></span>

* <span data-ttu-id="eaadd-210">Aplicativo de locatário único: um aplicativo de locatário único destina-se ao uso em uma organização.</span><span class="sxs-lookup"><span data-stu-id="eaadd-210">Single tenant application: A single tenant application is intended for use in one organization.</span></span> <span data-ttu-id="eaadd-211">Eles normalmente são aplicativos de linha de negócios (LoB) escritos por um desenvolvedor empresarial.</span><span class="sxs-lookup"><span data-stu-id="eaadd-211">These are typically line-of-business (LoB) applications written by an enterprise developer.</span></span> <span data-ttu-id="eaadd-212">Um aplicativo de locatário único só precisa toobe acessado por usuários em um diretório e como resultado, ele só precisa toobe provisionado em um diretório.</span><span class="sxs-lookup"><span data-stu-id="eaadd-212">A single tenant application only needs toobe accessed by users in one directory, and as a result, it only needs toobe provisioned in one directory.</span></span> <span data-ttu-id="eaadd-213">Esses aplicativos normalmente são registrados por um desenvolvedor na organização hello.</span><span class="sxs-lookup"><span data-stu-id="eaadd-213">These applications are typically registered by a developer in hello organization.</span></span>
* <span data-ttu-id="eaadd-214">Aplicativos multilocatários: um aplicativo multilocatário é destinado para uso em muitas organizações, não apenas em uma organização.</span><span class="sxs-lookup"><span data-stu-id="eaadd-214">Multi-tenant application: A multi-tenant application is intended for use in many organizations, not just one organization.</span></span> <span data-ttu-id="eaadd-215">Esses são normalmente aplicativos de software como serviço (SaaS) escritos por um fornecedor de software independente (ISV).</span><span class="sxs-lookup"><span data-stu-id="eaadd-215">These are typically software-as-a-service (SaaS) applications written by an independent software vendor (ISV).</span></span> <span data-ttu-id="eaadd-216">Aplicativos de multilocação precisam toobe provisionado em cada diretório em que eles serão usados, o que exige tooregister de consentimento do usuário ou administrador-los.</span><span class="sxs-lookup"><span data-stu-id="eaadd-216">Multi-tenant applications need toobe provisioned in each directory where they will be used, which requires user or administrator consent tooregister them.</span></span> <span data-ttu-id="eaadd-217">Esse processo de consentimento inicia quando um aplicativo tiver sido registrado no diretório hello e recebe acesso toohello Graph API ou talvez a outra API da web.</span><span class="sxs-lookup"><span data-stu-id="eaadd-217">This consent process starts when an application has been registered in hello directory and is given access toohello Graph API or perhaps another web API.</span></span> <span data-ttu-id="eaadd-218">Quando um usuário ou administrador de uma organização diferente se inscreve toouse aplicativo de hello, são apresentadas com uma caixa de diálogo que exibe permissões Olá Olá aplicativo requer.</span><span class="sxs-lookup"><span data-stu-id="eaadd-218">When a user or administrator from a different organization signs up toouse hello application, they are presented with a dialog that displays hello permissions hello application requires.</span></span> <span data-ttu-id="eaadd-219">Olá usuário ou administrador pode consentimento toohello aplicativo, que fornece toohello de acesso do aplicativo hello mencionado dados, e finalmente registra Olá aplicativo em seu diretório.</span><span class="sxs-lookup"><span data-stu-id="eaadd-219">hello user or administrator can then consent toohello application, which gives hello application access toohello stated data, and finally registers hello application in their directory.</span></span> <span data-ttu-id="eaadd-220">Para obter mais informações, consulte [visão geral da estrutura de consentimento do hello](active-directory-integrating-applications.md#overview-of-the-consent-framework).</span><span class="sxs-lookup"><span data-stu-id="eaadd-220">For more information, see [Overview of hello Consent Framework](active-directory-integrating-applications.md#overview-of-the-consent-framework).</span></span>

<span data-ttu-id="eaadd-221">Surgem algumas considerações adicionais ao desenvolver um aplicativo multilocatário em vez de um aplicativo de locatário único.</span><span class="sxs-lookup"><span data-stu-id="eaadd-221">Some additional considerations arise when developing a multi-tenant application instead of a single tenant application.</span></span> <span data-ttu-id="eaadd-222">Por exemplo, se você estiver fazendo o toousers disponíveis do aplicativo em vários diretórios, é necessário um mecanismo toodetermine qual locatário que estão contidos.</span><span class="sxs-lookup"><span data-stu-id="eaadd-222">For example, if you are making your application available toousers in multiple directories, you need a mechanism toodetermine which tenant they’re in.</span></span> <span data-ttu-id="eaadd-223">Um aplicativo de locatário único só precisa toolook em seu próprio diretório para um usuário, enquanto um aplicativo multilocatário, precisa tooidentify um usuário específico em todos os diretórios de saudação no AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="eaadd-223">A single tenant application only needs toolook in its own directory for a user, while a multi-tenant application needs tooidentify a specific user from all hello directories in Azure AD.</span></span> <span data-ttu-id="eaadd-224">tooaccomplish nesta tarefa, o AD do Azure fornece um ponto de extremidade de autenticação comum em que qualquer aplicativo multilocatário pode direcionar solicitações de entrada, em vez de um ponto de extremidade específico de locatário.</span><span class="sxs-lookup"><span data-stu-id="eaadd-224">tooaccomplish this task, Azure AD provides a common authentication endpoint where any multi-tenant application can direct sign-in requests, instead of a tenant-specific endpoint.</span></span> <span data-ttu-id="eaadd-225">Esse ponto de extremidade é https://login.microsoftonline.com/common para todos os diretórios no AD do Azure, enquanto que um ponto de extremidade específico de locatário pode ser https://login.microsoftonline.com/contoso.onmicrosoft.com. ponto de extremidade comum Olá é especialmente importante tooconsider ao desenvolver seu aplicativo, pois você precisará Olá lógica necessária toohandle vários locatários durante a entrada, saída e validação de token.</span><span class="sxs-lookup"><span data-stu-id="eaadd-225">This endpoint is https://login.microsoftonline.com/common for all directories in Azure AD, whereas a tenant-specific endpoint might be https://login.microsoftonline.com/contoso.onmicrosoft.com. hello common endpoint is especially important tooconsider when developing your application because you’ll need hello necessary logic toohandle multiple tenants during sign-in, sign-out, and token validation.</span></span>

<span data-ttu-id="eaadd-226">Se você está desenvolvendo um aplicativo de locatário único, mas deseja toomake-organizações toomany disponível, você pode facilmente fazer alterações toohello aplicativo e sua configuração no AD do Azure toomake-lo compatível com multilocatário.</span><span class="sxs-lookup"><span data-stu-id="eaadd-226">If you are currently developing a single tenant application but want toomake it available toomany organizations, you can easily make changes toohello application and its configuration in Azure AD toomake it multi-tenant capable.</span></span> <span data-ttu-id="eaadd-227">Além disso, o AD do Azure usa Olá mesma chave para todos os tokens em todos os diretórios de assinatura, se você estiver fornecendo autenticação em um locatário único ou um aplicativo multilocatário.</span><span class="sxs-lookup"><span data-stu-id="eaadd-227">In addition, Azure AD uses hello same signing key for all tokens in all directories, whether you are providing authentication in a single tenant or multi-tenant application.</span></span>

<span data-ttu-id="eaadd-228">Cada cenário listado neste documento inclui uma subseção que descreve seus requisitos de provisionamento.</span><span class="sxs-lookup"><span data-stu-id="eaadd-228">Each scenario listed in this document includes a sub-section that describes its provisioning requirements.</span></span> <span data-ttu-id="eaadd-229">Para obter informações mais detalhadas sobre o provisionamento de um aplicativo no AD do Azure e Olá diferenças entre aplicativos único e vários locatários, consulte [integrando aplicativos com o Active Directory do Azure](active-directory-integrating-applications.md) para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="eaadd-229">For more in-depth information about provisioning an application in Azure AD and hello differences between single and multi-tenant applications, see [Integrating Applications with Azure Active Directory](active-directory-integrating-applications.md) for more information.</span></span> <span data-ttu-id="eaadd-230">Continue a leitura toounderstand cenários comuns de aplicativo hello no AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="eaadd-230">Continue reading toounderstand hello common application scenarios in Azure AD.</span></span>

## <a name="application-types-and-scenarios"></a><span data-ttu-id="eaadd-231">Cenários e tipos de aplicativos</span><span class="sxs-lookup"><span data-stu-id="eaadd-231">Application Types and Scenarios</span></span>
<span data-ttu-id="eaadd-232">Cada um dos cenários de saudação descritos neste documento pode ser desenvolvida usando diversas plataformas e linguagens.</span><span class="sxs-lookup"><span data-stu-id="eaadd-232">Each of hello scenarios described in this document can be developed using various languages and platforms.</span></span> <span data-ttu-id="eaadd-233">Eles são copiados por exemplos de código completo que estão disponíveis no nosso [guia de exemplos de código](active-directory-code-samples.md), ou diretamente da saudação correspondente [repositórios de exemplo do GitHub](https://github.com/Azure-Samples?utf8=%E2%9C%93&query=active-directory).</span><span class="sxs-lookup"><span data-stu-id="eaadd-233">They are all backed by complete code samples which are available in our [Code Samples guide](active-directory-code-samples.md), or directly from hello corresponding [GitHub sample repositories](https://github.com/Azure-Samples?utf8=%E2%9C%93&query=active-directory).</span></span> <span data-ttu-id="eaadd-234">Além disso, se seu aplicativo precisar de uma parte ou segmento específico de um cenário de ponta a ponta, na maioria dos casos, essa funcionalidade pode ser adicionada independentemente.</span><span class="sxs-lookup"><span data-stu-id="eaadd-234">In addition, if your application needs a specific piece or segment of an end-to-end scenario, in most cases that functionality can be added independently.</span></span> <span data-ttu-id="eaadd-235">Por exemplo, se você tiver um aplicativo nativo que chama uma API da web, você pode adicionar facilmente um aplicativo web que também chama Olá web API.</span><span class="sxs-lookup"><span data-stu-id="eaadd-235">For example, if you have a native application that calls a web API, you can easily add a web application that also calls hello web API.</span></span> <span data-ttu-id="eaadd-236">Olá diagrama a seguir ilustra esses cenários e tipos de aplicativos, e como os diferentes componentes podem ser adicionados:</span><span class="sxs-lookup"><span data-stu-id="eaadd-236">hello following diagram illustrates these scenarios and application types, and how different components can be added:</span></span>

![Cenários e tipos de aplicativos](./media/active-directory-authentication-scenarios/application_types_and_scenarios.png)

<span data-ttu-id="eaadd-238">Estes são Olá cinco aplicativos principais cenários suportados pelo AD do Azure:</span><span class="sxs-lookup"><span data-stu-id="eaadd-238">These are hello five primary application scenarios supported by Azure AD:</span></span>

* <span data-ttu-id="eaadd-239">[Web navegador tooWeb aplicativo](#web-browser-to-web-application): um usuário precisa toosign no aplicativo web tooa que é protegido pelo AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="eaadd-239">[Web Browser tooWeb Application](#web-browser-to-web-application): A user needs toosign in tooa web application that is secured by Azure AD.</span></span>
* <span data-ttu-id="eaadd-240">[Um único aplicativo de página (SPA)](#single-page-application-spa): um usuário precisa toosign no aplicativo de página única tooa que é protegido pelo AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="eaadd-240">[Single Page Application (SPA)](#single-page-application-spa): A user needs toosign in tooa single page application that is secured by Azure AD.</span></span>
* <span data-ttu-id="eaadd-241">[TooWeb do aplicativo nativo API](#native-application-to-web-api): um aplicativo nativo que é executado em um telefone, tablet ou PC necessidades tooauthenticate tooget um usuário recursos de uma API da web que é protegido pelo AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="eaadd-241">[Native Application tooWeb API](#native-application-to-web-api): A native application that runs on a phone, tablet, or PC needs tooauthenticate a user tooget resources from a web API that is secured by Azure AD.</span></span>
* <span data-ttu-id="eaadd-242">[Web Application tooWeb API](#web-application-to-web-api): um aplicativo web precisa tooget recursos de uma API da web protegida pelo AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="eaadd-242">[Web Application tooWeb API](#web-application-to-web-api): A web application needs tooget resources from a web API secured by Azure AD.</span></span>
* <span data-ttu-id="eaadd-243">[TooWeb daemon ou aplicativo de servidor API](#daemon-or-server-application-to-web-api): um aplicativo daemon ou um aplicativo de servidor sem interface de usuário da web precisa tooget recursos de uma API da web protegida pelo AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="eaadd-243">[Daemon or Server Application tooWeb API](#daemon-or-server-application-to-web-api): A daemon application or a server application with no web user interface needs tooget resources from a web API secured by Azure AD.</span></span>

### <a name="web-browser-tooweb-application"></a><span data-ttu-id="eaadd-244">TooWeb de navegador da Web aplicativo</span><span class="sxs-lookup"><span data-stu-id="eaadd-244">Web Browser tooWeb Application</span></span>
<span data-ttu-id="eaadd-245">Esta seção descreve um aplicativo que autentica um usuário em um aplicativo de web de tooa de navegador da web.</span><span class="sxs-lookup"><span data-stu-id="eaadd-245">This section describes an application that authenticates a user in a web browser tooa web application.</span></span> <span data-ttu-id="eaadd-246">Nesse cenário, o aplicativo de web de Olá direciona toosign do navegador do usuário Olá em tooAzure AD.</span><span class="sxs-lookup"><span data-stu-id="eaadd-246">In this scenario, hello web application directs hello user’s browser toosign them in tooAzure AD.</span></span> <span data-ttu-id="eaadd-247">AD do Azure retorna uma resposta de logon por meio do navegador do usuário hello, que contém declarações sobre o usuário Olá em um token de segurança.</span><span class="sxs-lookup"><span data-stu-id="eaadd-247">Azure AD returns a sign-in response through hello user’s browser, which contains claims about hello user in a security token.</span></span> <span data-ttu-id="eaadd-248">Este cenário dá suporte a logon usando protocolos WS-Federation, SAML 2.0 e OpenID Connect do hello.</span><span class="sxs-lookup"><span data-stu-id="eaadd-248">This scenario supports sign-on using hello WS-Federation, SAML 2.0, and OpenID Connect protocols.</span></span>

#### <a name="diagram"></a><span data-ttu-id="eaadd-249">Diagrama</span><span class="sxs-lookup"><span data-stu-id="eaadd-249">Diagram</span></span>
![Fluxo de autenticação do aplicativo do navegador tooweb](./media/active-directory-authentication-scenarios/web_browser_to_web_api.png)

#### <a name="description-of-protocol-flow"></a><span data-ttu-id="eaadd-251">Descrição do fluxo de protocolo</span><span class="sxs-lookup"><span data-stu-id="eaadd-251">Description of Protocol Flow</span></span>
1. <span data-ttu-id="eaadd-252">Quando um usuário visita o aplicativo hello e precisa toosign no, ele será redirecionado por meio de um ponto de extremidade de autenticação de toohello de solicitação de entrada no AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="eaadd-252">When a user visits hello application and needs toosign in, they are redirected via a sign-in request toohello authentication endpoint in Azure AD.</span></span>
2. <span data-ttu-id="eaadd-253">Olá usuário se inscreve página de entrada hello.</span><span class="sxs-lookup"><span data-stu-id="eaadd-253">hello user signs in on hello sign-in page.</span></span>
3. <span data-ttu-id="eaadd-254">Se a autenticação for bem-sucedida, o AD do Azure cria um token de autenticação e retorna a URL de resposta do aplicativo de toohello uma resposta de logon que foi configurado no hello Portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="eaadd-254">If authentication is successful, Azure AD creates an authentication token and returns a sign-in response toohello application’s Reply URL that was configured in hello Azure Portal.</span></span> <span data-ttu-id="eaadd-255">Para um aplicativo de produção, essa URL de resposta deve ser HTTPS.</span><span class="sxs-lookup"><span data-stu-id="eaadd-255">For a production application, this Reply URL should be HTTPS.</span></span> <span data-ttu-id="eaadd-256">Olá retornada um token inclui declarações sobre o usuário hello e AD do Azure que são exigidas pelo token de Olá Olá aplicativo toovalidate.</span><span class="sxs-lookup"><span data-stu-id="eaadd-256">hello returned token includes claims about hello user and Azure AD that are required by hello application toovalidate hello token.</span></span>
4. <span data-ttu-id="eaadd-257">aplicativo Hello valida o token hello usando uma chave pública de assinatura e as informações de emissor disponíveis no documento de metadados de federação de saudação do AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="eaadd-257">hello application validates hello token by using a public signing key and issuer information available at hello federation metadata document for Azure AD.</span></span> <span data-ttu-id="eaadd-258">Depois que o aplicativo hello valida o token hello, o AD do Azure inicia uma nova sessão com usuário hello.</span><span class="sxs-lookup"><span data-stu-id="eaadd-258">After hello application validates hello token, Azure AD starts a new session with hello user.</span></span> <span data-ttu-id="eaadd-259">Essa sessão permite Olá usuário tooaccess aplicativo hello até expirar.</span><span class="sxs-lookup"><span data-stu-id="eaadd-259">This session allows hello user tooaccess hello application until it expires.</span></span>

#### <a name="code-samples"></a><span data-ttu-id="eaadd-260">Exemplos de código</span><span class="sxs-lookup"><span data-stu-id="eaadd-260">Code Samples</span></span>
<span data-ttu-id="eaadd-261">Consulte exemplos de código de saudação para cenários de aplicativo do navegador da Web tooWeb.</span><span class="sxs-lookup"><span data-stu-id="eaadd-261">See hello code samples for Web Browser tooWeb Application scenarios.</span></span> <span data-ttu-id="eaadd-262">E, volte a consultar frequentemente - adicionamos novos exemplos de todo o tempo de saudação.</span><span class="sxs-lookup"><span data-stu-id="eaadd-262">And, check back frequently -- we add new samples all hello time.</span></span> <span data-ttu-id="eaadd-263">[Web navegador tooWeb aplicativo](active-directory-code-samples.md#web-browser-to-web-application).</span><span class="sxs-lookup"><span data-stu-id="eaadd-263">[Web Browser tooWeb Application](active-directory-code-samples.md#web-browser-to-web-application).</span></span>

#### <a name="registering"></a><span data-ttu-id="eaadd-264">Registro</span><span class="sxs-lookup"><span data-stu-id="eaadd-264">Registering</span></span>
* <span data-ttu-id="eaadd-265">Único locatário: Se você estiver criando um aplicativo para a sua organização, ele deve ser registrado no diretório da empresa usando Olá Portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="eaadd-265">Single Tenant: If you are building an application just for your organization, it must be registered in your company’s directory by using hello Azure Portal.</span></span>
* <span data-ttu-id="eaadd-266">Multilocatário: Se você estiver criando um aplicativo que pode ser usado por usuários fora da sua organização, ele deve ser registrado no diretório da sua empresa, mas também deve ser registrado no diretório de cada organização que usará o aplicativo hello.</span><span class="sxs-lookup"><span data-stu-id="eaadd-266">Multi-Tenant: If you are building an application that can be used by users outside your organization, it must be registered in your company’s directory, but also must be registered in each organization’s directory that will be using hello application.</span></span> <span data-ttu-id="eaadd-267">toomake seu aplicativo disponível em seu diretório, você pode incluir um processo de inscrição para os clientes que permite que eles tooconsent tooyour aplicativo.</span><span class="sxs-lookup"><span data-stu-id="eaadd-267">toomake your application available in their directory, you can include a sign-up process for your customers that enables them tooconsent tooyour application.</span></span> <span data-ttu-id="eaadd-268">Ao se inscreverem para seu aplicativo, eles verá uma caixa de diálogo que mostra Olá permissões Olá exigidos e, em seguida, Olá tooconsent opção.</span><span class="sxs-lookup"><span data-stu-id="eaadd-268">When they sign up for your application, they will be presented with a dialog that shows hello permissions hello application requires, and then hello option tooconsent.</span></span> <span data-ttu-id="eaadd-269">Dependendo de permissões Olá necessárias, um administrador no hello outra organização pode ser necessário toogive consentimento.</span><span class="sxs-lookup"><span data-stu-id="eaadd-269">Depending on hello required permissions, an administrator in hello other organization may be required toogive consent.</span></span> <span data-ttu-id="eaadd-270">Quando Olá usuário ou administrador der consentimento, o aplicativo hello está registrado no seu diretório.</span><span class="sxs-lookup"><span data-stu-id="eaadd-270">When hello user or administrator consents, hello application is registered in their directory.</span></span> <span data-ttu-id="eaadd-271">Para saber mais, confira [Integrando aplicativos com o Active Directory do Azure](active-directory-integrating-applications.md).</span><span class="sxs-lookup"><span data-stu-id="eaadd-271">For more information, see [Integrating Applications with Azure Active Directory](active-directory-integrating-applications.md).</span></span>

#### <a name="token-expiration"></a><span data-ttu-id="eaadd-272">Expiração do token</span><span class="sxs-lookup"><span data-stu-id="eaadd-272">Token Expiration</span></span>
<span data-ttu-id="eaadd-273">sessão de usuário de saudação expira quando o tempo de vida de saudação do hello token emitido pelo AD do Azure expire.</span><span class="sxs-lookup"><span data-stu-id="eaadd-273">hello user’s session expires when hello lifetime of hello token issued by Azure AD expires.</span></span> <span data-ttu-id="eaadd-274">Seu aplicativo pode encurtar esse período de tempo, se desejado, por exemplo, desconectando usuários com base em um período de inatividade.</span><span class="sxs-lookup"><span data-stu-id="eaadd-274">Your application can shorten this time period if desired, such as signing out users based on a period of inactivity.</span></span> <span data-ttu-id="eaadd-275">Quando a sessão de saudação expira, o usuário de Olá será toosign solicitada no novamente.</span><span class="sxs-lookup"><span data-stu-id="eaadd-275">When hello session expires, hello user will be prompted toosign in again.</span></span>

### <a name="single-page-application-spa"></a><span data-ttu-id="eaadd-276">SPA (Aplicativo de Página Única)</span><span class="sxs-lookup"><span data-stu-id="eaadd-276">Single Page Application (SPA)</span></span>
<span data-ttu-id="eaadd-277">Esta seção descreve a autenticação de um único aplicativo de página, que usa o AD do Azure e autorização implícita do OAuth 2.0 hello conceder toosecure terminar de fazer sua API da web.</span><span class="sxs-lookup"><span data-stu-id="eaadd-277">This section describes authentication for a Single Page Application, that uses Azure AD and hello OAuth 2.0 implicit authorization grant toosecure its web API back end.</span></span> <span data-ttu-id="eaadd-278">Aplicativos de página única normalmente são estruturados como uma camada de apresentação de JavaScript (front-end) que é executado no navegador hello e um back-end de API da Web que é executado em um servidor e implementa Olá lógica de negócios do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="eaadd-278">Single Page Applications are typically structured as a JavaScript presentation layer (front end) that runs in hello browser and a Web API back end that runs on a server and implements hello application’s business logic.</span></span> <span data-ttu-id="eaadd-279">toolearn mais informações sobre concessão de autorização implícita hello e ajuda você a decidir se é adequado para seu cenário de aplicativo, consulte [Olá Noções básicas sobre implícita do OAuth2 conceder fluxo no Azure Active Directory](active-directory-dev-understanding-oauth2-implicit-grant.md).</span><span class="sxs-lookup"><span data-stu-id="eaadd-279">toolearn more about hello implicit authorization grant, and help you decide whether it's right for your application scenario, see [Understanding hello OAuth2 implicit grant flow in Azure Active Directory](active-directory-dev-understanding-oauth2-implicit-grant.md).</span></span>

<span data-ttu-id="eaadd-280">Nesse cenário, quando o usuário Olá entrar, Olá JavaScript front end usa [Active Directory Authentication Library para JavaScript (ADAL. JS)](https://github.com/AzureAD/azure-activedirectory-library-for-js/tree/dev) e autorização implícita Olá conceder tooobtain um token de ID (id_token) do AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="eaadd-280">In this scenario, when hello user signs in, hello JavaScript front end uses [Active Directory Authentication Library for JavaScript (ADAL.JS)](https://github.com/AzureAD/azure-activedirectory-library-for-js/tree/dev) and hello implicit authorization grant tooobtain an ID token (id_token) from Azure AD.</span></span> <span data-ttu-id="eaadd-281">token Olá é armazenado em cache e cliente Olá anexa-toohello solicitação como token de portador Olá ao fazer chamadas tooits API da Web do back-end, que é protegida usando Olá OWIN middleware.</span><span class="sxs-lookup"><span data-stu-id="eaadd-281">hello token is cached and hello client attaches it toohello request as hello bearer token when making calls tooits Web API back end, which is secured using hello OWIN middleware.</span></span> 

#### <a name="diagram"></a><span data-ttu-id="eaadd-282">Diagrama</span><span class="sxs-lookup"><span data-stu-id="eaadd-282">Diagram</span></span>
![Diagrama de Aplicativo de Página Única](./media/active-directory-authentication-scenarios/single_page_app.png)

#### <a name="description-of-protocol-flow"></a><span data-ttu-id="eaadd-284">Descrição do fluxo de protocolo</span><span class="sxs-lookup"><span data-stu-id="eaadd-284">Description of Protocol Flow</span></span>
1. <span data-ttu-id="eaadd-285">usuário Olá navega toohello aplicativo de web.</span><span class="sxs-lookup"><span data-stu-id="eaadd-285">hello user navigates toohello web application.</span></span>
2. <span data-ttu-id="eaadd-286">aplicativo Hello retorna navegador de toohello Olá JavaScript front-end (camada de apresentação).</span><span class="sxs-lookup"><span data-stu-id="eaadd-286">hello application returns hello JavaScript front end (presentation layer) toohello browser.</span></span>
3. <span data-ttu-id="eaadd-287">usuário Olá inicia a entrada, por exemplo, clicando em uma link de entrada.</span><span class="sxs-lookup"><span data-stu-id="eaadd-287">hello user initiates sign in, for example by clicking a sign in link.</span></span> <span data-ttu-id="eaadd-288">navegador Olá envia um token de ID de toorequest de ponto de extremidade de autorização um GET toohello AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="eaadd-288">hello browser sends a GET toohello Azure AD authorization endpoint toorequest an ID token.</span></span> <span data-ttu-id="eaadd-289">Essa solicitação inclui a URL de resposta e a ID de aplicativo de Olá nos parâmetros de consulta de saudação.</span><span class="sxs-lookup"><span data-stu-id="eaadd-289">This request includes hello application ID and reply URL in hello query parameters.</span></span>
4. <span data-ttu-id="eaadd-290">AD do Azure valida Olá que URL de resposta em relação a saudação registrado URL de resposta que foi configurado no hello Portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="eaadd-290">Azure AD validates hello Reply URL against hello registered Reply URL that was configured in hello Azure Portal.</span></span>
5. <span data-ttu-id="eaadd-291">Olá usuário se inscreve página de entrada hello.</span><span class="sxs-lookup"><span data-stu-id="eaadd-291">hello user signs in on hello sign-in page.</span></span>
6. <span data-ttu-id="eaadd-292">Se a autenticação for bem-sucedida, o AD do Azure cria um token de ID e o retorna como URL de resposta do aplicativo um URL fragmento (#) toohello.</span><span class="sxs-lookup"><span data-stu-id="eaadd-292">If authentication is successful, Azure AD creates an ID token and returns it as a URL fragment (#) toohello application’s Reply URL.</span></span> <span data-ttu-id="eaadd-293">Para um aplicativo de produção, essa URL de resposta deve ser HTTPS.</span><span class="sxs-lookup"><span data-stu-id="eaadd-293">For a production application, this Reply URL should be HTTPS.</span></span> <span data-ttu-id="eaadd-294">Olá retornada um token inclui declarações sobre o usuário hello e AD do Azure que são exigidas pelo token de Olá Olá aplicativo toovalidate.</span><span class="sxs-lookup"><span data-stu-id="eaadd-294">hello returned token includes claims about hello user and Azure AD that are required by hello application toovalidate hello token.</span></span>
7. <span data-ttu-id="eaadd-295">código do cliente Olá JavaScript em execução no navegador de saudação extrai o token de saudação do hello resposta toouse proteger chamadas de API de web do aplicativo toohello volta terminar.</span><span class="sxs-lookup"><span data-stu-id="eaadd-295">hello JavaScript client code running in hello browser extracts hello token from hello response toouse in securing calls toohello application’s web API back end.</span></span>
8. <span data-ttu-id="eaadd-296">Olá end da API web do aplicativo do navegador chamadas Olá novamente com o token de acesso de saudação no cabeçalho de autorização de saudação.</span><span class="sxs-lookup"><span data-stu-id="eaadd-296">hello browser calls hello application’s web API back end with hello access token in hello authorization header.</span></span>

#### <a name="code-samples"></a><span data-ttu-id="eaadd-297">Exemplos de código</span><span class="sxs-lookup"><span data-stu-id="eaadd-297">Code Samples</span></span>
<span data-ttu-id="eaadd-298">Consulte exemplos de código de saudação para cenários de aplicativo de página única (SPA).</span><span class="sxs-lookup"><span data-stu-id="eaadd-298">See hello code samples for Single Page Application (SPA) scenarios.</span></span> <span data-ttu-id="eaadd-299">Ser toocheck-se novamente com frequência – adicionamos novos exemplos todo o tempo de saudação.</span><span class="sxs-lookup"><span data-stu-id="eaadd-299">Be sure toocheck back frequently -- we add new samples all hello time.</span></span> <span data-ttu-id="eaadd-300">[SPA (Aplicativo de Página Única)](active-directory-code-samples.md#single-page-application-spa).</span><span class="sxs-lookup"><span data-stu-id="eaadd-300">[Single Page Application (SPA)](active-directory-code-samples.md#single-page-application-spa).</span></span>

#### <a name="registering"></a><span data-ttu-id="eaadd-301">Registro</span><span class="sxs-lookup"><span data-stu-id="eaadd-301">Registering</span></span>
* <span data-ttu-id="eaadd-302">Único locatário: Se você estiver criando um aplicativo para a sua organização, ele deve ser registrado no diretório da empresa usando Olá Portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="eaadd-302">Single Tenant: If you are building an application just for your organization, it must be registered in your company’s directory by using hello Azure Portal.</span></span>
* <span data-ttu-id="eaadd-303">Multilocatário: Se você estiver criando um aplicativo que pode ser usado por usuários fora da sua organização, ele deve ser registrado no diretório da sua empresa, mas também deve ser registrado no diretório de cada organização que usará o aplicativo hello.</span><span class="sxs-lookup"><span data-stu-id="eaadd-303">Multi-Tenant: If you are building an application that can be used by users outside your organization, it must be registered in your company’s directory, but also must be registered in each organization’s directory that will be using hello application.</span></span> <span data-ttu-id="eaadd-304">toomake seu aplicativo disponível em seu diretório, você pode incluir um processo de inscrição para os clientes que permite que eles tooconsent tooyour aplicativo.</span><span class="sxs-lookup"><span data-stu-id="eaadd-304">toomake your application available in their directory, you can include a sign-up process for your customers that enables them tooconsent tooyour application.</span></span> <span data-ttu-id="eaadd-305">Ao se inscreverem para seu aplicativo, eles verá uma caixa de diálogo que mostra Olá permissões Olá exigidos e, em seguida, Olá tooconsent opção.</span><span class="sxs-lookup"><span data-stu-id="eaadd-305">When they sign up for your application, they will be presented with a dialog that shows hello permissions hello application requires, and then hello option tooconsent.</span></span> <span data-ttu-id="eaadd-306">Dependendo de permissões Olá necessárias, um administrador no hello outra organização pode ser necessário toogive consentimento.</span><span class="sxs-lookup"><span data-stu-id="eaadd-306">Depending on hello required permissions, an administrator in hello other organization may be required toogive consent.</span></span> <span data-ttu-id="eaadd-307">Quando Olá usuário ou administrador der consentimento, o aplicativo hello está registrado no seu diretório.</span><span class="sxs-lookup"><span data-stu-id="eaadd-307">When hello user or administrator consents, hello application is registered in their directory.</span></span> <span data-ttu-id="eaadd-308">Para saber mais, confira [Integrando aplicativos com o Active Directory do Azure](active-directory-integrating-applications.md).</span><span class="sxs-lookup"><span data-stu-id="eaadd-308">For more information, see [Integrating Applications with Azure Active Directory](active-directory-integrating-applications.md).</span></span>

<span data-ttu-id="eaadd-309">Depois de registrar o aplicativo hello, ele deve ser configurado toouse protocolo de concessão implícita do OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="eaadd-309">After registering hello application, it must be configured toouse OAuth 2.0 Implicit Grant protocol.</span></span> <span data-ttu-id="eaadd-310">Por padrão, esse protocolo é desabilitado para aplicativos.</span><span class="sxs-lookup"><span data-stu-id="eaadd-310">By default, this protocol is disabled for applications.</span></span> <span data-ttu-id="eaadd-311">Olá tooenable protocolo de concessão implícita do OAuth2 para seu aplicativo, edite o manifesto do aplicativo de saudação Portal do Azure e defina tootrue de valor de "oauth2AllowImplicitFlow" hello.</span><span class="sxs-lookup"><span data-stu-id="eaadd-311">tooenable hello OAuth2 Implicit Grant protocol for your application, edit its application manifest from hello Azure Portal and set hello “oauth2AllowImplicitFlow” value tootrue.</span></span> <span data-ttu-id="eaadd-312">Para obter instruções detalhadas, consulte [Habilitar a concessão implícita do OAuth 2.0 para aplicativos de página única](active-directory-integrating-applications.md).</span><span class="sxs-lookup"><span data-stu-id="eaadd-312">For detailed instructions, see [Enabling OAuth 2.0 Implicit Grant for Single Page Applications](active-directory-integrating-applications.md).</span></span>

#### <a name="token-expiration"></a><span data-ttu-id="eaadd-313">Expiração do token</span><span class="sxs-lookup"><span data-stu-id="eaadd-313">Token Expiration</span></span>
<span data-ttu-id="eaadd-314">Quando você usa o ADAL.js toomanage autenticação com o AD do Azure, você se beneficiar de vários recursos que facilitam a atualização de um token expirado, bem como obter tokens para recursos da API da web adicionais que podem ser chamados por um aplicativo hello.</span><span class="sxs-lookup"><span data-stu-id="eaadd-314">When you use ADAL.js toomanage authentication with Azure AD, you benefit from several features that facilitate refreshing an expired token as well as getting tokens for additional web API resources that may be called by hello application.</span></span> <span data-ttu-id="eaadd-315">Quando o usuário Olá autentica com êxito com o Azure AD, é estabelecida uma sessão protegida por um cookie para o usuário Olá entre navegador hello e Azure AD.</span><span class="sxs-lookup"><span data-stu-id="eaadd-315">When hello user successfully authenticates with Azure AD, a session secured by a cookie is established for hello user between hello browser and Azure AD.</span></span> <span data-ttu-id="eaadd-316">É importante toonote que sessão Olá existe entre o usuário hello e AD do Azure e não entre o usuário hello e aplicativo web de saudação em execução no servidor de saudação.</span><span class="sxs-lookup"><span data-stu-id="eaadd-316">It’s important toonote that hello session exists between hello user and Azure AD and not between hello user and hello web application running on hello server.</span></span> <span data-ttu-id="eaadd-317">Quando um token expira, o ADAL.js usa essa sessão toosilently obter outro token.</span><span class="sxs-lookup"><span data-stu-id="eaadd-317">When a token expires, ADAL.js uses this session toosilently obtain another token.</span></span> <span data-ttu-id="eaadd-318">Ele faz isso usando um iFrame oculto toosend e receber a solicitação de saudação usando o protocolo de concessão implícita do OAuth hello.</span><span class="sxs-lookup"><span data-stu-id="eaadd-318">It does this by using a hidden iFrame toosend and receive hello request using hello OAuth Implicit Grant protocol.</span></span> <span data-ttu-id="eaadd-319">ADAL.js também pode usar o mesmo mecanismo toosilently obter tokens de acesso do AD do Azure para outra web API recursos que chamadas de aplicativo hello como esses recursos oferecem suporte a recursos de origens cruzadas compartilhando (CORS), são registradas no diretório saudação do usuário, e qualquer consentimento necessário foi fornecido pelo usuário Olá durante o logon.</span><span class="sxs-lookup"><span data-stu-id="eaadd-319">ADAL.js can also use this same mechanism toosilently obtain access tokens from Azure AD for other web API resources that hello application calls as long as these resources support cross-origin resource sharing (CORS), are registered in hello user’s directory, and any required consent was given by hello user during sign-in.</span></span>

### <a name="native-application-tooweb-api"></a><span data-ttu-id="eaadd-320">TooWeb do aplicativo nativo API</span><span class="sxs-lookup"><span data-stu-id="eaadd-320">Native Application tooWeb API</span></span>
<span data-ttu-id="eaadd-321">Esta seção descreve um aplicativo nativo que chama uma API da Web em nome de um usuário.</span><span class="sxs-lookup"><span data-stu-id="eaadd-321">This section describes a native application that calls a web API on behalf of a user.</span></span> <span data-ttu-id="eaadd-322">Este cenário se baseia no tipo de concessão de código de autorização de saudação OAuth 2.0 com um cliente público, conforme descrito na seção 4.1 da saudação [especificação OAuth 2.0](http://tools.ietf.org/html/rfc6749).</span><span class="sxs-lookup"><span data-stu-id="eaadd-322">This scenario is built on hello OAuth 2.0 authorization code grant type with a public client, as described in section 4.1 of hello [OAuth 2.0 specification](http://tools.ietf.org/html/rfc6749).</span></span> <span data-ttu-id="eaadd-323">aplicativo nativo Hello obtém um token de acesso de usuário de saudação usando o protocolo de saudação OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="eaadd-323">hello native application obtains an access token for hello user by using hello OAuth 2.0 protocol.</span></span> <span data-ttu-id="eaadd-324">Esse token de acesso é enviado na Olá solicitação toohello API da web, que autoriza o usuário hello e retorna o recurso de saudação desejado.</span><span class="sxs-lookup"><span data-stu-id="eaadd-324">This access token is then sent in hello request toohello web API, which authorizes hello user and returns hello desired resource.</span></span>

#### <a name="diagram"></a><span data-ttu-id="eaadd-325">Diagrama</span><span class="sxs-lookup"><span data-stu-id="eaadd-325">Diagram</span></span>
![TooWeb do aplicativo nativo diagrama de API](./media/active-directory-authentication-scenarios/native_app_to_web_api.png)

#### <a name="authentication-flow-for-native-application-tooapi"></a><span data-ttu-id="eaadd-327">Fluxo de autenticação do aplicativo nativo tooAPI</span><span class="sxs-lookup"><span data-stu-id="eaadd-327">Authentication flow for native application tooAPI</span></span>
#### <a name="description-of-protocol-flow"></a><span data-ttu-id="eaadd-328">Descrição do fluxo de protocolo</span><span class="sxs-lookup"><span data-stu-id="eaadd-328">Description of Protocol Flow</span></span>
<span data-ttu-id="eaadd-329">Se você estiver usando bibliotecas de autenticação Olá AD, a maioria dos detalhes de protocolo hello descritas abaixo é tratada para você, como pop-up do navegador hello, cache de token e manipulação de tokens de atualização.</span><span class="sxs-lookup"><span data-stu-id="eaadd-329">If you are using hello AD Authentication Libraries, most of hello protocol details described below are handled for you, such as hello browser pop-up, token caching, and handling of refresh tokens.</span></span>

1. <span data-ttu-id="eaadd-330">Usando um pop-up do navegador, o aplicativo nativo hello faz um ponto de extremidade de autorização de toohello de solicitação no AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="eaadd-330">Using a browser pop-up, hello native application makes a request toohello authorization endpoint in Azure AD.</span></span> <span data-ttu-id="eaadd-331">Essa solicitação inclui hello ID do aplicativo e redirecionamento de saudação URI do aplicativo nativo hello conforme mostrado no hello Portal do Azure e o aplicativo hello URI de ID para a API da web hello.</span><span class="sxs-lookup"><span data-stu-id="eaadd-331">This request includes hello Application ID and hello redirect URI of hello native application as shown in hello Azure Portal, and hello application ID URI for hello web API.</span></span> <span data-ttu-id="eaadd-332">Se o usuário Olá ainda não tiver entrado, que sejam solicitada toosign no novamente</span><span class="sxs-lookup"><span data-stu-id="eaadd-332">If hello user hasn’t already signed in, they are prompted toosign in again</span></span>
2. <span data-ttu-id="eaadd-333">Azure AD autentica o usuário hello.</span><span class="sxs-lookup"><span data-stu-id="eaadd-333">Azure AD authenticates hello user.</span></span> <span data-ttu-id="eaadd-334">Se for um aplicativo multilocatário e consentimento for necessário toouse Olá aplicativo, o usuário de Olá será tooconsent necessária se eles ainda não tiver feito isso.</span><span class="sxs-lookup"><span data-stu-id="eaadd-334">If it is a multi-tenant application and consent is required toouse hello application, hello user will be required tooconsent if they haven’t already done so.</span></span> <span data-ttu-id="eaadd-335">Após dar consentimento e após a autenticação bem-sucedida, o Azure AD emite o URI de redirecionamento de uma autorização código resposta toohello voltar do aplicativo cliente.</span><span class="sxs-lookup"><span data-stu-id="eaadd-335">After granting consent and upon successful authentication, Azure AD issues an authorization code response back toohello client application’s redirect URI.</span></span>
3. <span data-ttu-id="eaadd-336">Quando o AD do Azure envia de volta uma resposta de código de autorização toohello URI de redirecionamento, Olá paradas de navegador interação e extrai Olá autorização código do aplicativo cliente de resposta de saudação.</span><span class="sxs-lookup"><span data-stu-id="eaadd-336">When Azure AD issues an authorization code response back toohello redirect URI, hello client application stops browser interaction and extracts hello authorization code from hello response.</span></span> <span data-ttu-id="eaadd-337">Usando esse código de autorização, aplicativo de cliente de saudação envia uma solicitação de tooAzure do AD do ponto de extremidade que inclui o código de autorização de saudação, detalhes sobre Olá aplicativo cliente (ID do aplicativo e URI de redirecionamento) e Olá recurso desejado (ID do aplicativo URI para a API da web hello).</span><span class="sxs-lookup"><span data-stu-id="eaadd-337">Using this authorization code, hello client application sends a request tooAzure AD’s token endpoint that includes hello authorization code, details about hello client application (Application ID and redirect URI), and hello desired resource (application ID URI for hello web API).</span></span>
4. <span data-ttu-id="eaadd-338">código de autorização Hello e obter informações sobre o aplicativo de cliente hello e a API da web são validados pelo AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="eaadd-338">hello authorization code and information about hello client application and web API are validated by Azure AD.</span></span> <span data-ttu-id="eaadd-339">Após a validação bem-sucedida, o Azure AD retorna dois tokens: um token de acesso JWT e um token de atualização JWT.</span><span class="sxs-lookup"><span data-stu-id="eaadd-339">Upon successful validation, Azure AD returns two tokens: a JWT access token and a JWT refresh token.</span></span> <span data-ttu-id="eaadd-340">Além disso, o AD do Azure retorna informações básicas sobre o usuário hello, como seu ID de nome e de locatário de exibição</span><span class="sxs-lookup"><span data-stu-id="eaadd-340">In addition, Azure AD returns basic information about hello user, such as their display name and tenant ID.</span></span>
5. <span data-ttu-id="eaadd-341">Via HTTPS, o aplicativo de cliente de saudação usa Olá retornado Olá tooadd token de acesso JWT cadeia de caracteres JWT com uma designação "Portador" no cabeçalho de autorização de saudação da API da web do toohello Olá solicitação.</span><span class="sxs-lookup"><span data-stu-id="eaadd-341">Over HTTPS, hello client application uses hello returned JWT access token tooadd hello JWT string with a “Bearer” designation in hello Authorization header of hello request toohello web API.</span></span> <span data-ttu-id="eaadd-342">Olá web API, em seguida, valida o token JWT hello e se a validação for bem-sucedida, retorna Olá desejado de recursos.</span><span class="sxs-lookup"><span data-stu-id="eaadd-342">hello web API then validates hello JWT token, and if validation is successful, returns hello desired resource.</span></span>
6. <span data-ttu-id="eaadd-343">Quando o token de acesso de saudação expira, aplicativo de cliente hello receberá um erro que indica que o usuário de saudação precisa tooauthenticate novamente.</span><span class="sxs-lookup"><span data-stu-id="eaadd-343">When hello access token expires, hello client application will receive an error that indicates hello user needs tooauthenticate again.</span></span> <span data-ttu-id="eaadd-344">Se o aplicativo hello tem um token de atualização válido, pode ser usado tooacquire um novo token de acesso sem solicitar Olá toosign de usuário em novamente.</span><span class="sxs-lookup"><span data-stu-id="eaadd-344">If hello application has a valid refresh token, it can be used tooacquire a new access token without prompting hello user toosign in again.</span></span> <span data-ttu-id="eaadd-345">Se o token de atualização de saudação expira, o aplicativo hello precisará toointeractively autenticar usuário Olá novamente.</span><span class="sxs-lookup"><span data-stu-id="eaadd-345">If hello refresh token expires, hello application will need toointeractively authenticate hello user once again.</span></span>

> [!NOTE]
> <span data-ttu-id="eaadd-346">o token de atualização Olá emitido pelo AD do Azure pode ser usado tooaccess vários recursos.</span><span class="sxs-lookup"><span data-stu-id="eaadd-346">hello refresh token issued by Azure AD can be used tooaccess multiple resources.</span></span> <span data-ttu-id="eaadd-347">Por exemplo, se você tiver um aplicativo cliente que tem APIs da web de toocall dois permissão, o token de atualização Olá pode ser usado tooget uma acesso toohello token outra API da web também.</span><span class="sxs-lookup"><span data-stu-id="eaadd-347">For example, if you have a client application that has permission toocall two web APIs, hello refresh token can be used tooget an access token toohello other web API as well.</span></span>
> 
> 

#### <a name="code-samples"></a><span data-ttu-id="eaadd-348">Exemplos de código</span><span class="sxs-lookup"><span data-stu-id="eaadd-348">Code Samples</span></span>
<span data-ttu-id="eaadd-349">Consulte exemplos de código de saudação para cenários de API do aplicativo nativo tooWeb.</span><span class="sxs-lookup"><span data-stu-id="eaadd-349">See hello code samples for Native Application tooWeb API scenarios.</span></span> <span data-ttu-id="eaadd-350">E, volte a consultar frequentemente - adicionamos novos exemplos de todo o tempo de saudação.</span><span class="sxs-lookup"><span data-stu-id="eaadd-350">And, check back frequently -- we add new samples all hello time.</span></span> <span data-ttu-id="eaadd-351">[TooWeb do aplicativo nativo API](active-directory-code-samples.md#native-application-to-web-api).</span><span class="sxs-lookup"><span data-stu-id="eaadd-351">[Native Application tooWeb API](active-directory-code-samples.md#native-application-to-web-api).</span></span>

#### <a name="registering"></a><span data-ttu-id="eaadd-352">Registro</span><span class="sxs-lookup"><span data-stu-id="eaadd-352">Registering</span></span>
* <span data-ttu-id="eaadd-353">Único locatário: Ambos Olá aplicativo nativo e Olá web API deve ser registrada no hello mesmo diretório no AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="eaadd-353">Single Tenant: Both hello native application and hello web API must be registered in hello same directory in Azure AD.</span></span> <span data-ttu-id="eaadd-354">Olá web API pode ser configurado tooexpose um conjunto de permissões, que são usados toolimit Olá nativo acesso tooits recursos de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="eaadd-354">hello web API can be configured tooexpose a set of permissions, which are used toolimit hello native application’s access tooits resources.</span></span> <span data-ttu-id="eaadd-355">aplicativo de cliente Hello, em seguida, seleciona permissões Olá desejado no menu Olá suspenso "Permissões tooOther aplicativos" hello Portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="eaadd-355">hello client application then selects hello desired permissions from hello “Permissions tooOther Applications” drop-down menu in hello Azure Portal.</span></span>
* <span data-ttu-id="eaadd-356">Multilocatário: Primeiro, aplicativo nativo hello registrou-se apenas no diretório Olá desenvolvedor ou do publicador.</span><span class="sxs-lookup"><span data-stu-id="eaadd-356">Multi-Tenant: First, hello native application only ever registered in hello developer or publisher’s directory.</span></span> <span data-ttu-id="eaadd-357">Segundo, o aplicativo nativo hello é configurado tooindicate Olá permissões requer toobe funcional.</span><span class="sxs-lookup"><span data-stu-id="eaadd-357">Second, hello native application is configured tooindicate hello permissions it requires toobe functional.</span></span> <span data-ttu-id="eaadd-358">Esta lista de permissões necessárias é mostrada em uma caixa de diálogo quando um usuário ou administrador no diretório de destino Olá dá consentimento toohello aplicativo, o que torna disponíveis tootheir organização.</span><span class="sxs-lookup"><span data-stu-id="eaadd-358">This list of required permissions is shown in a dialog when a user or administrator in hello destination directory gives consent toohello application, which makes it available tootheir organization.</span></span> <span data-ttu-id="eaadd-359">Alguns aplicativos exigem permissões de nível de usuário, que qualquer usuário na organização Olá pode consentir.</span><span class="sxs-lookup"><span data-stu-id="eaadd-359">Some applications require just user-level permissions, which any user in hello organization can consent to.</span></span> <span data-ttu-id="eaadd-360">Outros aplicativos exigem permissões de administrador, que um usuário de organização de saudação não pode consentir.</span><span class="sxs-lookup"><span data-stu-id="eaadd-360">Other applications require administrator-level permissions, which a user in hello organization cannot consent to.</span></span> <span data-ttu-id="eaadd-361">Somente um administrador do diretório pode dar consentimento tooapplications que requerem esse nível de permissões.</span><span class="sxs-lookup"><span data-stu-id="eaadd-361">Only a directory administrator can give consent tooapplications that require this level of permissions.</span></span> <span data-ttu-id="eaadd-362">Quando Olá usuário ou administrador der consentimento, apenas Olá API da web está registrado no seu diretório.</span><span class="sxs-lookup"><span data-stu-id="eaadd-362">When hello user or administrator consents, only hello web API is registered in their directory.</span></span> <span data-ttu-id="eaadd-363">Para saber mais, confira [Integrando aplicativos com o Active Directory do Azure](active-directory-integrating-applications.md).</span><span class="sxs-lookup"><span data-stu-id="eaadd-363">For more information, see [Integrating Applications with Azure Active Directory](active-directory-integrating-applications.md).</span></span>

#### <a name="token-expiration"></a><span data-ttu-id="eaadd-364">Expiração do token</span><span class="sxs-lookup"><span data-stu-id="eaadd-364">Token Expiration</span></span>
<span data-ttu-id="eaadd-365">Quando o aplicativo nativo hello usa seu código de autorização tooget um token de acesso JWT, ele também recebe um token de atualização JWT.</span><span class="sxs-lookup"><span data-stu-id="eaadd-365">When hello native application uses its authorization code tooget a JWT access token, it also receives a JWT refresh token.</span></span> <span data-ttu-id="eaadd-366">Quando o token de acesso de saudação expira, token de atualização de saudação pode ser usado toore-autenticar o usuário Olá sem exigir que eles toosign em novamente.</span><span class="sxs-lookup"><span data-stu-id="eaadd-366">When hello access token expires, hello refresh token can be used toore-authenticate hello user without requiring them toosign in again.</span></span> <span data-ttu-id="eaadd-367">Esse token de atualização é usado tooauthenticate Olá usuário, que resulta em um novo acesso de token e de atualização de token.</span><span class="sxs-lookup"><span data-stu-id="eaadd-367">This refresh token is then used tooauthenticate hello user, which results in a new access token and refresh token.</span></span>

### <a name="web-application-tooweb-api"></a><span data-ttu-id="eaadd-368">TooWeb de aplicativo da Web API</span><span class="sxs-lookup"><span data-stu-id="eaadd-368">Web Application tooWeb API</span></span>
<span data-ttu-id="eaadd-369">Esta seção descreve um aplicativo web que precisa de recursos de tooget de uma API da web.</span><span class="sxs-lookup"><span data-stu-id="eaadd-369">This section describes a web application that needs tooget resources from a web API.</span></span> <span data-ttu-id="eaadd-370">Nesse cenário, há dois tipos de identidade que Olá aplicativo web podem usar tooauthenticate e chamar a API da web do hello: uma identidade de aplicativo, ou uma identidade de usuário delegado.</span><span class="sxs-lookup"><span data-stu-id="eaadd-370">In this scenario, there are two identity types that hello web application can use tooauthenticate and call hello web API: an application identity, or a delegated user identity.</span></span>

<span data-ttu-id="eaadd-371">*Identidade do aplicativo:* essa usa cenário as credenciais do cliente OAuth 2.0 conceder tooauthenticate como aplicativo hello e hello de acesso web API.</span><span class="sxs-lookup"><span data-stu-id="eaadd-371">*Application identity:* This scenario uses OAuth 2.0 client credentials grant tooauthenticate as hello application and access hello web API.</span></span> <span data-ttu-id="eaadd-372">Ao usar uma identidade de aplicativo, Olá web API só pode detectar que o aplicativo hello está chamando, como Olá API da web não recebe todas as informações sobre usuário hello.</span><span class="sxs-lookup"><span data-stu-id="eaadd-372">When using an application identity, hello web API can only detect that hello web application is calling it, as hello web API does not receive any information about hello user.</span></span> <span data-ttu-id="eaadd-373">Se o aplicativo hello recebe informações sobre o usuário hello, ele será enviado por meio do protocolo de aplicativo hello e ele não está assinado pelo AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="eaadd-373">If hello application receives information about hello user, it will be sent via hello application protocol, and it is not signed by Azure AD.</span></span> <span data-ttu-id="eaadd-374">API da web Hello confia que o aplicativo da web hello autenticado usuário hello.</span><span class="sxs-lookup"><span data-stu-id="eaadd-374">hello web API trusts that hello web application authenticated hello user.</span></span> <span data-ttu-id="eaadd-375">Por esse motivo, esse padrão é chamado de subsistema confiável.</span><span class="sxs-lookup"><span data-stu-id="eaadd-375">For this reason, this pattern is called a trusted subsystem.</span></span>

<span data-ttu-id="eaadd-376">*Identidade de usuário delegado:* o cenário pode ser realizado de duas maneiras, OpenID Connect e concessão de código de autorização OAuth 2.0 com um cliente confidencial.</span><span class="sxs-lookup"><span data-stu-id="eaadd-376">*Delegated user identity:* This scenario can be accomplished in two ways: OpenID Connect, and OAuth 2.0 authorization code grant with a confidential client.</span></span> <span data-ttu-id="eaadd-377">aplicativo da web Hello obtém um token de acesso de usuário hello, que prova toohello web API esse aplicativo de web toohello Olá usuário autenticado com êxito e que o aplicativo da web hello foi capaz de tooobtain um usuário delegado identidade toocall Olá API da web.</span><span class="sxs-lookup"><span data-stu-id="eaadd-377">hello web application obtains an access token for hello user, which proves toohello web API that hello user successfully authenticated toohello web application and that hello web application was able tooobtain a delegated user identity toocall hello web API.</span></span> <span data-ttu-id="eaadd-378">Esse token de acesso é enviado em Olá solicitação toohello API da web, que autoriza o usuário hello e retorna o recurso de saudação desejado.</span><span class="sxs-lookup"><span data-stu-id="eaadd-378">This access token is sent in hello request toohello web API, which authorizes hello user and returns hello desired resource.</span></span>

#### <a name="diagram"></a><span data-ttu-id="eaadd-379">Diagrama</span><span class="sxs-lookup"><span data-stu-id="eaadd-379">Diagram</span></span>
![Diagrama de tooWeb API do aplicativo de Web](./media/active-directory-authentication-scenarios/web_app_to_web_api.png)

#### <a name="description-of-protocol-flow"></a><span data-ttu-id="eaadd-381">Descrição do fluxo de protocolo</span><span class="sxs-lookup"><span data-stu-id="eaadd-381">Description of Protocol Flow</span></span>
<span data-ttu-id="eaadd-382">Ambos Olá identidade de aplicativo e tipos de identidade de usuário delegado são discutidos no fluxo de saudação abaixo.</span><span class="sxs-lookup"><span data-stu-id="eaadd-382">Both hello application identity and delegated user identity types are discussed in hello flow below.</span></span> <span data-ttu-id="eaadd-383">Olá principal diferença entre eles é que Olá delegada a identidade do usuário deve primeiro adquirir um código de autorização antes de saudação usuário pode entrar e obter acesso toohello web API.</span><span class="sxs-lookup"><span data-stu-id="eaadd-383">hello key difference between them is that hello delegated user identity must first acquire an authorization code before hello user can sign-in and gain access toohello web API.</span></span>

##### <a name="application-identity-with-oauth-20-client-credentials-grant"></a><span data-ttu-id="eaadd-384">Identidade do aplicativo com concessão de credenciais do cliente OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="eaadd-384">Application Identity with OAuth 2.0 Client Credentials Grant</span></span>
1. <span data-ttu-id="eaadd-385">Um usuário está conectado no tooAzure AD no aplicativo da web hello (consulte Olá [tooWeb do navegador da Web aplicativo](#web-browser-to-web-application) acima).</span><span class="sxs-lookup"><span data-stu-id="eaadd-385">A user is signed in tooAzure AD in hello web application (see hello [Web Browser tooWeb Application](#web-browser-to-web-application) above).</span></span>
2. <span data-ttu-id="eaadd-386">aplicativo da web Hello precisa tooacquire um token de acesso para que ele possa autenticar toohello web API e recuperar o recurso de saudação desejado.</span><span class="sxs-lookup"><span data-stu-id="eaadd-386">hello web application needs tooacquire an access token so that it can authenticate toohello web API and retrieve hello desired resource.</span></span> <span data-ttu-id="eaadd-387">Faz uma tooAzure de solicitação do AD do ponto de extremidade token, fornecendo credenciais de hello, ID do aplicativo e URI de ID do aplicativo da API da web.</span><span class="sxs-lookup"><span data-stu-id="eaadd-387">It makes a request tooAzure AD’s token endpoint, providing hello credential, Application ID, and web API’s application ID URI.</span></span>
3. <span data-ttu-id="eaadd-388">O AD do Azure autentica o aplicativo hello e retorna um token de acesso JWT que é usado toocall Olá web API.</span><span class="sxs-lookup"><span data-stu-id="eaadd-388">Azure AD authenticates hello application and returns a JWT access token that is used toocall hello web API.</span></span>
4. <span data-ttu-id="eaadd-389">Via HTTPS, o aplicativo da web hello usa Olá retornado Olá tooadd token de acesso JWT cadeia de caracteres JWT com uma designação "Portador" no cabeçalho de autorização de saudação da API da web do toohello Olá solicitação.</span><span class="sxs-lookup"><span data-stu-id="eaadd-389">Over HTTPS, hello web application uses hello returned JWT access token tooadd hello JWT string with a “Bearer” designation in hello Authorization header of hello request toohello web API.</span></span> <span data-ttu-id="eaadd-390">Olá web API, em seguida, valida o token JWT hello e se a validação for bem-sucedida, retorna Olá desejado de recursos.</span><span class="sxs-lookup"><span data-stu-id="eaadd-390">hello web API then validates hello JWT token, and if validation is successful, returns hello desired resource.</span></span>

##### <a name="delegated-user-identity-with-openid-connect"></a><span data-ttu-id="eaadd-391">Identidade de usuário delegado com OpenID Connect</span><span class="sxs-lookup"><span data-stu-id="eaadd-391">Delegated User Identity with OpenID Connect</span></span>
1. <span data-ttu-id="eaadd-392">Um usuário está conectado no aplicativo web de tooa usando o AD do Azure (consulte Olá [tooWeb do navegador da Web aplicativo](#web-browser-to-web-application) seção acima).</span><span class="sxs-lookup"><span data-stu-id="eaadd-392">A user is signed in tooa web application using Azure AD (see hello [Web Browser tooWeb Application](#web-browser-to-web-application) section above).</span></span> <span data-ttu-id="eaadd-393">Se o usuário de saudação do aplicativo da web hello não consentiu ainda tooallowing Olá web aplicativo toocall Olá API da web em seu nome, o usuário Olá precisará tooconsent.</span><span class="sxs-lookup"><span data-stu-id="eaadd-393">If hello user of hello web application has not yet consented tooallowing hello web application toocall hello web API on its behalf, hello user will need tooconsent.</span></span> <span data-ttu-id="eaadd-394">aplicativo Hello exibirá permissões Olá requer e, se qualquer uma dessas permissões de administrador, um usuário normal no diretório de saudação não será capaz de tooconsent.</span><span class="sxs-lookup"><span data-stu-id="eaadd-394">hello application will display hello permissions it requires, and if any of these are administrator-level permissions, a normal user in hello directory will not be able tooconsent.</span></span> <span data-ttu-id="eaadd-395">Esse processo de consentimento só se aplica a aplicativos de locatário toomulti, aplicativos de locatário não único, como aplicativo hello já terão as permissões necessárias de saudação.</span><span class="sxs-lookup"><span data-stu-id="eaadd-395">This consent process only applies toomulti-tenant applications, not single tenant applications, as hello application will already have hello necessary permissions.</span></span> <span data-ttu-id="eaadd-396">Quando hello usuário conectado, o aplicativo hello recebeu um token de ID com informações sobre o usuário hello, bem como um código de autorização.</span><span class="sxs-lookup"><span data-stu-id="eaadd-396">When hello user signed in, hello web application received an ID token with information about hello user, as well as an authorization code.</span></span>
2. <span data-ttu-id="eaadd-397">Usando o código de autorização Olá emitido pelo AD do Azure, aplicativo da web hello envia uma solicitação de tooAzure do AD do ponto de extremidade que inclui o código de autorização de saudação, detalhes sobre o aplicativo de cliente hello (ID do aplicativo e URI de redirecionamento) e hello desejado de recurso ( aplicativo do URI de ID para Olá web API).</span><span class="sxs-lookup"><span data-stu-id="eaadd-397">Using hello authorization code issued by Azure AD, hello web application sends a request tooAzure AD’s token endpoint that includes hello authorization code, details about hello client application (Application ID and redirect URI), and hello desired resource (application ID URI for hello web API).</span></span>
3. <span data-ttu-id="eaadd-398">código de autorização Hello e obter informações sobre o aplicativo da web hello e a API da web são validados pelo AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="eaadd-398">hello authorization code and information about hello web application and web API are validated by Azure AD.</span></span> <span data-ttu-id="eaadd-399">Após a validação bem-sucedida, o Azure AD retorna dois tokens: um token de acesso JWT e um token de atualização JWT.</span><span class="sxs-lookup"><span data-stu-id="eaadd-399">Upon successful validation, Azure AD returns two tokens: a JWT access token and a JWT refresh token.</span></span>
4. <span data-ttu-id="eaadd-400">Via HTTPS, o aplicativo da web hello usa Olá retornado Olá tooadd token de acesso JWT cadeia de caracteres JWT com uma designação "Portador" no cabeçalho de autorização de saudação da API da web do toohello Olá solicitação.</span><span class="sxs-lookup"><span data-stu-id="eaadd-400">Over HTTPS, hello web application uses hello returned JWT access token tooadd hello JWT string with a “Bearer” designation in hello Authorization header of hello request toohello web API.</span></span> <span data-ttu-id="eaadd-401">Olá web API, em seguida, valida o token JWT hello e se a validação for bem-sucedida, retorna Olá desejado de recursos.</span><span class="sxs-lookup"><span data-stu-id="eaadd-401">hello web API then validates hello JWT token, and if validation is successful, returns hello desired resource.</span></span>

##### <a name="delegated-user-identity-with-oauth-20-authorization-code-grant"></a><span data-ttu-id="eaadd-402">Identidade de usuário delegado com concessão de código de autorização do OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="eaadd-402">Delegated User Identity with OAuth 2.0 Authorization Code Grant</span></span>
1. <span data-ttu-id="eaadd-403">Um usuário já está conectado no aplicativo da web tooa, cujo mecanismo de autenticação é independente do AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="eaadd-403">A user is already signed in tooa web application, whose authentication mechanism is independent of Azure AD.</span></span>
2. <span data-ttu-id="eaadd-404">Olá aplicativo web requer uma autorização de código tooacquire um token de acesso, portanto, envia uma solicitação por meio do ponto de extremidade de autorização de Olá navegador tooAzure do AD, fornecendo Olá ID do aplicativo e URI de redirecionamento para o aplicativo da web hello após bem-sucedida autenticação.</span><span class="sxs-lookup"><span data-stu-id="eaadd-404">hello web application requires an authorization code tooacquire an access token, so it issues a request through hello browser tooAzure AD’s authorization endpoint, providing hello Application ID and redirect URI for hello web application after successful authentication.</span></span> <span data-ttu-id="eaadd-405">usuário Olá entra tooAzure AD.</span><span class="sxs-lookup"><span data-stu-id="eaadd-405">hello user signs in tooAzure AD.</span></span>
3. <span data-ttu-id="eaadd-406">Se o usuário de saudação do aplicativo da web hello não consentiu ainda tooallowing Olá web aplicativo toocall Olá API da web em seu nome, o usuário Olá precisará tooconsent.</span><span class="sxs-lookup"><span data-stu-id="eaadd-406">If hello user of hello web application has not yet consented tooallowing hello web application toocall hello web API on its behalf, hello user will need tooconsent.</span></span> <span data-ttu-id="eaadd-407">aplicativo Hello exibirá permissões Olá requer e, se qualquer uma dessas permissões de administrador, um usuário normal no diretório de saudação não será capaz de tooconsent.</span><span class="sxs-lookup"><span data-stu-id="eaadd-407">hello application will display hello permissions it requires, and if any of these are administrator-level permissions, a normal user in hello directory will not be able tooconsent.</span></span> <span data-ttu-id="eaadd-408">Esse consentimento aplica tooboth único e multilocatário o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="eaadd-408">This consent applies tooboth single and multi-tenant application.</span></span>  <span data-ttu-id="eaadd-409">No caso de locatário único hello, um administrador pode executar tooconsent de consentimento do administrador em nome dos seus usuários.</span><span class="sxs-lookup"><span data-stu-id="eaadd-409">In hello single tenant case, an admin can perform admin consent tooconsent on behalf of their users.</span></span>  <span data-ttu-id="eaadd-410">Isso pode ser feito usando Olá `Grant Permissions` botão Olá [Portal do Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="eaadd-410">This can be done using hello `Grant Permissions` button in hello [Azure Portal](https://portal.azure.com).</span></span> 
4. <span data-ttu-id="eaadd-411">Após Olá usuário consentiu, aplicativo da web hello recebe código de autorização de saudação que precisa tooacquire um token de acesso.</span><span class="sxs-lookup"><span data-stu-id="eaadd-411">After hello user has consented, hello web application receives hello authorization code that it needs tooacquire an access token.</span></span>
5. <span data-ttu-id="eaadd-412">Usando o código de autorização Olá emitido pelo AD do Azure, aplicativo da web hello envia uma solicitação de tooAzure do AD do ponto de extremidade que inclui o código de autorização de saudação, detalhes sobre o aplicativo de cliente hello (ID do aplicativo e URI de redirecionamento) e hello desejado de recurso ( aplicativo do URI de ID para Olá web API).</span><span class="sxs-lookup"><span data-stu-id="eaadd-412">Using hello authorization code issued by Azure AD, hello web application sends a request tooAzure AD’s token endpoint that includes hello authorization code, details about hello client application (Application ID and redirect URI), and hello desired resource (application ID URI for hello web API).</span></span>
6. <span data-ttu-id="eaadd-413">código de autorização Hello e obter informações sobre o aplicativo da web hello e a API da web são validados pelo AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="eaadd-413">hello authorization code and information about hello web application and web API are validated by Azure AD.</span></span> <span data-ttu-id="eaadd-414">Após a validação bem-sucedida, o Azure AD retorna dois tokens: um token de acesso JWT e um token de atualização JWT.</span><span class="sxs-lookup"><span data-stu-id="eaadd-414">Upon successful validation, Azure AD returns two tokens: a JWT access token and a JWT refresh token.</span></span>
7. <span data-ttu-id="eaadd-415">Via HTTPS, o aplicativo da web hello usa Olá retornado Olá tooadd token de acesso JWT cadeia de caracteres JWT com uma designação "Portador" no cabeçalho de autorização de saudação da API da web do toohello Olá solicitação.</span><span class="sxs-lookup"><span data-stu-id="eaadd-415">Over HTTPS, hello web application uses hello returned JWT access token tooadd hello JWT string with a “Bearer” designation in hello Authorization header of hello request toohello web API.</span></span> <span data-ttu-id="eaadd-416">Olá web API, em seguida, valida o token JWT hello e se a validação for bem-sucedida, retorna Olá desejado de recursos.</span><span class="sxs-lookup"><span data-stu-id="eaadd-416">hello web API then validates hello JWT token, and if validation is successful, returns hello desired resource.</span></span>

#### <a name="code-samples"></a><span data-ttu-id="eaadd-417">Exemplos de código</span><span class="sxs-lookup"><span data-stu-id="eaadd-417">Code Samples</span></span>
<span data-ttu-id="eaadd-418">Consulte exemplos de código de saudação para cenários de API de tooWeb do aplicativo Web.</span><span class="sxs-lookup"><span data-stu-id="eaadd-418">See hello code samples for Web Application tooWeb API scenarios.</span></span> <span data-ttu-id="eaadd-419">E, volte a consultar frequentemente - adicionamos novos exemplos de todo o tempo de saudação.</span><span class="sxs-lookup"><span data-stu-id="eaadd-419">And, check back frequently -- we add new samples all hello time.</span></span> <span data-ttu-id="eaadd-420">Web [tooWeb aplicativo API](active-directory-code-samples.md#web-application-to-web-api).</span><span class="sxs-lookup"><span data-stu-id="eaadd-420">Web [Application tooWeb API](active-directory-code-samples.md#web-application-to-web-api).</span></span>

#### <a name="registering"></a><span data-ttu-id="eaadd-421">Registro</span><span class="sxs-lookup"><span data-stu-id="eaadd-421">Registering</span></span>
* <span data-ttu-id="eaadd-422">Único locatário: Identidade de aplicativo hello e casos de identidade de usuário delegado, Olá aplicativo web e Olá web API deve ser registrada no hello mesmo diretório no AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="eaadd-422">Single Tenant: For both hello application identity and delegated user identity cases, hello web application and hello web API must be registered in hello same directory in Azure AD.</span></span> <span data-ttu-id="eaadd-423">Olá web API pode ser configurado tooexpose um conjunto de permissões, que são usados toolimit Olá web access tooits recursos de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="eaadd-423">hello web API can be configured tooexpose a set of permissions, which are used toolimit hello web application’s access tooits resources.</span></span> <span data-ttu-id="eaadd-424">Se um tipo de identidade de usuário delegado estiver sendo usado, o aplicativo da web de Olá precisa tooselect permissões de saudação desejada no menu Olá suspenso "Permissões tooOther aplicativos" hello Portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="eaadd-424">If a delegated user identity type is being used, hello web application needs tooselect hello desired permissions from hello “Permissions tooOther Applications” drop-down menu in hello Azure Portal.</span></span> <span data-ttu-id="eaadd-425">Essa etapa não será necessária se o tipo de identidade de aplicativo hello está sendo usado.</span><span class="sxs-lookup"><span data-stu-id="eaadd-425">This step is not required if hello application identity type is being used.</span></span>
* <span data-ttu-id="eaadd-426">Multilocatário: Primeiro, aplicativo da web hello é configurado tooindicate Olá permissões requer toobe funcional.</span><span class="sxs-lookup"><span data-stu-id="eaadd-426">Multi-Tenant: First, hello web application is configured tooindicate hello permissions it requires toobe functional.</span></span> <span data-ttu-id="eaadd-427">Esta lista de permissões necessárias é mostrada em uma caixa de diálogo quando um usuário ou administrador no diretório de destino Olá dá consentimento toohello aplicativo, o que torna disponíveis tootheir organização.</span><span class="sxs-lookup"><span data-stu-id="eaadd-427">This list of required permissions is shown in a dialog when a user or administrator in hello destination directory gives consent toohello application, which makes it available tootheir organization.</span></span> <span data-ttu-id="eaadd-428">Alguns aplicativos exigem permissões de nível de usuário, que qualquer usuário na organização Olá pode consentir.</span><span class="sxs-lookup"><span data-stu-id="eaadd-428">Some applications require just user-level permissions, which any user in hello organization can consent to.</span></span> <span data-ttu-id="eaadd-429">Outros aplicativos exigem permissões de administrador, que um usuário de organização de saudação não pode consentir.</span><span class="sxs-lookup"><span data-stu-id="eaadd-429">Other applications require administrator-level permissions, which a user in hello organization cannot consent to.</span></span> <span data-ttu-id="eaadd-430">Somente um administrador do diretório pode dar consentimento tooapplications que requerem esse nível de permissões.</span><span class="sxs-lookup"><span data-stu-id="eaadd-430">Only a directory administrator can give consent tooapplications that require this level of permissions.</span></span> <span data-ttu-id="eaadd-431">Quando consente usuário ou administrador, Olá Olá a API da web hello e de aplicativo da web estão registrados no seu diretório.</span><span class="sxs-lookup"><span data-stu-id="eaadd-431">When hello user or administrator consents, hello web application and hello web API are both registered in their directory.</span></span>

#### <a name="token-expiration"></a><span data-ttu-id="eaadd-432">Expiração do token</span><span class="sxs-lookup"><span data-stu-id="eaadd-432">Token Expiration</span></span>
<span data-ttu-id="eaadd-433">Quando o aplicativo da web hello usa seu código de autorização tooget um token de acesso JWT, ele também recebe um token de atualização JWT.</span><span class="sxs-lookup"><span data-stu-id="eaadd-433">When hello web application uses its authorization code tooget a JWT access token, it also receives a JWT refresh token.</span></span> <span data-ttu-id="eaadd-434">Quando o token de acesso de saudação expira, token de atualização de saudação pode ser usado toore-autenticar o usuário Olá sem exigir que eles toosign em novamente.</span><span class="sxs-lookup"><span data-stu-id="eaadd-434">When hello access token expires, hello refresh token can be used toore-authenticate hello user without requiring them toosign in again.</span></span> <span data-ttu-id="eaadd-435">Esse token de atualização é usado tooauthenticate Olá usuário, que resulta em um novo acesso de token e de atualização de token.</span><span class="sxs-lookup"><span data-stu-id="eaadd-435">This refresh token is then used tooauthenticate hello user, which results in a new access token and refresh token.</span></span>

### <a name="daemon-or-server-application-tooweb-api"></a><span data-ttu-id="eaadd-436">TooWeb daemon ou aplicativo de servidor API</span><span class="sxs-lookup"><span data-stu-id="eaadd-436">Daemon or Server Application tooWeb API</span></span>
<span data-ttu-id="eaadd-437">Esta seção descreve um aplicativo daemon ou de servidor que precisa de recursos de tooget de uma API da web.</span><span class="sxs-lookup"><span data-stu-id="eaadd-437">This section describes a daemon or server application that needs tooget resources from a web API.</span></span> <span data-ttu-id="eaadd-438">Há dois cenários secundários que se aplicam a seção toothis: um daemon que precisa toocall uma API da web, baseada no tipo de concessão de credenciais de cliente OAuth 2.0; e uma API da web, de um aplicativo de servidor (como uma API da web) que precisa toocall criadas na especificação de rascunho do nome do OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="eaadd-438">There are two sub-scenarios that apply toothis section: A daemon that needs toocall a web API, built on OAuth 2.0 client credentials grant type; and a server application (such as a web API) that needs toocall a web API, built on OAuth 2.0 On-Behalf-Of draft specification.</span></span>

<span data-ttu-id="eaadd-439">Para o cenário de saudação quando um aplicativo daemon precisa toocall uma API da web, é importante toounderstand algumas coisas.</span><span class="sxs-lookup"><span data-stu-id="eaadd-439">For hello scenario when a daemon application needs toocall a web API, it’s important toounderstand a few things.</span></span> <span data-ttu-id="eaadd-440">Primeiro, a interação do usuário não é possível com um aplicativo daemon, que exige Olá aplicativo toohave sua própria identidade.</span><span class="sxs-lookup"><span data-stu-id="eaadd-440">First, user interaction is not possible with a daemon application, which requires hello application toohave its own identity.</span></span> <span data-ttu-id="eaadd-441">Um exemplo de um aplicativo daemon é um trabalho em lotes ou um serviço de sistema operacional em execução no plano de fundo de saudação.</span><span class="sxs-lookup"><span data-stu-id="eaadd-441">An example of a daemon application is a batch job, or an operating system service running in hello background.</span></span> <span data-ttu-id="eaadd-442">Esse tipo de aplicativo solicita um token de acesso usando a identidade do aplicativo e apresentando seu ID de aplicativo, credencial (senha ou certificado) e URI de ID de aplicativo tooAzure AD.</span><span class="sxs-lookup"><span data-stu-id="eaadd-442">This type of application requests an access token by using its application identity and presenting its Application ID, credential (password or certificate), and application ID URI tooAzure AD.</span></span> <span data-ttu-id="eaadd-443">Após a autenticação bem-sucedida, o daemon Olá recebe um token de acesso do AD do Azure, que é então usado toocall Olá API da web.</span><span class="sxs-lookup"><span data-stu-id="eaadd-443">After successful authentication, hello daemon receives an access token from Azure AD, which is then used toocall hello web API.</span></span>

<span data-ttu-id="eaadd-444">Para o cenário de saudação quando precisa de um aplicativo de servidor toocall uma API da web, é útil toouse um exemplo.</span><span class="sxs-lookup"><span data-stu-id="eaadd-444">For hello scenario when a server application needs toocall a web API, it’s helpful toouse an example.</span></span> <span data-ttu-id="eaadd-445">Imagine que um usuário autenticado em um aplicativo nativo e esse aplicativo precisa toocall uma API da web.</span><span class="sxs-lookup"><span data-stu-id="eaadd-445">Imagine that a user has authenticated on a native application, and this native application needs toocall a web API.</span></span> <span data-ttu-id="eaadd-446">O Azure AD emite um JWT acesso toocall token Olá API da web.</span><span class="sxs-lookup"><span data-stu-id="eaadd-446">Azure AD issues a JWT access token toocall hello web API.</span></span> <span data-ttu-id="eaadd-447">Se precisar de API da web hello toocall outra API da web downstream, pode usar a identidade do usuário do hello em nome de fluxo toodelegate hello e autenticar a API da web de segunda camada toohello.</span><span class="sxs-lookup"><span data-stu-id="eaadd-447">If hello web API needs toocall another downstream web API, it can use hello on-behalf-of flow toodelegate hello user’s identity and authenticate toohello second-tier web API.</span></span>

#### <a name="diagram"></a><span data-ttu-id="eaadd-448">Diagrama</span><span class="sxs-lookup"><span data-stu-id="eaadd-448">Diagram</span></span>
![Diagrama de tooWeb API daemon ou aplicativo de servidor](./media/active-directory-authentication-scenarios/daemon_server_app_to_web_api.png)

#### <a name="description-of-protocol-flow"></a><span data-ttu-id="eaadd-450">Descrição do fluxo de protocolo</span><span class="sxs-lookup"><span data-stu-id="eaadd-450">Description of Protocol Flow</span></span>
##### <a name="application-identity-with-oauth-20-client-credentials-grant"></a><span data-ttu-id="eaadd-451">Identidade do aplicativo com concessão de credenciais do cliente OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="eaadd-451">Application Identity with OAuth 2.0 Client Credentials Grant</span></span>
1. <span data-ttu-id="eaadd-452">Primeiro, o aplicativo de servidor hello precisa tooauthenticate com o Azure AD como ele mesmo, sem qualquer interação humana, como uma caixa de diálogo de logon interativa.</span><span class="sxs-lookup"><span data-stu-id="eaadd-452">First, hello server application needs tooauthenticate with Azure AD as itself, without any human interaction such as an interactive sign-on dialog.</span></span> <span data-ttu-id="eaadd-453">Faz uma tooAzure de solicitação do AD do ponto de extremidade token, fornecendo credenciais de hello, ID do aplicativo e URI de ID do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="eaadd-453">It makes a request tooAzure AD’s token endpoint, providing hello credential, Application ID, and application ID URI.</span></span>
2. <span data-ttu-id="eaadd-454">O AD do Azure autentica o aplicativo hello e retorna um token de acesso JWT que é usado toocall Olá web API.</span><span class="sxs-lookup"><span data-stu-id="eaadd-454">Azure AD authenticates hello application and returns a JWT access token that is used toocall hello web API.</span></span>
3. <span data-ttu-id="eaadd-455">Via HTTPS, o aplicativo da web hello usa Olá retornado Olá tooadd token de acesso JWT cadeia de caracteres JWT com uma designação "Portador" no cabeçalho de autorização de saudação da API da web do toohello Olá solicitação.</span><span class="sxs-lookup"><span data-stu-id="eaadd-455">Over HTTPS, hello web application uses hello returned JWT access token tooadd hello JWT string with a “Bearer” designation in hello Authorization header of hello request toohello web API.</span></span> <span data-ttu-id="eaadd-456">Olá web API, em seguida, valida o token JWT hello e se a validação for bem-sucedida, retorna Olá desejado de recursos.</span><span class="sxs-lookup"><span data-stu-id="eaadd-456">hello web API then validates hello JWT token, and if validation is successful, returns hello desired resource.</span></span>

##### <a name="delegated-user-identity-with-oauth-20-on-behalf-of-draft-specification"></a><span data-ttu-id="eaadd-457">Identidade de usuário delegado com a especificação de rascunho do OAuth 2.0 On-Behalf-Of</span><span class="sxs-lookup"><span data-stu-id="eaadd-457">Delegated User Identity with OAuth 2.0 On-Behalf-Of Draft Specification</span></span>
<span data-ttu-id="eaadd-458">fluxo de saudação discutido a seguir supõe que um usuário foi autenticado em outro aplicativo (como um aplicativo nativo) e sua identidade de usuário tiver sido usado tooacquire uma API de web de primeira camada de toohello de token de acesso.</span><span class="sxs-lookup"><span data-stu-id="eaadd-458">hello flow discussed below assumes that a user has been authenticated on another application (such as a native application), and their user identity has been used tooacquire an access token toohello first-tier web API.</span></span>

1. <span data-ttu-id="eaadd-459">aplicativo nativo Hello envia Olá acesso toohello token primeira camada API da web.</span><span class="sxs-lookup"><span data-stu-id="eaadd-459">hello native application sends hello access token toohello first-tier web API.</span></span>
2. <span data-ttu-id="eaadd-460">API da web de primeira camada Olá envia um tooAzure de solicitação do AD do ponto de extremidade token, fornecendo sua ID de aplicativo e credenciais, bem como o token de acesso do usuário hello.</span><span class="sxs-lookup"><span data-stu-id="eaadd-460">hello first-tier web API sends a request tooAzure AD’s token endpoint, providing its Application ID and credentials, as well as hello user’s access token.</span></span> <span data-ttu-id="eaadd-461">Além disso, a solicitação de saudação é enviada com um on_behalf_of parâmetro que indica Olá web API está solicitando novos tokens toocall uma API da web downstream em nome de usuário original hello.</span><span class="sxs-lookup"><span data-stu-id="eaadd-461">In addition, hello request is sent with an on_behalf_of parameter that indicates hello web API is requesting new tokens toocall a downstream web API on behalf of hello original user.</span></span>
3. <span data-ttu-id="eaadd-462">AD do Azure verifica que Olá primeira camada API da web tem permissões tooaccess Olá web de segunda camada API e valida a solicitação hello, retornando que um token de acesso JWT e um JWT toohello token da web de primeira camada API de atualização.</span><span class="sxs-lookup"><span data-stu-id="eaadd-462">Azure AD verifies that hello first-tier web API has permissions tooaccess hello second-tier web API and validates hello request, returning a JWT access token and a JWT refresh token toohello first-tier web API.</span></span>
4. <span data-ttu-id="eaadd-463">Via HTTPS, Olá web de primeira camada, em seguida, chama uma API Olá API da web de segunda camada, acrescentando a cadeia de caracteres token no cabeçalho de autorização de saudação na solicitação Olá Olá.</span><span class="sxs-lookup"><span data-stu-id="eaadd-463">Over HTTPS, hello first-tier web API then calls hello second-tier web API by appending hello token string in hello Authorization header in hello request.</span></span> <span data-ttu-id="eaadd-464">API da web de primeira camada Olá pode continuar a API da web do segundo nível toocall hello como token de acesso de saudação e tokens de atualização são válidos.</span><span class="sxs-lookup"><span data-stu-id="eaadd-464">hello first-tier web API can continue toocall hello second-tier web API as long as hello access token and refresh tokens are valid.</span></span>

#### <a name="code-samples"></a><span data-ttu-id="eaadd-465">Exemplos de código</span><span class="sxs-lookup"><span data-stu-id="eaadd-465">Code Samples</span></span>
<span data-ttu-id="eaadd-466">Consulte exemplos de código de saudação para cenários de tooWeb API Daemon ou aplicativo de servidor.</span><span class="sxs-lookup"><span data-stu-id="eaadd-466">See hello code samples for Daemon or Server Application tooWeb API scenarios.</span></span> <span data-ttu-id="eaadd-467">E, volte a consultar frequentemente - adicionamos novos exemplos de todo o tempo de saudação.</span><span class="sxs-lookup"><span data-stu-id="eaadd-467">And, check back frequently -- we add new samples all hello time.</span></span> [<span data-ttu-id="eaadd-468">Servidor ou aplicativo Daemon tooWeb API</span><span class="sxs-lookup"><span data-stu-id="eaadd-468">Server or Daemon Application tooWeb API</span></span>](active-directory-code-samples.md#server-or-daemon-application-to-web-api)

#### <a name="registering"></a><span data-ttu-id="eaadd-469">Registro</span><span class="sxs-lookup"><span data-stu-id="eaadd-469">Registering</span></span>
* <span data-ttu-id="eaadd-470">Único locatário: Identidade de aplicativo hello e casos de identidade de usuário delegado, Olá daemon ou aplicativo de servidor deve ser registrado no hello mesmo diretório no AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="eaadd-470">Single Tenant: For both hello application identity and delegated user identity cases, hello daemon or server application must be registered in hello same directory in Azure AD.</span></span> <span data-ttu-id="eaadd-471">Olá web API pode ser configurado tooexpose um conjunto de permissões, que são o daemon Olá toolimit usado ou recursos de tooits de acesso do servidor.</span><span class="sxs-lookup"><span data-stu-id="eaadd-471">hello web API can be configured tooexpose a set of permissions, which are used toolimit hello daemon or server’s access tooits resources.</span></span> <span data-ttu-id="eaadd-472">Se um tipo de identidade de usuário delegado estiver sendo usado, aplicativo de servidor de saudação precisa de permissões de saudação desejada de tooselect do menu Olá suspenso "Permissões tooOther aplicativos" hello Portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="eaadd-472">If a delegated user identity type is being used, hello server application needs tooselect hello desired permissions from hello “Permissions tooOther Applications” drop-down menu in hello Azure Portal.</span></span> <span data-ttu-id="eaadd-473">Essa etapa não será necessária se o tipo de identidade de aplicativo hello está sendo usado.</span><span class="sxs-lookup"><span data-stu-id="eaadd-473">This step is not required if hello application identity type is being used.</span></span>
* <span data-ttu-id="eaadd-474">Multilocatário: Primeiro, Olá daemon ou aplicativo de servidor é configurado tooindicate Olá permissões requer toobe funcional.</span><span class="sxs-lookup"><span data-stu-id="eaadd-474">Multi-Tenant: First, hello daemon or server application is configured tooindicate hello permissions it requires toobe functional.</span></span> <span data-ttu-id="eaadd-475">Esta lista de permissões necessárias é mostrada em uma caixa de diálogo quando um usuário ou administrador no diretório de destino Olá dá consentimento toohello aplicativo, o que torna disponíveis tootheir organização.</span><span class="sxs-lookup"><span data-stu-id="eaadd-475">This list of required permissions is shown in a dialog when a user or administrator in hello destination directory gives consent toohello application, which makes it available tootheir organization.</span></span> <span data-ttu-id="eaadd-476">Alguns aplicativos exigem permissões de nível de usuário, que qualquer usuário na organização Olá pode consentir.</span><span class="sxs-lookup"><span data-stu-id="eaadd-476">Some applications require just user-level permissions, which any user in hello organization can consent to.</span></span> <span data-ttu-id="eaadd-477">Outros aplicativos exigem permissões de administrador, que um usuário de organização de saudação não pode consentir.</span><span class="sxs-lookup"><span data-stu-id="eaadd-477">Other applications require administrator-level permissions, which a user in hello organization cannot consent to.</span></span> <span data-ttu-id="eaadd-478">Somente um administrador do diretório pode dar consentimento tooapplications que requerem esse nível de permissões.</span><span class="sxs-lookup"><span data-stu-id="eaadd-478">Only a directory administrator can give consent tooapplications that require this level of permissions.</span></span> <span data-ttu-id="eaadd-479">Quando Olá usuário ou administrador der consentimento, as APIs da web hello são registradas em seu diretório.</span><span class="sxs-lookup"><span data-stu-id="eaadd-479">When hello user or administrator consents, both of hello web APIs are registered in their directory.</span></span>

#### <a name="token-expiration"></a><span data-ttu-id="eaadd-480">Expiração do token</span><span class="sxs-lookup"><span data-stu-id="eaadd-480">Token Expiration</span></span>
<span data-ttu-id="eaadd-481">Quando o aplicativo primeiro hello usa seu código de autorização tooget um token de acesso JWT, ele também recebe um token de atualização JWT.</span><span class="sxs-lookup"><span data-stu-id="eaadd-481">When hello first application uses its authorization code tooget a JWT access token, it also receives a JWT refresh token.</span></span> <span data-ttu-id="eaadd-482">Quando o token de acesso de saudação expira, token de atualização de saudação pode ser usado toore-autenticar o usuário Olá sem solicitar credenciais.</span><span class="sxs-lookup"><span data-stu-id="eaadd-482">When hello access token expires, hello refresh token can be used toore-authenticate hello user without prompting for credentials.</span></span> <span data-ttu-id="eaadd-483">Esse token de atualização é usado tooauthenticate Olá usuário, que resulta em um novo acesso de token e de atualização de token.</span><span class="sxs-lookup"><span data-stu-id="eaadd-483">This refresh token is then used tooauthenticate hello user, which results in a new access token and refresh token.</span></span>

## <a name="see-also"></a><span data-ttu-id="eaadd-484">Consulte também</span><span class="sxs-lookup"><span data-stu-id="eaadd-484">See Also</span></span>
[<span data-ttu-id="eaadd-485">Guia do desenvolvedor do Active Directory do Azure</span><span class="sxs-lookup"><span data-stu-id="eaadd-485">Azure Active Directory Developer's Guide</span></span>](active-directory-developers-guide.md)

[<span data-ttu-id="eaadd-486">Exemplos de código do Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="eaadd-486">Azure Active Directory Code Samples</span></span>](active-directory-code-samples.md)

[<span data-ttu-id="eaadd-487">Informações importantes sobre a substituição da chave de assinatura no Azure AD</span><span class="sxs-lookup"><span data-stu-id="eaadd-487">Important Information About Signing Key Rollover in Azure AD</span></span>](active-directory-signing-key-rollover.md)

[<span data-ttu-id="eaadd-488">OAuth 2.0 no Azure AD</span><span class="sxs-lookup"><span data-stu-id="eaadd-488">OAuth 2.0 in Azure AD</span></span>](https://msdn.microsoft.com/library/azure/dn645545.aspx)

