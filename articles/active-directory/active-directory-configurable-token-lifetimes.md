---
title: "Tempos de vida de token configuráveis no Azure Active Directory | Microsoft Docs"
description: Saiba como definir tempos de vida dos tokens emitidos pelo Azure AD.
services: active-directory
documentationcenter: 
author: billmath
manager: femila
editor: 
ms.assetid: 06f5b317-053e-44c3-aaaa-cf07d8692735
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/20/2017
ms.author: billmath
ms.custom: aaddev
ms.reviewer: anchitn
ms.openlocfilehash: d23721eba308096a05211eb6e26e1338a69cae0c
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/03/2017
---
# <a name="configurable-token-lifetimes-in-azure-active-directory-public-preview"></a><span data-ttu-id="ffa47-103">Tempos de vida de token configuráveis no Azure Active Directory (Visualização Pública)</span><span class="sxs-lookup"><span data-stu-id="ffa47-103">Configurable token lifetimes in Azure Active Directory (Public Preview)</span></span>
<span data-ttu-id="ffa47-104">Especifique o tempo de vida de um token emitido pelo Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="ffa47-104">You can specify the lifetime of a token issued by Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="ffa47-105">Configure os tempos de vida de token de todos os aplicativos em uma organização, para um aplicativo multilocatário (várias organizações) ou para uma entidade de serviço específica em sua organização.</span><span class="sxs-lookup"><span data-stu-id="ffa47-105">You can set token lifetimes for all apps in your organization, for a multi-tenant (multi-organization) application, or for a specific service principal in your organization.</span></span>

> [!NOTE]
> <span data-ttu-id="ffa47-106">Esse recurso está atualmente em Visualização Pública.</span><span class="sxs-lookup"><span data-stu-id="ffa47-106">This capability currently is in Public Preview.</span></span> <span data-ttu-id="ffa47-107">Esteja preparado para reverter ou remover quaisquer alterações.</span><span class="sxs-lookup"><span data-stu-id="ffa47-107">Be prepared to revert or remove any changes.</span></span> <span data-ttu-id="ffa47-108">O recurso está disponível em qualquer assinatura do Azure Active Directory durante a Visualização Pública.</span><span class="sxs-lookup"><span data-stu-id="ffa47-108">The feature is available in any Azure Active Directory subscription during Public Preview.</span></span> <span data-ttu-id="ffa47-109">No entanto, quando o recurso for disponibilizado para todos, alguns aspectos dele poderão exigir uma assinatura do [Azure Active Directory Premium](active-directory-get-started-premium.md).</span><span class="sxs-lookup"><span data-stu-id="ffa47-109">However, when the feature becomes generally available, some aspects of the feature might require an [Azure Active Directory Premium](active-directory-get-started-premium.md) subscription.</span></span>
>
>

<span data-ttu-id="ffa47-110">No Azure AD, um objeto de política representa um conjunto de regras aplicadas a todos os aplicativos ou a aplicativos individuais em uma organização.</span><span class="sxs-lookup"><span data-stu-id="ffa47-110">In Azure AD, a policy object represents a set of rules that are enforced on individual applications or on all applications in an organization.</span></span> <span data-ttu-id="ffa47-111">Cada tipo de política tem uma estrutura exclusiva com um conjunto de propriedades que são aplicadas aos objetos aos quais são atribuídas.</span><span class="sxs-lookup"><span data-stu-id="ffa47-111">Each policy type has a unique structure, with a set of properties that are applied to objects to which they are assigned.</span></span>

<span data-ttu-id="ffa47-112">Designe uma política como a padrão para sua organização.</span><span class="sxs-lookup"><span data-stu-id="ffa47-112">You can designate a policy as the default policy for your organization.</span></span> <span data-ttu-id="ffa47-113">Essa política é aplicada a qualquer aplicativo na organização, desde que não seja substituída por uma política com uma prioridade mais alta.</span><span class="sxs-lookup"><span data-stu-id="ffa47-113">The policy is applied to any application in the organization, as long as it is not overridden by a policy with a higher priority.</span></span> <span data-ttu-id="ffa47-114">Você também pode atribuir uma política para aplicativos específicos.</span><span class="sxs-lookup"><span data-stu-id="ffa47-114">You also can assign a policy to specific applications.</span></span> <span data-ttu-id="ffa47-115">A ordem de prioridade varia por tipo de política.</span><span class="sxs-lookup"><span data-stu-id="ffa47-115">The order of priority varies by policy type.</span></span>


## <a name="token-types"></a><span data-ttu-id="ffa47-116">Tipos de token</span><span class="sxs-lookup"><span data-stu-id="ffa47-116">Token types</span></span>

<span data-ttu-id="ffa47-117">Configure as políticas de tempo de vida de token para tokens de atualização, tokens de acesso, tokens de sessão e tokens de ID.</span><span class="sxs-lookup"><span data-stu-id="ffa47-117">You can set token lifetime policies for refresh tokens, access tokens, session tokens, and ID tokens.</span></span>

### <a name="access-tokens"></a><span data-ttu-id="ffa47-118">Tokens de acesso</span><span class="sxs-lookup"><span data-stu-id="ffa47-118">Access tokens</span></span>
<span data-ttu-id="ffa47-119">Os clientes usam tokens de acesso para acessar um recurso protegido.</span><span class="sxs-lookup"><span data-stu-id="ffa47-119">Clients use access tokens to access a protected resource.</span></span> <span data-ttu-id="ffa47-120">Um token de acesso só pode ser usado para uma combinação específica de usuário, cliente e recurso.</span><span class="sxs-lookup"><span data-stu-id="ffa47-120">An access token can be used only for a specific combination of user, client, and resource.</span></span> <span data-ttu-id="ffa47-121">Tokens de acesso não podem ser revogados e são válidos até sua expiração.</span><span class="sxs-lookup"><span data-stu-id="ffa47-121">Access tokens cannot be revoked and are valid until their expiry.</span></span> <span data-ttu-id="ffa47-122">Um ator mal-intencionado que tenha obtido um token de acesso pode usá-lo pela extensão do tempo de vida.</span><span class="sxs-lookup"><span data-stu-id="ffa47-122">A malicious actor that has obtained an access token can use it for extent of its lifetime.</span></span> <span data-ttu-id="ffa47-123">Ajustar o tempo de vida do token de acesso é uma compensação entre a melhorar o desempenho do sistema e aumentar o tempo pelo qual o cliente retém acesso depois que a conta do usuário é desabilitada.</span><span class="sxs-lookup"><span data-stu-id="ffa47-123">Adjusting the lifetime of an access token is a trade-off between improving system performance and increasing the amount of time that the client retains access after the user’s account is disabled.</span></span> <span data-ttu-id="ffa47-124">Um melhor desempenho do sistema é obtido, reduzindo o número de vezes que um cliente precisa adquirir um novo token de acesso.</span><span class="sxs-lookup"><span data-stu-id="ffa47-124">Improved system performance is achieved by reducing the number of times a client needs to acquire a fresh access token.</span></span>

### <a name="refresh-tokens"></a><span data-ttu-id="ffa47-125">Tokens de atualização</span><span class="sxs-lookup"><span data-stu-id="ffa47-125">Refresh tokens</span></span>
<span data-ttu-id="ffa47-126">Quando um cliente adquire um token de acesso para acessar um recurso protegido, ele recebe um token de atualização e um token de acesso.</span><span class="sxs-lookup"><span data-stu-id="ffa47-126">When a client acquires an access token to access a protected resource, the client receives both a refresh token and an access token.</span></span> <span data-ttu-id="ffa47-127">O token de atualização é usado para obter novos pares de tokens de acesso/atualização quando o token de acesso atual expira.</span><span class="sxs-lookup"><span data-stu-id="ffa47-127">The refresh token is used to obtain new access/refresh token pairs when the current access token expires.</span></span> <span data-ttu-id="ffa47-128">Um token de atualização é associado a uma combinação de cliente e usuário.</span><span class="sxs-lookup"><span data-stu-id="ffa47-128">A refresh token is bound to a combination of user and client.</span></span> <span data-ttu-id="ffa47-129">Um token de atualização pode ser revogado, e validade do token é verificada sempre que ele é usado.</span><span class="sxs-lookup"><span data-stu-id="ffa47-129">A refresh token can be revoked, and the token's validity is checked every time the token is used.</span></span>

<span data-ttu-id="ffa47-130">É importante fazer uma distinção entre clientes públicos e clientes confidenciais.</span><span class="sxs-lookup"><span data-stu-id="ffa47-130">It's important to make a distinction between confidential clients and public clients.</span></span> <span data-ttu-id="ffa47-131">Para saber mais sobre os tipos diferentes de clientes, consulte [RFC 6749](https://tools.ietf.org/html/rfc6749#section-2.1).</span><span class="sxs-lookup"><span data-stu-id="ffa47-131">For more information about different types of clients, see [RFC 6749](https://tools.ietf.org/html/rfc6749#section-2.1).</span></span>

#### <a name="token-lifetimes-with-confidential-client-refresh-tokens"></a><span data-ttu-id="ffa47-132">Tempos de vida de token com tokens de atualização de cliente confidencial</span><span class="sxs-lookup"><span data-stu-id="ffa47-132">Token lifetimes with confidential client refresh tokens</span></span>
<span data-ttu-id="ffa47-133">Clientes confidenciais são aplicativos que podem armazenar com segurança uma senha (segredo) do cliente.</span><span class="sxs-lookup"><span data-stu-id="ffa47-133">Confidential clients are applications that can securely store a client password (secret).</span></span> <span data-ttu-id="ffa47-134">Eles podem provar que as solicitações são provenientes do aplicativo cliente, e não de um ator mal-intencionado.</span><span class="sxs-lookup"><span data-stu-id="ffa47-134">They can prove that requests are coming from the client application and not from a malicious actor.</span></span> <span data-ttu-id="ffa47-135">Por exemplo, um aplicativo Web é um cliente confidencial, pois pode armazenar um segredo do cliente no servidor Web.</span><span class="sxs-lookup"><span data-stu-id="ffa47-135">For example, a web app is a confidential client because it can store a client secret on the web server.</span></span> <span data-ttu-id="ffa47-136">Ele não fica exposto.</span><span class="sxs-lookup"><span data-stu-id="ffa47-136">It is not exposed.</span></span> <span data-ttu-id="ffa47-137">Como esses fluxos são mais seguros, os tempos de vida padrão de tokens de atualização emitidos para esses fluxos são `until-revoked`, não podem ser alterados usando uma política e não serão revogados em redefinições de senha voluntárias.</span><span class="sxs-lookup"><span data-stu-id="ffa47-137">Because these flows are more secure, the default lifetimes of refresh tokens issued to these flows is `until-revoked`, cannot be changed by using policy, and will not be revoked on voluntary password resets.</span></span>

#### <a name="token-lifetimes-with-public-client-refresh-tokens"></a><span data-ttu-id="ffa47-138">Tempos de vida de token com tokens de atualização de cliente público</span><span class="sxs-lookup"><span data-stu-id="ffa47-138">Token lifetimes with public client refresh tokens</span></span>

<span data-ttu-id="ffa47-139">Clientes públicos não são capazes de armazenar com segurança a senha (segredo) de um cliente.</span><span class="sxs-lookup"><span data-stu-id="ffa47-139">Public clients cannot securely store a client password (secret).</span></span> <span data-ttu-id="ffa47-140">Por exemplo, um aplicativo iOS/Android não pode ocultar um segredo do proprietário do recurso e, portanto, é considerado um cliente público.</span><span class="sxs-lookup"><span data-stu-id="ffa47-140">For example, an iOS/Android app cannot obfuscate a secret from the resource owner, so it is considered a public client.</span></span> <span data-ttu-id="ffa47-141">Defina políticas em recursos para impedir que tokens de atualização de clientes públicos mais antigos do que um período especificado obtenham um novo par de tokens de acesso/atualização.</span><span class="sxs-lookup"><span data-stu-id="ffa47-141">You can set policies on resources to prevent refresh tokens from public clients older than a specified period from obtaining a new access/refresh token pair.</span></span> <span data-ttu-id="ffa47-142">(Para fazer isso, use a propriedade Tempo Máximo Inativo do Token de Atualização.) Use também políticas para definir um período além do qual os tokens de atualização não serão mais aceitos.</span><span class="sxs-lookup"><span data-stu-id="ffa47-142">(To do this, use the Refresh Token Max Inactive Time property.) You also can use policies to set a period beyond which the refresh tokens are no longer accepted.</span></span> <span data-ttu-id="ffa47-143">(Para fazer isso, use a propriedade Idade Máxima do Token de Atualização.) Ajuste o tempo de vida de um token de atualização para controlar quando e com que frequência o usuário precisa reinserir as credenciais, em vez de ser autenticado novamente de forma silenciosa ao usar um aplicativo cliente público.</span><span class="sxs-lookup"><span data-stu-id="ffa47-143">(To do this, use the Refresh Token Max Age property.) You can adjust the lifetime of a refresh token to control when and how often the user is required to reenter credentials, instead of being silently reauthenticated, when using a public client application.</span></span>

### <a name="id-tokens"></a><span data-ttu-id="ffa47-144">Tokens de ID</span><span class="sxs-lookup"><span data-stu-id="ffa47-144">ID tokens</span></span>
<span data-ttu-id="ffa47-145">Tokens de ID são passados para sites e clientes nativos.</span><span class="sxs-lookup"><span data-stu-id="ffa47-145">ID tokens are passed to websites and native clients.</span></span> <span data-ttu-id="ffa47-146">Os tokens de ID contêm informações de perfil sobre um usuário.</span><span class="sxs-lookup"><span data-stu-id="ffa47-146">ID tokens contain profile information about a user.</span></span> <span data-ttu-id="ffa47-147">Um token de ID é associado a uma combinação específica de cliente e usuário.</span><span class="sxs-lookup"><span data-stu-id="ffa47-147">An ID token is bound to a specific combination of user and client.</span></span> <span data-ttu-id="ffa47-148">Os tokens de ID são considerados válidos até a expiração.</span><span class="sxs-lookup"><span data-stu-id="ffa47-148">ID tokens are considered valid until their expiry.</span></span> <span data-ttu-id="ffa47-149">Normalmente, um aplicativo Web corresponde o tempo de vida de sessão de um usuário no aplicativo ao tempo de vida do token de ID emitido para o usuário.</span><span class="sxs-lookup"><span data-stu-id="ffa47-149">Usually, a web application matches a user’s session lifetime in the application to the lifetime of the ID token issued for the user.</span></span> <span data-ttu-id="ffa47-150">Ajuste o tempo de vida de um token de ID para controlar com que frequência o aplicativo Web expira a sessão do aplicativo, com que frequência exige que o usuário seja autenticado novamente no Azure AD (de forma silenciosa ou interativa).</span><span class="sxs-lookup"><span data-stu-id="ffa47-150">You can adjust the lifetime of an ID token to control how often the web application expires the application session, and how often it requires the user to be reauthenticated with Azure AD (either silently or interactively).</span></span>

### <a name="single-sign-on-session-tokens"></a><span data-ttu-id="ffa47-151">Tokens de sessão de logon único</span><span class="sxs-lookup"><span data-stu-id="ffa47-151">Single sign-on session tokens</span></span>
<span data-ttu-id="ffa47-152">Quando um usuário autentica no Azure AD e marca a caixa de seleção **Manter-me conectado**, uma sessão de SSO (logon único) é estabelecida com o navegador do usuário e o Azure AD.</span><span class="sxs-lookup"><span data-stu-id="ffa47-152">When a user authenticates with Azure AD and selects the **Keep me signed in** check box, a single sign-on session (SSO) is established with the user’s browser and Azure AD.</span></span> <span data-ttu-id="ffa47-153">O Token de SSO, na forma de um cookie, representa essa sessão.</span><span class="sxs-lookup"><span data-stu-id="ffa47-153">The SSO token, in the form of a cookie, represents this session.</span></span> <span data-ttu-id="ffa47-154">Observe que o token de sessão de SSO não está associado a um aplicativo cliente/recurso específico.</span><span class="sxs-lookup"><span data-stu-id="ffa47-154">Note that the SSO session token is not bound to a specific resource/client application.</span></span> <span data-ttu-id="ffa47-155">Tokens de sessão de SSO podem ser revogados, e sua validade é verificada sempre que eles são usados.</span><span class="sxs-lookup"><span data-stu-id="ffa47-155">SSO session tokens can be revoked, and their validity is checked every time they are used.</span></span>

<span data-ttu-id="ffa47-156">O Azure AD usa dois tipos de tokens de sessão de SSO: persistente e não persistente.</span><span class="sxs-lookup"><span data-stu-id="ffa47-156">Azure AD uses two kinds of SSO session tokens: persistent and nonpersistent.</span></span> <span data-ttu-id="ffa47-157">Tokens de sessão persistentes são armazenadas como cookies persistentes pelo navegador.</span><span class="sxs-lookup"><span data-stu-id="ffa47-157">Persistent session tokens are stored as persistent cookies by the browser.</span></span> <span data-ttu-id="ffa47-158">Tokens de sessão não persistentes são armazenados como cookies de sessão.</span><span class="sxs-lookup"><span data-stu-id="ffa47-158">Nonpersistent session tokens are stored as session cookies.</span></span> <span data-ttu-id="ffa47-159">(Cookies de sessão são destruídos quando o navegador é fechado).</span><span class="sxs-lookup"><span data-stu-id="ffa47-159">(Session cookies are destroyed when the browser is closed.)</span></span>

<span data-ttu-id="ffa47-160">Tokens de sessão não persistentes têm uma vida útil de 24 horas.</span><span class="sxs-lookup"><span data-stu-id="ffa47-160">Nonpersistent session tokens have a lifetime of 24 hours.</span></span> <span data-ttu-id="ffa47-161">Tokens persistentes têm um tempo de vida de 180 dias.</span><span class="sxs-lookup"><span data-stu-id="ffa47-161">Persistent tokens have a lifetime of 180 days.</span></span> <span data-ttu-id="ffa47-162">Sempre que um token de sessão de SSO for usado dentro do período de validade, o período de validade será estendido por mais 24 horas ou 180 dias, dependendo do tipo de token.</span><span class="sxs-lookup"><span data-stu-id="ffa47-162">Any time an SSO session token is used within its validity period, the validity period is extended another 24 hours or 180 days, depending on the token type.</span></span> <span data-ttu-id="ffa47-163">Se o token de sessão de SSO não for usado dentro do período de validade, ele será considerado expirado e não será mais aceito.</span><span class="sxs-lookup"><span data-stu-id="ffa47-163">If an SSO session token is not used within its validity period, it is considered expired and is no longer accepted.</span></span>

<span data-ttu-id="ffa47-164">Use uma política para definir o tempo limite após a emissão do primeiro token de sessão além do qual o token de sessão não será mais aceito.</span><span class="sxs-lookup"><span data-stu-id="ffa47-164">You can use a policy to set the time after the first session token was issued beyond which the session token is no longer accepted.</span></span> <span data-ttu-id="ffa47-165">(Para fazer isso, use a propriedade Idade Máxima de Token de Sessão.) Ajuste o tempo de vida de um token de sessão para controlar quando e com que frequência o usuário precisa reinserir as credenciais, em vez de ser autenticado de forma silenciosa, ao usar um aplicativo Web.</span><span class="sxs-lookup"><span data-stu-id="ffa47-165">(To do this, use the Session Token Max Age property.) You can adjust the lifetime of a session token to control when and how often a user is required to reenter credentials, instead of being silently authenticated, when using a web application.</span></span>

### <a name="token-lifetime-policy-properties"></a><span data-ttu-id="ffa47-166">Propriedades da política de tempo de vida de token</span><span class="sxs-lookup"><span data-stu-id="ffa47-166">Token lifetime policy properties</span></span>
<span data-ttu-id="ffa47-167">Uma política de tempo de vida do token é um tipo de objeto de política que contém regras de tempo de vida do token.</span><span class="sxs-lookup"><span data-stu-id="ffa47-167">A token lifetime policy is a type of policy object that contains token lifetime rules.</span></span> <span data-ttu-id="ffa47-168">Use as propriedades da política para controlar tempos de vida de tokens especificados.</span><span class="sxs-lookup"><span data-stu-id="ffa47-168">Use the properties of the policy to control specified token lifetimes.</span></span> <span data-ttu-id="ffa47-169">Se nenhuma política for definida, o sistema aplicará o valor de tempo de vida padrão.</span><span class="sxs-lookup"><span data-stu-id="ffa47-169">If no policy is set, the system enforces the default lifetime value.</span></span>

### <a name="configurable-token-lifetime-properties"></a><span data-ttu-id="ffa47-170">Propriedades de tempo de vida de token configurável</span><span class="sxs-lookup"><span data-stu-id="ffa47-170">Configurable token lifetime properties</span></span>
| <span data-ttu-id="ffa47-171">Propriedade</span><span class="sxs-lookup"><span data-stu-id="ffa47-171">Property</span></span> | <span data-ttu-id="ffa47-172">Cadeia de caracteres de propriedade de política</span><span class="sxs-lookup"><span data-stu-id="ffa47-172">Policy property string</span></span> | <span data-ttu-id="ffa47-173">Afeta</span><span class="sxs-lookup"><span data-stu-id="ffa47-173">Affects</span></span> | <span data-ttu-id="ffa47-174">Padrão</span><span class="sxs-lookup"><span data-stu-id="ffa47-174">Default</span></span> | <span data-ttu-id="ffa47-175">Mínimo</span><span class="sxs-lookup"><span data-stu-id="ffa47-175">Minimum</span></span> | <span data-ttu-id="ffa47-176">Máximo</span><span class="sxs-lookup"><span data-stu-id="ffa47-176">Maximum</span></span> |
| --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="ffa47-177">Tempo de Vida do Token de Acesso</span><span class="sxs-lookup"><span data-stu-id="ffa47-177">Access Token Lifetime</span></span> |<span data-ttu-id="ffa47-178">AccessTokenLifetime</span><span class="sxs-lookup"><span data-stu-id="ffa47-178">AccessTokenLifetime</span></span> |<span data-ttu-id="ffa47-179">Tokens de acesso, tokens de ID, tokens SAML2</span><span class="sxs-lookup"><span data-stu-id="ffa47-179">Access tokens, ID tokens, SAML2 tokens</span></span> |<span data-ttu-id="ffa47-180">1 hora</span><span class="sxs-lookup"><span data-stu-id="ffa47-180">1 hour</span></span> |<span data-ttu-id="ffa47-181">10 minutos</span><span class="sxs-lookup"><span data-stu-id="ffa47-181">10 minutes</span></span> |<span data-ttu-id="ffa47-182">1 dia</span><span class="sxs-lookup"><span data-stu-id="ffa47-182">1 day</span></span> |
| <span data-ttu-id="ffa47-183">Tempo Máximo Inativo de Token de Atualização</span><span class="sxs-lookup"><span data-stu-id="ffa47-183">Refresh Token Max Inactive Time</span></span> |<span data-ttu-id="ffa47-184">MaxInactiveTime</span><span class="sxs-lookup"><span data-stu-id="ffa47-184">MaxInactiveTime</span></span> |<span data-ttu-id="ffa47-185">Tokens de atualização</span><span class="sxs-lookup"><span data-stu-id="ffa47-185">Refresh tokens</span></span> |<span data-ttu-id="ffa47-186">14 dias</span><span class="sxs-lookup"><span data-stu-id="ffa47-186">14 days</span></span> |<span data-ttu-id="ffa47-187">10 minutos</span><span class="sxs-lookup"><span data-stu-id="ffa47-187">10 minutes</span></span> |<span data-ttu-id="ffa47-188">90 dias</span><span class="sxs-lookup"><span data-stu-id="ffa47-188">90 days</span></span> |
| <span data-ttu-id="ffa47-189">Idade Máxima de Token de Atualização de Fator Único</span><span class="sxs-lookup"><span data-stu-id="ffa47-189">Single-Factor Refresh Token Max Age</span></span> |<span data-ttu-id="ffa47-190">MaxAgeSingleFactor</span><span class="sxs-lookup"><span data-stu-id="ffa47-190">MaxAgeSingleFactor</span></span> |<span data-ttu-id="ffa47-191">Tokens de atualização (para quaisquer usuários)</span><span class="sxs-lookup"><span data-stu-id="ffa47-191">Refresh tokens (for any users)</span></span> |<span data-ttu-id="ffa47-192">Until-revoked</span><span class="sxs-lookup"><span data-stu-id="ffa47-192">Until-revoked</span></span> |<span data-ttu-id="ffa47-193">10 minutos</span><span class="sxs-lookup"><span data-stu-id="ffa47-193">10 minutes</span></span> |<span data-ttu-id="ffa47-194">Until-revoked<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="ffa47-194">Until-revoked<sup>1</sup></span></span> |
| <span data-ttu-id="ffa47-195">Idade Máxima de Token de Atualização Multifator</span><span class="sxs-lookup"><span data-stu-id="ffa47-195">Multi-Factor Refresh Token Max Age</span></span> |<span data-ttu-id="ffa47-196">MaxAgeMultiFactor</span><span class="sxs-lookup"><span data-stu-id="ffa47-196">MaxAgeMultiFactor</span></span> |<span data-ttu-id="ffa47-197">Tokens de atualização (para quaisquer usuários)</span><span class="sxs-lookup"><span data-stu-id="ffa47-197">Refresh tokens (for any users)</span></span> |<span data-ttu-id="ffa47-198">Until-revoked</span><span class="sxs-lookup"><span data-stu-id="ffa47-198">Until-revoked</span></span> |<span data-ttu-id="ffa47-199">10 minutos</span><span class="sxs-lookup"><span data-stu-id="ffa47-199">10 minutes</span></span> |<span data-ttu-id="ffa47-200">Until-revoked<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="ffa47-200">Until-revoked<sup>1</sup></span></span> |
| <span data-ttu-id="ffa47-201">Idade Máxima de Token de Sessão de Fator Único</span><span class="sxs-lookup"><span data-stu-id="ffa47-201">Single-Factor Session Token Max Age</span></span> |<span data-ttu-id="ffa47-202">MaxAgeSessionSingleFactor<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="ffa47-202">MaxAgeSessionSingleFactor<sup>2</sup></span></span> |<span data-ttu-id="ffa47-203">Tokens de sessão (persistentes e não persistentes)</span><span class="sxs-lookup"><span data-stu-id="ffa47-203">Session tokens (persistent and nonpersistent)</span></span> |<span data-ttu-id="ffa47-204">Until-revoked</span><span class="sxs-lookup"><span data-stu-id="ffa47-204">Until-revoked</span></span> |<span data-ttu-id="ffa47-205">10 minutos</span><span class="sxs-lookup"><span data-stu-id="ffa47-205">10 minutes</span></span> |<span data-ttu-id="ffa47-206">Until-revoked<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="ffa47-206">Until-revoked<sup>1</sup></span></span> |
| <span data-ttu-id="ffa47-207">Idade Máxima de Token de Sessão Multifator</span><span class="sxs-lookup"><span data-stu-id="ffa47-207">Multi-Factor Session Token Max Age</span></span> |<span data-ttu-id="ffa47-208">MaxAgeSessionMultiFactor<sup>3</sup></span><span class="sxs-lookup"><span data-stu-id="ffa47-208">MaxAgeSessionMultiFactor<sup>3</sup></span></span> |<span data-ttu-id="ffa47-209">Tokens de sessão (persistentes e não persistentes)</span><span class="sxs-lookup"><span data-stu-id="ffa47-209">Session tokens (persistent and nonpersistent)</span></span> |<span data-ttu-id="ffa47-210">Until-revoked</span><span class="sxs-lookup"><span data-stu-id="ffa47-210">Until-revoked</span></span> |<span data-ttu-id="ffa47-211">10 minutos</span><span class="sxs-lookup"><span data-stu-id="ffa47-211">10 minutes</span></span> |<span data-ttu-id="ffa47-212">Until-revoked<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="ffa47-212">Until-revoked<sup>1</sup></span></span> |

* <span data-ttu-id="ffa47-213"><sup>1</sup>365 dias é o comprimento máximo explícito que pode ser definido para esses atributos.</span><span class="sxs-lookup"><span data-stu-id="ffa47-213"><sup>1</sup>365 days is the maximum explicit length that can be set for these attributes.</span></span>
* <span data-ttu-id="ffa47-214"><sup>2</sup>Se **MaxAgeSessionSingleFactor** não for definido, esse valor usará o valor de **MaxAgeSingleFactor**.</span><span class="sxs-lookup"><span data-stu-id="ffa47-214"><sup>2</sup>If  **MaxAgeSessionSingleFactor** is not set, this value takes the **MaxAgeSingleFactor** value.</span></span> <span data-ttu-id="ffa47-215">Se nenhum parâmetro for definido, a propriedade usará o valor padrão (until-revoked).</span><span class="sxs-lookup"><span data-stu-id="ffa47-215">If neither parameter is set, the property takes the default value (until-revoked).</span></span>
* <span data-ttu-id="ffa47-216"><sup>3</sup>Se **MaxAgeSessionMultiFactor**, não for definido, esse valor usará o valor de **MaxAgeMultiFactor**.</span><span class="sxs-lookup"><span data-stu-id="ffa47-216"><sup>3</sup>If  **MaxAgeSessionMultiFactor** is not set, this value takes the **MaxAgeMultiFactor** value.</span></span> <span data-ttu-id="ffa47-217">Se nenhum parâmetro for definido, a propriedade usará o valor padrão (until-revoked).</span><span class="sxs-lookup"><span data-stu-id="ffa47-217">If neither parameter is set, the property takes the default value (until-revoked).</span></span>

### <a name="exceptions"></a><span data-ttu-id="ffa47-218">Exceções</span><span class="sxs-lookup"><span data-stu-id="ffa47-218">Exceptions</span></span>
| <span data-ttu-id="ffa47-219">Propriedade</span><span class="sxs-lookup"><span data-stu-id="ffa47-219">Property</span></span> | <span data-ttu-id="ffa47-220">Afeta</span><span class="sxs-lookup"><span data-stu-id="ffa47-220">Affects</span></span> | <span data-ttu-id="ffa47-221">Padrão</span><span class="sxs-lookup"><span data-stu-id="ffa47-221">Default</span></span> |
| --- | --- | --- |
| <span data-ttu-id="ffa47-222">Idade Máxima dos Tokens de Atualização (emitidos para usuários federados com informações de revogação insuficientes<sup>1</sup>)</span><span class="sxs-lookup"><span data-stu-id="ffa47-222">Refresh Token Max Age (issued for federated users who have insufficient revocation information<sup>1</sup>)</span></span> |<span data-ttu-id="ffa47-223">Tokens de atualização (emitidos para usuários federados com informações de revogação insuficientes<sup>1</sup>)</span><span class="sxs-lookup"><span data-stu-id="ffa47-223">Refresh tokens (issued for federated users who have insufficient revocation information<sup>1</sup>)</span></span> |<span data-ttu-id="ffa47-224">12 horas</span><span class="sxs-lookup"><span data-stu-id="ffa47-224">12 hours</span></span> |
| <span data-ttu-id="ffa47-225">Tempo Máximo Inativo do Token de Atualização (emitido para clientes confidenciais)</span><span class="sxs-lookup"><span data-stu-id="ffa47-225">Refresh Token Max Inactive Time (issued for confidential clients)</span></span> |<span data-ttu-id="ffa47-226">Tokens de atualização (emitido para clientes confidenciais)</span><span class="sxs-lookup"><span data-stu-id="ffa47-226">Refresh tokens (issued for confidential clients)</span></span> |<span data-ttu-id="ffa47-227">90 dias</span><span class="sxs-lookup"><span data-stu-id="ffa47-227">90 days</span></span> |
| <span data-ttu-id="ffa47-228">Idade Máxima do Token de Atualização (emitido para clientes confidenciais)</span><span class="sxs-lookup"><span data-stu-id="ffa47-228">Refresh Token Max Age (issued for confidential clients)</span></span> |<span data-ttu-id="ffa47-229">Tokens de atualização (emitido para clientes confidenciais)</span><span class="sxs-lookup"><span data-stu-id="ffa47-229">Refresh tokens (issued for confidential clients)</span></span> |<span data-ttu-id="ffa47-230">Until-revoked</span><span class="sxs-lookup"><span data-stu-id="ffa47-230">Until-revoked</span></span> |

* <span data-ttu-id="ffa47-231"><sup>1</sup>Os usuários federados com informações de revogação insuficientes incluem todos os usuários que não têm o atributo "LastPasswordChangeTimestamp" sincronizado.</span><span class="sxs-lookup"><span data-stu-id="ffa47-231"><sup>1</sup>Federated users who have insufficient revocation information include any users who do not have the "LastPasswordChangeTimestamp" attribute synced.</span></span> <span data-ttu-id="ffa47-232">Esses usuários recebem essa breve Idade Máxima porque o AAD não é capaz de verificar quando revogar tokens vinculados a uma credencial antiga (como uma senha que foi alterada) e devem verificar novamente, com mais frequência, para garantir que o usuário e tokens associados estejam válidos ainda.</span><span class="sxs-lookup"><span data-stu-id="ffa47-232">These users are given this short Max Age because AAD is unable to verify when to revoke tokens that are tied to an old credential (such as a password that has been changed) and must check back in more frequently to ensure that the user and associated tokens are still in good standing.</span></span> <span data-ttu-id="ffa47-233">Para melhorar essa experiência, os administradores de locatário devem garantir que estejam sincronizando o atributo "LastPasswordChangeTimestamp" (isso pode ser definido no objeto do usuário usando o Powershell ou por meio do AADSync).</span><span class="sxs-lookup"><span data-stu-id="ffa47-233">To improve this experience, tenant admins must ensure that they are syncing the “LastPasswordChangeTimestamp” attribute (this can be set on the user object using Powershell or through AADSync).</span></span>

### <a name="policy-evaluation-and-prioritization"></a><span data-ttu-id="ffa47-234">Avaliação e priorização de política</span><span class="sxs-lookup"><span data-stu-id="ffa47-234">Policy evaluation and prioritization</span></span>
<span data-ttu-id="ffa47-235">Crie e atribua uma política de tempo de vida de token para um aplicativo específico, para sua organização e para entidades de serviço.</span><span class="sxs-lookup"><span data-stu-id="ffa47-235">You can create and then assign a token lifetime policy to a specific application, to your organization, and to service principals.</span></span> <span data-ttu-id="ffa47-236">Várias políticas podem se aplicar a um aplicativo específico.</span><span class="sxs-lookup"><span data-stu-id="ffa47-236">Multiple policies might apply to a specific application.</span></span> <span data-ttu-id="ffa47-237">A política de tempo de vida do token que entra em vigor segue estas regras:</span><span class="sxs-lookup"><span data-stu-id="ffa47-237">The token lifetime policy that takes effect follows these rules:</span></span>

* <span data-ttu-id="ffa47-238">Se uma política for atribuída explicitamente à entidade de serviço, ela será imposta.</span><span class="sxs-lookup"><span data-stu-id="ffa47-238">If a policy is explicitly assigned to the service principal, it is enforced.</span></span>
* <span data-ttu-id="ffa47-239">Se nenhuma política for explicitamente atribuída à entidade de serviço, uma política explicitamente atribuída à organização pai da entidade de serviço será imposta.</span><span class="sxs-lookup"><span data-stu-id="ffa47-239">If no policy is explicitly assigned to the service principal, a policy explicitly assigned to the parent organization of the service principal is enforced.</span></span>
* <span data-ttu-id="ffa47-240">Se nenhuma política foi atribuída explicitamente à entidade de serviço ou à organização, a política atribuída ao aplicativo será imposta.</span><span class="sxs-lookup"><span data-stu-id="ffa47-240">If no policy is explicitly assigned to the service principal or to the organization, the policy assigned to the application is enforced.</span></span>
* <span data-ttu-id="ffa47-241">Se nenhuma política tiver sido atribuída à entidade de serviço, à organização ou ao objeto de aplicativo, os valores padrão serão aplicados.</span><span class="sxs-lookup"><span data-stu-id="ffa47-241">If no policy has been assigned to the service principal, the organization, or the application object, the default values is enforced.</span></span> <span data-ttu-id="ffa47-242">(Consulte a tabela em [Propriedades configuráveis de tempo de vida de token](#configurable-token-lifetime-properties).)</span><span class="sxs-lookup"><span data-stu-id="ffa47-242">(See the table in [Configurable token lifetime properties](#configurable-token-lifetime-properties).)</span></span>

<span data-ttu-id="ffa47-243">Para saber mais sobre a relação entre objetos de aplicativo e de entidade de serviço, confira [Objetos de aplicativos e entidade de serviço no Azure Active Directory](active-directory-application-objects.md).</span><span class="sxs-lookup"><span data-stu-id="ffa47-243">For more information about the relationship between application objects and service principal objects, see [Application and service principal objects in Azure Active Directory](active-directory-application-objects.md).</span></span>

<span data-ttu-id="ffa47-244">A validade do token é avaliada no momento em que ele é usado.</span><span class="sxs-lookup"><span data-stu-id="ffa47-244">A token’s validity is evaluated at the time the token is used.</span></span> <span data-ttu-id="ffa47-245">A política com a prioridade mais alta no aplicativo que está sendo acessado entra em vigor.</span><span class="sxs-lookup"><span data-stu-id="ffa47-245">The policy with the highest priority on the application that is being accessed takes effect.</span></span>

> [!NOTE]
> <span data-ttu-id="ffa47-246">Veja um exemplo de cenários.</span><span class="sxs-lookup"><span data-stu-id="ffa47-246">Here's an example scenario.</span></span>
>
> <span data-ttu-id="ffa47-247">Um usuário deseja acessar dois aplicativos Web: Aplicativo Web A e Aplicativo Web B.</span><span class="sxs-lookup"><span data-stu-id="ffa47-247">A user wants to access two web applications: Web Application A and Web Application B.</span></span>
> 
> <span data-ttu-id="ffa47-248">Fatores:</span><span class="sxs-lookup"><span data-stu-id="ffa47-248">Factors:</span></span>
> * <span data-ttu-id="ffa47-249">Os dois aplicativos Web estão na mesma organização pai.</span><span class="sxs-lookup"><span data-stu-id="ffa47-249">Both web applications are in the same parent organization.</span></span>
> * <span data-ttu-id="ffa47-250">Política de tempo de vida de token 1 com uma Idade Máxima do Token de Sessão de oito horas é definida como o padrão da organização pai.</span><span class="sxs-lookup"><span data-stu-id="ffa47-250">Token Lifetime Policy 1 with a Session Token Max Age of eight hours is set as the parent organization’s default.</span></span>
> * <span data-ttu-id="ffa47-251">O Aplicativo Web A é um aplicativo de uso normal e não está vinculado a políticas.</span><span class="sxs-lookup"><span data-stu-id="ffa47-251">Web Application A is a regular-use web application and isn’t linked to any policies.</span></span>
> * <span data-ttu-id="ffa47-252">O Aplicativo Web B é usado para processos altamente confidenciais.</span><span class="sxs-lookup"><span data-stu-id="ffa47-252">Web Application B is used for highly sensitive processes.</span></span> <span data-ttu-id="ffa47-253">Essa entidade de serviço é vinculada à Política de tempo de vida de token 2, que tem uma Idade Máxima de Token de Sessão de 30 minutos.</span><span class="sxs-lookup"><span data-stu-id="ffa47-253">Its service principal is linked to Token Lifetime Policy 2, which has a Session Token Max Age of 30 minutes.</span></span>
>
> <span data-ttu-id="ffa47-254">Às 12h, o usuário inicia uma nova sessão do navegador e tenta acessar o Aplicativo Web A. O usuário é redirecionado para o Azure AD e recebe uma solicitação para entrar.</span><span class="sxs-lookup"><span data-stu-id="ffa47-254">At 12:00 PM, the user starts a new browser session and tries to access Web Application A. The user is redirected to Azure AD and is asked to sign in.</span></span> <span data-ttu-id="ffa47-255">Isso crie um cookie com um token de sessão no navegador.</span><span class="sxs-lookup"><span data-stu-id="ffa47-255">This creates a cookie that has a session token in the browser.</span></span> <span data-ttu-id="ffa47-256">O usuário é redirecionado ao Aplicativo Web A com um token de ID que permite e ele acessar o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ffa47-256">The user is redirected back to Web Application A with an ID token that allows the user to access the application.</span></span>
>
> <span data-ttu-id="ffa47-257">Às 12h15, o usuário tentar acessar o Aplicativo Web B. O navegador é redirecionado para o Azure AD, que detecta o cookie de sessão.</span><span class="sxs-lookup"><span data-stu-id="ffa47-257">At 12:15 PM, the user tries to access Web Application B. The browser redirects to Azure AD, which detects the session cookie.</span></span> <span data-ttu-id="ffa47-258">A entidade de serviço do Aplicativo Web B está vinculada à Política de tempo de vida de token 2, mas também faz parte da organização pai, com a Política de tempo de vida de token 1 padrão.</span><span class="sxs-lookup"><span data-stu-id="ffa47-258">Web Application B’s service principal is linked to Token Lifetime Policy 2, but it's also part of the parent organization, with default Token Lifetime Policy 1.</span></span> <span data-ttu-id="ffa47-259">A Política de tempo de vida de token 2 entra em vigor, pois as políticas vinculadas a entidades de serviço têm uma prioridade maior do que as políticas padrão de organização.</span><span class="sxs-lookup"><span data-stu-id="ffa47-259">Token Lifetime Policy 2 takes effect because policies linked to service principals have a higher priority than organization default policies.</span></span> <span data-ttu-id="ffa47-260">O token de sessão foi originalmente emitido nos últimos 30 minutos. Portanto, ele é considerado válido.</span><span class="sxs-lookup"><span data-stu-id="ffa47-260">The session token was originally issued within the last 30 minutes, so it is considered valid.</span></span> <span data-ttu-id="ffa47-261">O usuário é redirecionado para o Aplicativo Web B com um token de ID que lhe concede acesso.</span><span class="sxs-lookup"><span data-stu-id="ffa47-261">The user is redirected back to Web Application B with an ID token that grants them access.</span></span>
>
> <span data-ttu-id="ffa47-262">Às 13h, o usuário tenta acessar o Aplicativo Web B. O usuário é redirecionado ao Azure AD.</span><span class="sxs-lookup"><span data-stu-id="ffa47-262">At 1:00 PM, the user tries to access Web Application A. The user is redirected to Azure AD.</span></span> <span data-ttu-id="ffa47-263">O Aplicativo Web A não está vinculado a qualquer política, mas como está em uma organização com a Política de tempo de vida de token 1 padrão, essa política entra em vigor.</span><span class="sxs-lookup"><span data-stu-id="ffa47-263">Web Application A is not linked to any policies, but because it is in an organization with default Token Lifetime Policy 1, that policy takes effect.</span></span> <span data-ttu-id="ffa47-264">O cookie de sessão que foi originalmente emitido nas últimas oito horas é detectado.</span><span class="sxs-lookup"><span data-stu-id="ffa47-264">The session cookie that was originally issued within the last eight hours is detected.</span></span> <span data-ttu-id="ffa47-265">O usuário é redirecionado silenciosamente de volta ao Aplicativo Web A com um novo token de ID.</span><span class="sxs-lookup"><span data-stu-id="ffa47-265">The user is silently redirected back to Web Application A with a new ID token.</span></span> <span data-ttu-id="ffa47-266">O usuário não precisa autenticar.</span><span class="sxs-lookup"><span data-stu-id="ffa47-266">The user is not required to authenticate.</span></span>
>
> <span data-ttu-id="ffa47-267">Imediatamente após isso, o usuário tenta acessar o Aplicativo Web B. O usuário é redirecionado ao Azure AD.</span><span class="sxs-lookup"><span data-stu-id="ffa47-267">Immediately afterward, the user tries to access Web Application B. The user is redirected to Azure AD.</span></span> <span data-ttu-id="ffa47-268">Como antes, a Política de tempo de vida de token 2 entra em vigor.</span><span class="sxs-lookup"><span data-stu-id="ffa47-268">As before, Token Lifetime Policy 2 takes effect.</span></span> <span data-ttu-id="ffa47-269">Como o token foi emitido há mais de 30 minutos, o usuário recebe uma solicitação para reinserir suas credenciais de logon.</span><span class="sxs-lookup"><span data-stu-id="ffa47-269">Because the token was issued more than 30 minutes ago, the user is prompted to reenter their sign-in credentials.</span></span> <span data-ttu-id="ffa47-270">Um token de sessão e um token de ID totalmente novos são emitidos.</span><span class="sxs-lookup"><span data-stu-id="ffa47-270">A brand-new session token and ID token are issued.</span></span> <span data-ttu-id="ffa47-271">Assim, o usuário pode acessar o Aplicativo Web B.</span><span class="sxs-lookup"><span data-stu-id="ffa47-271">The user can then access Web Application B.</span></span>
>
>

## <a name="configurable-policy-property-details"></a><span data-ttu-id="ffa47-272">Detalhes configuráveis da propriedade da política</span><span class="sxs-lookup"><span data-stu-id="ffa47-272">Configurable policy property details</span></span>
### <a name="access-token-lifetime"></a><span data-ttu-id="ffa47-273">Tempo de Vida do Token de Acesso</span><span class="sxs-lookup"><span data-stu-id="ffa47-273">Access Token Lifetime</span></span>
<span data-ttu-id="ffa47-274">**Cadeia de caracteres:** AccessTokenLifetime</span><span class="sxs-lookup"><span data-stu-id="ffa47-274">**String:** AccessTokenLifetime</span></span>

<span data-ttu-id="ffa47-275">**Afeta:** tokens de acesso, tokens de ID</span><span class="sxs-lookup"><span data-stu-id="ffa47-275">**Affects:** Access tokens, ID tokens</span></span>

<span data-ttu-id="ffa47-276">**Resumo:** essa política controla por quanto tempo tokens de acesso e ID para esse recurso são considerados válidos.</span><span class="sxs-lookup"><span data-stu-id="ffa47-276">**Summary:** This policy controls how long access and ID tokens for this resource are considered valid.</span></span> <span data-ttu-id="ffa47-277">A redução da propriedade de Tempo de vida útil do token acesso minimiza o risco de uso de um token de acesso ou de ID por um ator mal-intencionado durante um longo período.</span><span class="sxs-lookup"><span data-stu-id="ffa47-277">Reducing the Access Token Lifetime property mitigates the risk of an access token or ID token being used by a malicious actor for an extended period of time.</span></span> <span data-ttu-id="ffa47-278">(Esses tokens não podem ser revogados.) A desvantagem é que o desempenho é afetado negativamente, pois os tokens precisam ser substituído com mais frequência.</span><span class="sxs-lookup"><span data-stu-id="ffa47-278">(These tokens cannot be revoked.) The trade-off is that performance is adversely affected, because the tokens have to be replaced more often.</span></span>

### <a name="refresh-token-max-inactive-time"></a><span data-ttu-id="ffa47-279">Tempo Máximo Inativo de Token de Atualização</span><span class="sxs-lookup"><span data-stu-id="ffa47-279">Refresh Token Max Inactive Time</span></span>
<span data-ttu-id="ffa47-280">**Cadeia de caracteres:** MaxInactiveTime</span><span class="sxs-lookup"><span data-stu-id="ffa47-280">**String:** MaxInactiveTime</span></span>

<span data-ttu-id="ffa47-281">**Afeta:** tokens de atualização</span><span class="sxs-lookup"><span data-stu-id="ffa47-281">**Affects:** Refresh tokens</span></span>

<span data-ttu-id="ffa47-282">**Resumo:** essa política controla a idade que um token de atualização pode ter antes que um cliente não possa mais usá-lo para recuperar um novo par de tokens de atualização/acesso ao tentar acessar esse recurso.</span><span class="sxs-lookup"><span data-stu-id="ffa47-282">**Summary:** This policy controls how old a refresh token can be before a client can no longer use it to retrieve a new access/refresh token pair when attempting to access this resource.</span></span> <span data-ttu-id="ffa47-283">Como um novo token de atualização normalmente retorna quando um token de atualização é usado, essa política impede o acesso se o cliente tentar acessar qualquer recurso usando o token de atualização atual durante o período especificado de tempo.</span><span class="sxs-lookup"><span data-stu-id="ffa47-283">Because a new refresh token usually is returned when a refresh token is used, this policy prevents access if the client tries to access any resource by using the current refresh token during the specified period of time.</span></span>

<span data-ttu-id="ffa47-284">Essa política força os usuários que não estão ativos no cliente a se autenticarem novamente para recuperar um novo token de atualização.</span><span class="sxs-lookup"><span data-stu-id="ffa47-284">This policy forces users who have not been active on their client to reauthenticate to retrieve a new refresh token.</span></span>

<span data-ttu-id="ffa47-285">A propriedade Tempo Máximo Inativo do Token de Atualização deve ser definida como um valor menor do que as propriedades Idade Máxima do Token de Fator Único e Idade Máxima de Token de Atualização multifator.</span><span class="sxs-lookup"><span data-stu-id="ffa47-285">The Refresh Token Max Inactive Time property must be set to a lower value than the Single-Factor Token Max Age and the Multi-Factor Refresh Token Max Age properties.</span></span>

### <a name="single-factor-refresh-token-max-age"></a><span data-ttu-id="ffa47-286">Idade Máxima de Token de Atualização de Fator Único</span><span class="sxs-lookup"><span data-stu-id="ffa47-286">Single-Factor Refresh Token Max Age</span></span>
<span data-ttu-id="ffa47-287">**Cadeia de caracteres:** MaxAgeSingleFactor</span><span class="sxs-lookup"><span data-stu-id="ffa47-287">**String:** MaxAgeSingleFactor</span></span>

<span data-ttu-id="ffa47-288">**Afeta:** tokens de atualização</span><span class="sxs-lookup"><span data-stu-id="ffa47-288">**Affects:** Refresh tokens</span></span>

<span data-ttu-id="ffa47-289">**Resumo:** essa política controla por quanto tempo um usuário pode usar um token de atualização para obter um novo par de tokens de acesso/atualização após a última autenticação bem-sucedida usando apenas um único fator.</span><span class="sxs-lookup"><span data-stu-id="ffa47-289">**Summary:** This policy controls how long a user can use a refresh token to get a new access/refresh token pair after they last authenticated successfully by using only a single factor.</span></span> <span data-ttu-id="ffa47-290">Depois que um usuário autenticar e receber um novo token de atualização, ele poderá usar o fluxo do token de atualização para o período especificado.</span><span class="sxs-lookup"><span data-stu-id="ffa47-290">After a user authenticates and receives a new refresh token, the user can use the refresh token flow for the specified period of time.</span></span> <span data-ttu-id="ffa47-291">(Isso será verdadeiro desde que o token de atualização atual não seja revogado, e não fique sem uso por mais tempo do que o tempo de inatividade.) Nesse ponto, o usuário é forçado a se autenticar novamente para receber um novo token de atualização.</span><span class="sxs-lookup"><span data-stu-id="ffa47-291">(This is true as long as the current refresh token is not revoked, and it is not left unused for longer than the inactive time.) At that point, the user is forced to reauthenticate to receive a new refresh token.</span></span>

<span data-ttu-id="ffa47-292">Reduzir a idade máxima força os usuários a se autenticarem com mais frequência.</span><span class="sxs-lookup"><span data-stu-id="ffa47-292">Reducing the max age forces users to authenticate more often.</span></span> <span data-ttu-id="ffa47-293">Como a autenticação de fator único é considerada menos segura do que a autenticação multifator, recomendamos a definição dessa propriedade com um valor igual ou menor do que a propriedade Idade Máxima de Token de Atualização Multifator.</span><span class="sxs-lookup"><span data-stu-id="ffa47-293">Because single-factor authentication is considered less secure than multi-factor authentication, we recommend that you set this property to a value that is equal to or lesser than the Multi-Factor Refresh Token Max Age property.</span></span>

### <a name="multi-factor-refresh-token-max-age"></a><span data-ttu-id="ffa47-294">Idade Máxima de Token de Atualização Multifator</span><span class="sxs-lookup"><span data-stu-id="ffa47-294">Multi-Factor Refresh Token Max Age</span></span>
<span data-ttu-id="ffa47-295">**Cadeia de caracteres:** MaxAgeMultiFactor</span><span class="sxs-lookup"><span data-stu-id="ffa47-295">**String:** MaxAgeMultiFactor</span></span>

<span data-ttu-id="ffa47-296">**Afeta:** tokens de atualização</span><span class="sxs-lookup"><span data-stu-id="ffa47-296">**Affects:** Refresh tokens</span></span>

<span data-ttu-id="ffa47-297">**Resumo:** essa política controla por quanto tempo um usuário pode usar um token de atualização para obter um novo par de tokens de acesso/atualização após a última autenticação bem-sucedida múltiplos fatores.</span><span class="sxs-lookup"><span data-stu-id="ffa47-297">**Summary:** This policy controls how long a user can use a refresh token to get a new access/refresh token pair after they last authenticated successfully by using multiple factors.</span></span> <span data-ttu-id="ffa47-298">Depois que um usuário autenticar e receber um novo token de atualização, ele poderá usar o fluxo do token de atualização para o período especificado.</span><span class="sxs-lookup"><span data-stu-id="ffa47-298">After a user authenticates and receives a new refresh token, the user can use the refresh token flow for the specified period of time.</span></span> <span data-ttu-id="ffa47-299">(Isso será verdadeiro desde que o token de atualização atual não seja revogado, e não fique sem uso por mais tempo do que o tempo de inatividade.) Nesse ponto, os usuários são forçados a autenticar novamente para receber um novo token de atualização.</span><span class="sxs-lookup"><span data-stu-id="ffa47-299">(This is true as long as the current refresh token is not revoked, and it is not unused for longer than the inactive time.) At that point, users are forced to reauthenticate to receive a new refresh token.</span></span>

<span data-ttu-id="ffa47-300">Reduzir a idade máxima força os usuários a se autenticarem com mais frequência.</span><span class="sxs-lookup"><span data-stu-id="ffa47-300">Reducing the max age forces users to authenticate more often.</span></span> <span data-ttu-id="ffa47-301">Como a autenticação de fator único é considerada menos segura do que a autenticação multifator, recomendamos a definição dessa propriedade com um valor igual ou maior do que a propriedade Idade Máxima de Token de Atualização de Fator Único.</span><span class="sxs-lookup"><span data-stu-id="ffa47-301">Because single-factor authentication is considered less secure than multi-factor authentication, we recommend that you set this property to a value that is equal to or greater than the Single-Factor Refresh Token Max Age property.</span></span>

### <a name="single-factor-session-token-max-age"></a><span data-ttu-id="ffa47-302">Idade Máxima de Token de Sessão de Fator Único</span><span class="sxs-lookup"><span data-stu-id="ffa47-302">Single-Factor Session Token Max Age</span></span>
<span data-ttu-id="ffa47-303">**Cadeia de caracteres:** MaxAgeSessionSingleFactor</span><span class="sxs-lookup"><span data-stu-id="ffa47-303">**String:** MaxAgeSessionSingleFactor</span></span>

<span data-ttu-id="ffa47-304">**Afeta:** tokens de sessão (persistentes e não persistentes)</span><span class="sxs-lookup"><span data-stu-id="ffa47-304">**Affects:** Session tokens (persistent and nonpersistent)</span></span>

<span data-ttu-id="ffa47-305">**Resumo:** essa política controla por quanto tempo um usuário pode usar um token de sessão para obter uma nova ID e token de sessão após a última autenticação bem-sucedida usando apenas um único fator.</span><span class="sxs-lookup"><span data-stu-id="ffa47-305">**Summary:** This policy controls how long a user can use a session token to get a new ID and session token after they last authenticated successfully by using only a single factor.</span></span> <span data-ttu-id="ffa47-306">Depois que um usuário autenticar e receber um novo token de sessão o, ele poderá usar o fluxo do token de sessão para o período especificado.</span><span class="sxs-lookup"><span data-stu-id="ffa47-306">After a user authenticates and receives a new session token, the user can use the session token flow for the specified period of time.</span></span> <span data-ttu-id="ffa47-307">(Isso será verdadeiro desde que o token de sessão atual não seja revogado e não tenha expirado.) Após o período especificado, o usuário será forçado a autenticar novamente para receber um novo token de sessão.</span><span class="sxs-lookup"><span data-stu-id="ffa47-307">(This is true as long as the current session token is not revoked and has not expired.) After the specified period of time, the user is forced to reauthenticate to receive a new session token.</span></span>

<span data-ttu-id="ffa47-308">Reduzir a idade máxima força os usuários a se autenticarem com mais frequência.</span><span class="sxs-lookup"><span data-stu-id="ffa47-308">Reducing the max age forces users to authenticate more often.</span></span> <span data-ttu-id="ffa47-309">Como a autenticação de fator único é considerada menos segura do que a autenticação multifator, recomendamos a definição dessa propriedade com um valor igual ou menor do que a propriedade Idade Máxima de Token de Sessão Multifator.</span><span class="sxs-lookup"><span data-stu-id="ffa47-309">Because single-factor authentication is considered less secure than multi-factor authentication, we recommend that you set this property to a value that is equal to or less than the Multi-Factor Session Token Max Age property.</span></span>

### <a name="multi-factor-session-token-max-age"></a><span data-ttu-id="ffa47-310">Idade Máxima de Token de Sessão Multifator</span><span class="sxs-lookup"><span data-stu-id="ffa47-310">Multi-Factor Session Token Max Age</span></span>
<span data-ttu-id="ffa47-311">**Cadeia de caracteres:** MaxAgeSessionMultiFactor</span><span class="sxs-lookup"><span data-stu-id="ffa47-311">**String:** MaxAgeSessionMultiFactor</span></span>

<span data-ttu-id="ffa47-312">**Afeta:** tokens de sessão (persistentes e não persistentes)</span><span class="sxs-lookup"><span data-stu-id="ffa47-312">**Affects:** Session tokens (persistent and nonpersistent)</span></span>

<span data-ttu-id="ffa47-313">**Resumo:** essa política controla por quanto tempo um usuário pode usar um token de sessão para obter uma nova ID e token de sessão após a última autenticação bem-sucedida usando apenas múltiplos fatores.</span><span class="sxs-lookup"><span data-stu-id="ffa47-313">**Summary:** This policy controls how long a user can use a session token to get a new ID and session token after the last time they authenticated successfully by using multiple factors.</span></span> <span data-ttu-id="ffa47-314">Depois que um usuário autenticar e receber um novo token de sessão o, ele poderá usar o fluxo do token de sessão para o período especificado.</span><span class="sxs-lookup"><span data-stu-id="ffa47-314">After a user authenticates and receives a new session token, the user can use the session token flow for the specified period of time.</span></span> <span data-ttu-id="ffa47-315">(Isso será verdadeiro desde que o token de sessão atual não seja revogado e não tenha expirado.) Após o período especificado, o usuário será forçado a autenticar novamente para receber um novo token de sessão.</span><span class="sxs-lookup"><span data-stu-id="ffa47-315">(This is true as long as the current session token is not revoked and has not expired.) After the specified period of time, the user is forced to reauthenticate to receive a new session token.</span></span>

<span data-ttu-id="ffa47-316">Reduzir a idade máxima força os usuários a se autenticarem com mais frequência.</span><span class="sxs-lookup"><span data-stu-id="ffa47-316">Reducing the max age forces users to authenticate more often.</span></span> <span data-ttu-id="ffa47-317">Como a autenticação de fator único é considerada menos segura do que a autenticação multifator, recomendamos a definição dessa propriedade com um valor igual ou maior do que a propriedade Idade Máxima de Token de Sessão de Fator Único.</span><span class="sxs-lookup"><span data-stu-id="ffa47-317">Because single-factor authentication is considered less secure than multi-factor authentication, we recommend that you set this property to a value that is equal to or greater than the Single-Factor Session Token Max Age property.</span></span>

## <a name="example-token-lifetime-policies"></a><span data-ttu-id="ffa47-318">Exemplo de políticas de tempo de vida do token</span><span class="sxs-lookup"><span data-stu-id="ffa47-318">Example token lifetime policies</span></span>
<span data-ttu-id="ffa47-319">Muitos cenários são possíveis no Azure AD quando você cria e gerencia tempos de vida de token para aplicativos, entidades de serviço e sua organização geral.</span><span class="sxs-lookup"><span data-stu-id="ffa47-319">Many scenarios are possible in Azure AD when you can create and manage token lifetimes for apps, service principals, and your overall organization.</span></span> <span data-ttu-id="ffa47-320">Nesta seção, examinaremos alguns cenários comuns de políticas que ajudarão você a impor novas regras para:</span><span class="sxs-lookup"><span data-stu-id="ffa47-320">In this section, we walk through a few common policy scenarios that can help you impose new rules for:</span></span>

* <span data-ttu-id="ffa47-321">Tempo de vida do token</span><span class="sxs-lookup"><span data-stu-id="ffa47-321">Token Lifetime</span></span>
* <span data-ttu-id="ffa47-322">Tempo Máximo Inativos de Token</span><span class="sxs-lookup"><span data-stu-id="ffa47-322">Token Max Inactive Time</span></span>
* <span data-ttu-id="ffa47-323">Idade Máxima de Token</span><span class="sxs-lookup"><span data-stu-id="ffa47-323">Token Max Age</span></span>

<span data-ttu-id="ffa47-324">Nos exemplos, você poderá aprender a:</span><span class="sxs-lookup"><span data-stu-id="ffa47-324">In the examples, you can learn how to:</span></span>

* <span data-ttu-id="ffa47-325">Gerenciar a política padrão de uma organização</span><span class="sxs-lookup"><span data-stu-id="ffa47-325">Manage an organization's default policy</span></span>
* <span data-ttu-id="ffa47-326">Criar uma política para entrada na Web</span><span class="sxs-lookup"><span data-stu-id="ffa47-326">Create a policy for web sign-in</span></span>
* <span data-ttu-id="ffa47-327">Criar uma política para um aplicativo nativo que chama uma API da Web</span><span class="sxs-lookup"><span data-stu-id="ffa47-327">Create a policy for a native app that calls a web API</span></span>
* <span data-ttu-id="ffa47-328">Gerenciar uma política avançada</span><span class="sxs-lookup"><span data-stu-id="ffa47-328">Manage an advanced policy</span></span>

### <a name="prerequisites"></a><span data-ttu-id="ffa47-329">Pré-requisitos</span><span class="sxs-lookup"><span data-stu-id="ffa47-329">Prerequisites</span></span>
<span data-ttu-id="ffa47-330">Nos exemplos a seguir, você cria, atualiza, vincula e exclui políticas de aplicativos, entidades de serviço e sua organização em geral.</span><span class="sxs-lookup"><span data-stu-id="ffa47-330">In the following examples, you create, update, link, and delete policies for apps, service principals, and your overall organization.</span></span> <span data-ttu-id="ffa47-331">Se você for um novo usuário do Azure AD, recomendamos que aprenda sobre [como obter um locatário do Azure AD](active-directory-howto-tenant.md) antes de prosseguir com estes exemplos.</span><span class="sxs-lookup"><span data-stu-id="ffa47-331">If you are new to Azure AD, we recommend that you learn about [how to get an Azure AD tenant](active-directory-howto-tenant.md) before you proceed with these examples.</span></span>  

<span data-ttu-id="ffa47-332">Para começar, execute uma destas etapas:</span><span class="sxs-lookup"><span data-stu-id="ffa47-332">To get started, do the following steps:</span></span>

1. <span data-ttu-id="ffa47-333">Baixe a versão mais recente do [Azure AD PowerShell Visualização Pública](https://www.powershellgallery.com/packages/AzureADPreview).</span><span class="sxs-lookup"><span data-stu-id="ffa47-333">Download the latest [Azure AD PowerShell Module Public Preview release](https://www.powershellgallery.com/packages/AzureADPreview).</span></span>
2. <span data-ttu-id="ffa47-334">Execute o comando `Connect` para entrar em sua conta do administrador do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="ffa47-334">Run the `Connect` command to sign in to your Azure AD admin account.</span></span> <span data-ttu-id="ffa47-335">Execute esse comando sempre que você iniciar uma nova sessão.</span><span class="sxs-lookup"><span data-stu-id="ffa47-335">Run this command each time you start a new session.</span></span>

    ```PowerShell
    Connect-AzureAD -Confirm
    ```

3. <span data-ttu-id="ffa47-336">Para ver todas as políticas criadas em sua organização, execute o comando a seguir.</span><span class="sxs-lookup"><span data-stu-id="ffa47-336">To see all policies that have been created in your organization, run the following command.</span></span> <span data-ttu-id="ffa47-337">Execute esse comando após a maioria das operações nos cenários a seguir.</span><span class="sxs-lookup"><span data-stu-id="ffa47-337">Run this command after most operations in the following scenarios.</span></span> <span data-ttu-id="ffa47-338">A execução do comando também ajuda você a obter a ** ** de suas políticas.</span><span class="sxs-lookup"><span data-stu-id="ffa47-338">Running the command also helps you get the ** ** of your policies.</span></span>

    ```PowerShell
    Get-AzureADPolicy
    ```

### <a name="example-manage-an-organizations-default-policy"></a><span data-ttu-id="ffa47-339">Exemplo: Gerenciar a política padrão de uma organização</span><span class="sxs-lookup"><span data-stu-id="ffa47-339">Example: Manage an organization's default policy</span></span>
<span data-ttu-id="ffa47-340">Neste exemplo, crie uma política que permita aos usuários fazerem logon com menos frequência em toda sua organização.</span><span class="sxs-lookup"><span data-stu-id="ffa47-340">In this example, you create a policy that lets your users sign in less frequently across your entire organization.</span></span> <span data-ttu-id="ffa47-341">Para fazer isso, crie uma política de tempo de vida de token para Tokens de Atualização de Fator Único que é aplicada em toda sua organização.</span><span class="sxs-lookup"><span data-stu-id="ffa47-341">To do this, create a token lifetime policy for Single-Factor Refresh Tokens, which is applied across your organization.</span></span> <span data-ttu-id="ffa47-342">Essa política será aplicada a todos os aplicativos no a organização e a cada entidade de serviço que ainda não tenha uma política definida para ela.</span><span class="sxs-lookup"><span data-stu-id="ffa47-342">The policy is applied to every application in your organization, and to each service principal that doesn’t already have a policy set.</span></span>

1. <span data-ttu-id="ffa47-343">Crie uma política de tempo de vida de token.</span><span class="sxs-lookup"><span data-stu-id="ffa47-343">Create a token lifetime policy.</span></span>

    1.  <span data-ttu-id="ffa47-344">Defina o Token de Atualização de Fator Único como "until-revoked".</span><span class="sxs-lookup"><span data-stu-id="ffa47-344">Set the Single-Factor Refresh Token to "until-revoked."</span></span> <span data-ttu-id="ffa47-345">O token não expira até que o acesso seja revogado.</span><span class="sxs-lookup"><span data-stu-id="ffa47-345">The token doesn't expire until access is revoked.</span></span> <span data-ttu-id="ffa47-346">Crie a seguinte definição de política:</span><span class="sxs-lookup"><span data-stu-id="ffa47-346">Create the following policy definition:</span></span>

        ```PowerShell
        @('{
            "TokenLifetimePolicy":
            {
                "Version":1,
                "MaxAgeSingleFactor":"until-revoked"
            }
        }')
        ```

    2.  <span data-ttu-id="ffa47-347">Para criar a política, execute o seguinte comando:</span><span class="sxs-lookup"><span data-stu-id="ffa47-347">To create the policy, run the following command:</span></span>

        ```PowerShell
        New-AzureADPolicy -Definition @('{"TokenLifetimePolicy":{"Version":1, "MaxAgeSingleFactor":"until-revoked"}}') -DisplayName "OrganizationDefaultPolicyScenario" -IsOrganizationDefault $true -Type "TokenLifetimePolicy"
        ```

    3.  <span data-ttu-id="ffa47-348">Para ver a nova política e obter a **ObjectId** da política, execute o comando a seguir:</span><span class="sxs-lookup"><span data-stu-id="ffa47-348">To see your new policy, and to get the policy's **ObjectId**, run the following command:</span></span>

        ```PowerShell
        Get-AzureADPolicy
        ```

2. <span data-ttu-id="ffa47-349">Atualizar a política.</span><span class="sxs-lookup"><span data-stu-id="ffa47-349">Update the policy.</span></span>

    <span data-ttu-id="ffa47-350">Talvez você decida que a primeira política definida neste exemplo não é tão estrita quanto seu serviço exige.</span><span class="sxs-lookup"><span data-stu-id="ffa47-350">You might decide that the first policy you set in this example is not as strict as your service requires.</span></span> <span data-ttu-id="ffa47-351">Para definir a expiração do Token de Atualização de Fator Único para dois dias, execute o seguinte comando:</span><span class="sxs-lookup"><span data-stu-id="ffa47-351">To set your Single-Factor Refresh Token to expire in two days, run the following command:</span></span>

    ```PowerShell
    Set-AzureADPolicy -Id <ObjectId FROM GET COMMAND> -DisplayName "OrganizationDefaultPolicyUpdatedScenario" -Definition @('{"TokenLifetimePolicy":{"Version":1,"MaxAgeSingleFactor":"2.00:00:00"}}')
    ```

### <a name="example-create-a-policy-for-web-sign-in"></a><span data-ttu-id="ffa47-352">Exemplo: Criar uma política para entrada na Web</span><span class="sxs-lookup"><span data-stu-id="ffa47-352">Example: Create a policy for web sign-in</span></span>

<span data-ttu-id="ffa47-353">Neste exemplo, crie uma política que exige dos usuários a autenticação mais frequente no aplicativo Web.</span><span class="sxs-lookup"><span data-stu-id="ffa47-353">In this example, you create a policy that requires users to authenticate more frequently in your web app.</span></span> <span data-ttu-id="ffa47-354">Essa política define o tempo de vida dos tokens de acesso/Id e a idade máxima de um token de sessão multifator para a entidade de serviço do aplicativo Web.</span><span class="sxs-lookup"><span data-stu-id="ffa47-354">This policy sets the lifetime of the access/ID tokens and the max age of a multi-factor session token to the service principal of your web app.</span></span>

1. <span data-ttu-id="ffa47-355">Crie uma política de tempo de vida de token.</span><span class="sxs-lookup"><span data-stu-id="ffa47-355">Create a token lifetime policy.</span></span>

    <span data-ttu-id="ffa47-356">Essa política, para entrada na Web, define o tempo de vida do token de acesso/ID e a idade máxima do Token de sessão de fator único como duas horas.</span><span class="sxs-lookup"><span data-stu-id="ffa47-356">This policy, for web sign-in, sets the access/ID token lifetime and the max single-factor session token age to two hours.</span></span>

    1.  <span data-ttu-id="ffa47-357">Para criar a política, execute este comando:</span><span class="sxs-lookup"><span data-stu-id="ffa47-357">To create the policy, run this command:</span></span>

        ```PowerShell
        New-AzureADPolicy -Definition @('{"TokenLifetimePolicy":{"Version":1,"AccessTokenLifetime":"02:00:00","MaxAgeSessionSingleFactor":"02:00:00"}}') -DisplayName "WebPolicyScenario" -IsOrganizationDefault $false -Type "TokenLifetimePolicy"
        ```

    2.  <span data-ttu-id="ffa47-358">Para ver a nova política e obter a **ObjectId** da política, execute o comando a seguir:</span><span class="sxs-lookup"><span data-stu-id="ffa47-358">To see your new policy, and to get the policy **ObjectId**, run the following command:</span></span>

        ```PowerShell
        Get-AzureADPolicy
        ```

2.  <span data-ttu-id="ffa47-359">Atribuir a política à entidade de serviço.</span><span class="sxs-lookup"><span data-stu-id="ffa47-359">Assign the policy to your service principal.</span></span> <span data-ttu-id="ffa47-360">Você também precisará da **ObjectId** de sua entidade de serviço.</span><span class="sxs-lookup"><span data-stu-id="ffa47-360">You also need to get the **ObjectId** of your service principal.</span></span> 

    1.  <span data-ttu-id="ffa47-361">Para ver todas as entidades de serviço de sua organização, consulte o [Microsoft Graph](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/entity-and-complex-type-reference#serviceprincipal-entity).</span><span class="sxs-lookup"><span data-stu-id="ffa47-361">To see all your organization's service principals, you can query [Microsoft Graph](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/entity-and-complex-type-reference#serviceprincipal-entity).</span></span> <span data-ttu-id="ffa47-362">Ou, no [Graph Explorer do Azure AD](https://graphexplorer.cloudapp.net/), entre em sua conta do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="ffa47-362">Or, in [Azure AD Graph Explorer](https://graphexplorer.cloudapp.net/), sign in to your Azure AD account.</span></span>

    2.  <span data-ttu-id="ffa47-363">Quando você tiver a **ObjectId** de sua entidade de serviço, execute o seguinte comando:</span><span class="sxs-lookup"><span data-stu-id="ffa47-363">When you have the **ObjectId** of your service principal, run the following command:</span></span>

        ```PowerShell
        Add-AzureADServicePrincipalPolicy -Id <ObjectId of the ServicePrincipal> -RefObjectId <ObjectId of the Policy>
        ```


### <a name="example-create-a-policy-for-a-native-app-that-calls-a-web-api"></a><span data-ttu-id="ffa47-364">Exemplo: Criar uma política para um aplicativo nativo que chama uma API da Web</span><span class="sxs-lookup"><span data-stu-id="ffa47-364">Example: Create a policy for a native app that calls a web API</span></span>
<span data-ttu-id="ffa47-365">Neste exemplo, crie uma política que exige dos usuários a autenticação menos frequente.</span><span class="sxs-lookup"><span data-stu-id="ffa47-365">In this example, you create a policy that requires users to authenticate less frequently.</span></span> <span data-ttu-id="ffa47-366">A política também aumenta a quantidade de tempo que um usuário pode ficar inativo antes que precise autenticar novamente.</span><span class="sxs-lookup"><span data-stu-id="ffa47-366">The policy also lengthens the amount of time a user can be inactive before the user must reauthenticate.</span></span> <span data-ttu-id="ffa47-367">A política é aplicada à API da web.</span><span class="sxs-lookup"><span data-stu-id="ffa47-367">The policy is applied to the web API.</span></span> <span data-ttu-id="ffa47-368">Quando o aplicativo nativo solicita a API da Web como um recurso, essa política é aplicada.</span><span class="sxs-lookup"><span data-stu-id="ffa47-368">When the native app requests the web API as a resource, this policy is applied.</span></span>

1. <span data-ttu-id="ffa47-369">Crie uma política de tempo de vida de token.</span><span class="sxs-lookup"><span data-stu-id="ffa47-369">Create a token lifetime policy.</span></span>

    1.  <span data-ttu-id="ffa47-370">Para criar uma política estrita para uma API da Web, execute este comando:</span><span class="sxs-lookup"><span data-stu-id="ffa47-370">To create a strict policy for a web API, run the following command:</span></span>

        ```PowerShell
        New-AzureADPolicy -Definition @('{"TokenLifetimePolicy":{"Version":1,"MaxInactiveTime":"30.00:00:00","MaxAgeMultiFactor":"until-revoked","MaxAgeSingleFactor":"180.00:00:00"}}') -DisplayName "WebApiDefaultPolicyScenario" -IsOrganizationDefault $false -Type "TokenLifetimePolicy"
        ```

    2.  <span data-ttu-id="ffa47-371">Para ver a nova política e obter a **ObjectId** da política, execute o comando a seguir:</span><span class="sxs-lookup"><span data-stu-id="ffa47-371">To see your new policy, and to get the policy **ObjectId**, run the following command:</span></span>

        ```PowerShell
        Get-AzureADPolicy
        ```

2. <span data-ttu-id="ffa47-372">Atribua a política à sua API da Web.</span><span class="sxs-lookup"><span data-stu-id="ffa47-372">Assign the policy to your web API.</span></span> <span data-ttu-id="ffa47-373">Você também precisará da **ObjectId** de seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ffa47-373">You also need to get the **ObjectId** of your application.</span></span> <span data-ttu-id="ffa47-374">A melhor maneira de localizar o aplicativo **ObjectId** é usar o [Portal do Azure](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="ffa47-374">The best way to find your app's **ObjectId** is to use the [Azure portal](https://portal.azure.com/).</span></span>

   <span data-ttu-id="ffa47-375">Quando você tiver a **ObjectId** de seu aplicativo, execute o seguinte comando:</span><span class="sxs-lookup"><span data-stu-id="ffa47-375">When you have the **ObjectId** of your app, run the following command:</span></span>

        ```PowerShell
        Add-AzureADApplicationPolicy -Id <ObjectId of the Application> -RefObjectId <ObjectId of the Policy>
        ```


### <a name="example-manage-an-advanced-policy"></a><span data-ttu-id="ffa47-376">Exemplo: Gerenciar uma política avançada</span><span class="sxs-lookup"><span data-stu-id="ffa47-376">Example: Manage an advanced policy</span></span>
<span data-ttu-id="ffa47-377">Nesse exemplo, crie algumas políticas para saber como funciona o sistema de prioridade.</span><span class="sxs-lookup"><span data-stu-id="ffa47-377">In this example, you create a few policies, to learn how the priority system works.</span></span> <span data-ttu-id="ffa47-378">Você também pode aprender a gerenciar várias políticas que são aplicadas a vários objetos.</span><span class="sxs-lookup"><span data-stu-id="ffa47-378">You also can learn how to manage multiple policies that are applied to several objects.</span></span>

1. <span data-ttu-id="ffa47-379">Crie uma política de tempo de vida de token.</span><span class="sxs-lookup"><span data-stu-id="ffa47-379">Create a token lifetime policy.</span></span>

    1.  <span data-ttu-id="ffa47-380">Para criar uma política padrão de organização que define o tempo de vida do Token de Atualização de Fator Único como 30 dias, execute este comando:</span><span class="sxs-lookup"><span data-stu-id="ffa47-380">To create an organization default policy that sets the Single-Factor Refresh Token lifetime to 30 days, run the following command:</span></span>

        ```PowerShell
        New-AzureADPolicy -Definition @('{"TokenLifetimePolicy":{"Version":1,"MaxAgeSingleFactor":"30.00:00:00"}}') -DisplayName "ComplexPolicyScenario" -IsOrganizationDefault $true -Type "TokenLifetimePolicy"
        ```

    2.  <span data-ttu-id="ffa47-381">Para ver a nova política e obter a **ObjectId** da política, execute o comando a seguir:</span><span class="sxs-lookup"><span data-stu-id="ffa47-381">To see your new policy, and to get the policy's **ObjectId**, run the following command:</span></span>

        ```PowerShell
        Get-AzureADPolicy
        ```

2. <span data-ttu-id="ffa47-382">Atribuir a política a uma entidade de serviço.</span><span class="sxs-lookup"><span data-stu-id="ffa47-382">Assign the policy to a service principal.</span></span>

    <span data-ttu-id="ffa47-383">Agora, você tem uma política que se aplica a toda a organização.</span><span class="sxs-lookup"><span data-stu-id="ffa47-383">Now, you have a policy that applies to the entire organization.</span></span> <span data-ttu-id="ffa47-384">Convém preservar essa política de 30 dias para uma entidade de serviço específica, mas altere a política padrão de organização para o limite superior de "until-revoked".</span><span class="sxs-lookup"><span data-stu-id="ffa47-384">You might want to preserve this 30-day policy for a specific service principal, but change the organization default policy to the upper limit of "until-revoked."</span></span>

    1.  <span data-ttu-id="ffa47-385">Para ver todas as entidades de serviço de sua organização, consulte o [Microsoft Graph](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/entity-and-complex-type-reference#serviceprincipal-entity).</span><span class="sxs-lookup"><span data-stu-id="ffa47-385">To see all your organization's service principals, you can query [Microsoft Graph](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/entity-and-complex-type-reference#serviceprincipal-entity).</span></span> <span data-ttu-id="ffa47-386">Ou, no [Graph Explorer do Azure AD](https://graphexplorer.cloudapp.net/), entre usando sua conta do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="ffa47-386">Or, in [Azure AD Graph Explorer](https://graphexplorer.cloudapp.net/), sign in by using your Azure AD account.</span></span>

    2.  <span data-ttu-id="ffa47-387">Quando você tiver a **ObjectId** de sua entidade de serviço, execute o seguinte comando:</span><span class="sxs-lookup"><span data-stu-id="ffa47-387">When you have the **ObjectId** of your service principal, run the following command:</span></span>

            ```PowerShell
            Add-AzureADServicePrincipalPolicy -Id <ObjectId of the ServicePrincipal> -RefObjectId <ObjectId of the Policy>
            ```
        
3. <span data-ttu-id="ffa47-388">Defina o sinalizador `IsOrganizationDefault` como false:</span><span class="sxs-lookup"><span data-stu-id="ffa47-388">Set the `IsOrganizationDefault` flag to false:</span></span>

    ```PowerShell
    Set-AzureADPolicy -Id <ObjectId of Policy> -DisplayName "ComplexPolicyScenario" -IsOrganizationDefault $false
    ```

4. <span data-ttu-id="ffa47-389">Crie uma nova política padrão de organização:</span><span class="sxs-lookup"><span data-stu-id="ffa47-389">Create a new organization default policy:</span></span>

    ```PowerShell
    New-AzureADPolicy -Definition @('{"TokenLifetimePolicy":{"Version":1,"MaxAgeSingleFactor":"until-revoked"}}') -DisplayName "ComplexPolicyScenarioTwo" -IsOrganizationDefault $true -Type "TokenLifetimePolicy"
    ```

    <span data-ttu-id="ffa47-390">Agora você tem a política original vinculada à entidade de serviço, e a nova política definida como a política padrão de organização.</span><span class="sxs-lookup"><span data-stu-id="ffa47-390">You now have the original policy linked to your service principal, and the new policy is set as your organization default policy.</span></span> <span data-ttu-id="ffa47-391">É importante lembrar que as políticas aplicadas a entidades de serviço têm prioridade sobre as políticas padrão de organização.</span><span class="sxs-lookup"><span data-stu-id="ffa47-391">It's important to remember that policies applied to service principals have priority over organization default policies.</span></span>

## <a name="cmdlet-reference"></a><span data-ttu-id="ffa47-392">Referência de cmdlet</span><span class="sxs-lookup"><span data-stu-id="ffa47-392">Cmdlet reference</span></span>

### <a name="manage-policies"></a><span data-ttu-id="ffa47-393">Gerenciar políticas</span><span class="sxs-lookup"><span data-stu-id="ffa47-393">Manage policies</span></span>

<span data-ttu-id="ffa47-394">Use estes cmdlets para gerenciar as políticas.</span><span class="sxs-lookup"><span data-stu-id="ffa47-394">You can use the following cmdlets to manage policies.</span></span>

#### <a name="new-azureadpolicy"></a><span data-ttu-id="ffa47-395">New-AzureADPolicy</span><span class="sxs-lookup"><span data-stu-id="ffa47-395">New-AzureADPolicy</span></span>

<span data-ttu-id="ffa47-396">Cria uma nova política.</span><span class="sxs-lookup"><span data-stu-id="ffa47-396">Creates a new policy.</span></span>

```PowerShell
New-AzureADPolicy -Definition <Array of Rules> -DisplayName <Name of Policy> -IsOrganizationDefault <boolean> -Type <Policy Type>
```

| <span data-ttu-id="ffa47-397">Parâmetros</span><span class="sxs-lookup"><span data-stu-id="ffa47-397">Parameters</span></span> | <span data-ttu-id="ffa47-398">Descrição</span><span class="sxs-lookup"><span data-stu-id="ffa47-398">Description</span></span> | <span data-ttu-id="ffa47-399">Exemplo</span><span class="sxs-lookup"><span data-stu-id="ffa47-399">Example</span></span> |
| --- | --- | --- |
| <code>&#8209;Definition</code> |<span data-ttu-id="ffa47-400">Matriz de JSON em representação textual que contém todas as regras da política.</span><span class="sxs-lookup"><span data-stu-id="ffa47-400">Array of stringified JSON that contains all the policy's rules.</span></span> | `-Definition @('{"TokenLifetimePolicy":{"Version":1,"MaxInactiveTime":"20:00:00"}}')` |
| <code>&#8209;DisplayName</code> |<span data-ttu-id="ffa47-401">Cadeia de caracteres do nome da política.</span><span class="sxs-lookup"><span data-stu-id="ffa47-401">String of the policy name.</span></span> |`-DisplayName "MyTokenPolicy"` |
| <code>&#8209;IsOrganizationDefault</code> |<span data-ttu-id="ffa47-402">Se for true, define a política como a política padrão da organização.</span><span class="sxs-lookup"><span data-stu-id="ffa47-402">If true, sets the policy as the organization's default policy.</span></span> <span data-ttu-id="ffa47-403">Se for false, não fará nada.</span><span class="sxs-lookup"><span data-stu-id="ffa47-403">If false, does nothing.</span></span> |`-IsOrganizationDefault $true` |
| <code>&#8209;Type</code> |<span data-ttu-id="ffa47-404">O tipo da política.</span><span class="sxs-lookup"><span data-stu-id="ffa47-404">Type of policy.</span></span> <span data-ttu-id="ffa47-405">Para os tempos de vida de token, sempre use "TokenLifetimePolicy".</span><span class="sxs-lookup"><span data-stu-id="ffa47-405">For token lifetimes, always use "TokenLifetimePolicy."</span></span> | `-Type "TokenLifetimePolicy"` |
| <span data-ttu-id="ffa47-406"><code>&#8209;AlternativeIdentifier</code> [Opcional]</span><span class="sxs-lookup"><span data-stu-id="ffa47-406"><code>&#8209;AlternativeIdentifier</code> [Optional]</span></span> |<span data-ttu-id="ffa47-407">Define uma ID alternativa para a política.</span><span class="sxs-lookup"><span data-stu-id="ffa47-407">Sets an alternative ID for the policy.</span></span> |`-AlternativeIdentifier "myAltId"` |

</br></br>

#### <a name="get-azureadpolicy"></a><span data-ttu-id="ffa47-408">Get-AzureADPolicy</span><span class="sxs-lookup"><span data-stu-id="ffa47-408">Get-AzureADPolicy</span></span>
<span data-ttu-id="ffa47-409">Obtém todas as políticas do Azure AD ou a política especificada.</span><span class="sxs-lookup"><span data-stu-id="ffa47-409">Gets all Azure AD policies or a specified policy.</span></span>

```PowerShell
Get-AzureADPolicy
```

| <span data-ttu-id="ffa47-410">parâmetros</span><span class="sxs-lookup"><span data-stu-id="ffa47-410">Parameters</span></span> | <span data-ttu-id="ffa47-411">Descrição</span><span class="sxs-lookup"><span data-stu-id="ffa47-411">Description</span></span> | <span data-ttu-id="ffa47-412">Exemplo</span><span class="sxs-lookup"><span data-stu-id="ffa47-412">Example</span></span> |
| --- | --- | --- |
| <span data-ttu-id="ffa47-413"><code>&#8209;Id</code> [Opcional]</span><span class="sxs-lookup"><span data-stu-id="ffa47-413"><code>&#8209;Id</code> [Optional]</span></span> |<span data-ttu-id="ffa47-414">**ObjectId (Id)** da política desejada.</span><span class="sxs-lookup"><span data-stu-id="ffa47-414">**ObjectId (Id)** of the policy you want.</span></span> |`-Id <ObjectId of Policy>` |

</br></br>

#### <a name="get-azureadpolicyappliedobject"></a><span data-ttu-id="ffa47-415">Get-AzureADPolicyAppliedObject</span><span class="sxs-lookup"><span data-stu-id="ffa47-415">Get-AzureADPolicyAppliedObject</span></span>
<span data-ttu-id="ffa47-416">Obtém todos os aplicativos e entidades de serviço vinculados a uma política.</span><span class="sxs-lookup"><span data-stu-id="ffa47-416">Gets all apps and service principals that are linked to a policy.</span></span>

```PowerShell
Get-AzureADPolicyAppliedObject -Id <ObjectId of Policy>
```

| <span data-ttu-id="ffa47-417">parâmetros</span><span class="sxs-lookup"><span data-stu-id="ffa47-417">Parameters</span></span> | <span data-ttu-id="ffa47-418">Descrição</span><span class="sxs-lookup"><span data-stu-id="ffa47-418">Description</span></span> | <span data-ttu-id="ffa47-419">Exemplo</span><span class="sxs-lookup"><span data-stu-id="ffa47-419">Example</span></span> |
| --- | --- | --- |
| <code>&#8209;Id</code> |<span data-ttu-id="ffa47-420">**ObjectId (Id)** da política desejada.</span><span class="sxs-lookup"><span data-stu-id="ffa47-420">**ObjectId (Id)** of the policy you want.</span></span> |`-Id <ObjectId of Policy>` |

</br></br>

#### <a name="set-azureadpolicy"></a><span data-ttu-id="ffa47-421">Set-AzureADPolicy</span><span class="sxs-lookup"><span data-stu-id="ffa47-421">Set-AzureADPolicy</span></span>
<span data-ttu-id="ffa47-422">Atualiza uma política existente.</span><span class="sxs-lookup"><span data-stu-id="ffa47-422">Updates an existing policy.</span></span>

```PowerShell
Set-AzureADPolicy -Id <ObjectId of Policy> -DisplayName <string>
```

| <span data-ttu-id="ffa47-423">parâmetros</span><span class="sxs-lookup"><span data-stu-id="ffa47-423">Parameters</span></span> | <span data-ttu-id="ffa47-424">Descrição</span><span class="sxs-lookup"><span data-stu-id="ffa47-424">Description</span></span> | <span data-ttu-id="ffa47-425">Exemplo</span><span class="sxs-lookup"><span data-stu-id="ffa47-425">Example</span></span> |
| --- | --- | --- |
| <code>&#8209;Id</code> |<span data-ttu-id="ffa47-426">**ObjectId (Id)** da política desejada.</span><span class="sxs-lookup"><span data-stu-id="ffa47-426">**ObjectId (Id)** of the policy you want.</span></span> |`-Id <ObjectId of Policy>` |
| <code>&#8209;DisplayName</code> |<span data-ttu-id="ffa47-427">Cadeia de caracteres do nome da política.</span><span class="sxs-lookup"><span data-stu-id="ffa47-427">String of the policy name.</span></span> |`-DisplayName "MyTokenPolicy"` |
| <span data-ttu-id="ffa47-428"><code>&#8209;Definition</code> [Opcional]</span><span class="sxs-lookup"><span data-stu-id="ffa47-428"><code>&#8209;Definition</code> [Optional]</span></span> |<span data-ttu-id="ffa47-429">Matriz de JSON em representação textual que contém todas as regras da política.</span><span class="sxs-lookup"><span data-stu-id="ffa47-429">Array of stringified JSON that contains all the policy's rules.</span></span> |`-Definition @('{"TokenLifetimePolicy":{"Version":1,"MaxInactiveTime":"20:00:00"}}')` |
| <span data-ttu-id="ffa47-430"><code>&#8209;IsOrganizationDefault</code> [Opcional]</span><span class="sxs-lookup"><span data-stu-id="ffa47-430"><code>&#8209;IsOrganizationDefault</code> [Optional]</span></span> |<span data-ttu-id="ffa47-431">Se for true, define a política como a política padrão da organização.</span><span class="sxs-lookup"><span data-stu-id="ffa47-431">If true, sets the policy as the organization's default policy.</span></span> <span data-ttu-id="ffa47-432">Se for false, não fará nada.</span><span class="sxs-lookup"><span data-stu-id="ffa47-432">If false, does nothing.</span></span> |`-IsOrganizationDefault $true` |
| <span data-ttu-id="ffa47-433"><code>&#8209;Type</code> [Opcional]</span><span class="sxs-lookup"><span data-stu-id="ffa47-433"><code>&#8209;Type</code> [Optional]</span></span> |<span data-ttu-id="ffa47-434">O tipo da política.</span><span class="sxs-lookup"><span data-stu-id="ffa47-434">Type of policy.</span></span> <span data-ttu-id="ffa47-435">Para os tempos de vida de token, sempre use "TokenLifetimePolicy".</span><span class="sxs-lookup"><span data-stu-id="ffa47-435">For token lifetimes, always use "TokenLifetimePolicy."</span></span> |`-Type "TokenLifetimePolicy"` |
| <span data-ttu-id="ffa47-436"><code>&#8209;AlternativeIdentifier</code> [Opcional]</span><span class="sxs-lookup"><span data-stu-id="ffa47-436"><code>&#8209;AlternativeIdentifier</code> [Optional]</span></span> |<span data-ttu-id="ffa47-437">Define uma ID alternativa para a política.</span><span class="sxs-lookup"><span data-stu-id="ffa47-437">Sets an alternative ID for the policy.</span></span> |`-AlternativeIdentifier "myAltId"` |

</br></br>

#### <a name="remove-azureadpolicy"></a><span data-ttu-id="ffa47-438">Remove-AzureADPolicy</span><span class="sxs-lookup"><span data-stu-id="ffa47-438">Remove-AzureADPolicy</span></span>
<span data-ttu-id="ffa47-439">Exclui a política especificada.</span><span class="sxs-lookup"><span data-stu-id="ffa47-439">Deletes the specified policy.</span></span>

```PowerShell
 Remove-AzureADPolicy -Id <ObjectId of Policy>
```

| <span data-ttu-id="ffa47-440">parâmetros</span><span class="sxs-lookup"><span data-stu-id="ffa47-440">Parameters</span></span> | <span data-ttu-id="ffa47-441">Descrição</span><span class="sxs-lookup"><span data-stu-id="ffa47-441">Description</span></span> | <span data-ttu-id="ffa47-442">Exemplo</span><span class="sxs-lookup"><span data-stu-id="ffa47-442">Example</span></span> |
| --- | --- | --- |
| <code>&#8209;Id</code> |<span data-ttu-id="ffa47-443">**ObjectId (Id)** da política desejada.</span><span class="sxs-lookup"><span data-stu-id="ffa47-443">**ObjectId (Id)** of the policy you want.</span></span> | `-Id <ObjectId of Policy>` |

</br></br>

### <a name="application-policies"></a><span data-ttu-id="ffa47-444">Políticas de aplicativo</span><span class="sxs-lookup"><span data-stu-id="ffa47-444">Application policies</span></span>
<span data-ttu-id="ffa47-445">Use os cmdlets a seguir para políticas de aplicativos.</span><span class="sxs-lookup"><span data-stu-id="ffa47-445">You can use the following cmdlets for application policies.</span></span></br></br>

#### <a name="add-azureadapplicationpolicy"></a><span data-ttu-id="ffa47-446">Add-AzureADApplicationPolicy</span><span class="sxs-lookup"><span data-stu-id="ffa47-446">Add-AzureADApplicationPolicy</span></span>
<span data-ttu-id="ffa47-447">Vincula a política especificada a um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ffa47-447">Links the specified policy to an application.</span></span>

```PowerShell
Add-AzureADApplicationPolicy -Id <ObjectId of Application> -RefObjectId <ObjectId of Policy>
```

| <span data-ttu-id="ffa47-448">parâmetros</span><span class="sxs-lookup"><span data-stu-id="ffa47-448">Parameters</span></span> | <span data-ttu-id="ffa47-449">Descrição</span><span class="sxs-lookup"><span data-stu-id="ffa47-449">Description</span></span> | <span data-ttu-id="ffa47-450">Exemplo</span><span class="sxs-lookup"><span data-stu-id="ffa47-450">Example</span></span> |
| --- | --- | --- |
| <code>&#8209;Id</code> |<span data-ttu-id="ffa47-451">**ObjectId (Id)** do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ffa47-451">**ObjectId (Id)** of the application.</span></span> | `-Id <ObjectId of Application>` |
| <code>&#8209;RefObjectId</code> |<span data-ttu-id="ffa47-452">**ObjectId** da política.</span><span class="sxs-lookup"><span data-stu-id="ffa47-452">**ObjectId** of the policy.</span></span> | `-RefObjectId <ObjectId of Policy>` |

</br></br>

#### <a name="get-azureadapplicationpolicy"></a><span data-ttu-id="ffa47-453">Get-AzureADApplicationPolicy</span><span class="sxs-lookup"><span data-stu-id="ffa47-453">Get-AzureADApplicationPolicy</span></span>
<span data-ttu-id="ffa47-454">Obtém a política atribuída a um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ffa47-454">Gets the policy that is assigned to an application.</span></span>

```PowerShell
Get-AzureADApplicationPolicy -Id <ObjectId of Application>
```

| <span data-ttu-id="ffa47-455">parâmetros</span><span class="sxs-lookup"><span data-stu-id="ffa47-455">Parameters</span></span> | <span data-ttu-id="ffa47-456">Descrição</span><span class="sxs-lookup"><span data-stu-id="ffa47-456">Description</span></span> | <span data-ttu-id="ffa47-457">Exemplo</span><span class="sxs-lookup"><span data-stu-id="ffa47-457">Example</span></span> |
| --- | --- | --- |
| <code>&#8209;Id</code> |<span data-ttu-id="ffa47-458">**ObjectId (Id)** do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ffa47-458">**ObjectId (Id)** of the application.</span></span> | `-Id <ObjectId of Application>` |

</br></br>

#### <a name="remove-azureadapplicationpolicy"></a><span data-ttu-id="ffa47-459">Remove-AzureADApplicationPolicy</span><span class="sxs-lookup"><span data-stu-id="ffa47-459">Remove-AzureADApplicationPolicy</span></span>
<span data-ttu-id="ffa47-460">Remove uma política de um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ffa47-460">Removes a policy from an application.</span></span>

```PowerShell
Remove-AzureADApplicationPolicy -Id <ObjectId of Application> -PolicyId <ObjectId of Policy>
```

| <span data-ttu-id="ffa47-461">parâmetros</span><span class="sxs-lookup"><span data-stu-id="ffa47-461">Parameters</span></span> | <span data-ttu-id="ffa47-462">Descrição</span><span class="sxs-lookup"><span data-stu-id="ffa47-462">Description</span></span> | <span data-ttu-id="ffa47-463">Exemplo</span><span class="sxs-lookup"><span data-stu-id="ffa47-463">Example</span></span> |
| --- | --- | --- |
| <code>&#8209;Id</code> |<span data-ttu-id="ffa47-464">**ObjectId (Id)** do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ffa47-464">**ObjectId (Id)** of the application.</span></span> | `-Id <ObjectId of Application>` |
| <code>&#8209;PolicyId</code> |<span data-ttu-id="ffa47-465">**ObjectId** da política.</span><span class="sxs-lookup"><span data-stu-id="ffa47-465">**ObjectId** of the policy.</span></span> | `-PolicyId <ObjectId of Policy>` |

</br></br>

### <a name="service-principal-policies"></a><span data-ttu-id="ffa47-466">Políticas de entidade de serviço</span><span class="sxs-lookup"><span data-stu-id="ffa47-466">Service principal policies</span></span>
<span data-ttu-id="ffa47-467">Use os cmdlets a seguir para políticas de entidade de serviço.</span><span class="sxs-lookup"><span data-stu-id="ffa47-467">You can use the following cmdlets for service principal policies.</span></span>

#### <a name="add-azureadserviceprincipalpolicy"></a><span data-ttu-id="ffa47-468">Add-AzureADServicePrincipalPolicy</span><span class="sxs-lookup"><span data-stu-id="ffa47-468">Add-AzureADServicePrincipalPolicy</span></span>
<span data-ttu-id="ffa47-469">Vincula a política especificada a uma entidade de serviço.</span><span class="sxs-lookup"><span data-stu-id="ffa47-469">Links the specified policy to a service principal.</span></span>

```PowerShell
Add-AzureADServicePrincipalPolicy -Id <ObjectId of ServicePrincipal> -RefObjectId <ObjectId of Policy>
```

| <span data-ttu-id="ffa47-470">parâmetros</span><span class="sxs-lookup"><span data-stu-id="ffa47-470">Parameters</span></span> | <span data-ttu-id="ffa47-471">Descrição</span><span class="sxs-lookup"><span data-stu-id="ffa47-471">Description</span></span> | <span data-ttu-id="ffa47-472">Exemplo</span><span class="sxs-lookup"><span data-stu-id="ffa47-472">Example</span></span> |
| --- | --- | --- |
| <code>&#8209;Id</code> |<span data-ttu-id="ffa47-473">**ObjectId (Id)** do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ffa47-473">**ObjectId (Id)** of the application.</span></span> | `-Id <ObjectId of Application>` |
| <code>&#8209;RefObjectId</code> |<span data-ttu-id="ffa47-474">**ObjectId** da política.</span><span class="sxs-lookup"><span data-stu-id="ffa47-474">**ObjectId** of the policy.</span></span> | `-RefObjectId <ObjectId of Policy>` |

</br></br>

#### <a name="get-azureadserviceprincipalpolicy"></a><span data-ttu-id="ffa47-475">Get-AzureADServicePrincipalPolicy</span><span class="sxs-lookup"><span data-stu-id="ffa47-475">Get-AzureADServicePrincipalPolicy</span></span>
<span data-ttu-id="ffa47-476">Obtém qualquer política vinculada à entidade de serviço especificada.</span><span class="sxs-lookup"><span data-stu-id="ffa47-476">Gets any policy linked to the specified service principal.</span></span>

```PowerShell
Get-AzureADServicePrincipalPolicy -Id <ObjectId of ServicePrincipal>
```

| <span data-ttu-id="ffa47-477">parâmetros</span><span class="sxs-lookup"><span data-stu-id="ffa47-477">Parameters</span></span> | <span data-ttu-id="ffa47-478">Descrição</span><span class="sxs-lookup"><span data-stu-id="ffa47-478">Description</span></span> | <span data-ttu-id="ffa47-479">Exemplo</span><span class="sxs-lookup"><span data-stu-id="ffa47-479">Example</span></span> |
| --- | --- | --- |
| <code>&#8209;Id</code> |<span data-ttu-id="ffa47-480">**ObjectId (Id)** do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ffa47-480">**ObjectId (Id)** of the application.</span></span> | `-Id <ObjectId of Application>` |

</br></br>

#### <a name="remove-azureadserviceprincipalpolicy"></a><span data-ttu-id="ffa47-481">Remove-AzureADServicePrincipalPolicy</span><span class="sxs-lookup"><span data-stu-id="ffa47-481">Remove-AzureADServicePrincipalPolicy</span></span>
<span data-ttu-id="ffa47-482">Remove a política da entidade da entidade de serviço especificada.</span><span class="sxs-lookup"><span data-stu-id="ffa47-482">Removes the policy from the specified service principal.</span></span>

```PowerShell
Remove-AzureADServicePrincipalPolicy -Id <ObjectId of ServicePrincipal>  -PolicyId <ObjectId of Policy>
```

| <span data-ttu-id="ffa47-483">parâmetros</span><span class="sxs-lookup"><span data-stu-id="ffa47-483">Parameters</span></span> | <span data-ttu-id="ffa47-484">Descrição</span><span class="sxs-lookup"><span data-stu-id="ffa47-484">Description</span></span> | <span data-ttu-id="ffa47-485">Exemplo</span><span class="sxs-lookup"><span data-stu-id="ffa47-485">Example</span></span> |
| --- | --- | --- |
| <code>&#8209;Id</code> |<span data-ttu-id="ffa47-486">**ObjectId (Id)** do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ffa47-486">**ObjectId (Id)** of the application.</span></span> | `-Id <ObjectId of Application>` |
| <code>&#8209;PolicyId</code> |<span data-ttu-id="ffa47-487">**ObjectId** da política.</span><span class="sxs-lookup"><span data-stu-id="ffa47-487">**ObjectId** of the policy.</span></span> | `-PolicyId <ObjectId of Policy>` |
