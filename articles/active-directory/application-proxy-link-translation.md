---
title: Converter links e URLs do Proxy de Aplicativo do Azure AD | Microsoft Docs
description: "Cobre as noções básicas sobre os conectores do Proxy de Aplicativo do Azure AD."
services: active-directory
documentationcenter: 
author: kgremban
manager: femila
ms.assetid: 
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/10/2017
ms.author: kgremban
ms.reviewer: harshja
ms.custom: it-pro
ms.openlocfilehash: 57218346d236b376d2227e0ffaea6c6dd5ebe855
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/29/2017
---
# <a name="redirect-hardcoded-links-for-apps-published-with-azure-ad-application-proxy"></a><span data-ttu-id="3f950-103">Redirecione os links inseridos no código para aplicativos publicados com o Proxy de Aplicativo do Azure AD</span><span class="sxs-lookup"><span data-stu-id="3f950-103">Redirect hardcoded links for apps published with Azure AD Application Proxy</span></span>

<span data-ttu-id="3f950-104">O Proxy de Aplicativo do Azure AD disponibiliza seus aplicativos locais para usuários remotos ou que estão em seus próprios dispositivos.</span><span class="sxs-lookup"><span data-stu-id="3f950-104">Azure AD Application Proxy makes your on-premises apps available to users who are remote or on their own devices.</span></span> <span data-ttu-id="3f950-105">No entanto, alguns aplicativos foram desenvolvidos com links locais inseridos no HTML.</span><span class="sxs-lookup"><span data-stu-id="3f950-105">Some apps, however, were developed with local links embedded in the HTML.</span></span> <span data-ttu-id="3f950-106">Esses links não funcionam corretamente quando o aplicativo é usado remotamente.</span><span class="sxs-lookup"><span data-stu-id="3f950-106">These links don't work correctly when the app is used remotely.</span></span> <span data-ttu-id="3f950-107">Quando você faz com que vários aplicativos locais apontem uns para os outros, os usuários esperam os links para continuar trabalhando quando não estiverem no escritório.</span><span class="sxs-lookup"><span data-stu-id="3f950-107">When you have several on-premises applications point to each other, your users expect the links to keep working when they're not at the office.</span></span> 

<span data-ttu-id="3f950-108">A melhor maneira de garantir que os links funcionem corretamente dentro e fora de sua rede corporativa é configurar as URLs externas de seus aplicativos para que sejam as mesmas que as URLs internas.</span><span class="sxs-lookup"><span data-stu-id="3f950-108">The best way to make sure that links work the same both inside and outside of your corporate network is to configure the external URLs of your apps to be the same as their internal URLs.</span></span> <span data-ttu-id="3f950-109">Use [domínios personalizados](active-directory-application-proxy-custom-domains.md) para configurar suas URLs externas para que tenham o nome de domínio corporativo em vez do domínio padrão do proxy de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="3f950-109">Use [custom domains](active-directory-application-proxy-custom-domains.md) to configure your external URLs to have your corporate domain name instead of the default application proxy domain.</span></span>

<span data-ttu-id="3f950-110">Se não é possível usar domínios personalizados em seu locatário, o recurso de conversão de link do Proxy de Aplicativo mantém seus links funcionando, independentemente de onde os usuários estão.</span><span class="sxs-lookup"><span data-stu-id="3f950-110">If you can't use custom domains in your tenant, then the link translation feature of Application Proxy keeps your links working no matter where your users are.</span></span> <span data-ttu-id="3f950-111">Quando você tem aplicativos que apontam diretamente para portas ou pontos de extremidade internos, pode mapear essas URLs internas para as URLs de Proxy de Aplicativo externas publicadas.</span><span class="sxs-lookup"><span data-stu-id="3f950-111">When you have apps that point directly to internal endpoints or ports, you can map these internal URLs to the published external Application Proxy URLs.</span></span> <span data-ttu-id="3f950-112">Quando a conversão de link está habilitada, o Proxy de Aplicativo pesquisa em HTML, CSS e seleciona marcas de JavaScript para os links internos publicados.</span><span class="sxs-lookup"><span data-stu-id="3f950-112">When link translation is enabled, and Application Proxy searches through HTML, CSS, and select JavaScript tags for published internal links.</span></span> <span data-ttu-id="3f950-113">Então, o serviço do Proxy de Aplicativo as converte para que os usuários obtenham uma experiência sem interrupções.</span><span class="sxs-lookup"><span data-stu-id="3f950-113">Then the Application Proxy service translates them so that your users get an uninterrupted experience.</span></span>

>[!NOTE]
><span data-ttu-id="3f950-114">O recurso de conversão de link é para locatários que, por qualquer motivo, não podem usar domínios personalizados para ter as mesmas URLs internas e externas para seus aplicativos.</span><span class="sxs-lookup"><span data-stu-id="3f950-114">The link translation feature is for tenants that, for whatever reason, can't use custom domains to have the same internal and external URLs for their apps.</span></span> <span data-ttu-id="3f950-115">Antes de habilitar esse recurso, verifique se [domínios personalizados no Proxy de Aplicativo do Azure AD](active-directory-application-proxy-custom-domains.md) podem funcionar para você.</span><span class="sxs-lookup"><span data-stu-id="3f950-115">Before you enable this feature, see if [custom domains in Azure AD Application Proxy](active-directory-application-proxy-custom-domains.md) can work for you.</span></span>
>
><span data-ttu-id="3f950-116">Ou, se o aplicativo que você precisa configurar com a conversão de link é o SharePoint, consulte [Configurar mapeamentos alternativos de acesso para o SharePoint 2013](https://technet.microsoft.com/library/cc263208.aspx) a fim de conhecer outra abordagem de mapeamento de links.</span><span class="sxs-lookup"><span data-stu-id="3f950-116">Or, if the application you need to configure with link translation is SharePoint, see [Configure alternate access mappings for SharePoint 2013](https://technet.microsoft.com/library/cc263208.aspx) for another approach to mapping links.</span></span>

## <a name="how-link-translation-works"></a><span data-ttu-id="3f950-117">Como a translação de link funciona</span><span class="sxs-lookup"><span data-stu-id="3f950-117">How link translation works</span></span>

<span data-ttu-id="3f950-118">Após a autenticação, quando o servidor proxy transmite os dados de aplicativo para o usuário, o Proxy de Aplicativo examina o aplicativo em relação a links inseridos no código e os substitui por suas respectivas URLs externas publicadas.</span><span class="sxs-lookup"><span data-stu-id="3f950-118">After authentication, when the proxy server passes the application data to the user, Application Proxy scans the application for hardcoded links and replaces them with their respective, published external URLs.</span></span>

<span data-ttu-id="3f950-119">O Proxy de Aplicativo pressupõe que os aplicativos estejam codificados em UTF-8.</span><span class="sxs-lookup"><span data-stu-id="3f950-119">Application Proxy assumes that applications are encoded in UTF-8.</span></span> <span data-ttu-id="3f950-120">Se esse não for o caso, especifique o tipo de codificação em um cabeçalho de resposta HTTP, como `Content-Type:text/html;charset=utf-8`.</span><span class="sxs-lookup"><span data-stu-id="3f950-120">If that's not the case, specify the encoding type in an http response header, like `Content-Type:text/html;charset=utf-8`.</span></span>

### <a name="which-links-are-affected"></a><span data-ttu-id="3f950-121">Quais links são afetados?</span><span class="sxs-lookup"><span data-stu-id="3f950-121">Which links are affected?</span></span>

<span data-ttu-id="3f950-122">O recurso de translação de link procura apenas por links que estão nas marcas de código no corpo do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="3f950-122">The link translation feature only looks for links that are in code tags in the body of an app.</span></span> <span data-ttu-id="3f950-123">O Proxy de Aplicativo tem um recurso separado para converter cookies ou URLs em cabeçalhos.</span><span class="sxs-lookup"><span data-stu-id="3f950-123">Application Proxy has a separate feature for translating cookies or URLs in headers.</span></span> 

<span data-ttu-id="3f950-124">Há dois tipos comuns de links internos em aplicativos locais:</span><span class="sxs-lookup"><span data-stu-id="3f950-124">There are two common types of internal links in on-premises applications:</span></span>

- <span data-ttu-id="3f950-125">**Links internos relativos** que apontam para um recurso compartilhado em uma estrutura de arquivo local como `/claims/claims.html`.</span><span class="sxs-lookup"><span data-stu-id="3f950-125">**Relative internal links** that point to a shared resource in a local file structure like `/claims/claims.html`.</span></span> <span data-ttu-id="3f950-126">Esses links funcionam automaticamente em aplicativos que são publicados por meio do Proxy de Aplicativo e continuam funcionando com ou sem a conversão de link.</span><span class="sxs-lookup"><span data-stu-id="3f950-126">These links automatically work in apps that are published through Application Proxy, and continue to work with or without link translation.</span></span> 
- <span data-ttu-id="3f950-127">**Links internos inseridos no código** para outros aplicativos de locais como `http://expenses` ou arquivos publicados como `http://expenses/logo.jpg`.</span><span class="sxs-lookup"><span data-stu-id="3f950-127">**Hardcoded internal links** to other on-premises apps like `http://expenses` or published files like `http://expenses/logo.jpg`.</span></span> <span data-ttu-id="3f950-128">O recurso de translação de link funciona em links internos inseridos no código e os altera para apontar para as URLs externas de que os usuários remotos precisam para avançar.</span><span class="sxs-lookup"><span data-stu-id="3f950-128">The link translation feature works on hardcoded internal links, and changes them to point to the external URLs that remote users need to go through.</span></span>

### <a name="how-do-apps-link-to-each-other"></a><span data-ttu-id="3f950-129">Como aplicativos são vinculados entre si?</span><span class="sxs-lookup"><span data-stu-id="3f950-129">How do apps link to each other?</span></span>

<span data-ttu-id="3f950-130">A translação de link está habilitada para cada aplicativo, para que você tenha controle sobre a experiência do usuário no nível por aplicativo.</span><span class="sxs-lookup"><span data-stu-id="3f950-130">Link translation is enabled for each application, so that you have control over the user experience at the per-app level.</span></span> <span data-ttu-id="3f950-131">Ative a translação de link para um aplicativo quando desejar que os links *desse* aplicativo sejam convertidos, não os links *para* ele.</span><span class="sxs-lookup"><span data-stu-id="3f950-131">Turn on link translation for an app when you want the links *from* that app to be translated, not links *to* that app.</span></span> 

<span data-ttu-id="3f950-132">Por exemplo, suponha que você tenha três aplicativos publicados por meio do Proxy de Aplicativo que estão vinculados entre si: Benefícios, Despesas e Viagem.</span><span class="sxs-lookup"><span data-stu-id="3f950-132">For example, suppose that you have three applications published through Application Proxy that all link to each other: Benefits, Expenses, and Travel.</span></span> <span data-ttu-id="3f950-133">Há um quarto aplicativo, Comentários, que não está publicado pelo Proxy de Aplicativo.</span><span class="sxs-lookup"><span data-stu-id="3f950-133">There's a fourth app, Feedback, that isn't published through Application Proxy.</span></span>

<span data-ttu-id="3f950-134">Quando você habilita a translação de link para o aplicativo Benefícios, os links para Despesas e Viagem são redirecionados para as URLs externas para esses aplicativos, mas o link para Comentários não é redirecionado porque não há nenhuma URL externa.</span><span class="sxs-lookup"><span data-stu-id="3f950-134">When you enable link translation for the Benefits app, the links to Expenses and Travel are redirected to the external URLs for those apps, but the link to Feedback is not redirected because there is no external URL.</span></span> <span data-ttu-id="3f950-135">Os links de Despesas e Viagem para Benefícios não funcionam, pois a translação de link não foi habilitada para esses dois aplicativos.</span><span class="sxs-lookup"><span data-stu-id="3f950-135">Links from Expenses and Travel back to Benefits don't work, because link translation has not been enabled for those two apps.</span></span>

![Os links de Benefícios para outros aplicativos quando a translação de link está habilitada](./media/application-proxy-link-translation/one_app.png)

### <a name="which-links-arent-translated"></a><span data-ttu-id="3f950-137">Quais links não são convertidos?</span><span class="sxs-lookup"><span data-stu-id="3f950-137">Which links aren't translated?</span></span>

<span data-ttu-id="3f950-138">Para melhorar o desempenho e a segurança, alguns links não são convertidos:</span><span class="sxs-lookup"><span data-stu-id="3f950-138">To improve performance and security, some links aren't translated:</span></span>

- <span data-ttu-id="3f950-139">Links que não estão dentro de marcas de código.</span><span class="sxs-lookup"><span data-stu-id="3f950-139">Links not inside of code tags.</span></span> 
- <span data-ttu-id="3f950-140">Links que não estão em HTML, CSS ou JavaScript.</span><span class="sxs-lookup"><span data-stu-id="3f950-140">Links not in HTML, CSS, or JavaScript.</span></span> 
- <span data-ttu-id="3f950-141">Links internos abertos de outros programas.</span><span class="sxs-lookup"><span data-stu-id="3f950-141">Internal links opened from other programs.</span></span> <span data-ttu-id="3f950-142">Links enviados por email, mensagem instantânea ou incluídos em outros documentos não serão convertidos.</span><span class="sxs-lookup"><span data-stu-id="3f950-142">Links sent through email or instant message, or included in other documents, won't be translated.</span></span> <span data-ttu-id="3f950-143">Os usuários precisam saber ir para a URL externa.</span><span class="sxs-lookup"><span data-stu-id="3f950-143">The users need to know to go to the external URL.</span></span>

<span data-ttu-id="3f950-144">Se você precisar dar suporte a um desses dois cenários, use as mesmas URLs internas e externas em vez da conversão de link.</span><span class="sxs-lookup"><span data-stu-id="3f950-144">If you need to support one of these two scenarios, use the same internal and external URLs instead of link translation.</span></span>  

## <a name="enable-link-translation"></a><span data-ttu-id="3f950-145">Habilitar a translação de link</span><span class="sxs-lookup"><span data-stu-id="3f950-145">Enable link translation</span></span>

<span data-ttu-id="3f950-146">Começar a trabalhar com a translação de link é tão fácil quanto clicar em um botão:</span><span class="sxs-lookup"><span data-stu-id="3f950-146">Getting started with link translation is as easy as clicking a button:</span></span>

1. <span data-ttu-id="3f950-147">Entre no [Portal do Azure](https://portal.azure.com) como administrador.</span><span class="sxs-lookup"><span data-stu-id="3f950-147">Sign in to the [Azure portal](https://portal.azure.com) as an administrator.</span></span>
2. <span data-ttu-id="3f950-148">Vá para **Azure Active Directory** > **Aplicativos empresariais** > **Todos os aplicativos** > selecione o aplicativo que deseja gerenciar > **Proxy de aplicativo**.</span><span class="sxs-lookup"><span data-stu-id="3f950-148">Go to **Azure Active Directory** > **Enterprise applications** > **All applications** > select the app you want to manage > **Application proxy**.</span></span>
3. <span data-ttu-id="3f950-149">Mude **Converter URLs no corpo do aplicativo** para **Sim**.</span><span class="sxs-lookup"><span data-stu-id="3f950-149">Turn **Translate URLs in application body** to **Yes**.</span></span>

   ![Selecione Sim para converter URLs no corpo do aplicativo](./media/application-proxy-link-translation/select_yes.png)<span data-ttu-id="3f950-151">.</span><span class="sxs-lookup"><span data-stu-id="3f950-151">.</span></span>
4. <span data-ttu-id="3f950-152">Selecione **Salvar** para salvar suas alterações.</span><span class="sxs-lookup"><span data-stu-id="3f950-152">Select **Save** to apply your changes.</span></span>

<span data-ttu-id="3f950-153">Agora, quando os usuários acessarem esse aplicativo, o proxy examinará automaticamente para verificar a existência de URLs internas que foram publicadas por meio do Proxy de Aplicativo no locatário.</span><span class="sxs-lookup"><span data-stu-id="3f950-153">Now, when your users access this application, the proxy will automatically scan for internal URLs that have been published through Application Proxy on your tenant.</span></span>

## <a name="send-feedback"></a><span data-ttu-id="3f950-154">Enviar comentários</span><span class="sxs-lookup"><span data-stu-id="3f950-154">Send feedback</span></span>

<span data-ttu-id="3f950-155">Queremos sua ajuda para fazer esse recurso funcionar para todos os seus aplicativos.</span><span class="sxs-lookup"><span data-stu-id="3f950-155">We want your help to make this feature work for all your apps.</span></span> <span data-ttu-id="3f950-156">Pesquisamos mais de 30 marcas em HTML e CSS e estamos considerando para quais casos do JavaScript dar suporte.</span><span class="sxs-lookup"><span data-stu-id="3f950-156">We search over 30 tags in HTML and CSS, and are considering which JavaScript cases to support.</span></span> <span data-ttu-id="3f950-157">Se você tiver um exemplo de links gerados que não estão sendo convertidos, envie um trecho de código para [Comentários de Proxy de Aplicativo](mailto:aadapfeedback@microsoft.com).</span><span class="sxs-lookup"><span data-stu-id="3f950-157">If you have an example of generated links that aren't being translated, send a code snippet to [Application Proxy Feedback](mailto:aadapfeedback@microsoft.com).</span></span> 

## <a name="next-steps"></a><span data-ttu-id="3f950-158">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="3f950-158">Next steps</span></span>
<span data-ttu-id="3f950-159">[Usar domínios personalizados com o Proxy de Aplicativo do Azure AD](active-directory-application-proxy-custom-domains.md) para ter a mesma URL interna e externa</span><span class="sxs-lookup"><span data-stu-id="3f950-159">[Use custom domains with Azure AD Application Proxy](active-directory-application-proxy-custom-domains.md) to have the same internal and external URL</span></span>

[<span data-ttu-id="3f950-160">Configurar mapeamentos alternativos de acesso para o SharePoint 2013</span><span class="sxs-lookup"><span data-stu-id="3f950-160">Configure alternate access mappings for SharePoint 2013</span></span>](https://technet.microsoft.com/library/cc263208.aspx)
