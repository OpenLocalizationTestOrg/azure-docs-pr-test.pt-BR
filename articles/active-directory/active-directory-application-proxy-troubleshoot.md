---
title: Solucionar problemas de Proxy de Aplicativo | Microsoft Docs
description: Aborda como solucionar erros no Proxy de Aplicativo do Azure do AD.
services: active-directory
documentationcenter: 
author: kgremban
manager: femila
ms.assetid: 970caafb-40b8-483c-bb46-c8b032a4fb74
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/21/2017
ms.author: kgremban
ms.reviewer: harshja
ms.custom: H1Hack27Feb2017; it-pro
ms.openlocfilehash: 3ef74c8d5d5b75eb2bca4e6c994f4718b5226db8
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/03/2017
---
# <a name="troubleshoot-application-proxy-problems-and-error-messages"></a><span data-ttu-id="9cb8e-103">Solucionar problemas e mensagens de erro do Proxy do Aplicativo</span><span class="sxs-lookup"><span data-stu-id="9cb8e-103">Troubleshoot Application Proxy problems and error messages</span></span>
<span data-ttu-id="9cb8e-104">Se ocorrerem erros ao acessar um aplicativo publicado ou em aplicativos de publicação, verifique as seguintes opções para ver se o Proxy de Aplicativo do AD do Microsoft Azure está funcionando corretamente:</span><span class="sxs-lookup"><span data-stu-id="9cb8e-104">If errors occur in accessing a published application or in publishing applications, check the following options to see if Microsoft Azure AD Application Proxy is working correctly:</span></span>

* <span data-ttu-id="9cb8e-105">Abra o console de serviços do Windows e verifique se o serviço de **Conector de Proxy de Aplicativo do Microsoft AAD** está habilitado e em execução.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-105">Open the Windows Services console and verify that the **Microsoft AAD Application Proxy Connector** service is enabled and running.</span></span> <span data-ttu-id="9cb8e-106">Também convém examinar a página de propriedades do serviço de Proxy de Aplicativo, conforme mostrado na imagem a seguir: </span><span class="sxs-lookup"><span data-stu-id="9cb8e-106">You may also want to look at the Application Proxy service properties page, as shown in the following image:</span></span>  
  <span data-ttu-id="9cb8e-107">![Captura de tela da janela Propriedades do Conector de Proxy de Aplicativo do Microsoft AAD](./media/active-directory-application-proxy-troubleshoot/connectorproperties.png)</span><span class="sxs-lookup"><span data-stu-id="9cb8e-107">![Microsoft AAD Application Proxy Connector Properties window screenshot](./media/active-directory-application-proxy-troubleshoot/connectorproperties.png)</span></span>
* <span data-ttu-id="9cb8e-108">Abra o Visualizador de Eventos e procure eventos de conector do Proxy de Aplicativo em **Logs de Aplicativos e Serviços**  > **Microsoft** > **AadApplicationProxy** > **Connector** > **Admin**.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-108">Open Event Viewer and look for Application Proxy connector events in **Applications and Services Logs** > **Microsoft** > **AadApplicationProxy** > **Connector** > **Admin**.</span></span>
* <span data-ttu-id="9cb8e-109">Se necessário, logs mais detalhados estão disponíveis via [ativação dos logs de sessão do conector do Proxy de Aplicativo](application-proxy-understand-connectors.md#under-the-hood).</span><span class="sxs-lookup"><span data-stu-id="9cb8e-109">If needed, more detailed logs are available by [turning on the Application Proxy connector session logs](application-proxy-understand-connectors.md#under-the-hood).</span></span>

<span data-ttu-id="9cb8e-110">Para obter mais informações sobre a ferramenta de Solução de problemas do Azure AD, consulte [Ferramenta da solução de problemas para validar os pré-requisitos de rede do conector](https://blogs.technet.microsoft.com/applicationproxyblog/2015/09/03/troubleshooting-tool-to-validate-connector-networking-prerequisites).</span><span class="sxs-lookup"><span data-stu-id="9cb8e-110">For more information about the Azure AD Troubleshooting tool, see [Troubleshooting tool to validate connector networking prerequisites](https://blogs.technet.microsoft.com/applicationproxyblog/2015/09/03/troubleshooting-tool-to-validate-connector-networking-prerequisites).</span></span>

## <a name="the-page-is-not-rendered-correctly"></a><span data-ttu-id="9cb8e-111">A página não é renderizada corretamente</span><span class="sxs-lookup"><span data-stu-id="9cb8e-111">The page is not rendered correctly</span></span>
<span data-ttu-id="9cb8e-112">Você pode ter problemas com a renderização do aplicativo ou de funcionamento incorreto sem receber mensagens específicas de erro.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-112">You may have problems with your application rendering or functioning incorrectly without receiving specific error messages.</span></span> <span data-ttu-id="9cb8e-113">Isso pode ocorrer se você publicou o caminho do artigo, mas o aplicativo requer o conteúdo que existe fora desse caminho.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-113">This can occur if you published the article path, but the application requires content that exists outside that path.</span></span>

<span data-ttu-id="9cb8e-114">Por exemplo, se você publicar o caminho https://yourapp/app, mas o aplicativo chamar imagens em https://yourapp/media, elas não serão renderizadas.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-114">For example, if you publish the path https://yourapp/app but the application calls images in https://yourapp/media, they won't be rendered.</span></span> <span data-ttu-id="9cb8e-115">Publique o aplicativo usando o caminho de nível mais alto de que você precisa para incluir todo o conteúdo relevante.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-115">Make sure that you publish the application using the highest level path you need to include all relevant content.</span></span> <span data-ttu-id="9cb8e-116">Neste exemplo, seria http://yourapp/.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-116">In this example, it would be http://yourapp/.</span></span>

<span data-ttu-id="9cb8e-117">Se você alterar o caminho para incluir o conteúdo referenciado, mas ainda precisar que os usuários cheguem a um link mais profundo, confira a postagem de blog [Setting the right link for Application Proxy applications in the Azure AD access panel and Office 365 app launcher (Definindo o link certo para aplicativos do Proxy de Aplicativo no painel de acesso do Azure AD e no inicializador de aplicativos do Office 365)](https://blogs.technet.microsoft.com/applicationproxyblog/2016/04/06/setting-the-right-link-for-application-proxy-applications-in-the-azure-ad-access-panel-and-office-365-app-launcher/).</span><span class="sxs-lookup"><span data-stu-id="9cb8e-117">If you change your path to include referenced content, but still need users to land on a deeper link in the path, see the blog post [Setting the right link for Application Proxy applications in the Azure AD access panel and Office 365 app launcher](https://blogs.technet.microsoft.com/applicationproxyblog/2016/04/06/setting-the-right-link-for-application-proxy-applications-in-the-azure-ad-access-panel-and-office-365-app-launcher/).</span></span>

## <a name="connector-errors"></a><span data-ttu-id="9cb8e-118">Erros de conector</span><span class="sxs-lookup"><span data-stu-id="9cb8e-118">Connector errors</span></span>

<span data-ttu-id="9cb8e-119">Use a [Ferramenta de Teste de Portas do Conector de Proxy de Aplicativo do Azure AD](https://aadap-portcheck.connectorporttest.msappproxy.net/) para verificar se o conector pode alcançar o serviço Proxy de Aplicativo.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-119">Use the [Azure AD Application Proxy Connector Ports Test Tool](https://aadap-portcheck.connectorporttest.msappproxy.net/) to verify that your connector can reach the Application Proxy service.</span></span> <span data-ttu-id="9cb8e-120">No mínimo, verifique se a região EUA Central e a região mais próxima de você tem todas as marcas de seleção verdes.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-120">At a minimum, make sure that the Central US region and the region closest to you have all green checkmarks.</span></span> <span data-ttu-id="9cb8e-121">Além disso, um número maior de marcas de seleção verdes significa maior resiliência.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-121">Beyond that, more green checkmarks means greater resiliency.</span></span> 

<span data-ttu-id="9cb8e-122">Se o registro falhar durante a instalação do assistente do Conector, há duas maneiras de exibir o motivo da falha.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-122">If registration fails during the Connector wizard installation, there are two ways to view the reason for the failure.</span></span> <span data-ttu-id="9cb8e-123">Examine o log de eventos em **Logs de Aplicativos e Serviços\Microsoft\AadApplicationProxy\Connector\Admin** ou execute o seguinte comando do Windows PowerShell:</span><span class="sxs-lookup"><span data-stu-id="9cb8e-123">Either look in the event log under **Applications and Services Logs\Microsoft\AadApplicationProxy\Connector\Admin**, or run the following Windows PowerShell command:</span></span>

    Get-EventLog application –source “Microsoft AAD Application Proxy Connector” –EntryType “Error” –Newest 1

<span data-ttu-id="9cb8e-124">Depois de encontrar o erro do Conector no log de eventos, use esta tabela de erros comuns para resolver o problema:</span><span class="sxs-lookup"><span data-stu-id="9cb8e-124">Once you find the Connector error from the event log, use this table of common errors to resolve the problem:</span></span>

| <span data-ttu-id="9cb8e-125">Erro</span><span class="sxs-lookup"><span data-stu-id="9cb8e-125">Error</span></span> | <span data-ttu-id="9cb8e-126">Etapas recomendadas</span><span class="sxs-lookup"><span data-stu-id="9cb8e-126">Recommended steps</span></span> |
| ----- | ----------------- |
| <span data-ttu-id="9cb8e-127">Falha no registro de conector: verifique se você habilitou o Proxy de Aplicativo no Portal de Gerenciamento do Azure e se inseriu o nome de usuário e a senha do Active Directory corretamente.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-127">Connector registration failed: Make sure you enabled Application Proxy in the Azure Management Portal and that you entered your Active Directory user name and password correctly.</span></span> <span data-ttu-id="9cb8e-128">Erro: "ocorreram um ou mais erros”.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-128">Error: 'One or more errors occurred.'</span></span> | <span data-ttu-id="9cb8e-129">Se você fechou a janela de registro sem entrar no Azure AD, execute o assistente do Conector novamente e registrar o Conector.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-129">If you closed the registration window without signing in to Azure AD, run the Connector wizard again and register the Connector.</span></span> <br><br> <span data-ttu-id="9cb8e-130">Se a janela de registro abre e fecha imediatamente sem permitir que você faça logon, você provavelmente obterá este erro.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-130">If the registration window opens and then immediately closes without allowing you to log in, you will probably get this error.</span></span> <span data-ttu-id="9cb8e-131">Esse erro ocorre quando há algum erro de rede em seu sistema.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-131">This error occurs when there is a networking error on your system.</span></span> <span data-ttu-id="9cb8e-132">Certifique-se de que é possível conectar-se de um navegador a um site público e que as portas estejam abertas como especificado nos [pré-requisitos do Proxy de Aplicativo](active-directory-application-proxy-enable.md).</span><span class="sxs-lookup"><span data-stu-id="9cb8e-132">Make sure that it is possible to connect from a browser to a public website and that the ports are open as specified in [Application Proxy prerequisites](active-directory-application-proxy-enable.md).</span></span> |
| <span data-ttu-id="9cb8e-133">Apagar erro é apresentado na janela de registro.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-133">Clear error is presented in the registration window.</span></span> <span data-ttu-id="9cb8e-134">Não é possível continuar</span><span class="sxs-lookup"><span data-stu-id="9cb8e-134">Cannot proceed</span></span> | <span data-ttu-id="9cb8e-135">Caso esse erro seja exibido e a janela fechar, você inseriu o nome de usuário e a senha incorretos.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-135">If you see this error and then the window closes, you entered the wrong username or password.</span></span> <span data-ttu-id="9cb8e-136">Tente novamente.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-136">Try again.</span></span> |
| <span data-ttu-id="9cb8e-137">Falha no registro de conector: verifique se você habilitou o Proxy de Aplicativo no Portal de Gerenciamento do Azure e se inseriu o nome de usuário e a senha do Active Directory corretamente.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-137">Connector registration failed: Make sure you enabled Application Proxy in the Azure Management Portal and that you entered your Active Directory user name and password correctly.</span></span> <span data-ttu-id="9cb8e-138">Erro: ‘AADSTS50059: nenhuma informação de identificação de organização foi encontrada na solicitação nem está implícita em quaisquer credenciais fornecidas; a pesquisa por URI de entidade de serviço falhou.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-138">Error: 'AADSTS50059: No tenant-identifying information found in either the request or implied by any provided credentials and search by service principal URI has failed.</span></span> | <span data-ttu-id="9cb8e-139">Você está tentando entrar usando uma Conta da Microsoft e não de um domínio que faz parte da ID da organização do diretório que você está tentando acessar.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-139">You are trying to sign in using a Microsoft Account and not a domain that is part of the organization ID of the directory you are trying to access.</span></span> <span data-ttu-id="9cb8e-140">Certifique-se de que o administrador faça parte do mesmo nome de domínio que o domínio do locatário; por exemplo, se o domínio do AD do Azure for contoso.com, o do administrador deverá ser admin@contoso.com.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-140">Make sure that the admin is part of the same domain name as the tenant domain, for example, if the Azure AD domain is contoso.com, the admin should be admin@contoso.com.</span></span> |
| <span data-ttu-id="9cb8e-141">Falha ao recuperar a política de execução atual para executar scripts do PowerShell.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-141">Failed to retrieve the current execution policy for running PowerShell scripts.</span></span> | <span data-ttu-id="9cb8e-142">Se a instalação do Conector falhar, verifique se a política de execução do PowerShell não está desabilitada.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-142">If the Connector installation fails, check to make sure that PowerShell execution policy is not disabled.</span></span> <br><br><span data-ttu-id="9cb8e-143">1. Abra o Editor de Política de Grupo.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-143">1. Open the Group Policy Editor.</span></span><br><span data-ttu-id="9cb8e-144">2. Vá para **Configuração do Computador** > **Modelos Administrativos** > **Componentes do Windows** > **Windows PowerShell** e clique duas vezes em **Ativar Execução de Scripts**.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-144">2. Go to **Computer Configuration** > **Administrative Templates** > **Windows Components** > **Windows PowerShell** and double-click **Turn on Script Execution**.</span></span><br><span data-ttu-id="9cb8e-145">3. A política de execução pode ser definida como **Não Configurada** ou **Habilitada**.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-145">3. The execution policy can be set to either **Not Configured** or **Enabled**.</span></span> <span data-ttu-id="9cb8e-146">Se estiver definido como **Habilitado**, verifique se a Política de Execução em Opções está definida como **Permitir scripts locais e scripts remotos assinados** ou como **Permitir todos os scripts**.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-146">If set to **Enabled**, make sure that under Options, the Execution Policy is set to either **Allow local scripts and remote signed scripts** or to **Allow all scripts**.</span></span> |
| <span data-ttu-id="9cb8e-147">Falha ao baixar a configuração do Conector.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-147">Connector failed to download the configuration.</span></span> | <span data-ttu-id="9cb8e-148">O certificado de cliente do Conector, que é usado para autenticação, expirou.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-148">The Connector’s client certificate, which is used for authentication, expired.</span></span> <span data-ttu-id="9cb8e-149">Isso também pode ocorrer se você tiver o Conector instalado atrás de um proxy.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-149">This may also occur if you have the Connector installed behind a proxy.</span></span> <span data-ttu-id="9cb8e-150">Nesse caso, o Conector não poderá acessar a Internet e não será capaz de fornecer aplicativos a usuários remotos.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-150">In this case, the Connector cannot access the Internet and will not be able to provide applications to remote users.</span></span> <span data-ttu-id="9cb8e-151">Renove a confiança manualmente usando o cmdlet `Register-AppProxyConnector` do Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-151">Renew trust manually using the `Register-AppProxyConnector` cmdlet in Windows PowerShell.</span></span> <span data-ttu-id="9cb8e-152">Se seu Conector estiver atrás de um proxy, será necessário conceder acesso à Internet para as contas "serviços de rede" e "sistema local" do Conector.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-152">If your Connector is behind a proxy, it is necessary to grant Internet access to the Connector accounts “network services” and “local system.”</span></span> <span data-ttu-id="9cb8e-153">Isso pode ser feito concedendo acesso ao Proxy ou configurando-os para ignorar o proxy.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-153">This can be accomplished either by granting them access to the Proxy or by setting them to bypass the proxy.</span></span> |
| <span data-ttu-id="9cb8e-154">Falha no registro do conector: verifique se você é um Administrador Global do seu Active Directory para registrar o conector.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-154">Connector registration failed: Make sure you are a Global Administrator of your Active Directory to register the Connector.</span></span> <span data-ttu-id="9cb8e-155">Erro: “a solicitação de registro foi negada”.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-155">Error: 'The registration request was denied.'</span></span> | <span data-ttu-id="9cb8e-156">O alias com o qual você está tentando fazer logon não é um administrador neste domínio.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-156">The alias you're trying to log in with isn't an admin on this domain.</span></span> <span data-ttu-id="9cb8e-157">O Conector sempre é instalado para o diretório que possui o domínio do usuário.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-157">Your Connector is always installed for the directory that owns the user’s domain.</span></span> <span data-ttu-id="9cb8e-158">Certifique-se de que a conta do administrador com a qual você está tentando se conectar tenha as permissões globais para o locatário do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-158">Make sure that the admin account you are trying to sign in with has global permissions to the Azure AD tenant.</span></span> |

## <a name="kerberos-errors"></a><span data-ttu-id="9cb8e-159">Erros de Kerberos</span><span class="sxs-lookup"><span data-stu-id="9cb8e-159">Kerberos errors</span></span>

<span data-ttu-id="9cb8e-160">Esta tabela cobre os erros mais comuns resultantes da instalação e configuração do Kerberos e inclui sugestões para resolução.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-160">This table covers the more common errors that come from Kerberos setup and configuration, and includes suggestions for resolution.</span></span>

| <span data-ttu-id="9cb8e-161">Erro</span><span class="sxs-lookup"><span data-stu-id="9cb8e-161">Error</span></span> | <span data-ttu-id="9cb8e-162">Etapas recomendadas</span><span class="sxs-lookup"><span data-stu-id="9cb8e-162">Recommended steps</span></span> |
| ----- | ----------------- |
| <span data-ttu-id="9cb8e-163">Falha ao recuperar a política de execução atual para executar scripts do PowerShell.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-163">Failed to retrieve the current execution policy for running PowerShell scripts.</span></span> | <span data-ttu-id="9cb8e-164">Se a instalação do Conector falhar, verifique se a política de execução do PowerShell não está desabilitada.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-164">If the Connector installation fails, check to make sure that PowerShell execution policy is not disabled.</span></span><br><br><span data-ttu-id="9cb8e-165">1. Abra o Editor de Política de Grupo.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-165">1. Open the Group Policy Editor.</span></span><br><span data-ttu-id="9cb8e-166">2. Vá para **Configuração do Computador** > **Modelos Administrativos** > **Componentes do Windows** > **Windows PowerShell** e clique duas vezes em **Ativar Execução de Scripts**.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-166">2. Go to **Computer Configuration** > **Administrative Templates** > **Windows Components** > **Windows PowerShell** and double-click **Turn on Script Execution**.</span></span><br><span data-ttu-id="9cb8e-167">3. A política de execução pode ser definida como **Não Configurada** ou **Habilitada**.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-167">3. The execution policy can be set to either **Not Configured** or **Enabled**.</span></span> <span data-ttu-id="9cb8e-168">Se estiver definido como **Habilitado**, verifique se a Política de Execução em Opções está definida como **Permitir scripts locais e scripts remotos assinados** ou como **Permitir todos os scripts**.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-168">If set to **Enabled**, make sure that under Options, the Execution Policy is set to either **Allow local scripts and remote signed scripts** or to **Allow all scripts**.</span></span> |
| <span data-ttu-id="9cb8e-169">12008 - O Azure AD excedeu o número máximo de tentativas de autenticação Kerberos permitidas para o servidor back-end.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-169">12008 - Azure AD exceeded the maximum number of permitted Kerberos authentication attempts to the backend server.</span></span> | <span data-ttu-id="9cb8e-170">Esse erro pode indicar uma configuração incorreta entre o Azure AD e o servidor de aplicativos back-end ou um problema na configuração de data e hora nos dois computadores.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-170">This error may indicate incorrect configuration between Azure AD and the backend application server, or a problem in time and date configuration on both machines.</span></span> <span data-ttu-id="9cb8e-171">O servidor back-end recusou o tíquete Kerberos criado pelo AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-171">The backend server declined the Kerberos ticket created by Azure AD.</span></span> <span data-ttu-id="9cb8e-172">Verifique se o Azure AD e o servidor de aplicativos de back-end estão configurados corretamente.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-172">Verify that Azure AD and the backend application server are configured correctly.</span></span> <span data-ttu-id="9cb8e-173">Verifique se a configuração de data e hora no AD do Azure e no servidor de aplicativos back-end estão sincronizadas.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-173">Make sure that the time and date configuration on the Azure AD and the backend application server are synchronized.</span></span> |
| <span data-ttu-id="9cb8e-174">13016 - O AD do Azure não pode recuperar um tíquete Kerberos em nome do usuário porque não há nenhum UPN no token de borda ou no cookie de acesso.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-174">13016 - Azure AD cannot retrieve a Kerberos ticket on behalf of the user because there is no UPN in the edge token or in the access cookie.</span></span> | <span data-ttu-id="9cb8e-175">Há um problema com a configuração de STS.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-175">There is a problem with the STS configuration.</span></span> <span data-ttu-id="9cb8e-176">Corrija a configuração de declaração UPN no STS.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-176">Fix the UPN claim configuration in the STS.</span></span> |
| <span data-ttu-id="9cb8e-177">13019 - O AD do Azure não pode recuperar um tíquete Kerberos em nome do usuário devido ao seguinte erro geral da API.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-177">13019 - Azure AD cannot retrieve a Kerberos ticket on behalf of the user because of the following general API error.</span></span> | <span data-ttu-id="9cb8e-178">Esse evento pode indicar uma configuração incorreta entre o AD do Azure e o servidor de controlador de domínio ou um problema na configuração de data e hora nos dois computadores.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-178">This event may indicate incorrect configuration between Azure AD and the domain controller server, or a problem in time and date configuration on both machines.</span></span> <span data-ttu-id="9cb8e-179">O controlador de domínio recusou o tíquete Kerberos criado pelo AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-179">The domain controller declined the Kerberos ticket created by Azure AD.</span></span> <span data-ttu-id="9cb8e-180">Verifique se o Azure AD e do servidor de aplicativos de back-end estão configurados corretamente, especialmente a configuração de SPN.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-180">Verify that Azure AD and the backend application server are configured correctly, especially the SPN configuration.</span></span> <span data-ttu-id="9cb8e-181">Verifique se que o AD do Azure é o domínio ingressado no mesmo domínio que o controlador de domínio para garantir que este estabeleça a relação de confiança com o AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-181">Make sure the Azure AD is domain joined to the same domain as the domain controller to ensure that the domain controller establishes trust with Azure AD.</span></span> <span data-ttu-id="9cb8e-182">Verifique se a configuração de data e hora no AD do Azure e no controlador de domínio estão sincronizadas.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-182">Make sure that the time and date configuration on the Azure AD and the domain controller are synchronized.</span></span> |
| <span data-ttu-id="9cb8e-183">13020 - O AD do Azure não pode recuperar um tíquete Kerberos em nome do usuário porque o SPN do servidor de back-end não está definido.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-183">13020 - Azure AD cannot retrieve a Kerberos ticket on behalf of the user because the backend server SPN is not defined.</span></span> | <span data-ttu-id="9cb8e-184">Esse evento pode indicar uma configuração incorreta entre o AD do Azure e o servidor de controlador de domínio ou um problema na configuração de data e hora nos dois computadores.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-184">This event may indicate incorrect configuration between Azure AD and the domain controller server, or a problem in time and date configuration on both machines.</span></span> <span data-ttu-id="9cb8e-185">O controlador de domínio recusou o tíquete Kerberos criado pelo AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-185">The domain controller declined the Kerberos ticket created by Azure AD.</span></span> <span data-ttu-id="9cb8e-186">Verifique se o Azure AD e do servidor de aplicativos de back-end estão configurados corretamente, especialmente a configuração de SPN.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-186">Verify that Azure AD and the backend application server are configured correctly, especially the SPN configuration.</span></span> <span data-ttu-id="9cb8e-187">Verifique se que o AD do Azure é o domínio ingressado no mesmo domínio que o controlador de domínio para garantir que este estabeleça a relação de confiança com o AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-187">Make sure the Azure AD is domain joined to the same domain as the domain controller to ensure that the domain controller establishes trust with Azure AD.</span></span> <span data-ttu-id="9cb8e-188">Verifique se a configuração de data e hora no AD do Azure e no controlador de domínio estão sincronizadas.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-188">Make sure that the time and date configuration on the Azure AD and the domain controller are synchronized.</span></span> |
| <span data-ttu-id="9cb8e-189">13022 - O AD do Azure não pode autenticar o usuário porque o servidor de back-end responde às tentativas de autenticação Kerberos com um erro HTTP 401.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-189">13022 - Azure AD cannot authenticate the user because the backend server responds to Kerberos authentication attempts with an HTTP 401 error.</span></span> | <span data-ttu-id="9cb8e-190">Esse evento pode indicar uma configuração incorreta entre o AD do Azure e o servidor de aplicativos de back-end ou um problema na configuração de data e hora nos dois computadores.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-190">This event may indicate incorrect configuration between Azure AD and the backend application server, or a problem in time and date configuration on both machines.</span></span> <span data-ttu-id="9cb8e-191">O servidor back-end recusou o tíquete Kerberos criado pelo AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-191">The backend server declined the Kerberos ticket created by Azure AD.</span></span> <span data-ttu-id="9cb8e-192">Verifique se o Azure AD e o servidor de aplicativos de back-end estão configurados corretamente.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-192">Verify that Azure AD and the backend application server are configured correctly.</span></span> <span data-ttu-id="9cb8e-193">Verifique se a configuração de data e hora no AD do Azure e no servidor de aplicativos back-end estão sincronizadas.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-193">Make sure that the time and date configuration on the Azure AD and the backend application server are synchronized.</span></span> |

## <a name="end-user-errors"></a><span data-ttu-id="9cb8e-194">Erros de usuário final</span><span class="sxs-lookup"><span data-stu-id="9cb8e-194">End-user errors</span></span>

<span data-ttu-id="9cb8e-195">Esta lista cobre os erros que os usuários finais podem encontrar quando tentam acessar o aplicativo e falham.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-195">This list covers errors that your end users might encounter when they try to access the app and fail.</span></span> 

| <span data-ttu-id="9cb8e-196">Erro</span><span class="sxs-lookup"><span data-stu-id="9cb8e-196">Error</span></span> | <span data-ttu-id="9cb8e-197">Etapas recomendadas</span><span class="sxs-lookup"><span data-stu-id="9cb8e-197">Recommended steps</span></span> |
| ----- | ----------------- |
| <span data-ttu-id="9cb8e-198">O site não pode exibir a página.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-198">The website cannot display the page.</span></span> | <span data-ttu-id="9cb8e-199">O usuário poderá receber esse erro ao tentar acessar o aplicativo publicado se o aplicativo for um aplicativo IWA.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-199">Your user may get this error when trying to access the app you published if the application is an IWA application.</span></span> <span data-ttu-id="9cb8e-200">O SPN definido para esse aplicativo pode estar incorreto.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-200">The defined SPN for this application may be incorrect.</span></span> <span data-ttu-id="9cb8e-201">Para aplicativos IWA, certifique-se de que o SPN configurado para este aplicativo esteja correto.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-201">For IWA apps, make sure that the SPN configured for this application is correct.</span></span> |
| <span data-ttu-id="9cb8e-202">O site não pode exibir a página.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-202">The website cannot display the page.</span></span> | <span data-ttu-id="9cb8e-203">O usuário poderá ver esse erro ao tentar acessar o aplicativo publicado se o aplicativo for um aplicativo OWA.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-203">Your user may get this error when trying to access the app you published if the application is an OWA application.</span></span> <span data-ttu-id="9cb8e-204">Isso pode ser causado por um dos seguintes motivos: </span><span class="sxs-lookup"><span data-stu-id="9cb8e-204">This could be caused by one of the following:</span></span><br><li><span data-ttu-id="9cb8e-205">O SPN definido para este aplicativo está incorreto.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-205">The defined SPN for this application is incorrect.</span></span> <span data-ttu-id="9cb8e-206">Certifique-se de que o SPN configurado para este aplicativo esteja correto.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-206">Make sure that the SPN configured for this application is correct.</span></span></li><li><span data-ttu-id="9cb8e-207">O usuário que tentou acessar o aplicativo está usando uma conta da Microsoft em vez da conta corporativa apropriada para entrar, ou o usuário é um usuário convidado.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-207">The user who tried to access the application is using a Microsoft account rather than the proper corporate account to sign in, or the user is a guest user.</span></span> <span data-ttu-id="9cb8e-208">Verifique se o usuário faz logon usando sua conta corporativa correspondente ao domínio do aplicativo publicado.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-208">Make sure the user signs in using their corporate account that matches the domain of the published application.</span></span> <span data-ttu-id="9cb8e-209">Convidados e usuários de Conta da Microsoft não podem acessar aplicativos IWA.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-209">Microsoft Account users and guest cannot access IWA applications.</span></span></li><li><span data-ttu-id="9cb8e-210">O usuário que tentou acessar o aplicativo não está definido corretamente para esse aplicativo no lado do local.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-210">The user who tried to access the application is not properly defined for this application on the on-prem side.</span></span> <span data-ttu-id="9cb8e-211">Certifique-se de que esse usuário tenha as permissões apropriadas, conforme definido para este aplicativo de back-end no computador local.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-211">Make sure that this user has the proper permissions as defined for this backend application on the on-prem machine.</span></span> |
| <span data-ttu-id="9cb8e-212">Não foi possível acessar este aplicativo corporativo.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-212">This corporate app can’t be accessed.</span></span> <span data-ttu-id="9cb8e-213">Você não está autorizado a acessar este aplicativo.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-213">You are not authorized to access this application.</span></span> <span data-ttu-id="9cb8e-214">Falha na autorização.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-214">Authorization failed.</span></span> <span data-ttu-id="9cb8e-215">Certifique-se de atribuir o acesso a este aplicativo ao usuário.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-215">Make sure to assign the user with access to this application.</span></span> | <span data-ttu-id="9cb8e-216">Os usuários podem receber esse erro ao tentar acessar o aplicativo publicado se eles usarem contas da Microsoft no lugar da respectiva conta corporativa para se conectar.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-216">Your users may get this error when trying to access the app you published if they use Microsoft accounts instead of their corporate account to sign in.</span></span> <span data-ttu-id="9cb8e-217">Os usuários convidados também podem receber esse erro.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-217">Guest users may also get this error.</span></span> <span data-ttu-id="9cb8e-218">Convidados e usuários de Conta da Microsoft não podem acessar aplicativos IWA.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-218">Microsoft Account users and guests cannot access IWA applications.</span></span> <span data-ttu-id="9cb8e-219">Verifique se o usuário faz logon usando sua conta corporativa correspondente ao domínio do aplicativo publicado.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-219">Make sure the user signs in using their corporate account that matches the domain of the published application.</span></span><br><br><span data-ttu-id="9cb8e-220">Você pode não ter atribuído o usuário para esse aplicativo.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-220">You may not have assigned the user for this application.</span></span> <span data-ttu-id="9cb8e-221">Vá para a guia **Aplicativo** e, em **Usuários e Grupos**, atribua esse usuário ou grupo de usuários a esse aplicativo.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-221">Go to the **Application** tab, and under **Users and Groups**, assign this user or user group to this application.</span></span> |
| <span data-ttu-id="9cb8e-222">Não foi possível acessar esse aplicativo corporativo no momento.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-222">This corporate app can’t be accessed right now.</span></span> <span data-ttu-id="9cb8e-223">Tente novamente mais tarde... O conector atingiu o tempo limite.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-223">Please try again later…The connector timed out.</span></span> | <span data-ttu-id="9cb8e-224">Os usuários poderão receber esse erro ao tentar acessar o aplicativo publicado se eles não tiverem sido definidos corretamente para esse aplicativo no lado local.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-224">Your users may get this error when trying to access the app you published if they are not properly defined for this application on the on-prem side.</span></span> <span data-ttu-id="9cb8e-225">Verifique se os usuários têm as permissões adequadas, conforme definido para esse aplicativo de back-end no computador local.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-225">Make sure that your users have the proper permissions as defined for this backend application on the on-prem machine.</span></span> |
| <span data-ttu-id="9cb8e-226">Não foi possível acessar este aplicativo corporativo.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-226">This corporate app can’t be accessed.</span></span> <span data-ttu-id="9cb8e-227">Você não está autorizado a acessar este aplicativo.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-227">You are not authorized to access this application.</span></span> <span data-ttu-id="9cb8e-228">Falha na autorização.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-228">Authorization failed.</span></span> <span data-ttu-id="9cb8e-229">Certifique-se de que o usuário tenha licença para Azure Active Directory Premium ou Basic.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-229">Make sure that the user has a license for Azure Active Directory Premium or Basic.</span></span> | <span data-ttu-id="9cb8e-230">Os usuários poderão receber esse erro ao tentar acessar o aplicativo que você publicou se eles não tiverem sido explicitamente atribuídos a uma licença Premium/Basic pelo administrador do assinante.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-230">Your users may get this error when trying to access the app you published if they weren't explicitly assigned with a Premium/Basic license by the subscriber’s administrator.</span></span> <span data-ttu-id="9cb8e-231">Acesse a guia **Licenças** do Active Directory do assinante e certifique-se de que esse usuário ou grupo tenha uma licença Premium ou Basic atribuída.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-231">Go to the subscriber’s Active Directory **Licenses** tab and make sure that this user or user group is assigned a Premium or Basic license.</span></span> |

## <a name="my-error-wasnt-listed-here"></a><span data-ttu-id="9cb8e-232">Meu erro não estava listado aqui</span><span class="sxs-lookup"><span data-stu-id="9cb8e-232">My error wasn't listed here</span></span>

<span data-ttu-id="9cb8e-233">Se você encontrar um erro ou problema com o Proxy de Aplicativo do Azure AD que não está listado neste guia de solução de problemas, conte-nos.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-233">If you encounter an error or problem with Azure AD Application Proxy that isn't listed in this troubleshooting guide, we'd like to hear about it.</span></span> <span data-ttu-id="9cb8e-234">Envie um email para nossa [equipe de comentários](mailto:aadapfeedback@microsoft.com) com os detalhes do erro encontrado.</span><span class="sxs-lookup"><span data-stu-id="9cb8e-234">Send an email to our [feedback team](mailto:aadapfeedback@microsoft.com) with the details of the error you encountered.</span></span>

## <a name="see-also"></a><span data-ttu-id="9cb8e-235">Consulte também</span><span class="sxs-lookup"><span data-stu-id="9cb8e-235">See also</span></span>
* [<span data-ttu-id="9cb8e-236">Habilitar o Proxy de Aplicativo para o Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="9cb8e-236">Enable Application Proxy for Azure Active Directory</span></span>](active-directory-application-proxy-enable.md)
* [<span data-ttu-id="9cb8e-237">Publique aplicativos com proxy de aplicativo</span><span class="sxs-lookup"><span data-stu-id="9cb8e-237">Publish applications with Application Proxy</span></span>](active-directory-application-proxy-publish.md)
* [<span data-ttu-id="9cb8e-238">Habilitar logon único</span><span class="sxs-lookup"><span data-stu-id="9cb8e-238">Enable single sign-on</span></span>](active-directory-application-proxy-sso-using-kcd.md)
* [<span data-ttu-id="9cb8e-239">Habilitar o acesso condicional</span><span class="sxs-lookup"><span data-stu-id="9cb8e-239">Enable conditional access</span></span>](active-directory-application-proxy-conditional-access.md)


<!--Image references-->
[1]: ./media/active-directory-application-proxy-troubleshoot/connectorproperties.png
[2]: ./media/active-directory-application-proxy-troubleshoot/sessionlog.png
