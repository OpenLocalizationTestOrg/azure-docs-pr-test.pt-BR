---
title: "Problema na configuração do provisionamento do usuário para um aplicativo de galeria do Azure AD | Microsoft Docs"
description: "Como solucionar problemas comuns enfrentados ao configurar provisionamento do usuário para um aplicativo já listado na Galeria de aplicativos do Azure AD"
services: active-directory
documentationcenter: 
author: ajamess
manager: femila
ms.assetid: 
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/11/2017
ms.author: asteen
ms.openlocfilehash: 44e344095352f2bc6b27e389fc8be2cdf3e368d8
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/03/2017
---
# <a name="problem-configuring-user-provisioning-to-an-azure-ad-gallery-application"></a><span data-ttu-id="5fa3f-103">Problema na configuração do provisionamento do usuário para um aplicativo de galeria do Azure AD</span><span class="sxs-lookup"><span data-stu-id="5fa3f-103">Problem configuring user provisioning to an Azure AD Gallery application</span></span>

<span data-ttu-id="5fa3f-104">Configurando [provisionamento automático de usuário](https://docs.microsoft.com/azure/active-directory/active-directory-saas-app-provisioning) para um aplicativo (onde houver suporte), requer que as instruções específicas ser seguidas para preparar o aplicativo para o provisionamento automático.</span><span class="sxs-lookup"><span data-stu-id="5fa3f-104">Configuring [automatic user provisioning](https://docs.microsoft.com/azure/active-directory/active-directory-saas-app-provisioning) for an app (where supported), requires that specific instructions be followed to prepare the application for automatic provisioning.</span></span> <span data-ttu-id="5fa3f-105">Em seguida, você pode usar o portal do Azure para configurar o serviço de provisionamento para sincronizar contas de usuário ao aplicativo.</span><span class="sxs-lookup"><span data-stu-id="5fa3f-105">Then you can use the Azure portal to configure the provisioning service to synchronize user accounts to the application.</span></span>

<span data-ttu-id="5fa3f-106">Você sempre deve começar encontrando o tutorial de instalação específica de configuração de provisionamento para seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="5fa3f-106">You should always start by finding the setup tutorial specific to setting up provisioning for your application.</span></span> <span data-ttu-id="5fa3f-107">Siga essas etapas para configurar o aplicativo e o Azure AD para criar a conexão de provisionamento.</span><span class="sxs-lookup"><span data-stu-id="5fa3f-107">Then follow those steps to configure both the app and Azure AD to create the provisioning connection.</span></span> <span data-ttu-id="5fa3f-108">Uma lista de tutoriais de aplicativos podem ser encontrados em [lista de tutoriais sobre como integrar aplicativos SaaS com o Azure Active Directory](https://docs.microsoft.com/azure/active-directory/active-directory-saas-tutorial-list).</span><span class="sxs-lookup"><span data-stu-id="5fa3f-108">A list of app tutorials can be found at [List of Tutorials on How to Integrate SaaS Apps with Azure Active Directory](https://docs.microsoft.com/azure/active-directory/active-directory-saas-tutorial-list).</span></span>

## <a name="how-to-see-if-provisioning-is-working"></a><span data-ttu-id="5fa3f-109">Como saber se o provisionamento está funcionando</span><span class="sxs-lookup"><span data-stu-id="5fa3f-109">How to see if provisioning is working</span></span> 

<span data-ttu-id="5fa3f-110">Depois que o serviço estiver configurado, a maioria das informações sobre a operação do serviço podem ser obtidas de dois lugares:</span><span class="sxs-lookup"><span data-stu-id="5fa3f-110">Once the service is configured, most insights into the operation of the service can be drawn from two places:</span></span>

-   <span data-ttu-id="5fa3f-111">**Logs de auditoria** – os logs de auditoria do provisionamento registram todas as operações executadas pelo serviço de provisionamento, incluindo consultas ao Azure AD para usuários que estão no escopo para provisionamento.</span><span class="sxs-lookup"><span data-stu-id="5fa3f-111">**Audit logs** – The provisioning audit logs record all the operations performed by the provisioning service, including querying Azure AD for assigned users that are in scope for provisioning.</span></span> <span data-ttu-id="5fa3f-112">O aplicativo de destino para a existência desses usuários, comparando os objetos de usuário entre o sistema de consulta.</span><span class="sxs-lookup"><span data-stu-id="5fa3f-112">Query the target app for the existence of those users, comparing the user objects between the system.</span></span> <span data-ttu-id="5fa3f-113">Em seguida, adicione, atualize ou desabilite a conta de usuário no sistema de destino com base na comparação.</span><span class="sxs-lookup"><span data-stu-id="5fa3f-113">Then add, update, or disable the user account in the target system based on the comparison.</span></span> <span data-ttu-id="5fa3f-114">Os logs de auditoria de provisionamento podem ser acessados no portal do Azure, na guia **Azure Active Directory &gt; Aplicativos Empresariais &gt; \[Nome do Aplicativo\] &gt; Logs de auditoria**.</span><span class="sxs-lookup"><span data-stu-id="5fa3f-114">The provisioning audit logs can be accessed in the Azure portal, in the **Azure Active Directory &gt; Enterprise Apps &gt; \[Application Name\] &gt; Audit Logs** tab.</span></span> <span data-ttu-id="5fa3f-115">Filtre os logs na categoria de **provisionamento de conta**, para ver apenas os eventos de provisionamento para aquele aplicativo.</span><span class="sxs-lookup"><span data-stu-id="5fa3f-115">Filter the logs on the **Account Provisioning** category to only see the provisioning events for that app.</span></span>

-   <span data-ttu-id="5fa3f-116">**Provisionamento de status –** um resumo do último provisionamento executado para um determinado aplicativo pode ser visto na seção **Azure Active Directory &gt; Aplicativos Empresariais &gt; \[Nome do Aplicativo\] &gt;Provisionamento** na parte inferior da tela sob as configurações de serviço.</span><span class="sxs-lookup"><span data-stu-id="5fa3f-116">**Provisioning status –** A summary of the last provisioning run for a given app can be seen in the **Azure Active Directory &gt; Enterprise Apps &gt; \[Application Name\] &gt;Provisioning** section, at the bottom of the screen under the service settings.</span></span> <span data-ttu-id="5fa3f-117">Esta seção resume quantos usuários (e/ou grupos) estão sendo sincronizados no momento entre os dois sistemas, e se houve erros.</span><span class="sxs-lookup"><span data-stu-id="5fa3f-117">This section summarizes how many users (and/or groups) are currently being synchronized between the two systems, and if there are any errors.</span></span> <span data-ttu-id="5fa3f-118">Detalhes do erro estão nos logs de auditoria.</span><span class="sxs-lookup"><span data-stu-id="5fa3f-118">Error details be in the audit logs.</span></span> <span data-ttu-id="5fa3f-119">Observe que o status de provisionamento não seja preenchido até que uma sincronização inicial completa entre o Azure AD foi concluída e o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="5fa3f-119">Note that the provisioning status not be populated until one full initial synchronization has been completed between Azure AD and the app.</span></span>

## <a name="general-problem-areas-with-provisioning-to-consider"></a><span data-ttu-id="5fa3f-120">Áreas de problemas gerais com o provisionamento a considerar</span><span class="sxs-lookup"><span data-stu-id="5fa3f-120">General problem areas with provisioning to consider</span></span>

<span data-ttu-id="5fa3f-121">Abaixo está uma lista das áreas de problema geral que você poderá analisar se você tiver uma ideia de onde começar.</span><span class="sxs-lookup"><span data-stu-id="5fa3f-121">Below is a list of the general problem areas that you can drill into if you have an idea of where to start.</span></span>

* [<span data-ttu-id="5fa3f-122">Serviço de provisionamento não aparece ao iniciar</span><span class="sxs-lookup"><span data-stu-id="5fa3f-122">Provisioning service does not appear to start</span></span>](#provisioning-service-does-not-appear-to-start)
* [<span data-ttu-id="5fa3f-123">Não é possível salvar a configuração devido a credenciais de aplicativo não estarem funcionando</span><span class="sxs-lookup"><span data-stu-id="5fa3f-123">Can’t save configuration due to app credentials not working</span></span>](#can’t-save-configuration-due-to-app-credentials-not-working)
* [<span data-ttu-id="5fa3f-124">Logs de auditoria informa quais usuários são ignorados e não provisionados, mesmo que eles sejam atribuídos</span><span class="sxs-lookup"><span data-stu-id="5fa3f-124">Audit logs say users are “skipped” and not provisioned, even though they are assigned</span></span>](#audit-logs-say-users-are-skipped-and-not-provisioned-even-though-they-are-assigned)

## <a name="provisioning-service-does-not-appear-to-start"></a><span data-ttu-id="5fa3f-125">Serviço de provisionamento não aparece ao iniciar</span><span class="sxs-lookup"><span data-stu-id="5fa3f-125">Provisioning service does not appear to start</span></span>

<span data-ttu-id="5fa3f-126">Se você definir o **Status de provisionamento** como **Ligado** na seção **Azure Active Directory &gt; Aplicativos Empresariais &gt; \[Nome do Aplicativo\] &gt;Provisionamento** do portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="5fa3f-126">If you set the **Provisioning Status** to be **On** in the **Azure Active Directory &gt; Enterprise Apps &gt; \[Application Name\] &gt;Provisioning** section of the Azure portal.</span></span> <span data-ttu-id="5fa3f-127">No entanto, nenhum outro detalhe de status é mostrado nessa página depois recarregamentos subsequentes.</span><span class="sxs-lookup"><span data-stu-id="5fa3f-127">However no other status details are shown on that page after subsequent reloads.</span></span> <span data-ttu-id="5fa3f-128">É provável que o serviço está em execução, mas não concluiu uma sincronização inicial ainda.</span><span class="sxs-lookup"><span data-stu-id="5fa3f-128">It is likely that the service is running but has not completed an initial synchronization yet.</span></span> <span data-ttu-id="5fa3f-129">Verifique os **logs de auditoria** descritos acima para determinar quais operações o serviço está executando, e se existem erros.</span><span class="sxs-lookup"><span data-stu-id="5fa3f-129">Check the **Audit logs** described above to determine what operations the service is performing, and if there are any errors.</span></span>

>[!NOTE]
><span data-ttu-id="5fa3f-130">Uma sincronização inicial entre o Azure AD e um aplicativo pode levar de 20 minutos até várias horas, dependendo do tamanho do diretório do Azure AD e o número de usuários no escopo para provisionamento.</span><span class="sxs-lookup"><span data-stu-id="5fa3f-130">An initial sync can take anywhere from 20 minutes to several hours, depending on the size of the Azure AD directory and the number of users in scope for provisioning.</span></span> <span data-ttu-id="5fa3f-131">Sincronizações subsequentes após a sincronização inicial são mais rápidas, como o serviço de provisionamento armazena as marcas d'água que representam o estado dos dois sistemas após a sincronização inicial, melhorando o desempenho de sincronizações subsequentes.</span><span class="sxs-lookup"><span data-stu-id="5fa3f-131">Subsequent syncs after the initial sync be faster, as the provisioning service stores watermarks that represent the state of both systems after the initial sync, improving performance of subsequent syncs.</span></span>
>
>

## <a name="cant-save-configuration-due-to-app-credentials-not-working"></a><span data-ttu-id="5fa3f-132">Não é possível salvar a configuração devido a credenciais de aplicativo não estarem funcionando</span><span class="sxs-lookup"><span data-stu-id="5fa3f-132">Can’t save configuration due to app credentials not working</span></span>

<span data-ttu-id="5fa3f-133">Para o provisionamento funcionar, Azure AD requer credenciais válidas que permitem a conexão com uma API fornecida pelo aplicativo de gerenciamento de usuário.</span><span class="sxs-lookup"><span data-stu-id="5fa3f-133">In order for provisioning to work, Azure AD requires valid credentials that allow it to connect to a user management API provided by that app.</span></span> <span data-ttu-id="5fa3f-134">Se essas credenciais não funcionam, ou você não souber o que são, examine o tutorial para configurar esse aplicativo, descrito anteriormente.</span><span class="sxs-lookup"><span data-stu-id="5fa3f-134">If these credentials do not work, or you don’t know wat they are, review the tutorial for setting up this app, described previously.</span></span>

## <a name="audit-logs-say-users-are-skipped-and-not-provisioned-even-though-they-are-assigned"></a><span data-ttu-id="5fa3f-135">Logs de auditoria informa quais usuários são ignorados e não provisionados, mesmo que eles sejam atribuídos</span><span class="sxs-lookup"><span data-stu-id="5fa3f-135">Audit logs say users are skipped and not provisioned even though they are assigned</span></span>

<span data-ttu-id="5fa3f-136">Quando um usuário aparece como "ignorado" nos logs de auditoria, é muito importante ler os detalhes estendidos na mensagem de log para determinar o motivo.</span><span class="sxs-lookup"><span data-stu-id="5fa3f-136">When a user shows up as “skipped” in the audit logs, it is very important to read the extended details in the log message to determine the reason.</span></span> <span data-ttu-id="5fa3f-137">Veja a seguir as resoluções e motivos comuns:</span><span class="sxs-lookup"><span data-stu-id="5fa3f-137">Below are common reasons and resolutions:</span></span>

-   <span data-ttu-id="5fa3f-138">**Um filtro de escopo foi configurado** **que está filtrando o usuário com base em um valor de atributo**.</span><span class="sxs-lookup"><span data-stu-id="5fa3f-138">**A scoping filter has been configured** **that is filtering the user out based on an attribute value**.</span></span> <span data-ttu-id="5fa3f-139">Para obter mais informações sobre filtros de escopo, consulte <https://docs.microsoft.com/azure/active-directory/active-directory-saas-scoping-filters>.</span><span class="sxs-lookup"><span data-stu-id="5fa3f-139">For more information on scoping filters, see <https://docs.microsoft.com/azure/active-directory/active-directory-saas-scoping-filters>.</span></span>

-   <span data-ttu-id="5fa3f-140">**O usuário é definido como "não qualificado efetivamente".**</span><span class="sxs-lookup"><span data-stu-id="5fa3f-140">**The user is “not effectively entitled”.**</span></span> <span data-ttu-id="5fa3f-141">Caso você veja essa mensagem de erro específica, é porque há um problema com o registro de atribuição de usuário armazenado no Azure AD.</span><span class="sxs-lookup"><span data-stu-id="5fa3f-141">If you see this specific error message, it is because there is a problem with the user assignment record stored in Azure AD.</span></span> <span data-ttu-id="5fa3f-142">Para corrigir esse problema, cancele a atribuição do usuário (ou grupo) do aplicativo e reatribua-a novamente.</span><span class="sxs-lookup"><span data-stu-id="5fa3f-142">To fix this issue, un-assign the user (or group) from the app, and re-assign it again.</span></span> <span data-ttu-id="5fa3f-143">Para obter mais informações sobre atribuição, consulte <https://docs.microsoft.com/azure/active-directory/active-directory-coreapps-assign-user-azure-portal>.</span><span class="sxs-lookup"><span data-stu-id="5fa3f-143">For more information on assignment, see <https://docs.microsoft.com/azure/active-directory/active-directory-coreapps-assign-user-azure-portal>.</span></span>

-   <span data-ttu-id="5fa3f-144">**Um atributo obrigatório está ausente ou não está preenchido para um usuário.**</span><span class="sxs-lookup"><span data-stu-id="5fa3f-144">**A required attribute is missing or not populated for a user.**</span></span> <span data-ttu-id="5fa3f-145">Uma coisa importante a considerar ao configurar o provisionamento ser examinar e configurar os mapeamentos de atributo e fluxos de trabalho que definem quais fluxo propriedades de usuário (ou grupo) do Azure AD para o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="5fa3f-145">An important thing to consider when setting up provisioning be to review and configure the attribute mappings and workflows that define which user (or group) properties flow from Azure AD to the application.</span></span> <span data-ttu-id="5fa3f-146">Isso inclui a configuração de "propriedade correspondente" usada para identificar exclusivamente e corresponder usuários/grupos entre os dois sistemas.</span><span class="sxs-lookup"><span data-stu-id="5fa3f-146">This includes setting the “matching property” that be used to uniquely identify and match users/groups between the two systems.</span></span> <span data-ttu-id="5fa3f-147">Para obter mais informações sobre esse processo importante, consulte <https://docs.microsoft.com/azure/active-directory/active-directory-saas-customizing-attribute-mappings>.</span><span class="sxs-lookup"><span data-stu-id="5fa3f-147">For more information on this important process, see <https://docs.microsoft.com/azure/active-directory/active-directory-saas-customizing-attribute-mappings>.</span></span>

   * <span data-ttu-id="5fa3f-148">**Mapeamentos de atributos para grupos:** provisionamento do nome do grupo e detalhes do grupo, além de membros, se houver suporte para alguns aplicativos.</span><span class="sxs-lookup"><span data-stu-id="5fa3f-148">**Attribute mappings for groups:** Provisioning of the group name and group details, in addition to the members, if supported for some applications.</span></span> <span data-ttu-id="5fa3f-149">Você pode habilitar ou desabilitar essa funcionalidade, habilitando ou desabilitando o **Mapeamento** para objetos de grupo mostrados na guia de **provisionamento**.</span><span class="sxs-lookup"><span data-stu-id="5fa3f-149">You can enable or disable this functionality by enabling or disabling the **Mapping** for group objects shown in the **Provisioning** tab.</span></span> <span data-ttu-id="5fa3f-150">Se o provisionamento de grupos é habilitado, certifique-se de rever os mapeamentos de atributos para garantir que um campo apropriado está sendo usado para a "ID correspondente".</span><span class="sxs-lookup"><span data-stu-id="5fa3f-150">If provisioning groups is enabled, be sure to review the attribute mappings to ensure an appropriate field is being used for the “matching ID”.</span></span> <span data-ttu-id="5fa3f-151">Este pode ser o nome de exibição ou alias de email, já que o grupo e seus membros não são provisionados se a propriedade correspondente está vazia ou não está preenchida para um grupo no Azure AD.</span><span class="sxs-lookup"><span data-stu-id="5fa3f-151">This can be the display name or email alias), as the group and its members not be provisioned if the matching property is empty or not populated for a group in Azure AD.</span></span>

#<a name="next-steps"></a><span data-ttu-id="5fa3f-152">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="5fa3f-152">Next steps</span></span>
[<span data-ttu-id="5fa3f-153">Automatizar o provisionamento e desprovisionamento de usuários para aplicativos SaaS com o Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="5fa3f-153">Automate User Provisioning and Deprovisioning to SaaS Applications with Azure Active Directory</span></span>](active-directory-saas-app-provisioning.md)
