---
title: "Considerações de aaaSecurity para Proxy de aplicativo do Azure AD | Microsoft Docs"
description: "Aborda considerações de segurança para usar o Proxy de Aplicativo do Azure AD"
services: active-directory
documentationcenter: 
author: kgremban
manager: femila
ms.assetid: 
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/03/2017
ms.author: kgremban
ms.reviewer: harshja
ms.custom: it-pro
ms.openlocfilehash: ebd14b9d1fc8f4629c5916e5a910595727d935d5
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="security-considerations-for-accessing-apps-remotely-with-azure-ad-application-proxy"></a><span data-ttu-id="3e33c-103">Considerações de segurança para acessar aplicativos remotamente com o Proxy de Aplicativo do Azure AD</span><span class="sxs-lookup"><span data-stu-id="3e33c-103">Security considerations for accessing apps remotely with Azure AD Application Proxy</span></span>

<span data-ttu-id="3e33c-104">Este artigo explica como o Proxy de Aplicativo do Azure Active Directory fornece um serviço seguro para publicar e acessar aplicativos remotamente.</span><span class="sxs-lookup"><span data-stu-id="3e33c-104">This article explains how Azure Active Directory Application Proxy provides a secure service for publishing and accessing your applications remotely.</span></span>

<span data-ttu-id="3e33c-105">Olá seguinte diagrama mostra como o Azure AD permite que aplicativos de locais de tooyour de acesso remoto seguro.</span><span class="sxs-lookup"><span data-stu-id="3e33c-105">hello following diagram shows how Azure AD enables secure remote access tooyour on-premises applications.</span></span>

 ![Diagrama de acesso remoto por meio do Proxy de Aplicativo do Azure AD](./media/application-proxy-security-considerations/secure-remote-access.png)

## <a name="security-benefits"></a><span data-ttu-id="3e33c-107">Benefícios de segurança</span><span class="sxs-lookup"><span data-stu-id="3e33c-107">Security benefits</span></span>

<span data-ttu-id="3e33c-108">Proxy de aplicativo do Azure AD oferece Olá benefícios de segurança a seguir:</span><span class="sxs-lookup"><span data-stu-id="3e33c-108">Azure AD Application Proxy offers hello following security benefits:</span></span>

### <a name="authenticated-access"></a><span data-ttu-id="3e33c-109">Acesso autenticado</span><span class="sxs-lookup"><span data-stu-id="3e33c-109">Authenticated access</span></span> 

<span data-ttu-id="3e33c-110">Se você escolher toouse Active Directory do Azure pré-autenticação, somente conexões autenticadas podem acessar sua rede.</span><span class="sxs-lookup"><span data-stu-id="3e33c-110">If you choose toouse Azure Active Directory preauthentication, then only authenticated connections can access your network.</span></span>

<span data-ttu-id="3e33c-111">Proxy de aplicativo do Azure AD depende de saudação do AD do Azure serviço de token segurança (STS) para todas as autenticações.</span><span class="sxs-lookup"><span data-stu-id="3e33c-111">Azure AD Application Proxy relies on hello Azure AD security token service (STS) for all authentication.</span></span>  <span data-ttu-id="3e33c-112">Pré-autenticação, por natureza, bloqueia um número significativo de ataques anônimos, porque somente identidades autenticadas podem acessar o aplicativo de back-end de saudação.</span><span class="sxs-lookup"><span data-stu-id="3e33c-112">Preauthentication, by its very nature, blocks a significant number of anonymous attacks, because only authenticated identities can access hello back-end application.</span></span>

<span data-ttu-id="3e33c-113">Se você escolher Passagem como seu método de pré-autenticação, não terá esse benefício.</span><span class="sxs-lookup"><span data-stu-id="3e33c-113">If you choose Passthrough as your preauthentication method, you don't get this benefit.</span></span> 

### <a name="conditional-access"></a><span data-ttu-id="3e33c-114">Acesso condicional</span><span class="sxs-lookup"><span data-stu-id="3e33c-114">Conditional access</span></span>

<span data-ttu-id="3e33c-115">Aplica controles de política mais ricas antes de conexões de rede tooyour são estabelecidas.</span><span class="sxs-lookup"><span data-stu-id="3e33c-115">Apply richer policy controls before connections tooyour network are established.</span></span>

<span data-ttu-id="3e33c-116">Com [acesso condicional](active-directory-conditional-access-azuread-connected-apps.md), você pode definir restrições em que o tráfego é permitido tooaccess seus aplicativos de back-end.</span><span class="sxs-lookup"><span data-stu-id="3e33c-116">With [conditional access](active-directory-conditional-access-azuread-connected-apps.md), you can define restrictions on what traffic is allowed tooaccess your back-end applications.</span></span> <span data-ttu-id="3e33c-117">É possível criar políticas que restrinjam entradas com base no local, na força da autenticação e no perfil de risco do usuário.</span><span class="sxs-lookup"><span data-stu-id="3e33c-117">You can create policies that restrict sign-ins based on location, strength of authentication, and user risk profile.</span></span>

<span data-ttu-id="3e33c-118">Você também pode usar políticas de autenticação multifator de tooconfigure de acesso condicional, adicionando outra camada de autenticações de usuário de tooyour de segurança.</span><span class="sxs-lookup"><span data-stu-id="3e33c-118">You can also use conditional access tooconfigure Multi-Factor Authentication policies, adding another layer of security tooyour user authentications.</span></span> 

### <a name="traffic-termination"></a><span data-ttu-id="3e33c-119">Encerramento de tráfego</span><span class="sxs-lookup"><span data-stu-id="3e33c-119">Traffic termination</span></span>

<span data-ttu-id="3e33c-120">Todo o tráfego é terminado em nuvem hello.</span><span class="sxs-lookup"><span data-stu-id="3e33c-120">All traffic is terminated in hello cloud.</span></span>

<span data-ttu-id="3e33c-121">Como o Proxy de aplicativo do Azure AD é um proxy reverso, todos os aplicativos de tooback a fim de tráfego é finalizada com serviço de saudação.</span><span class="sxs-lookup"><span data-stu-id="3e33c-121">Because Azure AD Application Proxy is a reverse-proxy, all traffic tooback-end applications is terminated at hello service.</span></span> <span data-ttu-id="3e33c-122">Olá sessão pode obter restabelecida com o servidor de back-end hello, que significa que os servidores de back-end não são expostos tráfego toodirect HTTP.</span><span class="sxs-lookup"><span data-stu-id="3e33c-122">hello session can get reestablished only with hello back-end server, which means that your back-end servers are not exposed toodirect HTTP traffic.</span></span> <span data-ttu-id="3e33c-123">Essa configuração significa que você terá uma proteção melhor contra ataques direcionados.</span><span class="sxs-lookup"><span data-stu-id="3e33c-123">This configuration means that you are better protected from targeted attacks.</span></span>

### <a name="all-access-is-outbound"></a><span data-ttu-id="3e33c-124">Todo o acesso é de saída</span><span class="sxs-lookup"><span data-stu-id="3e33c-124">All access is outbound</span></span> 

<span data-ttu-id="3e33c-125">Rede corporativa do toohello tooopen conexões de entrada não é necessário.</span><span class="sxs-lookup"><span data-stu-id="3e33c-125">You don't need tooopen inbound connections toohello corporate network.</span></span>

<span data-ttu-id="3e33c-126">Conectores de Proxy de aplicativo só usam toohello AD do Azure serviço de Proxy de aplicativo conexões de saída, o que significa que não é necessário tooopen portas de firewall para conexões de entrada.</span><span class="sxs-lookup"><span data-stu-id="3e33c-126">Application Proxy connectors only use outbound connections toohello Azure AD Application Proxy service, which means that there is no need tooopen firewall ports for incoming connections.</span></span> <span data-ttu-id="3e33c-127">Proxies tradicionais necessária uma rede de perímetro (também conhecido como *DMZ*, *zona desmilitarizada*, ou *sub-rede filtrada*) e a permissão de acesso toounauthenticated conexões na borda da rede de saudação.</span><span class="sxs-lookup"><span data-stu-id="3e33c-127">Traditional proxies required a perimeter network (also known as *DMZ*, *demilitarized zone*, or *screened subnet*) and allowed access toounauthenticated connections at hello network edge.</span></span> <span data-ttu-id="3e33c-128">Neste cenário necessárias muitos investimentos adicionais em aplicativo web tráfego de tooanalyze produtos de firewall e oferecem adição proteções toohello ambiente.</span><span class="sxs-lookup"><span data-stu-id="3e33c-128">This scenario required many additional investments in web application firewall products tooanalyze traffic and offer addition protections toohello environment.</span></span> <span data-ttu-id="3e33c-129">Com o Proxy de Aplicativo, você não precisa de uma rede de perímetro porque todas as conexões são de saída e ocorrem por um canal seguro.</span><span class="sxs-lookup"><span data-stu-id="3e33c-129">With Application Proxy, you don't need a perimeter network because all connections are outbound and take place over a secure channel.</span></span>

<span data-ttu-id="3e33c-130">Para saber mais sobre conectores, veja [Noções básicas sobre conectores de proxy de aplicativo do Azure AD](application-proxy-understand-connectors.md).</span><span class="sxs-lookup"><span data-stu-id="3e33c-130">For more information about connectors, see [Understand Azure AD Application Proxy connectors](application-proxy-understand-connectors.md).</span></span>

### <a name="cloud-scale-analytics-and-machine-learning"></a><span data-ttu-id="3e33c-131">Machine learning e análise em escala de nuvem</span><span class="sxs-lookup"><span data-stu-id="3e33c-131">Cloud-scale analytics and machine learning</span></span> 

<span data-ttu-id="3e33c-132">Obtenha proteção de segurança de ponta.</span><span class="sxs-lookup"><span data-stu-id="3e33c-132">Get cutting-edge security protection.</span></span>

<span data-ttu-id="3e33c-133">Porque ele é parte do Active Directory do Azure, o Proxy de aplicativo pode aproveitar [Azure AD Identity Protection](active-directory-identityprotection.md)com inteligência com base em aprendizado de máquina e dados de saudação Microsoft Security Response Center e Digital Crimes Unit.</span><span class="sxs-lookup"><span data-stu-id="3e33c-133">Because it's part of Azure Active Directory, Application Proxy can leverage [Azure AD Identity Protection](active-directory-identityprotection.md), with machine learning-driven intelligence and data from hello Microsoft Security Response Center and Digital Crimes Unit.</span></span> <span data-ttu-id="3e33c-134">Juntos, identificamos proativamente contas comprometidas e oferecemos proteção em tempo real em conexões de alto risco. Levamos em consideração vários fatores, como acesso de dispositivos infectados por meio de redes que mantêm o anonimato, bem como de locais atípicos e improváveis.</span><span class="sxs-lookup"><span data-stu-id="3e33c-134">Together we proactively identify compromised accounts and offer real-time protection from high-risk sign-ins. We take into account numerous factors, such as access from infected devices, through anonymizing networks, and from atypical and unlikely locations.</span></span>

<span data-ttu-id="3e33c-135">Muitos desses relatórios e eventos já estão disponíveis por meio de uma API para integração com as informações de segurança e sistemas de gerenciamento (SIEM) do evento.</span><span class="sxs-lookup"><span data-stu-id="3e33c-135">Many of these reports and events are already available through an API for integration with your security information and event management (SIEM) systems.</span></span>

### <a name="remote-access-as-a-service"></a><span data-ttu-id="3e33c-136">Acesso remoto como serviço</span><span class="sxs-lookup"><span data-stu-id="3e33c-136">Remote access as a service</span></span>

<span data-ttu-id="3e33c-137">Você não tem tooworry sobre manutenção e aplicação de patch servidores locais.</span><span class="sxs-lookup"><span data-stu-id="3e33c-137">You don’t have tooworry about maintaining and patching on-premises servers.</span></span>

<span data-ttu-id="3e33c-138">A não aplicação de patches no software ainda é responsável por um grande número de ataques.</span><span class="sxs-lookup"><span data-stu-id="3e33c-138">Unpatched software still accounts for a large number of attacks.</span></span> <span data-ttu-id="3e33c-139">Proxy de aplicativo do Azure AD é um serviço de escala da Internet que possui a Microsoft, assim você sempre obter atualizações e patches de segurança mais recentes do hello.</span><span class="sxs-lookup"><span data-stu-id="3e33c-139">Azure AD Application Proxy is an Internet-scale service that Microsoft owns, so you always get hello latest security patches and upgrades.</span></span>

<span data-ttu-id="3e33c-140">segurança de saudação tooimprove de aplicativos publicados pelo Proxy de aplicativo do Azure AD, podemos bloquear robôs do rastreador da web de indexação e o arquivamento de seus aplicativos.</span><span class="sxs-lookup"><span data-stu-id="3e33c-140">tooimprove hello security of applications published by Azure AD Application Proxy, we block web crawler robots from indexing and archiving your applications.</span></span> <span data-ttu-id="3e33c-141">Cada vez que um robô rastreador da Web tentar recuperar as configurações de robôs para um aplicativo publicado, o Proxy de Aplicativo responderá com um arquivo robots.txt que inclui `User-agent: * Disallow: /`.</span><span class="sxs-lookup"><span data-stu-id="3e33c-141">Each time a web crawler robot tries to retrieve the robot's settings for a published app, Application Proxy replies with a robots.txt file that includes `User-agent: * Disallow: /`.</span></span>

## <a name="under-hello-hood"></a><span data-ttu-id="3e33c-142">Bastidores Olá</span><span class="sxs-lookup"><span data-stu-id="3e33c-142">Under hello hood</span></span>

<span data-ttu-id="3e33c-143">O Proxy de Aplicativo do Azure AD consiste em duas partes:</span><span class="sxs-lookup"><span data-stu-id="3e33c-143">Azure AD Application Proxy consists of two parts:</span></span>

* <span data-ttu-id="3e33c-144">Olá serviço baseado em nuvem: este serviço é executado no Azure e é onde as conexões de cliente/usuário externo de saudação são feitas.</span><span class="sxs-lookup"><span data-stu-id="3e33c-144">hello cloud-based service: This service runs in Azure, and is where hello external client/user connections are made.</span></span>
* <span data-ttu-id="3e33c-145">[Olá conector local](application-proxy-understand-connectors.md): um componente de local, conector Olá escuta solicitações de serviço de Proxy de aplicativo de saudação do AD do Azure e gerencia aplicativos internos de toohello de conexões.</span><span class="sxs-lookup"><span data-stu-id="3e33c-145">[hello on-premises connector](application-proxy-understand-connectors.md): An on-premises component, hello connector listens for requests from hello Azure AD Application Proxy service and handles connections toohello internal applications.</span></span> 

<span data-ttu-id="3e33c-146">Um fluxo entre conector hello e serviço de Proxy de aplicativo hello é estabelecido quando:</span><span class="sxs-lookup"><span data-stu-id="3e33c-146">A flow between hello connector and hello Application Proxy service is established when:</span></span>

* <span data-ttu-id="3e33c-147">conector de saudação é configurada pela primeira vez.</span><span class="sxs-lookup"><span data-stu-id="3e33c-147">hello connector is first set up.</span></span>
* <span data-ttu-id="3e33c-148">conector de saudação extrai informações de configuração de saudação serviço Proxy de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="3e33c-148">hello connector pulls configuration information from hello Application Proxy service.</span></span>
* <span data-ttu-id="3e33c-149">Um usuário acessa um aplicativo publicado.</span><span class="sxs-lookup"><span data-stu-id="3e33c-149">A user accesses a published application.</span></span>

>[!NOTE]
><span data-ttu-id="3e33c-150">Todas as comunicações ocorrem por SSL, e eles sempre são originadas Olá conector toohello serviço Proxy de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="3e33c-150">All communications occur over SSL, and they always originate at hello connector toohello Application Proxy service.</span></span> <span data-ttu-id="3e33c-151">serviço de saudação é de saída apenas.</span><span class="sxs-lookup"><span data-stu-id="3e33c-151">hello service is outbound only.</span></span>

<span data-ttu-id="3e33c-152">conector de saudação usa um toohello de tooauthenticate de certificado de cliente serviço de Proxy de aplicativo para quase todas as chamadas.</span><span class="sxs-lookup"><span data-stu-id="3e33c-152">hello connector uses a client certificate tooauthenticate toohello Application Proxy service for nearly all calls.</span></span> <span data-ttu-id="3e33c-153">Olá somente exceção toothis processo é etapa de configuração inicial do hello, em que o certificado de cliente Olá é estabelecido.</span><span class="sxs-lookup"><span data-stu-id="3e33c-153">hello only exception toothis process is hello initial setup step, where hello client certificate is established.</span></span>

### <a name="installing-hello-connector"></a><span data-ttu-id="3e33c-154">Instalar o conector do hello</span><span class="sxs-lookup"><span data-stu-id="3e33c-154">Installing hello connector</span></span>

<span data-ttu-id="3e33c-155">Quando o conector de saudação é configurado pela primeira vez, Olá eventos de fluxo a seguir ocorrem:</span><span class="sxs-lookup"><span data-stu-id="3e33c-155">When hello connector is first set up, hello following flow events take place:</span></span>

1. <span data-ttu-id="3e33c-156">serviço de toohello de registro do conector Olá ocorre como parte da instalação de saudação do conector de saudação.</span><span class="sxs-lookup"><span data-stu-id="3e33c-156">hello connector registration toohello service happens as part of hello installation of hello connector.</span></span> <span data-ttu-id="3e33c-157">Os usuários é solicitado tooenter suas credenciais de administrador do AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="3e33c-157">Users are prompted tooenter their Azure AD admin credentials.</span></span> <span data-ttu-id="3e33c-158">O token obtido dessa autenticação é apresentado toohello serviço de Proxy de aplicativo do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="3e33c-158">The token acquired from this authentication is then presented toohello Azure AD Application Proxy service.</span></span>
2. <span data-ttu-id="3e33c-159">Olá serviço Proxy de aplicativo avalia token hello.</span><span class="sxs-lookup"><span data-stu-id="3e33c-159">hello Application Proxy service evaluates hello token.</span></span> <span data-ttu-id="3e33c-160">Isso garante que um administrador da empresa no locatário Olá Olá token foi emitido para o usuário hello está.</span><span class="sxs-lookup"><span data-stu-id="3e33c-160">It ensures that hello user is a company administrator within hello tenant that hello token was issued for.</span></span> <span data-ttu-id="3e33c-161">Se o usuário de saudação não for um administrador, o processo de saudação é encerrado.</span><span class="sxs-lookup"><span data-stu-id="3e33c-161">If hello user is not an administrator, hello process is terminated.</span></span>
3. <span data-ttu-id="3e33c-162">conector Hello gera uma solicitação de certificado de cliente e passá-lo, juntamente com toohello de token, Olá serviço Proxy de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="3e33c-162">hello connector generates a client certificate request and passes it, along with hello token, toohello Application Proxy service.</span></span> <span data-ttu-id="3e33c-163">por sua vez, serviço Olá verifica o token hello e faz a solicitação de certificado de cliente de saudação.</span><span class="sxs-lookup"><span data-stu-id="3e33c-163">hello service in turn verifies hello token and signs hello client certificate request.</span></span>
4. <span data-ttu-id="3e33c-164">conector de Olá usa o certificado de cliente Olá para comunicação futura com hello serviço Proxy de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="3e33c-164">hello connector uses hello client certificate for future communication with hello Application Proxy service.</span></span>
5. <span data-ttu-id="3e33c-165">conector de saudação realiza uma recepção inicial dos dados de configuração do sistema de saudação do serviço hello usando seu certificado de cliente, e agora está pronto tootake solicitações.</span><span class="sxs-lookup"><span data-stu-id="3e33c-165">hello connector performs an initial pull of hello system configuration data from hello service using its client certificate, and it is now ready tootake requests.</span></span>

### <a name="updating-hello-configuration-settings"></a><span data-ttu-id="3e33c-166">Atualizando as definições de configuração de saudação</span><span class="sxs-lookup"><span data-stu-id="3e33c-166">Updating hello configuration settings</span></span>

<span data-ttu-id="3e33c-167">Sempre que Olá serviço Proxy de aplicativo de atualizações de definições de configuração de saudação, Olá eventos de fluxo a seguir ocorrem:</span><span class="sxs-lookup"><span data-stu-id="3e33c-167">Whenever hello Application Proxy service updates hello configuration settings, hello following flow events take place:</span></span>

1. <span data-ttu-id="3e33c-168">conector Olá conecta toohello configuração os pontos de extremidade Olá serviço Proxy de aplicativo usando seu certificado de cliente.</span><span class="sxs-lookup"><span data-stu-id="3e33c-168">hello connector connects toohello configuration endpoint within hello Application Proxy service by using its client certificate.</span></span>
2. <span data-ttu-id="3e33c-169">Depois que o certificado de cliente Olá foi validado, Olá serviço Proxy de aplicativo retorna toohello conector de dados da configuração (por exemplo, grupo de conector Olá Olá conector deve ser parte do).</span><span class="sxs-lookup"><span data-stu-id="3e33c-169">After hello client certificate has been validated, hello Application Proxy service returns configuration data toohello connector (for example, hello connector group that hello connector should be part of).</span></span>
3. <span data-ttu-id="3e33c-170">Se o certificado atual Olá é mais de 180 dias, o conector hello gera uma nova solicitação de certificado, que efetivamente atualiza o certificado de cliente de saudação a cada 180 dias.</span><span class="sxs-lookup"><span data-stu-id="3e33c-170">If hello current certificate is more than 180 days old, hello connector generates a new certificate request, which effectively updates hello client certificate every 180 days.</span></span>

### <a name="accessing-published-applications"></a><span data-ttu-id="3e33c-171">Acesso a aplicativos publicados</span><span class="sxs-lookup"><span data-stu-id="3e33c-171">Accessing published applications</span></span>

<span data-ttu-id="3e33c-172">Quando os usuários acessam um aplicativo publicado, hello seguintes eventos ocorrem entre o serviço de Proxy de aplicativo hello e o conector de Proxy de aplicativo hello:</span><span class="sxs-lookup"><span data-stu-id="3e33c-172">When users access a published application, hello following events take place between hello Application Proxy service and hello Application Proxy connector:</span></span>

1. [<span data-ttu-id="3e33c-173">serviço de saudação autentica o usuário Olá para o aplicativo hello</span><span class="sxs-lookup"><span data-stu-id="3e33c-173">hello service authenticates hello user for hello app</span></span>](#the-service-checks-the-configuration-settings-for-the-app)
2. [<span data-ttu-id="3e33c-174">serviço de saudação faz uma solicitação na fila de conector Olá</span><span class="sxs-lookup"><span data-stu-id="3e33c-174">hello service places a request in hello connector queue</span></span>](#The-service-places-a-request-in-the-connector-queue)
3. [<span data-ttu-id="3e33c-175">Um conector processa a solicitação de saudação da fila de saudação</span><span class="sxs-lookup"><span data-stu-id="3e33c-175">A connector processes hello request from hello queue</span></span>](#the-connector-receives-the-request-from-the-queue)
4. [<span data-ttu-id="3e33c-176">conector de saudação aguarda uma resposta</span><span class="sxs-lookup"><span data-stu-id="3e33c-176">hello connector waits for a response</span></span>](#the-connector-waits-for-a-response)
5. [<span data-ttu-id="3e33c-177">usuário de toohello de dados do Hello serviço fluxos</span><span class="sxs-lookup"><span data-stu-id="3e33c-177">hello service streams data toohello user</span></span>](#the-service-streams-data-to-the-user)

<span data-ttu-id="3e33c-178">toolearn mais sobre o que acontece em cada uma dessas etapas, continue lendo.</span><span class="sxs-lookup"><span data-stu-id="3e33c-178">toolearn more about what takes place in each of these steps, keep reading.</span></span>


#### <a name="1-hello-service-authenticates-hello-user-for-hello-app"></a><span data-ttu-id="3e33c-179">1. serviço de Olá autentica o usuário de saudação para o aplicativo hello</span><span class="sxs-lookup"><span data-stu-id="3e33c-179">1. hello service authenticates hello user for hello app</span></span>

<span data-ttu-id="3e33c-180">Se você configurou Olá aplicativo toouse passagem como seu método de pré-autenticação, etapas Olá nesta seção serão ignoradas.</span><span class="sxs-lookup"><span data-stu-id="3e33c-180">If you configured hello app toouse Passthrough as its preauthentication method, hello steps in this section are skipped.</span></span>

<span data-ttu-id="3e33c-181">Se você configurou Olá toopreauthenticate de aplicativo com o AD do Azure, os usuários são redirecionado toohello tooauthenticate de STS do AD do Azure e hello etapas a seguir ocorrem:</span><span class="sxs-lookup"><span data-stu-id="3e33c-181">If you configured hello app toopreauthenticate with Azure AD, users are redirected toohello Azure AD STS tooauthenticate, and hello following steps take place:</span></span>

1. <span data-ttu-id="3e33c-182">Proxy de aplicativo procura qualquer requisitos de política de acesso condicional para aplicativos específicos hello.</span><span class="sxs-lookup"><span data-stu-id="3e33c-182">Application Proxy checks for any conditional access policy requirements for hello specific application.</span></span> <span data-ttu-id="3e33c-183">Essa etapa garante que Olá foi atribuída ao usuário toohello aplicativo.</span><span class="sxs-lookup"><span data-stu-id="3e33c-183">This step ensures that hello user has been assigned toohello application.</span></span> <span data-ttu-id="3e33c-184">Se a verificação em duas etapas é necessária, sequência de autenticação Olá solicita Olá usuário um segundo método de autenticação.</span><span class="sxs-lookup"><span data-stu-id="3e33c-184">If two-step verification is required, hello authentication sequence prompts hello user for a second authentication method.</span></span>

2. <span data-ttu-id="3e33c-185">Depois que todas as verificações foram aprovadas, Olá STS do AD do Azure emite um token assinado para o aplicativo hello e redireciona Olá usuário back toohello serviço Proxy de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="3e33c-185">After all checks have passed, hello Azure AD STS issues a signed token for hello application and redirects hello user back toohello Application Proxy service.</span></span>

3. <span data-ttu-id="3e33c-186">Proxy de aplicativo verifica que esse token Olá foi emitido aplicativo hello de toocorrect.</span><span class="sxs-lookup"><span data-stu-id="3e33c-186">Application Proxy verifies that hello token was issued toocorrect hello application.</span></span> <span data-ttu-id="3e33c-187">Ele executa outras verificações também, como garantir que Olá token foi assinado pelo AD do Azure e que ele ainda estiver dentro de janela válido hello.</span><span class="sxs-lookup"><span data-stu-id="3e33c-187">It performs other checks also, such as ensuring that hello token was signed by Azure AD, and that it is still within hello valid window.</span></span>

4. <span data-ttu-id="3e33c-188">Proxy de aplicativo define uma tooindicate de cookie de autenticação criptografada que o aplicativo de toohello autenticação ocorreu.</span><span class="sxs-lookup"><span data-stu-id="3e33c-188">Application Proxy sets an encrypted authentication cookie tooindicate that authentication toohello application has occurred.</span></span> <span data-ttu-id="3e33c-189">Olá cookie inclui um carimbo de hora de expiração é baseado em token de saudação do AD do Azure e outros dados, como nome de usuário Olá Olá autenticação se baseia.</span><span class="sxs-lookup"><span data-stu-id="3e33c-189">hello cookie includes an expiration timestamp that's based on hello token from Azure AD and other data, such as hello user name that hello authentication is based on.</span></span> <span data-ttu-id="3e33c-190">Olá cookie é criptografado com uma chave privada conhecida toohello serviço Proxy de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="3e33c-190">hello cookie is encrypted with a private key known only toohello Application Proxy service.</span></span>

5. <span data-ttu-id="3e33c-191">Aplicativo Proxy redirecionamentos Olá usuário toohello back solicitou o URL.</span><span class="sxs-lookup"><span data-stu-id="3e33c-191">Application Proxy redirects hello user back toohello originally requested URL.</span></span>

<span data-ttu-id="3e33c-192">Se qualquer parte das etapas de pré-autenticação Olá falhar, solicitação de saudação do usuário foi negada e usuário Olá é mostrado uma mensagem indicando a origem de saudação de problema de saudação.</span><span class="sxs-lookup"><span data-stu-id="3e33c-192">If any part of hello preauthentication steps fails, hello user’s request is denied, and hello user is shown a message indicating hello source of hello problem.</span></span>


#### <a name="2-hello-service-places-a-request-in-hello-connector-queue"></a><span data-ttu-id="3e33c-193">2. serviço Olá faz uma solicitação na fila de conector Olá</span><span class="sxs-lookup"><span data-stu-id="3e33c-193">2. hello service places a request in hello connector queue</span></span>

<span data-ttu-id="3e33c-194">Os conectores mantêm toohello de abrir uma conexão de saída serviço Proxy de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="3e33c-194">Connectors keep an outbound connection open toohello Application Proxy service.</span></span> <span data-ttu-id="3e33c-195">Quando uma solicitação chega, serviço Olá enfileira solicitação Olá em uma das conexões de abrir Olá para Olá conector toopick backup.</span><span class="sxs-lookup"><span data-stu-id="3e33c-195">When a request comes in, hello service queues up hello request on one of hello open connections for hello connector toopick up.</span></span>

<span data-ttu-id="3e33c-196">solicitação Olá inclui itens de aplicativo hello, como cabeçalhos de solicitação hello, dados do cookie Olá criptografado, Olá usuário fazer Olá solicitação e Olá ID da solicitação</span><span class="sxs-lookup"><span data-stu-id="3e33c-196">hello request includes items from hello application, such as hello request headers, data from hello encrypted cookie, hello user making hello request, and hello request ID.</span></span> <span data-ttu-id="3e33c-197">Embora os dados do cookie criptografado Olá são enviados com solicitação hello, cookie de autenticação de saudação em si não é.</span><span class="sxs-lookup"><span data-stu-id="3e33c-197">Although data from hello encrypted cookie is sent with hello request, hello authentication cookie itself is not.</span></span>

#### <a name="3-hello-connector-processes-hello-request-from-hello-queue"></a><span data-ttu-id="3e33c-198">3. conector Olá processa a solicitação de saudação da fila de saudação.</span><span class="sxs-lookup"><span data-stu-id="3e33c-198">3. hello connector processes hello request from hello queue.</span></span> 

<span data-ttu-id="3e33c-199">Proxy de aplicativo com base na solicitação de Olá, executa uma das seguintes ações de saudação:</span><span class="sxs-lookup"><span data-stu-id="3e33c-199">Based on hello request, Application Proxy performs one of hello following actions:</span></span>

* <span data-ttu-id="3e33c-200">Se a solicitação de saudação é uma operação simples (por exemplo, não há nenhum dado dentro do corpo de hello, sem um RESTful *obter* solicitação), conector de saudação faz um recurso interno do destino de toohello de conexão e, em seguida, aguarda uma resposta.</span><span class="sxs-lookup"><span data-stu-id="3e33c-200">If hello request is a simple operation (for example, there is no data within hello body as is with a RESTful *GET* request), hello connector makes a connection toohello target internal resource and then waits for a response.</span></span>

* <span data-ttu-id="3e33c-201">Se a solicitação de saudação tiver dados associados a ele no corpo da saudação (por exemplo, um RESTful *POST* operação), conector Olá faz uma conexão de saída por meio de instância de Proxy de aplicativo hello cliente certificado toohello.</span><span class="sxs-lookup"><span data-stu-id="3e33c-201">If hello request has data associated with it in hello body (for example, a RESTful *POST* operation), hello connector makes an outbound connection by using hello client certificate toohello Application Proxy instance.</span></span> <span data-ttu-id="3e33c-202">Ele faz com que dados conexão toorequest hello e abrir um recurso interno de toohello de conexão.</span><span class="sxs-lookup"><span data-stu-id="3e33c-202">It makes this connection toorequest hello data and open a connection toohello internal resource.</span></span> <span data-ttu-id="3e33c-203">Depois de receber a solicitação de saudação do conector de saudação, o serviço de Proxy de aplicativo hello começa a aceitar o conteúdo de usuário hello e encaminha toohello o conector de dados.</span><span class="sxs-lookup"><span data-stu-id="3e33c-203">After it receives hello request from hello connector, hello Application Proxy service begins accepting content from hello user and forwards data toohello connector.</span></span> <span data-ttu-id="3e33c-204">conector de Hello, por sua vez, encaminha os recursos internos do hello dados toohello.</span><span class="sxs-lookup"><span data-stu-id="3e33c-204">hello connector, in turn, forwards hello data toohello internal resource.</span></span>

#### <a name="4-hello-connector-waits-for-a-response"></a><span data-ttu-id="3e33c-205">4. conector de Olá aguarda uma resposta.</span><span class="sxs-lookup"><span data-stu-id="3e33c-205">4. hello connector waits for a response.</span></span>

<span data-ttu-id="3e33c-206">Depois de fazer a solicitação hello e transmissão de toohello todo o conteúdo final é concluído, conector Olá aguarda uma resposta.</span><span class="sxs-lookup"><span data-stu-id="3e33c-206">After hello request and transmission of all content toohello back end is complete, hello connector waits for a response.</span></span>

<span data-ttu-id="3e33c-207">Depois de receber uma resposta, conector Olá faz com que um serviço de Proxy de aplicativo de toohello de conexão de saída, tooreturn Olá detalhes do cabeçalho e iniciar o fluxo de dados de retorno de saudação.</span><span class="sxs-lookup"><span data-stu-id="3e33c-207">After it receives a response, hello connector makes an outbound connection toohello Application Proxy service, tooreturn hello header details and begin streaming hello return data.</span></span>

#### <a name="5-hello-service-streams-data-toohello-user"></a><span data-ttu-id="3e33c-208">5. Olá serviço fluxos dados toohello o usuário.</span><span class="sxs-lookup"><span data-stu-id="3e33c-208">5. hello service streams data toohello user.</span></span> 

<span data-ttu-id="3e33c-209">Algum processamento do aplicativo hello pode ocorrer aqui.</span><span class="sxs-lookup"><span data-stu-id="3e33c-209">Some processing of hello application may occur here.</span></span> <span data-ttu-id="3e33c-210">Se você configurou URLs ou cabeçalhos de tootranslate do Proxy de aplicativo em seu aplicativo, o que o processamento ocorre conforme necessário durante esta etapa.</span><span class="sxs-lookup"><span data-stu-id="3e33c-210">If you configured Application Proxy tootranslate headers or URLs in your application, that processing happens as needed during this step.</span></span>


## <a name="next-steps"></a><span data-ttu-id="3e33c-211">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="3e33c-211">Next steps</span></span>

[<span data-ttu-id="3e33c-212">Considerações de topologia de rede ao usar o Proxy de Aplicativo do Azure AD</span><span class="sxs-lookup"><span data-stu-id="3e33c-212">Network topology considerations when using Azure AD Application Proxy</span></span>](application-proxy-network-topology-considerations.md)

[<span data-ttu-id="3e33c-213">Noções básicas sobre conectores de Proxy de Aplicativo do Azure AD</span><span class="sxs-lookup"><span data-stu-id="3e33c-213">Understand Azure AD Application Proxy connectors</span></span>](application-proxy-understand-connectors.md)
