---
title: "aaaView e usar do Azure Resource Manager modelo uma máquina virtual | Microsoft Docs"
description: "Saiba como toouse Olá modelo do Gerenciador de recursos do Azure de uma máquina virtual toocreate outras VMs"
services: devtest-lab,virtual-machines,visual-studio-online
documentationcenter: na
author: tomarcher
manager: douge
editor: 
ms.assetid: a759d9ce-655c-4ac6-8834-cb29dd7d30dd
ms.service: devtest-lab
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/05/2017
ms.author: tarcher
ms.openlocfilehash: b79f7eb4171793681a0b654e6e72a83191c76bde
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="use-a-virtual-machines-azure-resource-manager-template"></a><span data-ttu-id="030e6-103">Usar o modelo do Azure Resource Manager de uma máquina virtual</span><span class="sxs-lookup"><span data-stu-id="030e6-103">Use a virtual machine's Azure Resource Manager template</span></span>

<span data-ttu-id="030e6-104">Ao criar uma máquina virtual (VM) em DevTest Labs por meio de saudação [portal do Azure](http://go.microsoft.com/fwlink/p/?LinkID=525040), você pode exibir o modelo do Azure Resource Manager Olá antes de salvar Olá VM.</span><span class="sxs-lookup"><span data-stu-id="030e6-104">When you are creating a virtual machine (VM) in DevTest Labs through hello [Azure portal](http://go.microsoft.com/fwlink/p/?LinkID=525040), you can view hello Azure Resource Manager template before you save hello VM.</span></span> <span data-ttu-id="030e6-105">Hello modelo pode ser usado como uma base toocreate mais máquinas virtuais do laboratório com hello mesmas configurações.</span><span class="sxs-lookup"><span data-stu-id="030e6-105">hello template can then be used as a basis toocreate more lab VMs with hello same settings.</span></span>

<span data-ttu-id="030e6-106">Este artigo descreve como tooview Olá modelo do Gerenciador de recursos durante a criação de uma máquina virtual e como toodeploy-lo posteriormente criação tooautomate de Olá mesma VM.</span><span class="sxs-lookup"><span data-stu-id="030e6-106">This article describes how tooview hello Resource Manager template when creating a VM, and how toodeploy it later tooautomate creation of hello same VM.</span></span>

## <a name="multi-vm-vs-single-vm-resource-manager-templates"></a><span data-ttu-id="030e6-107">Modelos do Resource Manager de várias VMs vs. de uma única VM</span><span class="sxs-lookup"><span data-stu-id="030e6-107">Multi-VM vs. single-VM Resource Manager templates</span></span>
<span data-ttu-id="030e6-108">Há duas maneiras toocreate VMs em DevTest Labs usando um modelo do Gerenciador de recursos: provisionar Olá Microsoft.DevTestLab/labs/virtualmachines recursos ou provisionar Olá Microsoft.Commpute/virtualmachines recursos.</span><span class="sxs-lookup"><span data-stu-id="030e6-108">There are two ways toocreate VMs in DevTest Labs using a Resource Manager template: provision hello Microsoft.DevTestLab/labs/virtualmachines resource or provision hello Microsoft.Commpute/virtualmachines resource.</span></span> <span data-ttu-id="030e6-109">Cada um é usado em cenários diferentes e exige permissões diferentes.</span><span class="sxs-lookup"><span data-stu-id="030e6-109">Each is used in different scenarios and require different permissions.</span></span>

- <span data-ttu-id="030e6-110">Modelos do Gerenciador de recursos que usam um tipo de recurso Microsoft.DevTestLab/labs/virtualmachines (conforme declarado na propriedade de "recurso" hello no modelo de saudação) podem provisionar máquinas virtuais do laboratório individuais.</span><span class="sxs-lookup"><span data-stu-id="030e6-110">Resource Manager templates that use a Microsoft.DevTestLab/labs/virtualmachines resource type (as declared in hello “resource” property in hello template) can provision individual lab VMs.</span></span> <span data-ttu-id="030e6-111">Em seguida, cada VM aparece como um único item na lista de máquinas virtuais do DevTest Labs hello:</span><span class="sxs-lookup"><span data-stu-id="030e6-111">Each VM then shows up as a single item in hello DevTest Labs virtual machines list:</span></span>

   ![Lista de máquinas virtuais como itens individuais na lista de máquinas virtuais do DevTest Labs Olá](./media/devtest-lab-use-arm-template/devtestlab-lab-vm-single-item.png)

   <span data-ttu-id="030e6-113">Este tipo de modelo do Gerenciador de recursos pode ser provisionado com hello comando do PowerShell do Azure **New-AzureRmResourceGroupDeployment** ou por meio de saudação comando CLI do Azure **criar implantação de grupo az** .</span><span class="sxs-lookup"><span data-stu-id="030e6-113">This type of Resource Manager template can be provisioned through hello Azure PowerShell command **New-AzureRmResourceGroupDeployment** or through hello Azure CLI command **az group deployment create**.</span></span> <span data-ttu-id="030e6-114">Isso requer permissões de administrador, para que os usuários atribuídos a uma função de usuário do DevTest Labs não é possível executar a implantação de saudação.</span><span class="sxs-lookup"><span data-stu-id="030e6-114">It requires administrator permissions, so users who are assigned with a DevTest Labs user role can’t perform hello deployment.</span></span> 

- <span data-ttu-id="030e6-115">Modelos do Gerenciador de recursos que usam um tipo de recurso Microsoft.Compute/virtualmachines podem provisionar várias VMs como um único ambiente na lista de máquinas virtuais do DevTest Labs hello:</span><span class="sxs-lookup"><span data-stu-id="030e6-115">Resource Manager templates that use a Microsoft.Compute/virtualmachines resource type can provision multiple VMs as a single environment in hello DevTest Labs virtual machines list:</span></span>

   ![Lista de máquinas virtuais como itens individuais na lista de máquinas virtuais do DevTest Labs Olá](./media/devtest-lab-use-arm-template/devtestlab-lab-vm-single-environment.png)

   <span data-ttu-id="030e6-117">VMs no hello mesmo ambiente pode ser administrado juntos e compartilhamento Olá mesmo ciclo de vida.</span><span class="sxs-lookup"><span data-stu-id="030e6-117">VMs in hello same environment can be managed together and share hello same lifecycle.</span></span> <span data-ttu-id="030e6-118">Os usuários atribuídos a uma função de usuário do DevTest Labs podem criar ambientes usando esses modelos como Olá administrador configurou laboratório Olá dessa maneira.</span><span class="sxs-lookup"><span data-stu-id="030e6-118">Users who are assigned with a DevTest Labs user role can create environments using those templates as long as hello administrator has configured hello lab that way.</span></span>

<span data-ttu-id="030e6-119">Olá restante deste artigo aborda modelos do Gerenciador de recursos que usam Mirosoft.DevTestLab/labs/virtualmachines.</span><span class="sxs-lookup"><span data-stu-id="030e6-119">hello remainder of this article discusses Resource Manager templates that use Mirosoft.DevTestLab/labs/virtualmachines.</span></span> <span data-ttu-id="030e6-120">Eles são usados pela criação da VM de laboratório laboratório administradores tooautomate (por exemplo, claimable VMs) ou a geração de imagem dourada (por exemplo, a fábrica de imagem).</span><span class="sxs-lookup"><span data-stu-id="030e6-120">These are used by lab admins tooautomate lab VM creation (for example, claimable VMs) or golden image generation (for example, image factory).</span></span>

<span data-ttu-id="030e6-121">[Práticas recomendadas para a criação de modelos do Azure Resource Manager](https://docs.microsoft.com/azure/azure-resource-manager/resource-manager-template-best-practices) oferece muitas toohelp diretrizes e sugestões criar modelos do Azure Resource Manager toouse fácil e confiável.</span><span class="sxs-lookup"><span data-stu-id="030e6-121">[Best practices for creating Azure Resource Manager templates](https://docs.microsoft.com/azure/azure-resource-manager/resource-manager-template-best-practices) offers many guidelines and suggestions toohelp you create Azure Resource Manager templates that are reliable and easy toouse.</span></span>

## <a name="view-and-save-a-virtual-machines-resource-manager-template"></a><span data-ttu-id="030e6-122">Exibir e salvar o modelo do Azure Resource Manager de uma máquina virtual</span><span class="sxs-lookup"><span data-stu-id="030e6-122">View and save a virtual machine's Resource Manager template</span></span>
1. <span data-ttu-id="030e6-123">Siga as etapas de saudação em [criar sua primeira VM em um laboratório](devtest-lab-create-first-vm.md) toobegin criar uma máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="030e6-123">Follow hello steps at [Create your first VM in a lab](devtest-lab-create-first-vm.md) toobegin creating a virtual machine.</span></span>
1. <span data-ttu-id="030e6-124">Insira as informações de saudação necessários para sua máquina virtual e adicione qualquer artefato que você deseja para essa VM.</span><span class="sxs-lookup"><span data-stu-id="030e6-124">Enter hello required information for your virtual machine and add any artifacts you want for this VM.</span></span>
1. <span data-ttu-id="030e6-125">Na parte inferior de saudação da janela de configurações de configurar hello, escolha **modelo do ARM exibição**.</span><span class="sxs-lookup"><span data-stu-id="030e6-125">At hello bottom of hello Configure settings window, choose **View ARM template**.</span></span>

   ![Botão Exibir modelo ARM](./media/devtest-lab-use-arm-template/devtestlab-lab-view-rm-template.png)
1. <span data-ttu-id="030e6-127">Copie e salve toouse de modelo do Gerenciador de recursos de saudação posterior toocreate outra máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="030e6-127">Copy and save hello Resource Manager template toouse later toocreate another virtual machine.</span></span>

   ![Toosave de modelo de Gerenciador de recursos para uso posterior](./media/devtest-lab-use-arm-template/devtestlab-lab-copy-rm-template.png)

<span data-ttu-id="030e6-129">Depois de salvar o modelo do Gerenciador de recursos de saudação, você deve atualizar seção de parâmetros de saudação do modelo de saudação antes de você pode usá-lo.</span><span class="sxs-lookup"><span data-stu-id="030e6-129">After you have saved hello Resource Manager template, you must update hello parameters section of hello template before you can use it.</span></span> <span data-ttu-id="030e6-130">Você pode criar um parameter.json que personaliza apenas parâmetros de hello, fora do modelo de Gerenciador de recursos real hello.</span><span class="sxs-lookup"><span data-stu-id="030e6-130">You can create a parameter.json that customizes just hello parameters, outside of hello actual Resource Manager template.</span></span> 

![Personalizar parâmetros usando um arquivo JSON](./media/devtest-lab-use-arm-template/devtestlab-lab-custom-params.png)

## <a name="deploy-a-resource-manager-template-toocreate-a-vm"></a><span data-ttu-id="030e6-132">Implantar um modelo de Gerenciador de recursos toocreate uma VM</span><span class="sxs-lookup"><span data-stu-id="030e6-132">Deploy a Resource Manager template toocreate a VM</span></span>
<span data-ttu-id="030e6-133">Depois de salvar um modelo do Gerenciador de recursos e personalizado para suas necessidades, você pode usar tooautomate criação de VM.</span><span class="sxs-lookup"><span data-stu-id="030e6-133">After you have saved a Resource Manager template and customized it for your needs, you can use it tooautomate VM creation.</span></span> <span data-ttu-id="030e6-134">[Implantar recursos com modelos do Gerenciador de recursos e o Azure PowerShell](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-template-deploy) descreve como toouse PowerShell do Azure com o Gerenciador de recursos modelos toodeploy tooAzure seus recursos.</span><span class="sxs-lookup"><span data-stu-id="030e6-134">[Deploy resources with Resource Manager templates and Azure PowerShell](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-template-deploy) describes how toouse Azure PowerShell with Resource Manager templates toodeploy your resources tooAzure.</span></span> <span data-ttu-id="030e6-135">[Implantar recursos com modelos do Gerenciador de recursos e a CLI do Azure](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-template-deploy-cli) descreve como toouse CLI do Azure com o Gerenciador de recursos modelos toodeploy tooAzure seus recursos.</span><span class="sxs-lookup"><span data-stu-id="030e6-135">[Deploy resources with Resource Manager templates and Azure CLI](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-template-deploy-cli) describes how toouse Azure CLI with Resource Manager templates toodeploy your resources tooAzure.</span></span>

> [!NOTE]
> <span data-ttu-id="030e6-136">Somente um usuário com permissões de proprietário de laboratório pode criar VMs de um modelo do Resource Manager usando o Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="030e6-136">Only a user with lab owner permissions can create VMs from a Resource Manager template by using Azure PowerShell.</span></span> <span data-ttu-id="030e6-137">Se você quiser usar um modelo do Gerenciador de recursos de criação de VM tooautomate e tiver apenas permissões de usuário, você pode usar o hello [ **az laboratório vm criar** do hello CLI](https://docs.microsoft.com/cli/azure/lab/vm#create).</span><span class="sxs-lookup"><span data-stu-id="030e6-137">If you want tooautomate VM creation using a Resource Manager template and you only have user permissions, you can use hello [**az lab vm create** command in hello CLI](https://docs.microsoft.com/cli/azure/lab/vm#create).</span></span>

### <a name="next-steps"></a><span data-ttu-id="030e6-138">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="030e6-138">Next steps</span></span>
* <span data-ttu-id="030e6-139">Saiba como muito[criar ambientes de várias VMs com modelos do Gerenciador de recursos](devtest-lab-create-environment-from-arm.md).</span><span class="sxs-lookup"><span data-stu-id="030e6-139">Learn how too[Create multi-VM environments with Resource Manager templates](devtest-lab-create-environment-from-arm.md).</span></span>
* <span data-ttu-id="030e6-140">Explorar mais modelos de Gerenciador de recursos de início rápido para a automação do DevTest Labs Olá [repositório público do DevTest Labs GitHub](https://github.com/Azure/azure-quickstart-templates).</span><span class="sxs-lookup"><span data-stu-id="030e6-140">Explore more quick-start Resource Manager templates for DevTest Labs automation from hello [public DevTest Labs GitHub repo](https://github.com/Azure/azure-quickstart-templates).</span></span>
