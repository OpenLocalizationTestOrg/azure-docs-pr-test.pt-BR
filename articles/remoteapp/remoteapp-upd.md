---
title: "Como o Azure RemoteApp salva configurações e dados de usuário? | Microsoft Docs"
description: "Saiba como o Azure RemoteApp salva dados de usuário usando o disco de perfil do usuário."
services: remoteapp
documentationcenter: 
author: msmbaldwin
manager: mbaldwin
ms.assetid: e125af62-5c1a-4186-a238-52f537f7bb34
ms.service: remoteapp
ms.workload: compute
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/26/2017
ms.author: mbaldwin
ms.openlocfilehash: 4993bf507536659d7951e1552559cf0a6061d345
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/11/2017
---
# <a name="how-does-azure-remoteapp-save-user-data-and-settings"></a><span data-ttu-id="23ddd-104">Como o Azure RemoteApp salva configurações e dados de usuário?</span><span class="sxs-lookup"><span data-stu-id="23ddd-104">How does Azure RemoteApp save user data and settings?</span></span>
> [!IMPORTANT]
> <span data-ttu-id="23ddd-105">O Azure RemoteApp será descontinuado até 31 de agosto de 2017.</span><span class="sxs-lookup"><span data-stu-id="23ddd-105">Azure RemoteApp is being discontinued on August 31, 2017.</span></span> <span data-ttu-id="23ddd-106">Leia o [comunicado](https://go.microsoft.com/fwlink/?linkid=821148) para obter detalhes.</span><span class="sxs-lookup"><span data-stu-id="23ddd-106">Read the [announcement](https://go.microsoft.com/fwlink/?linkid=821148) for details.</span></span>
> 
> 

<span data-ttu-id="23ddd-107">O Azure RemoteApp salva personalizações e a identidade do usuário em dispositivos e sessões.</span><span class="sxs-lookup"><span data-stu-id="23ddd-107">Azure RemoteApp saves user identity and customizations across devices and sessions.</span></span> <span data-ttu-id="23ddd-108">Esses dados de usuário são armazenados em um disco por coleção por usuário, conhecido como um disco de perfil de usuário (UDP).</span><span class="sxs-lookup"><span data-stu-id="23ddd-108">This user data is stored in a per-user per-collection disk, known as a user profile disk (UPD).</span></span> <span data-ttu-id="23ddd-109">O disco segue o usuário e lhe garante uma experiência consistente, independentemente de onde ele entra.</span><span class="sxs-lookup"><span data-stu-id="23ddd-109">The disk follows the user and ensures the user has a consistent experience, regardless of where they sign in.</span></span>

<span data-ttu-id="23ddd-110">Os discos de perfil do usuário são completamente transparentes para o usuário. Os usuários salvam documentos em sua pasta Documentos (no que parece ser uma unidade local) e alteram suas configurações de aplicativo como de costume.</span><span class="sxs-lookup"><span data-stu-id="23ddd-110">User profile disks are completely transparent to the user — users save documents to their Documents folder (on what appears to be a local drive) and change their app settings as usual.</span></span> <span data-ttu-id="23ddd-111">Ao mesmo tempo, todas as configurações pessoais persistem durante a conexão ao Azure RemoteApp de qualquer dispositivo.</span><span class="sxs-lookup"><span data-stu-id="23ddd-111">At the same time, all personal settings persist when connecting to Azure RemoteApp from any device.</span></span> <span data-ttu-id="23ddd-112">Tudo o que o usuário vê é seus dados no mesmo lugar.</span><span class="sxs-lookup"><span data-stu-id="23ddd-112">All the user sees is their data in the same place.</span></span>

<span data-ttu-id="23ddd-113">Cada UPD tem 50 GB de armazenamento persistente e contém as configurações de dados e aplicativos do usuário.</span><span class="sxs-lookup"><span data-stu-id="23ddd-113">Each UPD has 50GB of persistent storage and contains both user data and application settings.</span></span> 

<span data-ttu-id="23ddd-114">Continue lendo para obter informações específicas sobre os dados de perfil do usuário.</span><span class="sxs-lookup"><span data-stu-id="23ddd-114">Read on for specifics on user profile data.</span></span>

> [!NOTE]
> <span data-ttu-id="23ddd-115">Precisa desabilitar o UPD?</span><span class="sxs-lookup"><span data-stu-id="23ddd-115">Need to disable the UPD?</span></span> <span data-ttu-id="23ddd-116">Você pode fazer isso agora - confira a postagem do blog de Pavithra, [Desabilitar Discos de Perfil de Usuário (UPDs) no Azure RemoteApp](https://blogs.technet.microsoft.com/enterprisemobility/2015/11/11/disable-user-profile-disks-upds-in-azure-remoteapp/), para obter detalhes.</span><span class="sxs-lookup"><span data-stu-id="23ddd-116">You can do that now - check out Pavithra's blog post, [Disable User Profile Disks (UPDs) in Azure RemoteApp](https://blogs.technet.microsoft.com/enterprisemobility/2015/11/11/disable-user-profile-disks-upds-in-azure-remoteapp/), for details.</span></span>
> 
> 

## <a name="how-can-an-admin-get-to-the-data"></a><span data-ttu-id="23ddd-117">Como um administrador pode chegar aos dados?</span><span class="sxs-lookup"><span data-stu-id="23ddd-117">How can an admin get to the data?</span></span>
<span data-ttu-id="23ddd-118">Se você precisar acessar os dados para um dos seus usuários (para recuperação de desastres ou se o usuário sair da empresa), entre em contato com o Suporte do Azure e forneça as informações de assinatura para a coleta e a identidade do usuário.</span><span class="sxs-lookup"><span data-stu-id="23ddd-118">If you need to access the data for one of your users (for disaster recovery or if the user leaves the company), contact Azure Support and provide the subscription information for the collection and the user identity.</span></span> <span data-ttu-id="23ddd-119">A equipe do Azure RemoteApp fornece uma URL para o VHD.</span><span class="sxs-lookup"><span data-stu-id="23ddd-119">The Azure RemoteApp team will provide you a URL to the VHD.</span></span> <span data-ttu-id="23ddd-120">Baixe esse VHD e recupere quaisquer documentos ou arquivos que você precisa.</span><span class="sxs-lookup"><span data-stu-id="23ddd-120">Download that VHD and retrieve any documents or files you need.</span></span> <span data-ttu-id="23ddd-121">Observe que o VHD é de 50 GB, por isso levará algum tempo para baixá-lo.</span><span class="sxs-lookup"><span data-stu-id="23ddd-121">Note that the VHD is 50GB, so it will take a bit to download it.</span></span>

## <a name="is-the-data-backed-up"></a><span data-ttu-id="23ddd-122">É feito backup dos dados?</span><span class="sxs-lookup"><span data-stu-id="23ddd-122">Is the data backed up?</span></span>
<span data-ttu-id="23ddd-123">Sim, vamos salvar um backup dos dados do usuário por localização geográfica.</span><span class="sxs-lookup"><span data-stu-id="23ddd-123">Yes, we save a backup of the user data per geographic location.</span></span> <span data-ttu-id="23ddd-124">Os dados são somente leitura e podem ser acessados da mesma forma que os dados comuns (entre em contato com o Azure RemoteApp para saber), se o data center principal estiver inativo.</span><span class="sxs-lookup"><span data-stu-id="23ddd-124">The data is read-only and can be accessed in the same way as the regular data would be (contact Azure RemoteApp to get it), if the primary data center is down.</span></span> <span data-ttu-id="23ddd-125">Os dados são copiados em tempo real no local de backup e não mantemos cópias de versões diferentes.</span><span class="sxs-lookup"><span data-stu-id="23ddd-125">The data is copied real-time to the backup location and we do not keep copies of different versions.</span></span> <span data-ttu-id="23ddd-126">Assim, se houver dados corrompidos, não poderemos restaurá-los para uma versão válida anteriormente conhecida, mas se o data center principal estiver inativo, você poderá obter os dados do usuário de outro local.</span><span class="sxs-lookup"><span data-stu-id="23ddd-126">So, on data corruption, we will not be able to restore it to a previously known good version but if the primary data center is down, you will be able to get user data from the other location.</span></span>

## <a name="how-do-users-see-the-upd-on-the-server-side"></a><span data-ttu-id="23ddd-127">Como os usuários veem o UPD no lado do servidor?</span><span class="sxs-lookup"><span data-stu-id="23ddd-127">How do users see the UPD on the server side?</span></span>
<span data-ttu-id="23ddd-128">Cada usuário terá seu próprio diretório no servidor que mapeia para seu UPD: c:\Users\username.</span><span class="sxs-lookup"><span data-stu-id="23ddd-128">Each user will have their own directory on the server that maps to their UPD: c:\Users\username.</span></span>

## <a name="whats-the-best-way-to-use-outlook-and-upd"></a><span data-ttu-id="23ddd-129">Qual é a melhor maneira de usar o Outlook e o UPD?</span><span class="sxs-lookup"><span data-stu-id="23ddd-129">What's the best way to use Outlook and UPD?</span></span>
<span data-ttu-id="23ddd-130">O Azure RemoteApp salva o estado do Outlook (caixas de correio, PSTs) entre as sessões.</span><span class="sxs-lookup"><span data-stu-id="23ddd-130">Azure RemoteApp saves the Outlook state (mailboxes, PSTs) between sessions.</span></span> <span data-ttu-id="23ddd-131">Para habilitar isso, precisamos que o PST seja armazenado nos dados de perfil do usuário (c:\users\<username>).</span><span class="sxs-lookup"><span data-stu-id="23ddd-131">To enable this, we need the PST to be stored in the user profile data (c:\users\<username>).</span></span> <span data-ttu-id="23ddd-132">Esse é o local padrão para os dados. Portanto, desde que você não altere o local, os dados serão mantidos entre sessões.</span><span class="sxs-lookup"><span data-stu-id="23ddd-132">This is the default location for the data, so as long as you do not change the location, the data will persist between sessions.</span></span>

<span data-ttu-id="23ddd-133">Também recomendamos que você use o modo "cache" no Outlook e o modo de "servidor/online" para pesquisar.</span><span class="sxs-lookup"><span data-stu-id="23ddd-133">We also recommend that you use "cached" mode in Outlook and use "server/online" mode for searching.</span></span>

<span data-ttu-id="23ddd-134">Confira [este artigo](remoteapp-outlook.md) para obter mais informações sobre como usar o Outlook e o Azure RemoteApp.</span><span class="sxs-lookup"><span data-stu-id="23ddd-134">Check out [this article](remoteapp-outlook.md) for more information on using Outlook and Azure RemoteApp.</span></span>

## <a name="what-about-redirection"></a><span data-ttu-id="23ddd-135">E quanto ao redirecionamento?</span><span class="sxs-lookup"><span data-stu-id="23ddd-135">What about redirection?</span></span>
<span data-ttu-id="23ddd-136">Você pode configurar o Azure RemoteApp para permitir que os usuários acessem dispositivos locais configurando o [redirecionamento](remoteapp-redirection.md).</span><span class="sxs-lookup"><span data-stu-id="23ddd-136">You can configure Azure RemoteApp to let users access local devices by setting up [redirection](remoteapp-redirection.md).</span></span> <span data-ttu-id="23ddd-137">Depois, os dispositivos locais podem acessar os dados no UPD.</span><span class="sxs-lookup"><span data-stu-id="23ddd-137">Local devices will then be able to access the data on the UPD.</span></span>

## <a name="can-i-use-my-upd-as-a-network-share"></a><span data-ttu-id="23ddd-138">Posso usar meu UPD como um compartilhamento de rede?</span><span class="sxs-lookup"><span data-stu-id="23ddd-138">Can I use my UPD as a network share?</span></span>
<span data-ttu-id="23ddd-139">Não.</span><span class="sxs-lookup"><span data-stu-id="23ddd-139">No.</span></span> <span data-ttu-id="23ddd-140">Os UPDs não podem ser usados como um compartilhamento de rede.</span><span class="sxs-lookup"><span data-stu-id="23ddd-140">UPDs cannot be used as a network share.</span></span> <span data-ttu-id="23ddd-141">Um UPD só é disponibilizado ao usuário quando ele está conectado ativamente ao Azure RemoteApp.</span><span class="sxs-lookup"><span data-stu-id="23ddd-141">A UPD is only available to the user when the user is actively connected to Azure RemoteApp.</span></span>

## <a name="if-i-delete-a-user-from-a-collection-is-their-upd-deleted"></a><span data-ttu-id="23ddd-142">Se eu excluir um usuário de uma coleção, seu UPD é excluído?</span><span class="sxs-lookup"><span data-stu-id="23ddd-142">If I delete a user from a collection, is their UPD deleted?</span></span>
<span data-ttu-id="23ddd-143">Não, quando você exclui um usuário, nós não excluímos automaticamente o UPD. Em vez disso, armazenamos os dados até que você exclua a coleção.</span><span class="sxs-lookup"><span data-stu-id="23ddd-143">No, when you delete a user, we do not automatically delete the UPD - instead, we store the data until you delete the collection.</span></span> <span data-ttu-id="23ddd-144">90 dias depois de excluir a coleção, nós excluímos todos os UPDs.</span><span class="sxs-lookup"><span data-stu-id="23ddd-144">90 days after you delete the collection, we delete all UPDs.</span></span> 

<span data-ttu-id="23ddd-145">Se você precisar excluir um UPD de uma coleção, entre em contato com o Azure RemoteApp, pois podemos excluir o UPD do nosso lado.</span><span class="sxs-lookup"><span data-stu-id="23ddd-145">If you need to delete a UPD from a collection, contact Azure RemoteApp - we can delete UPD from our side.</span></span>

## <a name="can-i-access-my-users-upds-either-current-or-deleted-users"></a><span data-ttu-id="23ddd-146">Posso acessar os UPDs dos meus usuários (usuários atuais ou excluídos)?</span><span class="sxs-lookup"><span data-stu-id="23ddd-146">Can I access my users' UPDs (either current or deleted users)?</span></span>
<span data-ttu-id="23ddd-147">Sim, se você entrar em contato com o [Azure RemoteApp](mailto:remoteappforum@microsoft.com), poderemos configurar uma URL para você acessar os dados.</span><span class="sxs-lookup"><span data-stu-id="23ddd-147">Yes, if you contact [Azure RemoteApp](mailto:remoteappforum@microsoft.com), we can set you up with a URL to access the data.</span></span> <span data-ttu-id="23ddd-148">Você tem cerca de 10 horas baixar dados ou arquivos do UPD antes que o acesso expire.</span><span class="sxs-lookup"><span data-stu-id="23ddd-148">You'll have about 10 hours to download any data or files from the UPD before the access expires.</span></span>

## <a name="are-upds-available-offline"></a><span data-ttu-id="23ddd-149">UPDs ficam disponíveis offline?</span><span class="sxs-lookup"><span data-stu-id="23ddd-149">Are UPDs available offline?</span></span>
<span data-ttu-id="23ddd-150">No momento, só oferecemos acesso offline a UPDs dentro da janela de acesso de 10 horas descrita acima.</span><span class="sxs-lookup"><span data-stu-id="23ddd-150">Right now we do not provide offline access to UPDs, beyond the 10 hour access window described above.</span></span> <span data-ttu-id="23ddd-151">Isso significa que não temos uma forma de dar acesso por tempo suficiente para concluir tarefas mais complicadas, como executar um software antivírus nos UPDs ou acessar dados para uma auditoria.</span><span class="sxs-lookup"><span data-stu-id="23ddd-151">This means that we do not currently have a way to provide you with access for long enough to complete more complicated tasks, like running anti-virus software on the UPDs or accessing data for an audit.</span></span>

## <a name="do-registry-key-settings-persist"></a><span data-ttu-id="23ddd-152">As configurações de chave do Registro são persistentes?</span><span class="sxs-lookup"><span data-stu-id="23ddd-152">Do registry key settings persist?</span></span>
<span data-ttu-id="23ddd-153">Sim, todos os elementos escritos em HKEY_Current_User fazem parte do UPD.</span><span class="sxs-lookup"><span data-stu-id="23ddd-153">Yes, anything written to HKEY_Current_User is part of the UPD.</span></span>

## <a name="can-i-disable-upds-for-a-collection"></a><span data-ttu-id="23ddd-154">Posso desativar UPDs para uma coleção?</span><span class="sxs-lookup"><span data-stu-id="23ddd-154">Can I disable UPDs for a collection?</span></span>
<span data-ttu-id="23ddd-155">Sim, você pode pedir ao Azure RemoteApp para desabilitar UPDs para uma assinatura, mas não pode fazer isso por conta própria.</span><span class="sxs-lookup"><span data-stu-id="23ddd-155">Yes, you can ask Azure RemoteApp to disable UPDs for a subscription, but you cannot do that yourself.</span></span> <span data-ttu-id="23ddd-156">Isso significa que os UPDs serão desabilitados para todas as coleções da assinatura.</span><span class="sxs-lookup"><span data-stu-id="23ddd-156">This means that UPDs will be disabled for all collections in the subscription.</span></span>

<span data-ttu-id="23ddd-157">Talvez você queira desabilitar UPDs em qualquer uma das seguintes situações:</span><span class="sxs-lookup"><span data-stu-id="23ddd-157">You might want to disable UPDs in any of the following situations:</span></span> 

* <span data-ttu-id="23ddd-158">Você precisa concluir o acesso e o controle de dados do usuário (para fins de auditoria e de revisão, como instituições financeiras).</span><span class="sxs-lookup"><span data-stu-id="23ddd-158">You need complete access and control of user data (for audit and review purposes such as financial institutions).</span></span>
* <span data-ttu-id="23ddd-159">Você tem soluções de terceiros para o gerenciamento de perfis de usuário e deseja continuar usando-as na implantação do Azure RemoteApp ingressado no domínio.</span><span class="sxs-lookup"><span data-stu-id="23ddd-159">You have 3rd-party user profile management solutions on-premises and want to continue using them in your domain-joined Azure RemoteApp deployment.</span></span> <span data-ttu-id="23ddd-160">Isso exige que o agente de perfil seja carregado na imagem dourada.</span><span class="sxs-lookup"><span data-stu-id="23ddd-160">This would require the profile agent to be loaded into the gold image.</span></span> 
* <span data-ttu-id="23ddd-161">Você não precisa de um armazenamento de dados local nem de ter todos os dados na nuvem ou em um compartilhamento de arquivos e deseja controlar o salvamento de dados no local usando o Azure RemoteApp.</span><span class="sxs-lookup"><span data-stu-id="23ddd-161">You don’t need any local data storage or you have all data in the cloud or file share and would like to control saving of data locally using Azure RemoteApp.</span></span>

<span data-ttu-id="23ddd-162">Veja [Desabilitar Discos de Perfil do Usuário (UPDs) no Azure RemoteApp](https://blogs.technet.microsoft.com/enterprisemobility/2015/11/11/disable-user-profile-disks-upds-in-azure-remoteapp/) para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="23ddd-162">See  [Disable User Profile Disks (UPDs) in Azure RemoteApp](https://blogs.technet.microsoft.com/enterprisemobility/2015/11/11/disable-user-profile-disks-upds-in-azure-remoteapp/) for more information.</span></span>

## <a name="can-i-restrict-users-from-saving-data-to-the-system-drive"></a><span data-ttu-id="23ddd-163">Posso impedir que os usuários salvem dados na unidade do sistema?</span><span class="sxs-lookup"><span data-stu-id="23ddd-163">Can I restrict users from saving data to the system drive?</span></span>
<span data-ttu-id="23ddd-164">Sim, mas você precisa configurar isso na imagem de modelo antes de criar a coleção.</span><span class="sxs-lookup"><span data-stu-id="23ddd-164">Yes, but you'll need to set that up in the template image before you create the collection.</span></span> <span data-ttu-id="23ddd-165">Use as etapas a seguir para bloquear o acesso à unidade do sistema:</span><span class="sxs-lookup"><span data-stu-id="23ddd-165">Use the following steps to block access to the system drive:</span></span>

1. <span data-ttu-id="23ddd-166">Execute **gpedit.msc** na imagem do modelo.</span><span class="sxs-lookup"><span data-stu-id="23ddd-166">Run **gpedit.msc** on the template image.</span></span>
2. <span data-ttu-id="23ddd-167">Navegue até **Configuração do Usuário > Modelos Administrativos > Componentes do Windows > Explorer**.</span><span class="sxs-lookup"><span data-stu-id="23ddd-167">Navigate to **User Configuration > Administrative Templates > Windows Components > Explorer**.</span></span>
3. <span data-ttu-id="23ddd-168">Selecione as seguintes opções:</span><span class="sxs-lookup"><span data-stu-id="23ddd-168">Select the following options:</span></span>
   * <span data-ttu-id="23ddd-169">**Ocultar estas unidades especificadas em Meu Computador**</span><span class="sxs-lookup"><span data-stu-id="23ddd-169">**Hide these specified drives in My Computer**</span></span>
   * <span data-ttu-id="23ddd-170">**Impedir o acesso a unidades de Meu Computador**</span><span class="sxs-lookup"><span data-stu-id="23ddd-170">**Prevent access to drives from My Computer**</span></span>

## <a name="can-i-seed-upds-i-want-to-put-some-data-in-the-upd-thats-available-the-first-time-the-user-signs-in"></a><span data-ttu-id="23ddd-171">Eu posso propagar UPDs?</span><span class="sxs-lookup"><span data-stu-id="23ddd-171">Can I seed UPDs?</span></span> <span data-ttu-id="23ddd-172">Eu quero colocar alguns dados no UPD que fiquem disponíveis na primeira vez que o usuário se conecta.</span><span class="sxs-lookup"><span data-stu-id="23ddd-172">I want to put some data in the UPD that's available the first time the user signs in.</span></span>
<span data-ttu-id="23ddd-173">Sim, ao criar a imagem de modelo, você pode adicionar informações ao perfil padrão.</span><span class="sxs-lookup"><span data-stu-id="23ddd-173">Yes, when you create the template image, you can add information to the default profile.</span></span> <span data-ttu-id="23ddd-174">Essa informação é adicionada ao UPD.</span><span class="sxs-lookup"><span data-stu-id="23ddd-174">That information is then added to the UPD.</span></span>

## <a name="can-i-change-the-size-of-the-upd-depending-on-how-much-data-i-want-to-store"></a><span data-ttu-id="23ddd-175">Posso alterar o tamanho do UPD dependendo da quantidade de dados que desejo armazenar?</span><span class="sxs-lookup"><span data-stu-id="23ddd-175">Can I change the size of the UPD depending on how much data I want to store?</span></span>
<span data-ttu-id="23ddd-176">Não, todos os UPDs têm 50 GB de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="23ddd-176">No, all UPDs have 50 GB of storage.</span></span> <span data-ttu-id="23ddd-177">Se você quiser armazenar diferentes quantidades de dados, tente o seguinte:</span><span class="sxs-lookup"><span data-stu-id="23ddd-177">If you want to store different amounts of data, try the following:</span></span>

1. <span data-ttu-id="23ddd-178">Desabilite UPDs para a coleção.</span><span class="sxs-lookup"><span data-stu-id="23ddd-178">Disable UPDs for the collection.</span></span>
2. <span data-ttu-id="23ddd-179">Configure um compartilhamento de arquivos para que os usuários acessem.</span><span class="sxs-lookup"><span data-stu-id="23ddd-179">Set up a file share for users to access.</span></span>
3. <span data-ttu-id="23ddd-180">Carregue o compartilhamento de arquivos usando um script de inicialização.</span><span class="sxs-lookup"><span data-stu-id="23ddd-180">Load the file share by using a startup script.</span></span> <span data-ttu-id="23ddd-181">Consulte abaixo para obter detalhes sobre scripts de inicialização no Azure RemoteApp.</span><span class="sxs-lookup"><span data-stu-id="23ddd-181">See below for details on startup scripts in Azure RemoteApp.</span></span>
4. <span data-ttu-id="23ddd-182">Oriente os usuários a salvar todos os dados para o compartilhamento de arquivos.</span><span class="sxs-lookup"><span data-stu-id="23ddd-182">Direct users to save all data to the file share.</span></span>

## <a name="how-do-i-run-a-startup-script-in-azure-remoteapp"></a><span data-ttu-id="23ddd-183">Como posso executar um script de inicialização no Azure RemoteApp?</span><span class="sxs-lookup"><span data-stu-id="23ddd-183">How do I run a startup script in Azure RemoteApp?</span></span>
<span data-ttu-id="23ddd-184">Se você quiser executar um script de inicialização, comece criando uma tarefa agendada na imagem do modelo que você vai usar para a coleção.</span><span class="sxs-lookup"><span data-stu-id="23ddd-184">If you want to run a startup script, start by creating a scheduled task in the template image you are going to use for the collection.</span></span> <span data-ttu-id="23ddd-185">(Faça isso *antes* de executar o sysprep).</span><span class="sxs-lookup"><span data-stu-id="23ddd-185">(Do this *before* you run sysprep.)</span></span> 

![Criar uma tarefa do sistema](./media/remoteapp-upd/upd1.png)

![Criar uma tarefa do sistema que seja executada quando um usuário fizer logon](./media/remoteapp-upd/upd2.png)

<span data-ttu-id="23ddd-188">Na guia **Geral**, certifique-se de alterar a **Conta de Usuário** em Segurança para "BUILTIN\Usuários".</span><span class="sxs-lookup"><span data-stu-id="23ddd-188">On the **General** tab, be sure to change the **User Account** under Security to "BUILTIN\Users."</span></span>

![Alterar a conta de usuário para um grupo](./media/remoteapp-upd/upd4.png)

<span data-ttu-id="23ddd-190">A tarefa agendada abre o script de inicialização usando as credenciais do usuário.</span><span class="sxs-lookup"><span data-stu-id="23ddd-190">The scheduled task will launch your startup script, using the user's credentials.</span></span> <span data-ttu-id="23ddd-191">Agende a tarefa para ser executada toda vez que um usuário fizer logon.</span><span class="sxs-lookup"><span data-stu-id="23ddd-191">Schedule the task to run every a time a user logs on.</span></span>

![Defina o disparador para a tarefa "No logon"](./media/remoteapp-upd/upd3.png)

<span data-ttu-id="23ddd-193">Você também pode usar [scripts de inicialização baseados na Política de Grupo](https://technet.microsoft.com/library/cc779329%28v=ws.10%29.aspx).</span><span class="sxs-lookup"><span data-stu-id="23ddd-193">You can also use [Group Policy-based startup scripts](https://technet.microsoft.com/library/cc779329%28v=ws.10%29.aspx).</span></span> 

## <a name="what-about-placing-a-startup-script-in-the-start-menu-would-that-work"></a><span data-ttu-id="23ddd-194">E quanto a colocar um script de inicialização no menu Iniciar?</span><span class="sxs-lookup"><span data-stu-id="23ddd-194">What about placing a startup script in the Start menu?</span></span> <span data-ttu-id="23ddd-195">Isso funcionaria?</span><span class="sxs-lookup"><span data-stu-id="23ddd-195">Would that work?</span></span>
<span data-ttu-id="23ddd-196">Em outras palavras, posso criar um arquivo .bat que execute um script de configuração de janela e salvá-lo na pasta c:\ProgramData\Microsoft\Windows\Start Menu\Programs\StartUp e, em seguida, executar esse script sempre que um usuário inicia uma sessão do RemoteApp?</span><span class="sxs-lookup"><span data-stu-id="23ddd-196">In other words, can I create a .bat file that runs a config window script and save it to the c:\ProgramData\Microsoft\Windows\Start Menu\Programs\StartUp folder, and then have that script run whenever a user starts a RemoteApp session?</span></span>

<span data-ttu-id="23ddd-197">Não, não há suporte para isso com o Azure RemoteApp, que usa RDSH, que também não oferece suporte a scripts de inicialização no menu Iniciar.</span><span class="sxs-lookup"><span data-stu-id="23ddd-197">No, that's not supported with Azure RemoteApp, which uses RDSH, which also does not support startup scripts in the Start menu.</span></span>

## <a name="can-i-use-mstscexe-the-remote-desktop-program-to-configure-logon-scripts"></a><span data-ttu-id="23ddd-198">Posso usar mstsc.exe (o programa Área de Trabalho Remota) para configurar os scripts de logon?</span><span class="sxs-lookup"><span data-stu-id="23ddd-198">Can I use mstsc.exe (the Remote Desktop program) to configure logon scripts?</span></span>
<span data-ttu-id="23ddd-199">Não, não há suporte para isso com o Azure RemoteApp.</span><span class="sxs-lookup"><span data-stu-id="23ddd-199">Nope, not supported by Azure RemoteApp.</span></span>

## <a name="can-i-store-data-on-the-vm-locally"></a><span data-ttu-id="23ddd-200">Posso armazenar dados na VM localmente?</span><span class="sxs-lookup"><span data-stu-id="23ddd-200">Can I store data on the VM locally?</span></span>
<span data-ttu-id="23ddd-201">NÃO, os dados armazenados em qualquer lugar na VM que não o UPD serão perdidos.</span><span class="sxs-lookup"><span data-stu-id="23ddd-201">NO, data stored anywhere on the VM other than in the UPD will be lost.</span></span> <span data-ttu-id="23ddd-202">Há uma chance de alta de que o usuário não receba a mesma VM na próxima vez que ele se conectar ao Azure RemoteApp.</span><span class="sxs-lookup"><span data-stu-id="23ddd-202">There is a high chance the user will not get the same VM the next time that they sign into Azure RemoteApp.</span></span> <span data-ttu-id="23ddd-203">Nós não mantemos persistência de VM do usuário, assim, o usuário não se conectará à mesma VM e os dados serão perdidos.</span><span class="sxs-lookup"><span data-stu-id="23ddd-203">We do not maintain user-VM persistence, so the user will not sign into the same VM, and the data will be lost.</span></span> <span data-ttu-id="23ddd-204">Além disso, quando atualizamos a coleção, as VMs existentes são substituídas por um novo conjunto de VMs, o que significa que todos os dados armazenados na própria VM são perdidos.</span><span class="sxs-lookup"><span data-stu-id="23ddd-204">Additionally, when we update the collection, the existing VMs are replaced with a new set of VMs - that means any data stored on the VM itself is lost.</span></span> <span data-ttu-id="23ddd-205">A recomendação é armazenar dados no UPD, armazenamento compartilhado, como arquivos do Azure, um servidor de arquivos em uma VNET ou na nuvem usando um sistema de armazenamento de nuvem com suporte, como o DropBox.</span><span class="sxs-lookup"><span data-stu-id="23ddd-205">The recommendation is to store data in the UPD, shared storage like Azure Files, a file server inside a VNET, or on the cloud using a cloud storage system like DropBox.</span></span>

## <a name="how-do-i-mount-an-azure-file-share-on-a-vm-using-powershell"></a><span data-ttu-id="23ddd-206">Como posso montar um compartilhamento de Arquivos do Azure em uma VM usando o PowerShell?</span><span class="sxs-lookup"><span data-stu-id="23ddd-206">How do I mount an Azure File share on a VM, using PowerShell?</span></span>
<span data-ttu-id="23ddd-207">Você pode usar o cmdlet PSDrive Net para montar a unidade da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="23ddd-207">You can use the Net-PSDrive cmdlet to mount the drive, as follows:</span></span>

    New-PSDrive -Name <drive-name> -PSProvider FileSystem -Root \\<storage-account-name>.file.core.windows.net\<share-name> -Credential :<storage-account-name>


<span data-ttu-id="23ddd-208">Você também pode salvar suas credenciais executando o seguinte:</span><span class="sxs-lookup"><span data-stu-id="23ddd-208">You can also save your credentials by running the following:</span></span>

    cmdkey /add:<storage-account-name>.file.core.windows.net /user:<storage-account-name> /pass:<storage-account-key>


<span data-ttu-id="23ddd-209">Isso permite ignorar o parâmetro -Credential no cmdlet New-PSDrive.</span><span class="sxs-lookup"><span data-stu-id="23ddd-209">That lets you skip the -Credential parameter in the New-PSDrive cmdlet.</span></span>

