---
title: "Lição 4 do tutorial do Azure Analysis Services: criar relações | Microsoft Docs"
description: "Descreve como criar relações no projeto de tutorial do Azure Analysis Services."
services: analysis-services
documentationcenter: 
author: minewiskan
manager: erikre
editor: 
tags: 
ms.assetid: 
ms.service: analysis-services
ms.devlang: NA
ms.topic: get-started-article
ms.tgt_pltfrm: NA
ms.workload: na
ms.date: 05/26/2017
ms.author: owend
ms.openlocfilehash: d79af3915c718a79f60e5f589527eb4c2ae8b367
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/11/2017
---
# <a name="lesson-4-create-relationships"></a><span data-ttu-id="e5a92-103">Lição 4: criar relações</span><span class="sxs-lookup"><span data-stu-id="e5a92-103">Lesson 4: Create relationships</span></span>

[!INCLUDE[analysis-services-appliesto-aas-sql2017-later](../../../includes/analysis-services-appliesto-aas-sql2017-later.md)]

<span data-ttu-id="e5a92-104">Nesta lição, você verifica as relações que foram criadas automaticamente quando você importou dados e adicionou novas relações entre tabelas diferentes.</span><span class="sxs-lookup"><span data-stu-id="e5a92-104">In this lesson, you verify the relationships that were created automatically when you imported data and add new relationships between different tables.</span></span> <span data-ttu-id="e5a92-105">Uma relação é uma conexão entre duas tabelas que estabelece como os dados nessas tabelas devem ser correlacionados.</span><span class="sxs-lookup"><span data-stu-id="e5a92-105">A relationship is a connection between two tables that establishes how the data in those tables should be correlated.</span></span> <span data-ttu-id="e5a92-106">Por exemplo, as tabelas DimProduct e DimProductSubcategory têm uma relação baseada no fato de que cada produto pertence a uma subcategoria.</span><span class="sxs-lookup"><span data-stu-id="e5a92-106">For example, the DimProduct table and the DimProductSubcategory table have a relationship based on the fact that each product belongs to a subcategory.</span></span> <span data-ttu-id="e5a92-107">Para saber mais, consulte [Relações](https://docs.microsoft.com/sql/analysis-services/tabular-models/relationships-ssas-tabular).</span><span class="sxs-lookup"><span data-stu-id="e5a92-107">To learn more, see [Relationships](https://docs.microsoft.com/sql/analysis-services/tabular-models/relationships-ssas-tabular).</span></span>
  
<span data-ttu-id="e5a92-108">Tempo estimado para conclusão desta lição: **10 minutos**</span><span class="sxs-lookup"><span data-stu-id="e5a92-108">Estimated time to complete this lesson: **10 minutes**</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="e5a92-109">Pré-requisitos</span><span class="sxs-lookup"><span data-stu-id="e5a92-109">Prerequisites</span></span>  
<span data-ttu-id="e5a92-110">Este tópico faz parte de um tutorial de modelagem tabular, que deve ser concluído na devida ordem.</span><span class="sxs-lookup"><span data-stu-id="e5a92-110">This topic is part of a tabular modeling tutorial, which should be completed in order.</span></span> <span data-ttu-id="e5a92-111">Antes de executar as tarefas nesta lição, você deve ter concluído a lição anterior: [Lição 3: marcar como tabela de data](../tutorials/aas-lesson-3-mark-as-date-table.md).</span><span class="sxs-lookup"><span data-stu-id="e5a92-111">Before performing the tasks in this lesson, you should have completed the previous lesson: [Lesson 3: Mark as Date Table](../tutorials/aas-lesson-3-mark-as-date-table.md).</span></span> 
  
## <a name="review-existing-relationships-and-add-new-relationships"></a><span data-ttu-id="e5a92-112">Examinar relações existentes e adicionar novas relações</span><span class="sxs-lookup"><span data-stu-id="e5a92-112">Review existing relationships and add new relationships</span></span>  
<span data-ttu-id="e5a92-113">Quando você importou dados por meio de Obter Dados, você obteve sete tabelas do banco de dados AdventureWorksDW2014.</span><span class="sxs-lookup"><span data-stu-id="e5a92-113">When you imported data by using Get Data, you got seven tables from the AdventureWorksDW2014 database.</span></span> <span data-ttu-id="e5a92-114">Geralmente, quando você importa dados de uma fonte relacional, as relações existentes são importadas automaticamente junto com os dados.</span><span class="sxs-lookup"><span data-stu-id="e5a92-114">Generally, when you import data from a relational source, existing relationships are automatically imported together with the data.</span></span> <span data-ttu-id="e5a92-115">No entanto, antes de prosseguir com a criação de seu modelo, você deve verificar se essas relações entre tabelas foram criadas corretamente.</span><span class="sxs-lookup"><span data-stu-id="e5a92-115">However, before you proceed with authoring your model you should verify those relationships between tables were created properly.</span></span> <span data-ttu-id="e5a92-116">Para este tutorial, você também adicionará três novas relações.</span><span class="sxs-lookup"><span data-stu-id="e5a92-116">For this tutorial, you add three new relationships.</span></span>  
  
#### <a name="to-review-existing-relationships"></a><span data-ttu-id="e5a92-117">Para examinar relações existentes</span><span class="sxs-lookup"><span data-stu-id="e5a92-117">To review existing relationships</span></span>  
  
1.  <span data-ttu-id="e5a92-118">Clique no menu **Modelo** > **Exibição de Modelo** > **Exibição de Diagrama**.</span><span class="sxs-lookup"><span data-stu-id="e5a92-118">Click the **Model** menu > **Model View** > **Diagram View**.</span></span>  

    <span data-ttu-id="e5a92-119">O designer de modelo agora aparece na Exibição de Diagrama, um formato gráfico que exibe todas as tabelas que você importou com linhas entre elas.</span><span class="sxs-lookup"><span data-stu-id="e5a92-119">The model designer now appears in Diagram View, a graphical format displaying all the tables you imported with lines between them.</span></span> <span data-ttu-id="e5a92-120">As linhas entre as tabelas indicam as relações que foram criadas automaticamente quando você importou os dados.</span><span class="sxs-lookup"><span data-stu-id="e5a92-120">The lines between tables indicate the relationships that were automatically created when you imported the data.</span></span>
    
    ![aas-lesson4-diagram](../tutorials/media/aas-lesson4-diagram.png)
  
    <span data-ttu-id="e5a92-122">Inclua o maior número possível de tabelas usando os controles de minimapa no canto inferior direito do designer de modelos.</span><span class="sxs-lookup"><span data-stu-id="e5a92-122">Include as many of the tables as possible by using minimap controls in the lower-right corner of the model designer.</span></span> <span data-ttu-id="e5a92-123">Também é possível clicar e arrastar tabelas para locais diferentes, aproximando as tabelas ou colocando-as em uma ordem específica.</span><span class="sxs-lookup"><span data-stu-id="e5a92-123">You can also click and drag tables to different locations, bringing tables closer together, or putting them in a particular order.</span></span> <span data-ttu-id="e5a92-124">Mover tabelas não afeta as relações já existentes entre elas.</span><span class="sxs-lookup"><span data-stu-id="e5a92-124">Moving tables does not affect the relationships already between the tables.</span></span> <span data-ttu-id="e5a92-125">Para exibir todas as colunas em uma tabela específica, clique e arraste uma borda de tabela para expandi-la ou diminuí-la.</span><span class="sxs-lookup"><span data-stu-id="e5a92-125">To view all the columns in a particular table, click and drag on a table edge to expand or make it smaller.</span></span>  
  
2.  <span data-ttu-id="e5a92-126">Clique na linha sólida entre a tabela **DimCustomer** e a tabela **DimGeography**.</span><span class="sxs-lookup"><span data-stu-id="e5a92-126">Click the solid line between the **DimCustomer** table and the **DimGeography** table.</span></span> <span data-ttu-id="e5a92-127">A linha sólida entre essas duas tabelas mostra que essa relação está ativa, ou seja, ela é usada por padrão ao calcular fórmulas DAX.</span><span class="sxs-lookup"><span data-stu-id="e5a92-127">The solid line between these two tables shows this relationship is active, that is, it is used by default when calculating DAX formulas.</span></span>  
  
    <span data-ttu-id="e5a92-128">Observe que ambas a coluna **GeographyKey** na tabela **DimCustomer** e a coluna **GeographyKey** na tabela **DimGeography** aparecem agora cada uma dentro de uma caixa.</span><span class="sxs-lookup"><span data-stu-id="e5a92-128">Notice the **GeographyKey** column in the **DimCustomer** table and the **GeographyKey** column in the **DimGeography** table now both each appear within a box.</span></span> <span data-ttu-id="e5a92-129">Essas colunas são usadas na relação.</span><span class="sxs-lookup"><span data-stu-id="e5a92-129">These columns are used in the relationship.</span></span> <span data-ttu-id="e5a92-130">As propriedades da relação agora também aparecem na janela **Propriedades**.</span><span class="sxs-lookup"><span data-stu-id="e5a92-130">The relationship’s properties now also appear in the **Properties** window.</span></span>  
  
    > [!TIP]  
    > <span data-ttu-id="e5a92-131">Além de usar o designer de modelo na exibição de diagrama, você também pode usar a caixa de diálogo Gerenciar Relações para mostrar as relações entre todas as tabelas em um formato de tabela.</span><span class="sxs-lookup"><span data-stu-id="e5a92-131">In addition to using the model designer in diagram view, you can also use the Manage Relationships dialog box to show the relationships between all tables in a table format.</span></span> <span data-ttu-id="e5a92-132">No Gerenciador de Modelos tabulares, clique com o botão direito do mouse em **Relações** > **Gerenciar Relações**.</span><span class="sxs-lookup"><span data-stu-id="e5a92-132">In Tabular Model Explorer, right-click **Relationships** > **Manage Relationships**.</span></span>
  
3.  <span data-ttu-id="e5a92-133">Verifique se as seguintes relações foram criadas quando cada uma das tabelas foi importada do banco de dados AdventureWorksDW:</span><span class="sxs-lookup"><span data-stu-id="e5a92-133">Verify the following relationships were created when each of the tables were imported from the AdventureWorksDW database:</span></span>  
  
    |<span data-ttu-id="e5a92-134">Ativo</span><span class="sxs-lookup"><span data-stu-id="e5a92-134">Active</span></span>|<span data-ttu-id="e5a92-135">Tabela</span><span class="sxs-lookup"><span data-stu-id="e5a92-135">Table</span></span>|<span data-ttu-id="e5a92-136">Tabela de Pesquisa Relacionada</span><span class="sxs-lookup"><span data-stu-id="e5a92-136">Related Lookup Table</span></span>|  
    |----------|---------|------------------------|  
    |<span data-ttu-id="e5a92-137">Sim</span><span class="sxs-lookup"><span data-stu-id="e5a92-137">Yes</span></span>|<span data-ttu-id="e5a92-138">**DimCustomer [GeographyKey]**</span><span class="sxs-lookup"><span data-stu-id="e5a92-138">**DimCustomer [GeographyKey]**</span></span>|<span data-ttu-id="e5a92-139">**DimGeography [GeographyKey]**</span><span class="sxs-lookup"><span data-stu-id="e5a92-139">**DimGeography [GeographyKey]**</span></span>|  
    |<span data-ttu-id="e5a92-140">Sim</span><span class="sxs-lookup"><span data-stu-id="e5a92-140">Yes</span></span>|<span data-ttu-id="e5a92-141">**DimProduct [ProductSubcategoryKey]**</span><span class="sxs-lookup"><span data-stu-id="e5a92-141">**DimProduct [ProductSubcategoryKey]**</span></span>|<span data-ttu-id="e5a92-142">**DimProductSubcategory [ProductSubcategoryKey]**</span><span class="sxs-lookup"><span data-stu-id="e5a92-142">**DimProductSubcategory [ProductSubcategoryKey]**</span></span>|  
    |<span data-ttu-id="e5a92-143">Sim</span><span class="sxs-lookup"><span data-stu-id="e5a92-143">Yes</span></span>|<span data-ttu-id="e5a92-144">**DimProductSubcategory [ProductCategoryKey]**</span><span class="sxs-lookup"><span data-stu-id="e5a92-144">**DimProductSubcategory [ProductCategoryKey]**</span></span>|<span data-ttu-id="e5a92-145">**DimProductCategory [ProductCategoryKey]**</span><span class="sxs-lookup"><span data-stu-id="e5a92-145">**DimProductCategory [ProductCategoryKey]**</span></span>|  
    |<span data-ttu-id="e5a92-146">Sim</span><span class="sxs-lookup"><span data-stu-id="e5a92-146">Yes</span></span>|<span data-ttu-id="e5a92-147">**FactInternetSales [CustomerKey]**</span><span class="sxs-lookup"><span data-stu-id="e5a92-147">**FactInternetSales [CustomerKey]**</span></span>|<span data-ttu-id="e5a92-148">**DimCustomer [CustomerKey]**</span><span class="sxs-lookup"><span data-stu-id="e5a92-148">**DimCustomer [CustomerKey]**</span></span>|  
    |<span data-ttu-id="e5a92-149">Sim</span><span class="sxs-lookup"><span data-stu-id="e5a92-149">Yes</span></span>|<span data-ttu-id="e5a92-150">**FactInternetSales [ProductKey]**</span><span class="sxs-lookup"><span data-stu-id="e5a92-150">**FactInternetSales [ProductKey]**</span></span>|<span data-ttu-id="e5a92-151">**DimProduct [ProductKey]**</span><span class="sxs-lookup"><span data-stu-id="e5a92-151">**DimProduct [ProductKey]**</span></span>|  
  
    <span data-ttu-id="e5a92-152">Se qualquer uma das relações estiver ausente, verifique se o modelo inclui as tabelas a seguir: DimCustomer, DimDate, DimGeography, DimProduct, DimProductCategory, DimProductSubcategory e FactInternetSales.</span><span class="sxs-lookup"><span data-stu-id="e5a92-152">If any of the relationships are missing, verify that your model includes the following tables: DimCustomer, DimDate, DimGeography, DimProduct, DimProductCategory, DimProductSubcategory, and FactInternetSales.</span></span> <span data-ttu-id="e5a92-153">Se as tabelas da mesma conexão de fonte de dados forem importadas em momentos distintos, eventuais relações entre essas tabelas não serão criadas e deverão ser criadas manualmente.</span><span class="sxs-lookup"><span data-stu-id="e5a92-153">If tables from the same data source connection are imported at separate times, any relationships between those tables are not be created and must be created manually.</span></span>  

### <a name="take-a-closer-look"></a><span data-ttu-id="e5a92-154">Veja uma análise mais detalhada</span><span class="sxs-lookup"><span data-stu-id="e5a92-154">Take a closer look</span></span>
<span data-ttu-id="e5a92-155">No modo de Exibição de Diagrama, você observará uma seta, um asterisco e um número de linhas que mostram a relação entre as tabelas.</span><span class="sxs-lookup"><span data-stu-id="e5a92-155">In Diagram View, notice an arrow, an asterisk, and a number on the lines that show the relationship between tables.</span></span>

![aas-lesson4-line](../tutorials/media/aas-lesson4-line.png)

<span data-ttu-id="e5a92-157">A seta mostra a direção do filtro.</span><span class="sxs-lookup"><span data-stu-id="e5a92-157">The arrow shows the filter direction.</span></span> <span data-ttu-id="e5a92-158">O asterisco que mostra essa tabela é o lado muitos na cardinalidade da relação e o número um mostra que esta tabela é o lado um da relação.</span><span class="sxs-lookup"><span data-stu-id="e5a92-158">The asterisk shows this table is the many side in the relationship's cardinality, and the one shows this table is the one side of the relationship.</span></span> <span data-ttu-id="e5a92-159">Se você precisar editar uma relação; Por exemplo, alterar a direção de filtragem ou de cardinalidade da relação, clique duas vezes na linha de relação para abrir a caixa de diálogo Editar Relação.</span><span class="sxs-lookup"><span data-stu-id="e5a92-159">If you need to edit a relationship; for example, change the relationship's filter direction or cardinality, double-click the relationship line to open the Edit Relationship dialog.</span></span>

![aas-lesson4-edit](../tutorials/media/aas-lesson4-edit.png)

<span data-ttu-id="e5a92-161">Esses recursos são destinados para modelagem de dados avançada e estão fora do escopo deste tutorial.</span><span class="sxs-lookup"><span data-stu-id="e5a92-161">These features are meant for advanced data modeling and are outside the scope of this tutorial.</span></span> <span data-ttu-id="e5a92-162">Para saber mais, consulte [filtros cruzados bidirecionais para modelos tabulares no Analysis Services](https://docs.microsoft.com/sql/analysis-services/tabular-models/bi-directional-cross-filters-tabular-models-analysis-services).</span><span class="sxs-lookup"><span data-stu-id="e5a92-162">To learn more, see [Bi-directional cross filters for tabular models in Analysis Services](https://docs.microsoft.com/sql/analysis-services/tabular-models/bi-directional-cross-filters-tabular-models-analysis-services).</span></span>

<span data-ttu-id="e5a92-163">Em alguns casos, talvez seja necessário criar relações adicionais entre tabelas no modelo para dar suporte a determinadas lógicas de negócios.</span><span class="sxs-lookup"><span data-stu-id="e5a92-163">In some cases, you may need to create additional relationships between tables in your model to support certain business logic.</span></span> <span data-ttu-id="e5a92-164">Para este tutorial, você precisa criar três relações adicionais entre a tabela FactInternetSales e a tabela DimDate.</span><span class="sxs-lookup"><span data-stu-id="e5a92-164">For this tutorial, you need to create three additional relationships between the FactInternetSales table and the DimDate table.</span></span>  
  
#### <a name="to-add-new-relationships-between-tables"></a><span data-ttu-id="e5a92-165">Para adicionar novas relações entre tabelas</span><span class="sxs-lookup"><span data-stu-id="e5a92-165">To add new relationships between tables</span></span>  
  
1.  <span data-ttu-id="e5a92-166">No designer de modelos, na tabela **FactInternetSales**, clique na coluna **OrderDate** e mantenha o botão do mouse pressionado sobre ela; em seguida, arraste o cursor para a coluna **Data** na tabela **DimDate** e solte.</span><span class="sxs-lookup"><span data-stu-id="e5a92-166">In the model designer, in the **FactInternetSales** table, click, and hold on the **OrderDate** column, then drag the cursor to the **Date** column in the **DimDate** table, and then release.</span></span>  

    <span data-ttu-id="e5a92-167">Uma linha sólida aparece, indicando que você criou uma relação ativa entre a coluna **OrderDate** na tabela **Vendas Pela Internet** e a coluna **Data** na tabela **Data**.</span><span class="sxs-lookup"><span data-stu-id="e5a92-167">A solid line appears showing you have created an active relationship between the **OrderDate** column in the **Internet Sales** table, and the **Date** column in the **Date** table.</span></span> 
  
      ![aas-lesson4-new](../tutorials/media/aas-lesson4-new.png) 
  
    > [!NOTE]  
    > <span data-ttu-id="e5a92-169">Ao criar relações, a direção de cardinalidade e de filtragem entre a tabela primária e a tabela de pesquisa relacionada é selecionada automaticamente.</span><span class="sxs-lookup"><span data-stu-id="e5a92-169">When creating relationships, the cardinality and filter direction between the primary table and the related lookup table is automatically selected.</span></span>  
  
2.  <span data-ttu-id="e5a92-170">Na tabela **FactInternetSales**, clique na coluna **DueDate** e mantenha o botão do mouse pressionado sobre ela; em seguida, arraste o cursor para a coluna **Data** na tabela **DimDate** e solte.</span><span class="sxs-lookup"><span data-stu-id="e5a92-170">In the **FactInternetSales** table, click and hold on the **DueDate** column, then drag the cursor to the **Date** column in the **DimDate** table, and then release.</span></span>  
  
    <span data-ttu-id="e5a92-171">Uma linha pontilhada aparece, indicando que você criou uma relação inativa entre a coluna **DueDate** na tabela **FactInternetSales** e a coluna **Data** na tabela **DimDate**.</span><span class="sxs-lookup"><span data-stu-id="e5a92-171">A dotted line appears showing you have created an inactive relationship between the **DueDate** column in the **FactInternetSales** table, and the **Date** column in the **DimDate** table.</span></span> <span data-ttu-id="e5a92-172">Você pode ter várias relações entre tabelas, mas somente uma relação pode estar ativa por vez.</span><span class="sxs-lookup"><span data-stu-id="e5a92-172">You can have multiple relationships between tables, but only one relationship can be active at a time.</span></span> <span data-ttu-id="e5a92-173">Relações inativas podem passar a ficar ativas para executar agregações especiais em expressões do DAX personalizadas.</span><span class="sxs-lookup"><span data-stu-id="e5a92-173">Inactive relationships can be made active to perform special aggregations in custom DAX expressions.</span></span>  
  
3.  <span data-ttu-id="e5a92-174">Por fim, crie mais uma relação.</span><span class="sxs-lookup"><span data-stu-id="e5a92-174">Finally, create one more relationship.</span></span> <span data-ttu-id="e5a92-175">Na tabela **FactInternetSales**, clique na coluna **ShipDate** e mantenha o botão do mouse pressionado sobre ela; em seguida, arraste o cursor para a coluna **Data** na tabela **DimDate** e solte.</span><span class="sxs-lookup"><span data-stu-id="e5a92-175">In the **FactInternetSales** table, click and hold on the **ShipDate** column, then drag the cursor to the **Date** column in the **DimDate** table, and then release.</span></span>  
    
     ![aas-lesson4-newinactive](../tutorials/media/aas-lesson4-newinactive.png)
  
## <a name="whats-next"></a><span data-ttu-id="e5a92-177">O que vem a seguir?</span><span class="sxs-lookup"><span data-stu-id="e5a92-177">What's next?</span></span>
<span data-ttu-id="e5a92-178">[Lição 5: criar colunas calculadas](../tutorials/aas-lesson-5-create-calculated-columns.md).</span><span class="sxs-lookup"><span data-stu-id="e5a92-178">[Lesson 5: Create calculated columns](../tutorials/aas-lesson-5-create-calculated-columns.md).</span></span>
  
  
  
