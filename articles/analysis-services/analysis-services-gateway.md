---
title: gateway de dados local aaaOn | Microsoft Docs
description: "É necessário se o servidor do Analysis Services no Azure conectar fontes de dados locais tooon um gateway local."
services: analysis-services
documentationcenter: 
author: minewiskan
manager: erikre
editor: 
tags: 
ms.assetid: cd596155-b608-4a34-935e-e45c95d884a9
ms.service: analysis-services
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: na
ms.date: 08/21/2017
ms.author: owend
ms.openlocfilehash: fc7b9c69e6f81b41deb7a5d6d963225593845d84
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="connecting-tooon-premises-data-sources-with-azure-on-premises-data-gateway"></a><span data-ttu-id="f93d7-103">Conectando a fontes de dados locais tooon com Gateway de dados local do Azure</span><span class="sxs-lookup"><span data-stu-id="f93d7-103">Connecting tooon-premises data sources with Azure On-premises Data Gateway</span></span>
<span data-ttu-id="f93d7-104">gateway de dados local Olá atua como uma ponte, fornecendo uma transferência de dados segura entre fontes de dados locais e os servidores de serviços de análise do Azure na nuvem hello.</span><span class="sxs-lookup"><span data-stu-id="f93d7-104">hello on-premises data gateway acts as a bridge, providing secure data transfer between on-premises data sources and your Azure Analysis Services servers in hello cloud.</span></span> <span data-ttu-id="f93d7-105">Adição tooworking com vários servidores de serviços de análise do Azure em hello mesma região, a versão mais recente de saudação do gateway Olá também funciona com os aplicativos lógicos do Azure e Microsoft Flow, aplicativos do Power e Power BI.</span><span class="sxs-lookup"><span data-stu-id="f93d7-105">In addition tooworking with multiple Azure Analysis Services servers in hello same region, hello latest version of hello gateway also works with Azure Logic Apps, Power BI, Power Apps, and Microsoft Flow.</span></span> <span data-ttu-id="f93d7-106">Você pode associar vários serviços em Olá mesma região com um único gateway.</span><span class="sxs-lookup"><span data-stu-id="f93d7-106">You can associate multiple services in hello same region with a single gateway.</span></span> 

 <span data-ttu-id="f93d7-107">Serviços de análise do Azure exige um recurso de gateway no hello mesma região.</span><span class="sxs-lookup"><span data-stu-id="f93d7-107">Azure Analysis Services requires a gateway resource in hello same region.</span></span> <span data-ttu-id="f93d7-108">Por exemplo, se você tiver servidores do Azure Analysis Services na região do Leste dos EUA 2 Olá, você precisa de um recurso de gateway na região Leste dos EUA 2 de saudação.</span><span class="sxs-lookup"><span data-stu-id="f93d7-108">For example, if you have Azure Analysis Services servers in hello East US 2 region, you need a gateway resource in hello East US 2 region.</span></span> <span data-ttu-id="f93d7-109">Vários servidores no Leste dos EUA 2 podem usar Olá mesmo gateway.</span><span class="sxs-lookup"><span data-stu-id="f93d7-109">Multiple servers in East US 2 can use hello same gateway.</span></span>

<span data-ttu-id="f93d7-110">Obtendo a instalação com Olá Olá de gateway primeira vez que é um processo de quatro partes:</span><span class="sxs-lookup"><span data-stu-id="f93d7-110">Getting setup with hello gateway hello first time is a four-part process:</span></span>

- <span data-ttu-id="f93d7-111">**Baixar e executar a instalação** – esta etapa instala um serviço de gateway em um computador em sua organização.</span><span class="sxs-lookup"><span data-stu-id="f93d7-111">**Download and run setup** - This step installs a gateway service on a computer in your organization.</span></span>

- <span data-ttu-id="f93d7-112">**Registre seu gateway** - nesta etapa, você especificar um nome e recuperação de chave para o gateway e selecione uma região, Registrando seu gateway Olá serviço de nuvem do Gateway.</span><span class="sxs-lookup"><span data-stu-id="f93d7-112">**Register your gateway** - In this step, you specify a name and recovery key for your gateway, and select a region, registering your gateway with hello Gateway Cloud Service.</span></span>

- <span data-ttu-id="f93d7-113">**Criar um recurso de gateway no Azure** – nesta etapa, você cria um recurso de gateway em sua assinatura do Azure.</span><span class="sxs-lookup"><span data-stu-id="f93d7-113">**Create a gateway resource in Azure** - In this step, you create a gateway resource in your Azure subscription.</span></span>

- <span data-ttu-id="f93d7-114">**Conectar seus recursos de servidores de gateway tooyour** -uma vez que um recurso de gateway na sua assinatura, você pode começar a se conectar a servidores tooit.</span><span class="sxs-lookup"><span data-stu-id="f93d7-114">**Connect your servers tooyour gateway resource** - Once you have a gateway resource in your subscription, you can begin connecting your servers tooit.</span></span>

<span data-ttu-id="f93d7-115">Uma vez que um recurso de gateway configurado para a sua assinatura, você pode conectar vários servidores e outros serviços tooit.</span><span class="sxs-lookup"><span data-stu-id="f93d7-115">Once you have a gateway resource configured for your subscription, you can connect multiple servers, and other services tooit.</span></span> <span data-ttu-id="f93d7-116">Você só precisa tooinstall um gateway diferente e cria recursos adicionais do gateway se você tiver servidores ou outros serviços em uma região diferente.</span><span class="sxs-lookup"><span data-stu-id="f93d7-116">You only need tooinstall a different gateway and create additional gateway resources if you have servers or other services in a different region.</span></span>

<span data-ttu-id="f93d7-117">tooget iniciado imediatamente, consulte [instalar e configurar o gateway de dados no local](analysis-services-gateway-install.md).</span><span class="sxs-lookup"><span data-stu-id="f93d7-117">tooget started right away, see [Install and configure on-premises data gateway](analysis-services-gateway-install.md).</span></span>

## <span data-ttu-id="f93d7-118"><a name="how-it-works"> </a>Como funciona</span><span class="sxs-lookup"><span data-stu-id="f93d7-118"><a name="how-it-works"> </a>How it works</span></span>
<span data-ttu-id="f93d7-119">gateway de saudação instalar em um computador em sua organização é executado como um serviço do Windows, **gateway de dados no local**.</span><span class="sxs-lookup"><span data-stu-id="f93d7-119">hello gateway you install on a computer in your organization runs as a Windows service, **On-premises data gateway**.</span></span> <span data-ttu-id="f93d7-120">Esse serviço local está registrado com hello serviço de nuvem do Gateway por meio do barramento de serviço do Azure.</span><span class="sxs-lookup"><span data-stu-id="f93d7-120">This local service is registered with hello Gateway Cloud Service through Azure Service Bus.</span></span> <span data-ttu-id="f93d7-121">Em seguida, você cria um Serviço de Nuvem do Gateway do recurso de gateway para sua assinatura do Azure.</span><span class="sxs-lookup"><span data-stu-id="f93d7-121">You then create a gateway resource Gateway Cloud Service for your Azure subscription.</span></span> <span data-ttu-id="f93d7-122">Os serviços de análise do Azure são servidores conectados tooyour recursos de gateway.</span><span class="sxs-lookup"><span data-stu-id="f93d7-122">Your Azure Analysis Services servers are then connected tooyour gateway resource.</span></span> <span data-ttu-id="f93d7-123">Quando modelos em seu tooyour do servidor necessidade tooconnect fontes de dados para processamento de consultas ou no local, uma consulta e dados fluxo percorrerá Olá recurso de gateway, barramento de serviço do Azure, Olá o serviço de gateway de dados local no local e suas fontes de dados.</span><span class="sxs-lookup"><span data-stu-id="f93d7-123">When models on your server need tooconnect tooyour on-premises data sources for queries or processing, a query and data flow traverses hello gateway resource, Azure Service Bus, hello local on-premises data gateway service, and your data sources.</span></span> 

![Como funciona](./media/analysis-services-gateway/aas-gateway-how-it-works.png)

<span data-ttu-id="f93d7-125">Fluxo de dados e consultas:</span><span class="sxs-lookup"><span data-stu-id="f93d7-125">Queries and data flow:</span></span>

1. <span data-ttu-id="f93d7-126">Uma consulta é criada pelo serviço de nuvem Olá com credenciais Olá criptografado para fonte de dados do local de saudação.</span><span class="sxs-lookup"><span data-stu-id="f93d7-126">A query is created by hello cloud service with hello encrypted credentials for hello on-premises data source.</span></span> <span data-ttu-id="f93d7-127">Em seguida, esta foi enviada fila tooa Olá gateway tooprocess.</span><span class="sxs-lookup"><span data-stu-id="f93d7-127">It's then sent tooa queue for hello gateway tooprocess.</span></span>
2. <span data-ttu-id="f93d7-128">serviço de nuvem do gateway Olá analisa consulta hello e envia Olá solicitação toohello [Azure Service Bus](https://azure.microsoft.com/documentation/services/service-bus/).</span><span class="sxs-lookup"><span data-stu-id="f93d7-128">hello gateway cloud service analyzes hello query and pushes hello request toohello [Azure Service Bus](https://azure.microsoft.com/documentation/services/service-bus/).</span></span>
3. <span data-ttu-id="f93d7-129">gateway de dados local Olá sonda hello Azure Service Bus para solicitações pendentes.</span><span class="sxs-lookup"><span data-stu-id="f93d7-129">hello on-premises data gateway polls hello Azure Service Bus for pending requests.</span></span>
4. <span data-ttu-id="f93d7-130">Olá gateway obtém Olá consulta, descriptografa Olá credenciais e conecta-se a fontes de dados toohello com essas credenciais.</span><span class="sxs-lookup"><span data-stu-id="f93d7-130">hello gateway gets hello query, decrypts hello credentials, and connects toohello data sources with those credentials.</span></span>
5. <span data-ttu-id="f93d7-131">gateway Olá envia a fonte de dados de toohello Olá consulta para execução.</span><span class="sxs-lookup"><span data-stu-id="f93d7-131">hello gateway sends hello query toohello data source for execution.</span></span>
6. <span data-ttu-id="f93d7-132">resultados de saudação são enviados da fonte de dados hello, gateway toohello voltar e, em seguida, no serviço de nuvem hello e o servidor.</span><span class="sxs-lookup"><span data-stu-id="f93d7-132">hello results are sent from hello data source, back toohello gateway, and then onto hello cloud service and your server.</span></span>

## <span data-ttu-id="f93d7-133"><a name="windows-service-account"> </a>Conta de Serviço Windows</span><span class="sxs-lookup"><span data-stu-id="f93d7-133"><a name="windows-service-account"> </a>Windows Service account</span></span>
<span data-ttu-id="f93d7-134">Olá, gateway de dados local é configurado toouse *NT SERVICE\PBIEgwService* para credenciais de logon do serviço de Windows hello.</span><span class="sxs-lookup"><span data-stu-id="f93d7-134">hello on-premises data gateway is configured toouse *NT SERVICE\PBIEgwService* for hello Windows service logon credential.</span></span> <span data-ttu-id="f93d7-135">Por padrão, ele tem Olá direito de Logon como um serviço; no contexto de saudação da máquina de saudação que você está instalando gateway hello.</span><span class="sxs-lookup"><span data-stu-id="f93d7-135">By default, it has hello right of Logon as a service; in hello context of hello machine that you are installing hello gateway on.</span></span> <span data-ttu-id="f93d7-136">Essa credencial não é Olá conta usada mesmo local tooon tooconnect fontes de dados ou sua conta do Azure.</span><span class="sxs-lookup"><span data-stu-id="f93d7-136">This credential is not hello same account used tooconnect tooon-premises data sources or your Azure account.</span></span>  

<span data-ttu-id="f93d7-137">Se você tiver problemas com o servidor proxy devido tooauthentication, talvez você queira toochange Windows hello usuário de domínio de tooa de conta de serviço ou gerenciados conta de serviço.</span><span class="sxs-lookup"><span data-stu-id="f93d7-137">If you encounter issues with your proxy server due tooauthentication, you may want toochange hello Windows service account tooa domain user or managed service account.</span></span>

## <span data-ttu-id="f93d7-138"><a name="ports"> </a>Portas</span><span class="sxs-lookup"><span data-stu-id="f93d7-138"><a name="ports"> </a>Ports</span></span>
<span data-ttu-id="f93d7-139">gateway Olá cria uma conexão de saída de tooAzure barramento de serviço.</span><span class="sxs-lookup"><span data-stu-id="f93d7-139">hello gateway creates an outbound connection tooAzure Service Bus.</span></span> <span data-ttu-id="f93d7-140">Ele se comunica nas portas de saída: TCP 443 (padrão), 5671, 5672, 9350 a 9354.</span><span class="sxs-lookup"><span data-stu-id="f93d7-140">It communicates on outbound ports: TCP 443 (default), 5671, 5672, 9350 through 9354.</span></span>  <span data-ttu-id="f93d7-141">Olá gateway não requer portas de entrada.</span><span class="sxs-lookup"><span data-stu-id="f93d7-141">hello gateway does not require inbound ports.</span></span>

<span data-ttu-id="f93d7-142">Recomendamos que você os endereços IP de Olá lista branca para sua região de dados em seu firewall.</span><span class="sxs-lookup"><span data-stu-id="f93d7-142">We recommend you whitelist hello IP addresses for your data region in your firewall.</span></span> <span data-ttu-id="f93d7-143">Você pode baixar Olá [lista de IP de Datacenter do Microsoft Azure](https://www.microsoft.com/download/details.aspx?id=41653).</span><span class="sxs-lookup"><span data-stu-id="f93d7-143">You can download hello [Microsoft Azure Datacenter IP list](https://www.microsoft.com/download/details.aspx?id=41653).</span></span> <span data-ttu-id="f93d7-144">A lista é atualizada semanalmente.</span><span class="sxs-lookup"><span data-stu-id="f93d7-144">This list is updated weekly.</span></span>

> [!NOTE]
> <span data-ttu-id="f93d7-145">Endereços de IP de saudação listadas na lista de IP de Datacenter do Azure Olá estão na notação CIDR.</span><span class="sxs-lookup"><span data-stu-id="f93d7-145">hello IP Addresses listed in hello Azure Datacenter IP list are in CIDR notation.</span></span> <span data-ttu-id="f93d7-146">Por exemplo, 10.0.0.0/24 significa 10.0.0.0 a 10.0.0.24.</span><span class="sxs-lookup"><span data-stu-id="f93d7-146">For example, 10.0.0.0/24 does not mean 10.0.0.0 through 10.0.0.24.</span></span> <span data-ttu-id="f93d7-147">Saiba mais sobre Olá [notação CIDR](http://whatismyipaddress.com/cidr).</span><span class="sxs-lookup"><span data-stu-id="f93d7-147">Learn more about hello [CIDR notation](http://whatismyipaddress.com/cidr).</span></span>
>
>

<span data-ttu-id="f93d7-148">Olá seguem usados pelo gateway de saudação de nomes de domínio Olá totalmente qualificado.</span><span class="sxs-lookup"><span data-stu-id="f93d7-148">hello following are hello fully qualified domain names used by hello gateway.</span></span>

| <span data-ttu-id="f93d7-149">Nomes de domínio</span><span class="sxs-lookup"><span data-stu-id="f93d7-149">Domain names</span></span> | <span data-ttu-id="f93d7-150">Portas de saída</span><span class="sxs-lookup"><span data-stu-id="f93d7-150">Outbound ports</span></span> | <span data-ttu-id="f93d7-151">Descrição</span><span class="sxs-lookup"><span data-stu-id="f93d7-151">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="f93d7-152">*.powerbi.com</span><span class="sxs-lookup"><span data-stu-id="f93d7-152">*.powerbi.com</span></span> |<span data-ttu-id="f93d7-153">80</span><span class="sxs-lookup"><span data-stu-id="f93d7-153">80</span></span> |<span data-ttu-id="f93d7-154">Instalador do hello toodownload HTTP usado.</span><span class="sxs-lookup"><span data-stu-id="f93d7-154">HTTP used toodownload hello installer.</span></span> |
| <span data-ttu-id="f93d7-155">*.powerbi.com</span><span class="sxs-lookup"><span data-stu-id="f93d7-155">*.powerbi.com</span></span> |<span data-ttu-id="f93d7-156">443</span><span class="sxs-lookup"><span data-stu-id="f93d7-156">443</span></span> |<span data-ttu-id="f93d7-157">HTTPS</span><span class="sxs-lookup"><span data-stu-id="f93d7-157">HTTPS</span></span> |
| <span data-ttu-id="f93d7-158">*.analysis.windows.net</span><span class="sxs-lookup"><span data-stu-id="f93d7-158">*.analysis.windows.net</span></span> |<span data-ttu-id="f93d7-159">443</span><span class="sxs-lookup"><span data-stu-id="f93d7-159">443</span></span> |<span data-ttu-id="f93d7-160">HTTPS</span><span class="sxs-lookup"><span data-stu-id="f93d7-160">HTTPS</span></span> |
| <span data-ttu-id="f93d7-161">*.login.windows.net</span><span class="sxs-lookup"><span data-stu-id="f93d7-161">*.login.windows.net</span></span> |<span data-ttu-id="f93d7-162">443</span><span class="sxs-lookup"><span data-stu-id="f93d7-162">443</span></span> |<span data-ttu-id="f93d7-163">HTTPS</span><span class="sxs-lookup"><span data-stu-id="f93d7-163">HTTPS</span></span> |
| <span data-ttu-id="f93d7-164">*.servicebus.windows.net</span><span class="sxs-lookup"><span data-stu-id="f93d7-164">*.servicebus.windows.net</span></span> |<span data-ttu-id="f93d7-165">5671-5672</span><span class="sxs-lookup"><span data-stu-id="f93d7-165">5671-5672</span></span> |<span data-ttu-id="f93d7-166">Advanced Message Queuing Protocol (AMQP)</span><span class="sxs-lookup"><span data-stu-id="f93d7-166">Advanced Message Queuing Protocol (AMQP)</span></span> |
| <span data-ttu-id="f93d7-167">*.servicebus.windows.net</span><span class="sxs-lookup"><span data-stu-id="f93d7-167">*.servicebus.windows.net</span></span> |<span data-ttu-id="f93d7-168">443, 9350-9354</span><span class="sxs-lookup"><span data-stu-id="f93d7-168">443, 9350-9354</span></span> |<span data-ttu-id="f93d7-169">Ouvintes de Retransmissão do Barramento de Serviço por meio de TCP (requer 443 para aquisição de token de Controle de Acesso)</span><span class="sxs-lookup"><span data-stu-id="f93d7-169">Listeners on Service Bus Relay over TCP (requires 443 for Access Control token acquisition)</span></span> |
| <span data-ttu-id="f93d7-170">*.frontend.clouddatahub.net</span><span class="sxs-lookup"><span data-stu-id="f93d7-170">*.frontend.clouddatahub.net</span></span> |<span data-ttu-id="f93d7-171">443</span><span class="sxs-lookup"><span data-stu-id="f93d7-171">443</span></span> |<span data-ttu-id="f93d7-172">HTTPS</span><span class="sxs-lookup"><span data-stu-id="f93d7-172">HTTPS</span></span> |
| <span data-ttu-id="f93d7-173">*.core.windows.net</span><span class="sxs-lookup"><span data-stu-id="f93d7-173">*.core.windows.net</span></span> |<span data-ttu-id="f93d7-174">443</span><span class="sxs-lookup"><span data-stu-id="f93d7-174">443</span></span> |<span data-ttu-id="f93d7-175">HTTPS</span><span class="sxs-lookup"><span data-stu-id="f93d7-175">HTTPS</span></span> |
| <span data-ttu-id="f93d7-176">login.microsoftonline.com</span><span class="sxs-lookup"><span data-stu-id="f93d7-176">login.microsoftonline.com</span></span> |<span data-ttu-id="f93d7-177">443</span><span class="sxs-lookup"><span data-stu-id="f93d7-177">443</span></span> |<span data-ttu-id="f93d7-178">HTTPS</span><span class="sxs-lookup"><span data-stu-id="f93d7-178">HTTPS</span></span> |
| <span data-ttu-id="f93d7-179">*.msftncsi.com</span><span class="sxs-lookup"><span data-stu-id="f93d7-179">*.msftncsi.com</span></span> |<span data-ttu-id="f93d7-180">443</span><span class="sxs-lookup"><span data-stu-id="f93d7-180">443</span></span> |<span data-ttu-id="f93d7-181">Usado tootest conectividade com a internet se gateway hello está inacessível por Olá serviço do Power BI.</span><span class="sxs-lookup"><span data-stu-id="f93d7-181">Used tootest internet connectivity if hello gateway is unreachable by hello Power BI service.</span></span> |
| <span data-ttu-id="f93d7-182">*.microsoftonline p.com</span><span class="sxs-lookup"><span data-stu-id="f93d7-182">*.microsoftonline-p.com</span></span> |<span data-ttu-id="f93d7-183">443</span><span class="sxs-lookup"><span data-stu-id="f93d7-183">443</span></span> |<span data-ttu-id="f93d7-184">Usado para autenticação, dependendo da configuração.</span><span class="sxs-lookup"><span data-stu-id="f93d7-184">Used for authentication depending on configuration.</span></span> |

### <span data-ttu-id="f93d7-185"><a name="force-https"></a>Forçar comunicação HTTPS com o Barramento de Serviço do Azure</span><span class="sxs-lookup"><span data-stu-id="f93d7-185"><a name="force-https"></a>Forcing HTTPS communication with Azure Service Bus</span></span>
<span data-ttu-id="f93d7-186">Você pode forçar Olá toocommunicate de gateway com o barramento de serviço do Azure usando HTTPS em vez de direta TCP; No entanto, fazer assim pode reduzir bastante desempenho.</span><span class="sxs-lookup"><span data-stu-id="f93d7-186">You can force hello gateway toocommunicate with Azure Service Bus by using HTTPS instead of direct TCP; however, doing so can greatly reduce performance.</span></span> <span data-ttu-id="f93d7-187">Você pode modificar Olá *Microsoft.PowerBI.DataMovement.Pipeline.GatewayCore.dll.config* arquivo alterando o valor de saudação do `AutoDetect` muito`Https`.</span><span class="sxs-lookup"><span data-stu-id="f93d7-187">You can modify hello *Microsoft.PowerBI.DataMovement.Pipeline.GatewayCore.dll.config* file by changing hello value from `AutoDetect` too`Https`.</span></span> <span data-ttu-id="f93d7-188">Normalmente, esse arquivo fica localizado em *C:\Arquivos de Programas\Gateway de dados local*.</span><span class="sxs-lookup"><span data-stu-id="f93d7-188">This file is typically located at *C:\Program Files\On-premises data gateway*.</span></span>

```
<setting name="ServiceBusSystemConnectivityModeString" serializeAs="String">
    <value>Https</value>
</setting>
```

## <span data-ttu-id="f93d7-189"><a name="faq"></a>Perguntas frequentes</span><span class="sxs-lookup"><span data-stu-id="f93d7-189"><a name="faq"></a>Frequently asked questions</span></span>

### <a name="general"></a><span data-ttu-id="f93d7-190">Geral</span><span class="sxs-lookup"><span data-stu-id="f93d7-190">General</span></span>

<span data-ttu-id="f93d7-191">**P**: É necessário um gateway para fontes de dados na nuvem hello, como o banco de dados do SQL Azure?</span><span class="sxs-lookup"><span data-stu-id="f93d7-191">**Q**: Do I need a gateway for data sources in hello cloud, such as Azure SQL Database?</span></span> <br/><span data-ttu-id="f93d7-192">
**R:** Não.</span><span class="sxs-lookup"><span data-stu-id="f93d7-192">
**A**: No.</span></span> <span data-ttu-id="f93d7-193">Um gateway se conecta a fontes de dados de locais tooon somente.</span><span class="sxs-lookup"><span data-stu-id="f93d7-193">A gateway connects tooon-premises data sources only.</span></span>

<span data-ttu-id="f93d7-194">**P**: gateway de saudação tem toobe instalado Olá mesmo computador como fonte de dados Olá?</span><span class="sxs-lookup"><span data-stu-id="f93d7-194">**Q**: Does hello gateway have toobe installed on hello same machine as hello data source?</span></span> <br/><span data-ttu-id="f93d7-195">
**R:** Não.</span><span class="sxs-lookup"><span data-stu-id="f93d7-195">
**A**: No.</span></span> <span data-ttu-id="f93d7-196">gateway de saudação conecta toohello fonte de dados usando as informações de conexão de saudação que foi fornecidas.</span><span class="sxs-lookup"><span data-stu-id="f93d7-196">hello gateway connects toohello data source using hello connection information that was provided.</span></span> <span data-ttu-id="f93d7-197">Considere o gateway hello como um aplicativo cliente nesse sentido.</span><span class="sxs-lookup"><span data-stu-id="f93d7-197">Consider hello gateway as a client application in this sense.</span></span> <span data-ttu-id="f93d7-198">Olá gateway só precisa Olá recurso tooconnect toohello nome do servidor que foi fornecido, normalmente de saudação mesmo rede.</span><span class="sxs-lookup"><span data-stu-id="f93d7-198">hello gateway just needs hello capability tooconnect toohello server name that was provided, typically on hello same network.</span></span>

<a name="why-azure-work-school-account"></a>

<span data-ttu-id="f93d7-199">**P**: por que preciso toouse um trabalho ou escolar toosign de conta no?</span><span class="sxs-lookup"><span data-stu-id="f93d7-199">**Q**: Why do I need toouse a work or school account toosign in?</span></span> <br/><span data-ttu-id="f93d7-200">
**Um**: somente, você pode usar um trabalho do Azure ou conta escolar quando você instalar o gateway de dados local hello.</span><span class="sxs-lookup"><span data-stu-id="f93d7-200">
**A**: You can only use an Azure work or school account when you install hello on-premises data gateway.</span></span> <span data-ttu-id="f93d7-201">Sua conta de entrada é armazenada em um locatário gerenciado pelo Azure AD (Azure Active Directory).</span><span class="sxs-lookup"><span data-stu-id="f93d7-201">Your sign-in account is stored in a tenant that's managed by Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="f93d7-202">Geralmente, o nome principal de usuário do sua conta AD do Azure (UPN) corresponde endereço de email de saudação.</span><span class="sxs-lookup"><span data-stu-id="f93d7-202">Usually, your Azure AD account's user principal name (UPN) matches hello email address.</span></span>

<span data-ttu-id="f93d7-203">**P**: Em que local minhas credenciais são armazenadas?</span><span class="sxs-lookup"><span data-stu-id="f93d7-203">**Q**: Where are my credentials stored?</span></span> <br/><span data-ttu-id="f93d7-204">
**Um**: credenciais de saudação que você inserir para uma fonte de dados são criptografadas e armazenadas em Olá serviço de nuvem do Gateway.</span><span class="sxs-lookup"><span data-stu-id="f93d7-204">
**A**: hello credentials that you enter for a data source are encrypted and stored in hello Gateway Cloud Service.</span></span> <span data-ttu-id="f93d7-205">as credenciais de saudação são descriptografadas no gateway de dados local hello.</span><span class="sxs-lookup"><span data-stu-id="f93d7-205">hello credentials are decrypted at hello on-premises data gateway.</span></span>

<span data-ttu-id="f93d7-206">**P**: Há algum requisito de largura de banda de rede?</span><span class="sxs-lookup"><span data-stu-id="f93d7-206">**Q**: Are there any requirements for network bandwidth?</span></span> <br/><span data-ttu-id="f93d7-207">
**R**: Recomendamos que sua conexão de rede tenha uma boa taxa de transferência.</span><span class="sxs-lookup"><span data-stu-id="f93d7-207">
**A**: It's recommend your network connection has good throughput.</span></span> <span data-ttu-id="f93d7-208">Cada ambiente é diferente e quantidade de saudação do envio de dados afeta os resultados de saudação.</span><span class="sxs-lookup"><span data-stu-id="f93d7-208">Every environment is different, and hello amount of data being sent affects hello results.</span></span> <span data-ttu-id="f93d7-209">Uso da rota expressa pode ajudar a tooguarantee um nível de taxa de transferência entre locais e hello datacenters do Azure.</span><span class="sxs-lookup"><span data-stu-id="f93d7-209">Using ExpressRoute could help tooguarantee a level of throughput between on-premises and hello Azure datacenters.</span></span>
<span data-ttu-id="f93d7-210">Você pode usar o hello ferramenta de terceiros Azure Speed Test aplicativo toohelp medidor a taxa de transferência.</span><span class="sxs-lookup"><span data-stu-id="f93d7-210">You can use hello third-party tool Azure Speed Test app toohelp gauge your throughput.</span></span>

<span data-ttu-id="f93d7-211">**P**: o que é a latência de saudação executando consultas tooa fonte de dados do gateway Olá?</span><span class="sxs-lookup"><span data-stu-id="f93d7-211">**Q**: What is hello latency for running queries tooa data source from hello gateway?</span></span> <span data-ttu-id="f93d7-212">O que é a arquitetura recomendada Olá?</span><span class="sxs-lookup"><span data-stu-id="f93d7-212">What is hello best architecture?</span></span> <br/><span data-ttu-id="f93d7-213">
**Um**: tooreduce latência de rede, instalar Olá gateway como fonte de dados toohello fechar possível.</span><span class="sxs-lookup"><span data-stu-id="f93d7-213">
**A**: tooreduce network latency, install hello gateway as close toohello data source as possible.</span></span> <span data-ttu-id="f93d7-214">Se você pode instalar o gateway de saudação na fonte de dados reais hello, essa proximidade minimiza a latência de saudação introduzida.</span><span class="sxs-lookup"><span data-stu-id="f93d7-214">If you can install hello gateway on hello actual data source, this proximity minimizes hello latency introduced.</span></span> <span data-ttu-id="f93d7-215">Considere a possibilidade de datacenters Olá muito.</span><span class="sxs-lookup"><span data-stu-id="f93d7-215">Consider hello datacenters too.</span></span> <span data-ttu-id="f93d7-216">Por exemplo, se o serviço usa o datacenter do Oeste dos EUA hello e você tiver o SQL Server hospedado em uma VM do Azure, sua VM do Azure deve estar no hello Oeste dos EUA muito.</span><span class="sxs-lookup"><span data-stu-id="f93d7-216">For example, if your service uses hello West US datacenter, and you have SQL Server hosted in an Azure VM, your Azure VM should be in hello West US too.</span></span> <span data-ttu-id="f93d7-217">Essa proximidade minimiza a latência e evita cobranças de egresso em Olá VM do Azure.</span><span class="sxs-lookup"><span data-stu-id="f93d7-217">This proximity minimizes latency and avoids egress charges on hello Azure VM.</span></span>

<span data-ttu-id="f93d7-218">**P**: são como os resultados enviados toohello back nuvem?</span><span class="sxs-lookup"><span data-stu-id="f93d7-218">**Q**: How are results sent back toohello cloud?</span></span> <br/><span data-ttu-id="f93d7-219">
**Um**: os resultados são enviados por meio de saudação do Azure Service Bus.</span><span class="sxs-lookup"><span data-stu-id="f93d7-219">
**A**: Results are sent through hello Azure Service Bus.</span></span>

<span data-ttu-id="f93d7-220">**P**: há qualquer gateway toohello de conexões de entrada da nuvem Olá?</span><span class="sxs-lookup"><span data-stu-id="f93d7-220">**Q**: Are there any inbound connections toohello gateway from hello cloud?</span></span> <br/><span data-ttu-id="f93d7-221">
**R:** Não.</span><span class="sxs-lookup"><span data-stu-id="f93d7-221">
**A**: No.</span></span> <span data-ttu-id="f93d7-222">gateway de saudação usa conexões de saída tooAzure barramento de serviço.</span><span class="sxs-lookup"><span data-stu-id="f93d7-222">hello gateway uses outbound connections tooAzure Service Bus.</span></span>

<span data-ttu-id="f93d7-223">**P**: O que acontecerá se eu bloquear conexões de saída?</span><span class="sxs-lookup"><span data-stu-id="f93d7-223">**Q**: What if I block outbound connections?</span></span> <span data-ttu-id="f93d7-224">O que eu preciso tooopen?</span><span class="sxs-lookup"><span data-stu-id="f93d7-224">What do I need tooopen?</span></span> <br/><span data-ttu-id="f93d7-225">
**Um**: Consulte portas hello e hosts que Olá gateway usa.</span><span class="sxs-lookup"><span data-stu-id="f93d7-225">
**A**: See hello ports and hosts that hello gateway uses.</span></span>

<span data-ttu-id="f93d7-226">**P**: O serviço Windows real de saudação chamado?</span><span class="sxs-lookup"><span data-stu-id="f93d7-226">**Q**: What is hello actual Windows service called?</span></span><br/><span data-ttu-id="f93d7-227">
**Um**: em serviços, o gateway de saudação é chamado serviço de gateway de dados local.</span><span class="sxs-lookup"><span data-stu-id="f93d7-227">
**A**: In Services, hello gateway is called On-premises data gateway service.</span></span>

<span data-ttu-id="f93d7-228">**P**: pode Olá serviço Windows do gateway execute com uma conta do Active Directory do Azure?</span><span class="sxs-lookup"><span data-stu-id="f93d7-228">**Q**: Can hello gateway Windows service run with an Azure Active Directory account?</span></span> <br/><span data-ttu-id="f93d7-229">
**R:** Não.</span><span class="sxs-lookup"><span data-stu-id="f93d7-229">
**A**: No.</span></span> <span data-ttu-id="f93d7-230">saudação de serviço do Windows deve ter uma conta válida do Windows.</span><span class="sxs-lookup"><span data-stu-id="f93d7-230">hello Windows service must have a valid Windows account.</span></span> <span data-ttu-id="f93d7-231">Por padrão, o serviço de saudação é executado com hello SID de serviço NT SERVICE\PBIEgwService.</span><span class="sxs-lookup"><span data-stu-id="f93d7-231">By default, hello service runs with hello Service SID, NT SERVICE\PBIEgwService.</span></span>

### <span data-ttu-id="f93d7-232"><a name="high-availability"></a>Alta disponibilidade e recuperação de desastres</span><span class="sxs-lookup"><span data-stu-id="f93d7-232"><a name="high-availability"></a>High availability and disaster recovery</span></span>

<span data-ttu-id="f93d7-233">**P**: Quais opções estão disponíveis para recuperação de desastre?</span><span class="sxs-lookup"><span data-stu-id="f93d7-233">**Q**: What options are available for disaster recovery?</span></span> <br/><span data-ttu-id="f93d7-234">
**Um**: você pode usar toorestore de chave de recuperação de saudação ou mover um gateway.</span><span class="sxs-lookup"><span data-stu-id="f93d7-234">
**A**: You can use hello recovery key toorestore or move a gateway.</span></span> <span data-ttu-id="f93d7-235">Ao instalar o gateway Olá, especifique a chave de recuperação de Olá.</span><span class="sxs-lookup"><span data-stu-id="f93d7-235">When you install hello gateway, specify hello recovery key.</span></span>

<span data-ttu-id="f93d7-236">**P**: qual é o benefício de saudação da chave de recuperação Olá?</span><span class="sxs-lookup"><span data-stu-id="f93d7-236">**Q**: What is hello benefit of hello recovery key?</span></span> <br/><span data-ttu-id="f93d7-237">
**Um**: chave de recuperação Olá fornece uma maneira toomigrate ou recuperar suas configurações de gateway após um desastre.</span><span class="sxs-lookup"><span data-stu-id="f93d7-237">
**A**: hello recovery key provides a way toomigrate or recover your gateway settings after a disaster.</span></span>

## <span data-ttu-id="f93d7-238"><a name="troubleshooting"> </a>Solução de problemas</span><span class="sxs-lookup"><span data-stu-id="f93d7-238"><a name="troubleshooting"> </a>Troubleshooting</span></span>

<span data-ttu-id="f93d7-239">**P**: como ver quais consultas estão sendo enviadas a fonte de dados local toohello?</span><span class="sxs-lookup"><span data-stu-id="f93d7-239">**Q**: How can I see what queries are being sent toohello on-premises data source?</span></span> <br/><span data-ttu-id="f93d7-240">
**Um**: você pode habilitar o rastreamento de consulta, que inclui as consultas de saudação que são enviadas.</span><span class="sxs-lookup"><span data-stu-id="f93d7-240">
**A**: You can enable query tracing, which includes hello queries that are sent.</span></span> <span data-ttu-id="f93d7-241">Lembre-se de consulta toochange toohello valor original quando terminado de solução de problemas de rastreamento novamente.</span><span class="sxs-lookup"><span data-stu-id="f93d7-241">Remember toochange query tracing back toohello original value when done troubleshooting.</span></span> <span data-ttu-id="f93d7-242">Deixar o acompanhamento de consulta ativado cria logs maiores.</span><span class="sxs-lookup"><span data-stu-id="f93d7-242">Leaving query tracing turned on creates larger logs.</span></span>

<span data-ttu-id="f93d7-243">Você também pode examinar ferramentas de rastreamento de consultas disponibilizadas por sua fonte de dados.</span><span class="sxs-lookup"><span data-stu-id="f93d7-243">You can also look at tools that your data source has for tracing queries.</span></span> <span data-ttu-id="f93d7-244">Por exemplo, você pode usar o Extended Events ou o SQL Profiler para SQL Server e Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="f93d7-244">For example, you can use Extended Events or SQL Profiler for SQL Server and Analysis Services.</span></span>

<span data-ttu-id="f93d7-245">**P**: onde estão os logs do gateway Olá?</span><span class="sxs-lookup"><span data-stu-id="f93d7-245">**Q**: Where are hello gateway logs?</span></span> <br/><span data-ttu-id="f93d7-246">
**R**: Veja Logs, mais adiante neste tópico.</span><span class="sxs-lookup"><span data-stu-id="f93d7-246">
**A**: See Logs later in this topic.</span></span>

### <span data-ttu-id="f93d7-247"><a name="update"></a>Atualizar a versão mais recente do toohello</span><span class="sxs-lookup"><span data-stu-id="f93d7-247"><a name="update"></a>Update toohello latest version</span></span>

<span data-ttu-id="f93d7-248">Muitos problemas podem surgir quando a versão do gateway Olá ficará desatualizado.</span><span class="sxs-lookup"><span data-stu-id="f93d7-248">Many issues can surface when hello gateway version becomes outdated.</span></span> <span data-ttu-id="f93d7-249">Como boa prática geral, certifique-se de que você use a versão mais recente do hello.</span><span class="sxs-lookup"><span data-stu-id="f93d7-249">As good general practice, make sure that you use hello latest version.</span></span> <span data-ttu-id="f93d7-250">Se você não tiver atualizado o gateway Olá por um mês ou mais, talvez considere instalar a versão mais recente saudação do gateway de saudação e ver se você pode reproduzir o problema de saudação.</span><span class="sxs-lookup"><span data-stu-id="f93d7-250">If you haven't updated hello gateway for a month or longer, you might consider installing hello latest version of hello gateway, and see if you can reproduce hello issue.</span></span>

### <a name="error-failed-tooadd-user-toogroup--2147463168-pbiegwservice-performance-log-users"></a><span data-ttu-id="f93d7-251">Erro: Falha tooadd toogroup de usuário.</span><span class="sxs-lookup"><span data-stu-id="f93d7-251">Error: Failed tooadd user toogroup.</span></span> <span data-ttu-id="f93d7-252">(-2147463168 PBIEgwService Performance Log Users)</span><span class="sxs-lookup"><span data-stu-id="f93d7-252">(-2147463168 PBIEgwService Performance Log Users)</span></span>

<span data-ttu-id="f93d7-253">Você pode obter esse erro se você tentar tooinstall gateway de saudação em um controlador de domínio, que não tem suporte.</span><span class="sxs-lookup"><span data-stu-id="f93d7-253">You might get this error if you try tooinstall hello gateway on a domain controller, which isn't supported.</span></span> <span data-ttu-id="f93d7-254">Certifique-se de que você implanta o gateway de saudação em um computador que não seja um controlador de domínio.</span><span class="sxs-lookup"><span data-stu-id="f93d7-254">Make sure that you deploy hello gateway on a machine that isn't a domain controller.</span></span>

## <span data-ttu-id="f93d7-255"><a name="logs"></a>Logs</span><span class="sxs-lookup"><span data-stu-id="f93d7-255"><a name="logs"></a>Logs</span></span>

<span data-ttu-id="f93d7-256">Arquivos de log são um recurso importante ao solucionar problemas.</span><span class="sxs-lookup"><span data-stu-id="f93d7-256">Log files are an important resource when troubleshooting.</span></span>

#### <a name="enterprise-gateway-service-logs"></a><span data-ttu-id="f93d7-257">Logs de serviço do gateway corporativo</span><span class="sxs-lookup"><span data-stu-id="f93d7-257">Enterprise gateway service logs</span></span>

`C:\Users\PBIEgwService\AppData\Local\Microsoft\On-premises data gateway\<yyyyymmdd>.<Number>.log`

#### <a name="configuration-logs"></a><span data-ttu-id="f93d7-258">Logs de configuração</span><span class="sxs-lookup"><span data-stu-id="f93d7-258">Configuration logs</span></span>

`C:\Users\<username>\AppData\Local\Microsoft\On-premises data gateway\GatewayConfigurator.log`




#### <a name="event-logs"></a><span data-ttu-id="f93d7-259">Logs de eventos</span><span class="sxs-lookup"><span data-stu-id="f93d7-259">Event logs</span></span>

<span data-ttu-id="f93d7-260">Você pode encontrar hello logs do Gateway de gerenciamento de dados e PowerBIGateway em **Logs de aplicativos e serviços**.</span><span class="sxs-lookup"><span data-stu-id="f93d7-260">You can find hello Data Management Gateway and PowerBIGateway logs under **Application and Services Logs**.</span></span>


## <span data-ttu-id="f93d7-261"><a name="telemetry"></a>Telemetria</span><span class="sxs-lookup"><span data-stu-id="f93d7-261"><a name="telemetry"></a>Telemetry</span></span>
<span data-ttu-id="f93d7-262">Telemetria pode ser usada para monitorar e solucionar problemas.</span><span class="sxs-lookup"><span data-stu-id="f93d7-262">Telemetry can be used for monitoring and troubleshooting.</span></span> <span data-ttu-id="f93d7-263">Por padrão</span><span class="sxs-lookup"><span data-stu-id="f93d7-263">By default</span></span>

<span data-ttu-id="f93d7-264">**tooturn na Telemetria**</span><span class="sxs-lookup"><span data-stu-id="f93d7-264">**tooturn on telemetry**</span></span>

1.  <span data-ttu-id="f93d7-265">Verifique o diretório de cliente do gateway do hello local dados no computador de saudação.</span><span class="sxs-lookup"><span data-stu-id="f93d7-265">Check hello On-premises data gateway client directory on hello computer.</span></span> <span data-ttu-id="f93d7-266">Normalmente, é **%systemdrive%\Program Files\On-premises data gateway**.</span><span class="sxs-lookup"><span data-stu-id="f93d7-266">Typically, it is **%systemdrive%\Program Files\On-premises data gateway**.</span></span> <span data-ttu-id="f93d7-267">Ou, você pode abrir um console de serviços e verifique Olá caminho tooexecutable: uma propriedade de serviço de gateway de dados local hello.</span><span class="sxs-lookup"><span data-stu-id="f93d7-267">Or, you can open a Services console and check hello Path tooexecutable: A property of hello On-premises data gateway service.</span></span>
2.  <span data-ttu-id="f93d7-268">No arquivo de Microsoft.PowerBI.DataMovement.Pipeline.GatewayCore.dll.config de saudação do diretório do cliente.</span><span class="sxs-lookup"><span data-stu-id="f93d7-268">In hello Microsoft.PowerBI.DataMovement.Pipeline.GatewayCore.dll.config file from client directory.</span></span> <span data-ttu-id="f93d7-269">Altere Olá SendTelemetry configuração tootrue.</span><span class="sxs-lookup"><span data-stu-id="f93d7-269">Change hello SendTelemetry setting tootrue.</span></span>
        
    ```
        <setting name="SendTelemetry" serializeAs="String">
                    <value>true</value>
        </setting>
    ```

3.  <span data-ttu-id="f93d7-270">Salve suas alterações e reiniciar o serviço do Windows hello: serviço de gateway de dados local.</span><span class="sxs-lookup"><span data-stu-id="f93d7-270">Save your changes and restart hello Windows service: On-premises data gateway service.</span></span>




## <a name="next-steps"></a><span data-ttu-id="f93d7-271">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="f93d7-271">Next steps</span></span>
* [<span data-ttu-id="f93d7-272">Gerenciar o Analysis Services</span><span class="sxs-lookup"><span data-stu-id="f93d7-272">Manage Analysis Services</span></span>](analysis-services-manage.md)
* [<span data-ttu-id="f93d7-273">Obter dados do Azure Analysis Services</span><span class="sxs-lookup"><span data-stu-id="f93d7-273">Get data from Azure Analysis Services</span></span>](analysis-services-connect.md)
