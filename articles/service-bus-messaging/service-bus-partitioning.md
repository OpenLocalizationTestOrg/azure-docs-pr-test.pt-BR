---
title: "aaaCreate particionada tópicos e filas do barramento de serviço do Azure | Microsoft Docs"
description: "Descreve como os agentes toopartition filas de barramento de serviço e tópicos usando mensagens múltiplas."
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: a0c7d5a2-4876-42cb-8344-a1fc988746e7
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/07/2017
ms.author: sethm;hillaryc
ms.openlocfilehash: 6d42556a0714d6a012dc319f662521c8b0bb958b
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="partitioned-queues-and-topics"></a><span data-ttu-id="1b194-103">Filas e tópicos particionados</span><span class="sxs-lookup"><span data-stu-id="1b194-103">Partitioned queues and topics</span></span>
<span data-ttu-id="1b194-104">O Azure Service Bus emprega agentes de várias mensagens tooprocess mensagens e várias mensagens armazena mensagens toostore.</span><span class="sxs-lookup"><span data-stu-id="1b194-104">Azure Service Bus employs multiple message brokers tooprocess messages and multiple messaging stores toostore messages.</span></span> <span data-ttu-id="1b194-105">Uma fila ou um tópico convencional é manipulado por um único agente de mensagem e armazenado em um repositório de mensagens.</span><span class="sxs-lookup"><span data-stu-id="1b194-105">A conventional queue or topic is handled by a single message broker and stored in one messaging store.</span></span> <span data-ttu-id="1b194-106">Barramento de serviço *partições* habilitar as filas e tópicos, ou *entidades de mensagens*, toobe particionado entre diversos agentes e repositórios de mensagens.</span><span class="sxs-lookup"><span data-stu-id="1b194-106">Service Bus *partitions* enable queues and topics, or *messaging entities*, toobe partitioned across multiple message brokers and messaging stores.</span></span> <span data-ttu-id="1b194-107">Isso significa que Olá taxa de transferência geral de uma entidade particionada não é limitada pelo desempenho de saudação de um único agente de mensagens ou repositório de mensagens.</span><span class="sxs-lookup"><span data-stu-id="1b194-107">This means that hello overall throughput of a partitioned entity is no longer limited by hello performance of a single message broker or messaging store.</span></span> <span data-ttu-id="1b194-108">Além disso, uma interrupção temporária de um repositório de mensagens não torna uma fila ou um tópico particionado indisponível.</span><span class="sxs-lookup"><span data-stu-id="1b194-108">In addition, a temporary outage of a messaging store does not render a partitioned queue or topic unavailable.</span></span> <span data-ttu-id="1b194-109">Filas e tópicos particionados podem conter todos os recursos avançados do Barramento de Serviço, como o suporte a transações e sessões.</span><span class="sxs-lookup"><span data-stu-id="1b194-109">Partitioned queues and topics can contain all advanced Service Bus features, such as support for transactions and sessions.</span></span>

<span data-ttu-id="1b194-110">Para obter informações sobre recursos internos do barramento de serviço, consulte Olá [arquitetura de barramento de serviço] [ Service Bus architecture] artigo.</span><span class="sxs-lookup"><span data-stu-id="1b194-110">For information about Service Bus internals, see hello [Service Bus architecture][Service Bus architecture] article.</span></span>

<span data-ttu-id="1b194-111">O particionamento é habilitado por padrão na criação da entidade em todos os tópicos e filas de mensagens Standard e Premium.</span><span class="sxs-lookup"><span data-stu-id="1b194-111">Partitioning is enabled by default at entity creation on all queues and topics in both Standard and Premium messaging.</span></span> <span data-ttu-id="1b194-112">Você pode criar entidades da camada de mensagens Standard sem particionamento, mas filas e tópicos em um namespace Premium são sempre particionados; essa opção não pode ser desabilitada.</span><span class="sxs-lookup"><span data-stu-id="1b194-112">You can create Standard messaging tier entities without partitioning, but queues and topics in a Premium namespace are always partitioned; this option cannot be disabled.</span></span> 

<span data-ttu-id="1b194-113">Não é possível toochange Olá particionamento opção em uma fila ou tópico existentes nas camadas Standard ou Premium, você só pode definir opção hello quando você criar entidade hello.</span><span class="sxs-lookup"><span data-stu-id="1b194-113">It is not possible toochange hello partitioning option on an existing queue or topic in either Standard or Premium tiers, you can only set hello option when you create hello entity.</span></span>

## <a name="how-it-works"></a><span data-ttu-id="1b194-114">Como ele funciona</span><span class="sxs-lookup"><span data-stu-id="1b194-114">How it works</span></span>

<span data-ttu-id="1b194-115">Cada fila ou tópico particionado consiste em vários fragmentos.</span><span class="sxs-lookup"><span data-stu-id="1b194-115">Each partitioned queue or topic consists of multiple fragments.</span></span> <span data-ttu-id="1b194-116">Cada fragmento é armazenado em um repositório de mensagens diferente e manipulado por um agente de mensagens diferente.</span><span class="sxs-lookup"><span data-stu-id="1b194-116">Each fragment is stored in a different messaging store and handled by a different message broker.</span></span> <span data-ttu-id="1b194-117">Quando uma mensagem é enviada tooa fila ou tópico particionado, o barramento de serviço atribui tooone de mensagem de saudação de fragmentos de saudação.</span><span class="sxs-lookup"><span data-stu-id="1b194-117">When a message is sent tooa partitioned queue or topic, Service Bus assigns hello message tooone of hello fragments.</span></span> <span data-ttu-id="1b194-118">seleção de saudação é feita aleatoriamente pelo barramento de serviço ou usando uma chave de partição que Olá remetente pode especificar.</span><span class="sxs-lookup"><span data-stu-id="1b194-118">hello selection is done randomly by Service Bus or by using a partition key that hello sender can specify.</span></span>

<span data-ttu-id="1b194-119">Quando um cliente deseja tooreceive uma mensagem de uma fila particionada, ou de um tópico particionado tooa da assinatura, o barramento de serviço consulta todos os fragmentos de mensagens, retorna a primeira mensagem de saudação obtidos de qualquer um dos repositórios toohello receptor de mensagens de saudação.</span><span class="sxs-lookup"><span data-stu-id="1b194-119">When a client wants tooreceive a message from a partitioned queue, or from a subscription tooa partitioned topic, Service Bus queries all fragments for messages, then returns hello first message that is obtained from any of hello messaging stores toohello receiver.</span></span> <span data-ttu-id="1b194-120">Barramento de serviço caches Olá outras mensagens e retorna-las quando ele recebe adicionais recebem solicitações.</span><span class="sxs-lookup"><span data-stu-id="1b194-120">Service Bus caches hello other messages and returns them when it receives additional receive requests.</span></span> <span data-ttu-id="1b194-121">Um cliente de recebimento não está ciente do particionamento Olá; Olá voltada para o cliente o comportamento de uma fila ou tópico particionado (por exemplo, ler, concluir, adiar, mensagem morta, pré-busca) é idêntica toohello o comportamento de uma entidade normal.</span><span class="sxs-lookup"><span data-stu-id="1b194-121">A receiving client is not aware of hello partitioning; hello client-facing behavior of a partitioned queue or topic (for example, read, complete, defer, deadletter, prefetching) is identical toohello behavior of a regular entity.</span></span>

<span data-ttu-id="1b194-122">Não há custo adicional ao enviar ou receber uma mensagem de uma fila ou um tópico particionado.</span><span class="sxs-lookup"><span data-stu-id="1b194-122">There is no additional cost when sending a message to, or receiving a message from, a partitioned queue or topic.</span></span>

## <a name="enable-partitioning"></a><span data-ttu-id="1b194-123">Habilitar particionamento</span><span class="sxs-lookup"><span data-stu-id="1b194-123">Enable partitioning</span></span>

<span data-ttu-id="1b194-124">toouse particionada filas e tópicos de barramento de serviço do Azure, use hello Azure SDK versão 2.2 ou posterior, ou especifique `api-version=2013-10` em suas solicitações HTTP.</span><span class="sxs-lookup"><span data-stu-id="1b194-124">toouse partitioned queues and topics with Azure Service Bus, use hello Azure SDK version 2.2 or later, or specify `api-version=2013-10` in your HTTP requests.</span></span>

### <a name="standard"></a><span data-ttu-id="1b194-125">Standard</span><span class="sxs-lookup"><span data-stu-id="1b194-125">Standard</span></span>

<span data-ttu-id="1b194-126">Na camada de mensagem de saudação padrão, você pode criar filas do barramento de serviço e os tópicos em tamanhos de 1, 2, 3, 4 ou 5 GB (o padrão de saudação é de 1 GB).</span><span class="sxs-lookup"><span data-stu-id="1b194-126">In hello Standard messaging tier, you can create Service Bus queues and topics in 1, 2, 3, 4, or 5 GB sizes (hello default is 1 GB).</span></span> <span data-ttu-id="1b194-127">Com o particionamento habilitado, o barramento de serviço cria 16 cópias (16 partições) da entidade Olá para cada GB que você especificar.</span><span class="sxs-lookup"><span data-stu-id="1b194-127">With partitioning enabled, Service Bus creates 16 copies (16 partitions) of hello entity for each GB you specify.</span></span> <span data-ttu-id="1b194-128">Dessa forma, se você criar uma fila que é de 5 GB de tamanho, com 16 partições tamanho máximo da fila de saudação torna-se (5 \* 16) = 80 GB.</span><span class="sxs-lookup"><span data-stu-id="1b194-128">As such, if you create a queue that's 5 GB in size, with 16 partitions hello maximum queue size becomes (5 \* 16) = 80 GB.</span></span> <span data-ttu-id="1b194-129">Você pode ver o tamanho máximo de saudação de sua fila ou tópico particionado examinando sua entrada no hello [portal do Azure][Azure portal], em Olá **visão geral** folha para essa entidade.</span><span class="sxs-lookup"><span data-stu-id="1b194-129">You can see hello maximum size of your partitioned queue or topic by looking at its entry on hello [Azure portal][Azure portal], in hello **Overview** blade for that entity.</span></span>

### <a name="premium"></a><span data-ttu-id="1b194-130">Premium</span><span class="sxs-lookup"><span data-stu-id="1b194-130">Premium</span></span>

<span data-ttu-id="1b194-131">Em um namespace de camada Premium, você pode criar filas do barramento de serviço e os tópicos em tamanhos de 1, 2, 3, 4, 5, 10, 20, 40 ou 80 GB (o padrão de saudação é de 1 GB).</span><span class="sxs-lookup"><span data-stu-id="1b194-131">In a Premium tier namespace, you can create Service Bus queues and topics in 1, 2, 3, 4, 5, 10, 20, 40, or 80 GB sizes (hello default is 1 GB).</span></span> <span data-ttu-id="1b194-132">Com o particionamento habilitado por padrão, o Barramento de Serviço cria duas partições por entidade.</span><span class="sxs-lookup"><span data-stu-id="1b194-132">With partitioning enabled by default, Service Bus creates two partitions per entity.</span></span> <span data-ttu-id="1b194-133">Você pode ver o tamanho máximo de saudação de sua fila ou tópico particionado examinando sua entrada no hello [portal do Azure][Azure portal], em Olá **visão geral** folha para essa entidade.</span><span class="sxs-lookup"><span data-stu-id="1b194-133">You can see hello maximum size of your partitioned queue or topic by looking at its entry on hello [Azure portal][Azure portal], in hello **Overview** blade for that entity.</span></span>

<span data-ttu-id="1b194-134">Para obter mais informações sobre particionamento na camada de mensagens de Premium Olá, consulte [Premium do barramento de serviço e níveis de mensagens padrão](service-bus-premium-messaging.md).</span><span class="sxs-lookup"><span data-stu-id="1b194-134">For more information about partitioning in hello Premium messaging tier, see [Service Bus Premium and Standard messaging tiers](service-bus-premium-messaging.md).</span></span> 

### <a name="create-a-partitioned-entity"></a><span data-ttu-id="1b194-135">Criar uma entidade particionada</span><span class="sxs-lookup"><span data-stu-id="1b194-135">Create a partitioned entity</span></span>

<span data-ttu-id="1b194-136">Há várias maneiras toocreate uma fila particionada ou tópico.</span><span class="sxs-lookup"><span data-stu-id="1b194-136">There are several ways toocreate a partitioned queue or topic.</span></span> <span data-ttu-id="1b194-137">Quando você cria Olá fila ou tópico do seu aplicativo, você pode habilitar o particionamento para Olá fila ou tópico por respectivamente Olá de configuração [QueueDescription.EnablePartitioning] [ QueueDescription.EnablePartitioning] ou [TopicDescription.EnablePartitioning] [ TopicDescription.EnablePartitioning] propriedade muito**true**.</span><span class="sxs-lookup"><span data-stu-id="1b194-137">When you create hello queue or topic from your application, you can enable partitioning for hello queue or topic by respectively setting hello [QueueDescription.EnablePartitioning][QueueDescription.EnablePartitioning] or [TopicDescription.EnablePartitioning][TopicDescription.EnablePartitioning] property too**true**.</span></span> <span data-ttu-id="1b194-138">Essas propriedades devem ser definidas em Olá tempo Olá fila ou tópico é criado.</span><span class="sxs-lookup"><span data-stu-id="1b194-138">These properties must be set at hello time hello queue or topic is created.</span></span> <span data-ttu-id="1b194-139">Conforme mencionado anteriormente, é toochange não é possível essas propriedades em uma fila ou tópico existentes.</span><span class="sxs-lookup"><span data-stu-id="1b194-139">As stated previously, it is not possible toochange these properties on an existing queue or topic.</span></span> <span data-ttu-id="1b194-140">Por exemplo:</span><span class="sxs-lookup"><span data-stu-id="1b194-140">For example:</span></span>

```csharp
// Create partitioned topic
NamespaceManager ns = NamespaceManager.CreateFromConnectionString(myConnectionString);
TopicDescription td = new TopicDescription(TopicName);
td.EnablePartitioning = true;
ns.CreateTopic(td);
```

<span data-ttu-id="1b194-141">Como alternativa, você pode criar uma fila ou tópico particionado no hello [portal do Azure] [ Azure portal] ou no Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="1b194-141">Alternatively, you can create a partitioned queue or topic in hello [Azure portal][Azure portal] or in Visual Studio.</span></span> <span data-ttu-id="1b194-142">Quando você cria uma fila ou tópico no portal de hello, Olá **ativar particionamento** opção Olá fila ou tópico **criar** folha é marcada por padrão.</span><span class="sxs-lookup"><span data-stu-id="1b194-142">When you create a queue or topic in hello portal, hello **Enable partitioning** option in hello queue or topic **Create** blade is checked by default.</span></span> <span data-ttu-id="1b194-143">Você só pode desabilitar essa opção em uma entidade de camada padrão; no hello particionamento de camada Premium está sempre habilitado.</span><span class="sxs-lookup"><span data-stu-id="1b194-143">You can only disable this option in a Standard tier entity; in hello Premium tier partitioning is always enabled.</span></span> <span data-ttu-id="1b194-144">No Visual Studio, clique em Olá **ativar particionamento** caixa de seleção no hello **nova fila** ou **novo tópico** caixa de diálogo.</span><span class="sxs-lookup"><span data-stu-id="1b194-144">In Visual Studio, click hello **Enable Partitioning** checkbox in hello **New Queue** or **New Topic** dialog box.</span></span>

## <a name="use-of-partition-keys"></a><span data-ttu-id="1b194-145">Uso de chaves de partição</span><span class="sxs-lookup"><span data-stu-id="1b194-145">Use of partition keys</span></span>
<span data-ttu-id="1b194-146">Quando uma mensagem é colocada em uma fila ou tópico particionado, barramento de serviço verifica a presença saudação de uma chave de partição.</span><span class="sxs-lookup"><span data-stu-id="1b194-146">When a message is enqueued into a partitioned queue or topic, Service Bus checks for hello presence of a partition key.</span></span> <span data-ttu-id="1b194-147">Se ele encontrar um, ele seleciona o fragmento de saudação com base na chave.</span><span class="sxs-lookup"><span data-stu-id="1b194-147">If it finds one, it selects hello fragment based on that key.</span></span> <span data-ttu-id="1b194-148">Se não encontrar uma chave de partição, ele seleciona o fragmento de saudação com base em um algoritmo interno.</span><span class="sxs-lookup"><span data-stu-id="1b194-148">If it does not find a partition key, it selects hello fragment based on an internal algorithm.</span></span>

### <a name="using-a-partition-key"></a><span data-ttu-id="1b194-149">Usando uma chave de partição</span><span class="sxs-lookup"><span data-stu-id="1b194-149">Using a partition key</span></span>
<span data-ttu-id="1b194-150">Alguns cenários, como sessões ou transações, exigem toobe mensagens armazenada em um fragmento específico.</span><span class="sxs-lookup"><span data-stu-id="1b194-150">Some scenarios, such as sessions or transactions, require messages toobe stored in a specific fragment.</span></span> <span data-ttu-id="1b194-151">Todos esses cenários exigem o uso de saudação de uma chave de partição.</span><span class="sxs-lookup"><span data-stu-id="1b194-151">All these scenarios require hello use of a partition key.</span></span> <span data-ttu-id="1b194-152">Todas as mensagens que Olá de uso são atribuídos a mesma chave de partição toohello mesmo fragmento.</span><span class="sxs-lookup"><span data-stu-id="1b194-152">All messages that use hello same partition key are assigned toohello same fragment.</span></span> <span data-ttu-id="1b194-153">Se o fragmento de saudação está temporariamente indisponível, o barramento de serviço retornará um erro.</span><span class="sxs-lookup"><span data-stu-id="1b194-153">If hello fragment is temporarily unavailable, Service Bus returns an error.</span></span>

<span data-ttu-id="1b194-154">Dependendo do cenário de hello, diferentes propriedades de mensagem são usadas como uma chave de partição:</span><span class="sxs-lookup"><span data-stu-id="1b194-154">Depending on hello scenario, different message properties are used as a partition key:</span></span>

<span data-ttu-id="1b194-155">**SessionId**: se uma mensagem de saudação [BrokeredMessage.SessionId] [ BrokeredMessage.SessionId] propriedade definida, em seguida, barramento de serviço usa essa propriedade como chave de partição hello.</span><span class="sxs-lookup"><span data-stu-id="1b194-155">**SessionId**: If a message has hello [BrokeredMessage.SessionId][BrokeredMessage.SessionId] property set, then Service Bus uses this property as hello partition key.</span></span> <span data-ttu-id="1b194-156">Dessa forma, todas as mensagens que pertencem a toohello mesma sessão são manipuladas pelo Olá mesmo agente de mensagens.</span><span class="sxs-lookup"><span data-stu-id="1b194-156">This way, all messages that belong toohello same session are handled by hello same message broker.</span></span> <span data-ttu-id="1b194-157">Isso permite que mensagens do barramento de serviço tooguarantee ordenação, bem como a consistência de saudação de estados de sessão.</span><span class="sxs-lookup"><span data-stu-id="1b194-157">This enables Service Bus tooguarantee message ordering as well as hello consistency of session states.</span></span>

<span data-ttu-id="1b194-158">**PartitionKey**: se uma mensagem de saudação [BrokeredMessage.PartitionKey] [ BrokeredMessage.PartitionKey] propriedade, mas não Olá [BrokeredMessage.SessionId] [ BrokeredMessage.SessionId] propriedade definida, em seguida, o barramento de serviço usa Olá [PartitionKey] [ PartitionKey] propriedade como chave de partição hello.</span><span class="sxs-lookup"><span data-stu-id="1b194-158">**PartitionKey**: If a message has hello [BrokeredMessage.PartitionKey][BrokeredMessage.PartitionKey] property but not hello [BrokeredMessage.SessionId][BrokeredMessage.SessionId] property set, then Service Bus uses hello [PartitionKey][PartitionKey] property as hello partition key.</span></span> <span data-ttu-id="1b194-159">Se a mensagem de saudação tem dois Olá [SessionId] [ SessionId] e hello [PartitionKey] [ PartitionKey] propriedades definidas, ambas as propriedades devem ser idênticas.</span><span class="sxs-lookup"><span data-stu-id="1b194-159">If hello message has both hello [SessionId][SessionId] and hello [PartitionKey][PartitionKey] properties set, both properties must be identical.</span></span> <span data-ttu-id="1b194-160">Se hello [PartitionKey] [ PartitionKey] propriedade está definida tooa valor diferente Olá [SessionId] [ SessionId] retorna de propriedade, barramento de serviço inválido exceção de operação.</span><span class="sxs-lookup"><span data-stu-id="1b194-160">If hello [PartitionKey][PartitionKey] property is set tooa different value than hello [SessionId][SessionId] property, Service Bus returns an invalid operation exception.</span></span> <span data-ttu-id="1b194-161">Olá [PartitionKey] [ PartitionKey] propriedade deve ser usada se um remetente envia mensagens transacionais cientes de sessão não.</span><span class="sxs-lookup"><span data-stu-id="1b194-161">hello [PartitionKey][PartitionKey] property should be used if a sender sends non-session aware transactional messages.</span></span> <span data-ttu-id="1b194-162">Olá chave de partição garante que todas as mensagens são enviadas em uma transação são manipuladas pelo Olá mesmo agente de mensagens.</span><span class="sxs-lookup"><span data-stu-id="1b194-162">hello partition key ensures that all messages that are sent within a transaction are handled by hello same messaging broker.</span></span>

<span data-ttu-id="1b194-163">**MessageId**: se Olá fila ou tópico tiver Olá [QueueDescription.RequiresDuplicateDetection] [ QueueDescription.RequiresDuplicateDetection] propriedade definida muito**true** e hello [BrokeredMessage.SessionId] [ BrokeredMessage.SessionId] ou [BrokeredMessage.PartitionKey] [ BrokeredMessage.PartitionKey] propriedades não estão definidas, em seguida, Olá [BrokeredMessage.MessageId] [ BrokeredMessage.MessageId] propriedade serve como chave de partição hello.</span><span class="sxs-lookup"><span data-stu-id="1b194-163">**MessageId**: If hello queue or topic has hello [QueueDescription.RequiresDuplicateDetection][QueueDescription.RequiresDuplicateDetection] property set too**true** and hello [BrokeredMessage.SessionId][BrokeredMessage.SessionId] or [BrokeredMessage.PartitionKey][BrokeredMessage.PartitionKey] properties are not set, then hello [BrokeredMessage.MessageId][BrokeredMessage.MessageId] property serves as hello partition key.</span></span> <span data-ttu-id="1b194-164">(Observe que bibliotecas Microsoft .NET e AMQP do hello atribuir automaticamente uma ID de mensagem se o aplicativo de envio de saudação não). Nesse caso, todas as cópias da saudação mesma mensagem são manipuladas pelo Olá mesmo agente de mensagens.</span><span class="sxs-lookup"><span data-stu-id="1b194-164">(Note that hello Microsoft .NET and AMQP libraries automatically assign a message ID if hello sending application does not.) In this case, all copies of hello same message are handled by hello same message broker.</span></span> <span data-ttu-id="1b194-165">Isso permite que o barramento de serviço toodetect e elimine mensagens duplicadas.</span><span class="sxs-lookup"><span data-stu-id="1b194-165">This enables Service Bus toodetect and eliminate duplicate messages.</span></span> <span data-ttu-id="1b194-166">Se hello [QueueDescription.RequiresDuplicateDetection] [ QueueDescription.RequiresDuplicateDetection] propriedade não está definida muito**true**, barramento de serviço não considera Olá [MessageId] [ MessageId] a propriedade como uma chave de partição.</span><span class="sxs-lookup"><span data-stu-id="1b194-166">If hello [QueueDescription.RequiresDuplicateDetection][QueueDescription.RequiresDuplicateDetection] property is not set too**true**, Service Bus does not consider hello [MessageId][MessageId] property as a partition key.</span></span>

### <a name="not-using-a-partition-key"></a><span data-ttu-id="1b194-167">Não usando uma chave de partição</span><span class="sxs-lookup"><span data-stu-id="1b194-167">Not using a partition key</span></span>
<span data-ttu-id="1b194-168">Na ausência de saudação de uma chave de partição, o barramento de serviço distribui mensagens em um fragmentos de saudação tooall rodízio de saudação fila ou tópico particionados.</span><span class="sxs-lookup"><span data-stu-id="1b194-168">In hello absence of a partition key, Service Bus distributes messages in a round-robin fashion tooall hello fragments of hello partitioned queue or topic.</span></span> <span data-ttu-id="1b194-169">Se o fragmento de saudação escolhido não estiver disponível, barramento de serviço atribui fragmento diferente de tooa de mensagem de saudação.</span><span class="sxs-lookup"><span data-stu-id="1b194-169">If hello chosen fragment is not available, Service Bus assigns hello message tooa different fragment.</span></span> <span data-ttu-id="1b194-170">Dessa forma, a operação de envio de saudação for bem-sucedida apesar da indisponibilidade temporária de saudação de um repositório de mensagens.</span><span class="sxs-lookup"><span data-stu-id="1b194-170">This way, hello send operation succeeds despite hello temporary unavailability of a messaging store.</span></span> <span data-ttu-id="1b194-171">No entanto, você não obterá Olá garantida de ordenação que fornece uma chave de partição.</span><span class="sxs-lookup"><span data-stu-id="1b194-171">However, you will not achieve hello guaranteed ordering that a partition key provides.</span></span>

<span data-ttu-id="1b194-172">Para obter uma discussão mais detalhada de compensação Olá entre disponibilidade (nenhuma chave de partição) e a consistência (usando uma chave de partição), consulte [neste artigo](../event-hubs/event-hubs-availability-and-consistency.md).</span><span class="sxs-lookup"><span data-stu-id="1b194-172">For a more in-depth discussion of hello tradeoff between availability (no partition key) and consistency (using a partition key), see [this article](../event-hubs/event-hubs-availability-and-consistency.md).</span></span> <span data-ttu-id="1b194-173">Essas informações se aplicam igualmente entidades do barramento de serviço toopartitioned e partições de Hubs de eventos.</span><span class="sxs-lookup"><span data-stu-id="1b194-173">This information applies equally toopartitioned Service Bus entities and Event Hubs partitions.</span></span>

<span data-ttu-id="1b194-174">toogive serviço de barramento de mensagem de saudação suficiente tempo tooenqueue em um fragmento diferente, hello [MessagingFactorySettings.OperationTimeout] [ MessagingFactorySettings.OperationTimeout] valor especificado pelo cliente de saudação que envia a mensagem de saudação deve ser maior que 15 segundos.</span><span class="sxs-lookup"><span data-stu-id="1b194-174">toogive Service Bus enough time tooenqueue hello message into a different fragment, hello [MessagingFactorySettings.OperationTimeout][MessagingFactorySettings.OperationTimeout] value specified by hello client that sends hello message must be greater than 15 seconds.</span></span> <span data-ttu-id="1b194-175">É recomendável que você defina Olá [OperationTimeout] [ OperationTimeout] valor padrão da propriedade toohello de 60 segundos.</span><span class="sxs-lookup"><span data-stu-id="1b194-175">It is recommended that you set hello [OperationTimeout][OperationTimeout] property toohello default value of 60 seconds.</span></span>

<span data-ttu-id="1b194-176">Observe que uma chave de partição "fixa" um fragmento específico de tooa de mensagem.</span><span class="sxs-lookup"><span data-stu-id="1b194-176">Note that a partition key "pins" a message tooa specific fragment.</span></span> <span data-ttu-id="1b194-177">Se o repositório de mensagens de saudação que contém este fragmento estiver indisponível, o barramento de serviço retornará um erro.</span><span class="sxs-lookup"><span data-stu-id="1b194-177">If hello messaging store that holds this fragment is unavailable, Service Bus returns an error.</span></span> <span data-ttu-id="1b194-178">Na ausência de saudação de uma chave de partição, barramento de serviço pode escolher um fragmento diferente e Olá operação for bem-sucedida.</span><span class="sxs-lookup"><span data-stu-id="1b194-178">In hello absence of a partition key, Service Bus can choose a different fragment and hello operation succeeds.</span></span> <span data-ttu-id="1b194-179">Portanto, é recomendável que você não forneça uma chave de partição, a menos que seja necessário.</span><span class="sxs-lookup"><span data-stu-id="1b194-179">Therefore, it is recommended that you do not supply a partition key unless it is required.</span></span>

## <a name="advanced-topics-use-transactions-with-partitioned-entities"></a><span data-ttu-id="1b194-180">Tópicos avançados: usar transações com entidades particionadas</span><span class="sxs-lookup"><span data-stu-id="1b194-180">Advanced topics: use transactions with partitioned entities</span></span>
<span data-ttu-id="1b194-181">As mensagens enviadas como parte de uma transação devem especificar uma chave de partição.</span><span class="sxs-lookup"><span data-stu-id="1b194-181">Messages that are sent as part of a transaction must specify a partition key.</span></span> <span data-ttu-id="1b194-182">Isso pode ser uma das seguintes propriedades de saudação: [BrokeredMessage.SessionId][BrokeredMessage.SessionId], [BrokeredMessage.PartitionKey][BrokeredMessage.PartitionKey], ou [ BrokeredMessage.MessageId][BrokeredMessage.MessageId].</span><span class="sxs-lookup"><span data-stu-id="1b194-182">This can be one of hello following properties: [BrokeredMessage.SessionId][BrokeredMessage.SessionId], [BrokeredMessage.PartitionKey][BrokeredMessage.PartitionKey], or [BrokeredMessage.MessageId][BrokeredMessage.MessageId].</span></span> <span data-ttu-id="1b194-183">Todas as mensagens são enviadas como parte da saudação deve especificar a mesma transação Olá a mesma chave de partição.</span><span class="sxs-lookup"><span data-stu-id="1b194-183">All messages that are sent as part of hello same transaction must specify hello same partition key.</span></span> <span data-ttu-id="1b194-184">Se você tentar toosend uma mensagem sem uma chave de partição em uma transação, o barramento de serviço retorna uma exceção de operação inválido.</span><span class="sxs-lookup"><span data-stu-id="1b194-184">If you attempt toosend a message without a partition key within a transaction, Service Bus returns an invalid operation exception.</span></span> <span data-ttu-id="1b194-185">Se você tentar toosend várias mensagens em Olá mesma transação que têm diferentes chaves de partição, barramento de serviço retorna uma exceção de operação inválido.</span><span class="sxs-lookup"><span data-stu-id="1b194-185">If you attempt toosend multiple messages within hello same transaction that have different partition keys, Service Bus returns an invalid operation exception.</span></span> <span data-ttu-id="1b194-186">Por exemplo:</span><span class="sxs-lookup"><span data-stu-id="1b194-186">For example:</span></span>

```csharp
CommittableTransaction committableTransaction = new CommittableTransaction();
using (TransactionScope ts = new TransactionScope(committableTransaction))
{
    BrokeredMessage msg = new BrokeredMessage("This is a message");
    msg.PartitionKey = "myPartitionKey";
    messageSender.Send(msg); 
    ts.Complete();
}
committableTransaction.Commit();
```

<span data-ttu-id="1b194-187">Se qualquer uma das propriedades de saudação que serve como uma chave de partição são definidas, pins de barramento de serviço Olá fragmento específico de tooa de mensagem.</span><span class="sxs-lookup"><span data-stu-id="1b194-187">If any of hello properties that serve as a partition key are set, Service Bus pins hello message tooa specific fragment.</span></span> <span data-ttu-id="1b194-188">Esse comportamento ocorre quer uma transação seja usada ou não.</span><span class="sxs-lookup"><span data-stu-id="1b194-188">This behavior occurs whether or not a transaction is used.</span></span> <span data-ttu-id="1b194-189">É recomendável que você não especifique uma chave de partição se isso não for necessário.</span><span class="sxs-lookup"><span data-stu-id="1b194-189">It is recommended that you do not specify a partition key if it is not necessary.</span></span>

## <a name="using-sessions-with-partitioned-entities"></a><span data-ttu-id="1b194-190">Usando sessões com entidades particionadas</span><span class="sxs-lookup"><span data-stu-id="1b194-190">Using sessions with partitioned entities</span></span>
<span data-ttu-id="1b194-191">toosend um tópico de reconhecimento de sessão tooa mensagem transacional ou fila, a mensagem de saudação deve ter Olá [BrokeredMessage.SessionId] [ BrokeredMessage.SessionId] conjunto de propriedades.</span><span class="sxs-lookup"><span data-stu-id="1b194-191">toosend a transactional message tooa session-aware topic or queue, hello message must have hello [BrokeredMessage.SessionId][BrokeredMessage.SessionId] property set.</span></span> <span data-ttu-id="1b194-192">Se hello [BrokeredMessage.PartitionKey] [ BrokeredMessage.PartitionKey] propriedade também for especificada, ele deve ser idêntico toohello [SessionId] [ SessionId] propriedade.</span><span class="sxs-lookup"><span data-stu-id="1b194-192">If hello [BrokeredMessage.PartitionKey][BrokeredMessage.PartitionKey] property is specified as well, it must be identical toohello [SessionId][SessionId] property.</span></span> <span data-ttu-id="1b194-193">Caso elas sejam diferentes, o Barramento de Serviço retornará uma exceção de operação inválida.</span><span class="sxs-lookup"><span data-stu-id="1b194-193">If they differ, Service Bus returns an invalid operation exception.</span></span>

<span data-ttu-id="1b194-194">Diferentemente de (não particionada) filas ou tópicos comuns, não é possível toouse toosend uma única transação várias sessões de toodifferent de mensagens.</span><span class="sxs-lookup"><span data-stu-id="1b194-194">Unlike regular (non-partitioned) queues or topics, it is not possible toouse a single transaction toosend multiple messages toodifferent sessions.</span></span> <span data-ttu-id="1b194-195">Se você tentar fazer isso, o Barramento de Serviço retornará uma exceção de operação inválida.</span><span class="sxs-lookup"><span data-stu-id="1b194-195">If attempted, Service Bus returns an invalid operation exception.</span></span> <span data-ttu-id="1b194-196">Por exemplo:</span><span class="sxs-lookup"><span data-stu-id="1b194-196">For example:</span></span>

```csharp
CommittableTransaction committableTransaction = new CommittableTransaction();
using (TransactionScope ts = new TransactionScope(committableTransaction))
{
    BrokeredMessage msg = new BrokeredMessage("This is a message");
    msg.SessionId = "mySession";
    messageSender.Send(msg); 
    ts.Complete();
}
committableTransaction.Commit();
```

## <a name="automatic-message-forwarding-with-partitioned-entities"></a><span data-ttu-id="1b194-197">Encaminhamento automático de mensagens com entidades particionadas</span><span class="sxs-lookup"><span data-stu-id="1b194-197">Automatic message forwarding with partitioned entities</span></span>
<span data-ttu-id="1b194-198">O Barramento de Serviço dá suporte ao encaminhamento automático de mensagens de, para ou entre entidades particionadas.</span><span class="sxs-lookup"><span data-stu-id="1b194-198">Service Bus supports automatic message forwarding from, to, or between partitioned entities.</span></span> <span data-ttu-id="1b194-199">tooenable automático encaminhamento de mensagens, defina Olá [QueueDescription.ForwardTo] [ QueueDescription.ForwardTo] propriedade na fila de origem hello ou assinatura.</span><span class="sxs-lookup"><span data-stu-id="1b194-199">tooenable automatic message forwarding, set hello [QueueDescription.ForwardTo][QueueDescription.ForwardTo] property on hello source queue or subscription.</span></span> <span data-ttu-id="1b194-200">Se a mensagem de saudação especifica uma chave de partição ([SessionId][SessionId], [PartitionKey][PartitionKey], ou [MessageId] [ MessageId]), essa chave de partição é usada para a entidade de destino hello.</span><span class="sxs-lookup"><span data-stu-id="1b194-200">If hello message specifies a partition key ([SessionId][SessionId], [PartitionKey][PartitionKey], or [MessageId][MessageId]), that partition key is used for hello destination entity.</span></span>

## <a name="considerations-and-guidelines"></a><span data-ttu-id="1b194-201">Considerações e diretrizes</span><span class="sxs-lookup"><span data-stu-id="1b194-201">Considerations and guidelines</span></span>
* <span data-ttu-id="1b194-202">**Recursos de alta consistência**: se uma entidade usa recursos, como sessões, detecção de duplicidades ou controle explícito de chave de particionamento, operações de mensagens de saudação sempre são roteadas toospecific fragmentos.</span><span class="sxs-lookup"><span data-stu-id="1b194-202">**High consistency features**: If an entity uses features such as sessions, duplicate detection, or explicit control of partitioning key, then hello messaging operations are always routed toospecific fragments.</span></span> <span data-ttu-id="1b194-203">Se qualquer um dos fragmentos de saudação experiência de alto tráfego ou armazenamento subjacente Olá não está íntegro, essas operações falham e disponibilidade é reduzida.</span><span class="sxs-lookup"><span data-stu-id="1b194-203">If any of hello fragments experience high traffic or hello underlying store is unhealthy, those operations fail and availability is reduced.</span></span> <span data-ttu-id="1b194-204">Em geral, a consistência de saudação é ainda muito maior do que entidades não particionado; apenas um subconjunto de tráfego está apresentando problemas, como tráfego de saudação tooall contrário.</span><span class="sxs-lookup"><span data-stu-id="1b194-204">Overall, hello consistency is still much higher than non-partitioned entities; only a subset of traffic is experiencing issues, as opposed tooall hello traffic.</span></span> <span data-ttu-id="1b194-205">Para obter mais informações, consulte esta [discussão sobre disponibilidade e consistência](../event-hubs/event-hubs-availability-and-consistency.md).</span><span class="sxs-lookup"><span data-stu-id="1b194-205">For more information, see this [discussion of availability and consistency](../event-hubs/event-hubs-availability-and-consistency.md).</span></span>
* <span data-ttu-id="1b194-206">**Gerenciamento**: operações como criar, atualizar e excluir devem ser executadas em todos os fragmentos de saudação da entidade de saudação.</span><span class="sxs-lookup"><span data-stu-id="1b194-206">**Management**: Operations such as Create, Update and Delete must be performed on all hello fragments of hello entity.</span></span> <span data-ttu-id="1b194-207">Se qualquer fragmento não estiver íntegro, isso poderá resultar em falhas para essas operações.</span><span class="sxs-lookup"><span data-stu-id="1b194-207">If any fragment is unhealthy it could result in failures for these operations.</span></span> <span data-ttu-id="1b194-208">Para a operação de obtenção de Olá, informações como o número de mensagens devem ser agregadas de todos os fragmentos.</span><span class="sxs-lookup"><span data-stu-id="1b194-208">For hello Get operation, information such as message counts must be aggregated from all fragments.</span></span> <span data-ttu-id="1b194-209">Se qualquer fragmento não está íntegro, status de disponibilidade da entidade Olá é relatado como limitado.</span><span class="sxs-lookup"><span data-stu-id="1b194-209">If any fragment is unhealthy, hello entity availability status is reported as limited.</span></span>
* <span data-ttu-id="1b194-210">**Cenários de mensagem do volume de baixa**: para esses cenários, especialmente ao usar o protocolo de saudação HTTP, você pode ter tooperform várias operações de recebimento em ordem tooobtain todas as mensagens de saudação.</span><span class="sxs-lookup"><span data-stu-id="1b194-210">**Low volume message scenarios**: For such scenarios, especially when using hello HTTP protocol, you may have tooperform multiple receive operations in order tooobtain all hello messages.</span></span> <span data-ttu-id="1b194-211">Para receber solicitações, front-end Olá executa um recebimento em todos os fragmentos de saudação e armazena em cache todas as respostas de saudação recebidas.</span><span class="sxs-lookup"><span data-stu-id="1b194-211">For receive requests, hello front end performs a receive on all hello fragments and caches all hello responses received.</span></span> <span data-ttu-id="1b194-212">Uma solicitação de recebimento subsequente Olá conexão mesmo seria aproveitar esse cache e receber as latências será menor.</span><span class="sxs-lookup"><span data-stu-id="1b194-212">A subsequent receive request on hello same connection would benefit from this caching and receive latencies will be lower.</span></span> <span data-ttu-id="1b194-213">No entanto, se você tiver várias conexões ou se usar HTTP, isso estabelecerá uma nova conexão para cada solicitação.</span><span class="sxs-lookup"><span data-stu-id="1b194-213">However, if you have multiple connections or use HTTP, that establishes a new connection for each request.</span></span> <span data-ttu-id="1b194-214">Como tal, não há nenhuma garantia de que ele acabaria na Olá mesmo nó.</span><span class="sxs-lookup"><span data-stu-id="1b194-214">As such, there is no guarantee that it would land on hello same node.</span></span> <span data-ttu-id="1b194-215">Se todas as mensagens existentes são bloqueadas e armazenados em cache no outro front-end, Olá receber operação retorna **nulo**.</span><span class="sxs-lookup"><span data-stu-id="1b194-215">If all existing messages are locked and cached in another front end, hello receive operation returns **null**.</span></span> <span data-ttu-id="1b194-216">As mensagens eventualmente expiram e você pode recebê-las novamente.</span><span class="sxs-lookup"><span data-stu-id="1b194-216">Messages eventually expire and you can receive them again.</span></span> <span data-ttu-id="1b194-217">O keep-alive de HTTP é recomendável.</span><span class="sxs-lookup"><span data-stu-id="1b194-217">HTTP keep-alive is recommended.</span></span>
* <span data-ttu-id="1b194-218">**Procurar/inspecionar mensagens**: [PeekBatch](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_PeekBatch_System_Int32_) sempre não retornar o número de saudação de mensagens especificadas no hello [MessageCount](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_MessageCount) propriedade.</span><span class="sxs-lookup"><span data-stu-id="1b194-218">**Browse/Peek messages**: [PeekBatch](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_PeekBatch_System_Int32_) does not always return hello number of messages specified in hello [MessageCount](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_MessageCount) property.</span></span> <span data-ttu-id="1b194-219">Há duas razões comuns para isso.</span><span class="sxs-lookup"><span data-stu-id="1b194-219">There are two common reasons for this.</span></span> <span data-ttu-id="1b194-220">Uma razão é que Olá tamanho agregado de coleção de saudação de mensagens excede o tamanho de máximo de saudação de 256KB.</span><span class="sxs-lookup"><span data-stu-id="1b194-220">One reason is that hello aggregated size of hello collection of messages exceeds hello maximum size of 256KB.</span></span> <span data-ttu-id="1b194-221">Outro motivo é que, se Olá fila ou tópico tiver Olá [EnablePartitioning propriedade](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_EnablePartitioning) definido muito**true**, uma partição pode não ter suficiente mensagens toocomplete Olá solicitou o número de mensagens.</span><span class="sxs-lookup"><span data-stu-id="1b194-221">Another reason is that if hello queue or topic has hello [EnablePartitioning property](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_EnablePartitioning) set too**true**, a partition may not have enough messages toocomplete hello requested number of messages.</span></span> <span data-ttu-id="1b194-222">Em geral, se um aplicativo deseja tooreceive um número específico de mensagens, é necessário chamar [PeekBatch](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_PeekBatch_System_Int32_) repetidamente até que ele obtém o número de mensagens ou não há nenhum mais toopeek de mensagens.</span><span class="sxs-lookup"><span data-stu-id="1b194-222">In general, if an application wants tooreceive a specific number of messages, it should call [PeekBatch](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_PeekBatch_System_Int32_) repeatedly until it gets that number of messages, or there are no more messages toopeek.</span></span> <span data-ttu-id="1b194-223">Para obter mais informações, incluindo exemplos de código, confira [QueueClient.PeekBatch](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_PeekBatch_System_Int32_) ou [SubscriptionClient.PeekBatch](/dotnet/api/microsoft.servicebus.messaging.subscriptionclient#Microsoft_ServiceBus_Messaging_SubscriptionClient_PeekBatch_System_Int32_).</span><span class="sxs-lookup"><span data-stu-id="1b194-223">For more information, including code samples, see [QueueClient.PeekBatch](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_PeekBatch_System_Int32_) or [SubscriptionClient.PeekBatch](/dotnet/api/microsoft.servicebus.messaging.subscriptionclient#Microsoft_ServiceBus_Messaging_SubscriptionClient_PeekBatch_System_Int32_).</span></span>

## <a name="latest-added-features"></a><span data-ttu-id="1b194-224">Últimos recursos adicionados</span><span class="sxs-lookup"><span data-stu-id="1b194-224">Latest added features</span></span>
* <span data-ttu-id="1b194-225">Agora há suporte para adicionar ou remover regras com entidades particionadas.</span><span class="sxs-lookup"><span data-stu-id="1b194-225">Add or remove rule is now supported with partitioned entities.</span></span> <span data-ttu-id="1b194-226">Diferentes de entidades não particionadas, essas operações não têm suporte em transações.</span><span class="sxs-lookup"><span data-stu-id="1b194-226">Different from non-partitioned entities, these operations are not supported under transactions.</span></span> 
* <span data-ttu-id="1b194-227">Agora há suporte para AMQP para enviar e receber mensagens tooand de uma entidade particionada.</span><span class="sxs-lookup"><span data-stu-id="1b194-227">AMQP is now supported for sending and receiving messages tooand from a partitioned entity.</span></span>
* <span data-ttu-id="1b194-228">Agora há suporte para AMQP para Olá seguintes operações: [enviar lote](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_SendBatch_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_BrokeredMessage__), [lote receber](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_ReceiveBatch_System_Int32_), [receber pelo número de sequência](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_Receive_System_Int64_), [inspecionar](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_Peek), [ Renovar bloqueio](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_RenewMessageLock_System_Guid_), [agendar mensagem](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_ScheduleMessageAsync_Microsoft_ServiceBus_Messaging_BrokeredMessage_System_DateTimeOffset_), [Cancelar mensagem agendada](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_CancelScheduledMessageAsync_System_Int64_), [Adicionar regra](/dotnet/api/microsoft.servicebus.messaging.ruledescription), [remover regra](/dotnet/api/microsoft.servicebus.messaging.ruledescription), [Sessão renovar bloqueio](/dotnet/api/microsoft.servicebus.messaging.messagesession#Microsoft_ServiceBus_Messaging_MessageSession_RenewLock), [definir estado de sessão](/dotnet/api/microsoft.servicebus.messaging.messagesession#Microsoft_ServiceBus_Messaging_MessageSession_SetState_System_IO_Stream_), [obter o estado de sessão](/dotnet/api/microsoft.servicebus.messaging.messagesession#Microsoft_ServiceBus_Messaging_MessageSession_GetState), e [enumerar sessões](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_GetMessageSessionsAsync).</span><span class="sxs-lookup"><span data-stu-id="1b194-228">AMQP is now supported for hello following operations: [Batch Send](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_SendBatch_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_BrokeredMessage__), [Batch Receive](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_ReceiveBatch_System_Int32_), [Receive by Sequence Number](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_Receive_System_Int64_), [Peek](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_Peek), [Renew Lock](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_RenewMessageLock_System_Guid_), [Schedule Message](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_ScheduleMessageAsync_Microsoft_ServiceBus_Messaging_BrokeredMessage_System_DateTimeOffset_), [Cancel Scheduled Message](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_CancelScheduledMessageAsync_System_Int64_), [Add Rule](/dotnet/api/microsoft.servicebus.messaging.ruledescription), [Remove Rule](/dotnet/api/microsoft.servicebus.messaging.ruledescription), [Session Renew Lock](/dotnet/api/microsoft.servicebus.messaging.messagesession#Microsoft_ServiceBus_Messaging_MessageSession_RenewLock), [Set Session State](/dotnet/api/microsoft.servicebus.messaging.messagesession#Microsoft_ServiceBus_Messaging_MessageSession_SetState_System_IO_Stream_), [Get Session State](/dotnet/api/microsoft.servicebus.messaging.messagesession#Microsoft_ServiceBus_Messaging_MessageSession_GetState), and [Enumerate Sessions](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_GetMessageSessionsAsync).</span></span>

## <a name="partitioned-entities-limitations"></a><span data-ttu-id="1b194-229">Limitações das entidades particionadas</span><span class="sxs-lookup"><span data-stu-id="1b194-229">Partitioned entities limitations</span></span>
<span data-ttu-id="1b194-230">Atualmente o barramento de serviço impõe Olá seguintes limitações em filas e tópicos particionados:</span><span class="sxs-lookup"><span data-stu-id="1b194-230">Currently Service Bus imposes hello following limitations on partitioned queues and topics:</span></span>

* <span data-ttu-id="1b194-231">Filas e tópicos particionados não dão suporte para envio de mensagens que pertence a toodifferent sessões em uma única transação.</span><span class="sxs-lookup"><span data-stu-id="1b194-231">Partitioned queues and topics do not support sending messages that belong toodifferent sessions in a single transaction.</span></span>
* <span data-ttu-id="1b194-232">Atualmente, o barramento de serviço permite too100 particionada filas ou tópicos por namespace.</span><span class="sxs-lookup"><span data-stu-id="1b194-232">Service Bus currently allows up too100 partitioned queues or topics per namespace.</span></span> <span data-ttu-id="1b194-233">Cada fila ou tópico particionados conta para a cota de saudação de 10.000 entidades por namespace (não aplicar a camada de tooPremium).</span><span class="sxs-lookup"><span data-stu-id="1b194-233">Each partitioned queue or topic counts towards hello quota of 10,000 entities per namespace (does not apply tooPremium tier).</span></span>

## <a name="next-steps"></a><span data-ttu-id="1b194-234">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="1b194-234">Next steps</span></span>
<span data-ttu-id="1b194-235">Consulte a discussão de saudação do [suporte a AMQP 1.0 para o barramento de serviço particionado filas e tópicos] [ AMQP 1.0 support for Service Bus partitioned queues and topics] toolearn mais sobre o particionamento de entidades de mensagens.</span><span class="sxs-lookup"><span data-stu-id="1b194-235">See hello discussion of [AMQP 1.0 support for Service Bus partitioned queues and topics][AMQP 1.0 support for Service Bus partitioned queues and topics] toolearn more about partitioning messaging entities.</span></span> 

[Service Bus architecture]: service-bus-architecture.md
[Azure portal]: https://portal.azure.com
[QueueDescription.EnablePartitioning]: /dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_EnablePartitioning
[TopicDescription.EnablePartitioning]: /dotnet/api/microsoft.servicebus.messaging.topicdescription#Microsoft_ServiceBus_Messaging_TopicDescription_EnablePartitioning
[BrokeredMessage.SessionId]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_SessionId
[BrokeredMessage.PartitionKey]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_PartitionKey
[SessionId]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_SessionId
[PartitionKey]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_PartitionKey
[QueueDescription.RequiresDuplicateDetection]: /dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_RequiresDuplicateDetection
[BrokeredMessage.MessageId]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_MessageId
[MessageId]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_MessageId
[MessagingFactorySettings.OperationTimeout]: /dotnet/api/microsoft.servicebus.messaging.messagingfactorysettings#Microsoft_ServiceBus_Messaging_MessagingFactorySettings_OperationTimeout
[OperationTimeout]: /dotnet/api/microsoft.servicebus.messaging.messagingfactorysettings#Microsoft_ServiceBus_Messaging_MessagingFactorySettings_OperationTimeout
[QueueDescription.ForwardTo]: /dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_ForwardTo
[AMQP 1.0 support for Service Bus partitioned queues and topics]: service-bus-partitioned-queues-and-topics-amqp-overview.md
