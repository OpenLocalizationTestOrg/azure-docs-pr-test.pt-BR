---
title: "aaaCreate aplicativos que usam tópicos do barramento de serviço do Azure e assinaturas | Microsoft Docs"
description: "Introdução toohello publicação / assinatura oferecidos por assinaturas e tópicos do barramento de serviço."
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: a48fc9b0-b7b0-464e-8187-a517bf8b4eb4
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 04/07/2017
ms.author: sethm
ms.openlocfilehash: f6d7de46ace7bd5b49de612db213ced789308d91
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="create-applications-that-use-service-bus-topics-and-subscriptions"></a><span data-ttu-id="ed360-103">Criar aplicativos que usam os tópicos e as assinaturas do Barramento de Serviço</span><span class="sxs-lookup"><span data-stu-id="ed360-103">Create applications that use Service Bus topics and subscriptions</span></span>
<span data-ttu-id="ed360-104">O Barramento de Serviço do Azure oferece suporte a um conjunto de tecnologias middleware orientado a mensagens, baseado em nuvem, incluindo o serviço de enfileiramento de mensagens confiável e o sistema de mensagens de publicação/assinatura durável.</span><span class="sxs-lookup"><span data-stu-id="ed360-104">Azure Service Bus supports a set of cloud-based, message-oriented middleware technologies including reliable message queuing and durable publish/subscribe messaging.</span></span> <span data-ttu-id="ed360-105">Este artigo aproveita informações Olá fornecidas nos [criar aplicativos que usam filas do barramento de serviço](service-bus-create-queues.md) e oferece uma introdução toohello recursos de publicação/assinatura oferecidos por tópicos do barramento de serviço.</span><span class="sxs-lookup"><span data-stu-id="ed360-105">This article builds on hello information provided in [Create applications that use Service Bus queues](service-bus-create-queues.md) and offers an introduction toohello publish/subscribe capabilities offered by Service Bus topics.</span></span>

## <a name="evolving-retail-scenario"></a><span data-ttu-id="ed360-106">Cenário de varejo em evolução</span><span class="sxs-lookup"><span data-stu-id="ed360-106">Evolving retail scenario</span></span>
<span data-ttu-id="ed360-107">Este artigo continua o cenário de varejo Olá usado em [criar aplicativos que usam filas do barramento de serviço](service-bus-create-queues.md).</span><span class="sxs-lookup"><span data-stu-id="ed360-107">This article continues hello retail scenario used in [Create applications that use Service Bus queues](service-bus-create-queues.md).</span></span> <span data-ttu-id="ed360-108">Lembre-se de que os dados de vendas dos terminais de ponto de venda (PDV) individuais de devem ser roteada tooan sistema de gerenciamento de estoque que usa esse toodetermine dados quando deve toobe ocorrer a reposição do estoque.</span><span class="sxs-lookup"><span data-stu-id="ed360-108">Recall that sales data from individual Point of Sale (POS) terminals must be routed tooan inventory management system which uses that data toodetermine when stock has toobe replenished.</span></span> <span data-ttu-id="ed360-109">Cada terminal de POS transmite seus dados de vendas enviando mensagens toohello **DataCollectionQueue** fila, onde permanecem até que sejam recebidos pelo sistema de gerenciamento de estoque hello, conforme mostrado aqui:</span><span class="sxs-lookup"><span data-stu-id="ed360-109">Each POS terminal reports its sales data by sending messages toohello **DataCollectionQueue** queue, where they remain until they are received by hello inventory management system, as shown here:</span></span>

![Barramento de Serviço 1](./media/service-bus-create-topics-subscriptions/IC657161.gif)

<span data-ttu-id="ed360-111">tooevolve neste cenário, um novo requisito foi adicionado toohello sistema: proprietário da loja Olá quer toobe toomonitor capaz de desempenho do armazenamento de saudação em tempo real.</span><span class="sxs-lookup"><span data-stu-id="ed360-111">tooevolve this scenario, a new requirement has been added toohello system: hello store owner wants toobe able toomonitor how hello store is performing in real time.</span></span>

<span data-ttu-id="ed360-112">tooaddress esse requisito, sistema hello ", pressione" fora do fluxo de dados de vendas de saudação.</span><span class="sxs-lookup"><span data-stu-id="ed360-112">tooaddress this requirement, hello system must "tap" off hello sales data stream.</span></span> <span data-ttu-id="ed360-113">Ainda desejamos que cada mensagem enviada por toobe de terminais de POS Olá enviada do sistema de gerenciamento de estoque toohello como antes, mas queremos outra cópia de cada mensagem que podemos usar o proprietário do repositório de toohello toopresent Olá painel exibição.</span><span class="sxs-lookup"><span data-stu-id="ed360-113">We still want each message sent by hello POS terminals toobe sent toohello inventory management system as before, but we want another copy of each message that we can use toopresent hello dashboard view toohello store owner.</span></span>

<span data-ttu-id="ed360-114">Em qualquer situação como essa, em que você precisa cada toobe mensagem consumida por várias partes, você pode usar o barramento de serviço *tópicos*.</span><span class="sxs-lookup"><span data-stu-id="ed360-114">In any situation such as this, in which you require each message toobe consumed by multiple parties, you can use Service Bus *topics*.</span></span> <span data-ttu-id="ed360-115">Tópicos de fornecem um padrão de publicação/assinatura em que cada mensagem publicada é feita tooone disponível ou mais assinaturas registrado com o tópico de saudação.</span><span class="sxs-lookup"><span data-stu-id="ed360-115">Topics provide a publish/subscribe pattern in which each published message is made available tooone or more subscriptions registered with hello topic.</span></span> <span data-ttu-id="ed360-116">Por outro lado, com as filas, cada mensagem é recebida por um único consumidor.</span><span class="sxs-lookup"><span data-stu-id="ed360-116">In contrast, with queues each message is received by a single consumer.</span></span>

<span data-ttu-id="ed360-117">As mensagens são enviadas tooa tópico em Olá mesma maneira que eles enviem tooa fila.</span><span class="sxs-lookup"><span data-stu-id="ed360-117">Messages are sent tooa topic in hello same way as they are sent tooa queue.</span></span> <span data-ttu-id="ed360-118">No entanto, as mensagens não são recebidas do tópico Olá diretamente; elas são recebidas nas assinaturas.</span><span class="sxs-lookup"><span data-stu-id="ed360-118">However, messages are not received from hello topic directly; they are received from subscriptions.</span></span> <span data-ttu-id="ed360-119">Você pode pensar em um tópico de tooa assinatura como uma fila virtual que recebe cópias das mensagens de saudação enviadas toothat tópico.</span><span class="sxs-lookup"><span data-stu-id="ed360-119">You can think of a subscription tooa topic as a virtual queue that receives copies of hello messages that are sent toothat topic.</span></span> <span data-ttu-id="ed360-120">As mensagens são recebidas de uma assinatura Olá mesma maneira que elas são recebidas de uma fila.</span><span class="sxs-lookup"><span data-stu-id="ed360-120">Messages are received from a subscription hello same way as they are received from a queue.</span></span>

<span data-ttu-id="ed360-121">Voltando toohello cenário de varejo, fila de saudação é substituída por um tópico e uma assinatura é adicionada, pode usar o componente do sistema Olá inventário gerenciamento.</span><span class="sxs-lookup"><span data-stu-id="ed360-121">Going back toohello retail scenario, hello queue is replaced by a topic, and a subscription is added, which hello inventory management system component can use.</span></span> <span data-ttu-id="ed360-122">sistema de saudação agora aparece da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="ed360-122">hello system now appears as follows:</span></span>

![Barramento de Serviço 2](./media/service-bus-create-topics-subscriptions/IC657165.gif)

<span data-ttu-id="ed360-124">configuração de saudação aqui funciona de forma idêntica toohello anterior com base em fila design.</span><span class="sxs-lookup"><span data-stu-id="ed360-124">hello configuration here performs identically toohello previous queue-based design.</span></span> <span data-ttu-id="ed360-125">Ou seja, as mensagens enviadas toohello tópico são roteada toohello **inventário** assinatura, do qual Olá **sistema de gerenciamento de estoque** consome-los.</span><span class="sxs-lookup"><span data-stu-id="ed360-125">That is, messages sent toohello topic are routed toohello **Inventory** subscription, from which hello **Inventory Management System** consumes them.</span></span>

<span data-ttu-id="ed360-126">No painel de gerenciamento do pedido toosupport hello, criamos uma segunda assinatura no tópico hello, conforme mostrado aqui:</span><span class="sxs-lookup"><span data-stu-id="ed360-126">In order toosupport hello management dashboard, we create a second subscription on hello topic, as shown here:</span></span>

![Barramento de Serviço 3](./media/service-bus-create-topics-subscriptions/IC657166.gif)

<span data-ttu-id="ed360-128">Com essa configuração, cada mensagem dos terminais de POS da saudação de fica disponível tooboth Olá **painel** e **inventário** assinaturas.</span><span class="sxs-lookup"><span data-stu-id="ed360-128">With this configuration, each message from hello POS terminals is made available tooboth hello **Dashboard** and **Inventory** subscriptions.</span></span>

## <a name="show-me-hello-code"></a><span data-ttu-id="ed360-129">Mostre-me Olá código</span><span class="sxs-lookup"><span data-stu-id="ed360-129">Show me hello code</span></span>
<span data-ttu-id="ed360-130">artigo Olá [criar aplicativos que usam filas do barramento de serviço](service-bus-create-queues.md) descreve como toosign para uma conta do Azure e criar um namespace de serviço.</span><span class="sxs-lookup"><span data-stu-id="ed360-130">hello article [Create applications that use Service Bus queues](service-bus-create-queues.md) describes how toosign up for an Azure account and create a service namespace.</span></span> <span data-ttu-id="ed360-131">dependências de barramento de serviço do Hello mais fácil maneira tooreference é tooinstall Olá barramento de serviço [pacote Nuget](https://www.nuget.org/packages/WindowsAzure.ServiceBus/).</span><span class="sxs-lookup"><span data-stu-id="ed360-131">hello easiest way tooreference Service Bus dependencies is tooinstall hello Service Bus [Nuget package](https://www.nuget.org/packages/WindowsAzure.ServiceBus/).</span></span> <span data-ttu-id="ed360-132">Você também pode encontrar hello bibliotecas de barramento de serviço como parte de saudação do SDK do Azure.</span><span class="sxs-lookup"><span data-stu-id="ed360-132">You can also find hello Service Bus libraries as part of hello Azure SDK.</span></span> <span data-ttu-id="ed360-133">Olá download está disponível na Olá [página de download do SDK do Azure](https://azure.microsoft.com/downloads/).</span><span class="sxs-lookup"><span data-stu-id="ed360-133">hello download is available at hello [Azure SDK download page](https://azure.microsoft.com/downloads/).</span></span>

### <a name="create-hello-topic-and-subscriptions"></a><span data-ttu-id="ed360-134">Criar tópico hello e assinaturas</span><span class="sxs-lookup"><span data-stu-id="ed360-134">Create hello topic and subscriptions</span></span>
<span data-ttu-id="ed360-135">Operações de gerenciamento para entidades de mensagens (filas e a publicação/assinatura tópicos) são executadas por meio de saudação do barramento de serviço [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) classe.</span><span class="sxs-lookup"><span data-stu-id="ed360-135">Management operations for Service Bus messaging entities (queues and publish/subscribe topics) are performed via hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) class.</span></span> <span data-ttu-id="ed360-136">São necessárias credenciais apropriadas em ordem toocreate um **NamespaceManager** instância para um namespace específico.</span><span class="sxs-lookup"><span data-stu-id="ed360-136">Appropriate credentials are required in order toocreate a **NamespaceManager** instance for a particular namespace.</span></span> <span data-ttu-id="ed360-137">O Barramento de Serviço usa um modelo de segurança baseado na [Assinatura de Acesso Compartilhado (SAS)](service-bus-sas.md).</span><span class="sxs-lookup"><span data-stu-id="ed360-137">Service Bus uses a [Shared Access Signature (SAS)](service-bus-sas.md) based security model.</span></span> <span data-ttu-id="ed360-138">Olá [TokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider#microsoft_servicebus_tokenprovider) classe representa um provedor de token de segurança com métodos de fábrica interna retornando alguns provedores de token bem conhecidos.</span><span class="sxs-lookup"><span data-stu-id="ed360-138">hello [TokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider#microsoft_servicebus_tokenprovider) class represents a security token provider with built-in factory methods returning some well-known token providers.</span></span> <span data-ttu-id="ed360-139">Usaremos uma [CreateSharedAccessSignatureTokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider#Microsoft_ServiceBus_TokenProvider_CreateSharedAccessSignatureTokenProvider_System_String_) credenciais do método toohold Olá SAS.</span><span class="sxs-lookup"><span data-stu-id="ed360-139">We’ll use a [CreateSharedAccessSignatureTokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider#Microsoft_ServiceBus_TokenProvider_CreateSharedAccessSignatureTokenProvider_System_String_) method toohold hello SAS credentials.</span></span> <span data-ttu-id="ed360-140">Olá [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) instância é construída com o endereço base Olá Olá namespace de barramento de serviço e o provedor de token de saudação.</span><span class="sxs-lookup"><span data-stu-id="ed360-140">hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) instance is then constructed with hello base address of hello Service Bus namespace and hello token provider.</span></span>

<span data-ttu-id="ed360-141">Olá [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) classe fornece métodos toocreate, enumerar e excluir entidades de mensagens.</span><span class="sxs-lookup"><span data-stu-id="ed360-141">hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) class provides methods toocreate, enumerate and delete messaging entities.</span></span> <span data-ttu-id="ed360-142">Olá código mostrado aqui mostra como Olá **NamespaceManager** instância é criada e usada toocreate Olá **DataCollectionTopic** tópico.</span><span class="sxs-lookup"><span data-stu-id="ed360-142">hello code that is shown here shows how hello **NamespaceManager** instance is created and used toocreate hello **DataCollectionTopic** topic.</span></span>

```csharp
Uri uri = ServiceBusEnvironment.CreateServiceUri("sb", "test-blog", string.Empty);
string name = "RootManageSharedAccessKey";
string key = "abcdefghijklmopqrstuvwxyz";

TokenProvider tokenProvider = TokenProvider.CreateSharedAccessSignatureTokenProvider(name, key);
NamespaceManager namespaceManager = new NamespaceManager(uri, tokenProvider);

namespaceManager.CreateTopic("DataCollectionTopic");
```

<span data-ttu-id="ed360-143">Observe que há sobrecargas de saudação [CreateTopic](/dotnet/api/microsoft.servicebus.namespacemanager#Microsoft_ServiceBus_NamespaceManager_CreateTopic_System_String_) método que permitem que você tooset propriedades do tópico hello.</span><span class="sxs-lookup"><span data-stu-id="ed360-143">Note that there are overloads of hello [CreateTopic](/dotnet/api/microsoft.servicebus.namespacemanager#Microsoft_ServiceBus_NamespaceManager_CreateTopic_System_String_) method that enable you tooset properties of hello topic.</span></span> <span data-ttu-id="ed360-144">Por exemplo, você pode definir Olá time-to-live (TTL) valor padrão para mensagens enviadas toohello tópico.</span><span class="sxs-lookup"><span data-stu-id="ed360-144">For example, you can set hello default time-to-live (TTL) value for messages sent toohello topic.</span></span> <span data-ttu-id="ed360-145">Em seguida, adicione Olá **inventário** e **painel** assinaturas.</span><span class="sxs-lookup"><span data-stu-id="ed360-145">Next, add hello **Inventory** and **Dashboard** subscriptions.</span></span>

```csharp
namespaceManager.CreateSubscription("DataCollectionTopic", "Inventory");
namespaceManager.CreateSubscription("DataCollectionTopic", "Dashboard");
```

### <a name="send-messages-toohello-topic"></a><span data-ttu-id="ed360-146">Enviar tópico toohello de mensagens</span><span class="sxs-lookup"><span data-stu-id="ed360-146">Send messages toohello topic</span></span>
<span data-ttu-id="ed360-147">Para operações de tempo de execução em entidades do Barramento de Serviço; por exemplo, para enviar e receber mensagens, primeiro um aplicativo deverá criar um objeto [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#microsoft_servicebus_messaging_messagingfactory).</span><span class="sxs-lookup"><span data-stu-id="ed360-147">For run-time operations on Service Bus entities; for example, sending and receiving messages, an application must first create a [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#microsoft_servicebus_messaging_messagingfactory) object.</span></span> <span data-ttu-id="ed360-148">Semelhante toohello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) classe hello **MessagingFactory** instância é criada a partir do endereço de base de saudação do hello namespace de serviço e o provedor de token de saudação.</span><span class="sxs-lookup"><span data-stu-id="ed360-148">Similar toohello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) class, hello **MessagingFactory** instance is created from hello base address of hello service namespace and hello token provider.</span></span>

```
MessagingFactory factory = MessagingFactory.Create(uri, tokenProvider);
```

<span data-ttu-id="ed360-149">As mensagens enviadas tooand recebida de tópicos do barramento de serviço, são instâncias da saudação [BrokeredMessage](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage) classe.</span><span class="sxs-lookup"><span data-stu-id="ed360-149">Messages sent tooand received from Service Bus topics, are instances of hello [BrokeredMessage](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage) class.</span></span> <span data-ttu-id="ed360-150">Essa classe consiste em um conjunto de propriedades padrão (como [rótulo](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.label?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_BrokeredMessage_Label) e [TimeToLive](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.timetolive?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_BrokeredMessage_TimeToLive)), um dicionário que é usado toohold propriedades do aplicativo e um corpo de dados arbitrários do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ed360-150">This class consists of a set of standard properties (such as [Label](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.label?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_BrokeredMessage_Label) and [TimeToLive](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.timetolive?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_BrokeredMessage_TimeToLive)), a dictionary that is used toohold application properties, and a body of arbitrary application data.</span></span> <span data-ttu-id="ed360-151">Um aplicativo pode definir corpo Olá passando qualquer objeto serializável (hello exemplo a seguir passa um **SalesData** objeto que representa os dados de vendas de saudação do terminal de POS da saudação), que usará Olá [ DataContractSerializer](https://msdn.microsoft.com/library/system.runtime.serialization.datacontractserializer.aspx) tooserialize objeto de saudação.</span><span class="sxs-lookup"><span data-stu-id="ed360-151">An application can set hello body by passing in any serializable object (hello following example passes in a **SalesData** object that represents hello sales data from hello POS terminal), which will use hello [DataContractSerializer](https://msdn.microsoft.com/library/system.runtime.serialization.datacontractserializer.aspx) tooserialize hello object.</span></span> <span data-ttu-id="ed360-152">Como alternativa, poderá ser fornecido um objeto [Stream](https://msdn.microsoft.com/library/system.io.stream.aspx).</span><span class="sxs-lookup"><span data-stu-id="ed360-152">Alternatively, a [Stream](https://msdn.microsoft.com/library/system.io.stream.aspx) object can be provided.</span></span>

```csharp
BrokeredMessage bm = new BrokeredMessage(salesData);
bm.Label = "SalesReport";
bm.Properties["StoreName"] = "Redmond";
bm.Properties["MachineID"] = "POS_1";
```

<span data-ttu-id="ed360-153">Olá mais fácil maneira toosend mensagens toohello tópico é toouse [CreateMessageSender](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_CreateMessageSender_System_String_) toocreate um [MessageSender](/dotnet/api/microsoft.servicebus.messaging.messagesender) objeto diretamente a partir de saudação [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) instância:</span><span class="sxs-lookup"><span data-stu-id="ed360-153">hello easiest way toosend messages toohello topic is toouse [CreateMessageSender](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_CreateMessageSender_System_String_) toocreate a [MessageSender](/dotnet/api/microsoft.servicebus.messaging.messagesender) object directly from hello [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) instance:</span></span>

```csharp
MessageSender sender = factory.CreateMessageSender("DataCollectionTopic");
sender.Send(bm);
```

### <a name="receive-messages-from-a-subscription"></a><span data-ttu-id="ed360-154">Receber mensagens de uma assinatura</span><span class="sxs-lookup"><span data-stu-id="ed360-154">Receive messages from a subscription</span></span>
<span data-ttu-id="ed360-155">Filas de toousing semelhante, tooreceive mensagens de uma assinatura que você pode usar um [MessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagereceiver) objeto que criar diretamente de saudação [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) usando [ CreateMessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_CreateMessageReceiver_System_String_).</span><span class="sxs-lookup"><span data-stu-id="ed360-155">Similar toousing queues, tooreceive messages from a subscription you can use a [MessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagereceiver) object which you create directly from hello [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) using [CreateMessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_CreateMessageReceiver_System_String_).</span></span> <span data-ttu-id="ed360-156">Você pode usar um de saudação dois modos de recebimento (**ReceiveAndDelete** e **PeekLock**), conforme discutido em [criar aplicativos que usam filas do barramento de serviço](service-bus-create-queues.md).</span><span class="sxs-lookup"><span data-stu-id="ed360-156">You can use one of hello two different receive modes (**ReceiveAndDelete** and **PeekLock**), as discussed in [Create applications that use Service Bus queues](service-bus-create-queues.md).</span></span>

<span data-ttu-id="ed360-157">Observe que, quando você cria um **MessageReceiver** para assinaturas, Olá *entityPath* parâmetro é do formato de saudação `topicPath/subscriptions/subscriptionName`.</span><span class="sxs-lookup"><span data-stu-id="ed360-157">Note that when you create a **MessageReceiver** for subscriptions, hello *entityPath* parameter is of hello form `topicPath/subscriptions/subscriptionName`.</span></span> <span data-ttu-id="ed360-158">Portanto, toocreate um **MessageReceiver** para Olá **inventário** assinatura de saudação **DataCollectionTopic** tópico *entityPath*deve ser definido muito`DataCollectionTopic/subscriptions/Inventory`.</span><span class="sxs-lookup"><span data-stu-id="ed360-158">Therefore, toocreate a **MessageReceiver** for hello **Inventory** subscription of hello **DataCollectionTopic** topic, *entityPath* must be set too`DataCollectionTopic/subscriptions/Inventory`.</span></span> <span data-ttu-id="ed360-159">código de saudação aparece da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="ed360-159">hello code appears as follows:</span></span>

```csharp
MessageReceiver receiver = factory.CreateMessageReceiver("DataCollectionTopic/subscriptions/Inventory");
BrokeredMessage receivedMessage = receiver.Receive();
try
{
    ProcessMessage(receivedMessage);
    receivedMessage.Complete();
}
catch (Exception e)
{
    receivedMessage.Abandon();
}
```

## <a name="subscription-filters"></a><span data-ttu-id="ed360-160">Filtros de assinatura</span><span class="sxs-lookup"><span data-stu-id="ed360-160">Subscription filters</span></span>
<span data-ttu-id="ed360-161">Neste cenário até agora, todas as mensagens enviadas toohello tópico ficam assinaturas disponíveis tooall registrado.</span><span class="sxs-lookup"><span data-stu-id="ed360-161">So far, in this scenario all messages sent toohello topic are made available tooall registered subscriptions.</span></span> <span data-ttu-id="ed360-162">Olá frase-chave aqui é "disponibilizada".</span><span class="sxs-lookup"><span data-stu-id="ed360-162">hello key phrase here is "made available."</span></span> <span data-ttu-id="ed360-163">Enquanto as assinaturas do barramento de serviço vejam todas as mensagens enviadas toohello tópico, você pode copiar apenas um subconjunto da fila de assinatura virtual de toohello mensagens.</span><span class="sxs-lookup"><span data-stu-id="ed360-163">While Service Bus subscriptions see all messages sent toohello topic, you can copy only a subset of those messages toohello virtual subscription queue.</span></span> <span data-ttu-id="ed360-164">Isso é feito usando *filtros* de assinatura.</span><span class="sxs-lookup"><span data-stu-id="ed360-164">This is performed using subscription *filters*.</span></span> <span data-ttu-id="ed360-165">Quando você cria uma assinatura, você pode fornecer uma expressão de filtro na forma de saudação de um predicado de estilo SQL92 que opera nas propriedades de saudação de mensagem de saudação, ambos Olá propriedades do sistema (por exemplo, [rótulo](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Label)) e o aplicativo hello propriedades, como **StoreName** no exemplo anterior de saudação.</span><span class="sxs-lookup"><span data-stu-id="ed360-165">When you create a subscription, you can supply a filter expression in hello form of a SQL92 style predicate that operates over hello properties of hello message, both hello system properties (for example, [Label](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Label)) and hello application properties, such as **StoreName** in hello previous example.</span></span>

<span data-ttu-id="ed360-166">Olá cenário tooillustrate evoluindo isso, uma segunda loja é cenário de varejo toobe tooour adicionado.</span><span class="sxs-lookup"><span data-stu-id="ed360-166">Evolving hello scenario tooillustrate this, a second store is toobe added tooour retail scenario.</span></span> <span data-ttu-id="ed360-167">Dados de vendas de todos os terminais de POS da saudação ambos os armazenamentos de ainda têm o sistema de gerenciamento de estoque toobe roteada toohello centralizado, mas um Gerenciador de armazenamento usando a ferramenta de painel Olá só está interessado no desempenho de saudação do repositório.</span><span class="sxs-lookup"><span data-stu-id="ed360-167">Sales data from all of hello POS terminals from both stores still have toobe routed toohello centralized inventory management system, but a store manager using hello dashboard tool is only interested in hello performance of that store.</span></span> <span data-ttu-id="ed360-168">Você pode usar a filtragem tooachieve isso de assinatura.</span><span class="sxs-lookup"><span data-stu-id="ed360-168">You can use subscription filtering tooachieve this.</span></span> <span data-ttu-id="ed360-169">Observe que, quando os terminais de POS da saudação publicam mensagens, eles definido Olá **StoreName** propriedade na mensagem de saudação de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ed360-169">Note that when hello POS terminals publish messages, they set hello **StoreName** application property on hello message.</span></span> <span data-ttu-id="ed360-170">Considerando duas lojas, por exemplo **Redmond** e **Seattle**, terminais de POS da saudação Olá Redmond armazenam carimbo mensagens de seus dados de vendas com um **StoreName** igual muito **Redmond**, enquanto Olá Seattle armazenar o uso de terminais de POS um **StoreName** igual muito**Seattle**.</span><span class="sxs-lookup"><span data-stu-id="ed360-170">Given two stores, for example **Redmond** and **Seattle**, hello POS terminals in hello Redmond store stamp their sales data messages with a **StoreName** equal too**Redmond**, whereas hello Seattle store POS terminals use a **StoreName** equal too**Seattle**.</span></span> <span data-ttu-id="ed360-171">Gerenciador de repositório de saudação do hello Redmond armazenar apenas deseja toosee dados de seus terminais de POS.</span><span class="sxs-lookup"><span data-stu-id="ed360-171">hello store manager of hello Redmond store only wants toosee data from its POS terminals.</span></span> <span data-ttu-id="ed360-172">sistema de saudação aparece da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="ed360-172">hello system appears as follows:</span></span>

![Service-Bus4](./media/service-bus-create-topics-subscriptions/IC657167.gif)

<span data-ttu-id="ed360-174">tooset o este roteamento, você cria Olá **painel** assinatura da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="ed360-174">tooset up this routing, you create hello **Dashboard** subscription as follows:</span></span>

```csharp
SqlFilter dashboardFilter = new SqlFilter("StoreName = 'Redmond'");
namespaceManager.CreateSubscription("DataCollectionTopic", "Dashboard", dashboardFilter);
```

<span data-ttu-id="ed360-175">Com isso [filtro de assinatura](/dotnet/api/microsoft.servicebus.messaging.sqlfilter), somente as mensagens com hello **StoreName** propriedade definida muito**Redmond** será copiado toohello fila virtual Olá **Painel** assinatura.</span><span class="sxs-lookup"><span data-stu-id="ed360-175">With this [subscription filter](/dotnet/api/microsoft.servicebus.messaging.sqlfilter), only messages that have hello **StoreName** property set too**Redmond** will be copied toohello virtual queue for hello **Dashboard** subscription.</span></span> <span data-ttu-id="ed360-176">Há muito mais toosubscription filtragem, no entanto.</span><span class="sxs-lookup"><span data-stu-id="ed360-176">There is much more toosubscription filtering, however.</span></span> <span data-ttu-id="ed360-177">Os aplicativos podem ter várias regras de filtro por assinatura em adição toohello capacidade toomodify Olá propriedades de uma mensagem conforme ele passa a fila virtual tooa da assinatura.</span><span class="sxs-lookup"><span data-stu-id="ed360-177">Applications can have multiple filter rules per subscription in addition toohello ability toomodify hello properties of a message as it passes tooa subscription's virtual queue.</span></span>

## <a name="summary"></a><span data-ttu-id="ed360-178">Resumo</span><span class="sxs-lookup"><span data-stu-id="ed360-178">Summary</span></span>
<span data-ttu-id="ed360-179">Todas Olá motivos toouse enfileiramento descritas [criar aplicativos que usam filas do barramento de serviço](service-bus-create-queues.md) também se aplicam tootopics, especificamente:</span><span class="sxs-lookup"><span data-stu-id="ed360-179">All of hello reasons toouse queuing described in [Create applications that use Service Bus queues](service-bus-create-queues.md) also apply tootopics, specifically:</span></span>

* <span data-ttu-id="ed360-180">Desacoplamento temporal: mensagem produtores e consumidores não têm toobe online em Olá simultaneamente.</span><span class="sxs-lookup"><span data-stu-id="ed360-180">Temporal decoupling – message producers and consumers do not have toobe online at hello same time.</span></span>
* <span data-ttu-id="ed360-181">Nivelamento de carga – picos de carga são amenizados pelo tópico Olá habilitando consumo toobe aplicativos provisionado para carga média em vez de picos de carga.</span><span class="sxs-lookup"><span data-stu-id="ed360-181">Load leveling – peaks in load are smoothed out by hello topic enabling consuming applications toobe provisioned for average load instead of peak load.</span></span>
* <span data-ttu-id="ed360-182">Balanceamento de carga – fila tooa semelhante, você pode ter vários consumidores concorrentes ouvindo em uma única assinatura, com cada mensagem entregue tooonly de consumidores hello, resultando no balanceamento de carga.</span><span class="sxs-lookup"><span data-stu-id="ed360-182">Load balancing – similar tooa queue, you can have multiple competing consumers listening on a single subscription, with each message handed off tooonly one of hello consumers, thereby balancing load.</span></span>
* <span data-ttu-id="ed360-183">Acoplamento flexível: você pode evoluir Olá mensagens rede sem afetar os pontos de extremidade existentes; Por exemplo, adicionando assinaturas ou alterando filtros tooa tópico tooallow novos consumidores.</span><span class="sxs-lookup"><span data-stu-id="ed360-183">Loose coupling – you can evolve hello messaging network without affecting existing endpoints; for example, adding subscriptions or changing filters tooa topic tooallow for new consumers.</span></span>

## <a name="next-steps"></a><span data-ttu-id="ed360-184">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="ed360-184">Next steps</span></span>

<span data-ttu-id="ed360-185">Consulte [criar aplicativos que usam filas do barramento de serviço](service-bus-create-queues.md) para obter informações sobre como toouse filas no cenário de varejo Olá POS.</span><span class="sxs-lookup"><span data-stu-id="ed360-185">See [Create applications that use Service Bus queues](service-bus-create-queues.md) for information about how toouse queues in hello POS retail scenario.</span></span>

