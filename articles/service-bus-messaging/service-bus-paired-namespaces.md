---
title: aaaAzure Service Bus emparelhado namespaces | Microsoft Docs
description: "Detalhes e custo de implementação do namespace emparelhado"
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 2440c8d3-ed2e-47e0-93cf-ab7fbb855d2e
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 05/25/2017
ms.author: sethm
ms.openlocfilehash: 4c44b2b95d2228e1ad8075b52634d88a1593d3b1
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="paired-namespace-implementation-details-and-cost-implications"></a><span data-ttu-id="a7c02-103">Detalhes e implicações de custo da implementação do namespace emparelhado</span><span class="sxs-lookup"><span data-stu-id="a7c02-103">Paired namespace implementation details and cost implications</span></span>
<span data-ttu-id="a7c02-104">Olá [PairNamespaceAsync] [ PairNamespaceAsync] método, usando um [SendAvailabilityPairedNamespaceOptions] [ SendAvailabilityPairedNamespaceOptions] da instância, realiza tarefas visíveis em seu nome.</span><span class="sxs-lookup"><span data-stu-id="a7c02-104">hello [PairNamespaceAsync][PairNamespaceAsync] method, using a [SendAvailabilityPairedNamespaceOptions][SendAvailabilityPairedNamespaceOptions] instance, performs visible tasks on your behalf.</span></span> <span data-ttu-id="a7c02-105">Porque há questões de custo ao usar o recurso de Olá, é útil toounderstand as tarefas para que você espera que o comportamento de saudação quando isso acontece.</span><span class="sxs-lookup"><span data-stu-id="a7c02-105">Because there are cost considerations when using hello feature, it is useful toounderstand those tasks so that you expect hello behavior when it happens.</span></span> <span data-ttu-id="a7c02-106">Olá API emprega Olá seguinte comportamento automático em seu nome:</span><span class="sxs-lookup"><span data-stu-id="a7c02-106">hello API engages hello following automatic behavior on your behalf:</span></span>

* <span data-ttu-id="a7c02-107">Criação de filas de pendências.</span><span class="sxs-lookup"><span data-stu-id="a7c02-107">Creation of backlog queues.</span></span>
* <span data-ttu-id="a7c02-108">Criação de um [MessageSender] [ MessageSender] objeto que se comunica tooqueues ou tópicos.</span><span class="sxs-lookup"><span data-stu-id="a7c02-108">Creation of a [MessageSender][MessageSender] object that talks tooqueues or topics.</span></span>
* <span data-ttu-id="a7c02-109">Quando uma entidade de mensagens se tornar indisponível, envia mensagens de ping toohello entidade em uma tentativa de toodetect quando essa entidade estará disponível novamente.</span><span class="sxs-lookup"><span data-stu-id="a7c02-109">When a messaging entity becomes unavailable, sends ping messages toohello entity in an attempt toodetect when that entity becomes available again.</span></span>
* <span data-ttu-id="a7c02-110">Opcionalmente, cria um conjunto de "bombas de mensagens" mover as mensagens de Olá filas de lista de pendências toohello filas principais.</span><span class="sxs-lookup"><span data-stu-id="a7c02-110">Optionally creates of a set of “message pumps” that move messages from hello backlog queues toohello primary queues.</span></span>
* <span data-ttu-id="a7c02-111">Coordena o fechamento/falha de saudação primária e secundária [MessagingFactory] [ MessagingFactory] instâncias.</span><span class="sxs-lookup"><span data-stu-id="a7c02-111">Coordinates closing/faulting of hello primary and secondary [MessagingFactory][MessagingFactory] instances.</span></span>

<span data-ttu-id="a7c02-112">Em um nível alto, o recurso de saudação funciona da seguinte maneira: quando a entidade principal hello está íntegra, nenhuma alteração de comportamento ocorre.</span><span class="sxs-lookup"><span data-stu-id="a7c02-112">At a high level, hello feature works as follows: when hello primary entity is healthy, no behavior changes occur.</span></span> <span data-ttu-id="a7c02-113">Olá quando [FailoverInterval] [ FailoverInterval] decorrer de duração, e entidade principal Olá não vê nenhum envia bem-sucedida após não transitório [MessagingException] [ MessagingException] ou um [TimeoutException][TimeoutException], Olá seguinte comportamento ocorre:</span><span class="sxs-lookup"><span data-stu-id="a7c02-113">When hello [FailoverInterval][FailoverInterval] duration elapses, and hello primary entity sees no successful sends after a non-transient [MessagingException][MessagingException] or a [TimeoutException][TimeoutException], hello following behavior occurs:</span></span>

1. <span data-ttu-id="a7c02-114">Envie operações toohello primário entidade são desabilitados e os pings de sistema Olá Olá entidade primária até que pings podem ser entregues com êxito.</span><span class="sxs-lookup"><span data-stu-id="a7c02-114">Send operations toohello primary entity are disabled and hello system pings hello primary entity until pings can be successfully delivered.</span></span>
2. <span data-ttu-id="a7c02-115">Uma fila de pendências aleatória é selecionada.</span><span class="sxs-lookup"><span data-stu-id="a7c02-115">A random backlog queue is selected.</span></span>
3. <span data-ttu-id="a7c02-116">[BrokeredMessage] [ BrokeredMessage] objetos são roteada toohello escolhido fila de pendências.</span><span class="sxs-lookup"><span data-stu-id="a7c02-116">[BrokeredMessage][BrokeredMessage] objects are routed toohello chosen backlog queue.</span></span>
4. <span data-ttu-id="a7c02-117">Se um toohello de operação de envio escolhida a fila de pendências falhar, essa fila é retirada da rotação hello e uma nova fila é selecionada.</span><span class="sxs-lookup"><span data-stu-id="a7c02-117">If a send operation toohello chosen backlog queue fails, that queue is pulled from hello rotation and a new queue is selected.</span></span> <span data-ttu-id="a7c02-118">Todos os remetentes na Olá [MessagingFactory] [ MessagingFactory] instância saber de falha de saudação.</span><span class="sxs-lookup"><span data-stu-id="a7c02-118">All senders on hello [MessagingFactory][MessagingFactory] instance learn of hello failure.</span></span>

<span data-ttu-id="a7c02-119">Olá figuras a seguir descrevem sequência hello.</span><span class="sxs-lookup"><span data-stu-id="a7c02-119">hello following figures depict hello sequence.</span></span> <span data-ttu-id="a7c02-120">Primeiro, o remetente Olá envia mensagens.</span><span class="sxs-lookup"><span data-stu-id="a7c02-120">First, hello sender sends messages.</span></span>

![Namespaces emparelhados][0]

<span data-ttu-id="a7c02-122">Após a falha toosend toohello fila primária remetente Olá começa a enviar mensagens tooa escolhido aleatoriamente a fila de pendências.</span><span class="sxs-lookup"><span data-stu-id="a7c02-122">Upon failure toosend toohello primary queue, hello sender begins sending messages tooa randomly chosen backlog queue.</span></span> <span data-ttu-id="a7c02-123">Simultaneamente, ele inicia uma tarefa de ping.</span><span class="sxs-lookup"><span data-stu-id="a7c02-123">Simultaneously, it starts a ping task.</span></span>

![Namespaces emparelhados][1]

<span data-ttu-id="a7c02-125">Nesse ponto, mensagens de saudação ainda estão na fila secundária hello e não tem sido entregue a fila primária toohello.</span><span class="sxs-lookup"><span data-stu-id="a7c02-125">At this point hello messages are still in hello secondary queue and have not been delivered toohello primary queue.</span></span> <span data-ttu-id="a7c02-126">Depois que a fila primária Olá estiver íntegra novamente, pelo menos um processo deve estar executando o sifão hello.</span><span class="sxs-lookup"><span data-stu-id="a7c02-126">Once hello primary queue is healthy again, at least one process should be running hello syphon.</span></span> <span data-ttu-id="a7c02-127">Sifão Olá fornece mensagens de saudação Olá todas as pendências de várias entidades de destino adequadas de toohello filas (filas e tópicos).</span><span class="sxs-lookup"><span data-stu-id="a7c02-127">hello syphon delivers hello messages from all hello various backlog queues toohello proper destination entities (queues and topics).</span></span>

![Namespaces emparelhados][2]

<span data-ttu-id="a7c02-129">Olá restante deste tópico aborda detalhes específicos de saudação de como essas partes funcionam.</span><span class="sxs-lookup"><span data-stu-id="a7c02-129">hello remainder of this topic discusses hello specific details of how these pieces work.</span></span>

## <a name="creation-of-backlog-queues"></a><span data-ttu-id="a7c02-130">Criação de filas de pendências</span><span class="sxs-lookup"><span data-stu-id="a7c02-130">Creation of backlog queues</span></span>
<span data-ttu-id="a7c02-131">Olá [SendAvailabilityPairedNamespaceOptions] [ SendAvailabilityPairedNamespaceOptions] objeto passado toohello [PairNamespaceAsync] [ PairNamespaceAsync] método indica Olá número de lista de pendências de filas que você deseja toouse.</span><span class="sxs-lookup"><span data-stu-id="a7c02-131">hello [SendAvailabilityPairedNamespaceOptions][SendAvailabilityPairedNamespaceOptions] object passed toohello [PairNamespaceAsync][PairNamespaceAsync] method indicates hello number of backlog queues you want toouse.</span></span> <span data-ttu-id="a7c02-132">Cada fila de lista de pendências é criada com hello seguintes propriedades explicitamente definido (todos os outros valores são definidos toohello [QueueDescription] [ QueueDescription] padrões):</span><span class="sxs-lookup"><span data-stu-id="a7c02-132">Each backlog queue is then created with hello following properties explicitly set (all other values are set toohello [QueueDescription][QueueDescription] defaults):</span></span>

| <span data-ttu-id="a7c02-133">Caminho</span><span class="sxs-lookup"><span data-stu-id="a7c02-133">Path</span></span> | <span data-ttu-id="a7c02-134">[namespace primário]/x-servicebus-transfer/[índice] no qual [índice] é um valor em [0, BacklogQueueCount)</span><span class="sxs-lookup"><span data-stu-id="a7c02-134">[primary namespace]/x-servicebus-transfer/[index] where [index] is a value in [0, BacklogQueueCount)</span></span> |
| --- | --- |
| <span data-ttu-id="a7c02-135">MaxSizeInMegabytes</span><span class="sxs-lookup"><span data-stu-id="a7c02-135">MaxSizeInMegabytes</span></span> |<span data-ttu-id="a7c02-136">5120</span><span class="sxs-lookup"><span data-stu-id="a7c02-136">5120</span></span> |
| <span data-ttu-id="a7c02-137">MaxDeliveryCount</span><span class="sxs-lookup"><span data-stu-id="a7c02-137">MaxDeliveryCount</span></span> |<span data-ttu-id="a7c02-138">int.MaxValue</span><span class="sxs-lookup"><span data-stu-id="a7c02-138">int.MaxValue</span></span> |
| <span data-ttu-id="a7c02-139">DefaultMessageTimeToLive</span><span class="sxs-lookup"><span data-stu-id="a7c02-139">DefaultMessageTimeToLive</span></span> |<span data-ttu-id="a7c02-140">TimeSpan.MaxValue</span><span class="sxs-lookup"><span data-stu-id="a7c02-140">TimeSpan.MaxValue</span></span> |
| <span data-ttu-id="a7c02-141">AutoDeleteOnIdle</span><span class="sxs-lookup"><span data-stu-id="a7c02-141">AutoDeleteOnIdle</span></span> |<span data-ttu-id="a7c02-142">TimeSpan.MaxValue</span><span class="sxs-lookup"><span data-stu-id="a7c02-142">TimeSpan.MaxValue</span></span> |
| <span data-ttu-id="a7c02-143">LockDuration</span><span class="sxs-lookup"><span data-stu-id="a7c02-143">LockDuration</span></span> |<span data-ttu-id="a7c02-144">1 minuto</span><span class="sxs-lookup"><span data-stu-id="a7c02-144">1 minute</span></span> |
| <span data-ttu-id="a7c02-145">EnableDeadLetteringOnMessageExpiration</span><span class="sxs-lookup"><span data-stu-id="a7c02-145">EnableDeadLetteringOnMessageExpiration</span></span> |<span data-ttu-id="a7c02-146">verdadeiro</span><span class="sxs-lookup"><span data-stu-id="a7c02-146">true</span></span> |
| <span data-ttu-id="a7c02-147">EnableBatchedOperations</span><span class="sxs-lookup"><span data-stu-id="a7c02-147">EnableBatchedOperations</span></span> |<span data-ttu-id="a7c02-148">verdadeiro</span><span class="sxs-lookup"><span data-stu-id="a7c02-148">true</span></span> |

<span data-ttu-id="a7c02-149">Por exemplo, a primeira fila de lista de pendências Olá criado para o namespace **contoso** chamado `contoso/x-servicebus-transfer/0`.</span><span class="sxs-lookup"><span data-stu-id="a7c02-149">For example, hello first backlog queue created for namespace **contoso** is named `contoso/x-servicebus-transfer/0`.</span></span>

<span data-ttu-id="a7c02-150">Ao criar filas hello, código de saudação primeiro verifica toosee se essa fila existe.</span><span class="sxs-lookup"><span data-stu-id="a7c02-150">When creating hello queues, hello code first checks toosee if such a queue exists.</span></span> <span data-ttu-id="a7c02-151">Se a fila de saudação não existir, a fila Olá é criada.</span><span class="sxs-lookup"><span data-stu-id="a7c02-151">If hello queue does not exist, then hello queue is created.</span></span> <span data-ttu-id="a7c02-152">Olá código não limpa as filas de lista de pendências "extras".</span><span class="sxs-lookup"><span data-stu-id="a7c02-152">hello code does not clean up "extra" backlog queues.</span></span> <span data-ttu-id="a7c02-153">Especificamente, se hello aplicativo hello namespace primário **contoso** solicitar cinco filas de lista de pendências, mas uma fila de lista de pendências com caminho Olá `contoso/x-servicebus-transfer/7` existir, essa fila de pendências extra ainda está presente, mas não é usada.</span><span class="sxs-lookup"><span data-stu-id="a7c02-153">Specifically, if hello application with hello primary namespace **contoso** requests five backlog queues but a backlog queue with hello path `contoso/x-servicebus-transfer/7` exists, that extra backlog queue is still present but is not used.</span></span> <span data-ttu-id="a7c02-154">sistema de saudação explicitamente permite tooexist de filas de lista de pendências extras que não deve ser usado.</span><span class="sxs-lookup"><span data-stu-id="a7c02-154">hello system explicitly allows extra backlog queues tooexist that would not be used.</span></span> <span data-ttu-id="a7c02-155">Como proprietário do namespace Olá, você é responsável por limpar as filas de lista de pendências não utilizadas/indesejadas.</span><span class="sxs-lookup"><span data-stu-id="a7c02-155">As hello namespace owner, you are responsible for cleaning up any unused/unwanted backlog queues.</span></span> <span data-ttu-id="a7c02-156">Olá motivo essa decisão é que o barramento de serviço não é possível saber as finalidades existentes para todas as filas de saudação no seu namespace.</span><span class="sxs-lookup"><span data-stu-id="a7c02-156">hello reason for this decision is that Service Bus cannot know what purposes exist for all hello queues in your namespace.</span></span> <span data-ttu-id="a7c02-157">Além disso, se uma fila existe com o nome hello, mas não atende Olá assumido [QueueDescription][QueueDescription], e seus motivos são seu próprios para alteração comportamento de padrão de saudação.</span><span class="sxs-lookup"><span data-stu-id="a7c02-157">Furthermore, if a queue exists with hello given name but does not meet hello assumed [QueueDescription][QueueDescription], then your reasons are your own for changing hello default behavior.</span></span> <span data-ttu-id="a7c02-158">Não há garantias para filas de lista de pendências de toohello modificações pelo seu código.</span><span class="sxs-lookup"><span data-stu-id="a7c02-158">No guarantees are made for modifications toohello backlog queues by your code.</span></span> <span data-ttu-id="a7c02-159">Faça tootest-se de que as alterações completamente.</span><span class="sxs-lookup"><span data-stu-id="a7c02-159">Make sure tootest your changes thoroughly.</span></span>

## <a name="custom-messagesender"></a><span data-ttu-id="a7c02-160">MessageSender personalizado</span><span class="sxs-lookup"><span data-stu-id="a7c02-160">Custom MessageSender</span></span>
<span data-ttu-id="a7c02-161">Ao enviar, todas as mensagens passam por meio de interno [MessageSender] [ MessageSender] objeto que se comporta normalmente quando tudo funciona e redireciona as filas de lista de pendências de toohello quando as coisas "quebra".</span><span class="sxs-lookup"><span data-stu-id="a7c02-161">When sending, all messages go through an internal [MessageSender][MessageSender] object that behaves normally when everything works, and redirects toohello backlog queues when things "break."</span></span> <span data-ttu-id="a7c02-162">Ao receber uma falha não transitória, um timer é iniciado.</span><span class="sxs-lookup"><span data-stu-id="a7c02-162">Upon receiving a non-transient failure, a timer starts.</span></span> <span data-ttu-id="a7c02-163">Após um [TimeSpan] [ TimeSpan] período consiste Olá [FailoverInterval] [ FailoverInterval] durante o qual nenhuma mensagem de êxito é enviadas de valor de propriedade , Olá failover for acionado.</span><span class="sxs-lookup"><span data-stu-id="a7c02-163">After a [TimeSpan][TimeSpan] period consisting of hello [FailoverInterval][FailoverInterval] property value during which no successful messages are sent, hello failover is engaged.</span></span> <span data-ttu-id="a7c02-164">Neste ponto, hello acontecem estas coisas para cada entidade:</span><span class="sxs-lookup"><span data-stu-id="a7c02-164">At this point, hello following things happen for each entity:</span></span>

* <span data-ttu-id="a7c02-165">Uma tarefa de ping executa cada [PingPrimaryInterval] [ PingPrimaryInterval] toocheck se Olá entidade está disponível.</span><span class="sxs-lookup"><span data-stu-id="a7c02-165">A ping task executes every [PingPrimaryInterval][PingPrimaryInterval] toocheck if hello entity is available.</span></span> <span data-ttu-id="a7c02-166">Se essa tarefa for bem-sucedida, todo o código do cliente que usa a entidade Olá imediatamente começa enviando novo namespace primário toohello de mensagens.</span><span class="sxs-lookup"><span data-stu-id="a7c02-166">Once this task succeeds, all client code that uses hello entity immediately starts sending new messages toohello primary namespace.</span></span>
* <span data-ttu-id="a7c02-167">As solicitações futuras toosend toothat mesma entidade de quaisquer outros remetentes resultará em Olá [BrokeredMessage] [ BrokeredMessage] enviados toobe modificado toosit na fila de lista de pendências de saudação.</span><span class="sxs-lookup"><span data-stu-id="a7c02-167">Future requests toosend toothat same entity from any other senders will result in hello [BrokeredMessage][BrokeredMessage] being sent toobe modified toosit in hello backlog queue.</span></span> <span data-ttu-id="a7c02-168">modificação de saudação remove algumas propriedades de saudação [BrokeredMessage] [ BrokeredMessage] do objeto e armazená-los em outro lugar.</span><span class="sxs-lookup"><span data-stu-id="a7c02-168">hello modification removes some properties from hello [BrokeredMessage][BrokeredMessage] object and stores them elsewhere.</span></span> <span data-ttu-id="a7c02-169">Olá propriedades a seguir são limpas e adicionadas em um novo alias, permitindo que o barramento de serviço e Olá mensagens do SDK tooprocess uniformemente:</span><span class="sxs-lookup"><span data-stu-id="a7c02-169">hello following properties are cleared and added under a new alias, allowing Service Bus and hello SDK tooprocess messages uniformly:</span></span>

| <span data-ttu-id="a7c02-170">Nome antigo da propriedade</span><span class="sxs-lookup"><span data-stu-id="a7c02-170">Old Property Name</span></span> | <span data-ttu-id="a7c02-171">Novo nome da propriedade</span><span class="sxs-lookup"><span data-stu-id="a7c02-171">New Property Name</span></span> |
| --- | --- |
| <span data-ttu-id="a7c02-172">SessionId</span><span class="sxs-lookup"><span data-stu-id="a7c02-172">SessionId</span></span> |<span data-ttu-id="a7c02-173">x-ms-sessionid</span><span class="sxs-lookup"><span data-stu-id="a7c02-173">x-ms-sessionid</span></span> |
| <span data-ttu-id="a7c02-174">TimeToLive</span><span class="sxs-lookup"><span data-stu-id="a7c02-174">TimeToLive</span></span> |<span data-ttu-id="a7c02-175">x-ms-timetolive</span><span class="sxs-lookup"><span data-stu-id="a7c02-175">x-ms-timetolive</span></span> |
| <span data-ttu-id="a7c02-176">ScheduledEnqueueTimeUtc</span><span class="sxs-lookup"><span data-stu-id="a7c02-176">ScheduledEnqueueTimeUtc</span></span> |<span data-ttu-id="a7c02-177">x-ms-path</span><span class="sxs-lookup"><span data-stu-id="a7c02-177">x-ms-path</span></span> |

<span data-ttu-id="a7c02-178">caminho de destino original Olá também é armazenado na mensagem de saudação como uma propriedade chamada x-ms-path.</span><span class="sxs-lookup"><span data-stu-id="a7c02-178">hello original destination path is also stored within hello message as a property named x-ms-path.</span></span> <span data-ttu-id="a7c02-179">Esse design permite que mensagens para muitos toocoexist de entidades em uma fila única lista de pendências.</span><span class="sxs-lookup"><span data-stu-id="a7c02-179">This design allows messages for many entities toocoexist in a single backlog queue.</span></span> <span data-ttu-id="a7c02-180">Propriedades de saudação são traduzidas novamente pelo sifão hello.</span><span class="sxs-lookup"><span data-stu-id="a7c02-180">hello properties are translated back by hello syphon.</span></span>

<span data-ttu-id="a7c02-181">Olá personalizado [MessageSender] [ MessageSender] objeto pode encontrar problemas quando as mensagens se aproximam limite de 256 KB hello e failover for acionado.</span><span class="sxs-lookup"><span data-stu-id="a7c02-181">hello custom [MessageSender][MessageSender] object can encounter issues when messages approach hello 256-KB limit and failover is engaged.</span></span> <span data-ttu-id="a7c02-182">Olá personalizado [MessageSender] [ MessageSender] objeto armazena as mensagens para todas as filas e tópicos juntos nas filas de lista de pendências de saudação.</span><span class="sxs-lookup"><span data-stu-id="a7c02-182">hello custom [MessageSender][MessageSender] object stores messages for all queues and topics together in hello backlog queues.</span></span> <span data-ttu-id="a7c02-183">Esse objeto combina mensagens de vários principais juntos dentro de filas de lista de pendências de saudação.</span><span class="sxs-lookup"><span data-stu-id="a7c02-183">This object mixes messages from many primaries together within hello backlog queues.</span></span> <span data-ttu-id="a7c02-184">toohandle balanceamento de carga entre vários clientes que não souber cada outro, Olá SDK aleatoriamente escolhe uma fila de lista de pendências para cada [QueueClient] [ QueueClient] ou [TopicClient] [ TopicClient] criado no código.</span><span class="sxs-lookup"><span data-stu-id="a7c02-184">toohandle load balancing among many clients that do not know each other, hello SDK randomly picks one backlog queue for each [QueueClient][QueueClient] or [TopicClient][TopicClient] you create in code.</span></span>

## <a name="pings"></a><span data-ttu-id="a7c02-185">Pings</span><span class="sxs-lookup"><span data-stu-id="a7c02-185">Pings</span></span>
<span data-ttu-id="a7c02-186">Uma mensagem de ping está vazio [BrokeredMessage] [ BrokeredMessage] com seus [ContentType] [ ContentType] propriedade definida tooapplication/vnd.ms-servicebus-ping e um [TimeToLive] [ TimeToLive] valor de 1 segundo.</span><span class="sxs-lookup"><span data-stu-id="a7c02-186">A ping message is an empty [BrokeredMessage][BrokeredMessage] with its [ContentType][ContentType] property set tooapplication/vnd.ms-servicebus-ping and a [TimeToLive][TimeToLive] value of 1 second.</span></span> <span data-ttu-id="a7c02-187">Esse ping tem uma característica especial no barramento de serviço: servidor de saudação nunca entrega um ping quando qualquer chamador solicita uma [BrokeredMessage][BrokeredMessage].</span><span class="sxs-lookup"><span data-stu-id="a7c02-187">This ping has one special characteristic in Service Bus: hello server never delivers a ping when any caller requests a [BrokeredMessage][BrokeredMessage].</span></span> <span data-ttu-id="a7c02-188">Assim, você nunca tiver toolearn como tooreceive e ignorar essas mensagens.</span><span class="sxs-lookup"><span data-stu-id="a7c02-188">Thus, you never have toolearn how tooreceive and ignore these messages.</span></span> <span data-ttu-id="a7c02-189">Cada entidade (fila ou tópico exclusivo) por [MessagingFactory] [ MessagingFactory] instância por cliente executará ping quando eles são considerados toobe não está disponível.</span><span class="sxs-lookup"><span data-stu-id="a7c02-189">Each entity (unique queue or topic) per [MessagingFactory][MessagingFactory] instance per client will be pinged when they are considered toobe unavailable.</span></span> <span data-ttu-id="a7c02-190">Por padrão, isso ocorre uma vez por minuto.</span><span class="sxs-lookup"><span data-stu-id="a7c02-190">By default, this happens once per minute.</span></span> <span data-ttu-id="a7c02-191">Mensagens de ping são consideradas toobe regulares mensagens de barramento de serviço e podem resultar em encargos de largura de banda e mensagens.</span><span class="sxs-lookup"><span data-stu-id="a7c02-191">Ping messages are considered toobe regular Service Bus messages, and can result in charges for bandwidth and messages.</span></span> <span data-ttu-id="a7c02-192">Assim que os clientes Olá detectam que o sistema hello está disponível, mensagens de saudação pararam.</span><span class="sxs-lookup"><span data-stu-id="a7c02-192">As soon as hello clients detect that hello system is available, hello messages stop.</span></span>

## <a name="hello-syphon"></a><span data-ttu-id="a7c02-193">Sifão Olá</span><span class="sxs-lookup"><span data-stu-id="a7c02-193">hello syphon</span></span>
<span data-ttu-id="a7c02-194">Pelo menos um programa executável no aplicativo hello deve estar ativamente executando sifão hello.</span><span class="sxs-lookup"><span data-stu-id="a7c02-194">At least one executable program in hello application should be actively running hello syphon.</span></span> <span data-ttu-id="a7c02-195">Olá sifão realiza uma longa recepção de sondagem durante 15 minutos.</span><span class="sxs-lookup"><span data-stu-id="a7c02-195">hello syphon performs a long poll receive that lasts 15 minutes.</span></span> <span data-ttu-id="a7c02-196">Quando todas as entidades estão disponíveis e você tem 10 filas de lista de pendências, Olá aplicativo que hospeda a chamadas de sifão Olá Olá receber operação 40 vezes por hora, 960 vezes por dia e 28.800 vezes em 30 dias.</span><span class="sxs-lookup"><span data-stu-id="a7c02-196">When all entities are available and you have 10 backlog queues, hello application that hosts hello syphon calls hello receive operation 40 times per hour, 960 times per day, and 28800 times in 30 days.</span></span> <span data-ttu-id="a7c02-197">Quando o sifão Olá move mensagens ativamente da fila primária do hello pendências toohello, cada mensagem passa por Olá encargos (encargos padrão para o tamanho da mensagem e largura de banda se aplica em todos os estágios) a seguir:</span><span class="sxs-lookup"><span data-stu-id="a7c02-197">When hello syphon is actively moving messages from hello backlog toohello primary queue, each message experiences hello following charges (standard charges for message size and bandwidth apply in all stages):</span></span>

1. <span data-ttu-id="a7c02-198">Envie a lista de pendências de toohello.</span><span class="sxs-lookup"><span data-stu-id="a7c02-198">Send toohello backlog.</span></span>
2. <span data-ttu-id="a7c02-199">Receba da lista de pendências de saudação.</span><span class="sxs-lookup"><span data-stu-id="a7c02-199">Receive from hello backlog.</span></span>
3. <span data-ttu-id="a7c02-200">Envie toohello primário.</span><span class="sxs-lookup"><span data-stu-id="a7c02-200">Send toohello primary.</span></span>
4. <span data-ttu-id="a7c02-201">Receba Olá primário.</span><span class="sxs-lookup"><span data-stu-id="a7c02-201">Receive from hello primary.</span></span>

## <a name="closefault-behavior"></a><span data-ttu-id="a7c02-202">Comportamento de fechamento/falha</span><span class="sxs-lookup"><span data-stu-id="a7c02-202">Close/fault behavior</span></span>
<span data-ttu-id="a7c02-203">Dentro de um aplicativo que hospeda o sifão hello, uma vez Olá primário ou secundário [MessagingFactory] [ MessagingFactory] falha ou é fechada sem seu parceiro também sendo falha/fechamento e hello sifão detecta esse estado , sifão Olá atua.</span><span class="sxs-lookup"><span data-stu-id="a7c02-203">Within an application that hosts hello syphon, once hello primary or secondary [MessagingFactory][MessagingFactory] faults or is closed without its partner also being faulted/closed and hello syphon detects this state, hello syphon acts.</span></span> <span data-ttu-id="a7c02-204">Se Olá outros [MessagingFactory] [ MessagingFactory] não for fechada dentro de 5 segundos, Olá sifão falha Olá ainda aberta [MessagingFactory] [ MessagingFactory] .</span><span class="sxs-lookup"><span data-stu-id="a7c02-204">If hello other [MessagingFactory][MessagingFactory] is not closed within 5 seconds, hello syphon will fault hello still open [MessagingFactory][MessagingFactory].</span></span>

## <a name="next-steps"></a><span data-ttu-id="a7c02-205">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="a7c02-205">Next steps</span></span>
<span data-ttu-id="a7c02-206">Consulte [Padrões de sistema de mensagens assíncronas e alta disponibilidade][Asynchronous messaging patterns and high availability] para obter uma discussão detalhada da mensagem assíncrona do Barramento de Serviço.</span><span class="sxs-lookup"><span data-stu-id="a7c02-206">See [Asynchronous messaging patterns and high availability][Asynchronous messaging patterns and high availability] for a detailed discussion of Service Bus asynchronous messaging.</span></span> 

[PairNamespaceAsync]: /dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_PairNamespaceAsync_Microsoft_ServiceBus_Messaging_PairedNamespaceOptions_
[SendAvailabilityPairedNamespaceOptions]: /dotnet/api/microsoft.servicebus.messaging.sendavailabilitypairednamespaceoptions
[MessageSender]: /dotnet/api/microsoft.servicebus.messaging.messagesender
[MessagingFactory]: /dotnet/api/microsoft.servicebus.messaging.messagingfactory
[FailoverInterval]: /dotnet/api/microsoft.servicebus.messaging.pairednamespaceoptions#Microsoft_ServiceBus_Messaging_PairedNamespaceOptions_FailoverInterval
[MessagingException]: /dotnet/api/microsoft.servicebus.messaging.messagingexception
[TimeoutException]: https://msdn.microsoft.com/library/azure/system.timeoutexception.aspx
[BrokeredMessage]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage
[QueueDescription]: /dotnet/api/microsoft.servicebus.messaging.queuedescription
[TimeSpan]: https://msdn.microsoft.com/library/azure/system.timespan.aspx
[PingPrimaryInterval]: /dotnet/api/microsoft.servicebus.messaging.sendavailabilitypairednamespaceoptions#Microsoft_ServiceBus_Messaging_SendAvailabilityPairedNamespaceOptions_PingPrimaryInterval
[QueueClient]: /dotnet/api/microsoft.servicebus.messaging.queueclient
[TopicClient]: /dotnet/api/microsoft.servicebus.messaging.topicclient
[ContentType]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_ContentType
[TimeToLive]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_TimeToLive
[Asynchronous messaging patterns and high availability]: service-bus-async-messaging.md
[0]: ./media/service-bus-paired-namespaces/IC673405.png
[1]: ./media/service-bus-paired-namespaces/IC673406.png
[2]: ./media/service-bus-paired-namespaces/IC673407.png
