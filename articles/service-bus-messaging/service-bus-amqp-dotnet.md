---
title: "Barramento de Serviço com o .NET e AMQP 1.0 | Microsoft Docs"
description: "Usando o Barramento de Serviço do Azure no .NET com AMQP"
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 332bcb13-e287-4715-99ee-3d7d97396487
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 04/19/2017
ms.author: sethm
ms.openlocfilehash: e089a7d772b51194d8300beb99797bf40a8611b1
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/11/2017
---
# <a name="using-service-bus-from-net-with-amqp-10"></a><span data-ttu-id="6697f-103">Usando o Barramento de Serviço do .NET com AMQP 1.0</span><span class="sxs-lookup"><span data-stu-id="6697f-103">Using Service Bus from .NET with AMQP 1.0</span></span>

## <a name="downloading-the-service-bus-sdk"></a><span data-ttu-id="6697f-104">Baixar o SDK do Barramento de Serviço</span><span class="sxs-lookup"><span data-stu-id="6697f-104">Downloading the Service Bus SDK</span></span>

<span data-ttu-id="6697f-105">O suporte para o AMQP 1.0 está disponível na versão 2.1 ou posterior do SDK do Barramento de Serviço.</span><span class="sxs-lookup"><span data-stu-id="6697f-105">AMQP 1.0 support is available in the Service Bus SDK version 2.1 or later.</span></span> <span data-ttu-id="6697f-106">Você pode garantir que tem a versão mais recente baixando os bits do Barramento de Serviço do [NuGet][NuGet].</span><span class="sxs-lookup"><span data-stu-id="6697f-106">You can ensure you have the latest version by downloading the Service Bus bits from [NuGet][NuGet].</span></span>

## <a name="configuring-net-applications-to-use-amqp-10"></a><span data-ttu-id="6697f-107">Configurando aplicativos .NET para usar o AMQP 1.0</span><span class="sxs-lookup"><span data-stu-id="6697f-107">Configuring .NET applications to use AMQP 1.0</span></span>

<span data-ttu-id="6697f-108">Por padrão, a biblioteca de cliente do .NET do Barramento de Serviço se comunica com o serviço do Barramento de Serviço usando um protocolo dedicado baseado em SOAP.</span><span class="sxs-lookup"><span data-stu-id="6697f-108">By default, the Service Bus .NET client library communicates with the Service Bus service using a dedicated SOAP-based protocol.</span></span> <span data-ttu-id="6697f-109">O uso do AMQP 1.0 em vez do protocolo padrão requer a configuração explícita na cadeia de conexão do Service Bus, conforme descrito na próxima seção.</span><span class="sxs-lookup"><span data-stu-id="6697f-109">To use AMQP 1.0 instead of the default protocol requires explicit configuration on the Service Bus connection string, as described in the next section.</span></span> <span data-ttu-id="6697f-110">Além dessa alteração, o código do aplicativo permanece inalterado ao usar o AMQP 1.0.</span><span class="sxs-lookup"><span data-stu-id="6697f-110">Other than this change, application code remains unchanged when using AMQP 1.0.</span></span>

<span data-ttu-id="6697f-111">Na versão atual, existem alguns outros recursos da API que não são suportados com o uso do AMQP.</span><span class="sxs-lookup"><span data-stu-id="6697f-111">In the current release, there are a few API features that are not supported when using AMQP.</span></span> <span data-ttu-id="6697f-112">Esses recursos sem suporte são listados posteriormente na seção [Recursos sem suporte, restrições e diferenças de comportamento](#unsupported-features-restrictions-and-behavioral-differences).</span><span class="sxs-lookup"><span data-stu-id="6697f-112">These unsupported features are listed later in the section [Unsupported features, restrictions, and behavioral differences](#unsupported-features-restrictions-and-behavioral-differences).</span></span> <span data-ttu-id="6697f-113">Algumas das definições de configuração avançadas também apresentam um significado diferente com o uso do AMQP.</span><span class="sxs-lookup"><span data-stu-id="6697f-113">Some of the advanced configuration settings also have a different meaning when using AMQP.</span></span>

### <a name="configuration-using-appconfig"></a><span data-ttu-id="6697f-114">Configuração usando App.config</span><span class="sxs-lookup"><span data-stu-id="6697f-114">Configuration using App.config</span></span>

<span data-ttu-id="6697f-115">É uma boa prática que os aplicativos usem o arquivo de configuração do App.config para armazenar as configurações.</span><span class="sxs-lookup"><span data-stu-id="6697f-115">It is good practice for applications to use the App.config configuration file to store settings.</span></span> <span data-ttu-id="6697f-116">Para aplicativos do Barramento de Serviço, você pode usar o App.config para armazenar a cadeia de conexão do Barramento de Serviço.</span><span class="sxs-lookup"><span data-stu-id="6697f-116">For Service Bus applications, you can use App.config to store the Service Bus connection string.</span></span> <span data-ttu-id="6697f-117">Um exemplo do arquivo App.config é mostrado abaixo:</span><span class="sxs-lookup"><span data-stu-id="6697f-117">An example App.config file is as follows:</span></span>

```xml
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <appSettings>
        <add key="Microsoft.ServiceBus.ConnectionString"
             value="Endpoint=sb://[namespace].servicebus.windows.net/;SharedAccessKeyName=RootManageSharedAccessKey;SharedAccessKey=[SAS key];TransportType=Amqp" />
    </appSettings>
</configuration>
```

<span data-ttu-id="6697f-118">O valor da configuração `Microsoft.ServiceBus.ConnectionString` é a cadeia de conexão do Barramento de Serviço usada para configurar a conexão ao Barramento de Serviço.</span><span class="sxs-lookup"><span data-stu-id="6697f-118">The value of the `Microsoft.ServiceBus.ConnectionString` setting is the Service Bus connection string that is used to configure the connection to Service Bus.</span></span> <span data-ttu-id="6697f-119">O formato é o seguinte:</span><span class="sxs-lookup"><span data-stu-id="6697f-119">The format is as follows:</span></span>

`Endpoint=sb://[namespace].servicebus.windows.net/;SharedAccessKeyName=RootManageSharedAccessKey;SharedAccessKey=[SAS key];TransportType=Amqp`

<span data-ttu-id="6697f-120">Onde `[namespace]` e `SharedAccessKey` são obtidos a partir de [Portal do Azure][Azure portal] quando você cria um namespace do Barramento de Serviço.</span><span class="sxs-lookup"><span data-stu-id="6697f-120">Where `[namespace]` and `SharedAccessKey` are obtained from the [Azure portal][Azure portal] when you create a Service Bus namespace.</span></span> <span data-ttu-id="6697f-121">Para saber mais, veja [Como criar um namespace do Barramento de Serviço usando o Portal do Azure][Create a Service Bus namespace using the Azure portal].</span><span class="sxs-lookup"><span data-stu-id="6697f-121">For more information, see [Create a Service Bus namespace using the Azure portal][Create a Service Bus namespace using the Azure portal].</span></span>

<span data-ttu-id="6697f-122">Ao usar AMQP, anexe a cadeia de conexão com `;TransportType=Amqp`.</span><span class="sxs-lookup"><span data-stu-id="6697f-122">When using AMQP, append the connection string with `;TransportType=Amqp`.</span></span> <span data-ttu-id="6697f-123">Essa notação orienta a biblioteca de cliente a fazer sua conexão com o Barramento de Serviço usando o AMQP 1.0.</span><span class="sxs-lookup"><span data-stu-id="6697f-123">This notation instructs the client library to make its connection to Service Bus using AMQP 1.0.</span></span>

## <a name="message-serialization"></a><span data-ttu-id="6697f-124">Serialização de mensagem</span><span class="sxs-lookup"><span data-stu-id="6697f-124">Message serialization</span></span>

<span data-ttu-id="6697f-125">Ao usar o protocolo padrão, o comportamento de serialização padrão da biblioteca de cliente .NET é usar o tipo [DataContractSerializer][DataContractSerializer] para serializar uma instância [BrokeredMessage][BrokeredMessage] para transporte entre a biblioteca de cliente e o serviço de Barramento de Serviço.</span><span class="sxs-lookup"><span data-stu-id="6697f-125">When using the default protocol, the default serialization behavior of the .NET client library is to use the [DataContractSerializer][DataContractSerializer] type to serialize a [BrokeredMessage][BrokeredMessage] instance for transport between the client library and the Service Bus service.</span></span> <span data-ttu-id="6697f-126">Ao usar o modo de transporte do AMQP, a biblioteca de cliente usa o sistema do tipo AMQP para a serialização da [mensagem agenciada][BrokeredMessage] em uma mensagem do AMQP.</span><span class="sxs-lookup"><span data-stu-id="6697f-126">When using the AMQP transport mode, the client library uses the AMQP type system for serialization of the [brokered message][BrokeredMessage] into an AMQP message.</span></span> <span data-ttu-id="6697f-127">Essa serialização permite que a mensagem seja recebida e interpretada por um aplicativo receptor que está potencialmente em execução em uma plataforma diferente, por exemplo, um aplicativo Java que usa a API JMS para acessar o Barramento de Serviço.</span><span class="sxs-lookup"><span data-stu-id="6697f-127">This serialization enables the message to be received and interpreted by a receiving application that is potentially running on a different platform, for example, a Java application that uses the JMS API to access Service Bus.</span></span>

<span data-ttu-id="6697f-128">Ao construir uma instância [BrokeredMessage][BrokeredMessage], você pode fornecer um objeto .NET como um parâmetro para o construtor para servir como o corpo da mensagem.</span><span class="sxs-lookup"><span data-stu-id="6697f-128">When you construct a [BrokeredMessage][BrokeredMessage] instance, you can provide a .NET object as a parameter to the constructor to serve as the body of the message.</span></span> <span data-ttu-id="6697f-129">Para objetos que podem ser mapeados para tipos primitivos do AMQP, o corpo é serializado em tipos de dados do AMQP.</span><span class="sxs-lookup"><span data-stu-id="6697f-129">For objects that can be mapped to AMQP primitive types, the body is serialized into AMQP data types.</span></span> <span data-ttu-id="6697f-130">Se o objeto não puder ser mapeado diretamente para um tipo primitivo do AMQP, ou seja, um tipo personalizado definido pelo aplicativo, o objeto será serializado usando o [DataContractSerializer][DataContractSerializer], e os bytes serializados serão enviados em uma mensagem de dados AMQP.</span><span class="sxs-lookup"><span data-stu-id="6697f-130">If the object cannot be directly mapped into an AMQP primitive type; that is, a custom type defined by the application, then the object is serialized using the [DataContractSerializer][DataContractSerializer], and the serialized bytes are sent in an AMQP data message.</span></span>

<span data-ttu-id="6697f-131">Para facilitar a interoperabilidade com clientes não .NET, use somente tipos .NET que podem ser serializados diretamente em tipos do AMQP para o corpo da mensagem.</span><span class="sxs-lookup"><span data-stu-id="6697f-131">To facilitate interoperability with non-.NET clients, use only .NET types that can be serialized directly into AMQP types for the body of the message.</span></span> <span data-ttu-id="6697f-132">A tabela a seguir detalha os tipos e o mapeamento correspondente ao sistema de tipos do AMQP.</span><span class="sxs-lookup"><span data-stu-id="6697f-132">The following table details those types and the corresponding mapping to the AMQP type system.</span></span>

| <span data-ttu-id="6697f-133">Tipo de objeto de corpo .NET</span><span class="sxs-lookup"><span data-stu-id="6697f-133">.NET Body Object Type</span></span> | <span data-ttu-id="6697f-134">Tipo do AMQP mapeado</span><span class="sxs-lookup"><span data-stu-id="6697f-134">Mapped AMQP Type</span></span> | <span data-ttu-id="6697f-135">Tipo de seção de corpo do AMQP</span><span class="sxs-lookup"><span data-stu-id="6697f-135">AMQP Body Section Type</span></span> |
| --- | --- | --- |
| <span data-ttu-id="6697f-136">bool</span><span class="sxs-lookup"><span data-stu-id="6697f-136">bool</span></span> |<span data-ttu-id="6697f-137">Booliano</span><span class="sxs-lookup"><span data-stu-id="6697f-137">boolean</span></span> |<span data-ttu-id="6697f-138">Valor do AMQP</span><span class="sxs-lookup"><span data-stu-id="6697f-138">AMQP Value</span></span> |
| <span data-ttu-id="6697f-139">byte</span><span class="sxs-lookup"><span data-stu-id="6697f-139">byte</span></span> |<span data-ttu-id="6697f-140">ubyte</span><span class="sxs-lookup"><span data-stu-id="6697f-140">ubyte</span></span> |<span data-ttu-id="6697f-141">Valor do AMQP</span><span class="sxs-lookup"><span data-stu-id="6697f-141">AMQP Value</span></span> |
| <span data-ttu-id="6697f-142">ushort</span><span class="sxs-lookup"><span data-stu-id="6697f-142">ushort</span></span> |<span data-ttu-id="6697f-143">ushort</span><span class="sxs-lookup"><span data-stu-id="6697f-143">ushort</span></span> |<span data-ttu-id="6697f-144">Valor do AMQP</span><span class="sxs-lookup"><span data-stu-id="6697f-144">AMQP Value</span></span> |
| <span data-ttu-id="6697f-145">uint</span><span class="sxs-lookup"><span data-stu-id="6697f-145">uint</span></span> |<span data-ttu-id="6697f-146">uint</span><span class="sxs-lookup"><span data-stu-id="6697f-146">uint</span></span> |<span data-ttu-id="6697f-147">Valor do AMQP</span><span class="sxs-lookup"><span data-stu-id="6697f-147">AMQP Value</span></span> |
| <span data-ttu-id="6697f-148">ulong</span><span class="sxs-lookup"><span data-stu-id="6697f-148">ulong</span></span> |<span data-ttu-id="6697f-149">ulong</span><span class="sxs-lookup"><span data-stu-id="6697f-149">ulong</span></span> |<span data-ttu-id="6697f-150">Valor do AMQP</span><span class="sxs-lookup"><span data-stu-id="6697f-150">AMQP Value</span></span> |
| <span data-ttu-id="6697f-151">sbyte</span><span class="sxs-lookup"><span data-stu-id="6697f-151">sbyte</span></span> |<span data-ttu-id="6697f-152">byte</span><span class="sxs-lookup"><span data-stu-id="6697f-152">byte</span></span> |<span data-ttu-id="6697f-153">Valor do AMQP</span><span class="sxs-lookup"><span data-stu-id="6697f-153">AMQP Value</span></span> |
| <span data-ttu-id="6697f-154">short</span><span class="sxs-lookup"><span data-stu-id="6697f-154">short</span></span> |<span data-ttu-id="6697f-155">short</span><span class="sxs-lookup"><span data-stu-id="6697f-155">short</span></span> |<span data-ttu-id="6697f-156">Valor do AMQP</span><span class="sxs-lookup"><span data-stu-id="6697f-156">AMQP Value</span></span> |
| <span data-ttu-id="6697f-157">int</span><span class="sxs-lookup"><span data-stu-id="6697f-157">int</span></span> |<span data-ttu-id="6697f-158">int</span><span class="sxs-lookup"><span data-stu-id="6697f-158">int</span></span> |<span data-ttu-id="6697f-159">Valor do AMQP</span><span class="sxs-lookup"><span data-stu-id="6697f-159">AMQP Value</span></span> |
| <span data-ttu-id="6697f-160">longo</span><span class="sxs-lookup"><span data-stu-id="6697f-160">long</span></span> |<span data-ttu-id="6697f-161">longo</span><span class="sxs-lookup"><span data-stu-id="6697f-161">long</span></span> |<span data-ttu-id="6697f-162">Valor do AMQP</span><span class="sxs-lookup"><span data-stu-id="6697f-162">AMQP Value</span></span> |
| <span data-ttu-id="6697f-163">flutuante</span><span class="sxs-lookup"><span data-stu-id="6697f-163">float</span></span> |<span data-ttu-id="6697f-164">flutuante</span><span class="sxs-lookup"><span data-stu-id="6697f-164">float</span></span> |<span data-ttu-id="6697f-165">Valor do AMQP</span><span class="sxs-lookup"><span data-stu-id="6697f-165">AMQP Value</span></span> |
| <span data-ttu-id="6697f-166">double</span><span class="sxs-lookup"><span data-stu-id="6697f-166">double</span></span> |<span data-ttu-id="6697f-167">double</span><span class="sxs-lookup"><span data-stu-id="6697f-167">double</span></span> |<span data-ttu-id="6697f-168">Valor do AMQP</span><span class="sxs-lookup"><span data-stu-id="6697f-168">AMQP Value</span></span> |
| <span data-ttu-id="6697f-169">decimal</span><span class="sxs-lookup"><span data-stu-id="6697f-169">decimal</span></span> |<span data-ttu-id="6697f-170">decimal128</span><span class="sxs-lookup"><span data-stu-id="6697f-170">decimal128</span></span> |<span data-ttu-id="6697f-171">Valor do AMQP</span><span class="sxs-lookup"><span data-stu-id="6697f-171">AMQP Value</span></span> |
| <span data-ttu-id="6697f-172">char</span><span class="sxs-lookup"><span data-stu-id="6697f-172">char</span></span> |<span data-ttu-id="6697f-173">char</span><span class="sxs-lookup"><span data-stu-id="6697f-173">char</span></span> |<span data-ttu-id="6697f-174">Valor do AMQP</span><span class="sxs-lookup"><span data-stu-id="6697f-174">AMQP Value</span></span> |
| <span data-ttu-id="6697f-175">DateTime</span><span class="sxs-lookup"><span data-stu-id="6697f-175">DateTime</span></span> |<span data-ttu-id="6697f-176">timestamp</span><span class="sxs-lookup"><span data-stu-id="6697f-176">timestamp</span></span> |<span data-ttu-id="6697f-177">Valor do AMQP</span><span class="sxs-lookup"><span data-stu-id="6697f-177">AMQP Value</span></span> |
| <span data-ttu-id="6697f-178">Guid</span><span class="sxs-lookup"><span data-stu-id="6697f-178">Guid</span></span> |<span data-ttu-id="6697f-179">uuid</span><span class="sxs-lookup"><span data-stu-id="6697f-179">uuid</span></span> |<span data-ttu-id="6697f-180">Valor do AMQP</span><span class="sxs-lookup"><span data-stu-id="6697f-180">AMQP Value</span></span> |
| <span data-ttu-id="6697f-181">byte[]</span><span class="sxs-lookup"><span data-stu-id="6697f-181">byte[]</span></span> |<span data-ttu-id="6697f-182">binário</span><span class="sxs-lookup"><span data-stu-id="6697f-182">binary</span></span> |<span data-ttu-id="6697f-183">Valor do AMQP</span><span class="sxs-lookup"><span data-stu-id="6697f-183">AMQP Value</span></span> |
| <span data-ttu-id="6697f-184">string</span><span class="sxs-lookup"><span data-stu-id="6697f-184">string</span></span> |<span data-ttu-id="6697f-185">string</span><span class="sxs-lookup"><span data-stu-id="6697f-185">string</span></span> |<span data-ttu-id="6697f-186">Valor do AMQP</span><span class="sxs-lookup"><span data-stu-id="6697f-186">AMQP Value</span></span> |
| <span data-ttu-id="6697f-187">System.Collections.IList</span><span class="sxs-lookup"><span data-stu-id="6697f-187">System.Collections.IList</span></span> |<span data-ttu-id="6697f-188">list</span><span class="sxs-lookup"><span data-stu-id="6697f-188">list</span></span> |<span data-ttu-id="6697f-189">Valor AMQP: os itens contidos na coleção só podem ser aqueles definidos nesta tabela.</span><span class="sxs-lookup"><span data-stu-id="6697f-189">AMQP Value: items contained in the collection can only be those that are defined in this table.</span></span> |
| <span data-ttu-id="6697f-190">System.Array</span><span class="sxs-lookup"><span data-stu-id="6697f-190">System.Array</span></span> |<span data-ttu-id="6697f-191">array</span><span class="sxs-lookup"><span data-stu-id="6697f-191">array</span></span> |<span data-ttu-id="6697f-192">Valor AMQP: os itens contidos na coleção só podem ser aqueles definidos nesta tabela.</span><span class="sxs-lookup"><span data-stu-id="6697f-192">AMQP Value: items contained in the collection can only be those that are defined in this table.</span></span> |
| <span data-ttu-id="6697f-193">System.Collections.IDictionary</span><span class="sxs-lookup"><span data-stu-id="6697f-193">System.Collections.IDictionary</span></span> |<span data-ttu-id="6697f-194">map</span><span class="sxs-lookup"><span data-stu-id="6697f-194">map</span></span> |<span data-ttu-id="6697f-195">Valor AMQP: os itens contidos na coleção só podem ser aqueles definidos nesta tabela. Observação: apenas as chaves de cadeia de caracteres são suportadas.</span><span class="sxs-lookup"><span data-stu-id="6697f-195">AMQP Value: items contained in the collection can only be those that are defined in this table.Note: only String keys are supported.</span></span> |
| <span data-ttu-id="6697f-196">Uri</span><span class="sxs-lookup"><span data-stu-id="6697f-196">Uri</span></span> |<span data-ttu-id="6697f-197">Cadeia de caracteres descrita (consulte a tabela a seguir)</span><span class="sxs-lookup"><span data-stu-id="6697f-197">Described string(see the following table)</span></span> |<span data-ttu-id="6697f-198">Valor do AMQP</span><span class="sxs-lookup"><span data-stu-id="6697f-198">AMQP Value</span></span> |
| <span data-ttu-id="6697f-199">DateTimeOffset</span><span class="sxs-lookup"><span data-stu-id="6697f-199">DateTimeOffset</span></span> |<span data-ttu-id="6697f-200">Longo descrito (consulte a tabela a seguir)</span><span class="sxs-lookup"><span data-stu-id="6697f-200">Described long(see the following table)</span></span> |<span data-ttu-id="6697f-201">Valor do AMQP</span><span class="sxs-lookup"><span data-stu-id="6697f-201">AMQP Value</span></span> |
| <span data-ttu-id="6697f-202">TimeSpan</span><span class="sxs-lookup"><span data-stu-id="6697f-202">TimeSpan</span></span> |<span data-ttu-id="6697f-203">Longo descrito (consulte a seguir)</span><span class="sxs-lookup"><span data-stu-id="6697f-203">Described long(see the following)</span></span> |<span data-ttu-id="6697f-204">Valor do AMQP</span><span class="sxs-lookup"><span data-stu-id="6697f-204">AMQP Value</span></span> |
| <span data-ttu-id="6697f-205">Fluxo</span><span class="sxs-lookup"><span data-stu-id="6697f-205">Stream</span></span> |<span data-ttu-id="6697f-206">binário</span><span class="sxs-lookup"><span data-stu-id="6697f-206">binary</span></span> |<span data-ttu-id="6697f-207">Dados do AMQP (podem ser múltiplos).</span><span class="sxs-lookup"><span data-stu-id="6697f-207">AMQP Data (may be multiple).</span></span> <span data-ttu-id="6697f-208">As seções de Dados contêm os bytes brutos lidos do objeto Stream.</span><span class="sxs-lookup"><span data-stu-id="6697f-208">The Data sections contain the raw bytes read from the Stream object.</span></span> |
| <span data-ttu-id="6697f-209">Outro Objeto</span><span class="sxs-lookup"><span data-stu-id="6697f-209">Other Object</span></span> |<span data-ttu-id="6697f-210">binário</span><span class="sxs-lookup"><span data-stu-id="6697f-210">binary</span></span> |<span data-ttu-id="6697f-211">Dados do AMQP (podem ser múltiplos).</span><span class="sxs-lookup"><span data-stu-id="6697f-211">AMQP Data (may be multiple).</span></span> <span data-ttu-id="6697f-212">Contém o binário serializado do objeto que usa o DataContractSerializer ou um serializador fornecido pelo aplicativo.</span><span class="sxs-lookup"><span data-stu-id="6697f-212">Contains the serialized binary of the object that uses the DataContractSerializer or a serializer supplied by the application.</span></span> |

| <span data-ttu-id="6697f-213">Tipo .NET</span><span class="sxs-lookup"><span data-stu-id="6697f-213">.NET Type</span></span> | <span data-ttu-id="6697f-214">Tipo descrito do AMQP mapeado</span><span class="sxs-lookup"><span data-stu-id="6697f-214">Mapped AMQP Described Type</span></span> | <span data-ttu-id="6697f-215">Observações</span><span class="sxs-lookup"><span data-stu-id="6697f-215">Notes</span></span> |
| --- | --- | --- |
| <span data-ttu-id="6697f-216">Uri</span><span class="sxs-lookup"><span data-stu-id="6697f-216">Uri</span></span> |`<type name=”uri” class=restricted source=”string”> <descriptor name=”com.microsoft:uri” /></type>` |<span data-ttu-id="6697f-217">URI.AbsoluteUri</span><span class="sxs-lookup"><span data-stu-id="6697f-217">Uri.AbsoluteUri</span></span> |
| <span data-ttu-id="6697f-218">Datetimeoffset</span><span class="sxs-lookup"><span data-stu-id="6697f-218">DateTimeOffset</span></span> |`<type name=”datetime-offset” class=restricted source=”long”> <descriptor name=”com.microsoft:datetime-offset” /></type>` |<span data-ttu-id="6697f-219">DateTimeOffset.UtcTicks</span><span class="sxs-lookup"><span data-stu-id="6697f-219">DateTimeOffset.UtcTicks</span></span> |
| <span data-ttu-id="6697f-220">TimeSpan</span><span class="sxs-lookup"><span data-stu-id="6697f-220">TimeSpan</span></span> |`<type name=”timespan” class=restricted source=”long”> <descriptor name=”com.microsoft:timespan” /></type> ` |<span data-ttu-id="6697f-221">TimeSpan.Ticks</span><span class="sxs-lookup"><span data-stu-id="6697f-221">TimeSpan.Ticks</span></span> |

## <a name="unsupported-features-restrictions-and-behavioral-differences"></a><span data-ttu-id="6697f-222">Recursos sem suporte, restrições e diferenças de comportamento</span><span class="sxs-lookup"><span data-stu-id="6697f-222">Unsupported features, restrictions, and behavioral differences</span></span>

<span data-ttu-id="6697f-223">Os seguintes recursos da API .NET do Barramento de Serviço não são atualmente suportados com o uso do AMQP:</span><span class="sxs-lookup"><span data-stu-id="6697f-223">The following features of the Service Bus .NET API are not currently supported when using AMQP:</span></span>

* <span data-ttu-id="6697f-224">Transações</span><span class="sxs-lookup"><span data-stu-id="6697f-224">Transactions</span></span>
* <span data-ttu-id="6697f-225">Enviar por meio de destino da transferência</span><span class="sxs-lookup"><span data-stu-id="6697f-225">Send via transfer destination</span></span>

<span data-ttu-id="6697f-226">Também há algumas pequenas diferenças no comportamento da API .NET do Barramento de Serviço ao usar AMQP, em comparação com o protocolo padrão:</span><span class="sxs-lookup"><span data-stu-id="6697f-226">There are also some small differences in the behavior of the Service Bus .NET API when using AMQP, compared to the default protocol:</span></span>

* <span data-ttu-id="6697f-227">A propriedade [OperationTimeout][OperationTimeout] será ignorada.</span><span class="sxs-lookup"><span data-stu-id="6697f-227">The [OperationTimeout][OperationTimeout] property is ignored.</span></span>
* <span data-ttu-id="6697f-228">`MessageReceiver.Receive(TimeSpan.Zero)` é implementado como `MessageReceiver.Receive(TimeSpan.FromSeconds(10))`.</span><span class="sxs-lookup"><span data-stu-id="6697f-228">`MessageReceiver.Receive(TimeSpan.Zero)` is implemented as `MessageReceiver.Receive(TimeSpan.FromSeconds(10))`.</span></span>
* <span data-ttu-id="6697f-229">Só é possível concluir mensagens com tokens de bloqueio pelos destinatários de mensagem que inicialmente receberam as mensagens.</span><span class="sxs-lookup"><span data-stu-id="6697f-229">Completing messages by lock tokens can only be done by the message receivers that initially received the messages.</span></span>

## <a name="controlling-amqp-protocol-settings"></a><span data-ttu-id="6697f-230">Controlando configurações do protocolo AMQP</span><span class="sxs-lookup"><span data-stu-id="6697f-230">Controlling AMQP protocol settings</span></span>

<span data-ttu-id="6697f-231">As [APIs .NET](/dotnet/api/) expõem diversas configurações que controlam o comportamento do protocolo AMQP:</span><span class="sxs-lookup"><span data-stu-id="6697f-231">The [.NET APIs](/dotnet/api/) expose several settings to control the behavior of the AMQP protocol:</span></span>

* <span data-ttu-id="6697f-232">**[MessageReceiver.PrefetchCount](/dotnet/api/microsoft.servicebus.messaging.messagereceiver.prefetchcount?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_MessageReceiver_PrefetchCount)**: controla o crédito inicial aplicado a um link.</span><span class="sxs-lookup"><span data-stu-id="6697f-232">**[MessageReceiver.PrefetchCount](/dotnet/api/microsoft.servicebus.messaging.messagereceiver.prefetchcount?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_MessageReceiver_PrefetchCount)**: Controls the initial credit applied to a link.</span></span> <span data-ttu-id="6697f-233">O padrão é 0.</span><span class="sxs-lookup"><span data-stu-id="6697f-233">The default is 0.</span></span>
* <span data-ttu-id="6697f-234">**[MessagingFactorySettings.AmqpTransportSettings.MaxFrameSize](/dotnet/api/microsoft.servicebus.messaging.amqp.amqptransportsettings.maxframesize?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_Amqp_AmqpTransportSettings_MaxFrameSize)**: controla o tamanho máximo do quadro do AMQP oferecido durante a negociação em tempo de conexão aberta.</span><span class="sxs-lookup"><span data-stu-id="6697f-234">**[MessagingFactorySettings.AmqpTransportSettings.MaxFrameSize](/dotnet/api/microsoft.servicebus.messaging.amqp.amqptransportsettings.maxframesize?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_Amqp_AmqpTransportSettings_MaxFrameSize)**: Controls the maximum AMQP frame size offered during the negotiation at connection open time.</span></span> <span data-ttu-id="6697f-235">O padrão é de 65.536 bytes.</span><span class="sxs-lookup"><span data-stu-id="6697f-235">The default is 65,536 bytes.</span></span>
* <span data-ttu-id="6697f-236">**[MessagingFactorySettings.AmqpTransportSettings.BatchFlushInterval](/dotnet/api/microsoft.servicebus.messaging.amqp.amqptransportsettings.batchflushinterval?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_Amqp_AmqpTransportSettings_BatchFlushInterval)**: caso as transferências possam ser em lote, esse valor determina o atraso máximo para envio de disposições.</span><span class="sxs-lookup"><span data-stu-id="6697f-236">**[MessagingFactorySettings.AmqpTransportSettings.BatchFlushInterval](/dotnet/api/microsoft.servicebus.messaging.amqp.amqptransportsettings.batchflushinterval?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_Amqp_AmqpTransportSettings_BatchFlushInterval)**: If transfers are batchable, this value determines the maximum delay for sending dispositions.</span></span> <span data-ttu-id="6697f-237">Herdado pelos remetentes/destinatários por padrão.</span><span class="sxs-lookup"><span data-stu-id="6697f-237">Inherited by senders/receivers by default.</span></span> <span data-ttu-id="6697f-238">O remetente/destinatário individual pode substituir o padrão, que é 20 milissegundos.</span><span class="sxs-lookup"><span data-stu-id="6697f-238">Individual sender/receiver can override the default, which is 20 milliseconds.</span></span>
* <span data-ttu-id="6697f-239">**[MessagingFactorySettings.AmqpTransportSettings.UseSslStreamSecurity](/dotnet/api/microsoft.servicebus.messaging.amqp.amqptransportsettings.usesslstreamsecurity?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_Amqp_AmqpTransportSettings_UseSslStreamSecurity)**: controla se as conexões do AMQP são estabelecidas por uma conexão SSL.</span><span class="sxs-lookup"><span data-stu-id="6697f-239">**[MessagingFactorySettings.AmqpTransportSettings.UseSslStreamSecurity](/dotnet/api/microsoft.servicebus.messaging.amqp.amqptransportsettings.usesslstreamsecurity?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_Amqp_AmqpTransportSettings_UseSslStreamSecurity)**: Controls whether AMQP connections are established over an SSL connection.</span></span> <span data-ttu-id="6697f-240">O padrão é **true**.</span><span class="sxs-lookup"><span data-stu-id="6697f-240">The default is **true**.</span></span>

## <a name="next-steps"></a><span data-ttu-id="6697f-241">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="6697f-241">Next steps</span></span>

<span data-ttu-id="6697f-242">Está pronto(a) para saber mais?</span><span class="sxs-lookup"><span data-stu-id="6697f-242">Ready to learn more?</span></span> <span data-ttu-id="6697f-243">Visite os links a seguir:</span><span class="sxs-lookup"><span data-stu-id="6697f-243">Visit the following links:</span></span>

* <span data-ttu-id="6697f-244">[Visão geral do Barramento de Serviço para AMQP]</span><span class="sxs-lookup"><span data-stu-id="6697f-244">[Service Bus AMQP overview]</span></span>
* <span data-ttu-id="6697f-245">[Suporte a AMQP 1.0 para filas e tópicos particionados do Barramento de Serviço]</span><span class="sxs-lookup"><span data-stu-id="6697f-245">[AMQP 1.0 support for Service Bus partitioned queues and topics]</span></span>
* <span data-ttu-id="6697f-246">[AMQP no Barramento de Serviço para Windows Server]</span><span class="sxs-lookup"><span data-stu-id="6697f-246">[AMQP in Service Bus for Windows Server]</span></span>

[Create a Service Bus namespace using the Azure portal]: service-bus-create-namespace-portal.md
[DataContractSerializer]: https://msdn.microsoft.com/library/system.runtime.serialization.datacontractserializer.aspx
[BrokeredMessage]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage?view=azureservicebus-4.0.0
[Microsoft.ServiceBus.Messaging.MessagingFactory.AcceptMessageSession]: /dotnet/api/microsoft.servicebus.messaging.messagingfactory.acceptmessagesession?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_MessagingFactory_AcceptMessageSession
[OperationTimeout]: /dotnet/api/microsoft.servicebus.messaging.messagingfactorysettings.operationtimeout?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_MessagingFactorySettings_OperationTimeout
[NuGet]: http://nuget.org/packages/WindowsAzure.ServiceBus/
[Azure portal]: https://portal.azure.com
<span data-ttu-id="6697f-247">[Visão geral do Barramento de Serviço para AMQP]: service-bus-amqp-overview.md</span><span class="sxs-lookup"><span data-stu-id="6697f-247">[Service Bus AMQP overview]: service-bus-amqp-overview.md</span></span>
<span data-ttu-id="6697f-248">[Suporte a AMQP 1.0 para filas e tópicos particionados do Barramento de Serviço]: service-bus-partitioned-queues-and-topics-amqp-overview.md</span><span class="sxs-lookup"><span data-stu-id="6697f-248">[AMQP 1.0 support for Service Bus partitioned queues and topics]: service-bus-partitioned-queues-and-topics-amqp-overview.md</span></span>
<span data-ttu-id="6697f-249">[AMQP no Barramento de Serviço para Windows Server]: https://msdn.microsoft.com/library/dn574799.aspx</span><span class="sxs-lookup"><span data-stu-id="6697f-249">[AMQP in Service Bus for Windows Server]: https://msdn.microsoft.com/library/dn574799.aspx</span></span>
