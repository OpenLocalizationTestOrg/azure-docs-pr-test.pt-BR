---
title: "autenticação do barramento de serviço aaaAzure com assinaturas de acesso compartilhado | Microsoft Docs"
description: "Visão geral da Autenticação do Barramento de Serviço usando a visão geral de Assinaturas de Acesso Compartilhado, detalhes sobre a autenticação SAS com o Barramento de Serviço do Azure."
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/23/2017
ms.author: sethm
ms.openlocfilehash: 773bb11720384d7245820b56dc25b8e064ffa746
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="service-bus-authentication-with-shared-access-signatures"></a><span data-ttu-id="e1368-103">Autenticação do Barramento de Serviço com Assinaturas de Acesso Compartilhado</span><span class="sxs-lookup"><span data-stu-id="e1368-103">Service Bus authentication with Shared Access Signatures</span></span>

<span data-ttu-id="e1368-104">*Assinaturas de acesso compartilhado* (SAS) são o mecanismo de segurança principal de saudação para mensagens do barramento de serviço.</span><span class="sxs-lookup"><span data-stu-id="e1368-104">*Shared Access Signatures* (SAS) are hello primary security mechanism for Service Bus messaging.</span></span> <span data-ttu-id="e1368-105">Este artigo aborda SAS, como elas funcionam e como toouse-los de maneira independente de plataforma.</span><span class="sxs-lookup"><span data-stu-id="e1368-105">This article discusses SAS, how they work, and how toouse them in a platform-agnostic way.</span></span>

<span data-ttu-id="e1368-106">Autenticação SAS permite que aplicativos tooauthenticate tooService barramento usando uma chave de acesso configurada no namespace hello, ou em Olá entidade (fila ou tópico) de mensagens com os direitos específicos associados.</span><span class="sxs-lookup"><span data-stu-id="e1368-106">SAS authentication enables applications tooauthenticate tooService Bus using an access key configured on hello namespace, or on hello messaging entity (queue or topic) with which specific rights are associated.</span></span> <span data-ttu-id="e1368-107">Você pode usar essa chave toogenerate um token SAS que os clientes podem usar tooauthenticate tooService barramento.</span><span class="sxs-lookup"><span data-stu-id="e1368-107">You can then use this key toogenerate a SAS token that clients can in turn use tooauthenticate tooService Bus.</span></span>

<span data-ttu-id="e1368-108">Suporte para autenticação SAS está incluído no hello Azure SDK versão 2.0 e posterior.</span><span class="sxs-lookup"><span data-stu-id="e1368-108">SAS authentication support is included in hello Azure SDK version 2.0 and later.</span></span>

## <a name="overview-of-sas"></a><span data-ttu-id="e1368-109">Visão geral das SAS</span><span class="sxs-lookup"><span data-stu-id="e1368-109">Overview of SAS</span></span>

<span data-ttu-id="e1368-110">Assinaturas de acesso compartilhado são um mecanismo de autenticação com base em hashes seguros SHA-256 ou URIs.</span><span class="sxs-lookup"><span data-stu-id="e1368-110">Shared Access Signatures are an authentication mechanism based on SHA-256 secure hashes or URIs.</span></span> <span data-ttu-id="e1368-111">As SAS são um mecanismo extremamente poderoso usado por todos os serviços do Barramento de Serviço.</span><span class="sxs-lookup"><span data-stu-id="e1368-111">SAS is an extremely powerful mechanism that is used by all Service Bus services.</span></span> <span data-ttu-id="e1368-112">Na utilização real, as SAS têm dois componentes: uma *política de acesso compartilhado* e uma *Assinatura de Acesso Compartilhado* (normalmente chamada de *token*).</span><span class="sxs-lookup"><span data-stu-id="e1368-112">In actual use, SAS has two components: a *shared access policy* and a *Shared Access Signature* (often called a *token*).</span></span>

<span data-ttu-id="e1368-113">Autenticação de SAS no barramento de serviço envolve a configuração de saudação de uma chave criptográfica com direitos associados em um recurso de barramento de serviço.</span><span class="sxs-lookup"><span data-stu-id="e1368-113">SAS authentication in Service Bus involves hello configuration of a cryptographic key with associated rights on a Service Bus resource.</span></span> <span data-ttu-id="e1368-114">Os clientes declaração acesso tooService barramento recursos apresentando um token SAS.</span><span class="sxs-lookup"><span data-stu-id="e1368-114">Clients claim access tooService Bus resources by presenting a SAS token.</span></span> <span data-ttu-id="e1368-115">Este token é composto Olá URI de recurso que está sendo acessado e uma expiração assinada com hello configurado chave.</span><span class="sxs-lookup"><span data-stu-id="e1368-115">This token consists of hello resource URI being accessed, and an expiry signed with hello configured key.</span></span>

<span data-ttu-id="e1368-116">É possível configurar regras de autorização de Assinatura de Acesso Compartilhado nas [retransmissões](service-bus-fundamentals-hybrid-solutions.md#relays), [filas](service-bus-fundamentals-hybrid-solutions.md#queues) e [tópicos](service-bus-fundamentals-hybrid-solutions.md#topics) do Barramento de Serviço.</span><span class="sxs-lookup"><span data-stu-id="e1368-116">You can configure Shared Access Signature authorization rules on Service Bus [relays](service-bus-fundamentals-hybrid-solutions.md#relays), [queues](service-bus-fundamentals-hybrid-solutions.md#queues), and [topics](service-bus-fundamentals-hybrid-solutions.md#topics).</span></span>

<span data-ttu-id="e1368-117">A autenticação SAS utiliza Olá elementos a seguir:</span><span class="sxs-lookup"><span data-stu-id="e1368-117">SAS authentication uses hello following elements:</span></span>

* <span data-ttu-id="e1368-118">[Regra de autorização de Acesso Compartilhado](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule): uma chave criptográfica primária de 256 bits na representação Base64, uma chave secundária opcional e um nome de chave e os direitos associados (uma coleção de direitos *Listen*, *Send* ou *Manage*).</span><span class="sxs-lookup"><span data-stu-id="e1368-118">[Shared Access authorization rule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule): A 256-bit primary cryptographic key in Base64 representation, an optional secondary key, and a key name and associated rights (a collection of *Listen*, *Send*, or *Manage* rights).</span></span>
* <span data-ttu-id="e1368-119">[Assinatura de acesso compartilhado](/dotnet/api/microsoft.servicebus.sharedaccesssignaturetokenprovider) token: gerado usando hello HMAC-SHA256 de uma cadeia de caracteres de recurso, consistindo de saudação URI do recurso de saudação que é acessado e uma expiração, com a chave de criptografia de saudação.</span><span class="sxs-lookup"><span data-stu-id="e1368-119">[Shared Access Signature](/dotnet/api/microsoft.servicebus.sharedaccesssignaturetokenprovider) token: Generated using hello HMAC-SHA256 of a resource string, consisting of hello URI of hello resource that is accessed and an expiry, with hello cryptographic key.</span></span> <span data-ttu-id="e1368-120">assinatura de saudação e outros elementos descritos nas seções a seguir de saudação são formatados em uma saudação tooform de cadeia de caracteres token SAS.</span><span class="sxs-lookup"><span data-stu-id="e1368-120">hello signature and other elements described in hello following sections are formatted into a string tooform hello SAS token.</span></span>

## <a name="shared-access-policy"></a><span data-ttu-id="e1368-121">Política de acesso compartilhado</span><span class="sxs-lookup"><span data-stu-id="e1368-121">Shared access policy</span></span>

<span data-ttu-id="e1368-122">Um toounderstand importante sobre SAS é que ela começa com uma política.</span><span class="sxs-lookup"><span data-stu-id="e1368-122">An important thing toounderstand about SAS is that it starts with a policy.</span></span> <span data-ttu-id="e1368-123">Para cada política, você toma decisões quanto a três informações: **nome**, **escopo** e **permissões**.</span><span class="sxs-lookup"><span data-stu-id="e1368-123">For each policy, you decide on three pieces of information: **name**, **scope**, and **permissions**.</span></span> <span data-ttu-id="e1368-124">Olá **nome** é apenas; um nome exclusivo dentro do escopo.</span><span class="sxs-lookup"><span data-stu-id="e1368-124">hello **name** is just that; a unique name within that scope.</span></span> <span data-ttu-id="e1368-125">Olá escopo é muito fácil: seu Olá URI do recurso de saudação em questão.</span><span class="sxs-lookup"><span data-stu-id="e1368-125">hello scope is easy enough: it's hello URI of hello resource in question.</span></span> <span data-ttu-id="e1368-126">Para um namespace de barramento de serviço, Olá escopo é nome hello de domínio totalmente qualificado (FQDN), como `https://<yournamespace>.servicebus.windows.net/`.</span><span class="sxs-lookup"><span data-stu-id="e1368-126">For a Service Bus namespace, hello scope is hello fully qualified domain name (FQDN), such as `https://<yournamespace>.servicebus.windows.net/`.</span></span>

<span data-ttu-id="e1368-127">as permissões disponíveis para uma política de saudação são autoexplicativas amplamente:</span><span class="sxs-lookup"><span data-stu-id="e1368-127">hello available permissions for a policy are largely self-explanatory:</span></span>

* <span data-ttu-id="e1368-128">Enviar</span><span class="sxs-lookup"><span data-stu-id="e1368-128">Send</span></span>
* <span data-ttu-id="e1368-129">Escutar</span><span class="sxs-lookup"><span data-stu-id="e1368-129">Listen</span></span>
* <span data-ttu-id="e1368-130">Gerenciar</span><span class="sxs-lookup"><span data-stu-id="e1368-130">Manage</span></span>

<span data-ttu-id="e1368-131">Depois de criar a política de saudação, ela é atribuída um *chave primária* e um *chave secundária*.</span><span class="sxs-lookup"><span data-stu-id="e1368-131">After you create hello policy, it is assigned a *Primary Key* and a *Secondary Key*.</span></span> <span data-ttu-id="e1368-132">Essas chaves são criptograficamente fortes.</span><span class="sxs-lookup"><span data-stu-id="e1368-132">These are cryptographically strong keys.</span></span> <span data-ttu-id="e1368-133">Não perdê-los ou vazá-los - sempre estarão disponíveis em Olá [portal do Azure][Azure portal].</span><span class="sxs-lookup"><span data-stu-id="e1368-133">Don't lose them or leak them - they'll always be available in hello [Azure portal][Azure portal].</span></span> <span data-ttu-id="e1368-134">Você pode usar qualquer uma das chaves de saudação gerada, e pode gerá-los novamente a qualquer momento.</span><span class="sxs-lookup"><span data-stu-id="e1368-134">You can use either of hello generated keys, and you can regenerate them at any time.</span></span> <span data-ttu-id="e1368-135">No entanto, se você gerar novamente ou alterar a chave primária Olá na política de hello, quaisquer assinaturas de acesso compartilhado criado a partir dele serão invalidadas.</span><span class="sxs-lookup"><span data-stu-id="e1368-135">However, if you regenerate or change hello primary key in hello policy, any Shared Access Signatures created from it will be invalidated.</span></span>

<span data-ttu-id="e1368-136">Quando você cria um namespace de barramento de serviço, uma política é criada automaticamente para Olá todo namespace chamado **RootManageSharedAccessKey**, e essa política tem todas as permissões.</span><span class="sxs-lookup"><span data-stu-id="e1368-136">When you create a Service Bus namespace, a policy is automatically created for hello entire namespace called **RootManageSharedAccessKey**, and this policy has all permissions.</span></span> <span data-ttu-id="e1368-137">Você não faz logon como **raiz**.</span><span class="sxs-lookup"><span data-stu-id="e1368-137">You don't log on as **root**, so don't use this policy unless there's a really good reason.</span></span> <span data-ttu-id="e1368-138">Você pode criar políticas adicionais em Olá **configurar** guia Olá espaço para nome no portal de saudação.</span><span class="sxs-lookup"><span data-stu-id="e1368-138">You can create additional policies in hello **Configure** tab for hello namespace in hello portal.</span></span> <span data-ttu-id="e1368-139">É importante toonote que um nível de árvore única no barramento de serviço (namespace, fila, etc.) só pode ter até too12 políticas anexadas tooit.</span><span class="sxs-lookup"><span data-stu-id="e1368-139">It's important toonote that a single tree level in Service Bus (namespace, queue, etc.) can only have up too12 policies attached tooit.</span></span>

## <a name="configuration-for-shared-access-signature-authentication"></a><span data-ttu-id="e1368-140">Configuração da autenticação de Assinatura de Acesso Compartilhado</span><span class="sxs-lookup"><span data-stu-id="e1368-140">Configuration for Shared Access Signature authentication</span></span>
<span data-ttu-id="e1368-141">Você pode configurar Olá [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) regra em namespaces de barramento de serviço, filas ou tópicos.</span><span class="sxs-lookup"><span data-stu-id="e1368-141">You can configure hello [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) rule on Service Bus namespaces, queues, or topics.</span></span> <span data-ttu-id="e1368-142">Configurando um [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) em um barramento de serviço de assinatura não é suportada atualmente, mas você pode usar regras configuradas em um toosubscriptions de acesso toosecure namespace ou tópico.</span><span class="sxs-lookup"><span data-stu-id="e1368-142">Configuring a [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) on a Service Bus subscription is currently not supported, but you can use rules configured on a namespace or topic toosecure access toosubscriptions.</span></span> <span data-ttu-id="e1368-143">Para obter um exemplo de trabalho que ilustra este procedimento, consulte Olá [autenticação usando SAS Shared Access Signature () com assinaturas do barramento de serviço](http://code.msdn.microsoft.com/Using-Shared-Access-e605b37c) exemplo.</span><span class="sxs-lookup"><span data-stu-id="e1368-143">For a working sample that illustrates this procedure, see hello [Using Shared Access Signature (SAS) authentication with Service Bus Subscriptions](http://code.msdn.microsoft.com/Using-Shared-Access-e605b37c) sample.</span></span>

<span data-ttu-id="e1368-144">Você pode configurar até 12 dessas regras em um namespace, fila ou tópico do Barramento de Serviço.</span><span class="sxs-lookup"><span data-stu-id="e1368-144">A maximum of 12 such rules can be configured on a Service Bus namespace, queue, or topic.</span></span> <span data-ttu-id="e1368-145">As regras configuradas em um namespace de barramento de serviço aplicam tooall entidades naquele namespace.</span><span class="sxs-lookup"><span data-stu-id="e1368-145">Rules that are configured on a Service Bus namespace apply tooall entities in that namespace.</span></span>

![SAS](./media/service-bus-sas/service-bus-namespace.png)

<span data-ttu-id="e1368-147">Nesta figura, Olá *manageRuleNS*, *sendRuleNS*, e *listenRuleNS* se aplicam regras de autorização tooboth fila Q1 e tópico T1, enquanto *listenRuleQ*  e *sendRuleQ* aplicar tooqueue Q1 e *sendRuleT* aplica-se apenas tootopic T1.</span><span class="sxs-lookup"><span data-stu-id="e1368-147">In this figure, hello *manageRuleNS*, *sendRuleNS*, and *listenRuleNS* authorization rules apply tooboth queue Q1 and topic T1, while *listenRuleQ* and *sendRuleQ* apply only tooqueue Q1 and *sendRuleT* applies only tootopic T1.</span></span>

<span data-ttu-id="e1368-148">Olá parâmetros de chave de um [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) são da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="e1368-148">hello key parameters of a [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) are as follows:</span></span>

| <span data-ttu-id="e1368-149">Parâmetro</span><span class="sxs-lookup"><span data-stu-id="e1368-149">Parameter</span></span> | <span data-ttu-id="e1368-150">Descrição</span><span class="sxs-lookup"><span data-stu-id="e1368-150">Description</span></span> |
| --- | --- |
| <span data-ttu-id="e1368-151">*KeyName*</span><span class="sxs-lookup"><span data-stu-id="e1368-151">*KeyName*</span></span> |<span data-ttu-id="e1368-152">Uma cadeia de caracteres que descreve a regra de autorização de saudação.</span><span class="sxs-lookup"><span data-stu-id="e1368-152">A string that describes hello authorization rule.</span></span> |
| <span data-ttu-id="e1368-153">*PrimaryKey*</span><span class="sxs-lookup"><span data-stu-id="e1368-153">*PrimaryKey*</span></span> |<span data-ttu-id="e1368-154">Uma codificada em base64 de 256 bits chave primária para assinar e validar o token SAS hello.</span><span class="sxs-lookup"><span data-stu-id="e1368-154">A base64-encoded 256-bit primary key for signing and validating hello SAS token.</span></span> |
| <span data-ttu-id="e1368-155">*SecondaryKey*</span><span class="sxs-lookup"><span data-stu-id="e1368-155">*SecondaryKey*</span></span> |<span data-ttu-id="e1368-156">Uma codificada em base64 de 256 bits chave secundária para assinar e validar o token SAS hello.</span><span class="sxs-lookup"><span data-stu-id="e1368-156">A base64-encoded 256-bit secondary key for signing and validating hello SAS token.</span></span> |
| <span data-ttu-id="e1368-157">*AccessRights*</span><span class="sxs-lookup"><span data-stu-id="e1368-157">*AccessRights*</span></span> |<span data-ttu-id="e1368-158">Uma lista de direitos de acesso concedidos pela regra de autorização de saudação.</span><span class="sxs-lookup"><span data-stu-id="e1368-158">A list of access rights granted by hello authorization rule.</span></span> <span data-ttu-id="e1368-159">Esses direitos podem ser qualquer coleção de direitos Escutar, Enviar e Gerenciar.</span><span class="sxs-lookup"><span data-stu-id="e1368-159">These rights can be any collection of Listen, Send, and Manage rights.</span></span> |

<span data-ttu-id="e1368-160">Quando um namespace de barramento de serviço é provisionado, um [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule), com [KeyName](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_KeyName) definido muito**RootManageSharedAccessKey**, é criado por padrão.</span><span class="sxs-lookup"><span data-stu-id="e1368-160">When a Service Bus namespace is provisioned, a [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule), with [KeyName](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_KeyName) set too**RootManageSharedAccessKey**, is created by default.</span></span>

## <a name="generate-a-shared-access-signature-token"></a><span data-ttu-id="e1368-161">Gerar uma Assinatura de Acesso Compartilhado (token)</span><span class="sxs-lookup"><span data-stu-id="e1368-161">Generate a Shared Access Signature (token)</span></span>

<span data-ttu-id="e1368-162">política de saudação em si não é token de acesso de saudação do Service Bus.</span><span class="sxs-lookup"><span data-stu-id="e1368-162">hello policy itself is not hello access token for Service Bus.</span></span> <span data-ttu-id="e1368-163">É objeto de saudação do qual Olá token de acesso é gerado - usando a chave primária ou secundária de saudação.</span><span class="sxs-lookup"><span data-stu-id="e1368-163">It is hello object from which hello access token is generated - using either hello primary or secondary key.</span></span> <span data-ttu-id="e1368-164">Qualquer cliente que tenha acesso toohello assinatura chaves especificadas na regra de autorização de acesso compartilhado Olá pode gerar o token SAS de saudação.</span><span class="sxs-lookup"><span data-stu-id="e1368-164">Any client that has access toohello signing keys specified in hello shared access authorization rule can generate hello SAS token.</span></span> <span data-ttu-id="e1368-165">Olá token é gerado ao criar cuidadosamente uma cadeia de caracteres hello formato a seguir:</span><span class="sxs-lookup"><span data-stu-id="e1368-165">hello token is generated by carefully crafting a string in hello following format:</span></span>

```
SharedAccessSignature sig=<signature-string>&se=<expiry>&skn=<keyName>&sr=<URL-encoded-resourceURI>
```

<span data-ttu-id="e1368-166">Onde `signature-string` é Olá SHA-256 hash de escopo de saudação do token de saudação (**escopo** conforme descrito na seção anterior Olá) com CRLF anexado e uma hora de expiração (em segundos desde a época Olá: `00:00:00 UTC` em 1 de janeiro de 1970).</span><span class="sxs-lookup"><span data-stu-id="e1368-166">Where `signature-string` is hello SHA-256 hash of hello scope of hello token (**scope** as described in hello previous section) with a CRLF appended and an expiry time (in seconds since hello epoch: `00:00:00 UTC` on 1 January 1970).</span></span> 

> [!NOTE]
> <span data-ttu-id="e1368-167">tooavoid um tempo de expiração do token curto, é recomendável que você codifica o valor de tempo de expiração de saudação como pelo menos um inteiro de 32 bits sem sinal ou preferência um inteiro longo (64 bits).</span><span class="sxs-lookup"><span data-stu-id="e1368-167">tooavoid a short token expiry time, it is recommended that you encode hello expiry time value as at least a 32-bit unsigned integer, or preferably a long (64-bit) integer.</span></span>  
> 
> 

<span data-ttu-id="e1368-168">hash de saudação parece semelhante toohello pseudocódigo a seguir e retorna 32 bytes.</span><span class="sxs-lookup"><span data-stu-id="e1368-168">hello hash looks similar toohello following pseudo code and returns 32 bytes.</span></span>

```
SHA-256('https://<yournamespace>.servicebus.windows.net/'+'\n'+ 1438205742)
```

<span data-ttu-id="e1368-169">valores de hash não Olá estão em Olá **SharedAccessSignature** que hello destinatário pode calcular o hash de saudação sequência com hello os mesmos parâmetros, toobe-se de que ela retorna Olá mesmo resultado.</span><span class="sxs-lookup"><span data-stu-id="e1368-169">hello non-hashed values are in hello **SharedAccessSignature** string so that hello recipient can compute hello hash with hello same parameters, toobe sure that it returns hello same result.</span></span> <span data-ttu-id="e1368-170">Olá URI especifica o escopo de saudação e nome da chave Olá identifica Olá política toobe usado toocompute Olá hash.</span><span class="sxs-lookup"><span data-stu-id="e1368-170">hello URI specifies hello scope, and hello key name identifies hello policy toobe used toocompute hello hash.</span></span> <span data-ttu-id="e1368-171">Isso é importante de um ponto de vista de segurança.</span><span class="sxs-lookup"><span data-stu-id="e1368-171">This is important from a security standpoint.</span></span> <span data-ttu-id="e1368-172">Se Olá não coincide com que calcula o destinatário que hello (barramento de serviço), o acesso é negado.</span><span class="sxs-lookup"><span data-stu-id="e1368-172">If hello signature doesn't match that which hello recipient (Service Bus) calculates, then access is denied.</span></span> <span data-ttu-id="e1368-173">Agora você poderá ter certeza remetente Olá tinha a chave de acesso de toohello e deve ter direitos de saudação especificado na diretiva de saudação.</span><span class="sxs-lookup"><span data-stu-id="e1368-173">At this point you can be sure that hello sender had access toohello key and should be granted hello rights specified in hello policy.</span></span>

<span data-ttu-id="e1368-174">Observe que você deve usar o URI do recurso Olá codificado para esta operação.</span><span class="sxs-lookup"><span data-stu-id="e1368-174">Note that you should use hello encoded resource URI for this operation.</span></span> <span data-ttu-id="e1368-175">URI de recurso Olá é hello que URI completo do hello acesso aos toowhich de recursos de barramento de serviço é solicitado.</span><span class="sxs-lookup"><span data-stu-id="e1368-175">hello resource URI is hello full URI of hello Service Bus resource toowhich access is claimed.</span></span> <span data-ttu-id="e1368-176">Por exemplo, `http://<namespace>.servicebus.windows.net/<entityPath>` ou `sb://<namespace>.servicebus.windows.net/<entityPath>`; ou seja, `http://contoso.servicebus.windows.net/contosoTopics/T1/Subscriptions/S3`.</span><span class="sxs-lookup"><span data-stu-id="e1368-176">For example, `http://<namespace>.servicebus.windows.net/<entityPath>` or `sb://<namespace>.servicebus.windows.net/<entityPath>`; that is, `http://contoso.servicebus.windows.net/contosoTopics/T1/Subscriptions/S3`.</span></span>

<span data-ttu-id="e1368-177">regra de autorização de acesso compartilhado Olá usada para a assinatura deve ser configurada na entidade Olá especificada por esse URI, ou por um de seus pais hierárquicos.</span><span class="sxs-lookup"><span data-stu-id="e1368-177">hello shared access authorization rule used for signing must be configured on hello entity specified by this URI, or by one of its hierarchical parents.</span></span> <span data-ttu-id="e1368-178">Por exemplo, `http://contoso.servicebus.windows.net/contosoTopics/T1` ou `http://contoso.servicebus.windows.net` no exemplo anterior de saudação.</span><span class="sxs-lookup"><span data-stu-id="e1368-178">For example, `http://contoso.servicebus.windows.net/contosoTopics/T1` or `http://contoso.servicebus.windows.net` in hello previous example.</span></span>

<span data-ttu-id="e1368-179">Um token SAS é válido para todos os recursos em Olá `<resourceURI>` usado em Olá `signature-string`.</span><span class="sxs-lookup"><span data-stu-id="e1368-179">A SAS token is valid for all resources under hello `<resourceURI>` used in hello `signature-string`.</span></span>

<span data-ttu-id="e1368-180">Olá [KeyName](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_KeyName) Olá SAS token refere-se toohello **keyName** de saudação regra de autorização de acesso compartilhado usada toogenerate token de saudação.</span><span class="sxs-lookup"><span data-stu-id="e1368-180">hello [KeyName](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_KeyName) in hello SAS token refers toohello **keyName** of hello shared access authorization rule used toogenerate hello token.</span></span>

<span data-ttu-id="e1368-181">Olá *URL-encoded-resourceURI* devem ser Olá mesmo Olá URI usado na cadeia de caracteres a assinar Olá durante a computação de saudação da assinatura de saudação.</span><span class="sxs-lookup"><span data-stu-id="e1368-181">hello *URL-encoded-resourceURI* must be hello same as hello URI used in hello string-to-sign during hello computation of hello signature.</span></span> <span data-ttu-id="e1368-182">Ele deve ser [codificado por percentual](https://msdn.microsoft.com/library/4fkewx0t.aspx).</span><span class="sxs-lookup"><span data-stu-id="e1368-182">It should be [percent-encoded](https://msdn.microsoft.com/library/4fkewx0t.aspx).</span></span>

<span data-ttu-id="e1368-183">Recomenda-se regenerar periodicamente chaves Olá usadas em Olá [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) objeto.</span><span class="sxs-lookup"><span data-stu-id="e1368-183">It is recommended that you periodically regenerate hello keys used in hello [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) object.</span></span> <span data-ttu-id="e1368-184">Aplicativos devem geralmente usar Olá [PrimaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_PrimaryKey) toogenerate um token SAS.</span><span class="sxs-lookup"><span data-stu-id="e1368-184">Applications should generally use hello [PrimaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_PrimaryKey) toogenerate a SAS token.</span></span> <span data-ttu-id="e1368-185">Ao regenerar chaves hello, você deve substituir Olá [SecondaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_SecondaryKey) com primário antigo Olá chave e gerar uma nova chave de uma nova chave primária de saudação.</span><span class="sxs-lookup"><span data-stu-id="e1368-185">When regenerating hello keys, you should replace hello [SecondaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_SecondaryKey) with hello old primary key, and generate a new key as hello new primary key.</span></span> <span data-ttu-id="e1368-186">Isso permite que você toocontinue usando tokens de autorização que foram emitidos com a chave primária antiga de saudação e que ainda não expirou.</span><span class="sxs-lookup"><span data-stu-id="e1368-186">This enables you toocontinue using tokens for authorization that were issued with hello old primary key, and that have not yet expired.</span></span>

<span data-ttu-id="e1368-187">Se uma chave estiver comprometida e você tiver toorevoke Olá chaves, você pode regenerar ambos Olá [PrimaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_PrimaryKey) e hello [SecondaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_SecondaryKey) de um [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule), substituí-los com as novas chaves.</span><span class="sxs-lookup"><span data-stu-id="e1368-187">If a key is compromised and you have toorevoke hello keys, you can regenerate both hello [PrimaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_PrimaryKey) and hello [SecondaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_SecondaryKey) of a [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule), replacing them with new keys.</span></span> <span data-ttu-id="e1368-188">Este procedimento invalida todos os tokens assinados com chaves antigas hello.</span><span class="sxs-lookup"><span data-stu-id="e1368-188">This procedure invalidates all tokens signed with hello old keys.</span></span>

## <a name="how-toouse-shared-access-signature-authentication-with-service-bus"></a><span data-ttu-id="e1368-189">Como toouse autenticação de SAS com barramento de serviço</span><span class="sxs-lookup"><span data-stu-id="e1368-189">How toouse Shared Access Signature authentication with Service Bus</span></span>

<span data-ttu-id="e1368-190">Olá os seguintes cenários incluem configuração de regras de autorização, geração de tokens SAS e autorização do cliente.</span><span class="sxs-lookup"><span data-stu-id="e1368-190">hello following scenarios include configuration of authorization rules, generation of SAS tokens, and client authorization.</span></span>

<span data-ttu-id="e1368-191">Para uma completa da amostra de funcionamento de um aplicativo de barramento de serviço que ilustra Olá configuração e utiliza a autorização SAS, consulte [autenticação SAS com barramento de serviço](http://code.msdn.microsoft.com/Shared-Access-Signature-0a88adf8).</span><span class="sxs-lookup"><span data-stu-id="e1368-191">For a full working sample of a Service Bus application that illustrates hello configuration and uses SAS authorization, see [Shared Access Signature authentication with Service Bus](http://code.msdn.microsoft.com/Shared-Access-Signature-0a88adf8).</span></span> <span data-ttu-id="e1368-192">Um exemplo relacionado que ilustra o uso de saudação de regras de autorização SAS configuradas em namespaces ou tópicos assinaturas do barramento de serviço toosecure está disponível aqui: [autenticação usando SAS Shared Access Signature () com assinaturas do barramento de serviço ](http://code.msdn.microsoft.com/Using-Shared-Access-e605b37c).</span><span class="sxs-lookup"><span data-stu-id="e1368-192">A related sample that illustrates hello use of SAS authorization rules configured on namespaces or topics toosecure Service Bus subscriptions is available here: [Using Shared Access Signature (SAS) authentication with Service Bus Subscriptions](http://code.msdn.microsoft.com/Using-Shared-Access-e605b37c).</span></span>

## <a name="access-shared-access-authorization-rules-on-a-namespace"></a><span data-ttu-id="e1368-193">Acessar regras de autorização de Acesso Compartilhado em um namespace</span><span class="sxs-lookup"><span data-stu-id="e1368-193">Access Shared Access Authorization rules on a namespace</span></span>

<span data-ttu-id="e1368-194">Operações na raiz do namespace de barramento de serviço Olá exigem autenticação de certificado.</span><span class="sxs-lookup"><span data-stu-id="e1368-194">Operations on hello Service Bus namespace root require certificate authentication.</span></span> <span data-ttu-id="e1368-195">Você deve carregar um certificado de gerenciamento da sua assinatura do Azure.</span><span class="sxs-lookup"><span data-stu-id="e1368-195">You must upload a management certificate for your Azure subscription.</span></span> <span data-ttu-id="e1368-196">tooupload um certificado de gerenciamento, execute as etapas de saudação [aqui](../cloud-services/cloud-services-configure-ssl-certificate-portal.md#step-3-upload-a-certificate), usando Olá [portal do Azure][Azure portal].</span><span class="sxs-lookup"><span data-stu-id="e1368-196">tooupload a management certificate, follow hello steps [here](../cloud-services/cloud-services-configure-ssl-certificate-portal.md#step-3-upload-a-certificate), using hello [Azure portal][Azure portal].</span></span> <span data-ttu-id="e1368-197">Para obter mais informações sobre certificados de gerenciamento do Azure, consulte Olá [visão geral de certificados do Azure](../cloud-services/cloud-services-certs-create.md#what-are-management-certificates).</span><span class="sxs-lookup"><span data-stu-id="e1368-197">For more information about Azure management certificates, see hello [Azure certificates overview](../cloud-services/cloud-services-certs-create.md#what-are-management-certificates).</span></span>

<span data-ttu-id="e1368-198">ponto de extremidade Olá para acessar regras de autorização de acesso compartilhado em um namespace de barramento de serviço é o seguinte:</span><span class="sxs-lookup"><span data-stu-id="e1368-198">hello endpoint for accessing shared access authorization rules on a Service Bus namespace is as follows:</span></span>

```http
https://management.core.windows.net/{subscriptionId}/services/ServiceBus/namespaces/{namespace}/AuthorizationRules/
```

<span data-ttu-id="e1368-199">toocreate um [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) de objeto em um namespace de barramento de serviço, execute uma operação POST nesse ponto de extremidade com informações de regra de saudação serializadas como JSON ou XML.</span><span class="sxs-lookup"><span data-stu-id="e1368-199">toocreate a [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) object on a Service Bus namespace, execute a POST operation on this endpoint with hello rule information serialized as JSON or XML.</span></span> <span data-ttu-id="e1368-200">Por exemplo:</span><span class="sxs-lookup"><span data-stu-id="e1368-200">For example:</span></span>

```csharp
// Base address for accessing authorization rules on a namespace
string baseAddress = @"https://management.core.windows.net/<subscriptionId>/services/ServiceBus/namespaces/<namespace>/AuthorizationRules/";

// Configure authorization rule with base64-encoded 256-bit key and Send rights
var sendRule = new SharedAccessAuthorizationRule("contosoSendAll",
    SharedAccessAuthorizationRule.GenerateRandomKey(),
    new[] { AccessRights.Send });

// Operations on hello Service Bus namespace root require certificate authentication.
WebRequestHandler handler = new WebRequestHandler
{
    ClientCertificateOptions = ClientCertificateOption.Manual
};
// Access hello management certificate by subject name
handler.ClientCertificates.Add(GetCertificate(<certificateSN>));

HttpClient httpClient = new HttpClient(handler)
{
    BaseAddress = new Uri(baseAddress)
};
httpClient.DefaultRequestHeaders.Accept.Add(
    new MediaTypeWithQualityHeaderValue("application/json"));
httpClient.DefaultRequestHeaders.Add("x-ms-version", "2015-01-01");

// Execute a POST operation on hello baseAddress above toocreate an auth rule
var postResult = httpClient.PostAsJsonAsync("", sendRule).Result;
```

<span data-ttu-id="e1368-201">Da mesma forma, use uma operação GET hello ponto de extremidade tooread Olá das regras de autorização configuradas no namespace de saudação.</span><span class="sxs-lookup"><span data-stu-id="e1368-201">Similarly, use a GET operation on hello endpoint tooread hello authorization rules configured on hello namespace.</span></span>

<span data-ttu-id="e1368-202">tooupdate ou excluir uma regra de autorização específica, use Olá ponto de extremidade a seguir:</span><span class="sxs-lookup"><span data-stu-id="e1368-202">tooupdate or delete a specific authorization rule, use hello following endpoint:</span></span>

```http
https://management.core.windows.net/{subscriptionId}/services/ServiceBus/namespaces/{namespace}/AuthorizationRules/{KeyName}
```

## <a name="access-shared-access-authorization-rules-on-an-entity"></a><span data-ttu-id="e1368-203">Acessar regras de Autorização de Acesso Compartilhado em uma entidade</span><span class="sxs-lookup"><span data-stu-id="e1368-203">Access Shared Access Authorization rules on an entity</span></span>

<span data-ttu-id="e1368-204">Você pode acessar uma [Microsoft.ServiceBus.Messaging.SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) objeto configurado em uma fila do barramento de serviço ou o tópico por Olá [AuthorizationRules](/dotnet/api/microsoft.servicebus.messaging.authorizationrules) coleção em Olá correspondente [QueueDescription](/dotnet/api/microsoft.servicebus.messaging.queuedescription) ou [TopicDescription](/dotnet/api/microsoft.servicebus.messaging.topicdescription).</span><span class="sxs-lookup"><span data-stu-id="e1368-204">You can access a [Microsoft.ServiceBus.Messaging.SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) object configured on a Service Bus queue or topic through hello [AuthorizationRules](/dotnet/api/microsoft.servicebus.messaging.authorizationrules) collection in hello corresponding [QueueDescription](/dotnet/api/microsoft.servicebus.messaging.queuedescription) or [TopicDescription](/dotnet/api/microsoft.servicebus.messaging.topicdescription).</span></span>

<span data-ttu-id="e1368-205">saudação de código a seguir mostra como as regras de autorização tooadd para uma fila.</span><span class="sxs-lookup"><span data-stu-id="e1368-205">hello following code shows how tooadd authorization rules for a queue.</span></span>

```csharp
// Create an instance of NamespaceManager for hello operation
NamespaceManager nsm = NamespaceManager.CreateFromConnectionString(
    <connectionString> );
QueueDescription qd = new QueueDescription( <qPath> );

// Create a rule with send rights with keyName as "contosoQSendKey"
// and add it toohello queue description.
qd.Authorization.Add(new SharedAccessAuthorizationRule("contosoSendKey",
    SharedAccessAuthorizationRule.GenerateRandomKey(),
    new[] { AccessRights.Send }));

// Create a rule with listen rights with keyName as "contosoQListenKey"
// and add it toohello queue description.
qd.Authorization.Add(new SharedAccessAuthorizationRule("contosoQListenKey",
    SharedAccessAuthorizationRule.GenerateRandomKey(),
    new[] { AccessRights.Listen }));

// Create a rule with manage rights with keyName as "contosoQManageKey"
// and add it toohello queue description.
// A rule with manage rights must also have send and receive rights.
qd.Authorization.Add(new SharedAccessAuthorizationRule("contosoQManageKey",
    SharedAccessAuthorizationRule.GenerateRandomKey(),
    new[] {AccessRights.Manage, AccessRights.Listen, AccessRights.Send }));

// Create hello queue.
nsm.CreateQueue(qd);
```

## <a name="use-shared-access-signature-authorization"></a><span data-ttu-id="e1368-206">Usar a autorização de Assinatura de Acesso Compartilhado</span><span class="sxs-lookup"><span data-stu-id="e1368-206">Use Shared Access Signature authorization</span></span>

<span data-ttu-id="e1368-207">Aplicativos usando Olá SDK .NET do Azure com bibliotecas .NET do barramento de serviço do hello podem usar autorização SAS pela Olá [SharedAccessSignatureTokenProvider](/dotnet/api/microsoft.servicebus.sharedaccesssignaturetokenprovider) classe.</span><span class="sxs-lookup"><span data-stu-id="e1368-207">Applications using hello Azure .NET SDK with hello Service Bus .NET libraries can use SAS authorization through hello [SharedAccessSignatureTokenProvider](/dotnet/api/microsoft.servicebus.sharedaccesssignaturetokenprovider) class.</span></span> <span data-ttu-id="e1368-208">Olá, código a seguir ilustra Olá uso da fila de barramento de serviço do hello provedor de token toosend mensagens tooa.</span><span class="sxs-lookup"><span data-stu-id="e1368-208">hello following code illustrates hello use of hello token provider toosend messages tooa Service Bus queue.</span></span>

```csharp
Uri runtimeUri = ServiceBusEnvironment.CreateServiceUri("sb",
    <yourServiceNamespace>, string.Empty);
MessagingFactory mf = MessagingFactory.Create(runtimeUri,
    TokenProvider.CreateSharedAccessSignatureTokenProvider(keyName, key));
QueueClient sendClient = mf.CreateQueueClient(qPath);

//Sending hello message tooqueue.
BrokeredMessage helloMessage = new BrokeredMessage("Hello, Service Bus!");
helloMessage.MessageId = "SAS-Sample-Message";
sendClient.Send(helloMessage);
```

<span data-ttu-id="e1368-209">Os aplicativos também podem usar SAS para autenticação usando uma cadeia de conexão SAS em métodos que aceitem cadeias de conexão.</span><span class="sxs-lookup"><span data-stu-id="e1368-209">Applications can also use SAS for authentication by using a SAS connection string in methods that accept connection strings.</span></span>

<span data-ttu-id="e1368-210">Observe que autorização SAS de toouse com retransmissões do barramento de serviço, você pode utilizar chaves SAS configuradas no namespace de barramento de serviço Olá.</span><span class="sxs-lookup"><span data-stu-id="e1368-210">Note that toouse SAS authorization with Service Bus relays, you can use SAS keys configured on hello Service Bus namespace.</span></span> <span data-ttu-id="e1368-211">Se você criar explicitamente uma retransmissão no namespace da saudação ([NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) com um [RelayDescription](/dotnet/api/microsoft.servicebus.messaging.relaydescription)) do objeto, você pode definir regras SAS Olá apenas para essa retransmissão.</span><span class="sxs-lookup"><span data-stu-id="e1368-211">If you explicitly create a relay on hello namespace ([NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) with a [RelayDescription](/dotnet/api/microsoft.servicebus.messaging.relaydescription)) object, you can set hello SAS rules just for that relay.</span></span> <span data-ttu-id="e1368-212">toouse a autorização SAS com assinaturas do barramento de serviço, você pode usar chaves SAS configuradas em um namespace de barramento de serviço ou em um tópico.</span><span class="sxs-lookup"><span data-stu-id="e1368-212">toouse SAS authorization with Service Bus subscriptions, you can use SAS keys configured on a Service Bus namespace or on a topic.</span></span>

## <a name="use-hello-shared-access-signature-at-http-level"></a><span data-ttu-id="e1368-213">Usar Olá assinatura de acesso compartilhado (no nível HTTP)</span><span class="sxs-lookup"><span data-stu-id="e1368-213">Use hello Shared Access Signature (at HTTP level)</span></span>

<span data-ttu-id="e1368-214">Agora que você sabe como toocreate assinaturas de acesso compartilhado para qualquer entidade no barramento de serviço, você está pronto tooperform um HTTP POST:</span><span class="sxs-lookup"><span data-stu-id="e1368-214">Now that you know how toocreate Shared Access Signatures for any entities in Service Bus, you are ready tooperform an HTTP POST:</span></span>

```http
POST https://<yournamespace>.servicebus.windows.net/<yourentity>/messages
Content-Type: application/json
Authorization: SharedAccessSignature sr=https%3A%2F%2F<yournamespace>.servicebus.windows.net%2F<yourentity>&sig=<yoursignature from code above>&se=1438205742&skn=KeyName
ContentType: application/atom+xml;type=entry;charset=utf-8
``` 

<span data-ttu-id="e1368-215">Lembre-se de que isso funciona para tudo.</span><span class="sxs-lookup"><span data-stu-id="e1368-215">Remember, this works for everything.</span></span> <span data-ttu-id="e1368-216">Você pode criar SAS para uma fila, tópico ou assinatura.</span><span class="sxs-lookup"><span data-stu-id="e1368-216">You can create SAS for a queue, topic, or subscription.</span></span> 

<span data-ttu-id="e1368-217">Se você fornecer um remetente ou o cliente um token SAS, eles não tem chave Olá diretamente e não é possível reverter Olá hash tooobtain-lo.</span><span class="sxs-lookup"><span data-stu-id="e1368-217">If you give a sender or client a SAS token, they don't have hello key directly, and they cannot reverse hello hash tooobtain it.</span></span> <span data-ttu-id="e1368-218">Dessa forma, você tem controle sobre o que eles podem acessar e por quanto tempo.</span><span class="sxs-lookup"><span data-stu-id="e1368-218">As such, you have control over what they can access, and for how long.</span></span> <span data-ttu-id="e1368-219">Um tooremember mais importante é que, se você alterar a chave primária Olá na política hello, quaisquer assinaturas de acesso compartilhado criado a partir dele serão invalidadas.</span><span class="sxs-lookup"><span data-stu-id="e1368-219">An important thing tooremember is that if you change hello primary key in hello policy, any Shared Access Signatures created from it will be invalidated.</span></span>

## <a name="use-hello-shared-access-signature-at-amqp-level"></a><span data-ttu-id="e1368-220">Olá usar assinatura de acesso compartilhado (no nível do AMQP)</span><span class="sxs-lookup"><span data-stu-id="e1368-220">Use hello Shared Access Signature (at AMQP level)</span></span>

<span data-ttu-id="e1368-221">Na seção anterior do hello, você viu como toouse Olá token SAS com uma solicitação HTTP POST para enviar dados toohello barramento de serviço.</span><span class="sxs-lookup"><span data-stu-id="e1368-221">In hello previous section, you saw how toouse hello SAS token with an HTTP POST request for sending data toohello Service Bus.</span></span> <span data-ttu-id="e1368-222">Como você sabe, você pode acessar o barramento de serviço usando Olá Advanced Message Queuing Protocol (AMQP) que é Olá preferencial protocolo toouse por motivos de desempenho, em muitos cenários.</span><span class="sxs-lookup"><span data-stu-id="e1368-222">As you know, you can access Service Bus using hello Advanced Message Queuing Protocol (AMQP) that is hello preferred protocol toouse for performance reasons, in many scenarios.</span></span> <span data-ttu-id="e1368-223">Olá uso do token SAS com AMQP é descrito no documento de saudação [AMQP Claim-Based Security versão 1.0](https://www.oasis-open.org/committees/download.php/50506/amqp-cbs-v1%200-wd02%202013-08-12.doc) rascunho de trabalho que é em desde 2013 mas bem com suporte pelo Azure atualmente.</span><span class="sxs-lookup"><span data-stu-id="e1368-223">hello SAS token usage with AMQP is described in hello document [AMQP Claim-Based Security Version 1.0](https://www.oasis-open.org/committees/download.php/50506/amqp-cbs-v1%200-wd02%202013-08-12.doc) that is in working draft since 2013 but well-supported by Azure today.</span></span>

<span data-ttu-id="e1368-224">Antes de iniciar toosend dados tooService barramento, publisher Olá deve enviar o token SAS hello dentro de um AMQP mensagem tooa bem definido AMQP nó denominado **$cbs** (você pode vê-lo como uma fila "especial" usada pelo Olá serviço tooacquire e validar tudo tokens SAS Olá).</span><span class="sxs-lookup"><span data-stu-id="e1368-224">Before starting toosend data tooService Bus, hello publisher must send hello SAS token inside an AMQP message tooa well-defined AMQP node named **$cbs** (you can see it as a "special" queue used by hello service tooacquire and validate all hello SAS tokens).</span></span> <span data-ttu-id="e1368-225">publicador Olá deve especificar Olá **ReplyTo** campo dentro da mensagem de saudação do AMQP; isso é o nó de saudação no qual Olá serviço responde publicador toohello com resultado Olá Olá de validação de token (um padrão de solicitação/resposta entre publicador e o serviço).</span><span class="sxs-lookup"><span data-stu-id="e1368-225">hello publisher must specify hello **ReplyTo** field inside hello AMQP message; this is hello node in which hello service replies toohello publisher with hello result of hello token validation (a simple request/reply pattern between publisher and service).</span></span> <span data-ttu-id="e1368-226">Este nó de resposta é criado "em Olá dinamicamente," falar "criação dinâmica de nó remoto", conforme descrito pela especificação de saudação AMQP 1.0.</span><span class="sxs-lookup"><span data-stu-id="e1368-226">This reply node is created "on hello fly," speaking about "dynamic creation of remote node" as described by hello AMQP 1.0 specification.</span></span> <span data-ttu-id="e1368-227">Depois de verificar se que esse token SAS de saudação é válido, publisher Olá pode Avançar e iniciar o serviço de toohello toosend dados.</span><span class="sxs-lookup"><span data-stu-id="e1368-227">After checking that hello SAS token is valid, hello publisher can go forward and start toosend data toohello service.</span></span>

<span data-ttu-id="e1368-228">Olá etapas a seguir mostram como toosend Olá token SAS com protocolo AMQP usando Olá [AMQP.Net Lite](https://github.com/Azure/amqpnetlite) biblioteca.</span><span class="sxs-lookup"><span data-stu-id="e1368-228">hello following steps show how toosend hello SAS token with AMQP protocol using hello [AMQP.Net Lite](https://github.com/Azure/amqpnetlite) library.</span></span> <span data-ttu-id="e1368-229">Isso será útil se você não pode usar oficial Olá SDK do barramento de serviço (por exemplo, em WinRT, .net Compact Framework, o .net Framework Micro e Mono) desenvolvendo em C\#.</span><span class="sxs-lookup"><span data-stu-id="e1368-229">This is useful if you can't use hello official Service Bus SDK (for example on WinRT, .Net Compact Framework, .Net Micro Framework and Mono) developing in C\#.</span></span> <span data-ttu-id="e1368-230">Obviamente, essa biblioteca é útil toohelp entender como baseado em declarações funciona no nível do AMQP hello, como você viu como ele funciona no nível de saudação HTTP (com um HTTP POST solicitação e hello SAS token Olá enviados dentro do cabeçalho "Autorização").</span><span class="sxs-lookup"><span data-stu-id="e1368-230">Of course, this library is useful toohelp understand how claims-based security works at hello AMQP level, as you saw how it works at hello HTTP level (with an HTTP POST request and hello SAS token sent inside hello "Authorization" header).</span></span> <span data-ttu-id="e1368-231">Se não precisar de tal profundo conhecimento sobre AMQP, você pode usar oficial Olá SDK do barramento de serviço com o .net aplicativos do Framework, o que fará isso para você.</span><span class="sxs-lookup"><span data-stu-id="e1368-231">If you don't need such deep knowledge about AMQP, you can use hello official Service Bus SDK with .Net Framework applications, which will do it for you.</span></span>

### <a name="c35"></a><span data-ttu-id="e1368-232">C&#35;</span><span class="sxs-lookup"><span data-stu-id="e1368-232">C&#35;</span></span>

```csharp
/// <summary>
/// Send claim-based security (CBS) token
/// </summary>
/// <param name="shareAccessSignature">Shared access signature (token) toosend</param>
private bool PutCbsToken(Connection connection, string sasToken)
{
    bool result = true;
    Session session = new Session(connection);

    string cbsClientAddress = "cbs-client-reply-to";
    var cbsSender = new SenderLink(session, "cbs-sender", "$cbs");
    var cbsReceiver = new ReceiverLink(session, cbsClientAddress, "$cbs");

    // construct hello put-token message
    var request = new Message(sasToken);
    request.Properties = new Properties();
    request.Properties.MessageId = Guid.NewGuid().ToString();
    request.Properties.ReplyTo = cbsClientAddress;
    request.ApplicationProperties = new ApplicationProperties();
    request.ApplicationProperties["operation"] = "put-token";
    request.ApplicationProperties["type"] = "servicebus.windows.net:sastoken";
    request.ApplicationProperties["name"] = Fx.Format("amqp://{0}/{1}", sbNamespace, entity);
    cbsSender.Send(request);

    // receive hello response
    var response = cbsReceiver.Receive();
    if (response == null || response.Properties == null || response.ApplicationProperties == null)
    {
        result = false;
    }
    else
    {
        int statusCode = (int)response.ApplicationProperties["status-code"];
        if (statusCode != (int)HttpStatusCode.Accepted && statusCode != (int)HttpStatusCode.OK)
        {
            result = false;
        }
    }

    // hello sender/receiver may be kept open for refreshing tokens
    cbsSender.Close();
    cbsReceiver.Close();
    session.Close();

    return result;
}
```

<span data-ttu-id="e1368-233">Olá `PutCbsToken()` método recebe Olá *conexão* (instância de classe de conexão AMQP conforme fornecido por Olá [AMQP .NET Lite biblioteca](https://github.com/Azure/amqpnetlite)) que representa o serviço de toohello de conexão de TCP hello e hello *sasToken* parâmetro hello SAS token toosend.</span><span class="sxs-lookup"><span data-stu-id="e1368-233">hello `PutCbsToken()` method receives hello *connection* (AMQP connection class instance as provided by hello [AMQP .NET Lite library](https://github.com/Azure/amqpnetlite)) that represents hello TCP connection toohello service and hello *sasToken* parameter that is hello SAS token toosend.</span></span> 

> [!NOTE]
> <span data-ttu-id="e1368-234">É importante que a conexão de saudação é criado com **mecanismo de autenticação SASL definido tooEXTERNAL** (e não Olá padrão simples com o nome de usuário e a senha usada ao token SAS Olá toosend não é necessário).</span><span class="sxs-lookup"><span data-stu-id="e1368-234">It's important that hello connection is created with **SASL authentication mechanism set tooEXTERNAL** (and not hello default PLAIN with username and password used when you don't need toosend hello SAS token).</span></span>
> 
> 

<span data-ttu-id="e1368-235">Em seguida, o publicador de saudação cria dois links AMQP para enviar o token SAS hello e receber a resposta de saudação (resultados de validação de token Olá) do serviço de saudação.</span><span class="sxs-lookup"><span data-stu-id="e1368-235">Next, hello publisher creates two AMQP links for sending hello SAS token and receiving hello reply (hello token validation result) from hello service.</span></span>

<span data-ttu-id="e1368-236">AMQP mensagem contém um conjunto de propriedades e mais informações do que uma mensagem simples.</span><span class="sxs-lookup"><span data-stu-id="e1368-236">hello AMQP message contains a set of properties, and more information than a simple message.</span></span> <span data-ttu-id="e1368-237">token SAS Olá é o corpo de saudação de mensagem de saudação (usando o construtor).</span><span class="sxs-lookup"><span data-stu-id="e1368-237">hello SAS token is hello body of hello message (using its constructor).</span></span> <span data-ttu-id="e1368-238">Olá **"ReplyTo"** está definida toohello nome do nó para receber o resultado da validação Olá no link de receptor de saudação (você pode alterar seu nome, se desejar, e ele será criado dinamicamente pelo serviço de saudação).</span><span class="sxs-lookup"><span data-stu-id="e1368-238">hello **"ReplyTo"** property is set toohello node name for receiving hello validation result on hello receiver link (you can change its name if you want, and it will be created dynamically by hello service).</span></span> <span data-ttu-id="e1368-239">Olá três últimas propriedades de aplicativo/personalizadas são usadas pelo Olá serviço tooindicate que tipo de operação, ele tem tooexecute.</span><span class="sxs-lookup"><span data-stu-id="e1368-239">hello last three application/custom properties are used by hello service tooindicate what kind of operation it has tooexecute.</span></span> <span data-ttu-id="e1368-240">Conforme descrito pelo Olá CBS especificação de rascunho, eles devem ser Olá **nome da operação** ("put-token"), Olá **tipo de token** (no caso, um "servicebus.windows.net:sastoken") e hello **" nome"do público-alvo Olá** token de saudação toowhich aplica-se (entidade inteira de saudação).</span><span class="sxs-lookup"><span data-stu-id="e1368-240">As described by hello CBS draft specification, they must be hello **operation name** ("put-token"), hello **type of token** (in this case, a "servicebus.windows.net:sastoken"), and hello **"name" of hello audience** toowhich hello token applies (hello entire entity).</span></span>

<span data-ttu-id="e1368-241">Após enviar token SAS Olá no link de remetente Olá, publisher Olá deve ler resposta Olá no link do receptor de saudação.</span><span class="sxs-lookup"><span data-stu-id="e1368-241">After sending hello SAS token on hello sender link, hello publisher must read hello reply on hello receiver link.</span></span> <span data-ttu-id="e1368-242">saudação de resposta é uma mensagem do AMQP simples com uma propriedade de aplicativo denominada **"código de status"** que pode conter Olá mesmos valores como um código de status HTTP.</span><span class="sxs-lookup"><span data-stu-id="e1368-242">hello reply is a simple AMQP message with an application property named **"status-code"** that can contain hello same values as an HTTP status code.</span></span>

## <a name="rights-required-for-service-bus-operations"></a><span data-ttu-id="e1368-243">Direitos necessários para operações do Barramento de Serviço</span><span class="sxs-lookup"><span data-stu-id="e1368-243">Rights required for Service Bus operations</span></span>

<span data-ttu-id="e1368-244">Olá tabela a seguir mostra os direitos de acesso Olá necessários para diversas operações nos recursos do barramento de serviço.</span><span class="sxs-lookup"><span data-stu-id="e1368-244">hello following table shows hello access rights required for various operations on Service Bus resources.</span></span>

| <span data-ttu-id="e1368-245">Operação</span><span class="sxs-lookup"><span data-stu-id="e1368-245">Operation</span></span> | <span data-ttu-id="e1368-246">Declaração Obrigatória</span><span class="sxs-lookup"><span data-stu-id="e1368-246">Claim Required</span></span> | <span data-ttu-id="e1368-247">Escopo da Declaração</span><span class="sxs-lookup"><span data-stu-id="e1368-247">Claim Scope</span></span> |
| --- | --- | --- |
| <span data-ttu-id="e1368-248">**Namespace**</span><span class="sxs-lookup"><span data-stu-id="e1368-248">**Namespace**</span></span> | | |
| <span data-ttu-id="e1368-249">Configurar regra de autorização em um namespace</span><span class="sxs-lookup"><span data-stu-id="e1368-249">Configure authorization rule on a namespace</span></span> |<span data-ttu-id="e1368-250">Gerenciar</span><span class="sxs-lookup"><span data-stu-id="e1368-250">Manage</span></span> |<span data-ttu-id="e1368-251">Qualquer endereço de namespace</span><span class="sxs-lookup"><span data-stu-id="e1368-251">Any namespace address</span></span> |
| <span data-ttu-id="e1368-252">**Registro do Serviço**</span><span class="sxs-lookup"><span data-stu-id="e1368-252">**Service Registry**</span></span> | | |
| <span data-ttu-id="e1368-253">Enumerar Políticas de Privacidade</span><span class="sxs-lookup"><span data-stu-id="e1368-253">Enumerate Private Policies</span></span> |<span data-ttu-id="e1368-254">Gerenciar</span><span class="sxs-lookup"><span data-stu-id="e1368-254">Manage</span></span> |<span data-ttu-id="e1368-255">Qualquer endereço de namespace</span><span class="sxs-lookup"><span data-stu-id="e1368-255">Any namespace address</span></span> |
| <span data-ttu-id="e1368-256">Iniciar a escuta em um namespace</span><span class="sxs-lookup"><span data-stu-id="e1368-256">Begin listening on a namespace</span></span> |<span data-ttu-id="e1368-257">Escutar</span><span class="sxs-lookup"><span data-stu-id="e1368-257">Listen</span></span> |<span data-ttu-id="e1368-258">Qualquer endereço de namespace</span><span class="sxs-lookup"><span data-stu-id="e1368-258">Any namespace address</span></span> |
| <span data-ttu-id="e1368-259">Enviar o ouvinte de tooa mensagens em um namespace</span><span class="sxs-lookup"><span data-stu-id="e1368-259">Send messages tooa listener at a namespace</span></span> |<span data-ttu-id="e1368-260">Enviar</span><span class="sxs-lookup"><span data-stu-id="e1368-260">Send</span></span> |<span data-ttu-id="e1368-261">Qualquer endereço de namespace</span><span class="sxs-lookup"><span data-stu-id="e1368-261">Any namespace address</span></span> |
| <span data-ttu-id="e1368-262">**Fila**</span><span class="sxs-lookup"><span data-stu-id="e1368-262">**Queue**</span></span> | | |
| <span data-ttu-id="e1368-263">Criar uma fila</span><span class="sxs-lookup"><span data-stu-id="e1368-263">Create a queue</span></span> |<span data-ttu-id="e1368-264">Gerenciar</span><span class="sxs-lookup"><span data-stu-id="e1368-264">Manage</span></span> |<span data-ttu-id="e1368-265">Qualquer endereço de namespace</span><span class="sxs-lookup"><span data-stu-id="e1368-265">Any namespace address</span></span> |
| <span data-ttu-id="e1368-266">Excluir uma fila</span><span class="sxs-lookup"><span data-stu-id="e1368-266">Delete a queue</span></span> |<span data-ttu-id="e1368-267">Gerenciar</span><span class="sxs-lookup"><span data-stu-id="e1368-267">Manage</span></span> |<span data-ttu-id="e1368-268">Qualquer endereço de fila válido</span><span class="sxs-lookup"><span data-stu-id="e1368-268">Any valid queue address</span></span> |
| <span data-ttu-id="e1368-269">Enumerar filas</span><span class="sxs-lookup"><span data-stu-id="e1368-269">Enumerate queues</span></span> |<span data-ttu-id="e1368-270">Gerenciar</span><span class="sxs-lookup"><span data-stu-id="e1368-270">Manage</span></span> |<span data-ttu-id="e1368-271">/$Resources/Queues</span><span class="sxs-lookup"><span data-stu-id="e1368-271">/$Resources/Queues</span></span> |
| <span data-ttu-id="e1368-272">Obter a descrição da fila Olá</span><span class="sxs-lookup"><span data-stu-id="e1368-272">Get hello queue description</span></span> |<span data-ttu-id="e1368-273">Gerenciar</span><span class="sxs-lookup"><span data-stu-id="e1368-273">Manage</span></span> |<span data-ttu-id="e1368-274">Qualquer endereço de fila válido</span><span class="sxs-lookup"><span data-stu-id="e1368-274">Any valid queue address</span></span> |
| <span data-ttu-id="e1368-275">Configurar regra de autorização para uma fila</span><span class="sxs-lookup"><span data-stu-id="e1368-275">Configure authorization rule for a queue</span></span> |<span data-ttu-id="e1368-276">Gerenciar</span><span class="sxs-lookup"><span data-stu-id="e1368-276">Manage</span></span> |<span data-ttu-id="e1368-277">Qualquer endereço de fila válido</span><span class="sxs-lookup"><span data-stu-id="e1368-277">Any valid queue address</span></span> |
| <span data-ttu-id="e1368-278">Enviar para fila toohello</span><span class="sxs-lookup"><span data-stu-id="e1368-278">Send into toohello queue</span></span> |<span data-ttu-id="e1368-279">Enviar</span><span class="sxs-lookup"><span data-stu-id="e1368-279">Send</span></span> |<span data-ttu-id="e1368-280">Qualquer endereço de fila válido</span><span class="sxs-lookup"><span data-stu-id="e1368-280">Any valid queue address</span></span> |
| <span data-ttu-id="e1368-281">Receber mensagens de uma fila</span><span class="sxs-lookup"><span data-stu-id="e1368-281">Receive messages from a queue</span></span> |<span data-ttu-id="e1368-282">Escutar</span><span class="sxs-lookup"><span data-stu-id="e1368-282">Listen</span></span> |<span data-ttu-id="e1368-283">Qualquer endereço de fila válido</span><span class="sxs-lookup"><span data-stu-id="e1368-283">Any valid queue address</span></span> |
| <span data-ttu-id="e1368-284">Abandonar ou preencher as mensagens após o recebimento da mensagem de saudação no modo de bloqueio de inspeção</span><span class="sxs-lookup"><span data-stu-id="e1368-284">Abandon or complete messages after receiving hello message in peek-lock mode</span></span> |<span data-ttu-id="e1368-285">Escutar</span><span class="sxs-lookup"><span data-stu-id="e1368-285">Listen</span></span> |<span data-ttu-id="e1368-286">Qualquer endereço de fila válido</span><span class="sxs-lookup"><span data-stu-id="e1368-286">Any valid queue address</span></span> |
| <span data-ttu-id="e1368-287">Adiar uma mensagem para recuperação posterior</span><span class="sxs-lookup"><span data-stu-id="e1368-287">Defer a message for later retrieval</span></span> |<span data-ttu-id="e1368-288">Escutar</span><span class="sxs-lookup"><span data-stu-id="e1368-288">Listen</span></span> |<span data-ttu-id="e1368-289">Qualquer endereço de fila válido</span><span class="sxs-lookup"><span data-stu-id="e1368-289">Any valid queue address</span></span> |
| <span data-ttu-id="e1368-290">Colocar uma mensagem nas mensagens mortas</span><span class="sxs-lookup"><span data-stu-id="e1368-290">Deadletter a message</span></span> |<span data-ttu-id="e1368-291">Escutar</span><span class="sxs-lookup"><span data-stu-id="e1368-291">Listen</span></span> |<span data-ttu-id="e1368-292">Qualquer endereço de fila válido</span><span class="sxs-lookup"><span data-stu-id="e1368-292">Any valid queue address</span></span> |
| <span data-ttu-id="e1368-293">Obter o estado de saudação associado a uma sessão de fila de mensagem</span><span class="sxs-lookup"><span data-stu-id="e1368-293">Get hello state associated with a message queue session</span></span> |<span data-ttu-id="e1368-294">Escutar</span><span class="sxs-lookup"><span data-stu-id="e1368-294">Listen</span></span> |<span data-ttu-id="e1368-295">Qualquer endereço de fila válido</span><span class="sxs-lookup"><span data-stu-id="e1368-295">Any valid queue address</span></span> |
| <span data-ttu-id="e1368-296">Definir estado de saudação associado a uma sessão de fila de mensagem</span><span class="sxs-lookup"><span data-stu-id="e1368-296">Set hello state associated with a message queue session</span></span> |<span data-ttu-id="e1368-297">Escutar</span><span class="sxs-lookup"><span data-stu-id="e1368-297">Listen</span></span> |<span data-ttu-id="e1368-298">Qualquer endereço de fila válido</span><span class="sxs-lookup"><span data-stu-id="e1368-298">Any valid queue address</span></span> |
| <span data-ttu-id="e1368-299">**Tópico**</span><span class="sxs-lookup"><span data-stu-id="e1368-299">**Topic**</span></span> | | |
| <span data-ttu-id="e1368-300">Criar um tópico</span><span class="sxs-lookup"><span data-stu-id="e1368-300">Create a topic</span></span> |<span data-ttu-id="e1368-301">Gerenciar</span><span class="sxs-lookup"><span data-stu-id="e1368-301">Manage</span></span> |<span data-ttu-id="e1368-302">Qualquer endereço de namespace</span><span class="sxs-lookup"><span data-stu-id="e1368-302">Any namespace address</span></span> |
| <span data-ttu-id="e1368-303">Excluir um tópico</span><span class="sxs-lookup"><span data-stu-id="e1368-303">Delete a topic</span></span> |<span data-ttu-id="e1368-304">Gerenciar</span><span class="sxs-lookup"><span data-stu-id="e1368-304">Manage</span></span> |<span data-ttu-id="e1368-305">Qualquer endereço de tópico válido</span><span class="sxs-lookup"><span data-stu-id="e1368-305">Any valid topic address</span></span> |
| <span data-ttu-id="e1368-306">Enumerar tópicos</span><span class="sxs-lookup"><span data-stu-id="e1368-306">Enumerate topics</span></span> |<span data-ttu-id="e1368-307">Gerenciar</span><span class="sxs-lookup"><span data-stu-id="e1368-307">Manage</span></span> |<span data-ttu-id="e1368-308">/$Resources/Topics</span><span class="sxs-lookup"><span data-stu-id="e1368-308">/$Resources/Topics</span></span> |
| <span data-ttu-id="e1368-309">Obter descrição do tópico Olá</span><span class="sxs-lookup"><span data-stu-id="e1368-309">Get hello topic description</span></span> |<span data-ttu-id="e1368-310">Gerenciar</span><span class="sxs-lookup"><span data-stu-id="e1368-310">Manage</span></span> |<span data-ttu-id="e1368-311">Qualquer endereço de tópico válido</span><span class="sxs-lookup"><span data-stu-id="e1368-311">Any valid topic address</span></span> |
| <span data-ttu-id="e1368-312">Configurar regra de autorização para um tópico</span><span class="sxs-lookup"><span data-stu-id="e1368-312">Configure authorization rule for a topic</span></span> |<span data-ttu-id="e1368-313">Gerenciar</span><span class="sxs-lookup"><span data-stu-id="e1368-313">Manage</span></span> |<span data-ttu-id="e1368-314">Qualquer endereço de tópico válido</span><span class="sxs-lookup"><span data-stu-id="e1368-314">Any valid topic address</span></span> |
| <span data-ttu-id="e1368-315">Enviar toohello tópico</span><span class="sxs-lookup"><span data-stu-id="e1368-315">Send toohello topic</span></span> |<span data-ttu-id="e1368-316">Enviar</span><span class="sxs-lookup"><span data-stu-id="e1368-316">Send</span></span> |<span data-ttu-id="e1368-317">Qualquer endereço de tópico válido</span><span class="sxs-lookup"><span data-stu-id="e1368-317">Any valid topic address</span></span> |
| <span data-ttu-id="e1368-318">**Assinatura**</span><span class="sxs-lookup"><span data-stu-id="e1368-318">**Subscription**</span></span> | | |
| <span data-ttu-id="e1368-319">Criar uma assinatura</span><span class="sxs-lookup"><span data-stu-id="e1368-319">Create a subscription</span></span> |<span data-ttu-id="e1368-320">Gerenciar</span><span class="sxs-lookup"><span data-stu-id="e1368-320">Manage</span></span> |<span data-ttu-id="e1368-321">Qualquer endereço de namespace</span><span class="sxs-lookup"><span data-stu-id="e1368-321">Any namespace address</span></span> |
| <span data-ttu-id="e1368-322">Excluir assinatura</span><span class="sxs-lookup"><span data-stu-id="e1368-322">Delete subscription</span></span> |<span data-ttu-id="e1368-323">Gerenciar</span><span class="sxs-lookup"><span data-stu-id="e1368-323">Manage</span></span> |<span data-ttu-id="e1368-324">../myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="e1368-324">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="e1368-325">Enumerar assinaturas</span><span class="sxs-lookup"><span data-stu-id="e1368-325">Enumerate subscriptions</span></span> |<span data-ttu-id="e1368-326">Gerenciar</span><span class="sxs-lookup"><span data-stu-id="e1368-326">Manage</span></span> |<span data-ttu-id="e1368-327">../myTopic/Subscriptions</span><span class="sxs-lookup"><span data-stu-id="e1368-327">../myTopic/Subscriptions</span></span> |
| <span data-ttu-id="e1368-328">Obter descrição da assinatura</span><span class="sxs-lookup"><span data-stu-id="e1368-328">Get subscription description</span></span> |<span data-ttu-id="e1368-329">Gerenciar</span><span class="sxs-lookup"><span data-stu-id="e1368-329">Manage</span></span> |<span data-ttu-id="e1368-330">../myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="e1368-330">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="e1368-331">Abandonar ou preencher as mensagens após o recebimento da mensagem de saudação no modo de bloqueio de inspeção</span><span class="sxs-lookup"><span data-stu-id="e1368-331">Abandon or complete messages after receiving hello message in peek-lock mode</span></span> |<span data-ttu-id="e1368-332">Escutar</span><span class="sxs-lookup"><span data-stu-id="e1368-332">Listen</span></span> |<span data-ttu-id="e1368-333">../myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="e1368-333">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="e1368-334">Adiar uma mensagem para recuperação posterior</span><span class="sxs-lookup"><span data-stu-id="e1368-334">Defer a message for later retrieval</span></span> |<span data-ttu-id="e1368-335">Escutar</span><span class="sxs-lookup"><span data-stu-id="e1368-335">Listen</span></span> |<span data-ttu-id="e1368-336">../myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="e1368-336">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="e1368-337">Colocar uma mensagem nas mensagens mortas</span><span class="sxs-lookup"><span data-stu-id="e1368-337">Deadletter a message</span></span> |<span data-ttu-id="e1368-338">Escutar</span><span class="sxs-lookup"><span data-stu-id="e1368-338">Listen</span></span> |<span data-ttu-id="e1368-339">../myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="e1368-339">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="e1368-340">Obter o estado de saudação associado a uma sessão do tópico</span><span class="sxs-lookup"><span data-stu-id="e1368-340">Get hello state associated with a topic session</span></span> |<span data-ttu-id="e1368-341">Escutar</span><span class="sxs-lookup"><span data-stu-id="e1368-341">Listen</span></span> |<span data-ttu-id="e1368-342">../myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="e1368-342">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="e1368-343">Definir estado de saudação associado a uma sessão do tópico</span><span class="sxs-lookup"><span data-stu-id="e1368-343">Set hello state associated with a topic session</span></span> |<span data-ttu-id="e1368-344">Escutar</span><span class="sxs-lookup"><span data-stu-id="e1368-344">Listen</span></span> |<span data-ttu-id="e1368-345">../myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="e1368-345">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="e1368-346">**Regras**</span><span class="sxs-lookup"><span data-stu-id="e1368-346">**Rules**</span></span> | | |
| <span data-ttu-id="e1368-347">Criar uma regra</span><span class="sxs-lookup"><span data-stu-id="e1368-347">Create a rule</span></span> |<span data-ttu-id="e1368-348">Gerenciar</span><span class="sxs-lookup"><span data-stu-id="e1368-348">Manage</span></span> |<span data-ttu-id="e1368-349">../myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="e1368-349">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="e1368-350">Excluir uma regra</span><span class="sxs-lookup"><span data-stu-id="e1368-350">Delete a rule</span></span> |<span data-ttu-id="e1368-351">Gerenciar</span><span class="sxs-lookup"><span data-stu-id="e1368-351">Manage</span></span> |<span data-ttu-id="e1368-352">../myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="e1368-352">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="e1368-353">Enumerar regras</span><span class="sxs-lookup"><span data-stu-id="e1368-353">Enumerate rules</span></span> |<span data-ttu-id="e1368-354">Gerenciar ou Escutar</span><span class="sxs-lookup"><span data-stu-id="e1368-354">Manage or Listen</span></span> |<span data-ttu-id="e1368-355">../myTopic/Subscriptions/mySubscription/Rules</span><span class="sxs-lookup"><span data-stu-id="e1368-355">../myTopic/Subscriptions/mySubscription/Rules</span></span> 

## <a name="next-steps"></a><span data-ttu-id="e1368-356">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="e1368-356">Next steps</span></span>

<span data-ttu-id="e1368-357">toolearn mais sobre o sistema de mensagens do barramento de serviço, consulte Olá tópicos a seguir.</span><span class="sxs-lookup"><span data-stu-id="e1368-357">toolearn more about Service Bus messaging, see hello following topics.</span></span>

* [<span data-ttu-id="e1368-358">Conceitos fundamentais do barramento de serviço</span><span class="sxs-lookup"><span data-stu-id="e1368-358">Service Bus fundamentals</span></span>](service-bus-fundamentals-hybrid-solutions.md)
* [<span data-ttu-id="e1368-359">Filas, tópicos e assinaturas do Barramento de Serviço</span><span class="sxs-lookup"><span data-stu-id="e1368-359">Service Bus queues, topics, and subscriptions</span></span>](service-bus-queues-topics-subscriptions.md)
* [<span data-ttu-id="e1368-360">Como as filas do barramento de serviço toouse</span><span class="sxs-lookup"><span data-stu-id="e1368-360">How toouse Service Bus queues</span></span>](service-bus-dotnet-get-started-with-queues.md)
* [<span data-ttu-id="e1368-361">Como toouse Service Bus tópicos e assinaturas</span><span class="sxs-lookup"><span data-stu-id="e1368-361">How toouse Service Bus topics and subscriptions</span></span>](service-bus-dotnet-how-to-use-topics-subscriptions.md)

[Azure portal]: https://portal.azure.com