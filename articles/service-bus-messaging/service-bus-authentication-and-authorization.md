---
title: "Autenticação e Autorização do Barramento de Serviço do Azure | Microsoft Docs"
description: "Autentique aplicativos no Barramento de Serviço com a autenticação SAS (Assinatura de Acesso Compartilhado)."
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 18bad0ed-1cee-4a5c-a377-facc4785c8c9
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/09/2017
ms.author: sethm
ms.openlocfilehash: 28fb41499c919e5006f1be7daa97610c2a0583af
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/18/2017
---
# <a name="service-bus-authentication-and-authorization"></a><span data-ttu-id="560ab-103">Autenticação e autorização do Barramento de Serviço</span><span class="sxs-lookup"><span data-stu-id="560ab-103">Service Bus authentication and authorization</span></span>

<span data-ttu-id="560ab-104">Os aplicativos podem se autenticar no Barramento de Serviço do Azure usando a autenticação SAS (Assinatura de Acesso Compartilhado).</span><span class="sxs-lookup"><span data-stu-id="560ab-104">Applications can authenticate to Azure Service Bus using Shared Access Signature (SAS) authentication.</span></span> <span data-ttu-id="560ab-105">A autenticação SAS permite que os aplicativos se autentiquem no Barramento de Serviço usando uma tecla de acesso configurada no namespace ou em uma entidade com a qual tenha direitos específicos associados.</span><span class="sxs-lookup"><span data-stu-id="560ab-105">Shared Access Signature authentication enables applications to authenticate to Service Bus using an access key configured on the namespace, or on the entity with which specific rights are associated.</span></span> <span data-ttu-id="560ab-106">Em seguida, você pode usar essa tecla para gerar um token SAS que os clientes podem usar para se autenticar no Barramento de Serviço.</span><span class="sxs-lookup"><span data-stu-id="560ab-106">You can then use this key to generate a Shared Access Signature token that clients can use to authenticate to Service Bus.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="560ab-107">Você deve usar a SAS em vez do Controle de Acesso do Azure Active Directory c(também conhecido como Serviço de Controle de Acesso ou ACS), já que o ACS está sendo preterido.</span><span class="sxs-lookup"><span data-stu-id="560ab-107">You should use SAS instead of Azure Active Directory Access Control (also known as Access Control Service or ACS), as ACS is being deprecated.</span></span> <span data-ttu-id="560ab-108">A SAS fornece um esquema de autenticação simples, flexível e fácil de usar para o Barramento de Serviço.</span><span class="sxs-lookup"><span data-stu-id="560ab-108">SAS provides a simple, flexible, and easy-to-use authentication scheme for Service Bus.</span></span> <span data-ttu-id="560ab-109">Os aplicativos podem usar SAS em cenários em que eles não precisam gerenciar a noção de um "usuário" autorizado.</span><span class="sxs-lookup"><span data-stu-id="560ab-109">Applications can use SAS in scenarios in which they do not need to manage the notion of an authorized "user."</span></span> <span data-ttu-id="560ab-110">Para saber mais, confira [esta postagem no blog](https://blogs.msdn.microsoft.com/servicebus/2017/06/01/upcoming-changes-to-acs-enabled-namespaces/).</span><span class="sxs-lookup"><span data-stu-id="560ab-110">For more information, see [this blog post](https://blogs.msdn.microsoft.com/servicebus/2017/06/01/upcoming-changes-to-acs-enabled-namespaces/).</span></span>

## <a name="shared-access-signature-authentication"></a><span data-ttu-id="560ab-111">Autenticação SAS</span><span class="sxs-lookup"><span data-stu-id="560ab-111">Shared Access Signature authentication</span></span>

<span data-ttu-id="560ab-112">[autenticação SAS](service-bus-sas.md) permite que você conceda a um usuário acesso a recursos de Barramento de Serviço com direitos específicos.</span><span class="sxs-lookup"><span data-stu-id="560ab-112">[SAS authentication](service-bus-sas.md) enables you to grant a user access to Service Bus resources with specific rights.</span></span> <span data-ttu-id="560ab-113">A autenticação SAS no Barramento de Serviço envolve a configuração de uma chave criptográfica com direitos associados em um recurso do Barramento de Serviço.</span><span class="sxs-lookup"><span data-stu-id="560ab-113">SAS authentication in Service Bus involves the configuration of a cryptographic key with associated rights on a Service Bus resource.</span></span> <span data-ttu-id="560ab-114">Os clientes podem obter acesso a esse recurso apresentando um token SAS que consiste em acessar o URI de recurso e assinar uma expiração com a tecla configurada.</span><span class="sxs-lookup"><span data-stu-id="560ab-114">Clients can then gain access to that resource by presenting a SAS token, which consists of the resource URI being accessed and an expiry signed with the configured key.</span></span>

<span data-ttu-id="560ab-115">É possível configurar chaves para SAS em um namespace do Barramento de Serviço.</span><span class="sxs-lookup"><span data-stu-id="560ab-115">You can configure keys for SAS on a Service Bus namespace.</span></span> <span data-ttu-id="560ab-116">A chave se aplica a todas as entidades de mensagens nesse namespace.</span><span class="sxs-lookup"><span data-stu-id="560ab-116">The key applies to all messaging entities in that namespace.</span></span> <span data-ttu-id="560ab-117">Também é possível configurar chaves em tópicos e filas do Barramento de Serviço.</span><span class="sxs-lookup"><span data-stu-id="560ab-117">You can also configure keys on Service Bus queues and topics.</span></span> <span data-ttu-id="560ab-118">Também há suporte para SAS na [Retransmissão do Azure](../service-bus-relay/relay-authentication-and-authorization.md).</span><span class="sxs-lookup"><span data-stu-id="560ab-118">SAS is also supported on [Azure Relay](../service-bus-relay/relay-authentication-and-authorization.md).</span></span>

<span data-ttu-id="560ab-119">Para usar a SAS, você pode configurar um objeto [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) em um namespace, uma fila ou um tópico.</span><span class="sxs-lookup"><span data-stu-id="560ab-119">To use SAS, you can configure a [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) object on a namespace, queue, or topic.</span></span> <span data-ttu-id="560ab-120">Essa regra consiste nos seguintes elementos:</span><span class="sxs-lookup"><span data-stu-id="560ab-120">This rule consists of the following elements:</span></span>

* <span data-ttu-id="560ab-121">*KeyName* , que identifica a regra.</span><span class="sxs-lookup"><span data-stu-id="560ab-121">*KeyName* that identifies the rule.</span></span>
* <span data-ttu-id="560ab-122">*PrimaryKey* , que é uma chave de criptografia usada para assinar/validar tokens SAS.</span><span class="sxs-lookup"><span data-stu-id="560ab-122">*PrimaryKey* is a cryptographic key used to sign/validate SAS tokens.</span></span>
* <span data-ttu-id="560ab-123">*SecondaryKey* , que é uma chave de criptografia usada para assinar/validar tokens SAS.</span><span class="sxs-lookup"><span data-stu-id="560ab-123">*SecondaryKey* is a cryptographic key used to sign/validate SAS tokens.</span></span>
* <span data-ttu-id="560ab-124">*Direitos* , que representa a coleção de direitos de Escuta, Envio ou Gerenciamento concedidos.</span><span class="sxs-lookup"><span data-stu-id="560ab-124">*Rights* representing the collection of Listen, Send, or Manage rights granted.</span></span>

<span data-ttu-id="560ab-125">As regras de autorização configuradas no nível de namespace podem conceder acesso a todas as entidades em um namespace para clientes com tokens assinados usando a tecla correspondente.</span><span class="sxs-lookup"><span data-stu-id="560ab-125">Authorization rules configured at the namespace level can grant access to all entities in a namespace for clients with tokens signed using the corresponding key.</span></span> <span data-ttu-id="560ab-126">Até 12 regras de autorização podem ser configuradas em um namespace, fila ou tópico do Barramento de Serviço.</span><span class="sxs-lookup"><span data-stu-id="560ab-126">Up to 12 such authorization rules can be configured on a Service Bus namespace, queue, or topic.</span></span> <span data-ttu-id="560ab-127">Por padrão, uma [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) com todos os direitos é configurada para cada namespace quando ele é provisionado pela primeira vez.</span><span class="sxs-lookup"><span data-stu-id="560ab-127">By default, a [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) with all rights is configured for every namespace when it is first provisioned.</span></span>

<span data-ttu-id="560ab-128">Para acessar uma entidade, o cliente requer um token SAS gerado usando uma determinada [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule).</span><span class="sxs-lookup"><span data-stu-id="560ab-128">To access an entity, the client requires a SAS token generated using a specific [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule).</span></span> <span data-ttu-id="560ab-129">O token SAS é gerado usando o HMAC-SHA256 de uma cadeia de caracteres de recurso que consiste no URI de recurso ao qual o acesso é solicitado e em uma expiração com uma chave criptográfica associada à regra de autorização.</span><span class="sxs-lookup"><span data-stu-id="560ab-129">The SAS token is generated using the HMAC-SHA256 of a resource string that consists of the resource URI to which access is claimed, and an expiry with a cryptographic key associated with the authorization rule.</span></span>

<span data-ttu-id="560ab-130">O suporte à autenticação SAS para o Barramento de Serviço está incluído no .NET SDK do Azure versão 2.0 e posterior.</span><span class="sxs-lookup"><span data-stu-id="560ab-130">SAS authentication support for Service Bus is included in the Azure .NET SDK versions 2.0 and later.</span></span> <span data-ttu-id="560ab-131">A SAS dá suporte a uma [SharedAccessAuthorizationRule](https://docs.microsoft.com/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule).</span><span class="sxs-lookup"><span data-stu-id="560ab-131">SAS includes support for a [SharedAccessAuthorizationRule](https://docs.microsoft.com/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule).</span></span> <span data-ttu-id="560ab-132">Todas as APIs que aceitam uma cadeia de conexão como parâmetro incluem suporte para cadeias de conexão SAS.</span><span class="sxs-lookup"><span data-stu-id="560ab-132">All APIs that accept a connection string as a parameter include support for SAS connection strings.</span></span>

## <a name="next-steps"></a><span data-ttu-id="560ab-133">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="560ab-133">Next steps</span></span>

- <span data-ttu-id="560ab-134">Continue lendo [Autenticação de Barramento de Serviço com Assinaturas de Acesso Compartilhado](service-bus-sas.md) para obter mais detalhes sobre SAS.</span><span class="sxs-lookup"><span data-stu-id="560ab-134">Continue reading [Service Bus authentication with Shared Access Signatures](service-bus-sas.md) for more details about SAS.</span></span>
- [<span data-ttu-id="560ab-135">Alterações em namespaces habilitados para ACS.</span><span class="sxs-lookup"><span data-stu-id="560ab-135">Changes To ACS Enabled namespaces.</span></span>](https://blogs.msdn.microsoft.com/servicebus/2017/06/01/upcoming-changes-to-acs-enabled-namespaces/)
- <span data-ttu-id="560ab-136">Para informações correspondentes sobre a autenticação e autorização da Retransmissão do Azure, confira [Autenticação e autorização da Retransmissão do Azure](../service-bus-relay/relay-authentication-and-authorization.md).</span><span class="sxs-lookup"><span data-stu-id="560ab-136">For corresponding information about Azure Relay authentication and authorization, see [Azure Relay authentication and authorization](../service-bus-relay/relay-authentication-and-authorization.md).</span></span> 

