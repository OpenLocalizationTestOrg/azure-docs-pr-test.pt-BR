---
title: "Visão geral da arquitetura de processamento de mensagens de barramento de serviço de aaaAzure | Microsoft Docs"
description: "Descreve a arquitetura de processamento de mensagem de saudação do barramento de serviço do Azure."
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: baf94c2d-0e58-4d5d-a588-767f996ccf7f
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/23/2017
ms.author: sethm
ms.openlocfilehash: f7606e40cdf6db3797a0db2de9365453ff2a158e
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="service-bus-architecture"></a><span data-ttu-id="3a46f-103">Arquitetura do Barramento de Serviço</span><span class="sxs-lookup"><span data-stu-id="3a46f-103">Service Bus architecture</span></span>
<span data-ttu-id="3a46f-104">Este artigo descreve a arquitetura de processamento de mensagem de saudação do barramento de serviço do Azure.</span><span class="sxs-lookup"><span data-stu-id="3a46f-104">This article describes hello message processing architecture of Azure Service Bus.</span></span>

## <a name="service-bus-scale-units"></a><span data-ttu-id="3a46f-105">Unidades de escala do Barramento de Serviço</span><span class="sxs-lookup"><span data-stu-id="3a46f-105">Service Bus scale units</span></span>
<span data-ttu-id="3a46f-106">O Barramento de Serviço é organizado por *unidades de escala*.</span><span class="sxs-lookup"><span data-stu-id="3a46f-106">Service Bus is organized by *scale units*.</span></span> <span data-ttu-id="3a46f-107">Uma unidade de escala é uma unidade de implantação e contém todas as componentes necessários Olá execução de serviço.</span><span class="sxs-lookup"><span data-stu-id="3a46f-107">A scale unit is a unit of deployment and contains all components required run hello service.</span></span> <span data-ttu-id="3a46f-108">Cada região implanta uma ou mais unidades de escala do Barramento de Serviço.</span><span class="sxs-lookup"><span data-stu-id="3a46f-108">Each region deploys one or more Service Bus scale units.</span></span>

<span data-ttu-id="3a46f-109">Um namespace de barramento de serviço é a unidade de escala de tooa mapeada.</span><span class="sxs-lookup"><span data-stu-id="3a46f-109">A Service Bus namespace is mapped tooa scale unit.</span></span> <span data-ttu-id="3a46f-110">unidade de escala Olá trata todos os tipos de entidades do Service Bus (filas, tópicos, assinaturas).</span><span class="sxs-lookup"><span data-stu-id="3a46f-110">hello scale unit handles all types of Service Bus entities (queues, topics, subscriptions).</span></span> <span data-ttu-id="3a46f-111">Uma unidade de escala de barramento de serviço consiste em Olá componentes a seguir:</span><span class="sxs-lookup"><span data-stu-id="3a46f-111">A Service Bus scale unit consists of hello following components:</span></span>

* <span data-ttu-id="3a46f-112">**Um conjunto de nós de gateway.**</span><span class="sxs-lookup"><span data-stu-id="3a46f-112">**A set of gateway nodes.**</span></span> <span data-ttu-id="3a46f-113">Os nós de gateway autenticam solicitações de entrada.</span><span class="sxs-lookup"><span data-stu-id="3a46f-113">Gateway nodes authenticate incoming requests.</span></span> <span data-ttu-id="3a46f-114">Cada nó de gateway tem um endereço IP público.</span><span class="sxs-lookup"><span data-stu-id="3a46f-114">Each gateway node has a public IP address.</span></span>
* <span data-ttu-id="3a46f-115">**Um conjunto de nós do agente de mensagens.**</span><span class="sxs-lookup"><span data-stu-id="3a46f-115">**A set of messaging broker nodes.**</span></span> <span data-ttu-id="3a46f-116">Os nós do agente de mensagens processam solicitações referentes às entidades de mensagens.</span><span class="sxs-lookup"><span data-stu-id="3a46f-116">Messaging broker nodes process requests concerning messaging entities.</span></span>
* <span data-ttu-id="3a46f-117">**Um repositório de gateway.**</span><span class="sxs-lookup"><span data-stu-id="3a46f-117">**One gateway store.**</span></span> <span data-ttu-id="3a46f-118">repositório de gateway Olá contém os dados de saudação para cada entidade definida nesta unidade de escala.</span><span class="sxs-lookup"><span data-stu-id="3a46f-118">hello gateway store holds hello data for every entity that is defined in this scale unit.</span></span> <span data-ttu-id="3a46f-119">armazenamento de gateway de saudação é implementado na parte superior de um banco de dados do SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="3a46f-119">hello gateway store is implemented on top of a SQL Azure database.</span></span>
* <span data-ttu-id="3a46f-120">**Múltiplos repositórios de mensagens.**</span><span class="sxs-lookup"><span data-stu-id="3a46f-120">**Multiple messaging stores.**</span></span> <span data-ttu-id="3a46f-121">Repositórios de mensagens guardar mensagens de saudação de todas as filas, tópicos e assinaturas que são definidas nesta unidade de escala.</span><span class="sxs-lookup"><span data-stu-id="3a46f-121">Messaging stores hold hello messages of all queues, topics and subscriptions that are defined in this scale unit.</span></span> <span data-ttu-id="3a46f-122">Eles também contêm todos os dados de assinatura.</span><span class="sxs-lookup"><span data-stu-id="3a46f-122">It also contains all subscription data.</span></span> <span data-ttu-id="3a46f-123">A menos que [particionando entidades de mensagens](service-bus-partitioning.md) está habilitado, uma fila ou tópico é o repositório de mensagens tooone mapeada.</span><span class="sxs-lookup"><span data-stu-id="3a46f-123">Unless [partitioning messaging entities](service-bus-partitioning.md) is enabled, a queue or topic is mapped tooone messaging store.</span></span> <span data-ttu-id="3a46f-124">As assinaturas são armazenadas no hello mesmo repositório de mensagens como seu tópico pai.</span><span class="sxs-lookup"><span data-stu-id="3a46f-124">Subscriptions are stored in hello same messaging store as their parent topic.</span></span> <span data-ttu-id="3a46f-125">Exceto para o barramento de serviço [sistema de mensagens Premium](service-bus-premium-messaging.md), repositórios de mensagens de saudação são implementados sobre bancos de dados do SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="3a46f-125">Except for Service Bus [Premium Messaging](service-bus-premium-messaging.md), hello messaging stores are implemented on top of SQL Azure databases.</span></span>

## <a name="containers"></a><span data-ttu-id="3a46f-126">Contêineres</span><span class="sxs-lookup"><span data-stu-id="3a46f-126">Containers</span></span>
<span data-ttu-id="3a46f-127">Cada entidade de mensagens é atribuída a um contêiner específico.</span><span class="sxs-lookup"><span data-stu-id="3a46f-127">Each messaging entity is assigned a specific container.</span></span> <span data-ttu-id="3a46f-128">Um contêiner é um constructo lógico que usa exatamente um toostore mensagens do repositório de dados relevantes para esse contêiner.</span><span class="sxs-lookup"><span data-stu-id="3a46f-128">A container is a logical construct that uses exactly one messaging store toostore all relevant data for this container.</span></span> <span data-ttu-id="3a46f-129">Cada contêiner é atribuído tooa nó do agente de mensagens.</span><span class="sxs-lookup"><span data-stu-id="3a46f-129">Each container is assigned tooa messaging broker node.</span></span> <span data-ttu-id="3a46f-130">Normalmente, há mais contêineres que nós do agente de mensagens.</span><span class="sxs-lookup"><span data-stu-id="3a46f-130">Typically, there are more containers than messaging broker nodes.</span></span> <span data-ttu-id="3a46f-131">Portanto, cada nó do agente de mensagens carrega diversos contêineres.</span><span class="sxs-lookup"><span data-stu-id="3a46f-131">Therefore, each messaging broker node loads multiple containers.</span></span> <span data-ttu-id="3a46f-132">distribuição de saudação do nó do agente contêineres tooa mensagens é organizada de modo que todos os nós de broker mensagens são igualmente carregados.</span><span class="sxs-lookup"><span data-stu-id="3a46f-132">hello distribution of containers tooa messaging broker node is organized such that all messaging broker nodes are equally loaded.</span></span> <span data-ttu-id="3a46f-133">Se alterações de padrão de carga hello (por exemplo, uma saudação contêineres obtém muito ocupado) ou se um nó do agente de mensagens fica temporariamente indisponível, Olá contêineres são redistribuídos entre nós do agente de mensagens de saudação.</span><span class="sxs-lookup"><span data-stu-id="3a46f-133">If hello load pattern changes (for example, one of hello containers gets very busy), or if a messaging broker node becomes temporarily unavailable, hello containers are redistributed among hello messaging broker nodes.</span></span>

## <a name="processing-of-incoming-messaging-requests"></a><span data-ttu-id="3a46f-134">Processamento de mensagens de solicitações de entrada</span><span class="sxs-lookup"><span data-stu-id="3a46f-134">Processing of incoming messaging requests</span></span>
<span data-ttu-id="3a46f-135">Quando um cliente envia uma solicitação tooService barramento, balanceador de carga do Azure Olá encaminha tooany de nós de gateway hello.</span><span class="sxs-lookup"><span data-stu-id="3a46f-135">When a client sends a request tooService Bus, hello Azure load balancer routes it tooany of hello gateway nodes.</span></span> <span data-ttu-id="3a46f-136">nó de gateway Olá autoriza a solicitação de saudação.</span><span class="sxs-lookup"><span data-stu-id="3a46f-136">hello gateway node authorizes hello request.</span></span> <span data-ttu-id="3a46f-137">Se a solicitação de saudação se refere a uma entidade de mensagens (fila, tópico, assinatura), o nó de gateway de Olá procura entidade Olá no repositório de gateway hello e determina em qual saudação do repositório de mensagens entidade está localizada.</span><span class="sxs-lookup"><span data-stu-id="3a46f-137">If hello request concerns a messaging entity (queue, topic, subscription), hello gateway node looks up hello entity in hello gateway store and determines in which messaging store hello entity is located.</span></span> <span data-ttu-id="3a46f-138">Em seguida, pesquisa a qual nó broker mensagens atualmente está servindo a esse contêiner e envia Olá solicitação toothat nó do agente de mensagens.</span><span class="sxs-lookup"><span data-stu-id="3a46f-138">It then looks up which messaging broker node is currently servicing this container, and sends hello request toothat messaging broker node.</span></span> <span data-ttu-id="3a46f-139">nó do agente de mensagens de saudação processa a solicitação de saudação e atualiza o estado da entidade Olá no repositório de contêiner de saudação.</span><span class="sxs-lookup"><span data-stu-id="3a46f-139">hello messaging broker node processes hello request and updates hello entity state in hello container store.</span></span> <span data-ttu-id="3a46f-140">Olá, em seguida, o nó do agente de mensagens envia Olá resposta toohello back gateway nó, que envia um resposta apropriada ao cliente toohello back solicitação original Olá emitidos.</span><span class="sxs-lookup"><span data-stu-id="3a46f-140">hello messaging broker node then sends hello response back toohello gateway node, which sends an appropriate response back toohello client that issued hello original request.</span></span>

![Processamento de mensagens de solicitações de entrada](./media/service-bus-architecture/ic690644.png)

## <a name="next-steps"></a><span data-ttu-id="3a46f-142">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="3a46f-142">Next steps</span></span>
<span data-ttu-id="3a46f-143">Agora que você leu uma visão geral da arquitetura do barramento de serviço, visite Olá links para obter mais informações a seguir:</span><span class="sxs-lookup"><span data-stu-id="3a46f-143">Now that you've read an overview of Service Bus architecture, visit hello following links for more information:</span></span>

* [<span data-ttu-id="3a46f-144">Visão geral de mensagens do Barramento de Serviço</span><span class="sxs-lookup"><span data-stu-id="3a46f-144">Service Bus messaging overview</span></span>](service-bus-messaging-overview.md)
* [<span data-ttu-id="3a46f-145">Conceitos fundamentais do barramento de serviço</span><span class="sxs-lookup"><span data-stu-id="3a46f-145">Service Bus fundamentals</span></span>](service-bus-fundamentals-hybrid-solutions.md)
* [<span data-ttu-id="3a46f-146">Uma solução de mensagens na fila usando filas do Barramento de Serviço</span><span class="sxs-lookup"><span data-stu-id="3a46f-146">A queued messaging solution using Service Bus queues</span></span>](service-bus-dotnet-multi-tier-app-using-service-bus-queues.md)


