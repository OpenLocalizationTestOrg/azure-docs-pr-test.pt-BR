---
title: "aaaDesign considerações para conjuntos de escala de máquina Virtual do Azure | Microsoft Docs"
description: "Aprenda sobre considerações de design para seus conjuntos de dimensionamento de máquinas virtuais do Azure"
keywords: "máquina virtual linux, conjuntos de dimensionamento de máquina virtual"
services: virtual-machine-scale-sets
documentationcenter: 
author: gatneil
manager: madhana
editor: tysonn
tags: azure-resource-manager
ms.assetid: c27c6a59-a0ab-4117-a01b-42b049464ca1
ms.service: virtual-machine-scale-sets
ms.workload: na
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 06/01/2017
ms.author: negat
ms.openlocfilehash: f8644d36fe5903bd4b74df26dca5dc3211ee3516
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="design-considerations-for-scale-sets"></a><span data-ttu-id="e7c72-104">Considerações de design para conjuntos de dimensionamento</span><span class="sxs-lookup"><span data-stu-id="e7c72-104">Design Considerations For Scale Sets</span></span>
<span data-ttu-id="e7c72-105">Este tópico discute considerações de design para Conjuntos de Escala de Máquina Virtual.</span><span class="sxs-lookup"><span data-stu-id="e7c72-105">This topic discusses design considerations for Virtual Machine Scale Sets.</span></span> <span data-ttu-id="e7c72-106">Para obter informações sobre o que são conjuntos de escala de máquina Virtual, consulte muito[visão geral de conjuntos de escala de máquina Virtual](virtual-machine-scale-sets-overview.md).</span><span class="sxs-lookup"><span data-stu-id="e7c72-106">For information about what Virtual Machine Scale Sets are, refer too[Virtual Machine Scale Sets Overview](virtual-machine-scale-sets-overview.md).</span></span>

## <a name="when-toouse-scale-sets-instead-of-virtual-machines"></a><span data-ttu-id="e7c72-107">Quando a escala toouse define, em vez de máquinas virtuais?</span><span class="sxs-lookup"><span data-stu-id="e7c72-107">When toouse scale sets instead of virtual machines?</span></span>
<span data-ttu-id="e7c72-108">Em geral, os conjuntos de dimensionamento são úteis para implantar a infraestrutura altamente disponível em que um conjunto de computadores têm configuração semelhante.</span><span class="sxs-lookup"><span data-stu-id="e7c72-108">Generally, scale sets are useful for deploying highly available infrastructure where a set of machines have similar configuration.</span></span> <span data-ttu-id="e7c72-109">No entanto, alguns recursos só estão disponíveis em conjuntos de dimensionamento, enquanto outros recursos só estão disponíveis em VMs.</span><span class="sxs-lookup"><span data-stu-id="e7c72-109">However, some features are only available in scale sets while other features are only available in VMs.</span></span> <span data-ttu-id="e7c72-110">Em ordem toomake uma decisão informada sobre quando toouse cada tecnologia, vamos primeiro deve dar uma olhada alguns dos recursos de saudação usado que estão disponíveis em conjuntos de escala, mas não as VMs:</span><span class="sxs-lookup"><span data-stu-id="e7c72-110">In order toomake an informed decision about when toouse each technology, we should first take a look at some of hello commonly used features that are available in scale sets but not VMs:</span></span>

### <a name="scale-set-specific-features"></a><span data-ttu-id="e7c72-111">Recursos específicos de conjunto de dimensionamento</span><span class="sxs-lookup"><span data-stu-id="e7c72-111">Scale set-specific features</span></span>

- <span data-ttu-id="e7c72-112">Depois que você especificar a configuração do conjunto de escala hello, você pode simplesmente atualizar hello "capacidade" propriedade toodeploy mais VMs em paralelo.</span><span class="sxs-lookup"><span data-stu-id="e7c72-112">Once you specify hello scale set configuration, you can simply update hello "capacity" property toodeploy more VMs in parallel.</span></span> <span data-ttu-id="e7c72-113">Isso é muito mais simples do que escrever um tooorchestrate script Implantando várias VMs individuais em paralelo.</span><span class="sxs-lookup"><span data-stu-id="e7c72-113">This is much simpler than writing a script tooorchestrate deploying many individual VMs in parallel.</span></span>
- <span data-ttu-id="e7c72-114">Você pode [uso do Azure AutoEscala tooautomatically dimensionar um conjunto de escala](./virtual-machine-scale-sets-autoscale-overview.md) mas VMs não individuais.</span><span class="sxs-lookup"><span data-stu-id="e7c72-114">You can [use Azure Autoscale tooautomatically scale a scale set](./virtual-machine-scale-sets-autoscale-overview.md) but not individual VMs.</span></span>
- <span data-ttu-id="e7c72-115">Você pode [refazer a imagem de VMs de conjunto de dimensionamento](https://docs.microsoft.com/rest/api/virtualmachinescalesets/manage-a-vm), mas [não de VMs individuais](https://docs.microsoft.com/rest/api/compute/virtualmachines).</span><span class="sxs-lookup"><span data-stu-id="e7c72-115">You can [reimage scale set VMs](https://docs.microsoft.com/rest/api/virtualmachinescalesets/manage-a-vm) but [not individual VMs](https://docs.microsoft.com/rest/api/compute/virtualmachines).</span></span>
- <span data-ttu-id="e7c72-116">Você pode [superprovisionar](./virtual-machine-scale-sets-design-overview.md) VMs de conjunto de dimensionamento maior confiabilidade e tempos de implantação mais rápidos.</span><span class="sxs-lookup"><span data-stu-id="e7c72-116">You can [overprovision](./virtual-machine-scale-sets-design-overview.md) scale set VMs for increased reliability and quicker deployment times.</span></span> <span data-ttu-id="e7c72-117">Você não pode fazer isso com VMs individuais, a menos que você escrever código personalizado toodo isso.</span><span class="sxs-lookup"><span data-stu-id="e7c72-117">You cannot do this with individual VMs unless you write custom code toodo this.</span></span>
- <span data-ttu-id="e7c72-118">Você pode especificar um [atualizar política](./virtual-machine-scale-sets-upgrade-scale-set.md) toomake-tooroll fácil atualizações entre VMs em seu conjunto de escala.</span><span class="sxs-lookup"><span data-stu-id="e7c72-118">You can specify an [upgrade policy](./virtual-machine-scale-sets-upgrade-scale-set.md) toomake it easy tooroll out upgrades across VMs in your scale set.</span></span> <span data-ttu-id="e7c72-119">Com VMs individuais, você mesmo deve organizar as atualizações.</span><span class="sxs-lookup"><span data-stu-id="e7c72-119">With individual VMs, you must orchestrate updates yourself.</span></span>

### <a name="vm-specific-features"></a><span data-ttu-id="e7c72-120">Recursos específicos de VM</span><span class="sxs-lookup"><span data-stu-id="e7c72-120">VM-specific features</span></span>

<span data-ttu-id="e7c72-121">Em Olá outro lado, alguns recursos só estão disponíveis em máquinas virtuais (pelo menos do que está sendo Olá tempo):</span><span class="sxs-lookup"><span data-stu-id="e7c72-121">On hello other hand, some features are only available in VMs (at least for hello time being):</span></span>

- <span data-ttu-id="e7c72-122">Você pode anexar dados discos toospecific VMs individuais, mas os discos de dados anexados são configurados para todas as VMs em um conjunto de escala.</span><span class="sxs-lookup"><span data-stu-id="e7c72-122">You can attach data disks toospecific individual VMs, but attached data disks are configured for all VMs in a scale set.</span></span>
- <span data-ttu-id="e7c72-123">Você pode anexar discos de dados não vazio tooindividual VMs, mas não as VMs em um conjunto de escala.</span><span class="sxs-lookup"><span data-stu-id="e7c72-123">You can attach non-empty data disks tooindividual VMs but not VMs in a scale set.</span></span>
- <span data-ttu-id="e7c72-124">Você pode fazer um instantâneo de uma VM individual, mas não de uma VM em um conjunto de dimensionamento.</span><span class="sxs-lookup"><span data-stu-id="e7c72-124">You can snapshot an individual VM but not a VM in a scale set.</span></span>
- <span data-ttu-id="e7c72-125">Você pode capturar uma imagem de uma VM individual, mas não de uma VM em um conjunto de dimensionamento.</span><span class="sxs-lookup"><span data-stu-id="e7c72-125">You can capture an image from an individual VM but not from a VM in a scale set.</span></span>
- <span data-ttu-id="e7c72-126">Você pode migrar uma VM individual de discos de toomanaged discos nativos, mas você não pode fazer isso para VMs em um conjunto de escala.</span><span class="sxs-lookup"><span data-stu-id="e7c72-126">You can migrate an individual VM from native disks toomanaged disks, but you cannot do this for VMs in a scale set.</span></span>
- <span data-ttu-id="e7c72-127">Você pode atribuir endereços IP públicos de IPv6 tooindividual nics VM, mas não é possível fazer isso para VMs em um conjunto de escala.</span><span class="sxs-lookup"><span data-stu-id="e7c72-127">You can assign IPv6 public IP addresses tooindividual VM nics but cannot do so for VMs in a scale set.</span></span> <span data-ttu-id="e7c72-128">Observe que você pode atribuir endereços IP públicos de IPv6 balanceadores tooload na frente de qualquer VMs individuais ou conjunto de escala de máquinas virtuais.</span><span class="sxs-lookup"><span data-stu-id="e7c72-128">Note that you can assign IPv6 public IP addresses tooload balancers in front of either individual VMs or scale set VMs.</span></span>

## <a name="storage"></a><span data-ttu-id="e7c72-129">Armazenamento</span><span class="sxs-lookup"><span data-stu-id="e7c72-129">Storage</span></span>

### <a name="scale-sets-with-azure-managed-disks"></a><span data-ttu-id="e7c72-130">Conjuntos de dimensionamento com Azure Managed Disks</span><span class="sxs-lookup"><span data-stu-id="e7c72-130">Scale sets with Azure Managed Disks</span></span>
<span data-ttu-id="e7c72-131">Conjuntos de dimensionamento podem ser criados com [Azure Managed Disks](../virtual-machines/windows/managed-disks-overview.md), em vez de contas de armazenamento do Azure tradicionais.</span><span class="sxs-lookup"><span data-stu-id="e7c72-131">Scale sets can be created with [Azure Managed Disks](../virtual-machines/windows/managed-disks-overview.md) instead of traditional Azure storage accounts.</span></span> <span data-ttu-id="e7c72-132">Discos gerenciados fornecem Olá benefícios a seguir:</span><span class="sxs-lookup"><span data-stu-id="e7c72-132">Managed Disks provide hello following benefits:</span></span>
- <span data-ttu-id="e7c72-133">Você não tem toopre-criar um conjunto de contas de armazenamento do Azure para VMs do conjunto de escala de saudação.</span><span class="sxs-lookup"><span data-stu-id="e7c72-133">You do not have toopre-create a set of Azure storage accounts for hello scale set VMs.</span></span>
- <span data-ttu-id="e7c72-134">Você pode definir [discos de dados conectados](virtual-machine-scale-sets-attached-disks.md) para Olá VMs em sua escala definida.</span><span class="sxs-lookup"><span data-stu-id="e7c72-134">You can define [attached data disks](virtual-machine-scale-sets-attached-disks.md) for hello VMs in your scale set.</span></span>
- <span data-ttu-id="e7c72-135">Conjuntos de escala podem ser configurados de maneira muito[oferecem suporte a too1, 000 VMs em um conjunto de](virtual-machine-scale-sets-placement-groups.md).</span><span class="sxs-lookup"><span data-stu-id="e7c72-135">Scale sets can be configured too[support up too1,000 VMs in a set](virtual-machine-scale-sets-placement-groups.md).</span></span> 

<span data-ttu-id="e7c72-136">Se você tiver um modelo existente, você também pode [atualizar Olá modelo toouse discos gerenciado](virtual-machine-scale-sets-convert-template-to-md.md).</span><span class="sxs-lookup"><span data-stu-id="e7c72-136">If you have an existing template, you can also [update hello template toouse Managed Disks](virtual-machine-scale-sets-convert-template-to-md.md).</span></span>

### <a name="user-managed-storage"></a><span data-ttu-id="e7c72-137">Armazenamento gerenciado pelo usuário</span><span class="sxs-lookup"><span data-stu-id="e7c72-137">User-managed Storage</span></span>
<span data-ttu-id="e7c72-138">Um conjunto de escala que não está definido com discos gerenciado do Azure depende de discos de SO armazenamento criado pelo usuário contas toostore Olá Olá VMs no conjunto de saudação.</span><span class="sxs-lookup"><span data-stu-id="e7c72-138">A scale set that is not defined with Azure Managed Disks relies on user-created storage accounts toostore hello OS disks of hello VMs in hello set.</span></span> <span data-ttu-id="e7c72-139">Uma proporção de 20 VMs por conta de armazenamento ou menos é recomendada e/s máxima de tooachieve e também tirar proveito do _superprovisionamento_ (veja abaixo).</span><span class="sxs-lookup"><span data-stu-id="e7c72-139">A ratio of 20 VMs per storage account or less is recommended tooachieve maximum IO and also take advantage of _overprovisioning_ (see below).</span></span> <span data-ttu-id="e7c72-140">Também é recomendável que você espalhados caracteres iniciais de saudação de nomes de conta de armazenamento Olá alfabeto hello.</span><span class="sxs-lookup"><span data-stu-id="e7c72-140">It is also recommended that you spread hello beginning characters of hello storage account names across hello alphabet.</span></span> <span data-ttu-id="e7c72-141">Isso ajuda a distribuir a carga entre diferentes sistemas internos.</span><span class="sxs-lookup"><span data-stu-id="e7c72-141">Doing so helps spread load across different internal systems.</span></span> 


## <a name="overprovisioning"></a><span data-ttu-id="e7c72-142">Provisionamento em excesso</span><span class="sxs-lookup"><span data-stu-id="e7c72-142">Overprovisioning</span></span>
<span data-ttu-id="e7c72-143">Escala define atualmente padrão muito "excesso de provisionamento" VMs.</span><span class="sxs-lookup"><span data-stu-id="e7c72-143">Scale sets currently default too"overprovisioning" VMs.</span></span> <span data-ttu-id="e7c72-144">Com excesso de provisionamento ativado, escala de saudação definido realmente gira mais máquinas virtuais que você solicitou, exclui Olá VMs adicionais depois de saudação solicitou o número de VMs com êxito são provisionadas.</span><span class="sxs-lookup"><span data-stu-id="e7c72-144">With overprovisioning turned on, hello scale set actually spins up more VMs than you asked for, then deletes hello extra VMs once hello requested number of VMs are successfully provisioned.</span></span> <span data-ttu-id="e7c72-145">O provisionamento em excesso melhora as taxas de sucesso do provisionamento e reduz o tempo de implantação.</span><span class="sxs-lookup"><span data-stu-id="e7c72-145">Overprovisioning improves provisioning success rates and reduces deployment time.</span></span> <span data-ttu-id="e7c72-146">Você não será cobrado para hello VMs adicionais e eles não são contadas seus limites de cota.</span><span class="sxs-lookup"><span data-stu-id="e7c72-146">You are not billed for hello extra VMs, and they do not count toward your quota limits.</span></span>

<span data-ttu-id="e7c72-147">Excesso de provisionamento de melhorar as taxas de sucesso de provisionamento, ele pode causar confusão no comportamento de um aplicativo que é projetado não toohandle VMs adicionais que aparece e, em seguida, desaparece.</span><span class="sxs-lookup"><span data-stu-id="e7c72-147">While overprovisioning does improve provisioning success rates, it can cause confusing behavior for an application that is not designed toohandle extra VMs appearing and then disappearing.</span></span> <span data-ttu-id="e7c72-148">tooturn excesso de provisionamento, certifique-se de ter Olá cadeia de caracteres no modelo a seguir: `"overprovision": "false"`.</span><span class="sxs-lookup"><span data-stu-id="e7c72-148">tooturn overprovisioning off, ensure you have hello following string in your template: `"overprovision": "false"`.</span></span> <span data-ttu-id="e7c72-149">Mais detalhes podem ser encontrados no hello [documentação da API de REST de conjunto de escala](/rest/api/virtualmachinescalesets/create-or-update-a-set).</span><span class="sxs-lookup"><span data-stu-id="e7c72-149">More details can be found in hello [Scale Set REST API documentation](/rest/api/virtualmachinescalesets/create-or-update-a-set).</span></span>

<span data-ttu-id="e7c72-150">Se seu conjunto de escala usa armazenamento gerenciada pelo usuário, e você desativar excesso de provisionamento, você pode ter mais de 20 VMs por conta de armazenamento, mas não é recomendável toogo acima 40 por motivos de desempenho de e/s.</span><span class="sxs-lookup"><span data-stu-id="e7c72-150">If your scale set uses user-managed storage, and you turn off overprovisioning, you can have more than 20 VMs per storage account, but it is not recommended toogo above 40 for IO performance reasons.</span></span> 

## <a name="limits"></a><span data-ttu-id="e7c72-151">limites</span><span class="sxs-lookup"><span data-stu-id="e7c72-151">Limits</span></span>
<span data-ttu-id="e7c72-152">Um conjunto de escala criada em uma imagem do Marketplace (também conhecido como uma imagem de plataforma) e configurada toouse discos gerenciado do Azure oferece suporte a uma capacidade de backup too1, 000 VMs.</span><span class="sxs-lookup"><span data-stu-id="e7c72-152">A scale set built on a Marketplace image (also known as a platform image) and configured toouse Azure Managed Disks supports a capacity of up too1,000 VMs.</span></span> <span data-ttu-id="e7c72-153">Se você configurar sua toosupport de conjunto de escala mais de 100 VMs, não todo o trabalho de cenários Olá mesmo (por exemplo balanceamento de carga).</span><span class="sxs-lookup"><span data-stu-id="e7c72-153">If you configure your scale set toosupport more than 100 VMs, not all scenarios work hello same (for example load balancing).</span></span> <span data-ttu-id="e7c72-154">Para obter mais informações, confira [Como trabalhar com conjuntos de dimensionamento grandes de máquinas virtuais](virtual-machine-scale-sets-placement-groups.md).</span><span class="sxs-lookup"><span data-stu-id="e7c72-154">For more information, see [Working with large virtual machine scale sets](virtual-machine-scale-sets-placement-groups.md).</span></span> 

<span data-ttu-id="e7c72-155">Escala de um conjunto configurada com contas de armazenamento gerenciada pelo usuário é atualmente limitada too100 VMs (e 5 contas de armazenamento são recomendadas para essa escala).</span><span class="sxs-lookup"><span data-stu-id="e7c72-155">A scale set configured with user-managed storage accounts is currently limited too100 VMs (and 5 storage accounts are recommended for this scale).</span></span>

<span data-ttu-id="e7c72-156">Um conjunto de escala criado em uma imagem personalizada (um criado por você) pode ter a capacidade de máquinas virtuais de too100 quando configurado com discos gerenciado do Azure.</span><span class="sxs-lookup"><span data-stu-id="e7c72-156">A scale set built on a custom image (one built by you) can have a capacity of up too100 VMs when configured with Azure Managed disks.</span></span> <span data-ttu-id="e7c72-157">Se o conjunto de escala hello está configurado com contas de armazenamento gerenciada pelo usuário, ele deve criar todos os VHDs de disco do sistema operacional em uma conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="e7c72-157">If hello scale set is configured with user-managed storage accounts, it must create all OS disk VHDs within one storage account.</span></span> <span data-ttu-id="e7c72-158">Como resultado, o máximo Olá número recomendado de VMs em um conjunto de escala criado em uma imagem personalizada e armazenamento gerenciada pelo usuário é 20.</span><span class="sxs-lookup"><span data-stu-id="e7c72-158">As a result, hello maximum recommended number of VMs in a scale set built on a custom image and user-managed storage is 20.</span></span> <span data-ttu-id="e7c72-159">Se você desativar o excesso de provisionamento, você pode subir too40.</span><span class="sxs-lookup"><span data-stu-id="e7c72-159">If you turn off overprovisioning, you can go up too40.</span></span>

<span data-ttu-id="e7c72-160">Para mais de VMs de permitir que esses limites, você precisa toodeploy escala vários define como mostrado na [este modelo](https://github.com/Azure/azure-quickstart-templates/tree/master/301-custom-images-at-scale).</span><span class="sxs-lookup"><span data-stu-id="e7c72-160">For more VMs than these limits allow, you need toodeploy multiple scale sets as shown in [this template](https://github.com/Azure/azure-quickstart-templates/tree/master/301-custom-images-at-scale).</span></span>

