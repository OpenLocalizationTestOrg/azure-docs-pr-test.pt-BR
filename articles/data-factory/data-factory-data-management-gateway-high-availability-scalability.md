---
title: Alta disponibilidade com o Gateway de Gerenciamento de Dados no Azure Data Factory | Microsoft Docs
description: "Este artigo explica como você pode escalar horizontalmente um Gateway de Gerenciamento de Dados adicionando mais nós e escalar verticalmente com o aumento do número de trabalhos simultâneos que podem ser executados em um nó."
services: data-factory
documentationcenter: 
author: nabhishek
manager: jhubbard
editor: 
ms.service: data-factory
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/17/2017
ms.author: abnarain
ms.openlocfilehash: b6bf353a2bad28b0db3a88e971e5c6b209b7ab2b
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/18/2017
---
# <a name="data-management-gateway---high-availability-and-scalability-preview"></a><span data-ttu-id="85f04-103">Gateway de Gerenciamento de Dados – alta disponibilidade e escalabilidade (versão prévia)</span><span class="sxs-lookup"><span data-stu-id="85f04-103">Data Management Gateway - high availability and scalability (Preview)</span></span>
<span data-ttu-id="85f04-104">Este artigo lhe ajudará a configurar a solução de alta disponibilidade e escalabilidade com o Gateway de Gerenciamento de Dados.</span><span class="sxs-lookup"><span data-stu-id="85f04-104">This article helps you configure high availability and scalability solution with Data Management Gateway.</span></span>    

> [!NOTE]
> <span data-ttu-id="85f04-105">Este artigo pressupõe que você já esteja familiarizado com conceitos básicos do Gateway de Gerenciamento de Dados.</span><span class="sxs-lookup"><span data-stu-id="85f04-105">This article assumes that you are already familiar with basics of Data Management Gateway.</span></span> <span data-ttu-id="85f04-106">Se você não estiver, consulte [Gateway de Gerenciamento de Dados](data-factory-data-management-gateway.md).</span><span class="sxs-lookup"><span data-stu-id="85f04-106">If you are not, see [Data Management Gateway](data-factory-data-management-gateway.md).</span></span>

><span data-ttu-id="85f04-107">**Esse recurso em versão prévia é oficialmente compatível com o Gateway de Gerenciamento de Dados versão 2.12.xxxx.x e superior**.</span><span class="sxs-lookup"><span data-stu-id="85f04-107">**This preview feature is officially supported on Data Management Gateway version 2.12.xxxx.x and above**.</span></span> <span data-ttu-id="85f04-108">Verifique se você está usando a versão 2.12.xxxx.x ou superior.</span><span class="sxs-lookup"><span data-stu-id="85f04-108">Please make sure you are using version 2.12.xxxx.x or above.</span></span> <span data-ttu-id="85f04-109">Baixe a versão mais recente do Gateway de Gerenciamento de Dados [aqui](https://www.microsoft.com/download/details.aspx?id=39717).</span><span class="sxs-lookup"><span data-stu-id="85f04-109">Download the latest version of Data Management Gateway [here](https://www.microsoft.com/download/details.aspx?id=39717).</span></span>

## <a name="overview"></a><span data-ttu-id="85f04-110">Visão geral</span><span class="sxs-lookup"><span data-stu-id="85f04-110">Overview</span></span>
<span data-ttu-id="85f04-111">Você pode associar gateways de gerenciamento de dados instalados em vários computadores locais a um único gateway lógico por meio do portal.</span><span class="sxs-lookup"><span data-stu-id="85f04-111">You can associate data management gateways that are installed on multiple on-premises machines with a single logical gateway from the portal.</span></span> <span data-ttu-id="85f04-112">Esses computadores são chamados de **nós**.</span><span class="sxs-lookup"><span data-stu-id="85f04-112">These machines are called **nodes**.</span></span> <span data-ttu-id="85f04-113">Você pode ter até **quatro nós** associados a um gateway lógico.</span><span class="sxs-lookup"><span data-stu-id="85f04-113">You can have up to **four nodes** associated with a logical gateway.</span></span> <span data-ttu-id="85f04-114">Os benefícios de ter vários nós (computadores locais com o gateway instalado) para um gateway lógico são:</span><span class="sxs-lookup"><span data-stu-id="85f04-114">The benefits of having multiple nodes (on-premises machines with gateway installed) for a logical gateway are:</span></span>  

- <span data-ttu-id="85f04-115">Melhorar o desempenho de movimentação de dados entre armazenamentos de dados local e na nuvem.</span><span class="sxs-lookup"><span data-stu-id="85f04-115">Improve performance of data movement between on-premises and cloud data stores.</span></span>  
- <span data-ttu-id="85f04-116">Se um de nós ficar inativo por algum motivo, outros nós ainda estarão disponíveis para mover os dados.</span><span class="sxs-lookup"><span data-stu-id="85f04-116">If one of the nodes goes down for some reason, other nodes are still available for moving the data.</span></span> 
- <span data-ttu-id="85f04-117">Se um de nós precisar ficar offline para manutenção, outros nós ainda estarão disponíveis para mover os dados.</span><span class="sxs-lookup"><span data-stu-id="85f04-117">If one of the nodes need to be taken offline for maintenance, other nodes are still available for moving the data.</span></span>

<span data-ttu-id="85f04-118">Você também pode configurar o número de **trabalhos de movimentação de dados simultâneos** que podem ser executados em um nó para escalar verticalmente a capacidade de mover dados entre armazenamentos de dados locais e na nuvem.</span><span class="sxs-lookup"><span data-stu-id="85f04-118">You can also configure the number of **concurrent data movement jobs** that can run on a node to scale up the capability of moving data between on-premises and cloud data stores.</span></span> 

<span data-ttu-id="85f04-119">Usando o Portal do Azure, você pode monitorar o status desses nós, o que ajuda você a decidir se deseja adicionar ou remover um nó do gateway lógico.</span><span class="sxs-lookup"><span data-stu-id="85f04-119">Using the Azure portal, you can monitor the status of these nodes, which helps you decide whether to add or remove a node from the logical gateway.</span></span> 

## <a name="architecture"></a><span data-ttu-id="85f04-120">Arquitetura</span><span class="sxs-lookup"><span data-stu-id="85f04-120">Architecture</span></span> 
<span data-ttu-id="85f04-121">O diagrama a seguir fornece a visão geral da arquitetura do recurso de escalabilidade e disponibilidade do Gateway de Gerenciamento de Dados:</span><span class="sxs-lookup"><span data-stu-id="85f04-121">The following diagram provides the architecture overview of scalability and availability feature of the Data Management Gateway:</span></span> 

![Gateway de Gerenciamento de Dados – alta disponibilidade e escalabilidade](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-high-availability-and-scalability.png)

<span data-ttu-id="85f04-123">Um **gateway lógico** é o gateway que você adiciona a um data factory no Portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="85f04-123">A **logical gateway** is the gateway you add to a data factory in the Azure portal.</span></span> <span data-ttu-id="85f04-124">Anteriormente, você podia associar apenas um computador do Windows local com instalado com o Gateway de Gerenciamento de Dados instalado com um gateway de lógico.</span><span class="sxs-lookup"><span data-stu-id="85f04-124">Earlier, you could associate only one on-premises Windows machine with Data Management Gateway installed with a logical gateway.</span></span> <span data-ttu-id="85f04-125">Esse computador de gateway local é chamado de nó.</span><span class="sxs-lookup"><span data-stu-id="85f04-125">This on-premises gateway machine is called a node.</span></span> <span data-ttu-id="85f04-126">Agora, você pode associar até **quatro nós físicos** com um gateway lógico.</span><span class="sxs-lookup"><span data-stu-id="85f04-126">Now, you can associate up to **four physical nodes** with a logical gateway.</span></span> <span data-ttu-id="85f04-127">Um gateway lógico com vários nós é chamado de **gateway com vários nós**.</span><span class="sxs-lookup"><span data-stu-id="85f04-127">A logical gateway with multiple nodes is called a **multi-node gateway**.</span></span>  

<span data-ttu-id="85f04-128">Todos esses nós estão **ativos**.</span><span class="sxs-lookup"><span data-stu-id="85f04-128">All these nodes are **active**.</span></span> <span data-ttu-id="85f04-129">Todos eles podem processar trabalhos de movimentação de dados para mover dados entre armazenamentos de dados locais e na nuvem.</span><span class="sxs-lookup"><span data-stu-id="85f04-129">They all can process data movement jobs to move data between on-premises and cloud data stores.</span></span> <span data-ttu-id="85f04-130">Um dos nós atua tanto como dispatcher quanto como de trabalho.</span><span class="sxs-lookup"><span data-stu-id="85f04-130">One of the nodes act as both dispatcher and worker.</span></span> <span data-ttu-id="85f04-131">Outros nós no grupo são nós de trabalho.</span><span class="sxs-lookup"><span data-stu-id="85f04-131">Other nodes in the groups are worker nodes.</span></span> <span data-ttu-id="85f04-132">Um nó **dispatcher** efetua pull de tarefas/trabalhos de movimentação de dados do serviço de nuvem e expede-os para nós de trabalho (incluindo ele próprio).</span><span class="sxs-lookup"><span data-stu-id="85f04-132">A **dispatcher** node pulls data movement tasks/jobs from the cloud service and dispatches them to worker nodes (including itself).</span></span> <span data-ttu-id="85f04-133">Um nó **de trabalho** executa trabalhos de movimentação de dados para mover dados entre armazenamentos de dados locais e na nuvem.</span><span class="sxs-lookup"><span data-stu-id="85f04-133">A **worker** node executes data movement jobs to move data between on-premises and cloud data stores.</span></span> <span data-ttu-id="85f04-134">Todos os nós são de trabalho.</span><span class="sxs-lookup"><span data-stu-id="85f04-134">All nodes are workers.</span></span> <span data-ttu-id="85f04-135">Apenas um nó pode ser expedição e de trabalho.</span><span class="sxs-lookup"><span data-stu-id="85f04-135">Only one node can be both dispatch and worker.</span></span>    

<span data-ttu-id="85f04-136">Normalmente, você pode começar com um nó e **escalar horizontalmente** para adicionar mais nós, conforme os nós existentes são sobrecarregados com a carga de movimentação de dados.</span><span class="sxs-lookup"><span data-stu-id="85f04-136">You may typically start with one node and **scale out** to add more nodes as the existing node(s) are overwhelmed with the data movement load.</span></span> <span data-ttu-id="85f04-137">Você também pode **escalar verticalmente** a funcionalidade de movimentação de dados de um nó de gateway, aumentando o número de trabalhos simultâneos que podem ser executados no nó.</span><span class="sxs-lookup"><span data-stu-id="85f04-137">You can also **scale up** the data movement capability of a gateway node by increasing the number of concurrent jobs that are allowed to run on the node.</span></span> <span data-ttu-id="85f04-138">Essa funcionalidade também está disponível com um gateway de nó único (mesmo quando o recurso de escalabilidade e disponibilidade não está habilitado).</span><span class="sxs-lookup"><span data-stu-id="85f04-138">This capability is also available with a single-node gateway (even when the scalability and availability feature is not enabled).</span></span> 

<span data-ttu-id="85f04-139">Um gateway com vários nós mantém as credenciais do armazenamento de dados sincronizadas entre todos os nós.</span><span class="sxs-lookup"><span data-stu-id="85f04-139">A gateway with multiple nodes keeps the data store credentials in sync across all nodes.</span></span> <span data-ttu-id="85f04-140">Se há um problema de conectividade de nó para nó, as credenciais podem estar fora de sincronia. Quando você define as credenciais para um armazenamento de dados local que usa um gateway, ele salva as credenciais no nó dispatcher/de trabalho.</span><span class="sxs-lookup"><span data-stu-id="85f04-140">If there is a node-to-node connectivity issue, the credentials may be out of sync. When you set credentials for an on-premises data store that uses a gateway, it saves credentials on the dispatcher/worker node.</span></span> <span data-ttu-id="85f04-141">O nó dispatcher é sincronizado com outros nós de trabalho.</span><span class="sxs-lookup"><span data-stu-id="85f04-141">The dispatcher node syncs with other worker nodes.</span></span> <span data-ttu-id="85f04-142">Este processo é conhecido como **sincronização de credenciais**. O canal de comunicação entre os nós pode ser **criptografado** por um certificado SSL/TLS público.</span><span class="sxs-lookup"><span data-stu-id="85f04-142">This process is known as **credentials sync**. The communication channel between nodes can be **encrypted** by a public SSL/TLS certificate.</span></span> 

## <a name="set-up-a-multi-node-gateway"></a><span data-ttu-id="85f04-143">Configurar um gateway com vários nós</span><span class="sxs-lookup"><span data-stu-id="85f04-143">Set up a multi-node gateway</span></span>
<span data-ttu-id="85f04-144">Esta seção pressupõe que você percorreu os dois artigos a seguir ou está familiarizado com conceitos nesses artigos:</span><span class="sxs-lookup"><span data-stu-id="85f04-144">This section assumes that you have gone through the following two articles or familiar with concepts in these articles:</span></span> 

- <span data-ttu-id="85f04-145">[Gateway de Gerenciamento de Dados](data-factory-data-management-gateway.md) – fornece uma visão geral detalhada do gateway.</span><span class="sxs-lookup"><span data-stu-id="85f04-145">[Data Management Gateway](data-factory-data-management-gateway.md) - provides a detailed overview of the gateway.</span></span>
- <span data-ttu-id="85f04-146">[Mover dados entre locais e na nuvem armazenamentos de dados](data-factory-move-data-between-onprem-and-cloud.md) – contém um passo a passo com instruções passo a passo para usar um gateway com um único nó.</span><span class="sxs-lookup"><span data-stu-id="85f04-146">[Move data between on-premises and cloud data stores](data-factory-move-data-between-onprem-and-cloud.md) - contains a walkthrough with step-by-step instructions for using a gateway with a single node.</span></span>  

> [!NOTE]
> <span data-ttu-id="85f04-147">Antes de você instalar um Gateway de Gerenciamento de Dados em um computador local do Windows, consulte os pré-requisitos listados no [artigo principal](data-factory-data-management-gateway.md#prerequisites).</span><span class="sxs-lookup"><span data-stu-id="85f04-147">Before you install a data management gateway on an on-premises Windows machine, see prerequisites listed in [the main article](data-factory-data-management-gateway.md#prerequisites).</span></span>

1. <span data-ttu-id="85f04-148">No [passo a passo](data-factory-move-data-between-onprem-and-cloud.md#create-gateway), ao criar um gateway lógico, habilite o recurso de **Alta Disponibilidade e Escalabilidade**.</span><span class="sxs-lookup"><span data-stu-id="85f04-148">In the [walkthrough](data-factory-move-data-between-onprem-and-cloud.md#create-gateway), while creating a logical gateway, enable the **High Availability & Scalability** feature.</span></span> 

    ![Gateway de Gerenciamento de Dados – habilitar alta disponibilidade e escalabilidade](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-enable-high-availability-scalability.png)
2. <span data-ttu-id="85f04-150">Na página **Configurar**, use um dos links **Instalação Expressa** ou **Instalação Manual** para instalar um gateway no primeiro nó (um computador local do Windows).</span><span class="sxs-lookup"><span data-stu-id="85f04-150">In the **Configure** page, use either **Express Setup** or **Manual Setup** link to install a gateway on the first node (an on-premises Windows machine).</span></span>

    ![Gateway de Gerenciamento de Dados – instalação manual ou expressa](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-express-manual-setup.png)

    > [!NOTE]
    > <span data-ttu-id="85f04-152">Se você usar a opção de instalação expressa, a comunicação de nó para nó é feita sem criptografia.</span><span class="sxs-lookup"><span data-stu-id="85f04-152">If you use the express setup option, the node-to-node communication is done without encryption.</span></span> <span data-ttu-id="85f04-153">O nome do nó é o mesmo que o nome do computador.</span><span class="sxs-lookup"><span data-stu-id="85f04-153">The node name is same as the machine name.</span></span> <span data-ttu-id="85f04-154">Use a instalação manual se a comunicação entre nós precisar ser criptografada ou para especificar um nome de nó de sua escolha.</span><span class="sxs-lookup"><span data-stu-id="85f04-154">Use manual setup if the node-node communication needs to be encrypted or you want to specify a node name of your choice.</span></span> <span data-ttu-id="85f04-155">Nomes de nó não podem ser editados posteriormente.</span><span class="sxs-lookup"><span data-stu-id="85f04-155">Node names cannot be edited later.</span></span>
3. <span data-ttu-id="85f04-156">Se você escolher **instalação expressa**</span><span class="sxs-lookup"><span data-stu-id="85f04-156">If you choose **express setup**</span></span>
    1. <span data-ttu-id="85f04-157">Você verá a seguinte mensagem depois que o gateway for instalado com êxito:</span><span class="sxs-lookup"><span data-stu-id="85f04-157">You see the following message after the gateway is successfully installed:</span></span>

        ![Gateway de Gerenciamento de Dados – êxito na instalação expressa](media/data-factory-data-management-gateway-high-availability-scalability/express-setup-success.png)
    2. <span data-ttu-id="85f04-159">Inicie o Gerenciador de Configurações de Gerenciamento de Dados para o gateway seguindo [estas instruções](data-factory-data-management-gateway.md#configuration-manager).</span><span class="sxs-lookup"><span data-stu-id="85f04-159">Launch Data Management Configuration Manager for the gateway by following [these instructions](data-factory-data-management-gateway.md#configuration-manager).</span></span> <span data-ttu-id="85f04-160">Você vê o nome do gateway, o nome do nó, o status, etc.</span><span class="sxs-lookup"><span data-stu-id="85f04-160">You see the gateway name, node name, status, etc.</span></span>

        ![Gateway de Gerenciamento de Dados – instalação do gateway bem-sucedida](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-installation-success.png)
4. <span data-ttu-id="85f04-162">Se você escolher **configuração manual**:</span><span class="sxs-lookup"><span data-stu-id="85f04-162">If you choose **manual setup**:</span></span>
    1. <span data-ttu-id="85f04-163">Baixe o pacote de instalação do Centro de Download da Microsoft, execute-o para instalar o gateway em seu computador.</span><span class="sxs-lookup"><span data-stu-id="85f04-163">Download the installation package from the Microsoft Download Center, run it to install gateway on your machine.</span></span>
    2. <span data-ttu-id="85f04-164">Use a **chave de autenticação** da página **Configurar** para registrar o gateway.</span><span class="sxs-lookup"><span data-stu-id="85f04-164">Use the **authentication key** from the **Configure** page to register the gateway.</span></span>
    
        ![Gateway de Gerenciamento de Dados – instalação do gateway bem-sucedida](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-authentication-key.png)
    3. <span data-ttu-id="85f04-166">Na página **Novo nó de gateway**, você pode fornecer um **nome** personalizado para o nó do gateway.</span><span class="sxs-lookup"><span data-stu-id="85f04-166">In the **New gateway node** page, you can provide a custom **name** to the gateway node.</span></span> <span data-ttu-id="85f04-167">Por padrão, o nome do nó é o mesmo que o nome do computador.</span><span class="sxs-lookup"><span data-stu-id="85f04-167">By default, node name is same as the machine name.</span></span>    

        ![Gateway de Gerenciamento de Dados – especificar nome](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-name.png)
    4. <span data-ttu-id="85f04-169">Na próxima página, você pode escolher se deseja ou não **habilitar a criptografia para comunicação de nó para nó**.</span><span class="sxs-lookup"><span data-stu-id="85f04-169">In the next page, you can choose whether to **enable encryption for node-to-node communication**.</span></span> <span data-ttu-id="85f04-170">Clique em **ignorar** para desabilitar a criptografia (padrão).</span><span class="sxs-lookup"><span data-stu-id="85f04-170">Click **Skip** to disable encryption (default).</span></span>

        ![Gateway de Gerenciamento de Dados – habilitar criptografia](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-node-encryption.png)  
    
        > [!NOTE]
        > <span data-ttu-id="85f04-172">Só há suporte para alteração do modo de criptografia quando você tem um único nó de gateway no gateway lógico.</span><span class="sxs-lookup"><span data-stu-id="85f04-172">Changing of encryption mode is only supported when you have a single gateway node in the logical gateway.</span></span> <span data-ttu-id="85f04-173">Para alterar o modo de criptografia quando um gateway tem vários nós, siga as etapas a seguir: exclua todos os nós exceto um, altere o modo de criptografia e, em seguida, adicione os nós novamente.</span><span class="sxs-lookup"><span data-stu-id="85f04-173">To change the encryption mode when a gateway has multiple nodes, do the following steps: delete all the nodes except one node, change the encryption mode, and then add the nodes again.</span></span>
        > 
        > <span data-ttu-id="85f04-174">Consulte a seção [Requisitos de certificado TLS/SSL](#tlsssl-certificate-requirements) para obter uma lista de requisitos para usar um certificado TLS/SSL.</span><span class="sxs-lookup"><span data-stu-id="85f04-174">See [TLS/SSL certificate requirements](#tlsssl-certificate-requirements) section for a list of requirements for using an TLS/SSL certificate.</span></span> 
    5. <span data-ttu-id="85f04-175">Depois que o gateway for instalado com êxito, clique em Iniciar o Gerenciador de Configurações:</span><span class="sxs-lookup"><span data-stu-id="85f04-175">After the gateway is successfully installed, click Launch Configuration Manager:</span></span>
    
        ![Instalação manual – iniciar gerenciador de configurações](media/data-factory-data-management-gateway-high-availability-scalability/manual-setup-launch-configuration-manager.png)   
    6. <span data-ttu-id="85f04-177">Consulte o Gerenciador de Configurações do Gateway de Gerenciamento de Dados no nó (computador do Windows local), que mostra o status de conectividade, o **nome do gateway** e **o nome do nó**.</span><span class="sxs-lookup"><span data-stu-id="85f04-177">you see Data Management Gateway Configuration Manager on the node (on-premises Windows machine), which shows connectivity status, **gateway name**, and **node name**.</span></span>  

        ![Gateway de Gerenciamento de Dados – instalação do gateway bem-sucedida](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-installation-success.png)

        > [!NOTE]
        > <span data-ttu-id="85f04-179">Se você está provisionando o gateway em uma VM do Azure, você pode usar [este modelo do Azure Resource Manager no GitHub](https://github.com/xiaoyingLJ/vms-with-multiple-data-management-gateway).</span><span class="sxs-lookup"><span data-stu-id="85f04-179">If you are provisioning the gateway on an Azure VM, you can use [this Azure Resource Manager template on GitHub](https://github.com/xiaoyingLJ/vms-with-multiple-data-management-gateway).</span></span> <span data-ttu-id="85f04-180">Esse script cria um gateway lógico, configura as VMs com software de Gateway de Gerenciamento de Dados instalado e registra-os com o gateway lógico.</span><span class="sxs-lookup"><span data-stu-id="85f04-180">This script creates a logical gateway, sets up VMs with Data Management Gateway software installed, and registers them with the logical gateway.</span></span> 
6. <span data-ttu-id="85f04-181">No Portal do Azure, inicie a página **Gateway**:</span><span class="sxs-lookup"><span data-stu-id="85f04-181">In Azure portal, launch the **Gateway** page:</span></span> 
    1. <span data-ttu-id="85f04-182">Na home page do data factory no portal, clique em **Serviços Vinculados**.</span><span class="sxs-lookup"><span data-stu-id="85f04-182">On the data factory home page in the portal, click **Linked Services**.</span></span>
    
        ![Página inicial da data factory](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-home-page.png)
    2. <span data-ttu-id="85f04-184">Selecione o **gateway** para ver a página **Gateway**:</span><span class="sxs-lookup"><span data-stu-id="85f04-184">select the **gateway** to see the **Gateway** page:</span></span>
    
        ![Página inicial da data factory](media/data-factory-data-management-gateway-high-availability-scalability/linked-services-gateway.png)
    4. <span data-ttu-id="85f04-186">Você vê a página **Gateway**:</span><span class="sxs-lookup"><span data-stu-id="85f04-186">You see the **Gateway** page:</span></span>   

        ![Gateway com exibição de nó único](media/data-factory-data-management-gateway-high-availability-scalability/gateway-first-node-portal-view.png) 
7. <span data-ttu-id="85f04-188">Clique em **Adicionar Nó** na barra de ferramentas para adicionar um nó para o gateway lógico.</span><span class="sxs-lookup"><span data-stu-id="85f04-188">Click **Add Node** on the toolbar to add a node to the logical gateway.</span></span> <span data-ttu-id="85f04-189">Se você estiver planejando usar a instalação expressa, siga esta etapa do computador local que será adicionado como um nó para o gateway.</span><span class="sxs-lookup"><span data-stu-id="85f04-189">If you are planning to use express setup, do this step from the on-premises machine that will be added as a node to the gateway.</span></span> 

    ![Gateway de Gerenciamento de Dados – menu adicionar nó](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-add-node-menu.png)
8. <span data-ttu-id="85f04-191">As etapas são semelhantes àquelas para configuração do primeiro nó.</span><span class="sxs-lookup"><span data-stu-id="85f04-191">Steps are similar to setting up the first node.</span></span> <span data-ttu-id="85f04-192">A interface do usuário do Gerenciador de Configurações permite que você defina o nome do nó, se você escolher a opção de instalação manual:</span><span class="sxs-lookup"><span data-stu-id="85f04-192">The Configuration Manager UI lets you set the node name if you choose the manual installation option:</span></span> 

    ![Gerenciador de Configurações – instalar segundo gateway](media/data-factory-data-management-gateway-high-availability-scalability/install-second-gateway.png)
9. <span data-ttu-id="85f04-194">Depois que o gateway está instalado com êxito no nó, a ferramenta Gerenciador de Configurações exibe a tela a seguir:</span><span class="sxs-lookup"><span data-stu-id="85f04-194">After the gateway is installed successfully on the node, the Configuration Manager tool displays the following screen:</span></span>  

    ![Gerenciador de Configurações – instalação do segundo gateway bem-sucedida](media/data-factory-data-management-gateway-high-availability-scalability/second-gateway-installation-successful.png)
10. <span data-ttu-id="85f04-196">Se você abrir a página **Gateway** no portal, você verá dois nós de gateway agora:</span><span class="sxs-lookup"><span data-stu-id="85f04-196">If you open the **Gateway** page in the portal, you see two gateway nodes now:</span></span> 

    ![Gateway com dois nós no portal](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-multi-node-monitoring.png)
11. <span data-ttu-id="85f04-198">Para excluir um nó do gateway, clique em **Excluir Nó** na barra de ferramentas, selecione o nó que você deseja excluir e, em seguida, clique em **Excluir** na barra de ferramentas.</span><span class="sxs-lookup"><span data-stu-id="85f04-198">To delete a gateway node, click **Delete Node** on the toolbar, select the node you want to delete, and then click **Delete** from the toolbar.</span></span> <span data-ttu-id="85f04-199">Essa ação exclui o nó selecionado do grupo.</span><span class="sxs-lookup"><span data-stu-id="85f04-199">This action deletes the selected node from the group.</span></span> <span data-ttu-id="85f04-200">Observe que essa ação não desinstala o software de Gateway de Gerenciamento de Dados do nó (computador do Windows local).</span><span class="sxs-lookup"><span data-stu-id="85f04-200">Note that this action does not uninstall the data management gateway software from the node (on-premises Windows machine).</span></span> <span data-ttu-id="85f04-201">Use **Adicionar ou remover programas** no Painel de Controle local para desinstalar o gateway.</span><span class="sxs-lookup"><span data-stu-id="85f04-201">Use **Add or remove programs** in Control Panel on the on-premises to uninstall the gateway.</span></span> <span data-ttu-id="85f04-202">Quando você desinstala um gateway por meio do nó, ele é automaticamente excluído no portal.</span><span class="sxs-lookup"><span data-stu-id="85f04-202">When you uninstall gateway from the node, it's automatically deleted in the portal.</span></span>   

## <a name="upgrade-an-existing-gateway"></a><span data-ttu-id="85f04-203">Atualizar um gateway existente</span><span class="sxs-lookup"><span data-stu-id="85f04-203">Upgrade an existing gateway</span></span>
<span data-ttu-id="85f04-204">Você pode atualizar um gateway existente para usar o recurso de alta disponibilidade e escalabilidade.</span><span class="sxs-lookup"><span data-stu-id="85f04-204">You can upgrade an existing gateway to use the high availability and scalability feature.</span></span> <span data-ttu-id="85f04-205">Esse recurso funciona somente com nós que têm o gateway de gerenciamento de dados da versão >= 2.12.xxxx.</span><span class="sxs-lookup"><span data-stu-id="85f04-205">This feature works only with nodes that have the data management gateway of version >= 2.12.xxxx.</span></span> <span data-ttu-id="85f04-206">Você pode ver a versão do Gateway de Gerenciamento de Dados instalado no computador na guia **Ajuda** do Gerenciador de Configurações do Gateway de Gerenciamento de Dados.</span><span class="sxs-lookup"><span data-stu-id="85f04-206">You can see the version of data management gateway installed on a machine in the **Help** tab of the Data Management Gateway Configuration Manager.</span></span> 

1. <span data-ttu-id="85f04-207">Atualize o gateway no computador local para a versão mais recente, baixando e executando um pacote de instalação MSI do [Centro de Download da Microsoft](https://www.microsoft.com/download/details.aspx?id=39717).</span><span class="sxs-lookup"><span data-stu-id="85f04-207">Update the gateway on the on-premises machine to the latest version by following by downloading and running an MSI setup package from the [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=39717).</span></span> <span data-ttu-id="85f04-208">Consulte a seção [Instalação](data-factory-data-management-gateway.md#installation) para obter detalhes.</span><span class="sxs-lookup"><span data-stu-id="85f04-208">See [installation](data-factory-data-management-gateway.md#installation) section for details.</span></span>  
2. <span data-ttu-id="85f04-209">Navegue até o Portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="85f04-209">Navigate to the Azure portal.</span></span> <span data-ttu-id="85f04-210">Inicie a **página do Data Factory** o seu data factory.</span><span class="sxs-lookup"><span data-stu-id="85f04-210">Launch the **Data Factory page** for your data factory.</span></span> <span data-ttu-id="85f04-211">Clique no bloco Serviços vinculados para iniciar a **página Serviços vinculados**.</span><span class="sxs-lookup"><span data-stu-id="85f04-211">Click Linked services tile to launch the **linked services page**.</span></span> <span data-ttu-id="85f04-212">Selecione o gateway para iniciar a **página Gateway**.</span><span class="sxs-lookup"><span data-stu-id="85f04-212">Select the gateway to launch the **gateway page**.</span></span> <span data-ttu-id="85f04-213">Clique na **Versão Prévia do Recurso** e habilite-a, conforme mostrado na imagem a seguir:</span><span class="sxs-lookup"><span data-stu-id="85f04-213">Click and enable **Preview Feature** as shown in the following image:</span></span> 

    ![Gateway de Gerenciamento de Dados – habilitar versão prévia do recurso](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-existing-gateway-enable-high-availability.png)   
2. <span data-ttu-id="85f04-215">Quando a versão prévia do recurso estiver habilitada no portal, feche todas as páginas.</span><span class="sxs-lookup"><span data-stu-id="85f04-215">Once the preview feature is enabled in the portal, close all pages.</span></span> <span data-ttu-id="85f04-216">Reabra a **página Gateway** para ver a nova IU (interface do usuário) da versão prévia.</span><span class="sxs-lookup"><span data-stu-id="85f04-216">Reopen the **gateway page** to see the new preview user interface (UI).</span></span>
 
    ![Gateway de Gerenciamento de Dados – versão prévia do recurso habilitada com êxito](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-preview-success.png)

    ![Gateway de Gerenciamento de Dados – interface do usuário da versão prévia](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-preview.png)

    > [!NOTE]
    > <span data-ttu-id="85f04-219">Durante a atualização, o nome do primeiro nó é o nome do computador.</span><span class="sxs-lookup"><span data-stu-id="85f04-219">During the upgrade, name of the first node is the name of the machine.</span></span> 
3. <span data-ttu-id="85f04-220">Agora, adicione um nó.</span><span class="sxs-lookup"><span data-stu-id="85f04-220">Now, add a node.</span></span> <span data-ttu-id="85f04-221">Na página **Gateway**, clique em **Adicionar Nó**.</span><span class="sxs-lookup"><span data-stu-id="85f04-221">In the **Gateway** page, click **Add Node**.</span></span>  

    ![Gateway de Gerenciamento de Dados – menu adicionar nó](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-add-node-menu.png)

    <span data-ttu-id="85f04-223">Siga as instruções da seção anterior para configurar o nó.</span><span class="sxs-lookup"><span data-stu-id="85f04-223">Follow instructions from the previous section to set up the node.</span></span> 

### <a name="installation-best-practices"></a><span data-ttu-id="85f04-224">Melhores práticas de instalação</span><span class="sxs-lookup"><span data-stu-id="85f04-224">Installation best practices</span></span>

- <span data-ttu-id="85f04-225">Configure o plano de energia no computador host para o gateway para que o computador não hiberne.</span><span class="sxs-lookup"><span data-stu-id="85f04-225">Configure power plan on the host machine for the gateway so that the machine does not hibernate.</span></span> <span data-ttu-id="85f04-226">Se o computador host hibernar, o gateway não responderá às solicitações de dados.</span><span class="sxs-lookup"><span data-stu-id="85f04-226">If the host machine hibernates, the gateway does not respond to data requests.</span></span>
- <span data-ttu-id="85f04-227">Faça backup do certificado associado ao gateway.</span><span class="sxs-lookup"><span data-stu-id="85f04-227">Back up the certificate associated with the gateway.</span></span>
- <span data-ttu-id="85f04-228">Verifique se todos os nós são de configuração semelhante (recomendada) para um desempenho ideal.</span><span class="sxs-lookup"><span data-stu-id="85f04-228">Ensure all nodes are of similar configuration (recommended) for ideal performance.</span></span> 
- <span data-ttu-id="85f04-229">Adicione pelo menos dois nós para assegurar alta disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="85f04-229">Add at least two nodes to ensure high availability.</span></span>  

### <a name="tlsssl-certificate-requirements"></a><span data-ttu-id="85f04-230">Requisitos de certificado TLS/SSL</span><span class="sxs-lookup"><span data-stu-id="85f04-230">TLS/SSL certificate requirements</span></span>
<span data-ttu-id="85f04-231">Aqui estão os requisitos para o certificado TLS/SSL que é usado para proteger as comunicações entre os nós de gateway:</span><span class="sxs-lookup"><span data-stu-id="85f04-231">Here are the requirements for the TLS/SSL certificate that is used for securing communications between gateway nodes:</span></span>

- <span data-ttu-id="85f04-232">O certificado deve ser um certificado X509 v3 publicamente confiável.</span><span class="sxs-lookup"><span data-stu-id="85f04-232">The certificate must be a publicly trusted X509 v3 certificate.</span></span>
- <span data-ttu-id="85f04-233">Todos os nós de gateway devem confiar nesse certificado.</span><span class="sxs-lookup"><span data-stu-id="85f04-233">All gateway nodes must trust this certificate.</span></span> 
- <span data-ttu-id="85f04-234">É recomendável que você use certificados emitidos por uma AC (autoridade de certificação) pública (de terceiros).</span><span class="sxs-lookup"><span data-stu-id="85f04-234">We recommend that you use certificates that are issued by a public (third-party) certification authority (CA).</span></span>
- <span data-ttu-id="85f04-235">Dá suporte a qualquer tamanho de chave com suporte pelo Windows Server 2012 R2 para certificados SSL.</span><span class="sxs-lookup"><span data-stu-id="85f04-235">Supports any key size supported by Windows Server 2012 R2 for SSL certificates.</span></span>
- <span data-ttu-id="85f04-236">Não dá suporte a certificados que usam chaves CNG.</span><span class="sxs-lookup"><span data-stu-id="85f04-236">Does not support certificates that use CNG keys.</span></span>
- <span data-ttu-id="85f04-237">Há suporte para certificados curinga.</span><span class="sxs-lookup"><span data-stu-id="85f04-237">Wild-card certificates are supported.</span></span> 


## <a name="monitor-a-multi-node-gateway"></a><span data-ttu-id="85f04-238">Monitorar um gateway com vários nós</span><span class="sxs-lookup"><span data-stu-id="85f04-238">Monitor a multi-node gateway</span></span>
### <a name="multi-node-gateway-monitoring"></a><span data-ttu-id="85f04-239">Monitoramento de gateway com vários nós</span><span class="sxs-lookup"><span data-stu-id="85f04-239">Multi-node gateway monitoring</span></span>
<span data-ttu-id="85f04-240">No Portal do Azure, você pode exibir o instantâneo quase em tempo real de utilização de recursos (CPU, memória, rede(entrada/saída), etc.) em cada nó, juntamente com os status dos nós de gateway.</span><span class="sxs-lookup"><span data-stu-id="85f04-240">In the Azure portal, you can view near-real time snapshot of resource utilization (CPU, memory, network(in/out), etc.) on each node along with statuses of gateway nodes.</span></span> 

![Gateway de Gerenciamento de Dados – monitoramento de vários nós](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-multi-node-monitoring.png)

<span data-ttu-id="85f04-242">Você pode habilitar as **Configurações Avançadas** na página **Gateway** para ver as métricas avançadas como **Rede**(entrada/saída), **Função e Status de Credencial**, que é útil na depuração de problemas do gateway e **Trabalhos Simultâneos** (Executando/Limite), que podem ser modificados/alterados adequadamente durante o ajuste de desempenho.</span><span class="sxs-lookup"><span data-stu-id="85f04-242">You can enable **Advanced Settings** in the **Gateway** page to see advanced metrics like **Network**(in/out), **Role & Credential Status**, which is helpful in debugging gateway issues, and **Concurrent Jobs** (Running/ Limit) which can be modified/ changed accordingly during performance tuning.</span></span> <span data-ttu-id="85f04-243">A tabela a seguir fornece descrições das colunas na lista **Nós de Gateway**:</span><span class="sxs-lookup"><span data-stu-id="85f04-243">The following table provides descriptions of columns in the **Gateway Nodes** list:</span></span>  

<span data-ttu-id="85f04-244">Propriedade de monitoramento</span><span class="sxs-lookup"><span data-stu-id="85f04-244">Monitoring Property</span></span> | <span data-ttu-id="85f04-245">Descrição</span><span class="sxs-lookup"><span data-stu-id="85f04-245">Description</span></span>
:------------------ | :---------- 
<span data-ttu-id="85f04-246">Nome</span><span class="sxs-lookup"><span data-stu-id="85f04-246">Name</span></span> | <span data-ttu-id="85f04-247">Nome do gateway lógico e nós associada ao gateway.</span><span class="sxs-lookup"><span data-stu-id="85f04-247">Name of the logical gateway and nodes associated with the gateway.</span></span>  
<span data-ttu-id="85f04-248">Status</span><span class="sxs-lookup"><span data-stu-id="85f04-248">Status</span></span> | <span data-ttu-id="85f04-249">Status do gateway lógico e dos nós de gateway.</span><span class="sxs-lookup"><span data-stu-id="85f04-249">Status of the logical gateway and the gateway nodes.</span></span> <span data-ttu-id="85f04-250">Exemplo: Online/Offline/Limitado/etc. Para obter informações sobre esses status, consulte a seção [Status do gateway](#gateway-status).</span><span class="sxs-lookup"><span data-stu-id="85f04-250">Example: Online/Offline/Limited/etc. For information about these statuses, See [Gateway status](#gateway-status) section.</span></span> 
<span data-ttu-id="85f04-251">Versão</span><span class="sxs-lookup"><span data-stu-id="85f04-251">Version</span></span> | <span data-ttu-id="85f04-252">Mostra a versão do gateway lógico e cada nó do gateway.</span><span class="sxs-lookup"><span data-stu-id="85f04-252">Shows the version of the logical gateway and each gateway node.</span></span> <span data-ttu-id="85f04-253">A versão do gateway lógico é determinada com base na versão da maioria dos nós no grupo.</span><span class="sxs-lookup"><span data-stu-id="85f04-253">The version of the logical gateway is determined based on version of majority of nodes in the group.</span></span> <span data-ttu-id="85f04-254">Se não há nós com versões diferentes na configuração do gateway lógico, somente os nós com o mesmo número de versão que o gateway lógico funcionam corretamente.</span><span class="sxs-lookup"><span data-stu-id="85f04-254">If there are nodes with different versions in the logical gateway setup, only the nodes with the same version number as the logical gateway function properly.</span></span> <span data-ttu-id="85f04-255">Os outros estão no modo limitado e precisam ser atualizados manualmente (somente caso a atualização automática falhe).</span><span class="sxs-lookup"><span data-stu-id="85f04-255">Others are in the limited mode and need to be manually updated (only in case auto-update fails).</span></span> 
<span data-ttu-id="85f04-256">Memória disponível</span><span class="sxs-lookup"><span data-stu-id="85f04-256">Available memory</span></span> | <span data-ttu-id="85f04-257">Memória disponível em um nó do gateway.</span><span class="sxs-lookup"><span data-stu-id="85f04-257">Available memory on a gateway node.</span></span> <span data-ttu-id="85f04-258">Esse valor é um instantâneo quase em tempo real.</span><span class="sxs-lookup"><span data-stu-id="85f04-258">This value is a near real-time snapshot.</span></span> 
<span data-ttu-id="85f04-259">Utilização da CPU</span><span class="sxs-lookup"><span data-stu-id="85f04-259">CPU utilization</span></span> | <span data-ttu-id="85f04-260">Utilização da CPU de um nó de gateway.</span><span class="sxs-lookup"><span data-stu-id="85f04-260">CPU utilization of a gateway node.</span></span> <span data-ttu-id="85f04-261">Esse valor é um instantâneo quase em tempo real.</span><span class="sxs-lookup"><span data-stu-id="85f04-261">This value is a near real-time snapshot.</span></span> 
<span data-ttu-id="85f04-262">Rede (Entrada/Saída)</span><span class="sxs-lookup"><span data-stu-id="85f04-262">Networking (In/Out)</span></span> | <span data-ttu-id="85f04-263">Utilização de rede de um nó de gateway.</span><span class="sxs-lookup"><span data-stu-id="85f04-263">Network utilization of a gateway node.</span></span> <span data-ttu-id="85f04-264">Esse valor é um instantâneo quase em tempo real.</span><span class="sxs-lookup"><span data-stu-id="85f04-264">This value is a near real-time snapshot.</span></span> 
<span data-ttu-id="85f04-265">Trabalhos Simultâneos (Executando/Limite)</span><span class="sxs-lookup"><span data-stu-id="85f04-265">Concurrent Jobs (Running/ Limit)</span></span> | <span data-ttu-id="85f04-266">Número de trabalhos ou tarefas em execução em cada nó.</span><span class="sxs-lookup"><span data-stu-id="85f04-266">Number of jobs or tasks running on each node.</span></span> <span data-ttu-id="85f04-267">Esse valor é um instantâneo quase em tempo real.</span><span class="sxs-lookup"><span data-stu-id="85f04-267">This value is a near real-time snapshot.</span></span> <span data-ttu-id="85f04-268">Limite significa a máxima de trabalhos simultâneos para cada nó.</span><span class="sxs-lookup"><span data-stu-id="85f04-268">Limit signifies the maximum concurrent jobs for each node.</span></span> <span data-ttu-id="85f04-269">Esse valor é definido com base no tamanho do computador.</span><span class="sxs-lookup"><span data-stu-id="85f04-269">This value is defined based on the machine size.</span></span> <span data-ttu-id="85f04-270">Você pode aumentar o limite para escalar verticalmente a execução de trabalhos simultâneos em cenários avançados, em que memória/CPU/rede são subutilizados, mas as atividades estão atingindo o tempo limite. Essa funcionalidade também está disponível com um gateway de nó único (mesmo quando o recurso de escalabilidade e disponibilidade não está habilitado).</span><span class="sxs-lookup"><span data-stu-id="85f04-270">You can increase the limit to scale up concurrent job execution in advanced scenarios, where CPU/ memory/ network is under-utilized, but activities are timing out. This capability is also available with a single-node gateway (even when the scalability and availability feature is not enabled).</span></span> <span data-ttu-id="85f04-271">Para obter mais informações, consulte a seção [considerações de dimensionamento](#scale-considerations).</span><span class="sxs-lookup"><span data-stu-id="85f04-271">For more information, see [scale considerations](#scale-considerations) section.</span></span> 
<span data-ttu-id="85f04-272">Função</span><span class="sxs-lookup"><span data-stu-id="85f04-272">Role</span></span> | <span data-ttu-id="85f04-273">Há dois tipos de funções – Dispatcher e de trabalho.</span><span class="sxs-lookup"><span data-stu-id="85f04-273">There are two types of roles – Dispatcher and worker.</span></span> <span data-ttu-id="85f04-274">Todos os nós são de trabalho, o que significa que eles podem ser usados para executar trabalhos.</span><span class="sxs-lookup"><span data-stu-id="85f04-274">All nodes are workers, which means they can all be used to execute jobs.</span></span> <span data-ttu-id="85f04-275">Há apenas um nó dispatcher, que é usado para efetuar pull de tarefas/trabalhos dos serviços de nuvem e distribuí-los para nós de trabalho diferentes (incluindo ele próprio).</span><span class="sxs-lookup"><span data-stu-id="85f04-275">There is only one dispatcher node, which is used to pull tasks/jobs from cloud services and dispatch them to different worker nodes (including itself).</span></span> 

![Gateway de Gerenciamento de Dados – monitoramento avançado de vários nós](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-multi-node-monitoring-advanced.png)

### <a name="gateway-status"></a><span data-ttu-id="85f04-277">Status do gateway</span><span class="sxs-lookup"><span data-stu-id="85f04-277">Gateway status</span></span>

<span data-ttu-id="85f04-278">A tabela a seguir fornece os possíveis status de um **nó de gateway**:</span><span class="sxs-lookup"><span data-stu-id="85f04-278">The following table provides possible statuses of a **gateway node**:</span></span> 

<span data-ttu-id="85f04-279">Status</span><span class="sxs-lookup"><span data-stu-id="85f04-279">Status</span></span>  | <span data-ttu-id="85f04-280">Comentários/Cenários</span><span class="sxs-lookup"><span data-stu-id="85f04-280">Comments/Scenarios</span></span>
:------- | :------------------
<span data-ttu-id="85f04-281">Online</span><span class="sxs-lookup"><span data-stu-id="85f04-281">Online</span></span> | <span data-ttu-id="85f04-282">Nó conectado ao serviço Data Factory.</span><span class="sxs-lookup"><span data-stu-id="85f04-282">Node connected to Data Factory service.</span></span>
<span data-ttu-id="85f04-283">Off-line</span><span class="sxs-lookup"><span data-stu-id="85f04-283">Offline</span></span> | <span data-ttu-id="85f04-284">O nó está offline.</span><span class="sxs-lookup"><span data-stu-id="85f04-284">Node is offline.</span></span>
<span data-ttu-id="85f04-285">Atualizando</span><span class="sxs-lookup"><span data-stu-id="85f04-285">Upgrading</span></span> | <span data-ttu-id="85f04-286">O nó está sendo atualizado automaticamente.</span><span class="sxs-lookup"><span data-stu-id="85f04-286">The node is being auto-updated.</span></span>
<span data-ttu-id="85f04-287">Limitado</span><span class="sxs-lookup"><span data-stu-id="85f04-287">Limited</span></span> | <span data-ttu-id="85f04-288">Devido a problema de conectividade.</span><span class="sxs-lookup"><span data-stu-id="85f04-288">Due to Connectivity issue.</span></span> <span data-ttu-id="85f04-289">Pode ser devido a problema 8050 de porta HTTP, problema de conectividade do barramento de serviço ou problema de sincronização de credenciais.</span><span class="sxs-lookup"><span data-stu-id="85f04-289">May be due to HTTP port 8050 issue, service bus connectivity issue, or credential sync issue.</span></span> 
<span data-ttu-id="85f04-290">Inativo</span><span class="sxs-lookup"><span data-stu-id="85f04-290">Inactive</span></span> | <span data-ttu-id="85f04-291">O nó está em uma configuração diferente da configuração de outros nós de maioria.</span><span class="sxs-lookup"><span data-stu-id="85f04-291">Node is in a configuration different from the configuration of other majority nodes.</span></span><br/><br/> <span data-ttu-id="85f04-292">Um nó pode ficar inativo quando ele não pode se conectar a outros nós.</span><span class="sxs-lookup"><span data-stu-id="85f04-292">A node can be inactive when it cannot connect to other nodes.</span></span> 


<span data-ttu-id="85f04-293">A tabela a seguir fornece os possíveis status de um **gateway lógico**.</span><span class="sxs-lookup"><span data-stu-id="85f04-293">The following table provides possible statuses of a **logical gateway**.</span></span> <span data-ttu-id="85f04-294">O status do gateway depende do status dos nós do gateway.</span><span class="sxs-lookup"><span data-stu-id="85f04-294">The gateway status depends on statuses of the gateway nodes.</span></span> 

<span data-ttu-id="85f04-295">Status</span><span class="sxs-lookup"><span data-stu-id="85f04-295">Status</span></span> | <span data-ttu-id="85f04-296">Comentários</span><span class="sxs-lookup"><span data-stu-id="85f04-296">Comments</span></span>
:----- | :-------
<span data-ttu-id="85f04-297">Precisa de Registro</span><span class="sxs-lookup"><span data-stu-id="85f04-297">Needs Registration</span></span> | <span data-ttu-id="85f04-298">Nenhum nó está registrado ainda para este gateway lógico</span><span class="sxs-lookup"><span data-stu-id="85f04-298">No node is yet registered to this logical gateway</span></span>
<span data-ttu-id="85f04-299">Online</span><span class="sxs-lookup"><span data-stu-id="85f04-299">Online</span></span> | <span data-ttu-id="85f04-300">Nós de Gateway estão online</span><span class="sxs-lookup"><span data-stu-id="85f04-300">Gateway Nodes are online</span></span>
<span data-ttu-id="85f04-301">Off-line</span><span class="sxs-lookup"><span data-stu-id="85f04-301">Offline</span></span> | <span data-ttu-id="85f04-302">Nenhum nó no status online.</span><span class="sxs-lookup"><span data-stu-id="85f04-302">No node in online status.</span></span>
<span data-ttu-id="85f04-303">Limitado</span><span class="sxs-lookup"><span data-stu-id="85f04-303">Limited</span></span> | <span data-ttu-id="85f04-304">Nem todos os nós neste gateway estão em estado íntegro.</span><span class="sxs-lookup"><span data-stu-id="85f04-304">Not all nodes in this gateway are in healthy state.</span></span> <span data-ttu-id="85f04-305">Esse status é um aviso de que um nó pode estar inativo!</span><span class="sxs-lookup"><span data-stu-id="85f04-305">This status is a warning that some node might be down!</span></span> <br/><br/><span data-ttu-id="85f04-306">Isso pode ser devido a problema de sincronização de credenciais no nó dispatcher/de trabalho.</span><span class="sxs-lookup"><span data-stu-id="85f04-306">Could be due to credential sync issue on dispatcher/worker node.</span></span> 

### <a name="pipeline-activities-monitoring"></a><span data-ttu-id="85f04-307">Monitoramento de atividades/de pipeline</span><span class="sxs-lookup"><span data-stu-id="85f04-307">Pipeline/ activities monitoring</span></span>
<span data-ttu-id="85f04-308">O Portal do Azure fornece uma experiência de monitoramento de pipeline com detalhes de nível de nó granulares.</span><span class="sxs-lookup"><span data-stu-id="85f04-308">The Azure portal provides a pipeline monitoring experience with granular node level details.</span></span> <span data-ttu-id="85f04-309">Por exemplo, ele mostra quais atividades foram executadas em qual nó.</span><span class="sxs-lookup"><span data-stu-id="85f04-309">For example, it shows which activities ran on which node.</span></span> <span data-ttu-id="85f04-310">Essas informações podem ser úteis para entender os problemas de desempenho em um nó específico, por exemplo, devido à limitação de rede.</span><span class="sxs-lookup"><span data-stu-id="85f04-310">This information can be helpful in understanding performance issues on a particular node, say due to network throttling.</span></span> 

![Gateway de Gerenciamento de Dados – monitoramento de vários nós para pipelines](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-multi-node-monitoring-pipelines.png)

![Gateway de Gerenciamento de Dados – detalhes do pipeline](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-multi-node-pipeline-details.png)

## <a name="scale-considerations"></a><span data-ttu-id="85f04-313">Considerações de escala</span><span class="sxs-lookup"><span data-stu-id="85f04-313">Scale considerations</span></span>

### <a name="scale-out"></a><span data-ttu-id="85f04-314">Expansão</span><span class="sxs-lookup"><span data-stu-id="85f04-314">Scale out</span></span>
<span data-ttu-id="85f04-315">Quando a **memória disponível está baixa** e o **uso de CPU é alto**, adicionar um novo nó ajuda a escalar horizontalmente a carga entre computadores.</span><span class="sxs-lookup"><span data-stu-id="85f04-315">When the **available memory is low** and the **CPU usage is high**, adding a new node helps scale out the load across machines.</span></span> <span data-ttu-id="85f04-316">Se as atividades estão falhando devido a tempo limite atingido ou ao nó do gateway ficar offline, ajuda adicionar um nó ao gateway.</span><span class="sxs-lookup"><span data-stu-id="85f04-316">If activities are failing due to time-out or gateway node being offline, it helps if you add a node to the gateway.</span></span>
 
### <a name="scale-up"></a><span data-ttu-id="85f04-317">Escalar verticalmente</span><span class="sxs-lookup"><span data-stu-id="85f04-317">Scale up</span></span>
<span data-ttu-id="85f04-318">Quando a memória e a CPU disponíveis não são bem utilizadas mas a capacidade ociosa é 0, você deve escalar verticalmente aumentando o número de trabalhos simultâneos que podem ser executados em um nó.</span><span class="sxs-lookup"><span data-stu-id="85f04-318">When the available memory and CPU are not utilized well, but the idle capacity is 0, you should scale up by increasing the number of concurrent jobs that can run on a node.</span></span> <span data-ttu-id="85f04-319">Também convém escalar verticalmente quando atividades estão atingindo o tempo limite porque o gateway está sobrecarregado.</span><span class="sxs-lookup"><span data-stu-id="85f04-319">You may also want to scale up when activities are timing out because the gateway is overloaded.</span></span> <span data-ttu-id="85f04-320">Conforme mostrado na imagem a seguir, você pode aumentar a capacidade máxima de um nó.</span><span class="sxs-lookup"><span data-stu-id="85f04-320">As shown in the following image, you can increase the maximum capacity for a node.</span></span> <span data-ttu-id="85f04-321">Sugerimos duplicá-la para começar.</span><span class="sxs-lookup"><span data-stu-id="85f04-321">We suggest doubling it to start with.</span></span>  

![Gateway de Gerenciamento de Dados – considerações de escala](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-scale-considerations.png)


## <a name="known-issuesbreaking-changes"></a><span data-ttu-id="85f04-323">Problemas conhecidas/últimas alterações</span><span class="sxs-lookup"><span data-stu-id="85f04-323">Known issues/breaking changes</span></span>

- <span data-ttu-id="85f04-324">No momento, você pode ter até quatro nós de gateway físico para um único gateway lógico.</span><span class="sxs-lookup"><span data-stu-id="85f04-324">Currently, you can have up to four physical gateway nodes for a single logical gateway.</span></span> <span data-ttu-id="85f04-325">Se você precisar de mais de quatro nós por motivos de desempenho, envie um email para [DMGHelp@microsoft.com](mailto:DMGHelp@microsoft.com).</span><span class="sxs-lookup"><span data-stu-id="85f04-325">If you need more than four nodes for performance reasons, send an email to [DMGHelp@microsoft.com](mailto:DMGHelp@microsoft.com).</span></span>
- <span data-ttu-id="85f04-326">Você não pode registrar novamente um nó de gateway com a chave de autenticação de outro gateway lógico para o qual mudar do gateway lógico atual.</span><span class="sxs-lookup"><span data-stu-id="85f04-326">You cannot re-register a gateway node with the authentication key from another logical gateway to switch from the current logical gateway.</span></span> <span data-ttu-id="85f04-327">Para registrar novamente, desinstale o gateway do nó, reinstale o gateway e registre-o com a chave de autenticação para o gateway lógico.</span><span class="sxs-lookup"><span data-stu-id="85f04-327">To re-register, uninstall the gateway from the node, reinstall the gateway, and register it with the authentication key for the other logical gateway.</span></span> 
- <span data-ttu-id="85f04-328">Se o proxy HTTP é necessário para todos os seus nós de gateway, configure o proxy em diahost.exe.config e diawp.exe.config e use o gerenciador do servidor para verificar se todos os nós têm os mesmos diahost.exe.config e diawip.exe.config. Consulte a seção [definir configurações de proxy](data-factory-data-management-gateway.md#configure-proxy-server-settings) para obter detalhes.</span><span class="sxs-lookup"><span data-stu-id="85f04-328">If HTTP proxy is required for all your gateway nodes, set the proxy in diahost.exe.config and diawp.exe.config, and use the server manager to make sure all nodes have the same diahost.exe.config and diawip.exe.config. See [configure proxy settings](data-factory-data-management-gateway.md#configure-proxy-server-settings) section for details.</span></span> 
- <span data-ttu-id="85f04-329">Para alterar o modo de criptografia para comunicação de nó para nó no Gerenciador de Configurações do Gateway, exclua todos os nós no portal, exceto um.</span><span class="sxs-lookup"><span data-stu-id="85f04-329">To change encryption mode for node-to-node communication in Gateway Configuration Manager, delete all the nodes in the portal except one.</span></span> <span data-ttu-id="85f04-330">Em seguida, adicione nós novamente depois de alterar o modo de criptografia.</span><span class="sxs-lookup"><span data-stu-id="85f04-330">Then, add nodes back after changing the encryption mode.</span></span>
- <span data-ttu-id="85f04-331">Use um certificado SSL oficial se você optar por criptografar o canal de comunicação de nó para nó.</span><span class="sxs-lookup"><span data-stu-id="85f04-331">Use an official SSL certificate if you choose to encrypt the node-to-node communication channel.</span></span> <span data-ttu-id="85f04-332">Um certificado autoassinado pode causar problemas de conectividade, já que o mesmo certificado pode não ser confiável na lista da autoridade de certificação em outros computadores.</span><span class="sxs-lookup"><span data-stu-id="85f04-332">Self-signed certificate may cause connectivity issues as the same certificate may not be trusted in certifying authority list on other machines.</span></span> 
- <span data-ttu-id="85f04-333">Você não pode registrar um nó de gateway para um gateway lógico quando a versão do nó é inferior à versão do gateway lógico.</span><span class="sxs-lookup"><span data-stu-id="85f04-333">You cannot register a gateway node to a logical gateway when the node version is lower than the logical gateway version.</span></span> <span data-ttu-id="85f04-334">Excluir todos os nós do gateway lógico do portal de forma que você possa registrar um nó de versão inferior (fazer downgrade dele).</span><span class="sxs-lookup"><span data-stu-id="85f04-334">Delete all nodes of the logical gateway from portal so that you can register a lower version node(downgrade) it.</span></span> <span data-ttu-id="85f04-335">Se você excluir todos os nós de um gateway lógico, instale manualmente e registre novos nós nesse gateway lógico.</span><span class="sxs-lookup"><span data-stu-id="85f04-335">If you delete all nodes of a logical gateway, manually install and register new nodes to that logical gateway.</span></span> <span data-ttu-id="85f04-336">Não há suporte para a instalação expressa nesse caso.</span><span class="sxs-lookup"><span data-stu-id="85f04-336">Express setup is not supported in this case.</span></span>
- <span data-ttu-id="85f04-337">Você não pode usar a instalação expressa para instalar nós em um gateway lógico existente, que ainda está usando credenciais de nuvem.</span><span class="sxs-lookup"><span data-stu-id="85f04-337">You cannot use express setup to install nodes to an existing logical gateway, which is still using cloud credentials.</span></span> <span data-ttu-id="85f04-338">Você pode verificar onde as credenciais são armazenadas do Gerenciador de Configurações do Gateway na guia Configurações.</span><span class="sxs-lookup"><span data-stu-id="85f04-338">You can check where the credentials are stored from the Gateway Configuration Manager on the Settings tab.</span></span>
- <span data-ttu-id="85f04-339">Você não pode usar a instalação expressa para instalar nós em um gateway lógico existente, que ainda tem criptografia de nó para nó habilitada.</span><span class="sxs-lookup"><span data-stu-id="85f04-339">You cannot use express setup to install nodes to an existing logical gateway, which has node-to-node encryption enabled.</span></span> <span data-ttu-id="85f04-340">Já que a configuração do modo de criptografia consiste em adicionar manualmente os certificados, a instalação expressa não é mais uma opção.</span><span class="sxs-lookup"><span data-stu-id="85f04-340">As setting the encryption mode involves manually adding certificates, express install is no more an option.</span></span> 
- <span data-ttu-id="85f04-341">Para obter uma cópia do arquivo do ambiente local, você não deve mais usar \\localhost ou C:\files, já que o localhost ou a unidade local podem não estar acessíveis por meio de todos os nós.</span><span class="sxs-lookup"><span data-stu-id="85f04-341">For a file copy from on-premises environment, you should not use \\localhost or C:\files anymore since localhost or local drive might not be accessible via all nodes.</span></span> <span data-ttu-id="85f04-342">Em vez disso, use \\ServerName\files para especificar o local dos arquivos.</span><span class="sxs-lookup"><span data-stu-id="85f04-342">Instead, use \\ServerName\files to specify files’ location.</span></span>


## <a name="rolling-back-from-the-preview"></a><span data-ttu-id="85f04-343">Revertendo da versão prévia</span><span class="sxs-lookup"><span data-stu-id="85f04-343">Rolling back from the preview</span></span> 
<span data-ttu-id="85f04-344">Para reverter da versão prévia, exclua todos os nós, com exceção de um.</span><span class="sxs-lookup"><span data-stu-id="85f04-344">To roll back from the preview, delete all nodes but one node.</span></span> <span data-ttu-id="85f04-345">Não importa quais nós você excluir, mas verifique se você tem pelo menos um nó no gateway lógico.</span><span class="sxs-lookup"><span data-stu-id="85f04-345">It doesn’t matter which nodes you delete, but ensure you have at least one node in the logical gateway.</span></span> <span data-ttu-id="85f04-346">Você pode excluir um nó desinstalando o gateway no computador ou usando o Portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="85f04-346">You can delete a node either by uninstalling gateway on the machine or by using the Azure portal.</span></span> <span data-ttu-id="85f04-347">No Portal do Azure, na página **Data Factory**, clique em Serviços vinculados para iniciar a página **Serviços vinculados**.</span><span class="sxs-lookup"><span data-stu-id="85f04-347">In the Azure portal, in the **Data Factory** page, click Linked services to launch the **Linked services** page.</span></span> <span data-ttu-id="85f04-348">Selecione o gateway para iniciar a página **Gateway**.</span><span class="sxs-lookup"><span data-stu-id="85f04-348">Select the gateway to launch the **Gateway** page.</span></span> <span data-ttu-id="85f04-349">Na página Gateway, você pode ver os nós associados ao gateway.</span><span class="sxs-lookup"><span data-stu-id="85f04-349">In the Gateway page, you can see the nodes associated with the gateway.</span></span> <span data-ttu-id="85f04-350">A página permite excluir um nó do gateway.</span><span class="sxs-lookup"><span data-stu-id="85f04-350">The page lets you delete a node from the gateway.</span></span>
 
<span data-ttu-id="85f04-351">Depois de excluí-lo, clique na **versão prévia dos recursos** na mesma página do Portal do Azure e desabilite a versão prévia do recurso.</span><span class="sxs-lookup"><span data-stu-id="85f04-351">After deleting, click **preview features** in the same Azure portal page, and disable the preview feature.</span></span> <span data-ttu-id="85f04-352">Você redefiniu o gateway para um gateway de um nó de DG (disponibilidade geral).</span><span class="sxs-lookup"><span data-stu-id="85f04-352">You have reset your gateway to one node GA (general availability) gateway.</span></span>


## <a name="next-steps"></a><span data-ttu-id="85f04-353">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="85f04-353">Next steps</span></span>
<span data-ttu-id="85f04-354">Examine os seguintes artigos:</span><span class="sxs-lookup"><span data-stu-id="85f04-354">Review the following articles:</span></span>
- <span data-ttu-id="85f04-355">[Gateway de Gerenciamento de Dados](data-factory-data-management-gateway.md) – fornece uma visão geral detalhada do gateway.</span><span class="sxs-lookup"><span data-stu-id="85f04-355">[Data Management Gateway](data-factory-data-management-gateway.md) - provides a detailed overview of the gateway.</span></span>
- <span data-ttu-id="85f04-356">[Mover dados entre locais e na nuvem armazenamentos de dados](data-factory-move-data-between-onprem-and-cloud.md) – contém um passo a passo com instruções passo a passo para usar um gateway com um único nó.</span><span class="sxs-lookup"><span data-stu-id="85f04-356">[Move data between on-premises and cloud data stores](data-factory-move-data-between-onprem-and-cloud.md) - contains a walkthrough with step-by-step instructions for using a gateway with a single node.</span></span> 
