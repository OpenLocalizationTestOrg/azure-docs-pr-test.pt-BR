---
title: "Práticas Recomendadas para o Serviço de Aplicativo do Azure"
description: "Aprenda as práticas recomendadas e solução de problemas do Serviço de Aplicativo do Azure."
services: app-service
documentationcenter: 
author: dariagrigoriu
manager: erikre
editor: mollybos
ms.assetid: f3359464-fa44-4f4a-9ea6-7821060e8d0d
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/30/2016
ms.author: dariagrigoriu
ms.openlocfilehash: fd94f5b17f69dec91c78c8acfbac2eaf5787c010
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/11/2017
---
# <a name="best-practices-for-azure-app-service"></a><span data-ttu-id="3c3d4-103">Práticas Recomendadas para o Serviço de Aplicativo do Azure</span><span class="sxs-lookup"><span data-stu-id="3c3d4-103">Best Practices for Azure App Service</span></span>
<span data-ttu-id="3c3d4-104">Este artigo resume as práticas recomendadas para usar o [Serviço de Aplicativo do Azure](http://go.microsoft.com/fwlink/?LinkId=529714).</span><span class="sxs-lookup"><span data-stu-id="3c3d4-104">This article summarizes best practices for using [Azure App Service](http://go.microsoft.com/fwlink/?LinkId=529714).</span></span> 

## <span data-ttu-id="3c3d4-105"><a name="colocation"></a>Colocação</span><span class="sxs-lookup"><span data-stu-id="3c3d4-105"><a name="colocation"></a>Colocation</span></span>
<span data-ttu-id="3c3d4-106">Quando recursos do Azure compondo uma solução, como um aplicativo Web e um banco de dados de recursos estão localizados em regiões diferentes, os efeitos podem incluir o seguinte:</span><span class="sxs-lookup"><span data-stu-id="3c3d4-106">When Azure resources composing a solution such as a web app and a database are located in different regions the effects can include the following:</span></span>

* <span data-ttu-id="3c3d4-107">Maior latência na comunicação entre recursos</span><span class="sxs-lookup"><span data-stu-id="3c3d4-107">Increased latency in communication between resources</span></span>
* <span data-ttu-id="3c3d4-108">Encargos monetários para transferência de dados de saída entre regiões, como observado na [página de preços do Azure](https://azure.microsoft.com/pricing/details/data-transfers)</span><span class="sxs-lookup"><span data-stu-id="3c3d4-108">Monetary charges for outbound data transfer cross-region as noted on the [Azure pricing page](https://azure.microsoft.com/pricing/details/data-transfers).</span></span>

<span data-ttu-id="3c3d4-109">A colocação na mesma região é melhor para que os recursos do Azure que compõem uma solução como um aplicativo Web e um banco de dados ou uma conta de armazenamento usada para armazenar conteúdo ou dados.</span><span class="sxs-lookup"><span data-stu-id="3c3d4-109">Colocation in the same region is best for Azure resources composing a solution such as a web app and a database or storage account used to hold content or data.</span></span> <span data-ttu-id="3c3d4-110">Durante a criação de recursos, você deve verificar se eles estão na mesma região do Azure, a menos que você tenha motivos de design ou de negócios específicos para que eles não estejam.</span><span class="sxs-lookup"><span data-stu-id="3c3d4-110">When creating resources you should make sure they are in the same Azure region unless you have specific business or design reason for them not to be.</span></span> <span data-ttu-id="3c3d4-111">Você pode mover um aplicativo do Serviço de Aplicativo para a mesma região do banco de dados utilizando o [recurso de clonagem de Serviço de Aplicativo](app-service-web-app-cloning-portal.md) atualmente disponível para aplicativos do Plano do Serviço de Aplicativo Premium.</span><span class="sxs-lookup"><span data-stu-id="3c3d4-111">You can move an App Service app to the same region as your database by leveraging the [App Service cloning feature](app-service-web-app-cloning-portal.md) currently available for Premium App Service Plan apps.</span></span>   

## <span data-ttu-id="3c3d4-112"><a name="memoryresources"></a>Quando aplicativos consomem mais memória do que o esperado</span><span class="sxs-lookup"><span data-stu-id="3c3d4-112"><a name="memoryresources"></a>When apps consume more memory than expected</span></span>
<span data-ttu-id="3c3d4-113">Quando você observar que um aplicativo consome mais memória do que o esperado, conforme indicado no monitoramento ou nas recomendações de serviço, considere o [recurso de Reparo Automático de Serviço de Aplicativo](https://azure.microsoft.com/blog/auto-healing-windows-azure-web-sites).</span><span class="sxs-lookup"><span data-stu-id="3c3d4-113">When you notice an app consumes more memory than expected as indicated via monitoring or service recommendations consider the [App Service Auto-Healing feature](https://azure.microsoft.com/blog/auto-healing-windows-azure-web-sites).</span></span> <span data-ttu-id="3c3d4-114">Uma das opções para o recurso de Reparo Automático é tomar ações personalizadas com base em um limite de memória.</span><span class="sxs-lookup"><span data-stu-id="3c3d4-114">One of the options for the Auto-Healing feature is taking custom actions based on a memory threshold.</span></span> <span data-ttu-id="3c3d4-115">Ações abrangem o espectro de notificações de email a investigação por meio de despejo de memória no ponto de atenuação ao reciclar o processo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="3c3d4-115">Actions span the spectrum from email notifications to investigation via memory dump to on-the-spot mitigation by recycling the worker process.</span></span> <span data-ttu-id="3c3d4-116">A Recuperação Automática pode ser configurada por meio de web.config e por meio de uma interface do usuário amigável, conforme descrito nesta postagem de blog para a [Extensão de Site de Suporte de Serviço de Aplicativo](https://azure.microsoft.com/blog/additional-updates-to-support-site-extension-for-azure-app-service-web-apps).</span><span class="sxs-lookup"><span data-stu-id="3c3d4-116">Auto-healing can be configured via web.config and via a friendly user interface as described at in this blog post for the [App Service Support Site Extension](https://azure.microsoft.com/blog/additional-updates-to-support-site-extension-for-azure-app-service-web-apps).</span></span>   

## <span data-ttu-id="3c3d4-117"><a name="CPUresources"></a>Quando aplicativos consomem mais CPU do que o esperado</span><span class="sxs-lookup"><span data-stu-id="3c3d4-117"><a name="CPUresources"></a>When apps consume more CPU than expected</span></span>
<span data-ttu-id="3c3d4-118">Quando você observar que um aplicativo consome mais CPU que o esperado ou enfrenta picos de CPU repetidos, conforme indicado pelo monitoramento ou pelas recomendações serviço, considere escalar verticalmente ou horizontalmente o plano de Serviço de Aplicativo.</span><span class="sxs-lookup"><span data-stu-id="3c3d4-118">When you notice an app consumes more CPU than expected or experiences repeated CPU spikes as indicated via monitoring or service recommendations consider scaling up or scaling out the App Service plan.</span></span> <span data-ttu-id="3c3d4-119">Se seu aplicativo estiver com estado, escalar verticalmente será a única opção, enquanto que, se seu aplicativo estiver sem estado, escalar horizontalmente dará mais flexibilidade e maior potencial de escala.</span><span class="sxs-lookup"><span data-stu-id="3c3d4-119">If your application is statefull, scaling up is the only option, while if your application is stateless, scaling out will give you more flexibility and higher scale potential.</span></span> 

<span data-ttu-id="3c3d4-120">Para saber mais sobre aplicativos "com estado" versus "sem estado", assista a este vídeo: [Planejando um aplicativo de várias camadas ponta a ponta escalonável no aplicativo Web do Microsoft Azure](https://channel9.msdn.com/Events/TechEd/NorthAmerica/2014/DEV-B414#fbid=?hashlink=fbid).</span><span class="sxs-lookup"><span data-stu-id="3c3d4-120">For more information about “statefull” vs “stateless” applications you can watch this video: [Planning a Scalable End-to-End Multi-Tier Application on Microsoft Azure Web App](https://channel9.msdn.com/Events/TechEd/NorthAmerica/2014/DEV-B414#fbid=?hashlink=fbid).</span></span> <span data-ttu-id="3c3d4-121">Para saber mais sobre como as opções de colocação em escala e dimensionamento automático, leia: [Dimensionar um aplicativo Web no Serviço de Aplicativo do Azure](web-sites-scale.md).</span><span class="sxs-lookup"><span data-stu-id="3c3d4-121">For more information about App Service scaling and autoscaling options read: [Scale a Web App in Azure App Service](web-sites-scale.md).</span></span>  

## <span data-ttu-id="3c3d4-122"><a name="socketresources"></a>Quando os recursos de soquete são exauridos</span><span class="sxs-lookup"><span data-stu-id="3c3d4-122"><a name="socketresources"></a>When socket resources are exhausted</span></span>
<span data-ttu-id="3c3d4-123">Uma razão comum para esgotar as conexões TCP de saída é o uso de bibliotecas de cliente que não são implementadas para reutilizar conexões TCP ou, no caso de um protocolo de nível superior, como HTTP - Keep-Alive não sendo utilizado.</span><span class="sxs-lookup"><span data-stu-id="3c3d4-123">A common reason for exhausting outbound TCP connections is the use of client libraries which are not implemented to reuse TCP connections, or in the case of a higher level protocol such as HTTP - Keep-Alive not being leveraged.</span></span> <span data-ttu-id="3c3d4-124">Consulte a documentação para cada uma das bibliotecas referenciadas pelos aplicativos no seu Plano de Serviço de Aplicativo para garantir que eles são configurados ou acessados em seu código para reutilização eficiente de conexões de saída.</span><span class="sxs-lookup"><span data-stu-id="3c3d4-124">Please review the documentation for each of the libraries referenced by the apps in your App Service Plan to ensure they are configured or accessed in your code for efficient reuse of outbound connections.</span></span> <span data-ttu-id="3c3d4-125">Além disso, siga as diretrizes de documentação biblioteca de criação correta e versão ou de limpeza para evitar vazamento de conexões.</span><span class="sxs-lookup"><span data-stu-id="3c3d4-125">Also follow the library documentation guidance for proper creation and release or cleanup to avoid leaking connections.</span></span> <span data-ttu-id="3c3d4-126">Embora essas investigações de bibliotecas de cliente estejam em andamento, o impacto pode ser reduzido escalando horizontalmente para várias instâncias.</span><span class="sxs-lookup"><span data-stu-id="3c3d4-126">While such client libraries investigations are in progress impact may be mitigated by scaling out to multiple instances.</span></span>  

## <span data-ttu-id="3c3d4-127"><a name="appbackup"></a>Quando o backup de seu aplicativo começa a falhar</span><span class="sxs-lookup"><span data-stu-id="3c3d4-127"><a name="appbackup"></a>When your app backup starts failing</span></span>
<span data-ttu-id="3c3d4-128">Os dois motivos mais comuns para as falhas no backup do aplicativo são: configurações de armazenamento inválidas e configuração de banco de dados inválida.</span><span class="sxs-lookup"><span data-stu-id="3c3d4-128">The two most common reasons why app backup fails are: invalid storage settings and invalid database configuration.</span></span> <span data-ttu-id="3c3d4-129">Essas falhas normalmente ocorrem quando há alterações de recursos de armazenamento ou do banco de dados, ou alterações no modo de acesso desses recursos (por exemplo, credenciais atualizadas para o banco de dados selecionado nas configurações de backup).</span><span class="sxs-lookup"><span data-stu-id="3c3d4-129">These failures typically happen when there are changes to storage or database resources, or changes for how to access these resources (e.g. credentials updated for the database selected in the backup settings).</span></span> <span data-ttu-id="3c3d4-130">Os backups são normalmente executados com base em um agendamento e exigem acesso ao armazenamento (para gerar o backup dos arquivos) e aos bancos de dados (para copiar e ler o conteúdo a ser incluído no backup).</span><span class="sxs-lookup"><span data-stu-id="3c3d4-130">Backups typically run on a schedule and require access to storage (for outputting the backed up files) and databases (for copying and reading contents to be included in the backup).</span></span> <span data-ttu-id="3c3d4-131">O resultado da falha de acesso de qualquer um desses recursos seria uma falha de backup consistente.</span><span class="sxs-lookup"><span data-stu-id="3c3d4-131">The result of failing to access either of these resources would be consistent backup failure.</span></span> 

<span data-ttu-id="3c3d4-132">Quando ocorrerem falhas de backup, examine os resultados mais recentes para entender qual tipo de falha está ocorrendo.</span><span class="sxs-lookup"><span data-stu-id="3c3d4-132">When backup failures happen, please review most recent results to understand which type of failure is happening.</span></span> <span data-ttu-id="3c3d4-133">No caso de falhas de acesso ao armazenamento, revise e atualize as configurações de armazenamento usadas na configuração do backup.</span><span class="sxs-lookup"><span data-stu-id="3c3d4-133">In the case of storage access failures, please review and update the storage settings used in the backup configuration.</span></span> <span data-ttu-id="3c3d4-134">No caso de falhas de acesso ao banco de dados, analise e atualize suas cadeias de conexão como parte das configurações do aplicativo; em seguida, atualize a configuração de backup para incluir corretamente os bancos de dados necessários.</span><span class="sxs-lookup"><span data-stu-id="3c3d4-134">In the case of database access failures, please review and update your connections strings as part of app settings; then proceed to update your backup configuration to properly include the required databases.</span></span> <span data-ttu-id="3c3d4-135">Para saber mais sobre o backup do aplicativo, confira a documentação [Fazer backup de um aplicativo Web no Serviço de Aplicativo do Azure](web-sites-backup.md) .</span><span class="sxs-lookup"><span data-stu-id="3c3d4-135">For more information on app backup please see the [Back up a web app in Azure App Service](web-sites-backup.md) documentation.</span></span>

## <span data-ttu-id="3c3d4-136"><a name="nodejs"></a>Quando novos aplicativos Node.js são implantados no Serviço de Aplicativo do Azure</span><span class="sxs-lookup"><span data-stu-id="3c3d4-136"><a name="nodejs"></a>When new Node.js apps are deployed to Azure App Service</span></span>
<span data-ttu-id="3c3d4-137">A configuração padrão do Serviço de Aplicativo do Azure para aplicativos Node.js destina-se a melhor atender às necessidades dos aplicativos mais comuns.</span><span class="sxs-lookup"><span data-stu-id="3c3d4-137">Azure App Service default configuration for Node.js apps is intended to best suit the needs of most common apps.</span></span> <span data-ttu-id="3c3d4-138">Se a configuração do seu aplicativo Node.js pode se beneficiar de ajustes personalizados para melhorar o desempenho ou otimizar o uso de recursos de memória/CPU/rede, consulte nossas práticas recomendadas e as etapas de solução de problemas.</span><span class="sxs-lookup"><span data-stu-id="3c3d4-138">If configuration for your Node.js app would benefit from personalized tuning to improve performance or optimize resource usage for CPU/memory/network resources, you could review our best practices and troubleshooting steps.</span></span> <span data-ttu-id="3c3d4-139">Esta documentação descreve as configurações de iisnode que podem precisar ser definidas seu aplicativo Node.js, descreve os vários cenários ou problemas que seu aplicativo pode enfrentar e mostra como resolver esses problemas: [Práticas recomendadas e guia de solução de problemas para aplicativos Node no Serviço de Aplicativo do Azure](app-service-web-nodejs-best-practices-and-troubleshoot-guide.md).</span><span class="sxs-lookup"><span data-stu-id="3c3d4-139">This documentation article describes the iisnode settings you may need to configure for your Node.js app, describes the various scenarios or issues that your app may be facing, and shows how to address these issues: [Best practices and troubleshooting guide for Node applications on Azure App Service](app-service-web-nodejs-best-practices-and-troubleshoot-guide.md).</span></span>   

