---
title: "Desempenho lento do aplicativo Web no Serviço de Aplicativo | Microsoft Docs"
description: "Este artigo ajuda você a solucionar problemas de desempenho de aplicativo Web lento no Serviço de Aplicativo do Azure."
services: app-service\web
documentationcenter: 
author: cephalin
manager: erikre
editor: 
tags: top-support-issue
keywords: "desempenho do aplicativo Web, aplicativo lento, lentidão do aplicativo"
ms.assetid: b8783c10-3a4a-4dd6-af8c-856baafbdde5
ms.service: app-service-web
ms.workload: web
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/03/2016
ms.author: cephalin
ms.openlocfilehash: 1cfe7ec37ad8b24a8bd9ab2bf67e95675a57b675
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/18/2017
---
# <a name="troubleshoot-slow-web-app-performance-issues-in-azure-app-service"></a><span data-ttu-id="0b54d-104">Solucionar problemas de desempenho de aplicativo Web lento no Serviço de Aplicativo do Azure</span><span class="sxs-lookup"><span data-stu-id="0b54d-104">Troubleshoot slow web app performance issues in Azure App Service</span></span>
<span data-ttu-id="0b54d-105">Este artigo ajuda você a solucionar problemas de desempenho de aplicativo Web lento no [Serviço de Aplicativo do Azure](http://go.microsoft.com/fwlink/?LinkId=529714).</span><span class="sxs-lookup"><span data-stu-id="0b54d-105">This article helps you troubleshoot slow web app performance issues in [Azure App Service](http://go.microsoft.com/fwlink/?LinkId=529714).</span></span>

<span data-ttu-id="0b54d-106">Se você precisar de mais ajuda em qualquer momento neste artigo, você pode contatar os especialistas do Azure nos [fóruns do Azure MSDN e Excedente de Pilha](https://azure.microsoft.com/support/forums/).</span><span class="sxs-lookup"><span data-stu-id="0b54d-106">If you need more help at any point in this article, you can contact the Azure experts on [the MSDN Azure and the Stack Overflow forums](https://azure.microsoft.com/support/forums/).</span></span> <span data-ttu-id="0b54d-107">Como alternativa, você também pode registrar um incidente de suporte do Azure.</span><span class="sxs-lookup"><span data-stu-id="0b54d-107">Alternatively, you can also file an Azure support incident.</span></span> <span data-ttu-id="0b54d-108">Acesse o [site de Suporte do Azure](https://azure.microsoft.com/support/options/) e clique em **Obter Suporte**.</span><span class="sxs-lookup"><span data-stu-id="0b54d-108">Go to the [Azure Support site](https://azure.microsoft.com/support/options/) and click on **Get Support**.</span></span>

## <a name="symptom"></a><span data-ttu-id="0b54d-109">Sintoma</span><span class="sxs-lookup"><span data-stu-id="0b54d-109">Symptom</span></span>
<span data-ttu-id="0b54d-110">Quando você procura o aplicativo Web, as páginas carregam lentamente e, às vezes, o tempo limite é atingido.</span><span class="sxs-lookup"><span data-stu-id="0b54d-110">When you browse the web app, the pages load slowly and sometimes timeout.</span></span>

## <a name="cause"></a><span data-ttu-id="0b54d-111">Causa</span><span class="sxs-lookup"><span data-stu-id="0b54d-111">Cause</span></span>
<span data-ttu-id="0b54d-112">Esse problema geralmente é causado por questões no nível de aplicativo, como:</span><span class="sxs-lookup"><span data-stu-id="0b54d-112">This problem is often caused by application level issues, such as:</span></span>

* <span data-ttu-id="0b54d-113">solicitações de rede demorando muito</span><span class="sxs-lookup"><span data-stu-id="0b54d-113">network requests taking a long time</span></span>
* <span data-ttu-id="0b54d-114">código de aplicativo ou consultas de banco de dados sendo ineficientes</span><span class="sxs-lookup"><span data-stu-id="0b54d-114">application code or database queries being inefficient</span></span>
* <span data-ttu-id="0b54d-115">aplicativo usando muita memória/CPU</span><span class="sxs-lookup"><span data-stu-id="0b54d-115">application using high memory/CPU</span></span>
* <span data-ttu-id="0b54d-116">aplicativo falhando devido a uma exceção</span><span class="sxs-lookup"><span data-stu-id="0b54d-116">application crashing due to an exception</span></span>

## <a name="troubleshooting-steps"></a><span data-ttu-id="0b54d-117">Etapas para solucionar problemas</span><span class="sxs-lookup"><span data-stu-id="0b54d-117">Troubleshooting steps</span></span>
<span data-ttu-id="0b54d-118">A solução de problemas pode ser dividida em três tarefas distintas, em ordem sequencial:</span><span class="sxs-lookup"><span data-stu-id="0b54d-118">Troubleshooting can be divided into three distinct tasks, in sequential order:</span></span>

1. [<span data-ttu-id="0b54d-119">Observar e monitorar o comportamento do aplicativo</span><span class="sxs-lookup"><span data-stu-id="0b54d-119">Observe and monitor application behavior</span></span>](#observe)
2. [<span data-ttu-id="0b54d-120">Coletar dados</span><span class="sxs-lookup"><span data-stu-id="0b54d-120">Collect data</span></span>](#collect)
3. [<span data-ttu-id="0b54d-121">Atenuar o problema</span><span class="sxs-lookup"><span data-stu-id="0b54d-121">Mitigate the issue</span></span>](#mitigate)

<span data-ttu-id="0b54d-122">[Os Aplicativos Web do Serviço de Aplicativo](/services/app-service/web/) oferecem várias opções em cada etapa.</span><span class="sxs-lookup"><span data-stu-id="0b54d-122">[App Service Web Apps](/services/app-service/web/) gives you various options at each step.</span></span>

<a name="observe" />

### <a name="1-observe-and-monitor-application-behavior"></a><span data-ttu-id="0b54d-123">1. Observar e monitorar o comportamento do aplicativo</span><span class="sxs-lookup"><span data-stu-id="0b54d-123">1. Observe and monitor application behavior</span></span>
#### <a name="track-service-health"></a><span data-ttu-id="0b54d-124">Controlar a integridade do serviço</span><span class="sxs-lookup"><span data-stu-id="0b54d-124">Track Service health</span></span>
<span data-ttu-id="0b54d-125">O Microsoft Azure publica sempre que há uma degradação no desempenho ou interrupção do serviço.</span><span class="sxs-lookup"><span data-stu-id="0b54d-125">Microsoft Azure publicizes each time there is a service interruption or performance degradation.</span></span> <span data-ttu-id="0b54d-126">Você pode controlar a integridade do serviço no [Portal do Azure](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="0b54d-126">You can track the health of the service on the [Azure portal](https://portal.azure.com/).</span></span> <span data-ttu-id="0b54d-127">Para obter mais informações, confira [Controlar a integridade do serviço](../monitoring-and-diagnostics/insights-service-health.md).</span><span class="sxs-lookup"><span data-stu-id="0b54d-127">For more information, see [Track service health](../monitoring-and-diagnostics/insights-service-health.md).</span></span>

#### <a name="monitor-your-web-app"></a><span data-ttu-id="0b54d-128">Monitorar seu aplicativo Web</span><span class="sxs-lookup"><span data-stu-id="0b54d-128">Monitor your web app</span></span>
<span data-ttu-id="0b54d-129">Essa opção permite que você descubra se seu aplicativo está com problemas.</span><span class="sxs-lookup"><span data-stu-id="0b54d-129">This option enables you to find out if your application is having any issues.</span></span> <span data-ttu-id="0b54d-130">Na folha de seu aplicativo Web, clique no bloco **Solicitações e erros** .</span><span class="sxs-lookup"><span data-stu-id="0b54d-130">In your web app’s blade, click the **Requests and errors** tile.</span></span> <span data-ttu-id="0b54d-131">A folha **Métrica** mostra todas as métricas que você pode adicionar.</span><span class="sxs-lookup"><span data-stu-id="0b54d-131">The **Metric** blade shows you all the metrics you can add.</span></span>

<span data-ttu-id="0b54d-132">Algumas das métricas que deseja monitorar para seu aplicativo Web são</span><span class="sxs-lookup"><span data-stu-id="0b54d-132">Some of the metrics that you might want to monitor for your web app are</span></span>

* <span data-ttu-id="0b54d-133">Conjunto de trabalho de memória média</span><span class="sxs-lookup"><span data-stu-id="0b54d-133">Average memory working set</span></span>
* <span data-ttu-id="0b54d-134">Tempo médio de resposta</span><span class="sxs-lookup"><span data-stu-id="0b54d-134">Average response time</span></span>
* <span data-ttu-id="0b54d-135">Tempo de CPU</span><span class="sxs-lookup"><span data-stu-id="0b54d-135">CPU time</span></span>
* <span data-ttu-id="0b54d-136">Conjunto de trabalho de memória</span><span class="sxs-lookup"><span data-stu-id="0b54d-136">Memory working set</span></span>
* <span data-ttu-id="0b54d-137">Solicitações</span><span class="sxs-lookup"><span data-stu-id="0b54d-137">Requests</span></span>

![monitorar o desempenho do aplicativo Web](./media/app-service-web-troubleshoot-performance-degradation/1-monitor-metrics.png)

<span data-ttu-id="0b54d-139">Para obter mais informações, consulte:</span><span class="sxs-lookup"><span data-stu-id="0b54d-139">For more information, see:</span></span>

* [<span data-ttu-id="0b54d-140">Monitorar aplicativos Web no Serviço de Aplicativo do Azure</span><span class="sxs-lookup"><span data-stu-id="0b54d-140">Monitor Web Apps in Azure App Service</span></span>](web-sites-monitor.md)
* [<span data-ttu-id="0b54d-141">Receber notificações de alerta</span><span class="sxs-lookup"><span data-stu-id="0b54d-141">Receive alert notifications</span></span>](../monitoring-and-diagnostics/insights-receive-alert-notifications.md)

#### <a name="monitor-web-endpoint-status"></a><span data-ttu-id="0b54d-142">Monitorar o status de ponto de extremidade da Web</span><span class="sxs-lookup"><span data-stu-id="0b54d-142">Monitor web endpoint status</span></span>
<span data-ttu-id="0b54d-143">Se você estiver executando seu aplicativo Web no tipo de preço **Standard**, Aplicativos Web permitem que você monitore dois pontos de extremidade de três locais geográficos.</span><span class="sxs-lookup"><span data-stu-id="0b54d-143">If you are running your web app in the **Standard** pricing tier, Web Apps lets you monitor two endpoints from three geographic locations.</span></span>

<span data-ttu-id="0b54d-144">O monitoramento de ponto de extremidade configura testes da web de locais distribuídos geograficamente que testa o tempo de resposta e tempo de atividade de URLs de web.</span><span class="sxs-lookup"><span data-stu-id="0b54d-144">Endpoint monitoring configures web tests from geo-distributed locations that test response time and uptime of web URLs.</span></span> <span data-ttu-id="0b54d-145">O teste executa uma operação HTTP GET na URL da Web para determinar o tempo de resposta e o tempo de atividade de cada local.</span><span class="sxs-lookup"><span data-stu-id="0b54d-145">The test performs an HTTP GET operation on the web URL to determine the response time and uptime from each location.</span></span> <span data-ttu-id="0b54d-146">Cada local configurado executa um teste a cada cinco minutos.</span><span class="sxs-lookup"><span data-stu-id="0b54d-146">Each configured location runs a test every five minutes.</span></span>

<span data-ttu-id="0b54d-147">O tempo de atividade é monitorado usando códigos de resposta HTTP e o tempo de resposta é medido em milissegundos.</span><span class="sxs-lookup"><span data-stu-id="0b54d-147">Uptime is monitored using HTTP response codes, and response time is measured in milliseconds.</span></span> <span data-ttu-id="0b54d-148">Um teste de monitoramento falhará se o código de resposta HTTP for maior ou igual a 400 ou se a resposta demorar mais de 30 segundos.</span><span class="sxs-lookup"><span data-stu-id="0b54d-148">A monitoring test fails if the HTTP response code is greater than or equal to 400 or if the response takes more than 30 seconds.</span></span> <span data-ttu-id="0b54d-149">Um ponto de extremidade será considerado disponível caso seus testes de monitoramento tenham êxito a partir de todos os locais especificados.</span><span class="sxs-lookup"><span data-stu-id="0b54d-149">An endpoint is considered available if its monitoring tests succeed from all the specified locations.</span></span>

<span data-ttu-id="0b54d-150">Para configurá-lo, veja [Monitorar aplicativos Web no Serviço de Aplicativo do Azure](web-sites-monitor.md).</span><span class="sxs-lookup"><span data-stu-id="0b54d-150">To set it up, see [Monitor apps in Azure App Service](web-sites-monitor.md).</span></span>

<span data-ttu-id="0b54d-151">Veja também um vídeo sobre monitoramento de pontos de extremidade em [Mantendo os sites do Azure ativos e monitorando pontos de extremidade - com Stefan Schackow](https://channel9.msdn.com/Shows/Azure-Friday/Keeping-Azure-Web-Sites-up-plus-Endpoint-Monitoring-with-Stefan-Schackow)</span><span class="sxs-lookup"><span data-stu-id="0b54d-151">Also, see [Keeping Azure Web Sites up plus Endpoint Monitoring - with Stefan Schackow](https://channel9.msdn.com/Shows/Azure-Friday/Keeping-Azure-Web-Sites-up-plus-Endpoint-Monitoring-with-Stefan-Schackow) for a video on endpoint monitoring.</span></span>

#### <a name="application-performance-monitoring-using-extensions"></a><span data-ttu-id="0b54d-152">Monitoramento de desempenho de aplicativos usando extensões</span><span class="sxs-lookup"><span data-stu-id="0b54d-152">Application performance monitoring using Extensions</span></span>
<span data-ttu-id="0b54d-153">Você também pode monitorar o desempenho do aplicativo usando *extensões de site*.</span><span class="sxs-lookup"><span data-stu-id="0b54d-153">You can also monitor your application performance by using *site extensions*.</span></span>

<span data-ttu-id="0b54d-154">Cada aplicativo Web do Serviço de Aplicativo fornece um ponto de extremidade de gerenciamento extensível que permite que você use um conjunto poderoso de ferramentas implantados como extensões de site.</span><span class="sxs-lookup"><span data-stu-id="0b54d-154">Each App Service web app provides an extensible management end point that allows you to use a powerful set of tools deployed as site extensions.</span></span> <span data-ttu-id="0b54d-155">As extensões incluem:</span><span class="sxs-lookup"><span data-stu-id="0b54d-155">Extensions include:</span></span> 

- <span data-ttu-id="0b54d-156">Editores de código-fonte, como o [Visual Studio Team Services](https://www.visualstudio.com/products/what-is-visual-studio-online-vs.aspx).</span><span class="sxs-lookup"><span data-stu-id="0b54d-156">Source code editors like [Visual Studio Team Services](https://www.visualstudio.com/products/what-is-visual-studio-online-vs.aspx).</span></span> 
- <span data-ttu-id="0b54d-157">Ferramentas de gerenciamento de recursos conectados, tais como um banco de dados MySQL conectado a um aplicativo Web.</span><span class="sxs-lookup"><span data-stu-id="0b54d-157">Management tools for connected resources such as a MySQL database connected to a web app.</span></span>

<span data-ttu-id="0b54d-158">O [Azure Application Insights](/services/application-insights/) e o [New Relic](/marketplace/partners/newrelic/newrelic/) são duas das extensões de site para monitoramento de desempenho que estão disponíveis.</span><span class="sxs-lookup"><span data-stu-id="0b54d-158">[Azure Application Insights](/services/application-insights/) and [New Relic](/marketplace/partners/newrelic/newrelic/) are two of the performance monitoring site extensions that are available.</span></span> <span data-ttu-id="0b54d-159">Para usar o New Relic, instale um agente em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="0b54d-159">To use New Relic, you install an agent at runtime.</span></span> <span data-ttu-id="0b54d-160">Para usar o Application Insights do Azure, recrie seu código com um SDK. Você também pode instalar uma extensão que fornece acesso a dados adicionais.</span><span class="sxs-lookup"><span data-stu-id="0b54d-160">To use Azure Application Insights, you rebuild your code with an SDK, and you can also install an extension that provides access to additional data.</span></span> <span data-ttu-id="0b54d-161">O SDK permite que você escreva código para monitorar o uso e o desempenho de seu aplicativo em mais detalhes.</span><span class="sxs-lookup"><span data-stu-id="0b54d-161">The SDK lets you write code to monitor the usage and performance of your app in more detail.</span></span>

<span data-ttu-id="0b54d-162">Para usar o Application Insights, consulte [Monitorar o desempenho em aplicativos Web](../application-insights/app-insights-web-monitor-performance.md).</span><span class="sxs-lookup"><span data-stu-id="0b54d-162">To use Application Insights, see [Monitor performance in web applications](../application-insights/app-insights-web-monitor-performance.md).</span></span>

<span data-ttu-id="0b54d-163">Consulte [Gerenciamento de desempenho do aplicativo New Relic nos sites do Azure](../store-new-relic-cloud-services-dotnet-application-performance-management.md).</span><span class="sxs-lookup"><span data-stu-id="0b54d-163">To use New Relic, see [New Relic Application Performance Management on Azure](../store-new-relic-cloud-services-dotnet-application-performance-management.md).</span></span>

<a name="collect" />

### <a name="2-collect-data"></a><span data-ttu-id="0b54d-164">2. Coletar dados</span><span class="sxs-lookup"><span data-stu-id="0b54d-164">2. Collect data</span></span>
<span data-ttu-id="0b54d-165">O ambiente do Aplicativos Web oferece funcionalidade de diagnóstico para registro em log tanto de informações do servidor Web quanto do aplicativo Web.</span><span class="sxs-lookup"><span data-stu-id="0b54d-165">The Web Apps environment provides diagnostic functionality for logging information from both the web server and the web application.</span></span> <span data-ttu-id="0b54d-166">As informações estão separadas em diagnóstico de servidor Web e diagnóstico de aplicativos.</span><span class="sxs-lookup"><span data-stu-id="0b54d-166">The information is separated into web server diagnostics and application diagnostics.</span></span>

#### <a name="enable-web-server-diagnostics"></a><span data-ttu-id="0b54d-167">Habilitar o diagnóstico de servidor Web</span><span class="sxs-lookup"><span data-stu-id="0b54d-167">Enable web server diagnostics</span></span>
<span data-ttu-id="0b54d-168">Você pode habilitar ou desabilitar os seguintes tipos de logs:</span><span class="sxs-lookup"><span data-stu-id="0b54d-168">You can enable or disable the following kinds of logs:</span></span>

* <span data-ttu-id="0b54d-169">**Registro em Log Detalhado de Erros** - informações detalhadas de erros para códigos de status HTTP que indiquem uma falha (código de status 400 ou superior).</span><span class="sxs-lookup"><span data-stu-id="0b54d-169">**Detailed Error Logging** - Detailed error information for HTTP status codes that indicate a failure (status code 400 or greater).</span></span> <span data-ttu-id="0b54d-170">Isto pode conter informações que podem ajudar a determinar por que o servidor retornou o código de erro.</span><span class="sxs-lookup"><span data-stu-id="0b54d-170">This may contain information that can help determine why the server returned the error code.</span></span>
* <span data-ttu-id="0b54d-171">**Falha no Rastreamento de Solicitação** - informações detalhadas sobre solicitações com falha, incluindo um rastreamento dos componentes IIS usados para processar a solicitação e o tempo levado em cada componente.</span><span class="sxs-lookup"><span data-stu-id="0b54d-171">**Failed Request Tracing** - Detailed information on failed requests, including a trace of the IIS components used to process the request and the time taken in each component.</span></span> <span data-ttu-id="0b54d-172">Isto pode ser útil se você está tentando melhorar o desempenho do aplicativo Web ou isolar o que está causando um erro específico de HTTP.</span><span class="sxs-lookup"><span data-stu-id="0b54d-172">This can be useful if you are attempting to improve web app performance or isolate what is causing a specific HTTP error.</span></span>
* <span data-ttu-id="0b54d-173">**Registro em Log de Servidor Web** - informações sobre transações HTTP usando o formato de arquivo de log estendido W3C.</span><span class="sxs-lookup"><span data-stu-id="0b54d-173">**Web Server Logging** - Information about HTTP transactions using the W3C extended log file format.</span></span> <span data-ttu-id="0b54d-174">Este é útil para determinar as métricas gerais do aplicativo Web, como o número de solicitações manipuladas e quantas solicitações existem vindas de um endereço IP específico.</span><span class="sxs-lookup"><span data-stu-id="0b54d-174">This is useful when determining overall web app metrics, such as the number of requests handled or how many requests are from a specific IP address.</span></span>

#### <a name="enable-application-diagnostics"></a><span data-ttu-id="0b54d-175">Habilitar o diagnóstico de aplicativos</span><span class="sxs-lookup"><span data-stu-id="0b54d-175">Enable application diagnostics</span></span>
<span data-ttu-id="0b54d-176">Há várias opções para coletar dados de desempenho do aplicativo de Aplicativos Web, criar o perfil do aplicativo em tempo real por meio do Visual Studio ou modificar o código do aplicativo para registrar mais informações e rastreamentos em log.</span><span class="sxs-lookup"><span data-stu-id="0b54d-176">There are several options to collect application performance data from Web Apps, profile your application live from Visual Studio, or modify your application code to log more information and traces.</span></span> <span data-ttu-id="0b54d-177">Você pode escolher as opções com base no nível de acesso que tem ao aplicativo e no que observou por meio das ferramentas de monitoramento.</span><span class="sxs-lookup"><span data-stu-id="0b54d-177">You can choose the options based on how much access you have to the application and what you observed from the monitoring tools.</span></span>

##### <a name="use-application-insights-profiler"></a><span data-ttu-id="0b54d-178">Use o Application Insights Profiler</span><span class="sxs-lookup"><span data-stu-id="0b54d-178">Use Application Insights Profiler</span></span>
<span data-ttu-id="0b54d-179">Você pode habilitar o Application Insights Profiler para iniciar a captura de rastreamentos de desempenho detalhados.</span><span class="sxs-lookup"><span data-stu-id="0b54d-179">You can enable the Application Insights Profiler to start capturing detailed performance traces.</span></span> <span data-ttu-id="0b54d-180">Quando é necessário investigar problemas ocorridos no passado, você pode acessar os rastreamentos até cinco dias atrás.</span><span class="sxs-lookup"><span data-stu-id="0b54d-180">You can access traces captured up to five days ago when you need to investigate problems happened in the past.</span></span> <span data-ttu-id="0b54d-181">Você pode escolher essa opção, contanto que tenha acesso ao recurso do Application Insights do aplicativo Web no Portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="0b54d-181">You can choose this option as long as you have access to the web app's Application Insights resource on Azure portal.</span></span>

<span data-ttu-id="0b54d-182">O Application Insights Profiler fornece estatísticas em tempo de resposta para cada chamada Web e os rastreamentos que indicam qual linha de código causou as respostas lentas.</span><span class="sxs-lookup"><span data-stu-id="0b54d-182">Application Insights Profiler provides statistics on response time for each web call and traces that indicates which line of code caused the slow responses.</span></span> <span data-ttu-id="0b54d-183">Às vezes, o aplicativo de Serviço de Aplicativo está lento porque determinados códigos não são gravados de uma maneira mais eficaz.</span><span class="sxs-lookup"><span data-stu-id="0b54d-183">Sometimes the App Service app is slow because certain code is not written in a performant way.</span></span> <span data-ttu-id="0b54d-184">Exemplos incluem um código sequencial que pode ser executado em contenções de bloqueio do banco de dados paralelas e indesejadas.</span><span class="sxs-lookup"><span data-stu-id="0b54d-184">Examples include sequential code that can be run in parallel and undesired database lock contentions.</span></span> <span data-ttu-id="0b54d-185">Remover esses afunilamentos no código aumenta o desempenho do aplicativo, mas eles são difíceis de detectar sem configurar logs e rastreamentos elaborados.</span><span class="sxs-lookup"><span data-stu-id="0b54d-185">Removing these bottlenecks in the code increases the app's performance, but they are hard to detect without setting up elaborate traces and logs.</span></span> <span data-ttu-id="0b54d-186">Os rastreamentos coletados pelo Application Insights Profiler ajudam a identificar as linhas de código que deixam o aplicativo lento e a superar esse desafio para os aplicativos do Serviço de Aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0b54d-186">The traces collected by Application Insights Profiler helps identifying the lines of code that slows down the application and overcome this challenge for App Service apps.</span></span>

 <span data-ttu-id="0b54d-187">Para obter mais informações, consulte [Criação de perfil de aplicativos Web do Azure ativos com o Application Insights](../application-insights/app-insights-profiler.md).</span><span class="sxs-lookup"><span data-stu-id="0b54d-187">For more information, see [Profiling live Azure web apps with Application Insights](../application-insights/app-insights-profiler.md).</span></span>

##### <a name="use-remote-profiling"></a><span data-ttu-id="0b54d-188">Usar a criação de perfil remota</span><span class="sxs-lookup"><span data-stu-id="0b54d-188">Use Remote Profiling</span></span>
<span data-ttu-id="0b54d-189">No Serviço de Aplicativo do Azure, Aplicativos Web, Aplicativos de API e WebJobs podem ter perfis criados remotamente.</span><span class="sxs-lookup"><span data-stu-id="0b54d-189">In Azure App Service, Web Apps, API Apps, and WebJobs can be remotely profiled.</span></span> <span data-ttu-id="0b54d-190">Escolha esta opção se você tem acesso ao recurso de aplicativo Web e sabe como reproduzir o problema ou se você sabe o intervalo de hora exata em que o problema de desempenho ocorre.</span><span class="sxs-lookup"><span data-stu-id="0b54d-190">Choose this option if you have access to the web app resource and you know how to reproduce the issue, or if you know the exact time interval the performance issue happens.</span></span>

<span data-ttu-id="0b54d-191">A criação de perfil remota é útil se o uso da CPU do processo é alto e o processo está sendo executado mais lentamente do que o esperado ou se a latência de solicitações HTTP estão acima do normal; você pode criar remotamente o perfil de seu processo e obter as pilhas de chamadas de amostragem de CPU para analisar a atividade do processo e afunilamentos de código.</span><span class="sxs-lookup"><span data-stu-id="0b54d-191">Remote Profiling is useful if the CPU usage of the process is high and your process is running slower than expected, or the latency of HTTP requests are higher than normal, you can remotely profile your process and get the CPU sampling call stacks to analyze the process activity and code hot paths.</span></span>

<span data-ttu-id="0b54d-192">Para obter mais informações, consulte [Suporte à criação de perfil remota no Serviço de Aplicativo do Azure](https://azure.microsoft.com/blog/remote-profiling-support-in-azure-app-service).</span><span class="sxs-lookup"><span data-stu-id="0b54d-192">For more information, see [Remote Profiling support in Azure App Service](https://azure.microsoft.com/blog/remote-profiling-support-in-azure-app-service).</span></span>

##### <a name="set-up-diagnostic-traces-manually"></a><span data-ttu-id="0b54d-193">Configurar manualmente os rastreamentos de diagnóstico</span><span class="sxs-lookup"><span data-stu-id="0b54d-193">Set up diagnostic traces manually</span></span>
<span data-ttu-id="0b54d-194">Se você tem acesso ao código-fonte do aplicativo Web, o Diagnóstico de Aplicativos permite que você capture informações produzidas por um aplicativo Web.</span><span class="sxs-lookup"><span data-stu-id="0b54d-194">If you have access to the web application source code, Application diagnostics enables you to capture information produced by a web application.</span></span> <span data-ttu-id="0b54d-195">Os aplicativos ASP.NET podem usar a classe `System.Diagnostics.Trace` para registrar informações no log de diagnóstico do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0b54d-195">ASP.NET applications can use the `System.Diagnostics.Trace` class to log information to the application diagnostics log.</span></span> <span data-ttu-id="0b54d-196">No entanto, você precisa alterar o código e reimplantar o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0b54d-196">However, you need to change the code and redeploy your application.</span></span> <span data-ttu-id="0b54d-197">Esse método é recomendado se o aplicativo está sendo executado em um ambiente de teste.</span><span class="sxs-lookup"><span data-stu-id="0b54d-197">This method is recommended if your app is running on a testing environment.</span></span>

<span data-ttu-id="0b54d-198">Para obter instruções detalhadas sobre como configurar seu aplicativo para registro em log, consulte [Habilitar o log de diagnóstico para aplicativos Web no Serviço de Aplicativo do Azure](web-sites-enable-diagnostic-log.md).</span><span class="sxs-lookup"><span data-stu-id="0b54d-198">For detailed instructions on how to configure your application for logging, see [Enable diagnostics logging for web apps in Azure App Service](web-sites-enable-diagnostic-log.md).</span></span>

#### <a name="use-the-azure-app-service-support-portal"></a><span data-ttu-id="0b54d-199">Usar o portal de suporte do Serviço de Aplicativo do Azure</span><span class="sxs-lookup"><span data-stu-id="0b54d-199">Use the Azure App Service support portal</span></span>
<span data-ttu-id="0b54d-200">Os Aplicativos Web fornecem a capacidade de solucionar problemas relacionados ao seu aplicativo Web examinando logs de HTTP, logs de eventos, despejos de processo e muito mais.</span><span class="sxs-lookup"><span data-stu-id="0b54d-200">Web Apps provides you with the ability to troubleshoot issues related to your web app by looking at HTTP logs, event logs, process dumps, and more.</span></span> <span data-ttu-id="0b54d-201">Você pode acessar todas essas informações usando nosso portal de Suporte em **http://&lt;nome do aplicativo>.scm.azurewebsites.net/Support**</span><span class="sxs-lookup"><span data-stu-id="0b54d-201">You can access all this information using our Support portal at **http://&lt;your app name>.scm.azurewebsites.net/Support**</span></span>

<span data-ttu-id="0b54d-202">O portal de suporte do Serviço de Aplicativo do Azure fornece três guias separadas para dar suporte às três etapas de um cenário de solução de problemas comum:</span><span class="sxs-lookup"><span data-stu-id="0b54d-202">The Azure App Service support portal provides you with three separate tabs to support the three steps of a common troubleshooting scenario:</span></span>

1. <span data-ttu-id="0b54d-203">Observar o comportamento atual</span><span class="sxs-lookup"><span data-stu-id="0b54d-203">Observe current behavior</span></span>
2. <span data-ttu-id="0b54d-204">Analisar por meio da coleta das informações de diagnóstico e da execução dos analisadores internos</span><span class="sxs-lookup"><span data-stu-id="0b54d-204">Analyze by collecting diagnostics information and running the built-in analyzers</span></span>
3. <span data-ttu-id="0b54d-205">Atenuar</span><span class="sxs-lookup"><span data-stu-id="0b54d-205">Mitigate</span></span>

<span data-ttu-id="0b54d-206">Se o problema estiver ocorrendo no momento, clique em **Analisar** > **Diagnóstico** > **Diagnosticar Agora** para criar uma sessão de diagnóstico para você, a qual coletará logs de HTTP, logs do visualizador de eventos, despejos de memória, logs de erros de PHP e relatórios de processo de PHP.</span><span class="sxs-lookup"><span data-stu-id="0b54d-206">If the issue is happening right now, click **Analyze** > **Diagnostics** > **Diagnose Now** to create a diagnostic session for you, which collects HTTP logs, event viewer logs, memory dumps, PHP error logs, and PHP process report.</span></span>

<span data-ttu-id="0b54d-207">Depois que os dados forem coletados, ela também executará uma análise dos dados e fornecerá um relatório HTML.</span><span class="sxs-lookup"><span data-stu-id="0b54d-207">Once the data is collected, the support portal runs an analysis on the data and provides you with an HTML report.</span></span>

<span data-ttu-id="0b54d-208">Caso queira baixar os dados, por padrão, estariam armazenados na pasta D:\home\data\DaaS.</span><span class="sxs-lookup"><span data-stu-id="0b54d-208">In case you want to download the data, by default, it would be stored in the D:\home\data\DaaS folder.</span></span>

<span data-ttu-id="0b54d-209">Para saber mais sobre o portal de suporte do Serviço de Aplicativo do Azure, consulte [Novas atualizações para suporte de extensão de sites para sites do Azure](https://azure.microsoft.com/blog/new-updates-to-support-site-extension-for-azure-websites).</span><span class="sxs-lookup"><span data-stu-id="0b54d-209">For more information on the Azure App Service support portal, see [New Updates to Support Site Extension for Azure Websites](https://azure.microsoft.com/blog/new-updates-to-support-site-extension-for-azure-websites).</span></span>

#### <a name="use-the-kudu-debug-console"></a><span data-ttu-id="0b54d-210">Usar o Console de Depuração Kudu</span><span class="sxs-lookup"><span data-stu-id="0b54d-210">Use the Kudu Debug Console</span></span>
<span data-ttu-id="0b54d-211">Aplicativos Web vêm com um console de depuração que você pode usar para depuração, exploração, carregamento de arquivos, bem como para pontos de extremidade JSON para obter informações sobre seu ambiente.</span><span class="sxs-lookup"><span data-stu-id="0b54d-211">Web Apps comes with a debug console that you can use for debugging, exploring, uploading files, as well as JSON endpoints for getting information about your environment.</span></span> <span data-ttu-id="0b54d-212">Este console chama-se *Console Kudu* ou *Painel SCM* de seu aplicativo Web.</span><span class="sxs-lookup"><span data-stu-id="0b54d-212">This console is called the *Kudu Console* or the *SCM Dashboard* for your web app.</span></span>

<span data-ttu-id="0b54d-213">Você pode acessar este painel acessando o link **https://&lt;Nome do aplicativo>.scm.azurewebsites.net/**.</span><span class="sxs-lookup"><span data-stu-id="0b54d-213">You can access this dashboard by going to the link **https://&lt;Your app name>.scm.azurewebsites.net/**.</span></span>

<span data-ttu-id="0b54d-214">Estas são algumas das coisas que o Kudu fornece:</span><span class="sxs-lookup"><span data-stu-id="0b54d-214">Some of the things that Kudu provides are:</span></span>

* <span data-ttu-id="0b54d-215">configurações de ambiente para seu aplicativo</span><span class="sxs-lookup"><span data-stu-id="0b54d-215">environment settings for your application</span></span>
* <span data-ttu-id="0b54d-216">fluxo de logs</span><span class="sxs-lookup"><span data-stu-id="0b54d-216">log stream</span></span>
* <span data-ttu-id="0b54d-217">despejos de diagnóstico</span><span class="sxs-lookup"><span data-stu-id="0b54d-217">diagnostic dump</span></span>
* <span data-ttu-id="0b54d-218">console de depuração no qual você pode executar os cmdlets do Powershell e os comandos básicos de DOS.</span><span class="sxs-lookup"><span data-stu-id="0b54d-218">debug console in which you can run Powershell cmdlets and basic DOS commands.</span></span>

<span data-ttu-id="0b54d-219">Outro recurso útil do Kudu é que, caso seu aplicativo esteja lançando exceções de primeira chance, você pode usar o Kudu e o despejo de processo da ferramenta SysInternals para criar despejos de memória.</span><span class="sxs-lookup"><span data-stu-id="0b54d-219">Another useful feature of Kudu is that, in case your application is throwing first-chance exceptions, you can use Kudu and the SysInternals tool Procdump to create memory dumps.</span></span> <span data-ttu-id="0b54d-220">Esses despejos de memória são instantâneos do processo e podem frequentemente ajudá-lo a solucionar problemas mais complexos com seu aplicativo Web.</span><span class="sxs-lookup"><span data-stu-id="0b54d-220">These memory dumps are snapshots of the process and can often help you troubleshoot more complicated issues with your web app.</span></span>

<span data-ttu-id="0b54d-221">Para saber mais sobre os recursos disponíveis no Kudu, veja [Ferramentas online do Azure Websites Team Services que você precisa conhecer](https://azure.microsoft.com/blog/windows-azure-websites-online-tools-you-should-know-about/).</span><span class="sxs-lookup"><span data-stu-id="0b54d-221">For more information on features available in Kudu, see [Azure Websites Team Services tools you should know about](https://azure.microsoft.com/blog/windows-azure-websites-online-tools-you-should-know-about/).</span></span>

<a name="mitigate" />

### <a name="3-mitigate-the-issue"></a><span data-ttu-id="0b54d-222">3. Atenuar o problema</span><span class="sxs-lookup"><span data-stu-id="0b54d-222">3. Mitigate the issue</span></span>
#### <a name="scale-the-web-app"></a><span data-ttu-id="0b54d-223">Escalar o aplicativo Web</span><span class="sxs-lookup"><span data-stu-id="0b54d-223">Scale the web app</span></span>
<span data-ttu-id="0b54d-224">No Serviço de Aplicativo do Azure, para um melhor desempenho e taxa de transferência, você pode ajustar a escala na qual você está executando seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0b54d-224">In Azure App Service, for increased performance and throughput,  you can adjust the scale at which you are running your application.</span></span> <span data-ttu-id="0b54d-225">Escalar verticalmente aplicativos Web envolve duas ações relacionadas: alterar seu plano do Serviço de Aplicativo para um tipo de preço mais alto e configurar determinadas configurações depois de ter mudado para o tipo de preço mais alto.</span><span class="sxs-lookup"><span data-stu-id="0b54d-225">Scaling up a web app involves two related actions: changing your App Service plan to a higher pricing tier, and configuring certain settings after you have switched to the higher pricing tier.</span></span>

<span data-ttu-id="0b54d-226">Para saber mais sobre como escalar, consulte [Escalar um aplicativo Web no Serviço de Aplicativo do Azure](web-sites-scale.md).</span><span class="sxs-lookup"><span data-stu-id="0b54d-226">For more information on scaling, see [Scale a web app in Azure App Service](web-sites-scale.md).</span></span>

<span data-ttu-id="0b54d-227">Além disso, você pode optar por executar o aplicativo em mais de uma instância.</span><span class="sxs-lookup"><span data-stu-id="0b54d-227">Additionally, you can choose to run your application on more than one instance.</span></span> <span data-ttu-id="0b54d-228">Escalar horizontalmente não apenas fornece mais capacidade de processamento, como também oferece alguma quantidade de tolerância a falhas.</span><span class="sxs-lookup"><span data-stu-id="0b54d-228">Scaling out not only provides you with more processing capability, but also gives you some amount of fault tolerance.</span></span> <span data-ttu-id="0b54d-229">Se o processo falhar em uma instância, as outras instâncias ainda continuarão atendendo a solicitações.</span><span class="sxs-lookup"><span data-stu-id="0b54d-229">If the process goes down on one instance, the other instances continue to serve requests.</span></span>

<span data-ttu-id="0b54d-230">Você pode definir a escala para ser Manual ou Automática.</span><span class="sxs-lookup"><span data-stu-id="0b54d-230">You can set the scaling to be Manual or Automatic.</span></span>

#### <a name="use-autoheal"></a><span data-ttu-id="0b54d-231">Usar AutoHeal</span><span class="sxs-lookup"><span data-stu-id="0b54d-231">Use AutoHeal</span></span>
<span data-ttu-id="0b54d-232">O AutoHeal recicla o processo de trabalho para seu aplicativo com base nas configurações que você escolher (como alterações de configuração, solicitações, limites baseados na memória ou o tempo necessário para executar uma solicitação).</span><span class="sxs-lookup"><span data-stu-id="0b54d-232">AutoHeal recycles the worker process for your app based on settings you choose (like configuration changes, requests, memory-based limits, or the time needed to execute a request).</span></span> <span data-ttu-id="0b54d-233">Na maioria das vezes, reciclar o processo é a maneira mais rápida de resolver um problema.</span><span class="sxs-lookup"><span data-stu-id="0b54d-233">Most of the time, recycle the process is the fastest way to recover from a problem.</span></span> <span data-ttu-id="0b54d-234">Embora você possa sempre reiniciar o aplicativo Web diretamente no Portal do Azure, o AutoHeal faz isso automaticamente.</span><span class="sxs-lookup"><span data-stu-id="0b54d-234">Though you can always restart the web app from directly within the Azure portal, AutoHeal does it automatically for you.</span></span> <span data-ttu-id="0b54d-235">Tudo que você precisa fazer é adicionar alguns gatilhos na raiz web.config de seu aplicativo Web.</span><span class="sxs-lookup"><span data-stu-id="0b54d-235">All you need to do is add some triggers in the root web.config for your web app.</span></span> <span data-ttu-id="0b54d-236">Essas configurações devem funcionar da mesma forma ainda que seu aplicativo não seja um .Net.</span><span class="sxs-lookup"><span data-stu-id="0b54d-236">These settings would work in the same way even if your application is not a .Net app.</span></span>

<span data-ttu-id="0b54d-237">Para saber mais, consulte [AutoHeal em sites do Azure](https://azure.microsoft.com/blog/auto-healing-windows-azure-web-sites/).</span><span class="sxs-lookup"><span data-stu-id="0b54d-237">For more information, see [Auto-Healing Azure Web Sites](https://azure.microsoft.com/blog/auto-healing-windows-azure-web-sites/).</span></span>

#### <a name="restart-the-web-app"></a><span data-ttu-id="0b54d-238">Reiniciar o aplicativo Web</span><span class="sxs-lookup"><span data-stu-id="0b54d-238">Restart the web app</span></span>
<span data-ttu-id="0b54d-239">Reiniciar é geralmente a maneira mais simples de se recuperar de problemas de uso únicos.</span><span class="sxs-lookup"><span data-stu-id="0b54d-239">Restarting is often the simplest way to recover from one-time issues.</span></span> <span data-ttu-id="0b54d-240">No [Portal do Azure](https://portal.azure.com/), na folha de seu aplicativo Web, existem as opções para parar ou reiniciar o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0b54d-240">On the [Azure portal](https://portal.azure.com/), on your web app’s blade, you have the options to stop or restart your app.</span></span>

 ![reinicie o aplicativo Web para solucionar problemas de desempenho](./media/app-service-web-troubleshoot-performance-degradation/2-restart.png)

<span data-ttu-id="0b54d-242">Você também pode gerenciar seu aplicativo Web usando o Azure Powershell.</span><span class="sxs-lookup"><span data-stu-id="0b54d-242">You can also manage your web app using Azure Powershell.</span></span> <span data-ttu-id="0b54d-243">Para obter mais informações, consulte [Usando o PowerShell do Azure com o Azure Resource Manager](../powershell-azure-resource-manager.md).</span><span class="sxs-lookup"><span data-stu-id="0b54d-243">For more information, see [Using Azure PowerShell with Azure Resource Manager](../powershell-azure-resource-manager.md).</span></span>
