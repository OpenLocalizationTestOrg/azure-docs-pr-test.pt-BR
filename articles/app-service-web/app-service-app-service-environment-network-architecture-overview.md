---
title: "Visão geral de arquitetura do aplicativo serviço ambientes de aaaNetwork"
description: "Visão geral da arquitetura da topologia de rede dos Ambientes de Serviço de Aplicativo."
services: app-service
documentationcenter: 
author: stefsch
manager: erikre
editor: 
ms.assetid: 13d03a37-1fe2-4e3e-9d57-46dfb330ba52
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 10/04/2016
ms.author: stefsch
ms.openlocfilehash: 3cbc86883f5687a9ada35a3ab2f577a450a3fa0b
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="network-architecture-overview-of-app-service-environments"></a><span data-ttu-id="94b16-103">Visão geral da arquitetura de rede dos Ambientes de Serviço de Aplicativo</span><span class="sxs-lookup"><span data-stu-id="94b16-103">Network Architecture Overview of App Service Environments</span></span>
## <a name="introduction"></a><span data-ttu-id="94b16-104">Introdução</span><span class="sxs-lookup"><span data-stu-id="94b16-104">Introduction</span></span>
<span data-ttu-id="94b16-105">Ambientes de serviço de aplicativo sempre são criados em uma sub-rede de um [rede virtual] [ virtualnetwork] -aplicativos em execução em um ambiente de serviço de aplicativo podem se comunicar com privada pontos de extremidade localizado dentro de saudação mesmo virtual topologia de rede.</span><span class="sxs-lookup"><span data-stu-id="94b16-105">App Service Environments are always created within a subnet of a [virtual network][virtualnetwork] - apps running in an App Service Environment can communicate with private endpoints located within hello same virtual network topology.</span></span>  <span data-ttu-id="94b16-106">Desde que os clientes podem bloquear partes de sua infraestrutura de rede virtual, é importante toounderstand tipos de saudação de fluxos de comunicação de rede que ocorrem com um ambiente de serviço de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="94b16-106">Since customers may lock down parts of their virtual network infrastructure, it is important toounderstand hello types of network communication flows that occur with an App Service Environment.</span></span>

## <a name="general-network-flow"></a><span data-ttu-id="94b16-107">Fluxo de rede geral</span><span class="sxs-lookup"><span data-stu-id="94b16-107">General Network Flow</span></span>
<span data-ttu-id="94b16-108">Quando um Ambiente de Serviço de Aplicativo (ASE) usa um endereço IP virtual (VIP) público para aplicativos, todo o tráfego de entrada chega nesse VIP público.</span><span class="sxs-lookup"><span data-stu-id="94b16-108">When an App Service Environment (ASE) uses a public virtual IP address (VIP) for apps, all inbound traffic arrives on that public VIP.</span></span>  <span data-ttu-id="94b16-109">Isso inclui o tráfego HTTP e HTTPS para aplicativos, bem como outro tráfego para FTP, funcionalidade de depuração remota e operações de gerenciamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="94b16-109">This includes HTTP and HTTPS traffic for apps, as well as other traffic for FTP, remote debugging functionality, and Azure management operations.</span></span>  <span data-ttu-id="94b16-110">Para obter uma lista completa de saudação portas específicas (necessárias e opcionais) que estão disponíveis no VIP público Olá consulte o artigo de saudação em [controlando o tráfego de entrada] [ controllinginboundtraffic] tooan ambiente de serviço de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="94b16-110">For a full list of hello specific ports (both required and optional) that are available on hello public VIP see hello article on [controlling inbound traffic][controllinginboundtraffic] tooan App Service Environment.</span></span> 

<span data-ttu-id="94b16-111">Ambientes de serviço de aplicativo também dão suporte a executar aplicativos que estão associados somente tooa virtual rede endereço interno, também chamado tooas um endereço ILB (balanceador de carga interno).</span><span class="sxs-lookup"><span data-stu-id="94b16-111">App Service Environments also support running apps that are bound only tooa virtual network internal address, also referred tooas an ILB (internal load balancer) address.</span></span>  <span data-ttu-id="94b16-112">Em um ILB tráfego ASE, HTTP e HTTPS habilitado para aplicativos, bem como as chamadas remotas de depuração, chegarem Olá endereço ILB.</span><span class="sxs-lookup"><span data-stu-id="94b16-112">On an ILB enabled ASE, HTTP and HTTPS traffic for apps as well as remote debugging calls, arrive on hello ILB address.</span></span>  <span data-ttu-id="94b16-113">Para configurações mais comuns do ASE ILB, tráfego de FTP/FTPS também chegará em Olá endereço ILB.</span><span class="sxs-lookup"><span data-stu-id="94b16-113">For most common ILB-ASE configurations, FTP/FTPS traffic will also arrive on hello ILB address.</span></span>  <span data-ttu-id="94b16-114">No entanto as operações de gerenciamento do Azure ainda fluirá tooports 454/455 em Olá o VIP público de um ILB habilitado ASE.</span><span class="sxs-lookup"><span data-stu-id="94b16-114">However Azure management operations will still flow tooports 454/455 on hello public VIP of an ILB enabled ASE.</span></span>

<span data-ttu-id="94b16-115">Olá diagrama a seguir mostra uma visão geral da saudação diversos fluxos de rede de entrada e saída para um ambiente de serviço de aplicativo que os aplicativos de saudação são associados tooa público endereço IP virtual:</span><span class="sxs-lookup"><span data-stu-id="94b16-115">hello diagram below shows an overview of hello various inbound and outbound network flows for an App Service Environment where hello apps are bound tooa public virtual IP address:</span></span>

![Fluxos de rede geral][GeneralNetworkFlows]

<span data-ttu-id="94b16-117">Um Ambiente de Serviço de Aplicativo pode se comunicar com uma variedade de pontos de extremidade privados do cliente.</span><span class="sxs-lookup"><span data-stu-id="94b16-117">An App Service Environment can communicate with a variety of private customer endpoints.</span></span>  <span data-ttu-id="94b16-118">Por exemplo, os aplicativos executados em Olá que ambiente de serviço de aplicativo pode se conectar a servidores toodatabase em execução em máquinas virtuais no Olá mesma topologia de rede virtual.</span><span class="sxs-lookup"><span data-stu-id="94b16-118">For example, apps running in hello App Service Environment can connect toodatabase server(s) running on IaaS virtual machines in hello same virtual network topology.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="94b16-119">Examinar o diagrama de rede hello, Olá "outras computação recursos" são implantados em uma sub-rede diferente do hello ambiente de serviço de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="94b16-119">Looking at hello network diagram, hello "Other Compute Resources" are deployed in a different Subnet from hello App Service Environment.</span></span> <span data-ttu-id="94b16-120">Implantando recursos em Olá a mesma sub-rede com hello ASE bloqueará conectividade com recursos de toothose ASE (com exceção de roteamento específico intra-ASE).</span><span class="sxs-lookup"><span data-stu-id="94b16-120">Deploying resources in hello same Subnet with hello ASE will block connectivity from ASE toothose resources (except for specific intra-ASE routing).</span></span> <span data-ttu-id="94b16-121">Implantar tooa sub-rede diferente em vez disso, (em Olá mesma rede virtual).</span><span class="sxs-lookup"><span data-stu-id="94b16-121">Deploy tooa different Subnet instead (in hello same VNET).</span></span> <span data-ttu-id="94b16-122">Olá ambiente de serviço de aplicativo será capaz de tooconnect.</span><span class="sxs-lookup"><span data-stu-id="94b16-122">hello App Service Environment will then be able tooconnect.</span></span> <span data-ttu-id="94b16-123">Nenhuma configuração adicional é necessária.</span><span class="sxs-lookup"><span data-stu-id="94b16-123">No additional configuration is necessary.</span></span>
> 
> 

<span data-ttu-id="94b16-124">Os Ambientes de Serviço de Aplicativo também se comunicam com recursos do Banco de Dados SQL e Armazenamento do Azure necessários para gerenciar e operar um Ambiente de Serviço de Aplicativo.</span><span class="sxs-lookup"><span data-stu-id="94b16-124">App Service Environments also communicate with Sql DB and Azure Storage resources necessary for managing and operating an App Service Environment.</span></span>  <span data-ttu-id="94b16-125">Alguns dos recursos de armazenamento e Sql Olá que um ambiente de serviço de aplicativo se comunica com estão localizados em Olá Olá ambiente de serviço de aplicativo, enquanto outros estão localizados em regiões do Azure remotos mesma região.</span><span class="sxs-lookup"><span data-stu-id="94b16-125">Some of hello Sql and Storage resources that an App Service Environment communicates with are located in hello same region as hello App Service Environment, while others are located in remote Azure regions.</span></span>  <span data-ttu-id="94b16-126">Como resultado, conectividade de saída toohello Internet é sempre necessária para um ambiente de serviço de aplicativo toofunction corretamente.</span><span class="sxs-lookup"><span data-stu-id="94b16-126">As a result, outbound connectivity toohello Internet is always required for an App Service Environment toofunction properly.</span></span> 

<span data-ttu-id="94b16-127">Como um ambiente de serviço de aplicativo é implantado em uma sub-rede, grupos de segurança de rede podem ser usado toocontrol sub-rede de toohello de tráfego de entrada.</span><span class="sxs-lookup"><span data-stu-id="94b16-127">Since an App Service Environment is deployed in a subnet, network security groups can be used toocontrol inbound traffic toohello subnet.</span></span>  <span data-ttu-id="94b16-128">Para obter detalhes sobre como toocontrol entrada tráfego tooan ambiente de serviço de aplicativo, consulte o seguinte Olá [artigo][controllinginboundtraffic].</span><span class="sxs-lookup"><span data-stu-id="94b16-128">For details on how toocontrol inbound traffic tooan App Service Environment, see hello following [article][controllinginboundtraffic].</span></span>

<span data-ttu-id="94b16-129">Para obter detalhes sobre como tooallow saída conectividade com a Internet de um ambiente de serviço de aplicativo, consulte Olá após o artigo sobre como trabalhar com [rota expressa][ExpressRoute].</span><span class="sxs-lookup"><span data-stu-id="94b16-129">For details on how tooallow outbound Internet connectivity from an App Service Environment, see hello following article about working with [Express Route][ExpressRoute].</span></span>  <span data-ttu-id="94b16-130">Olá mesma abordagem descrita no artigo Olá se aplica ao trabalhar com conectividade Site a Site e usando o túnel forçado.</span><span class="sxs-lookup"><span data-stu-id="94b16-130">hello same approach described in hello article applies when working with Site-to-Site connectivity and using forced tunneling.</span></span>

## <a name="outbound-network-addresses"></a><span data-ttu-id="94b16-131">Endereços de rede de saída</span><span class="sxs-lookup"><span data-stu-id="94b16-131">Outbound Network Addresses</span></span>
<span data-ttu-id="94b16-132">Quando um ambiente de serviço de aplicativo faz chamadas de saída, um endereço IP é sempre associado a todas as chamadas realizadas hello.</span><span class="sxs-lookup"><span data-stu-id="94b16-132">When an App Service Environment makes outbound calls, an IP Address is always associated with hello outbound calls.</span></span>  <span data-ttu-id="94b16-133">endereço IP específico Olá usado depende se o ponto de extremidade de hello está sendo chamado está localizado dentro de topologia de rede virtual hello, ou fora de topologia de rede virtual hello.</span><span class="sxs-lookup"><span data-stu-id="94b16-133">hello specific IP address that is used depends on whether hello endpoint being called is located within hello virtual network topology, or outside of hello virtual network topology.</span></span>

<span data-ttu-id="94b16-134">Se o ponto de extremidade hello está sendo chamado **fora** da topologia de rede virtual hello, Olá saído endereço (também conhecido como Olá saída NAT) que é usado é o VIP público Olá Olá ambiente de serviço de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="94b16-134">If hello endpoint being called is **outside** of hello virtual network topology, then hello outbound address (aka hello outbound NAT address) that is used is hello public VIP of hello App Service Environment.</span></span>  <span data-ttu-id="94b16-135">Esse endereço pode ser encontrado na interface de usuário do portal de Olá para Olá ambiente de serviço de aplicativo na folha de propriedades.</span><span class="sxs-lookup"><span data-stu-id="94b16-135">This address can be found in hello portal user interface for hello App Service Environment in Properties blade.</span></span>

![Endereço IP de saída][OutboundIPAddress]

<span data-ttu-id="94b16-137">Esse endereço também pode ser determinado para ASs que têm apenas um VIP público, criando um aplicativo em Olá ambiente de serviço de aplicativo e, em seguida, executar uma *nslookup* no endereço de saudação do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="94b16-137">This address can also be determined for ASEs that only have a public VIP by creating an app in hello App Service Environment, and then performing an *nslookup* on hello app's address.</span></span> <span data-ttu-id="94b16-138">endereço IP resultante Olá é tanto VIP público hello, como endereço NAT da saída do ambiente de serviço de aplicativo hello.</span><span class="sxs-lookup"><span data-stu-id="94b16-138">hello resultant IP address is both hello public VIP, as well as hello App Service Environment's outbound NAT address.</span></span>

<span data-ttu-id="94b16-139">Se o ponto de extremidade hello está sendo chamado **dentro de** da topologia de rede virtual hello, endereço de saída de saudação do aplicativo de chamada hello serão endereço IP interno de Olá Olá individuais do recurso de computação executando o aplicativo hello.</span><span class="sxs-lookup"><span data-stu-id="94b16-139">If hello endpoint being called is **inside** of hello virtual network topology, hello outbound address of hello calling app will be hello internal IP address of hello individual compute resource running hello app.</span></span>  <span data-ttu-id="94b16-140">No entanto não há um mapeamento persistente de tooapps de endereços IP internos rede virtual.</span><span class="sxs-lookup"><span data-stu-id="94b16-140">However there is not a persistent mapping of virtual network internal IP addresses tooapps.</span></span>  <span data-ttu-id="94b16-141">Aplicativos podem se mover entre os recursos de computação diferentes e pool de saudação de recursos de computação disponíveis em um ambiente de serviço de aplicativo pode alterar devido a operações de tooscaling.</span><span class="sxs-lookup"><span data-stu-id="94b16-141">Apps can move around across different compute resources, and hello pool of available compute resources in an App Service Environment can change due tooscaling operations.</span></span>

<span data-ttu-id="94b16-142">No entanto, como um ambiente de serviço de aplicativo sempre está localizado em uma sub-rede, é garantida que endereço IP interno de saudação de um recurso de computação executando um aplicativo será sempre está no intervalo CIDR de saudação da sub-rede hello.</span><span class="sxs-lookup"><span data-stu-id="94b16-142">However, since an App Service Environment is always located within a subnet, you are guaranteed that hello internal IP address of a compute resource running an app will always lie within hello CIDR range of hello subnet.</span></span>  <span data-ttu-id="94b16-143">Como resultado, quando ACLs refinadas ou grupos de segurança de rede são usados toosecure acessar pontos de extremidade tooother na rede virtual hello, Olá intervalo de sub-rede com toobe de necessidades de ambiente de serviço de aplicativo hello concedeu acesso.</span><span class="sxs-lookup"><span data-stu-id="94b16-143">As a result, when fine-grained ACLs or network security groups are used toosecure access tooother endpoints within hello virtual network, hello subnet range containing hello App Service Environment needs toobe granted access.</span></span>

<span data-ttu-id="94b16-144">Olá diagrama a seguir mostra esses conceitos mais detalhadamente:</span><span class="sxs-lookup"><span data-stu-id="94b16-144">hello following diagram shows these concepts in more detail:</span></span>

![Endereços de rede de saída][OutboundNetworkAddresses]

<span data-ttu-id="94b16-146">Em Olá acima diagrama:</span><span class="sxs-lookup"><span data-stu-id="94b16-146">In hello above diagram:</span></span>

* <span data-ttu-id="94b16-147">Como o VIP público Olá Olá ambiente de serviço de aplicativo é 192.23.1.2, que é o endereço IP saído Olá usado ao fazer chamadas muito pontos de extremidade de "Internet".</span><span class="sxs-lookup"><span data-stu-id="94b16-147">Since hello public VIP of hello App Service Environment is 192.23.1.2, that is hello outbound IP address used when making calls too"Internet" endpoints.</span></span>
* <span data-ttu-id="94b16-148">Olá intervalo CIDR de saudação contendo a sub-rede para Olá ambiente de serviço de aplicativo é 10.0.1.0/26.</span><span class="sxs-lookup"><span data-stu-id="94b16-148">hello CIDR range of hello containing subnet for hello App Service Environment is 10.0.1.0/26.</span></span>  <span data-ttu-id="94b16-149">Outros pontos de extremidade em Olá a mesma infraestrutura de rede virtual verá chamadas de aplicativos como originados em algum lugar dentro desse intervalo de endereços.</span><span class="sxs-lookup"><span data-stu-id="94b16-149">Other endpoints within hello same virtual network infrastructure will see calls from apps as originating from somewhere within this address range.</span></span>

## <a name="calls-between-app-service-environments"></a><span data-ttu-id="94b16-150">Chamadas entre Ambientes de Serviço de Aplicativo</span><span class="sxs-lookup"><span data-stu-id="94b16-150">Calls Between App Service Environments</span></span>
<span data-ttu-id="94b16-151">Um cenário mais complexo que pode ocorrer se você implantar vários ambientes de serviço de aplicativo hello mesma rede virtual e fazer chamadas de saída de um ambiente de serviço de aplicativo tooanother ambiente de serviço de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="94b16-151">A more complex scenario can occur if you deploy multiple App Service Environments in hello same virtual network, and make outbound calls from one App Service Environment tooanother App Service Environment.</span></span>  <span data-ttu-id="94b16-152">Esses tipos de chamadas entre Ambientes de Serviço de Aplicativo também serão tratadas como chamadas de "Internet".</span><span class="sxs-lookup"><span data-stu-id="94b16-152">These types of cross App Service Environment calls will also be treated as "Internet" calls.</span></span>

<span data-ttu-id="94b16-153">Olá diagrama a seguir mostra um exemplo de uma arquitetura em camadas com aplicativos em um ambiente de serviço de aplicativo (por exemplo Aplicativos web de "Porta da frente") chamando aplicativos em um ambiente de serviço de aplicativo segundo (por exemplo, aplicativos de API back-end internos não se destina toobe acessível de saudação da Internet).</span><span class="sxs-lookup"><span data-stu-id="94b16-153">hello following diagram shows an example of a layered architecture with apps on one App Service Environment (e.g. "Front door" web apps) calling apps on a second App Service Environment (e.g. internal back-end API apps not intended toobe accessible from hello Internet).</span></span> 

![Chamadas entre Ambientes de Serviço de Aplicativo][CallsBetweenAppServiceEnvironments] 

<span data-ttu-id="94b16-155">No hello exemplo acima hello "ASE um" ambiente de serviço de aplicativo tem um endereço IP de saída de 192.23.1.2.</span><span class="sxs-lookup"><span data-stu-id="94b16-155">In hello example above hello App Service Environment "ASE One" has an outbound IP address of 192.23.1.2.</span></span>  <span data-ttu-id="94b16-156">Se um aplicativo em execução nesse ambiente de serviço de aplicativo faz um chamada de saída tooan aplicativo em execução em um segundo aplicativo ambiente de serviço ("ASE dois") localizados em Olá mesmo virtual de rede, hello saída chamada será tratada como uma chamada de "Internet".</span><span class="sxs-lookup"><span data-stu-id="94b16-156">If an app running on this App Service Environment makes an outbound call tooan app running on a second App Service Environment ("ASE Two") located in hello same virtual network, hello outbound call will be treated as an "Internet" call.</span></span>  <span data-ttu-id="94b16-157">Assim que chegam a saudação de tráfego de rede Olá segundo ambiente de serviço de aplicativo mostrará como provenientes de 192.23.1.2 (ou seja, não Olá sub-rede intervalo de endereços de Olá primeiro ambiente de serviço de aplicativo).</span><span class="sxs-lookup"><span data-stu-id="94b16-157">As a result hello network traffic arriving on hello second App Service Environment will show as originating from 192.23.1.2 (i.e. not hello subnet address range of hello first App Service Environment).</span></span>

<span data-ttu-id="94b16-158">Embora chamadas entre diferentes ambientes de serviço de aplicativo são tratadas como chamadas de "Internet", quando ambos os ambientes de serviço de aplicativo estão localizados em Olá mesmo tráfego de rede de saudação de região do Azure permanece na rede do Azure regional de saudação e não fisicamente fluirá sobre Olá Internet pública.</span><span class="sxs-lookup"><span data-stu-id="94b16-158">Even though calls between different App Service Environments are treated as "Internet" calls, when both App Service Environments are located in hello same Azure region hello network traffic will remain on hello regional Azure network and will not physically flow over hello public Internet.</span></span>  <span data-ttu-id="94b16-159">Como resultado, você pode usar um grupo de segurança de rede na sub-rede de saudação do hello segundo ambiente de serviço de aplicativo tooonly permitir chamadas recebidas de Olá primeiro aplicativo ambiente de serviço (cujo endereço IP de saída é 192.23.1.2), garantindo, assim, a comunicação segura entre hello Ambientes de serviço de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="94b16-159">As a result you can use a network security group on hello subnet of hello second App Service Environment tooonly allow inbound calls from hello first App Service Environment (whose outbound IP address is 192.23.1.2), thus ensuring secure communication between hello App Service Environments.</span></span>

## <a name="additional-links-and-information"></a><span data-ttu-id="94b16-160">Informações e links adicionais</span><span class="sxs-lookup"><span data-stu-id="94b16-160">Additional Links and Information</span></span>
<span data-ttu-id="94b16-161">Todos os artigos e como-para para ambientes de serviço de aplicativo estão disponíveis no hello [Leiame para ambientes de serviço de aplicativo](../app-service/app-service-app-service-environments-readme.md).</span><span class="sxs-lookup"><span data-stu-id="94b16-161">All articles and How-To's for App Service Environments are available in hello [README for Application Service Environments](../app-service/app-service-app-service-environments-readme.md).</span></span>

<span data-ttu-id="94b16-162">Obter detalhes sobre portas usadas pelos ambientes de serviço de aplicativo de entrada e toocontrol de grupos de segurança de rede usando o tráfego de entrada está disponível [aqui][controllinginboundtraffic].</span><span class="sxs-lookup"><span data-stu-id="94b16-162">Details on inbound ports used by App Service Environments and using network security groups toocontrol inbound traffic is available [here][controllinginboundtraffic].</span></span>

<span data-ttu-id="94b16-163">Detalhes sobre o uso definidos pelo usuário rotas toogrant saída Internet acesso tooApp ambientes de serviço está disponível neste [artigo][ExpressRoute].</span><span class="sxs-lookup"><span data-stu-id="94b16-163">Details on using user defined routes toogrant outbound Internet access tooApp Service Environments is available in this [article][ExpressRoute].</span></span> 

<!-- LINKS -->
[virtualnetwork]: http://azure.microsoft.com/services/virtual-network/
[controllinginboundtraffic]:  http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-control-inbound-traffic/
[ExpressRoute]:  http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-network-configuration-expressroute/

<!-- IMAGES -->
[GeneralNetworkFlows]: ./media/app-service-app-service-environment-network-architecture-overview/NetworkOverview-1.png
[OutboundIPAddress]: ./media/app-service-app-service-environment-network-architecture-overview/OutboundIPAddress-1.png
[OutboundNetworkAddresses]: ./media/app-service-app-service-environment-network-architecture-overview/OutboundNetworkAddresses-1.png
[CallsBetweenAppServiceEnvironments]: ./media/app-service-app-service-environment-network-architecture-overview/CallsBetweenEnvironments-1.png

