---
title: "aaaNetwork detalhes de configuração para trabalhar com a rota expressa"
description: "Detalhes de configuração de rede para executar os ambientes de serviço de aplicativo em uma rede Virtual conectado tooan circuito de rota expressa."
services: app-service
documentationcenter: 
author: stefsch
manager: nirma
editor: 
ms.assetid: 34b49178-2595-4d32-9b41-110c96dde6bf
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 10/14/2016
ms.author: stefsch
ms.openlocfilehash: 85bbc45cfed619485957ee2a898aa0a7604173cb
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="network-configuration-details-for-app-service-environments-with-expressroute"></a><span data-ttu-id="394fe-103">Detalhes da configuração de rede para Ambientes de Serviço de Aplicativo com o ExpressRoute</span><span class="sxs-lookup"><span data-stu-id="394fe-103">Network Configuration Details for App Service Environments with ExpressRoute</span></span>
## <a name="overview"></a><span data-ttu-id="394fe-104">Visão geral</span><span class="sxs-lookup"><span data-stu-id="394fe-104">Overview</span></span>
<span data-ttu-id="394fe-105">Os clientes podem conectar um [Azure ExpressRoute] [ ExpressRoute] infraestrutura de rede virtual tootheir circuito, estendendo assim seu tooAzure de rede local.</span><span class="sxs-lookup"><span data-stu-id="394fe-105">Customers can connect an [Azure ExpressRoute][ExpressRoute] circuit tootheir virtual network infrastructure, thus extending their on-premises network tooAzure.</span></span>  <span data-ttu-id="394fe-106">Um Ambiente de Serviço de Aplicativo pode ser criado em uma sub-rede dessa infraestrutura de [rede virtual][virtualnetwork].</span><span class="sxs-lookup"><span data-stu-id="394fe-106">An App Service Environment can  be created in a subnet of this [virtual network][virtualnetwork] infrastructure.</span></span>  <span data-ttu-id="394fe-107">Aplicativos executados em Olá ambiente de serviço de aplicativo, em seguida, podem estabelecer conexões seguras tooback ponta recursos acessíveis somente através de saudação conexão de rota expressa.</span><span class="sxs-lookup"><span data-stu-id="394fe-107">Apps running on hello App Service Environment can then establish secure connections tooback-end resources accessible only over hello ExpressRoute connection.</span></span>  

<span data-ttu-id="394fe-108">Um Ambiente de Serviço de Aplicativo pode ser criado **tanto** em uma rede virtual do Azure Resource Manager **quanto** em uma rede virtual de modelo de implantação clássico.</span><span class="sxs-lookup"><span data-stu-id="394fe-108">An App Service Environment can be created in **either** an Azure Resource Manager virtual network, **or** a classic deployment model virtual network.</span></span>  <span data-ttu-id="394fe-109">Com uma alteração recente feita em junho de 2016, os ASEs agora também podem ser implantados nas redes virtuais que usam os intervalos de endereço público ou espaços de endereço RFC1918 (ou seja, endereços privados).</span><span class="sxs-lookup"><span data-stu-id="394fe-109">With a recent change made in June 2016, ASEs can also now be deployed into virtual networks that use either public address ranges, or RFC1918 address spaces (i.e. private addresses).</span></span> 

[!INCLUDE [app-service-web-to-api-and-mobile](../../includes/app-service-web-to-api-and-mobile.md)]

## <a name="required-network-connectivity"></a><span data-ttu-id="394fe-110">Conectividade de rede necessária</span><span class="sxs-lookup"><span data-stu-id="394fe-110">Required Network Connectivity</span></span>
<span data-ttu-id="394fe-111">Há requisitos de conectividade de rede para os ambientes de serviço de aplicativo não pode ser atendido inicialmente em uma rede virtual conectado de tooan rota expressa.</span><span class="sxs-lookup"><span data-stu-id="394fe-111">There are network connectivity requirements for App Service Environments that may not be initially met in a virtual network connected tooan ExpressRoute.</span></span>  <span data-ttu-id="394fe-112">Ambientes de serviço de aplicativo exigem Olá seguinte na ordem toofunction corretamente:</span><span class="sxs-lookup"><span data-stu-id="394fe-112">App Service Environments require all of hello following in order toofunction properly:</span></span>

* <span data-ttu-id="394fe-113">Rede de saída conectividade tooAzure armazenamento pontos de extremidade em todo o mundo em ambas as portas 80 e 443.</span><span class="sxs-lookup"><span data-stu-id="394fe-113">Outbound network connectivity tooAzure Storage endpoints worldwide on both ports 80 and 443.</span></span>  <span data-ttu-id="394fe-114">Isso inclui os pontos de extremidade localizados em Olá mesma região Olá ambiente de serviço de aplicativo, bem como pontos de extremidade de armazenamento localizados na **outros** regiões do Azure.</span><span class="sxs-lookup"><span data-stu-id="394fe-114">This includes endpoints located in hello same region as hello App Service Environment, as well as storage endpoints located in **other** Azure regions.</span></span>  <span data-ttu-id="394fe-115">Pontos de extremidade de armazenamento do Azure resolver em Olá domínios DNS a seguir: *n e t*, *>.blob.Core.Windows.NET*, *queue.core.windows.net* e *file.core.windows.net*.</span><span class="sxs-lookup"><span data-stu-id="394fe-115">Azure Storage endpoints resolve under hello following DNS domains: *table.core.windows.net*, *blob.core.windows.net*, *queue.core.windows.net* and *file.core.windows.net*.</span></span>  
* <span data-ttu-id="394fe-116">Conectividade de rede de saída toohello serviço de arquivos do Azure na porta 445.</span><span class="sxs-lookup"><span data-stu-id="394fe-116">Outbound network connectivity toohello Azure Files service on port 445.</span></span>
* <span data-ttu-id="394fe-117">Pontos de extremidade de tooSql banco de dados de conectividade rede de saída localizada no hello mesmo região como Olá ambiente de serviço de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="394fe-117">Outbound network connectivity tooSql DB endpoints located in hello same region as hello App Service Environment.</span></span>  <span data-ttu-id="394fe-118">Pontos de extremidade do banco de dados SQL resolver em Olá domínio a seguir: *t*.</span><span class="sxs-lookup"><span data-stu-id="394fe-118">Sql DB endpoints resolve under hello following domain:  *database.windows.net*.</span></span>  <span data-ttu-id="394fe-119">Isso requer a abertura de acesso tooports 1433, 11.000 a 11.999 e 14.000 a 14.999.</span><span class="sxs-lookup"><span data-stu-id="394fe-119">This requires opening access tooports 1433, 11000-11999 and 14000-14999.</span></span>  <span data-ttu-id="394fe-120">Para obter mais detalhes, consulte [este artigo sobre o uso de portas do banco de dados SQL V12](../sql-database/sql-database-develop-direct-route-ports-adonet-v12.md).</span><span class="sxs-lookup"><span data-stu-id="394fe-120">For more details see [this article on Sql Database V12 port usage](../sql-database/sql-database-develop-direct-route-ports-adonet-v12.md).</span></span>
* <span data-ttu-id="394fe-121">Rede de saída conectividade toohello gerenciamento do Azure plano pontos de extremidade (pontos de extremidade ASM e ARM).</span><span class="sxs-lookup"><span data-stu-id="394fe-121">Outbound network connectivity toohello Azure management plane endpoints (both ASM and ARM endpoints).</span></span>  <span data-ttu-id="394fe-122">Isso inclui conectividade de saída tooboth *management.core.windows.net* e *management.azure.com*.</span><span class="sxs-lookup"><span data-stu-id="394fe-122">This includes outbound connectivity tooboth *management.core.windows.net* and *management.azure.com*.</span></span> 
* <span data-ttu-id="394fe-123">Saída conectividade de rede muito*ocsp.msocsp.com*, *mscrl.microsoft.com* e *crl.microsoft.com*.  Essa é uma funcionalidade SSL toosupport necessários.</span><span class="sxs-lookup"><span data-stu-id="394fe-123">Outbound network connectivity too*ocsp.msocsp.com*, *mscrl.microsoft.com* and *crl.microsoft.com*.  This is needed toosupport SSL functionality.</span></span>
* <span data-ttu-id="394fe-124">configuração de DNS Olá para rede virtual Olá deve ser capaz de resolver todos os pontos de extremidade hello e domínios mencionado na Olá pontos anteriores.</span><span class="sxs-lookup"><span data-stu-id="394fe-124">hello DNS configuration for hello virtual network must be capable of resolving all of hello endpoints and domains mentioned in hello earlier points.</span></span>  <span data-ttu-id="394fe-125">Se esses pontos de extremidade não puderem ser resolvidos, tentativas de criação do Ambiente de Serviço de Aplicativo irão falhar, e Ambientes de Serviços de Aplicativo existentes serão marcados como não íntegros.</span><span class="sxs-lookup"><span data-stu-id="394fe-125">If these endpoints cannot be resolved, App Service Environment creation attempts will fail, and existing App Service Environments will be marked as unhealthy.</span></span>
* <span data-ttu-id="394fe-126">O acesso de saída na porta 53 é necessário para a comunicação com servidores DNS.</span><span class="sxs-lookup"><span data-stu-id="394fe-126">Outbound access on port 53 is required for communication with DNS servers.</span></span>
* <span data-ttu-id="394fe-127">Se um servidor DNS personalizado existir no Olá outra extremidade de um gateway VPN, servidor DNS Olá deve ser acessível da sub-rede Olá contendo Olá ambiente de serviço de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="394fe-127">If a custom DNS server exists on hello other end of a VPN gateway, hello DNS server must be reachable from hello subnet containing hello App Service Environment.</span></span> 
* <span data-ttu-id="394fe-128">caminho de rede de saída de saudação não pode percorrer proxies corporativos internos, nem pode ser local tooon de túnel de força.</span><span class="sxs-lookup"><span data-stu-id="394fe-128">hello outbound network path cannot travel through internal corporate proxies, nor can it be force tunneled tooon-premises.</span></span>  <span data-ttu-id="394fe-129">Se o fizer, alterações Olá endereço NAT efetivo do tráfego de rede de saída do hello ambiente de serviço de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="394fe-129">Doing so changes hello effective NAT address of outbound network traffic from hello App Service Environment.</span></span>  <span data-ttu-id="394fe-130">Alterar o endereço NAT de saudação do tráfego de rede de saída de um ambiente serviço de aplicativo fará com que conectividade toomany falhas de pontos de extremidade Olá listado acima.</span><span class="sxs-lookup"><span data-stu-id="394fe-130">Changing hello NAT address of an App Service Environment's outbound network traffic will cause connectivity failures toomany of hello endpoints listed above.</span></span>  <span data-ttu-id="394fe-131">Isso resulta em tentativas de criação de Ambiente de Serviço de Aplicativo, e faz com que Ambientes de Serviços de Aplicativo anteriormente íntegros sejam marcados como não íntegros.</span><span class="sxs-lookup"><span data-stu-id="394fe-131">This results in failed App Service Environment creation attempts, as well as previously healthy App Service Environments being marked as unhealthy.</span></span>  
* <span data-ttu-id="394fe-132">Portas de toorequired de acesso de rede de entrada para os ambientes de serviço de aplicativo devem ser permitidos, conforme descrito neste [artigo][requiredports].</span><span class="sxs-lookup"><span data-stu-id="394fe-132">Inbound network access toorequired ports for App Service Environments must be allowed as described in this [article][requiredports].</span></span>

<span data-ttu-id="394fe-133">requisitos de DNS Olá podem ser atendidos, garantindo uma infraestrutura DNS válida está configurada e mantida para rede virtual hello.</span><span class="sxs-lookup"><span data-stu-id="394fe-133">hello DNS requirements can be met by ensuring a valid DNS infrastructure is configured and maintained for hello virtual network.</span></span>  <span data-ttu-id="394fe-134">Se para qualquer Olá motivo a configuração do DNS é alterada após ter sido criado um ambiente de serviço de aplicativo, os desenvolvedores podem forçar o toopick um ambiente de serviço de aplicativo nova configuração de DNS Olá.</span><span class="sxs-lookup"><span data-stu-id="394fe-134">If for any reason hello DNS configuration is changed after an App Service Environment has been created, developers can force an App Service Environment toopick up hello new DNS configuration.</span></span>  <span data-ttu-id="394fe-135">Disparar uma reinicialização sem interrupção de ambiente usando hello "Reiniciar" ícone localizado na parte superior de saudação da folha de gerenciamento do ambiente de serviço de aplicativo hello em Olá [portal do Azure] [ NewPortal] fará com que a saudação ambiente toopick a nova configuração de DNS hello.</span><span class="sxs-lookup"><span data-stu-id="394fe-135">Triggering a rolling environment reboot using hello "Restart" icon located at hello top of hello App Service Environment management blade in hello [Azure portal][NewPortal] will cause hello environment toopick up hello new DNS configuration.</span></span>

<span data-ttu-id="394fe-136">Hello requisitos de acesso de rede de entrada podem ser atendidos ao configurar um [grupo de segurança de rede] [ NetworkSecurityGroups] no acesso do ambiente de serviço de aplicativo hello sub-rede tooallow Olá necessárias conforme descrito neste [artigo][requiredports].</span><span class="sxs-lookup"><span data-stu-id="394fe-136">hello inbound network access requirements can be met by configuring a [network security group][NetworkSecurityGroups] on hello App Service Environment's subnet tooallow hello required access as described in this [article][requiredports].</span></span>

## <a name="enabling-outbound-network-connectivity-for-an-app-service-environment"></a><span data-ttu-id="394fe-137">Habilitando a conectividade de rede de saída para um Ambiente do Serviço de Aplicativo</span><span class="sxs-lookup"><span data-stu-id="394fe-137">Enabling Outbound Network Connectivity for an App Service Environment</span></span>
<span data-ttu-id="394fe-138">Por padrão, um circuito do ExpressRoute recentemente criado anuncia uma rota padrão que permite conectividade de saída da Internet.</span><span class="sxs-lookup"><span data-stu-id="394fe-138">By default, a newly created ExpressRoute circuit advertises a default route that allows outbound Internet connectivity.</span></span>  <span data-ttu-id="394fe-139">Com essa configuração de um ambiente de serviço de aplicativo será capaz de tooconnect tooother pontos de extremidade do Azure.</span><span class="sxs-lookup"><span data-stu-id="394fe-139">With this configuration an App Service Environment will be able tooconnect tooother Azure endpoints.</span></span>

<span data-ttu-id="394fe-140">No entanto, uma configuração de cliente comum é toodefine seus próprios rota padrão (0.0.0.0/0), que força o fluxo de tooinstead de tráfego de saída da Internet local.</span><span class="sxs-lookup"><span data-stu-id="394fe-140">However a common customer configuration is toodefine their own default route (0.0.0.0/0) which forces outbound Internet traffic tooinstead flow on-premises.</span></span>  <span data-ttu-id="394fe-141">Este fluxo de tráfego invariavelmente quebras de ambientes de serviço de aplicativo porque o tráfego de saída hello está bloqueado no local ou NAT por conjunto de irreconhecível tooan de endereços que não funcionam com vários pontos de extremidade do Azure.</span><span class="sxs-lookup"><span data-stu-id="394fe-141">This traffic flow invariably breaks App Service Environments because hello outbound traffic is either blocked on-premises, or NAT'd tooan unrecognizable set of addresses that no longer work with various Azure endpoints.</span></span>

<span data-ttu-id="394fe-142">solução de saudação é toodefine uma (ou mais) definidos pelo usuário rotas (UDRs) sub-rede Olá que contém Olá ambiente de serviço de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="394fe-142">hello solution is toodefine one (or more) user defined routes (UDRs) on hello subnet that contains hello App Service Environment.</span></span>  <span data-ttu-id="394fe-143">Um UDR define as rotas de sub-rede que serão cumpridas em vez de rota padrão de saudação.</span><span class="sxs-lookup"><span data-stu-id="394fe-143">A UDR defines subnet-specific routes that will be honored instead of hello default route.</span></span>

<span data-ttu-id="394fe-144">Se possível, é recomendável Olá toouse seguinte configuração:</span><span class="sxs-lookup"><span data-stu-id="394fe-144">If possible, it is recommended toouse hello following configuration:</span></span>

* <span data-ttu-id="394fe-145">configuração de rota expressa Olá anuncia 0.0.0.0/0 e todo o tráfego de saída no local de túneis de força por padrão.</span><span class="sxs-lookup"><span data-stu-id="394fe-145">hello ExpressRoute configuration advertises 0.0.0.0/0 and by default force tunnels all outbound traffic on-premises.</span></span>
* <span data-ttu-id="394fe-146">Olá UDR aplicada toohello sub-rede contendo Olá ambiente de serviço de aplicativo define 0.0.0.0/0 com um tipo de próximo salto da Internet (um exemplo disso esteja no final deste artigo).</span><span class="sxs-lookup"><span data-stu-id="394fe-146">hello UDR applied toohello subnet containing hello App Service Environment defines 0.0.0.0/0 with a next hop type of Internet (an example of this is farther down in this article).</span></span>

<span data-ttu-id="394fe-147">Olá efeito combinado dessas etapas é que o nível de sub-rede Olá UDR terá precedência sobre Olá ExpressRoute forçada de túneis, garantindo, assim, o acesso de Internet de saída de saudação ambiente de serviço de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="394fe-147">hello combined effect of these steps is that hello subnet level UDR will take precedence over hello ExpressRoute forced tunneling, thus ensuring outbound Internet access from hello App Service Environment.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="394fe-148">Olá rotas definidas em um UDR **deve** ser específica o suficiente muito têm precedência sobre todas as rotas anunciadas pelo Olá configuração de rota expressa.</span><span class="sxs-lookup"><span data-stu-id="394fe-148">hello routes defined in a UDR **must** be specific enough too take precedence over any routes advertised by hello ExpressRoute configuration.</span></span>  <span data-ttu-id="394fe-149">exemplo Hello abaixo usa o intervalo de endereços do hello amplo 0.0.0.0/0 e como tal, pode potencialmente ser acidentalmente substituído pelos anúncios de rota usando intervalos de endereços mais específicos.</span><span class="sxs-lookup"><span data-stu-id="394fe-149">hello example below uses hello broad 0.0.0.0/0 address range, and as such can potentially be accidentally overridden by route advertisements using more specific address ranges.</span></span>
> 
> <span data-ttu-id="394fe-150">Não há suporte para ambientes de serviço de aplicativo com as configurações de rota expressa que **entre-anunciar rotas de saudação emparelhamento caminho toohello privada caminho emparelhamento público**.</span><span class="sxs-lookup"><span data-stu-id="394fe-150">App Service Environments are not supported with ExpressRoute configurations that **cross-advertise routes from hello public peering path toohello private peering path**.</span></span>  <span data-ttu-id="394fe-151">As configurações de ExpressRoute com emparelhamento público definido receberão anúncios de rota da Microsoft para um grande conjunto de intervalos de endereços IP do Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="394fe-151">ExpressRoute configurations that have public peering configured, will receive route advertisements from Microsoft for a large set of Microsoft Azure IP address ranges.</span></span>  <span data-ttu-id="394fe-152">Se esses intervalos de endereços entre anunciados no caminho de emparelhamento privado hello, o resultado de final de saudação é que todos os pacotes de saída de rede da sub-rede do ambiente de serviço de aplicativo hello serão infraestrutura de rede local do cliente tooa túnel de força.</span><span class="sxs-lookup"><span data-stu-id="394fe-152">If these address ranges are cross-advertised on hello private peering path, hello end result is that all outbound network packets from hello App Service Environment's subnet will be force-tunneled tooa customer's on-premises network infrastructure.</span></span>  <span data-ttu-id="394fe-153">Esse fluxo de rede não tem suporte no momento com os Ambientes de Serviço de Aplicativo.</span><span class="sxs-lookup"><span data-stu-id="394fe-153">This network flow is currently not supported with App Service Environments.</span></span>  <span data-ttu-id="394fe-154">Um problema de toothis de solução é toostop as rotas entre publicidade Olá emparelhamento caminho toohello privada caminho emparelhamento público.</span><span class="sxs-lookup"><span data-stu-id="394fe-154">One solution toothis problem is toostop cross-advertising routes from hello public peering path toohello private peering path.</span></span>
> 
> 

<span data-ttu-id="394fe-155">Informações básicas sobre as rotas definidas pelo usuário estão disponíveis nesta [visão geral][UDROverview].</span><span class="sxs-lookup"><span data-stu-id="394fe-155">Background information on user defined routes is available in this [overview][UDROverview].</span></span>  

<span data-ttu-id="394fe-156">Detalhes sobre como criar e configurar rotas definidas pelo usuário está disponível neste [como tooGuide][UDRHowTo].</span><span class="sxs-lookup"><span data-stu-id="394fe-156">Details on creating and configuring user defined routes is available in this [How tooGuide][UDRHowTo].</span></span>

## <a name="example-udr-configuration-for-an-app-service-environment"></a><span data-ttu-id="394fe-157">Exemplo de configuração da UDR para um Ambiente do Serviço de Aplicativo</span><span class="sxs-lookup"><span data-stu-id="394fe-157">Example UDR Configuration for an App Service Environment</span></span>
<span data-ttu-id="394fe-158">**Pré-requisitos**</span><span class="sxs-lookup"><span data-stu-id="394fe-158">**Pre-requisites**</span></span>

1. <span data-ttu-id="394fe-159">Instale o Azure Powershell Olá [página Downloads do Azure] [ AzureDownloads] (datado de junho de 2015 ou posterior).</span><span class="sxs-lookup"><span data-stu-id="394fe-159">Install Azure Powershell from hello [Azure Downloads page][AzureDownloads] (dated June 2015 or later).</span></span>  <span data-ttu-id="394fe-160">Em "Ferramentas de linha de comando" há um link de "Instalar" em "Windows Powershell", que irá instalar os cmdlets do Powershell mais recente hello.</span><span class="sxs-lookup"><span data-stu-id="394fe-160">Under "Command-line tools" there is an "Install" link under "Windows Powershell" that will install hello latest Powershell cmdlets.</span></span>
2. <span data-ttu-id="394fe-161">É recomendável que uma sub-rede exclusiva seja criada para uso exclusivo por um Ambiente do Serviço de Aplicativo.</span><span class="sxs-lookup"><span data-stu-id="394fe-161">It is recommended that a unique subnet is created for exclusive use by an App Service Environment.</span></span>  <span data-ttu-id="394fe-162">Isso garante que a sub-rede Olá UDRs aplicados toohello abrirá somente o tráfego de saída para Olá ambiente de serviço de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="394fe-162">This ensures that hello UDRs applied toohello subnet will only open outbound traffic for hello App Service Environment.</span></span>
3. <span data-ttu-id="394fe-163">**Importante**: não implante Olá ambiente de serviço de aplicativo até **depois** Olá seguindo as etapas de configuração é seguida.</span><span class="sxs-lookup"><span data-stu-id="394fe-163">**Important**:  do not deploy hello App Service Environment until **after** hello following configuration steps are followed.</span></span>  <span data-ttu-id="394fe-164">Isso garante que a conectividade de rede de saída está disponível antes de tentar toodeploy um ambiente de serviço de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="394fe-164">This ensures that outbound network connectivity is available before attempting toodeploy an App Service Environment.</span></span>

<span data-ttu-id="394fe-165">**Etapa 1: Criar uma tabela de rotas nomeada**</span><span class="sxs-lookup"><span data-stu-id="394fe-165">**Step 1:  Create a named route table**</span></span>

<span data-ttu-id="394fe-166">Olá trecho a seguir cria uma tabela de rota chamada "DirectInternetRouteTable" na região do Azure do Oeste nos hello:</span><span class="sxs-lookup"><span data-stu-id="394fe-166">hello following snippet creates a route table called "DirectInternetRouteTable" in hello West US Azure region:</span></span>

    New-AzureRouteTable -Name 'DirectInternetRouteTable' -Location uswest

<span data-ttu-id="394fe-167">**Etapa 2: Criar uma ou mais rotas na tabela de rotas Olá**</span><span class="sxs-lookup"><span data-stu-id="394fe-167">**Step 2:  Create one or more routes in hello route table**</span></span>

<span data-ttu-id="394fe-168">Você precisará tooadd uma ou mais rotas toohello rota tabela de acesso de saída à Internet ordem tooenable.</span><span class="sxs-lookup"><span data-stu-id="394fe-168">You will need tooadd one or more routes toohello route table in order tooenable outbound Internet access.</span></span>  

<span data-ttu-id="394fe-169">Olá recomendado abordagem para configurar o acesso de saída toohello que Internet é toodefine uma rota para 0.0.0.0/0 conforme mostrado abaixo.</span><span class="sxs-lookup"><span data-stu-id="394fe-169">hello recommended approach for configuring outbound access toohello Internet is toodefine a route for 0.0.0.0/0 as shown below.</span></span>

    Get-AzureRouteTable -Name 'DirectInternetRouteTable' | Set-AzureRoute -RouteName 'Direct Internet Range 0' -AddressPrefix 0.0.0.0/0 -NextHopType Internet

<span data-ttu-id="394fe-170">Lembre-se de que 0.0.0.0/0 é um intervalo de endereço amplo e assim será substituído por intervalos de endereços mais específicos anunciados pelo Olá rota expressa.</span><span class="sxs-lookup"><span data-stu-id="394fe-170">Remember that 0.0.0.0/0 is a broad address range, and as such will be overridden by more specific address ranges advertised by hello ExpressRoute.</span></span>  <span data-ttu-id="394fe-171">toore-iterar Olá recomendação anterior, um UDR com uma rota 0.0.0.0/0 deve ser usada em conjunto com uma configuração de ExressRoute que só informa 0.0.0.0/0 também.</span><span class="sxs-lookup"><span data-stu-id="394fe-171">toore-iterate hello earlier recommendation, a UDR with a 0.0.0.0/0 route should be used in conjunction with an ExressRoute configuration that only advertises 0.0.0.0/0 as well.</span></span> 

<span data-ttu-id="394fe-172">Como alternativa, você pode baixar uma lista abrangente e atualizada de intervalos CIDR em uso pelo Azure.</span><span class="sxs-lookup"><span data-stu-id="394fe-172">As an alternative, you can download a comprehensive and updated list of CIDR ranges in use by Azure.</span></span>  <span data-ttu-id="394fe-173">Olá arquivo Xml que contém todos os intervalos de endereços IP do Azure hello está disponível no hello [Microsoft Download Center][DownloadCenterAddressRanges].</span><span class="sxs-lookup"><span data-stu-id="394fe-173">hello Xml file containing all of hello Azure IP address ranges is available from hello [Microsoft Download Center][DownloadCenterAddressRanges].</span></span>  

<span data-ttu-id="394fe-174">Embora Observe que alterar esses intervalos ao longo do tempo, assim a necessidade de atualizações manuais periódica toohello definidas pelo usuário rotas tookeep em sincronia.  Além disso, já que há um padrão superior toofit dentro do limite de rota Olá 100 intervalos de limite de 100 rotas em um único UDR, você precisa muito "resumirá" endereço de IP do Azure hello, tendo em mente que UDR rotas definidas necessário toobe mais específico que Olá rotas anunciadas pelo seu Rota expressa.</span><span class="sxs-lookup"><span data-stu-id="394fe-174">Note though that these ranges change over time, thus necessitating periodic manual updates toohello user defined routes tookeep in sync.  Also, since there is a default upper limit of 100 routes in a single UDR, you will need too"summarize" hello Azure IP address ranges toofit within hello 100 route limit, keeping in mind that UDR defined routes need toobe more specific than hello routes advertised by your ExpressRoute.</span></span>  

<span data-ttu-id="394fe-175">**Etapa 3: Associar Olá rota tabela toohello sub-rede contendo Olá ambiente de serviço de aplicativo**</span><span class="sxs-lookup"><span data-stu-id="394fe-175">**Step 3:  Associate hello route table toohello subnet containing hello App Service Environment**</span></span>

<span data-ttu-id="394fe-176">a última etapa de configuração Olá é tooassociate Olá rota tabela toohello subrede onde Olá ambiente de serviço de aplicativo será implantado.</span><span class="sxs-lookup"><span data-stu-id="394fe-176">hello last  configuration step is tooassociate hello route table toohello subnet where hello App Service Environment will be deployed.</span></span>  <span data-ttu-id="394fe-177">Olá comando a seguir associa toohello de "DirectInternetRouteTable" hello "ASESubnet" que eventualmente conterá um ambiente de serviço de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="394fe-177">hello following command associates hello "DirectInternetRouteTable" toohello "ASESubnet" that will eventually contain an App Service Environment.</span></span>

    Set-AzureSubnetRouteTable -VirtualNetworkName 'YourVirtualNetworkNameHere' -SubnetName 'ASESubnet' -RouteTableName 'DirectInternetRouteTable'


<span data-ttu-id="394fe-178">**Etapa 4: Etapas finais**</span><span class="sxs-lookup"><span data-stu-id="394fe-178">**Step 4:  Final Steps**</span></span>

<span data-ttu-id="394fe-179">Após a tabela de rotas Olá sub-rede associada toohello, ele é recomendado toofirst teste e confirmar Olá pretendido efeito.</span><span class="sxs-lookup"><span data-stu-id="394fe-179">Once hello route table is bound toohello subnet, it is recommended toofirst test and confirm hello intended effect.</span></span>  <span data-ttu-id="394fe-180">Por exemplo, implantar uma máquina virtual na sub-rede hello e confirme se:</span><span class="sxs-lookup"><span data-stu-id="394fe-180">For example, deploy a virtual machine into hello subnet and confirm that:</span></span>

* <span data-ttu-id="394fe-181">Tooboth de tráfego de saída do Azure e pontos de extremidade do Azure não mencionado anteriormente neste artigo é **não** que fluem para baixo Olá circuito de rota expressa.</span><span class="sxs-lookup"><span data-stu-id="394fe-181">Outbound traffic tooboth Azure and non-Azure endpoints mentioned earlier in this article is **not** flowing down hello ExpressRoute circuit.</span></span>  <span data-ttu-id="394fe-182">É muito importante tooverify esse comportamento, como se o tráfego de saída da sub-rede Olá ainda está sendo forçado encapsulado no local, a criação do ambiente de serviço de aplicativo sempre irá falhar.</span><span class="sxs-lookup"><span data-stu-id="394fe-182">It is very important tooverify this behavior, since if outbound traffic from hello subnet is still being forced tunneled on-premises, App Service Environment creation will always fail.</span></span> 
* <span data-ttu-id="394fe-183">Pesquisas DNS para pontos de extremidade Olá mencionado anteriormente todos resolvendo corretamente.</span><span class="sxs-lookup"><span data-stu-id="394fe-183">DNS lookups for hello endpoints mentioned earlier are all resolving properly.</span></span> 

<span data-ttu-id="394fe-184">Depois de saudação acima etapas são confirmados, você precisará toodelete Olá virtual machine porque sub-rede Olá precisa toobe "empty" em Olá Olá de tempo que o ambiente de serviço de aplicativo é criado.</span><span class="sxs-lookup"><span data-stu-id="394fe-184">Once hello above steps are confirmed, you will need toodelete hello virtual machine because hello subnet needs toobe "empty" at hello time hello App Service Environment is created.</span></span>

<span data-ttu-id="394fe-185">Prossiga então com a criação de um Ambiente do Serviço de Aplicativo.</span><span class="sxs-lookup"><span data-stu-id="394fe-185">Then proceed with creating an App Service Environment!</span></span>

## <a name="getting-started"></a><span data-ttu-id="394fe-186">Introdução</span><span class="sxs-lookup"><span data-stu-id="394fe-186">Getting started</span></span>
<span data-ttu-id="394fe-187">Todos os artigos e como-para para ambientes de serviço de aplicativo estão disponíveis no hello [Leiame para ambientes de serviço de aplicativo](../app-service/app-service-app-service-environments-readme.md).</span><span class="sxs-lookup"><span data-stu-id="394fe-187">All articles and How-To's for App Service Environments are available in hello [README for Application Service Environments](../app-service/app-service-app-service-environments-readme.md).</span></span>

<span data-ttu-id="394fe-188">tooget iniciado com ambientes de serviço de aplicativo, consulte [Introdução tooApp ambiente de serviço][IntroToAppServiceEnvironment]</span><span class="sxs-lookup"><span data-stu-id="394fe-188">tooget started with App Service Environments, see [Introduction tooApp Service Environment][IntroToAppServiceEnvironment]</span></span>

<span data-ttu-id="394fe-189">Para obter mais informações sobre a plataforma do serviço de aplicativo do Azure hello, consulte [do serviço de aplicativo do Azure][AzureAppService].</span><span class="sxs-lookup"><span data-stu-id="394fe-189">For more information about hello Azure App Service platform, see [Azure App Service][AzureAppService].</span></span>

<!-- LINKS -->
[virtualnetwork]: http://azure.microsoft.com/services/virtual-network/
[ExpressRoute]: http://azure.microsoft.com/services/expressroute/
[requiredports]: http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-control-inbound-traffic/
[NetworkSecurityGroups]: http://azure.microsoft.com/documentation/articles/virtual-networks-nsg/
[UDROverview]: http://azure.microsoft.com/documentation/articles/virtual-networks-udr-overview/
[UDRHowTo]: http://azure.microsoft.com/documentation/articles/virtual-networks-udr-how-to/
[HowToCreateAnAppServiceEnvironment]: http://azure.microsoft.com/documentation/articles/app-service-web-how-to-create-an-app-service-environment/
[AzureDownloads]: http://azure.microsoft.com/en-us/downloads/ 
[DownloadCenterAddressRanges]: http://www.microsoft.com/download/details.aspx?id=41653  
[NetworkSecurityGroups]: https://azure.microsoft.com/documentation/articles/virtual-networks-nsg/
[AzureAppService]: http://azure.microsoft.com/documentation/articles/app-service-value-prop-what-is/
[IntroToAppServiceEnvironment]:  http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-intro/
[NewPortal]:  https://portal.azure.com


<!-- IMAGES -->
