---
title: Como Criar um ASE ILB Usando Modelos do Azure Resource Manager | Microsoft Docs
description: Saiba como criar um ASE de balanceador de carga interno usando modelos do Azure Resource Manager.
services: app-service
documentationcenter: 
author: stefsch
manager: nirma
editor: 
ms.assetid: 091decb6-b0de-42a1-9f2f-c18d9b2e67df
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/11/2017
ms.author: stefsch
ms.openlocfilehash: 147ab76d38c8bbbf34d35ed6c2a194d97fe711ab
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/03/2017
---
# <a name="how-to-create-an-ilb-ase-using-azure-resource-manager-templates"></a><span data-ttu-id="db769-103">Como criar um ASE ILB usando modelos do Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="db769-103">How To Create an ILB ASE Using Azure Resource Manager Templates</span></span>

> [!NOTE] 
> <span data-ttu-id="db769-104">Este artigo é sobre o Ambiente do Serviço de Aplicativo v1.</span><span class="sxs-lookup"><span data-stu-id="db769-104">This article is about the App Service Environment v1.</span></span> <span data-ttu-id="db769-105">Há uma versão mais recente do ambiente de serviço de aplicativo que é mais fácil de usar e é executado na infraestrutura mais avançada.</span><span class="sxs-lookup"><span data-stu-id="db769-105">There is a newer version of the App Service Environment that is easier to use and runs on more powerful infrastructure.</span></span> <span data-ttu-id="db769-106">Para saber mais sobre o novo início de versão com o [Introdução ao Ambiente do Serviço de Aplicativo](../app-service/app-service-environment/intro.md).</span><span class="sxs-lookup"><span data-stu-id="db769-106">To learn more about the new version start with the [Introduction to the App  Service Environment](../app-service/app-service-environment/intro.md).</span></span>
>

## <a name="overview"></a><span data-ttu-id="db769-107">Visão geral</span><span class="sxs-lookup"><span data-stu-id="db769-107">Overview</span></span>
<span data-ttu-id="db769-108">Ambientes de Serviço de Aplicativo podem ser criados com um endereço interno de rede virtual em vez de um VIP público.</span><span class="sxs-lookup"><span data-stu-id="db769-108">App Service Environments can be created with a virtual network internal address instead of a public VIP.</span></span>  <span data-ttu-id="db769-109">Esse endereço interno é fornecido por um componente do Azure chamado ILB (balanceador de carga interno).</span><span class="sxs-lookup"><span data-stu-id="db769-109">This internal address is provided by an Azure component called the internal load balancer (ILB).</span></span>  <span data-ttu-id="db769-110">Um ASE ILB pode ser criado usando o portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="db769-110">An ILB ASE can be created using the Azure portal.</span></span>  <span data-ttu-id="db769-111">Ele também pode ser criado usando a automação por meio de modelos do Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="db769-111">It can also be created using automation by way of Azure Resource Manager templates.</span></span>  <span data-ttu-id="db769-112">Este artigo explica as etapas e a sintaxe necessária para criar um ASE ILB com modelos do Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="db769-112">This article walks through the steps and syntax needed to create an ILB ASE with Azure Resource Manager templates.</span></span>

<span data-ttu-id="db769-113">Há três etapas envolvidas na automatização da criação de um ASE ILB:</span><span class="sxs-lookup"><span data-stu-id="db769-113">There are three steps involved in automating creation of an ILB ASE:</span></span>

1. <span data-ttu-id="db769-114">Primeiro o ASE base é criado em uma rede virtual usando um endereço de balanceador de carga interno em vez de um VIP público.</span><span class="sxs-lookup"><span data-stu-id="db769-114">First the base ASE is created in a virtual network using an internal load balancer address instead of a public VIP.</span></span>  <span data-ttu-id="db769-115">Como parte dessa etapa, um nome de domínio raiz é atribuído ao ASE ILB.</span><span class="sxs-lookup"><span data-stu-id="db769-115">As part of this step, a root domain name is assigned to the ILB ASE.</span></span>
2. <span data-ttu-id="db769-116">Depois que o ILB ASE é criado, um certificado SSL é carregado.</span><span class="sxs-lookup"><span data-stu-id="db769-116">Once the ILB ASE is created, an SSL certificate is uploaded.</span></span>  
3. <span data-ttu-id="db769-117">O certificado SSL carregado foi atribuído explicitamente à ASE ILB como o certificado SSL "padrão".</span><span class="sxs-lookup"><span data-stu-id="db769-117">The uploaded SSL certificate is explicitly assigned to the ILB ASE as its "default" SSL certificate.</span></span>  <span data-ttu-id="db769-118">Esse certificado SSL será usado para o tráfego SSL dos aplicativos no ASE ILB quando eles são endereçados utilizando o domínio-raiz comum atribuído ao ASE (por exemplo, https://someapp.mycustomrootcomain.com)</span><span class="sxs-lookup"><span data-stu-id="db769-118">This SSL certificate will be used for SSL traffic to apps on the ILB ASE when the apps are addressed using the common root domain assigned to the ASE (e.g. https://someapp.mycustomrootcomain.com)</span></span>

## <a name="creating-the-base-ilb-ase"></a><span data-ttu-id="db769-119">Criando o ASE ILB base</span><span class="sxs-lookup"><span data-stu-id="db769-119">Creating the Base ILB ASE</span></span>
<span data-ttu-id="db769-120">Um modelo do Azure Resource Manager de exemplo e seu arquivo de parâmetros associado estão disponíveis no GitHub [aqui][quickstartilbasecreate].</span><span class="sxs-lookup"><span data-stu-id="db769-120">An example Azure Resource Manager template, and its associated parameters file, are available on GitHub [here][quickstartilbasecreate].</span></span>

<span data-ttu-id="db769-121">A maioria dos parâmetros no arquivo *azuredeploy.parameters.json* são comuns para criar os ASEs ILB, bem como ASEs associados a um VIP público.</span><span class="sxs-lookup"><span data-stu-id="db769-121">Most of the parameters in the *azuredeploy.parameters.json* file are common to creating both ILB ASEs, as well as ASEs bound to a public VIP.</span></span>  <span data-ttu-id="db769-122">A lista abaixo, ao criar um ASE ILB, chama parâmetros de anotação especial ou exclusivos:</span><span class="sxs-lookup"><span data-stu-id="db769-122">The list below calls out parameters of special note, or that are unique, when creating an ILB ASE:</span></span>

* <span data-ttu-id="db769-123">*interalLoadBalancingMode*: na maioria dos casos, define para 3, o que significa que o tráfego HTTP/HTTPS nas portas 80/443 e as portas do canal de dados/controle atendidas pelo serviço FTP no ASE serão associados a um endereço interno da rede virtual alocada do ILB.</span><span class="sxs-lookup"><span data-stu-id="db769-123">*interalLoadBalancingMode*:  In most cases set this to 3, which means both HTTP/HTTPS traffic on ports 80/443, and the control/data channel ports listened to by the FTP service on the ASE, will be bound to an ILB allocated virtual network internal address.</span></span>  <span data-ttu-id="db769-124">Se essa propriedade for definida como 2, somente as portas relacionadas ao serviço FTP (canais de controle e de dados) serão associadas a um endereço ILB, ao passo que o tráfego HTTP/HTTPS permanecerá no VIP público.</span><span class="sxs-lookup"><span data-stu-id="db769-124">If this property is instead set to 2, then only the FTP service related ports (both control and data channels) will be bound to an ILB address, while the HTTP/HTTPS traffic will remain on the public VIP.</span></span>
* <span data-ttu-id="db769-125">*dnsSuffix*: esse parâmetro define o domínio-raiz padrão que será atribuído ao ASE.</span><span class="sxs-lookup"><span data-stu-id="db769-125">*dnsSuffix*:  This parameter defines the default root domain that will be assigned to the ASE.</span></span>  <span data-ttu-id="db769-126">A variação pública do Serviço de Aplicativo do Azure, o domínio de raiz padrão para todos os aplicativos Web, é *azurewebsites.net*.</span><span class="sxs-lookup"><span data-stu-id="db769-126">In the public variation of Azure App Service, the default root domain for all web apps is *azurewebsites.net*.</span></span>  <span data-ttu-id="db769-127">No entanto, como um ASE ILB é interno na rede virtual do cliente, não faz sentido usar o domínio de raiz padrão do serviço público.</span><span class="sxs-lookup"><span data-stu-id="db769-127">However since an ILB ASE is internal to a customer's virtual network, it doesn't make sense to use the public service's default root domain.</span></span>  <span data-ttu-id="db769-128">Em vez disso, um ASE ILB deve ter um domínio de raiz padrão que faça sentido para uso dentro da rede virtual interna da empresa.</span><span class="sxs-lookup"><span data-stu-id="db769-128">Instead, an ILB ASE should have a default root domain that makes sense for use within a company's internal virtual network.</span></span>  <span data-ttu-id="db769-129">Por exemplo, uma empresa hipotética Contoso pode usar um domínio raiz padrão *internal-contoso.com* para aplicativos que se destinam apenas a serem resolvidos e acessados na rede virtual da Contoso.</span><span class="sxs-lookup"><span data-stu-id="db769-129">For example, a hypothetical Contoso Corporation might use a default root domain of *internal-contoso.com* for apps that are intended to only be resolvable and accessible within Contoso's virtual network.</span></span> 
* <span data-ttu-id="db769-130">*ipSslAddressCount*: esse parâmetro é automaticamente padronizado para um valor 0 no arquivo *azuredeploy.json* porque os ASEs ILB têm apenas um único endereço ILB.</span><span class="sxs-lookup"><span data-stu-id="db769-130">*ipSslAddressCount*:  This parameter is automatically defaulted to a value of 0 in the *azuredeploy.json* file because ILB ASEs only have a single ILB address.</span></span>  <span data-ttu-id="db769-131">Não há nenhum endereço IP SSL explícito para um ASE ILB e, portanto, o pool de endereços IP SSL para um ASE ILB deve ser definido como zero. Caso contrário, ocorrerá um erro de provisionamento.</span><span class="sxs-lookup"><span data-stu-id="db769-131">There are no explicit IP-SSL addresses for an ILB ASE, and hence the IP-SSL address pool for an ILB ASE must be set to zero, otherwise a provisioning error will occur.</span></span> 

<span data-ttu-id="db769-132">Quando o arquivo *azuredeploy.parameters.json* for preenchido para um ASE ILB, o ASE ILB pode ser criado usando o trecho de código do Powershell a seguir.</span><span class="sxs-lookup"><span data-stu-id="db769-132">Once the *azuredeploy.parameters.json* file has been filled in for an ILB ASE, the ILB ASE can then be created using the following Powershell code snippet.</span></span>  <span data-ttu-id="db769-133">Altere os CAMINHOS do arquivo para corresponder ao local em que os arquivos do modelo do Azure Resource Manager estão localizados no seu computador.</span><span class="sxs-lookup"><span data-stu-id="db769-133">Change the file PATHs to match where the Azure Resource Manager template files are located on your machine.</span></span>  <span data-ttu-id="db769-134">Além disso, lembre-se de fornecer seus próprios valores para o nome de implantação do Azure Resource Manager e para o nome do grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="db769-134">Also remember to supply your own values for the Azure Resource Manager deployment name, and resource group name.</span></span>

    $templatePath="PATH\azuredeploy.json"
    $parameterPath="PATH\azuredeploy.parameters.json"

    New-AzureRmResourceGroupDeployment -Name "CHANGEME" -ResourceGroupName "YOUR-RG-NAME-HERE" -TemplateFile $templatePath -TemplateParameterFile $parameterPath

<span data-ttu-id="db769-135">Depois que o modelo do Azure Resource Manager for enviado, levará algumas horas para o ASE ILB ser criado.</span><span class="sxs-lookup"><span data-stu-id="db769-135">After the Azure Resource Manager template is submitted it will take a few hours for the ILB ASE to be created.</span></span>  <span data-ttu-id="db769-136">Uma vez concluída a criação, o ASE ILB aparecerá no portal de experiência do usuário na lista de Ambientes de Serviço de Aplicativo para a assinatura que disparou a implantação.</span><span class="sxs-lookup"><span data-stu-id="db769-136">Once the creation completes, the ILB ASE will show up in the portal UX in the list of App Service Environments for the subscription that triggered the deployment.</span></span>

## <a name="uploading-and-configuring-the-default-ssl-certificate"></a><span data-ttu-id="db769-137">Carregando e configurando o certificado SSL "Padrão"</span><span class="sxs-lookup"><span data-stu-id="db769-137">Uploading and Configuring the "Default" SSL Certificate</span></span>
<span data-ttu-id="db769-138">Quando o ILB ASE é criado, um certificado SSL deve ser associado ao ASE como o certificado SSL “padrão” usado para estabelecer conexões SSL com aplicativos.</span><span class="sxs-lookup"><span data-stu-id="db769-138">Once the ILB ASE is created, an SSL certificate should be associated with the ASE as the "default" SSL certificate use for establishing SSL connections to apps.</span></span>  <span data-ttu-id="db769-139">Continuando com o exemplo hipotético da Contoso Corporation, se o sufixo DNS padrão do ASE for *internal-contoso.com*, então, uma conexão com *https://some-random-app.internal-contoso.com* irá requerer um certificado SSL válido para **.internal-contoso.com*.</span><span class="sxs-lookup"><span data-stu-id="db769-139">Continuing with the hypothetical Contoso Corporation example, if the ASE's default DNS suffix is *internal-contoso.com*, then a connection to *https://some-random-app.internal-contoso.com* requires an SSL certificate that is valid for **.internal-contoso.com*.</span></span> 

<span data-ttu-id="db769-140">Há várias maneiras de obter um certificado SSL válido, incluindo CAs internos, adquirir certificado de um emissor externo e usar um certificado autoassinado.</span><span class="sxs-lookup"><span data-stu-id="db769-140">There are a variety of ways to obtain a valid SSL certificate including internal CAs, purchasing a certificate from an external issuer, and using a self-signed certificate.</span></span>  <span data-ttu-id="db769-141">Independentemente da origem do certificado SSL, os seguintes atributos de certificado devem ser configurados corretamente:</span><span class="sxs-lookup"><span data-stu-id="db769-141">Regardless of the source of the SSL certificate, the following certificate attributes need to be configured properly:</span></span>

* <span data-ttu-id="db769-142">*Assunto*: esse atributo deve ser definido para **.domínio-raiz-aqui.com*</span><span class="sxs-lookup"><span data-stu-id="db769-142">*Subject*:  This attribute must be set to **.your-root-domain-here.com*</span></span>
* <span data-ttu-id="db769-143">*Nome Alternativo da Entidade*: esse atributo deve incluir **.your-root-domain-here.com* e **.scm.your-root-domain-here.com*.</span><span class="sxs-lookup"><span data-stu-id="db769-143">*Subject Alternative Name*:  This attribute must include both **.your-root-domain-here.com*, and **.scm.your-root-domain-here.com*.</span></span>  <span data-ttu-id="db769-144">O motivo para a segunda entrada é que as conexões SSL para o site SCM/Kudu associado a cada aplicativo serão feitas usando um endereço do formulário *nome-do-aplicativo.scm.seu-domínio-raiz-aqui.com*.</span><span class="sxs-lookup"><span data-stu-id="db769-144">The reason for the second entry is that SSL connections to the SCM/Kudu site associated with each app will be made using an address of the form *your-app-name.scm.your-root-domain-here.com*.</span></span>

<span data-ttu-id="db769-145">Com um certificado SSL válido em mãos, são necessárias mais duas etapas preparatórias.</span><span class="sxs-lookup"><span data-stu-id="db769-145">With a valid SSL certificate in hand, two additional preparatory steps are needed.</span></span>  <span data-ttu-id="db769-146">O certificado SSL deve ser convertido/salvo como um arquivo.pfx.</span><span class="sxs-lookup"><span data-stu-id="db769-146">The SSL certificate needs to be converted/saved as a .pfx file.</span></span>  <span data-ttu-id="db769-147">Lembre-se de que o arquivo .pfx deve incluir todos os certificados intermediários e raiz e também precisa ser protegido com uma senha.</span><span class="sxs-lookup"><span data-stu-id="db769-147">Remember that the .pfx file needs to include all intermediate and root certificates, and also needs to be secured with a password.</span></span>

<span data-ttu-id="db769-148">Em seguida, o arquivo .pfx resultante deve ser convertido em uma cadeia de caracteres de base64 porque o certificado SSL será carregado usando um modelo do Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="db769-148">Then the resultant .pfx file needs to be converted into a base64 string because the SSL certificate will be uploaded using an Azure Resource Manager template.</span></span>  <span data-ttu-id="db769-149">Já que os modelos do Azure Resource Manager são arquivos de texto, o arquivo .pfx deve ser convertido em uma cadeia de caracteres de base64 para poder ser incluída como um parâmetro do modelo.</span><span class="sxs-lookup"><span data-stu-id="db769-149">Since Azure Resource Manager templates are text files, the .pfx file needs to be converted into a base64 string so it can be included as a parameter of the template.</span></span>

<span data-ttu-id="db769-150">O trecho de código do Powershell abaixo mostra um exemplo de como gerar um certificado autoassinado, exportar o certificado como um arquivo .pfx, converter o arquivo .pfx em uma cadeia de caracteres codificada em base64 e salvar essa cadeia de caracteres em um arquivo separado.</span><span class="sxs-lookup"><span data-stu-id="db769-150">The Powershell code snippet below shows an example of generating a self-signed certificate, exporting the certificate as a .pfx file, converting the .pfx file into a base64 encoded string, and then saving the base64 encoded string to a separate file.</span></span>  <span data-ttu-id="db769-151">O código do PowerShell para a codificação de base64 foi adaptado do [Blog de Scripts do PowerShell][examplebase64encoding].</span><span class="sxs-lookup"><span data-stu-id="db769-151">The Powershell code for base64 encoding was adapted from the [Powershell Scripts Blog][examplebase64encoding].</span></span>

    $certificate = New-SelfSignedCertificate -certstorelocation cert:\localmachine\my -dnsname "*.internal-contoso.com","*.scm.internal-contoso.com"

    $certThumbprint = "cert:\localMachine\my\" + $certificate.Thumbprint
    $password = ConvertTo-SecureString -String "CHANGETHISPASSWORD" -Force -AsPlainText

    $fileName = "exportedcert.pfx"
    Export-PfxCertificate -cert $certThumbprint -FilePath $fileName -Password $password     

    $fileContentBytes = get-content -encoding byte $fileName
    $fileContentEncoded = [System.Convert]::ToBase64String($fileContentBytes)
    $fileContentEncoded | set-content ($fileName + ".b64")

<span data-ttu-id="db769-152">Depois que o certificado SSL for gerado com êxito e convertido em uma cadeia de caracteres codificada em base64, o modelo do Azure Resource Manager de exemplo no GitHub para [configurar o certificado SSL padrão][configuringDefaultSSLCertificate] poderá ser usado.</span><span class="sxs-lookup"><span data-stu-id="db769-152">Once the SSL certificate has been successfully generated and converted to a base64 encoded string, the example Azure Resource Manager template on GitHub for [configuring the default SSL certificate][configuringDefaultSSLCertificate] can be used.</span></span>

<span data-ttu-id="db769-153">Os parâmetros no arquivo *azuredeploy.parameters.json* estão listados abaixo:</span><span class="sxs-lookup"><span data-stu-id="db769-153">The parameters in the *azuredeploy.parameters.json* file are listed below:</span></span>

* <span data-ttu-id="db769-154">*appServiceEnvironmentName*: o nome do ASE ILB sendo configurado.</span><span class="sxs-lookup"><span data-stu-id="db769-154">*appServiceEnvironmentName*:  The name of the ILB ASE being configured.</span></span>
* <span data-ttu-id="db769-155">*existingAseLocation*: a cadeia de caracteres de texto que contém a região do Azure onde o ASE ILB foi implantado.</span><span class="sxs-lookup"><span data-stu-id="db769-155">*existingAseLocation*:  Text string containing the Azure region where the ILB ASE was deployed.</span></span>  <span data-ttu-id="db769-156">Por exemplo: "Centro-Sul dos EUA".</span><span class="sxs-lookup"><span data-stu-id="db769-156">For example:  "South Central US".</span></span>
* <span data-ttu-id="db769-157">*pfxBlobString*: a representação de cadeia de caracteres codificada em base 64 do arquivo .pfx.</span><span class="sxs-lookup"><span data-stu-id="db769-157">*pfxBlobString*:  The based64 encoded string representation of the .pfx file.</span></span>  <span data-ttu-id="db769-158">Usando o trecho de código mostrado anteriormente, copie a cadeia de caracteres contida no "exportedcert.pfx.b64" e cole-a como o valor do atributo *pfxBlobString* .</span><span class="sxs-lookup"><span data-stu-id="db769-158">Using the code snippet shown earlier, you would copy the string contained in "exportedcert.pfx.b64" and paste it in as the value of the *pfxBlobString* attribute.</span></span>
* <span data-ttu-id="db769-159">*password*: a senha usada para proteger o arquivo .pfx.</span><span class="sxs-lookup"><span data-stu-id="db769-159">*password*:  The password used to secure the .pfx file.</span></span>
* <span data-ttu-id="db769-160">*certificateThumbprint*: a impressão digital do certificado.</span><span class="sxs-lookup"><span data-stu-id="db769-160">*certificateThumbprint*:  The certificate's thumbprint.</span></span>  <span data-ttu-id="db769-161">Se você recuperar esse valor do Powershell (por exemplo, *$certificate.Thumbprint* do trecho de código anterior), poderá usar o valor como estiver.</span><span class="sxs-lookup"><span data-stu-id="db769-161">If you retrieve this value from Powershell (e.g. *$certificate.Thumbprint* from the earlier code snippet), you can use the value as-is.</span></span>  <span data-ttu-id="db769-162">No entanto se você copiar o valor da caixa de diálogo Certificado Windows, lembre-se de retirar os espaços estranhos.</span><span class="sxs-lookup"><span data-stu-id="db769-162">However if you copy the value from the Windows certificate dialog, remember to strip out the extraneous spaces.</span></span>  <span data-ttu-id="db769-163">O *certificateThumbprint* deve ser semelhante a: AF3143EB61D43F6727842115BB7F17BBCECAECAE</span><span class="sxs-lookup"><span data-stu-id="db769-163">The *certificateThumbprint* should look something like:  AF3143EB61D43F6727842115BB7F17BBCECAECAE</span></span>
* <span data-ttu-id="db769-164">*certificateName*: um identificador da cadeia de caracteres amigável de sua escolha usado para identificar o certificado.</span><span class="sxs-lookup"><span data-stu-id="db769-164">*certificateName*:  A friendly string identifier of your own choosing used to identity the certificate.</span></span>  <span data-ttu-id="db769-165">O nome é usado como parte do identificador exclusivo do Azure Resource Manager para a entidade *Microsoft.Web/certificates* que representa o certificado SSL.</span><span class="sxs-lookup"><span data-stu-id="db769-165">The name is used as part of the unique Azure Resource Manager identifier for the *Microsoft.Web/certificates* entity representing the SSL certificate.</span></span>  <span data-ttu-id="db769-166">O nome **deve** terminar com o seguinte sufixo:  \_seuNomeASEAqui_InternalLoadBalancingASE.</span><span class="sxs-lookup"><span data-stu-id="db769-166">The name **must** end with the following suffix:  \_yourASENameHere_InternalLoadBalancingASE.</span></span>  <span data-ttu-id="db769-167">Esse sufixo é usado pelo portal como um indicador de que o certificado é usado para proteger um ASE habilitado por ILB.</span><span class="sxs-lookup"><span data-stu-id="db769-167">This suffix is used by the portal as an indicator that the certificate is used for securing an ILB-enabled ASE.</span></span>

<span data-ttu-id="db769-168">Um exemplo abreviado de *azuredeploy.parameters.json* é mostrado abaixo:</span><span class="sxs-lookup"><span data-stu-id="db769-168">An abbreviated example of *azuredeploy.parameters.json* is shown below:</span></span>

    {
         "$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentParameters.json",
         "contentVersion": "1.0.0.0",
         "parameters": {
              "appServiceEnvironmentName": {
                   "value": "yourASENameHere"
              },
              "existingAseLocation": {
                   "value": "East US 2"
              },
              "pfxBlobString": {
                   "value": "MIIKcAIBAz...snip...snip...pkCAgfQ"
              },
              "password": {
                   "value": "PASSWORDGOESHERE"
              },
              "certificateThumbprint": {
                   "value": "AF3143EB61D43F6727842115BB7F17BBCECAECAE"
              },
              "certificateName": {
                   "value": "DefaultCertificateFor_yourASENameHere_InternalLoadBalancingASE"
              }
         }
    }

<span data-ttu-id="db769-169">Quando o arquivo *azuredeploy.parameters.json* tiver sido preenchido, o certificado SSL padrão poderá ser configurado usando o trecho de código do Powershell a seguir.</span><span class="sxs-lookup"><span data-stu-id="db769-169">Once the *azuredeploy.parameters.json* file has been filled in, the default SSL certificate can be configured using the following Powershell code snippet.</span></span>  <span data-ttu-id="db769-170">Altere os CAMINHOS do arquivo para corresponder ao local em que os arquivos do modelo do Azure Resource Manager estão localizados no seu computador.</span><span class="sxs-lookup"><span data-stu-id="db769-170">Change the file PATHs to match where the Azure Resource Manager template files are located on your machine.</span></span>  <span data-ttu-id="db769-171">Além disso, lembre-se de fornecer seus próprios valores para o nome de implantação do Azure Resource Manager e para o nome do grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="db769-171">Also remember to supply your own values for the Azure Resource Manager deployment name, and resource group name.</span></span>

    $templatePath="PATH\azuredeploy.json"
    $parameterPath="PATH\azuredeploy.parameters.json"

    New-AzureRmResourceGroupDeployment -Name "CHANGEME" -ResourceGroupName "YOUR-RG-NAME-HERE" -TemplateFile $templatePath -TemplateParameterFile $parameterPath

<span data-ttu-id="db769-172">Depois que o modelo do Azure Resource Manager for enviado, levará aproximadamente quarenta minutos por front-end do ASE para aplicar a alteração.</span><span class="sxs-lookup"><span data-stu-id="db769-172">After the Azure Resource Manager template is submitted it will take roughly forty minutes minutes per ASE front-end to apply the change.</span></span>  <span data-ttu-id="db769-173">Por exemplo, com um ASE padrão dimensionado usando dois front-ends, o modelo levará aproximadamente uma hora e vinte minutos para concluir.</span><span class="sxs-lookup"><span data-stu-id="db769-173">For example, with a default sized ASE using two front-ends, the template will take around one hour and twenty minutes to complete.</span></span>  <span data-ttu-id="db769-174">Enquanto o modelo estiver em execução, o ASE não poderá ser dimensionado.</span><span class="sxs-lookup"><span data-stu-id="db769-174">While the template is running the ASE will not be able to scaled.</span></span>  

<span data-ttu-id="db769-175">Quando o modelo for concluído, os aplicativos no ASE ILB poderão ser acessados via HTTPS e as conexões serão protegidas usando o certificado SSL padrão.</span><span class="sxs-lookup"><span data-stu-id="db769-175">Once the template completes, apps on the ILB ASE can be accessed over HTTPS and the connections will be secured using the default SSL certificate.</span></span>  <span data-ttu-id="db769-176">O certificado SSL padrão será usado quando aplicativos no ASE ILB forem endereçados utilizando uma combinação de nome do aplicativo com o nome de host padrão.</span><span class="sxs-lookup"><span data-stu-id="db769-176">The default SSL certificate will be used when apps on the ILB ASE are addressed using a combination of the application name plus the default hostname.</span></span>  <span data-ttu-id="db769-177">Por exemplo *https://mycustomapp.internal-contoso.com* usaria o certificado SSL padrão para **.internal-contoso.com*.</span><span class="sxs-lookup"><span data-stu-id="db769-177">For example *https://mycustomapp.internal-contoso.com* would use the default SSL certificate for **.internal-contoso.com*.</span></span>

<span data-ttu-id="db769-178">No entanto, assim como os aplicativos em execução no serviço público multilocatário, os desenvolvedores podem também configurar nomes de host personalizados para aplicativos individuais e configurar associações de certificado SSL SNI exclusivas para aplicativos individuais.</span><span class="sxs-lookup"><span data-stu-id="db769-178">However, just like apps running on the public multi-tenant service, developers can also configure custom host names for individual apps, and then configure unique SNI SSL certificate bindings for individual apps.</span></span>  

## <a name="getting-started"></a><span data-ttu-id="db769-179">Introdução</span><span class="sxs-lookup"><span data-stu-id="db769-179">Getting started</span></span>
<span data-ttu-id="db769-180">Para se familiarizar com os ambientes de serviço de aplicativo, consulte [Introdução ao ambiente do serviço de aplicativo](app-service-app-service-environment-intro.md)</span><span class="sxs-lookup"><span data-stu-id="db769-180">To get started with App Service Environments, see [Introduction to App Service Environment](app-service-app-service-environment-intro.md)</span></span>

<span data-ttu-id="db769-181">Todos os artigos e instruções sobre os Ambientes do Serviço de Aplicativo estão disponíveis no [LEIAME para Ambientes do Serviço de Aplicativo](../app-service/app-service-app-service-environments-readme.md).</span><span class="sxs-lookup"><span data-stu-id="db769-181">All articles and How-To's for App Service Environments are available in the [README for Application Service Environments](../app-service/app-service-app-service-environments-readme.md).</span></span>

[!INCLUDE [app-service-web-whats-changed](../../includes/app-service-web-whats-changed.md)]

[!INCLUDE [app-service-web-try-app-service](../../includes/app-service-web-try-app-service.md)]

<!-- LINKS -->
[quickstartilbasecreate]: https://azure.microsoft.com/documentation/templates/201-web-app-ase-ilb-create/
[examplebase64encoding]: http://powershellscripts.blogspot.com/2007/02/base64-encode-file.html 
[configuringDefaultSSLCertificate]: https://azure.microsoft.com/documentation/templates/201-web-app-ase-ilb-configure-default-ssl/ 

