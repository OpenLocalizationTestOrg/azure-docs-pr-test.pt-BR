---
title: "Solucionar problemas de um aplicativo Web no Serviço de Aplicativo do Azure usando o Visual Studio"
description: "Saiba como solucionar problemas de um aplicativo Web do Azure usando ferramentas de log, rastreamento e depuração remota criadas no Visual Studio 2013."
services: app-service
documentationcenter: .net
author: tdykstra
manager: erikre
editor: 
ms.assetid: def8e481-7803-4371-aa55-64025d116c97
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 08/29/2016
ms.author: rachelap
ms.openlocfilehash: abfd9a4c1b346377d7f1fc30455a1487b113537d
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/29/2017
---
# <a name="troubleshoot-a-web-app-in-azure-app-service-using-visual-studio"></a><span data-ttu-id="7f63b-103">Solucionar problemas de um aplicativo Web no Serviço de Aplicativo do Azure usando o Visual Studio</span><span class="sxs-lookup"><span data-stu-id="7f63b-103">Troubleshoot a web app in Azure App Service using Visual Studio</span></span>
## <a name="overview"></a><span data-ttu-id="7f63b-104">Visão geral</span><span class="sxs-lookup"><span data-stu-id="7f63b-104">Overview</span></span>
<span data-ttu-id="7f63b-105">Este tutorial mostra como usar ferramentas do Visual Studio que ajudam a depurar um aplicativo Web no [Serviço de Aplicativo](http://go.microsoft.com/fwlink/?LinkId=529714), seja executando-o no [modo de depuração](http://www.visualstudio.com/get-started/debug-your-app-vs.aspx) remotamente ou exibindo logs do aplicativo e do servidor Web.</span><span class="sxs-lookup"><span data-stu-id="7f63b-105">This tutorial shows how to use Visual Studio tools that help debug a web app in [App Service](http://go.microsoft.com/fwlink/?LinkId=529714), by running in [debug mode](http://www.visualstudio.com/get-started/debug-your-app-vs.aspx) remotely or by viewing application logs and web server logs.</span></span>

[!INCLUDE [app-service-web-to-api-and-mobile](../../includes/app-service-web-to-api-and-mobile.md)]

<span data-ttu-id="7f63b-106">O que você aprenderá:</span><span class="sxs-lookup"><span data-stu-id="7f63b-106">You'll learn:</span></span>

* <span data-ttu-id="7f63b-107">Quais funções de gerenciamento de aplicativo Web do Azure estão disponíveis no Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="7f63b-107">Which Azure web app management functions are available in Visual Studio.</span></span>
* <span data-ttu-id="7f63b-108">Como usar a exibição remota do Visual Studio para fazer alterações rápidas em um aplicativo Web remoto.</span><span class="sxs-lookup"><span data-stu-id="7f63b-108">How to use Visual Studio remote view to make quick changes in a remote web app.</span></span>
* <span data-ttu-id="7f63b-109">Como executar o modo de depuração remotamente enquanto um projeto está em execução no Azure, tanto para um aplicativo Web quanto para um Trabalho Web.</span><span class="sxs-lookup"><span data-stu-id="7f63b-109">How to run debug mode remotely while a project is running in Azure, both for a web app and for a WebJob.</span></span>
* <span data-ttu-id="7f63b-110">Como criar logs de rastreamento de aplicativos e exibi-los enquanto o aplicativo os está criando.</span><span class="sxs-lookup"><span data-stu-id="7f63b-110">How to create application trace logs and view them while the application is creating them.</span></span>
* <span data-ttu-id="7f63b-111">Como exibir logs do servidor Web, inclusive mensagens de erro detalhadas e rastreamento de solicitação com falha.</span><span class="sxs-lookup"><span data-stu-id="7f63b-111">How to view web server logs, including detailed error messages and failed request tracing.</span></span>
* <span data-ttu-id="7f63b-112">Como enviar logs de diagnóstico para uma conta de armazenamento do Azure e exibi-los nela.</span><span class="sxs-lookup"><span data-stu-id="7f63b-112">How to send diagnostic logs to an Azure Storage account and view them there.</span></span>

<span data-ttu-id="7f63b-113">Se você tiver o Visual Studio Ultimate, também é possível utilizar o [IntelliTrace](http://msdn.microsoft.com/library/vstudio/dd264915.aspx) para depuração.</span><span class="sxs-lookup"><span data-stu-id="7f63b-113">If you have Visual Studio Ultimate, you can also use [IntelliTrace](http://msdn.microsoft.com/library/vstudio/dd264915.aspx) for debugging.</span></span> <span data-ttu-id="7f63b-114">O IntelliTrace não é abordado neste tutorial.</span><span class="sxs-lookup"><span data-stu-id="7f63b-114">IntelliTrace is not covered in this tutorial.</span></span>

## <span data-ttu-id="7f63b-115"><a name="prerequisites"></a>Pré-requisitos</span><span class="sxs-lookup"><span data-stu-id="7f63b-115"><a name="prerequisites"></a>Prerequisites</span></span>
<span data-ttu-id="7f63b-116">Este tutorial funciona com o ambiente de desenvolvimento, o projeto Web e o aplicativo Web do Azure que você configurou na [Introdução ao Azure e ao ASP.NET][GetStarted].</span><span class="sxs-lookup"><span data-stu-id="7f63b-116">This tutorial works with the development environment, web project, and Azure web app that you set up in [Get started with Azure and ASP.NET][GetStarted].</span></span> <span data-ttu-id="7f63b-117">Para as seções do WebJobs, você precisará do aplicativo que você criou na [Introdução ao SDK do Azure WebJobs][GetStartedWJ].</span><span class="sxs-lookup"><span data-stu-id="7f63b-117">For the WebJobs sections, you'll need the application that you create in [Get Started with the Azure WebJobs SDK][GetStartedWJ].</span></span>

<span data-ttu-id="7f63b-118">Os exemplos de código mostrados neste tutorial são para um aplicativo Web MVC em C#, mas os procedimentos para solução de problemas são os mesmos para aplicativos em Visual Basic e Web Forms.</span><span class="sxs-lookup"><span data-stu-id="7f63b-118">The code samples shown in this tutorial are for a C# MVC web application, but the troubleshooting procedures are the same for Visual Basic and Web Forms applications.</span></span>

<span data-ttu-id="7f63b-119">O tutorial presume que você esteja usando o Visual Studio 2015 ou 2013.</span><span class="sxs-lookup"><span data-stu-id="7f63b-119">The tutorial assumes you're using Visual Studio 2015 or 2013.</span></span> <span data-ttu-id="7f63b-120">Se você estiver usando o Visual Studio 2013, os recursos do WebJobs requererão a [Atualização 4](http://go.microsoft.com/fwlink/?LinkID=510314) ou posterior.</span><span class="sxs-lookup"><span data-stu-id="7f63b-120">If you're using Visual Studio 2013, the WebJobs features require [Update 4](http://go.microsoft.com/fwlink/?LinkID=510314) or later.</span></span>

<span data-ttu-id="7f63b-121">O recurso de logs de streaming funciona apenas para aplicativos que tenham como alvo o .NET Framework 4 ou posterior.</span><span class="sxs-lookup"><span data-stu-id="7f63b-121">The streaming logs feature only works for applications that target .NET Framework 4 or later.</span></span>

## <span data-ttu-id="7f63b-122"><a name="sitemanagement"></a>Gerenciamento e configuração de aplicativo Web</span><span class="sxs-lookup"><span data-stu-id="7f63b-122"><a name="sitemanagement"></a>Web app configuration and management</span></span>
<span data-ttu-id="7f63b-123">O Visual Studio fornece acesso a um subconjunto das funções de gerenciamento e das definições de configuração disponíveis no [Portal do Azure](http://go.microsoft.com/fwlink/?LinkId=529715).</span><span class="sxs-lookup"><span data-stu-id="7f63b-123">Visual Studio provides access to a subset of the web app management functions and configuration settings available in the [Azure Portal](http://go.microsoft.com/fwlink/?LinkId=529715).</span></span> <span data-ttu-id="7f63b-124">Nesta seção, você verá o que está disponível usando o **Gerenciador de Servidores**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-124">In this section you'll see what's available by using **Server Explorer**.</span></span> <span data-ttu-id="7f63b-125">Para ver os últimos recursos de integração do Azure, experimente também o **Cloud Explorer** .</span><span class="sxs-lookup"><span data-stu-id="7f63b-125">To see the latest Azure integration features, try out **Cloud Explorer** also.</span></span> <span data-ttu-id="7f63b-126">Você pode abrir as duas janelas do menu de **Exibição** .</span><span class="sxs-lookup"><span data-stu-id="7f63b-126">You can open both windows from the **View** menu.</span></span>

1. <span data-ttu-id="7f63b-127">Se você ainda não entrou no Azure usando o Visual Studio, clique no botão **Conectar ao Azure** do **Gerenciador de Servidores**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-127">If you aren't already signed in to Azure in Visual Studio, click the **Connect to Azure** button in **Server Explorer**.</span></span>

    <span data-ttu-id="7f63b-128">Uma alternativa é instalar um certificado de gerenciamento que dê acesso à conta.</span><span class="sxs-lookup"><span data-stu-id="7f63b-128">An alternative is to install a management certificate that enables access to your account.</span></span> <span data-ttu-id="7f63b-129">Se você optar por instalar um certificado, clique com o botão direito do mouse no nó **Azure** do **Gerenciador de Servidores** e clique em **Gerenciar e Filtrar Assinaturas** no menu de contexto.</span><span class="sxs-lookup"><span data-stu-id="7f63b-129">If you choose to install a certificate, right-click the **Azure** node in **Server Explorer**, and then click **Manage and Filter Subscriptions** in the context menu.</span></span> <span data-ttu-id="7f63b-130">Na caixa de diálogo **Gerenciar Assinaturas do Azure**, clique na guia **Certificados** e em **Importar**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-130">In the **Manage Azure Subscriptions** dialog box, click the **Certificates** tab, and then click **Import**.</span></span> <span data-ttu-id="7f63b-131">Siga as instruções para baixar e importe um arquivo de assinatura (também chamado de arquivo *.publishsettings* ) para a conta do Azure.</span><span class="sxs-lookup"><span data-stu-id="7f63b-131">Follow the directions to download and then import a subscription file (also called a *.publishsettings* file) for your Azure account.</span></span>

   > [!NOTE]
   > <span data-ttu-id="7f63b-132">Se você baixar um arquivo de assinatura, salve-o em uma pasta fora dos diretórios de código-fonte (por exemplo, na pasta Downloads) e exclua-o após a conclusão da importação.</span><span class="sxs-lookup"><span data-stu-id="7f63b-132">If you download a subscription file, save it to a folder outside your source code directories (for example, in the Downloads folder), and then delete it once the import has completed.</span></span> <span data-ttu-id="7f63b-133">Um usuário mal-intencionado que consiga acesso ao arquivo de assinatura pode editar, criar e excluir os serviços do Azure.</span><span class="sxs-lookup"><span data-stu-id="7f63b-133">A malicious user who gains access to the subscription file can edit, create, and delete your Azure services.</span></span>
   >
   >

    <span data-ttu-id="7f63b-134">Para obter mais informações sobre como se conectar aos recursos do Azure no Visual Studio, consulte [Gerenciar contas, assinaturas e funções administrativas](http://go.microsoft.com/fwlink/?LinkId=324796#BKMK_AccountVCert).</span><span class="sxs-lookup"><span data-stu-id="7f63b-134">For more information about connecting to Azure resources from Visual Studio, see [Manage Accounts, Subscriptions, and Administrative Roles](http://go.microsoft.com/fwlink/?LinkId=324796#BKMK_AccountVCert).</span></span>
2. <span data-ttu-id="7f63b-135">No **Gerenciador de Servidores**, expanda **Azure** e **Serviço de Aplicativo**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-135">In **Server Explorer**, expand **Azure** and expand **App Service**.</span></span>
3. <span data-ttu-id="7f63b-136">Expanda o grupo de recursos que inclui o aplicativo Web que você criou em [Introdução ao Azure e ao ASP.NET][GetStarted] e clique com o botão direito do mouse no nó do aplicativo Web e clique em **Exibir Configurações**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-136">Expand the resource group that includes the web app that you created in [Getting started with Azure and ASP.NET][GetStarted], and then right-click the web app node and click **View Settings**.</span></span>

    ![Exibir Configurações no Gerenciador de Servidores](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-viewsettings.png)

    <span data-ttu-id="7f63b-138">A guia **Aplicativo Web do Azure** aparece e nela você pode ver as tarefas de configuração e gerenciamento de aplicativos Web que estão disponíveis no Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="7f63b-138">The **Azure Web App** tab appears, and you can see there the web app management and configuration tasks that are available in Visual Studio.</span></span>

    ![Janela Aplicativo Web do Azure](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-configtab.png)

    <span data-ttu-id="7f63b-140">Neste tutorial, você usará os menus suspensos de log e rastreamento.</span><span class="sxs-lookup"><span data-stu-id="7f63b-140">In this tutorial you'll be using the logging and tracing drop-downs.</span></span> <span data-ttu-id="7f63b-141">Você também usará a depuração remota, mas utilizará um método diferente para habilitá-la.</span><span class="sxs-lookup"><span data-stu-id="7f63b-141">You'll also use remote debugging but you'll use a different method to enable it.</span></span>

    <span data-ttu-id="7f63b-142">Para saber mais sobre as caixas Configurações do Aplicativo e Cadeias de Conexão nessa janela, confira [Aplicativos Web do Azure: como as cadeias de caracteres do aplicativo e as cadeias de conexão funcionam](http://blogs.msdn.com/b/windowsazure/archive/2013/07/17/windows-azure-web-sites-how-application-strings-and-connection-strings-work.aspx).</span><span class="sxs-lookup"><span data-stu-id="7f63b-142">For information about the App Settings and Connection Strings boxes in this window, see [Azure Web Apps: How Application Strings and Connection Strings Work](http://blogs.msdn.com/b/windowsazure/archive/2013/07/17/windows-azure-web-sites-how-application-strings-and-connection-strings-work.aspx).</span></span>

    <span data-ttu-id="7f63b-143">Se desejar executar uma tarefa de gerenciamento do aplicativo Web que não possa ser concluída nessa janela, clique em **Abrir no Portal de Gerenciamento** para abrir uma janela do navegador para o portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="7f63b-143">If you want to perform a web app management task that can't be done in this window, click **Open in Management Portal** to open a browser window to the Azure portal.</span></span>

## <span data-ttu-id="7f63b-144"><a name="remoteview"></a>Acessar arquivos de aplicativo Web no Gerenciador de Servidores</span><span class="sxs-lookup"><span data-stu-id="7f63b-144"><a name="remoteview"></a>Access web app files in Server Explorer</span></span>
<span data-ttu-id="7f63b-145">Você tipicamente implanta um projeto Web com o `customErrors`sinalizador no arquivo Web.config definido como `On` ou `RemoteOnly`, o que significa que você não receberá uma mensagem de erro útil quando algo dá errado.</span><span class="sxs-lookup"><span data-stu-id="7f63b-145">You typically deploy a web project with the `customErrors` flag in the Web.config file set to `On` or `RemoteOnly`, which means you don't get a helpful error message when something goes wrong.</span></span> <span data-ttu-id="7f63b-146">Para muitos erros, tudo o que você recebe é uma página como uma das páginas a seguir.</span><span class="sxs-lookup"><span data-stu-id="7f63b-146">For many errors all you get is a page like one of the following ones.</span></span>

<span data-ttu-id="7f63b-147">**Erro de servidor no aplicativo '/':**</span><span class="sxs-lookup"><span data-stu-id="7f63b-147">**Server Error in '/' Application:**</span></span>

![Página de erro inútil](./media/web-sites-dotnet-troubleshoot-visual-studio/genericerror.png)

<span data-ttu-id="7f63b-149">**Ocorreu um erro:**</span><span class="sxs-lookup"><span data-stu-id="7f63b-149">**An error occurred:**</span></span>

![Página de erro inútil](./media/web-sites-dotnet-troubleshoot-visual-studio/genericerror1.png)

<span data-ttu-id="7f63b-151">**O site não pode exibir a página**</span><span class="sxs-lookup"><span data-stu-id="7f63b-151">**The website cannot display the page**</span></span>

![Página de erro inútil](./media/web-sites-dotnet-troubleshoot-visual-studio/genericerror2.png)

<span data-ttu-id="7f63b-153">Normalmente, a maneira mais fácil de encontrar a causa do erro é habilitar mensagens de erro detalhadas, que a primeira das capturas de tela anteriores explica como fazer.</span><span class="sxs-lookup"><span data-stu-id="7f63b-153">Frequently the easiest way to find the cause of the error is to enable detailed error messages, which the first of the preceding screenshots explains how to do.</span></span> <span data-ttu-id="7f63b-154">Isso exige uma alteração no arquivo Web.config implantado.</span><span class="sxs-lookup"><span data-stu-id="7f63b-154">That requires a change in the deployed Web.config file.</span></span> <span data-ttu-id="7f63b-155">Você pode editar o arquivo *Web.config* no projeto e reimplantar o projeto ou criar uma [transformação de Web.config](http://www.asp.net/mvc/tutorials/deployment/visual-studio-web-deployment/web-config-transformations) e implantar uma build de depuração, mas há uma maneira mais rápida: no **Gerenciador de Soluções**, você pode exibir e editar diretamente arquivos no aplicativo Web remoto usando o recurso *exibição remota*.</span><span class="sxs-lookup"><span data-stu-id="7f63b-155">You could edit the *Web.config* file in the project and redeploy the project, or create a [Web.config transform](http://www.asp.net/mvc/tutorials/deployment/visual-studio-web-deployment/web-config-transformations) and deploy a debug build, but there's a quicker way: in **Solution Explorer** you can directly view and edit files in the remote web app by using the *remote view* feature.</span></span>

1. <span data-ttu-id="7f63b-156">No **Gerenciador de Servidores**, expanda **Azure**, expanda **Serviço de Aplicativo**, expanda o grupo de recursos em que seu aplicativo Web está localizado em e, em seguida, expanda o nó de seu aplicativo Web.</span><span class="sxs-lookup"><span data-stu-id="7f63b-156">In **Server Explorer**, expand **Azure**, expand **App Service**, expand the resource group that your web app is located in, and then expand the node for your web app.</span></span>

    <span data-ttu-id="7f63b-157">Você vê nós que dão acesso aos arquivos de conteúdo e de log do aplicativo Web.</span><span class="sxs-lookup"><span data-stu-id="7f63b-157">You see nodes that give you access to the web app's content files and log files.</span></span>
2. <span data-ttu-id="7f63b-158">Expanda o nó **Arquivos** e clique duas vezes no arquivo *Web.config* .</span><span class="sxs-lookup"><span data-stu-id="7f63b-158">Expand the **Files** node, and double-click the *Web.config* file.</span></span>

    ![Abrir Web.config](./media/web-sites-dotnet-troubleshoot-visual-studio/webconfig.png)

    <span data-ttu-id="7f63b-160">O Visual Studio abre o arquivo Web.config no site remoto e mostra Remoto ao lado do nome do arquivo na barra de título.</span><span class="sxs-lookup"><span data-stu-id="7f63b-160">Visual Studio opens the Web.config file from the remote web app and shows [Remote] next to the file name in the title bar.</span></span>
3. <span data-ttu-id="7f63b-161">Adicione a seguinte linha ao elemento `system.web` :</span><span class="sxs-lookup"><span data-stu-id="7f63b-161">Add the following line to the `system.web` element:</span></span>

    `<customErrors mode="Off"></customErrors>`

    ![Editar Web.config](./media/web-sites-dotnet-troubleshoot-visual-studio/webconfigedit.png)
4. <span data-ttu-id="7f63b-163">Atualize o navegador que está mostrando a mensagem de erro inútil, e agora você recebe uma mensagem de erro detalhada, como o seguinte exemplo:</span><span class="sxs-lookup"><span data-stu-id="7f63b-163">Refresh the browser that is showing the unhelpful error message, and now you get a detailed error message, such as the following example:</span></span>

    ![Mensagem de erro detalhada](./media/web-sites-dotnet-troubleshoot-visual-studio/detailederror.png)

    <span data-ttu-id="7f63b-165">(O erro mostrado foi criado adicionando-se a linha mostrada em vermelho a *Views\Home\Index.cshtml*.)</span><span class="sxs-lookup"><span data-stu-id="7f63b-165">(The error shown was created by adding the line shown in red to *Views\Home\Index.cshtml*.)</span></span>

<span data-ttu-id="7f63b-166">A edição do arquivo Web.config é apenas um exemplo dos cenários em que a capacidade de ler e editar arquivos no aplicativo Web do Azure facilita a solução de problemas.</span><span class="sxs-lookup"><span data-stu-id="7f63b-166">Editing the Web.config file is only one example of scenarios in which the ability to read and edit files on your Azure web app make troubleshooting easier.</span></span>

## <span data-ttu-id="7f63b-167"><a name="remotedebug"></a>Depuração remota de aplicativos Web</span><span class="sxs-lookup"><span data-stu-id="7f63b-167"><a name="remotedebug"></a>Remote debugging web apps</span></span>
<span data-ttu-id="7f63b-168">Se a mensagem de erro detalhada não oferecer informações suficientes e não for possível recriar o erro localmente, outra maneira de solucionar o problema é executar no modo de depuração remotamente.</span><span class="sxs-lookup"><span data-stu-id="7f63b-168">If the detailed error message doesn't provide enough information, and you can't re-create the error locally, another way to troubleshoot is to run in debug mode remotely.</span></span> <span data-ttu-id="7f63b-169">Você pode definir os pontos de interrupção, manipular diretamente a memória, percorrer o código e até mesmo alterar o caminho do código.</span><span class="sxs-lookup"><span data-stu-id="7f63b-169">You can set breakpoints, manipulate memory directly, step through code, and even change the code path.</span></span>

<span data-ttu-id="7f63b-170">A depuração remota não funciona em edições Express do Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="7f63b-170">Remote debugging does not work in Express editions of Visual Studio.</span></span>

<span data-ttu-id="7f63b-171">Esta seção mostra como depurar remotamente usando o projeto que você criou em [Introdução ao Azure e ao ASP.NET][GetStarted].</span><span class="sxs-lookup"><span data-stu-id="7f63b-171">This section shows how to debug remotely using the project you create in [Getting started with Azure and ASP.NET][GetStarted].</span></span>

1. <span data-ttu-id="7f63b-172">Abra o projeto Web que você criou em [Introdução ao Azure e ao ASP.NET][GetStarted].</span><span class="sxs-lookup"><span data-stu-id="7f63b-172">Open the web project that you created in [Getting started with Azure and ASP.NET][GetStarted].</span></span>
2. <span data-ttu-id="7f63b-173">Abra o *Controllers\HomeController.cs*.</span><span class="sxs-lookup"><span data-stu-id="7f63b-173">Open *Controllers\HomeController.cs*.</span></span>
3. <span data-ttu-id="7f63b-174">Exclua o método `About()` e insira o código a seguir em seu lugar.</span><span class="sxs-lookup"><span data-stu-id="7f63b-174">Delete the `About()` method and insert the following code in its place.</span></span>

        public ActionResult About()
        {
            string currentTime = DateTime.Now.ToLongTimeString();
            ViewBag.Message = "The current time is " + currentTime;
            return View();
        }
4. <span data-ttu-id="7f63b-175">[Defina um ponto de interrupção](http://www.visualstudio.com/get-started/debug-your-app-vs.aspx) na linha `ViewBag.Message`.</span><span class="sxs-lookup"><span data-stu-id="7f63b-175">[Set a breakpoint](http://www.visualstudio.com/get-started/debug-your-app-vs.aspx) on the `ViewBag.Message` line.</span></span>
5. <span data-ttu-id="7f63b-176">No **Gerenciador de Soluções**, clique com o botão direito do mouse no projeto e clique em **Publicar**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-176">In **Solution Explorer**, right-click the project, and click **Publish**.</span></span>
6. <span data-ttu-id="7f63b-177">Na lista suspensa **Perfil**, selecione o mesmo perfil que você usou em [Introdução ao Azure e ao ASP.NET][GetStarted].</span><span class="sxs-lookup"><span data-stu-id="7f63b-177">In the **Profile** drop-down list, select the same profile that you used in [Getting started with Azure and ASP.NET][GetStarted].</span></span>
7. <span data-ttu-id="7f63b-178">Clique na guia **Configurações** e altere **Configuração** para **Depuração** e, em seguida, clique em **Publicar**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-178">Click the **Settings** tab, and change **Configuration** to **Debug**, and then click **Publish**.</span></span>

    ![Publicar em modo de depuração](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-publishdebug.png)
8. <span data-ttu-id="7f63b-180">Quando a implantação for concluída e o navegador abrir a URL do Azure do seu aplicativo Web, feche o navegador.</span><span class="sxs-lookup"><span data-stu-id="7f63b-180">After deployment finishes and your browser opens to the Azure URL of your web app, close the browser.</span></span>
9. <span data-ttu-id="7f63b-181">No **Gerenciador de Servidores**, clique com o botão direito do mouse no seu aplicativo Web e clique em **Anexar Depurador**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-181">In **Server Explorer**, right-click your web app, and then click **Attach Debugger**.</span></span>

    ![Anexar Depurador](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-attachdebugger.png)

    <span data-ttu-id="7f63b-183">O navegador é aberto automaticamente na home page em execução no Azure.</span><span class="sxs-lookup"><span data-stu-id="7f63b-183">The browser automatically opens to your home page running in Azure.</span></span> <span data-ttu-id="7f63b-184">Convém aguardar cerca de 20 segundos enquanto o Azure configura o servidor para depuração.</span><span class="sxs-lookup"><span data-stu-id="7f63b-184">You might have to wait 20 seconds or so while Azure sets up the server for debugging.</span></span> <span data-ttu-id="7f63b-185">Esse atraso ocorre apenas na primeira execução que você realiza em modo de depuração em um aplicativo Web.</span><span class="sxs-lookup"><span data-stu-id="7f63b-185">This delay only happens the first time you run in debug mode on a web app.</span></span> <span data-ttu-id="7f63b-186">Nas próximas vezes, durante as próximas 48 horas, quando você iniciar a depuração novamente não haverá atraso.</span><span class="sxs-lookup"><span data-stu-id="7f63b-186">Subsequent times within the next 48 hours when you start debugging again there won't be a delay.</span></span>

    <span data-ttu-id="7f63b-187">**Observação:** se você tiver problemas para iniciar o depurador, tente fazer isso usando o **Cloud Explorer** em vez do **Gerenciador de Servidores**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-187">**Note:** If you have any trouble starting the debugger, try to do it by using **Cloud Explorer** instead of **Server Explorer**.</span></span>
10. <span data-ttu-id="7f63b-188">Clique em **Sobre** no menu.</span><span class="sxs-lookup"><span data-stu-id="7f63b-188">Click **About** in the menu.</span></span>

     <span data-ttu-id="7f63b-189">O Visual Studio para no ponto de interrupção, e o código está em execução no Azure, e não no computador local.</span><span class="sxs-lookup"><span data-stu-id="7f63b-189">Visual Studio stops on the breakpoint, and the code is running in Azure, not on your local computer.</span></span>
11. <span data-ttu-id="7f63b-190">Focalize a variável `currentTime` para ver o valor da hora.</span><span class="sxs-lookup"><span data-stu-id="7f63b-190">Hover over the `currentTime` variable to see the time value.</span></span>

     ![Exibir variável no modo de depuração em execução no Azure](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-debugviewinwa.png)

     <span data-ttu-id="7f63b-192">A hora que você vê é a hora do servidor do Azure, que pode estar em um fuso horário diferente do computador local.</span><span class="sxs-lookup"><span data-stu-id="7f63b-192">The time you see is the Azure server time, which may be in a different time zone than your local computer.</span></span>
12. <span data-ttu-id="7f63b-193">Insira um novo valor para a variável `currentTime` , como "Agora em execução no Azure".</span><span class="sxs-lookup"><span data-stu-id="7f63b-193">Enter a new value for the `currentTime` variable, such as "Now running in Azure".</span></span>
13. <span data-ttu-id="7f63b-194">Pressione F5 para continuar a execução.</span><span class="sxs-lookup"><span data-stu-id="7f63b-194">Press F5 to continue running.</span></span>

     <span data-ttu-id="7f63b-195">A página Sobre em execução no Azure exibe o novo valor que você inseriu na variável currentTime.</span><span class="sxs-lookup"><span data-stu-id="7f63b-195">The About page running in Azure displays the new value that you entered into the currentTime variable.</span></span>

     ![A página Sobre com o novo valor](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-debugchangeinwa.png)

## <span data-ttu-id="7f63b-197"><a name="remotedebugwj"></a> Trabalhos Web de depuração remota</span><span class="sxs-lookup"><span data-stu-id="7f63b-197"><a name="remotedebugwj"></a> Remote debugging WebJobs</span></span>
<span data-ttu-id="7f63b-198">Esta seção mostra como depurar remotamente usando o projeto e o site que você criou na [Introdução ao SDK de Trabalhos Web do Azure](websites-dotnet-webjobs-sdk.md).</span><span class="sxs-lookup"><span data-stu-id="7f63b-198">This section shows how to debug remotely using the project and web app you create in [Get Started with the Azure WebJobs SDK](websites-dotnet-webjobs-sdk.md).</span></span>

<span data-ttu-id="7f63b-199">Os recursos mostrados nesta seção só estão disponíveis no Visual Studio 2013 com a Atualização 4 ou posterior.</span><span class="sxs-lookup"><span data-stu-id="7f63b-199">The features shown in this section are available only in Visual Studio 2013 with Update 4 or later.</span></span>

<span data-ttu-id="7f63b-200">A depuração remota só funciona com Trabalhos Web contínuos.</span><span class="sxs-lookup"><span data-stu-id="7f63b-200">Remote debugging only works with continuous WebJobs.</span></span> <span data-ttu-id="7f63b-201">Trabalhos Web agendados e sob demanda não oferecem suporte a depuração.</span><span class="sxs-lookup"><span data-stu-id="7f63b-201">Scheduled and on-demand WebJobs don't support debugging.</span></span>

1. <span data-ttu-id="7f63b-202">Abra o projeto Web que você criou na [Introdução ao SDK do Azure WebJobs][GetStartedWJ].</span><span class="sxs-lookup"><span data-stu-id="7f63b-202">Open the web project that you created in [Get Started with the Azure WebJobs SDK][GetStartedWJ].</span></span>
2. <span data-ttu-id="7f63b-203">No projeto ContosoAdsWebJob, abra *Functions.cs*.</span><span class="sxs-lookup"><span data-stu-id="7f63b-203">In the ContosoAdsWebJob project, open *Functions.cs*.</span></span>
3. <span data-ttu-id="7f63b-204">[Defina um ponto de interrupção](http://www.visualstudio.com/get-started/debug-your-app-vs.aspx) na primeira instrução do método `GnerateThumbnail`.</span><span class="sxs-lookup"><span data-stu-id="7f63b-204">[Set a breakpoint](http://www.visualstudio.com/get-started/debug-your-app-vs.aspx) on the first statement in the `GnerateThumbnail` method.</span></span>

    ![Definir ponto de interrupção](./media/web-sites-dotnet-troubleshoot-visual-studio/wjbreakpoint.png)
4. <span data-ttu-id="7f63b-206">No **Gerenciador de Soluções**, clique com o botão direito do mouse no projeto Web (não no projeto de Trabalho Web) e clique em **Publicar**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-206">In **Solution Explorer**, right-click the web project (not the WebJob project), and click **Publish**.</span></span>
5. <span data-ttu-id="7f63b-207">Na lista suspensa **Perfil** , selecione o mesmo perfil que você utilizou em [Introdução ao SDK de Trabalhos Web do Azure](websites-dotnet-webjobs-sdk.md).</span><span class="sxs-lookup"><span data-stu-id="7f63b-207">In the **Profile** drop-down list, select the same profile that you used in [Get Started with the Azure WebJobs SDK](websites-dotnet-webjobs-sdk.md).</span></span>
6. <span data-ttu-id="7f63b-208">Clique na guia **Configurações** e altere **Configuração** para **Depuração** e, em seguida, clique em **Publicar**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-208">Click the **Settings** tab, and change **Configuration** to **Debug**, and then click **Publish**.</span></span>

    <span data-ttu-id="7f63b-209">O Visual Studio implanta os projetos Web e de Trabalho Web, e o seu navegador abre a URL do Azure do seu aplicativo Web.</span><span class="sxs-lookup"><span data-stu-id="7f63b-209">Visual Studio deploys the web and WebJob projects, and your browser opens to the Azure URL of your web app.</span></span>
7. <span data-ttu-id="7f63b-210">Em **Gerenciador de Servidores**, expanda **Azure > Serviço de Aplicativo > seu grupo de recursos > seu aplicativo Web > WebJobs > Contínuo** e clique com o botão direito do mouse em **ContosoAdsWebJob**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-210">In **Server Explorer** expand **Azure > App Service > your resource group > your web app > WebJobs > Continuous**, and then right-click **ContosoAdsWebJob**.</span></span>
8. <span data-ttu-id="7f63b-211">Clique em **Anexar o depurador**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-211">Click **Attach Debugger**.</span></span>

    ![Anexar Depurador](./media/web-sites-dotnet-troubleshoot-visual-studio/wjattach.png)

    <span data-ttu-id="7f63b-213">O navegador é aberto automaticamente na home page em execução no Azure.</span><span class="sxs-lookup"><span data-stu-id="7f63b-213">The browser automatically opens to your home page running in Azure.</span></span> <span data-ttu-id="7f63b-214">Convém aguardar cerca de 20 segundos enquanto o Azure configura o servidor para depuração.</span><span class="sxs-lookup"><span data-stu-id="7f63b-214">You might have to wait 20 seconds or so while Azure sets up the server for debugging.</span></span> <span data-ttu-id="7f63b-215">Esse atraso ocorre apenas na primeira execução que você realiza em modo de depuração em um aplicativo Web.</span><span class="sxs-lookup"><span data-stu-id="7f63b-215">This delay only happens the first time you run in debug mode on a web app.</span></span> <span data-ttu-id="7f63b-216">Na próxima vez que você anexar o depurador não haverá atraso, se você o fizer no prazo de 48 horas.</span><span class="sxs-lookup"><span data-stu-id="7f63b-216">The next time you attach the debugger there won't be a delay, if you do it within 48 hours.</span></span>
9. <span data-ttu-id="7f63b-217">No navegador da Web que estiver aberto na home page do Contoso Ads, crie um novo anúncio.</span><span class="sxs-lookup"><span data-stu-id="7f63b-217">In the web browser that is opened to the Contoso Ads home page, create a new ad.</span></span>

    <span data-ttu-id="7f63b-218">A criação de um anúncio faz com que uma mensagem de fila seja criada, a qual será capturada pelo trabalho Web e processada.</span><span class="sxs-lookup"><span data-stu-id="7f63b-218">Creating an ad causes a queue message to be created, which will be picked up by the WebJob and processed.</span></span> <span data-ttu-id="7f63b-219">Quando o SDK de trabalhos Web chamar a função para processar a mensagem de fila, o código atingirá seu ponto de interrupção.</span><span class="sxs-lookup"><span data-stu-id="7f63b-219">When the WebJobs SDK calls the function to process the queue message, the code will hit your breakpoint.</span></span>
10. <span data-ttu-id="7f63b-220">Quando o depurador for interrompido no seu ponto de interrupção, será possível examinar e alterar os valores das variáveis enquanto o programa estiver sendo executado na nuvem.</span><span class="sxs-lookup"><span data-stu-id="7f63b-220">When the debugger breaks at your breakpoint, you can examine and change variable values while the program is running the cloud.</span></span> <span data-ttu-id="7f63b-221">Na ilustração a seguir, o depurador mostra o conteúdo do objeto blobInfo que foi passado para o método GenerateThumbnail.</span><span class="sxs-lookup"><span data-stu-id="7f63b-221">In the following illustration the debugger shows the contents of the blobInfo object that was passed to the GenerateThumbnail method.</span></span>

     ![Objeto blobInfo no depurador](./media/web-sites-dotnet-troubleshoot-visual-studio/blobinfo.png)
11. <span data-ttu-id="7f63b-223">Pressione F5 para continuar a execução.</span><span class="sxs-lookup"><span data-stu-id="7f63b-223">Press F5 to continue running.</span></span>

     <span data-ttu-id="7f63b-224">O método GenerateThumbnail termina de criar a miniatura.</span><span class="sxs-lookup"><span data-stu-id="7f63b-224">The GenerateThumbnail method finishes creating the thumbnail.</span></span>
12. <span data-ttu-id="7f63b-225">No navegador, atualize a página de índice e você verá a miniatura.</span><span class="sxs-lookup"><span data-stu-id="7f63b-225">In the browser, refresh the Index page and you see the thumbnail.</span></span>
13. <span data-ttu-id="7f63b-226">No Visual Studio, pressione SHIFT+F5 para parar a depuração.</span><span class="sxs-lookup"><span data-stu-id="7f63b-226">In Visual Studio, press SHIFT+F5 to stop debugging.</span></span>
14. <span data-ttu-id="7f63b-227">No **Gerenciador de Servidores**, clique com botão direito do mouse no nó ContosoAdsWebJob e clique em **Painel de exibição**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-227">In **Server Explorer**, right-click the ContosoAdsWebJob node and click **View Dashboard**.</span></span>
15. <span data-ttu-id="7f63b-228">Entre com suas credenciais do Azure e, em seguida, clique no nome do trabalho Web para ir à página do seu trabalho Web.</span><span class="sxs-lookup"><span data-stu-id="7f63b-228">Sign in with your Azure credentials, and then click the WebJob name to go to the page for your WebJob.</span></span>

     ![Clicar em ContosoAdsWebJob](./media/web-sites-dotnet-troubleshoot-visual-studio/clickcaw.png)

     <span data-ttu-id="7f63b-230">O painel que mostra a função GenerateThumbnail foi executada recentemente.</span><span class="sxs-lookup"><span data-stu-id="7f63b-230">The Dashboard shows that the GenerateThumbnail function executed recently.</span></span>

     <span data-ttu-id="7f63b-231">(Na próxima vez que você clicar em **Painel de exibição**, não será necessário entrar e o navegador vai diretamente para a página do Trabalho Web.)</span><span class="sxs-lookup"><span data-stu-id="7f63b-231">(The next time you click **View Dashboard**, you don't have to sign in, and the browser goes directly to the page for your WebJob.)</span></span>
16. <span data-ttu-id="7f63b-232">Clique no nome da função para ver detalhes sobre a execução da função.</span><span class="sxs-lookup"><span data-stu-id="7f63b-232">Click the function name to see details about the function execution.</span></span>

     ![Detalhes da função](./media/web-sites-dotnet-troubleshoot-visual-studio/funcdetails.png)

<span data-ttu-id="7f63b-234">Se a sua função [criou logs](websites-dotnet-webjobs-sdk-storage-queues-how-to.md#logs), você pode clicar em **ToggleOutput** para vê-los.</span><span class="sxs-lookup"><span data-stu-id="7f63b-234">If your function [wrote logs](websites-dotnet-webjobs-sdk-storage-queues-how-to.md#logs), you could click **ToggleOutput** to see them.</span></span>

## <a name="notes-about-remote-debugging"></a><span data-ttu-id="7f63b-235">Observações sobre a depuração remota</span><span class="sxs-lookup"><span data-stu-id="7f63b-235">Notes about remote debugging</span></span>
* <span data-ttu-id="7f63b-236">A execução em modo de depuração em produção não é recomendada.</span><span class="sxs-lookup"><span data-stu-id="7f63b-236">Running in debug mode in production is not recommended.</span></span> <span data-ttu-id="7f63b-237">Se o seu aplicativo Web de produção não estiver dimensionado para várias instâncias de servidor, a depuração impedirá o servidor Web de responder a outras solicitações.</span><span class="sxs-lookup"><span data-stu-id="7f63b-237">If your production web app is not scaled out to multiple server instances, debugging will prevent the web server from responding to other requests.</span></span> <span data-ttu-id="7f63b-238">Se houver várias instâncias de servidor Web, ao anexar o depurador você obterá uma instância aleatória e não há como garantir que suas solicitações subsequentes do navegador irão para essa instância.</span><span class="sxs-lookup"><span data-stu-id="7f63b-238">If you do have multiple web server instances, when you attach to the debugger you'll get a random instance, and you have no way to ensure that subsequent browser requests will go to that instance.</span></span> <span data-ttu-id="7f63b-239">Além disso, normalmente você não implanta uma compilação de depuração em produção e as otimizações do compilador para compilações de versão podem impossibilitar a exibição do que está acontecendo linha por linha em seu código-fonte.</span><span class="sxs-lookup"><span data-stu-id="7f63b-239">Also, you typically don't deploy a debug build to production, and compiler optimizations for release builds might make it impossible to show what is happening line by line in your source code.</span></span> <span data-ttu-id="7f63b-240">Para solucionar problemas de produção, os melhores recursos são o rastreamento do aplicativo e os logs do servidor Web.</span><span class="sxs-lookup"><span data-stu-id="7f63b-240">For troubleshooting production problems, your best resource is application tracing and web server logs.</span></span>
* <span data-ttu-id="7f63b-241">Evite paradas longas em pontos de interrupção durante a depuração remota.</span><span class="sxs-lookup"><span data-stu-id="7f63b-241">Avoid long stops at breakpoints when remote debugging.</span></span> <span data-ttu-id="7f63b-242">O Azure trata um processo parado por mais de alguns minutos como um processo sem resposta e o desliga.</span><span class="sxs-lookup"><span data-stu-id="7f63b-242">Azure treats a process that is stopped for longer than a few minutes as an unresponsive process, and shuts it down.</span></span>
* <span data-ttu-id="7f63b-243">Enquanto você está depurando, o servidor está enviando dados para o Visual Studio, o que pode afetar os encargos de largura de banda.</span><span class="sxs-lookup"><span data-stu-id="7f63b-243">While you're debugging, the server is sending data to Visual Studio, which could affect bandwidth charges.</span></span> <span data-ttu-id="7f63b-244">Para obter informações sobre as taxas de largura de banda, consulte [Preço do Azure](https://azure.microsoft.com/pricing/calculator/).</span><span class="sxs-lookup"><span data-stu-id="7f63b-244">For information about bandwidth rates, see [Azure Pricing](https://azure.microsoft.com/pricing/calculator/).</span></span>
* <span data-ttu-id="7f63b-245">Verifique se o atributo `debug` do elemento `compilation` no arquivo *Web.config* está definido como verdadeiro.</span><span class="sxs-lookup"><span data-stu-id="7f63b-245">Make sure that the `debug` attribute of the `compilation` element in the *Web.config* file is set to true.</span></span> <span data-ttu-id="7f63b-246">Por padrão, ele é definido como true quando você publica uma configuração de compilação de depuração.</span><span class="sxs-lookup"><span data-stu-id="7f63b-246">It is set to true by default when you publish a debug build configuration.</span></span>

        <system.web>
          <compilation debug="true" targetFramework="4.5" />
          <httpRuntime targetFramework="4.5" />
        </system.web>
* <span data-ttu-id="7f63b-247">Se você descobrir que o depurador não entra no código que você deseja depurar, será preciso alterar a configuração de Just My Code.</span><span class="sxs-lookup"><span data-stu-id="7f63b-247">If you find that the debugger won't step into code that you want to debug, you might have to change the Just My Code setting.</span></span>  <span data-ttu-id="7f63b-248">Para obter mais informações, consulte [Restringir a entrada em Just My Code](http://msdn.microsoft.com/library/vstudio/y740d9d3.aspx#BKMK_Restrict_stepping_to_Just_My_Code)</span><span class="sxs-lookup"><span data-stu-id="7f63b-248">For more information, see [Restrict stepping to Just My Code](http://msdn.microsoft.com/library/vstudio/y740d9d3.aspx#BKMK_Restrict_stepping_to_Just_My_Code).</span></span>
* <span data-ttu-id="7f63b-249">Um timer é iniciado no servidor quando você habilita o recurso de depuração remota e, após 48 horas, o recurso é desativado automaticamente.</span><span class="sxs-lookup"><span data-stu-id="7f63b-249">A timer starts on the server when you enable the remote debugging feature, and after 48 hours the feature is automatically turned off.</span></span> <span data-ttu-id="7f63b-250">Esse limite de 48 horas é definido por razões de segurança e desempenho.</span><span class="sxs-lookup"><span data-stu-id="7f63b-250">This 48 hour limit is done for security and performance reasons.</span></span> <span data-ttu-id="7f63b-251">Você pode reativá-lo facilmente quantas vezes quiser.</span><span class="sxs-lookup"><span data-stu-id="7f63b-251">You can easily turn the feature back on as many times as you like.</span></span> <span data-ttu-id="7f63b-252">É recomendável deixá-lo desabilitado quando você não está depurando ativamente.</span><span class="sxs-lookup"><span data-stu-id="7f63b-252">We recommend leaving it disabled when you are not actively debugging.</span></span>
* <span data-ttu-id="7f63b-253">Você pode anexar manualmente o depurador a qualquer processo, não apenas ao processo do aplicativo Web (w3wp.exe).</span><span class="sxs-lookup"><span data-stu-id="7f63b-253">You can manually attach the debugger to any process, not only the web app process (w3wp.exe).</span></span> <span data-ttu-id="7f63b-254">Para obter mais informações sobre como usar o modo de depuração no Visual Studio, consulte [Depurando no Visual Studio](http://msdn.microsoft.com/library/vstudio/sc65sadd.aspx).</span><span class="sxs-lookup"><span data-stu-id="7f63b-254">For more information about how to use debug mode in Visual Studio, see [Debugging in Visual Studio](http://msdn.microsoft.com/library/vstudio/sc65sadd.aspx).</span></span>

## <span data-ttu-id="7f63b-255"><a name="logsoverview"></a>Visão geral dos logs de diagnóstico</span><span class="sxs-lookup"><span data-stu-id="7f63b-255"><a name="logsoverview"></a>Diagnostic logs overview</span></span>
<span data-ttu-id="7f63b-256">Um aplicativo em ASP.NET executado em um aplicativo Web do Azure pode criar os seguintes tipos de logs:</span><span class="sxs-lookup"><span data-stu-id="7f63b-256">An ASP.NET application that runs in an Azure web app can create the following kinds of logs:</span></span>

* <span data-ttu-id="7f63b-257">**Logs de rastreamento de aplicativos**</span><span class="sxs-lookup"><span data-stu-id="7f63b-257">**Application tracing logs**</span></span><br/>
  <span data-ttu-id="7f63b-258">O aplicativo cria esses logs chamando métodos da classe [System.Diagnostics.Trace](http://msdn.microsoft.com/library/system.diagnostics.trace.aspx) .</span><span class="sxs-lookup"><span data-stu-id="7f63b-258">The application creates these logs by calling methods of the [System.Diagnostics.Trace](http://msdn.microsoft.com/library/system.diagnostics.trace.aspx) class.</span></span>
* <span data-ttu-id="7f63b-259">**Logs do servidor Web**</span><span class="sxs-lookup"><span data-stu-id="7f63b-259">**Web server logs**</span></span><br/>
  <span data-ttu-id="7f63b-260">O servidor Web cria uma entrada no log para cada solicitação HTTP ao aplicativo Web.</span><span class="sxs-lookup"><span data-stu-id="7f63b-260">The web server creates a log entry for every HTTP request to the web app.</span></span>
* <span data-ttu-id="7f63b-261">**Logs de mensagens de erro detalhadas**</span><span class="sxs-lookup"><span data-stu-id="7f63b-261">**Detailed error message logs**</span></span><br/>
  <span data-ttu-id="7f63b-262">O servidor Web cria uma página HTML com algumas informações adicionais para solicitações HTTP com falha (aquelas que resultam em um código de status 400 ou superior).</span><span class="sxs-lookup"><span data-stu-id="7f63b-262">The web server creates an HTML page with some additional information for failed HTTP requests (those that result in status code 400 or greater).</span></span>
* <span data-ttu-id="7f63b-263">**Logs de rastreamento de solicitações com falha**</span><span class="sxs-lookup"><span data-stu-id="7f63b-263">**Failed request tracing logs**</span></span><br/>
  <span data-ttu-id="7f63b-264">O servidor Web cria um arquivo XML com informações de rastreamento detalhadas para solicitações HTTP com falha.</span><span class="sxs-lookup"><span data-stu-id="7f63b-264">The web server creates an XML file with detailed tracing information for failed HTTP requests.</span></span> <span data-ttu-id="7f63b-265">O servidor Web também fornece um arquivo XSL para formatar o XML em um navegador.</span><span class="sxs-lookup"><span data-stu-id="7f63b-265">The web server also provides an XSL file to format the XML in a browser.</span></span>

<span data-ttu-id="7f63b-266">Como o registro em log afeta o desempenho do aplicativo Web, o Azure oferece a possibilidade de habilitar ou desabilitar cada tipo de log conforme necessário.</span><span class="sxs-lookup"><span data-stu-id="7f63b-266">Logging affects web app performance, so Azure gives you the ability to enable or disable each type of log as needed.</span></span> <span data-ttu-id="7f63b-267">Para logs de aplicativo, você pode especificar que apenas os logs acima de um determinado nível de gravidade devem ser gravados.</span><span class="sxs-lookup"><span data-stu-id="7f63b-267">For application logs, you can specify that only logs above a certain severity level should be written.</span></span> <span data-ttu-id="7f63b-268">Por padrão, quando você cria um novo aplicativo Web, todo o registro em log está desabilitado.</span><span class="sxs-lookup"><span data-stu-id="7f63b-268">When you create a new web app, by default all logging is disabled.</span></span>

<span data-ttu-id="7f63b-269">Os logs são gravados em arquivos em uma pasta *LogFiles* no sistema de arquivos de seu aplicativo Web e são acessíveis via FTP.</span><span class="sxs-lookup"><span data-stu-id="7f63b-269">Logs are written to files in a *LogFiles* folder in the file system of your web app and are accessible via FTP.</span></span> <span data-ttu-id="7f63b-270">Os logs de servidor Web e de aplicativo também podem ser gravados em uma conta de armazenamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="7f63b-270">Web server logs and application logs can also be written to an Azure Storage account.</span></span> <span data-ttu-id="7f63b-271">Você pode manter um volume maior de logs em uma conta de armazenamento do que o que é possível no sistema de arquivos.</span><span class="sxs-lookup"><span data-stu-id="7f63b-271">You can retain a greater volume of logs in a storage account than is possible in the file system.</span></span> <span data-ttu-id="7f63b-272">Você está limitado a um máximo de 100 megabytes de logs ao usar o sistema de arquivos.</span><span class="sxs-lookup"><span data-stu-id="7f63b-272">You're limited to a maximum of 100 megabytes of logs when you use the file system.</span></span> <span data-ttu-id="7f63b-273">(Os logs do sistema de arquivos são apenas para retenção de curto prazo.</span><span class="sxs-lookup"><span data-stu-id="7f63b-273">(File system logs are only for short-term retention.</span></span> <span data-ttu-id="7f63b-274">O Azure exclui arquivos de log antigos para abrir espaço para novos quando o limite é atingido.)</span><span class="sxs-lookup"><span data-stu-id="7f63b-274">Azure deletes old log files to make room for new ones after the limit is reached.)</span></span>  

## <span data-ttu-id="7f63b-275"><a name="apptracelogs"></a>Criar e exibir logs de rastreamento de aplicativos</span><span class="sxs-lookup"><span data-stu-id="7f63b-275"><a name="apptracelogs"></a>Create and view application trace logs</span></span>
<span data-ttu-id="7f63b-276">Nesta seção, você executará as seguintes tarefas:</span><span class="sxs-lookup"><span data-stu-id="7f63b-276">In this section you'll do the following tasks:</span></span>

* <span data-ttu-id="7f63b-277">Adicionar instruções de rastreamento ao projeto Web que você criou em [Introdução ao Azure e ASP.NET][GetStarted].</span><span class="sxs-lookup"><span data-stu-id="7f63b-277">Add tracing statements to the web project that you created in [Get started with Azure and ASP.NET][GetStarted].</span></span>
* <span data-ttu-id="7f63b-278">Exiba os logs ao executar o projeto localmente.</span><span class="sxs-lookup"><span data-stu-id="7f63b-278">View the logs when you run the project locally.</span></span>
* <span data-ttu-id="7f63b-279">Exiba os logs conforme eles são gerados pelo aplicativo em execução no Azure.</span><span class="sxs-lookup"><span data-stu-id="7f63b-279">View the logs as they are generated by the application running in Azure.</span></span>

<span data-ttu-id="7f63b-280">Para saber mais sobre como criar logs de aplicativo em Trabalhos Web, confira [Como trabalhar com o armazenamento de fila do Azure utilizando o SDK de Trabalhos Web: como gravar logs](websites-dotnet-webjobs-sdk-storage-queues-how-to.md#logs).</span><span class="sxs-lookup"><span data-stu-id="7f63b-280">For information about how to create application logs in WebJobs, see [How to work with Azure queue storage using the WebJobs SDK - How to write logs](websites-dotnet-webjobs-sdk-storage-queues-how-to.md#logs).</span></span> <span data-ttu-id="7f63b-281">As instruções a seguir para exibir logs e controlar como eles são armazenados no Azure também se aplicam a logs de aplicativos criados por Trabalhos Web.</span><span class="sxs-lookup"><span data-stu-id="7f63b-281">The following instructions for viewing logs and controlling how they're stored in Azure apply also to application logs created by WebJobs.</span></span>

### <a name="add-tracing-statements-to-the-application"></a><span data-ttu-id="7f63b-282">Adicionar instruções de rastreamento ao aplicativo</span><span class="sxs-lookup"><span data-stu-id="7f63b-282">Add tracing statements to the application</span></span>
1. <span data-ttu-id="7f63b-283">Abra *Controllers\HomeController.cs* e substitua os métodos `Index`, `About` e `Contact` pelo seguinte código para adicionar instruções `Trace` e uma instrução `using` para `System.Diagnostics`:</span><span class="sxs-lookup"><span data-stu-id="7f63b-283">Open *Controllers\HomeController.cs*, and replace the `Index`, `About`, and `Contact` methods with the following code in order to add `Trace` statements and a `using` statement for `System.Diagnostics`:</span></span>

        public ActionResult Index()
        {
            Trace.WriteLine("Entering Index method");
            ViewBag.Message = "Modify this template to jump-start your ASP.NET MVC application.";
            Trace.TraceInformation("Displaying the Index page at " + DateTime.Now.ToLongTimeString());
            Trace.WriteLine("Leaving Index method");
            return View();
        }

        public ActionResult About()
        {
            Trace.WriteLine("Entering About method");
            ViewBag.Message = "Your app description page.";
            Trace.TraceWarning("Transient error on the About page at " + DateTime.Now.ToShortTimeString());
            Trace.WriteLine("Leaving About method");
            return View();
        }

        public ActionResult Contact()
        {
            Trace.WriteLine("Entering Contact method");
            ViewBag.Message = "Your contact page.";
            Trace.TraceError("Fatal error on the Contact page at " + DateTime.Now.ToLongTimeString());
            Trace.WriteLine("Leaving Contact method");
            return View();
        }        
2. <span data-ttu-id="7f63b-284">Adicione uma instrução `using System.Diagnostics;` ao todo do arquivo.</span><span class="sxs-lookup"><span data-stu-id="7f63b-284">Add a `using System.Diagnostics;` statement to the top of the file.</span></span>

### <a name="view-the-tracing-output-locally"></a><span data-ttu-id="7f63b-285">Exibir a saída do rastreamento localmente</span><span class="sxs-lookup"><span data-stu-id="7f63b-285">View the tracing output locally</span></span>
1. <span data-ttu-id="7f63b-286">Pressione F5 para executar o aplicativo em modo de depuração.</span><span class="sxs-lookup"><span data-stu-id="7f63b-286">Press F5 to run the application in debug mode.</span></span>

    <span data-ttu-id="7f63b-287">O ouvinte de rastreamento padrão grava toda a saída de rastreamento na janela **Saída** , junto com as outras saídas de Depuração.</span><span class="sxs-lookup"><span data-stu-id="7f63b-287">The default trace listener writes all trace output to the **Output** window, along with other Debug output.</span></span> <span data-ttu-id="7f63b-288">A ilustração a seguir mostra a saída das instruções de rastreamento que você adicionou ao método `Index` .</span><span class="sxs-lookup"><span data-stu-id="7f63b-288">The following illustration shows the output from the trace statements that you added to the `Index` method.</span></span>

    ![Rastreamento na janela Depuração](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-debugtracing.png)

    <span data-ttu-id="7f63b-290">As etapas a seguir mostram como exibir a saída do rastreamento em uma página da web, sem compilação em modo de depuração.</span><span class="sxs-lookup"><span data-stu-id="7f63b-290">The following steps show how to view trace output in a web page, without compiling in debug mode.</span></span>
2. <span data-ttu-id="7f63b-291">Abra o arquivo Web.config do aplicativo (localizado na pasta do projeto) e adicione um elemento `<system.diagnostics>` ao final do arquivo pouco antes do elemento de fechamento `</configuration>`:</span><span class="sxs-lookup"><span data-stu-id="7f63b-291">Open the application Web.config file (the one located in the project folder) and add a `<system.diagnostics>` element at the end of the file just before the closing `</configuration>` element:</span></span>

          <system.diagnostics>
            <trace>
              <listeners>
                <add name="WebPageTraceListener"
                    type="System.Web.WebPageTraceListener,
                    System.Web,
                    Version=4.0.0.0,
                    Culture=neutral,
                    PublicKeyToken=b03f5f7f11d50a3a" />
              </listeners>
            </trace>
          </system.diagnostics>

    <span data-ttu-id="7f63b-292">O `WebPageTraceListener` permite exibir a saída do rastreamento navegando até `/trace.axd`.</span><span class="sxs-lookup"><span data-stu-id="7f63b-292">The `WebPageTraceListener` lets you view trace output by browsing to `/trace.axd`.</span></span>
3. <span data-ttu-id="7f63b-293">Adicione um <a href="http://msdn.microsoft.com/library/vstudio/6915t83k(v=vs.100).aspx">elemento trace</a> em `<system.web>` no arquivo Web.config, como no seguinte exemplo:</span><span class="sxs-lookup"><span data-stu-id="7f63b-293">Add a <a href="http://msdn.microsoft.com/library/vstudio/6915t83k(v=vs.100).aspx">trace element</a> under `<system.web>` in the Web.config file, such as the following example:</span></span>

        <trace enabled="true" writeToDiagnosticsTrace="true" mostRecent="true" pageOutput="false" />
4. <span data-ttu-id="7f63b-294">Pressione CTRL+F5 para executar o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="7f63b-294">Press CTRL+F5 to run the application.</span></span>
5. <span data-ttu-id="7f63b-295">Na barra de endereços da janela do navegador, adicione *trace.axd* à URL e pressione Enter (a URL será semelhante a http://localhost:53370/trace.axd).</span><span class="sxs-lookup"><span data-stu-id="7f63b-295">In the address bar of the browser window, add *trace.axd* to the URL, and then press Enter (the URL will be similar to http://localhost:53370/trace.axd).</span></span>
6. <span data-ttu-id="7f63b-296">Na página de **Rastreamento do aplicativo**, clique em **Exibir detalhes** na primeira linha (não a linha BrowserLink).</span><span class="sxs-lookup"><span data-stu-id="7f63b-296">On the **Application Trace** page, click **View Details** on the first line (not the BrowserLink line).</span></span>

    ![trace.axd](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-traceaxd1.png)

    <span data-ttu-id="7f63b-298">A página **Solicitar Detalhes** é exibida e, na seção **Informações de Rastreamento**, você vê a saída das instruções de rastreamento que adicionou ao método `Index`.</span><span class="sxs-lookup"><span data-stu-id="7f63b-298">The **Request Details** page appears, and in the **Trace Information** section you see the output from the trace statements that you added to the `Index` method.</span></span>

    ![trace.axd](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-traceaxd2.png)

    <span data-ttu-id="7f63b-300">Por padrão, `trace.axd` só está disponível localmente.</span><span class="sxs-lookup"><span data-stu-id="7f63b-300">By default, `trace.axd` is only available locally.</span></span> <span data-ttu-id="7f63b-301">Se quisesse disponibilizá-lo em um aplicativo Web remoto, você poderia adicionar `localOnly="false"` ao elemento `trace` no arquivo *Web.config*, conforme mostrado no seguinte exemplo:</span><span class="sxs-lookup"><span data-stu-id="7f63b-301">If you wanted to make it available from a remote web app, you could add `localOnly="false"` to the `trace` element in the *Web.config* file, as shown in the following example:</span></span>

        <trace enabled="true" writeToDiagnosticsTrace="true" localOnly="false" mostRecent="true" pageOutput="false" />

    <span data-ttu-id="7f63b-302">No entanto, a habilitação de `trace.axd` em um aplicativo Web de produção não costuma ser recomendada por motivos de segurança e, nas seções a seguir, você verá uma maneira mais fácil de ler logs de rastreamento em um aplicativo Web do Azure.</span><span class="sxs-lookup"><span data-stu-id="7f63b-302">However, enabling `trace.axd` in a production web app is generally not recommended for security reasons, and in the following sections you'll see an easier way to read tracing logs in an Azure web app.</span></span>

### <a name="view-the-tracing-output-in-azure"></a><span data-ttu-id="7f63b-303">Exibir a saída de rastreamento no Azure</span><span class="sxs-lookup"><span data-stu-id="7f63b-303">View the tracing output in Azure</span></span>
1. <span data-ttu-id="7f63b-304">No **Gerenciador de Soluções**, clique com o botão direito do mouse no projeto Web e clique em **Publicar**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-304">In **Solution Explorer**, right-click the web project and click **Publish**.</span></span>
2. <span data-ttu-id="7f63b-305">Na caixa de diálogo **Publicar na Web**, clique em **Publicar**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-305">In the **Publish Web** dialog box, click **Publish**.</span></span>

    <span data-ttu-id="7f63b-306">Depois de publicar sua atualização, o Visual Studio abre uma janela do navegador em sua home page (supondo que você não limpou a **URL de destino** na guia **Conexão**).</span><span class="sxs-lookup"><span data-stu-id="7f63b-306">After Visual Studio publishes your update, it opens a browser window to your home page (assuming you didn't clear **Destination URL** on the **Connection** tab).</span></span>
3. <span data-ttu-id="7f63b-307">No **Gerenciador de Servidores**, clique com o botão direito do mouse no aplicativo Web e selecione **Exibir Logs de Streaming**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-307">In **Server Explorer**, right-click your web app and select **View Streaming Logs**.</span></span>

    ![Exibir Logs de Streaming no menu de contexto](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-viewlogsmenu.png)

    <span data-ttu-id="7f63b-309">A janela **Saída** mostra que você está conectado ao serviço de streaming de log e adiciona uma linha de notificação a cada minuto que passa sem um log para exibir.</span><span class="sxs-lookup"><span data-stu-id="7f63b-309">The **Output** window shows that you are connected to the log-streaming service, and adds a notification line each minute that goes by without a log to display.</span></span>

    ![Exibir Logs de Streaming no menu de contexto](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-nologsyet.png)
4. <span data-ttu-id="7f63b-311">Na janela do navegador que mostra a home page do aplicativo, clique em **Contato**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-311">In the browser window that shows your application home page, click **Contact**.</span></span>

    <span data-ttu-id="7f63b-312">Em alguns segundos, a saída do rastreamento em nível de erro adicionado ao método `Contact` é exibida na janela **Saída** .</span><span class="sxs-lookup"><span data-stu-id="7f63b-312">Within a few seconds the output from the error-level trace you added to the `Contact` method appears in the **Output** window.</span></span>

    ![Rastreamento de erro na janela Saída](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-errortrace.png)

    <span data-ttu-id="7f63b-314">O Visual Studio está mostrando apenas rastreamentos em nível de erro porque essa é a configuração padrão quando você habilita o serviço de monitoramento de log.</span><span class="sxs-lookup"><span data-stu-id="7f63b-314">Visual Studio is only showing error-level traces because that is the default setting when you enable the log monitoring service.</span></span> <span data-ttu-id="7f63b-315">Quando você cria um novo aplicativo Web do Azure, todo registro em log é desabilitado por padrão, como você viu quando abriu a página de configurações do aplicativo Web anteriormente:</span><span class="sxs-lookup"><span data-stu-id="7f63b-315">When you create a new Azure web app, all logging is disabled by default, as you saw when you opened the settings page earlier:</span></span>

    ![Log do aplicativo desativado](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-apploggingoff.png)

    <span data-ttu-id="7f63b-317">No entanto, ao selecionar **Exibir logs de streaming**, o Visual Studio alterou automaticamente **Registro em Log de aplicativo (sistema de arquivos)** para **Erro**, o que significa que os logs em nível de erro são relatados.</span><span class="sxs-lookup"><span data-stu-id="7f63b-317">However, when you selected **View Streaming Logs**, Visual Studio automatically changed **Application Logging(File System)** to **Error**, which means error-level logs get reported.</span></span> <span data-ttu-id="7f63b-318">Para ver todos os logs de rastreamento, você pode alterar essa configuração para **Detalhado**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-318">In order to see all of your tracing logs, you can change this setting to **Verbose**.</span></span> <span data-ttu-id="7f63b-319">Quando você seleciona um nível de severidade inferior a erro, todos os logs para níveis de severidade mais altos são relatados.</span><span class="sxs-lookup"><span data-stu-id="7f63b-319">When you select a severity level lower than error, all logs for higher severity levels are also reported.</span></span> <span data-ttu-id="7f63b-320">Portanto, quando selecionar detalhado, você também verá logs de informações, avisos e erros.</span><span class="sxs-lookup"><span data-stu-id="7f63b-320">So when you select verbose, you also see information, warning, and error logs.</span></span>  

1. <span data-ttu-id="7f63b-321">No **Gerenciador de Servidores**, clique com o botão direito do mouse no aplicativo Web e clique em **Exibir Configurações** como fez anteriormente.</span><span class="sxs-lookup"><span data-stu-id="7f63b-321">In **Server Explorer**, right-click the web app, and then click **View Settings** as you did earlier.</span></span>
2. <span data-ttu-id="7f63b-322">Altere **Registro em Log de Aplicativo (Sistema de Arquivos)** para **Detalhado** e, em seguida, clique em **Salvar**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-322">Change **Application Logging (File System)** to **Verbose**, and then click **Save**.</span></span>

    ![Configurando o rastreamento como Detalhado](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-applogverbose.png)
3. <span data-ttu-id="7f63b-324">Na janela do navegador que está mostrando sua página **Contato**, clique em **Página Inicial**, em seguida, clique em **Sobre** e, em seguida, em **Contato**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-324">In the browser window that is now showing your **Contact** page, click **Home**, then click **About**, and then click **Contact**.</span></span>

    <span data-ttu-id="7f63b-325">Em poucos segundos, a janela **Saída** janela mostra toda a saída de rastreamento.</span><span class="sxs-lookup"><span data-stu-id="7f63b-325">Within a few seconds, the **Output** window shows all of your tracing output.</span></span>

    ![Saída de rastreamento detalhado](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-verbosetraces.png)

    <span data-ttu-id="7f63b-327">Nesta seção você habilitou e desabilitou o registro em log usando as configurações de aplicativo Web do Azure.</span><span class="sxs-lookup"><span data-stu-id="7f63b-327">In this section you enabled and disabled logging by using Azure web app settings.</span></span> <span data-ttu-id="7f63b-328">Você também pode habilitar e desabilitar os ouvintes de rastreamento modificando o arquivo Web.config.</span><span class="sxs-lookup"><span data-stu-id="7f63b-328">You can also enable and disable trace listeners by modifying the Web.config file.</span></span> <span data-ttu-id="7f63b-329">No entanto, a modificação do arquivo Web.config faz com que o domínio do aplicativo seja reciclado, enquanto a habilitação do registro em log por meio da configuração do aplicativo Web não faz isso.</span><span class="sxs-lookup"><span data-stu-id="7f63b-329">However, modifying the Web.config file causes the app domain to recycle, while enabling logging via the web app configuration doesn't do that.</span></span> <span data-ttu-id="7f63b-330">Se o problema levar muito tempo para ser reproduzido, ou for intermitente, a reciclagem do domínio de aplicativo pode "corrigir" isso e forçar você a esperar até que o problema ocorra novamente.</span><span class="sxs-lookup"><span data-stu-id="7f63b-330">If the problem takes a long time to reproduce, or is intermittent, recycling the app domain might "fix" it and force you to wait until it happens again.</span></span> <span data-ttu-id="7f63b-331">Como a habilitação do diagnóstico no Azure não faz isso, você não pode começar a capturar informações de erro imediatamente.</span><span class="sxs-lookup"><span data-stu-id="7f63b-331">Enabling diagnostics in Azure doesn't do this, so you can start capturing error information immediately.</span></span>

### <a name="output-window-features"></a><span data-ttu-id="7f63b-332">Recursos da janela Saída</span><span class="sxs-lookup"><span data-stu-id="7f63b-332">Output window features</span></span>
<span data-ttu-id="7f63b-333">A guia **Logs do Azure** da janela **Saída** tem vários botões e uma caixa de texto:</span><span class="sxs-lookup"><span data-stu-id="7f63b-333">The **Azure Logs** tab of the **Output** Window has several buttons and a text box:</span></span>

![Botões da guia Logs](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-icons.png)

<span data-ttu-id="7f63b-335">Desempenham as seguintes funções:</span><span class="sxs-lookup"><span data-stu-id="7f63b-335">These perform the following functions:</span></span>

* <span data-ttu-id="7f63b-336">Limpe a janela **Saída** .</span><span class="sxs-lookup"><span data-stu-id="7f63b-336">Clear the **Output** window.</span></span>
* <span data-ttu-id="7f63b-337">Habilite ou desabilite a quebra automática de linha.</span><span class="sxs-lookup"><span data-stu-id="7f63b-337">Enable or disable word wrap.</span></span>
* <span data-ttu-id="7f63b-338">Inicie ou pare logs de monitoramento.</span><span class="sxs-lookup"><span data-stu-id="7f63b-338">Start or stop monitoring logs.</span></span>
* <span data-ttu-id="7f63b-339">Especifique quais logs monitorar.</span><span class="sxs-lookup"><span data-stu-id="7f63b-339">Specify which logs to monitor.</span></span>
* <span data-ttu-id="7f63b-340">Baixe logs.</span><span class="sxs-lookup"><span data-stu-id="7f63b-340">Download logs.</span></span>
* <span data-ttu-id="7f63b-341">Filtre logs com base em uma cadeia de caracteres de pesquisa ou uma expressão regular.</span><span class="sxs-lookup"><span data-stu-id="7f63b-341">Filter logs based on a search string or a regular expression.</span></span>
* <span data-ttu-id="7f63b-342">Feche a janela **Saída** .</span><span class="sxs-lookup"><span data-stu-id="7f63b-342">Close the **Output** window.</span></span>

<span data-ttu-id="7f63b-343">Se você inserir uma cadeia de caracteres de pesquisa ou uma expressão regular, o Visual Studio filtrará as informações de log no cliente.</span><span class="sxs-lookup"><span data-stu-id="7f63b-343">If you enter a search string or regular expression, Visual Studio filters logging information at the client.</span></span> <span data-ttu-id="7f63b-344">Isso significa que você pode inserir os critérios depois que os logs são exibidos na janela **Saída** e pode alterar os critérios de filtragem sem precisar gerar os logs novamente.</span><span class="sxs-lookup"><span data-stu-id="7f63b-344">That means you can enter the criteria after the logs are displayed in the **Output** window and you can change filtering criteria without having to regenerate the logs.</span></span>

## <span data-ttu-id="7f63b-345"><a name="webserverlogs"></a>Exibir logs de servidor Web</span><span class="sxs-lookup"><span data-stu-id="7f63b-345"><a name="webserverlogs"></a>View web server logs</span></span>
<span data-ttu-id="7f63b-346">Logs do servidor Web registram toda a atividade HTTP para o aplicativo Web.</span><span class="sxs-lookup"><span data-stu-id="7f63b-346">Web server logs record all HTTP activity for the web app.</span></span> <span data-ttu-id="7f63b-347">Para vê-los na janela **Saída** , você precisa habilitá-los no aplicativo Web e informar ao Visual Studio que deseja monitorá-los.</span><span class="sxs-lookup"><span data-stu-id="7f63b-347">In order to see them in the **Output** window you have to enable them for the web app and tell Visual Studio that you want to monitor them.</span></span>

1. <span data-ttu-id="7f63b-348">Na guia **Configuração de Aplicativo Web do Azure** que você abriu no **Gerenciador de Servidores**, altere o Registro em Log de Servidor Web para **Ativado** e, em seguida, clique em **Salvar**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-348">In the **Azure Web App Configuration** tab that you opened from **Server Explorer**, change Web Server Logging to **On**, and then click **Save**.</span></span>

    ![Habilitar o log de servidor web](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-webserverloggingon.png)
2. <span data-ttu-id="7f63b-350">Na janela **Saída**, clique no botão **Especificar quais logs do Azure monitorar**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-350">In the **Output** Window, click the **Specify which Azure logs to monitor** button.</span></span>

    ![Especificar quais logs do Azure monitorar](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-specifylogs.png)
3. <span data-ttu-id="7f63b-352">Na caixa de diálogo **Opções de Registro em Log do Azure**, selecione **Logs do servidor Web** e clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-352">In the **Azure Logging Options** dialog box, select **Web server logs**, and then click **OK**.</span></span>

    ![Monitorar logs de servidor Web](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-monitorwslogson.png)
4. <span data-ttu-id="7f63b-354">Na janela do navegador que mostra o aplicativo Web, clique em **Página Inicial**, clique em **Sobre** e, em seguida, clique em **Contato**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-354">In the browser window that shows the web app, click **Home**, then click **About**, and then click **Contact**.</span></span>

    <span data-ttu-id="7f63b-355">Os logs de aplicativo geralmente aparecem primeiro, seguidos dos logs de servidor web.</span><span class="sxs-lookup"><span data-stu-id="7f63b-355">The application logs generally appear first, followed by the web server logs.</span></span> <span data-ttu-id="7f63b-356">Talvez seja necessário esperar algum tempo para que os logs sejam exibidos.</span><span class="sxs-lookup"><span data-stu-id="7f63b-356">You might have to wait a while for the logs to appear.</span></span>

    ![Logs de servidor Web na janela Saída](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-wslogs.png)

<span data-ttu-id="7f63b-358">Por padrão, quando você habilita os logs do servidor Web pela primeira vez usando o Visual Studio, o Azure grava os logs no sistema de arquivos.</span><span class="sxs-lookup"><span data-stu-id="7f63b-358">By default, when you first enable web server logs by using Visual Studio, Azure writes the logs to the file system.</span></span> <span data-ttu-id="7f63b-359">Como alternativa, você pode usar o portal do Azure para especificar que os logs de servidor Web devem ser gravados em um contêiner de blob em uma conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="7f63b-359">As an alternative, you can use the Azure portal to specify that web server logs should be written to a blob container in a storage account.</span></span>

<span data-ttu-id="7f63b-360">Se você usar o portal para habilitar o registro em log do servidor Web para uma conta de armazenamento do Azure e desabilitar o registro em log no Visual Studio, quando reabilitar o registro em log no Visual Studio, as configurações da conta de armazenamento serão restauradas.</span><span class="sxs-lookup"><span data-stu-id="7f63b-360">If you use the portal to enable web server logging to an Azure storage account, and then disable logging in Visual Studio, when you re-enable logging in Visual Studio your storage account settings are restored.</span></span>

## <span data-ttu-id="7f63b-361"><a name="detailederrorlogs"></a>Exibir logs de mensagens de erro detalhadas</span><span class="sxs-lookup"><span data-stu-id="7f63b-361"><a name="detailederrorlogs"></a>View detailed error message logs</span></span>
<span data-ttu-id="7f63b-362">Os logs detalhados de erro fornecem algumas informações adicionais sobre solicitações HTTP que resultam em códigos de resposta de erro (400 ou acima).</span><span class="sxs-lookup"><span data-stu-id="7f63b-362">Detailed error logs provide some additional information about HTTP requests that result in error response codes (400 or above).</span></span> <span data-ttu-id="7f63b-363">Para vê-los na janela **Saída** , você precisa habilitá-los no aplicativo Web e informar ao Visual Studio que deseja monitorá-los.</span><span class="sxs-lookup"><span data-stu-id="7f63b-363">In order to see them in the **Output** window, you have to enable them for the web app and tell Visual Studio that you want to monitor them.</span></span>

1. <span data-ttu-id="7f63b-364">Na guia **Configuração de Aplicativo Web do Azure** que você abriu no **Gerenciador de Servidores**, altere **Mensagens de Erro Detalhadas** para **Ativado** e clique em **Salvar**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-364">In the **Azure Web App Configuration** tab that you opened from **Server Explorer**, change **Detailed Error Messages** to **On**, and then click **Save**.</span></span>

    ![Habilitar mensagens de erro detalhadas](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-detailedlogson.png)
2. <span data-ttu-id="7f63b-366">Na janela **Saída**, clique no botão **Especificar quais logs do Azure monitorar**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-366">In the **Output** Window, click the **Specify which Azure logs to monitor** button.</span></span>
3. <span data-ttu-id="7f63b-367">Na caixa de diálogo **Opções de Registro em Log do Azure**, clique em **Todos os logs** e em **OK**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-367">In the **Azure Logging Options** dialog box, click **All logs**, and then click **OK**.</span></span>

    ![Monitorar todos os logs](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-monitorall.png)
4. <span data-ttu-id="7f63b-369">Na barra de endereços da janela do navegador, adicione um caractere extra à URL para provocar um erro 404 (por exemplo, `http://localhost:53370/Home/Contactx`) e pressione Enter.</span><span class="sxs-lookup"><span data-stu-id="7f63b-369">In the address bar of the browser window, add an extra character to the URL to cause a 404 error (for example, `http://localhost:53370/Home/Contactx`), and press Enter.</span></span>

    <span data-ttu-id="7f63b-370">Após vários segundos o log detalhado de erros é exibido na janela **Saída** do Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="7f63b-370">After several seconds the detailed error log appears in the Visual Studio **Output** window.</span></span>

    ![Log detalhado de erros na janela Saída](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-detailederrorlog.png)

    <span data-ttu-id="7f63b-372">Clique no link mantendo a tecla Control pressionada para ver a saída do log formatada em um navegador:</span><span class="sxs-lookup"><span data-stu-id="7f63b-372">Control+click the link to see the log output formatted in a browser:</span></span>

    ![Log detalhado de erros na janela do navegador](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-detailederrorloginbrowser.png)

## <span data-ttu-id="7f63b-374"><a name="downloadlogs"></a>Baixar logs do sistema de arquivos</span><span class="sxs-lookup"><span data-stu-id="7f63b-374"><a name="downloadlogs"></a>Download file system logs</span></span>
<span data-ttu-id="7f63b-375">Todos os logs que podem ser monitorados na janela **Saída** também podem ser baixados como um arquivo *. zip* .</span><span class="sxs-lookup"><span data-stu-id="7f63b-375">Any logs that you can monitor in the **Output** window can also be downloaded as a *.zip* file.</span></span>

1. <span data-ttu-id="7f63b-376">Na janela **Saída**, clique em **Baixar Logs de Streaming**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-376">In the **Output** window, click **Download Streaming Logs**.</span></span>

    ![Botões da guia Logs](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-downloadicon.png)

    <span data-ttu-id="7f63b-378">O Explorador de Arquivos abre em sua pasta *Downloads* com o arquivo baixado selecionado.</span><span class="sxs-lookup"><span data-stu-id="7f63b-378">File Explorer opens to your *Downloads* folder with the downloaded file selected.</span></span>

    ![Arquivo baixado](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-downloadedfile.png)
2. <span data-ttu-id="7f63b-380">Extraia o arquivo *. zip* e você verá a seguinte estrutura de pastas:</span><span class="sxs-lookup"><span data-stu-id="7f63b-380">Extract the *.zip* file, and you see the following folder structure:</span></span>

    ![Arquivo baixado](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-logfilefolders.png)

   * <span data-ttu-id="7f63b-382">Os logs de rastreamento de aplicativos estão em arquivos *.txt* na pasta *LogFiles\Application*.</span><span class="sxs-lookup"><span data-stu-id="7f63b-382">Application tracing logs are in *.txt* files in the *LogFiles\Application* folder.</span></span>
   * <span data-ttu-id="7f63b-383">Os logs de servidor Web estão em arquivos *.log* na pasta *LogFiles\http\RawLogs*.</span><span class="sxs-lookup"><span data-stu-id="7f63b-383">Web server logs are in *.log* files in the *LogFiles\http\RawLogs* folder.</span></span> <span data-ttu-id="7f63b-384">Você pode usar uma ferramenta como o [Analisador de log (a página pode estar em inglês)](http://www.microsoft.com/download/details.aspx?displaylang=en&id=24659) para exibir e manipular esses arquivos.</span><span class="sxs-lookup"><span data-stu-id="7f63b-384">You can use a tool such as [Log Parser](http://www.microsoft.com/download/details.aspx?displaylang=en&id=24659) to view and manipulate these files.</span></span>
   * <span data-ttu-id="7f63b-385">Os logs de mensagens de erro detalhadas estão em arquivos *.html* na pasta *LogFiles\DetailedErrors*.</span><span class="sxs-lookup"><span data-stu-id="7f63b-385">Detailed error message logs are in *.html* files in the *LogFiles\DetailedErrors* folder.</span></span>

     <span data-ttu-id="7f63b-386">(A pasta *deployments* é para os arquivos criados pela publicação de controle do código-fonte; ela não tem nada relacionado à publicação do Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="7f63b-386">(The *deployments* folder is for files created by source control publishing; it doesn't have anything related to Visual Studio publishing.</span></span> <span data-ttu-id="7f63b-387">A pasta *Git* é para rastreamentos relacionados à publicação de código-fonte e o serviço de streaming de arquivos de log.)</span><span class="sxs-lookup"><span data-stu-id="7f63b-387">The *Git* folder is for traces related to source control publishing and the log file streaming service.)</span></span>  

## <span data-ttu-id="7f63b-388"><a name="storagelogs"></a>Exibir logs de armazenamento</span><span class="sxs-lookup"><span data-stu-id="7f63b-388"><a name="storagelogs"></a>View storage logs</span></span>
<span data-ttu-id="7f63b-389">Os logs de rastreamento de aplicativos também podem ser enviados para uma conta de armazenamento do Azure, e você pode exibi-los no Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="7f63b-389">Application tracing logs can also be sent to an Azure storage account, and you can view them in Visual Studio.</span></span> <span data-ttu-id="7f63b-390">Para fazer isso, você criará uma conta de armazenamento, habilitará os logs de armazenamento no portal clássico e os exibirá na guia **Logs** da janela **Aplicativo Web do Azure**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-390">To do that you'll create a storage account, enable storage logs in the classic portal, and view them in the **Logs** tab of the **Azure Web App** window.</span></span>

<span data-ttu-id="7f63b-391">Você pode enviar logs para qualquer um ou todos os três destinos:</span><span class="sxs-lookup"><span data-stu-id="7f63b-391">You can send logs to any or all of three destinations:</span></span>

* <span data-ttu-id="7f63b-392">O sistema de arquivos.</span><span class="sxs-lookup"><span data-stu-id="7f63b-392">The file system.</span></span>
* <span data-ttu-id="7f63b-393">Tabelas de conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="7f63b-393">Storage account tables.</span></span>
* <span data-ttu-id="7f63b-394">Blobs de conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="7f63b-394">Storage account blobs.</span></span>

<span data-ttu-id="7f63b-395">Você pode especificar um nível de gravidade diferente para cada destino.</span><span class="sxs-lookup"><span data-stu-id="7f63b-395">You can specify a different severity level for each destination.</span></span>

<span data-ttu-id="7f63b-396">Tabelas facilitam a exibição de detalhes de logs online e dão suporte ao streaming; você pode consultar logs em tabelas e ver novos logs à medida que são criados.</span><span class="sxs-lookup"><span data-stu-id="7f63b-396">Tables make it easy to view details of logs online, and they support streaming; you can query logs in tables and see new logs as they are being created.</span></span> <span data-ttu-id="7f63b-397">Blobs facilitam o download de logs em arquivos e a análise deles usando HDInsight, porque HDInsight sabe como trabalhar com o armazenamento de blob.</span><span class="sxs-lookup"><span data-stu-id="7f63b-397">Blobs make it easy to download logs in files and to analyze them using HDInsight, because HDInsight knows how to work with blob storage.</span></span> <span data-ttu-id="7f63b-398">Para obter mais informações, consulte **Hadoop e MapReduce** em [Opções de armazenamento de dados (Compilando aplicativos de nuvem do mundo real com o Azure)](http://www.asp.net/aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/data-storage-options).</span><span class="sxs-lookup"><span data-stu-id="7f63b-398">For more information, see **Hadoop and MapReduce** in [Data Storage Options (Building Real-World Cloud Apps with Azure)](http://www.asp.net/aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/data-storage-options).</span></span>

<span data-ttu-id="7f63b-399">Você tem logs de sistema de arquivos definidos como nível detalhado no momento; as etapas a seguir orientam você em meio à configuração dos logs de nível de informações para ir até tabelas de conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="7f63b-399">You currently have file system logs set to verbose level; the following steps walk you through setting up information level logs to go to storage account tables.</span></span> <span data-ttu-id="7f63b-400">O nível de informações significa que todos os logs criados chamando `Trace.TraceInformation`, `Trace.TraceWarning` e `Trace.TraceError` serão exibidos, mas não os logs criados chamando `Trace.WriteLine`.</span><span class="sxs-lookup"><span data-stu-id="7f63b-400">Information level means all logs created by calling `Trace.TraceInformation`, `Trace.TraceWarning`, and `Trace.TraceError` will be displayed, but not logs created by calling `Trace.WriteLine`.</span></span>

<span data-ttu-id="7f63b-401">As contas de armazenamento oferecem mais armazenamento e retenção por mais tempo para logs em comparação com o sistema de arquivos.</span><span class="sxs-lookup"><span data-stu-id="7f63b-401">Storage accounts offer more storage and longer-lasting retention for logs compared to the file system.</span></span> <span data-ttu-id="7f63b-402">Outra vantagem do envio dos logs de rastreamento de aplicativos para o armazenamento é que você obtém informações adicionais com cada log que não obtém dos logs do sistema de arquivos.</span><span class="sxs-lookup"><span data-stu-id="7f63b-402">Another advantage of sending application tracing logs to storage is that you get some additional information with each log that you don't get from file system logs.</span></span>

1. <span data-ttu-id="7f63b-403">Clique com botão direito do mouse em **Armazenamento** sob o nó do Azure e, em seguida, clique em **Criar conta de armazenamento**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-403">Right-click **Storage** under the Azure node, and then click **Create Storage Account**.</span></span>

![Criar conta de armazenamento](./media/web-sites-dotnet-troubleshoot-visual-studio/createstor.png)

1. <span data-ttu-id="7f63b-405">Na caixa de diálogo **Criar conta de armazenamento** , digite um nome para a conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="7f63b-405">In the **Create Storage Account** dialog, enter a name for the storage account.</span></span>

    <span data-ttu-id="7f63b-406">O nome deve ser exclusivo (nenhuma outra conta de armazenamento do Azure pode ter o mesmo nome).</span><span class="sxs-lookup"><span data-stu-id="7f63b-406">The name must be must be unique (no other Azure storage account can have the same name).</span></span> <span data-ttu-id="7f63b-407">Se o nome digitado já estiver sendo utilizado, você terá a oportunidade de alterá-lo.</span><span class="sxs-lookup"><span data-stu-id="7f63b-407">If the name you enter is already in use you'll get a chance to change it.</span></span>

    <span data-ttu-id="7f63b-408">A URL para acessar sua conta de armazenamento será *{nome}*.core.windows.net.</span><span class="sxs-lookup"><span data-stu-id="7f63b-408">The URL to access your storage account will be *{name}*.core.windows.net.</span></span>
2. <span data-ttu-id="7f63b-409">Defina a lista suspensa de **região ou grupo de afinidade** para a região mais próxima de você.</span><span class="sxs-lookup"><span data-stu-id="7f63b-409">Set the **Region or Affinity Group** drop-down list to the region closest to you.</span></span>

    <span data-ttu-id="7f63b-410">Essa configuração especifica qual datacenter do Azure hospedará a conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="7f63b-410">This setting specifies which Azure datacenter will host your storage account.</span></span> <span data-ttu-id="7f63b-411">Para este tutorial, a escolha não fará grande diferença, mas para um aplicativo Web em produção convém que o servidor Web e a conta de armazenamento estejam na mesma região para minimizar os encargos de dados egressos e com latência.</span><span class="sxs-lookup"><span data-stu-id="7f63b-411">For this tutorial your choice won't make a noticeable difference, but for a production web app you want your web server and your storage account to be in the same region to minimize latency and data egress charges.</span></span> <span data-ttu-id="7f63b-412">O aplicativo Web (que você criará posteriormente) deve ser executado em uma região tão próxima quanto possível dos navegadores acessando seu aplicativo Web para minimizar a latência.</span><span class="sxs-lookup"><span data-stu-id="7f63b-412">The web app (which you'll create later) should run in a region as close as possible to the browsers accessing your web app in order to minimize latency.</span></span>
3. <span data-ttu-id="7f63b-413">Defina a lista suspensa **Replicação** para **Localmente redundante**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-413">Set the **Replication** drop-down list to **Locally redundant**.</span></span>
   
    <span data-ttu-id="7f63b-414">Quando a replicação geográfica está habilitada para uma conta de armazenamento, o conteúdo armazenado é replicado para um datacenter secundário para habilitar o failover para essa localidade no caso de ocorrer um grande desastre no local principal.</span><span class="sxs-lookup"><span data-stu-id="7f63b-414">When geo-replication is enabled for a storage account, the stored content is replicated to a secondary datacenter to enable failover to that location in case of a major disaster in the primary location.</span></span> <span data-ttu-id="7f63b-415">A replicação geográfica pode incorrer em custos adicionais.</span><span class="sxs-lookup"><span data-stu-id="7f63b-415">Geo-replication can incur additional costs.</span></span> <span data-ttu-id="7f63b-416">Para contas de teste e desenvolvimento, geralmente, você não deseja pagar pela replicação geográfica.</span><span class="sxs-lookup"><span data-stu-id="7f63b-416">For test and development accounts, you generally don't want to pay for geo-replication.</span></span> <span data-ttu-id="7f63b-417">Para saber mais, confira [Criar, gerenciar ou excluir uma conta de armazenamento](../storage/common/storage-create-storage-account.md).</span><span class="sxs-lookup"><span data-stu-id="7f63b-417">For more information, see [Create, manage, or delete a storage account](../storage/common/storage-create-storage-account.md).</span></span>
4. <span data-ttu-id="7f63b-418">Clique em **Criar**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-418">Click **Create**.</span></span>

    ![Nova conta de armazenamento](./media/web-sites-dotnet-troubleshoot-visual-studio/newstorage.png)    
5. <span data-ttu-id="7f63b-420">Na janela **Aplicativo Web do Azure** do Visual Studio, clique na guia **Logs** e depois em **Configurar registro em log no Portal de Gerenciamento**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-420">In the Visual Studio **Azure Web App** window, click the **Logs** tab, and then click **Configure Logging in Management Portal**.</span></span>

    <!-- todo:screenshot of new portal if the VS page link goes to new portal -->
    ![Configurar o registro em log](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-configlogging.png)

    <span data-ttu-id="7f63b-422">Isso abre a guia **Configurar** no portal clássico para seu aplicativo Web.</span><span class="sxs-lookup"><span data-stu-id="7f63b-422">This opens the **Configure** tab in the classic portal for your web app.</span></span>
6. <span data-ttu-id="7f63b-423">Na guia **Configurar** do portal clássico, role até a seção de diagnóstico de aplicativos e altere o **Registro em Log do Aplicativo (Armazenamento de Tabelas)** para **Ativado**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-423">In the classic portal's **Configure** tab, scroll down to the application diagnostics section, and then change **Application Logging (Table Storage)** to **On**.</span></span>
7. <span data-ttu-id="7f63b-424">Altere o **Nível de Log** para **Informações**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-424">Change **Logging Level** to **Information**.</span></span>
8. <span data-ttu-id="7f63b-425">Clique em **Gerenciar Armazenamento da Tabela**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-425">Click **Manage Table Storage**.</span></span>

    ![Clicar em Gerenciar Armazenamento da Tabela](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-stgsettingsmgmtportal.png)

    <span data-ttu-id="7f63b-427">Na caixa de diálogo **Gerenciar armazenamento da tabela para diagnóstico do aplicativo** , você poderá escolher a conta de armazenamento, se tiver mais de uma.</span><span class="sxs-lookup"><span data-stu-id="7f63b-427">In the **Manage table storage for application diagnostics** box, you can choose your storage account if you have more than one.</span></span> <span data-ttu-id="7f63b-428">Você pode criar uma nova tabela ou usar uma existente.</span><span class="sxs-lookup"><span data-stu-id="7f63b-428">You can create a new table or use an existing one.</span></span>

    ![Gerenciar Armazenamento da Tabela](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-choosestorageacct.png)
9. <span data-ttu-id="7f63b-430">Na caixa **Gerenciar armazenamento da tabela para diagnóstico de aplicativo** , clique na marca de seleção para fechar a caixa.</span><span class="sxs-lookup"><span data-stu-id="7f63b-430">In the **Manage table storage for application diagnostics** box click the check mark to close the box.</span></span>
10. <span data-ttu-id="7f63b-431">No portal clássico, na guia **Configurar**, clique em **Salvar**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-431">In the classic portal's **Configure** tab, click **Save**.</span></span>
11. <span data-ttu-id="7f63b-432">Na janela do navegador que exibe o aplicativo Web do aplicativo, clique em **Página Inicial**, clique em **Sobre** e, em seguida, clique em **Contato**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-432">In the browser window that displays the application web app, click **Home**, then click **About**, and then click **Contact**.</span></span>

     <span data-ttu-id="7f63b-433">As informações de log produzidas pela navegação nessas páginas da Web serão gravadas na conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="7f63b-433">The logging information produced by browsing these web pages will be written to the storage account.</span></span>
12. <span data-ttu-id="7f63b-434">Na guia **Logs** da janela **Aplicativo Web do Azure** no Visual Studio, clique em **Atualizar** em **Resumo do Diagnóstico**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-434">In the **Logs** tab of the **Azure Web App** window in Visual Studio, click **Refresh** under **Diagnostic Summary**.</span></span>

     ![Clicar em Atualizar](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-refreshstorage.png)

     <span data-ttu-id="7f63b-436">Por padrão, a seção **Resumo do Diagnóstico** mostra logs dos últimos 15 minutos.</span><span class="sxs-lookup"><span data-stu-id="7f63b-436">The **Diagnostic Summary** section shows logs for the last 15 minutes by default.</span></span> <span data-ttu-id="7f63b-437">Você pode alterar o período para ver mais logs.</span><span class="sxs-lookup"><span data-stu-id="7f63b-437">You can change the period to see more logs.</span></span>

     <span data-ttu-id="7f63b-438">(Se você receber um erro "tabela não encontrada", verifique se navegou até as páginas que fazem o rastreamento depois de habilitar **Registro em Log do Aplicativo (Armazenamento)** e clicar em **Salvar**.)</span><span class="sxs-lookup"><span data-stu-id="7f63b-438">(If you get a "table not found" error, verify that you browsed to the pages that do the tracing after you enabled **Application Logging (Storage)** and after you clicked **Save**.)</span></span>

     ![Logs de armazenamento](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-storagelogs.png)

     <span data-ttu-id="7f63b-440">Observe que nessa exibição você vê a **ID do Processo** e a **ID do thread** de cada log, o que você não obtém nos logs do sistema de arquivos.</span><span class="sxs-lookup"><span data-stu-id="7f63b-440">Notice that in this view you see **Process ID** and **Thread ID** for each log, which you don't get in the file system logs.</span></span> <span data-ttu-id="7f63b-441">Você pode ver campos adicionais exibindo a tabela de armazenamento do Azure diretamente.</span><span class="sxs-lookup"><span data-stu-id="7f63b-441">You can see additional fields by viewing the Azure storage table directly.</span></span>
13. <span data-ttu-id="7f63b-442">Clique em **exibir todos os logs de aplicativo**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-442">Click **View all application logs**.</span></span>

     <span data-ttu-id="7f63b-443">A tabela do log de rastreamento é exibida no visualizador da tabela de armazenamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="7f63b-443">The trace log table appears in the Azure storage table viewer.</span></span>

     <span data-ttu-id="7f63b-444">(Se você receber um erro "a sequência não contém elementos", abra o **Gerenciador de Servidores**, expanda o nó da conta de armazenamento sob o nó **Azure**, clique com o botão direito do mouse em **Tabelas** e clique em **Atualizar**.)</span><span class="sxs-lookup"><span data-stu-id="7f63b-444">(If you get a "sequence contains no elements" error, open **Server Explorer**, expand the node for your storage account under the **Azure** node, and then right-click **Tables** and click **Refresh**.)</span></span>

     ![Logs de armazenamento na exibição de tabela](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-tracelogtableview.png)

     <span data-ttu-id="7f63b-446">Esta exibição mostra campos adicionais que você não vê em outros modos de exibição.</span><span class="sxs-lookup"><span data-stu-id="7f63b-446">This view shows additional fields you don't see in any other views.</span></span> <span data-ttu-id="7f63b-447">Esse modo de exibição permite filtrar logs usando a interface do usuário especial do Construtor de Consultas para construir uma consulta.</span><span class="sxs-lookup"><span data-stu-id="7f63b-447">This view also enables you to filter logs by using special Query Builder UI for constructing a query.</span></span> <span data-ttu-id="7f63b-448">Para obter mais informações, consulte Trabalhando com recursos de tabela - Filtrando entidades em [Procurando recursos de armazenamento com o Gerenciador de Servidores (a página pode estar em inglês)](http://msdn.microsoft.com/library/ff683677.aspx)</span><span class="sxs-lookup"><span data-stu-id="7f63b-448">For more information, see Working with Table Resources - Filtering Entities in [Browsing Storage Resources with Server Explorer](http://msdn.microsoft.com/library/ff683677.aspx).</span></span>
14. <span data-ttu-id="7f63b-449">Para visualizar os detalhes de uma única linha, clique duas vezes em uma das linhas.</span><span class="sxs-lookup"><span data-stu-id="7f63b-449">To look at the details for a single row, double-click one of the rows.</span></span>

     ![Tabela de rastreamento no Gerenciador de Servidores](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-tracetablerow.png)

## <span data-ttu-id="7f63b-451"><a name="failedrequestlogs"></a>Exibir logs de rastreamento de solicitações com falha</span><span class="sxs-lookup"><span data-stu-id="7f63b-451"><a name="failedrequestlogs"></a>View failed request tracing logs</span></span>
<span data-ttu-id="7f63b-452">Os logs de rastreamento de solicitação com falha são úteis quando você precisa entender os detalhes de como o IIS trata uma solicitação HTTP, em cenários como problemas de autenticação ou regravação de URL.</span><span class="sxs-lookup"><span data-stu-id="7f63b-452">Failed request tracing logs are useful when you need to understand the details of how IIS is handling an HTTP request, in scenarios such as URL rewriting or authentication problems.</span></span>

<span data-ttu-id="7f63b-453">Os aplicativos Web do Azure usam a mesma funcionalidade de rastreamento de solicitação com falha disponível no IIS 7.0 e em versões posteriores.</span><span class="sxs-lookup"><span data-stu-id="7f63b-453">Azure web apps use the same failed request tracing functionality that has been available with IIS 7.0 and later.</span></span> <span data-ttu-id="7f63b-454">No entanto, você não tem acesso às configurações do IIS que configuram quais erros são registrados em log.</span><span class="sxs-lookup"><span data-stu-id="7f63b-454">You don't have access to the IIS settings that configure which errors get logged, however.</span></span> <span data-ttu-id="7f63b-455">Quando você habilita o rastreamento de solicitação com falha, todos os erros são capturados.</span><span class="sxs-lookup"><span data-stu-id="7f63b-455">When you enable failed request tracing, all errors are captured.</span></span>

<span data-ttu-id="7f63b-456">Você pode habilitar o rastreamento de solicitação com falha usando o Visual Studio, mas não pode exibi-lo no Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="7f63b-456">You can enable failed request tracing by using Visual Studio, but you can't view them in Visual Studio.</span></span> <span data-ttu-id="7f63b-457">Esses logs são arquivos XML.</span><span class="sxs-lookup"><span data-stu-id="7f63b-457">These logs are XML files.</span></span> <span data-ttu-id="7f63b-458">O serviço de log de streaming monitora apenas arquivos que são considerados legíveis em modo de texto sem formatação: *.txt*, *.html* e *.log*.</span><span class="sxs-lookup"><span data-stu-id="7f63b-458">The streaming log service only monitors files that are deemed readable in plain text mode:  *.txt*, *.html*, and *.log* files.</span></span>

<span data-ttu-id="7f63b-459">Você pode exibir os logs de rastreamento de solicitação com falha em um navegador diretamente por meio de FTP ou localmente depois de usar uma ferramenta FTP para baixá-los em seu computador local.</span><span class="sxs-lookup"><span data-stu-id="7f63b-459">You can view failed request tracing logs in a browser directly via FTP or locally after using an FTP tool to download them to your local computer.</span></span> <span data-ttu-id="7f63b-460">Nesta seção você irá exibi-los diretamente em um navegador.</span><span class="sxs-lookup"><span data-stu-id="7f63b-460">In this section you'll view them in a browser directly.</span></span>

1. <span data-ttu-id="7f63b-461">Na guia **Configuração** da janela **Aplicativo Web do Azure** que você abriu no **Gerenciador de Servidores**, altere **Rastreamento de Solicitação com Falha** para **Ativado** e clique em **Salvar**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-461">In the **Configuration** tab of the **Azure Web App** window that you opened from **Server Explorer**, change **Failed Request Tracing** to **On**, and then click **Save**.</span></span>

    ![Habilitar o rastreamento de solicitações com falha](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-failedrequeston.png)
2. <span data-ttu-id="7f63b-463">Na barra de endereços da janela do navegador que mostra o aplicativo Web, adicione um caractere extra para a URL e pressione Enter para provocar um erro 404.</span><span class="sxs-lookup"><span data-stu-id="7f63b-463">In the address bar of the browser window that shows the web app, add an extra character to the URL and click Enter to cause a 404 error.</span></span>

    <span data-ttu-id="7f63b-464">Isso faz com que um log de rastreamento de solicitação com falha seja criado e as etapas seguintes mostram como exibir ou baixar o log.</span><span class="sxs-lookup"><span data-stu-id="7f63b-464">This causes a failed request tracing log to be created, and the following steps show how to view or download the log.</span></span>
3. <span data-ttu-id="7f63b-465">No Visual Studio, na guia **Configuração** da janela **Aplicativo Web do Azure**, clique em **Abrir no Portal de Gerenciamento**.</span><span class="sxs-lookup"><span data-stu-id="7f63b-465">In Visual Studio, in the **Configuration** tab of the **Azure Web App** window, click **Open in Management Portal**.</span></span>
4. <span data-ttu-id="7f63b-466">Na folha **Configurações** do [Portal do Azure](https://portal.azure.com) do seu aplicativo Web, clique em **Credenciais de implantação** e insira um novo nome de usuário e uma senha.</span><span class="sxs-lookup"><span data-stu-id="7f63b-466">In the [Azure Portal](https://portal.azure.com) **Settings** blade for your web app, click **Deployment credentials**, and then enter a new user name and password.</span></span>

    ![Novo nome de usuário e senha FTP](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-enterftpcredentials.png)

    <span data-ttu-id="7f63b-468">**Quando você fizer logon, será preciso usar o nome de usuário completo com o nome do aplicativo Web como prefixo dele.</span><span class="sxs-lookup"><span data-stu-id="7f63b-468">**When you log in, you have to use the full user name with the web app name prefixed to it.</span></span> <span data-ttu-id="7f63b-469">Por exemplo, se você inserir "myid" como um nome de usuário e o site é "meuexemplo", fará logon como "meuexemplo\myid".</span><span class="sxs-lookup"><span data-stu-id="7f63b-469">For example, if you enter "myid" as a user name and the site is "myexample", you log in as "myexample\myid".</span></span>
5. <span data-ttu-id="7f63b-470">Em uma nova janela do navegador, vá para a URL mostrada em **Nome do host FTP** ou **Nome do host FTPS** na folha **Aplicativo Web** do seu aplicativo Web.</span><span class="sxs-lookup"><span data-stu-id="7f63b-470">In a new browser window, go to the URL that is shown under **FTP hostname** or **FTPS hostname** in the **Web App** blade for your web app.</span></span>
6. <span data-ttu-id="7f63b-471">Faça logon usando as credenciais FTP que você criou anteriormente (incluindo o prefixo do nome do aplicativo Web para o nome de usuário).</span><span class="sxs-lookup"><span data-stu-id="7f63b-471">Log in using the FTP credentials that you created earlier (including the web app name prefix for the user name).</span></span>

    <span data-ttu-id="7f63b-472">O navegador mostra a pasta raiz do aplicativo Web.</span><span class="sxs-lookup"><span data-stu-id="7f63b-472">The browser shows the root folder of the web app.</span></span>
7. <span data-ttu-id="7f63b-473">Abra a pasta *LogFiles* .</span><span class="sxs-lookup"><span data-stu-id="7f63b-473">Open the *LogFiles* folder.</span></span>

    ![Abrir a pasta LogFiles](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-logfilesfolder.png)
8. <span data-ttu-id="7f63b-475">Abra a pasta chamada W3SVC mais um valor numérico.</span><span class="sxs-lookup"><span data-stu-id="7f63b-475">Open the folder that is named W3SVC plus a numeric value.</span></span>

    ![Abrir a pasta W3SVC](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-w3svcfolder.png)

    <span data-ttu-id="7f63b-477">A pasta contém arquivos XML para todos os erros que foram registrados em log depois que você habilitou o rastreamento de solicitação com falha e um arquivo XSL que um navegador pode usar para formatar o XML.</span><span class="sxs-lookup"><span data-stu-id="7f63b-477">The folder contains XML files for any errors that have been logged after you enabled failed request tracing, and an XSL file that a browser can use to format the XML.</span></span>

    ![Pasta W3SVC](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-w3svcfoldercontents.png)
9. <span data-ttu-id="7f63b-479">Clique no arquivo XML da solicitação com falha da qual você deseja ver as informações de rastreamento.</span><span class="sxs-lookup"><span data-stu-id="7f63b-479">Click the XML file for the failed request that you want to see tracing information for.</span></span>

    <span data-ttu-id="7f63b-480">A ilustração a seguir mostra parte das informações de rastreamento de um erro de amostra.</span><span class="sxs-lookup"><span data-stu-id="7f63b-480">The following illustration shows part of the tracing information for a sample error.</span></span>

    ![Rastreamento de solicitação com falha no navegador](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-failedrequestinbrowser.png)

## <span data-ttu-id="7f63b-482"><a name="nextsteps"></a>Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="7f63b-482"><a name="nextsteps"></a>Next Steps</span></span>
<span data-ttu-id="7f63b-483">Você viu como o Visual Studio facilita a exibição de logs criados por um aplicativo Web do Azure.</span><span class="sxs-lookup"><span data-stu-id="7f63b-483">You've seen how Visual Studio makes it easy to view logs created by an Azure web app.</span></span> <span data-ttu-id="7f63b-484">As seguintes seções fornecem links para mais recursos sobre tópicos relacionados:</span><span class="sxs-lookup"><span data-stu-id="7f63b-484">The following sections provide links to more resources on related topics:</span></span>

* <span data-ttu-id="7f63b-485">Solução de problemas de aplicativo Web do Azure</span><span class="sxs-lookup"><span data-stu-id="7f63b-485">Azure web app troubleshooting</span></span>
* <span data-ttu-id="7f63b-486">Depurando no Visual Studio</span><span class="sxs-lookup"><span data-stu-id="7f63b-486">Debugging in Visual Studio</span></span>
* <span data-ttu-id="7f63b-487">Depuração remota no Azure</span><span class="sxs-lookup"><span data-stu-id="7f63b-487">Remote debugging in Azure</span></span>
* <span data-ttu-id="7f63b-488">Rastreando em aplicativos ASP.NET</span><span class="sxs-lookup"><span data-stu-id="7f63b-488">Tracing in ASP.NET applications</span></span>
* <span data-ttu-id="7f63b-489">Analisando logs de servidor Web</span><span class="sxs-lookup"><span data-stu-id="7f63b-489">Analyzing web server logs</span></span>
* <span data-ttu-id="7f63b-490">Analisando logs de rastreamento de solicitação com falha</span><span class="sxs-lookup"><span data-stu-id="7f63b-490">Analyzing failed request tracing logs</span></span>
* <span data-ttu-id="7f63b-491">Depurando serviços de nuvem</span><span class="sxs-lookup"><span data-stu-id="7f63b-491">Debugging Cloud Services</span></span>

### <a name="azure-web-app-troubleshooting"></a><span data-ttu-id="7f63b-492">Solução de problemas de aplicativo Web do Azure</span><span class="sxs-lookup"><span data-stu-id="7f63b-492">Azure web app troubleshooting</span></span>
<span data-ttu-id="7f63b-493">Para saber mais sobre como solucionar problemas de aplicativos Web no Serviço de Aplicativo do Azure, confira os seguintes recursos:</span><span class="sxs-lookup"><span data-stu-id="7f63b-493">For more information about troubleshooting web apps in Azure App Service, see the following resources:</span></span>

* [<span data-ttu-id="7f63b-494">Como monitorar aplicativos Web</span><span class="sxs-lookup"><span data-stu-id="7f63b-494">How to monitor web apps</span></span>](/manage/services/web-sites/how-to-monitor-websites/)
* <span data-ttu-id="7f63b-495">[Investigando perdas de memória em aplicativos Web do Azure com o Visual Studio 2013](http://blogs.msdn.com/b/visualstudioalm/archive/2013/12/20/investigating-memory-leaks-in-azure-web-sites-with-visual-studio-2013.aspx).</span><span class="sxs-lookup"><span data-stu-id="7f63b-495">[Investigating Memory Leaks in Azure Web Apps with Visual Studio 2013](http://blogs.msdn.com/b/visualstudioalm/archive/2013/12/20/investigating-memory-leaks-in-azure-web-sites-with-visual-studio-2013.aspx).</span></span> <span data-ttu-id="7f63b-496">Postagem no blog do Microsoft ALM sobre os recursos do Visual Studio para análise de problemas de memória gerenciados.</span><span class="sxs-lookup"><span data-stu-id="7f63b-496">Microsoft ALM blog post about Visual Studio features for analyzing managed memory issues.</span></span>
* <span data-ttu-id="7f63b-497">[Ferramentas online de aplicativos Web do Azure sobre as quais você deve saber](https://azure.microsoft.com/blog/2014/03/28/windows-azure-websites-online-tools-you-should-know-about-2/).</span><span class="sxs-lookup"><span data-stu-id="7f63b-497">[Azure web apps online tools you should know about](https://azure.microsoft.com/blog/2014/03/28/windows-azure-websites-online-tools-you-should-know-about-2/).</span></span> <span data-ttu-id="7f63b-498">Postagem de blog de Amit Apple.</span><span class="sxs-lookup"><span data-stu-id="7f63b-498">Blog post by Amit Apple.</span></span>

<span data-ttu-id="7f63b-499">Para obter ajuda com uma pergunta específica de solução de problemas, inicie um thread em um dos seguintes fóruns:</span><span class="sxs-lookup"><span data-stu-id="7f63b-499">For help with a specific troubleshooting question, start a thread in one of the following forums:</span></span>

* <span data-ttu-id="7f63b-500">[O fórum do Azure no site do ASP.NET](http://forums.asp.net/1247.aspx/1?Azure+and+ASP+NET).</span><span class="sxs-lookup"><span data-stu-id="7f63b-500">[The Azure forum on the ASP.NET site](http://forums.asp.net/1247.aspx/1?Azure+and+ASP+NET).</span></span>
* <span data-ttu-id="7f63b-501">[O fórum do Azure no MSDN](http://social.msdn.microsoft.com/Forums/windowsazure/).</span><span class="sxs-lookup"><span data-stu-id="7f63b-501">[The Azure forum on MSDN](http://social.msdn.microsoft.com/Forums/windowsazure/).</span></span>
* <span data-ttu-id="7f63b-502">[StackOverflow.com](http://www.stackoverflow.com).</span><span class="sxs-lookup"><span data-stu-id="7f63b-502">[StackOverflow.com](http://www.stackoverflow.com).</span></span>

### <a name="debugging-in-visual-studio"></a><span data-ttu-id="7f63b-503">Depurando no Visual Studio</span><span class="sxs-lookup"><span data-stu-id="7f63b-503">Debugging in Visual Studio</span></span>
<span data-ttu-id="7f63b-504">Para obter mais informações sobre como usar o modo de depuração no Visual Studio, consulte o tópico do MSDN [Depurando no Visual Studio](http://msdn.microsoft.com/library/vstudio/sc65sadd.aspx) e [Dicas de depuração no Visual Studio 2010](http://weblogs.asp.net/scottgu/archive/2010/08/18/debugging-tips-with-visual-studio-2010.aspx).</span><span class="sxs-lookup"><span data-stu-id="7f63b-504">For more information about how to use debug mode in Visual Studio, see the [Debugging in Visual Studio](http://msdn.microsoft.com/library/vstudio/sc65sadd.aspx) MSDN topic and [Debugging Tips with Visual Studio 2010](http://weblogs.asp.net/scottgu/archive/2010/08/18/debugging-tips-with-visual-studio-2010.aspx).</span></span>

### <a name="remote-debugging-in-azure"></a><span data-ttu-id="7f63b-505">Depuração remota no Azure</span><span class="sxs-lookup"><span data-stu-id="7f63b-505">Remote debugging in Azure</span></span>
<span data-ttu-id="7f63b-506">Para saber mais sobre a depuração remota para aplicativos Web do Azure e Trabalhos Web, confira os seguintes recursos:</span><span class="sxs-lookup"><span data-stu-id="7f63b-506">For more information about remote debugging for Azure web apps and WebJobs, see the following resources:</span></span>

* <span data-ttu-id="7f63b-507">[Introdução à depuração remota em aplicativos Web de Serviço de Aplicativo do Azure](https://azure.microsoft.com/blog/2014/05/06/introduction-to-remote-debugging-on-azure-web-sites/).</span><span class="sxs-lookup"><span data-stu-id="7f63b-507">[Introduction to Remote Debugging Azure App Service Web Apps](https://azure.microsoft.com/blog/2014/05/06/introduction-to-remote-debugging-on-azure-web-sites/).</span></span>
* [<span data-ttu-id="7f63b-508">Introdução à depuração remota em aplicativos Web de Serviço de Aplicativo do Azure parte 2 - Por dentro da depuração remota</span><span class="sxs-lookup"><span data-stu-id="7f63b-508">Introduction to Remote Debugging Azure App Service Web Apps part 2 - Inside Remote debugging</span></span>](https://azure.microsoft.com/blog/2014/05/07/introduction-to-remote-debugging-azure-web-sites-part-2-inside-remote-debugging/)
* [<span data-ttu-id="7f63b-509">Introdução à depuração remota em aplicativos Web de Serviço de Aplicativo do Azure parte 3 - Ambiente de várias instâncias e GIT</span><span class="sxs-lookup"><span data-stu-id="7f63b-509">Introduction to Remote Debugging on Azure App Service Web Apps part 3 - Multi-Instance environment and GIT</span></span>](https://azure.microsoft.com/blog/2014/05/08/introduction-to-remote-debugging-on-azure-web-sites-part-3-multi-instance-environment-and-git/)
* [<span data-ttu-id="7f63b-510">Depuração de Trabalhos Web (vídeo)</span><span class="sxs-lookup"><span data-stu-id="7f63b-510">WebJobs Debugging (video)</span></span>](https://www.youtube.com/watch?v=ncQm9q5ZFZs&list=UU_SjTh-ZltPmTYzAybypB-g&index=1)

<span data-ttu-id="7f63b-511">Se o aplicativo Web usar uma API Web do Azure ou um back-end de Serviços Móveis e você precisar depurá-lo, confira [Depurando back-end do .NET no Visual Studio](http://blogs.msdn.com/b/azuremobile/archive/2014/03/14/debugging-net-backend-in-visual-studio.aspx).</span><span class="sxs-lookup"><span data-stu-id="7f63b-511">If your web app uses an Azure Web API or Mobile Services back-end and you need to debug that, see [Debugging .NET Backend in Visual Studio](http://blogs.msdn.com/b/azuremobile/archive/2014/03/14/debugging-net-backend-in-visual-studio.aspx).</span></span>

### <a name="tracing-in-aspnet-applications"></a><span data-ttu-id="7f63b-512">Rastreando em aplicativos ASP.NET</span><span class="sxs-lookup"><span data-stu-id="7f63b-512">Tracing in ASP.NET applications</span></span>
<span data-ttu-id="7f63b-513">Não existem introduções completas e atualizadas para rastreamento do ASP.NET disponíveis na Internet.</span><span class="sxs-lookup"><span data-stu-id="7f63b-513">There are no thorough and up-to-date introductions to ASP.NET tracing available on the Internet.</span></span> <span data-ttu-id="7f63b-514">O melhor a fazer é começar com materiais introdutórios antigos escritos para formulários da Web porque o MVC ainda não existia e complementar isso com postagens em blog mais recentes focalizadas em problemas específicas.</span><span class="sxs-lookup"><span data-stu-id="7f63b-514">The best you can do is get started with old introductory materials written for Web Forms because MVC didn't exist yet, and supplement that with newer blog posts that focus on specific issues.</span></span> <span data-ttu-id="7f63b-515">Alguns bons locais para começar são os seguintes recursos:</span><span class="sxs-lookup"><span data-stu-id="7f63b-515">Some good places to start are the following resources:</span></span>

* <span data-ttu-id="7f63b-516">[Monitoramento e telemetria (Compilando aplicativos de nuvem do mundo real com o Azure)](http://www.asp.net/aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/monitoring-and-telemetry).</span><span class="sxs-lookup"><span data-stu-id="7f63b-516">[Monitoring and Telemetry (Building Real-World Cloud Apps with Azure)](http://www.asp.net/aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/monitoring-and-telemetry).</span></span><br>
  <span data-ttu-id="7f63b-517">Capítulo do livro eletrônico com recomendações para rastreamento em aplicativos de nuvem do Azure.</span><span class="sxs-lookup"><span data-stu-id="7f63b-517">E-book chapter with recommendations for tracing in Azure cloud applications.</span></span>
* [<span data-ttu-id="7f63b-518">Rastreamento do ASP.NET</span><span class="sxs-lookup"><span data-stu-id="7f63b-518">ASP.NET Tracing</span></span>](http://msdn.microsoft.com/library/ms972204.aspx)<br/>
  <span data-ttu-id="7f63b-519">Antigo, mas ainda é um bom recurso para obter uma introdução básica sobre o assunto.</span><span class="sxs-lookup"><span data-stu-id="7f63b-519">Old but still a good resource for a basic introduction to the subject.</span></span>
* [<span data-ttu-id="7f63b-520">Ouvintes de rastreamento</span><span class="sxs-lookup"><span data-stu-id="7f63b-520">Trace Listeners</span></span>](http://msdn.microsoft.com/library/4y5y10s7.aspx)<br/>
  <span data-ttu-id="7f63b-521">Informações sobre ouvintes de rastreamento, mas não menciona o [WebPageTraceListener](http://msdn.microsoft.com/library/system.web.webpagetracelistener.aspx).</span><span class="sxs-lookup"><span data-stu-id="7f63b-521">Information about trace listeners but doesn't mention the [WebPageTraceListener](http://msdn.microsoft.com/library/system.web.webpagetracelistener.aspx).</span></span>
* [<span data-ttu-id="7f63b-522">Passo a passo: Integrando o rastreamento do ASP.NET com rastreamento do System.Diagnostics</span><span class="sxs-lookup"><span data-stu-id="7f63b-522">Walkthrough: Integrating ASP.NET Tracing with System.Diagnostics Tracing</span></span>](http://msdn.microsoft.com/library/b0ectfxd.aspx)<br/>
  <span data-ttu-id="7f63b-523">Isso também é antigo, mas inclui algumas informações adicionais que o artigo introdutório não cobre.</span><span class="sxs-lookup"><span data-stu-id="7f63b-523">This too is old, but includes some additional information that the introductory article doesn't cover.</span></span>
* [<span data-ttu-id="7f63b-524">Rastreamento em exibições do Razor do ASP.NET MVC</span><span class="sxs-lookup"><span data-stu-id="7f63b-524">Tracing in ASP.NET MVC Razor Views</span></span>](http://blogs.msdn.com/b/webdev/archive/2013/07/16/tracing-in-asp-net-mvc-razor-views.aspx)<br/>
  <span data-ttu-id="7f63b-525">Além do rastreamento em exibições do Razor, a postagem também explica como criar um filtro de erros para registrar em log todas as exceções não tratadas em um aplicativo MVC.</span><span class="sxs-lookup"><span data-stu-id="7f63b-525">Besides tracing in Razor views, the post also explains how to create an error filter in order to log all unhandled exceptions in an MVC application.</span></span> <span data-ttu-id="7f63b-526">Para obter informações sobre como registrar em log exceções não tratadas em um aplicativo de formulários da Web, consulte o exemplo do Global.asax em [Concluir exemplo para manipuladores de erro](http://msdn.microsoft.com/library/bb397417.aspx) no MSDN.</span><span class="sxs-lookup"><span data-stu-id="7f63b-526">For information about how to log all unhandled exceptions in a Web Forms application, see the Global.asax example in [Complete Example for Error Handlers](http://msdn.microsoft.com/library/bb397417.aspx) on MSDN.</span></span> <span data-ttu-id="7f63b-527">No MVC ou em Formulários da Web, para registrar certas exceções em log, mas deixar o tratamento da estrutura padrão cuidar deles, você poderá capturar e relançar como no exemplo a seguir:</span><span class="sxs-lookup"><span data-stu-id="7f63b-527">In either MVC or Web Forms, if you want to log certain exceptions but let the default framework handling take effect for them, you can catch and rethrow as in the following example:</span></span>

        try
        {
           // Your code that might cause an exception to be thrown.
        }
        catch (Exception ex)
        {
            Trace.TraceError("Exception: " + ex.ToString());
            throw;
        }
* [<span data-ttu-id="7f63b-528">Registro em log de rastreamento do diagnóstico de streaming na linha de comando do Azure (mais Glimpse!)</span><span class="sxs-lookup"><span data-stu-id="7f63b-528">Streaming Diagnostics Trace Logging from the Azure Command Line (plus Glimpse!)</span></span>](http://www.hanselman.com/blog/StreamingDiagnosticsTraceLoggingFromTheAzureCommandLinePlusGlimpse.aspx)<br/>
  <span data-ttu-id="7f63b-529">Como usar a linha de comando para fazer o que este tutorial mostra no Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="7f63b-529">How to use the command line to do what this tutorial shows how to do in Visual Studio.</span></span> <span data-ttu-id="7f63b-530">[Glimpse (a página pode estar em inglês)](http://www.hanselman.com/blog/IfYoureNotUsingGlimpseWithASPNETForDebuggingAndProfilingYoureMissingOut.aspx) é uma ferramenta para depuração de aplicativos ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="7f63b-530">[Glimpse](http://www.hanselman.com/blog/IfYoureNotUsingGlimpseWithASPNETForDebuggingAndProfilingYoureMissingOut.aspx) is a tool for debugging ASP.NET applications.</span></span>
* <span data-ttu-id="7f63b-531">[Usando diagnóstico e registro em log de Aplicativos Web – com David Ebbo](/documentation/videos/azure-web-site-logging-and-diagnostics/) e [Logs de streaming dos Aplicativos Web – com David Ebbo](/documentation/videos/log-streaming-with-azure-web-sites/)</span><span class="sxs-lookup"><span data-stu-id="7f63b-531">[Using Web Apps Logging and Diagnostics - with David Ebbo](/documentation/videos/azure-web-site-logging-and-diagnostics/) and [Streaming Logs from Web Apps - with David Ebbo](/documentation/videos/log-streaming-with-azure-web-sites/)</span></span><br>
  <span data-ttu-id="7f63b-532">Vídeos de Scott Hanselman e David Ebbo.</span><span class="sxs-lookup"><span data-stu-id="7f63b-532">Videos by Scott Hanselman and David Ebbo.</span></span>

<span data-ttu-id="7f63b-533">Para o registro em log de erros, uma alternativa para escrever seu próprio código de rastreamento é usar uma estrutura de registros em log de software livre, como o [ELMAH](http://nuget.org/packages/elmah/).</span><span class="sxs-lookup"><span data-stu-id="7f63b-533">For error logging, an alternative to writing your own tracing code is to use an open-source logging framework such as [ELMAH](http://nuget.org/packages/elmah/).</span></span> <span data-ttu-id="7f63b-534">Para obter mais informações, consulte as [postagens no blog de Scott Hanselman sobre o ELMAH](http://www.hanselman.com/blog/NuGetPackageOfTheWeek7ELMAHErrorLoggingModulesAndHandlersWithSQLServerCompact.aspx).</span><span class="sxs-lookup"><span data-stu-id="7f63b-534">For more information, see [Scott Hanselman's blog posts about ELMAH](http://www.hanselman.com/blog/NuGetPackageOfTheWeek7ELMAHErrorLoggingModulesAndHandlersWithSQLServerCompact.aspx).</span></span>

<span data-ttu-id="7f63b-535">Além disso, observe que você não precisa usar o rastreamento do ASP.NET ou do System.Diagnostics se quiser obter logs de streaming do Azure.</span><span class="sxs-lookup"><span data-stu-id="7f63b-535">Also, note that you don't have to use ASP.NET or System.Diagnostics tracing if you want to get streaming logs from Azure.</span></span> <span data-ttu-id="7f63b-536">O serviço de log de streaming de aplicativo Web do Azure transmitirá qualquer arquivo *.txt*, *.html* ou *.log* que encontrar na pasta *LogFiles*.</span><span class="sxs-lookup"><span data-stu-id="7f63b-536">The Azure web app streaming log service will stream any *.txt*, *.html*, or *.log* file that it finds in the *LogFiles* folder.</span></span> <span data-ttu-id="7f63b-537">Portanto, você pode criar seu próprio sistema de log que grava no sistema de arquivos do aplicativo Web, e o arquivo será automaticamente transmitido e baixado.</span><span class="sxs-lookup"><span data-stu-id="7f63b-537">Therefore, you could create your own logging system that writes to the file system of the web app, and your file will be automatically streamed and downloaded.</span></span> <span data-ttu-id="7f63b-538">Tudo o que você precisa fazer é escrever o código do aplicativo que cria arquivos na pasta *d:\home\logfiles*.</span><span class="sxs-lookup"><span data-stu-id="7f63b-538">All you have to do is write application code that creates files in the *d:\home\logfiles* folder.</span></span>

### <a name="analyzing-web-server-logs"></a><span data-ttu-id="7f63b-539">Analisando logs de servidor Web</span><span class="sxs-lookup"><span data-stu-id="7f63b-539">Analyzing web server logs</span></span>
<span data-ttu-id="7f63b-540">Para obter mais informações sobre como analisar logs de servidor web, consulte os seguintes recursos:</span><span class="sxs-lookup"><span data-stu-id="7f63b-540">For more information about analyzing web server logs, see the following resources:</span></span>

* [<span data-ttu-id="7f63b-541">LogParser</span><span class="sxs-lookup"><span data-stu-id="7f63b-541">LogParser</span></span>](http://www.microsoft.com/download/details.aspx?id=24659)<br/>
  <span data-ttu-id="7f63b-542">Uma ferramenta para exibir dados em logs de servidor Web (arquivos*.log* ).</span><span class="sxs-lookup"><span data-stu-id="7f63b-542">A tool for viewing data in web server logs (*.log* files).</span></span>
* [<span data-ttu-id="7f63b-543">Solução de problemas de desempenho do IIS ou erros de aplicativo usando o LogParser</span><span class="sxs-lookup"><span data-stu-id="7f63b-543">Troubleshooting IIS Performance Issues or Application Errors using LogParser </span></span>](http://www.iis.net/learn/troubleshoot/performance-issues/troubleshooting-iis-performance-issues-or-application-errors-using-logparser)<br/>
  <span data-ttu-id="7f63b-544">Uma introdução à ferramenta LogParser que pode ser usada para analisar logs de servidor web.</span><span class="sxs-lookup"><span data-stu-id="7f63b-544">An introduction to the Log Parser tool that you can use to analyze web server logs.</span></span>
* [<span data-ttu-id="7f63b-545">Postagens no blog por Robert McMurray sobre como usar o LogParser</span><span class="sxs-lookup"><span data-stu-id="7f63b-545">Blog posts by Robert McMurray on using LogParser</span></span>](http://blogs.msdn.com/b/robert_mcmurray/archive/tags/logparser/)<br/>
* [<span data-ttu-id="7f63b-546">O código de status HTTP no IIS 7.0, IIS 7.5 e IIS 8.0</span><span class="sxs-lookup"><span data-stu-id="7f63b-546">The HTTP status code in IIS 7.0, IIS 7.5, and IIS 8.0</span></span>](http://support.microsoft.com/kb/943891)

### <a name="analyzing-failed-request-tracing-logs"></a><span data-ttu-id="7f63b-547">Analisando logs de rastreamento de solicitação com falha</span><span class="sxs-lookup"><span data-stu-id="7f63b-547">Analyzing failed request tracing logs</span></span>
<span data-ttu-id="7f63b-548">O site do Microsoft TechNet inclui uma seção [Usando rastreamento de solicitação com falha](http://www.iis.net/learn/troubleshoot/using-failed-request-tracing) que pode ser útil para entender como usar esses logs.</span><span class="sxs-lookup"><span data-stu-id="7f63b-548">The Microsoft TechNet website includes a [Using Failed Request Tracing](http://www.iis.net/learn/troubleshoot/using-failed-request-tracing) section which may be helpful for understanding how to use these logs.</span></span> <span data-ttu-id="7f63b-549">No entanto, essa documentação se concentra principalmente na configuração do rastreamento de solicitação com falha no IIS, o que você não pode fazer em Aplicativos Web do Azure.</span><span class="sxs-lookup"><span data-stu-id="7f63b-549">However, this documentation focuses mainly on configuring failed request tracing in IIS, which you can't do in Azure Web Apps.</span></span>

[GetStarted]: app-service-web-get-started-dotnet.md
[GetStartedWJ]: websites-dotnet-webjobs-sdk.md
