---
title: "aaaHow tooControl o tráfego de entrada tooan ambiente de serviço de aplicativo"
description: "Saiba mais sobre como o tráfego tooan ambiente de serviço de aplicativo de entrada tooconfigure toocontrol de regras de segurança de rede."
services: app-service
documentationcenter: 
author: ccompy
manager: erikre
editor: 
ms.assetid: 4cc82439-8791-48a4-9485-de6d8e1d1a08
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/11/2017
ms.author: stefsch
ms.openlocfilehash: e7c6e6201db6a1ea77f7a2eee29a3b5445175495
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="how-toocontrol-inbound-traffic-tooan-app-service-environment"></a><span data-ttu-id="49b6e-103">Como o tráfego de entrada de tooControl tooan ambiente de serviço de aplicativo</span><span class="sxs-lookup"><span data-stu-id="49b6e-103">How tooControl Inbound Traffic tooan App Service Environment</span></span>
## <a name="overview"></a><span data-ttu-id="49b6e-104">Visão geral</span><span class="sxs-lookup"><span data-stu-id="49b6e-104">Overview</span></span>
<span data-ttu-id="49b6e-105">Um Ambiente de Serviço de Aplicativo pode ser criado **tanto** em uma rede virtual do Azure Resource Manager, **quanto** em uma [rede virtual][virtualnetwork] de modelo de implantação clássico.</span><span class="sxs-lookup"><span data-stu-id="49b6e-105">An App Service Environment can be created in **either** an Azure Resource Manager virtual network, **or** a classic deployment model [virtual network][virtualnetwork].</span></span>  <span data-ttu-id="49b6e-106">Uma nova rede virtual e uma nova sub-rede podem ser definidos no momento de saudação que um ambiente de serviço de aplicativo é criado.</span><span class="sxs-lookup"><span data-stu-id="49b6e-106">A new virtual network and new subnet can be defined at hello time an App Service Environment is created.</span></span>  <span data-ttu-id="49b6e-107">Como alternativa, um Ambiente de Serviço de Aplicativo pode ser criado em uma rede virtual e uma sub-rede existentes.</span><span class="sxs-lookup"><span data-stu-id="49b6e-107">Alternatively, an App Service Environment can be created in a pre-existing virtual network and pre-existing subnet.</span></span>  <span data-ttu-id="49b6e-108">Com uma alteração recente feita em junho de 2016, os ASEs agora podem ser implantados nas redes virtuais que usam os intervalos de endereço público ou espaços de endereço RFC1918 (ou seja, endereços privados).</span><span class="sxs-lookup"><span data-stu-id="49b6e-108">With a change made in June 2016, ASEs can also be deployed into virtual networks that use either public address ranges, or RFC1918 address spaces (i.e. private addresses).</span></span>  <span data-ttu-id="49b6e-109">Para obter mais detalhes sobre a criação de um ambiente de serviço de aplicativo, consulte [como um ambiente de serviço de aplicativo de tooCreate][HowToCreateAnAppServiceEnvironment].</span><span class="sxs-lookup"><span data-stu-id="49b6e-109">For more details on creating an App Service Environment see [How tooCreate an App Service Environment][HowToCreateAnAppServiceEnvironment].</span></span>

<span data-ttu-id="49b6e-110">Um ambiente de serviço de aplicativo deve sempre ser criado em uma sub-rede porque uma sub-rede fornece um limite de rede que pode ser usado toolock para baixo tráfego de entrada por trás de upstream dispositivos e serviços, de forma que o tráfego HTTP e HTTPS só é aceito na específico upstream Endereços IP.</span><span class="sxs-lookup"><span data-stu-id="49b6e-110">An App Service Environment must always be created within a subnet because a subnet provides a network boundary which can be used toolock down inbound traffic behind upstream devices and services such that HTTP and HTTPS traffic is only accepted from specific upstream IP addresses.</span></span>

<span data-ttu-id="49b6e-111">O tráfego de rede de entrada e saída em uma sub-rede é controlado usando um [grupo de segurança de rede][NetworkSecurityGroups].</span><span class="sxs-lookup"><span data-stu-id="49b6e-111">Inbound and outbound network traffic on a subnet is controlled using a [network security group][NetworkSecurityGroups].</span></span> <span data-ttu-id="49b6e-112">Controlar o tráfego de entrada requer a criação de regras de segurança de rede em um grupo de segurança de rede e, em seguida, atribuir Olá rede segurança grupo Olá sub-rede contendo Olá ambiente de serviço de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="49b6e-112">Controlling inbound traffic requires creating network security rules in a network security group, and then assigning hello network security group hello subnet containing hello App Service Environment.</span></span>

<span data-ttu-id="49b6e-113">Quando um grupo de segurança de rede é atribuído a sub-rede tooa, o tooapps de tráfego de entrada em Olá que ambiente de serviço de aplicativo é permitido/bloqueado com base em Olá permitir e negar as regras definidas no grupo de segurança de rede hello.</span><span class="sxs-lookup"><span data-stu-id="49b6e-113">Once a network security group is assigned tooa subnet, inbound traffic tooapps in hello App Service Environment is allowed/blocked based on hello allow and deny rules defined in hello network security group.</span></span>

[!INCLUDE [app-service-web-to-api-and-mobile](../../includes/app-service-web-to-api-and-mobile.md)]

## <a name="inbound-network-ports-used-in-an-app-service-environment"></a><span data-ttu-id="49b6e-114">Portas de entrada de rede usadas em um Ambiente de Serviço de Aplicativo</span><span class="sxs-lookup"><span data-stu-id="49b6e-114">Inbound Network Ports Used in an App Service Environment</span></span>
<span data-ttu-id="49b6e-115">Antes de bloquear o tráfego de rede com um grupo de segurança de rede, é importante tooknow Olá conjunto de portas de rede necessários e opcionais usadas por um ambiente de serviço de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="49b6e-115">Before locking down inbound network traffic with a network security group, it is important tooknow hello set of required and optional network ports used by an App Service Environment.</span></span>  <span data-ttu-id="49b6e-116">Fechar acidentalmente portas toosome de tráfego pode resultar em perda de funcionalidade em um ambiente de serviço de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="49b6e-116">Accidentally closing off traffic toosome ports can result in loss of functionality in an App Service Environment.</span></span>

<span data-ttu-id="49b6e-117">a seguir Olá é uma lista de portas usadas por um ambiente de serviço de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="49b6e-117">hello following is a list of ports used by an App Service Environment.</span></span> <span data-ttu-id="49b6e-118">Todas as portas são **TCP**, a menos que indicado o claramente contrário:</span><span class="sxs-lookup"><span data-stu-id="49b6e-118">All ports are **TCP**, unless otherwise clearly noted:</span></span>

* <span data-ttu-id="49b6e-119">454: **Porta requerida** usada pela infraestrutura do Azure para gerenciamento e manutenção de Ambientes de Serviço de Aplicativo via SSL.</span><span class="sxs-lookup"><span data-stu-id="49b6e-119">454:  **Required port** used by Azure infrastructure for managing and maintaining App Service Environments via SSL.</span></span>  <span data-ttu-id="49b6e-120">Não bloquear o tráfego pela porta toothis.</span><span class="sxs-lookup"><span data-stu-id="49b6e-120">Do not block traffic toothis port.</span></span>  <span data-ttu-id="49b6e-121">Essa porta é sempre associada toohello o VIP público de um ASE.</span><span class="sxs-lookup"><span data-stu-id="49b6e-121">This port is always bound toohello public VIP of an ASE.</span></span>
* <span data-ttu-id="49b6e-122">455: **Porta requerida** usada pela infraestrutura do Azure para gerenciamento e manutenção de Ambientes de Serviço de Aplicativo via SSL.</span><span class="sxs-lookup"><span data-stu-id="49b6e-122">455:  **Required port** used by Azure infrastructure for managing and maintaining App Service Environments via SSL.</span></span>  <span data-ttu-id="49b6e-123">Não bloquear o tráfego pela porta toothis.</span><span class="sxs-lookup"><span data-stu-id="49b6e-123">Do not block traffic toothis port.</span></span>  <span data-ttu-id="49b6e-124">Essa porta é sempre associada toohello o VIP público de um ASE.</span><span class="sxs-lookup"><span data-stu-id="49b6e-124">This port is always bound toohello public VIP of an ASE.</span></span>
* <span data-ttu-id="49b6e-125">80: porta de entrada tooapps de tráfego HTTP em execução em planos de serviço de aplicativo em um ambiente de serviço de aplicativo padrão.</span><span class="sxs-lookup"><span data-stu-id="49b6e-125">80:  Default port for inbound HTTP traffic tooapps running in App Service Plans in an App Service Environment.</span></span>  <span data-ttu-id="49b6e-126">Em uma ASE ILB habilitado, essa porta é associada toohello ILB endereço Olá ASE.</span><span class="sxs-lookup"><span data-stu-id="49b6e-126">On an ILB-enabled ASE, this port is bound toohello ILB address of hello ASE.</span></span>
* <span data-ttu-id="49b6e-127">443: porta de entrada tooapps de tráfego do SSL em execução em planos de serviço de aplicativo em um ambiente de serviço de aplicativo padrão.</span><span class="sxs-lookup"><span data-stu-id="49b6e-127">443: Default port for inbound SSL traffic tooapps running in App Service Plans in an App Service Environment.</span></span>  <span data-ttu-id="49b6e-128">Em uma ASE ILB habilitado, essa porta é associada toohello ILB endereço Olá ASE.</span><span class="sxs-lookup"><span data-stu-id="49b6e-128">On an ILB-enabled ASE, this port is bound toohello ILB address of hello ASE.</span></span>
* <span data-ttu-id="49b6e-129">21: canal de controle para FTP.</span><span class="sxs-lookup"><span data-stu-id="49b6e-129">21:  Control channel for FTP.</span></span>  <span data-ttu-id="49b6e-130">Essa porta pode ser bloqueada com segurança se o FTP não está sendo usado.</span><span class="sxs-lookup"><span data-stu-id="49b6e-130">This port can be safely blocked if FTP is not being used.</span></span>  <span data-ttu-id="49b6e-131">Em uma ASE ILB habilitado, essa porta pode ser o endereço ILB de toohello associada para um ASE.</span><span class="sxs-lookup"><span data-stu-id="49b6e-131">On an ILB-enabled ASE, this port can be bound toohello ILB address for an ASE.</span></span>
* <span data-ttu-id="49b6e-132">990: canal de controle para FTPS.</span><span class="sxs-lookup"><span data-stu-id="49b6e-132">990:  Control channel for FTPS.</span></span>  <span data-ttu-id="49b6e-133">Essa porta poderá ser bloqueada com segurança se o FTPS não estiver sendo usado.</span><span class="sxs-lookup"><span data-stu-id="49b6e-133">This port can be safely blocked if FTPS is not being used.</span></span>  <span data-ttu-id="49b6e-134">Em uma ASE ILB habilitado, essa porta pode ser o endereço ILB de toohello associada para um ASE.</span><span class="sxs-lookup"><span data-stu-id="49b6e-134">On an ILB-enabled ASE, this port can be bound toohello ILB address for an ASE.</span></span>
* <span data-ttu-id="49b6e-135">10001-10020: canais de dados para FTP.</span><span class="sxs-lookup"><span data-stu-id="49b6e-135">10001-10020: Data channels for FTP.</span></span>  <span data-ttu-id="49b6e-136">Como com o canal de controle hello, essas portas podem ser bloqueadas com segurança se FTP não está sendo usado.</span><span class="sxs-lookup"><span data-stu-id="49b6e-136">As with hello control channel, these ports can be safely blocked if FTP is not being used.</span></span>  <span data-ttu-id="49b6e-137">Em uma ASE habilitado ILB, essa porta pode ser associado toohello do ASE endereço ILB.</span><span class="sxs-lookup"><span data-stu-id="49b6e-137">On an ILB-enabled ASE, this port can be bound toohello ASE's ILB address.</span></span>
* <span data-ttu-id="49b6e-138">4016: usado para depuração remota com o Visual Studio 2012.</span><span class="sxs-lookup"><span data-stu-id="49b6e-138">4016: Used for remote debugging with Visual Studio 2012.</span></span>  <span data-ttu-id="49b6e-139">Essa porta pode ser bloqueada com segurança se o recurso de saudação não está sendo usado.</span><span class="sxs-lookup"><span data-stu-id="49b6e-139">This port can be safely blocked if hello feature is not being used.</span></span>  <span data-ttu-id="49b6e-140">Em uma ASE ILB habilitado, essa porta é associada toohello ILB endereço Olá ASE.</span><span class="sxs-lookup"><span data-stu-id="49b6e-140">On an ILB-enabled ASE, this port is bound toohello ILB address of hello ASE.</span></span>
* <span data-ttu-id="49b6e-141">4018: usado para depuração remota com o Visual Studio 2013.</span><span class="sxs-lookup"><span data-stu-id="49b6e-141">4018: Used for remote debugging with Visual Studio 2013.</span></span>  <span data-ttu-id="49b6e-142">Essa porta pode ser bloqueada com segurança se o recurso de saudação não está sendo usado.</span><span class="sxs-lookup"><span data-stu-id="49b6e-142">This port can be safely blocked if hello feature is not being used.</span></span>  <span data-ttu-id="49b6e-143">Em uma ASE ILB habilitado, essa porta é associada toohello ILB endereço Olá ASE.</span><span class="sxs-lookup"><span data-stu-id="49b6e-143">On an ILB-enabled ASE, this port is bound toohello ILB address of hello ASE.</span></span>
* <span data-ttu-id="49b6e-144">4020: usado para depuração remota com o Visual Studio 2015.</span><span class="sxs-lookup"><span data-stu-id="49b6e-144">4020: Used for remote debugging with Visual Studio 2015.</span></span>  <span data-ttu-id="49b6e-145">Essa porta pode ser bloqueada com segurança se o recurso de saudação não está sendo usado.</span><span class="sxs-lookup"><span data-stu-id="49b6e-145">This port can be safely blocked if hello feature is not being used.</span></span>  <span data-ttu-id="49b6e-146">Em uma ASE ILB habilitado, essa porta é associada toohello ILB endereço Olá ASE.</span><span class="sxs-lookup"><span data-stu-id="49b6e-146">On an ILB-enabled ASE, this port is bound toohello ILB address of hello ASE.</span></span>

## <a name="outbound-connectivity-and-dns-requirements"></a><span data-ttu-id="49b6e-147">Requisitos de DNS e conectividade de saída</span><span class="sxs-lookup"><span data-stu-id="49b6e-147">Outbound Connectivity and DNS Requirements</span></span>
<span data-ttu-id="49b6e-148">Para um ambiente de serviço de aplicativo toofunction corretamente, ele também requer acesso de saída toovarious pontos de extremidade.</span><span class="sxs-lookup"><span data-stu-id="49b6e-148">For an App Service Environment toofunction properly, it also requires outbound access toovarious endpoints.</span></span> <span data-ttu-id="49b6e-149">É uma lista completa dos pontos de extremidade externos Olá usado por uma ASE em Olá seção "Conectividade de rede necessária" hello [configuração de rede para a rota expressa](app-service-app-service-environment-network-configuration-expressroute.md#required-network-connectivity) artigo.</span><span class="sxs-lookup"><span data-stu-id="49b6e-149">A full list of hello external endpoints used by an ASE is in hello "Required Network Connectivity" section of hello [Network Configuration for ExpressRoute](app-service-app-service-environment-network-configuration-expressroute.md#required-network-connectivity) article.</span></span>

<span data-ttu-id="49b6e-150">Ambientes de serviço de aplicativo exigem uma infraestrutura DNS válida configurada para a rede virtual hello.</span><span class="sxs-lookup"><span data-stu-id="49b6e-150">App Service Environments require a valid DNS infrastructure configured for hello virtual network.</span></span>  <span data-ttu-id="49b6e-151">Se para qualquer Olá motivo a configuração do DNS é alterada após ter sido criado um ambiente de serviço de aplicativo, os desenvolvedores podem forçar o toopick um ambiente de serviço de aplicativo nova configuração de DNS Olá.</span><span class="sxs-lookup"><span data-stu-id="49b6e-151">If for any reason hello DNS configuration is changed after an App Service Environment has been created, developers can force an App Service Environment toopick up hello new DNS configuration.</span></span>  <span data-ttu-id="49b6e-152">Disparar uma reinicialização sem interrupção de ambiente usando hello "Reiniciar" ícone localizado na parte superior de saudação da folha de gerenciamento do ambiente de serviço de aplicativo hello em Olá [portal do Azure] [ NewPortal] fará com que a saudação ambiente toopick a nova configuração de DNS hello.</span><span class="sxs-lookup"><span data-stu-id="49b6e-152">Triggering a rolling environment reboot using hello "Restart" icon located at hello top of hello App Service Environment management blade in hello [Azure portal][NewPortal] will cause hello environment toopick up hello new DNS configuration.</span></span>

<span data-ttu-id="49b6e-153">Também é recomendável que todos os servidores DNS personalizados Olá vnet ser configurado antes do tempo anterior toocreating um ambiente de serviço de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="49b6e-153">It is also recommended that any custom DNS servers on hello vnet be setup ahead of time prior toocreating an App Service Environment.</span></span>  <span data-ttu-id="49b6e-154">Se a configuração do DNS da rede virtual for alterada enquanto um ambiente de serviço de aplicativo está sendo criado, que resultará em falha de processo de criação de ambiente de serviço de aplicativo hello.</span><span class="sxs-lookup"><span data-stu-id="49b6e-154">If a virtual network's DNS configuration is changed while an App Service Environment is being created, that will result in hello App Service Environment creation process failing.</span></span>  <span data-ttu-id="49b6e-155">Do mesmo modo, se um servidor DNS personalizado existir no hello outra extremidade de um gateway de VPN e o servidor DNS Olá é Olá inacessível ou não estiver disponível, ambiente de serviço de aplicativo, o processo de criação também falharão.</span><span class="sxs-lookup"><span data-stu-id="49b6e-155">In a similar vein, if a custom DNS server exists on hello other end of a VPN gateway, and hello DNS server is unreachable or unavailable, hello App Service Environment creation process will also fail.</span></span>

## <a name="creating-a-network-security-group"></a><span data-ttu-id="49b6e-156">Criando um grupo de segurança de rede</span><span class="sxs-lookup"><span data-stu-id="49b6e-156">Creating a Network Security Group</span></span>
<span data-ttu-id="49b6e-157">Para obter detalhes completos sobre como funcionam os grupos de segurança de rede, consulte a seguir Olá [informações][NetworkSecurityGroups].</span><span class="sxs-lookup"><span data-stu-id="49b6e-157">For full details on how network security groups work see hello following [information][NetworkSecurityGroups].</span></span>  <span data-ttu-id="49b6e-158">exemplo de gerenciamento de serviços do Azure Hello abaixo ajustes na destaca dos grupos de segurança de rede, com um foco sobre como configurar e aplicar uma segurança grupo tooa sub-rede da rede que contém um ambiente de serviço de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="49b6e-158">hello Azure Service Management example below touches on highlights of network security groups, with a focus on configuring and applying a network security group tooa subnet that contains an App Service Environment.</span></span>

<span data-ttu-id="49b6e-159">**Observação:** grupos de segurança de rede podem ser configurados usando graficamente Olá [Portal do Azure](https://portal.azure.com) ou por meio do PowerShell do Azure.</span><span class="sxs-lookup"><span data-stu-id="49b6e-159">**Note:** Network security groups can be configured graphically using hello [Azure Portal](https://portal.azure.com) or through Azure PowerShell.</span></span>

<span data-ttu-id="49b6e-160">Grupos de segurança de rede são criados pela primeira vez como uma entidade autônoma associada a uma assinatura.</span><span class="sxs-lookup"><span data-stu-id="49b6e-160">Network security groups are first created as a standalone entity associated with a subscription.</span></span> <span data-ttu-id="49b6e-161">Como grupos de segurança de rede são criados em uma região do Azure, certifique-se que esse grupo de segurança de rede Olá é criado no hello mesmo região como Olá ambiente de serviço de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="49b6e-161">Since network security groups are created in an Azure region, ensure that hello network security group is created in hello same region as hello App Service Environment.</span></span>

<span data-ttu-id="49b6e-162">a seguir Olá demonstra a criação de um grupo de segurança de rede:</span><span class="sxs-lookup"><span data-stu-id="49b6e-162">hello following demonstrates creating a network security group:</span></span>

    New-AzureNetworkSecurityGroup -Name "testNSGexample" -Location "South Central US" -Label "Example network security group for an app service environment"

<span data-ttu-id="49b6e-163">Depois de criar um grupo de segurança de rede, uma ou mais regras de segurança de rede são adicionadas tooit.</span><span class="sxs-lookup"><span data-stu-id="49b6e-163">Once a network security group is created, one or more network security rules are added tooit.</span></span>  <span data-ttu-id="49b6e-164">Como o conjunto de saudação de regras pode ser alterado ao longo do tempo, é recomendável toospace out Olá esquema de numeração usado para toomake de prioridades da regra regras adicionais tooinsert fácil ao longo do tempo.</span><span class="sxs-lookup"><span data-stu-id="49b6e-164">Since hello set of rules may change over time, it is recommended toospace out hello numbering scheme used for rule priorities toomake it easy tooinsert additional rules over time.</span></span>

<span data-ttu-id="49b6e-165">exemplo Hello abaixo mostra uma regra que concede as portas de gerenciamento do acesso toohello necessárias por toomanage de infraestrutura do Azure Olá explicitamente e manter um ambiente de serviço de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="49b6e-165">hello example below shows a rule that explicitly grants access toohello management ports needed by hello Azure infrastructure toomanage and maintain an App Service Environment.</span></span>  <span data-ttu-id="49b6e-166">Observe que todo o tráfego de gerenciamento atravessam SSL e protegido por certificados de cliente, portanto, embora Olá portas estão abertas ficam inacessíveis por qualquer entidade que não seja a infraestrutura de gerenciamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="49b6e-166">Note that all management traffic flows over SSL and is secured by client certificates, so even though hello ports are opened they are inaccessible by any entity other than Azure management infrastructure.</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "ALLOW AzureMngmt" -Type Inbound -Priority 100 -Action Allow -SourceAddressPrefix 'INTERNET'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '454-455' -Protocol TCP


<span data-ttu-id="49b6e-167">Quando o bloqueio de acesso tooport 80 e 443 muito "Ocultar" um ambiente de serviço de aplicativo por trás de dispositivos upstream ou serviços, você precisará de endereço IP tooknow Olá upstream.</span><span class="sxs-lookup"><span data-stu-id="49b6e-167">When locking down access tooport 80 and 443 too"hide" an App Service Environment behind upstream devices or services, you will need tooknow hello upstream IP address.</span></span>  <span data-ttu-id="49b6e-168">Por exemplo, se você estiver usando um firewall do aplicativo web (WAF), Olá WAF terá seu próprio endereço IP (ou endereços) que ele usa quando proxy tráfego tooa ambiente de serviço de aplicativo downstream.</span><span class="sxs-lookup"><span data-stu-id="49b6e-168">For example, if you are using a web application firewall (WAF), hello WAF will have its own IP address (or addresses) which it uses when proxying traffic tooa downstream App Service Environment.</span></span>  <span data-ttu-id="49b6e-169">Você precisará toouse esse endereço IP no hello *SourceAddressPrefix* parâmetro de uma regra de segurança de rede.</span><span class="sxs-lookup"><span data-stu-id="49b6e-169">You will need toouse this IP address in hello *SourceAddressPrefix* parameter of a network security rule.</span></span>

<span data-ttu-id="49b6e-170">O exemplo hello abaixo, o tráfego de entrada de um determinado endereço IP upstream seja explicitamente permitido.</span><span class="sxs-lookup"><span data-stu-id="49b6e-170">In hello example below, inbound traffic from a specific upstream IP address is explicitly allowed.</span></span>  <span data-ttu-id="49b6e-171">Olá endereço *1.2.3.4* é usado como um espaço reservado para o endereço IP de saudação de um WAF upstream.</span><span class="sxs-lookup"><span data-stu-id="49b6e-171">hello address *1.2.3.4* is used as a placeholder for hello IP address of an upstream WAF.</span></span>  <span data-ttu-id="49b6e-172">Alterar Olá valor toomatch Olá endereço usado por seu dispositivo upstream ou o serviço.</span><span class="sxs-lookup"><span data-stu-id="49b6e-172">Change hello value toomatch hello address used by your upstream device or service.</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT HTTP" -Type Inbound -Priority 200 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '80' -Protocol TCP
    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT HTTPS" -Type Inbound -Priority 300 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '443' -Protocol TCP

<span data-ttu-id="49b6e-173">Se o suporte ao FTP for desejado, Olá seguindo as regras de pode ser usado como uma porta de controle do modelo toogrant acesso toohello FTP e portas de canal de dados.</span><span class="sxs-lookup"><span data-stu-id="49b6e-173">If FTP support is desired, hello following rules can be used as a template toogrant access toohello FTP control port and data channel ports.</span></span>  <span data-ttu-id="49b6e-174">Como o FTP é um protocolo com monitoração de estado, talvez não seja capaz de tooroute FTP tráfego por meio de um dispositivo de firewall ou proxy HTTP/HTTPS tradicional.</span><span class="sxs-lookup"><span data-stu-id="49b6e-174">Since FTP is a stateful protocol, you may not be able tooroute FTP traffic through a traditional HTTP/HTTPS firewall or proxy device.</span></span>  <span data-ttu-id="49b6e-175">Nesse caso, você precisará Olá tooset *SourceAddressPrefix* valor diferente de tooa - por exemplo hello IP atender de desenvolvedor ou implantação de máquinas em qual FTP clientes estão sendo executado.</span><span class="sxs-lookup"><span data-stu-id="49b6e-175">In this case you will need tooset hello *SourceAddressPrefix* tooa different value - for example hello IP address range of developer or deployment machines on which FTP clients are running.</span></span> 

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT FTPCtrl" -Type Inbound -Priority 400 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '21' -Protocol TCP
    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT FTPDataRange" -Type Inbound -Priority 500 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '10001-10020' -Protocol TCP

<span data-ttu-id="49b6e-176">(**Observação:** intervalo de porta de canal de dados Olá pode ser alterados durante o período de visualização hello.)</span><span class="sxs-lookup"><span data-stu-id="49b6e-176">(**Note:**  hello data channel port range may change during hello preview period.)</span></span>

<span data-ttu-id="49b6e-177">Se a depuração remota com o Visual Studio for usado, Olá regras a seguir demonstram como acessar toogrant.</span><span class="sxs-lookup"><span data-stu-id="49b6e-177">If remote debugging with Visual Studio is used, hello following rules demonstrate how toogrant access.</span></span>  <span data-ttu-id="49b6e-178">Há uma regra separada para cada versão do Visual Studio para a qual há suporte, já que cada versão usa uma porta diferente para a depuração remota.</span><span class="sxs-lookup"><span data-stu-id="49b6e-178">There is a separate rule for each supported version of Visual Studio since each version uses a different port for remote debugging.</span></span>  <span data-ttu-id="49b6e-179">Assim como acontece com acesso ao FTP, o tráfego de depuração remota pode não fluir corretamente por meio de um dispositivo de proxy ou WAF tradicional.</span><span class="sxs-lookup"><span data-stu-id="49b6e-179">As with FTP access, remote debugging traffic may not flow properly through a traditional WAF or proxy device.</span></span>  <span data-ttu-id="49b6e-180">Olá *SourceAddressPrefix* em vez disso, pode definir toohello intervalo de endereços IP dos computadores de desenvolvedor executando o Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="49b6e-180">hello *SourceAddressPrefix* can instead be set toohello IP address range of developer machines running Visual Studio.</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT RemoteDebuggingVS2012" -Type Inbound -Priority 600 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '4016' -Protocol TCP
    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT RemoteDebuggingVS2013" -Type Inbound -Priority 700 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '4018' -Protocol TCP
    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT RemoteDebuggingVS2015" -Type Inbound -Priority 800 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '4020' -Protocol TCP

## <a name="assigning-a-network-security-group-tooa-subnet"></a><span data-ttu-id="49b6e-181">Atribuindo uma sub-rede de tooa do grupo de segurança de rede</span><span class="sxs-lookup"><span data-stu-id="49b6e-181">Assigning a Network Security Group tooa Subnet</span></span>
<span data-ttu-id="49b6e-182">Um grupo de segurança de rede tem uma regra de segurança padrão que nega acesso tooall o tráfego externo.</span><span class="sxs-lookup"><span data-stu-id="49b6e-182">A network security group has a default security rule which denies access tooall external traffic.</span></span>  <span data-ttu-id="49b6e-183">Olá o resultado da combinação de regras de segurança de rede Olá descritas acima e Olá bloqueando o tráfego de entrada de regra de segurança padrão, que apenas o tráfego de intervalos de endereço de origem associado a um *permitir* ação poderão tráfego de toosend tooapps em execução em um ambiente de serviço de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="49b6e-183">hello result from combining hello network security rules described above, and hello default security rule blocking inbound traffic, is that only traffic from source address ranges associated with an *Allow* action will be able toosend traffic tooapps running in an App Service Environment.</span></span>

<span data-ttu-id="49b6e-184">Depois que um grupo de segurança de rede é preenchido com as regras de segurança, ela deve toobe atribuído toohello sub-rede contendo Olá ambiente de serviço de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="49b6e-184">After a network security group is populated with security rules, it needs toobe assigned toohello subnet containing hello App Service Environment.</span></span>  <span data-ttu-id="49b6e-185">comando de atribuição Olá faz referência a ambos os nome de saudação da rede virtual hello, onde reside a saudação ambiente de serviço de aplicativo, bem como nome de saudação da sub-rede Olá onde Olá ambiente de serviço de aplicativo foi criado.</span><span class="sxs-lookup"><span data-stu-id="49b6e-185">hello assignment command references both hello name of hello virtual network where hello App Service Environment resides, as well as hello name of hello subnet where hello App Service Environment was created.</span></span>  

<span data-ttu-id="49b6e-186">exemplo Hello abaixo mostra um grupo de segurança de rede que está sendo atribuído tooa sub-rede e a rede virtual:</span><span class="sxs-lookup"><span data-stu-id="49b6e-186">hello example below shows a network security group being assigned tooa subnet and virtual network:</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityGroupToSubnet -VirtualNetworkName 'testVNet' -SubnetName 'Subnet-test'

<span data-ttu-id="49b6e-187">Assim que tiver êxito de atribuição de grupo de segurança de rede hello (atribuição de saudação é as operações de longa execução e pode levar alguns toocomplete de minutos), apenas a correspondência de tráfego de entrada *permitir* regras com êxito alcançará aplicativos Olá aplicativo Ambiente de serviço.</span><span class="sxs-lookup"><span data-stu-id="49b6e-187">Once hello network security group assignment succeeds (hello assignment is a long-running operations and can take a few minutes toocomplete), only inbound traffic matching *Allow* rules will successfully reach apps in hello App Service Environment.</span></span>

<span data-ttu-id="49b6e-188">Para Olá integridade o exemplo a seguir mostra como tooremove e, portanto, a segurança de rede Olá associar DIS agrupar da sub-rede hello:</span><span class="sxs-lookup"><span data-stu-id="49b6e-188">For completeness hello following example shows how tooremove and thus dis-associate hello network security group from hello subnet:</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Remove-AzureNetworkSecurityGroupFromSubnet -VirtualNetworkName 'testVNet' -SubnetName 'Subnet-test'

## <a name="special-considerations-for-explicit-ip-ssl"></a><span data-ttu-id="49b6e-189">Considerações especiais para IP-SSL explícito</span><span class="sxs-lookup"><span data-stu-id="49b6e-189">Special Considerations for Explicit IP-SSL</span></span>
<span data-ttu-id="49b6e-190">Se um aplicativo está configurado com um endereço de IP SSL explícito (aplicável *somente* tooASEs que têm um VIP público), em vez de usar o endereço IP de padrão de saudação do hello ambiente de serviço de aplicativo, HTTP e HTTPS tráfego na sub-rede Olá em um conjunto diferente de portas diferentes portas 80 e 443.</span><span class="sxs-lookup"><span data-stu-id="49b6e-190">If an app is configured with an explicit IP-SSL address (applicable *only* tooASEs that have a public VIP), instead of using hello default IP address of hello App Service Environment, both HTTP and HTTPS traffic flows into hello subnet over a different set of ports other than ports 80 and 443.</span></span>

<span data-ttu-id="49b6e-191">par de saudação individual de portas usadas por cada endereço IP SSL pode ser encontrado na interface de usuário do portal Olá da folha UX detalhes do ambiente de serviço de aplicativo hello.</span><span class="sxs-lookup"><span data-stu-id="49b6e-191">hello individual pair of ports used by each IP-SSL address can be found in hello portal user interface from hello App Service Environment's details UX blade.</span></span>  <span data-ttu-id="49b6e-192">Selecione "Todas as configurações"--> "Endereços IP".</span><span class="sxs-lookup"><span data-stu-id="49b6e-192">Select "All settings" --> "IP addresses".</span></span>  <span data-ttu-id="49b6e-193">folha Hello "endereços IP" mostra uma tabela de todos os endereços IP SSL configurados explicitamente para Olá ambiente de serviço de aplicativo, junto com o par de porta especial de saudação tooroute usado tráfego HTTP e HTTPS associado com cada endereço IP SSL.</span><span class="sxs-lookup"><span data-stu-id="49b6e-193">hello "IP addresses" blade shows a table of all explicitly configured IP-SSL addresses for hello App Service Environment, along with hello special port pair that is used tooroute HTTP and HTTPS traffic associated with each IP-SSL address.</span></span>  <span data-ttu-id="49b6e-194">É esse par de porta que precisa toobe usado para parâmetros de DestinationPortRange Olá ao configurar as regras em um grupo de segurança de rede.</span><span class="sxs-lookup"><span data-stu-id="49b6e-194">It is this port pair that needs toobe used for hello DestinationPortRange parameters when configuring rules in a network security group.</span></span>

<span data-ttu-id="49b6e-195">Quando um aplicativo em uma ASE é configurado toouse SSL de IP, clientes externos não verão e não é necessário tooworry sobre o mapeamento de par Olá porta especial.</span><span class="sxs-lookup"><span data-stu-id="49b6e-195">When an app on an ASE is configured toouse IP-SSL, external customers will not see and do not need tooworry about hello special port pair mapping.</span></span>  <span data-ttu-id="49b6e-196">Aplicativos de toohello tráfego fluirá normalmente endereço de IP SSL toohello configurado.</span><span class="sxs-lookup"><span data-stu-id="49b6e-196">Traffic toohello apps will flow normally toohello configured IP-SSL address.</span></span>  <span data-ttu-id="49b6e-197">par de porta especial Olá tradução toohello automaticamente acontece internamente durante segmento final de saudação do roteamento de tráfego em Olá recipiente de sub-rede de Olá ASE.</span><span class="sxs-lookup"><span data-stu-id="49b6e-197">hello translation toohello special port pair automatically happens internally during hello final leg of routing traffic into hello subnet containing hello ASE.</span></span> 

## <a name="getting-started"></a><span data-ttu-id="49b6e-198">Introdução</span><span class="sxs-lookup"><span data-stu-id="49b6e-198">Getting started</span></span>
<span data-ttu-id="49b6e-199">tooget iniciado com ambientes de serviço de aplicativo, consulte [Introdução tooApp ambiente de serviço][IntroToAppServiceEnvironment]</span><span class="sxs-lookup"><span data-stu-id="49b6e-199">tooget started with App Service Environments, see [Introduction tooApp Service Environment][IntroToAppServiceEnvironment]</span></span>

<span data-ttu-id="49b6e-200">Todos os artigos e como-para para ambientes de serviço de aplicativo estão disponíveis no hello [Leiame para ambientes de serviço de aplicativo](../app-service/app-service-app-service-environments-readme.md).</span><span class="sxs-lookup"><span data-stu-id="49b6e-200">All articles and How-To's for App Service Environments are available in hello [README for Application Service Environments](../app-service/app-service-app-service-environments-readme.md).</span></span>

<span data-ttu-id="49b6e-201">Para obter detalhes sobre aplicativos toobackend recurso uma conexão segura de um ambiente de serviço de aplicativo, consulte [tooBackend recursos uma conexão segura de um ambiente de serviço de aplicativo][SecurelyConnecttoBackend]</span><span class="sxs-lookup"><span data-stu-id="49b6e-201">For details around apps securely connecting toobackend resource from an App Service Environment, see [Securely connecting tooBackend resources from an App Service Environment][SecurelyConnecttoBackend]</span></span>

<span data-ttu-id="49b6e-202">Para obter mais informações sobre a plataforma do serviço de aplicativo do Azure hello, consulte [do serviço de aplicativo do Azure][AzureAppService].</span><span class="sxs-lookup"><span data-stu-id="49b6e-202">For more information about hello Azure App Service platform, see [Azure App Service][AzureAppService].</span></span>

[!INCLUDE [app-service-web-whats-changed](../../includes/app-service-web-whats-changed.md)]

[!INCLUDE [app-service-web-try-app-service](../../includes/app-service-web-try-app-service.md)]

<!-- LINKS -->
[virtualnetwork]: https://azure.microsoft.com/documentation/articles/virtual-networks-faq/
[HowToCreateAnAppServiceEnvironment]: http://azure.microsoft.com/documentation/articles/app-service-web-how-to-create-an-app-service-environment/
[NetworkSecurityGroups]: https://azure.microsoft.com/documentation/articles/virtual-networks-nsg/
[AzureAppService]: http://azure.microsoft.com/documentation/articles/app-service-value-prop-what-is/
[IntroToAppServiceEnvironment]:  http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-intro/
[SecurelyConnecttoBackend]:  http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-securely-connecting-to-backend-resources/
[NewPortal]:  https://portal.azure.com  

<!-- IMAGES -->

