---
title: "Configurar Autenticação do Azure Active Directory – SQL| Microsoft Docs"
description: "Saiba como se conectar ao Banco de Dados SQL e ao SQL Data Warehouse usando a autenticação do Azure Active Directory."
services: sql-database
documentationcenter: 
author: BYHAM
manager: jhubbard
editor: 
tags: 
ms.assetid: 7e2508a1-347e-4f15-b060-d46602c5ce7e
ms.service: sql-database
ms.custom: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 07/10/2017
ms.author: rickbyh
ms.openlocfilehash: 61a52813769891aa63373437e9300d4f8f47fab2
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/18/2017
---
# <a name="configure-and-manage-azure-active-directory-authentication-with-sql-database-or-sql-data-warehouse"></a><span data-ttu-id="7b243-103">Configurar e gerenciar o Azure Active Directory para autenticação com o Banco de Dados SQL ou o SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="7b243-103">Configure and manage Azure Active Directory authentication with SQL Database or SQL Data Warehouse</span></span>

<span data-ttu-id="7b243-104">Este artigo mostra como criar e preencher o Azure AD e, em seguida, usar o Azure AD com o Banco de Dados SQL do Azure e o SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="7b243-104">This article shows you how to create and populate Azure AD, and then use Azure AD with Azure SQL Database and SQL Data Warehouse.</span></span> <span data-ttu-id="7b243-105">Para obter uma visão geral, consulte [Autenticação do Azure Active Directory](sql-database-aad-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="7b243-105">For an overview, see [Azure Active Directory Authentication](sql-database-aad-authentication.md).</span></span>

>  [!NOTE]  
>  <span data-ttu-id="7b243-106">Não há suporte para conectar ao SQL Server em execução em uma VM do Azure usando uma conta do Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="7b243-106">Connecting to SQL Server running on an Azure VM is not supported using an Azure Active Directory account.</span></span> <span data-ttu-id="7b243-107">Use um conta de domínio do Active Directory.</span><span class="sxs-lookup"><span data-stu-id="7b243-107">Use a domain Active Directory account instead.</span></span>

## <a name="create-and-populate-an-azure-ad"></a><span data-ttu-id="7b243-108">Criar e popular um Azure AD</span><span class="sxs-lookup"><span data-stu-id="7b243-108">Create and populate an Azure AD</span></span>
<span data-ttu-id="7b243-109">Crie um Azure AD e popule-o com usuários e grupos.</span><span class="sxs-lookup"><span data-stu-id="7b243-109">Create an Azure AD and populate it with users and groups.</span></span> <span data-ttu-id="7b243-110">O Azure AD pode ser o domínio gerenciado pelo Azure AD no domínio inicial.</span><span class="sxs-lookup"><span data-stu-id="7b243-110">Azure AD can be the initial domain Azure AD managed domain.</span></span> <span data-ttu-id="7b243-111">O Azure AD também pode ser um Active Directory Domain Services local federado com o Azure AD.</span><span class="sxs-lookup"><span data-stu-id="7b243-111">Azure AD can also be an on-premises Active Directory Domain Services that is federated with the Azure AD.</span></span>

<span data-ttu-id="7b243-112">Para obter mais informações, consulte [Integrando suas identidades locais no Azure Active Directory](../active-directory/active-directory-aadconnect.md), [Adicionar seu próprio nome de domínio ao Azure AD](../active-directory/active-directory-add-domain.md), [O Microsoft Azure agora dá suporte à federação com o Windows Server Active Directory](https://azure.microsoft.com/blog/2012/11/28/windows-azure-now-supports-federation-with-windows-server-active-directory/), [Administrando seu diretório do Azure AD](https://msdn.microsoft.com/library/azure/hh967611.aspx), [Gerenciar o Azure AD usando o Windows PowerShell](/powershell/azure/overview?view=azureadps-2.0) e [Portas e protocolos necessários para a identidade híbrida](../active-directory/active-directory-aadconnect-ports.md).</span><span class="sxs-lookup"><span data-stu-id="7b243-112">For more information, see [Integrating your on-premises identities with Azure Active Directory](../active-directory/active-directory-aadconnect.md), [Add your own domain name to Azure AD](../active-directory/active-directory-add-domain.md), [Microsoft Azure now supports federation with Windows Server Active Directory](https://azure.microsoft.com/blog/2012/11/28/windows-azure-now-supports-federation-with-windows-server-active-directory/), [Administering your Azure AD directory](https://msdn.microsoft.com/library/azure/hh967611.aspx), [Manage Azure AD using Windows PowerShell](/powershell/azure/overview?view=azureadps-2.0), and [Hybrid Identity Required Ports and Protocols](../active-directory/active-directory-aadconnect-ports.md).</span></span>

## <a name="optional-associate-or-change-the-active-directory-that-is-currently-associated-with-your-azure-subscription"></a><span data-ttu-id="7b243-113">Opcional: associar ou alterar o Active Directory que está associado atualmente à sua Assinatura do Azure</span><span class="sxs-lookup"><span data-stu-id="7b243-113">Optional: Associate or change the active directory that is currently associated with your Azure Subscription</span></span>
<span data-ttu-id="7b243-114">Para associar seu banco de dados ao diretório do AD do Azure para sua organização, torne o diretório um diretório confiável para a assinatura do Azure que hospeda o banco de dados.</span><span class="sxs-lookup"><span data-stu-id="7b243-114">To associate your database with the Azure AD directory for your organization, make the directory a trusted directory for the Azure subscription hosting the database.</span></span> <span data-ttu-id="7b243-115">Para saber mais sobre as assinaturas do Azure, consulte [Como as assinaturas do Azure são associadas ao Azure AD](https://msdn.microsoft.com/library/azure/dn629581.aspx).</span><span class="sxs-lookup"><span data-stu-id="7b243-115">For more information, see [How Azure subscriptions are associated with Azure AD](https://msdn.microsoft.com/library/azure/dn629581.aspx).</span></span>

<span data-ttu-id="7b243-116">**Informações adicionais:** cada assinatura do Azure tem uma relação de confiança com uma instância do AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="7b243-116">**Additional information:** Every Azure subscription has a trust relationship with an Azure AD instance.</span></span> <span data-ttu-id="7b243-117">Isso significa que ela confia que esse diretório autentique usuários, serviços e dispositivos.</span><span class="sxs-lookup"><span data-stu-id="7b243-117">This means that it trusts that directory to authenticate users, services, and devices.</span></span> <span data-ttu-id="7b243-118">Várias assinaturas podem confiar no mesmo diretório, mas uma única assinatura confia em apenas um diretório.</span><span class="sxs-lookup"><span data-stu-id="7b243-118">Multiple subscriptions can trust the same directory, but a subscription trusts only one directory.</span></span> <span data-ttu-id="7b243-119">Você pode ver qual diretório é confiável para sua assinatura na guia **Configurações** em [https://manage.windowsazure.com/](https://manage.windowsazure.com/).</span><span class="sxs-lookup"><span data-stu-id="7b243-119">You can see which directory is trusted by your subscription under the **Settings** tab at [https://manage.windowsazure.com/](https://manage.windowsazure.com/).</span></span> <span data-ttu-id="7b243-120">Essa relação de confiança que uma assinatura tem com um diretório é diferente da relação que uma assinatura tem com todos os outros recursos no Azure (sites, bancos de dados e assim por diante), que são mais similares a recursos filho de uma assinatura.</span><span class="sxs-lookup"><span data-stu-id="7b243-120">This trust relationship that a subscription has with a directory is unlike the relationship that a subscription has with all other resources in Azure (websites, databases, and so on), which are more like child resources of a subscription.</span></span> <span data-ttu-id="7b243-121">Se uma assinatura expira, o acesso a esses outros recursos associados à assinatura também pára.</span><span class="sxs-lookup"><span data-stu-id="7b243-121">If a subscription expires, then access to those other resources associated with the subscription also stops.</span></span> <span data-ttu-id="7b243-122">Mas o diretório permanece no Azure e você pode associar outra assinatura a ele, além de continuar a gerenciar os usuários do diretório.</span><span class="sxs-lookup"><span data-stu-id="7b243-122">But the directory remains in Azure, and you can associate another subscription with that directory and continue to manage the directory users.</span></span> <span data-ttu-id="7b243-123">Para obter mais informações sobre recursos, consulte [Noções básicas sobre o acesso a recursos no Azure](https://msdn.microsoft.com/library/azure/dn584083.aspx).</span><span class="sxs-lookup"><span data-stu-id="7b243-123">For more information about resources, see [Understanding resource access in Azure](https://msdn.microsoft.com/library/azure/dn584083.aspx).</span></span>

<span data-ttu-id="7b243-124">Os procedimentos a seguir mostram como alterar o diretório associado para uma determinada assinatura.</span><span class="sxs-lookup"><span data-stu-id="7b243-124">The following procedures show you how to change the associated directory for a given subscription.</span></span>
1. <span data-ttu-id="7b243-125">Conecte-se ao seu [portal clássico do Azure](https://manage.windowsazure.com/) usando um administrador de assinatura do Azure.</span><span class="sxs-lookup"><span data-stu-id="7b243-125">Connect to your [Azure Classic Portal](https://manage.windowsazure.com/) by using an Azure subscription administrator.</span></span>
2. <span data-ttu-id="7b243-126">Na faixa esquerda, selecione **CONFIGURAÇÕES**.</span><span class="sxs-lookup"><span data-stu-id="7b243-126">On the left banner, select **SETTINGS**.</span></span>
3. <span data-ttu-id="7b243-127">Suas assinaturas aparecem na tela de configurações.</span><span class="sxs-lookup"><span data-stu-id="7b243-127">Your subscriptions appear in the settings screen.</span></span> <span data-ttu-id="7b243-128">Se a assinatura desejada não for exibida, clique em **Assinaturas** na parte superior, exiba a caixa da lista suspensa **FILTRAR POR DIRETÓRIO**, selecione o diretório que contém suas assinaturas e clique em **APLICAR**.</span><span class="sxs-lookup"><span data-stu-id="7b243-128">If the desired subscription does not appear, click **Subscriptions** at the top, drop down the **FILTER BY DIRECTORY** box and select the directory that contains your subscriptions, and then click **APPLY**.</span></span>
   
    ![selecione a assinatura][4]
4. <span data-ttu-id="7b243-130">Na área **configurações**, clique em sua assinatura e em **EDITAR DIRETÓRIO** na parte inferior da página.</span><span class="sxs-lookup"><span data-stu-id="7b243-130">In the **settings** area, click your subscription, and then click  **EDIT DIRECTORY** at the bottom of the page.</span></span>
   
    ![ad-settings-portal][5]
5. <span data-ttu-id="7b243-132">Na caixa **EDITAR DIRETÓRIO** , selecione o Azure Active Directory associado ao SQL Server ou ao SQL Data Warehouse e clique na seta para avançar.</span><span class="sxs-lookup"><span data-stu-id="7b243-132">In the **EDIT DIRECTORY** box, select the Azure Active Directory that is associated with your SQL Server or SQL Data Warehouse, and then click the arrow for next.</span></span>
   
    ![edit-directory-select][6]
6. <span data-ttu-id="7b243-134">Na caixa de diálogo de Mapeamento de diretório **CONFIRMAR**, confirme se “**Todos os coadministradores serão removidos**”.</span><span class="sxs-lookup"><span data-stu-id="7b243-134">In the **CONFIRM** directory Mapping dialog box, confirm that "**All co-administrators will be removed.**"</span></span>
   
    ![edit-directory-confirm][7]
7. <span data-ttu-id="7b243-136">Clique na marca de verificação para recarregar o portal.</span><span class="sxs-lookup"><span data-stu-id="7b243-136">Click the check to reload the portal.</span></span>

   > [!NOTE]
   > <span data-ttu-id="7b243-137">Quando você muda o diretório, o acesso a todos os coadministradores, usuários e grupos do AD do Azure e usuários de recursos reserva recursos com backup em diretório serão removidos e eles não terão mais acesso a essa assinatura nem a seus recursos.</span><span class="sxs-lookup"><span data-stu-id="7b243-137">When you change the directory, access to all co-administrators, Azure AD users and groups, and directory-backed resource users are removed and they no longer have access to this subscription or its resources.</span></span> <span data-ttu-id="7b243-138">Apenas você, como um administrador de serviços, pode configurar o acesso para entidades de segurança com base no novo diretório.</span><span class="sxs-lookup"><span data-stu-id="7b243-138">Only you, as a service administrator, can configure access for principals based on the new directory.</span></span> <span data-ttu-id="7b243-139">Essa alteração pode levar bastante tempo para se propagar para todos os recursos.</span><span class="sxs-lookup"><span data-stu-id="7b243-139">This change might take a substantial amount of time to propagate to all resources.</span></span> <span data-ttu-id="7b243-140">Alterar o diretório também altera o administrador do Azure AD para o Banco de Dados SQL e SQL Data Warehouse e remove a permissão de acesso ao banco de dados para quaisquer usuários existentes do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="7b243-140">Changing the directory, also changes the Azure AD administrator for SQL Database and SQL Data Warehouse and disallow database access for any existing Azure AD users.</span></span> <span data-ttu-id="7b243-141">O administrador do AD do Azure deve ser definido novamente (conforme descrito abaixo) e novos usuários do Azure devem ser criados.</span><span class="sxs-lookup"><span data-stu-id="7b243-141">The Azure AD admin must be reset (as described below) and new Azure AD users must be created.</span></span>
   >  

## <a name="create-an-azure-ad-administrator-for-azure-sql-server"></a><span data-ttu-id="7b243-142">Criar um administrador do Azure AD para o Azure SQL Server</span><span class="sxs-lookup"><span data-stu-id="7b243-142">Create an Azure AD administrator for Azure SQL server</span></span>
<span data-ttu-id="7b243-143">Cada Servidor do Azure SQL Server (que hospeda um Banco de dados SQL ou SQL Data Warehouse) começa com uma única conta de administrador do servidor, que é o administrador de todo o Azure SQL Server.</span><span class="sxs-lookup"><span data-stu-id="7b243-143">Each Azure SQL server (which hosts a SQL Database or SQL Data Warehouse) starts with a single server administrator account that is the administrator of the entire Azure SQL server.</span></span> <span data-ttu-id="7b243-144">Um segundo administrador do SQL Server deve ser criado, que é uma conta do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="7b243-144">A second SQL Server administrator must be created, that is an Azure AD account.</span></span> <span data-ttu-id="7b243-145">Essa entidade de segurança é criada como um usuário de banco de dados independente no banco de dados mestre.</span><span class="sxs-lookup"><span data-stu-id="7b243-145">This principal is created as a contained database user in the master database.</span></span> <span data-ttu-id="7b243-146">Como administradores, as contas de administrador do servidor são membros da função **db_owner** em todos os bancos de dados de usuários e inserem cada banco de dados de usuário como o usuário **dbo**.</span><span class="sxs-lookup"><span data-stu-id="7b243-146">As administrators, the server administrator accounts are members of the **db_owner** role in every user database, and enter each user database as the **dbo** user.</span></span> <span data-ttu-id="7b243-147">Para obter mais informações sobre as contas do administrador do servidor, veja [Gerenciando Bancos de Dados e Logons no Banco de Dados SQL do Azure](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="7b243-147">For more information about the server administrator accounts, see [Managing Databases and Logins in Azure SQL Database](sql-database-manage-logins.md).</span></span>

<span data-ttu-id="7b243-148">Ao usar o Azure Active Directory com a Replicação Geográfica, o administrador do Azure Active Directory deverá ser configurado para os servidores primários e secundários.</span><span class="sxs-lookup"><span data-stu-id="7b243-148">When using Azure Active Directory with geo-replication, the Azure Active Directory administrator must be configured for both the primary and the secondary servers.</span></span> <span data-ttu-id="7b243-149">Se um servidor não tiver um administrador do Azure Active Directory, os usuários e logons do Azure Active Directory obterão um erro de servidor "Não é possível conectar-se".</span><span class="sxs-lookup"><span data-stu-id="7b243-149">If a server does not have an Azure Active Directory administrator, then Azure Active Directory logins and users receive a "Cannot connect" to server error.</span></span>

> [!NOTE]
> <span data-ttu-id="7b243-150">Usuários que não são baseados em uma conta do Azure AD (incluindo a conta de administrador do Azure SQL Server) não podem criar usuários baseados no Azure AD porque eles não têm permissão para validar os usuários do banco de dados proposto com o Azure AD.</span><span class="sxs-lookup"><span data-stu-id="7b243-150">Users that are not based on an Azure AD account (including the Azure SQL server administrator account), cannot create Azure AD-based users, because they do not have permission to validate proposed database users with the Azure AD.</span></span>
> 

## <a name="provision-an-azure-active-directory-administrator-for-your-azure-sql-server"></a><span data-ttu-id="7b243-151">Provisionar um administrador do Azure Active Directory para o Azure SQL Server</span><span class="sxs-lookup"><span data-stu-id="7b243-151">Provision an Azure Active Directory administrator for your Azure SQL server</span></span>

<span data-ttu-id="7b243-152">Os dois procedimentos a seguir mostram como provisionar um administrador do Azure Active Directory para seu servidor do Azure SQL Server no Portal do Azure e usando o PowerShell.</span><span class="sxs-lookup"><span data-stu-id="7b243-152">The following two procedures show you how to provision an Azure Active Directory administrator for your Azure SQL server in the Azure portal and by using PowerShell.</span></span>

### <a name="azure-portal"></a><span data-ttu-id="7b243-153">Portal do Azure</span><span class="sxs-lookup"><span data-stu-id="7b243-153">Azure portal</span></span>
1. <span data-ttu-id="7b243-154">No [Portal do Azure](https://portal.azure.com/), no canto superior direito, clique na conexão para exibir uma lista suspensa com os Active Directories possíveis.</span><span class="sxs-lookup"><span data-stu-id="7b243-154">In the [Azure portal](https://portal.azure.com/), in the upper-right corner, click your connection to drop down a list of possible Active Directories.</span></span> <span data-ttu-id="7b243-155">Escolha o Active Directory correto como o AD do Azure padrão.</span><span class="sxs-lookup"><span data-stu-id="7b243-155">Choose the correct Active Directory as the default Azure AD.</span></span> <span data-ttu-id="7b243-156">Esta etapa vincula a associação de assinatura no Active Directory ao Azure SQL Server, certificando-se que a mesma assinatura é usada tanto para o Azure AD quanto para o SQL Server.</span><span class="sxs-lookup"><span data-stu-id="7b243-156">This step links the subscription association with Active Directory with Azure SQL server making sure that the same subscription is used for both Azure AD and SQL Server.</span></span> <span data-ttu-id="7b243-157">(O Azure SQL Server pode hospedar o Banco de Dados SQL do Azure ou o SQL Data Warehouse do Azure.)</span><span class="sxs-lookup"><span data-stu-id="7b243-157">(The Azure SQL server can be hosting either Azure SQL Database or Azure SQL Data Warehouse.)</span></span>   
    <span data-ttu-id="7b243-158">![choose-ad][8]</span><span class="sxs-lookup"><span data-stu-id="7b243-158">![choose-ad][8]</span></span>   
    
2. <span data-ttu-id="7b243-159">Na faixa à esquerda, selecione **SQL Servers**, selecione seu **SQL Server** e, na folha **SQL Server**, clique em **Administrador do Azure Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="7b243-159">In the left banner select **SQL servers**, select your **SQL server**, and then in the **SQL Server** blade, click **Active Directory admin**.</span></span>   
3. <span data-ttu-id="7b243-160">Na folha **Administrador do Active Directory**, clique em **Definir administrador**.</span><span class="sxs-lookup"><span data-stu-id="7b243-160">In the **Active Directory admin** blade, click **Set admin**.</span></span>   
    <span data-ttu-id="7b243-161">![selecionar active directory](./media/sql-database-aad-authentication/select-active-directory.png)</span><span class="sxs-lookup"><span data-stu-id="7b243-161">![select active directory](./media/sql-database-aad-authentication/select-active-directory.png)</span></span>  
    
4. <span data-ttu-id="7b243-162">Na folha **Adicionar administrador**, procure um usuário, selecione o usuário ou grupo que será um administrador e clique em **Selecionar**.</span><span class="sxs-lookup"><span data-stu-id="7b243-162">In the **Add admin** blade, search for a user, select the user or group to be an administrator, and then click **Select**.</span></span> <span data-ttu-id="7b243-163">(A folha Administrador do Active Directory mostra todos os membros e grupos do Active Directory.</span><span class="sxs-lookup"><span data-stu-id="7b243-163">(The Active Directory admin blade shows all members and groups of your Active Directory.</span></span> <span data-ttu-id="7b243-164">Usuários ou grupos que estão esmaecidos não podem ser selecionados porque eles não têm suporte como administradores do AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="7b243-164">Users or groups that are grayed out cannot be selected because they are not supported as Azure AD administrators.</span></span> <span data-ttu-id="7b243-165">(Consulte a lista de administradores com suporte na seção **Limitações e recursos do Azure AD** de [Usar o Azure Active Directory para autenticação com o Banco de Dados SQL ou o SQL Data Warehouse](sql-database-aad-authentication.md).) O RBAC (controle de acesso baseado em função) aplica-se somente ao portal e não é propagado para o SQL Server.</span><span class="sxs-lookup"><span data-stu-id="7b243-165">(See the list of supported admins in the **Azure AD Features and Limitations** section of [Use Azure Active Directory Authentication for authentication with SQL Database or SQL Data Warehouse](sql-database-aad-authentication.md).) Role-based access control (RBAC) applies only to the portal and is not propagated to SQL Server.</span></span>   
    <span data-ttu-id="7b243-166">![selecionar administrador](./media/sql-database-aad-authentication/select-admin.png)</span><span class="sxs-lookup"><span data-stu-id="7b243-166">![select admin](./media/sql-database-aad-authentication/select-admin.png)</span></span>  
    
5. <span data-ttu-id="7b243-167">Na parte superior da folha **Administrador do Active Directory**, clique em **SALVAR**.</span><span class="sxs-lookup"><span data-stu-id="7b243-167">At the top of the **Active Directory admin** blade, click **SAVE**.</span></span>   
    <span data-ttu-id="7b243-168">![salvar administrador](./media/sql-database-aad-authentication/save-admin.png)</span><span class="sxs-lookup"><span data-stu-id="7b243-168">![save admin](./media/sql-database-aad-authentication/save-admin.png)</span></span>   

<span data-ttu-id="7b243-169">O processo de alteração do administrador pode levar vários minutos.</span><span class="sxs-lookup"><span data-stu-id="7b243-169">The process of changing the administrator may take several minutes.</span></span> <span data-ttu-id="7b243-170">O novo administrador aparece na caixa **Administrador do Active Directory** .</span><span class="sxs-lookup"><span data-stu-id="7b243-170">Then the new administrator appears in the **Active Directory admin** box.</span></span>

   > [!NOTE]
   > <span data-ttu-id="7b243-171">Ao configurar o administrador do Azure AD, o novo nome de administrador (usuário ou grupo) não pode já estar presente no banco de dados mestre virtual como um usuário de autenticação do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="7b243-171">When setting up the Azure AD admin, the new admin name (user or group) cannot already be present in the virtual master database as a SQL Server authentication user.</span></span> <span data-ttu-id="7b243-172">Se presente, a configuração de administração do AD do Azure falhará, revertendo sua criação e indicando que esse administrador (nome) já existe.</span><span class="sxs-lookup"><span data-stu-id="7b243-172">If present, the Azure AD admin setup will fail; rolling back its creation and indicating that such an admin (name) already exists.</span></span> <span data-ttu-id="7b243-173">Como esse usuário de autenticação do SQL Server não é parte do Azure AD, qualquer esforço para se conectar ao servidor usando a autenticação do Azure AD falhará.</span><span class="sxs-lookup"><span data-stu-id="7b243-173">Since such a SQL Server authentication user is not part of the Azure AD, any effort to connect to the server using Azure AD authentication fails.</span></span>
   > 


<span data-ttu-id="7b243-174">Para remover um Administrador mais tarde, na parte superior da folha **Administrador do Active Directory**, clique em **Remover administrador** e em **Salvar**.</span><span class="sxs-lookup"><span data-stu-id="7b243-174">To later remove an Admin, at the top of the **Active Directory admin** blade, click **Remove admin**, and then click **Save**.</span></span>

### <a name="powershell"></a><span data-ttu-id="7b243-175">PowerShell</span><span class="sxs-lookup"><span data-stu-id="7b243-175">PowerShell</span></span>
<span data-ttu-id="7b243-176">Para executar os cmdlets do PowerShell, você precisa ter o Azure PowerShell instalado e em execução.</span><span class="sxs-lookup"><span data-stu-id="7b243-176">To run PowerShell cmdlets, you need to have Azure PowerShell installed and running.</span></span> <span data-ttu-id="7b243-177">Para obter informações detalhadas, confira [Como instalar e configurar o PowerShell do Azure](/powershell/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="7b243-177">For detailed information, see [How to install and configure Azure PowerShell](/powershell/azure/overview).</span></span>

<span data-ttu-id="7b243-178">Para provisionar um administrador do AD do Azure, execute os seguintes comandos do Azure PowerShell:</span><span class="sxs-lookup"><span data-stu-id="7b243-178">To provision an Azure AD admin, execute the following Azure PowerShell commands:</span></span>

* <span data-ttu-id="7b243-179">Add-AzureRmAccount</span><span class="sxs-lookup"><span data-stu-id="7b243-179">Add-AzureRmAccount</span></span>
* <span data-ttu-id="7b243-180">Select-AzureRmSubscription</span><span class="sxs-lookup"><span data-stu-id="7b243-180">Select-AzureRmSubscription</span></span>

<span data-ttu-id="7b243-181">Cmdlets usados para provisionar e gerenciar o administrador do AD do Azure:</span><span class="sxs-lookup"><span data-stu-id="7b243-181">Cmdlets used to provision and manage Azure AD admin:</span></span>

| <span data-ttu-id="7b243-182">Nome do cmdlet</span><span class="sxs-lookup"><span data-stu-id="7b243-182">Cmdlet name</span></span> | <span data-ttu-id="7b243-183">Descrição</span><span class="sxs-lookup"><span data-stu-id="7b243-183">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="7b243-184">Set-AzureRmSqlServerActiveDirectoryAdministrator</span><span class="sxs-lookup"><span data-stu-id="7b243-184">Set-AzureRmSqlServerActiveDirectoryAdministrator</span></span>](/powershell/module/azurerm.sql/set-azurermsqlserveractivedirectoryadministrator) |<span data-ttu-id="7b243-185">Provisiona um administrador do Azure Active Directory para o Azure SQL Server ou o SQL Data Warehouse do Azure.</span><span class="sxs-lookup"><span data-stu-id="7b243-185">Provisions an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> <span data-ttu-id="7b243-186">(Precisa ser da assinatura atual.)</span><span class="sxs-lookup"><span data-stu-id="7b243-186">(Must be from the current subscription.)</span></span> |
| [<span data-ttu-id="7b243-187">Remove-AzureRmSqlServerActiveDirectoryAdministrator</span><span class="sxs-lookup"><span data-stu-id="7b243-187">Remove-AzureRmSqlServerActiveDirectoryAdministrator</span></span>](/powershell/module/azurerm.sql/remove-azurermsqlserveractivedirectoryadministrator) |<span data-ttu-id="7b243-188">Remove um administrador do Azure Active Directory para o Azure SQL Server ou para o SQL Data Warehouse do Azure.</span><span class="sxs-lookup"><span data-stu-id="7b243-188">Removes an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> |
| [<span data-ttu-id="7b243-189">Get-AzureRmSqlServerActiveDirectoryAdministrator</span><span class="sxs-lookup"><span data-stu-id="7b243-189">Get-AzureRmSqlServerActiveDirectoryAdministrator</span></span>](/powershell/module/azurerm.sql/get-azurermsqlserveractivedirectoryadministrator) |<span data-ttu-id="7b243-190">Retorna informações sobre um administrador do Azure Active Directory atualmente configurado para o Azure SQL Server ou para o SQL Data Warehouse do Azure.</span><span class="sxs-lookup"><span data-stu-id="7b243-190">Returns information about an Azure Active Directory administrator currently configured for the Azure SQL server or Azure SQL Data Warehouse.</span></span> |

<span data-ttu-id="7b243-191">Use o comando get-help do PowerShell para ver mais detalhes sobre cada um desses comandos, por exemplo, ``get-help Set-AzureRmSqlServerActiveDirectoryAdministrator``.</span><span class="sxs-lookup"><span data-stu-id="7b243-191">Use PowerShell command get-help to see more details for each of these commands, for example ``get-help Set-AzureRmSqlServerActiveDirectoryAdministrator``.</span></span>

<span data-ttu-id="7b243-192">O seguinte script provisiona um grupo de administradores do Azure AD chamado **DBA_Group** (ID de objeto `40b79501-b343-44ed-9ce7-da4c8cc7353f`) para o servidor **demo_server** em um grupo de recursos chamado **Group-23**:</span><span class="sxs-lookup"><span data-stu-id="7b243-192">The following script provisions an Azure AD administrator group named **DBA_Group** (object id `40b79501-b343-44ed-9ce7-da4c8cc7353f`) for the **demo_server** server in a resource group named **Group-23**:</span></span>

```
Set-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23"
-ServerName "demo_server" -DisplayName "DBA_Group"
```

<span data-ttu-id="7b243-193">O parâmetro de entrada **DisplayName** aceita o nome de exibição do Azure AD ou o Nome UPN.</span><span class="sxs-lookup"><span data-stu-id="7b243-193">The **DisplayName** input parameter accepts either the Azure AD display name or the User Principal Name.</span></span> <span data-ttu-id="7b243-194">Por exemplo, ``DisplayName="John Smith"`` e ``DisplayName="johns@contoso.com"``.</span><span class="sxs-lookup"><span data-stu-id="7b243-194">For example, ``DisplayName="John Smith"`` and ``DisplayName="johns@contoso.com"``.</span></span> <span data-ttu-id="7b243-195">Para grupos do AD do Azure, há suporte apenas para o nome de exibição do AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="7b243-195">For Azure AD groups only the Azure AD display name is supported.</span></span>

> [!NOTE]
> <span data-ttu-id="7b243-196">O comando ```Set-AzureRmSqlServerActiveDirectoryAdministrator``` do Azure PowerShell não impede que você provisione administradores do Azure AD para usuários sem suporte.</span><span class="sxs-lookup"><span data-stu-id="7b243-196">The Azure PowerShell  command ```Set-AzureRmSqlServerActiveDirectoryAdministrator``` does not prevent you from provisioning Azure AD admins for unsupported users.</span></span> <span data-ttu-id="7b243-197">Um usuário para o qual não há suporte pode ser provisionado, mas não pode se conectar a um banco de dados.</span><span class="sxs-lookup"><span data-stu-id="7b243-197">An unsupported user can be provisioned, but can not connect to a database.</span></span> 
> 

<span data-ttu-id="7b243-198">O seguinte exemplo usa a **ObjectID**opcional:</span><span class="sxs-lookup"><span data-stu-id="7b243-198">The following example uses the optional **ObjectID**:</span></span>

```
Set-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23"
-ServerName "demo_server" -DisplayName "DBA_Group" -ObjectId "40b79501-b343-44ed-9ce7-da4c8cc7353f"
```

> [!NOTE]
> <span data-ttu-id="7b243-199">A **ObjectID** do Azure AD é necessária quando o **DisplayName** não é exclusivo.</span><span class="sxs-lookup"><span data-stu-id="7b243-199">The Azure AD **ObjectID** is required when the **DisplayName** is not unique.</span></span> <span data-ttu-id="7b243-200">Para recuperar os valores de **ObjectID** e **DisplayName**, use a seção do Active Directory do Portal Clássico do Azure e exiba as propriedades de um usuário ou grupo.</span><span class="sxs-lookup"><span data-stu-id="7b243-200">To retrieve the **ObjectID** and **DisplayName** values, use the Active Directory section of Azure Classic Portal, and view the properties of a user or group.</span></span>
> 

<span data-ttu-id="7b243-201">O exemplo a seguir retorna informações sobre o administrador atual do Azure AD para o Azure SQL Server:</span><span class="sxs-lookup"><span data-stu-id="7b243-201">The following example returns information about the current Azure AD admin for Azure SQL server:</span></span>

```
Get-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23" -ServerName "demo_server" | Format-List
```

<span data-ttu-id="7b243-202">O seguinte exemplo remove um administrador do AD do Azure:</span><span class="sxs-lookup"><span data-stu-id="7b243-202">The following example removes an Azure AD administrator:</span></span>

```
Remove-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23" -ServerName "demo_server"
```

<span data-ttu-id="7b243-203">Você também pode provisionar um administrador do Azure Active Directory usando as APIs REST.</span><span class="sxs-lookup"><span data-stu-id="7b243-203">You can also provision an Azure Active Directory Administrator by using the REST APIs.</span></span> <span data-ttu-id="7b243-204">Para saber mais, confira [Referência da API REST de Gerenciamento de Serviços e Operações de Bancos de Dados SQL do Azure](https://msdn.microsoft.com/library/azure/dn505719.aspx)</span><span class="sxs-lookup"><span data-stu-id="7b243-204">For more information, see [Service Management REST API Reference and Operations for Azure SQL Databases Operations for Azure SQL Databases](https://msdn.microsoft.com/library/azure/dn505719.aspx)</span></span>

### <a name="cli"></a><span data-ttu-id="7b243-205">CLI</span><span class="sxs-lookup"><span data-stu-id="7b243-205">CLI</span></span>  
<span data-ttu-id="7b243-206">É possível provisionar um administrador do Azure AD chamando os seguintes comandos da CLI:</span><span class="sxs-lookup"><span data-stu-id="7b243-206">You can also provision an Azure AD admin by calling the following CLI commands:</span></span>
| <span data-ttu-id="7b243-207">Command</span><span class="sxs-lookup"><span data-stu-id="7b243-207">Command</span></span> | <span data-ttu-id="7b243-208">Descrição</span><span class="sxs-lookup"><span data-stu-id="7b243-208">Description</span></span> |
| --- | --- |
|[<span data-ttu-id="7b243-209">az sql server ad-admin create</span><span class="sxs-lookup"><span data-stu-id="7b243-209">az sql server ad-admin create</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#create) |<span data-ttu-id="7b243-210">Provisiona um administrador do Azure Active Directory para o Azure SQL Server ou o SQL Data Warehouse do Azure.</span><span class="sxs-lookup"><span data-stu-id="7b243-210">Provisions an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> <span data-ttu-id="7b243-211">(Precisa ser da assinatura atual.)</span><span class="sxs-lookup"><span data-stu-id="7b243-211">(Must be from the current subscription.)</span></span> |
|[<span data-ttu-id="7b243-212">az sql server ad-admin delete</span><span class="sxs-lookup"><span data-stu-id="7b243-212">az sql server ad-admin delete</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#delete) |<span data-ttu-id="7b243-213">Remove um administrador do Azure Active Directory para o Azure SQL Server ou para o SQL Data Warehouse do Azure.</span><span class="sxs-lookup"><span data-stu-id="7b243-213">Removes an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> |
|[<span data-ttu-id="7b243-214">az sql server ad-admin list</span><span class="sxs-lookup"><span data-stu-id="7b243-214">az sql server ad-admin list</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#list) |<span data-ttu-id="7b243-215">Retorna informações sobre um administrador do Azure Active Directory atualmente configurado para o Azure SQL Server ou para o SQL Data Warehouse do Azure.</span><span class="sxs-lookup"><span data-stu-id="7b243-215">Returns information about an Azure Active Directory administrator currently configured for the Azure SQL server or Azure SQL Data Warehouse.</span></span> |
|[<span data-ttu-id="7b243-216">az sql server ad-admin update</span><span class="sxs-lookup"><span data-stu-id="7b243-216">az sql server ad-admin update</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#update) |<span data-ttu-id="7b243-217">Atualiza o administrador do Active Directory para um Azure SQL Server ou SQL Data Warehouse do Azure.</span><span class="sxs-lookup"><span data-stu-id="7b243-217">Updates the Active Directory administrator for an Azure SQL server or Azure SQL Data Warehouse.</span></span> |

<span data-ttu-id="7b243-218">Para obter mais informações sobre comandos da CLI, consulte [SQL – az sql](https://docs.microsoft.com/cli/azure/sql/server).</span><span class="sxs-lookup"><span data-stu-id="7b243-218">For more information about CLI commands, see [SQL - az sql](https://docs.microsoft.com/cli/azure/sql/server).</span></span>  


## <a name="configure-your-client-computers"></a><span data-ttu-id="7b243-219">Configurar os computadores cliente</span><span class="sxs-lookup"><span data-stu-id="7b243-219">Configure your client computers</span></span>
<span data-ttu-id="7b243-220">Em todos os computadores cliente, dos quais seus aplicativos ou usuários se conectam ao Banco de Dados SQL do Azure ou ao SQL Data Warehouse do Azure usando identidades do Azure AD, você deve instalar o software a seguir:</span><span class="sxs-lookup"><span data-stu-id="7b243-220">On all client machines, from which your applications or users connect to Azure SQL Database or Azure SQL Data Warehouse using Azure AD identities, you must install the following software:</span></span>

* <span data-ttu-id="7b243-221">.NET Framework 4.6 ou posterior de [https://msdn.microsoft.com/library/5a4x27ek.aspx](https://msdn.microsoft.com/library/5a4x27ek.aspx).</span><span class="sxs-lookup"><span data-stu-id="7b243-221">.NET Framework 4.6 or later from [https://msdn.microsoft.com/library/5a4x27ek.aspx](https://msdn.microsoft.com/library/5a4x27ek.aspx).</span></span>
* <span data-ttu-id="7b243-222">A Biblioteca de Autenticação do Active Directory do Azure para SQL Server (**ADALSQL.DLL**) está disponível em vários idiomas (tanto x86 quanto amd64) no centro de download da [Biblioteca de Autenticação do Microsoft Active Directory para Microsoft SQL Server](http://www.microsoft.com/download/details.aspx?id=48742).</span><span class="sxs-lookup"><span data-stu-id="7b243-222">Azure Active Directory Authentication Library for SQL Server (**ADALSQL.DLL**) is available in multiple languages (both x86 and amd64) from the download center at [Microsoft Active Directory Authentication Library for Microsoft SQL Server](http://www.microsoft.com/download/details.aspx?id=48742).</span></span>

<span data-ttu-id="7b243-223">Você pode atender a esses requisitos:</span><span class="sxs-lookup"><span data-stu-id="7b243-223">You can meet these requirements by:</span></span>

* <span data-ttu-id="7b243-224">A instalação do [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) ou o [SQL Server Data Tools para Visual Studio 2015](https://msdn.microsoft.com/library/mt204009.aspx) atende ao requisito do .NET Framework 4.6.</span><span class="sxs-lookup"><span data-stu-id="7b243-224">Installing either [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) or [SQL Server Data Tools for Visual Studio 2015](https://msdn.microsoft.com/library/mt204009.aspx) meets the .NET Framework 4.6 requirement.</span></span>
* <span data-ttu-id="7b243-225">O SSMS instala a versão x86 do **ADALSQL.DLL**.</span><span class="sxs-lookup"><span data-stu-id="7b243-225">SSMS installs the x86 version of **ADALSQL.DLL**.</span></span>
* <span data-ttu-id="7b243-226">O SSDT instala a versão amd64 do **ADALSQL.DLL**.</span><span class="sxs-lookup"><span data-stu-id="7b243-226">SSDT installs the amd64 version of **ADALSQL.DLL**.</span></span>
* <span data-ttu-id="7b243-227">O Visual Studio mais recente dos [Downloads do Visual Studio](https://www.visualstudio.com/downloads/download-visual-studio-vs) atende ao requisito do .NET Framework 4.6, mas não instala a versão amd64 necessária do **ADALSQL.DLL**.</span><span class="sxs-lookup"><span data-stu-id="7b243-227">The latest Visual Studio from [Visual Studio Downloads](https://www.visualstudio.com/downloads/download-visual-studio-vs) meets the .NET Framework 4.6 requirement, but does not install the required amd64 version of **ADALSQL.DLL**.</span></span>

## <a name="create-contained-database-users-in-your-database-mapped-to-azure-ad-identities"></a><span data-ttu-id="7b243-228">Criar usuários de banco de dados independente em seu banco de dados, mapeados para identidades do AD do Azure</span><span class="sxs-lookup"><span data-stu-id="7b243-228">Create contained database users in your database mapped to Azure AD identities</span></span>

<span data-ttu-id="7b243-229">A autenticação do Active Directory do Azure exige que os usuários do banco de dados sejam criados como usuários do banco de dados independente.</span><span class="sxs-lookup"><span data-stu-id="7b243-229">Azure Active Directory authentication requires database users to be created as contained database users.</span></span> <span data-ttu-id="7b243-230">Um usuário de banco de dados independente com base em uma identidade do AD do Azure é um usuário de banco de dados que não tem um logon no banco de dados mestre e que mapeia para uma identidade no diretório do AD do Azure que está associada ao banco de dados.</span><span class="sxs-lookup"><span data-stu-id="7b243-230">A contained database user based on an Azure AD identity, is a database user that does not have a login in the master database, and which maps to an identity in the Azure AD directory that is associated with the database.</span></span> <span data-ttu-id="7b243-231">A identidade do AD do Azure pode ser uma conta de usuário individual ou um grupo.</span><span class="sxs-lookup"><span data-stu-id="7b243-231">The Azure AD identity can be either an individual user account or a group.</span></span> <span data-ttu-id="7b243-232">Para saber mais sobre usuários de bancos de dados independentes, veja [Usuários do bancos de dados independentes - Tornando seu banco de dados portátil](https://msdn.microsoft.com/library/ff929188.aspx).</span><span class="sxs-lookup"><span data-stu-id="7b243-232">For more information about contained database users, see [Contained Database Users- Making Your Database Portable](https://msdn.microsoft.com/library/ff929188.aspx).</span></span>

> [!NOTE]
> <span data-ttu-id="7b243-233">Os usuários do banco de dados (com exceção dos administradores) não podem ser criados usando o portal.</span><span class="sxs-lookup"><span data-stu-id="7b243-233">Database users (with the exception of administrators) cannot be created using portal.</span></span> <span data-ttu-id="7b243-234">Funções de RBAC não são propagadas para o SQL Server, para o Banco de Dados SQL ou para o SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="7b243-234">RBAC roles are not propagated to SQL Server, SQL Database, or SQL Data Warehouse.</span></span> <span data-ttu-id="7b243-235">As funções RBAC do Azure são usadas para gerenciar Recursos do Azure e não se aplicam às permissões de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="7b243-235">Azure RBAC roles are used for managing Azure Resources, and do not apply to database permissions.</span></span> <span data-ttu-id="7b243-236">Por exemplo, a função **Colaborador do SQL Server** não concede acesso para se conectar ao Banco de Dados SQL ou ao SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="7b243-236">For example, the **SQL Server Contributor** role does not grant access to connect to the SQL Database or SQL Data Warehouse.</span></span> <span data-ttu-id="7b243-237">A permissão de acesso deve ser concedida diretamente no banco de dados usando instruções Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="7b243-237">The access permission must be granted directly in the database using Transact-SQL statements.</span></span>
>

<span data-ttu-id="7b243-238">Para criar um usuário de banco de dados independente baseado no Azure AD (que não seja o administrador do servidor proprietário do banco de dados), conecte-se ao banco de dados com uma identidade do Azure AD como um usuário com, no mínimo, a permissão **ALTER ANY USER** .</span><span class="sxs-lookup"><span data-stu-id="7b243-238">To create an Azure AD-based contained database user (other than the server administrator that owns the database), connect to the database with an Azure AD identity, as a user with at least the **ALTER ANY USER** permission.</span></span> <span data-ttu-id="7b243-239">Em seguida, use a sintaxe Transact-SQL a seguir:</span><span class="sxs-lookup"><span data-stu-id="7b243-239">Then use the following Transact-SQL syntax:</span></span>

```
CREATE USER <Azure_AD_principal_name> FROM EXTERNAL PROVIDER;
```

<span data-ttu-id="7b243-240">*nome_UPN_Azure_AD* pode ser o nome UPN de um usuário do Azure AD ou o nome de exibição de um grupo do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="7b243-240">*Azure_AD_principal_name* can be the user principal name of an Azure AD user or the display name for an Azure AD group.</span></span>

<span data-ttu-id="7b243-241">**Exemplos:** para criar um usuário de banco de dados independente que representa um usuário de domínio federado ou gerenciado pelo Azure AD:</span><span class="sxs-lookup"><span data-stu-id="7b243-241">**Examples:** To create a contained database user representing an Azure AD federated or managed domain user:</span></span>
```
CREATE USER [bob@contoso.com] FROM EXTERNAL PROVIDER;
CREATE USER [alice@fabrikam.onmicrosoft.com] FROM EXTERNAL PROVIDER;
```

<span data-ttu-id="7b243-242">Para criar um usuário de banco de dados independente que represente um grupo de domínio do AD do Azure AD ou federado, forneça o nome para exibição de um grupo de segurança:</span><span class="sxs-lookup"><span data-stu-id="7b243-242">To create a contained database user representing an Azure AD or federated domain group, provide the display name of a security group:</span></span>
```
CREATE USER [ICU Nurses] FROM EXTERNAL PROVIDER;
```

<span data-ttu-id="7b243-243">Para criar um usuário de banco de dados independente que representa um aplicativo que se conectará usando um token do Azure AD:</span><span class="sxs-lookup"><span data-stu-id="7b243-243">To create a contained database user representing an application that connects using an Azure AD token:</span></span>

```
CREATE USER [appName] FROM EXTERNAL PROVIDER;
```

>  [!TIP]
>  <span data-ttu-id="7b243-244">Não é possível criar um usuário diretamente de um Azure Active Directory que não seja o Azure Active Directory associado à sua assinatura do Azure.</span><span class="sxs-lookup"><span data-stu-id="7b243-244">You cannot directly create a user from an Azure Active Directory other than the Azure Active Directory that is associated with your Azure subscription.</span></span> <span data-ttu-id="7b243-245">No entanto, os membros de outros Active Directories que são os usuários importados no Active Directory associado (conhecidos como usuários externos) podem ser adicionados a um grupo do Active Directory no Active Directory locatário.</span><span class="sxs-lookup"><span data-stu-id="7b243-245">However, members of other Active Directories that are imported users in the associated Active Directory (known as external users) can be added to an Active Directory group in the tenant Active Directory.</span></span> <span data-ttu-id="7b243-246">Ao criar um usuário de banco de dados independente para esse grupo AD, os usuários do Active Directory externo podem obter acesso ao Banco de Dados SQL.</span><span class="sxs-lookup"><span data-stu-id="7b243-246">By creating a contained database user for that AD group, the users from the external Active Directory can gain access to SQL Database.</span></span>   

<span data-ttu-id="7b243-247">Para obter mais informações sobre como criar usuários de banco de dados independente baseados em identidades do Active Directory do Azure, consulte [CRIAR USUÁRIO (Transact-SQL)](http://msdn.microsoft.com/library/ms173463.aspx).</span><span class="sxs-lookup"><span data-stu-id="7b243-247">For more information about creating contained database users based on Azure Active Directory identities, see [CREATE USER (Transact-SQL)](http://msdn.microsoft.com/library/ms173463.aspx).</span></span>

> [!NOTE]
> <span data-ttu-id="7b243-248">Removendo o administrador do Azure Active Directory para o Azure SQL Server impede que qualquer usuário da autenticação do Azure AD se conecte ao servidor.</span><span class="sxs-lookup"><span data-stu-id="7b243-248">Removing the Azure Active Directory administrator for Azure SQL server prevents any Azure AD authentication user from connecting to the server.</span></span> <span data-ttu-id="7b243-249">Se for necessário, os usuários do Azure AD inutilizáveis poderão ser removidos manualmente por um administrador do Banco de Dados SQL.</span><span class="sxs-lookup"><span data-stu-id="7b243-249">If necessary, unusable Azure AD users can be dropped manually by a SQL Database administrator.</span></span>   

>  [!NOTE]
>  <span data-ttu-id="7b243-250">Se você receber um **Tempo Limite de Conexão Expirado**, talvez seja necessário definir o parâmetro `TransparentNetworkIPResolution` da cadeia de conexão como falso.</span><span class="sxs-lookup"><span data-stu-id="7b243-250">If you receive a **Connection Timeout Expired**, you may need to set the `TransparentNetworkIPResolution` parameter of the connection string to false.</span></span> <span data-ttu-id="7b243-251">Para obter mais informações, consulte [Problema de tempo limite de conexão com o .NET Framework 4.6.1 – TransparentNetworkIPResolution](https://blogs.msdn.microsoft.com/dataaccesstechnologies/2016/05/07/connection-timeout-issue-with-net-framework-4-6-1-transparentnetworkipresolution/).</span><span class="sxs-lookup"><span data-stu-id="7b243-251">For more information, see [Connection timeout issue with .NET Framework 4.6.1 - TransparentNetworkIPResolution](https://blogs.msdn.microsoft.com/dataaccesstechnologies/2016/05/07/connection-timeout-issue-with-net-framework-4-6-1-transparentnetworkipresolution/).</span></span>   

   
<span data-ttu-id="7b243-252">Quando você cria um usuário de banco de dados, o usuário recebe a permissão **CONNECT** e pode se conectar a esse banco de dados como membro da função **PUBLIC**.</span><span class="sxs-lookup"><span data-stu-id="7b243-252">When you create a database user, that user receives the **CONNECT** permission and can connect to that database as a member of the **PUBLIC** role.</span></span> <span data-ttu-id="7b243-253">Inicialmente, as únicas permissões disponíveis para o usuário são as permissões concedidas à função **PUBLIC** ou as permissões concedidas a quaisquer grupos do Windows dos quais esse usuário faz parte.</span><span class="sxs-lookup"><span data-stu-id="7b243-253">Initially the only permissions available to the user are any permissions granted to the **PUBLIC** role, or any permissions granted to any Windows groups that they are a member of.</span></span> <span data-ttu-id="7b243-254">A partir do momento que você provisionar um usuário de banco de dados independente baseado no AD do Azure, você pode conceder ao usuário permissões adicionais, do mesmo modo que você concede permissões para qualquer outro tipo de usuário.</span><span class="sxs-lookup"><span data-stu-id="7b243-254">Once you provision an Azure AD-based contained database user, you can grant the user additional permissions, the same way as you grant permission to any other type of user.</span></span> <span data-ttu-id="7b243-255">Normalmente, conceda permissões para funções de banco de dados e adicione usuários a funções.</span><span class="sxs-lookup"><span data-stu-id="7b243-255">Typically grant permissions to database roles, and add users to roles.</span></span> <span data-ttu-id="7b243-256">Para saber mais, confira [Noções básicas sobre permissões do Mecanismo de Banco de Dados](http://social.technet.microsoft.com/wiki/contents/articles/4433.database-engine-permission-basics.aspx).</span><span class="sxs-lookup"><span data-stu-id="7b243-256">For more information, see [Database Engine Permission Basics](http://social.technet.microsoft.com/wiki/contents/articles/4433.database-engine-permission-basics.aspx).</span></span> <span data-ttu-id="7b243-257">Para obter mais informações sobre funções especiais do Banco de dados SQL, veja [Gerenciando bancos de dados e logons no Banco de Dados SQL do Azure](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="7b243-257">For more information about special SQL Database roles, see [Managing Databases and Logins in Azure SQL Database](sql-database-manage-logins.md).</span></span>
<span data-ttu-id="7b243-258">Um usuário de domínio federado que é importado para um domínio gerenciado deve usar a identidade do domínio gerenciado.</span><span class="sxs-lookup"><span data-stu-id="7b243-258">A federated domain user that is imported into a manage domain, must use the managed domain identity.</span></span>

> [!NOTE]
> <span data-ttu-id="7b243-259">Usuários do AD do Azure são marcados nos metadados do banco de dados com tipo E (EXTERNAL_USER) e para grupos com o tipo X (EXTERNAL_GROUPS).</span><span class="sxs-lookup"><span data-stu-id="7b243-259">Azure AD users are marked in the database metadata with type E (EXTERNAL_USER) and for groups with type X (EXTERNAL_GROUPS).</span></span> <span data-ttu-id="7b243-260">Para obter mais informações, consulte [sys.database_principals](https://msdn.microsoft.com/library/ms187328.aspx).</span><span class="sxs-lookup"><span data-stu-id="7b243-260">For more information, see [sys.database_principals](https://msdn.microsoft.com/library/ms187328.aspx).</span></span> 
>

## <a name="connect-to-the-user-database-or-data-warehouse-by-using-ssms-or-ssdt"></a><span data-ttu-id="7b243-261">Conectar-se ao banco de dados do usuário ou data warehouse usando SSMS ou SSDT</span><span class="sxs-lookup"><span data-stu-id="7b243-261">Connect to the user database or data warehouse by using SSMS or SSDT</span></span>  
<span data-ttu-id="7b243-262">Para confirmar que o administrador do Azure AD está configurado corretamente, conecte-se ao banco de dados **mestre** usando a conta de administrador do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="7b243-262">To confirm the Azure AD administrator is properly set up, connect to the **master** database using the Azure AD administrator account.</span></span>
<span data-ttu-id="7b243-263">Para provisionar um usuário de banco de dados independente com base no Azure AD (que não seja o administrador do servidor que é o proprietário do banco de dados), conecte-se ao banco de dados com uma identidade do Azure AD que tenha acesso ao banco de dados.</span><span class="sxs-lookup"><span data-stu-id="7b243-263">To provision an Azure AD-based contained database user (other than the server administrator that owns the database), connect to the database with an Azure AD identity that has access to the database.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="7b243-264">O suporte à autenticação do Azure Active Directory está disponível com o [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) e o [SQL Server Data Tools](https://msdn.microsoft.com/library/mt204009.aspx) no Visual Studio 2015.</span><span class="sxs-lookup"><span data-stu-id="7b243-264">Support for Azure Active Directory authentication is available with [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) and [SQL Server Data Tools](https://msdn.microsoft.com/library/mt204009.aspx) in Visual Studio 2015.</span></span> <span data-ttu-id="7b243-265">A versão de agosto de 2016 do SSMS também inclui suporte para Universal autenticação do Active Directory, que permite aos administradores exigir Autenticação Multifator utilizando uma chamada telefônica, mensagem de texto, os cartões inteligentes com PIN ou a notificação de aplicativo móvel.</span><span class="sxs-lookup"><span data-stu-id="7b243-265">The August 2016 release of SSMS also includes support for Active Directory Universal Authentication, which allows administrators to require Multi-Factor Authentication using a phone call, text message, smart cards with pin, or mobile app notification.</span></span>
 
## <a name="using-an-azure-ad-identity-to-connect-using-ssms-or-ssdt"></a><span data-ttu-id="7b243-266">Usando uma identidade do Azure AD para se conectar usando SSMS ou SSDT</span><span class="sxs-lookup"><span data-stu-id="7b243-266">Using an Azure AD identity to connect using SSMS or SSDT</span></span>  

<span data-ttu-id="7b243-267">Os procedimentos a seguir mostram como se conectar a um Banco de Dados SQL com uma identidade do Azure AD usando o SQL Server Management Studio ou as Ferramentas de Banco de Dados do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="7b243-267">The following procedures show you how to connect to a SQL database with an Azure AD identity using SQL Server Management Studio or SQL Server Database Tools.</span></span>

### <a name="active-directory-integrated-authentication"></a><span data-ttu-id="7b243-268">Autenticação integrada do Active Directory</span><span class="sxs-lookup"><span data-stu-id="7b243-268">Active Directory integrated authentication</span></span>

<span data-ttu-id="7b243-269">Use este método se você efetuou logon no Windows usando suas credenciais do Azure Active Directory por meio de um domínio federado.</span><span class="sxs-lookup"><span data-stu-id="7b243-269">Use this method if you are logged in to Windows using your Azure Active Directory credentials from a federated domain.</span></span>

1. <span data-ttu-id="7b243-270">Inicie o Management Studio ou o Data Tools e, na caixa de diálogo **Conectar ao Servidor** (ou **Conectar ao Mecanismo de Banco de Dados**), na caixa **Autenticação**, selecione **Active Directory - Integrado**.</span><span class="sxs-lookup"><span data-stu-id="7b243-270">Start Management Studio or Data Tools and in the **Connect to Server** (or **Connect to Database Engine**) dialog box, in the **Authentication** box, select **Active Directory - Integrated**.</span></span> <span data-ttu-id="7b243-271">Nenhuma senha é necessária ou pode ser inserida porque suas credenciais existentes serão apresentadas para a conexão.</span><span class="sxs-lookup"><span data-stu-id="7b243-271">No password is needed or can be entered because your existing credentials will be presented for the connection.</span></span>   

    ![Selecione Autenticação Integrada do AD][11]
2. <span data-ttu-id="7b243-273">Clique no botão **Opções** e, na página **Propriedades de Conexão**, na caixa **Conectar ao banco de dados**, digite o nome do banco de dados de usuário ao qual você deseja se conectar.</span><span class="sxs-lookup"><span data-stu-id="7b243-273">Click the **Options** button, and on the **Connection Properties** page, in the **Connect to database** box, type the name of the user database you want to connect to.</span></span> <span data-ttu-id="7b243-274">(A opção **ID de locatário ou o nome de domínio do AD**) tem suporte apenas para opções de **conexão Universal com MFA**, caso contrário, ela fica acinzentada).</span><span class="sxs-lookup"><span data-stu-id="7b243-274">(The **AD domain name or tenant ID**” option is only supported for **Universal with MFA connection** options, otherwise it is greyed out.)</span></span>  

    ![Selecione o nome do banco de dados][13]

## <a name="active-directory-password-authentication"></a><span data-ttu-id="7b243-276">Autenticação de senha do Active Directory</span><span class="sxs-lookup"><span data-stu-id="7b243-276">Active Directory password authentication</span></span>

<span data-ttu-id="7b243-277">Use esse método ao se conectar com um nome de entidade do AD do Azure usando o domínio gerenciado pelo Azure AD.</span><span class="sxs-lookup"><span data-stu-id="7b243-277">Use this method when connecting with an Azure AD principal name using the Azure AD managed domain.</span></span> <span data-ttu-id="7b243-278">Você também pode usá-lo para conta federada sem acesso ao domínio, por exemplo, ao trabalhar remotamente.</span><span class="sxs-lookup"><span data-stu-id="7b243-278">You can also use it for federated account without access to the domain, for example when working remotely.</span></span>

<span data-ttu-id="7b243-279">Use este método se você estiver conectado ao Windows usando as credenciais de um domínio que não está federado com o Azure, ou quando usar a autenticação do Azure AD usando o Azure AD baseado no domínio de cliente ou inicial.</span><span class="sxs-lookup"><span data-stu-id="7b243-279">Use this method if you are logged in to Windows using credentials from a domain that is not federated with Azure, or when using Azure AD authentication using Azure AD based on the initial or the client domain.</span></span>

1. <span data-ttu-id="7b243-280">Inicie o Management Studio ou o Data Tools e, na caixa de diálogo **Conectar ao Servidor** (ou **Conectar ao Mecanismo de Banco de Dados**), na caixa **Autenticação**, selecione **Active Directory - Senha**.</span><span class="sxs-lookup"><span data-stu-id="7b243-280">Start Management Studio or Data Tools and in the **Connect to Server** (or **Connect to Database Engine**) dialog box, in the **Authentication** box, select **Active Directory - Password**.</span></span>
2. <span data-ttu-id="7b243-281">Na caixa **Nome de usuário**, digite seu nome de usuário do Azure Active Directory no formato **username@domain.com**. Essa deve ser uma conta do Active Directory do Azure ou uma conta de um domínio federado com o Active Directory do Azure.</span><span class="sxs-lookup"><span data-stu-id="7b243-281">In the **User name** box, type your Azure Active Directory user name in the format **username@domain.com**. This must be an account from the Azure Active Directory or an account from a domain federate with the Azure Active Directory.</span></span>
3. <span data-ttu-id="7b243-282">Na caixa **Senha** , digite sua senha de usuário para a conta do Azure Active Directory ou conta de domínio federado.</span><span class="sxs-lookup"><span data-stu-id="7b243-282">In the **Password** box, type your user password for the Azure Active Directory account or federated domain account.</span></span>

    ![Selecione Autenticação de Senha do AD][12]
4. <span data-ttu-id="7b243-284">Clique no botão **Opções** e, na página **Propriedades de Conexão**, na caixa **Conectar ao banco de dados**, digite o nome do banco de dados de usuário ao qual você deseja se conectar.</span><span class="sxs-lookup"><span data-stu-id="7b243-284">Click the **Options** button, and on the **Connection Properties** page, in the **Connect to database** box, type the name of the user database you want to connect to.</span></span> <span data-ttu-id="7b243-285">(Confira o gráfico na opção anterior.)</span><span class="sxs-lookup"><span data-stu-id="7b243-285">(See the graphic in the previous option.)</span></span>

## <a name="using-an-azure-ad-identity-to-connect-from-a-client-application"></a><span data-ttu-id="7b243-286">Usando uma identidade do Azure AD para conectar-se de um aplicativo cliente</span><span class="sxs-lookup"><span data-stu-id="7b243-286">Using an Azure AD identity to connect from a client application</span></span>

<span data-ttu-id="7b243-287">Os procedimentos a seguir mostram como se conectar a um Banco de Dados SQL com uma identidade do Azure AD de um aplicativo cliente.</span><span class="sxs-lookup"><span data-stu-id="7b243-287">The following procedures show you how to connect to a SQL database with an Azure AD identity from a client application.</span></span>

###  <a name="active-directory-integrated-authentication"></a><span data-ttu-id="7b243-288">Autenticação integrada do Active Directory</span><span class="sxs-lookup"><span data-stu-id="7b243-288">Active Directory integrated authentication</span></span>

<span data-ttu-id="7b243-289">Para usar a autenticação integrada do Windows, o Active Directory de seu domínio deve ser federado com o Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="7b243-289">To use integrated Windows authentication, your domain’s Active Directory must be federated with Azure Active Directory.</span></span> <span data-ttu-id="7b243-290">Seu aplicativo cliente (ou um serviço) conectando-se ao banco de dados deve estar em execução em uma máquina ingressada no domínio com credenciais de domínio do usuário.</span><span class="sxs-lookup"><span data-stu-id="7b243-290">Your client application (or a service) connecting to the database must be running on a domain-joined machine under a user’s domain credentials.</span></span>

<span data-ttu-id="7b243-291">Para conectar-se a um banco de dados usando a autenticação integrada e uma identidade do AD do Azure, a palavra-chave de Autenticação na cadeia de conexão de banco de dados deve ser definida como Integrada ao Active Directory.</span><span class="sxs-lookup"><span data-stu-id="7b243-291">To connect to a database using integrated authentication and an Azure AD identity, the Authentication keyword in the database connection string must be set to Active Directory Integrated.</span></span> <span data-ttu-id="7b243-292">O exemplo de código em C# a seguir usa ADO .NET.</span><span class="sxs-lookup"><span data-stu-id="7b243-292">The following C# code sample uses ADO .NET.</span></span>

```
string ConnectionString =
@"Data Source=n9lxnyuzhv.database.windows.net; Authentication=Active Directory Integrated; Initial Catalog=testdb;";
SqlConnection conn = new SqlConnection(ConnectionString);
conn.Open();
```

<span data-ttu-id="7b243-293">Para a conexão ao Banco de Dados SQL do Azure, não há suporte para a palavra-chave de cadeia de conexão ``Integrated Security=True``.</span><span class="sxs-lookup"><span data-stu-id="7b243-293">The connection string keyword ``Integrated Security=True`` is not supported for connecting to Azure SQL Database.</span></span> <span data-ttu-id="7b243-294">Ao realizar uma conexão ODBC, você precisará remover espaços e configurar a autenticação para 'ActiveDirectoryIntegrated'.</span><span class="sxs-lookup"><span data-stu-id="7b243-294">When making an ODBC connection, you will need to remove spaces and set Authentication to 'ActiveDirectoryIntegrated'.</span></span>

### <a name="active-directory-password-authentication"></a><span data-ttu-id="7b243-295">Autenticação de senha do Active Directory</span><span class="sxs-lookup"><span data-stu-id="7b243-295">Active Directory password authentication</span></span>

<span data-ttu-id="7b243-296">Para conectar-se a um banco de dados usando a autenticação integrada e uma identidade do Azure AD, a palavra-chave de Autenticação deve ser definida como Senha do Active Directory.</span><span class="sxs-lookup"><span data-stu-id="7b243-296">To connect to a database using integrated authentication and an Azure AD identity, the Authentication keyword must be set to Active Directory Password.</span></span> <span data-ttu-id="7b243-297">A cadeia de conexão deve conter valores e palavras-chave de ID/UID de Usuário e Senha/PWD.</span><span class="sxs-lookup"><span data-stu-id="7b243-297">The connection string must contain User ID/UID and Password/PWD keywords and values.</span></span> <span data-ttu-id="7b243-298">O exemplo de código em C# a seguir usa ADO .NET.</span><span class="sxs-lookup"><span data-stu-id="7b243-298">The following C# code sample uses ADO .NET.</span></span>

```
string ConnectionString =
@"Data Source=n9lxnyuzhv.database.windows.net; Authentication=Active Directory Password; Initial Catalog=testdb;  UID=bob@contoso.onmicrosoft.com; PWD=MyPassWord!";
SqlConnection conn = new SqlConnection(ConnectionString);
conn.Open();
```

<span data-ttu-id="7b243-299">Saiba mais sobre métodos de autenticação do Azure AD usando os exemplos de código de demonstração disponíveis em [Demonstração do GitHub de Autenticação do Azure AD](https://github.com/Microsoft/sql-server-samples/tree/master/samples/features/security/azure-active-directory-auth).</span><span class="sxs-lookup"><span data-stu-id="7b243-299">Learn more about Azure AD authentication methods using the demo code samples available at [Azure AD Authentication GitHub Demo](https://github.com/Microsoft/sql-server-samples/tree/master/samples/features/security/azure-active-directory-auth).</span></span>

## <a name="azure-ad-token"></a><span data-ttu-id="7b243-300">Token do Azure AD</span><span class="sxs-lookup"><span data-stu-id="7b243-300">Azure AD token</span></span>
<span data-ttu-id="7b243-301">Este método de autenticação permite que os serviços de camada intermediária se conectem ao Banco de Dados SQL do Azure ou ao SQL Data Warehouse do Azure obtendo um token do AAD (Azure Active Directory).</span><span class="sxs-lookup"><span data-stu-id="7b243-301">This authentication method allows middle-tier services to connect to Azure SQL Database or Azure SQL Data Warehouse by obtaining a token from Azure Active Directory (AAD).</span></span> <span data-ttu-id="7b243-302">Ele permite cenários sofisticados, incluindo a autenticação baseada em certificado.</span><span class="sxs-lookup"><span data-stu-id="7b243-302">It enables sophisticated scenarios including certificate-based authentication.</span></span> <span data-ttu-id="7b243-303">Você precisa concluir quatro etapas básicas para usar a autenticação de token do Azure AD:</span><span class="sxs-lookup"><span data-stu-id="7b243-303">You must complete four basic steps to use Azure AD token authentication:</span></span>

1. <span data-ttu-id="7b243-304">Registrar seu aplicativo no Azure Active Directory e obter a ID de cliente para seu código.</span><span class="sxs-lookup"><span data-stu-id="7b243-304">Register your application with Azure Active Directory and get the client id for your code.</span></span> 
2. <span data-ttu-id="7b243-305">Criar um usuário de banco de dados que representa o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="7b243-305">Create a database user representing the application.</span></span> <span data-ttu-id="7b243-306">(Concluída anteriormente na etapa 6).</span><span class="sxs-lookup"><span data-stu-id="7b243-306">(Completed earlier in step 6.)</span></span>
3. <span data-ttu-id="7b243-307">Crie um certificado no computador cliente que executa o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="7b243-307">Create a certificate on the client computer runs the application.</span></span>
4. <span data-ttu-id="7b243-308">Adicionar o certificado como uma chave para seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="7b243-308">Add the certificate as a key for your application.</span></span>

<span data-ttu-id="7b243-309">Exemplo de cadeia de conexão:</span><span class="sxs-lookup"><span data-stu-id="7b243-309">Sample connection string:</span></span>

```
string ConnectionString =@"Data Source=n9lxnyuzhv.database.windows.net; Initial Catalog=testdb;"
SqlConnection conn = new SqlConnection(ConnectionString);
connection.AccessToken = "Your JWT token"
conn.Open();
```

<span data-ttu-id="7b243-310">Para obter mais informações, confira [Blog de segurança do SQL Server](https://blogs.msdn.microsoft.com/sqlsecurity/2016/02/09/token-based-authentication-support-for-azure-sql-db-using-azure-ad-auth/).</span><span class="sxs-lookup"><span data-stu-id="7b243-310">For more information, see [SQL Server Security Blog](https://blogs.msdn.microsoft.com/sqlsecurity/2016/02/09/token-based-authentication-support-for-azure-sql-db-using-azure-ad-auth/).</span></span>

### <a name="sqlcmd"></a><span data-ttu-id="7b243-311">sqlcmd</span><span class="sxs-lookup"><span data-stu-id="7b243-311">sqlcmd</span></span>

<span data-ttu-id="7b243-312">As instruções a seguir, conexão usando a versão 13.1 do sqlcmd, que está disponível no [Centro de Download](http://go.microsoft.com/fwlink/?LinkID=825643).</span><span class="sxs-lookup"><span data-stu-id="7b243-312">The following statements, connect using version 13.1 of sqlcmd, which is available from the [Download Center](http://go.microsoft.com/fwlink/?LinkID=825643).</span></span>

```
sqlcmd -S Target_DB_or_DW.testsrv.database.windows.net  -G  
sqlcmd -S Target_DB_or_DW.testsrv.database.windows.net -U bob@contoso.com -P MyAADPassword -G -l 30
```

## <a name="next-steps"></a><span data-ttu-id="7b243-313">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="7b243-313">Next steps</span></span>
- <span data-ttu-id="7b243-314">Para obter uma visão geral de acesso e controle no Banco de Dados SQL, confira [Acesso e controle de Banco de Dados SQL](sql-database-control-access.md).</span><span class="sxs-lookup"><span data-stu-id="7b243-314">For an overview of access and control in SQL Database, see [SQL Database access and control](sql-database-control-access.md).</span></span>
- <span data-ttu-id="7b243-315">Para obter uma visão geral de logons, usuários e funções de banco de dados no Banco de Dados SQL, confira [Logons, usuários e funções de banco de dados](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="7b243-315">For an overview of logins, users, and database roles in SQL Database, see [Logins, users, and database roles](sql-database-manage-logins.md).</span></span>
- <span data-ttu-id="7b243-316">Para obter mais informações sobre objetos de banco de dados, confira [Entidades](https://msdn.microsoft.com/library/ms181127.aspx).</span><span class="sxs-lookup"><span data-stu-id="7b243-316">For more information about database principals, see [Principals](https://msdn.microsoft.com/library/ms181127.aspx).</span></span>
- <span data-ttu-id="7b243-317">Para obter mais informações sobre as funções de banco de dados, confira [Funções de banco de dados](https://msdn.microsoft.com/library/ms189121.aspx).</span><span class="sxs-lookup"><span data-stu-id="7b243-317">For more information about database roles, see [Database roles](https://msdn.microsoft.com/library/ms189121.aspx).</span></span>
- <span data-ttu-id="7b243-318">Para obter mais informações sobre as regras de firewall no Banco de Dados SQL, confira [Regras de firewall de Banco de Dados SQL](sql-database-firewall-configure.md).</span><span class="sxs-lookup"><span data-stu-id="7b243-318">For more information about firewall rules in SQL Database, see [SQL Database firewall rules](sql-database-firewall-configure.md).</span></span>

<!--Image references-->

[1]: ./media/sql-database-aad-authentication/1aad-auth-diagram.png
[2]: ./media/sql-database-aad-authentication/2subscription-relationship.png
[3]: ./media/sql-database-aad-authentication/3admin-structure.png
[4]: ./media/sql-database-aad-authentication/4select-subscription.png
[5]: ./media/sql-database-aad-authentication/5ad-settings-portal.png
[6]: ./media/sql-database-aad-authentication/6edit-directory-select.png
[7]: ./media/sql-database-aad-authentication/7edit-directory-confirm.png
[8]: ./media/sql-database-aad-authentication/8choose-ad.png
[10]: ./media/sql-database-aad-authentication/10choose-admin.png
[11]: ./media/sql-database-aad-authentication/active-directory-integrated.png
[12]: ./media/sql-database-aad-authentication/12connect-using-pw-auth2.png
[13]: ./media/sql-database-aad-authentication/13connect-to-db2.png

