---
title: "autenticação do Active Directory do Azure aaaConfigure - SQL | Microsoft Docs"
description: "Saiba como tooconnect tooSQL banco de dados e SQL Data Warehouse usando a autenticação do Active Directory do Azure."
services: sql-database
documentationcenter: 
author: BYHAM
manager: jhubbard
editor: 
tags: 
ms.assetid: 7e2508a1-347e-4f15-b060-d46602c5ce7e
ms.service: sql-database
ms.custom: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 07/10/2017
ms.author: rickbyh
ms.openlocfilehash: d6222da0b840f96d4bcfbc02964dc7c54d5ea1ee
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="configure-and-manage-azure-active-directory-authentication-with-sql-database-or-sql-data-warehouse"></a><span data-ttu-id="e9d5a-103">Configurar e gerenciar o Azure Active Directory para autenticação com o Banco de Dados SQL ou o SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="e9d5a-103">Configure and manage Azure Active Directory authentication with SQL Database or SQL Data Warehouse</span></span>

<span data-ttu-id="e9d5a-104">Este artigo mostra como toocreate e preencher o AD do Azure e, em seguida, usar o Azure AD com o banco de dados do SQL Azure e SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-104">This article shows you how toocreate and populate Azure AD, and then use Azure AD with Azure SQL Database and SQL Data Warehouse.</span></span> <span data-ttu-id="e9d5a-105">Para obter uma visão geral, consulte [Autenticação do Azure Active Directory](sql-database-aad-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="e9d5a-105">For an overview, see [Azure Active Directory Authentication](sql-database-aad-authentication.md).</span></span>

>  [!NOTE]  
>  <span data-ttu-id="e9d5a-106">Conectando tooSQL Server em execução em uma VM do Azure não tem suporte com uma conta do Active Directory do Azure.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-106">Connecting tooSQL Server running on an Azure VM is not supported using an Azure Active Directory account.</span></span> <span data-ttu-id="e9d5a-107">Use um conta de domínio do Active Directory.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-107">Use a domain Active Directory account instead.</span></span>

## <a name="create-and-populate-an-azure-ad"></a><span data-ttu-id="e9d5a-108">Criar e popular um Azure AD</span><span class="sxs-lookup"><span data-stu-id="e9d5a-108">Create and populate an Azure AD</span></span>
<span data-ttu-id="e9d5a-109">Crie um Azure AD e popule-o com usuários e grupos.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-109">Create an Azure AD and populate it with users and groups.</span></span> <span data-ttu-id="e9d5a-110">O AD do Azure pode ser saudação inicial do AD do Azure gerenciados domínio.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-110">Azure AD can be hello initial domain Azure AD managed domain.</span></span> <span data-ttu-id="e9d5a-111">O AD do Azure também pode ser um local Active Directory Domain Services que é federado com hello AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-111">Azure AD can also be an on-premises Active Directory Domain Services that is federated with hello Azure AD.</span></span>

<span data-ttu-id="e9d5a-112">Para obter mais informações, consulte [integrando suas identidades locais ao Active Directory do Azure](../active-directory/active-directory-aadconnect.md), [adicionar seu próprio nome de domínio tooAzure AD](../active-directory/active-directory-add-domain.md), [Microsoft Azure agora oferece suporte à Federação com Windows Server Active Directory](https://azure.microsoft.com/blog/2012/11/28/windows-azure-now-supports-federation-with-windows-server-active-directory/), [administrando seu diretório do AD do Azure](https://msdn.microsoft.com/library/azure/hh967611.aspx), [gerenciar o AD do Azure usando o Windows PowerShell](/powershell/azure/overview?view=azureadps-2.0), e [identidade híbrida Portas e protocolos necessários](../active-directory/active-directory-aadconnect-ports.md).</span><span class="sxs-lookup"><span data-stu-id="e9d5a-112">For more information, see [Integrating your on-premises identities with Azure Active Directory](../active-directory/active-directory-aadconnect.md), [Add your own domain name tooAzure AD](../active-directory/active-directory-add-domain.md), [Microsoft Azure now supports federation with Windows Server Active Directory](https://azure.microsoft.com/blog/2012/11/28/windows-azure-now-supports-federation-with-windows-server-active-directory/), [Administering your Azure AD directory](https://msdn.microsoft.com/library/azure/hh967611.aspx), [Manage Azure AD using Windows PowerShell](/powershell/azure/overview?view=azureadps-2.0), and [Hybrid Identity Required Ports and Protocols](../active-directory/active-directory-aadconnect-ports.md).</span></span>

## <a name="optional-associate-or-change-hello-active-directory-that-is-currently-associated-with-your-azure-subscription"></a><span data-ttu-id="e9d5a-113">Opcional: Associar ou alterar Olá active directory que está associado a sua assinatura do Azure</span><span class="sxs-lookup"><span data-stu-id="e9d5a-113">Optional: Associate or change hello active directory that is currently associated with your Azure Subscription</span></span>
<span data-ttu-id="e9d5a-114">tooassociate seu banco de dados com o diretório de saudação do AD do Azure para sua organização, verifique a directory Olá um diretório confiável para Olá assinatura do Azure hospedagem Olá banco de dados.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-114">tooassociate your database with hello Azure AD directory for your organization, make hello directory a trusted directory for hello Azure subscription hosting hello database.</span></span> <span data-ttu-id="e9d5a-115">Para saber mais sobre as assinaturas do Azure, consulte [Como as assinaturas do Azure são associadas ao Azure AD](https://msdn.microsoft.com/library/azure/dn629581.aspx).</span><span class="sxs-lookup"><span data-stu-id="e9d5a-115">For more information, see [How Azure subscriptions are associated with Azure AD](https://msdn.microsoft.com/library/azure/dn629581.aspx).</span></span>

<span data-ttu-id="e9d5a-116">**Informações adicionais:** cada assinatura do Azure tem uma relação de confiança com uma instância do AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-116">**Additional information:** Every Azure subscription has a trust relationship with an Azure AD instance.</span></span> <span data-ttu-id="e9d5a-117">Isso significa que ele confia esse diretório tooauthenticate usuários, serviços e dispositivos.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-117">This means that it trusts that directory tooauthenticate users, services, and devices.</span></span> <span data-ttu-id="e9d5a-118">Várias assinaturas podem confiar Olá mesmo diretório, mas uma assinatura confia em apenas um diretório.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-118">Multiple subscriptions can trust hello same directory, but a subscription trusts only one directory.</span></span> <span data-ttu-id="e9d5a-119">Você pode ver o diretório que é confiável para sua assinatura sob Olá **configurações** guia em [https://manage.windowsazure.com/](https://manage.windowsazure.com/).</span><span class="sxs-lookup"><span data-stu-id="e9d5a-119">You can see which directory is trusted by your subscription under hello **Settings** tab at [https://manage.windowsazure.com/](https://manage.windowsazure.com/).</span></span> <span data-ttu-id="e9d5a-120">Essa relação de confiança que tem uma assinatura com um diretório é diferente de relacionamento de saudação que tem uma assinatura com todos os outros recursos do Azure (sites, bancos de dados e assim por diante), que são mais como recursos filho de uma assinatura.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-120">This trust relationship that a subscription has with a directory is unlike hello relationship that a subscription has with all other resources in Azure (websites, databases, and so on), which are more like child resources of a subscription.</span></span> <span data-ttu-id="e9d5a-121">Se uma assinatura expira, e depois tentar acessar outros recursos associados à assinatura de saudação de toothose também será interrompido.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-121">If a subscription expires, then access toothose other resources associated with hello subscription also stops.</span></span> <span data-ttu-id="e9d5a-122">Mas Olá diretório permanece no Azure, e você pode associar outra assinatura esse diretório e continuar a usuários de diretório Olá toomanage.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-122">But hello directory remains in Azure, and you can associate another subscription with that directory and continue toomanage hello directory users.</span></span> <span data-ttu-id="e9d5a-123">Para obter mais informações sobre recursos, consulte [Noções básicas sobre o acesso a recursos no Azure](https://msdn.microsoft.com/library/azure/dn584083.aspx).</span><span class="sxs-lookup"><span data-stu-id="e9d5a-123">For more information about resources, see [Understanding resource access in Azure](https://msdn.microsoft.com/library/azure/dn584083.aspx).</span></span>

<span data-ttu-id="e9d5a-124">Olá procedimentos a seguir mostram como toochange Olá associado diretório para uma determinada assinatura.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-124">hello following procedures show you how toochange hello associated directory for a given subscription.</span></span>
1. <span data-ttu-id="e9d5a-125">Conecte-se tooyour [Portal clássico do Azure](https://manage.windowsazure.com/) usando o administrador da assinatura do Azure.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-125">Connect tooyour [Azure Classic Portal](https://manage.windowsazure.com/) by using an Azure subscription administrator.</span></span>
2. <span data-ttu-id="e9d5a-126">Na faixa de saudação à esquerda, selecione **configurações**.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-126">On hello left banner, select **SETTINGS**.</span></span>
3. <span data-ttu-id="e9d5a-127">Sua assinatura será exibida na tela de configurações de saudação.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-127">Your subscriptions appear in hello settings screen.</span></span> <span data-ttu-id="e9d5a-128">Se Olá desejado a assinatura não aparece, clique em **assinaturas** na parte superior do hello, lista suspensa Olá **filtro pelo diretório** caixa e selecione Olá diretório que contém suas assinaturas e, em seguida, clique em **Aplicar**.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-128">If hello desired subscription does not appear, click **Subscriptions** at hello top, drop down hello **FILTER BY DIRECTORY** box and select hello directory that contains your subscriptions, and then click **APPLY**.</span></span>
   
    ![selecione a assinatura][4]
4. <span data-ttu-id="e9d5a-130">Em Olá **configurações** área, clique em sua assinatura e, em seguida, clique em **Editar diretório** final Olá Olá página.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-130">In hello **settings** area, click your subscription, and then click  **EDIT DIRECTORY** at hello bottom of hello page.</span></span>
   
    ![ad-settings-portal][5]
5. <span data-ttu-id="e9d5a-132">Em Olá **Editar diretório** caixa, selecione Olá Active Directory do Azure que está associado com o SQL Server ou SQL Data Warehouse e, em seguida, clique em seta Olá para Avançar.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-132">In hello **EDIT DIRECTORY** box, select hello Azure Active Directory that is associated with your SQL Server or SQL Data Warehouse, and then click hello arrow for next.</span></span>
   
    ![edit-directory-select][6]
6. <span data-ttu-id="e9d5a-134">Em Olá **confirmar** diretório de caixa de diálogo mapeamento, confirme se "**todos os coadministradores serão removidos.**"</span><span class="sxs-lookup"><span data-stu-id="e9d5a-134">In hello **CONFIRM** directory Mapping dialog box, confirm that "**All co-administrators will be removed.**"</span></span>
   
    ![edit-directory-confirm][7]
7. <span data-ttu-id="e9d5a-136">Clique em Olá seleção tooreload Olá portal.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-136">Click hello check tooreload hello portal.</span></span>

   > [!NOTE]
   > <span data-ttu-id="e9d5a-137">Quando alterar diretório hello, administradores tooall acesso, os usuários do AD do Azure e grupos e os usuários de diretório reserva recursos são removidos e não têm mais acesso toothis assinatura ou seus recursos.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-137">When you change hello directory, access tooall co-administrators, Azure AD users and groups, and directory-backed resource users are removed and they no longer have access toothis subscription or its resources.</span></span> <span data-ttu-id="e9d5a-138">Somente, como um administrador de serviço, pode configurar o acesso para entidades de segurança com base no novo diretório de saudação.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-138">Only you, as a service administrator, can configure access for principals based on hello new directory.</span></span> <span data-ttu-id="e9d5a-139">Essa alteração pode levar uma quantidade significativa de recursos do tempo toopropagate tooall.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-139">This change might take a substantial amount of time toopropagate tooall resources.</span></span> <span data-ttu-id="e9d5a-140">Alterando o diretório de hello, também alterações Olá administrador do AD do Azure para o banco de dados SQL e SQL Data Warehouse e não permitir acesso de banco de dados para usuários do AD do Azure existentes.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-140">Changing hello directory, also changes hello Azure AD administrator for SQL Database and SQL Data Warehouse and disallow database access for any existing Azure AD users.</span></span> <span data-ttu-id="e9d5a-141">administração de saudação do AD do Azure deve ser redefinição (conforme descrito abaixo) e do Azure AD usuários devem ser criados.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-141">hello Azure AD admin must be reset (as described below) and new Azure AD users must be created.</span></span>
   >  

## <a name="create-an-azure-ad-administrator-for-azure-sql-server"></a><span data-ttu-id="e9d5a-142">Criar um administrador do Azure AD para o Azure SQL Server</span><span class="sxs-lookup"><span data-stu-id="e9d5a-142">Create an Azure AD administrator for Azure SQL server</span></span>
<span data-ttu-id="e9d5a-143">Cada servidor do SQL Azure (que hospeda um banco de dados SQL ou o SQL Data Warehouse) começa com uma conta de administrador de servidor único é administrador Olá Olá inteiro do Azure do SQL server.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-143">Each Azure SQL server (which hosts a SQL Database or SQL Data Warehouse) starts with a single server administrator account that is hello administrator of hello entire Azure SQL server.</span></span> <span data-ttu-id="e9d5a-144">Um segundo administrador do SQL Server deve ser criado, que é uma conta do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-144">A second SQL Server administrator must be created, that is an Azure AD account.</span></span> <span data-ttu-id="e9d5a-145">Essa entidade é criada como um usuário de banco de dados contido no banco de dados mestre hello.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-145">This principal is created as a contained database user in hello master database.</span></span> <span data-ttu-id="e9d5a-146">Como administrador, contas de administrador do servidor de saudação são membros de saudação **db_owner** função em todos os usuários de banco de dados e insira cada banco de dados do usuário como Olá **dbo** usuário.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-146">As administrators, hello server administrator accounts are members of hello **db_owner** role in every user database, and enter each user database as hello **dbo** user.</span></span> <span data-ttu-id="e9d5a-147">Para obter mais informações sobre contas de administrador do servidor de saudação, consulte [Gerenciando bancos de dados e logons no banco de dados do SQL Azure](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="e9d5a-147">For more information about hello server administrator accounts, see [Managing Databases and Logins in Azure SQL Database](sql-database-manage-logins.md).</span></span>

<span data-ttu-id="e9d5a-148">Ao usar o Active Directory do Azure com replicação geográfica, administrador do Active Directory do Azure Olá deve ser configurado para Olá primário e os servidores secundários hello.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-148">When using Azure Active Directory with geo-replication, hello Azure Active Directory administrator must be configured for both hello primary and hello secondary servers.</span></span> <span data-ttu-id="e9d5a-149">Se um servidor não tem um administrador do Active Directory do Azure, em seguida, usuários e logons do Active Directory do Azure receberá um erro de tooserver "Não é possível conectar".</span><span class="sxs-lookup"><span data-stu-id="e9d5a-149">If a server does not have an Azure Active Directory administrator, then Azure Active Directory logins and users receive a "Cannot connect" tooserver error.</span></span>

> [!NOTE]
> <span data-ttu-id="e9d5a-150">Os usuários que não são baseados em uma conta do AD do Azure (incluindo a conta de administrador do hello Azure SQL server), não é possível criar usuários baseado no AD do Azure, porque eles não têm permissão toovalidate proposto usuários de banco de dados com hello AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-150">Users that are not based on an Azure AD account (including hello Azure SQL server administrator account), cannot create Azure AD-based users, because they do not have permission toovalidate proposed database users with hello Azure AD.</span></span>
> 

## <a name="provision-an-azure-active-directory-administrator-for-your-azure-sql-server"></a><span data-ttu-id="e9d5a-151">Provisionar um administrador do Azure Active Directory para o Azure SQL Server</span><span class="sxs-lookup"><span data-stu-id="e9d5a-151">Provision an Azure Active Directory administrator for your Azure SQL server</span></span>

<span data-ttu-id="e9d5a-152">Olá dois procedimentos a seguir mostra como tooprovision um administrador do Active Directory do Azure para seu servidor do SQL Azure no portal do Azure de saudação e usando o PowerShell.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-152">hello following two procedures show you how tooprovision an Azure Active Directory administrator for your Azure SQL server in hello Azure portal and by using PowerShell.</span></span>

### <a name="azure-portal"></a><span data-ttu-id="e9d5a-153">Portal do Azure</span><span class="sxs-lookup"><span data-stu-id="e9d5a-153">Azure portal</span></span>
1. <span data-ttu-id="e9d5a-154">Em Olá [portal do Azure](https://portal.azure.com/), no canto superior direito de hello, clique toodrop sua conexão abaixo uma lista de possíveis Active Directories.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-154">In hello [Azure portal](https://portal.azure.com/), in hello upper-right corner, click your connection toodrop down a list of possible Active Directories.</span></span> <span data-ttu-id="e9d5a-155">Escolha Olá corrigir do Active Directory como o padrão de saudação do AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-155">Choose hello correct Active Directory as hello default Azure AD.</span></span> <span data-ttu-id="e9d5a-156">Essa etapa links Olá assinatura associação com o Active Directory com o servidor do SQL Azure certificando-se de que Olá a mesma assinatura que é usada para o AD do Azure e SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-156">This step links hello subscription association with Active Directory with Azure SQL server making sure that hello same subscription is used for both Azure AD and SQL Server.</span></span> <span data-ttu-id="e9d5a-157">(hello Azure do SQL server pode hospedar o banco de dados do SQL Azure ou Azure SQL Data Warehouse.)</span><span class="sxs-lookup"><span data-stu-id="e9d5a-157">(hello Azure SQL server can be hosting either Azure SQL Database or Azure SQL Data Warehouse.)</span></span>   
    <span data-ttu-id="e9d5a-158">![choose-ad][8]</span><span class="sxs-lookup"><span data-stu-id="e9d5a-158">![choose-ad][8]</span></span>   
    
2. <span data-ttu-id="e9d5a-159">Em Olá deixado selecione faixa **servidores SQL**, selecione seu **do SQL server**e, em seguida, em Olá **do SQL Server** folha, clique em **administrador do Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-159">In hello left banner select **SQL servers**, select your **SQL server**, and then in hello **SQL Server** blade, click **Active Directory admin**.</span></span>   
3. <span data-ttu-id="e9d5a-160">Em Olá **administrador do Active Directory** folha, clique em **definir o administrador**.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-160">In hello **Active Directory admin** blade, click **Set admin**.</span></span>   
    <span data-ttu-id="e9d5a-161">![selecionar active directory](./media/sql-database-aad-authentication/select-active-directory.png)</span><span class="sxs-lookup"><span data-stu-id="e9d5a-161">![select active directory](./media/sql-database-aad-authentication/select-active-directory.png)</span></span>  
    
4. <span data-ttu-id="e9d5a-162">Em Olá **Adicionar administrador** folha, pesquisar um usuário, usuário Olá select ou toobe grupo um administrador e, em seguida, clique em **selecione**.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-162">In hello **Add admin** blade, search for a user, select hello user or group toobe an administrator, and then click **Select**.</span></span> <span data-ttu-id="e9d5a-163">(folha de administração do Active Directory Olá mostra todos os membros e grupos do Active Directory.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-163">(hello Active Directory admin blade shows all members and groups of your Active Directory.</span></span> <span data-ttu-id="e9d5a-164">Usuários ou grupos que estão esmaecidos não podem ser selecionados porque eles não têm suporte como administradores do AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-164">Users or groups that are grayed out cannot be selected because they are not supported as Azure AD administrators.</span></span> <span data-ttu-id="e9d5a-165">(Consulte lista de saudação do grupo Administradores com suporte no hello **recursos do AD do Azure e limitações** seção [uso do Azure autenticação do Active Directory para autenticação com o banco de dados SQL ou SQL Data Warehouse](sql-database-aad-authentication.md).) Controle de acesso baseado em função (RBAC) aplica-se apenas toohello portal e não é propagado tooSQL Server.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-165">(See hello list of supported admins in hello **Azure AD Features and Limitations** section of [Use Azure Active Directory Authentication for authentication with SQL Database or SQL Data Warehouse](sql-database-aad-authentication.md).) Role-based access control (RBAC) applies only toohello portal and is not propagated tooSQL Server.</span></span>   
    <span data-ttu-id="e9d5a-166">![selecionar administrador](./media/sql-database-aad-authentication/select-admin.png)</span><span class="sxs-lookup"><span data-stu-id="e9d5a-166">![select admin](./media/sql-database-aad-authentication/select-admin.png)</span></span>  
    
5. <span data-ttu-id="e9d5a-167">Na parte superior de saudação do hello **administrador do Active Directory** folha, clique em **salvar**.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-167">At hello top of hello **Active Directory admin** blade, click **SAVE**.</span></span>   
    <span data-ttu-id="e9d5a-168">![salvar administrador](./media/sql-database-aad-authentication/save-admin.png)</span><span class="sxs-lookup"><span data-stu-id="e9d5a-168">![save admin](./media/sql-database-aad-authentication/save-admin.png)</span></span>   

<span data-ttu-id="e9d5a-169">processo de saudação do alterar Olá administrador pode levar vários minutos.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-169">hello process of changing hello administrator may take several minutes.</span></span> <span data-ttu-id="e9d5a-170">Novo administrador do hello será exibido no hello **administrador do Active Directory** caixa.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-170">Then hello new administrator appears in hello **Active Directory admin** box.</span></span>

   > [!NOTE]
   > <span data-ttu-id="e9d5a-171">Ao configurar o administrador de saudação do AD do Azure, Olá novo administrador nome (usuário ou grupo) não pode já estar presente no banco dados mestre virtual hello como um usuário de autenticação do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-171">When setting up hello Azure AD admin, hello new admin name (user or group) cannot already be present in hello virtual master database as a SQL Server authentication user.</span></span> <span data-ttu-id="e9d5a-172">Se estiver presente, a instalação de administração do AD do Azure Olá falhará; Revertendo a sua criação e indicando que tais um administrador (nome) já existirem.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-172">If present, hello Azure AD admin setup will fail; rolling back its creation and indicating that such an admin (name) already exists.</span></span> <span data-ttu-id="e9d5a-173">Como tal um usuário de autenticação do SQL Server não é parte de saudação do AD do Azure, qualquer servidor de toohello tooconnect esforço usando a autenticação do AD do Azure falhará.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-173">Since such a SQL Server authentication user is not part of hello Azure AD, any effort tooconnect toohello server using Azure AD authentication fails.</span></span>
   > 


<span data-ttu-id="e9d5a-174">toolater remover um administrador, na parte superior de saudação do hello **administrador do Active Directory** folha, clique em **remover administrador**e, em seguida, clique em **salvar**.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-174">toolater remove an Admin, at hello top of hello **Active Directory admin** blade, click **Remove admin**, and then click **Save**.</span></span>

### <a name="powershell"></a><span data-ttu-id="e9d5a-175">PowerShell</span><span class="sxs-lookup"><span data-stu-id="e9d5a-175">PowerShell</span></span>
<span data-ttu-id="e9d5a-176">toorun cmdlets do PowerShell, você precisa toohave Azure PowerShell instalado e em execução.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-176">toorun PowerShell cmdlets, you need toohave Azure PowerShell installed and running.</span></span> <span data-ttu-id="e9d5a-177">Para obter informações detalhadas, consulte [como tooinstall e configurar o Azure PowerShell](/powershell/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="e9d5a-177">For detailed information, see [How tooinstall and configure Azure PowerShell](/powershell/azure/overview).</span></span>

<span data-ttu-id="e9d5a-178">tooprovision um administrador do AD do Azure, execute Olá comandos do Azure PowerShell a seguir:</span><span class="sxs-lookup"><span data-stu-id="e9d5a-178">tooprovision an Azure AD admin, execute hello following Azure PowerShell commands:</span></span>

* <span data-ttu-id="e9d5a-179">Add-AzureRmAccount</span><span class="sxs-lookup"><span data-stu-id="e9d5a-179">Add-AzureRmAccount</span></span>
* <span data-ttu-id="e9d5a-180">Select-AzureRmSubscription</span><span class="sxs-lookup"><span data-stu-id="e9d5a-180">Select-AzureRmSubscription</span></span>

<span data-ttu-id="e9d5a-181">Cmdlets usados tooprovision e gerenciar a administração do AD do Azure:</span><span class="sxs-lookup"><span data-stu-id="e9d5a-181">Cmdlets used tooprovision and manage Azure AD admin:</span></span>

| <span data-ttu-id="e9d5a-182">Nome do cmdlet</span><span class="sxs-lookup"><span data-stu-id="e9d5a-182">Cmdlet name</span></span> | <span data-ttu-id="e9d5a-183">Descrição</span><span class="sxs-lookup"><span data-stu-id="e9d5a-183">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="e9d5a-184">Set-AzureRmSqlServerActiveDirectoryAdministrator</span><span class="sxs-lookup"><span data-stu-id="e9d5a-184">Set-AzureRmSqlServerActiveDirectoryAdministrator</span></span>](/powershell/module/azurerm.sql/set-azurermsqlserveractivedirectoryadministrator) |<span data-ttu-id="e9d5a-185">Provisiona um administrador do Azure Active Directory para o Azure SQL Server ou o SQL Data Warehouse do Azure.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-185">Provisions an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> <span data-ttu-id="e9d5a-186">(Deve ser da assinatura atual Olá).</span><span class="sxs-lookup"><span data-stu-id="e9d5a-186">(Must be from hello current subscription.)</span></span> |
| [<span data-ttu-id="e9d5a-187">Remove-AzureRmSqlServerActiveDirectoryAdministrator</span><span class="sxs-lookup"><span data-stu-id="e9d5a-187">Remove-AzureRmSqlServerActiveDirectoryAdministrator</span></span>](/powershell/module/azurerm.sql/remove-azurermsqlserveractivedirectoryadministrator) |<span data-ttu-id="e9d5a-188">Remove um administrador do Azure Active Directory para o Azure SQL Server ou para o SQL Data Warehouse do Azure.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-188">Removes an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> |
| [<span data-ttu-id="e9d5a-189">Get-AzureRmSqlServerActiveDirectoryAdministrator</span><span class="sxs-lookup"><span data-stu-id="e9d5a-189">Get-AzureRmSqlServerActiveDirectoryAdministrator</span></span>](/powershell/module/azurerm.sql/get-azurermsqlserveractivedirectoryadministrator) |<span data-ttu-id="e9d5a-190">Retorna informações sobre um administrador do Active Directory do Azure atualmente configurado para hello Azure do SQL server ou do Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-190">Returns information about an Azure Active Directory administrator currently configured for hello Azure SQL server or Azure SQL Data Warehouse.</span></span> |

<span data-ttu-id="e9d5a-191">Use o comando get-help toosee mais detalhes para cada um desses comandos, por exemplo do PowerShell ``get-help Set-AzureRmSqlServerActiveDirectoryAdministrator``.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-191">Use PowerShell command get-help toosee more details for each of these commands, for example ``get-help Set-AzureRmSqlServerActiveDirectoryAdministrator``.</span></span>

<span data-ttu-id="e9d5a-192">Olá seguindo disposições de script nomeado de um grupo de administradores do AD do Azure **DBA_Group** (id de objeto `40b79501-b343-44ed-9ce7-da4c8cc7353f`) para Olá **demo_server** servidor em um grupo de recursos denominado **23 de grupo** :</span><span class="sxs-lookup"><span data-stu-id="e9d5a-192">hello following script provisions an Azure AD administrator group named **DBA_Group** (object id `40b79501-b343-44ed-9ce7-da4c8cc7353f`) for hello **demo_server** server in a resource group named **Group-23**:</span></span>

```
Set-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23"
-ServerName "demo_server" -DisplayName "DBA_Group"
```

<span data-ttu-id="e9d5a-193">Olá **DisplayName** parâmetro de entrada aceita o nome de exibição de saudação do AD do Azure ou Olá Nome Principal do usuário.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-193">hello **DisplayName** input parameter accepts either hello Azure AD display name or hello User Principal Name.</span></span> <span data-ttu-id="e9d5a-194">Por exemplo, ``DisplayName="John Smith"`` e ``DisplayName="johns@contoso.com"``.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-194">For example, ``DisplayName="John Smith"`` and ``DisplayName="johns@contoso.com"``.</span></span> <span data-ttu-id="e9d5a-195">Olá somente do AD do Azure grupos do AD do Azure há suporte para o nome de exibição.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-195">For Azure AD groups only hello Azure AD display name is supported.</span></span>

> [!NOTE]
> <span data-ttu-id="e9d5a-196">saudação de comando do PowerShell do Azure ```Set-AzureRmSqlServerActiveDirectoryAdministrator``` não impede que você provisionar administradores do AD do Azure para usuários sem suporte.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-196">hello Azure PowerShell  command ```Set-AzureRmSqlServerActiveDirectoryAdministrator``` does not prevent you from provisioning Azure AD admins for unsupported users.</span></span> <span data-ttu-id="e9d5a-197">Um usuário sem suporte pode ser provisionado, mas não é possível conectar o banco de dados tooa.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-197">An unsupported user can be provisioned, but can not connect tooa database.</span></span> 
> 

<span data-ttu-id="e9d5a-198">Olá, exemplo a seguir usa Olá opcional **ObjectID**:</span><span class="sxs-lookup"><span data-stu-id="e9d5a-198">hello following example uses hello optional **ObjectID**:</span></span>

```
Set-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23"
-ServerName "demo_server" -DisplayName "DBA_Group" -ObjectId "40b79501-b343-44ed-9ce7-da4c8cc7353f"
```

> [!NOTE]
> <span data-ttu-id="e9d5a-199">Olá AD do Azure **ObjectID** é necessária quando hello **DisplayName** não é exclusivo.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-199">hello Azure AD **ObjectID** is required when hello **DisplayName** is not unique.</span></span> <span data-ttu-id="e9d5a-200">Olá tooretrieve **ObjectID** e **DisplayName** valores, use a seção do Active Directory de saudação do Portal clássico do Azure e exibir propriedades de saudação de um usuário ou grupo.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-200">tooretrieve hello **ObjectID** and **DisplayName** values, use hello Active Directory section of Azure Classic Portal, and view hello properties of a user or group.</span></span>
> 

<span data-ttu-id="e9d5a-201">saudação de exemplo a seguir retorna informações sobre administração Olá atual do AD do Azure para o Azure SQL server:</span><span class="sxs-lookup"><span data-stu-id="e9d5a-201">hello following example returns information about hello current Azure AD admin for Azure SQL server:</span></span>

```
Get-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23" -ServerName "demo_server" | Format-List
```

<span data-ttu-id="e9d5a-202">saudação de exemplo a seguir remove um administrador do AD do Azure:</span><span class="sxs-lookup"><span data-stu-id="e9d5a-202">hello following example removes an Azure AD administrator:</span></span>

```
Remove-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23" -ServerName "demo_server"
```

<span data-ttu-id="e9d5a-203">Você também pode provisionar um administrador do Active Directory do Azure usando Olá APIs REST.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-203">You can also provision an Azure Active Directory Administrator by using hello REST APIs.</span></span> <span data-ttu-id="e9d5a-204">Para saber mais, confira [Referência da API REST de Gerenciamento de Serviços e Operações de Bancos de Dados SQL do Azure](https://msdn.microsoft.com/library/azure/dn505719.aspx)</span><span class="sxs-lookup"><span data-stu-id="e9d5a-204">For more information, see [Service Management REST API Reference and Operations for Azure SQL Databases Operations for Azure SQL Databases](https://msdn.microsoft.com/library/azure/dn505719.aspx)</span></span>

### <a name="cli"></a><span data-ttu-id="e9d5a-205">CLI</span><span class="sxs-lookup"><span data-stu-id="e9d5a-205">CLI</span></span>  
<span data-ttu-id="e9d5a-206">Você também pode oferecer um administrador do AD do Azure por chamada hello comandos a seguir:</span><span class="sxs-lookup"><span data-stu-id="e9d5a-206">You can also provision an Azure AD admin by calling hello following CLI commands:</span></span>
| <span data-ttu-id="e9d5a-207">Command</span><span class="sxs-lookup"><span data-stu-id="e9d5a-207">Command</span></span> | <span data-ttu-id="e9d5a-208">Descrição</span><span class="sxs-lookup"><span data-stu-id="e9d5a-208">Description</span></span> |
| --- | --- |
|[<span data-ttu-id="e9d5a-209">az sql server ad-admin create</span><span class="sxs-lookup"><span data-stu-id="e9d5a-209">az sql server ad-admin create</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#create) |<span data-ttu-id="e9d5a-210">Provisiona um administrador do Azure Active Directory para o Azure SQL Server ou o SQL Data Warehouse do Azure.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-210">Provisions an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> <span data-ttu-id="e9d5a-211">(Deve ser da assinatura atual Olá).</span><span class="sxs-lookup"><span data-stu-id="e9d5a-211">(Must be from hello current subscription.)</span></span> |
|[<span data-ttu-id="e9d5a-212">az sql server ad-admin delete</span><span class="sxs-lookup"><span data-stu-id="e9d5a-212">az sql server ad-admin delete</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#delete) |<span data-ttu-id="e9d5a-213">Remove um administrador do Azure Active Directory para o Azure SQL Server ou para o SQL Data Warehouse do Azure.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-213">Removes an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> |
|[<span data-ttu-id="e9d5a-214">az sql server ad-admin list</span><span class="sxs-lookup"><span data-stu-id="e9d5a-214">az sql server ad-admin list</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#list) |<span data-ttu-id="e9d5a-215">Retorna informações sobre um administrador do Active Directory do Azure atualmente configurado para hello Azure do SQL server ou do Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-215">Returns information about an Azure Active Directory administrator currently configured for hello Azure SQL server or Azure SQL Data Warehouse.</span></span> |
|[<span data-ttu-id="e9d5a-216">az sql server ad-admin update</span><span class="sxs-lookup"><span data-stu-id="e9d5a-216">az sql server ad-admin update</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#update) |<span data-ttu-id="e9d5a-217">Atualiza o administrador do Active Directory Olá para um servidor do SQL Azure ou Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-217">Updates hello Active Directory administrator for an Azure SQL server or Azure SQL Data Warehouse.</span></span> |

<span data-ttu-id="e9d5a-218">Para obter mais informações sobre comandos da CLI, consulte [SQL – az sql](https://docs.microsoft.com/cli/azure/sql/server).</span><span class="sxs-lookup"><span data-stu-id="e9d5a-218">For more information about CLI commands, see [SQL - az sql](https://docs.microsoft.com/cli/azure/sql/server).</span></span>  


## <a name="configure-your-client-computers"></a><span data-ttu-id="e9d5a-219">Configurar os computadores cliente</span><span class="sxs-lookup"><span data-stu-id="e9d5a-219">Configure your client computers</span></span>
<span data-ttu-id="e9d5a-220">Em todos os computadores cliente, do qual seus aplicativos ou usuários conectam tooAzure banco de dados SQL ou do Azure SQL Data Warehouse usando identidades do AD do Azure, você deve instalar Olá software a seguir:</span><span class="sxs-lookup"><span data-stu-id="e9d5a-220">On all client machines, from which your applications or users connect tooAzure SQL Database or Azure SQL Data Warehouse using Azure AD identities, you must install hello following software:</span></span>

* <span data-ttu-id="e9d5a-221">.NET Framework 4.6 ou posterior de [https://msdn.microsoft.com/library/5a4x27ek.aspx](https://msdn.microsoft.com/library/5a4x27ek.aspx).</span><span class="sxs-lookup"><span data-stu-id="e9d5a-221">.NET Framework 4.6 or later from [https://msdn.microsoft.com/library/5a4x27ek.aspx](https://msdn.microsoft.com/library/5a4x27ek.aspx).</span></span>
* <span data-ttu-id="e9d5a-222">Biblioteca de autenticação do Active Directory do Azure para o SQL Server (**ADALSQL. DLL**) está disponível em vários idiomas (x86 e amd64) do Centro de download da saudação em [Microsoft Active Directory Authentication Library para Microsoft SQL Server](http://www.microsoft.com/download/details.aspx?id=48742).</span><span class="sxs-lookup"><span data-stu-id="e9d5a-222">Azure Active Directory Authentication Library for SQL Server (**ADALSQL.DLL**) is available in multiple languages (both x86 and amd64) from hello download center at [Microsoft Active Directory Authentication Library for Microsoft SQL Server](http://www.microsoft.com/download/details.aspx?id=48742).</span></span>

<span data-ttu-id="e9d5a-223">Você pode atender a esses requisitos:</span><span class="sxs-lookup"><span data-stu-id="e9d5a-223">You can meet these requirements by:</span></span>

* <span data-ttu-id="e9d5a-224">Instalando o [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) ou [SQL Server Data Tools para Visual Studio 2015](https://msdn.microsoft.com/library/mt204009.aspx) atende Olá requisito do .NET Framework 4.6.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-224">Installing either [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) or [SQL Server Data Tools for Visual Studio 2015](https://msdn.microsoft.com/library/mt204009.aspx) meets hello .NET Framework 4.6 requirement.</span></span>
* <span data-ttu-id="e9d5a-225">SSMS instala a versão x86 de saudação do **ADALSQL. DLL**.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-225">SSMS installs hello x86 version of **ADALSQL.DLL**.</span></span>
* <span data-ttu-id="e9d5a-226">SSDT instala a versão amd64 Olá **ADALSQL. DLL**.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-226">SSDT installs hello amd64 version of **ADALSQL.DLL**.</span></span>
* <span data-ttu-id="e9d5a-227">Olá Visual Studio mais recente, de [Downloads do Visual Studio](https://www.visualstudio.com/downloads/download-visual-studio-vs) atende aos requisitos de saudação do .NET Framework 4.6, mas não instalar a versão necessária amd64 Olá **ADALSQL. DLL**.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-227">hello latest Visual Studio from [Visual Studio Downloads](https://www.visualstudio.com/downloads/download-visual-studio-vs) meets hello .NET Framework 4.6 requirement, but does not install hello required amd64 version of **ADALSQL.DLL**.</span></span>

## <a name="create-contained-database-users-in-your-database-mapped-tooazure-ad-identities"></a><span data-ttu-id="e9d5a-228">Criar usuários de banco de dados independente em seu banco de dados mapeado tooAzure identidades do AD</span><span class="sxs-lookup"><span data-stu-id="e9d5a-228">Create contained database users in your database mapped tooAzure AD identities</span></span>

<span data-ttu-id="e9d5a-229">Autenticação do Active Directory do Azure requer toobe de usuários de banco de dados criado como usuários de banco de dados independente.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-229">Azure Active Directory authentication requires database users toobe created as contained database users.</span></span> <span data-ttu-id="e9d5a-230">Um usuário de banco de dados independente com base em uma identidade do AD do Azure, é um usuário de banco de dados que não tem um logon no banco de dados mestre hello e qual identidade de tooan mapas no hello diretório AD do Azure que está associado ao banco de dados de saudação.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-230">A contained database user based on an Azure AD identity, is a database user that does not have a login in hello master database, and which maps tooan identity in hello Azure AD directory that is associated with hello database.</span></span> <span data-ttu-id="e9d5a-231">Olá identidade do AD do Azure pode ser uma conta de usuário individual ou um grupo.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-231">hello Azure AD identity can be either an individual user account or a group.</span></span> <span data-ttu-id="e9d5a-232">Para saber mais sobre usuários de bancos de dados independentes, veja [Usuários do bancos de dados independentes - Tornando seu banco de dados portátil](https://msdn.microsoft.com/library/ff929188.aspx).</span><span class="sxs-lookup"><span data-stu-id="e9d5a-232">For more information about contained database users, see [Contained Database Users- Making Your Database Portable](https://msdn.microsoft.com/library/ff929188.aspx).</span></span>

> [!NOTE]
> <span data-ttu-id="e9d5a-233">Os usuários de banco de dados (com exceção de saudação de administradores) não podem ser criados usando o portal.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-233">Database users (with hello exception of administrators) cannot be created using portal.</span></span> <span data-ttu-id="e9d5a-234">Funções RBAC não são propagada tooSQL do servidor, banco de dados SQL ou SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-234">RBAC roles are not propagated tooSQL Server, SQL Database, or SQL Data Warehouse.</span></span> <span data-ttu-id="e9d5a-235">Funções RBAC do Azure são usadas para gerenciar recursos do Azure e não se aplicam a toodatabase permissões.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-235">Azure RBAC roles are used for managing Azure Resources, and do not apply toodatabase permissions.</span></span> <span data-ttu-id="e9d5a-236">Por exemplo, Olá **Colaborador do SQL Server** função não conceder acesso tooconnect toohello banco de dados SQL ou SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-236">For example, hello **SQL Server Contributor** role does not grant access tooconnect toohello SQL Database or SQL Data Warehouse.</span></span> <span data-ttu-id="e9d5a-237">permissão de acesso de saudação deve ser concedida diretamente no banco de dados de saudação usando instruções Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-237">hello access permission must be granted directly in hello database using Transact-SQL statements.</span></span>
>

<span data-ttu-id="e9d5a-238">toocreate um Azure usuário de banco de dados contido baseado no AD (diferente de Olá administrador do servidor que possui o banco de dados de saudação), conectar o banco de dados de toohello com uma identidade do AD do Azure, como um usuário com pelo menos Olá **ALTER ANY USER** permissão.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-238">toocreate an Azure AD-based contained database user (other than hello server administrator that owns hello database), connect toohello database with an Azure AD identity, as a user with at least hello **ALTER ANY USER** permission.</span></span> <span data-ttu-id="e9d5a-239">Em seguida, use Olá sintaxe Transact-SQL a seguir:</span><span class="sxs-lookup"><span data-stu-id="e9d5a-239">Then use hello following Transact-SQL syntax:</span></span>

```
CREATE USER <Azure_AD_principal_name> FROM EXTERNAL PROVIDER;
```

<span data-ttu-id="e9d5a-240">*Azure_AD_principal_name* pode ser o nome principal de usuário de saudação de um AD do Azure Olá exibição nome de usuário ou para um grupo do AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-240">*Azure_AD_principal_name* can be hello user principal name of an Azure AD user or hello display name for an Azure AD group.</span></span>

<span data-ttu-id="e9d5a-241">**Exemplos:** toocreate um usuário de banco de dados independente que representa o AD do Azure federado ou gerenciado de usuário de domínio:</span><span class="sxs-lookup"><span data-stu-id="e9d5a-241">**Examples:** toocreate a contained database user representing an Azure AD federated or managed domain user:</span></span>
```
CREATE USER [bob@contoso.com] FROM EXTERNAL PROVIDER;
CREATE USER [alice@fabrikam.onmicrosoft.com] FROM EXTERNAL PROVIDER;
```

<span data-ttu-id="e9d5a-242">toocreate um usuário de banco de dados independente que representa o AD do Azure ou federado grupo de domínio, forneça o nome de exibição de saudação de um grupo de segurança:</span><span class="sxs-lookup"><span data-stu-id="e9d5a-242">toocreate a contained database user representing an Azure AD or federated domain group, provide hello display name of a security group:</span></span>
```
CREATE USER [ICU Nurses] FROM EXTERNAL PROVIDER;
```

<span data-ttu-id="e9d5a-243">toocreate um usuário de banco de dados independente que representa um aplicativo que se conecta usando um token do AD do Azure:</span><span class="sxs-lookup"><span data-stu-id="e9d5a-243">toocreate a contained database user representing an application that connects using an Azure AD token:</span></span>

```
CREATE USER [appName] FROM EXTERNAL PROVIDER;
```

>  [!TIP]
>  <span data-ttu-id="e9d5a-244">Você não pode criar um usuário diretamente de um Active Directory do Azure que não sejam hello Azure Active Directory que é associado à sua assinatura do Azure.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-244">You cannot directly create a user from an Azure Active Directory other than hello Azure Active Directory that is associated with your Azure subscription.</span></span> <span data-ttu-id="e9d5a-245">No entanto, os membros de outros diretórios Active que são os usuários importados no hello associado do Active Directory (conhecidos como usuários externos) podem ser adicionados a grupo do Active Directory tooan no locatário de saudação do Active Directory.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-245">However, members of other Active Directories that are imported users in hello associated Active Directory (known as external users) can be added tooan Active Directory group in hello tenant Active Directory.</span></span> <span data-ttu-id="e9d5a-246">Ao criar um usuário de banco de dados independente para esse grupo AD, hello usuários da saudação externo do Active Directory podem obter acesso tooSQL banco de dados.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-246">By creating a contained database user for that AD group, hello users from hello external Active Directory can gain access tooSQL Database.</span></span>   

<span data-ttu-id="e9d5a-247">Para obter mais informações sobre como criar usuários de banco de dados independente baseados em identidades do Active Directory do Azure, consulte [CRIAR USUÁRIO (Transact-SQL)](http://msdn.microsoft.com/library/ms173463.aspx).</span><span class="sxs-lookup"><span data-stu-id="e9d5a-247">For more information about creating contained database users based on Azure Active Directory identities, see [CREATE USER (Transact-SQL)](http://msdn.microsoft.com/library/ms173463.aspx).</span></span>

> [!NOTE]
> <span data-ttu-id="e9d5a-248">Remover administrador do Active Directory do Azure Olá para o servidor do SQL Azure impede que qualquer usuário de autenticação do AD do Azure conectando o servidor toohello.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-248">Removing hello Azure Active Directory administrator for Azure SQL server prevents any Azure AD authentication user from connecting toohello server.</span></span> <span data-ttu-id="e9d5a-249">Se for necessário, os usuários do Azure AD inutilizáveis poderão ser removidos manualmente por um administrador do Banco de Dados SQL.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-249">If necessary, unusable Azure AD users can be dropped manually by a SQL Database administrator.</span></span>   

>  [!NOTE]
>  <span data-ttu-id="e9d5a-250">Se você receber um **tempo limite de Conexão expirou**, talvez seja necessário Olá tooset `TransparentNetworkIPResolution` parâmetro hello toofalse de cadeia de caracteres de conexão.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-250">If you receive a **Connection Timeout Expired**, you may need tooset hello `TransparentNetworkIPResolution` parameter of hello connection string toofalse.</span></span> <span data-ttu-id="e9d5a-251">Para obter mais informações, consulte [Problema de tempo limite de conexão com o .NET Framework 4.6.1 – TransparentNetworkIPResolution](https://blogs.msdn.microsoft.com/dataaccesstechnologies/2016/05/07/connection-timeout-issue-with-net-framework-4-6-1-transparentnetworkipresolution/).</span><span class="sxs-lookup"><span data-stu-id="e9d5a-251">For more information, see [Connection timeout issue with .NET Framework 4.6.1 - TransparentNetworkIPResolution](https://blogs.msdn.microsoft.com/dataaccesstechnologies/2016/05/07/connection-timeout-issue-with-net-framework-4-6-1-transparentnetworkipresolution/).</span></span>   

   
<span data-ttu-id="e9d5a-252">Quando você cria um usuário de banco de dados, o usuário recebe Olá **conectar** permissão e podem se conectar a banco de dados toothat como um membro da saudação **pública** função.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-252">When you create a database user, that user receives hello **CONNECT** permission and can connect toothat database as a member of hello **PUBLIC** role.</span></span> <span data-ttu-id="e9d5a-253">Olá inicialmente apenas permissões de usuário toohello disponíveis são as permissões concedidas toohello **pública** função ou as permissões concedidas tooany grupos do Windows que ele é membro de.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-253">Initially hello only permissions available toohello user are any permissions granted toohello **PUBLIC** role, or any permissions granted tooany Windows groups that they are a member of.</span></span> <span data-ttu-id="e9d5a-254">Uma vez você provisionar um usuário de banco de dados contido baseado no AD do Azure, você pode conceder permissões adicionais do usuário hello, Olá mesma maneira que você conceda permissão tooany outro tipo de usuário.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-254">Once you provision an Azure AD-based contained database user, you can grant hello user additional permissions, hello same way as you grant permission tooany other type of user.</span></span> <span data-ttu-id="e9d5a-255">Normalmente conceder permissões de funções toodatabase e adicione usuários tooroles.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-255">Typically grant permissions toodatabase roles, and add users tooroles.</span></span> <span data-ttu-id="e9d5a-256">Para saber mais, confira [Noções básicas sobre permissões do Mecanismo de Banco de Dados](http://social.technet.microsoft.com/wiki/contents/articles/4433.database-engine-permission-basics.aspx).</span><span class="sxs-lookup"><span data-stu-id="e9d5a-256">For more information, see [Database Engine Permission Basics](http://social.technet.microsoft.com/wiki/contents/articles/4433.database-engine-permission-basics.aspx).</span></span> <span data-ttu-id="e9d5a-257">Para obter mais informações sobre funções especiais do Banco de dados SQL, veja [Gerenciando bancos de dados e logons no Banco de Dados SQL do Azure](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="e9d5a-257">For more information about special SQL Database roles, see [Managing Databases and Logins in Azure SQL Database](sql-database-manage-logins.md).</span></span>
<span data-ttu-id="e9d5a-258">Um usuário de domínio federado que é importado para um domínio de gerenciar, deve usar a identidade de domínio Olá gerenciado.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-258">A federated domain user that is imported into a manage domain, must use hello managed domain identity.</span></span>

> [!NOTE]
> <span data-ttu-id="e9d5a-259">Os usuários do AD do Azure são marcados nos metadados do banco de dados de saudação com tipo E ((EXTERNAL_USER) e para grupos com tipo X (EXTERNAL_GROUPS).</span><span class="sxs-lookup"><span data-stu-id="e9d5a-259">Azure AD users are marked in hello database metadata with type E (EXTERNAL_USER) and for groups with type X (EXTERNAL_GROUPS).</span></span> <span data-ttu-id="e9d5a-260">Para obter mais informações, consulte [sys.database_principals](https://msdn.microsoft.com/library/ms187328.aspx).</span><span class="sxs-lookup"><span data-stu-id="e9d5a-260">For more information, see [sys.database_principals](https://msdn.microsoft.com/library/ms187328.aspx).</span></span> 
>

## <a name="connect-toohello-user-database-or-data-warehouse-by-using-ssms-or-ssdt"></a><span data-ttu-id="e9d5a-261">Conecte-se toohello depósito de dados ou banco de dados do usuário usando o SSMS ou o SSDT</span><span class="sxs-lookup"><span data-stu-id="e9d5a-261">Connect toohello user database or data warehouse by using SSMS or SSDT</span></span>  
<span data-ttu-id="e9d5a-262">administrador de saudação do AD do Azure tooconfirm está configurado corretamente, conecte-se toohello **mestre** banco de dados usando a conta de administrador de saudação do AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-262">tooconfirm hello Azure AD administrator is properly set up, connect toohello **master** database using hello Azure AD administrator account.</span></span>
<span data-ttu-id="e9d5a-263">tooprovision um Azure usuário de banco de dados contido baseado no AD (diferente de Olá administrador do servidor que possui o banco de dados de saudação), conecte-se toohello banco de dados com uma identidade do AD do Azure que tem o banco de dados do access toohello.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-263">tooprovision an Azure AD-based contained database user (other than hello server administrator that owns hello database), connect toohello database with an Azure AD identity that has access toohello database.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="e9d5a-264">O suporte à autenticação do Azure Active Directory está disponível com o [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) e o [SQL Server Data Tools](https://msdn.microsoft.com/library/mt204009.aspx) no Visual Studio 2015.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-264">Support for Azure Active Directory authentication is available with [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) and [SQL Server Data Tools](https://msdn.microsoft.com/library/mt204009.aspx) in Visual Studio 2015.</span></span> <span data-ttu-id="e9d5a-265">Olá versão de agosto de 2016 do SSMS também inclui suporte para Universal autenticação do Active Directory, que permite que os administradores toorequire usando uma chamada telefônica, mensagem de texto, os cartões inteligentes com o pin ou a notificação do aplicativo móvel do multi-Factor Authentication.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-265">hello August 2016 release of SSMS also includes support for Active Directory Universal Authentication, which allows administrators toorequire Multi-Factor Authentication using a phone call, text message, smart cards with pin, or mobile app notification.</span></span>
 
## <a name="using-an-azure-ad-identity-tooconnect-using-ssms-or-ssdt"></a><span data-ttu-id="e9d5a-266">Usando um tooconnect de identidade do AD do Azure usando o SSMS ou SSDT</span><span class="sxs-lookup"><span data-stu-id="e9d5a-266">Using an Azure AD identity tooconnect using SSMS or SSDT</span></span>  

<span data-ttu-id="e9d5a-267">Olá procedimentos a seguir mostra como tooconnect tooa SQL banco de dados com uma identidade do AD do Azure usando o SQL Server Management Studio ou ferramentas de banco de dados do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-267">hello following procedures show you how tooconnect tooa SQL database with an Azure AD identity using SQL Server Management Studio or SQL Server Database Tools.</span></span>

### <a name="active-directory-integrated-authentication"></a><span data-ttu-id="e9d5a-268">Autenticação integrada do Active Directory</span><span class="sxs-lookup"><span data-stu-id="e9d5a-268">Active Directory integrated authentication</span></span>

<span data-ttu-id="e9d5a-269">Use este método se você efetuou logon tooWindows usando suas credenciais do Active Directory do Azure de um domínio federado.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-269">Use this method if you are logged in tooWindows using your Azure Active Directory credentials from a federated domain.</span></span>

1. <span data-ttu-id="e9d5a-270">Inicie o Management Studio ou ferramentas de dados e no hello **conectar tooServer** (ou **conectar tooDatabase mecanismo**) caixa de diálogo Olá **autenticação** , selecione **Integrada ao active Directory -**.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-270">Start Management Studio or Data Tools and in hello **Connect tooServer** (or **Connect tooDatabase Engine**) dialog box, in hello **Authentication** box, select **Active Directory - Integrated**.</span></span> <span data-ttu-id="e9d5a-271">Nenhuma senha é necessária ou pode ser inserida porque suas credenciais serão apresentados para conexão hello.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-271">No password is needed or can be entered because your existing credentials will be presented for hello connection.</span></span>   

    ![Selecione Autenticação Integrada do AD][11]
2. <span data-ttu-id="e9d5a-273">Clique Olá **opções** botão e em Olá **propriedades de Conexão** página Olá **conectar toodatabase** caixa, digite o nome de saudação do banco de dados de usuário Olá deseja tooconnect Para.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-273">Click hello **Options** button, and on hello **Connection Properties** page, in hello **Connect toodatabase** box, type hello name of hello user database you want tooconnect to.</span></span> <span data-ttu-id="e9d5a-274">(Olá **ID de locatário ou de nome de domínio do AD**"opção tem suporte apenas para **Universal com conexão MFA** opções, caso contrário, ele fica acinzentado.)</span><span class="sxs-lookup"><span data-stu-id="e9d5a-274">(hello **AD domain name or tenant ID**” option is only supported for **Universal with MFA connection** options, otherwise it is greyed out.)</span></span>  

    ![Selecione o nome do banco de dados de saudação][13]

## <a name="active-directory-password-authentication"></a><span data-ttu-id="e9d5a-276">Autenticação de senha do Active Directory</span><span class="sxs-lookup"><span data-stu-id="e9d5a-276">Active Directory password authentication</span></span>

<span data-ttu-id="e9d5a-277">Use este método quando se conectar com um nome principal do AD do Azure usando Olá AD do Azure gerenciados domínio.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-277">Use this method when connecting with an Azure AD principal name using hello Azure AD managed domain.</span></span> <span data-ttu-id="e9d5a-278">Você também pode usar isso para uma conta federada sem domínio toohello de acesso, por exemplo, ao trabalhar remotamente.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-278">You can also use it for federated account without access toohello domain, for example when working remotely.</span></span>

<span data-ttu-id="e9d5a-279">Use este método se você efetuou logon tooWindows usando as credenciais de um domínio que não é federado com o Azure, ou ao usar a autenticação do AD do Azure usando o AD do Azure com base em saudação inicial ou Olá domínio do cliente.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-279">Use this method if you are logged in tooWindows using credentials from a domain that is not federated with Azure, or when using Azure AD authentication using Azure AD based on hello initial or hello client domain.</span></span>

1. <span data-ttu-id="e9d5a-280">Inicie o Management Studio ou ferramentas de dados e no hello **conectar tooServer** (ou **conectar tooDatabase mecanismo**) caixa de diálogo Olá **autenticação** , selecione **Do active Directory - senha**.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-280">Start Management Studio or Data Tools and in hello **Connect tooServer** (or **Connect tooDatabase Engine**) dialog box, in hello **Authentication** box, select **Active Directory - Password**.</span></span>
2. <span data-ttu-id="e9d5a-281">Em Olá **nome de usuário** , digite seu nome de usuário do Active Directory do Azure no formato Olá  **username@domain.com** . Isso deve ser uma conta de saudação do Azure Active Directory ou uma conta de domínio federar com hello Active Directory do Azure.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-281">In hello **User name** box, type your Azure Active Directory user name in hello format **username@domain.com**. This must be an account from hello Azure Active Directory or an account from a domain federate with hello Azure Active Directory.</span></span>
3. <span data-ttu-id="e9d5a-282">Em Olá **senha** caixa, digite a senha do usuário para a conta do Active Directory do Azure hello ou federado conta de domínio.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-282">In hello **Password** box, type your user password for hello Azure Active Directory account or federated domain account.</span></span>

    ![Selecione Autenticação de Senha do AD][12]
4. <span data-ttu-id="e9d5a-284">Clique Olá **opções** botão e em Olá **propriedades de Conexão** página Olá **conectar toodatabase** caixa, digite o nome de saudação do banco de dados de usuário Olá deseja tooconnect Para.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-284">Click hello **Options** button, and on hello **Connection Properties** page, in hello **Connect toodatabase** box, type hello name of hello user database you want tooconnect to.</span></span> <span data-ttu-id="e9d5a-285">(Consulte o gráfico Olá na opção anterior hello.)</span><span class="sxs-lookup"><span data-stu-id="e9d5a-285">(See hello graphic in hello previous option.)</span></span>

## <a name="using-an-azure-ad-identity-tooconnect-from-a-client-application"></a><span data-ttu-id="e9d5a-286">Usando um tooconnect de identidade do AD do Azure de um aplicativo cliente</span><span class="sxs-lookup"><span data-stu-id="e9d5a-286">Using an Azure AD identity tooconnect from a client application</span></span>

<span data-ttu-id="e9d5a-287">Olá procedimentos a seguir mostra como tooconnect tooa SQL banco de dados com uma identidade do AD do Azure de um aplicativo cliente.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-287">hello following procedures show you how tooconnect tooa SQL database with an Azure AD identity from a client application.</span></span>

###  <a name="active-directory-integrated-authentication"></a><span data-ttu-id="e9d5a-288">Autenticação integrada do Active Directory</span><span class="sxs-lookup"><span data-stu-id="e9d5a-288">Active Directory integrated authentication</span></span>

<span data-ttu-id="e9d5a-289">toouse autenticação integrada do Windows, Active Directory do domínio deve ser federado com o Active Directory do Azure.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-289">toouse integrated Windows authentication, your domain’s Active Directory must be federated with Azure Active Directory.</span></span> <span data-ttu-id="e9d5a-290">Seu aplicativo cliente (ou um serviço) conectando o banco de dados de toohello deve estar em execução em um computador ingressado no domínio com credenciais de domínio do usuário.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-290">Your client application (or a service) connecting toohello database must be running on a domain-joined machine under a user’s domain credentials.</span></span>

<span data-ttu-id="e9d5a-291">tooconnect tooa banco de dados usando a autenticação e uma identidade do AD do Azure integrados, palavra-chave de autenticação de saudação na cadeia de caracteres de conexão de banco de dados Olá deve ser definida como tooActive Directory integrado.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-291">tooconnect tooa database using integrated authentication and an Azure AD identity, hello Authentication keyword in hello database connection string must be set tooActive Directory Integrated.</span></span> <span data-ttu-id="e9d5a-292">Olá, exemplo de código a seguir c# usa ADO .NET.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-292">hello following C# code sample uses ADO .NET.</span></span>

```
string ConnectionString =
@"Data Source=n9lxnyuzhv.database.windows.net; Authentication=Active Directory Integrated; Initial Catalog=testdb;";
SqlConnection conn = new SqlConnection(ConnectionString);
conn.Open();
```

<span data-ttu-id="e9d5a-293">palavra-chave de cadeia de caracteres de conexão de Olá ``Integrated Security=True`` não há suporte para conexão tooAzure banco de dados SQL.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-293">hello connection string keyword ``Integrated Security=True`` is not supported for connecting tooAzure SQL Database.</span></span> <span data-ttu-id="e9d5a-294">Ao fazer uma conexão ODBC, será necessário tooremove espaços e definir autenticação too'ActiveDirectoryIntegrated'.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-294">When making an ODBC connection, you will need tooremove spaces and set Authentication too'ActiveDirectoryIntegrated'.</span></span>

### <a name="active-directory-password-authentication"></a><span data-ttu-id="e9d5a-295">Autenticação de senha do Active Directory</span><span class="sxs-lookup"><span data-stu-id="e9d5a-295">Active Directory password authentication</span></span>

<span data-ttu-id="e9d5a-296">tooconnect tooa banco de dados usando a autenticação e uma identidade do AD do Azure integrados, palavra-chave de autenticação Olá deve ser definida como tooActive senha do diretório.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-296">tooconnect tooa database using integrated authentication and an Azure AD identity, hello Authentication keyword must be set tooActive Directory Password.</span></span> <span data-ttu-id="e9d5a-297">cadeia de caracteres de conexão de saudação deve conter a ID de usuário/UID e palavras-chave de senha/PWD e valores.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-297">hello connection string must contain User ID/UID and Password/PWD keywords and values.</span></span> <span data-ttu-id="e9d5a-298">Olá, exemplo de código a seguir c# usa ADO .NET.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-298">hello following C# code sample uses ADO .NET.</span></span>

```
string ConnectionString =
@"Data Source=n9lxnyuzhv.database.windows.net; Authentication=Active Directory Password; Initial Catalog=testdb;  UID=bob@contoso.onmicrosoft.com; PWD=MyPassWord!";
SqlConnection conn = new SqlConnection(ConnectionString);
conn.Open();
```

<span data-ttu-id="e9d5a-299">Saiba mais sobre métodos de autenticação do AD do Azure usando os exemplos de código de demonstração de Olá disponíveis em [do Azure AD Authentication GitHub demonstração](https://github.com/Microsoft/sql-server-samples/tree/master/samples/features/security/azure-active-directory-auth).</span><span class="sxs-lookup"><span data-stu-id="e9d5a-299">Learn more about Azure AD authentication methods using hello demo code samples available at [Azure AD Authentication GitHub Demo](https://github.com/Microsoft/sql-server-samples/tree/master/samples/features/security/azure-active-directory-auth).</span></span>

## <a name="azure-ad-token"></a><span data-ttu-id="e9d5a-300">Token do Azure AD</span><span class="sxs-lookup"><span data-stu-id="e9d5a-300">Azure AD token</span></span>
<span data-ttu-id="e9d5a-301">Esse método de autenticação permite que os serviços de camada intermediária tooconnect tooAzure banco de dados SQL ou do Azure SQL Data Warehouse obtendo um token do Azure Active Directory (AAD).</span><span class="sxs-lookup"><span data-stu-id="e9d5a-301">This authentication method allows middle-tier services tooconnect tooAzure SQL Database or Azure SQL Data Warehouse by obtaining a token from Azure Active Directory (AAD).</span></span> <span data-ttu-id="e9d5a-302">Ele permite cenários sofisticados, incluindo a autenticação baseada em certificado.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-302">It enables sophisticated scenarios including certificate-based authentication.</span></span> <span data-ttu-id="e9d5a-303">Você deve concluir as quatro etapas básicas toouse AD do Azure autenticação de token:</span><span class="sxs-lookup"><span data-stu-id="e9d5a-303">You must complete four basic steps toouse Azure AD token authentication:</span></span>

1. <span data-ttu-id="e9d5a-304">Registrar seu aplicativo com o Active Directory do Azure e obter o id de saudação do cliente para seu código.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-304">Register your application with Azure Active Directory and get hello client id for your code.</span></span> 
2. <span data-ttu-id="e9d5a-305">Crie um aplicativo hello representação do usuário de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-305">Create a database user representing hello application.</span></span> <span data-ttu-id="e9d5a-306">(Concluída anteriormente na etapa 6).</span><span class="sxs-lookup"><span data-stu-id="e9d5a-306">(Completed earlier in step 6.)</span></span>
3. <span data-ttu-id="e9d5a-307">Crie um certificado em execuções de computador cliente Olá aplicativo hello.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-307">Create a certificate on hello client computer runs hello application.</span></span>
4. <span data-ttu-id="e9d5a-308">Adicione certificado hello como uma chave para seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="e9d5a-308">Add hello certificate as a key for your application.</span></span>

<span data-ttu-id="e9d5a-309">Exemplo de cadeia de conexão:</span><span class="sxs-lookup"><span data-stu-id="e9d5a-309">Sample connection string:</span></span>

```
string ConnectionString =@"Data Source=n9lxnyuzhv.database.windows.net; Initial Catalog=testdb;"
SqlConnection conn = new SqlConnection(ConnectionString);
connection.AccessToken = "Your JWT token"
conn.Open();
```

<span data-ttu-id="e9d5a-310">Para obter mais informações, confira [Blog de segurança do SQL Server](https://blogs.msdn.microsoft.com/sqlsecurity/2016/02/09/token-based-authentication-support-for-azure-sql-db-using-azure-ad-auth/).</span><span class="sxs-lookup"><span data-stu-id="e9d5a-310">For more information, see [SQL Server Security Blog](https://blogs.msdn.microsoft.com/sqlsecurity/2016/02/09/token-based-authentication-support-for-azure-sql-db-using-azure-ad-auth/).</span></span>

### <a name="sqlcmd"></a><span data-ttu-id="e9d5a-311">sqlcmd</span><span class="sxs-lookup"><span data-stu-id="e9d5a-311">sqlcmd</span></span>

<span data-ttu-id="e9d5a-312">Olá instruções a seguir, conecte-se usando a versão 13.1 do sqlcmd, que está disponível no hello [Centro de Download](http://go.microsoft.com/fwlink/?LinkID=825643).</span><span class="sxs-lookup"><span data-stu-id="e9d5a-312">hello following statements, connect using version 13.1 of sqlcmd, which is available from hello [Download Center](http://go.microsoft.com/fwlink/?LinkID=825643).</span></span>

```
sqlcmd -S Target_DB_or_DW.testsrv.database.windows.net  -G  
sqlcmd -S Target_DB_or_DW.testsrv.database.windows.net -U bob@contoso.com -P MyAADPassword -G -l 30
```

## <a name="next-steps"></a><span data-ttu-id="e9d5a-313">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="e9d5a-313">Next steps</span></span>
- <span data-ttu-id="e9d5a-314">Para obter uma visão geral de acesso e controle no Banco de Dados SQL, confira [Acesso e controle de Banco de Dados SQL](sql-database-control-access.md).</span><span class="sxs-lookup"><span data-stu-id="e9d5a-314">For an overview of access and control in SQL Database, see [SQL Database access and control](sql-database-control-access.md).</span></span>
- <span data-ttu-id="e9d5a-315">Para obter uma visão geral de logons, usuários e funções de banco de dados no Banco de Dados SQL, confira [Logons, usuários e funções de banco de dados](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="e9d5a-315">For an overview of logins, users, and database roles in SQL Database, see [Logins, users, and database roles](sql-database-manage-logins.md).</span></span>
- <span data-ttu-id="e9d5a-316">Para obter mais informações sobre objetos de banco de dados, confira [Entidades](https://msdn.microsoft.com/library/ms181127.aspx).</span><span class="sxs-lookup"><span data-stu-id="e9d5a-316">For more information about database principals, see [Principals](https://msdn.microsoft.com/library/ms181127.aspx).</span></span>
- <span data-ttu-id="e9d5a-317">Para obter mais informações sobre as funções de banco de dados, confira [Funções de banco de dados](https://msdn.microsoft.com/library/ms189121.aspx).</span><span class="sxs-lookup"><span data-stu-id="e9d5a-317">For more information about database roles, see [Database roles](https://msdn.microsoft.com/library/ms189121.aspx).</span></span>
- <span data-ttu-id="e9d5a-318">Para obter mais informações sobre as regras de firewall no Banco de Dados SQL, confira [Regras de firewall de Banco de Dados SQL](sql-database-firewall-configure.md).</span><span class="sxs-lookup"><span data-stu-id="e9d5a-318">For more information about firewall rules in SQL Database, see [SQL Database firewall rules](sql-database-firewall-configure.md).</span></span>

<!--Image references-->

[1]: ./media/sql-database-aad-authentication/1aad-auth-diagram.png
[2]: ./media/sql-database-aad-authentication/2subscription-relationship.png
[3]: ./media/sql-database-aad-authentication/3admin-structure.png
[4]: ./media/sql-database-aad-authentication/4select-subscription.png
[5]: ./media/sql-database-aad-authentication/5ad-settings-portal.png
[6]: ./media/sql-database-aad-authentication/6edit-directory-select.png
[7]: ./media/sql-database-aad-authentication/7edit-directory-confirm.png
[8]: ./media/sql-database-aad-authentication/8choose-ad.png
[10]: ./media/sql-database-aad-authentication/10choose-admin.png
[11]: ./media/sql-database-aad-authentication/active-directory-integrated.png
[12]: ./media/sql-database-aad-authentication/12connect-using-pw-auth2.png
[13]: ./media/sql-database-aad-authentication/13connect-to-db2.png

