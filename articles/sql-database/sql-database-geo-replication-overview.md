---
title: "aaaFailover grupos e replicação geográfica ativa - banco de dados do SQL Azure | Microsoft Docs"
description: "Grupos de failover automático com replicação geográfica permite toosetup 4 réplicas de banco de dados em qualquer um dos Olá datacenters do Azure e failover autoomatically no evento de saudação de uma interrupção."
services: sql-database
documentationcenter: na
author: anosov1960
manager: jhubbard
editor: monicar
ms.assetid: 2a29f657-82fb-4283-9a83-e14a144bfd93
ms.service: sql-database
ms.custom: business continuity
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: NA
ms.date: 07/10/2017
ms.author: sashan
ms.openlocfilehash: 7a39af8505624c0f19c5abccff051af836b1f9bc
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="overview-failover-groups-and-active-geo-replication"></a><span data-ttu-id="56a25-103">Visão geral: grupos de failover e replicação geográfica ativa</span><span class="sxs-lookup"><span data-stu-id="56a25-103">Overview: Failover groups and active geo-replication</span></span>
<span data-ttu-id="56a25-104">Replicação geográfica permite tooconfigure backup toofour legível bancos de dados secundários em Olá mesmo ou em diferentes data centers locais (regiões).</span><span class="sxs-lookup"><span data-stu-id="56a25-104">Active geo-replication enables you tooconfigure up toofour readable secondary databases in hello same or different data center locations (regions).</span></span> <span data-ttu-id="56a25-105">Bancos de dados secundários estão disponíveis para consulta e para o failover no caso de saudação do data center interrupção ou hello dificuldades tooconnect toohello banco de dados primário.</span><span class="sxs-lookup"><span data-stu-id="56a25-105">Secondary databases are available for querying and for failover in hello case of a data center outage or hello inability tooconnect toohello primary database.</span></span> <span data-ttu-id="56a25-106">saudação failover deve ser iniciada manualmente pelo aplicativo de saudação do usuário hello.</span><span class="sxs-lookup"><span data-stu-id="56a25-106">hello failover must be initiated manually by hello application of hello user.</span></span> <span data-ttu-id="56a25-107">Após o failover, o novo primário de saudação tem um ponto de extremidade de conexão diferente.</span><span class="sxs-lookup"><span data-stu-id="56a25-107">After failover, hello new primary has a different connection end-point.</span></span> 

> [!NOTE]
> <span data-ttu-id="56a25-108">A replicação geográfica ativa agora está disponível para todos os bancos de dados em todas as camadas de serviço e em todas as regiões.</span><span class="sxs-lookup"><span data-stu-id="56a25-108">Active geo-replication is available for all databases in all service tiers in all regions.</span></span>
>  

<span data-ttu-id="56a25-109">Grupos de failover automático do banco de dados SQL do Azure (em visualização) é tooautomatically de recurso criado um banco de dados SQL gerenciar a relação de replicação geográfica, a conectividade e o failover em escala.</span><span class="sxs-lookup"><span data-stu-id="56a25-109">Azure SQL Database auto-failover groups (in-preview) is a SQL Database feature designed tooautomatically manage geo-replication relationship, connectivity, and failover at scale.</span></span> <span data-ttu-id="56a25-110">Com ele, Olá clientes ganho olá capacidade tooautomatically recuperar vários bancos de dados relacionados na região secundária Olá após falhas catastróficas de regionais ou outros eventos não planejados que resultam na perda completa ou parcial de saudação do serviço de banco de dados SQL disponibilidade na região primária hello.</span><span class="sxs-lookup"><span data-stu-id="56a25-110">With it, hello customers gain hello ability tooautomatically recover multiple related databases in hello secondary region after catastrophic regional failures or other unplanned events that result in full or partial loss of hello SQL Database service’s availability in hello primary region.</span></span> <span data-ttu-id="56a25-111">Além disso, eles podem usar Olá bancos de dados secundários legíveis toooffload somente leitura cargas de trabalho.</span><span class="sxs-lookup"><span data-stu-id="56a25-111">Additionally, they can use hello readable secondary databases toooffload read-only workloads.</span></span>  <span data-ttu-id="56a25-112">Como os grupos de failover automático envolvem vários bancos de dados que devem ser configurados no servidor primário hello.</span><span class="sxs-lookup"><span data-stu-id="56a25-112">Because auto-failover groups involve multiple databases they must be configured on hello primary server.</span></span> <span data-ttu-id="56a25-113">Servidores primários e secundários devem estar no hello mesma assinatura.</span><span class="sxs-lookup"><span data-stu-id="56a25-113">Both primary and secondary servers must be in hello same subscription.</span></span> <span data-ttu-id="56a25-114">Grupos de failover automático oferecem suporte a replicação de todos os bancos de dados em Olá grupo tooonly em um servidor secundário em uma região diferente.</span><span class="sxs-lookup"><span data-stu-id="56a25-114">Auto-failover groups support replication of all databases in hello group tooonly one secondary server in a different region.</span></span> <span data-ttu-id="56a25-115">Replicação geográfica ativa, sem grupos de failover automático, permite que até too4 secundários em qualquer região.</span><span class="sxs-lookup"><span data-stu-id="56a25-115">Active geo-replication, without auto-failover groups, allows up too4 secondaries in any region.</span></span>

<span data-ttu-id="56a25-116">Se você estiver usando replicação geográfica ativa e por qualquer motivo que seu banco de dados primário falha, ou simplesmente toobe necessidades colocado offline, você pode iniciar failover tooany dos seus bancos de dados secundários.</span><span class="sxs-lookup"><span data-stu-id="56a25-116">If you are using active geo-replication and for any reason your primary database fails, or simply needs toobe taken offline, you can initiate failover tooany of your secondary databases.</span></span> <span data-ttu-id="56a25-117">Quando o failover for ativado tooone dos bancos de dados secundários hello, todos os outros secundários são automaticamente vinculado toohello novo primário.</span><span class="sxs-lookup"><span data-stu-id="56a25-117">When failover is activated tooone of hello secondary databases, all other secondaries are automatically linked toohello new primary.</span></span> <span data-ttu-id="56a25-118">Se você estiver usando o failover automático e grupos de recuperação de banco de dados (em visualização) toomanage qualquer interrupção que afeta um ou vários bancos de dados de saudação nos resultados de grupo Olá no failover automático.</span><span class="sxs-lookup"><span data-stu-id="56a25-118">If you are using auto-failover groups (in-preview) toomanage database recovery and any outage that impacts one or several of hello databases in hello group results in automatic failover.</span></span> <span data-ttu-id="56a25-119">Você pode configurar a política de failover automático de saudação que melhor atenda às necessidades do seu aplicativo, ou você pode recusá-lo e usar a ativação manual.</span><span class="sxs-lookup"><span data-stu-id="56a25-119">You can configure hello auto-failover policy that best meets your application needs, or you can opt out and use manual activation.</span></span> <span data-ttu-id="56a25-120">Além disso, os grupos de failover automático (em versão prévia) fornecem pontos de extremidade de ouvinte de leitura/gravação e somente leitura que permanecem inalterados durante failovers.</span><span class="sxs-lookup"><span data-stu-id="56a25-120">In addition, auto-failover groups (in-preview) provide read-write and read-only listener end-points that remain unchanged during failovers.</span></span> <span data-ttu-id="56a25-121">Se você usar a ativação de failover manual ou automático, failover alterna todos os bancos de dados secundários em Olá tooprimary de grupo.</span><span class="sxs-lookup"><span data-stu-id="56a25-121">Whether you use manual or automatic failover activation, failover switches all secondary databases in hello group tooprimary.</span></span> <span data-ttu-id="56a25-122">Após a conclusão do failover de banco de dados hello, o registro de DNS do hello é automaticamente atualizada tooredirect Olá pontos de extremidade toohello nova região.</span><span class="sxs-lookup"><span data-stu-id="56a25-122">After hello database failover is completed, hello DNS record is automatically updated tooredirect hello end-points toohello new region.</span></span>

<span data-ttu-id="56a25-123">Você pode gerenciar a replicação e o failover de um banco de dados individual ou de um conjunto de bancos de dados em um servidor ou em um pool elástico usando a replicação geográfica ativa.</span><span class="sxs-lookup"><span data-stu-id="56a25-123">You can manage replication and failover of an individual database or a set of databases on a server or in an elastic pool using active geo-replication.</span></span> <span data-ttu-id="56a25-124">Você pode fazer essa usando Olá [portal do Azure](sql-database-geo-replication-portal.md), [PowerShell](sql-database-geo-replication-powershell.md), [Transact-SQL](sql-database-geo-replication-transact-sql.md), ou hello [API REST](https://msdn.microsoft.com/library/azure/mt163685.aspx).</span><span class="sxs-lookup"><span data-stu-id="56a25-124">You can do that using hello [Azure portal](sql-database-geo-replication-portal.md), [PowerShell](sql-database-geo-replication-powershell.md), [Transact-SQL](sql-database-geo-replication-transact-sql.md), or hello [REST API](https://msdn.microsoft.com/library/azure/mt163685.aspx).</span></span> <span data-ttu-id="56a25-125">Após o failover, certifique-se de requisitos de autenticação de saudação de seu servidor e banco de dados são definidos no novo primário de saudação.</span><span class="sxs-lookup"><span data-stu-id="56a25-125">After failover, ensure hello authentication requirements for your server and database are configured on hello new primary.</span></span> <span data-ttu-id="56a25-126">Para obter detalhes, consulte [Segurança do Banco de Dados SQL do Azure após a recuperação de desastre](sql-database-geo-replication-security-config.md).</span><span class="sxs-lookup"><span data-stu-id="56a25-126">For details, see [SQL Database security after disaster recovery](sql-database-geo-replication-security-config.md).</span></span> <span data-ttu-id="56a25-127">Isso se aplica a ambos os tooactive replicação geográfica e o failover automático grupos (em visualização).</span><span class="sxs-lookup"><span data-stu-id="56a25-127">This applies both tooactive geo-replication and auto-failover groups (in-preview).</span></span>

<span data-ttu-id="56a25-128">Saudação de aproveita a replicação geográfica ativa [AlwaysOn](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server) tecnologia do SQL Server tooasynchronously replicar as transações confirmadas em Olá banco de dados primário tooa banco de dados secundário usando o isolamento de instantâneo de leitura confirmada (RCSI).</span><span class="sxs-lookup"><span data-stu-id="56a25-128">Active geo-replication leverages hello [Always On](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server) technology of SQL Server tooasynchronously replicate committed transactions on hello primary database tooa secondary database using read committed snapshot isolation (RCSI).</span></span> <span data-ttu-id="56a25-129">Os grupos de failover automático fornecem semântica de grupo Olá sobre replicação geográfica ativa, mas Olá mesmo mecanismo de replicação assíncrona é usado.</span><span class="sxs-lookup"><span data-stu-id="56a25-129">Auto-failover groups provide hello group semantics on top of active geo-replication but hello same asynchronous replication mechanism is used.</span></span> <span data-ttu-id="56a25-130">Em qualquer momento determinado, banco de dados secundário Olá pode ficar um pouco atrás do banco de dados primário hello, dados secundários Olá toonever têm transações parciais.</span><span class="sxs-lookup"><span data-stu-id="56a25-130">While at any given point, hello secondary database might be slightly behind hello primary database, hello secondary data is guaranteed toonever have partial transactions.</span></span> <span data-ttu-id="56a25-131">A redundância entre regiões permite recuperar tooquickly de aplicativos da perda permanente de um datacenter inteiro ou partes de um datacenter causada por desastres naturais, falhas humanas catastróficas ou crimes.</span><span class="sxs-lookup"><span data-stu-id="56a25-131">Cross-region redundancy enables applications tooquickly recover from a permanent loss of an entire datacenter or parts of a datacenter caused by natural disasters, catastrophic human errors, or malicious acts.</span></span> <span data-ttu-id="56a25-132">dados específicos de RPO Olá podem ser encontrados em [visão geral da continuidade de negócios](sql-database-business-continuity.md).</span><span class="sxs-lookup"><span data-stu-id="56a25-132">hello specific RPO data can be found at [Overview of Business Continuity](sql-database-business-continuity.md).</span></span>

<span data-ttu-id="56a25-133">Olá figura a seguir mostra um exemplo de replicação geográfica ativa secundária e configurado com um principal na região do hello Centro Norte dos EUA na região do hello Centro Sul dos EUA.</span><span class="sxs-lookup"><span data-stu-id="56a25-133">hello following figure shows an example of active geo-replication configured with a primary in hello North Central US region and secondary in hello South Central US region.</span></span>

![relacionamento de replicação geográfica](./media/sql-database-active-geo-replication/geo-replication-relationship.png)

<span data-ttu-id="56a25-135">Como os bancos de dados secundários Olá são legíveis, eles podem ser usados toooffload somente leitura cargas de trabalho como trabalhos de relatório.</span><span class="sxs-lookup"><span data-stu-id="56a25-135">Because hello secondary databases are readable, they can be used toooffload read-only workloads such as reporting jobs.</span></span> <span data-ttu-id="56a25-136">Se você estiver usando replicação geográfica ativa, é banco de dados secundário toocreate possíveis Olá Olá mesma região com hello primário, mas não aumenta falhas de toocatastrophic de resiliência do aplicativo hello.</span><span class="sxs-lookup"><span data-stu-id="56a25-136">If you are using active geo-replication, it is possible toocreate hello secondary database in hello same region with hello primary, but it does not increase hello application's resilience toocatastrophic failures.</span></span> <span data-ttu-id="56a25-137">Se você estiver usando grupos de failover automático (em versão prévia), seus bancos de dados secundários serão criados sempre em uma região diferente.</span><span class="sxs-lookup"><span data-stu-id="56a25-137">If you are using auto-failover groups (in-preview), your secondary database is always created in a different region.</span></span>

<span data-ttu-id="56a25-138">Além disso, toodisaster recuperação replicação geográfica pode ser usada em Olá os seguintes cenários:</span><span class="sxs-lookup"><span data-stu-id="56a25-138">In addition toodisaster recovery active geo-replication can be used in hello following scenarios:</span></span>

* <span data-ttu-id="56a25-139">**Migração de banco de dados**: você pode usar um banco de dados de um servidor tooanother on-line de toomigrate de replicação geográfica ativa com tempo de inatividade mínimo.</span><span class="sxs-lookup"><span data-stu-id="56a25-139">**Database migration**: You can use active geo-replication toomigrate a database from one server tooanother online with minimum downtime.</span></span>
* <span data-ttu-id="56a25-140">**Atualizações de aplicativos**: você pode criar um secundário extra como uma cópia de failback durante as atualizações de aplicativos.</span><span class="sxs-lookup"><span data-stu-id="56a25-140">**Application upgrades**: You can create an extra secondary as a fail back copy during application upgrades.</span></span>

<span data-ttu-id="56a25-141">continuidade de negócios tooachieve, adicionar redundância de banco de dados entre data centers é apenas parte da solução de saudação.</span><span class="sxs-lookup"><span data-stu-id="56a25-141">tooachieve real business continuity, adding database redundancy between datacenters is only part of hello solution.</span></span> <span data-ttu-id="56a25-142">Recuperando um aplicativo (serviço) a-ponta após uma falha catastrófica exige a recuperação de todos os componentes que constituem o serviço hello e todos os serviços dependentes.</span><span class="sxs-lookup"><span data-stu-id="56a25-142">Recovering an application (service) end-to-end after a catastrophic failure requires recovery of all components that constitute hello service and any dependent services.</span></span> <span data-ttu-id="56a25-143">Exemplos desses componentes incluem software de cliente da saudação (por exemplo, um navegador com JavaScript personalizado), front-ends da web, armazenamento e DNS.</span><span class="sxs-lookup"><span data-stu-id="56a25-143">Examples of these components include hello client software (for example, a browser with a custom JavaScript), web front ends, storage, and DNS.</span></span> <span data-ttu-id="56a25-144">É fundamental que todos os componentes são resiliente toohello mesmas falhas e fiquem disponíveis dentro do objetivo de tempo de recuperação hello (RTO) do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="56a25-144">It is critical that all components are resilient toohello same failures and become available within hello recovery time objective (RTO) of your application.</span></span> <span data-ttu-id="56a25-145">Portanto, você precisa tooidentify todos os serviços dependentes e entende as garantias de saudação e os recursos que eles fornecem.</span><span class="sxs-lookup"><span data-stu-id="56a25-145">Therefore, you need tooidentify all dependent services and understand hello guarantees and capabilities they provide.</span></span> <span data-ttu-id="56a25-146">Em seguida, você deve tomar as etapas adequadas tooensure que seu serviço funcione durante Olá failover dos serviços de saudação do qual ele depende.</span><span class="sxs-lookup"><span data-stu-id="56a25-146">Then, you must take adequate steps tooensure that your service functions during hello failover of hello services on which it depends.</span></span> <span data-ttu-id="56a25-147">Para obter mais informações sobre como criar soluções para a recuperação de desastre, veja [Criando soluções de nuvem para a recuperação de desastre usando a replicação geográfica ativa](sql-database-designing-cloud-solutions-for-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="56a25-147">For more information about designing solutions for disaster recovery, see [Designing Cloud Solutions for Disaster Recovery Using active geo-replication](sql-database-designing-cloud-solutions-for-disaster-recovery.md).</span></span>

## <a name="active-geo-replication-capabilities"></a><span data-ttu-id="56a25-148">Recursos da replicação geográfica ativa</span><span class="sxs-lookup"><span data-stu-id="56a25-148">Active geo-replication capabilities</span></span>
<span data-ttu-id="56a25-149">recurso de replicação geográfica ativa Olá fornece Olá recursos essenciais a seguir:</span><span class="sxs-lookup"><span data-stu-id="56a25-149">hello active geo-replication feature provides hello following essential capabilities:</span></span>
* <span data-ttu-id="56a25-150">**Replicação assíncrona automática**: você só pode criar um banco de dados secundário, adicionando tooan banco de dados existente.</span><span class="sxs-lookup"><span data-stu-id="56a25-150">**Automatic Asynchronous Replication**: You can only create a secondary database by adding tooan existing database.</span></span> <span data-ttu-id="56a25-151">Olá secundário pode ser criado em qualquer servidor de banco de dados SQL.</span><span class="sxs-lookup"><span data-stu-id="56a25-151">hello secondary can be created in any Azure SQL Database server.</span></span> <span data-ttu-id="56a25-152">Depois de criado, banco de dados secundário Olá é preenchido com dados de saudação copiados do banco de dados primário hello.</span><span class="sxs-lookup"><span data-stu-id="56a25-152">Once created, hello secondary database is populated with hello data copied from hello primary database.</span></span> <span data-ttu-id="56a25-153">Este processo é conhecido como propagação.</span><span class="sxs-lookup"><span data-stu-id="56a25-153">This process is known as seeding.</span></span> <span data-ttu-id="56a25-154">Depois que o banco de dados secundário foi criado e propagado, atualizações de banco de dados primário toohello assincronamente são replicados automaticamente toohello banco de dados secundário.</span><span class="sxs-lookup"><span data-stu-id="56a25-154">After secondary database has been created and seeded, updates toohello primary database are asynchronously replicated toohello secondary database automatically.</span></span> <span data-ttu-id="56a25-155">Replicação assíncrona significa que as transações são confirmadas no banco de dados primário Olá antes que eles sejam replicados toohello banco de dados secundário.</span><span class="sxs-lookup"><span data-stu-id="56a25-155">Asynchronous replication means that transactions are committed on hello primary database before they are replicated toohello secondary database.</span></span> 
* <span data-ttu-id="56a25-156">**Bancos de dados secundários legíveis**: um aplicativo pode acessar um banco de dados secundário para operações somente leitura usando Olá iguais ou diferentes elementos de segurança usado para acessar o banco de dados primário hello.</span><span class="sxs-lookup"><span data-stu-id="56a25-156">**Readable secondary databases**: An application can access a secondary database for read-only operations using hello same or different security principals used for accessing hello primary database.</span></span> <span data-ttu-id="56a25-157">Olá bancos de dados secundários operam em isolamento de instantâneo modo tooensure a replicação de atualizações de saudação do hello primário (repetição de log) não é atrasada por consultas executadas no hello secundário.</span><span class="sxs-lookup"><span data-stu-id="56a25-157">hello secondary databases operate in snapshot isolation mode tooensure replication of hello updates of hello primary (log replay) is not delayed by queries executed on hello secondary.</span></span>

   > [!NOTE]
   > <span data-ttu-id="56a25-158">a repetição do log Hello está atrasada no banco de dados secundário Olá se há atualizações de esquema que está recebendo do hello primário que exigem um bloqueio de esquema no banco de dados secundário hello.</span><span class="sxs-lookup"><span data-stu-id="56a25-158">hello log replay is delayed on hello secondary database if there are schema updates that it is receiving from hello Primary that require a schema lock on hello secondary database.</span></span> 
   > 

* <span data-ttu-id="56a25-159">**Vários secundários legíveis**: dois ou mais bancos de dados secundários aumentam a redundância e o nível de proteção para o banco de dados primário hello e aplicativo.</span><span class="sxs-lookup"><span data-stu-id="56a25-159">**Multiple readable secondaries**: Two or more secondary databases increase redundancy and level of protection for hello primary database and application.</span></span> <span data-ttu-id="56a25-160">Se existirem vários bancos de dados secundários, aplicativo hello permanece protegido, mesmo se um dos bancos de dados secundários Olá falhar.</span><span class="sxs-lookup"><span data-stu-id="56a25-160">If multiple secondary databases exist, hello application remains protected even if one of hello secondary databases fails.</span></span> <span data-ttu-id="56a25-161">Se houver apenas um banco de dados secundário, e ele falhar, o aplicativo hello é exposto toohigher risco até que um novo banco de dados secundário é criado.</span><span class="sxs-lookup"><span data-stu-id="56a25-161">If there is only one secondary database, and it fails, hello application is exposed toohigher risk until a new secondary database is created.</span></span>

   > [!NOTE]
   > <span data-ttu-id="56a25-162">Se você estiver usando replicação geográfica ativa toobuild um aplicativo distribuído globalmente e precisa tooprovide somente leitura acessar toodata em mais de 4 regiões, você pode criar secundário de um secundário (um processo conhecido como encadeamento).</span><span class="sxs-lookup"><span data-stu-id="56a25-162">If you are using active geo-replication toobuild a globally distributed application and need tooprovide read-only access toodata in more than 4 regions, you can create secondary of a secondary (a process known as chaining).</span></span> <span data-ttu-id="56a25-163">Dessa forma, que você pode obter uma escala praticamente ilimitada de replicação de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="56a25-163">This way you can achieve virtually unlimited scale of database replication.</span></span> <span data-ttu-id="56a25-164">Além disso, o encadeamento reduz a sobrecarga de Olá de replicação do banco de dados primário hello.</span><span class="sxs-lookup"><span data-stu-id="56a25-164">In addition, chaining reduces hello overhead of replication from hello primary database.</span></span> <span data-ttu-id="56a25-165">compensação de saudação é latência de replicação maior Olá bancos de dados secundários hello mais folha.</span><span class="sxs-lookup"><span data-stu-id="56a25-165">hello trade-off is hello increased replication lag on hello leaf-most secondary databases.</span></span> <span data-ttu-id="56a25-166">.</span><span class="sxs-lookup"><span data-stu-id="56a25-166">.</span></span> 
   >

* <span data-ttu-id="56a25-167">**Suporte para bancos de dados do pool elástico**: a replicação geográfica ativa pode ser configurada para qualquer banco de dados em qualquer pool elástico.</span><span class="sxs-lookup"><span data-stu-id="56a25-167">**Support of elastic pool databases**: Active geo-replication can be configured for any database in any elastic pool.</span></span> <span data-ttu-id="56a25-168">banco de dados secundário Olá pode ser em outro pool Elástico.</span><span class="sxs-lookup"><span data-stu-id="56a25-168">hello secondary database can be in another elastic pool.</span></span> <span data-ttu-id="56a25-169">Para bancos de dados regulares, Olá secundário pode ser um pool Elástico e vice-versa como são camadas de serviço Olá Olá mesmo.</span><span class="sxs-lookup"><span data-stu-id="56a25-169">For regular databases, hello secondary can be an elastic pool and vice versa as long as hello service tiers are hello same.</span></span> 
* <span data-ttu-id="56a25-170">**Nível de desempenho configurável do banco de dados secundário Olá**: um banco de dados secundário pode ser criado com o nível de desempenho inferior Olá primário.</span><span class="sxs-lookup"><span data-stu-id="56a25-170">**Configurable performance level of hello secondary database**: A secondary database can be created with lower performance level than hello primary.</span></span> <span data-ttu-id="56a25-171">Bancos de dados primários e secundários são necessários toohave Olá mesma camada de serviço.</span><span class="sxs-lookup"><span data-stu-id="56a25-171">Both primary and secondary databases are required toohave hello same service tier.</span></span> <span data-ttu-id="56a25-172">Essa opção não é recomendada para aplicativos com atividade de gravação do banco de dados de alta porque a latência de replicação maior Olá aumenta o risco de saudação de perda significativa de dados após um failover.</span><span class="sxs-lookup"><span data-stu-id="56a25-172">This option is not recommended for applications with high database write activity because hello increased replication lag increases hello risk of substantial data loss after a failover.</span></span> <span data-ttu-id="56a25-173">Além disso, depois que o desempenho do aplicativo de saudação do failover é afetado até Olá novo primário é atualizado tooa maior desempenho nível.</span><span class="sxs-lookup"><span data-stu-id="56a25-173">In addition, after failover hello application’s performance is impacted until hello new primary is upgraded tooa higher performance level.</span></span> <span data-ttu-id="56a25-174">Olá, gráfico de porcentagem de e/s de log no portal do Azure fornece uma boa maneira tooestimate Olá mínimo nível de desempenho do hello secundária que é necessário toosustain Olá replicação load.</span><span class="sxs-lookup"><span data-stu-id="56a25-174">hello log IO percentage chart on Azure portal provides a good way tooestimate hello minimal performance level of hello secondary that is required toosustain hello replication load.</span></span> <span data-ttu-id="56a25-175">Por exemplo, se o banco de dados primário é P6 (1000 DTU) e seu percentual de e/s de log é 50% Olá secundário precisa toobe pelo menos P4 (500 DTU).</span><span class="sxs-lookup"><span data-stu-id="56a25-175">For example, if your Primary database is P6 (1000 DTU) and its log IO percent is 50% hello secondary needs toobe at least P4 (500 DTU).</span></span> <span data-ttu-id="56a25-176">Você também pode recuperar dados de e/s de log de hello usando [sys. resource_stats](https://msdn.microsoft.com/library/dn269979.aspx) ou [sys.DM db_resource_stats](https://msdn.microsoft.com/library/dn800981.aspx) modos de exibição de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="56a25-176">You can also retrieve hello log IO data using [sys.resource_stats](https://msdn.microsoft.com/library/dn269979.aspx) or [sys.dm_db_resource_stats](https://msdn.microsoft.com/library/dn800981.aspx) database views.</span></span>  <span data-ttu-id="56a25-177">Para obter mais informações sobre níveis de desempenho do banco de dados SQL hello, consulte [opções de banco de dados SQL e desempenho](sql-database-service-tiers.md).</span><span class="sxs-lookup"><span data-stu-id="56a25-177">For more information on hello SQL Database performance levels, see [SQL Database options and performance](sql-database-service-tiers.md).</span></span> 
* <span data-ttu-id="56a25-178">**Controlado pelo usuário failover e failback**: um banco de dados secundário pode ser explicitamente função primária desligados toohello a qualquer momento pelo aplicativo hello ou usuário de saudação.</span><span class="sxs-lookup"><span data-stu-id="56a25-178">**User-controlled failover and failback**: A secondary database can explicitly be switched toohello primary role at any time by hello application or hello user.</span></span> <span data-ttu-id="56a25-179">Durante uma saudação interrupção real opção "não planejada" deve ser usada, que promove imediatamente toobe secundário Olá primário.</span><span class="sxs-lookup"><span data-stu-id="56a25-179">During a real outage hello “unplanned” option should be used, which immediately promotes a secondary toobe hello primary.</span></span> <span data-ttu-id="56a25-180">Quando primário falha Olá recupera e está disponível novamente, sistema Olá automaticamente marcas hello recuperado primário como um secundário e colocá-lo atualizado com o novo primário de saudação.</span><span class="sxs-lookup"><span data-stu-id="56a25-180">When hello failed primary recovers and is available again, hello system automatically marks hello recovered primary as a secondary and bring it up-to-date with hello new primary.</span></span> <span data-ttu-id="56a25-181">Devido a toohello natureza assíncrona de replicação, uma pequena quantidade de dados pode ser perdida durante failovers não planejados se primário falhar antes que ele replica hello mais recentes alterações toohello secundário.</span><span class="sxs-lookup"><span data-stu-id="56a25-181">Due toohello asynchronous nature of replication, a small amount of data can be lost during unplanned failovers if a primary fails before it replicates hello most recent changes toohello secondary.</span></span> <span data-ttu-id="56a25-182">Quando um principal com vários secundários Falha, sistema Olá reconfigura automaticamente as relações de replicação hello e Olá links restantes secundários toohello recentemente promovido primário sem a necessidade de intervenção do usuário.</span><span class="sxs-lookup"><span data-stu-id="56a25-182">When a primary with multiple secondaries fails over, hello system automatically reconfigures hello replication relationships and links hello remaining secondaries toohello newly promoted primary without requiring any user intervention.</span></span> <span data-ttu-id="56a25-183">Após a interrupção de saudação que causou o failover de saudação é reduzida, pode ser região primária do toohello tooreturn desejável Olá aplicativo.</span><span class="sxs-lookup"><span data-stu-id="56a25-183">After hello outage that caused hello failover is mitigated, it may be desirable tooreturn hello application toohello primary region.</span></span> <span data-ttu-id="56a25-184">toodo que, o comando de failover Olá deve ser chamado com hello "planejado" opção.</span><span class="sxs-lookup"><span data-stu-id="56a25-184">toodo that, hello failover command should be invoked with hello “planned” option.</span></span> 
* <span data-ttu-id="56a25-185">**Manter as credenciais e as regras de firewall em sincronia**: É recomendável usar [regras de firewall de banco de dados](sql-database-firewall-configure.md) para bancos de dados replicada geograficamente para essas regras podem ser replicadas com hello tooensure de banco de dados todos os bancos de dados secundários têm Olá as mesmas regras de firewall que Olá primário.</span><span class="sxs-lookup"><span data-stu-id="56a25-185">**Keeping credentials and firewall rules in sync**: We recommend using [database firewall rules](sql-database-firewall-configure.md) for geo-replicated databases so these rules can be replicated with hello database tooensure all secondary databases have hello same firewall rules as hello primary.</span></span> <span data-ttu-id="56a25-186">Essa abordagem elimina a necessidade de saudação para clientes toomanually configurar e manter as regras de firewall nos servidores que hospedam os bancos de dados primários e secundários hello.</span><span class="sxs-lookup"><span data-stu-id="56a25-186">This approach eliminates hello need for customers toomanually configure and maintain firewall rules on servers hosting both hello primary and secondary databases.</span></span> <span data-ttu-id="56a25-187">Da mesma forma, usando [usuários de banco de dados independente](sql-database-manage-logins.md) de dados acesso garante que bancos de dados primários e secundários sempre têm Olá as credenciais do usuário mesmo durante um failover, não há nenhum interrupções toomismatches devido aos logons e senhas.</span><span class="sxs-lookup"><span data-stu-id="56a25-187">Similarly, using [contained database users](sql-database-manage-logins.md) for data access ensures both primary and secondary databases always have hello same user credentials so during a failover, there is no disruptions due toomismatches with logins and passwords.</span></span> <span data-ttu-id="56a25-188">Com a adição de saudação do [Active Directory do Azure](../active-directory/active-directory-whatis.md), os clientes podem gerenciar usuários acesso tooboth primários e secundários bancos de dados e eliminar Olá necessário para o gerenciamento de credenciais em bancos de dados completamente.</span><span class="sxs-lookup"><span data-stu-id="56a25-188">With hello addition of [Azure Active Directory](../active-directory/active-directory-whatis.md), customers can manage user access tooboth primary and secondary databases and eliminating hello need for managing credentials in databases altogether.</span></span>

## <a name="auto-failover-group-capabilities"></a><span data-ttu-id="56a25-189">Recursos de grupo de failover automático</span><span class="sxs-lookup"><span data-stu-id="56a25-189">Auto-failover group capabilities</span></span>

<span data-ttu-id="56a25-190">O recurso grupos de failover automático fornece uma abstração eficaz de replicação geográfica ativa, dando suporte à replicação em nível de grupo e o failover automático.</span><span class="sxs-lookup"><span data-stu-id="56a25-190">Auto-failover groups feature provides a powerful abstraction of active geo-replication by supporting group level replication and automatic failover.</span></span> <span data-ttu-id="56a25-191">Além disso, remove cadeia de conexão de SQL Olá Olá necessidade toochange após o failover, fornecendo pontos de extremidade do hello ouvinte adicional.</span><span class="sxs-lookup"><span data-stu-id="56a25-191">In addition, it removes hello necessity toochange hello SQL connection string after failover by providing hello additional listener end-points.</span></span> 

* <span data-ttu-id="56a25-192">**Grupo de failover**: Um ou mais grupos de failover podem ser criados entre dois servidores em regiões diferentes (servidores primário e secundário).</span><span class="sxs-lookup"><span data-stu-id="56a25-192">**Failover group**: One or many failover groups can be created between two servers in different regions (primary and secondary servers).</span></span> <span data-ttu-id="56a25-193">Cada grupo pode conter um ou vários bancos de dados são recuperados como uma unidade no caso de alguns ou todos os bancos de dados principais fique indisponíveis devido tooan interrupção na região primária hello.</span><span class="sxs-lookup"><span data-stu-id="56a25-193">Each group can include one or several databases that are recovered as a unit in case all or some primary databases become unavailable due tooan outage in hello primary region.</span></span>  
* <span data-ttu-id="56a25-194">**Servidor primário**: um servidor que hospeda os bancos de dados primários no grupo de failover Olá Olá.</span><span class="sxs-lookup"><span data-stu-id="56a25-194">**Primary server**: A server that hosts hello primary databases in hello failover group.</span></span>
* <span data-ttu-id="56a25-195">**Servidor secundário**: um servidor que hospeda os bancos de dados secundários no grupo de failover Olá Olá.</span><span class="sxs-lookup"><span data-stu-id="56a25-195">**Secondary server**: A server that hosts hello secondary databases in hello failover group.</span></span> <span data-ttu-id="56a25-196">servidor secundário Olá não pode estar em Olá mesma região que o servidor primário hello.</span><span class="sxs-lookup"><span data-stu-id="56a25-196">hello secondary server cannot be in hello same region as hello primary server.</span></span>
* <span data-ttu-id="56a25-197">**Adicionar grupo de toofailover de bancos de dados**: você pode colocar vários bancos de dados dentro de um servidor ou em uma elástica pool em Olá mesmo grupo de failover.</span><span class="sxs-lookup"><span data-stu-id="56a25-197">**Adding databases toofailover group**: You can put several databases within a server or within an elastic pool into hello same failover group.</span></span> <span data-ttu-id="56a25-198">Se você adicionar um grupo de toohello de banco de dados autônomo, ele cria automaticamente um banco de dados secundário usando Olá a mesma edição e nível de desempenho.</span><span class="sxs-lookup"><span data-stu-id="56a25-198">If you add a standalone database toohello group, it automatically creates a secondary database using hello same edition and performance level.</span></span> <span data-ttu-id="56a25-199">Se o banco de dados primário hello está em um pool Elástico, Olá secundário é criado automaticamente no pool Elástico Olá com hello mesmo nome.</span><span class="sxs-lookup"><span data-stu-id="56a25-199">If hello primary database is in an elastic pool, hello secondary is automatically created in hello elastic pool with hello same name.</span></span> <span data-ttu-id="56a25-200">Se você adicionar um banco de dados que já tenha um banco de dados secundário no servidor secundário hello, que a replicação geográfica é herdada por grupo de saudação.</span><span class="sxs-lookup"><span data-stu-id="56a25-200">If you add a database that already has a secondary database in hello secondary server, that geo-replication is inherited by hello group.</span></span>

   > [!NOTE]
   > <span data-ttu-id="56a25-201">Ao adicionar um banco de dados que já tenha um banco de dados secundário em um servidor que não faz parte do grupo de saudação de failover, um novo secundário é criado no servidor secundário hello.</span><span class="sxs-lookup"><span data-stu-id="56a25-201">When adding a database that already has a secondary database in a server that is not part of hello failover group, a new secondary is created in hello secondary server.</span></span> 
   >

* <span data-ttu-id="56a25-202">**Ouvinte de leitura / gravação do grupo de failover**: registro de um DNS CNAME formado como  **&lt;nome do grupo de failover&gt;. t** que aponte toohello URL de servidor primário atual.</span><span class="sxs-lookup"><span data-stu-id="56a25-202">**Failover group read-write listener**: A DNS CNAME record formed as **&lt;failover-group-name&gt;.database.windows.net** that points toohello current primary server URL.</span></span> <span data-ttu-id="56a25-203">Permite aplicativos de SQL de leitura-gravação Olá tootransparently reconectar toohello banco de dados primário quando Olá primário é alterado após o failover.</span><span class="sxs-lookup"><span data-stu-id="56a25-203">It allows hello read-write SQL applications tootransparently reconnect toohello primary database when hello primary changes after failover.</span></span> 
* <span data-ttu-id="56a25-204">**Ouvinte do grupo de failover somente leitura**: registro de um DNS CNAME formado como  **&lt;nome do grupo de failover&gt;. secondary.database.windows.net** que aponta o URL do servidor secundário toohello.</span><span class="sxs-lookup"><span data-stu-id="56a25-204">**Failover group read-only listener**: A DNS CNAME record formed as **&lt;failover-group-name&gt;.secondary.database.windows.net** that points toohello secondary server’s URL.</span></span> <span data-ttu-id="56a25-205">Permite Olá aplicativos SQL somente leitura, conectar tootransparently toohello banco de dados secundário usando Olá especificado de regras de balanceamento de carga.</span><span class="sxs-lookup"><span data-stu-id="56a25-205">It allows hello read-only SQL applications tootransparently connect toohello secondary database using hello specified load-balancing rules.</span></span> <span data-ttu-id="56a25-206">Opcionalmente, você pode especificar se deseja Olá somente leitura tráfego toobe automaticamente redirecionados servidor primário toohello quando o servidor secundário Olá não está disponível.</span><span class="sxs-lookup"><span data-stu-id="56a25-206">Optionally you can specify if you want hello read-only traffic toobe automatically re-directed toohello primary server when hello secondary server is not available.</span></span>
* <span data-ttu-id="56a25-207">**Política de failover automático**: por padrão, o grupo de saudação de failover é configurado com uma política de failover automático.</span><span class="sxs-lookup"><span data-stu-id="56a25-207">**Automatic failover policy**: By default, hello failover group is configured with an automatic failover policy.</span></span> <span data-ttu-id="56a25-208">Olá sistema dispara o failover, assim como Olá falha é detectada.</span><span class="sxs-lookup"><span data-stu-id="56a25-208">hello system triggers failover as soon as hello failure is detected.</span></span> <span data-ttu-id="56a25-209">Se desejar que o fluxo de trabalho do toocontrol Olá failover de aplicativo hello, você pode desativar o failover automático.</span><span class="sxs-lookup"><span data-stu-id="56a25-209">If you want toocontrol hello failover workflow from hello application, you can turn off automatic failover.</span></span> 
* <span data-ttu-id="56a25-210">**Failover manual**: você pode iniciar o failover manualmente a qualquer momento, independentemente da configuração de failover automático de saudação.</span><span class="sxs-lookup"><span data-stu-id="56a25-210">**Manual failover**: You can initiate failover manually at any time regardless of hello automatic failover configuration.</span></span> <span data-ttu-id="56a25-211">Se a política de failover automático não é configurado o failover manual é necessário toorecover bancos de dados no grupo de saudação de failover.</span><span class="sxs-lookup"><span data-stu-id="56a25-211">If automatic failover policy is not configured manual failover is required toorecover databases in hello failover group.</span></span> <span data-ttu-id="56a25-212">Você pode iniciar um failover forçado ou amigável (com sincronização total de dados).</span><span class="sxs-lookup"><span data-stu-id="56a25-212">You can initiate forced or friendly failover (with full data synchronization).</span></span> <span data-ttu-id="56a25-213">Olá este último pode ser região primária do toohello toorelocate usado Olá servidor ativo.</span><span class="sxs-lookup"><span data-stu-id="56a25-213">hello latter could be used toorelocate hello active server toohello primary region.</span></span> <span data-ttu-id="56a25-214">Quando concluir o failover registros DNS de saudação são atualizadas automaticamente tooensure conectividade toohello correto do servidor.</span><span class="sxs-lookup"><span data-stu-id="56a25-214">When failover is completed hello DNS records are automatically updated tooensure connectivity toohello correct server.</span></span>
* <span data-ttu-id="56a25-215">**Período de cortesia com perda de dados**: bancos de dados primários e secundários Olá estão sincronizados usando replicação assíncrona Olá failover pode resultar em perda de dados.</span><span class="sxs-lookup"><span data-stu-id="56a25-215">**Grace period with data loss**: Because hello primary and secondary databases are synchronized using asynchronous replication hello failover may result in data loss.</span></span> <span data-ttu-id="56a25-216">Você pode personalizar tooreflect de política de failover automático Olá perda de toodata tolerância do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="56a25-216">You can customize hello automatic failover policy tooreflect your application’s tolerance toodata loss.</span></span> <span data-ttu-id="56a25-217">Configurando **GracePeriodWithDataLossHours**, você pode controlar quanto tempo o sistema Olá aguarda antes de iniciar o failover de saudação que provavelmente tooresult perda de dados.</span><span class="sxs-lookup"><span data-stu-id="56a25-217">By configuring **GracePeriodWithDataLossHours**, you can control how long hello system waits before initiating hello failover that is likely tooresult data loss.</span></span> 

   > [!NOTE]
   > <span data-ttu-id="56a25-218">Quando o sistema detectar que bancos de dados Olá no grupo Olá ainda estão online (por exemplo, interrupção Olá somente impacto plano de controle de serviço Olá), ele ativa o failover de saudação à sincronização de dados completo (amigável failover), independentemente do valor de saudação imediatamente definido por **GracePeriodWithDataLossHours**.</span><span class="sxs-lookup"><span data-stu-id="56a25-218">When system detects that hello databases in hello group are still online (for example, hello outage only impacted hello service control plane), it immediately activates hello failover with full data synchronization (friendly failover) regardless of hello value set by **GracePeriodWithDataLossHours**.</span></span> <span data-ttu-id="56a25-219">Esse comportamento garante que não há nenhuma perda de dados durante a recuperação de saudação.</span><span class="sxs-lookup"><span data-stu-id="56a25-219">This behavior ensures that there is no data loss during hello recovery.</span></span> <span data-ttu-id="56a25-220">período de cortesia Olá entra em vigor somente quando um failover amigável não é possível.</span><span class="sxs-lookup"><span data-stu-id="56a25-220">hello grace period takes effect only when a friendly failover is not possible.</span></span> <span data-ttu-id="56a25-221">Se a interrupção de saudação mitigada antes de expirar o período de cortesia Olá, Olá failover não está ativado.</span><span class="sxs-lookup"><span data-stu-id="56a25-221">If hello outage is mitigated before hello grace period expires, hello failover is not activated.</span></span>
   >

* <span data-ttu-id="56a25-222">**Vários grupos de failover**: você pode configurar vários grupos de failover para Olá mesmo par de servidores toocontrol Olá de escala de failovers.</span><span class="sxs-lookup"><span data-stu-id="56a25-222">**Multiple failover groups**: You can configure multiple failover groups for hello same pair of servers toocontrol hello scale of failovers.</span></span> <span data-ttu-id="56a25-223">Cada grupo sofre failover de forma independente.</span><span class="sxs-lookup"><span data-stu-id="56a25-223">Each group fails over independently.</span></span> <span data-ttu-id="56a25-224">Se seu aplicativo multilocatário usa pools Elásticos, você pode usar esse recurso toomix primários e secundários os bancos de dados em cada pool.</span><span class="sxs-lookup"><span data-stu-id="56a25-224">If your multi-tenant application uses elastic pools, you can use this capability toomix primary and secondary databases in each pool.</span></span> <span data-ttu-id="56a25-225">Dessa forma, você pode reduzir o impacto de Olá de uma interrupção tooonly metade dos locatários hello.</span><span class="sxs-lookup"><span data-stu-id="56a25-225">This way you can reduce hello impact of an outage tooonly half of hello tenants.</span></span>

## <a name="best-practices-of-building-highly-available-service"></a><span data-ttu-id="56a25-226">Práticas recomendadas para a criação de serviço altamente disponível</span><span class="sxs-lookup"><span data-stu-id="56a25-226">Best practices of building highly available service</span></span>

<span data-ttu-id="56a25-227">toobuild um serviço altamente disponível que usa clientes de saudação do banco de dados SQL do Azure deve seguir estas diretrizes:</span><span class="sxs-lookup"><span data-stu-id="56a25-227">toobuild a highly available service that uses Azure SQL database hello customers should follow these guidelines:</span></span>
- <span data-ttu-id="56a25-228">**Usar grupo de failover**: Um ou mais grupos de failover podem ser criados entre dois servidores em regiões diferentes (servidores primário e secundário).</span><span class="sxs-lookup"><span data-stu-id="56a25-228">**Use failover group**: One or many failover groups can be created between two servers in different regions (primary and secondary servers).</span></span> <span data-ttu-id="56a25-229">Cada grupo pode conter um ou vários bancos de dados são recuperados como uma unidade no caso de alguns ou todos os bancos de dados principais fique indisponíveis devido tooan interrupção na região primária hello.</span><span class="sxs-lookup"><span data-stu-id="56a25-229">Each group can include one or several databases that are recovered as a unit in case all or some primary databases become unavailable due tooan outage in hello primary region.</span></span> <span data-ttu-id="56a25-230">grupo de failover de saudação cria o banco de dados de replicação geográfica secundária com hello mesmo objetivo como Olá principal de serviço.</span><span class="sxs-lookup"><span data-stu-id="56a25-230">hello failover group creates geo-secondary database with hello same service objective as hello primary.</span></span> <span data-ttu-id="56a25-231">Se você adicionar que um replicação geográfica relação toohello failover grupo Certifique-se de que Olá geográfica-secundário existente é configurado com Olá mesmo como objetivo de nível de serviço Olá primário.</span><span class="sxs-lookup"><span data-stu-id="56a25-231">If you add an existing geo-replication relationship toohello failover group make sure hello geo-secondary is configured with hello same service level objective as hello primary.</span></span>
- <span data-ttu-id="56a25-232">**Use o ouvinte de leitura / gravação para a carga de trabalho OLTP**: ao executar o uso de operações OLTP  **&lt;nome do grupo de failover&gt;. t** como URL do servidor de saudação e conexões Olá será primário toohello direcionado automaticamente.</span><span class="sxs-lookup"><span data-stu-id="56a25-232">**Use read-write listener for OLTP workload**: When performing OLTP operations use **&lt;failover-group-name&gt;.database.windows.net** as hello server URL and hello connections will be automatically directed toohello primary.</span></span> <span data-ttu-id="56a25-233">Essa URL não será alterado após o failover de saudação.</span><span class="sxs-lookup"><span data-stu-id="56a25-233">This URL will not change after hello failover.</span></span>  
<span data-ttu-id="56a25-234">Observação Olá failover envolve a atualização Olá registro DNS para que conexões de cliente Olá seja redirecionado toohello novo primário após o cliente Olá cache DNS é atualizado.</span><span class="sxs-lookup"><span data-stu-id="56a25-234">Note hello failover involves updating hello DNS record so hello client connections will be redirected toohello new primary only after hello client DNS cache is refreshed.</span></span>
- <span data-ttu-id="56a25-235">**Use o ouvinte de somente leitura para cargas de trabalho somente leitura**: se você tiver uma logicamente isolada somente leitura carga de trabalho toocertain tolerante a deterioração dos dados, você pode usar o banco de dados secundário Olá no aplicativo hello.</span><span class="sxs-lookup"><span data-stu-id="56a25-235">**Use read-only listener for read-only workload**: If you have a logically isolated read-only workload that is tolerant toocertain staleness of data, you can use hello secondary database in hello application.</span></span> <span data-ttu-id="56a25-236">Para usam sessões somente leitura  **&lt;nome do grupo de failover&gt;. secondary.database.windows.net** como URL do servidor de saudação e conexão Olá será direcionado automaticamente toohello secundário.</span><span class="sxs-lookup"><span data-stu-id="56a25-236">For read-only sessions use **&lt;failover-group-name&gt;.secondary.database.windows.net** as hello server URL and hello connection will be automatically directed toohello secondary.</span></span> <span data-ttu-id="56a25-237">Também recomendamos que você indique na cadeia de conexão a intenção de leitura usando **ApplicationIntent=ReadOnly**.</span><span class="sxs-lookup"><span data-stu-id="56a25-237">It is also recommended that you indicate in connection string read intent by using **ApplicationIntent=ReadOnly**.</span></span> 
- <span data-ttu-id="56a25-238">**Esteja preparado para a degradação do desempenho**: decisão de failover do SQL é independente do restante de saudação do aplicativo hello ou outros serviços usados.</span><span class="sxs-lookup"><span data-stu-id="56a25-238">**Be prepared for perf degradation**: SQL failover decision is independent from hello rest of hello application or other services used.</span></span> <span data-ttu-id="56a25-239">aplicativo Hello pode ser "mixed" com alguns componentes em uma região e alguns em outro.</span><span class="sxs-lookup"><span data-stu-id="56a25-239">hello application may be “mixed” with some components in one region and some in another.</span></span> <span data-ttu-id="56a25-240">degradação de saudação tooavoid, certifique-se de implantação de aplicativo redundantes de saudação na região Olá DR e siga as orientações de saudação neste artigo.</span><span class="sxs-lookup"><span data-stu-id="56a25-240">tooavoid hello degradation, ensure hello redundant application deployment in hello DR region and follow hello guidelines in this article.</span></span>  
<span data-ttu-id="56a25-241">Observação Olá aplicativo na região de DR Olá não tem toouse uma cadeia de caracteres de conexão diferente.</span><span class="sxs-lookup"><span data-stu-id="56a25-241">Note hello application in hello DR region does not have toouse a different connection string.</span></span>  
- <span data-ttu-id="56a25-242">**Preparar para perda de dados**: se for detectada uma interrupção, SQL acionará automaticamente o failover de leitura / gravação se zero toohello de perda de dados é melhor de nossos dados de Conhecimento.</span><span class="sxs-lookup"><span data-stu-id="56a25-242">**Prepare for data loss**: If an outage is detected, SQL automatically triggers read-write failover if there is zero data loss toohello best of our knowledge.</span></span> <span data-ttu-id="56a25-243">Caso contrário, ele aguarda o período de saudação especificado por **GracePeriodWithDataLossHours**.</span><span class="sxs-lookup"><span data-stu-id="56a25-243">Otherwise, it waits for hello period you specified by **GracePeriodWithDataLossHours**.</span></span> <span data-ttu-id="56a25-244">Se você tiver especificado **GracePeriodWithDataLossHours**, esteja preparado para eventual perda de dados.</span><span class="sxs-lookup"><span data-stu-id="56a25-244">If you specified **GracePeriodWithDataLossHours**, be prepared for data loss.</span></span> <span data-ttu-id="56a25-245">Em geral, durante interrupções, o Azure favorece a disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="56a25-245">In general, during outages, Azure favors availability.</span></span> <span data-ttu-id="56a25-246">Se você não puder perda de dados, verifique se tooset **GracePeriodWithDataLossHours** tooa suficientemente grande número, como 24 horas.</span><span class="sxs-lookup"><span data-stu-id="56a25-246">If you cannot afford data loss, make sure tooset **GracePeriodWithDataLossHours** tooa sufficiently large number, such as 24 hours.</span></span> 


## <a name="upgrading-or-downgrading-a-primary-database"></a><span data-ttu-id="56a25-247">Atualizar ou fazer downgrade de um banco de dados primário</span><span class="sxs-lookup"><span data-stu-id="56a25-247">Upgrading or downgrading a primary database</span></span>
<span data-ttu-id="56a25-248">Você pode atualizar ou fazer downgrade de um nível de desempenho diferente do banco de dados primário tooa (dentro de saudação mesma camada de serviço) sem desconectar qualquer banco de dados secundário.</span><span class="sxs-lookup"><span data-stu-id="56a25-248">You can upgrade or downgrade a primary database tooa different performance level (within hello same service tier) without disconnecting any secondary databases.</span></span> <span data-ttu-id="56a25-249">Durante a atualização, é recomendável que você atualiza o banco de dados secundário Olá primeiro e, em seguida, atualiza Olá primário.</span><span class="sxs-lookup"><span data-stu-id="56a25-249">When upgrading, we recommend that you upgrade hello secondary database first, and then upgrade hello primary.</span></span> <span data-ttu-id="56a25-250">Ao fazer o downgrade, inverta a ordem de saudação: downgrade Olá primário primeiro e, em seguida, fazer o downgrade Olá secundário.</span><span class="sxs-lookup"><span data-stu-id="56a25-250">When downgrading, reverse hello order: downgrade hello primary first, and then downgrade hello secondary.</span></span> <span data-ttu-id="56a25-251">Quando você atualiza ou fazer downgrade da camada de serviço diferente de tooa de banco de dados Olá essa recomendação é imposta.</span><span class="sxs-lookup"><span data-stu-id="56a25-251">When you upgrade or downgrade hello database tooa different service tier this recommendation is enforced.</span></span> 

> [!NOTE]
> <span data-ttu-id="56a25-252">Se você criou o banco de dados secundário como parte da configuração de grupo de failover Olá não é banco de dados secundário do hello toodowngrade recomendado.</span><span class="sxs-lookup"><span data-stu-id="56a25-252">If you created secondary database as part of hello failover group configuration it is not recommended toodowngrade hello secondary database.</span></span> <span data-ttu-id="56a25-253">Isso é tooensure sua camada de dados tem tooprocess de capacidade suficiente sua carga de trabalho normal após o failover está ativado.</span><span class="sxs-lookup"><span data-stu-id="56a25-253">This is tooensure your data tier has sufficient capacity tooprocess your regular workload after failover is activated.</span></span> 
>

## <a name="preventing-hello-loss-of-critical-data"></a><span data-ttu-id="56a25-254">Impedir a perda de saudação de dados críticos</span><span class="sxs-lookup"><span data-stu-id="56a25-254">Preventing hello loss of critical data</span></span>
<span data-ttu-id="56a25-255">Devido a toohello alta latência de redes de longa distância, a cópia contínua usa um mecanismo de replicação assíncrona.</span><span class="sxs-lookup"><span data-stu-id="56a25-255">Due toohello high latency of wide area networks, continuous copy uses an asynchronous replication mechanism.</span></span> <span data-ttu-id="56a25-256">A replicação assíncrona tornará a perda de alguns dados inevitável se ocorrer uma falha.</span><span class="sxs-lookup"><span data-stu-id="56a25-256">Asynchronous replication makes some data loss unavoidable if a failure occurs.</span></span> <span data-ttu-id="56a25-257">No entanto, alguns aplicativos podem exigir nenhuma perda de dados.</span><span class="sxs-lookup"><span data-stu-id="56a25-257">However, some applications may require no data loss.</span></span> <span data-ttu-id="56a25-258">tooprotect essas atualizações críticas, um desenvolvedor de aplicativos podem chamar hello [sp_wait_for_database_copy_sync](https://msdn.microsoft.com/library/dn467644.aspx) procedimento de sistema imediatamente após a confirmação de transação de saudação.</span><span class="sxs-lookup"><span data-stu-id="56a25-258">tooprotect these critical updates, an application developer can call hello [sp_wait_for_database_copy_sync](https://msdn.microsoft.com/library/dn467644.aspx) system procedure immediately after committing hello transaction.</span></span> <span data-ttu-id="56a25-259">Chamando **sp_wait_for_database_copy_sync** Olá blocos thread de chamada até que a última transação confirmada de saudação foi transmitida toohello banco de dados secundário.</span><span class="sxs-lookup"><span data-stu-id="56a25-259">Calling **sp_wait_for_database_copy_sync** blocks hello calling thread until hello last committed transaction has been transmitted toohello secondary database.</span></span> <span data-ttu-id="56a25-260">No entanto, ela não espera por Olá transmitido transações toobe repetidos e confirmada no hello secundário.</span><span class="sxs-lookup"><span data-stu-id="56a25-260">However, it does not wait for hello transmitted transactions toobe replayed and committed on hello secondary.</span></span> <span data-ttu-id="56a25-261">**sp_wait_for_database_copy_sync** tooa escopo link de cópia contínua específico.</span><span class="sxs-lookup"><span data-stu-id="56a25-261">**sp_wait_for_database_copy_sync** is scoped tooa specific continuous copy link.</span></span> <span data-ttu-id="56a25-262">Qualquer usuário com hello conexão direitos toohello banco de dados primário pode chamar esse procedimento.</span><span class="sxs-lookup"><span data-stu-id="56a25-262">Any user with hello connection rights toohello primary database can call this procedure.</span></span>

> [!NOTE]
> <span data-ttu-id="56a25-263">**sp_wait_for_database_copy_sync** prevenirá perda de dados depois de um failover, mas não garantirá a sincronização completa para acesso de leitura.</span><span class="sxs-lookup"><span data-stu-id="56a25-263">**sp_wait_for_database_copy_sync** will prevent data loss after failover, but it will not guarantee full synchronization for read access.</span></span> <span data-ttu-id="56a25-264">Olá atraso causado por uma **sp_wait_for_database_copy_sync** chamada de procedimento pode ser significativa e depende do tamanho de Olá Olá do log de transações em tempo de saudação da chamada de saudação.</span><span class="sxs-lookup"><span data-stu-id="56a25-264">hello delay caused by a **sp_wait_for_database_copy_sync** procedure call can be significant and depends on hello size of hello transaction log at hello time of hello call.</span></span> 
> 

## <a name="programmatically-managing-failover-groups-and-active-geo-replication"></a><span data-ttu-id="56a25-265">Gerenciar grupos de failover e a replicação geográfica ativa programaticamente</span><span class="sxs-lookup"><span data-stu-id="56a25-265">Programmatically managing failover groups and active geo-replication</span></span>
<span data-ttu-id="56a25-266">Como discutido anteriormente, grupos de failover automático (em visualização) e ativar replicação geográfica também pode ser gerenciada programaticamente usando o PowerShell do Azure e Olá API REST.</span><span class="sxs-lookup"><span data-stu-id="56a25-266">As discussed previously, auto-failover groups (in-preview) and active geo-replication can also be managed programmatically using Azure PowerShell and hello REST API.</span></span> <span data-ttu-id="56a25-267">Olá tabelas seguintes descreve o conjunto de saudação de comandos disponíveis.</span><span class="sxs-lookup"><span data-stu-id="56a25-267">hello following tables describe hello set of commands available.</span></span>

<span data-ttu-id="56a25-268">**API do Gerenciador de recursos do Azure e segurança baseada em função**: replicação geográfica ativa inclui um conjunto de APIs do Gerenciador de recursos do Azure para gerenciamento, incluindo Olá [API de REST de banco de dados SQL do Azure](https://docs.microsoft.com/rest/api/sql/) e [Azure Cmdlets do PowerShell](https://docs.microsoft.com/powershell/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="56a25-268">**Azure Resource Manager API and role-based security**: Active geo-replication includes a set of Azure Resource Manager APIs for management, including hello [Azure SQL Database REST API](https://docs.microsoft.com/rest/api/sql/) and [Azure PowerShell cmdlets](https://docs.microsoft.com/powershell/azure/overview).</span></span> <span data-ttu-id="56a25-269">Essas APIs exigem o uso de saudação de grupos de recursos e suporte à segurança baseada em função (RBAC).</span><span class="sxs-lookup"><span data-stu-id="56a25-269">These APIs require hello use of resource groups and support role-based security (RBAC).</span></span> <span data-ttu-id="56a25-270">Para obter mais informações sobre como acessar as funções tooimplement, consulte [o controle de acesso](../active-directory/role-based-access-control-what-is.md).</span><span class="sxs-lookup"><span data-stu-id="56a25-270">For more information on how tooimplement access roles, see [Azure Role-Based Access Control](../active-directory/role-based-access-control-what-is.md).</span></span>

> [!NOTE]
> <span data-ttu-id="56a25-271">Muitos dos novos recursos de replicação geográfica ativa só têm suporte usando a [API REST do Azure SQL](../azure-resource-manager/resource-group-overview.md) e [cmdlets do PowerShell do Banco de Dados SQL do Azure](https://msdn.microsoft.com/library/azure/mt163571.aspx) baseados no [Azure Resource Manager](https://msdn.microsoft.com/library/azure/mt574084.aspx).</span><span class="sxs-lookup"><span data-stu-id="56a25-271">Many new features of active geo-replication are only supported using [Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) based [Azure SQL REST API](https://msdn.microsoft.com/library/azure/mt163571.aspx) and [Azure SQL Database PowerShell cmdlets](https://msdn.microsoft.com/library/azure/mt574084.aspx).</span></span> <span data-ttu-id="56a25-272">Olá [(clássico) API de REST](https://msdn.microsoft.com/library/azure/dn505719.aspx) e [cmdlets de banco de dados do SQL do Azure (clássica)](https://msdn.microsoft.com/library/azure/dn546723.aspx) têm suporte para compatibilidade com versões anteriores, usando Olá APIs com base em Gerenciador de recursos do Azure são recomendadas.</span><span class="sxs-lookup"><span data-stu-id="56a25-272">hello [(classic) REST API](https://msdn.microsoft.com/library/azure/dn505719.aspx) and [Azure SQL Database (classic) cmdlets](https://msdn.microsoft.com/library/azure/dn546723.aspx) are supported for backward compatibility so using hello Azure Resource Manager-based APIs are recommended.</span></span> 
> 

## <a name="manage-sql-database-failover-using-using-transact-sql"></a><span data-ttu-id="56a25-273">Gerenciar SQL database failover usando Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="56a25-273">Manage SQL database failover using using Transact-SQL</span></span>

| <span data-ttu-id="56a25-274">Command</span><span class="sxs-lookup"><span data-stu-id="56a25-274">Command</span></span> | <span data-ttu-id="56a25-275">Descrição</span><span class="sxs-lookup"><span data-stu-id="56a25-275">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="56a25-276">ALTER DATABASE (Banco de Dados SQL do Azure)</span><span class="sxs-lookup"><span data-stu-id="56a25-276">ALTER DATABASE (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt574871.aspx) |<span data-ttu-id="56a25-277">Use Adicionar SECUNDÁRIO ON SERVER argumento toocreate um banco de dados secundário para um banco de dados existente e inicia a replicação de dados</span><span class="sxs-lookup"><span data-stu-id="56a25-277">Use ADD SECONDARY ON SERVER argument toocreate a secondary database for an existing database and starts data replication</span></span> |
| [<span data-ttu-id="56a25-278">ALTER DATABASE (Banco de Dados SQL do Azure)</span><span class="sxs-lookup"><span data-stu-id="56a25-278">ALTER DATABASE (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt574871.aspx) |<span data-ttu-id="56a25-279">Usar o FAILOVER ou FORCE_FAILOVER_ALLOW_DATA_LOSS tooswitch um failover do banco de dados secundário toobe tooinitiate primário</span><span class="sxs-lookup"><span data-stu-id="56a25-279">Use FAILOVER or FORCE_FAILOVER_ALLOW_DATA_LOSS tooswitch a secondary database toobe primary tooinitiate failover</span></span> |
| [<span data-ttu-id="56a25-280">ALTER DATABASE (Banco de Dados SQL do Azure)</span><span class="sxs-lookup"><span data-stu-id="56a25-280">ALTER DATABASE (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt574871.aspx) |<span data-ttu-id="56a25-281">Use remover SECUNDÁRIO ON SERVER tooterminate uma replicação de dados entre um banco de dados SQL e hello especificado banco de dados secundário.</span><span class="sxs-lookup"><span data-stu-id="56a25-281">Use REMOVE SECONDARY ON SERVER tooterminate a data replication between a SQL Database and hello specified secondary database.</span></span> |
| [<span data-ttu-id="56a25-282">sys.geo_replication_links (Banco de Dados SQL do Azure)</span><span class="sxs-lookup"><span data-stu-id="56a25-282">sys.geo_replication_links (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt575501.aspx) |<span data-ttu-id="56a25-283">Retorna informações sobre todos os links de replicação existente para cada banco de dados no servidor lógico do hello Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="56a25-283">Returns information about all existing replication links for each database on hello Azure SQL Database logical server.</span></span> |
| [<span data-ttu-id="56a25-284">sys.dm_geo_replication_link_status (Banco de Dados SQL do Azure)</span><span class="sxs-lookup"><span data-stu-id="56a25-284">sys.dm_geo_replication_link_status (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt575504.aspx) |<span data-ttu-id="56a25-285">Obtém Olá último horário de duplicação, última latência de replicação e outras informações sobre o link de replicação Olá para um determinado banco de dados SQL.</span><span class="sxs-lookup"><span data-stu-id="56a25-285">Gets hello last replication time, last replication lag, and other information about hello replication link for a given SQL database.</span></span> |
| [<span data-ttu-id="56a25-286">sys.dm_operation_status (Banco de Dados SQL do Azure)</span><span class="sxs-lookup"><span data-stu-id="56a25-286">sys.dm_operation_status (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/dn270022.aspx) |<span data-ttu-id="56a25-287">Mostra o status de saudação para todas as operações de banco de dados, incluindo status Olá Olá dos links de replicação.</span><span class="sxs-lookup"><span data-stu-id="56a25-287">Shows hello status for all database operations including hello status of hello replication links.</span></span> |
| [<span data-ttu-id="56a25-288">sp_wait_for_database_copy_sync (Banco de Dados SQL do Azure)</span><span class="sxs-lookup"><span data-stu-id="56a25-288">sp_wait_for_database_copy_sync (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/dn467644.aspx) |<span data-ttu-id="56a25-289">faz com que Olá aplicativo toowait até que todas as transações confirmadas sejam replicadas e reconhecidas pelo Olá banco de dados secundário.</span><span class="sxs-lookup"><span data-stu-id="56a25-289">causes hello application toowait until all committed transactions are replicated and acknowledged by hello active secondary database.</span></span> |
|  | |

## <a name="manage-sql-database-failover-using-using-powershell"></a><span data-ttu-id="56a25-290">Gerenciar SQL database failover usando PowerShell</span><span class="sxs-lookup"><span data-stu-id="56a25-290">Manage SQL database failover using using PowerShell</span></span>

| <span data-ttu-id="56a25-291">Cmdlet</span><span class="sxs-lookup"><span data-stu-id="56a25-291">Cmdlet</span></span> | <span data-ttu-id="56a25-292">Descrição</span><span class="sxs-lookup"><span data-stu-id="56a25-292">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="56a25-293">Get-AzureRmSqlDatabase</span><span class="sxs-lookup"><span data-stu-id="56a25-293">Get-AzureRmSqlDatabase</span></span>](/powershell/module/azurerm.sql/get-azurermsqldatabase) |<span data-ttu-id="56a25-294">Obtém um ou mais bancos de dados.</span><span class="sxs-lookup"><span data-stu-id="56a25-294">Gets one or more databases.</span></span> |
| [<span data-ttu-id="56a25-295">New-AzureRmSqlDatabaseSecondary</span><span class="sxs-lookup"><span data-stu-id="56a25-295">New-AzureRmSqlDatabaseSecondary</span></span>](/powershell/module/azurerm.sql/new-azurermsqldatabasesecondary) |<span data-ttu-id="56a25-296">Cria um banco de dados secundário para um banco de dados existente e inicia a replicação de dados.</span><span class="sxs-lookup"><span data-stu-id="56a25-296">Creates a secondary database for an existing database and starts data replication.</span></span> |
| [<span data-ttu-id="56a25-297">Set-AzureRmSqlDatabaseSecondary</span><span class="sxs-lookup"><span data-stu-id="56a25-297">Set-AzureRmSqlDatabaseSecondary</span></span>](/powershell/module/azurerm.sql/set-azurermsqldatabasesecondary) |<span data-ttu-id="56a25-298">Alterna um failover do banco de dados secundário toobe tooinitiate primário.</span><span class="sxs-lookup"><span data-stu-id="56a25-298">Switches a secondary database toobe primary tooinitiate failover.</span></span> |
| [<span data-ttu-id="56a25-299">Remove-AzureRmSqlDatabaseSecondary</span><span class="sxs-lookup"><span data-stu-id="56a25-299">Remove-AzureRmSqlDatabaseSecondary</span></span>](/powershell/module/azurerm.sql/remove-azurermsqldatabasesecondary) |<span data-ttu-id="56a25-300">Encerra a replicação de dados entre um banco de dados SQL e Olá secundário banco de dados especificado.</span><span class="sxs-lookup"><span data-stu-id="56a25-300">Terminates data replication between a SQL Database and hello specified secondary database.</span></span> |
| [<span data-ttu-id="56a25-301">Get-AzureRmSqlDatabaseReplicationLink</span><span class="sxs-lookup"><span data-stu-id="56a25-301">Get-AzureRmSqlDatabaseReplicationLink</span></span>](/powershell/module/azurerm.sql/get-azurermsqldatabasereplicationlink) |<span data-ttu-id="56a25-302">Obtém os links de replicação geográfica Olá entre um banco de dados do SQL Azure e um grupo de recursos ou do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="56a25-302">Gets hello geo-replication links between an Azure SQL Database and a resource group or SQL Server.</span></span> |
| [<span data-ttu-id="56a25-303">New-AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="56a25-303">New-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/set-azurermsqldatabasefailovergroup) |   <span data-ttu-id="56a25-304">Esse comando cria um grupo de failover e registra-o nos servidores primário e secundário</span><span class="sxs-lookup"><span data-stu-id="56a25-304">This command creates a failover group and registers it on both primary and secondary servers</span></span>|
| [<span data-ttu-id="56a25-305">Remove-AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="56a25-305">Remove-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/remove-azurermsqldatabasefailovergroup) | <span data-ttu-id="56a25-306">Remove o grupo de failover de saudação do servidor de saudação e exclui todos os bancos de dados secundários incluídos Olá grupo</span><span class="sxs-lookup"><span data-stu-id="56a25-306">Removes hello failover group from hello server and deletes all secondary databases included hello group</span></span> |
| [<span data-ttu-id="56a25-307">Get-AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="56a25-307">Get-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/get-azurermsqldatabasefailovergroup) | <span data-ttu-id="56a25-308">Recupera a configuração do grupo de failover Olá</span><span class="sxs-lookup"><span data-stu-id="56a25-308">Retrieves hello failover group configuration</span></span> |
| [<span data-ttu-id="56a25-309">Set-AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="56a25-309">Set-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/set-azurermsqldatabasefailovergroup) |   <span data-ttu-id="56a25-310">Modifica a configuração de saudação do grupo de saudação de failover</span><span class="sxs-lookup"><span data-stu-id="56a25-310">Modifies hello configuration of hello failover group</span></span> |
| [<span data-ttu-id="56a25-311">Switch-AzureRMSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="56a25-311">Switch-AzureRMSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/switch-azurermsqldatabasefailovergroup) | <span data-ttu-id="56a25-312">Dispara o failover de servidor secundário do hello failover grupo toohello</span><span class="sxs-lookup"><span data-stu-id="56a25-312">Triggers failover of hello failover group toohello secondary server</span></span> |
|  | |

> [!IMPORTANT]
> <span data-ttu-id="56a25-313">Para scripts de exemplo, consulte [Configurar e realizar o failover de um banco de dados individual usando a replicação geográfica ativa](scripts/sql-database-setup-geodr-and-failover-database-powershell.md), [Configurar e realizar o failover de um banco de dados em pool usando a replicação geográfica ativa](scripts/sql-database-setup-geodr-and-failover-pool-powershell.md) e [Configurar e realizar o failover de um grupo de failover para um banco de dados individual (versão prévia)] (scripts/sql-database-setup-geodr-failover-database-failover-group-powershell.md.</span><span class="sxs-lookup"><span data-stu-id="56a25-313">For sample scripts, see [Configure and failover a single database using active geo-replication](scripts/sql-database-setup-geodr-and-failover-database-powershell.md), [Configure and failover a pooled database using active geo-replication](scripts/sql-database-setup-geodr-and-failover-pool-powershell.md), and  [Configure and failover a failover group for a single database (preview)](scripts/sql-database-setup-geodr-failover-database-failover-group-powershell.md.</span></span>
>

## <a name="manage-sql-database-failover-using-hello-rest-api"></a><span data-ttu-id="56a25-314">Gerenciar usando a API REST de saudação de failover do banco de dados SQL</span><span class="sxs-lookup"><span data-stu-id="56a25-314">Manage SQL database failover using hello REST API</span></span>
| <span data-ttu-id="56a25-315">API</span><span class="sxs-lookup"><span data-stu-id="56a25-315">API</span></span> | <span data-ttu-id="56a25-316">Descrição</span><span class="sxs-lookup"><span data-stu-id="56a25-316">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="56a25-317">Criar ou atualizar banco de dados (createMode=Restore)</span><span class="sxs-lookup"><span data-stu-id="56a25-317">Create or Update Database (createMode=Restore)</span></span>](/rest/api/sql/Databases/CreateOrUpdate) |<span data-ttu-id="56a25-318">Cria, atualiza ou restaura um banco de dados primário ou secundário.</span><span class="sxs-lookup"><span data-stu-id="56a25-318">Creates, updates, or restores a primary or a secondary database.</span></span> |
| [<span data-ttu-id="56a25-319">Obter, Criar ou Atualizar o Status de um Banco de Dados</span><span class="sxs-lookup"><span data-stu-id="56a25-319">Get Create or Update Database Status</span></span>](/rest/api/sql/Databases/CreateOrUpdate) |<span data-ttu-id="56a25-320">Retorna o status de saudação durante uma operação de criação.</span><span class="sxs-lookup"><span data-stu-id="56a25-320">Returns hello status during a create operation.</span></span> |
| [<span data-ttu-id="56a25-321">Definir o banco de dados secundário como primário (Failover planejado)</span><span class="sxs-lookup"><span data-stu-id="56a25-321">Set Secondary Database as Primary (Planned Failover)</span></span>](https://docs.microsoft.com/rest/api/sql/replicationlinkss#ReplicationLinks_Failover) |<span data-ttu-id="56a25-322">Define qual banco de dados de réplica é primário efetuando failover do banco de dados de réplica primária atual hello.</span><span class="sxs-lookup"><span data-stu-id="56a25-322">Sets which replica database is primary by failing over from hello current primary replica database.</span></span> |
| [<span data-ttu-id="56a25-323">Definir o banco de dados secundário como primário r (Failover não planejado)</span><span class="sxs-lookup"><span data-stu-id="56a25-323">Set Secondary Database as Primary (Unplanned Failover)</span></span>](https://docs.microsoft.com/rest/api/sql/replicationlinks#ReplicationLinks_FailoverAllowDataLoss) |<span data-ttu-id="56a25-324">Define qual banco de dados de réplica é primário efetuando failover do banco de dados de réplica primária atual hello.</span><span class="sxs-lookup"><span data-stu-id="56a25-324">Sets which replica database is primary by failing over from hello current primary replica database.</span></span> <span data-ttu-id="56a25-325">Esta operação pode resultar em perda de dados.</span><span class="sxs-lookup"><span data-stu-id="56a25-325">This operation might result in data loss.</span></span> |
| [<span data-ttu-id="56a25-326">Obter link de replicação</span><span class="sxs-lookup"><span data-stu-id="56a25-326">Get Replication Link</span></span>](/rest/api/sql/replicationlinks/get) |<span data-ttu-id="56a25-327">Obtém um link de replicação específico para um determinado Banco de Dados SQL em uma parceria de replicação geográfica.</span><span class="sxs-lookup"><span data-stu-id="56a25-327">Gets a specific replication link for a given SQL database in a geo-replication partnership.</span></span> <span data-ttu-id="56a25-328">Recupera informações de saudação visíveis na exibição de catálogo sys.geo_replication_links hello.</span><span class="sxs-lookup"><span data-stu-id="56a25-328">It retrieves hello information visible in hello sys.geo_replication_links catalog view.</span></span> |
| [<span data-ttu-id="56a25-329">Links de Replicação - Listar pelo Banco de Dados</span><span class="sxs-lookup"><span data-stu-id="56a25-329">Replication Links - List By Database</span></span>](/rest/api/sql/replicationlinks/listbydatabase) | <span data-ttu-id="56a25-330">Obtém todos os links de replicação para um determinado Banco de Dados SQL em uma parceria de replicação geográfica.</span><span class="sxs-lookup"><span data-stu-id="56a25-330">Gets all replication links for a given SQL database in a geo-replication partnership.</span></span> <span data-ttu-id="56a25-331">Recupera informações de saudação visíveis na exibição de catálogo sys.geo_replication_links hello.</span><span class="sxs-lookup"><span data-stu-id="56a25-331">It retrieves hello information visible in hello sys.geo_replication_links catalog view.</span></span> |
| [<span data-ttu-id="56a25-332">Excluir links de replicação</span><span class="sxs-lookup"><span data-stu-id="56a25-332">Delete Replication Link</span></span>](/rest/api/sql/databases/delete) | <span data-ttu-id="56a25-333">Exclui um link de replicação do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="56a25-333">Deletes a database replication link.</span></span> <span data-ttu-id="56a25-334">Não pode ser feito durante o failover.</span><span class="sxs-lookup"><span data-stu-id="56a25-334">Cannot be done during failover.</span></span> |
| <span data-ttu-id="56a25-335">[Criar ou atualizar um grupo de failover] / rest/api/sql/failovergroups/createorupdate)</span><span class="sxs-lookup"><span data-stu-id="56a25-335">[Create or Update Failover Group]/rest/api/sql/failovergroups/createorupdate)</span></span> | <span data-ttu-id="56a25-336">Criar ou atualizar grupo de failover</span><span class="sxs-lookup"><span data-stu-id="56a25-336">Creates or updates a failover group</span></span> |
| [<span data-ttu-id="56a25-337">Excluir grupo de failover</span><span class="sxs-lookup"><span data-stu-id="56a25-337">Delete Failover Group</span></span>](/rest/api/sql/failovergroups/delete) | <span data-ttu-id="56a25-338">Remove o grupo de failover de saudação do servidor de saudação</span><span class="sxs-lookup"><span data-stu-id="56a25-338">Removes hello failover group from hello server</span></span> |
| [<span data-ttu-id="56a25-339">Failover (planejado)</span><span class="sxs-lookup"><span data-stu-id="56a25-339">Failover (Planned)</span></span>](/rest/api/sql/failovergroups/failover) | <span data-ttu-id="56a25-340">O failover do servidor de toothis de servidor principal atual hello.</span><span class="sxs-lookup"><span data-stu-id="56a25-340">Fails over from hello current primary server toothis server.</span></span> |
| [<span data-ttu-id="56a25-341">O Failover forçado permite a perda de dados</span><span class="sxs-lookup"><span data-stu-id="56a25-341">Force Failover Allow Data Loss</span></span>](/rest/api/sql/failovergroups/forcefailoverallowdataloss) |<span data-ttu-id="56a25-342">aflições através do servidor de toothis de servidor principal atual hello.</span><span class="sxs-lookup"><span data-stu-id="56a25-342">ails over from hello current primary server toothis server.</span></span> <span data-ttu-id="56a25-343">Esta operação pode resultar em perda de dados.</span><span class="sxs-lookup"><span data-stu-id="56a25-343">This operation might result in data loss.</span></span> |
| [<span data-ttu-id="56a25-344">Obter grupo de failover</span><span class="sxs-lookup"><span data-stu-id="56a25-344">Get Failover Group</span></span>](/rest/api/sql/failovergroups/get) | <span data-ttu-id="56a25-345">Obtém um grupo de failover.</span><span class="sxs-lookup"><span data-stu-id="56a25-345">Gets a failover group.</span></span> |
| [<span data-ttu-id="56a25-346">Listar grupos de failover pelo servidor</span><span class="sxs-lookup"><span data-stu-id="56a25-346">List Failover Groups By Server</span></span>](/rest/api/sql/failovergroups/listbyserver) | <span data-ttu-id="56a25-347">Lista os grupos de failover de saudação em um servidor.</span><span class="sxs-lookup"><span data-stu-id="56a25-347">Lists hello failover groups in a server.</span></span> |
| [<span data-ttu-id="56a25-348">Atualizar grupo de failover</span><span class="sxs-lookup"><span data-stu-id="56a25-348">Update Failover Group</span></span>](/rest/api/sql/failovergroups/update) | <span data-ttu-id="56a25-349">Atualiza um grupo de failover.</span><span class="sxs-lookup"><span data-stu-id="56a25-349">Updates a failover group.</span></span> |
|  | |

## <a name="next-steps"></a><span data-ttu-id="56a25-350">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="56a25-350">Next steps</span></span>
* <span data-ttu-id="56a25-351">Para exemplos de scripts, consulte:</span><span class="sxs-lookup"><span data-stu-id="56a25-351">For sample scripts, see:</span></span>
   - [<span data-ttu-id="56a25-352">Configurar e fazer failover de um banco de dados individual usando replicação geográfica ativa</span><span class="sxs-lookup"><span data-stu-id="56a25-352">Configure and failover a single database using active geo-replication</span></span>](scripts/sql-database-setup-geodr-and-failover-database-powershell.md)
   - [<span data-ttu-id="56a25-353">Configurar e fazer failover de um banco de dados em pool usando replicação geográfica ativa</span><span class="sxs-lookup"><span data-stu-id="56a25-353">Configure and failover a pooled database using active geo-replication</span></span>](scripts/sql-database-setup-geodr-and-failover-pool-powershell.md)
   - [<span data-ttu-id="56a25-354">Configurar e realizar o failover de um grupo de failover para um banco de dados individual (versão prévia)</span><span class="sxs-lookup"><span data-stu-id="56a25-354">Configure and failover a failover group for a single database (preview)</span></span>](scripts/sql-database-setup-geodr-failover-database-failover-group-powershell.md)
* <span data-ttu-id="56a25-355">Para obter uma visão geral e os cenários de continuidade dos negócios, confira [Visão geral da continuidade dos negócios](sql-database-business-continuity.md)</span><span class="sxs-lookup"><span data-stu-id="56a25-355">For a business continuity overview and scenarios, see [Business continuity overview](sql-database-business-continuity.md)</span></span>
* <span data-ttu-id="56a25-356">toolearn sobre backups de banco de dados do SQL Azure automatizadas, consulte [backups automatizados de banco de dados SQL](sql-database-automated-backups.md).</span><span class="sxs-lookup"><span data-stu-id="56a25-356">toolearn about Azure SQL Database automated backups, see [SQL Database automated backups](sql-database-automated-backups.md).</span></span>
* <span data-ttu-id="56a25-357">toolearn sobre como usar backups automatizados para recuperação, consulte [restaurar um banco de dados de backups de iniciadas pelo serviço de saudação](sql-database-recovery-using-backups.md).</span><span class="sxs-lookup"><span data-stu-id="56a25-357">toolearn about using automated backups for recovery, see [Restore a database from hello service-initiated backups](sql-database-recovery-using-backups.md).</span></span>
* <span data-ttu-id="56a25-358">toolearn sobre os requisitos de autenticação para um novo servidor primário e o banco de dados, consulte [segurança de banco de dados SQL após a recuperação de desastres](sql-database-geo-replication-security-config.md).</span><span class="sxs-lookup"><span data-stu-id="56a25-358">toolearn about authentication requirements for a new primary server and database, see [SQL Database security after disaster recovery](sql-database-geo-replication-security-config.md).</span></span>

