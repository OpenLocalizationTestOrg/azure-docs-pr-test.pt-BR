---
title: "Máscara de dados dinâmicos do Banco de Dados SQL do Azure | Microsoft Docs"
description: "A Máscara de dados dinâmicos do Banco de Dados SQL limita a exposição de dados confidenciais através do mascaramento dos dados para usuários sem privilégios"
services: sql-database
documentationcenter: 
author: ronitr
manager: jhubbard
editor: 
ms.assetid: 4b36d78e-7749-4f26-9774-eed1120a9182
ms.service: sql-database
ms.custom: security
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: data-services
ms.date: 03/09/2017
ms.author: ronitr; ronmat
ms.openlocfilehash: 83deadce3cbdd30aa50d22d99378bd86133677c4
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/11/2017
---
# <a name="sql-database-dynamic-data-masking"></a><span data-ttu-id="f23ec-103">Máscara de dados dinâmicos do Banco de Dados SQL</span><span class="sxs-lookup"><span data-stu-id="f23ec-103">SQL Database dynamic data masking</span></span>

<span data-ttu-id="f23ec-104">A máscara de dados dinâmicos do Banco de Dados SQL limita a exposição de dados confidenciais através do mascaramento dos dados para usuários sem privilégios.</span><span class="sxs-lookup"><span data-stu-id="f23ec-104">SQL Database dynamic data masking limits sensitive data exposure by masking it to non-privileged users.</span></span> 

<span data-ttu-id="f23ec-105">A Máscara de dados dinâmica ajuda a impedir o acesso não autorizado a dados confidenciais, permitindo que os clientes especifiquem qual a quantidade de dados confidenciais revelar, com impacto mínimo sobre a camada de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="f23ec-105">Dynamic data masking helps prevent unauthorized access to sensitive data by enabling customers to designate how much of the sensitive data to reveal with minimal impact on the application layer.</span></span> <span data-ttu-id="f23ec-106">É um recurso de segurança baseado em políticas que oculta os dados confidenciais no conjunto de resultados de uma consulta em relação aos campos do banco de dados designado, enquanto os dados no banco de dados não são alterados.</span><span class="sxs-lookup"><span data-stu-id="f23ec-106">It’s a policy-based security feature that hides the sensitive data in the result set of a query over designated database fields, while the data in the database is not changed.</span></span>

<span data-ttu-id="f23ec-107">Por exemplo, um representante de serviço em um centro de chamada pode identificar os chamadores por vários dígitos do seu número de cartão de crédito, mas os itens de dados não devem ser totalmente expostos para o representante de serviço.</span><span class="sxs-lookup"><span data-stu-id="f23ec-107">For example, a service representative at a call center may identify callers by several digits of their credit card number, but those data items should not be fully exposed to the service representative.</span></span> <span data-ttu-id="f23ec-108">Uma regra de mascaramento pode ser definida para mascarar tudo menos os quatro últimos dígitos de qualquer número de cartão de crédito no conjunto de resultados de qualquer consulta.</span><span class="sxs-lookup"><span data-stu-id="f23ec-108">A masking rule can be defined that masks all but the last four digits of any credit card number in the result set of any query.</span></span> <span data-ttu-id="f23ec-109">Como outro exemplo, uma máscara de dados apropriada pode ser definida para proteger os dados de informações de identificação pessoal (PII), de forma que um desenvolvedor possa consultar os ambientes de produção para fins de solução de problemas sem violar os regulamentos de conformidade.</span><span class="sxs-lookup"><span data-stu-id="f23ec-109">As another example, an appropriate data mask can be defined to protect personally identifiable information (PII) data, so that a developer can query production environments for troubleshooting purposes without violating compliance regulations.</span></span>

## <a name="sql-database-dynamic-data-masking-basics"></a><span data-ttu-id="f23ec-110">Noções básicas sobre a máscara de dados dinâmicos do Banco de Dados SQL</span><span class="sxs-lookup"><span data-stu-id="f23ec-110">SQL Database dynamic data masking basics</span></span>
<span data-ttu-id="f23ec-111">É possível configurar uma política de máscara de dados dinâmicos no Portal do Azure selecionando a operação máscara de dados dinâmicos na folha de configuração do Banco de Dados SQL ou na folha de configurações.</span><span class="sxs-lookup"><span data-stu-id="f23ec-111">You set up a dynamic data masking policy in the Azure portal by selecting the dynamic data masking operation in your SQL Database configuration blade or settings blade.</span></span>

### <a name="dynamic-data-masking-permissions"></a><span data-ttu-id="f23ec-112">Permissões de mascaramento de dados dinâmico</span><span class="sxs-lookup"><span data-stu-id="f23ec-112">Dynamic data masking permissions</span></span>
<span data-ttu-id="f23ec-113">A Máscara de dados dinâmica pode ser configurada através de funções do administração do banco de dados do Azure, administrador do servidor ou responsável pela segurança.</span><span class="sxs-lookup"><span data-stu-id="f23ec-113">Dynamic data masking can be configured by the Azure Database admin, server admin, or security officer roles.</span></span>

### <a name="dynamic-data-masking-policy"></a><span data-ttu-id="f23ec-114">Política de mascaramento de dados dinâmico</span><span class="sxs-lookup"><span data-stu-id="f23ec-114">Dynamic data masking policy</span></span>
* <span data-ttu-id="f23ec-115">**Usuários SQL excluídos do mascaramento** – um conjunto de usuários do SQL ou de identidades do AAD que obtém dados não mascarados nos resultados da consulta SQL.</span><span class="sxs-lookup"><span data-stu-id="f23ec-115">**SQL users excluded from masking** - A set of SQL users or AAD identities that get unmasked data in the SQL query results.</span></span> <span data-ttu-id="f23ec-116">Usuários com privilégios de administrador sempre são excluídos do mascaramento e veem os dados originais sem qualquer máscara.</span><span class="sxs-lookup"><span data-stu-id="f23ec-116">Users with administrator privileges are always excluded from masking, and see the original data without any mask.</span></span>
* <span data-ttu-id="f23ec-117">**Regras de mascaramento** – um conjunto de regras que definem os campos designados que serão mascarados e a função de mascaramento que será usada.</span><span class="sxs-lookup"><span data-stu-id="f23ec-117">**Masking rules** - A set of rules that define the designated fields to be masked and the masking function that is used.</span></span> <span data-ttu-id="f23ec-118">Os campos correspondentes podem ser definidos usando um nome de esquema de banco de dados, um nome de tabela e um nome da coluna.</span><span class="sxs-lookup"><span data-stu-id="f23ec-118">The designated fields can be defined using a database schema name, table name, and column name.</span></span>
* <span data-ttu-id="f23ec-119">**Funções de mascaramento** : um conjunto de métodos que controlam a exposição de dados para cenários diferentes.</span><span class="sxs-lookup"><span data-stu-id="f23ec-119">**Masking functions** - A set of methods that control the exposure of data for different scenarios.</span></span>

| <span data-ttu-id="f23ec-120">Função de mascaramento</span><span class="sxs-lookup"><span data-stu-id="f23ec-120">Masking Function</span></span> | <span data-ttu-id="f23ec-121">Lógica de mascaramento</span><span class="sxs-lookup"><span data-stu-id="f23ec-121">Masking Logic</span></span> |
| --- | --- |
| <span data-ttu-id="f23ec-122">**Padrão**</span><span class="sxs-lookup"><span data-stu-id="f23ec-122">**Default**</span></span> |<span data-ttu-id="f23ec-123">**Mascaramento completo de acordo com os tipos de dados dos campos designados**</span><span class="sxs-lookup"><span data-stu-id="f23ec-123">**Full masking according to the data types of the designated fields**</span></span><br/><br/><span data-ttu-id="f23ec-124">• Use XXXX ou menos Xs se o tamanho do campo tiver menos de quatro caracteres para os tipos de dados da cadeia de caracteres (nchar, ntext, nvarchar).</span><span class="sxs-lookup"><span data-stu-id="f23ec-124">• Use XXXX or fewer Xs if the size of the field is less than 4 characters for string data types (nchar, ntext, nvarchar).</span></span><br/><span data-ttu-id="f23ec-125">• Use um valor zero para tipos de dados numéricos (bigint, bit, decimal, int, money, numérico, smallint, smallmoney, tinyint, float, real).</span><span class="sxs-lookup"><span data-stu-id="f23ec-125">• Use a zero value for numeric data types (bigint, bit, decimal, int, money, numeric, smallint, smallmoney, tinyint, float, real).</span></span><br/><span data-ttu-id="f23ec-126">• Use 01-01-1900 para os tipos de dados de data/hora (data, datetime2, datetime, datetimeoffset, smalldatetime, time).</span><span class="sxs-lookup"><span data-stu-id="f23ec-126">• Use 01-01-1900 for date/time data types (date, datetime2, datetime, datetimeoffset, smalldatetime, time).</span></span><br/><span data-ttu-id="f23ec-127">• Para SQL variant, o valor padrão do tipo atual é usado.</span><span class="sxs-lookup"><span data-stu-id="f23ec-127">• For SQL variant, the default value of the current type is used.</span></span><br/><span data-ttu-id="f23ec-128">• Para XML o documento <masked/> é usado.</span><span class="sxs-lookup"><span data-stu-id="f23ec-128">• For XML the document <masked/> is used.</span></span><br/><span data-ttu-id="f23ec-129">• Use um valor vazio para tipos de dados especiais (timestamp table, hierarchyid, GUID, binary, image, varbinary spatial types).</span><span class="sxs-lookup"><span data-stu-id="f23ec-129">• Use an empty value for special data types (timestamp table, hierarchyid, GUID, binary, image, varbinary spatial types).</span></span> |
| <span data-ttu-id="f23ec-130">**Cartão de crédito**</span><span class="sxs-lookup"><span data-stu-id="f23ec-130">**Credit card**</span></span> |<span data-ttu-id="f23ec-131">**Método de mascaramento que expõe os últimos quatro dígitos dos campos designados** e adiciona uma cadeia de caracteres constante como um prefixo na forma de um cartão de crédito.</span><span class="sxs-lookup"><span data-stu-id="f23ec-131">**Masking method, which exposes the last four digits of the designated fields** and adds a constant string as a prefix in the form of a credit card.</span></span><br/><br/><span data-ttu-id="f23ec-132">XXXX-XXXX-XXXX-1234</span><span class="sxs-lookup"><span data-stu-id="f23ec-132">XXXX-XXXX-XXXX-1234</span></span> |
| <span data-ttu-id="f23ec-133">**Email**</span><span class="sxs-lookup"><span data-stu-id="f23ec-133">**Email**</span></span> |<span data-ttu-id="f23ec-134">**Método de mascaramento que expõe a primeira letra e substitui o domínio por XXX.com** usando um prefixo da cadeia de caracteres constante na forma de um endereço de email.</span><span class="sxs-lookup"><span data-stu-id="f23ec-134">**Masking method, which exposes the first letter and replaces the domain with XXX.com** using a constant string prefix in the form of an email address.</span></span><br/><br/>aXX@XXXX.com |
| <span data-ttu-id="f23ec-135">**Número aleatório**</span><span class="sxs-lookup"><span data-stu-id="f23ec-135">**Random number**</span></span> |<span data-ttu-id="f23ec-136">**Método de mascaramento que gera um número aleatório** de acordo com os limites selecionados e os tipos de dados reais.</span><span class="sxs-lookup"><span data-stu-id="f23ec-136">**Masking method, which generates a random number** according to the selected boundaries and actual data types.</span></span> <span data-ttu-id="f23ec-137">Se os limites designados forem iguais, a função de mascaramento será um número constante.</span><span class="sxs-lookup"><span data-stu-id="f23ec-137">If the designated boundaries are equal, then the masking function is a constant number.</span></span><br/><br/><span data-ttu-id="f23ec-138">![Painel de navegação](./media/sql-database-dynamic-data-masking-get-started/1_DDM_Random_number.png)</span><span class="sxs-lookup"><span data-stu-id="f23ec-138">![Navigation pane](./media/sql-database-dynamic-data-masking-get-started/1_DDM_Random_number.png)</span></span> |
| <span data-ttu-id="f23ec-139">**Texto personalizado**</span><span class="sxs-lookup"><span data-stu-id="f23ec-139">**Custom text**</span></span> |<span data-ttu-id="f23ec-140">**Método de mascaramento que expõe os primeiros e os últimos caracteres** e adiciona uma cadeia de caracteres de preenchimento personalizado no meio.</span><span class="sxs-lookup"><span data-stu-id="f23ec-140">**Masking method, which exposes the first and last characters** and adds a custom padding string in the middle.</span></span> <span data-ttu-id="f23ec-141">Se a cadeia de caracteres original for menor do que o prefixo e o sufixo expostos, somente a cadeia de caracteres de preenchimento será usada.</span><span class="sxs-lookup"><span data-stu-id="f23ec-141">If the original string is shorter than the exposed prefix and suffix, only the padding string is used.</span></span> <br/><span data-ttu-id="f23ec-142">prefixo[preenchimento]sufixo</span><span class="sxs-lookup"><span data-stu-id="f23ec-142">prefix[padding]suffix</span></span><br/><br/><span data-ttu-id="f23ec-143">![Painel de navegação](./media/sql-database-dynamic-data-masking-get-started/2_DDM_Custom_text.png)</span><span class="sxs-lookup"><span data-stu-id="f23ec-143">![Navigation pane](./media/sql-database-dynamic-data-masking-get-started/2_DDM_Custom_text.png)</span></span> |

<a name="Anchor1"></a>

### <a name="recommended-fields-to-mask"></a><span data-ttu-id="f23ec-144">Campos recomendados para mascarar</span><span class="sxs-lookup"><span data-stu-id="f23ec-144">Recommended fields to mask</span></span>
<span data-ttu-id="f23ec-145">O mecanismo de recomendações DDM sinaliza determinados campos do banco de dados como potencialmente confidenciais, que podem ser bons candidatos para mascaramento.</span><span class="sxs-lookup"><span data-stu-id="f23ec-145">The DDM recommendations engine, flags certain fields from your database as potentially sensitive fields, which may be good candidates for masking.</span></span> <span data-ttu-id="f23ec-146">Na folha Mascaramento de Dados Dinâmicos no portal, você verá as colunas recomendadas para seu banco de dados.</span><span class="sxs-lookup"><span data-stu-id="f23ec-146">In the Dynamic Data Masking blade in the portal, you will see the recommended columns for your database.</span></span> <span data-ttu-id="f23ec-147">Basta clicar em **Adicionar Máscara** para uma ou mais colunas e em **Salvar** para aplicar uma máscara a esses campos.</span><span class="sxs-lookup"><span data-stu-id="f23ec-147">All you need to do is click **Add Mask** for one or more columns and then **Save** to apply a mask for these fields.</span></span>

## <a name="set-up-dynamic-data-masking-for-your-database-using-powershell-cmdlets"></a><span data-ttu-id="f23ec-148">Configurar a máscara de dados dinâmica para o banco de dados usando cmdlets do Powershell</span><span class="sxs-lookup"><span data-stu-id="f23ec-148">Set up dynamic data masking for your database using Powershell cmdlets</span></span>
<span data-ttu-id="f23ec-149">Confira [Cmdlets do Banco de Dados SQL do Azure](https://msdn.microsoft.com/library/azure/mt574084.aspx).</span><span class="sxs-lookup"><span data-stu-id="f23ec-149">See [Azure SQL Database Cmdlets](https://msdn.microsoft.com/library/azure/mt574084.aspx).</span></span>

## <a name="set-up-dynamic-data-masking-for-your-database-using-rest-api"></a><span data-ttu-id="f23ec-150">Configurar a máscara de dados dinâmica para o banco de dados usando a API REST</span><span class="sxs-lookup"><span data-stu-id="f23ec-150">Set up dynamic data masking for your database using REST API</span></span>
<span data-ttu-id="f23ec-151">Confira [Operações para Bancos de Dados SQL do Azure](https://msdn.microsoft.com/library/dn505719.aspx).</span><span class="sxs-lookup"><span data-stu-id="f23ec-151">See [Operations for Azure SQL Databases](https://msdn.microsoft.com/library/dn505719.aspx).</span></span>

