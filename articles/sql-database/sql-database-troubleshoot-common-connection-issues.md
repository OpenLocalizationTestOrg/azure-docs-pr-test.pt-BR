---
title: "Solucionar problemas comuns de conexão no Banco de Dados SQL do Azure"
description: "Etapas para identificar e resolver erros comuns de conexão do Banco de Dados SQL do Azure."
services: sql-database
documentationcenter: 
author: dalechen
manager: cshepard
editor: 
ms.assetid: ac463d1c-aec8-443d-b66e-fa5eadcccfa8
ms.service: sql-database
ms.custom: monitor & tune
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/13/2017
ms.author: daleche
ms.openlocfilehash: b8abf1285318e491d51aadf90f921103d84ce1a4
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/11/2017
---
# <a name="troubleshoot-connection-issues-to-azure-sql-database"></a><span data-ttu-id="02b45-103">Solucionar problemas de conexão no Banco de Dados SQL do Azure</span><span class="sxs-lookup"><span data-stu-id="02b45-103">Troubleshoot connection issues to Azure SQL Database</span></span>
<span data-ttu-id="02b45-104">Quando a conexão com o banco de dados SQL falha, você recebe [mensagens de erro](sql-database-develop-error-messages.md).</span><span class="sxs-lookup"><span data-stu-id="02b45-104">When the connection to Azure SQL Database fails, you receive [error messages](sql-database-develop-error-messages.md).</span></span> <span data-ttu-id="02b45-105">Este artigo é um tópico centralizado que ajuda a solucionar problemas de conectividade do Banco de Dados SQL do Azure.</span><span class="sxs-lookup"><span data-stu-id="02b45-105">This article is a centralized topic that helps you troubleshoot Azure SQL Database connectivity issues.</span></span> <span data-ttu-id="02b45-106">Ele apresenta [as causas comuns](#cause) de problemas de conexão, recomenda [uma ferramenta de solução de problemas](#try-the-troubleshooter-for-azure-sql-database-connectivity-issues) que ajuda a identificar o problema e fornece etapas de solução de problemas para resolver [erros transitórios](#troubleshoot-transient-errors) e [erros persistentes ou não transitórios](#troubleshoot-persistent-errors).</span><span class="sxs-lookup"><span data-stu-id="02b45-106">It introduces [the common causes](#cause) of connection issues, recommends [a troubleshooting tool](#try-the-troubleshooter-for-azure-sql-database-connectivity-issues) that helps you identity the problem, and provides troubleshooting steps to solve [transient errors](#troubleshoot-transient-errors) and [persistent or non-transient errors](#troubleshoot-persistent-errors).</span></span> 

<span data-ttu-id="02b45-107">Se você encontrar problemas de conexão, experimente as etapas de solução de problemas descritas neste artigo.</span><span class="sxs-lookup"><span data-stu-id="02b45-107">If you encounter the connection issues, try the troubleshoot steps that are described in this article.</span></span>
[!INCLUDE [support-disclaimer](../../includes/support-disclaimer.md)]

## <a name="cause"></a><span data-ttu-id="02b45-108">Causa</span><span class="sxs-lookup"><span data-stu-id="02b45-108">Cause</span></span>
<span data-ttu-id="02b45-109">Problemas de conexão podem ser causados por qualquer um dos seguintes fatores:</span><span class="sxs-lookup"><span data-stu-id="02b45-109">Connection problems may be caused by any of the following:</span></span>

* <span data-ttu-id="02b45-110">Falha ao aplicar práticas recomendadas e diretrizes de design durante o processo de design do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="02b45-110">Failure to apply best practices and design guidelines during the application design process.</span></span>  <span data-ttu-id="02b45-111">Confira [Visão geral do desenvolvimento de Banco de Dados SQL](sql-database-develop-overview.md) para uma introdução.</span><span class="sxs-lookup"><span data-stu-id="02b45-111">See [SQL Database Development Overview](sql-database-develop-overview.md) to get started.</span></span>
* <span data-ttu-id="02b45-112">Reconfiguração do Banco de Dados SQL do Azure</span><span class="sxs-lookup"><span data-stu-id="02b45-112">Azure SQL Database reconfiguration</span></span>
* <span data-ttu-id="02b45-113">Configurações de firewall</span><span class="sxs-lookup"><span data-stu-id="02b45-113">Firewall settings</span></span>
* <span data-ttu-id="02b45-114">Tempo limite da conexão</span><span class="sxs-lookup"><span data-stu-id="02b45-114">Connection time-out</span></span>
* <span data-ttu-id="02b45-115">Informações de logon incorretas</span><span class="sxs-lookup"><span data-stu-id="02b45-115">Incorrect login information</span></span>
* <span data-ttu-id="02b45-116">Limite máximo é atingido para alguns recursos do Banco de Dados SQL do Azure</span><span class="sxs-lookup"><span data-stu-id="02b45-116">Maximum limit reached on some Azure SQL Database resources</span></span>

<span data-ttu-id="02b45-117">Normalmente, problemas de conexão com o Banco de Dados SQL do Azure podem ser classificados da seguinte forma:</span><span class="sxs-lookup"><span data-stu-id="02b45-117">Generally, connection issues to Azure SQL Database can be classified as follows:</span></span>

* [<span data-ttu-id="02b45-118">Erros transitórios (de curta duração ou intermitentes)</span><span class="sxs-lookup"><span data-stu-id="02b45-118">Transient errors (short-lived or intermittent)</span></span>](#troubleshoot-transient-errors)
* [<span data-ttu-id="02b45-119">Erros persistentes ou não transitórios (erros regularmente recorrentes)</span><span class="sxs-lookup"><span data-stu-id="02b45-119">Persistent or non-transient errors (errors that regularly recur)</span></span>](#troubleshoot-persistent-errors)

## <a name="try-the-troubleshooter-for-azure-sql-database-connectivity-issues"></a><span data-ttu-id="02b45-120">Tente a solução de problemas de conectividade do Banco de Dados SQL</span><span class="sxs-lookup"><span data-stu-id="02b45-120">Try the troubleshooter for Azure SQL Database connectivity issues</span></span>
<span data-ttu-id="02b45-121">Se você se deparar com um erro de conexão específico, tente [esta ferramenta](https://support.microsoft.com/help/10085/troubleshooting-connectivity-issues-with-microsoft-azure-sql-database), que vai ajudá-lo a identificar e resolver rapidamente o problema.</span><span class="sxs-lookup"><span data-stu-id="02b45-121">If you encounter a specific connection error, try [this tool](https://support.microsoft.com/help/10085/troubleshooting-connectivity-issues-with-microsoft-azure-sql-database), which will help you quickly identity and resolve your problem.</span></span>

## <a name="troubleshoot-transient-errors"></a><span data-ttu-id="02b45-122">Solucionar problemas de erros transitórios</span><span class="sxs-lookup"><span data-stu-id="02b45-122">Troubleshoot transient errors</span></span>

<span data-ttu-id="02b45-123">Quando um aplicativo se conecta a um banco de dados SQL do Azure, a seguinte mensagem de erro é exibida:</span><span class="sxs-lookup"><span data-stu-id="02b45-123">When an application connects to an Azure SQL database, you receive the following error message:</span></span>

```
Error code 40613: "Database <x> on server <y> is not currently available. Please retry the connection later. If the problem persists, contact customer support, and provide them the session tracing ID of <z>"
```

> [!NOTE]
> <span data-ttu-id="02b45-124">Essa mensagem de erro normalmente é transitória (de vida curta).</span><span class="sxs-lookup"><span data-stu-id="02b45-124">This error message is typically transient (short-lived).</span></span>
> 
> 

<span data-ttu-id="02b45-125">Esse erro ocorre quando o banco de dados do Azure está sendo movido (ou reconfigurados) e seu aplicativo perde a conexão com o banco de dados SQL.</span><span class="sxs-lookup"><span data-stu-id="02b45-125">This error occurs when the Azure database is being moved (or reconfigured) and your application loses its connection to the SQL database.</span></span> <span data-ttu-id="02b45-126">Eventos de reconfiguração do banco de dados SQL ocorrem devido a um evento planejado (por exemplo, um upgrade de software) ou um evento não planejado (por exemplo, uma falha no processo ou balanceamento de carga).</span><span class="sxs-lookup"><span data-stu-id="02b45-126">SQL database reconfiguration events occur because of a planned event (for example, a software upgrade) or an unplanned event (for example, a process crash, or load balancing).</span></span> <span data-ttu-id="02b45-127">A maioria dos eventos de reconfiguração geralmente é de curta duração e deve ser concluída em, no máximo, de 60 segundos.</span><span class="sxs-lookup"><span data-stu-id="02b45-127">Most reconfiguration events are generally short-lived and should be completed in less than 60 seconds at most.</span></span> <span data-ttu-id="02b45-128">No entanto, esses eventos ocasionalmente podem levar mais tempo para serem concluídos, como quando uma transação grande causa uma recuperação de execução longa.</span><span class="sxs-lookup"><span data-stu-id="02b45-128">However, these events can occasionally take longer to finish, such as when a large transaction causes a long-running recovery.</span></span>

### <a name="steps-to-resolve-transient-connectivity-issues"></a><span data-ttu-id="02b45-129">Etapas para resolver problemas de conectividade temporários</span><span class="sxs-lookup"><span data-stu-id="02b45-129">Steps to resolve transient connectivity issues</span></span>

1. <span data-ttu-id="02b45-130">Confira o [Painel de Serviços do Microsoft Azure](https://azure.microsoft.com/status) quanto a quaisquer interrupções conhecidas que tenham ocorrido durante o tempo em que o erro foi relatado pelo aplicativo.</span><span class="sxs-lookup"><span data-stu-id="02b45-130">Check the [Microsoft Azure Service Dashboard](https://azure.microsoft.com/status) for any known outages that occurred during the time during which the errors were reported by the application.</span></span>
2. <span data-ttu-id="02b45-131">Aplicativos que se conectam a um serviço de nuvem, como Banco de Dados SQL, devem esperar eventos reconfiguração periódicos e implementar lógica de repetição para lidar com esses erros, em vez de exibir esses erros como erros de aplicativo aos usuários.</span><span class="sxs-lookup"><span data-stu-id="02b45-131">Applications that connect to a cloud service such as Azure SQL Database should expect periodic reconfiguration events and implement retry logic to handle these errors instead of surfacing these as application errors to users.</span></span> <span data-ttu-id="02b45-132">Confira a seção [Erros transitórios](sql-database-connectivity-issues.md) e práticas recomendadas e diretrizes de design na [Visão geral de Desenvolvimento do Banco de Dados SQL](sql-database-develop-overview.md) para saber mais e ver estratégias de repetição gerais.</span><span class="sxs-lookup"><span data-stu-id="02b45-132">Review the [Transient errors](sql-database-connectivity-issues.md) section and the best practices and design guidelines at [SQL Database Development Overview](sql-database-develop-overview.md) for more information and general retry strategies.</span></span> <span data-ttu-id="02b45-133">Em seguida, confira os exemplos de código em [Bibliotecas de Conexões para Banco de Dados SQL e SQL Server](sql-database-libraries.md) para obter as especificações.</span><span class="sxs-lookup"><span data-stu-id="02b45-133">Then, see code samples at [Connection Libraries for SQL Database and SQL Server](sql-database-libraries.md) for specifics.</span></span>
3. <span data-ttu-id="02b45-134">Conforme um banco de dados se aproxima dos limites de recursos, pode parecer que há um problema de conectividade temporário.</span><span class="sxs-lookup"><span data-stu-id="02b45-134">As a database approaches its resource limits, it can seem to be a transient connectivity issue.</span></span> <span data-ttu-id="02b45-135">Confira [Solução de problemas de desempenho](sql-database-troubleshoot-performance.md).</span><span class="sxs-lookup"><span data-stu-id="02b45-135">See [Troubleshooting Performance Issues](sql-database-troubleshoot-performance.md).</span></span>
4. <span data-ttu-id="02b45-136">Se problemas de conectividade continuarem, se a duração pela qual o aplicativo encontra o erro exceder 60 segundos ou se você vir várias ocorrências do erro em um determinado dia, envie uma solicitação de suporte do Azure selecionando **Obter Suporte** no site de [Suporte do Azure](https://azure.microsoft.com/support/options) .</span><span class="sxs-lookup"><span data-stu-id="02b45-136">If connectivity problems continue, or if the duration for which your application encounters the error exceeds 60 seconds or if you see multiple occurrences of the error in a given day, file an Azure support request by selecting **Get Support** on the [Azure Support](https://azure.microsoft.com/support/options) site.</span></span>

## <a name="troubleshoot-persistent-errors"></a><span data-ttu-id="02b45-137">Solucionar erros persistentes</span><span class="sxs-lookup"><span data-stu-id="02b45-137">Troubleshoot persistent errors</span></span>
<span data-ttu-id="02b45-138">Se o aplicativo falhar persistentemente em se conectar ao Banco de Dados SQL do Azure, ele normalmente indicará um problema com um dos seguintes:</span><span class="sxs-lookup"><span data-stu-id="02b45-138">If the application persistently fails to connect to Azure SQL Database, it usually indicates an issue with one of the following:</span></span>

* <span data-ttu-id="02b45-139">Configuração do firewall.</span><span class="sxs-lookup"><span data-stu-id="02b45-139">Firewall configuration.</span></span> <span data-ttu-id="02b45-140">O firewall de banco de dados ou do lado do cliente do SQL Azure está bloqueando conexões do Banco de Dados SQL.</span><span class="sxs-lookup"><span data-stu-id="02b45-140">The Azure SQL database or client-side firewall is blocking connections to Azure SQL Database.</span></span>
* <span data-ttu-id="02b45-141">Reconfiguração da rede no lado do cliente: por exemplo, um novo endereço IP ou um servidor proxy.</span><span class="sxs-lookup"><span data-stu-id="02b45-141">Network reconfiguration on the client side: for example, a new IP address or a proxy server.</span></span>
* <span data-ttu-id="02b45-142">Erro do usuário: por exemplo, parâmetros de conexão digitados incorretamente, como o nome do servidor na cadeia de conexão.</span><span class="sxs-lookup"><span data-stu-id="02b45-142">User error: for example, mistyped connection parameters, such as the server name in the connection string.</span></span>

### <a name="steps-to-resolve-persistent-connectivity-issues"></a><span data-ttu-id="02b45-143">Etapas para resolver os problemas de conectividade temporários</span><span class="sxs-lookup"><span data-stu-id="02b45-143">Steps to resolve persistent connectivity issues</span></span>
1. <span data-ttu-id="02b45-144">Configure as [regras de firewall](sql-database-configure-firewall-settings.md) para permitir o endereço IP do cliente.</span><span class="sxs-lookup"><span data-stu-id="02b45-144">Set up [firewall rules](sql-database-configure-firewall-settings.md) to allow the client IP address.</span></span> <span data-ttu-id="02b45-145">Para fins de teste temporárias, configure uma regra de firewall usando 0.0.0.0 como o intervalo de endereços IP inicial e usando 255.255.255.255 como o intervalo de endereço IP final.</span><span class="sxs-lookup"><span data-stu-id="02b45-145">For temporary testing purposes, set up a firewall rule using 0.0.0.0 as the starting IP address range and using 255.255.255.255 as the ending IP address range.</span></span> <span data-ttu-id="02b45-146">Isso abrirá o servidor para todos os endereços IP.</span><span class="sxs-lookup"><span data-stu-id="02b45-146">This will open the server to all IP addresses.</span></span> <span data-ttu-id="02b45-147">Se isso resolver seu problema de conectividade, remova essa regra e crie uma regra de firewall para um intervalo de endereçamento ou um endereço IP adequadamente limitado.</span><span class="sxs-lookup"><span data-stu-id="02b45-147">If this resolves your connectivity issue, remove this rule and create a firewall rule for an appropriately limited IP address or address range.</span></span> 
2. <span data-ttu-id="02b45-148">Em todos os firewalls entre o cliente e a Internet, certifique-se de que a porta 1433 está aberta para conexões de saída.</span><span class="sxs-lookup"><span data-stu-id="02b45-148">On all firewalls between the client and the Internet, make sure that port 1433 is open for outbound connections.</span></span> <span data-ttu-id="02b45-149">Revisão [configurar o Firewall do Windows para permitir acesso ao SQL Server](https://msdn.microsoft.com/library/cc646023.aspx) e [híbrida identidade necessárias portas e protocolos](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-ports) ponteiros adicionais relacionadas a portas adicionais que você precisa abrir para autenticação do Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="02b45-149">Review [Configure the Windows Firewall to Allow SQL Server Access](https://msdn.microsoft.com/library/cc646023.aspx) and [Hybrid Identity Required Ports and Protocols](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-ports) for additional pointers related to additional ports that you need to open for Azure Active Directory authentication.</span></span>
3. <span data-ttu-id="02b45-150">Verifique a cadeia de conexão e outras configurações de conexão.</span><span class="sxs-lookup"><span data-stu-id="02b45-150">Verify your connection string and other connection settings.</span></span> <span data-ttu-id="02b45-151">Confira a seção Cadeia de Conexão do [tópico sobre problemas de conectividade](sql-database-connectivity-issues.md#connections-to-azure-sql-database).</span><span class="sxs-lookup"><span data-stu-id="02b45-151">See the Connection String section in the [connectivity issues topic](sql-database-connectivity-issues.md#connections-to-azure-sql-database).</span></span>
4. <span data-ttu-id="02b45-152">Verifique a integridade do serviço no painel.</span><span class="sxs-lookup"><span data-stu-id="02b45-152">Check service health in the dashboard.</span></span> <span data-ttu-id="02b45-153">Se você achar que há uma interrupção regional, confira [Recuperar-se de uma paralisação](sql-database-disaster-recovery.md) para obter as etapas de recuperação de uma nova região.</span><span class="sxs-lookup"><span data-stu-id="02b45-153">If you think there’s a regional outage, see [Recover from an outage](sql-database-disaster-recovery.md) for steps to recover to a new region.</span></span>

## <a name="next-steps"></a><span data-ttu-id="02b45-154">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="02b45-154">Next steps</span></span>
* [<span data-ttu-id="02b45-155">Solucionar problemas de desempenho no Banco de Dados SQL do Azure</span><span class="sxs-lookup"><span data-stu-id="02b45-155">Troubleshoot Azure SQL Database performance issues</span></span>](sql-database-troubleshoot-performance.md)
* [<span data-ttu-id="02b45-156">Pesquisar a documentação do Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="02b45-156">Search the documentation on Microsoft Azure</span></span>](http://azure.microsoft.com/search/documentation/)
* [<span data-ttu-id="02b45-157">Exibir as atualizações mais recentes ao serviço do Banco de Dados SQL do Azure</span><span class="sxs-lookup"><span data-stu-id="02b45-157">View the latest updates to the Azure SQL Database service</span></span>](http://azure.microsoft.com/updates/?service=sql-database)

## <a name="additional-resources"></a><span data-ttu-id="02b45-158">Recursos adicionais</span><span class="sxs-lookup"><span data-stu-id="02b45-158">Additional resources</span></span>
* [<span data-ttu-id="02b45-159">Visão geral do desenvolvimento de Banco de Dados SQL</span><span class="sxs-lookup"><span data-stu-id="02b45-159">SQL Database Development Overview</span></span>](sql-database-develop-overview.md)
* [<span data-ttu-id="02b45-160">Diretrizes gerais para tratamento de falhas transitórias</span><span class="sxs-lookup"><span data-stu-id="02b45-160">General transient fault-handling guidance</span></span>](../best-practices-retry-general.md)
* [<span data-ttu-id="02b45-161">Bibliotecas de conexão para Banco de Dados SQL e SQL Server</span><span class="sxs-lookup"><span data-stu-id="02b45-161">Connection libraries for SQL Database and SQL Server</span></span>](sql-database-libraries.md)

