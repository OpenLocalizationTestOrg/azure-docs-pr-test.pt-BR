---
title: "aaaDeploy e explore o aplicativo SaaS Wingtip do hello multilocatário que usa o banco de dados do SQL Azure | Microsoft Docs"
description: "Implantar e explore o aplicativo multilocatário Wingtip SaaS hello, que demonstra os padrões de SaaS usando o banco de dados do SQL Azure."
keywords: tutorial do banco de dados SQL
services: sql-database
documentationcenter: 
author: stevestein
manager: jhubbard
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: scale out apps
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/26/2017
ms.author: sstein
ms.openlocfilehash: 7c528ee19472d3b8c7a285b2f86013945e8f4bf4
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="deploy-and-explore-a-multi-tenant-application-that-uses-azure-sql-database---wingtip-saas"></a><span data-ttu-id="af78f-104">Implantar e explorar um aplicativo SaaS multilocatário que usa o Banco de dados SQL do Azure</span><span class="sxs-lookup"><span data-stu-id="af78f-104">Deploy and explore a multi-tenant application that uses Azure SQL Database - Wingtip SaaS</span></span>

<span data-ttu-id="af78f-105">Neste tutorial, você pode implantar e explorar o aplicativo de SaaS Wingtip hello.</span><span class="sxs-lookup"><span data-stu-id="af78f-105">In this tutorial, you deploy and explore hello Wingtip SaaS application.</span></span> <span data-ttu-id="af78f-106">aplicativo Hello usa um banco de dados-por locatário, padrão de aplicativo SaaS, tooservice vários locatários.</span><span class="sxs-lookup"><span data-stu-id="af78f-106">hello application uses a database-per-tenant, SaaS application pattern, tooservice multiple tenants.</span></span> <span data-ttu-id="af78f-107">aplicativo Hello é projetado tooshowcase recursos do banco de dados do SQL Azure que simplificam habilitar cenários de SaaS.</span><span class="sxs-lookup"><span data-stu-id="af78f-107">hello application is designed tooshowcase features of Azure SQL Database that simplify enabling SaaS scenarios.</span></span>

<span data-ttu-id="af78f-108">Olá cinco minutos depois de clicar em *implantar tooAzure* botão abaixo, você tem um aplicativo de SaaS multilocatário, usando o banco de dados SQL, até e em execução na nuvem hello.</span><span class="sxs-lookup"><span data-stu-id="af78f-108">Five minutes after clicking hello *Deploy tooAzure* button below, you have a multi-tenant SaaS application, using SQL Database, up and running in hello cloud.</span></span> <span data-ttu-id="af78f-109">aplicativo Hello é implantado com três locatários de exemplo, cada qual com seu próprio banco de dados, todos implantado em um pool Elástico do SQL.</span><span class="sxs-lookup"><span data-stu-id="af78f-109">hello application is deployed with three sample tenants, each with its own database, all deployed into a SQL elastic pool.</span></span> <span data-ttu-id="af78f-110">Olá aplicativo é implantado tooyour assinatura do Azure, fornecendo acesso completo tooexplore e trabalhar com componentes de aplicativos individuais da saudação.</span><span class="sxs-lookup"><span data-stu-id="af78f-110">hello app is deployed tooyour Azure subscription, giving you full access tooexplore and work with hello individual application components.</span></span> <span data-ttu-id="af78f-111">scripts de gerenciamento e o código de origem de aplicativos do Hello estão disponíveis em Olá repositório WingtipSaaS GitHub.</span><span class="sxs-lookup"><span data-stu-id="af78f-111">hello application source code and management scripts are available in hello WingtipSaaS GitHub repo.</span></span>


<span data-ttu-id="af78f-112">Neste tutorial, você aprende:</span><span class="sxs-lookup"><span data-stu-id="af78f-112">In this tutorial you learn:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="af78f-113">Como toodeploy Olá aplicativo SaaS Wingtip</span><span class="sxs-lookup"><span data-stu-id="af78f-113">How toodeploy hello Wingtip SaaS application</span></span>
> * <span data-ttu-id="af78f-114">Onde tooget Olá código fonte do aplicativo e scripts de gerenciamento</span><span class="sxs-lookup"><span data-stu-id="af78f-114">Where tooget hello application source code, and management scripts</span></span>
> * <span data-ttu-id="af78f-115">Sobre servidores hello, pools e os bancos de dados que constituem o aplicativo hello</span><span class="sxs-lookup"><span data-stu-id="af78f-115">About hello servers, pools, and databases that make up hello app</span></span>
> * <span data-ttu-id="af78f-116">Como os locatários são mapeados tootheir dados com hello *catálogo*</span><span class="sxs-lookup"><span data-stu-id="af78f-116">How tenants are mapped tootheir data with hello *catalog*</span></span>
> * <span data-ttu-id="af78f-117">Como tooprovision um novo locatário</span><span class="sxs-lookup"><span data-stu-id="af78f-117">How tooprovision a new tenant</span></span>
> * <span data-ttu-id="af78f-118">Como toomonitor locatário atividade no aplicativo hello</span><span class="sxs-lookup"><span data-stu-id="af78f-118">How toomonitor tenant activity in hello app</span></span>

<span data-ttu-id="af78f-119">tooexplore vários SaaS design e gerenciamento de padrões, um [série de tutoriais relacionados](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials) está disponível que utilizam essa implantação inicial.</span><span class="sxs-lookup"><span data-stu-id="af78f-119">tooexplore various SaaS design and management patterns, a [series of related tutorials](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials) is available that build upon this initial deployment.</span></span> <span data-ttu-id="af78f-120">Ao passar por tutoriais hello, aprofunde-se nos scripts de saudação fornecida e examine como padrões diferentes de SaaS Olá são implementadas.</span><span class="sxs-lookup"><span data-stu-id="af78f-120">While going through hello tutorials, dive into hello provided scripts, and examine how hello different SaaS patterns are implemented.</span></span> <span data-ttu-id="af78f-121">Percorrer os scripts de saudação em cada tutorial toogain uma compreensão mais profunda como tooimplement Olá banco de dados SQL muitos recursos que simplificam o desenvolvimento de aplicativos SaaS.</span><span class="sxs-lookup"><span data-stu-id="af78f-121">Step through hello scripts in each tutorial toogain a deeper understanding how tooimplement hello many SQL Database features that simplify developing SaaS applications.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="af78f-122">Pré-requisitos</span><span class="sxs-lookup"><span data-stu-id="af78f-122">Prerequisites</span></span>

<span data-ttu-id="af78f-123">toocomplete neste tutorial, verifique Olá se os pré-requisitos a seguir são concluídas:</span><span class="sxs-lookup"><span data-stu-id="af78f-123">toocomplete this tutorial, make sure hello following prerequisites are completed:</span></span>

* <span data-ttu-id="af78f-124">O Azure PowerShell está instalado.</span><span class="sxs-lookup"><span data-stu-id="af78f-124">Azure PowerShell is installed.</span></span> <span data-ttu-id="af78f-125">Para obter detalhes, consulte [Introdução ao Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span><span class="sxs-lookup"><span data-stu-id="af78f-125">For details, see [Getting started with Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span></span>

## <a name="deploy-hello-wingtip-saas-application"></a><span data-ttu-id="af78f-126">Implantar o aplicativo de SaaS Wingtip hello</span><span class="sxs-lookup"><span data-stu-id="af78f-126">Deploy hello Wingtip SaaS application</span></span>

<span data-ttu-id="af78f-127">Implante o aplicativo de SaaS Wingtip Olá:</span><span class="sxs-lookup"><span data-stu-id="af78f-127">Deploy hello Wingtip SaaS app:</span></span>

1. <span data-ttu-id="af78f-128">Olá clicando em **implantar tooAzure** botão abre o modelo de implantação de SaaS Wingtip Olá toohello portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="af78f-128">Clicking hello **Deploy tooAzure** button opens hello Azure portal toohello Wingtip SaaS deployment template.</span></span> <span data-ttu-id="af78f-129">modelo de saudação requer dois valores de parâmetros; um nome para um novo grupo de recursos e um nome de usuário que distingue esta implantação de outras implantações de aplicativo de SaaS Wingtip hello.</span><span class="sxs-lookup"><span data-stu-id="af78f-129">hello template requires two parameter values; a name for a new resource group, and a user name that distinguishes this deployment from other deployments of hello Wingtip SaaS app.</span></span> <span data-ttu-id="af78f-130">próxima etapa do Hello fornece detalhes para definir esses valores.</span><span class="sxs-lookup"><span data-stu-id="af78f-130">hello next step provides details for setting these values.</span></span>

   <span data-ttu-id="af78f-131">Verifique se toonote Olá valores exatos que você usar, pois você precisará tooentê-los em uma configuração de arquivo mais tarde.</span><span class="sxs-lookup"><span data-stu-id="af78f-131">Make sure toonote hello exact values that you use, because you will need tooenter them into a configuration file later.</span></span>

   <a href="http://aka.ms/deploywtpapp" target="_blank"><img src="http://azuredeploy.net/deploybutton.png"/></a>

1. <span data-ttu-id="af78f-132">Insira valores de parâmetros necessários para a implantação de saudação:</span><span class="sxs-lookup"><span data-stu-id="af78f-132">Enter required parameter values for hello deployment:</span></span>

    > [!IMPORTANT]
    > <span data-ttu-id="af78f-133">Algumas autenticações e firewalls de servidor estão intencionalmente desprotegidos para fins de demonstração.</span><span class="sxs-lookup"><span data-stu-id="af78f-133">Some authentication, and server firewalls are intentionally unsecured for demonstration purposes.</span></span> <span data-ttu-id="af78f-134">**Criar um novo grupo de recursos** e não usar grupos de recursos, servidores ou pools existentes.</span><span class="sxs-lookup"><span data-stu-id="af78f-134">**Create a new resource group**, and do not use existing resource groups, servers, or pools.</span></span> <span data-ttu-id="af78f-135">Não use este aplicativo ou todos os recursos que cria, para a produção.</span><span class="sxs-lookup"><span data-stu-id="af78f-135">Do not use this application, or any resources it creates, for production.</span></span> <span data-ttu-id="af78f-136">Excluir este recurso de grupo quando tiver terminado com hello aplicativo toostop relacionados a cobrança.</span><span class="sxs-lookup"><span data-stu-id="af78f-136">Delete this resource group when you are finished with hello application toostop related billing.</span></span>

    * <span data-ttu-id="af78f-137">**Grupo de recursos** - selecione **criar novo** e fornecer um **nome** Olá para grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="af78f-137">**Resource group** - Select **Create new** and provide a **Name** for hello resource group.</span></span> <span data-ttu-id="af78f-138">Selecione um **local** da lista suspensa de saudação.</span><span class="sxs-lookup"><span data-stu-id="af78f-138">Select a **Location** from hello drop-down list.</span></span>
    * <span data-ttu-id="af78f-139">**Usuário** - Alguns recursos exigem nomes que são globalmente exclusivos.</span><span class="sxs-lookup"><span data-stu-id="af78f-139">**User** - Some resources require names that are globally unique.</span></span> <span data-ttu-id="af78f-140">exclusividade de tooensure, cada vez que você implantar o aplicativo hello fornecer um valor toodifferentiate recursos criar, de recursos criados por qualquer outra implantação de saudação aplicativo Wingtip.</span><span class="sxs-lookup"><span data-stu-id="af78f-140">tooensure uniqueness, each time you deploy hello application provide a value toodifferentiate resources you create, from resources created by any other deployment of hello Wingtip application.</span></span> <span data-ttu-id="af78f-141">É recomendável toouse curto **usuário** nome, como suas iniciais mais um número (por exemplo, *bg1*) e, em seguida, usá-lo no nome do grupo de recursos de saudação (por exemplo, *wingtip-bg1*).</span><span class="sxs-lookup"><span data-stu-id="af78f-141">It’s recommended toouse a short **User** name, such as your initials plus a number (for example, *bg1*), and then use that in hello resource group name (for example, *wingtip-bg1*).</span></span> <span data-ttu-id="af78f-142">O parâmetro **Usuário** só pode conter letras, números e hifens (sem espaços).</span><span class="sxs-lookup"><span data-stu-id="af78f-142">The **User** parameter can only contain letters, numbers, and hyphens (no spaces).</span></span> <span data-ttu-id="af78f-143">primeiro e último caractere Hello deve ser uma letra ou um número (todas as minúsculas é recomendado).</span><span class="sxs-lookup"><span data-stu-id="af78f-143">hello first and last character must be a letter or a number (all lowercase is recommended).</span></span>


1. <span data-ttu-id="af78f-144">**Implantar o aplicativo hello**.</span><span class="sxs-lookup"><span data-stu-id="af78f-144">**Deploy hello application**.</span></span>

    * <span data-ttu-id="af78f-145">Clique em tooagree toohello termos e condições.</span><span class="sxs-lookup"><span data-stu-id="af78f-145">Click tooagree toohello terms and conditions.</span></span>
    * <span data-ttu-id="af78f-146">Clique em **Comprar**.</span><span class="sxs-lookup"><span data-stu-id="af78f-146">Click **Purchase**.</span></span>

1. <span data-ttu-id="af78f-147">Monitorar o status da implantação clicando **notificações** (ícone de sino saudação à direita da caixa de pesquisa de saudação).</span><span class="sxs-lookup"><span data-stu-id="af78f-147">Monitor deployment status by clicking **Notifications** (hello bell icon right of hello search box).</span></span> <span data-ttu-id="af78f-148">Implantando aplicativos de SaaS Wingtip Olá leva aproximadamente cinco minutos.</span><span class="sxs-lookup"><span data-stu-id="af78f-148">Deploying hello Wingtip SaaS app takes approximately five minutes.</span></span>

   ![implantação bem-sucedida](media/sql-database-saas-tutorial/succeeded.png)

## <a name="download-and-unblock-hello-wingtip-saas-scripts"></a><span data-ttu-id="af78f-150">Baixe e desbloquear scripts de SaaS Wingtip Olá</span><span class="sxs-lookup"><span data-stu-id="af78f-150">Download and unblock hello Wingtip SaaS scripts</span></span>

<span data-ttu-id="af78f-151">Ao implantar o aplicativo hello, baixe scripts de gerenciamento e o código de origem hello.</span><span class="sxs-lookup"><span data-stu-id="af78f-151">While hello application is deploying, download hello source code and management scripts.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="af78f-152">Conteúdos executáveis (scripts, dlls) podem ser bloqueados pelo Windows quando arquivos zip são baixados de uma fonte externa e extraídos.</span><span class="sxs-lookup"><span data-stu-id="af78f-152">Executable contents (scripts, dlls) may be blocked by Windows when zip files are downloaded from an external source and extracted.</span></span> <span data-ttu-id="af78f-153">Ao extrair os scripts de saudação de um arquivo zip, siga as etapas de saudação abaixo de arquivo do toounblock hello. zip antes da extração.</span><span class="sxs-lookup"><span data-stu-id="af78f-153">When extracting hello scripts from a zip file, follow hello steps below toounblock hello .zip file before extracting.</span></span> <span data-ttu-id="af78f-154">Isso garante que o script hello pode toorun.</span><span class="sxs-lookup"><span data-stu-id="af78f-154">This ensures hello scripts are allowed toorun.</span></span>

1. <span data-ttu-id="af78f-155">Procurar muito[do repositório github Olá Wingtip SaaS](https://github.com/Microsoft/WingtipSaaS).</span><span class="sxs-lookup"><span data-stu-id="af78f-155">Browse too[hello Wingtip SaaS github repo](https://github.com/Microsoft/WingtipSaaS).</span></span>
1. <span data-ttu-id="af78f-156">Clique em **Clonar ou baixar**.</span><span class="sxs-lookup"><span data-stu-id="af78f-156">Click **Clone or download**.</span></span>
1. <span data-ttu-id="af78f-157">Clique em **baixar ZIP** e salve o arquivo hello.</span><span class="sxs-lookup"><span data-stu-id="af78f-157">Click **Download ZIP** and save hello file.</span></span>
1. <span data-ttu-id="af78f-158">Saudação de atalho **WingtipSaaS master.zip** de arquivo e selecione **propriedades**.</span><span class="sxs-lookup"><span data-stu-id="af78f-158">Right-click hello **WingtipSaaS-master.zip** file, and select **Properties**.</span></span>
1. <span data-ttu-id="af78f-159">Em Olá **geral** guia, selecione **desbloquear**e clique em **aplicar**.</span><span class="sxs-lookup"><span data-stu-id="af78f-159">On hello **General** tab, select **Unblock**, and click **Apply**.</span></span>
1. <span data-ttu-id="af78f-160">Clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="af78f-160">Click **OK**.</span></span>
1. <span data-ttu-id="af78f-161">Extraia os arquivos de saudação.</span><span class="sxs-lookup"><span data-stu-id="af78f-161">Extract hello files.</span></span>

<span data-ttu-id="af78f-162">Os scripts estão localizados em Olá *... \\WingtipSaaS mestre\\módulos de aprendizado* pasta.</span><span class="sxs-lookup"><span data-stu-id="af78f-162">Scripts are located in hello *..\\WingtipSaaS-master\\Learning Modules* folder.</span></span>

## <a name="update-hello-configuration-file-for-this-deployment"></a><span data-ttu-id="af78f-163">Arquivo de configuração de saudação de atualização para essa implantação</span><span class="sxs-lookup"><span data-stu-id="af78f-163">Update hello configuration file for this deployment</span></span>

<span data-ttu-id="af78f-164">Antes de executar os scripts, definir Olá *grupo de recursos* e *usuário* valores em **UserConfig.psm1**.</span><span class="sxs-lookup"><span data-stu-id="af78f-164">Before running any scripts, set hello *resource group* and *user* values in **UserConfig.psm1**.</span></span> <span data-ttu-id="af78f-165">Defina essas variáveis toohello valores definidos durante a implantação.</span><span class="sxs-lookup"><span data-stu-id="af78f-165">Set these variables toohello values you set during deployment.</span></span>

1. <span data-ttu-id="af78f-166">Abrir... \\Módulos de aprendizado\\*UserConfig.psm1* em Olá *PowerShell ISE*</span><span class="sxs-lookup"><span data-stu-id="af78f-166">Open ...\\Learning Modules\\*UserConfig.psm1* in hello *PowerShell ISE*</span></span>
1. <span data-ttu-id="af78f-167">Atualização *ResourceGroupName* e *nome* com valores específicos de saudação para sua implantação (em linhas 10 e 11 somente).</span><span class="sxs-lookup"><span data-stu-id="af78f-167">Update *ResourceGroupName* and *Name* with hello specific values for your deployment (on lines 10 and 11 only).</span></span>
1. <span data-ttu-id="af78f-168">Salve alterações de Olá!</span><span class="sxs-lookup"><span data-stu-id="af78f-168">Save hello changes!</span></span>

<span data-ttu-id="af78f-169">Essa configuração aqui simplesmente evita a necessidade de ter tooupdate esses valores específicos de implantação em cada script.</span><span class="sxs-lookup"><span data-stu-id="af78f-169">Setting this here simply keeps you from having tooupdate these deployment-specific values in every script.</span></span>

## <a name="run-hello-application"></a><span data-ttu-id="af78f-170">Executar o aplicativo hello</span><span class="sxs-lookup"><span data-stu-id="af78f-170">Run hello application</span></span>

<span data-ttu-id="af78f-171">aplicativo Hello apresenta locais, como corredores conjunto, jazz paus, tem paus, que hospedam os eventos.</span><span class="sxs-lookup"><span data-stu-id="af78f-171">hello app showcases venues, such as concert halls, jazz clubs, sports clubs, that host events.</span></span> <span data-ttu-id="af78f-172">Locais de registrem como clientes (ou locatários) da plataforma de Wingtip hello, para eventos de toolist um modo fácil e vendem ingressos.</span><span class="sxs-lookup"><span data-stu-id="af78f-172">Venues register as customers (or tenants) of hello Wingtip platform, for an easy way toolist events and sell tickets.</span></span> <span data-ttu-id="af78f-173">Cada local obtém um toomanage de aplicativo da web personalizado e lista os eventos e vender ingressos, independentes e isolados de outros locatários.</span><span class="sxs-lookup"><span data-stu-id="af78f-173">Each venue gets a personalized web app toomanage and list their events and sell tickets, independent and isolated from other tenants.</span></span> <span data-ttu-id="af78f-174">Sob Olá coberturas, cada locatário obtém um banco de dados SQL implantado em um pool Elástico do SQL.</span><span class="sxs-lookup"><span data-stu-id="af78f-174">Under hello covers, each tenant gets a SQL database deployed into a SQL elastic pool.</span></span>

<span data-ttu-id="af78f-175">Um centro **Hub de eventos** fornece uma lista de locatário URLs específicas tooyour implantação.</span><span class="sxs-lookup"><span data-stu-id="af78f-175">A central **Events Hub** provides a list of tenant URLs specific tooyour deployment.</span></span>

1. <span data-ttu-id="af78f-176">Olá abrir _Hub de eventos_ no navegador da web: http://events.wtp.&lt; USUÁRIO&gt;. trafficmanager.net (Substituir pelo nome de usuário de implantação):</span><span class="sxs-lookup"><span data-stu-id="af78f-176">Open hello _Events Hub_ in your web browser: http://events.wtp.&lt;USER&gt;.trafficmanager.net (replace with your deployment's user name):</span></span>

    ![hub de eventos](media/sql-database-saas-tutorial/events-hub.png)

1. <span data-ttu-id="af78f-178">Clique em **Fabrikam Jazz Club** no *Hub de Eventos*.</span><span class="sxs-lookup"><span data-stu-id="af78f-178">Click **Fabrikam Jazz Club** in the *Events Hub*.</span></span>

   ![Eventos](./media/sql-database-saas-tutorial/fabrikam.png)


<span data-ttu-id="af78f-180">distribuição de saudação toocontrol de solicitações de entrada, Olá aplicativo usa [ *Azure Traffic Manager*](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-overview).</span><span class="sxs-lookup"><span data-stu-id="af78f-180">toocontrol hello distribution of incoming requests, hello app uses [*Azure Traffic Manager*](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-overview).</span></span> <span data-ttu-id="af78f-181">páginas de eventos Hello, que são específicos de locatário, exigem que os nomes de locatário são incluídos em URLs de saudação.</span><span class="sxs-lookup"><span data-stu-id="af78f-181">hello events pages, which are tenant-specific, require that tenant names are included in hello URLs.</span></span> <span data-ttu-id="af78f-182">Todos os Olá locatário URLs incluem específicos *usuário* valor e o seguinte formato: http://events.wtp.&lt; USUÁRIO&gt;.trafficmanager.net/*fabrikamjazzclub*.</span><span class="sxs-lookup"><span data-stu-id="af78f-182">All hello tenant URLs include your specific *User* value and follow this format: http://events.wtp.&lt;USER&gt;.trafficmanager.net/*fabrikamjazzclub*.</span></span> <span data-ttu-id="af78f-183">Olá eventos aplicativo analisa o nome do locatário Olá da URL de saudação e usa uma chave tooaccess usando um catálogo de toocreate [ *gerenciamento de mapa do fragmento*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-scale-shard-map-management).</span><span class="sxs-lookup"><span data-stu-id="af78f-183">hello events app parses hello tenant name from hello URL and uses it toocreate a key tooaccess a catalog using [*shard map management*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-scale-shard-map-management).</span></span> <span data-ttu-id="af78f-184">mapas de catálogo Olá Olá local do banco de dados do locatário toohello chave.</span><span class="sxs-lookup"><span data-stu-id="af78f-184">hello catalog maps hello key toohello tenant's database location.</span></span> <span data-ttu-id="af78f-185">Olá **Hub de eventos** usa metadados estendido nome do locatário do hello catálogo tooretrieve Olá associado a cada lista de saudação do banco de dados tooprovide de URLs.</span><span class="sxs-lookup"><span data-stu-id="af78f-185">hello **Events Hub** uses extended metadata in hello catalog tooretrieve hello tenant’s name associated with each database tooprovide hello list of URLs.</span></span>

<span data-ttu-id="af78f-186">Em um ambiente de produção, você normalmente criaria um registro DNS CNAME para [ *apontar um domínio de internet da empresa* ](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-point-internet-domain) para o perfil do Gerenciador de tráfego de saudação.</span><span class="sxs-lookup"><span data-stu-id="af78f-186">In a production environment, you would typically create a CNAME DNS record to [*point a company internet domain*](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-point-internet-domain) to hello traffic manager profile.</span></span>

## <a name="start-generating-load-on-hello-tenant-databases"></a><span data-ttu-id="af78f-187">Iniciar a geração de carga em bancos de dados de locatário de saudação</span><span class="sxs-lookup"><span data-stu-id="af78f-187">Start generating load on hello tenant databases</span></span>

<span data-ttu-id="af78f-188">Agora que hello aplicativo é implantado, vamos analisá-lo toowork!</span><span class="sxs-lookup"><span data-stu-id="af78f-188">Now that hello app is deployed, let’s put it toowork!</span></span> <span data-ttu-id="af78f-189">Olá *LoadGenerator demonstração* script do PowerShell inicia uma carga de trabalho em execução em todos os bancos de dados de locatário.</span><span class="sxs-lookup"><span data-stu-id="af78f-189">hello *Demo-LoadGenerator* PowerShell script starts a workload running against all tenant databases.</span></span> <span data-ttu-id="af78f-190">carga do Olá mundo real em muitos aplicativos SaaS normalmente é esporádica e imprevisível.</span><span class="sxs-lookup"><span data-stu-id="af78f-190">hello real-world load on many SaaS apps is typically sporadic and unpredictable.</span></span> <span data-ttu-id="af78f-191">toosimulate esse tipo de carga, gerador hello gera uma carga distribuída em todos os locatários com intermitências aleatórias em cada locatário que ocorrem em intervalos aleatórias.</span><span class="sxs-lookup"><span data-stu-id="af78f-191">toosimulate this type of load, hello generator produces a load distributed across all tenants, with randomized bursts on each tenant occurring at randomized intervals.</span></span> <span data-ttu-id="af78f-192">Por isso leva vários minutos para Olá tooemerge de padrão de carga, portanto, é melhor gerador de saudação toolet executado pelo menos três ou quatro minutos antes de monitorar Olá carga.</span><span class="sxs-lookup"><span data-stu-id="af78f-192">Because of this it takes several minutes for hello load pattern tooemerge, so it’s best toolet hello generator run for at least three or four minutes before monitoring hello load.</span></span>

1. <span data-ttu-id="af78f-193">Em Olá *PowerShell ISE*, abra hello... \\Módulos de aprendizado\\utilitários\\*demonstração LoadGenerator.ps1* script.</span><span class="sxs-lookup"><span data-stu-id="af78f-193">In hello *PowerShell ISE*, open hello ...\\Learning Modules\\Utilities\\*Demo-LoadGenerator.ps1* script.</span></span>
1. <span data-ttu-id="af78f-194">Pressione **F5** para executar o script hello e iniciar o gerador de carga hello (deixe Olá valores de parâmetro padrão para agora).</span><span class="sxs-lookup"><span data-stu-id="af78f-194">Press **F5** to run hello script and start hello load generator (leave hello default parameter values for now).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="af78f-195">toorun outros scripts, abra uma nova janela do PowerShell ISE.</span><span class="sxs-lookup"><span data-stu-id="af78f-195">toorun other scripts, open a new PowerShell ISE window.</span></span> <span data-ttu-id="af78f-196">Gerador de carga Hello está em execução como uma série de trabalhos na sessão do PowerShell local.</span><span class="sxs-lookup"><span data-stu-id="af78f-196">hello load generator is running as a series of jobs in your local PowerShell session.</span></span> <span data-ttu-id="af78f-197">Olá *LoadGenerator.ps1 demonstração* script inicia o script do gerador de carga real hello, que é executado como uma tarefa de primeiro plano mais de uma série de trabalhos de geração de carregamento em segundo plano.</span><span class="sxs-lookup"><span data-stu-id="af78f-197">hello *Demo-LoadGenerator.ps1* script kicks off hello actual load generator script, which runs as a foreground task plus a series of background load-generation jobs.</span></span> <span data-ttu-id="af78f-198">Um trabalho do gerador de carga é chamado para cada banco de dados registrado no catálogo de saudação.</span><span class="sxs-lookup"><span data-stu-id="af78f-198">A load-generator job is invoked for each database registered in hello catalog.</span></span> <span data-ttu-id="af78f-199">trabalhos de saudação estão em execução na sua sessão do PowerShell local, para que fechar a sessão do PowerShell hello interrompe todos os trabalhos.</span><span class="sxs-lookup"><span data-stu-id="af78f-199">hello jobs are running in your local PowerShell session, so closing hello PowerShell session stops all jobs.</span></span> <span data-ttu-id="af78f-200">Se você suspender seu computador, a geração de carga será pausada e continuará quando você ativá-lo novamente.</span><span class="sxs-lookup"><span data-stu-id="af78f-200">If you suspend your machine, load generation is paused and will resume when you wake up your machine.</span></span>

<span data-ttu-id="af78f-201">Depois que o gerador de carga Olá invoca os trabalhos de geração de carga para cada locatário, tarefa de primeiro plano Olá permanece em um estado de invocação de trabalho, onde ele inicia trabalhos de plano de fundo adicional para quaisquer novos locatários que são provisionados subsequentemente.</span><span class="sxs-lookup"><span data-stu-id="af78f-201">Once hello load generator invokes load-generation jobs for each tenant, hello foreground task remains in a job-invoking state, where it starts additional background jobs for any new tenants that are subsequently provisioned.</span></span> <span data-ttu-id="af78f-202">Você pode usar *Ctrl-C* ou pressione hello *parar* tarefa de primeiro plano do botão toostop hello, mas o plano de fundo existente trabalhos continuarão a geração de carga em cada banco de dados.</span><span class="sxs-lookup"><span data-stu-id="af78f-202">You can use *Ctrl-C* or press hello *Stop* button toostop hello foreground task, but existing background jobs will continue generating load on each database.</span></span> <span data-ttu-id="af78f-203">Se você precisar toomonitor e controla os trabalhos de plano de fundo hello, use *Get-Job*, *Receive-Job* e *Stop-Job*.</span><span class="sxs-lookup"><span data-stu-id="af78f-203">If you need toomonitor and control hello background jobs, use *Get-Job*, *Receive-Job* and *Stop-Job*.</span></span> <span data-ttu-id="af78f-204">Durante execução da tarefa em primeiro plano Olá você não pode usar Olá mesmo tooexecute de sessão do PowerShell outros scripts.</span><span class="sxs-lookup"><span data-stu-id="af78f-204">While hello foreground task is running you cannot use hello same PowerShell session tooexecute other scripts.</span></span> <span data-ttu-id="af78f-205">toorun outros scripts, abra uma nova janela do PowerShell ISE.</span><span class="sxs-lookup"><span data-stu-id="af78f-205">toorun other scripts, open a new PowerShell ISE window.</span></span>

<span data-ttu-id="af78f-206">Se você quiser toorestart Olá carga gerador sessão, por exemplo com parâmetros diferentes, você pode interromper tarefa de primeiro plano hello e, em seguida, executar novamente a saudação *demonstração LoadGenerator.ps1* script.</span><span class="sxs-lookup"><span data-stu-id="af78f-206">If you want toorestart hello load generator session, for example with different parameters, you can stop hello foreground task and then re-run hello *Demo-LoadGenerator.ps1* script.</span></span> <span data-ttu-id="af78f-207">Executar novamente *LoadGenerator.ps1 demonstração* primeiro interrompe quaisquer trabalhos em execução e, em seguida, gerador de saudação reinicializações, que inicia um novo conjunto de trabalhos usando os parâmetros atuais do hello.</span><span class="sxs-lookup"><span data-stu-id="af78f-207">Re-running *Demo-LoadGenerator.ps1* first stops any currently running jobs, and then restarts hello generator, which kicks off a new set of jobs using hello current parameters.</span></span>

<span data-ttu-id="af78f-208">Por enquanto, deixe o gerador de carga Olá sendo executado no estado de trabalho-invocar Olá.</span><span class="sxs-lookup"><span data-stu-id="af78f-208">For now, leave hello load generator running in hello job-invoking state.</span></span>


## <a name="provision-a-new-tenant"></a><span data-ttu-id="af78f-209">Provisionar um novo locatário</span><span class="sxs-lookup"><span data-stu-id="af78f-209">Provision a new tenant</span></span>

<span data-ttu-id="af78f-210">implantação inicial Olá cria três locatários de exemplo, mas vamos criar outra toosee de locatário como isso afeta o aplicativo hello implantado.</span><span class="sxs-lookup"><span data-stu-id="af78f-210">hello initial deployment creates three sample tenants, but let’s create another tenant toosee how this impacts hello deployed application.</span></span> <span data-ttu-id="af78f-211">fluxo de trabalho Olá Wingtip SaaS locatários provisionamento é detalhado no hello [tutorial provisionar e catálogo](sql-database-saas-tutorial-provision-and-catalog.md).</span><span class="sxs-lookup"><span data-stu-id="af78f-211">hello Wingtip SaaS provisioning-tenants workflow is detailed in hello [Provision and catalog tutorial](sql-database-saas-tutorial-provision-and-catalog.md).</span></span> <span data-ttu-id="af78f-212">Nesta etapa, você cria rapidamente um novo locatário.</span><span class="sxs-lookup"><span data-stu-id="af78f-212">In this step, you quickly create a new tenant.</span></span>

1. <span data-ttu-id="af78f-213">Abrir... \\Modules\Provision de aprendizado e catálogo\\*demonstração ProvisionAndCatalog.ps1* em Olá *PowerShell ISE*.</span><span class="sxs-lookup"><span data-stu-id="af78f-213">Open ...\\Learning Modules\Provision and Catalog\\*Demo-ProvisionAndCatalog.ps1* in hello *PowerShell ISE*.</span></span>
1. <span data-ttu-id="af78f-214">Pressione **F5** para executar o script hello (deixe saudação padrão valores agora).</span><span class="sxs-lookup"><span data-stu-id="af78f-214">Press **F5** to run hello script (leave hello default values for now).</span></span>

   > [!NOTE]
   > <span data-ttu-id="af78f-215">Usam vários scripts de SaaS Wingtip *$PSScriptRoot* tooallow navegando funções de toocall pastas em outros scripts.</span><span class="sxs-lookup"><span data-stu-id="af78f-215">Many Wingtip SaaS scripts use *$PSScriptRoot* tooallow navigating folders toocall functions in other scripts.</span></span> <span data-ttu-id="af78f-216">Essa variável é avaliada apenas quando Olá script é executado, pressionando **F5**.</span><span class="sxs-lookup"><span data-stu-id="af78f-216">This variable is only evaluated when hello script is executed by pressing **F5**.</span></span>  <span data-ttu-id="af78f-217">Realçar e executar uma seleção (**F8**) pode resultar em erros, então pressione **F5** ao executar scripts.</span><span class="sxs-lookup"><span data-stu-id="af78f-217">Highlighting and running a selection (**F8**) can result in errors, so press **F5** when running scripts.</span></span>

<span data-ttu-id="af78f-218">Olá novo locatário banco de dados é criado em um pool Elástico do SQL, inicializado e registrado no catálogo de saudação.</span><span class="sxs-lookup"><span data-stu-id="af78f-218">hello new tenant database is created in a SQL elastic pool, initialized and registered in hello catalog.</span></span> <span data-ttu-id="af78f-219">Após a configuração bem-sucedida, novo locatário de saudação do tíquete de venda *eventos* site é exibido no navegador:</span><span class="sxs-lookup"><span data-stu-id="af78f-219">After successful provisioning, hello new tenant's ticket-selling *Events* site appears in your browser:</span></span>

![Novo locatário](./media/sql-database-saas-tutorial/red-maple-racing.png)

<span data-ttu-id="af78f-221">Atualizar Olá *Hub de eventos* e locatário novo Olá agora aparece na lista de saudação.</span><span class="sxs-lookup"><span data-stu-id="af78f-221">Refresh hello *Events Hub* and hello new tenant now appears in hello list.</span></span>


## <a name="explore-hello-servers-pools-and-tenant-databases"></a><span data-ttu-id="af78f-222">Explorar servidores hello, pools e bancos de dados de locatário</span><span class="sxs-lookup"><span data-stu-id="af78f-222">Explore hello servers, pools, and tenant databases</span></span>

<span data-ttu-id="af78f-223">Agora que você já começou a ser executado um carregamento em relação a coleção de saudação de locatários, vamos dar uma olhada em alguns dos recursos de saudação que foram implantados:</span><span class="sxs-lookup"><span data-stu-id="af78f-223">Now that you've started running a load against hello collection of tenants, let’s look at some of hello resources that were deployed:</span></span>

1. <span data-ttu-id="af78f-224">No [portal do Azure](http://portal.azure.com), procurar tooyour lista de servidores SQL e abra o **catálogo -&lt;usuário&gt;**  server.</span><span class="sxs-lookup"><span data-stu-id="af78f-224">In the [Azure portal](http://portal.azure.com), browse tooyour list of SQL servers and open the **catalog-&lt;USER&gt;** server.</span></span> <span data-ttu-id="af78f-225">o servidor de catálogo Olá contém dois bancos de dados.</span><span class="sxs-lookup"><span data-stu-id="af78f-225">hello catalog server contains two databases.</span></span> <span data-ttu-id="af78f-226">Olá **tenantcatalog**e hello **basetenantdb** (vazio *dourada* ou banco de dados de modelo que é copiado toocreate novos locatários).</span><span class="sxs-lookup"><span data-stu-id="af78f-226">hello **tenantcatalog**, and hello **basetenantdb** (an empty *golden* or template database that is copied toocreate new tenants).</span></span>

   ![databases](./media/sql-database-saas-tutorial/databases.png)

1. <span data-ttu-id="af78f-228">Voltar tooyour lista de servidores SQL e abra Olá **tenants1 -&lt;usuário&gt;**  servidor que hospeda os bancos de dados de locatário hello.</span><span class="sxs-lookup"><span data-stu-id="af78f-228">Go back tooyour list of SQL servers and open hello **tenants1-&lt;USER&gt;** server that holds hello tenant databases.</span></span> <span data-ttu-id="af78f-229">Cada banco de dados de locatário é um banco de dados _elástico padrão_ em um pool padrão de 50 eDTU.</span><span class="sxs-lookup"><span data-stu-id="af78f-229">Each tenant database is an _Elastic Standard_ database in a 50 eDTU standard pool.</span></span> <span data-ttu-id="af78f-230">Também Observe que há um _vermelho bordo corrida_ banco de dados, o banco de dados do locatário Olá você provisionados anteriormente.</span><span class="sxs-lookup"><span data-stu-id="af78f-230">Also notice there is a _Red Maple Racing_ database, hello tenant database you provisioned previously.</span></span>

   ![server](./media/sql-database-saas-tutorial/server.png)

## <a name="monitor-hello-pool"></a><span data-ttu-id="af78f-232">Pool de saudação do monitor</span><span class="sxs-lookup"><span data-stu-id="af78f-232">Monitor hello pool</span></span>

<span data-ttu-id="af78f-233">Se o gerador de carga Olá esteve em execução por vários minutos, dados suficientes devem ser toostart disponível examinar alguns Olá criados em bancos de dados e pools de recursos de monitoramento.</span><span class="sxs-lookup"><span data-stu-id="af78f-233">If hello load generator has been running for several minutes, enough data should be available toostart looking at some of hello monitoring capabilities built into pools and databases.</span></span>

1. <span data-ttu-id="af78f-234">Procurar servidor toohello **tenants1 -&lt;usuário&gt;**e clique em **Pool1** para exibir a utilização de recursos para o pool de saudação (gerador de carga Olá foi executado para uma hora no hello gráficos a seguir) :</span><span class="sxs-lookup"><span data-stu-id="af78f-234">Browse toohello server **tenants1-&lt;USER&gt;**, and click **Pool1** to view resource utilization for hello pool (hello load generator ran for an hour in hello following charts):</span></span>

   ![monitorar pool](./media/sql-database-saas-tutorial/monitor-pool.png)

<span data-ttu-id="af78f-236">O que esses dois gráficos bem ilustram, é como os pools elásticos e o Banco de Dados SQL são bem adequados para cargas de trabalho de aplicativos SaaS.</span><span class="sxs-lookup"><span data-stu-id="af78f-236">What these two charts nicely illustrate, is how well suited elastic pools and SQL Database are for SaaS application workloads.</span></span> <span data-ttu-id="af78f-237">Quatro bancos de dados que são cada a intermitência tooas quanto 40 eDTUs facilmente suportados em um pool de 50 eDTU.</span><span class="sxs-lookup"><span data-stu-id="af78f-237">Four databases that are each bursting tooas much as 40 eDTUs are easily being supported in a 50 eDTU pool.</span></span> <span data-ttu-id="af78f-238">Se eles foram provisionados como bancos de dados independentes, eles gostariam de cada toobe necessidade um S2 (DTU 50) toosupport Olá intermitências.</span><span class="sxs-lookup"><span data-stu-id="af78f-238">If they were provisioned as standalone databases, they would each need toobe an S2 (50 DTU) toosupport hello bursts.</span></span> <span data-ttu-id="af78f-239">custo de saudação de 4 bancos de dados independentes S2 seria preço de saudação de quase 3 vezes de pool hello e pool Olá ainda há bastante espaço para muitos bancos de dados mais.</span><span class="sxs-lookup"><span data-stu-id="af78f-239">hello cost of 4 standalone S2 databases would be nearly 3 times hello price of hello pool, and hello pool still has plenty of headroom for many more databases.</span></span> <span data-ttu-id="af78f-240">Em situações reais, os clientes do banco de dados SQL estão executando backup too500 bancos de dados em pools de eDTU 200.</span><span class="sxs-lookup"><span data-stu-id="af78f-240">In real-world situations, SQL Database customers are currently running up too500 databases in 200 eDTU pools.</span></span> <span data-ttu-id="af78f-241">Para obter mais informações, consulte Olá [tutorial de monitoramento de desempenho](sql-database-saas-tutorial-performance-monitoring.md).</span><span class="sxs-lookup"><span data-stu-id="af78f-241">For more information, see hello [performance monitoring tutorial](sql-database-saas-tutorial-performance-monitoring.md).</span></span>


## <a name="next-steps"></a><span data-ttu-id="af78f-242">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="af78f-242">Next steps</span></span>

<span data-ttu-id="af78f-243">Neste tutorial, você aprendeu:</span><span class="sxs-lookup"><span data-stu-id="af78f-243">In this tutorial you learned:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="af78f-244">Como toodeploy Olá aplicativo SaaS Wingtip</span><span class="sxs-lookup"><span data-stu-id="af78f-244">How toodeploy hello Wingtip SaaS application</span></span>
> * <span data-ttu-id="af78f-245">Sobre servidores hello, pools e os bancos de dados que constituem o aplicativo hello</span><span class="sxs-lookup"><span data-stu-id="af78f-245">About hello servers, pools, and databases that make up hello app</span></span>
> * <span data-ttu-id="af78f-246">Locatários são mapeadas tootheir dados com hello *catálogo*</span><span class="sxs-lookup"><span data-stu-id="af78f-246">Tenants are mapped tootheir data with hello *catalog*</span></span>
> * <span data-ttu-id="af78f-247">Como tooprovision novos locatários</span><span class="sxs-lookup"><span data-stu-id="af78f-247">How tooprovision new tenants</span></span>
> * <span data-ttu-id="af78f-248">Como toomonitor de utilização do pool de tooview locatário atividade</span><span class="sxs-lookup"><span data-stu-id="af78f-248">How tooview pool utilization toomonitor tenant activity</span></span>
> * <span data-ttu-id="af78f-249">Como toodelete exemplo recursos toostop relacionados a cobrança</span><span class="sxs-lookup"><span data-stu-id="af78f-249">How toodelete sample resources toostop related billing</span></span>

<span data-ttu-id="af78f-250">Agora tente Olá [tutorial provisionar e catálogo](sql-database-saas-tutorial-provision-and-catalog.md)</span><span class="sxs-lookup"><span data-stu-id="af78f-250">Now try hello [Provision and catalog tutorial](sql-database-saas-tutorial-provision-and-catalog.md)</span></span>



## <a name="additional-resources"></a><span data-ttu-id="af78f-251">Recursos adicionais</span><span class="sxs-lookup"><span data-stu-id="af78f-251">Additional resources</span></span>

* <span data-ttu-id="af78f-252">Adicionais [tutoriais em Olá aplicativo SaaS Wingtip](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span><span class="sxs-lookup"><span data-stu-id="af78f-252">Additional [tutorials that build on hello Wingtip SaaS application](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span></span>
* <span data-ttu-id="af78f-253">toolearn sobre pools Elásticos, consulte [ *o que é um pool Elástico do SQL Azure*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-pool)</span><span class="sxs-lookup"><span data-stu-id="af78f-253">toolearn about elastic pools, see [*What is an Azure SQL elastic pool*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-pool)</span></span>
* <span data-ttu-id="af78f-254">toolearn sobre Elásticos trabalhos, consulte [ *Gerenciando bancos de dados de nuvem expandido*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-jobs-overview)</span><span class="sxs-lookup"><span data-stu-id="af78f-254">toolearn about elastic jobs, see [*Managing scaled-out cloud databases*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-jobs-overview)</span></span>
* <span data-ttu-id="af78f-255">toolearn sobre aplicativos de SaaS multilocatários, consulte [ *padrões para aplicativos de SaaS multilocatários de Design*](https://docs.microsoft.com/azure/sql-database/sql-database-design-patterns-multi-tenancy-saas-applications)</span><span class="sxs-lookup"><span data-stu-id="af78f-255">toolearn about multi-tenant SaaS applications, see [*Design patterns for multi-tenant SaaS applications*](https://docs.microsoft.com/azure/sql-database/sql-database-design-patterns-multi-tenancy-saas-applications)</span></span>
