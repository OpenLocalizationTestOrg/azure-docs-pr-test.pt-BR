---
title: acesso de aaaGranting tooAzure banco de dados SQL | Microsoft Docs
description: Saiba mais sobre como conceder acesso tooMicrosoft banco de dados do SQL Azure.
services: sql-database
documentationcenter: 
author: BYHAM
manager: jhubbard
editor: 
tags: 
ms.assetid: 8e71b04c-bc38-4153-8f83-f2b14faa31d9
ms.service: sql-database
ms.custom: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 02/06/2017
ms.author: rickbyh
ms.openlocfilehash: 4c32fafa7e98b731ff2f9bf4666da7e4a3145286
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="azure-sql-database-access-control"></a><span data-ttu-id="a7b99-103">Controle de acesso do Banco de Dados SQL do Azure</span><span class="sxs-lookup"><span data-stu-id="a7b99-103">Azure SQL Database access control</span></span>
<span data-ttu-id="a7b99-104">tooprovide segurança, o banco de dados SQL controla o acesso com regras de firewall limitando conectividade por endereço IP, os mecanismos de autenticação que requerem usuários tooprove sua identidade e mecanismos de autorização, limitando os usuários toospecific ações e dados.</span><span class="sxs-lookup"><span data-stu-id="a7b99-104">tooprovide security, SQL Database controls access with firewall rules limiting connectivity by IP address, authentication mechanisms requiring users tooprove their identity, and authorization mechanisms limiting users toospecific actions and data.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="a7b99-105">Para obter uma visão geral dos recursos de segurança de banco de dados SQL hello, consulte [visão geral de segurança do SQL](sql-database-security-overview.md).</span><span class="sxs-lookup"><span data-stu-id="a7b99-105">For an overview of hello SQL Database security features, see [SQL security overview](sql-database-security-overview.md).</span></span> <span data-ttu-id="a7b99-106">Para obter um tutorial, consulte [Proteger o Banco de Dados SQL do Azure](sql-database-security-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="a7b99-106">For a tutorial, see [Secure your Azure SQL Database](sql-database-security-tutorial.md).</span></span>

## <a name="firewall-and-firewall-rules"></a><span data-ttu-id="a7b99-107">Firewall e regras de firewall</span><span class="sxs-lookup"><span data-stu-id="a7b99-107">Firewall and firewall rules</span></span>
<span data-ttu-id="a7b99-108">O Banco de Dados SQL do Microsoft Azure fornece um serviço de banco de dados relacional para o Azure e outros aplicativos baseados na Internet.</span><span class="sxs-lookup"><span data-stu-id="a7b99-108">Microsoft Azure SQL Database provides a relational database service for Azure and other Internet-based applications.</span></span> <span data-ttu-id="a7b99-109">toohelp proteger seus dados, firewalls impedir que todos os servidores de banco de dados do access tooyour até que você especifique quais computadores têm permissão.</span><span class="sxs-lookup"><span data-stu-id="a7b99-109">toohelp protect your data, firewalls prevent all access tooyour database server until you specify which computers have permission.</span></span> <span data-ttu-id="a7b99-110">firewall de saudação concede acesso toodatabases com base em Olá endereços IP de cada solicitação de origem.</span><span class="sxs-lookup"><span data-stu-id="a7b99-110">hello firewall grants access toodatabases based on hello originating IP address of each request.</span></span> <span data-ttu-id="a7b99-111">Para saber mais, veja [Visão geral de regras de firewall do Banco de Dados SQL](sql-database-firewall-configure.md)</span><span class="sxs-lookup"><span data-stu-id="a7b99-111">For more information, see [Overview of Azure SQL Database firewall rules](sql-database-firewall-configure.md)</span></span>

<span data-ttu-id="a7b99-112">Olá serviço de banco de dados SQL está disponível somente pela porta TCP 1433.</span><span class="sxs-lookup"><span data-stu-id="a7b99-112">hello Azure SQL Database service is only available through TCP port 1433.</span></span> <span data-ttu-id="a7b99-113">tooaccess um banco de dados SQL do seu computador, verifique se o firewall do computador cliente permite a comunicação TCP de saída na porta TCP 1433.</span><span class="sxs-lookup"><span data-stu-id="a7b99-113">tooaccess a SQL Database from your computer, ensure that your client computer firewall allows outgoing TCP communication on TCP port 1433.</span></span> <span data-ttu-id="a7b99-114">Se não for necessário a outros aplicativos, bloqueie as conexões de entrada na porta TCP 1433.</span><span class="sxs-lookup"><span data-stu-id="a7b99-114">If not needed for other applications, block inbound connections on TCP port 1433.</span></span> 

<span data-ttu-id="a7b99-115">Como parte do processo de conexão de hello, conexões de máquinas virtuais do Azure são tooa redirecionado a outro endereço IP e porta exclusiva para cada função de trabalho.</span><span class="sxs-lookup"><span data-stu-id="a7b99-115">As part of hello connection process, connections from Azure virtual machines are redirected tooa different IP address and port, unique for each worker role.</span></span> <span data-ttu-id="a7b99-116">número da porta Hello está no intervalo de saudação do too11999 11000.</span><span class="sxs-lookup"><span data-stu-id="a7b99-116">hello port number is in hello range from 11000 too11999.</span></span> <span data-ttu-id="a7b99-117">Para obter mais informações sobre portas TCP, consulte [Portas além da 1433 para o ADO.NET 4.5 e o Banco de Dados SQL 2](sql-database-develop-direct-route-ports-adonet-v12.md).</span><span class="sxs-lookup"><span data-stu-id="a7b99-117">For more information about TCP ports, see [Ports beyond 1433 for ADO.NET 4.5 and SQL Database2](sql-database-develop-direct-route-ports-adonet-v12.md).</span></span>

## <a name="authentication"></a><span data-ttu-id="a7b99-118">Autenticação</span><span class="sxs-lookup"><span data-stu-id="a7b99-118">Authentication</span></span>

<span data-ttu-id="a7b99-119">O Banco de Dados SQL dá suporte a dois tipos de autenticação:</span><span class="sxs-lookup"><span data-stu-id="a7b99-119">SQL Database supports two types of authentication:</span></span>

* <span data-ttu-id="a7b99-120">**Autenticação do SQL**, que usa um nome de usuário e senha.</span><span class="sxs-lookup"><span data-stu-id="a7b99-120">**SQL Authentication**, which uses a username and password.</span></span> <span data-ttu-id="a7b99-121">Quando você criou o servidor lógico Olá para seu banco de dados, você especificou um logon de "administrador do servidor" com um nome de usuário e senha.</span><span class="sxs-lookup"><span data-stu-id="a7b99-121">When you created hello logical server for your database, you specified a "server admin" login with a username and password.</span></span> <span data-ttu-id="a7b99-122">Usando essas credenciais, você pode autenticar tooany banco de dados no servidor como proprietário do banco de dados hello, ou "dbo".</span><span class="sxs-lookup"><span data-stu-id="a7b99-122">Using these credentials, you can authenticate tooany database on that server as hello database owner, or "dbo."</span></span> 
* <span data-ttu-id="a7b99-123">**Autenticação do Azure Active Directory**, que usa identidades gerenciadas pelo Azure Active Directory e que tem suporte para domínios gerenciados e integrados.</span><span class="sxs-lookup"><span data-stu-id="a7b99-123">**Azure Active Directory Authentication**, which uses identities managed by Azure Active Directory and is supported for managed and integrated domains.</span></span> <span data-ttu-id="a7b99-124">Use autenticação do Active Directory (segurança integrada) [sempre que possível](https://docs.microsoft.com/sql/relational-databases/security/choose-an-authentication-mode).</span><span class="sxs-lookup"><span data-stu-id="a7b99-124">Use Active Directory authentication (integrated security) [whenever possible](https://docs.microsoft.com/sql/relational-databases/security/choose-an-authentication-mode).</span></span> <span data-ttu-id="a7b99-125">Se você quiser toouse autenticação do Active Directory do Azure, você deve criar outro administrador de servidor chamado hello "Administrador do AD do Azure", que é permitido grupos e usuários do AD do Azure tooadminister.</span><span class="sxs-lookup"><span data-stu-id="a7b99-125">If you want toouse Azure Active Directory Authentication, you must create another server admin called hello "Azure AD admin," which is allowed tooadminister Azure AD users and groups.</span></span> <span data-ttu-id="a7b99-126">Este administrador também pode executar todas as operações executadas por um administrador de servidor comum.</span><span class="sxs-lookup"><span data-stu-id="a7b99-126">This admin can also perform all operations that a regular server admin can.</span></span> <span data-ttu-id="a7b99-127">Consulte [conexão tooSQL banco de dados, usando o Azure Active Directory Authentication](sql-database-aad-authentication.md) para obter uma explicação de como toocreate uma tooenable de administração do AD do Azure autenticação do Active Directory do Azure.</span><span class="sxs-lookup"><span data-stu-id="a7b99-127">See [Connecting tooSQL Database By Using Azure Active Directory Authentication](sql-database-aad-authentication.md) for a walkthrough of how toocreate an Azure AD admin tooenable Azure Active Directory Authentication.</span></span>

<span data-ttu-id="a7b99-128">saudação de mecanismo de banco de dados fecha as conexões que permanecem ociosas por mais de 30 minutos.</span><span class="sxs-lookup"><span data-stu-id="a7b99-128">hello Database Engine closes connections that remain idle for more than 30 minutes.</span></span> <span data-ttu-id="a7b99-129">Olá conexão deve logon novamente antes de ser usada.</span><span class="sxs-lookup"><span data-stu-id="a7b99-129">hello connection must login again before it can be used.</span></span> <span data-ttu-id="a7b99-130">Continuamente conexões ativas tooSQL banco de dados exigir autorização (executada pelo mecanismo de banco de dados de saudação) pelo menos a cada 10 horas.</span><span class="sxs-lookup"><span data-stu-id="a7b99-130">Continuously active connections tooSQL Database require reauthorization (performed by hello database engine) at least every 10 hours.</span></span> <span data-ttu-id="a7b99-131">mecanismo de banco de dados de saudação tentativas de autorização usando a senha enviada originalmente hello e nenhuma entrada do usuário é necessária.</span><span class="sxs-lookup"><span data-stu-id="a7b99-131">hello database engine attempts reauthorization using hello originally submitted password and no user input is required.</span></span> <span data-ttu-id="a7b99-132">Por motivos de desempenho, quando uma senha é redefinida no banco de dados SQL, conexão Olá não é ser reautenticado, mesmo se a conexão de saudação é redefinido devido a pooling de tooconnection.</span><span class="sxs-lookup"><span data-stu-id="a7b99-132">For performance reasons, when a password is reset in SQL Database, hello connection is not be reauthenticated, even if hello connection is reset due tooconnection pooling.</span></span> <span data-ttu-id="a7b99-133">Isso é diferente do comportamento de saudação do SQL Server no local.</span><span class="sxs-lookup"><span data-stu-id="a7b99-133">This is different from hello behavior of on-premises SQL Server.</span></span> <span data-ttu-id="a7b99-134">Se Olá senha foi alterada desde que a conexão Olá inicialmente foi autorizado, conexão Olá deve ser terminada e uma nova conexão feita usando Olá nova senha.</span><span class="sxs-lookup"><span data-stu-id="a7b99-134">If hello password has been changed since hello connection was initially authorized, hello connection must be terminated and a new connection made using hello new password.</span></span> <span data-ttu-id="a7b99-135">Um usuário com hello `KILL DATABASE CONNECTION` permissão explicitamente pode encerrar uma conexão tooSQL banco de dados usando Olá [KILL](https://docs.microsoft.com/sql/t-sql/language-elements/kill-transact-sql) comando.</span><span class="sxs-lookup"><span data-stu-id="a7b99-135">A user with hello `KILL DATABASE CONNECTION` permission can explicitly terminate a connection tooSQL Database by using hello [KILL](https://docs.microsoft.com/sql/t-sql/language-elements/kill-transact-sql) command.</span></span>

<span data-ttu-id="a7b99-136">Contas de usuário podem ser criadas no banco de dados mestre hello e podem ser concedidas permissões em todos os bancos de dados no servidor de saudação, ou eles podem ser criados no banco de dados de saudação em si (chamado usuários independentes).</span><span class="sxs-lookup"><span data-stu-id="a7b99-136">User accounts can be created in hello master database and can be granted permissions in all databases on hello server, or they can be created in hello database itself (called contained users).</span></span> <span data-ttu-id="a7b99-137">Para saber mais sobre a criação e o gerenciamento de logons, veja [Gerenciar logons](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="a7b99-137">For information on creating and managing logins, see [Manage logins](sql-database-manage-logins.md).</span></span> <span data-ttu-id="a7b99-138">portabilidade tooenhance e scalabilty, use a escalabilidade de tooenhance de usuários de banco de dados independente.</span><span class="sxs-lookup"><span data-stu-id="a7b99-138">tooenhance portability and scalabilty, use contained database users tooenhance scalability.</span></span> <span data-ttu-id="a7b99-139">Para saber mais sobre usuários independentes, veja [Usuários de bancos de dados independentes – tornando seu banco de dados portátil](https://docs.microsoft.com/sql/relational-databases/security/contained-database-users-making-your-database-portable), [CREATE USER (Transact-SQL)](https://docs.microsoft.com/sql/t-sql/statements/create-user-transact-sql) e [Bancos de dados independentes](https://docs.microsoft.com/sql/relational-databases/databases/contained-databases).</span><span class="sxs-lookup"><span data-stu-id="a7b99-139">For more information on contained users, see [Contained Database Users - Making Your Database Portable](https://docs.microsoft.com/sql/relational-databases/security/contained-database-users-making-your-database-portable), [CREATE USER (Transact-SQL)](https://docs.microsoft.com/sql/t-sql/statements/create-user-transact-sql), and [Contained Databases](https://docs.microsoft.com/sql/relational-databases/databases/contained-databases).</span></span>

<span data-ttu-id="a7b99-140">Como prática recomendada a seu aplicativo deve usar tooauthenticate uma conta dedicada – dessa forma, você pode limitar as permissões de saudação concedidas toohello aplicativo e reduzir os riscos de saudação de atividade mal-intencionada, caso o código do aplicativo é vulnerável tooa injeção de SQL ataque.</span><span class="sxs-lookup"><span data-stu-id="a7b99-140">As a best practice your application should use a dedicated account tooauthenticate -- this way you can limit hello permissions granted toohello application and reduce hello risks of malicious activity in case your application code is vulnerable tooa SQL injection attack.</span></span> <span data-ttu-id="a7b99-141">Olá recomendado abordagem é toocreate uma [usuário de banco de dados independente](https://docs.microsoft.com/sql/relational-databases/security/contained-database-users-making-your-database-portable), que permite que seu aplicativo tooauthenticate diretamente toohello banco de dados.</span><span class="sxs-lookup"><span data-stu-id="a7b99-141">hello recommended approach is toocreate a [contained database user](https://docs.microsoft.com/sql/relational-databases/security/contained-database-users-making-your-database-portable), which allows your app tooauthenticate directly toohello database.</span></span> 

## <a name="authorization"></a><span data-ttu-id="a7b99-142">Autorização</span><span class="sxs-lookup"><span data-stu-id="a7b99-142">Authorization</span></span>

<span data-ttu-id="a7b99-143">Autorização refere-se toowhat um usuário pode fazer em um banco de dados do SQL Azure, e isso é controlado pelo banco de dados da sua conta de usuário [associações de função](https://docs.microsoft.com/sql/relational-databases/security/authentication-access/database-level-roles) e [permissões no nível do objeto](https://docs.microsoft.com/sql/relational-databases/security/permissions-database-engine).</span><span class="sxs-lookup"><span data-stu-id="a7b99-143">Authorization refers toowhat a user can do within an Azure SQL Database, and this is controlled by your user account's database [role memberships](https://docs.microsoft.com/sql/relational-databases/security/authentication-access/database-level-roles) and [object-level permissions](https://docs.microsoft.com/sql/relational-databases/security/permissions-database-engine).</span></span> <span data-ttu-id="a7b99-144">Como prática recomendada, você deve conceder Olá usuários privilégios mínimos necessários.</span><span class="sxs-lookup"><span data-stu-id="a7b99-144">As a best practice, you should grant users hello least privileges necessary.</span></span> <span data-ttu-id="a7b99-145">conta de administrador de servidor Olá que você está se conectando é membro de db_owner, que tem autoridade toodo nada no banco de dados de saudação.</span><span class="sxs-lookup"><span data-stu-id="a7b99-145">hello server admin account you are connecting with is a member of db_owner, which has authority toodo anything within hello database.</span></span> <span data-ttu-id="a7b99-146">Salve essa conta para implantar atualizações de esquema e outras operações de gerenciamento.</span><span class="sxs-lookup"><span data-stu-id="a7b99-146">Save this account for deploying schema upgrades and other management operations.</span></span> <span data-ttu-id="a7b99-147">Usar conta de "ApplicationUser" hello com tooconnect mais limitado de permissões de banco de dados de toohello seu aplicativo com hello privilégios mínimos necessitados para seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="a7b99-147">Use hello "ApplicationUser" account with more limited permissions tooconnect from your application toohello database with hello least privileges needed by your application.</span></span> <span data-ttu-id="a7b99-148">Para saber mais, veja [Gerenciar logons](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="a7b99-148">For more information, see [Manage logins](sql-database-manage-logins.md).</span></span>

<span data-ttu-id="a7b99-149">Normalmente, somente os administradores precisam acessar toohello `master` banco de dados.</span><span class="sxs-lookup"><span data-stu-id="a7b99-149">Typically, only administrators need access toohello `master` database.</span></span> <span data-ttu-id="a7b99-150">Banco de dados de usuário do access rotina tooeach deve ser por meio de usuários de banco de dados independente não-administrador criados em cada banco de dados.</span><span class="sxs-lookup"><span data-stu-id="a7b99-150">Routine access tooeach user database should be through non-administrator contained database users created in each database.</span></span> <span data-ttu-id="a7b99-151">Quando você usa usuários de banco de dados independente, não é necessário toocreate logons Olá `master` banco de dados.</span><span class="sxs-lookup"><span data-stu-id="a7b99-151">When you use contained database users, you do not need toocreate logins in hello `master` database.</span></span> <span data-ttu-id="a7b99-152">Para obter mais informações, consulte [Usuários do banco de dados independente - Tornando o banco de dados portátil](https://docs.microsoft.com/sql/relational-databases/security/contained-database-users-making-your-database-portable).</span><span class="sxs-lookup"><span data-stu-id="a7b99-152">For more information, see [Contained Database Users - Making Your Database Portable](https://docs.microsoft.com/sql/relational-databases/security/contained-database-users-making-your-database-portable).</span></span>

<span data-ttu-id="a7b99-153">Você deve familiarizar com hello recursos que podem ser usado toolimit ou elevar as permissões a seguir:</span><span class="sxs-lookup"><span data-stu-id="a7b99-153">You should familiarize yourself with hello following features that can be used toolimit or elevate permissions:</span></span>   
* <span data-ttu-id="a7b99-154">[Representação](https://docs.microsoft.com/dotnet/framework/data/adonet/sql/customizing-permissions-with-impersonation-in-sql-server) e [assinatura de módulo](https://docs.microsoft.com/dotnet/framework/data/adonet/sql/signing-stored-procedures-in-sql-server) pode ser usado toosecurely elevar as permissões temporariamente.</span><span class="sxs-lookup"><span data-stu-id="a7b99-154">[Impersonation](https://docs.microsoft.com/dotnet/framework/data/adonet/sql/customizing-permissions-with-impersonation-in-sql-server) and [module-signing](https://docs.microsoft.com/dotnet/framework/data/adonet/sql/signing-stored-procedures-in-sql-server) can be used toosecurely elevate permissions temporarily.</span></span>
* <span data-ttu-id="a7b99-155">[Segurança em nível de linha](https://docs.microsoft.com/sql/relational-databases/security/row-level-security) pode ser usado para limitar quais linhas de um usuário pode acessar.</span><span class="sxs-lookup"><span data-stu-id="a7b99-155">[Row-Level Security](https://docs.microsoft.com/sql/relational-databases/security/row-level-security) can be used limit which rows a user can access.</span></span>
* <span data-ttu-id="a7b99-156">[O mascaramento de dados](sql-database-dynamic-data-masking-get-started.md) pode ser usado toolimit exposição de dados confidenciais.</span><span class="sxs-lookup"><span data-stu-id="a7b99-156">[Data Masking](sql-database-dynamic-data-masking-get-started.md) can be used toolimit exposure of sensitive data.</span></span>
* <span data-ttu-id="a7b99-157">[Procedimentos armazenados](https://docs.microsoft.com/sql/relational-databases/stored-procedures/stored-procedures-database-engine) pode ser usado toolimit ações Olá que podem ser executadas no banco de dados de saudação.</span><span class="sxs-lookup"><span data-stu-id="a7b99-157">[Stored procedures](https://docs.microsoft.com/sql/relational-databases/stored-procedures/stored-procedures-database-engine) can be used toolimit hello actions that can be taken on hello database.</span></span>

## <a name="next-steps"></a><span data-ttu-id="a7b99-158">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="a7b99-158">Next steps</span></span>

- <span data-ttu-id="a7b99-159">Para obter uma visão geral dos recursos de segurança de banco de dados SQL hello, consulte [visão geral de segurança do SQL](sql-database-security-overview.md).</span><span class="sxs-lookup"><span data-stu-id="a7b99-159">For an overview of hello SQL Database security features, see [SQL security overview](sql-database-security-overview.md).</span></span>
- <span data-ttu-id="a7b99-160">toolearn mais informações sobre regras de firewall, consulte [as regras de Firewall](sql-database-firewall-configure.md).</span><span class="sxs-lookup"><span data-stu-id="a7b99-160">toolearn more about firewall rules, see [Firewall rules](sql-database-firewall-configure.md).</span></span>
- <span data-ttu-id="a7b99-161">toolearn sobre usuários e logons, consulte [gerenciar logons](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="a7b99-161">toolearn about users and logins, see [Manage logins](sql-database-manage-logins.md).</span></span> 
- <span data-ttu-id="a7b99-162">Para obter uma discussão sobre monitoramento proativo, confira [Auditoria do Banco de Dados](sql-database-auditing.md) e [Detecção de Ameaças do Banco de Dados SQL](sql-database-threat-detection.md).</span><span class="sxs-lookup"><span data-stu-id="a7b99-162">For a discussion of proactive monitoring, see [Database Auditing](sql-database-auditing.md) and [SQL Database Threat Detection](sql-database-threat-detection.md).</span></span>
- <span data-ttu-id="a7b99-163">Para obter um tutorial, consulte [Proteger o Banco de Dados SQL do Azure](sql-database-security-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="a7b99-163">For a tutorial, see [Secure your Azure SQL Database](sql-database-security-tutorial.md).</span></span>
