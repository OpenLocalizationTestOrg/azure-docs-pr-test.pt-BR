---
title: "aaaSQL banco de dados - ajuste automático | Microsoft Docs"
description: Banco de dados SQL analisa a consulta SQL e automaticamente se adapta a carga de trabalho toouser.
services: sql-database
documentationcenter: 
author: jovanpop-msft
manager: jhubbard
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: monitor & tune
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 06/05/2017
ms.author: jovanpop
ms.openlocfilehash: 897a8deaabedb6727dc49958c64d0433c5f2e4f4
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="automatic-tuning"></a><span data-ttu-id="12ea9-103">Ajuste automático</span><span class="sxs-lookup"><span data-stu-id="12ea9-103">Automatic tuning</span></span>

<span data-ttu-id="12ea9-104">Banco de dados do SQL Azure é um serviço de dados totalmente gerenciado que monitora a consultas de saudação que são executadas no banco de dados de saudação e automaticamente podem melhorar o desempenho da carga de trabalho de saudação.</span><span class="sxs-lookup"><span data-stu-id="12ea9-104">Azure SQL Database is a fully managed data service that monitors hello queries that are executed on hello database and can automatically improve performance of hello workload.</span></span> <span data-ttu-id="12ea9-105">Banco de dados SQL do Azure tem um mecanismo de inteligência incorporada que pode ajustar e melhorar o desempenho de suas consultas adaptando dinamicamente cargas de trabalho de tooyour de banco de dados Olá automaticamente.</span><span class="sxs-lookup"><span data-stu-id="12ea9-105">Azure SQL Database has a built-in intelligence mechanism that can automatically tune and improve performance of your queries by dynamically adapting hello database tooyour workload.</span></span> <span data-ttu-id="12ea9-106">O ajuste automático no banco de dados do SQL Azure pode ser um dos recursos mais importantes de saudação que pode ser habilitado no desempenho do banco de dados do Azure SQL toooptimize de suas consultas.</span><span class="sxs-lookup"><span data-stu-id="12ea9-106">Automatic tuning in Azure SQL Database might be one of hello most important features that you can enable on Azure SQL Database toooptimize performance of your queries.</span></span>

<span data-ttu-id="12ea9-107">Consulte este artigo para obter as etapas Olá muito[Ativar ajuste automático](sql-database-automatic-tuning-enable.md) usando Olá portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="12ea9-107">See this article for hello steps too[enable automatic tuning](sql-database-automatic-tuning-enable.md) using hello Azure portal.</span></span>

## <a name="why-automatic-tuning"></a><span data-ttu-id="12ea9-108">Por que usar o ajuste automático?</span><span class="sxs-lookup"><span data-stu-id="12ea9-108">Why automatic tuning?</span></span>

<span data-ttu-id="12ea9-109">Uma das tarefas de saudação principal na administração clássico do banco de dados está monitorando a carga de trabalho Olá, identificando críticas SQL consultas, índices que devem ser adicionados tooimprove desempenho e raramente usado índices.</span><span class="sxs-lookup"><span data-stu-id="12ea9-109">One of hello main tasks in classic database administration is monitoring hello workload, identifying critical SQL queries, indexes that should be added tooimprove performance, and rarely used indexes.</span></span> <span data-ttu-id="12ea9-110">Banco de dados SQL do Azure fornece informações detalhadas sobre as consultas de saudação e índices que você precisa toomonitor.</span><span class="sxs-lookup"><span data-stu-id="12ea9-110">Azure SQL Database provides detailed insight into hello queries and indexes that you need toomonitor.</span></span> <span data-ttu-id="12ea9-111">No entanto, monitorar o banco de dados é uma tarefa difícil e entediante, especialmente ao lidar com muitos bancos de dados.</span><span class="sxs-lookup"><span data-stu-id="12ea9-111">However, constantly monitoring database is a hard and tedious task, especially when dealing with many databases.</span></span> <span data-ttu-id="12ea9-112">Gerenciar um grande número de bancos de dados pode ser impossível toodo com eficiência mesmo com todas as ferramentas disponíveis e relatórios que fornecem banco de dados do SQL Azure e o portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="12ea9-112">Managing a huge number of databases might be impossible toodo efficiently even with all available tools and reports that Azure SQL Database and Azure portal provide.</span></span> <span data-ttu-id="12ea9-113">Em vez de monitorar e ajustar o banco de dados manualmente, você pode considerar delegar algumas Olá monitoramento e ajuste ações tooAzure banco de dados SQL usando o recurso de ajuste automático.</span><span class="sxs-lookup"><span data-stu-id="12ea9-113">Instead of monitoring and tuning your database manually, you might consider delegating some of hello monitoring and tuning actions tooAzure SQL Database using automatic tuning feature.</span></span> 


> [!VIDEO https://channel9.msdn.com/Blogs/Azure-in-the-Enterprise/Enabling-Azure-SQL-Database-Auto-Tuning-at-Scale-for-Microsoft-IT/player]
>

## <a name="how-does-automatic-tuning-work"></a><span data-ttu-id="12ea9-114">Como funciona o trabalho de ajuste automático?</span><span class="sxs-lookup"><span data-stu-id="12ea9-114">How does automatic tuning work?</span></span>

<span data-ttu-id="12ea9-115">Banco de dados SQL do Azure tem um processo de análise e monitoramento de desempenho contínuo que constantemente aprende Olá característica da carga de trabalho e identificar possíveis problemas e melhorias.</span><span class="sxs-lookup"><span data-stu-id="12ea9-115">Azure SQL Database has a continuous performance monitoring and analysis process that constantly learns about hello characteristic of your workload and identify potential issues and improvements.</span></span>

![Processo de ajuste automático](./media/sql-database-automatic-tuning/tuning-process.png)

<span data-ttu-id="12ea9-117">Isso permite que o processo toodynamically de banco de dados SQL adaptar carga de trabalho tooyour Localizando quais planos e índices podem melhorar o desempenho das cargas de trabalho e o que indexa afeta suas cargas de trabalho.</span><span class="sxs-lookup"><span data-stu-id="12ea9-117">This process enables Azure SQL Database toodynamically adapt tooyour workload by finding what indexes and plans might improve performance of your workloads and what indexes affect your workloads.</span></span> <span data-ttu-id="12ea9-118">Com base nessas conclusões, o ajuste automático aplica ações de ajuste que melhoram o desempenho da carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="12ea9-118">Based on these findings, automatic tuning applies tuning actions that improve performance of your workload.</span></span> <span data-ttu-id="12ea9-119">Além disso, o banco de dados do SQL Azure monitora continuamente desempenho após qualquer alteração feita pelo tooensure de ajuste automático que melhora o desempenho da carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="12ea9-119">In addition, Azure SQL Database continuously monitors performance after any change made by automatic tuning tooensure that it improves performance of your workload.</span></span> <span data-ttu-id="12ea9-120">Qualquer ação que não melhorar o desempenho é revertida automaticamente.</span><span class="sxs-lookup"><span data-stu-id="12ea9-120">Any action that didn’t improve performance is automatically reverted.</span></span> <span data-ttu-id="12ea9-121">Esse processo de verificação é um recurso importante que garante que qualquer alteração feita pelo ajuste automático não diminuir o desempenho de saudação da carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="12ea9-121">This verification process is a key feature that ensures that any change made by automatic tuning does not decrease hello performance of your workload.</span></span>

<span data-ttu-id="12ea9-122">Há dois aspectos de ajuste automático que estão disponíveis no Banco de Dados SQL do Azure:</span><span class="sxs-lookup"><span data-stu-id="12ea9-122">There are two automatic tuning aspects that are available in Azure SQL Database:</span></span>

 -  <span data-ttu-id="12ea9-123">**Gerenciamento de índice automático** que identifica os índices que devem ser adicionados ao seu banco de dados e os índices que devem ser removidos.</span><span class="sxs-lookup"><span data-stu-id="12ea9-123">**Automatic index management** that identifies indexes that should be added in your database, and indexes that should be removed.</span></span>
 -  <span data-ttu-id="12ea9-124">**Correção automática de plano** (em breve; já está disponível no SQL Server 2017) que identifica planos problemáticos e corrige problemas de desempenho do plano SQL .</span><span class="sxs-lookup"><span data-stu-id="12ea9-124">**Automatic plan correction** (coming soon, already available in SQL Server 2017) that identifies problematic plans and fixes SQL plan performance problems.</span></span>

## <a name="automatic-index-management"></a><span data-ttu-id="12ea9-125">Gerenciamento de índice automático</span><span class="sxs-lookup"><span data-stu-id="12ea9-125">Automatic index management</span></span>

<span data-ttu-id="12ea9-126">No Banco de Dados SQL do Azure, o gerenciamento de índice é fácil porque o Banco de Dados SQL do Azure aprende sobre sua carga de trabalho e garante que seus dados são indexados sempre da melhor forma.</span><span class="sxs-lookup"><span data-stu-id="12ea9-126">In Azure SQL Database, index management is easy because Azure SQL Database learns about your workload and ensures that your data is always optimally indexed.</span></span> <span data-ttu-id="12ea9-127">Um design de índice apropriado é crucial para otimizar o desempenho da carga de trabalho e o gerenciamento de índice automático pode ajudar a otimizar seus índices.</span><span class="sxs-lookup"><span data-stu-id="12ea9-127">Proper index design is crucial for optimal performance of your workload, and automatic index management can help you optimize your indexes.</span></span> <span data-ttu-id="12ea9-128">Gerenciamento automático de índice pode corrigir problemas de desempenho em bancos de dados indexados incorretamente ou manter e aprimore os índices no esquema de banco de dados existente do hello.</span><span class="sxs-lookup"><span data-stu-id="12ea9-128">Automatic index management can either fix performance issues in incorrectly indexed databases, or maintain and improve indexes on hello existing database schema.</span></span> 

### <a name="why-do-you-need-index-management"></a><span data-ttu-id="12ea9-129">Por que você precisa de gerenciamento de índice?</span><span class="sxs-lookup"><span data-stu-id="12ea9-129">Why do you need index management?</span></span>

<span data-ttu-id="12ea9-130">Índices de acelerar algumas de suas consultas que leem dados de tabelas de saudação; No entanto, eles podem retardar consultas Olá que atualizam dados.</span><span class="sxs-lookup"><span data-stu-id="12ea9-130">Indexes speed up some of your queries that read data from hello tables; however, they can slow down hello queries that update data.</span></span> <span data-ttu-id="12ea9-131">Você precisa toocarefully analisar quando toocreate um índice e quais colunas são necessárias tooinclude em Olá índice.</span><span class="sxs-lookup"><span data-stu-id="12ea9-131">You need toocarefully analyze when toocreate an index and what columns you need tooinclude in hello index.</span></span> <span data-ttu-id="12ea9-132">Alguns índices podem não ser mais necessários após algum tempo.</span><span class="sxs-lookup"><span data-stu-id="12ea9-132">Some indexes might not be needed after some time.</span></span> <span data-ttu-id="12ea9-133">Portanto, você precisaria tooperiodically identificar e remover índices de saudação que não coloque nenhum benefício.</span><span class="sxs-lookup"><span data-stu-id="12ea9-133">Therefore, you would need tooperiodically identify and drop hello indexes that do not bring any benefits.</span></span> <span data-ttu-id="12ea9-134">Se você ignorar Olá índices não utilizados, o desempenho das consultas de saudação que atualizam dados deve ser diminuído sem nenhum benefício em consultas de saudação que ler dados.</span><span class="sxs-lookup"><span data-stu-id="12ea9-134">If you ignore hello unused indexes, performance of hello queries that update data would be decreased without any benefit on hello queries that read data.</span></span> <span data-ttu-id="12ea9-135">Índices não utilizados também afetam o desempenho geral do sistema de saudação porque atualizações adicionais precisam do log desnecessário.</span><span class="sxs-lookup"><span data-stu-id="12ea9-135">Unused indexes also affect overall performance of hello system because additional updates require unnecessary logging.</span></span>

<span data-ttu-id="12ea9-136">Localizar o conjunto ideal de saudação de índices que melhoram o desempenho de consultas de saudação que ler dados das tabelas e têm impacto mínimo sobre as atualizações pode exigir análise contínua e complexa.</span><span class="sxs-lookup"><span data-stu-id="12ea9-136">Finding hello optimal set of indexes that improve performance of hello queries that read data from your tables and have minimal impact on updates might require continuous and complex analysis.</span></span>

<span data-ttu-id="12ea9-137">Banco de dados SQL do Azure usa inteligência interna e regras avançadas para analisar suas consultas, identifique os índices que seriam ideais para suas cargas de trabalho atuais e índices Olá podem ser removidos.</span><span class="sxs-lookup"><span data-stu-id="12ea9-137">Azure SQL Database uses built-in intelligence and advanced rules that analyze your queries, identify indexes that would be optimal for your current workloads, and hello indexes might be removed.</span></span> <span data-ttu-id="12ea9-138">Banco de dados SQL do Azure garante que você tenha um conjunto mínimo necessário de índices que otimizar consultas Olá que leem dados, afetar a saudação minimizada Olá outras consultas.</span><span class="sxs-lookup"><span data-stu-id="12ea9-138">Azure SQL Database ensures that you have a minimal necessary set of indexes that optimize hello queries that read data, with hello minimized impact on hello other queries.</span></span>

### <a name="how-tooidentify-indexes-that-need-toobe-changed-in-your-database"></a><span data-ttu-id="12ea9-139">Como tooidentify índices que toobe necessidade alterado no banco de dados?</span><span class="sxs-lookup"><span data-stu-id="12ea9-139">How tooidentify indexes that need toobe changed in your database?</span></span>

<span data-ttu-id="12ea9-140">O Banco de Dados SQL do Azure facilita o processo de gerenciamento de índice.</span><span class="sxs-lookup"><span data-stu-id="12ea9-140">Azure SQL Database makes index management process easy.</span></span> <span data-ttu-id="12ea9-141">Em vez de processo entediante de saudação de carga de trabalho manual análise e monitoramento de índice, banco de dados do SQL Azure analisa sua carga de trabalho, identifica as consultas de saudação que podem ser executadas mais rapidamente com um novo índice e identifica os índices duplicados ou não utilizados.</span><span class="sxs-lookup"><span data-stu-id="12ea9-141">Instead of hello tedious process of manual workload analysis and index monitoring, Azure SQL Database analyzes your workload, identifies hello queries that could be executed faster with a new index, and identifies unused or duplicated indexes.</span></span> <span data-ttu-id="12ea9-142">Encontre mais informações sobre a identificação de índices que devem ser alterados em [Encontrar recomendações de índice no portal do Azure](sql-database-advisor-portal.md).</span><span class="sxs-lookup"><span data-stu-id="12ea9-142">Find more information about identification of indexes that should be changed at [Find index recommendations in Azure portal](sql-database-advisor-portal.md).</span></span>

### <a name="automatic-index-management-considerations"></a><span data-ttu-id="12ea9-143">Considerações sobre o gerenciamento de índice automático</span><span class="sxs-lookup"><span data-stu-id="12ea9-143">Automatic index management considerations</span></span>

<span data-ttu-id="12ea9-144">Se você achar que regras internas Olá melhorar o desempenho de saudação do banco de dados, você pode permitir que banco de dados SQL do Azure gerenciar automaticamente seus índices.</span><span class="sxs-lookup"><span data-stu-id="12ea9-144">If you find that hello built-in rules improve hello performance of your database, you might let Azure SQL database automatically manage your indexes.</span></span>

<span data-ttu-id="12ea9-145">Ações necessárias toocreate os índices necessários em bancos de dados do SQL Azure podem consumir recursos e temporariamente afetam o desempenho da carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="12ea9-145">Actions required toocreate necessary indexes in Azure SQL Databases might consume resources and temporally affect workload performance.</span></span> <span data-ttu-id="12ea9-146">impacto de saudação toominimize de criação de índice no desempenho da carga de trabalho, banco de dados do SQL Azure localiza a janela de tempo apropriado de saudação para qualquer operação de gerenciamento de índice.</span><span class="sxs-lookup"><span data-stu-id="12ea9-146">toominimize hello impact of index creation on workload performance, Azure SQL Database finds hello appropriate time window for any index management operation.</span></span> <span data-ttu-id="12ea9-147">Ação de ajuste é adiada Se o banco de dados de saudação precisa tooexecute de recursos de sua carga de trabalho e iniciado quando o banco de dados de saudação tem suficiente recursos não utilizados que podem ser usados para tarefas de manutenção de saudação.</span><span class="sxs-lookup"><span data-stu-id="12ea9-147">Tuning action is postponed if hello database needs resources tooexecute your workload, and started when hello database has enough unused resources that can be used for hello maintenance task.</span></span> <span data-ttu-id="12ea9-148">Um recurso importante no gerenciamento automático de índice é uma verificação de ações de saudação.</span><span class="sxs-lookup"><span data-stu-id="12ea9-148">One important feature in automatic index management is a verification of hello actions.</span></span> <span data-ttu-id="12ea9-149">Quando o banco de dados do SQL Azure cria ou descarta o índice, um processo de monitoramento analisa o desempenho de seu tooverify de carga de trabalho que ação Olá melhor desempenho de saudação.</span><span class="sxs-lookup"><span data-stu-id="12ea9-149">When Azure SQL Database creates or drops index, a monitoring process analyzes performance of your workload tooverify that hello action improved hello performance.</span></span> <span data-ttu-id="12ea9-150">Se ele não colocar uma melhoria significativa – ação Olá será revertida imediatamente.</span><span class="sxs-lookup"><span data-stu-id="12ea9-150">If it didn’t bring significant improvement – hello action is immediately reverted.</span></span> <span data-ttu-id="12ea9-151">Dessa forma, o Banco de Dados SQL do Azure garante que as ações automáticas não afetam negativamente o desempenho da carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="12ea9-151">This way, Azure SQL Database ensures that automatic actions do not negatively impact performance of your workload.</span></span> <span data-ttu-id="12ea9-152">Índices criados com o ajuste automático são transparentes para a operação de manutenção Olá no esquema subjacente hello.</span><span class="sxs-lookup"><span data-stu-id="12ea9-152">Indexes created by automatic tuning are transparent for hello maintenance operation on hello underlying schema.</span></span> <span data-ttu-id="12ea9-153">Alterações de esquema, como remover ou renomear colunas não são bloqueadas pela presença de saudação de índices criados automaticamente.</span><span class="sxs-lookup"><span data-stu-id="12ea9-153">Schema changes such as dropping or renaming columns are not blocked by hello presence of automatically created indexes.</span></span> <span data-ttu-id="12ea9-154">Os índices criados automaticamente pelo Banco de Dados SQL do Azure são imediatamente descartados quando a tabela ou colunas relacionadas são descartadas.</span><span class="sxs-lookup"><span data-stu-id="12ea9-154">Indexes that are automatically created by Azure SQL Database are immediately dropped when related table or columns is dropped.</span></span>

## <a name="automatic-plan-choice-correction"></a><span data-ttu-id="12ea9-155">Correção automática de escolha do plano</span><span class="sxs-lookup"><span data-stu-id="12ea9-155">Automatic plan choice correction</span></span>

<span data-ttu-id="12ea9-156">A correção automática de plano é um novo recurso de ajuste automático adicionado no SQL Server 2017 CTP 2.0 que identifica os planos de SQL inadequados.</span><span class="sxs-lookup"><span data-stu-id="12ea9-156">Automatic plan correction is a new automatic tuning feature added in SQL Server 2017 CTP2.0 that identifies SQL plans that misbehave.</span></span> <span data-ttu-id="12ea9-157">Essa opção de ajuste automático estará disponível em breve no Banco de Dados SQL do Azure.</span><span class="sxs-lookup"><span data-stu-id="12ea9-157">This automatic tuning option is coming soon on Azure SQL Database.</span></span> <span data-ttu-id="12ea9-158">Veja mais informações em [Ajuste automático no SQL Server 2017](https://docs.microsoft.com/sql/relational-databases/automatic-tuning/automatic-tuning).</span><span class="sxs-lookup"><span data-stu-id="12ea9-158">Find more information at [Automatic tuning in SQL Server 2017](https://docs.microsoft.com/sql/relational-databases/automatic-tuning/automatic-tuning).</span></span>

## <a name="next-steps"></a><span data-ttu-id="12ea9-159">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="12ea9-159">Next steps</span></span>

- <span data-ttu-id="12ea9-160">tooenable automático de ajuste no banco de dados do SQL Azure e permita automática totalmente o recurso de ajuste gerenciar sua carga de trabalho, consulte [Ativar ajuste automático](sql-database-automatic-tuning-enable.md).</span><span class="sxs-lookup"><span data-stu-id="12ea9-160">tooenable automatic tuning in Azure SQL Database and let automatic tuning feature fully manage your workload, see [Enable automatic tuning](sql-database-automatic-tuning-enable.md).</span></span>
- <span data-ttu-id="12ea9-161">ajuste manual toouse, você pode examinar [recomendações no portal do Azure de ajuste](sql-database-advisor-portal.md) e aplicar manualmente Olá aqueles que melhoram o desempenho de suas consultas.</span><span class="sxs-lookup"><span data-stu-id="12ea9-161">toouse manual tuning, you can review [Tuning recommendations in Azure portal](sql-database-advisor-portal.md) and manually apply hello ones that improve performance of your queries.</span></span>
