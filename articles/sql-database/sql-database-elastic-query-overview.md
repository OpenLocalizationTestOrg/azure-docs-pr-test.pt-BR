---
title: "Visão geral de consulta Elástico de banco de dados SQL do aaaAzure | Microsoft Docs"
description: "Visão geral do recurso de consulta Elástico Olá"
services: sql-database
documentationcenter: 
manager: jhubbard
author: MladjoA
ms.assetid: a8bf0e2c-bc74-44d0-9b1e-bcc9a6aa2e33
ms.service: sql-database
ms.custom: scale out apps
ms.workload: sql-database
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/27/2016
ms.author: mlandzic
ms.openlocfilehash: db17f551882cfcae0da67fdda12708baeb6db81c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="azure-sql-database-elastic-query-overview-preview"></a><span data-ttu-id="6b304-103">Visão geral da consulta elástica do Banco de Dados SQL do Azure (visualização)</span><span class="sxs-lookup"><span data-stu-id="6b304-103">Azure SQL Database elastic query overview (preview)</span></span>
<span data-ttu-id="6b304-104">recurso de consulta Elástico Hello (em visualização) permite que você toorun uma consulta Transact-SQL que abrange vários bancos de dados no banco de dados do SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="6b304-104">hello elastic query feature (in preview) enables you toorun a Transact-SQL query that spans multiple databases in Azure SQL Database.</span></span> <span data-ttu-id="6b304-105">Isso permite consultas de bancos de dados de tooperform tooaccess tabelas remotas e tooconnect Microsoft e terceiros tooquery de ferramentas (Excel, Power BI, Tableau, etc.) em camadas de dados com vários bancos de dados.</span><span class="sxs-lookup"><span data-stu-id="6b304-105">It allows you tooperform cross-database queries tooaccess remote tables, and tooconnect Microsoft and third party tools (Excel, PowerBI, Tableau, etc.) tooquery across data tiers with multiple databases.</span></span> <span data-ttu-id="6b304-106">Usando esse recurso, você pode dimensionar as camadas de dados toolarge consultas no banco de dados SQL e visualizar os resultados de saudação em relatórios de business intelligence (BI).</span><span class="sxs-lookup"><span data-stu-id="6b304-106">Using this feature, you can scale out queries toolarge data tiers in SQL Database and visualize hello results in business intelligence (BI) reports.</span></span>


## <a name="why-use-elastic-queries"></a><span data-ttu-id="6b304-107">Por que usar consultas elásticas?</span><span class="sxs-lookup"><span data-stu-id="6b304-107">Why use elastic queries?</span></span>

<span data-ttu-id="6b304-108">**Banco de Dados SQL do Azure**</span><span class="sxs-lookup"><span data-stu-id="6b304-108">**Azure SQL Database**</span></span>

<span data-ttu-id="6b304-109">Consulte em bancos de dados SQL do Azure totalmente em T-SQL.</span><span class="sxs-lookup"><span data-stu-id="6b304-109">Query across Azure SQL databases completely in T-SQL.</span></span> <span data-ttu-id="6b304-110">Isso permite consultas somente leitura de bancos de dados remotos.</span><span class="sxs-lookup"><span data-stu-id="6b304-110">This allows for read-only querying of remote databases.</span></span> <span data-ttu-id="6b304-111">Isso fornece uma opção para o local atual para aplicativos de toomigrate de clientes do SQL Server usando nomes de três e quatro partes ou de servidor vinculado tooSQL banco de dados.</span><span class="sxs-lookup"><span data-stu-id="6b304-111">This provides an option for current on-premises SQL Server customers toomigrate applications using three- and four-part names or linked server tooSQL DB.</span></span>

<span data-ttu-id="6b304-112">**Disponível no nível Standard**</span><span class="sxs-lookup"><span data-stu-id="6b304-112">**Available on standard tier**</span></span>

<span data-ttu-id="6b304-113">Há suporte para consulta de elástica no nível de desempenho padrão Olá na camada de desempenho adição toohello Premium.</span><span class="sxs-lookup"><span data-stu-id="6b304-113">Elastic query is supported on hello Standard performance tier in addition toohello Premium performance tier.</span></span> <span data-ttu-id="6b304-114">Consulte Olá seção limitações da visualização abaixo sobre limitações de desempenho para os níveis de desempenho inferiores.</span><span class="sxs-lookup"><span data-stu-id="6b304-114">See hello section on Preview Limitations below on performance limitations for lower performance tiers.</span></span>

<span data-ttu-id="6b304-115">**Bancos de dados por push tooremote**</span><span class="sxs-lookup"><span data-stu-id="6b304-115">**Push tooremote databases**</span></span>

<span data-ttu-id="6b304-116">Consultas Elásticos agora podem enviar parâmetros toohello remotos bancos de dados SQL para execução.</span><span class="sxs-lookup"><span data-stu-id="6b304-116">Elastic queries can now push SQL parameters toohello remote databases for execution.</span></span>

<span data-ttu-id="6b304-117">**Execução de procedimento armazenado**</span><span class="sxs-lookup"><span data-stu-id="6b304-117">**Stored procedure execution**</span></span>

<span data-ttu-id="6b304-118">Execute chamadas remotas de procedimento armazenado ou funções remotas usando [sp\_execute \_remote](https://msdn.microsoft.com/library/mt703714).</span><span class="sxs-lookup"><span data-stu-id="6b304-118">Execute remote stored procedure calls or remote functions using [sp\_execute \_remote](https://msdn.microsoft.com/library/mt703714).</span></span>

<span data-ttu-id="6b304-119">**Flexibilidade**</span><span class="sxs-lookup"><span data-stu-id="6b304-119">**Flexibility**</span></span>

<span data-ttu-id="6b304-120">Tabelas externas com elástica consulta podem referenciar tabelas tooremote com um esquema diferente ou nome de tabela.</span><span class="sxs-lookup"><span data-stu-id="6b304-120">External tables with elastic query can now refer tooremote tables with a different schema or table name.</span></span>

## <a name="elastic-query-scenarios"></a><span data-ttu-id="6b304-121">Cenários de consulta elástica</span><span class="sxs-lookup"><span data-stu-id="6b304-121">Elastic query scenarios</span></span>

<span data-ttu-id="6b304-122">meta de saudação é toofacilitate consultando cenários onde vários bancos de dados contribuem linhas em um único resultado geral.</span><span class="sxs-lookup"><span data-stu-id="6b304-122">hello goal is toofacilitate querying scenarios where multiple databases contribute rows into a single overall result.</span></span> <span data-ttu-id="6b304-123">consulta de saudação ou pode ser composta por Olá usuário ou aplicativo a diretamente ou indiretamente por meio de ferramentas que estão conectados toohello banco de dados.</span><span class="sxs-lookup"><span data-stu-id="6b304-123">hello query can either be composed by hello user or application directly, or indirectly through tools that are connected toohello database.</span></span> <span data-ttu-id="6b304-124">Isso é especialmente útil ao criar relatórios usando as ferramentas comerciais de BI ou de integração de dados, ou então qualquer aplicativo que não possa ser alterado.</span><span class="sxs-lookup"><span data-stu-id="6b304-124">This is especially useful when creating reports, using commercial BI or data integration tools—or any application that cannot be changed.</span></span> <span data-ttu-id="6b304-125">Com uma consulta elástica, você pode consultar em vários bancos de dados usando a experiência de conectividade do SQL Server familiar Olá em ferramentas como o Excel, Power BI, Tableau ou Cognos.</span><span class="sxs-lookup"><span data-stu-id="6b304-125">With an elastic query, you can query across several databases using hello familiar SQL Server connectivity experience in tools such as Excel, PowerBI, Tableau, or Cognos.</span></span>
<span data-ttu-id="6b304-126">Uma consulta elástica permite o fácil acesso tooan toda coleção de bancos de dados por meio de consultas emitidas pelo SQL Server Management Studio ou Visual Studio e facilita a consulta de bancos de dados do Entity Framework ou outros ambientes de ORM.</span><span class="sxs-lookup"><span data-stu-id="6b304-126">An elastic query allows easy access tooan entire collection of databases through queries issued by SQL Server Management Studio or Visual Studio, and facilitates cross-database querying from Entity Framework or other ORM environments.</span></span> <span data-ttu-id="6b304-127">A Figura 1 mostra um cenário em que aplicativos de nuvem existente (que usa Olá [biblioteca de cliente do banco de dados Elástico](sql-database-elastic-database-client-library.md)) camada compilações em um dados expandidos e uma consulta elástica é usada para bancos de dados de relatório.</span><span class="sxs-lookup"><span data-stu-id="6b304-127">Figure 1 shows a scenario where an existing cloud application (which uses hello [elastic database client library](sql-database-elastic-database-client-library.md)) builds on a scaled-out data tier, and an elastic query is used for cross-database reporting.</span></span>

<span data-ttu-id="6b304-128">**Figura 1** Consulta elástica usada na camada de dados escalada horizontalmente</span><span class="sxs-lookup"><span data-stu-id="6b304-128">**Figure 1** Elastic query used on scaled-out data tier</span></span>

![Consulta elástica usada na camada de dados escalada horizontalmente][1]

<span data-ttu-id="6b304-130">Cenários de cliente para consulta Elástico são caracterizados por Olá topologias a seguir:</span><span class="sxs-lookup"><span data-stu-id="6b304-130">Customer scenarios for elastic query are characterized by hello following topologies:</span></span>

* <span data-ttu-id="6b304-131">**Particionamento vertical - consultas de bancos de dados** (topologia 1): dados saudação são particionados verticalmente entre vários bancos de dados em uma camada de dados.</span><span class="sxs-lookup"><span data-stu-id="6b304-131">**Vertical partitioning - Cross-database queries** (Topology 1): hello data is partitioned vertically between a number of databases in a data tier.</span></span> <span data-ttu-id="6b304-132">Geralmente, diferentes conjuntos de tabelas residem em bancos de dados diferentes.</span><span class="sxs-lookup"><span data-stu-id="6b304-132">Typically, different sets of tables reside on different databases.</span></span> <span data-ttu-id="6b304-133">Isso significa que esse esquema Olá é diferente em bancos de dados diferentes.</span><span class="sxs-lookup"><span data-stu-id="6b304-133">That means that hello schema is different on different databases.</span></span> <span data-ttu-id="6b304-134">Por exemplo, todas as tabelas de inventário estão em um banco de dados, enquanto todas as tabelas relacionadas à contabilidade estão em um segundo banco de dados.</span><span class="sxs-lookup"><span data-stu-id="6b304-134">For instance, all tables for inventory are on one database while all accounting-related tables are on a second database.</span></span> <span data-ttu-id="6b304-135">Casos de uso comuns com essa topologia requerem um tooquery em ou relatórios toocompile entre tabelas em vários bancos de dados.</span><span class="sxs-lookup"><span data-stu-id="6b304-135">Common use cases with this topology require one tooquery across or toocompile reports across tables in several databases.</span></span>
* <span data-ttu-id="6b304-136">**Particionamento horizontal - fragmentação** (topologia 2): os dados são particionados horizontalmente de camada toodistribute linhas em uma expansão de dados.</span><span class="sxs-lookup"><span data-stu-id="6b304-136">**Horizontal Partitioning - Sharding** (Topology 2): Data is partitioned horizontally toodistribute rows across a scaled out data tier.</span></span> <span data-ttu-id="6b304-137">Com essa abordagem, o esquema de saudação é idêntica em todos os bancos de dados participantes.</span><span class="sxs-lookup"><span data-stu-id="6b304-137">With this approach, hello schema is identical on all participating databases.</span></span> <span data-ttu-id="6b304-138">Essa abordagem também é chamada de “fragmentação”.</span><span class="sxs-lookup"><span data-stu-id="6b304-138">This approach is also called “sharding”.</span></span> <span data-ttu-id="6b304-139">Fragmentação pode ser executada e gerenciados usando bibliotecas de ferramentas de banco de dados Elástico hello (1) ou (2) autofragmentação.</span><span class="sxs-lookup"><span data-stu-id="6b304-139">Sharding can be performed and managed using (1) hello elastic database tools libraries or (2) self-sharding.</span></span> <span data-ttu-id="6b304-140">Uma consulta elástica é relatórios tooquery ou compilação usados em vários fragmentos.</span><span class="sxs-lookup"><span data-stu-id="6b304-140">An elastic query is used tooquery or compile reports across many shards.</span></span>

> [!NOTE]
> <span data-ttu-id="6b304-141">Consulta elástica funciona melhor para cenários de relatórios ocasionais em que a maioria do processamento de saudação pode ser executada na camada de dados de saudação.</span><span class="sxs-lookup"><span data-stu-id="6b304-141">Elastic query works best for occasional reporting scenarios where most of hello processing can be performed on hello data tier.</span></span> <span data-ttu-id="6b304-142">Para os cenários de cargas de trabalho de relatórios pesadas ou data warehouse com consultas mais complexas, considere também usar o [SQL Data Warehouse do Azure](https://azure.microsoft.com/services/sql-data-warehouse/).</span><span class="sxs-lookup"><span data-stu-id="6b304-142">For heavy reporting workloads or data warehousing scenarios with more complex queries, also consider using [Azure SQL Data Warehouse](https://azure.microsoft.com/services/sql-data-warehouse/).</span></span>
>  

## <a name="vertical-partitioning---cross-database-queries"></a><span data-ttu-id="6b304-143">Particionamento vertical - consultas entre bancos de dados</span><span class="sxs-lookup"><span data-stu-id="6b304-143">Vertical partitioning - cross-database queries</span></span>

<span data-ttu-id="6b304-144">toobegin de codificação, consulte [Introdução à consulta de bancos de dados (particionamento vertical)](sql-database-elastic-query-getting-started-vertical.md).</span><span class="sxs-lookup"><span data-stu-id="6b304-144">toobegin coding, see [Getting started with cross-database query (vertical partitioning)](sql-database-elastic-query-getting-started-vertical.md).</span></span>

<span data-ttu-id="6b304-145">Uma consulta elástica pode ser usado toomake dados localizados no banco de dados disponível tooother SQL bancos de dados SQL.</span><span class="sxs-lookup"><span data-stu-id="6b304-145">An elastic query can be used toomake data located in a SQL database available tooother SQL databases.</span></span> <span data-ttu-id="6b304-146">Isso permite consultas de tootables de toorefer um banco de dados em qualquer outro SQL banco de dados remoto.</span><span class="sxs-lookup"><span data-stu-id="6b304-146">This allows queries from one database toorefer tootables in any other remote SQL database.</span></span> <span data-ttu-id="6b304-147">Olá primeira etapa é toodefine uma fonte de dados externa para cada banco de dados remoto.</span><span class="sxs-lookup"><span data-stu-id="6b304-147">hello first step is toodefine an external data source for each remote database.</span></span> <span data-ttu-id="6b304-148">fonte de dados externa Olá é definido no banco de dados local saudação do qual você deseja toogain acesso tootables localizado no banco de dados remoto hello.</span><span class="sxs-lookup"><span data-stu-id="6b304-148">hello external data source is defined in hello local database from which you want toogain access tootables located on hello remote database.</span></span> <span data-ttu-id="6b304-149">Não são necessárias alterações no banco de dados remoto hello.</span><span class="sxs-lookup"><span data-stu-id="6b304-149">No changes are necessary on hello remote database.</span></span> <span data-ttu-id="6b304-150">Para verticais particionamentos cenários típicos onde os bancos de dados diferentes têm esquemas diferentes, Elásticos consultas podem ser usada tooimplement casos de uso comuns, como acessar os dados tooreference e entre bancos de dados consultando.</span><span class="sxs-lookup"><span data-stu-id="6b304-150">For typical vertical partitioning scenarios where different databases have different schemas, elastic queries can be used tooimplement common use cases such as access tooreference data and cross-database querying.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="6b304-151">Você deve ter a permissão para ALTERAR QUALQUER FONTE DE DADOS EXTERNA.</span><span class="sxs-lookup"><span data-stu-id="6b304-151">You must possess ALTER ANY EXTERNAL DATA SOURCE permission.</span></span> <span data-ttu-id="6b304-152">Essa permissão é incluída com a permissão ALTER DATABASE hello.</span><span class="sxs-lookup"><span data-stu-id="6b304-152">This permission is included with hello ALTER DATABASE permission.</span></span> <span data-ttu-id="6b304-153">Permissões ALTER ANY EXTERNAL DATA SOURCE são necessários toorefer toohello subjacente da fonte de dados.</span><span class="sxs-lookup"><span data-stu-id="6b304-153">ALTER ANY EXTERNAL DATA SOURCE permissions are needed toorefer toohello underlying data source.</span></span>
>

<span data-ttu-id="6b304-154">**Dados de referência**: topologia Olá é usada para gerenciamento de dados de referência.</span><span class="sxs-lookup"><span data-stu-id="6b304-154">**Reference data**: hello topology is used for reference data management.</span></span> <span data-ttu-id="6b304-155">Na Figura Olá abaixo, duas tabelas (T1 e T2) com dados de referência são mantidas em um banco de dados dedicado.</span><span class="sxs-lookup"><span data-stu-id="6b304-155">In hello figure below, two tables (T1 and T2) with reference data are kept on a dedicated database.</span></span> <span data-ttu-id="6b304-156">Usando uma consulta elástica, agora você pode acessar tabelas T1 e T2 remotamente de outros bancos de dados, conforme mostrado na Figura hello.</span><span class="sxs-lookup"><span data-stu-id="6b304-156">Using an elastic query, you can now access tables T1 and T2 remotely from other databases, as shown in hello figure.</span></span> <span data-ttu-id="6b304-157">Use a topologia 1 se as tabelas de referência forem pequenas ou se as consultas remotas na tabela de referência tiverem predicados seletivos.</span><span class="sxs-lookup"><span data-stu-id="6b304-157">Use topology 1 if reference tables are small or remote queries into reference table have selective predicates.</span></span>

<span data-ttu-id="6b304-158">**Figura 2** particionamento Vertical - usando dados de referência tooquery consulta Elástico</span><span class="sxs-lookup"><span data-stu-id="6b304-158">**Figure 2** Vertical partitioning - Using elastic query tooquery reference data</span></span>

![Particionamento vertical - usando dados de referência tooquery consulta Elástico][3]

<span data-ttu-id="6b304-160">**Consultas entre bancos de dados**: as consultas elásticas habilitam casos de uso que exigem consultas em vários Bancos de Dados SQL.</span><span class="sxs-lookup"><span data-stu-id="6b304-160">**Cross-database querying**: Elastic queries enable use cases that require querying across several SQL databases.</span></span> <span data-ttu-id="6b304-161">A Figura 3 mostra quatro bancos de dados diferentes: CRM, Inventário, RH e Produtos.</span><span class="sxs-lookup"><span data-stu-id="6b304-161">Figure 3 shows four different databases: CRM, Inventory, HR and Products.</span></span> <span data-ttu-id="6b304-162">Consultas executadas em um banco de dados de saudação também precisam acessar tooone ou Olá a todos os outros bancos de dados.</span><span class="sxs-lookup"><span data-stu-id="6b304-162">Queries performed in one of hello databases also need access tooone or all hello other databases.</span></span> <span data-ttu-id="6b304-163">Usando uma consulta elástica, você pode configurar seu banco de dados para esse caso, executando algumas instruções DDL simples em cada um dos quatro bancos de dados de saudação.</span><span class="sxs-lookup"><span data-stu-id="6b304-163">Using an elastic query, you can configure your database for this case by running a few simple DDL statements on each of hello four databases.</span></span> <span data-ttu-id="6b304-164">Após essa configuração, a tabela remota de tooa de acesso é tão simple quanto referindo-se a tabela local tooa de suas consultas T-SQL ou de suas ferramentas de BI.</span><span class="sxs-lookup"><span data-stu-id="6b304-164">After this one-time configuration, access tooa remote table is as simple as referring tooa local table from your T-SQL queries or from your BI tools.</span></span> <span data-ttu-id="6b304-165">Essa abordagem é recomendada se consultas remotas Olá não retornam resultados grandes.</span><span class="sxs-lookup"><span data-stu-id="6b304-165">This approach is recommended if hello remote queries do not return large results.</span></span>

<span data-ttu-id="6b304-166">**Figura 3** particionamento Vertical - usando consulta Elástico tooquery entre vários bancos de dados</span><span class="sxs-lookup"><span data-stu-id="6b304-166">**Figure 3** Vertical partitioning - Using elastic query tooquery across various databases</span></span>

![Particionamento vertical - usando consulta Elástico tooquery entre vários bancos de dados][4]

<span data-ttu-id="6b304-168">etapas a seguir Hello configuram consultas de banco de dados Elástico para cenários de particionamentos verticais que requerem a tabela do access tooa localizado em bancos de dados SQL remotos com hello mesmo esquema:</span><span class="sxs-lookup"><span data-stu-id="6b304-168">hello following steps configure elastic database queries for vertical partitioning scenarios that require access tooa table located on remote SQL databases with hello same schema:</span></span>

* <span data-ttu-id="6b304-169">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span><span class="sxs-lookup"><span data-stu-id="6b304-169">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span></span>
* <span data-ttu-id="6b304-170">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span><span class="sxs-lookup"><span data-stu-id="6b304-170">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span></span>
* <span data-ttu-id="6b304-171">[CREATE/DROP EXTERNAL DATA SOURCE](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource do tipo **RDBMS**</span><span class="sxs-lookup"><span data-stu-id="6b304-171">[CREATE/DROP EXTERNAL DATA SOURCE](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource of type **RDBMS**</span></span>
* <span data-ttu-id="6b304-172">[CREATE/DROP EXTERNAL TABLE](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span><span class="sxs-lookup"><span data-stu-id="6b304-172">[CREATE/DROP EXTERNAL TABLE](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span></span>

<span data-ttu-id="6b304-173">Após a execução de instruções de DDL Olá, você pode acessar a tabela de remota hello "mytable" como se fosse uma tabela local.</span><span class="sxs-lookup"><span data-stu-id="6b304-173">After running hello DDL statements, you can access hello remote table “mytable” as though it were a local table.</span></span> <span data-ttu-id="6b304-174">Banco de dados SQL do Azure automaticamente abre a conexão toohello banco de dados remoto, processa sua solicitação no banco de dados remoto hello e retorna resultados de saudação.</span><span class="sxs-lookup"><span data-stu-id="6b304-174">Azure SQL Database automatically opens a connection toohello remote database, processes your request on hello remote database, and returns hello results.</span></span>

## <a name="horizontal-partitioning---sharding"></a><span data-ttu-id="6b304-175">Particionamento horizontal - fragmentação</span><span class="sxs-lookup"><span data-stu-id="6b304-175">Horizontal partitioning - sharding</span></span>
<span data-ttu-id="6b304-176">Usando a consulta Elástico tooperform relatórios de tarefas fragmentado, ou seja, horizontalmente particionadas, camada de dados requer um [mapa de fragmentos de banco de dados Elástico](sql-database-elastic-scale-shard-map-management.md) toorepresent Olá bancos de dados da camada de dados de saudação.</span><span class="sxs-lookup"><span data-stu-id="6b304-176">Using elastic query tooperform reporting tasks over a sharded, i.e., horizontally partitioned, data tier requires an [elastic database shard map](sql-database-elastic-scale-shard-map-management.md) toorepresent hello databases of hello data tier .</span></span> <span data-ttu-id="6b304-177">Normalmente, somente um mapa do fragmento único é usado neste cenário e um banco de dados dedicado com recursos de consulta Elástico (nó principal) serve como ponto de entrada hello para consultas de relatórios.</span><span class="sxs-lookup"><span data-stu-id="6b304-177">Typically, only a single shard map is used in this scenario and a dedicated database with elastic query capabilities (head node) serves as hello entry point for reporting queries.</span></span> <span data-ttu-id="6b304-178">Somente esse banco de dados dedicado precisa de mapa do fragmento toohello acesso.</span><span class="sxs-lookup"><span data-stu-id="6b304-178">Only this dedicated database needs access toohello shard map.</span></span> <span data-ttu-id="6b304-179">A Figura 4 ilustra essa topologia e sua configuração com o mapa de fragmentos e de banco de dados de consulta Elástico hello.</span><span class="sxs-lookup"><span data-stu-id="6b304-179">Figure 4 illustrates this topology and its configuration with hello elastic query database and shard map.</span></span> <span data-ttu-id="6b304-180">bancos de dados de saudação na camada de dados Olá podem ser de qualquer banco de dados SQL versão ou edição.</span><span class="sxs-lookup"><span data-stu-id="6b304-180">hello databases in hello data tier can be of any Azure SQL Database version or edition.</span></span> <span data-ttu-id="6b304-181">Para obter mais informações sobre a biblioteca de cliente do banco de dados Elástico hello e criar mapas de fragmento, consulte [gerenciamento de mapa do fragmento](sql-database-elastic-scale-shard-map-management.md).</span><span class="sxs-lookup"><span data-stu-id="6b304-181">For more information about hello elastic database client library and creating shard maps, see [Shard map management](sql-database-elastic-scale-shard-map-management.md).</span></span>

<span data-ttu-id="6b304-182">**Figura 4** Particionamento horizontal - Usando a consulta elástica para relatórios de camadas de dados fragmentados</span><span class="sxs-lookup"><span data-stu-id="6b304-182">**Figure 4** Horizontal partitioning - Using elastic query for reporting over sharded data tiers</span></span>

![Particionamento horizontal - Usando a consulta elástica para relatórios de camadas de dados fragmentados][5]

> [!NOTE]
> <span data-ttu-id="6b304-184">Consulta de banco de dados Elástico (nó principal) pode ser separado do banco de dados, ou pode ser Olá mesmo esse mapa de fragmentos de saudação de hosts de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="6b304-184">Elastic Query Database (head node) can be separate database, or it can be hello same database that hosts hello shard map.</span></span> <span data-ttu-id="6b304-185">Qualquer configuração que você escolher, verifique se essa camada de serviço e o desempenho do banco de dados é a quantidade de saudação esperada de toohandle alta o suficiente de solicitações de logon/consulta.</span><span class="sxs-lookup"><span data-stu-id="6b304-185">Whatever configuration you choose, make sure that service and performance tier of that database is high enough toohandle hello expected  amount of login/query requests.</span></span>

<span data-ttu-id="6b304-186">Olá etapas a seguir configuram consultas de banco de dados Elástico para horizontais cenários particionamentos que requerem acesso tooa conjunto da tabela que estão localizados em (normalmente) vários remotos bancos de dados SQL:</span><span class="sxs-lookup"><span data-stu-id="6b304-186">hello following steps configure elastic database queries for horizontal partitioning scenarios that require access tooa set of table that are located on (typically) several remote SQL databases:</span></span>

* <span data-ttu-id="6b304-187">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span><span class="sxs-lookup"><span data-stu-id="6b304-187">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span></span>
* <span data-ttu-id="6b304-188">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span><span class="sxs-lookup"><span data-stu-id="6b304-188">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span></span>
* <span data-ttu-id="6b304-189">Criar um [mapa do fragmento](sql-database-elastic-scale-shard-map-management.md) que representa sua camada de dados usando a biblioteca de cliente do banco de dados Elástico hello.</span><span class="sxs-lookup"><span data-stu-id="6b304-189">Create a [shard map](sql-database-elastic-scale-shard-map-management.md) representing your data tier using hello elastic database client library.</span></span>   
* <span data-ttu-id="6b304-190">[CREATE/DROP EXTERNAL DATA SOURCE](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource do tipo **SHARD_MAP_MANAGER**</span><span class="sxs-lookup"><span data-stu-id="6b304-190">[CREATE/DROP EXTERNAL DATA SOURCE](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource of type **SHARD_MAP_MANAGER**</span></span>
* <span data-ttu-id="6b304-191">[CREATE/DROP EXTERNAL TABLE](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span><span class="sxs-lookup"><span data-stu-id="6b304-191">[CREATE/DROP EXTERNAL TABLE](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span></span>

<span data-ttu-id="6b304-192">Depois de executar essas etapas, você pode acessar a tabela particionada horizontalmente de hello "mytable" como se fosse uma tabela local.</span><span class="sxs-lookup"><span data-stu-id="6b304-192">Once you have performed these steps, you can access hello horizontally partitioned table “mytable” as though it were a local table.</span></span> <span data-ttu-id="6b304-193">Banco de dados SQL do Azure automaticamente abre várias conexões paralela toohello bancos de dados remotos em que tabelas Olá são armazenadas fisicamente, processa as solicitações de saudação em bancos de dados remotos hello e retorna resultados de saudação.</span><span class="sxs-lookup"><span data-stu-id="6b304-193">Azure SQL Database automatically opens multiple parallel connections toohello remote databases where hello tables are physically stored, processes hello requests on hello remote databases, and returns hello results.</span></span>
<span data-ttu-id="6b304-194">Obter mais informações sobre Olá etapas necessárias para o cenário de particionamento horizontal Olá pode ser encontrado em [consulta elástica para particionamento horizontal](sql-database-elastic-query-horizontal-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="6b304-194">More information on hello steps required for hello horizontal partitioning scenario can be found in [elastic query for horizontal partitioning](sql-database-elastic-query-horizontal-partitioning.md).</span></span>

<span data-ttu-id="6b304-195">toobegin de codificação, consulte [Introdução à consulta elástica para particionamento horizontal (fragmentação)](sql-database-elastic-query-getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="6b304-195">toobegin coding, see [Getting started with elastic query for horizontal partitioning (sharding)](sql-database-elastic-query-getting-started.md).</span></span>

## <a name="t-sql-querying"></a><span data-ttu-id="6b304-196">Consultas T-SQL</span><span class="sxs-lookup"><span data-stu-id="6b304-196">T-SQL querying</span></span>
<span data-ttu-id="6b304-197">Depois que você tiver definido suas fontes de dados externas e tabelas externas, você pode usar regulares do SQL Server conexão cadeias de caracteres tooconnect toohello bancos de dados em que você definiu as tabelas externas.</span><span class="sxs-lookup"><span data-stu-id="6b304-197">Once you have defined your external data sources and your external tables, you can use regular SQL Server connection strings tooconnect toohello databases where you defined your external tables.</span></span> <span data-ttu-id="6b304-198">Você pode executar instruções T-SQL em tabelas externas em que a conexão com limitações Olá descritas abaixo.</span><span class="sxs-lookup"><span data-stu-id="6b304-198">You can then run T-SQL statements over your external tables on that connection with hello limitations outlined below.</span></span> <span data-ttu-id="6b304-199">Você pode encontrar mais informações e exemplos de consultas T-SQL nos tópicos da documentação de saudação para [particionamento horizontal](sql-database-elastic-query-horizontal-partitioning.md) e [particionamento vertical](sql-database-elastic-query-vertical-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="6b304-199">You can find more information and examples of T-SQL queries in hello documentation topics for [horizontal partitioning](sql-database-elastic-query-horizontal-partitioning.md) and [vertical partitioning](sql-database-elastic-query-vertical-partitioning.md).</span></span>

## <a name="connectivity-for-tools"></a><span data-ttu-id="6b304-200">Conectividade de ferramentas</span><span class="sxs-lookup"><span data-stu-id="6b304-200">Connectivity for tools</span></span>
<span data-ttu-id="6b304-201">Você pode usar tooconnect regular de cadeias de caracteres de conexão do SQL Server, seus aplicativos e dados ou BI toodatabases ferramentas integração que têm tabelas externas.</span><span class="sxs-lookup"><span data-stu-id="6b304-201">You can use regular SQL Server connection strings tooconnect your applications and BI or data integration tools toodatabases that have external tables.</span></span> <span data-ttu-id="6b304-202">Certifique-se de que o SQL Server tem suporte como uma fonte de dados para a ferramenta.</span><span class="sxs-lookup"><span data-stu-id="6b304-202">Make sure that SQL Server is supported as a data source for your tool.</span></span> <span data-ttu-id="6b304-203">Uma vez conectado, consulte toohello consulta Elástico banco de dados e hello tabelas externas no banco de dados exatamente como você faria com qualquer outro banco de dados do SQL Server que você se conecte toowith sua ferramenta.</span><span class="sxs-lookup"><span data-stu-id="6b304-203">Once connected, refer toohello elastic query database and hello external tables in that database just like you would do with any other SQL Server database that you connect toowith your tool.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="6b304-204">Atualmente não há suporte para a autenticação usando o Azure Active Directory com consultas elásticas.</span><span class="sxs-lookup"><span data-stu-id="6b304-204">Authentication using Azure Active Directory with elastic queries is not currently supported.</span></span>
> 
> 

## <a name="cost"></a><span data-ttu-id="6b304-205">Custo</span><span class="sxs-lookup"><span data-stu-id="6b304-205">Cost</span></span>
<span data-ttu-id="6b304-206">Consulta elástica está incluída no custo de saudação de bancos de dados do SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="6b304-206">Elastic query is included into hello cost of Azure SQL Database databases.</span></span> <span data-ttu-id="6b304-207">Observe que há suporte para topologias onde seus bancos de dados remotos estão em um data center diferente de Olá ponto de extremidade de consulta Elástico, mas saída de dados de bancos de dados remotos são cobrados regular [taxas do Azure](https://azure.microsoft.com/pricing/details/data-transfers/).</span><span class="sxs-lookup"><span data-stu-id="6b304-207">Note that topologies where your remote databases are in a different data center than hello elastic query endpoint are supported, but data egress from remote databases are charged regular [Azure rates](https://azure.microsoft.com/pricing/details/data-transfers/).</span></span>

## <a name="preview-limitations"></a><span data-ttu-id="6b304-208">Limitações de visualização</span><span class="sxs-lookup"><span data-stu-id="6b304-208">Preview limitations</span></span>
* <span data-ttu-id="6b304-209">Executando a primeira consulta elástica pode demorar até tooa alguns minutos na camada de desempenho padrão hello.</span><span class="sxs-lookup"><span data-stu-id="6b304-209">Running your first elastic query can take up tooa few minutes on hello Standard performance tier.</span></span> <span data-ttu-id="6b304-210">Esse tempo é funcionalidade de consulta Elástico de saudação tooload necessário; melhora o desempenho do carregamento com níveis mais altos de desempenho.</span><span class="sxs-lookup"><span data-stu-id="6b304-210">This time is necessary tooload hello elastic query functionality; loading performance improves with higher performance tiers.</span></span>
* <span data-ttu-id="6b304-211">Ainda não há suporte para scripts de fontes de dados externas ou de tabelas externas do SSMS ou SSDT.</span><span class="sxs-lookup"><span data-stu-id="6b304-211">Scripting of external data sources or external tables from SSMS or SSDT is not yet supported.</span></span>
* <span data-ttu-id="6b304-212">A Importação/Exportação do Banco de Dados SQL ainda não dá suporte a tabelas externas e fontes de dados externas.</span><span class="sxs-lookup"><span data-stu-id="6b304-212">Import/Export for SQL DB does not yet support external data sources and external tables.</span></span> <span data-ttu-id="6b304-213">Se você precisar toouse importação/exportação, remover esses objetos antes de exportar e, em seguida, recriá-los após a importação.</span><span class="sxs-lookup"><span data-stu-id="6b304-213">If you need toouse Import/Export, drop these objects before exporting and then re-create them after importing.</span></span>
* <span data-ttu-id="6b304-214">Elástica consulta atualmente suporta apenas tabelas de tooexternal acesso somente leitura.</span><span class="sxs-lookup"><span data-stu-id="6b304-214">Elastic query currently only supports read-only access tooexternal tables.</span></span> <span data-ttu-id="6b304-215">No entanto, você pode usar a funcionalidade completa do T-SQL no banco de dados de saudação onde a tabela externa Olá é definida.</span><span class="sxs-lookup"><span data-stu-id="6b304-215">You can, however, use full T-SQL functionality on hello database where hello external table is defined.</span></span> <span data-ttu-id="6b304-216">Isso pode ser útil para, por exemplo, manter os resultados temporários usando, por exemplo, selecione < column_list > em < local_table > ou toodefine procedimentos armazenados no banco de dados de consulta Elástico de saudação que se referem a tabelas tooexternal.</span><span class="sxs-lookup"><span data-stu-id="6b304-216">This can be useful to, e.g., persist temporary results using, e.g., SELECT <column_list> INTO <local_table>, or toodefine stored procedures on hello elastic query database which refer tooexternal tables.</span></span>
* <span data-ttu-id="6b304-217">Exceto nvarchar(max), não há suporte para tipos LOB em definições de tabela externa.</span><span class="sxs-lookup"><span data-stu-id="6b304-217">Except for nvarchar(max), LOB types are not supported in external table definitions.</span></span> <span data-ttu-id="6b304-218">Como alternativa, você pode criar um modo de exibição no banco de dados remoto do hello que converte o tipo LOB Olá em nvarchar (max), definir sua tabela externa Olá exibição em vez de tabela base hello e convertido no tipo original de LOB Olá em suas consultas.</span><span class="sxs-lookup"><span data-stu-id="6b304-218">As a workaround, you can create a view on hello remote database that casts hello LOB type into nvarchar(max), define your external table over hello view instead of hello base table and then cast it back into hello original LOB type in your queries.</span></span>
* <span data-ttu-id="6b304-219">Atualmente, não há suporte para estatísticas de coluna em tabelas externas.</span><span class="sxs-lookup"><span data-stu-id="6b304-219">Column statistics over external tables are currently not supported.</span></span> <span data-ttu-id="6b304-220">Estatísticas de tabelas têm suporte, mas precisam toobe criado manualmente.</span><span class="sxs-lookup"><span data-stu-id="6b304-220">Tables statistics are supported, but need toobe created manually.</span></span>

## <a name="feedback"></a><span data-ttu-id="6b304-221">Comentários</span><span class="sxs-lookup"><span data-stu-id="6b304-221">Feedback</span></span>
<span data-ttu-id="6b304-222">Compartilhe os comentários sobre sua experiência com consultas Elásticos em Disqus abaixo, fóruns do MSDN hello, ou em Stackoverflow.</span><span class="sxs-lookup"><span data-stu-id="6b304-222">Please share feedback on your experience with elastic queries with us on Disqus below, hello MSDN forums, or on Stackoverflow.</span></span> <span data-ttu-id="6b304-223">Estamos interessados em todos os tipos de comentários sobre o serviço de saudação (defeitos, bordas irregulares, intervalos de recurso).</span><span class="sxs-lookup"><span data-stu-id="6b304-223">We are interested in all kinds of feedback about hello service (defects, rough edges, feature gaps).</span></span>

## <a name="next-steps"></a><span data-ttu-id="6b304-224">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="6b304-224">Next steps</span></span>

* <span data-ttu-id="6b304-225">Para obter um tutorial sobre particionamento vertical, consulte [Introdução à consulta entre bancos de dados (particionamento vertical)](sql-database-elastic-query-getting-started-vertical.md).</span><span class="sxs-lookup"><span data-stu-id="6b304-225">For a vertical partitioning tutorial, see [Getting started with cross-database query (vertical partitioning)](sql-database-elastic-query-getting-started-vertical.md).</span></span>
* <span data-ttu-id="6b304-226">Para sintaxe e amostras de consultas para dados particionados verticalmente, consulte [Consultando dados particionados verticalmente)](sql-database-elastic-query-vertical-partitioning.md)</span><span class="sxs-lookup"><span data-stu-id="6b304-226">For syntax and sample queries for vertically partitioned data, see [Querying vertically partitioned data)](sql-database-elastic-query-vertical-partitioning.md)</span></span>
* <span data-ttu-id="6b304-227">Para um tutorial sobre particionamento horizontal (fragmentação), consulte [Introdução à consulta elástica para particionamento horizontal (fragmentação)](sql-database-elastic-query-getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="6b304-227">For a horizontal partitioning (sharding) tutorial, see [Getting started with elastic query for horizontal partitioning (sharding)](sql-database-elastic-query-getting-started.md).</span></span>
* <span data-ttu-id="6b304-228">Para sintaxe e amostras de consultas para dados particionados horizontalmente, consulte [Consultando dados particionados horizontalmente)](sql-database-elastic-query-horizontal-partitioning.md)</span><span class="sxs-lookup"><span data-stu-id="6b304-228">For syntax and sample queries for horizontally partitioned data, see [Querying horizontally partitioned data)](sql-database-elastic-query-horizontal-partitioning.md)</span></span>
* <span data-ttu-id="6b304-229">Consulte [sp\_execute \_remote](https://msdn.microsoft.com/library/mt703714) para um procedimento armazenado que executa uma instrução Transact-SQL em um único Banco de Dados SQL do Azure remoto ou um conjunto de bancos de dados que serve como fragmentos em um esquema de particionamento horizontal.</span><span class="sxs-lookup"><span data-stu-id="6b304-229">See [sp\_execute \_remote](https://msdn.microsoft.com/library/mt703714) for a stored procedure that executes a Transact-SQL statement on a single remote Azure SQL Database or set of databases serving as shards in a horizontal partitioning scheme.</span></span>

<!--Image references-->
[1]: ./media/sql-database-elastic-query-overview/overview.png
[2]: ./media/sql-database-elastic-query-overview/topology1.png
[3]: ./media/sql-database-elastic-query-overview/vertpartrrefdata.png
[4]: ./media/sql-database-elastic-query-overview/verticalpartitioning.png
[5]: ./media/sql-database-elastic-query-overview/horizontalpartitioning.png

<!--anchors-->
