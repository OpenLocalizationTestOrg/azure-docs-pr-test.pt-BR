---
title: "aaaRestore um banco de dados do SQL Azure em um aplicativo multilocatário | Microsoft Docs"
description: "Saiba como toorestore um único locatários SQL banco de dados após a exclusão acidental de dados"
keywords: tutorial do banco de dados SQL
services: sql-database
documentationcenter: 
author: stevestein
manager: jhubbard
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: scale out apps
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/10/2017
ms.author: billgib;sstein
ms.openlocfilehash: 8507ecec2424c135f1859b88ebf2bb4e17538a58
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="restore-a-wingtip-saas-tenants-sql-database"></a><span data-ttu-id="010c8-104">Restaurar um banco de dados SQL de locatários de Wingtip SaaS</span><span class="sxs-lookup"><span data-stu-id="010c8-104">Restore a Wingtip SaaS tenants SQL database</span></span>

<span data-ttu-id="010c8-105">aplicativo de SaaS Wingtip Olá é criado usando um modelo de banco de dados por locatário, onde cada locatário tem seu próprio banco de dados.</span><span class="sxs-lookup"><span data-stu-id="010c8-105">hello Wingtip SaaS app is built using a database-per-tenant model, where each tenant has their own database.</span></span> <span data-ttu-id="010c8-106">Um dos benefícios de saudação desse modelo é que ele é fácil toorestore dados de um único locatário em isolamento sem afetar outros locatários.</span><span class="sxs-lookup"><span data-stu-id="010c8-106">One of hello benefits of this model is that it is easy toorestore a single tenant’s data in isolation without impacting other tenants.</span></span>

<span data-ttu-id="010c8-107">Neste tutorial, você aprenderá dois padrões de recuperação de dados:</span><span class="sxs-lookup"><span data-stu-id="010c8-107">In this tutorial you learn two data recovery patterns:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="010c8-108">Restaurar um banco de dados em um banco de dados paralelo (lado a lado)</span><span class="sxs-lookup"><span data-stu-id="010c8-108">Restore a database into a parallel database (side-by-side)</span></span>
> * <span data-ttu-id="010c8-109">Restaurar um banco de dados no local</span><span class="sxs-lookup"><span data-stu-id="010c8-109">Restore a database in place</span></span>


|||
|:--|:--|
| <span data-ttu-id="010c8-110">**Restaurar locatário tooa anterior ponto no tempo, em um banco de dados paralelo**</span><span class="sxs-lookup"><span data-stu-id="010c8-110">**Restore tenant tooa prior point in time, into a parallel database**</span></span> | <span data-ttu-id="010c8-111">Esse padrão pode ser usado por locatário Olá para revisão, auditoria, conformidade, o banco de dados original etc. Olá permaneça online e inalterados.</span><span class="sxs-lookup"><span data-stu-id="010c8-111">This pattern can be used by hello tenant for review, auditing, compliance, etc. hello original database remains online and unchanged.</span></span> |
| <span data-ttu-id="010c8-112">**Restaurar locatário no local**</span><span class="sxs-lookup"><span data-stu-id="010c8-112">**Restore tenant in-place**</span></span> | <span data-ttu-id="010c8-113">Esse padrão é geralmente usado toorecover um ponto anterior do locatário tooa no tempo, depois que um locatário exclui acidentalmente os dados.</span><span class="sxs-lookup"><span data-stu-id="010c8-113">This pattern is typically used toorecover a tenant tooa prior point in time, after a tenant accidentally deletes data.</span></span> <span data-ttu-id="010c8-114">banco de dados original Olá é colocado offline e substituído pelo banco de dados restaurado hello.</span><span class="sxs-lookup"><span data-stu-id="010c8-114">hello original database is taken offline, and replaced with hello restored database.</span></span> |
|||

<span data-ttu-id="010c8-115">toocomplete neste tutorial, verifique Olá se os pré-requisitos a seguir são concluídas:</span><span class="sxs-lookup"><span data-stu-id="010c8-115">toocomplete this tutorial, make sure hello following prerequisites are completed:</span></span>

* <span data-ttu-id="010c8-116">Olá Wingtip SaaS aplicativo é implantado.</span><span class="sxs-lookup"><span data-stu-id="010c8-116">hello Wingtip SaaS app is deployed.</span></span> <span data-ttu-id="010c8-117">toodeploy em menos de cinco minutos, consulte [implantar e explorar o aplicativo de SaaS Wingtip hello](sql-database-saas-tutorial.md)</span><span class="sxs-lookup"><span data-stu-id="010c8-117">toodeploy in less than five minutes, see [Deploy and explore hello Wingtip SaaS application](sql-database-saas-tutorial.md)</span></span>
* <span data-ttu-id="010c8-118">O Azure PowerShell está instalado.</span><span class="sxs-lookup"><span data-stu-id="010c8-118">Azure PowerShell is installed.</span></span> <span data-ttu-id="010c8-119">Para obter detalhes, consulte [Introdução ao Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span><span class="sxs-lookup"><span data-stu-id="010c8-119">For details, see [Getting started with Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span></span>

## <a name="introduction-toohello-saas-tenant-restore-pattern"></a><span data-ttu-id="010c8-120">Padrão de restauração Introdução toohello SaaS locatário</span><span class="sxs-lookup"><span data-stu-id="010c8-120">Introduction toohello SaaS tenant restore pattern</span></span>

<span data-ttu-id="010c8-121">Por locatário Olá restaurar padrão, há dois padrões de simples para restaurar dados de um locatário individual.</span><span class="sxs-lookup"><span data-stu-id="010c8-121">For hello tenant restore pattern, there are two simple patterns for restoring an individual tenant's data.</span></span> <span data-ttu-id="010c8-122">Como os bancos de dados de locatário são isolados uns dos outros, restaurar um locatário não afeta os dados de outro locatário.</span><span class="sxs-lookup"><span data-stu-id="010c8-122">Because tenant databases are isolated from each other, restoring one tenant has no impact on any other tenant's data.</span></span>

<span data-ttu-id="010c8-123">No padrão da primeira hello, os dados são restaurados em um novo banco de dados.</span><span class="sxs-lookup"><span data-stu-id="010c8-123">In hello first pattern, data is restored into a new database.</span></span> <span data-ttu-id="010c8-124">locatário Olá recebe banco de dados do access toothis juntamente com os dados de produção.</span><span class="sxs-lookup"><span data-stu-id="010c8-124">hello tenant is then given access toothis database alongside their production data.</span></span> <span data-ttu-id="010c8-125">Esse padrão permite que um locatário dados do administrador tooreview Olá restaurado e usá-lo tooselectively substituir valores de dados atual.</span><span class="sxs-lookup"><span data-stu-id="010c8-125">This pattern allows a tenant admin tooreview hello restored data and potentially use it tooselectively overwrite current data values.</span></span> <span data-ttu-id="010c8-126">É o toohello SaaS aplicativo designer toodetermine como sofisticado hello opções devem ser a recuperação de dados.</span><span class="sxs-lookup"><span data-stu-id="010c8-126">It's up toohello SaaS app designer toodetermine just how sophisticated hello data recovery options should be.</span></span> <span data-ttu-id="010c8-127">Simplesmente tooreview capaz de dados em estado de saudação que se encontrava em um determinado ponto no tempo pode ser tudo o que é necessário em alguns cenários.</span><span class="sxs-lookup"><span data-stu-id="010c8-127">Simply being able tooreview data in hello state it was in at a given point in time may be all that is required in some scenarios.</span></span> <span data-ttu-id="010c8-128">Se o banco de dados de saudação usa [replicação geográfica](sql-database-geo-replication-overview.md), é recomendável copiar dados necessários de saudação da cópia Olá restaurado no banco de dados original hello.</span><span class="sxs-lookup"><span data-stu-id="010c8-128">If hello database uses [geo-replication](sql-database-geo-replication-overview.md), we recommend copying hello required data from hello restored copy into hello original database.</span></span> <span data-ttu-id="010c8-129">Se você substituir o banco de dados original Olá com banco de dados de saudação restaurado, você precisa tooreconfigure e ressincronizar a replicação geográfica.</span><span class="sxs-lookup"><span data-stu-id="010c8-129">If you replace hello original database with hello restored database, you need tooreconfigure and resynchronize geo-replication.</span></span>

<span data-ttu-id="010c8-130">No padrão de segundo hello, que assume locatário Olá sofreu uma perda ou corrupção de dados, banco de dados de produção de hello locatário é restaurado tooa o ponto anterior no tempo.</span><span class="sxs-lookup"><span data-stu-id="010c8-130">In hello second pattern, which assumes that hello tenant has suffered a loss or corruption of data, hello tenant’s production database is restored tooa prior point in time.</span></span> <span data-ttu-id="010c8-131">Olá restauração no local padrão, locatário Olá é colocado offline por um curto período enquanto o banco de dados de saudação é restaurado e colocado online novamente.</span><span class="sxs-lookup"><span data-stu-id="010c8-131">In hello restore in place pattern, hello tenant is taken offline for a brief time while hello database is restored and brought back online.</span></span> <span data-ttu-id="010c8-132">Olá banco de dados original é excluído, mas ainda podem ser restaurado se você precisar tooan back toogo anterior mesmo ponto no tempo.</span><span class="sxs-lookup"><span data-stu-id="010c8-132">hello original database is deleted, but can still be restored from if you need toogo back tooan even earlier point in time.</span></span> <span data-ttu-id="010c8-133">Uma variação desse padrão foi possível renomear o banco de dados de saudação em vez de excluí-lo, embora o banco de dados renomeando Olá oferece vantagens adicionais em termos de segurança de dados.</span><span class="sxs-lookup"><span data-stu-id="010c8-133">A variation of this pattern could rename hello database instead of deleting it, although renaming hello database offers no additional advantage in terms of data security.</span></span>

## <a name="get-hello-wingtip-application-scripts"></a><span data-ttu-id="010c8-134">Obter scripts de aplicativo hello Wingtip</span><span class="sxs-lookup"><span data-stu-id="010c8-134">Get hello Wingtip application scripts</span></span>

<span data-ttu-id="010c8-135">Hello Wingtip SaaS scripts e código fonte do aplicativo estão disponíveis no hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) repositório github.</span><span class="sxs-lookup"><span data-stu-id="010c8-135">hello Wingtip SaaS scripts and application source code are available in hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) github repo.</span></span> <span data-ttu-id="010c8-136">[As etapas de scripts de SaaS Wingtip Olá toodownload](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span><span class="sxs-lookup"><span data-stu-id="010c8-136">[Steps toodownload hello Wingtip SaaS scripts](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span></span>

## <a name="simulate-a-tenant-accidentally-deleting-data"></a><span data-ttu-id="010c8-137">Simular um locatário excluindo acidentalmente os dados</span><span class="sxs-lookup"><span data-stu-id="010c8-137">Simulate a tenant accidentally deleting data</span></span>

<span data-ttu-id="010c8-138">toodemonstrate esses cenários de recuperação, é preciso muito*acidentalmente* excluir alguns dados em um dos bancos de dados de locatário hello.</span><span class="sxs-lookup"><span data-stu-id="010c8-138">toodemonstrate these recovery scenarios, we need too*accidentally* delete some data in one of hello tenant databases.</span></span> <span data-ttu-id="010c8-139">Enquanto você pode excluir qualquer registro, Olá próxima etapa configura Olá demonstração toonot é bloqueada por violações de integridade referencial!</span><span class="sxs-lookup"><span data-stu-id="010c8-139">While you can delete any record, hello next step sets up hello demo toonot get blocked by referential integrity violations!</span></span> <span data-ttu-id="010c8-140">Ele também adiciona alguns dados de tíquete de compra você pode usar mais tarde no hello *tutoriais de análise de SaaS Wingtip*.</span><span class="sxs-lookup"><span data-stu-id="010c8-140">It also adds some ticket purchase data you can use later in hello *Wingtip SaaS Analytics tutorials*.</span></span>

<span data-ttu-id="010c8-141">Executar script do gerador de tíquete hello e criar dados adicionais.</span><span class="sxs-lookup"><span data-stu-id="010c8-141">Run hello ticket generator script and create additional data.</span></span> <span data-ttu-id="010c8-142">Gerador de tíquete Olá intencionalmente não comprar ingressos para cada evento última locatários.</span><span class="sxs-lookup"><span data-stu-id="010c8-142">hello ticket generator intentionally does not purchase tickets for each tenants last event.</span></span>

1. <span data-ttu-id="010c8-143">Abrir... \\Módulos de aprendizado\\utilitários\\*demonstração TicketGenerator.ps1* em Olá *PowerShell ISE*</span><span class="sxs-lookup"><span data-stu-id="010c8-143">Open ...\\Learning Modules\\Utilities\\*Demo-TicketGenerator.ps1* in hello *PowerShell ISE*</span></span>
1. <span data-ttu-id="010c8-144">Pressione **F5** toorun Olá script e gerar clientes e dados de vendas de tíquete.</span><span class="sxs-lookup"><span data-stu-id="010c8-144">Press **F5** toorun hello script and generate customers and ticket sales data.</span></span>


### <a name="open-hello-events-app-tooreview-hello-current-events"></a><span data-ttu-id="010c8-145">Abra os eventos da atuais de Olá Olá eventos aplicativo tooreview</span><span class="sxs-lookup"><span data-stu-id="010c8-145">Open hello Events app tooreview hello current events</span></span>

1. <span data-ttu-id="010c8-146">Olá abrir *Hub de eventos* (http://events.wtp.&lt; usuário&gt;. trafficmanager.net) e clique em **Contoso conjunto Hall**:</span><span class="sxs-lookup"><span data-stu-id="010c8-146">Open hello *Events Hub* (http://events.wtp.&lt;user&gt;.trafficmanager.net) and click **Contoso Concert Hall**:</span></span>

   ![hub de eventos](media/sql-database-saas-tutorial-restore-single-tenant/events-hub.png)

1. <span data-ttu-id="010c8-148">Role a lista de saudação de eventos e tome nota do último evento de saudação na lista de saudação:</span><span class="sxs-lookup"><span data-stu-id="010c8-148">Scroll hello list of events and make a note of hello last event in hello list:</span></span>

   ![último evento](media/sql-database-saas-tutorial-restore-single-tenant/last-event.png)


### <a name="run-hello-demo-scenario-tooaccidentally-delete-hello-last-event"></a><span data-ttu-id="010c8-150">Executar Olá demonstração cenário tooaccidentally Olá último evento delete</span><span class="sxs-lookup"><span data-stu-id="010c8-150">Run hello demo scenario tooaccidentally delete hello last event</span></span>

1. <span data-ttu-id="010c8-151">Abrir... \\Módulos de aprendizado\\continuidade dos negócios e recuperação de desastres\\RestoreTenant\\*demonstração RestoreTenant.ps1* em Olá *PowerShell ISE*, e o conjunto Olá seguinte valor:</span><span class="sxs-lookup"><span data-stu-id="010c8-151">Open ...\\Learning Modules\\Business Continuity and Disaster Recovery\\RestoreTenant\\*Demo-RestoreTenant.ps1* in hello *PowerShell ISE*, and set hello following value:</span></span>
   * <span data-ttu-id="010c8-152">**$DemoScenario** = **1**, defina muito**1** -excluir eventos sem vendas de tíquete.</span><span class="sxs-lookup"><span data-stu-id="010c8-152">**$DemoScenario** = **1**, Set too**1** - Delete events with no ticket sales.</span></span>
1. <span data-ttu-id="010c8-153">Pressione **F5** toorun Olá script e excluir o último evento de saudação.</span><span class="sxs-lookup"><span data-stu-id="010c8-153">Press **F5** toorun hello script and delete hello last event.</span></span> <span data-ttu-id="010c8-154">Você verá uma confirmação mensagem semelhante toohello a seguir:</span><span class="sxs-lookup"><span data-stu-id="010c8-154">You should see a confirmation message similar toohello following:</span></span>

   ```Console
   Deleting unsold events from Contoso Concert Hall ...
   Deleted event 'Seriously Strauss' from Contoso Concert Hall venue.
   ```

1. <span data-ttu-id="010c8-155">Olá Contoso eventos página é aberta.</span><span class="sxs-lookup"><span data-stu-id="010c8-155">hello Contoso events page opens.</span></span> <span data-ttu-id="010c8-156">Role para baixo e verifique se o evento Olá será excluído.</span><span class="sxs-lookup"><span data-stu-id="010c8-156">Scroll down and verify hello event is gone.</span></span> <span data-ttu-id="010c8-157">Se o evento Olá ainda está em lista Olá, clique em atualizar e verificar será excluída.</span><span class="sxs-lookup"><span data-stu-id="010c8-157">If hello event is still in hello list, click refresh and verify it is gone.</span></span>

   ![último evento](media/sql-database-saas-tutorial-restore-single-tenant/last-event-deleted.png)


## <a name="restore-a-tenant-database-in-parallel-with-hello-production-database"></a><span data-ttu-id="010c8-159">Restaurar um banco de dados de locatário em paralelo com o banco de dados de produção de hello</span><span class="sxs-lookup"><span data-stu-id="010c8-159">Restore a tenant database in parallel with hello production database</span></span>

<span data-ttu-id="010c8-160">Este exercício restaura o ponto de tooa Olá Contoso conjunto Hall banco de dados no tempo antes do evento Olá foi excluído.</span><span class="sxs-lookup"><span data-stu-id="010c8-160">This exercise restores hello Contoso Concert Hall database tooa point in time before hello event was deleted.</span></span> <span data-ttu-id="010c8-161">Após a exclusão evento Olá nas etapas anteriores hello, você deseja toorecover e ver dados Olá excluído.</span><span class="sxs-lookup"><span data-stu-id="010c8-161">After hello event is deleted in hello previous steps, you want toorecover and see hello deleted data.</span></span> <span data-ttu-id="010c8-162">Você não precisa toorestore seu banco de dados de produção com registro Olá excluído, mas você precisa toorecover Olá antigo banco de dados tooaccess Olá dados antigos por outros motivos comerciais.</span><span class="sxs-lookup"><span data-stu-id="010c8-162">You don't need toorestore your production database with hello deleted record, but you need toorecover hello old database tooaccess hello old data for other business reasons.</span></span>

 <span data-ttu-id="010c8-163">Olá *restauração TenantInParallel.ps1* script cria um locatário paralelo banco de dados e uma catálogo paralela entrada ambos os denominado *ContosoConcertHall\_antigo*.</span><span class="sxs-lookup"><span data-stu-id="010c8-163">hello *Restore-TenantInParallel.ps1* script creates a parallel tenant database, and a parallel catalog entry both named *ContosoConcertHall\_old*.</span></span> <span data-ttu-id="010c8-164">Esse padrão de restauração é mais adequado para a recuperação de uma perda de dados pequena ou para cenários de recuperação de conformidade e auditoria.</span><span class="sxs-lookup"><span data-stu-id="010c8-164">This pattern of restore is best suited for recovering from a minor data loss or for compliance and auditing recovery scenarios.</span></span> <span data-ttu-id="010c8-165">Também é Olá abordagem recomendada quando você estiver usando [georeplicação](sql-database-geo-replication-overview.md).</span><span class="sxs-lookup"><span data-stu-id="010c8-165">It is also hello recommended approach when you are using [geo-replication](sql-database-geo-replication-overview.md).</span></span>

1. <span data-ttu-id="010c8-166">Olá completa [simular um usuário excluir acidentalmente dados](#simulate-a-tenant-accidentally-deleting-data) seção.</span><span class="sxs-lookup"><span data-stu-id="010c8-166">Complete hello [simulate a user accidentally deleting data](#simulate-a-tenant-accidentally-deleting-data) section.</span></span>
1. <span data-ttu-id="010c8-167">Abrir... \\Módulos de aprendizado\\continuidade dos negócios e recuperação de desastres\\RestoreTenant\\_demonstração RestoreTenant.ps1_ em Olá *PowerShell ISE*.</span><span class="sxs-lookup"><span data-stu-id="010c8-167">Open ...\\Learning Modules\\Business Continuity and Disaster Recovery\\RestoreTenant\\_Demo-RestoreTenant.ps1_ in hello *PowerShell ISE*.</span></span>
1. <span data-ttu-id="010c8-168">Definir **$DemoScenario** = **2**, defina esta opção muito**2** muito*restauração locatário em paralelo*.</span><span class="sxs-lookup"><span data-stu-id="010c8-168">Set **$DemoScenario** = **2**, Set this too**2** too*Restore tenant in parallel*.</span></span>
1. <span data-ttu-id="010c8-169">Pressione **F5** toorun script de saudação.</span><span class="sxs-lookup"><span data-stu-id="010c8-169">Press **F5** toorun hello script.</span></span>

<span data-ttu-id="010c8-170">script Hello restaura Olá locatário database (banco de dados tooa paralela) tooa ponto no tempo antes da exclusão de eventos de saudação na seção anterior hello.</span><span class="sxs-lookup"><span data-stu-id="010c8-170">hello script restores hello tenant database (tooa parallel database) tooa point in time before you deleted hello event in hello previous section.</span></span> <span data-ttu-id="010c8-171">Ele cria um segundo banco de dados, remove os metadados de catálogo existentes que existe neste banco de dados e adiciona o catálogo de toohello do banco de dados de saudação em Olá *ContosoConcertHall\_antigo* entrada.</span><span class="sxs-lookup"><span data-stu-id="010c8-171">It creates a second database, removes any existing catalog metadata that exists in this database, and adds hello database toohello catalog under hello *ContosoConcertHall\_old* entry.</span></span>

<span data-ttu-id="010c8-172">script de demonstração de Olá abre a página de eventos de saudação em seu navegador.</span><span class="sxs-lookup"><span data-stu-id="010c8-172">hello demo script opens hello events page in your browser.</span></span> <span data-ttu-id="010c8-173">Observação de URL Olá: ```http://events.wtp.&lt;user&gt;.trafficmanager.net/contosoconcerthall_old``` que isso está mostrando os dados do banco de dados restaurado de saudação onde *old* é adicionado toohello nome.</span><span class="sxs-lookup"><span data-stu-id="010c8-173">Note from hello URL: ```http://events.wtp.&lt;user&gt;.trafficmanager.net/contosoconcerthall_old``` that this is showing data from hello restored database where *_old* is added toohello name.</span></span>

<span data-ttu-id="010c8-174">Rolagem Olá eventos listados no hello navegador tooconfirm Olá eventos excluídos na seção anterior Olá foi restaurado.</span><span class="sxs-lookup"><span data-stu-id="010c8-174">Scroll hello events listed in hello browser tooconfirm that hello event deleted in hello previous section has been restored.</span></span>

<span data-ttu-id="010c8-175">Observe expondo locatário Olá restaurado como um locatário adicional, com permissões de toobrowse seu próprio aplicativo eventos, é improvável que toobe como você deve fornecer que um locatário acessar toorestored dados, mas serve tooeasily ilustra padrão de restauração hello.</span><span class="sxs-lookup"><span data-stu-id="010c8-175">Note that exposing hello restored tenant as an additional tenant, with its own Events app toobrowse tickets, is unlikely toobe how you would provide a tenant access toorestored data, but serves tooeasily illustrate hello restore pattern.</span></span>

<span data-ttu-id="010c8-176">Na realidade, você provavelmente manteria esse banco de dados restaurado somente por um período definido.</span><span class="sxs-lookup"><span data-stu-id="010c8-176">In reality, you would probably only retain this restored database for a defined period.</span></span> <span data-ttu-id="010c8-177">Você pode excluir a entrada de locatário de saudação restaurada depois que você terminou por chamada hello *remover RestoredTenant.ps1* script.</span><span class="sxs-lookup"><span data-stu-id="010c8-177">You can delete hello restored tenant entry once you are finished by calling hello *Remove-RestoredTenant.ps1* script.</span></span>

1. <span data-ttu-id="010c8-178">Definir **$DemoScenario** muito**4** tooselect Olá *remover restaurado locatário* cenário.</span><span class="sxs-lookup"><span data-stu-id="010c8-178">Set **$DemoScenario** too**4** tooselect hello *remove restored tenant* scenario.</span></span>
1. <span data-ttu-id="010c8-179">**Execute** **usando** **F5**</span><span class="sxs-lookup"><span data-stu-id="010c8-179">**Execute** **using** **F5**</span></span>
1. <span data-ttu-id="010c8-180">Olá *ContosoConcertHall\_antigo* entrada agora é excluída do catálogo de saudação.</span><span class="sxs-lookup"><span data-stu-id="010c8-180">hello *ContosoConcertHall\_old* entry is now deleted from hello catalog.</span></span> <span data-ttu-id="010c8-181">Vá em frente e feche a página de eventos de saudação para este locatário em seu navegador.</span><span class="sxs-lookup"><span data-stu-id="010c8-181">Go ahead and close hello events page for this tenant in your browser.</span></span>


## <a name="restore-a-tenant-in-place-replacing-hello-existing-tenant-database"></a><span data-ttu-id="010c8-182">Restaurar um locatário em vigor, substituindo o banco de dados do locatário existente Olá</span><span class="sxs-lookup"><span data-stu-id="010c8-182">Restore a tenant in place, replacing hello existing tenant database</span></span>

<span data-ttu-id="010c8-183">Este exercício restaura um ponto de tooa Olá Contoso conjunto Hall locatário tempo antes do evento Olá foi excluído.</span><span class="sxs-lookup"><span data-stu-id="010c8-183">This exercise restores hello Contoso Concert Hall tenant tooa point in time before hello event was deleted.</span></span> <span data-ttu-id="010c8-184">Olá *TenantInPlace restauração* restaura o script hello locatário banco de dados tooa novo banco de dados atual apontando ponto anterior tooa no tempo e exclusões Olá banco de dados original.</span><span class="sxs-lookup"><span data-stu-id="010c8-184">hello *Restore-TenantInPlace* script restores hello current tenant database tooa new database pointing tooa previous point in time, and deletes hello original database.</span></span> <span data-ttu-id="010c8-185">Esse padrão de restauração é mais adequado para a recuperação de corrupção de dados grave pois pode haver perda de dados significativos Olá locatário teria tooaccommodate.</span><span class="sxs-lookup"><span data-stu-id="010c8-185">This pattern of restore is best suited for recovering from serious data corruption as there may be significant data loss that hello tenant would have tooaccommodate.</span></span>

1. <span data-ttu-id="010c8-186">Abra o arquivo **Demo-RestoreTenant.ps1** no ISE do PowerShell</span><span class="sxs-lookup"><span data-stu-id="010c8-186">Open **Demo-RestoreTenant.ps1** file in PowerShell ISE</span></span>
1. <span data-ttu-id="010c8-187">Definir **$DemoScenario** muito**5** tooselect Olá *locatário no cenário de local de restauração*.</span><span class="sxs-lookup"><span data-stu-id="010c8-187">Set **$DemoScenario** too**5** tooselect hello *restore tenant in place scenario*.</span></span>
1. <span data-ttu-id="010c8-188">Execute usando **F5**.</span><span class="sxs-lookup"><span data-stu-id="010c8-188">Execute using **F5**.</span></span>

<span data-ttu-id="010c8-189">script Hello restaura o ponto de tooa de banco de dados de locatário Olá cinco minutos antes de saudação evento foi excluído.</span><span class="sxs-lookup"><span data-stu-id="010c8-189">hello script restores hello tenant database tooa point five minutes before hello event was deleted.</span></span> <span data-ttu-id="010c8-190">Ele faz isso primeiro colocar Olá Contoso conjunto Hall locatário off-line para que não há nenhuma outra atualiza toohello dados.</span><span class="sxs-lookup"><span data-stu-id="010c8-190">It does this by first taking hello Contoso Concert Hall tenant offline so there are no further updates toohello data.</span></span> <span data-ttu-id="010c8-191">Em seguida, um banco de dados paralelo é criado pela restauração do ponto de restauração hello e nomeado com um carimbo de hora nome de banco de dados de saudação tooensure não está em conflito com o nome de banco de dados de locatário existente do hello.</span><span class="sxs-lookup"><span data-stu-id="010c8-191">Then, a parallel database is created by restoring from hello restore point and named with a timestamp tooensure hello database name does not conflict with hello existing tenant database name.</span></span> <span data-ttu-id="010c8-192">Em seguida, banco de dados de locatário antiga Olá é excluído e Olá banco de dados restaurado é o nome do banco de dados original renomeado toohello.</span><span class="sxs-lookup"><span data-stu-id="010c8-192">Next, hello old tenant database is deleted, and hello restored database is renamed toohello original database name.</span></span> <span data-ttu-id="010c8-193">Por fim, Contoso conjunto Hall é colocado online tooallow Olá aplicativo toohello restaurado banco de dados.</span><span class="sxs-lookup"><span data-stu-id="010c8-193">Finally, Contoso Concert Hall is brought online tooallow hello app access toohello restored database.</span></span>

<span data-ttu-id="010c8-194">Você restaurou com êxito Olá banco de dados tooa ponto no tempo antes do evento Olá foi excluído.</span><span class="sxs-lookup"><span data-stu-id="010c8-194">You successfully restored hello database tooa point in time before hello event was deleted.</span></span> <span data-ttu-id="010c8-195">Olá abre da página de eventos, portanto confirme último evento de saudação foi restaurado.</span><span class="sxs-lookup"><span data-stu-id="010c8-195">hello Events page opens, so confirm hello last event has been restored.</span></span>


## <a name="next-steps"></a><span data-ttu-id="010c8-196">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="010c8-196">Next steps</span></span>

<span data-ttu-id="010c8-197">Neste tutorial, você aprendeu como:</span><span class="sxs-lookup"><span data-stu-id="010c8-197">In this tutorial, you learned how to:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="010c8-198">Restaurar um banco de dados em um banco de dados paralelo (lado a lado)</span><span class="sxs-lookup"><span data-stu-id="010c8-198">Restore a database into a parallel database (side-by-side)</span></span>
> * <span data-ttu-id="010c8-199">Restaurar um banco de dados no local</span><span class="sxs-lookup"><span data-stu-id="010c8-199">Restore a database in place</span></span>

[<span data-ttu-id="010c8-200">Gerenciar o esquema de banco de dados do locatário</span><span class="sxs-lookup"><span data-stu-id="010c8-200">Manage tenant database schema</span></span>](sql-database-saas-tutorial-schema-management.md)

## <a name="additional-resources"></a><span data-ttu-id="010c8-201">Recursos adicionais</span><span class="sxs-lookup"><span data-stu-id="010c8-201">Additional resources</span></span>

* <span data-ttu-id="010c8-202">Adicionais [tutoriais que se baseiam na Olá aplicativo SaaS Wingtip](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span><span class="sxs-lookup"><span data-stu-id="010c8-202">Additional [tutorials that build upon hello Wingtip SaaS application](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span></span>
* [<span data-ttu-id="010c8-203">Visão geral da continuidade dos negócios com o Banco de Dados SQL do Azure</span><span class="sxs-lookup"><span data-stu-id="010c8-203">Overview of business continuity with Azure SQL Database</span></span>](sql-database-business-continuity.md)
* [<span data-ttu-id="010c8-204">Saiba mais sobre o Banco de Dados SQL</span><span class="sxs-lookup"><span data-stu-id="010c8-204">Learn about SQL Database backups</span></span>](sql-database-automated-backups.md)
