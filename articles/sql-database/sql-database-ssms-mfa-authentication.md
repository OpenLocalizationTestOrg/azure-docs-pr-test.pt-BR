---
title: "autenticação de fator de aaaMulti - SQL do Azure | Microsoft Docs"
description: Use o Multi-Factor Authentication com SSMS para Banco de Dados SQL e SQL Data Warehouse.
services: sql-database
documentationcenter: 
author: BYHAM
manager: jhubbard
editor: 
tags: 
ms.assetid: fbd6e644-0520-439c-8304-2e4fb6d6eb91
ms.service: sql-database
ms.custom: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 07/19/2017
ms.author: rickbyh
ms.openlocfilehash: 57ef63b7c7f2c5cf64c3e1ee194d865ee5b14177
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="universal-authentication-with-sql-database-and-sql-data-warehouse-ssms-support-for-mfa"></a><span data-ttu-id="acf71-103">Autenticação Universal com o Banco de Dados SQL e SQL Data Warehouse (suporte SSMS para MFA)</span><span class="sxs-lookup"><span data-stu-id="acf71-103">Universal Authentication with SQL Database and SQL Data Warehouse (SSMS support for MFA)</span></span>
<span data-ttu-id="acf71-104">O Banco de Dados SQL do Azure e o SQL Data Warehouse do Azure dão suporte a conexões do SSMS (SQL Server Management Studio) usando a *Autenticação Universal do Active Directory*.</span><span class="sxs-lookup"><span data-stu-id="acf71-104">Azure SQL Database and Azure SQL Data Warehouse support connections from SQL Server Management Studio (SSMS) using *Active Directory Universal Authentication*.</span></span> 
<span data-ttu-id="acf71-105">**Baixar Olá SSMS mais recentes** - no computador do cliente hello, baixe a versão mais recente de saudação do SSMS, de [baixar o SQL Server Management Studio (SSMS)](https://msdn.microsoft.com/library/mt238290.aspx).</span><span class="sxs-lookup"><span data-stu-id="acf71-105">**Download hello latest SSMS** - On hello client computer, download hello latest version of SSMS, from [Download SQL Server Management Studio (SSMS)](https://msdn.microsoft.com/library/mt238290.aspx).</span></span> <span data-ttu-id="acf71-106">Todos os recursos de saudação neste tópico, use pelo menos julho de 2017, versão 17.2.</span><span class="sxs-lookup"><span data-stu-id="acf71-106">For all hello features in this topic, use at least July 2017, version 17.2.</span></span>  <span data-ttu-id="acf71-107">caixa de diálogo conexão mais recente Hello, tem esta aparência: ![1mfa-universal-conectar](./media/sql-database-ssms-mfa-auth/1mfa-universal-connect.png "caixa de nome de usuário Completes hello.")</span><span class="sxs-lookup"><span data-stu-id="acf71-107">hello most recent connection dialog box, looks like this: ![1mfa-universal-connect](./media/sql-database-ssms-mfa-auth/1mfa-universal-connect.png "Completes hello User name box.")</span></span>  

## <a name="hello-five-authentication-options"></a><span data-ttu-id="acf71-108">Opções de autenticação Olá cinco</span><span class="sxs-lookup"><span data-stu-id="acf71-108">hello five authentication options</span></span>  
- <span data-ttu-id="acf71-109">Autenticação do Active Directory Universal dá suporte a dois métodos de autenticação não interativo hello (`Active Directory - Password` autenticação e `Active Directory - Integrated` autenticação).</span><span class="sxs-lookup"><span data-stu-id="acf71-109">Active Directory Universal Authentication supports hello two non-interactive authentication methods (`Active Directory - Password` authentication and `Active Directory - Integrated` authentication).</span></span> <span data-ttu-id="acf71-110">Os métodos de Autenticação `Active Directory - Password` e `Active Directory - Integrated` não interativos podem ser usados em muitos aplicativos diferentes (ADO.NET, JDBC, ODBC, etc.).</span><span class="sxs-lookup"><span data-stu-id="acf71-110">Non-interactive `Active Directory - Password` and `Active Directory - Integrated` Authentication methods can be used in many different applications (ADO.NET, JDBC, ODBC, etc.).</span></span> <span data-ttu-id="acf71-111">Esses dois métodos nunca resultam em caixas de diálogo pop-up.</span><span class="sxs-lookup"><span data-stu-id="acf71-111">These two methods never result in pop-up dialog boxes.</span></span>

- <span data-ttu-id="acf71-112">A autenticação `Active Directory - Universal with MFA` é um método interativo que também é compatível com a *Autenticação Multifator do Azure* (MFA).</span><span class="sxs-lookup"><span data-stu-id="acf71-112">`Active Directory - Universal with MFA` authentication is an interactive method that also supports *Azure Multi-Factor Authentication* (MFA).</span></span> <span data-ttu-id="acf71-113">Azure MFA ajuda a proteger acesso toodata e aplicativos atendendo a demanda do usuário para um processo de logon simple.</span><span class="sxs-lookup"><span data-stu-id="acf71-113">Azure MFA helps safeguard access toodata and applications while meeting user demand for a simple sign-in process.</span></span> <span data-ttu-id="acf71-114">Ele fornece autenticação forte com uma variedade de opções de verificação fácil (chamada telefônica, mensagem de texto, os cartões inteligentes com o pin ou a notificação de aplicativo móvel), permitindo que método de saudação do toochoose usuários que preferirem.</span><span class="sxs-lookup"><span data-stu-id="acf71-114">It delivers strong authentication with a range of easy verification options (phone call, text message, smart cards with pin, or mobile app notification), allowing users toochoose hello method they prefer.</span></span> <span data-ttu-id="acf71-115">O MFA interativo com o Azure AD pode resultar em uma caixa de diálogo pop-up para validação.</span><span class="sxs-lookup"><span data-stu-id="acf71-115">Interactive MFA with Azure AD can result in a pop-up dialog box for validation.</span></span>

<span data-ttu-id="acf71-116">Para encontrar uma descrição do Multi-Factor Authentication, consulte [Multi-Factor Authentication](../multi-factor-authentication/multi-factor-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="acf71-116">For a description of Multi-Factor Authentication, see [Multi-Factor Authentication](../multi-factor-authentication/multi-factor-authentication.md).</span></span>
<span data-ttu-id="acf71-117">Para etapas de configuração, consulte [Configurar Autenticação Multifator do Banco de Dados SQL do Azure para o SQL Server Management Studio](sql-database-ssms-mfa-authentication-configure.md).</span><span class="sxs-lookup"><span data-stu-id="acf71-117">For configuration steps, see [Configure Azure SQL Database multi-factor authentication for SQL Server Management Studio](sql-database-ssms-mfa-authentication-configure.md).</span></span>

### <a name="azure-ad-domain-name-or-tenant-id-parameter"></a><span data-ttu-id="acf71-118">Parâmetro de ID do locatário ou nome de domínio do Azure AD</span><span class="sxs-lookup"><span data-stu-id="acf71-118">Azure AD domain name or tenant ID parameter</span></span>   

<span data-ttu-id="acf71-119">Começando com [SSMS versão 17](https://docs.microsoft.com/sql/ssms/download-sql-server-management-studio-ssms), os usuários que são importados para Olá atual do Active Directory de outro Active Directories do Azure como usuários convidados, pode fornecer o nome de domínio de saudação do AD do Azure ou ID de locatário quando eles se conectam.</span><span class="sxs-lookup"><span data-stu-id="acf71-119">Beginning with [SSMS version 17](https://docs.microsoft.com/sql/ssms/download-sql-server-management-studio-ssms), users that are imported into hello current Active Directory from other Azure Active Directories as guest users, can provide hello Azure AD domain name, or tenant ID when they connect.</span></span> <span data-ttu-id="acf71-120">Usuários convidados incluem usuários convidados de outros Azure ADs e contas Microsoft como outlook.com, hotmail.com, live.com ou outras contas como gmail.com. Essas informações permite **universais do Active Directory com a autenticação do MFA** tooidentify Olá correto de autoridade de autenticação.</span><span class="sxs-lookup"><span data-stu-id="acf71-120">Guest users include users invited from other Azure ADs, Microsoft accounts such as outlook.com, hotmail.com, live.com, or other accounts like gmail.com. This information, allows **Active Directory Universal with MFA Authentication** tooidentify hello correct authenticating authority.</span></span> <span data-ttu-id="acf71-121">Essa opção também é necessário toosupport contas da Microsoft (MSA), como outlook.com, hotmail.com, live.com ou contas não MSA.</span><span class="sxs-lookup"><span data-stu-id="acf71-121">This option is also required toosupport Microsoft accounts (MSA) such as outlook.com, hotmail.com, live.com, or non-MSA accounts.</span></span> <span data-ttu-id="acf71-122">Esses usuários que desejam toobe autenticado usando a autenticação Universal deve inserir seu nome de domínio do AD do Azure ou Locatário ID.</span><span class="sxs-lookup"><span data-stu-id="acf71-122">All these users who want toobe authenticated using Universal Authentication must enter their Azure AD domain name or tenant ID.</span></span> <span data-ttu-id="acf71-123">Esse parâmetro representa Olá atual do AD do Azure domínio nome/locatário ID Olá com que servidor do Azure está vinculada.</span><span class="sxs-lookup"><span data-stu-id="acf71-123">This parameter represents hello current Azure AD domain name/tenant ID hello Azure Server is linked with.</span></span> <span data-ttu-id="acf71-124">Por exemplo, se o servidor do Azure é associado ao domínio do AD do Azure `contosotest.onmicrosoft.com` onde usuário `joe@contosodev.onmicrosoft.com` hospedado como um usuário importado do domínio do AD do Azure `contosodev.onmicrosoft.com`, Olá tooauthenticate de necessário o nome de domínio, esse usuário é `contosotest.onmicrosoft.com`.</span><span class="sxs-lookup"><span data-stu-id="acf71-124">For example, if Azure Server is associated with Azure AD domain `contosotest.onmicrosoft.com` where user `joe@contosodev.onmicrosoft.com` is hosted as an imported user from Azure AD domain `contosodev.onmicrosoft.com`, hello domain name required tooauthenticate this user is `contosotest.onmicrosoft.com`.</span></span> <span data-ttu-id="acf71-125">Quando o usuário Olá é um usuário nativo de saudação do AD do Azure vinculado tooAzure Server e não é uma conta MSA, nenhuma ID de locatário ou de nome de domínio é necessário.</span><span class="sxs-lookup"><span data-stu-id="acf71-125">When hello user is a native user of hello Azure AD linked tooAzure Server, and is not an MSA account, no domain name or tenant ID is required.</span></span> <span data-ttu-id="acf71-126">tooenter Olá parâmetro (começando com o SSMS versão 17.2), Olá **conectar tooDatabase** caixa de diálogo, caixa de diálogo Olá completa, selecionando **do Active Directory - Universal com MFA** autenticação, Clique em **opções**, Olá completa **nome de usuário** caixa e, em seguida, clique em Olá **propriedades de Conexão** guia. Verificar Olá **ID de locatário ou de nome de domínio do AD** caixa e forneça a autoridade de autenticação, como nome de domínio da saudação (**contosotest.onmicrosoft.com**) ou Olá GUID da ID de locatário hello.</span><span class="sxs-lookup"><span data-stu-id="acf71-126">tooenter hello parameter (beginning with SSMS version 17.2), in hello **Connect tooDatabase** dialog box, complete hello dialog box, selecting **Active Directory - Universal with MFA** authentication, click **Options**, complete hello **User name** box, and then click hello **Connection Properties** tab. Check hello **AD domain name or tenant ID** box, and provide authenticating authority, such as hello domain name (**contosotest.onmicrosoft.com**) or hello GUID of hello tenant ID.</span></span>  
   <span data-ttu-id="acf71-127">![mfa-tenant-ssms](./media/sql-database-ssms-mfa-auth/mfa-tenant-ssms.png)</span><span class="sxs-lookup"><span data-stu-id="acf71-127">![mfa-tenant-ssms](./media/sql-database-ssms-mfa-auth/mfa-tenant-ssms.png)</span></span>   

### <a name="azure-ad-business-toobusiness-support"></a><span data-ttu-id="acf71-128">Suporte a toobusiness de negócios do Azure AD</span><span class="sxs-lookup"><span data-stu-id="acf71-128">Azure AD business toobusiness support</span></span>   
<span data-ttu-id="acf71-129">Os usuários do AD do Azure tem suportados para cenários de B2B do Azure AD como usuários convidados (consulte [novidades colaboração B2B do Azure](../active-directory/active-directory-b2b-what-is-azure-ad-b2b.md)) pode se conectar tooSQL banco de dados e SQL Data Warehouse apenas como parte dos membros de um grupo criado no AD do Azure atual e mapeado manualmente usando Transact-SQL de Olá `CREATE USER` instrução em um determinado banco de dados.</span><span class="sxs-lookup"><span data-stu-id="acf71-129">Azure AD users supported for Azure AD B2B scenarios as guest users (see [What is Azure B2B collaboration](../active-directory/active-directory-b2b-what-is-azure-ad-b2b.md)) can connect tooSQL Database and SQL Data Warehouse only as part of members of a group created in current Azure AD and mapped manually using hello Transact-SQL `CREATE USER` statement in a given database.</span></span> <span data-ttu-id="acf71-130">Por exemplo, se `steve@gmail.com` é tooAzure convidado AD `contosotest` (com o domínio do Ad do Azure Olá `contosotest.onmicrosoft.com`), grupo do AD do Azure, como `usergroup` devem ser criados no hello AD do Azure que contém Olá `steve@gmail.com` membro.</span><span class="sxs-lookup"><span data-stu-id="acf71-130">For example, if `steve@gmail.com` is invited tooAzure AD `contosotest` (with hello Azure Ad domain `contosotest.onmicrosoft.com`), an Azure AD group, such as `usergroup` must be created in hello Azure AD that contains hello `steve@gmail.com` member.</span></span> <span data-ttu-id="acf71-131">Em seguida, esse grupo deve ser criado para um banco de dados específico (ou seja, MyDatabase) pelo administrador do SQL do Azure AD ou DBO do Azure AD executando uma instrução `CREATE USER [usergroup] FROM EXTERNAL PROVIDER` do Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="acf71-131">Then, this group must be created for a specific  database (i.e. MyDatabase) by Azure AD SQL admin or Azure AD DBO  by executing a Transact-SQL `CREATE USER [usergroup] FROM EXTERNAL PROVIDER` statement.</span></span> <span data-ttu-id="acf71-132">Após a criação de usuário de banco de dados hello, em seguida, Olá usuário `steve@gmail.com` pode fazer logon muito`MyDatabase` usando a opção de autenticação do SSMS Olá `Active Directory – Universal with MFA support`.</span><span class="sxs-lookup"><span data-stu-id="acf71-132">After hello database user is created, then hello user `steve@gmail.com` can login too`MyDatabase` using hello SSMS authentication option `Active Directory – Universal with MFA support`.</span></span> <span data-ttu-id="acf71-133">Olá usergroup, por padrão, tem apenas Olá conectar-se qualquer acesso a dados adicional que precisará toobe concedido hello e permissão maneira normal.</span><span class="sxs-lookup"><span data-stu-id="acf71-133">hello usergroup, by default, has only hello connect permission and any further data access that will need toobe granted in hello normal way.</span></span> <span data-ttu-id="acf71-134">Observe que o usuário `steve@gmail.com` como um usuário convidado deve Olá caixa de seleção e adicionar o nome de domínio do AD de saudação `contosotest.onmicrosoft.com` em Olá SSMS **propriedade de Conexão** caixa de diálogo.</span><span class="sxs-lookup"><span data-stu-id="acf71-134">Please note that user `steve@gmail.com` as a guest user must check hello box and add hello AD domain name `contosotest.onmicrosoft.com` in hello SSMS **Connection Property** dialog box.</span></span> <span data-ttu-id="acf71-135">Olá **ID de locatário ou de nome de domínio do AD** opção tem suporte apenas para Olá Universal com opções de conexão de MFA, caso contrário, ela está desativada.</span><span class="sxs-lookup"><span data-stu-id="acf71-135">hello **AD domain name or tenant ID** option is only supported for hello Universal with MFA connection options, otherwise it is greyed out.</span></span>

## <a name="universal-authentication-limitations-for-sql-database-and-sql-data-warehouse"></a><span data-ttu-id="acf71-136">Limitações da Autenticação Universal para o Banco de Dados SQL e SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="acf71-136">Universal Authentication limitations for SQL Database and SQL Data Warehouse</span></span>
* <span data-ttu-id="acf71-137">SSMS e SqlPackage.exe são ferramentas de somente Olá atualmente habilitadas para MFA por meio da autenticação Universal do Active Directory.</span><span class="sxs-lookup"><span data-stu-id="acf71-137">SSMS and SqlPackage.exe are hello only tools currently enabled for MFA through Active Directory Universal Authentication.</span></span>
* <span data-ttu-id="acf71-138">O SSMS versão 17.2, dá suporte a acesso simultâneo de vários usuário usando a Autenticação Universal com MFA.</span><span class="sxs-lookup"><span data-stu-id="acf71-138">SSMS version 17.2, supports multi-user concurrent access using Universal Authentication with MFA.</span></span> <span data-ttu-id="acf71-139">Versão 17.0 e 17.1, restrito a um logon para uma instância do SSMS com autenticação Universal tooa única do Active Directory do Azure conta.</span><span class="sxs-lookup"><span data-stu-id="acf71-139">Version 17.0 and 17.1, restricted a log in for an instance of SSMS using Universal Authentication tooa single Azure Active Directory account.</span></span> <span data-ttu-id="acf71-140">toolog em que outra conta do AD do Azure, você deve usar outra instância do SSMS.</span><span class="sxs-lookup"><span data-stu-id="acf71-140">toolog in as another Azure AD account, you must use another instance of SSMS.</span></span> <span data-ttu-id="acf71-141">(Essa restrição é limitada tooActive autenticação Universal do diretório; você pode fazer logon em servidores toodifferent usando a autenticação de senha do Active Directory, a autenticação integrada do Active Directory ou a autenticação do SQL Server).</span><span class="sxs-lookup"><span data-stu-id="acf71-141">(This restriction is limited tooActive Directory Universal Authentication; you can log in toodifferent servers using Active Directory Password Authentication, Active Directory Integrated Authentication, or SQL Server Authentication).</span></span>
* <span data-ttu-id="acf71-142">O SSMS dá suporte à Autenticação Universal do Active Directory para a visualização do Pesquisador de Objetos, do Editor de Consultas e do Repositório de Consultas.</span><span class="sxs-lookup"><span data-stu-id="acf71-142">SSMS supports Active Directory Universal Authentication for Object Explorer, Query Editor, and Query Store visualization.</span></span>
* <span data-ttu-id="acf71-143">O SSMS versão 17.2 fornece suporte ao Assistente de DacFx para Eportação/Extração/Implantação de Dados de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="acf71-143">SSMS version 17.2 provides DacFx Wizard support for Export/Extract/Deploy Data database.</span></span> <span data-ttu-id="acf71-144">Quando um usuário específico é autenticado por meio do diálogo de autenticação inicial hello usando a autenticação Universal, hello funções DacFx Assistente Olá mesma maneira que faz para todos os outros métodos de autenticação.</span><span class="sxs-lookup"><span data-stu-id="acf71-144">Once a specific user is authenticated through hello initial authentication dialog using Universal Authentication, hello DacFx Wizard functions hello same way it does for all other authentication methods.</span></span>
* <span data-ttu-id="acf71-145">Olá Designer de tabela SSMS não dá suporte à autenticação Universal.</span><span class="sxs-lookup"><span data-stu-id="acf71-145">hello SSMS Table Designer does not support Universal Authentication.</span></span>
* <span data-ttu-id="acf71-146">Não há nenhum requisito de software adicional para a Autenticação Universal do Active Directory, exceto que você deve usar uma versão do SSMS com suporte.</span><span class="sxs-lookup"><span data-stu-id="acf71-146">There are no additional software requirements for Active Directory Universal Authentication except that you must use a supported version of SSMS.</span></span>  
* <span data-ttu-id="acf71-147">versão da biblioteca de autenticação do Active Directory (ADAL) de saudação para autenticação Universal foi versão mais recente de ADAL.dll 3.13.9 disponível liberado tooits atualizado.</span><span class="sxs-lookup"><span data-stu-id="acf71-147">hello Active Directory Authentication Library (ADAL) version for Universal authentication was updated tooits latest ADAL.dll 3.13.9 available released version.</span></span> <span data-ttu-id="acf71-148">Consulte [Biblioteca de Autenticação do Active Directory 3.14.1](http://www.nuget.org/packages/Microsoft.IdentityModel.Clients.ActiveDirectory/).</span><span class="sxs-lookup"><span data-stu-id="acf71-148">See [Active Directory Authentication Library 3.14.1](http://www.nuget.org/packages/Microsoft.IdentityModel.Clients.ActiveDirectory/).</span></span>


## <a name="next-steps"></a><span data-ttu-id="acf71-149">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="acf71-149">Next steps</span></span>

- <span data-ttu-id="acf71-150">Para etapas de configuração, consulte [Configurar Autenticação Multifator do Banco de Dados SQL do Azure para o SQL Server Management Studio](sql-database-ssms-mfa-authentication-configure.md).</span><span class="sxs-lookup"><span data-stu-id="acf71-150">For configuration steps, see [Configure Azure SQL Database multi-factor authentication for SQL Server Management Studio](sql-database-ssms-mfa-authentication-configure.md).</span></span>
- <span data-ttu-id="acf71-151">Conceder a outros usuários acessar o banco de dados de tooyour: [autorização e autenticação do banco de dados SQL: concedendo acesso](sql-database-manage-logins.md)</span><span class="sxs-lookup"><span data-stu-id="acf71-151">Grant others access tooyour database: [SQL Database Authentication and Authorization: Granting Access](sql-database-manage-logins.md)</span></span>  
- <span data-ttu-id="acf71-152">Certifique-se de outros usuários podem se conectar por meio de firewall de saudação: [regra de firewall de configurar um nível de servidor de banco de dados SQL usando Olá portal do Azure](sql-database-configure-firewall-settings.md)</span><span class="sxs-lookup"><span data-stu-id="acf71-152">Make sure others can connect through hello firewall: [Configure an Azure SQL Database server-level firewall rule using hello Azure portal](sql-database-configure-firewall-settings.md)</span></span>  
- [<span data-ttu-id="acf71-153">Configurar e gerenciar o Azure Active Directory para autenticação com o Banco de Dados SQL ou o SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="acf71-153">Configure and manage Azure Active Directory authentication with SQL Database or SQL Data Warehouse</span></span>](sql-database-aad-authentication-configure.md)  
- [<span data-ttu-id="acf71-154">Microsoft SQL Server Data-Tier Application Framework (17.0.0 GA)</span><span class="sxs-lookup"><span data-stu-id="acf71-154">Microsoft SQL Server Data-Tier Application Framework (17.0.0 GA)</span></span>](https://www.microsoft.com/download/details.aspx?id=55088)  
- [<span data-ttu-id="acf71-155">SQLPackage.exe</span><span class="sxs-lookup"><span data-stu-id="acf71-155">SQLPackage.exe</span></span>](https://msdn.microsoft.com/library/hh550080.aspx)  
- [<span data-ttu-id="acf71-156">Importar um tooa de arquivo BACPAC novo banco de dados do SQL do Azure</span><span class="sxs-lookup"><span data-stu-id="acf71-156">Import a BACPAC file tooa new Azure SQL Database</span></span>](../sql-database/sql-database-import.md)  
- [<span data-ttu-id="acf71-157">Exportar um arquivo de BACPAC de tooa de banco de dados SQL do Azure</span><span class="sxs-lookup"><span data-stu-id="acf71-157">Export an Azure SQL database tooa BACPAC file</span></span>](../sql-database/sql-database-export.md)  
- <span data-ttu-id="acf71-158">Interface C# [Interface IUniversalAuthProvider](https://msdn.microsoft.com/library/microsoft.sqlserver.dac.iuniversalauthprovider.aspx)</span><span class="sxs-lookup"><span data-stu-id="acf71-158">C# interface [IUniversalAuthProvider Interface](https://msdn.microsoft.com/library/microsoft.sqlserver.dac.iuniversalauthprovider.aspx)</span></span>  
