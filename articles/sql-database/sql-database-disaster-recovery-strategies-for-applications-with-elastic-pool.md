---
title: "Criar soluções de recuperação de desastre – Banco de Dados SQL do Azure | Microsoft Docs"
description: "Aprenda a projetar sua solução de nuvem para recuperação de desastres escolhendo o padrão de failover correto."
services: sql-database
documentationcenter: 
author: anosov1960
manager: jhubbard
editor: monicar
ms.assetid: 2db99057-0c79-4fb0-a7f1-d1c057ec787f
ms.service: sql-database
ms.custom: business continuity
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 04/07/2017
ms.author: sashan;carlrab
ms.openlocfilehash: 4f5131fdd2ca83e7a0a2f986a2fa1e3551814c6e
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/11/2017
---
# <a name="disaster-recovery-strategies-for-applications-using-sql-database-elastic-pools"></a><span data-ttu-id="dbd69-103">Estratégias de recuperação de desastres para aplicativos que usam o Pool Elástico do banco de dados SQL</span><span class="sxs-lookup"><span data-stu-id="dbd69-103">Disaster recovery strategies for applications using SQL Database elastic pools</span></span>
<span data-ttu-id="dbd69-104">Ao longo dos anos, aprendemos que os serviços em nuvem não são à prova de falhas e que incidentes catastróficos acontecem.</span><span class="sxs-lookup"><span data-stu-id="dbd69-104">Over the years we have learned that cloud services are not foolproof and catastrophic incidents happen.</span></span> <span data-ttu-id="dbd69-105">O banco de dados SQL fornece uma série de recursos para permitir a continuidade dos negócios do seu aplicativo quando esses incidentes ocorrerem.</span><span class="sxs-lookup"><span data-stu-id="dbd69-105">SQL Database provides several capabilities to provide for the business continuity of your application when these incidents occur.</span></span> <span data-ttu-id="dbd69-106">[Pools elásticos](sql-database-elastic-pool.md) e bancos de dados únicos são compatíveis com o mesmo tipo de recursos de recuperação de desastre.</span><span class="sxs-lookup"><span data-stu-id="dbd69-106">[Elastic pools](sql-database-elastic-pool.md) and single databases support the same kind of disaster recovery capabilities.</span></span> <span data-ttu-id="dbd69-107">Este artigo descreve diversas estratégias de recuperação de desastres para pools elásticos que aproveitam esses recursos de continuidade de negócios do Banco de Dados SQL.</span><span class="sxs-lookup"><span data-stu-id="dbd69-107">This article describes several DR strategies for elastic pools that leverage these SQL Database business continuity features.</span></span>

<span data-ttu-id="dbd69-108">Este artigo usa o seguinte padrão de aplicativo de SaaS ISV canônico:</span><span class="sxs-lookup"><span data-stu-id="dbd69-108">This article uses the following canonical SaaS ISV application pattern:</span></span>

<span data-ttu-id="dbd69-109"><i>Um aplicativo Web baseado em nuvem moderno provisiona um banco de dados SQL para cada usuário final. O ISV tem um grande número de clientes e, portanto, usa vários bancos de dados, conhecidos como bancos de dados de locatário. Como os bancos de dados do locatário normalmente têm padrões de atividade imprevisíveis, o ISV usa um pool elástico para tornar o custo do banco de dados bastante previsível por longos períodos de tempo. O pool elástico também simplifica o gerenciamento de desempenho quando há picos de atividade de usuário. Além dos bancos de dados do locatário, o aplicativo também usa vários bancos de dados para gerenciar perfis de usuário, segurança, coletar padrões de uso, etc. A disponibilidade de locatários individuais não afeta a disponibilidade do aplicativo como um todo. No entanto, a disponibilidade e o desempenho dos bancos de dados de gerenciamento são essenciais para o funcionamento do aplicativo. Se os bancos de dados de gerenciamento estiverem offline, todo o aplicativo estará offline.</i></span><span class="sxs-lookup"><span data-stu-id="dbd69-109"><i>A modern cloud-based web application provisions one SQL database for each end user. The ISV has many customers and therefore uses many databases, known as tenant databases. Because the tenant databases typically have unpredictable activity patterns, the ISV uses an elastic pool to make the database cost very predictable over extended periods of time. The elastic pool also simplifies the performance management when the user activity spikes. In addition to the tenant databases the application also uses several databases to manage user profiles, security, collect usage patterns etc. Availability of the individual tenants does not impact the application’s availability as whole. However, the availability and performance of management databases is critical for the application’s function and if the management databases are offline the entire application is offline.</i></span></span>  

<span data-ttu-id="dbd69-110">Este artigo discute estratégias de DR que abrangem uma variedade de cenários de aplicativos de inicialização sensíveis ao custo para aqueles com requisitos rígidos de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="dbd69-110">This article discusses DR strategies covering a range of scenarios from cost sensitive startup applications to ones with stringent availability requirements.</span></span>

## <a name="scenario-1-cost-sensitive-startup"></a><span data-ttu-id="dbd69-111">Cenário 1.</span><span class="sxs-lookup"><span data-stu-id="dbd69-111">Scenario 1.</span></span> <span data-ttu-id="dbd69-112">Inicialização econômica</span><span class="sxs-lookup"><span data-stu-id="dbd69-112">Cost sensitive startup</span></span>
<span data-ttu-id="dbd69-113"><i>Sou uma startup e dependo muito do custo das coisas.  Quero simplificar a implantação e o gerenciamento do aplicativo e desejo ter um SLA limitado para clientes individuais. No entanto, quero garantir que o aplicativo como um todo nunca fique offline.</i></span><span class="sxs-lookup"><span data-stu-id="dbd69-113"><i>I am a startup business and am extremely cost sensitive.  I want to simplify deployment and management of the application and I can have a limited SLA for individual customers. But I want to ensure the application as a whole is never offline.</i></span></span>

<span data-ttu-id="dbd69-114">Para satisfazer o requisito de simplicidade, implante todos os bancos de dados do locatário em um pool elástico na região do Azure de sua escolha e implante os bancos de dados de gerenciamento como bancos de dados únicos replicados geograficamente.</span><span class="sxs-lookup"><span data-stu-id="dbd69-114">To satisfy the simplicity requirement, deploy all tenant databases into one elastic pool in the Azure region of your choice and deploy management databases as geo-replicated single databases.</span></span> <span data-ttu-id="dbd69-115">Na recuperação de desastres de locatários, use a restauração geográfica, que é fornecida sem custo adicional.</span><span class="sxs-lookup"><span data-stu-id="dbd69-115">For the disaster recovery of tenants, use geo-restore, which comes at no additional cost.</span></span> <span data-ttu-id="dbd69-116">Para garantir a disponibilidade dos bancos de dados de gerenciamento, eles devem ser replicados geograficamente em outra região usando um grupo de failover automático (na versão prévia) (etapa 1).</span><span class="sxs-lookup"><span data-stu-id="dbd69-116">To ensure the availability of the management databases, geo-replicate them to another region using an auto-failover group (in-preview) (step 1).</span></span> <span data-ttu-id="dbd69-117">O custo corrente da configuração da recuperação de desastres neste cenário é igual ao custo total dos bancos de dados secundários.</span><span class="sxs-lookup"><span data-stu-id="dbd69-117">The ongoing cost of the disaster recovery configuration in this scenario is equal to the total cost of the secondary databases.</span></span> <span data-ttu-id="dbd69-118">Essa configuração está ilustrada no diagrama a seguir.</span><span class="sxs-lookup"><span data-stu-id="dbd69-118">This configuration is illustrated on the next diagram.</span></span>

![A figura 1](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-1.png)

<span data-ttu-id="dbd69-120">O próximo diagrama ilustra as etapas de recuperação online do seu aplicativo se uma interrupção na região primária ocorrer.</span><span class="sxs-lookup"><span data-stu-id="dbd69-120">If an outage occurs in the primary region, the recovery steps to bring your application online are illustrated by the next diagram.</span></span>

* <span data-ttu-id="dbd69-121">O grupo de failover inicia o failover automático do banco de dados de gerenciamento para a região de DR.</span><span class="sxs-lookup"><span data-stu-id="dbd69-121">The failover group initiates automatic failover of the management database to the DR region.</span></span> <span data-ttu-id="dbd69-122">O aplicativo é reconectado automaticamente às novas contas primárias e bancos de dados de locatário serão criados na região de DR.</span><span class="sxs-lookup"><span data-stu-id="dbd69-122">The application is automatically reconnected to the new primary and all new accounts and tenant databases are created in the DR region.</span></span> <span data-ttu-id="dbd69-123">Os clientes existentes verão os seus dados como temporariamente indisponíveis.</span><span class="sxs-lookup"><span data-stu-id="dbd69-123">The existing customers see their data temporarily unavailable.</span></span>
* <span data-ttu-id="dbd69-124">Crie o pool elástico com a mesma configuração do pool original (2).</span><span class="sxs-lookup"><span data-stu-id="dbd69-124">Create the elastic pool with the same configuration as the original pool (2).</span></span>
* <span data-ttu-id="dbd69-125">Use a restauração geográfica para criar cópias dos bancos de dados de locatário (3).</span><span class="sxs-lookup"><span data-stu-id="dbd69-125">Use geo-restore to create copies of the tenant databases (3).</span></span> <span data-ttu-id="dbd69-126">Você pode cogitar disparar as restaurações individuais pelas conexões do usuário final ou usar outro esquema de prioridade específica do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="dbd69-126">You can consider triggering the individual restores by the end-user connections or use some other application-specific priority scheme.</span></span>


<span data-ttu-id="dbd69-127">Neste momento, seu aplicativo está online novamente na região de DR, mas alguns clientes acessarão seus dados com algum atraso.</span><span class="sxs-lookup"><span data-stu-id="dbd69-127">At this point your application is back online in the DR region, but some customers experience delay when accessing their data.</span></span>

![Figura 2](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-2.png)

<span data-ttu-id="dbd69-129">Se a interrupção foi temporária, é possível que a região primária seja recuperada pelo Azure antes de todas as restaurações do banco de dados serem concluídas na região de DR.</span><span class="sxs-lookup"><span data-stu-id="dbd69-129">If the outage was temporary, it is possible that the primary region is recovered by Azure before all the database restores are complete in the DR region.</span></span> <span data-ttu-id="dbd69-130">Nesse caso, você deve organizar a mudança do aplicativo novamente para a região primária.</span><span class="sxs-lookup"><span data-stu-id="dbd69-130">In this case, orchestrate moving the application back to the primary region.</span></span> <span data-ttu-id="dbd69-131">O processo usará as etapas ilustradas no diagrama a seguir.</span><span class="sxs-lookup"><span data-stu-id="dbd69-131">The process takes the steps illustrated on the next diagram.</span></span>

* <span data-ttu-id="dbd69-132">Cancele todas as solicitações de restauração geográfica pendentes.</span><span class="sxs-lookup"><span data-stu-id="dbd69-132">Cancel all outstanding geo-restore requests.</span></span>   
* <span data-ttu-id="dbd69-133">Faça o failover dos bancos de dados de gerenciamento para a região primária (5).</span><span class="sxs-lookup"><span data-stu-id="dbd69-133">Fail over the management databases to the primary region (5).</span></span> <span data-ttu-id="dbd69-134">Observação: após a recuperação da região, os antigos primários se tornarão secundários automaticamente.</span><span class="sxs-lookup"><span data-stu-id="dbd69-134">After the region’s recovery, the old primaries have automatically become secondaries.</span></span> <span data-ttu-id="dbd69-135">Agora eles alternam funções novamente.</span><span class="sxs-lookup"><span data-stu-id="dbd69-135">Now they switch roles again.</span></span> 
* <span data-ttu-id="dbd69-136">Altere a cadeia de conexão do aplicativo para apontar de volta para a região primária.</span><span class="sxs-lookup"><span data-stu-id="dbd69-136">Change the application's connection string to point back to the primary region.</span></span> <span data-ttu-id="dbd69-137">Agora, todas os novos bancos de dados de locatário e contas serão criados na região primária.</span><span class="sxs-lookup"><span data-stu-id="dbd69-137">Now all new accounts and tenant databases are created in the primary region.</span></span> <span data-ttu-id="dbd69-138">Alguns clientes existentes verão seus dados como temporariamente indisponíveis.</span><span class="sxs-lookup"><span data-stu-id="dbd69-138">Some existing customers see their data temporarily unavailable.</span></span>   
* <span data-ttu-id="dbd69-139">Defina todos os bancos de dados no pool da recuperação de desastres como somente leitura a fim de garantir que eles não poderão ser modificados na região da recuperação de desastres (6).</span><span class="sxs-lookup"><span data-stu-id="dbd69-139">Set all databases in the DR pool to read-only to ensure they cannot be modified in the DR region (6).</span></span> 
* <span data-ttu-id="dbd69-140">Para cada banco de dados no pool da recuperação de desastres que foi alterado desde a recuperação, renomeie ou exclua os bancos de dados correspondentes no pool primário (7).</span><span class="sxs-lookup"><span data-stu-id="dbd69-140">For each database in the DR pool that has changed since the recovery, rename or delete the corresponding databases in the primary pool (7).</span></span> 
* <span data-ttu-id="dbd69-141">Copie os bancos de dados atualizados do pool da recuperação de desastres para o pool primário (8).</span><span class="sxs-lookup"><span data-stu-id="dbd69-141">Copy the updated databases from the DR pool to the primary pool (8).</span></span> 
* <span data-ttu-id="dbd69-142">Exclua o pool da recuperação de desastres (9)</span><span class="sxs-lookup"><span data-stu-id="dbd69-142">Delete the DR pool (9)</span></span>

<span data-ttu-id="dbd69-143">Neste momento, seu aplicativo estará online na região primária com todos os bancos de dados de locatário disponíveis no pool primário.</span><span class="sxs-lookup"><span data-stu-id="dbd69-143">At this point your application is online in the primary region with all tenant databases available in the primary pool.</span></span>

![A figura 3](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-3.png)

<span data-ttu-id="dbd69-145">A principal **vantagem** dessa estratégia é o baixo custo da redundância da camada de dados.</span><span class="sxs-lookup"><span data-stu-id="dbd69-145">The key **benefit** of this strategy is low ongoing cost for data tier redundancy.</span></span> <span data-ttu-id="dbd69-146">Os backups são usados automaticamente pelo serviço Banco de Dados SQL sem a necessidade de nova codificação do aplicativo e sem nenhum custo adicional.</span><span class="sxs-lookup"><span data-stu-id="dbd69-146">Backups are taken automatically by the SQL Database service with no application rewrite and at no additional cost.</span></span>  <span data-ttu-id="dbd69-147">O custo é incorrido apenas quando os bancos de dados elásticos são restaurados.</span><span class="sxs-lookup"><span data-stu-id="dbd69-147">The cost is incurred only when the elastic databases are restored.</span></span> <span data-ttu-id="dbd69-148">O **revés** é que a recuperação completa de todos os bancos de dados de locatário levará um tempo significativo.</span><span class="sxs-lookup"><span data-stu-id="dbd69-148">The **trade-off** is that the complete recovery of all tenant databases takes significant time.</span></span> <span data-ttu-id="dbd69-149">O tempo de recuperação dependerá do número total de restaurações que você iniciar na região de DR e do tamanho geral dos bancos de dados do locatário.</span><span class="sxs-lookup"><span data-stu-id="dbd69-149">The length of time depends on the total number of restores you initiate in the DR region and overall size of the tenant databases.</span></span> <span data-ttu-id="dbd69-150">Mesmo se você priorizar a restauração de alguns locatários em detrimentos de outros, você estará competindo com todos as outras restaurações iniciadas na mesma região, já que o serviço arbitrará e restringirá para minimizar o impacto geral nos bancos de dados dos clientes existentes.</span><span class="sxs-lookup"><span data-stu-id="dbd69-150">Even if you prioritize some tenants' restores over others, you are competing with all the other restores that are initiated in the same region as the service arbitrates and throttles to minimize the overall impact on the existing customers' databases.</span></span> <span data-ttu-id="dbd69-151">Além disso, a recuperação dos bancos de dados do locatário não poderá ser iniciada até que o novo pool elástico na região da recuperação de desastres seja criado.</span><span class="sxs-lookup"><span data-stu-id="dbd69-151">In addition, the recovery of the tenant databases cannot start until the new elastic pool in the DR region is created.</span></span>

## <a name="scenario-2-mature-application-with-tiered-service"></a><span data-ttu-id="dbd69-152">Cenário 2:</span><span class="sxs-lookup"><span data-stu-id="dbd69-152">Scenario 2.</span></span> <span data-ttu-id="dbd69-153">Aplicativo maduro com o serviço em camadas</span><span class="sxs-lookup"><span data-stu-id="dbd69-153">Mature application with tiered service</span></span>
<span data-ttu-id="dbd69-154"><i>Tenho um aplicativo SaaS evoluído com ofertas de serviço em camadas e diferentes SLAs para clientes de avaliação e para clientes pagantes. Para clientes de avaliação, preciso reduzir o custo tanto quanto possível. Os clientes de teste podem ter um tempo de inatividade, mas quero reduzir sua probabilidade. Para clientes pagantes, qualquer tempo de inatividade é um risco. Portanto, quero garantir que os clientes pagantes possam sempre acessar seus dados.</i></span><span class="sxs-lookup"><span data-stu-id="dbd69-154"><i>I am a mature SaaS application with tiered service offers and different SLAs for trial customers and for paying customers. For the trial customers, I have to reduce the cost as much as possible. Trial customers can take downtime but I want to reduce its likelihood. For the paying customers, any downtime is a flight risk. So I want to make sure that paying customers are always able to access their data.</i></span></span> 

<span data-ttu-id="dbd69-155">Para dar suporte a esse cenário, você deve separar os locatários de avaliação dos locatários pagos colocando-os em pools elásticos separados.</span><span class="sxs-lookup"><span data-stu-id="dbd69-155">To support this scenario, separate the trial tenants from paid tenants by putting them into separate elastic pools.</span></span> <span data-ttu-id="dbd69-156">Os clientes de avaliação teriam um eDTU menor por locatário e SLA inferior com tempo de recuperação mais longo.</span><span class="sxs-lookup"><span data-stu-id="dbd69-156">The trial customers have lower eDTU per tenant and lower SLA with a longer recovery time.</span></span> <span data-ttu-id="dbd69-157">Os clientes pagantes estariam em um pool com maior eDTU por locatário e um SLA mais alto.</span><span class="sxs-lookup"><span data-stu-id="dbd69-157">The paying customers are in a pool with higher eDTU per tenant and a higher SLA.</span></span> <span data-ttu-id="dbd69-158">Para garantir o menor tempo de recuperação, os bancos de dados de locatário dos clientes pagantes devem ser replicados geograficamente.</span><span class="sxs-lookup"><span data-stu-id="dbd69-158">To guarantee the lowest recovery time, the paying customers' tenant databases are geo-replicated.</span></span> <span data-ttu-id="dbd69-159">Essa configuração está ilustrada no diagrama a seguir.</span><span class="sxs-lookup"><span data-stu-id="dbd69-159">This configuration is illustrated on the next diagram.</span></span> 

![Figura 4](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-4.png)

<span data-ttu-id="dbd69-161">Como no primeiro cenário, os bancos de dados de gerenciamento estarão muito ativos. Portanto, use um banco de dados único replicado geograficamente para ele (1).</span><span class="sxs-lookup"><span data-stu-id="dbd69-161">As in the first scenario, the management databases are quite active so you use a single geo-replicated database for it (1).</span></span> <span data-ttu-id="dbd69-162">Isso garantirá o desempenho previsível para novas assinaturas de clientes, atualizações de perfil e outras operações de gerenciamento.</span><span class="sxs-lookup"><span data-stu-id="dbd69-162">This ensures the predictable performance for new customer subscriptions, profile updates, and other management operations.</span></span> <span data-ttu-id="dbd69-163">A região em que residem os bancos de dados de gerenciamento primários é a região primária e a região em que residem os bancos de dados de gerenciamento secundários é a região de DR.</span><span class="sxs-lookup"><span data-stu-id="dbd69-163">The region in which the primaries of the management databases reside is the primary region and the region in which the secondaries of the management databases reside is the DR region.</span></span>

<span data-ttu-id="dbd69-164">Os bancos de dados de locatário dos clientes pagantes têm bancos de dados ativos no pool "pago" provisionado na região primária.</span><span class="sxs-lookup"><span data-stu-id="dbd69-164">The paying customers’ tenant databases have active databases in the “paid” pool provisioned in the primary region.</span></span> <span data-ttu-id="dbd69-165">Você deve provisionar um pool secundário com o mesmo nome na região de DR.</span><span class="sxs-lookup"><span data-stu-id="dbd69-165">Provision a secondary pool with the same name in the DR region.</span></span> <span data-ttu-id="dbd69-166">Cada locatário é replicado geograficamente para o pool secundário (2).</span><span class="sxs-lookup"><span data-stu-id="dbd69-166">Each tenant is geo-replicated to the secondary pool (2).</span></span> <span data-ttu-id="dbd69-167">Isso permite a recuperação rápida de todos os bancos de dados do locatário usando o failover.</span><span class="sxs-lookup"><span data-stu-id="dbd69-167">This enables quick recovery of all tenant databases using failover.</span></span> 

<span data-ttu-id="dbd69-168">Se uma interrupção na região primária ocorre, as etapas de recuperação para colocar o aplicativo online estão ilustradas no seguinte diagrama:</span><span class="sxs-lookup"><span data-stu-id="dbd69-168">If an outage occurs in the primary region, the recovery steps to bring your application online are illustrated in the next diagram:</span></span>

![Figura 5](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-5.png)

* <span data-ttu-id="dbd69-170">Faça o failover imediato dos bancos de dados de gerenciamento para a região de DR (3).</span><span class="sxs-lookup"><span data-stu-id="dbd69-170">Immediately fail over the management databases to the DR region (3).</span></span>
* <span data-ttu-id="dbd69-171">Altere a cadeia de conexão do aplicativo para apontar para a região da recuperação de desastres.</span><span class="sxs-lookup"><span data-stu-id="dbd69-171">Change the application’s connection string to point to the DR region.</span></span> <span data-ttu-id="dbd69-172">Agora, todas as novas contas e bancos de dados de locatário são criados na região de DR.</span><span class="sxs-lookup"><span data-stu-id="dbd69-172">Now all new accounts and tenant databases are created in the DR region.</span></span> <span data-ttu-id="dbd69-173">Os clientes de avaliação existentes verão seus dados como temporariamente indisponíveis.</span><span class="sxs-lookup"><span data-stu-id="dbd69-173">The existing trial customers see their data temporarily unavailable.</span></span>
* <span data-ttu-id="dbd69-174">Faça o failover dos bancos de dados de locatários pagantes para o pool na região de DR para restaurar sua disponibilidade imediatamente (4).</span><span class="sxs-lookup"><span data-stu-id="dbd69-174">Fail over the paid tenant's databases to the pool in the DR region to immediately restore their availability (4).</span></span> <span data-ttu-id="dbd69-175">Como o failover é uma alteração rápida no nível dos metadados, você pode considerar uma otimização em que os failovers individuais são disparados sob demanda pelas conexões do usuário final.</span><span class="sxs-lookup"><span data-stu-id="dbd69-175">Since the failover is a quick metadata level change, consider an optimization where the individual failovers are triggered on demand by the end-user connections.</span></span> 
* <span data-ttu-id="dbd69-176">Se o tamanho eDTU do pool secundário era menor do que o primário porque os bancos de dados secundários precisavam apenas da capacidade de processar os logs de alteração enquanto eram secundários, aumente imediatamente a capacidade do pool para acomodar a carga de trabalho completa de todos os locatários (5).</span><span class="sxs-lookup"><span data-stu-id="dbd69-176">If your secondary pool eDTU size was lower than the primary because the secondary databases only required the capacity to process the change logs while they were secondaries, immediately increase the pool capacity now to accommodate the full workload of all tenants (5).</span></span> 
* <span data-ttu-id="dbd69-177">Crie um novo pool elástico com o mesmo nome e a mesma configuração na região da recuperação de desastres para os bancos de dados dos clientes de avaliação (6).</span><span class="sxs-lookup"><span data-stu-id="dbd69-177">Create the new elastic pool with the same name and the same configuration in the DR region for the trial customers' databases (6).</span></span> 
* <span data-ttu-id="dbd69-178">Depois de criar o pool dos clientes de avaliação, use a restauração geográfica para restaurar os bancos de dados de locatário de avaliação individuais no novo pool (7).</span><span class="sxs-lookup"><span data-stu-id="dbd69-178">Once the trial customers’ pool is created, use geo-restore to restore the individual trial tenant databases into the new pool (7).</span></span> <span data-ttu-id="dbd69-179">Você pode cogitar disparar as restaurações individuais pelas conexões do usuário final ou usar outro esquema de prioridade específica do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="dbd69-179">Consider triggering the individual restores by the end-user connections or use some other application-specific priority scheme.</span></span>

<span data-ttu-id="dbd69-180">Neste momento, seu aplicativo está online novamente na região da recuperação de desastres.</span><span class="sxs-lookup"><span data-stu-id="dbd69-180">At this point your application is back online in the DR region.</span></span> <span data-ttu-id="dbd69-181">Todos os clientes pagantes têm acesso aos dados, ao passo que os clientes de avaliação acessarão seus dados com atraso.</span><span class="sxs-lookup"><span data-stu-id="dbd69-181">All paying customers have access to their data while the trial customers experience delay when accessing their data.</span></span>

<span data-ttu-id="dbd69-182">Quando a região primária é recuperada pelo Azure *depois* de você ter restaurado o aplicativo na região da recuperação de desastre, é possível continuar executando o aplicativo nessa região ou optar por fazer o failback para a região primária.</span><span class="sxs-lookup"><span data-stu-id="dbd69-182">When the primary region is recovered by Azure *after* you have restored the application in the DR region you can continue running the application in that region or you can decide to fail back to the primary region.</span></span> <span data-ttu-id="dbd69-183">Se a região primária for recuperada *antes* da conclusão do processo de failover, você deverá considerar fazer o failback imediatamente.</span><span class="sxs-lookup"><span data-stu-id="dbd69-183">If the primary region is recovered *before* the failover process is completed, consider failing back right away.</span></span> <span data-ttu-id="dbd69-184">O failback executará as etapas ilustradas no seguinte diagrama:</span><span class="sxs-lookup"><span data-stu-id="dbd69-184">The failback takes the steps illustrated in the next diagram:</span></span> 

![Figura 6](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-6.png)

* <span data-ttu-id="dbd69-186">Cancele todas as solicitações de restauração geográfica pendentes.</span><span class="sxs-lookup"><span data-stu-id="dbd69-186">Cancel all outstanding geo-restore requests.</span></span>   
* <span data-ttu-id="dbd69-187">Faça o failover dos bancos de dados de gerenciamento (8).</span><span class="sxs-lookup"><span data-stu-id="dbd69-187">Fail over the management databases (8).</span></span> <span data-ttu-id="dbd69-188">Após a recuperação da região, o antigo primário se torna o secundário automaticamente.</span><span class="sxs-lookup"><span data-stu-id="dbd69-188">After the region’s recovery, the old primary automatically become the secondary.</span></span> <span data-ttu-id="dbd69-189">Agora, ele se tornará primário novamente.</span><span class="sxs-lookup"><span data-stu-id="dbd69-189">Now it becomes the primary again.</span></span>  
* <span data-ttu-id="dbd69-190">Faça o failover dos bancos de dados de locatário pagantes (9).</span><span class="sxs-lookup"><span data-stu-id="dbd69-190">Fail over the paid tenant databases (9).</span></span> <span data-ttu-id="dbd69-191">Da mesma forma, após a recuperação da região, os antigos primários se tornaram secundários automaticamente.</span><span class="sxs-lookup"><span data-stu-id="dbd69-191">Similarly, after the region’s recovery, the old primaries automatically become the secondaries.</span></span> <span data-ttu-id="dbd69-192">Agora, eles se tornarão primários novamente.</span><span class="sxs-lookup"><span data-stu-id="dbd69-192">Now they become the primaries again.</span></span> 
* <span data-ttu-id="dbd69-193">Defina os bancos de dados de avaliação restaurados que foram alterados na região da recuperação de desastres como somente leitura (10).</span><span class="sxs-lookup"><span data-stu-id="dbd69-193">Set the restored trial databases that have changed in the DR region to read-only (10).</span></span>
* <span data-ttu-id="dbd69-194">Para cada banco de dados no pool da recuperação de desastres dos clientes de avaliação alterados desde a recuperação, renomeie ou exclua o banco de dados correspondente no pool primário dos clientes de avaliação (11).</span><span class="sxs-lookup"><span data-stu-id="dbd69-194">For each database in the trial customers DR pool that changed since the recovery, rename or delete the corresponding database in the trial customers primary pool (11).</span></span> 
* <span data-ttu-id="dbd69-195">Copie os bancos de dados atualizados do pool da recuperação de desastres para o pool primário (12).</span><span class="sxs-lookup"><span data-stu-id="dbd69-195">Copy the updated databases from the DR pool to the primary pool (12).</span></span> 
* <span data-ttu-id="dbd69-196">Exclua o pool da recuperação de desastres (13).</span><span class="sxs-lookup"><span data-stu-id="dbd69-196">Delete the DR pool (13)</span></span> 

> [!NOTE]
> <span data-ttu-id="dbd69-197">A operação de failover é assíncrona.</span><span class="sxs-lookup"><span data-stu-id="dbd69-197">The failover operation is asynchronous.</span></span> <span data-ttu-id="dbd69-198">Para minimizar o tempo de recuperação, é importante que você execute o comando de failover dos bancos de dados de locatário em lotes de pelo menos 20 bancos de dados.</span><span class="sxs-lookup"><span data-stu-id="dbd69-198">To minimize the recovery time it is important that you execute the tenant databases' failover command in batches of at least 20 databases.</span></span> 
> 
> 

<span data-ttu-id="dbd69-199">A principal **vantagem** dessa estratégia é que ela fornece o SLA mais alto para os clientes pagantes.</span><span class="sxs-lookup"><span data-stu-id="dbd69-199">The key **benefit** of this strategy is that it provides the highest SLA for the paying customers.</span></span> <span data-ttu-id="dbd69-200">Ela também garante que as novas avaliações sejam desbloqueadas assim que o pool da recuperação de desastres de avaliação seja criado.</span><span class="sxs-lookup"><span data-stu-id="dbd69-200">It also guarantees that the new trials are unblocked as soon as the trial DR pool is created.</span></span> <span data-ttu-id="dbd69-201">O **revés** é que essa configuração aumentará o custo total de bancos de dados do locatário pelo custo do pool da DR secundária para clientes pagantes.</span><span class="sxs-lookup"><span data-stu-id="dbd69-201">The **trade-off** is that this setup increases the total cost of the tenant databases by the cost of the secondary DR pool for paid customers.</span></span> <span data-ttu-id="dbd69-202">Além disso, se o pool secundário tiver um tamanho diferente, os clientes pagantes verão um menor desempenho depois do failover até que a atualização de pool na região de DR seja concluída.</span><span class="sxs-lookup"><span data-stu-id="dbd69-202">In addition, if the secondary pool has a different size, the paying customers experience lower performance after failover until the pool upgrade in the DR region is completed.</span></span> 

## <a name="scenario-3-geographically-distributed-application-with-tiered-service"></a><span data-ttu-id="dbd69-203">Cenário 3:</span><span class="sxs-lookup"><span data-stu-id="dbd69-203">Scenario 3.</span></span> <span data-ttu-id="dbd69-204">Aplicativo distribuído geograficamente com o serviço em camadas</span><span class="sxs-lookup"><span data-stu-id="dbd69-204">Geographically distributed application with tiered service</span></span>
<span data-ttu-id="dbd69-205"><i>Eu tenho um aplicativo SaaS evoluído com ofertas de serviço em camadas. Quero oferecer um SLA muito agressivo para meus clientes pagos e minimizar o risco do impacto quando ocorrerem paralisações porque mesmo uma breve interrupção pode causar a insatisfação do cliente. É essencial que os clientes pagantes sempre possam acessar seus dados. As avaliações são gratuitas e não há oferta de SLA durante o período de avaliação. </i></span><span class="sxs-lookup"><span data-stu-id="dbd69-205"><i>I have a mature SaaS application with tiered service offers. I want to offer a very aggressive SLA to my paid customers and minimize the risk of impact when outages occur because even brief interruption can cause customer dissatisfaction. It is critical that the paying customers can always access their data. The trials are free and an SLA is not offered during the trial period. </i></span></span> 

<span data-ttu-id="dbd69-206">Para oferecer suporte a esse cenário, use três pools elásticos separados.</span><span class="sxs-lookup"><span data-stu-id="dbd69-206">To support this scenario, use three separate elastic pools.</span></span> <span data-ttu-id="dbd69-207">Dois pools de tamanhos iguais com eDTUs altos por banco de dados devem ser provisionados em duas regiões diferentes para conter os bancos de dados de locatário dos clientes pagantes.</span><span class="sxs-lookup"><span data-stu-id="dbd69-207">Provision two equal size pools with high eDTUs per database in two different regions to contain the paid customers' tenant databases.</span></span> <span data-ttu-id="dbd69-208">O terceiro pool que contém os locatários de avaliação teria eDTUs menores por banco de dados e seria provisionado em uma das duas regiões.</span><span class="sxs-lookup"><span data-stu-id="dbd69-208">The third pool containing the trial tenants can have lower eDTUs per database and be provisioned in one of the two regions.</span></span>

<span data-ttu-id="dbd69-209">Para garantir o menor tempo de recuperação durante as interrupções, os bancos de dados de locatário de clientes pagantes deverão ser replicados geograficamente com 50% dos bancos de dados primários em cada uma das duas regiões.</span><span class="sxs-lookup"><span data-stu-id="dbd69-209">To guarantee the lowest recovery time during outages, the paying customers' tenant databases are geo-replicated with 50% of the primary databases in each of the two regions.</span></span> <span data-ttu-id="dbd69-210">Da mesma forma, cada região tem 50% dos bancos de dados secundários.</span><span class="sxs-lookup"><span data-stu-id="dbd69-210">Similarly, each region has 50% of the secondary databases.</span></span> <span data-ttu-id="dbd69-211">Dessa forma, se uma região estivesse offline, apenas 50% dos bancos de dados dos clientes pagantes serão afetados e teriam de fazer failover.</span><span class="sxs-lookup"><span data-stu-id="dbd69-211">This way, if a region is offline, only 50% of the paid customers' databases are impacted and have to fail over.</span></span> <span data-ttu-id="dbd69-212">Os outros bancos de dados permanecem intactos.</span><span class="sxs-lookup"><span data-stu-id="dbd69-212">The other databases remain intact.</span></span> <span data-ttu-id="dbd69-213">Essa configuração é ilustrada no diagrama abaixo:</span><span class="sxs-lookup"><span data-stu-id="dbd69-213">This configuration is illustrated in the following diagram:</span></span>

![Figura 4](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-7.png)

<span data-ttu-id="dbd69-215">Como nos cenários anteriores, os bancos de dados de gerenciamento estarão muito ativos e, portanto, você deverá configurá-los como bancos de dados únicos replicados geograficamente (1).</span><span class="sxs-lookup"><span data-stu-id="dbd69-215">As in the previous scenarios, the management databases are quite active so configure them as single geo-replicated databases (1).</span></span> <span data-ttu-id="dbd69-216">Isso garantirá o desempenho previsível para novas assinaturas de clientes, atualizações de perfil e outras operações de gerenciamento.</span><span class="sxs-lookup"><span data-stu-id="dbd69-216">This ensures the predictable performance of the new customer subscriptions, profile updates and other management operations.</span></span> <span data-ttu-id="dbd69-217">A região A é a região primária para os bancos de dados de gerenciamento e a região B é usada para recuperação dos bancos de dados de gerenciamento.</span><span class="sxs-lookup"><span data-stu-id="dbd69-217">Region A is the primary region for the management databases and the region B is used for recovery of the management databases.</span></span>

<span data-ttu-id="dbd69-218">Os bancos de dados de locatário dos clientes pagantes também serão replicados geograficamente, mas com primários e secundários divididos entre a região A e a região B (2).</span><span class="sxs-lookup"><span data-stu-id="dbd69-218">The paying customers’ tenant databases are also geo-replicated but with primaries and secondaries split between region A and region B (2).</span></span> <span data-ttu-id="dbd69-219">Dessa forma, os bancos de dados primários do locatário afetados pela interrupção podem fazer failover para a outra região e ficarem disponíveis.</span><span class="sxs-lookup"><span data-stu-id="dbd69-219">This way, the tenant primary databases impacted by the outage can fail over to the other region and become available.</span></span> <span data-ttu-id="dbd69-220">A outra metade dos bancos de dados de locatário não será afetada.</span><span class="sxs-lookup"><span data-stu-id="dbd69-220">The other half of the tenant databases are not be impacted at all.</span></span> 

<span data-ttu-id="dbd69-221">O diagrama a seguir ilustra as etapas de recuperação em caso de falha na região A.</span><span class="sxs-lookup"><span data-stu-id="dbd69-221">The next diagram illustrates the recovery steps to take if  an outage occurs in region A.</span></span>

![Figura 5](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-8.png)

* <span data-ttu-id="dbd69-223">Faça imediatamente o failover dos bancos de dados de gerenciamento para a região B (3).</span><span class="sxs-lookup"><span data-stu-id="dbd69-223">Immediately fail over the management databases to region B (3).</span></span>
* <span data-ttu-id="dbd69-224">Altere a cadeia de conexão do aplicativo para apontar para os bancos de dados de gerenciamento na região B. Modifique os bancos de dados de gerenciamento para garantir que as novas contas e bancos de dados de locatário sejam criados na região B e que os bancos de dados existentes do inquilino estejam lá também.</span><span class="sxs-lookup"><span data-stu-id="dbd69-224">Change the application’s connection string to point to the management databases in region B. Modify the management databases to make sure the new accounts and tenant databases are created in region B and the existing tenant databases are found there as well.</span></span> <span data-ttu-id="dbd69-225">Os clientes de avaliação existentes verão seus dados como temporariamente indisponíveis.</span><span class="sxs-lookup"><span data-stu-id="dbd69-225">The existing trial customers see their data temporarily unavailable.</span></span>
* <span data-ttu-id="dbd69-226">Faça o failover dos bancos de dados de locatários pagantes para o pool 2 na região B para restaurar imediatamente sua disponibilidade (4).</span><span class="sxs-lookup"><span data-stu-id="dbd69-226">Fail over the paid tenant's databases to pool 2 in region B to immediately restore their availability (4).</span></span> <span data-ttu-id="dbd69-227">Como o failover é uma alteração rápida no nível dos metadados, você pode considerar uma otimização em que os failovers individuais são disparados sob demanda pelas conexões do usuário final.</span><span class="sxs-lookup"><span data-stu-id="dbd69-227">Since the failover is a quick metadata level change, you may consider an optimization where the individual failovers are triggered on demand by the end-user connections.</span></span> 
* <span data-ttu-id="dbd69-228">A partir de agora, o pool 2 conterá apenas bancos de dados primários. A carga de trabalho total no pool aumentará e, portanto, você deverá aumentar seu tamanho do eDTU (5).</span><span class="sxs-lookup"><span data-stu-id="dbd69-228">Since now pool 2 contains only primary databases, the total workload in the pool increases and can immediately increase its eDTU size (5).</span></span> 
* <span data-ttu-id="dbd69-229">Crie um novo pool elástico com o mesmo nome e a mesma configuração na região B para bancos de dados dos clientes de avaliação (6).</span><span class="sxs-lookup"><span data-stu-id="dbd69-229">Create the new elastic pool with the same name and the same configuration in the region B for the trial customers' databases (6).</span></span> 
* <span data-ttu-id="dbd69-230">Depois de criar o pool, use a restauração geográfica para restaurar os bancos de dados de locatário de avaliação individuais no pool (7).</span><span class="sxs-lookup"><span data-stu-id="dbd69-230">Once the pool is created use geo-restore to restore the individual trial tenant database into the pool (7).</span></span> <span data-ttu-id="dbd69-231">Você pode cogitar disparar as restaurações individuais pelas conexões do usuário final ou usar outro esquema de prioridade específica do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="dbd69-231">You can consider triggering the individual restores by the end-user connections or use some other application-specific priority scheme.</span></span>

> [!NOTE]
> <span data-ttu-id="dbd69-232">A operação de failover é assíncrona.</span><span class="sxs-lookup"><span data-stu-id="dbd69-232">The failover operation is asynchronous.</span></span> <span data-ttu-id="dbd69-233">Para minimizar o tempo de recuperação, é importante que você execute o comando de failover dos bancos de dados de locatário em lotes de pelo menos 20 bancos de dados.</span><span class="sxs-lookup"><span data-stu-id="dbd69-233">To minimize the recovery time, it is important that you execute the tenant databases' failover command in batches of at least 20 databases.</span></span> 
> 

<span data-ttu-id="dbd69-234">Neste ponto, seu aplicativo está novamente online na região B. Todos os clientes pagantes terão acesso aos dados, ao passo que os clientes de avaliação acessarão seus dados com atraso.</span><span class="sxs-lookup"><span data-stu-id="dbd69-234">At this point your application is back online in region B. All paying customers have access to their data while the trial customers experience delay when accessing their data.</span></span>

<span data-ttu-id="dbd69-235">Quando a região A for recuperada, você precisará decidir se deseja usar a região B para clientes de avaliação ou fazer o failback usando o pool de clientes de avaliação na região A. Um critério poderia ser a % dos bancos de dados de locatário de avaliação modificados desde a recuperação.</span><span class="sxs-lookup"><span data-stu-id="dbd69-235">When region A is recovered you need to decide if you want to use region B for trial customers or failback to using the trial customers pool in region A. One criteria could be the % of trial tenant databases modified since the recovery.</span></span> <span data-ttu-id="dbd69-236">Independentemente dessa decisão, você precisará balancear novamente os locatários pagantes entre dois pools.</span><span class="sxs-lookup"><span data-stu-id="dbd69-236">Regardless of that decision, you need to re-balance the paid tenants between two pools.</span></span> <span data-ttu-id="dbd69-237">O próximo diagrama ilustra o processo quando os bancos de dados de locatário fazem failback para a região A.</span><span class="sxs-lookup"><span data-stu-id="dbd69-237">the next diagram illustrates the process when the trial tenant databases fail back to region A.</span></span>  

![Figura 6](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-9.png)

* <span data-ttu-id="dbd69-239">Cancele todas as solicitações de restauração geográfica pendentes para o pool da recuperação de desastres de avaliação.</span><span class="sxs-lookup"><span data-stu-id="dbd69-239">Cancel all outstanding geo-restore requests to trial DR pool.</span></span>   
* <span data-ttu-id="dbd69-240">Faça o failover do banco de dados de gerenciamento (8).</span><span class="sxs-lookup"><span data-stu-id="dbd69-240">Fail over the management database (8).</span></span> <span data-ttu-id="dbd69-241">Após a recuperação da região, o antigo primário se torna secundário automaticamente.</span><span class="sxs-lookup"><span data-stu-id="dbd69-241">After the region’s recovery, the old primary automatically became the secondary.</span></span> <span data-ttu-id="dbd69-242">Agora, ele se tornará primário novamente.</span><span class="sxs-lookup"><span data-stu-id="dbd69-242">Now it becomes the primary again.</span></span>  
* <span data-ttu-id="dbd69-243">Escolha quais bancos de dados de locatário pagantes farão failback para o pool 1 e iniciarão o failover para seus secundários (9).</span><span class="sxs-lookup"><span data-stu-id="dbd69-243">Select which paid tenant databases fail back to pool 1 and initiate failover to their secondaries (9).</span></span> <span data-ttu-id="dbd69-244">Após a recuperação da região, todos os bancos de dados no pool 1 se tornam secundários automaticamente.</span><span class="sxs-lookup"><span data-stu-id="dbd69-244">After the region’s recovery, all databases in pool 1 automatically became secondaries.</span></span> <span data-ttu-id="dbd69-245">Agora, 50% deles se tornarão primários novamente.</span><span class="sxs-lookup"><span data-stu-id="dbd69-245">Now 50% of them become primaries again.</span></span> 
* <span data-ttu-id="dbd69-246">Reduza o tamanho do pool 2 para o eDTU original (10).</span><span class="sxs-lookup"><span data-stu-id="dbd69-246">Reduce the size of pool 2 to the original eDTU (10).</span></span>
* <span data-ttu-id="dbd69-247">Defina todos os bancos de dados de avaliação na região B como somente leitura (11).</span><span class="sxs-lookup"><span data-stu-id="dbd69-247">Set all restored trial databases in the region B to read-only (11).</span></span>
* <span data-ttu-id="dbd69-248">Para cada banco de dados no pool da DR de avaliação que foi alterado desde a recuperação, renomeie ou exclua os bancos de dados correspondentes no pool primário de avaliação (12).</span><span class="sxs-lookup"><span data-stu-id="dbd69-248">For each database in the trial DR pool that has changed since the recovery, rename or delete the corresponding database in the trial primary pool (12).</span></span> 
* <span data-ttu-id="dbd69-249">Copie os bancos de dados atualizados do pool da recuperação de desastres para o pool primário (13).</span><span class="sxs-lookup"><span data-stu-id="dbd69-249">Copy the updated databases from the DR pool to the primary pool (13).</span></span> 
* <span data-ttu-id="dbd69-250">Excluir o pool da recuperação de desastres (14)</span><span class="sxs-lookup"><span data-stu-id="dbd69-250">Delete the DR pool (14)</span></span> 

<span data-ttu-id="dbd69-251">As principais **vantagens** dessa estratégia são:</span><span class="sxs-lookup"><span data-stu-id="dbd69-251">The key **benefits** of this strategy are:</span></span>

* <span data-ttu-id="dbd69-252">Ela dá suporte ao SLA mais agressivo para os clientes pagantes porque faz com que uma interrupção não possa afetar mais de 50% dos bancos de dados de locatário.</span><span class="sxs-lookup"><span data-stu-id="dbd69-252">It supports the most aggressive SLA for the paying customers because it ensures that an outage cannot impact more than 50% of the tenant databases.</span></span> 
* <span data-ttu-id="dbd69-253">Ela faz com que as novas avaliações sejam desbloqueadas assim que a trilha do pool da recuperação de desastres for criada durante a recuperação.</span><span class="sxs-lookup"><span data-stu-id="dbd69-253">It guarantees that the new trials are unblocked as soon as the trail DR pool is created during the recovery.</span></span> 
* <span data-ttu-id="dbd69-254">Ela permite um uso mais eficiente da capacidade do pool, já que 50% dos bancos de dados secundários nos pools 1 e 2 são garantidamente menos ativos que os bancos de dados primários.</span><span class="sxs-lookup"><span data-stu-id="dbd69-254">It allows more efficient use of the pool capacity as 50% of secondary databases in pool 1 and pool 2 are guaranteed to be less active than the primary databases.</span></span>

<span data-ttu-id="dbd69-255">Os principais **poréns** são:</span><span class="sxs-lookup"><span data-stu-id="dbd69-255">The main **trade-offs** are:</span></span>

* <span data-ttu-id="dbd69-256">As operações CRUD em relação aos bancos de dados de gerenciamento terão menor latência para os usuários finais conectados à região A que para os usuários finais conectados à região B, já que elas serão executadas em relação ao primário dos bancos de dados de gerenciamento.</span><span class="sxs-lookup"><span data-stu-id="dbd69-256">The CRUD operations against the management databases have lower latency for the end users connected to region A than for the end users connected to region B as they are executed against the primary of the management databases.</span></span>
* <span data-ttu-id="dbd69-257">Ele requer um design mais complexo do banco de dados de gerenciamento.</span><span class="sxs-lookup"><span data-stu-id="dbd69-257">It requires more complex design of the management database.</span></span> <span data-ttu-id="dbd69-258">Por exemplo, cada registro de locatário precisa ter um rótulo de local que tem que ser alterado durante o failover e o failback.</span><span class="sxs-lookup"><span data-stu-id="dbd69-258">For example, each tenant record has a location tag that needs to be changed during failover and failback.</span></span>  
* <span data-ttu-id="dbd69-259">Os clientes pagantes podem sentir um desempenho menor que o normal até que a atualização do pool na região B seja concluída.</span><span class="sxs-lookup"><span data-stu-id="dbd69-259">The paying customers may experience lower performance than usual until the pool upgrade in region B is completed.</span></span> 

## <a name="summary"></a><span data-ttu-id="dbd69-260">Resumo</span><span class="sxs-lookup"><span data-stu-id="dbd69-260">Summary</span></span>
<span data-ttu-id="dbd69-261">Este artigo aborda as estratégias de recuperação de desastres para a camada de banco de dados usada por um aplicativo ISV SaaS multilocatário.</span><span class="sxs-lookup"><span data-stu-id="dbd69-261">This article focuses on the disaster recovery strategies for the database tier used by a SaaS ISV multi-tenant application.</span></span> <span data-ttu-id="dbd69-262">A escolha da estratégia deve ser baseada nas necessidades do aplicativo, como o modelo de negócios, o SLA que você deseja oferecer aos seus clientes, restrições orçamentárias etc. Cada estratégia descrita descreve as vantagens e os poréns para que você possa tomar uma decisão consciente.</span><span class="sxs-lookup"><span data-stu-id="dbd69-262">The strategy you choose is based on the needs of the application, such as the business model, the SLA you want to offer to your customers, budget constraint etc. Each described strategy outlines the benefits and trade-off so you could make an informed decision.</span></span> <span data-ttu-id="dbd69-263">Além disso, seu aplicativo específico provavelmente incluirá outros componentes do Azure.</span><span class="sxs-lookup"><span data-stu-id="dbd69-263">Also, your specific application likely includes other Azure components.</span></span> <span data-ttu-id="dbd69-264">Sendo assim, você deve examinar suas diretrizes de continuidade de negócios e coordenar com elas a recuperação da camada de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="dbd69-264">So you review their business continuity guidance and orchestrate the recovery of the database tier with them.</span></span> <span data-ttu-id="dbd69-265">Para saber mais sobre o gerenciamento da recuperação de aplicativos de banco de dados no Azure, confira [Como criar soluções de nuvem para recuperação de desastres](sql-database-designing-cloud-solutions-for-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="dbd69-265">To learn more about managing recovery of database applications in Azure, refer to [Designing cloud solutions for disaster recovery](sql-database-designing-cloud-solutions-for-disaster-recovery.md).</span></span>  

## <a name="next-steps"></a><span data-ttu-id="dbd69-266">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="dbd69-266">Next steps</span></span>
* <span data-ttu-id="dbd69-267">Para saber mais sobre backups automatizados do Banco de Dados SQL do Azure, confira [Backups automatizados do Banco de Dados SQL](sql-database-automated-backups.md).</span><span class="sxs-lookup"><span data-stu-id="dbd69-267">To learn about Azure SQL Database automated backups, see [SQL Database automated backups](sql-database-automated-backups.md).</span></span>
* <span data-ttu-id="dbd69-268">Para obter uma visão geral e os cenários de continuidade dos negócios, consulte [Visão geral da continuidade dos negócios](sql-database-business-continuity.md).</span><span class="sxs-lookup"><span data-stu-id="dbd69-268">For a business continuity overview and scenarios, see [Business continuity overview](sql-database-business-continuity.md).</span></span>
* <span data-ttu-id="dbd69-269">Para saber mais sobre como usar backups automatizados para recuperação, consulte [Restaurar um banco de dados de backups iniciados pelo serviço](sql-database-recovery-using-backups.md).</span><span class="sxs-lookup"><span data-stu-id="dbd69-269">To learn about using automated backups for recovery, see [restore a database from the service-initiated backups](sql-database-recovery-using-backups.md).</span></span>
* <span data-ttu-id="dbd69-270">Para saber mais sobre opções de recuperação mais rápidas, confira [Replicação Geográfica ativa](sql-database-geo-replication-overview.md).</span><span class="sxs-lookup"><span data-stu-id="dbd69-270">To learn about faster recovery options, see [active geo-replication](sql-database-geo-replication-overview.md).</span></span>
* <span data-ttu-id="dbd69-271">Para saber mais sobre como usar backups automatizados para arquivamento, confira [Cópia de banco de dados](sql-database-copy.md).</span><span class="sxs-lookup"><span data-stu-id="dbd69-271">To learn about using automated backups for archiving, see [database copy](sql-database-copy.md).</span></span>

