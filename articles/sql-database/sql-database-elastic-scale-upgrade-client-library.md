---
title: "biblioteca de cliente de banco de dados Elástico mais recente do aaaUpgrade toohello | Microsoft Docs"
description: Atualizar aplicativos e bibliotecas usando o Nuget
services: sql-database
documentationcenter: 
manager: jhubbard
author: ddove
ms.assetid: 0a546510-76e7-465e-9271-f15ff0cfa959
ms.service: sql-database
ms.custom: scale out apps
ms.workload: sql-database
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/06/2017
ms.author: ddove
ms.openlocfilehash: cc2c9179be4c53ca59cd24d832127cf277c6e695
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="upgrade-an-app-toouse-hello-latest-elastic-database-client-library"></a><span data-ttu-id="4bcaa-103">Atualizar uma aplicativo toouse hello mais recente Elástico de banco de dados biblioteca de cliente</span><span class="sxs-lookup"><span data-stu-id="4bcaa-103">Upgrade an app toouse hello latest elastic database client library</span></span>
<span data-ttu-id="4bcaa-104">Novas versões do hello [biblioteca de cliente do banco de dados Elástico](sql-database-elastic-database-client-library.md) estão disponíveis por meio da interface do Gerenciador de NuGetPackage de saudação NuGetand no Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="4bcaa-104">New versions of hello [Elastic Database client library](sql-database-elastic-database-client-library.md) are  available through NuGetand hello NuGetPackage Manager interface in Visual Studio.</span></span> <span data-ttu-id="4bcaa-105">Atualizações contêm correções de bugs e suportam para novos recursos de biblioteca de saudação do cliente.</span><span class="sxs-lookup"><span data-stu-id="4bcaa-105">Upgrades contain bug fixes and support for new capabilities of hello client library.</span></span>

<span data-ttu-id="4bcaa-106">**Para a versão mais recente do hello:** ir muito[Microsoft.Azure.SqlDatabase.ElasticScale.Client](https://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Client/).</span><span class="sxs-lookup"><span data-stu-id="4bcaa-106">**For hello latest version:** Go too[Microsoft.Azure.SqlDatabase.ElasticScale.Client](https://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Client/).</span></span>

<span data-ttu-id="4bcaa-107">Recrie seu aplicativo com a nova biblioteca de hello, bem como alterar seus metadados do Gerenciador do mapa de fragmentos existentes armazenados em seus novos recursos de bancos de dados do Azure SQL toosupport.</span><span class="sxs-lookup"><span data-stu-id="4bcaa-107">Rebuild your application with hello new library, as well as change your existing Shard Map Manager metadata stored in your Azure SQL Databases toosupport new features.</span></span>

<span data-ttu-id="4bcaa-108">Executar essas etapas na ordem garante que versões antigas de biblioteca de saudação do cliente não estão mais presentes no seu ambiente quando objetos de metadados são atualizados, que significa que os objetos de metadados de versão antiga não serão criados após a atualização.</span><span class="sxs-lookup"><span data-stu-id="4bcaa-108">Performing these steps in order ensures that old versions of hello client library are no longer present in your environment when metadata objects are updated, which means that old-version metadata objects won’t be created after upgrade.</span></span>   

## <a name="upgrade-steps"></a><span data-ttu-id="4bcaa-109">Etapas de atualização</span><span class="sxs-lookup"><span data-stu-id="4bcaa-109">Upgrade steps</span></span>
<span data-ttu-id="4bcaa-110">**1. Atualize seus aplicativos.**</span><span class="sxs-lookup"><span data-stu-id="4bcaa-110">**1. Upgrade your applications.**</span></span> <span data-ttu-id="4bcaa-111">No Visual Studio, download e referência Olá versão mais recente cliente biblioteca em todos os seus projetos de desenvolvimento que usam a biblioteca de saudação; em seguida, recriar e implantar.</span><span class="sxs-lookup"><span data-stu-id="4bcaa-111">In Visual Studio, download and reference hello latest client library version into all of your development projects that use hello library; then rebuild and deploy.</span></span> 

* <span data-ttu-id="4bcaa-112">Em sua solução do Visual Studio, selecione **Ferramentas** --> **NuGet Package Manager** -->  **Gerenciar pacotes NuGet para solução**.</span><span class="sxs-lookup"><span data-stu-id="4bcaa-112">In your Visual Studio solution, select **Tools** --> **NuGet Package Manager** -->  **Manage NuGet Packages for Solution**.</span></span> 
* <span data-ttu-id="4bcaa-113">(Visual Studio 2013) No painel esquerdo do hello, selecione **atualizações**e, em seguida, selecione Olá **atualização** botão no pacote de saudação **biblioteca de cliente do Azure SQL banco de dados Elástico escala** que aparece na Olá janela.</span><span class="sxs-lookup"><span data-stu-id="4bcaa-113">(Visual Studio 2013) In hello left panel, select **Updates**, and then select hello **Update** button on hello package **Azure SQL Database Elastic Scale Client Library** that appears in hello window.</span></span>
* <span data-ttu-id="4bcaa-114">(Visual Studio 2015) Defina a caixa de filtro de saudação muito**atualização disponível**.</span><span class="sxs-lookup"><span data-stu-id="4bcaa-114">(Visual Studio 2015) Set hello Filter box too**Upgrade available**.</span></span> <span data-ttu-id="4bcaa-115">Selecione Olá tooupdate de pacote e, em seguida, clique em Olá **atualização** botão.</span><span class="sxs-lookup"><span data-stu-id="4bcaa-115">Select hello package tooupdate, and click hello **Update** button.</span></span>
* <span data-ttu-id="4bcaa-116">(2017 do visual Studio) Na parte superior de saudação da caixa de diálogo hello, selecione **atualizações**.</span><span class="sxs-lookup"><span data-stu-id="4bcaa-116">(Visual Studio 2017) At hello top of hello dialog, select **Updates**.</span></span> <span data-ttu-id="4bcaa-117">Selecione Olá tooupdate de pacote e, em seguida, clique em Olá **atualização** botão.</span><span class="sxs-lookup"><span data-stu-id="4bcaa-117">Select hello package tooupdate, and click hello **Update** button.</span></span>
* <span data-ttu-id="4bcaa-118">Criar e implantar.</span><span class="sxs-lookup"><span data-stu-id="4bcaa-118">Build and Deploy.</span></span> 

<span data-ttu-id="4bcaa-119">**2. Atualize seus scripts.**</span><span class="sxs-lookup"><span data-stu-id="4bcaa-119">**2. Upgrade your scripts.**</span></span> <span data-ttu-id="4bcaa-120">Se você estiver usando **PowerShell** scripts toomanage fragmentos, [baixar a nova versão da biblioteca Olá](https://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Client/) e copie-o no diretório de saudação do qual você pode executar scripts.</span><span class="sxs-lookup"><span data-stu-id="4bcaa-120">If you are using **PowerShell** scripts toomanage shards, [download hello new library version](https://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Client/) and copy it into hello directory from which you execute scripts.</span></span> 

<span data-ttu-id="4bcaa-121">**3. Atualize o seu serviço de mesclagem de divisão.**</span><span class="sxs-lookup"><span data-stu-id="4bcaa-121">**3. Upgrade your split-merge service.**</span></span> <span data-ttu-id="4bcaa-122">Se você usar o hello banco de dados Elástico ferramenta de mesclagem de divisão tooreorganize dados fragmentados, [baixar e implantar Olá a versão mais recente da ferramenta Olá](https://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Service.SplitMerge/).</span><span class="sxs-lookup"><span data-stu-id="4bcaa-122">If you use hello elastic database split-merge tool tooreorganize sharded data, [download and deploy hello latest version of hello tool](https://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Service.SplitMerge/).</span></span> <span data-ttu-id="4bcaa-123">Atualização etapas detalhadas para Olá serviço pode ser encontrado [aqui](sql-database-elastic-scale-overview-split-and-merge.md).</span><span class="sxs-lookup"><span data-stu-id="4bcaa-123">Detailed upgrade steps for hello Service can be found [here](sql-database-elastic-scale-overview-split-and-merge.md).</span></span> 

<span data-ttu-id="4bcaa-124">**4. Atualizar seus bancos de dados do Gerenciador do Mapa de Fragmentos**.</span><span class="sxs-lookup"><span data-stu-id="4bcaa-124">**4. Upgrade your Shard Map Manager databases**.</span></span> <span data-ttu-id="4bcaa-125">Atualize os metadados de saudação seus mapas de fragmento de suporte no banco de dados do SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="4bcaa-125">Upgrade hello metadata supporting your Shard Maps in Azure SQL Database.</span></span>  <span data-ttu-id="4bcaa-126">Há duas maneiras que você pode fazer isso, usando o PowerShell ou C#.</span><span class="sxs-lookup"><span data-stu-id="4bcaa-126">There are two ways you can accomplish this, using PowerShell or C#.</span></span> <span data-ttu-id="4bcaa-127">Ambas as opções são mostradas abaixo.</span><span class="sxs-lookup"><span data-stu-id="4bcaa-127">Both options are shown below.</span></span>

<span data-ttu-id="4bcaa-128">***Opção 1: Atualizar os metadados usando o PowerShell***</span><span class="sxs-lookup"><span data-stu-id="4bcaa-128">***Option 1: Upgrade metadata using PowerShell***</span></span>

1. <span data-ttu-id="4bcaa-129">Baixar o utilitário de linha de comando mais recente Olá para NuGet do [aqui](http://nuget.org/nuget.exe) e salve a pasta de tooa.</span><span class="sxs-lookup"><span data-stu-id="4bcaa-129">Download hello latest command-line utility for NuGet from [here](http://nuget.org/nuget.exe) and save tooa folder.</span></span> 
2. <span data-ttu-id="4bcaa-130">Abra um Prompt de comando, navegue toohello mesma pasta e o comando de saudação do problema:`nuget install Microsoft.Azure.SqlDatabase.ElasticScale.Client`</span><span class="sxs-lookup"><span data-stu-id="4bcaa-130">Open a Command Prompt, navigate toohello same folder, and issue hello command: `nuget install Microsoft.Azure.SqlDatabase.ElasticScale.Client`</span></span>
3. <span data-ttu-id="4bcaa-131">Navegue até a subpasta toohello contendo Olá nova DLL versão do cliente que apenas baixar, por exemplo:`cd .\Microsoft.Azure.SqlDatabase.ElasticScale.Client.1.0.0\lib\net45`</span><span class="sxs-lookup"><span data-stu-id="4bcaa-131">Navigate toohello subfolder containing hello new client DLL version you have just downloaded, for example: `cd .\Microsoft.Azure.SqlDatabase.ElasticScale.Client.1.0.0\lib\net45`</span></span>
4. <span data-ttu-id="4bcaa-132">Baixar o miniscript atualização do cliente Olá Elástico de banco de dados de saudação [Script Center](https://gallery.technet.microsoft.com/scriptcenter/Azure-SQL-Database-Elastic-6442e6a9), e salve-o em hello na mesma pasta que contém Olá DLL.</span><span class="sxs-lookup"><span data-stu-id="4bcaa-132">Download hello elastic database client upgrade scriptlet from hello [Script Center](https://gallery.technet.microsoft.com/scriptcenter/Azure-SQL-Database-Elastic-6442e6a9), and save it into hello same folder containing hello DLL.</span></span>
5. <span data-ttu-id="4bcaa-133">Nessa pasta, execute ".\upgrade.ps1 PowerShell" no prompt de comando do hello e siga os prompts de saudação.</span><span class="sxs-lookup"><span data-stu-id="4bcaa-133">From that folder, run “PowerShell .\upgrade.ps1” from hello command prompt and follow hello prompts.</span></span>

<span data-ttu-id="4bcaa-134">***Opção 2: Atualizar os metadados usando C#***</span><span class="sxs-lookup"><span data-stu-id="4bcaa-134">***Option 2: Upgrade metadata using C#***</span></span>

<span data-ttu-id="4bcaa-135">Como alternativa, criar um aplicativo do Visual Studio que abre sua ShardMapManager, itera em todos os fragmentos e executa a atualização de metadados de saudação chamando métodos Olá [UpgradeLocalStore](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanager.upgradelocalstore.aspx) e [ UpgradeGlobalStore](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanager.upgradeglobalstore.aspx) como neste exemplo:</span><span class="sxs-lookup"><span data-stu-id="4bcaa-135">Alternatively, create a Visual Studio application that opens your ShardMapManager, iterates over all shards, and performs hello metadata upgrade by calling hello methods [UpgradeLocalStore](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanager.upgradelocalstore.aspx) and [UpgradeGlobalStore](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanager.upgradeglobalstore.aspx) as in this example:</span></span> 

    ShardMapManager smm =
       ShardMapManagerFactory.GetSqlShardMapManager
       (connStr, ShardMapManagerLoadPolicy.Lazy); 
    smm.UpgradeGlobalStore(); 

    foreach (ShardLocation loc in
     smm.GetDistinctShardLocations()) 
    {   
       smm.UpgradeLocalStore(loc); 
    } 

<span data-ttu-id="4bcaa-136">Essas técnicas para atualizações de metadados podem ser aplicadas várias vezes sem danos.</span><span class="sxs-lookup"><span data-stu-id="4bcaa-136">These techniques for metadata upgrades can be applied multiple times without harm.</span></span> <span data-ttu-id="4bcaa-137">Por exemplo, se uma versão mais antiga do cliente cria inadvertidamente um fragmento depois que você atualizou, você pode executar atualização novamente em todos os tooensure de fragmentos que Olá versão mais recente de metadados está presente em toda a infraestrutura.</span><span class="sxs-lookup"><span data-stu-id="4bcaa-137">For example, if an older client version inadvertently creates a shard after you have already updated, you can run upgrade again across all shards tooensure that hello latest metadata version is present throughout your infrastructure.</span></span> 

<span data-ttu-id="4bcaa-138">**Observação:** a data de publicação de novas versões da biblioteca de cliente Olá continuar toowork com versões anteriores do hello Gerenciador do mapa de fragmentos metadados no banco de dados de SQL do Azure e vice-versa.</span><span class="sxs-lookup"><span data-stu-id="4bcaa-138">**Note:**  New versions of hello client library published to-date continue toowork with prior versions of hello Shard Map Manager metadata on Azure SQL DB, and vice-versa.</span></span>   <span data-ttu-id="4bcaa-139">No entanto tootake vantagem de alguns dos novos recursos de saudação do cliente mais recente hello, metadados precisa toobe atualizado.</span><span class="sxs-lookup"><span data-stu-id="4bcaa-139">However tootake advantage of some of hello new features in hello latest client, metadata needs toobe upgraded.</span></span>   <span data-ttu-id="4bcaa-140">Observe que as atualizações de metadados não afetará quaisquer dados de usuário ou dados específicos do aplicativo, somente os objetos criados e usados por Olá Gerenciador do mapa de fragmentos.</span><span class="sxs-lookup"><span data-stu-id="4bcaa-140">Note that metadata upgrades will not affect any user-data or application-specific data, only objects created and used by hello Shard Map Manager.</span></span>  <span data-ttu-id="4bcaa-141">E os aplicativos continuam toooperate por meio de sequência de atualização Olá descrita acima.</span><span class="sxs-lookup"><span data-stu-id="4bcaa-141">And applications continue toooperate through hello upgrade sequence described above.</span></span> 

## <a name="elastic-database-client-version-history"></a><span data-ttu-id="4bcaa-142">O histórico de versões de cliente do banco de dados elástico</span><span class="sxs-lookup"><span data-stu-id="4bcaa-142">Elastic database client version history</span></span>
<span data-ttu-id="4bcaa-143">Para o histórico de versão, vá muito[Microsoft.Azure.SqlDatabase.ElasticScale.Client](https://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Client/)</span><span class="sxs-lookup"><span data-stu-id="4bcaa-143">For version history, go too[Microsoft.Azure.SqlDatabase.ElasticScale.Client](https://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Client/)</span></span>

[!INCLUDE [elastic-scale-include](../../includes/elastic-scale-include.md)]

<!--Image references-->
[1]:./media/sql-database-elastic-scale-upgrade-client-library/nuget-upgrade.png

