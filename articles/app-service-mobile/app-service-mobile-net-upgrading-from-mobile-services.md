---
title: "aaaUpgrade de tooAzure de serviços móveis do serviço de aplicativo"
description: "Saiba como tooeasily atualizar seu aplicativo de serviços móveis tooan aplicativo móvel do serviço de aplicativo"
services: app-service\mobile
documentationcenter: 
author: ggailey777
manager: syntaxc4
editor: 
ms.assetid: 9c0ac353-afb6-462b-ab94-d91b8247322f
ms.service: app-service-mobile
ms.workload: mobile
ms.tgt_pltfrm: mobile
ms.devlang: dotnet
ms.topic: article
ms.date: 10/01/2016
ms.author: glenga
ms.openlocfilehash: 2b75a1b824e8ef0d36c9053f2f19af051479f928
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="upgrade-your-existing-net-azure-mobile-service-tooapp-service"></a><span data-ttu-id="b8f7a-103">Atualizar seu tooApp existente de serviço do .NET do Azure Mobile Service</span><span class="sxs-lookup"><span data-stu-id="b8f7a-103">Upgrade your existing .NET Azure Mobile Service tooApp Service</span></span>
<span data-ttu-id="b8f7a-104">Serviço de aplicativo móvel é uma nova maneira toobuild aplicativos móveis usando o Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-104">App Service Mobile is a new way toobuild mobile applications using Microsoft Azure.</span></span> <span data-ttu-id="b8f7a-105">mais, consulte toolearn [quais são os aplicativos móveis?].</span><span class="sxs-lookup"><span data-stu-id="b8f7a-105">toolearn more, see [What are Mobile Apps?].</span></span>

<span data-ttu-id="b8f7a-106">Este tópico descreve como tooupgrade um aplicativo de back-end .NET de serviços móveis do Azure tooa novos aplicativos do aplicativo serviços móveis.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-106">This topic describes how tooupgrade an existing .NET backend application from Azure Mobile Services tooa new App Service Mobile Apps.</span></span> <span data-ttu-id="b8f7a-107">Enquanto você executa esta atualização, o seu aplicativo de serviços móveis pode continuar toooperate.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-107">While you perform this upgrade, your existing Mobile Services application can continue toooperate.</span></span>   <span data-ttu-id="b8f7a-108">Se você precisar tooupgrade um aplicativo de back-end node. js, consulte muito[atualizando seus serviços móveis de Node. js](app-service-mobile-node-backend-upgrading-from-mobile-services.md).</span><span class="sxs-lookup"><span data-stu-id="b8f7a-108">If you need tooupgrade a Node.js backend application, refer too[Upgrading your Node.js Mobile Services](app-service-mobile-node-backend-upgrading-from-mobile-services.md).</span></span>

<span data-ttu-id="b8f7a-109">Quando um back-end móvel é atualizado tooAzure do serviço de aplicativo, ele tem acesso tooall recursos de serviço de aplicativo e são cobradas de acordo com muito[preços do serviço de aplicativo], não os serviços móveis de preços.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-109">When a mobile backend is upgraded tooAzure App Service, it has access tooall App Service features and are billed according too[App Service pricing], not Mobile Services pricing.</span></span>

## <a name="migrate-vs-upgrade"></a><span data-ttu-id="b8f7a-110">Migração vs. atualização</span><span class="sxs-lookup"><span data-stu-id="b8f7a-110">Migrate vs. upgrade</span></span>
[!INCLUDE [app-service-mobile-migrate-vs-upgrade](../../includes/app-service-mobile-migrate-vs-upgrade.md)]

> [!TIP]
> <span data-ttu-id="b8f7a-111">Recomendamos a [execução de uma migração](app-service-mobile-migrating-from-mobile-services.md) antes de executar uma atualização.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-111">It is recommended that you [perform a migration](app-service-mobile-migrating-from-mobile-services.md) before going through an upgrade.</span></span> <span data-ttu-id="b8f7a-112">Dessa forma, você pode colocar as duas versões do seu aplicativo hello mesmo plano de serviço de aplicativo e incorrer em nenhum custo adicional.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-112">This way, you can put both versions of your application on hello same App Service Plan and incur no additional cost.</span></span>
>
>

### <a name="improvements-in-mobile-apps-net-server-sdk"></a><span data-ttu-id="b8f7a-113">Aprimoramentos no SDK do servidor .NET de aplicativos móveis</span><span class="sxs-lookup"><span data-stu-id="b8f7a-113">Improvements in Mobile Apps .NET server SDK</span></span>
<span data-ttu-id="b8f7a-114">Atualizando toohello novo [SDK de aplicativos móveis](https://www.nuget.org/packages/Microsoft.Azure.Mobile.Server/) fornece Olá benefícios a seguir:</span><span class="sxs-lookup"><span data-stu-id="b8f7a-114">Upgrading toohello new [Mobile Apps SDK](https://www.nuget.org/packages/Microsoft.Azure.Mobile.Server/) provides hello following benefits:</span></span>

* <span data-ttu-id="b8f7a-115">Mais flexibilidade em dependências do NuGet.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-115">More flexibility on NuGet dependencies.</span></span> <span data-ttu-id="b8f7a-116">Olá ambiente de hospedagem não fornece suas próprias versões dos pacotes do NuGet, então você pode usar versões compatíveis alternativas.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-116">hello hosting environment no longer provides its own versions of NuGet packages, so you can use alternative compatible versions.</span></span> <span data-ttu-id="b8f7a-117">No entanto, se houver novas bugfixes crítico ou toohello de atualizações de segurança móvel servidor SDK ou dependências, você deve atualizar manualmente seu serviço.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-117">However, if there are new critical bugfixes or security updates toohello Mobile Server SDK or dependencies, you must update your service manually.</span></span>
* <span data-ttu-id="b8f7a-118">Mais flexibilidade no hello SDK móvel.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-118">More flexibility in hello mobile SDK.</span></span> <span data-ttu-id="b8f7a-119">Explicitamente, você pode controlar quais recursos e rotas são configuradas, como autenticação, tabela APIs e Olá ponto de extremidade de registro de envio por push.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-119">You can explicitly control which features and routes are set up, such as authentication, table APIs, and hello push registration endpoint.</span></span> <span data-ttu-id="b8f7a-120">mais, consulte toolearn [como toouse Olá SDK do servidor do .NET para aplicativos móveis do Azure](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md).</span><span class="sxs-lookup"><span data-stu-id="b8f7a-120">toolearn more, see [How toouse hello .NET server SDK for Azure Mobile Apps](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md).</span></span>
* <span data-ttu-id="b8f7a-121">Suporte para outros tipos de projeto do ASP.NET e rotas.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-121">Support for other ASP.NET project types and routes.</span></span> <span data-ttu-id="b8f7a-122">Agora você pode hospedar controladores MVC e a API da Web no mesmo projeto de saudação do seu projeto móvel de back-end.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-122">You can now host MVC and Web API controllers in hello same project as your mobile backend project.</span></span>
* <span data-ttu-id="b8f7a-123">Suporte para novos recursos de autenticação do serviço de aplicativo, que permite que você toouse uma configuração de autenticação comum em seus aplicativos web e móveis.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-123">Support for new App Service authentication features, which allow you toouse a common authentication configuration across your web and mobile apps.</span></span>

## <span data-ttu-id="b8f7a-124"><a name="overview"></a>Visão geral da atualização básica</span><span class="sxs-lookup"><span data-stu-id="b8f7a-124"><a name="overview"></a>Basic upgrade overview</span></span>
<span data-ttu-id="b8f7a-125">Em muitos casos, a atualização será ser tão simple quanto alternar o servidor de aplicativos móveis novo toohello SDK e republicar seu código em uma nova instância de aplicativo móvel.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-125">In many cases, upgrading will be as simple as switching toohello new Mobile Apps server SDK and republishing your code onto a new Mobile App instance.</span></span> <span data-ttu-id="b8f7a-126">Há, no entanto, alguns cenários que exigem alguma configuração adicional, como cenários avançados de autenticação e trabalhar com trabalhos agendados.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-126">There are, however some scenarios which will require some additional configuration, such as advanced authentication scenarios and working with scheduled jobs.</span></span> <span data-ttu-id="b8f7a-127">Cada um deles é abordada em Olá seções mais tarde.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-127">Each of these is covered in hello later sections.</span></span>

> [!TIP]
> <span data-ttu-id="b8f7a-128">É recomendável ler e entender o restante deste tópico Olá completamente antes de iniciar uma atualização.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-128">It is advised that you read and understand hello rest of this topic completely before starting an upgrade.</span></span> <span data-ttu-id="b8f7a-129">Tome nota de todos os recursos que você usar que são descritos abaixo.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-129">Make note of any features you use which are called out below.</span></span>
>
>

<span data-ttu-id="b8f7a-130">cliente de serviços móveis Olá SDKs são **não** compatível com o servidor de aplicativos móveis novo Olá SDK.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-130">hello Mobile Services client SDKs are **not** compatible with hello new Mobile Apps server SDK.</span></span> <span data-ttu-id="b8f7a-131">Continuidade de tooprovide de ordem de serviço para seu aplicativo, você não deve publicar site tooa de alterações no momento que atendem a clientes publicados.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-131">In order tooprovide continuity of service for your app, you should not publish changes tooa site currently serving published clients.</span></span> <span data-ttu-id="b8f7a-132">Em vez disso, você deve criar um novo aplicativo móvel que sirva como uma duplicata.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-132">Instead, you should create a new mobile app that serves as a duplicate.</span></span> <span data-ttu-id="b8f7a-133">Você pode colocar esse aplicativo em Olá mesmo serviço de aplicativo planejar tooavoid incorrer em custos financeiros adicionais.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-133">You can put this application on hello same App Service plan tooavoid incurring additional financial cost.</span></span>

<span data-ttu-id="b8f7a-134">Em seguida, você terá duas versões do aplicativo hello: um que permanece Olá mesmo e serve aplicativos publicados no hello curinga e hello outros que você pode, em seguida, atualizar e destino com uma nova versão do cliente.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-134">You will then have two versions of hello application: one which stays hello same and serves published apps in hello wild, and hello other which you can then upgrade and target with a new client release.</span></span> <span data-ttu-id="b8f7a-135">Você pode mover e testar seu código no seu ritmo, mas você deve ter certeza de que as correções de bug que fazer obter tooboth aplicado.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-135">You can move and test your code at your pace, but you should make sure that any bug fixes you make get applied tooboth.</span></span> <span data-ttu-id="b8f7a-136">Depois que você acha que um número desejado de aplicativos de cliente da saudação wild atualizou a versão mais recente do toohello, você pode excluir o aplicativo migrado original de saudação se desejar.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-136">Once you feel that a desired number of client apps in hello wild have updated toohello latest version, you can delete hello original migrated app if you desire.</span></span>

<span data-ttu-id="b8f7a-137">estrutura de tópicos completa para o processo de atualização Olá Olá é o seguinte:</span><span class="sxs-lookup"><span data-stu-id="b8f7a-137">hello full outline for hello upgrade process is as follows:</span></span>

1. <span data-ttu-id="b8f7a-138">Criar um novo Aplicativo Móvel</span><span class="sxs-lookup"><span data-stu-id="b8f7a-138">Create a new Mobile App</span></span>
2. <span data-ttu-id="b8f7a-139">Atualização Olá projeto toouse Olá SDKs do novo servidor</span><span class="sxs-lookup"><span data-stu-id="b8f7a-139">Update hello project toouse hello new Server SDKs</span></span>
3. <span data-ttu-id="b8f7a-140">Lançar uma nova versão do aplicativo cliente</span><span class="sxs-lookup"><span data-stu-id="b8f7a-140">Release a new version of your client application</span></span>
4. <span data-ttu-id="b8f7a-141">(Opcional) Excluir sua instância original migrada</span><span class="sxs-lookup"><span data-stu-id="b8f7a-141">(Optional) Delete your original migrated instance</span></span>

## <span data-ttu-id="b8f7a-142"><a name="mobile-app-version"></a>Criando uma segunda instância do aplicativo</span><span class="sxs-lookup"><span data-stu-id="b8f7a-142"><a name="mobile-app-version"></a>Creating a second application instance</span></span>
<span data-ttu-id="b8f7a-143">Olá, primeira etapa na atualização é toocreate recursos de aplicativo móvel de saudação que hospedarão a nova versão de saudação do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-143">hello first step in upgrading is toocreate hello Mobile App resource which will host hello new version of your application.</span></span> <span data-ttu-id="b8f7a-144">Se você já migrou um serviço móvel existente, você desejará toocreate esta versão no hello mesmo plano de hospedagem.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-144">If you have already migrated an existing mobile service, you will want toocreate this version on hello same hosting plan.</span></span> <span data-ttu-id="b8f7a-145">Olá abrir [portal do Azure] e navegue tooyour migrados do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-145">Open hello [Azure portal] and navigate tooyour migrated application.</span></span> <span data-ttu-id="b8f7a-146">Anote Olá plano de serviço de aplicativo estiver em execução.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-146">Make note of hello App Service Plan it is running on.</span></span>

<span data-ttu-id="b8f7a-147">Em seguida, crie a segunda instância de aplicativo hello pelo seguinte Olá [instruções de criação de back-end .NET](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#create-app).</span><span class="sxs-lookup"><span data-stu-id="b8f7a-147">Next, create hello second application instance by following hello [.NET backend creation instructions](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#create-app).</span></span> <span data-ttu-id="b8f7a-148">Quando solicitada tooselect você plano do serviço de aplicativo ou "plano de hospedagem" Escolha Olá plano do aplicativo migrado.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-148">When prompted tooselect you App Service Plan or "hosting plan" choose hello plan of your migrated application.</span></span>

<span data-ttu-id="b8f7a-149">Você provavelmente desejará toouse Olá mesmo banco de dados e Hub de notificação como você fez nos serviços móveis.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-149">You will likely want toouse hello same database and Notification Hub as you did in Mobile Services.</span></span> <span data-ttu-id="b8f7a-150">Você pode copiar esses valores abrindo [portal do Azure] e navegar em aplicativo original toohello, clique em **configurações** > **configurações de aplicativo**.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-150">You can copy these values by opening [Azure portal] and navigating toohello original application, then click **Settings** > **Application settings**.</span></span> <span data-ttu-id="b8f7a-151">Em **Cadeias de Conexão**, copie `MS_NotificationHubConnectionString` e `MS_TableConnectionString`.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-151">Under **Connection Strings**, copy `MS_NotificationHubConnectionString` and `MS_TableConnectionString`.</span></span> <span data-ttu-id="b8f7a-152">Navegue tooyour novo site de atualização e colá-los em, substituindo qualquer valor existente.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-152">Navigate tooyour new upgrade site and paste them in, overwriting any existing values.</span></span> <span data-ttu-id="b8f7a-153">Repita esse processo para quaisquer outras configurações de aplicativo exigidas por seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-153">Repeat this process for any other application settings your app needs.</span></span> <span data-ttu-id="b8f7a-154">Se não usar um serviço migradas, você pode ler cadeias de caracteres de conexão e as configurações do aplicativo de saudação **configurar** guia da saudação seção de serviços móveis do hello [portal clássico do Azure].</span><span class="sxs-lookup"><span data-stu-id="b8f7a-154">If not using a migrated service, you can read connection strings and app settings from hello **Configure** tab of hello Mobile Services section of hello [Azure classic portal].</span></span>

<span data-ttu-id="b8f7a-155">Faça uma cópia do projeto do ASP.NET Olá para seu aplicativo e publicá-lo tooyour novo site.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-155">Make a copy of hello ASP.NET project for your application and publish it tooyour new site.</span></span> <span data-ttu-id="b8f7a-156">Usando uma cópia do seu aplicativo cliente atualizado com a nova URL a saudação, valide que tudo está funcionando conforme o esperado.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-156">Using a copy of your client application updated with hello new URL, validate that everything works as expected.</span></span>

## <a name="updating-hello-server-project"></a><span data-ttu-id="b8f7a-157">Atualizando o projeto do servidor de saudação</span><span class="sxs-lookup"><span data-stu-id="b8f7a-157">Updating hello server project</span></span>
<span data-ttu-id="b8f7a-158">Aplicativos móveis fornece um novo [SDK de servidor de aplicativos móveis] que fornece grande parte da saudação mesma funcionalidade de tempo de execução de serviços móveis hello.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-158">Mobile Apps provides a new [Mobile App Server SDK] which provides much of hello same functionality as hello Mobile Services runtime.</span></span> <span data-ttu-id="b8f7a-159">Primeiro, você deve remover todos os pacotes de serviços móveis toohello de referências.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-159">First, you should remove all references toohello Mobile Services packages.</span></span> <span data-ttu-id="b8f7a-160">No Gerenciador de pacotes do NuGet hello, procure `WindowsAzure.MobileServices.Backend`.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-160">In hello NuGet package manager, search for `WindowsAzure.MobileServices.Backend`.</span></span> <span data-ttu-id="b8f7a-161">A maioria dos aplicativos exibirá vários pacotes aqui, incluindo `WindowsAzure.MobileServices.Backend.Tables` e `WindowsAzure.MobileServices.Backend.Entity`.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-161">Most apps will see several packages here, including `WindowsAzure.MobileServices.Backend.Tables` and `WindowsAzure.MobileServices.Backend.Entity`.</span></span> <span data-ttu-id="b8f7a-162">Nesse caso, começar com o pacote de saudação mais baixo na árvore de dependência hello, como `Entity`e removê-lo.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-162">In such a case, start with hello lowest package in hello dependency tree, such as `Entity`, and remove it.</span></span> <span data-ttu-id="b8f7a-163">Quando solicitado, não remova todos os pacotes dependentes.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-163">When prompted, do not remove all dependant packages.</span></span> <span data-ttu-id="b8f7a-164">Repita este processo até remover o próprio `WindowsAzure.MobileServices.Backend`.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-164">Repeat this process until you have removed `WindowsAzure.MobileServices.Backend` itself.</span></span>

<span data-ttu-id="b8f7a-165">Neste momento, você terá um projeto que não faz referência a SDKs de Serviços Móveis.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-165">At this point you will have a project that no longer references Mobile Services SDKs.</span></span>

<span data-ttu-id="b8f7a-166">Em seguida, você adicionará as referências Olá SDK de aplicativos móveis.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-166">Next you will add references hello Mobile Apps SDK.</span></span> <span data-ttu-id="b8f7a-167">Para esta atualização, a maioria dos desenvolvedores deseja toodownload e instalar Olá `Microsoft.Azure.Mobile.Server.Quickstart` do pacote, pois isso buscará em todo o conjunto necessário de saudação.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-167">For this upgrade, most developers will want toodownload and install hello `Microsoft.Azure.Mobile.Server.Quickstart` package, as this will pull in hello entire required set.</span></span>

<span data-ttu-id="b8f7a-168">Haverá alguns erros de compilador resultantes de diferenças entre os SDKs Olá, mas essas são tooaddress fácil e são abordadas no restante desta seção hello.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-168">There will be quite a few compiler errors resulting from differences between hello SDKs, but these are easy tooaddress and are covered in hello rest of this section.</span></span>

### <a name="base-configuration"></a><span data-ttu-id="b8f7a-169">Configuração base</span><span class="sxs-lookup"><span data-stu-id="b8f7a-169">Base configuration</span></span>
<span data-ttu-id="b8f7a-170">Em seguida, em WebApiConfig.cs, você pode substituir:</span><span class="sxs-lookup"><span data-stu-id="b8f7a-170">Then, in WebApiConfig.cs, you can replace:</span></span>

        // Use this class tooset configuration options for your mobile service
        ConfigOptions options = new ConfigOptions();

        // Use this class tooset WebAPI configuration options
        HttpConfiguration config = ServiceConfig.Initialize(new ConfigBuilder(options));

<span data-ttu-id="b8f7a-171">por:</span><span class="sxs-lookup"><span data-stu-id="b8f7a-171">with</span></span>

        HttpConfiguration config = new HttpConfiguration();
        new MobileAppConfiguration()
            .UseDefaultConfiguration()
        .ApplyTo(config);

> [!NOTE]
> <span data-ttu-id="b8f7a-172">Se você desejar toolearn mais sobre Olá novo .NET SDK do servidor e como tooadd ou remover recursos de seu aplicativo, consulte Olá [como toouse Olá servidor .NET SDK] tópico.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-172">If you wish toolearn more about hello new .NET server SDK and how tooadd/remove features from your app, please see hello [How toouse hello .NET server SDK] topic.</span></span>
>
>

<span data-ttu-id="b8f7a-173">Se seu aplicativo usar saudação recursos de autenticação, você também precisará tooregister um owin.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-173">If your app makes use of hello authentication features, you will also need tooregister an OWIN middleware.</span></span> <span data-ttu-id="b8f7a-174">Nesse caso, você deve mover Olá acima código de configuração para uma nova classe de inicialização OWIN.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-174">In this case, you should move hello above configuration code into a new OWIN Startup class.</span></span>

1. <span data-ttu-id="b8f7a-175">Adicionar pacote de NuGet Olá `Microsoft.Owin.Host.SystemWeb` se ele não ainda esteja incluído em seu projeto.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-175">Add hello NuGet package `Microsoft.Owin.Host.SystemWeb` if it is not already included in your project.</span></span>
2. <span data-ttu-id="b8f7a-176">No Visual Studio, clique com o botão direito do mouse em seu projeto e selecione **Adicionar** -> **Novo Item**.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-176">In Visual Studio, right click on your project and select **Add** -> **New Item**.</span></span> <span data-ttu-id="b8f7a-177">Selecione **Web** -> **Geral** -> **Classe de inicialização OWIN**.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-177">Select **Web** -> **General** -> **OWIN Startup class**.</span></span>
3. <span data-ttu-id="b8f7a-178">Mover Olá acima código MobileAppConfiguration de `WebApiConfig.Register()` toohello `Configuration()` método de sua nova classe de inicialização.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-178">Move hello above code for MobileAppConfiguration from `WebApiConfig.Register()` toohello `Configuration()` method of your new startup class.</span></span>

<span data-ttu-id="b8f7a-179">Verifique se Olá `Configuration()` método termina com:</span><span class="sxs-lookup"><span data-stu-id="b8f7a-179">Make sure hello `Configuration()` method ends with:</span></span>

        app.UseWebApi(config)
        app.UseAppServiceAuthentication(config);

<span data-ttu-id="b8f7a-180">Há alterações adicionais tooauthentication relacionados que são abordados na seção de autenticação completa Olá abaixo.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-180">There are additional changes related tooauthentication which are covered in hello full authentication section below.</span></span>

### <a name="working-with-data"></a><span data-ttu-id="b8f7a-181">Trabalhando com dados</span><span class="sxs-lookup"><span data-stu-id="b8f7a-181">Working with Data</span></span>
<span data-ttu-id="b8f7a-182">Nos serviços móveis, nome de aplicativo móvel Olá servidos como nome do esquema padrão Olá na instalação do Entity Framework hello.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-182">In Mobile Services, hello mobile app name served as hello default schema name in hello Entity Framework setup.</span></span>

<span data-ttu-id="b8f7a-183">tooensure tiver Olá mesmo esquema que está sendo referenciado como antes, use Olá tooset esquema Olá Olá DbContext para seu aplicativo a seguir:</span><span class="sxs-lookup"><span data-stu-id="b8f7a-183">tooensure that you have hello same schema being referenced as before, use hello following tooset hello schema in hello DbContext for your application:</span></span>

        string schema = System.Configuration.ConfigurationManager.AppSettings.Get("MS_MobileServiceName");

<span data-ttu-id="b8f7a-184">Verifique se que você tem MS_MobileServiceName definida se você Olá acima.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-184">Please make sure you have MS_MobileServiceName set if you do hello above.</span></span> <span data-ttu-id="b8f7a-185">Você pode fornecer outro nome de esquema se o seu aplicativo o tiver personalizado anteriormente.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-185">You can also provide another schema name if your application customized this previously.</span></span>

### <a name="system-properties"></a><span data-ttu-id="b8f7a-186">Propriedades do Sistema</span><span class="sxs-lookup"><span data-stu-id="b8f7a-186">System Properties</span></span>
#### <a name="naming"></a><span data-ttu-id="b8f7a-187">Nomenclatura</span><span class="sxs-lookup"><span data-stu-id="b8f7a-187">Naming</span></span>
<span data-ttu-id="b8f7a-188">No servidor de serviços móveis do Azure Olá SDK, as propriedades do sistema sempre contêm um sublinhado duplo (`__`) prefixo para propriedades de saudação:</span><span class="sxs-lookup"><span data-stu-id="b8f7a-188">In hello Azure Mobile Services server SDK, system properties always contain a double underscore (`__`) prefix for hello properties:</span></span>

* <span data-ttu-id="b8f7a-189">__createdAt</span><span class="sxs-lookup"><span data-stu-id="b8f7a-189">__createdAt</span></span>
* <span data-ttu-id="b8f7a-190">__updatedAt</span><span class="sxs-lookup"><span data-stu-id="b8f7a-190">__updatedAt</span></span>
* <span data-ttu-id="b8f7a-191">__deleted</span><span class="sxs-lookup"><span data-stu-id="b8f7a-191">__deleted</span></span>
* <span data-ttu-id="b8f7a-192">__version</span><span class="sxs-lookup"><span data-stu-id="b8f7a-192">__version</span></span>

<span data-ttu-id="b8f7a-193">cliente de serviços móveis Olá SDKs tem uma lógica especial para analisar as propriedades do sistema neste formato.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-193">hello Mobile Services client SDKs have special logic for parsing system properties in this format.</span></span>

<span data-ttu-id="b8f7a-194">Aplicativos móveis do Azure, propriedades do sistema não tem um especial Formatar e ter Olá nomes a seguir:</span><span class="sxs-lookup"><span data-stu-id="b8f7a-194">In Azure Mobile Apps, system properties no longer have a special format and have hello following names:</span></span>

* <span data-ttu-id="b8f7a-195">createdAt</span><span class="sxs-lookup"><span data-stu-id="b8f7a-195">createdAt</span></span>
* <span data-ttu-id="b8f7a-196">updatedAt</span><span class="sxs-lookup"><span data-stu-id="b8f7a-196">updatedAt</span></span>
* <span data-ttu-id="b8f7a-197">deleted</span><span class="sxs-lookup"><span data-stu-id="b8f7a-197">deleted</span></span>
* <span data-ttu-id="b8f7a-198">version</span><span class="sxs-lookup"><span data-stu-id="b8f7a-198">version</span></span>

<span data-ttu-id="b8f7a-199">Olá, aplicativos móveis cliente SDKs use Olá novos nomes do sistema propriedades, para que nenhuma alteração é necessária tooclient código.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-199">hello Mobile Apps client SDKs use hello new system properties names, so no changes are required tooclient code.</span></span> <span data-ttu-id="b8f7a-200">No entanto, se você estiver diretamente fazer REST chama o serviço de tooyour, em seguida, você deve alterar suas consultas.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-200">However, if you are directly making REST calls tooyour service then you should change your queries accordingly.</span></span>

#### <a name="local-store"></a><span data-ttu-id="b8f7a-201">Armazenamento local</span><span class="sxs-lookup"><span data-stu-id="b8f7a-201">Local store</span></span>
<span data-ttu-id="b8f7a-202">Olá alterações toohello nomes de propriedades do sistema significam que um banco de dados local de sincronização offline para serviços móveis não é compatível com aplicativos móveis.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-202">hello changes toohello names of system properties mean that an offline sync local database for Mobile Services is not compatible with Mobile Apps.</span></span> <span data-ttu-id="b8f7a-203">Se possível, evite Atualizando aplicativos de cliente de serviços móveis tooMobile que aplicativos até após as alterações pendentes foram enviados toohello server.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-203">If possible, you should avoid upgrading client apps from Mobile Services tooMobile Apps until after pending changes have been sent toohello server.</span></span> <span data-ttu-id="b8f7a-204">Em seguida, aplicativo atualizado Olá deve usar um novo nome de arquivo de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-204">Then, hello upgraded app should use a new database filename.</span></span>

<span data-ttu-id="b8f7a-205">Se um aplicativo cliente é atualizado de serviços móveis tooMobile aplicativos enquanto houver alterações offline pendentes na fila de operação hello, banco de dados de sistema Olá deve ser atualizada toouse Olá novos nomes de coluna.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-205">If a client app is upgraded from Mobile Services tooMobile Apps while there are pending offline changes in hello operation queue, then hello system database must be updated toouse hello new column names.</span></span> <span data-ttu-id="b8f7a-206">No iOS, isso pode ser feito usando nomes de coluna migrações leve toochange hello.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-206">On iOS, this can be achieved using lightweight migrations toochange hello column names.</span></span> <span data-ttu-id="b8f7a-207">No Android e hello gerenciado cliente .NET, você deve gravar toorename personalizado do SQL Olá colunas para as tabelas de objeto de dados.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-207">On Android and hello .NET managed client, you should write custom SQL toorename hello columns for your data object tables.</span></span>

<span data-ttu-id="b8f7a-208">No iOS, você deve alterar o esquema de dados principal para seu dados a seguir entidades toomatch hello.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-208">On iOS, you should change your Core Data schema for your data entities toomatch hello following.</span></span> <span data-ttu-id="b8f7a-209">Observe que Olá propriedades `createdAt`, `updatedAt` e `version` não tem mais um `ms_` prefixo:</span><span class="sxs-lookup"><span data-stu-id="b8f7a-209">Note that hello properties `createdAt`, `updatedAt` and `version` no longer have an `ms_` prefix:</span></span>

| <span data-ttu-id="b8f7a-210">Atributo</span><span class="sxs-lookup"><span data-stu-id="b8f7a-210">Attribute</span></span> | <span data-ttu-id="b8f7a-211">Tipo</span><span class="sxs-lookup"><span data-stu-id="b8f7a-211">Type</span></span> | <span data-ttu-id="b8f7a-212">Observação</span><span class="sxs-lookup"><span data-stu-id="b8f7a-212">Note</span></span> |
| --- | --- | --- |
| <span data-ttu-id="b8f7a-213">ID</span><span class="sxs-lookup"><span data-stu-id="b8f7a-213">id</span></span> |<span data-ttu-id="b8f7a-214">Cadeia de caracteres, marcadas como obrigatórias</span><span class="sxs-lookup"><span data-stu-id="b8f7a-214">String, marked required</span></span> |<span data-ttu-id="b8f7a-215">chave primária no repositório remoto</span><span class="sxs-lookup"><span data-stu-id="b8f7a-215">primary key in remote store</span></span> |
| <span data-ttu-id="b8f7a-216">createdAt</span><span class="sxs-lookup"><span data-stu-id="b8f7a-216">createdAt</span></span> |<span data-ttu-id="b8f7a-217">Data</span><span class="sxs-lookup"><span data-stu-id="b8f7a-217">Date</span></span> |<span data-ttu-id="b8f7a-218">propriedade do sistema toocreatedAt mapas (opcional)</span><span class="sxs-lookup"><span data-stu-id="b8f7a-218">(optional) maps toocreatedAt system property</span></span> |
| <span data-ttu-id="b8f7a-219">updatedAt</span><span class="sxs-lookup"><span data-stu-id="b8f7a-219">updatedAt</span></span> |<span data-ttu-id="b8f7a-220">Data</span><span class="sxs-lookup"><span data-stu-id="b8f7a-220">Date</span></span> |<span data-ttu-id="b8f7a-221">propriedade do sistema tooupdatedAt mapas (opcional)</span><span class="sxs-lookup"><span data-stu-id="b8f7a-221">(optional) maps tooupdatedAt system property</span></span> |
| <span data-ttu-id="b8f7a-222">version</span><span class="sxs-lookup"><span data-stu-id="b8f7a-222">version</span></span> |<span data-ttu-id="b8f7a-223">Cadeia de caracteres</span><span class="sxs-lookup"><span data-stu-id="b8f7a-223">String</span></span> |<span data-ttu-id="b8f7a-224">conflitos de toodetect usado (opcional), tooversion de mapas</span><span class="sxs-lookup"><span data-stu-id="b8f7a-224">(optional) used toodetect conflicts, maps tooversion</span></span> |

#### <a name="querying-system-properties"></a><span data-ttu-id="b8f7a-225">Consultando propriedades do sistema</span><span class="sxs-lookup"><span data-stu-id="b8f7a-225">Querying system properties</span></span>
<span data-ttu-id="b8f7a-226">Serviços móveis do Azure, as propriedades do sistema não são enviadas por padrão, mas apenas quando forem solicitados usando a cadeia de caracteres de consulta Olá `__systemProperties`.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-226">In Azure Mobile Services, system properties are not sent by default, but only when they are requested using hello query string `__systemProperties`.</span></span> <span data-ttu-id="b8f7a-227">Por outro lado, no sistema de aplicativos do Azure Mobile propriedades são **sempre selecionado** desde que eles fazem parte do modelo de objeto do hello servidor SDK.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-227">In contrast, in Azure Mobile Apps system properties are **always selected** since they are part of hello server SDK object model.</span></span>

<span data-ttu-id="b8f7a-228">Essa alteração afeta principalmente as implementações personalizadas dos gerenciadores de domínio, como extensões de `MappedEntityDomainManager`.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-228">This change mainly impacts custom implementations of domain managers, such as extensions of `MappedEntityDomainManager`.</span></span> <span data-ttu-id="b8f7a-229">Nos serviços móveis, se um cliente nunca solicita as propriedades de sistema, é possível toouse um `MappedEntityDomainManager` que realmente não mapear todas as propriedades.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-229">In Mobile Services, if a client never requests any system properties, it is possible toouse a `MappedEntityDomainManager` that does not actually map all properties.</span></span> <span data-ttu-id="b8f7a-230">No entanto, nos Aplicativos Móveis do Azure, essas propriedades não mapeadas causarão um erro em consultas GET.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-230">However, in Azure Mobile Apps, these unmapped properties will cause an error in GET queries.</span></span>

<span data-ttu-id="b8f7a-231">Olá problema de saudação de tooresolve de maneira mais fácil é toomodify seu DTOs para que eles herdam do `ITableData` em vez de `EntityData`.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-231">hello easiest way tooresolve hello issue is toomodify your DTOs so that they inherit from `ITableData` instead of `EntityData`.</span></span> <span data-ttu-id="b8f7a-232">Em seguida, adicione Olá `[NotMapped]` atributo toohello campos que devem ser omitidos.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-232">Then, add hello `[NotMapped]` attribute toohello fields that should be omitted.</span></span>

<span data-ttu-id="b8f7a-233">Por exemplo, o seguinte Olá define `TodoItem` sem propriedades de sistema:</span><span class="sxs-lookup"><span data-stu-id="b8f7a-233">For example, hello following defines `TodoItem` with no system properties:</span></span>

    using System.ComponentModel.DataAnnotations.Schema;

    public class TodoItem : ITableData
    {
        public string Text { get; set; }

        public bool Complete { get; set; }

        public string Id { get; set; }

        [NotMapped]
        public DateTimeOffset? CreatedAt { get; set; }

        [NotMapped]
        public DateTimeOffset? UpdatedAt { get; set; }

        [NotMapped]
        public bool Deleted { get; set; }

        [NotMapped]
        public byte[] Version { get; set; }
    }

<span data-ttu-id="b8f7a-234">Observação: se você obtiver erros `NotMapped`, adicione uma referência assembly toohello `System.ComponentModel.DataAnnotations`.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-234">Note: if you get errors on `NotMapped`, add a reference toohello assembly `System.ComponentModel.DataAnnotations`.</span></span>

### <a name="cors"></a><span data-ttu-id="b8f7a-235">CORS</span><span class="sxs-lookup"><span data-stu-id="b8f7a-235">CORS</span></span>
<span data-ttu-id="b8f7a-236">Serviços móveis incluído um suporte para CORS encapsulando Olá solução ASP.NET CORS.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-236">Mobile Services included some support for CORS by wrapping hello ASP.NET CORS solution.</span></span> <span data-ttu-id="b8f7a-237">Essa camada encapsulamento foi removido toogive desenvolvedor de hello mais controle, para que você possa aproveitar diretamente [suporte do ASP.NET CORS](http://www.asp.net/web-api/overview/security/enabling-cross-origin-requests-in-web-api).</span><span class="sxs-lookup"><span data-stu-id="b8f7a-237">This wrapping layer has been removed toogive hello developer more control, so you can directly leverage [ASP.NET CORS support](http://www.asp.net/web-api/overview/security/enabling-cross-origin-requests-in-web-api).</span></span>

<span data-ttu-id="b8f7a-238">principais áreas de preocupação se usando CORS Hello são que Olá `eTag` e `Location` cabeçalhos devem ter permissão para que Olá cliente SDKs toowork corretamente.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-238">hello main areas of concern if using CORS are that hello `eTag` and `Location` headers must be allowed in order for hello client SDKs toowork properly.</span></span>

### <a name="push-notifications"></a><span data-ttu-id="b8f7a-239">Notificações por Push</span><span class="sxs-lookup"><span data-stu-id="b8f7a-239">Push Notifications</span></span>
<span data-ttu-id="b8f7a-240">Para enviar por push, o item Olá principal pode ser ausente do SDK do servidor de saudação é classe de PushRegistrationHandler hello.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-240">For push, hello main item that you may find missing from hello Server SDK is hello PushRegistrationHandler class.</span></span> <span data-ttu-id="b8f7a-241">Registros são tratados de forma ligeiramente diferente em aplicativos móveis, e registros sem marca registros são habilitados por padrão.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-241">Registrations are handled slightly differently in Mobile Apps, and tagless registrations are enabled by default.</span></span> <span data-ttu-id="b8f7a-242">Gerenciar as marcas pode ser feito por meio de APIs personalizados.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-242">Managing tags may be accomplished by using custom APIs.</span></span> <span data-ttu-id="b8f7a-243">Consulte Olá [registrar-se para marcas](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#tags) instruções para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-243">Please see hello [registering for tags](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#tags) instructions for more information.</span></span>

### <a name="scheduled-jobs"></a><span data-ttu-id="b8f7a-244">Trabalhos agendados</span><span class="sxs-lookup"><span data-stu-id="b8f7a-244">Scheduled Jobs</span></span>
<span data-ttu-id="b8f7a-245">Trabalhos agendados não estão incorporados em aplicativos móveis, então todos os trabalhos existentes que você tem em seu back-end .NET precisará toobe atualizado individualmente.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-245">Scheduled jobs are not built into Mobile Apps, so any existing jobs that you have in your .NET backend will need toobe upgraded individually.</span></span> <span data-ttu-id="b8f7a-246">Uma opção é toocreate agendado [trabalho Web] no site de código do aplicativo móvel hello.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-246">One option is toocreate a scheduled [Web Job] on hello Mobile App code site.</span></span> <span data-ttu-id="b8f7a-247">Você também pode configurar um controlador que contém o código de trabalho e configurar Olá [Agendador do Azure] toohit esse ponto de extremidade na agenda Olá esperado.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-247">You could also set up a controller that holds your job code and configure hello [Azure Scheduler] toohit that endpoint on hello expected schedule.</span></span>

### <a name="miscellaneous-changes"></a><span data-ttu-id="b8f7a-248">Alterações diversas</span><span class="sxs-lookup"><span data-stu-id="b8f7a-248">Miscellaneous changes</span></span>
<span data-ttu-id="b8f7a-249">Todos os ApiControllers que serão consumidos por um cliente móvel agora deve ter Olá `[MobileAppController]` atributo.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-249">All ApiControllers which will be consumed by a mobile client must now have hello `[MobileAppController]` attribute.</span></span> <span data-ttu-id="b8f7a-250">Isso não está mais incluído por padrão para que outros toogo ApiControllers afetado por Olá formatadores móveis.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-250">This is no longer included by default so that other ApiControllers toogo unaffected by hello mobile formatters.</span></span>

<span data-ttu-id="b8f7a-251">Olá `ApiServices` objeto não fizer parte de saudação SDK.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-251">hello `ApiServices` object is no longer part of hello SDK.</span></span> <span data-ttu-id="b8f7a-252">tooaccess configurações de aplicativo móvel, você pode usar o seguinte hello:</span><span class="sxs-lookup"><span data-stu-id="b8f7a-252">tooaccess Mobile App settings, you can use hello following:</span></span>

    MobileAppSettingsDictionary settings = this.Configuration.GetMobileAppSettingsProvider().GetMobileAppSettings();

<span data-ttu-id="b8f7a-253">Da mesma forma, o log agora é obtido usando a gravação de rastreamento ASP.NET padrão hello:</span><span class="sxs-lookup"><span data-stu-id="b8f7a-253">Similarly, logging is now accomplished using hello standard ASP.NET trace writing:</span></span>

    ITraceWriter traceWriter = this.Configuration.Services.GetTraceWriter();
    traceWriter.Info("Hello, World");  

## <span data-ttu-id="b8f7a-254"><a name="authentication"></a>Considerações sobre autenticação</span><span class="sxs-lookup"><span data-stu-id="b8f7a-254"><a name="authentication"></a>Authentication considerations</span></span>
<span data-ttu-id="b8f7a-255">componentes de autenticação Olá dos serviços móveis agora foram movidos para o recurso de autenticação/autorização do serviço de aplicativo hello.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-255">hello authentication components of Mobile Services have now been moved into hello App Service Authentication/Authorization feature.</span></span> <span data-ttu-id="b8f7a-256">Você pode aprender sobre como habilitar isso para o seu site por leitura Olá [aplicativo móvel do adicionar autenticação tooyour](app-service-mobile-ios-get-started-users.md) tópico.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-256">You can learn about enabling this for your site by reading hello [Add authentication tooyour mobile app](app-service-mobile-ios-get-started-users.md) topic.</span></span>

<span data-ttu-id="b8f7a-257">Para alguns provedores, como Google, Facebook e AAD, você deve estar registro existente do tooleverage capaz de saudação do seu aplicativo de cópia.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-257">For some providers, such as AAD, Facebook, and Google, you should be able tooleverage hello existing registration from your copy application.</span></span> <span data-ttu-id="b8f7a-258">Você simplesmente precisa portal do provedor de identidade toohello toonavigate e adicionar um novo registro de toohello de URL de redirecionamento.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-258">You simply need toonavigate toohello identity provider's portal and add a new redirect URL toohello registration.</span></span> <span data-ttu-id="b8f7a-259">Configure autenticação/autorização do serviço de aplicativo com ID de saudação do cliente e o segredo.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-259">Then configure App Service Authentication/Authorization with hello client ID and secret.</span></span>

### <a name="controller-action-authorization"></a><span data-ttu-id="b8f7a-260">Autorização de ação do controlador</span><span class="sxs-lookup"><span data-stu-id="b8f7a-260">Controller action authorization</span></span>
<span data-ttu-id="b8f7a-261">Todas as instâncias de saudação `[AuthorizeLevel(AuthorizationLevel.User)]` atributo agora deve ser alterado toouse Olá padrão ASP.NET `[Authorize]` atributo.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-261">Any instances of hello `[AuthorizeLevel(AuthorizationLevel.User)]` attribute must now be changed toouse hello standard ASP.NET `[Authorize]` attribute.</span></span> <span data-ttu-id="b8f7a-262">Além disso, controladores são agora anônimos por padrão, como em outros aplicativos ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-262">Additionally, controllers are now Anonymous by default, as in other ASP.NET applications.</span></span>
<span data-ttu-id="b8f7a-263">Se você estiver usando uma saudação em outras opções de AuthorizeLevel, como administrador ou aplicativo, observe que eles são excluídos.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-263">If you were using one of hello other AuthorizeLevel options, such as Admin or Application, please note that these are gone.</span></span> <span data-ttu-id="b8f7a-264">Em vez disso, você pode configurar AuthorizationFilters para segredos compartilhados ou configurar um chamadas de serviço a serviço tooenable da entidade de serviço do AAD com segurança.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-264">You can instead set up AuthorizationFilters for shared secrets or configure an AAD Service Principal tooenable service-to-service calls securely.</span></span>

### <a name="getting-additional-user-information"></a><span data-ttu-id="b8f7a-265">Obtendo informações adicionais do usuário</span><span class="sxs-lookup"><span data-stu-id="b8f7a-265">Getting additional user information</span></span>
<span data-ttu-id="b8f7a-266">Você pode obter informações de usuário adicionais, incluindo tokens de acesso por meio de saudação `GetAppServiceIdentityAsync()` método:</span><span class="sxs-lookup"><span data-stu-id="b8f7a-266">You can get additional user information, including access tokens through hello `GetAppServiceIdentityAsync()` method:</span></span>

        FacebookCredentials creds = await this.User.GetAppServiceIdentityAsync<FacebookCredentials>();

<span data-ttu-id="b8f7a-267">Além disso, se seu aplicativo tem dependências no usuário IDs, como armazená-las em um banco de dados, é importante toonote que Olá IDs de usuário entre os serviços móveis e aplicativos móveis do aplicativo de serviço são diferentes.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-267">Additionally, if your application takes dependencies on user IDs, such as storing them in a database, it is important toonote that hello user IDs between Mobile Services and App Service Mobile Apps are different.</span></span> <span data-ttu-id="b8f7a-268">Você ainda pode obter Olá ID de usuário de serviços móveis, embora.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-268">You can still get hello Mobile Services User ID, though.</span></span> <span data-ttu-id="b8f7a-269">Todas as subclasses de ProviderCredentials Olá têm uma propriedade de ID de usuário.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-269">All of hello ProviderCredentials subclasses have a UserId property.</span></span> <span data-ttu-id="b8f7a-270">Para continuar do exemplo hello antes:</span><span class="sxs-lookup"><span data-stu-id="b8f7a-270">So continuing from hello example before:</span></span>

        string mobileServicesUserId = creds.Provider + ":" + creds.UserId;

<span data-ttu-id="b8f7a-271">Se seu aplicativo aceita todas as dependências IDs de usuário, é importante que você aproveite Olá mesmo registro com um provedor de identidade se possível.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-271">If your app does take any dependencies on user IDs, it is important that you leverage hello same registration with an identity provider if possible.</span></span> <span data-ttu-id="b8f7a-272">As IDs de usuário são registro toohello normalmente no escopo do aplicativo que foi usado, portanto, apresentando um novo registro pode criar problemas com usuários tootheir dados correspondentes.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-272">User IDs are typically scoped toohello application registration that was used, so introducing a new registration could create problems with matching users tootheir data.</span></span>

### <a name="custom-authentication"></a><span data-ttu-id="b8f7a-273">Autenticação personalizada</span><span class="sxs-lookup"><span data-stu-id="b8f7a-273">Custom authentication</span></span>
<span data-ttu-id="b8f7a-274">Se seu aplicativo estiver usando uma solução de autenticação personalizada, você desejará toomake-se de que o site atualizado Olá tem acesso toohello sistema.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-274">If your app is using a custom authentication solution, you will want toomake sure that hello upgraded site has access toohello system.</span></span> <span data-ttu-id="b8f7a-275">Siga as instruções de novo de saudação de autenticação personalizada no hello [visão geral do SDK do .NET server] toointegrate sua solução.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-275">Follow hello new instructions for custom authentication in hello [.NET server SDK overview] toointegrate your solution.</span></span> <span data-ttu-id="b8f7a-276">Observe que componentes de autenticação personalizada Olá ainda estão na visualização.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-276">Please note that hello custom authentication components are still in preview.</span></span>

## <span data-ttu-id="b8f7a-277"><a name="updating-clients"></a>Atualizando de clientes</span><span class="sxs-lookup"><span data-stu-id="b8f7a-277"><a name="updating-clients"></a>Updating clients</span></span>
<span data-ttu-id="b8f7a-278">Quando você tiver um back-end do Aplicativo Móvel operacional, poderá trabalhar em uma nova versão de seu aplicativo cliente para consumi-lo.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-278">Once you have an operational Mobile App backend, you can work on a new version of your client application which consumes it.</span></span> <span data-ttu-id="b8f7a-279">Aplicativos móveis também inclui uma nova versão do cliente Olá SDKs e atualização do servidor toohello semelhante acima, você precisará tooremove todas as referências toohello Mobile Services SDKs antes de instalar versões de aplicativos móveis hello.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-279">Mobile Apps also includes a new version of hello client SDKs, and similar toohello server upgrade above, you will need tooremove all references toohello Mobile Services SDKs before installing hello Mobile Apps versions.</span></span>

<span data-ttu-id="b8f7a-280">Uma das principais alterações Olá entre versões de saudação é que construtores de saudação não exigem uma chave de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-280">One of hello main changes between hello versions is that hello constructors no longer require an application key.</span></span> <span data-ttu-id="b8f7a-281">Você agora simplesmente passar na URL de saudação do seu aplicativo móvel.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-281">You now simply pass in hello URL of your Mobile App.</span></span> <span data-ttu-id="b8f7a-282">Por exemplo, em clientes do .NET hello, Olá `MobileServiceClient` construtor agora é:</span><span class="sxs-lookup"><span data-stu-id="b8f7a-282">For example, on hello .NET clients, hello `MobileServiceClient` constructor is now:</span></span>

        public static MobileServiceClient MobileService = new MobileServiceClient(
            "https://contoso.azurewebsites.net", // URL of hello Mobile App
        );

<span data-ttu-id="b8f7a-283">Você pode ler sobre como instalar Olá novos SDKs e usando a nova estrutura de saudação por meio de links de saudação abaixo:</span><span class="sxs-lookup"><span data-stu-id="b8f7a-283">You can read about installing hello new SDKs and using hello new structure via hello links below:</span></span>

* [<span data-ttu-id="b8f7a-284">iOS versão 3.0.0 ou posterior</span><span class="sxs-lookup"><span data-stu-id="b8f7a-284">iOS version 3.0.0 or later</span></span>](app-service-mobile-ios-how-to-use-client-library.md)
* [<span data-ttu-id="b8f7a-285">.NET (Windows/Xamarin) versão 2.0.0 ou posterior</span><span class="sxs-lookup"><span data-stu-id="b8f7a-285">.NET (Windows/Xamarin) version 2.0.0 or later</span></span>](app-service-mobile-dotnet-how-to-use-client-library.md)

<span data-ttu-id="b8f7a-286">Se seu aplicativo usar notificações por push, tome nota da saudação instruções de registro específico para cada plataforma, como Houve algumas alterações também.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-286">If your application makes use of push notifications, make note of hello specific registration instructions for each platform, as there have been some changes there as well.</span></span>

<span data-ttu-id="b8f7a-287">Quando você tiver Olá nova versão do cliente pronto, experimente-o em seu projeto de servidor atualizado.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-287">When you have hello new client version ready, try it out against your upgraded server project.</span></span> <span data-ttu-id="b8f7a-288">Após validar que ele funciona, você pode liberar uma nova versão do seu aplicativo toocustomers.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-288">After validating that it works, you can release a new version of your application toocustomers.</span></span> <span data-ttu-id="b8f7a-289">Eventualmente, depois que os clientes tiveram uma chance tooreceive essas atualizações, você pode excluir a versão de serviços móveis de saudação do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-289">Eventually, once your customers have had a chance tooreceive these updates, you can delete hello Mobile Services version of your app.</span></span> <span data-ttu-id="b8f7a-290">Neste ponto, você tiver atualizado tooan aplicativo móvel do serviço de aplicativo usando o servidor de aplicativos móveis mais recente Olá SDK.</span><span class="sxs-lookup"><span data-stu-id="b8f7a-290">At this point, you have completely upgraded tooan App Service Mobile App using hello latest Mobile Apps server SDK.</span></span>

<!-- URLs. -->

[portal do Azure]: https://portal.azure.com/
[portal clássico do Azure]: https://manage.windowsazure.com/
[quais são os aplicativos móveis?]: app-service-mobile-value-prop.md
[I already use web sites and mobile services – how does App Service help me?]: /en-us/documentation/articles/app-service-mobile-value-prop-migration-from-mobile-services
[SDK de servidor de aplicativos móveis]: http://www.nuget.org/packages/microsoft.azure.mobile.server
[Create a Mobile App]: app-service-mobile-xamarin-ios-get-started.md
[Add push notifications tooyour mobile app]: app-service-mobile-xamarin-ios-get-started-push.md
[Add authentication tooyour mobile app]: app-service-mobile-xamarin-ios-get-started-users.md
[Agendador do Azure]: /en-us/documentation/services/scheduler/
[trabalho Web]: ../app-service-web/websites-webjobs-resources.md
[como toouse Olá servidor .NET SDK]: app-service-mobile-dotnet-backend-how-to-use-server-sdk.md
[Migrate from Mobile Services tooan App Service Mobile App]: app-service-mobile-migrating-from-mobile-services.md
[Migrate your existing Mobile Service tooApp Service]: app-service-mobile-migrating-from-mobile-services.md
[preços do serviço de aplicativo]: https://azure.microsoft.com/en-us/pricing/details/app-service/
[visão geral do SDK do .NET server]: app-service-mobile-dotnet-backend-how-to-use-server-sdk.md
