---
title: "Atualização de Serviços Móveis para o serviço de aplicativo do Azure"
description: "Saiba como atualizar com facilidade seu aplicativo de Serviços Móveis para um Aplicativo Móvel do Serviço de Aplicativo"
services: app-service\mobile
documentationcenter: 
author: ggailey777
manager: syntaxc4
editor: 
ms.assetid: 9c0ac353-afb6-462b-ab94-d91b8247322f
ms.service: app-service-mobile
ms.workload: mobile
ms.tgt_pltfrm: mobile
ms.devlang: dotnet
ms.topic: article
ms.date: 10/01/2016
ms.author: glenga
ms.openlocfilehash: 81173b34d0d3b07c5c49d867b1dc5060c7311f12
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/03/2017
---
# <a name="upgrade-your-existing-net-azure-mobile-service-to-app-service"></a><span data-ttu-id="8a921-103">Atualizar o Serviço Móvel do Azure .NET existente para o Serviço de Aplicativo</span><span class="sxs-lookup"><span data-stu-id="8a921-103">Upgrade your existing .NET Azure Mobile Service to App Service</span></span>
<span data-ttu-id="8a921-104">O Aplicativo Móvel do Serviço de Aplicativo é uma nova maneira de compilar aplicativos móveis usando o Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="8a921-104">App Service Mobile is a new way to build mobile applications using Microsoft Azure.</span></span> <span data-ttu-id="8a921-105">Para saber mais, confira [O que são os Aplicativos Móveis?].</span><span class="sxs-lookup"><span data-stu-id="8a921-105">To learn more, see [What are Mobile Apps?].</span></span>

<span data-ttu-id="8a921-106">Este tópico descreve como atualizar um aplicativo de back-end do .NET usando os Serviços Móveis do Azure para novos Aplicativos Móveis do Serviço de Aplicativo.</span><span class="sxs-lookup"><span data-stu-id="8a921-106">This topic describes how to upgrade an existing .NET backend application from Azure Mobile Services to a new App Service Mobile Apps.</span></span> <span data-ttu-id="8a921-107">Durante essa atualização, o seu aplicativo de Serviços Móveis pode continuar sendo executado.</span><span class="sxs-lookup"><span data-stu-id="8a921-107">While you perform this upgrade, your existing Mobile Services application can continue to operate.</span></span>   <span data-ttu-id="8a921-108">Se você precisar atualizar um aplicativo back-end em Node.js, veja [Atualizar seus Serviços Móveis do Node.js](app-service-mobile-node-backend-upgrading-from-mobile-services.md).</span><span class="sxs-lookup"><span data-stu-id="8a921-108">If you need to upgrade a Node.js backend application, refer to [Upgrading your Node.js Mobile Services](app-service-mobile-node-backend-upgrading-from-mobile-services.md).</span></span>

<span data-ttu-id="8a921-109">Quando um back-end móvel é atualizado para o Serviço de Aplicativo do Azure, ele tem acesso a todos os recursos do Serviço de Aplicativo e é cobrado de acordo com os [preços do Serviço de Aplicativo]e não com os preços dos Serviços Móveis.</span><span class="sxs-lookup"><span data-stu-id="8a921-109">When a mobile backend is upgraded to Azure App Service, it has access to all App Service features and are billed according to [App Service pricing], not Mobile Services pricing.</span></span>

## <a name="migrate-vs-upgrade"></a><span data-ttu-id="8a921-110">Migração vs. atualização</span><span class="sxs-lookup"><span data-stu-id="8a921-110">Migrate vs. upgrade</span></span>
[!INCLUDE [app-service-mobile-migrate-vs-upgrade](../../includes/app-service-mobile-migrate-vs-upgrade.md)]

> [!TIP]
> <span data-ttu-id="8a921-111">Recomendamos a [execução de uma migração](app-service-mobile-migrating-from-mobile-services.md) antes de executar uma atualização.</span><span class="sxs-lookup"><span data-stu-id="8a921-111">It is recommended that you [perform a migration](app-service-mobile-migrating-from-mobile-services.md) before going through an upgrade.</span></span> <span data-ttu-id="8a921-112">Dessa forma, você pode colocar as duas versões de seu aplicativo no mesmo Plano do Serviço de Aplicativo sem qualquer custo adicional.</span><span class="sxs-lookup"><span data-stu-id="8a921-112">This way, you can put both versions of your application on the same App Service Plan and incur no additional cost.</span></span>
>
>

### <a name="improvements-in-mobile-apps-net-server-sdk"></a><span data-ttu-id="8a921-113">Aprimoramentos no SDK do servidor .NET de aplicativos móveis</span><span class="sxs-lookup"><span data-stu-id="8a921-113">Improvements in Mobile Apps .NET server SDK</span></span>
<span data-ttu-id="8a921-114">A atualização para os novos [SDKs de Aplicativos Móveis](https://www.nuget.org/packages/Microsoft.Azure.Mobile.Server/) oferece os seguintes benefícios:</span><span class="sxs-lookup"><span data-stu-id="8a921-114">Upgrading to the new [Mobile Apps SDK](https://www.nuget.org/packages/Microsoft.Azure.Mobile.Server/) provides the following benefits:</span></span>

* <span data-ttu-id="8a921-115">Mais flexibilidade em dependências do NuGet.</span><span class="sxs-lookup"><span data-stu-id="8a921-115">More flexibility on NuGet dependencies.</span></span> <span data-ttu-id="8a921-116">O ambiente de hospedagem não fornece mais suas próprias versões de pacotes do NuGet, então você pode usar versões compatíveis alternativas.</span><span class="sxs-lookup"><span data-stu-id="8a921-116">The hosting environment no longer provides its own versions of NuGet packages, so you can use alternative compatible versions.</span></span> <span data-ttu-id="8a921-117">No entanto, se há novas correções de bugs críticas ou atualizações de segurança para o Mobile Server SDK ou dependências, você deve atualizar manualmente o serviço.</span><span class="sxs-lookup"><span data-stu-id="8a921-117">However, if there are new critical bugfixes or security updates to the Mobile Server SDK or dependencies, you must update your service manually.</span></span>
* <span data-ttu-id="8a921-118">Mais flexibilidade no SDK do celular.</span><span class="sxs-lookup"><span data-stu-id="8a921-118">More flexibility in the mobile SDK.</span></span> <span data-ttu-id="8a921-119">Você pode controlar explicitamente quais recursos e rotas são configurados, como autenticação, APIs de tabela e o ponto de extremidade de registro push.</span><span class="sxs-lookup"><span data-stu-id="8a921-119">You can explicitly control which features and routes are set up, such as authentication, table APIs, and the push registration endpoint.</span></span> <span data-ttu-id="8a921-120">Para saber mais, confira [Como usar o SDK do servidor do .NET para Aplicativos Móveis do Azure](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md).</span><span class="sxs-lookup"><span data-stu-id="8a921-120">To learn more, see [How to use the .NET server SDK for Azure Mobile Apps](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md).</span></span>
* <span data-ttu-id="8a921-121">Suporte para outros tipos de projeto do ASP.NET e rotas.</span><span class="sxs-lookup"><span data-stu-id="8a921-121">Support for other ASP.NET project types and routes.</span></span> <span data-ttu-id="8a921-122">Agora você pode hospedar os controladores MVC e API da Web no mesmo projeto como o projeto móvel de back-end.</span><span class="sxs-lookup"><span data-stu-id="8a921-122">You can now host MVC and Web API controllers in the same project as your mobile backend project.</span></span>
* <span data-ttu-id="8a921-123">Suporte para novos recursos de autenticação do Serviço de Aplicativo, que permitem que você use uma configuração de autenticação comum em seus aplicativos Web e móveis.</span><span class="sxs-lookup"><span data-stu-id="8a921-123">Support for new App Service authentication features, which allow you to use a common authentication configuration across your web and mobile apps.</span></span>

## <span data-ttu-id="8a921-124"><a name="overview"></a>Visão geral da atualização básica</span><span class="sxs-lookup"><span data-stu-id="8a921-124"><a name="overview"></a>Basic upgrade overview</span></span>
<span data-ttu-id="8a921-125">Em muitos casos, migrar será tão simples quanto alternar para o novo SDK do servidor de Aplicativos Móveis e republicar seu código para uma nova instância de Aplicativo Móvel.</span><span class="sxs-lookup"><span data-stu-id="8a921-125">In many cases, upgrading will be as simple as switching to the new Mobile Apps server SDK and republishing your code onto a new Mobile App instance.</span></span> <span data-ttu-id="8a921-126">Há, no entanto, alguns cenários que exigem alguma configuração adicional, como cenários avançados de autenticação e trabalhar com trabalhos agendados.</span><span class="sxs-lookup"><span data-stu-id="8a921-126">There are, however some scenarios which will require some additional configuration, such as advanced authentication scenarios and working with scheduled jobs.</span></span> <span data-ttu-id="8a921-127">Cada um deles será abordado em seções posteriores.</span><span class="sxs-lookup"><span data-stu-id="8a921-127">Each of these is covered in the later sections.</span></span>

> [!TIP]
> <span data-ttu-id="8a921-128">Recomendamos a leitura e compreensão do restante deste tópico antes de iniciar uma atualização.</span><span class="sxs-lookup"><span data-stu-id="8a921-128">It is advised that you read and understand the rest of this topic completely before starting an upgrade.</span></span> <span data-ttu-id="8a921-129">Tome nota de todos os recursos que você usar que são descritos abaixo.</span><span class="sxs-lookup"><span data-stu-id="8a921-129">Make note of any features you use which are called out below.</span></span>
>
>

<span data-ttu-id="8a921-130">Os SDKs do cliente de Serviços Móveis **não** são compatíveis com o novo SDK do servidor de Aplicativos Móveis.</span><span class="sxs-lookup"><span data-stu-id="8a921-130">The Mobile Services client SDKs are **not** compatible with the new Mobile Apps server SDK.</span></span> <span data-ttu-id="8a921-131">Para permitir a continuidade do serviço de seu aplicativo, não publique alterações em um site que esteja servindo clientes publicados.</span><span class="sxs-lookup"><span data-stu-id="8a921-131">In order to provide continuity of service for your app, you should not publish changes to a site currently serving published clients.</span></span> <span data-ttu-id="8a921-132">Em vez disso, você deve criar um novo aplicativo móvel que sirva como uma duplicata.</span><span class="sxs-lookup"><span data-stu-id="8a921-132">Instead, you should create a new mobile app that serves as a duplicate.</span></span> <span data-ttu-id="8a921-133">Você pode colocar esse aplicativo no mesmo plano do Serviço de Aplicativo para evitar custos adicionais.</span><span class="sxs-lookup"><span data-stu-id="8a921-133">You can put this application on the same App Service plan to avoid incurring additional financial cost.</span></span>

<span data-ttu-id="8a921-134">Assim, você terá duas versões do aplicativo: uma que permanece inalterada e atende aos aplicativos publicados e outra que você pode atualizar e usar como uma nova versão do cliente.</span><span class="sxs-lookup"><span data-stu-id="8a921-134">You will then have two versions of the application: one which stays the same and serves published apps in the wild, and the other which you can then upgrade and target with a new client release.</span></span> <span data-ttu-id="8a921-135">Você pode mover e testar seu código de acordo com seu ritmo, mas deve aplicar as correções de bug feitas às duas versões.</span><span class="sxs-lookup"><span data-stu-id="8a921-135">You can move and test your code at your pace, but you should make sure that any bug fixes you make get applied to both.</span></span> <span data-ttu-id="8a921-136">Quando você achar que um número desejado de aplicativos cliente foram atualizados para a versão mais recente, será possível excluir o aplicativo migrado original, se assim quiser.</span><span class="sxs-lookup"><span data-stu-id="8a921-136">Once you feel that a desired number of client apps in the wild have updated to the latest version, you can delete the original migrated app if you desire.</span></span>

<span data-ttu-id="8a921-137">A estrutura completa para o processo de atualização é a seguinte:</span><span class="sxs-lookup"><span data-stu-id="8a921-137">The full outline for the upgrade process is as follows:</span></span>

1. <span data-ttu-id="8a921-138">Criar um novo Aplicativo Móvel</span><span class="sxs-lookup"><span data-stu-id="8a921-138">Create a new Mobile App</span></span>
2. <span data-ttu-id="8a921-139">Atualizar o projeto para usar os novos SDKs de Servidor</span><span class="sxs-lookup"><span data-stu-id="8a921-139">Update the project to use the new Server SDKs</span></span>
3. <span data-ttu-id="8a921-140">Lançar uma nova versão do aplicativo cliente</span><span class="sxs-lookup"><span data-stu-id="8a921-140">Release a new version of your client application</span></span>
4. <span data-ttu-id="8a921-141">(Opcional) Excluir sua instância original migrada</span><span class="sxs-lookup"><span data-stu-id="8a921-141">(Optional) Delete your original migrated instance</span></span>

## <span data-ttu-id="8a921-142"><a name="mobile-app-version"></a>Criando uma segunda instância do aplicativo</span><span class="sxs-lookup"><span data-stu-id="8a921-142"><a name="mobile-app-version"></a>Creating a second application instance</span></span>
<span data-ttu-id="8a921-143">A primeira etapa de atualização é criar o recurso de Aplicativo Móvel que hospedará a nova versão do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="8a921-143">The first step in upgrading is to create the Mobile App resource which will host the new version of your application.</span></span> <span data-ttu-id="8a921-144">Se você já tiver migrado um serviço móvel existente, convém criar esta versão no mesmo plano de hospedagem.</span><span class="sxs-lookup"><span data-stu-id="8a921-144">If you have already migrated an existing mobile service, you will want to create this version on the same hosting plan.</span></span> <span data-ttu-id="8a921-145">Abra o [Portal do Azure] e navegue até o aplicativo migrado.</span><span class="sxs-lookup"><span data-stu-id="8a921-145">Open the [Azure portal] and navigate to your migrated application.</span></span> <span data-ttu-id="8a921-146">Anote o Plano de Serviço de Aplicativo no qual ele está sendo executado.</span><span class="sxs-lookup"><span data-stu-id="8a921-146">Make note of the App Service Plan it is running on.</span></span>

<span data-ttu-id="8a921-147">Em seguida, crie a segunda instância de aplicativo seguindo as [instruções de criação de back-end do .NET](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#create-app).</span><span class="sxs-lookup"><span data-stu-id="8a921-147">Next, create the second application instance by following the [.NET backend creation instructions](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#create-app).</span></span> <span data-ttu-id="8a921-148">Quando receber uma solicitação para escolher o Plano de Serviço de Aplicativo ou o "plano de hospedagem", escolha o plano de seu aplicativo migrado.</span><span class="sxs-lookup"><span data-stu-id="8a921-148">When prompted to select you App Service Plan or "hosting plan" choose the plan of your migrated application.</span></span>

<span data-ttu-id="8a921-149">Você provavelmente desejará usar o mesmo banco de dados e Hub de Notificação, como você fez nos Serviços Móveis.</span><span class="sxs-lookup"><span data-stu-id="8a921-149">You will likely want to use the same database and Notification Hub as you did in Mobile Services.</span></span> <span data-ttu-id="8a921-150">Você pode copiar esses valores abrindo o [Portal do Azure], navegando até o aplicativo original e clicando em **Configurações** > **Configurações do aplicativo**.</span><span class="sxs-lookup"><span data-stu-id="8a921-150">You can copy these values by opening [Azure portal] and navigating to the original application, then click **Settings** > **Application settings**.</span></span> <span data-ttu-id="8a921-151">Em **Cadeias de Conexão**, copie `MS_NotificationHubConnectionString` e `MS_TableConnectionString`.</span><span class="sxs-lookup"><span data-stu-id="8a921-151">Under **Connection Strings**, copy `MS_NotificationHubConnectionString` and `MS_TableConnectionString`.</span></span> <span data-ttu-id="8a921-152">Navegue até o novo site de atualização e cole-as, substituindo os valores existentes.</span><span class="sxs-lookup"><span data-stu-id="8a921-152">Navigate to your new upgrade site and paste them in, overwriting any existing values.</span></span> <span data-ttu-id="8a921-153">Repita esse processo para quaisquer outras configurações de aplicativo exigidas por seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="8a921-153">Repeat this process for any other application settings your app needs.</span></span> <span data-ttu-id="8a921-154">Se você não estiver usando um serviço migrado, leia as cadeias de conexão e as configurações de aplicativo da guia **Configurar** da seção Serviços Móveis do [portal clássico do Azure].</span><span class="sxs-lookup"><span data-stu-id="8a921-154">If not using a migrated service, you can read connection strings and app settings from the **Configure** tab of the Mobile Services section of the [Azure classic portal].</span></span>

<span data-ttu-id="8a921-155">Faça uma cópia do projeto do aplicativo ASP.NET e publique-o em seu novo site.</span><span class="sxs-lookup"><span data-stu-id="8a921-155">Make a copy of the ASP.NET project for your application and publish it to your new site.</span></span> <span data-ttu-id="8a921-156">Usando uma cópia do seu aplicativo cliente atualizado com a nova URL, confirme que tudo funciona como o esperado.</span><span class="sxs-lookup"><span data-stu-id="8a921-156">Using a copy of your client application updated with the new URL, validate that everything works as expected.</span></span>

## <a name="updating-the-server-project"></a><span data-ttu-id="8a921-157">Atualizando o projeto de servidor</span><span class="sxs-lookup"><span data-stu-id="8a921-157">Updating the server project</span></span>
<span data-ttu-id="8a921-158">Os aplicativos móveis fornecem um novo [SDK do Servidor de Aplicativos Móveis] , que oferece praticamente a mesma funcionalidade que o tempo de execução de Serviços Móveis.</span><span class="sxs-lookup"><span data-stu-id="8a921-158">Mobile Apps provides a new [Mobile App Server SDK] which provides much of the same functionality as the Mobile Services runtime.</span></span> <span data-ttu-id="8a921-159">Primeiro, você deve remover todas as referências aos pacotes de Serviços Móveis.</span><span class="sxs-lookup"><span data-stu-id="8a921-159">First, you should remove all references to the Mobile Services packages.</span></span> <span data-ttu-id="8a921-160">No gerenciador de pacotes NuGet, pesquise por `WindowsAzure.MobileServices.Backend`</span><span class="sxs-lookup"><span data-stu-id="8a921-160">In the NuGet package manager, search for `WindowsAzure.MobileServices.Backend`.</span></span> <span data-ttu-id="8a921-161">A maioria dos aplicativos exibirá vários pacotes aqui, incluindo `WindowsAzure.MobileServices.Backend.Tables` e `WindowsAzure.MobileServices.Backend.Entity`.</span><span class="sxs-lookup"><span data-stu-id="8a921-161">Most apps will see several packages here, including `WindowsAzure.MobileServices.Backend.Tables` and `WindowsAzure.MobileServices.Backend.Entity`.</span></span> <span data-ttu-id="8a921-162">Nesse caso, inicie com o pacote mais baixo na árvore de dependência, como `Entity`, e remova-o</span><span class="sxs-lookup"><span data-stu-id="8a921-162">In such a case, start with the lowest package in the dependency tree, such as `Entity`, and remove it.</span></span> <span data-ttu-id="8a921-163">Quando solicitado, não remova todos os pacotes dependentes.</span><span class="sxs-lookup"><span data-stu-id="8a921-163">When prompted, do not remove all dependant packages.</span></span> <span data-ttu-id="8a921-164">Repita este processo até remover o próprio `WindowsAzure.MobileServices.Backend`.</span><span class="sxs-lookup"><span data-stu-id="8a921-164">Repeat this process until you have removed `WindowsAzure.MobileServices.Backend` itself.</span></span>

<span data-ttu-id="8a921-165">Neste momento, você terá um projeto que não faz referência a SDKs de Serviços Móveis.</span><span class="sxs-lookup"><span data-stu-id="8a921-165">At this point you will have a project that no longer references Mobile Services SDKs.</span></span>

<span data-ttu-id="8a921-166">Em seguida, você adicionará referências ao SDK dos Aplicativos Móveis.</span><span class="sxs-lookup"><span data-stu-id="8a921-166">Next you will add references the Mobile Apps SDK.</span></span> <span data-ttu-id="8a921-167">Para essa migração, a maioria dos desenvolvedores deseja baixar e instalar o pacote `Microsoft.Azure.Mobile.Server.Quickstart` , pois ele vai receber todo o conjunto necessário.</span><span class="sxs-lookup"><span data-stu-id="8a921-167">For this upgrade, most developers will want to download and install the `Microsoft.Azure.Mobile.Server.Quickstart` package, as this will pull in the entire required set.</span></span>

<span data-ttu-id="8a921-168">Haverá alguns erros de compilador resultantes de diferenças entre os SDKs, mas eles são fáceis de resolver e serão abordados posteriormente, ainda nesta seção.</span><span class="sxs-lookup"><span data-stu-id="8a921-168">There will be quite a few compiler errors resulting from differences between the SDKs, but these are easy to address and are covered in the rest of this section.</span></span>

### <a name="base-configuration"></a><span data-ttu-id="8a921-169">Configuração base</span><span class="sxs-lookup"><span data-stu-id="8a921-169">Base configuration</span></span>
<span data-ttu-id="8a921-170">Em seguida, em WebApiConfig.cs, você pode substituir:</span><span class="sxs-lookup"><span data-stu-id="8a921-170">Then, in WebApiConfig.cs, you can replace:</span></span>

        // Use this class to set configuration options for your mobile service
        ConfigOptions options = new ConfigOptions();

        // Use this class to set WebAPI configuration options
        HttpConfiguration config = ServiceConfig.Initialize(new ConfigBuilder(options));

<span data-ttu-id="8a921-171">por:</span><span class="sxs-lookup"><span data-stu-id="8a921-171">with</span></span>

        HttpConfiguration config = new HttpConfiguration();
        new MobileAppConfiguration()
            .UseDefaultConfiguration()
        .ApplyTo(config);

> [!NOTE]
> <span data-ttu-id="8a921-172">Se desejar saber mais sobre o novo SDK de servidor .NET e como adicionar ou remover recursos do seu aplicativo, confira o tópico [Como usar o SDK do servidor .NET] .</span><span class="sxs-lookup"><span data-stu-id="8a921-172">If you wish to learn more about the new .NET server SDK and how to add/remove features from your app, please see the [How to use the .NET server SDK] topic.</span></span>
>
>

<span data-ttu-id="8a921-173">Se o seu aplicativo usar os recursos de autenticação, você também precisará registrar um middleware OWIN.</span><span class="sxs-lookup"><span data-stu-id="8a921-173">If your app makes use of the authentication features, you will also need to register an OWIN middleware.</span></span> <span data-ttu-id="8a921-174">Nesse caso, você deve mover o código de configuração acima para uma nova classe de inicialização do OWIN.</span><span class="sxs-lookup"><span data-stu-id="8a921-174">In this case, you should move the above configuration code into a new OWIN Startup class.</span></span>

1. <span data-ttu-id="8a921-175">Adicione o pacote NuGet `Microsoft.Owin.Host.SystemWeb` se já não estiver incluído em seu projeto.</span><span class="sxs-lookup"><span data-stu-id="8a921-175">Add the NuGet package `Microsoft.Owin.Host.SystemWeb` if it is not already included in your project.</span></span>
2. <span data-ttu-id="8a921-176">No Visual Studio, clique com o botão direito do mouse em seu projeto e selecione **Adicionar** -> **Novo Item**.</span><span class="sxs-lookup"><span data-stu-id="8a921-176">In Visual Studio, right click on your project and select **Add** -> **New Item**.</span></span> <span data-ttu-id="8a921-177">Selecione **Web** -> **Geral** -> **Classe de inicialização OWIN**.</span><span class="sxs-lookup"><span data-stu-id="8a921-177">Select **Web** -> **General** -> **OWIN Startup class**.</span></span>
3. <span data-ttu-id="8a921-178">Mova o código acima relativo a MobileAppConfiguration de `WebApiConfig.Register()` para o método `Configuration()` de sua nova classe de inicialização.</span><span class="sxs-lookup"><span data-stu-id="8a921-178">Move the above code for MobileAppConfiguration from `WebApiConfig.Register()` to the `Configuration()` method of your new startup class.</span></span>

<span data-ttu-id="8a921-179">Verifique se o método `Configuration()` termina em:</span><span class="sxs-lookup"><span data-stu-id="8a921-179">Make sure the `Configuration()` method ends with:</span></span>

        app.UseWebApi(config)
        app.UseAppServiceAuthentication(config);

<span data-ttu-id="8a921-180">Existem outras alterações relacionadas à autenticação que são abordadas na seção completa sobre autenticação abaixo.</span><span class="sxs-lookup"><span data-stu-id="8a921-180">There are additional changes related to authentication which are covered in the full authentication section below.</span></span>

### <a name="working-with-data"></a><span data-ttu-id="8a921-181">Trabalhando com dados</span><span class="sxs-lookup"><span data-stu-id="8a921-181">Working with Data</span></span>
<span data-ttu-id="8a921-182">Nos Serviços Móveis, o nome do aplicativo móvel serviu como nome do esquema padrão na configuração do Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="8a921-182">In Mobile Services, the mobile app name served as the default schema name in the Entity Framework setup.</span></span>

<span data-ttu-id="8a921-183">Para garantir que você tenha o mesmo esquema referenciado anteriormente, use o seguinte a fim de definir o esquema para seu aplicativo no DbContext:</span><span class="sxs-lookup"><span data-stu-id="8a921-183">To ensure that you have the same schema being referenced as before, use the following to set the schema in the DbContext for your application:</span></span>

        string schema = System.Configuration.ConfigurationManager.AppSettings.Get("MS_MobileServiceName");

<span data-ttu-id="8a921-184">Verifique se você tem o MS_MobileServiceName definido ao executar as ações acima.</span><span class="sxs-lookup"><span data-stu-id="8a921-184">Please make sure you have MS_MobileServiceName set if you do the above.</span></span> <span data-ttu-id="8a921-185">Você pode fornecer outro nome de esquema se o seu aplicativo o tiver personalizado anteriormente.</span><span class="sxs-lookup"><span data-stu-id="8a921-185">You can also provide another schema name if your application customized this previously.</span></span>

### <a name="system-properties"></a><span data-ttu-id="8a921-186">Propriedades do Sistema</span><span class="sxs-lookup"><span data-stu-id="8a921-186">System Properties</span></span>
#### <a name="naming"></a><span data-ttu-id="8a921-187">Nomenclatura</span><span class="sxs-lookup"><span data-stu-id="8a921-187">Naming</span></span>
<span data-ttu-id="8a921-188">No SDK do servidor dos Serviços Móveis do Azure, as propriedades do sistema sempre contêm um prefixo sublinhado duplo (`__`) para as propriedades:</span><span class="sxs-lookup"><span data-stu-id="8a921-188">In the Azure Mobile Services server SDK, system properties always contain a double underscore (`__`) prefix for the properties:</span></span>

* <span data-ttu-id="8a921-189">__createdAt</span><span class="sxs-lookup"><span data-stu-id="8a921-189">__createdAt</span></span>
* <span data-ttu-id="8a921-190">__updatedAt</span><span class="sxs-lookup"><span data-stu-id="8a921-190">__updatedAt</span></span>
* <span data-ttu-id="8a921-191">__deleted</span><span class="sxs-lookup"><span data-stu-id="8a921-191">__deleted</span></span>
* <span data-ttu-id="8a921-192">__version</span><span class="sxs-lookup"><span data-stu-id="8a921-192">__version</span></span>

<span data-ttu-id="8a921-193">Os SDKs do cliente de Serviços Móveis têm uma lógica especial para analisar as propriedades do sistema nesse formato.</span><span class="sxs-lookup"><span data-stu-id="8a921-193">The Mobile Services client SDKs have special logic for parsing system properties in this format.</span></span>

<span data-ttu-id="8a921-194">Nos Aplicativos Móveis do Azure, as propriedades do sistema não têm um formato especial e têm os seguintes nomes:</span><span class="sxs-lookup"><span data-stu-id="8a921-194">In Azure Mobile Apps, system properties no longer have a special format and have the following names:</span></span>

* <span data-ttu-id="8a921-195">createdAt</span><span class="sxs-lookup"><span data-stu-id="8a921-195">createdAt</span></span>
* <span data-ttu-id="8a921-196">updatedAt</span><span class="sxs-lookup"><span data-stu-id="8a921-196">updatedAt</span></span>
* <span data-ttu-id="8a921-197">deleted</span><span class="sxs-lookup"><span data-stu-id="8a921-197">deleted</span></span>
* <span data-ttu-id="8a921-198">version</span><span class="sxs-lookup"><span data-stu-id="8a921-198">version</span></span>

<span data-ttu-id="8a921-199">Os SDKs de cliente de Aplicativos Móveis usam novos nomes de propriedades do sistema; portanto, não é necessário alterar o código do cliente.</span><span class="sxs-lookup"><span data-stu-id="8a921-199">The Mobile Apps client SDKs use the new system properties names, so no changes are required to client code.</span></span> <span data-ttu-id="8a921-200">No entanto, se você estiver fazendo chamadas REST diretamente para seu serviço, deverá alterar suas consultas adequadamente.</span><span class="sxs-lookup"><span data-stu-id="8a921-200">However, if you are directly making REST calls to your service then you should change your queries accordingly.</span></span>

#### <a name="local-store"></a><span data-ttu-id="8a921-201">Armazenamento local</span><span class="sxs-lookup"><span data-stu-id="8a921-201">Local store</span></span>
<span data-ttu-id="8a921-202">As alterações dos nomes das propriedades do sistema significam que um banco de dados local de sincronização offline para os Serviços Móveis não é compatível com os Aplicativos Móveis.</span><span class="sxs-lookup"><span data-stu-id="8a921-202">The changes to the names of system properties mean that an offline sync local database for Mobile Services is not compatible with Mobile Apps.</span></span> <span data-ttu-id="8a921-203">Se possível, você deve evitar a atualização de aplicativos clientes dos Serviços Móveis para Aplicativos Móveis até que as alterações pendentes sejam enviadas ao servidor.</span><span class="sxs-lookup"><span data-stu-id="8a921-203">If possible, you should avoid upgrading client apps from Mobile Services to Mobile Apps until after pending changes have been sent to the server.</span></span> <span data-ttu-id="8a921-204">Depois disso, o aplicativo atualizado deverá usar um novo nome de arquivo de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="8a921-204">Then, the upgraded app should use a new database filename.</span></span>

<span data-ttu-id="8a921-205">Se um aplicativo cliente for atualizado de Serviços Móveis para Aplicativos Móveis enquanto houver alterações offline pendentes na fila de operação, o banco de dados do sistema deverá ser atualizado para usar os novos nomes de coluna.</span><span class="sxs-lookup"><span data-stu-id="8a921-205">If a client app is upgraded from Mobile Services to Mobile Apps while there are pending offline changes in the operation queue, then the system database must be updated to use the new column names.</span></span> <span data-ttu-id="8a921-206">No iOS, isso pode ser obtido usando migrações leves para alterar os nomes de coluna.</span><span class="sxs-lookup"><span data-stu-id="8a921-206">On iOS, this can be achieved using lightweight migrations to change the column names.</span></span> <span data-ttu-id="8a921-207">No Android e no cliente gerenciado do .NET, você deve escrever um SQL personalizado para renomear as colunas das tabelas de objeto de dados.</span><span class="sxs-lookup"><span data-stu-id="8a921-207">On Android and the .NET managed client, you should write custom SQL to rename the columns for your data object tables.</span></span>

<span data-ttu-id="8a921-208">No iOS, você deve alterar seu esquema de dados básicos para suas entidades de dados para que correspondam ao seguinte.</span><span class="sxs-lookup"><span data-stu-id="8a921-208">On iOS, you should change your Core Data schema for your data entities to match the following.</span></span> <span data-ttu-id="8a921-209">Observe que as propriedades `createdAt`, `updatedAt` e `version` não têm mais um prefixo `ms_`:</span><span class="sxs-lookup"><span data-stu-id="8a921-209">Note that the properties `createdAt`, `updatedAt` and `version` no longer have an `ms_` prefix:</span></span>

| <span data-ttu-id="8a921-210">Atributo</span><span class="sxs-lookup"><span data-stu-id="8a921-210">Attribute</span></span> | <span data-ttu-id="8a921-211">Tipo</span><span class="sxs-lookup"><span data-stu-id="8a921-211">Type</span></span> | <span data-ttu-id="8a921-212">Observação</span><span class="sxs-lookup"><span data-stu-id="8a921-212">Note</span></span> |
| --- | --- | --- |
| <span data-ttu-id="8a921-213">ID</span><span class="sxs-lookup"><span data-stu-id="8a921-213">id</span></span> |<span data-ttu-id="8a921-214">Cadeia de caracteres, marcadas como obrigatórias</span><span class="sxs-lookup"><span data-stu-id="8a921-214">String, marked required</span></span> |<span data-ttu-id="8a921-215">chave primária no repositório remoto</span><span class="sxs-lookup"><span data-stu-id="8a921-215">primary key in remote store</span></span> |
| <span data-ttu-id="8a921-216">createdAt</span><span class="sxs-lookup"><span data-stu-id="8a921-216">createdAt</span></span> |<span data-ttu-id="8a921-217">Data</span><span class="sxs-lookup"><span data-stu-id="8a921-217">Date</span></span> |<span data-ttu-id="8a921-218">(opcional) é mapeado para a propriedade do sistema createdAt</span><span class="sxs-lookup"><span data-stu-id="8a921-218">(optional) maps to createdAt system property</span></span> |
| <span data-ttu-id="8a921-219">updatedAt</span><span class="sxs-lookup"><span data-stu-id="8a921-219">updatedAt</span></span> |<span data-ttu-id="8a921-220">Data</span><span class="sxs-lookup"><span data-stu-id="8a921-220">Date</span></span> |<span data-ttu-id="8a921-221">(opcional) é mapeado para a propriedade do sistema updatedAt</span><span class="sxs-lookup"><span data-stu-id="8a921-221">(optional) maps to updatedAt system property</span></span> |
| <span data-ttu-id="8a921-222">version</span><span class="sxs-lookup"><span data-stu-id="8a921-222">version</span></span> |<span data-ttu-id="8a921-223">Cadeia de caracteres</span><span class="sxs-lookup"><span data-stu-id="8a921-223">String</span></span> |<span data-ttu-id="8a921-224">(opcional) usado para detectar conflitos, é mapeado para version</span><span class="sxs-lookup"><span data-stu-id="8a921-224">(optional) used to detect conflicts, maps to version</span></span> |

#### <a name="querying-system-properties"></a><span data-ttu-id="8a921-225">Consultando propriedades do sistema</span><span class="sxs-lookup"><span data-stu-id="8a921-225">Querying system properties</span></span>
<span data-ttu-id="8a921-226">Nos Serviços Móveis do Azure, as propriedades do sistema não são enviadas por padrão, mas somente quando são solicitadas usando a cadeia de caracteres de consulta `__systemProperties`.</span><span class="sxs-lookup"><span data-stu-id="8a921-226">In Azure Mobile Services, system properties are not sent by default, but only when they are requested using the query string `__systemProperties`.</span></span> <span data-ttu-id="8a921-227">Em contraste, no sistema de Aplicativos Móveis do Azure, as propriedades estão **sempre selecionadas** , pois fazem parte do modelo de objeto do SDK do servidor.</span><span class="sxs-lookup"><span data-stu-id="8a921-227">In contrast, in Azure Mobile Apps system properties are **always selected** since they are part of the server SDK object model.</span></span>

<span data-ttu-id="8a921-228">Essa alteração afeta principalmente as implementações personalizadas dos gerenciadores de domínio, como extensões de `MappedEntityDomainManager`.</span><span class="sxs-lookup"><span data-stu-id="8a921-228">This change mainly impacts custom implementations of domain managers, such as extensions of `MappedEntityDomainManager`.</span></span> <span data-ttu-id="8a921-229">Nos Serviços Móveis, se um cliente nunca solicitar uma propriedade do sistema, será possível usar um `MappedEntityDomainManager` que não mapeie realmente todas as propriedades.</span><span class="sxs-lookup"><span data-stu-id="8a921-229">In Mobile Services, if a client never requests any system properties, it is possible to use a `MappedEntityDomainManager` that does not actually map all properties.</span></span> <span data-ttu-id="8a921-230">No entanto, nos Aplicativos Móveis do Azure, essas propriedades não mapeadas causarão um erro em consultas GET.</span><span class="sxs-lookup"><span data-stu-id="8a921-230">However, in Azure Mobile Apps, these unmapped properties will cause an error in GET queries.</span></span>

<span data-ttu-id="8a921-231">A maneira mais fácil de resolver o problema é modificando os DTOs para que herdem de `ITableData` em vez de `EntityData`.</span><span class="sxs-lookup"><span data-stu-id="8a921-231">The easiest way to resolve the issue is to modify your DTOs so that they inherit from `ITableData` instead of `EntityData`.</span></span> <span data-ttu-id="8a921-232">Em seguida, adicione o atributo `[NotMapped]` aos campos que devem ser omitidos.</span><span class="sxs-lookup"><span data-stu-id="8a921-232">Then, add the `[NotMapped]` attribute to the fields that should be omitted.</span></span>

<span data-ttu-id="8a921-233">Por exemplo, os itens abaixo definem `TodoItem` sem propriedades de sistema:</span><span class="sxs-lookup"><span data-stu-id="8a921-233">For example, the following defines `TodoItem` with no system properties:</span></span>

    using System.ComponentModel.DataAnnotations.Schema;

    public class TodoItem : ITableData
    {
        public string Text { get; set; }

        public bool Complete { get; set; }

        public string Id { get; set; }

        [NotMapped]
        public DateTimeOffset? CreatedAt { get; set; }

        [NotMapped]
        public DateTimeOffset? UpdatedAt { get; set; }

        [NotMapped]
        public bool Deleted { get; set; }

        [NotMapped]
        public byte[] Version { get; set; }
    }

<span data-ttu-id="8a921-234">Observação: se você obtiver erros em `NotMapped`, adicione uma referência ao assembly `System.ComponentModel.DataAnnotations`.</span><span class="sxs-lookup"><span data-stu-id="8a921-234">Note: if you get errors on `NotMapped`, add a reference to the assembly `System.ComponentModel.DataAnnotations`.</span></span>

### <a name="cors"></a><span data-ttu-id="8a921-235">CORS</span><span class="sxs-lookup"><span data-stu-id="8a921-235">CORS</span></span>
<span data-ttu-id="8a921-236">Os Serviços Móveis incluíram algum suporte a CORS encapsulando a solução CORS ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="8a921-236">Mobile Services included some support for CORS by wrapping the ASP.NET CORS solution.</span></span> <span data-ttu-id="8a921-237">Essa camada de encapsulamento foi removida para dar ao desenvolvedor mais controle, para que você possa aproveitar diretamente o [suporte ao CORS ASP.NET](http://www.asp.net/web-api/overview/security/enabling-cross-origin-requests-in-web-api).</span><span class="sxs-lookup"><span data-stu-id="8a921-237">This wrapping layer has been removed to give the developer more control, so you can directly leverage [ASP.NET CORS support](http://www.asp.net/web-api/overview/security/enabling-cross-origin-requests-in-web-api).</span></span>

<span data-ttu-id="8a921-238">As principais áreas com que você deve se preocupar ao usar o CORS são os cabeçalhos `eTag` e `Location`, que devem ser permitidos para que os SDKs do cliente funcionem corretamente.</span><span class="sxs-lookup"><span data-stu-id="8a921-238">The main areas of concern if using CORS are that the `eTag` and `Location` headers must be allowed in order for the client SDKs to work properly.</span></span>

### <a name="push-notifications"></a><span data-ttu-id="8a921-239">Notificações por Push</span><span class="sxs-lookup"><span data-stu-id="8a921-239">Push Notifications</span></span>
<span data-ttu-id="8a921-240">Para envios por push, o item principal que você pode descobrir estar ausente no SDK do Servidor é a classe PushRegistrationHandler.</span><span class="sxs-lookup"><span data-stu-id="8a921-240">For push, the main item that you may find missing from the Server SDK is the PushRegistrationHandler class.</span></span> <span data-ttu-id="8a921-241">Registros são tratados de forma ligeiramente diferente em aplicativos móveis, e registros sem marca registros são habilitados por padrão.</span><span class="sxs-lookup"><span data-stu-id="8a921-241">Registrations are handled slightly differently in Mobile Apps, and tagless registrations are enabled by default.</span></span> <span data-ttu-id="8a921-242">Gerenciar as marcas pode ser feito por meio de APIs personalizados.</span><span class="sxs-lookup"><span data-stu-id="8a921-242">Managing tags may be accomplished by using custom APIs.</span></span> <span data-ttu-id="8a921-243">Confira as instruções de [registro de marcas](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#tags) para saber mais.</span><span class="sxs-lookup"><span data-stu-id="8a921-243">Please see the [registering for tags](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#tags) instructions for more information.</span></span>

### <a name="scheduled-jobs"></a><span data-ttu-id="8a921-244">Trabalhos agendados</span><span class="sxs-lookup"><span data-stu-id="8a921-244">Scheduled Jobs</span></span>
<span data-ttu-id="8a921-245">Os trabalhos agendados não são criados em Aplicativos Móveis; portanto, todos os trabalhos existentes que você tem no back-end do .NET precisam ser atualizados individualmente.</span><span class="sxs-lookup"><span data-stu-id="8a921-245">Scheduled jobs are not built into Mobile Apps, so any existing jobs that you have in your .NET backend will need to be upgraded individually.</span></span> <span data-ttu-id="8a921-246">Uma opção é criar um [Trabalho Web] agendado no site de código do Aplicativo Móvel.</span><span class="sxs-lookup"><span data-stu-id="8a921-246">One option is to create a scheduled [Web Job] on the Mobile App code site.</span></span> <span data-ttu-id="8a921-247">Você também pode configurar um controlador que contenha o código de trabalho e configurar o [Agendador do Azure] para atingir o ponto de extremidade conforme o esperado.</span><span class="sxs-lookup"><span data-stu-id="8a921-247">You could also set up a controller that holds your job code and configure the [Azure Scheduler] to hit that endpoint on the expected schedule.</span></span>

### <a name="miscellaneous-changes"></a><span data-ttu-id="8a921-248">Alterações diversas</span><span class="sxs-lookup"><span data-stu-id="8a921-248">Miscellaneous changes</span></span>
<span data-ttu-id="8a921-249">Todos os ApiControllers que serão consumidos por um cliente móvel agora devem ter o atributo `[MobileAppController]` .</span><span class="sxs-lookup"><span data-stu-id="8a921-249">All ApiControllers which will be consumed by a mobile client must now have the `[MobileAppController]` attribute.</span></span> <span data-ttu-id="8a921-250">Isso não é mais incluído por padrão para que os outros ApiControllers não sejam afetados por formatadores móveis.</span><span class="sxs-lookup"><span data-stu-id="8a921-250">This is no longer included by default so that other ApiControllers to go unaffected by the mobile formatters.</span></span>

<span data-ttu-id="8a921-251">O objeto `ApiServices` não faz mais parte do SDK.</span><span class="sxs-lookup"><span data-stu-id="8a921-251">The `ApiServices` object is no longer part of the SDK.</span></span> <span data-ttu-id="8a921-252">Para acessar configurações de Aplicativo móvel, você pode usar o seguinte:</span><span class="sxs-lookup"><span data-stu-id="8a921-252">To access Mobile App settings, you can use the following:</span></span>

    MobileAppSettingsDictionary settings = this.Configuration.GetMobileAppSettingsProvider().GetMobileAppSettings();

<span data-ttu-id="8a921-253">Da mesma forma, o log agora é realizado usando a gravação de rastreamento padrão do ASP.NET:</span><span class="sxs-lookup"><span data-stu-id="8a921-253">Similarly, logging is now accomplished using the standard ASP.NET trace writing:</span></span>

    ITraceWriter traceWriter = this.Configuration.Services.GetTraceWriter();
    traceWriter.Info("Hello, World");  

## <span data-ttu-id="8a921-254"><a name="authentication"></a>Considerações sobre autenticação</span><span class="sxs-lookup"><span data-stu-id="8a921-254"><a name="authentication"></a>Authentication considerations</span></span>
<span data-ttu-id="8a921-255">Os componentes de autenticação dos Serviços Móveis foram movidos para o recurso Autenticação/Autorização do Serviço de Aplicativo.</span><span class="sxs-lookup"><span data-stu-id="8a921-255">The authentication components of Mobile Services have now been moved into the App Service Authentication/Authorization feature.</span></span> <span data-ttu-id="8a921-256">Você pode aprender a habilitar essa opção para seu site lendo o tópico [Adicionar autenticação ao seu aplicativo móvel](app-service-mobile-ios-get-started-users.md) .</span><span class="sxs-lookup"><span data-stu-id="8a921-256">You can learn about enabling this for your site by reading the [Add authentication to your mobile app](app-service-mobile-ios-get-started-users.md) topic.</span></span>

<span data-ttu-id="8a921-257">Para alguns provedores, como o AAD, o Facebook e o Google, você deverá aproveitar o registro existente em seu aplicativo de cópia.</span><span class="sxs-lookup"><span data-stu-id="8a921-257">For some providers, such as AAD, Facebook, and Google, you should be able to leverage the existing registration from your copy application.</span></span> <span data-ttu-id="8a921-258">Basta navegar até o portal do provedor de identidade e adicionar uma nova URL de redirecionamento ao registro.</span><span class="sxs-lookup"><span data-stu-id="8a921-258">You simply need to navigate to the identity provider's portal and add a new redirect URL to the registration.</span></span> <span data-ttu-id="8a921-259">Em seguida, configure a Autenticação/Autorização do Serviço de Aplicativo com a ID do cliente e o segredo.</span><span class="sxs-lookup"><span data-stu-id="8a921-259">Then configure App Service Authentication/Authorization with the client ID and secret.</span></span>

### <a name="controller-action-authorization"></a><span data-ttu-id="8a921-260">Autorização de ação do controlador</span><span class="sxs-lookup"><span data-stu-id="8a921-260">Controller action authorization</span></span>
<span data-ttu-id="8a921-261">Todas as instâncias do atributo `[AuthorizeLevel(AuthorizationLevel.User)]` agora devem ser alterados para usar o atributo ASP.NET padrão `[Authorize]`.</span><span class="sxs-lookup"><span data-stu-id="8a921-261">Any instances of the `[AuthorizeLevel(AuthorizationLevel.User)]` attribute must now be changed to use the standard ASP.NET `[Authorize]` attribute.</span></span> <span data-ttu-id="8a921-262">Além disso, controladores são agora anônimos por padrão, como em outros aplicativos ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="8a921-262">Additionally, controllers are now Anonymous by default, as in other ASP.NET applications.</span></span>
<span data-ttu-id="8a921-263">Se você estiver usando uma das outras opções de AuthorizeLevel, como administrador ou aplicativo, observe que eles desapareceram.</span><span class="sxs-lookup"><span data-stu-id="8a921-263">If you were using one of the other AuthorizeLevel options, such as Admin or Application, please note that these are gone.</span></span> <span data-ttu-id="8a921-264">Agora você pode configurar AuthorizationFilters para segredos compartilhados ou configurar uma entidade de serviço do AAD para permitir chamadas serviço a serviço com segurança.</span><span class="sxs-lookup"><span data-stu-id="8a921-264">You can instead set up AuthorizationFilters for shared secrets or configure an AAD Service Principal to enable service-to-service calls securely.</span></span>

### <a name="getting-additional-user-information"></a><span data-ttu-id="8a921-265">Obtendo informações adicionais do usuário</span><span class="sxs-lookup"><span data-stu-id="8a921-265">Getting additional user information</span></span>
<span data-ttu-id="8a921-266">Você pode obter informações adicionais do usuário, incluindo tokens de acesso usando o método `GetAppServiceIdentityAsync()` :</span><span class="sxs-lookup"><span data-stu-id="8a921-266">You can get additional user information, including access tokens through the `GetAppServiceIdentityAsync()` method:</span></span>

        FacebookCredentials creds = await this.User.GetAppServiceIdentityAsync<FacebookCredentials>();

<span data-ttu-id="8a921-267">Além disso, se o seu aplicativo tem dependências de IDs de usuário, como o armazenamento deles em um banco de dados, é importante observar que as IDs de usuário entre os Serviços Móveis e Aplicativos Móveis do Serviço de Aplicativo são diferentes.</span><span class="sxs-lookup"><span data-stu-id="8a921-267">Additionally, if your application takes dependencies on user IDs, such as storing them in a database, it is important to note that the user IDs between Mobile Services and App Service Mobile Apps are different.</span></span> <span data-ttu-id="8a921-268">No entanto, você ainda pode obter a ID de usuário dos Serviços Móveis.</span><span class="sxs-lookup"><span data-stu-id="8a921-268">You can still get the Mobile Services User ID, though.</span></span> <span data-ttu-id="8a921-269">Todas as subclasses ProviderCredentials têm uma propriedade UserId.</span><span class="sxs-lookup"><span data-stu-id="8a921-269">All of the ProviderCredentials subclasses have a UserId property.</span></span> <span data-ttu-id="8a921-270">Continuando do exemplo anterior:</span><span class="sxs-lookup"><span data-stu-id="8a921-270">So continuing from the example before:</span></span>

        string mobileServicesUserId = creds.Provider + ":" + creds.UserId;

<span data-ttu-id="8a921-271">Se o aplicativo usa todas as dependências das IDs de usuário, é importante aproveitar o mesmo registro com um provedor de identidade, se possível.</span><span class="sxs-lookup"><span data-stu-id="8a921-271">If your app does take any dependencies on user IDs, it is important that you leverage the same registration with an identity provider if possible.</span></span> <span data-ttu-id="8a921-272">IDs de usuário normalmente têm o escopo para o registro do aplicativo que foi usado, portanto, introduzir um novo registro pode criar problemas com os dados de usuários correspondentes.</span><span class="sxs-lookup"><span data-stu-id="8a921-272">User IDs are typically scoped to the application registration that was used, so introducing a new registration could create problems with matching users to their data.</span></span>

### <a name="custom-authentication"></a><span data-ttu-id="8a921-273">Autenticação personalizada</span><span class="sxs-lookup"><span data-stu-id="8a921-273">Custom authentication</span></span>
<span data-ttu-id="8a921-274">Se o seu aplicativo está usando uma solução de autenticação personalizada, você deve verificar se o site atualizado tem acesso ao sistema.</span><span class="sxs-lookup"><span data-stu-id="8a921-274">If your app is using a custom authentication solution, you will want to make sure that the upgraded site has access to the system.</span></span> <span data-ttu-id="8a921-275">Siga as novas instruções de autenticação personalizada em [Visão geral do SDK do servidor .NET] para integrar sua solução.</span><span class="sxs-lookup"><span data-stu-id="8a921-275">Follow the new instructions for custom authentication in the [.NET server SDK overview] to integrate your solution.</span></span> <span data-ttu-id="8a921-276">Observe que os componentes de autenticação personalizada ainda estão em visualização.</span><span class="sxs-lookup"><span data-stu-id="8a921-276">Please note that the custom authentication components are still in preview.</span></span>

## <span data-ttu-id="8a921-277"><a name="updating-clients"></a>Atualizando de clientes</span><span class="sxs-lookup"><span data-stu-id="8a921-277"><a name="updating-clients"></a>Updating clients</span></span>
<span data-ttu-id="8a921-278">Quando você tiver um back-end do Aplicativo Móvel operacional, poderá trabalhar em uma nova versão de seu aplicativo cliente para consumi-lo.</span><span class="sxs-lookup"><span data-stu-id="8a921-278">Once you have an operational Mobile App backend, you can work on a new version of your client application which consumes it.</span></span> <span data-ttu-id="8a921-279">Os Aplicativos Móveis também incluem uma nova versão dos SDKs do cliente e, assim como a atualização do servidor acima, você precisará remover todas as referências aos SDKs dos Serviços Móveis antes de instalar as versões dos Aplicativos Móveis.</span><span class="sxs-lookup"><span data-stu-id="8a921-279">Mobile Apps also includes a new version of the client SDKs, and similar to the server upgrade above, you will need to remove all references to the Mobile Services SDKs before installing the Mobile Apps versions.</span></span>

<span data-ttu-id="8a921-280">Uma das principais alterações entre as versões é que os construtores não exigem mais uma chave de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="8a921-280">One of the main changes between the versions is that the constructors no longer require an application key.</span></span> <span data-ttu-id="8a921-281">Agora, basta passar a URL do Aplicativo Móvel.</span><span class="sxs-lookup"><span data-stu-id="8a921-281">You now simply pass in the URL of your Mobile App.</span></span> <span data-ttu-id="8a921-282">Por exemplo, em clientes .NET, o construtor `MobileServiceClient` agora é:</span><span class="sxs-lookup"><span data-stu-id="8a921-282">For example, on the .NET clients, the `MobileServiceClient` constructor is now:</span></span>

        public static MobileServiceClient MobileService = new MobileServiceClient(
            "https://contoso.azurewebsites.net", // URL of the Mobile App
        );

<span data-ttu-id="8a921-283">Você pode ler sobre como instalar novos SDKs e usar a nova estrutura nos links abaixo:</span><span class="sxs-lookup"><span data-stu-id="8a921-283">You can read about installing the new SDKs and using the new structure via the links below:</span></span>

* [<span data-ttu-id="8a921-284">iOS versão 3.0.0 ou posterior</span><span class="sxs-lookup"><span data-stu-id="8a921-284">iOS version 3.0.0 or later</span></span>](app-service-mobile-ios-how-to-use-client-library.md)
* [<span data-ttu-id="8a921-285">.NET (Windows/Xamarin) versão 2.0.0 ou posterior</span><span class="sxs-lookup"><span data-stu-id="8a921-285">.NET (Windows/Xamarin) version 2.0.0 or later</span></span>](app-service-mobile-dotnet-how-to-use-client-library.md)

<span data-ttu-id="8a921-286">Se o seu aplicativo usa notificações por push, anote as instruções de registro específicas para cada plataforma, pois houveram algumas alterações também.</span><span class="sxs-lookup"><span data-stu-id="8a921-286">If your application makes use of push notifications, make note of the specific registration instructions for each platform, as there have been some changes there as well.</span></span>

<span data-ttu-id="8a921-287">Quando a nova versão do cliente estiver pronta, faça um teste em seu projeto de servidor atualizado.</span><span class="sxs-lookup"><span data-stu-id="8a921-287">When you have the new client version ready, try it out against your upgraded server project.</span></span> <span data-ttu-id="8a921-288">Após validar o funcionamento, libere uma nova versão de seu aplicativo para os clientes.</span><span class="sxs-lookup"><span data-stu-id="8a921-288">After validating that it works, you can release a new version of your application to customers.</span></span> <span data-ttu-id="8a921-289">Eventualmente, depois que seus clientes tiverem a oportunidade de receber essas atualizações, você poderá excluir a versão de Serviços Móveis do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="8a921-289">Eventually, once your customers have had a chance to receive these updates, you can delete the Mobile Services version of your app.</span></span> <span data-ttu-id="8a921-290">Neste ponto, você atualizou completamente para um aplicativo móvel de serviço de aplicativo usando o servidor de aplicativos móveis SDK mais recente.</span><span class="sxs-lookup"><span data-stu-id="8a921-290">At this point, you have completely upgraded to an App Service Mobile App using the latest Mobile Apps server SDK.</span></span>

<!-- URLs. -->

<span data-ttu-id="8a921-291">[Portal do Azure]: https://portal.azure.com/</span><span class="sxs-lookup"><span data-stu-id="8a921-291">[Azure portal]: https://portal.azure.com/</span></span>
<span data-ttu-id="8a921-292">[portal clássico do Azure]: https://manage.windowsazure.com/</span><span class="sxs-lookup"><span data-stu-id="8a921-292">[Azure classic portal]: https://manage.windowsazure.com/</span></span>
<span data-ttu-id="8a921-293">[O que são os Aplicativos Móveis?]: app-service-mobile-value-prop.md</span><span class="sxs-lookup"><span data-stu-id="8a921-293">[What are Mobile Apps?]: app-service-mobile-value-prop.md</span></span>
[I already use web sites and mobile services – how does App Service help me?]: /en-us/documentation/articles/app-service-mobile-value-prop-migration-from-mobile-services
<span data-ttu-id="8a921-294">[SDK do Servidor de Aplicativos Móveis]: http://www.nuget.org/packages/microsoft.azure.mobile.server</span><span class="sxs-lookup"><span data-stu-id="8a921-294">[Mobile App Server SDK]: http://www.nuget.org/packages/microsoft.azure.mobile.server</span></span>
[Create a Mobile App]: app-service-mobile-xamarin-ios-get-started.md
[Add push notifications to your mobile app]: app-service-mobile-xamarin-ios-get-started-push.md
[Add authentication to your mobile app]: app-service-mobile-xamarin-ios-get-started-users.md
<span data-ttu-id="8a921-295">[Agendador do Azure]: /en-us/documentation/services/scheduler/</span><span class="sxs-lookup"><span data-stu-id="8a921-295">[Azure Scheduler]: /en-us/documentation/services/scheduler/</span></span>
<span data-ttu-id="8a921-296">[Trabalho Web]: ../app-service-web/websites-webjobs-resources.md</span><span class="sxs-lookup"><span data-stu-id="8a921-296">[Web Job]: ../app-service-web/websites-webjobs-resources.md</span></span>
<span data-ttu-id="8a921-297">[Como usar o SDK do servidor .NET]: app-service-mobile-dotnet-backend-how-to-use-server-sdk.md</span><span class="sxs-lookup"><span data-stu-id="8a921-297">[How to use the .NET server SDK]: app-service-mobile-dotnet-backend-how-to-use-server-sdk.md</span></span>
[Migrate from Mobile Services to an App Service Mobile App]: app-service-mobile-migrating-from-mobile-services.md
[Migrate your existing Mobile Service to App Service]: app-service-mobile-migrating-from-mobile-services.md
<span data-ttu-id="8a921-298">[preços do Serviço de Aplicativo]: https://azure.microsoft.com/en-us/pricing/details/app-service/</span><span class="sxs-lookup"><span data-stu-id="8a921-298">[App Service pricing]: https://azure.microsoft.com/en-us/pricing/details/app-service/</span></span>
<span data-ttu-id="8a921-299">[Visão geral do SDK do servidor .NET]: app-service-mobile-dotnet-backend-how-to-use-server-sdk.md</span><span class="sxs-lookup"><span data-stu-id="8a921-299">[.NET server SDK overview]: app-service-mobile-dotnet-backend-how-to-use-server-sdk.md</span></span>
