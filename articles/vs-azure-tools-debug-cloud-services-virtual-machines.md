---
title: "aaaDebugging um Azure serviço de nuvem ou máquina virtual no Visual Studio | Microsoft Docs"
description: "Depuração de um Serviço de Nuvem ou Máquina Virtual no Visual Studio"
services: visual-studio-online
documentationcenter: na
author: kraigb
manager: ghogen
editor: 
ms.assetid: 945e06e0-2100-41af-b218-72347367ddab
ms.service: visual-studio-online
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: multiple
ms.workload: na
ms.date: 11/11/2016
ms.author: kraigb
ms.openlocfilehash: 32a326430021ba2ea9317a6a71fa005d4b87c273
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="debugging-an-azure-cloud-service-or-virtual-machine-in-visual-studio"></a><span data-ttu-id="90750-103">Depurando um serviço de nuvem ou máquina virtual do Azure no Visual Studio</span><span class="sxs-lookup"><span data-stu-id="90750-103">Debugging an Azure cloud service or virtual machine in Visual Studio</span></span>
<span data-ttu-id="90750-104">O Visual Studio oferece a você opções diferentes de depuração dos serviços de nuvem e das máquinas virtuais do Azure.</span><span class="sxs-lookup"><span data-stu-id="90750-104">Visual Studio gives you different options for debugging Azure cloud services and virtual machines.</span></span>

## <a name="debug-your-cloud-service-on-your-local-computer"></a><span data-ttu-id="90750-105">Depurar o serviço de nuvem no computador local</span><span class="sxs-lookup"><span data-stu-id="90750-105">Debug your cloud service on your local computer</span></span>
<span data-ttu-id="90750-106">Você pode economizar tempo e dinheiro usando toodebug de emulador de computação do Azure Olá seu serviço de nuvem em um computador local.</span><span class="sxs-lookup"><span data-stu-id="90750-106">You can save time and money by using hello Azure compute emulator toodebug your cloud service on a local machine.</span></span> <span data-ttu-id="90750-107">Ao depurar um serviço localmente antes de implantá-lo, você pode aprimorar a confiabilidade e o desempenho sem pagar pelo tempo de computação.</span><span class="sxs-lookup"><span data-stu-id="90750-107">By debugging a service locally before you deploy it, you can improve reliability and performance without paying for compute time.</span></span> <span data-ttu-id="90750-108">No entanto, alguns erros podem ocorrer somente quando você executa um serviço de nuvem no Azure em si.</span><span class="sxs-lookup"><span data-stu-id="90750-108">However, some errors might occur only when you run a cloud service in Azure itself.</span></span> <span data-ttu-id="90750-109">Se você habilitar a depuração remota quando você publica o serviço e, em seguida, anexar a instância de função hello depurador tooa, você pode depurar esses erros.</span><span class="sxs-lookup"><span data-stu-id="90750-109">You can debug these errors if you enable remote debugging when you publish your service and then attach hello debugger tooa role instance.</span></span>

<span data-ttu-id="90750-110">emulador de saudação simula o serviço de computação do Azure hello e é executado no ambiente local para que você possa testar e depurar seu serviço de nuvem antes de implantá-lo.</span><span class="sxs-lookup"><span data-stu-id="90750-110">hello emulator simulates hello Azure Compute service and runs in your local environment so that you can test and debug your cloud service before you deploy it.</span></span> <span data-ttu-id="90750-111">identificadores de emulador Olá Olá ciclo de vida de suas instâncias de função e fornece acesso toosimulated recursos, como o armazenamento local.</span><span class="sxs-lookup"><span data-stu-id="90750-111">hello emulator handles hello lifecycle of your role instances and provides access toosimulated resources, such as local storage.</span></span> <span data-ttu-id="90750-112">Quando você depura ou executar o serviço do Visual Studio, ela automaticamente inicia o emulador hello como um aplicativo de plano de fundo e implanta o emulador do serviço de toohello.</span><span class="sxs-lookup"><span data-stu-id="90750-112">When you debug or run your service from Visual Studio, it automatically starts hello emulator as a background application and then deploys your service toohello emulator.</span></span> <span data-ttu-id="90750-113">Você pode usar Olá emulador tooview seu serviço quando ele é executado no ambiente local hello.</span><span class="sxs-lookup"><span data-stu-id="90750-113">You can use hello emulator tooview your service when it runs in hello local environment.</span></span> <span data-ttu-id="90750-114">Você pode executar Olá completo versão ou Olá expressa do emulador hello.</span><span class="sxs-lookup"><span data-stu-id="90750-114">You can run hello full version or hello express version of hello emulator.</span></span> <span data-ttu-id="90750-115">(Começando com 2.3 do Azure, versão expressa de saudação do emulador Olá é padrão hello.) Consulte [tooRun usando o Emulator Express e depurar um serviço de nuvem localmente](https://msdn.microsoft.com/library/dn339018.aspx).</span><span class="sxs-lookup"><span data-stu-id="90750-115">(Starting with Azure 2.3, hello express version of hello emulator is hello default.) See [Using Emulator Express tooRun and Debug a Cloud Service Locally](https://msdn.microsoft.com/library/dn339018.aspx).</span></span>

### <a name="toodebug-your-cloud-service-on-your-local-computer"></a><span data-ttu-id="90750-116">toodebug sua nuvem de serviço no computador local</span><span class="sxs-lookup"><span data-stu-id="90750-116">toodebug your cloud service on your local computer</span></span>
1. <span data-ttu-id="90750-117">Na barra de menus do hello, escolha **depurar**, **iniciar depuração** toorun seu projeto de serviço de nuvem do Azure.</span><span class="sxs-lookup"><span data-stu-id="90750-117">On hello menu bar, choose **Debug**, **Start Debugging** toorun your Azure cloud service project.</span></span> <span data-ttu-id="90750-118">Como alternativa, você pode pressionar F5.</span><span class="sxs-lookup"><span data-stu-id="90750-118">As an alternative, you can press F5.</span></span> <span data-ttu-id="90750-119">Você verá uma mensagem que Olá Compute Emulator está iniciando.</span><span class="sxs-lookup"><span data-stu-id="90750-119">You’ll see a message that hello Compute Emulator is starting.</span></span> <span data-ttu-id="90750-120">Quando o emulador de saudação é iniciado, ícone de bandeja do sistema Olá confirma isso.</span><span class="sxs-lookup"><span data-stu-id="90750-120">When hello emulator starts, hello system tray icon confirms it.</span></span>

    ![Emulador do Azure na bandeja do sistema Olá](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC783828.png)
2. <span data-ttu-id="90750-122">Exibir a interface do usuário de saudação para o emulador de computação Olá abrindo o menu de atalho Olá para hello Azure ícone na área de notificação hello e, em seguida, selecione **Mostrar UI do emulador de computação**.</span><span class="sxs-lookup"><span data-stu-id="90750-122">Display hello user interface for hello compute emulator by opening hello shortcut menu for hello Azure icon in hello notification area, and then select **Show Compute Emulator UI**.</span></span>

    <span data-ttu-id="90750-123">painel esquerdo de saudação do hello da interface do usuário mostra serviços Olá que estão atualmente implantado toohello compute emulator e hello instâncias de função que cada serviço está em execução.</span><span class="sxs-lookup"><span data-stu-id="90750-123">hello left pane of hello UI shows hello services that are currently deployed toohello compute emulator and hello role instances that each service is running.</span></span> <span data-ttu-id="90750-124">Você pode escolher Olá serviços ou funções toodisplay ciclo de vida, o log e informações de diagnóstico no painel direito da saudação.</span><span class="sxs-lookup"><span data-stu-id="90750-124">You can choose hello service or roles toodisplay lifecycle, logging, and diagnostic information in hello right pane.</span></span> <span data-ttu-id="90750-125">Se você colocar o foco de saudação na margem superior de saudação de uma janela incluída, ele expande o painel direito de saudação toofill.</span><span class="sxs-lookup"><span data-stu-id="90750-125">If you put hello focus in hello top margin of an included window, it expands toofill hello right pane.</span></span>
3. <span data-ttu-id="90750-126">Percorrer aplicativo hello selecionando comandos no hello **depurar** menu e definindo pontos de interrupção no seu código.</span><span class="sxs-lookup"><span data-stu-id="90750-126">Step through hello application by selecting commands on hello **Debug** menu and setting breakpoints in your code.</span></span> <span data-ttu-id="90750-127">Como percorrer o aplicativo hello no depurador Olá, painéis Olá são atualizados com o status atual de saudação do aplicativo hello.</span><span class="sxs-lookup"><span data-stu-id="90750-127">As you step through hello application in hello debugger, hello panes are updated with hello current status of hello application.</span></span> <span data-ttu-id="90750-128">Quando você interrompe a depuração, implantação de aplicativo hello é excluída.</span><span class="sxs-lookup"><span data-stu-id="90750-128">When you stop debugging, hello application deployment is deleted.</span></span> <span data-ttu-id="90750-129">Se seu aplicativo inclui uma função web e que você definiu Olá inicialização ação propriedade toostart Olá navegador, o Visual Studio inicia o aplicativo da web no navegador de saudação.</span><span class="sxs-lookup"><span data-stu-id="90750-129">If your application includes a web role and you've set hello Startup action property toostart hello web browser, Visual Studio starts your web application in hello browser.</span></span> <span data-ttu-id="90750-130">Se você alterar o número de saudação de instâncias de uma função na configuração do serviço Olá, você deve parar o serviço de nuvem e reinicie a depuração de modo que você pode depurar essas novas instâncias de função hello.</span><span class="sxs-lookup"><span data-stu-id="90750-130">If you change hello number of instances of a role in hello service configuration, you must stop your cloud service and then restart debugging so that you can debug these new instances of hello role.</span></span>

    <span data-ttu-id="90750-131">**Observação:** quando você parar de executar ou depurar seu serviço, Olá emulador de computação local e o emulador de armazenamento não são interrompidos.</span><span class="sxs-lookup"><span data-stu-id="90750-131">**Note:** When you stop running or debugging your service, hello local compute emulator and storage emulator aren't stopped.</span></span> <span data-ttu-id="90750-132">Você deve interrompê-los explicitamente Olá da área de notificação.</span><span class="sxs-lookup"><span data-stu-id="90750-132">You must stop them explicitly from hello notification area.</span></span>

## <a name="debug-a-cloud-service-in-azure"></a><span data-ttu-id="90750-133">Depurar um perfil de serviço de nuvem no Azure</span><span class="sxs-lookup"><span data-stu-id="90750-133">Debug a cloud service in Azure</span></span>
<span data-ttu-id="90750-134">toodebug um serviço de nuvem de um computador remoto, você deve habilitar essa funcionalidade explicitamente quando você implantar seu serviço de nuvem para que o necessário (por exemplo, msvsmon.exe) de serviços estão instalados em máquinas virtuais Olá que executam as instâncias de função.</span><span class="sxs-lookup"><span data-stu-id="90750-134">toodebug a cloud service from a remote machine, you must enable that functionality explicitly when you deploy your cloud service so that required services (msvsmon.exe, for example) are installed on hello virtual machines that run your role instances.</span></span> <span data-ttu-id="90750-135">Se você não habilitar a depuração remota quando você publicou serviço hello, você tem serviço de saudação toorepublish com a depuração remota habilitada.</span><span class="sxs-lookup"><span data-stu-id="90750-135">If you didn't enable remote debugging when you published hello service, you have toorepublish hello service with remote debugging enabled.</span></span>

<span data-ttu-id="90750-136">Se você habilitar a depuração remota para um serviço de nuvem, ela não mostrará degradação de desempenho nem incorrerá em cobranças adicionais.</span><span class="sxs-lookup"><span data-stu-id="90750-136">If you enable remote debugging for a cloud service, it doesn't exhibit degraded performance or incur additional charges.</span></span> <span data-ttu-id="90750-137">Você não deve usar a depuração remota em um serviço de produção, pois os clientes que usam o serviço de saudação podem ser afetados negativamente.</span><span class="sxs-lookup"><span data-stu-id="90750-137">You shouldn't use remote debugging on a production service, because clients who use hello service might be adversely affected.</span></span>

> [!NOTE]
> <span data-ttu-id="90750-138">Quando você publica um serviço de nuvem do Visual Studio, você pode habilitar **IntelliTrace** para funções em que serviço que Olá de destino do .NET Framework 4 ou Olá .NET Framework 4.5.</span><span class="sxs-lookup"><span data-stu-id="90750-138">When you publish a cloud service from Visual Studio, you can enable **IntelliTrace** for any roles in that service that target hello .NET Framework 4 or hello .NET Framework 4.5.</span></span> <span data-ttu-id="90750-139">Usando **IntelliTrace**, você pode examinar os eventos que ocorreram em uma instância de função hello anterior e reproduza o contexto de saudação do tempo.</span><span class="sxs-lookup"><span data-stu-id="90750-139">By using **IntelliTrace**, you can examine events that occurred in a role instance in hello past and reproduce hello context from that time.</span></span> <span data-ttu-id="90750-140">Consulte [Depurando um serviço de nuvem publicado com o IntelliTrace e o Visual Studio](http://go.microsoft.com/fwlink/?LinkID=623016) e [Usando o IntelliTrace](https://msdn.microsoft.com/library/dd264915.aspx).</span><span class="sxs-lookup"><span data-stu-id="90750-140">See [Debugging a published cloud service with IntelliTrace and Visual Studio](http://go.microsoft.com/fwlink/?LinkID=623016) and [Using IntelliTrace](https://msdn.microsoft.com/library/dd264915.aspx).</span></span>
>
>

### <a name="tooenable-remote-debugging-for-a-cloud-service"></a><span data-ttu-id="90750-141">tooenable remota de depuração para um serviço de nuvem</span><span class="sxs-lookup"><span data-stu-id="90750-141">tooenable remote debugging for a cloud service</span></span>
1. <span data-ttu-id="90750-142">Abrir menu de atalho Olá para Olá projeto do Azure e, em seguida, selecione **publicar**.</span><span class="sxs-lookup"><span data-stu-id="90750-142">Open hello shortcut menu for hello Azure project, and then select **Publish**.</span></span>
2. <span data-ttu-id="90750-143">Selecione Olá **preparo** ambiente e hello **depurar** configuração.</span><span class="sxs-lookup"><span data-stu-id="90750-143">Select hello **Staging** environment and hello **Debug** configuration.</span></span>

    <span data-ttu-id="90750-144">Isso é apenas uma diretriz.</span><span class="sxs-lookup"><span data-stu-id="90750-144">This is only a guideline.</span></span> <span data-ttu-id="90750-145">Você pode aceitar toorun seus ambientes de teste em um ambiente de produção.</span><span class="sxs-lookup"><span data-stu-id="90750-145">You can opt toorun your test environments in a Production environment.</span></span> <span data-ttu-id="90750-146">No entanto, você pode afetar negativamente os usuários se você habilitar a depuração remota no ambiente de produção de hello.</span><span class="sxs-lookup"><span data-stu-id="90750-146">However, you may adversely affect users if you enable remote debugging on hello Production environment.</span></span> <span data-ttu-id="90750-147">Você pode escolher a configuração de versão de hello, mas torna a configuração de depuração Olá depuração mais fácil.</span><span class="sxs-lookup"><span data-stu-id="90750-147">You can choose hello Release configuration, but hello Debug configuration makes debugging easier.</span></span>

    ![Escolha a configuração de depuração Olá](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746717.gif)
3. <span data-ttu-id="90750-149">Siga as etapas usuais hello, mas selecione Olá **habilitar depurador remoto para todas as funções** caixa de seleção Olá **configurações avançadas** guia.</span><span class="sxs-lookup"><span data-stu-id="90750-149">Follow hello usual steps, but select hello **Enable Remote Debugger for all roles** check box on hello **Advanced Settings** tab.</span></span>

    ![Configuração de Depuração](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746718.gif)

### <a name="tooattach-hello-debugger-tooa-cloud-service-in-azure"></a><span data-ttu-id="90750-151">serviço de nuvem tooattach Olá depurador tooa no Azure</span><span class="sxs-lookup"><span data-stu-id="90750-151">tooattach hello debugger tooa cloud service in Azure</span></span>
1. <span data-ttu-id="90750-152">No Gerenciador de servidores, expanda o nó de saudação para seu serviço de nuvem.</span><span class="sxs-lookup"><span data-stu-id="90750-152">In Server Explorer, expand hello node for your cloud service.</span></span>
2. <span data-ttu-id="90750-153">Menu de atalho Olá aberto para a função hello ou toowhich de instância de função você deseja tooattach e, em seguida, selecione **Anexar depurador**.</span><span class="sxs-lookup"><span data-stu-id="90750-153">Open hello shortcut menu for hello role or role instance toowhich you want tooattach, and then select **Attach Debugger**.</span></span>

    <span data-ttu-id="90750-154">Se você depurar uma função, o depurador do Visual Studio Olá anexa tooeach instância dessa função.</span><span class="sxs-lookup"><span data-stu-id="90750-154">If you debug a role, hello Visual Studio debugger attaches tooeach instance of that role.</span></span> <span data-ttu-id="90750-155">Olá depurador será interrompido em um ponto de interrupção para Olá primeira instância de função que executa essa linha de código e atende a quaisquer condições de ponto de interrupção.</span><span class="sxs-lookup"><span data-stu-id="90750-155">hello debugger will break on a breakpoint for hello first role instance that runs that line of code and meets any conditions of that breakpoint.</span></span> <span data-ttu-id="90750-156">Se você depurar uma instância, o depurador Olá anexa tooonly que a instância e quebras de um ponto de interrupção somente quando aquela instância específica executa essa linha de código e atende Olá condições de ponto de interrupção.</span><span class="sxs-lookup"><span data-stu-id="90750-156">If you debug an instance, hello debugger attaches tooonly that instance and breaks on a breakpoint only when that specific instance runs that line of code and meets hello breakpoint's conditions.</span></span>

    ![Anexar Depurador](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746719.gif)
3. <span data-ttu-id="90750-158">Depois que o depurador Olá anexa tooan instância, a depuração normalmente.</span><span class="sxs-lookup"><span data-stu-id="90750-158">After hello debugger attaches tooan instance, debug as usual.</span></span> <span data-ttu-id="90750-159">Olá anexado automaticamente toohello o processo de host apropriado para sua função.</span><span class="sxs-lookup"><span data-stu-id="90750-159">hello debugger automatically attaches toohello appropriate host process for your role.</span></span> <span data-ttu-id="90750-160">Dependendo de quais Olá função é, Olá depurador anexa toow3wp.exe, WaWorkerHost.exe ou WaIISHost.exe.</span><span class="sxs-lookup"><span data-stu-id="90750-160">Depending on what hello role is, hello debugger attaches toow3wp.exe, WaWorkerHost.exe, or WaIISHost.exe.</span></span> <span data-ttu-id="90750-161">tooverify Olá processo toowhich Olá depurador estiver anexado, expanda o nó da instância Olá no Gerenciador de servidores.</span><span class="sxs-lookup"><span data-stu-id="90750-161">tooverify hello process toowhich hello debugger is attached, expand hello instance node in Server Explorer.</span></span> <span data-ttu-id="90750-162">Consulte [Arquitetura de função do Azure](http://blogs.msdn.com/b/kwill/archive/2011/05/05/windows-azure-role-architecture.aspx) para obter mais informações sobre os processos do Azure.</span><span class="sxs-lookup"><span data-stu-id="90750-162">See [Azure Role Architecture](http://blogs.msdn.com/b/kwill/archive/2011/05/05/windows-azure-role-architecture.aspx) for more information about Azure processes.</span></span>

    ![Caixa de diálogo Selecionar tipo de código](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC718346.png)
4. <span data-ttu-id="90750-164">processos de saudação tooidentify toowhich Olá depurador é anexado, abrir a caixa de diálogo de processos hello, em Olá barra de menus, escolha Depurar, Windows, processos.</span><span class="sxs-lookup"><span data-stu-id="90750-164">tooidentify hello processes toowhich hello debugger is attached, open hello Processes dialog box by, on hello menu bar, choosing Debug, Windows, Processes.</span></span> <span data-ttu-id="90750-165">(Teclado: Ctrl + Alt + Z) toodetach um processo específico, abra o menu de atalho e, em seguida, selecione **desanexar processo**.</span><span class="sxs-lookup"><span data-stu-id="90750-165">(Keyboard: Ctrl+Alt+Z)toodetach a specific process, open its shortcut menu, and then select **Detach Process**.</span></span> <span data-ttu-id="90750-166">Ou, localize o nó da instância Olá no Gerenciador de servidores, encontrar processo hello, abra o menu de atalho e, em seguida, selecione **desanexar processo**.</span><span class="sxs-lookup"><span data-stu-id="90750-166">Or, locate hello instance node in Server Explorer, find hello process, open its shortcut menu, and then select **Detach Process**.</span></span>

    ![Processos de depuração](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC690787.gif)

> [!WARNING]
> <span data-ttu-id="90750-168">Evite paradas longas em pontos de interrupção durante a depuração remota.</span><span class="sxs-lookup"><span data-stu-id="90750-168">Avoid long stops at breakpoints when remote debugging.</span></span> <span data-ttu-id="90750-169">Azure trata um processo que foi interrompido por mais de alguns minutos como sem resposta e interromperá o envio de instância de toothat de tráfego.</span><span class="sxs-lookup"><span data-stu-id="90750-169">Azure treats a process that's stopped for longer than a few minutes as unresponsive and stops sending traffic toothat instance.</span></span> <span data-ttu-id="90750-170">Se você parar por muito tempo, msvsmon.exe desconecta do processo de saudação.</span><span class="sxs-lookup"><span data-stu-id="90750-170">If you stop for too long, msvsmon.exe detaches from hello process.</span></span>
>
>

<span data-ttu-id="90750-171">depurador de saudação toodetach de todos os processos em sua instância ou a função, o menu de atalho Olá aberto para a função hello ou a instância que você está depurando e, em seguida, selecione **desanexar depurador**.</span><span class="sxs-lookup"><span data-stu-id="90750-171">toodetach hello debugger from all processes in your instance or role, open hello shortcut menu for hello role or instance that you're debugging, and then select **Detach Debugger**.</span></span>

## <a name="limitations-of-remote-debugging-in-azure"></a><span data-ttu-id="90750-172">Limitações da depuração remota no Azure</span><span class="sxs-lookup"><span data-stu-id="90750-172">Limitations of remote debugging in Azure</span></span>
<span data-ttu-id="90750-173">Do SDK 2.3 do Azure, a depuração remota tem Olá limitações a seguir.</span><span class="sxs-lookup"><span data-stu-id="90750-173">From Azure SDK 2.3, remote debugging has hello following limitations.</span></span>

* <span data-ttu-id="90750-174">Com a depuração remota habilitada, você não pode publicar um serviço de nuvem no qual qualquer função tenha mais de 25 instâncias.</span><span class="sxs-lookup"><span data-stu-id="90750-174">With remote debugging enabled, you can't publish a cloud service in which any role has more than 25 instances.</span></span>
* <span data-ttu-id="90750-175">depurador Olá usa too30424 30400 portas, 31400 too31424 e too32424 32400.</span><span class="sxs-lookup"><span data-stu-id="90750-175">hello debugger uses ports 30400 too30424, 31400 too31424 and 32400 too32424.</span></span> <span data-ttu-id="90750-176">Se você tentar toouse qualquer uma dessas portas, não será capaz de toopublish seu serviço e uma das seguintes mensagens de erro de saudação serão exibida no log de atividades de saudação do Azure:</span><span class="sxs-lookup"><span data-stu-id="90750-176">If you try toouse any of these ports, you won't be able toopublish your service, and one of hello following error messages will appear in hello activity log for Azure:</span></span>

  * <span data-ttu-id="90750-177">Erro ao validar arquivo. cscfg de saudação em arquivo. csdef de saudação.</span><span class="sxs-lookup"><span data-stu-id="90750-177">Error validating hello .cscfg file against hello .csdef file.</span></span>
    <span data-ttu-id="90750-178">Olá reservado 'intervalo' intervalo de portas para Microsoft.WindowsAzure.Plugins.RemoteDebugger.Connector da função 'função' se sobrepõe a uma porta já definida ou intervalo do ponto de extremidade.</span><span class="sxs-lookup"><span data-stu-id="90750-178">hello reserved port range 'range' for endpoint Microsoft.WindowsAzure.Plugins.RemoteDebugger.Connector of role 'role' overlaps with an already defined port or range.</span></span>
  * <span data-ttu-id="90750-179">Falha na alocação.</span><span class="sxs-lookup"><span data-stu-id="90750-179">Allocation failed.</span></span> <span data-ttu-id="90750-180">Tente novamente mais tarde, tente reduzir Olá tamanho da VM ou o número de instâncias de função ou tente implantar tooa uma região diferente.</span><span class="sxs-lookup"><span data-stu-id="90750-180">Please retry later, try reducing hello VM size or number of role instances, or try deploying tooa different region.</span></span>

## <a name="debugging-azure-virtual-machines"></a><span data-ttu-id="90750-181">Depurando máquinas virtuais do Azure</span><span class="sxs-lookup"><span data-stu-id="90750-181">Debugging Azure virtual machines</span></span>
<span data-ttu-id="90750-182">Você pode depurar programas que são executados em máquinas virtuais do Azure usando o Gerenciador de Servidores no Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="90750-182">You can debug programs that run on Azure virtual machines by using Server Explorer in Visual Studio.</span></span> <span data-ttu-id="90750-183">Quando você habilita a depuração remota em uma máquina virtual do Azure, Azure instala a extensão de depuração remota Olá na máquina virtual de saudação.</span><span class="sxs-lookup"><span data-stu-id="90750-183">When you enable remote debugging on an Azure virtual machine, Azure installs hello remote debugging extension on hello virtual machine.</span></span> <span data-ttu-id="90750-184">Em seguida, você pode anexar tooprocesses na máquina virtual de saudação e depurar como faria normalmente.</span><span class="sxs-lookup"><span data-stu-id="90750-184">Then, you can attach tooprocesses on hello virtual machine and debug as you normally would.</span></span>

> [!NOTE]
> <span data-ttu-id="90750-185">Máquinas virtuais criadas por meio da pilha de Gerenciador de recursos do Azure Olá podem ser depuradas remotamente usando o Pesquisador de objetos de nuvem no Visual Studio 2015.</span><span class="sxs-lookup"><span data-stu-id="90750-185">Virtual machines created through hello Azure resource manager stack can be remotely debugged by using Cloud Explorer in Visual Studio 2015.</span></span> <span data-ttu-id="90750-186">Para saber mais, consulte [Gerenciando recursos do Azure com o Cloud Explorer](http://go.microsoft.com/fwlink/?LinkId=623031).</span><span class="sxs-lookup"><span data-stu-id="90750-186">For more information, see [Managing Azure Resources with Cloud Explorer](http://go.microsoft.com/fwlink/?LinkId=623031).</span></span>
>
>

### <a name="toodebug-an-azure-virtual-machine"></a><span data-ttu-id="90750-187">toodebug uma máquina virtual do Azure</span><span class="sxs-lookup"><span data-stu-id="90750-187">toodebug an Azure virtual machine</span></span>
1. <span data-ttu-id="90750-188">No Gerenciador de servidores, expanda Olá máquinas virtuais nó e selecione Olá da máquina virtual de saudação que você deseja toodebug.</span><span class="sxs-lookup"><span data-stu-id="90750-188">In Server Explorer, expand hello Virtual Machines node and select hello node of hello virtual machine that you want toodebug.</span></span>
2. <span data-ttu-id="90750-189">Abra o menu de contexto hello e selecione **Ativar depuração**.</span><span class="sxs-lookup"><span data-stu-id="90750-189">Open hello context menu and select **Enable Debugging**.</span></span> <span data-ttu-id="90750-190">Quando perguntado se você tem certeza de que se você quiser tooenable depuração na máquina de virtual hello, selecione **Sim**.</span><span class="sxs-lookup"><span data-stu-id="90750-190">When asked if you're sure if you want tooenable debugging on hello virtual machine, select **Yes**.</span></span>

    <span data-ttu-id="90750-191">Azure instala a extensão de depuração remota Olá Olá máquina virtual tooenable depuração.</span><span class="sxs-lookup"><span data-stu-id="90750-191">Azure installs hello remote debugging extension on hello virtual machine tooenable debugging.</span></span>

    ![Comando Depuração habilitada para máquina virtual](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746720.png)

    ![Log de atividades do Azure](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746721.png)
3. <span data-ttu-id="90750-194">Após a extensão de depuração remota Olá concluir a instalação, abra o menu de contexto da máquina de virtual hello e selecione **Anexar depurador...**</span><span class="sxs-lookup"><span data-stu-id="90750-194">After hello remote debugging extension finishes installing, open hello virtual machine's context menu and select **Attach Debugger...**</span></span>

    <span data-ttu-id="90750-195">O Azure obtém uma lista de processos de saudação na máquina virtual de saudação e mostra-los na caixa de diálogo de tooProcess Olá anexar.</span><span class="sxs-lookup"><span data-stu-id="90750-195">Azure gets a list of hello processes on hello virtual machine and shows them in hello Attach tooProcess dialog box.</span></span>

    ![Comando Anexar depurador](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746722.png)
4. <span data-ttu-id="90750-197">Em Olá **Attach tooProcess** caixa de diálogo, selecione **selecione** tooshow somente tipos de saudação de lista de resultados de saudação toolimit de código que você deseja toodebug.</span><span class="sxs-lookup"><span data-stu-id="90750-197">In hello **Attach tooProcess** dialog box, select **Select** toolimit hello results list tooshow only hello types of code you want toodebug.</span></span> <span data-ttu-id="90750-198">Você pode depurar um código gerenciado de 32 ou 64 bits, código nativo ou ambos.</span><span class="sxs-lookup"><span data-stu-id="90750-198">You can debug 32- or 64-bit managed code, native code, or both.</span></span>

    ![Caixa de diálogo Selecionar tipo de código](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC718346.png)
5. <span data-ttu-id="90750-200">Selecione processos Olá você deseja toodebug na máquina virtual de saudação e, em seguida, selecione **Attach**.</span><span class="sxs-lookup"><span data-stu-id="90750-200">Select hello processes you want toodebug on hello virtual machine and then select **Attach**.</span></span> <span data-ttu-id="90750-201">Por exemplo, você pode escolher processo w3wp.exe de saudação se você desejava toodebug um aplicativo web na máquina virtual de saudação.</span><span class="sxs-lookup"><span data-stu-id="90750-201">For example, you might choose hello w3wp.exe process if you wanted toodebug a web app on hello virtual machine.</span></span> <span data-ttu-id="90750-202">Consulte [Depurar um ou mais processos no Visual Studio](https://msdn.microsoft.com/library/jj919165.aspx) e [Arquitetura de função do Azure](http://blogs.msdn.com/b/kwill/archive/2011/05/05/windows-azure-role-architecture.aspx) para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="90750-202">See [Debug One or More Processes in Visual Studio](https://msdn.microsoft.com/library/jj919165.aspx) and [Azure Role Architecture](http://blogs.msdn.com/b/kwill/archive/2011/05/05/windows-azure-role-architecture.aspx) for more information.</span></span>

## <a name="create-a-web-project-and-a-virtual-machine-for-debugging"></a><span data-ttu-id="90750-203">Criar um projeto da Web e uma máquina virtual para depuração</span><span class="sxs-lookup"><span data-stu-id="90750-203">Create a web project and a virtual machine for debugging</span></span>
<span data-ttu-id="90750-204">Antes de publicar seu projeto do Azure, talvez você ache útil tootest-lo em um ambiente independente que oferece suporte à depuração e cenários de teste, e onde você pode instalar testes e programas de monitoramento.</span><span class="sxs-lookup"><span data-stu-id="90750-204">Before publishing your Azure project, you might find it useful tootest it in a contained environment that supports debugging and testing scenarios, and where you can install testing and monitoring programs.</span></span> <span data-ttu-id="90750-205">Toodo unidirecional trata tooremotely depurar seu aplicativo em uma máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="90750-205">One way toodo this is tooremotely debug your app on a virtual machine.</span></span>

<span data-ttu-id="90750-206">Projetos do Visual Studio ASP.NET oferecem uma opção toocreate uma máquina virtual útil que você pode usar para teste de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="90750-206">Visual Studio ASP.NET projects offer an option toocreate a handy virtual machine that you can use for app testing.</span></span> <span data-ttu-id="90750-207">máquina virtual de saudação inclui pontos de extremidade normalmente necessários, como o PowerShell, área de trabalho remota e WebDeploy.</span><span class="sxs-lookup"><span data-stu-id="90750-207">hello virtual machine includes commonly-needed endpoints such as PowerShell, remote desktop, and WebDeploy.</span></span>

### <a name="toocreate-a-web-project-and-a-virtual-machine-for-debugging"></a><span data-ttu-id="90750-208">toocreate um projeto da web e uma máquina virtual para depuração</span><span class="sxs-lookup"><span data-stu-id="90750-208">toocreate a web project and a virtual machine for debugging</span></span>
1. <span data-ttu-id="90750-209">No Visual Studio, crie um novo aplicativo Web do ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="90750-209">In Visual Studio, create a new ASP.NET Web Application.</span></span>
2. <span data-ttu-id="90750-210">No diálogo do novo projeto ASP.NET hello, em Olá seção do Azure, escolha **Máquina Virtual** na caixa de listagem suspensa hello.</span><span class="sxs-lookup"><span data-stu-id="90750-210">In hello New ASP.NET Project dialog, in hello Azure section, choose **Virtual Machine** in hello dropdown list box.</span></span> <span data-ttu-id="90750-211">Deixe Olá **criar recursos remotos** caixa de seleção.</span><span class="sxs-lookup"><span data-stu-id="90750-211">Leave hello **Create remote resources** check box selected.</span></span> <span data-ttu-id="90750-212">Selecione **Okey** tooproceed.</span><span class="sxs-lookup"><span data-stu-id="90750-212">Select **OK** tooproceed.</span></span>

    <span data-ttu-id="90750-213">Olá **criar a máquina virtual no Azure** caixa de diálogo é exibida.</span><span class="sxs-lookup"><span data-stu-id="90750-213">hello **Create virtual machine on Azure** dialog box appears.</span></span>

    ![Caixa de diálogo Criar projeto da Web do ASP.NET](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746723.png)

    <span data-ttu-id="90750-215">**Observação:** deverá toosign em tooyour conta do Azure se você ainda não tiver entrado.</span><span class="sxs-lookup"><span data-stu-id="90750-215">**Note:** You'll be asked toosign in tooyour Azure account if you're not already signed in.</span></span>

1. <span data-ttu-id="90750-216">Selecione Olá várias configurações para a máquina virtual de saudação e, em seguida, selecione **Okey**.</span><span class="sxs-lookup"><span data-stu-id="90750-216">Select hello various settings for hello virtual machine and then select **OK**.</span></span> <span data-ttu-id="90750-217">Consulte [Máquinas Virtuais](http://go.microsoft.com/fwlink/?LinkId=623033) para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="90750-217">See [Virtual Machines](http://go.microsoft.com/fwlink/?LinkId=623033) for more information.</span></span>

    <span data-ttu-id="90750-218">Olá nome para o nome DNS será o nome de saudação da máquina virtual de saudação.</span><span class="sxs-lookup"><span data-stu-id="90750-218">hello name you enter for DNS name will be hello name of hello virtual machine.</span></span>

    ![Caixa de diálogo Criar máquina virtual no Azure](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746724.png)

    <span data-ttu-id="90750-220">O Azure cria Olá de máquina virtual e, em seguida, provisiona e configura pontos de extremidade hello, como área de trabalho remota e implantação da Web</span><span class="sxs-lookup"><span data-stu-id="90750-220">Azure creates hello virtual machine and then provisions and configures hello endpoints, such as Remote Desktop and Web Deploy</span></span>
2. <span data-ttu-id="90750-221">Depois de saudação máquina virtual está totalmente configurada, selecione o nó de saudação máquina virtual no Gerenciador de servidores.</span><span class="sxs-lookup"><span data-stu-id="90750-221">After hello virtual machine is fully configured, select hello virtual machine’s node in Server Explorer.</span></span>
3. <span data-ttu-id="90750-222">Abra o menu de contexto hello e selecione **Ativar depuração**.</span><span class="sxs-lookup"><span data-stu-id="90750-222">Open hello context menu and select **Enable Debugging**.</span></span> <span data-ttu-id="90750-223">Quando perguntado se você tem certeza de que se você quiser tooenable depuração na máquina de virtual hello, selecione **Sim**.</span><span class="sxs-lookup"><span data-stu-id="90750-223">When asked if you're sure if you want tooenable debugging on hello virtual machine, select **Yes**.</span></span>

    <span data-ttu-id="90750-224">Azure instala Olá depuração extensão toohello máquina virtual tooenable depuração remota.</span><span class="sxs-lookup"><span data-stu-id="90750-224">Azure installs hello remote debugging extension toohello virtual machine tooenable debugging.</span></span>

    ![Comando Depuração habilitada para máquina virtual](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746720.png)

    ![Log de atividades do Azure](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746721.png)
4. <span data-ttu-id="90750-227">Publique seu projeto, como descrito em [Como implantar um projeto Web usando a publicação de um clique no Visual Studio](https://msdn.microsoft.com/library/dd465337.aspx).</span><span class="sxs-lookup"><span data-stu-id="90750-227">Publish your project as outlined in [How to: Deploy a Web Project Using One-Click Publish in Visual Studio](https://msdn.microsoft.com/library/dd465337.aspx).</span></span> <span data-ttu-id="90750-228">Como você deseja toodebug na máquina virtual de hello, em hello **configurações** página de saudação **Publicar Web** assistente, selecione **depurar** como configuração de saudação.</span><span class="sxs-lookup"><span data-stu-id="90750-228">Because you want toodebug on hello virtual machine, on hello **Settings** page of hello **Publish Web** wizard, select **Debug** as hello configuration.</span></span> <span data-ttu-id="90750-229">Isso garante que os símbolos de código estejam disponíveis durante a depuração.</span><span class="sxs-lookup"><span data-stu-id="90750-229">This makes sure that code symbols are available while debugging.</span></span>

    ![Configurações de publicação](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC718349.png)
5. <span data-ttu-id="90750-231">Em Olá **opções de publicação do arquivo**, selecione **remover arquivos adicionais no destino** se projeto Olá já foi implantado em um momento anterior.</span><span class="sxs-lookup"><span data-stu-id="90750-231">In hello **File Publish Options**, select **Remove additional files at destination** if hello project was already deployed at an earlier time.</span></span>
6. <span data-ttu-id="90750-232">Depois de publica projeto hello, no menu de contexto da máquina de virtual Olá no Gerenciador de servidores, selecione **Anexar depurador...**</span><span class="sxs-lookup"><span data-stu-id="90750-232">After hello project publishes, on hello virtual machine's context menu in Server Explorer, select **Attach Debugger...**</span></span>

    <span data-ttu-id="90750-233">O Azure obtém uma lista de processos de saudação na máquina virtual de saudação e mostra-los na caixa de diálogo de tooProcess Olá anexar.</span><span class="sxs-lookup"><span data-stu-id="90750-233">Azure gets a list of hello processes on hello virtual machine and shows them in hello Attach tooProcess dialog box.</span></span>

    ![Comando Anexar depurador](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746722.png)
7. <span data-ttu-id="90750-235">Em Olá **Attach tooProcess** caixa de diálogo, selecione **selecione** tooshow somente tipos de saudação de lista de resultados de saudação toolimit de código que você deseja toodebug.</span><span class="sxs-lookup"><span data-stu-id="90750-235">In hello **Attach tooProcess** dialog box, select **Select** toolimit hello results list tooshow only hello types of code you want toodebug.</span></span> <span data-ttu-id="90750-236">Você pode depurar um código gerenciado de 32 ou 64 bits, código nativo ou ambos.</span><span class="sxs-lookup"><span data-stu-id="90750-236">You can debug 32- or 64-bit managed code, native code, or both.</span></span>

    ![Caixa de diálogo Selecionar tipo de código](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC718346.png)
8. <span data-ttu-id="90750-238">Selecione processos Olá você deseja toodebug na máquina virtual de saudação e, em seguida, selecione **Attach**.</span><span class="sxs-lookup"><span data-stu-id="90750-238">Select hello processes you want toodebug on hello virtual machine and then select **Attach**.</span></span> <span data-ttu-id="90750-239">Por exemplo, você pode escolher processo w3wp.exe de saudação se você desejava toodebug um aplicativo web na máquina virtual de saudação.</span><span class="sxs-lookup"><span data-stu-id="90750-239">For example, you might choose hello w3wp.exe process if you wanted toodebug a web app on hello virtual machine.</span></span> <span data-ttu-id="90750-240">Consulte [Depurar um o mais processos no Visual Studio](https://msdn.microsoft.com/library/jj919165.aspx) para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="90750-240">See [Debug One or More Processes in Visual Studio](https://msdn.microsoft.com/library/jj919165.aspx) for more information.</span></span>

## <a name="next-steps"></a><span data-ttu-id="90750-241">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="90750-241">Next steps</span></span>
* <span data-ttu-id="90750-242">Use **Intellitrace** toocollect um log de eventos de um servidor de versão e de chamadas.</span><span class="sxs-lookup"><span data-stu-id="90750-242">Use **Intellitrace** toocollect a log of calls and events from a release server.</span></span> <span data-ttu-id="90750-243">Consulte [Depurando um serviço de nuvem publicado com o IntelliTrace e o Visual Studio](http://go.microsoft.com/fwlink/?LinkID=623016).</span><span class="sxs-lookup"><span data-stu-id="90750-243">See [Debugging a Published Cloud Service with IntelliTrace and Visual Studio](http://go.microsoft.com/fwlink/?LinkID=623016).</span></span>
* <span data-ttu-id="90750-244">Use **diagnóstico do Azure** toolog obter informações de execução de código em funções, quer funções hello estejam em execução no ambiente de desenvolvimento de saudação ou no Azure.</span><span class="sxs-lookup"><span data-stu-id="90750-244">Use **Azure Diagnostics** toolog detailed information from code running within roles, whether hello roles are running in hello development environment or in Azure.</span></span> <span data-ttu-id="90750-245">Consulte [Coletando dados de log usando o Diagnóstico do Azure](http://go.microsoft.com/fwlink/p/?LinkId=400450).</span><span class="sxs-lookup"><span data-stu-id="90750-245">See [Collecting logging data by using Azure Diagnostics](http://go.microsoft.com/fwlink/p/?LinkId=400450).</span></span>
