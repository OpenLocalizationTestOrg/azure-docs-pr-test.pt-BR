---
title: "aaaIntegrate automação do Azure com o controle de origem do Visual Studio Team Services | Microsoft Docs"
description: "O cenário guia você pela configuração de integração com uma conta de Automação do Azure e o controle do código-fonte do Visual Studio Team Services."
services: automation
documentationcenter: 
author: eamono
manager: 
editor: 
keywords: "Azure PowerShell, VSTS, controle do código-fonte, automação"
ms.assetid: a43b395a-e740-41a3-ae62-40eac9d0ec00
ms.service: automation
ms.workload: infrastructure-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/24/2017
ms.openlocfilehash: 8f6faa596a5ad1f8b72e820ca320b3e103d83579
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="azure-automation-scenario---automation-source-control-integration-with-visual-studio-team-services"></a><span data-ttu-id="5af2d-104">Cenário da Automação do Azure – Integração de controle do código-fonte da Automação com o Visual Studio Team Services</span><span class="sxs-lookup"><span data-stu-id="5af2d-104">Azure Automation scenario - Automation source control integration with Visual Studio Team Services</span></span>

<span data-ttu-id="5af2d-105">Nesse cenário, você tem um projeto do Visual Studio Team Services que você está usando toomanage runbooks de automação do Azure ou as configurações de DSC sob controle de origem.</span><span class="sxs-lookup"><span data-stu-id="5af2d-105">In this scenario, you have a Visual Studio Team Services project that you are using toomanage Azure Automation runbooks or DSC configurations under source control.</span></span>
<span data-ttu-id="5af2d-106">Este artigo descreve como toointegrate VSTS com seu ambiente de automação do Azure para que a integração contínua ocorre para cada check-in.</span><span class="sxs-lookup"><span data-stu-id="5af2d-106">This article describes how toointegrate VSTS with your Azure Automation environment so that continuous integration happens for each check-in.</span></span>

## <a name="getting-hello-scenario"></a><span data-ttu-id="5af2d-107">Obtendo o cenário de saudação</span><span class="sxs-lookup"><span data-stu-id="5af2d-107">Getting hello scenario</span></span>

<span data-ttu-id="5af2d-108">Este cenário consiste em dois runbooks do PowerShell que você pode importar diretamente da saudação [Galeria de Runbook](automation-runbook-gallery.md) Olá portal do Azure ou fazer o download de saudação [Galeria do PowerShell](https://www.powershellgallery.com).</span><span class="sxs-lookup"><span data-stu-id="5af2d-108">This scenario consists of two PowerShell runbooks that you can import directly from hello [Runbook Gallery](automation-runbook-gallery.md) in hello Azure portal or download from hello [PowerShell Gallery](https://www.powershellgallery.com).</span></span>

### <a name="runbooks"></a><span data-ttu-id="5af2d-109">Runbooks</span><span class="sxs-lookup"><span data-stu-id="5af2d-109">Runbooks</span></span>

<span data-ttu-id="5af2d-110">Runbook</span><span class="sxs-lookup"><span data-stu-id="5af2d-110">Runbook</span></span> | <span data-ttu-id="5af2d-111">Descrição</span><span class="sxs-lookup"><span data-stu-id="5af2d-111">Description</span></span>| 
--------|------------|
<span data-ttu-id="5af2d-112">Sync-VSTS</span><span class="sxs-lookup"><span data-stu-id="5af2d-112">Sync-VSTS</span></span> | <span data-ttu-id="5af2d-113">Importar runbooks ou configurações do controle do código-fonte do VSTS quando é feito um check-in.</span><span class="sxs-lookup"><span data-stu-id="5af2d-113">Import runbooks or configurations from VSTS source control when a check-in is done.</span></span> <span data-ttu-id="5af2d-114">Se executar manualmente, importar e publicar todos os runbooks ou configurações em Olá conta de automação.</span><span class="sxs-lookup"><span data-stu-id="5af2d-114">If run manually, it will import and publish all runbooks or configurations into hello Automation account.</span></span>| 
<span data-ttu-id="5af2d-115">Sync-VSTSGit</span><span class="sxs-lookup"><span data-stu-id="5af2d-115">Sync-VSTSGit</span></span> | <span data-ttu-id="5af2d-116">Importar runbooks ou configurações do controle do código-fonte do VSTS sob o Git quando é feito um check-in.</span><span class="sxs-lookup"><span data-stu-id="5af2d-116">Import runbooks or configurations from VSTS under Git source control when a check-in is done.</span></span> <span data-ttu-id="5af2d-117">Se executar manualmente, importar e publicar todos os runbooks ou configurações em Olá conta de automação.</span><span class="sxs-lookup"><span data-stu-id="5af2d-117">If run manually, it will import and publish all runbooks or configurations into hello Automation account.</span></span>|

### <a name="variables"></a><span data-ttu-id="5af2d-118">variáveis</span><span class="sxs-lookup"><span data-stu-id="5af2d-118">Variables</span></span>

<span data-ttu-id="5af2d-119">Variável</span><span class="sxs-lookup"><span data-stu-id="5af2d-119">Variable</span></span> | <span data-ttu-id="5af2d-120">Descrição</span><span class="sxs-lookup"><span data-stu-id="5af2d-120">Description</span></span>|
-----------|------------|
<span data-ttu-id="5af2d-121">VSToken</span><span class="sxs-lookup"><span data-stu-id="5af2d-121">VSToken</span></span> | <span data-ttu-id="5af2d-122">Proteger o ativo de variável, você criará que contém o token de acesso pessoal do VSTS hello.</span><span class="sxs-lookup"><span data-stu-id="5af2d-122">Secure variable asset you will create that contains hello VSTS personal access token.</span></span> <span data-ttu-id="5af2d-123">Você pode aprender como toocreate um personal VSTS acessar token em Olá [página de autenticação do VSTS](https://www.visualstudio.com/en-us/docs/integrate/get-started/auth/overview).</span><span class="sxs-lookup"><span data-stu-id="5af2d-123">You can learn how toocreate a VSTS personal access token on hello [VSTS authentication page](https://www.visualstudio.com/en-us/docs/integrate/get-started/auth/overview).</span></span> 
## <a name="installing-and-configuring-this-scenario"></a><span data-ttu-id="5af2d-124">Instalando e configurando esse cenário</span><span class="sxs-lookup"><span data-stu-id="5af2d-124">Installing and configuring this scenario</span></span>

<span data-ttu-id="5af2d-125">Criar um [token de acesso pessoal](https://www.visualstudio.com/en-us/docs/integrate/get-started/auth/overview) no VSTS que você usará toosync Olá runbooks ou configurações em sua conta de automação.</span><span class="sxs-lookup"><span data-stu-id="5af2d-125">Create a [personal access token](https://www.visualstudio.com/en-us/docs/integrate/get-started/auth/overview) in VSTS that you will use toosync hello runbooks or configurations into your automation account.</span></span>

![](media/automation-scenario-source-control-integration-with-VSTS/VSTSPersonalToken.png) 

<span data-ttu-id="5af2d-126">Criar um [variável secure](automation-variables.md) em sua saudação de toohold de conta de automação de acesso pessoal token para que Olá runbook possa autenticar tooVSTS e sincronização runbooks de saudação ou configurações em Olá conta de automação.</span><span class="sxs-lookup"><span data-stu-id="5af2d-126">Create a [secure variable](automation-variables.md) in your automation account toohold hello personal access token so that hello runbook can authenticate tooVSTS and sync hello runbooks or configurations into hello Automation account.</span></span> <span data-ttu-id="5af2d-127">Você pode nomear esse VSToken.</span><span class="sxs-lookup"><span data-stu-id="5af2d-127">You can name this VSToken.</span></span> 

![](media/automation-scenario-source-control-integration-with-VSTS/VSTSTokenVariable.png)

<span data-ttu-id="5af2d-128">Importe runbook Olá que sincronizará seus runbooks ou configurações para a conta de automação de saudação.</span><span class="sxs-lookup"><span data-stu-id="5af2d-128">Import hello runbook that will sync your runbooks or configurations into hello automation account.</span></span> <span data-ttu-id="5af2d-129">Você pode usar o hello [runbook de exemplo do VSTS](https://www.powershellgallery.com/packages/Sync-VSTS/1.0/DisplayScript) ou hello [VSTS com exemplo de runbook Git] (https://www.powershellgallery.com/packages/Sync-VSTSGit/1.0/DisplayScript) do hello PowerShellGallery.com dependendo se você usar VSTS VSTS com Git ou controle de origem e implante tooyour conta de automação.</span><span class="sxs-lookup"><span data-stu-id="5af2d-129">You can use hello [VSTS sample runbook](https://www.powershellgallery.com/packages/Sync-VSTS/1.0/DisplayScript) or hello [VSTS with Git sample runbook] (https://www.powershellgallery.com/packages/Sync-VSTSGit/1.0/DisplayScript) from hello PowerShellGallery.com depending on if you use VSTS source control or VSTS with Git and deploy tooyour automation account.</span></span>

![](media/automation-scenario-source-control-integration-with-VSTS/VSTSPowerShellGallery.png)

<span data-ttu-id="5af2d-130">Agora você pode [publicar](automation-creating-importing-runbook.md#publishing-a-runbook) esse runbook para que você possa criar um webhook.</span><span class="sxs-lookup"><span data-stu-id="5af2d-130">You can now [publish](automation-creating-importing-runbook.md#publishing-a-runbook) this runbook so you can create a webhook.</span></span> 
![](media/automation-scenario-source-control-integration-with-VSTS/VSTSPublishRunbook.png)

<span data-ttu-id="5af2d-131">Criar um [webhook](automation-webhooks.md) para este runbook VSTS de sincronização e o preenchimento nos parâmetros de saudação conforme mostrado abaixo.</span><span class="sxs-lookup"><span data-stu-id="5af2d-131">Create a [webhook](automation-webhooks.md) for this Sync-VSTS runbook and fill in hello parameters as shown below.</span></span> <span data-ttu-id="5af2d-132">Certifique-se de que copiar a url do webhook Olá pois você precisará de um gancho de serviço no VSTS.</span><span class="sxs-lookup"><span data-stu-id="5af2d-132">Make sure you copy hello webhook url as you will need it for a service hook in VSTS.</span></span> <span data-ttu-id="5af2d-133">Olá VSAccessTokenVariableName é o nome de saudação (VSToken) da variável de seguro Olá que você criou o token de acesso pessoal de saudação toohold anterior.</span><span class="sxs-lookup"><span data-stu-id="5af2d-133">hello VSAccessTokenVariableName is hello name (VSToken) of hello secure variable that you created earlier toohold hello personal access token.</span></span> 

<span data-ttu-id="5af2d-134">Integrando VSTS (sincronização VSTS.ps1) terão Olá parâmetros a seguir.</span><span class="sxs-lookup"><span data-stu-id="5af2d-134">Integrating with VSTS (Sync-VSTS.ps1) will take hello following parameters.</span></span>
### <a name="sync-vsts-parameters"></a><span data-ttu-id="5af2d-135">Parâmetros do Sync-VSTS</span><span class="sxs-lookup"><span data-stu-id="5af2d-135">Sync-VSTS Parameters</span></span>

<span data-ttu-id="5af2d-136">Parâmetro</span><span class="sxs-lookup"><span data-stu-id="5af2d-136">Parameter</span></span> | <span data-ttu-id="5af2d-137">Descrição</span><span class="sxs-lookup"><span data-stu-id="5af2d-137">Description</span></span>| 
--------|------------|
<span data-ttu-id="5af2d-138">WebhookData</span><span class="sxs-lookup"><span data-stu-id="5af2d-138">WebhookData</span></span> | <span data-ttu-id="5af2d-139">Isso conterá informações de check-in de saudação enviadas de gancho de serviço do VSTS hello.</span><span class="sxs-lookup"><span data-stu-id="5af2d-139">This will contain hello checkin information sent from hello VSTS service hook.</span></span> <span data-ttu-id="5af2d-140">Você deve deixar esse parâmetro em branco.</span><span class="sxs-lookup"><span data-stu-id="5af2d-140">You should leave this parameter blank.</span></span>| 
<span data-ttu-id="5af2d-141">ResourceGroup</span><span class="sxs-lookup"><span data-stu-id="5af2d-141">ResourceGroup</span></span> | <span data-ttu-id="5af2d-142">Este é o nome de saudação do grupo de recursos de Olá Olá automação conta está no.</span><span class="sxs-lookup"><span data-stu-id="5af2d-142">This is hello name of hello resource group that hello automation account is in.</span></span>|
<span data-ttu-id="5af2d-143">AutomationAccountName</span><span class="sxs-lookup"><span data-stu-id="5af2d-143">AutomationAccountName</span></span> | <span data-ttu-id="5af2d-144">nome de Olá Olá da conta de automação que sincronizará com VSTS.</span><span class="sxs-lookup"><span data-stu-id="5af2d-144">hello name of hello automation account that will sync with VSTS.</span></span>|
<span data-ttu-id="5af2d-145">VSFolder</span><span class="sxs-lookup"><span data-stu-id="5af2d-145">VSFolder</span></span> | <span data-ttu-id="5af2d-146">O nome da pasta Olá no VSTS onde Olá runbooks e as configurações existem.</span><span class="sxs-lookup"><span data-stu-id="5af2d-146">The name of hello folder in VSTS where hello runbooks and configurations exist.</span></span>|
<span data-ttu-id="5af2d-147">VSAccount</span><span class="sxs-lookup"><span data-stu-id="5af2d-147">VSAccount</span></span> | <span data-ttu-id="5af2d-148">nome de saudação do hello conta do Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="5af2d-148">hello name of hello Visual Studio Team Services account.</span></span>| 
<span data-ttu-id="5af2d-149">VSAccessTokenVariableName</span><span class="sxs-lookup"><span data-stu-id="5af2d-149">VSAccessTokenVariableName</span></span> | <span data-ttu-id="5af2d-150">nome de Olá da saudação seguro variável (VSToken) que contém o token de acesso pessoal do VSTS Olá.</span><span class="sxs-lookup"><span data-stu-id="5af2d-150">hello name of hello secure variable (VSToken) that holds hello VSTS personal access token.</span></span>| 


![](media/automation-scenario-source-control-integration-with-VSTS/VSTSWebhook.png)

<span data-ttu-id="5af2d-151">Se você estiver usando o VSTS com o GIT (sincronização VSTSGit.ps1) levará Olá parâmetros a seguir.</span><span class="sxs-lookup"><span data-stu-id="5af2d-151">If you are using VSTS with GIT (Sync-VSTSGit.ps1) it will take hello following parameters.</span></span>

<span data-ttu-id="5af2d-152">Parâmetro</span><span class="sxs-lookup"><span data-stu-id="5af2d-152">Parameter</span></span> | <span data-ttu-id="5af2d-153">Descrição</span><span class="sxs-lookup"><span data-stu-id="5af2d-153">Description</span></span>|
--------|------------|
<span data-ttu-id="5af2d-154">WebhookData</span><span class="sxs-lookup"><span data-stu-id="5af2d-154">WebhookData</span></span> | <span data-ttu-id="5af2d-155">Isso conterá informações de check-in de saudação enviadas de gancho de serviço do VSTS hello.</span><span class="sxs-lookup"><span data-stu-id="5af2d-155">This will contain hello checkin information sent from hello VSTS service hook.</span></span> <span data-ttu-id="5af2d-156">Você deve deixar esse parâmetro em branco.</span><span class="sxs-lookup"><span data-stu-id="5af2d-156">You should leave this parameter blank.</span></span>| <span data-ttu-id="5af2d-157">ResourceGroup</span><span class="sxs-lookup"><span data-stu-id="5af2d-157">ResourceGroup</span></span> | <span data-ttu-id="5af2d-158">Esse nome de saudação do grupo de recursos Olá Olá conta de automação está em.</span><span class="sxs-lookup"><span data-stu-id="5af2d-158">This hello name of hello resource group that hello automation account is in.</span></span>|
<span data-ttu-id="5af2d-159">AutomationAccountName</span><span class="sxs-lookup"><span data-stu-id="5af2d-159">AutomationAccountName</span></span> | <span data-ttu-id="5af2d-160">nome de Olá Olá da conta de automação que sincronizará com VSTS.</span><span class="sxs-lookup"><span data-stu-id="5af2d-160">hello name of hello automation account that will sync with VSTS.</span></span>|
<span data-ttu-id="5af2d-161">VSAccount</span><span class="sxs-lookup"><span data-stu-id="5af2d-161">VSAccount</span></span> | <span data-ttu-id="5af2d-162">nome de saudação do hello conta do Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="5af2d-162">hello name of hello Visual Studio Team Services account.</span></span>|
<span data-ttu-id="5af2d-163">VSProject</span><span class="sxs-lookup"><span data-stu-id="5af2d-163">VSProject</span></span> | <span data-ttu-id="5af2d-164">nome de saudação do projeto de saudação no VSTS onde Olá runbooks e as configurações existem.</span><span class="sxs-lookup"><span data-stu-id="5af2d-164">hello name of hello project in VSTS where hello runbooks and configurations exist.</span></span>|
<span data-ttu-id="5af2d-165">GitRepo</span><span class="sxs-lookup"><span data-stu-id="5af2d-165">GitRepo</span></span> | <span data-ttu-id="5af2d-166">nome de saudação do repositório do Git de saudação.</span><span class="sxs-lookup"><span data-stu-id="5af2d-166">hello name of hello Git repository.</span></span>|
<span data-ttu-id="5af2d-167">GitBranch</span><span class="sxs-lookup"><span data-stu-id="5af2d-167">GitBranch</span></span> | <span data-ttu-id="5af2d-168">nome de saudação do branch Olá no repositório do Git do VSTS.</span><span class="sxs-lookup"><span data-stu-id="5af2d-168">hello name of hello branch in VSTS Git repository.</span></span>|
<span data-ttu-id="5af2d-169">Pasta</span><span class="sxs-lookup"><span data-stu-id="5af2d-169">Folder</span></span> | <span data-ttu-id="5af2d-170">nome de saudação da pasta de saudação na ramificação do VSTS Git.</span><span class="sxs-lookup"><span data-stu-id="5af2d-170">hello name of hello folder in VSTS Git branch.</span></span>|
<span data-ttu-id="5af2d-171">VSAccessTokenVariableName</span><span class="sxs-lookup"><span data-stu-id="5af2d-171">VSAccessTokenVariableName</span></span> | <span data-ttu-id="5af2d-172">nome de Olá da saudação seguro variável (VSToken) que contém o token de acesso pessoal do VSTS Olá.</span><span class="sxs-lookup"><span data-stu-id="5af2d-172">hello name of hello secure variable (VSToken) that holds hello VSTS personal access token.</span></span>|

![](media/automation-scenario-source-control-integration-with-VSTS/VSTSGitWebhook.png)

<span data-ttu-id="5af2d-173">Crie um gancho de serviço no VSTS para pasta de toohello check-ins que dispara esse webhook no check-in do código.</span><span class="sxs-lookup"><span data-stu-id="5af2d-173">Create a service hook in VSTS for check-ins toohello folder that triggers this webhook on code check-in.</span></span> <span data-ttu-id="5af2d-174">Selecione ganchos Web como Olá serviço toointegrate com quando você cria uma nova assinatura.</span><span class="sxs-lookup"><span data-stu-id="5af2d-174">Select Web Hooks as hello service toointegrate with when you create a new subscription.</span></span> <span data-ttu-id="5af2d-175">Você pode aprender mais sobre os ganchos de serviço na [documentação de ganchos de serviço do VSTS](https://www.visualstudio.com/en-us/docs/marketplace/integrate/service-hooks/get-started).</span><span class="sxs-lookup"><span data-stu-id="5af2d-175">You can learn more about service hooks on [VSTS Service Hooks documentation](https://www.visualstudio.com/en-us/docs/marketplace/integrate/service-hooks/get-started).</span></span>
![](media/automation-scenario-source-control-integration-with-VSTS/VSTSServiceHook.png)

<span data-ttu-id="5af2d-176">Você deve agora ser capaz de toodo todos os check-ins de seus runbooks e configurações no VSTS e ter um automaticamente sincronizar em sua conta de automação.</span><span class="sxs-lookup"><span data-stu-id="5af2d-176">You should now be able toodo all check-ins of your runbooks and configurations into VSTS and have these automatically sync’d into your automation account.</span></span>

![](media/automation-scenario-source-control-integration-with-VSTS/VSTSSyncRunbookOutput.png)

<span data-ttu-id="5af2d-177">Se você executar esse runbook manualmente sem sendo disparada pelo VSTS, você pode deixar o parâmetro de webhookdata hello vazio e fará uma sincronização completa da pasta do VSTS Olá especificada.</span><span class="sxs-lookup"><span data-stu-id="5af2d-177">If you run this runbook manually without being triggered by VSTS, you can leave hello webhookdata parameter empty and it will do a full sync from hello VSTS folder specified.</span></span>

<span data-ttu-id="5af2d-178">Se desejar que o cenário de saudação toouninstall, remover gancho do serviço de saudação do VSTS, exclua o runbook hello e Olá VSToken variável.</span><span class="sxs-lookup"><span data-stu-id="5af2d-178">If you wish toouninstall hello scenario, remove hello service hook from VSTS, delete hello runbook, and hello VSToken variable.</span></span>
