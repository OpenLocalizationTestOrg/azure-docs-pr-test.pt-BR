---
title: "Criação Gráfica na Automação do Azure | Microsoft Docs"
description: "A criação gráfica permite criar runbooks para a Automação do Azure sem trabalhar com código. Este artigo fornece uma introdução à criação gráfica e todos os detalhes necessários para iniciar a criação de um runbook gráfico."
services: automation
documentationcenter: 
author: mgoedtel
manager: carmonm
editor: tysonn
ms.assetid: 4b6f840c-e941-4293-a728-b33407317943
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 04/14/2017
ms.author: magoedte;bwren
ms.openlocfilehash: 417fceb0961165d96ece000f95c8a3f973f4f75b
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/11/2017
---
# <a name="graphical-authoring-in-azure-automation"></a><span data-ttu-id="f7060-104">Criação gráfica na Automação do Azure</span><span class="sxs-lookup"><span data-stu-id="f7060-104">Graphical authoring in Azure Automation</span></span>
## <a name="introduction"></a><span data-ttu-id="f7060-105">Introdução</span><span class="sxs-lookup"><span data-stu-id="f7060-105">Introduction</span></span>
<span data-ttu-id="f7060-106">A Criação Gráfica permite criar runbooks para a Automação do Azure sem as complexidades do código subjacente do Windows PowerShell ou do Fluxo de Trabalho do PowerShell.</span><span class="sxs-lookup"><span data-stu-id="f7060-106">Graphical Authoring allows you to create runbooks for Azure Automation without the complexities of the underlying Windows PowerShell or PowerShell Workflow code.</span></span> <span data-ttu-id="f7060-107">Você adiciona as atividades de uma biblioteca de cmdlets e runbooks a uma tela, vincula-as e configura para formar um fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="f7060-107">You add activities to the canvas from a library of cmdlets and runbooks, link them together and configure to form a workflow.</span></span>  <span data-ttu-id="f7060-108">Se você já trabalhou com o System Center Orchestrator ou o Service Management Automation (SMA), isso deve ser familiar para você.</span><span class="sxs-lookup"><span data-stu-id="f7060-108">If you have ever worked with System Center Orchestrator or Service Management Automation (SMA), then this should look familiar to you.</span></span>   

<span data-ttu-id="f7060-109">Este artigo fornece uma introdução à criação gráfica e aos conceitos de que você precisa para iniciar a criação de um runbook gráfico.</span><span class="sxs-lookup"><span data-stu-id="f7060-109">This article provides an introduction to graphical authoring and the concepts you need to get started in creating a graphical runbook.</span></span>

## <a name="graphical-runbooks"></a><span data-ttu-id="f7060-110">Runbooks gráficos</span><span class="sxs-lookup"><span data-stu-id="f7060-110">Graphical runbooks</span></span>
<span data-ttu-id="f7060-111">Todos os runbooks na Automação do Azure são Fluxos de Trabalho do Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="f7060-111">All runbooks in Azure Automation are Windows PowerShell Workflows.</span></span>  <span data-ttu-id="f7060-112">Os runbooks Gráficos e o Fluxo de Trabalho do PowerShell Gráfico geram o código do PowerShell que é executado pelos trabalhados da Automação, mas não é possível exibi-lo nem modificá-lo diretamente.</span><span class="sxs-lookup"><span data-stu-id="f7060-112">Graphical and Graphical PowerShell Workflow runbooks generate PowerShell code that is run by the Automation workers, but you are not able to view it or directly modify it.</span></span>  <span data-ttu-id="f7060-113">Um runbook Gráfico pode ser convertido em um runbook do Fluxo de Trabalho do PowerShell Gráfico e vice-versa, mas eles não podem ser convertidos em um runbook textual.</span><span class="sxs-lookup"><span data-stu-id="f7060-113">A Graphical runbook can be converted to a Graphical PowerShell Workflow runbook and vice-versa, but they cannot be converted to a textual runbook.</span></span> <span data-ttu-id="f7060-114">Um runbook textual existente não pode ser importado para o editor gráfico.</span><span class="sxs-lookup"><span data-stu-id="f7060-114">An existing textual runbook cannot be imported into the graphical editor.</span></span>  

## <a name="overview-of-graphical-editor"></a><span data-ttu-id="f7060-115">Visão geral do editor gráfico</span><span class="sxs-lookup"><span data-stu-id="f7060-115">Overview of graphical editor</span></span>
<span data-ttu-id="f7060-116">Você pode abrir o editor gráfico no Portal do Azure criando ou editando um runbook gráfico.</span><span class="sxs-lookup"><span data-stu-id="f7060-116">You can open the graphical editor in the Azure portal by creating or editing a graphical runbook.</span></span>

![Espaço de trabalho gráfico](media/automation-graphical-authoring-intro/runbook-graphical-editor.png)

<span data-ttu-id="f7060-118">As seções a seguir descrevem os controles no editor gráfico.</span><span class="sxs-lookup"><span data-stu-id="f7060-118">The following sections describe the controls in the graphical editor.</span></span>

### <a name="canvas"></a><span data-ttu-id="f7060-119">Tela</span><span class="sxs-lookup"><span data-stu-id="f7060-119">Canvas</span></span>
<span data-ttu-id="f7060-120">A Tela é onde você projeta seu runbook.</span><span class="sxs-lookup"><span data-stu-id="f7060-120">The Canvas is where you design your runbook.</span></span>  <span data-ttu-id="f7060-121">Você adiciona atividades dos nós no controle de Biblioteca ao runbook e os conecta a links para definir a lógica do runbook.</span><span class="sxs-lookup"><span data-stu-id="f7060-121">You add activities from the nodes in the Library control to the runbook and connect them with links to define the logic of the runbook.</span></span>

<span data-ttu-id="f7060-122">Você pode usar os controles na parte inferior da tela para ampliar e reduzir.</span><span class="sxs-lookup"><span data-stu-id="f7060-122">You can use the controls at the bottom of the canvas to zoom in and out.</span></span>

![Espaço de trabalho gráfico](media/automation-graphical-authoring-intro/runbook-canvas-controls.png)

### <a name="library-control"></a><span data-ttu-id="f7060-124">Controle de Biblioteca</span><span class="sxs-lookup"><span data-stu-id="f7060-124">Library control</span></span>
<span data-ttu-id="f7060-125">O controle de Biblioteca é onde você seleciona [atividades](#activities) para adicionar a seu runbook.</span><span class="sxs-lookup"><span data-stu-id="f7060-125">The Library control is where you select [activities](#activities) to add to your runbook.</span></span>  <span data-ttu-id="f7060-126">Você pode adicioná-las à tela, onde as conecta a outras atividades.</span><span class="sxs-lookup"><span data-stu-id="f7060-126">You add them to the canvas where you connect them to other activities.</span></span>  <span data-ttu-id="f7060-127">Ela inclui quatro seções, descritas na tabela a seguir.</span><span class="sxs-lookup"><span data-stu-id="f7060-127">It includes four sections described in the following table.</span></span>

| <span data-ttu-id="f7060-128">Seção</span><span class="sxs-lookup"><span data-stu-id="f7060-128">Section</span></span> | <span data-ttu-id="f7060-129">Descrição</span><span class="sxs-lookup"><span data-stu-id="f7060-129">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="f7060-130">Cmdlets</span><span class="sxs-lookup"><span data-stu-id="f7060-130">Cmdlets</span></span> |<span data-ttu-id="f7060-131">Inclui todos os cmdlets que podem ser usados em seu runbook.</span><span class="sxs-lookup"><span data-stu-id="f7060-131">Includes all the cmdlets that can be used in your runbook.</span></span>  <span data-ttu-id="f7060-132">Os cmdlets são organizados por módulo.</span><span class="sxs-lookup"><span data-stu-id="f7060-132">Cmdlets are organized by module.</span></span>  <span data-ttu-id="f7060-133">Todos os módulos instalados em sua conta de automação estarão disponíveis.</span><span class="sxs-lookup"><span data-stu-id="f7060-133">All of the modules that you have installed in your automation account will be available.</span></span> |
| <span data-ttu-id="f7060-134">Runbooks</span><span class="sxs-lookup"><span data-stu-id="f7060-134">Runbooks</span></span> |<span data-ttu-id="f7060-135">Inclui os runbooks em sua conta de automação.</span><span class="sxs-lookup"><span data-stu-id="f7060-135">Includes the runbooks in your automation account.</span></span> <span data-ttu-id="f7060-136">Esses runbooks podem ser adicionados à tela para serem usados como runbooks-filhos.</span><span class="sxs-lookup"><span data-stu-id="f7060-136">These runbooks can be added to the canvas to be used as child runbooks.</span></span> <span data-ttu-id="f7060-137">Somente os runbooks do mesmo tipo de núcleo do runbook sendo editado são mostrados; para os runbooks Gráficos, somente os runbooks baseados no PowerShell são mostrados, enquanto que para os runbooks do Fluxo de Trabalho do PowerShell Gráfico, apenas os runbooks baseados no Fluxo de Trabalho do PowerShell são mostrados.</span><span class="sxs-lookup"><span data-stu-id="f7060-137">Only runbooks of the same core type as the runbook being edited are shown; for Graphical runbooks only PowerShell-based runbooks are shown, while for Graphical PowerShell Workflow runbooks only PowerShell-Workflow-based runbooks are shown.</span></span> |
| <span data-ttu-id="f7060-138">Ativos</span><span class="sxs-lookup"><span data-stu-id="f7060-138">Assets</span></span> |<span data-ttu-id="f7060-139">Inclui os [ativos de automação](http://msdn.microsoft.com/library/dn939988.aspx) em sua conta de automação que podem ser usados em seu runbook.</span><span class="sxs-lookup"><span data-stu-id="f7060-139">Includes the [automation assets](http://msdn.microsoft.com/library/dn939988.aspx) in your automation account that can be used in your runbook.</span></span>  <span data-ttu-id="f7060-140">Quando você adiciona um ativo a um runbook, ele adiciona uma atividade de fluxo de trabalho que obtém o ativo selecionado.</span><span class="sxs-lookup"><span data-stu-id="f7060-140">When you add an asset to a runbook, it will add a workflow activity that gets the selected asset.</span></span>  <span data-ttu-id="f7060-141">No caso de ativos de variáveis, você pode selecionar se deseja adicionar uma atividade para obter a variável ou defini-la.</span><span class="sxs-lookup"><span data-stu-id="f7060-141">In the case of variable assets, you can select whether to add an activity to get the variable or set the variable.</span></span> |
| <span data-ttu-id="f7060-142">Controle de Runbook</span><span class="sxs-lookup"><span data-stu-id="f7060-142">Runbook Control</span></span> |<span data-ttu-id="f7060-143">Inclui as atividades de controle de runbook que podem ser usadas em seu runbook atual.</span><span class="sxs-lookup"><span data-stu-id="f7060-143">Includes runbook control activities that can be used in your current runbook.</span></span> <span data-ttu-id="f7060-144">Uma *Junção* recebe várias entradas e aguarda até que todas sejam concluídas antes de continuar o fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="f7060-144">A *Junction* takes multiple inputs and waits until all have completed before continuing the workflow.</span></span> <span data-ttu-id="f7060-145">Uma atividade do *Código* executa uma ou mais linhas de código do PowerShell ou do Fluxo de Trabalho do PowerShell, dependendo do tipo de runbook gráfico.</span><span class="sxs-lookup"><span data-stu-id="f7060-145">A *Code* activity runs one or more lines of PowerShell or PowerShell Workflow code depending on the graphical runbook type.</span></span>  <span data-ttu-id="f7060-146">Você pode usar essa atividade para código personalizado ou a funcionalidade que é difícil de conseguir obter com outras atividades.</span><span class="sxs-lookup"><span data-stu-id="f7060-146">You can use this activity for custom code or for functionality that is difficult to achieve with other activities.</span></span> |

### <a name="configuration-control"></a><span data-ttu-id="f7060-147">Controle de Configuração</span><span class="sxs-lookup"><span data-stu-id="f7060-147">Configuration control</span></span>
<span data-ttu-id="f7060-148">O controle da Configuração é onde você fornece detalhes para um objeto selecionado na tela.</span><span class="sxs-lookup"><span data-stu-id="f7060-148">The Configuration control is where you provide details for an object selected on the canvas.</span></span> <span data-ttu-id="f7060-149">As propriedades disponíveis nesse controle dependerão do tipo de objeto selecionado.</span><span class="sxs-lookup"><span data-stu-id="f7060-149">The properties available in this control will depend on the type of object selected.</span></span>  <span data-ttu-id="f7060-150">Quando você seleciona uma opção no controle de Configuração, ele abre folhas adicionais para fornecer informações adicionais.</span><span class="sxs-lookup"><span data-stu-id="f7060-150">When you select an option in the Configuration control, it will open additional blades in order to provide additional information.</span></span>

### <a name="test-control"></a><span data-ttu-id="f7060-151">Controle de Teste</span><span class="sxs-lookup"><span data-stu-id="f7060-151">Test control</span></span>
<span data-ttu-id="f7060-152">O controle de Teste não é exibido quando o editor gráfico é iniciado pela primeira vez.</span><span class="sxs-lookup"><span data-stu-id="f7060-152">The Test control is not displayed when the graphical editor is first started.</span></span> <span data-ttu-id="f7060-153">Ele é aberto quando você [testa um runbook gráfico](#graphical-runbook-procedures)interativamente.</span><span class="sxs-lookup"><span data-stu-id="f7060-153">It is opened when you interactively [test a graphical runbook](#graphical-runbook-procedures).</span></span>  

## <a name="graphical-runbook-procedures"></a><span data-ttu-id="f7060-154">Procedimentos de runbook gráfico</span><span class="sxs-lookup"><span data-stu-id="f7060-154">Graphical runbook procedures</span></span>
### <a name="exporting-and-importing-a-graphical-runbook"></a><span data-ttu-id="f7060-155">Exportar e importar um runbook gráfico</span><span class="sxs-lookup"><span data-stu-id="f7060-155">Exporting and importing a graphical runbook</span></span>
<span data-ttu-id="f7060-156">Você pode exportar apenas a versão publicada de um runbook gráfico.</span><span class="sxs-lookup"><span data-stu-id="f7060-156">You can only export the published version of a graphical runbook.</span></span>  <span data-ttu-id="f7060-157">Se o runbook ainda não foi publicado, o botão **Exportar publicado** estará desabilitado.</span><span class="sxs-lookup"><span data-stu-id="f7060-157">If the runbook has not yet been published, then the **Export published** button will be disabled.</span></span>  <span data-ttu-id="f7060-158">Quando você clica no botão **Exportar publicado** , o runbook é baixado no computador local.</span><span class="sxs-lookup"><span data-stu-id="f7060-158">When you click the **Export published** button, the runbook is downloaded to your local computer.</span></span>  <span data-ttu-id="f7060-159">O nome do arquivo corresponde ao nome do runbook com uma extensão *graphrunbook* .</span><span class="sxs-lookup"><span data-stu-id="f7060-159">The name of the file matches the name of the runbook with a *graphrunbook* extension.</span></span>

![Exportar publicado](media/automation-graphical-authoring-intro/runbook-export.png)

<span data-ttu-id="f7060-161">Você pode importar um arquivo de runbook Gráfico ou do Fluxo de Trabalho do PowerShell Gráfico selecionando a opção **Importar** ao adicionar um runbook.</span><span class="sxs-lookup"><span data-stu-id="f7060-161">You can import a Graphical or Graphical PowerShell Workflow runbook file by selecting the **Import** option when adding a runbook.</span></span>   <span data-ttu-id="f7060-162">Quando você seleciona o arquivo a ser importado, você pode manter o mesmo **Nome** ou fornecer um novo.</span><span class="sxs-lookup"><span data-stu-id="f7060-162">When you select the file to import, you can keep the same **Name** or provide a new one.</span></span>  <span data-ttu-id="f7060-163">O campo Tipo de Runbook exibirá o tipo de runbook após ele avaliar o arquivo selecionado e se você tentar selecionar um tipo diferente que não está correto, uma mensagem será apresentada observando que há conflitos potenciais e durante a conversão, poderá haver erros de sintaxe.</span><span class="sxs-lookup"><span data-stu-id="f7060-163">The Runbook Type field will display the type of runbook after it assesses the file selected and if you attempt to select a different type that is not correct, a message will be presented noting there are potential conflicts and during conversion, there could be syntax errors.</span></span>  

![Importar runbook](media/automation-graphical-authoring-intro/runbook-import-revised20165.png)

### <a name="testing-a-graphical-runbook"></a><span data-ttu-id="f7060-165">Testando um runbook gráfico</span><span class="sxs-lookup"><span data-stu-id="f7060-165">Testing a graphical runbook</span></span>
<span data-ttu-id="f7060-166">Você pode testar a versão de Rascunho de um runbook no Portal do Azure, mantendo a versão publicada do runbook inalterada, ou então pode testar um novo runbook antes que ele seja publicado.</span><span class="sxs-lookup"><span data-stu-id="f7060-166">You can test the Draft version of a runbook in the Azure portal while leaving the published version of the runbook unchanged, or you can test a new runbook before it has been published.</span></span> <span data-ttu-id="f7060-167">Isso permite que você verifique se o runbook está funcionando corretamente antes de substituir a versão publicada.</span><span class="sxs-lookup"><span data-stu-id="f7060-167">This allows you to verify that the runbook is working correctly before replacing the published version.</span></span> <span data-ttu-id="f7060-168">Quando você testa um runbook, o runbook de Rascunho é executado, e as ações que ele realiza são concluídas.</span><span class="sxs-lookup"><span data-stu-id="f7060-168">When you test a runbook, the Draft runbook is executed and any actions that it performs are completed.</span></span> <span data-ttu-id="f7060-169">Nenhum histórico de trabalho é criado, mas a saída é exibida no Painel de Saída de Teste.</span><span class="sxs-lookup"><span data-stu-id="f7060-169">No job history is created, but output is displayed in the Test Output Pane.</span></span> 

<span data-ttu-id="f7060-170">Abra o controle de Teste para um runbook abrindo o runbook para edição e, em seguida, clique no botão **Painel de teste** .</span><span class="sxs-lookup"><span data-stu-id="f7060-170">Open the Test control for a runbook by opening the runbook for edit and then click on the **Test pane** button.</span></span>

![Botão do painel de teste](media/automation-graphical-authoring-intro/runbook-edit-test-pane.png)

<span data-ttu-id="f7060-172">O controle de Teste solicitará parâmetros de entrada, e você poderá iniciar o runbook clicando no botão **Iniciar** .</span><span class="sxs-lookup"><span data-stu-id="f7060-172">The Test control will prompt for any input parameters, and you can start the runbook by clicking on the **Start** button.</span></span>

![Botões de controle de teste](media/automation-graphical-authoring-intro/runbook-test-start.png)

### <a name="publishing-a-graphical-runbook"></a><span data-ttu-id="f7060-174">Publicando um runbook gráfico</span><span class="sxs-lookup"><span data-stu-id="f7060-174">Publishing a graphical runbook</span></span>
<span data-ttu-id="f7060-175">Cada runbook na Automação do Azure tem um Rascunho e uma versão Publicada.</span><span class="sxs-lookup"><span data-stu-id="f7060-175">Each runbook in Azure Automation has a Draft and a Published version.</span></span> <span data-ttu-id="f7060-176">Somente a versão Publicada está disponível para ser executada, e somente a versão de Rascunho pode ser editada.</span><span class="sxs-lookup"><span data-stu-id="f7060-176">Only the Published version is available to be run, and only the Draft version can be edited.</span></span> <span data-ttu-id="f7060-177">A versão Publicada não é afetada pelas alterações feitas na versão de Rascunho.</span><span class="sxs-lookup"><span data-stu-id="f7060-177">The Published version is unaffected by any changes to the Draft version.</span></span> <span data-ttu-id="f7060-178">Quando a versão de Rascunho está pronta para ser disponibilizada, você a publica, o que substitui a versão Publicada pela versão de Rascunho.</span><span class="sxs-lookup"><span data-stu-id="f7060-178">When the Draft version is ready to be available, then you publish it which overwrites the Published version with the Draft version.</span></span>

<span data-ttu-id="f7060-179">Você pode publicar um runbook gráfico abrindo o runbook para edição e, em seguida, clicando no botão **Publicar** .</span><span class="sxs-lookup"><span data-stu-id="f7060-179">You can publish a graphical runbook by opening the runbook for editing and then clicking on the **Publish** button.</span></span>

![Botão Publicar](media/automation-graphical-authoring-intro/runbook-edit-publish.png)

<span data-ttu-id="f7060-181">Quando um runbook ainda não foi publicado, ele tem um status de **Novo**.</span><span class="sxs-lookup"><span data-stu-id="f7060-181">When a runbook has not yet been published, it has a status of **New**.</span></span>  <span data-ttu-id="f7060-182">Quando é publicado, ele tem um status de **Publicado**.</span><span class="sxs-lookup"><span data-stu-id="f7060-182">When it is published, it has a status of **Published**.</span></span>  <span data-ttu-id="f7060-183">Se você editar o runbook depois que ele foi publicado, e as versões de Rascunho e Publicada forem diferentes, o runbook terá um status de **Em edição**.</span><span class="sxs-lookup"><span data-stu-id="f7060-183">If you edit the runbook after it has been published, and the Draft and Published versions are different, the runbook has a status of **In edit**.</span></span>

![Status de runbook](media/automation-graphical-authoring-intro/runbook-statuses-revised20165.png) 

<span data-ttu-id="f7060-185">Você também tem a opção de reverter para a versão Publicada de um runbook.</span><span class="sxs-lookup"><span data-stu-id="f7060-185">You also have the option to revert to the Published version of a runbook.</span></span>  <span data-ttu-id="f7060-186">Isso descarta as alterações feitas desde que o runbook foi publicado pela última vez e substitui a versão de Rascunho do runbook pela versão Publicada.</span><span class="sxs-lookup"><span data-stu-id="f7060-186">This throws away any changes made since the runbook was last published and replaces the Draft version of the runbook with the Published version.</span></span>

![Botão Reverter para publicado](media/automation-graphical-authoring-intro/runbook-edit-revert-published.png)

## <a name="activities"></a><span data-ttu-id="f7060-188">atividades</span><span class="sxs-lookup"><span data-stu-id="f7060-188">Activities</span></span>
<span data-ttu-id="f7060-189">As atividades são os blocos de construção de um runbook.</span><span class="sxs-lookup"><span data-stu-id="f7060-189">Activities are the building blocks of a runbook.</span></span>  <span data-ttu-id="f7060-190">Uma atividade pode ser um cmdlet do PowerShell, um runbook filho ou uma atividade de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="f7060-190">An activity can be a PowerShell cmdlet, a child runbook, or a workflow activity.</span></span>  <span data-ttu-id="f7060-191">Você adiciona uma atividade ao runbook clicando com o botão direito do mouse no controle de Biblioteca e selecionando **Adicionar à tela**.</span><span class="sxs-lookup"><span data-stu-id="f7060-191">You add an activity to the runbook by right clicking it in the Library control and selecting **Add to canvas**.</span></span>  <span data-ttu-id="f7060-192">Em seguida, você pode clicar e arrastar a atividade para colocá-la em qualquer lugar que você desejar na tela.</span><span class="sxs-lookup"><span data-stu-id="f7060-192">You can then click and drag the activity to place it anywhere on the canvas that you like.</span></span>  <span data-ttu-id="f7060-193">O local da atividade na tela não afeta a operação do runbook de forma alguma.</span><span class="sxs-lookup"><span data-stu-id="f7060-193">The location of the of the activity on the canvas does not effect the operation of the runbook in any way.</span></span>  <span data-ttu-id="f7060-194">Você pode definir o layout de seu runbook da maneira que considerar mais adequada para visualizar sua operação.</span><span class="sxs-lookup"><span data-stu-id="f7060-194">You can layout your runbook however you find it most suitable to visualize its operation.</span></span> 

![Adicionar à tela](media/automation-graphical-authoring-intro/add-to-canvas-revised20165.png)

<span data-ttu-id="f7060-196">Selecione a atividade na tela para configurar suas propriedades e parâmetros na folha Configuração.</span><span class="sxs-lookup"><span data-stu-id="f7060-196">Select the activity on the canvas to configure its properties and parameters in the Configuration blade.</span></span>  <span data-ttu-id="f7060-197">Você pode alterar o **Rótulo** da atividade para algo que a descreva a você.</span><span class="sxs-lookup"><span data-stu-id="f7060-197">You can change the **Label** of the activity to something that is descriptive to you.</span></span>  <span data-ttu-id="f7060-198">O cmdlet original ainda está sendo executado. Você está simplesmente alterando seu nome para exibição, que será usado no editor gráfico.</span><span class="sxs-lookup"><span data-stu-id="f7060-198">The original cmdlet is still being run, you are simply changing its display name that will be used in the graphical editor.</span></span>  <span data-ttu-id="f7060-199">O rótulo deve ser exclusivo no runbook.</span><span class="sxs-lookup"><span data-stu-id="f7060-199">The label must be unique within the runbook.</span></span> 

### <a name="parameter-sets"></a><span data-ttu-id="f7060-200">Conjuntos de parâmetros</span><span class="sxs-lookup"><span data-stu-id="f7060-200">Parameter sets</span></span>
<span data-ttu-id="f7060-201">Um conjunto de parâmetros define os parâmetros obrigatórios e opcionais que aceitarão valores para determinado cmdlet.</span><span class="sxs-lookup"><span data-stu-id="f7060-201">A parameter set defines the mandatory and optional parameters that will accept values for a particular cmdlet.</span></span>  <span data-ttu-id="f7060-202">Todos os cmdlets têm pelo menos um conjunto de parâmetros, e alguns têm vários.</span><span class="sxs-lookup"><span data-stu-id="f7060-202">All cmdlets have at least one parameter set, and some have multiple.</span></span>  <span data-ttu-id="f7060-203">Se um cmdlet tem vários conjuntos de parâmetros, você deve selecionar qual deles usará para poder configurar os parâmetros.</span><span class="sxs-lookup"><span data-stu-id="f7060-203">If a cmdlet has multiple parameter sets, then you must select which one you will use before you can configure parameters.</span></span>  <span data-ttu-id="f7060-204">Os parâmetros que você pode configurar dependem do conjunto de parâmetros que você escolhe.</span><span class="sxs-lookup"><span data-stu-id="f7060-204">The parameters that you can configure will depend on the parameter set that you choose.</span></span>  <span data-ttu-id="f7060-205">Você pode alterar o conjunto de parâmetros usado por uma atividade selecionando **Conjunto de Parâmetros** e selecionando outro conjunto.</span><span class="sxs-lookup"><span data-stu-id="f7060-205">You can change the parameter set used by an activity by selecting **Parameter Set** and selecting another set.</span></span>  <span data-ttu-id="f7060-206">Nesse caso, quaisquer valores de parâmetros que você tiver configurado serão perdidos.</span><span class="sxs-lookup"><span data-stu-id="f7060-206">In this case, any parameter values that you configured are lost.</span></span>

<span data-ttu-id="f7060-207">No exemplo a seguir, o cmdlet Get-AzureRmVM tem três conjuntos de parâmetros.</span><span class="sxs-lookup"><span data-stu-id="f7060-207">In the following example, the Get-AzureRmVM cmdlet has three parameter sets.</span></span>  <span data-ttu-id="f7060-208">Você não pode configurar valores de parâmetros até selecionar um dos conjuntos de parâmetros.</span><span class="sxs-lookup"><span data-stu-id="f7060-208">You cannot configure parameter values until you select one of the parameter sets.</span></span>  <span data-ttu-id="f7060-209">O conjunto de parâmetros ListVirtualMachineInResourceGroupParamSet é para retornar todas as máquinas virtuais em um grupo de recursos e tem um único parâmetro opcional.</span><span class="sxs-lookup"><span data-stu-id="f7060-209">The ListVirtualMachineInResourceGroupParamSet parameter set is for returning all virtual machines in a resource group and has a single optional parameter.</span></span>  <span data-ttu-id="f7060-210">GetVirtualMachineInResourceGroupParamSet é para especificar a máquina virtual que você deseja retornar, tem um parâmetro obrigatório e um opcional.</span><span class="sxs-lookup"><span data-stu-id="f7060-210">The GetVirtualMachineInResourceGroupParamSet is for specifying the virtual machine you want to return and has two mandatory and one optional parameter.</span></span>

![Conjunto de Parâmetros](media/automation-graphical-authoring-intro/get-azurermvm-parameter-sets.png)

#### <a name="parameter-values"></a><span data-ttu-id="f7060-212">Valores de parâmetros</span><span class="sxs-lookup"><span data-stu-id="f7060-212">Parameter values</span></span>
<span data-ttu-id="f7060-213">Ao especificar um valor para um parâmetro, você seleciona uma fonte de dados para determinar como o valor será especificado.</span><span class="sxs-lookup"><span data-stu-id="f7060-213">When you specify a value for a parameter, you select a data source to determine how the value will be specified.</span></span>  <span data-ttu-id="f7060-214">As fontes de dados que estão disponíveis para determinado parâmetro dependem dos valores válidos para esse parâmetro.</span><span class="sxs-lookup"><span data-stu-id="f7060-214">The data sources that are available for a particular parameter will depend on the valid values for that parameter.</span></span>  <span data-ttu-id="f7060-215">Por exemplo, Null não será uma opção disponível para um parâmetro que não permita valores nulos.</span><span class="sxs-lookup"><span data-stu-id="f7060-215">For example, Null will not be an available option for a parameter that does not allow null values.</span></span>

| <span data-ttu-id="f7060-216">Fonte de dados</span><span class="sxs-lookup"><span data-stu-id="f7060-216">Data Source</span></span> | <span data-ttu-id="f7060-217">Descrição</span><span class="sxs-lookup"><span data-stu-id="f7060-217">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="f7060-218">Valor Constante</span><span class="sxs-lookup"><span data-stu-id="f7060-218">Constant Value</span></span> |<span data-ttu-id="f7060-219">Digite um valor válido para o parâmetro.</span><span class="sxs-lookup"><span data-stu-id="f7060-219">Type in a value for the parameter.</span></span>  <span data-ttu-id="f7060-220">Só está disponível para os seguintes tipos de dados: Int32,Int64,String,Boolean,DateTime,Switch.</span><span class="sxs-lookup"><span data-stu-id="f7060-220">This is only available for the following data types: Int32,Int64,String,Boolean,DateTime,Switch.</span></span> |
| <span data-ttu-id="f7060-221">Saída de Atividade</span><span class="sxs-lookup"><span data-stu-id="f7060-221">Activity Output</span></span> |<span data-ttu-id="f7060-222">Saída de uma atividade que precede a atividade atual no fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="f7060-222">Output from an activity that precedes the current activity in the workflow.</span></span>  <span data-ttu-id="f7060-223">Todas as atividades válidas serão listadas.</span><span class="sxs-lookup"><span data-stu-id="f7060-223">All valid activities will be listed.</span></span>  <span data-ttu-id="f7060-224">Selecione apenas a atividade para usar sua saída para o valor do parâmetro.</span><span class="sxs-lookup"><span data-stu-id="f7060-224">Select just the activity to use its output for the parameter value.</span></span>  <span data-ttu-id="f7060-225">Se a atividade produzir um objeto com várias propriedades, você poderá digitar o nome da propriedade depois de selecioná-la.</span><span class="sxs-lookup"><span data-stu-id="f7060-225">If the activity outputs an object with multiple properties, then you can type in the name of the property after selecting the activity.</span></span> |
| <span data-ttu-id="f7060-226">Entrada do Runbook</span><span class="sxs-lookup"><span data-stu-id="f7060-226">Runbook Input</span></span> |<span data-ttu-id="f7060-227">Selecione um parâmetro de entrada de runbook como entrada para o parâmetro de atividade.</span><span class="sxs-lookup"><span data-stu-id="f7060-227">Select a runbook input parameter as input to the activity parameter.</span></span> |
| <span data-ttu-id="f7060-228">Ativo da Variável</span><span class="sxs-lookup"><span data-stu-id="f7060-228">Variable Asset</span></span> |<span data-ttu-id="f7060-229">Selecione uma Variável de Automação como entrada.</span><span class="sxs-lookup"><span data-stu-id="f7060-229">Select an Automation Variable as input.</span></span> |
| <span data-ttu-id="f7060-230">Ativo da Credencial</span><span class="sxs-lookup"><span data-stu-id="f7060-230">Credential Asset</span></span> |<span data-ttu-id="f7060-231">Selecione uma Credencial de Automação como entrada.</span><span class="sxs-lookup"><span data-stu-id="f7060-231">Select an Automation Credential as input.</span></span> |
| <span data-ttu-id="f7060-232">Ativo do Certificado</span><span class="sxs-lookup"><span data-stu-id="f7060-232">Certificate Asset</span></span> |<span data-ttu-id="f7060-233">Selecione um Certificado de Automação como entrada.</span><span class="sxs-lookup"><span data-stu-id="f7060-233">Select an Automation Certificate as input.</span></span> |
| <span data-ttu-id="f7060-234">Ativo da Conexão</span><span class="sxs-lookup"><span data-stu-id="f7060-234">Connection Asset</span></span> |<span data-ttu-id="f7060-235">Selecione uma Conexão de Automação como entrada.</span><span class="sxs-lookup"><span data-stu-id="f7060-235">Select an Automation Connection as input.</span></span> |
| <span data-ttu-id="f7060-236">Expressão do PowerShell</span><span class="sxs-lookup"><span data-stu-id="f7060-236">PowerShell Expression</span></span> |<span data-ttu-id="f7060-237">Especifique a [expressão simples do PowerShell](#powershell-expressions).</span><span class="sxs-lookup"><span data-stu-id="f7060-237">Specify simple [PowerShell expression](#powershell-expressions).</span></span>  <span data-ttu-id="f7060-238">A expressão será avaliada antes da atividade, e o resultado será usado para o valor do parâmetro.</span><span class="sxs-lookup"><span data-stu-id="f7060-238">The expression will be evaluated before the activity and the result used for the parameter value.</span></span>  <span data-ttu-id="f7060-239">Você pode usar variáveis para referir-se à saída de uma atividade ou um parâmetro de entrada de runbook.</span><span class="sxs-lookup"><span data-stu-id="f7060-239">You can use variables to refer to the output of an activity or a runbook input parameter.</span></span> |
| <span data-ttu-id="f7060-240">Não configurado</span><span class="sxs-lookup"><span data-stu-id="f7060-240">Not configured</span></span> |<span data-ttu-id="f7060-241">Limpa qualquer valor que foi configurado anteriormente.</span><span class="sxs-lookup"><span data-stu-id="f7060-241">Clears any value that was previously configured.</span></span> |

#### <a name="optional-additional-parameters"></a><span data-ttu-id="f7060-242">Parâmetros adicionais opcionais</span><span class="sxs-lookup"><span data-stu-id="f7060-242">Optional additional parameters</span></span>
<span data-ttu-id="f7060-243">Todos os cmdlets terão a opção de fornecer parâmetros adicionais.</span><span class="sxs-lookup"><span data-stu-id="f7060-243">All cmdlets will have the option to provide additional parameters.</span></span>  <span data-ttu-id="f7060-244">Estes são os parâmetros comuns do PowerShell ou outros parâmetros personalizados.</span><span class="sxs-lookup"><span data-stu-id="f7060-244">These are PowerShell common parameters or other custom parameters.</span></span>  <span data-ttu-id="f7060-245">Será exibida uma caixa de texto em que você pode fornecer parâmetros usando a sintaxe do PowerShell.</span><span class="sxs-lookup"><span data-stu-id="f7060-245">You are presented with a text box where you can provide parameters using PowerShell syntax.</span></span>  <span data-ttu-id="f7060-246">Por exemplo, para usar o parâmetro comum **Verbose**, você especificaria **"-Verbose:$True"**.</span><span class="sxs-lookup"><span data-stu-id="f7060-246">For example, to use the **Verbose** common parameter, you would specify **"-Verbose:$True"**.</span></span>

### <a name="retry-activity"></a><span data-ttu-id="f7060-247">Atividade de repetição</span><span class="sxs-lookup"><span data-stu-id="f7060-247">Retry activity</span></span>
<span data-ttu-id="f7060-248">**Comportamento de Repetição** permite que uma atividade seja executada várias vezes até que uma determinada condição seja atendida; muito parecido com um loop.</span><span class="sxs-lookup"><span data-stu-id="f7060-248">**Retry Behavior** allows an activity to be run multiple times until a particular condition is met, much like a loop.</span></span>  <span data-ttu-id="f7060-249">Você pode usar esse recurso para as atividades que devem ser executadas várias vezes, estão sujeitas a erros e podem precisar mais de uma tentativa de sucesso ou testar as informações de saída da atividade para obter dados válidos.</span><span class="sxs-lookup"><span data-stu-id="f7060-249">You can use this feature for activities that should run multiple times, are error prone and may need more than one attempt for success, or test the output information of the activity for valid data.</span></span>    

<span data-ttu-id="f7060-250">Quando você habilita a repetição de uma atividade, é possível definir um atraso e uma condição.</span><span class="sxs-lookup"><span data-stu-id="f7060-250">When you enable retry for an activity, you can set a delay and a condition.</span></span>  <span data-ttu-id="f7060-251">O atraso é o tempo (medido em segundos ou minutos) que o runbook aguardará antes de executar novamente a atividade.</span><span class="sxs-lookup"><span data-stu-id="f7060-251">The delay is the time (measured in seconds or minutes) that the runbook will wait before it runs the activity again.</span></span>  <span data-ttu-id="f7060-252">Se nenhum atraso for especificado, a atividade será executada novamente imediatamente após a conclusão.</span><span class="sxs-lookup"><span data-stu-id="f7060-252">If no delay is specified, then the activity will run again immediately after it completes.</span></span> 

![Atraso de repetição de atividade](media/automation-graphical-authoring-intro/retry-delay.png)

<span data-ttu-id="f7060-254">A condição de repetição é uma expressão do PowerShell avaliada sempre após a execução da atividade.</span><span class="sxs-lookup"><span data-stu-id="f7060-254">The retry condition is a PowerShell expression that is evaluated after each time the activity runs.</span></span>  <span data-ttu-id="f7060-255">Se a expressão for resolvida como True, a atividade será executada novamente.</span><span class="sxs-lookup"><span data-stu-id="f7060-255">If the expression resolves to True, then the activity runs again.</span></span>  <span data-ttu-id="f7060-256">Se a expressão for resolvida como False, a atividade não será executada novamente e o runbook passará para a próxima atividade.</span><span class="sxs-lookup"><span data-stu-id="f7060-256">If the expression resolves to False then the activity does not run again, and the runbook moves on to the next activity.</span></span> 

![Atraso de repetição de atividade](media/automation-graphical-authoring-intro/retry-condition.png)

<span data-ttu-id="f7060-258">A condição de repetição pode usar uma variável chamada $RetryData que fornece acesso às informações sobre as repetições de atividade.</span><span class="sxs-lookup"><span data-stu-id="f7060-258">The retry condition can use a variable called $RetryData that provides access to information about the activity retries.</span></span>  <span data-ttu-id="f7060-259">Essa variável tem as propriedades na tabela a seguir.</span><span class="sxs-lookup"><span data-stu-id="f7060-259">This variable has the properties in the following table.</span></span>

| <span data-ttu-id="f7060-260">Propriedade</span><span class="sxs-lookup"><span data-stu-id="f7060-260">Property</span></span> | <span data-ttu-id="f7060-261">Descrição</span><span class="sxs-lookup"><span data-stu-id="f7060-261">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="f7060-262">NumberOfAttempts</span><span class="sxs-lookup"><span data-stu-id="f7060-262">NumberOfAttempts</span></span> |<span data-ttu-id="f7060-263">Número de vezes que a atividade foi executada.</span><span class="sxs-lookup"><span data-stu-id="f7060-263">Number of times that the activity has been run.</span></span> |
| <span data-ttu-id="f7060-264">Saída</span><span class="sxs-lookup"><span data-stu-id="f7060-264">Output</span></span> |<span data-ttu-id="f7060-265">Saída da última execução da atividade.</span><span class="sxs-lookup"><span data-stu-id="f7060-265">Output from the last run of the activity.</span></span> |
| <span data-ttu-id="f7060-266">TotalDuration</span><span class="sxs-lookup"><span data-stu-id="f7060-266">TotalDuration</span></span> |<span data-ttu-id="f7060-267">Tempo decorrido desde que a atividade foi iniciada pela primeira vez.</span><span class="sxs-lookup"><span data-stu-id="f7060-267">Timed elapsed since the activity was started the first time.</span></span> |
| <span data-ttu-id="f7060-268">StartedAt</span><span class="sxs-lookup"><span data-stu-id="f7060-268">StartedAt</span></span> |<span data-ttu-id="f7060-269">Hora no formato UTC em que a atividade foi iniciada pela primeira vez.</span><span class="sxs-lookup"><span data-stu-id="f7060-269">Time in UTC format the activity was first started.</span></span> |

<span data-ttu-id="f7060-270">Veja a seguir exemplos de condições de repetição da atividade.</span><span class="sxs-lookup"><span data-stu-id="f7060-270">Following are examples of activity retry conditions.</span></span>

    # Run the activity exactly 10 times.
    $RetryData.NumberOfAttempts -ge 10 

    # Run the activity repeatedly until it produces any output.
    $RetryData.Output.Count -ge 1 

    # Run the activity repeatedly until 2 minutes has elapsed. 
    $RetryData.TotalDuration.TotalMinutes -ge 2

<span data-ttu-id="f7060-271">Depois de configurar uma condição de repetição para uma atividade, a atividade inclui duas indicações visuais para lembrá-lo.</span><span class="sxs-lookup"><span data-stu-id="f7060-271">After you configure a retry condition for an activity, the activity includes two visual cues to remind you.</span></span>  <span data-ttu-id="f7060-272">Uma é apresentada na atividade e a outra é quando você examina a configuração da atividade.</span><span class="sxs-lookup"><span data-stu-id="f7060-272">One is presented in the activity and the other is when you review the configuration of the activity.</span></span>

![Indicadores Visuais de Repetição da Atividade](media/automation-graphical-authoring-intro/runbook-activity-retry-visual-cue.png)

### <a name="workflow-script-control"></a><span data-ttu-id="f7060-274">Controle de Script de Fluxo de Trabalho</span><span class="sxs-lookup"><span data-stu-id="f7060-274">Workflow Script control</span></span>
<span data-ttu-id="f7060-275">Um Controle de código é uma atividade especial que aceita o script do PowerShell ou do Fluxo de Trabalho do PowerShell, dependendo do tipo de runbook gráfico sendo criado para fornecer uma funcionalidade que pode não estar disponível.</span><span class="sxs-lookup"><span data-stu-id="f7060-275">A Code control is a special activity that accepts PowerShell or PowerShell Workflow script depending on the type of graphical runbook being authored in order to provide functionality that may otherwise not be available.</span></span>  <span data-ttu-id="f7060-276">Ele não pode aceitar parâmetros, mas pode usar variáveis para saída de atividade e parâmetros de entrada de runbook.</span><span class="sxs-lookup"><span data-stu-id="f7060-276">It cannot accept parameters, but it can use variables for activity output and runbook input parameters.</span></span>  <span data-ttu-id="f7060-277">Qualquer saída de atividade é adicionada ao barramento de dados, a menos que não tenha um link de saída. Nesse caso, é adicionada à saída do runbook.</span><span class="sxs-lookup"><span data-stu-id="f7060-277">Any output of the activity is added to the databus unless it has no outgoing link in which case it is added to the output of the runbook.</span></span>

<span data-ttu-id="f7060-278">Por exemplo, o código a seguir executa cálculos de data usando uma variável de entrada de runbook chamada $NumberOfDays.</span><span class="sxs-lookup"><span data-stu-id="f7060-278">For example the following code performs date calculations using a runbook input variable called $NumberOfDays.</span></span>  <span data-ttu-id="f7060-279">Em seguida, envia uma data e hora calculadas como saída a ser usada por atividades subsequentes no runbook.</span><span class="sxs-lookup"><span data-stu-id="f7060-279">It then sends a calculated date time as output to be used by subsequent activities in the runbook.</span></span>

    $DateTimeNow = (Get-Date).ToUniversalTime()
    $DateTimeStart = ($DateTimeNow).AddDays(-$NumberOfDays)}
    $DateTimeStart


## <a name="links-and-workflow"></a><span data-ttu-id="f7060-280">Links e fluxo de trabalho</span><span class="sxs-lookup"><span data-stu-id="f7060-280">Links and workflow</span></span>
<span data-ttu-id="f7060-281">Um **link** em um runbook gráfico conecta duas atividades.</span><span class="sxs-lookup"><span data-stu-id="f7060-281">A **link** in a graphical runbook connects two activities.</span></span>  <span data-ttu-id="f7060-282">Ele é exibido na tela como uma seta apontando da atividade de origem para a atividade de destino.</span><span class="sxs-lookup"><span data-stu-id="f7060-282">It is displayed on the canvas as an arrow pointing from the source activity to the destination activity.</span></span>  <span data-ttu-id="f7060-283">As atividades são executadas na direção da seta, com a atividade de destino se iniciando após a atividade de origem ser concluída.</span><span class="sxs-lookup"><span data-stu-id="f7060-283">The activities run in the direction of the arrow with the destination activity starting after the source activity completes.</span></span>  

### <a name="create-a-link"></a><span data-ttu-id="f7060-284">Criar um link</span><span class="sxs-lookup"><span data-stu-id="f7060-284">Create a link</span></span>
<span data-ttu-id="f7060-285">Crie um link entre duas atividades selecionando a atividade de origem e clicando no círculo na parte inferior da forma.</span><span class="sxs-lookup"><span data-stu-id="f7060-285">Create a link between two activities by selecting the source activity and clicking the circle at the bottom of the shape.</span></span>  <span data-ttu-id="f7060-286">Arraste a seta para a atividade de destino e solte-a.</span><span class="sxs-lookup"><span data-stu-id="f7060-286">Drag the arrow to the destination activity and release.</span></span>

![Criar um link](media/automation-graphical-authoring-intro/create-link-revised20165.png)

<span data-ttu-id="f7060-288">Selecione o link para configurar suas propriedades na folha Configuração.</span><span class="sxs-lookup"><span data-stu-id="f7060-288">Select the link to configure its properties in the Configuration blade.</span></span>  <span data-ttu-id="f7060-289">Isso incluirá o tipo de link, que é descrito na tabela a seguir.</span><span class="sxs-lookup"><span data-stu-id="f7060-289">This will include the link type which is described in the following table.</span></span>

| <span data-ttu-id="f7060-290">Tipo de link</span><span class="sxs-lookup"><span data-stu-id="f7060-290">Link Type</span></span> | <span data-ttu-id="f7060-291">Descrição</span><span class="sxs-lookup"><span data-stu-id="f7060-291">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="f7060-292">Pipeline</span><span class="sxs-lookup"><span data-stu-id="f7060-292">Pipeline</span></span> |<span data-ttu-id="f7060-293">A atividade de destino é executada uma vez para cada objeto de saída da atividade de origem.</span><span class="sxs-lookup"><span data-stu-id="f7060-293">The destination activity is run once for each object output from the source activity.</span></span>  <span data-ttu-id="f7060-294">A atividade de destino não será executada se a atividade de origem não resultar em saída.</span><span class="sxs-lookup"><span data-stu-id="f7060-294">The destination activity does not run if the source activity results in no output.</span></span>  <span data-ttu-id="f7060-295">A saída da atividade de origem está disponível como um objeto.</span><span class="sxs-lookup"><span data-stu-id="f7060-295">Output from the source activity is available as an object.</span></span> |
| <span data-ttu-id="f7060-296">Sequência</span><span class="sxs-lookup"><span data-stu-id="f7060-296">Sequence</span></span> |<span data-ttu-id="f7060-297">A atividade de destino é executada apenas uma vez.</span><span class="sxs-lookup"><span data-stu-id="f7060-297">The destination activity runs only once.</span></span>  <span data-ttu-id="f7060-298">Ela recebe uma matriz de objetos da atividade de origem.</span><span class="sxs-lookup"><span data-stu-id="f7060-298">It receives an array of objects from the source activity.</span></span>  <span data-ttu-id="f7060-299">A saída da atividade de origem está disponível como uma matriz de objetos.</span><span class="sxs-lookup"><span data-stu-id="f7060-299">Output from the source activity is available as an array of objects.</span></span> |

### <a name="starting-activity"></a><span data-ttu-id="f7060-300">Atividade de início</span><span class="sxs-lookup"><span data-stu-id="f7060-300">Starting activity</span></span>
<span data-ttu-id="f7060-301">Um runbook gráfico será iniciado com todas as atividades que não têm um link de entrada.</span><span class="sxs-lookup"><span data-stu-id="f7060-301">A graphical runbook will start with any activities that do not have an incoming link.</span></span>  <span data-ttu-id="f7060-302">Isso geralmente será apenas uma atividade, que deve atuar como a atividade de início para o runbook.</span><span class="sxs-lookup"><span data-stu-id="f7060-302">This will often be only one activity which would act as the starting activity for the runbook.</span></span>  <span data-ttu-id="f7060-303">Se várias atividades não tiverem um link de entrada, o runbook começará executando-as em paralelo.</span><span class="sxs-lookup"><span data-stu-id="f7060-303">If multiple activities do not have an incoming link, then the runbook will start by running them in parallel.</span></span>  <span data-ttu-id="f7060-304">Ele seguirá então os links para executar outras atividades, à medida que cada uma for concluída.</span><span class="sxs-lookup"><span data-stu-id="f7060-304">It will then follow the links to run other activities as each completes.</span></span>

### <a name="conditions"></a><span data-ttu-id="f7060-305">Condições</span><span class="sxs-lookup"><span data-stu-id="f7060-305">Conditions</span></span>
<span data-ttu-id="f7060-306">Quando você especificar uma condição em um link, a atividade de destino será executada somente se a condição for resolvida como verdadeira.</span><span class="sxs-lookup"><span data-stu-id="f7060-306">When you specify a condition on a link, the destination activity is only run if the condition resolves to true.</span></span>  <span data-ttu-id="f7060-307">Normalmente, você usará uma variável $ActivityOutput em uma condição para recuperar a saída da atividade de origem.</span><span class="sxs-lookup"><span data-stu-id="f7060-307">You will typically use an $ActivityOutput variable in a condition to retrieve the output from the source activity.</span></span>  

<span data-ttu-id="f7060-308">Para um link de pipeline, você especifica uma condição para um único objeto, e a condição é avaliada para cada saída de objeto pela atividade de origem.</span><span class="sxs-lookup"><span data-stu-id="f7060-308">For a pipeline link, you specify a condition for a single object, and the condition is evaluated for each object output by the source activity.</span></span>  <span data-ttu-id="f7060-309">A atividade de destino é então executada para cada objeto que atende à condição.</span><span class="sxs-lookup"><span data-stu-id="f7060-309">The destination activity is then run for each object that satisfies the condition.</span></span>  <span data-ttu-id="f7060-310">Por exemplo, com uma atividade de origem Get-AzureRmVm, a sintaxe a seguir pode ser usada para que um link de pipeline condicional recupere somente as máquinas virtuais no grupo de recursos denominado *Group1*.</span><span class="sxs-lookup"><span data-stu-id="f7060-310">For example, with a source activity of Get-AzureRmVm, the following syntax could be used for a conditional pipeline link to retrieve only virtual machines in the resource group named *Group1*.</span></span>  

    $ActivityOutput['Get Azure VMs'].Name -match "Group1"

<span data-ttu-id="f7060-311">Para um link de sequência, a condição é avaliada apenas uma vez, pois é retornada uma única matriz que contém a saída de todos os objetos da atividade de origem.</span><span class="sxs-lookup"><span data-stu-id="f7060-311">For a sequence link, the condition is only evaluated once since a single array is returned containing all objects output from the source activity.</span></span>  <span data-ttu-id="f7060-312">Por isso, um link de sequência não pode ser usado para filtragem como um link de pipeline, mas simplesmente determinará se a próxima atividade é executada ou não.</span><span class="sxs-lookup"><span data-stu-id="f7060-312">Because of this, a sequence link cannot be used for filtering like a pipeline link but will simply determine whether or not the next activity is run.</span></span> <span data-ttu-id="f7060-313">Considere o seguinte conjunto de atividades, por exemplo, em nosso runbook Iniciar VM.</span><span class="sxs-lookup"><span data-stu-id="f7060-313">Take for example the following set of activities in our Start VM runbook.</span></span><br> <span data-ttu-id="f7060-314">![Link Condicional com Sequências](media/automation-graphical-authoring-intro/runbook-conditional-links-sequence.png)</span><span class="sxs-lookup"><span data-stu-id="f7060-314">![Conditional Link with Sequences](media/automation-graphical-authoring-intro/runbook-conditional-links-sequence.png)</span></span><br>
<span data-ttu-id="f7060-315">Há três links de sequência diferentes que estão verificando os valores fornecidos a dois parâmetros de entrada do runbook representando o nome da VM e o nome do Grupo de Recursos para determinar qual é a ação apropriada a tomar - iniciar uma única VM, iniciar todas as VMs no grupo de recursos ou todas as VMs em uma assinatura.</span><span class="sxs-lookup"><span data-stu-id="f7060-315">There are three different sequence links that are verifying values were provided to two runbook input parameters representing VM name and Resource Group name in order to determine which is the appropriate action to take - start a single VM, start all VMs in the resouce group, or all VMs in a subscription.</span></span>  <span data-ttu-id="f7060-316">Para o link da sequência entre Conectar o Azure e Obter uma VM, aqui está a lógica da condição:</span><span class="sxs-lookup"><span data-stu-id="f7060-316">For the sequence link between Connect to Azure and Get single VM, here is the condition logic:</span></span>

    <# 
    Both VMName and ResourceGroupName runbook input parameters have values 
    #>
    (
    (($VMName -ne $null) -and ($VMName.Length -gt 0))
    ) -and (
    (($ResourceGroupName -ne $null) -and ($ResourceGroupName.Length -gt 0))
    )

<span data-ttu-id="f7060-317">Quando você usa um link condicional, os dados disponíveis da atividade de origem para outras atividades nessa ramificação são filtradas pela condição.</span><span class="sxs-lookup"><span data-stu-id="f7060-317">When you use a conditional link, the data available from the source activity to other activities in that branch will be filtered by the condition.</span></span>  <span data-ttu-id="f7060-318">Se uma atividade for a origem para vários links, os dados disponíveis para atividades em cada ramificação dependerão da condição no link que se conecta a essa ramificação.</span><span class="sxs-lookup"><span data-stu-id="f7060-318">If an activity is the source to multiple links, then the data available to activities in each branch will depend on the condition in the link connecting to that branch.</span></span>

<span data-ttu-id="f7060-319">Por exemplo, a atividade **Start-AzureRmVm** no runbook abaixo inicia todas as máquinas virtuais.</span><span class="sxs-lookup"><span data-stu-id="f7060-319">For example, the **Start-AzureRmVm** activity in the runbook below starts all virtual machines.</span></span>  <span data-ttu-id="f7060-320">Ela tem dois links condicionais.</span><span class="sxs-lookup"><span data-stu-id="f7060-320">It has two conditional links.</span></span>  <span data-ttu-id="f7060-321">O primeiro link condicional usa a expressão *$ActivityOutput ['Start-AzureRmVM'].IsSuccessStatusCode-eq $true* para filtrar se a atividade Start-AzureRmVm foi concluída com êxito.</span><span class="sxs-lookup"><span data-stu-id="f7060-321">The first conditional link uses the expression *$ActivityOutput['Start-AzureRmVM'].IsSuccessStatusCode -eq $true* to filter if the Start-AzureRmVm activity completed successfully.</span></span>  <span data-ttu-id="f7060-322">O segundo link condicional usa a expressão *$ActivityOutput['Start-AzureRmVM'].IsSuccessStatusCode -ne $true* para filtrar se a atividade Start-AzureRmVm não conseguiu iniciar a máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="f7060-322">The second uses the expression *$ActivityOutput['Start-AzureRmVM'].IsSuccessStatusCode -ne $true* to filter if the Start-AzureRmVm activity failed to start the virtual machine.</span></span>  

![Exemplo de link condicional](media/automation-graphical-authoring-intro/runbook-conditional-links.png)

<span data-ttu-id="f7060-324">Qualquer atividade que seguir o primeiro link e usa a saída de atividade de Get-AzureVM só obterá as máquinas virtuais que foram iniciadas no momento da execução de Get-AzureVM.</span><span class="sxs-lookup"><span data-stu-id="f7060-324">Any activity that follows the first link and uses the activity output from Get-AzureVM will only get the virtual machines that were started at the time that Get-AzureVM was run.</span></span>  <span data-ttu-id="f7060-325">Qualquer atividade que seguir o segundo link só obterá as máquinas virtuais que foram interrompidas no momento da execução de Get-AzureVM.</span><span class="sxs-lookup"><span data-stu-id="f7060-325">Any activity that follows the second link will only get the the virtual machines that were stopped at the time that Get-AzureVM was run.</span></span>  <span data-ttu-id="f7060-326">Qualquer atividade que seguir o terceiro link obterá todas as máquinas virtuais, independentemente do estado de execução.</span><span class="sxs-lookup"><span data-stu-id="f7060-326">Any activity following the third link will get all virtual machines regardless of their running state.</span></span>

### <a name="junctions"></a><span data-ttu-id="f7060-327">Junções</span><span class="sxs-lookup"><span data-stu-id="f7060-327">Junctions</span></span>
<span data-ttu-id="f7060-328">Uma junção é uma atividade especial que esperará até que todas as ramificações de entrada sejam concluídas.</span><span class="sxs-lookup"><span data-stu-id="f7060-328">A junction is a special activity that will wait until all incoming branches have completed.</span></span>  <span data-ttu-id="f7060-329">Isso permite executar várias atividades em paralelo e garantir que todas tenham sido concluídas antes de prosseguir.</span><span class="sxs-lookup"><span data-stu-id="f7060-329">This allows you to run multiple activities in parallel and ensure that all have completed before moving on.</span></span>

<span data-ttu-id="f7060-330">Embora uma junção possa ter um número ilimitado de links de entrada, apenas um desses links pode ser um pipeline.</span><span class="sxs-lookup"><span data-stu-id="f7060-330">While a junction can have an unlimited number of incoming links, not more than one of those links can be a pipeline.</span></span>  <span data-ttu-id="f7060-331">O número de links de sequência de entrada não é restrito.</span><span class="sxs-lookup"><span data-stu-id="f7060-331">The number of incoming sequence links is not constrained.</span></span>  <span data-ttu-id="f7060-332">Você poderá criar a junção com vários links de pipeline de entrada e salvar o runbook, mas ele falhará ao ser executado.</span><span class="sxs-lookup"><span data-stu-id="f7060-332">You will be allowed to create the junction with multiple incoming pipeline links and save the runbook, but it will fail when it is run.</span></span>

<span data-ttu-id="f7060-333">O exemplo a seguir faz parte de um runbook que inicia um conjunto de máquinas virtuais enquanto baixa simultaneamente patches a serem aplicados a esses computadores.</span><span class="sxs-lookup"><span data-stu-id="f7060-333">The example below is part of a runbook that starts a set of virtual machines while simultaneously downloading patches to be applied to those machines.</span></span>  <span data-ttu-id="f7060-334">Uma junção é usada para garantir que os processos sejam concluídos antes que o runbook continue.</span><span class="sxs-lookup"><span data-stu-id="f7060-334">A junction is used to ensure that both processes are completed before the runbook continues.</span></span>

![Junção](media/automation-graphical-authoring-intro/runbook-junction.png)

### <a name="cycles"></a><span data-ttu-id="f7060-336">Ciclos</span><span class="sxs-lookup"><span data-stu-id="f7060-336">Cycles</span></span>
<span data-ttu-id="f7060-337">Um ciclo é quando uma atividade de destino se vincula de volta à sua atividade de origem ou a outra atividade que, eventualmente, se vincula de volta à sua origem.</span><span class="sxs-lookup"><span data-stu-id="f7060-337">A cycle is when a destination activity links back to its source activity or to another activity that eventually links back to its source.</span></span>  <span data-ttu-id="f7060-338">No momento, os ciclos não são permitidos na criação de gráficos.</span><span class="sxs-lookup"><span data-stu-id="f7060-338">Cycles are currently not allowed in graphical authoring.</span></span>  <span data-ttu-id="f7060-339">Se seu runbook tiver um ciclo, ele será salvo corretamente, mas receberá um erro quando for executado.</span><span class="sxs-lookup"><span data-stu-id="f7060-339">If your runbook has a cycle, it will save properly but will receive an error when it runs.</span></span>

![Ciclo](media/automation-graphical-authoring-intro/runbook-cycle.png)

### <a name="sharing-data-between-activities"></a><span data-ttu-id="f7060-341">Compartilhando dados entre atividades</span><span class="sxs-lookup"><span data-stu-id="f7060-341">Sharing data between activities</span></span>
<span data-ttu-id="f7060-342">Todos os dados que são gerados por uma atividade com um link de saída são gravados no *barramento de dados* do runbook.</span><span class="sxs-lookup"><span data-stu-id="f7060-342">Any data that is output by an activity with an outgoing link is written to the *databus* for the runbook.</span></span>  <span data-ttu-id="f7060-343">Qualquer atividade no runbook pode usar dados no barramento de dados para popular os valores de parâmetros ou incluir no código de script.</span><span class="sxs-lookup"><span data-stu-id="f7060-343">Any activity in the runbook can use data on the databus to populate parameter values or include in script code.</span></span>  <span data-ttu-id="f7060-344">Uma atividade pode acessar a saída de qualquer atividade anterior no fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="f7060-344">An activity can access the output of any previous activity in the workflow.</span></span>     

<span data-ttu-id="f7060-345">A maneira como os dados são gravados no barramento de dados depende do tipo de link da atividade.</span><span class="sxs-lookup"><span data-stu-id="f7060-345">How the data is written to the databus depends on the type of link on the activity.</span></span>  <span data-ttu-id="f7060-346">Para um **pipeline**, os dados são gerados como vários objetos.</span><span class="sxs-lookup"><span data-stu-id="f7060-346">For a **pipeline**, the data is output as multiples objects.</span></span>  <span data-ttu-id="f7060-347">Para um link de **sequência** , os dados são gerados como uma matriz.</span><span class="sxs-lookup"><span data-stu-id="f7060-347">For a **sequence** link, the data is output as an array.</span></span>  <span data-ttu-id="f7060-348">Se houver apenas um valor, ele será gerado como uma matriz de elemento único.</span><span class="sxs-lookup"><span data-stu-id="f7060-348">If there is only one value, it will be output as a single element array.</span></span>

<span data-ttu-id="f7060-349">Você pode acessar dados no barramento de dados usando um destes dois métodos.</span><span class="sxs-lookup"><span data-stu-id="f7060-349">You can access data on the databus using one of two methods.</span></span>  <span data-ttu-id="f7060-350">Primeiro, é possível usar uma fonte de dados de **Saída de Atividade** para popular um parâmetro de outra atividade.</span><span class="sxs-lookup"><span data-stu-id="f7060-350">First is using an **Activity Output** data source to populate a parameter of another activity.</span></span>  <span data-ttu-id="f7060-351">Se a saída for um objeto, você poderá especificar uma única propriedade.</span><span class="sxs-lookup"><span data-stu-id="f7060-351">If the output is an object, you can specify a single property.</span></span>

![Saída de Atividade](media/automation-graphical-authoring-intro/activity-output-datasource-revised20165.png)

<span data-ttu-id="f7060-353">Você também pode recuperar a saída de uma atividade em uma fonte de dados de **Expressão do PowerShell** ou de uma atividade de **Script de Fluxo de Trabalho** com uma variável ActivityOutput.</span><span class="sxs-lookup"><span data-stu-id="f7060-353">You can also retrieve the output of an activity in a **PowerShell Expression** data source or from a **Workflow Script** activity with an ActivityOutput variable.</span></span>  <span data-ttu-id="f7060-354">Se a saída for um objeto, você poderá especificar uma única propriedade.</span><span class="sxs-lookup"><span data-stu-id="f7060-354">If the output is an object, you can specify a single property.</span></span>  <span data-ttu-id="f7060-355">As variáveis ActivityOutput usam a sintaxe a seguir.</span><span class="sxs-lookup"><span data-stu-id="f7060-355">ActivityOutput variables use the following syntax.</span></span>

    $ActivityOutput['Activity Label']
    $ActivityOutput['Activity Label'].PropertyName 

### <a name="checkpoints"></a><span data-ttu-id="f7060-356">Pontos de verificação</span><span class="sxs-lookup"><span data-stu-id="f7060-356">Checkpoints</span></span>
<span data-ttu-id="f7060-357">Você pode definir [pontos de verificação](automation-powershell-workflow.md#checkpoints) em um runbook do Fluxo de Trabalho do PowerShell Gráfico selecionando *Runbook do ponto de verificação* em qualquer atividade.</span><span class="sxs-lookup"><span data-stu-id="f7060-357">You can set [checkpoints](automation-powershell-workflow.md#checkpoints) in a Graphical PowerShell Workflow runbook by selecting *Checkpoint runbook* on any activity.</span></span>  <span data-ttu-id="f7060-358">Isso causa a definição de um ponto de verificação após a execução da atividade.</span><span class="sxs-lookup"><span data-stu-id="f7060-358">This causes a checkpoint to be set after the activity runs.</span></span>

![Ponto de verificação](media/automation-graphical-authoring-intro/set-checkpoint.png)

<span data-ttu-id="f7060-360">Os pontos de verificação são habilitados somente nos runbooks do Fluxo de Trabalho do PowerShell Gráficos; eles não estão disponíveis nos runbooks Gráficos.</span><span class="sxs-lookup"><span data-stu-id="f7060-360">Checkpoints are only enabled in Graphical PowerShell Workflow runbooks, it is not available in Graphical runbooks.</span></span>  <span data-ttu-id="f7060-361">Se o runbook usa cmdlets do Azure, use AzureRMAccount após qualquer atividade com ponto de verificação, caso o runbook seja suspenso e reinicie nesse ponto de verificação em um trabalho diferente.</span><span class="sxs-lookup"><span data-stu-id="f7060-361">If the runbook uses Azure cmdlets, you should follow any checkpointed activity with an Add-AzureRMAccount in case the runbook is suspended and restarts from this checkpoint on a different worker.</span></span> 

## <a name="authenticating-to-azure-resources"></a><span data-ttu-id="f7060-362">Autenticação para recursos do Azure</span><span class="sxs-lookup"><span data-stu-id="f7060-362">Authenticating to Azure resources</span></span>
<span data-ttu-id="f7060-363">Os runbooks na Automação do Azure que gerenciam os recursos do Azure irão requerer a autenticação do Azure.</span><span class="sxs-lookup"><span data-stu-id="f7060-363">Runbooks in Azure Automation that manage Azure resources will require authentication to Azure.</span></span>  <span data-ttu-id="f7060-364">O [Executar Como Conta](automation-offering-get-started.md#creating-an-automation-account) (também conhecido como uma entidade de serviço) é o método padrão para acessar os recursos do Azure Resource Manager em sua assinatura com os runbooks de Automação.</span><span class="sxs-lookup"><span data-stu-id="f7060-364">The [Run As account](automation-offering-get-started.md#creating-an-automation-account) (also referred to as a service principal) is the default method to access Azure Resource Manager resources in your subscription with Automation runbooks.</span></span>  <span data-ttu-id="f7060-365">Você pode adicionar essa funcionalidade a um runbook gráfico adicionando o ativo de Conexão **AzureRunAsConnection**, que está usando o cmdlet [Get-AutomationConnection](https://technet.microsoft.com/library/dn919922%28v=sc.16%29.aspx) do PowerShell e o cmdlet [Add-AzureRmAccount](https://msdn.microsoft.com/library/mt619267.aspx), à tela.</span><span class="sxs-lookup"><span data-stu-id="f7060-365">You can add this functionality to a graphical runbook by adding the **AzureRunAsConnection** Connection asset, which is using the PowerShell [Get-AutomationConnection](https://technet.microsoft.com/library/dn919922%28v=sc.16%29.aspx) cmdlet, and [Add-AzureRmAccount](https://msdn.microsoft.com/library/mt619267.aspx) cmdlet to the canvas.</span></span> <span data-ttu-id="f7060-366">Isso é ilustrado no exemplo a seguir.</span><span class="sxs-lookup"><span data-stu-id="f7060-366">This is illustrated in the following example.</span></span><br><span data-ttu-id="f7060-367">![Atividades de Autenticação Executar Como](media/automation-graphical-authoring-intro/authenticate-run-as-account.png)</span><span class="sxs-lookup"><span data-stu-id="f7060-367">![Run As Authentication Activities](media/automation-graphical-authoring-intro/authenticate-run-as-account.png)</span></span><br>
<span data-ttu-id="f7060-368">A atividade Executar Como Conexão de Get (por exemplo, Get-AutomationConnection), é configurada com uma fonte de dados com valor constante denominada AzureRunAsConnection.</span><span class="sxs-lookup"><span data-stu-id="f7060-368">The Get Run As Connection activity (i.e. Get-AutomationConnection), is configured with a constant value data source named AzureRunAsConnection.</span></span><br><span data-ttu-id="f7060-369">![Configuração da Conexão Executar Como](media/automation-graphical-authoring-intro/authenticate-runas-parameterset.png)</span><span class="sxs-lookup"><span data-stu-id="f7060-369">![Run As Connection Configuration](media/automation-graphical-authoring-intro/authenticate-runas-parameterset.png)</span></span><br>
<span data-ttu-id="f7060-370">A próxima atividade, Add-AzureRmAccount, adiciona a conta Executar Como autenticada para usar no runbook.</span><span class="sxs-lookup"><span data-stu-id="f7060-370">The next activity, Add-AzureRmAccount, adds the authenticated Run As account for use in the runbook.</span></span><br><span data-ttu-id="f7060-371">
![Conjunto de parâmetros Add-AzureRmAccount](media/automation-graphical-authoring-intro/authenticate-conn-to-azure-parameter-set.png)</span><span class="sxs-lookup"><span data-stu-id="f7060-371">
![Add-AzureRmAccount Parameter Set](media/automation-graphical-authoring-intro/authenticate-conn-to-azure-parameter-set.png)</span></span><br>
<span data-ttu-id="f7060-372">Para os parâmetros **APPLICATIONID**, **CERTIFICATETHUMBPRINT** e **TENANTID**, você precisará especificar o nome da propriedade para o caminho Campo porque a atividade produz um objeto com várias propriedades.</span><span class="sxs-lookup"><span data-stu-id="f7060-372">For the parameters **APPLICATIONID**, **CERTIFICATETHUMBPRINT**, and **TENANTID** you will need to specify the name of the property for the Field path because the activity outputs an object with multiple properties.</span></span>  <span data-ttu-id="f7060-373">Caso contrário, quando você executar o runbook, ele falhará ao tentar autenticar-se.</span><span class="sxs-lookup"><span data-stu-id="f7060-373">Otherwise when you execute the runbook, it will fail attempting to authenticate.</span></span>  <span data-ttu-id="f7060-374">Isso é o que você precisa, no mínimo, para autenticar seu runbook com a conta Executar Como.</span><span class="sxs-lookup"><span data-stu-id="f7060-374">This is what you need at a minimum to authenticate your runbook with the Run As account.</span></span>

<span data-ttu-id="f7060-375">Para manter a compatibilidade com versões anteriores para os assinantes que criaram uma conta de Automação utilizando uma [conta de Usuário do Azure AD](automation-create-aduser-account.md) para gerenciar a implantação clássica do Azure ou os recursos do Azure Resource Manager, o método de autenticação é o cmdlet Add-AzureAccount com um [ativo de credencial](automation-credentials.md) que representa um usuário do Active Directory com acesso à conta do Azure.</span><span class="sxs-lookup"><span data-stu-id="f7060-375">To maintain backwards compatibility for subscribers who have created an Automation account using an [Azure AD User account](automation-create-aduser-account.md) to manage Azure classic deployment or for Azure Resource Manager resources, the method to authenticate is the Add-AzureAccount cmdlet with a [credential asset](automation-credentials.md) that represents an Active Directory user with access to the Azure account.</span></span>

<span data-ttu-id="f7060-376">Você pode adicionar essa funcionalidade a um runbook gráfico adicionando um ativo de credencial à tela, seguido por uma atividade Add-AzureAccount.</span><span class="sxs-lookup"><span data-stu-id="f7060-376">You can add this functionality to a graphical runbook by adding a credential asset to the canvas followed by an Add-AzureAccount activity.</span></span>  <span data-ttu-id="f7060-377">Add-AzureAccount usa a atividade de credencial para sua entrada.</span><span class="sxs-lookup"><span data-stu-id="f7060-377">Add-AzureAccount uses the credential activity for its input.</span></span>  <span data-ttu-id="f7060-378">Isso é ilustrado no exemplo a seguir.</span><span class="sxs-lookup"><span data-stu-id="f7060-378">This is illustrated in the following example.</span></span>

![Atividades de autenticação](media/automation-graphical-authoring-intro/authentication-activities.png)

<span data-ttu-id="f7060-380">Você deve se autenticar no início do runbook e após cada ponto de verificação.</span><span class="sxs-lookup"><span data-stu-id="f7060-380">You have to authenticate at the start of the runbook and after each checkpoint.</span></span>  <span data-ttu-id="f7060-381">Isso significa adicionar uma atividade de adição Add-AzureAccount depois de qualquer atividade Checkpoint-Workflow.</span><span class="sxs-lookup"><span data-stu-id="f7060-381">This means adding an addition Add-AzureAccount activity after any Checkpoint-Workflow activity.</span></span> <span data-ttu-id="f7060-382">Você não precisa de uma atividade de credencial de adição, já que pode usar a mesma</span><span class="sxs-lookup"><span data-stu-id="f7060-382">You do not need an addition credential activity since you can use the same</span></span> 

![Saída de Atividade](media/automation-graphical-authoring-intro/authentication-activity-output.png)

## <a name="runbook-input-and-output"></a><span data-ttu-id="f7060-384">Entrada e saída de runbook</span><span class="sxs-lookup"><span data-stu-id="f7060-384">Runbook input and output</span></span>
### <a name="runbook-input"></a><span data-ttu-id="f7060-385">Entrada do Runbook</span><span class="sxs-lookup"><span data-stu-id="f7060-385">Runbook input</span></span>
<span data-ttu-id="f7060-386">Um runbook pode exigir a entrada de um usuário quando este iniciar o runbook por meio do Portal do Azure ou de outro runbook, se o atual for usado como filho.</span><span class="sxs-lookup"><span data-stu-id="f7060-386">A runbook may require input either from a user when they start the runbook through the Azure portal or from another runbook if the current one is used as a child.</span></span>
<span data-ttu-id="f7060-387">Por exemplo, se tiver um runbook que cria uma máquina virtual, talvez você precise fornecer informações como o nome da máquina virtual e outras propriedades sempre que iniciar o runbook.</span><span class="sxs-lookup"><span data-stu-id="f7060-387">For example, if you have a runbook that creates a virtual machine, you may need to provide information such as the name of the virtual machine and other properties each time you start the runbook.</span></span>  

<span data-ttu-id="f7060-388">Você aceita a entrada para um runbook definindo um ou mais parâmetros de entrada.</span><span class="sxs-lookup"><span data-stu-id="f7060-388">You accept input for a runbook by defining one or more input parameters.</span></span>  <span data-ttu-id="f7060-389">Você fornece valores para esses parâmetros sempre que o runbook é iniciado.</span><span class="sxs-lookup"><span data-stu-id="f7060-389">You provide values for these parameters each time the runbook is started.</span></span>  <span data-ttu-id="f7060-390">Quando você iniciar um runbook com o Portal do Azure, ele solicitará que você forneça valores para cada um dos parâmetros de entrada do runbook.</span><span class="sxs-lookup"><span data-stu-id="f7060-390">When you start a runbook with the Azure portal, it will prompt you to provide values for the each of the runbook's input parameters.</span></span>

<span data-ttu-id="f7060-391">Você pode acessar parâmetros de entrada para um runbook clicando no botão **Entrada e saída** na barra de ferramentas do runbook.</span><span class="sxs-lookup"><span data-stu-id="f7060-391">You can access input parameters for a runbook by clicking the **Input and output** button on the runbook toolbar.</span></span>  

![Entrada e saída de runbook](media/automation-graphical-authoring-intro/runbook-edit-input-output.png) 

<span data-ttu-id="f7060-393">Isso abre o controle **Entrada e saída**, em que você pode editar um parâmetro de entrada existente ou criar um novo clicando em **Adicionar entrada**.</span><span class="sxs-lookup"><span data-stu-id="f7060-393">This opens the **Input and Output** control where you can edit an existing input parameter or create a new one by clicking **Add input**.</span></span> 

![Adicionar entrada](media/automation-graphical-authoring-intro/runbook-edit-add-input.png)

<span data-ttu-id="f7060-395">Cada parâmetro de entrada é definido pelas propriedades na tabela a seguir.</span><span class="sxs-lookup"><span data-stu-id="f7060-395">Each input parameter is defined by the properties in the following table.</span></span>

| <span data-ttu-id="f7060-396">Propriedade</span><span class="sxs-lookup"><span data-stu-id="f7060-396">Property</span></span> | <span data-ttu-id="f7060-397">Descrição</span><span class="sxs-lookup"><span data-stu-id="f7060-397">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="f7060-398">Nome</span><span class="sxs-lookup"><span data-stu-id="f7060-398">Name</span></span> |<span data-ttu-id="f7060-399">O nome exclusivo do parâmetro.</span><span class="sxs-lookup"><span data-stu-id="f7060-399">The unique name of the parameter.</span></span>  <span data-ttu-id="f7060-400">Pode conter apenas caracteres alfanuméricos e não pode conter espaços.</span><span class="sxs-lookup"><span data-stu-id="f7060-400">This can only contain alpha numeric characters and cannot contain a space.</span></span> |
| <span data-ttu-id="f7060-401">Descrição</span><span class="sxs-lookup"><span data-stu-id="f7060-401">Description</span></span> |<span data-ttu-id="f7060-402">Uma descrição opcional para o parâmetro de entrada.</span><span class="sxs-lookup"><span data-stu-id="f7060-402">An optional description for the input parameter.</span></span> |
| <span data-ttu-id="f7060-403">Tipo</span><span class="sxs-lookup"><span data-stu-id="f7060-403">Type</span></span> |<span data-ttu-id="f7060-404">Tipo de dados esperado para o valor do parâmetro.</span><span class="sxs-lookup"><span data-stu-id="f7060-404">Data type expected for the parameter value.</span></span>  <span data-ttu-id="f7060-405">O Portal do Azure fornecerá um controle apropriado para o tipo de dados para cada parâmetro quando a entrada for solicitada.</span><span class="sxs-lookup"><span data-stu-id="f7060-405">The Azure portal will provide an appropriate control for the data type for each parameter when prompting for input.</span></span> |
| <span data-ttu-id="f7060-406">Obrigatório</span><span class="sxs-lookup"><span data-stu-id="f7060-406">Mandatory</span></span> |<span data-ttu-id="f7060-407">Especifica se deve ser fornecido um valor para o parâmetro.</span><span class="sxs-lookup"><span data-stu-id="f7060-407">Specifies whether a value must be provided for the parameter.</span></span>  <span data-ttu-id="f7060-408">O runbook não poderá ser iniciado se você não fornecer um valor para cada parâmetro obrigatório que não tenha um valor padrão definido.</span><span class="sxs-lookup"><span data-stu-id="f7060-408">The runbook cannot be started if you do not provide a value for each mandatory parameter that does not have a default value defined.</span></span> |
| <span data-ttu-id="f7060-409">Valor Padrão</span><span class="sxs-lookup"><span data-stu-id="f7060-409">Default Value</span></span> |<span data-ttu-id="f7060-410">Especifica o valor que será usado para o parâmetro, se nenhum for fornecido.</span><span class="sxs-lookup"><span data-stu-id="f7060-410">Specifies what value is used for the parameter if one is not provided.</span></span>  <span data-ttu-id="f7060-411">Pode ser Nulo ou um valor específico.</span><span class="sxs-lookup"><span data-stu-id="f7060-411">This can either be Null or a specific value.</span></span> |

### <a name="runbook-output"></a><span data-ttu-id="f7060-412">Saída de runbook</span><span class="sxs-lookup"><span data-stu-id="f7060-412">Runbook output</span></span>
<span data-ttu-id="f7060-413">Os dados criados por qualquer atividade que não tenha um link de saída serão adicionados à [saída do runbook](http://msdn.microsoft.com/library/azure/dn879148.aspx).</span><span class="sxs-lookup"><span data-stu-id="f7060-413">Data created by any activity that does not have an outgoing link will be added to the [output of the runbook](http://msdn.microsoft.com/library/azure/dn879148.aspx).</span></span>  <span data-ttu-id="f7060-414">A saída é salva com o trabalho do runbook e está disponível para um runbook pai quando o runbook é usado como filho.</span><span class="sxs-lookup"><span data-stu-id="f7060-414">The output is saved with the runbook job and is available to a parent runbook when the runbook is used as a child.</span></span>  

## <a name="powershell-expressions"></a><span data-ttu-id="f7060-415">Expressões do PowerShell</span><span class="sxs-lookup"><span data-stu-id="f7060-415">PowerShell expressions</span></span>
<span data-ttu-id="f7060-416">Uma das vantagens da criação gráfica é fornecer a capacidade de criar um runbook com o mínimo de conhecimento do PowerShell.</span><span class="sxs-lookup"><span data-stu-id="f7060-416">One of the advantages of graphical authoring is providing you with the ability to build a runbook with minimal knowledge of PowerShell.</span></span>  <span data-ttu-id="f7060-417">Atualmente, você precisa saber um pouco do PowerShell para popular certos [valores de parâmetro](#activities) e configurar [as condições de vínculo](#links-and-workflow).</span><span class="sxs-lookup"><span data-stu-id="f7060-417">Currently, you do need to know a bit of PowerShell though for populating certain [parameter values](#activities) and for setting [link conditions](#links-and-workflow).</span></span>  <span data-ttu-id="f7060-418">Esta seção fornece uma breve introdução a expressões do PowerShell para os usuários que não estejam familiarizados com ele.</span><span class="sxs-lookup"><span data-stu-id="f7060-418">This section provides a quick introduction to PowerShell expressions for those users who may not be familiar with it.</span></span>  <span data-ttu-id="f7060-419">Detalhes completos do PowerShell estão disponíveis em [scripts com o Windows PowerShell](http://technet.microsoft.com/library/bb978526.aspx).</span><span class="sxs-lookup"><span data-stu-id="f7060-419">Full details of PowerShell are available at [Scripting with Windows PowerShell](http://technet.microsoft.com/library/bb978526.aspx).</span></span> 

### <a name="powershell-expression-data-source"></a><span data-ttu-id="f7060-420">Fonte de dados de expressão do PowerShell</span><span class="sxs-lookup"><span data-stu-id="f7060-420">PowerShell expression data source</span></span>
<span data-ttu-id="f7060-421">Você pode usar uma expressão do PowerShell como uma fonte de dados para popular o valor de um [parâmetro de atividade](#activities) com os resultados de algum código do PowerShell.</span><span class="sxs-lookup"><span data-stu-id="f7060-421">You can use a PowerShell expression as a data source to populate the value of an [activity parameter](#activities) with the results of some PowerShell code.</span></span>  <span data-ttu-id="f7060-422">Isso pode ser uma única linha de código que executa uma função simples ou várias linhas que realizam alguma lógica complexa.</span><span class="sxs-lookup"><span data-stu-id="f7060-422">This could be a single line of code that performs some simple function or multiple lines that perform some complex logic.</span></span>  <span data-ttu-id="f7060-423">Qualquer saída de um comando que não está atribuído a uma variável é enviado para o valor do parâmetro.</span><span class="sxs-lookup"><span data-stu-id="f7060-423">Any output from a command that is not assigned to a variable is output to the parameter value.</span></span> 

<span data-ttu-id="f7060-424">Por exemplo, o comando a seguir seria a saída da data atual.</span><span class="sxs-lookup"><span data-stu-id="f7060-424">For example, the following command would output the current date.</span></span> 

    Get-Date

<span data-ttu-id="f7060-425">Os seguintes comandos criam uma cadeia de caracteres a partir da data atual e a atribuem a uma variável.</span><span class="sxs-lookup"><span data-stu-id="f7060-425">The following commands build a string from the current date and assign it to a variable.</span></span>  <span data-ttu-id="f7060-426">O conteúdo da variável é enviado para a saída</span><span class="sxs-lookup"><span data-stu-id="f7060-426">The contents of the variable are then sent to the output</span></span> 

    $string = "The current date is " + (Get-Date)
    $string

<span data-ttu-id="f7060-427">Os comandos a seguir avaliam a data atual e retornam uma cadeia de caracteres que indica se o dia atual é um final de semana ou dia da semana.</span><span class="sxs-lookup"><span data-stu-id="f7060-427">The following commands evaluate the current date and return a string indicating whether the current day is a weekend or weekday.</span></span> 

    $date = Get-Date
    if (($date.DayOfWeek = "Saturday") -or ($date.DayOfWeek = "Sunday")) { "Weekend" }
    else { "Weekday" }


### <a name="activity-output"></a><span data-ttu-id="f7060-428">Saída de Atividade</span><span class="sxs-lookup"><span data-stu-id="f7060-428">Activity output</span></span>
<span data-ttu-id="f7060-429">Para usar a saída de uma atividade anterior no runbook, use a variável $ActivityOutput com a sintaxe a seguir.</span><span class="sxs-lookup"><span data-stu-id="f7060-429">To use the output from a previous activity in the runbook, use the $ActivityOutput variable with the following syntax.</span></span>

    $ActivityOutput['Activity Label'].PropertyName

<span data-ttu-id="f7060-430">Por exemplo, você pode ter uma atividade com uma propriedade que requer um nome de uma máquina virtual caso em que você pode usar a expressão a seguir.</span><span class="sxs-lookup"><span data-stu-id="f7060-430">For example, you may have an activity with a property that requires the name of a virtual machine in which case you could use the following expression.</span></span>

    $ActivityOutput['Get-AzureVm'].Name

<span data-ttu-id="f7060-431">Se a propriedade que exige a máquina virtual do objeto, em vez de apenas uma propriedade, retornaria o objeto inteiro usando a sintaxe a seguir.</span><span class="sxs-lookup"><span data-stu-id="f7060-431">If the property that required the virtual machine object instead of just a property, then you would return the entire object using the following syntax.</span></span>

    $ActivityOutput['Get-AzureVm']

<span data-ttu-id="f7060-432">Você também pode usar a saída de uma atividade em uma expressão mais complexa, como a seguir que concatena o texto para o nome da máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="f7060-432">You can also use the output of an activity in a more complex expression such as the following that concatenates text to the virtual machine name.</span></span>

    "The computer name is " + $ActivityOutput['Get-AzureVm'].Name


### <a name="conditions"></a><span data-ttu-id="f7060-433">Condições</span><span class="sxs-lookup"><span data-stu-id="f7060-433">Conditions</span></span>
<span data-ttu-id="f7060-434">Use [operadores de comparação](https://technet.microsoft.com/library/hh847759.aspx) para comparar valores ou determinar se um valor corresponde a um padrão especificado.</span><span class="sxs-lookup"><span data-stu-id="f7060-434">Use [comparison operators](https://technet.microsoft.com/library/hh847759.aspx) to compare values or determine if a value matches a specified pattern.</span></span>  <span data-ttu-id="f7060-435">Uma comparação retorna um valor de $true ou $false.</span><span class="sxs-lookup"><span data-stu-id="f7060-435">A comparison returns a value of either $true or $false.</span></span>

<span data-ttu-id="f7060-436">Por exemplo, a condição a seguir determina se a máquina virtual de uma atividade denominada *Get-AzureV* está *interrompida*.</span><span class="sxs-lookup"><span data-stu-id="f7060-436">For example, the following condition determines whether the virtual machine from an activity named *Get-AzureVM* is currently *stopped*.</span></span> 

    $ActivityOutput["Get-AzureVM"].PowerState –eq "Stopped"

<span data-ttu-id="f7060-437">A condição a seguir verifica se a mesma máquina virtual está em um estado diferente de *interrompido*.</span><span class="sxs-lookup"><span data-stu-id="f7060-437">The following condition checks whether the same virtual machine is in any state other than *stopped*.</span></span>

    $ActivityOutput["Get-AzureVM"].PowerState –ne "Stopped"

<span data-ttu-id="f7060-438">Você pode unir várias condições usando um [operador lógico](https://technet.microsoft.com/library/hh847789.aspx) como **- e** ou **- ou**.</span><span class="sxs-lookup"><span data-stu-id="f7060-438">You can join multiple conditions using a [logical operator](https://technet.microsoft.com/library/hh847789.aspx) such as **-and** or **-or**.</span></span>  <span data-ttu-id="f7060-439">Por exemplo, a condição a seguir verifica se a mesma máquina virtual no exemplo anterior está em no estado de *interrompida* ou *parando*.</span><span class="sxs-lookup"><span data-stu-id="f7060-439">For example, the following condition checks whether the same virtual machine in the previous example is in a state of *stopped* or *stopping*.</span></span>

    ($ActivityOutput["Get-AzureVM"].PowerState –eq "Stopped") -or ($ActivityOutput["Get-AzureVM"].PowerState –eq "Stopping") 


### <a name="hashtables"></a><span data-ttu-id="f7060-440">Tabelas de hash</span><span class="sxs-lookup"><span data-stu-id="f7060-440">Hashtables</span></span>
<span data-ttu-id="f7060-441">[Tabelas de hash](http://technet.microsoft.com/library/hh847780.aspx) são pares nome/valor que são úteis para retornar um conjunto de valores.</span><span class="sxs-lookup"><span data-stu-id="f7060-441">[Hashtables](http://technet.microsoft.com/library/hh847780.aspx) are name/value pairs that are useful for returning a set of values.</span></span>  <span data-ttu-id="f7060-442">Propriedades de determinadas atividades podem esperar uma tabela de hash em vez de um valor simples.</span><span class="sxs-lookup"><span data-stu-id="f7060-442">Properties for certain activities may expect a hashtable instead of a simple value.</span></span>  <span data-ttu-id="f7060-443">Você também pode ver como a tabela de hash é conhecida como um dicionário.</span><span class="sxs-lookup"><span data-stu-id="f7060-443">You may also see as hashtable referred to as a dictionary.</span></span> 

<span data-ttu-id="f7060-444">Você cria uma tabela de hash com a sintaxe a seguir.</span><span class="sxs-lookup"><span data-stu-id="f7060-444">You create a hashtable with the following syntax.</span></span>  <span data-ttu-id="f7060-445">Uma tabela de hash pode conter qualquer número de entradas, mas cada um é definido por um nome e valor.</span><span class="sxs-lookup"><span data-stu-id="f7060-445">A hashtable can contain any number of entries but each is defined by a name and value.</span></span>

    @{ <name> = <value>; [<name> = <value> ] ...}

<span data-ttu-id="f7060-446">Por exemplo, a expressão a seguir cria uma tabela de hash a ser usada na fonte de dados para um parâmetro de atividade que espera uma tabela de hash com valores para uma pesquisa na Internet.</span><span class="sxs-lookup"><span data-stu-id="f7060-446">For example, the following expression creates a hashtable to be used in the data source for an activity parameter that expected a hashtable with values for an internet search.</span></span>

    $query = "Azure Automation"
    $count = 10
    $h = @{'q'=$query; 'lr'='lang_ja';  'count'=$Count}
    $h

<span data-ttu-id="f7060-447">O exemplo a seguir usam a saída de uma atividade chamada *Obter conexão do Twitter* para preencher uma tabela de hash.</span><span class="sxs-lookup"><span data-stu-id="f7060-447">The following example uses output from an activity called *Get Twitter Connection* to populate a hashtable.</span></span>

    @{'ApiKey'=$ActivityOutput['Get Twitter Connection'].ConsumerAPIKey;
      'ApiSecret'=$ActivityOutput['Get Twitter Connection'].ConsumerAPISecret;
      'AccessToken'=$ActivityOutput['Get Twitter Connection'].AccessToken;
      'AccessTokenSecret'=$ActivityOutput['Get Twitter Connection'].AccessTokenSecret}



## <a name="next-steps"></a><span data-ttu-id="f7060-448">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="f7060-448">Next Steps</span></span>
* <span data-ttu-id="f7060-449">Para começar a usar os runbooks do fluxo de trabalho do PowerShell, consulte [Meu primeiro runbook do fluxo de trabalho do PowerShell](automation-first-runbook-textual.md)</span><span class="sxs-lookup"><span data-stu-id="f7060-449">To get started with PowerShell workflow runbooks, see [My first PowerShell workflow runbook](automation-first-runbook-textual.md)</span></span> 
* <span data-ttu-id="f7060-450">Para começar a usar os runbooks Gráficos, consulte [Meu primeiro runbook gráfico](automation-first-runbook-graphical.md)</span><span class="sxs-lookup"><span data-stu-id="f7060-450">To get started with Graphical runbooks, see [My first graphical runbook](automation-first-runbook-graphical.md)</span></span>
* <span data-ttu-id="f7060-451">Para saber mais sobre os tipos de runbook, suas vantagens e limitações, consulte [Tipos de runbook de Automação do Azure](automation-runbook-types.md)</span><span class="sxs-lookup"><span data-stu-id="f7060-451">To know more about runbook types, their advantages and limitations, see [Azure Automation runbook types](automation-runbook-types.md)</span></span>
* <span data-ttu-id="f7060-452">Para entender como autenticar usando a conta Executar Como de automação, consulte [Configurar Conta Executar Como do Azure](automation-sec-configure-azure-runas-account.md)</span><span class="sxs-lookup"><span data-stu-id="f7060-452">To understand how to authenticate using the Automation Run As account, see [Configure Azure Run As Account](automation-sec-configure-azure-runas-account.md)</span></span>

