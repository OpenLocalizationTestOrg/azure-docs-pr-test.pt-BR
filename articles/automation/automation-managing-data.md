---
title: "Gerenciando os dados de Automação do Azure | Microsoft Docs"
description: "Este artigo contém vários tópicos sobre o gerenciamento de um ambiente da Automação do Azure.  Atualmente, inclui a Retenção de dados e o backup da Recuperação de desastres na Automação do Azure."
services: automation
documentationcenter: 
author: mgoedtel
manager: stevenka
editor: tysonn
ms.assetid: 2896f129-82e3-43ce-b9ee-a3860be0423a
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 06/02/201
ms.author: magoedte;bwren;sngun
ms.openlocfilehash: 92893edc4e02de148f6585e83c6861fd751401bb
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/11/2017
---
# <a name="managing-azure-automation-data"></a><span data-ttu-id="32bb9-104">Gerenciando dados da Automação do Azure</span><span class="sxs-lookup"><span data-stu-id="32bb9-104">Managing Azure Automation data</span></span>
<span data-ttu-id="32bb9-105">Este artigo contém vários tópicos sobre o gerenciamento de um ambiente da Automação do Azure.</span><span class="sxs-lookup"><span data-stu-id="32bb9-105">This article contains multiple topics for managing an Azure Automation environment.</span></span>

## <a name="data-retention"></a><span data-ttu-id="32bb9-106">Retenção de dados</span><span class="sxs-lookup"><span data-stu-id="32bb9-106">Data retention</span></span>
<span data-ttu-id="32bb9-107">Quando você exclui um recurso na Automação do Azure, ele é retido por 90 dias para fins de auditoria antes de ser removido permanentemente.</span><span class="sxs-lookup"><span data-stu-id="32bb9-107">When you delete a resource in Azure Automation, it is retained for 90 days for auditing purposes before being removed permanently.</span></span>  <span data-ttu-id="32bb9-108">Você não pode ver nem usar o recurso durante esse período.</span><span class="sxs-lookup"><span data-stu-id="32bb9-108">You can’t see or use the resource during this time.</span></span>  <span data-ttu-id="32bb9-109">Essa política também se aplica a recursos que pertencem a uma conta de automação que é excluída.</span><span class="sxs-lookup"><span data-stu-id="32bb9-109">This policy also applies to resources that belong to an automation account that is deleted.</span></span>

<span data-ttu-id="32bb9-110">A Automação do Azure exclui de forma automática e remove de forma permanente os trabalhos com mais de 90 dias.</span><span class="sxs-lookup"><span data-stu-id="32bb9-110">Azure Automation automatically deletes and permanently removes jobs older than 90 days.</span></span>

<span data-ttu-id="32bb9-111">A tabela a seguir resume a política de retenção para diferentes recursos.</span><span class="sxs-lookup"><span data-stu-id="32bb9-111">The following table summarizes the retention policy for different resources.</span></span>

| <span data-ttu-id="32bb9-112">Dados</span><span class="sxs-lookup"><span data-stu-id="32bb9-112">Data</span></span> | <span data-ttu-id="32bb9-113">Política</span><span class="sxs-lookup"><span data-stu-id="32bb9-113">Policy</span></span> |
|:--- |:--- |
| <span data-ttu-id="32bb9-114">Contas</span><span class="sxs-lookup"><span data-stu-id="32bb9-114">Accounts</span></span> |<span data-ttu-id="32bb9-115">Removidas permanentemente 90 dias depois que a conta é excluída por um usuário.</span><span class="sxs-lookup"><span data-stu-id="32bb9-115">Permanently removed 90 days after the account is deleted by a user.</span></span> |
| <span data-ttu-id="32bb9-116">Ativos</span><span class="sxs-lookup"><span data-stu-id="32bb9-116">Assets</span></span> |<span data-ttu-id="32bb9-117">Removidos permanentemente 90 dias depois que o ativo é excluído por um usuário ou 90 dias depois que a conta que contém o ativo é excluída por um usuário.</span><span class="sxs-lookup"><span data-stu-id="32bb9-117">Permanently removed 90 days after the asset is deleted by a user, or 90 days after the account that holds the asset is deleted by a user.</span></span> |
| <span data-ttu-id="32bb9-118">Módulos</span><span class="sxs-lookup"><span data-stu-id="32bb9-118">Modules</span></span> |<span data-ttu-id="32bb9-119">Removidos permanentemente 90 dias depois que o módulo é excluído por um usuário ou 90 dias depois que a conta que contém o módulo é excluída por um usuário.</span><span class="sxs-lookup"><span data-stu-id="32bb9-119">Permanently removed 90 days after the module is deleted by a user, or 90 days after the account that holds the module is deleted by a user.</span></span> |
| <span data-ttu-id="32bb9-120">Runbooks</span><span class="sxs-lookup"><span data-stu-id="32bb9-120">Runbooks</span></span> |<span data-ttu-id="32bb9-121">Removidos permanentemente 90 dias depois que o recurso é excluído por um usuário ou 90 dias depois que a conta que contém o recurso é excluída por um usuário.</span><span class="sxs-lookup"><span data-stu-id="32bb9-121">Permanently removed 90 days after the resource is deleted by a user, or 90 days after the account that holds the resource is deleted by a user.</span></span> |
| <span data-ttu-id="32bb9-122">Trabalhos</span><span class="sxs-lookup"><span data-stu-id="32bb9-122">Jobs</span></span> |<span data-ttu-id="32bb9-123">Excluído e removidos permanentemente 90 dias após a última modificação.</span><span class="sxs-lookup"><span data-stu-id="32bb9-123">Deleted and permanently removed 90 days after last being modified.</span></span> <span data-ttu-id="32bb9-124">Isso pode ocorrer depois que o trabalho é concluído, interrompido ou suspenso.</span><span class="sxs-lookup"><span data-stu-id="32bb9-124">This could be after the job completes, is stopped, or is suspended.</span></span> |
| <span data-ttu-id="32bb9-125">Arquivos de configurações/MOF de nó</span><span class="sxs-lookup"><span data-stu-id="32bb9-125">Node Configurations/MOF Files</span></span> |<span data-ttu-id="32bb9-126">A configuração de nó antigo é removida permanentemente 90 dias depois que uma nova configuração de nó é gerada.</span><span class="sxs-lookup"><span data-stu-id="32bb9-126">Old node configuration is permanently removed 90 days after a new node configuration is generated.</span></span> |
| <span data-ttu-id="32bb9-127">Nós DSC</span><span class="sxs-lookup"><span data-stu-id="32bb9-127">DSC Nodes</span></span> |<span data-ttu-id="32bb9-128">Removido de forma permanente 90 dias após o nó é cancelar o registro da conta de automação usando o portal do Azure ou o [AzureRMAutomationDscNode Unregister](https://msdn.microsoft.com/library/mt603500.aspx) cmdlet do Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="32bb9-128">Permanently removed 90 days after the node is unregistered from Automation Account using Azure portal or the [Unregister-AzureRMAutomationDscNode](https://msdn.microsoft.com/library/mt603500.aspx) cmdlet in Windows PowerShell.</span></span> <span data-ttu-id="32bb9-129">Nós também permanentemente são removidos de 90 dias depois que a conta que contém que o nó é excluída por um usuário.</span><span class="sxs-lookup"><span data-stu-id="32bb9-129">Nodes are also permanently removed 90 days after the account that holds the node is deleted by a user.</span></span> |
| <span data-ttu-id="32bb9-130">Relatórios de Nó</span><span class="sxs-lookup"><span data-stu-id="32bb9-130">Node Reports</span></span> |<span data-ttu-id="32bb9-131">Removido de forma permanente 90 dias depois que um novo relatório é gerado para esse nó</span><span class="sxs-lookup"><span data-stu-id="32bb9-131">Permanently removed 90 days after a new report is generated for that node</span></span> |

<span data-ttu-id="32bb9-132">A política de retenção se aplica a todos os usuários e, atualmente não, pode ser personalizada.</span><span class="sxs-lookup"><span data-stu-id="32bb9-132">The retention policy applies to all users and currently cannot be customized.</span></span>

<span data-ttu-id="32bb9-133">No entanto, se você precisar manter os dados por um período de tempo maior, poderá encaminhar logs de trabalho de runbook para Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="32bb9-133">However, if you need to retain data for a longer period of time, you can forward runbook job logs to Log Analytics.</span></span>  <span data-ttu-id="32bb9-134">Para obter mais informações, examine [encaminhar dados do trabalho de Automação do Azure para Log Analytics do OMS](automation-manage-send-joblogs-log-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="32bb9-134">For further information, review [forward Azure Automation job data to OMS Log Analytics](automation-manage-send-joblogs-log-analytics.md).</span></span>   

## <a name="backing-up-azure-automation"></a><span data-ttu-id="32bb9-135">Fazendo backup da Automação do Azure</span><span class="sxs-lookup"><span data-stu-id="32bb9-135">Backing up Azure Automation</span></span>
<span data-ttu-id="32bb9-136">Quando você exclui uma conta de automação no Microsoft Azure, todos os objetos na conta são excluídos, incluindo runbooks, módulos, configurações, trabalhos e ativos.</span><span class="sxs-lookup"><span data-stu-id="32bb9-136">When you delete an automation account in Microsoft Azure, all objects in the account are deleted including runbooks, modules, configurations, settings, jobs, and assets.</span></span> <span data-ttu-id="32bb9-137">Os objetos não podem ser recuperados depois que a conta é excluída.</span><span class="sxs-lookup"><span data-stu-id="32bb9-137">The objects cannot be recovered after the account is deleted.</span></span>  <span data-ttu-id="32bb9-138">Você pode usar as informações a seguir para fazer backup do conteúdo de sua conta de automação antes de excluí-la.</span><span class="sxs-lookup"><span data-stu-id="32bb9-138">You can use the following information to backup the contents of your automation account before deleting it.</span></span> 

### <a name="runbooks"></a><span data-ttu-id="32bb9-139">Runbooks</span><span class="sxs-lookup"><span data-stu-id="32bb9-139">Runbooks</span></span>
<span data-ttu-id="32bb9-140">Você pode exportar seus runbooks para arquivos de script usando o Portal de Gerenciamento do Azure ou o cmdlet [Get-AzureAutomationRunbookDefinition](https://msdn.microsoft.com/library/dn690269.aspx) no Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="32bb9-140">You can export your runbooks to script files using either the Azure Management Portal or the [Get-AzureAutomationRunbookDefinition](https://msdn.microsoft.com/library/dn690269.aspx) cmdlet in Windows PowerShell.</span></span>  <span data-ttu-id="32bb9-141">Esses arquivos de script podem ser importados para outra conta de automação, conforme discutido em [Criando ou importando um runbook](https://msdn.microsoft.com/library/dn643637.aspx).</span><span class="sxs-lookup"><span data-stu-id="32bb9-141">These script files can be imported into another automation account as discussed in [Creating or Importing a Runbook](https://msdn.microsoft.com/library/dn643637.aspx).</span></span>

### <a name="integration-modules"></a><span data-ttu-id="32bb9-142">Módulos de integração</span><span class="sxs-lookup"><span data-stu-id="32bb9-142">Integration modules</span></span>
<span data-ttu-id="32bb9-143">Você não pode exportar módulos de integração da Automação do Azure.</span><span class="sxs-lookup"><span data-stu-id="32bb9-143">You cannot export integration modules from Azure Automation.</span></span>  <span data-ttu-id="32bb9-144">Você deve garantir que eles estejam disponíveis fora da conta de automação.</span><span class="sxs-lookup"><span data-stu-id="32bb9-144">You must ensure that they are available outside of the automation account.</span></span>

### <a name="assets"></a><span data-ttu-id="32bb9-145">Ativos</span><span class="sxs-lookup"><span data-stu-id="32bb9-145">Assets</span></span>
<span data-ttu-id="32bb9-146">Não é possível exportar [ativos](https://msdn.microsoft.com/library/dn939988.aspx) da Automação do Azure.</span><span class="sxs-lookup"><span data-stu-id="32bb9-146">You cannot export [assets](https://msdn.microsoft.com/library/dn939988.aspx) from Azure Automation.</span></span>  <span data-ttu-id="32bb9-147">Usando o Portal de Gerenciamento do Azure, você deve observar os detalhes de variáveis, credenciais, certificados, conexões e agendas.</span><span class="sxs-lookup"><span data-stu-id="32bb9-147">Using the Azure Management Portal, you must note the details of variables, credentials, certificates, connections, and schedules.</span></span>  <span data-ttu-id="32bb9-148">Você deve criar manualmente qualquer ativo que seja usado por runbooks importados para outra automação.</span><span class="sxs-lookup"><span data-stu-id="32bb9-148">You must then manually create any assets that are used by runbooks that you import into another automation.</span></span>

<span data-ttu-id="32bb9-149">Você pode usar [cmdlets do Azure](https://msdn.microsoft.com/library/dn690262.aspx) para recuperar os detalhes de ativos não criptografados e salvá-los para referência futura ou criar ativos equivalentes em outra conta de automação.</span><span class="sxs-lookup"><span data-stu-id="32bb9-149">You can use [Azure cmdlets](https://msdn.microsoft.com/library/dn690262.aspx) to retrieve details of unencrypted assets and either save them for future reference or create equivalent assets in another automation account.</span></span>

<span data-ttu-id="32bb9-150">Não é possível recuperar o valor de variáveis criptografadas nem o campo de senha de credenciais usando cmdlets.</span><span class="sxs-lookup"><span data-stu-id="32bb9-150">You cannot retrieve the value for encrypted variables or the password field of credentials using cmdlets.</span></span>  <span data-ttu-id="32bb9-151">Se você não souber esses valores, poderá recuperá-los em um runbook usando as atividades [Get-AutomationVariable](https://msdn.microsoft.com/library/dn940012.aspx) e [Get-AutomationPSCredential](https://msdn.microsoft.com/library/dn940015.aspx).</span><span class="sxs-lookup"><span data-stu-id="32bb9-151">If you don't know these values, then you can retrieve them from a runbook using the [Get-AutomationVariable](https://msdn.microsoft.com/library/dn940012.aspx) and [Get-AutomationPSCredential](https://msdn.microsoft.com/library/dn940015.aspx) activities.</span></span>

<span data-ttu-id="32bb9-152">Você não pode exportar certificados da Automação do Azure.</span><span class="sxs-lookup"><span data-stu-id="32bb9-152">You cannot export certificates from Azure Automation.</span></span>  <span data-ttu-id="32bb9-153">Você deve garantir que todos os certificados estejam disponíveis fora do Azure.</span><span class="sxs-lookup"><span data-stu-id="32bb9-153">You must ensure that any certificates are available outside of Azure.</span></span>

### <a name="dsc-configurations"></a><span data-ttu-id="32bb9-154">Configurações DSC</span><span class="sxs-lookup"><span data-stu-id="32bb9-154">DSC configurations</span></span>
<span data-ttu-id="32bb9-155">Você pode exportar suas configurações para arquivos de script usando o Portal de Gerenciamento do Azure ou o cmdlet [Export-AzureRmAutomationDscConfiguration](https://msdn.microsoft.com/library/mt603485.aspx) no Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="32bb9-155">You can export your configurations to script files using either the Azure Management Portal or the [Export-AzureRmAutomationDscConfiguration](https://msdn.microsoft.com/library/mt603485.aspx) cmdlet in Windows PowerShell.</span></span> <span data-ttu-id="32bb9-156">Essas configurações podem ser importadas e usadas em outra conta de automação.</span><span class="sxs-lookup"><span data-stu-id="32bb9-156">These configurations can be imported and used in another automation account.</span></span>

## <a name="geo-replication-in-azure-automation"></a><span data-ttu-id="32bb9-157">Replicação geográfica na Automação do Azure</span><span class="sxs-lookup"><span data-stu-id="32bb9-157">Geo-replication in Azure Automation</span></span>
<span data-ttu-id="32bb9-158">A replicação geográfica, padrão em contas da Automação do Azure, faz o backup de dados da conta em uma região geográfica diferente para obter redundância.</span><span class="sxs-lookup"><span data-stu-id="32bb9-158">Geo-replication, standard in Azure Automation accounts, backs up account data to a different geographical region for redundancy.</span></span> <span data-ttu-id="32bb9-159">Você pode escolher uma região primária durante a configuração de sua conta e, em seguida, uma região secundária é atribuída automaticamente a ela.</span><span class="sxs-lookup"><span data-stu-id="32bb9-159">You can choose a primary region when setting up your account, and then a secondary region is assigned to it automatically.</span></span> <span data-ttu-id="32bb9-160">Os dados secundários, copiados da região primária, são atualizados continuamente em caso de perda de dados.</span><span class="sxs-lookup"><span data-stu-id="32bb9-160">The secondary data, copied from the primary region, is continuously updated in case of data loss.</span></span>  

<span data-ttu-id="32bb9-161">A tabela a seguir mostra os emparelhamentos disponíveis das regiões primárias e secundárias.</span><span class="sxs-lookup"><span data-stu-id="32bb9-161">The following table shows the available primary and secondary region pairings.</span></span>

| <span data-ttu-id="32bb9-162">Primário</span><span class="sxs-lookup"><span data-stu-id="32bb9-162">Primary</span></span> | <span data-ttu-id="32bb9-163">Secundário</span><span class="sxs-lookup"><span data-stu-id="32bb9-163">Secondary</span></span> |
| --- | --- |
| <span data-ttu-id="32bb9-164">Centro-Sul dos Estados Unidos</span><span class="sxs-lookup"><span data-stu-id="32bb9-164">South Central US</span></span> |<span data-ttu-id="32bb9-165">Centro-Norte dos EUA</span><span class="sxs-lookup"><span data-stu-id="32bb9-165">North Central US</span></span> |
| <span data-ttu-id="32bb9-166">Leste dos EUA 2</span><span class="sxs-lookup"><span data-stu-id="32bb9-166">US East 2</span></span> |<span data-ttu-id="32bb9-167">Centro dos EUA</span><span class="sxs-lookup"><span data-stu-id="32bb9-167">Central US</span></span> |
| <span data-ttu-id="32bb9-168">Europa Ocidental</span><span class="sxs-lookup"><span data-stu-id="32bb9-168">West Europe</span></span> |<span data-ttu-id="32bb9-169">Norte da Europa</span><span class="sxs-lookup"><span data-stu-id="32bb9-169">North Europe</span></span> |
| <span data-ttu-id="32bb9-170">Sudeste da Ásia</span><span class="sxs-lookup"><span data-stu-id="32bb9-170">South East Asia</span></span> |<span data-ttu-id="32bb9-171">Ásia Oriental</span><span class="sxs-lookup"><span data-stu-id="32bb9-171">East Asia</span></span> |
| <span data-ttu-id="32bb9-172">Leste do Japão</span><span class="sxs-lookup"><span data-stu-id="32bb9-172">Japan East</span></span> |<span data-ttu-id="32bb9-173">Oeste do Japão</span><span class="sxs-lookup"><span data-stu-id="32bb9-173">Japan West</span></span> |

<span data-ttu-id="32bb9-174">No evento improvável de os dados de uma região primária serem perdidos, a Microsoft tentará recuperá-los.</span><span class="sxs-lookup"><span data-stu-id="32bb9-174">In the unlikely event that a primary region data is lost, Microsoft attempts to recover it.</span></span> <span data-ttu-id="32bb9-175">Se não for possível recuperar os dados primários, o failover geográfico será executado e os clientes afetados receberão uma notificação em suas assinaturas.</span><span class="sxs-lookup"><span data-stu-id="32bb9-175">If the primary data cannot be recovered, then geo-failover is performed and the affected customers will be notified about this through their subscription.</span></span>

