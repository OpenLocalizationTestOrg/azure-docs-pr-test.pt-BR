---
title: "Encaminhar dados de relatório DSC de Automação do Azure para o OMS Log Analytics | Microsoft Docs"
description: "Este artigo demonstra como enviar dados de relatório de DSC (Configuração de Estado Desejado) para Gerenciamento e Log Analytics do Microsoft Operations Management Suite para fornecer informações adicionais."
services: automation
documentationcenter: 
author: eslesar
manager: carmonm
editor: tysonn
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 05/24/2017
ms.author: eslesar
ms.openlocfilehash: 316031c5297a0201c8db4a9e177298c78962c673
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/11/2017
---
# <a name="forward-azure-automation-dsc-reporting-data-to-oms-log-analytics"></a><span data-ttu-id="9b08d-103">Encaminhar dados de relatório DSC de Automação do Azure para o OMS Log Analytics</span><span class="sxs-lookup"><span data-stu-id="9b08d-103">Forward Azure Automation DSC reporting data to OMS Log Analytics</span></span>

<span data-ttu-id="9b08d-104">A Automação pode enviar os dados do status do nó DSC para seu espaço de trabalho de Log Analytics do Microsoft Operations Management Suite (OMS).</span><span class="sxs-lookup"><span data-stu-id="9b08d-104">Automation can send DSC node status data to your Microsoft Operations Management Suite (OMS) Log Analytics workspace.</span></span>  
<span data-ttu-id="9b08d-105">O status de conformidade é visível no Portal do Azure, ou com o PowerShell, para nós e recursos individuais de DSC em configurações de nó.</span><span class="sxs-lookup"><span data-stu-id="9b08d-105">Compliance status is visible in the Azure portal, or with PowerShell, for nodes and for individual DSC resources in node configurations.</span></span> <span data-ttu-id="9b08d-106">Com o Log Analytics, você pode:</span><span class="sxs-lookup"><span data-stu-id="9b08d-106">With Log Analytics you can:</span></span>

* <span data-ttu-id="9b08d-107">Obter informações de conformidade para nós gerenciados e recursos individuais</span><span class="sxs-lookup"><span data-stu-id="9b08d-107">Get compliance information for managed nodes and individual resources</span></span>
* <span data-ttu-id="9b08d-108">Disparar um email ou alerta com base no status de conformidade</span><span class="sxs-lookup"><span data-stu-id="9b08d-108">Trigger an email or alert based on compliance status</span></span>
* <span data-ttu-id="9b08d-109">Escrever consultas avançadas em seus nós gerenciados</span><span class="sxs-lookup"><span data-stu-id="9b08d-109">Write advanced queries across your managed nodes</span></span>
* <span data-ttu-id="9b08d-110">Correlacionar o status de conformidade em contas de Automação</span><span class="sxs-lookup"><span data-stu-id="9b08d-110">Correlate compliance status across Automation accounts</span></span>
* <span data-ttu-id="9b08d-111">Visualizar o histórico de conformidade do nó ao longo do tempo</span><span class="sxs-lookup"><span data-stu-id="9b08d-111">Visualize your node compliance history over time</span></span>

## <a name="prerequisites"></a><span data-ttu-id="9b08d-112">Pré-requisitos</span><span class="sxs-lookup"><span data-stu-id="9b08d-112">Prerequisites</span></span>

<span data-ttu-id="9b08d-113">Para começar a enviar seus relatórios de DSC de Automação para Log Analytics, você precisará do seguinte:</span><span class="sxs-lookup"><span data-stu-id="9b08d-113">To start sending your Automation DSC reports to Log Analytics, you need:</span></span>

* <span data-ttu-id="9b08d-114">Versão de novembro 2016 ou posterior do [Azure PowerShell](/powershell/azure/overview) ( versão 2.3.0).</span><span class="sxs-lookup"><span data-stu-id="9b08d-114">The November 2016 or later release of [Azure PowerShell](/powershell/azure/overview) (v2.3.0).</span></span>
* <span data-ttu-id="9b08d-115">Uma conta de Automação do Azure.</span><span class="sxs-lookup"><span data-stu-id="9b08d-115">An Azure Automation account.</span></span> <span data-ttu-id="9b08d-116">Para saber mais, veja [Introdução à Automação do Azure](automation-offering-get-started.md)</span><span class="sxs-lookup"><span data-stu-id="9b08d-116">For more information, see [Getting Started with Azure Automation](automation-offering-get-started.md)</span></span>
* <span data-ttu-id="9b08d-117">Um espaço de trabalho de Log Analytics com uma oferta de serviço **Automação e Controle**.</span><span class="sxs-lookup"><span data-stu-id="9b08d-117">A Log Analytics workspace with an **Automation & Control** service offering.</span></span> <span data-ttu-id="9b08d-118">Para saber mais, confira [Introdução ao Log Analytics](../log-analytics/log-analytics-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="9b08d-118">For more information, see [Get started with Log Analytics](../log-analytics/log-analytics-get-started.md).</span></span>
* <span data-ttu-id="9b08d-119">Pelo menos um nó DSC de Automação do Azure.</span><span class="sxs-lookup"><span data-stu-id="9b08d-119">At least one Azure Automation DSC node.</span></span> <span data-ttu-id="9b08d-120">Para saber mais, veja [Máquinas de integração para o gerenciamento pelo DSC de Automação do Azure](automation-dsc-onboarding.md)</span><span class="sxs-lookup"><span data-stu-id="9b08d-120">For more information, see [Onboarding machines for management by Azure Automation DSC](automation-dsc-onboarding.md)</span></span> 

## <a name="set-up-integration-with-log-analytics"></a><span data-ttu-id="9b08d-121">Configurar a integração com o Log Analytics</span><span class="sxs-lookup"><span data-stu-id="9b08d-121">Set up integration with Log Analytics</span></span>

<span data-ttu-id="9b08d-122">Para começar a importar dados do DSC de Automação do Azure para Log Analytics, conclua as seguintes etapas:</span><span class="sxs-lookup"><span data-stu-id="9b08d-122">To begin importing data from Azure Automation DSC into Log Analytics, complete the following steps:</span></span>

1. <span data-ttu-id="9b08d-123">Faça logon em sua conta do Azure no PowerShell.</span><span class="sxs-lookup"><span data-stu-id="9b08d-123">Log in to your Azure account in PowerShell.</span></span> <span data-ttu-id="9b08d-124">Veja [Fazer logon com o Azure PowerShell](https://docs.microsoft.com/en-us/powershell/azure/authenticate-azureps?view=azurermps-4.0.0)</span><span class="sxs-lookup"><span data-stu-id="9b08d-124">See [Log in with Azure PowerShell](https://docs.microsoft.com/en-us/powershell/azure/authenticate-azureps?view=azurermps-4.0.0)</span></span>
1. <span data-ttu-id="9b08d-125">Obtenha o _ResourceId_ de sua conta de automação executando o seguinte comando do PowerShell: (se você tiver mais de uma conta de automação, escolha o _ResourceID_ para a que deseja configurar).</span><span class="sxs-lookup"><span data-stu-id="9b08d-125">Get the _ResourceId_ of your automation account by running the following PowerShell command: (if you have more than one automation account, choose the _ResourceID_ for the account you want to configure).</span></span>

  ```powershell
  # Find the ResourceId for the Automation Account
  Find-AzureRmResource -ResourceType "Microsoft.Automation/automationAccounts"
  ```
1. <span data-ttu-id="9b08d-126">Obtenha o _ResourceId_ de seu espaço de trabalho do Log Analytics executando o seguinte comando do PowerShell: (se você tiver mais de um espaço de trabalho, escolha o _ResourceID_ para o que deseja configurar).</span><span class="sxs-lookup"><span data-stu-id="9b08d-126">Get the _ResourceId_ of your Log Analytics workspace by running the following PowerShell command: (if you have more than one workspace, choose the _ResourceID_ for the workspace you want to configure).</span></span>

  ```powershell
  # Find the ResourceId for the Log Analytics workspace
  Find-AzureRmResource -ResourceType "Microsoft.OperationalInsights/workspaces"
  ```
1. <span data-ttu-id="9b08d-127">Execute o seguinte comando do PowerShell, substituindo `<AutomationResourceId>` e `<WorkspaceResourceId>` pelos valores de _ResourceId_ de cada uma das etapas anteriores:</span><span class="sxs-lookup"><span data-stu-id="9b08d-127">Run the following PowerShell command, replacing `<AutomationResourceId>` and `<WorkspaceResourceId>` with the _ResourceId_ values from each of the previous steps:</span></span>

  ```powershell
  Set-AzureRmDiagnosticSetting -ResourceId <AutomationResourceId> -WorkspaceId <WorkspaceResourceId> -Enabled $true -Categories "DscNodeStatus"
  ```

<span data-ttu-id="9b08d-128">Se você quiser parar de importar dados do DSC de Automação do Azure para o Log Analytics, execute o seguinte comando do PowerShell.</span><span class="sxs-lookup"><span data-stu-id="9b08d-128">If you want to stop importing data from Azure Automation DSC into Log Analytics, run the following PowerShell command.</span></span>

```powershell
Set-AzureRmDiagnosticSetting -ResourceId <AutomationResourceId> -WorkspaceId <WorkspaceResourceId> -Enabled $false -Categories "DscNodeStatus"
```

## <a name="view-the-dsc-logs"></a><span data-ttu-id="9b08d-129">Exibir os logs de DSC</span><span class="sxs-lookup"><span data-stu-id="9b08d-129">View the DSC logs</span></span>

<span data-ttu-id="9b08d-130">Depois de configurar a integração com o Log Analytics para os seus dados de DSC de Automação, um botão **Pesquisa de log** aparecerá na folha **Nós DSC** de sua conta de automação.</span><span class="sxs-lookup"><span data-stu-id="9b08d-130">After you set up integration with Log Analytics for your Automation DSC data, a **Log search** button will appear on the **DSC Nodes** blade of your automation account.</span></span> <span data-ttu-id="9b08d-131">Clique no botão **Pesquisa de Log** para exibir os logs para dados do nó DSC.</span><span class="sxs-lookup"><span data-stu-id="9b08d-131">Click the **Log Search** button to view the logs for DSC node data.</span></span>

![Botão Pesquisar Log](media/automation-dsc-diagnostics/log-search-button.png)

<span data-ttu-id="9b08d-133">A folha **Pesquisa de Log** é aberta e você verá uma operação **DscNodeStatusData** para cada nó DSC e uma operação **DscResourceStatusData** para cada [Recurso DSC](https://msdn.microsoft.com/powershell/dsc/resources) chamado na configuração do nó aplicada a esse nó.</span><span class="sxs-lookup"><span data-stu-id="9b08d-133">The **Log Search** blade opens, and you see a **DscNodeStatusData** operation for each DSC node, and a **DscResourceStatusData** operation for each [DSC resource](https://msdn.microsoft.com/powershell/dsc/resources) called in the Node configuration applied to that node.</span></span>

<span data-ttu-id="9b08d-134">A operação **DscResourceStatusData** contém informações de erro para todos os recursos DSC que falharam.</span><span class="sxs-lookup"><span data-stu-id="9b08d-134">The **DscResourceStatusData** operation contains error information for any DSC resources that failed.</span></span>

<span data-ttu-id="9b08d-135">Clique em cada operação na lista para ver os dados para essa operação.</span><span class="sxs-lookup"><span data-stu-id="9b08d-135">Click each operation in the list to see the data for that operation.</span></span>

<span data-ttu-id="9b08d-136">Você também pode exibir os logs [pesquisando no Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="9b08d-136">You can also view the logs by [searching in Log Analytics.</span></span> <span data-ttu-id="9b08d-137">Veja [Localizar dados usando pesquisas de logs](../log-analytics/log-analytics-log-searches.md).</span><span class="sxs-lookup"><span data-stu-id="9b08d-137">See [Find data using log searches](../log-analytics/log-analytics-log-searches.md).</span></span>
<span data-ttu-id="9b08d-138">Digite a consulta a seguir para localizar os logs DSC: `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category = "DscNodeStatus"`</span><span class="sxs-lookup"><span data-stu-id="9b08d-138">Type the following query to find your DSC logs: `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category = "DscNodeStatus"`</span></span>

<span data-ttu-id="9b08d-139">Você também pode restringir a consulta pelo nome da operação.</span><span class="sxs-lookup"><span data-stu-id="9b08d-139">You can also narrow the query by the operation name.</span></span> <span data-ttu-id="9b08d-140">Por exemplo: \`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category = "DscNodeStatus" OperationName = "DscNodeStatusData"</span><span class="sxs-lookup"><span data-stu-id="9b08d-140">For example: \`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category = "DscNodeStatus" OperationName = "DscNodeStatusData"</span></span>

### <a name="send-an-email-when-a-dsc-compliance-check-fails"></a><span data-ttu-id="9b08d-141">Enviar um email quando uma verificação de conformidade do DSC falhar</span><span class="sxs-lookup"><span data-stu-id="9b08d-141">Send an email when a DSC compliance check fails</span></span>

<span data-ttu-id="9b08d-142">Uma das principais solicitações de nossos clientes é a capacidade de enviar um email ou uma mensagem de texto quando algo dá errado com uma configuração de DSC.</span><span class="sxs-lookup"><span data-stu-id="9b08d-142">One of our top customer requests is for the ability to send an email or a text when something goes wrong with a DSC configuration.</span></span>   

<span data-ttu-id="9b08d-143">Para criar uma regra de alerta, você começa criando uma pesquisa de log para os registros do relatório DSC que devem invocar o alerta.</span><span class="sxs-lookup"><span data-stu-id="9b08d-143">To create an alert rule, you start by creating a log search for the DSC report records that should invoke the alert.</span></span>  <span data-ttu-id="9b08d-144">Clique no botão **Alerta** para criar e configurar a regra de alerta.</span><span class="sxs-lookup"><span data-stu-id="9b08d-144">Click the **Alert** button to create and configure the alert rule.</span></span>

1. <span data-ttu-id="9b08d-145">Na página Visão geral do Log Analytics, clique em **Pesquisa de Logs**.</span><span class="sxs-lookup"><span data-stu-id="9b08d-145">From the Log Analytics Overview page, click **Log Search**.</span></span>
1. <span data-ttu-id="9b08d-146">Crie uma consulta de pesquisa de log para o alerta digitando a seguinte pesquisa no campo de consulta: `Type=AzureDiagnostics Category=DscNodeStatus NodeName_s=DSCTEST1 OperationName=DscNodeStatusData ResultType=Failed`</span><span class="sxs-lookup"><span data-stu-id="9b08d-146">Create a log search query for your alert by typing the following search into the query field:  `Type=AzureDiagnostics Category=DscNodeStatus NodeName_s=DSCTEST1 OperationName=DscNodeStatusData ResultType=Failed`</span></span>

  <span data-ttu-id="9b08d-147">Se você tiver configurado logs de mais de uma Conta de automação ou assinatura para o espaço de trabalho, também poderá agrupar os alertas por assinatura e por conta de Automação.</span><span class="sxs-lookup"><span data-stu-id="9b08d-147">If you have set up logs from more than one Automation account or subscription to your workspace, you can group your alerts by subscription and Automation account.</span></span>  
  <span data-ttu-id="9b08d-148">O nome da conta de Automação pode ser derivado do campo de Recurso na pesquisa de DscNodeStatusData.</span><span class="sxs-lookup"><span data-stu-id="9b08d-148">Automation account name can be derived from the Resource field in the search of DscNodeStatusData.</span></span>  
1. <span data-ttu-id="9b08d-149">Para abrir a tela **Adicionar Regra de Alerta**, clique em **Alerta** na parte superior da página.</span><span class="sxs-lookup"><span data-stu-id="9b08d-149">To open the **Add Alert Rule** screen, click **Alert** at the top of the page.</span></span> <span data-ttu-id="9b08d-150">Para saber mais sobre as opções de configuração de alerta, confira [Alertas no Log Analytics](../log-analytics/log-analytics-alerts.md#alert-rules).</span><span class="sxs-lookup"><span data-stu-id="9b08d-150">For more information on the options to configure the alert, see [Alerts in Log Analytics](../log-analytics/log-analytics-alerts.md#alert-rules).</span></span>

### <a name="find-failed-dsc-resources-across-all-nodes"></a><span data-ttu-id="9b08d-151">Encontrar recursos DSC com falha em todos os nós</span><span class="sxs-lookup"><span data-stu-id="9b08d-151">Find failed DSC resources across all nodes</span></span>

<span data-ttu-id="9b08d-152">Uma vantagem de usar o Log Analytics é que você pode pesquisar falhas de verificações em nós.</span><span class="sxs-lookup"><span data-stu-id="9b08d-152">One advantage of using Log Analytics is that you can search for failed checks across nodes.</span></span>
<span data-ttu-id="9b08d-153">Para localizar todas as instâncias de recursos DSC que falharam.</span><span class="sxs-lookup"><span data-stu-id="9b08d-153">To find all instances of DSC resources that failed.</span></span>

1. <span data-ttu-id="9b08d-154">Na página Visão geral do Log Analytics, clique em **Pesquisa de Logs**.</span><span class="sxs-lookup"><span data-stu-id="9b08d-154">From the Log Analytics Overview page, click **Log Search**.</span></span>
1. <span data-ttu-id="9b08d-155">Crie uma consulta de pesquisa de log para o alerta digitando a seguinte pesquisa no campo de consulta: `Type=AzureDiagnostics Category=DscNodeStatus OperationName=DscResourceStatusData ResultType=Failed`</span><span class="sxs-lookup"><span data-stu-id="9b08d-155">Create a log search query for your alert by typing the following search into the query field:  `Type=AzureDiagnostics Category=DscNodeStatus OperationName=DscResourceStatusData ResultType=Failed`</span></span>

### <a name="view-historical-dsc-node-status"></a><span data-ttu-id="9b08d-156">Exibir status do nó DSC histórico</span><span class="sxs-lookup"><span data-stu-id="9b08d-156">View historical DSC node status</span></span>

<span data-ttu-id="9b08d-157">Finalmente, talvez você queira visualizar o histórico de status do nó DSC ao longo do tempo.</span><span class="sxs-lookup"><span data-stu-id="9b08d-157">Finally, you may want to visualize your DSC node status history over time.</span></span>  
<span data-ttu-id="9b08d-158">Você pode usar essa consulta para pesquisar o status do nó DSC ao longo do tempo.</span><span class="sxs-lookup"><span data-stu-id="9b08d-158">You can use this query to search for the status of your DSC node status over time.</span></span>

`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=DscNodeStatus NOT(ResultType="started") | measure Count() by ResultType interval 1hour`  

<span data-ttu-id="9b08d-159">Isso exibirá um gráfico do status do nó ao longo do tempo.</span><span class="sxs-lookup"><span data-stu-id="9b08d-159">This will display a chart of the node status over time.</span></span>

## <a name="log-analytics-records"></a><span data-ttu-id="9b08d-160">Registros do Log Analytics</span><span class="sxs-lookup"><span data-stu-id="9b08d-160">Log Analytics records</span></span>

<span data-ttu-id="9b08d-161">O diagnóstico da Automação do Azure cria duas categorias de registros no Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="9b08d-161">Diagnostics from Azure Automation creates two categories of records in Log Analytics.</span></span>

### <a name="dscnodestatusdata"></a><span data-ttu-id="9b08d-162">DscNodeStatusData</span><span class="sxs-lookup"><span data-stu-id="9b08d-162">DscNodeStatusData</span></span>

| <span data-ttu-id="9b08d-163">Propriedade</span><span class="sxs-lookup"><span data-stu-id="9b08d-163">Property</span></span> | <span data-ttu-id="9b08d-164">Descrição</span><span class="sxs-lookup"><span data-stu-id="9b08d-164">Description</span></span> |
| --- | --- |
| <span data-ttu-id="9b08d-165">TimeGenerated</span><span class="sxs-lookup"><span data-stu-id="9b08d-165">TimeGenerated</span></span> |<span data-ttu-id="9b08d-166">Data e hora quando a verificação de conformidade foi executada.</span><span class="sxs-lookup"><span data-stu-id="9b08d-166">Date and time when the compliance check ran.</span></span> |
| <span data-ttu-id="9b08d-167">OperationName</span><span class="sxs-lookup"><span data-stu-id="9b08d-167">OperationName</span></span> |<span data-ttu-id="9b08d-168">DscNodeStatusData</span><span class="sxs-lookup"><span data-stu-id="9b08d-168">DscNodeStatusData</span></span> |
| <span data-ttu-id="9b08d-169">ResultType</span><span class="sxs-lookup"><span data-stu-id="9b08d-169">ResultType</span></span> |<span data-ttu-id="9b08d-170">Se o nó está em conformidade.</span><span class="sxs-lookup"><span data-stu-id="9b08d-170">Whether the node is compliant.</span></span> |
| <span data-ttu-id="9b08d-171">NodeName_s</span><span class="sxs-lookup"><span data-stu-id="9b08d-171">NodeName_s</span></span> |<span data-ttu-id="9b08d-172">O nome do nó gerenciado.</span><span class="sxs-lookup"><span data-stu-id="9b08d-172">The name of the managed node.</span></span> |
| <span data-ttu-id="9b08d-173">NodeComplianceStatus_s</span><span class="sxs-lookup"><span data-stu-id="9b08d-173">NodeComplianceStatus_s</span></span> |<span data-ttu-id="9b08d-174">Se o nó está em conformidade.</span><span class="sxs-lookup"><span data-stu-id="9b08d-174">Whether the node is compliant.</span></span> |
| <span data-ttu-id="9b08d-175">DscReportStatus</span><span class="sxs-lookup"><span data-stu-id="9b08d-175">DscReportStatus</span></span> |<span data-ttu-id="9b08d-176">Se a verificação de conformidade foi executada com êxito.</span><span class="sxs-lookup"><span data-stu-id="9b08d-176">Whether the compliance check ran successfully.</span></span> |
| <span data-ttu-id="9b08d-177">ConfigurationMode</span><span class="sxs-lookup"><span data-stu-id="9b08d-177">ConfigurationMode</span></span> | <span data-ttu-id="9b08d-178">Como a configuração é aplicada ao nó.</span><span class="sxs-lookup"><span data-stu-id="9b08d-178">How the configuration is applied to the node.</span></span> <span data-ttu-id="9b08d-179">Os valores possíveis são __"ApplyOnly"__,__"ApplyandMonitior"__ e __"ApplyandAutoCorrect"__.</span><span class="sxs-lookup"><span data-stu-id="9b08d-179">Possible values are __"ApplyOnly"__,__"ApplyandMonitior"__, and __"ApplyandAutoCorrect"__.</span></span> <ul><li><span data-ttu-id="9b08d-180">__ApplyOnly__: o DSC aplica-se à configuração e não faz nada além disso, a menos que uma nova configuração seja enviada para o nó de destino ou quando é efetuado pull de uma nova configuração de um servidor.</span><span class="sxs-lookup"><span data-stu-id="9b08d-180">__ApplyOnly__: DSC applies the configuration and does nothing further unless a new configuration is pushed to the target node or when a new configuration is pulled from a server.</span></span> <span data-ttu-id="9b08d-181">Depois da aplicação inicial de uma nova configuração, o DSC não procura descompasso de um estado previamente configurado.</span><span class="sxs-lookup"><span data-stu-id="9b08d-181">After initial application of a new configuration, DSC does not check for drift from a previously configured state.</span></span> <span data-ttu-id="9b08d-182">O DSC tenta aplicar a configuração até que seja bem-sucedida antes __ApplyOnly__ entrar em vigor.</span><span class="sxs-lookup"><span data-stu-id="9b08d-182">DSC attempts to apply the configuration until it is successful before __ApplyOnly__ takes effect.</span></span> </li><li> <span data-ttu-id="9b08d-183">__ApplyAndMonitor__: é o valor padrão.</span><span class="sxs-lookup"><span data-stu-id="9b08d-183">__ApplyAndMonitor__: This is the default value.</span></span> <span data-ttu-id="9b08d-184">O LCM aplica as novas configurações.</span><span class="sxs-lookup"><span data-stu-id="9b08d-184">The LCM applies any new configurations.</span></span> <span data-ttu-id="9b08d-185">Depois da aplicação inicial de uma nova configuração, se o nó de destino tiver um descompasso do estado desejado, o DSC relatará a discrepância nos logs.</span><span class="sxs-lookup"><span data-stu-id="9b08d-185">After initial application of a new configuration, if the target node drifts from the desired state, DSC reports the discrepancy in logs.</span></span> <span data-ttu-id="9b08d-186">O DSC tenta aplicar a configuração até que seja bem-sucedida antes __ApplyAndMonitor__ entrar em vigor.</span><span class="sxs-lookup"><span data-stu-id="9b08d-186">DSC attempts to apply the configuration until it is successful before __ApplyAndMonitor__ takes effect.</span></span></li><li><span data-ttu-id="9b08d-187">__ApplyAndAutoCorrect__: o DSC aplica as novas configurações.</span><span class="sxs-lookup"><span data-stu-id="9b08d-187">__ApplyAndAutoCorrect__: DSC applies any new configurations.</span></span> <span data-ttu-id="9b08d-188">Depois da aplicação inicial de uma nova configuração, se o nó de destino tiver um descompasso do estado desejado, o DSC relatará a discrepância nos logs e, em seguida, reaplicará a configuração atual.</span><span class="sxs-lookup"><span data-stu-id="9b08d-188">After initial application of a new configuration, if the target node drifts from the desired state, DSC reports the discrepancy in logs, and then reapplies the current configuration.</span></span></li></ul> |
| <span data-ttu-id="9b08d-189">HostName_s</span><span class="sxs-lookup"><span data-stu-id="9b08d-189">HostName_s</span></span> | <span data-ttu-id="9b08d-190">O nome do nó gerenciado.</span><span class="sxs-lookup"><span data-stu-id="9b08d-190">The name of the managed node.</span></span> |
| <span data-ttu-id="9b08d-191">IPAddress</span><span class="sxs-lookup"><span data-stu-id="9b08d-191">IPAddress</span></span> | <span data-ttu-id="9b08d-192">O endereço IPv4 do nó gerenciado.</span><span class="sxs-lookup"><span data-stu-id="9b08d-192">The IPv4 address of the managed node.</span></span> |
| <span data-ttu-id="9b08d-193">Categoria</span><span class="sxs-lookup"><span data-stu-id="9b08d-193">Category</span></span> | <span data-ttu-id="9b08d-194">DscNodeStatus</span><span class="sxs-lookup"><span data-stu-id="9b08d-194">DscNodeStatus</span></span> |
| <span data-ttu-id="9b08d-195">Recurso</span><span class="sxs-lookup"><span data-stu-id="9b08d-195">Resource</span></span> | <span data-ttu-id="9b08d-196">O nome da conta de Automação do Azure.</span><span class="sxs-lookup"><span data-stu-id="9b08d-196">The name of the Azure Automation account.</span></span> |
| <span data-ttu-id="9b08d-197">Tenant_g</span><span class="sxs-lookup"><span data-stu-id="9b08d-197">Tenant_g</span></span> | <span data-ttu-id="9b08d-198">GUID que identifica o locatário para o Chamador.</span><span class="sxs-lookup"><span data-stu-id="9b08d-198">GUID that identifies the tenant for the Caller.</span></span> |
| <span data-ttu-id="9b08d-199">NodeId_g</span><span class="sxs-lookup"><span data-stu-id="9b08d-199">NodeId_g</span></span> |<span data-ttu-id="9b08d-200">A GUID que identifica o nó gerenciado.</span><span class="sxs-lookup"><span data-stu-id="9b08d-200">GUID that identifies the managed node.</span></span> |
| <span data-ttu-id="9b08d-201">DscReportId_g</span><span class="sxs-lookup"><span data-stu-id="9b08d-201">DscReportId_g</span></span> |<span data-ttu-id="9b08d-202">A GUID que identifica o relatório.</span><span class="sxs-lookup"><span data-stu-id="9b08d-202">GUID that identifies the report.</span></span> |
| <span data-ttu-id="9b08d-203">LastSeenTime_t</span><span class="sxs-lookup"><span data-stu-id="9b08d-203">LastSeenTime_t</span></span> |<span data-ttu-id="9b08d-204">Data e hora em que o relatório foi exibido pela última vez.</span><span class="sxs-lookup"><span data-stu-id="9b08d-204">Date and time when the report was last viewed.</span></span> |
| <span data-ttu-id="9b08d-205">ReportStartTime_t</span><span class="sxs-lookup"><span data-stu-id="9b08d-205">ReportStartTime_t</span></span> |<span data-ttu-id="9b08d-206">Data e hora em que o relatório foi iniciado.</span><span class="sxs-lookup"><span data-stu-id="9b08d-206">Date and time when the report was started.</span></span> |
| <span data-ttu-id="9b08d-207">ReportEndTime_t</span><span class="sxs-lookup"><span data-stu-id="9b08d-207">ReportEndTime_t</span></span> |<span data-ttu-id="9b08d-208">Data e hora em que o relatório foi concluído.</span><span class="sxs-lookup"><span data-stu-id="9b08d-208">Date and time when the report completed.</span></span> |
| <span data-ttu-id="9b08d-209">NumberOfResources_d</span><span class="sxs-lookup"><span data-stu-id="9b08d-209">NumberOfResources_d</span></span> |<span data-ttu-id="9b08d-210">O número de recursos de DSC chamado na configuração aplicada ao nó.</span><span class="sxs-lookup"><span data-stu-id="9b08d-210">The number of DSC resources called in the configuration applied to the node.</span></span> |
| <span data-ttu-id="9b08d-211">SourceSystem</span><span class="sxs-lookup"><span data-stu-id="9b08d-211">SourceSystem</span></span> | <span data-ttu-id="9b08d-212">Como o Log Analytics coletou os dados.</span><span class="sxs-lookup"><span data-stu-id="9b08d-212">How Log Analytics collected the data.</span></span> <span data-ttu-id="9b08d-213">Sempre *Azure* para o Diagnóstico do Azure.</span><span class="sxs-lookup"><span data-stu-id="9b08d-213">Always *Azure* for Azure diagnostics.</span></span> |
| <span data-ttu-id="9b08d-214">ResourceId</span><span class="sxs-lookup"><span data-stu-id="9b08d-214">ResourceId</span></span> |<span data-ttu-id="9b08d-215">Especifica a conta de Automação do Azure.</span><span class="sxs-lookup"><span data-stu-id="9b08d-215">Specifies the Azure Automation account.</span></span> |
| <span data-ttu-id="9b08d-216">ResultDescription</span><span class="sxs-lookup"><span data-stu-id="9b08d-216">ResultDescription</span></span> | <span data-ttu-id="9b08d-217">A descrição para esta operação.</span><span class="sxs-lookup"><span data-stu-id="9b08d-217">The description for this operation.</span></span> |
| <span data-ttu-id="9b08d-218">SubscriptionId</span><span class="sxs-lookup"><span data-stu-id="9b08d-218">SubscriptionId</span></span> | <span data-ttu-id="9b08d-219">O GUID (ID de assinatura do Azure) para a Conta de automação.</span><span class="sxs-lookup"><span data-stu-id="9b08d-219">The Azure subscription Id (GUID) for the Automation account.</span></span> |
| <span data-ttu-id="9b08d-220">ResourceGroup</span><span class="sxs-lookup"><span data-stu-id="9b08d-220">ResourceGroup</span></span> | <span data-ttu-id="9b08d-221">Nome do grupo de recursos para a Conta de automação.</span><span class="sxs-lookup"><span data-stu-id="9b08d-221">Name of the resource group for the Automation account.</span></span> |
| <span data-ttu-id="9b08d-222">ResourceProvider</span><span class="sxs-lookup"><span data-stu-id="9b08d-222">ResourceProvider</span></span> | <span data-ttu-id="9b08d-223">MICROSOFT.AUTOMATION</span><span class="sxs-lookup"><span data-stu-id="9b08d-223">MICROSOFT.AUTOMATION</span></span> |
| <span data-ttu-id="9b08d-224">ResourceType</span><span class="sxs-lookup"><span data-stu-id="9b08d-224">ResourceType</span></span> | <span data-ttu-id="9b08d-225">AUTOMATIONACCOUNTS</span><span class="sxs-lookup"><span data-stu-id="9b08d-225">AUTOMATIONACCOUNTS</span></span> |
| <span data-ttu-id="9b08d-226">CorrelationId</span><span class="sxs-lookup"><span data-stu-id="9b08d-226">CorrelationId</span></span> |<span data-ttu-id="9b08d-227">O GUID que é a Id de correlação do relatório de conformidade.</span><span class="sxs-lookup"><span data-stu-id="9b08d-227">GUID that is the Correlation Id of the compliance report.</span></span> |

### <a name="dscresourcestatusdata"></a><span data-ttu-id="9b08d-228">DscResourceStatusData</span><span class="sxs-lookup"><span data-stu-id="9b08d-228">DscResourceStatusData</span></span>

| <span data-ttu-id="9b08d-229">Propriedade</span><span class="sxs-lookup"><span data-stu-id="9b08d-229">Property</span></span> | <span data-ttu-id="9b08d-230">Descrição</span><span class="sxs-lookup"><span data-stu-id="9b08d-230">Description</span></span> |
| --- | --- |
| <span data-ttu-id="9b08d-231">TimeGenerated</span><span class="sxs-lookup"><span data-stu-id="9b08d-231">TimeGenerated</span></span> |<span data-ttu-id="9b08d-232">Data e hora quando a verificação de conformidade foi executada.</span><span class="sxs-lookup"><span data-stu-id="9b08d-232">Date and time when the compliance check ran.</span></span> |
| <span data-ttu-id="9b08d-233">OperationName</span><span class="sxs-lookup"><span data-stu-id="9b08d-233">OperationName</span></span> |<span data-ttu-id="9b08d-234">DscResourceStatusData</span><span class="sxs-lookup"><span data-stu-id="9b08d-234">DscResourceStatusData</span></span>|
| <span data-ttu-id="9b08d-235">ResultType</span><span class="sxs-lookup"><span data-stu-id="9b08d-235">ResultType</span></span> |<span data-ttu-id="9b08d-236">Se o recurso está em conformidade.</span><span class="sxs-lookup"><span data-stu-id="9b08d-236">Whether the resource is compliant.</span></span> |
| <span data-ttu-id="9b08d-237">NodeName_s</span><span class="sxs-lookup"><span data-stu-id="9b08d-237">NodeName_s</span></span> |<span data-ttu-id="9b08d-238">O nome do nó gerenciado.</span><span class="sxs-lookup"><span data-stu-id="9b08d-238">The name of the managed node.</span></span> |
| <span data-ttu-id="9b08d-239">Categoria</span><span class="sxs-lookup"><span data-stu-id="9b08d-239">Category</span></span> | <span data-ttu-id="9b08d-240">DscNodeStatus</span><span class="sxs-lookup"><span data-stu-id="9b08d-240">DscNodeStatus</span></span> |
| <span data-ttu-id="9b08d-241">Recurso</span><span class="sxs-lookup"><span data-stu-id="9b08d-241">Resource</span></span> | <span data-ttu-id="9b08d-242">O nome da conta de Automação do Azure.</span><span class="sxs-lookup"><span data-stu-id="9b08d-242">The name of the Azure Automation account.</span></span> |
| <span data-ttu-id="9b08d-243">Tenant_g</span><span class="sxs-lookup"><span data-stu-id="9b08d-243">Tenant_g</span></span> | <span data-ttu-id="9b08d-244">GUID que identifica o locatário para o Chamador.</span><span class="sxs-lookup"><span data-stu-id="9b08d-244">GUID that identifies the tenant for the Caller.</span></span> |
| <span data-ttu-id="9b08d-245">NodeId_g</span><span class="sxs-lookup"><span data-stu-id="9b08d-245">NodeId_g</span></span> |<span data-ttu-id="9b08d-246">A GUID que identifica o nó gerenciado.</span><span class="sxs-lookup"><span data-stu-id="9b08d-246">GUID that identifies the managed node.</span></span> |
| <span data-ttu-id="9b08d-247">DscReportId_g</span><span class="sxs-lookup"><span data-stu-id="9b08d-247">DscReportId_g</span></span> |<span data-ttu-id="9b08d-248">A GUID que identifica o relatório.</span><span class="sxs-lookup"><span data-stu-id="9b08d-248">GUID that identifies the report.</span></span> |
| <span data-ttu-id="9b08d-249">DscResourceId_s</span><span class="sxs-lookup"><span data-stu-id="9b08d-249">DscResourceId_s</span></span> |<span data-ttu-id="9b08d-250">O nome da instância do recurso de DSC.</span><span class="sxs-lookup"><span data-stu-id="9b08d-250">The name of the DSC resource instance.</span></span> |
| <span data-ttu-id="9b08d-251">DscResourceName_s</span><span class="sxs-lookup"><span data-stu-id="9b08d-251">DscResourceName_s</span></span> |<span data-ttu-id="9b08d-252">O nome do recurso de DSC.</span><span class="sxs-lookup"><span data-stu-id="9b08d-252">The name of the DSC resource.</span></span> |
| <span data-ttu-id="9b08d-253">DscResourceStatus_s</span><span class="sxs-lookup"><span data-stu-id="9b08d-253">DscResourceStatus_s</span></span> |<span data-ttu-id="9b08d-254">Se o recurso de DSC está em conformidade.</span><span class="sxs-lookup"><span data-stu-id="9b08d-254">Whether the DSC resource is in compliance.</span></span> |
| <span data-ttu-id="9b08d-255">DscModuleName_s</span><span class="sxs-lookup"><span data-stu-id="9b08d-255">DscModuleName_s</span></span> |<span data-ttu-id="9b08d-256">O nome do módulo do PowerShell que contém o recurso de DSC.</span><span class="sxs-lookup"><span data-stu-id="9b08d-256">The name of the PowerShell module that contains the DSC resource.</span></span> |
| <span data-ttu-id="9b08d-257">DscModuleVersion_s</span><span class="sxs-lookup"><span data-stu-id="9b08d-257">DscModuleVersion_s</span></span> |<span data-ttu-id="9b08d-258">A versão do módulo do PowerShell que contém o recurso de DSC.</span><span class="sxs-lookup"><span data-stu-id="9b08d-258">The version of the PowerShell module that contains the DSC resource.</span></span> |
| <span data-ttu-id="9b08d-259">DscConfigurationName_s</span><span class="sxs-lookup"><span data-stu-id="9b08d-259">DscConfigurationName_s</span></span> |<span data-ttu-id="9b08d-260">O nome da configuração aplicada ao nó.</span><span class="sxs-lookup"><span data-stu-id="9b08d-260">The name of the configuration applied to the node.</span></span> |
| <span data-ttu-id="9b08d-261">ErrorCode_s</span><span class="sxs-lookup"><span data-stu-id="9b08d-261">ErrorCode_s</span></span> | <span data-ttu-id="9b08d-262">O código de erro se o recurso tiver falhado.</span><span class="sxs-lookup"><span data-stu-id="9b08d-262">The error code if the resource failed.</span></span> |
| <span data-ttu-id="9b08d-263">ErrorMessage_s</span><span class="sxs-lookup"><span data-stu-id="9b08d-263">ErrorMessage_s</span></span> |<span data-ttu-id="9b08d-264">A mensagem de erro se o recurso tiver falhado.</span><span class="sxs-lookup"><span data-stu-id="9b08d-264">The error message if the resource failed.</span></span> |
| <span data-ttu-id="9b08d-265">DscResourceDuration_d</span><span class="sxs-lookup"><span data-stu-id="9b08d-265">DscResourceDuration_d</span></span> |<span data-ttu-id="9b08d-266">O tempo, em segundos, em que o recurso de DSC foi executado.</span><span class="sxs-lookup"><span data-stu-id="9b08d-266">The time, in seconds, that the DSC resource ran.</span></span> |
| <span data-ttu-id="9b08d-267">SourceSystem</span><span class="sxs-lookup"><span data-stu-id="9b08d-267">SourceSystem</span></span> | <span data-ttu-id="9b08d-268">Como o Log Analytics coletou os dados.</span><span class="sxs-lookup"><span data-stu-id="9b08d-268">How Log Analytics collected the data.</span></span> <span data-ttu-id="9b08d-269">Sempre *Azure* para o Diagnóstico do Azure.</span><span class="sxs-lookup"><span data-stu-id="9b08d-269">Always *Azure* for Azure diagnostics.</span></span> |
| <span data-ttu-id="9b08d-270">ResourceId</span><span class="sxs-lookup"><span data-stu-id="9b08d-270">ResourceId</span></span> |<span data-ttu-id="9b08d-271">Especifica a conta de Automação do Azure.</span><span class="sxs-lookup"><span data-stu-id="9b08d-271">Specifies the Azure Automation account.</span></span> |
| <span data-ttu-id="9b08d-272">ResultDescription</span><span class="sxs-lookup"><span data-stu-id="9b08d-272">ResultDescription</span></span> | <span data-ttu-id="9b08d-273">A descrição para esta operação.</span><span class="sxs-lookup"><span data-stu-id="9b08d-273">The description for this operation.</span></span> |
| <span data-ttu-id="9b08d-274">SubscriptionId</span><span class="sxs-lookup"><span data-stu-id="9b08d-274">SubscriptionId</span></span> | <span data-ttu-id="9b08d-275">O GUID (ID de assinatura do Azure) para a Conta de automação.</span><span class="sxs-lookup"><span data-stu-id="9b08d-275">The Azure subscription Id (GUID) for the Automation account.</span></span> |
| <span data-ttu-id="9b08d-276">ResourceGroup</span><span class="sxs-lookup"><span data-stu-id="9b08d-276">ResourceGroup</span></span> | <span data-ttu-id="9b08d-277">Nome do grupo de recursos para a Conta de automação.</span><span class="sxs-lookup"><span data-stu-id="9b08d-277">Name of the resource group for the Automation account.</span></span> |
| <span data-ttu-id="9b08d-278">ResourceProvider</span><span class="sxs-lookup"><span data-stu-id="9b08d-278">ResourceProvider</span></span> | <span data-ttu-id="9b08d-279">MICROSOFT.AUTOMATION</span><span class="sxs-lookup"><span data-stu-id="9b08d-279">MICROSOFT.AUTOMATION</span></span> |
| <span data-ttu-id="9b08d-280">ResourceType</span><span class="sxs-lookup"><span data-stu-id="9b08d-280">ResourceType</span></span> | <span data-ttu-id="9b08d-281">AUTOMATIONACCOUNTS</span><span class="sxs-lookup"><span data-stu-id="9b08d-281">AUTOMATIONACCOUNTS</span></span> |
| <span data-ttu-id="9b08d-282">CorrelationId</span><span class="sxs-lookup"><span data-stu-id="9b08d-282">CorrelationId</span></span> |<span data-ttu-id="9b08d-283">O GUID que é a Id de correlação do relatório de conformidade.</span><span class="sxs-lookup"><span data-stu-id="9b08d-283">GUID that is the Correlation Id of the compliance report.</span></span> |

## <a name="summary"></a><span data-ttu-id="9b08d-284">Resumo</span><span class="sxs-lookup"><span data-stu-id="9b08d-284">Summary</span></span>

<span data-ttu-id="9b08d-285">Ao enviar seus dados do DSC de Automação para o Log Analytics, você poderá ter mais informações sobre o status de seus nós DSC:</span><span class="sxs-lookup"><span data-stu-id="9b08d-285">By sending your Automation DSC data to Log Analytics, you can get better insight into the status of your Automation DSC nodes by:</span></span>

* <span data-ttu-id="9b08d-286">Configurando alertas para notificá-lo quando houver um problema</span><span class="sxs-lookup"><span data-stu-id="9b08d-286">Setting up alerts to notify you when there is an issue</span></span>
* <span data-ttu-id="9b08d-287">Usando exibições personalizadas e consultas de pesquisa para visualizar os resultados de runbook, o status do trabalho de runbook e outros principais indicadores ou métricas relacionadas.</span><span class="sxs-lookup"><span data-stu-id="9b08d-287">Using custom views and search queries to visualize your runbook results, runbook job status, and other related key indicators or metrics.</span></span>  

<span data-ttu-id="9b08d-288">O Log Analytics oferece maior visibilidade operacional para os dados do DSC de Automação e pode ajudar a tratar de incidentes mais rapidamente.</span><span class="sxs-lookup"><span data-stu-id="9b08d-288">Log Analytics provides greater operational visibility to your Automation DSC data and can help address incidents more quickly.</span></span>  

## <a name="next-steps"></a><span data-ttu-id="9b08d-289">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="9b08d-289">Next steps</span></span>

* <span data-ttu-id="9b08d-290">Para saber mais sobre como construir consultas de pesquisa diferentes e examinar os logs de DSC de Automação com o Log Analytics, confira [Efetuar pesquisas no Log Analytics](../log-analytics/log-analytics-log-searches.md)</span><span class="sxs-lookup"><span data-stu-id="9b08d-290">To learn more about how to construct different search queries and review the Automation DSC logs with Log Analytics, see [Log searches in Log Analytics](../log-analytics/log-analytics-log-searches.md)</span></span>
* <span data-ttu-id="9b08d-291">Para saber mais sobre como usar a DSC de Automação do Azure, veja [Introdução à DSC de Automação do Azure](automation-dsc-getting-started.md)</span><span class="sxs-lookup"><span data-stu-id="9b08d-291">To learn more about using Azure Automation DSC, see [Getting started with Azure Automation DSC](automation-dsc-getting-started.md)</span></span>
* <span data-ttu-id="9b08d-292">Para saber mais sobre o Log Analytics do OMS e fontes de coleta de dados, confira [Coletar dados do Armazenamento do Azure na visão geral do Log Analytics](../log-analytics/log-analytics-azure-storage.md)</span><span class="sxs-lookup"><span data-stu-id="9b08d-292">To learn more about OMS Log Analytics and data collection sources, see [Collecting Azure storage data in Log Analytics overview](../log-analytics/log-analytics-azure-storage.md)</span></span>

