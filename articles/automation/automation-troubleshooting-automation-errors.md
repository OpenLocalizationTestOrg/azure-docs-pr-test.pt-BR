---
title: "Solução de problemas comuns de Automação do Azure | Microsoft Docs"
description: "Este artigo fornece informações para ajudar a solucionar problemas e corrigir erros comuns da Automação do Azure."
services: automation
documentationcenter: 
author: mgoedtel
manager: stevenka
editor: tysonn
tags: top-support-issue
keywords: "erro de automação, solução de problemas, problema"
ms.assetid: 5f3cfe61-70b0-4e9c-b892-d02daaeee07d
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 06/26/2017
ms.author: sngun; v-reagie
ms.openlocfilehash: 64548d91e98754210cc5185d9d759141cc0621d3
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/11/2017
---
# <a name="troubleshooting-common-issues-in-azure-automation"></a><span data-ttu-id="50960-104">Solução de problemas comuns na Automação do Azure</span><span class="sxs-lookup"><span data-stu-id="50960-104">Troubleshooting common issues in Azure Automation</span></span> 
<span data-ttu-id="50960-105">Este artigo fornece ajuda para solucionar erros comuns quem pode ser encontrados na Automação do Azure e sugere possíveis soluções para eles.</span><span class="sxs-lookup"><span data-stu-id="50960-105">This article provides help troubleshooting common errors you might experience in Azure Automation and suggests possible solutions to resolve them.</span></span>

## <a name="authentication-errors-when-working-with-azure-automation-runbooks"></a><span data-ttu-id="50960-106">Erros de autenticação ao trabalhar com runbooks da Automação do Azure</span><span class="sxs-lookup"><span data-stu-id="50960-106">Authentication errors when working with Azure Automation runbooks</span></span>
### <a name="scenario-sign-in-to-azure-account-failed"></a><span data-ttu-id="50960-107">Cenário: falha ao entrar na Conta do Azure</span><span class="sxs-lookup"><span data-stu-id="50960-107">Scenario: Sign in to Azure Account failed</span></span>
<span data-ttu-id="50960-108">**Erro:** você recebe o erro "Unknown_user_type: tipo de usuário desconhecido" ao trabalhar com os cmdlets Add-AzureAccount ou Login-AzureRmAccount.</span><span class="sxs-lookup"><span data-stu-id="50960-108">**Error:** You receive the error "Unknown_user_type: Unknown User Type" when working with the Add-AzureAccount or Login-AzureRmAccount cmdlets.</span></span>

<span data-ttu-id="50960-109">**Motivo do erro:** esse erro ocorrerá se o nome do ativo de credencial não for válido ou se o nome de usuário e senha que você usou para configurar o ativo de credencial de automação não forem válidos.</span><span class="sxs-lookup"><span data-stu-id="50960-109">**Reason for the error:** This error occurs if the credential asset name is not valid or if the username and password that you used to setup the Automation credential asset are not valid.</span></span>

<span data-ttu-id="50960-110">**Dicas de solução de problemas:** para determinar o que está errado, realize as seguintes etapas:</span><span class="sxs-lookup"><span data-stu-id="50960-110">**Troubleshooting tips:** In order to determine what's wrong, take the following steps:</span></span>  

1. <span data-ttu-id="50960-111">Verifique se não há caracteres especiais, inclusive o caractere **@** , no nome do ativo de credencial de Automação que você está usando para se conectar ao Azure.</span><span class="sxs-lookup"><span data-stu-id="50960-111">Make sure that you don’t have any special characters, including the **@** character in the Automation credential asset name that you are using to connect to Azure.</span></span>  
2. <span data-ttu-id="50960-112">Verifique se você pode usar o nome de usuário e a senha que estão armazenados na credencial da Automação do Azure no editor do ISE do PowerShell local.</span><span class="sxs-lookup"><span data-stu-id="50960-112">Check that you can use the username and password that are stored in the Azure Automation credential in your local PowerShell ISE editor.</span></span> <span data-ttu-id="50960-113">Para fazer isso, execute os seguintes cmdlets no ISE do PowerShell:</span><span class="sxs-lookup"><span data-stu-id="50960-113">You can do this by running the following cmdlets in the PowerShell ISE:</span></span>  

        $Cred = Get-Credential  
        #Using Azure Service Management   
        Add-AzureAccount –Credential $Cred  
        #Using Azure Resource Manager  
        Login-AzureRmAccount –Credential $Cred
3. <span data-ttu-id="50960-114">Se a autenticação falhar localmente, isso indicará que você não configurou corretamente as credenciais do Active Directory do Azure.</span><span class="sxs-lookup"><span data-stu-id="50960-114">If your authentication fails locally, this means that you haven’t set up your Azure Active Directory credentials properly.</span></span> <span data-ttu-id="50960-115">Confira a postagem de blog [Authenticating to Azure using Azure Active Directory](https://azure.microsoft.com/blog/azure-automation-authenticating-to-azure-using-azure-active-directory/) (Autenticação no Azure usando o Azure Active Directory) para configurar corretamente a conta do Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="50960-115">Refer to [Authenticating to Azure using Azure Active Directory](https://azure.microsoft.com/blog/azure-automation-authenticating-to-azure-using-azure-active-directory/) blog post to get the Azure Active Directory account set up correctly.</span></span>  

### <a name="scenario-unable-to-find-the-azure-subscription"></a><span data-ttu-id="50960-116">Cenário: não é possível localizar a assinatura do Azure</span><span class="sxs-lookup"><span data-stu-id="50960-116">Scenario: Unable to find the Azure subscription</span></span>
<span data-ttu-id="50960-117">**Erro:** você recebe o erro "A assinatura chamada ``<subscription name>`` não pode ser encontrada" ao trabalhar com os cmdlets Select-AzureSubscription ou Select-AzureRmSubscription.</span><span class="sxs-lookup"><span data-stu-id="50960-117">**Error:** You receive the error "The subscription named ``<subscription name>`` cannot be found" when working with the Select-AzureSubscription or Select-AzureRmSubscription cmdlets.</span></span>

<span data-ttu-id="50960-118">**Motivo do erro:** esse erro ocorrerá se o nome da assinatura não for válido ou se o usuário do Azure Active Directory que está tentando obter os detalhes da assinatura não estiver configurado como um administrador da assinatura.</span><span class="sxs-lookup"><span data-stu-id="50960-118">**Reason for the error:** This error occurs if the subscription name is not valid or if the Azure Active Directory user who is trying to get the subscription details is not configured as an admin of the subscription.</span></span>

<span data-ttu-id="50960-119">**Dicas de solução de problemas:** para determinar se você foi autenticado corretamente no Azure e se tem acesso à assinatura que está tentando selecionar, execute as seguintes etapas:</span><span class="sxs-lookup"><span data-stu-id="50960-119">**Troubleshooting tips:** In order to determine if you have properly authenticated to Azure and have access to the subscription you are trying to select, take the following steps:</span></span>  

1. <span data-ttu-id="50960-120">Certifique-se de execute o cmdlet **Add-AzureAccount** antes de executar o cmdlet **Select-AzureSubscription**.</span><span class="sxs-lookup"><span data-stu-id="50960-120">Make sure that you run the **Add-AzureAccount** before running the **Select-AzureSubscription** cmdlet.</span></span>  
2. <span data-ttu-id="50960-121">Se essa mensagem de erro ainda for exibida, modifique o código adicionando o cmdlet **Get-AzureSubscription** após o cmdlet **Add-AzureAccount** e então execute o código.</span><span class="sxs-lookup"><span data-stu-id="50960-121">If you still see this error message, modify your code by adding the **Get-AzureSubscription** cmdlet following the **Add-AzureAccount** cmdlet and then execute the code.</span></span>  <span data-ttu-id="50960-122">Agora, verifique se a saída de Get-AzureSubscription contém os detalhes de sua assinatura.</span><span class="sxs-lookup"><span data-stu-id="50960-122">Now verify if the output of Get-AzureSubscription contains your subscription details.</span></span>  

   * <span data-ttu-id="50960-123">Se você não encontrar detalhes da assinatura na saída, isso indicará que a assinatura ainda não foi inicializada.</span><span class="sxs-lookup"><span data-stu-id="50960-123">If you don't see any subscription details in the output, this means that the subscription isn’t initialized yet.</span></span>  
   * <span data-ttu-id="50960-124">Se encontrar os detalhes da assinatura na saída, confirme se está usando o nome ou a ID corretos da assinatura com o cmdlet **Select-AzureSubscription** .</span><span class="sxs-lookup"><span data-stu-id="50960-124">If you do see the subscription details in the output, confirm that you are using the correct subscription name or ID with the **Select-AzureSubscription** cmdlet.</span></span>   

### <a name="scenario-authentication-to-azure-failed-because-multi-factor-authentication-is-enabled"></a><span data-ttu-id="50960-125">Cenário: falha de autenticação no Azure porque a autenticação multifator está habilitada</span><span class="sxs-lookup"><span data-stu-id="50960-125">Scenario: Authentication to Azure failed because multi-factor authentication is enabled</span></span>
<span data-ttu-id="50960-126">**Erro:** você recebe o erro "Add-AzureAccount: AADSTS50079: o registro de autenticação forte (prova) é necessário" ao fazer a autenticação no Azure com seu nome de usuário e sua senha do Azure.</span><span class="sxs-lookup"><span data-stu-id="50960-126">**Error:** You receive the error “Add-AzureAccount: AADSTS50079: Strong authentication enrollment (proof-up) is required” when authenticating to Azure with your Azure username and password.</span></span>

<span data-ttu-id="50960-127">**Motivo do erro:** se você tiver a autenticação multifator em sua conta do Azure, não poderá usar um usuário do Azure Active Directory para se autenticar no Azure.</span><span class="sxs-lookup"><span data-stu-id="50960-127">**Reason for the error:** If you have multi-factor authentication on your Azure account, you can't use an Azure Active Directory user to authenticate to Azure.</span></span>  <span data-ttu-id="50960-128">Em vez disso, você precisa usar um certificado ou uma entidade de serviço para se autenticar no Azure.</span><span class="sxs-lookup"><span data-stu-id="50960-128">Instead, you need to use a certificate or a service principal to authenticate to Azure.</span></span>

<span data-ttu-id="50960-129">**Dicas de solução de problemas:** para usar um certificado com os cmdlets do Azure Service Management, veja [criando e adicionando um certificado para gerenciar os serviços do Azure.](http://blogs.technet.com/b/orchestrator/archive/2014/04/11/managing-azure-services-with-the-microsoft-azure-automation-preview-service.aspx)</span><span class="sxs-lookup"><span data-stu-id="50960-129">**Troubleshooting tips:** To use a certificate with the Azure Service Management cmdlets, refer to [creating and adding a certificate to manage Azure services.](http://blogs.technet.com/b/orchestrator/archive/2014/04/11/managing-azure-services-with-the-microsoft-azure-automation-preview-service.aspx)</span></span> <span data-ttu-id="50960-130">Para usar uma entidade de serviço com os cmdlets do Azure Resource Manager, veja [criando entidades de serviço usando o portal do Azure](../azure-resource-manager/resource-group-create-service-principal-portal.md) e [autenticando uma entidade de serviço com o Azure Resource Manager.](../azure-resource-manager/resource-group-authenticate-service-principal.md)</span><span class="sxs-lookup"><span data-stu-id="50960-130">To use a service principal with Azure Resource Manager cmdlets, refer to [creating service principal using Azure portal](../azure-resource-manager/resource-group-create-service-principal-portal.md) and [authenticating a service principal with Azure Resource Manager.](../azure-resource-manager/resource-group-authenticate-service-principal.md)</span></span>

## <a name="common-errors-when-working-with-runbooks"></a><span data-ttu-id="50960-131">Erros comuns ao trabalhar com runbooks</span><span class="sxs-lookup"><span data-stu-id="50960-131">Common errors when working with runbooks</span></span>
### <a name="scenario-the-runbook-job-start-was-attempted-three-times-but-it-failed-to-start-each-time"></a><span data-ttu-id="50960-132">Cenário: foram feitas três tentativas de início do trabalho de runbook, mas todas elas falharam</span><span class="sxs-lookup"><span data-stu-id="50960-132">Scenario: The runbook job start was attempted three times, but it failed to start each time</span></span>
<span data-ttu-id="50960-133">**Erro:** seu runbook falha com o erro "O trabalho foi tentado três vezes, mas falhou".</span><span class="sxs-lookup"><span data-stu-id="50960-133">**Error:** Your runbook fails with the error "“The job was tried three times but it failed."</span></span>

<span data-ttu-id="50960-134">**Motivo do erro:** esse erro pode ser causado pelos seguintes motivos:</span><span class="sxs-lookup"><span data-stu-id="50960-134">**Reason for the error:** This error can be caused by the following reasons:</span></span>  

1. <span data-ttu-id="50960-135">Limite de Memória.</span><span class="sxs-lookup"><span data-stu-id="50960-135">Memory Limit.</span></span>  <span data-ttu-id="50960-136">Documentamos limites na quantidade de memória alocada a [Limites do serviço de automação](../azure-subscription-service-limits.md#automation-limits) da Área Restrita, de modo que um trabalho pode falhar se estiver usando mais de 400 MB de memória.</span><span class="sxs-lookup"><span data-stu-id="50960-136">We have documented limits on how much memory allocated to a Sandbox  [Automation service limits](../azure-subscription-service-limits.md#automation-limits) so a job may fail it if is using more than 400 MB of memory.</span></span> 

2. <span data-ttu-id="50960-137">Módulo Incompatível.</span><span class="sxs-lookup"><span data-stu-id="50960-137">Module Incompatible.</span></span>  <span data-ttu-id="50960-138">Isso poderá ocorrer se as dependências do módulo não estiverem corretas, caso em que seu runbook normalmente retornará uma mensagem de “Comando não encontrado” ou “Não é possível associar o parâmetro”.</span><span class="sxs-lookup"><span data-stu-id="50960-138">This can occur if module dependencies are not correct and if they are not, your runbook will typically return a “Command not found” or "Cannot bind parameter" message.</span></span> 

<span data-ttu-id="50960-139">**Dicas de solução de problemas:** qualquer uma das soluções a seguir corrigirá o problema:</span><span class="sxs-lookup"><span data-stu-id="50960-139">**Troubleshooting tips:** Any of the following solutions will fix the problem:</span></span>  

* <span data-ttu-id="50960-140">Métodos sugeridos para trabalhar dentro do limite de memória são dividir a carga de trabalho entre vários runbooks, não processar muitos dados na memória, não gravar saída desnecessária de seus runbooks nem considerar quantos pontos de verificação você grava nos runbooks de fluxo de trabalho do PowerShell.</span><span class="sxs-lookup"><span data-stu-id="50960-140">Suggested methods to work within the memory limit are to split the workload between multiple runbooks, not process as much data in memory, not to write unnecessary output from your runbooks, or consider how many checkpoints you write into your PowerShell workflow runbooks.</span></span>  

* <span data-ttu-id="50960-141">Você precisa atualizar os módulos do Azure seguindo as etapas [Como atualizar os módulos do Azure PowerShell na automação do Azure](automation-update-azure-modules.md).</span><span class="sxs-lookup"><span data-stu-id="50960-141">You need to update your Azure modules by following the steps [How to update Azure PowerShell modules in Azure Automation](automation-update-azure-modules.md).</span></span>  


### <a name="scenario-runbook-fails-because-of-deserialized-object"></a><span data-ttu-id="50960-142">Cenário: O Runbook falha devido a objeto desserializado</span><span class="sxs-lookup"><span data-stu-id="50960-142">Scenario: Runbook fails because of deserialized object</span></span>
<span data-ttu-id="50960-143">**Erro:** o runbook falha com o erro "Não é possível associar o parâmetro ``<ParameterName>``.</span><span class="sxs-lookup"><span data-stu-id="50960-143">**Error:** Your runbook fails with the error "Cannot bind parameter ``<ParameterName>``.</span></span> <span data-ttu-id="50960-144">Não é possível converter o valor ``<ParameterType>`` do tipo ``<ParameterType>`` Desserializado no tipo ``<ParameterType>``".</span><span class="sxs-lookup"><span data-stu-id="50960-144">Cannot convert the ``<ParameterType>`` value of type Deserialized ``<ParameterType>`` to type ``<ParameterType>``".</span></span>

<span data-ttu-id="50960-145">**Motivo do erro:** se o runbook for um Fluxo de Trabalho do PowerShell, ele armazenará objetos complexos em um formato desserializado para que o estado do runbook persista se o fluxo de trabalho for suspenso.</span><span class="sxs-lookup"><span data-stu-id="50960-145">**Reason for the error:** If your runbook is a PowerShell Workflow, it stores complex objects in a deserialized format in order to persist your runbook state if the workflow is suspended.</span></span>  

<span data-ttu-id="50960-146">**Dicas de solução de problemas:**</span><span class="sxs-lookup"><span data-stu-id="50960-146">**Troubleshooting tips:**</span></span>  
<span data-ttu-id="50960-147">qualquer uma das três seguintes soluções corrigirá o problema:</span><span class="sxs-lookup"><span data-stu-id="50960-147">Any of the following three solutions will fix this problem:</span></span>

1. <span data-ttu-id="50960-148">Se você estiver direcionando objetos complexos de um cmdlet para outro, encapsule os cmdlets em um InlineScript.</span><span class="sxs-lookup"><span data-stu-id="50960-148">If you are piping complex objects from one cmdlet to another, wrap these cmdlets in an InlineScript.</span></span>  
2. <span data-ttu-id="50960-149">Passe o nome ou o valor necessário do objeto complexo em vez de passar o objeto inteiro.</span><span class="sxs-lookup"><span data-stu-id="50960-149">Pass the name or value that you need from the complex object instead of passing the entire object.</span></span>  
3. <span data-ttu-id="50960-150">Use um runbook do PowerShell em vez de um runbook de Fluxo de Trabalho do PowerShell.</span><span class="sxs-lookup"><span data-stu-id="50960-150">Use a PowerShell runbook instead of a PowerShell Workflow runbook.</span></span>  

### <a name="scenario-runbook-job-failed-because-the-allocated-quota-exceeded"></a><span data-ttu-id="50960-151">Cenário: falha no trabalho de runbook porque a cota alocada foi excedida</span><span class="sxs-lookup"><span data-stu-id="50960-151">Scenario: Runbook job failed because the allocated quota exceeded</span></span>
<span data-ttu-id="50960-152">**Erro:** o trabalho de runbook falha com o erro "A cota do tempo de execução do trabalho total mensal foi atingida para esta assinatura".</span><span class="sxs-lookup"><span data-stu-id="50960-152">**Error:** Your runbook job fails with the error "The quota for the monthly total job run time has been reached for this subscription".</span></span>

<span data-ttu-id="50960-153">**Motivo do erro:** esse erro ocorre quando a execução do trabalho excede a cota gratuita de 500 minutos para a conta.</span><span class="sxs-lookup"><span data-stu-id="50960-153">**Reason for the error:** This error occurs when the job execution exceeds the 500-minute free quota for your account.</span></span> <span data-ttu-id="50960-154">A cota se aplica a todos os tipos de tarefas de execução de trabalhos, como testar um trabalho, iniciar um trabalho do portal, executar um trabalho usando webhooks e agendar um trabalho para ser executado usando o portal do Azure ou seu datacenter.</span><span class="sxs-lookup"><span data-stu-id="50960-154">This quota applies to all types of job execution tasks such as testing a job, starting a job from the portal, executing a job by using webhooks and scheduling a job to execute by using either the Azure portal or in your datacenter.</span></span> <span data-ttu-id="50960-155">Para saber mais sobre os preços para Automação, confira os [Preços de automação](https://azure.microsoft.com/pricing/details/automation/).</span><span class="sxs-lookup"><span data-stu-id="50960-155">To learn more about pricing for Automation see [Automation pricing](https://azure.microsoft.com/pricing/details/automation/).</span></span>

<span data-ttu-id="50960-156">**Dicas de solução de problemas:** para usar mais de 500 minutos de processamento por mês, você precisará alterar a assinatura do tipo Gratuito para o tipo Básico.</span><span class="sxs-lookup"><span data-stu-id="50960-156">**Troubleshooting tips:** If you want to use more than 500 minutes of processing per month you will need to change your subscription from the Free tier to the Basic tier.</span></span> <span data-ttu-id="50960-157">Para atualizar para o tipo Básico, execute as seguintes etapas:</span><span class="sxs-lookup"><span data-stu-id="50960-157">You can upgrade to the Basic tier by taking the following steps:</span></span>  

1. <span data-ttu-id="50960-158">Entre em sua assinatura do Azure</span><span class="sxs-lookup"><span data-stu-id="50960-158">Sign in to your Azure subscription</span></span>  
2. <span data-ttu-id="50960-159">Selecione a conta de Automação que deseja atualizar</span><span class="sxs-lookup"><span data-stu-id="50960-159">Select the Automation account you wish to upgrade</span></span>  
3. <span data-ttu-id="50960-160">Clique em **Configurações** > **Tipo de preço e Uso** > **Tipo de preço**</span><span class="sxs-lookup"><span data-stu-id="50960-160">Click on **Settings** > **Pricing tier and Usage** > **Pricing tier**</span></span>  
4. <span data-ttu-id="50960-161">Na folha **Escolha seu tipo de preço**, selecione **Básico**</span><span class="sxs-lookup"><span data-stu-id="50960-161">On the **Choose your pricing tier** blade, select **Basic**</span></span>    

### <a name="scenario-cmdlet-not-recognized-when-executing-a-runbook"></a><span data-ttu-id="50960-162">Cenário: cmdlet não reconhecido ao se executar um runbook</span><span class="sxs-lookup"><span data-stu-id="50960-162">Scenario: Cmdlet not recognized when executing a runbook</span></span>
<span data-ttu-id="50960-163">**Erro:** falha no trabalho de runbook com o erro "``<cmdlet name>``: o termo ``<cmdlet name>`` não é reconhecido como o nome de um cmdlet, uma função, um arquivo de script ou um programa operável."</span><span class="sxs-lookup"><span data-stu-id="50960-163">**Error:** Your runbook job fails with the error "``<cmdlet name>``: The term ``<cmdlet name>`` is not recognized as the name of a cmdlet, function, script file, or operable program."</span></span>

<span data-ttu-id="50960-164">**Motivo do erro:** esse erro ocorre quando o mecanismo do PowerShell não consegue localizar o cmdlet que você está usando no runbook.</span><span class="sxs-lookup"><span data-stu-id="50960-164">**Reason for the error:** This error is caused when the PowerShell engine cannot find the cmdlet you are using in your runbook.</span></span>  <span data-ttu-id="50960-165">Isso pode ocorrer porque o módulo que contém o cmdlet está ausente da conta, há um conflito de nomes com um nome de runbook ou o cmdlet também existe em outro módulo e a Automação não pode resolver o nome.</span><span class="sxs-lookup"><span data-stu-id="50960-165">This could be because the module containing the cmdlet is missing from the account, there is a name conflict with a runbook name, or the cmdlet also exists in another module and Automation cannot resolve the name.</span></span>

<span data-ttu-id="50960-166">**Dicas de solução de problemas:** qualquer uma das soluções a seguir corrigirá o problema:</span><span class="sxs-lookup"><span data-stu-id="50960-166">**Troubleshooting tips:** Any of the following solutions will fix the problem:</span></span>  

* <span data-ttu-id="50960-167">Verifique se você inseriu o nome do cmdlet corretamente.</span><span class="sxs-lookup"><span data-stu-id="50960-167">Check that you have entered the cmdlet name correctly.</span></span>  
* <span data-ttu-id="50960-168">Verifique se o cmdlet existe em sua conta de Automação e se não há conflitos.</span><span class="sxs-lookup"><span data-stu-id="50960-168">Make sure the cmdlet exists in your Automation account and that there are no conflicts.</span></span> <span data-ttu-id="50960-169">Para verificar se o cmdlet está presente, abra um runbook no modo de edição e pesquise o cmdlet que você deseja localizar na biblioteca ou execute **Get-Command ``<CommandName>``**.</span><span class="sxs-lookup"><span data-stu-id="50960-169">To verify if the cmdlet is present, open a runbook in edit mode and search for the cmdlet you want to find in the library or run **Get-Command ``<CommandName>``**.</span></span>  <span data-ttu-id="50960-170">Após validar que o cmdlet está disponível para a conta e que não há conflitos de nomes com outros cmdlets ou runbooks, adicione-o à tela e verifique se está usando um parâmetro válido definido no runbook.</span><span class="sxs-lookup"><span data-stu-id="50960-170">Once you have validated that the cmdlet is available to the account, and that there are no name conflicts with other cmdlets or runbooks, add it to the canvas and ensure that you are using a valid parameter set in your runbook.</span></span>  
* <span data-ttu-id="50960-171">Se houver um conflito de nomes e o cmdlet estiver disponível em dois módulos diferentes, você poderá resolver isso usando o nome totalmente qualificado do cmdlet.</span><span class="sxs-lookup"><span data-stu-id="50960-171">If you do have a name conflict and the cmdlet is available in two different modules, you can resolve this by using the fully qualified name for the cmdlet.</span></span> <span data-ttu-id="50960-172">Por exemplo, você pode usar **NomeDoMódulo\NomeDoCmdlet**.</span><span class="sxs-lookup"><span data-stu-id="50960-172">For example, you can use **ModuleName\CmdletName**.</span></span>  
* <span data-ttu-id="50960-173">Se você está executando o runbook local em um grupo do Hybrid Worker, certifique-se de que o módulo/cmdlet esteja instalado no computador que hospeda o Hybrid Worker.</span><span class="sxs-lookup"><span data-stu-id="50960-173">If you are executing the runbook on-premises in a hybrid worker group, then make sure that the module/cmdlet is installed on the machine that hosts the hybrid worker.</span></span>

### <a name="scenario-a-long-running-runbook-consistently-fails-with-the-exception-the-job-cannot-continue-running-because-it-was-repeatedly-evicted-from-the-same-checkpoint"></a><span data-ttu-id="50960-174">Cenário: um runbook de execução longa falha consistentemente com a exceção: "O trabalho não pode continuar em execução porque foi removido repetidamente do mesmo ponto de verificação".</span><span class="sxs-lookup"><span data-stu-id="50960-174">Scenario: A long running runbook consistently fails with the exception: "The job cannot continue running because it was repeatedly evicted from the same checkpoint".</span></span>
<span data-ttu-id="50960-175">**Motivo do erro:** isso faz parte do comportamento do design devido ao monitoramento de "Fração Justa" de processos na Automação do Azure, que suspende automaticamente um runbook caso ele esteja sendo executado por mais de três horas.</span><span class="sxs-lookup"><span data-stu-id="50960-175">**Reason for the error:** This is by design behavior due to the "Fair Share" monitoring of processes within Azure Automation, which automatically suspends a runbook if it executes longer than 3 hours.</span></span> <span data-ttu-id="50960-176">No entanto, a mensagem de erro retornada não oferece opções sobre “o que fazer agora”.</span><span class="sxs-lookup"><span data-stu-id="50960-176">However, the error message returned does not provide "what next" options.</span></span> <span data-ttu-id="50960-177">Um runbook pode ser suspenso por vários motivos.</span><span class="sxs-lookup"><span data-stu-id="50960-177">A runbook can be suspended for a number of reasons.</span></span> <span data-ttu-id="50960-178">As suspensões acontecem principalmente devido a erros.</span><span class="sxs-lookup"><span data-stu-id="50960-178">Suspends happen mostly due to errors.</span></span> <span data-ttu-id="50960-179">Por exemplo, uma exceção não tratada em um runbook, uma falha de rede ou uma falha no Runbook Worker que estiver executando o runbook farão com que o runbook seja suspenso e inicie do último ponto de verificação quando retomado.</span><span class="sxs-lookup"><span data-stu-id="50960-179">For example, an uncaught exception in a runbook, a network failure, or a crash on the Runbook Worker running the runbook, will all cause the runbook to be suspended and start from its last checkpoint when resumed.</span></span>

<span data-ttu-id="50960-180">**Dicas de solução de problemas:** a solução documentada para evitar esse problema é usar Pontos de Verificação em um fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="50960-180">**Troubleshooting tips:** The documented solution to avoid this issue is to use Checkpoints in a workflow.</span></span>  <span data-ttu-id="50960-181">Para saber mais, consulte [Noções Básicas dos Fluxos de Trabalho do PowerShell](automation-powershell-workflow.md#checkpoints).</span><span class="sxs-lookup"><span data-stu-id="50960-181">To learn more refer to [Learning PowerShell Workflows](automation-powershell-workflow.md#checkpoints).</span></span>  <span data-ttu-id="50960-182">Veja uma explicação mais detalhada sobre a “Fração Justa” e sobre o Ponto de Verificação neste artigo de blog: [Uso de Pontos de Verificação em Runbooks](https://azure.microsoft.com/en-us/blog/azure-automation-reliable-fault-tolerant-runbook-execution-using-checkpoints/).</span><span class="sxs-lookup"><span data-stu-id="50960-182">A more thorough explanation of "Fair Share" and Checkpoint can be found in this blog article [Using Checkpoints in Runbooks](https://azure.microsoft.com/en-us/blog/azure-automation-reliable-fault-tolerant-runbook-execution-using-checkpoints/).</span></span>

## <a name="common-errors-when-importing-modules"></a><span data-ttu-id="50960-183">Erros comuns durante a importação de módulos</span><span class="sxs-lookup"><span data-stu-id="50960-183">Common errors when importing modules</span></span>
### <a name="scenario-module-fails-to-import-or-cmdlets-cant-be-executed-after-importing"></a><span data-ttu-id="50960-184">Cenário: falha de importação de módulo ou os cmdlets não podem ser executados após a importação</span><span class="sxs-lookup"><span data-stu-id="50960-184">Scenario: Module fails to import or cmdlets can't be executed after importing</span></span>
<span data-ttu-id="50960-185">**Erro:** um módulo falha ao importar ou importa com êxito, mas nenhum cmdlet é extraído.</span><span class="sxs-lookup"><span data-stu-id="50960-185">**Error:** A module fails to import or imports successfully, but no cmdlets are extracted.</span></span>

<span data-ttu-id="50960-186">**Motivo do erro:** alguns motivos comuns pelos quais um módulo pode não realizar a importação com êxito para a Automação do Azure são:</span><span class="sxs-lookup"><span data-stu-id="50960-186">**Reason for the error:** Some common reasons that a module might not successfully import to Azure Automation are:</span></span>  

* <span data-ttu-id="50960-187">A estrutura não corresponde à estrutura em que a Automação precisa estar.</span><span class="sxs-lookup"><span data-stu-id="50960-187">The structure does not match the structure that Automation needs it to be in.</span></span>  
* <span data-ttu-id="50960-188">O módulo é dependente de outro módulo que não foi implantado para sua conta de Automação.</span><span class="sxs-lookup"><span data-stu-id="50960-188">The module is dependent on another module that has not been deployed to your Automation account.</span></span>  
* <span data-ttu-id="50960-189">O módulo não tem suas dependências na pasta.</span><span class="sxs-lookup"><span data-stu-id="50960-189">The module is missing its dependencies in the folder.</span></span>  
* <span data-ttu-id="50960-190">O cmdlet **New-AzureRmAutomationModule** está sendo usado para carregar o módulo, e você não forneceu o caminho de armazenamento completo ou não carregou o módulo usando uma URL acessível publicamente.</span><span class="sxs-lookup"><span data-stu-id="50960-190">The **New-AzureRmAutomationModule** cmdlet is being used to upload the module, and you have not given the full storage path or have not loaded the module by using a publicly accessible URL.</span></span>  

<span data-ttu-id="50960-191">**Dicas de solução de problemas:**</span><span class="sxs-lookup"><span data-stu-id="50960-191">**Troubleshooting tips:**</span></span>  
<span data-ttu-id="50960-192">qualquer uma das soluções a seguir corrigirá o problema:</span><span class="sxs-lookup"><span data-stu-id="50960-192">Any of the following solutions will fix the problem:</span></span>  

* <span data-ttu-id="50960-193">Certifique-se de que o módulo segue o formato a seguir:</span><span class="sxs-lookup"><span data-stu-id="50960-193">Make sure that the module follows the following format:</span></span>  
  <span data-ttu-id="50960-194">NomeMódulo.Zip **->** NomeMódulo ou Número de Versão **->** (NomeMódulo.psm1, NomeMódulo.psd1)</span><span class="sxs-lookup"><span data-stu-id="50960-194">ModuleName.Zip **->** ModuleName or Version Number **->** (ModuleName.psm1, ModuleName.psd1)</span></span>
* <span data-ttu-id="50960-195">Abra o arquivo .psd1 e veja se o módulo tem dependências.</span><span class="sxs-lookup"><span data-stu-id="50960-195">Open the .psd1 file and see if the module has any dependencies.</span></span>  <span data-ttu-id="50960-196">Se tiver, carregue esses módulos para a conta de Automação.</span><span class="sxs-lookup"><span data-stu-id="50960-196">If it does, upload these modules to the Automation account.</span></span>  
* <span data-ttu-id="50960-197">Verifique se quaisquer .dlls referenciadas estão presentes na pasta do módulo.</span><span class="sxs-lookup"><span data-stu-id="50960-197">Make sure that any referenced .dlls are present in the module folder.</span></span>  

## <a name="common-errors-when-working-with-desired-state-configuration-dsc"></a><span data-ttu-id="50960-198">Erros comuns ao trabalhar com DSC (Configuração de estado desejado)</span><span class="sxs-lookup"><span data-stu-id="50960-198">Common errors when working with Desired State Configuration (DSC)</span></span>
### <a name="scenario-node-is-in-failed-status-with-a-not-found-error"></a><span data-ttu-id="50960-199">Cenário: o nó está com um status de falha e um erro "Não encontrado"</span><span class="sxs-lookup"><span data-stu-id="50960-199">Scenario: Node is in failed status with a “Not found” error</span></span>
<span data-ttu-id="50960-200">**Erro:** o nó apresenta um relatório de status **Falha** contendo o erro "A tentativa de obter a ação do servidor https://``<url>``//accounts/``<account-id>``/Nodes(AgentId=``<agent-id>``)/GetDscAction falhou porque não foi possível encontrar uma configuração válida ``<guid>``."</span><span class="sxs-lookup"><span data-stu-id="50960-200">**Error:** The node has a report with **Failed** status and containing the error "The attempt to get the action from server https://``<url>``//accounts/``<account-id>``/Nodes(AgentId=``<agent-id>``)/GetDscAction failed because a valid configuration ``<guid>`` cannot be found.”</span></span>

<span data-ttu-id="50960-201">**Motivo do erro:** esse erro normalmente ocorre quando o nó é atribuído a um nome de configuração (por exemplo, ABC) em vez de a um nome de configuração de nó (por exemplo, ABC.WebServer).</span><span class="sxs-lookup"><span data-stu-id="50960-201">**Reason for the error:** This error typically occurs when the node is assigned to a configuration name (e.g. ABC) instead of a node configuration name (e.g. ABC.WebServer).</span></span>  

<span data-ttu-id="50960-202">**Dicas de solução de problemas:**</span><span class="sxs-lookup"><span data-stu-id="50960-202">**Troubleshooting tips:**</span></span>  

* <span data-ttu-id="50960-203">Verifique se você está atribuindo o nó com o "nome de configuração de nó" e não o "nome de configuração".</span><span class="sxs-lookup"><span data-stu-id="50960-203">Make sure that you are assigning the node with "node configuration name" and not the "configuration name".</span></span>  
* <span data-ttu-id="50960-204">Você pode atribuir uma configuração de nó para um nó usando o Portal do Azure ou com um cmdlet do PowerShell.</span><span class="sxs-lookup"><span data-stu-id="50960-204">You can assign a node configuration to a node using Azure portal or with a PowerShell cmdlet.</span></span>

  * <span data-ttu-id="50960-205">Para atribuir uma configuração de nó a um nó que usa o portal do Azure, abra a folha **Nós de DSC**, selecione um nó e clique no botão **Atribuir configuração de nó**.</span><span class="sxs-lookup"><span data-stu-id="50960-205">In order to assign a node configuration to a node using Azure portal, open the **DSC Nodes** blade, then select a node and click on **Assign node configuration** button.</span></span>  
  * <span data-ttu-id="50960-206">Para atribuir uma configuração de nó a um nó usando um cmdlet do PowerShell, use o cmdlet **Set-AzureRmAutomationDscNode**</span><span class="sxs-lookup"><span data-stu-id="50960-206">In order to assign a node configuration to a node using PowerShell cmdlet, use **Set-AzureRmAutomationDscNode** cmdlet</span></span>

### <a name="scenario--no-node-configurations-mof-files-were-produced-when-a-configuration-is-compiled"></a><span data-ttu-id="50960-207">Cenário: nenhuma configuração de nó (arquivos MOF) foi produzida quando uma compilação foi compilada</span><span class="sxs-lookup"><span data-stu-id="50960-207">Scenario:  No node configurations (MOF files) were produced when a configuration is compiled</span></span>
<span data-ttu-id="50960-208">**Erro:** seu trabalho de compilação de DSC foi suspenso com o seguinte erro: "Compilação concluída com êxito, mas nenhum arquivo .mofs de configuração de nó foi gerado".</span><span class="sxs-lookup"><span data-stu-id="50960-208">**Error:** Your DSC compilation job suspends with the error: “Compilation completed successfully, but no node configuration .mofs were generated”.</span></span>

<span data-ttu-id="50960-209">**Motivo do erro:** quando a expressão após a palavra-chave **Node** na configuração de DSC for avaliada como $null, nenhuma configuração de nó será produzida.</span><span class="sxs-lookup"><span data-stu-id="50960-209">**Reason for the error:** When the expression following the **Node** keyword in the DSC configuration evaluates to $null then no node configurations will be produced.</span></span>    

<span data-ttu-id="50960-210">**Dicas de solução de problemas:**</span><span class="sxs-lookup"><span data-stu-id="50960-210">**Troubleshooting tips:**</span></span>  
<span data-ttu-id="50960-211">qualquer uma das soluções a seguir corrigirá o problema:</span><span class="sxs-lookup"><span data-stu-id="50960-211">Any of the following solutions will fix the problem:</span></span>  

* <span data-ttu-id="50960-212">Verifique se a expressão ao lado da palavra-chave **Node** na definição de configuração não está sendo avaliada como $null.</span><span class="sxs-lookup"><span data-stu-id="50960-212">Make sure that the expression next to the **Node** keyword in the configuration definition is not evaluating to $null.</span></span>  
* <span data-ttu-id="50960-213">Se você estiver passando ConfigurationData ao compilar a configuração, certifique-se de que esteja passando os valores esperados e que a configuração exige de [ConfigurationData](automation-dsc-compile.md#configurationdata).</span><span class="sxs-lookup"><span data-stu-id="50960-213">If you are passing ConfigurationData when compiling the configuration, make sure that you are passing the expected values that the configuration requires from [ConfigurationData](automation-dsc-compile.md#configurationdata).</span></span>

### <a name="scenario--the-dsc-node-report-becomes-stuck-in-progress-state"></a><span data-ttu-id="50960-214">Cenário: o relatório de nó de DSC fica preso no estado "em andamento"</span><span class="sxs-lookup"><span data-stu-id="50960-214">Scenario:  The DSC node report becomes stuck “in progress” state</span></span>
<span data-ttu-id="50960-215">**Erro:** o Agente DSC gera "Nenhuma instância encontrada com os valores de propriedade especificados".</span><span class="sxs-lookup"><span data-stu-id="50960-215">**Error:** DSC Agent outputs “No instance found with given property values.”</span></span>

<span data-ttu-id="50960-216">**Motivo do erro:** você atualizou sua versão do WMF e corrompeu o WMI.</span><span class="sxs-lookup"><span data-stu-id="50960-216">**Reason for the error:** You have upgraded your WMF version and have corrupted WMI.</span></span>  

<span data-ttu-id="50960-217">**Dicas de solução de problemas:** siga as instruções em [Problemas conhecidos e limitações do DSC](https://msdn.microsoft.com/powershell/wmf/5.0/limitation_dsc) para corrigir o problema.</span><span class="sxs-lookup"><span data-stu-id="50960-217">**Troubleshooting tips:** Follow the instructions in the [DSC known issues and limitations](https://msdn.microsoft.com/powershell/wmf/5.0/limitation_dsc) to fix the issue.</span></span>

### <a name="scenario--unable-to-use-a-credential-in-a-dsc-configuration"></a><span data-ttu-id="50960-218">Cenário: não é possível usar uma credencial em uma configuração de DSC</span><span class="sxs-lookup"><span data-stu-id="50960-218">Scenario:  Unable to use a credential in a DSC configuration</span></span>
<span data-ttu-id="50960-219">**Erro:** seu trabalho de compilação do DSC foi suspenso com o seguinte erro: "Erro System.InvalidOperationException ao processar a propriedade 'Credential' do tipo ``<some resource name>``: a conversão e o armazenamento de uma senha criptografada como texto sem formatação só será permitida se PSDscAllowPlainTextPassword for definido como verdadeiro".</span><span class="sxs-lookup"><span data-stu-id="50960-219">**Error:** Your DSC compilation job was suspended with the error: “System.InvalidOperationException error processing property 'Credential' of type ``<some resource name>``: Converting and storing an encrypted password as plaintext is allowed only if PSDscAllowPlainTextPassword is set to true”.</span></span>

<span data-ttu-id="50960-220">**Motivo do erro:** você usou uma credencial em uma configuração, mas não forneceu os **ConfigurationData** adequados para definir **PSDscAllowPlainTextPassword** como true para cada configuração de nó.</span><span class="sxs-lookup"><span data-stu-id="50960-220">**Reason for the error:** You have used a credential in a configuration but didn’t provide proper **ConfigurationData** to set **PSDscAllowPlainTextPassword** to true for each node configuration.</span></span>  

<span data-ttu-id="50960-221">**Dicas de solução de problemas:**</span><span class="sxs-lookup"><span data-stu-id="50960-221">**Troubleshooting tips:**</span></span>  

* <span data-ttu-id="50960-222">Transmita os **ConfigurationData** adequados para definir **PSDscAllowPlainTextPassword** como true cada configuração de nó mencionada na configuração.</span><span class="sxs-lookup"><span data-stu-id="50960-222">Make sure to pass in the proper **ConfigurationData** to set **PSDscAllowPlainTextPassword** to true for each node configuration mentioned in the configuration.</span></span> <span data-ttu-id="50960-223">Para saber mais, consulte [ativos no DSC de Automação do Azure](automation-dsc-compile.md#assets).</span><span class="sxs-lookup"><span data-stu-id="50960-223">For more information, refer to [assets in Azure Automation DSC](automation-dsc-compile.md#assets).</span></span>

## <a name="next-steps"></a><span data-ttu-id="50960-224">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="50960-224">Next steps</span></span>
<span data-ttu-id="50960-225">Se tiver seguido as etapas de solução de problemas acima e não tiver encontrado a resposta, examine as opções de suporte adicionais abaixo.</span><span class="sxs-lookup"><span data-stu-id="50960-225">If you have followed the troubleshooting steps above and can't find the answer, you can review the additional support options below.</span></span>

* <span data-ttu-id="50960-226">Obter ajuda de especialistas do Azure.</span><span class="sxs-lookup"><span data-stu-id="50960-226">Get help from Azure experts.</span></span> <span data-ttu-id="50960-227">Envie seu problema para os [fóruns do Azure no MSDN ou do Stack Overflow](https://azure.microsoft.com/support/forums/).</span><span class="sxs-lookup"><span data-stu-id="50960-227">Submit your issue to the [MSDN Azure or Stack Overflow forums.](https://azure.microsoft.com/support/forums/).</span></span>
* <span data-ttu-id="50960-228">Registrar um incidente de suporte do Azure.</span><span class="sxs-lookup"><span data-stu-id="50960-228">File an Azure support incident.</span></span> <span data-ttu-id="50960-229">Vá até o [Site de Suporte do Azure](https://azure.microsoft.com/support/options/) e clique em **Obter suporte** em **Suporte técnico e de cobrança**.</span><span class="sxs-lookup"><span data-stu-id="50960-229">Go to the [Azure Support site](https://azure.microsoft.com/support/options/) and click **Get support** under **Technical and billing support**.</span></span>
* <span data-ttu-id="50960-230">Publique uma Solicitação de Script no [Script Center](https://azure.microsoft.com/documentation/scripts/) se estiver procurando uma solução de runbook ou um módulo de integração da Automação do Azure.</span><span class="sxs-lookup"><span data-stu-id="50960-230">Post a Script Request on [Script Center](https://azure.microsoft.com/documentation/scripts/) if you are looking for an Azure Automation runbook solution or an integration module.</span></span>
* <span data-ttu-id="50960-231">Poste comentários ou solicitações de recursos para a Automação do Azure no [User Voice](https://feedback.azure.com/forums/34192--general-feedback).</span><span class="sxs-lookup"><span data-stu-id="50960-231">Post feedback or feature requests for Azure Automation on [User Voice](https://feedback.azure.com/forums/34192--general-feedback).</span></span>
