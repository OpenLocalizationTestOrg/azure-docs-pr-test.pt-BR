---
title: "Automatizar a remoção de grupos de recursos | Microsoft Docs"
description: "Versão do Fluxo de Trabalho do PowerShell de um cenário de Automação do Azure, incluindo runbooks para remover todos os grupos de recursos de sua assinatura."
services: automation
documentationcenter: 
author: MGoedtel
manager: jwhit
editor: 
ms.assetid: b848e345-fd5d-4b9d-bc57-3fe41d2ddb5c
ms.service: automation
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 09/26/2016
ms.author: magoedte
ms.openlocfilehash: 6aa3897d44b146483204d43e026d3d158c3e13b6
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/11/2017
---
# <a name="azure-automation-scenario---automate-removal-of-resource-groups"></a><span data-ttu-id="9edf7-103">Cenário da Automação do Azure - automatize a remoção de grupos de recursos</span><span class="sxs-lookup"><span data-stu-id="9edf7-103">Azure Automation scenario - automate removal of resource groups</span></span>
<span data-ttu-id="9edf7-104">Muitos clientes criam mais de um grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="9edf7-104">Many customers create more than one resource group.</span></span> <span data-ttu-id="9edf7-105">Alguns podem ser usados para gerenciar aplicativos de produção e outros podem ser usados como ambientes de desenvolvimento, teste e preparo.</span><span class="sxs-lookup"><span data-stu-id="9edf7-105">Some might be used for managing production applications, and others might be used as development, testing, and staging environments.</span></span> <span data-ttu-id="9edf7-106">A automatização da implantação desses recursos é uma coisa, mas poder encerrar um grupo de recursos com um clique do botão é outra.</span><span class="sxs-lookup"><span data-stu-id="9edf7-106">Automating the deployment of these resources is one thing, but being able to decommission a resource group with a click of the button is another.</span></span> <span data-ttu-id="9edf7-107">Você pode simplificar essa tarefa comum de gerenciamento usando a Automação do Azure.</span><span class="sxs-lookup"><span data-stu-id="9edf7-107">You can streamline this common management task by using Azure Automation.</span></span> <span data-ttu-id="9edf7-108">Isso é útil se você está trabalhando com uma assinatura do Azure com um limite de gastos por meio de uma oferta de membro como o MSDN ou o programa Microsoft Partner Network Cloud Essentials.</span><span class="sxs-lookup"><span data-stu-id="9edf7-108">This is helpful if you are working with an Azure subscription that has a spending limit through a member offer like MSDN or the Microsoft Partner Network Cloud Essentials program.</span></span>

<span data-ttu-id="9edf7-109">Este cenário se baseia em um runbook do PowerShell e foi projetado para remover da sua assinatura um ou mais grupos de recursos especificados por você.</span><span class="sxs-lookup"><span data-stu-id="9edf7-109">This scenario is based on a PowerShell runbook and is designed to remove one or more resource groups that you specify from your subscription.</span></span> <span data-ttu-id="9edf7-110">A configuração padrão do runbook é para testar antes de continuar.</span><span class="sxs-lookup"><span data-stu-id="9edf7-110">The default setting of the runbook is to test before proceeding.</span></span> <span data-ttu-id="9edf7-111">Isso faz com que você não exclua o grupo de recursos acidentalmente antes de estar pronto para concluir o procedimento.</span><span class="sxs-lookup"><span data-stu-id="9edf7-111">This ensures that you don't accidentally delete the resource group before you're ready to complete this procedure.</span></span>   

## <a name="getting-the-scenario"></a><span data-ttu-id="9edf7-112">Obtendo o cenário</span><span class="sxs-lookup"><span data-stu-id="9edf7-112">Getting the scenario</span></span>
<span data-ttu-id="9edf7-113">Este cenário consiste em um runbook do PowerShell que você pode baixar da [Galeria do PowerShell](https://www.powershellgallery.com/packages/Remove-ResourceGroup/1.0/DisplayScript).</span><span class="sxs-lookup"><span data-stu-id="9edf7-113">This scenario consists of a PowerShell runbook that you can download from the [PowerShell Gallery](https://www.powershellgallery.com/packages/Remove-ResourceGroup/1.0/DisplayScript).</span></span> <span data-ttu-id="9edf7-114">Você também pode importá-la diretamente da [Galeria de runbooks](automation-runbook-gallery.md) no portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="9edf7-114">You can also import it directly from the [Runbook Gallery](automation-runbook-gallery.md) in the Azure portal.</span></span><br><br>

| <span data-ttu-id="9edf7-115">Runbook</span><span class="sxs-lookup"><span data-stu-id="9edf7-115">Runbook</span></span> | <span data-ttu-id="9edf7-116">Descrição</span><span class="sxs-lookup"><span data-stu-id="9edf7-116">Description</span></span> |
| --- | --- |
| <span data-ttu-id="9edf7-117">Remove-ResourceGroup</span><span class="sxs-lookup"><span data-stu-id="9edf7-117">Remove-ResourceGroup</span></span> |<span data-ttu-id="9edf7-118">Remove um ou mais grupos de recursos do Azure e seus recursos associados da assinatura.</span><span class="sxs-lookup"><span data-stu-id="9edf7-118">Removes one or more Azure resource groups and associated resources from the subscription.</span></span> |

<br>
<span data-ttu-id="9edf7-119">Os parâmetros de entrada a seguir são definidos para este runbook:</span><span class="sxs-lookup"><span data-stu-id="9edf7-119">The following input parameters are defined for this runbook:</span></span>

| <span data-ttu-id="9edf7-120">Parâmetro</span><span class="sxs-lookup"><span data-stu-id="9edf7-120">Parameter</span></span> | <span data-ttu-id="9edf7-121">Descrição</span><span class="sxs-lookup"><span data-stu-id="9edf7-121">Description</span></span> |
| --- | --- |
| <span data-ttu-id="9edf7-122">NameFilter (Obrigatório)</span><span class="sxs-lookup"><span data-stu-id="9edf7-122">NameFilter (Required)</span></span> |<span data-ttu-id="9edf7-123">Especifica um filtro de nome para limitar os grupos de recursos que você pretende excluir.</span><span class="sxs-lookup"><span data-stu-id="9edf7-123">Specifies a name filter to limit the resource groups that you intend on deleting.</span></span> <span data-ttu-id="9edf7-124">Você pode passar vários valores usando uma lista separada por vírgulas.</span><span class="sxs-lookup"><span data-stu-id="9edf7-124">You can pass multiple values using a comma-separated list.</span></span><br><span data-ttu-id="9edf7-125">O filtro não diferencia maiúsculas de minúsculas e corresponderá a qualquer grupo de recursos que contenha a cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="9edf7-125">The filter is not case-sensitive and will match any resource group that contains the string.</span></span> |
| <span data-ttu-id="9edf7-126">PreviewMode (opcional)</span><span class="sxs-lookup"><span data-stu-id="9edf7-126">PreviewMode (Optional)</span></span> |<span data-ttu-id="9edf7-127">Executa o runbook para ver quais grupos de recursos seriam excluídos, mas não realiza nenhuma ação.</span><span class="sxs-lookup"><span data-stu-id="9edf7-127">Executes the runbook to see which resource groups would be deleted, but takes no action.</span></span><br><span data-ttu-id="9edf7-128">O padrão é **true** para ajudar a evitar a exclusão acidental de um ou mais grupos de recursos passados para o runbook.</span><span class="sxs-lookup"><span data-stu-id="9edf7-128">The default is **true** to help avoid accidental deletion of one or more resource groups passed to the runbook.</span></span> |

## <a name="install-and-configure-this-scenario"></a><span data-ttu-id="9edf7-129">Instalar e configurar esse cenário</span><span class="sxs-lookup"><span data-stu-id="9edf7-129">Install and configure this scenario</span></span>
### <a name="prerequisites"></a><span data-ttu-id="9edf7-130">Pré-requisitos</span><span class="sxs-lookup"><span data-stu-id="9edf7-130">Prerequisites</span></span>
<span data-ttu-id="9edf7-131">Esse runbook se autentica usando a [conta Executar como do Azure](automation-sec-configure-azure-runas-account.md).</span><span class="sxs-lookup"><span data-stu-id="9edf7-131">This runbook authenticates using the [Azure Run As account](automation-sec-configure-azure-runas-account.md).</span></span>    

### <a name="install-and-publish-the-runbooks"></a><span data-ttu-id="9edf7-132">Instalar e publicar os runbooks</span><span class="sxs-lookup"><span data-stu-id="9edf7-132">Install and publish the runbooks</span></span>
<span data-ttu-id="9edf7-133">Depois de baixar o runbook, você poderá importá-lo usando o procedimento em [Procedimentos para importar runbooks](automation-creating-importing-runbook.md#importing-a-runbook-from-a-file-into-azure-automation).</span><span class="sxs-lookup"><span data-stu-id="9edf7-133">After you download the runbook, you can import it by using the procedure in [Importing runbook procedures](automation-creating-importing-runbook.md#importing-a-runbook-from-a-file-into-azure-automation).</span></span> <span data-ttu-id="9edf7-134">Publique o runbook depois que ele for importado com êxito em sua conta de Automação.</span><span class="sxs-lookup"><span data-stu-id="9edf7-134">Publish the runbook after it has been successfully imported into your Automation account.</span></span>

## <a name="using-the-runbook"></a><span data-ttu-id="9edf7-135">Usando o runbook</span><span class="sxs-lookup"><span data-stu-id="9edf7-135">Using the runbook</span></span>
<span data-ttu-id="9edf7-136">As etapas a seguir orientarão você pela execução deste runbook e o ajudarão a se familiarizar com o funcionamento dele.</span><span class="sxs-lookup"><span data-stu-id="9edf7-136">The following steps will walk you through the execution of this runbook and help you become familiar with how it works.</span></span> <span data-ttu-id="9edf7-137">Você só testará o runbook neste exemplo, e não excluirá de fato o grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="9edf7-137">You will only be testing the runbook in this example, not actually deleting the resource group.</span></span>  

1. <span data-ttu-id="9edf7-138">No Portal do Azure, abra sua conta da Automação e clique no bloco **Runbooks**.</span><span class="sxs-lookup"><span data-stu-id="9edf7-138">From the Azure portal, open your Automation account and click **Runbooks**.</span></span>
2. <span data-ttu-id="9edf7-139">Selecione o runbook **Remove-ResourceGroup** e clique em **Iniciar**.</span><span class="sxs-lookup"><span data-stu-id="9edf7-139">Select the **Remove-ResourceGroup** runbook and click **Start**.</span></span>
3. <span data-ttu-id="9edf7-140">Quando você inicia o runbook, a folha **Iniciar Runbook** é aberta e você pode configurar valores a seguir para os parâmetros.</span><span class="sxs-lookup"><span data-stu-id="9edf7-140">When you start the runbook, the **Start Runbook** blade opens and you can configure the parameters.</span></span> <span data-ttu-id="9edf7-141">Digite os nomes dos grupos de recursos em sua assinatura que você pode usar para testar e não causarão danos se forem excluídos acidentalmente.</span><span class="sxs-lookup"><span data-stu-id="9edf7-141">Enter the names of resource groups in your subscription that you can use for testing and will cause no harm if accidentally deleted.</span></span><br> <span data-ttu-id="9edf7-142">![Parâmetros Remove-ResouceGroup](media/automation-scenario-remove-resourcegroup/remove-resourcegroup-input-parameters.png)</span><span class="sxs-lookup"><span data-stu-id="9edf7-142">![Remove-ResouceGroup parameters](media/automation-scenario-remove-resourcegroup/remove-resourcegroup-input-parameters.png)</span></span>

   > [!NOTE]
   > <span data-ttu-id="9edf7-143">Verifique se **Previewmode** está definido como **true** para evitar a exclusão de grupos de recursos selecionados.</span><span class="sxs-lookup"><span data-stu-id="9edf7-143">Make sure **Previewmode** is set to **true** to avoid deleting the selected resource groups.</span></span>  <span data-ttu-id="9edf7-144">**Observe** que este runbook não removerá o grupo de recursos com a conta da Automação que está executando esse runbook.</span><span class="sxs-lookup"><span data-stu-id="9edf7-144">**Note** that this runbook will not remove the resource group that contains the Automation account that is running this runbook.</span></span>  
   >
   >
4. <span data-ttu-id="9edf7-145">Depois de configurar todos os valores de parâmetro, clique em **OK** e o runbook será enfileirado para execução.</span><span class="sxs-lookup"><span data-stu-id="9edf7-145">After you have configured all the parameter values, click **OK**, and the runbook will be queued for execution.</span></span>  

<span data-ttu-id="9edf7-146">Para exibir os detalhes do trabalho do runbook **Remove-ResourceGroup** no Portal do Azure, selecione o bloco **Trabalhos** do runbook.</span><span class="sxs-lookup"><span data-stu-id="9edf7-146">To view the details of the **Remove-ResourceGroup** runbook job in the Azure portal, select **Jobs** in the runbook.</span></span> <span data-ttu-id="9edf7-147">O resumo do trabalho exibe os parâmetros de entrada e o fluxo de saída, além de informações gerais sobre o trabalho e todas as exceções ocorridas.</span><span class="sxs-lookup"><span data-stu-id="9edf7-147">The job summary displays the input parameters and the output stream in addition to general information about the job and any exceptions that occurred.</span></span><br> <span data-ttu-id="9edf7-148">![Status de trabalho do runbook Remove-ResourceGroup](media/automation-scenario-remove-resourcegroup/remove-resourcegroup-runbook-job-status.png).</span><span class="sxs-lookup"><span data-stu-id="9edf7-148">![Remove-ResourceGroup runbook job status](media/automation-scenario-remove-resourcegroup/remove-resourcegroup-runbook-job-status.png).</span></span>

<span data-ttu-id="9edf7-149">O **Resumo do Trabalho** inclui mensagens de fluxos de saída, de aviso e de erro.</span><span class="sxs-lookup"><span data-stu-id="9edf7-149">The **Job Summary** includes messages from the output, warning, and error streams.</span></span> <span data-ttu-id="9edf7-150">Selecione **Saída** para exibir os resultados detalhados da execução do runbook.</span><span class="sxs-lookup"><span data-stu-id="9edf7-150">Select **Output** to view detailed results from the runbook execution.</span></span><br> <span data-ttu-id="9edf7-151">![Resultados da saída do runbook Remove-ResourceGroup](media/automation-scenario-remove-resourcegroup/remove-resourcegroup-runbook-job-output.png)</span><span class="sxs-lookup"><span data-stu-id="9edf7-151">![Remove-ResourceGroup runbook output results](media/automation-scenario-remove-resourcegroup/remove-resourcegroup-runbook-job-output.png)</span></span>

## <a name="next-steps"></a><span data-ttu-id="9edf7-152">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="9edf7-152">Next steps</span></span>
* <span data-ttu-id="9edf7-153">Para começar a criar seu próprio runbook, confira [Criando ou importando um runbook na Automação do Azure](automation-creating-importing-runbook.md).</span><span class="sxs-lookup"><span data-stu-id="9edf7-153">To get started creating your own runbook, see [Creating or importing a runbook in Azure Automation](automation-creating-importing-runbook.md).</span></span>
* <span data-ttu-id="9edf7-154">Para começar a usar os runbooks de fluxo de trabalho do PowerShell, confira [Meu primeiro runbook de fluxo de trabalho do PowerShell](automation-first-runbook-textual.md).</span><span class="sxs-lookup"><span data-stu-id="9edf7-154">To get started with PowerShell Workflow runbooks, see [My first PowerShell Workflow runbook](automation-first-runbook-textual.md).</span></span>
