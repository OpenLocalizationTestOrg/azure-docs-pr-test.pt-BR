---
title: "Saída e mensagens do runbook na Automação do Azure | Microsoft Docs"
description: "Descreve como criar e recuperar a saída e mensagens de erro de runbooks na Automação do Azure."
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: tysonn
ms.assetid: 13a414f5-0e2c-4be2-9558-a3e3ec84b6b2
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 11/11/2016
ms.author: magoedte;bwren
ms.openlocfilehash: 6f01f97e38aa271034741c8a5e2f8057ab61fcd7
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/11/2017
---
# <a name="runbook-output-and-messages-in-azure-automation"></a><span data-ttu-id="2c34e-103">Saída e mensagens do runbook na Automação do Azure</span><span class="sxs-lookup"><span data-stu-id="2c34e-103">Runbook output and messages in Azure Automation</span></span>
<span data-ttu-id="2c34e-104">A maioria dos runbooks da Automação do Azure terá alguma forma de saída, como uma mensagem de erro para o usuário ou um objeto complexo destinado a ser consumido por outro fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="2c34e-104">Most Azure Automation runbooks will have some form of output such as an error message to the user or a complex object intended to be consumed by another workflow.</span></span> <span data-ttu-id="2c34e-105">O Windows PowerShell oferece [vários fluxos](http://blogs.technet.com/heyscriptingguy/archive/2014/03/30/understanding-streams-redirection-and-write-host-in-powershell.aspx) para o envio da saída de um script ou de um de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="2c34e-105">Windows PowerShell provides [multiple streams](http://blogs.technet.com/heyscriptingguy/archive/2014/03/30/understanding-streams-redirection-and-write-host-in-powershell.aspx) to send output from a script or workflow.</span></span> <span data-ttu-id="2c34e-106">A Automação do Azure funciona com cada um desses fluxos de forma diferente e você deve seguir as práticas recomendadas de como usar cada um quando estiver criando um runbook.</span><span class="sxs-lookup"><span data-stu-id="2c34e-106">Azure Automation works with each of these streams differently, and you should follow best practices for how to use each when you are creating a runbook.</span></span>

<span data-ttu-id="2c34e-107">A tabela a seguir oferece uma breve descrição de cada um dos fluxos e de seu comportamento no Portal de Gerenciamento do Azure ao executar um runbook publicado e ao [testar um runbook](automation-testing-runbook.md).</span><span class="sxs-lookup"><span data-stu-id="2c34e-107">The following table provides a brief description of each of the streams and their behavior in the Azure Management Portal both when running a published runbook and when [testing a runbook](automation-testing-runbook.md).</span></span> <span data-ttu-id="2c34e-108">Serão fornecidos mais detalhes sobre cada fluxo nas seções subsequentes.</span><span class="sxs-lookup"><span data-stu-id="2c34e-108">Further details on each stream are provided in subsequent sections.</span></span>

| <span data-ttu-id="2c34e-109">Fluxo</span><span class="sxs-lookup"><span data-stu-id="2c34e-109">Stream</span></span> | <span data-ttu-id="2c34e-110">Descrição</span><span class="sxs-lookup"><span data-stu-id="2c34e-110">Description</span></span> | <span data-ttu-id="2c34e-111">Publicado</span><span class="sxs-lookup"><span data-stu-id="2c34e-111">Published</span></span> | <span data-ttu-id="2c34e-112">Teste</span><span class="sxs-lookup"><span data-stu-id="2c34e-112">Test</span></span> |
|:--- |:--- |:--- |:--- |
| <span data-ttu-id="2c34e-113">Saída</span><span class="sxs-lookup"><span data-stu-id="2c34e-113">Output</span></span> |<span data-ttu-id="2c34e-114">Objetos que se destinam a consumo de outros runbooks.</span><span class="sxs-lookup"><span data-stu-id="2c34e-114">Objects intended to be consumed by other runbooks.</span></span> |<span data-ttu-id="2c34e-115">Gravado no histórico do trabalho.</span><span class="sxs-lookup"><span data-stu-id="2c34e-115">Written to the job history.</span></span> |<span data-ttu-id="2c34e-116">Exibido no Painel de Saída do Teste.</span><span class="sxs-lookup"><span data-stu-id="2c34e-116">Displayed in the Test Output Pane.</span></span> |
| <span data-ttu-id="2c34e-117">Aviso</span><span class="sxs-lookup"><span data-stu-id="2c34e-117">Warning</span></span> |<span data-ttu-id="2c34e-118">Mensagem de aviso para o usuário.</span><span class="sxs-lookup"><span data-stu-id="2c34e-118">Warning message intended for the user.</span></span> |<span data-ttu-id="2c34e-119">Gravado no histórico do trabalho.</span><span class="sxs-lookup"><span data-stu-id="2c34e-119">Written to the job history.</span></span> |<span data-ttu-id="2c34e-120">Exibido no Painel de Saída do Teste.</span><span class="sxs-lookup"><span data-stu-id="2c34e-120">Displayed in the Test Output Pane.</span></span> |
| <span data-ttu-id="2c34e-121">Erro</span><span class="sxs-lookup"><span data-stu-id="2c34e-121">Error</span></span> |<span data-ttu-id="2c34e-122">Mensagem de erro para o usuário.</span><span class="sxs-lookup"><span data-stu-id="2c34e-122">Error message intended for the user.</span></span> <span data-ttu-id="2c34e-123">Ao contrário de uma exceção, o runbook continua após uma mensagem de erro por padrão.</span><span class="sxs-lookup"><span data-stu-id="2c34e-123">Unlike an exception, the runbook continues after an error message by default.</span></span> |<span data-ttu-id="2c34e-124">Gravado no histórico do trabalho.</span><span class="sxs-lookup"><span data-stu-id="2c34e-124">Written to the job history.</span></span> |<span data-ttu-id="2c34e-125">Exibido no Painel de Saída do Teste.</span><span class="sxs-lookup"><span data-stu-id="2c34e-125">Displayed in the Test Output Pane.</span></span> |
| <span data-ttu-id="2c34e-126">Detalhado</span><span class="sxs-lookup"><span data-stu-id="2c34e-126">Verbose</span></span> |<span data-ttu-id="2c34e-127">Mensagens que fornecem informações gerais ou de depuração.</span><span class="sxs-lookup"><span data-stu-id="2c34e-127">Messages providing general or debugging information.</span></span> |<span data-ttu-id="2c34e-128">Gravado no histórico do trabalho somente se o log detalhado estiver ativado para o runbook.</span><span class="sxs-lookup"><span data-stu-id="2c34e-128">Written to job history only if verbose logging is turned on for the runbook.</span></span> |<span data-ttu-id="2c34e-129">Exibido no painel Saída de Teste somente se $VerbosePreference for definido como Continuar no runbook.</span><span class="sxs-lookup"><span data-stu-id="2c34e-129">Displayed in the Test Output pane only if $VerbosePreference is set to Continue in the runbook.</span></span> |
| <span data-ttu-id="2c34e-130">Andamento</span><span class="sxs-lookup"><span data-stu-id="2c34e-130">Progress</span></span> |<span data-ttu-id="2c34e-131">Os registros são automaticamente gerados antes e depois de cada atividade no runbook.</span><span class="sxs-lookup"><span data-stu-id="2c34e-131">Records automatically generated before and after each activity in the runbook.</span></span> <span data-ttu-id="2c34e-132">O runbook não deve tentar criar seus próprios registros de andamento porque são destinados a um usuário interativo.</span><span class="sxs-lookup"><span data-stu-id="2c34e-132">The runbook should not attempt to create its own progress records since they are intended for an interactive user.</span></span> |<span data-ttu-id="2c34e-133">Gravado no histórico do trabalho somente se o log de andamento estiver ativado para o runbook.</span><span class="sxs-lookup"><span data-stu-id="2c34e-133">Written to job history only if progress logging is turned on for the runbook.</span></span> |<span data-ttu-id="2c34e-134">Não exibido no Painel Saída de Teste.</span><span class="sxs-lookup"><span data-stu-id="2c34e-134">Not displayed in the Test Output Pane.</span></span> |
| <span data-ttu-id="2c34e-135">Depurar</span><span class="sxs-lookup"><span data-stu-id="2c34e-135">Debug</span></span> |<span data-ttu-id="2c34e-136">As mensagens destinadas a um usuário interativo.</span><span class="sxs-lookup"><span data-stu-id="2c34e-136">Messages intended for an interactive user.</span></span> <span data-ttu-id="2c34e-137">Não deve ser usado em runbooks.</span><span class="sxs-lookup"><span data-stu-id="2c34e-137">Should not be used in runbooks.</span></span> |<span data-ttu-id="2c34e-138">Não gravado no histórico do trabalho.</span><span class="sxs-lookup"><span data-stu-id="2c34e-138">Not written to job history.</span></span> |<span data-ttu-id="2c34e-139">Não gravado no Painel Saída de Teste.</span><span class="sxs-lookup"><span data-stu-id="2c34e-139">Not written to Test Output Pane.</span></span> |

## <a name="output-stream"></a><span data-ttu-id="2c34e-140">Fluxo de saída</span><span class="sxs-lookup"><span data-stu-id="2c34e-140">Output stream</span></span>
<span data-ttu-id="2c34e-141">O fluxo de saída destina-se à saída de objetos criados por um script ou um fluxo de trabalho quando executado corretamente.</span><span class="sxs-lookup"><span data-stu-id="2c34e-141">The Output stream is intended for output of objects created by a script or workflow when it runs correctly.</span></span> <span data-ttu-id="2c34e-142">Na Automação do Azure, esse fluxo é usado principalmente para objetos que se destinam a ser consumidos por [runbooks pais que chamam o runbook atual](automation-child-runbooks.md).</span><span class="sxs-lookup"><span data-stu-id="2c34e-142">In Azure Automation, this stream is primarily used for objects intended to be consumed by [parent runbooks that call the current runbook](automation-child-runbooks.md).</span></span> <span data-ttu-id="2c34e-143">Quando você [chamar um runbook embutido](automation-child-runbooks.md#invoking-a-child-runbook-using-inline-execution) de um runbook pai, ele retornará dados do fluxo de saída para o pai.</span><span class="sxs-lookup"><span data-stu-id="2c34e-143">When you [call a runbook inline](automation-child-runbooks.md#invoking-a-child-runbook-using-inline-execution) from a parent runbook, it returns data from the output stream to the parent.</span></span> <span data-ttu-id="2c34e-144">Você só deverá usar o fluxo de saída para comunicar informações gerais para o usuário se souber que o runbook nunca será chamado por outro runbook.</span><span class="sxs-lookup"><span data-stu-id="2c34e-144">You should only use the output stream to communicate general information back to the user if you know the runbook will never be called by another runbook.</span></span> <span data-ttu-id="2c34e-145">Como prática recomendada, no entanto, você normalmente deverá usar o [Fluxo Detalhado](#Verbose) para comunicar informações gerais para o usuário.</span><span class="sxs-lookup"><span data-stu-id="2c34e-145">As a best practice, however, you should typically use the [Verbose Stream](#Verbose) to communicate general information to the user.</span></span>

<span data-ttu-id="2c34e-146">Você pode gravar dados no fluxo de saída usando [Write-Output](http://technet.microsoft.com/library/hh849921.aspx) ou colocando o objeto em sua própria linha no runbook.</span><span class="sxs-lookup"><span data-stu-id="2c34e-146">You can write data to the output stream using [Write-Output](http://technet.microsoft.com/library/hh849921.aspx) or by putting the object on its own line in the runbook.</span></span>

    #The following lines both write an object to the output stream.
    Write-Output –InputObject $object
    $object

### <a name="output-from-a-function"></a><span data-ttu-id="2c34e-147">Saída de uma função</span><span class="sxs-lookup"><span data-stu-id="2c34e-147">Output from a function</span></span>
<span data-ttu-id="2c34e-148">Quando você grava o fluxo de saída em uma função incluída no seu runbook, a saída é passada de volta ao runbook.</span><span class="sxs-lookup"><span data-stu-id="2c34e-148">When you write to the output stream in a function that is included in your runbook, the output is passed back to the runbook.</span></span> <span data-ttu-id="2c34e-149">Se o runbook atribuir essa saída a uma variável, então ela não será gravada no fluxo de saída.</span><span class="sxs-lookup"><span data-stu-id="2c34e-149">If the runbook assigns that output to a variable, then it is not written to the output stream.</span></span> <span data-ttu-id="2c34e-150">A gravação de qualquer outro fluxo de dentro de uma função gravará o fluxo correspondente no runbook.</span><span class="sxs-lookup"><span data-stu-id="2c34e-150">Writing to any other streams from within the function will write to the corresponding stream for the runbook.</span></span>

<span data-ttu-id="2c34e-151">Considere os cenários de exemplo a seguir.</span><span class="sxs-lookup"><span data-stu-id="2c34e-151">Consider the following sample runbook.</span></span>

    Workflow Test-Runbook
    {
        Write-Verbose "Verbose outside of function" -Verbose
        Write-Output "Output outside of function"
        $functionOutput = Test-Function
        $functionOutput

    Function Test-Function
     {
        Write-Verbose "Verbose inside of function" -Verbose
        Write-Output "Output inside of function"
      }
    }


<span data-ttu-id="2c34e-152">O fluxo de saída para o trabalho de runbook deveria ser:</span><span class="sxs-lookup"><span data-stu-id="2c34e-152">The output stream for the runbook job would be:</span></span>

    Output inside of function
    Output outside of function

<span data-ttu-id="2c34e-153">O fluxo detalhado para o trabalho de runbook deveria ser:</span><span class="sxs-lookup"><span data-stu-id="2c34e-153">The verbose stream for the runbook job would be:</span></span>

    Verbose outside of function
    Verbose inside of function

<span data-ttu-id="2c34e-154">Uma vez publicado o runbook e antes de começar, você também deve ativar log Detalhado nas configurações de runbook para obter a saída de fluxo Detalhada.</span><span class="sxs-lookup"><span data-stu-id="2c34e-154">Once you have published the runbook and before you start it, you must also turn on Verbose logging in the runbook settings in order to get the Verbose stream output.</span></span>

### <a name="declaring-output-data-type"></a><span data-ttu-id="2c34e-155">Declarando o tipo de dados de saída</span><span class="sxs-lookup"><span data-stu-id="2c34e-155">Declaring output data type</span></span>
<span data-ttu-id="2c34e-156">Um fluxo de trabalho pode especificar o tipo de dados de sua saída usando o [atributo OutputType](http://technet.microsoft.com/library/hh847785.aspx).</span><span class="sxs-lookup"><span data-stu-id="2c34e-156">A workflow can specify the data type of its output using the [OutputType attribute](http://technet.microsoft.com/library/hh847785.aspx).</span></span> <span data-ttu-id="2c34e-157">Esse atributo não tem nenhum efeito em tempo de execução, mas oferece uma indicação para o autor do runbook no tempo de design da saída esperada do runbook.</span><span class="sxs-lookup"><span data-stu-id="2c34e-157">This attribute has no effect during runtime, but it provides an indication to the runbook author at design time of the expected output of the runbook.</span></span> <span data-ttu-id="2c34e-158">Como o conjunto de ferramentas para runbooks continua a evoluir, a importância de declarar tipos de dados de saída em tempo de design aumentará.</span><span class="sxs-lookup"><span data-stu-id="2c34e-158">As the toolset for runbooks continues to evolve, the importance of declaring output data types at design time will increase in importance.</span></span> <span data-ttu-id="2c34e-159">Como resultado, é uma prática recomendada incluir essa declaração em todos os runbooks criados.</span><span class="sxs-lookup"><span data-stu-id="2c34e-159">As a result, it is a best practice to include this declaration in any runbooks that you create.</span></span>

<span data-ttu-id="2c34e-160">Veja uma lista de tipos de saída de exemplo:</span><span class="sxs-lookup"><span data-stu-id="2c34e-160">Here is a list of example output types:</span></span>

* <span data-ttu-id="2c34e-161">System.String</span><span class="sxs-lookup"><span data-stu-id="2c34e-161">System.String</span></span>
* <span data-ttu-id="2c34e-162">System.Int32</span><span class="sxs-lookup"><span data-stu-id="2c34e-162">System.Int32</span></span>
* <span data-ttu-id="2c34e-163">System.Collections.Hashtable</span><span class="sxs-lookup"><span data-stu-id="2c34e-163">System.Collections.Hashtable</span></span>
* <span data-ttu-id="2c34e-164">Microsoft.Azure.Commands.Compute.Models.PSVirtualMachine</span><span class="sxs-lookup"><span data-stu-id="2c34e-164">Microsoft.Azure.Commands.Compute.Models.PSVirtualMachine</span></span>

<span data-ttu-id="2c34e-165">O exemplo de runbook a seguir gera um objeto de cadeia de caracteres e inclui uma declaração de seu tipo de saída.</span><span class="sxs-lookup"><span data-stu-id="2c34e-165">The following sample runbook outputs a string object and includes a declaration of its output type.</span></span> <span data-ttu-id="2c34e-166">Se seu runbook gerar uma matriz de um determinado tipo, você ainda deverá especificar o tipo como oposto a uma matriz do tipo.</span><span class="sxs-lookup"><span data-stu-id="2c34e-166">If your runbook outputs an array of a certain type, then you should still specify the type as opposed to an array of the type.</span></span>

    Workflow Test-Runbook
    {
       [OutputType([string])]

       $output = "This is some string output."
       Write-Output $output
    }

<span data-ttu-id="2c34e-167">Para declarar um tipo de saída em runbooks Gráficos ou de Fluxo de Trabalho Gráfico do PowerShell, você poderá selecionar a opção de menu **Entrada e Saída** e digitar o nome do tipo de saída.</span><span class="sxs-lookup"><span data-stu-id="2c34e-167">To declare an output type in Grapical or Graphical PowerShell Workflow runbooks, you can select the **Input and Output** menu option and type in the name of the output type.</span></span>  <span data-ttu-id="2c34e-168">Recomendamos que você use o nome completo da classe .NET para torná-la facilmente identificável ao fazer referência a ela de um runbook pai.</span><span class="sxs-lookup"><span data-stu-id="2c34e-168">We recommend you use the full .NET class name to make it easily identifiable when referencing it from a parent runbook.</span></span>  <span data-ttu-id="2c34e-169">Isso expõe todas as propriedades da classe para o barramento de dados no runbook e oferece muita flexibilidade ao usá-los para a lógica condicional, registro em log e referenciamento como valores de outras atividades no runbook.</span><span class="sxs-lookup"><span data-stu-id="2c34e-169">This exposes all the properties of that class to the data bus in the runbook and provides a lot of flexibility when using them for conditional logic, logging, and referencing as values for other activities in the runbook.</span></span><br> <span data-ttu-id="2c34e-170">![Opção Entrada e Saída de Runbook](media/automation-runbook-output-and-messages/runbook-menu-input-and-output-option.png)</span><span class="sxs-lookup"><span data-stu-id="2c34e-170">![Runbook Input and Output option](media/automation-runbook-output-and-messages/runbook-menu-input-and-output-option.png)</span></span>

<span data-ttu-id="2c34e-171">No exemplo a seguir, temos dois runbooks gráficos para demonstrar esse recurso.</span><span class="sxs-lookup"><span data-stu-id="2c34e-171">In the following example, we have two graphical runbooks to demonstrate this feature.</span></span>  <span data-ttu-id="2c34e-172">Se aplicarmos o modelo de design modular do runbook, temos um runbook que serve como o *modelo de Autenticação do Runbook* que gerencia a autenticação com o Azure usando a conta Executar como.</span><span class="sxs-lookup"><span data-stu-id="2c34e-172">If we apply the modular runbook design model, we have one runbook which serves as the *Authentication Runbook template* managing authentication with Azure using the Run As account.</span></span>  <span data-ttu-id="2c34e-173">Nosso segundo runbook, que normalmente executaria a lógica principal para automatizar um determinado cenário, nesse caso executará o *modelo de Autenticação de Runbook* e exibirá os resultados para o painel de saída **Teste** .</span><span class="sxs-lookup"><span data-stu-id="2c34e-173">Our second runbook, which would normally perform the core logic to automate a given scenario, in this case is going to execute the *Authentication Runbook template* and display the results to your **Test** output pane.</span></span>  <span data-ttu-id="2c34e-174">Sob circunstâncias normais, esse runbook teria de fazer algo em um recurso aproveitando a saída do runbook filho.</span><span class="sxs-lookup"><span data-stu-id="2c34e-174">Under normal circumstances, we would have this runbook do something against a resource leveraging the output from the child runbook.</span></span>    

<span data-ttu-id="2c34e-175">Veja a lógica básica do runbook **AuthenticateTo-Azure**.</span><span class="sxs-lookup"><span data-stu-id="2c34e-175">Here is the basic logic of the **AuthenticateTo-Azure** runbook.</span></span><br> <span data-ttu-id="2c34e-176">![Exemplo de modelo de runbook de autenticação](media/automation-runbook-output-and-messages/runbook-authentication-template.png).</span><span class="sxs-lookup"><span data-stu-id="2c34e-176">![Authenticate Runbook Template Example](media/automation-runbook-output-and-messages/runbook-authentication-template.png).</span></span>  

<span data-ttu-id="2c34e-177">Ele inclui o tipo de saída *Microsoft.Azure.Commands.Profile.Models.PSAzureContext*, que retornará as propriedades de perfil de autenticação.</span><span class="sxs-lookup"><span data-stu-id="2c34e-177">It includes the output type *Microsoft.Azure.Commands.Profile.Models.PSAzureContext*, which will return the authentication profile properties.</span></span><br> <span data-ttu-id="2c34e-178">![Exemplo de tipo de saída de runbook](media/automation-runbook-output-and-messages/runbook-input-and-output-add-blade.png)</span><span class="sxs-lookup"><span data-stu-id="2c34e-178">![Runbook Output Type Example](media/automation-runbook-output-and-messages/runbook-input-and-output-add-blade.png)</span></span> 

<span data-ttu-id="2c34e-179">Embora esse runbook seja bastante direto, há um item de configuração para ressaltar aqui.</span><span class="sxs-lookup"><span data-stu-id="2c34e-179">While this runbook is very straight forward, there is one configuration item to call out here.</span></span>  <span data-ttu-id="2c34e-180">A última atividade está executando o cmdlet **Write-Output** e grava os dados de perfil em uma variável $_ usando uma expressão do PowerShell para o parâmetro **Inputobject**, que é necessário para esse cmdlet.</span><span class="sxs-lookup"><span data-stu-id="2c34e-180">The last activity is executing the **Write-Output** cmdlet and writes the profile data to a $_ variable using a PowerShell expression for the **Inputobject** parameter, which is required for that cmdlet.</span></span>  

<span data-ttu-id="2c34e-181">Para o segundo runbook neste exemplo, chamado *Test-ChildOutputType*, nós simplesmente temos duas atividades.</span><span class="sxs-lookup"><span data-stu-id="2c34e-181">For the second runbook in this example, named *Test-ChildOutputType*, we simply have two activities.</span></span><br> <span data-ttu-id="2c34e-182">![Runbook de tipo de saída de exemplo filho](media/automation-runbook-output-and-messages/runbook-display-authentication-results-example.png)</span><span class="sxs-lookup"><span data-stu-id="2c34e-182">![Example Child Output Type Runbook](media/automation-runbook-output-and-messages/runbook-display-authentication-results-example.png)</span></span> 

<span data-ttu-id="2c34e-183">A primeira atividade chama o runbook **AuthenticateTo-Azure** e a segunda atividade está executando o cmdlet **Write-Verbose** com a **Fonte de dados** de **Saída de atividade** e o valor de **Caminho de campo** é **Context.Subscription.SubscriptionName**, que está especificando a saída de contexto do runbook **AuthenticateTo-Azure**.</span><span class="sxs-lookup"><span data-stu-id="2c34e-183">The first activity calls the **AuthenticateTo-Azure** runbook and the second activity is running the **Write-Verbose** cmdlet with the **Data source** of **Activity output** and the value for **Field path** is **Context.Subscription.SubscriptionName**, which is specifying the context output from the **AuthenticateTo-Azure** runbook.</span></span><br> <span data-ttu-id="2c34e-184">![Fonte de dados de parâmetro do cmdlet Write-Verbose](media/automation-runbook-output-and-messages/runbook-write-verbose-parameters-config.png)</span><span class="sxs-lookup"><span data-stu-id="2c34e-184">![Write-Verbose cmdlet Parameter Data Source](media/automation-runbook-output-and-messages/runbook-write-verbose-parameters-config.png)</span></span>    

<span data-ttu-id="2c34e-185">A saída resultante é o nome da assinatura.</span><span class="sxs-lookup"><span data-stu-id="2c34e-185">The resulting output is the name of the subscription.</span></span><br> ![Resultados do runbook Test-ChildOutputType](media/automation-runbook-output-and-messages/runbook-test-childoutputtype-results.png)

<span data-ttu-id="2c34e-187">Uma observação sobre o comportamento do controle Tipo de Saída.</span><span class="sxs-lookup"><span data-stu-id="2c34e-187">One note about the behavior of the Output Type control.</span></span>  <span data-ttu-id="2c34e-188">Quando você digita um valor no campo Tipo de Saída na folha Propriedades de Entrada e Saída, precisa clicar fora do controle depois de digitá-lo, para que a entrada seja reconhecida pelo controle.</span><span class="sxs-lookup"><span data-stu-id="2c34e-188">When you type a value in the Output Type field on the Input and Output properties blade, you have to click outside of the control  after you type it, in order for your entry to be recognized by the control.</span></span>  

## <a name="message-streams"></a><span data-ttu-id="2c34e-189">Fluxos de mensagens</span><span class="sxs-lookup"><span data-stu-id="2c34e-189">Message streams</span></span>
<span data-ttu-id="2c34e-190">Ao contrário do fluxo de saída, os fluxos de mensagens destinam-se a comunicar informações ao usuário.</span><span class="sxs-lookup"><span data-stu-id="2c34e-190">Unlike the output stream, message streams are intended to communicate information to the user.</span></span> <span data-ttu-id="2c34e-191">Existem vários fluxos de mensagens para diferentes tipos de informação, e cada um deles é manipulado de forma diferente pela Automação do Azure.</span><span class="sxs-lookup"><span data-stu-id="2c34e-191">There are multiple message streams for different kinds of information, and each is handled differently by Azure Automation.</span></span>

### <a name="warning-and-error-streams"></a><span data-ttu-id="2c34e-192">Fluxos de aviso e de erro</span><span class="sxs-lookup"><span data-stu-id="2c34e-192">Warning and error streams</span></span>
<span data-ttu-id="2c34e-193">Os fluxos de Aviso e de Erro pretendem registrar problemas que ocorrem em um runbook.</span><span class="sxs-lookup"><span data-stu-id="2c34e-193">The Warning and Error streams are intended to log problems that occur in a runbook.</span></span> <span data-ttu-id="2c34e-194">Eles são gravadas no histórico do trabalho quando um runbook é executado e são incluídos no Painel Saída de Teste no Portal de Gerenciamento do Azure quando um runbook é testado.</span><span class="sxs-lookup"><span data-stu-id="2c34e-194">They are written to the job history when a runbook is executed, and are included in the Test Output Pane in the Azure Management Portal when a runbook is tested.</span></span> <span data-ttu-id="2c34e-195">Por padrão, o runbook continuará a ser executado após um aviso ou um erro.</span><span class="sxs-lookup"><span data-stu-id="2c34e-195">By default, the runbook will continue executing after a warning or error.</span></span> <span data-ttu-id="2c34e-196">Você pode especificar que o runbook seja suspenso em um aviso ou um erro ao definir uma [variável de preferência](#PreferenceVariables) no runbook antes de criar a mensagem.</span><span class="sxs-lookup"><span data-stu-id="2c34e-196">You can specify that the runbook should be suspended on a warning or error by setting a [preference variable](#PreferenceVariables) in the runbook before creating the message.</span></span> <span data-ttu-id="2c34e-197">Por exemplo, para fazer com que um runbook seja suspenso em um erro como o faria em uma exceção, defina **$ErrorActionPreference** como Stop.</span><span class="sxs-lookup"><span data-stu-id="2c34e-197">For example, to cause a runbook to suspend on an error as it would an exception, set **$ErrorActionPreference** to Stop.</span></span>

<span data-ttu-id="2c34e-198">Crie uma mensagem de aviso ou de erro usando o cmdlet [Write-Warning](https://technet.microsoft.com/library/hh849931.aspx) ou [Write-Error](http://technet.microsoft.com/library/hh849962.aspx).</span><span class="sxs-lookup"><span data-stu-id="2c34e-198">Create a warning or error message using the [Write-Warning](https://technet.microsoft.com/library/hh849931.aspx) or [Write-Error](http://technet.microsoft.com/library/hh849962.aspx) cmdlet.</span></span> <span data-ttu-id="2c34e-199">As atividades também podem ser gravadas nesses fluxos.</span><span class="sxs-lookup"><span data-stu-id="2c34e-199">Activities may also write to these streams.</span></span>

    #The following lines create a warning message and then an error message that will suspend the runbook.

    $ErrorActionPreference = "Stop"
    Write-Warning –Message "This is a warning message."
    Write-Error –Message "This is an error message that will stop the runbook because of the preference variable."

### <a name="verbose-stream"></a><span data-ttu-id="2c34e-200">Fluxo Detalhado</span><span class="sxs-lookup"><span data-stu-id="2c34e-200">Verbose stream</span></span>
<span data-ttu-id="2c34e-201">O fluxo de mensagens Detalhado destina-se a informações gerais sobre a operação do runbook.</span><span class="sxs-lookup"><span data-stu-id="2c34e-201">The Verbose message stream is for general information about the runbook operation.</span></span> <span data-ttu-id="2c34e-202">Como o [Fluxo de Depuração](#Debug) não está disponível em um runbook, as mensagens detalhadas deverão ser usadas para informações de depuração.</span><span class="sxs-lookup"><span data-stu-id="2c34e-202">Since the [Debug Stream](#Debug) is not available in a runbook, verbose messages should be used for debug information.</span></span> <span data-ttu-id="2c34e-203">Por padrão, as mensagens detalhadas de runbooks publicados não serão armazenadas no histórico do trabalho.</span><span class="sxs-lookup"><span data-stu-id="2c34e-203">By default, verbose messages from published runbooks will not be stored in the job history.</span></span> <span data-ttu-id="2c34e-204">Para armazenar as mensagens detalhadas, configure runbooks publicados como Registros Detalhados de Log na guia Configurar do runbook no Portal de Gerenciamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="2c34e-204">To store verbose messages, configure published runbooks to Log Verbose Records on the Configure tab of the runbook in the Azure Management Portal.</span></span> <span data-ttu-id="2c34e-205">Na maioria dos casos, você deve manter a configuração padrão de não obter o log de registros detalhados para um runbook por motivos de desempenho.</span><span class="sxs-lookup"><span data-stu-id="2c34e-205">In most cases, you should keep the default setting of not logging verbose records for a runbook for performance reasons.</span></span> <span data-ttu-id="2c34e-206">Só ative essa opção para solucionar problemas ou depurar um runbook.</span><span class="sxs-lookup"><span data-stu-id="2c34e-206">Turn on this option only to troubleshoot or debug a runbook.</span></span>

<span data-ttu-id="2c34e-207">Quando você estiver [testando um runbook](automation-testing-runbook.md), as mensagens detalhadas não serão exibidas, mesmo se o runbook estiver configurado para log de registros detalhados.</span><span class="sxs-lookup"><span data-stu-id="2c34e-207">When [testing a runbook](automation-testing-runbook.md), verbose messages are not displayed even if the runbook is configured to log verbose records.</span></span> <span data-ttu-id="2c34e-208">Para exibir as mensagens detalhadas enquanto [testa um runbook](automation-testing-runbook.md), você deverá definir a variável $VerbosePreference como Continue.</span><span class="sxs-lookup"><span data-stu-id="2c34e-208">To display verbose messages while [testing a runbook](automation-testing-runbook.md), you must set the $VerbosePreference variable to Continue.</span></span> <span data-ttu-id="2c34e-209">Com esse conjunto de variáveis, as mensagens detalhadas serão exibidas no Painel de Saída de Teste do Portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="2c34e-209">With that variable set, verbose messages will be displayed in the Test Output Pane of the Azure portal.</span></span>

<span data-ttu-id="2c34e-210">Criar uma mensagem detalhada usando o cmdlet [Write-Verbose](http://technet.microsoft.com/library/hh849951.aspx) .</span><span class="sxs-lookup"><span data-stu-id="2c34e-210">Create a verbose message using the [Write-Verbose](http://technet.microsoft.com/library/hh849951.aspx) cmdlet.</span></span>

    #The following line creates a verbose message.

    Write-Verbose –Message "This is a verbose message."

### <a name="debug-stream"></a><span data-ttu-id="2c34e-211">Fluxo de Depuração</span><span class="sxs-lookup"><span data-stu-id="2c34e-211">Debug stream</span></span>
<span data-ttu-id="2c34e-212">O fluxo de Depuração deve ser usado por um usuário interativo e não deve ser usado em runbooks.</span><span class="sxs-lookup"><span data-stu-id="2c34e-212">The Debug stream is intended for use with an interactive user and should not be used in runbooks.</span></span>

## <a name="progress-records"></a><span data-ttu-id="2c34e-213">Registros de andamento</span><span class="sxs-lookup"><span data-stu-id="2c34e-213">Progress records</span></span>
<span data-ttu-id="2c34e-214">Se você configurar um runbook para criar um log de registros de andamento (na guia Configurar do runbook no Portal do Azure), um registro será gravado no histórico de trabalhos antes e após a execução de cada atividade.</span><span class="sxs-lookup"><span data-stu-id="2c34e-214">If you configure a runbook to log progress records (on the Configure tab of the runbook in the Azure portal), then a record will be written to the job history before and after each activity is run.</span></span> <span data-ttu-id="2c34e-215">Na maioria dos casos, você deverá manter a configuração padrão de não obter o log de registros detalhados para um runbook para maximizar o desempenho.</span><span class="sxs-lookup"><span data-stu-id="2c34e-215">In most cases, you should keep the default setting of not logging progress records for a runbook in order to maximize performance.</span></span> <span data-ttu-id="2c34e-216">Só ative essa opção para solucionar problemas ou depurar um runbook.</span><span class="sxs-lookup"><span data-stu-id="2c34e-216">Turn on this option only to troubleshoot or debug a runbook.</span></span> <span data-ttu-id="2c34e-217">Quando você estiver testando um runbook, as mensagens de andamento não serão exibidas, mesmo se o runbook estiver configurado para log de registros de andamento.</span><span class="sxs-lookup"><span data-stu-id="2c34e-217">When testing a runbook, progress messages are not displayed even if the runbook is configured to log progress records.</span></span>

<span data-ttu-id="2c34e-218">O cmdlet [Write-Progress](http://technet.microsoft.com/library/hh849902.aspx) não é válido em um runbook, já que ele deve ser usado com um usuário interativo.</span><span class="sxs-lookup"><span data-stu-id="2c34e-218">The [Write-Progress](http://technet.microsoft.com/library/hh849902.aspx) cmdlet is not valid in a runbook, since this is intended for use with an interactive user.</span></span>

## <a name="preference-variables"></a><span data-ttu-id="2c34e-219">Variáveis de preferência</span><span class="sxs-lookup"><span data-stu-id="2c34e-219">Preference variables</span></span>
<span data-ttu-id="2c34e-220">O Windows PowerShell usa [variáveis de preferência](http://technet.microsoft.com/library/hh847796.aspx) para determinar como responder aos dados enviados para fluxos de saída diferentes.</span><span class="sxs-lookup"><span data-stu-id="2c34e-220">Windows PowerShell uses [preference variables](http://technet.microsoft.com/library/hh847796.aspx) to determine how to respond to data sent to different output streams.</span></span> <span data-ttu-id="2c34e-221">Você pode definir essas variáveis em um runbook para controlar como ele responde aos dados enviados em diferentes fluxos.</span><span class="sxs-lookup"><span data-stu-id="2c34e-221">You can set these variables in a runbook to control how it will respond to data sent into different streams.</span></span>

<span data-ttu-id="2c34e-222">A tabela a seguir lista as variáveis de preferência que podem ser usadas em runbooks com seus valores válidos e padrão.</span><span class="sxs-lookup"><span data-stu-id="2c34e-222">The following table lists the preference variables that can be used in runbooks with their valid and default values.</span></span> <span data-ttu-id="2c34e-223">Observe que essa tabela inclui somente os valores que são válidos em um runbook.</span><span class="sxs-lookup"><span data-stu-id="2c34e-223">Note that this table only includes the values that are valid in a runbook.</span></span> <span data-ttu-id="2c34e-224">Os valores adicionais serão válidos para as variáveis de preferência quando usados no Windows PowerShell fora da Automação do Azure.</span><span class="sxs-lookup"><span data-stu-id="2c34e-224">Additional values are valid for the preference variables when used in Windows PowerShell outside of Azure Automation.</span></span>

| <span data-ttu-id="2c34e-225">Variável</span><span class="sxs-lookup"><span data-stu-id="2c34e-225">Variable</span></span> | <span data-ttu-id="2c34e-226">Valor Padrão</span><span class="sxs-lookup"><span data-stu-id="2c34e-226">Default Value</span></span> | <span data-ttu-id="2c34e-227">Valores Válidos</span><span class="sxs-lookup"><span data-stu-id="2c34e-227">Valid Values</span></span> |
|:--- |:--- |:--- |
| <span data-ttu-id="2c34e-228">WarningPreference</span><span class="sxs-lookup"><span data-stu-id="2c34e-228">WarningPreference</span></span> |<span data-ttu-id="2c34e-229">Continue</span><span class="sxs-lookup"><span data-stu-id="2c34e-229">Continue</span></span> |<span data-ttu-id="2c34e-230">Stop</span><span class="sxs-lookup"><span data-stu-id="2c34e-230">Stop</span></span><br><span data-ttu-id="2c34e-231">Continue</span><span class="sxs-lookup"><span data-stu-id="2c34e-231">Continue</span></span><br><span data-ttu-id="2c34e-232">SilentlyContinue</span><span class="sxs-lookup"><span data-stu-id="2c34e-232">SilentlyContinue</span></span> |
| <span data-ttu-id="2c34e-233">ErrorActionPreference</span><span class="sxs-lookup"><span data-stu-id="2c34e-233">ErrorActionPreference</span></span> |<span data-ttu-id="2c34e-234">Continue</span><span class="sxs-lookup"><span data-stu-id="2c34e-234">Continue</span></span> |<span data-ttu-id="2c34e-235">Stop</span><span class="sxs-lookup"><span data-stu-id="2c34e-235">Stop</span></span><br><span data-ttu-id="2c34e-236">Continue</span><span class="sxs-lookup"><span data-stu-id="2c34e-236">Continue</span></span><br><span data-ttu-id="2c34e-237">SilentlyContinue</span><span class="sxs-lookup"><span data-stu-id="2c34e-237">SilentlyContinue</span></span> |
| <span data-ttu-id="2c34e-238">VerbosePreference</span><span class="sxs-lookup"><span data-stu-id="2c34e-238">VerbosePreference</span></span> |<span data-ttu-id="2c34e-239">SilentlyContinue</span><span class="sxs-lookup"><span data-stu-id="2c34e-239">SilentlyContinue</span></span> |<span data-ttu-id="2c34e-240">Stop</span><span class="sxs-lookup"><span data-stu-id="2c34e-240">Stop</span></span><br><span data-ttu-id="2c34e-241">Continue</span><span class="sxs-lookup"><span data-stu-id="2c34e-241">Continue</span></span><br><span data-ttu-id="2c34e-242">SilentlyContinue</span><span class="sxs-lookup"><span data-stu-id="2c34e-242">SilentlyContinue</span></span> |

<span data-ttu-id="2c34e-243">A tabela a seguir lista o comportamento para os valores de variáveis de preferência válidos em runbooks.</span><span class="sxs-lookup"><span data-stu-id="2c34e-243">The following table lists the behavior for the preference variable values that are valid in runbooks.</span></span>

| <span data-ttu-id="2c34e-244">Valor</span><span class="sxs-lookup"><span data-stu-id="2c34e-244">Value</span></span> | <span data-ttu-id="2c34e-245">Comportamento</span><span class="sxs-lookup"><span data-stu-id="2c34e-245">Behavior</span></span> |
|:--- |:--- |
| <span data-ttu-id="2c34e-246">Continue</span><span class="sxs-lookup"><span data-stu-id="2c34e-246">Continue</span></span> |<span data-ttu-id="2c34e-247">Registra em log a mensagem e continua executando o runbook.</span><span class="sxs-lookup"><span data-stu-id="2c34e-247">Logs the message and continues executing the runbook.</span></span> |
| <span data-ttu-id="2c34e-248">SilentlyContinue</span><span class="sxs-lookup"><span data-stu-id="2c34e-248">SilentlyContinue</span></span> |<span data-ttu-id="2c34e-249">Continua executando o runbook sem registrar em log a mensagem.</span><span class="sxs-lookup"><span data-stu-id="2c34e-249">Continues executing the runbook without logging the message.</span></span> <span data-ttu-id="2c34e-250">Isso tem o efeito de ignorar a mensagem.</span><span class="sxs-lookup"><span data-stu-id="2c34e-250">This has the effect of ignoring the message.</span></span> |
| <span data-ttu-id="2c34e-251">Stop</span><span class="sxs-lookup"><span data-stu-id="2c34e-251">Stop</span></span> |<span data-ttu-id="2c34e-252">Registra em log a mensagem e suspende o runbook.</span><span class="sxs-lookup"><span data-stu-id="2c34e-252">Logs the message and suspends the runbook.</span></span> |

## <a name="retrieving-runbook-output-and-messages"></a><span data-ttu-id="2c34e-253">Recuperando saída e mensagens do runbook</span><span class="sxs-lookup"><span data-stu-id="2c34e-253">Retrieving runbook output and messages</span></span>
### <a name="azure-portal"></a><span data-ttu-id="2c34e-254">Portal do Azure</span><span class="sxs-lookup"><span data-stu-id="2c34e-254">Azure portal</span></span>
<span data-ttu-id="2c34e-255">Você pode exibir os detalhes de um trabalho de runbook no Portal do Azure na guia Trabalhos de um runbook.</span><span class="sxs-lookup"><span data-stu-id="2c34e-255">You can view the details of a runbook job in the Azure portal from the Jobs tab of a runbook.</span></span> <span data-ttu-id="2c34e-256">O Resumo do trabalho exibirá os parâmetros de entrada e o [Fluxo de Saída](#Output) , além de informações gerais sobre o trabalho e todas as exceções, caso tenham ocorrido.</span><span class="sxs-lookup"><span data-stu-id="2c34e-256">The Summary of the job will display the input parameters and the [Output Stream](#Output) in addition to general information about the job and any exceptions if they occurred.</span></span> <span data-ttu-id="2c34e-257">O Histórico incluirá mensagens do [Fluxo de Saída](#Output) e dos [Fluxos de Erro e de Aviso](#WarningError), além do [Fluxo Detalhado](#Verbose) e dos [Registros de Andamento](#Progress), caso o runbook esteja configurado para o log de registros detalhados e de andamento.</span><span class="sxs-lookup"><span data-stu-id="2c34e-257">The History will include messages from the [Output Stream](#Output) and [Warning and Error Streams](#WarningError) in addition to the [Verbose Stream](#Verbose) and [Progress Records](#Progress) if the runbook is configured to log verbose and progress records.</span></span>

### <a name="windows-powershell"></a><span data-ttu-id="2c34e-258">Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="2c34e-258">Windows PowerShell</span></span>
<span data-ttu-id="2c34e-259">No Windows PowerShell, você pode recuperar saída e mensagens de um runbook usando o cmdlet [Get-AzureAutomationJobOutput](https://msdn.microsoft.com/library/mt603476.aspx) .</span><span class="sxs-lookup"><span data-stu-id="2c34e-259">In Windows PowerShell, you can retrieve output and messages from a runbook using the [Get-AzureAutomationJobOutput](https://msdn.microsoft.com/library/mt603476.aspx) cmdlet.</span></span> <span data-ttu-id="2c34e-260">Esse cmdlet exige a ID do trabalho e tem um parâmetro chamado Stream, onde você pode especificar qual fluxo será retornado.</span><span class="sxs-lookup"><span data-stu-id="2c34e-260">This cmdlet requires the ID of the job and has a parameter called Stream where you specify which stream to return.</span></span> <span data-ttu-id="2c34e-261">Você pode especificar Any para retornar todos os fluxos do trabalho.</span><span class="sxs-lookup"><span data-stu-id="2c34e-261">You can specify Any to return all streams for the job.</span></span>

<span data-ttu-id="2c34e-262">O exemplo a seguir inicia um runbook de exemplo e aguarda a sua conclusão.</span><span class="sxs-lookup"><span data-stu-id="2c34e-262">The following example starts a sample runbook and then waits for it to complete.</span></span> <span data-ttu-id="2c34e-263">Depois de concluído, seu fluxo de saída será coletado do trabalho.</span><span class="sxs-lookup"><span data-stu-id="2c34e-263">Once completed, its output stream is collected from the job.</span></span>

    $job = Start-AzureRmAutomationRunbook -ResourceGroupName "ResourceGroup01" `
    –AutomationAccountName "MyAutomationAccount" –Name "Test-Runbook"

    $doLoop = $true
    While ($doLoop) {
       $job = Get-AzureRmAutomationJob -ResourceGroupName "ResourceGroup01" `
       –AutomationAccountName "MyAutomationAccount" -Id $job.JobId
       $status = $job.Status
       $doLoop = (($status -ne "Completed") -and ($status -ne "Failed") -and ($status -ne "Suspended") -and ($status -ne "Stopped")
    }

    Get-AzureRmAutomationJobOutput -ResourceGroupName "ResourceGroup01" `
    –AutomationAccountName "MyAutomationAccount" -Id $job.JobId –Stream Output

### <a name="graphical-authoring"></a><span data-ttu-id="2c34e-264">Criação gráfica</span><span class="sxs-lookup"><span data-stu-id="2c34e-264">Graphical Authoring</span></span>
<span data-ttu-id="2c34e-265">Para runbooks gráficos, um log extra está disponível na forma de rastreamento em nível de atividade.</span><span class="sxs-lookup"><span data-stu-id="2c34e-265">For graphical runbooks, extra logging is available in the form of activity-level tracing.</span></span>  <span data-ttu-id="2c34e-266">Há dois níveis de rastreamento: Básico e Detalhado.</span><span class="sxs-lookup"><span data-stu-id="2c34e-266">There are two levels of tracing: Basic and Detailed.</span></span>  <span data-ttu-id="2c34e-267">No rastreamento Básico, é possível ver a hora de início e de término de cada atividade do runbook, além de informações relacionadas a quaisquer repetições de atividade, como o número de tentativas e a hora de início da atividade.</span><span class="sxs-lookup"><span data-stu-id="2c34e-267">In Basic tracing, you can see the start and end time of each activity in the runbook plus information related to any activity retries, such as number of attempts and start time of the activity.</span></span>  <span data-ttu-id="2c34e-268">No rastreamento Detalhado, você obtém o rastreamento Básico, além de dados de entrada e de saída para cada atividade.</span><span class="sxs-lookup"><span data-stu-id="2c34e-268">In Detailed tracing, you get Basic tracing plus input and output data for each activity.</span></span>  <span data-ttu-id="2c34e-269">Observe que, atualmente, os registros de rastreamento são escritos usando a transmissão detalhada; portanto, é necessário, habilitar o log Detalhado ao habilitar o rastreamento.</span><span class="sxs-lookup"><span data-stu-id="2c34e-269">Note that currently the trace records are written using the verbose stream, so you must enable Verbose logging when you enable tracing.</span></span>  <span data-ttu-id="2c34e-270">Para runbooks gráficos com o rastreamento habilitado, não é necessário fazer registros de progresso de log, pois o rastreamento Básico tem a mesma finalidade e é mais informativo.</span><span class="sxs-lookup"><span data-stu-id="2c34e-270">For graphical runbooks with tracing enabled there is no need to log progress records, because the Basic tracing serves the same purpose and is more informative.</span></span>

![Modo de exibição Transmissões de Trabalho da criação gráfica](media/automation-runbook-output-and-messages/job-streams-view-blade.png)

<span data-ttu-id="2c34e-272">Na captura de tela acima, é possível ver que, ao habilitar o log Detalhado e o rastreamento para runbooks gráficos, muito mais informações estão disponíveis no modo de exibição Transmissões de Trabalho de produção.</span><span class="sxs-lookup"><span data-stu-id="2c34e-272">You can see from the above screenshot that when you enable Verbose logging and tracing for Graphical runbooks, much more information is available in the production Job Streams view.</span></span>  <span data-ttu-id="2c34e-273">Essas informações extra podem ser essenciais para solucionar problemas de produção com um runbook e, portanto, você só deve habilitá-lo para essa finalidade e não como uma prática geral.</span><span class="sxs-lookup"><span data-stu-id="2c34e-273">This extra information can be essential for troubleshooting production problems with a runbook, and therefore you should only enable it for that purpose and not as a general practice.</span></span>    
<span data-ttu-id="2c34e-274">Especificamente, os registros de Rastreamento podem ser inúmeros.</span><span class="sxs-lookup"><span data-stu-id="2c34e-274">The Trace records can be especially numerous.</span></span>  <span data-ttu-id="2c34e-275">Com o rastreamento de runbook Gráfico, é possível obter de dois a quatro registros por atividade, dependendo se o rastreamento Básico ou Detalhado tiver sido configurado.</span><span class="sxs-lookup"><span data-stu-id="2c34e-275">With Graphical runbook tracing you can get two to four records per activity depending on whether you have configured Basic or Detailed tracing.</span></span>  <span data-ttu-id="2c34e-276">A menos que você precise dessas informações para acompanhar o progresso de um runbook com relação à solução de problemas, convém manter o Rastreamento desligado.</span><span class="sxs-lookup"><span data-stu-id="2c34e-276">Unless you need this information to track the progress of a runbook for troubleshooting, you might want to keep Tracing turned off.</span></span>

<span data-ttu-id="2c34e-277">**Para habilitar o rastreamento em nível de atividade, execute as etapas a seguir.**</span><span class="sxs-lookup"><span data-stu-id="2c34e-277">**To enable activity-level tracing, perform the following steps.**</span></span>

1. <span data-ttu-id="2c34e-278">No Portal do Azure, abra sua conta de Automação.</span><span class="sxs-lookup"><span data-stu-id="2c34e-278">In the Azure Portal, open your Automation account.</span></span>
2. <span data-ttu-id="2c34e-279">Clique no bloco **Runbooks** para abrir a lista de runbooks.</span><span class="sxs-lookup"><span data-stu-id="2c34e-279">Click on the **Runbooks** tile to open the list of runbooks.</span></span>
3. <span data-ttu-id="2c34e-280">Na folha Runbooks, clique para selecionar um runbook gráfico na lista de runbooks.</span><span class="sxs-lookup"><span data-stu-id="2c34e-280">On the Runbooks blade, click to select a graphical runbook from your list of runbooks.</span></span>
4. <span data-ttu-id="2c34e-281">Na folha Configurações do runbook selecionado, clique em **Log e Rastreamento**.</span><span class="sxs-lookup"><span data-stu-id="2c34e-281">On the Settings blade for the selected runbook, click **Logging and Tracing**.</span></span>
5. <span data-ttu-id="2c34e-282">Na folha Log e Rastreamento, sob registros detalhados de Log, clique em **Ativado** para habilitar o log detalhado e, sob o Rastreamento em nível de atividade, altere o nível de rastreamento para **Básico** ou **Detalhado** com base no nível de rastreamento necessário.</span><span class="sxs-lookup"><span data-stu-id="2c34e-282">On the Logging and Tracing blade, under Log verbose records, click **On** to enable verbose logging and udner Activity-level tracing, change the trace level to **Basic** or **Detailed** based on the level of tracing you require.</span></span><br>
   
   ![Folha Log e Rastreamento da criação gráfica](media/automation-runbook-output-and-messages/logging-and-tracing-settings-blade.png)

### <a name="microsoft-operations-management-suite-oms-log-analytics"></a><span data-ttu-id="2c34e-284">Log Analytics do OMS (Microsoft Operations Management Suite)</span><span class="sxs-lookup"><span data-stu-id="2c34e-284">Microsoft Operations Management Suite (OMS) Log Analytics</span></span>
<span data-ttu-id="2c34e-285">A Automação pode enviar o status do trabalho de runbook e fluxos de trabalho para seu espaço de trabalho de Log Analytics do Microsoft Operations Management Suite (OMS).</span><span class="sxs-lookup"><span data-stu-id="2c34e-285">Automation can send runbook job status and job streams to your Microsoft Operations Management Suite (OMS) Log Analytics workspace.</span></span>  <span data-ttu-id="2c34e-286">Com o Log Analytics, você pode</span><span class="sxs-lookup"><span data-stu-id="2c34e-286">With Log Analytics you can,</span></span>

* <span data-ttu-id="2c34e-287">Obter informações sobre os trabalhos de Automação</span><span class="sxs-lookup"><span data-stu-id="2c34e-287">Get insight on your Automation jobs</span></span> 
* <span data-ttu-id="2c34e-288">Disparar um email ou um alerta com base no status do trabalho de runbook (por exemplo, com falha ou suspenso)</span><span class="sxs-lookup"><span data-stu-id="2c34e-288">Trigger an email or alert based on your runbook job status (e.g. failed or suspended)</span></span> 
* <span data-ttu-id="2c34e-289">Escrever consultas avançadas em seus fluxos de trabalho</span><span class="sxs-lookup"><span data-stu-id="2c34e-289">Write advanced queries across your job streams</span></span> 
* <span data-ttu-id="2c34e-290">Correlacionar trabalhos em contas de Automação</span><span class="sxs-lookup"><span data-stu-id="2c34e-290">Correlate jobs across Automation accounts</span></span> 
* <span data-ttu-id="2c34e-291">Visualizar o histórico de trabalho ao longo do tempo</span><span class="sxs-lookup"><span data-stu-id="2c34e-291">Visualize your job history over time</span></span>    

<span data-ttu-id="2c34e-292">Para saber mais sobre como configurar a integração com o Log Analytics para coletar, correlacionar e agir sobre dados de trabalho, confira [Encaminhar fluxos de trabalho e status do trabalho da Automação para o Log Analytics (OMS)](automation-manage-send-joblogs-log-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="2c34e-292">For more information on how to configure integration with Log Analytics to collect, correlate and act on job data, see [Forward job status and job streams from Automation to Log Analytics (OMS)](automation-manage-send-joblogs-log-analytics.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="2c34e-293">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="2c34e-293">Next steps</span></span>
* <span data-ttu-id="2c34e-294">Para saber mais sobre a execução de runbooks, como monitorar trabalhos de runbook e outros detalhes técnicos, confira [Acompanhar um trabalho de runbook](automation-runbook-execution.md)</span><span class="sxs-lookup"><span data-stu-id="2c34e-294">To learn more about runbook execution, how to monitor runbook jobs, and other technical details, see [Track a runbook job](automation-runbook-execution.md)</span></span>
* <span data-ttu-id="2c34e-295">Para entender como criar e usar runbooks filho, consulte [Runbooks filho na Automação do Azure](automation-child-runbooks.md)</span><span class="sxs-lookup"><span data-stu-id="2c34e-295">To understand how to design and use child runbooks, see [Child runbooks in Azure Automation](automation-child-runbooks.md)</span></span>

