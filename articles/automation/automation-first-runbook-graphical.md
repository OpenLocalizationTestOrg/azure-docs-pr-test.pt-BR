---
title: "Meu primeiro runbook gráfico na Automação do Azure | Microsoft Docs"
description: "Tutorial que orienta você pela criação, teste e publicação de um runbook gráfico simples."
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: 
keywords: "runbook, modelo de runbook, automação de runbook, runbook do azure"
ms.assetid: dcb88f19-ed2b-4372-9724-6625cd287c8a
ms.service: automation
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 05/17/2017
ms.author: magoedte;bwren
ms.openlocfilehash: 9d4b28416376482247127698bec7c99b83308885
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/11/2017
---
# <a name="my-first-graphical-runbook"></a><span data-ttu-id="9d432-104">O meu primeiro runbook gráfico</span><span class="sxs-lookup"><span data-stu-id="9d432-104">My first graphical runbook</span></span>

> [!div class="op_single_selector"]
> * [<span data-ttu-id="9d432-105">Gráfico</span><span class="sxs-lookup"><span data-stu-id="9d432-105">Graphical</span></span>](automation-first-runbook-graphical.md)
> * [<span data-ttu-id="9d432-106">PowerShell</span><span class="sxs-lookup"><span data-stu-id="9d432-106">PowerShell</span></span>](automation-first-runbook-textual-powershell.md)
> * [<span data-ttu-id="9d432-107">Fluxo de Trabalho do PowerShell</span><span class="sxs-lookup"><span data-stu-id="9d432-107">PowerShell Workflow</span></span>](automation-first-runbook-textual.md)
> 
> 

<span data-ttu-id="9d432-108">Este tutorial orienta você durante a criação de um [runbook gráfico](automation-runbook-types.md#graphical-runbooks) na Automação do Azure.</span><span class="sxs-lookup"><span data-stu-id="9d432-108">This tutorial walks you through the creation of a [graphical runbook](automation-runbook-types.md#graphical-runbooks) in Azure Automation.</span></span>  <span data-ttu-id="9d432-109">Começamos com um runbook simples, que é testado e publicado enquanto explicamos como acompanhar o status do trabalho do runbook.</span><span class="sxs-lookup"><span data-stu-id="9d432-109">We start with a simple runbook that tests and publishes while we explain how to track the status of the runbook job.</span></span>  <span data-ttu-id="9d432-110">Em seguida, modificamos o runbook para gerenciar os recursos do Azure, neste caso, iniciando uma máquina virtual do Azure.</span><span class="sxs-lookup"><span data-stu-id="9d432-110">Then we modify the runbook to actually manage Azure resources, in this case starting an Azure virtual machine.</span></span>  <span data-ttu-id="9d432-111">Em seguida, concluímos o tutorial, tornando o runbook mais robusto adicionando parâmetros de runbook e links condicionais.</span><span class="sxs-lookup"><span data-stu-id="9d432-111">Then we complete the tutorial by making the runbook more robust by adding runbook parameters and conditional links.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="9d432-112">Pré-requisitos</span><span class="sxs-lookup"><span data-stu-id="9d432-112">Prerequisites</span></span>
<span data-ttu-id="9d432-113">Para concluir este tutorial, você precisará do seguinte.</span><span class="sxs-lookup"><span data-stu-id="9d432-113">To complete this tutorial, you will need the following.</span></span>

* <span data-ttu-id="9d432-114">Assinatura do Azure.</span><span class="sxs-lookup"><span data-stu-id="9d432-114">Azure subscription.</span></span>  <span data-ttu-id="9d432-115">Se você ainda não tiver uma, poderá [ativar os benefícios de assinante do MSDN](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/) ou <a href="/pricing/free-account/" target="_blank">[inscrever-se em uma conta gratuita](https://azure.microsoft.com/free/).</span><span class="sxs-lookup"><span data-stu-id="9d432-115">If you don't have one yet, you can [activate your MSDN subscriber benefits](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/) or <a href="/pricing/free-account/" target="_blank">[sign up for a free account](https://azure.microsoft.com/free/).</span></span>
* <span data-ttu-id="9d432-116">[Conta da Automação do Azure](automation-sec-configure-azure-runas-account.md) para manter o runbook e se autenticar nos recursos do Azure.</span><span class="sxs-lookup"><span data-stu-id="9d432-116">[Azure Automation account](automation-sec-configure-azure-runas-account.md) to hold the runbook and authenticate to Azure resources.</span></span>  <span data-ttu-id="9d432-117">Esta conta deve ter permissão para iniciar e parar a máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="9d432-117">This account must have permission to start and stop the virtual machine.</span></span>
* <span data-ttu-id="9d432-118">Uma máquina virtual do Azure.</span><span class="sxs-lookup"><span data-stu-id="9d432-118">An Azure virtual machine.</span></span>  <span data-ttu-id="9d432-119">Vamos parar e iniciar esse computador, portanto ele não deve ser de produção.</span><span class="sxs-lookup"><span data-stu-id="9d432-119">We will stop and start this machine so it should not be production.</span></span>

## <a name="step-1---create-runbook"></a><span data-ttu-id="9d432-120">Etapa 1: criar o runbook</span><span class="sxs-lookup"><span data-stu-id="9d432-120">Step 1 - Create runbook</span></span>
<span data-ttu-id="9d432-121">Começamos criando um runbook simples que exibe o texto *Olá mundo*.</span><span class="sxs-lookup"><span data-stu-id="9d432-121">We start by creating a simple runbook that outputs the text *Hello World*.</span></span>

1. <span data-ttu-id="9d432-122">No portal do Azure, abra sua conta da Automação.</span><span class="sxs-lookup"><span data-stu-id="9d432-122">In the Azure portal, open your Automation account.</span></span>  
   <span data-ttu-id="9d432-123">A página da conta de Automação fornece uma exibição rápida dos recursos nessa conta.</span><span class="sxs-lookup"><span data-stu-id="9d432-123">The Automation account page gives you a quick view of the resources in this account.</span></span>  <span data-ttu-id="9d432-124">Você já deve ter alguns ativos.</span><span class="sxs-lookup"><span data-stu-id="9d432-124">You should already have some Assets.</span></span>  <span data-ttu-id="9d432-125">A maioria deles são os módulos que são incluídos automaticamente em uma nova conta de Automação.</span><span class="sxs-lookup"><span data-stu-id="9d432-125">Most of those are the modules that are automatically included in a new Automation account.</span></span>  <span data-ttu-id="9d432-126">Você também deve ter o ativo de credencial que é mencionado nos [pré-requisitos](#prerequisites).</span><span class="sxs-lookup"><span data-stu-id="9d432-126">You should also have the Credential asset that's mentioned in the [prerequisites](#prerequisites).</span></span>
2. <span data-ttu-id="9d432-127">Clique no bloco **Runbooks** para abrir a lista de runbooks.</span><span class="sxs-lookup"><span data-stu-id="9d432-127">Click the **Runbooks** tile to open the list of runbooks.</span></span><br> <span data-ttu-id="9d432-128">![Controle de runbooks](media/automation-first-runbook-graphical/runbooks-resources-tile.png)</span><span class="sxs-lookup"><span data-stu-id="9d432-128">![Runbooks control](media/automation-first-runbook-graphical/runbooks-resources-tile.png)</span></span>
3. <span data-ttu-id="9d432-129">Crie um novo runbook clicando no botão **Adicionar um runbook** e em **Criar um novo runbook**.</span><span class="sxs-lookup"><span data-stu-id="9d432-129">Create a new runbook by clicking on the **Add a runbook** button and then **Create a new runbook**.</span></span>
4. <span data-ttu-id="9d432-130">Atribua o nome *MyFirstRunbook-Graphical*ao runbook.</span><span class="sxs-lookup"><span data-stu-id="9d432-130">Give the runbook the name *MyFirstRunbook-Graphical*.</span></span>
5. <span data-ttu-id="9d432-131">Neste caso, criaremos um [runbook gráfico](automation-graphical-authoring-intro.md), portanto, escolha **Gráfico** para **Tipo de runbook**.</span><span class="sxs-lookup"><span data-stu-id="9d432-131">In this case, we're going to create a [graphical runbook](automation-graphical-authoring-intro.md) so select **Graphical** for **Runbook type**.</span></span><br> <span data-ttu-id="9d432-132">![Novo runbook](media/automation-first-runbook-graphical/create-new-runbook.png)</span><span class="sxs-lookup"><span data-stu-id="9d432-132">![New runbook](media/automation-first-runbook-graphical/create-new-runbook.png)</span></span><br>
6. <span data-ttu-id="9d432-133">Clique em **criar** para criar o runbook e abrir o editor gráfico.</span><span class="sxs-lookup"><span data-stu-id="9d432-133">Click **Create** to create the runbook and open the graphical editor.</span></span>

## <a name="step-2---add-activities-to-the-runbook"></a><span data-ttu-id="9d432-134">Etapa 2: adicionar atividades ao runbook</span><span class="sxs-lookup"><span data-stu-id="9d432-134">Step 2 - Add activities to the runbook</span></span>
<span data-ttu-id="9d432-135">O controle Biblioteca no lado esquerdo do editor permite que você selecione as atividades para adicionar ao runbook.</span><span class="sxs-lookup"><span data-stu-id="9d432-135">The Library control on the left side of the editor allows you to select activities to add to your runbook.</span></span>  <span data-ttu-id="9d432-136">Adicionaremos um cmdlet **Write-Output** para exibir nosso o texto a partir do runbook.</span><span class="sxs-lookup"><span data-stu-id="9d432-136">We're going to add a **Write-Output** cmdlet to output text from the runbook.</span></span>

1. <span data-ttu-id="9d432-137">No controle Biblioteca, clique na caixa de texto de pesquisa e digite **Write-Output**.</span><span class="sxs-lookup"><span data-stu-id="9d432-137">In the Library control, click in the search textbox and type **Write-Output**.</span></span>  <span data-ttu-id="9d432-138">Os resultados da pesquisa serão exibidos abaixo.</span><span class="sxs-lookup"><span data-stu-id="9d432-138">The search results will be displayed below.</span></span> <br> <span data-ttu-id="9d432-139">![Microsoft.PowerShell.Utility](media/automation-first-runbook-graphical/search-powershell-cmdlet-writeoutput.png)</span><span class="sxs-lookup"><span data-stu-id="9d432-139">![Microsoft.PowerShell.Utility](media/automation-first-runbook-graphical/search-powershell-cmdlet-writeoutput.png)</span></span>
2. <span data-ttu-id="9d432-140">Role até o final da lista.</span><span class="sxs-lookup"><span data-stu-id="9d432-140">Scroll down to the bottom of the list.</span></span>  <span data-ttu-id="9d432-141">Você pode clicar com o botão direito do mouse em **Write-Output** e selecionar **Adicionar à tela** ou clicar na elipse ao lado do cmdlet, em seguida, selecionar **Adicionar à tela**.</span><span class="sxs-lookup"><span data-stu-id="9d432-141">You can either right-click **Write-Output** and select **Add to canvas** or click the ellipse next to the cmdlet and then select **Add to canvas**.</span></span>
3. <span data-ttu-id="9d432-142">Clique na atividade **Write-Output** na tela.</span><span class="sxs-lookup"><span data-stu-id="9d432-142">Click the **Write-Output** activity on the canvas.</span></span>  <span data-ttu-id="9d432-143">Isso abrirá a folha Controle da configuração, que permite a você configurar a atividade.</span><span class="sxs-lookup"><span data-stu-id="9d432-143">This opens the Configuration control blade, which allows you to configure the activity.</span></span>
4. <span data-ttu-id="9d432-144">O **Rótulo** usa por padrão o nome do cmdlet, mas podemos alterá-lo para algo mais amigável.</span><span class="sxs-lookup"><span data-stu-id="9d432-144">The **Label** defaults to the name of the cmdlet, but we can change it to something more friendly.</span></span> <span data-ttu-id="9d432-145">Altere-o para *Write Hello World to output*.</span><span class="sxs-lookup"><span data-stu-id="9d432-145">Change it to *Write Hello World to output*.</span></span>
5. <span data-ttu-id="9d432-146">Clique em **Parâmetros** para fornecer valores para os parâmetros do cmdlet.</span><span class="sxs-lookup"><span data-stu-id="9d432-146">Click **Parameters** to provide values for the cmdlet's parameters.</span></span>  
   <span data-ttu-id="9d432-147">Alguns cmdlets têm vários conjuntos de parâmetros e você precisa selecionar o que será usado.</span><span class="sxs-lookup"><span data-stu-id="9d432-147">Some cmdlets have multiple parameter sets, and you need to select which you one to use.</span></span> <span data-ttu-id="9d432-148">Nesse caso, **Write-Output** tem apenas um conjunto de parâmetros, portanto, não é necessário selecionar um.</span><span class="sxs-lookup"><span data-stu-id="9d432-148">In this case, **Write-Output** has only one parameter set, so you don't need to select one.</span></span> <br> <span data-ttu-id="9d432-149">![Propriedades de Write-Output](media/automation-first-runbook-graphical/write-output-properties-b.png)</span><span class="sxs-lookup"><span data-stu-id="9d432-149">![Write-Output properties](media/automation-first-runbook-graphical/write-output-properties-b.png)</span></span>
6. <span data-ttu-id="9d432-150">Selecione o parâmetro **InputObject** .</span><span class="sxs-lookup"><span data-stu-id="9d432-150">Select the **InputObject** parameter.</span></span>  <span data-ttu-id="9d432-151">Esse é o parâmetro em que especificamos o texto a ser enviado ao fluxo de saída.</span><span class="sxs-lookup"><span data-stu-id="9d432-151">This is the parameter where we specify the text to send to the output stream.</span></span>
7. <span data-ttu-id="9d432-152">No menu suspenso **Fonte de dados**, selecione **Expressão do PowerShell**.</span><span class="sxs-lookup"><span data-stu-id="9d432-152">In the **Data source** dropdown, select **PowerShell expression**.</span></span>  <span data-ttu-id="9d432-153">O menu suspenso **Fonte de dados** fornece diferentes fontes que podem ser usadas para popular um valor de parâmetro.</span><span class="sxs-lookup"><span data-stu-id="9d432-153">The **Data source** dropdown provides different sources that you use to populate a parameter value.</span></span>  
   <span data-ttu-id="9d432-154">Você pode usar a saída dessas fontes como outra atividade, um ativo de Automação ou uma expressão do PowerShell.</span><span class="sxs-lookup"><span data-stu-id="9d432-154">You can use output from such sources such as another activity, an Automation asset, or a PowerShell expression.</span></span>  <span data-ttu-id="9d432-155">Nesse caso, queremos apenas exibir o texto *Olá mundo*.</span><span class="sxs-lookup"><span data-stu-id="9d432-155">In this case, we just want to output the text *Hello World*.</span></span> <span data-ttu-id="9d432-156">Podemos usar uma expressão do PowerShell e especificar uma cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="9d432-156">We can use a PowerShell expression and specify a string.</span></span>
8. <span data-ttu-id="9d432-157">Na caixa **Expressão**, digite *"Olá mundo"* e, em seguida, clique em **OK** duas vezes para retornar à tela.</span><span class="sxs-lookup"><span data-stu-id="9d432-157">In the **Expression** box, type *"Hello World"* and then click **OK** twice to return to the canvas.</span></span><br> <span data-ttu-id="9d432-158">![PowerShell Expression](media/automation-first-runbook-graphical/expression-hello-world.png)</span><span class="sxs-lookup"><span data-stu-id="9d432-158">![PowerShell Expression](media/automation-first-runbook-graphical/expression-hello-world.png)</span></span>
9. <span data-ttu-id="9d432-159">Salve o runbook clicando em **Salvar**.</span><span class="sxs-lookup"><span data-stu-id="9d432-159">Save the runbook by clicking **Save**.</span></span><br> <span data-ttu-id="9d432-160">![Salvar runbook](media/automation-first-runbook-graphical/runbook-toolbar-save-revised20165.png)</span><span class="sxs-lookup"><span data-stu-id="9d432-160">![Save runbook](media/automation-first-runbook-graphical/runbook-toolbar-save-revised20165.png)</span></span>

## <a name="step-3---test-the-runbook"></a><span data-ttu-id="9d432-161">Etapa 3: testar o runbook</span><span class="sxs-lookup"><span data-stu-id="9d432-161">Step 3 - Test the runbook</span></span>
<span data-ttu-id="9d432-162">Antes que publicamos o runbook para disponibilizá-lo na produção, queremos testá-lo para garantir que ele funciona corretamente.</span><span class="sxs-lookup"><span data-stu-id="9d432-162">Before we publish the runbook to make it available in production, we want to test it to make sure that it works properly.</span></span>  <span data-ttu-id="9d432-163">Quando você testa um runbook, executa sua versão de **Rascunho** e vê sua saída interativamente.</span><span class="sxs-lookup"><span data-stu-id="9d432-163">When you test a runbook, you run its **Draft** version and view its output interactively.</span></span>

1. <span data-ttu-id="9d432-164">Clique em **Painel de teste** para abrir a folha Teste.</span><span class="sxs-lookup"><span data-stu-id="9d432-164">Click **Test pane** to open the Test blade.</span></span><br> <span data-ttu-id="9d432-165">![Painel de teste](media/automation-first-runbook-graphical/runbook-toolbar-test-revised20165.png)</span><span class="sxs-lookup"><span data-stu-id="9d432-165">![Test pane](media/automation-first-runbook-graphical/runbook-toolbar-test-revised20165.png)</span></span>
2. <span data-ttu-id="9d432-166">Clique em **Iniciar** para iniciar o teste.</span><span class="sxs-lookup"><span data-stu-id="9d432-166">Click **Start** to start the test.</span></span>  <span data-ttu-id="9d432-167">Essa deve ser a única opção habilitada.</span><span class="sxs-lookup"><span data-stu-id="9d432-167">This should be the only enabled option.</span></span>
3. <span data-ttu-id="9d432-168">Um [trabalho de runbook](automation-runbook-execution.md) é criado e seu status é exibido no painel.</span><span class="sxs-lookup"><span data-stu-id="9d432-168">A [runbook job](automation-runbook-execution.md) is created and its status displayed in the pane.</span></span>  
   <span data-ttu-id="9d432-169">O status do trabalho inicia como *Na fila* , indicando que ele está aguardando um trabalho de runbook na nuvem ficar disponível.</span><span class="sxs-lookup"><span data-stu-id="9d432-169">The job status starts as *Queued* indicating that it is waiting for a runbook worker in the cloud to become available.</span></span>  <span data-ttu-id="9d432-170">Em seguida, ele muda para *Iniciando* quando um trabalhador reivindicar o trabalho e para *Executando* quando o runbook realmente começar a ser executado.</span><span class="sxs-lookup"><span data-stu-id="9d432-170">It then moves to *Starting* when a worker claims the job, and then *Running* when the runbook actually starts running.</span></span>  
4. <span data-ttu-id="9d432-171">Quando o trabalho do runbook é concluído, sua saída é exibida.</span><span class="sxs-lookup"><span data-stu-id="9d432-171">When the runbook job completes, its output is displayed.</span></span> <span data-ttu-id="9d432-172">Em nosso caso, deveremos ver *Olá mundo*.</span><span class="sxs-lookup"><span data-stu-id="9d432-172">In our case, we should see *Hello World*.</span></span><br> <span data-ttu-id="9d432-173">![Olá mundo](media/automation-first-runbook-graphical/runbook-test-results.png)</span><span class="sxs-lookup"><span data-stu-id="9d432-173">![Hello World](media/automation-first-runbook-graphical/runbook-test-results.png)</span></span>
5. <span data-ttu-id="9d432-174">Feche a folha Teste para retornar à tela.</span><span class="sxs-lookup"><span data-stu-id="9d432-174">Close the Test blade to return to the canvas.</span></span>

## <a name="step-4---publish-and-start-the-runbook"></a><span data-ttu-id="9d432-175">Etapa 4: publicar e iniciar o runbook</span><span class="sxs-lookup"><span data-stu-id="9d432-175">Step 4 - Publish and start the runbook</span></span>
<span data-ttu-id="9d432-176">O runbook que criamos ainda está em Modo de rascunho.</span><span class="sxs-lookup"><span data-stu-id="9d432-176">The runbook that we created is still in Draft mode.</span></span> <span data-ttu-id="9d432-177">Precisamos publicá-lo antes que possamos executá-lo na produção.</span><span class="sxs-lookup"><span data-stu-id="9d432-177">We need to publish it before we can run it in production.</span></span>  <span data-ttu-id="9d432-178">Quando você publica um runbook, substitui a versão Publicada existente pela versão de Rascunho.</span><span class="sxs-lookup"><span data-stu-id="9d432-178">When you publish a runbook, you overwrite the existing Published version with the Draft version.</span></span>  <span data-ttu-id="9d432-179">Em nosso caso, não temos uma versão Publicada ainda porque que acabamos de criar o runbook.</span><span class="sxs-lookup"><span data-stu-id="9d432-179">In our case, we don't have a Published version yet because we just created the runbook.</span></span>

1. <span data-ttu-id="9d432-180">Clique em **Publicar** para publicar o runbook e em **Sim** quando solicitado.</span><span class="sxs-lookup"><span data-stu-id="9d432-180">Click **Publish** to publish the runbook and then **Yes** when prompted.</span></span><br> <span data-ttu-id="9d432-181">![Publicar](media/automation-first-runbook-graphical/runbook-toolbar-publish-revised20166.png)</span><span class="sxs-lookup"><span data-stu-id="9d432-181">![Publish](media/automation-first-runbook-graphical/runbook-toolbar-publish-revised20166.png)</span></span>
2. <span data-ttu-id="9d432-182">Se você rolar para a esquerda para exibir o runbook na folha **Runbooks**, ele mostrará um **Status de Criação** **Publicado**.</span><span class="sxs-lookup"><span data-stu-id="9d432-182">If you scroll left to view the runbook in the **Runbooks** blade, it shows an **Authoring Status** of **Published**.</span></span>
3. <span data-ttu-id="9d432-183">Role para a direita para exibir a folha para **MyFirstRunbook**.</span><span class="sxs-lookup"><span data-stu-id="9d432-183">Scroll back to the right to view the blade for **MyFirstRunbook**.</span></span>  
   <span data-ttu-id="9d432-184">As opções na parte superior nos permitem iniciar o runbook, agendá-lo para iniciar em algum momento no futuro ou criar um [webhook](automation-webhooks.md) para que ele possa ser iniciado por meio de uma chamada de HTTP.</span><span class="sxs-lookup"><span data-stu-id="9d432-184">The options across the top allow us to start the runbook, schedule it to start at some time in the future, or create a [webhook](automation-webhooks.md) so it can be started through an HTTP call.</span></span>
4. <span data-ttu-id="9d432-185">Queremos apenas iniciar o runbook, então clique em **Iniciar** e em **Sim** quando solicitado.</span><span class="sxs-lookup"><span data-stu-id="9d432-185">We just want to start the runbook so click **Start** and then **Yes** when prompted.</span></span><br> <span data-ttu-id="9d432-186">![Iniciar runbook](media/automation-first-runbook-graphical/runbook-controls-start-revised20165.png)</span><span class="sxs-lookup"><span data-stu-id="9d432-186">![Start runbook](media/automation-first-runbook-graphical/runbook-controls-start-revised20165.png)</span></span>
5. <span data-ttu-id="9d432-187">Uma folha de trabalho será aberto para o trabalho de runbook criado.</span><span class="sxs-lookup"><span data-stu-id="9d432-187">A job blade is opened for the runbook job that we created.</span></span>  <span data-ttu-id="9d432-188">Podemos fechar essa folha, mas, neste caso, deixaremos aberta para que possamos acompanhar o progresso do trabalho.</span><span class="sxs-lookup"><span data-stu-id="9d432-188">We can close this blade, but in this case we leave it open so we can watch the job's progress.</span></span>
6. <span data-ttu-id="9d432-189">O status do trabalho é mostrado em **Resumo do trabalho** e corresponde aos status que vimos quando testamos o runbook.</span><span class="sxs-lookup"><span data-stu-id="9d432-189">The job status is shown in **Job Summary** and matches the statuses that we saw when we tested the runbook.</span></span><br> <span data-ttu-id="9d432-190">![Resumo do trabalho](media/automation-first-runbook-graphical/runbook-job-summary.png)</span><span class="sxs-lookup"><span data-stu-id="9d432-190">![Job Summary](media/automation-first-runbook-graphical/runbook-job-summary.png)</span></span>
7. <span data-ttu-id="9d432-191">Assim que o status do runbook mostrar *Concluído*, clique em **Saída**.</span><span class="sxs-lookup"><span data-stu-id="9d432-191">Once the runbook status shows *Completed*, click **Output**.</span></span> <span data-ttu-id="9d432-192">A folha **Saída** é aberta e podemos ver nosso *Olá Mundo* no painel.</span><span class="sxs-lookup"><span data-stu-id="9d432-192">The **Output** blade is opened, and we can see our *Hello World* in the pane.</span></span><br> <span data-ttu-id="9d432-193">![Resumo do trabalho](media/automation-first-runbook-graphical/runbook-job-output.png)</span><span class="sxs-lookup"><span data-stu-id="9d432-193">![Job Summary](media/automation-first-runbook-graphical/runbook-job-output.png)</span></span>  
8. <span data-ttu-id="9d432-194">Feche a folha Saída.</span><span class="sxs-lookup"><span data-stu-id="9d432-194">Close the Output blade.</span></span>
9. <span data-ttu-id="9d432-195">Clique em **Todos os Logs** para abrir a folha Fluxos do trabalho do runbook.</span><span class="sxs-lookup"><span data-stu-id="9d432-195">Click **All Logs** to open the Streams blade for the runbook job.</span></span>  <span data-ttu-id="9d432-196">Devemos ver apenas *Olá Mundo* no fluxo de saída, mas isso pode mostrar outros fluxos de um trabalho do runbook como Detalhado e Erro se o runbook gravar neles.</span><span class="sxs-lookup"><span data-stu-id="9d432-196">We should only see *Hello World* in the output stream, but this can show other streams for a runbook job such as Verbose and Error if the runbook writes to them.</span></span><br> <span data-ttu-id="9d432-197">![Resumo do trabalho](media/automation-first-runbook-graphical/runbook-job-AllLogs.png)</span><span class="sxs-lookup"><span data-stu-id="9d432-197">![Job Summary](media/automation-first-runbook-graphical/runbook-job-AllLogs.png)</span></span>
10. <span data-ttu-id="9d432-198">Feche as folhas Todos os Logs e Trabalho para retornar para a folha MyFirstRunbook.</span><span class="sxs-lookup"><span data-stu-id="9d432-198">Close the All Logs blade and the Job blade to return to the MyFirstRunbook blade.</span></span>
11. <span data-ttu-id="9d432-199">Clique em **Trabalhos** para abrir a folha Trabalhos desse runbook.</span><span class="sxs-lookup"><span data-stu-id="9d432-199">Click **Jobs** to open the Jobs blade for this runbook.</span></span>  <span data-ttu-id="9d432-200">Ele lista todos os trabalhos criados por esse runbook.</span><span class="sxs-lookup"><span data-stu-id="9d432-200">This lists all the jobs created by this runbook.</span></span> <span data-ttu-id="9d432-201">Devemos ver apenas um trabalho listado, já que executamos o trabalho apenas uma vez.</span><span class="sxs-lookup"><span data-stu-id="9d432-201">We should only see one job listed since we only ran the job once.</span></span><br> <span data-ttu-id="9d432-202">![Trabalhos](media/automation-first-runbook-graphical/runbook-control-jobs.png)</span><span class="sxs-lookup"><span data-stu-id="9d432-202">![Jobs](media/automation-first-runbook-graphical/runbook-control-jobs.png)</span></span>
12. <span data-ttu-id="9d432-203">Você pode clicar neste trabalho para abrir o mesmo painel Trabalho que exibimos quando iniciamos o runbook.</span><span class="sxs-lookup"><span data-stu-id="9d432-203">You can click this job to open the same Job pane that we viewed when we started the runbook.</span></span>  <span data-ttu-id="9d432-204">Isso permite que você volte no tempo e veja os detalhes de qualquer trabalho que foi criado para um determinado runbook.</span><span class="sxs-lookup"><span data-stu-id="9d432-204">This allows you to go back in time and view the details of any job that was created for a particular runbook.</span></span>

## <a name="step-5---create-variable-assets"></a><span data-ttu-id="9d432-205">Etapa 5: criar ativos de variável</span><span class="sxs-lookup"><span data-stu-id="9d432-205">Step 5 - Create variable assets</span></span>
<span data-ttu-id="9d432-206">Testamos e publicamos nosso runbook, mas até o momento ele não faz nada útil.</span><span class="sxs-lookup"><span data-stu-id="9d432-206">We've tested and published our runbook, but so far it doesn't do anything useful.</span></span> <span data-ttu-id="9d432-207">Gostaríamos que ele gerenciasse recursos do Azure.</span><span class="sxs-lookup"><span data-stu-id="9d432-207">We want to have it manage Azure resources.</span></span>  <span data-ttu-id="9d432-208">Antes de configurarmos o runbook a ser autenticado, criaremos uma variável para conter a ID de assinatura e usá-la como referência depois que configurarmos a atividade a ser autenticada na etapa 6 abaixo.</span><span class="sxs-lookup"><span data-stu-id="9d432-208">Before we configure the runbook to authenticate, we  create a variable to hold the subscription ID and reference it after we set up the activity to authenticate in step 6 below.</span></span>  <span data-ttu-id="9d432-209">A inclusão de uma referência no contexto da assinatura facilita o seu trabalho entre as várias assinaturas.</span><span class="sxs-lookup"><span data-stu-id="9d432-209">Including a reference to the subscription context allows you to easily work between multiple subscriptions.</span></span>  <span data-ttu-id="9d432-210">Antes de prosseguir, copie a ID de assinatura na opção Assinaturas do Painel de navegação.</span><span class="sxs-lookup"><span data-stu-id="9d432-210">Before proceeding, copy your subscription ID from the Subscriptions option off the Navigation pane.</span></span>  

1. <span data-ttu-id="9d432-211">Na folha Contas de Automação, clique no bloco **Ativos** e a folha **Ativos** será aberta.</span><span class="sxs-lookup"><span data-stu-id="9d432-211">In the Automation Accounts blade, click the **Assets** tile and the **Assets** blade is opened.</span></span>
2. <span data-ttu-id="9d432-212">Na folha Ativos, clique no bloco **Variáveis** .</span><span class="sxs-lookup"><span data-stu-id="9d432-212">In the Assets blade, click the **Variables** tile.</span></span>
3. <span data-ttu-id="9d432-213">Na folha Variáveis, clique em **Adicionar uma variável**.</span><span class="sxs-lookup"><span data-stu-id="9d432-213">On the Variables blade, click **Add a variable**.</span></span><br><span data-ttu-id="9d432-214">![Variável de Automação](media/automation-first-runbook-graphical/create-new-subscriptionid-variable.png)</span><span class="sxs-lookup"><span data-stu-id="9d432-214">![Automation Variable](media/automation-first-runbook-graphical/create-new-subscriptionid-variable.png)</span></span>
4. <span data-ttu-id="9d432-215">Na folha Nova variável, na caixa **Nome**, digite **AzureSubscriptionId** e na caixa **Valor**, insira sua ID de Assinatura.</span><span class="sxs-lookup"><span data-stu-id="9d432-215">In the New variable blade, in the **Name** box, enter **AzureSubscriptionId** and in the **Value** box enter your Subscription ID.</span></span>  <span data-ttu-id="9d432-216">Mantenha a *cadeia de caracteres* para o **Tipo** e o valor padrão para a **Criptografia**.</span><span class="sxs-lookup"><span data-stu-id="9d432-216">Keep *string* for the **Type** and the default value for **Encryption**.</span></span>  
5. <span data-ttu-id="9d432-217">Clique em **Criar** para criar a variável.</span><span class="sxs-lookup"><span data-stu-id="9d432-217">Click **Create** to create the variable.</span></span>  

## <a name="step-6---add-authentication-to-manage-azure-resources"></a><span data-ttu-id="9d432-218">Etapa 6: adicionar a autenticação para gerenciar os recursos do Azure</span><span class="sxs-lookup"><span data-stu-id="9d432-218">Step 6 - Add authentication to manage Azure resources</span></span>
<span data-ttu-id="9d432-219">Agora que temos uma variável para conter a ID de assinatura, podemos configurar nosso runbook para autenticar usando as credenciais Executar Como que são referenciadas nos [pré-requisitos](#prerequisites).</span><span class="sxs-lookup"><span data-stu-id="9d432-219">Now that we have a variable to hold our subscription ID, we can configure our runbook to authenticate with the Run As credentials that are referred to in the [prerequisites](#prerequisites).</span></span>  <span data-ttu-id="9d432-220">Fazemos isso adicionando a conexão do Azure Executar Como **Ativos** e o cmdlet **Add-AzureRMAccount** à tela.</span><span class="sxs-lookup"><span data-stu-id="9d432-220">We do that by adding the Azure Run As connection **Asset** and **Add-AzureRMAccount** cmdlet to the canvas.</span></span>  

1. <span data-ttu-id="9d432-221">Abra o editor gráfico clicando em **Editar** na folha MyFirstRunbook.</span><span class="sxs-lookup"><span data-stu-id="9d432-221">Open the graphical editor by clicking **Edit** on the MyFirstRunbook blade.</span></span><br> <span data-ttu-id="9d432-222">![Editar runbook](media/automation-first-runbook-graphical/runbook-controls-edit-revised20165.png)</span><span class="sxs-lookup"><span data-stu-id="9d432-222">![Edit runbook](media/automation-first-runbook-graphical/runbook-controls-edit-revised20165.png)</span></span>
2. <span data-ttu-id="9d432-223">Não precisamos mais de **Write Olá, Mundo to output** e, portanto, clique nele com o botão direito do mouse e selecione **Excluir**.</span><span class="sxs-lookup"><span data-stu-id="9d432-223">We don't need the **Write Hello World to output** anymore, so right-click it and select **Delete**.</span></span>
3. <span data-ttu-id="9d432-224">No controle de Biblioteca, expanda **Conexões** e adicione **AzureRunAsConnection** à tela selecionando **Adicionar à tela**.</span><span class="sxs-lookup"><span data-stu-id="9d432-224">In the Library control, expand **Connections** and add **AzureRunAsConnection** to the canvas by selecting **Add to canvas**.</span></span>
4. <span data-ttu-id="9d432-225">Na tela, selecione **AzureRunAsConnection** e no painel de controle da Configuração, digite **Obter Conexão Executar Como** na caixa de texto **Rótulo**.</span><span class="sxs-lookup"><span data-stu-id="9d432-225">On the canvas, select **AzureRunAsConnection** and in the Configuration control pane, type **Get Run As Connection** in the **Label** textbox.</span></span>  <span data-ttu-id="9d432-226">Essa é a conexão</span><span class="sxs-lookup"><span data-stu-id="9d432-226">This is the connection</span></span>
5. <span data-ttu-id="9d432-227">No controle Biblioteca, digite **Add-AzureRmAccount** na caixa de texto de pesquisa.</span><span class="sxs-lookup"><span data-stu-id="9d432-227">In the Library control, type **Add-AzureRmAccount** in the search textbox.</span></span>
6. <span data-ttu-id="9d432-228">Adicione **Adicione-AzureRmAccount** à tela.</span><span class="sxs-lookup"><span data-stu-id="9d432-228">Add **Add-AzureRmAccount** to the canvas.</span></span><br> <span data-ttu-id="9d432-229">![AzureRMAccount adicionar](media/automation-first-runbook-graphical/search-powershell-cmdlet-addazurermaccount.png)</span><span class="sxs-lookup"><span data-stu-id="9d432-229">![Add-AzureRMAccount](media/automation-first-runbook-graphical/search-powershell-cmdlet-addazurermaccount.png)</span></span>
7. <span data-ttu-id="9d432-230">Passe o mouse sobre **Obter Conexão Executar Como** até que um círculo apareça na parte inferior da forma.</span><span class="sxs-lookup"><span data-stu-id="9d432-230">Hover over **Get Run As Connection** until a circle appears on the bottom of the shape.</span></span> <span data-ttu-id="9d432-231">Clique no círculo e arraste a seta para **Add-AzureRmAccount**.</span><span class="sxs-lookup"><span data-stu-id="9d432-231">Click the circle and drag the arrow to **Add-AzureRmAccount**.</span></span>  <span data-ttu-id="9d432-232">A seta que você criou é um *link*.</span><span class="sxs-lookup"><span data-stu-id="9d432-232">The arrow that you created is a *link*.</span></span>  <span data-ttu-id="9d432-233">O runbook inicia com **Obter Conexão Executar Como** e executa **Add-AzureRmAccount**.</span><span class="sxs-lookup"><span data-stu-id="9d432-233">The runbook starts with **Get Run As Connection** and then run **Add-AzureRmAccount**.</span></span><br> <span data-ttu-id="9d432-234">![Criar link entre as atividades](media/automation-first-runbook-graphical/runbook-link-auth-activities.png)</span><span class="sxs-lookup"><span data-stu-id="9d432-234">![Create link between activities](media/automation-first-runbook-graphical/runbook-link-auth-activities.png)</span></span>
8. <span data-ttu-id="9d432-235">Na tela, selecione **Add-AzureRmAccount** e no tipo de painel de controle de configuração **Fazer Logon no Azure** na caixa de texto de **Rótulo**.</span><span class="sxs-lookup"><span data-stu-id="9d432-235">On the canvas, select **Add-AzureRmAccount** and in the Configuration control pane type **Login to Azure** in the **Label** textbox.</span></span>
9. <span data-ttu-id="9d432-236">Clique em **Parâmetros** e a folha Configuração do Parâmetro da Atividade aparecerá.</span><span class="sxs-lookup"><span data-stu-id="9d432-236">Click **Parameters** and the Activity Parameter Configuration blade appears.</span></span>
10. <span data-ttu-id="9d432-237">**Add-AzureRmAccount** tem vários conjuntos de parâmetros, portanto, precisamos selecionar um antes de podermos fornecer os valores do parâmetro.</span><span class="sxs-lookup"><span data-stu-id="9d432-237">**Add-AzureRmAccount** has multiple parameter sets, so we need to select one before we can provide parameter values.</span></span>  <span data-ttu-id="9d432-238">Clique em **Conjunto de Parâmetros** e selecione o conjunto de parâmetros **ServicePrincipalCertificatewithSubscriptionId**.</span><span class="sxs-lookup"><span data-stu-id="9d432-238">Click **Parameter Set** and then select the **ServicePrincipalCertificatewithSubscriptionId** parameter set.</span></span>
11. <span data-ttu-id="9d432-239">Depois de selecionar o conjunto de parâmetros, os parâmetros serão exibidos na folha Configuração do Parâmetro da Atividade.</span><span class="sxs-lookup"><span data-stu-id="9d432-239">Once you select the parameter set, the parameters are displayed in the Activity Parameter Configuration blade.</span></span>  <span data-ttu-id="9d432-240">Clique em **APPLICATIONID**.</span><span class="sxs-lookup"><span data-stu-id="9d432-240">Click **APPLICATIONID**.</span></span><br> <span data-ttu-id="9d432-241">![Adicionar parâmetros da conta do Azure RM](media/automation-first-runbook-graphical/add-azurermaccount-params.png)</span><span class="sxs-lookup"><span data-stu-id="9d432-241">![Add Azure RM account parameters](media/automation-first-runbook-graphical/add-azurermaccount-params.png)</span></span>
12. <span data-ttu-id="9d432-242">Na folha Valor do Parâmetro, selecione **Saída da atividade** para a **Fonte de dados**, selecione **Obter Conexão Executar Como** da lista, na caixa de texto **Caminho do campo**, escreva **ApplicationId** e então clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="9d432-242">In the Parameter Value blade, select **Activity output** for the **Data source** and select **Get Run As Connection** from the list, in the **Field path** textbox type **ApplicationId**, and then click **OK**.</span></span>  <span data-ttu-id="9d432-243">Estamos especificando o nome da propriedade para o caminho de Campo porque a atividade produziu um objeto com várias propriedades.</span><span class="sxs-lookup"><span data-stu-id="9d432-243">We are specifying the name of the property for the Field path because the activity outputs an object with multiple properties.</span></span>
13. <span data-ttu-id="9d432-244">Clique em **CERTIFICATETHUMBPRINT** e na folha de Valor do Parâmetro, selecione **Saída de atividade** para a **Fonte de dados**.</span><span class="sxs-lookup"><span data-stu-id="9d432-244">Click **CERTIFICATETHUMBPRINT**, and in the Parameter Value blade, select **Activity output** for the **Data source**.</span></span>  <span data-ttu-id="9d432-245">Selecione **Obter Conexão Executar Como** da lista; na caixa de texto **Caminho de campo**, escreva **CertificateThumbprint** e clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="9d432-245">Select **Get Run As Connection** from the list, in the **Field path** textbox type **CertificateThumbprint**, and then click **OK**.</span></span>
14. <span data-ttu-id="9d432-246">Clique em **SERVICEPRINCIPAL**, e na folha de Valor do Parâmetro, selecione **ConstantValue** para a **Fonte de dados**, clique na opção **True**, e em seguida, clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="9d432-246">Click **SERVICEPRINCIPAL**, and in the Parameter Value blade, select **ConstantValue** for the **Data source**, click the option **True**, and then click **OK**.</span></span>
15. <span data-ttu-id="9d432-247">Clique em **TENANTID** e na folha de Valor do Parâmetro, selecione **Saída de atividade** para a **Fonte de dados**.</span><span class="sxs-lookup"><span data-stu-id="9d432-247">Click **TENANTID**, and in the Parameter Value blade, select **Activity output** for the **Data source**.</span></span>  <span data-ttu-id="9d432-248">Selecione **Obter Conexão Executar Como** da lista; na caixa de texto **Caminho de campo**, escreva **TenantId** e, em seguida, clique em **OK** duas vezes.</span><span class="sxs-lookup"><span data-stu-id="9d432-248">Select **Get Run As Connection** from the list, in the **Field path** textbox type **TenantId**, and then click **OK** twice.</span></span>  
16. <span data-ttu-id="9d432-249">No controle Biblioteca, digite **Set-AzureRmContext** na caixa de texto de pesquisa.</span><span class="sxs-lookup"><span data-stu-id="9d432-249">In the Library control, type **Set-AzureRmContext** in the search textbox.</span></span>
17. <span data-ttu-id="9d432-250">Adicionar **Set-AzureRmContext** à tela.</span><span class="sxs-lookup"><span data-stu-id="9d432-250">Add **Set-AzureRmContext** to the canvas.</span></span>
18. <span data-ttu-id="9d432-251">Na tela, selecione **Set-AzureRmContext** e no painel de controle da Configuração, digite **Especificar ID de Assinatura** na caixa de texto **Rótulo**.</span><span class="sxs-lookup"><span data-stu-id="9d432-251">On the canvas, select **Set-AzureRmContext** and in the Configuration control pane type **Specify Subscription Id** in the **Label** textbox.</span></span>
19. <span data-ttu-id="9d432-252">Clique em **Parâmetros** e a folha Configuração do Parâmetro da Atividade aparecerá.</span><span class="sxs-lookup"><span data-stu-id="9d432-252">Click **Parameters** and the Activity Parameter Configuration blade appears.</span></span>
20. <span data-ttu-id="9d432-253">**Set-AzureRmContext** tem vários conjuntos de parâmetros, portanto, precisamos selecionar um antes de podermos fornecer os valores do parâmetro.</span><span class="sxs-lookup"><span data-stu-id="9d432-253">**Set-AzureRmContext** has multiple parameter sets, so we need to select one before we can provide parameter values.</span></span>  <span data-ttu-id="9d432-254">Clique em **Conjunto de Parâmetros** e selecione o conjunto de parâmetros **SubscriptionId**.</span><span class="sxs-lookup"><span data-stu-id="9d432-254">Click **Parameter Set** and then select the **SubscriptionId** parameter set.</span></span>  
21. <span data-ttu-id="9d432-255">Depois de selecionar o conjunto de parâmetros, os parâmetros serão exibidos na folha Configuração do Parâmetro da Atividade.</span><span class="sxs-lookup"><span data-stu-id="9d432-255">Once you select the parameter set, the parameters are displayed in the Activity Parameter Configuration blade.</span></span>  <span data-ttu-id="9d432-256">Clique em **SubscriptionID**</span><span class="sxs-lookup"><span data-stu-id="9d432-256">Click **SubscriptionID**</span></span>
22. <span data-ttu-id="9d432-257">Na folha Valor do Parâmetro, selecione **Ativo de Variável** para a **Fonte de dados**, selecione **AzureSubscriptionId** na lista e clique em **OK** duas vezes.</span><span class="sxs-lookup"><span data-stu-id="9d432-257">In the Parameter Value blade, select **Variable Asset** for the **Data source** and select **AzureSubscriptionId** from the list and then click **OK** twice.</span></span>   
23. <span data-ttu-id="9d432-258">Passe o mouse sobre **Login no Azure** até que um círculo apareça na parte inferior da forma.</span><span class="sxs-lookup"><span data-stu-id="9d432-258">Hover over **Login to Azure** until a circle appears on the bottom of the shape.</span></span> <span data-ttu-id="9d432-259">Clique no círculo e arraste a seta para **Especificar Id de Assinatura**.</span><span class="sxs-lookup"><span data-stu-id="9d432-259">Click the circle and drag the arrow to **Specify Subscription Id**.</span></span>

<span data-ttu-id="9d432-260">Seu runbook deve ser semelhante ao seguinte: </span><span class="sxs-lookup"><span data-stu-id="9d432-260">Your runbook should look like the following at this point:</span></span> <br>![Configuração da autenticação do runbook](media/automation-first-runbook-graphical/runbook-auth-config.png)

## <a name="step-7---add-activity-to-start-a-virtual-machine"></a><span data-ttu-id="9d432-262">Etapa 7: adicionar a atividade para iniciar uma máquina virtual</span><span class="sxs-lookup"><span data-stu-id="9d432-262">Step 7 - Add activity to start a virtual machine</span></span>
<span data-ttu-id="9d432-263">Aqui, adicionaremos uma atividade **Start-AzureRmVM** para iniciar uma máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="9d432-263">Here we add a **Start-AzureRmVM** activity to start a virtual machine.</span></span>  <span data-ttu-id="9d432-264">Você pode escolher qualquer máquina virtual na sua assinatura do Azure e, por enquanto, deve embutir esse nome no cmdlet.</span><span class="sxs-lookup"><span data-stu-id="9d432-264">You can pick any virtual machine in your Azure subscription, and for now you hardcode that name into the cmdlet.</span></span>

1. <span data-ttu-id="9d432-265">No controle Biblioteca, digite **Start-AzureRm** na caixa de texto de pesquisa.</span><span class="sxs-lookup"><span data-stu-id="9d432-265">In the Library control, type **Start-AzureRm** in the search textbox.</span></span>
2. <span data-ttu-id="9d432-266">Adicione **Start-AzureRmVM** à tela, clique e arraste-a para baixo de **Especificar Id de Assinatura**.</span><span class="sxs-lookup"><span data-stu-id="9d432-266">Add **Start-AzureRmVM** to the canvas and then click and drag it underneath **Specify Subscription Id**.</span></span>
3. <span data-ttu-id="9d432-267">Passe o mouse sobre **Especificar Id de Assinatura** até que um círculo apareça na parte inferior da forma.</span><span class="sxs-lookup"><span data-stu-id="9d432-267">Hover over **Specify Subscription Id** until a circle appears on the bottom of the shape.</span></span>  <span data-ttu-id="9d432-268">Clique no círculo e arraste a seta para **Start-AzureRmVM**.</span><span class="sxs-lookup"><span data-stu-id="9d432-268">Click the circle and drag the arrow to **Start-AzureRmVM**.</span></span>
4. <span data-ttu-id="9d432-269">Selecione **Start-AzureRmVM**.</span><span class="sxs-lookup"><span data-stu-id="9d432-269">Select **Start-AzureRmVM**.</span></span>  <span data-ttu-id="9d432-270">Clique em **Parâmetros** e **Conjunto de Parâmetros** para exibir os conjuntos de **Start-AzureRmVM**.</span><span class="sxs-lookup"><span data-stu-id="9d432-270">Click **Parameters** and then **Parameter Set** to view the sets for **Start-AzureRmVM**.</span></span>  <span data-ttu-id="9d432-271">Selecione o conjunto de parâmetros **ResourceGroupNameParameterSetName** .</span><span class="sxs-lookup"><span data-stu-id="9d432-271">Select the **ResourceGroupNameParameterSetName** parameter set.</span></span> <span data-ttu-id="9d432-272">Observe que há pontos de exclamação ao lado de **ResourceGroupName** e **Name**.</span><span class="sxs-lookup"><span data-stu-id="9d432-272">Note that **ResourceGroupName** and **Name** have exclamation points next them.</span></span>  <span data-ttu-id="9d432-273">Isso indica que são os parâmetros obrigatórios.</span><span class="sxs-lookup"><span data-stu-id="9d432-273">This indicates that they are required parameters.</span></span>  <span data-ttu-id="9d432-274">Observe também que ambos esperam valores da cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="9d432-274">Also note both expect string values.</span></span>
5. <span data-ttu-id="9d432-275">Selecione **Name**.</span><span class="sxs-lookup"><span data-stu-id="9d432-275">Select **Name**.</span></span>  <span data-ttu-id="9d432-276">Selecione **Expressão do PowerShell** para a **Fonte de dados** e digite o nome da máquina virtual entre aspas duplas com a qual iniciamos este runbook.</span><span class="sxs-lookup"><span data-stu-id="9d432-276">Select **PowerShell expression** for the **Data source** and type in the name of the virtual machine surrounded with double quotes that we start with this runbook.</span></span>  <span data-ttu-id="9d432-277">Clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="9d432-277">Click **OK**.</span></span><br><span data-ttu-id="9d432-278">![Valor do Parâmetro Name do Start-AzureRmVM](media/automation-first-runbook-graphical/runbook-startvm-nameparameter.png)</span><span class="sxs-lookup"><span data-stu-id="9d432-278">![Start-AzureRmVM Name Parameter Value](media/automation-first-runbook-graphical/runbook-startvm-nameparameter.png)</span></span>
6. <span data-ttu-id="9d432-279">Selecione **ResourceGroupName**.</span><span class="sxs-lookup"><span data-stu-id="9d432-279">Select **ResourceGroupName**.</span></span> <span data-ttu-id="9d432-280">Use a a **Expressão do PowerShell** para o **Fonte de dados** e digite o nome do grupo de recursos entre aspas duplas.</span><span class="sxs-lookup"><span data-stu-id="9d432-280">Use **PowerShell expression** for the **Data source** and type in the name of the resource group surrounded with double quotes.</span></span>  <span data-ttu-id="9d432-281">Clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="9d432-281">Click **OK**.</span></span><br> <span data-ttu-id="9d432-282">![Parâmetros do Start-AzureRmVM](media/automation-first-runbook-graphical/startazurermvm-params.png)</span><span class="sxs-lookup"><span data-stu-id="9d432-282">![Start-AzureRmVM Parameters](media/automation-first-runbook-graphical/startazurermvm-params.png)</span></span>
7. <span data-ttu-id="9d432-283">Clique em Painel de teste para que possamos testar o runbook.</span><span class="sxs-lookup"><span data-stu-id="9d432-283">Click Test pane so that we can test the runbook.</span></span>
8. <span data-ttu-id="9d432-284">Clique em **Iniciar** para iniciar o teste.</span><span class="sxs-lookup"><span data-stu-id="9d432-284">Click **Start** to start the test.</span></span>  <span data-ttu-id="9d432-285">Quando for concluído, verifique se a máquina virtual foi iniciada.</span><span class="sxs-lookup"><span data-stu-id="9d432-285">Once it completes, check that the virtual machine was started.</span></span>

<span data-ttu-id="9d432-286">Seu runbook deve ser semelhante ao seguinte: </span><span class="sxs-lookup"><span data-stu-id="9d432-286">Your runbook should look like the following at this point:</span></span> <br>![Configuração da autenticação do runbook](media/automation-first-runbook-graphical/runbook-startvm.png)

## <a name="step-8---add-additional-input-parameters-to-the-runbook"></a><span data-ttu-id="9d432-288">Etapa 8: adicionar parâmetros de entrada adicionais ao runbook</span><span class="sxs-lookup"><span data-stu-id="9d432-288">Step 8 - Add additional input parameters to the runbook</span></span>
<span data-ttu-id="9d432-289">Nosso runbook atualmente inicia a máquina virtual no grupo de recursos especificado no cmdlet **Start-AzureRmVM**.</span><span class="sxs-lookup"><span data-stu-id="9d432-289">Our runbook currently starts the virtual machine in the resource group that we specified in the **Start-AzureRmVM** cmdlet.</span></span>  <span data-ttu-id="9d432-290">Nosso runbook seria mais útil se ambos pudessem ser especificados quando o runbook é iniciado.</span><span class="sxs-lookup"><span data-stu-id="9d432-290">Our runbook would be more useful if we could specify both when the runbook is started.</span></span>  <span data-ttu-id="9d432-291">Agora, adicionamos parâmetros de entrada ao runbook para fornecer essa funcionalidade.</span><span class="sxs-lookup"><span data-stu-id="9d432-291">We now add input parameters to the runbook to provide that functionality.</span></span>

1. <span data-ttu-id="9d432-292">Abra o editor gráfico clicando em **Editar** no painel **MyFirstRunbook**.</span><span class="sxs-lookup"><span data-stu-id="9d432-292">Open the graphical editor by clicking **Edit** on the **MyFirstRunbook** pane.</span></span>
2. <span data-ttu-id="9d432-293">Clique em **Entrada e saída** e em **Adicionar entrada** para abrir o painel Parâmetro de Entrada do Runbook.</span><span class="sxs-lookup"><span data-stu-id="9d432-293">Click **Input and output** and then **Add input** to open the Runbook Input Parameter pane.</span></span><br> <span data-ttu-id="9d432-294">![Entrada e Saída de runbook](media/automation-first-runbook-graphical/runbook-toolbar-InputandOutput-revised20165.png)</span><span class="sxs-lookup"><span data-stu-id="9d432-294">![Runbook Input and Output](media/automation-first-runbook-graphical/runbook-toolbar-InputandOutput-revised20165.png)</span></span>
3. <span data-ttu-id="9d432-295">Especifique *VMName* para o **Nome**.</span><span class="sxs-lookup"><span data-stu-id="9d432-295">Specify *VMName* for the **Name**.</span></span>  <span data-ttu-id="9d432-296">Mantenha a *cadeia de caracteres* para o **Tipo**, mas altere **Obrigatório** para *Sim*.</span><span class="sxs-lookup"><span data-stu-id="9d432-296">Keep *string* for the **Type**, but change **Mandatory** to *Yes*.</span></span>  <span data-ttu-id="9d432-297">Clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="9d432-297">Click **OK**.</span></span>
4. <span data-ttu-id="9d432-298">Crie um segundo parâmetro de entrada obrigatório denominado *ResourceGroupName* e clique em **OK** para fechar o painel de **Entrada e Saída**.</span><span class="sxs-lookup"><span data-stu-id="9d432-298">Create a second mandatory input parameter called *ResourceGroupName* and then click **OK** to close the **Input and Output** pane.</span></span><br> <span data-ttu-id="9d432-299">![Parâmetros de Entrada de Runbook](media/automation-first-runbook-graphical/start-azurermvm-params-outputs.png)</span><span class="sxs-lookup"><span data-stu-id="9d432-299">![Runbook Input Parameters](media/automation-first-runbook-graphical/start-azurermvm-params-outputs.png)</span></span>
5. <span data-ttu-id="9d432-300">Selecione a atividade **Start-AzureRmVM** e clique em **Parâmetros**.</span><span class="sxs-lookup"><span data-stu-id="9d432-300">Select the **Start-AzureRmVM** activity and then click **Parameters**.</span></span>
6. <span data-ttu-id="9d432-301">Altere a **Fonte de dados** de **Name** para a **Entrada do runbook** e selecione **VMName**.</span><span class="sxs-lookup"><span data-stu-id="9d432-301">Change the **Data source** for **Name** to **Runbook input** and then select **VMName**.</span></span><br>
7. <span data-ttu-id="9d432-302">Altere a **Fonte de dados** de **ResourceGroupName** para a **Entrada do runbook** e selecione **ResourceGroupName**.</span><span class="sxs-lookup"><span data-stu-id="9d432-302">Change the **Data source** for **ResourceGroupName** to **Runbook input** and then select **ResourceGroupName**.</span></span><br> <span data-ttu-id="9d432-303">![Parâmetros de Start-AzureVM](media/automation-first-runbook-graphical/start-azurermvm-params-runbookinput.png)</span><span class="sxs-lookup"><span data-stu-id="9d432-303">![Start-AzureVM Parameters](media/automation-first-runbook-graphical/start-azurermvm-params-runbookinput.png)</span></span>
8. <span data-ttu-id="9d432-304">Salve o runbook e abra o Painel de teste.</span><span class="sxs-lookup"><span data-stu-id="9d432-304">Save the runbook and open the Test pane.</span></span>  <span data-ttu-id="9d432-305">Observe que agora você pode fornecer valores para as duas variáveis de entrada usadas no teste.</span><span class="sxs-lookup"><span data-stu-id="9d432-305">Note that you can now provide values for the two input variables that you use in the test.</span></span>
9. <span data-ttu-id="9d432-306">Feche o Painel de teste.</span><span class="sxs-lookup"><span data-stu-id="9d432-306">Close the Test pane.</span></span>
10. <span data-ttu-id="9d432-307">Clique em **Publicar** para publicar a nova versão do runbook.</span><span class="sxs-lookup"><span data-stu-id="9d432-307">Click **Publish** to publish the new version of the runbook.</span></span>
11. <span data-ttu-id="9d432-308">Pare a máquina virtual que você iniciou na etapa anterior.</span><span class="sxs-lookup"><span data-stu-id="9d432-308">Stop the virtual machine that you started in the previous step.</span></span>
12. <span data-ttu-id="9d432-309">Clique em **Iniciar** para iniciar o runbook.</span><span class="sxs-lookup"><span data-stu-id="9d432-309">Click **Start** to start the runbook.</span></span>  <span data-ttu-id="9d432-310">Digite o **VMName** e o **ResourceGroupName** da máquina virtual que você iniciará.</span><span class="sxs-lookup"><span data-stu-id="9d432-310">Type in the **VMName** and **ResourceGroupName** for the virtual machine that you're going to start.</span></span><br> <span data-ttu-id="9d432-311">![Start Runbook](media/automation-first-runbook-graphical/runbook-start-inputparams.png)</span><span class="sxs-lookup"><span data-stu-id="9d432-311">![Start Runbook](media/automation-first-runbook-graphical/runbook-start-inputparams.png)</span></span>
13. <span data-ttu-id="9d432-312">Quando o runbook for concluído, verifique se a máquina virtual foi iniciada.</span><span class="sxs-lookup"><span data-stu-id="9d432-312">When the runbook completes, check that the virtual machine was started.</span></span>

## <a name="step-9---create-a-conditional-link"></a><span data-ttu-id="9d432-313">Etapa 9: criar um link condicional</span><span class="sxs-lookup"><span data-stu-id="9d432-313">Step 9 - Create a conditional link</span></span>
<span data-ttu-id="9d432-314">Agora, modificamos o runbook para que ele tente iniciar a máquina virtual apenas se ela ainda não tiver iniciado.</span><span class="sxs-lookup"><span data-stu-id="9d432-314">We now modify the runbook so that it only attempts to start the virtual machine if it is not already started.</span></span>  <span data-ttu-id="9d432-315">Faça isso adicionando um cmdlet **Get-AzureRmVM** ao runbook que obtém o status do nível da instância da máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="9d432-315">You do this by adding a **Get-AzureRmVM** cmdlet to the runbook that gets the instance level status of the virtual machine.</span></span> <span data-ttu-id="9d432-316">Em seguida, adicione um módulo de código do Fluxo de Trabalho do PowerShell denominado **Obter Status** com um trecho de código do PowerShell para determinar se o estado da máquina virtual está em execução ou parado.</span><span class="sxs-lookup"><span data-stu-id="9d432-316">Then you add a PowerShell Workflow code module called **Get Status** with a snippet of PowerShell code to determine if the virtual machine state is running or stopped.</span></span>  <span data-ttu-id="9d432-317">Um link condicional do módulo **Obter Status** apenas executa **Start-AzureRmVM** se o estado de execução atual é interrompido.</span><span class="sxs-lookup"><span data-stu-id="9d432-317">A conditional link from the **Get Status** module only runs **Start-AzureRmVM** if the current running state is stopped.</span></span>  <span data-ttu-id="9d432-318">Por fim, enviamos uma mensagem para informar se a VM foi iniciada com êxito ou não usando o cmdlet Write-Output do PowerShell.</span><span class="sxs-lookup"><span data-stu-id="9d432-318">Finally, we output a message to inform you if the VM was successfully started or not using the PowerShell Write-Output cmdlet.</span></span>

1. <span data-ttu-id="9d432-319">Abra o **MyFirstRunbook** no editor gráfico.</span><span class="sxs-lookup"><span data-stu-id="9d432-319">Open **MyFirstRunbook** in the graphical editor.</span></span>
2. <span data-ttu-id="9d432-320">Remova o link entre **Especificar Id de Assinatura** e **Start-AzureRmVM** clicando nele e pressionando a tecla *Delete*.</span><span class="sxs-lookup"><span data-stu-id="9d432-320">Remove the link between **Specify Subscription Id** and **Start-AzureRmVM** by clicking on it and then pressing the *Delete* key.</span></span>
3. <span data-ttu-id="9d432-321">No controle Biblioteca, digite **Get-AzureRm** na caixa de texto de pesquisa.</span><span class="sxs-lookup"><span data-stu-id="9d432-321">In the Library control, type **Get-AzureRm** in the search textbox.</span></span>
4. <span data-ttu-id="9d432-322">Adicione **Get-AzureRmVM** à tela.</span><span class="sxs-lookup"><span data-stu-id="9d432-322">Add **Get-AzureRmVM** to the canvas.</span></span>
5. <span data-ttu-id="9d432-323">Selecione **Get-AzureRmVM** e **Conjunto de Parâmetros** para exibir os conjuntos de **Get-AzureRmVM**.</span><span class="sxs-lookup"><span data-stu-id="9d432-323">Select **Get-AzureRmVM** and then **Parameter Set** to view the sets for **Get-AzureRmVM**.</span></span>  <span data-ttu-id="9d432-324">Selecione o conjunto de parâmetros **GetVirtualMachineInResourceGroupNameParamSet** .</span><span class="sxs-lookup"><span data-stu-id="9d432-324">Select the **GetVirtualMachineInResourceGroupNameParamSet** parameter set.</span></span>  <span data-ttu-id="9d432-325">Observe que há pontos de exclamação ao lado de **ResourceGroupName** e **Name**.</span><span class="sxs-lookup"><span data-stu-id="9d432-325">Note that **ResourceGroupName** and **Name** have exclamation points next them.</span></span>  <span data-ttu-id="9d432-326">Isso indica que são os parâmetros obrigatórios.</span><span class="sxs-lookup"><span data-stu-id="9d432-326">This indicates that they are required parameters.</span></span>  <span data-ttu-id="9d432-327">Observe também que ambos esperam valores da cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="9d432-327">Also note both expect string values.</span></span>
6. <span data-ttu-id="9d432-328">Em **Fonte de dados** para **Name**, selecione **Entrada do runbook** e, em seguida, selecione **VMName**.</span><span class="sxs-lookup"><span data-stu-id="9d432-328">Under **Data source** for **Name**, select **Runbook input** and then select **VMName**.</span></span>  <span data-ttu-id="9d432-329">Clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="9d432-329">Click **OK**.</span></span>
7. <span data-ttu-id="9d432-330">Em **Fonte de dados** para **ResourceGroupName**, selecione **Entrada do runbook** e, em seguida, selecione **ResourceGroupName**.</span><span class="sxs-lookup"><span data-stu-id="9d432-330">Under **Data source** for **ResourceGroupName**, select **Runbook input** and then select **ResourceGroupName**.</span></span>  <span data-ttu-id="9d432-331">Clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="9d432-331">Click **OK**.</span></span>
8. <span data-ttu-id="9d432-332">Em **Fonte de dados** para **Status**, selecione **Valor constante** e, em seguida, clique em **True**.</span><span class="sxs-lookup"><span data-stu-id="9d432-332">Under **Data source** for **Status**, select **Constant value** and then click  **True**.</span></span>  <span data-ttu-id="9d432-333">Clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="9d432-333">Click **OK**.</span></span>  
9. <span data-ttu-id="9d432-334">Criar um link de **Especificar Id da Assinatura** para **Get-AzureRmVM**.</span><span class="sxs-lookup"><span data-stu-id="9d432-334">Create a link from **Specify Subscription Id** to **Get-AzureRmVM**.</span></span>
10. <span data-ttu-id="9d432-335">No controle da biblioteca, expanda **Controle do runbook** e adicione o **Código** à tela.</span><span class="sxs-lookup"><span data-stu-id="9d432-335">In the library control, expand **Runbook Control** and add **Code** to the canvas.</span></span>  
11. <span data-ttu-id="9d432-336">Crie um link de **Get-AzureRmVM** para **Código**.</span><span class="sxs-lookup"><span data-stu-id="9d432-336">Create a link from **Get-AzureRmVM** to **Code**.</span></span>  
12. <span data-ttu-id="9d432-337">Clique em **Código** e no painel de Configuração, altere o rótulo para **Obter Status**.</span><span class="sxs-lookup"><span data-stu-id="9d432-337">Click **Code** and in the Configuration pane, change label to **Get Status**.</span></span>
13. <span data-ttu-id="9d432-338">Selecione o parâmetro **Código** e a folha **Editor de Código** aparecerá.</span><span class="sxs-lookup"><span data-stu-id="9d432-338">Select **Code** parameter, and the **Code Editor** blade appears.</span></span>  
14. <span data-ttu-id="9d432-339">No editor de código, cole o seguinte trecho de código:</span><span class="sxs-lookup"><span data-stu-id="9d432-339">In the code editor, paste the following snippet of code:</span></span>
    
     ```
     $StatusesJson = $ActivityOutput['Get-AzureRmVM'].StatusesText
     $Statuses = ConvertFrom-Json $StatusesJson
     $StatusOut =""
     foreach ($Status in $Statuses){
     if($Status.Code -eq "Powerstate/running"){$StatusOut = "running"}
     elseif ($Status.Code -eq "Powerstate/deallocated") {$StatusOut = "stopped"}
     }
     $StatusOut
     ```
15. <span data-ttu-id="9d432-340">Crie um link de **Obter Status** para **Start-AzureRmVM**.</span><span class="sxs-lookup"><span data-stu-id="9d432-340">Create a link from **Get Status** to **Start-AzureRmVM**.</span></span><br> <span data-ttu-id="9d432-341">![Runbook com Módulo de Código](media/automation-first-runbook-graphical/runbook-startvm-get-status.png)</span><span class="sxs-lookup"><span data-stu-id="9d432-341">![Runbook with Code Module](media/automation-first-runbook-graphical/runbook-startvm-get-status.png)</span></span>  
16. <span data-ttu-id="9d432-342">Selecione o link e no painel de Configuração, altere **Aplicar condição** para **Sim**.</span><span class="sxs-lookup"><span data-stu-id="9d432-342">Select the link and in the Configuration pane, change **Apply condition** to **Yes**.</span></span>   <span data-ttu-id="9d432-343">Observe que o link muda para uma linha tracejada, indicando que a atividade de destino é executada apenas se a condição é resolvida como verdadeira.</span><span class="sxs-lookup"><span data-stu-id="9d432-343">Note the link turns to a dashed line indicating that the target activity only runs if the condition resolves to true.</span></span>  
17. <span data-ttu-id="9d432-344">Para a **Expressão da condição**, digite *$ActivityOutput['Get Status'] -eq "Stopped"*.</span><span class="sxs-lookup"><span data-stu-id="9d432-344">For the **Condition expression**, type *$ActivityOutput['Get Status'] -eq "Stopped"*.</span></span>  <span data-ttu-id="9d432-345">**Start-AzureRmVM** é executada apenas se a máquina virtual está parada.</span><span class="sxs-lookup"><span data-stu-id="9d432-345">**Start-AzureRmVM** now only runs if the virtual machine is stopped.</span></span>
18. <span data-ttu-id="9d432-346">No controle de biblioteca, expanda **Cmdlets** e **Microsoft.PowerShell.Utility**.</span><span class="sxs-lookup"><span data-stu-id="9d432-346">In the Library control, expand **Cmdlets** and then **Microsoft.PowerShell.Utility**.</span></span>
19. <span data-ttu-id="9d432-347">Adicione **Write-Output** à tela duas vezes.</span><span class="sxs-lookup"><span data-stu-id="9d432-347">Add **Write-Output** to the canvas twice.</span></span><br> <span data-ttu-id="9d432-348">![Runbook com Write-Output](media/automation-first-runbook-graphical/runbook-startazurermvm-complete.png)</span><span class="sxs-lookup"><span data-stu-id="9d432-348">![Runbook with Write-Output](media/automation-first-runbook-graphical/runbook-startazurermvm-complete.png)</span></span>
20. <span data-ttu-id="9d432-349">No primeiro controle **Write-Output**, clique em **Parâmetros** e altere o valor **Rótulo** para *Notificar VM Iniciada*.</span><span class="sxs-lookup"><span data-stu-id="9d432-349">On the first **Write-Output** control, click **Parameters** and change the **Label** value to *Notify VM Started*.</span></span>
21. <span data-ttu-id="9d432-350">Para **InputObject**, altere a **Fonte de dados** para **Expressão do PowerShell** e digite a expressão *"$VMName.Name iniciada com êxito."*.</span><span class="sxs-lookup"><span data-stu-id="9d432-350">For **InputObject**, change **Data source** to **PowerShell expression** and type in the expression *"$VMName successfully started."*.</span></span>
22. <span data-ttu-id="9d432-351">No segundo controle **Write-Output**, clique em **Parâmetros** e altere o valor **Rótulo** para *Falha ao Notificar VM Iniciada*</span><span class="sxs-lookup"><span data-stu-id="9d432-351">On the second **Write-Output** control, click **Parameters** and change the **Label** value to *Notify VM Start Failed*</span></span>
23. <span data-ttu-id="9d432-352">Para **InputObject**, altere a **Fonte de dados** para a **Expressão do PowerShell** e digite a expressão *"$VMName não pôde iniciar."*.</span><span class="sxs-lookup"><span data-stu-id="9d432-352">For **InputObject**, change **Data source** to **PowerShell expression** and type in the expression *"$VMName could not start."*.</span></span>
24. <span data-ttu-id="9d432-353">Criar um link de **Start-AzureRmVM** para **Notificar VM Iniciada** e **Falha ao Notificar VM Iniciada**.</span><span class="sxs-lookup"><span data-stu-id="9d432-353">Create a link from **Start-AzureRmVM** to **Notify VM Started** and **Notify VM Start Failed**.</span></span>
25. <span data-ttu-id="9d432-354">Selecione o link para **Notificar VM Iniciada** e altere **Aplicar condição** para **True**.</span><span class="sxs-lookup"><span data-stu-id="9d432-354">Select the link to **Notify VM Started** and change **Apply condition** to **True**.</span></span>
26. <span data-ttu-id="9d432-355">Para a **Expressão da condição**, digite *$ActivityOutput['Start-AzureRmVM'].IsSuccessStatusCode -eq $true*.</span><span class="sxs-lookup"><span data-stu-id="9d432-355">For the **Condition expression**, type *$ActivityOutput['Start-AzureRmVM'].IsSuccessStatusCode -eq $true*.</span></span>  <span data-ttu-id="9d432-356">Agora, o controle Write-Output é executado apenas se a máquina virtual é iniciada com êxito.</span><span class="sxs-lookup"><span data-stu-id="9d432-356">This Write-Output control now only runs if the virtual machine is successfully started.</span></span>
27. <span data-ttu-id="9d432-357">Selecione o link para **Falha ao Notificar VM Iniciada** e altere **Aplicar condição** para **True**.</span><span class="sxs-lookup"><span data-stu-id="9d432-357">Select the link to **Notify VM Start Failed** and change **Apply condition** to **True**.</span></span>
28. <span data-ttu-id="9d432-358">Para a **Expressão da condição**, digite *$ActivityOutput['Start-AzureRmVM'].IsSuccessStatusCode -ne $true*.</span><span class="sxs-lookup"><span data-stu-id="9d432-358">For the **Condition expression**, type *$ActivityOutput['Start-AzureRmVM'].IsSuccessStatusCode -ne $true*.</span></span>  <span data-ttu-id="9d432-359">Agora, o controle Write-Output será executado apenas se a máquina virtual não for iniciada com êxito.</span><span class="sxs-lookup"><span data-stu-id="9d432-359">This Write-Output control now only runs if the virtual machine is not successfully started.</span></span>
29. <span data-ttu-id="9d432-360">Salve o runbook e abra o Painel de teste.</span><span class="sxs-lookup"><span data-stu-id="9d432-360">Save the runbook and open the Test pane.</span></span>
30. <span data-ttu-id="9d432-361">Inicie o runbook com a máquina virtual parada e ela deve ser iniciada.</span><span class="sxs-lookup"><span data-stu-id="9d432-361">Start the runbook with the virtual machine stopped, and it should start.</span></span>

## <a name="next-steps"></a><span data-ttu-id="9d432-362">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="9d432-362">Next steps</span></span>
* <span data-ttu-id="9d432-363">Para saber mais sobre a Criação Gráfica, veja [Criação gráfica na Automação do Azure](automation-graphical-authoring-intro.md)</span><span class="sxs-lookup"><span data-stu-id="9d432-363">To learn more about Graphical Authoring, see [Graphical authoring in Azure Automation](automation-graphical-authoring-intro.md)</span></span>
* <span data-ttu-id="9d432-364">Para começar a usar os runbooks do PowerShell, veja [Meu primeiro runbook do PowerShell](automation-first-runbook-textual-powershell.md)</span><span class="sxs-lookup"><span data-stu-id="9d432-364">To get started with PowerShell runbooks, see [My first PowerShell runbook](automation-first-runbook-textual-powershell.md)</span></span>
* <span data-ttu-id="9d432-365">Para começar a usar os runbooks de fluxo de trabalho do PowerShell, confira [Meu primeiro runbook de fluxo de trabalho do PowerShell](automation-first-runbook-textual.md)</span><span class="sxs-lookup"><span data-stu-id="9d432-365">To get started with PowerShell workflow runbooks, see [My first PowerShell workflow runbook](automation-first-runbook-textual.md)</span></span>

