---
title: "aaaMy primeiro PowerShell runbook na automação do Azure | Microsoft Docs"
description: "Tutorial que orienta você na criação de hello, testes e publicação de um runbook simple do PowerShell."
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: 
keywords: "azure powershell, tutorial de script do powershell, automação do powershell"
ms.assetid: a43b395a-e740-41a3-ae62-40eac9d0ec00
ms.service: automation
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 03/26/2017
ms.author: magoedte;sngun
ms.openlocfilehash: abff94abe666cd8423c35b970b4162ba9247bcf8
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="my-first-powershell-runbook"></a><span data-ttu-id="1aba2-104">Meu primeiro runbook do PowerShell</span><span class="sxs-lookup"><span data-stu-id="1aba2-104">My first PowerShell runbook</span></span>

> [!div class="op_single_selector"]
> * [<span data-ttu-id="1aba2-105">Gráfico</span><span class="sxs-lookup"><span data-stu-id="1aba2-105">Graphical</span></span>](automation-first-runbook-graphical.md)
> * [<span data-ttu-id="1aba2-106">PowerShell</span><span class="sxs-lookup"><span data-stu-id="1aba2-106">PowerShell</span></span>](automation-first-runbook-textual-powershell.md)
> * [<span data-ttu-id="1aba2-107">Fluxo de Trabalho do PowerShell</span><span class="sxs-lookup"><span data-stu-id="1aba2-107">PowerShell Workflow</span></span>](automation-first-runbook-textual.md)
> 
> 

<span data-ttu-id="1aba2-108">Este tutorial orienta você na criação de saudação de um [PowerShell runbook](automation-runbook-types.md#powershell-runbooks) na automação do Azure.</span><span class="sxs-lookup"><span data-stu-id="1aba2-108">This tutorial walks you through hello creation of a [PowerShell runbook](automation-runbook-types.md#powershell-runbooks) in Azure Automation.</span></span> <span data-ttu-id="1aba2-109">Vamos começar com um runbook simple que podemos testar e publicar enquanto explicamos como tootrack Olá status do trabalho de runbook hello.</span><span class="sxs-lookup"><span data-stu-id="1aba2-109">We start with a simple runbook that we test and publish while we explain how tootrack hello status of hello runbook job.</span></span> <span data-ttu-id="1aba2-110">Em seguida, podemos modificar Olá runbook tooactually gerenciar recursos do Azure, nesse caso, iniciando uma máquina virtual do Azure.</span><span class="sxs-lookup"><span data-stu-id="1aba2-110">Then we modify hello runbook tooactually manage Azure resources, in this case starting an Azure virtual machine.</span></span> <span data-ttu-id="1aba2-111">Por fim, fazemos Olá runbook mais robusta, adicionando parâmetros de runbook.</span><span class="sxs-lookup"><span data-stu-id="1aba2-111">Lastly, we make hello runbook more robust by adding runbook parameters.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="1aba2-112">Pré-requisitos</span><span class="sxs-lookup"><span data-stu-id="1aba2-112">Prerequisites</span></span>
<span data-ttu-id="1aba2-113">toocomplete neste tutorial, você precisa Olá a seguir:</span><span class="sxs-lookup"><span data-stu-id="1aba2-113">toocomplete this tutorial, you need hello following:</span></span>

* <span data-ttu-id="1aba2-114">Assinatura do Azure.</span><span class="sxs-lookup"><span data-stu-id="1aba2-114">Azure subscription.</span></span> <span data-ttu-id="1aba2-115">Se você ainda não tiver uma, poderá [ativar os benefícios de assinante do MSDN](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/) ou <a href="/pricing/free-account/" target="_blank">[inscrever-se em uma conta gratuita](https://azure.microsoft.com/free/).</span><span class="sxs-lookup"><span data-stu-id="1aba2-115">If you don't have one yet, you can [activate your MSDN subscriber benefits](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/) or <a href="/pricing/free-account/" target="_blank">[sign up for a free account](https://azure.microsoft.com/free/).</span></span>
* <span data-ttu-id="1aba2-116">[Conta de automação](automation-sec-configure-azure-runas-account.md) toohold Olá runbook e autenticar tooAzure recursos.</span><span class="sxs-lookup"><span data-stu-id="1aba2-116">[Automation account](automation-sec-configure-azure-runas-account.md) toohold hello runbook and authenticate tooAzure resources.</span></span>  <span data-ttu-id="1aba2-117">Essa conta deve ter permissão toostart e parar a máquina virtual de saudação.</span><span class="sxs-lookup"><span data-stu-id="1aba2-117">This account must have permission toostart and stop hello virtual machine.</span></span>
* <span data-ttu-id="1aba2-118">Uma máquina virtual do Azure.</span><span class="sxs-lookup"><span data-stu-id="1aba2-118">An Azure virtual machine.</span></span> <span data-ttu-id="1aba2-119">Paramos e iniciamos o computador, portanto, ele não deve ser uma VM de produção.</span><span class="sxs-lookup"><span data-stu-id="1aba2-119">We stop and start this machine so it should not be a production VM.</span></span>

## <a name="step-1---create-new-runbook"></a><span data-ttu-id="1aba2-120">Etapa 1: criar o novo runbook</span><span class="sxs-lookup"><span data-stu-id="1aba2-120">Step 1 - Create new runbook</span></span>
<span data-ttu-id="1aba2-121">Vamos começar criando um runbook simples que gera o texto de saudação *Hello World*.</span><span class="sxs-lookup"><span data-stu-id="1aba2-121">We'll start by creating a simple runbook that outputs hello text *Hello World*.</span></span>

1. <span data-ttu-id="1aba2-122">No portal do Azure de Olá, abra sua conta de automação.</span><span class="sxs-lookup"><span data-stu-id="1aba2-122">In hello Azure portal, open your Automation account.</span></span>  
   <span data-ttu-id="1aba2-123">página de conta de automação Olá fornece uma exibição rápida dos recursos de saudação nesta conta.</span><span class="sxs-lookup"><span data-stu-id="1aba2-123">hello Automation account page gives you a quick view of hello resources in this account.</span></span> <span data-ttu-id="1aba2-124">Você já deve ter alguns ativos.</span><span class="sxs-lookup"><span data-stu-id="1aba2-124">You should already have some assets.</span></span> <span data-ttu-id="1aba2-125">A maioria delas são módulos de saudação que são incluídos automaticamente em uma nova conta de automação.</span><span class="sxs-lookup"><span data-stu-id="1aba2-125">Most of those are hello modules that are automatically included in a new Automation account.</span></span> <span data-ttu-id="1aba2-126">Você também deve ter o ativo de credencial de saudação que é mencionado na Olá [pré-requisitos](#prerequisites).</span><span class="sxs-lookup"><span data-stu-id="1aba2-126">You should also have hello Credential asset that's mentioned in hello [prerequisites](#prerequisites).</span></span>
2. <span data-ttu-id="1aba2-127">Clique em Olá **Runbooks** bloco tooopen Olá lista de runbooks.</span><span class="sxs-lookup"><span data-stu-id="1aba2-127">Click hello **Runbooks** tile tooopen hello list of runbooks.</span></span><br><br> <span data-ttu-id="1aba2-128">![RunbooksControl](media/automation-first-runbook-textual-powershell/runbooks-control-tiles.png)</span><span class="sxs-lookup"><span data-stu-id="1aba2-128">![RunbooksControl](media/automation-first-runbook-textual-powershell/runbooks-control-tiles.png)</span></span>  
3. <span data-ttu-id="1aba2-129">Criar um novo runbook clicando Olá **adicionar um runbook** botão e, em seguida, **criar um novo runbook**.</span><span class="sxs-lookup"><span data-stu-id="1aba2-129">Create a new runbook by clicking hello **Add a runbook** button and then **Create a new runbook**.</span></span>
4. <span data-ttu-id="1aba2-130">Nomeie Olá runbook Olá *MyFirstRunbook PowerShell*.</span><span class="sxs-lookup"><span data-stu-id="1aba2-130">Give hello runbook hello name *MyFirstRunbook-PowerShell*.</span></span>
5. <span data-ttu-id="1aba2-131">Nesse caso, vamos toocreate um [PowerShell runbook](automation-runbook-types.md#powershell-runbooks) escolha **Powershell** para **tipo de Runbook**.</span><span class="sxs-lookup"><span data-stu-id="1aba2-131">In this case, we're going toocreate a [PowerShell runbook](automation-runbook-types.md#powershell-runbooks) so select **Powershell** for **Runbook type**.</span></span><br><br> <span data-ttu-id="1aba2-132">![Runbook Type](media/automation-first-runbook-textual-powershell/automation-runbook-type.png)</span><span class="sxs-lookup"><span data-stu-id="1aba2-132">![Runbook Type](media/automation-first-runbook-textual-powershell/automation-runbook-type.png)</span></span>  
6. <span data-ttu-id="1aba2-133">Clique em **criar** toocreate Olá runbook e editor textual Olá aberto.</span><span class="sxs-lookup"><span data-stu-id="1aba2-133">Click **Create** toocreate hello runbook and open hello textual editor.</span></span>

## <a name="step-2---add-code-toohello-runbook"></a><span data-ttu-id="1aba2-134">Etapa 2: adicionar código toohello runbook</span><span class="sxs-lookup"><span data-stu-id="1aba2-134">Step 2 - Add code toohello runbook</span></span>
<span data-ttu-id="1aba2-135">Você pode o código de tipo diretamente no runbook hello, ou você pode selecionar cmdlets, runbooks e ativos de saudação controle da biblioteca e eles adicionou toohello runbook com os parâmetros relacionados.</span><span class="sxs-lookup"><span data-stu-id="1aba2-135">You can either type code directly into hello runbook, or you can select cmdlets, runbooks, and assets from hello Library control and have them added toohello runbook with any related parameters.</span></span> <span data-ttu-id="1aba2-136">Para este passo a passo, digite diretamente no runbook hello.</span><span class="sxs-lookup"><span data-stu-id="1aba2-136">For this walkthrough, we type directly in hello runbook.</span></span>

1. <span data-ttu-id="1aba2-137">Nosso runbook está vazio no momento. Digite *Write-Output "Olá mundo."*.</span><span class="sxs-lookup"><span data-stu-id="1aba2-137">Our runbook is currently empty, type *Write-Output "Hello World."*.</span></span><br><br> <span data-ttu-id="1aba2-138">![Olá mundo](media/automation-first-runbook-textual-powershell/automation-helloworld.png)</span><span class="sxs-lookup"><span data-stu-id="1aba2-138">![Hello World](media/automation-first-runbook-textual-powershell/automation-helloworld.png)</span></span>  
2. <span data-ttu-id="1aba2-139">Salvar o runbook Olá clicando **salvar**.</span><span class="sxs-lookup"><span data-stu-id="1aba2-139">Save hello runbook by clicking **Save**.</span></span><br><br> <span data-ttu-id="1aba2-140">![Botão Salvar](media/automation-first-runbook-textual-powershell/automation-runbook-edit-controls-save.png)</span><span class="sxs-lookup"><span data-stu-id="1aba2-140">![Save Button](media/automation-first-runbook-textual-powershell/automation-runbook-edit-controls-save.png)</span></span>  

## <a name="step-3---test-hello-runbook"></a><span data-ttu-id="1aba2-141">Etapa 3 - teste Olá runbook</span><span class="sxs-lookup"><span data-stu-id="1aba2-141">Step 3 - Test hello runbook</span></span>
<span data-ttu-id="1aba2-142">Antes de publicamos Olá runbook toomake-lo disponível em produção, queremos tootest-toomake-se de que ele funcione corretamente.</span><span class="sxs-lookup"><span data-stu-id="1aba2-142">Before we publish hello runbook toomake it available in production, we want tootest it toomake sure that it works properly.</span></span> <span data-ttu-id="1aba2-143">Quando você testa um runbook, executa sua versão de **Rascunho** e vê sua saída interativamente.</span><span class="sxs-lookup"><span data-stu-id="1aba2-143">When you test a runbook, you run its **Draft** version and view its output interactively.</span></span>

1. <span data-ttu-id="1aba2-144">Clique em **painel teste** tooopen painel de teste de saudação.</span><span class="sxs-lookup"><span data-stu-id="1aba2-144">Click **Test pane** tooopen hello Test pane.</span></span><br><br> <span data-ttu-id="1aba2-145">![Test Pane](media/automation-first-runbook-textual-powershell/automation-runbook-edit-controls-test.png)</span><span class="sxs-lookup"><span data-stu-id="1aba2-145">![Test Pane](media/automation-first-runbook-textual-powershell/automation-runbook-edit-controls-test.png)</span></span>  
2. <span data-ttu-id="1aba2-146">Clique em **iniciar** toostart teste de saudação.</span><span class="sxs-lookup"><span data-stu-id="1aba2-146">Click **Start** toostart hello test.</span></span> <span data-ttu-id="1aba2-147">Isso deve ser a opção de Olá só está habilitada.</span><span class="sxs-lookup"><span data-stu-id="1aba2-147">This should be hello only enabled option.</span></span>
3. <span data-ttu-id="1aba2-148">Um [trabalho de runbook](automation-runbook-execution.md) é criado e seu status é exibido.</span><span class="sxs-lookup"><span data-stu-id="1aba2-148">A [runbook job](automation-runbook-execution.md) is created and its status displayed.</span></span>  
   <span data-ttu-id="1aba2-149">status do trabalho Olá começa como *na fila* indicando que ele está aguardando um trabalho de runbook no hello toocome de nuvem disponível.</span><span class="sxs-lookup"><span data-stu-id="1aba2-149">hello job status starts as *Queued* indicating that it is waiting for a runbook worker in hello cloud toocome available.</span></span> <span data-ttu-id="1aba2-150">Em seguida, ele move muito*iniciando* quando um trabalhador declarações trabalho Olá e, em seguida, *executando* quando Olá runbook realmente começa a ser executado.</span><span class="sxs-lookup"><span data-stu-id="1aba2-150">It will then move too*Starting* when a worker claims hello job, and then *Running* when hello runbook actually starts running.</span></span>  
4. <span data-ttu-id="1aba2-151">Quando o trabalho de runbook Olá for concluído, a saída é exibida.</span><span class="sxs-lookup"><span data-stu-id="1aba2-151">When hello runbook job completes, its output is displayed.</span></span> <span data-ttu-id="1aba2-152">Em nosso caso, deveremos ver *Olá mundo*.</span><span class="sxs-lookup"><span data-stu-id="1aba2-152">In our case, we should see *Hello World*.</span></span><br><br> <span data-ttu-id="1aba2-153">![Saída do painel de teste](media/automation-first-runbook-textual-powershell/automation-testpane-output.png)</span><span class="sxs-lookup"><span data-stu-id="1aba2-153">![Test Pane Output](media/automation-first-runbook-textual-powershell/automation-testpane-output.png)</span></span>  
5. <span data-ttu-id="1aba2-154">Feche a tela de toohello Olá teste painel tooreturn.</span><span class="sxs-lookup"><span data-stu-id="1aba2-154">Close hello Test pane tooreturn toohello canvas.</span></span>

## <a name="step-4---publish-and-start-hello-runbook"></a><span data-ttu-id="1aba2-155">Etapa 4: publicar e iniciar o runbook Olá</span><span class="sxs-lookup"><span data-stu-id="1aba2-155">Step 4 - Publish and start hello runbook</span></span>
<span data-ttu-id="1aba2-156">Olá runbook que criamos ainda está em modo de rascunho.</span><span class="sxs-lookup"><span data-stu-id="1aba2-156">hello runbook that we created is still in Draft mode.</span></span> <span data-ttu-id="1aba2-157">Precisamos toopublish antes de fazermos em produção.</span><span class="sxs-lookup"><span data-stu-id="1aba2-157">We need toopublish it before we can run it in production.</span></span>  <span data-ttu-id="1aba2-158">Quando você publicar um runbook, você substituir a versão publicada existente de saudação com versão de rascunho de saudação.</span><span class="sxs-lookup"><span data-stu-id="1aba2-158">When you publish a runbook, you overwrite hello existing Published version with hello Draft version.</span></span>  <span data-ttu-id="1aba2-159">Em nosso caso, não temos uma versão publicada ainda porque que acabamos de criar o runbook hello.</span><span class="sxs-lookup"><span data-stu-id="1aba2-159">In our case, we don't have a Published version yet because we just created hello runbook.</span></span>

1. <span data-ttu-id="1aba2-160">Clique em **publicar** toopublish Olá runbook e, em seguida, **Sim** quando solicitado.</span><span class="sxs-lookup"><span data-stu-id="1aba2-160">Click **Publish** toopublish hello runbook and then **Yes** when prompted.</span></span><br><br> <span data-ttu-id="1aba2-161">![Botão Publicar](media/automation-first-runbook-textual-powershell/automation-runbook-edit-controls-publish.png)</span><span class="sxs-lookup"><span data-stu-id="1aba2-161">![Publish button](media/automation-first-runbook-textual-powershell/automation-runbook-edit-controls-publish.png)</span></span>  
2. <span data-ttu-id="1aba2-162">Se você rolar tooview esquerdo Olá runbook no hello **Runbooks** painel agora, ele mostrará um **Status criação** de **publicado**.</span><span class="sxs-lookup"><span data-stu-id="1aba2-162">If you scroll left tooview hello runbook in hello **Runbooks** pane now, it will show an **Authoring Status** of **Published**.</span></span>
3. <span data-ttu-id="1aba2-163">Rolagem toohello back tooview direita Olá painel **MyFirstRunbook PowerShell**.</span><span class="sxs-lookup"><span data-stu-id="1aba2-163">Scroll back toohello right tooview hello pane for **MyFirstRunbook-PowerShell**.</span></span>  
   <span data-ttu-id="1aba2-164">Hello opções na parte superior da saudação nos permitem toostart Olá runbook, exibir hello runbook, agendá-la toostart em algum momento futuro de saudação ou criar um [webhook](automation-webhooks.md) para que ele possa ser iniciado por meio de uma chamada HTTP.</span><span class="sxs-lookup"><span data-stu-id="1aba2-164">hello options across hello top allow us toostart hello runbook, view hello runbook, schedule it toostart at some time in hello future, or create a [webhook](automation-webhooks.md) so it can be started through an HTTP call.</span></span>
4. <span data-ttu-id="1aba2-165">Podemos ser toostart Olá runbook, clique em **iniciar** e, em seguida, clique em **Okey** quando abre a folha de iniciar Runbook hello.</span><span class="sxs-lookup"><span data-stu-id="1aba2-165">We want toostart hello runbook, so click **Start** and then click **Ok** when hello Start Runbook blade opens.</span></span><br><br> <span data-ttu-id="1aba2-166">![Botão Iniciar](media/automation-first-runbook-textual-powershell/automation-runbook-controls-start.png)</span><span class="sxs-lookup"><span data-stu-id="1aba2-166">![Start button](media/automation-first-runbook-textual-powershell/automation-runbook-controls-start.png)</span></span><br>    
5. <span data-ttu-id="1aba2-167">Um painel de trabalho é aberto para o trabalho de runbook Olá que criamos.</span><span class="sxs-lookup"><span data-stu-id="1aba2-167">A job pane is opened for hello runbook job that we created.</span></span> <span data-ttu-id="1aba2-168">É possível fechar esse painel, mas nesse caso é deixá-lo aberto para que possamos ver o progresso do trabalho hello.</span><span class="sxs-lookup"><span data-stu-id="1aba2-168">We can close this pane, but in this case we leave it open so we can watch hello job's progress.</span></span>
6. <span data-ttu-id="1aba2-169">status do trabalho Olá é mostrada na **resumo do trabalho** e correspondências Olá status que vimos Quando testamos Olá runbook.</span><span class="sxs-lookup"><span data-stu-id="1aba2-169">hello job status is shown in **Job Summary** and matches hello statuses that we saw when we tested hello runbook.</span></span><br><br> <span data-ttu-id="1aba2-170">![Resumo do trabalho](media/automation-first-runbook-textual-powershell/job-pane-status-blade-jobsummary.png)</span><span class="sxs-lookup"><span data-stu-id="1aba2-170">![Job Summary](media/automation-first-runbook-textual-powershell/job-pane-status-blade-jobsummary.png)</span></span><br>  
7. <span data-ttu-id="1aba2-171">Uma vez Olá runbook status mostra *concluído*, clique em **saída**.</span><span class="sxs-lookup"><span data-stu-id="1aba2-171">Once hello runbook status shows *Completed*, click **Output**.</span></span> <span data-ttu-id="1aba2-172">Painel de saída de saudação é aberto e podemos ver nossa *Hello World*.</span><span class="sxs-lookup"><span data-stu-id="1aba2-172">hello Output pane is opened, and we can see our *Hello World*.</span></span><br><br> <span data-ttu-id="1aba2-173">![Saída do trabalho](media/automation-first-runbook-textual-powershell/job-pane-status-blade-outputtile.png)</span><span class="sxs-lookup"><span data-stu-id="1aba2-173">![Job Output](media/automation-first-runbook-textual-powershell/job-pane-status-blade-outputtile.png)</span></span><br> 
8. <span data-ttu-id="1aba2-174">Painel de saída Olá fechar.</span><span class="sxs-lookup"><span data-stu-id="1aba2-174">Close hello Output pane.</span></span>
9. <span data-ttu-id="1aba2-175">Clique em **todos os Logs** tooopen Olá fluxos painel trabalho de runbook hello.</span><span class="sxs-lookup"><span data-stu-id="1aba2-175">Click **All Logs** tooopen hello Streams pane for hello runbook job.</span></span> <span data-ttu-id="1aba2-176">Veremos apenas *Hello World* na saída de hello fluxo, mas isso pode mostrar outros fluxos de um trabalho de runbook, como detalhado e de erro se o runbook Olá grava toothem.</span><span class="sxs-lookup"><span data-stu-id="1aba2-176">We should only see *Hello World* in hello output stream, but this can show other streams for a runbook job such as Verbose and Error if hello runbook writes toothem.</span></span><br><br> <span data-ttu-id="1aba2-177">![Todos os Logs](media/automation-first-runbook-textual-powershell/job-pane-status-blade-alllogstile.png)</span><span class="sxs-lookup"><span data-stu-id="1aba2-177">![All Logs](media/automation-first-runbook-textual-powershell/job-pane-status-blade-alllogstile.png)</span></span><br>   
10. <span data-ttu-id="1aba2-178">Feche o painel de fluxos de saudação e Olá trabalho tooreturn toohello MyFirstRunbook PowerShell um painel.</span><span class="sxs-lookup"><span data-stu-id="1aba2-178">Close hello Streams pane and hello Job pane tooreturn toohello MyFirstRunbook-PowerShell pane.</span></span>
11. <span data-ttu-id="1aba2-179">Clique em **trabalhos** tooopen painel de trabalhos Olá para este runbook.</span><span class="sxs-lookup"><span data-stu-id="1aba2-179">Click **Jobs** tooopen hello Jobs pane for this runbook.</span></span> <span data-ttu-id="1aba2-180">Lista todos os trabalhos de saudação criados por este runbook.</span><span class="sxs-lookup"><span data-stu-id="1aba2-180">This lists all of hello jobs created by this runbook.</span></span> <span data-ttu-id="1aba2-181">Um trabalho listado como somente executamos trabalho Olá uma vez só deverá ser exibida.</span><span class="sxs-lookup"><span data-stu-id="1aba2-181">We should only see one job listed since we only ran hello job once.</span></span><br><br> <span data-ttu-id="1aba2-182">![Lista de trabalhos](media/automation-first-runbook-textual-powershell/runbook-control-job-tile.png)</span><span class="sxs-lookup"><span data-stu-id="1aba2-182">![Job List](media/automation-first-runbook-textual-powershell/runbook-control-job-tile.png)</span></span>  
12. <span data-ttu-id="1aba2-183">Você pode clicar neste trabalho tooopen Olá mesmo painel de trabalho que são exibidos quando é iniciado Olá runbook.</span><span class="sxs-lookup"><span data-stu-id="1aba2-183">You can click this job tooopen hello same Job pane that we viewed when we started hello runbook.</span></span> <span data-ttu-id="1aba2-184">Isso permite que você toogo Voltar no tempo e exibir detalhes de saudação de qualquer trabalho que foi criado para um determinado runbook.</span><span class="sxs-lookup"><span data-stu-id="1aba2-184">This allows you toogo back in time and view hello details of any job that was created for a particular runbook.</span></span>

## <a name="step-5---add-authentication-toomanage-azure-resources"></a><span data-ttu-id="1aba2-185">Etapa 5: adicionar autenticação toomanage recursos do Azure</span><span class="sxs-lookup"><span data-stu-id="1aba2-185">Step 5 - Add authentication toomanage Azure resources</span></span>
<span data-ttu-id="1aba2-186">Testamos e publicamos nosso runbook, mas até o momento ele não faz nada útil.</span><span class="sxs-lookup"><span data-stu-id="1aba2-186">We've tested and published our runbook, but so far it doesn't do anything useful.</span></span> <span data-ttu-id="1aba2-187">Queremos toohave-gerenciar recursos do Azure.</span><span class="sxs-lookup"><span data-stu-id="1aba2-187">We want toohave it manage Azure resources.</span></span> <span data-ttu-id="1aba2-188">Ele não será capaz de toodo, embora a menos que temos-autenticar usando credenciais Olá chamado hello tooin [pré-requisitos](#prerequisites).</span><span class="sxs-lookup"><span data-stu-id="1aba2-188">It won't be able toodo that though unless we have it authenticate using hello credentials that are referred tooin hello [prerequisites](#prerequisites).</span></span> <span data-ttu-id="1aba2-189">Podemos fazer isso com hello **AzureRmAccount adicionar** cmdlet.</span><span class="sxs-lookup"><span data-stu-id="1aba2-189">We do that with hello **Add-AzureRmAccount** cmdlet.</span></span>

1. <span data-ttu-id="1aba2-190">Editor de textual Olá aberta clicando **editar** no painel de saudação MyFirstRunbook PowerShell.</span><span class="sxs-lookup"><span data-stu-id="1aba2-190">Open hello textual editor by clicking **Edit** on hello MyFirstRunbook-PowerShell pane.</span></span><br><br> <span data-ttu-id="1aba2-191">![Editar runbook](media/automation-first-runbook-textual-powershell/automation-runbook-controls-edit.png)</span><span class="sxs-lookup"><span data-stu-id="1aba2-191">![Edit Runbook](media/automation-first-runbook-textual-powershell/automation-runbook-controls-edit.png)</span></span><br>   
2. <span data-ttu-id="1aba2-192">Não é necessário Olá **Write-Output** mais de linha, portanto vá em frente e excluí-lo.</span><span class="sxs-lookup"><span data-stu-id="1aba2-192">We don't need hello **Write-Output** line anymore, so go ahead and delete it.</span></span>
3. <span data-ttu-id="1aba2-193">Digite ou copie e cole Olá código que manipula a autenticação de saudação à sua conta de automação executar como a seguir:</span><span class="sxs-lookup"><span data-stu-id="1aba2-193">Type or copy and paste hello following code that handles hello authentication with your Automation Run As account:</span></span>
   
   ```
   $Conn = Get-AutomationConnection -Name AzureRunAsConnection
   Add-AzureRMAccount -ServicePrincipal -Tenant $Conn.TenantID `
   -ApplicationId $Conn.ApplicationID -CertificateThumbprint $Conn.CertificateThumbprint
   ```
   <br>
4. <span data-ttu-id="1aba2-194">Clique em **painel teste** para que podemos testar Olá runbook.</span><span class="sxs-lookup"><span data-stu-id="1aba2-194">Click **Test pane** so that we can test hello runbook.</span></span>
5. <span data-ttu-id="1aba2-195">Clique em **iniciar** toostart teste de saudação.</span><span class="sxs-lookup"><span data-stu-id="1aba2-195">Click **Start** toostart hello test.</span></span> <span data-ttu-id="1aba2-196">Quando for concluída, você deve receber toohello semelhante de saída a seguir, exibindo informações básicas de sua conta.</span><span class="sxs-lookup"><span data-stu-id="1aba2-196">Once it completes, you should receive output similar toohello following, displaying basic information from your account.</span></span> <span data-ttu-id="1aba2-197">Isso confirma que Olá credencial é válida.</span><span class="sxs-lookup"><span data-stu-id="1aba2-197">This confirms that hello credential is valid.</span></span><br><br> <span data-ttu-id="1aba2-198">![Autenticar](media/automation-first-runbook-textual-powershell/runbook-auth-output.png)</span><span class="sxs-lookup"><span data-stu-id="1aba2-198">![Authenticate](media/automation-first-runbook-textual-powershell/runbook-auth-output.png)</span></span>

## <a name="step-6---add-code-toostart-a-virtual-machine"></a><span data-ttu-id="1aba2-199">Etapa 6: adicionar código toostart uma máquina virtual</span><span class="sxs-lookup"><span data-stu-id="1aba2-199">Step 6 - Add code toostart a virtual machine</span></span>
<span data-ttu-id="1aba2-200">Agora que nossa runbook está se autenticando tooour assinatura do Azure, podemos gerenciar recursos.</span><span class="sxs-lookup"><span data-stu-id="1aba2-200">Now that our runbook is authenticating tooour Azure subscription, we can manage resources.</span></span> <span data-ttu-id="1aba2-201">Vamos adicionar um comando toostart uma máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="1aba2-201">We add a command toostart a virtual machine.</span></span> <span data-ttu-id="1aba2-202">Você pode escolher qualquer máquina virtual na sua assinatura do Azure e agora vamos codificar esse nome no runbook hello.</span><span class="sxs-lookup"><span data-stu-id="1aba2-202">You can pick any virtual machine in your Azure subscription, and for now we will hardcode that name in hello runbook.</span></span>

1. <span data-ttu-id="1aba2-203">Depois de *adicionar AzureRmAccount*, tipo *AzureRmVM Start-nome 'VMName' - ResourceGroupName 'NameofResourceGroup'* fornecendo o nome de saudação e nome do grupo de recursos do hello toostart de máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="1aba2-203">After *Add-AzureRmAccount*, type *Start-AzureRmVM -Name 'VMName' -ResourceGroupName 'NameofResourceGroup'* providing hello name and Resource Group name of hello virtual machine toostart.</span></span>  
   
   ```
   $Conn = Get-AutomationConnection -Name AzureRunAsConnection
   Add-AzureRMAccount -ServicePrincipal -Tenant $Conn.TenantID `
   -ApplicationID $Conn.ApplicationID -CertificateThumbprint $Conn.CertificateThumbprint
   Start-AzureRmVM -Name 'VMName' -ResourceGroupName 'ResourceGroupName'
   ```
   <br>
2. <span data-ttu-id="1aba2-204">Salvar o runbook hello e, em seguida, clique em **painel teste** para que podemos testar.</span><span class="sxs-lookup"><span data-stu-id="1aba2-204">Save hello runbook and then click **Test pane** so that we can test it.</span></span>
3. <span data-ttu-id="1aba2-205">Clique em **iniciar** toostart teste de saudação.</span><span class="sxs-lookup"><span data-stu-id="1aba2-205">Click **Start** toostart hello test.</span></span> <span data-ttu-id="1aba2-206">Quando for concluída, verifique que a máquina virtual Olá foi iniciada.</span><span class="sxs-lookup"><span data-stu-id="1aba2-206">Once it completes, check that hello virtual machine was started.</span></span>

## <a name="step-7---add-an-input-parameter-toohello-runbook"></a><span data-ttu-id="1aba2-207">Etapa 7: adicionar um runbook de toohello do parâmetro de entrada</span><span class="sxs-lookup"><span data-stu-id="1aba2-207">Step 7 - Add an input parameter toohello runbook</span></span>
<span data-ttu-id="1aba2-208">Nosso runbook inicia Olá virtual da máquina que possamos codificado no runbook hello, mas pode ser mais útil se especificamos máquina virtual de saudação quando Olá runbook for iniciado.</span><span class="sxs-lookup"><span data-stu-id="1aba2-208">Our runbook currently starts hello virtual machine that we hardcoded in hello runbook, but it would be more useful if we specify hello virtual machine when hello runbook is started.</span></span> <span data-ttu-id="1aba2-209">Vamos agora adicionar parâmetros de entrada toohello runbook tooprovide essa funcionalidade.</span><span class="sxs-lookup"><span data-stu-id="1aba2-209">We will now add input parameters toohello runbook tooprovide that functionality.</span></span>

1. <span data-ttu-id="1aba2-210">Adicionar parâmetros para *VMName* e *ResourceGroupName* toohello runbook e usar essas variáveis com hello **AzureRmVM início** cmdlet como no exemplo hello abaixo.</span><span class="sxs-lookup"><span data-stu-id="1aba2-210">Add parameters for *VMName* and *ResourceGroupName* toohello runbook and use these variables with hello **Start-AzureRmVM** cmdlet as in hello example below.</span></span>  
   
   ```
   Param(
    [string]$VMName,
    [string]$ResourceGroupName
   )
   $Conn = Get-AutomationConnection -Name AzureRunAsConnection
   Add-AzureRMAccount -ServicePrincipal -Tenant $Conn.TenantID `
   -ApplicationID $Conn.ApplicationID -CertificateThumbprint $Conn.CertificateThumbprint
   Start-AzureRmVM -Name $VMName -ResourceGroupName $ResourceGroupName
   ```
   <br>
2. <span data-ttu-id="1aba2-211">Salvar o runbook hello e abrir o painel de teste de saudação.</span><span class="sxs-lookup"><span data-stu-id="1aba2-211">Save hello runbook and open hello Test pane.</span></span> <span data-ttu-id="1aba2-212">Agora fornecem valores para Olá duas variáveis de entrada que são usadas no teste de saudação.</span><span class="sxs-lookup"><span data-stu-id="1aba2-212">You can now provide values for hello two input variables that are used in hello test.</span></span>
3. <span data-ttu-id="1aba2-213">Painel de teste Olá fechar.</span><span class="sxs-lookup"><span data-stu-id="1aba2-213">Close hello Test pane.</span></span>
4. <span data-ttu-id="1aba2-214">Clique em **publicar** toopublish Olá nova versão de runbook hello.</span><span class="sxs-lookup"><span data-stu-id="1aba2-214">Click **Publish** toopublish hello new version of hello runbook.</span></span>
5. <span data-ttu-id="1aba2-215">Pare a máquina de virtual Olá iniciado na etapa anterior hello.</span><span class="sxs-lookup"><span data-stu-id="1aba2-215">Stop hello virtual machine that you started in hello previous step.</span></span>
6. <span data-ttu-id="1aba2-216">Clique em **iniciar** toostart Olá runbook.</span><span class="sxs-lookup"><span data-stu-id="1aba2-216">Click **Start** toostart hello runbook.</span></span> <span data-ttu-id="1aba2-217">Tipo de saudação **VMName** e **ResourceGroupName** para a máquina virtual de saudação que vai toostart.</span><span class="sxs-lookup"><span data-stu-id="1aba2-217">Type in hello **VMName** and **ResourceGroupName** for hello virtual machine that you're going toostart.</span></span><br><br> <span data-ttu-id="1aba2-218">![Passar parâmetro](media/automation-first-runbook-textual-powershell/automation-pass-params.png)</span><span class="sxs-lookup"><span data-stu-id="1aba2-218">![Pass Parameter](media/automation-first-runbook-textual-powershell/automation-pass-params.png)</span></span><br>  
7. <span data-ttu-id="1aba2-219">Quando Olá runbook for concluída, verifique que a máquina virtual Olá foi iniciada.</span><span class="sxs-lookup"><span data-stu-id="1aba2-219">When hello runbook completes, check that hello virtual machine was started.</span></span>

## <a name="differences-from-powershell-workflow"></a><span data-ttu-id="1aba2-220">Diferenças do fluxo de trabalho do PowerShell</span><span class="sxs-lookup"><span data-stu-id="1aba2-220">Differences from PowerShell Workflow</span></span>
<span data-ttu-id="1aba2-221">Runbooks do PowerShell têm Olá mesmo ciclo de vida, recursos e gerenciamento como runbooks de fluxo de trabalho do PowerShell, mas há algumas diferenças e limitações:</span><span class="sxs-lookup"><span data-stu-id="1aba2-221">PowerShell runbooks have hello same lifecycle, capabilities, and management as PowerShell Workflow runbooks but there are some differences and limitations:</span></span>

1. <span data-ttu-id="1aba2-222">Runbooks do PowerShell execute tooPowerShell rápida em comparação com o fluxo de trabalho runbooks que elas não tenham a etapa de compilação.</span><span class="sxs-lookup"><span data-stu-id="1aba2-222">PowerShell runbooks run fast compared tooPowerShell Workflow runbooks as they don’t have compilation step.</span></span>
2. <span data-ttu-id="1aba2-223">Runbooks de fluxo de trabalho do PowerShell oferece suporte a pontos de verificação, usando os pontos de verificação, runbooks do fluxo de trabalho do PowerShell pode retomar de qualquer ponto no runbook Olá enquanto runbooks do PowerShell pode retomar somente do início da saudação.</span><span class="sxs-lookup"><span data-stu-id="1aba2-223">PowerShell Workflow runbooks support checkpoints, using checkpoints, PowerShell Workflow runbooks can resume from any point in hello runbook whereas PowerShell runbooks can only resume from hello beginning.</span></span>
3. <span data-ttu-id="1aba2-224">Os runbooks do fluxo de trabalho do PowerShell dão suporte à execução em paralelo e serial, enquanto os runbooks do PowerShell só podem executar comandos de forma serial.</span><span class="sxs-lookup"><span data-stu-id="1aba2-224">PowerShell Workflow runbooks support parallel and serial execution whereas PowerShell runbooks can only execute commands serially.</span></span>
4. <span data-ttu-id="1aba2-225">Em um runbook do fluxo de trabalho do PowerShell, uma atividade, um comando ou um bloco de script pode ter seu próprio espaço de execução, enquanto em um runbook do PowerShell, tudo em um script é executado em um único espaço de execução.</span><span class="sxs-lookup"><span data-stu-id="1aba2-225">In a PowerShell Workflow runbook, an activity, a command, or a script block can have its own runspace whereas in a PowerShell runbook, everything in a script runs in a single runspace.</span></span> <span data-ttu-id="1aba2-226">Também há algumas [diferenças sintáticas](https://technet.microsoft.com/magazine/dn151046.aspx) entre um runbook nativo do PowerShell e um runbook do Fluxo de Trabalho do PowerShell.</span><span class="sxs-lookup"><span data-stu-id="1aba2-226">There are also some [syntactic differences](https://technet.microsoft.com/magazine/dn151046.aspx) between a native PowerShell runbook and a PowerShell Workflow runbook.</span></span>

## <a name="next-steps"></a><span data-ttu-id="1aba2-227">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="1aba2-227">Next steps</span></span>
* <span data-ttu-id="1aba2-228">tooget iniciado com runbooks gráficos, consulte [meu primeiro runbook gráfico](automation-first-runbook-graphical.md)</span><span class="sxs-lookup"><span data-stu-id="1aba2-228">tooget started with Graphical runbooks, see [My first graphical runbook](automation-first-runbook-graphical.md)</span></span>
* <span data-ttu-id="1aba2-229">tooget iniciado com runbooks do fluxo de trabalho do PowerShell, consulte [meu primeiro runbook de fluxo de trabalho do PowerShell](automation-first-runbook-textual.md)</span><span class="sxs-lookup"><span data-stu-id="1aba2-229">tooget started with PowerShell workflow runbooks, see [My first PowerShell workflow runbook](automation-first-runbook-textual.md)</span></span>
* <span data-ttu-id="1aba2-230">tooknow mais sobre os tipos de runbook, suas vantagens e limitações, consulte [tipos de runbook de automação do Azure](automation-runbook-types.md)</span><span class="sxs-lookup"><span data-stu-id="1aba2-230">tooknow more about runbook types, their advantages and limitations, see [Azure Automation runbook types](automation-runbook-types.md)</span></span>
* <span data-ttu-id="1aba2-231">Para saber mais sobre o recurso de suporte de script do PowerShell, veja [Native PowerShell script support in Azure Automation (Suporte a scripts nativos do PowerShell na Automação do Azure)](https://azure.microsoft.com/blog/announcing-powershell-script-support-azure-automation-2/)</span><span class="sxs-lookup"><span data-stu-id="1aba2-231">For more information on PowerShell script support feature, see [Native PowerShell script support in Azure Automation](https://azure.microsoft.com/blog/announcing-powershell-script-support-azure-automation-2/)</span></span>

