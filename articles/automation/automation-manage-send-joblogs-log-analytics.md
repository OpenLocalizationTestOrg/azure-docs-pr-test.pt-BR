---
title: "aaaForward tooOMS de dados de trabalho de automação do Azure Log Analytics | Microsoft Docs"
description: "Este artigo demonstra como fluxos de trabalho de runbook e status do trabalho toosend gerenciamento e informações adicionais do toodeliver tooMicrosoft análise de Log do Operations Management Suite."
services: automation
documentationcenter: 
author: MGoedtel
manager: carmonm
editor: tysonn
ms.assetid: c12724c6-01a9-4b55-80ae-d8b7b99bd436
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 06/02/2017
ms.author: magoedte
ms.openlocfilehash: e78b6c6677d6502711ce828e2d32b7a91922ae26
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="forward-job-status-and-job-streams-from-automation-toolog-analytics-oms"></a><span data-ttu-id="1e8d6-103">Encaminhar o status do trabalho e fluxos de trabalho de automação tooLog Analytics (OMS)</span><span class="sxs-lookup"><span data-stu-id="1e8d6-103">Forward job status and job streams from Automation tooLog Analytics (OMS)</span></span>
<span data-ttu-id="1e8d6-104">Automação pode enviar runbook trabalho status e o trabalho fluxos tooyour análise de logs do Microsoft Operations Management Suite (OMS) espaço de trabalho.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-104">Automation can send runbook job status and job streams tooyour Microsoft Operations Management Suite (OMS) Log Analytics workspace.</span></span>  <span data-ttu-id="1e8d6-105">Logs de trabalho e fluxos de trabalho são visíveis no hello portal do Azure, ou com o PowerShell, para trabalhos individuais e isso permite que você investigações de tooperform simples.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-105">Job logs and job streams are visible in hello Azure portal, or with PowerShell, for individual jobs and this allows you tooperform simple investigations.</span></span> <span data-ttu-id="1e8d6-106">Com o Log Analytics, você pode:</span><span class="sxs-lookup"><span data-stu-id="1e8d6-106">Now with Log Analytics you can:</span></span>

* <span data-ttu-id="1e8d6-107">Obter informações sobre os trabalhos de Automação</span><span class="sxs-lookup"><span data-stu-id="1e8d6-107">Get insight on your Automation jobs</span></span>
* <span data-ttu-id="1e8d6-108">Disparar um email ou um alerta com base no status do trabalho de runbook (por exemplo, com falha ou suspenso)</span><span class="sxs-lookup"><span data-stu-id="1e8d6-108">Trigger an email or alert based on your runbook job status (for example, failed or suspended)</span></span>
* <span data-ttu-id="1e8d6-109">Escrever consultas avançadas em seus fluxos de trabalho</span><span class="sxs-lookup"><span data-stu-id="1e8d6-109">Write advanced queries across your job streams</span></span>
* <span data-ttu-id="1e8d6-110">Correlacionar trabalhos em contas de Automação</span><span class="sxs-lookup"><span data-stu-id="1e8d6-110">Correlate jobs across Automation accounts</span></span>
* <span data-ttu-id="1e8d6-111">Visualizar o histórico de trabalho ao longo do tempo</span><span class="sxs-lookup"><span data-stu-id="1e8d6-111">Visualize your job history over time</span></span>     

## <a name="prerequisites-and-deployment-considerations"></a><span data-ttu-id="1e8d6-112">Pré-requisitos e considerações de implantação</span><span class="sxs-lookup"><span data-stu-id="1e8d6-112">Prerequisites and deployment considerations</span></span>
<span data-ttu-id="1e8d6-113">toostart enviar sua automação logs tooLog análise, você precisa:</span><span class="sxs-lookup"><span data-stu-id="1e8d6-113">toostart sending your Automation logs tooLog Analytics, you need:</span></span>

1. <span data-ttu-id="1e8d6-114">Olá novembro de 2016 ou versão posterior do [Azure PowerShell](https://docs.microsoft.com/powershell/azureps-cmdlets-docs/) (v2.3.0).</span><span class="sxs-lookup"><span data-stu-id="1e8d6-114">hello November 2016 or later release of [Azure PowerShell](https://docs.microsoft.com/powershell/azureps-cmdlets-docs/) (v2.3.0).</span></span>
2. <span data-ttu-id="1e8d6-115">Um espaço de trabalho do Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-115">A Log Analytics workspace.</span></span> <span data-ttu-id="1e8d6-116">Para saber mais, confira [Introdução ao Log Analytics](../log-analytics/log-analytics-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="1e8d6-116">For more information, see [Get started with Log Analytics](../log-analytics/log-analytics-get-started.md).</span></span> 
3. <span data-ttu-id="1e8d6-117">Olá ResourceId para sua conta de automação do Azure</span><span class="sxs-lookup"><span data-stu-id="1e8d6-117">hello ResourceId for your Azure Automation account</span></span>

<span data-ttu-id="1e8d6-118">Olá toofind ResourceId para sua conta de automação do Azure e o espaço de trabalho de análise de Log, execute Olá PowerShell a seguir:</span><span class="sxs-lookup"><span data-stu-id="1e8d6-118">toofind hello ResourceId for your Azure Automation account and Log Analytics workspace, run hello following PowerShell:</span></span>

```powershell
# Find hello ResourceId for hello Automation Account
Find-AzureRmResource -ResourceType "Microsoft.Automation/automationAccounts"

# Find hello ResourceId for hello Log Analytics workspace
Find-AzureRmResource -ResourceType "Microsoft.OperationalInsights/workspaces"
```

<span data-ttu-id="1e8d6-119">Se você tiver várias contas de automação, ou espaços de trabalho, na saída Olá Olá anterior comandos, localize Olá *nome* necessário tooconfigure e copie o valor Olá para *ResourceId*.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-119">If you have multiple Automation accounts, or workspaces, in hello output of hello preceding commands, find hello *Name* you need tooconfigure and copy hello value for *ResourceId*.</span></span>

<span data-ttu-id="1e8d6-120">Se você precisar Olá toofind *nome* da sua conta de automação em Olá portal do Azure selecione sua conta de automação de saudação **conta de automação** folha e selecione **todas as configurações**.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-120">If you need toofind hello *Name* of your Automation account, in hello Azure portal select your Automation account from hello **Automation account** blade and select **All settings**.</span></span>  <span data-ttu-id="1e8d6-121">De saudação **todas as configurações** folha, em **configurações de conta** selecione **propriedades**.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-121">From hello **All settings** blade, under **Account Settings** select **Properties**.</span></span>  <span data-ttu-id="1e8d6-122">Em Olá **propriedades** folha, você pode observar esses valores.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-122">In hello **Properties** blade, you can note these values.</span></span><br> <span data-ttu-id="1e8d6-123">![Propriedades da Conta de Automação](media/automation-manage-send-joblogs-log-analytics/automation-account-properties.png).</span><span class="sxs-lookup"><span data-stu-id="1e8d6-123">![Automation Account properties](media/automation-manage-send-joblogs-log-analytics/automation-account-properties.png).</span></span>

## <a name="set-up-integration-with-log-analytics"></a><span data-ttu-id="1e8d6-124">Configurar a integração com o Log Analytics</span><span class="sxs-lookup"><span data-stu-id="1e8d6-124">Set up integration with Log Analytics</span></span>
1. <span data-ttu-id="1e8d6-125">Em seu computador, inicie **do Windows PowerShell** de saudação **iniciar** tela.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-125">On your computer, start **Windows PowerShell** from hello **Start** screen.</span></span>  
2. <span data-ttu-id="1e8d6-126">Copie e cole Olá PowerShell a seguir e Editar valor Olá Olá `$workspaceId` e `$automationAccountId`.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-126">Copy and paste hello following PowerShell, and edit hello value for hello `$workspaceId` and `$automationAccountId`.</span></span>  <span data-ttu-id="1e8d6-127">Para Olá `-Environment` parâmetro, os valores válidos são *AzureCloud* ou *AzureUSGovernment* dependendo do ambiente de nuvem Olá você está trabalhando.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-127">For hello `-Environment` parameter, valid values are *AzureCloud* or *AzureUSGovernment* depending on hello cloud environment you are working in.</span></span>     

```powershell
[cmdletBinding()]
    Param
    (
        [Parameter(Mandatory=$True)]
        [ValidateSet("AzureCloud","AzureUSGovernment")]
        [string]$Environment="AzureCloud"
    )

#Check toosee which cloud environment toosign into.
Switch ($Environment)
   {
       "AzureCloud" {Login-AzureRmAccount}
       "AzureUSGovernment" {Login-AzureRmAccount -EnvironmentName AzureUSGovernment} 
   }

# if you have one Log Analytics workspace you can use hello following command tooget hello resource id of hello workspace
$workspaceId = (Get-AzureRmOperationalInsightsWorkspace).ResourceId

$automationAccountId = "/SUBSCRIPTIONS/ec11ca60-1234-491e-5678-0ea07feae25c/RESOURCEGROUPS/DEMO/PROVIDERS/MICROSOFT.AUTOMATION/ACCOUNTS/DEMO" 

Set-AzureRmDiagnosticSetting -ResourceId $automationAccountId -WorkspaceId $workspaceId -Enabled $true

```

<span data-ttu-id="1e8d6-128">Depois de executar esse script, você verá os registros no Log Analytics em 10 minutos a seguir à gravação do novo JobLogs ou JobStreams.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-128">After running this script, you will see records in Log Analytics within 10 minutes of new JobLogs or JobStreams being written.</span></span>

<span data-ttu-id="1e8d6-129">logs de saudação toosee, executados Olá consulta na pesquisa de log de análise de Log a seguir:`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION"`</span><span class="sxs-lookup"><span data-stu-id="1e8d6-129">toosee hello logs, run hello following query in Log Analytics log search: `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION"`</span></span>

### <a name="verify-configuration"></a><span data-ttu-id="1e8d6-130">Verificar a configuração</span><span class="sxs-lookup"><span data-stu-id="1e8d6-130">Verify configuration</span></span>
<span data-ttu-id="1e8d6-131">tooconfirm sua conta de automação está enviando logs de espaço de trabalho de análise de Log tooyour, verifique se os diagnósticos estão definidos corretamente na conta de automação hello usando Olá PowerShell a seguir:</span><span class="sxs-lookup"><span data-stu-id="1e8d6-131">tooconfirm that your Automation account is sending logs tooyour Log Analytics workspace, check that diagnostics are set correctly on hello Automation account using hello following PowerShell:</span></span>

```powershell
[cmdletBinding()]
    Param
    (
        [Parameter(Mandatory=$True)]
        [ValidateSet("AzureCloud","AzureUSGovernment")]
        [string]$Environment="AzureCloud"
    )

#Check toosee which cloud environment toosign into.
Switch ($Environment)
   {
       "AzureCloud" {Login-AzureRmAccount}
       "AzureUSGovernment" {Login-AzureRmAccount -EnvironmentName AzureUSGovernment} 
   }
# if you have one Log Analytics workspace you can use hello following command tooget hello resource id of hello workspace
$workspaceId = (Get-AzureRmOperationalInsightsWorkspace).ResourceId

$automationAccountId = "/SUBSCRIPTIONS/ec11ca60-1234-491e-5678-0ea07feae25c/RESOURCEGROUPS/DEMO/PROVIDERS/MICROSOFT.AUTOMATION/ACCOUNTS/DEMO" 

Get-AzureRmDiagnosticSetting -ResourceId $automationAccountId
```

<span data-ttu-id="1e8d6-132">Na saída de hello Certifique-se de que:</span><span class="sxs-lookup"><span data-stu-id="1e8d6-132">In hello output ensure that:</span></span>
+ <span data-ttu-id="1e8d6-133">Em *Logs*, Olá valor *habilitado* é *True*</span><span class="sxs-lookup"><span data-stu-id="1e8d6-133">Under *Logs*, hello value for *Enabled* is *True*</span></span>
+ <span data-ttu-id="1e8d6-134">Olá valor *WorkspaceId* está definida toohello ResourceId de seu espaço de trabalho de análise de Log</span><span class="sxs-lookup"><span data-stu-id="1e8d6-134">hello value of *WorkspaceId* is set toohello ResourceId of your Log Analytics workspace</span></span>


## <a name="log-analytics-records"></a><span data-ttu-id="1e8d6-135">Registros do Log Analytics</span><span class="sxs-lookup"><span data-stu-id="1e8d6-135">Log Analytics records</span></span>
<span data-ttu-id="1e8d6-136">O diagnóstico de Automação do Azure cira dois tipos de registros no Log Analytics e é marcado como **Type=AzureDiagnostics**.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-136">Diagnostics from Azure Automation creates two types of records in Log Analytics and are tagged as **Type=AzureDiagnostics**.</span></span>

### <a name="job-logs"></a><span data-ttu-id="1e8d6-137">Logs de trabalho</span><span class="sxs-lookup"><span data-stu-id="1e8d6-137">Job Logs</span></span>
| <span data-ttu-id="1e8d6-138">Propriedade</span><span class="sxs-lookup"><span data-stu-id="1e8d6-138">Property</span></span> | <span data-ttu-id="1e8d6-139">Descrição</span><span class="sxs-lookup"><span data-stu-id="1e8d6-139">Description</span></span> |
| --- | --- |
| <span data-ttu-id="1e8d6-140">TimeGenerated</span><span class="sxs-lookup"><span data-stu-id="1e8d6-140">TimeGenerated</span></span> |<span data-ttu-id="1e8d6-141">Data e hora quando o trabalho de runbook Olá executado.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-141">Date and time when hello runbook job executed.</span></span> |
| <span data-ttu-id="1e8d6-142">RunbookName_s</span><span class="sxs-lookup"><span data-stu-id="1e8d6-142">RunbookName_s</span></span> |<span data-ttu-id="1e8d6-143">nome de saudação do runbook hello.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-143">hello name of hello runbook.</span></span> |
| <span data-ttu-id="1e8d6-144">Caller_s</span><span class="sxs-lookup"><span data-stu-id="1e8d6-144">Caller_s</span></span> |<span data-ttu-id="1e8d6-145">Quem iniciou a operação de saudação.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-145">Who initiated hello operation.</span></span>  <span data-ttu-id="1e8d6-146">Os valores possíveis são um endereço de email ou o sistema para trabalhos agendados.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-146">Possible values are either an email address or system for scheduled jobs.</span></span> |
| <span data-ttu-id="1e8d6-147">Tenant_g</span><span class="sxs-lookup"><span data-stu-id="1e8d6-147">Tenant_g</span></span> | <span data-ttu-id="1e8d6-148">GUID que identifica o locatário Olá para Olá chamador.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-148">GUID that identifies hello tenant for hello Caller.</span></span> |
| <span data-ttu-id="1e8d6-149">JobId_g</span><span class="sxs-lookup"><span data-stu-id="1e8d6-149">JobId_g</span></span> |<span data-ttu-id="1e8d6-150">GUID que é hello Id do trabalho de runbook hello.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-150">GUID that is hello Id of hello runbook job.</span></span> |
| <span data-ttu-id="1e8d6-151">ResultType</span><span class="sxs-lookup"><span data-stu-id="1e8d6-151">ResultType</span></span> |<span data-ttu-id="1e8d6-152">status de Olá Olá do trabalho de runbook.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-152">hello status of hello runbook job.</span></span>  <span data-ttu-id="1e8d6-153">Os valores possíveis são:</span><span class="sxs-lookup"><span data-stu-id="1e8d6-153">Possible values are:</span></span><br><span data-ttu-id="1e8d6-154">- Iniciado</span><span class="sxs-lookup"><span data-stu-id="1e8d6-154">- Started</span></span><br><span data-ttu-id="1e8d6-155">- Parado</span><span class="sxs-lookup"><span data-stu-id="1e8d6-155">- Stopped</span></span><br><span data-ttu-id="1e8d6-156">- Suspenso</span><span class="sxs-lookup"><span data-stu-id="1e8d6-156">- Suspended</span></span><br><span data-ttu-id="1e8d6-157">- Com falha</span><span class="sxs-lookup"><span data-stu-id="1e8d6-157">- Failed</span></span><br><span data-ttu-id="1e8d6-158">– Concluído</span><span class="sxs-lookup"><span data-stu-id="1e8d6-158">- Completed</span></span> |
| <span data-ttu-id="1e8d6-159">Categoria</span><span class="sxs-lookup"><span data-stu-id="1e8d6-159">Category</span></span> | <span data-ttu-id="1e8d6-160">Classificação de tipo de saudação de dados.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-160">Classification of hello type of data.</span></span>  <span data-ttu-id="1e8d6-161">Para automação, o valor de saudação é JobLogs.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-161">For Automation, hello value is JobLogs.</span></span> |
| <span data-ttu-id="1e8d6-162">OperationName</span><span class="sxs-lookup"><span data-stu-id="1e8d6-162">OperationName</span></span> | <span data-ttu-id="1e8d6-163">Especifica o tipo de saudação da operação executada no Azure.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-163">Specifies hello type of operation performed in Azure.</span></span>  <span data-ttu-id="1e8d6-164">Para automação, o valor de saudação é trabalho.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-164">For Automation, hello value is Job.</span></span> |
| <span data-ttu-id="1e8d6-165">Recurso</span><span class="sxs-lookup"><span data-stu-id="1e8d6-165">Resource</span></span> | <span data-ttu-id="1e8d6-166">Nome da conta de automação de saudação</span><span class="sxs-lookup"><span data-stu-id="1e8d6-166">Name of hello Automation account</span></span> |
| <span data-ttu-id="1e8d6-167">SourceSystem</span><span class="sxs-lookup"><span data-stu-id="1e8d6-167">SourceSystem</span></span> | <span data-ttu-id="1e8d6-168">Como a análise de Log coletados dados saudação.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-168">How Log Analytics collected hello data.</span></span> <span data-ttu-id="1e8d6-169">Sempre *Azure* para o Diagnóstico do Azure.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-169">Always *Azure* for Azure diagnostics.</span></span> |
| <span data-ttu-id="1e8d6-170">ResultDescription</span><span class="sxs-lookup"><span data-stu-id="1e8d6-170">ResultDescription</span></span> |<span data-ttu-id="1e8d6-171">Descreve o estado de resultado do trabalho de runbook hello.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-171">Describes hello runbook job result state.</span></span>  <span data-ttu-id="1e8d6-172">Os valores possíveis são:</span><span class="sxs-lookup"><span data-stu-id="1e8d6-172">Possible values are:</span></span><br><span data-ttu-id="1e8d6-173">- O trabalho foi iniciado</span><span class="sxs-lookup"><span data-stu-id="1e8d6-173">- Job is started</span></span><br><span data-ttu-id="1e8d6-174">- O trabalho falhou</span><span class="sxs-lookup"><span data-stu-id="1e8d6-174">- Job Failed</span></span><br><span data-ttu-id="1e8d6-175">- Trabalho Concluído</span><span class="sxs-lookup"><span data-stu-id="1e8d6-175">- Job Completed</span></span> |
| <span data-ttu-id="1e8d6-176">CorrelationId</span><span class="sxs-lookup"><span data-stu-id="1e8d6-176">CorrelationId</span></span> |<span data-ttu-id="1e8d6-177">GUID que é hello Id de correlação de trabalho de runbook hello.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-177">GUID that is hello Correlation Id of hello runbook job.</span></span> |
| <span data-ttu-id="1e8d6-178">ResourceId</span><span class="sxs-lookup"><span data-stu-id="1e8d6-178">ResourceId</span></span> |<span data-ttu-id="1e8d6-179">Especifica a id de recurso de conta de automação do Azure de Olá do runbook hello.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-179">Specifies hello Azure Automation account resource id of hello runbook.</span></span> |
| <span data-ttu-id="1e8d6-180">SubscriptionId</span><span class="sxs-lookup"><span data-stu-id="1e8d6-180">SubscriptionId</span></span> | <span data-ttu-id="1e8d6-181">Olá Id (GUID) de assinatura do Azure para Olá conta de automação.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-181">hello Azure subscription Id (GUID) for hello Automation account.</span></span> |
| <span data-ttu-id="1e8d6-182">ResourceGroup</span><span class="sxs-lookup"><span data-stu-id="1e8d6-182">ResourceGroup</span></span> | <span data-ttu-id="1e8d6-183">Nome do grupo de recursos Olá Olá conta de automação.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-183">Name of hello resource group for hello Automation account.</span></span> |
| <span data-ttu-id="1e8d6-184">ResourceProvider</span><span class="sxs-lookup"><span data-stu-id="1e8d6-184">ResourceProvider</span></span> | <span data-ttu-id="1e8d6-185">MICROSOFT.AUTOMATION</span><span class="sxs-lookup"><span data-stu-id="1e8d6-185">MICROSOFT.AUTOMATION</span></span> |
| <span data-ttu-id="1e8d6-186">ResourceType</span><span class="sxs-lookup"><span data-stu-id="1e8d6-186">ResourceType</span></span> | <span data-ttu-id="1e8d6-187">AUTOMATIONACCOUNTS</span><span class="sxs-lookup"><span data-stu-id="1e8d6-187">AUTOMATIONACCOUNTS</span></span> |


### <a name="job-streams"></a><span data-ttu-id="1e8d6-188">Transmissões de trabalho</span><span class="sxs-lookup"><span data-stu-id="1e8d6-188">Job Streams</span></span>
| <span data-ttu-id="1e8d6-189">Propriedade</span><span class="sxs-lookup"><span data-stu-id="1e8d6-189">Property</span></span> | <span data-ttu-id="1e8d6-190">Descrição</span><span class="sxs-lookup"><span data-stu-id="1e8d6-190">Description</span></span> |
| --- | --- |
| <span data-ttu-id="1e8d6-191">TimeGenerated</span><span class="sxs-lookup"><span data-stu-id="1e8d6-191">TimeGenerated</span></span> |<span data-ttu-id="1e8d6-192">Data e hora quando o trabalho de runbook Olá executado.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-192">Date and time when hello runbook job executed.</span></span> |
| <span data-ttu-id="1e8d6-193">RunbookName_s</span><span class="sxs-lookup"><span data-stu-id="1e8d6-193">RunbookName_s</span></span> |<span data-ttu-id="1e8d6-194">nome de saudação do runbook hello.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-194">hello name of hello runbook.</span></span> |
| <span data-ttu-id="1e8d6-195">Caller_s</span><span class="sxs-lookup"><span data-stu-id="1e8d6-195">Caller_s</span></span> |<span data-ttu-id="1e8d6-196">Quem iniciou a operação de saudação.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-196">Who initiated hello operation.</span></span>  <span data-ttu-id="1e8d6-197">Os valores possíveis são um endereço de email ou o sistema para trabalhos agendados.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-197">Possible values are either an email address or system for scheduled jobs.</span></span> |
| <span data-ttu-id="1e8d6-198">StreamType_s</span><span class="sxs-lookup"><span data-stu-id="1e8d6-198">StreamType_s</span></span> |<span data-ttu-id="1e8d6-199">tipo de saudação do fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-199">hello type of job stream.</span></span> <span data-ttu-id="1e8d6-200">Os valores possíveis são:</span><span class="sxs-lookup"><span data-stu-id="1e8d6-200">Possible values are:</span></span><br><span data-ttu-id="1e8d6-201">- Andamento</span><span class="sxs-lookup"><span data-stu-id="1e8d6-201">-Progress</span></span><br><span data-ttu-id="1e8d6-202">- Saída</span><span class="sxs-lookup"><span data-stu-id="1e8d6-202">- Output</span></span><br><span data-ttu-id="1e8d6-203">- Aviso</span><span class="sxs-lookup"><span data-stu-id="1e8d6-203">- Warning</span></span><br><span data-ttu-id="1e8d6-204">- Erro</span><span class="sxs-lookup"><span data-stu-id="1e8d6-204">- Error</span></span><br><span data-ttu-id="1e8d6-205">- Depurar</span><span class="sxs-lookup"><span data-stu-id="1e8d6-205">- Debug</span></span><br><span data-ttu-id="1e8d6-206">- Detalhado</span><span class="sxs-lookup"><span data-stu-id="1e8d6-206">- Verbose</span></span> |
| <span data-ttu-id="1e8d6-207">Tenant_g</span><span class="sxs-lookup"><span data-stu-id="1e8d6-207">Tenant_g</span></span> | <span data-ttu-id="1e8d6-208">GUID que identifica o locatário Olá para Olá chamador.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-208">GUID that identifies hello tenant for hello Caller.</span></span> |
| <span data-ttu-id="1e8d6-209">JobId_g</span><span class="sxs-lookup"><span data-stu-id="1e8d6-209">JobId_g</span></span> |<span data-ttu-id="1e8d6-210">GUID que é hello Id do trabalho de runbook hello.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-210">GUID that is hello Id of hello runbook job.</span></span> |
| <span data-ttu-id="1e8d6-211">ResultType</span><span class="sxs-lookup"><span data-stu-id="1e8d6-211">ResultType</span></span> |<span data-ttu-id="1e8d6-212">status de Olá Olá do trabalho de runbook.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-212">hello status of hello runbook job.</span></span>  <span data-ttu-id="1e8d6-213">Os valores possíveis são:</span><span class="sxs-lookup"><span data-stu-id="1e8d6-213">Possible values are:</span></span><br><span data-ttu-id="1e8d6-214">- em andamento</span><span class="sxs-lookup"><span data-stu-id="1e8d6-214">- In Progress</span></span> |
| <span data-ttu-id="1e8d6-215">Categoria</span><span class="sxs-lookup"><span data-stu-id="1e8d6-215">Category</span></span> | <span data-ttu-id="1e8d6-216">Classificação de tipo de saudação de dados.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-216">Classification of hello type of data.</span></span>  <span data-ttu-id="1e8d6-217">Para automação, o valor de saudação é JobStreams.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-217">For Automation, hello value is JobStreams.</span></span> |
| <span data-ttu-id="1e8d6-218">OperationName</span><span class="sxs-lookup"><span data-stu-id="1e8d6-218">OperationName</span></span> | <span data-ttu-id="1e8d6-219">Especifica o tipo de saudação da operação executada no Azure.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-219">Specifies hello type of operation performed in Azure.</span></span>  <span data-ttu-id="1e8d6-220">Para automação, o valor de saudação é trabalho.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-220">For Automation, hello value is Job.</span></span> |
| <span data-ttu-id="1e8d6-221">Recurso</span><span class="sxs-lookup"><span data-stu-id="1e8d6-221">Resource</span></span> | <span data-ttu-id="1e8d6-222">Nome da conta de automação de saudação</span><span class="sxs-lookup"><span data-stu-id="1e8d6-222">Name of hello Automation account</span></span> |
| <span data-ttu-id="1e8d6-223">SourceSystem</span><span class="sxs-lookup"><span data-stu-id="1e8d6-223">SourceSystem</span></span> | <span data-ttu-id="1e8d6-224">Como a análise de Log coletados dados saudação.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-224">How Log Analytics collected hello data.</span></span> <span data-ttu-id="1e8d6-225">Sempre *Azure* para o Diagnóstico do Azure.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-225">Always *Azure* for Azure diagnostics.</span></span> |
| <span data-ttu-id="1e8d6-226">ResultDescription</span><span class="sxs-lookup"><span data-stu-id="1e8d6-226">ResultDescription</span></span> |<span data-ttu-id="1e8d6-227">Inclui Olá fluxo de saída de runbook hello.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-227">Includes hello output stream from hello runbook.</span></span> |
| <span data-ttu-id="1e8d6-228">CorrelationId</span><span class="sxs-lookup"><span data-stu-id="1e8d6-228">CorrelationId</span></span> |<span data-ttu-id="1e8d6-229">GUID que é hello Id de correlação de trabalho de runbook hello.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-229">GUID that is hello Correlation Id of hello runbook job.</span></span> |
| <span data-ttu-id="1e8d6-230">ResourceId</span><span class="sxs-lookup"><span data-stu-id="1e8d6-230">ResourceId</span></span> |<span data-ttu-id="1e8d6-231">Especifica a id de recurso de conta de automação do Azure de Olá do runbook hello.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-231">Specifies hello Azure Automation account resource id of hello runbook.</span></span> |
| <span data-ttu-id="1e8d6-232">SubscriptionId</span><span class="sxs-lookup"><span data-stu-id="1e8d6-232">SubscriptionId</span></span> | <span data-ttu-id="1e8d6-233">Olá Id (GUID) de assinatura do Azure para Olá conta de automação.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-233">hello Azure subscription Id (GUID) for hello Automation account.</span></span> |
| <span data-ttu-id="1e8d6-234">ResourceGroup</span><span class="sxs-lookup"><span data-stu-id="1e8d6-234">ResourceGroup</span></span> | <span data-ttu-id="1e8d6-235">Nome do grupo de recursos Olá Olá conta de automação.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-235">Name of hello resource group for hello Automation account.</span></span> |
| <span data-ttu-id="1e8d6-236">ResourceProvider</span><span class="sxs-lookup"><span data-stu-id="1e8d6-236">ResourceProvider</span></span> | <span data-ttu-id="1e8d6-237">MICROSOFT.AUTOMATION</span><span class="sxs-lookup"><span data-stu-id="1e8d6-237">MICROSOFT.AUTOMATION</span></span> |
| <span data-ttu-id="1e8d6-238">ResourceType</span><span class="sxs-lookup"><span data-stu-id="1e8d6-238">ResourceType</span></span> | <span data-ttu-id="1e8d6-239">AUTOMATIONACCOUNTS</span><span class="sxs-lookup"><span data-stu-id="1e8d6-239">AUTOMATIONACCOUNTS</span></span> |

## <a name="viewing-automation-logs-in-log-analytics"></a><span data-ttu-id="1e8d6-240">Exibir Logs de Automação no Log Analytics</span><span class="sxs-lookup"><span data-stu-id="1e8d6-240">Viewing Automation Logs in Log Analytics</span></span>
<span data-ttu-id="1e8d6-241">Agora que você iniciou a enviar seu tooLog de logs de trabalho de automação Analytics, vamos ver o que você pode fazer com esses logs de análise de Log.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-241">Now that you have started sending your Automation job logs tooLog Analytics, let’s see what you can do with these logs inside Log Analytics.</span></span>

<span data-ttu-id="1e8d6-242">logs de saudação toosee, executados Olá consulta a seguir:`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION"`</span><span class="sxs-lookup"><span data-stu-id="1e8d6-242">toosee hello logs, run hello following query: `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION"`</span></span>

### <a name="send-an-email-when-a-runbook-job-fails-or-suspends"></a><span data-ttu-id="1e8d6-243">Enviar um email quando um trabalho de runbook falhar ou for suspenso</span><span class="sxs-lookup"><span data-stu-id="1e8d6-243">Send an email when a runbook job fails or suspends</span></span>
<span data-ttu-id="1e8d6-244">Uma das nossas principais clientes pergunta é para Olá capacidade toosend um email ou um texto quando algo dá errado com um trabalho de runbook.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-244">One of our top customer asks is for hello ability toosend an email or a text when something goes wrong with a runbook job.</span></span>   

<span data-ttu-id="1e8d6-245">a regra toocreate um alerta, comece criando uma pesquisa de log de runbook Olá registros de trabalho que devem chamar o alerta de saudação.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-245">toocreate an alert rule, you start by creating a log search for hello runbook job records that should invoke hello alert.</span></span>  <span data-ttu-id="1e8d6-246">Clique em Olá **alerta** botão toocreate e configurar a regra de alerta de saudação.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-246">Click hello **Alert** button toocreate and configure hello alert rule.</span></span>

1. <span data-ttu-id="1e8d6-247">Na página de visão geral de análise de Log de Olá, clique em **pesquisa de Log**.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-247">From hello Log Analytics Overview page, click **Log Search**.</span></span>
2. <span data-ttu-id="1e8d6-248">Crie uma consulta de pesquisa de log para o alerta, digitando Olá a seguir pesquisa no campo de consulta Olá: `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobLogs (ResultType=Failed OR ResultType=Suspended)` você também pode agrupar por Olá RunbookName usando:`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobLogs (ResultType=Failed OR ResultType=Suspended) | measure Count() by RunbookName_s`</span><span class="sxs-lookup"><span data-stu-id="1e8d6-248">Create a log search query for your alert by typing hello following search into hello query field:  `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobLogs (ResultType=Failed OR ResultType=Suspended)`  You can also group by hello RunbookName by using: `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobLogs (ResultType=Failed OR ResultType=Suspended) | measure Count() by RunbookName_s`</span></span>   

   <span data-ttu-id="1e8d6-249">Se você configurar logs de mais de uma automação conta ou assinatura tooyour espaço de trabalho, você pode agrupar alertas por assinatura e conta de automação.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-249">If you have set up logs from more than one Automation account or subscription tooyour workspace, you can group your alerts by subscription and Automation account.</span></span>  <span data-ttu-id="1e8d6-250">Nome da conta de automação pode ser derivada de campo de recurso Olá na pesquisa de saudação do JobLogs.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-250">Automation account name can be derived from hello Resource field in hello search of JobLogs.</span></span>  
3. <span data-ttu-id="1e8d6-251">Olá tooopen **Adicionar regra de alerta** tela, clique em **alerta** na parte superior de saudação da página de saudação.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-251">tooopen hello **Add Alert Rule** screen, click **Alert** at hello top of hello page.</span></span> <span data-ttu-id="1e8d6-252">Para obter mais detalhes sobre o alerta de Olá Olá opções tooconfigure, consulte [alertas na análise de Log](../log-analytics/log-analytics-alerts.md#alert-rules).</span><span class="sxs-lookup"><span data-stu-id="1e8d6-252">For further details on hello options tooconfigure hello alert, see [Alerts in Log Analytics](../log-analytics/log-analytics-alerts.md#alert-rules).</span></span>

### <a name="find-all-jobs-that-have-completed-with-errors"></a><span data-ttu-id="1e8d6-253">Localizar todos os trabalhos que foram concluídos com erros</span><span class="sxs-lookup"><span data-stu-id="1e8d6-253">Find all jobs that have completed with errors</span></span>
<span data-ttu-id="1e8d6-254">Além disso tooalerting em caso de falha, você pode encontrar quando um trabalho de runbook tem um erro não fatal.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-254">In addition tooalerting on failures, you can find when a runbook job has a non-terminating error.</span></span> <span data-ttu-id="1e8d6-255">Nesses casos o PowerShell produz um fluxo de erro, mas os erros de não finalização Olá não causar toosuspend seu trabalho ou falhar.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-255">In these cases PowerShell produces an error stream, but hello non-terminating errors do not cause your job toosuspend or fail.</span></span>    

1. <span data-ttu-id="1e8d6-256">No seu espaço de trabalho do Log Analytics, clique em **Pesquisa de Logs**.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-256">In your Log Analytics workspace, click **Log Search**.</span></span>
2. <span data-ttu-id="1e8d6-257">No campo de consulta hello, digite `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobStreams StreamType_s=Error | measure count() by JobId_g` e, em seguida, clique em **pesquisa**.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-257">In hello query field, type `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobStreams StreamType_s=Error | measure count() by JobId_g` and then click **Search**.</span></span>

### <a name="view-job-streams-for-a-job"></a><span data-ttu-id="1e8d6-258">Exibir fluxos de trabalho para um trabalho</span><span class="sxs-lookup"><span data-stu-id="1e8d6-258">View job streams for a job</span></span>
<span data-ttu-id="1e8d6-259">Quando você estiver depurando um trabalho, talvez você queira toolook em fluxos de trabalho de saudação.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-259">When you are debugging a job, you may also want toolook into hello job streams.</span></span>  <span data-ttu-id="1e8d6-260">Olá, consulta a seguir mostra todos os fluxos de saudação para um único trabalho com GUID 2ebd22ea-e05e-4eb9 - 9d 76-d73cbd4356e0:</span><span class="sxs-lookup"><span data-stu-id="1e8d6-260">hello following query shows all hello streams for a single job with GUID 2ebd22ea-e05e-4eb9-9d76-d73cbd4356e0:</span></span>   

`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobStreams JobId_g="2ebd22ea-e05e-4eb9-9d76-d73cbd4356e0" | sort TimeGenerated | select ResultDescription`

### <a name="view-historical-job-status"></a><span data-ttu-id="1e8d6-261">Exibir o status do histórico de trabalho</span><span class="sxs-lookup"><span data-stu-id="1e8d6-261">View historical job status</span></span>
<span data-ttu-id="1e8d6-262">Por fim, talvez você queira toovisualize seu histórico de trabalho ao longo do tempo.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-262">Finally, you may want toovisualize your job history over time.</span></span>  <span data-ttu-id="1e8d6-263">Você pode usar essa consulta toosearch para status Olá dos trabalhos ao longo do tempo.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-263">You can use this query toosearch for hello status of your jobs over time.</span></span>

`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobLogs NOT(ResultType="started") | measure Count() by ResultType interval 1hour`  
<br> <span data-ttu-id="1e8d6-264">![Gráfico de status de trabalho histórico do OMS](media/automation-manage-send-joblogs-log-analytics/historical-job-status-chart.png)</span><span class="sxs-lookup"><span data-stu-id="1e8d6-264">![OMS Historical Job Status Chart](media/automation-manage-send-joblogs-log-analytics/historical-job-status-chart.png)</span></span><br>

## <a name="summary"></a><span data-ttu-id="1e8d6-265">Resumo</span><span class="sxs-lookup"><span data-stu-id="1e8d6-265">Summary</span></span>
<span data-ttu-id="1e8d6-266">Enviando sua automação trabalho status e o fluxo de dados tooLog análise, você pode obter uma noção melhor sobre status de saudação de seus trabalhos de automação por:</span><span class="sxs-lookup"><span data-stu-id="1e8d6-266">By sending your Automation job status and stream data tooLog Analytics, you can get better insight into hello status of your Automation jobs by:</span></span>
+ <span data-ttu-id="1e8d6-267">Configurar alertas toonotify você quando há um problema</span><span class="sxs-lookup"><span data-stu-id="1e8d6-267">Setting up alerts toonotify you when there is an issue</span></span>
+ <span data-ttu-id="1e8d6-268">Usando modos de exibição personalizados e toovisualize de consultas de pesquisa seus resultados de runbook, o status do trabalho de runbook e outros relacionam principais indicadores ou métricas.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-268">Using custom views and search queries toovisualize your runbook results, runbook job status, and other related key indicators or metrics.</span></span>  

<span data-ttu-id="1e8d6-269">Análise de log fornece maior visibilidade operacional tooyour trabalhos de automação e pode ajudar a incidentes de endereço mais rápidos.</span><span class="sxs-lookup"><span data-stu-id="1e8d6-269">Log Analytics provides greater operational visibility tooyour Automation jobs and can help address incidents quicker.</span></span>  

## <a name="next-steps"></a><span data-ttu-id="1e8d6-270">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="1e8d6-270">Next steps</span></span>
* <span data-ttu-id="1e8d6-271">toolearn mais sobre como consultas de pesquisa diferentes tooconstruct e examine Olá automação trabalho logs de análise de Log, consulte [pesquisas de Log na análise de Log](../log-analytics/log-analytics-log-searches.md)</span><span class="sxs-lookup"><span data-stu-id="1e8d6-271">toolearn more about how tooconstruct different search queries and review hello Automation job logs with Log Analytics, see [Log searches in Log Analytics](../log-analytics/log-analytics-log-searches.md)</span></span>
* <span data-ttu-id="1e8d6-272">toounderstand como mensagens de saída e o erro toocreate e recuperar de runbooks, consulte [mensagens e saída de Runbook](automation-runbook-output-and-messages.md)</span><span class="sxs-lookup"><span data-stu-id="1e8d6-272">toounderstand how toocreate and retrieve output and error messages from runbooks, see [Runbook output and messages](automation-runbook-output-and-messages.md)</span></span>
* <span data-ttu-id="1e8d6-273">toolearn mais sobre a execução do runbook, como trabalhos de runbook toomonitor e outros detalhes técnicos, consulte [acompanhar um trabalho de runbook](automation-runbook-execution.md)</span><span class="sxs-lookup"><span data-stu-id="1e8d6-273">toolearn more about runbook execution, how toomonitor runbook jobs, and other technical details, see [Track a runbook job](automation-runbook-execution.md)</span></span>
* <span data-ttu-id="1e8d6-274">toolearn mais sobre análise de logs do OMS e fontes de coleta de dados, consulte [dados de armazenamento do Azure coleta na visão geral da análise de Log](../log-analytics/log-analytics-azure-storage.md)</span><span class="sxs-lookup"><span data-stu-id="1e8d6-274">toolearn more about OMS Log Analytics and data collection sources, see [Collecting Azure storage data in Log Analytics overview](../log-analytics/log-analytics-azure-storage.md)</span></span>
