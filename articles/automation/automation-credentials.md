---
title: "Ativos de credenciais na Automação do Azure | Microsoft Docs"
description: "Os ativos de credenciais na Automação do Azure contêm credenciais de segurança que podem ser usadas para a autenticação em recursos acessados pelo runbook ou pela configuração DSC. Este artigo descreve como criar ativos de credenciais e usá-los em um runbook ou uma configuração DSC."
services: automation
documentationcenter: 
author: mgoedtel
manager: carmonm
editor: tysonn
ms.assetid: 3209bf73-c208-425e-82b6-df49860546dd
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 04/14/2017
ms.author: bwren
ms.openlocfilehash: e2857515f3842a875ef7b5a9327392818931168f
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/11/2017
---
# <a name="credential-assets-in-azure-automation"></a><span data-ttu-id="33994-104">Ativos de credenciais na Automação do Azure</span><span class="sxs-lookup"><span data-stu-id="33994-104">Credential assets in Azure Automation</span></span>
<span data-ttu-id="33994-105">Um ativo da credencial de Automação tem um objeto [PSCredential](http://msdn.microsoft.com/library/system.management.automation.pscredential) que contém as credenciais de segurança, como um nome de usuário e uma senha.</span><span class="sxs-lookup"><span data-stu-id="33994-105">An Automation credential asset holds a [PSCredential](http://msdn.microsoft.com/library/system.management.automation.pscredential)  object which contains security credentials such as a username and password.</span></span> <span data-ttu-id="33994-106">Runbooks e configurações DSC podem usar cmdlets que aceitam um objeto PSCredential para autenticação ou eles podem extrair o nome de usuário e a senha do objeto PSCredential para fornecê-los a algum aplicativo ou serviço que exija a autenticação.</span><span class="sxs-lookup"><span data-stu-id="33994-106">Runbooks and DSC configurations may use cmdlets that accept a PSCredential object for authentication, or they may extract the username and password of the PSCredential object to provide to some application or service requiring authentication.</span></span> <span data-ttu-id="33994-107">As propriedades de uma credencial são armazenadas com segurança na Automação do Azure e podem ser acessadas no runbook ou na configuração DSC com a atividade [Get-AutomationPSCredential](http://msdn.microsoft.com/library/system.management.automation.pscredential.aspx) .</span><span class="sxs-lookup"><span data-stu-id="33994-107">The properties for a credential are stored securely in Azure Automation and can be accessed in the runbook or DSC configuration with the [Get-AutomationPSCredential](http://msdn.microsoft.com/library/system.management.automation.pscredential.aspx) activity.</span></span>

> [!NOTE]
> <span data-ttu-id="33994-108">Os ativos protegidos na Automação do Azure incluem credenciais, certificados, conexões e variáveis criptografadas.</span><span class="sxs-lookup"><span data-stu-id="33994-108">Secure assets in Azure Automation include credentials, certificates, connections, and encrypted variables.</span></span> <span data-ttu-id="33994-109">Esses ativos são criptografados e armazenados na Automação do Azure usando uma chave exclusiva que é gerada para cada conta de automação.</span><span class="sxs-lookup"><span data-stu-id="33994-109">These assets are encrypted and stored in the Azure Automation using a unique key that is generated for each automation account.</span></span> <span data-ttu-id="33994-110">Essa chave é criptografada por um certificado mestre e armazenada na Automação do Azure.</span><span class="sxs-lookup"><span data-stu-id="33994-110">This key is encrypted by a master certificate and stored in Azure Automation.</span></span> <span data-ttu-id="33994-111">Antes de armazenar um ativo seguro, a chave para a conta de automação é descriptografada usando o certificado mestre e usada para criptografar o ativo.</span><span class="sxs-lookup"><span data-stu-id="33994-111">Before storing a secure asset, the key for the automation account is decrypted using the master certificate and then used to encrypt the asset.</span></span>  

## <a name="windows-powershell-cmdlets"></a><span data-ttu-id="33994-112">Cmdlets do Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="33994-112">Windows PowerShell cmdlets</span></span>
<span data-ttu-id="33994-113">Os cmdlets na tabela a seguir são usados para criar e gerenciar ativos de credenciais de automação com o Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="33994-113">The cmdlets in the following table are used to create and manage automation credential assets with Windows PowerShell.</span></span>  <span data-ttu-id="33994-114">Eles são fornecidos como parte do [módulo do Azure PowerShell](/powershell/azure/overview) que está disponível para uso em runbooks e na configuração DSC da Automação.</span><span class="sxs-lookup"><span data-stu-id="33994-114">They ship as part of the [Azure PowerShell module](/powershell/azure/overview) which is available for use in Automation runbooks and DSC configurations.</span></span>

| <span data-ttu-id="33994-115">Cmdlets</span><span class="sxs-lookup"><span data-stu-id="33994-115">Cmdlets</span></span> | <span data-ttu-id="33994-116">Descrição</span><span class="sxs-lookup"><span data-stu-id="33994-116">Description</span></span> |
|:--- |:--- |
| [<span data-ttu-id="33994-117">Get-AzureAutomationCredential</span><span class="sxs-lookup"><span data-stu-id="33994-117">Get-AzureAutomationCredential</span></span>](/powershell/module/azure/get-azureautomationcredential?view=azuresmps-3.7.0) |<span data-ttu-id="33994-118">Recupera informações sobre um ativo de credencial.</span><span class="sxs-lookup"><span data-stu-id="33994-118">Retrieves information about a credential asset.</span></span> <span data-ttu-id="33994-119">Você só pode recuperar a credencial propriamente dita da atividade **Get-AutomationPSCredential** .</span><span class="sxs-lookup"><span data-stu-id="33994-119">You can only retrieve the credential itself from **Get-AutomationPSCredential** activity.</span></span> |
| [<span data-ttu-id="33994-120">New-AzureAutomationCredential</span><span class="sxs-lookup"><span data-stu-id="33994-120">New-AzureAutomationCredential</span></span>](/powershell/module/azure/new-azureautomationcredential?view=azuresmps-3.7.0) |<span data-ttu-id="33994-121">Cria uma nova credencial de Automação.</span><span class="sxs-lookup"><span data-stu-id="33994-121">Creates a new Automation credential.</span></span> |
| [<span data-ttu-id="33994-122">Remove- AzureAutomationCredential</span><span class="sxs-lookup"><span data-stu-id="33994-122">Remove- AzureAutomationCredential</span></span>](/powershell/module/azure/new-azureautomationcredential?view=azuresmps-3.7.0) |<span data-ttu-id="33994-123">Remove uma credencial de Automação.</span><span class="sxs-lookup"><span data-stu-id="33994-123">Removes an Automation credential.</span></span> |
| [<span data-ttu-id="33994-124">Set- AzureAutomationCredential</span><span class="sxs-lookup"><span data-stu-id="33994-124">Set- AzureAutomationCredential</span></span>](/powershell/module/azure/new-azureautomationcredential?view=azuresmps-3.7.0) |<span data-ttu-id="33994-125">Define as propriedades de uma credencial de Automação existente.</span><span class="sxs-lookup"><span data-stu-id="33994-125">Sets the properties for an existing Automation credential.</span></span> |

## <a name="runbook-activities"></a><span data-ttu-id="33994-126">Atividades de runbook</span><span class="sxs-lookup"><span data-stu-id="33994-126">Runbook activities</span></span>
<span data-ttu-id="33994-127">As atividades na tabela a seguir são usadas para acessar credenciais em um runbook ou em uma configuração DSC.</span><span class="sxs-lookup"><span data-stu-id="33994-127">The activities in the following table are used to access credentials in a runbook and DSC configurations.</span></span>

| <span data-ttu-id="33994-128">Atividades</span><span class="sxs-lookup"><span data-stu-id="33994-128">Activities</span></span> | <span data-ttu-id="33994-129">Descrição</span><span class="sxs-lookup"><span data-stu-id="33994-129">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="33994-130">Get-AutomationPSCredential</span><span class="sxs-lookup"><span data-stu-id="33994-130">Get-AutomationPSCredential</span></span> |<span data-ttu-id="33994-131">Obtém uma credencial a ser usada em um runbook ou configuração DSC.</span><span class="sxs-lookup"><span data-stu-id="33994-131">Gets a credential to use in a runbook or DSC configuration.</span></span> <span data-ttu-id="33994-132">Retorna um objeto [System.Management.Automation.PSCredential](http://msdn.microsoft.com/library/system.management.automation.pscredential) .</span><span class="sxs-lookup"><span data-stu-id="33994-132">Returns a [System.Management.Automation.PSCredential](http://msdn.microsoft.com/library/system.management.automation.pscredential) object.</span></span> |

> [!NOTE]
> <span data-ttu-id="33994-133">Evite usar variáveis no parâmetro –Name de Get-AutomationPSCredential, pois isso pode complicar a descoberta de dependências entre runbooks ou configurações DSC e ativos de credenciais no momento do design.</span><span class="sxs-lookup"><span data-stu-id="33994-133">You should avoid using variables in the –Name parameter of Get-AutomationPSCredential since this can complicate discovering dependencies between runbooks or DSC configurations, and credential assets at design time.</span></span>
> 
> 

## <a name="creating-a-new-credential-asset"></a><span data-ttu-id="33994-134">Criando um novo ativo de credencial</span><span class="sxs-lookup"><span data-stu-id="33994-134">Creating a new credential asset</span></span>

### <a name="to-create-a-new-credential-asset-with-the-azure-portal"></a><span data-ttu-id="33994-135">Para criar um novo ativo de credencial com o portal do Azure</span><span class="sxs-lookup"><span data-stu-id="33994-135">To create a new credential asset with the Azure portal</span></span>
1. <span data-ttu-id="33994-136">Em sua conta de automação, clique na parte **Ativos** para abrir a folha **Ativos**.</span><span class="sxs-lookup"><span data-stu-id="33994-136">From your automation account, click the **Assets** part to open the **Assets** blade.</span></span>
2. <span data-ttu-id="33994-137">Clique na parte **Credenciais** para abrir a folha **Credenciais**.</span><span class="sxs-lookup"><span data-stu-id="33994-137">Click the **Credentials** part to open the **Credentials** blade.</span></span>
3. <span data-ttu-id="33994-138">Clique em **Adicionar uma credencial** na parte superior da folha.</span><span class="sxs-lookup"><span data-stu-id="33994-138">Click **Add a credential** at the top of the blade.</span></span>
4. <span data-ttu-id="33994-139">Preencha o formulário e clique em **Criar** para salvar a nova credencial.</span><span class="sxs-lookup"><span data-stu-id="33994-139">Complete the form and click **Create** to save the new credential.</span></span>

### <a name="to-create-a-new-credential-asset-with-windows-powershell"></a><span data-ttu-id="33994-140">Para criar um novo ativo de credencial com o Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="33994-140">To create a new credential asset with Windows PowerShell</span></span>
<span data-ttu-id="33994-141">Os comandos de exemplo a seguir mostram como criar uma nova credencial de automação.</span><span class="sxs-lookup"><span data-stu-id="33994-141">The following sample commands show how to create a new automation credential.</span></span> <span data-ttu-id="33994-142">Um objeto PSCredential é criado pela primeira vez com o nome e a senha e, em seguida, é usado para criar o ativo de credencial.</span><span class="sxs-lookup"><span data-stu-id="33994-142">A PSCredential object is first created with the name and password and then used to create the credential asset.</span></span> <span data-ttu-id="33994-143">Como alternativa, você pode usar o cmdlet **Get-Credential** para ser solicitado a digitar um nome e uma senha.</span><span class="sxs-lookup"><span data-stu-id="33994-143">Alternatively, you could use the **Get-Credential** cmdlet to be prompted to type in a name and password.</span></span>

    $user = "MyDomain\MyUser"
    $pw = ConvertTo-SecureString "PassWord!" -AsPlainText -Force
    $cred = New-Object –TypeName System.Management.Automation.PSCredential –ArgumentList $user, $pw
    New-AzureAutomationCredential -AutomationAccountName "MyAutomationAccount" -Name "MyCredential" -Value $cred

### <a name="to-create-a-new-credential-asset-with-the-azure-classic-portal"></a><span data-ttu-id="33994-144">Para criar um novo ativo de credencial com o portal clássico do Azure</span><span class="sxs-lookup"><span data-stu-id="33994-144">To create a new credential asset with the Azure classic portal</span></span>
1. <span data-ttu-id="33994-145">Em sua conta de automação, clique em **Ativos** na parte superior da janela.</span><span class="sxs-lookup"><span data-stu-id="33994-145">From your automation account, click **Assets** at the top of the window.</span></span>
2. <span data-ttu-id="33994-146">Clique em **Adicionar Configuração**na parte inferior da janela.</span><span class="sxs-lookup"><span data-stu-id="33994-146">At the bottom of the window, click **Add Setting**.</span></span>
3. <span data-ttu-id="33994-147">Clique em **Adicionar Credencial**.</span><span class="sxs-lookup"><span data-stu-id="33994-147">Click **Add Credential**.</span></span>
4. <span data-ttu-id="33994-148">No menu suspenso **Tipo de Credencial**, selecione a **Credencial do PowerShell**.</span><span class="sxs-lookup"><span data-stu-id="33994-148">In the **Credential Type** dropdown, select **PowerShell Credential**.</span></span>
5. <span data-ttu-id="33994-149">Conclua o assistente e clique na caixa de seleção para salvar a nova credencial.</span><span class="sxs-lookup"><span data-stu-id="33994-149">Complete the wizard and click the checkbox to save the new credential.</span></span>

## <a name="using-a-powershell-credential"></a><span data-ttu-id="33994-150">Usando uma credencial do PowerShell</span><span class="sxs-lookup"><span data-stu-id="33994-150">Using a PowerShell credential</span></span>
<span data-ttu-id="33994-151">Recupere um ativo de credencial em um runbook ou configuração DSC com a atividade **Get-AutomationPSCredential** .</span><span class="sxs-lookup"><span data-stu-id="33994-151">You retrieve a credential asset in a runbook or DSC configuration with the **Get-AutomationPSCredential** activity.</span></span> <span data-ttu-id="33994-152">Isso retorna um [objeto PSCredential](http://msdn.microsoft.com/library/system.management.automation.pscredential.aspx) que você pode usar com uma atividade ou cmdlet que exija um parâmetro PSCredential.</span><span class="sxs-lookup"><span data-stu-id="33994-152">This returns a [PSCredential object](http://msdn.microsoft.com/library/system.management.automation.pscredential.aspx) that you can use with an activity or cmdlet that requires a PSCredential parameter.</span></span> <span data-ttu-id="33994-153">Você também pode recuperar as propriedades do objeto de credencial para usar individualmente.</span><span class="sxs-lookup"><span data-stu-id="33994-153">You can also retrieve the properties of the credential object to use individually.</span></span> <span data-ttu-id="33994-154">O objeto tem uma propriedade para o nome de usuário e a senha segura, ou você pode usar o método **GetNetworkCredential** para retornar um objeto [NetworkCredential](http://msdn.microsoft.com/library/system.net.networkcredential.aspx) que fornecerá uma versão sem segurança da senha.</span><span class="sxs-lookup"><span data-stu-id="33994-154">The object has a property for the username and the secure password, or you can use the **GetNetworkCredential** method to return a [NetworkCredential](http://msdn.microsoft.com/library/system.net.networkcredential.aspx) object that will provide an unsecured version of the password.</span></span>

### <a name="textual-runbook-sample"></a><span data-ttu-id="33994-155">Exemplo de runbook textual</span><span class="sxs-lookup"><span data-stu-id="33994-155">Textual runbook sample</span></span>
<span data-ttu-id="33994-156">Os comandos de exemplo a seguir mostram como usar uma credencial do PowerShell em um runbook.</span><span class="sxs-lookup"><span data-stu-id="33994-156">The following sample commands show how to use a PowerShell credential in a runbook.</span></span> <span data-ttu-id="33994-157">Neste exemplo, a credencial é recuperada e seu nome de usuário e senha são atribuídos a variáveis.</span><span class="sxs-lookup"><span data-stu-id="33994-157">In this example, the credential is retrieved and its username and password assigned to variables.</span></span>

    $myCredential = Get-AutomationPSCredential -Name 'MyCredential'
    $userName = $myCredential.UserName
    $securePassword = $myCredential.Password
    $password = $myCredential.GetNetworkCredential().Password


### <a name="graphical-runbook-sample"></a><span data-ttu-id="33994-158">Exemplo de runbook gráfico</span><span class="sxs-lookup"><span data-stu-id="33994-158">Graphical runbook sample</span></span>
<span data-ttu-id="33994-159">Adicione uma atividade **Get-AutomationPSCredential** a um runbook gráfico clicando com o botão direito na credencial no painel Biblioteca do editor gráfico e selecionando **Adicionar à tela**.</span><span class="sxs-lookup"><span data-stu-id="33994-159">You add a **Get-AutomationPSCredential** activity to a graphical runbook by right-clicking on the credential in the Library pane of the graphical editor and selecting **Add to canvas**.</span></span>

![Adicionar a credencial à tela](media/automation-credentials/credential-add-canvas.png)

<span data-ttu-id="33994-161">A imagem a seguir mostra um exemplo do uso de uma credencial em um runbook gráfico.</span><span class="sxs-lookup"><span data-stu-id="33994-161">The following image shows an example of using a credential in a graphical runbook.</span></span>  <span data-ttu-id="33994-162">Nesse caso, ela está sendo usada para fornecer autenticação para um runbook para os recursos do Azure, conforme descrito em [Autenticar Runbooks com uma conta de Usuário do Azure AD](automation-create-aduser-account.md).</span><span class="sxs-lookup"><span data-stu-id="33994-162">In this case, it is being used to provide authentication for a runbook to Azure resources as described in [Authenticate Runbooks with Azure AD User account](automation-create-aduser-account.md).</span></span>  <span data-ttu-id="33994-163">A primeira atividade recupera a credencial que tem acesso à assinatura do Azure.</span><span class="sxs-lookup"><span data-stu-id="33994-163">The first activity retrieves the credential that has access to the Azure subscription.</span></span>  <span data-ttu-id="33994-164">A atividade **Add-AzureAccount** usa essa credencial para fornecer autenticação para qualquer atividade que vier depois dela.</span><span class="sxs-lookup"><span data-stu-id="33994-164">The **Add-AzureAccount** activity then uses this credential to provide authentication for any activities that come after it.</span></span>  <span data-ttu-id="33994-165">Um [link de pipeline](automation-graphical-authoring-intro.md#links-and-workflow) está disponível, já que **Get-AutomationPSCredential** está esperando um único objeto.</span><span class="sxs-lookup"><span data-stu-id="33994-165">A [pipeline link](automation-graphical-authoring-intro.md#links-and-workflow) is here since **Get-AutomationPSCredential** is expecting a single object.</span></span>  

![Adicionar a credencial à tela](media/automation-credentials/get-credential.png)

## <a name="using-a-powershell-credential-in-dsc"></a><span data-ttu-id="33994-167">Usando uma credencial do PowerShell na DSC</span><span class="sxs-lookup"><span data-stu-id="33994-167">Using a PowerShell credential in DSC</span></span>
<span data-ttu-id="33994-168">Embora as Configurações DSC na Automação do Azure possam fazer referência aos ativos de credencial usando **Get-AutomationPSCredential**, os ativos de credencial também podem ser transmitidos por meio de parâmetros, se desejado.</span><span class="sxs-lookup"><span data-stu-id="33994-168">While DSC configurations in Azure Automation can reference credential assets using **Get-AutomationPSCredential**, credential assets can also be passed in via parameters, if desired.</span></span> <span data-ttu-id="33994-169">Para obter mais informações, veja [Compilando configurações na DSC de Automação do Azure](automation-dsc-compile.md#credential-assets).</span><span class="sxs-lookup"><span data-stu-id="33994-169">For more information, see [Compiling configurations in Azure Automation DSC](automation-dsc-compile.md#credential-assets).</span></span>

## <a name="next-steps"></a><span data-ttu-id="33994-170">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="33994-170">Next Steps</span></span>
* <span data-ttu-id="33994-171">Para saber mais sobre links na criação gráfica, veja [Links na criação gráfica](automation-graphical-authoring-intro.md#links-and-workflow)</span><span class="sxs-lookup"><span data-stu-id="33994-171">To learn more about links in graphical authoring, see [Links in graphical authoring](automation-graphical-authoring-intro.md#links-and-workflow)</span></span>
* <span data-ttu-id="33994-172">Para entender os diferentes métodos de autenticação com Automação, consulte [Segurança da Automação do Azure](automation-security-overview.md)</span><span class="sxs-lookup"><span data-stu-id="33994-172">To understand the different authentication methods with Automation, see [Azure Automation Security](automation-security-overview.md)</span></span>
* <span data-ttu-id="33994-173">Para começar a usar os runbooks Gráficos, confira [O meu primeiro runbook gráfico](automation-first-runbook-graphical.md)</span><span class="sxs-lookup"><span data-stu-id="33994-173">To get started with Graphical runbooks, see [My first graphical runbook](automation-first-runbook-graphical.md)</span></span>
* <span data-ttu-id="33994-174">Para começar a usar os runbooks do fluxo de trabalho do PowerShell, veja [Meu primeiro runbook do fluxo de trabalho do PowerShell](automation-first-runbook-textual.md)</span><span class="sxs-lookup"><span data-stu-id="33994-174">To get started with PowerShell workflow runbooks, see [My first PowerShell workflow runbook](automation-first-runbook-textual.md)</span></span> 

