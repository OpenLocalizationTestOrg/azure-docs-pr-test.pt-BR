---
title: "ativos de aaaCredential na automação do Azure | Microsoft Docs"
description: "Ativos de credencial na automação do Azure contêm as credenciais de segurança que podem ser usados tooauthenticate tooresources acessados por runbook hello ou configuração de DSC. Este artigo descreve como toocreate ativos de credenciais e usá-los em um runbook ou a configuração DSC."
services: automation
documentationcenter: 
author: mgoedtel
manager: carmonm
editor: tysonn
ms.assetid: 3209bf73-c208-425e-82b6-df49860546dd
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 04/14/2017
ms.author: bwren
ms.openlocfilehash: 46f23a8f79d5863265af9cf84f6003e30f8e7d39
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="credential-assets-in-azure-automation"></a><span data-ttu-id="c416b-104">Ativos de credenciais na Automação do Azure</span><span class="sxs-lookup"><span data-stu-id="c416b-104">Credential assets in Azure Automation</span></span>
<span data-ttu-id="c416b-105">Um ativo da credencial de Automação tem um objeto [PSCredential](http://msdn.microsoft.com/library/system.management.automation.pscredential) que contém as credenciais de segurança, como um nome de usuário e uma senha.</span><span class="sxs-lookup"><span data-stu-id="c416b-105">An Automation credential asset holds a [PSCredential](http://msdn.microsoft.com/library/system.management.automation.pscredential)  object which contains security credentials such as a username and password.</span></span> <span data-ttu-id="c416b-106">Runbooks, configurações de DSC podem usar os cmdlets que aceitam um objeto PSCredential para autenticação, ou eles podem extrair Olá nome de usuário e senha de aplicativo de toosome PSCredential objeto tooprovide de hello ou serviço que requer autenticação.</span><span class="sxs-lookup"><span data-stu-id="c416b-106">Runbooks and DSC configurations may use cmdlets that accept a PSCredential object for authentication, or they may extract hello username and password of hello PSCredential object tooprovide toosome application or service requiring authentication.</span></span> <span data-ttu-id="c416b-107">Propriedades de saudação de uma credencial são armazenadas com segurança na automação do Azure e podem ser acessadas no runbook hello ou configuração de DSC com hello [Get-AutomationPSCredential](http://msdn.microsoft.com/library/system.management.automation.pscredential.aspx) atividade.</span><span class="sxs-lookup"><span data-stu-id="c416b-107">hello properties for a credential are stored securely in Azure Automation and can be accessed in hello runbook or DSC configuration with hello [Get-AutomationPSCredential](http://msdn.microsoft.com/library/system.management.automation.pscredential.aspx) activity.</span></span>

> [!NOTE]
> <span data-ttu-id="c416b-108">Os ativos protegidos na Automação do Azure incluem credenciais, certificados, conexões e variáveis criptografadas.</span><span class="sxs-lookup"><span data-stu-id="c416b-108">Secure assets in Azure Automation include credentials, certificates, connections, and encrypted variables.</span></span> <span data-ttu-id="c416b-109">Esses ativos são criptografados e armazenados em Olá automação do Azure usando uma chave exclusiva que é gerada para cada conta de automação.</span><span class="sxs-lookup"><span data-stu-id="c416b-109">These assets are encrypted and stored in hello Azure Automation using a unique key that is generated for each automation account.</span></span> <span data-ttu-id="c416b-110">Essa chave é criptografada por um certificado mestre e armazenada na Automação do Azure.</span><span class="sxs-lookup"><span data-stu-id="c416b-110">This key is encrypted by a master certificate and stored in Azure Automation.</span></span> <span data-ttu-id="c416b-111">Antes de armazenar um ativo seguro, chave Olá para conta de automação de saudação é descriptografado usando certificado mestre hello e usado tooencrypt ativo de saudação.</span><span class="sxs-lookup"><span data-stu-id="c416b-111">Before storing a secure asset, hello key for hello automation account is decrypted using hello master certificate and then used tooencrypt hello asset.</span></span>  

## <a name="windows-powershell-cmdlets"></a><span data-ttu-id="c416b-112">Cmdlets do Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="c416b-112">Windows PowerShell cmdlets</span></span>
<span data-ttu-id="c416b-113">cmdlets Olá Olá a tabela a seguir são usada toocreate e gerenciar ativos de credencial de automação com o Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="c416b-113">hello cmdlets in hello following table are used toocreate and manage automation credential assets with Windows PowerShell.</span></span>  <span data-ttu-id="c416b-114">Eles são fornecidos como parte da saudação [módulo Azure PowerShell](/powershell/azure/overview) que está disponível para uso em runbooks de automação e configurações de DSC.</span><span class="sxs-lookup"><span data-stu-id="c416b-114">They ship as part of hello [Azure PowerShell module](/powershell/azure/overview) which is available for use in Automation runbooks and DSC configurations.</span></span>

| <span data-ttu-id="c416b-115">Cmdlets</span><span class="sxs-lookup"><span data-stu-id="c416b-115">Cmdlets</span></span> | <span data-ttu-id="c416b-116">Descrição</span><span class="sxs-lookup"><span data-stu-id="c416b-116">Description</span></span> |
|:--- |:--- |
| [<span data-ttu-id="c416b-117">Get-AzureAutomationCredential</span><span class="sxs-lookup"><span data-stu-id="c416b-117">Get-AzureAutomationCredential</span></span>](/powershell/module/azure/get-azureautomationcredential?view=azuresmps-3.7.0) |<span data-ttu-id="c416b-118">Recupera informações sobre um ativo de credencial.</span><span class="sxs-lookup"><span data-stu-id="c416b-118">Retrieves information about a credential asset.</span></span> <span data-ttu-id="c416b-119">Você só pode recuperar a credencial Olá propriamente dita do **Get-AutomationPSCredential** atividade.</span><span class="sxs-lookup"><span data-stu-id="c416b-119">You can only retrieve hello credential itself from **Get-AutomationPSCredential** activity.</span></span> |
| [<span data-ttu-id="c416b-120">New-AzureAutomationCredential</span><span class="sxs-lookup"><span data-stu-id="c416b-120">New-AzureAutomationCredential</span></span>](/powershell/module/azure/new-azureautomationcredential?view=azuresmps-3.7.0) |<span data-ttu-id="c416b-121">Cria uma nova credencial de Automação.</span><span class="sxs-lookup"><span data-stu-id="c416b-121">Creates a new Automation credential.</span></span> |
| [<span data-ttu-id="c416b-122">Remove- AzureAutomationCredential</span><span class="sxs-lookup"><span data-stu-id="c416b-122">Remove- AzureAutomationCredential</span></span>](/powershell/module/azure/new-azureautomationcredential?view=azuresmps-3.7.0) |<span data-ttu-id="c416b-123">Remove uma credencial de Automação.</span><span class="sxs-lookup"><span data-stu-id="c416b-123">Removes an Automation credential.</span></span> |
| [<span data-ttu-id="c416b-124">Set- AzureAutomationCredential</span><span class="sxs-lookup"><span data-stu-id="c416b-124">Set- AzureAutomationCredential</span></span>](/powershell/module/azure/new-azureautomationcredential?view=azuresmps-3.7.0) |<span data-ttu-id="c416b-125">Conjuntos de Olá propriedades para uma credencial de automação existente.</span><span class="sxs-lookup"><span data-stu-id="c416b-125">Sets hello properties for an existing Automation credential.</span></span> |

## <a name="runbook-activities"></a><span data-ttu-id="c416b-126">Atividades de runbook</span><span class="sxs-lookup"><span data-stu-id="c416b-126">Runbook activities</span></span>
<span data-ttu-id="c416b-127">atividades Olá Olá a tabela a seguir são usados tooaccess credenciais em um runbook e configurações de DSC.</span><span class="sxs-lookup"><span data-stu-id="c416b-127">hello activities in hello following table are used tooaccess credentials in a runbook and DSC configurations.</span></span>

| <span data-ttu-id="c416b-128">Atividades</span><span class="sxs-lookup"><span data-stu-id="c416b-128">Activities</span></span> | <span data-ttu-id="c416b-129">Descrição</span><span class="sxs-lookup"><span data-stu-id="c416b-129">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="c416b-130">Get-AutomationPSCredential</span><span class="sxs-lookup"><span data-stu-id="c416b-130">Get-AutomationPSCredential</span></span> |<span data-ttu-id="c416b-131">Obtém um toouse de credencial em um runbook ou a configuração DSC.</span><span class="sxs-lookup"><span data-stu-id="c416b-131">Gets a credential toouse in a runbook or DSC configuration.</span></span> <span data-ttu-id="c416b-132">Retorna um objeto [System.Management.Automation.PSCredential](http://msdn.microsoft.com/library/system.management.automation.pscredential) .</span><span class="sxs-lookup"><span data-stu-id="c416b-132">Returns a [System.Management.Automation.PSCredential](http://msdn.microsoft.com/library/system.management.automation.pscredential) object.</span></span> |

> [!NOTE]
> <span data-ttu-id="c416b-133">Você deve evitar usar variáveis em hello – o parâmetro Name de Get-AutomationPSCredential, pois isso pode complicar a descoberta de dependências entre runbooks ou configurações DSC e ativos de credenciais em tempo de design.</span><span class="sxs-lookup"><span data-stu-id="c416b-133">You should avoid using variables in hello –Name parameter of Get-AutomationPSCredential since this can complicate discovering dependencies between runbooks or DSC configurations, and credential assets at design time.</span></span>
> 
> 

## <a name="creating-a-new-credential-asset"></a><span data-ttu-id="c416b-134">Criando um novo ativo de credencial</span><span class="sxs-lookup"><span data-stu-id="c416b-134">Creating a new credential asset</span></span>

### <a name="toocreate-a-new-credential-asset-with-hello-azure-portal"></a><span data-ttu-id="c416b-135">toocreate um novo ativo de credencial com hello portal do Azure</span><span class="sxs-lookup"><span data-stu-id="c416b-135">toocreate a new credential asset with hello Azure portal</span></span>
1. <span data-ttu-id="c416b-136">Na sua conta de automação, clique em Olá **ativos** parte tooopen Olá **ativos** folha.</span><span class="sxs-lookup"><span data-stu-id="c416b-136">From your automation account, click hello **Assets** part tooopen hello **Assets** blade.</span></span>
2. <span data-ttu-id="c416b-137">Clique em Olá **credenciais** parte tooopen Olá **credenciais** folha.</span><span class="sxs-lookup"><span data-stu-id="c416b-137">Click hello **Credentials** part tooopen hello **Credentials** blade.</span></span>
3. <span data-ttu-id="c416b-138">Clique em **adicionar uma credencial** na parte superior de saudação da folha de saudação.</span><span class="sxs-lookup"><span data-stu-id="c416b-138">Click **Add a credential** at hello top of hello blade.</span></span>
4. <span data-ttu-id="c416b-139">Preencha o formulário de saudação e clique em **criar** toosave Olá nova credencial.</span><span class="sxs-lookup"><span data-stu-id="c416b-139">Complete hello form and click **Create** toosave hello new credential.</span></span>

### <a name="toocreate-a-new-credential-asset-with-windows-powershell"></a><span data-ttu-id="c416b-140">toocreate um novo ativo de credencial com o Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="c416b-140">toocreate a new credential asset with Windows PowerShell</span></span>
<span data-ttu-id="c416b-141">Olá comandos de exemplo a seguir mostram como toocreate uma automação nova credencial.</span><span class="sxs-lookup"><span data-stu-id="c416b-141">hello following sample commands show how toocreate a new automation credential.</span></span> <span data-ttu-id="c416b-142">Um objeto PSCredential é criado pela primeira vez com hello nome e senha e, em seguida, usado toocreate ativo de credencial de saudação.</span><span class="sxs-lookup"><span data-stu-id="c416b-142">A PSCredential object is first created with hello name and password and then used toocreate hello credential asset.</span></span> <span data-ttu-id="c416b-143">Como alternativa, você pode usar o hello **Get-Credential** toobe cmdlet solicitado tootype em um nome e uma senha.</span><span class="sxs-lookup"><span data-stu-id="c416b-143">Alternatively, you could use hello **Get-Credential** cmdlet toobe prompted tootype in a name and password.</span></span>

    $user = "MyDomain\MyUser"
    $pw = ConvertTo-SecureString "PassWord!" -AsPlainText -Force
    $cred = New-Object –TypeName System.Management.Automation.PSCredential –ArgumentList $user, $pw
    New-AzureAutomationCredential -AutomationAccountName "MyAutomationAccount" -Name "MyCredential" -Value $cred

### <a name="toocreate-a-new-credential-asset-with-hello-azure-classic-portal"></a><span data-ttu-id="c416b-144">toocreate um novo ativo de credencial com hello portal clássico do Azure</span><span class="sxs-lookup"><span data-stu-id="c416b-144">toocreate a new credential asset with hello Azure classic portal</span></span>
1. <span data-ttu-id="c416b-145">Na sua conta de automação, clique em **ativos** na parte superior de saudação da janela de saudação.</span><span class="sxs-lookup"><span data-stu-id="c416b-145">From your automation account, click **Assets** at hello top of hello window.</span></span>
2. <span data-ttu-id="c416b-146">Na parte inferior de saudação da janela de saudação, clique em **Adicionar configuração**.</span><span class="sxs-lookup"><span data-stu-id="c416b-146">At hello bottom of hello window, click **Add Setting**.</span></span>
3. <span data-ttu-id="c416b-147">Clique em **Adicionar Credencial**.</span><span class="sxs-lookup"><span data-stu-id="c416b-147">Click **Add Credential**.</span></span>
4. <span data-ttu-id="c416b-148">Em Olá **tipo de credencial** lista suspensa, selecione **credencial do PowerShell**.</span><span class="sxs-lookup"><span data-stu-id="c416b-148">In hello **Credential Type** dropdown, select **PowerShell Credential**.</span></span>
5. <span data-ttu-id="c416b-149">Conclua o Assistente de saudação e clique em Olá caixa de seleção toosave Olá nova credencial.</span><span class="sxs-lookup"><span data-stu-id="c416b-149">Complete hello wizard and click hello checkbox toosave hello new credential.</span></span>

## <a name="using-a-powershell-credential"></a><span data-ttu-id="c416b-150">Usando uma credencial do PowerShell</span><span class="sxs-lookup"><span data-stu-id="c416b-150">Using a PowerShell credential</span></span>
<span data-ttu-id="c416b-151">Recuperar um ativo de credencial em um runbook ou a configuração de DSC com hello **Get-AutomationPSCredential** atividade.</span><span class="sxs-lookup"><span data-stu-id="c416b-151">You retrieve a credential asset in a runbook or DSC configuration with hello **Get-AutomationPSCredential** activity.</span></span> <span data-ttu-id="c416b-152">Isso retorna um [objeto PSCredential](http://msdn.microsoft.com/library/system.management.automation.pscredential.aspx) que você pode usar com uma atividade ou cmdlet que exija um parâmetro PSCredential.</span><span class="sxs-lookup"><span data-stu-id="c416b-152">This returns a [PSCredential object](http://msdn.microsoft.com/library/system.management.automation.pscredential.aspx) that you can use with an activity or cmdlet that requires a PSCredential parameter.</span></span> <span data-ttu-id="c416b-153">Você também pode recuperar propriedades de saudação do toouse de objeto de credencial Olá individualmente.</span><span class="sxs-lookup"><span data-stu-id="c416b-153">You can also retrieve hello properties of hello credential object toouse individually.</span></span> <span data-ttu-id="c416b-154">Olá, objeto tem uma propriedade Olá nome de usuário e uma senha segura hello, ou você pode usar o hello **GetNetworkCredential** método tooreturn um [NetworkCredential](http://msdn.microsoft.com/library/system.net.networkcredential.aspx) objeto que fornecerá um segura versão da senha de saudação.</span><span class="sxs-lookup"><span data-stu-id="c416b-154">hello object has a property for hello username and hello secure password, or you can use hello **GetNetworkCredential** method tooreturn a [NetworkCredential](http://msdn.microsoft.com/library/system.net.networkcredential.aspx) object that will provide an unsecured version of hello password.</span></span>

### <a name="textual-runbook-sample"></a><span data-ttu-id="c416b-155">Exemplo de runbook textual</span><span class="sxs-lookup"><span data-stu-id="c416b-155">Textual runbook sample</span></span>
<span data-ttu-id="c416b-156">Olá comandos de exemplo a seguir mostram como as credenciais em um runbook toouse do PowerShell.</span><span class="sxs-lookup"><span data-stu-id="c416b-156">hello following sample commands show how toouse a PowerShell credential in a runbook.</span></span> <span data-ttu-id="c416b-157">Neste exemplo, Olá credencial é recuperada e seu nome de usuário e a senha atribuída toovariables.</span><span class="sxs-lookup"><span data-stu-id="c416b-157">In this example, hello credential is retrieved and its username and password assigned toovariables.</span></span>

    $myCredential = Get-AutomationPSCredential -Name 'MyCredential'
    $userName = $myCredential.UserName
    $securePassword = $myCredential.Password
    $password = $myCredential.GetNetworkCredential().Password


### <a name="graphical-runbook-sample"></a><span data-ttu-id="c416b-158">Exemplo de runbook gráfico</span><span class="sxs-lookup"><span data-stu-id="c416b-158">Graphical runbook sample</span></span>
<span data-ttu-id="c416b-159">Adicionar um **Get-AutomationPSCredential** tooa de atividade runbook gráfico clicando na credencial Olá no painel de biblioteca de saudação do editor gráfico hello e selecionando **adicionar toocanvas**.</span><span class="sxs-lookup"><span data-stu-id="c416b-159">You add a **Get-AutomationPSCredential** activity tooa graphical runbook by right-clicking on hello credential in hello Library pane of hello graphical editor and selecting **Add toocanvas**.</span></span>

![Adicionar toocanvas de credencial](media/automation-credentials/credential-add-canvas.png)

<span data-ttu-id="c416b-161">Olá imagem a seguir mostra um exemplo do uso de uma credencial em um runbook gráfico.</span><span class="sxs-lookup"><span data-stu-id="c416b-161">hello following image shows an example of using a credential in a graphical runbook.</span></span>  <span data-ttu-id="c416b-162">Nesse caso, ele está sendo usado tooprovide autenticação para recursos de tooAzure um runbook conforme descrito em [Runbooks autenticar com a conta de usuário do AD do Azure](automation-create-aduser-account.md).</span><span class="sxs-lookup"><span data-stu-id="c416b-162">In this case, it is being used tooprovide authentication for a runbook tooAzure resources as described in [Authenticate Runbooks with Azure AD User account](automation-create-aduser-account.md).</span></span>  <span data-ttu-id="c416b-163">primeira atividade de saudação recupera credencial Olá que tenha acesso toohello assinatura do Azure.</span><span class="sxs-lookup"><span data-stu-id="c416b-163">hello first activity retrieves hello credential that has access toohello Azure subscription.</span></span>  <span data-ttu-id="c416b-164">Olá **Add-AzureAccount** atividade, em seguida, usa a autenticação de tooprovide de credencial para todas as atividades que vêm depois dele.</span><span class="sxs-lookup"><span data-stu-id="c416b-164">hello **Add-AzureAccount** activity then uses this credential tooprovide authentication for any activities that come after it.</span></span>  <span data-ttu-id="c416b-165">Um [link de pipeline](automation-graphical-authoring-intro.md#links-and-workflow) está disponível, já que **Get-AutomationPSCredential** está esperando um único objeto.</span><span class="sxs-lookup"><span data-stu-id="c416b-165">A [pipeline link](automation-graphical-authoring-intro.md#links-and-workflow) is here since **Get-AutomationPSCredential** is expecting a single object.</span></span>  

![Adicionar toocanvas de credencial](media/automation-credentials/get-credential.png)

## <a name="using-a-powershell-credential-in-dsc"></a><span data-ttu-id="c416b-167">Usando uma credencial do PowerShell na DSC</span><span class="sxs-lookup"><span data-stu-id="c416b-167">Using a PowerShell credential in DSC</span></span>
<span data-ttu-id="c416b-168">Embora as Configurações DSC na Automação do Azure possam fazer referência aos ativos de credencial usando **Get-AutomationPSCredential**, os ativos de credencial também podem ser transmitidos por meio de parâmetros, se desejado.</span><span class="sxs-lookup"><span data-stu-id="c416b-168">While DSC configurations in Azure Automation can reference credential assets using **Get-AutomationPSCredential**, credential assets can also be passed in via parameters, if desired.</span></span> <span data-ttu-id="c416b-169">Para obter mais informações, veja [Compilando configurações na DSC de Automação do Azure](automation-dsc-compile.md#credential-assets).</span><span class="sxs-lookup"><span data-stu-id="c416b-169">For more information, see [Compiling configurations in Azure Automation DSC](automation-dsc-compile.md#credential-assets).</span></span>

## <a name="next-steps"></a><span data-ttu-id="c416b-170">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="c416b-170">Next Steps</span></span>
* <span data-ttu-id="c416b-171">toolearn mais sobre links na criação do gráfico, consulte [Links no gráfico de criação](automation-graphical-authoring-intro.md#links-and-workflow)</span><span class="sxs-lookup"><span data-stu-id="c416b-171">toolearn more about links in graphical authoring, see [Links in graphical authoring](automation-graphical-authoring-intro.md#links-and-workflow)</span></span>
* <span data-ttu-id="c416b-172">métodos de autenticação diferentes toounderstand hello com automação, consulte [segurança da automação do Azure](automation-security-overview.md)</span><span class="sxs-lookup"><span data-stu-id="c416b-172">toounderstand hello different authentication methods with Automation, see [Azure Automation Security](automation-security-overview.md)</span></span>
* <span data-ttu-id="c416b-173">tooget iniciado com runbooks gráficos, consulte [meu primeiro runbook gráfico](automation-first-runbook-graphical.md)</span><span class="sxs-lookup"><span data-stu-id="c416b-173">tooget started with Graphical runbooks, see [My first graphical runbook](automation-first-runbook-graphical.md)</span></span>
* <span data-ttu-id="c416b-174">tooget iniciado com runbooks do fluxo de trabalho do PowerShell, consulte [meu primeiro runbook de fluxo de trabalho do PowerShell](automation-first-runbook-textual.md)</span><span class="sxs-lookup"><span data-stu-id="c416b-174">tooget started with PowerShell workflow runbooks, see [My first PowerShell workflow runbook](automation-first-runbook-textual.md)</span></span> 

