---
title: "Guia de programação para Hubs de Eventos do Azure | Microsoft Docs"
description: "Escreva código para Hubs de Eventos do Azure usando o SDK do .NET."
services: event-hubs
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 64cbfd3d-4a0e-4455-a90a-7f3d4f080323
ms.service: event-hubs
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: tbd
ms.date: 08/17/2017
ms.author: sethm
ms.openlocfilehash: 405ec2b27b488b570c4a5c86e4950ff98233360e
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/18/2017
---
# <a name="event-hubs-programming-guide"></a><span data-ttu-id="b8668-103">Guia de programação dos Hubs de Eventos</span><span class="sxs-lookup"><span data-stu-id="b8668-103">Event Hubs programming guide</span></span>

<span data-ttu-id="b8668-104">Este artigo descreve alguns cenários comuns de produção de código usando os Hubs de Evento do Azure e o SDK do .NET.</span><span class="sxs-lookup"><span data-stu-id="b8668-104">This article discusses some common scenarios in writing code using Azure Event Hubs and the Azure .NET SDK.</span></span> <span data-ttu-id="b8668-105">Ele supõe uma compreensão preliminar de Hubs de Eventos.</span><span class="sxs-lookup"><span data-stu-id="b8668-105">It assumes a preliminary understanding of Event Hubs.</span></span> <span data-ttu-id="b8668-106">Para obter uma visão geral conceitual dos Hubs de Eventos, confira [Visão geral dos Hubs de Eventos](event-hubs-what-is-event-hubs.md).</span><span class="sxs-lookup"><span data-stu-id="b8668-106">For a conceptual overview of Event Hubs, see the [Event Hubs overview](event-hubs-what-is-event-hubs.md).</span></span>

## <a name="event-publishers"></a><span data-ttu-id="b8668-107">Editores de eventos</span><span class="sxs-lookup"><span data-stu-id="b8668-107">Event publishers</span></span>

<span data-ttu-id="b8668-108">Envie eventos para um Hub de Eventos usando HTTP POST ou via uma conexão AMQP 1.0.</span><span class="sxs-lookup"><span data-stu-id="b8668-108">You send events to an event hub either using HTTP POST or via an AMQP 1.0 connection.</span></span> <span data-ttu-id="b8668-109">A escolha de qual usar e quando depende do cenário específico que está sendo abordado.</span><span class="sxs-lookup"><span data-stu-id="b8668-109">The choice of which to use and when depends on the specific scenario being addressed.</span></span> <span data-ttu-id="b8668-110">Conexões do AMQP 1.0 são medidas como conexões negociadas no Barramento de Serviço e são mais apropriadas em cenários com volumes de mensagem frequentemente mais altos e requisitos de latência mais baixos, já que fornecem um canal de mensagens persistente.</span><span class="sxs-lookup"><span data-stu-id="b8668-110">AMQP 1.0 connections are metered as brokered connections in Service Bus and are more appropriate in scenarios with frequent higher message volumes and lower latency requirements, as they provide a persistent messaging channel.</span></span>

<span data-ttu-id="b8668-111">Você cria e gerencia Hubs de Eventos usando a classe [NamespaceManager][] .</span><span class="sxs-lookup"><span data-stu-id="b8668-111">You create and manage Event Hubs using the [NamespaceManager][] class.</span></span> <span data-ttu-id="b8668-112">Ao usar APIs gerenciadas pelo .NET, as principais construções para publicar os dados nos Hubs de Eventos são as classes [EventHubClient](/dotnet/api/microsoft.servicebus.messaging.eventhubclient) e [EventData][].</span><span class="sxs-lookup"><span data-stu-id="b8668-112">When using the .NET managed APIs, the primary constructs for publishing data to Event Hubs are the [EventHubClient](/dotnet/api/microsoft.servicebus.messaging.eventhubclient) and [EventData][] classes.</span></span> <span data-ttu-id="b8668-113">[EventHubClient][] fornece o canal de comunicação AMQP pelo qual os eventos são enviados ao Hub de Eventos.</span><span class="sxs-lookup"><span data-stu-id="b8668-113">[EventHubClient][] provides the AMQP communication channel over which events are sent to the event hub.</span></span> <span data-ttu-id="b8668-114">A classe [EventData][] representa um evento e é usada para publicar mensagens em um hub de eventos.</span><span class="sxs-lookup"><span data-stu-id="b8668-114">The [EventData][] class represents an event, and is used to publish messages to an event hub.</span></span> <span data-ttu-id="b8668-115">Essa classe inclui o corpo, alguns metadados e informações de cabeçalho sobre o evento.</span><span class="sxs-lookup"><span data-stu-id="b8668-115">This class includes the body, some metadata, and header information about the event.</span></span> <span data-ttu-id="b8668-116">Outras propriedades são adicionadas ao objeto [EventData][] à medida que ele passa por um hub de eventos.</span><span class="sxs-lookup"><span data-stu-id="b8668-116">Other properties are added to the [EventData][] object as it passes through an event hub.</span></span>

## <a name="get-started"></a><span data-ttu-id="b8668-117">Introdução</span><span class="sxs-lookup"><span data-stu-id="b8668-117">Get started</span></span>

<span data-ttu-id="b8668-118">As classes do .NET que são compatíveis com Hubs de Eventos são fornecidos no assembly Microsoft.ServiceBus.dll.</span><span class="sxs-lookup"><span data-stu-id="b8668-118">The .NET classes that support Event Hubs are provided in the Microsoft.ServiceBus.dll assembly.</span></span> <span data-ttu-id="b8668-119">A maneira mais fácil de consultar a API do Barramento de Serviço e configurar seu aplicativo com todas as dependências do Barramento de Serviço é baixar o [pacote NuGet do Barramento de Serviço](https://www.nuget.org/packages/WindowsAzure.ServiceBus).</span><span class="sxs-lookup"><span data-stu-id="b8668-119">The easiest way to reference the Service Bus API and to configure your application with all of the Service Bus dependencies is to download the [Service Bus NuGet package](https://www.nuget.org/packages/WindowsAzure.ServiceBus).</span></span> <span data-ttu-id="b8668-120">Como alternativa, você pode usar o [Console do Gerenciador de Pacotes](http://docs.nuget.org/docs/start-here/using-the-package-manager-console) no Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="b8668-120">Alternatively, you can use the [Package Manager Console](http://docs.nuget.org/docs/start-here/using-the-package-manager-console) in Visual Studio.</span></span> <span data-ttu-id="b8668-121">Digite o comando a seguir na janela [Console do Gerenciador de Pacotes](http://docs.nuget.org/docs/start-here/using-the-package-manager-console) :</span><span class="sxs-lookup"><span data-stu-id="b8668-121">To do so, issue the following command in the [Package Manager Console](http://docs.nuget.org/docs/start-here/using-the-package-manager-console) window:</span></span>

```
Install-Package WindowsAzure.ServiceBus
```

## <a name="create-an-event-hub"></a><span data-ttu-id="b8668-122">Criar um Hub de Evento</span><span class="sxs-lookup"><span data-stu-id="b8668-122">Create an event hub</span></span>
<span data-ttu-id="b8668-123">Você pode usar a classe [NamespaceManager][] para criar Hubs de Eventos.</span><span class="sxs-lookup"><span data-stu-id="b8668-123">You can use the [NamespaceManager][] class to create Event Hubs.</span></span> <span data-ttu-id="b8668-124">Por exemplo:</span><span class="sxs-lookup"><span data-stu-id="b8668-124">For example:</span></span>

```csharp
var manager = new Microsoft.ServiceBus.NamespaceManager("mynamespace.servicebus.windows.net");
var description = manager.CreateEventHub("MyEventHub");
```

<span data-ttu-id="b8668-125">Na maioria dos casos, é recomendável que você use os métodos [CreateEventHubIfNotExists][] para evitar gerar exceções se o serviço for reiniciado.</span><span class="sxs-lookup"><span data-stu-id="b8668-125">In most cases, it is recommended that you use the [CreateEventHubIfNotExists][] methods to avoid generating exceptions if the service restarts.</span></span> <span data-ttu-id="b8668-126">Por exemplo:</span><span class="sxs-lookup"><span data-stu-id="b8668-126">For example:</span></span>

```csharp
var description = manager.CreateEventHubIfNotExists("MyEventHub");
```

<span data-ttu-id="b8668-127">Todas as operações de criação de Hubs de Eventos, inclusive [CreateEventHubIfNotExists][], exigem permissões **Gerenciar** no namespace em questão.</span><span class="sxs-lookup"><span data-stu-id="b8668-127">All Event Hubs creation operations, including [CreateEventHubIfNotExists][], require **Manage** permissions on the namespace in question.</span></span> <span data-ttu-id="b8668-128">Se você quiser limitar as permissões de seus aplicativos de consumidor ou publicador, pode evitar essas chamadas de criação de operação no código de produção, ao usar credenciais com permissões limitadas.</span><span class="sxs-lookup"><span data-stu-id="b8668-128">If you want to limit the permissions of your publisher or consumer applications, you can avoid these create operation calls in production code when you use credentials with limited permissions.</span></span>

<span data-ttu-id="b8668-129">A classe [EventHubDescription](/dotnet/api/microsoft.servicebus.messaging.eventhubdescription) contém detalhes sobre um hub de eventos, incluindo as regras de autorização, intervalo de retenção de mensagem, ID de partição, status e caminho.</span><span class="sxs-lookup"><span data-stu-id="b8668-129">The [EventHubDescription](/dotnet/api/microsoft.servicebus.messaging.eventhubdescription) class contains details about an event hub, including the authorization rules, the message retention interval, partition IDs, status, and path.</span></span> <span data-ttu-id="b8668-130">Você pode usar essa classe para atualizar os metadados em um hub de eventos.</span><span class="sxs-lookup"><span data-stu-id="b8668-130">You can use this class to update the metadata on an event hub.</span></span>

## <a name="create-an-event-hubs-client"></a><span data-ttu-id="b8668-131">Criar um cliente de Hubs de Eventos</span><span class="sxs-lookup"><span data-stu-id="b8668-131">Create an Event Hubs client</span></span>
<span data-ttu-id="b8668-132">A classe principal para interagir com Hubs de Eventos é [Microsoft.ServiceBus.Messaging.EventHubClient][EventHubClient].</span><span class="sxs-lookup"><span data-stu-id="b8668-132">The primary class for interacting with Event Hubs is [Microsoft.ServiceBus.Messaging.EventHubClient][EventHubClient].</span></span> <span data-ttu-id="b8668-133">Essa classe fornece recursos de remetente e destinatário.</span><span class="sxs-lookup"><span data-stu-id="b8668-133">This class provides both sender and receiver capabilities.</span></span> <span data-ttu-id="b8668-134">Você pode criar uma instância dessa classe usando o método [Criar](/dotnet/api/microsoft.servicebus.messaging.eventhubclient.create) , conforme mostrado no exemplo a seguir.</span><span class="sxs-lookup"><span data-stu-id="b8668-134">You can instantiate this class using the [Create](/dotnet/api/microsoft.servicebus.messaging.eventhubclient.create) method, as shown in the following example.</span></span>

```csharp
var client = EventHubClient.Create(description.Path);
```

<span data-ttu-id="b8668-135">Esse método usa as informações de conexão do Barramento de Serviço no arquivo App.config, na seção `appSettings` .</span><span class="sxs-lookup"><span data-stu-id="b8668-135">This method uses the Service Bus connection information in the App.config file, in the `appSettings` section.</span></span> <span data-ttu-id="b8668-136">Para obter um exemplo do XML `appSettings` usado para armazenar informações de conexão de Barramento de Serviço, consulte a documentação do método [Microsoft.ServiceBus.Messaging.EventHubClient.Create(System.String)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Create_System_String_) .</span><span class="sxs-lookup"><span data-stu-id="b8668-136">For an example of the `appSettings` XML used to store the Service Bus connection information, see the documentation for the [Microsoft.ServiceBus.Messaging.EventHubClient.Create(System.String)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Create_System_String_) method.</span></span>

<span data-ttu-id="b8668-137">Outra opção é criar o cliente por meio de uma cadeia de conexão.</span><span class="sxs-lookup"><span data-stu-id="b8668-137">Another option is to create the client from a connection string.</span></span> <span data-ttu-id="b8668-138">Essa opção funciona bem ao usar funções de trabalho do Azure, porque você pode armazenar a cadeia de caracteres nas propriedades de configuração do trabalho.</span><span class="sxs-lookup"><span data-stu-id="b8668-138">This option works well when using Azure worker roles, because you can store the string in the configuration properties for the worker.</span></span> <span data-ttu-id="b8668-139">Por exemplo:</span><span class="sxs-lookup"><span data-stu-id="b8668-139">For example:</span></span>

```csharp
EventHubClient.CreateFromConnectionString("your_connection_string");
```

<span data-ttu-id="b8668-140">A cadeia de conexão será no mesmo formato em que aparece no arquivo App.config dos métodos anteriores:</span><span class="sxs-lookup"><span data-stu-id="b8668-140">The connection string will be in the same format as it appears in the App.config file for the previous methods:</span></span>

```
Endpoint=sb://[namespace].servicebus.windows.net/;SharedAccessKeyName=RootManageSharedAccessKey;SharedAccessKey=[key]
```

<span data-ttu-id="b8668-141">Por fim, também é possível criar um objeto [EventHubClient][] a partir de uma instância [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory), como mostrado no exemplo a seguir.</span><span class="sxs-lookup"><span data-stu-id="b8668-141">Finally, it is also possible to create an [EventHubClient][] object from a [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) instance, as shown in the following example.</span></span>

```csharp
var factory = MessagingFactory.CreateFromConnectionString("your_connection_string");
var client = factory.CreateEventHubClient("MyEventHub");
```

<span data-ttu-id="b8668-142">É importante observar que outros objetos [EventHubClient][] criados em uma instância de fábrica de mensagens vão reutilizar a mesma conexão TCP subjacente.</span><span class="sxs-lookup"><span data-stu-id="b8668-142">It is important to note that additional [EventHubClient][] objects created from a messaging factory instance will reuse the same underlying TCP connection.</span></span> <span data-ttu-id="b8668-143">Portanto, esses objetos têm um limite, no lado do cliente, na taxa de transferência.</span><span class="sxs-lookup"><span data-stu-id="b8668-143">Therefore, these objects have a client-side limit on throughput.</span></span> <span data-ttu-id="b8668-144">O método [Criar](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Create_System_String_) reutiliza uma única fábrica de mensagens única.</span><span class="sxs-lookup"><span data-stu-id="b8668-144">The [Create](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Create_System_String_) method reuses a single messaging factory.</span></span> <span data-ttu-id="b8668-145">Se você precisa de uma taxa de transferência muito alta de um único remetente, é possível criar diversas fábricas de mensagens e um objeto [EventHubClient][] de cada fábrica de mensagens.</span><span class="sxs-lookup"><span data-stu-id="b8668-145">If you need very high throughput from a single sender, then you can create multiple message factories and one [EventHubClient][] object from each messaging factory.</span></span>

## <a name="send-events-to-an-event-hub"></a><span data-ttu-id="b8668-146">Enviar eventos para um hub de eventos</span><span class="sxs-lookup"><span data-stu-id="b8668-146">Send events to an event hub</span></span>
<span data-ttu-id="b8668-147">Você envia eventos a um hub de eventos, criando uma instância [EventData][] e enviando-a por meio do método [Send](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_).</span><span class="sxs-lookup"><span data-stu-id="b8668-147">You send events to an event hub by creating an [EventData][] instance and sending it via the [Send](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_) method.</span></span> <span data-ttu-id="b8668-148">Esse método usa um único parâmetro [EventData][] da instância e o envia de forma síncrona para um hub de eventos.</span><span class="sxs-lookup"><span data-stu-id="b8668-148">This method takes a single [EventData][] instance parameter and synchronously sends it to an event hub.</span></span>

## <a name="event-serialization"></a><span data-ttu-id="b8668-149">Serialização de evento</span><span class="sxs-lookup"><span data-stu-id="b8668-149">Event serialization</span></span>
<span data-ttu-id="b8668-150">A classe [EventData][] tem [quatro construtores sobrecarregados ](/dotnet/api/microsoft.servicebus.messaging.eventdata#constructors_) que usam vários parâmetros, como um objeto e um serializador, matriz de bytes ou fluxo.</span><span class="sxs-lookup"><span data-stu-id="b8668-150">The [EventData][] class has [four overloaded constructors](/dotnet/api/microsoft.servicebus.messaging.eventdata#constructors_) that take a variety of parameters, such as an object and serializer, a byte array, or a stream.</span></span> <span data-ttu-id="b8668-151">Também é possível criar uma instância da classe [EventData][] e definir o fluxo de corpo posteriormente.</span><span class="sxs-lookup"><span data-stu-id="b8668-151">It is also possible to instantiate the [EventData][] class and set the body stream afterwards.</span></span> <span data-ttu-id="b8668-152">Ao usar o JSON com [EventData][], você pode usar **Encoding.UTF8.GetBytes()** para recuperar a matriz de bytes para uma cadeia de caracteres codificada em JSON.</span><span class="sxs-lookup"><span data-stu-id="b8668-152">When using JSON with [EventData][], you can use **Encoding.UTF8.GetBytes()** to retrieve the byte array for a JSON-encoded string.</span></span>

## <a name="partition-key"></a><span data-ttu-id="b8668-153">Chave de partição</span><span class="sxs-lookup"><span data-stu-id="b8668-153">Partition key</span></span>
<span data-ttu-id="b8668-154">A classe [EventData][] tem uma propriedade [PartitionKey][] que permite que o remetente especifique um valor de hash para produzir uma atribuição de partição.</span><span class="sxs-lookup"><span data-stu-id="b8668-154">The [EventData][] class has a [PartitionKey][] property that enables the sender to specify a value that is hashed to produce a partition assignment.</span></span> <span data-ttu-id="b8668-155">Usar uma chave de partição garante que todos os eventos com a mesma chave sejam enviados para a mesma partição no hub de eventos.</span><span class="sxs-lookup"><span data-stu-id="b8668-155">Using a partition key ensures that all the events with the same key are sent to the same partition in the event hub.</span></span> <span data-ttu-id="b8668-156">Chaves de partição comuns incluem IDs de sessão de usuário e IDs de remetente exclusivo.</span><span class="sxs-lookup"><span data-stu-id="b8668-156">Common partition keys include user session IDs and unique sender IDs.</span></span> <span data-ttu-id="b8668-157">A propriedade [PartitionKey][] é opcional e pode ser fornecida ao usar o método [Microsoft.ServiceBus.Messaging.EventHubClient.Send(Microsoft.ServiceBus.Messaging.EventData)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_) ou [Microsoft.ServiceBus.Messaging.EventHubClient.SendAsync(Microsoft.ServiceBus.Messaging.EventData)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_SendAsync_Microsoft_ServiceBus_Messaging_EventData_).</span><span class="sxs-lookup"><span data-stu-id="b8668-157">The [PartitionKey][] property is optional and can be provided when using the [Microsoft.ServiceBus.Messaging.EventHubClient.Send(Microsoft.ServiceBus.Messaging.EventData)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_) or [Microsoft.ServiceBus.Messaging.EventHubClient.SendAsync(Microsoft.ServiceBus.Messaging.EventData)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_SendAsync_Microsoft_ServiceBus_Messaging_EventData_) methods.</span></span> <span data-ttu-id="b8668-158">Se você não fornecer um valor para [PartitionKey][], os eventos enviados serão distribuídos para partições que usam um modelo round-robin.</span><span class="sxs-lookup"><span data-stu-id="b8668-158">If you do not provide a value for [PartitionKey][], sent events are distributed to partitions using a round-robin model.</span></span>

### <a name="availability-considerations"></a><span data-ttu-id="b8668-159">Considerações sobre disponibilidade</span><span class="sxs-lookup"><span data-stu-id="b8668-159">Availability considerations</span></span>

<span data-ttu-id="b8668-160">Usar uma chave de partição é opcional, e você deve considerar cuidadosamente se deseja ou não usar uma.</span><span class="sxs-lookup"><span data-stu-id="b8668-160">Using a partition key is optional, and you should consider carefully whether or not to use one.</span></span> <span data-ttu-id="b8668-161">Em muitos casos, usar uma chave de partição é uma boa opção se a ordem dos eventos for importante.</span><span class="sxs-lookup"><span data-stu-id="b8668-161">In many cases, using a partition key is a good choice if event ordering is important.</span></span> <span data-ttu-id="b8668-162">Quando você usa uma chave de partição, essas partições exigem disponibilidade em um único nó, e podem ocorrer interrupções ao longo do tempo; por exemplo, durante a reinicialização e aplicação de patches de nós de computação.</span><span class="sxs-lookup"><span data-stu-id="b8668-162">When you use a partition key, these partitions require availability on a single node, and outages can occur over time; for example, when compute nodes reboot and patch.</span></span> <span data-ttu-id="b8668-163">Assim, se você definir uma ID de partição, e essa partição ficar indisponível por algum motivo, uma tentativa de acessar os dados na partição falhará.</span><span class="sxs-lookup"><span data-stu-id="b8668-163">As such, if you set a partition ID and that partition becomes unavailable for some reason, an attempt to access the data in that partition will fail.</span></span> <span data-ttu-id="b8668-164">Se a alta disponibilidade for mais importante, não especifique uma chave de partição; nesse caso, os eventos serão enviados às partições usando o modelo de round-robin descrito anteriormente.</span><span class="sxs-lookup"><span data-stu-id="b8668-164">If high availability is most important, do not specify a partition key; in that case events will be sent to partitions using the round-robin model described previously.</span></span> <span data-ttu-id="b8668-165">Nesse cenário, você está fazendo uma opção explícita entre disponibilidade (sem ID de partição) e consistência (fixando eventos a uma ID de partição).</span><span class="sxs-lookup"><span data-stu-id="b8668-165">In this scenario, you are making an explicit choice between availability (no partition ID) and consistency (pinning events to a partition ID).</span></span>

<span data-ttu-id="b8668-166">Outra consideração é o tratamento de atrasos no processamento de eventos.</span><span class="sxs-lookup"><span data-stu-id="b8668-166">Another consideration is handling delays in processing events.</span></span> <span data-ttu-id="b8668-167">Em alguns casos, talvez seja melhor descartar os dados e repetir a operação do que acompanhar o processamento, o que pode causar ainda mais atrasos de processamento de downstream.</span><span class="sxs-lookup"><span data-stu-id="b8668-167">In some cases it might be better to drop data and retry than to try and keep up with processing, which can potentially cause further downstream processing delays.</span></span> <span data-ttu-id="b8668-168">Por exemplo, com uma cotação de bolsa é melhor aguardar dados atualizados, mas em um bate-papo ao vivo ou um cenário de VOIP é melhor ter os dados rapidamente, mesmo se não estiverem completos.</span><span class="sxs-lookup"><span data-stu-id="b8668-168">For example, with a stock ticker it's better to wait for complete up-to-date data, but in a live chat or VOIP scenario you'd rather have the data quickly, even if it isn't complete.</span></span>

<span data-ttu-id="b8668-169">Com base nessas considerações de disponibilidade, nesses cenários, você pode escolher uma das seguinte estratégias de tratamento de erro:</span><span class="sxs-lookup"><span data-stu-id="b8668-169">Given these availability considerations, in these scenarios you might choose one of the following error handling strategies:</span></span>

- <span data-ttu-id="b8668-170">Parar (para de ler de Hubs de Eventos até que tudo seja corrigido)</span><span class="sxs-lookup"><span data-stu-id="b8668-170">Stop (stop reading from Event Hubs until things are fixed)</span></span>
- <span data-ttu-id="b8668-171">Descartar (as mensagens não são importantes, descarte-as)</span><span class="sxs-lookup"><span data-stu-id="b8668-171">Drop (messages aren’t important, drop them)</span></span>
- <span data-ttu-id="b8668-172">Tentar novamente (repete as mensagens como você achar adequado)</span><span class="sxs-lookup"><span data-stu-id="b8668-172">Retry (retry the messages as you see fit)</span></span>
- <span data-ttu-id="b8668-173">[Mensagens mortas](../service-bus-messaging/service-bus-dead-letter-queues.md) (use uma fila ou outro hub de eventos para considerar mensagens mortas apenas as mensagens que não puderam ser processadas)</span><span class="sxs-lookup"><span data-stu-id="b8668-173">[Dead letter](../service-bus-messaging/service-bus-dead-letter-queues.md) (use a queue or another event hub to dead letter only the messages you couldn’t process)</span></span>

<span data-ttu-id="b8668-174">Para obter mais informações e uma discussão sobre as compensações entre disponibilidade e a consistência, consulte [Disponibilidade e a consistência nos Hubs de Eventos](event-hubs-availability-and-consistency.md).</span><span class="sxs-lookup"><span data-stu-id="b8668-174">For more information and a discussion about the trade-offs between availability and consistency, see [Availability and consistency in Event Hubs](event-hubs-availability-and-consistency.md).</span></span> 

## <a name="batch-event-send-operations"></a><span data-ttu-id="b8668-175">Operações de envio de eventos em lote</span><span class="sxs-lookup"><span data-stu-id="b8668-175">Batch event send operations</span></span>
<span data-ttu-id="b8668-176">Envio de eventos em lotes pode aumentar significativamente a taxa de transferência.</span><span class="sxs-lookup"><span data-stu-id="b8668-176">Sending events in batches can dramatically increase throughput.</span></span> <span data-ttu-id="b8668-177">O método [SendBatch](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_SendBatch_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_EventData__) usa um parâmetro **IEnumerable** do tipo [EventData][] e envia o lote inteiro como uma operação atômica para o hub de eventos.</span><span class="sxs-lookup"><span data-stu-id="b8668-177">The [SendBatch](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_SendBatch_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_EventData__) method takes an **IEnumerable** parameter of type [EventData][] and sends the entire batch as an atomic operation to the event hub.</span></span>

```csharp
public void SendBatch(IEnumerable<EventData> eventDataList);
```

<span data-ttu-id="b8668-178">Observe que um único lote não deve exceder o limite de 256 KB de um evento.</span><span class="sxs-lookup"><span data-stu-id="b8668-178">Note that a single batch must not exceed the 256 KB limit of an event.</span></span> <span data-ttu-id="b8668-179">Além disso, cada mensagem no lote usa a mesma identidade do publicador.</span><span class="sxs-lookup"><span data-stu-id="b8668-179">Additionally, each message in the batch uses the same publisher identity.</span></span> <span data-ttu-id="b8668-180">É responsabilidade do remetente garantir que o lote não exceda o tamanho máximo do evento.</span><span class="sxs-lookup"><span data-stu-id="b8668-180">It is the responsibility of the sender to ensure that the batch does not exceed the maximum event size.</span></span> <span data-ttu-id="b8668-181">Em caso afirmativo, um erro **Enviar** do cliente é gerado.</span><span class="sxs-lookup"><span data-stu-id="b8668-181">If it does, a client **Send** error is generated.</span></span>

## <a name="send-asynchronously-and-send-at-scale"></a><span data-ttu-id="b8668-182">Enviar de forma assíncrona e em escala</span><span class="sxs-lookup"><span data-stu-id="b8668-182">Send asynchronously and send at scale</span></span>
<span data-ttu-id="b8668-183">Você também pode enviar eventos para um hub de eventos de forma assíncrona.</span><span class="sxs-lookup"><span data-stu-id="b8668-183">You can also send events to an event hub asynchronously.</span></span> <span data-ttu-id="b8668-184">O envio de forma assíncrona pode aumentar a taxa em que um cliente é capaz de enviar eventos.</span><span class="sxs-lookup"><span data-stu-id="b8668-184">Sending asynchronously can increase the rate at which a client is able to send events.</span></span> <span data-ttu-id="b8668-185">Os métodos [Send](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_) e [SendBatch](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_SendBatch_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_EventData__) estão disponíveis nas versões assíncronas que retornam um objeto [Task](https://msdn.microsoft.com/library/system.threading.tasks.task.aspx).</span><span class="sxs-lookup"><span data-stu-id="b8668-185">Both the [Send](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_) and [SendBatch](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_SendBatch_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_EventData__) methods are available in asynchronous versions that return a [Task](https://msdn.microsoft.com/library/system.threading.tasks.task.aspx) object.</span></span> <span data-ttu-id="b8668-186">Embora essa técnica possa aumentar a taxa de transferência, ela também pode fazer com que o cliente continue a enviar eventos mesmo enquanto está sendo limitado pelo serviço de Hubs de Eventos e pode resultar em falhas por parte do cliente ou mensagens perdidas, se não for implementada corretamente.</span><span class="sxs-lookup"><span data-stu-id="b8668-186">While this technique can increase throughput, it can also cause the client to continue to send events even while it is being throttled by the Event Hubs service and can result in the client experiencing failures or lost messages if not properly implemented.</span></span> <span data-ttu-id="b8668-187">Além disso, você pode usar a propriedade [RetryPolicy](/dotnet/api/microsoft.servicebus.messaging.cliententity#Microsoft_ServiceBus_Messaging_ClientEntity_RetryPolicy) no cliente para controlar as opções de novas tentativas do cliente.</span><span class="sxs-lookup"><span data-stu-id="b8668-187">In addition, you can use the [RetryPolicy](/dotnet/api/microsoft.servicebus.messaging.cliententity#Microsoft_ServiceBus_Messaging_ClientEntity_RetryPolicy) property on the client to control client retry options.</span></span>

## <a name="create-a-partition-sender"></a><span data-ttu-id="b8668-188">Criar um remetente de partição</span><span class="sxs-lookup"><span data-stu-id="b8668-188">Create a partition sender</span></span>
<span data-ttu-id="b8668-189">Embora seja mais comum enviar eventos para um hub de eventos sem uma chave de partição, em alguns casos, você pode enviar eventos diretamente para uma determinada partição.</span><span class="sxs-lookup"><span data-stu-id="b8668-189">Although it is most common to send events to an event hub without a partition key, in some cases you might want to send events directly to a given partition.</span></span> <span data-ttu-id="b8668-190">Por exemplo:</span><span class="sxs-lookup"><span data-stu-id="b8668-190">For example:</span></span>

```csharp
var partitionedSender = client.CreatePartitionedSender(description.PartitionIds[0]);
```

<span data-ttu-id="b8668-191">[CreatePartitionedSender](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_CreatePartitionedSender_System_String_) retorna um objeto [EventHubSender](/dotnet/api/microsoft.servicebus.messaging.eventhubsender) que pode ser usado para publicar eventos em uma partição específica do hub de eventos.</span><span class="sxs-lookup"><span data-stu-id="b8668-191">[CreatePartitionedSender](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_CreatePartitionedSender_System_String_) returns an [EventHubSender](/dotnet/api/microsoft.servicebus.messaging.eventhubsender) object that you can use to publish events to a specific event hub partition.</span></span>

## <a name="event-consumers"></a><span data-ttu-id="b8668-192">Consumidores de evento</span><span class="sxs-lookup"><span data-stu-id="b8668-192">Event consumers</span></span>
<span data-ttu-id="b8668-193">O Hubs de Eventos tem dois modelos principais para consumo de eventos: receptores diretos e abstrações de nível superior, como [EventProcessorHost][].</span><span class="sxs-lookup"><span data-stu-id="b8668-193">Event Hubs has two primary models for event consumption: direct receivers and higher-level abstractions, such as [EventProcessorHost][].</span></span> <span data-ttu-id="b8668-194">Receptores diretos são responsáveis por sua própria coordenação de acesso a partições em um grupo de consumidores.</span><span class="sxs-lookup"><span data-stu-id="b8668-194">Direct receivers are responsible for their own coordination of access to partitions within a consumer group.</span></span>

### <a name="direct-consumer"></a><span data-ttu-id="b8668-195">Consumidor direto</span><span class="sxs-lookup"><span data-stu-id="b8668-195">Direct consumer</span></span>
<span data-ttu-id="b8668-196">A maneira mais direta de ler por meio de uma partição em um grupo de consumidores é usar a classe [EventHubReceiver](/dotnet/apie/microsoft.servicebus.messaging.eventhubreceiver) .</span><span class="sxs-lookup"><span data-stu-id="b8668-196">The most direct way to read from a partition within a consumer group is to use the [EventHubReceiver](/dotnet/apie/microsoft.servicebus.messaging.eventhubreceiver) class.</span></span> <span data-ttu-id="b8668-197">Para criar uma instância dessa classe, você deve usar uma instância da classe [EventHubConsumerGroup](/dotnet/api/microsoft.servicebus.messaging.eventhubconsumergroup) .</span><span class="sxs-lookup"><span data-stu-id="b8668-197">To create an instance of this class, you must use an instance of the [EventHubConsumerGroup](/dotnet/api/microsoft.servicebus.messaging.eventhubconsumergroup) class.</span></span> <span data-ttu-id="b8668-198">No exemplo de código a seguir, a ID da partição deve ser especificada ao criar o destinatário para o grupo de consumidores.</span><span class="sxs-lookup"><span data-stu-id="b8668-198">In the following example, the partition ID must be specified when creating the receiver for the consumer group.</span></span>

```csharp
EventHubConsumerGroup group = client.GetDefaultConsumerGroup();
var receiver = group.CreateReceiver(client.GetRuntimeInformation().PartitionIds[0]);
```

<span data-ttu-id="b8668-199">O método [CreateReceiver](/dotnet/api/microsoft.servicebus.messaging.eventhubconsumergroup#methods_summary) tem várias sobrecargas que facilitam o controle sobre o leitor que está sendo criado.</span><span class="sxs-lookup"><span data-stu-id="b8668-199">The [CreateReceiver](/dotnet/api/microsoft.servicebus.messaging.eventhubconsumergroup#methods_summary) method has several overloads that facilitate control over the reader being created.</span></span> <span data-ttu-id="b8668-200">Esses métodos incluem a especificação de um deslocamento como uma cadeia de caracteres ou um carimbo de data/hora e a capacidade de especificar se deseja incluir o deslocamento especificado no fluxo retornado ou iniciar depois dele.</span><span class="sxs-lookup"><span data-stu-id="b8668-200">These methods include specifying an offset as either a string or timestamp, and the ability to specify whether to include this specified offset in the returned stream, or start after it.</span></span> <span data-ttu-id="b8668-201">Depois de criar o receptor, você pode iniciar o recebimento de eventos no objeto retornado.</span><span class="sxs-lookup"><span data-stu-id="b8668-201">After you create the receiver, you can start receiving events on the returned object.</span></span> <span data-ttu-id="b8668-202">O método [Receber](/dotnet/api/microsoft.servicebus.messaging.eventhubreceiver#methods_summary) tem quatro sobrecargas que controlam os parâmetros da operação de recebimento, como tamanho de lote e tempo de espera.</span><span class="sxs-lookup"><span data-stu-id="b8668-202">The [Receive](/dotnet/api/microsoft.servicebus.messaging.eventhubreceiver#methods_summary) method has four overloads that control the receive operation parameters, such as batch size and wait time.</span></span> <span data-ttu-id="b8668-203">Você pode usar as versões assíncronas desses métodos para aumentar a taxa de transferência de um consumidor.</span><span class="sxs-lookup"><span data-stu-id="b8668-203">You can use the asynchronous versions of these methods to increase the throughput of a consumer.</span></span> <span data-ttu-id="b8668-204">Por exemplo:</span><span class="sxs-lookup"><span data-stu-id="b8668-204">For example:</span></span>

```csharp
bool receive = true;
string myOffset;
while(receive)
{
    var message = receiver.Receive();
    myOffset = message.Offset;
    string body = Encoding.UTF8.GetString(message.GetBytes());
    Console.WriteLine(String.Format("Received message offset: {0} \nbody: {1}", myOffset, body));
}
```

<span data-ttu-id="b8668-205">Em relação a uma partição específica, as mensagens são recebidas na ordem em que foram enviadas para o hub de eventos.</span><span class="sxs-lookup"><span data-stu-id="b8668-205">With respect to a specific partition, the messages are received in the order in which they were sent to the event hub.</span></span> <span data-ttu-id="b8668-206">O deslocamento é um token de cadeia de caracteres usado para identificar uma mensagem em uma partição.</span><span class="sxs-lookup"><span data-stu-id="b8668-206">The offset is a string token used to identify a message in a partition.</span></span>

<span data-ttu-id="b8668-207">Observe que uma única partição em um grupo de consumidores não pode ter mais de 5 leitores simultâneos conectados em algum momento.</span><span class="sxs-lookup"><span data-stu-id="b8668-207">Note that a single partition within a consumer group cannot have more than 5 concurrent readers connected at any time.</span></span> <span data-ttu-id="b8668-208">Conforme os leitores são conectados ou desconectados, suas sessões podem permanecer ativas por vários minutos antes que o serviço reconheça que foram desconectados.</span><span class="sxs-lookup"><span data-stu-id="b8668-208">As readers connect or become disconnected, their sessions might stay active for several minutes before the service recognizes that they have disconnected.</span></span> <span data-ttu-id="b8668-209">Durante esse tempo, a reconexão a uma partição pode falhar.</span><span class="sxs-lookup"><span data-stu-id="b8668-209">During this time, reconnecting to a partition may fail.</span></span> <span data-ttu-id="b8668-210">Para obter um exemplo completo de como gravar um destinatário direto para Hubs de Eventos, consulte o exemplo [Receptores diretos de Hubs de Eventos](https://code.msdn.microsoft.com/Event-Hub-Direct-Receivers-13fa95c6).</span><span class="sxs-lookup"><span data-stu-id="b8668-210">For a complete example of writing a direct receiver for Event Hubs, see the [Event Hubs Direct Receivers](https://code.msdn.microsoft.com/Event-Hub-Direct-Receivers-13fa95c6) sample.</span></span>

### <a name="event-processor-host"></a><span data-ttu-id="b8668-211">Host do processador de eventos</span><span class="sxs-lookup"><span data-stu-id="b8668-211">Event processor host</span></span>
<span data-ttu-id="b8668-212">A classe [EventProcessorHost][] processa dados de Hubs de Eventos.</span><span class="sxs-lookup"><span data-stu-id="b8668-212">The [EventProcessorHost][] class processes data from Event Hubs.</span></span> <span data-ttu-id="b8668-213">Você deve usar essa implementação ao criar os leitores de evento na plataforma .NET.</span><span class="sxs-lookup"><span data-stu-id="b8668-213">You should use this implementation when building event readers on the .NET platform.</span></span> <span data-ttu-id="b8668-214">[EventProcessorHost][] fornece um ambiente de tempo de execução seguro, thread-safe, de vários processos, para implementações de processador de eventos, que também fornece gerenciamento de concessão de ponto de verificação e partição.</span><span class="sxs-lookup"><span data-stu-id="b8668-214">[EventProcessorHost][] provides a thread-safe, multi-process, safe runtime environment for event processor implementations that also provides checkpointing and partition lease management.</span></span>

<span data-ttu-id="b8668-215">Para usar a classe [EventProcessorHost][], você pode implementar o [IEventProcessor](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor).</span><span class="sxs-lookup"><span data-stu-id="b8668-215">To use the [EventProcessorHost][] class, you can implement [IEventProcessor](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor).</span></span> <span data-ttu-id="b8668-216">Essa interface contém três métodos:</span><span class="sxs-lookup"><span data-stu-id="b8668-216">This interface contains three methods:</span></span>

* [<span data-ttu-id="b8668-217">OpenAsync</span><span class="sxs-lookup"><span data-stu-id="b8668-217">OpenAsync</span></span>](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor#Microsoft_ServiceBus_Messaging_IEventProcessor_OpenAsync_Microsoft_ServiceBus_Messaging_PartitionContext_)
* [<span data-ttu-id="b8668-218">CloseAsync</span><span class="sxs-lookup"><span data-stu-id="b8668-218">CloseAsync</span></span>](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor#Microsoft_ServiceBus_Messaging_IEventProcessor_CloseAsync_Microsoft_ServiceBus_Messaging_PartitionContext_Microsoft_ServiceBus_Messaging_CloseReason_)
* [<span data-ttu-id="b8668-219">ProcessEventsAsync</span><span class="sxs-lookup"><span data-stu-id="b8668-219">ProcessEventsAsync</span></span>](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor#Microsoft_ServiceBus_Messaging_IEventProcessor_ProcessEventsAsync_Microsoft_ServiceBus_Messaging_PartitionContext_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_EventData__)

<span data-ttu-id="b8668-220">Para iniciar o processamento de eventos, instancie o [EventProcessorHost][] fornecendo os parâmetros adequados para seu hub de eventos.</span><span class="sxs-lookup"><span data-stu-id="b8668-220">To start event processing, instantiate [EventProcessorHost][], providing the appropriate parameters for your event hub.</span></span> <span data-ttu-id="b8668-221">Em seguida, chame [RegisterEventProcessorAsync](/dotnet/api/microsoft.servicebus.messaging.eventprocessorhost#Microsoft_ServiceBus_Messaging_EventProcessorHost_RegisterEventProcessorAsync__1) para registrar sua implementação [IEventProcessor](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor) na execução.</span><span class="sxs-lookup"><span data-stu-id="b8668-221">Then, call [RegisterEventProcessorAsync](/dotnet/api/microsoft.servicebus.messaging.eventprocessorhost#Microsoft_ServiceBus_Messaging_EventProcessorHost_RegisterEventProcessorAsync__1) to register your [IEventProcessor](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor) implementation with the runtime.</span></span> <span data-ttu-id="b8668-222">Neste ponto, o host tentará adquirir uma concessão em todas as partições do hub de eventos usando um algoritmo “greedy”.</span><span class="sxs-lookup"><span data-stu-id="b8668-222">At this point, the host will attempt to acquire a lease on every partition in the event hub using a "greedy" algorithm.</span></span> <span data-ttu-id="b8668-223">Essas concessões vão durar por determinado período e, em seguida, devem ser renovadas.</span><span class="sxs-lookup"><span data-stu-id="b8668-223">These leases will last for a given timeframe and must then be renewed.</span></span> <span data-ttu-id="b8668-224">Como novos nós, as instâncias de trabalho, nesse caso, ficam online, colocam reservas de concessão e com o tempo, a carga é trocada entre os nós, à medida que cada uma tenta adquirir mais concessões.</span><span class="sxs-lookup"><span data-stu-id="b8668-224">As new nodes, worker instances in this case, come online, they place lease reservations and over time the load shifts between nodes as each attempts to acquire more leases.</span></span>

![Host do processador de eventos](./media/event-hubs-programming-guide/IC759863.png)

<span data-ttu-id="b8668-226">Ao longo do tempo, é estabelecido um equilíbrio.</span><span class="sxs-lookup"><span data-stu-id="b8668-226">Over time, an equilibrium is established.</span></span> <span data-ttu-id="b8668-227">Essa funcionalidade dinâmica permite que o dimensionamento automático com base em CPU seja aplicado aos consumidores de ampliação e redução de escala.</span><span class="sxs-lookup"><span data-stu-id="b8668-227">This dynamic capability enables CPU-based autoscaling to be applied to consumers for both scale-up and scale-down.</span></span> <span data-ttu-id="b8668-228">Como os Hubs de Eventos não têm um conceito direto de contagem de mensagens, a utilização média da CPU é, geralmente, o melhor mecanismo para medir back end ou escala do consumidor.</span><span class="sxs-lookup"><span data-stu-id="b8668-228">Because Event Hubs do not have a direct concept of message counts, average CPU utilization is often the best mechanism to measure back end or consumer scale.</span></span> <span data-ttu-id="b8668-229">Se os publicadores começam a publicar mais eventos do que os consumidores podem processar, o aumento de CPU nos consumidores pode ser usado para provocar escala automática na contagem de instâncias de trabalho.</span><span class="sxs-lookup"><span data-stu-id="b8668-229">If publishers begin to publish more events than consumers can process, the CPU increase on consumers can be used to cause an auto-scale on worker instance count.</span></span>

<span data-ttu-id="b8668-230">A classe [EventProcessorHost][] também implementa um mecanismo de verificação com base em armazenamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="b8668-230">The [EventProcessorHost][] class also implements an Azure storage-based checkpointing mechanism.</span></span> <span data-ttu-id="b8668-231">Esse mecanismo armazena o deslocamento por base de partição, de forma que cada consumidor pode determinar qual foi o último ponto de verificação do consumidor anterior.</span><span class="sxs-lookup"><span data-stu-id="b8668-231">This mechanism stores the offset on a per partition basis, so that each consumer can determine what the last checkpoint from the previous consumer was.</span></span> <span data-ttu-id="b8668-232">Conforme as partições fazem transição entre os nós por meio de concessões, esse é o mecanismo de sincronização que facilita a alternância de carga.</span><span class="sxs-lookup"><span data-stu-id="b8668-232">As partitions transition between nodes via leases, this is the synchronization mechanism that facilitates load shifting.</span></span>

## <a name="publisher-revocation"></a><span data-ttu-id="b8668-233">Revogação do publicador</span><span class="sxs-lookup"><span data-stu-id="b8668-233">Publisher revocation</span></span>
<span data-ttu-id="b8668-234">Além dos recursos avançados de tempo de execução do [EventProcessorHost][], os Hubs de Eventos permitem a revogação do editor para impedir que publicadores específicos enviem eventos para um hub de eventos.</span><span class="sxs-lookup"><span data-stu-id="b8668-234">In addition to the advanced run-time features of [EventProcessorHost][], Event Hubs enables publisher revocation in order to block specific publishers from sending event to an event hub.</span></span> <span data-ttu-id="b8668-235">Esses recursos serão especialmente úteis se o token do editor tiver sido comprometido ou uma atualização de software estiver causando um comportamento inadequado.</span><span class="sxs-lookup"><span data-stu-id="b8668-235">These features are particularly useful if a publisher token has been compromised, or a software update is causing them to behave inappropriately.</span></span> <span data-ttu-id="b8668-236">Nessas situações, a identidade do editor, que faz parte do token SAS, pode ser impedida de publicar eventos.</span><span class="sxs-lookup"><span data-stu-id="b8668-236">In these situations, the publisher's identity, which is part of their SAS token, can be blocked from publishing events.</span></span>

<span data-ttu-id="b8668-237">Para obter mais informações sobre a revogação do publicador e como enviar para os Hubs de Eventos como um publicador, consulte o exemplo [Publicação Segura em Larga Escala dos Hubs de Eventos](https://code.msdn.microsoft.com/Service-Bus-Event-Hub-99ce67ab).</span><span class="sxs-lookup"><span data-stu-id="b8668-237">For more information about publisher revocation and how to send to Event Hubs as a publisher, see the [Event Hubs Large Scale Secure Publishing](https://code.msdn.microsoft.com/Service-Bus-Event-Hub-99ce67ab) sample.</span></span>

## <a name="next-steps"></a><span data-ttu-id="b8668-238">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="b8668-238">Next steps</span></span>
<span data-ttu-id="b8668-239">Para saber mais sobre os cenários de Hubs de Eventos, consulte estes links:</span><span class="sxs-lookup"><span data-stu-id="b8668-239">To learn more about Event Hubs scenarios, visit these links:</span></span>

* [<span data-ttu-id="b8668-240">Visão geral de API de Hubs de Eventos</span><span class="sxs-lookup"><span data-stu-id="b8668-240">Event Hubs API overview</span></span>](event-hubs-api-overview.md)
* [<span data-ttu-id="b8668-241">O que são Hubs de Eventos</span><span class="sxs-lookup"><span data-stu-id="b8668-241">What is Event Hubs</span></span>](event-hubs-what-is-event-hubs.md)
* [<span data-ttu-id="b8668-242">Disponibilidade e consistência nos Hubs de Eventos</span><span class="sxs-lookup"><span data-stu-id="b8668-242">Availability and consistency in Event Hubs</span></span>](event-hubs-availability-and-consistency.md)
* [<span data-ttu-id="b8668-243">Referência de API do host de processador de eventos</span><span class="sxs-lookup"><span data-stu-id="b8668-243">Event processor host API reference</span></span>](/dotnet/api/microsoft.servicebus.messaging.eventprocessorhost)

<span data-ttu-id="b8668-244">[NamespaceManager]: /dotnet/api/microsoft.servicebus.namespacemanager</span><span class="sxs-lookup"><span data-stu-id="b8668-244">[NamespaceManager]: /dotnet/api/microsoft.servicebus.namespacemanager</span></span>
<span data-ttu-id="b8668-245">[EventHubClient]: /dotnet/api/microsoft.servicebus.messaging.eventhubclient</span><span class="sxs-lookup"><span data-stu-id="b8668-245">[EventHubClient]: /dotnet/api/microsoft.servicebus.messaging.eventhubclient</span></span>
<span data-ttu-id="b8668-246">[EventData]: /dotnet/api/microsoft.servicebus.messaging.eventdata</span><span class="sxs-lookup"><span data-stu-id="b8668-246">[EventData]: /dotnet/api/microsoft.servicebus.messaging.eventdata</span></span>
<span data-ttu-id="b8668-247">[CreateEventHubIfNotExists]: /dotnet/api/microsoft.servicebus.namespacemanager.createeventhubifnotexists</span><span class="sxs-lookup"><span data-stu-id="b8668-247">[CreateEventHubIfNotExists]: /dotnet/api/microsoft.servicebus.namespacemanager.createeventhubifnotexists</span></span>
<span data-ttu-id="b8668-248">[PartitionKey]: /dotnet/api/microsoft.servicebus.messaging.eventdata#Microsoft_ServiceBus_Messaging_EventData_PartitionKey</span><span class="sxs-lookup"><span data-stu-id="b8668-248">[PartitionKey]: /dotnet/api/microsoft.servicebus.messaging.eventdata#Microsoft_ServiceBus_Messaging_EventData_PartitionKey</span></span>
<span data-ttu-id="b8668-249">[EventProcessorHost]: /dotnet/api/microsoft.servicebus.messaging.eventprocessorhost</span><span class="sxs-lookup"><span data-stu-id="b8668-249">[EventProcessorHost]: /dotnet/api/microsoft.servicebus.messaging.eventprocessorhost</span></span>
