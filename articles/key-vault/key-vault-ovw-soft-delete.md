---
ms.assetid: 
title: "exclusão reversível do Cofre de chaves aaaAzure | Microsoft Docs"
ms.service: key-vault
author: BrucePerlerMS
ms.author: bruceper
manager: mbaldwin
ms.date: 07/10/2017
ms.openlocfilehash: 1b402c58db6f25ae4ae5e2720786fa81eb0e839a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="azure-key-vault-soft-delete-overview"></a><span data-ttu-id="040f7-102">Visão geral de exclusão reversível do Azure Key Vault</span><span class="sxs-lookup"><span data-stu-id="040f7-102">Azure Key Vault soft-delete overview</span></span>

<span data-ttu-id="040f7-103">Recurso de exclusão reversível do cofre da chave permite a recuperação de cofres Olá excluído e objetos de cofre, conhecidos como exclusão reversível.</span><span class="sxs-lookup"><span data-stu-id="040f7-103">Key Vault's soft delete feature allows recovery of hello deleted vaults and vault objects, known as soft-delete.</span></span> <span data-ttu-id="040f7-104">Especificamente, podemos endereço Olá os seguintes cenários:</span><span class="sxs-lookup"><span data-stu-id="040f7-104">Specifically, we address hello following scenarios:</span></span>

- <span data-ttu-id="040f7-105">Suporte à exclusão reversível de cofres de chaves</span><span class="sxs-lookup"><span data-stu-id="040f7-105">Support for recoverable deletion of a key vault</span></span>
- <span data-ttu-id="040f7-106">Suporte à exclusão recuperável de objetos do cofre de chaves (por exemplo,</span><span class="sxs-lookup"><span data-stu-id="040f7-106">Support for recoverable deletion of key vault objects (ex.</span></span> <span data-ttu-id="040f7-107">chaves, segredos, certificados)</span><span class="sxs-lookup"><span data-stu-id="040f7-107">keys, secrets, certificates)</span></span>

## <a name="supporting-interfaces"></a><span data-ttu-id="040f7-108">Interfaces de suporte</span><span class="sxs-lookup"><span data-stu-id="040f7-108">Supporting interfaces</span></span>

<span data-ttu-id="040f7-109">Olá recurso soft excluir está inicialmente disponível por meio Olá REST, .NET / interfaces do c# e do PowerShell.</span><span class="sxs-lookup"><span data-stu-id="040f7-109">hello soft-delete feature is initially available through hello REST, .NET/C# and PowerShell interfaces.</span></span> <span data-ttu-id="040f7-110">Para obter mais detalhes, consulte referências toohello [referência de chave de cofre](https://docs.microsoft.com/azure/key-vault/).</span><span class="sxs-lookup"><span data-stu-id="040f7-110">Refer toohello references for these for more details, [Key Vault Reference](https://docs.microsoft.com/azure/key-vault/).</span></span>

## <a name="scenarios"></a><span data-ttu-id="040f7-111">Cenários</span><span class="sxs-lookup"><span data-stu-id="040f7-111">Scenarios</span></span>

<span data-ttu-id="040f7-112">Os Azure Key Vaults são recursos controlados, gerenciados pelo Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="040f7-112">Azure Key Vaults are tracked resources, managed by Azure Resource Manager.</span></span> <span data-ttu-id="040f7-113">O Azure Resource Manager também especifica um comportamento bem definido para a exclusão, que exige que uma operação DELETE bem-sucedida faça com que esse recurso não esteja mais acessível.</span><span class="sxs-lookup"><span data-stu-id="040f7-113">Azure Resource Manager also specifies a well-defined behavior for deletion, which requires that a successful DELETE operation must result in that resource not being accessible anymore.</span></span> <span data-ttu-id="040f7-114">endereços de recurso de exclusão reversível Olá Olá recuperação do objeto Olá excluído, se a exclusão de saudação foi acidental ou intencional.</span><span class="sxs-lookup"><span data-stu-id="040f7-114">hello soft-delete feature addresses hello recovery of hello deleted object, whether hello deletion was accidental or intentional.</span></span>

1. <span data-ttu-id="040f7-115">No cenário típico de saudação, um usuário pode ter inadvertidamente excluído um cofre de chaves ou um objeto de Cofre de chaves. Se esse Cofre de chaves ou uma chave de cofre objeto foram toobe recuperáveis por um período predeterminado, o usuário de saudação pode desfazer a exclusão de saudação e recuperar seus dados.</span><span class="sxs-lookup"><span data-stu-id="040f7-115">In hello typical scenario, a user may have inadvertently deleted a key vault or a key vault object; if that key vault or key vault object were toobe recoverable for a predetermined period, hello user may undo hello deletion and recover their data.</span></span>

2. <span data-ttu-id="040f7-116">Em um cenário diferente, um usuário mal-intencionado pode tentar toodelete um cofre de chaves ou um objeto de Cofre de chaves, como uma chave dentro de um cofre, toocause uma interrupção dos negócios.</span><span class="sxs-lookup"><span data-stu-id="040f7-116">In a different scenario, a rogue user may attempt toodelete a key vault or a key vault object, such as a key inside a vault, toocause a business disruption.</span></span> <span data-ttu-id="040f7-117">Separar a exclusão de saudação do Cofre de chaves hello ou objeto de Cofre de chaves de exclusão real de saudação do hello dados subjacentes pode ser usado como uma medida de segurança, por exemplo, restringindo as permissões de tooa de exclusão de dados diferente, confiável de função.</span><span class="sxs-lookup"><span data-stu-id="040f7-117">Separating hello deletion of hello key vault or key vault object from hello actual deletion of hello underlying data can be used as a safety measure by, for instance, restricting permissions on data deletion tooa different, trusted role.</span></span> <span data-ttu-id="040f7-118">Essa abordagem efetivamente exige quorum para uma operação que, de outro modo, poderá resultar em uma perda de dados imediata.</span><span class="sxs-lookup"><span data-stu-id="040f7-118">This approach effectively requires quorum for an operation which might otherwise result in an immediate data loss.</span></span>

### <a name="soft-delete-behavior"></a><span data-ttu-id="040f7-119">Comportamento de exclusão reversível</span><span class="sxs-lookup"><span data-stu-id="040f7-119">Soft-delete behavior</span></span>

<span data-ttu-id="040f7-120">Com esse recurso, Olá a operação de exclusão em um cofre de chaves ou objeto de Cofre de chaves é um software-delete, mantendo efetivamente recursos Olá por um período de retenção especificado, enquanto dando a aparência de saudação objeto Olá é excluído.</span><span class="sxs-lookup"><span data-stu-id="040f7-120">With this feature, hello DELETE operation on a key vault or key vault object is a soft-delete, effectively holding hello resources for a given retention period, while giving hello appearance that hello object is deleted.</span></span> <span data-ttu-id="040f7-121">serviço de saudação ainda mais fornece um mecanismo para recuperar o objeto Olá excluído, essencialmente, desfazendo exclusão hello.</span><span class="sxs-lookup"><span data-stu-id="040f7-121">hello service further provides a mechanism for recovering hello deleted object, essentially undoing hello deletion.</span></span> 

<span data-ttu-id="040f7-122">A exclusão reversível é um comportamento opcional do Key Vault e **não está habilitado por padrão** nesta versão.</span><span class="sxs-lookup"><span data-stu-id="040f7-122">Soft-delete is an optional Key Vault behavior and is **not enabled by default** in this release.</span></span> <span data-ttu-id="040f7-123">Para obter detalhes sobre como habilitar a exclusão reversível para seu Cofre de chaves, consulte Olá orientação específica sobre referência de saudação para interface de saudação de sua escolha, [referência de chave de cofre](https://docs.microsoft.com/azure/key-vault/).</span><span class="sxs-lookup"><span data-stu-id="040f7-123">For details on enabling soft-delete for your key vault, see hello specific guidance in hello reference for hello interface of your choice, [Key Vault Reference](https://docs.microsoft.com/azure/key-vault/).</span></span>

### <a name="key-vault-recovery"></a><span data-ttu-id="040f7-124">Recuperação do cofre de chaves</span><span class="sxs-lookup"><span data-stu-id="040f7-124">Key vault recovery</span></span>

<span data-ttu-id="040f7-125">Após excluir um cofre de chaves, serviço Olá cria um recurso de proxy na assinatura hello, adicionar metadados suficientes para recuperação.</span><span class="sxs-lookup"><span data-stu-id="040f7-125">Upon deleting a key vault, hello service creates a proxy resource under hello subscription, adding sufficient metadata for recovery.</span></span> <span data-ttu-id="040f7-126">recursos de proxy de saudação é um objeto armazenado, disponível no hello mesmo local que o Cofre de chaves Olá excluído.</span><span class="sxs-lookup"><span data-stu-id="040f7-126">hello proxy resource is a stored object, available in hello same location as hello deleted key vault.</span></span> 

### <a name="key-vault-object-recovery"></a><span data-ttu-id="040f7-127">Recuperação de objetos do cofre de chaves</span><span class="sxs-lookup"><span data-stu-id="040f7-127">Key vault object recovery</span></span>

<span data-ttu-id="040f7-128">Após a exclusão de um objeto de Cofre de chaves, como uma chave, serviço Olá colocará objeto Olá em estado excluído, tornando as operações de recuperação de tooany inacessível.</span><span class="sxs-lookup"><span data-stu-id="040f7-128">Upon deleting a key vault object, such as a key, hello service will place hello object in a deleted state, thus making it inaccessible tooany retrieval operations.</span></span> <span data-ttu-id="040f7-129">Nesse estado, objeto de chave de cofre Olá só pode ser listado, recuperado, ou forçar/será excluída permanentemente.</span><span class="sxs-lookup"><span data-stu-id="040f7-129">While in this state, hello key vault object can only be listed, recovered, or forcefully/permanently deleted.</span></span> 

<span data-ttu-id="040f7-130">Em Olá mesmo tempo, chave de cofre agendará exclusão de saudação do hello subjacente toohello correspondente de dados excluído Cofre de chaves ou objeto de Cofre de chaves para execução após um intervalo de retenção predeterminado.</span><span class="sxs-lookup"><span data-stu-id="040f7-130">At hello same time, Key Vault will schedule hello deletion of hello underlying data corresponding toohello deleted key vault or key vault object for execution after a predetermined retention interval.</span></span> <span data-ttu-id="040f7-131">Olá DNS registro toohello cofre correspondente também é mantido por duração de saudação do intervalo de retenção de saudação.</span><span class="sxs-lookup"><span data-stu-id="040f7-131">hello DNS record corresponding toohello vault is also retained for hello duration of hello retention interval.</span></span>

### <a name="soft-delete-retention-period"></a><span data-ttu-id="040f7-132">Período de retenção da exclusão reversível</span><span class="sxs-lookup"><span data-stu-id="040f7-132">Soft-delete retention period</span></span>

<span data-ttu-id="040f7-133">Os recursos excluídos de maneira reversível são mantidos por um período definido de tempo, 90 dias.</span><span class="sxs-lookup"><span data-stu-id="040f7-133">Soft deleted resources are retained for a set period of time, 90 days.</span></span> <span data-ttu-id="040f7-134">Durante o intervalo de retenção de exclusão reversível hello, Olá seguinte se aplica:</span><span class="sxs-lookup"><span data-stu-id="040f7-134">During hello soft-delete retention interval, hello following apply:</span></span>

- <span data-ttu-id="040f7-135">Você pode listar todos os cofres chave hello e objetos de Cofre de chaves em estado de exclusão reversível Olá para sua assinatura bem como informações de exclusão e recuperação de acesso sobre eles.</span><span class="sxs-lookup"><span data-stu-id="040f7-135">You may list all of hello key vaults and key vault objects in hello soft-delete state for your subscription as well as access deletion and recovery information about them.</span></span>
    - <span data-ttu-id="040f7-136">Somente usuários com permissões especiais podem listar os cofres excluídos.</span><span class="sxs-lookup"><span data-stu-id="040f7-136">Only users with special permissions can list deleted vaults.</span></span> <span data-ttu-id="040f7-137">Recomendamos que nossos usuários criem uma função personalizada com essas permissões especiais para a manipulação dos cofres excluídos.</span><span class="sxs-lookup"><span data-stu-id="040f7-137">We recommend that our users create a custom role with these special permissions for handling deleted vaults.</span></span>
- <span data-ttu-id="040f7-138">Um cofre de chaves com hello mesmo nome não pode ser criado em Olá mesmo local. de forma correspondente, um objeto de Cofre de chaves não pode ser criado um determinado cofre se o Cofre de chaves que contém um objeto com hello mesmo nome e que está no estado excluído</span><span class="sxs-lookup"><span data-stu-id="040f7-138">A key vault with hello same name cannot be created in hello same location; correspondingly, a key vault object cannot be created in a given vault if that key vault contains an object with hello same name and which is in a deleted state</span></span> 
- <span data-ttu-id="040f7-139">Apenas um usuário privilegiado especificamente pode restaurar um cofre de chaves ou o objeto de Cofre de chaves ao emitir um comando de recuperação no recurso de proxy Olá correspondente.</span><span class="sxs-lookup"><span data-stu-id="040f7-139">Only a specifically privileged user may restore a key vault or key vault object by issuing a recover command on hello corresponding proxy resource.</span></span>
    - <span data-ttu-id="040f7-140">usuário Hello, membro de função personalizada de Olá, com Olá privilégio toocreate um cofre de chaves em um grupo de recursos de saudação pode restaurar cofre hello.</span><span class="sxs-lookup"><span data-stu-id="040f7-140">hello user, member of hello custom role, who has hello privilege toocreate a key vault under hello resource group can restore hello vault.</span></span>
- <span data-ttu-id="040f7-141">Somente um usuário com privilégios especificamente à força pode excluir um cofre de chaves ou o objeto de Cofre de chaves ao emitir um comando delete no recurso de proxy Olá correspondente.</span><span class="sxs-lookup"><span data-stu-id="040f7-141">Only a specifically privileged user may forcibly delete a key vault or key vault object by issuing a delete command on hello corresponding proxy resource.</span></span>

<span data-ttu-id="040f7-142">A menos que um cofre de chaves ou o objeto de Cofre de chaves é recuperado, a saudação final do serviço de saudação do intervalo de retenção de saudação executa uma limpeza do Cofre de chaves Olá excluídos por software ou objeto de Cofre de chaves e seu conteúdo.</span><span class="sxs-lookup"><span data-stu-id="040f7-142">Unless a key vault or key vault object is recovered, at hello end of hello retention interval hello service performs a purge of hello soft-deleted key vault or key vault object and its content.</span></span> <span data-ttu-id="040f7-143">A exclusão de recursos não pode ser reagendada.</span><span class="sxs-lookup"><span data-stu-id="040f7-143">Resource deletion may not be rescheduled.</span></span>

### <a name="permitted-purge"></a><span data-ttu-id="040f7-144">Limpeza permitida</span><span class="sxs-lookup"><span data-stu-id="040f7-144">Permitted purge</span></span>

<span data-ttu-id="040f7-145">Permanentemente excluindo, limpeza, um cofre de chaves é possível por meio de uma operação POST no recurso de proxy hello e requer privilégios especiais.</span><span class="sxs-lookup"><span data-stu-id="040f7-145">Permanently deleting, purging, a key vault is possible via a POST operation on hello proxy resource and requires special privileges.</span></span> <span data-ttu-id="040f7-146">Em geral, proprietário da assinatura Olá só será capaz de toopurge um cofre de chaves.</span><span class="sxs-lookup"><span data-stu-id="040f7-146">Generally, only hello subscription owner will be able toopurge a key vault.</span></span> <span data-ttu-id="040f7-147">gatilhos de operação POST Olá Olá exclusão imediata e irrecuperável de que os.</span><span class="sxs-lookup"><span data-stu-id="040f7-147">hello POST operation triggers hello immediate and irrecoverable deletion of that vault.</span></span> 

<span data-ttu-id="040f7-148">Toothis uma exceção é o caso de Olá Olá assinatura do Azure foi marcada como *não excluível*.</span><span class="sxs-lookup"><span data-stu-id="040f7-148">An exception toothis is hello case when hello Azure subscription has been marked as *undeletable*.</span></span> <span data-ttu-id="040f7-149">Nesse caso, apenas o serviço de saudação pode executar exclusão real hello e faz isso como um processo agendado.</span><span class="sxs-lookup"><span data-stu-id="040f7-149">In this case, only hello service may then perform hello actual deletion, and does so as a scheduled process.</span></span> 



