---
title: "Publicar aplicativos HDInsight – Azure | Microsoft Docs"
description: Aprenda a criar e publicar aplicativos do HDInsight.
services: hdinsight
documentationcenter: 
author: mumian
manager: jhubbard
editor: cgronlun
tags: azure-portal
ms.assetid: 14aef891-7a37-4cf1-8f7d-ca923565c783
ms.service: hdinsight
ms.custom: hdinsightactive
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 05/25/2017
ms.author: jgao
ms.openlocfilehash: 6aa66cac35bc317fc87003e6c3d824544c53de88
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/11/2017
---
# <a name="publish-hdinsight-applications-into-the-azure-marketplace"></a><span data-ttu-id="352fe-103">Publicar aplicativos do HDInsight no Azure Marketplace</span><span class="sxs-lookup"><span data-stu-id="352fe-103">Publish HDInsight applications into the Azure Marketplace</span></span>
<span data-ttu-id="352fe-104">Um aplicativo do HDInsight é um aplicativo que os usuários podem instalar em um cluster HDInsight baseado em Linux.</span><span class="sxs-lookup"><span data-stu-id="352fe-104">An HDInsight application is an application that users can install on a Linux-based HDInsight cluster.</span></span> <span data-ttu-id="352fe-105">Esses aplicativos podem ser desenvolvidos pela Microsoft, por ISVs (fornecedores independentes de software) ou por conta própria.</span><span class="sxs-lookup"><span data-stu-id="352fe-105">These applications can be developed by Microsoft, independent software vendors (ISV) or by yourself.</span></span> <span data-ttu-id="352fe-106">Neste artigo, você aprende a publicar um aplicativo do HDInsight no Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="352fe-106">In this article, you learn how to publish an HDInsight application into the Azure Marketplace.</span></span>  <span data-ttu-id="352fe-107">Para obter informações gerais sobre a publicação no Azure Marketplace, confira [Publicar uma oferta no Azure Marketplace](../marketplace-publishing/marketplace-publishing-getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="352fe-107">For general information about publishing into the Azure Marketplace, see [publish an offer to the Azure Marketplace](../marketplace-publishing/marketplace-publishing-getting-started.md).</span></span>

<span data-ttu-id="352fe-108">Os aplicativos do HDInsight usam o modelo *BYOL (traga sua própria licença)* , em que o provedor do aplicativo é responsável por licenciar o aplicativo aos usuários finais e estes são cobrados pelo Azure apenas pelos recursos que criarem, como o cluster HDInsight e seus nós/VMs.</span><span class="sxs-lookup"><span data-stu-id="352fe-108">HDInsight applications use the *Bring Your Own License (BYOL)* model, where application provider is responsible for licensing the application to end-users, and end-users are only charged by Azure for the resources they create, such as the HDInsight cluster and its VMs/nodes.</span></span> <span data-ttu-id="352fe-109">Atualmente, a cobrança do aplicativo propriamente dito não é feita pelo Azure.</span><span class="sxs-lookup"><span data-stu-id="352fe-109">Currently, billing for the application itself is not done through Azure.</span></span>

<span data-ttu-id="352fe-110">Outro artigo relacionado ao aplicativo do HDInsight:</span><span class="sxs-lookup"><span data-stu-id="352fe-110">Other HDInsight application-related article:</span></span>

* <span data-ttu-id="352fe-111">[Instalar aplicativos do HDInsight](hdinsight-apps-install-applications.md): saiba como instalar um aplicativo do HDInsight em seus clusters.</span><span class="sxs-lookup"><span data-stu-id="352fe-111">[Install HDInsight applications](hdinsight-apps-install-applications.md): Learn how to install an HDInsight application to your clusters.</span></span>
* <span data-ttu-id="352fe-112">[Instalar aplicativos personalizados do HDInsight](hdinsight-apps-install-custom-applications.md): saiba como instalar e testar aplicativos personalizados do HDInsight.</span><span class="sxs-lookup"><span data-stu-id="352fe-112">[Install custom HDInsight applications](hdinsight-apps-install-custom-applications.md): Learn how to install and test custom HDInsight applications.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="352fe-113">Pré-requisitos</span><span class="sxs-lookup"><span data-stu-id="352fe-113">Prerequisites</span></span>
<span data-ttu-id="352fe-114">Para enviar seu aplicativo personalizado ao marketplace, você deverá ter criado e testado seu aplicativo personalizado.</span><span class="sxs-lookup"><span data-stu-id="352fe-114">To submit your custom application to the marketplace, you must have created and tested your custom application.</span></span> <span data-ttu-id="352fe-115">Confira os seguintes artigos:</span><span class="sxs-lookup"><span data-stu-id="352fe-115">See the following articles:</span></span>

* <span data-ttu-id="352fe-116">[Instalar aplicativos personalizados do HDInsight](hdinsight-apps-install-custom-applications.md): saiba como instalar e testar aplicativos personalizados do HDInsight.</span><span class="sxs-lookup"><span data-stu-id="352fe-116">[Install custom HDInsight applications](hdinsight-apps-install-custom-applications.md): Learn how to install and test custom HDInsight applications.</span></span>

<span data-ttu-id="352fe-117">Você também deve ter registrado sua conta de desenvolvedor.</span><span class="sxs-lookup"><span data-stu-id="352fe-117">You must also have registered your developer account.</span></span> <span data-ttu-id="352fe-118">Confira [Publicar uma oferta no Azure Marketplace](../marketplace-publishing/marketplace-publishing-getting-started.md) e [Criar uma conta do Microsoft Developer](../marketplace-publishing/marketplace-publishing-accounts-creation-registration.md).</span><span class="sxs-lookup"><span data-stu-id="352fe-118">See [publish an offer to the Azure Marketplace](../marketplace-publishing/marketplace-publishing-getting-started.md) and [Create a Microsoft Developer account](../marketplace-publishing/marketplace-publishing-accounts-creation-registration.md).</span></span>

## <a name="define-application"></a><span data-ttu-id="352fe-119">Definir o aplicativo</span><span class="sxs-lookup"><span data-stu-id="352fe-119">Define application</span></span>
<span data-ttu-id="352fe-120">Há duas etapas envolvidas na publicação de aplicativos no Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="352fe-120">There are two steps involved for publishing applications to the Azure Marketplace.</span></span>  <span data-ttu-id="352fe-121">Primeiro, defina um arquivo **createUiDef.json** para indicar com quais clusters seu aplicativo é compatível. Em seguida, publique o modelo no portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="352fe-121">First you define a **createUiDef.json** file to indicate which clusters your application is compatible with; and then you publish the template from the Azure portal.</span></span> <span data-ttu-id="352fe-122">A seção seguir é um arquivo createUiDef.json de exemplo.</span><span class="sxs-lookup"><span data-stu-id="352fe-122">The following section is a sample createUiDef.json file.</span></span>

    {
        "handler": "Microsoft.HDInsight",
        "version": "0.0.1-preview",
        "clusterFilters": {
            "types": ["Hadoop", "HBase", "Storm", "Spark"],
            "tiers": ["Standard", "Premium"],
            "versions": ["3.4"]
        }
    }


| <span data-ttu-id="352fe-123">Campo</span><span class="sxs-lookup"><span data-stu-id="352fe-123">Field</span></span> | <span data-ttu-id="352fe-124">Descrição</span><span class="sxs-lookup"><span data-stu-id="352fe-124">Description</span></span> | <span data-ttu-id="352fe-125">Valores possíveis</span><span class="sxs-lookup"><span data-stu-id="352fe-125">Possible values</span></span> |
| --- | --- | --- |
| <span data-ttu-id="352fe-126">tipos</span><span class="sxs-lookup"><span data-stu-id="352fe-126">types</span></span> |<span data-ttu-id="352fe-127">Os tipos de cluster com os quais o aplicativo é compatível.</span><span class="sxs-lookup"><span data-stu-id="352fe-127">The cluster types that the application is compatible with.</span></span> |<span data-ttu-id="352fe-128">Hadoop, HBase, Storm, Spark (ou qualquer combinação destes)</span><span class="sxs-lookup"><span data-stu-id="352fe-128">Hadoop, HBase, Storm, Spark, (or any combination of these)</span></span> |
| <span data-ttu-id="352fe-129">camadas</span><span class="sxs-lookup"><span data-stu-id="352fe-129">tiers</span></span> |<span data-ttu-id="352fe-130">As camadas de cluster com as quais o aplicativo é compatível.</span><span class="sxs-lookup"><span data-stu-id="352fe-130">The cluster tiers that the application is compatible with.</span></span> |<span data-ttu-id="352fe-131">Standard, Premium (ou ambos)</span><span class="sxs-lookup"><span data-stu-id="352fe-131">Standard, Premium, (or both)</span></span> |
| <span data-ttu-id="352fe-132">versões</span><span class="sxs-lookup"><span data-stu-id="352fe-132">versions</span></span> |<span data-ttu-id="352fe-133">Os tipos de cluster HDInsight com os quais o aplicativo é compatível.</span><span class="sxs-lookup"><span data-stu-id="352fe-133">The HDInsight cluster types that the application is compatible with.</span></span> |<span data-ttu-id="352fe-134">3.4</span><span class="sxs-lookup"><span data-stu-id="352fe-134">3.4</span></span> |

## <a name="application-install-script"></a><span data-ttu-id="352fe-135">Script de instalação do aplicativo</span><span class="sxs-lookup"><span data-stu-id="352fe-135">Application install script</span></span>
<span data-ttu-id="352fe-136">Sempre que um aplicativo é instalado em um cluster (já existente ou um novo), um nó de borda é criado e o script de instalação do aplicativo é executado nele.</span><span class="sxs-lookup"><span data-stu-id="352fe-136">Whenever an application is installed on a cluster (either an existing one or a new one), an edge node is created and the application install script is run on it.</span></span>
  > [!IMPORTANT]
  > <span data-ttu-id="352fe-137">O nome dos nomes de script de instalação de aplicativo deve ser exclusivo para determinado cluster com o formato a seguir.</span><span class="sxs-lookup"><span data-stu-id="352fe-137">The name of the application install script names must be unique for a particular cluster with the following format.</span></span>
  > 
  > <span data-ttu-id="352fe-138">name": "[concat('hue-install-v0','-' ,uniquestring(‘applicationName’)]"</span><span class="sxs-lookup"><span data-stu-id="352fe-138">name": "[concat('hue-install-v0','-' ,uniquestring(‘applicationName’)]"</span></span>
  > 
  > <span data-ttu-id="352fe-139">Observe que há três partes no nome do script:</span><span class="sxs-lookup"><span data-stu-id="352fe-139">Note there are three parts to the script name:</span></span>
  > 
  > 1. <span data-ttu-id="352fe-140">Um prefixo de nome de script, que deve incluir o nome do aplicativo ou um nome relevante para o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="352fe-140">A script name prefix, which shall include either the application name or a name relevant to the application.</span></span>
  > 2. <span data-ttu-id="352fe-141">Um "-" para facilitar a leitura.</span><span class="sxs-lookup"><span data-stu-id="352fe-141">A "-" for readability.</span></span>
  > 3. <span data-ttu-id="352fe-142">Uma função de cadeia de caracteres exclusiva com o nome do aplicativo como o parâmetro.</span><span class="sxs-lookup"><span data-stu-id="352fe-142">A unique string function with the application name as the parameter.</span></span>
  > 
  > <span data-ttu-id="352fe-143">O exemplo acima acaba se tornando: hue-install-v0-4wkahss55hlas na lista de ação de script persistente.</span><span class="sxs-lookup"><span data-stu-id="352fe-143">An example is the above ends up becoming: hue-install-v0-4wkahss55hlas in the persisted script action list.</span></span> <span data-ttu-id="352fe-144">Para uma carga JSON de exemplo, consulte [https://raw.githubusercontent.com/hdinsight/Iaas-Applications/master/Hue/azuredeploy.json](https://raw.githubusercontent.com/hdinsight/Iaas-Applications/master/Hue/azuredeploy.json).</span><span class="sxs-lookup"><span data-stu-id="352fe-144">For a sample JSON payload, see [https://raw.githubusercontent.com/hdinsight/Iaas-Applications/master/Hue/azuredeploy.json](https://raw.githubusercontent.com/hdinsight/Iaas-Applications/master/Hue/azuredeploy.json).</span></span>
  > 
<span data-ttu-id="352fe-145">O script de instalação deve ter as seguintes características:</span><span class="sxs-lookup"><span data-stu-id="352fe-145">The installation script must have the following characteristics:</span></span>
1. <span data-ttu-id="352fe-146">Certifique-se de que o script seja idempotente.</span><span class="sxs-lookup"><span data-stu-id="352fe-146">Ensure that the script is idempotent.</span></span> <span data-ttu-id="352fe-147">Várias chamadas para o script devem produzir o mesmo resultado.</span><span class="sxs-lookup"><span data-stu-id="352fe-147">Multiple calls to the script should produce the same result.</span></span>
2. <span data-ttu-id="352fe-148">O script deve ter um controle de versão apropriado.</span><span class="sxs-lookup"><span data-stu-id="352fe-148">The script should be properly versioned.</span></span> <span data-ttu-id="352fe-149">Use um local diferente para o script quando você estiver atualizando ou testando alterações, para que os clientes que estão tentando instalar o aplicativo não sejam afetados.</span><span class="sxs-lookup"><span data-stu-id="352fe-149">Use a different location for the script when you are upgrading or testing out changes so that customers that are trying to install the application are not affected.</span></span> 
3. <span data-ttu-id="352fe-150">Adicione um registro em log adequado para os scripts em cada ponto.</span><span class="sxs-lookup"><span data-stu-id="352fe-150">Add adequate logging to the scripts at each point.</span></span> <span data-ttu-id="352fe-151">Normalmente, os logs de script são a única maneira de depurar problemas de instalação do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="352fe-151">Usually the script logs are the only way to debug application installation issues.</span></span>
4. <span data-ttu-id="352fe-152">Verifique se as chamadas para serviços ou recursos externos têm repetições adequadas, para que a instalação não seja afetada por problemas temporários de rede.</span><span class="sxs-lookup"><span data-stu-id="352fe-152">Ensure that calls to external services or resources have adequate retries so that the installation is not affected by transient network issues.</span></span>
5. <span data-ttu-id="352fe-153">Se o script estiver iniciando serviços em nós, certifique-se de que os serviços sejam monitorados e configurados para iniciar automaticamente no caso de reinicializações de nó.</span><span class="sxs-lookup"><span data-stu-id="352fe-153">If your script is starting services on the nodes, ensure that the services are monitored and configured to start automatically in case of node reboots.</span></span>

## <a name="package-application"></a><span data-ttu-id="352fe-154">Aplicativo de pacote</span><span class="sxs-lookup"><span data-stu-id="352fe-154">Package application</span></span>
<span data-ttu-id="352fe-155">Crie um arquivo zip que contém todos os arquivos necessários para instalar os aplicativos do HDInsight.</span><span class="sxs-lookup"><span data-stu-id="352fe-155">Create a zip file that contains all required files for installing your HDInsight applications.</span></span> <span data-ttu-id="352fe-156">Você precisará do arquivo zip em [Publicar aplicativo](#publish-application).</span><span class="sxs-lookup"><span data-stu-id="352fe-156">You need the zip file in [Publish application](#publish-application).</span></span>

* <span data-ttu-id="352fe-157">[createUiDefinition.json](#define-application).</span><span class="sxs-lookup"><span data-stu-id="352fe-157">[createUiDefinition.json](#define-application).</span></span>
* <span data-ttu-id="352fe-158">mainTemplate.json.</span><span class="sxs-lookup"><span data-stu-id="352fe-158">mainTemplate.json.</span></span> <span data-ttu-id="352fe-159">Confira um exemplo em [Instalar aplicativos personalizados do HDInsight](hdinsight-apps-install-custom-applications.md).</span><span class="sxs-lookup"><span data-stu-id="352fe-159">See a sample at [Install custom HDInsight applications](hdinsight-apps-install-custom-applications.md).</span></span>
* <span data-ttu-id="352fe-160">Todos os scripts obrigatórios.</span><span class="sxs-lookup"><span data-stu-id="352fe-160">All required scripts.</span></span>

> [!NOTE]
> <span data-ttu-id="352fe-161">Os arquivos do aplicativo (incluindo arquivos de aplicativo Web, se houver) podem estar localizados em qualquer ponto de extremidade publicamente acessível.</span><span class="sxs-lookup"><span data-stu-id="352fe-161">The application files (including web application files if there is any) can be located on any publicly accessible endpoint.</span></span>
> 

## <a name="publish-application"></a><span data-ttu-id="352fe-162">aplicativo Publicar</span><span class="sxs-lookup"><span data-stu-id="352fe-162">Publish application</span></span>
<span data-ttu-id="352fe-163">Siga as etapas a seguir para publicar um aplicativo do HDInsight:</span><span class="sxs-lookup"><span data-stu-id="352fe-163">Follow the following steps to publish an HDInsight application:</span></span>

1. <span data-ttu-id="352fe-164">Entre no [Portal de Publicação do Azure](https://publish.windowsazure.com/).</span><span class="sxs-lookup"><span data-stu-id="352fe-164">Sign on to the [Azure Publishing portal](https://publish.windowsazure.com/).</span></span>
2. <span data-ttu-id="352fe-165">Clique em **Modelos de solução** à esquerda para criar um novo modelo de solução.</span><span class="sxs-lookup"><span data-stu-id="352fe-165">Click **Solution templates** from the left to create a new solution template.</span></span>
3. <span data-ttu-id="352fe-166">Digite um título e clique em **Criar um novo modelo de solução**.</span><span class="sxs-lookup"><span data-stu-id="352fe-166">Enter a title, and then click **Create a new solution template**.</span></span>
4. <span data-ttu-id="352fe-167">Clique em **Criar conta do Centro de Desenvolvimento e ingressar no programa do Azure** para registrar sua empresa, se ainda não tiver feito isso.</span><span class="sxs-lookup"><span data-stu-id="352fe-167">Click **Create Dev Center account and join the Azure program** to register your company if you haven't done so.</span></span>  <span data-ttu-id="352fe-168">Confira [Criar uma conta do Microsoft Developer](../marketplace-publishing/marketplace-publishing-accounts-creation-registration.md).</span><span class="sxs-lookup"><span data-stu-id="352fe-168">See [Create a Microsoft Developer account](../marketplace-publishing/marketplace-publishing-accounts-creation-registration.md).</span></span>
5. <span data-ttu-id="352fe-169">Clique em **Definir algumas topologias para começar**.</span><span class="sxs-lookup"><span data-stu-id="352fe-169">Click **Define some Topologies to get Started**.</span></span> <span data-ttu-id="352fe-170">Um modelo de solução é um "pai" para todas as respectivas topologias.</span><span class="sxs-lookup"><span data-stu-id="352fe-170">A solution template is a "parent" to all its topologies.</span></span> <span data-ttu-id="352fe-171">Você pode definir várias topologias em uma oferta/modelo de solução.</span><span class="sxs-lookup"><span data-stu-id="352fe-171">You can define multiple topologies in one offer/solution template.</span></span> <span data-ttu-id="352fe-172">Quando uma oferta é enviada por push para preparo, todas as respectivas topologias a acompanham.</span><span class="sxs-lookup"><span data-stu-id="352fe-172">When an offer is pushed to staging, it is pushed with all its topologies.</span></span> 
6. <span data-ttu-id="352fe-173">Insira um nome de topologia e clique no sinal de adição.</span><span class="sxs-lookup"><span data-stu-id="352fe-173">Enter a topology name, and then click the plus sign.</span></span>
7. <span data-ttu-id="352fe-174">Insira uma nova versão e clique no sinal de adição.</span><span class="sxs-lookup"><span data-stu-id="352fe-174">Enter a new version, and then click the Plus sign.</span></span>
8. <span data-ttu-id="352fe-175">Carregue o arquivo zip preparado no [Aplicativo Empacotar](#package-application).</span><span class="sxs-lookup"><span data-stu-id="352fe-175">Upload the zip file prepared in [Package application](#package-application).</span></span>  
9. <span data-ttu-id="352fe-176">Clique em **Solicitar Certificação**.</span><span class="sxs-lookup"><span data-stu-id="352fe-176">Click **Request Certification**.</span></span> <span data-ttu-id="352fe-177">A equipe de certificação da Microsoft revisará os arquivos e certificará a topologia.</span><span class="sxs-lookup"><span data-stu-id="352fe-177">The Microsoft certification team will review the files and certify the topology.</span></span>

## <a name="next-steps"></a><span data-ttu-id="352fe-178">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="352fe-178">Next steps</span></span>
* <span data-ttu-id="352fe-179">[Instalar aplicativos do HDInsight](hdinsight-apps-install-applications.md): saiba como instalar um aplicativo do HDInsight em seus clusters.</span><span class="sxs-lookup"><span data-stu-id="352fe-179">[Install HDInsight applications](hdinsight-apps-install-applications.md): Learn how to install an HDInsight application to your clusters.</span></span>
* <span data-ttu-id="352fe-180">[Instalar aplicativos personalizados do HDInsight](hdinsight-apps-install-custom-applications.md): saiba como implantar um aplicativo do HDInsight não publicado no HDInsight.</span><span class="sxs-lookup"><span data-stu-id="352fe-180">[Install custom HDInsight applications](hdinsight-apps-install-custom-applications.md): learn how to deploy an unpublished HDInsight application to HDInsight.</span></span>
* <span data-ttu-id="352fe-181">[Personalizar clusters HDInsight baseados em Linux usando a Ação de Script](hdinsight-hadoop-customize-cluster-linux.md): saiba como usar a Ação de Script para instalar aplicativos adicionais.</span><span class="sxs-lookup"><span data-stu-id="352fe-181">[Customize Linux-based HDInsight clusters using Script Action](hdinsight-hadoop-customize-cluster-linux.md): learn how to use Script Action to install additional applications.</span></span>
* <span data-ttu-id="352fe-182">[Personalizar clusters Hadoop baseados em Linux no HDInsight usando modelos do Azure Resource Manager](hdinsight-hadoop-create-linux-clusters-arm-templates.md): saiba como chamar modelos do Resource Manager para criar clusters HDInsight.</span><span class="sxs-lookup"><span data-stu-id="352fe-182">[Create Linux-based Hadoop clusters in HDInsight using Azure Resource Manager templates](hdinsight-hadoop-create-linux-clusters-arm-templates.md): learn how to call Resource Manager templates to create HDInsight clusters.</span></span>
* <span data-ttu-id="352fe-183">[Usar nós de borda vazios no HDInsight](hdinsight-apps-use-edge-node.md): saiba como usar um nó de borda vazio para acessar o cluster HDInsight, testar e hospedar aplicativos HDInsight.</span><span class="sxs-lookup"><span data-stu-id="352fe-183">[Use empty edge nodes in HDInsight](hdinsight-apps-use-edge-node.md): learn how to use an empty edge node for accessing HDInsight cluster, testing HDInsight applications, and hosting HDInsight applications.</span></span>

