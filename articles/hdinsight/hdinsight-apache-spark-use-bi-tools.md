---
title: "aaaSpark BI usando ferramentas de visualização de dados no Azure HDInsight | Microsoft Docs"
description: "Usar ferramentas de visualização de dados para análise usando Apache Spark BI em clusters HDInsight"
keywords: "apache spark bi, spark bi, visualização de dados spark, spark business intelligence"
services: hdinsight
documentationcenter: 
author: nitinme
manager: jhubbard
editor: cgronlun
tags: azure-portal
ms.assetid: 1448b536-9bc8-46bc-bbc6-d7001623642a
ms.service: hdinsight
ms.custom: hdinsightactive,hdiseo17may2017
ms.workload: big-data
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/21/2017
ms.author: nitinme
ms.openlocfilehash: ba4bfff737ce80ffca5c24f1c2c82a1447f467fb
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="apache-spark-bi-using-data-visualization-tools-with-azure-hdinsight"></a><span data-ttu-id="4dfe0-104">Apache Spark BI usando ferramentas de visualização de dados com o Azure HDInsight</span><span class="sxs-lookup"><span data-stu-id="4dfe0-104">Apache Spark BI using data visualization tools with Azure HDInsight</span></span>

<span data-ttu-id="4dfe0-105">Saiba como visualização de dados toouse ferramentas como o Power BI e Tableau tooanalyze um conjunto de dados brutos de exemplo usando o Apache Spark BI em clusters de HDInsight.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-105">Learn how toouse data visualization tools such as Power BI and Tableau tooanalyze a raw sample data set using Apache Spark BI on HDInsight clusters.</span></span>

> [!NOTE]
> <span data-ttu-id="4dfe0-106">A conectividade com as ferramentas BI descritas neste artigo não tem suporte no Spark 2.1 no modo Preview do Azure HDInsight 3.6.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-106">Connectivity with BI tools described in this article is not supported on Spark 2.1 on Azure HDInsight 3.6 Preview.</span></span> <span data-ttu-id="4dfe0-107">Somente as versões 1.6 e 2.0 do Spark (HDInsight 3.4 e 3.5, respectivamente) têm suporte.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-107">Only Spark versions 1.6 and 2.0 (HDInsight 3.4, 3.5 respectively) are supported.</span></span>
>

<span data-ttu-id="4dfe0-108">Este tutorial também está disponível como um notebook Jupyter em um cluster do Spark HDInsight.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-108">This tutorial is also available as a Jupyter notebook on an HDInsight Spark cluster.</span></span> <span data-ttu-id="4dfe0-109">experiência de notebook Olá permite executar trechos de Python de saudação do bloco de anotações de saudação em si.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-109">hello notebook experience lets you run hello Python snippets from hello notebook itself.</span></span> <span data-ttu-id="4dfe0-110">tutorial de saudação tooperform de dentro de um bloco de anotações, criar um cluster Spark, inicie um bloco de anotações do Jupyter (`https://CLUSTERNAME.azurehdinsight.net/jupyter`), e, em seguida, execute notebook Olá **usar ferramentas de BI com o Apache Spark no HDInsight.ipynb** em Olá **Python**  pasta.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-110">tooperform hello tutorial from within a notebook, create a Spark cluster, launch a Jupyter notebook (`https://CLUSTERNAME.azurehdinsight.net/jupyter`), and then run hello notebook **Use BI tools with Apache Spark on HDInsight.ipynb** under hello **Python** folder.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="4dfe0-111">Pré-requisitos</span><span class="sxs-lookup"><span data-stu-id="4dfe0-111">Prerequisites</span></span>

* <span data-ttu-id="4dfe0-112">Um cluster do Apache Spark no HDInsight.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-112">An Apache Spark cluster on HDInsight.</span></span> <span data-ttu-id="4dfe0-113">Para obter instruções, consulte o artigo sobre como [Criar clusters do Apache Spark no Azure HDInsight](hdinsight-apache-spark-jupyter-spark-sql.md).</span><span class="sxs-lookup"><span data-stu-id="4dfe0-113">For instructions, see [Create Apache Spark clusters in Azure HDInsight](hdinsight-apache-spark-jupyter-spark-sql.md).</span></span>


## <span data-ttu-id="4dfe0-114"><a name="hivetable"></a>Preparar dados para visualização de dados o Spark</span><span class="sxs-lookup"><span data-stu-id="4dfe0-114"><a name="hivetable"></a>Prepare data for Spark data visualization</span></span>

<span data-ttu-id="4dfe0-115">Nesta seção, usamos Olá [Jupyter](https://jupyter.org) bloco de anotações de um trabalhos de toorun de cluster HDInsight Spark que processam os dados brutos de exemplo e salvá-lo como uma tabela.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-115">In this section, we use hello [Jupyter](https://jupyter.org) notebook from an HDInsight Spark cluster toorun jobs that process your raw sample data and save it as a table.</span></span> <span data-ttu-id="4dfe0-116">dados de exemplo Hello são um arquivo. csv (hvac.csv) disponível em todos os clusters por padrão.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-116">hello sample data is a .csv file (hvac.csv) available on all clusters by default.</span></span> <span data-ttu-id="4dfe0-117">Quando seus dados é salvo como uma tabela, na próxima seção, Olá, use a tabela de toohello de tooconnect de ferramentas de BI e executar visualizações de dados.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-117">Once your data is saved as a table, in hello next section we use BI tools tooconnect toohello table and perform data visualizations.</span></span>

> [!NOTE]
> <span data-ttu-id="4dfe0-118">Se você estiver executando Olá as etapas neste artigo após a conclusão de instruções Olá [executar consultas interativas em um cluster do HDInsight Spark](hdinsight-apache-spark-load-data-run-query.md), você pode ignorar tooStep 8 abaixo.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-118">If you are performing hello steps in this article after completing hello instructions in [Run interactive queries on an HDInsight Spark cluster](hdinsight-apache-spark-load-data-run-query.md), you can skip tooStep 8 below.</span></span>
>

1. <span data-ttu-id="4dfe0-119">De saudação [portal do Azure](https://portal.azure.com/), do quadro de saudação inicial, clique em bloco de saudação para seu cluster Spark (se tê-fixado quadro toohello inicial).</span><span class="sxs-lookup"><span data-stu-id="4dfe0-119">From hello [Azure portal](https://portal.azure.com/), from hello startboard, click hello tile for your Spark cluster (if you pinned it toohello startboard).</span></span> <span data-ttu-id="4dfe0-120">Você também pode navegar cluster tooyour em **procurar todos os** > **Clusters HDInsight**.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-120">You can also navigate tooyour cluster under **Browse All** > **HDInsight Clusters**.</span></span>   

2. <span data-ttu-id="4dfe0-121">Na folha de cluster do Spark hello, clique em **painel Cluster**e, em seguida, clique em **Jupyter Notebook**.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-121">From hello Spark cluster blade, click **Cluster Dashboard**, and then click **Jupyter Notebook**.</span></span> <span data-ttu-id="4dfe0-122">Se solicitado, insira as credenciais de administrador de saudação para cluster hello.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-122">If prompted, enter hello admin credentials for hello cluster.</span></span>

   > [!NOTE]
   > <span data-ttu-id="4dfe0-123">Você também poderá atingir Olá anotações do Jupyter para o cluster por Olá abrir URL a seguir em seu navegador.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-123">You may also reach hello Jupyter Notebook for your cluster by opening hello following URL in your browser.</span></span> <span data-ttu-id="4dfe0-124">Substituir **CLUSTERNAME** com nome de saudação do cluster:</span><span class="sxs-lookup"><span data-stu-id="4dfe0-124">Replace **CLUSTERNAME** with hello name of your cluster:</span></span>
   >
   > `https://CLUSTERNAME.azurehdinsight.net/jupyter`
   >
   >

3. <span data-ttu-id="4dfe0-125">Crie um notebook.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-125">Create a notebook.</span></span> <span data-ttu-id="4dfe0-126">Clique em **Novo** e em **PySpark**.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-126">Click **New**, and then click **PySpark**.</span></span>

    <span data-ttu-id="4dfe0-127">![Criar um notebook Jupyter para o Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/create-jupyter-notebook-for-spark-bi.png "Criar um notebook Jupyter para o Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="4dfe0-127">![Create a Jupyter notebook for Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/create-jupyter-notebook-for-spark-bi.png "Create a Jupyter notebook for Apache Spark BI")</span></span>

4. <span data-ttu-id="4dfe0-128">Um novo bloco de anotações é criado e aberto com o nome hello Untitled.pynb.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-128">A new notebook is created and opened with hello name Untitled.pynb.</span></span> <span data-ttu-id="4dfe0-129">Clique em nome do bloco de anotações de saudação na parte superior da saudação e insira um nome amigável.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-129">Click hello notebook name at hello top, and enter a friendly name.</span></span>

    <span data-ttu-id="4dfe0-130">![Forneça um nome para o bloco de anotações Olá para o Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/jupyter-notebook-name-for-spark-bi.png "forneça um nome para o bloco de anotações Olá para o Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="4dfe0-130">![Provide a name for hello notebook for Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/jupyter-notebook-name-for-spark-bi.png "Provide a name for hello notebook for Apache Spark BI")</span></span>

5. <span data-ttu-id="4dfe0-131">Como você criou um bloco de anotações com o hello PySpark kernel, não é necessário toocreate qualquer contextos explicitamente.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-131">Because you created a notebook using hello PySpark kernel, you do not need toocreate any contexts explicitly.</span></span> <span data-ttu-id="4dfe0-132">Olá Spark e Hive contextos são criados automaticamente para você quando você executar a primeira célula de código hello.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-132">hello Spark and Hive contexts are automatically created for you when you run hello first code cell.</span></span> <span data-ttu-id="4dfe0-133">Você pode começar importando tipos de saudação necessários para este cenário.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-133">You can start by importing hello types required for this scenario.</span></span> <span data-ttu-id="4dfe0-134">toodo, portanto, coloque o cursor de saudação na célula hello e pressione **SHIFT + ENTER**.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-134">toodo so, place hello cursor in hello cell and press **SHIFT + ENTER**.</span></span>

        from pyspark.sql import *

6. <span data-ttu-id="4dfe0-135">Carregar dados de exemplo em uma tabela temporária.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-135">Load sample data into a temporary table.</span></span> <span data-ttu-id="4dfe0-136">Quando você cria um cluster Spark no HDInsight, arquivo de dados de exemplo hello, **hvac.csv**, é copiado toohello associado a conta de armazenamento em **\HdiSamples\HdiSamples\SensorSampleData\hvac**.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-136">When you create a Spark cluster in HDInsight, hello sample data file, **hvac.csv**, is copied toohello associated storage account under **\HdiSamples\HdiSamples\SensorSampleData\hvac**.</span></span>

    <span data-ttu-id="4dfe0-137">Em uma célula vazia, cole o seguinte Olá trecho e pressione **SHIFT + ENTER**.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-137">In an empty cell, paste hello following snippet and press **SHIFT + ENTER**.</span></span> <span data-ttu-id="4dfe0-138">Este trecho de código registra dados saudação em uma tabela chamada **hvac**.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-138">This snippet registers hello data into a table called **hvac**.</span></span>

        # Create an RDD from sample data
        hvacText = sc.textFile("wasb:///HdiSamples/HdiSamples/SensorSampleData/hvac/HVAC.csv")

        # Create a schema for our data
        Entry = Row('Date', 'Time', 'TargetTemp', 'ActualTemp', 'BuildingID')

        # Parse hello data and create a schema
        hvacParts = hvacText.map(lambda s: s.split(',')).filter(lambda s: s[0] != 'Date')
        hvac = hvacParts.map(lambda p: Entry(str(p[0]), str(p[1]), int(p[2]), int(p[3]), int(p[6])))

        # Infer hello schema and create a table       
        hvacTable = sqlContext.createDataFrame(hvac)
        hvacTable.registerTempTable('hvactemptable')
        dfw = DataFrameWriter(hvacTable)
        dfw.saveAsTable('hvac')

7. <span data-ttu-id="4dfe0-139">Verifique se que essa tabela Olá foi criada com êxito.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-139">Verify that hello table was successfully created.</span></span> <span data-ttu-id="4dfe0-140">Você pode usar o hello `%%sql` magic consultas de Hive toorun diretamente.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-140">You can use hello `%%sql` magic toorun Hive queries directly.</span></span> <span data-ttu-id="4dfe0-141">Para obter mais informações sobre Olá `%%sql` mágico e outros magics disponíveis com o kernel do PySpark hello, consulte [Kernels disponíveis em blocos de anotações do Jupyter com clusters HDInsight Spark](hdinsight-apache-spark-jupyter-notebook-kernels.md#parameters-supported-with-the-sql-magic).</span><span class="sxs-lookup"><span data-stu-id="4dfe0-141">For more information about hello `%%sql` magic, and other magics available with hello PySpark kernel, see [Kernels available on Jupyter notebooks with Spark HDInsight clusters](hdinsight-apache-spark-jupyter-notebook-kernels.md#parameters-supported-with-the-sql-magic).</span></span>

        %%sql
        SHOW TABLES

    <span data-ttu-id="4dfe0-142">Você vê uma saída como a mostrada abaixo:</span><span class="sxs-lookup"><span data-stu-id="4dfe0-142">You see an output like shown below:</span></span>

        +---------------+-------------+
        |tableName      |isTemporary  |
        +---------------+-------------+
        |hvactemptable  |true        |
        |hivesampletable|false        |
        |hvac           |false        |
        +---------------+-------------+

    <span data-ttu-id="4dfe0-143">Olá somente tabelas que têm falso em Olá **isTemporary** coluna são tabelas de hive que são armazenadas em metastore hello e podem ser acessadas de ferramentas de BI hello.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-143">Only hello tables that have false under hello **isTemporary** column are hive tables that are stored in hello metastore and can be accessed from hello BI tools.</span></span> <span data-ttu-id="4dfe0-144">Neste tutorial, nós nos conectamos toohello **hvac** tabela são criadas.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-144">In this tutorial, we connect toohello **hvac** table we created.</span></span>

8. <span data-ttu-id="4dfe0-145">Verifique se que essa tabela Olá contém dados saudação que se destina.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-145">Verify that hello table contains hello intended data.</span></span> <span data-ttu-id="4dfe0-146">Em uma célula vazia no bloco de anotações hello, copie o seguinte de saudação trecho e pressione **SHIFT + ENTER**.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-146">In an empty cell in hello notebook, copy hello following snippet and press **SHIFT + ENTER**.</span></span>

        %%sql
        SELECT * FROM hvac LIMIT 10

9. <span data-ttu-id="4dfe0-147">Desligar os recursos de Olá Olá notebook toorelease.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-147">Shut down hello notebook toorelease hello resources.</span></span> <span data-ttu-id="4dfe0-148">toodo caso de Olá **arquivo** menu notebook hello, clique em **fechar e interromper**.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-148">toodo so, from hello **File** menu on hello notebook, click **Close and Halt**.</span></span>

## <span data-ttu-id="4dfe0-149"><a name="powerbi"></a>Usar o Power BI para visualização de dados do Spark</span><span class="sxs-lookup"><span data-stu-id="4dfe0-149"><a name="powerbi"></a>Use Power BI for Spark data visualization</span></span>

> [!NOTE]
> <span data-ttu-id="4dfe0-150">Esta seção é aplicável somente ao Spark 1.6 no HDInsight 3.4 e ao Spark 2.0 no HDInsight 3.5.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-150">This section is applicable only for Spark 1.6 on HDInsight 3.4 and Spark 2.0 on HDInsight 3.5.</span></span>
>
>

<span data-ttu-id="4dfe0-151">Depois de salvar dados saudação como uma tabela, você pode usar dados do Power BI tooconnect toohello e visualizá-la toocreate relatórios, painéis, etc.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-151">Once you have saved hello data as a table, you can use Power BI tooconnect toohello data and visualize it toocreate reports, dashboards, etc.</span></span>

1. <span data-ttu-id="4dfe0-152">Verifique se que você tem acesso tooPower BI.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-152">Make sure you have access tooPower BI.</span></span> <span data-ttu-id="4dfe0-153">Você pode obter uma assinatura gratuita de visualização do Power BI em [http://www.powerbi.com/](http://www.powerbi.com/).</span><span class="sxs-lookup"><span data-stu-id="4dfe0-153">You can get a free preview subscription of Power BI from [http://www.powerbi.com/](http://www.powerbi.com/).</span></span>

2. <span data-ttu-id="4dfe0-154">Entrar muito[Power BI](http://www.powerbi.com/).</span><span class="sxs-lookup"><span data-stu-id="4dfe0-154">Sign in too[Power BI](http://www.powerbi.com/).</span></span>

3. <span data-ttu-id="4dfe0-155">Da parte inferior de saudação do painel esquerdo do hello, clique em **obter dados**.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-155">From hello bottom of hello left pane, click **Get Data**.</span></span>

4. <span data-ttu-id="4dfe0-156">Em Olá **obter dados** página em **importar ou conectar tooData**, para **bancos de dados**, clique em **obter**.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-156">On hello **Get Data** page, under **Import or Connect tooData**, for **Databases**, click **Get**.</span></span>

    <span data-ttu-id="4dfe0-157">![Colocar dados no Power BI para o Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-import-data-power-bi.png "Colocar dados no Power BI para o Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="4dfe0-157">![Get data into Power BI for Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-import-data-power-bi.png "Get data into Power BI for Apache Spark BI")</span></span>

5. <span data-ttu-id="4dfe0-158">Na próxima tela de saudação, clique em **Spark no Azure HDInsight** e, em seguida, clique em **conectar**.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-158">On hello next screen, click **Spark on Azure HDInsight** and then click **Connect**.</span></span> <span data-ttu-id="4dfe0-159">Quando solicitado, insira a URL do cluster hello (`mysparkcluster.azurehdinsight.net`) e Olá credenciais tooconnect toohello cluster.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-159">When prompted, enter hello cluster URL (`mysparkcluster.azurehdinsight.net`) and hello credentials tooconnect toohello cluster.</span></span>

    <span data-ttu-id="4dfe0-160">![Conecte-se tooApache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/connect-to-apache-spark-bi.png "conectar tooApache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="4dfe0-160">![Connect tooApache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/connect-to-apache-spark-bi.png "Connect tooApache Spark BI")</span></span>

    <span data-ttu-id="4dfe0-161">Depois de estabelecer conexão hello, Power BI inicia a importação de dados do cluster do hello Spark no HDInsight.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-161">After hello connection is established, Power BI starts importing data from hello Spark cluster on HDInsight.</span></span>

6. <span data-ttu-id="4dfe0-162">Power BI importa dados hello e adiciona um **Spark** dataset sob Olá **conjuntos de dados** título.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-162">Power BI imports hello data and adds a **Spark** dataset under hello **Datasets** heading.</span></span> <span data-ttu-id="4dfe0-163">Clique em Olá tooopen de conjunto de dados novos dados de planilha toovisualize hello.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-163">Click hello data set tooopen a new worksheet toovisualize hello data.</span></span> <span data-ttu-id="4dfe0-164">Você também pode salvar a planilha hello como um relatório.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-164">You can also save hello worksheet as a report.</span></span> <span data-ttu-id="4dfe0-165">toosave uma planilha, Olá **arquivo** menu, clique em **salvar**.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-165">toosave a worksheet, from hello **File** menu, click **Save**.</span></span>

    <span data-ttu-id="4dfe0-166">![Bloco do Apache Spark BI no painel do Power BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-tile-dashboard.png "Bloco do Apache Spark BI no painel do Power BI")</span><span class="sxs-lookup"><span data-stu-id="4dfe0-166">![Apache Spark BI tile on Power BI dashboard](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-tile-dashboard.png "Apache Spark BI tile on Power BI dashboard")</span></span>
7. <span data-ttu-id="4dfe0-167">Observe que Olá **campos** lista Olá direita lista Olá **hvac** tabela criada anteriormente.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-167">Notice that hello **Fields** list on hello right lists hello **hvac** table you created earlier.</span></span> <span data-ttu-id="4dfe0-168">Expanda Olá tabela toosee Olá campos Olá tabela, conforme definido anteriormente no bloco de anotações.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-168">Expand hello table toosee hello fields in hello table, as you defined in notebook earlier.</span></span>

      <span data-ttu-id="4dfe0-169">![Listar tabelas no painel do Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-display-tables.png "Listar tabelas no painel do Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="4dfe0-169">![List tables on Apache Spark BI dashboard](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-display-tables.png "List tables on Apache Spark BI dashboard")</span></span>

8. <span data-ttu-id="4dfe0-170">Crie uma visualização tooshow Olá a variação entre temperatura de destino e temperatura real para cada compilação.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-170">Build a visualization tooshow hello variance between target temperature and actual temperature for each building.</span></span> <span data-ttu-id="4dfe0-171">dados de suas toovisualize, selecione **gráfico de área** (mostrado na caixa vermelha).</span><span class="sxs-lookup"><span data-stu-id="4dfe0-171">toovisualize yoru data, select **Area Chart** (shown in red box).</span></span> <span data-ttu-id="4dfe0-172">eixo toodefine Olá Olá de arrastar e soltar **BuildingID** campo em **eixo**, e **ActualTemp**/**TargetTemp** os campos em **valor**.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-172">toodefine hello axis, drag-and-drop hello **BuildingID** field under **Axis**, and **ActualTemp**/**TargetTemp** fields under **Value**.</span></span>

    <span data-ttu-id="4dfe0-173">![Criar visualizações de dados Spark usando o Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-add-value-columns.png "Criar visualizações de dados Spark usando o Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="4dfe0-173">![Create Spark data visualizations using Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-add-value-columns.png "Create Spark data visualizations using Apache Spark BI")</span></span>

9. <span data-ttu-id="4dfe0-174">Por padrão, visualização de saudação mostra soma Olá para **ActualTemp** e **TargetTemp**.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-174">By default hello visualization shows hello sum for **ActualTemp** and **TargetTemp**.</span></span> <span data-ttu-id="4dfe0-175">Para ambos Olá campos de saudação lista suspensa, selecione **médio** tooget média real e temperaturas de destino para as duas construções.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-175">For both hello fields, from hello drop-down, select **Average** tooget an average of actual and target temperatures for both buildings.</span></span>

    <span data-ttu-id="4dfe0-176">![Criar visualizações de dados Spark usando o Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-average-of-values.png "Criar visualizações de dados Spark usando o Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="4dfe0-176">![Create Spark data visualizations using Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-average-of-values.png "Create Spark data visualizations using Apache Spark BI")</span></span>

10. <span data-ttu-id="4dfe0-177">A visualização de dados deve ser semelhante toohello uma captura de tela de saudação.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-177">Your data visualization should be similar toohello one in hello screenshot.</span></span> <span data-ttu-id="4dfe0-178">Mova o cursor sobre dicas de ferramenta do hello visualização tooget com dados relevantes.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-178">Move your cursor over hello visualization tooget tool tips with relevant data.</span></span>

    <span data-ttu-id="4dfe0-179">![Criar visualizações de dados Spark usando o Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-area-graph.png "Criar visualizações de dados Spark usando o Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="4dfe0-179">![Create Spark data visualizations using Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-area-graph.png "Create Spark data visualizations using Apache Spark BI")</span></span>

11. <span data-ttu-id="4dfe0-180">Clique em **salvar** de saudação principais de menu e forneça um nome de relatório.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-180">Click **Save** from hello top menu and provide a report name.</span></span> <span data-ttu-id="4dfe0-181">Você também pode fixar Olá visual.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-181">You can also pin hello visual.</span></span> <span data-ttu-id="4dfe0-182">Quando você fixa uma visualização, ele é armazenado no seu painel para que você pode controlar o valor mais recente de saudação em um relance.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-182">When you pin a visualization, it is stored on your dashboard so you can track hello latest value at a glance.</span></span>

   <span data-ttu-id="4dfe0-183">Você pode adicionar visualizações quantas desejar para Olá mesmo conjunto de dados e fixá-los toohello painel para um instantâneo dos dados.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-183">You can add as many visualizations as you want for hello same dataset and pin them toohello dashboard for a snapshot of your data.</span></span> <span data-ttu-id="4dfe0-184">Além disso, clusters Spark no HDInsight são conectado tooPower BI com o direct se conectar.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-184">Also, Spark clusters on HDInsight are connected tooPower BI with direct connect.</span></span> <span data-ttu-id="4dfe0-185">Isso garante que Power BI sempre terá Olá a maioria dos dados atualizados do cluster para que não é necessário tooschedule atualizações para o conjunto de dados de saudação.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-185">This ensures that Power BI always has hello most up-to-date data from your cluster so you do not need tooschedule refreshes for hello dataset.</span></span>

## <span data-ttu-id="4dfe0-186"><a name="tableau"></a>Usar o Tableau Desktop para visualização de dados do Spark</span><span class="sxs-lookup"><span data-stu-id="4dfe0-186"><a name="tableau"></a>Use Tableau Desktop for Spark data visualization</span></span>

> [!NOTE]
> <span data-ttu-id="4dfe0-187">Esta seção é aplicável somente para clusters do Spark 1.5.2 criados no Azure HDInsight.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-187">This section is applicable only for Spark 1.5.2 clusters created in Azure HDInsight.</span></span>
>
>

1. <span data-ttu-id="4dfe0-188">Instalar [Tableau Desktop](http://www.tableau.com/products/desktop) no computador Olá onde você está executando este tutorial do Apache Spark BI.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-188">Install [Tableau Desktop](http://www.tableau.com/products/desktop) on hello computer where you are running this Apache Spark BI tutorial.</span></span>

2. <span data-ttu-id="4dfe0-189">Verifique se o computador também tem o driver ODBC do Microsoft Spark instalado.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-189">Make sure that computer also has Microsoft Spark ODBC driver installed.</span></span> <span data-ttu-id="4dfe0-190">Você pode instalar o driver de saudação do [aqui](http://go.microsoft.com/fwlink/?LinkId=616229).</span><span class="sxs-lookup"><span data-stu-id="4dfe0-190">You can install hello driver from [here](http://go.microsoft.com/fwlink/?LinkId=616229).</span></span>

1. <span data-ttu-id="4dfe0-191">Inicie o Tableau Desktop.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-191">Launch Tableau Desktop.</span></span> <span data-ttu-id="4dfe0-192">No painel esquerdo do hello, na lista de saudação do servidor tooconnect, clique em **Spark SQL**.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-192">In hello left pane, from hello list of server tooconnect to, click **Spark SQL**.</span></span> <span data-ttu-id="4dfe0-193">Se Spark SQL não estiver listado por padrão no painel esquerdo do hello, você pode localizá-la clique **mais servidores**.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-193">If Spark SQL is not listed by default in hello left pane, you can find it by click **More Servers**.</span></span>
2. <span data-ttu-id="4dfe0-194">Na caixa de diálogo de conexão do hello Spark SQL, forneça valores hello conforme mostrado na captura de tela hello e, em seguida, clique em **Okey**.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-194">In hello Spark SQL connection dialog box, provide hello values as shown in hello screenshot, and then click **OK**.</span></span>

    <span data-ttu-id="4dfe0-195">![Conectar tooa cluster para o Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/connect-to-tableau-apache-spark-bi.png "conectar tooa cluster para o Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="4dfe0-195">![Connect tooa cluster for Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/connect-to-tableau-apache-spark-bi.png "Connect tooa cluster for Apache Spark BI")</span></span>

    <span data-ttu-id="4dfe0-196">Olá listas suspensas de autenticação **Microsoft Azure HDInsight Service** como uma opção, somente se você instalou Olá [Driver de ODBC do Microsoft Spark](http://go.microsoft.com/fwlink/?LinkId=616229) no computador de saudação.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-196">hello authentication drop-down lists **Microsoft Azure HDInsight Service** as an option, only if you installed hello [Microsoft Spark ODBC Driver](http://go.microsoft.com/fwlink/?LinkId=616229) on hello computer.</span></span>
3. <span data-ttu-id="4dfe0-197">Na tela seguinte hello, de saudação **esquema** lista suspensa, clique em Olá **localizar** ícone e clique **padrão**.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-197">On hello next screen, from hello **Schema** drop-down, click hello **Find** icon, and then click **default**.</span></span>

    <span data-ttu-id="4dfe0-198">![Localizar o esquema para o Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/tableau-find-schema-apache-spark-bi.png "Localizar o esquema para o Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="4dfe0-198">![Find schema for Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/tableau-find-schema-apache-spark-bi.png "Find schema for Apache Spark BI")</span></span>
4. <span data-ttu-id="4dfe0-199">Para Olá **tabela** , clique em Olá **localizar** ícone novamente toolist todos Olá Hive tabelas disponíveis no cluster hello.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-199">For hello **Table** field, click hello **Find** icon again toolist all hello Hive tables available in hello cluster.</span></span> <span data-ttu-id="4dfe0-200">Você deve ver Olá **hvac** criado anteriormente usando o bloco de anotações de saudação de tabela.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-200">You should see hello **hvac** table you created earlier using hello notebook.</span></span>

    <span data-ttu-id="4dfe0-201">![Localizar tabela para o Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/tableau-find-table-apache-spark-bi.png "Localizar a tabela para o Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="4dfe0-201">![Find table for Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/tableau-find-table-apache-spark-bi.png "Find table for Apache Spark BI")</span></span>
5. <span data-ttu-id="4dfe0-202">Arraste e solte a caixa superior do hello tabela toohello em saudação à direita.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-202">Drag and drop hello table toohello top box on hello right.</span></span> <span data-ttu-id="4dfe0-203">Tableau importa dados hello e exibe o esquema de saudação como destacado pela caixa Olá vermelho.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-203">Tableau imports hello data and displays hello schema as highlighted by hello red box.</span></span>

    <span data-ttu-id="4dfe0-204">![Adicionar tabelas tooTableau para o Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/tableau-add-table-apache-spark-bi.png "adicionar tooTableau de tabelas para o Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="4dfe0-204">![Add tables tooTableau for Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/tableau-add-table-apache-spark-bi.png "Add tables tooTableau for Apache Spark BI")</span></span>
6. <span data-ttu-id="4dfe0-205">Clique em Olá **Planilha1** guia na parte inferior de saudação à esquerda.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-205">Click hello **Sheet1** tab at hello bottom left.</span></span> <span data-ttu-id="4dfe0-206">Faça uma visualização que mostra o destino médio hello e temperaturas reais para todas as construções para cada data.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-206">Make a visualization that shows hello average target and actual temperatures for all buildings for each date.</span></span> <span data-ttu-id="4dfe0-207">Arraste **data** e **ID da construção** muito**colunas** e **Temp real**/**Temp destino**muito**linhas**.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-207">Drag **Date** and **Building ID** too**Columns** and **Actual Temp**/**Target Temp** too**Rows**.</span></span> <span data-ttu-id="4dfe0-208">Em **marcas**, selecione **área** toouse um mapa de área de visualização de dados do Spark.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-208">Under **Marks**, select **Area** toouse an area map for Spark data visualization.</span></span>

     <span data-ttu-id="4dfe0-209">![Adicionar campos para visualização de dados do Spark](./media/hdinsight-apache-spark-use-bi-tools/spark-data-visualization-add-fields.png "Adicionar campos para visualização de dados do Spark")</span><span class="sxs-lookup"><span data-stu-id="4dfe0-209">![Add fields for Spark data visualization](./media/hdinsight-apache-spark-use-bi-tools/spark-data-visualization-add-fields.png "Add fields for Spark data visualization")</span></span>
7. <span data-ttu-id="4dfe0-210">Por padrão, os campos de temperatura Olá são mostrados como agregação.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-210">By default, hello temperature fields are shown as aggregate.</span></span> <span data-ttu-id="4dfe0-211">Se você quiser temperaturas médio de saudação tooshow em vez disso, você pode fazer isso na lista suspensa Olá conforme mostrado abaixo.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-211">If you want tooshow hello average temperatures instead, you can do so from hello drop-down, as shown below.</span></span>

    <span data-ttu-id="4dfe0-212">![Obter a temperatura média para visualização de dados do Spark](./media/hdinsight-apache-spark-use-bi-tools/spark-data-visualization-average-temperature.png "Obter a temperatura média para visualização de dados do Spark")</span><span class="sxs-lookup"><span data-stu-id="4dfe0-212">![Take average of temperature for Spark data visualization](./media/hdinsight-apache-spark-use-bi-tools/spark-data-visualization-average-temperature.png "Take average of temperature for Spark data visualization")</span></span>

8. <span data-ttu-id="4dfe0-213">Você também pode superimpor um mapa de temperatura Olá em outros tooget uma noção melhor de diferença entre temperaturas reais e de destino.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-213">You can also super-impose one temperature map over hello other tooget a better feel of difference between target and actual temperatures.</span></span> <span data-ttu-id="4dfe0-214">Mova Olá mouse toohello de canto do mapa de área inferior Olá até ver Olá alça de forma realçada em um círculo vermelho.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-214">Move hello mouse toohello corner of hello lower area map till you see hello handle shape highlighted in a red circle.</span></span> <span data-ttu-id="4dfe0-215">Arraste Olá mapa toohello outros mapa Olá superior e versão saudação do mouse quando você vir a forma de saudação realçada no retângulo vermelho.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-215">Drag hello map toohello other map on hello top and release hello mouse when you see hello shape highlighted in red rectangle.</span></span>

    <span data-ttu-id="4dfe0-216">![Mesclar mapas para visualização de dados do Spark](./media/hdinsight-apache-spark-use-bi-tools/spark-data-visualization-merge-maps.png "Mesclar mapas para visualização de dados do Spark")</span><span class="sxs-lookup"><span data-stu-id="4dfe0-216">![Merge maps for Spark data visualization](./media/hdinsight-apache-spark-use-bi-tools/spark-data-visualization-merge-maps.png "Merge maps for Spark data visualization")</span></span>

     <span data-ttu-id="4dfe0-217">A visualização de dados deve alterar conforme mostrado na captura de tela de saudação:</span><span class="sxs-lookup"><span data-stu-id="4dfe0-217">Your data visualization should change as shown in hello screenshot:</span></span>

    <span data-ttu-id="4dfe0-218">![Saída do Tableau para visualização de dados do Spark](./media/hdinsight-apache-spark-use-bi-tools/spark-data-visualization-tableau-output.png "Saída do Tableau para visualização de dados do Spark")</span><span class="sxs-lookup"><span data-stu-id="4dfe0-218">![Tableau output for Spark data visualization](./media/hdinsight-apache-spark-use-bi-tools/spark-data-visualization-tableau-output.png "Tableau output for Spark data visualization")</span></span>
9. <span data-ttu-id="4dfe0-219">Clique em **salvar** toosave planilha de saudação.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-219">Click **Save** toosave hello worksheet.</span></span> <span data-ttu-id="4dfe0-220">Você pode criar painéis e adicionar um ou mais tooit de folhas.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-220">You can create dashboards and add one or more sheets tooit.</span></span>

## <a name="next-steps"></a><span data-ttu-id="4dfe0-221">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="4dfe0-221">Next steps</span></span>

<span data-ttu-id="4dfe0-222">Até agora, você aprendeu como criar Spark quadros tooquery dados toocreate um cluster e acessar os dados de ferramentas de BI.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-222">So far you learned how toocreate a cluster, create Spark data frames tooquery data, and then access that data from BI tools.</span></span> <span data-ttu-id="4dfe0-223">Agora você pode ver instruções sobre como toomanage Olá recursos de cluster e depurar os trabalhos que são executados em um cluster HDInsight Spark.</span><span class="sxs-lookup"><span data-stu-id="4dfe0-223">You can now look at instructions on how toomanage hello cluster resources and debug jobs that are running in an HDInsight Spark cluster.</span></span>

* [<span data-ttu-id="4dfe0-224">Gerenciar os recursos de cluster do hello Apache Spark no HDInsight do Azure</span><span class="sxs-lookup"><span data-stu-id="4dfe0-224">Manage resources for hello Apache Spark cluster in Azure HDInsight</span></span>](hdinsight-apache-spark-resource-manager.md)
* [<span data-ttu-id="4dfe0-225">Rastrear e depurar trabalhos em execução em um cluster do Apache Spark no HDInsight</span><span class="sxs-lookup"><span data-stu-id="4dfe0-225">Track and debug jobs running on an Apache Spark cluster in HDInsight</span></span>](hdinsight-apache-spark-job-debugging.md)

