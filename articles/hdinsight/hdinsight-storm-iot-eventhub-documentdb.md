---
title: "dados do sensor do veículo aaaProcess com Apache Storm no HDInsight | Microsoft Docs"
description: "Saiba como dados do sensor do veículo tooprocess dos Hubs de eventos usando o Apache Storm no HDInsight. Adicionar dados de modelo de banco de dados do Azure Cosmos e armazenar toostorage de saída."
services: hdinsight,documentdb,notification-hubs
documentationcenter: 
author: Blackmist
manager: jhubbard
editor: cgronlun
ms.assetid: 78980635-8bef-4c33-96c3-fae50e932e31
ms.service: hdinsight
ms.custom: hdinsightactive
ms.devlang: java
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 05/03/2017
ms.author: larryfr
ms.openlocfilehash: 8f7b1dbb9072e095ea32160bb731bedd071288af
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="process-vehicle-sensor-data-from-azure-event-hubs-using-apache-storm-on-hdinsight"></a><span data-ttu-id="24849-104">Processar dados de sensor de veículo nos Hubs de Eventos do Azure usando o Apache Storm no HDInsight</span><span class="sxs-lookup"><span data-stu-id="24849-104">Process vehicle sensor data from Azure Event Hubs using Apache Storm on HDInsight</span></span>

<span data-ttu-id="24849-105">Saiba como dados de sensor de veículo tooprocess de Hubs de eventos do Azure usando o Apache Storm no HDInsight.</span><span class="sxs-lookup"><span data-stu-id="24849-105">Learn how tooprocess vehicle sensor data from Azure Event Hubs using Apache Storm on HDInsight.</span></span> <span data-ttu-id="24849-106">Este exemplo lê dados do sensor de Hubs de eventos do Azure, enriquece dados saudação fazendo referência a dados armazenados no banco de dados do Azure Cosmos.</span><span class="sxs-lookup"><span data-stu-id="24849-106">This example reads sensor data from Azure Event Hubs, enriches hello data by referencing data stored in Azure Cosmos DB.</span></span> <span data-ttu-id="24849-107">Olá dados são armazenados no armazenamento do Azure usando Olá sistema de arquivo do Hadoop (HDFS).</span><span class="sxs-lookup"><span data-stu-id="24849-107">hello data is stored into Azure Storage using hello Hadoop File System (HDFS).</span></span>

![HDInsight e hello diagrama de arquitetura de Internet das coisas (IoT)](./media/hdinsight-storm-iot-eventhub-documentdb/iot.png)

## <a name="overview"></a><span data-ttu-id="24849-109">Visão geral</span><span class="sxs-lookup"><span data-stu-id="24849-109">Overview</span></span>

<span data-ttu-id="24849-110">Adicionar sensores toovehicles permite toopredict problemas de equipamento com base nas tendências de dados históricos.</span><span class="sxs-lookup"><span data-stu-id="24849-110">Adding sensors toovehicles allows you toopredict equipment problems based on historical data trends.</span></span> <span data-ttu-id="24849-111">Ele também permite que você toomake melhorias versões toofuture com base na análise de padrão de uso.</span><span class="sxs-lookup"><span data-stu-id="24849-111">It also allows you toomake improvements toofuture versions based on usage pattern analysis.</span></span> <span data-ttu-id="24849-112">Você deve ser capaz de tooquickly e carregar com eficiência dados saudação de todos os veículos no Hadoop antes que ocorra o processamento de MapReduce.</span><span class="sxs-lookup"><span data-stu-id="24849-112">You must be able tooquickly and efficiently load hello data from all vehicles into Hadoop before MapReduce processing can occur.</span></span> <span data-ttu-id="24849-113">Além disso, talvez você queira toodo análise para caminhos de falha crítica (temperatura de mecanismo, freios, etc.) em tempo real.</span><span class="sxs-lookup"><span data-stu-id="24849-113">Additionally, you may wish toodo analysis for critical failure paths (engine temperature, brakes, etc.) in real time.</span></span>

<span data-ttu-id="24849-114">Hubs de eventos do Azure é construído toohandle Olá imenso volume de dados gerados por sensores.</span><span class="sxs-lookup"><span data-stu-id="24849-114">Azure Event Hubs is built toohandle hello massive volume of data generated by sensors.</span></span> <span data-ttu-id="24849-115">Apache Storm pode ser usado tooload e dados de saudação do processo antes de armazená-lo no HDFS.</span><span class="sxs-lookup"><span data-stu-id="24849-115">Apache Storm can be used tooload and process hello data before storing it into HDFS.</span></span>

## <a name="solution"></a><span data-ttu-id="24849-116">Solução</span><span class="sxs-lookup"><span data-stu-id="24849-116">Solution</span></span>

<span data-ttu-id="24849-117">Os dados telemétricos de temperatura do mecanismo, temperatura ambiente e velocidade do veículo são registrados pelos sensores.</span><span class="sxs-lookup"><span data-stu-id="24849-117">Telemetry data for engine temperature, ambient temperature, and vehicle speed is recorded by sensors.</span></span> <span data-ttu-id="24849-118">Dados são enviados, em seguida, Hubs tooEvent juntamente com veículo identificação número VIN do carro Olá () e um carimbo de hora.</span><span class="sxs-lookup"><span data-stu-id="24849-118">Data is then sent tooEvent Hubs along with hello car's Vehicle Identification Number (VIN) and a time stamp.</span></span> <span data-ttu-id="24849-119">A partir daí, uma topologia de Storm em execução em um Apache Storm no cluster HDInsight lê dados hello, processa e armazena-o no HDFS.</span><span class="sxs-lookup"><span data-stu-id="24849-119">From there, a Storm Topology running on an Apache Storm on HDInsight cluster reads hello data, processes it, and stores it into HDFS.</span></span>

<span data-ttu-id="24849-120">Durante o processamento, Olá VIN é usado tooretrieve informações sobre o modelo do banco de dados do Cosmos.</span><span class="sxs-lookup"><span data-stu-id="24849-120">During processing, hello VIN is used tooretrieve model information from Cosmos DB.</span></span> <span data-ttu-id="24849-121">Esses dados são adicionados toohello fluxo de dados antes de ser armazenado.</span><span class="sxs-lookup"><span data-stu-id="24849-121">This data is added toohello data stream before it is stored.</span></span>

<span data-ttu-id="24849-122">Olá componentes usados em Olá profusão de topologia são:</span><span class="sxs-lookup"><span data-stu-id="24849-122">hello components used in hello Storm Topology are:</span></span>

* <span data-ttu-id="24849-123">**EventHubSpout** - lê dados de Hubs de Evento do Azure</span><span class="sxs-lookup"><span data-stu-id="24849-123">**EventHubSpout** - reads data from Azure Event Hubs</span></span>
* <span data-ttu-id="24849-124">**TypeConversionBolt** -Olá converte a cadeia de caracteres JSON dos Hubs de eventos em uma tupla que contém a saudação seguintes dados de sensor:</span><span class="sxs-lookup"><span data-stu-id="24849-124">**TypeConversionBolt** - converts hello JSON string from Event Hubs into a tuple containing hello following sensor data:</span></span>
    * <span data-ttu-id="24849-125">Temperatura do motor</span><span class="sxs-lookup"><span data-stu-id="24849-125">Engine temperature</span></span>
    * <span data-ttu-id="24849-126">Temperatura ambiente</span><span class="sxs-lookup"><span data-stu-id="24849-126">Ambient temperature</span></span>
    * <span data-ttu-id="24849-127">Velocidade</span><span class="sxs-lookup"><span data-stu-id="24849-127">Speed</span></span>
    * <span data-ttu-id="24849-128">VIN</span><span class="sxs-lookup"><span data-stu-id="24849-128">VIN</span></span>
    * <span data-ttu-id="24849-129">Timestamp</span><span class="sxs-lookup"><span data-stu-id="24849-129">Timestamp</span></span>
* <span data-ttu-id="24849-130">**DataReferencBolt** -procura o modelo do veículo saudação do banco de dados do Cosmos usando VIN Olá</span><span class="sxs-lookup"><span data-stu-id="24849-130">**DataReferencBolt** - looks up hello vehicle model from Cosmos DB using hello VIN</span></span>
* <span data-ttu-id="24849-131">**WasbStoreBolt** -Olá de repositórios de dados tooHDFS (armazenamento do Azure)</span><span class="sxs-lookup"><span data-stu-id="24849-131">**WasbStoreBolt** - stores hello data tooHDFS (Azure Storage)</span></span>

<span data-ttu-id="24849-132">Olá a imagem a seguir é um diagrama da solução:</span><span class="sxs-lookup"><span data-stu-id="24849-132">hello following image is a diagram of this solution:</span></span>

![topologia Storm](./media/hdinsight-storm-iot-eventhub-documentdb/iottopology.png)

## <a name="implementation"></a><span data-ttu-id="24849-134">Implementação</span><span class="sxs-lookup"><span data-stu-id="24849-134">Implementation</span></span>

<span data-ttu-id="24849-135">Uma completa solução automatizada para esse cenário está disponível como parte da saudação [HDInsight de profusão de exemplos](https://github.com/hdinsight/hdinsight-storm-examples) repositório no GitHub.</span><span class="sxs-lookup"><span data-stu-id="24849-135">A complete, automated solution for this scenario is available as part of hello [HDInsight-Storm-Examples](https://github.com/hdinsight/hdinsight-storm-examples) repository on GitHub.</span></span> <span data-ttu-id="24849-136">toouse neste exemplo, siga etapas Olá Olá [IoTExample README. MD](https://github.com/hdinsight/hdinsight-storm-examples/blob/master/IotExample/README.md).</span><span class="sxs-lookup"><span data-stu-id="24849-136">toouse this example, follow hello steps in hello [IoTExample README.MD](https://github.com/hdinsight/hdinsight-storm-examples/blob/master/IotExample/README.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="24849-137">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="24849-137">Next Steps</span></span>

<span data-ttu-id="24849-138">Para obter mais topologias do Storm, consulte [Exemplo de topologias para Storm em HDInsight](hdinsight-storm-example-topology.md).</span><span class="sxs-lookup"><span data-stu-id="24849-138">For more example Storm topologies, see [Example topologies for Storm on HDInsight](hdinsight-storm-example-topology.md).</span></span>

