---
title: "Segurança do Hadoop - clusters HDInsight ingressados no domínio - Azure | Microsoft Docs"
description: Saiba como...
services: hdinsight
documentationcenter: 
author: saurinsh
manager: jhubbard
editor: cgronlun
tags: azure-portal
ms.assetid: 7dc6847d-10d4-4b5c-9c83-cc513cf91965
ms.service: hdinsight
ms.custom: hdinsightactive
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 10/31/2016
ms.author: saurinsh
ms.openlocfilehash: 303be1d303df8074283cb1d37c74923cca80ae59
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/29/2017
---
# <a name="an-introduction-to-hadoop-security-with-domain-joined-hdinsight-clusters-preview"></a><span data-ttu-id="2579b-103">Uma introdução à segurança do Hadoop com clusters HDInsight ingressados no domínio (visualização)</span><span class="sxs-lookup"><span data-stu-id="2579b-103">An introduction to Hadoop security with domain-joined HDInsight clusters (Preview)</span></span>

<span data-ttu-id="2579b-104">O Azure HDInsight até hoje dava suporte apenas a um administrador local de usuário único. Isso funcionava bem para equipes de aplicativos ou departamentos menores.</span><span class="sxs-lookup"><span data-stu-id="2579b-104">Azure HDInsight until today supported only a single user local admin. This worked great for smaller application teams or departments.</span></span> <span data-ttu-id="2579b-105">À medida que cargas de trabalho com base em Hadoop ganharam mais popularidade no setor corporativo, a necessidade de recursos de nível empresarial, como controle de acesso baseado em função, suporte a vários usuários e autenticação baseada no Active Directory tornou-se cada vez mais importante.</span><span class="sxs-lookup"><span data-stu-id="2579b-105">As Hadoop based workloads gained more popularity in the enterprise sector, the need for enterprise grade capabilities like active directory based authentication, multi-user support, and role based access control became increasingly important.</span></span> <span data-ttu-id="2579b-106">Usando clusters de HDInsight do domínio, você pode criar um cluster HDInsight associado a um domínio do Active Directory, configurar uma lista de funcionários da empresa que podem se autenticar por meio do Azure Active Directory para fazer logon no cluster HDInsight.</span><span class="sxs-lookup"><span data-stu-id="2579b-106">Using Domain-joined HDInsight clusters, you can create an HDInsight cluster joined to an Active Directory domain, configure a list of employees from the enterprise who can authenticate through Azure Active Directory to log on to HDInsight cluster.</span></span> <span data-ttu-id="2579b-107">Qualquer pessoa fora da empresa não pode fazer logon nem acessar o cluster HDInsight.</span><span class="sxs-lookup"><span data-stu-id="2579b-107">Anyone outside the enterprise cannot log on or access the HDInsight cluster.</span></span> <span data-ttu-id="2579b-108">O administrador corporativo pode configurar o controle de acesso baseado em função de segurança do Hive utilizando o [Apache Ranger](http://hortonworks.com/apache/ranger/), restringindo assim o acesso a dados apenas tanto quanto necessário.</span><span class="sxs-lookup"><span data-stu-id="2579b-108">The enterprise admin can configure role based access control for Hive security using [Apache Ranger](http://hortonworks.com/apache/ranger/), thus restricting access to data to only as much as needed.</span></span> <span data-ttu-id="2579b-109">Por fim, o administrador pode auditar o acesso a dados por funcionários e as alterações feitas às políticas de controle de acesso, atingindo assim um alto grau de controle de seus recursos corporativos.</span><span class="sxs-lookup"><span data-stu-id="2579b-109">Finally, the admin can audit the data access by employees, and any changes done to access control policies, thus achieving a high degree of governance of their corporate resources.</span></span>

> [!NOTE]
> <span data-ttu-id="2579b-110">Os novos recursos descritos nesta visualização estão disponíveis somente em clusters HDInsight baseados em Linux para carga de trabalho do Hive.</span><span class="sxs-lookup"><span data-stu-id="2579b-110">The new features described in this preview are available only on Linux-based HDInsight clusters for Hive workload.</span></span> <span data-ttu-id="2579b-111">As outras cargas de trabalho, como HBase, Spark, Storm e Kafka, serão habilitadas em versões futuras.</span><span class="sxs-lookup"><span data-stu-id="2579b-111">The other workloads, such as HBase, Spark, Storm and Kafka, will be enabled in future releases.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="2579b-112">O Oozie não está habilitado no HDInsight ingressado no domínio.</span><span class="sxs-lookup"><span data-stu-id="2579b-112">Oozie is not enabled on domain-joined HDInsight.</span></span>

## <a name="benefits"></a><span data-ttu-id="2579b-113">Benefícios</span><span class="sxs-lookup"><span data-stu-id="2579b-113">Benefits</span></span>
<span data-ttu-id="2579b-114">I Enterprise Security contém quatro grandes pilares: segurança do perímetro, autenticação, autorização e criptografia.</span><span class="sxs-lookup"><span data-stu-id="2579b-114">Enterprise Security contains four big pillars – Perimeter Security, Authentication, Authorization, and Encryption.</span></span>

![Pilares de benefícios de clusters HDInsight associados ao domínio](./media/hdinsight-domain-joined-introduction/hdinsight-domain-joined-four-pillars.png)<span data-ttu-id="2579b-116">.</span><span class="sxs-lookup"><span data-stu-id="2579b-116">.</span></span>

### <a name="perimeter-security"></a><span data-ttu-id="2579b-117">Segurança de Perímetro</span><span class="sxs-lookup"><span data-stu-id="2579b-117">Perimeter Security</span></span>
<span data-ttu-id="2579b-118">A segurança de perímetro no HDInsight é obtida usando redes virtuais e serviço de Gateway.</span><span class="sxs-lookup"><span data-stu-id="2579b-118">Perimeter security in HDInsight is achieved using virtual networks and Gateway service.</span></span> <span data-ttu-id="2579b-119">Hoje, um administrador de empresa pode criar um cluster HDInsight dentro de uma rede virtual e usar grupos de segurança de rede (regras de firewall de entrada ou saída) para restringir o acesso à rede virtual.</span><span class="sxs-lookup"><span data-stu-id="2579b-119">Today, an enterprise admin can create an HDInsight cluster inside a virtual network and use Network Security Groups (inbound or outbound firewall rules) to restrict access to the virtual network.</span></span> <span data-ttu-id="2579b-120">Somente os endereços IP definidos nas regras de firewall de entrada serão capazes de se comunicar com o cluster HDInsight, fornecendo assim segurança de perímetro.</span><span class="sxs-lookup"><span data-stu-id="2579b-120">Only the IP addresses defined in the inbound firewall rules will be able to communicate with the HDInsight cluster, thus providing perimeter security.</span></span> <span data-ttu-id="2579b-121">Outra camada de segurança de perímetro é obtida com o serviço de Gateway.</span><span class="sxs-lookup"><span data-stu-id="2579b-121">Another layer of perimeter security is achieved using Gateway service.</span></span> <span data-ttu-id="2579b-122">O Gateway é o serviço que atua como a primeira linha de defesa para qualquer solicitação de entrada para o cluster HDInsight.</span><span class="sxs-lookup"><span data-stu-id="2579b-122">The Gateway is the service which acts as first line of defense for any incoming request to the HDInsight cluster.</span></span> <span data-ttu-id="2579b-123">Ele aceita a solicitação, a valida e só então permite que a solicitação passe para os outros nós no cluster, fornecendo assim segurança de perímetro para outros nós de dados e nome no cluster.</span><span class="sxs-lookup"><span data-stu-id="2579b-123">It accepts the request, validates it and only then allows the request to pass to the other nodes in cluster, thus providing perimeter security to other name and data nodes in the cluster.</span></span>

### <a name="authentication"></a><span data-ttu-id="2579b-124">Autenticação</span><span class="sxs-lookup"><span data-stu-id="2579b-124">Authentication</span></span>
<span data-ttu-id="2579b-125">Com essa visualização pública, um administrador de empresa pode provisionar um cluster HDInsight associado ao domínio, em uma [rede virtual](https://azure.microsoft.com/services/virtual-network/).</span><span class="sxs-lookup"><span data-stu-id="2579b-125">With this public preview, an enterprise admin can provision a Domain-joined HDInsight cluster, in a [virtual network](https://azure.microsoft.com/services/virtual-network/).</span></span> <span data-ttu-id="2579b-126">Os nós do cluster HDInsight serão adicionados ao domínio gerenciado pela empresa.</span><span class="sxs-lookup"><span data-stu-id="2579b-126">The nodes of the HDInsight cluster will be joined to the domain managed by the enterprise.</span></span> <span data-ttu-id="2579b-127">Isso é feito com o uso de [Active Directory Domain Services](../active-directory-domain-services/active-directory-ds-overview.md).</span><span class="sxs-lookup"><span data-stu-id="2579b-127">This is achieved through use of [Azure Active Directory Domain Services](../active-directory-domain-services/active-directory-ds-overview.md).</span></span> <span data-ttu-id="2579b-128">Todos os nós no cluster são associados a um domínio que a empresa gerencia.</span><span class="sxs-lookup"><span data-stu-id="2579b-128">All the nodes in the cluster are joined to a domain that the enterprise manages.</span></span> <span data-ttu-id="2579b-129">Com essa configuração, os funcionários da empresa podem fazer logon nos nós de cluster usando suas credenciais de domínio.</span><span class="sxs-lookup"><span data-stu-id="2579b-129">With this setup, the enterprise employees can log on to the cluster nodes using their domain credentials.</span></span> <span data-ttu-id="2579b-130">Eles também podem usar suas credenciais de domínio para se autenticar em outros pontos de extremidade aprovados, como Hue, Ambari Views, ODBC, JDBC, PowerShell e APIs REST para interagir com o cluster.</span><span class="sxs-lookup"><span data-stu-id="2579b-130">They can also use their domain credentials to authenticate with other approved endpoints like Hue, Ambari Views, ODBC, JDBC, PowerShell and REST APIs to interact with the cluster.</span></span> <span data-ttu-id="2579b-131">O administrador tem controle total sobre a limitação do número de usuários que interagem com o cluster por meio desses pontos de extremidade.</span><span class="sxs-lookup"><span data-stu-id="2579b-131">The admin has full control over limiting the number of users interacting with the cluster via these endpoints.</span></span>

### <a name="authorization"></a><span data-ttu-id="2579b-132">Autorização</span><span class="sxs-lookup"><span data-stu-id="2579b-132">Authorization</span></span>
<span data-ttu-id="2579b-133">Uma prática recomendada, seguida pela maioria das empresas, é que nem todos os funcionário têm acesso a todos os recursos da empresa.</span><span class="sxs-lookup"><span data-stu-id="2579b-133">A best practice followed by most enterprises is that not every employee has access to all enterprise resources.</span></span> <span data-ttu-id="2579b-134">Da mesma forma, com esta versão, o administrador pode definir políticas de controle de acesso baseado em função para os recursos de cluster.</span><span class="sxs-lookup"><span data-stu-id="2579b-134">Likewise, with this release, the admin can define role based access control policies for the cluster resources.</span></span> <span data-ttu-id="2579b-135">Por exemplo, o administrador pode configurar o [Apache Ranger](http://hortonworks.com/apache/ranger/) para definir políticas de controle de acesso para o Hive.</span><span class="sxs-lookup"><span data-stu-id="2579b-135">For example, the admin can configure [Apache Ranger](http://hortonworks.com/apache/ranger/) to set access control policies for Hive.</span></span> <span data-ttu-id="2579b-136">Essa funcionalidade assegura que os funcionários possam acessar somente os dados de que precisam para serem bem-sucedidos em seus trabalhos.</span><span class="sxs-lookup"><span data-stu-id="2579b-136">This functionality ensures that employees will be able to access only as much data as they need to be successful in their jobs.</span></span> <span data-ttu-id="2579b-137">O acesso a SSH no cluster também é restrito somente ao administrador.</span><span class="sxs-lookup"><span data-stu-id="2579b-137">SSH access to the cluster is also restricted only to the administrator.</span></span>

### <a name="auditing"></a><span data-ttu-id="2579b-138">Auditoria</span><span class="sxs-lookup"><span data-stu-id="2579b-138">Auditing</span></span>
<span data-ttu-id="2579b-139">Além de proteger os recursos de cluster do HDInsight contra usuários não autorizados e proteger os dados, é necessário fazer a auditoria de todo o acesso a recursos de cluster e a dados para rastrear acesso não autorizado ou não intencional aos recursos.</span><span class="sxs-lookup"><span data-stu-id="2579b-139">Along with protecting the HDInsight cluster resources from unauthorized users, and securing the data, auditing of all access to the cluster resources, and the data is necessary to track unauthorized or unintentional access of the resources.</span></span> <span data-ttu-id="2579b-140">Com essa visualização, o administrador pode exibir e relatar todo o acesso aos recursos de cluster do HDInsight e dados.</span><span class="sxs-lookup"><span data-stu-id="2579b-140">With this preview, the admin can view and report all access to the HDInsight cluster resources and data.</span></span> <span data-ttu-id="2579b-141">O administrador também pode exibir e relatar todas as alterações nas políticas de controle de acesso feitas nos pontos de extremidade do Apache Ranger com suporte.</span><span class="sxs-lookup"><span data-stu-id="2579b-141">The admin can also view and report all changes to the access control policies done in Apache Ranger supported endpoints.</span></span> <span data-ttu-id="2579b-142">Um cluster HDInsight associado a um domínio usa a interface do usuário familiar do Apache Ranger para pesquisar logs de auditoria.</span><span class="sxs-lookup"><span data-stu-id="2579b-142">A Domain-joined HDInsight cluster uses the familiar Apache Ranger UI to search audit logs.</span></span> <span data-ttu-id="2579b-143">No back-end, o Ranger usa o [Apache Solr](http://hortonworks.com/apache/solr/) para armazenar e pesquisar os logs.</span><span class="sxs-lookup"><span data-stu-id="2579b-143">On the backend, Ranger uses [Apache Solr](http://hortonworks.com/apache/solr/) for storing and searching the logs.</span></span>

### <a name="encryption"></a><span data-ttu-id="2579b-144">Criptografia</span><span class="sxs-lookup"><span data-stu-id="2579b-144">Encryption</span></span>
<span data-ttu-id="2579b-145">A proteção dos dados é importante para atender aos requisitos de conformidade e segurança organizacional e, além de restringir o acesso a dados de funcionários não autorizados, eles também devem ser protegidos por criptografia.</span><span class="sxs-lookup"><span data-stu-id="2579b-145">Protecting data is important for meeting organizational security and compliance requirements, and along with restricting access to data from unauthorized employees, it should also be secured by encrypting it.</span></span> <span data-ttu-id="2579b-146">Os repositórios de dados para clusters HDInsight, Blob de Armazenamento do Azure e Azure Data Lake Storage dão suporte a [criptografia de dados](../storage/common/storage-service-encryption.md) transparente do lado do servidor em repouso.</span><span class="sxs-lookup"><span data-stu-id="2579b-146">Both the data stores for HDInsight clusters, Azure Storage Blob, and Azure Data Lake Storage support transparent server-side [encryption of data](../storage/common/storage-service-encryption.md) at rest.</span></span> <span data-ttu-id="2579b-147">A proteção de clusters HDInsight funcionará perfeitamente com essa criptografia do lado do servidor de dados em capacidade em repouso.</span><span class="sxs-lookup"><span data-stu-id="2579b-147">Secure HDInsight clusters will seamlessly work with this server side encryption of data at rest capability.</span></span>

## <a name="next-steps"></a><span data-ttu-id="2579b-148">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="2579b-148">Next steps</span></span>
* <span data-ttu-id="2579b-149">Para configurar um cluster HDInsight associado a um domínio, confira [Configurar clusters HDInsight associados a domínio](hdinsight-domain-joined-configure.md).</span><span class="sxs-lookup"><span data-stu-id="2579b-149">For configuring a Domain-joined HDInsight cluster, see [Configure Domain-joined HDInsight clusters](hdinsight-domain-joined-configure.md).</span></span>
* <span data-ttu-id="2579b-150">Para gerenciar um cluster HDInsight associado a um domínio, confira [Gerenciar clusters HDInsight associados a domínio](hdinsight-domain-joined-manage.md).</span><span class="sxs-lookup"><span data-stu-id="2579b-150">For managing a Domain-joined HDInsight clusters, see [Manage Domain-joined HDInsight clusters](hdinsight-domain-joined-manage.md).</span></span>
* <span data-ttu-id="2579b-151">Para configurar políticas do Hive e executar consultas do Hive, confira [Configurar políticas do Hive para clusters HDInsight associados ao domínio](hdinsight-domain-joined-run-hive.md).</span><span class="sxs-lookup"><span data-stu-id="2579b-151">For configuring Hive policies and run Hive queries, see [Configure Hive policies for Domain-joined HDInsight clusters](hdinsight-domain-joined-run-hive.md).</span></span>
* <span data-ttu-id="2579b-152">Para executar consultas Hive usando SSH em clusters HDInsight adicionados ao domínio, confira [Usar SSH com HDInsight](hdinsight-hadoop-linux-use-ssh-unix.md#domainjoined).</span><span class="sxs-lookup"><span data-stu-id="2579b-152">For running Hive queries using SSH on Domain-joined HDInsight clusters, see [Use SSH with HDInsight](hdinsight-hadoop-linux-use-ssh-unix.md#domainjoined).</span></span>
