---
title: 'Gerar e exportar certificados para o Ponto a Site: MakeCert : Azure | Microsoft Docs'
description: "Este artigo contém etapas toocreate um certificado auto-assinado, exportar a chave pública hello e gerar os certificados de cliente usando MakeCert."
services: vpn-gateway
documentationcenter: na
author: cherylmc
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 
ms.service: vpn-gateway
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 08/09/2017
ms.author: cherylmc
ms.openlocfilehash: 0b795ccf74f1f97fbd3de8a0dc339f9cb0b48183
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="generate-and-export-certificates-for-point-to-site-connections-using-makecert"></a><span data-ttu-id="ef5ec-103">Gerar e exportar certificados para conexões Ponto a Site usando o MakeCert</span><span class="sxs-lookup"><span data-stu-id="ef5ec-103">Generate and export certificates for Point-to-Site connections using MakeCert</span></span>

<span data-ttu-id="ef5ec-104">Conexões ponto a Site usam certificados tooauthenticate.</span><span class="sxs-lookup"><span data-stu-id="ef5ec-104">Point-to-Site connections use certificates tooauthenticate.</span></span> <span data-ttu-id="ef5ec-105">Este artigo mostra como o certificado de raiz toocreate um autoassinado e gerar os certificados de cliente usando MakeCert.</span><span class="sxs-lookup"><span data-stu-id="ef5ec-105">This article shows you how toocreate a self-signed root certificate and generate client certificates using MakeCert.</span></span> <span data-ttu-id="ef5ec-106">Se você estiver procurando para etapas de configuração de ponto a Site, como como listam certificados de raiz tooupload, selecione um dos artigos de saudação ' Configure ponto a Site' de saudação a seguir:</span><span class="sxs-lookup"><span data-stu-id="ef5ec-106">If you are looking for Point-to-Site configuration steps, such as how tooupload root certificates, select one of hello 'Configure Point-to-Site' articles from hello following list:</span></span>

> [!div class="op_single_selector"]
> * [<span data-ttu-id="ef5ec-107">Criar certificados autoassinados – PowerShell</span><span class="sxs-lookup"><span data-stu-id="ef5ec-107">Create self-signed certificates - PowerShell</span></span>](vpn-gateway-certificates-point-to-site.md)
> * [<span data-ttu-id="ef5ec-108">Criar certificados autoassinados - MakeCert</span><span class="sxs-lookup"><span data-stu-id="ef5ec-108">Create self-signed certificates - MakeCert</span></span>](vpn-gateway-certificates-point-to-site-makecert.md)
> * [<span data-ttu-id="ef5ec-109">Configurar Ponto a Site – Resource Manager – portal do Azure</span><span class="sxs-lookup"><span data-stu-id="ef5ec-109">Configure Point-to-Site - Resource Manager - Azure portal</span></span>](vpn-gateway-howto-point-to-site-resource-manager-portal.md)
> * [<span data-ttu-id="ef5ec-110">Configurar o Point-to-Site - Gerenciador de recursos - Portal do Azure</span><span class="sxs-lookup"><span data-stu-id="ef5ec-110">Configure Point-to-Site - Resource Manager - PowerShell</span></span>](vpn-gateway-howto-point-to-site-rm-ps.md)
> * [<span data-ttu-id="ef5ec-111">Configurar Ponto a Site – Clássico – portal do Azure</span><span class="sxs-lookup"><span data-stu-id="ef5ec-111">Configure Point-to-Site - Classic - Azure portal</span></span>](vpn-gateway-howto-point-to-site-classic-azure-portal.md)
> 
> 

<span data-ttu-id="ef5ec-112">Enquanto é recomendável usar Olá [etapas do PowerShell do Windows 10](vpn-gateway-certificates-point-to-site.md) toocreate os certificados, fornecemos essas instruções MakeCert como um método opcional.</span><span class="sxs-lookup"><span data-stu-id="ef5ec-112">While we recommend using hello [Windows 10 PowerShell steps](vpn-gateway-certificates-point-to-site.md) toocreate your certificates, we provide these MakeCert instructions as an optional method.</span></span> <span data-ttu-id="ef5ec-113">certificados de saudação geradas usando qualquer método que podem ser instalados em [qualquer sistema operacional de cliente com suporte](vpn-gateway-howto-point-to-site-resource-manager-portal.md#faq).</span><span class="sxs-lookup"><span data-stu-id="ef5ec-113">hello certificates that you generate using either method can be installed on [any supported client operating system](vpn-gateway-howto-point-to-site-resource-manager-portal.md#faq).</span></span> <span data-ttu-id="ef5ec-114">No entanto, o MakeCert tem Olá limitação a seguir:</span><span class="sxs-lookup"><span data-stu-id="ef5ec-114">However, MakeCert has hello following limitation:</span></span>

* <span data-ttu-id="ef5ec-115">O MakeCert foi preterido.</span><span class="sxs-lookup"><span data-stu-id="ef5ec-115">MakeCert is deprecated.</span></span> <span data-ttu-id="ef5ec-116">Isso significa que essa ferramenta pode ser removida a qualquer momento.</span><span class="sxs-lookup"><span data-stu-id="ef5ec-116">This means that this tool could be removed at any point.</span></span> <span data-ttu-id="ef5ec-117">Todos os certificados que você já tiver gerado usando MakeCert não serão afetados quando o MakeCert não estiver mais disponível.</span><span class="sxs-lookup"><span data-stu-id="ef5ec-117">Any certificates that you already generated using MakeCert won't be affected when MakeCert is no longer available.</span></span> <span data-ttu-id="ef5ec-118">MakeCert somente os certificados de saudação toogenerate usado, não é um mecanismo de validação.</span><span class="sxs-lookup"><span data-stu-id="ef5ec-118">MakeCert is only used toogenerate hello certificates, not as a validating mechanism.</span></span>

## <span data-ttu-id="ef5ec-119"><a name="rootcert"></a>Criar um certificado raiz autoassinado</span><span class="sxs-lookup"><span data-stu-id="ef5ec-119"><a name="rootcert"></a>Create a self-signed root certificate</span></span>

<span data-ttu-id="ef5ec-120">Olá, as etapas a seguir mostra como toocreate um autoassinado certificado usando MakeCert.</span><span class="sxs-lookup"><span data-stu-id="ef5ec-120">hello following steps show you how toocreate a self-signed certificate using MakeCert.</span></span> <span data-ttu-id="ef5ec-121">Essas etapas não são específicas do modelo de implantação.</span><span class="sxs-lookup"><span data-stu-id="ef5ec-121">These steps are not deployment-model specific.</span></span> <span data-ttu-id="ef5ec-122">Elas são válidas tanto para o Gerenciador de Recursos quanto para o clássico.</span><span class="sxs-lookup"><span data-stu-id="ef5ec-122">They are valid for both Resource Manager and classic.</span></span>

1. <span data-ttu-id="ef5ec-123">Baixe e instale o [MakeCert](https://msdn.microsoft.com/library/windows/desktop/aa386968(v=vs.85).aspx).</span><span class="sxs-lookup"><span data-stu-id="ef5ec-123">Download and install [MakeCert](https://msdn.microsoft.com/library/windows/desktop/aa386968(v=vs.85).aspx).</span></span>
2. <span data-ttu-id="ef5ec-124">Após a instalação, normalmente você pode encontrar o utilitário makecert.exe de saudação nesse caminho: ' C:\Program Files (x86) \Windows Kits\10\bin\<arch >'.</span><span class="sxs-lookup"><span data-stu-id="ef5ec-124">After installation, you can typically find hello makecert.exe utility under this path: 'C:\Program Files (x86)\Windows Kits\10\bin\<arch>'.</span></span> <span data-ttu-id="ef5ec-125">Embora, é possível que eles foram instalados tooanother local.</span><span class="sxs-lookup"><span data-stu-id="ef5ec-125">Although, it's possible that it was installed tooanother location.</span></span> <span data-ttu-id="ef5ec-126">Abra um prompt de comando como administrador e navegue local toohello de saudação utilitário MakeCert.</span><span class="sxs-lookup"><span data-stu-id="ef5ec-126">Open a command prompt as administrator and navigate toohello location of hello MakeCert utility.</span></span> <span data-ttu-id="ef5ec-127">Você pode usar o hello exemplo a seguir, ajustando para a localização correta hello:</span><span class="sxs-lookup"><span data-stu-id="ef5ec-127">You can use hello following example, adjusting for hello proper location:</span></span>

  ```cmd
  cd C:\Program Files (x86)\Windows Kits\10\bin\x64
  ```
3. <span data-ttu-id="ef5ec-128">Crie e instale um certificado no repositório de certificados pessoal da saudação em seu computador.</span><span class="sxs-lookup"><span data-stu-id="ef5ec-128">Create and install a certificate in hello Personal certificate store on your computer.</span></span> <span data-ttu-id="ef5ec-129">Olá exemplo a seguir cria um correspondente *. cer* arquivo que você carregue tooAzure ao configurar P2S.</span><span class="sxs-lookup"><span data-stu-id="ef5ec-129">hello following example creates a corresponding *.cer* file that you upload tooAzure when configuring P2S.</span></span> <span data-ttu-id="ef5ec-130">Substitua 'P2SRootCert' e 'P2SRootCert.cer' com nome hello que você deseja toouse certificado hello.</span><span class="sxs-lookup"><span data-stu-id="ef5ec-130">Replace 'P2SRootCert' and 'P2SRootCert.cer' with hello name that you want toouse for hello certificate.</span></span> <span data-ttu-id="ef5ec-131">Olá certificado está localizado em 'Certificados - certificados atual'.</span><span class="sxs-lookup"><span data-stu-id="ef5ec-131">hello certificate is located in your 'Certificates - Current User\Personal\Certificates'.</span></span>

  ```cmd
  makecert -sky exchange -r -n "CN=P2SRootCert" -pe -a sha256 -len 2048 -ss My
  ```

## <span data-ttu-id="ef5ec-132"><a name="cer"></a>Exportar a chave pública da saudação (. cer)</span><span class="sxs-lookup"><span data-stu-id="ef5ec-132"><a name="cer"></a>Export hello public key (.cer)</span></span>

[!INCLUDE [Export public key](../../includes/vpn-gateway-certificates-export-public-key-include.md)]

<span data-ttu-id="ef5ec-133">arquivo de exported.cer Olá deve ser carregado tooAzure.</span><span class="sxs-lookup"><span data-stu-id="ef5ec-133">hello exported.cer file must be uploaded tooAzure.</span></span> <span data-ttu-id="ef5ec-134">Para obter instruções, consulte [Configurar uma conexão ponto a site](vpn-gateway-howto-point-to-site-resource-manager-portal.md#uploadfile).</span><span class="sxs-lookup"><span data-stu-id="ef5ec-134">For instructions, see [Configure a Point-to-Site connection](vpn-gateway-howto-point-to-site-resource-manager-portal.md#uploadfile).</span></span> <span data-ttu-id="ef5ec-135">tooadd um certificado de raiz confiável, consulte [nesta seção](vpn-gateway-howto-point-to-site-resource-manager-portal.md#add) artigo hello.</span><span class="sxs-lookup"><span data-stu-id="ef5ec-135">tooadd an additional trusted root certificate, see [this section](vpn-gateway-howto-point-to-site-resource-manager-portal.md#add) of hello article.</span></span>

### <a name="export-hello-self-signed-certificate-and-private-key-toostore-it-optional"></a><span data-ttu-id="ef5ec-136">Exportar o certificado autoassinado hello e toostore chave privada (opcional)</span><span class="sxs-lookup"><span data-stu-id="ef5ec-136">Export hello self-signed certificate and private key toostore it (optional)</span></span>

<span data-ttu-id="ef5ec-137">Talvez você queira tooexport Olá certificado raiz autoassinado e armazená-la com segurança.</span><span class="sxs-lookup"><span data-stu-id="ef5ec-137">You may want tooexport hello self-signed root certificate and store it safely.</span></span> <span data-ttu-id="ef5ec-138">Se precisar, você pode instalá-lo depois em outro computador e gerar mais certificados de cliente, ou exportar outro arquivo .cer.</span><span class="sxs-lookup"><span data-stu-id="ef5ec-138">If need be, you can later install it on another computer and generate more client certificates, or export another .cer file.</span></span> <span data-ttu-id="ef5ec-139">Olá tooexport raiz certificado autoassinado como um. pfx, certificado de raiz Olá selecione e use Olá mesmas etapas conforme descrito em [exportar um certificado de cliente](#clientexport).</span><span class="sxs-lookup"><span data-stu-id="ef5ec-139">tooexport hello self-signed root certificate as a .pfx, select hello root certificate and use hello same steps as described in [Export a client certificate](#clientexport).</span></span>

## <a name="create-and-install-client-certificates"></a><span data-ttu-id="ef5ec-140">Criar e instalar certificados de cliente</span><span class="sxs-lookup"><span data-stu-id="ef5ec-140">Create and install client certificates</span></span>

<span data-ttu-id="ef5ec-141">Não instalar o certificado autoassinado Olá diretamente no computador do cliente hello.</span><span class="sxs-lookup"><span data-stu-id="ef5ec-141">You don't install hello self-signed certificate directly on hello client computer.</span></span> <span data-ttu-id="ef5ec-142">É necessário toogenerate um certificado do cliente do certificado autoassinado hello.</span><span class="sxs-lookup"><span data-stu-id="ef5ec-142">You need toogenerate a client certificate from hello self-signed certificate.</span></span> <span data-ttu-id="ef5ec-143">Em seguida, exportar e instalar o computador de cliente do hello cliente certificado toohello.</span><span class="sxs-lookup"><span data-stu-id="ef5ec-143">You then export and install hello client certificate toohello client computer.</span></span> <span data-ttu-id="ef5ec-144">Olá, as etapas a seguir não é específicas do modelo de implantação.</span><span class="sxs-lookup"><span data-stu-id="ef5ec-144">hello following steps are not deployment-model specific.</span></span> <span data-ttu-id="ef5ec-145">Elas são válidas tanto para o Gerenciador de Recursos quanto para o clássico.</span><span class="sxs-lookup"><span data-stu-id="ef5ec-145">They are valid for both Resource Manager and classic.</span></span>

### <span data-ttu-id="ef5ec-146"><a name="clientcert"></a>Gerar um certificado do cliente</span><span class="sxs-lookup"><span data-stu-id="ef5ec-146"><a name="clientcert"></a>Generate a client certificate</span></span>

<span data-ttu-id="ef5ec-147">Cada computador cliente que se conecta tooa VNet usando ponto a Site deve ter um certificado de cliente instalado.</span><span class="sxs-lookup"><span data-stu-id="ef5ec-147">Each client computer that connects tooa VNet using Point-to-Site must have a client certificate installed.</span></span> <span data-ttu-id="ef5ec-148">Gere um certificado de cliente de certificado raiz autoassinado de Olá e, em seguida, exportar e instalar o certificado de cliente hello.</span><span class="sxs-lookup"><span data-stu-id="ef5ec-148">You generate a client certificate from hello self-signed root certificate, and then export and install hello client certificate.</span></span> <span data-ttu-id="ef5ec-149">Se o certificado de cliente Olá não estiver instalado, a autenticação falhará.</span><span class="sxs-lookup"><span data-stu-id="ef5ec-149">If hello client certificate is not installed, authentication fails.</span></span> 

<span data-ttu-id="ef5ec-150">Olá etapas a seguir orientam você durante a geração de um certificado de cliente de um certificado raiz autoassinado.</span><span class="sxs-lookup"><span data-stu-id="ef5ec-150">hello following steps walk you through generating a client certificate from a self-signed root certificate.</span></span> <span data-ttu-id="ef5ec-151">Você pode gerar vários certificados de cliente de saudação mesmo certificado raiz.</span><span class="sxs-lookup"><span data-stu-id="ef5ec-151">You may generate multiple client certificates from hello same root certificate.</span></span> <span data-ttu-id="ef5ec-152">Quando você gerar os certificados de cliente usando Olá etapas abaixo, o certificado de cliente Olá é instalado automaticamente no computador de saudação que você usou o certificado de saudação toogenerate.</span><span class="sxs-lookup"><span data-stu-id="ef5ec-152">When you generate client certificates using hello steps below, hello client certificate is automatically installed on hello computer that you used toogenerate hello certificate.</span></span> <span data-ttu-id="ef5ec-153">Se você quiser tooinstall um certificado de cliente em outro computador cliente, você pode exportar o certificado de saudação.</span><span class="sxs-lookup"><span data-stu-id="ef5ec-153">If you want tooinstall a client certificate on another client computer, you can export hello certificate.</span></span>
 
1. <span data-ttu-id="ef5ec-154">Em Olá mesmo computador que você usou Olá toocreate certificado autoassinado, abra um prompt de comando como administrador.</span><span class="sxs-lookup"><span data-stu-id="ef5ec-154">On hello same computer that you used toocreate hello self-signed certificate, open a command prompt as administrator.</span></span>
2. <span data-ttu-id="ef5ec-155">Modifique e execute toogenerate de exemplo hello um certificado de cliente.</span><span class="sxs-lookup"><span data-stu-id="ef5ec-155">Modify and run hello sample toogenerate a client certificate.</span></span>
  * <span data-ttu-id="ef5ec-156">Alterar *"P2SRootCert"* toohello nome da saudação auto-assinado que estão gerando o certificado do cliente de saudação do.</span><span class="sxs-lookup"><span data-stu-id="ef5ec-156">Change *"P2SRootCert"* toohello name of hello self-signed root that you are generating hello client certificate from.</span></span> <span data-ttu-id="ef5ec-157">Verifique se está usando o nome de Olá Olá do certificado de raiz, que é qualquer hello ' CN =' valor foi especificado quando você criou Olá auto-assinado.</span><span class="sxs-lookup"><span data-stu-id="ef5ec-157">Make sure you are using hello name of hello root certificate, which is whatever hello 'CN=' value was that you specified when you created hello self-signed root.</span></span>
  * <span data-ttu-id="ef5ec-158">Alterar *P2SChildCert* toohello nome toogenerate um toobe de certificado de cliente.</span><span class="sxs-lookup"><span data-stu-id="ef5ec-158">Change *P2SChildCert* toohello name you want toogenerate a client certificate toobe.</span></span>

  <span data-ttu-id="ef5ec-159">Se você executar Olá exemplo a seguir sem modificá-lo, o resultado de saudação é um certificado de cliente chamado P2SChildcert no repositório de certificados pessoais que foi gerado a partir do certificado raiz P2SRootCert.</span><span class="sxs-lookup"><span data-stu-id="ef5ec-159">If you run hello following example without modifying it, hello result is a client certificate named P2SChildcert in your Personal certificate store that was generated from root certificate P2SRootCert.</span></span>

  ```cmd
  makecert.exe -n "CN=P2SChildCert" -pe -sky exchange -m 96 -ss My -in "P2SRootCert" -is my -a sha256
  ```

### <span data-ttu-id="ef5ec-160"><a name="clientexport"></a>Exportar um certificado do cliente</span><span class="sxs-lookup"><span data-stu-id="ef5ec-160"><a name="clientexport"></a>Export a client certificate</span></span>

[!INCLUDE [Export client certificate](../../includes/vpn-gateway-certificates-export-client-cert-include.md)]

### <span data-ttu-id="ef5ec-161"><a name="install"></a>Instalar um certificado do cliente exportado</span><span class="sxs-lookup"><span data-stu-id="ef5ec-161"><a name="install"></a>Install an exported client certificate</span></span>

[!INCLUDE [Install client certificate](../../includes/vpn-gateway-certificates-install-client-cert-include.md)]

## <a name="next-steps"></a><span data-ttu-id="ef5ec-162">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="ef5ec-162">Next steps</span></span>

<span data-ttu-id="ef5ec-163">Continue com a configuração de Ponto a Site.</span><span class="sxs-lookup"><span data-stu-id="ef5ec-163">Continue with your Point-to-Site configuration.</span></span> 

* <span data-ttu-id="ef5ec-164">Para **Gerenciador de recursos de** etapas do modelo de implantação, consulte [configurar uma conexão de ponto para Site tooa VNet](vpn-gateway-howto-point-to-site-resource-manager-portal.md).</span><span class="sxs-lookup"><span data-stu-id="ef5ec-164">For **Resource Manager** deployment model steps, see [Configure a Point-to-Site connection tooa VNet](vpn-gateway-howto-point-to-site-resource-manager-portal.md).</span></span>
* <span data-ttu-id="ef5ec-165">Para **clássico** etapas do modelo de implantação, consulte [configurar uma conexão de VPN ponto a Site tooa VNet (clássico)](vpn-gateway-howto-point-to-site-classic-azure-portal.md).</span><span class="sxs-lookup"><span data-stu-id="ef5ec-165">For **classic** deployment model steps, see [Configure a Point-to-Site VPN connection tooa VNet (classic)](vpn-gateway-howto-point-to-site-classic-azure-portal.md).</span></span>
