---
title: "Análise de eventos de malha do serviço com o Application Insights de aaaAzure | Microsoft Docs"
description: "Saiba mais sobre visualização e análise de eventos utilizando o Application Insights para o monitoramento e diagnóstico de clusters do Azure Service Fabric."
services: service-fabric
documentationcenter: .net
author: dkkapur
manager: timlt
editor: 
ms.assetid: 
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 05/26/2017
ms.author: dekapur
ms.openlocfilehash: 59bb5a409f2951e5b2034049e782dd0da67f933c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="event-analysis-and-visualization-with-application-insights"></a><span data-ttu-id="9cc1e-103">Visualização e análise de eventos com o Application Insights</span><span class="sxs-lookup"><span data-stu-id="9cc1e-103">Event analysis and visualization with Application Insights</span></span>

<span data-ttu-id="9cc1e-104">O Azure Application Insights é uma plataforma extensível para monitoramento e diagnóstico de aplicativos.</span><span class="sxs-lookup"><span data-stu-id="9cc1e-104">Azure Application Insights is an extensible platform for application monitoring and diagnostics.</span></span> <span data-ttu-id="9cc1e-105">Inclui uma poderosa ferramenta de análise e consulta, visualizações e dashboard personalizável e outras opções, incluindo alertas automatizados.</span><span class="sxs-lookup"><span data-stu-id="9cc1e-105">It includes a powerful analytics and querying tool, customizable dashboard and visualizations, and further options including automated alerting.</span></span> <span data-ttu-id="9cc1e-106">Ele é hello recomendado plataforma para monitoramento e diagnóstico para serviços e aplicativos do Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="9cc1e-106">It is hello recommended platform for monitoring and diagnostics for Service Fabric applications and services.</span></span>

## <a name="setting-up-application-insights"></a><span data-ttu-id="9cc1e-107">Configurando o Application Insights</span><span class="sxs-lookup"><span data-stu-id="9cc1e-107">Setting up Application Insights</span></span>

### <a name="creating-an-ai-resource"></a><span data-ttu-id="9cc1e-108">Criar um Recurso do AI</span><span class="sxs-lookup"><span data-stu-id="9cc1e-108">Creating an AI Resource</span></span>

<span data-ttu-id="9cc1e-109">recurso de toocreate um AI, principal toohello Azure Marketplace e procure "Application Insights".</span><span class="sxs-lookup"><span data-stu-id="9cc1e-109">toocreate an AI resource, head over toohello Azure Marketplace, and search for "Application Insights".</span></span> <span data-ttu-id="9cc1e-110">Ele deve aparecer como primeira solução de saudação (está sob a categoria "Web + móvel").</span><span class="sxs-lookup"><span data-stu-id="9cc1e-110">It should show up as hello first solution (it is under category "Web + Mobile").</span></span> <span data-ttu-id="9cc1e-111">Clique em **criar** quando você estiver procurando no recurso direito da saudação (confirme se o caminho corresponde a imagem de saudação abaixo).</span><span class="sxs-lookup"><span data-stu-id="9cc1e-111">Click **Create** when you are looking at hello right resource (confirm that your path matches hello image below).</span></span>

![Novo recurso do Application Insights](media/service-fabric-diagnostics-event-analysis-appinsights/create-new-ai-resource.png)

<span data-ttu-id="9cc1e-113">Você precisará toofill-out de alguns recursos de saudação tooprovision informações corretamente.</span><span class="sxs-lookup"><span data-stu-id="9cc1e-113">You will need toofill out some information tooprovision hello resource correctly.</span></span> <span data-ttu-id="9cc1e-114">Em Olá *tipo de aplicativo* campo, use "Aplicativo web do ASP.NET" Se você estiver usando qualquer serviço de malha de modelos de programação ou publicar um cluster de toohello do aplicativo .NET.</span><span class="sxs-lookup"><span data-stu-id="9cc1e-114">In hello *Application Type* field, use "ASP.NET web application" if you will be using any of Service Fabric's programming models or publishing a .NET application toohello cluster.</span></span> <span data-ttu-id="9cc1e-115">Utilize "Geral" se você estiver implantando contêineres e executáveis do convidado.</span><span class="sxs-lookup"><span data-stu-id="9cc1e-115">Use "General" if you will be deploying guest executables and containers.</span></span> <span data-ttu-id="9cc1e-116">Em geral, padrão toousing "Aplicativo web do ASP.NET" tookeep suas opções abra no hello futuras.</span><span class="sxs-lookup"><span data-stu-id="9cc1e-116">In general, default toousing "ASP.NET web application" tookeep your options open in hello future.</span></span> <span data-ttu-id="9cc1e-117">nome de saudação é a preferência de tooyour e o grupo de recursos hello e assinatura são mutável pós-implantação do recurso de saudação.</span><span class="sxs-lookup"><span data-stu-id="9cc1e-117">hello name is up tooyour preference, and both hello resource group and subscription are changeable post-deployment of hello resource.</span></span> <span data-ttu-id="9cc1e-118">Recomendamos que o recurso AI em Olá mesmo grupo de recursos que o seu cluster.</span><span class="sxs-lookup"><span data-stu-id="9cc1e-118">We recommend that your AI resource is in hello same resource group as your cluster.</span></span> <span data-ttu-id="9cc1e-119">Caso precise de mais informações, consulte [Criar um recurso do Application Insights](../application-insights/app-insights-create-new-resource.md)</span><span class="sxs-lookup"><span data-stu-id="9cc1e-119">If you need more information, please see [Create an Application Insights resource](../application-insights/app-insights-create-new-resource.md)</span></span>

<span data-ttu-id="9cc1e-120">Você precisa Olá chave de instrumentação AI tooconfigure AI com sua ferramenta de agregação de eventos.</span><span class="sxs-lookup"><span data-stu-id="9cc1e-120">You need hello AI Instrumentation Key tooconfigure AI with your event aggregation tool.</span></span> <span data-ttu-id="9cc1e-121">Depois que o recurso AI estiver configurado (leva alguns minutos após a implantação de saudação é validada), navegue tooit e localize Olá **propriedades** seção na barra de navegação à esquerda de saudação.</span><span class="sxs-lookup"><span data-stu-id="9cc1e-121">Once your AI resource is set up (takes a few minutes after hello deployment is validated), navigate tooit and find hello **Properties** section on hello left navigation bar.</span></span> <span data-ttu-id="9cc1e-122">Uma nova folha será aberta e exibirá uma *CHAVE DE INSTRUMENTAÇÃO*.</span><span class="sxs-lookup"><span data-stu-id="9cc1e-122">A new blade will open up that shows an *INSTRUMENTATION KEY*.</span></span> <span data-ttu-id="9cc1e-123">Se você precisar de assinatura de saudação toochange ou grupo de recursos do recurso hello, ele pode ser feito aqui também.</span><span class="sxs-lookup"><span data-stu-id="9cc1e-123">If you need toochange hello subscription or resource group of hello resource, it can be done here as well.</span></span>

### <a name="configuring-ai-with-wad"></a><span data-ttu-id="9cc1e-124">Configurar o AI com WAD</span><span class="sxs-lookup"><span data-stu-id="9cc1e-124">Configuring AI with WAD</span></span>

<span data-ttu-id="9cc1e-125">Há duas maneiras principais dados toosend do WAD tooAzure AI, que são obtidos pela adição de uma configuração do AI coletor toohello WAD, conforme detalhado no [neste artigo](../monitoring-and-diagnostics/azure-diagnostics-configure-application-insights.md).</span><span class="sxs-lookup"><span data-stu-id="9cc1e-125">There are two primary ways toosend data from WAD tooAzure AI, which is achieved by adding an AI sink toohello WAD configuration, as detailed in [this article](../monitoring-and-diagnostics/azure-diagnostics-configure-application-insights.md).</span></span>

#### <a name="add-an-ai-instrumentation-key-when-creating-a-cluster-in-azure-portal"></a><span data-ttu-id="9cc1e-126">Adicione uma Chave de Instrumentação do AI ao criar um cluster no Portal do Azure</span><span class="sxs-lookup"><span data-stu-id="9cc1e-126">Add an AI Instrumentation Key when creating a cluster in Azure portal</span></span>

![Adicionar uma AIKey](media/service-fabric-diagnostics-event-analysis-appinsights/azure-enable-diagnostics.png)

<span data-ttu-id="9cc1e-128">Ao criar um cluster, se o diagnóstico está ativado "", um campo opcional tooenter uma chave de instrumentação do Application Insights mostrará.</span><span class="sxs-lookup"><span data-stu-id="9cc1e-128">When creating a cluster, if Diagnostics is turned "On", an optional field tooenter an Application Insights Instrumentation key will show.</span></span> <span data-ttu-id="9cc1e-129">Se você colar o IKey AI aqui, o coletor Olá AI será automaticamente configurado por você no modelo do Gerenciador de recursos de saudação que é usado toodeploy seu cluster.</span><span class="sxs-lookup"><span data-stu-id="9cc1e-129">If you paste your AI IKey here, hello AI sink will be automatically configured for you in hello Resource Manager template that is used toodeploy your cluster.</span></span>

#### <a name="add-hello-ai-sink-toohello-resource-manager-template"></a><span data-ttu-id="9cc1e-130">Adicionar Olá modelo do coletor AI toohello Gerenciador de recursos</span><span class="sxs-lookup"><span data-stu-id="9cc1e-130">Add hello AI Sink toohello Resource Manager template</span></span>

<span data-ttu-id="9cc1e-131">Adicione "Sink" hello "WadCfg" do modelo do Gerenciador de recursos de Olá, incluindo Olá duas alterações a seguir:</span><span class="sxs-lookup"><span data-stu-id="9cc1e-131">In hello "WadCfg" of hello Resource Manager template, add a "Sink" by including hello following two changes:</span></span>

1. <span data-ttu-id="9cc1e-132">Adicione configuração do coletor de saudação:</span><span class="sxs-lookup"><span data-stu-id="9cc1e-132">Add hello sink configuration:</span></span>

    ```json
    "SinksConfig": {
        "Sink": [
            {
                "name": "applicationInsights",
                "ApplicationInsights": "***ADD INSTRUMENTATION KEY HERE***"
            }
        ]
    }

    ```

2. <span data-ttu-id="9cc1e-133">Inclua Olá coletor Olá DiagnosticMonitorConfiguration por adicionar Olá a seguinte linha no "DiagnosticMonitorConfiguration" hello "WadCfg":</span><span class="sxs-lookup"><span data-stu-id="9cc1e-133">Include hello Sink in hello DiagnosticMonitorConfiguration by adding hello following line in "DiagnosticMonitorConfiguration" of hello "WadCfg":</span></span>

    ```json
    "sinks": "applicationInsights"
    ```

<span data-ttu-id="9cc1e-134">Em ambos os trechos de código Olá acima, Olá nome "applicationInsights" era coletor de saudação toodescribe usado.</span><span class="sxs-lookup"><span data-stu-id="9cc1e-134">In both hello code snippets above, hello name "applicationInsights" was used toodescribe hello sink.</span></span> <span data-ttu-id="9cc1e-135">Isso não é um requisito e como nome de saudação do coletor de saudação é incluído no "coletores", você pode definir a cadeia de caracteres hello name tooany.</span><span class="sxs-lookup"><span data-stu-id="9cc1e-135">This is not a requirement and as long as hello name of hello sink is included in "sinks", you can set hello name tooany string.</span></span>

<span data-ttu-id="9cc1e-136">Atualmente, os logs de cluster Olá aparecerão como rastreamentos no Visualizador de log do AI.</span><span class="sxs-lookup"><span data-stu-id="9cc1e-136">Currently, logs from hello cluster will show up as traces in AI's log viewer.</span></span> <span data-ttu-id="9cc1e-137">Desde que a maioria dos rastreamentos Olá provenientes de plataforma de saudação for de nível de "Informação", você também pode considerar a alteração de logs de envio de tooonly Olá coletor configuração do tipo "Crítico" ou "Error".</span><span class="sxs-lookup"><span data-stu-id="9cc1e-137">Since most of hello traces coming from hello platform are of level "Informational", you can also consider changing hello sink configuration tooonly send logs of type "Critical" or "Error".</span></span> <span data-ttu-id="9cc1e-138">Isso pode ser feito adicionando o coletor de tooyour de "Canais", conforme demonstrado no [neste artigo](../monitoring-and-diagnostics/azure-diagnostics-configure-application-insights.md).</span><span class="sxs-lookup"><span data-stu-id="9cc1e-138">This can be done by adding "Channels" tooyour sink, as demonstrated in [this article](../monitoring-and-diagnostics/azure-diagnostics-configure-application-insights.md).</span></span>

>[!NOTE]
><span data-ttu-id="9cc1e-139">Se você usar um IKey AI incorreto no portal ou em seu modelo do Gerenciador de recursos, você terá toomanually alterar chave hello e atualizar cluster Olá / reimplantá-lo.</span><span class="sxs-lookup"><span data-stu-id="9cc1e-139">If you use an incorrect AI IKey either in portal or in your Resource Manager template, you will have toomanually change hello key and update hello cluster / redeploy it.</span></span> 

### <a name="configuring-ai-with-eventflow"></a><span data-ttu-id="9cc1e-140">Configurar AI com EventFlow</span><span class="sxs-lookup"><span data-stu-id="9cc1e-140">Configuring AI with EventFlow</span></span>

<span data-ttu-id="9cc1e-141">Se você estiver usando EventFlow tooaggregate eventos, verifique se Olá de tooimport `Microsoft.Diagnostics.EventFlow.Output.ApplicationInsights`pacote NuGet.</span><span class="sxs-lookup"><span data-stu-id="9cc1e-141">If you are using EventFlow tooaggregate events, make sure tooimport hello `Microsoft.Diagnostics.EventFlow.Output.ApplicationInsights`NuGet package.</span></span> <span data-ttu-id="9cc1e-142">seguir Hello tem toobe incluído no hello *gera* seção Olá *eventFlowConfig.json*:</span><span class="sxs-lookup"><span data-stu-id="9cc1e-142">hello following has toobe included in hello *outputs* section of hello *eventFlowConfig.json*:</span></span>

```json
"outputs": [
    {
        "type": "ApplicationInsights",
        // (replace hello following value with your AI resource's instrumentation key)
        "instrumentationKey": "00000000-0000-0000-0000-000000000000"
    }
]
```

<span data-ttu-id="9cc1e-143">Alterar toomake se Olá necessário seus filtros, bem como incluir quaisquer outras entradas (junto com seus respectivos pacotes NuGet).</span><span class="sxs-lookup"><span data-stu-id="9cc1e-143">Make sure toomake hello required changes in your filters, as well as include any other inputs (along with their respective NuGet packages).</span></span>

## <a name="aisdk"></a><span data-ttu-id="9cc1e-144">AI.SDK</span><span class="sxs-lookup"><span data-stu-id="9cc1e-144">AI.SDK</span></span>

<span data-ttu-id="9cc1e-145">Geralmente, é recomendável toouse EventFlow e WAD como soluções de agregação, porque que permitem um toodiagnostics abordagem mais modular e não monitoramento, ou seja, se você quiser que suas saídas de EventFlow toochange, requer a nenhum tooyour alteração real Instrumentação, apenas um arquivo de configuração de tooyour simples modificação.</span><span class="sxs-lookup"><span data-stu-id="9cc1e-145">It is generally recommended toouse EventFlow and WAD as aggregation solutions, because they allow for a more modular approach toodiagnostics and monitoring, i.e. if you want toochange your outputs from EventFlow, it requires no change tooyour actual instrumentation, just a simple modification tooyour config file.</span></span> <span data-ttu-id="9cc1e-146">Se, no entanto, você decide tooinvest usando o Application Insights e não é provavelmente toochange tooa diferentes plataformas, você deve examinar usando novo SDK do AI para agregar eventos e enviá-los tooAI.</span><span class="sxs-lookup"><span data-stu-id="9cc1e-146">If, however, you decide tooinvest in using Application Insights and are not likely toochange tooa different platform, you should look into using AI's new SDK for aggregating events and sending them tooAI.</span></span> <span data-ttu-id="9cc1e-147">Isso significa que você não terá mais tooconfigure EventFlow toosend tooAI seus dados, mas em vez disso, instalará o pacote de NuGet de malha do serviço do hello ApplicationInsight.</span><span class="sxs-lookup"><span data-stu-id="9cc1e-147">This means that you will no longer have tooconfigure EventFlow toosend your data tooAI, but instead will install hello ApplicationInsight's Service Fabric NuGet package.</span></span> <span data-ttu-id="9cc1e-148">Detalhes sobre o pacote de saudação podem ser encontrados [aqui](https://github.com/Microsoft/ApplicationInsights-ServiceFabric).</span><span class="sxs-lookup"><span data-stu-id="9cc1e-148">Details on hello package can be found [here](https://github.com/Microsoft/ApplicationInsights-ServiceFabric).</span></span>

<span data-ttu-id="9cc1e-149">[Suporte do Application Insights para Microservices e contêineres](https://azure.microsoft.com/app-insights-microservices/) mostra alguns dos Olá novos recursos que estão sendo trabalhados (ainda atualmente em beta), que permitem que você toohave mais avançada da caixa Opções de monitoramento com AI.</span><span class="sxs-lookup"><span data-stu-id="9cc1e-149">[Application Insights support for Microservices and Containers](https://azure.microsoft.com/app-insights-microservices/) shows you some of hello new features that are being worked on (currently still in beta), which allow you toohave richer out-of-the-box monitoring options with AI.</span></span> <span data-ttu-id="9cc1e-150">Esses incluem controle de dependência (usado na criação de um AppMap de todos os seus serviços e aplicativos em um cluster e hello a comunicação entre eles) e a correlação melhor de rastreamentos provenientes de seus serviços (ajuda a melhor identificar um problema no Olá fluxo de trabalho de um aplicativo ou serviço).</span><span class="sxs-lookup"><span data-stu-id="9cc1e-150">These include dependency tracking (used in building an AppMap of all your services and applications in a cluster and hello communication between them), and better correlation of traces coming from your services (helps in better pinpointing an issue in hello workflow of an app or service).</span></span>

<span data-ttu-id="9cc1e-151">Se você estiver desenvolvendo no .NET e provavelmente ser usando alguns dos modelos de programação do Service Fabric e são disposto toouse AI como plataforma para visualizar e analisar dados de eventos e log, em seguida, é recomendável que você passe por meio de saudação rota AI SDK como o monitoramento e fluxo de trabalho de diagnóstico.</span><span class="sxs-lookup"><span data-stu-id="9cc1e-151">If you are developing in .NET and will likely be using some of Service Fabric's programming models, and are willing toouse AI as your platform for visualizing and analyzing event and log data, then we recommend that you go via hello AI SDK route as your monitoring and diagnostics workflow.</span></span> <span data-ttu-id="9cc1e-152">Leitura [isso](../application-insights/app-insights-asp-net-more.md) e [isso](../application-insights/app-insights-asp-net-trace-logs.md) tooget foi iniciado com usando toocollect AI e exibir os logs.</span><span class="sxs-lookup"><span data-stu-id="9cc1e-152">Read [this](../application-insights/app-insights-asp-net-more.md) and [this](../application-insights/app-insights-asp-net-trace-logs.md) tooget started with using AI toocollect and display your logs.</span></span>

## <a name="navigating-hello-ai-resource-in-azure-portal"></a><span data-ttu-id="9cc1e-153">Navegando pelo recurso de AI Olá no portal do Azure</span><span class="sxs-lookup"><span data-stu-id="9cc1e-153">Navigating hello AI resource in Azure portal</span></span>

<span data-ttu-id="9cc1e-154">Depois que você configurou AI como uma saída para seus eventos e logs, informações devem iniciar tooshow em seu recurso AI em alguns minutos.</span><span class="sxs-lookup"><span data-stu-id="9cc1e-154">Once you have configured AI as an output for your events and logs, information should start tooshow up in your AI resource in a few minutes.</span></span> <span data-ttu-id="9cc1e-155">Navegue toohello o recurso AI, que levará você toohello AI painel recursos.</span><span class="sxs-lookup"><span data-stu-id="9cc1e-155">Navigate toohello AI resource, which will take you toohello AI resource dashboard.</span></span> <span data-ttu-id="9cc1e-156">Clique em **pesquisa** Olá AI na barra de tarefas toosee hello mais recentes rastreamentos que recebeu e toofilter capaz de toobe por eles.</span><span class="sxs-lookup"><span data-stu-id="9cc1e-156">Click **Search** in hello AI taskbar toosee hello latest traces that it has received, and toobe able toofilter through them.</span></span>

<span data-ttu-id="9cc1e-157">*Metrics Explorer* é uma ferramenta útil para criar painéis personalizados com base em métricas que seus aplicativos, serviços e clusters podem estar reportando.</span><span class="sxs-lookup"><span data-stu-id="9cc1e-157">*Metrics Explorer* is a useful tool for creating custom dashboards based on metrics that your applications, services, and cluster may be reporting.</span></span> <span data-ttu-id="9cc1e-158">Consulte [explorando métricas no Application Insights](../application-insights/app-insights-metrics-explorer.md) tooset backup alguns gráficos para si mesmo com base nos dados de saudação coletar.</span><span class="sxs-lookup"><span data-stu-id="9cc1e-158">See [Exploring Metrics in Application Insights](../application-insights/app-insights-metrics-explorer.md) tooset up a few charts for yourself based on hello data you are collecting.</span></span>

<span data-ttu-id="9cc1e-159">Clicando em **análise** levará você toohello portal do Application Insights Analytics, onde você pode consultar eventos e rastreamentos com o maior escopo e opções.</span><span class="sxs-lookup"><span data-stu-id="9cc1e-159">Clicking **Analytics** will take you toohello Application Insights Analytics portal, where you can query events and traces with greater scope and optionality.</span></span> <span data-ttu-id="9cc1e-160">Leia mais sobre isso em [Análise no Application Insights](../application-insights/app-insights-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="9cc1e-160">Read more about this at [Analytics in Application Insights](../application-insights/app-insights-analytics.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="9cc1e-161">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="9cc1e-161">Next steps</span></span>

* <span data-ttu-id="9cc1e-162">[Configurar alertas em AI](../application-insights/app-insights-alerts.md) toobe notificado sobre as alterações no desempenho ou de uso</span><span class="sxs-lookup"><span data-stu-id="9cc1e-162">[Set up Alerts in AI](../application-insights/app-insights-alerts.md) toobe notified about changes in performance or usage</span></span>
* <span data-ttu-id="9cc1e-163">[Inteligente de detecção no Application Insights](../application-insights/app-insights-proactive-diagnostics.md) realiza uma análise proativa de telemetria Olá enviada tooAI toowarn sobre possíveis problemas de desempenho</span><span class="sxs-lookup"><span data-stu-id="9cc1e-163">[Smart Detection in Application Insights](../application-insights/app-insights-proactive-diagnostics.md) performs a proactive analysis of hello telemetry being sent tooAI toowarn you of potential performance problems</span></span>
