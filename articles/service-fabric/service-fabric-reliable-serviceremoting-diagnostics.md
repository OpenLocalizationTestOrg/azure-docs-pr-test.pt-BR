---
title: "Diagnóstico e monitoramento do Azure ServiceFabric| Microsoft Docs"
description: "Este artigo descreve os recursos de monitoramento de desempenho no tempo de execução de Service Fabric Reliable ServiceRemoting, como os contadores de desempenho emitidos por ele."
services: service-fabric
documentationcenter: .net
author: suchiagicha
manager: timlt
editor: suchiagicha
ms.assetid: 1c229923-670a-4634-ad59-468ff781ad18
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 06/29/2017
ms.author: suchiagicha
ms.openlocfilehash: f54e157654fb15d2f7ff48ddc666c6c8803c75a2
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/03/2017
---
# <a name="diagnostics-and-performance-monitoring-for-reliable-service-remoting"></a><span data-ttu-id="00a2e-103">Diagnóstico e monitoramento de desempenho para Reliable Service Remoting</span><span class="sxs-lookup"><span data-stu-id="00a2e-103">Diagnostics and performance monitoring for Reliable Service Remoting</span></span>
<span data-ttu-id="00a2e-104">O tempo de execução do Reliable ServiceRemoting emite [contadores de desempenho](https://msdn.microsoft.com/library/system.diagnostics.performancecounter.aspx).</span><span class="sxs-lookup"><span data-stu-id="00a2e-104">The Reliable ServiceRemoting runtime emits  [performance counters](https://msdn.microsoft.com/library/system.diagnostics.performancecounter.aspx).</span></span> <span data-ttu-id="00a2e-105">Esses recursos fornecem informações sobre como o ServiceRemoting está operando e ajudam na solução de problemas e no monitoramento de desempenho.</span><span class="sxs-lookup"><span data-stu-id="00a2e-105">These provide insights into how the ServiceRemoting is operating and help with troubleshooting and performance monitoring.</span></span>


## <a name="performance-counters"></a><span data-ttu-id="00a2e-106">Contadores de desempenho</span><span class="sxs-lookup"><span data-stu-id="00a2e-106">Performance counters</span></span>
<span data-ttu-id="00a2e-107">O tempo de execução do Reliable ServiceRemoting define as seguintes categorias de contador de desempenho:</span><span class="sxs-lookup"><span data-stu-id="00a2e-107">The Reliable ServiceRemoting runtime defines the following performance counter categories:</span></span>

| <span data-ttu-id="00a2e-108">Categoria</span><span class="sxs-lookup"><span data-stu-id="00a2e-108">Category</span></span> | <span data-ttu-id="00a2e-109">Descrição</span><span class="sxs-lookup"><span data-stu-id="00a2e-109">Description</span></span> |
| --- | --- |
| <span data-ttu-id="00a2e-110">Serviço do Service Fabric</span><span class="sxs-lookup"><span data-stu-id="00a2e-110">Service Fabric Service</span></span> |<span data-ttu-id="00a2e-111">Contadores específicos do Azure Service Fabric Remoting, por exemplo, média de tempo gasto para processar a solicitação</span><span class="sxs-lookup"><span data-stu-id="00a2e-111">Counters specific to Azure Service Fabric Service Remoting , for example, average time taken to process request</span></span> |
| <span data-ttu-id="00a2e-112">Método de Serviço do Service Fabric</span><span class="sxs-lookup"><span data-stu-id="00a2e-112">Service Fabric Service Method</span></span> |<span data-ttu-id="00a2e-113">Contadores específicos aos métodos implementados pelo Service Fabric Remoting Service; por exemplo, quantas vezes um método de serviço é invocado</span><span class="sxs-lookup"><span data-stu-id="00a2e-113">Counters specific to methods implemented by Service Fabric Remoting Service, for example, how often a service method is invoked</span></span> |

<span data-ttu-id="00a2e-114">Cada uma das categorias anteriores tem um ou mais contadores.</span><span class="sxs-lookup"><span data-stu-id="00a2e-114">Each of the preceding categories has one or more counters.</span></span>

<span data-ttu-id="00a2e-115">O aplicativo [Monitor de Desempenho do Windows](https://technet.microsoft.com/library/cc749249.aspx) está disponível por padrão no sistema operacional Windows e pode ser usado para coletar e exibir dados do contador de desempenho.</span><span class="sxs-lookup"><span data-stu-id="00a2e-115">The [Windows Performance Monitor](https://technet.microsoft.com/library/cc749249.aspx) application that is available by default in the Windows operating system can be used to collect and view performance counter data.</span></span> <span data-ttu-id="00a2e-116">[Diagnóstico do Azure](../cloud-services/cloud-services-dotnet-diagnostics.md) é outra opção para coletar dados do contador de desempenho e carregá-los nas tabelas do Azure.</span><span class="sxs-lookup"><span data-stu-id="00a2e-116">[Azure Diagnostics](../cloud-services/cloud-services-dotnet-diagnostics.md) is another option for collecting performance counter data and uploading it to Azure tables.</span></span>

### <a name="performance-counter-instance-names"></a><span data-ttu-id="00a2e-117">Nomes da instância do contador de desempenho</span><span class="sxs-lookup"><span data-stu-id="00a2e-117">Performance counter instance names</span></span>
<span data-ttu-id="00a2e-118">Um cluster que tem um grande número de serviços do ServiceRemoting ou partições tem um grande número de instâncias do contador de desempenho.</span><span class="sxs-lookup"><span data-stu-id="00a2e-118">A cluster that has a large number of  ServiceRemoting services or partitions have a large number of  performance counter instances.</span></span> <span data-ttu-id="00a2e-119">Os nomes da instância do contador de desempenho podem ajudar a identificar a partição e o método de Serviço (se aplicável) aos quais a instância do contador de desempenho está associada.</span><span class="sxs-lookup"><span data-stu-id="00a2e-119">The performance counter instance names can help in identifying the specific partition and Service method (if applicable) that the performance counter instance is associated with.</span></span>

#### <a name="service-fabric-service-category"></a><span data-ttu-id="00a2e-120">Categoria de Serviço do Service Fabric</span><span class="sxs-lookup"><span data-stu-id="00a2e-120">Service Fabric Service category</span></span>
<span data-ttu-id="00a2e-121">Para a categoria `Service Fabric Service`, os nomes da instância do contador estão no seguinte formato:</span><span class="sxs-lookup"><span data-stu-id="00a2e-121">For the category `Service Fabric Service`, the counter instance names are in the following format:</span></span>

`ServiceFabricPartitionID_ServiceReplicaOrInstanceId_ServiceRuntimeInternalID`

<span data-ttu-id="00a2e-122">*ServiceFabricPartitionID* é a representação da cadeia de caracteres da ID da partição do Service Fabric à qual a instância do contador de desempenho está associada.</span><span class="sxs-lookup"><span data-stu-id="00a2e-122">*ServiceFabricPartitionID* is the string representation of the Service Fabric partition ID that the performance counter instance is associated with.</span></span> <span data-ttu-id="00a2e-123">A ID da partição é um GUID e sua representação da cadeia de caracteres é gerada por meio do método [`Guid.ToString`](https://msdn.microsoft.com/library/97af8hh4.aspx) com o especificador de formato "D".</span><span class="sxs-lookup"><span data-stu-id="00a2e-123">The partition ID is a GUID, and its string representation is generated through the [`Guid.ToString`](https://msdn.microsoft.com/library/97af8hh4.aspx) method with format specifier "D".</span></span>

<span data-ttu-id="00a2e-124">*ServiceReplicaOrInstanceID* é a representação da cadeia de caracteres da ID da Réplica/Instância do Service Fabric à qual a instância do contador de desempenho está associada.</span><span class="sxs-lookup"><span data-stu-id="00a2e-124">*ServiceReplicaOrInstanceId* is the string representation of the Service Fabric Replica/Instance ID that the performance counter instance is associated with.</span></span>

<span data-ttu-id="00a2e-125">*ServiceRuntimeInternalID* é a representação da cadeia de caracteres de um inteiro de 64 bits que é gerada pelo tempo de execução do Fabric Service para seu uso interno.</span><span class="sxs-lookup"><span data-stu-id="00a2e-125">*ServiceRuntimeInternalID* is the string representation of a 64-bit integer that is generated by the Fabric Service runtime for its internal use.</span></span> <span data-ttu-id="00a2e-126">Isso está incluído no nome da instância do contador de desempenho para garantir sua exclusividade e evitar conflito com outros nomes da instância do contador de desempenho.</span><span class="sxs-lookup"><span data-stu-id="00a2e-126">This is included in the performance counter instance name to ensure its uniqueness and avoid conflict with other performance counter instance names.</span></span> <span data-ttu-id="00a2e-127">Os usuários não devem tentar interpretar essa parte do nome da instância do contador de desempenho.</span><span class="sxs-lookup"><span data-stu-id="00a2e-127">Users should not try to interpret this portion of the performance counter instance name.</span></span>

<span data-ttu-id="00a2e-128">Veja a seguir o exemplo de um nome da instância do contador para um contador que pertence à categoria `Service Fabric Service` :</span><span class="sxs-lookup"><span data-stu-id="00a2e-128">The following is an example of a counter instance name for a counter that belongs to the `Service Fabric Service` category:</span></span>

`2740af29-78aa-44bc-a20b-7e60fb783264_635650083799324046_5008379932`

<span data-ttu-id="00a2e-129">No exemplo amterior, `2740af29-78aa-44bc-a20b-7e60fb783264` é a representação da cadeia de caracteres da ID da partição do Service Fabric, `635650083799324046` é a representação da cadeia de caracteres da ID da Réplica/Instância e `5008379932` é a ID de 64 bits que é gerada para uso interno do tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="00a2e-129">In the preceding example, `2740af29-78aa-44bc-a20b-7e60fb783264` is the string representation of the Service Fabric partition ID, `635650083799324046` is string representation of Replica/InstanceId and `5008379932` is the 64-bit ID that is generated for the runtime's internal use.</span></span>

#### <a name="service-fabric-service-method-category"></a><span data-ttu-id="00a2e-130">Categoria Método de Serviço do Service Fabric</span><span class="sxs-lookup"><span data-stu-id="00a2e-130">Service Fabric Service Method category</span></span>
<span data-ttu-id="00a2e-131">Para a categoria `Service Fabric Service Method`, os nomes da instância do contador estão no seguinte formato:</span><span class="sxs-lookup"><span data-stu-id="00a2e-131">For the category `Service Fabric Service Method`, the counter instance names are in the following format:</span></span>

`MethodName_ServiceRuntimeMethodId_ServiceFabricPartitionID_ServiceReplicaOrInstanceId_ServiceRuntimeInternalID`

<span data-ttu-id="00a2e-132">*MethodName* é o nome do método do serviço ao qual a instância do contador de desempenho está associada.</span><span class="sxs-lookup"><span data-stu-id="00a2e-132">*MethodName* is the name of the service method that the performance counter instance is associated with.</span></span> <span data-ttu-id="00a2e-133">O formato do nome do método é determinado com base em alguma lógica no tempo de execução do Fabric Service que equilibra a legibilidade do nome com restrições no comprimento máximo dos nomes da instância do contador de desempenho no Windows.</span><span class="sxs-lookup"><span data-stu-id="00a2e-133">The format of the method name is determined based on some logic in the Fabric Service runtime that balances the readability of the name with constraints on the maximum length of the performance counter instance names on Windows.</span></span>

<span data-ttu-id="00a2e-134">*ServiceRuntimeMethodID* é a representação da cadeia de caracteres de um inteiro de 32 bits que é gerada pelo tempo de execução do Fabric Service para seu uso interno.</span><span class="sxs-lookup"><span data-stu-id="00a2e-134">*ServiceRuntimeMethodId* is the string representation of a 32-bit integer that is generated by the Fabric Service runtime for its internal use.</span></span> <span data-ttu-id="00a2e-135">Isso está incluído no nome da instância do contador de desempenho para garantir sua exclusividade e evitar conflito com outros nomes da instância do contador de desempenho.</span><span class="sxs-lookup"><span data-stu-id="00a2e-135">This is included in the performance counter instance name to ensure its uniqueness and avoid conflict with other performance counter instance names.</span></span> <span data-ttu-id="00a2e-136">Os usuários não devem tentar interpretar essa parte do nome da instância do contador de desempenho.</span><span class="sxs-lookup"><span data-stu-id="00a2e-136">Users should not try to interpret this portion of the performance counter instance name.</span></span>

<span data-ttu-id="00a2e-137">*ServiceFabricPartitionID* é a representação da cadeia de caracteres da ID da partição do Service Fabric à qual a instância do contador de desempenho está associada.</span><span class="sxs-lookup"><span data-stu-id="00a2e-137">*ServiceFabricPartitionID* is the string representation of the Service Fabric partition ID that the performance counter instance is associated with.</span></span> <span data-ttu-id="00a2e-138">A ID da partição é um GUID e sua representação da cadeia de caracteres é gerada por meio do método [`Guid.ToString`](https://msdn.microsoft.com/library/97af8hh4.aspx) com o especificador de formato "D".</span><span class="sxs-lookup"><span data-stu-id="00a2e-138">The partition ID is a GUID, and its string representation is generated through the [`Guid.ToString`](https://msdn.microsoft.com/library/97af8hh4.aspx) method with format specifier "D".</span></span>

<span data-ttu-id="00a2e-139">*ServiceReplicaOrInstanceID* é a representação da cadeia de caracteres da ID da Réplica/Instância do Service Fabric à qual a instância do contador de desempenho está associada.</span><span class="sxs-lookup"><span data-stu-id="00a2e-139">*ServiceReplicaOrInstanceId* is the string representation of the Service Fabric Replica/Instance ID that the performance counter instance is associated with.</span></span>

<span data-ttu-id="00a2e-140">*ServiceRuntimeInternalID* é a representação da cadeia de caracteres de um inteiro de 64 bits que é gerada pelo tempo de execução do Fabric Service para seu uso interno.</span><span class="sxs-lookup"><span data-stu-id="00a2e-140">*ServiceRuntimeInternalID* is the string representation of a 64-bit integer that is generated by the Fabric Service runtime for its internal use.</span></span> <span data-ttu-id="00a2e-141">Isso está incluído no nome da instância do contador de desempenho para garantir sua exclusividade e evitar conflito com outros nomes da instância do contador de desempenho.</span><span class="sxs-lookup"><span data-stu-id="00a2e-141">This is included in the performance counter instance name to ensure its uniqueness and avoid conflict with other performance counter instance names.</span></span> <span data-ttu-id="00a2e-142">Os usuários não devem tentar interpretar essa parte do nome da instância do contador de desempenho.</span><span class="sxs-lookup"><span data-stu-id="00a2e-142">Users should not try to interpret this portion of the performance counter instance name.</span></span>

<span data-ttu-id="00a2e-143">Veja a seguir o exemplo de um nome da instância do contador para um contador que pertence à categoria `Service Fabric Service Method` :</span><span class="sxs-lookup"><span data-stu-id="00a2e-143">The following is an example of a counter instance name for a counter that belongs to the `Service Fabric Service Method` category:</span></span>

`ivoicemailboxservice.leavemessageasync_2_89383d32-e57e-4a9b-a6ad-57c6792aa521_635650083804480486_5008380`

<span data-ttu-id="00a2e-144">No exemplo anterior, `ivoicemailboxservice.leavemessageasync` é o nome do método, `2` é a ID de 32 bits gerada para uso interno do tempo de execução, `89383d32-e57e-4a9b-a6ad-57c6792aa521` é a representação da cadeia de caracteres da ID da partição do Service Fabric, `635650083804480486` é a representação da cadeia de caracteres da ID da Réplica/Instância e `5008380` é a ID de 64 bits gerada para uso interno do tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="00a2e-144">In the preceding example, `ivoicemailboxservice.leavemessageasync` is the method name, `2` is the 32-bit ID generated for the runtime's internal use, `89383d32-e57e-4a9b-a6ad-57c6792aa521` is the string representation of the Service Fabric partition ID,`635650083804480486` is the string representation of the Service Fabric Replica/Instance ID and `5008380` is the 64-bit ID generated for the runtime's internal use.</span></span>

## <a name="list-of-performance-counters"></a><span data-ttu-id="00a2e-145">Lista de Contadores de desempenho</span><span class="sxs-lookup"><span data-stu-id="00a2e-145">List of Performance counters</span></span>
### <a name="service-method-performance-counters"></a><span data-ttu-id="00a2e-146">Contadores de desempenho do método de serviço</span><span class="sxs-lookup"><span data-stu-id="00a2e-146">Service method performance counters</span></span>

<span data-ttu-id="00a2e-147">O tempo de execução do Reliable Service publica os contadores de desempenho relacionados à execução dos métodos de serviço a seguir.</span><span class="sxs-lookup"><span data-stu-id="00a2e-147">The Reliable Service runtime publishes the following performance counters related to the execution of service methods.</span></span>

| <span data-ttu-id="00a2e-148">Nome da categoria</span><span class="sxs-lookup"><span data-stu-id="00a2e-148">Category name</span></span> | <span data-ttu-id="00a2e-149">Nome do contador</span><span class="sxs-lookup"><span data-stu-id="00a2e-149">Counter name</span></span> | <span data-ttu-id="00a2e-150">Descrição</span><span class="sxs-lookup"><span data-stu-id="00a2e-150">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="00a2e-151">Método de Serviço do Service Fabric</span><span class="sxs-lookup"><span data-stu-id="00a2e-151">Service Fabric Service Method</span></span> |<span data-ttu-id="00a2e-152">Invocação/s</span><span class="sxs-lookup"><span data-stu-id="00a2e-152">Invocations/Sec</span></span> |<span data-ttu-id="00a2e-153">Número de vezes que o método de serviço é invocado por segundo</span><span class="sxs-lookup"><span data-stu-id="00a2e-153">Number of times that the  service method is invoked per second</span></span> |
| <span data-ttu-id="00a2e-154">Método de Serviço do Service Fabric</span><span class="sxs-lookup"><span data-stu-id="00a2e-154">Service Fabric Service Method</span></span> |<span data-ttu-id="00a2e-155">Média de milissegundos por invocação</span><span class="sxs-lookup"><span data-stu-id="00a2e-155">Average milliseconds per invocation</span></span> |<span data-ttu-id="00a2e-156">Tempo usado para executar o método de serviço em milissegundos</span><span class="sxs-lookup"><span data-stu-id="00a2e-156">Time taken to execute the service method in milliseconds</span></span> |
| <span data-ttu-id="00a2e-157">Método de Serviço do Service Fabric</span><span class="sxs-lookup"><span data-stu-id="00a2e-157">Service Fabric Service Method</span></span> |<span data-ttu-id="00a2e-158">Exceções lançadas/s</span><span class="sxs-lookup"><span data-stu-id="00a2e-158">Exceptions thrown/Sec</span></span> |<span data-ttu-id="00a2e-159">Número de vezes que o método de serviço lançou uma exceção por segundo</span><span class="sxs-lookup"><span data-stu-id="00a2e-159">Number of times that the service method threw an exception per second</span></span> |

### <a name="service-request-processing-performance-counters"></a><span data-ttu-id="00a2e-160">Solicitação de serviço processando contadores de desempenho</span><span class="sxs-lookup"><span data-stu-id="00a2e-160">Service request processing performance counters</span></span>
<span data-ttu-id="00a2e-161">Quando um cliente chama um método por meio de um objeto de proxy do serviço, isso resulta no envio de uma mensagem de solicitação pela rede para o serviço de comunicação remota.</span><span class="sxs-lookup"><span data-stu-id="00a2e-161">When a client invokes a method via a service proxy object, it results in a request message being sent over the network to the remoting service.</span></span> <span data-ttu-id="00a2e-162">O serviço processa a mensagem de solicitação e envia uma resposta de volta ao cliente.</span><span class="sxs-lookup"><span data-stu-id="00a2e-162">The service processes the request message and sends a response back to the client.</span></span> <span data-ttu-id="00a2e-163">O tempo de execução do Reliable ServiceRemoting publica os seguintes contadores de desempenho relacionados ao processamento de solicitação de serviço.</span><span class="sxs-lookup"><span data-stu-id="00a2e-163">The Reliable ServiceRemoting runtime publishes the following performance counters related to service request processing.</span></span>

| <span data-ttu-id="00a2e-164">Nome da categoria</span><span class="sxs-lookup"><span data-stu-id="00a2e-164">Category name</span></span> | <span data-ttu-id="00a2e-165">Nome do contador</span><span class="sxs-lookup"><span data-stu-id="00a2e-165">Counter name</span></span> | <span data-ttu-id="00a2e-166">Descrição</span><span class="sxs-lookup"><span data-stu-id="00a2e-166">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="00a2e-167">Serviço do Service Fabric</span><span class="sxs-lookup"><span data-stu-id="00a2e-167">Service Fabric Service</span></span> |<span data-ttu-id="00a2e-168">nº de solicitações pendentes</span><span class="sxs-lookup"><span data-stu-id="00a2e-168"># of outstanding requests</span></span> |<span data-ttu-id="00a2e-169">Número de solicitações sendo processadas no serviço</span><span class="sxs-lookup"><span data-stu-id="00a2e-169">Number of requests being processed in the service</span></span> |
| <span data-ttu-id="00a2e-170">Serviço do Service Fabric</span><span class="sxs-lookup"><span data-stu-id="00a2e-170">Service Fabric Service</span></span> |<span data-ttu-id="00a2e-171">Média de milissegundos por solicitação</span><span class="sxs-lookup"><span data-stu-id="00a2e-171">Average milliseconds per request</span></span> |<span data-ttu-id="00a2e-172">Tempo (em milissegundos) que o serviço leva para processar uma solicitação</span><span class="sxs-lookup"><span data-stu-id="00a2e-172">Time taken (in milliseconds) by the service to process a request</span></span> |
| <span data-ttu-id="00a2e-173">Serviço do Service Fabric</span><span class="sxs-lookup"><span data-stu-id="00a2e-173">Service Fabric Service</span></span> |<span data-ttu-id="00a2e-174">Média de milissegundos para desserialização de solicitação</span><span class="sxs-lookup"><span data-stu-id="00a2e-174">Average milliseconds for request deserialization</span></span> |<span data-ttu-id="00a2e-175">Tempo (em milissegundos) para desserializar a mensagem de solicitação de serviço quando ela é recebida no serviço</span><span class="sxs-lookup"><span data-stu-id="00a2e-175">Time taken (in milliseconds) to deserialize service request message when it is received at the service</span></span> |
| <span data-ttu-id="00a2e-176">Serviço do Service Fabric</span><span class="sxs-lookup"><span data-stu-id="00a2e-176">Service Fabric Service</span></span> |<span data-ttu-id="00a2e-177">Média de milissegundos para serialização de resposta</span><span class="sxs-lookup"><span data-stu-id="00a2e-177">Average milliseconds for response serialization</span></span> |<span data-ttu-id="00a2e-178">Tempo (em milissegundos) para serializar a mensagem de resposta do serviço no serviço antes de a resposta ser enviada ao cliente</span><span class="sxs-lookup"><span data-stu-id="00a2e-178">Time taken (in milliseconds) to serialize the service response message at the service before the response is sent to the client</span></span> |

## <a name="next-steps"></a><span data-ttu-id="00a2e-179">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="00a2e-179">Next steps</span></span>
* [<span data-ttu-id="00a2e-180">Exemplo de código</span><span class="sxs-lookup"><span data-stu-id="00a2e-180">Sample code</span></span>](https://github.com/Azure/servicefabric-samples)
* [<span data-ttu-id="00a2e-181">Provedores de EventSource no PerfView</span><span class="sxs-lookup"><span data-stu-id="00a2e-181">EventSource providers in PerfView</span></span>](https://blogs.msdn.microsoft.com/vancem/2012/07/09/introduction-tutorial-logging-etw-events-in-c-system-diagnostics-tracing-eventsource/)
