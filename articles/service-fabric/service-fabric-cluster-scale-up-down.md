---
title: Escalar ou reduzir horizontalmente um cluster do Service Fabric | Microsoft Docs
description: "Escale ou reduza horizontalmente um cluster do Service Fabric para que ele corresponda à demanda, definindo regras de dimensionamento automático para cada tipo de nó/conjunto de dimensionamento de máquinas virtuais. Adicionar ou remover nós de um cluster do Service Fabric"
services: service-fabric
documentationcenter: .net
author: ChackDan
manager: timlt
editor: 
ms.assetid: aeb76f63-7303-4753-9c64-46146340b83d
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 06/22/2017
ms.author: chackdan
ms.openlocfilehash: 32d8fca81c20e77db4ed3aae05d017ccc2ce1be3
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/03/2017
---
# <a name="scale-a-service-fabric-cluster-in-or-out-using-auto-scale-rules"></a><span data-ttu-id="9ed55-104">Escalar ou reduzir horizontalmente um cluster do Service Fabric usando regras de autoescala</span><span class="sxs-lookup"><span data-stu-id="9ed55-104">Scale a Service Fabric cluster in or out using auto-scale rules</span></span>
<span data-ttu-id="9ed55-105">Os conjuntos de escala de Máquina Virtual são um recurso de Computação do Azure que você pode usar para implantar e gerenciar uma coleção de máquinas virtuais como um conjunto.</span><span class="sxs-lookup"><span data-stu-id="9ed55-105">Virtual machine scale sets are an Azure compute resource that you can use to deploy and manage a collection of virtual machines as a set.</span></span> <span data-ttu-id="9ed55-106">Cada tipo de nó definido em um cluster do Service Fabric está configurado como um conjunto de dimensionamento de máquinas virtuais separado.</span><span class="sxs-lookup"><span data-stu-id="9ed55-106">Every node type that is defined in a Service Fabric cluster is set up as a separate Virtual Machine scale set.</span></span> <span data-ttu-id="9ed55-107">Cada tipo de nó pode ser escalado ou reduzido horizontalmente de forma independente, ter conjuntos diferentes de portas abertas e métricas de capacidade diferentes.</span><span class="sxs-lookup"><span data-stu-id="9ed55-107">Each node type can then be scaled in or out independently, have different sets of ports open, and can have different capacity metrics.</span></span> <span data-ttu-id="9ed55-108">Leia mais sobre isso no documento [Tipos de nó do Service Fabric](service-fabric-cluster-nodetypes.md) .</span><span class="sxs-lookup"><span data-stu-id="9ed55-108">Read more about it in the [Service Fabric nodetypes](service-fabric-cluster-nodetypes.md) document.</span></span> <span data-ttu-id="9ed55-109">Uma vez que os tipos de nó do Service Fabric no cluster são compostos por conjuntos de dimensionamento de máquinas virtuais no back-end, você precisa configurar regras de dimensionamento automático para cada tipo de nó/conjunto de dimensionamento de máquinas virtuais.</span><span class="sxs-lookup"><span data-stu-id="9ed55-109">Since the Service Fabric node types in your cluster are made of Virtual Machine scale sets at the backend, you need to set up auto-scale rules for each node type/Virtual Machine scale set.</span></span>

> [!NOTE]
> <span data-ttu-id="9ed55-110">Sua assinatura precisa ter uma quantidade suficiente de núcleos para adicionar as novas VMs que compõe esse cluster.</span><span class="sxs-lookup"><span data-stu-id="9ed55-110">Your subscription must have enough cores to add the new VMs that make up this cluster.</span></span> <span data-ttu-id="9ed55-111">Atualmente, não há nenhuma validação de modelo. Logo, você receberá uma falha de tempo de implantação se qualquer um dos limites de cota for atingido.</span><span class="sxs-lookup"><span data-stu-id="9ed55-111">There is no model validation currently, so you get a deployment time failure, if any of the quota limits are hit.</span></span>
> 
> 

## <a name="choose-the-node-typevirtual-machine-scale-set-to-scale"></a><span data-ttu-id="9ed55-112">Escolher o tipo de nó/conjunto de dimensionamento de máquinas virtuais a ser dimensionado</span><span class="sxs-lookup"><span data-stu-id="9ed55-112">Choose the node type/Virtual Machine scale set to scale</span></span>
<span data-ttu-id="9ed55-113">Atualmente, não é possível especificar as regras de dimensionamento automático para os conjuntos de dimensionamento de máquinas virtuais usando o portal, por esse motivo, vamos usar o Azure PowerShell (1.0+) para listar os tipos de nó e, em seguida, adicionar as regras de dimensionamento automático a eles.</span><span class="sxs-lookup"><span data-stu-id="9ed55-113">Currently, you are not able to specify the auto-scale rules for Virtual Machine scale sets using the portal, so let us use Azure PowerShell (1.0+) to list the node types and then add auto-scale rules to them.</span></span>

<span data-ttu-id="9ed55-114">Para obter a lista de conjuntos de dimensionamento de máquinas virtuais que compõem o cluster, execute os seguintes cmdlets:</span><span class="sxs-lookup"><span data-stu-id="9ed55-114">To get the list of Virtual Machine scale set that make up your cluster, run the following cmdlets:</span></span>

```powershell
Get-AzureRmResource -ResourceGroupName <RGname> -ResourceType Microsoft.Compute/VirtualMachineScaleSets

Get-AzureRmVmss -ResourceGroupName <RGname> -VMScaleSetName <Virtual Machine scale set name>
```

## <a name="set-auto-scale-rules-for-the-node-typevirtual-machine-scale-set"></a><span data-ttu-id="9ed55-115">Definir regras de dimensionamento automático para o tipo de nó/conjunto de dimensionamento de máquinas virtuais</span><span class="sxs-lookup"><span data-stu-id="9ed55-115">Set auto-scale rules for the node type/Virtual Machine scale set</span></span>
<span data-ttu-id="9ed55-116">Se o cluster tiver vários tipos de nós, repita este procedimento para cada tipo de nó/conjuntos de dimensionamento de máquinas virtuais que você quiser escalar ou reduzir horizontalmente.</span><span class="sxs-lookup"><span data-stu-id="9ed55-116">If your cluster has multiple node types, then repeat this for each node types/Virtual Machine scale sets that you want to scale (in or out).</span></span> <span data-ttu-id="9ed55-117">Leve em conta o número de nós que você precisa ter antes de configurar o dimensionamento automático.</span><span class="sxs-lookup"><span data-stu-id="9ed55-117">Take into account the number of nodes that you must have before you set up auto-scaling.</span></span> <span data-ttu-id="9ed55-118">O número mínimo de nós necessários para o tipo de nó primário é controlado pelo nível de confiabilidade escolhido.</span><span class="sxs-lookup"><span data-stu-id="9ed55-118">The minimum number of nodes that you must have for the primary node type is driven by the reliability level you have chosen.</span></span> <span data-ttu-id="9ed55-119">Leia mais sobre os [níveis de confiabilidade](service-fabric-cluster-capacity.md).</span><span class="sxs-lookup"><span data-stu-id="9ed55-119">Read more about [reliability levels](service-fabric-cluster-capacity.md).</span></span>

> [!NOTE]
> <span data-ttu-id="9ed55-120">A redução vertical do tipo de nó primário para um número inferior ao mínimo causará a instabilidade ou indisponibilidade do cluster.</span><span class="sxs-lookup"><span data-stu-id="9ed55-120">Scaling down the primary node type to less than the minimum number make the cluster unstable or bring it down.</span></span> <span data-ttu-id="9ed55-121">Isso poderá resultar em perda de dados de seus aplicativos e dos serviços do sistema.</span><span class="sxs-lookup"><span data-stu-id="9ed55-121">This could result in data loss for your applications and for the system services.</span></span>
> 
> 

<span data-ttu-id="9ed55-122">Atualmente, o recurso de escala automática não é controlado pelas cargas que os aplicativos podem relatar ao Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="9ed55-122">Currently the auto-scale feature is not driven by the loads that your applications may be reporting to Service Fabric.</span></span> <span data-ttu-id="9ed55-123">Portanto, nesse momento, o dimensionamento automático obtido é meramente controlado pelos contadores de desempenho que são emitidos por cada uma das instâncias do conjunto de dimensionamento de máquinas virtuais.</span><span class="sxs-lookup"><span data-stu-id="9ed55-123">So at this time the auto-scale you get is purely driven by the performance counters that are emitted by each of the Virtual Machine scale set instances.</span></span>  

<span data-ttu-id="9ed55-124">Siga estas instruções [para configurar o dimensionamento automático para cada conjunto de dimensionamento de máquinas virtuais](../virtual-machine-scale-sets/virtual-machine-scale-sets-autoscale-overview.md).</span><span class="sxs-lookup"><span data-stu-id="9ed55-124">Follow these instructions [to set up auto-scale for each Virtual Machine scale set](../virtual-machine-scale-sets/virtual-machine-scale-sets-autoscale-overview.md).</span></span>

> [!NOTE]
> <span data-ttu-id="9ed55-125">Em um cenário de redução vertical, a menos que o tipo de nó tenha um nível de durabilidade Gold ou Silver, você precisará chamar o cmdlet [Remove-ServiceFabricNodeState](https://msdn.microsoft.com/library/azure/mt125993.aspx) pelo nome de nó apropriado.</span><span class="sxs-lookup"><span data-stu-id="9ed55-125">In a scale down scenario, unless your node type has a durability level of Gold or Silver you need to call the [Remove-ServiceFabricNodeState cmdlet](https://msdn.microsoft.com/library/azure/mt125993.aspx) with the appropriate node name.</span></span>
> 
> 

## <a name="manually-add-vms-to-a-node-typevirtual-machine-scale-set"></a><span data-ttu-id="9ed55-126">Adicionar as VMs manualmente a um tipo de nó/conjunto de dimensionamento de máquinas virtuais</span><span class="sxs-lookup"><span data-stu-id="9ed55-126">Manually add VMs to a node type/Virtual Machine scale set</span></span>
<span data-ttu-id="9ed55-127">Siga os modelos/instruções da [galeria de modelos de Início Rápido](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-scale-existing) para alterar o número de VMs em cada Nodetype.</span><span class="sxs-lookup"><span data-stu-id="9ed55-127">Follow the sample/instructions in the [quick start template gallery](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-scale-existing) to change the number of VMs in each Nodetype.</span></span> 

> [!NOTE]
> <span data-ttu-id="9ed55-128">O processo de adicionar VMs leva tempo. Portanto, não espere que as adições sejam instantâneas.</span><span class="sxs-lookup"><span data-stu-id="9ed55-128">Adding of VMs takes time, so do not expect the additions to be instantaneous.</span></span> <span data-ttu-id="9ed55-129">Sendo assim, planeje adicionar capacidade pontual para permitir mais 10 minutos antes que a capacidade da VM esteja disponível para que as réplicas/instâncias de serviço sejam alocadas.</span><span class="sxs-lookup"><span data-stu-id="9ed55-129">So plan to add capacity well in time, to allow for over 10 minutes before the VM capacity is available for the replicas/ service instances to get placed.</span></span>
> 
> 

## <a name="manually-remove-vms-from-the-primary-node-typevirtual-machine-scale-set"></a><span data-ttu-id="9ed55-130">Remover as VMs manualmente do tipo de nó primário/conjunto de dimensionamento de máquinas virtuais</span><span class="sxs-lookup"><span data-stu-id="9ed55-130">Manually remove VMs from the primary node type/Virtual Machine scale set</span></span>
> [!NOTE]
> <span data-ttu-id="9ed55-131">Os serviços do sistema Service Fabric são executados no tipo de nó Primário do cluster.</span><span class="sxs-lookup"><span data-stu-id="9ed55-131">The service fabric system services run in the Primary node type in your cluster.</span></span> <span data-ttu-id="9ed55-132">Deste modo, nunca desligue ou reduza verticalmente o número de instâncias neste tipo de nó para uma quantidade menor do que a camada de confiabilidade garante.</span><span class="sxs-lookup"><span data-stu-id="9ed55-132">So should never shut down or scale down the number of instances in that node types less than what the reliability tier warrants.</span></span> <span data-ttu-id="9ed55-133">Confira [os detalhes sobre os níveis de confiabilidade aqui](service-fabric-cluster-capacity.md).</span><span class="sxs-lookup"><span data-stu-id="9ed55-133">Refer to [the details on reliability tiers here](service-fabric-cluster-capacity.md).</span></span> 
> 
> 

<span data-ttu-id="9ed55-134">Você precisa executar as etapas a seguir em uma instância VM por vez.</span><span class="sxs-lookup"><span data-stu-id="9ed55-134">You need to execute the following steps one VM instance at a time.</span></span> <span data-ttu-id="9ed55-135">Isso permite que os serviços do sistema (e seus serviços com estado) sejam desligados normalmente na instância VM que você estiver removendo e que novas réplicas sejam criadas em outros nós.</span><span class="sxs-lookup"><span data-stu-id="9ed55-135">This allows for the system services (and your stateful services) to be shut down gracefully on the VM instance you are removing and new replicas created on other nodes.</span></span>

1. <span data-ttu-id="9ed55-136">Execute [Disable-ServiceFabricNode](https://msdn.microsoft.com/library/mt125852.aspx) com a intenção 'RemoveNode' para desabilitar o nó que você removerá (a instância mais alta deste tipo de nó).</span><span class="sxs-lookup"><span data-stu-id="9ed55-136">Run [Disable-ServiceFabricNode](https://msdn.microsoft.com/library/mt125852.aspx) with intent ‘RemoveNode’ to disable the node you’re going to remove (the highest instance in that node type).</span></span>
2. <span data-ttu-id="9ed55-137">Execute [Get-ServiceFabricNode](https://msdn.microsoft.com/library/mt125856.aspx) para verificar se o nó realmente foi desabilitado.</span><span class="sxs-lookup"><span data-stu-id="9ed55-137">Run [Get-ServiceFabricNode](https://msdn.microsoft.com/library/mt125856.aspx) to make sure that the node has indeed transitioned to disabled.</span></span> <span data-ttu-id="9ed55-138">Caso contrário, aguarde até que o nó seja desabilitado.</span><span class="sxs-lookup"><span data-stu-id="9ed55-138">If not, wait until the node is disabled.</span></span> <span data-ttu-id="9ed55-139">Não tenha pressa nesta etapa.</span><span class="sxs-lookup"><span data-stu-id="9ed55-139">You cannot hurry this step.</span></span>
3. <span data-ttu-id="9ed55-140">Siga os modelos/instruções da [galeria de modelos de Início Rápido](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-scale-existing) para alterar a quantidade de VMs para uma no Nodetype.</span><span class="sxs-lookup"><span data-stu-id="9ed55-140">Follow the sample/instructions in the [quick start template gallery](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-scale-existing) to change the number of VMs by one in that Nodetype.</span></span> <span data-ttu-id="9ed55-141">A instância removida é a instância VM mais alta.</span><span class="sxs-lookup"><span data-stu-id="9ed55-141">The instance removed is the highest VM instance.</span></span> 
4. <span data-ttu-id="9ed55-142">Repita as etapas 1 a 3 conforme necessário, mas nunca reduza verticalmente o número de instâncias no tipo de nó primário para uma quantidade menor do que a camada de confiabilidade garante.</span><span class="sxs-lookup"><span data-stu-id="9ed55-142">Repeat steps 1 through 3 as needed, but never scale down the number of instances in the primary node types less than what the reliability tier warrants.</span></span> <span data-ttu-id="9ed55-143">Confira [os detalhes sobre os níveis de confiabilidade aqui](service-fabric-cluster-capacity.md).</span><span class="sxs-lookup"><span data-stu-id="9ed55-143">Refer to [the details on reliability tiers here](service-fabric-cluster-capacity.md).</span></span> 

## <a name="manually-remove-vms-from-the-non-primary-node-typevirtual-machine-scale-set"></a><span data-ttu-id="9ed55-144">Remover as VMs manualmente do tipo de nó não primário/conjunto de dimensionamento de máquinas virtuais</span><span class="sxs-lookup"><span data-stu-id="9ed55-144">Manually remove VMs from the non-primary node type/Virtual Machine scale set</span></span>
> [!NOTE]
> <span data-ttu-id="9ed55-145">Para um serviço com estado, você precisa de um determinado número de nós que devem estar sempre ativos para manter a disponibilidade e preservar o estado do serviço.</span><span class="sxs-lookup"><span data-stu-id="9ed55-145">For a stateful service, you need a certain number of nodes to be always up to maintain availability and preserve state of your service.</span></span> <span data-ttu-id="9ed55-146">No mínimo, é necessário que o número de nós seja igual à contagem de conjunto de réplicas de destino do serviço/partição.</span><span class="sxs-lookup"><span data-stu-id="9ed55-146">At the very minimum, you need the number of nodes equal to the target replica set count of the partition/service.</span></span> 
> 
> 

<span data-ttu-id="9ed55-147">Você precisa executar as seguintes etapas em uma instância VM por vez.</span><span class="sxs-lookup"><span data-stu-id="9ed55-147">You need the execute the following steps one VM instance at a time.</span></span> <span data-ttu-id="9ed55-148">Isso permite que os serviços do sistema (e seus serviços com estado) sejam desligados normalmente na instância VM que você estiver removendo e que novas réplicas sejam criadas em outro lugar.</span><span class="sxs-lookup"><span data-stu-id="9ed55-148">This allows for the system services (and your stateful services) to be shut down gracefully on the VM instance you are removing and new replicas created else where.</span></span>

1. <span data-ttu-id="9ed55-149">Execute [Disable-ServiceFabricNode](https://msdn.microsoft.com/library/mt125852.aspx) com a intenção 'RemoveNode' para desabilitar o nó que você removerá (a instância mais alta deste tipo de nó).</span><span class="sxs-lookup"><span data-stu-id="9ed55-149">Run [Disable-ServiceFabricNode](https://msdn.microsoft.com/library/mt125852.aspx) with intent ‘RemoveNode’ to disable the node you’re going to remove (the highest instance in that node type).</span></span>
2. <span data-ttu-id="9ed55-150">Execute [Get-ServiceFabricNode](https://msdn.microsoft.com/library/mt125856.aspx) para verificar se o nó realmente foi desabilitado.</span><span class="sxs-lookup"><span data-stu-id="9ed55-150">Run [Get-ServiceFabricNode](https://msdn.microsoft.com/library/mt125856.aspx) to make sure that the node has indeed transitioned to disabled.</span></span> <span data-ttu-id="9ed55-151">Caso contrário, aguarde até que o nó seja desabilitado.</span><span class="sxs-lookup"><span data-stu-id="9ed55-151">If not wait till the node is disabled.</span></span> <span data-ttu-id="9ed55-152">Não tenha pressa nesta etapa.</span><span class="sxs-lookup"><span data-stu-id="9ed55-152">You cannot hurry this step.</span></span>
3. <span data-ttu-id="9ed55-153">Siga os modelos/instruções da [galeria de modelos de Início Rápido](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-scale-existing) para alterar a quantidade de VMs para uma no Nodetype.</span><span class="sxs-lookup"><span data-stu-id="9ed55-153">Follow the sample/instructions in the [quick start template gallery](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-scale-existing) to change the number of VMs by one in that Nodetype.</span></span> <span data-ttu-id="9ed55-154">Agora, isso removerá a instância VM mais alta.</span><span class="sxs-lookup"><span data-stu-id="9ed55-154">This will now remove the highest VM instance.</span></span> 
4. <span data-ttu-id="9ed55-155">Repita as etapas 1 a 3 conforme necessário, mas nunca reduza verticalmente o número de instâncias no tipo de nó primário para uma quantidade menor do que a camada de confiabilidade garante.</span><span class="sxs-lookup"><span data-stu-id="9ed55-155">Repeat steps 1 through 3 as needed, but never scale down the number of instances in the primary node types less than what the reliability tier warrants.</span></span> <span data-ttu-id="9ed55-156">Confira [os detalhes sobre os níveis de confiabilidade aqui](service-fabric-cluster-capacity.md).</span><span class="sxs-lookup"><span data-stu-id="9ed55-156">Refer to [the details on reliability tiers here](service-fabric-cluster-capacity.md).</span></span>

## <a name="behaviors-you-may-observe-in-service-fabric-explorer"></a><span data-ttu-id="9ed55-157">Comportamentos que podem ser observados no Service Fabric Explorer</span><span class="sxs-lookup"><span data-stu-id="9ed55-157">Behaviors you may observe in Service Fabric Explorer</span></span>
<span data-ttu-id="9ed55-158">Ao escalar verticalmente um cluster, o Service Fabric Explorer refletirá o número de nós (instâncias de conjunto de dimensionamento de máquinas virtuais) que fazem parte do cluster.</span><span class="sxs-lookup"><span data-stu-id="9ed55-158">When you scale up a cluster the Service Fabric Explorer will reflect the number of nodes (Virtual Machine scale set instances) that are part of the cluster.</span></span>  <span data-ttu-id="9ed55-159">No entanto, ao reduzir verticalmente um cluster, você verá o nó removido/instância VM exibida em um estado não íntegro, a menos que você chame o cmdlet [Remove-ServiceFabricNodeState](https://msdn.microsoft.com/library/mt125993.aspx) pelo nome de nó apropriado.</span><span class="sxs-lookup"><span data-stu-id="9ed55-159">However, when you scale a cluster down you will see the removed node/VM instance displayed in an unhealthy state unless you call [Remove-ServiceFabricNodeState cmd](https://msdn.microsoft.com/library/mt125993.aspx) with the appropriate node name.</span></span>   

<span data-ttu-id="9ed55-160">Veja a seguir a explicação para esse comportamento.</span><span class="sxs-lookup"><span data-stu-id="9ed55-160">Here is the explanation for this behavior.</span></span>

<span data-ttu-id="9ed55-161">Os nós listados no Service Fabric Explorer são um reflexo do que os serviços do sistema do Service Fabric (especificamente, FM) conhecem sobre o número de nós que o cluster tinha/tem.</span><span class="sxs-lookup"><span data-stu-id="9ed55-161">The nodes listed in Service Fabric Explorer are a reflection of what the Service Fabric system services (FM specifically) knows about the number of nodes the cluster had/has.</span></span> <span data-ttu-id="9ed55-162">Ao reduzir verticalmente o conjunto de dimensionamento de máquinas virtuais, observe que a VM foi excluída, mas o serviço do sistema do FM ainda acreditará que o nó (mapeado para a VM que foi excluída) voltará.</span><span class="sxs-lookup"><span data-stu-id="9ed55-162">When you scale the Virtual Machine scale set down, the VM was deleted but FM system service still thinks that the node (that was mapped to the VM that was deleted) will come back.</span></span> <span data-ttu-id="9ed55-163">Portanto, o Service Fabric Explorer continua exibindo o nó (embora o estado de integridade possa ser erro ou desconhecido).</span><span class="sxs-lookup"><span data-stu-id="9ed55-163">So Service Fabric Explorer continues to display that node (though the health state may be error or unknown).</span></span>

<span data-ttu-id="9ed55-164">Para certificar-se de que um nó será removido quando uma VM for removida, você tem duas opções:</span><span class="sxs-lookup"><span data-stu-id="9ed55-164">In order to make sure that a node is removed when a VM is removed, you have two options:</span></span>

1) <span data-ttu-id="9ed55-165">Escolha um nível de durabilidade Gold ou Silver (disponível em breve) para os tipos de nó no cluster, o que fornece a integração da infraestrutura.</span><span class="sxs-lookup"><span data-stu-id="9ed55-165">Choose a durability level of Gold or Silver (available soon) for the node types in your cluster, which gives you the infrastructure integration.</span></span> <span data-ttu-id="9ed55-166">Isso, em seguida, removerá automaticamente os nós do estado (FM) dos serviços do sistema ao reduzir verticalmente.</span><span class="sxs-lookup"><span data-stu-id="9ed55-166">Which will then automatically remove the nodes from our system services (FM) state when you scale down.</span></span>
<span data-ttu-id="9ed55-167">Confira [os detalhes sobre os níveis de durabilidade aqui](service-fabric-cluster-capacity.md)</span><span class="sxs-lookup"><span data-stu-id="9ed55-167">Refer to [the details on durability levels here](service-fabric-cluster-capacity.md)</span></span>

2) <span data-ttu-id="9ed55-168">Depois que a instância VM tiver sido reduzida verticalmente, você precisará chamar o [cmdlet Remove-ServiceFabricNodeState](https://msdn.microsoft.com/library/mt125993.aspx).</span><span class="sxs-lookup"><span data-stu-id="9ed55-168">Once the VM instance has been scaled down, you need to call the [Remove-ServiceFabricNodeState cmdlet](https://msdn.microsoft.com/library/mt125993.aspx).</span></span>

> [!NOTE]
> <span data-ttu-id="9ed55-169">Os clusters de Service Fabric exigem um determinado número de nós que devem estar ativos o tempo todo para manter a disponibilidade e preservar o estado – conhecido como "manter o quórum".</span><span class="sxs-lookup"><span data-stu-id="9ed55-169">Service Fabric clusters require a certain number of nodes to be up at all the time in order to maintain availability and preserve state - referred to as "maintaining quorum."</span></span> <span data-ttu-id="9ed55-170">Desta forma, em geral, não é seguro desligar todos os computadores no cluster, a menos que você tenha executado primeiro um [backup completo do estado](service-fabric-reliable-services-backup-restore.md).</span><span class="sxs-lookup"><span data-stu-id="9ed55-170">So, it is typically unsafe to shut down all the machines in the cluster unless you have first performed a [full backup of your state](service-fabric-reliable-services-backup-restore.md).</span></span>
> 
> 

## <a name="next-steps"></a><span data-ttu-id="9ed55-171">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="9ed55-171">Next steps</span></span>
<span data-ttu-id="9ed55-172">Leia os seguintes artigos para saber também sobre como planejar a capacidade do cluster, atualizar um cluster e particionar os serviços:</span><span class="sxs-lookup"><span data-stu-id="9ed55-172">Read the following to also learn about planning cluster capacity, upgrading a cluster, and partitioning services:</span></span>

* [<span data-ttu-id="9ed55-173">Planejar a capacidade do cluster</span><span class="sxs-lookup"><span data-stu-id="9ed55-173">Plan your cluster capacity</span></span>](service-fabric-cluster-capacity.md)
* [<span data-ttu-id="9ed55-174">Atualizações do cluster</span><span class="sxs-lookup"><span data-stu-id="9ed55-174">Cluster upgrades</span></span>](service-fabric-cluster-upgrade.md)
* [<span data-ttu-id="9ed55-175">Serviços com estado de partição para escala máxima</span><span class="sxs-lookup"><span data-stu-id="9ed55-175">Partition stateful services for maximum scale</span></span>](service-fabric-concepts-partitioning.md)

<!--Image references-->
[BrowseServiceFabricClusterResource]: ./media/service-fabric-cluster-scale-up-down/BrowseServiceFabricClusterResource.png
[ClusterResources]: ./media/service-fabric-cluster-scale-up-down/ClusterResources.png
