---
title: "aaaAzure diagnóstico e monitoramento de contêineres de malha do serviço | Microsoft Docs"
description: "Saiba como toomonitor e diagnosticar contêineres organizados em Service Fabric do Microsoft Azure com a solução de contêineres do OMS."
services: service-fabric
documentationcenter: .net
author: dkkapur
manager: timlt
editor: 
ms.assetid: 
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 05/10/2017
ms.author: dekapur
ms.openlocfilehash: cd79111cf78b9d76a60d489bb9953587aa06186d
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="monitoring-windows-server-containers-with-oms"></a><span data-ttu-id="86544-103">Monitorando contêineres do Windows Server com o OMS</span><span class="sxs-lookup"><span data-stu-id="86544-103">Monitoring Windows Server containers with OMS</span></span>

## <a name="oms-containers-solution"></a><span data-ttu-id="86544-104">Solução de Contêineres do OMS</span><span class="sxs-lookup"><span data-stu-id="86544-104">OMS Containers Solution</span></span>

<span data-ttu-id="86544-105">equipe do Operations Management Suite (OMS) Olá publicou uma solução de contêineres para diagnóstico e monitoramento para contêineres.</span><span class="sxs-lookup"><span data-stu-id="86544-105">hello Operations Management Suite (OMS) team has published a Containers solution for diagnostics and monitoring for containers.</span></span> <span data-ttu-id="86544-106">Junto com suas soluções de malha do serviço, essa solução é uma excelente ferramenta toomonitor contêiner as implantações organizada na malha do serviço.</span><span class="sxs-lookup"><span data-stu-id="86544-106">Alongside their Service Fabric solution, this solution is a great tool toomonitor container deployments orchestrated on Service Fabric.</span></span> <span data-ttu-id="86544-107">Aqui está um exemplo simples de qual painel Olá na solução de saudação se parece com:</span><span class="sxs-lookup"><span data-stu-id="86544-107">Here's a simple example of what hello dashboard in hello solution looks like:</span></span>

![Painel do OMS básico](./media/service-fabric-diagnostics-containers-windowsserver/oms-containers-dashboard.png)

<span data-ttu-id="86544-109">Ele também coleta diferentes tipos de logs que podem ser consultados na ferramenta de análise de logs do OMS Olá, e pode ser usado toovisualize qualquer métricas ou eventos que está sendo gerados.</span><span class="sxs-lookup"><span data-stu-id="86544-109">It also collects different kinds of logs that can be queried in hello OMS Log Analytics tool, and can be used toovisualize any metrics or events being generated.</span></span> <span data-ttu-id="86544-110">Olá os tipos de log que são coletados são:</span><span class="sxs-lookup"><span data-stu-id="86544-110">hello log types that are collected are:</span></span>

1. <span data-ttu-id="86544-111">ContainerInventory: mostra informações sobre imagens, nome e localização do contêiner</span><span class="sxs-lookup"><span data-stu-id="86544-111">ContainerInventory: shows information about container location, name, and images</span></span>
2. <span data-ttu-id="86544-112">ContainerImageInventory: informações sobre imagens implantadas, inclusive IDs ou tamanhos</span><span class="sxs-lookup"><span data-stu-id="86544-112">ContainerImageInventory: information about deployed images, including IDs or sizes</span></span>
3. <span data-ttu-id="86544-113">ContainerLog: logs de erros específicos, logs de docker (stdout etc.) e outras entradas</span><span class="sxs-lookup"><span data-stu-id="86544-113">ContainerLog: specific error logs, docker logs (stdout, etc.), and other entries</span></span>
4. <span data-ttu-id="86544-114">ContainerServiceLog: comandos de daemon do docker que foram executados</span><span class="sxs-lookup"><span data-stu-id="86544-114">ContainerServiceLog: docker daemon commands that have been run</span></span>
5. <span data-ttu-id="86544-115">Desempenho: contadores de desempenho incluindo o contêiner de cpu, memória, tráfego de rede, e/s de disco e métricas personalizadas de saudação hospedam máquinas</span><span class="sxs-lookup"><span data-stu-id="86544-115">Perf: performance counters including container cpu, memory, network traffic, disk i/o, and custom metrics from hello host machines</span></span>

<span data-ttu-id="86544-116">Este artigo aborda Olá etapas necessárias tooset o contêiner de monitoramento para seu cluster.</span><span class="sxs-lookup"><span data-stu-id="86544-116">This article covers hello steps required tooset up container monitoring for your cluster.</span></span> <span data-ttu-id="86544-117">toolearn mais sobre solução de contêineres do OMS, confira seus [documentação](../log-analytics/log-analytics-containers.md).</span><span class="sxs-lookup"><span data-stu-id="86544-117">toolearn more about OMS's Containers solution, check out their [documentation](../log-analytics/log-analytics-containers.md).</span></span>

## <a name="1-set-up-a-service-fabric-cluster"></a><span data-ttu-id="86544-118">1. Configurar um cluster do Service Fabric</span><span class="sxs-lookup"><span data-stu-id="86544-118">1. Set up a Service Fabric cluster</span></span>

<span data-ttu-id="86544-119">Criar um cluster usando o modelo do Azure Resource Manager Olá encontrado [aqui](https://github.com/dkkapur/Service-Fabric/tree/master/ARM%20Templates/SF%20OMS%20Sample).</span><span class="sxs-lookup"><span data-stu-id="86544-119">Create a cluster using hello Azure Resource Manager template found [here](https://github.com/dkkapur/Service-Fabric/tree/master/ARM%20Templates/SF%20OMS%20Sample).</span></span> <span data-ttu-id="86544-120">Certifique-se de que tooadd um nome exclusivo do espaço de trabalho do OMS.</span><span class="sxs-lookup"><span data-stu-id="86544-120">Make sure tooadd a unique OMS workspace name.</span></span> <span data-ttu-id="86544-121">Esse modelo também padrões toodeploying criar um cluster na visualização de saudação do Service Fabric (v255.255), que significa que ele não pode ser usado na produção e não pode ser atualizado tooa outra versão do Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="86544-121">This template also defaults toodeploying a cluster in hello preview build of Service Fabric (v255.255), which means that it cannot be used in production, and cannot be upgraded tooa different Service Fabric version.</span></span> <span data-ttu-id="86544-122">Se você decidir toouse este modelo para longo prazo ou usar, altere o número de versão estável de tooa Olá versão de produção.</span><span class="sxs-lookup"><span data-stu-id="86544-122">If you decide toouse this template for long-term or production use, change hello version tooa stable version number.</span></span>

<span data-ttu-id="86544-123">Depois de configurar o cluster hello, confirme que você instalou o certificado apropriado hello e verifique se que você está tooconnect capaz de toohello cluster.</span><span class="sxs-lookup"><span data-stu-id="86544-123">Once hello cluster is set up, confirm that you have installed hello appropriate certificate, and make sure you are able tooconnect toohello cluster.</span></span>

<span data-ttu-id="86544-124">Confirme se o grupo de recursos é configurado corretamente por título toohello [portal do Azure](https://portal.azure.com/) e Localizando a implantação de saudação.</span><span class="sxs-lookup"><span data-stu-id="86544-124">Confirm that your Resource Group is set up correctly by heading toohello [Azure portal](https://portal.azure.com/) and finding hello deployment.</span></span> <span data-ttu-id="86544-125">grupo de recursos de saudação deve conter todos os recursos de malha do serviço Olá e também tem uma solução de análise de Log, bem como uma solução de malha do serviço.</span><span class="sxs-lookup"><span data-stu-id="86544-125">hello resource group should contain all hello Service Fabric resources, and also have a Log Analytics solution as well as a Service Fabric solution.</span></span>

<span data-ttu-id="86544-126">Para modificar um cluster existente do Service Fabric:</span><span class="sxs-lookup"><span data-stu-id="86544-126">For modifying an existing Service Fabric cluster:</span></span>
* <span data-ttu-id="86544-127">Confirme se a opção diagnóstico está habilitado (se não, habilitá-la por meio de [atualizando o conjunto de escala de máquina virtual Olá](/rest/api/virtualmachinescalesets/create-or-update-a-set))</span><span class="sxs-lookup"><span data-stu-id="86544-127">Confirm that Diagnostics is enabled (if not, enable it via [updating hello virtual machine scale set](/rest/api/virtualmachinescalesets/create-or-update-a-set))</span></span>
* <span data-ttu-id="86544-128">Adicionar um espaço de trabalho do OMS, criando uma solução de "Análise de malha do serviço" via hello Azure Marketplace</span><span class="sxs-lookup"><span data-stu-id="86544-128">Add an OMS Workspace by creating a "Service Fabric Analytics" solution via hello Azure Marketplace</span></span>
* <span data-ttu-id="86544-129">Editar fontes de dados de saudação de saudação do Service Fabric solução toopick backup de dados de tabelas de armazenamento do Azure apropriadas hello (definidos pelo WAD) em Olá grupo de recursos que Olá cluster está em</span><span class="sxs-lookup"><span data-stu-id="86544-129">Edit hello data sources of hello Service Fabric solution toopick up data from hello appropriate Azure Storage tables (set up by WAD) in hello Resource Group that hello cluster is in</span></span>
* <span data-ttu-id="86544-130">Adicionar agente hello como um [conjunto de escalas da máquina virtual extensão toohello](/powershell/module/azurerm.compute/add-azurermvmssextension) por meio do PowerShell ou atualizando o conjunto de escala de máquina virtual de saudação (mesmo link acima, modelo de Gerenciador de recursos de saudação toomodify)</span><span class="sxs-lookup"><span data-stu-id="86544-130">Add hello agent as an [extension toohello virtual machine scale set](/powershell/module/azurerm.compute/add-azurermvmssextension) via PowerShell or through updating hello virtual machine scale set (same link as above, toomodify hello Resource Manager template)</span></span>

## <a name="2-deploy-a-container"></a><span data-ttu-id="86544-131">2. Implantar um contêiner</span><span class="sxs-lookup"><span data-stu-id="86544-131">2. Deploy a container</span></span>

<span data-ttu-id="86544-132">Depois que o cluster hello está pronto e confirmar que você pode acessá-lo, implante um contêiner tooit.</span><span class="sxs-lookup"><span data-stu-id="86544-132">Once hello cluster is ready and you have confirmed that you can access it, deploy a container tooit.</span></span> <span data-ttu-id="86544-133">Se você escolher versão de visualização de saudação toouse conforme definido pelo modelo de saudação, você também pode explorar docker novo do Service Fabric compor a funcionalidade.</span><span class="sxs-lookup"><span data-stu-id="86544-133">If you chose toouse hello preview version as set by hello template, you can also explore Service Fabric's new docker compose functionality.</span></span> <span data-ttu-id="86544-134">Tenha em mente que Olá a primeira vez que uma imagem de contêiner é cluster tooa implantado, ele entra em várias imagens de saudação toodownload minutos dependendo de seu tamanho.</span><span class="sxs-lookup"><span data-stu-id="86544-134">Bear in mind that hello first time a container image is deployed tooa cluster, it takes several minutes toodownload hello image depending on its size.</span></span>

## <a name="3-add-hello-containers-solution"></a><span data-ttu-id="86544-135">3. Adicionar solução de contêineres de saudação</span><span class="sxs-lookup"><span data-stu-id="86544-135">3. Add hello Containers solution</span></span>

<span data-ttu-id="86544-136">No hello portal do Azure, crie um recurso de contêineres (em Olá monitoramento + gerenciamento categoria) através do Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="86544-136">In hello Azure portal, create a Containers resource (under hello Monitoring + Management category) through Azure Marketplace.</span></span> 

![Adicionando a solução de Contêineres](./media/service-fabric-diagnostics-containers-windowsserver/containers-solution.png)

<span data-ttu-id="86544-138">Na etapa de criação de hello, ele solicita um espaço de trabalho do OMS.</span><span class="sxs-lookup"><span data-stu-id="86544-138">In hello creation step, it requests an OMS workspace.</span></span> <span data-ttu-id="86544-139">Selecione Olá que foi criado com a implantação de saudação acima.</span><span class="sxs-lookup"><span data-stu-id="86544-139">Select hello one that was created with hello deployment above.</span></span> <span data-ttu-id="86544-140">Esta etapa adiciona uma solução de contêineres dentro de seu espaço de trabalho do OMS e será detectada automaticamente pelo agente do OMS Olá implantado pelo modelo de saudação.</span><span class="sxs-lookup"><span data-stu-id="86544-140">This step adds a Containers solution within your OMS workspace, and is automatically detected by hello OMS agent deployed by hello template.</span></span> <span data-ttu-id="86544-141">Agente de saudação começará a coletar dados sobre processos de contêineres de saudação em cluster hello e em cerca de 10 a 15 minutos, você deve ver a solução de saudação destaque com dados como imagem de saudação do painel de saudação acima.</span><span class="sxs-lookup"><span data-stu-id="86544-141">hello agent will start gathering data on hello containers processes in hello cluster, and in about 10-15 minutes, you should see hello solution light up with data as in hello image of hello dashboard above.</span></span>

## <a name="4-next-steps"></a><span data-ttu-id="86544-142">4. Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="86544-142">4. Next steps</span></span>

<span data-ttu-id="86544-143">O OMS oferece várias ferramentas em Olá toomake de espaço de trabalho se mais útil para você.</span><span class="sxs-lookup"><span data-stu-id="86544-143">OMS offers various tools in hello workspace toomake if more useful for you.</span></span> <span data-ttu-id="86544-144">Explore Olá opções toocustomize Olá solução tooyour necessidades a seguir:</span><span class="sxs-lookup"><span data-stu-id="86544-144">Explore hello following options toocustomize hello solution tooyour needs:</span></span>
- <span data-ttu-id="86544-145">Obter trazido com hello [pesquisa e consulta de log](../log-analytics/log-analytics-log-searches.md) recursos oferecidos como parte da análise de Log</span><span class="sxs-lookup"><span data-stu-id="86544-145">Get familiarized with hello [log search and querying](../log-analytics/log-analytics-log-searches.md) features offered as part of Log Analytics</span></span>
- <span data-ttu-id="86544-146">Configurar Olá OMS agente toopick backup contadores de desempenho específicos (vá toohello espaço de trabalho inicial > Configurações > dados > contadores de desempenho do Windows)</span><span class="sxs-lookup"><span data-stu-id="86544-146">Configure hello OMS agent toopick up specific performance counters (go toohello workspace Home > Settings > Data > Windows Performance Counters)</span></span>
- <span data-ttu-id="86544-147">Configurar o OMS tooset [alerta automatizado](../log-analytics/log-analytics-alerts.md) tooaid regras na detecção e diagnóstico</span><span class="sxs-lookup"><span data-stu-id="86544-147">Configure OMS tooset up [automated alerting](../log-analytics/log-analytics-alerts.md) rules tooaid in detecting and diagnostics</span></span>
