---
title: aaaArchitecture do Azure Service Fabric | Microsoft Docs
description: "Service Fabric é que uma plataforma de sistemas distribuídos usado toobuild escalonável, confiável e fácil de gerenciar aplicativos de nuvem hello. Este artigo mostra a arquitetura de saudação do Service Fabric."
services: service-fabric
documentationcenter: .net
author: rishirsinha
manager: timlt
editor: rishirsinha
ms.assetid: 6b554243-70cb-4c22-9b28-1a8b4703f45e
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 04/19/2017
ms.author: rsinha
ms.openlocfilehash: 0268578094ad1a0010ef44ed940f828b985f6c40
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="service-fabric-architecture"></a><span data-ttu-id="59fae-104">Arquitetura do Service Fabric</span><span class="sxs-lookup"><span data-stu-id="59fae-104">Service Fabric architecture</span></span>
<span data-ttu-id="59fae-105">O Service Fabric é criado com subsistemas em camadas.</span><span class="sxs-lookup"><span data-stu-id="59fae-105">Service Fabric is built with layered subsystems.</span></span> <span data-ttu-id="59fae-106">Esses subsistemas habilitar toowrite aplicativos que são:</span><span class="sxs-lookup"><span data-stu-id="59fae-106">These subsystems enable you toowrite applications that are:</span></span>

* <span data-ttu-id="59fae-107">Altamente disponível</span><span class="sxs-lookup"><span data-stu-id="59fae-107">Highly available</span></span>
* <span data-ttu-id="59fae-108">Escalonável</span><span class="sxs-lookup"><span data-stu-id="59fae-108">Scalable</span></span>
* <span data-ttu-id="59fae-109">Gerenciáveis</span><span class="sxs-lookup"><span data-stu-id="59fae-109">Manageable</span></span>
* <span data-ttu-id="59fae-110">Testável</span><span class="sxs-lookup"><span data-stu-id="59fae-110">Testable</span></span>

<span data-ttu-id="59fae-111">Olá diagrama a seguir mostra os subsistemas principais de saudação do Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="59fae-111">hello following diagram shows hello major subsystems of Service Fabric.</span></span>

![Diagrama da arquitetura do Service Fabric](media/service-fabric-architecture/service-fabric-architecture.png)

<span data-ttu-id="59fae-113">Em um sistema distribuído, Olá capacidade toosecurely comunicação entre nós em um cluster é crucial.</span><span class="sxs-lookup"><span data-stu-id="59fae-113">In a distributed system, hello ability toosecurely communicate between nodes in a cluster is crucial.</span></span> <span data-ttu-id="59fae-114">Em Olá base da pilha de saudação é subsistema de transporte hello, que fornece comunicação segura entre os nós.</span><span class="sxs-lookup"><span data-stu-id="59fae-114">At hello base of hello stack is hello transport subsystem, which provides secure communication between nodes.</span></span> <span data-ttu-id="59fae-115">Acima de transporte Olá subsistema está no subsistema de Federação hello, quais clusters Olá nós diferentes em uma única entidade (chamada de clusters) para que Service Fabric possa detectar falhas, executar seleção líder e fornecer roteamento consistente.</span><span class="sxs-lookup"><span data-stu-id="59fae-115">Above hello transport subsystem lies hello federation subsystem, which clusters hello different nodes into a single entity (named clusters) so that Service Fabric can detect failures, perform leader election, and provide consistent routing.</span></span> <span data-ttu-id="59fae-116">subsistema de confiabilidade Hello, colocada em camadas sobre o subsistema de Federação Olá, é responsável por confiabilidade de saudação de serviços de malha do serviço por meio de mecanismos, como replicação, gerenciamento de recursos e failover.</span><span class="sxs-lookup"><span data-stu-id="59fae-116">hello reliability subsystem, layered on top of hello federation subsystem, is responsible for hello reliability of Service Fabric services through mechanisms such as replication, resource management, and failover.</span></span> <span data-ttu-id="59fae-117">subsistema de Federação Olá também serve como base para Olá hospedagem e a ativação de subsistema, que gerencia o ciclo de vida de saudação de um aplicativo em um único nó.</span><span class="sxs-lookup"><span data-stu-id="59fae-117">hello federation subsystem also underlies hello hosting and activation subsystem, which manages hello lifecycle of an application on a single node.</span></span> <span data-ttu-id="59fae-118">subsistema de gerenciamento Olá gerencia saudação do ciclo de vida de aplicativos e serviços.</span><span class="sxs-lookup"><span data-stu-id="59fae-118">hello management subsystem manages hello lifecycle of applications and services.</span></span> <span data-ttu-id="59fae-119">subsistema de capacidade de teste Olá ajuda os desenvolvedores de aplicativos testar seus serviços por meio de falhas simuladas antes e depois de implantar os ambientes de tooproduction aplicativos e serviços.</span><span class="sxs-lookup"><span data-stu-id="59fae-119">hello testability subsystem helps application developers test their services through simulated faults before and after deploying applications and services tooproduction environments.</span></span> <span data-ttu-id="59fae-120">Malha do serviço fornece a capacidade de saudação tooresolve locais através de seu subsistema de comunicação.</span><span class="sxs-lookup"><span data-stu-id="59fae-120">Service Fabric provides hello ability tooresolve service locations through its communication subsystem.</span></span> <span data-ttu-id="59fae-121">Olá modelos de programação de aplicativo toodevelopers expostos são colocadas em camadas sobre esses subsistemas junto com ferramentas de tooenable do modelo de aplicativo hello.</span><span class="sxs-lookup"><span data-stu-id="59fae-121">hello application programming models exposed toodevelopers are layered on top of these subsystems along with hello application model tooenable tooling.</span></span>

## <a name="transport-subsystem"></a><span data-ttu-id="59fae-122">Subsistema de transporte</span><span class="sxs-lookup"><span data-stu-id="59fae-122">Transport subsystem</span></span>
<span data-ttu-id="59fae-123">subsistema de transporte Olá implementa um canal de comunicação ponto a ponto datagrama.</span><span class="sxs-lookup"><span data-stu-id="59fae-123">hello transport subsystem implements a point-to-point datagram communication channel.</span></span> <span data-ttu-id="59fae-124">Esse canal é usado para comunicação em clusters de malha do serviço e a comunicação entre clientes e o cluster do service fabric hello.</span><span class="sxs-lookup"><span data-stu-id="59fae-124">This channel is used for communication within service fabric clusters and communication between hello service fabric cluster and clients.</span></span> <span data-ttu-id="59fae-125">Ele dá suporte a unidirecional e padrões de comunicação de solicitação-resposta, que fornece a base de saudação para a implementação de transmissão e multicast em Olá camada de Federação.</span><span class="sxs-lookup"><span data-stu-id="59fae-125">It supports one-way and request-reply communication patterns, which provides hello basis for implementing broadcast and multicast in hello Federation layer.</span></span> <span data-ttu-id="59fae-126">subsistema de transporte Olá protege a comunicação usando X509 certificados ou segurança do Windows.</span><span class="sxs-lookup"><span data-stu-id="59fae-126">hello transport subsystem secures communication by using X509 certificates or Windows security.</span></span> <span data-ttu-id="59fae-127">Esse subsistema é usado internamente pelo serviço de malha e não é diretamente acessível toodevelopers para programação de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="59fae-127">This subsystem is used internally by Service Fabric and is not directly accessible toodevelopers for application programming.</span></span>

## <a name="federation-subsystem"></a><span data-ttu-id="59fae-128">Subsistema de federação</span><span class="sxs-lookup"><span data-stu-id="59fae-128">Federation subsystem</span></span>
<span data-ttu-id="59fae-129">Em ordem tooreason sobre um conjunto de nós em um sistema distribuído, você precisa toohave uma exibição consistente do sistema de saudação.</span><span class="sxs-lookup"><span data-stu-id="59fae-129">In order tooreason about a set of nodes in a distributed system, you need toohave a consistent view of hello system.</span></span> <span data-ttu-id="59fae-130">subsistema de Federação Olá usa primitivos de comunicação Olá fornecidos pelo subsistema de transporte hello e costuras Olá vários nós em um único cluster unificado que ele pode argumentar sobre.</span><span class="sxs-lookup"><span data-stu-id="59fae-130">hello federation subsystem uses hello communication primitives provided by hello transport subsystem and stitches hello various nodes into a single unified cluster that it can reason about.</span></span> <span data-ttu-id="59fae-131">Ele fornece primitivos de sistemas distribuído de saudação necessário por Olá outros subsistemas - detecção de falha, seleção de preenchimento e roteamento consistente.</span><span class="sxs-lookup"><span data-stu-id="59fae-131">It provides hello distributed systems primitives needed by hello other subsystems - failure detection, leader election, and consistent routing.</span></span> <span data-ttu-id="59fae-132">subsistema de Federação Olá baseia-se sobre as tabelas de hash distribuído com um espaço de token de 128 bits.</span><span class="sxs-lookup"><span data-stu-id="59fae-132">hello federation subsystem is built on top of distributed hash tables with a 128-bit token space.</span></span> <span data-ttu-id="59fae-133">subsistema Olá cria uma topologia de anel sobre nós hello, com cada nó em anel de saudação que é alocado a um subconjunto do espaço de token de saudação de propriedade.</span><span class="sxs-lookup"><span data-stu-id="59fae-133">hello subsystem creates a ring topology over hello nodes, with each node in hello ring being allocated a subset of hello token space for ownership.</span></span> <span data-ttu-id="59fae-134">Para detecção de falha, a camada de saudação usa um mecanismo de concessão com base em essência superando e arbitragem.</span><span class="sxs-lookup"><span data-stu-id="59fae-134">For failure detection, hello layer uses a leasing mechanism based on heart beating and arbitration.</span></span> <span data-ttu-id="59fae-135">subsistema de Federação Olá também garante através de protocolos de saída que existe apenas um único proprietário de um token a qualquer momento e junção complexa.</span><span class="sxs-lookup"><span data-stu-id="59fae-135">hello federation subsystem also guarantees through intricate join and departure protocols that only a single owner of a token exists at any time.</span></span> <span data-ttu-id="59fae-136">Isso oferece garantias de eleição de líder e de roteamento consistente.</span><span class="sxs-lookup"><span data-stu-id="59fae-136">This provides leader election and consistent routing guarantees.</span></span>

## <a name="reliability-subsystem"></a><span data-ttu-id="59fae-137">Subsistema de confiabilidade</span><span class="sxs-lookup"><span data-stu-id="59fae-137">Reliability subsystem</span></span>
<span data-ttu-id="59fae-138">Olá, subsistema de confiabilidade fornece Olá mecanismo toomake Olá estado de um serviço de malha do serviço altamente disponível por meio do uso de saudação do hello *replicador*, *Gerenciador de Failover*, e  *Balanceador de recurso*.</span><span class="sxs-lookup"><span data-stu-id="59fae-138">hello reliability subsystem provides hello mechanism toomake hello state of a Service Fabric service highly available through hello use of hello *Replicator*, *Failover Manager*, and *Resource Balancer*.</span></span>

* <span data-ttu-id="59fae-139">Olá replicador garante que as alterações de estado na réplica de serviço primário hello serão automaticamente replicados toosecondary réplicas, manter consistência entre réplicas primária e secundária de saudação em um conjunto de réplicas do serviço.</span><span class="sxs-lookup"><span data-stu-id="59fae-139">hello Replicator ensures that state changes in hello primary service replica will automatically be replicated toosecondary replicas, maintaining consistency between hello primary and secondary replicas in a service replica set.</span></span> <span data-ttu-id="59fae-140">replicador de saudação é responsável pelo gerenciamento de quorum entre réplicas Olá Olá conjunto.</span><span class="sxs-lookup"><span data-stu-id="59fae-140">hello replicator is responsible for quorum management among hello replicas in hello replica set.</span></span> <span data-ttu-id="59fae-141">Ele interage com a lista de Olá Olá failover unidade tooget de operações tooreplicate e agente de reconfiguração de saudação fornece com a configuração de saudação do conjunto de réplicas de saudação.</span><span class="sxs-lookup"><span data-stu-id="59fae-141">It interacts with hello failover unit tooget hello list of operations tooreplicate, and hello reconfiguration agent provides it with hello configuration of hello replica set.</span></span> <span data-ttu-id="59fae-142">Essa configuração indica que operações de saudação réplicas necessário toobe replicada.</span><span class="sxs-lookup"><span data-stu-id="59fae-142">That configuration indicates which replicas hello operations need toobe replicated.</span></span> <span data-ttu-id="59fae-143">Serviço de malha fornece um replicador padrão chamado replicador de malha, que pode ser usado por Olá programação API toomake Olá serviço estado do modelo confiável e altamente disponível.</span><span class="sxs-lookup"><span data-stu-id="59fae-143">Service Fabric provides a default replicator called Fabric Replicator, which can be used by hello programming model API toomake hello service state highly available and reliable.</span></span>
* <span data-ttu-id="59fae-144">Olá Gerenciador de Failover garante que quando os nós são adicionados tooor removido do cluster hello, Olá carga é automaticamente redistribuída entre nós disponíveis hello.</span><span class="sxs-lookup"><span data-stu-id="59fae-144">hello Failover Manager ensures that when nodes are added tooor removed from hello cluster, hello load is automatically redistributed across hello available nodes.</span></span> <span data-ttu-id="59fae-145">Se um nó de cluster Olá falhar, cluster Olá reconfigurar automaticamente toomaintain disponibilidade do hello serviço réplicas.</span><span class="sxs-lookup"><span data-stu-id="59fae-145">If a node in hello cluster fails, hello cluster will automatically reconfigure hello service replicas toomaintain availability.</span></span>
* <span data-ttu-id="59fae-146">Olá Gerenciador de recursos coloca réplicas do serviço em um domínio de falha no cluster hello e garante que todas as unidades de failover estão operacionais.</span><span class="sxs-lookup"><span data-stu-id="59fae-146">hello Resource Manager places service replicas across failure domain in hello cluster and ensures that all failover units are operational.</span></span> <span data-ttu-id="59fae-147">Olá Gerenciador de recursos também equilibra os recursos de serviço em Olá subjacente pool compartilhado de distribuição de carga uniforme ideal de tooachieve de nós de cluster.</span><span class="sxs-lookup"><span data-stu-id="59fae-147">hello Resource Manager also balances service resources across hello underlying shared pool of cluster nodes tooachieve optimal uniform load distribution.</span></span>

## <a name="management-subsystem"></a><span data-ttu-id="59fae-148">Subsistema de gerenciamento</span><span class="sxs-lookup"><span data-stu-id="59fae-148">Management subsystem</span></span>
<span data-ttu-id="59fae-149">subsistema de gerenciamento Olá fornece serviço de ponta a ponta e gerenciamento de ciclo de vida do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="59fae-149">hello management subsystem provides end-to-end service and application lifecycle management.</span></span> <span data-ttu-id="59fae-150">Cmdlets do PowerShell e APIs administrativos permitem que você tooprovision, implantar, patch, atualização e desprovisionar aplicativos sem perda de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="59fae-150">PowerShell cmdlets and administrative APIs enable you tooprovision, deploy, patch, upgrade, and de-provision applications without loss of availability.</span></span> <span data-ttu-id="59fae-151">subsistema de gerenciamento Olá realiza isso por meio de saudação serviços a seguir.</span><span class="sxs-lookup"><span data-stu-id="59fae-151">hello management subsystem performs this through hello following services.</span></span>

* <span data-ttu-id="59fae-152">**Gerenciador de cluster**: Este é Olá serviço primário que interage com hello Gerenciador de Failover de aplicativos de saudação tooplace confiabilidade em nós de saudação com base em restrições de posicionamento do serviço de saudação.</span><span class="sxs-lookup"><span data-stu-id="59fae-152">**Cluster Manager**: This is hello primary service that interacts with hello Failover Manager from reliability tooplace hello applications on hello nodes based on hello service placement constraints.</span></span> <span data-ttu-id="59fae-153">Olá Gerenciador de recursos no subsistema de failover garante que restrições Olá nunca são desfeitas.</span><span class="sxs-lookup"><span data-stu-id="59fae-153">hello Resource Manager in failover subsystem ensures that hello constraints are never broken.</span></span> <span data-ttu-id="59fae-154">Gerenciador de cluster de saudação gerencia Olá do ciclo de vida de aplicativos de saudação de provisionar toode-provisão.</span><span class="sxs-lookup"><span data-stu-id="59fae-154">hello cluster manager manages hello lifecycle of hello applications from provision toode-provision.</span></span> <span data-ttu-id="59fae-155">Ele se integra com tooensure de Gerenciador de integridade Olá que a disponibilidade dos aplicativos não seja perdida de uma perspectiva de semântica de integridade durante as atualizações.</span><span class="sxs-lookup"><span data-stu-id="59fae-155">It integrates with hello health manager tooensure that application availability is not lost from a semantic health perspective during upgrades.</span></span>
* <span data-ttu-id="59fae-156">**Gerenciador de Integridade**: esse serviço permite o monitoramento de integridade de aplicativos, serviços e entidades de cluster.</span><span class="sxs-lookup"><span data-stu-id="59fae-156">**Health Manager**: This service enables health monitoring of applications, services, and cluster entities.</span></span> <span data-ttu-id="59fae-157">Entidades de cluster (por exemplo, nós, partições de serviço e réplicas) podem relatar informações de integridade, que são agregadas no repositório de integridade centralizado hello.</span><span class="sxs-lookup"><span data-stu-id="59fae-157">Cluster entities (such as nodes, service partitions, and replicas) can report health information, which is then aggregated into hello centralized health store.</span></span> <span data-ttu-id="59fae-158">Essas informações de integridade fornecem um instantâneo da integridade geral point-in-time de serviços hello e nós distribuídas em vários nós no cluster hello, permitindo que você tootake as ações corretivas necessárias.</span><span class="sxs-lookup"><span data-stu-id="59fae-158">This health information provides an overall point-in-time health snapshot of hello services and nodes distributed across multiple nodes in hello cluster, enabling you tootake any needed corrective actions.</span></span> <span data-ttu-id="59fae-159">Consulta de integridade que APIs permitem que você tooquery eventos de integridade de saudação relatado toohello subsistema de integridade.</span><span class="sxs-lookup"><span data-stu-id="59fae-159">Health query APIs enable you tooquery hello health events reported toohello health subsystem.</span></span> <span data-ttu-id="59fae-160">APIs de consulta de integridade Olá retornar do repositório de dados de integridade bruto Olá armazenados em integridade hello ou Olá agregados, interpretada de dados de integridade para uma entidade de cluster específico.</span><span class="sxs-lookup"><span data-stu-id="59fae-160">hello health query APIs return hello raw health data stored in hello health store or hello aggregated, interpreted health data for a specific cluster entity.</span></span>
* <span data-ttu-id="59fae-161">**Repositório de imagens**: este serviço fornece armazenamento e a distribuição de saudação binários do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="59fae-161">**Image Store**: This service provides storage and distribution of hello application binaries.</span></span> <span data-ttu-id="59fae-162">Esse serviço fornece um repositório de arquivos distribuído simples onde os aplicativos de saudação são carregado tooand baixado do.</span><span class="sxs-lookup"><span data-stu-id="59fae-162">This service provides a simple distributed file store where hello applications are uploaded tooand downloaded from.</span></span>

## <a name="hosting-subsystem"></a><span data-ttu-id="59fae-163">Subsistema de hospedagem</span><span class="sxs-lookup"><span data-stu-id="59fae-163">Hosting subsystem</span></span>
<span data-ttu-id="59fae-164">Gerenciador de cluster de saudação informa Olá subsistema (em execução em cada nó) que os serviços de hospedagem precisa toomanage para um nó específico.</span><span class="sxs-lookup"><span data-stu-id="59fae-164">hello cluster manager informs hello hosting subsystem (running on each node) which services it needs toomanage for a particular node.</span></span> <span data-ttu-id="59fae-165">Olá, em seguida, o subsistema de hospedagem gerencia saudação do ciclo de vida do aplicativo hello nesse nó.</span><span class="sxs-lookup"><span data-stu-id="59fae-165">hello hosting subsystem then manages hello lifecycle of hello application on that node.</span></span> <span data-ttu-id="59fae-166">Ele interage com hello tooensure de componentes confiabilidade e integridade que réplicas de saudação são colocadas corretamente e estão íntegros.</span><span class="sxs-lookup"><span data-stu-id="59fae-166">It interacts with hello reliability and health components tooensure that hello replicas are properly placed and are healthy.</span></span>

## <a name="communication-subsystem"></a><span data-ttu-id="59fae-167">Subsistema de comunicação</span><span class="sxs-lookup"><span data-stu-id="59fae-167">Communication subsystem</span></span>
<span data-ttu-id="59fae-168">Esse subsistema fornece mensagens confiáveis dentro de descoberta de cluster e o serviço de saudação por meio do serviço de nomeação de saudação.</span><span class="sxs-lookup"><span data-stu-id="59fae-168">This subsystem provides reliable messaging within hello cluster and service discovery through hello Naming service.</span></span> <span data-ttu-id="59fae-169">Olá Naming service resolve local tooa do serviço de nomes de cluster hello e permite que propriedades e nomes de serviço toomanage de usuários.</span><span class="sxs-lookup"><span data-stu-id="59fae-169">hello Naming service resolves service names tooa location in hello cluster and enables users toomanage service names and properties.</span></span> <span data-ttu-id="59fae-170">Usando o serviço de nomenclatura hello, os clientes com segurança comunicar com qualquer nó no hello cluster tooresolve um nome de serviço e recuperar metadados de serviço.</span><span class="sxs-lookup"><span data-stu-id="59fae-170">Using hello Naming service, clients can securely communicate with any node in hello cluster tooresolve a service name and retrieve service metadata.</span></span> <span data-ttu-id="59fae-171">Usando uma API de cliente de nomenclatura simple, os usuários do serviço de malha podem desenvolver serviços e clientes capazes de resolver o local de rede atual Olá apesar do dinamismo de nó ou Olá de dimensionamento do cluster Olá novamente.</span><span class="sxs-lookup"><span data-stu-id="59fae-171">Using a simple Naming client API, users of Service Fabric can develop services and clients capable of resolving hello current network location despite node dynamism or hello re-sizing of hello cluster.</span></span>

## <a name="testability-subsystem"></a><span data-ttu-id="59fae-172">Subsistema de capacidade de teste</span><span class="sxs-lookup"><span data-stu-id="59fae-172">Testability subsystem</span></span>
<span data-ttu-id="59fae-173">Capacidade de teste é um conjunto de ferramentas desenvolvidas especificamente para testar serviços criados com base na malha de serviço.</span><span class="sxs-lookup"><span data-stu-id="59fae-173">Testability is a suite of tools specifically designed for testing services built on Service Fabric.</span></span> <span data-ttu-id="59fae-174">Olá ferramentas permitem que um desenvolvedor induzir falhas significativas e execute tooexercise de cenários de teste e validar Olá vários estados e transições que um serviço enfrentam ao longo de seu ciclo de vida, tudo em uma maneira segura e controlada.</span><span class="sxs-lookup"><span data-stu-id="59fae-174">hello tools let a developer easily induce meaningful faults and run test scenarios tooexercise and validate hello numerous states and transitions that a service will experience throughout its lifetime, all in a controlled and safe manner.</span></span> <span data-ttu-id="59fae-175">Capacidade de teste também fornece um mecanismo toorun mais testes que podem iterar várias possíveis falhas sem perder a disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="59fae-175">Testability also provides a mechanism toorun longer tests that can iterate through various possible failures without losing availability.</span></span> <span data-ttu-id="59fae-176">Isso fornece a você um ambiente de teste em produção.</span><span class="sxs-lookup"><span data-stu-id="59fae-176">This provides you with a test-in-production environment.</span></span>

