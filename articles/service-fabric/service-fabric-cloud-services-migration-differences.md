---
title: "Diferenças entre os Serviços de Nuvem e o Service Fabric | Microsoft Docs"
description: "Uma visão geral conceitual para a migração de aplicativos dos Serviços de Nuvem para o Service Fabric."
services: service-fabric
documentationcenter: .net
author: vturecek
manager: timlt
editor: 
ms.assetid: 0b87b1d3-88ad-4658-a465-9f05a3376dee
ms.service: service-fabric
ms.devlang: dotNet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 06/29/2017
ms.author: vturecek
ms.openlocfilehash: 26c0256f6fa299551d92e9bcd058ca359d8c85b3
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/11/2017
---
# <a name="learn-about-the-differences-between-cloud-services-and-service-fabric-before-migrating-applications"></a><span data-ttu-id="5649e-103">Saiba mais sobre as diferenças entre os Serviços de Nuvem e o Service Fabric antes de migrar os aplicativos.</span><span class="sxs-lookup"><span data-stu-id="5649e-103">Learn about the differences between Cloud Services and Service Fabric before migrating applications.</span></span>
<span data-ttu-id="5649e-104">O Service Fabric do Microsoft Azure é a plataforma de aplicativos de nuvem de última geração para aplicativos distribuídos altamente escalonáveis e altamente confiáveis.</span><span class="sxs-lookup"><span data-stu-id="5649e-104">Microsoft Azure Service Fabric is the next-generation cloud application platform for highly scalable, highly reliable distributed applications.</span></span> <span data-ttu-id="5649e-105">Ele apresenta muitos recursos novos para empacotamento, implantação, atualização e gerenciamento de aplicativos em nuvem distribuídos.</span><span class="sxs-lookup"><span data-stu-id="5649e-105">It introduces many new features for packaging, deploying, upgrading, and managing distributed cloud applications.</span></span> 

<span data-ttu-id="5649e-106">Este é um guia introdutório para migrar aplicativos dos Serviços de Nuvem para o Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="5649e-106">This is an introductory guide to migrating applications from Cloud Services to Service Fabric.</span></span> <span data-ttu-id="5649e-107">Ele se concentra principalmente nas diferenças de arquitetura e de design entre os Serviços de Nuvem e o Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="5649e-107">It focuses primarily on architectural and design differences between Cloud Services and Service Fabric.</span></span>

## <a name="applications-and-infrastructure"></a><span data-ttu-id="5649e-108">Aplicativos e infraestrutura</span><span class="sxs-lookup"><span data-stu-id="5649e-108">Applications and infrastructure</span></span>
<span data-ttu-id="5649e-109">Uma diferença fundamental entre os Serviços de Nuvem e o Service Fabric é a relação entre as VMs, as cargas de trabalho e os aplicativos.</span><span class="sxs-lookup"><span data-stu-id="5649e-109">A fundamental difference between Cloud Services and Service Fabric is the relationship between VMs, workloads, and applications.</span></span> <span data-ttu-id="5649e-110">Aqui, uma carga de trabalho é definida como o código que você escreve para executar uma tarefa específica ou fornecer um serviço.</span><span class="sxs-lookup"><span data-stu-id="5649e-110">A workload here is defined as the code you write to perform a specific task or provide a service.</span></span>

* <span data-ttu-id="5649e-111">**Os Serviços de Nuvem dizem respeito à implantação de aplicativos como máquinas virtuais.**</span><span class="sxs-lookup"><span data-stu-id="5649e-111">**Cloud Services is about deploying applications as VMs.**</span></span> <span data-ttu-id="5649e-112">O código que você escreve está acoplado a uma instância de VM, como uma função de trabalho ou Web.</span><span class="sxs-lookup"><span data-stu-id="5649e-112">The code you write is tightly coupled to a VM instance, such as a Web or Worker Role.</span></span> <span data-ttu-id="5649e-113">A implantação de uma carga de trabalho nos Serviços de Nuvem é a implantação de uma ou mais instâncias de VM que executam a carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="5649e-113">To deploy a workload in Cloud Services is to deploy one or more VM instances that run the workload.</span></span> <span data-ttu-id="5649e-114">Há uma distinção entre aplicativos e máquinas virtuais; portanto, não há nenhuma definição formal de um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="5649e-114">There is no separation of applications and VMs, and so there is no formal definition of an application.</span></span> <span data-ttu-id="5649e-115">Um aplicativo pode ser considerado como um conjunto de instâncias de função de trabalho ou Web em uma implantação de Serviços de Nuvem ou toda uma implantação de Serviços de Nuvem.</span><span class="sxs-lookup"><span data-stu-id="5649e-115">An application can be thought of as a set of Web or Worker Role instances within a Cloud Services deployment or as an entire Cloud Services deployment.</span></span> <span data-ttu-id="5649e-116">Neste exemplo, um aplicativo é mostrado como um conjunto de instâncias de função.</span><span class="sxs-lookup"><span data-stu-id="5649e-116">In this example, an application is shown as a set of role instances.</span></span>

![Topologia e aplicativos dos Serviços de Nuvem][1]

* <span data-ttu-id="5649e-118">**O Service Fabric diz respeito à implantação de aplicativos em máquinas virtuais existentes ou computadores que executam o Service Fabric no Windows ou no Linux.**</span><span class="sxs-lookup"><span data-stu-id="5649e-118">**Service Fabric is about deploying applications to existing VMs or machines running Service Fabric on Windows or Linux.**</span></span> <span data-ttu-id="5649e-119">Os serviços que você escreve são completamente separados da infraestrutura subjacente, que é abstraída pela plataforma de aplicativo Service Fabric, para que um aplicativo possa ser implantado em vários ambientes.</span><span class="sxs-lookup"><span data-stu-id="5649e-119">The services you write are completely decoupled from the underlying infrastructure, which is abstracted away by the Service Fabric application platform, so an application can be deployed to multiple environments.</span></span> <span data-ttu-id="5649e-120">Uma carga de trabalho no Service Fabric é chamada de "serviço", e um ou mais serviços são agrupados em um aplicativo formalmente definido que é executado na plataforma de aplicativo Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="5649e-120">A workload in Service Fabric is called a "service," and one or more services are grouped in a formally-defined application that runs on the Service Fabric application platform.</span></span> <span data-ttu-id="5649e-121">Vários aplicativos podem ser implantados em um único cluster do Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="5649e-121">Multiple applications can be deployed to a single Service Fabric cluster.</span></span>

![Topologia e aplicativos Service Fabric][2]

<span data-ttu-id="5649e-123">O Service Fabric em si é uma camada de plataforma de aplicativo que é executada no Windows ou no Linux, enquanto os Serviços de Nuvem são um sistema para a implantação de VMs gerenciadas pelo Azure com cargas de trabalho anexadas.</span><span class="sxs-lookup"><span data-stu-id="5649e-123">Service Fabric itself is an application platform layer that runs on Windows or Linux, whereas Cloud Services is a system for deploying Azure-managed VMs with workloads attached.</span></span>
<span data-ttu-id="5649e-124">O modelo de aplicativo Service Fabric tem uma série de vantagens:</span><span class="sxs-lookup"><span data-stu-id="5649e-124">The Service Fabric application model has a number of advantages:</span></span>

* <span data-ttu-id="5649e-125">Rapidez na implantação.</span><span class="sxs-lookup"><span data-stu-id="5649e-125">Fast deployment times.</span></span> <span data-ttu-id="5649e-126">A criação de instâncias da VM pode ser demorada.</span><span class="sxs-lookup"><span data-stu-id="5649e-126">Creating VM instances can be time consuming.</span></span> <span data-ttu-id="5649e-127">No Service Fabric, as VMs são implantadas somente uma vez para formar um cluster que hospeda a plataforma de aplicativo Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="5649e-127">In Service Fabric, VMs are only deployed once to form a cluster that hosts the Service Fabric application platform.</span></span> <span data-ttu-id="5649e-128">Daí em diante, os pacotes de aplicativos podem ser implantados no cluster rapidamente.</span><span class="sxs-lookup"><span data-stu-id="5649e-128">From that point on, application packages can be deployed to the cluster very quickly.</span></span>
* <span data-ttu-id="5649e-129">Hospedagem de alta densidade.</span><span class="sxs-lookup"><span data-stu-id="5649e-129">High-density hosting.</span></span> <span data-ttu-id="5649e-130">Nos Serviços de Nuvem, uma VM de função de trabalho hospeda uma carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="5649e-130">In Cloud Services, a Worker Role VM hosts one workload.</span></span> <span data-ttu-id="5649e-131">No Service Fabric, os aplicativos são separados das VMs que as executam, o que significa que você pode implantar um grande quantidade de aplicativos em uma pequena quantidade de VMs, podendo reduzir o custo geral de implantações maiores.</span><span class="sxs-lookup"><span data-stu-id="5649e-131">In Service Fabric, applications are separate from the VMs that run them, meaning you can deploy a large number of applications to a small number of VMs, which can lower overall cost for larger deployments.</span></span>
* <span data-ttu-id="5649e-132">A plataforma Service Fabric pode ser executada em qualquer lugar que tenha computadores com Windows Server ou Linux, seja do Azure ou locais.</span><span class="sxs-lookup"><span data-stu-id="5649e-132">The Service Fabric platform can run anywhere that has Windows Server or Linux machines, whether it's Azure or on-premises.</span></span> <span data-ttu-id="5649e-133">A plataforma fornece uma camada de abstração sobre a infraestrutura subjacente para que seu aplicativo possa ser executado em diferentes ambientes.</span><span class="sxs-lookup"><span data-stu-id="5649e-133">The platform provides an abstraction layer over the underlying infrastructure so your application can run on different environments.</span></span> 
* <span data-ttu-id="5649e-134">Gerenciamento de aplicativo distribuído.</span><span class="sxs-lookup"><span data-stu-id="5649e-134">Distributed application management.</span></span> <span data-ttu-id="5649e-135">O Service Fabric é uma plataforma que não apenas hospeda aplicativos distribuídos, mas também ajuda a gerenciar o ciclo de vida, independentemente do ciclo de vida da VM de hospedagem ou do computador.</span><span class="sxs-lookup"><span data-stu-id="5649e-135">Service Fabric is a platform that not only hosts distributed applications, but also helps manage their lifecycle independently of the hosting VM or machine lifecycle.</span></span>

## <a name="application-architecture"></a><span data-ttu-id="5649e-136">Arquitetura do aplicativo</span><span class="sxs-lookup"><span data-stu-id="5649e-136">Application architecture</span></span>
<span data-ttu-id="5649e-137">A arquitetura de um aplicativo de Serviços de Nuvem geralmente inclui várias dependências de serviço externo, como o Barramento de Serviço, Armazenamento de Tabelas e de Blobs do Azure, SQL, Redis e outros para gerenciar o estado e os dados de um aplicativo e a comunicação entre funções de trabalho e Web em uma implantação de Serviços de Nuvem.</span><span class="sxs-lookup"><span data-stu-id="5649e-137">The architecture of a Cloud Services application usually includes numerous external service dependencies, such as Service Bus, Azure Table and Blob Storage, SQL, Redis, and others to manage the state and data of an application and communication between Web and Worker Roles in a Cloud Services deployment.</span></span> <span data-ttu-id="5649e-138">Um exemplo de um aplicativo de Serviços de Nuvem completo pode ter esta aparência:</span><span class="sxs-lookup"><span data-stu-id="5649e-138">An example of a complete Cloud Services application might look like this:</span></span>  

![Arquitetura dos Serviços de Nuvem][9]

<span data-ttu-id="5649e-140">Os aplicativos Service Fabric também podem optar por usar os mesmos serviços externos em um aplicativo completo.</span><span class="sxs-lookup"><span data-stu-id="5649e-140">Service Fabric applications can also choose to use the same external services in a complete application.</span></span> <span data-ttu-id="5649e-141">Usando essa arquitetura de exemplo de Serviços de Nuvem, o caminho de migração mais simples dos Serviços de Nuvem para o Service Fabric é substituir apenas a implantação de Serviços de Nuvem por um aplicativo Service Fabric, mantendo a arquitetura geral dele.</span><span class="sxs-lookup"><span data-stu-id="5649e-141">Using this example Cloud Services architecture, the simplest migration path from Cloud Services to Service Fabric is to replace only the Cloud Services deployment with a Service Fabric application, keeping the overall architecture the same.</span></span> <span data-ttu-id="5649e-142">As funções de trabalho e Web podem ser portadas para serviços sem estado do Service Fabric com o mínimo de alterações de código.</span><span class="sxs-lookup"><span data-stu-id="5649e-142">The Web and Worker Roles can be ported to Service Fabric stateless services with minimal code changes.</span></span>

![Arquitetura do Service Fabric após migração simples][10]

<span data-ttu-id="5649e-144">Neste estágio, o sistema deve continuar a trabalhar como antes.</span><span class="sxs-lookup"><span data-stu-id="5649e-144">At this stage, the system should continue to work the same as before.</span></span> <span data-ttu-id="5649e-145">Aproveitando os recursos de serviço com estado do Service Fabric, os armazenamentos de estado externos podem ser internalizados como serviços com estado, quando for o caso.</span><span class="sxs-lookup"><span data-stu-id="5649e-145">Taking advantage of Service Fabric's stateful features, external state stores can be internalized as stateful services where applicable.</span></span> <span data-ttu-id="5649e-146">Isso é mais complicado que uma migração simples de funções de trabalho e Web para serviços sem estado do Service Fabric, pois ele requer a criação de serviços personalizados que fornecem funcionalidade equivalente ao seu aplicativo, como os serviços externos faziam antes.</span><span class="sxs-lookup"><span data-stu-id="5649e-146">This is more involved than a simple migration of Web and Worker Roles to Service Fabric stateless services, as it requires writing custom services that provide equivalent functionality to your application as the external services did before.</span></span> <span data-ttu-id="5649e-147">Os benefícios de se fazer isso incluem:</span><span class="sxs-lookup"><span data-stu-id="5649e-147">The benefits of doing so include:</span></span> 

* <span data-ttu-id="5649e-148">Removendo dependências externas</span><span class="sxs-lookup"><span data-stu-id="5649e-148">Removing external dependencies</span></span> 
* <span data-ttu-id="5649e-149">Unificar a implantação, gerenciamento e modelos de atualização.</span><span class="sxs-lookup"><span data-stu-id="5649e-149">Unifying the deployment, management, and upgrade models.</span></span> 

<span data-ttu-id="5649e-150">Uma arquitetura de exemplo resultante da internalização desses serviços poderia ter esta aparência:</span><span class="sxs-lookup"><span data-stu-id="5649e-150">An example resulting architecture of internalizing these services could look like this:</span></span>

![Arquitetura do Service Fabric após migração completa][11]

## <a name="communication-and-workflow"></a><span data-ttu-id="5649e-152">Comunicação e fluxo de trabalho</span><span class="sxs-lookup"><span data-stu-id="5649e-152">Communication and workflow</span></span>
<span data-ttu-id="5649e-153">A maioria dos aplicativos do Serviço de Nuvem consistem em mais de uma camada.</span><span class="sxs-lookup"><span data-stu-id="5649e-153">Most Cloud Service applications consist of more than one tier.</span></span> <span data-ttu-id="5649e-154">Da mesma forma, um aplicativo Service Fabric consiste em mais de um serviço (normalmente muitos serviços).</span><span class="sxs-lookup"><span data-stu-id="5649e-154">Similarly, a Service Fabric application consists of more than one service (typically many services).</span></span> <span data-ttu-id="5649e-155">Dois modelos comuns de comunicação têm comunicação direta e por meio de armazenamento durável externo.</span><span class="sxs-lookup"><span data-stu-id="5649e-155">Two common communication models are direct communication and via an external durable storage.</span></span>

### <a name="direct-communication"></a><span data-ttu-id="5649e-156">Comunicação direta</span><span class="sxs-lookup"><span data-stu-id="5649e-156">Direct communication</span></span>
<span data-ttu-id="5649e-157">Com a comunicação direta, as camadas podem se comunicar diretamente por meio do ponto de extremidade exposto por cada camada.</span><span class="sxs-lookup"><span data-stu-id="5649e-157">With direct communication, tiers can communicate directly through endpoint exposed by each tier.</span></span> <span data-ttu-id="5649e-158">Em ambientes sem estado, como os Serviços de Nuvem, isso significa selecionar uma instância de uma função VM, aleatoriamente ou round-robin, para balancear a carga e conectar-se diretamente ao seu ponto de extremidade.</span><span class="sxs-lookup"><span data-stu-id="5649e-158">In stateless environments such as Cloud Services, this means selecting an instance of a VM role, either randomly or round-robin to balance load, and connecting to its endpoint directly.</span></span>

![Comunicação direta dos Serviços de Nuvem][5]

 <span data-ttu-id="5649e-160">A comunicação direta é um modelo de comunicação comum no Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="5649e-160">Direct communication is a common communication model in Service Fabric.</span></span> <span data-ttu-id="5649e-161">A principal diferença entre o Service Fabric e os Serviços de Nuvem é que você se conectar a uma máquina virtual, ao passo que no Service Fabric você se conecta a um serviço.</span><span class="sxs-lookup"><span data-stu-id="5649e-161">The key difference between Service Fabric and Cloud Services is that in Cloud Services you connect to a VM, whereas in Service Fabric you connect to a service.</span></span> <span data-ttu-id="5649e-162">Essa é uma distinção importante por duas razões:</span><span class="sxs-lookup"><span data-stu-id="5649e-162">This is an important distinction for a couple reasons:</span></span>

* <span data-ttu-id="5649e-163">Os serviços no Service Fabric não são associados às VMs que os hospedam. Os serviços podem mover-se pelo cluster e, na verdade, é o que se espera por vários motivos: balanceamento de recursos, failover, atualizações de aplicativos e da infraestrutura e restrições de posicionamento ou carga.</span><span class="sxs-lookup"><span data-stu-id="5649e-163">Services in Service Fabric are not bound to the VMs that host them; services may move around in the cluster, and in fact, are expected to move around for various reasons: Resource balancing, failover, application and infrastructure upgrades, and placement or load constraints.</span></span> <span data-ttu-id="5649e-164">Isso significa que o endereço da instância do serviço pode mudar a qualquer hora.</span><span class="sxs-lookup"><span data-stu-id="5649e-164">This means a service instance's address can change at any time.</span></span> 
* <span data-ttu-id="5649e-165">Uma VM no Service Fabric pode hospedar vários serviços, cada um com pontos de extremidade exclusivos.</span><span class="sxs-lookup"><span data-stu-id="5649e-165">A VM in Service Fabric can host multiple services, each with unique endpoints.</span></span>

<span data-ttu-id="5649e-166">O Service Fabric fornece um mecanismo de descoberta de serviço chamado Serviço de Nomenclatura, que pode ser usado para resolver endereços de ponto de extremidade de serviços.</span><span class="sxs-lookup"><span data-stu-id="5649e-166">Service Fabric provides a service discovery mechanism, called the Naming Service, which can be used to resolve endpoint addresses of services.</span></span> 

![Comunicação direta do Service Fabric][6]

### <a name="queues"></a><span data-ttu-id="5649e-168">Filas</span><span class="sxs-lookup"><span data-stu-id="5649e-168">Queues</span></span>
<span data-ttu-id="5649e-169">Um mecanismo de comunicação comum entre camadas em ambientes sem estado, como os Serviços de Nuvem, é o uso de uma fila de armazenamento externo para armazenar permanentemente as tarefas de trabalho de uma camada para outra.</span><span class="sxs-lookup"><span data-stu-id="5649e-169">A common communication mechanism between tiers in stateless environments such as Cloud Services is to use an external storage queue to durably store work tasks from one tier to another.</span></span> <span data-ttu-id="5649e-170">Um cenário comum é uma camada da Web que envia os trabalhos para uma fila do Azure ou Barramento de Serviço, onde as instâncias de função de trabalho podem remover os trabalhos da fila e processá-los.</span><span class="sxs-lookup"><span data-stu-id="5649e-170">A common scenario is a web tier that sends jobs to an Azure Queue or Service Bus where Worker Role instances can dequeue and process the jobs.</span></span>

![Comunicação em fila dos Serviços de Nuvem][7]

<span data-ttu-id="5649e-172">O mesmo modelo de comunicação pode ser usado no Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="5649e-172">The same communication model can be used in Service Fabric.</span></span> <span data-ttu-id="5649e-173">Isso pode ser útil ao migrar um aplicativo dos Serviços de Nuvem existente para o Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="5649e-173">This can be useful when migrating an existing Cloud Services application to Service Fabric.</span></span> 

![Comunicação direta do Service Fabric][8]

## <a name="next-steps"></a><span data-ttu-id="5649e-175">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="5649e-175">Next Steps</span></span>
<span data-ttu-id="5649e-176">O caminho de migração mais simples dos Serviços de Nuvem para o Service Fabric é substituir apenas a implantação dos Serviços de Nuvem por um aplicativo Service Fabric, mantendo a arquitetura geral dele.</span><span class="sxs-lookup"><span data-stu-id="5649e-176">The simplest migration path from Cloud Services to Service Fabric is to replace only the Cloud Services deployment with a Service Fabric application, keeping the overall architecture of your application roughly the same.</span></span> <span data-ttu-id="5649e-177">O artigo a seguir fornece um guia para ajudar a converter uma função de trabalho ou Web em um serviço sem estado do Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="5649e-177">The following article provides a guide to help convert a Web or Worker Role to a Service Fabric stateless service.</span></span>

* [<span data-ttu-id="5649e-178">Migração simples: converter uma função de trabalho ou Web em um serviço sem estado do Service Fabric</span><span class="sxs-lookup"><span data-stu-id="5649e-178">Simple migration: convert a Web or Worker Role to a Service Fabric stateless service</span></span>](service-fabric-cloud-services-migration-worker-role-stateless-service.md)

<!--Image references-->
[1]: ./media/service-fabric-cloud-services-migration-differences/topology-cloud-services.png
[2]: ./media/service-fabric-cloud-services-migration-differences/topology-service-fabric.png
[5]: ./media/service-fabric-cloud-services-migration-differences/cloud-service-communication-direct.png
[6]: ./media/service-fabric-cloud-services-migration-differences/service-fabric-communication-direct.png
[7]: ./media/service-fabric-cloud-services-migration-differences/cloud-service-communication-queues.png
[8]: ./media/service-fabric-cloud-services-migration-differences/service-fabric-communication-queues.png
[9]: ./media/service-fabric-cloud-services-migration-differences/cloud-services-architecture.png
[10]: ./media/service-fabric-cloud-services-migration-differences/service-fabric-architecture-simple.png
[11]: ./media/service-fabric-cloud-services-migration-differences/service-fabric-architecture-full.png
