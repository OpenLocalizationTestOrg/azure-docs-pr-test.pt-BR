---
title: Planejamento da capacidade de cluster do Service Fabric | Microsoft Docs
description: "Considerações de planejamento de capacidade de cluster do Service Fabric. Níveis de confiabilidade, durabilidade e nodetypes"
services: service-fabric
documentationcenter: .net
author: ChackDan
manager: timlt
editor: 
ms.assetid: 4c584f4a-cb1f-400c-b61f-1f797f11c982
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 07/24/2017
ms.author: chackdan
ms.openlocfilehash: 36b96360fabdcc64ffd2356540c580594637d48e
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/29/2017
---
# <a name="service-fabric-cluster-capacity-planning-considerations"></a><span data-ttu-id="3e0ce-104">Considerações de planejamento de capacidade de cluster do Service Fabric</span><span class="sxs-lookup"><span data-stu-id="3e0ce-104">Service Fabric cluster capacity planning considerations</span></span>
<span data-ttu-id="3e0ce-105">Para qualquer implantação de produção, o planejamento de capacidade é uma etapa importante.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-105">For any production deployment, capacity planning is an important step.</span></span> <span data-ttu-id="3e0ce-106">Aqui estão alguns dos itens que você precisa considerar como parte desse processo.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-106">Here are some of the items that you have to consider as a part of that process.</span></span>

* <span data-ttu-id="3e0ce-107">O número de tipos de nós com os quais o cluster precisa começar</span><span class="sxs-lookup"><span data-stu-id="3e0ce-107">The number of node types your cluster needs to start out with</span></span>
* <span data-ttu-id="3e0ce-108">As propriedades de cada tipo de nó (tamanho, primário, voltado para a Internet, número de VMs etc.)</span><span class="sxs-lookup"><span data-stu-id="3e0ce-108">The properties of each of node type (size, primary, internet facing, number of VMs, etc.)</span></span>
* <span data-ttu-id="3e0ce-109">As características de confiabilidade e durabilidade do cluster</span><span class="sxs-lookup"><span data-stu-id="3e0ce-109">The reliability and durability characteristics of the cluster</span></span>

<span data-ttu-id="3e0ce-110">Vamos examinar rapidamente cada um desses itens.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-110">Let us briefly review each of these items.</span></span>

## <a name="the-number-of-node-types-your-cluster-needs-to-start-out-with"></a><span data-ttu-id="3e0ce-111">O número de tipos de nós com os quais o cluster precisa começar</span><span class="sxs-lookup"><span data-stu-id="3e0ce-111">The number of node types your cluster needs to start out with</span></span>
<span data-ttu-id="3e0ce-112">Primeiro, você precisa descobrir para que o cluster que está criando será usado e que tipos de aplicativos você planeja implantar no cluster.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-112">First, you need to figure out what the cluster you are creating is going to be used for and what kinds of applications you are planning to deploy into this cluster.</span></span> <span data-ttu-id="3e0ce-113">Se não tem certeza quanto à finalidade do cluster, você provavelmente ainda não está pronto para iniciar o processo de planejamento de capacidade.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-113">If you are not clear on the purpose of the cluster, you are most likely not yet ready to enter the capacity planning process.</span></span>

<span data-ttu-id="3e0ce-114">Estabeleça o número de tipos de nós com os quais o cluster precisa começar.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-114">Establish the number of node types your cluster needs to start out with.</span></span>  <span data-ttu-id="3e0ce-115">Cada tipo de nó é mapeado para um Conjunto de Escala de Máquina Virtual.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-115">Each node type is mapped to a Virtual Machine Scale Set.</span></span> <span data-ttu-id="3e0ce-116">Cada tipo de nó pode ser escalado verticalmente para cima ou para baixo de forma independente, tem conjuntos diferentes de portas abertas e pode ter métricas de capacidade diferente.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-116">Each node type can then be scaled up or down independently, have different sets of ports open, and can have different capacity metrics.</span></span> <span data-ttu-id="3e0ce-117">Portanto, a decisão quanto ao número de tipos de nós essencialmente se resume às seguintes considerações:</span><span class="sxs-lookup"><span data-stu-id="3e0ce-117">So the decision of the number of node types essentially comes down to the following considerations:</span></span>

* <span data-ttu-id="3e0ce-118">O aplicativo tem vários serviços, e algum deles precisa ser público ou voltado para a Internet?</span><span class="sxs-lookup"><span data-stu-id="3e0ce-118">Does your application have multiple services, and do any of them need to be public or internet facing?</span></span> <span data-ttu-id="3e0ce-119">Os aplicativos típicos contêm um serviço de gateway de front-end que recebe entrada de um cliente e um ou mais serviços de back-end que se comunicam com os serviços de front-end.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-119">Typical applications contain a front-end gateway service that receives input from a client, and one or more back-end services that communicate with the front-end services.</span></span> <span data-ttu-id="3e0ce-120">Nesse caso, você acaba tendo pelo menos dois tipos de nó.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-120">So in this case, you end up having at least two node types.</span></span>
* <span data-ttu-id="3e0ce-121">Os serviços (que compõem o aplicativo) têm necessidades de infraestrutura diferentes, como maior RAM ou mais ciclos de CPU?</span><span class="sxs-lookup"><span data-stu-id="3e0ce-121">Do your services (that make up your application) have different infrastructure needs such as greater RAM or higher CPU cycles?</span></span> <span data-ttu-id="3e0ce-122">Por exemplo, vamos supor que o aplicativo que você deseja implantar contenha um serviço de front-end e um serviço de back-end.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-122">For example, let us assume that the application that you want to deploy contains a front-end service and a back-end service.</span></span> <span data-ttu-id="3e0ce-123">O serviço de front-end pode ser executado em VMs menores (com tamanhos de VM como D2) que têm portas abertas para a Internet.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-123">The front-end service can run on smaller VMs (VM sizes like D2) that have ports open to the internet.</span></span>  <span data-ttu-id="3e0ce-124">No entanto, o serviço de back-end faz uso intensivo de computação e precisa ser executado em VMs maiores (com tamanhos de VM como D4, D6, D15) que não são voltadas para a Internet.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-124">The back-end service, however, is computation intensive and needs to run on larger VMs (with VM sizes like D4, D6, D15) that are not internet facing.</span></span>
  
  <span data-ttu-id="3e0ce-125">No exemplo, embora você possa optar por colocar todos os serviços em um tipo de um nó, é recomendável colocá-los em um cluster com dois tipos de nó.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-125">In this example, although you can decide to put all the services on one node type, we recommended that you place them in a cluster with two node types.</span></span>  <span data-ttu-id="3e0ce-126">Isso permite que cada tipo de nó tenha propriedades distintas, como conectividade com a Internet ou tamanho de VM.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-126">This allows for each node type to have distinct properties such as internet connectivity or VM size.</span></span> <span data-ttu-id="3e0ce-127">O número de VMs também pode ser dimensionado independentemente.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-127">The number of VMs can be scaled independently, as well.</span></span>  
* <span data-ttu-id="3e0ce-128">Como você não pode prever o futuro, baseie-se no que já sabe e decida com quantos tipos de nós os aplicativos precisam começar.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-128">Since you cannot predict the future, go with facts you know of and decide on the number of node types that your applications need to start with.</span></span> <span data-ttu-id="3e0ce-129">Você sempre pode adicionar ou remover tipos de nós posteriormente.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-129">You can always add or remove node types later.</span></span> <span data-ttu-id="3e0ce-130">Um cluster do Service Fabric deve ter pelo menos um tipo de nó.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-130">A Service Fabric cluster must have at least one node type.</span></span>

## <a name="the-properties-of-each-node-type"></a><span data-ttu-id="3e0ce-131">As propriedades de cada tipo de nó</span><span class="sxs-lookup"><span data-stu-id="3e0ce-131">The properties of each node type</span></span>
<span data-ttu-id="3e0ce-132">O **tipo de nó** pode ser visto como algo equivalente a funções nos Serviços de Nuvem.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-132">The **node type** can be seen as equivalent to roles in Cloud Services.</span></span> <span data-ttu-id="3e0ce-133">Os tipos de nó definem os tamanhos e o número de VMs e suas propriedades.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-133">Node types define the VM sizes, the number of VMs, and their properties.</span></span> <span data-ttu-id="3e0ce-134">Cada tipo de nó definido em um cluster do Service Fabric está configurado como um conjunto de dimensionamento de máquinas virtuais separado.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-134">Every node type that is defined in a Service Fabric cluster is set up as a separate virtual machine scale set.</span></span> <span data-ttu-id="3e0ce-135">Os conjuntos de dimensionamento de máquinas virtuais são um recurso de computação do Azure que você pode usar para implantar e gerenciar uma coleção de máquinas virtuais como um conjunto.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-135">Virtual machine scale set is an Azure compute resource you can use to deploy and manage a collection of virtual machines as a set.</span></span> <span data-ttu-id="3e0ce-136">Sendo definidos como conjuntos de dimensionamento de máquinas virtuais distintos, cada tipo de nó pode ser escalado verticalmente ou horizontalmente de forma independente, ter diferentes conjuntos de portas abertas e ter métricas de capacidade diferentes.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-136">Being defined as distinct virtual machine scale set, each node type can then be scaled up or down independently, have different sets of ports open, and can have different capacity metrics.</span></span>

<span data-ttu-id="3e0ce-137">Leia [este documento](service-fabric-cluster-nodetypes.md) para obter mais detalhes sobre o relacionamento entre Nodetypes para conjunto de dimensionamento de máquinas virtuais, como usar RDP para acessar uma das instâncias, abrir novas portas, etc.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-137">Read [this document](service-fabric-cluster-nodetypes.md) for more details on the relationship of Nodetypes to virtual machine scale set, how to RDP into one of the instances, open new ports etc.</span></span>

<span data-ttu-id="3e0ce-138">O cluster pode ter mais de um tipo de nó, mas o tipo de nó primário (o primeiro que você define no portal) deve ter pelo menos cinco VMs para clusters usados para cargas de trabalho de produção (ou pelo menos três VMs para clusters de teste).</span><span class="sxs-lookup"><span data-stu-id="3e0ce-138">Your cluster can have more than one node type, but the primary node type (the first one that you define on the portal) must have at least five VMs for clusters used for production workloads (or at least three VMs for test clusters).</span></span> <span data-ttu-id="3e0ce-139">Se estiver criando o cluster usando um modelo do Resource Manager, procure um atributo **Primary** na definição do tipo de nó.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-139">If you are creating the cluster using a Resource Manager template, then look for **is Primary** attribute under the node type definition.</span></span> <span data-ttu-id="3e0ce-140">O tipo de nó primário é o tipo de nó em que os serviços do sistema do Service Fabric são colocados.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-140">The primary node type is the node type where Service Fabric system services are placed.</span></span>  

### <a name="primary-node-type"></a><span data-ttu-id="3e0ce-141">Tipo de nó primário</span><span class="sxs-lookup"><span data-stu-id="3e0ce-141">Primary node type</span></span>
<span data-ttu-id="3e0ce-142">Para um cluster com vários tipos de nó, você precisa escolher um deles como primário.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-142">For a cluster with multiple node types, you need to choose one of them to be primary.</span></span> <span data-ttu-id="3e0ce-143">Aqui estão as características de um tipo de nó primário:</span><span class="sxs-lookup"><span data-stu-id="3e0ce-143">Here are the characteristics of a primary node type:</span></span>

* <span data-ttu-id="3e0ce-144">O **tamanho mínimo de VMs** para o tipo de nó primário é determinado pela **camada de durabilidade** que você escolhe.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-144">The **minimum size of VMs** for the primary node type is determined by the **durability tier** you choose.</span></span> <span data-ttu-id="3e0ce-145">O padrão para a camada de durabilidade é Bronze.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-145">The default for the durability tier is Bronze.</span></span> <span data-ttu-id="3e0ce-146">Role para baixo para obter detalhes sobre o que é a camada de durabilidade e os valores que ela pode ter.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-146">Scroll down for details on what the durability tier is and the values it can take.</span></span>  
* <span data-ttu-id="3e0ce-147">O **número mínimo de VMs** para o tipo de nó primário é determinado pela **camada de confiabilidade** que você escolhe.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-147">The **minimum number of VMs** for the primary node type is determined by the **reliability tier** you choose.</span></span> <span data-ttu-id="3e0ce-148">O padrão para a camada de confiabilidade é Prata.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-148">The default for the reliability tier is Silver.</span></span> <span data-ttu-id="3e0ce-149">Role para baixo para obter detalhes sobre o que é a camada de confiabilidade e os valores que ela pode ter.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-149">Scroll down for details on what the reliability tier is and the values it can take.</span></span> 


* <span data-ttu-id="3e0ce-150">Os serviços do sistema do Service Fabric (por exemplo, o serviço Gerenciador de Cluster ou o Serviço de Armazenamento de Imagens) são colocados no tipo de nó primário. Assim, a confiabilidade e a durabilidade do cluster são determinadas pelos valores de camadas de confiabilidade e durabilidade selecionados para o tipo de nó primário.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-150">The Service Fabric system services (for example, the Cluster Manager service or Image Store service) are placed on the primary node type and so the reliability and durability of the cluster is determined by the reliability tier value and durability tier value you select for the primary node type.</span></span>

![<span data-ttu-id="3e0ce-151">Captura de tela de um cluster com dois tipos de nó</span><span class="sxs-lookup"><span data-stu-id="3e0ce-151">Screen shot of a cluster that has two Node Types</span></span> ][SystemServices]

### <a name="non-primary-node-type"></a><span data-ttu-id="3e0ce-152">Tipo de nó não primário</span><span class="sxs-lookup"><span data-stu-id="3e0ce-152">Non-primary node type</span></span>
<span data-ttu-id="3e0ce-153">Para um cluster com vários tipos de nó, há um tipo de nó primário, e os demais serão não primários.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-153">For a cluster with multiple node types, there is one primary node type and the rest of them are non-primary.</span></span> <span data-ttu-id="3e0ce-154">Aqui estão as características de um tipo de nó não primário:</span><span class="sxs-lookup"><span data-stu-id="3e0ce-154">Here are the characteristics of a non-primary node type:</span></span>

* <span data-ttu-id="3e0ce-155">O tamanho mínimo de VMs para o tipo de nó é determinado pela camada de durabilidade que você escolhe.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-155">The minimum size of VMs for this node type is determined by the durability tier you choose.</span></span> <span data-ttu-id="3e0ce-156">O padrão para a camada de durabilidade é Bronze.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-156">The default for the durability tier is Bronze.</span></span> <span data-ttu-id="3e0ce-157">Role para baixo para obter detalhes sobre o que é a camada de durabilidade e os valores que ela pode ter.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-157">Scroll down for details on what the durability tier is and the values it can take.</span></span>  
* <span data-ttu-id="3e0ce-158">O número mínimo de VMs para esse tipo de nó pode ser um.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-158">The minimum number of VMs for this node type can be one.</span></span> <span data-ttu-id="3e0ce-159">No entanto, você deve escolher esse número com base no número de réplicas do aplicativo/serviços que deseja executar nesse tipo de nó.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-159">However you should choose this number based on the number of replicas of the application/services that you would like to run in this node type.</span></span> <span data-ttu-id="3e0ce-160">O número de VMs em um tipo de nó pode ser aumentado após a implantação do cluster.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-160">The number of VMs in a node type can be increased after you have deployed the cluster.</span></span>

## <a name="the-durability-characteristics-of-the-cluster"></a><span data-ttu-id="3e0ce-161">As características de durabilidade do cluster</span><span class="sxs-lookup"><span data-stu-id="3e0ce-161">The durability characteristics of the cluster</span></span>
<span data-ttu-id="3e0ce-162">A camada de durabilidade é usada para indicar ao sistema os privilégios que as VMs têm com a infraestrutura subjacente do Azure.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-162">The durability tier is used to indicate to the system the privileges that your VMs have with the underlying Azure infrastructure.</span></span> <span data-ttu-id="3e0ce-163">No tipo de nó primário, esse privilégio permite que o Service Fabric pause qualquer solicitação de infraestrutura de nível de VM (por exemplo, reinicialização de VM, recriação de imagem de VM ou migração de VM) que afete os requisitos de quorum para os serviços do sistema e os serviços com estado.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-163">In the primary node type, this privilege allows Service Fabric to pause any VM level infrastructure request (such as a VM reboot, VM reimage, or VM migration) that impact the quorum requirements for the system services and your stateful services.</span></span> <span data-ttu-id="3e0ce-164">Nos tipos de nó não primários, esse privilégio permite que o Service Fabric pause quaisquer solicitações de infraestrutura de nível de VM (como reinicialização de VM, recriação de imagem de VM, migração de VM etc.) que afete os requisitos de quorum para os serviços com estado em execução.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-164">In the non-primary node types, this privilege allows Service Fabric to pause any VM level infrastructure requests like VM reboot, VM reimage, VM migration etc., that impact the quorum requirements for your stateful services running in it.</span></span>

<span data-ttu-id="3e0ce-165">Esse privilégio é expresso nos seguintes valores:</span><span class="sxs-lookup"><span data-stu-id="3e0ce-165">This privilege is expressed in the following values:</span></span>

* <span data-ttu-id="3e0ce-166">Ouro – os Trabalhos de infraestrutura podem permanecer em pausa por duas horas por UD.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-166">Gold - The infrastructure Jobs can be paused for a duration of two hours per UD.</span></span> <span data-ttu-id="3e0ce-167">A durabilidade ouro pode ser habilitada apenas em skus de VM de nó completo como D15_V2, G5 etc.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-167">Gold durability can be enabled only on full node VM skus like D15_V2, G5 etc.</span></span>
* <span data-ttu-id="3e0ce-168">Prata – os Trabalhos de infraestrutura podem permanecer em pausa por um período de dez minutos por UD e estão disponíveis em todas as VMs padrão de núcleo único e superior.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-168">Silver - The infrastructure Jobs can be paused for a duration of 10 minutes per UD and is available on all standard VMs of single core and above.</span></span>
* <span data-ttu-id="3e0ce-169">Bronze - sem privilégios.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-169">Bronze - No privileges.</span></span> <span data-ttu-id="3e0ce-170">Esse é o padrão.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-170">This is the default.</span></span> <span data-ttu-id="3e0ce-171">Use esse nível de durabilidade somente para Tipos de nós que executam _somente_ cargas de trabalho sem estado.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-171">Only use this durability level for Node Types that run _only_ stateless workloads.</span></span> 

> [!WARNING]
> <span data-ttu-id="3e0ce-172">NodeTypes executados com durabilidade Bronze não têm _nenhum privilégio_.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-172">NodeTypes running with Bronze durability obtain _no privileges_.</span></span> <span data-ttu-id="3e0ce-173">Isso significa que trabalhos de infraestrutura que afetam sus cargas de trabalho sem estado não serão interrompidas ou atrasadas.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-173">This means that infrastructure jobs that impact your stateless workloads will not be stopped or delayed.</span></span> <span data-ttu-id="3e0ce-174">É possível que tais trabalhos ainda possam afetar suas cargas de trabalho, causando tempo de inatividade ou outros problemas.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-174">It is possible that such jobs can still impact your workloads, causing downtime or other issues.</span></span> <span data-ttu-id="3e0ce-175">Para qualquer tipo de carga de trabalho de produção, é recomendável a execução com pelo menos o nível Prata.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-175">For any sort of production workload, running with at least Silver is recommended.</span></span> 
> 

<span data-ttu-id="3e0ce-176">É preciso escolher o nível de durabilidade de cada um dos tipos de nós. Você pode escolher o nível de durabilidade Ouro ou Prata para um tipo de nó e Bronze para outro no mesmo cluster.**Você deve manter um número mínimo de 5 nós de qualquer tipo de nó que tem uma durabilidade de ouro e prata**.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-176">You get to choose durability level for each of your node-types.You can choose one node-type to have a durability level of Gold or silver and the other have Bronze in the same cluster.**You must maintain a minimum count of 5 nodes for any node-type that has a durability of Gold or silver**.</span></span> 

<span data-ttu-id="3e0ce-177">**Vantagens de usar os níveis de durabilidade Ouro ou Prata**</span><span class="sxs-lookup"><span data-stu-id="3e0ce-177">**Advantages of using Silver or Gold durability levels**</span></span>
 
1. <span data-ttu-id="3e0ce-178">Reduz o número de etapas necessárias em uma operação de redução horizontal (isto é, a desativação do nó e a chamada para Remove-ServiceFabricNodeState ocorrem de maneira automática)</span><span class="sxs-lookup"><span data-stu-id="3e0ce-178">Reduces the number of required steps in a scale-in operation (that is, node deactivation and Remove-ServiceFabricNodeState is called automatically)</span></span>
2. <span data-ttu-id="3e0ce-179">Reduz o risco de perda de dados decorrente de uma operação de alteração de SKU de VM in-loco iniciada pelo cliente ou de operações de infraestrutura do Azure.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-179">Reduces the risk of data loss due to a customer-initiated in-place VM SKU change operation or Azure infrastructure operations.</span></span>
     
<span data-ttu-id="3e0ce-180">**Desvantagens de usar os níveis de durabilidade Ouro ou Prata**</span><span class="sxs-lookup"><span data-stu-id="3e0ce-180">**Disadvantages of using Silver or Gold durability levels**</span></span>
 
1. <span data-ttu-id="3e0ce-181">As implantações no Conjunto de Dimensionamento de Máquinas Virtuais e nos outros recursos do Azure relacionados podem ser atrasadas, podem atingir o tempo limite ou podem ser bloqueadas inteiramente por problemas no cluster ou no nível de infraestrutura.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-181">Deployments to your Virtual Machine Scale Set and other related Azure resources) can be delayed, can time out, or can be blocked entirely by problems in your cluster or at the infrastructure level.</span></span> 
2. <span data-ttu-id="3e0ce-182">Aumenta o número de [eventos de ciclo de vida de réplica](service-fabric-reliable-services-advanced-usage.md#stateful-service-replica-lifecycle ) (por exemplo, trocas primárias) devido às desativações de nós automatizadas durante as operações de infraestrutura do Azure.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-182">Increases the number of [replica lifecycle events](service-fabric-reliable-services-advanced-usage.md#stateful-service-replica-lifecycle ) (for example, primary swaps) due to automated node deactivations during Azure infrastructure operations.</span></span>

### <a name="recommendations-on-when-to-use-silver-or-gold-durability-levels"></a><span data-ttu-id="3e0ce-183">Recomendações de quando usar os níveis de durabilidade Prata ou Ouro</span><span class="sxs-lookup"><span data-stu-id="3e0ce-183">Recommendations on when to use Silver or Gold durability levels</span></span>

<span data-ttu-id="3e0ce-184">Use a durabilidade Prata ou Ouro para todos os tipos de nós que hospedam serviços com estado que você pretende reduzir horizontalmente (reduzir a contagem de instâncias de VM) com frequência, mas prefere que as operações de implantação sejam atrasadas para simplificar essas operações de redução horizontal.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-184">Use Silver or Gold durability for all node types that host stateful services you expect to scale-in (reduce VM instance count) frequently, and you would prefer that deployment operations be delayed in favor of simplifying these scale-in operations.</span></span> <span data-ttu-id="3e0ce-185">Os cenários de escalabilidade horizontal (adicionar instâncias de VMs) não fazem parte das opções da camada de durabilidade, somente os de redução horizontal.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-185">The scale-out scenarios (adding VMs instances) do not play into your choice of the durability tier, only scale-in does.</span></span>

### <a name="operational-recommendations-for-the-node-type-that-you-have-set-to-silver-or-gold-durability-level"></a><span data-ttu-id="3e0ce-186">Recomendações operacionais para o tipo de nó configurado para o nível de durabilidade Prata ou Ouro.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-186">Operational Recommendations for the node type that you have set to silver or gold durability level.</span></span>

1. <span data-ttu-id="3e0ce-187">Mantenha sempre a integridade do cluster e dos aplicativos e verifique se os aplicativos respondem a todos os [eventos de ciclo de vida de réplica do Serviço](service-fabric-reliable-services-advanced-usage.md#stateful-service-replica-lifecycle) (como quando a réplica sendo compilada está paralisada) de maneira oportuna.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-187">Keep your cluster and applications healthy at all times, and make sure that applications respond to all [Service replica lifecycle events](service-fabric-reliable-services-advanced-usage.md#stateful-service-replica-lifecycle) (like replica in build is stuck) in a timely fashion.</span></span>
2. <span data-ttu-id="3e0ce-188">Adotar modos mais seguros de fazer uma alteração de SKU de VM (escalar verticalmente/horizontalmente): a alteração da SKU de VM de um Conjunto de Dimensionamento de Máquinas Virtuais é inerentemente uma operação não segura e portanto deve ser evitada, se possível.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-188">Adopt safer ways to make a VM SKU change (Scale up/down): Changing the VM SKU of a Virtual Machine Scale Set is inherently an unsafe operation and so should be avoided if possible.</span></span> <span data-ttu-id="3e0ce-189">Veja o processo que você pode seguir para evitar problemas comuns.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-189">Here is the process you can follow to avoid common issues.</span></span>
    - <span data-ttu-id="3e0ce-190">**Para tipos de nós não primários:** é recomendado criar um novo Conjunto de Dimensionamento de Máquinas Virtuais, modificar a restrição de posicionamento do serviço para incluir o novo Conjunto de Dimensionamento de Máquinas Virtuais/tipo de nó e, em seguida, reduzir a contagem antiga de instâncias do Conjunto de Dimensionamento de Máquinas Virtuais para 0, um nó de cada vez (isso deve ser feito para garantir que a remoção dos nós não afete a confiabilidade do cluster).</span><span class="sxs-lookup"><span data-stu-id="3e0ce-190">**For non-primary nodetypes:** It is recommended that you create new Virtual Machine Scale Set, modify the service placement constraint to include the new Virtual Machine Scale Set/node type and then reduce the old Virtual Machine Scale Set instance count to 0, one node at a time (this is to make sure that removal of the nodes do not impact the reliability of the cluster).</span></span>
    - <span data-ttu-id="3e0ce-191">**Para o tipo de nó primário**: recomendamos não alterar a SKU de VM do tipo de nó primário.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-191">**For the primary nodetype:** Our recommendation is that you do not change VM SKU of the primary node type.</span></span> <span data-ttu-id="3e0ce-192">Se o motivo da nova SKU for capacidade, recomendamos adicionar mais instâncias ou, se possível, criar um novo cluster.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-192">If the reason for the new SKU is capacity, we recommend adding more instances or if possible, create a new cluster.</span></span> <span data-ttu-id="3e0ce-193">Se você não tiver outra opção, modifique a definição do Modelo do Conjunto de Dimensionamento de Máquinas Virtuais para refletir a nova SKU.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-193">If you have no choice, then make modifications to the Virtual Machine Scale Set Model definition to reflect the new SKU.</span></span> <span data-ttu-id="3e0ce-194">Se o seu cluster tiver apenas um tipo de nó, verifique se todos os aplicativos com estado respondem a todos os [eventos de ciclo de vida de réplica do Serviço](service-fabric-reliable-services-advanced-usage.md#stateful-service-replica-lifecycle) (como quando a réplica sendo compilada está paralisada) de maneira oportuna e se a duração da recompilação da réplica do serviço dura menos de cinco minutos (para o nível de durabilidade Prata).</span><span class="sxs-lookup"><span data-stu-id="3e0ce-194">If your cluster has only one nodetype, then make sure that all your stateful applications respond to all [Service replica lifecycle events](service-fabric-reliable-services-advanced-usage.md#stateful-service-replica-lifecycle) (like replica in build is stuck) in a timely fashion and that your service replica rebuild duration is less than five minutes (for Silver durability level).</span></span> 


> [!WARNING]
> <span data-ttu-id="3e0ce-195">Alterar o Tamanho de SKU da VM para Conjuntos de Dimensionamento de VMs que não executam pelo menos a durabilidade Prata não é recomendado.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-195">Changing the VM SKU Size for VM Scale Sets not running at least Silver durability is not recommened.</span></span> <span data-ttu-id="3e0ce-196">Alterar o Tamanho de SKU da VM é uma operação de infraestrutura no local com destruição de dados.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-196">Changing VM SKU Size is a data-destructive in-place infrastructure operation.</span></span> <span data-ttu-id="3e0ce-197">Sem ter pelo menos alguma capacidade de atrasar ou monitorar essa alteração, é possível que a operação cause perda de dados para serviços com estado ou outros problemas operacionais imprevistos, mesmo para cargas de trabalho sem estado.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-197">Without at least some ability to delay or monitor this change, it is possible that the operation can cause dataloss for stateful services or cause other unforseen operational issues, even for stateless workloads.</span></span> 
> 
    
3. <span data-ttu-id="3e0ce-198">Mantenha uma contagem mínima de cinco nós para qualquer Conjunto de Dimensionamento de Máquinas Virtuais com MR habilitado</span><span class="sxs-lookup"><span data-stu-id="3e0ce-198">Maintain a minimum count of five nodes for any Virtual Machine Scale Set that has MR enabled</span></span>
4. <span data-ttu-id="3e0ce-199">Não exclua instâncias de VM aleatórias; sempre reduza verticalmente o recurso Conjunto de Dimensionamento de Máquinas Virtuais.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-199">Do not delete random VM instances, always use Virtual Machine Scale Set scale down feature.</span></span> <span data-ttu-id="3e0ce-200">A exclusão de instâncias de VM aleatórias tem o potencial de criar desequilíbrios na difusão das instâncias de VM por UD e FD.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-200">The deletion of random VM instances has a potential of creating imbalances in the VM instance spread across UD and FD.</span></span> <span data-ttu-id="3e0ce-201">Esse desequilíbrio pode afetar de maneira negativa a capacidade dos sistemas de executar um balanceamento de carga adequado entre as instâncias do serviço/réplicas do Serviço.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-201">This imbalance could adversely affect the systems ability to properly load balance amongst the service instances/Service replicas.</span></span>
6. <span data-ttu-id="3e0ce-202">Se usar o Dimensionamento Automático, defina as regras de modo que a redução horizontal (remoção de instâncias de VM) seja executada em um nó de cada vez.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-202">If using Autoscale, then set the rules such that scale in (removing of VM instances) are done only one node at a time.</span></span> <span data-ttu-id="3e0ce-203">Redução de mais de uma instância em um momento não é segura.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-203">Scaling down more than one instance at a time is not safe.</span></span>
7. <span data-ttu-id="3e0ce-204">Se a redução de um tipo de nó primário, você deve nunca reduzi-lo mais do que permite que o nível de confiabilidade.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-204">If Scaling down a primary node type, you should never scale it down more than what the reliability tier allows.</span></span>


## <a name="the-reliability-characteristics-of-the-cluster"></a><span data-ttu-id="3e0ce-205">As características de confiabilidade do cluster</span><span class="sxs-lookup"><span data-stu-id="3e0ce-205">The reliability characteristics of the cluster</span></span>
<span data-ttu-id="3e0ce-206">A camada de confiabilidade é usada para definir o número de réplicas dos serviços do sistema que você deseja executar nesse cluster no tipo de nó primário.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-206">The reliability tier is used to set the number of replicas of the system services that you want to run in this cluster on the primary node type.</span></span> <span data-ttu-id="3e0ce-207">Quanto maior for o número de réplicas, mais confiáveis os serviços do sistema serão no cluster.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-207">The more the number of replicas, the more reliable the system services are in your cluster.</span></span>  

<span data-ttu-id="3e0ce-208">A camada de confiabilidade pode ter os valores a seguir:</span><span class="sxs-lookup"><span data-stu-id="3e0ce-208">The reliability tier can take the following values:</span></span>

* <span data-ttu-id="3e0ce-209">Platina - executar os serviços do sistema com uma contagem de conjuntos de réplicas de destino de 9</span><span class="sxs-lookup"><span data-stu-id="3e0ce-209">Platinum - Run the System services with a target replica set count of 9</span></span>
* <span data-ttu-id="3e0ce-210">Ouro - executar os serviços do sistema com uma contagem de conjuntos de réplicas de destino de 7</span><span class="sxs-lookup"><span data-stu-id="3e0ce-210">Gold - Run the System services with a target replica set count of 7</span></span>
* <span data-ttu-id="3e0ce-211">Prata - executar os serviços do sistema com uma contagem de conjuntos de réplicas de destino de 5</span><span class="sxs-lookup"><span data-stu-id="3e0ce-211">Silver - Run the System services with a target replica set count of 5</span></span> 
* <span data-ttu-id="3e0ce-212">Bronze - executar os serviços do sistema com uma contagem de conjuntos de réplicas de destino de 3</span><span class="sxs-lookup"><span data-stu-id="3e0ce-212">Bronze - Run the System services with a target replica set count of 3</span></span>

> [!NOTE]
> <span data-ttu-id="3e0ce-213">A camada de confiabilidade que você escolhe determina o número mínimo de nós que o tipo de nó primário deve ter.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-213">The reliability tier you choose determines the minimum number of nodes your primary node type must have.</span></span> 
> 
> 


### <a name="recommendations-for-the-reliability-tier"></a><span data-ttu-id="3e0ce-214">Recomendações para a camada de confiabilidade.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-214">Recommendations for the reliability tier.</span></span>

 <span data-ttu-id="3e0ce-215">Quando você aumenta ou diminui o tamanho do cluster (a soma das instâncias VM em todos os tipos de nó), você deve atualizar a confiabilidade do seu cluster de um nível para outro.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-215">When you increase or decrease the size of your cluster (the sum of VM instances in all node types), you must update the reliability of your cluster from one tier to another.</span></span> <span data-ttu-id="3e0ce-216">Fazer isso dispara as atualizações de cluster necessárias para alterar a contagem de conjuntos de réplicas dos serviços do sistema.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-216">Doing this triggers the cluster upgrades needed to change the system services replica set count.</span></span> <span data-ttu-id="3e0ce-217">Aguarde a conclusão da atualização em andamento antes de fazer outras alterações no cluster, assim como adicionar nós.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-217">Wait for the upgrade in progress to complete before making any other changes to the cluster, like adding nodes.</span></span>  <span data-ttu-id="3e0ce-218">Você pode monitorar o andamento da atualização no Service Fabric Explorer ou executando [Get-ServiceFabricClusterUpgrade](/powershell/module/servicefabric/get-servicefabricclusterupgrade?view=azureservicefabricps)</span><span class="sxs-lookup"><span data-stu-id="3e0ce-218">You can monitor the progress of the upgrade on Service Fabric Explorer or by running [Get-ServiceFabricClusterUpgrade](/powershell/module/servicefabric/get-servicefabricclusterupgrade?view=azureservicefabricps)</span></span>

<span data-ttu-id="3e0ce-219">Aqui está a recomendação sobre como escolher o nível de confiabilidade.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-219">Here is the recommendation on choosing the reliability tier.</span></span>

| <span data-ttu-id="3e0ce-220">**Tamanho do cluster**</span><span class="sxs-lookup"><span data-stu-id="3e0ce-220">**Cluster Size**</span></span> | <span data-ttu-id="3e0ce-221">**Camada de confiabilidade**</span><span class="sxs-lookup"><span data-stu-id="3e0ce-221">**Reliability Tier**</span></span> |
| --- | --- |
| <span data-ttu-id="3e0ce-222">1</span><span class="sxs-lookup"><span data-stu-id="3e0ce-222">1</span></span> |<span data-ttu-id="3e0ce-223">Não especifique o parâmetro de camada de confiabilidade, o sistema calculará</span><span class="sxs-lookup"><span data-stu-id="3e0ce-223">Do not specify the Reliability Tier parameter, the system calculates it</span></span> |
| <span data-ttu-id="3e0ce-224">3</span><span class="sxs-lookup"><span data-stu-id="3e0ce-224">3</span></span> |<span data-ttu-id="3e0ce-225">Bronze</span><span class="sxs-lookup"><span data-stu-id="3e0ce-225">Bronze</span></span> |
| <span data-ttu-id="3e0ce-226">5 ou 6</span><span class="sxs-lookup"><span data-stu-id="3e0ce-226">5 or 6</span></span>|<span data-ttu-id="3e0ce-227">Silver</span><span class="sxs-lookup"><span data-stu-id="3e0ce-227">Silver</span></span> |
| <span data-ttu-id="3e0ce-228">7 ou 8</span><span class="sxs-lookup"><span data-stu-id="3e0ce-228">7 or 8</span></span> |<span data-ttu-id="3e0ce-229">Gold</span><span class="sxs-lookup"><span data-stu-id="3e0ce-229">Gold</span></span> |
| <span data-ttu-id="3e0ce-230">9 e superior</span><span class="sxs-lookup"><span data-stu-id="3e0ce-230">9 and up</span></span> |<span data-ttu-id="3e0ce-231">Platinum</span><span class="sxs-lookup"><span data-stu-id="3e0ce-231">Platinum</span></span> |




## <a name="primary-node-type---capacity-guidance"></a><span data-ttu-id="3e0ce-232">Tipo de nó Primário - Diretrizes de Capacidade</span><span class="sxs-lookup"><span data-stu-id="3e0ce-232">Primary node type - Capacity Guidance</span></span>

<span data-ttu-id="3e0ce-233">Eis aqui as diretrizes de planejamento da capacidade do tipo de nó principal</span><span class="sxs-lookup"><span data-stu-id="3e0ce-233">Here is the guidance for planning the primary node type capacity</span></span>

1. <span data-ttu-id="3e0ce-234">**Número de instâncias de VM para executar qualquer carga de trabalho de produção no Azure:** você deve especificar um tamanho mínimo de tipo de Nó Primário de 5.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-234">**Number of VM instances to run any production workload in Azure:** You must specify a minimum Primary Node type size of 5.</span></span> 
2. <span data-ttu-id="3e0ce-235">**Número de instâncias de VM para executar cargas de trabalho de teste no Azure** Você pode especificar um tamanho mínimo de tipo de nó primário de 1 ou 3.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-235">**Number of VM instances to run test workloads in Azure** You can specify a minimum primary node type size of 1 or 3.</span></span> <span data-ttu-id="3e0ce-236">O cluster de um nó é executado com uma configuração especial e, portanto, não há suporte para expansão desse cluster.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-236">The one node cluster, runs with a special configuration and so, scale out of that cluster is not supported.</span></span> <span data-ttu-id="3e0ce-237">O cluster de um nó não tem confiabilidade e assim, em seu modelo do Resource Manager, você precisa remover ou não especificar essa configuração (não definir o valor de configuração não é suficiente).</span><span class="sxs-lookup"><span data-stu-id="3e0ce-237">The one node cluster, has no reliability and so in your Resource Manager template, you have to remove/not specify that configuration (not setting the configuration value is not enough).</span></span> <span data-ttu-id="3e0ce-238">Se você configurar o cluster de um nó configurado por meio do Portal, em seguida, a configuração será feita automaticamente.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-238">If you set up the one node cluster set up via portal, then the configuration is automatically taken care of.</span></span> <span data-ttu-id="3e0ce-239">Não há suporte para clusters de 1 e 3 nós para executar cargas de trabalho de produção.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-239">1 and 3 node clusters are not supported for running production workloads.</span></span> 
3. <span data-ttu-id="3e0ce-240">**SKU da VM:** o tipo de nó Primário é onde os serviços do sistema são executados e, portanto, a SKU de VM escolhida deve levar em consideração o pico de carga geral que você planeja colocar no cluster.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-240">**VM SKU:** Primary node type is where the system services run, so the VM SKU you choose for it, must take into account the overall peak load you plan to place into the cluster.</span></span> <span data-ttu-id="3e0ce-241">Aqui está uma analogia para ilustrar o que quero dizer – pense no tipo de nó primário como seus "pulmões", ele fornece oxigênio para seu cérebro e, dessa forma, se o cérebro não obtiver oxigênio suficiente, seu corpo será prejudicado.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-241">Here is an analogy to illustrate what I mean here - Think of the primary node type as your "Lungs", it is what provides oxygen to your brain, and so if the brain does not get enough oxygen, your body suffers.</span></span> 

<span data-ttu-id="3e0ce-242">Como as necessidades de capacidade de um cluster são determinadas pela carga de trabalho que você planeja executar no cluster, não podemos fornecer a você uma diretriz qualitativa para sua carga de trabalho específica, mas veja estas diretrizes amplas para ajudar você a começar</span><span class="sxs-lookup"><span data-stu-id="3e0ce-242">Since the capacity needs of a cluster is determined by workload you plan to run in the cluster, we cannot provide you with qualitative guidance for your specific workload, however here is the broad guidance to help you get started</span></span>

<span data-ttu-id="3e0ce-243">Para cargas de trabalho de produção</span><span class="sxs-lookup"><span data-stu-id="3e0ce-243">For production workloads</span></span> 


- <span data-ttu-id="3e0ce-244">A SKU de VM recomendada é a Standard D3 ou a Standard D3_V2 ou equivalente, com um mínimo de 14 GB de SSD local.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-244">The recommended VM SKU is Standard D3 or Standard D3_V2 or equivalent with a minimum of 14 GB of local SSD.</span></span>
- <span data-ttu-id="3e0ce-245">A SKU de VM de uso mínimo com suporte é a Standard D1 ou a Standard D1_V2 ou equivalente, com um mínimo de 14 GB de SSD local.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-245">The minimum supported use VM SKU is Standard D1 or Standard D1_V2 or equivalent with a minimum of 14 GB of local SSD.</span></span> 
- <span data-ttu-id="3e0ce-246">As SKUs de VM de núcleo parcial como a Standard A0 não têm suporte para cargas de trabalho de produção.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-246">Partial core VM SKUs like Standard A0 are not supported for production workloads.</span></span>
- <span data-ttu-id="3e0ce-247">A SKU Standard A1 não tem suporte para cargas de trabalho de produção por motivos de desempenho.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-247">Standard A1 SKU is not supported for production workloads for performance reasons.</span></span>


## <a name="non-primary-node-type---capacity-guidance-for-stateful-workloads"></a><span data-ttu-id="3e0ce-248">O tipo de nó Não Principal - Diretrizes de Capacidade para cargas de trabalho com monitoração de estado</span><span class="sxs-lookup"><span data-stu-id="3e0ce-248">Non-Primary node type - Capacity Guidance for stateful workloads</span></span>

<span data-ttu-id="3e0ce-249">Este guia é para cargas de trabalho com monitoração de estado usando o Service Fabric [coleções confiáveis ou reliable Actors](service-fabric-choose-framework.md) que você está executando no tipo de nó não primário.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-249">This guidance is for stateful Workloads using Service fabric [reliable collections or reliable Actors](service-fabric-choose-framework.md) that you are running in the non-primary node type.</span></span>


<span data-ttu-id="3e0ce-250">**Número de instâncias de VM:** para as cargas de trabalho de produção com monitoração de estado, é recomendável que você as execute com uma contagem de réplica mínima e de destino de 5.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-250">**Number of VM instances:** For production workloads that are stateful, it is recommended that you run them with a minimum and target replica count of 5.</span></span> <span data-ttu-id="3e0ce-251">Isso significa que no estado estável, você fica com uma réplica (de um conjunto de réplicas) em cada domínio de falha e em cada domínio de atualização.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-251">This means that in steady state you end up with a replica (from a replica set) in each fault domain and upgrade domain.</span></span> <span data-ttu-id="3e0ce-252">O conceito de camada de confiabilidade inteira para o tipo de nó primário é, na verdade, apenas uma maneira de especificar essa configuração para serviços do sistema.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-252">The whole reliability tier concept for the primary node type is a way to specify this setting for system services.</span></span> <span data-ttu-id="3e0ce-253">Portanto a mesma consideração aplica-se aos serviços com monitoração de estado também.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-253">So the same consideration applies to your stateful services as well.</span></span>

<span data-ttu-id="3e0ce-254">Assim, para cargas de trabalho de produção, o tamanho mínimo recomendado do tamanho do tipo de Nó não Principal é 5, se você estiver executando cargas de trabalho com monitoração de estado nele.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-254">So for production workloads, the minimum recommended non-Primary Node type size is 5, if you are running stateful workloads in it.</span></span>


<span data-ttu-id="3e0ce-255">**SKU de VM:** esse é o tipo de nó em que seus serviços de aplicativo estão sendo executados e, portanto, a SKU de VM escolhida deverá levar em conta a carga máxima que você deseja colocar em cada nó.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-255">**VM SKU:** This is the node type where your application services are running, so the VM SKU you choose for it, must take into account the peak load you plan to place into each Node.</span></span> <span data-ttu-id="3e0ce-256">As necessidades de capacidade do tipo de nó são determinadas pela carga de trabalho que você planeja executar no cluster e, portanto, não podemos fornecer a você diretriz qualitativa para sua carga de trabalho específica, mas veja estas diretrizes amplas para ajudar você a começar</span><span class="sxs-lookup"><span data-stu-id="3e0ce-256">The capacity needs of the nodetype, is determined by workload you plan to run in the cluster, so we cannot provide you with qualitative guidance for your specific workload, however here is the broad guidance to help you get started</span></span>

<span data-ttu-id="3e0ce-257">Para cargas de trabalho de produção</span><span class="sxs-lookup"><span data-stu-id="3e0ce-257">For production workloads</span></span> 

- <span data-ttu-id="3e0ce-258">A SKU de VM recomendada é a Standard D3 ou a Standard D3_V2 ou equivalente, com um mínimo de 14 GB de SSD local.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-258">The recommended VM SKU is Standard D3 or Standard D3_V2 or equivalent with a minimum of 14 GB of local SSD.</span></span>
- <span data-ttu-id="3e0ce-259">A SKU de VM de uso mínimo com suporte é a Standard D1 ou a Standard D1_V2 ou equivalente, com um mínimo de 14 GB de SSD local.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-259">The minimum supported use VM SKU is Standard D1 or Standard D1_V2 or equivalent with a minimum of 14 GB of local SSD.</span></span> 
- <span data-ttu-id="3e0ce-260">As SKUs de VM de núcleo parcial como a Standard A0 não têm suporte para cargas de trabalho de produção.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-260">Partial core VM SKUs like Standard A0 are not supported for production workloads.</span></span>
- <span data-ttu-id="3e0ce-261">Especificamente, a SKU Standard A1 não tem suporte para cargas de trabalho de produção por motivos de desempenho.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-261">Standard A1 SKU is specifically not supported for production workloads for performance reasons.</span></span>


## <a name="non-primary-node-type---capacity-guidance-for-stateless-workloads"></a><span data-ttu-id="3e0ce-262">O tipo de nó Não Principal - Diretrizes de Capacidade para cargas de trabalho sem monitoração de estado</span><span class="sxs-lookup"><span data-stu-id="3e0ce-262">Non-Primary node type - Capacity Guidance for stateless workloads</span></span>

<span data-ttu-id="3e0ce-263">Este guia de cargas de trabalho sem monitoração de estado que você está executando no nodetype não primário.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-263">This guidance of stateless Workloads that you are running on the non-primary nodetype.</span></span>

<span data-ttu-id="3e0ce-264">**Número de instâncias de VM:** para cargas de trabalho de produção sem estado, o tamanho mínimo do tipo de Nó não Principal com suporte é 2.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-264">**Number of VM instances:** For production workloads that are stateless, the minimum supported non-Primary Node type size is 2.</span></span> <span data-ttu-id="3e0ce-265">Isso permite a execução de duas instâncias sem monitoração de estado do seu aplicativo e permite que seu serviço sobreviva à perda de uma instância de VM.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-265">This allows you to run you two stateless instances of your application and allowing your service to survive the loss of a VM instance.</span></span> 

> [!NOTE]
> <span data-ttu-id="3e0ce-266">Se o cluster estiver em execução em uma versão do Service Fabric inferior a 5.6, devido a um defeito no tempo de execução (esse problema é corrigido na versão 5.6), o dimensionamento de um tipo de nó não primário para menos de 5 fará com que o cluster se torne não íntegro, até você chamar [Remove-ServiceFabricNodeState cmd](https://docs.microsoft.com/powershell/servicefabric/vlatest/Remove-ServiceFabricNodeState) com o nome de nó apropriado.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-266">If your cluster is running on a service fabric version less than 5.6, due to a defect in the runtime (this issue is fixed in 5.6), scaling down a non-primary node type to less than 5, results in cluster health turning unhealthy, till you call [Remove-ServiceFabricNodeState cmd](https://docs.microsoft.com/powershell/servicefabric/vlatest/Remove-ServiceFabricNodeState) with the appropriate node name.</span></span> <span data-ttu-id="3e0ce-267">Leia [Sair ou entrar no cluster do Service Fabric](service-fabric-cluster-scale-up-down.md) para obter mais detalhes</span><span class="sxs-lookup"><span data-stu-id="3e0ce-267">Read [perform Service Fabric cluster in or out](service-fabric-cluster-scale-up-down.md) for more details</span></span>
> 
>

<span data-ttu-id="3e0ce-268">**SKU de VM:** esse é o tipo de nó em que seus serviços de aplicativo estão sendo executados e, portanto, a SKU de VM escolhida deverá levar em conta a carga máxima que você deseja colocar em cada nó.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-268">**VM SKU:** This is the node type where your application services are running, so the VM SKU you choose for it, must take into account the peak load you plan to place into each Node.</span></span> <span data-ttu-id="3e0ce-269">As necessidades de capacidade do tipo de nó são determinadas pela carga de trabalho que você planeja executar no cluster e, portanto, não podemos fornecer a você diretriz qualitativa para sua carga de trabalho específica, mas veja estas diretrizes amplas para ajudar você a começar</span><span class="sxs-lookup"><span data-stu-id="3e0ce-269">The capacity needs of the nodetype, is determined by workload you plan to run in the cluster, So we cannot provide you with qualitative guidance for your specific workload, however here is the broad guidance to help you get started</span></span>

<span data-ttu-id="3e0ce-270">Para cargas de trabalho de produção</span><span class="sxs-lookup"><span data-stu-id="3e0ce-270">For production workloads</span></span> 


- <span data-ttu-id="3e0ce-271">A SKU de VM recomendada é a Standard D3 ou a Standard D3_V2 ou equivalente.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-271">The recommended VM SKU is Standard D3 or Standard D3_V2 or equivalent.</span></span> 
- <span data-ttu-id="3e0ce-272">O uso mínimo com suporte da SKU de VM é a Standard D1 ou a Standard D1_V2 ou equivalente.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-272">The minimum supported use VM SKU is Standard D1 or Standard D1_V2 or equivalent.</span></span> 
- <span data-ttu-id="3e0ce-273">As SKUs de VM de núcleo parcial como a Standard A0 não têm suporte para cargas de trabalho de produção.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-273">Partial core VM SKUs like Standard A0 are not supported for production workloads.</span></span>
- <span data-ttu-id="3e0ce-274">A SKU Standard A1 não tem suporte para cargas de trabalho de produção por motivos de desempenho.</span><span class="sxs-lookup"><span data-stu-id="3e0ce-274">Standard A1 SKU is not supported for production workloads for performance reasons.</span></span>

<!--Every topic should have next steps and links to the next logical set of content to keep the customer engaged-->

## <a name="next-steps"></a><span data-ttu-id="3e0ce-275">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="3e0ce-275">Next steps</span></span>
<span data-ttu-id="3e0ce-276">Após concluir o planejamento de capacidade e configurar um cluster, leia o seguinte:</span><span class="sxs-lookup"><span data-stu-id="3e0ce-276">Once you finish your capacity planning and set up a cluster, read the following:</span></span>

* [<span data-ttu-id="3e0ce-277">Segurança do Cluster do Service Fabric</span><span class="sxs-lookup"><span data-stu-id="3e0ce-277">Service Fabric cluster security</span></span>](service-fabric-cluster-security.md)
* [<span data-ttu-id="3e0ce-278">Introdução ao modelo de Integridade do Service Fabric</span><span class="sxs-lookup"><span data-stu-id="3e0ce-278">Service Fabric health model introduction</span></span>](service-fabric-health-introduction.md)
* [<span data-ttu-id="3e0ce-279">Definir relação entre tipos de nó e conjunto de dimensionamento de máquinas virtuais</span><span class="sxs-lookup"><span data-stu-id="3e0ce-279">Relationship of Nodetypes to Virtual machine scale set</span></span>](service-fabric-cluster-nodetypes.md)

<!--Image references-->
[SystemServices]: ./media/service-fabric-cluster-capacity/SystemServices.png
