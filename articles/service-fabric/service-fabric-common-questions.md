---
title: aaaCommon perguntas sobre o Microsoft Azure Service Fabric | Microsoft Docs
description: Perguntas frequentes e respostas sobre o Service Fabric
services: service-fabric
documentationcenter: .net
author: chackdan
manager: timlt
editor: 
ms.assetid: 5a179703-ff0c-4b8e-98cd-377253295d12
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/18/2017
ms.author: chackdan
ms.openlocfilehash: 4cbe92d2a03f7a1ea5d077807fdc982288220a7e
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="commonly-asked-service-fabric-questions"></a><span data-ttu-id="3207b-103">Perguntas frequentes sobre o Service Fabric</span><span class="sxs-lookup"><span data-stu-id="3207b-103">Commonly asked Service Fabric questions</span></span>

<span data-ttu-id="3207b-104">Há muitas perguntas frequentes sobre o que o Service Fabric pode fazer e como ele deve ser usado.</span><span class="sxs-lookup"><span data-stu-id="3207b-104">There are many commonly asked questions about what Service Fabric can do and how it should be used.</span></span> <span data-ttu-id="3207b-105">Este documento aborda muitas dessas perguntas comuns e suas respostas.</span><span class="sxs-lookup"><span data-stu-id="3207b-105">This document covers many of those common questions and their answers.</span></span>

## <a name="cluster-setup-and-management"></a><span data-ttu-id="3207b-106">Gerenciamento e instalação de cluster</span><span class="sxs-lookup"><span data-stu-id="3207b-106">Cluster setup and management</span></span>

### <a name="can-i-create-a-cluster-that-spans-multiple-azure-regions-or-my-own-datacenters"></a><span data-ttu-id="3207b-107">É possível criar um cluster que abranja várias regiões do Azure ou meus próprios data centers?</span><span class="sxs-lookup"><span data-stu-id="3207b-107">Can I create a cluster that spans multiple Azure regions or my own datacenters?</span></span>

<span data-ttu-id="3207b-108">Sim.</span><span class="sxs-lookup"><span data-stu-id="3207b-108">Yes.</span></span> 

<span data-ttu-id="3207b-109">Central de saudação tecnologia de clustering de malha do serviço pode ser usado toocombine máquinas em execução em qualquer lugar no mundo Olá, desde que eles têm conectividade rede tooeach outros.</span><span class="sxs-lookup"><span data-stu-id="3207b-109">hello core Service Fabric clustering technology can be used toocombine machines running anywhere in hello world, so long as they have network connectivity tooeach other.</span></span> <span data-ttu-id="3207b-110">No entanto, criar e executar um cluster desse tipo pode ser complicado.</span><span class="sxs-lookup"><span data-stu-id="3207b-110">However, building and running such a cluster can be complicated.</span></span>

<span data-ttu-id="3207b-111">Se você estiver interessado nesse cenário, recomendamos que você tooget em contato por meio de saudação [lista de problemas do serviço de malha Github](https://github.com/azure/service-fabric-issues) ou por meio de seu representante de suporte na orientação adicional do tooobtain de ordem.</span><span class="sxs-lookup"><span data-stu-id="3207b-111">If you are interested in this scenario, we encourage you tooget in contact either through hello [Service Fabric Github Issues List](https://github.com/azure/service-fabric-issues) or through your support representative in order tooobtain additional guidance.</span></span> <span data-ttu-id="3207b-112">equipe do Service Fabric Hello está funcionando esclarecimento adicional tooprovide, diretrizes e recomendações para este cenário.</span><span class="sxs-lookup"><span data-stu-id="3207b-112">hello Service Fabric team is working tooprovide additional clarity, guidance, and recommendations for this scenario.</span></span> 

<span data-ttu-id="3207b-113">Tooconsider algumas coisas:</span><span class="sxs-lookup"><span data-stu-id="3207b-113">Some things tooconsider:</span></span> 

1. <span data-ttu-id="3207b-114">Olá recurso de cluster do Service Fabric no Azure é regional hoje, como escala de máquinas virtuais Olá define esse cluster Olá se baseia no.</span><span class="sxs-lookup"><span data-stu-id="3207b-114">hello Service Fabric cluster resource in Azure is regional today, as are hello virtual machine scale sets that hello cluster is built on.</span></span> <span data-ttu-id="3207b-115">Isso significa que, em caso de saudação de uma falha regional, você poderá perder o cluster de saudação do hello capacidade toomanage por meio de saudação do Azure Resource Manager ou Olá Portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="3207b-115">This means that in hello event of a regional failure you may lose hello ability toomanage hello cluster via hello Azure Resource Manager or hello Azure Portal.</span></span> <span data-ttu-id="3207b-116">Isso pode ocorrer mesmo que o cluster Olá permanece em execução e será capaz de toointeract com eles diretamente.</span><span class="sxs-lookup"><span data-stu-id="3207b-116">This can happen even though hello cluster remains running and you'd be able toointeract with it directly.</span></span> <span data-ttu-id="3207b-117">Além disso, Azure atualmente não oferecem Olá capacidade toohave uma única rede virtual que pode ser usada em regiões.</span><span class="sxs-lookup"><span data-stu-id="3207b-117">In addition, Azure today does not offer hello ability toohave a single virtual network that is usable across regions.</span></span> <span data-ttu-id="3207b-118">Isso significa que um cluster de várias regiões do Azure requer o [endereços IP públicos para cada máquina virtual Olá conjuntos de escala de VM](../virtual-machine-scale-sets/virtual-machine-scale-sets-networking.md#public-ipv4-per-virtual-machine) ou [Gateways de VPN do Azure](../vpn-gateway/vpn-gateway-about-vpngateways.md).</span><span class="sxs-lookup"><span data-stu-id="3207b-118">This means that a multi-region cluster in Azure requires either [Public IP Addresses for each VM in hello VM Scale Sets](../virtual-machine-scale-sets/virtual-machine-scale-sets-networking.md#public-ipv4-per-virtual-machine) or [Azure VPN Gateways](../vpn-gateway/vpn-gateway-about-vpngateways.md).</span></span> <span data-ttu-id="3207b-119">Essas opções de rede tem impactos diferentes no design de aplicativo de grau toosome de custos e desempenho, análise cuidadosa e planejamento é necessária antes de manter um ambiente desse tipo.</span><span class="sxs-lookup"><span data-stu-id="3207b-119">These networking choices have different impacts on costs, performance, and toosome degree application design, so careful analysis and planning is required before standing up such an environment.</span></span>
2. <span data-ttu-id="3207b-120">Hello manutenção, gerenciamento e monitoramento desses computadores podem se tornar complicadas, especialmente quando distribuída em _tipos_ dos ambientes, tais como entre provedores de nuvem diferentes ou entre recursos locais e o Azure .</span><span class="sxs-lookup"><span data-stu-id="3207b-120">hello maintenance, management, and monitoring of these machines can become complicated, especially when spanned across _types_ of environments, such as between different cloud providers or between on-premises resources and Azure.</span></span> <span data-ttu-id="3207b-121">Deve ter cuidado tooensure que atualiza, monitoramento, gerenciamento e diagnóstico é entendido para cluster hello e aplicativos de saudação antes de executar cargas de trabalho de produção em um ambiente desse tipo.</span><span class="sxs-lookup"><span data-stu-id="3207b-121">Care must be taken tooensure that upgrades, monitoring, management, and diagnostics are understood for both hello cluster and hello applications before running production workloads in such an environment.</span></span> <span data-ttu-id="3207b-122">Se você já tiver bastante experiência solucionando esses problemas no Azure ou em seus próprios data centers, é provável que as mesmas soluções possam ser aplicadas ao desenvolver ou executar seu cluster do Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="3207b-122">If you already have lots of experience solving these problems in Azure or within your own datacenters, then it is likely that those same solutions can be applied when building out or running your Service Fabric cluster.</span></span> 

### <a name="do-service-fabric-nodes-automatically-receive-os-updates"></a><span data-ttu-id="3207b-123">Os nós do Service Fabric recebem as atualizações do sistema operacional automaticamente?</span><span class="sxs-lookup"><span data-stu-id="3207b-123">Do Service Fabric nodes automatically receive OS updates?</span></span>

<span data-ttu-id="3207b-124">Não hoje, mas isso também é uma solicitação comum Azure pretenda toodeliver.</span><span class="sxs-lookup"><span data-stu-id="3207b-124">Not today, but this is also a common request that Azure intends toodeliver.</span></span>

<span data-ttu-id="3207b-125">Olá provisório, temos [fornecido a um aplicativo](service-fabric-patch-orchestration-application.md) que sistemas operacionais de saudação sob os nós do Service Fabric permaneça corrigido e o toodate.</span><span class="sxs-lookup"><span data-stu-id="3207b-125">In hello interim, we have [provided an application](service-fabric-patch-orchestration-application.md) that hello operating systems underneath your Service Fabric nodes stay patched and up toodate.</span></span>

<span data-ttu-id="3207b-126">Olá desafio atualizações do sistema operacional é que eles geralmente requerem uma reinicialização da máquina hello, o que resulta em perda de disponibilidade temporário.</span><span class="sxs-lookup"><span data-stu-id="3207b-126">hello challenge with OS updates is that they typically require a reboot of hello machine, which results in temporary availability loss.</span></span> <span data-ttu-id="3207b-127">Por si só, que não é um problema, desde que o Service Fabric redirecionará automaticamente o tráfego para os nós de tooother de serviços.</span><span class="sxs-lookup"><span data-stu-id="3207b-127">By itself, that is not a problem, since Service Fabric will automatically redirect traffic for those services tooother nodes.</span></span> <span data-ttu-id="3207b-128">No entanto, se as atualizações do sistema operacional não são coordenadas cluster hello, há o potencial de saudação que muitos nós ficarem inativos ao mesmo tempo.</span><span class="sxs-lookup"><span data-stu-id="3207b-128">However, if OS updates are not coordinated across hello cluster, there is hello potential that many nodes go down at once.</span></span> <span data-ttu-id="3207b-129">Essas reinicializações simultâneas podem causar a perda de disponibilidade completa para um serviço ou, pelo menos, para uma partição específica (para um serviço com estado).</span><span class="sxs-lookup"><span data-stu-id="3207b-129">Such simultaneous reboots can cause complete availability loss for a service, or at least for a specific partition (for a stateful service).</span></span>

<span data-ttu-id="3207b-130">Olá futuro, planejamos política de atualização toosupport um sistema operacional que é totalmente automatizada e coordenada entre domínios de atualização, garantindo que a disponibilidade é mantida apesar reinicializações e outras falhas inesperadas.</span><span class="sxs-lookup"><span data-stu-id="3207b-130">In hello future, we plan toosupport an OS update policy that is fully automated and coordinated across update domains, ensuring that availability is maintained despite reboots and other unexpected failures.</span></span>

### <a name="can-i-use-large-virtual-machine-scale-sets-in-my-sf-cluster"></a><span data-ttu-id="3207b-131">Posso usar grandes conjuntos de dimensionamento de máquinas virtuais no meu cluster do SF?</span><span class="sxs-lookup"><span data-stu-id="3207b-131">Can I use Large Virtual Machine Scale Sets in my SF cluster?</span></span> 

<span data-ttu-id="3207b-132">**Resposta curta** – Não.</span><span class="sxs-lookup"><span data-stu-id="3207b-132">**Short answer** - No.</span></span> 

<span data-ttu-id="3207b-133">**Tempo de resposta** - embora Olá grandes conjuntos de escala de máquina Virtual que você tooscale uma escala de máquina virtual definido até 1000 instâncias de VM, isso é feito pelo uso de saudação do posicionamento grupos (páginas).</span><span class="sxs-lookup"><span data-stu-id="3207b-133">**Long Answer** - Although hello Large Virtual Machine Scale Sets allow you tooscale a virtual machine scale set upto 1000 VM instances, it does so by hello use of Placement Groups (PGs).</span></span> <span data-ttu-id="3207b-134">Domínios de falha (FDs) e domínios de atualização (UDs) só são consistentes dentro de um serviço do posicionamento grupo malha usa FDs e UDs toomake decisões de posicionamento de suas instâncias de serviço/réplicas do serviço.</span><span class="sxs-lookup"><span data-stu-id="3207b-134">Fault domains (FDs) and upgrade domains (UDs) are only consistent within a placement group Service fabric uses FDs and UDs toomake placement decisions of your service replicas/Service instances.</span></span> <span data-ttu-id="3207b-135">Como FDs hello e UDs são comparáveis somente dentro de um grupo de posicionamento SF não pode usá-lo.</span><span class="sxs-lookup"><span data-stu-id="3207b-135">Since hello FDs  and UDs are comparable only within a placement group SF cannot use it.</span></span> <span data-ttu-id="3207b-136">Por exemplo, se VM1 no PG1 com uma topologia de FD = 0 e VM9 em PG2 com uma topologia de FD = 4, isso não significa que VM1 e VM2 em dois Racks de Hardware diferente, portanto, SF não é possível usar valores hello FD em decisões de posicionamento neste caso toomake.</span><span class="sxs-lookup"><span data-stu-id="3207b-136">For example, If VM1 in PG1 has a topology of FD=0 and VM9 in PG2 has a topology of FD=4 , it does not mean that VM1 and VM2 are on two different Hardware Racks, hence SF cannot use hello FD values in this case toomake placement decisions.</span></span>

<span data-ttu-id="3207b-137">Há outros problemas com conjuntos de escala de máquina virtual grande, como suporte ao balanceamento de carga de falta de saudação de nível 4.</span><span class="sxs-lookup"><span data-stu-id="3207b-137">There are other issues with Large virtual machine scale sets currently, like hello lack of level-4 Load balancing support.</span></span> <span data-ttu-id="3207b-138">Consulte toofor [detalhes em grande escala conjuntos](../virtual-machine-scale-sets/virtual-machine-scale-sets-placement-groups.md)</span><span class="sxs-lookup"><span data-stu-id="3207b-138">Refer toofor [details on Large scale sets](../virtual-machine-scale-sets/virtual-machine-scale-sets-placement-groups.md)</span></span>



### <a name="what-is-hello-minimum-size-of-a-service-fabric-cluster-why-cant-it-be-smaller"></a><span data-ttu-id="3207b-139">O que é o tamanho mínimo de saudação de um cluster do Service Fabric?</span><span class="sxs-lookup"><span data-stu-id="3207b-139">What is hello minimum size of a Service Fabric cluster?</span></span> <span data-ttu-id="3207b-140">Por que ele não pode ser menor?</span><span class="sxs-lookup"><span data-stu-id="3207b-140">Why can't it be smaller?</span></span>

<span data-ttu-id="3207b-141">tamanho mínimo com suporte de saudação para um cluster do Service Fabric executando cargas de trabalho de produção é de cinco nós.</span><span class="sxs-lookup"><span data-stu-id="3207b-141">hello minimum supported size for a Service Fabric cluster running production workloads is five nodes.</span></span> <span data-ttu-id="3207b-142">Para cenários de desenvolvimento/teste, oferecemos suporte para três clusters de nó.</span><span class="sxs-lookup"><span data-stu-id="3207b-142">For dev/test scenarios, we support three node clusters.</span></span>

<span data-ttu-id="3207b-143">Esses mínimos existem porque o cluster do Service Fabric Olá executa um conjunto de serviços de monitoração de estado do sistema, incluindo o Gerenciador de failover de saudação e o serviço de nomeação de saudação.</span><span class="sxs-lookup"><span data-stu-id="3207b-143">These minimums exist because hello Service Fabric cluster runs a set of stateful system services, including hello naming service and hello failover manager.</span></span> <span data-ttu-id="3207b-144">Esses serviços, que acompanham os serviços que foram implantados toohello cluster e onde estão hospedados no momento, dependem de consistência forte.</span><span class="sxs-lookup"><span data-stu-id="3207b-144">These services, which track what services have been deployed toohello cluster and where they're currently hosted, depend on strong consistency.</span></span> <span data-ttu-id="3207b-145">Consistência de alta segurança, por sua vez, depende de saudação capacidade tooacquire um *quorum* para qualquer atualização determinada toohello estado dos serviços, onde um quorum representa uma maioria estrita de réplicas de saudação (N/2 + 1) para um determinado serviço.</span><span class="sxs-lookup"><span data-stu-id="3207b-145">That strong consistency, in turn, depends on hello ability tooacquire a *quorum* for any given update toohello state of those services, where a quorum represents a strict majority of hello replicas (N/2 +1) for a given service.</span></span>

<span data-ttu-id="3207b-146">Com esse plano de fundo, vamos examinar algumas configurações de cluster possíveis:</span><span class="sxs-lookup"><span data-stu-id="3207b-146">With that background, let's examine some possible cluster configurations:</span></span>

<span data-ttu-id="3207b-147">**Um nó**: essa opção não fornece alta disponibilidade como perda de saudação de único nó Olá por qualquer motivo significa perda de saudação do cluster inteiro hello.</span><span class="sxs-lookup"><span data-stu-id="3207b-147">**One node**: this option does not provide high availability since hello loss of hello single node for any reason means hello loss of hello entire cluster.</span></span>

<span data-ttu-id="3207b-148">**Dois nós**: um quorum para um serviço implantado entre dois nós (N = 2) é 2 (2/2 + 1 = 2).</span><span class="sxs-lookup"><span data-stu-id="3207b-148">**Two nodes**: a quorum for a service deployed across two nodes (N = 2) is 2 (2/2 + 1 = 2).</span></span> <span data-ttu-id="3207b-149">Quando uma única réplica for perdida, é impossível toocreate um quorum.</span><span class="sxs-lookup"><span data-stu-id="3207b-149">When a single replica is lost, it is impossible toocreate a quorum.</span></span> <span data-ttu-id="3207b-150">Como a execução de uma atualização de serviço requer desativar temporariamente uma réplica, essa não é uma configuração útil.</span><span class="sxs-lookup"><span data-stu-id="3207b-150">Since performing a service upgrade requires temporarily taking down a replica, this is not a useful configuration.</span></span>

<span data-ttu-id="3207b-151">**Três nós**: com três nós (N = 3), Olá requisito toocreate um quorum ainda é dois nós (2/3 + 1 = 2).</span><span class="sxs-lookup"><span data-stu-id="3207b-151">**Three nodes**: with three nodes (N=3), hello requirement toocreate a quorum is still two nodes (3/2 + 1 = 2).</span></span> <span data-ttu-id="3207b-152">Isso significa que você pode perder um nó individual e ainda manter o quorum.</span><span class="sxs-lookup"><span data-stu-id="3207b-152">This means that you can lose an individual node and still maintain quorum.</span></span>

<span data-ttu-id="3207b-153">configuração de cluster de nó três Olá há suporte para desenvolvimento e teste porque você pode executar atualizações e sobreviver a falhas de nós individuais, com segurança, contanto que não ocorram simultaneamente.</span><span class="sxs-lookup"><span data-stu-id="3207b-153">hello three node cluster configuration is supported for dev/test because you can safely perform upgrades and survive individual node failures, as long as they don't happen simultaneously.</span></span> <span data-ttu-id="3207b-154">Para cargas de trabalho de produção, você deve ser resiliente toosuch uma falha simultânea, portanto, cinco nós são necessário.</span><span class="sxs-lookup"><span data-stu-id="3207b-154">For production workloads, you must be resilient toosuch a simultaneous failure, so five nodes are required.</span></span>

### <a name="can-i-turn-off-my-cluster-at-nightweekends-toosave-costs"></a><span data-ttu-id="3207b-155">Posso desativar o cluster em custos de toosave noite/finais de semana?</span><span class="sxs-lookup"><span data-stu-id="3207b-155">Can I turn off my cluster at night/weekends toosave costs?</span></span>

<span data-ttu-id="3207b-156">Em geral, não.</span><span class="sxs-lookup"><span data-stu-id="3207b-156">In general, no.</span></span> <span data-ttu-id="3207b-157">Serviço de malha armazena o estado em discos locais, efêmeros, que significa que, se Olá máquina de virtual é movida tooa outro host, Olá dados não são movidos com ele.</span><span class="sxs-lookup"><span data-stu-id="3207b-157">Service Fabric stores state on local, ephemeral disks, meaning that if hello virtual machine is moved tooa different host, hello data does not move with it.</span></span> <span data-ttu-id="3207b-158">Em operação normal, que não é um problema de como o novo nó de saudação é colocado toodate por outros nós.</span><span class="sxs-lookup"><span data-stu-id="3207b-158">In normal operation, that is not a problem as hello new node is brought up toodate by other nodes.</span></span> <span data-ttu-id="3207b-159">No entanto, se você parar todos os nós e reiniciá-los mais tarde, há a possibilidade de significativa que a maioria de nós Olá Iniciar em novos hosts e faça Olá sistema não é possível toorecover.</span><span class="sxs-lookup"><span data-stu-id="3207b-159">However, if you stop all nodes and restart them later, there is a significant possibility that most of hello nodes start on new hosts and make hello system unable toorecover.</span></span>

<span data-ttu-id="3207b-160">Se você quiser toocreate clusters para testar seu aplicativo antes da implantação, é recomendável criar dinamicamente desses clusters como parte de sua [integração contínua/contínua pipeline de implantação](service-fabric-set-up-continuous-integration.md).</span><span class="sxs-lookup"><span data-stu-id="3207b-160">If you would like toocreate clusters for testing your application before it is deployed, we recommend that you dynamically create those clusters as part of your [continuous integration/continuous deployment pipeline](service-fabric-set-up-continuous-integration.md).</span></span>


### <a name="how-do-i-upgrade-my-operating-system-for-example-from-windows-server-2012-toowindows-server-2016"></a><span data-ttu-id="3207b-161">Como faço para atualizar meu sistema operacional (por exemplo, do Windows Server 2012 tooWindows Server 2016)</span><span class="sxs-lookup"><span data-stu-id="3207b-161">How do I upgrade my Operating System (for example from Windows Server 2012 tooWindows Server 2016)?</span></span>

<span data-ttu-id="3207b-162">Enquanto estamos trabalhando em uma experiência aprimorada, atualmente, você é responsável pela atualização de saudação.</span><span class="sxs-lookup"><span data-stu-id="3207b-162">While we're working on an improved experience, today, you are responsible for hello upgrade.</span></span> <span data-ttu-id="3207b-163">Você deve atualizar a imagem Olá SO Olá uma máquina virtual de cluster de máquinas virtuais de saudação por vez.</span><span class="sxs-lookup"><span data-stu-id="3207b-163">You must upgrade hello OS image on hello virtual machines of hello cluster one VM at a time.</span></span> 

## <a name="container-support"></a><span data-ttu-id="3207b-164">Suporte a contêiner</span><span class="sxs-lookup"><span data-stu-id="3207b-164">Container Support</span></span>

### <a name="why-are-my-containers-that-are-deployed-toosf-unable-tooresolve-dns-addresses"></a><span data-ttu-id="3207b-165">Por que são Meus contêineres que são implantados tooSF não é possível tooresolve DNS endereços?</span><span class="sxs-lookup"><span data-stu-id="3207b-165">Why are my containers that are deployed tooSF unable tooresolve DNS addresses?</span></span>

<span data-ttu-id="3207b-166">Esse problema foi relatado em clusters que estão na versão 5.6.204.9494</span><span class="sxs-lookup"><span data-stu-id="3207b-166">This issue has been reported on clusters that are on 5.6.204.9494 version</span></span> 

<span data-ttu-id="3207b-167">**Mitigação** : siga [neste documento](service-fabric-dnsservice.md) tooenable Olá DNS serviço serviço de malha em seu cluster.</span><span class="sxs-lookup"><span data-stu-id="3207b-167">**Mitigation** :  Follow [this document](service-fabric-dnsservice.md) tooenable hello DNS service fabric service in your cluster.</span></span>

<span data-ttu-id="3207b-168">**Corrigir** : versão de cluster tooa atualização com suporte que é maior do que 5.6.204.9494, quando ele estiver disponível.</span><span class="sxs-lookup"><span data-stu-id="3207b-168">**Fix** :  Upgrade tooa supported cluster version that is higher than 5.6.204.9494, when it is available.</span></span> <span data-ttu-id="3207b-169">Se o cluster for definido tooautomatic atualizações, cluster Olá atualizará automaticamente versão toohello com essa correção do problema.</span><span class="sxs-lookup"><span data-stu-id="3207b-169">If your cluster is set tooautomatic upgrades, then hello cluster will automatically upgrade toohello version that has this issue fixed.</span></span>

  
## <a name="application-design"></a><span data-ttu-id="3207b-170">Design do aplicativo</span><span class="sxs-lookup"><span data-stu-id="3207b-170">Application Design</span></span>

### <a name="whats-hello-best-way-tooquery-data-across-partitions-of-a-reliable-collection"></a><span data-ttu-id="3207b-171">O que é Olá melhor tooquery dados em partições de um conjunto confiável?</span><span class="sxs-lookup"><span data-stu-id="3207b-171">What's hello best way tooquery data across partitions of a Reliable Collection?</span></span>

<span data-ttu-id="3207b-172">Coleções confiáveis são tipicamente [particionada](service-fabric-concepts-partitioning.md) tooenable expansão para maior produtividade e desempenho.</span><span class="sxs-lookup"><span data-stu-id="3207b-172">Reliable collections are typically [partitioned](service-fabric-concepts-partitioning.md) tooenable scale out for greater performance and throughput.</span></span> <span data-ttu-id="3207b-173">Isso significa que o estado de saudação para um determinado serviço pode ser disseminado por 10 ou 100 máquinas.</span><span class="sxs-lookup"><span data-stu-id="3207b-173">That means that hello state for a given service may be spread across 10s or 100s of machines.</span></span> <span data-ttu-id="3207b-174">tooperform operações em que conjunto de dados completo, você tem algumas opções:</span><span class="sxs-lookup"><span data-stu-id="3207b-174">tooperform operations over that full data set, you have a few options:</span></span>

- <span data-ttu-id="3207b-175">Crie um serviço que consulta todas as partições de outro toopull de serviço nos dados Olá necessário.</span><span class="sxs-lookup"><span data-stu-id="3207b-175">Create a service that queries all partitions of another service toopull in hello required data.</span></span>
- <span data-ttu-id="3207b-176">Criar um serviço que possa receber dados de todas as partições de outro serviço.</span><span class="sxs-lookup"><span data-stu-id="3207b-176">Create a service that can receive data from all partitions of another service.</span></span>
- <span data-ttu-id="3207b-177">Periodicamente enviar por push dados de cada repositório externo de tooan do serviço.</span><span class="sxs-lookup"><span data-stu-id="3207b-177">Periodically push data from each service tooan external store.</span></span> <span data-ttu-id="3207b-178">Essa abordagem só é apropriada se consultas Olá que você está executando não fazem parte de sua lógica de negócios principal.</span><span class="sxs-lookup"><span data-stu-id="3207b-178">This approach is only appropriate if hello queries you're performing are not part of your core business logic.</span></span>


### <a name="whats-hello-best-way-tooquery-data-across-my-actors"></a><span data-ttu-id="3207b-179">O que é Olá melhor tooquery dados em meu atores?</span><span class="sxs-lookup"><span data-stu-id="3207b-179">What's hello best way tooquery data across my actors?</span></span>

<span data-ttu-id="3207b-180">Atores são unidades independentes de toobe projetado de estado e computação, portanto, não é recomendável tooperform consultas amplo do estado de ator em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="3207b-180">Actors are designed toobe independent units of state and compute, so it is not recommended tooperform broad queries of actor state at runtime.</span></span> <span data-ttu-id="3207b-181">Se você tiver uma necessidade tooquery em conjunto completo de saudação do estado ator, você deve considerar o:</span><span class="sxs-lookup"><span data-stu-id="3207b-181">If you have a need tooquery across hello full set of actor state, you should consider either:</span></span>

- <span data-ttu-id="3207b-182">Substituindo os serviços de ator com serviços confiáveis com monitoração de estado, que Olá número da rede solicitações toogather todos os dados de número de saudação do número de toohello de atores de partições em seu serviço.</span><span class="sxs-lookup"><span data-stu-id="3207b-182">Replacing your actor services with stateful reliable services, such that hello number of network requests toogather all data from hello number of actors toohello number of partitions in your service.</span></span>
- <span data-ttu-id="3207b-183">Criando o envio de tooperiodically atores seu repositório externo do estado tooan para consultar mais fácil.</span><span class="sxs-lookup"><span data-stu-id="3207b-183">Designing your actors tooperiodically push their state tooan external store for easier querying.</span></span> <span data-ttu-id="3207b-184">Como acima, essa abordagem é somente viável se consultas Olá que estiver executando não são necessárias para o comportamento de tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="3207b-184">As above, this approach is only viable if hello queries you're performing are not required for your runtime behavior.</span></span>

### <a name="how-much-data-can-i-store-in-a-reliable-collection"></a><span data-ttu-id="3207b-185">Quantos dados posso armazenar em uma Coleção Confiável?</span><span class="sxs-lookup"><span data-stu-id="3207b-185">How much data can I store in a Reliable Collection?</span></span>

<span data-ttu-id="3207b-186">Serviços confiáveis geralmente são particionados para que quantidade hello, você pode armazenar é limitada apenas pelo número de Olá das máquinas que você tem em cluster hello e quantidade de saudação de memória disponível nessas máquinas.</span><span class="sxs-lookup"><span data-stu-id="3207b-186">Reliable services are typically partitioned, so hello amount you can store is only limited by hello number of machines you have in hello cluster, and hello amount of memory available on those machines.</span></span>

<span data-ttu-id="3207b-187">Por exemplo, suponha que você tem uma coleção confiável em um serviço com 100 partições e 3 réplicas, armazenando objetos com 1kb de tamanho, em média.</span><span class="sxs-lookup"><span data-stu-id="3207b-187">As an example, suppose that you have a reliable collection in a service with 100 partitions and 3 replicas, storing objects that average 1kb in size.</span></span> <span data-ttu-id="3207b-188">Agora, suponha que você tem um cluster de 10 máquinas com 16 gb de memória por máquina.</span><span class="sxs-lookup"><span data-stu-id="3207b-188">Now suppose that you have a 10 machine cluster with 16gb of memory per machine.</span></span> <span data-ttu-id="3207b-189">Para simplificar e toobe muito conservadora, suponha que Olá sistema operacional e serviços do sistema, tempo de execução do Service Fabric Olá e seus serviços consumam 6gb de que, deixando 10gb disponíveis por máquina ou 100gb para o cluster de saudação.</span><span class="sxs-lookup"><span data-stu-id="3207b-189">For simplicity and toobe very conservative, assume that hello operating system and system services, hello Service Fabric runtime, and your services consume 6gb of that, leaving 10gb available per machine, or 100gb for hello cluster.</span></span>

<span data-ttu-id="3207b-190">Tendo em mente que cada objeto deve ser armazenado três vezes (uma primária e duas réplicas), você teria memória suficiente para cerca de 35 milhões de objetos na sua coleção ao operar com capacidade total.</span><span class="sxs-lookup"><span data-stu-id="3207b-190">Keeping in mind that each object must be stored three times (one primary and two replicas), you would have sufficient memory for approximately 35 million objects in your collection when operating at full capacity.</span></span> <span data-ttu-id="3207b-191">No entanto, recomendamos que está sendo toohello resilientes a perda simultâneas de um domínio de falha e um domínio de atualização, que representa o cerca de 1/3 da capacidade e reduziria Olá número tooroughly 23 milhões.</span><span class="sxs-lookup"><span data-stu-id="3207b-191">However, we recommend being resilient toohello simultaneous loss of a failure domain and an upgrade domain, which represents about 1/3 of capacity, and would reduce hello number tooroughly 23 million.</span></span>

<span data-ttu-id="3207b-192">Observe que esse cálculo também pressupõe que:</span><span class="sxs-lookup"><span data-stu-id="3207b-192">Note that this calculation also assumes:</span></span>

- <span data-ttu-id="3207b-193">Essa distribuição Olá de dados em partições Olá é aproximadamente uniforme ou que você estiver relatando toohello de métricas de carga Gerenciador de recursos de Cluster.</span><span class="sxs-lookup"><span data-stu-id="3207b-193">That hello distribution of data across hello partitions is roughly uniform or that you're reporting load metrics toohello Cluster Resource Manager.</span></span> <span data-ttu-id="3207b-194">Por padrão, o Service Fabric balanceará a carga com base na contagem de réplicas.</span><span class="sxs-lookup"><span data-stu-id="3207b-194">By default, Service Fabric will load balance based on replica count.</span></span> <span data-ttu-id="3207b-195">Em nosso exemplo acima, que deve colocar 10 réplicas primárias e 20 réplicas secundárias em cada nó no cluster hello.</span><span class="sxs-lookup"><span data-stu-id="3207b-195">In our example above, that would put 10 primary replicas and 20 secondary replicas on each node in hello cluster.</span></span> <span data-ttu-id="3207b-196">Que funciona bem para a carga será distribuída igualmente entre partições hello.</span><span class="sxs-lookup"><span data-stu-id="3207b-196">That works well for load that is evenly distributed across hello partitions.</span></span> <span data-ttu-id="3207b-197">Se o carregamento não é par, você deve relate carga para que hello Gerenciador de recursos pode pacote menores réplicas juntos e permite maior tooconsume de réplicas mais memória em um nó individual.</span><span class="sxs-lookup"><span data-stu-id="3207b-197">If load is not even, you must report load so that hello Resource Manager can pack smaller replicas together and allow larger replicas tooconsume more memory on an individual node.</span></span>

- <span data-ttu-id="3207b-198">Olá confiável serviço em questão é apenas um estado armazenando Olá cluster hello.</span><span class="sxs-lookup"><span data-stu-id="3207b-198">That hello reliable service in question is hello only one storing state in hello cluster.</span></span> <span data-ttu-id="3207b-199">Como você pode implantar um cluster de tooa vários serviços, é necessário toobe atento recursos Olá que cada precisarão toorun e gerenciar seu estado.</span><span class="sxs-lookup"><span data-stu-id="3207b-199">Since you can deploy multiple services tooa cluster, you need toobe mindful of hello resources that each will need toorun and manage its state.</span></span>

- <span data-ttu-id="3207b-200">Esse cluster Olá em si não é ampliação ou redução.</span><span class="sxs-lookup"><span data-stu-id="3207b-200">That hello cluster itself is not growing or shrinking.</span></span> <span data-ttu-id="3207b-201">Se você adicionar mais máquinas, o Service Fabric será reequilibrar sua capacidade adicional do réplicas tooleverage Olá até que o número de saudação de máquinas ultrapassa o número de saudação de partições em seu serviço, desde que uma réplica individual não pode abranger máquinas.</span><span class="sxs-lookup"><span data-stu-id="3207b-201">If you add more machines, Service Fabric will rebalance your replicas tooleverage hello additional capacity until hello number of machines surpasses hello number of partitions in your service, since an individual replica cannot span machines.</span></span> <span data-ttu-id="3207b-202">Por outro lado, se você reduzir o tamanho de saudação do cluster Olá removendo máquinas, suas réplicas serão compactadas mais rigidamente e têm menos capacidade geral.</span><span class="sxs-lookup"><span data-stu-id="3207b-202">By contrast, if you reduce hello size of hello cluster by removing machines, your replicas will be packed more tightly and have less overall capacity.</span></span>

### <a name="how-much-data-can-i-store-in-an-actor"></a><span data-ttu-id="3207b-203">Quantos dados posso armazenar em um ator?</span><span class="sxs-lookup"><span data-stu-id="3207b-203">How much data can I store in an actor?</span></span>

<span data-ttu-id="3207b-204">Assim como acontece com serviços confiáveis, quantidade de saudação de dados que você pode armazenar em um serviço de ator só é limitada pelo Olá espaço total em disco e memória disponível em nós de saudação do cluster.</span><span class="sxs-lookup"><span data-stu-id="3207b-204">As with reliable services, hello amount of data that you can store in an actor service is only limited by hello total disk space and memory available across hello nodes in your cluster.</span></span> <span data-ttu-id="3207b-205">No entanto, os atores individuais são mais efetivos quando são usada tooencapsulate uma pequena quantidade de lógica de negócios de estado e associado.</span><span class="sxs-lookup"><span data-stu-id="3207b-205">However, individual actors are most effective when they are used tooencapsulate a small amount of state and associated business logic.</span></span> <span data-ttu-id="3207b-206">Como regra geral, um ator individual deve ter um estado que seja medido em quilobytes.</span><span class="sxs-lookup"><span data-stu-id="3207b-206">As a general rule, an individual actor should have state that is measured in kilobytes.</span></span>

## <a name="other-questions"></a><span data-ttu-id="3207b-207">Outras perguntas</span><span class="sxs-lookup"><span data-stu-id="3207b-207">Other questions</span></span>

### <a name="how-does-service-fabric-relate-toocontainers"></a><span data-ttu-id="3207b-208">Como o Service Fabric se relacionam toocontainers?</span><span class="sxs-lookup"><span data-stu-id="3207b-208">How does Service Fabric relate toocontainers?</span></span>

<span data-ttu-id="3207b-209">Contêineres oferecem serviços de toopackage uma maneira simples e suas dependências, de modo que eles executar consistentemente em todos os ambientes e podem funcionar de maneira isolada em um único computador.</span><span class="sxs-lookup"><span data-stu-id="3207b-209">Containers offer a simple way toopackage services and their dependencies such that they run consistently in all environments and can operate in an isolated fashion on a single machine.</span></span> <span data-ttu-id="3207b-210">Service Fabric oferece uma maneira toodeploy e gerenciar serviços, incluindo [serviços que foram compactados em um contêiner](service-fabric-containers-overview.md).</span><span class="sxs-lookup"><span data-stu-id="3207b-210">Service Fabric offers a way toodeploy and manage services, including [services that have been packaged in a container](service-fabric-containers-overview.md).</span></span>

### <a name="are-you-planning-tooopen-source-service-fabric"></a><span data-ttu-id="3207b-211">Você está planejando tooopen fonte do Service Fabric</span><span class="sxs-lookup"><span data-stu-id="3207b-211">Are you planning tooopen source Service Fabric?</span></span>

<span data-ttu-id="3207b-212">Estamos pretende serviços confiáveis do tooopen fonte hello e estruturas de atores confiável no GitHub e aceitará projetos de toothose contribuições da comunidade.</span><span class="sxs-lookup"><span data-stu-id="3207b-212">We intend tooopen source hello reliable services and reliable actors frameworks on GitHub and will accept community contributions toothose projects.</span></span> <span data-ttu-id="3207b-213">Siga Olá [Service Fabric blog](https://blogs.msdn.microsoft.com/azureservicefabric/) para obter mais detalhes conforme eles estão anunciados.</span><span class="sxs-lookup"><span data-stu-id="3207b-213">Please follow hello [Service Fabric blog](https://blogs.msdn.microsoft.com/azureservicefabric/) for more details as they're announced.</span></span>

<span data-ttu-id="3207b-214">Olá estão atualmente não há planos tooopen fonte Olá Service Fabric tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="3207b-214">hello are currently no plans tooopen source hello Service Fabric runtime.</span></span>

## <a name="next-steps"></a><span data-ttu-id="3207b-215">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="3207b-215">Next steps</span></span>

- [<span data-ttu-id="3207b-216">Saiba mais sobre os principais conceitos do Service Fabric e práticas recomendadas</span><span class="sxs-lookup"><span data-stu-id="3207b-216">Learn about core Service Fabric concepts and best practices</span></span>](https://mva.microsoft.com/en-us/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=tbuZM46yC_5206218965)
