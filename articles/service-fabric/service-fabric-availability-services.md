---
title: "Disponibilidade de serviços do Service Fabric | Microsoft Docs"
description: "Descreve a detecção de falhas, failover e recuperação para serviços"
services: service-fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: 
ms.assetid: 279ba4a4-f2ef-4e4e-b164-daefd10582e4
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/18/2017
ms.author: masnider
ms.openlocfilehash: 41ff2c3129facb0eea9d896ce75d7343ae2a018e
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/18/2017
---
# <a name="availability-of-service-fabric-services"></a><span data-ttu-id="94576-103">Disponibilidade dos serviços de malha do serviço</span><span class="sxs-lookup"><span data-stu-id="94576-103">Availability of Service Fabric services</span></span>
<span data-ttu-id="94576-104">Este artigo fornece uma visão geral de como o Service Fabric mantém a disponibilidade de um serviço.</span><span class="sxs-lookup"><span data-stu-id="94576-104">This article gives an overview of how Service Fabric maintains availability of a service.</span></span>

## <a name="availability-of-service-fabric-stateless-services"></a><span data-ttu-id="94576-105">Disponibilidade dos serviços de malha do serviço sem monitoração do estado</span><span class="sxs-lookup"><span data-stu-id="94576-105">Availability of Service Fabric stateless services</span></span>
<span data-ttu-id="94576-106">Os serviços do Service Fabric do Azure podem ser com ou sem estado.</span><span class="sxs-lookup"><span data-stu-id="94576-106">Azure Service Fabric services can be either stateful or stateless.</span></span> <span data-ttu-id="94576-107">Um serviço sem estado é um serviço de aplicativo que não tem qualquer [estado local](service-fabric-concepts-state.md) que precise estar altamente disponível nem ser altamente confiável.</span><span class="sxs-lookup"><span data-stu-id="94576-107">A stateless service is an application service that does not have any [local state](service-fabric-concepts-state.md) that needs to be highly available or reliable.</span></span>

<span data-ttu-id="94576-108">Criar um serviço sem estado requer a definição de uma `InstanceCount`.</span><span class="sxs-lookup"><span data-stu-id="94576-108">Creating a stateless service requires defining an `InstanceCount`.</span></span> <span data-ttu-id="94576-109">A contagem de instâncias define o número de instâncias da lógica de aplicativo do serviço sem estado que deve ser executado no cluster.</span><span class="sxs-lookup"><span data-stu-id="94576-109">The instance count defines the number of instances of the stateless service's application logic that should be running in the cluster.</span></span> <span data-ttu-id="94576-110">Aumentar o número de instâncias é a maneira recomendada de escalar horizontalmente um serviço sem estado.</span><span class="sxs-lookup"><span data-stu-id="94576-110">Increasing the number of instances is the recommended way of scaling out a stateless service.</span></span>

<span data-ttu-id="94576-111">Quando uma instância de um serviço chamado sem estado falha, uma nova instância é criada em algum nó qualificado no cluster.</span><span class="sxs-lookup"><span data-stu-id="94576-111">When an instance of a stateless named service fails, a new instance is created on some eligible node in the cluster.</span></span> <span data-ttu-id="94576-112">Por exemplo, uma instância de serviço sem estado pode falhar em Node1 e ser recriada em Node5.</span><span class="sxs-lookup"><span data-stu-id="94576-112">For example, a stateless service instance might fail on Node1 and be recreated on Node5.</span></span>

## <a name="availability-of-service-fabric-stateful-services"></a><span data-ttu-id="94576-113">Disponibilidade dos serviços de malha do serviço com monitoração do estado</span><span class="sxs-lookup"><span data-stu-id="94576-113">Availability of Service Fabric stateful services</span></span>
<span data-ttu-id="94576-114">Um serviço com estado tem algum estado associado a ele.</span><span class="sxs-lookup"><span data-stu-id="94576-114">A stateful service has some state associated with it.</span></span> <span data-ttu-id="94576-115">Na malha de serviço, um serviço com monitoração de estado é modelado como um conjunto de réplicas.</span><span class="sxs-lookup"><span data-stu-id="94576-115">In Service Fabric, a stateful service is modeled as a set of replicas.</span></span> <span data-ttu-id="94576-116">Cada réplica é uma instância em execução do código do serviço que também tem uma cópia do estado desse serviço.</span><span class="sxs-lookup"><span data-stu-id="94576-116">Each replica is a running instance of the code of the service that also has a copy of the state for that service.</span></span> <span data-ttu-id="94576-117">As operações de leitura e gravação são realizadas em uma réplica (chamada de Primária).</span><span class="sxs-lookup"><span data-stu-id="94576-117">Read and write operations are performed at one replica (called the Primary).</span></span> <span data-ttu-id="94576-118">As alterações no estado, resultantes das operações de gravação, são *replicadas* em outras réplicas no conjunto de réplicas (chamadas de Secundárias Ativas) e aplicadas.</span><span class="sxs-lookup"><span data-stu-id="94576-118">Changes to state from write operations are *replicated* to the other replicas in the replica set (called Active Secondaries) and applied.</span></span> 

<span data-ttu-id="94576-119">Pode haver apenas uma réplica Primária, mas pode haver várias réplicas Secundárias Ativas.</span><span class="sxs-lookup"><span data-stu-id="94576-119">There can be only one Primary replica, but there can be multiple Active Secondary replicas.</span></span> <span data-ttu-id="94576-120">O número de réplicas Secundárias Ativas é configurável e um número maior de réplicas pode tolerar um número maior de falhas simultâneas de hardware e de software.</span><span class="sxs-lookup"><span data-stu-id="94576-120">The number of Active Secondary replicas is configurable, and a higher number of replicas can tolerate a greater number of concurrent software and hardware failures.</span></span>

<span data-ttu-id="94576-121">Se uma réplica Primária falhar, o Service Fabric torna uma das réplicas Secundárias Ativas a nova réplica Primária.</span><span class="sxs-lookup"><span data-stu-id="94576-121">If the Primary replica goes down, Service Fabric makes one of the Active Secondary replicas the new Primary replica.</span></span> <span data-ttu-id="94576-122">Essa réplica Secundária Ativa já tem a versão atualizada do estado (via *replicação*) e pode continuar processando operações de leitura e de gravação posteriores.</span><span class="sxs-lookup"><span data-stu-id="94576-122">This Active Secondary replica already has the updated version of the state (via *replication*), and it can continue processing further read and write operations.</span></span>

<span data-ttu-id="94576-123">Esse conceito de réplica Primária ou Secundária Ativa é conhecido como Função de Réplica.</span><span class="sxs-lookup"><span data-stu-id="94576-123">This concept, of a replica being either a Primary or Active Secondary, is known as the Replica Role.</span></span>

### <a name="replica-roles"></a><span data-ttu-id="94576-124">Funções de réplica</span><span class="sxs-lookup"><span data-stu-id="94576-124">Replica roles</span></span>
<span data-ttu-id="94576-125">A função de uma réplica é usada para gerenciar o ciclo de vida do estado que está sendo gerenciado por essa réplica.</span><span class="sxs-lookup"><span data-stu-id="94576-125">The role of a replica is used to manage the life cycle of the state being managed by that replica.</span></span> <span data-ttu-id="94576-126">Uma réplica cuja função é Primária atende a solicitações de leitura.</span><span class="sxs-lookup"><span data-stu-id="94576-126">A replica whose role is Primary services read requests.</span></span> <span data-ttu-id="94576-127">A Primária também trata de todas as solicitações de leitura atualizando seu estado e replicando as alterações.</span><span class="sxs-lookup"><span data-stu-id="94576-127">The Primary also handles all write requests by updating its state and replicating the changes.</span></span> <span data-ttu-id="94576-128">Essas alterações são aplicadas nas Secundárias Ativas no conjunto de réplicas.</span><span class="sxs-lookup"><span data-stu-id="94576-128">These changes are applied to the Active Secondaries in the replica set.</span></span> <span data-ttu-id="94576-129">O trabalho de uma Secundária Ativa é receber alterações de estado que a Primária replicou e atualizar a respectiva exibição do estado.</span><span class="sxs-lookup"><span data-stu-id="94576-129">The job of an Active Secondary is to receive state changes that the Primary replica has replicated and update its view of the state.</span></span>

> [!NOTE]
> <span data-ttu-id="94576-130">Os modelos de programação de nível mais alto, como [Reliable Actors](service-fabric-reliable-actors-introduction.md) e [Reliable Services](service-fabric-reliable-services-introduction.md), ocultam o conceito de função de réplica do desenvolvedor.</span><span class="sxs-lookup"><span data-stu-id="94576-130">Higher-level programming models such as [Reliable Actors](service-fabric-reliable-actors-introduction.md) and [Reliable Services](service-fabric-reliable-services-introduction.md) hide the concept of replica role from the developer.</span></span> <span data-ttu-id="94576-131">Em Actors, a noção de função é desnecessária, enquanto em Services, ela é amplamente simplificada para a maioria dos cenários.</span><span class="sxs-lookup"><span data-stu-id="94576-131">In Actors, the notion of role is unnecessary, while in Services it is largely simplified for most scenarios.</span></span>
>

## <a name="next-steps"></a><span data-ttu-id="94576-132">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="94576-132">Next steps</span></span>
<span data-ttu-id="94576-133">Para saber mais sobre os conceitos do Service Fabric, confira os seguintes artigos:</span><span class="sxs-lookup"><span data-stu-id="94576-133">For more information on Service Fabric concepts, see the following articles:</span></span>

- [<span data-ttu-id="94576-134">Dimensionando serviços do Service Fabric</span><span class="sxs-lookup"><span data-stu-id="94576-134">Scaling Service Fabric services</span></span>](service-fabric-concepts-scalability.md)
- [<span data-ttu-id="94576-135">Particionando serviços da Malha do Serviço</span><span class="sxs-lookup"><span data-stu-id="94576-135">Partitioning Service Fabric services</span></span>](service-fabric-concepts-partitioning.md)
- [<span data-ttu-id="94576-136">Definindo e gerenciando o estado</span><span class="sxs-lookup"><span data-stu-id="94576-136">Defining and managing state</span></span>](service-fabric-concepts-state.md)
- [<span data-ttu-id="94576-137">Reliable Services</span><span class="sxs-lookup"><span data-stu-id="94576-137">Reliable Services</span></span>](service-fabric-reliable-services-introduction.md)
