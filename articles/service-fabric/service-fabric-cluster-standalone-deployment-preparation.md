---
title: "aaaAzure preparação da implantação do serviço de malha autônomo Cluster | Microsoft Docs"
description: "Documentação relacionada toopreparing ambiente de saudação e criar a configuração de cluster hello, toobe considerado toodeploying anterior um cluster voltado para a manipulação de uma carga de trabalho de produção."
services: service-fabric
documentationcenter: .net
author: maburlik
manager: timlt
editor: 
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 1/17/2017
ms.author: maburlik;chackdan
ms.openlocfilehash: e503c61a64b408af3f22bd75ab02f1c34ac9f380
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
<a id="preparemachines"></a>

## <a name="plan-and-prepare-your-service-fabric-standalone-cluster-deployment"></a><span data-ttu-id="55571-103">Planejar e preparar a implantação de cluster autônomo do Service Fabric</span><span class="sxs-lookup"><span data-stu-id="55571-103">Plan and prepare your Service Fabric standalone cluster deployment</span></span>
<span data-ttu-id="55571-104">Execute Olá etapas a seguir antes de criar o cluster.</span><span class="sxs-lookup"><span data-stu-id="55571-104">Perform hello following steps before you create your cluster.</span></span>

### <a name="step-1-plan-your-cluster-infrastructure"></a><span data-ttu-id="55571-105">Etapa 1: Planejar a infraestrutura de cluster</span><span class="sxs-lookup"><span data-stu-id="55571-105">Step 1: Plan your cluster infrastructure</span></span>
<span data-ttu-id="55571-106">Você está prestes toocreate um cluster do Service Fabric em máquinas que você possui, para que você pode decidir que tipos de falhas que você deseja Olá toosurvive de cluster.</span><span class="sxs-lookup"><span data-stu-id="55571-106">You are about toocreate a Service Fabric cluster on machines you own, so you can decide what kinds of failures you want hello cluster toosurvive.</span></span> <span data-ttu-id="55571-107">Por exemplo, você precisa de linhas de alimentação distintas ou conexões de Internet fornecido máquinas toothese?</span><span class="sxs-lookup"><span data-stu-id="55571-107">For example, do you need separate power lines or Internet connections supplied toothese machines?</span></span> <span data-ttu-id="55571-108">Além disso, considere a segurança física Olá desses computadores.</span><span class="sxs-lookup"><span data-stu-id="55571-108">In addition, consider hello physical security of these machines.</span></span> <span data-ttu-id="55571-109">Máquinas de saudação localização e que precisa de acesso toothem?</span><span class="sxs-lookup"><span data-stu-id="55571-109">Where are hello machines located and who needs access toothem?</span></span> <span data-ttu-id="55571-110">Após tomar essas decisões, você pode logicamente mapear Olá máquinas toohello vários domínios de falha (consulte a etapa 4).</span><span class="sxs-lookup"><span data-stu-id="55571-110">After you make these decisions, you can logically map hello machines toohello various fault domains (see Step 4).</span></span> <span data-ttu-id="55571-111">planejamento para clusters de produção de infraestrutura de saudação é mais envolvida que, para clusters de teste.</span><span class="sxs-lookup"><span data-stu-id="55571-111">hello infrastructure planning for production clusters is more involved than for test clusters.</span></span>

### <a name="step-2-prepare-hello-machines-toomeet-hello-prerequisites"></a><span data-ttu-id="55571-112">Etapa 2: Preparar Olá máquinas toomeet pré-requisitos Olá</span><span class="sxs-lookup"><span data-stu-id="55571-112">Step 2: Prepare hello machines toomeet hello prerequisites</span></span>
<span data-ttu-id="55571-113">Pré-requisitos para cada máquina que você deseja que o cluster de toohello tooadd:</span><span class="sxs-lookup"><span data-stu-id="55571-113">Prerequisites for each machine that you want tooadd toohello cluster:</span></span>

* <span data-ttu-id="55571-114">É recomendável, no mínimo, 16 GB de RAM.</span><span class="sxs-lookup"><span data-stu-id="55571-114">A minimum of 16 GB of RAM is recommended.</span></span>
* <span data-ttu-id="55571-115">É recomendável um espaço em disco disponível mínimo de 40 GB.</span><span class="sxs-lookup"><span data-stu-id="55571-115">A minimum of 40 of GB available disk space is recommended.</span></span>
* <span data-ttu-id="55571-116">É recomendável uma CPU com quatro núcleos ou mais.</span><span class="sxs-lookup"><span data-stu-id="55571-116">A 4 core or greater CPU is recommended.</span></span>
* <span data-ttu-id="55571-117">Rede segura de tooa de conectividade ou de rede para todas as máquinas.</span><span class="sxs-lookup"><span data-stu-id="55571-117">Connectivity tooa secure network or networks for all machines.</span></span>
* <span data-ttu-id="55571-118">Windows Server 2012 R2 ou Windows Server 2016.</span><span class="sxs-lookup"><span data-stu-id="55571-118">Windows Server 2012 R2 or Windows Server 2016.</span></span> 
* <span data-ttu-id="55571-119">[.NET Framework 4.5.1 ou posterior](https://www.microsoft.com/download/details.aspx?id=40773), instalação completa.</span><span class="sxs-lookup"><span data-stu-id="55571-119">[.NET Framework 4.5.1 or higher](https://www.microsoft.com/download/details.aspx?id=40773), full install.</span></span>
* <span data-ttu-id="55571-120">[Windows PowerShell 3.0](https://msdn.microsoft.com/powershell/scripting/setup/installing-windows-powershell).</span><span class="sxs-lookup"><span data-stu-id="55571-120">[Windows PowerShell 3.0](https://msdn.microsoft.com/powershell/scripting/setup/installing-windows-powershell).</span></span>
* <span data-ttu-id="55571-121">Olá [RemoteRegistry serviço](https://technet.microsoft.com/library/cc754820) devem estar em execução em todos os computadores de saudação.</span><span class="sxs-lookup"><span data-stu-id="55571-121">hello [RemoteRegistry service](https://technet.microsoft.com/library/cc754820) should be running on all hello machines.</span></span>

<span data-ttu-id="55571-122">Olá administrador de cluster, implantar e configurar o cluster Olá deve ter [privilégios de administrador](https://social.technet.microsoft.com/wiki/contents/articles/13436.windows-server-2012-how-to-add-an-account-to-a-local-administrator-group.aspx) em cada uma das máquinas de saudação.</span><span class="sxs-lookup"><span data-stu-id="55571-122">hello cluster administrator deploying and configuring hello cluster must have [administrator privileges](https://social.technet.microsoft.com/wiki/contents/articles/13436.windows-server-2012-how-to-add-an-account-to-a-local-administrator-group.aspx) on each of hello machines.</span></span> <span data-ttu-id="55571-123">Você não pode instalar o Service Fabric em um controlador de domínio.</span><span class="sxs-lookup"><span data-stu-id="55571-123">You cannot install Service Fabric on a domain controller.</span></span>

### <a name="step-3-determine-hello-initial-cluster-size"></a><span data-ttu-id="55571-124">Etapa 3: Determinar o tamanho de cluster inicial Olá</span><span class="sxs-lookup"><span data-stu-id="55571-124">Step 3: Determine hello initial cluster size</span></span>
<span data-ttu-id="55571-125">Cada nó em um cluster do Service Fabric autônomo tem Olá Service Fabric runtime implantado e é membro do cluster de saudação.</span><span class="sxs-lookup"><span data-stu-id="55571-125">Each node in a standalone Service Fabric cluster has hello Service Fabric runtime deployed and is a member of hello cluster.</span></span> <span data-ttu-id="55571-126">Em uma implantação típica de produção, há um nó por instância de SO (física ou virtual).</span><span class="sxs-lookup"><span data-stu-id="55571-126">In a typical production deployment, there is one node per OS instance (physical or virtual).</span></span> <span data-ttu-id="55571-127">tamanho do cluster Olá é determinado por suas necessidades comerciais.</span><span class="sxs-lookup"><span data-stu-id="55571-127">hello cluster size is determined by your business needs.</span></span> <span data-ttu-id="55571-128">No entanto, seu cluster deve ter um tamanho mínimo de três nós (computadores ou máquinas virtuais).</span><span class="sxs-lookup"><span data-stu-id="55571-128">However, you must have a minimum cluster size of three nodes (machines or virtual machines).</span></span>
<span data-ttu-id="55571-129">Para fins de desenvolvimento, você pode ter mais de um nó em um determinado computador.</span><span class="sxs-lookup"><span data-stu-id="55571-129">For development purposes, you can have more than one node on a given machine.</span></span> <span data-ttu-id="55571-130">Em um ambiente de produção, o Service Fabric dá suporte apenas a um nó por máquina virtual ou física.</span><span class="sxs-lookup"><span data-stu-id="55571-130">In a production environment, Service Fabric supports only one node per physical or virtual machine.</span></span>

### <a name="step-4-determine-hello-number-of-fault-domains-and-upgrade-domains"></a><span data-ttu-id="55571-131">Etapa 4: Determinar o número de saudação de domínios de falha e domínios de atualização</span><span class="sxs-lookup"><span data-stu-id="55571-131">Step 4: Determine hello number of fault domains and upgrade domains</span></span>
<span data-ttu-id="55571-132">Um *domínio de falha* (FD) é uma unidade física de falha e é toohello está diretamente relacionado a infraestrutura física em Olá data centers.</span><span class="sxs-lookup"><span data-stu-id="55571-132">A *fault domain* (FD) is a physical unit of failure and is directly related toohello physical infrastructure in hello data centers.</span></span> <span data-ttu-id="55571-133">Um domínio de falha consiste em componentes de hardware (computadores, comutadores, redes, entre outros) que compartilham um ponto único de falha.</span><span class="sxs-lookup"><span data-stu-id="55571-133">A fault domain consists of hardware components (computers, switches, networks, and more) that share a single point of failure.</span></span> <span data-ttu-id="55571-134">Embora não haja um mapeamento individual entre domínios de falha e racks, de maneira geral, cada rack pode ser considerado um domínio de falha.</span><span class="sxs-lookup"><span data-stu-id="55571-134">Although there is no 1:1 mapping between fault domains and racks, loosely speaking, each rack can be considered a fault domain.</span></span> <span data-ttu-id="55571-135">Ao considerar nós Olá no cluster, é altamente recomendável que nós de saudação seja distribuída entre pelo menos três domínios de falha.</span><span class="sxs-lookup"><span data-stu-id="55571-135">When considering hello nodes in your cluster, we strongly recommend that hello nodes be distributed among at least three fault domains.</span></span>

<span data-ttu-id="55571-136">Quando você especificar FDs em Clusterconfig, você pode escolher o nome de saudação para cada FD.</span><span class="sxs-lookup"><span data-stu-id="55571-136">When you specify FDs in ClusterConfig.json, you can choose hello name for each FD.</span></span> <span data-ttu-id="55571-137">O Service Fabric dá suporte a FDs hierárquicos, de modo que você pode refletir a topologia da sua infraestrutura neles.</span><span class="sxs-lookup"><span data-stu-id="55571-137">Service Fabric supports hierarchical FDs, so you can reflect your infrastructure topology in them.</span></span>  <span data-ttu-id="55571-138">Por exemplo, a saudação FDs a seguir é válida:</span><span class="sxs-lookup"><span data-stu-id="55571-138">For example, hello following FDs are valid:</span></span>

* <span data-ttu-id="55571-139">"faultDomain": "fd:/Room1/Rack1/Machine1"</span><span class="sxs-lookup"><span data-stu-id="55571-139">"faultDomain": "fd:/Room1/Rack1/Machine1"</span></span>
* <span data-ttu-id="55571-140">"faultDomain": "fd:/FD1"</span><span class="sxs-lookup"><span data-stu-id="55571-140">"faultDomain": "fd:/FD1"</span></span>
* <span data-ttu-id="55571-141">"faultDomain": "fd:/Room1/Rack1/PDU1/M1"</span><span class="sxs-lookup"><span data-stu-id="55571-141">"faultDomain": "fd:/Room1/Rack1/PDU1/M1"</span></span>

<span data-ttu-id="55571-142">Um *UD* (Domínio de Atualização) é uma unidade lógica de nós.</span><span class="sxs-lookup"><span data-stu-id="55571-142">An *upgrade domain* (UD) is a logical unit of nodes.</span></span> <span data-ttu-id="55571-143">Durante as atualizações de malha de serviços gerenciados (uma atualização de aplicativo ou uma atualização de cluster), todos os nós em um UD descerão atualização de saudação tooperform enquanto os nós em outros UDs permanecem disponíveis tooserve solicitações.</span><span class="sxs-lookup"><span data-stu-id="55571-143">During Service Fabric orchestrated upgrades (either an application upgrade or a cluster upgrade), all nodes in a UD are taken down tooperform hello upgrade while nodes in other UDs remain available tooserve requests.</span></span> <span data-ttu-id="55571-144">Olá executar em seus computadores de atualizações de firmware não consideram UDs, portanto você deve executá-las um computador por vez.</span><span class="sxs-lookup"><span data-stu-id="55571-144">hello firmware upgrades you perform on your machines do not honor UDs, so you must do them one machine at a time.</span></span>

<span data-ttu-id="55571-145">Olá toothink de maneira mais simples sobre esses conceitos é tooconsider FDs como unidade de saudação de falhas não planejadas e UDs como unidade de saudação de manutenção planejada.</span><span class="sxs-lookup"><span data-stu-id="55571-145">hello simplest way toothink about these concepts is tooconsider FDs as hello unit of unplanned failure and UDs as hello unit of planned maintenance.</span></span>

<span data-ttu-id="55571-146">Quando você especificar UDs em Clusterconfig, você pode escolher o nome de saudação para cada UD.</span><span class="sxs-lookup"><span data-stu-id="55571-146">When you specify UDs in ClusterConfig.json, you can choose hello name for each UD.</span></span> <span data-ttu-id="55571-147">Por exemplo, a saudação nomes a seguir é válida:</span><span class="sxs-lookup"><span data-stu-id="55571-147">For example, hello following names are valid:</span></span>

* <span data-ttu-id="55571-148">"upgradeDomain": "UD0"</span><span class="sxs-lookup"><span data-stu-id="55571-148">"upgradeDomain": "UD0"</span></span>
* <span data-ttu-id="55571-149">"upgradeDomain": "UD1A"</span><span class="sxs-lookup"><span data-stu-id="55571-149">"upgradeDomain": "UD1A"</span></span>
* <span data-ttu-id="55571-150">"upgradeDomain": "DomainRed"</span><span class="sxs-lookup"><span data-stu-id="55571-150">"upgradeDomain": "DomainRed"</span></span>
* <span data-ttu-id="55571-151">"upgradeDomain": "Blue"</span><span class="sxs-lookup"><span data-stu-id="55571-151">"upgradeDomain": "Blue"</span></span>

<span data-ttu-id="55571-152">Para obter informações mais detalhadas sobre os domínios de atualização e de falha, confira [Describing a Service Fabric cluster](service-fabric-cluster-resource-manager-cluster-description.md) (Descrevendo um cluster do Service Fabric).</span><span class="sxs-lookup"><span data-stu-id="55571-152">For more detailed information on upgrade domains and fault domains, see [Describing a Service Fabric cluster](service-fabric-cluster-resource-manager-cluster-description.md).</span></span>

### <a name="step-5-download-hello-service-fabric-standalone-package-for-windows-server"></a><span data-ttu-id="55571-153">Etapa 5: Baixar o pacote de autônomo do Service Fabric de saudação para o Windows Server</span><span class="sxs-lookup"><span data-stu-id="55571-153">Step 5: Download hello Service Fabric standalone package for Windows Server</span></span>
<span data-ttu-id="55571-154">[Baixe o Link - pacote autônomo do Service Fabric - Windows Server](http://go.microsoft.com/fwlink/?LinkId=730690) e descompacte o pacote hello, ou implantação tooa do computador que é não faz parte do cluster hello, ou tooone de máquinas de saudação que fará parte do cluster.</span><span class="sxs-lookup"><span data-stu-id="55571-154">[Download Link - Service Fabric Standalone Package - Windows Server](http://go.microsoft.com/fwlink/?LinkId=730690) and unzip hello package, either tooa deployment machine that is not part of hello cluster, or tooone of hello machines that will be a part of your cluster.</span></span>

### <a name="step-6-modify-cluster-configuration"></a><span data-ttu-id="55571-155">Etapa 6: modificar a configuração do cluster</span><span class="sxs-lookup"><span data-stu-id="55571-155">Step 6: Modify cluster configuration</span></span>
<span data-ttu-id="55571-156">toocreate um cluster autônomo que toocreate um cluster configuração Clusterconfig arquivo autônomo, que descreve a especificação de saudação do cluster de saudação.</span><span class="sxs-lookup"><span data-stu-id="55571-156">toocreate a standalone cluster you have toocreate a standalone cluster configuration ClusterConfig.json file, which describes hello specification of hello cluster.</span></span> <span data-ttu-id="55571-157">Você pode basear o arquivo de configuração de saudação nos modelos de saudação encontrado em Olá link abaixo.</span><span class="sxs-lookup"><span data-stu-id="55571-157">You can base hello configuration file on hello templates found at hello below link.</span></span> <br><span data-ttu-id="55571-158">
[Configurações de cluster autônomo](https://github.com/Azure-Samples/service-fabric-dotnet-standalone-cluster-configuration/tree/master/Samples)</span><span class="sxs-lookup"><span data-stu-id="55571-158">
[Standalone Cluster Configurations](https://github.com/Azure-Samples/service-fabric-dotnet-standalone-cluster-configuration/tree/master/Samples)</span></span>

<span data-ttu-id="55571-159">Para obter detalhes sobre seções Olá nesse arquivo, consulte [definições de configuração para o cluster do Windows autônoma](service-fabric-cluster-manifest.md).</span><span class="sxs-lookup"><span data-stu-id="55571-159">For details on hello sections in this file, see [Configuration settings for standalone Windows cluster](service-fabric-cluster-manifest.md).</span></span>

<span data-ttu-id="55571-160">Abra um dos arquivos de Clusterconfig de saudação do pacote de saudação baixado e modificar Olá configurações a seguir:</span><span class="sxs-lookup"><span data-stu-id="55571-160">Open one of hello ClusterConfig.json files from hello package you downloaded and modify hello following settings:</span></span>
| <span data-ttu-id="55571-161">**Parâmetro de configuração**</span><span class="sxs-lookup"><span data-stu-id="55571-161">**Configuration Setting**</span></span> | <span data-ttu-id="55571-162">**Descrição**</span><span class="sxs-lookup"><span data-stu-id="55571-162">**Description**</span></span> |
| --- | --- |
| <span data-ttu-id="55571-163">**NodeTypes**</span><span class="sxs-lookup"><span data-stu-id="55571-163">**NodeTypes**</span></span> |<span data-ttu-id="55571-164">Tipos de nós permitem que você tooseparate os nós do cluster em vários grupos.</span><span class="sxs-lookup"><span data-stu-id="55571-164">Node types allow you tooseparate your cluster nodes into various groups.</span></span> <span data-ttu-id="55571-165">Um cluster precisa ter pelo menos um NodeType.</span><span class="sxs-lookup"><span data-stu-id="55571-165">A cluster must have at least one NodeType.</span></span> <span data-ttu-id="55571-166">Todos os nós em um grupo têm Olá características comuns a seguir:</span><span class="sxs-lookup"><span data-stu-id="55571-166">All nodes in a group have hello following common characteristics:</span></span> <br> <span data-ttu-id="55571-167">**Nome** -este é o nome do tipo de nó de saudação.</span><span class="sxs-lookup"><span data-stu-id="55571-167">**Name** - This is hello node type name.</span></span> <br><span data-ttu-id="55571-168">**Portas do Ponto de Extremidade** : são vários pontos de extremidade (portas) nomeados que estão associados a esse tipo de nó.</span><span class="sxs-lookup"><span data-stu-id="55571-168">**Endpoint Ports** - These are various named end points (ports) that are associated with this node type.</span></span> <span data-ttu-id="55571-169">Você pode usar qualquer número de porta que você deseja, desde que eles não entrem em conflito com tudo neste manifesto e já não está em uso por outro aplicativo em execução na VM da máquina hello.</span><span class="sxs-lookup"><span data-stu-id="55571-169">You can use any port number that you wish, as long as they do not conflict with anything else in this manifest and are not already in use by any other application running on hello machine/VM.</span></span> <br> <span data-ttu-id="55571-170">**Propriedades de posicionamento** -descreve propriedades para esse tipo de nó que você usa como restrições de posicionamento para serviços do sistema hello ou seus serviços.</span><span class="sxs-lookup"><span data-stu-id="55571-170">**Placement Properties** - These describe properties for this node type that you use as placement constraints for hello system services or your services.</span></span> <span data-ttu-id="55571-171">Essas propriedades são pares de chave/valor definidos pelo usuário que fornecem metadados extras para um determinado nó.</span><span class="sxs-lookup"><span data-stu-id="55571-171">These properties are user-defined key/value pairs that provide extra meta data for a given node.</span></span> <span data-ttu-id="55571-172">Exemplos de propriedades do nó seria se o nó de saudação tem um disco rígido ou a placa gráfica, o número de saudação de eixos em seu disco rígido, núcleos e outras propriedades físicas.</span><span class="sxs-lookup"><span data-stu-id="55571-172">Examples of node properties would be whether hello node has a hard drive or graphics card, hello number of spindles in its hard drive, cores, and other physical properties.</span></span> <br> <span data-ttu-id="55571-173">**As capacidades** -capacidades de nó definem nome hello e a quantidade de recursos específicos que um determinado nó tem disponível para consumo.</span><span class="sxs-lookup"><span data-stu-id="55571-173">**Capacities** - Node capacities define hello name and amount of a particular resource that a particular node has available for consumption.</span></span> <span data-ttu-id="55571-174">Por exemplo, um nó pode definir que tem capacidade para uma métrica chamada "MemoryInMb" e que tem 2048 MB de memória disponível por padrão.</span><span class="sxs-lookup"><span data-stu-id="55571-174">For example, a node may define that it has capacity for a metric called “MemoryInMb” and that it has 2048 MB available by default.</span></span> <span data-ttu-id="55571-175">Essas capacidades são usadas no tooensure de tempo de execução que os serviços que exigem valores específicos de recursos são colocados em nós Olá que tem os recursos disponíveis no hello necessário quantidades.</span><span class="sxs-lookup"><span data-stu-id="55571-175">These capacities are used at runtime tooensure that services that require particular amounts of resources are placed on hello nodes that have those resources available in hello required amounts.</span></span><br><span data-ttu-id="55571-176">**IsPrimary** - se você tiver mais de um NodeType definido Verifique se apenas um tooprimary com valor de saudação *true*, que é onde o sistema Olá executar services.</span><span class="sxs-lookup"><span data-stu-id="55571-176">**IsPrimary** - If you have more than one NodeType defined ensure that only one is set tooprimary with hello value *true*, which is where hello system services run.</span></span> <span data-ttu-id="55571-177">Todos os outros tipos de nó devem ser definidos como o valor de toohello *false*</span><span class="sxs-lookup"><span data-stu-id="55571-177">All other node types should be set toohello value *false*</span></span> |
| <span data-ttu-id="55571-178">**Nós**</span><span class="sxs-lookup"><span data-stu-id="55571-178">**Nodes**</span></span> |<span data-ttu-id="55571-179">Esses são os detalhes de Olá para cada um de nós de saudação que fazem parte do cluster de saudação (tipo de nó, o nome do nó, IP endereço, domínio de falha e domínio de atualização do nó de saudação).</span><span class="sxs-lookup"><span data-stu-id="55571-179">These are hello details for each of hello nodes that are part of hello cluster (node type, node name, IP address, fault domain, and upgrade domain of hello node).</span></span> <span data-ttu-id="55571-180">máquinas de saudação desejado Olá cluster toobe criado na necessidade toobe listado aqui com seus endereços IP.</span><span class="sxs-lookup"><span data-stu-id="55571-180">hello machines you want hello cluster toobe created on need toobe listed here with their IP addresses.</span></span> <br> <span data-ttu-id="55571-181">Se você usar Olá mesmo endereço IP para todos os nós de hello, em seguida, um caixa de um cluster é criado, que pode ser usado para fins de teste.</span><span class="sxs-lookup"><span data-stu-id="55571-181">If you use hello same IP address for all hello nodes, then a one-box cluster is created, which you can use for testing purposes.</span></span> <span data-ttu-id="55571-182">Não use clusters de uma caixa para implantar cargas de trabalho de produção.</span><span class="sxs-lookup"><span data-stu-id="55571-182">Do not use One-box clusters for deploying production workloads.</span></span> |

<span data-ttu-id="55571-183">Após a configuração de cluster Olá ambiente de toohello todas as configurações, pode ser testado no ambiente de cluster da saudação (etapa 7).</span><span class="sxs-lookup"><span data-stu-id="55571-183">After hello cluster configuration has had all settings configured toohello environment, it can be tested against hello cluster environment (step 7).</span></span>

<a id="environmentsetup"></a>

### <a name="step-7-environment-setup"></a><span data-ttu-id="55571-184">Etapa 7.</span><span class="sxs-lookup"><span data-stu-id="55571-184">Step 7.</span></span> <span data-ttu-id="55571-185">Configuração do ambiente</span><span class="sxs-lookup"><span data-stu-id="55571-185">Environment setup</span></span>

<span data-ttu-id="55571-186">Quando um administrador de cluster configura um cluster do Service Fabric autônomo, o ambiente de saudação é precisa toobe configurado com hello critérios a seguir:</span><span class="sxs-lookup"><span data-stu-id="55571-186">When a cluster administrator configures a Service Fabric standalone cluster, hello environment is needs toobe set up with hello following criteria:</span></span> <br>
1. <span data-ttu-id="55571-187">usuário Olá criando Olá cluster deve ter máquinas de tooall de privilégios de segurança em nível de administrador listados como nós no arquivo de configuração de cluster de saudação.</span><span class="sxs-lookup"><span data-stu-id="55571-187">hello user creating hello cluster should have administrator-level security privileges tooall machines that are listed as nodes in hello cluster configuration file.</span></span>
2. <span data-ttu-id="55571-188">Computador do qual Olá cluster é criado, bem como cada máquina do nó de cluster deve:</span><span class="sxs-lookup"><span data-stu-id="55571-188">Machine from which hello cluster is created, as well as each cluster node machine must:</span></span>
* <span data-ttu-id="55571-189">Desinstalar o SDK do Service Fabric</span><span class="sxs-lookup"><span data-stu-id="55571-189">Have Service Fabric SDK uninstalled</span></span>
* <span data-ttu-id="55571-190">Desinstalar o tempo de execução do Service Fabric</span><span class="sxs-lookup"><span data-stu-id="55571-190">Have Service Fabric runtime uninstalled</span></span> 
* <span data-ttu-id="55571-191">Olá serviço de Firewall do Windows (mpssvc) habilitou</span><span class="sxs-lookup"><span data-stu-id="55571-191">Have hello Windows Firewall service (mpssvc) enabled</span></span>
* <span data-ttu-id="55571-192">Olá o serviço Registro remoto (remoteregistry) tiver habilitado</span><span class="sxs-lookup"><span data-stu-id="55571-192">Have hello Remote Registry Service (remoteregistry) enabled</span></span>
* <span data-ttu-id="55571-193">Habilitar o compartilhamento de arquivos (SMB)</span><span class="sxs-lookup"><span data-stu-id="55571-193">Have file sharing (SMB) enabled</span></span>
* <span data-ttu-id="55571-194">Abrir as portas necessárias, com base nas portas de configuração de cluster</span><span class="sxs-lookup"><span data-stu-id="55571-194">Have necessary ports opened, based on cluster configuration ports</span></span>
* <span data-ttu-id="55571-195">Abrir as portas necessárias para o Serviço de Registro Remoto e o SMB do Windows: 135, 137, 138, 139 e 445</span><span class="sxs-lookup"><span data-stu-id="55571-195">Have necessary ports opened for Windows SMB and Remote Registry service: 135, 137, 138, 139, and 445</span></span>
* <span data-ttu-id="55571-196">Ter tooone de conectividade de rede outro</span><span class="sxs-lookup"><span data-stu-id="55571-196">Have network connectivity tooone another</span></span>
3. <span data-ttu-id="55571-197">Nenhuma das máquinas de nó de cluster Olá deve ser um controlador de domínio.</span><span class="sxs-lookup"><span data-stu-id="55571-197">None of hello cluster node machines should be a Domain Controller.</span></span>
4. <span data-ttu-id="55571-198">Se Olá cluster toobe implantado é um cluster seguro, valide pré-requisitos estão em colocar e estão configurados corretamente em relação a configuração de saudação de segurança necessárias do hello.</span><span class="sxs-lookup"><span data-stu-id="55571-198">If hello cluster toobe deployed is a secure cluster, validate hello necessary security prerequisites are in place, and are configured correctly against hello configuration.</span></span>
5. <span data-ttu-id="55571-199">Se as máquinas de cluster Olá não estão acessíveis pela internet, o conjunto seguinte Olá Olá cluster configuração:</span><span class="sxs-lookup"><span data-stu-id="55571-199">If hello cluster machines are not internet-accessible, set hello following in hello cluster configuration:</span></span>
* <span data-ttu-id="55571-200">Desabilitar a telemetria: em *Propriedades*, defina *"enableTelemetry": false*</span><span class="sxs-lookup"><span data-stu-id="55571-200">Disable telemetry:   Under *properties* set   *"enableTelemetry": false*</span></span>
* <span data-ttu-id="55571-201">Desabilitar o download da versão de malha automática & notificações essa versão do cluster atual hello está se aproximando do fim do suporte: em *propriedades* definido *"fabricClusterAutoupgradeEnabled": falso*</span><span class="sxs-lookup"><span data-stu-id="55571-201">Disable automatic Fabric version downloading & notifications that hello current cluster version is nearing end of support:   Under *properties* set   *"fabricClusterAutoupgradeEnabled": false*</span></span>
* <span data-ttu-id="55571-202">Como alternativa se o acesso à internet de rede é limitados domínios listados toowhite, domínios de saudação abaixo são necessários para a atualização automática: go.microsoft.com download.microsoft.com</span><span class="sxs-lookup"><span data-stu-id="55571-202">Alternatively if network internet access is limited toowhite-listed domains, hello domains below are required for automatic upgrade:   go.microsoft.com   download.microsoft.com</span></span>

6. <span data-ttu-id="55571-203">Defina as exclusões de antivírus do Service Fabric apropriadas:</span><span class="sxs-lookup"><span data-stu-id="55571-203">Set appropriate Service Fabric antivirus exclusions:</span></span>

| <span data-ttu-id="55571-204">**Diretórios de Antivírus excluídos**</span><span class="sxs-lookup"><span data-stu-id="55571-204">**Antivirus Excluded directories**</span></span> |
| --- |
| <span data-ttu-id="55571-205">Program Files\Microsoft Service Fabric</span><span class="sxs-lookup"><span data-stu-id="55571-205">Program Files\Microsoft Service Fabric</span></span> |
| <span data-ttu-id="55571-206">FabricDataRoot (da configuração de cluster)</span><span class="sxs-lookup"><span data-stu-id="55571-206">FabricDataRoot (from cluster configuration)</span></span> |
| <span data-ttu-id="55571-207">FabricLogRoot (da configuração de cluster)</span><span class="sxs-lookup"><span data-stu-id="55571-207">FabricLogRoot (from cluster configuration)</span></span> |

| <span data-ttu-id="55571-208">**Processos do antivírus excluídos**</span><span class="sxs-lookup"><span data-stu-id="55571-208">**Antivirus Excluded processes**</span></span> |
| --- |
| <span data-ttu-id="55571-209">Fabric.exe</span><span class="sxs-lookup"><span data-stu-id="55571-209">Fabric.exe</span></span> |
| <span data-ttu-id="55571-210">FabricHost.exe</span><span class="sxs-lookup"><span data-stu-id="55571-210">FabricHost.exe</span></span> |
| <span data-ttu-id="55571-211">FabricInstallerService.exe</span><span class="sxs-lookup"><span data-stu-id="55571-211">FabricInstallerService.exe</span></span> |
| <span data-ttu-id="55571-212">FabricSetup.exe</span><span class="sxs-lookup"><span data-stu-id="55571-212">FabricSetup.exe</span></span> |
| <span data-ttu-id="55571-213">FabricDeployer.exe</span><span class="sxs-lookup"><span data-stu-id="55571-213">FabricDeployer.exe</span></span> |
| <span data-ttu-id="55571-214">ImageBuilder.exe</span><span class="sxs-lookup"><span data-stu-id="55571-214">ImageBuilder.exe</span></span> |
| <span data-ttu-id="55571-215">FabricGateway.exe</span><span class="sxs-lookup"><span data-stu-id="55571-215">FabricGateway.exe</span></span> |
| <span data-ttu-id="55571-216">FabricDCA.exe</span><span class="sxs-lookup"><span data-stu-id="55571-216">FabricDCA.exe</span></span> |
| <span data-ttu-id="55571-217">FabricFAS.exe</span><span class="sxs-lookup"><span data-stu-id="55571-217">FabricFAS.exe</span></span> |
| <span data-ttu-id="55571-218">FabricUOS.exe</span><span class="sxs-lookup"><span data-stu-id="55571-218">FabricUOS.exe</span></span> |
| <span data-ttu-id="55571-219">FabricRM.exe</span><span class="sxs-lookup"><span data-stu-id="55571-219">FabricRM.exe</span></span> |
| <span data-ttu-id="55571-220">FileStoreService.exe</span><span class="sxs-lookup"><span data-stu-id="55571-220">FileStoreService.exe</span></span> |

### <a name="step-8-validate-environment-using-testconfiguration-script"></a><span data-ttu-id="55571-221">Etapa 8.</span><span class="sxs-lookup"><span data-stu-id="55571-221">Step 8.</span></span> <span data-ttu-id="55571-222">Validar o ambiente usando o script TestConfiguration</span><span class="sxs-lookup"><span data-stu-id="55571-222">Validate environment using TestConfiguration script</span></span>
<span data-ttu-id="55571-223">Olá TestConfiguration.ps1 script pode ser encontrado no pacote autônomo de saudação.</span><span class="sxs-lookup"><span data-stu-id="55571-223">hello TestConfiguration.ps1 script can be found in hello standalone package.</span></span> <span data-ttu-id="55571-224">Ele é usado como um analisador de práticas recomendadas toovalidate alguns dos critérios de saudação acima e deve ser usado como um toovalidate de verificação de integridade se um cluster pode ser implantado em um ambiente específico.</span><span class="sxs-lookup"><span data-stu-id="55571-224">It is used as a Best Practices Analyzer toovalidate some of hello criteria above and should be used as a sanity check toovalidate whether a cluster can be deployed on a given environment.</span></span> <span data-ttu-id="55571-225">Se houver qualquer falha, consulte a lista de toohello em [configuração do ambiente](service-fabric-cluster-standalone-deployment-preparation.md) para solução de problemas.</span><span class="sxs-lookup"><span data-stu-id="55571-225">If there is any failure, refer toohello list under [Environment Setup](service-fabric-cluster-standalone-deployment-preparation.md) for troubleshooting.</span></span> 

<span data-ttu-id="55571-226">Esse script pode ser executado em qualquer computador que tenha acesso tooall Olá máquinas de administrador são listadas como nós em um arquivo de configuração de cluster de saudação.</span><span class="sxs-lookup"><span data-stu-id="55571-226">This script can be run on any machine that has administrator access tooall hello machines that are listed as nodes in hello cluster configuration file.</span></span> <span data-ttu-id="55571-227">máquina de saudação que esse script é executado no não tem toobe parte do cluster de saudação.</span><span class="sxs-lookup"><span data-stu-id="55571-227">hello machine that this script is run on does not have toobe part of hello cluster.</span></span>

```powershell
PS C:\temp\Microsoft.Azure.ServiceFabric.WindowsServer> .\TestConfiguration.ps1 -ClusterConfigFilePath .\ClusterConfig.Unsecure.DevCluster.json
Trace folder already exists. Traces will be written tooexisting trace folder: C:\temp\Microsoft.Azure.ServiceFabric.WindowsServer\DeploymentTraces
Running Best Practices Analyzer...
Best Practices Analyzer completed successfully.


LocalAdminPrivilege        : True
IsJsonValid                : True
IsCabValid                 : True
RequiredPortsOpen          : True
RemoteRegistryAvailable    : True
FirewallAvailable          : True
RpcCheckPassed             : True
NoConflictingInstallations : True
FabricInstallable          : True
Passed                     : True
```

<span data-ttu-id="55571-228">No momento este módulo de teste de configuração não valida a configuração de segurança Olá para que isso tenha toobe feito independentemente.</span><span class="sxs-lookup"><span data-stu-id="55571-228">Currently this configuration testing module does not validate hello security configuration so this has toobe done independently.</span></span>  

> [!NOTE]
> <span data-ttu-id="55571-229">Estamos continuamente fazendo aprimoramentos toomake esse módulo mais robusto, portanto se ocorrer uma falha ou ausente caso que você acredita que atualmente não é detectada pelo TestConfiguration, informe-por meio de nosso [suporte a canais](https://docs.microsoft.com/en-us/azure/service-fabric/service-fabric-support).</span><span class="sxs-lookup"><span data-stu-id="55571-229">We are continually making improvements toomake this module more robust, so if there is a faulty or missing case which you believe isn't currently caught by TestConfiguration, please let us know through our [support channels](https://docs.microsoft.com/en-us/azure/service-fabric/service-fabric-support).</span></span>   
> 
> 

## <a name="next-steps"></a><span data-ttu-id="55571-230">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="55571-230">Next steps</span></span>
* [<span data-ttu-id="55571-231">Criar um cluster autônomo em execução no Windows Server</span><span class="sxs-lookup"><span data-stu-id="55571-231">Create a standalone cluster running on Windows Server</span></span>](service-fabric-cluster-creation-for-windows-server.md)
