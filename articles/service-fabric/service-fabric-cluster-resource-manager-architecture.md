---
title: Arquitetura do Gerenciador de aaaResource | Microsoft Docs
description: "Uma visão geral da arquitetura do Gerenciador de Recursos de Cluster do Service Fabric."
services: service-fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: 
ms.assetid: 6c4421f9-834b-450c-939f-1cb4ff456b9b
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/18/2017
ms.author: masnider
ms.openlocfilehash: 9ea80273d0566a2ac25143ada3662875656b57b8
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="cluster-resource-manager-architecture-overview"></a><span data-ttu-id="2809c-103">Visão geral da arquitetura do Gerenciador de Recursos de Cluster</span><span class="sxs-lookup"><span data-stu-id="2809c-103">Cluster resource manager architecture overview</span></span>
<span data-ttu-id="2809c-104">Olá Gerenciador de recursos de Cluster do serviço de malha é um serviço central que é executado no cluster hello.</span><span class="sxs-lookup"><span data-stu-id="2809c-104">hello Service Fabric Cluster Resource Manager is a central service that runs in hello cluster.</span></span> <span data-ttu-id="2809c-105">Ele gerencia o estado de saudação desejado de serviços de saudação em cluster hello, particularmente com respeito tooresource consumo e todas as regras de posicionamento.</span><span class="sxs-lookup"><span data-stu-id="2809c-105">It manages hello desired state of hello services in hello cluster, particularly with respect tooresource consumption and any placement rules.</span></span> 

<span data-ttu-id="2809c-106">recursos de saudação toomanage no cluster, Olá Gerenciador de recursos de Cluster do serviço de malha deve ter várias partes de informações:</span><span class="sxs-lookup"><span data-stu-id="2809c-106">toomanage hello resources in your cluster, hello Service Fabric Cluster Resource Manager must have several pieces of information:</span></span>

- <span data-ttu-id="2809c-107">Quais serviços existem atualmente</span><span class="sxs-lookup"><span data-stu-id="2809c-107">Which services currently exist</span></span>
- <span data-ttu-id="2809c-108">O consumo de recursos atual (ou padrão) de cada serviço</span><span class="sxs-lookup"><span data-stu-id="2809c-108">Each service's current (or default) resource consumption</span></span> 
- <span data-ttu-id="2809c-109">capacidade restante de cluster Olá</span><span class="sxs-lookup"><span data-stu-id="2809c-109">hello remaining cluster capacity</span></span> 
- <span data-ttu-id="2809c-110">capacidade de saudação de nós de saudação do cluster de saudação</span><span class="sxs-lookup"><span data-stu-id="2809c-110">hello capacity of hello nodes in hello cluster</span></span> 
- <span data-ttu-id="2809c-111">quantidade de saudação de recursos consumidos em cada nó</span><span class="sxs-lookup"><span data-stu-id="2809c-111">hello amount of resources consumed on each node</span></span>

<span data-ttu-id="2809c-112">consumo de recursos de saudação de um determinado serviço pode alterar ao longo do tempo, e serviços importam geralmente mais de um tipo de recurso.</span><span class="sxs-lookup"><span data-stu-id="2809c-112">hello resource consumption of a given service can change over time, and services usually care about more than one type of resource.</span></span> <span data-ttu-id="2809c-113">Em serviços diferentes, pode haver recursos físicos e físicos reais que estão sendo medidos.</span><span class="sxs-lookup"><span data-stu-id="2809c-113">Across different services, there may be both real physical and physical resources being measured.</span></span> <span data-ttu-id="2809c-114">Os serviços podem rastrear métricas físicas, como consumo de disco e memória.</span><span class="sxs-lookup"><span data-stu-id="2809c-114">Services may track physical metrics like memory and disk consumption.</span></span> <span data-ttu-id="2809c-115">Com mais frequência, os serviços podem considerar métricas lógicas — como "WorkQueueDepth" ou "TotalRequests".</span><span class="sxs-lookup"><span data-stu-id="2809c-115">More commonly, services may care about logical metrics - things like "WorkQueueDepth" or "TotalRequests".</span></span> <span data-ttu-id="2809c-116">Métricas lógicas e físicas podem ser usadas em Olá mesmo cluster.</span><span class="sxs-lookup"><span data-stu-id="2809c-116">Both logical and physical metrics can be used in hello same cluster.</span></span> <span data-ttu-id="2809c-117">As métricas podem ser compartilhadas entre vários serviços ou ser tooa específico determinado serviço.</span><span class="sxs-lookup"><span data-stu-id="2809c-117">Metrics can be shared across many services or be specific tooa particular service.</span></span>

## <a name="other-considerations"></a><span data-ttu-id="2809c-118">Outras considerações</span><span class="sxs-lookup"><span data-stu-id="2809c-118">Other considerations</span></span>
<span data-ttu-id="2809c-119">Olá proprietários e operadores de cluster Olá podem ser diferentes do hello autores de serviço e aplicativos ou em um mínimo são Olá mesmo pessoas usando funções diferentes.</span><span class="sxs-lookup"><span data-stu-id="2809c-119">hello owners and operators of hello cluster can be different from hello service and application authors, or at a minimum are hello same people wearing different hats.</span></span> <span data-ttu-id="2809c-120">Quando desenvolve seu aplicativo, você sabe quais são algumas das coisas que ele requer.</span><span class="sxs-lookup"><span data-stu-id="2809c-120">When you develop your application you know a few things about what it requires.</span></span> <span data-ttu-id="2809c-121">Você tem uma estimativa da saudação consumirá de recursos e serviços diferentes devem ser implantados.</span><span class="sxs-lookup"><span data-stu-id="2809c-121">You have an estimate of hello resources it will consume and how different services should be deployed.</span></span> <span data-ttu-id="2809c-122">Por exemplo, a camada da web de saudação precisa toorun em toohello nós expostos à Internet, enquanto os serviços de banco de dados de saudação não devem.</span><span class="sxs-lookup"><span data-stu-id="2809c-122">For example, hello web tier needs toorun on nodes exposed toohello Internet, while hello database services should not.</span></span> <span data-ttu-id="2809c-123">Como outro exemplo, os serviços da web hello provavelmente são restritas por CPU e de rede, enquanto o cuidado de serviços de camada Olá dados mais sobre o consumo de memória e disco.</span><span class="sxs-lookup"><span data-stu-id="2809c-123">As another example, hello web services are probably constrained by CPU and network, while hello data tier services care more about memory and disk consumption.</span></span> <span data-ttu-id="2809c-124">No entanto, pessoa Olá tratamento de um incidente de site em tempo real para esse serviço em produção, ou que está gerenciando um serviço de atualização toohello tem toodo um trabalho diferente e requer ferramentas diferentes.</span><span class="sxs-lookup"><span data-stu-id="2809c-124">However, hello person handling a live-site incident for that service in production, or who is managing an upgrade toohello service has a different job toodo, and requires different tools.</span></span> 

<span data-ttu-id="2809c-125">Cluster hello e serviços são dinâmicos:</span><span class="sxs-lookup"><span data-stu-id="2809c-125">Both hello cluster and services are dynamic:</span></span>

- <span data-ttu-id="2809c-126">número de saudação de nós no cluster Olá pode aumentar ou reduzir</span><span class="sxs-lookup"><span data-stu-id="2809c-126">hello number of nodes in hello cluster can grow and shrink</span></span>
- <span data-ttu-id="2809c-127">Nós de diferentes tamanhos e tipos podem entrar e sair</span><span class="sxs-lookup"><span data-stu-id="2809c-127">Nodes of different sizes and types can come and go</span></span>
- <span data-ttu-id="2809c-128">Serviços podem ser criados, removidos e podem alterar as respectivas alocações de recursos e regras de posicionamento desejadas</span><span class="sxs-lookup"><span data-stu-id="2809c-128">Services can be created, removed, and change their desired resource allocations and placement rules</span></span>
- <span data-ttu-id="2809c-129">Atualizações ou outras operações de gerenciamento podem reverter cluster Olá no aplicativo hello nos níveis de infraestrutura</span><span class="sxs-lookup"><span data-stu-id="2809c-129">Upgrades or other management operations can roll through hello cluster at hello application on infrastructure levels</span></span>
- <span data-ttu-id="2809c-130">Falhas podem ocorrer a qualquer momento.</span><span class="sxs-lookup"><span data-stu-id="2809c-130">Failures can happen at any time.</span></span>

## <a name="cluster-resource-manager-components-and-data-flow"></a><span data-ttu-id="2809c-131">Componentes e fluxo de dados do Gerenciador de Recursos de Cluster</span><span class="sxs-lookup"><span data-stu-id="2809c-131">Cluster resource manager components and data flow</span></span>
<span data-ttu-id="2809c-132">Olá Gerenciador de recursos de Cluster tem requisitos de saudação do tootrack de cada serviço e hello o consumo de recursos por cada objeto de serviço nesses serviços.</span><span class="sxs-lookup"><span data-stu-id="2809c-132">hello Cluster Resource Manager has tootrack hello requirements of each service and hello consumption of resources by each service object within those services.</span></span> <span data-ttu-id="2809c-133">Olá Gerenciador de recursos de Cluster tem duas partes conceituais: agentes executados em cada nó e um serviço tolerante a falhas.</span><span class="sxs-lookup"><span data-stu-id="2809c-133">hello Cluster Resource Manager has two conceptual parts: agents that run on each node and a fault-tolerant service.</span></span> <span data-ttu-id="2809c-134">agentes de Olá em cada nó de carga de rastrear relatórios de serviços, agregação-los e relatá-los periodicamente.</span><span class="sxs-lookup"><span data-stu-id="2809c-134">hello agents on each node track load reports from services, aggregate them, and periodically report them.</span></span> <span data-ttu-id="2809c-135">Olá serviço Gerenciador de recursos de Cluster agrega todas as informações de saudação de agentes local hello e reage com base em sua configuração atual.</span><span class="sxs-lookup"><span data-stu-id="2809c-135">hello Cluster Resource Manager service aggregates all hello information from hello local agents and reacts based on its current configuration.</span></span>

<span data-ttu-id="2809c-136">Vejamos Olá diagrama a seguir:</span><span class="sxs-lookup"><span data-stu-id="2809c-136">Let’s look at hello following diagram:</span></span>

<span data-ttu-id="2809c-137"><center>
![Arquitetura do Balanceador de Recursos][Image1]
</center></span><span class="sxs-lookup"><span data-stu-id="2809c-137"><center>
![Resource Balancer Architecture][Image1]
</center></span></span>

<span data-ttu-id="2809c-138">No tempo de execução, muitas alterações poderiam acontecer.</span><span class="sxs-lookup"><span data-stu-id="2809c-138">During runtime, there are many changes that could happen.</span></span> <span data-ttu-id="2809c-139">Por exemplo, digamos que a quantidade de saudação de recursos de alguns serviços consumam alterações, algumas falhas de serviços, e alguns nós entram e saem cluster hello.</span><span class="sxs-lookup"><span data-stu-id="2809c-139">For example, let’s say hello amount of resources some services consume changes, some services fail, and some nodes join and leave hello cluster.</span></span> <span data-ttu-id="2809c-140">Todas as alterações de saudação em um nó são agregadas e enviadas periodicamente toohello Gerenciador de recursos de Cluster service (1,2) em que eles são agregados novamente, analisados e armazenados.</span><span class="sxs-lookup"><span data-stu-id="2809c-140">All hello changes on a node are aggregated and periodically sent toohello Cluster Resource Manager service (1,2) where they are aggregated again, analyzed, and stored.</span></span> <span data-ttu-id="2809c-141">Em alguns segundos em que serviço examina Olá alterações e determina se as ações são necessárias (3).</span><span class="sxs-lookup"><span data-stu-id="2809c-141">Every few seconds that service looks at hello changes and determines if any actions are necessary (3).</span></span> <span data-ttu-id="2809c-142">Ele pode, por exemplo, observe que alguns nós vazios foram adicionados toohello cluster.</span><span class="sxs-lookup"><span data-stu-id="2809c-142">For example, it could notice that some empty nodes have been added toohello cluster.</span></span> <span data-ttu-id="2809c-143">Como resultado, decide toomove alguns nós toothose de serviços.</span><span class="sxs-lookup"><span data-stu-id="2809c-143">As a result, it decides toomove some services toothose nodes.</span></span> <span data-ttu-id="2809c-144">Olá Gerenciador de recursos de Cluster foi Observe também que um nó específico está sobrecarregado ou que determinados serviços têm falhou ou foi excluídos, liberando recursos em outro lugar.</span><span class="sxs-lookup"><span data-stu-id="2809c-144">hello Cluster Resource Manager could also notice that a particular node is overloaded, or that certain services have failed or been deleted, freeing up resources elsewhere.</span></span>

<span data-ttu-id="2809c-145">Vamos examinar Olá diagrama a seguir e veja o que acontece em seguida.</span><span class="sxs-lookup"><span data-stu-id="2809c-145">Let’s look at hello following diagram and see what happens next.</span></span> <span data-ttu-id="2809c-146">Vamos dizer que Olá Gerenciador de recursos de Cluster determina que são necessárias alterações.</span><span class="sxs-lookup"><span data-stu-id="2809c-146">Let’s say that hello Cluster Resource Manager determines that changes are necessary.</span></span> <span data-ttu-id="2809c-147">Ele coordena com outras alterações necessárias do sistema services (em determinado Olá Gerenciador de Failover) toomake hello.</span><span class="sxs-lookup"><span data-stu-id="2809c-147">It coordinates with other system services (in particular hello Failover Manager) toomake hello necessary changes.</span></span> <span data-ttu-id="2809c-148">Em seguida, comandos necessários Olá são enviados toohello apropriado nós (4).</span><span class="sxs-lookup"><span data-stu-id="2809c-148">Then hello necessary commands are sent toohello appropriate nodes (4).</span></span> <span data-ttu-id="2809c-149">Por exemplo, digamos que Olá Gerenciador de recursos notado que Nó5 estava sobrecarregado e então decidir toomove serviço B de tooNode4 Nó5.</span><span class="sxs-lookup"><span data-stu-id="2809c-149">For example, let's say hello Resource Manager noticed that Node5 was overloaded, and so decided toomove service B from Node5 tooNode4.</span></span> <span data-ttu-id="2809c-150">Final de saudação de reconfiguração da saudação (5), cluster Olá tem esta aparência:</span><span class="sxs-lookup"><span data-stu-id="2809c-150">At hello end of hello reconfiguration (5), hello cluster looks like this:</span></span>

<span data-ttu-id="2809c-151"><center>
![Arquitetura do Balanceador de Recursos][Image2]
</center></span><span class="sxs-lookup"><span data-stu-id="2809c-151"><center>
![Resource Balancer Architecture][Image2]
</center></span></span>

## <a name="next-steps"></a><span data-ttu-id="2809c-152">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="2809c-152">Next steps</span></span>
- <span data-ttu-id="2809c-153">Olá Gerenciador de recursos de Cluster tem muitas opções para descrever o cluster hello.</span><span class="sxs-lookup"><span data-stu-id="2809c-153">hello Cluster Resource Manager has many options for describing hello cluster.</span></span> <span data-ttu-id="2809c-154">toofind mais sobre eles, leia este artigo em [que descreve um cluster do Service Fabric](./service-fabric-cluster-resource-manager-cluster-description.md)</span><span class="sxs-lookup"><span data-stu-id="2809c-154">toofind out more about them, check out this article on [describing a Service Fabric cluster](./service-fabric-cluster-resource-manager-cluster-description.md)</span></span>
- <span data-ttu-id="2809c-155">tarefas de principal do Gerenciador de recursos do Cluster Olá são rebalanceamento cluster hello e impor regras de posicionamento.</span><span class="sxs-lookup"><span data-stu-id="2809c-155">hello Cluster Resource Manager's primary duties are rebalancing hello cluster and enforcing placement rules.</span></span> <span data-ttu-id="2809c-156">Para obter mais informações sobre como configurar esses comportamentos, consulte [Balanceamento do cluster do Service Fabric](./service-fabric-cluster-resource-manager-balancing.md)</span><span class="sxs-lookup"><span data-stu-id="2809c-156">For more information on configuring these behaviors, see [balancing your Service Fabric cluster](./service-fabric-cluster-resource-manager-balancing.md)</span></span>

[Image1]:./media/service-fabric-cluster-resource-manager-architecture/Service-Fabric-Resource-Manager-Architecture-Activity-1.png
[Image2]:./media/service-fabric-cluster-resource-manager-architecture/Service-Fabric-Resource-Manager-Architecture-Activity-2.png
