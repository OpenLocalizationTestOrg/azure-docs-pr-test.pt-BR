---
title: "Atualização de aplicativos: serialização de dados | Microsoft Docs"
description: "Práticas recomendadas para a serialização de dados e como ela afeta as atualizações de aplicativo sem interrupção."
services: service-fabric
documentationcenter: .net
author: vturecek
manager: timlt
editor: 
ms.assetid: a5f36366-a2ab-4ae3-bb08-bc2f9533bc5a
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 06/29/2017
ms.author: vturecek
ms.openlocfilehash: 1b65dfd3813423550631490640a81953864f58e3
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="how-data-serialization-affects-an-application-upgrade"></a><span data-ttu-id="19e48-103">Como a serialização de dados afeta a atualização de um aplicativo</span><span class="sxs-lookup"><span data-stu-id="19e48-103">How data serialization affects an application upgrade</span></span>
<span data-ttu-id="19e48-104">Em um [atualização de aplicativo móvel](service-fabric-application-upgrade.md), atualização de saudação é aplicado tooa subconjunto de nós, um domínio de atualização por vez.</span><span class="sxs-lookup"><span data-stu-id="19e48-104">In a [rolling application upgrade](service-fabric-application-upgrade.md), hello upgrade is applied tooa subset of nodes, one upgrade domain at a time.</span></span> <span data-ttu-id="19e48-105">Durante esse processo, alguns domínios de atualização estão na versão mais recente de saudação do seu aplicativo, e alguns domínios de atualização estão na versão mais antiga de saudação do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="19e48-105">During this process, some upgrade domains are on hello newer version of your application, and some upgrade domains are on hello older version of your application.</span></span> <span data-ttu-id="19e48-106">Durante a distribuição de Olá Olá nova versão do seu aplicativo deve ser capaz de tooread Olá antigo dos seus dados e versão antiga de saudação do seu aplicativo deve ser capaz de tooread Olá nova versão dos dados.</span><span class="sxs-lookup"><span data-stu-id="19e48-106">During hello rollout, hello new version of your application must be able tooread hello old version of your data, and hello old version of your application must be able tooread hello new version of your data.</span></span> <span data-ttu-id="19e48-107">Se o formato de dados Olá não for frente e para trás atualização Olá compatível, podem falhar, ou pior, dados pode ser perdido ou corrompido.</span><span class="sxs-lookup"><span data-stu-id="19e48-107">If hello data format is not forward and backward compatible, hello upgrade may fail, or worse, data may be lost or corrupted.</span></span> <span data-ttu-id="19e48-108">Este artigo discute o que constitui o formato de dados e oferece as práticas recomendadas para garantir que seus dados sejam compatíveis de uma versão para outra.</span><span class="sxs-lookup"><span data-stu-id="19e48-108">This article discusses what constitutes your data format and offers best practices for ensuring that your data is forward and backward compatible.</span></span>

## <a name="what-makes-up-your-data-format"></a><span data-ttu-id="19e48-109">O que compõe o seu formato de dados?</span><span class="sxs-lookup"><span data-stu-id="19e48-109">What makes up your data format?</span></span>
<span data-ttu-id="19e48-110">No Azure Service Fabric, dados de saudação que são persistidos e replicados vêm de suas classes c#.</span><span class="sxs-lookup"><span data-stu-id="19e48-110">In Azure Service Fabric, hello data that is persisted and replicated comes from your C# classes.</span></span> <span data-ttu-id="19e48-111">Para aplicativos que usam [coleções confiável](service-fabric-reliable-services-reliable-collections.md), que dados são objetos de saudação em dicionários confiável hello e filas.</span><span class="sxs-lookup"><span data-stu-id="19e48-111">For applications that use [Reliable Collections](service-fabric-reliable-services-reliable-collections.md), that data is hello objects in hello reliable dictionaries and queues.</span></span> <span data-ttu-id="19e48-112">Para aplicativos que usam [Reliable Actors](service-fabric-reliable-actors-introduction.md), que é Olá fazendo o estado de ator hello.</span><span class="sxs-lookup"><span data-stu-id="19e48-112">For applications that use [Reliable Actors](service-fabric-reliable-actors-introduction.md), that is hello backing state for hello actor.</span></span> <span data-ttu-id="19e48-113">Essas classes c# devem ser serializáveis toobe persistida e replicada.</span><span class="sxs-lookup"><span data-stu-id="19e48-113">These C# classes must be serializable toobe persisted and replicated.</span></span> <span data-ttu-id="19e48-114">Portanto, o formato de dados de saudação é definido pelos campos de saudação e propriedades que são serializadas, bem como eles são serializados.</span><span class="sxs-lookup"><span data-stu-id="19e48-114">Therefore, hello data format is defined by hello fields and properties that are serialized, as well as how they are serialized.</span></span> <span data-ttu-id="19e48-115">Por exemplo, em um `IReliableDictionary<int, MyClass>` dados saudação são um serializado `int` e um serializado `MyClass`.</span><span class="sxs-lookup"><span data-stu-id="19e48-115">For example, in an `IReliableDictionary<int, MyClass>` hello data is a serialized `int` and a serialized `MyClass`.</span></span>

### <a name="code-changes-that-result-in-a-data-format-change"></a><span data-ttu-id="19e48-116">Alterações de código que resultam em uma alteração no formato dos dados</span><span class="sxs-lookup"><span data-stu-id="19e48-116">Code changes that result in a data format change</span></span>
<span data-ttu-id="19e48-117">Desde que o formato de dados de saudação é determinado pelas classes c#, as alterações toohello classes podem causar uma alteração de formato de dados.</span><span class="sxs-lookup"><span data-stu-id="19e48-117">Since hello data format is determined by C# classes, changes toohello classes may cause a data format change.</span></span> <span data-ttu-id="19e48-118">É preciso ter cuidado tooensure uma atualização sem interrupção pode lidar com alteração de formato de dados de saudação.</span><span class="sxs-lookup"><span data-stu-id="19e48-118">Care must be taken tooensure that a rolling upgrade can handle hello data format change.</span></span> <span data-ttu-id="19e48-119">Exemplos que podem causar alterações no formato de dados:</span><span class="sxs-lookup"><span data-stu-id="19e48-119">Examples that may cause data format changes:</span></span>

* <span data-ttu-id="19e48-120">Adicionar ou remover campos ou propriedades</span><span class="sxs-lookup"><span data-stu-id="19e48-120">Adding or removing fields or properties</span></span>
* <span data-ttu-id="19e48-121">Renomear campos ou propriedades</span><span class="sxs-lookup"><span data-stu-id="19e48-121">Renaming fields or properties</span></span>
* <span data-ttu-id="19e48-122">Alterar os tipos de campos ou propriedades Olá</span><span class="sxs-lookup"><span data-stu-id="19e48-122">Changing hello types of fields or properties</span></span>
* <span data-ttu-id="19e48-123">Alterar o namespace ou nome de classe Olá</span><span class="sxs-lookup"><span data-stu-id="19e48-123">Changing hello class name or namespace</span></span>

### <a name="data-contract-as-hello-default-serializer"></a><span data-ttu-id="19e48-124">Contrato de dados como Olá serializador padrão</span><span class="sxs-lookup"><span data-stu-id="19e48-124">Data Contract as hello default serializer</span></span>
<span data-ttu-id="19e48-125">serializador Olá é geralmente responsável por ler dados saudação e desserializá-lo na versão atual do hello, mesmo se os dados saudação estão em uma versão ou *mais recente* versão.</span><span class="sxs-lookup"><span data-stu-id="19e48-125">hello serializer is generally responsible for reading hello data and deserializing it into hello current version, even if hello data is in an older or *newer* version.</span></span> <span data-ttu-id="19e48-126">Olá, serializador padrão é hello [serializador de contrato de dados](https://msdn.microsoft.com/library/ms733127.aspx), que tem regras de controle de versão bem definido.</span><span class="sxs-lookup"><span data-stu-id="19e48-126">hello default serializer is hello [Data Contract serializer](https://msdn.microsoft.com/library/ms733127.aspx), which has well-defined versioning rules.</span></span> <span data-ttu-id="19e48-127">Confiável coleções permitem Olá serializador toobe substituído, mas atores confiável no momento não.</span><span class="sxs-lookup"><span data-stu-id="19e48-127">Reliable Collections allow hello serializer toobe overridden, but Reliable Actors currently do not.</span></span> <span data-ttu-id="19e48-128">o serializador de dados Olá desempenha um papel importante em permitir atualizações sem interrupção.</span><span class="sxs-lookup"><span data-stu-id="19e48-128">hello data serializer plays an important role in enabling rolling upgrades.</span></span> <span data-ttu-id="19e48-129">o serializador de contrato de dados Olá é serializador Olá que recomendamos para aplicativos do Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="19e48-129">hello Data Contract serializer is hello serializer that we recommend for Service Fabric applications.</span></span>

## <a name="how-hello-data-format-affects-a-rolling-upgrade"></a><span data-ttu-id="19e48-130">Como o formato de dados Olá afeta uma atualização sem interrupção</span><span class="sxs-lookup"><span data-stu-id="19e48-130">How hello data format affects a rolling upgrade</span></span>
<span data-ttu-id="19e48-131">Durante uma atualização sem interrupção, há dois cenários principais, onde poderá encontrar mais antigas serializador hello ou *mais recente* versão dos dados:</span><span class="sxs-lookup"><span data-stu-id="19e48-131">During a rolling upgrade, there are two main scenarios where hello serializer may encounter an older or *newer* version of your data:</span></span>

1. <span data-ttu-id="19e48-132">Depois que um nó é atualizado e inicia o backup, serializador novo Olá carregará dados de saudação que estava toodisk persistido por uma versão antiga hello.</span><span class="sxs-lookup"><span data-stu-id="19e48-132">After a node is upgraded and starts back up, hello new serializer will load hello data that was persisted toodisk by hello old version.</span></span>
2. <span data-ttu-id="19e48-133">Durante a saudação atualização sem interrupção, o cluster Olá conterá uma mistura de versões antigas e novas de saudação do seu código.</span><span class="sxs-lookup"><span data-stu-id="19e48-133">During hello rolling upgrade, hello cluster will contain a mix of hello old and new versions of your code.</span></span> <span data-ttu-id="19e48-134">Como réplicas podem ser colocadas em diferentes domínios de atualização e réplicas de enviam dados tooeach outros, hello antigo e/ou nova versão de seus dados pode ser encontrado por versão de novo e/ou antigo de saudação do seu serializador.</span><span class="sxs-lookup"><span data-stu-id="19e48-134">Since replicas may be placed in different upgrade domains, and replicas send data tooeach other, hello new and/or old version of your data may be encountered by hello new and/or old version of your serializer.</span></span>

> [!NOTE]
> <span data-ttu-id="19e48-135">Olá "nova versão" e "antigo" aqui, consulte toohello versão do código que está sendo executado.</span><span class="sxs-lookup"><span data-stu-id="19e48-135">hello "new version" and "old version" here refer toohello version of your code that is running.</span></span> <span data-ttu-id="19e48-136">Olá "novo serializador" refere-se o código do serializador toohello que está sendo executado na nova versão de saudação do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="19e48-136">hello "new serializer" refers toohello serializer code that is executing in hello new version of your application.</span></span> <span data-ttu-id="19e48-137">Hello "novos dados" se refere a classe c# toohello serializado da nova versão de saudação do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="19e48-137">hello "new data" refers toohello serialized C# class from hello new version of your application.</span></span>
> 
> 

<span data-ttu-id="19e48-138">Olá duas versões de código e formato de dados deve ser frente e para trás compatível.</span><span class="sxs-lookup"><span data-stu-id="19e48-138">hello two versions of code and data format must be both forward and backward compatible.</span></span> <span data-ttu-id="19e48-139">Se eles não forem compatíveis, Olá atualização sem interrupção pode falhar ou dados podem ser perdidos.</span><span class="sxs-lookup"><span data-stu-id="19e48-139">If they are not compatible, hello rolling upgrade may fail or data may be lost.</span></span> <span data-ttu-id="19e48-140">Olá atualização sem interrupção pode falhar porque o código hello ou serializador pode gerar exceções ou uma falha ao encontrar hello outra versão.</span><span class="sxs-lookup"><span data-stu-id="19e48-140">hello rolling upgrade may fail because hello code or serializer may throw exceptions or a fault when it encounters hello other version.</span></span> <span data-ttu-id="19e48-141">Dados podem ser perdidos se, por exemplo, uma nova propriedade foi adicionada, mas o serializador antigo Olá descarta durante a desserialização.</span><span class="sxs-lookup"><span data-stu-id="19e48-141">Data may be lost if, for example, a new property was added but hello old serializer discards it during deserialization.</span></span>

<span data-ttu-id="19e48-142">Contrato de dados é hello recomendado solução para assegurar que seus dados sejam compatíveis.</span><span class="sxs-lookup"><span data-stu-id="19e48-142">Data Contract is hello recommended solution for ensuring that your data is compatible.</span></span> <span data-ttu-id="19e48-143">Ele possui regras de versão bem definidas para adição, remoção e alteração de campos.</span><span class="sxs-lookup"><span data-stu-id="19e48-143">It has well-defined versioning rules for adding, removing, and changing fields.</span></span> <span data-ttu-id="19e48-144">Ele também tem suporte para lidar com campos desconhecidos, conectando-se ao processo de serialização e desserialização hello e lidar com herança de classe.</span><span class="sxs-lookup"><span data-stu-id="19e48-144">It also has support for dealing with unknown fields, hooking into hello serialization and deserialization process, and dealing with class inheritance.</span></span> <span data-ttu-id="19e48-145">Para saber mais, confira [Usando o contrato de dados](https://msdn.microsoft.com/library/ms733127.aspx).</span><span class="sxs-lookup"><span data-stu-id="19e48-145">For more information, see [Using Data Contract](https://msdn.microsoft.com/library/ms733127.aspx).</span></span>

## <a name="next-steps"></a><span data-ttu-id="19e48-146">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="19e48-146">Next steps</span></span>
<span data-ttu-id="19e48-147">[Atualização do aplicativo usando o Visual Studio](service-fabric-application-upgrade-tutorial.md) orienta você durante a atualização de aplicativo usando o Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="19e48-147">[Upgrading your Application Using Visual Studio](service-fabric-application-upgrade-tutorial.md) walks you through an application upgrade using Visual Studio.</span></span>

<span data-ttu-id="19e48-148">[Atualização do aplicativo usando o PowerShell](service-fabric-application-upgrade-tutorial-powershell.md) orienta você uma atualização de aplicativo usando o PowerShell.</span><span class="sxs-lookup"><span data-stu-id="19e48-148">[Upgrading your Application Using Powershell](service-fabric-application-upgrade-tutorial-powershell.md) walks you through an application upgrade using PowerShell.</span></span>

<span data-ttu-id="19e48-149">Controle como seu aplicativo é atualizado usando [Parâmetros de Atualização](service-fabric-application-upgrade-parameters.md).</span><span class="sxs-lookup"><span data-stu-id="19e48-149">Control how your application upgrades by using [Upgrade Parameters](service-fabric-application-upgrade-parameters.md).</span></span>

<span data-ttu-id="19e48-150">Saiba como toouse funcionalidade avançada ao atualizar seu aplicativo referindo-se muito[tópicos avançados](service-fabric-application-upgrade-advanced.md).</span><span class="sxs-lookup"><span data-stu-id="19e48-150">Learn how toouse advanced functionality while upgrading your application by referring too[Advanced Topics](service-fabric-application-upgrade-advanced.md).</span></span>

<span data-ttu-id="19e48-151">Corrigir problemas comuns em atualizações de aplicativo consultando etapas toohello [de solução de problemas de atualizações de aplicativo ](service-fabric-application-upgrade-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="19e48-151">Fix common problems in application upgrades by referring toohello steps in [Troubleshooting Application Upgrades ](service-fabric-application-upgrade-troubleshooting.md).</span></span>

