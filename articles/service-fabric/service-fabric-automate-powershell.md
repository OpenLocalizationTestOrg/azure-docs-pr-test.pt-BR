---
title: gerenciamento de aplicativos do Azure Service Fabric do aaaAutomate | Microsoft Docs
description: Implantar, atualizar, testar e remover aplicativos do Service Fabric usando o PowerShell.
services: service-fabric
documentationcenter: .net
author: rwike77
manager: timlt
editor: 
ms.assetid: f03f4294-571d-4262-8a77-cc8b481b959d
ms.service: service-fabric
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 06/16/2017
ms.author: ryanwi
redirect_url: /azure/service-fabric/service-fabric-deploy-remove-applications
ms.openlocfilehash: a64a39dbee26be8ac15fee767a90fd06bfe4b896
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="automate-hello-application-lifecycle-using-powershell"></a><span data-ttu-id="61a61-103">Automatizar o ciclo de vida do aplicativo hello usando o PowerShell</span><span class="sxs-lookup"><span data-stu-id="61a61-103">Automate hello application lifecycle using PowerShell</span></span>
<span data-ttu-id="61a61-104">Muitos aspectos da saudação [ciclo de vida do aplicativo de malha do serviço](service-fabric-application-lifecycle.md) pode ser automatizada.</span><span class="sxs-lookup"><span data-stu-id="61a61-104">Many aspects of hello [Service Fabric application lifecycle](service-fabric-application-lifecycle.md) can be automated.</span></span>  <span data-ttu-id="61a61-105">Este artigo mostra como as tarefas de toouse PowerShell tooautomate comum para implantar, atualizar, remover e testar aplicativos do Azure Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="61a61-105">This article shows how toouse PowerShell tooautomate common tasks for deploying, upgrading, removing, and testing Azure Service Fabric applications.</span></span>  <span data-ttu-id="61a61-106">APIs gerenciadas e HTTP para gerenciamento de aplicativos também estão disponíveis.</span><span class="sxs-lookup"><span data-stu-id="61a61-106">Managed and HTTP APIs for app management are also available.</span></span> <span data-ttu-id="61a61-107">Consulte [ciclo de vida do aplicativo](service-fabric-application-lifecycle.md) para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="61a61-107">See [app lifecycle](service-fabric-application-lifecycle.md) for more information.</span></span>  

## <a name="prerequisites"></a><span data-ttu-id="61a61-108">Pré-requisitos</span><span class="sxs-lookup"><span data-stu-id="61a61-108">Prerequisites</span></span>
<span data-ttu-id="61a61-109">Antes de mover tarefas toohello artigo hello, certifique-se a:</span><span class="sxs-lookup"><span data-stu-id="61a61-109">Before you move on toohello tasks in hello article, be sure to:</span></span>

* <span data-ttu-id="61a61-110">Familiarize-se com os conceitos do Service Fabric Olá descritos em [visão geral técnica do Service Fabric](service-fabric-technical-overview.md).</span><span class="sxs-lookup"><span data-stu-id="61a61-110">Get familiar with hello Service Fabric concepts described in [Technical overview of Service Fabric](service-fabric-technical-overview.md).</span></span>
* <span data-ttu-id="61a61-111">[Instalar o tempo de execução hello, SDK e as ferramentas](service-fabric-get-started.md), que também instala Olá **ServiceFabric** módulo do PowerShell.</span><span class="sxs-lookup"><span data-stu-id="61a61-111">[Install hello runtime, SDK, and tools](service-fabric-get-started.md), which also installs hello **ServiceFabric** PowerShell module.</span></span>
* <span data-ttu-id="61a61-112">[Habilitar a execução de script do PowerShell](service-fabric-get-started.md#enable-powershell-script-execution).</span><span class="sxs-lookup"><span data-stu-id="61a61-112">[Enable PowerShell script execution](service-fabric-get-started.md#enable-powershell-script-execution).</span></span>
* <span data-ttu-id="61a61-113">Iniciar um cluster local.</span><span class="sxs-lookup"><span data-stu-id="61a61-113">Start a local cluster.</span></span>  <span data-ttu-id="61a61-114">Inicie uma nova janela do PowerShell como administrador e execute o script de instalação de cluster de saudação da pasta do SDK de saudação:`& "$ENV:ProgramFiles\Microsoft SDKs\Service Fabric\ClusterSetup\DevClusterSetup.ps1"`</span><span class="sxs-lookup"><span data-stu-id="61a61-114">Launch a new PowerShell window as an administrator and then run hello cluster setup script from hello SDK folder: `& "$ENV:ProgramFiles\Microsoft SDKs\Service Fabric\ClusterSetup\DevClusterSetup.ps1"`</span></span>
* <span data-ttu-id="61a61-115">Antes de executar quaisquer comandos do PowerShell neste artigo, primeiro conecte-se toohello cluster de malha do serviço local usando [Connect-ServiceFabricCluster](/powershell/module/servicefabric/connect-servicefabriccluster?view=azureservicefabricps):`Connect-ServiceFabricCluster localhost:19000`</span><span class="sxs-lookup"><span data-stu-id="61a61-115">Before you run any PowerShell commands in this article, first connect toohello local Service Fabric cluster by using [Connect-ServiceFabricCluster](/powershell/module/servicefabric/connect-servicefabriccluster?view=azureservicefabricps): `Connect-ServiceFabricCluster localhost:19000`</span></span>
* <span data-ttu-id="61a61-116">Olá tarefas a seguir exige um toodeploy de pacote de aplicativo v1 e um pacote de aplicativo v2 para a atualização.</span><span class="sxs-lookup"><span data-stu-id="61a61-116">hello following tasks require a v1 application package toodeploy and a v2 application package for upgrade.</span></span> <span data-ttu-id="61a61-117">Baixar Olá [ **WordCount** aplicativo de exemplo](http://aka.ms/servicefabricsamples) (localizado em exemplos de introdução de saudação).</span><span class="sxs-lookup"><span data-stu-id="61a61-117">Download hello [**WordCount** sample application](http://aka.ms/servicefabricsamples) (located in hello Getting Started samples).</span></span> <span data-ttu-id="61a61-118">Compile e empacote o aplicativo hello no Visual Studio (com o botão direito em **WordCount** no Gerenciador de soluções e selecione **pacote**).</span><span class="sxs-lookup"><span data-stu-id="61a61-118">Build and package hello application in Visual Studio (right-click on **WordCount** in Solution Explorer and select **Package**).</span></span> <span data-ttu-id="61a61-119">Pacote de v1 Olá cópia no `C:\ServiceFabricSamples\Services\WordCount\WordCount\pkg\Debug` muito`C:\Temp\WordCount`.</span><span class="sxs-lookup"><span data-stu-id="61a61-119">Copy hello v1 package in `C:\ServiceFabricSamples\Services\WordCount\WordCount\pkg\Debug` too`C:\Temp\WordCount`.</span></span> <span data-ttu-id="61a61-120">Cópia `C:\Temp\WordCount` muito`C:\Temp\WordCountV2`, criação de pacote de aplicativo hello v2 para a atualização.</span><span class="sxs-lookup"><span data-stu-id="61a61-120">Copy `C:\Temp\WordCount` too`C:\Temp\WordCountV2`, creating hello v2 application package for upgrade.</span></span> <span data-ttu-id="61a61-121">Abra `C:\Temp\WordCountV2\ApplicationManifest.xml` em um editor de texto.</span><span class="sxs-lookup"><span data-stu-id="61a61-121">Open `C:\Temp\WordCountV2\ApplicationManifest.xml` in a text editor.</span></span> <span data-ttu-id="61a61-122">Em Olá **ApplicationManifest** elemento, alteração Olá **ApplicationTypeVersion** de atributo de "1.0.0" muito "2.0.0" número de versão de aplicativo tooupdate hello.</span><span class="sxs-lookup"><span data-stu-id="61a61-122">In hello **ApplicationManifest** element, change hello **ApplicationTypeVersion** attribute from "1.0.0" too"2.0.0" tooupdate hello app version number.</span></span> <span data-ttu-id="61a61-123">Salve o arquivo de ApplicationManifest.xml de saudação alterado.</span><span class="sxs-lookup"><span data-stu-id="61a61-123">Save hello changed ApplicationManifest.xml file.</span></span>

## <a name="task-deploy-a-service-fabric-application"></a><span data-ttu-id="61a61-124">Tarefa: Implantar um aplicativo do Service Fabric</span><span class="sxs-lookup"><span data-stu-id="61a61-124">Task: Deploy a Service Fabric application</span></span>
<span data-ttu-id="61a61-125">Depois de criados e empacotados aplicativo hello (ou baixado o pacote de aplicativo hello), você pode implantar o aplicativo hello em um cluster de malha do serviço local.</span><span class="sxs-lookup"><span data-stu-id="61a61-125">After you've built and packaged hello application (or downloaded hello application package), you can deploy hello application into a local Service Fabric cluster.</span></span> <span data-ttu-id="61a61-126">Implantação envolve a carregar o pacote de aplicativo hello, registrando o tipo de aplicativo hello e criação de instância de aplicativo hello.</span><span class="sxs-lookup"><span data-stu-id="61a61-126">Deployment involves uploading hello application package, registering hello application type, and creating hello application instance.</span></span> <span data-ttu-id="61a61-127">Use as instruções de saudação toodeploy esta seção um novo cluster de tooa do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="61a61-127">Use hello instructions in this section toodeploy a new application tooa cluster.</span></span>

### <a name="step-1-upload-hello-application-package"></a><span data-ttu-id="61a61-128">Etapa 1: Carregar o pacote de aplicativo hello</span><span class="sxs-lookup"><span data-stu-id="61a61-128">Step 1: Upload hello application package</span></span>
<span data-ttu-id="61a61-129">Carregando toohello de pacote de aplicativo hello repositório de imagens coloca-o em um componentes da malha de serviço local toointernal acessível.</span><span class="sxs-lookup"><span data-stu-id="61a61-129">Uploading hello application package toohello image store puts it in a location accessible toointernal Service Fabric components.</span></span>  <span data-ttu-id="61a61-130">pacote de aplicativo Hello contém Olá manifesto do aplicativo, manifestos do serviço e o código, configuração necessárias e aplicativo de saudação de toocreate de pacote (s) de dados e instâncias de serviço.</span><span class="sxs-lookup"><span data-stu-id="61a61-130">hello application package contains hello necessary application manifest, service manifests, and code, configuration, and data package(s) toocreate hello application and service instances.</span></span> <span data-ttu-id="61a61-131">Se desejar que o pacote de aplicativo de saudação tooverify localmente, use Olá [ServiceFabricApplicationPackage teste](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) cmdlet.</span><span class="sxs-lookup"><span data-stu-id="61a61-131">If you want tooverify hello app package locally, use hello [Test-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) cmdlet.</span></span>  <span data-ttu-id="61a61-132">Olá [ServiceFabricApplicationPackage cópia](/powershell/module/servicefabric/copy-servicefabricapplicationpackage?view=azureservicefabricps) comando Olá de carregamentos de pacote.</span><span class="sxs-lookup"><span data-stu-id="61a61-132">hello [Copy-ServiceFabricApplicationPackage](/powershell/module/servicefabric/copy-servicefabricapplicationpackage?view=azureservicefabricps) command uploads hello package.</span></span> <span data-ttu-id="61a61-133">Por exemplo:</span><span class="sxs-lookup"><span data-stu-id="61a61-133">For example:</span></span>

```powershell
Copy-ServiceFabricApplicationPackage C:\Temp\WordCount\ -ImageStoreConnectionString file:C:\SfDevCluster\Data\ImageStoreShare -ApplicationPackagePathInImageStore WordCount
```

### <a name="step-2-register-hello-application-type"></a><span data-ttu-id="61a61-134">Etapa 2: Registrar o tipo de aplicativo hello</span><span class="sxs-lookup"><span data-stu-id="61a61-134">Step 2: Register hello application type</span></span>
<span data-ttu-id="61a61-135">Registrar pacote de aplicativo hello faz com tipo de aplicativo hello e versão declarados no manifesto de aplicativo hello disponível para uso.</span><span class="sxs-lookup"><span data-stu-id="61a61-135">Registering hello application package makes hello application type and version declared in hello application manifest available for use.</span></span> <span data-ttu-id="61a61-136">sistema Olá lê pacote hello carregado na etapa 1 do hello, verifique se o pacote de saudação (equivalente toorunning [ServiceFabricApplicationPackage teste](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) localmente), processar o conteúdo do pacote hello e copie Olá processado pacote tooan local do sistema interno.</span><span class="sxs-lookup"><span data-stu-id="61a61-136">hello system reads hello package uploaded in hello step 1, verify hello package (equivalent toorunning [Test-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) locally), process hello package contents, and copy hello processed package tooan internal system location.</span></span>  <span data-ttu-id="61a61-137">Executar Olá [ServiceFabricApplicationType registro](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) cmdlet:</span><span class="sxs-lookup"><span data-stu-id="61a61-137">Run hello [Register-ServiceFabricApplicationType](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) cmdlet:</span></span>

```powershell
Register-ServiceFabricApplicationType WordCount
```
<span data-ttu-id="61a61-138">toosee todos os tipos de aplicativo hello registrados no cluster de hello, executar Olá [ServiceFabricApplicationType Get](/powershell/module/servicefabric/get-servicefabricapplicationtype?view=azureservicefabricps) cmdlet:</span><span class="sxs-lookup"><span data-stu-id="61a61-138">toosee all hello application types registered in hello cluster, run hello [Get-ServiceFabricApplicationType](/powershell/module/servicefabric/get-servicefabricapplicationtype?view=azureservicefabricps) cmdlet:</span></span>

```powershell
Get-ServiceFabricApplicationType
```

### <a name="step-3-create-hello-application-instance"></a><span data-ttu-id="61a61-139">Etapa 3: Criar a instância do aplicativo hello</span><span class="sxs-lookup"><span data-stu-id="61a61-139">Step 3: Create hello application instance</span></span>
<span data-ttu-id="61a61-140">Um aplicativo pode ser instanciado usando qualquer versão do tipo de aplicativo que foi registrado com êxito usando Olá [ServiceFabricApplication novo](/powershell/module/servicefabric/new-servicefabricapplication?view=azureservicefabricps) comando.</span><span class="sxs-lookup"><span data-stu-id="61a61-140">An application can be instantiated by using any application type version that has been registered successfully by using hello [New-ServiceFabricApplication](/powershell/module/servicefabric/new-servicefabricapplication?view=azureservicefabricps) command.</span></span> <span data-ttu-id="61a61-141">nome de saudação de cada aplicativo é declarada no tempo de implantação e deve começar com hello **malha:** esquema e ser exclusivo para cada instância do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="61a61-141">hello name of each application is declared at deploy time and must start with hello **fabric:** scheme and be unique for each application instance.</span></span> <span data-ttu-id="61a61-142">Olá nome do tipo de aplicativo e a versão do tipo de aplicativo são declarados no hello **ApplicationManifest.xml** arquivo hello do pacote de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="61a61-142">hello application type name and application type version are declared in hello **ApplicationManifest.xml** file of hello application package.</span></span> <span data-ttu-id="61a61-143">Se todos os serviços padrão foram definidos no manifesto de aplicativo de saudação do tipo de aplicativo de destino hello, aqueles são criados no momento.</span><span class="sxs-lookup"><span data-stu-id="61a61-143">If any default services were defined in hello application manifest of hello target application type, then those are created at this time.</span></span>

```powershell
New-ServiceFabricApplication fabric:/WordCount WordCount 1.0.0
```

<span data-ttu-id="61a61-144">Olá [ServiceFabricApplication Get](/powershell/servicefabric/vlatest/get-servicefabricapplication) comando lista todas as instâncias de aplicativo que foram criadas com êxito, juntamente com o respectivo status geral.</span><span class="sxs-lookup"><span data-stu-id="61a61-144">hello [Get-ServiceFabricApplication](/powershell/servicefabric/vlatest/get-servicefabricapplication) command lists all application instances that were successfully created, along with their overall status.</span></span> <span data-ttu-id="61a61-145">Olá [ServiceFabricService Get](/powershell/module/servicefabric/get-servicefabricservice?view=azureservicefabricps) comando lista todas as instâncias de serviço Olá que foram criadas com êxito em uma instância de determinado aplicativo.</span><span class="sxs-lookup"><span data-stu-id="61a61-145">hello [Get-ServiceFabricService](/powershell/module/servicefabric/get-servicefabricservice?view=azureservicefabricps) command lists all of hello service instances that were successfully created within a given application instance.</span></span> <span data-ttu-id="61a61-146">Os serviços padrão (se houver) são listados.</span><span class="sxs-lookup"><span data-stu-id="61a61-146">Default services (if any) are listed.</span></span>

```powershell
Get-ServiceFabricApplication

Get-ServiceFabricApplication | Get-ServiceFabricService
```

## <a name="task-upgrade-a-service-fabric-application"></a><span data-ttu-id="61a61-147">Tarefa: Atualizar um aplicativo do Service Fabric</span><span class="sxs-lookup"><span data-stu-id="61a61-147">Task: Upgrade a Service Fabric application</span></span>
<span data-ttu-id="61a61-148">Você pode atualizar um aplicativo do Service Fabric implantado anteriormente com um pacote de aplicativos atualizado.</span><span class="sxs-lookup"><span data-stu-id="61a61-148">You can upgrade a previously deployed Service Fabric application with an updated application package.</span></span> <span data-ttu-id="61a61-149">Essa tarefa atualiza o aplicativo WordCount hello que foi implantado em "tarefa: implantar um aplicativo do Service Fabric."</span><span class="sxs-lookup"><span data-stu-id="61a61-149">This task upgrades hello WordCount application that was deployed in "Task: Deploy a Service Fabric application."</span></span> <span data-ttu-id="61a61-150">Leia [Atualização de aplicativos do Service Fabric](service-fabric-application-upgrade.md) para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="61a61-150">Read through [Service Fabric application upgrade](service-fabric-application-upgrade.md) for more information.</span></span>

<span data-ttu-id="61a61-151">tookeep coisas simples para este exemplo, somente Olá aplicativo número de versão foi atualizada no pacote de aplicativo hello WordCountV2 criado nos pré-requisitos hello.</span><span class="sxs-lookup"><span data-stu-id="61a61-151">tookeep things simple for this example, only hello application version number was updated in hello WordCountV2 application package created in hello prerequisites.</span></span> <span data-ttu-id="61a61-152">Um cenário mais realista envolve atualizar seus arquivos de código, configuração ou dados de serviço e, em seguida, recriação e empacotar o aplicativo hello com números de versão atualizada.</span><span class="sxs-lookup"><span data-stu-id="61a61-152">A more realistic scenario would involve updating your service code, configuration, or data files and then rebuilding and packaging hello application with updated version numbers.</span></span>  

### <a name="step-1-upload-hello-updated-application-package"></a><span data-ttu-id="61a61-153">Etapa 1: Carregar o pacote de aplicativo atualizado Olá</span><span class="sxs-lookup"><span data-stu-id="61a61-153">Step 1: Upload hello updated application package</span></span>
<span data-ttu-id="61a61-154">Olá WordCount v1 aplicativo está pronto toobe atualizado.</span><span class="sxs-lookup"><span data-stu-id="61a61-154">hello WordCount v1 application is ready toobe upgraded.</span></span> <span data-ttu-id="61a61-155">Se você abrir uma janela do PowerShell como administrador e digite [ **Get-ServiceFabricApplication**](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps), consulte a versão 1.0.0 do hello WordCount tipo de aplicativo é implantado.</span><span class="sxs-lookup"><span data-stu-id="61a61-155">If you open up a PowerShell window as administrator and type [**Get-ServiceFabricApplication**](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps), you see that version 1.0.0 of hello WordCount application type is deployed.</span></span>  

<span data-ttu-id="61a61-156">Saudação de cópia atualizado repositório de imagens de malha do serviço do aplicativo pacote toohello (onde os pacotes de aplicativos Olá são armazenados pela malha do serviço).</span><span class="sxs-lookup"><span data-stu-id="61a61-156">Now copy hello updated application package toohello Service Fabric image store (where hello application packages are stored by Service Fabric).</span></span> <span data-ttu-id="61a61-157">Olá parâmetro **ApplicationPackagePathInImageStore** informa onde ele pode localizar o pacote de aplicativo de saudação do Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="61a61-157">hello parameter **ApplicationPackagePathInImageStore** informs Service Fabric where it can find hello application package.</span></span> <span data-ttu-id="61a61-158">Olá cópias Olá pacote de aplicativo muito de comando a seguir**WordCountV2** no repositório de imagens de saudação:</span><span class="sxs-lookup"><span data-stu-id="61a61-158">hello following command copies hello application package too**WordCountV2** in hello image store:</span></span>  

```powershell
Copy-ServiceFabricApplicationPackage C:\Temp\WordCountV2\ -ImageStoreConnectionString file:C:\SfDevCluster\Data\ImageStoreShare -ApplicationPackagePathInImageStore WordCountV2

```
### <a name="step-2-register-hello-updated-application-type"></a><span data-ttu-id="61a61-159">Etapa 2: Registrar Olá atualizado o tipo de aplicativo</span><span class="sxs-lookup"><span data-stu-id="61a61-159">Step 2: Register hello updated application type</span></span>
<span data-ttu-id="61a61-160">Olá, próxima etapa é tooregister Olá nova versão do aplicativo hello com o Service Fabric, que pode ser realizada usando Olá [ServiceFabricApplicationType registro](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) cmdlet:</span><span class="sxs-lookup"><span data-stu-id="61a61-160">hello next step is tooregister hello new version of hello application with Service Fabric, which can be performed by using hello [Register-ServiceFabricApplicationType](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) cmdlet:</span></span>

```powershell
Register-ServiceFabricApplicationType WordCountV2
```

### <a name="step-3-start-hello-upgrade"></a><span data-ttu-id="61a61-161">Etapa 3: Iniciar a atualização de saudação</span><span class="sxs-lookup"><span data-stu-id="61a61-161">Step 3: Start hello upgrade</span></span>
<span data-ttu-id="61a61-162">Vários parâmetros de atualização, tempos limite e critérios de integridade podem ser aplicado tooapplication atualizações.</span><span class="sxs-lookup"><span data-stu-id="61a61-162">Various upgrade parameters, timeouts, and health criteria can be applied tooapplication upgrades.</span></span> <span data-ttu-id="61a61-163">Leia Olá [parâmetros de atualização de aplicativo](service-fabric-application-upgrade-parameters.md) e [processo de atualização](service-fabric-application-upgrade.md) documentos toolearn mais.</span><span class="sxs-lookup"><span data-stu-id="61a61-163">Read through hello [application upgrade parameters](service-fabric-application-upgrade-parameters.md) and [upgrade process](service-fabric-application-upgrade.md) documents toolearn more.</span></span> <span data-ttu-id="61a61-164">Todos os serviços e instâncias devem ser *Íntegro* após a atualização de saudação.</span><span class="sxs-lookup"><span data-stu-id="61a61-164">All services and instances should be *healthy* after hello upgrade.</span></span>  <span data-ttu-id="61a61-165">Saudação de conjunto **HealthCheckStableDuration** too60 segundos (de forma que os serviços de saudação estão íntegros pelo menos 20 segundos antes de atualização de saudação continua toohello próximo domínio de atualização).</span><span class="sxs-lookup"><span data-stu-id="61a61-165">Set hello **HealthCheckStableDuration** too60 seconds (so that hello services are healthy for at least 20 seconds before hello upgrade proceeds toohello next upgrade domain).</span></span>  <span data-ttu-id="61a61-166">Saudação de conjunto também **UpgradeDomainTimeout** too1200 segundos e Olá **UpgradeTimeout** too3000 segundos.</span><span class="sxs-lookup"><span data-stu-id="61a61-166">Also set hello **UpgradeDomainTimeout** too1200 seconds and hello **UpgradeTimeout** too3000 seconds.</span></span> <span data-ttu-id="61a61-167">Finalmente, defina Olá **UpgradeFailureAction** muito**reversão**que solicitações do Service Fabric reverte Olá versão anterior do aplicativo toohello se forem encontradas falhas durante a atualização.</span><span class="sxs-lookup"><span data-stu-id="61a61-167">Finally, set hello **UpgradeFailureAction** too**rollback**, which requests that Service Fabric rolls back hello application toohello previous version if failures are encountered during upgrade.</span></span>

<span data-ttu-id="61a61-168">Agora você pode começar a atualização do aplicativo hello usando Olá [Start-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/start-servicefabricapplicationupgrade?view=azureservicefabricps) cmdlet:</span><span class="sxs-lookup"><span data-stu-id="61a61-168">You can now start hello application upgrade by using hello [Start-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/start-servicefabricapplicationupgrade?view=azureservicefabricps) cmdlet:</span></span>

```powershell
Start-ServiceFabricApplicationUpgrade -ApplicationName fabric:/WordCount -ApplicationTypeVersion 2.0.0 -HealthCheckStableDurationSec 60 -UpgradeDomainTimeoutSec 1200 -UpgradeTimeout 3000  -FailureAction Rollback -Monitored
```

<span data-ttu-id="61a61-169">Observe que esse nome de aplicativo hello é Olá mesmo como Olá já implantou o nome do aplicativo v1.0.0 (fabric: / WordCount).</span><span class="sxs-lookup"><span data-stu-id="61a61-169">Note that hello application name is hello same as hello previously deployed v1.0.0 application name (fabric:/WordCount).</span></span> <span data-ttu-id="61a61-170">Serviço de malha usa este tooidentify nome que o aplicativo está obtendo atualizado.</span><span class="sxs-lookup"><span data-stu-id="61a61-170">Service Fabric uses this name tooidentify which application is getting upgraded.</span></span> <span data-ttu-id="61a61-171">Se você definir Olá toobe de tempos limite muito curto, você pode encontrar uma mensagem de falha de tempo limite estados Olá problema.</span><span class="sxs-lookup"><span data-stu-id="61a61-171">If you set hello time-outs toobe too short, you might encounter a time-out failure message that states hello problem.</span></span> <span data-ttu-id="61a61-172">Consulte também[solucionar problemas de atualizações de aplicativo](service-fabric-application-upgrade-troubleshooting.md), ou aumente o tempo limite de saudação.</span><span class="sxs-lookup"><span data-stu-id="61a61-172">Refer too[Troubleshoot application upgrades](service-fabric-application-upgrade-troubleshooting.md), or increase hello time-outs.</span></span>

### <a name="step-4-check-upgrade-progress"></a><span data-ttu-id="61a61-173">Etapa 4: verificar o andamento da atualização</span><span class="sxs-lookup"><span data-stu-id="61a61-173">Step 4: Check upgrade progress</span></span>
<span data-ttu-id="61a61-174">Você pode monitorar o progresso de atualização do aplicativo usando [Service Fabric Explorer](service-fabric-visualizing-your-cluster.md), ou usando Olá [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) cmdlet:</span><span class="sxs-lookup"><span data-stu-id="61a61-174">You can monitor application upgrade progress by using [Service Fabric Explorer](service-fabric-visualizing-your-cluster.md), or by using hello [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) cmdlet:</span></span>

```powershell
Get-ServiceFabricApplicationUpgrade fabric:/WordCount
```

<span data-ttu-id="61a61-175">Em alguns minutos, Olá [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) mostra que todos os domínios de atualização foram atualizados (concluído).</span><span class="sxs-lookup"><span data-stu-id="61a61-175">In a few minutes, hello [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) cmdlet shows that all upgrade domains were upgraded (completed).</span></span>

## <a name="task-test-a-service-fabric-application"></a><span data-ttu-id="61a61-176">Tarefa: testar um aplicativo do Service Fabric</span><span class="sxs-lookup"><span data-stu-id="61a61-176">Task: Test a Service Fabric application</span></span>
<span data-ttu-id="61a61-177">Serviços de alta qualidade toowrite, os desenvolvedores precisam toobe tooinduce capaz de infraestrutura confiável falhas tootest Olá estabilidade de seus serviços.</span><span class="sxs-lookup"><span data-stu-id="61a61-177">toowrite high-quality services, developers need toobe able tooinduce unreliable infrastructure faults tootest hello stability of their services.</span></span> <span data-ttu-id="61a61-178">Service Fabric fornece aos desenvolvedores de ações de falha do hello capacidade tooinduce e testar os serviços na presença de saudação de falhas usando Olá caos e failover de cenários de teste.</span><span class="sxs-lookup"><span data-stu-id="61a61-178">Service Fabric gives developers hello ability tooinduce fault actions and test services in hello presence of failures by using hello chaos and failover test scenarios.</span></span>  <span data-ttu-id="61a61-179">Leia [toohello Introdução falhas Analysis Service](service-fabric-testability-overview.md) para obter informações adicionais.</span><span class="sxs-lookup"><span data-stu-id="61a61-179">Read through [Introduction toohello Fault Analysis Service](service-fabric-testability-overview.md) for additional information.</span></span>

### <a name="step-1-run-hello-chaos-test-scenario"></a><span data-ttu-id="61a61-180">Etapa 1: Execute o cenário de teste de caos Olá</span><span class="sxs-lookup"><span data-stu-id="61a61-180">Step 1: Run hello chaos test scenario</span></span>
<span data-ttu-id="61a61-181">cenário de teste de caos Hello gera falhas em cluster do Service Fabric inteira de saudação.</span><span class="sxs-lookup"><span data-stu-id="61a61-181">hello chaos test scenario generates faults across hello entire Service Fabric cluster.</span></span> <span data-ttu-id="61a61-182">cenário de saudação compacta falhas geralmente vistas em meses ou anos tooa algumas horas.</span><span class="sxs-lookup"><span data-stu-id="61a61-182">hello scenario compresses faults generally seen over months or years tooa few hours.</span></span> <span data-ttu-id="61a61-183">combinação de saudação de falhas intercaladas com uma taxa alta de falhas de encontra casos de canto que outra forma seriam omitidos.</span><span class="sxs-lookup"><span data-stu-id="61a61-183">hello combination of interleaved faults with a high fault rate finds corner cases that would otherwise be missed.</span></span> <span data-ttu-id="61a61-184">Olá exemplo a seguir executa o cenário de teste de caos Olá por 60 minutos.</span><span class="sxs-lookup"><span data-stu-id="61a61-184">hello following example runs hello chaos test scenario for 60 minutes.</span></span>

```powershell
$timeToRun = 60
$maxStabilizationTimeSecs = 180
$concurrentFaults = 3
$waitTimeBetweenIterationsSec = 60

Invoke-ServiceFabricChaosTestScenario -TimeToRunMinute $timeToRun -MaxClusterStabilizationTimeoutSec $maxStabilizationTimeSecs -MaxConcurrentFaults $concurrentFaults -EnableMoveReplicaFaults -WaitTimeBetweenIterationsSec $waitTimeBetweenIterationsSec
```

### <a name="step-2-run-hello-failover-test-scenario"></a><span data-ttu-id="61a61-185">Etapa 2: Executar cenário de teste de failover Olá</span><span class="sxs-lookup"><span data-stu-id="61a61-185">Step 2: Run hello failover test scenario</span></span>
<span data-ttu-id="61a61-186">Olá failover uma partição de serviço específico em vez de todo o cluster Olá de destinos de cenário de teste e deixa outros serviços afetados.</span><span class="sxs-lookup"><span data-stu-id="61a61-186">hello failover test scenario targets a specific service partition instead of hello entire cluster, and it leaves other services unaffected.</span></span> <span data-ttu-id="61a61-187">cenário de saudação itera por meio de uma sequência de simulada falhas na validação de serviço durante a execução de sua lógica de negócios.</span><span class="sxs-lookup"><span data-stu-id="61a61-187">hello scenario iterates through a sequence of simulated faults in service validation while your business logic runs.</span></span> <span data-ttu-id="61a61-188">Uma falha na validação do serviço indica um problema que precisa de mais investigação.</span><span class="sxs-lookup"><span data-stu-id="61a61-188">A failure in service validation indicates an issue that needs further investigation.</span></span> <span data-ttu-id="61a61-189">teste de failover Olá induz somente uma falha de cada vez, como o cenário de teste do toohello contrário caos, que pode induzir a várias falhas.</span><span class="sxs-lookup"><span data-stu-id="61a61-189">hello failover test induces only one fault at a time, as opposed toohello chaos test scenario, which can induce multiple faults.</span></span> <span data-ttu-id="61a61-190">Olá exemplo a seguir executa teste de failover Olá por 60 minutos em relação a malha Olá: WordCount/serviço WordCountService.</span><span class="sxs-lookup"><span data-stu-id="61a61-190">hello following example runs hello failover test for 60 minutes against hello fabric:/WordCount/WordCountService service.</span></span>

```powershell
$timeToRun = 60
$maxStabilizationTimeSecs = 180
$waitTimeBetweenFaultsSec = 10
$serviceName = "fabric:/WordCount/WordCountService"

Invoke-ServiceFabricFailoverTestScenario -TimeToRunMinute $timeToRun -MaxServiceStabilizationTimeoutSec $maxStabilizationTimeSecs -WaitTimeBetweenFaultsSec $waitTimeBetweenFaultsSec -ServiceName $serviceName -PartitionKindUniformInt64 -PartitionKey 1
```

## <a name="task-remove-a-service-fabric-application"></a><span data-ttu-id="61a61-191">Tarefa: remover um aplicativo do Service Fabric</span><span class="sxs-lookup"><span data-stu-id="61a61-191">Task: Remove a Service Fabric application</span></span>
<span data-ttu-id="61a61-192">Você pode excluir uma instância de um aplicativo implantado, remover o tipo de aplicativo hello provisionado de cluster de saudação e remova o pacote de aplicativo Olá Olá ImageStore.</span><span class="sxs-lookup"><span data-stu-id="61a61-192">You can delete an instance of a deployed application, remove hello provisioned application type from hello cluster, and remove hello application package from hello ImageStore.</span></span>

### <a name="step-1-remove-an-application-instance"></a><span data-ttu-id="61a61-193">Etapa 1: Remover uma instância de aplicativo</span><span class="sxs-lookup"><span data-stu-id="61a61-193">Step 1: Remove an application instance</span></span>
<span data-ttu-id="61a61-194">Quando uma instância de aplicativo não for mais necessário, você poderá removê-lo permanentemente usando Olá [ServiceFabricApplication remover](/powershell/module/servicefabric/remove-servicefabricapplication?view=azureservicefabricps) cmdlet.</span><span class="sxs-lookup"><span data-stu-id="61a61-194">When an application instance is no longer needed, you can permanently remove it by using hello [Remove-ServiceFabricApplication](/powershell/module/servicefabric/remove-servicefabricapplication?view=azureservicefabricps) cmdlet.</span></span> <span data-ttu-id="61a61-195">Isso remove automaticamente todos os serviços pertencentes toohello aplicativo, remover permanentemente todos os estados de serviço.</span><span class="sxs-lookup"><span data-stu-id="61a61-195">This also automatically removes all services belonging toohello application, permanently removing all service state.</span></span> <span data-ttu-id="61a61-196">Essa operação não pode ser revertida e o estado do aplicativo não pode ser recuperado.</span><span class="sxs-lookup"><span data-stu-id="61a61-196">This operation cannot be reversed and application state cannot be recovered.</span></span>

```powershell
Remove-ServiceFabricApplication fabric:/WordCount
```

### <a name="step-2-unregister-hello-application-type"></a><span data-ttu-id="61a61-197">Etapa 2: Cancelar o registro do tipo de aplicativo hello</span><span class="sxs-lookup"><span data-stu-id="61a61-197">Step 2: Unregister hello application type</span></span>
<span data-ttu-id="61a61-198">Quando você não precisa mais uma versão específica de um tipo de aplicativo, cancelar seu registro usando Olá [ServiceFabricApplicationType Unregister](/powershell/module/servicefabric/unregister-servicefabricapplicationtype?view=azureservicefabricps) cmdlet.</span><span class="sxs-lookup"><span data-stu-id="61a61-198">When you no longer need a particular version of an application type, unregister it by using hello [Unregister-ServiceFabricApplicationType](/powershell/module/servicefabric/unregister-servicefabricapplicationtype?view=azureservicefabricps) cmdlet.</span></span> <span data-ttu-id="61a61-199">Cancelando o registro tipos não utilizados versões espaço de armazenamento usado pelo pacote de aplicativo hello no repositório de imagens de saudação.</span><span class="sxs-lookup"><span data-stu-id="61a61-199">Unregistering unused types releases storage space used by hello application package in hello image store.</span></span> <span data-ttu-id="61a61-200">Um tipo de aplicativo pode ter seu registro cancelado, desde que não existam aplicativos instanciados nele ou atualizações de aplicativo pendentes que façam referência a ele.</span><span class="sxs-lookup"><span data-stu-id="61a61-200">An application type can be unregistered as long as there are no applications instantiated against it or pending application upgrades referencing it.</span></span>

```powershell
Unregister-ServiceFabricApplicationType WordCount 1.0.0
```

### <a name="step-3-remove-hello-application-package"></a><span data-ttu-id="61a61-201">Etapa 3: Remover o pacote de aplicativo hello</span><span class="sxs-lookup"><span data-stu-id="61a61-201">Step 3: Remove hello application package</span></span>
<span data-ttu-id="61a61-202">Depois que o tipo de aplicativo hello for cancelado, o pacote de aplicativo de saudação pode ser removido saudação do repositório de imagens usando Olá [ServiceFabricApplicationPackage remover](/powershell/module/servicefabric/remove-servicefabricapplicationpackage?view=azureservicefabricps) cmdlet.</span><span class="sxs-lookup"><span data-stu-id="61a61-202">After hello application type is unregistered, hello application package can be removed from hello image store by using hello [Remove-ServiceFabricApplicationPackage](/powershell/module/servicefabric/remove-servicefabricapplicationpackage?view=azureservicefabricps) cmdlet.</span></span>

```powershell
Remove-ServiceFabricApplicationPackage -ImageStoreConnectionString file:C:\SfDevCluster\Data\ImageStoreShare -ApplicationPackagePathInImageStore WordCount
```

## <a name="next-steps"></a><span data-ttu-id="61a61-203">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="61a61-203">Next steps</span></span>
[<span data-ttu-id="61a61-204">Ciclo de vida do aplicativo do Service Fabric</span><span class="sxs-lookup"><span data-stu-id="61a61-204">Service Fabric application lifecycle</span></span>](service-fabric-application-lifecycle.md)

[<span data-ttu-id="61a61-205">Implantar um aplicativo</span><span class="sxs-lookup"><span data-stu-id="61a61-205">Deploy an application</span></span>](service-fabric-deploy-remove-applications.md)

[<span data-ttu-id="61a61-206">Atualização de aplicativo</span><span class="sxs-lookup"><span data-stu-id="61a61-206">Application upgrade</span></span>](service-fabric-application-upgrade.md)

[<span data-ttu-id="61a61-207">Cmdlets do Azure Service Fabric</span><span class="sxs-lookup"><span data-stu-id="61a61-207">Azure Service Fabric cmdlets</span></span>](/powershell/azure/overview?view=azureservicefabricps)

