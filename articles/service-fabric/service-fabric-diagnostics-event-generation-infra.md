---
title: "Monitoramento no nível de plataforma do Azure Service Fabric | Microsoft Docs"
description: "Saiba mais sobre eventos e logs no nível de plataforma usados para monitorar e diagnosticar clusters do Azure Service Fabric."
services: service-fabric
documentationcenter: .net
author: dkkapur
manager: timlt
editor: 
ms.assetid: 
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/24/2017
ms.author: dekapur
ms.openlocfilehash: c5857515ae8357b003f0999c4b11bd666c32bbf9
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/29/2017
---
# <a name="platform-level-event-and-log-generation"></a><span data-ttu-id="9aef8-103">Geração de eventos e logs no nível de plataforma</span><span class="sxs-lookup"><span data-stu-id="9aef8-103">Platform level event and log generation</span></span>

## <a name="monitoring-the-cluster"></a><span data-ttu-id="9aef8-104">Monitoramento de cluster</span><span class="sxs-lookup"><span data-stu-id="9aef8-104">Monitoring the cluster</span></span>

<span data-ttu-id="9aef8-105">É importante monitorar o nível de plataforma para determinar se o hardware e o cluster estão funcionando conforme esperado.</span><span class="sxs-lookup"><span data-stu-id="9aef8-105">It is important to monitor at the platform level to determine whether or not your hardware and cluster are behaving as expected.</span></span> <span data-ttu-id="9aef8-106">O Service Fabric pode ajudar a manter os aplicativos em execução durante falhas de hardware, mas você ainda precisa diagnosticar se um erro está ocorrendo em um aplicativo ou na infraestrutura subjacente.</span><span class="sxs-lookup"><span data-stu-id="9aef8-106">Though Service Fabric can keep applications running during a hardware failure, but you still need to diagnose whether an error is occurring in an application or in the underlying infrastructure.</span></span> <span data-ttu-id="9aef8-107">Você também deve monitorar os clusters para planejar melhor a capacidade, ajudando nas decisões sobre a adição ou remoção de hardware.</span><span class="sxs-lookup"><span data-stu-id="9aef8-107">You also should monitor your clusters to better plan for capacity, helping in decisions about adding or removing hardware.</span></span>

<span data-ttu-id="9aef8-108">O Service Fabric fornece cinco canais de log diferentes prontos que geram os eventos a seguir:</span><span class="sxs-lookup"><span data-stu-id="9aef8-108">Service Fabric provides five different log channels out-of-the-box that generate the following events:</span></span>

* <span data-ttu-id="9aef8-109">Canal operacional: operações de alto nível executadas pelo Service Fabric e pelo cluster, incluindo eventos para um nó surgindo, um novo aplicativo sendo implantado ou uma reversão de upgrade do SF, etc.</span><span class="sxs-lookup"><span data-stu-id="9aef8-109">Operational channel: high-level operations performed by Service Fabric and the cluster, including events for a node coming up, a new application being deployed, or a SF upgrade rollback, etc.</span></span>
* <span data-ttu-id="9aef8-110">Canal operacional – detalhado: relatórios de integridade e decisões de balanceamento de carga</span><span class="sxs-lookup"><span data-stu-id="9aef8-110">Operational channel - detailed: health reports and load balancing decisions</span></span>
* <span data-ttu-id="9aef8-111">Canal de dados e mensagens: logs e eventos críticos gerados em nosso sistema de mensagens (atualmente, apenas o ReverseProxy) e o caminho de dados (modelos de Reliable Services)</span><span class="sxs-lookup"><span data-stu-id="9aef8-111">Data & Messaging channel: critical logs and events generated in our messaging (currently only the ReverseProxy) and data path (reliable services models)</span></span>
* <span data-ttu-id="9aef8-112">Canal de dados e mensagens – detalhado: canal detalhado que contém todos os logs não críticos dos dados e das mensagens no cluster (esse canal tem um volume muito alto de eventos)</span><span class="sxs-lookup"><span data-stu-id="9aef8-112">Data & Messaging channel - detailed: verbose channel that contains all the non-critical logs from data and messaging in the cluster (this channel has a very high volume of events)</span></span>   
* <span data-ttu-id="9aef8-113">[Eventos do Reliable Services](service-fabric-reliable-services-diagnostics.md): eventos específicos do modelo de programação</span><span class="sxs-lookup"><span data-stu-id="9aef8-113">[Reliable Services events](service-fabric-reliable-services-diagnostics.md): programming model specific events</span></span>
* <span data-ttu-id="9aef8-114">[Eventos do Reliable Actors](service-fabric-reliable-actors-diagnostics.md): contadores de desempenho e eventos específicos do modelo de programação</span><span class="sxs-lookup"><span data-stu-id="9aef8-114">[Reliable Actors events](service-fabric-reliable-actors-diagnostics.md): programming model specific events and performance counters</span></span>
* <span data-ttu-id="9aef8-115">Logs de suporte: logs do sistema gerados pelo Service Fabric apenas para serem usados por nós ao fornecer suporte</span><span class="sxs-lookup"><span data-stu-id="9aef8-115">Support logs: system logs generated by Service Fabric only to be used by us when providing support</span></span>

<span data-ttu-id="9aef8-116">Esses vários canais abrangem a maior parte dos logs no nível de plataforma que são recomendados.</span><span class="sxs-lookup"><span data-stu-id="9aef8-116">These various channels cover most of the platform level logging that is recommended.</span></span> <span data-ttu-id="9aef8-117">Para melhorar o log no nível de plataforma, considere a possibilidade de investir em uma melhor compreensão do modelo de integridade e adicionar relatórios de integridade personalizados, além de adicionar **Contadores de Desempenho** personalizados para desenvolver uma compreensão em tempo real do impacto dos serviços e aplicativos no cluster.</span><span class="sxs-lookup"><span data-stu-id="9aef8-117">To improve platform level logging, consider investing in better understanding the health model and adding custom health reports, and adding custom **Performance Counters** to build a real-time understanding of the impact of your services and applications on the cluster.</span></span>

### <a name="azure-service-fabric-health-and-load-reporting"></a><span data-ttu-id="9aef8-118">Relatórios de carga e integridade do Azure Service Fabric</span><span class="sxs-lookup"><span data-stu-id="9aef8-118">Azure Service Fabric health and load reporting</span></span>

<span data-ttu-id="9aef8-119">O Service Fabric tem seu próprio modelo de integridade que é descrito em detalhes nestes artigos:</span><span class="sxs-lookup"><span data-stu-id="9aef8-119">Service Fabric has its own health model, which is described in detail in these articles:</span></span>
- [<span data-ttu-id="9aef8-120">Introdução ao monitoramento de integridade do Service Fabric</span><span class="sxs-lookup"><span data-stu-id="9aef8-120">Introduction to Service Fabric health monitoring</span></span>](service-fabric-health-introduction.md)
- [<span data-ttu-id="9aef8-121">Relatar e verificar a integridade de serviço</span><span class="sxs-lookup"><span data-stu-id="9aef8-121">Report and check service health</span></span>](service-fabric-diagnostics-how-to-report-and-check-service-health.md)
- [<span data-ttu-id="9aef8-122">Adicionar relatórios de integridade personalizados do Service Fabric</span><span class="sxs-lookup"><span data-stu-id="9aef8-122">Add custom Service Fabric health reports</span></span>](service-fabric-report-health.md)
- [<span data-ttu-id="9aef8-123">Como exibir relatórios de integridade do Service Fabric</span><span class="sxs-lookup"><span data-stu-id="9aef8-123">View Service Fabric health reports</span></span>](service-fabric-view-entities-aggregated-health.md)

<span data-ttu-id="9aef8-124">O monitoramento de integridade é fundamental para vários aspectos da operação de um serviço.</span><span class="sxs-lookup"><span data-stu-id="9aef8-124">Health monitoring is critical to multiple aspects of operating a service.</span></span> <span data-ttu-id="9aef8-125">Monitoramento de integridade é especialmente importante quando o Service Fabric executa uma atualização do aplicativo nomeado.</span><span class="sxs-lookup"><span data-stu-id="9aef8-125">Health monitoring is especially important when Service Fabric performs a named application upgrade.</span></span> <span data-ttu-id="9aef8-126">Depois de cada domínio de atualização do serviço é atualizado e está disponível para seus clientes, o domínio de atualização deve passar verificações de integridade antes da implantação passe para o próximo domínio de atualização.</span><span class="sxs-lookup"><span data-stu-id="9aef8-126">After each upgrade domain of the service is upgraded and is available to your customers, the upgrade domain must pass health checks before the deployment moves to the next upgrade domain.</span></span> <span data-ttu-id="9aef8-127">Se não for possível obter um status de integridade, a implantação será revertida, deixando o aplicativo em um bom estado conhecido novamente.</span><span class="sxs-lookup"><span data-stu-id="9aef8-127">If good health status cannot be achieved, the deployment is rolled back, so that the application is in a known, good state.</span></span> <span data-ttu-id="9aef8-128">Embora alguns clientes talvez seja afetados antes que os serviços são revertidos, a maioria dos clientes não enfrentar um problema.</span><span class="sxs-lookup"><span data-stu-id="9aef8-128">Although some customers might be affected before the services are rolled back, most customers won't experience an issue.</span></span> <span data-ttu-id="9aef8-129">Além disso, a resolução ocorreu relativamente rápido e sem precisar aguardar a ação de um operador humano.</span><span class="sxs-lookup"><span data-stu-id="9aef8-129">Also, a resolution occurs relatively quickly, and without having to wait for action from a human operator.</span></span> <span data-ttu-id="9aef8-130">Quanto mais verificações de integridade são incorporadas ao código, mais flexível será o serviço aos problemas de implantação.</span><span class="sxs-lookup"><span data-stu-id="9aef8-130">The more health checks that are incorporated into your code, the more resilient your service is to deployment issues.</span></span>

<span data-ttu-id="9aef8-131">Outro aspecto da integridade do serviço são os relatórios de métrica do serviço.</span><span class="sxs-lookup"><span data-stu-id="9aef8-131">Another aspect of service health is reporting metrics from the service.</span></span> <span data-ttu-id="9aef8-132">As métricas são importantes no Service Fabric porque eles são usados para equilibrar o uso de recursos.</span><span class="sxs-lookup"><span data-stu-id="9aef8-132">Metrics are important in Service Fabric because they are used to balance resource usage.</span></span> <span data-ttu-id="9aef8-133">As métricas também podem ser um indicador de integridade do sistema.</span><span class="sxs-lookup"><span data-stu-id="9aef8-133">Metrics also can be an indicator of system health.</span></span> <span data-ttu-id="9aef8-134">Por exemplo, você pode ter um aplicativo que tenha muitos serviços, e cada instância informa uma métrica RPS (solicitações por segundo).</span><span class="sxs-lookup"><span data-stu-id="9aef8-134">For example, you might have an application that has many services, and each instance reports a requests per second (RPS) metric.</span></span> <span data-ttu-id="9aef8-135">Se um dos serviços estiver usando mais recursos do que outro serviço, o Service Fabric moverá as instâncias de serviço pelo cluster para tentar manter a utilização de recursos uniforme.</span><span class="sxs-lookup"><span data-stu-id="9aef8-135">If one service is using more resources than another service, Service Fabric moves service instances around the cluster, to try to maintain even resource utilization.</span></span> <span data-ttu-id="9aef8-136">Para obter uma explicação mais detalhada de como funciona a utilização de recursos, consulte [gerenciar o consumo de recursos e carga na Service Fabric com métricas](service-fabric-cluster-resource-manager-metrics.md).</span><span class="sxs-lookup"><span data-stu-id="9aef8-136">For a more detailed explanation of how resource utilization works, see [Manage resource consumption and load in Service Fabric with metrics](service-fabric-cluster-resource-manager-metrics.md).</span></span>

<span data-ttu-id="9aef8-137">Métricas também podem ajudar a fornecer informações sobre o desempenho do seu serviço.</span><span class="sxs-lookup"><span data-stu-id="9aef8-137">Metrics also can help give you insight into how your service is performing.</span></span> <span data-ttu-id="9aef8-138">Ao longo do tempo, você pode usar métricas para verificar se o serviço está operando dentro dos parâmetros esperados.</span><span class="sxs-lookup"><span data-stu-id="9aef8-138">Over time, you can use metrics to check that the service is operating within expected parameters.</span></span> <span data-ttu-id="9aef8-139">Por exemplo, se as tendências mostram em 9: 00 na segunda-feira de manhã média RPS é 1.000, você pode definir um relatório de integridade que o alerta se o RPS estiver abaixo de 500 ou acima 1.500.</span><span class="sxs-lookup"><span data-stu-id="9aef8-139">For example, if trends show that at 9 AM on Monday morning the average RPS is 1,000, then you might set up a health report that alerts you if the RPS is below 500 or above 1,500.</span></span> <span data-ttu-id="9aef8-140">Tudo pode estar ocorrendo perfeitamente bem, mas pode valer a pena dar uma olhada para garantir que seus clientes estão tendo uma ótima experiência.</span><span class="sxs-lookup"><span data-stu-id="9aef8-140">Everything might be perfectly fine, but it might be worth a look to be sure that your customers are having a great experience.</span></span> <span data-ttu-id="9aef8-141">Seu serviço pode definir um conjunto de métricas que podem ser informadas para fins de verificação de integridade sem afetar o balanceamento de recursos do cluster.</span><span class="sxs-lookup"><span data-stu-id="9aef8-141">Your service can define a set of metrics that can be reported for health check purposes, but that don't affect the resource balancing of the cluster.</span></span> <span data-ttu-id="9aef8-142">Para fazer isso, defina o peso da métrica como zero.</span><span class="sxs-lookup"><span data-stu-id="9aef8-142">To do this, set the metric weight to zero.</span></span> <span data-ttu-id="9aef8-143">É recomendável que você inicie todas as métricas com peso zero e não aumente o peso até ter certeza de que você compreende como ponderar a métrica afeta o balanceamento de recursos do cluster.</span><span class="sxs-lookup"><span data-stu-id="9aef8-143">We recommend that you start all metrics with a weight of zero, and not increase the weight  until you are sure that you understand how weighting the metrics affects resource balancing for your cluster.</span></span>

> [!TIP]
> <span data-ttu-id="9aef8-144">Não use um número excessivo de métricas ponderadas.</span><span class="sxs-lookup"><span data-stu-id="9aef8-144">Don't use too many weighted metrics.</span></span> <span data-ttu-id="9aef8-145">Pode ser difícil entender por que instâncias de serviço estão sendo movidas para balanceamento.</span><span class="sxs-lookup"><span data-stu-id="9aef8-145">It can be difficult to understand why service instances are being moved around for balancing.</span></span> <span data-ttu-id="9aef8-146">Algumas métricas podem ir muito longe!</span><span class="sxs-lookup"><span data-stu-id="9aef8-146">A few metrics can go a long way!</span></span>

<span data-ttu-id="9aef8-147">Todas as informações que possam indicar a integridade e o desempenho do seu aplicativo são candidatas aos relatórios de métricas e de integridade.</span><span class="sxs-lookup"><span data-stu-id="9aef8-147">Any information that can indicate the health and performance of your application is a candidate for metrics and health reports.</span></span> <span data-ttu-id="9aef8-148">Um contador de desempenho de CPU pode dizer como seu nó é utilizado, mas não diz se um serviço em particular está íntegro ou não, porque vários serviços podem estar em execução em um único nó.</span><span class="sxs-lookup"><span data-stu-id="9aef8-148">A CPU performance counter can tell you how your node is utilized, but it doesn't tell you whether a particular service is healthy, because multiple services might be running on a single node.</span></span> <span data-ttu-id="9aef8-149">Mas, métricas como RPS, itens processados, e todos os de latência de solicitação pode indicar a integridade de um serviço específico.</span><span class="sxs-lookup"><span data-stu-id="9aef8-149">But, metrics like RPS, items processed, and request latency all can indicate the health of a specific service.</span></span>

<span data-ttu-id="9aef8-150">Para relatar a integridade, use um código semelhante a este:</span><span class="sxs-lookup"><span data-stu-id="9aef8-150">To report health, use code similar to this:</span></span>

  ```csharp
    if (!result.HasValue)
    {
        HealthInformation healthInformation = new HealthInformation("ServiceCode", "StateDictionary", HealthState.Error);
        this.Partition.ReportInstanceHealth(healthInformation);
    }
  ```

<span data-ttu-id="9aef8-151">Para relatar uma métrica, use um código semelhante a este:</span><span class="sxs-lookup"><span data-stu-id="9aef8-151">To report a metric, use code similar to this:</span></span>

  ```csharp
    this.Partition.ReportLoad(new List<LoadMetric> { new LoadMetric("MemoryInMb", 1234), new LoadMetric("metric1", 42) });
  ```

### <a name="service-fabric-support-logs"></a><span data-ttu-id="9aef8-152">Logs de suporte do Service Fabric</span><span class="sxs-lookup"><span data-stu-id="9aef8-152">Service Fabric support logs</span></span>

<span data-ttu-id="9aef8-153">Se houver necessidade de entrar em contato com o suporte da Microsoft para obter ajuda com o cluster do Azure Service Fabric, os logs de suporte serão quase sempre necessários.</span><span class="sxs-lookup"><span data-stu-id="9aef8-153">If you need to contact Microsoft support for help with your Azure Service Fabric cluster, support logs are almost always required.</span></span> <span data-ttu-id="9aef8-154">Se o cluster está hospedado no Azure, os logs de suporte são automaticamente configurados e coletados como parte da criação de um cluster.</span><span class="sxs-lookup"><span data-stu-id="9aef8-154">If your cluster is hosted in Azure, support logs are automatically configured and collected as part of creating a cluster.</span></span> <span data-ttu-id="9aef8-155">Os logs são armazenados em uma conta de armazenamento dedicada no grupo de recursos do cluster.</span><span class="sxs-lookup"><span data-stu-id="9aef8-155">The logs are stored in a dedicated storage account in your cluster's resource group.</span></span> <span data-ttu-id="9aef8-156">A conta de armazenamento não tem um nome fixo, mas na conta, você vê contêineres de blob e tabelas com nomes que começam com *malha*.</span><span class="sxs-lookup"><span data-stu-id="9aef8-156">The storage account doesn't have a fixed name, but in the account, you see blob containers and tables with names that start with *fabric*.</span></span> <span data-ttu-id="9aef8-157">Para obter informações sobre como configurar coleções de log para um cluster autônomo, consulte [criar e gerenciar um cluster de Service Fabric Azure autônomo](service-fabric-cluster-creation-for-windows-server.md) e [definições de configuração para um cluster do Windows autônoma](service-fabric-cluster-manifest.md).</span><span class="sxs-lookup"><span data-stu-id="9aef8-157">For information about setting up log collections for a standalone cluster, see [Create and manage a standalone Azure Service Fabric cluster](service-fabric-cluster-creation-for-windows-server.md) and [Configuration settings for a standalone Windows cluster](service-fabric-cluster-manifest.md).</span></span> <span data-ttu-id="9aef8-158">Para instâncias autônomas do Service Fabric, os logs devem ser enviados para um compartilhamento de arquivos local.</span><span class="sxs-lookup"><span data-stu-id="9aef8-158">For standalone Service Fabric instances, the logs should be sent to a local file share.</span></span> <span data-ttu-id="9aef8-159">Você **deve** ter esses logs em mãos para o suporte, mas eles não serão utilizados por qualquer pessoa que não faça parte da equipe de suporte ao cliente da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="9aef8-159">You are **required** to have these logs for support, but they are not intended to be usable by anyone outside of the Microsoft customer support team.</span></span>

## <a name="enabling-diagnostics-for-a-cluster"></a><span data-ttu-id="9aef8-160">Habilitar o diagnóstico para um cluster</span><span class="sxs-lookup"><span data-stu-id="9aef8-160">Enabling Diagnostics for a cluster</span></span>

<span data-ttu-id="9aef8-161">Para tirar proveito desses logs, é altamente recomendável que, durante a criação do cluster, o "Diagnóstico" seja habilitado.</span><span class="sxs-lookup"><span data-stu-id="9aef8-161">In order to take advantage of these logs, it is highly recommended that during cluster creation, "Diagnostics" is enabled.</span></span> <span data-ttu-id="9aef8-162">Ao ativar o diagnóstico, quando o cluster é implantado, o Diagnóstico do Microsoft Azure pode reconhecer os canais Operacional, do Reliable Services e do Reliable Actors, e armazenar os dados, conforme explicado mais detalhadamente em [Eventos agregados com o Diagnóstico do Azure](service-fabric-diagnostics-event-aggregation-wad.md).</span><span class="sxs-lookup"><span data-stu-id="9aef8-162">By turning on diagnostics, when the cluster is deployed, Windows Azure Diagnostics is able to acknowledge the Operational, Reliable Services, and Reliable actors channels, and store the data as explained further in [Aggregate events with Azure Diagnostics](service-fabric-diagnostics-event-aggregation-wad.md).</span></span>

<span data-ttu-id="9aef8-163">Como visto acima, há também um campo opcional para adicionar uma chave de instrumentação do AI (Application Insights).</span><span class="sxs-lookup"><span data-stu-id="9aef8-163">As seen above, there is also an optional field to add an Application Insights (AI) instrumentation key.</span></span> <span data-ttu-id="9aef8-164">Se você optar por usar o AI para a análise de eventos (leia mais sobre isso em [Análise de eventos com o Application Insights](service-fabric-diagnostics-event-analysis-appinsights.md)), inclua o recurso instrumentationKey (GUID) do AppInsights aqui.</span><span class="sxs-lookup"><span data-stu-id="9aef8-164">If you choose to use AI for any event analysis (read more about this in [Event Analysis with Application Insights](service-fabric-diagnostics-event-analysis-appinsights.md)), include the AppInsights resource instrumentationKey (GUID) here.</span></span>


<span data-ttu-id="9aef8-165">Se você pretende implantar contêineres para seu cluster, habilite o WAD para acompanhar as estatísticas do docker adicionando eles ao seu "WadCfg > DiagnosticMonitorConfiguration":</span><span class="sxs-lookup"><span data-stu-id="9aef8-165">If you are going to deploy containers to your cluster, enable WAD to pick up docker stats by adding this to your "WadCfg > DiagnosticMonitorConfiguration":</span></span>

```json
"DockerSources": {
    "Stats": {
        "enabled": true,
        "sampleRate": "PT1M"
    }
},

```

## <a name="measuring-performance"></a><span data-ttu-id="9aef8-166">Medir o desempenho</span><span class="sxs-lookup"><span data-stu-id="9aef8-166">Measuring performance</span></span>

<span data-ttu-id="9aef8-167">A medição do desempenho do cluster ajudará você a entender como ele pode manipular a carga e tomar decisões relacionadas ao dimensionamento do cluster (veja mais sobre como dimensionar um cluster [no Azure](service-fabric-cluster-scale-up-down.md) ou [localmente](service-fabric-cluster-windows-server-add-remove-nodes.md)).</span><span class="sxs-lookup"><span data-stu-id="9aef8-167">Measure performance of your cluster will help you understand how it is able to handle load and drive decisions around scaling your cluster (see more about scaling a cluster [on Azure](service-fabric-cluster-scale-up-down.md), or [on-premises](service-fabric-cluster-windows-server-add-remove-nodes.md)).</span></span> <span data-ttu-id="9aef8-168">Os dados de desempenho também são úteis quando comparados às ações que você ou seus aplicativos e serviços podem obter ao analisar logs no futuro.</span><span class="sxs-lookup"><span data-stu-id="9aef8-168">Performance data is also useful when compared to actions you or your applications and services may have taken, when analyzing logs in the future.</span></span> 

<span data-ttu-id="9aef8-169">Para obter uma lista de contadores de desempenho para coleta ao usar o Service Fabric, consulte [Contadores de desempenho no Service Fabric](service-fabric-diagnostics-event-generation-perf.md)</span><span class="sxs-lookup"><span data-stu-id="9aef8-169">For a list of performance counters to collect when using Service Fabric, see [Performance Counters in Service Fabric](service-fabric-diagnostics-event-generation-perf.md)</span></span>

<span data-ttu-id="9aef8-170">Aqui estão duas maneiras com as quais você pode configurar a coleta de dados de desempenho para o cluster:</span><span class="sxs-lookup"><span data-stu-id="9aef8-170">Here are two common ways in which you can set up collecting performance data for your cluster:</span></span>

* <span data-ttu-id="9aef8-171">Usando um agente: essa é a maneira preferida de coleta de desempenho de um computador, desde que os agentes geralmente tenham uma lista de possíveis métricas de desempenho que podem ser coletadas e é um processo relativamente fácil para escolher as métricas que você deseja coletar ou alterá-las.</span><span class="sxs-lookup"><span data-stu-id="9aef8-171">Using an agent: this is the preferred way of collecting performance from a machine, since agents usually have a list of possible performance metrics that can be collected, and it is a relatively easy process to choose the metrics you want to collect or change them.</span></span> <span data-ttu-id="9aef8-172">Leia sobre os artigos [Como configurar o OMS para o Service Fabric](service-fabric-diagnostics-event-analysis-oms.md) e [Configurando o agente do OMS Windows](../log-analytics/log-analytics-windows-agents.md) para saber mais sobre o agente do OMS, que é um agente de monitoramento que é capaz de obter dados de desempenho para as VMs do cluster e contêineres implantados.</span><span class="sxs-lookup"><span data-stu-id="9aef8-172">Read about [how to configure the OMS for Service Fabric](service-fabric-diagnostics-event-analysis-oms.md) and [Setting up the OMS Windows Agent](../log-analytics/log-analytics-windows-agents.md) articles to learn more about the OMS agent, which is one such monitoring agent that is able to pick up performance data for cluster VMs and deployed containers.</span></span>

* <span data-ttu-id="9aef8-173">Configurar o diagnóstico para gravar contadores de desempenho em uma tabela: para clusters no Azure, isso significa alterar a configuração de Diagnóstico do Azure para acompanhar os contadores de desempenho apropriadas das VMs no cluster e habilitá-la para acompanhar as estatísticas do docker se você estiver implantando qualquer contêiner.</span><span class="sxs-lookup"><span data-stu-id="9aef8-173">Configuring diagnostics to write performance counters to a table: for clusters on Azure, this means changing the Azure Diagnostics configuration to pick up the appropriate performance counters from the VMs in your cluster, and enabling it to pick up docker stats if you will be deploying any containers.</span></span> <span data-ttu-id="9aef8-174">Leia sobre como configurar os [Contadores de desempenho no WAD](service-fabric-diagnostics-event-aggregation-wad.md) no Service Fabric para configurar a coleta do contador de desempenho.</span><span class="sxs-lookup"><span data-stu-id="9aef8-174">Read about configuring [Performance Counters in WAD](service-fabric-diagnostics-event-aggregation-wad.md) in Service Fabric to set up performance counter collection.</span></span>

## <a name="next-steps"></a><span data-ttu-id="9aef8-175">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="9aef8-175">Next steps</span></span>

<span data-ttu-id="9aef8-176">Seus logs e eventos precisam ser agregados antes que eles possam ser enviados para qualquer plataforma de análise.</span><span class="sxs-lookup"><span data-stu-id="9aef8-176">Your logs and events need to be aggregated before they can be sent to any analysis platform.</span></span> <span data-ttu-id="9aef8-177">Leia sobre o [EventFlow](service-fabric-diagnostics-event-aggregation-eventflow.md) e o [WAD](service-fabric-diagnostics-event-aggregation-wad.md) para entender melhor algumas das opções recomendadas.</span><span class="sxs-lookup"><span data-stu-id="9aef8-177">Read about [EventFlow](service-fabric-diagnostics-event-aggregation-eventflow.md) and [WAD](service-fabric-diagnostics-event-aggregation-wad.md) to better understand some of the recommended options.</span></span>
