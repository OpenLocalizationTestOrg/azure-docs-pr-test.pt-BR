---
title: "aaaThrottling no Gerenciador de recursos de cluster Olá Service Fabric | Microsoft Docs"
description: "Saiba mais Aceleradores de saudação tooconfigure fornecidos pelo Gerenciador de recursos de Cluster do serviço de malha de saudação."
services: service-fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: 
ms.assetid: 4a44678b-a5aa-4d30-958f-dc4332ebfb63
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/18/2017
ms.author: masnider
ms.openlocfilehash: f418536911d3e3814e78a4d9f057dfb867ca7c63
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="throttling-hello-service-fabric-cluster-resource-manager"></a><span data-ttu-id="86846-103">Olá limitação Gerenciador de recursos de Cluster do serviço de malha</span><span class="sxs-lookup"><span data-stu-id="86846-103">Throttling hello Service Fabric Cluster Resource Manager</span></span>
<span data-ttu-id="86846-104">Mesmo se você configurou corretamente o hello Gerenciador de recursos de Cluster, cluster Olá pode obter interrompida.</span><span class="sxs-lookup"><span data-stu-id="86846-104">Even if you’ve configured hello Cluster Resource Manager correctly, hello cluster can get disrupted.</span></span> <span data-ttu-id="86846-105">Por exemplo, pode haver falha e nó de domínio falhas simultâneas - o que aconteceria se o que ocorreu durante uma atualização? Olá Gerenciador de recursos de Cluster sempre tenta toofix tudo, consumindo recursos do cluster Olá tentar tooreorganize e correção de cluster de saudação.</span><span class="sxs-lookup"><span data-stu-id="86846-105">For example, there could be simultaneous node and fault domain failures - what would happen if that occurred during an upgrade? hello Cluster Resource Manager always tries toofix everything, consuming hello cluster's resources trying tooreorganize and fix hello cluster.</span></span> <span data-ttu-id="86846-106">Limitadores ajudam a fornecer uma barreira para que o cluster Olá pode usar recursos toostabilize - nós Olá voltar, partições de rede Olá reparar, corrigidos bits implantados.</span><span class="sxs-lookup"><span data-stu-id="86846-106">Throttles help provide a backstop so that hello cluster can use resources toostabilize - hello nodes come back, hello network partitions heal, corrected bits get deployed.</span></span>

<span data-ttu-id="86846-107">toohelp com esses tipos de situações, Olá Gerenciador de recursos de Cluster do serviço de malha inclui várias limitações.</span><span class="sxs-lookup"><span data-stu-id="86846-107">toohelp with these sorts of situations, hello Service Fabric Cluster Resource Manager includes several throttles.</span></span> <span data-ttu-id="86846-108">Essas restrições são exigências razoavelmente grandes.</span><span class="sxs-lookup"><span data-stu-id="86846-108">These throttles are all fairly large hammers.</span></span> <span data-ttu-id="86846-109">Em geral, elas não devem ser alteradas sem planejamento e teste cuidadosos.</span><span class="sxs-lookup"><span data-stu-id="86846-109">Generally they shouldn’t be changed without careful planning and testing.</span></span>

<span data-ttu-id="86846-110">Se você alterar Aceleradores do Gerenciador de recursos do Cluster hello, você deverá ajustá-las carga real esperado de tooyour.</span><span class="sxs-lookup"><span data-stu-id="86846-110">If you change hello Cluster Resource Manager's throttles, you should tune them tooyour expected actual load.</span></span> <span data-ttu-id="86846-111">Você pode determinar que você precisa toohave alguns limita em vigor, mesmo se isso significar cluster Olá leva mais tempo toostabilize em algumas situações.</span><span class="sxs-lookup"><span data-stu-id="86846-111">You may determine you need toohave some throttles in place, even if it means hello cluster takes longer toostabilize in some situations.</span></span> <span data-ttu-id="86846-112">O teste é necessário toodetermine Olá correto valores limitadores.</span><span class="sxs-lookup"><span data-stu-id="86846-112">Testing is required toodetermine hello correct values for throttles.</span></span> <span data-ttu-id="86846-113">Limitadores precisam toobe tooallow alta o suficiente Olá cluster toorespond toochanges em um período de tempo razoável e baixo suficiente tooactually impedir muito o consumo de recursos.</span><span class="sxs-lookup"><span data-stu-id="86846-113">Throttles need toobe high enough tooallow hello cluster toorespond toochanges in a reasonable amount of time, and low enough tooactually prevent too much resource consumption.</span></span> 

<span data-ttu-id="86846-114">A maioria dos que vimos clientes de tempo de saudação usa limitadores foi porque já estavam em um ambiente de recurso restrito.</span><span class="sxs-lookup"><span data-stu-id="86846-114">Most of hello time we’ve seen customers use throttles it has been because they were already in a resource constrained environment.</span></span> <span data-ttu-id="86846-115">Alguns exemplos seriam largura de banda de rede limitada para nós individuais ou discos que não são toobuild capaz de várias réplicas com monitoração de estado em paralelo devido a limitações de toothroughput.</span><span class="sxs-lookup"><span data-stu-id="86846-115">Some examples would be limited network bandwidth for individual nodes, or disks that aren't able toobuild many stateful replicas in parallel due toothroughput limitations.</span></span> <span data-ttu-id="86846-116">Sem limitações, as operações podem sobrecarregar esses recursos, fazendo com que as operações toofail ou lenta.</span><span class="sxs-lookup"><span data-stu-id="86846-116">Without throttles, operations could overwhelm these resources, causing operations toofail or be slow.</span></span> <span data-ttu-id="86846-117">Nessas situações clientes usado limitadores em soubessem que eles foram estendendo a quantidade de saudação do tempo gasto Olá cluster tooreach um estado estável.</span><span class="sxs-lookup"><span data-stu-id="86846-117">In these situations customers used throttles and knew they were extending hello amount of time it would take hello cluster tooreach a stable state.</span></span> <span data-ttu-id="86846-118">Os clientes também entendiam que poderiam acabar executando com uma confiabilidade geral menor enquanto estivessem restritos.</span><span class="sxs-lookup"><span data-stu-id="86846-118">Customers also understood they could end up running at lower overall reliability while they were throttled.</span></span>


## <a name="configuring-hello-throttles"></a><span data-ttu-id="86846-119">Configurando Olá limita</span><span class="sxs-lookup"><span data-stu-id="86846-119">Configuring hello throttles</span></span>

<span data-ttu-id="86846-120">Serviço de malha possui dois mecanismos para limitação do número de saudação de movimentações de réplica.</span><span class="sxs-lookup"><span data-stu-id="86846-120">Service Fabric has two mechanisms for throttling hello number of replica movements.</span></span> <span data-ttu-id="86846-121">mecanismo de padrão de saudação que existia antes do serviço de malha 5.7 representa limitação como um número absoluto de movimentações permitido.</span><span class="sxs-lookup"><span data-stu-id="86846-121">hello default mechanism that existed before Service Fabric 5.7 represents throttling as an absolute number of moves allowed.</span></span> <span data-ttu-id="86846-122">Isso não funciona para clusters de todos os tamanhos.</span><span class="sxs-lookup"><span data-stu-id="86846-122">This does not work for clusters of all sizes.</span></span> <span data-ttu-id="86846-123">Em particular, para o padrão de saudação grandes clusters valor pode ser muito pequeno, diminuir significativamente balanceamento mesmo quando é necessário, embora não tenha nenhum efeito em clusters menores.</span><span class="sxs-lookup"><span data-stu-id="86846-123">In particular, for large clusters hello default value can be too small, significantly slowing down balancing even when it is necessary, while having no effect in smaller clusters.</span></span> <span data-ttu-id="86846-124">Esse mecanismo anterior foi substituído pelo baseadas em porcentagens de limitação, que oferece melhor escalabilidade com clusters dinâmicos no qual número de saudação de serviços e nós alteram regularmente.</span><span class="sxs-lookup"><span data-stu-id="86846-124">This prior mechanism has been superseded by percentage-based throttling, which scales better with dynamic clusters in which hello number of services and nodes change regularly.</span></span>

<span data-ttu-id="86846-125">Olá limitadores baseiam-se em uma porcentagem do número de saudação de réplicas em clusters de saudação.</span><span class="sxs-lookup"><span data-stu-id="86846-125">hello throttles are based on a percentage of hello number of replicas in hello clusters.</span></span> <span data-ttu-id="86846-126">Percetage com base em limitadores Habilitar regra de saudação expressar: "não mova mais de 10% das réplicas em um intervalo de 10 minutos", por exemplo.</span><span class="sxs-lookup"><span data-stu-id="86846-126">Percetage based throttles enable expressing hello rule: "do not move more than 10% of replicas in a 10 minute interval", for example.</span></span>

<span data-ttu-id="86846-127">Olá as configurações baseadas em porcentagens limitação estão:</span><span class="sxs-lookup"><span data-stu-id="86846-127">hello configuration settings for percentage-based throttling are:</span></span>

  - <span data-ttu-id="86846-128">GlobalMovementThrottleThresholdPercentage - o número máximo de movimentações permitido no cluster a qualquer momento, expresso como porcentagem do número total de réplicas em cluster hello.</span><span class="sxs-lookup"><span data-stu-id="86846-128">GlobalMovementThrottleThresholdPercentage - Maximum number of movements allowed in cluster at any time, expressed as percentage of total number of replicas in hello cluster.</span></span> <span data-ttu-id="86846-129">0 indica nenhum limite.</span><span class="sxs-lookup"><span data-stu-id="86846-129">0 indicates no limit.</span></span> <span data-ttu-id="86846-130">valor padrão de saudação é 0.</span><span class="sxs-lookup"><span data-stu-id="86846-130">hello default value is 0.</span></span> <span data-ttu-id="86846-131">Se essa configuração e o GlobalMovementThrottleThreshold forem especificados, em seguida, hello limite mais conservador é usado.</span><span class="sxs-lookup"><span data-stu-id="86846-131">If both this setting and GlobalMovementThrottleThreshold are specified, then hello more conservative limit is used.</span></span>
  - <span data-ttu-id="86846-132">GlobalMovementThrottleThresholdPercentageForPlacement - o número máximo de movimentações permitido durante a fase de posicionamento hello, expresso como porcentagem do número total de réplicas em cluster hello.</span><span class="sxs-lookup"><span data-stu-id="86846-132">GlobalMovementThrottleThresholdPercentageForPlacement - Maximum number of movements allowed during hello placement phase, expressed as percentage of total number of replicas in hello cluster.</span></span> <span data-ttu-id="86846-133">0 indica nenhum limite.</span><span class="sxs-lookup"><span data-stu-id="86846-133">0 indicates no limit.</span></span> <span data-ttu-id="86846-134">valor padrão de saudação é 0.</span><span class="sxs-lookup"><span data-stu-id="86846-134">hello default value is 0.</span></span> <span data-ttu-id="86846-135">Se essa configuração e o GlobalMovementThrottleThresholdForPlacement forem especificados, em seguida, hello limite mais conservador é usado.</span><span class="sxs-lookup"><span data-stu-id="86846-135">If both this setting and GlobalMovementThrottleThresholdForPlacement are specified, then hello more conservative limit is used.</span></span>
  - <span data-ttu-id="86846-136">GlobalMovementThrottleThresholdPercentageForBalancing - o número máximo de movimentações permitido durante a saudação balanceamento fase, expressada como porcentagem do número total de réplicas em cluster hello.</span><span class="sxs-lookup"><span data-stu-id="86846-136">GlobalMovementThrottleThresholdPercentageForBalancing - Maximum number of movements allowed during hello balancing phase, expressed as percentage of total number of replicas in hello cluster.</span></span> <span data-ttu-id="86846-137">0 indica nenhum limite.</span><span class="sxs-lookup"><span data-stu-id="86846-137">0 indicates no limit.</span></span> <span data-ttu-id="86846-138">valor padrão de saudação é 0.</span><span class="sxs-lookup"><span data-stu-id="86846-138">hello default value is 0.</span></span> <span data-ttu-id="86846-139">Se essa configuração e o GlobalMovementThrottleThresholdForBalancing forem especificados, em seguida, hello limite mais conservador é usado.</span><span class="sxs-lookup"><span data-stu-id="86846-139">If both this setting and GlobalMovementThrottleThresholdForBalancing are specified, then hello more conservative limit is used.</span></span>

<span data-ttu-id="86846-140">Ao especificar o percentual de acelerador hello, você deve especificar % 5 como 0,05.</span><span class="sxs-lookup"><span data-stu-id="86846-140">When specifying hello throttle percentage, you'd specify 5% as 0.05.</span></span> <span data-ttu-id="86846-141">intervalo de saudação nos quais essas limitações são governadas é hello GlobalMovementThrottleCountingInterval, que é especificado em segundos.</span><span class="sxs-lookup"><span data-stu-id="86846-141">hello interval on which these throttles are governed is hello GlobalMovementThrottleCountingInterval, which is specified in seconds.</span></span>


``` xml
<Section Name="PlacementAndLoadBalancing">
     <Parameter Name="GlobalMovementThrottleThresholdPercentage" Value="0" />
     <Parameter Name="GlobalMovementThrottleThresholdPercentageForPlacement" Value="0" />
     <Parameter Name="GlobalMovementThrottleThresholdPercentageForBalancing" Value="0" />
     <Parameter Name="GlobalMovementThrottleCountingInterval" Value="600" />
</Section>
```

<span data-ttu-id="86846-142">via ClusterConfig.json para implantações Autônomas ou Template.json para clusters hospedados pelo Azure:</span><span class="sxs-lookup"><span data-stu-id="86846-142">via ClusterConfig.json for Standalone deployments or Template.json for Azure hosted clusters:</span></span>

```json
"fabricSettings": [
  {
    "name": "PlacementAndLoadBalancing",
    "parameters": [
      {
          "name": "GlobalMovementThrottleThresholdPercentage",
          "value": "0.0"
      },
      {
          "name": "GlobalMovementThrottleThresholdPercentageForPlacement",
          "value": "0.0"
      },
      {
          "name": "GlobalMovementThrottleThresholdPercentageForBalancing",
          "value": "0.0"
      },
      {
          "name": "GlobalMovementThrottleCountingInterval",
          "value": "600"
      }
    ]
  }
]
```

### <a name="default-count-based-throttles"></a><span data-ttu-id="86846-143">Restrições baseadas em contagem padrão</span><span class="sxs-lookup"><span data-stu-id="86846-143">Default count based throttles</span></span>
<span data-ttu-id="86846-144">Essas informações são fornecidas para o caso em que você tenha clusters mais antigos ou ainda retenha essas configurações em clusters que foram atualizados desde então.</span><span class="sxs-lookup"><span data-stu-id="86846-144">This information is provided in case you have older clusters or still retain these configurations in clusters that have since been upgraded.</span></span> <span data-ttu-id="86846-145">Em geral, é recomendável que elas são substituídas com aceleradores de baseadas em porcentagens do hello acima.</span><span class="sxs-lookup"><span data-stu-id="86846-145">In general, it is recommended that these are replaced with hello percentage-based throttles above.</span></span> <span data-ttu-id="86846-146">Desde que baseadas em porcentagens de limitação é desabilitada por padrão, essas limitações permanecem Olá aceleradores de padrão para um cluster até que eles estão desabilitados e substituídos por limitadores baseadas em porcentagens de saudação.</span><span class="sxs-lookup"><span data-stu-id="86846-146">Since percentage-based throttling is disabled by default, these throttles remain hello default throttles for a cluster until they are disabled and replaced with hello percentage-based throttles.</span></span> 

  - <span data-ttu-id="86846-147">GlobalMovementThrottleThreshold – essa configuração controla o número total de saudação de movimentações de cluster Olá por algum tempo.</span><span class="sxs-lookup"><span data-stu-id="86846-147">GlobalMovementThrottleThreshold – this setting controls hello total number of movements in hello cluster over some time.</span></span> <span data-ttu-id="86846-148">tempo total de saudação é especificado em segundos como Olá GlobalMovementThrottleCountingInterval.</span><span class="sxs-lookup"><span data-stu-id="86846-148">hello amount of time is specified in seconds as hello GlobalMovementThrottleCountingInterval.</span></span> <span data-ttu-id="86846-149">valor padrão Olá Olá GlobalMovementThrottleThreshold é 1000 e valor padrão Olá Olá GlobalMovementThrottleCountingInterval é 600.</span><span class="sxs-lookup"><span data-stu-id="86846-149">hello default value for hello GlobalMovementThrottleThreshold is 1000 and hello default value for hello GlobalMovementThrottleCountingInterval is 600.</span></span>
  - <span data-ttu-id="86846-150">MovementPerPartitionThrottleThreshold – essa configuração controla o número total de saudação de movimentações de qualquer partição de serviço por algum tempo.</span><span class="sxs-lookup"><span data-stu-id="86846-150">MovementPerPartitionThrottleThreshold – this setting controls hello total number of movements for any service partition over some time.</span></span> <span data-ttu-id="86846-151">tempo total de saudação é especificado em segundos como Olá MovementPerPartitionThrottleCountingInterval.</span><span class="sxs-lookup"><span data-stu-id="86846-151">hello amount of time is specified in seconds as hello MovementPerPartitionThrottleCountingInterval.</span></span> <span data-ttu-id="86846-152">valor padrão Olá Olá MovementPerPartitionThrottleThreshold é 50 e valor padrão Olá Olá MovementPerPartitionThrottleCountingInterval é 600.</span><span class="sxs-lookup"><span data-stu-id="86846-152">hello default value for hello MovementPerPartitionThrottleThreshold is 50 and hello default value for hello MovementPerPartitionThrottleCountingInterval is 600.</span></span>

<span data-ttu-id="86846-153">configuração de saudação para esses Aceleradores segue Olá mesmo padrão como Olá baseadas em porcentagens de limitação.</span><span class="sxs-lookup"><span data-stu-id="86846-153">hello configuration for these throttles follows hello same pattern as hello percentage-based throttling.</span></span>

## <a name="next-steps"></a><span data-ttu-id="86846-154">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="86846-154">Next steps</span></span>
- <span data-ttu-id="86846-155">toofind out sobre como Olá Gerenciador de recursos de Cluster gerencia e equilibra a carga no cluster hello, check-out artigo Olá em [balanceamento de carga](service-fabric-cluster-resource-manager-balancing.md)</span><span class="sxs-lookup"><span data-stu-id="86846-155">toofind out about how hello Cluster Resource Manager manages and balances load in hello cluster, check out hello article on [balancing load](service-fabric-cluster-resource-manager-balancing.md)</span></span>
- <span data-ttu-id="86846-156">Olá Gerenciador de recursos de Cluster tem muitas opções para descrever o cluster hello.</span><span class="sxs-lookup"><span data-stu-id="86846-156">hello Cluster Resource Manager has many options for describing hello cluster.</span></span> <span data-ttu-id="86846-157">toofind mais sobre eles, leia este artigo em [que descreve um cluster do Service Fabric](service-fabric-cluster-resource-manager-cluster-description.md)</span><span class="sxs-lookup"><span data-stu-id="86846-157">toofind out more about them, check out this article on [describing a Service Fabric cluster](service-fabric-cluster-resource-manager-cluster-description.md)</span></span>
