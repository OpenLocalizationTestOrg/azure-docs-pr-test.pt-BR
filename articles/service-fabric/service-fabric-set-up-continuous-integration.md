---
title: "Configurar a integração contínua dos microsserviços do Azure | Microsoft Docs"
description: "Obtenha uma visão geral de como configurar a integração contínua e a implantação para um aplicativo do Service Fabric usando o VSTS (Visual Studio Team Services)."
services: service-fabric
documentationcenter: na
author: mthalman-msft
manager: timlt
editor: 
ms.assetid: 3e8c2290-9e7a-456a-9b2c-db44d1b3988d
ms.service: multiple
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: multiple
ms.date: 12/06/2016
ms.author: mthalman;mikhegn
ms.openlocfilehash: 76a1e013e824910c7a489e345b6563ae3951378f
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/11/2017
---
# <a name="set-up-service-fabric-continuous-integration-and-deployment-with-visual-studio-team-services"></a><span data-ttu-id="c57f4-103">Configurar a implantação e integração contínua do Service Fabric com o Visual Studio Team Services</span><span class="sxs-lookup"><span data-stu-id="c57f4-103">Set up Service Fabric continuous integration and deployment with Visual Studio Team Services</span></span>
<span data-ttu-id="c57f4-104">Este artigo descreve as etapas para configurar a integração contínua e a implantação para um aplicativo do Azure Service Fabric usando o VSTS (Visual Studio Team Services).</span><span class="sxs-lookup"><span data-stu-id="c57f4-104">This article describes the steps to set up continuous integration and deployment for an Azure Service Fabric application by using Visual Studio Team Services (VSTS).</span></span>

<span data-ttu-id="c57f4-105">Este documento reflete o procedimento atual e deve ser alterado ao longo do tempo.</span><span class="sxs-lookup"><span data-stu-id="c57f4-105">This document reflects the current procedure and is expected to change over time.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="c57f4-106">Pré-requisitos</span><span class="sxs-lookup"><span data-stu-id="c57f4-106">Prerequisites</span></span>
<span data-ttu-id="c57f4-107">Siga estas etapas para começar:</span><span class="sxs-lookup"><span data-stu-id="c57f4-107">To get started, follow these steps:</span></span>

1. <span data-ttu-id="c57f4-108">Verifique se você tem acesso a uma conta do Team Services ou [crie uma](https://www.visualstudio.com/docs/setup-admin/team-services/sign-up-for-visual-studio-team-services) por conta própria.</span><span class="sxs-lookup"><span data-stu-id="c57f4-108">Ensure that you have access to a Team Services account or [create one](https://www.visualstudio.com/docs/setup-admin/team-services/sign-up-for-visual-studio-team-services) yourself.</span></span>
2. <span data-ttu-id="c57f4-109">Verifique se você tem acesso a um projeto de equipe do Team Services ou [crie um](https://www.visualstudio.com/docs/setup-admin/create-team-project) por conta própria.</span><span class="sxs-lookup"><span data-stu-id="c57f4-109">Ensure that you have access to a Team Services team project or [create one](https://www.visualstudio.com/docs/setup-admin/create-team-project) yourself.</span></span>
3. <span data-ttu-id="c57f4-110">Verifique se você tem um cluster do Service Fabric no qual pode implantar seu aplicativo ou crie um usando o [Portal do Azure](service-fabric-cluster-creation-via-portal.md), um [Modelo do Azure Resource Manager](service-fabric-cluster-creation-via-arm.md) ou o [Visual Studio](service-fabric-cluster-creation-via-visual-studio.md).</span><span class="sxs-lookup"><span data-stu-id="c57f4-110">Ensure that you have a Service Fabric cluster to which you can deploy your application or create one using the [Azure portal](service-fabric-cluster-creation-via-portal.md), an [Azure Resource Manager template](service-fabric-cluster-creation-via-arm.md), or [Visual Studio](service-fabric-cluster-creation-via-visual-studio.md).</span></span>
4. <span data-ttu-id="c57f4-111">Certifique-se de que você já tenha criado um projeto do Aplicativo do Service Fabric (.sfproj).</span><span class="sxs-lookup"><span data-stu-id="c57f4-111">Ensure that you have already created a Service Fabric Application (.sfproj) project.</span></span> <span data-ttu-id="c57f4-112">Você deve ter um projeto que foi criado ou atualizado com o Service Fabric SDK 2.1 ou superior (o arquivo de .sfproj deve conter um valor da propriedade ProjectVersion 1.1 ou superior).</span><span class="sxs-lookup"><span data-stu-id="c57f4-112">You must have a project that was created or upgraded with Service Fabric SDK 2.1 or higher (the .sfproj file should contain a ProjectVersion property value of 1.1 or higher).</span></span>

> [!NOTE]
> <span data-ttu-id="c57f4-113">Agentes de build personalizado não são mais necessários.</span><span class="sxs-lookup"><span data-stu-id="c57f4-113">Custom build agents are no longer required.</span></span> <span data-ttu-id="c57f4-114">Os agentes hospedados do Team Services agora têm o software de gerenciamento de cluster do Service Fabric pré-instalado, permitindo a implantação de seus aplicativos diretamente de agentes.</span><span class="sxs-lookup"><span data-stu-id="c57f4-114">Team Services hosted agents now come pre-installed with Service Fabric cluster management software, allowing for deployment of your applications directly from those agents.</span></span>
> 
> 

## <a name="configure-and-share-your-source-files"></a><span data-ttu-id="c57f4-115">Configurar e compartilhar seus arquivos de origem</span><span class="sxs-lookup"><span data-stu-id="c57f4-115">Configure and share your source files</span></span>
<span data-ttu-id="c57f4-116">A primeira coisa que você deve fazer é preparar um perfil de publicação para ser usado pelo processo de implantação executado no Team Services.</span><span class="sxs-lookup"><span data-stu-id="c57f4-116">The first thing you want to do is prepare a publish profile for use by the deployment process that executes within Team Services.</span></span>  <span data-ttu-id="c57f4-117">O perfil de publicação deve ser configurado para direcionar o cluster que você preparou anteriormente:</span><span class="sxs-lookup"><span data-stu-id="c57f4-117">The publish profile should be configured to target the cluster that you've previously prepared:</span></span>

1. <span data-ttu-id="c57f4-118">Escolha um perfil de publicação no projeto de Aplicativo que você deseja usar para o fluxo de trabalho de integração contínua.</span><span class="sxs-lookup"><span data-stu-id="c57f4-118">Choose a publish profile within your Application project that you want to use for your continuous integration workflow.</span></span> <span data-ttu-id="c57f4-119">Siga as [instruções de publicação](service-fabric-publish-app-remote-cluster.md) sobre como publicar um aplicativo em um cluster remoto.</span><span class="sxs-lookup"><span data-stu-id="c57f4-119">Follow the [publish instructions](service-fabric-publish-app-remote-cluster.md) on how to publish an application to a remote cluster.</span></span> <span data-ttu-id="c57f4-120">Na verdade, não é necessário publicar o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="c57f4-120">You don't actually need to publish your application though.</span></span> <span data-ttu-id="c57f4-121">Você pode clicar no hiperlink **Salvar** no diálogo Publicar depois de configurar os itens corretamente.</span><span class="sxs-lookup"><span data-stu-id="c57f4-121">You can click the **Save** hyperlink in the publish dialog once you have configured things appropriately.</span></span>
2. <span data-ttu-id="c57f4-122">Caso deseje que seu aplicativo seja atualizado para cada implantação que ocorrer no Team Services, recomendamos que você configure o perfil de publicação para habilitar atualização.</span><span class="sxs-lookup"><span data-stu-id="c57f4-122">If you want your application to be upgraded for each deployment that occurs within Team Services, you want to configure the publish profile to enable upgrade.</span></span> <span data-ttu-id="c57f4-123">No mesmo diálogo Publicar usado na etapa 1, verifique se a caixa de seleção **Atualizar Aplicativo** está marcada.</span><span class="sxs-lookup"><span data-stu-id="c57f4-123">In the same publish dialog used in step 1, ensure that the **Upgrade the Application** checkbox is checked.</span></span>  <span data-ttu-id="c57f4-124">Saiba mais sobre como [definir configurações de atualização adicionais](service-fabric-visualstudio-configure-upgrade.md).</span><span class="sxs-lookup"><span data-stu-id="c57f4-124">Learn more about [configuring additional upgrade settings](service-fabric-visualstudio-configure-upgrade.md).</span></span> <span data-ttu-id="c57f4-125">Clique no hyperlink **Salvar** para salvar as configurações no perfil de publicação.</span><span class="sxs-lookup"><span data-stu-id="c57f4-125">Click the **Save** hyperlink to save the settings to the publish profile.</span></span>
3. <span data-ttu-id="c57f4-126">Certifique-se de que você salvou as alterações para o perfil de publicação e cancele o diálogo Publicar.</span><span class="sxs-lookup"><span data-stu-id="c57f4-126">Ensure that you've saved your changes to the publish profile and cancel the publish dialog.</span></span>
4. <span data-ttu-id="c57f4-127">Agora é hora de [compartilhar seus arquivos de origem do projeto de Aplicativo](https://www.visualstudio.com/docs/setup-admin/team-services/connect-to-visual-studio-team-services#vs) com o Team Services.</span><span class="sxs-lookup"><span data-stu-id="c57f4-127">Now it's time to [share your Application project source files](https://www.visualstudio.com/docs/setup-admin/team-services/connect-to-visual-studio-team-services#vs) with Team Services.</span></span> <span data-ttu-id="c57f4-128">Depois que os arquivos de origem estiverem acessíveis no Team Services, você poderá passar para a próxima etapa de geração de compilações.</span><span class="sxs-lookup"><span data-stu-id="c57f4-128">Once your source files are accessible in Team Services, you can now move on to the next step of generating builds.</span></span> 

## <a name="create-a-build-definition"></a><span data-ttu-id="c57f4-129">Criar a definição de build</span><span class="sxs-lookup"><span data-stu-id="c57f4-129">Create a build definition</span></span>
<span data-ttu-id="c57f4-130">Uma definição de build do Team Services descreve um fluxo de trabalho composto por um conjunto de etapas de compilação que são executadas sequencialmente.</span><span class="sxs-lookup"><span data-stu-id="c57f4-130">A Team Services build definition describes a workflow that is composed of a set of build steps that are executed sequentially.</span></span> <span data-ttu-id="c57f4-131">A meta da definição de build que você está criando é produzir um pacote de aplicativos do Service Fabric, bem como outros artefatos, que podem ser usados para implantar o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="c57f4-131">The goal of the build definition that you are creating is to produce a Service Fabric application package, and other artifacts, that can be used to deploy the application.</span></span> <span data-ttu-id="c57f4-132">Saiba mais sobre as [definições de build](https://www.visualstudio.com/docs/build/define/create)do Team Services.</span><span class="sxs-lookup"><span data-stu-id="c57f4-132">Learn more about Team Services [build definitions](https://www.visualstudio.com/docs/build/define/create).</span></span>

### <a name="create-a-definition-from-the-build-template"></a><span data-ttu-id="c57f4-133">Criar uma definição de modelo de build</span><span class="sxs-lookup"><span data-stu-id="c57f4-133">Create a definition from the build template</span></span>
1. <span data-ttu-id="c57f4-134">Abra o projeto de equipe no Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="c57f4-134">Open your team project in Visual Studio Team Services.</span></span>
2. <span data-ttu-id="c57f4-135">Selecione a guia **Compilar** .</span><span class="sxs-lookup"><span data-stu-id="c57f4-135">Select the **Build** tab.</span></span>
3. <span data-ttu-id="c57f4-136">Selecione o sinal **+** verde para criar uma nova definição de build.</span><span class="sxs-lookup"><span data-stu-id="c57f4-136">Select the green **+** sign to create a new build definition.</span></span>
4. <span data-ttu-id="c57f4-137">Na caixa de diálogo que é aberta, selecione o **Aplicativo do Service Fabric do Azure** dentro da categoria de modelo **Build**.</span><span class="sxs-lookup"><span data-stu-id="c57f4-137">In the dialog that opens, select **Azure Service Fabric Application** within the **Build** template category.</span></span>
5. <span data-ttu-id="c57f4-138">Selecione **Avançar**.</span><span class="sxs-lookup"><span data-stu-id="c57f4-138">Select **Next**.</span></span>
6. <span data-ttu-id="c57f4-139">Selecione o repositório e a ramificação associada ao seu aplicativo do Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="c57f4-139">Select the repository and branch associated with your Service Fabric application.</span></span>
7. <span data-ttu-id="c57f4-140">Selecione a fila de agente que você deseja usar.</span><span class="sxs-lookup"><span data-stu-id="c57f4-140">Select the agent queue you wish to use.</span></span> <span data-ttu-id="c57f4-141">Há suporte para agentes hospedados.</span><span class="sxs-lookup"><span data-stu-id="c57f4-141">Hosted agents are supported.</span></span>
8. <span data-ttu-id="c57f4-142">Selecione **Criar**.</span><span class="sxs-lookup"><span data-stu-id="c57f4-142">Select **Create**.</span></span>
9. <span data-ttu-id="c57f4-143">Salve a definição de build e dê um nome a ela.</span><span class="sxs-lookup"><span data-stu-id="c57f4-143">Save the build definition and provide a name.</span></span>
10. <span data-ttu-id="c57f4-144">O parágrafo a seguir traz uma descrição das etapas de build geradas pelo modelo:</span><span class="sxs-lookup"><span data-stu-id="c57f4-144">The following paragraph is a description of the build steps generated by the template:</span></span>

| <span data-ttu-id="c57f4-145">Etapa de build</span><span class="sxs-lookup"><span data-stu-id="c57f4-145">Build step</span></span> | <span data-ttu-id="c57f4-146">Descrição</span><span class="sxs-lookup"><span data-stu-id="c57f4-146">Description</span></span> |
| --- | --- |
| <span data-ttu-id="c57f4-147">Restauração do NuGet</span><span class="sxs-lookup"><span data-stu-id="c57f4-147">NuGet restore</span></span> |<span data-ttu-id="c57f4-148">Restaura os pacotes do NuGet para a solução.</span><span class="sxs-lookup"><span data-stu-id="c57f4-148">Restores the NuGet packages for the solution.</span></span> |
| <span data-ttu-id="c57f4-149">Compilar solução \*.sln</span><span class="sxs-lookup"><span data-stu-id="c57f4-149">Build solution \*.sln</span></span> |<span data-ttu-id="c57f4-150">Compila a solução inteira.</span><span class="sxs-lookup"><span data-stu-id="c57f4-150">Builds the entire solution.</span></span> |
| <span data-ttu-id="c57f4-151">Compilar solução \*.sfproj</span><span class="sxs-lookup"><span data-stu-id="c57f4-151">Build solution \*.sfproj</span></span> |<span data-ttu-id="c57f4-152">Gera o pacote de aplicativos do Service Fabric que será usado para implantar o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="c57f4-152">Generates the Service Fabric application package that is used to deploy the application.</span></span> <span data-ttu-id="c57f4-153">A localização do pacote de aplicativos é especificada para o interior do diretório de artefato do build.</span><span class="sxs-lookup"><span data-stu-id="c57f4-153">The application package location is specified to be within the build's artifact directory.</span></span> |
| <span data-ttu-id="c57f4-154">Atualizar Versões de Aplicativo do Service Fabric</span><span class="sxs-lookup"><span data-stu-id="c57f4-154">Update Service Fabric App Versions</span></span> |<span data-ttu-id="c57f4-155">Atualiza os valores de versão contidos nos arquivos de manifesto do pacote de aplicativos para permitir o suporte à atualização.</span><span class="sxs-lookup"><span data-stu-id="c57f4-155">Updates the version values contained in the application package's manifest files to allow for upgrade support.</span></span> <span data-ttu-id="c57f4-156">Consulte a [página de documentação da tarefa](https://go.microsoft.com/fwlink/?LinkId=820529) para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="c57f4-156">See the [task documentation page](https://go.microsoft.com/fwlink/?LinkId=820529) for more information.</span></span> |
| <span data-ttu-id="c57f4-157">Copiar Arquivos</span><span class="sxs-lookup"><span data-stu-id="c57f4-157">Copy Files</span></span> |<span data-ttu-id="c57f4-158">Copia os arquivos de parâmetros do aplicativo e do perfil de publicação para artefatos de build que serão consumidos na implantação.</span><span class="sxs-lookup"><span data-stu-id="c57f4-158">Copies the publish profile and application parameters files to the build's artifacts to be consumed for deployment.</span></span> |
| <span data-ttu-id="c57f4-159">Publicar o Artefato</span><span class="sxs-lookup"><span data-stu-id="c57f4-159">Publish Artifact</span></span> |<span data-ttu-id="c57f4-160">Publica os artefatos de build.</span><span class="sxs-lookup"><span data-stu-id="c57f4-160">Publishes the build's artifacts.</span></span> <span data-ttu-id="c57f4-161">Isso permite que uma definição de versão consuma os artefatos de build.</span><span class="sxs-lookup"><span data-stu-id="c57f4-161">Allows a release definition to consume the build's artifacts.</span></span> |

### <a name="verify-the-default-set-of-tasks"></a><span data-ttu-id="c57f4-162">Verifique o conjunto de tarefas padrão</span><span class="sxs-lookup"><span data-stu-id="c57f4-162">Verify the default set of tasks</span></span>
1. <span data-ttu-id="c57f4-163">Verifique o campo de entrada **Solução** para as etapas de build **Restauração NuGet** e **Solução de build**.</span><span class="sxs-lookup"><span data-stu-id="c57f4-163">Verify the **Solution** input field for the **NuGet restore** and **Build solution** build steps.</span></span>  <span data-ttu-id="c57f4-164">Por padrão, essas etapas de build serão executadas após todos os arquivos de solução estarem contidos no repositório associado.</span><span class="sxs-lookup"><span data-stu-id="c57f4-164">By default, these build steps execute upon all solution files that are contained in the associated repository.</span></span>  <span data-ttu-id="c57f4-165">Se você quiser que apenas a definição de build opere em um desses arquivos de solução, você precisará atualizar explicitamente o caminho para esse arquivo.</span><span class="sxs-lookup"><span data-stu-id="c57f4-165">If you only want the build definition to operate on one of those solution files, you need to explicitly update the path to that file.</span></span>
2. <span data-ttu-id="c57f4-166">Verifique o campo de entrada **Solução** para a etapa de build **Empacotar aplicativo**.</span><span class="sxs-lookup"><span data-stu-id="c57f4-166">Verify the **Solution** input field for the **Package application** build step.</span></span>  <span data-ttu-id="c57f4-167">Por padrão, essa etapa de build presume que existe apenas um projeto do Aplicativo do Service Fabric (.sfproj) no repositório.</span><span class="sxs-lookup"><span data-stu-id="c57f4-167">By default, this build step assumes only one Service Fabric Application project (.sfproj) exists in the repository.</span></span>  <span data-ttu-id="c57f4-168">Se você tiver vários desses arquivos no repositório e desejar ter como alvo apenas um para essa definição de build, você precisará atualizar explicitamente o caminho desse arquivo.</span><span class="sxs-lookup"><span data-stu-id="c57f4-168">If you have multiple such files in your repository and want to target only one of them for this build definition, you need to explicitly update the path to that file.</span></span>  <span data-ttu-id="c57f4-169">Se você quiser empacotar vários projetos de aplicativo em seu repositório, precisará criar etapas adicionais do **Visual Studio Build** na definição de build que cada um direciona a um projeto de Aplicativo.</span><span class="sxs-lookup"><span data-stu-id="c57f4-169">If you want to package multiple Application projects in your repository, you need to create additional **Visual Studio Build** steps in the build definition that each target an Application project.</span></span>  <span data-ttu-id="c57f4-170">Então, você também precisa atualizar o campo **Argumentos de MSBuild** para cada uma dessas etapas de build para que a localização do pacote seja exclusiva para cada um deles.</span><span class="sxs-lookup"><span data-stu-id="c57f4-170">You would then also need to update the **MSBuild Arguments** field for each of those build steps so that the package location is unique for each of them.</span></span>
3. <span data-ttu-id="c57f4-171">Verifique o comportamento de controle de versão definido na etapa de build **Atualizar Versões de Aplicativo do Service Fabric** .</span><span class="sxs-lookup"><span data-stu-id="c57f4-171">Verify the versioning behavior defined in the **Update Service Fabric App Versions** build step.</span></span>  <span data-ttu-id="c57f4-172">Por padrão, essa etapa de build acrescenta o número de build a todos os valores de versão nos arquivos de manifesto do pacote de aplicativos.</span><span class="sxs-lookup"><span data-stu-id="c57f4-172">By default, this build step appends the build number to all version values in the application package's manifest files.</span></span> <span data-ttu-id="c57f4-173">Consulte a [página de documentação da tarefa](https://go.microsoft.com/fwlink/?LinkId=820529) para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="c57f4-173">See the [task documentation page](https://go.microsoft.com/fwlink/?LinkId=820529) for more information.</span></span> <span data-ttu-id="c57f4-174">Isso é útil para dar suporte à atualização do seu aplicativo, pois cada implantação de atualização exige valores de versão diferentes da implantação anterior.</span><span class="sxs-lookup"><span data-stu-id="c57f4-174">This is useful for supporting upgrade of your application since each upgrade deployment requires different version values from the previous deployment.</span></span> <span data-ttu-id="c57f4-175">Se você não pretende usar a atualização do aplicativo em seu fluxo de trabalho, você pode considerar desabilitar esta etapa de build.</span><span class="sxs-lookup"><span data-stu-id="c57f4-175">If you're not intending to use application upgrade in your workflow, you may consider disabling this build step.</span></span> <span data-ttu-id="c57f4-176">Ela deverá ser desabilitada se sua intenção for produzir um build que pode ser usado para substituir um aplicativo do Service Fabric existente.</span><span class="sxs-lookup"><span data-stu-id="c57f4-176">It must be disabled if your intention is to produce a build that can be used to overwrite an existing Service Fabric application.</span></span> <span data-ttu-id="c57f4-177">A implantação falhará se a versão do aplicativo produzida pelo build não corresponder à versão do aplicativo no cluster.</span><span class="sxs-lookup"><span data-stu-id="c57f4-177">The deployment fails if the version of the application produced by the build does not match the version of the application in the cluster.</span></span>
4. <span data-ttu-id="c57f4-178">Se sua solução contiver um projeto .NET Core, você deverá garantir que sua definição de build contenha uma etapa de build que restaura as dependências:</span><span class="sxs-lookup"><span data-stu-id="c57f4-178">If your solution contains a .NET Core project, you must ensure that your build definition contains a build step that restores the dependencies:</span></span>
   1. <span data-ttu-id="c57f4-179">Selecione **Adicionar etapa de build...**.</span><span class="sxs-lookup"><span data-stu-id="c57f4-179">Select **Add build step...**.</span></span>
   2. <span data-ttu-id="c57f4-180">Localize a tarefa **Linha de comando** dentro da guia Utilitário e clique em seu botão Adicionar.</span><span class="sxs-lookup"><span data-stu-id="c57f4-180">Locate the **Command-Line** task within the Utility tab and click its Add button.</span></span>
   3. <span data-ttu-id="c57f4-181">Para campos de entrada da tarefa, use os seguintes valores:</span><span class="sxs-lookup"><span data-stu-id="c57f4-181">For the task's input fields, use the following values:</span></span>
   4. <span data-ttu-id="c57f4-182">Ferramenta: dotnet</span><span class="sxs-lookup"><span data-stu-id="c57f4-182">Tool: dotnet</span></span>
   5. <span data-ttu-id="c57f4-183">Argumentos: restore</span><span class="sxs-lookup"><span data-stu-id="c57f4-183">Arguments: restore</span></span>
   6. <span data-ttu-id="c57f4-184">Arraste a tarefa para que ela fique imediatamente após a etapa **restauração do NuGet** .</span><span class="sxs-lookup"><span data-stu-id="c57f4-184">Drag the task so that it is immediately after the **NuGet restore** step.</span></span>
5. <span data-ttu-id="c57f4-185">Salve as alterações feitas à definição de build.</span><span class="sxs-lookup"><span data-stu-id="c57f4-185">Save any changes you've made to the build definition.</span></span>

### <a name="try-it"></a><span data-ttu-id="c57f4-186">Experimente</span><span class="sxs-lookup"><span data-stu-id="c57f4-186">Try it</span></span>
<span data-ttu-id="c57f4-187">Selecione **Enfileirar Build** para iniciar um build.</span><span class="sxs-lookup"><span data-stu-id="c57f4-187">Select **Queue Build** to manually start a build.</span></span> <span data-ttu-id="c57f4-188">A compilação também é disparada durante o push ou check-in.</span><span class="sxs-lookup"><span data-stu-id="c57f4-188">Builds also triggers upon push or check-in.</span></span> <span data-ttu-id="c57f4-189">Depois de verificar se o build está em execução com êxito, agora você pode passar para uma definição de versão que implantará seu aplicativo em um cluster.</span><span class="sxs-lookup"><span data-stu-id="c57f4-189">Once you've verified that the build is executing successfully, you can now move on to defining a release definition that deploys your application to a cluster.</span></span>

## <a name="create-a-release-definition"></a><span data-ttu-id="c57f4-190">Criar uma definição de versão</span><span class="sxs-lookup"><span data-stu-id="c57f4-190">Create a release definition</span></span>
<span data-ttu-id="c57f4-191">Uma definição de versão do Team Services descreve um fluxo de trabalho composto por um conjunto de tarefas que são executadas sequencialmente.</span><span class="sxs-lookup"><span data-stu-id="c57f4-191">A Team Services release definition describes a workflow that is composed of a set of tasks that are executed sequentially.</span></span> <span data-ttu-id="c57f4-192">A meta da definição de versão que você criará é usar um pacote de aplicativos e implantá-lo em um cluster.</span><span class="sxs-lookup"><span data-stu-id="c57f4-192">The goal of the release definition that you are creating is to take an application package and deploy it to a cluster.</span></span> <span data-ttu-id="c57f4-193">Quando usados juntos, a definição de build e a definição de lançamento podem executar todo o fluxo de trabalho, começando com arquivos de origem e terminando com um aplicativo em execução no cluster.</span><span class="sxs-lookup"><span data-stu-id="c57f4-193">When used together, the build definition and release definition can execute the entire workflow from starting with source files to ending with a running application in your cluster.</span></span> <span data-ttu-id="c57f4-194">Saiba mais sobre as [definições de versão](https://www.visualstudio.com/docs/release/author-release-definition/more-release-definition)do Team Services.</span><span class="sxs-lookup"><span data-stu-id="c57f4-194">Learn more about Team Services [release definitions](https://www.visualstudio.com/docs/release/author-release-definition/more-release-definition).</span></span>

### <a name="create-a-definition-from-the-release-template"></a><span data-ttu-id="c57f4-195">Criar uma definição de modelo de versão</span><span class="sxs-lookup"><span data-stu-id="c57f4-195">Create a definition from the release template</span></span>
1. <span data-ttu-id="c57f4-196">Abra o projeto no Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="c57f4-196">Open your project in Visual Studio Team Services.</span></span>
2. <span data-ttu-id="c57f4-197">Selecione a guia **Versão** .</span><span class="sxs-lookup"><span data-stu-id="c57f4-197">Select the **Release** tab.</span></span>
3. <span data-ttu-id="c57f4-198">Selecionar o símbolo **+** em verde para criar uma nova definição de versão e selecione **Criar definição de versão** no menu.</span><span class="sxs-lookup"><span data-stu-id="c57f4-198">Select the green **+** sign to create a new release definition and select **Create release definition** in the menu.</span></span>
4. <span data-ttu-id="c57f4-199">Na caixa de diálogo aberta, selecione **Implantação do Azure Service Fabric** na categoria de modelo de **Implantação**.</span><span class="sxs-lookup"><span data-stu-id="c57f4-199">In the dialog that opens, select **Azure Service Fabric Deployment** within the **Deployment** template category.</span></span>
5. <span data-ttu-id="c57f4-200">Selecione **Avançar**.</span><span class="sxs-lookup"><span data-stu-id="c57f4-200">Select **Next**.</span></span>
6. <span data-ttu-id="c57f4-201">Selecione a definição de build que você deseja usar como a origem dessa definição de versão.</span><span class="sxs-lookup"><span data-stu-id="c57f4-201">Select the build definition you want to use as the source of this release definition.</span></span>  <span data-ttu-id="c57f4-202">A definição de lançamento fará referência aos artefatos produzidos pela definição de build selecionada.</span><span class="sxs-lookup"><span data-stu-id="c57f4-202">The release definition references the artifacts that were produced by the selected build definition.</span></span>
7. <span data-ttu-id="c57f4-203">Marque a caixa de seleção **Implantação contínua** se desejar que o Team Services crie automaticamente uma nova versão e implante o aplicativo Service Fabric sempre que um build for concluído.</span><span class="sxs-lookup"><span data-stu-id="c57f4-203">Check the **Continuous deployment** check box if you wish to have Team Services automatically create a new release and deploy the Service Fabric application whenever a build completes.</span></span>
8. <span data-ttu-id="c57f4-204">Selecione a fila de agente que você deseja usar.</span><span class="sxs-lookup"><span data-stu-id="c57f4-204">Select the agent queue you wish to use.</span></span> <span data-ttu-id="c57f4-205">Há suporte para agentes hospedados.</span><span class="sxs-lookup"><span data-stu-id="c57f4-205">Hosted agents are supported.</span></span>
9. <span data-ttu-id="c57f4-206">Selecione **Criar**.</span><span class="sxs-lookup"><span data-stu-id="c57f4-206">Select **Create**.</span></span>
10. <span data-ttu-id="c57f4-207">Edite o nome da definição clicando no ícone de lápis na parte superior da página.</span><span class="sxs-lookup"><span data-stu-id="c57f4-207">Edit the definition name by clicking the pencil icon at the top of the page.</span></span>
11. <span data-ttu-id="c57f4-208">Selecione o cluster no qual seu aplicativo deve ser implantado no campo de entrada **Conexão do Cluster** da tarefa.</span><span class="sxs-lookup"><span data-stu-id="c57f4-208">Select the cluster to which your application should be deployed from the **Cluster Connection** input field of the task.</span></span> <span data-ttu-id="c57f4-209">A conexão do cluster fornece as informações necessárias que permitem que a tarefa de implantação se conecte ao cluster.</span><span class="sxs-lookup"><span data-stu-id="c57f4-209">The cluster connection provides the necessary information that allows the deployment task to connect to the cluster.</span></span> <span data-ttu-id="c57f4-210">Se você ainda não tiver uma conexão de cluster para o cluster, selecione o hyperlink **Gerenciar** ao lado do campo para adicionar uma.</span><span class="sxs-lookup"><span data-stu-id="c57f4-210">If you do not yet have a cluster connection for your cluster, select the **Manage** hyperlink next to the field to add one.</span></span> <span data-ttu-id="c57f4-211">Na página aberta, execute as seguintes etapas:</span><span class="sxs-lookup"><span data-stu-id="c57f4-211">On the page that opens, perform the following steps:</span></span>
    1. <span data-ttu-id="c57f4-212">Selecione **Novo Ponto de Extremidade de Serviço** e, em seguida, selecione **Azure Service Fabric** no menu.</span><span class="sxs-lookup"><span data-stu-id="c57f4-212">Select **New Service Endpoint** and then select **Azure Service Fabric** from the menu.</span></span>
    2. <span data-ttu-id="c57f4-213">Selecione o tipo de autenticação usada pelo cluster direcionada por esse ponto de extremidade.</span><span class="sxs-lookup"><span data-stu-id="c57f4-213">Select the type of authentication being used by the cluster targeted by this endpoint.</span></span>
    3. <span data-ttu-id="c57f4-214">Defina um nome para a conexão no campo **Nome da Conexão** .</span><span class="sxs-lookup"><span data-stu-id="c57f4-214">Define a name for your connection in the **Connection Name** field.</span></span>  <span data-ttu-id="c57f4-215">Normalmente, você poderia usar o nome do cluster.</span><span class="sxs-lookup"><span data-stu-id="c57f4-215">Typically, you would use the name of your cluster.</span></span>
    4. <span data-ttu-id="c57f4-216">Definir a URL de ponto de extremidade de conexão do cliente no campo **Ponto de Extremidade do Cluster** .</span><span class="sxs-lookup"><span data-stu-id="c57f4-216">Define the client connection endpoint URL in the **Cluster Endpoint** field.</span></span>  <span data-ttu-id="c57f4-217">Exemplo: tcp://contoso.westus.cloudapp.azure.com:19000.</span><span class="sxs-lookup"><span data-stu-id="c57f4-217">Example: tcp://contoso.westus.cloudapp.azure.com:19000.</span></span>
    5. <span data-ttu-id="c57f4-218">Para as credenciais do Azure Active Directory, defina as credenciais que você deseja usar para se conectar ao cluster nos campos **Nome de Usuário** e **Senha**.</span><span class="sxs-lookup"><span data-stu-id="c57f4-218">For Azure Active Directory credentials, define the credentials you want to use to connect to the cluster in the **Username** and **Password** fields.</span></span>
    6. <span data-ttu-id="c57f4-219">Para a autenticação baseada em certificado, defina a codificação de Base64 do arquivo de certificado do cliente no campo **Certificado de Cliente** .</span><span class="sxs-lookup"><span data-stu-id="c57f4-219">For Certificate Based authentication, define the Base64 encoding of the client certificate file in the **Client Certificate** field.</span></span>  <span data-ttu-id="c57f4-220">Consulte o pop-up de ajuda nesse campo para obter informações sobre como obter esse valor.</span><span class="sxs-lookup"><span data-stu-id="c57f4-220">See the help pop-up on that field for info on how to get that value.</span></span>  <span data-ttu-id="c57f4-221">Se seu certificado for protegido por senha, defina a senha no campo **Senha** .</span><span class="sxs-lookup"><span data-stu-id="c57f4-221">If your certificate is password-protected, define the password in the **Password** field.</span></span>
    7. <span data-ttu-id="c57f4-222">Confirme suas alterações clicando em **OK**.</span><span class="sxs-lookup"><span data-stu-id="c57f4-222">Confirm your changes by clicking **OK**.</span></span> <span data-ttu-id="c57f4-223">Depois de navegar de volta para a definição de versão, clique no ícone para atualizar no campo **Conexão do Cluster** para ver o ponto de extremidade que você acabou de adicionar.</span><span class="sxs-lookup"><span data-stu-id="c57f4-223">After navigating back to your release definition, click the refresh icon on the **Cluster Connection** field to see the endpoint you just added.</span></span>
12. <span data-ttu-id="c57f4-224">Salve a definição da versão.</span><span class="sxs-lookup"><span data-stu-id="c57f4-224">Save the release definition.</span></span>

> [!NOTE]
> <span data-ttu-id="c57f4-225">Contas da Microsoft (por exemplo, não há suporte para @hotmail.com ou @outlook.com) na autenticação do Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="c57f4-225">Microsoft Accounts (for example, @hotmail.com or @outlook.com) are not supported with Azure Active Directory authentication.</span></span>
> 
> 

<span data-ttu-id="c57f4-226">A definição que é criada consiste em uma tarefa do tipo **Implantação do Aplicativo Service Fabric**.</span><span class="sxs-lookup"><span data-stu-id="c57f4-226">The definition that is created consists of one task of type **Service Fabric Application Deployment**.</span></span> <span data-ttu-id="c57f4-227">Consulte a [página de documentação da tarefa](https://go.microsoft.com/fwlink/?LinkId=820528) para obter mais informações sobre essa tarefa.</span><span class="sxs-lookup"><span data-stu-id="c57f4-227">See the [task documentation page](https://go.microsoft.com/fwlink/?LinkId=820528) for more information about this task.</span></span>

### <a name="verify-the-template-defaults"></a><span data-ttu-id="c57f4-228">Verifique os padrões de modelo</span><span class="sxs-lookup"><span data-stu-id="c57f4-228">Verify the template defaults</span></span>
1. <span data-ttu-id="c57f4-229">Verifique o campo de entrada **Perfil de Publicação** para a tarefa **Implantar Aplicativo do Service Fabric**.</span><span class="sxs-lookup"><span data-stu-id="c57f4-229">Verify the **Publish Profile** input field for the **Deploy Service Fabric Application** task.</span></span> <span data-ttu-id="c57f4-230">Por padrão, esse campo faz referência a um perfil de publicação denominado Cloud.xml contido nos artefatos do build.</span><span class="sxs-lookup"><span data-stu-id="c57f4-230">By default, this field references a publish profile named Cloud.xml contained in the build's artifacts.</span></span> <span data-ttu-id="c57f4-231">Se você deseja fazer referência a um perfil de publicação diferente ou se o build contiver vários pacotes de aplicativos em seus artefatos, você precisará atualizar o caminho adequadamente.</span><span class="sxs-lookup"><span data-stu-id="c57f4-231">If you want to reference a different publish profile or if the build contains multiple application packages in its artifacts, you need to update the path appropriately.</span></span>
2. <span data-ttu-id="c57f4-232">Verifique o campo de entrada **Pacote de Aplicativos** para a tarefa **Implantar Aplicativo do Service Fabric**.</span><span class="sxs-lookup"><span data-stu-id="c57f4-232">Verify the **Application Package** input field for the **Deploy Service Fabric Application** task.</span></span> <span data-ttu-id="c57f4-233">Por padrão, esse campo faz referência ao caminho do pacote de aplicativos padrão usado no modelo de definição de build.</span><span class="sxs-lookup"><span data-stu-id="c57f4-233">By default, this field references the default application package path used in the build definition template.</span></span>  <span data-ttu-id="c57f4-234">Se você tiver modificado o caminho do pacote de aplicativos padrão na definição de build, também precisará atualizar o caminho adequadamente aqui.</span><span class="sxs-lookup"><span data-stu-id="c57f4-234">If you've modified the default application package path in the build definition, you need to update the path appropriately here as well.</span></span>

### <a name="try-it"></a><span data-ttu-id="c57f4-235">Experimente</span><span class="sxs-lookup"><span data-stu-id="c57f4-235">Try it</span></span>
<span data-ttu-id="c57f4-236">Selecione **Criar Versão** no menu de botão **Versão** para criar manualmente uma versão.</span><span class="sxs-lookup"><span data-stu-id="c57f4-236">Select **Create Release** from the **Release** button menu to manually create a release.</span></span> <span data-ttu-id="c57f4-237">Na caixa de diálogo que é aberta, selecione o build no qual você deseja basear a versão e clique em **Criar**.</span><span class="sxs-lookup"><span data-stu-id="c57f4-237">In the dialog that opens, select the build that you want to base the release on and then click **Create**.</span></span> <span data-ttu-id="c57f4-238">Se você tiver habilitado a implantação contínua, versões serão criadas automaticamente quando a definição de build associada concluir um build.</span><span class="sxs-lookup"><span data-stu-id="c57f4-238">If you enabled continuous deployment, releases will be created automatically when the associated build definition completes a build.</span></span>

## <a name="next-steps"></a><span data-ttu-id="c57f4-239">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="c57f4-239">Next steps</span></span>
<span data-ttu-id="c57f4-240">Para saber mais sobre a integração contínua com aplicativos do Service Fabric, leia os artigos a seguir:</span><span class="sxs-lookup"><span data-stu-id="c57f4-240">To learn more about continuous integration with Service Fabric applications, read the following articles:</span></span>

* [<span data-ttu-id="c57f4-241">Início da documentação do Team Services</span><span class="sxs-lookup"><span data-stu-id="c57f4-241">Team Services documentation home</span></span>](https://www.visualstudio.com/docs/overview)
* [<span data-ttu-id="c57f4-242">Gerenciamento de build no Team Services</span><span class="sxs-lookup"><span data-stu-id="c57f4-242">Build management in Team Services</span></span>](https://www.visualstudio.com/docs/build/overview)
* [<span data-ttu-id="c57f4-243">Gerenciamento de versão no Team Services</span><span class="sxs-lookup"><span data-stu-id="c57f4-243">Release management in Team Services</span></span>](https://www.visualstudio.com/docs/release/overview)

