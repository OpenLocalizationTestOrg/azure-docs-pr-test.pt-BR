---
title: aaaCapacity planejamento para aplicativos do Service Fabric | Microsoft Docs
description: "Descreve como tooidentify Olá número de nós de computação necessários para um aplicativo do Service Fabric"
services: service-fabric
documentationcenter: .net
author: mani-ramaswamy
manager: markfuss
editor: 
ms.assetid: 9fa47be0-50a2-4a51-84a5-20992af94bea
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 8/9/2017
ms.author: subramar
ms.openlocfilehash: 44a69e9d8ec5efcc43122dc42e8f923ef37378f2
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="capacity-planning-for-service-fabric-applications"></a><span data-ttu-id="a8c2c-103">Planejamento de capacidade para Aplicativos do Service Fabric</span><span class="sxs-lookup"><span data-stu-id="a8c2c-103">Capacity planning for Service Fabric applications</span></span>
<span data-ttu-id="a8c2c-104">Este documento ensina como tooestimate Olá a quantidade de recursos (CPUs, RAM, armazenamento em disco) é necessário toorun seus aplicativos do Azure Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-104">This document teaches you how tooestimate hello amount of resources (CPUs, RAM, disk storage) you need toorun your Azure Service Fabric applications.</span></span> <span data-ttu-id="a8c2c-105">É comum para sua toochange de requisitos de recursos ao longo do tempo.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-105">It is common for your resource requirements toochange over time.</span></span> <span data-ttu-id="a8c2c-106">Normalmente, você precisa de alguns recursos enquanto desenvolve/testa seu serviço e, posteriormente, precisa de mais recursos à medida que entra na fase de produção e a popularidade de seu aplicativo aumenta.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-106">You typically require few resources as you develop/test your service, and then require more resources as you go into production and your application grows in popularity.</span></span> <span data-ttu-id="a8c2c-107">Quando você projetar seu aplicativo, considerar os requisitos de longo prazo hello e fazer escolhas que permitem que a demanda do serviço tooscale toomeet cliente alta.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-107">When you design your application, think through hello long-term requirements and make choices that allow your service tooscale toomeet high customer demand.</span></span>

 <span data-ttu-id="a8c2c-108">Quando você cria um cluster do Service Fabric, você decidir os tipos de máquinas virtuais (VMs) fazer backup de cluster de saudação.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-108">When you create a Service Fabric cluster, you decide what kinds of virtual machines (VMs) make up hello cluster.</span></span> <span data-ttu-id="a8c2c-109">Cada VM vem com uma quantidade limitada de recursos na forma de saudação do armazenamento em disco, largura de banda de rede, RAM e CPUs (núcleos e velocidade).</span><span class="sxs-lookup"><span data-stu-id="a8c2c-109">Each VM comes with a limited amount of resources in hello form of CPUs (cores and speed), network bandwidth, RAM, and disk storage.</span></span> <span data-ttu-id="a8c2c-110">À medida que cresce o serviço ao longo do tempo, você pode atualizar tooVMs que oferecem mais recursos de e/ou adicionar mais cluster tooyour de VMs.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-110">As your service grows over time, you can upgrade tooVMs that offer greater resources and/or add more VMs tooyour cluster.</span></span> <span data-ttu-id="a8c2c-111">Olá toodo último, você deverá arquitetar seu serviço inicialmente para que ele pode aproveitar novas VMs que são adicionados dinamicamente o cluster toohello.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-111">toodo hello latter, you must architect your service initially so it can take advantage of new VMs that get dynamically added toohello cluster.</span></span>

<span data-ttu-id="a8c2c-112">Alguns serviços gerenciar poucos dados toono Olá próprias VMs.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-112">Some services manage little toono data on hello VMs themselves.</span></span> <span data-ttu-id="a8c2c-113">Portanto, para esses serviços devem se concentrar principalmente em desempenho, o que significa que selecionando Olá de planejamento de capacidade apropriados CPUs (núcleos e velocidade) de saudação VMs.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-113">Therefore, capacity planning for these services should focus primarily on performance, which means selecting hello appropriate CPUs (cores and speed) of hello VMs.</span></span> <span data-ttu-id="a8c2c-114">Além disso, você deve considerar a largura de banda da rede, incluindo a frequência das transferências de rede e a quantidade de dados que está sendo transferida.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-114">In addition, you should consider network bandwidth, including how frequently network transfers are occurring and how much data is being transferred.</span></span> <span data-ttu-id="a8c2c-115">Se seu serviço precisa tooperform bem como o aumento do uso de serviço, você pode adicionar mais cluster de toohello de VMs e carregar solicitações de rede de saudação do saldo em todas as VMs de saudação.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-115">If your service needs tooperform well as service usage increases, you can add more VMs toohello cluster and load balance hello network requests across all hello VMs.</span></span>

<span data-ttu-id="a8c2c-116">Para serviços que gerenciam grandes quantidades de dados em VMs do hello, planejamento de capacidade deve se concentrar principalmente em tamanho.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-116">For services that manage large amounts of data on hello VMs, capacity planning should focus primarily on size.</span></span> <span data-ttu-id="a8c2c-117">Assim, você deve considerar atentamente a capacidade de saudação da saudação da VM RAM e armazenamento em disco.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-117">Thus, you should carefully consider hello capacity of hello VM's RAM and disk storage.</span></span> <span data-ttu-id="a8c2c-118">sistema de gerenciamento de memória virtual Olá no Windows torna o espaço em disco se parecer com o código de tooapplication de RAM.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-118">hello virtual memory management system in Windows makes disk space look like RAM tooapplication code.</span></span> <span data-ttu-id="a8c2c-119">Além disso, o tempo de execução do Service Fabric Olá fornece mantendo dados ativos somente na memória e toodisk movimentação de dados frios Olá a paginação inteligente.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-119">In addition, hello Service Fabric runtime provides smart paging keeping only hot data in memory and moving hello cold data toodisk.</span></span> <span data-ttu-id="a8c2c-120">Aplicativos, portanto, podem usar mais memória do que está fisicamente disponível em Olá VM.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-120">Applications can thus use more memory than is physically available on hello VM.</span></span> <span data-ttu-id="a8c2c-121">Simplesmente ter mais RAM aumenta o desempenho, pois Olá VM pode manter mais armazenamento em disco na memória RAM.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-121">Having more RAM simply increases performance, since hello VM can keep more disk storage in RAM.</span></span> <span data-ttu-id="a8c2c-122">Olá VM que você selecionar deve ter um dados Olá toostore grande o suficiente de disco que você deseja na Olá VM.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-122">hello VM you select should have a disk large enough toostore hello data that you want on hello VM.</span></span> <span data-ttu-id="a8c2c-123">Da mesma forma, Olá VM deve ter suficiente tooprovide RAM com hello desempenho desejados.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-123">Similarly, hello VM should have enough RAM tooprovide you with hello performance you desire.</span></span> <span data-ttu-id="a8c2c-124">Se os dados do serviço aumentar ao longo do tempo, você pode adicionar mais máquinas virtuais toohello cluster e particionar dados saudação em todas as VMs de saudação.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-124">If your service's data grows over time, you can add more VMs toohello cluster and partition hello data across all hello VMs.</span></span>

## <a name="determine-how-many-nodes-you-need"></a><span data-ttu-id="a8c2c-125">Determinar quantos nós são necessários</span><span class="sxs-lookup"><span data-stu-id="a8c2c-125">Determine how many nodes you need</span></span>
<span data-ttu-id="a8c2c-126">Particionamento de seu serviço permite que você tooscale os dados do serviço.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-126">Partitioning your service allows you tooscale out your service's data.</span></span> <span data-ttu-id="a8c2c-127">Para obter mais informações sobre particionamento, consulte [Particionamento do Service Fabric](service-fabric-concepts-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="a8c2c-127">For more information on partitioning, see [Partitioning Service Fabric](service-fabric-concepts-partitioning.md).</span></span> <span data-ttu-id="a8c2c-128">Cada partição deve se ajustar a uma única VM, mas várias partições (pequenas) podem ser colocadas em uma única VM.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-128">Each partition must fit within a single VM, but multiple (small) partitions can be placed on a single VM.</span></span> <span data-ttu-id="a8c2c-129">Portanto, ter mais partições pequenas fornece maior flexibilidade do que ter poucas partições maiores.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-129">So, having more small partitions gives you greater flexibility than having a few larger partitions.</span></span> <span data-ttu-id="a8c2c-130">compensação de saudação é que ter muitas partições aumenta a sobrecarga de malha do serviço e você não pode executar operações realizadas em partições.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-130">hello trade-off is that having lots of partitions increases Service Fabric overhead and you cannot perform transacted operations across partitions.</span></span> <span data-ttu-id="a8c2c-131">Há também mais tráfego de rede potencial se seu código de serviço precisa frequentemente tooaccess partes dos dados que residem em diferentes partições.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-131">There is also more potential network traffic if your service code frequently needs tooaccess pieces of data that live in different partitions.</span></span> <span data-ttu-id="a8c2c-132">Ao projetar seu serviço, você deve considerar cuidadosamente esses tooarrive prós e contras em uma estratégia de particionamento eficaz.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-132">When designing your service, you should carefully consider these pros and cons tooarrive at an effective partitioning strategy.</span></span>

<span data-ttu-id="a8c2c-133">Vamos supor que seu aplicativo tem um único serviço com monitoração de estado que tem um tamanho de armazenamento que você espera que toogrow tooDB_Size GB em um ano.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-133">Let's assume your application has a single stateful service that has a store size that you expect toogrow tooDB_Size GB in a year.</span></span> <span data-ttu-id="a8c2c-134">Você está disposto tooadd mais aplicativos (e partições) como experiência crescimento além daquele ano.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-134">You are willing tooadd more applications (and partitions) as you experience growth beyond that year.</span></span>  <span data-ttu-id="a8c2c-135">Olá fator de replicação (FR), que determina o número de saudação de réplicas para seu serviço impactos Olá DB_Size total.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-135">hello replication factor (RF), which determines hello number of replicas for your service impacts hello total DB_Size.</span></span> <span data-ttu-id="a8c2c-136">Olá que db_size total em todas as réplicas é hello multiplicado por DB_Size de fator de replicação.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-136">hello total DB_Size across all replicas is hello Replication Factor multiplied by DB_Size.</span></span>  <span data-ttu-id="a8c2c-137">Node_Size representa o espaço de disco Olá/RAM por nó, você deseja toouse para seu serviço.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-137">Node_Size represents hello disk space/RAM per node you want toouse for your service.</span></span> <span data-ttu-id="a8c2c-138">Para melhor desempenho, Olá DB_Size deve caber na memória em cluster hello e um Node_Size ao redor Olá RAM de saudação que VM deve ser escolhida.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-138">For best performance, hello DB_Size should fit into memory across hello cluster, and a Node_Size that is around hello RAM of hello VM should be chosen.</span></span> <span data-ttu-id="a8c2c-139">Alocando um Node_Size maior Olá capacidade de RAM, você depender de paginação Olá fornecida pelo tempo de execução do hello Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-139">By allocating a Node_Size that is larger than hello RAM capacity, you are relying on hello paging provided by hello Service Fabric runtime.</span></span> <span data-ttu-id="a8c2c-140">Assim, o desempenho pode não ser ideal se seus dados de inteiros são considerados uma toobe hot (desde a saudação, em seguida, dados são paginados de entrada/saída).</span><span class="sxs-lookup"><span data-stu-id="a8c2c-140">Thus, your performance may not be optimal if your entire data is considered toobe hot (since then hello data is paged in/out).</span></span> <span data-ttu-id="a8c2c-141">No entanto, para muitos serviços onde somente uma fração dos dados saudação está ativa, é mais econômico.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-141">However, for many services where only a fraction of hello data is hot, it is more cost-effective.</span></span>

<span data-ttu-id="a8c2c-142">número de saudação de nós necessários para o desempenho máximo pode ser computado da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="a8c2c-142">hello number of nodes required for maximum performance can be computed as follows:</span></span>

```
Number of Nodes = (DB_Size * RF)/Node_Size

```


## <a name="account-for-growth"></a><span data-ttu-id="a8c2c-143">Pense no crescimento</span><span class="sxs-lookup"><span data-stu-id="a8c2c-143">Account for growth</span></span>
<span data-ttu-id="a8c2c-144">Talvez você queira toocompute número de saudação de nós com base em Olá DB_Size que você espera que seu toogrow de serviço, além de toohello DB_Size que começa com.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-144">You may want toocompute hello number of nodes based on hello DB_Size that you expect your service toogrow to, in addition toohello DB_Size that you began with.</span></span> <span data-ttu-id="a8c2c-145">Em seguida, crescer número Olá de nós à medida que aumenta de seu serviço para que não são provisionamento excessivo número Olá de nós.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-145">Then, grow hello number of nodes as your service grows so that you are not over-provisioning hello number of nodes.</span></span> <span data-ttu-id="a8c2c-146">Mas o número de saudação de partições deve ser com base no número de saudação de nós que são necessárias quando você estiver executando o serviço de no máximo de crescimento.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-146">But hello number of partitions should be based on hello number of nodes that are needed when you're running your service at maximum growth.</span></span>

<span data-ttu-id="a8c2c-147">Ele é bom toohave algumas máquinas adicionais disponíveis a qualquer momento, para que você possa tratar picos inesperados ou a falha (por exemplo, se alguns VMs descem).</span><span class="sxs-lookup"><span data-stu-id="a8c2c-147">It is good toohave some extra machines available at any time so that you can handle any unexpected spikes or failure (for example, if a few VMs go down).</span></span>  <span data-ttu-id="a8c2c-148">Embora Olá capacidade extra deve ser determinada usando seu picos esperados, um ponto de partida é tooreserve algumas VMs adicionais (5-10 por cento extra).</span><span class="sxs-lookup"><span data-stu-id="a8c2c-148">While hello extra capacity should be determined by using your expected spikes, a starting point is tooreserve a few extra VMs (5-10 percent extra).</span></span>

<span data-ttu-id="a8c2c-149">Olá anterior pressupõe um único serviço com monitoração de estado.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-149">hello preceding assumes a single stateful service.</span></span> <span data-ttu-id="a8c2c-150">Se você tiver mais de um serviço com monitoração de estado, você tem tooadd Olá DB_Size associado Olá outros serviços equação hello.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-150">If you have more than one stateful service, you have tooadd hello DB_Size associated with hello other services into hello equation.</span></span> <span data-ttu-id="a8c2c-151">Como alternativa, você pode calcular o número de saudação de nós separadamente para cada serviço com monitoração de estado.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-151">Alternatively, you can compute hello number of nodes separately for each stateful service.</span></span>  <span data-ttu-id="a8c2c-152">O serviço pode ter réplicas ou partições que não são equilibradas.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-152">Your service may have replicas or partitions that aren't balanced.</span></span> <span data-ttu-id="a8c2c-153">Tenha em mente que as partições também podem ter mais dados do que outras.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-153">Keep in mind that partitions may also have more data than others.</span></span> <span data-ttu-id="a8c2c-154">Para obter mais informações sobre particionamento, consulte [Particionamento de artigo nas práticas recomendadas](service-fabric-concepts-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="a8c2c-154">For more information on partitioning, see [partitioning article on best practices](service-fabric-concepts-partitioning.md).</span></span> <span data-ttu-id="a8c2c-155">No entanto, hello equação anterior é partição e réplica desconhecido, porque o Service Fabric garante que réplicas de saudação são distribuídas entre os nós de saudação de forma otimizada.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-155">However, hello preceding equation is partition and replica agnostic, because Service Fabric ensures that hello replicas are spread out among hello nodes in an optimized manner.</span></span>

## <a name="use-a-spreadsheet-for-cost-calculation"></a><span data-ttu-id="a8c2c-156">Use uma planilha para calcular o custo</span><span class="sxs-lookup"><span data-stu-id="a8c2c-156">Use a spreadsheet for cost calculation</span></span>
<span data-ttu-id="a8c2c-157">Agora vamos adicionar alguns números reais fórmula hello.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-157">Now let's put some real numbers in hello formula.</span></span> <span data-ttu-id="a8c2c-158">Um [planilha de exemplo](https://servicefabricsdkstorage.blob.core.windows.net/publicrelease/SF%20VM%20Cost%20calculator-NEW.xlsx) mostra como tooplan Olá capacidade para um aplicativo que contém três tipos de objetos de dados.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-158">An [example spreadsheet](https://servicefabricsdkstorage.blob.core.windows.net/publicrelease/SF%20VM%20Cost%20calculator-NEW.xlsx) shows how tooplan hello capacity for an application that contains three types of data objects.</span></span> <span data-ttu-id="a8c2c-159">Para cada objeto, podemos aproximar seu tamanho e quantos objetos que esperamos toohave.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-159">For each object, we approximate its size and how many objects we expect toohave.</span></span> <span data-ttu-id="a8c2c-160">Também selecionamos quantas réplicas queremos de cada tipo de objeto.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-160">We also select how many replicas we want of each object type.</span></span> <span data-ttu-id="a8c2c-161">planilha de saudação calcula a quantidade total de saudação de memória toobe armazenado no cluster de saudação.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-161">hello spreadsheet calculates hello total amount of memory toobe stored in hello cluster.</span></span>

<span data-ttu-id="a8c2c-162">Em seguida, inserimos um tamanho de VM e um custo mensal.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-162">Then we enter a VM size and monthly cost.</span></span> <span data-ttu-id="a8c2c-163">Com base no tamanho da VM de saudação, planilha Olá informa que Olá número mínimo de partições, que você deve usar toosplit toophysically seus dados se ajustar em nós de saudação.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-163">Based on hello VM size, hello spreadsheet tells you hello minimum number of partitions you must use toosplit your data toophysically fit on hello nodes.</span></span> <span data-ttu-id="a8c2c-164">Pode ser um número maior de partições tooaccommodate que necessidades de tráfego específico de computação e rede do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-164">You may desire a larger number of partitions tooaccommodate your application's specific computation and network traffic needs.</span></span> <span data-ttu-id="a8c2c-165">planilha de saudação mostra o número de saudação de partições que estão gerenciando objetos de perfil de usuário Olá aumentou de um toosix.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-165">hello spreadsheet shows hello number of partitions that are managing hello user profile objects has increased from one toosix.</span></span>

<span data-ttu-id="a8c2c-166">Agora, com base em todas essas informações, planilha Olá mostra que você pode obter todos os dados de saudação com hello desejado partições e réplicas fisicamente em um cluster de nó de 26.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-166">Now, based on all this information, hello spreadsheet shows that you could physically get all hello data with hello desired partitions and replicas on a 26-node cluster.</span></span> <span data-ttu-id="a8c2c-167">No entanto, esse cluster deve ser compactado, portanto algumas falhas de nó tooaccommodate nós adicionais e atualizações.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-167">However, this cluster would be densely packed, so you may want some additional nodes tooaccommodate node failures and upgrades.</span></span> <span data-ttu-id="a8c2c-168">planilha de saudação também mostra que com mais de 57 nós fornece nenhum valor adicional, porque você teria que nós vazios.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-168">hello spreadsheet also shows that having more than 57 nodes provides no additional value because you would have empty nodes.</span></span> <span data-ttu-id="a8c2c-169">Novamente, talvez você queira toogo acima 57 nós mesmo assim as falhas de nó tooaccommodate e as atualizações.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-169">Again, you may want toogo above 57 nodes anyway tooaccommodate node failures and upgrades.</span></span> <span data-ttu-id="a8c2c-170">É possível ajustar a saudação planilha toomatch necessidades específicas do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-170">You can tweak hello spreadsheet toomatch your application's specific needs.</span></span>   

![Planilha para cálculo de custo][Image1]

## <a name="next-steps"></a><span data-ttu-id="a8c2c-172">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="a8c2c-172">Next steps</span></span>
<span data-ttu-id="a8c2c-173">Check-out [serviços do Service Fabric particionamento] [ 10] toolearn mais sobre o particionamento de seu serviço.</span><span class="sxs-lookup"><span data-stu-id="a8c2c-173">Check out [Partitioning Service Fabric services][10] toolearn more about partitioning your service.</span></span>

<!--Image references-->
[Image1]: ./media/SF-Cost.png

<!--Link references--In actual articles, you only need a single period before hello slash-->
[10]: service-fabric-concepts-partitioning.md
