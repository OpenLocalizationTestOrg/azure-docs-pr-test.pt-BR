---
title: "Cadeia de conexão de armazenamento de imagens do Azure Service Fabric | Microsoft Docs"
description: "Entender a cadeia de conexão de armazenamento de imagens"
services: service-fabric
documentationcenter: .net
author: alexwun
manager: timlt
editor: 
ms.assetid: 00f8059d-9d53-4cb8-b44a-b25149de3030
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 06/07/2017
ms.author: alexwun
ms.openlocfilehash: f497006a8ba48da0032b82113702d8014952ca20
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/03/2017
---
# <a name="understand-the-imagestoreconnectionstring-setting"></a><span data-ttu-id="6913a-103">Noções básicas sobre a configuração ImageStoreConnectionString</span><span class="sxs-lookup"><span data-stu-id="6913a-103">Understand the ImageStoreConnectionString setting</span></span>

<span data-ttu-id="6913a-104">Em algumas das documentações, devemos mencionar brevemente a existência de um parâmetro "ImageStoreConnectionString" sem descrevendo o que realmente significa.</span><span class="sxs-lookup"><span data-stu-id="6913a-104">In some of our documentation, we briefly mention the existence of an "ImageStoreConnectionString" parameter without describing what it really means.</span></span> <span data-ttu-id="6913a-105">E depois de passar por meio de um artigo como [implantar e remover aplicativos usando o PowerShell][10], parece que tudo o que precisa fazer é copiar/colar o valor como ele aparece no manifesto do cluster do cluster de destino.</span><span class="sxs-lookup"><span data-stu-id="6913a-105">And after going through an article like [Deploy and remove applications using PowerShell][10], it looks like all you do is copy/paste the value as it appears in the cluster manifest of the target cluster.</span></span> <span data-ttu-id="6913a-106">Então, a configuração deve ser configurável por cluster, mas quando você cria um cluster por meio de [portal do Azure][11], não há nenhuma opção para definir esta configuração e é sempre "fabric: ImageStore".</span><span class="sxs-lookup"><span data-stu-id="6913a-106">So the setting must be configurable per cluster, but when you create a cluster through the [Azure portal][11], there's no option to configure this setting and it's always "fabric:ImageStore".</span></span> <span data-ttu-id="6913a-107">Qual é a finalidade dessa configuração?</span><span class="sxs-lookup"><span data-stu-id="6913a-107">What's the purpose of this setting then?</span></span>

![Manifesto do cluster][img_cm]

<span data-ttu-id="6913a-109">O Service Fabric começou como uma plataforma para consumo interno da Microsoft por muitas equipes diferentes, para alguns aspectos são altamente personalizáveis - o repositório"imagem" é um aspecto tal.</span><span class="sxs-lookup"><span data-stu-id="6913a-109">Service Fabric started off as a platform for internal Microsoft consumption by many diverse teams, so some aspects of it are highly customizable - the "Image Store" is one such aspect.</span></span> <span data-ttu-id="6913a-110">Essencialmente, o armazenamento de imagens é um repositório conectável para armazenar pacotes de aplicativos.</span><span class="sxs-lookup"><span data-stu-id="6913a-110">Essentially, the Image Store is a pluggable repository for storing application packages.</span></span> <span data-ttu-id="6913a-111">Quando seu aplicativo é implantado em um nó no cluster, o nó baixa o conteúdo de seu pacote de aplicativos do repositório de imagem.</span><span class="sxs-lookup"><span data-stu-id="6913a-111">When your application is deployed to a node in the cluster, that node downloads the contents of your application package from the Image Store.</span></span> <span data-ttu-id="6913a-112">ImageStoreConnectionString é uma configuração que inclui todas as informações necessárias para clientes e nós localizar o armazenamento correto de imagem de um determinado cluster.</span><span class="sxs-lookup"><span data-stu-id="6913a-112">The ImageStoreConnectionString is a setting that includes all the necessary information for both clients and nodes to find the correct Image Store for a given cluster.</span></span>

<span data-ttu-id="6913a-113">Existem três tipos possíveis de provedores de armazenamento de imagens e suas cadeias de conexão correspondentes são os seguintes:</span><span class="sxs-lookup"><span data-stu-id="6913a-113">There are currently three possible kinds of Image Store providers and their corresponding connection strings are as follows:</span></span>

1. <span data-ttu-id="6913a-114">Serviço de Armazenamento de Imagens: "fabric:ImageStore"</span><span class="sxs-lookup"><span data-stu-id="6913a-114">Image Store Service: "fabric:ImageStore"</span></span>

2. <span data-ttu-id="6913a-115">Sistema de Arquivos: "file:[caminho do sistema de arquivos]"</span><span class="sxs-lookup"><span data-stu-id="6913a-115">File System: "file:[file system path]"</span></span>

3. <span data-ttu-id="6913a-116">Armazenamento do Azure: "xstore:DefaultEndpointsProtocol=https;AccountName=[...];AccountKey=[...];Container=[...]"</span><span class="sxs-lookup"><span data-stu-id="6913a-116">Azure Storage: "xstore:DefaultEndpointsProtocol=https;AccountName=[...];AccountKey=[...];Container=[...]"</span></span>

<span data-ttu-id="6913a-117">O tipo de provedor usado na produção é o serviço de armazenamento de imagem, que é um serviço de sistema persistente com monitoração de estado que você pode ver no Service Fabric Explorer.</span><span class="sxs-lookup"><span data-stu-id="6913a-117">The provider type used in production is the Image Store Service, which is a stateful persisted system service that you can see from Service Fabric Explorer.</span></span> 

![Serviço de armazenamento de imagens][img_is]

<span data-ttu-id="6913a-119">O armazenamento de imagens em um serviço de sistema dentro do próprio cluster de hospedagem elimina as dependências externas para o repositório de pacotes e nos dá mais controle sobre a localidade de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="6913a-119">Hosting the Image Store in a system service within the cluster itself eliminates external dependencies for the package repository and gives us more control over the locality of storage.</span></span> <span data-ttu-id="6913a-120">As melhorias futuras no armazenamento de imagens do têm probabilidade do provedor de armazenamento de imagens de destino, primeiro, se não exclusivamente.</span><span class="sxs-lookup"><span data-stu-id="6913a-120">Future improvements around the Image Store are likely to target the Image Store provider first, if not exclusively.</span></span> <span data-ttu-id="6913a-121">A cadeia de conexão para o provedor de serviço de armazenamento de imagem não tem nenhuma informação exclusiva desde que o cliente já está conectado ao cluster de destino.</span><span class="sxs-lookup"><span data-stu-id="6913a-121">The connection string for the Image Store Service provider doesn't have any unique information since the client is already connected to the target cluster.</span></span> <span data-ttu-id="6913a-122">O cliente só precisa saber que protocolos direcionando o serviço do sistema devem ser usados.</span><span class="sxs-lookup"><span data-stu-id="6913a-122">The client only needs to know that protocols targeting the system service should be used.</span></span>

<span data-ttu-id="6913a-123">O provedor do sistema de arquivos é usado em vez do serviço de armazenamento de imagem para clusters de uma caixa locais durante o desenvolvimento para inicializar o cluster ligeiramente mais rápido.</span><span class="sxs-lookup"><span data-stu-id="6913a-123">The File System provider is used instead of the Image Store Service for local one-box clusters during development to bootstrap the cluster slightly faster.</span></span> <span data-ttu-id="6913a-124">A diferença é normalmente pequena, mas é uma otimização útil para a maioria das pessoas durante o desenvolvimento.</span><span class="sxs-lookup"><span data-stu-id="6913a-124">The difference is typically small, but it's a useful optimization for most folks during development.</span></span> <span data-ttu-id="6913a-125">É possível implantar um cluster local de uma caixa com os outros provedor tipos de armazenamento, bem, mas geralmente não há nenhum motivo para fazer isso, já que o fluxo de trabalho de desenvolvimento/teste permanece o mesmo, independentemente do provedor.</span><span class="sxs-lookup"><span data-stu-id="6913a-125">It's possible to deploy a local one-box cluster with the other storage provider types as well, but there's usually no reason to do so since the develop/test workflow remains the same regardless of provider.</span></span> <span data-ttu-id="6913a-126">Diferente para esse fim, os provedores de sistema de arquivos e armazenamento do Azure só existem para dar suporte.</span><span class="sxs-lookup"><span data-stu-id="6913a-126">Other than this usage, the File System and Azure Storage providers only exist for legacy support.</span></span>

<span data-ttu-id="6913a-127">Então embora ImageStoreConnectionString é configurável, você geralmente apenas usar a configuração padrão.</span><span class="sxs-lookup"><span data-stu-id="6913a-127">So while the ImageStoreConnectionString is configurable, you generally just use the default setting.</span></span> <span data-ttu-id="6913a-128">Ao publicar no Azure por meio do [Visual Studio][12], o parâmetro será definido automaticamente para você de forma adequada.</span><span class="sxs-lookup"><span data-stu-id="6913a-128">When publishing to Azure through [Visual Studio][12], the parameter is automatically set for you accordingly.</span></span> <span data-ttu-id="6913a-129">Para implantação programática em clusters hospedados no Azure, a cadeia de conexão sempre será "fabric: ImageStore".</span><span class="sxs-lookup"><span data-stu-id="6913a-129">For programmatic deployment to clusters hosted in Azure, the connection string is always "fabric:ImageStore".</span></span> <span data-ttu-id="6913a-130">Entretanto, em caso de dúvida, seu valor pode ser verificado sempre por meio da recuperação do manifesto do cluster pelo [PowerShell](https://docs.microsoft.com/powershell/servicefabric/vlatest/get-servicefabricclustermanifest), [.NET](https://msdn.microsoft.com/library/azure/mt161375.aspx) ou [REST](https://docs.microsoft.com/rest/api/servicefabric/get-a-cluster-manifest).</span><span class="sxs-lookup"><span data-stu-id="6913a-130">Though when in doubt, its value can always be verified by retrieving the cluster manifest by [PowerShell](https://docs.microsoft.com/powershell/servicefabric/vlatest/get-servicefabricclustermanifest), [.NET](https://msdn.microsoft.com/library/azure/mt161375.aspx), or [REST](https://docs.microsoft.com/rest/api/servicefabric/get-a-cluster-manifest).</span></span> <span data-ttu-id="6913a-131">Os clusters de teste e de produção locais sempre deverão estar configurados para usar o provedor do Serviço de repositório de imagens também.</span><span class="sxs-lookup"><span data-stu-id="6913a-131">Both on-premises test and production clusters should always be configured to use the Image Store Service provider as well.</span></span>

### <a name="next-steps"></a><span data-ttu-id="6913a-132">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="6913a-132">Next steps</span></span>
<span data-ttu-id="6913a-133">[Implantar e remover aplicativos usando o PowerShell][10]</span><span class="sxs-lookup"><span data-stu-id="6913a-133">[Deploy and remove applications using PowerShell][10]</span></span>

<!--Image references-->
[img_is]: ./media/service-fabric-image-store-connection-string/image_store_service.png
[img_cm]: ./media/service-fabric-image-store-connection-string/cluster_manifest.png

[10]: service-fabric-deploy-remove-applications.md
[11]: service-fabric-cluster-creation-via-portal.md
[12]: service-fabric-publish-app-remote-cluster.md
