---
title: aaaDebug microservices do Azure no Windows | Microsoft Docs
description: "Saiba como toomonitor e diagnosticar seus serviços escritos usando o Microsoft Azure Service Fabric em uma máquina de desenvolvimento local."
services: service-fabric
documentationcenter: .net
author: dkkapur
manager: timlt
editor: 
ms.assetid: edcc0631-ed2d-45a3-851d-2c4fa0f4a326
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 04/24/2017
ms.author: dekapur
ms.openlocfilehash: 24868aa194b8a28fa3e6de95c1de5506d912a544
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="monitor-and-diagnose-services-in-a-local-machine-development-setup"></a><span data-ttu-id="5c8bc-103">Monitorar e diagnosticar serviços em uma configuração de desenvolvimento do computador local</span><span class="sxs-lookup"><span data-stu-id="5c8bc-103">Monitor and diagnose services in a local machine development setup</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="5c8bc-104">Windows</span><span class="sxs-lookup"><span data-stu-id="5c8bc-104">Windows</span></span>](service-fabric-diagnostics-how-to-monitor-and-diagnose-services-locally.md)
> * [<span data-ttu-id="5c8bc-105">Linux</span><span class="sxs-lookup"><span data-stu-id="5c8bc-105">Linux</span></span>](service-fabric-diagnostics-how-to-monitor-and-diagnose-services-locally-linux.md)
> 
> 

<span data-ttu-id="5c8bc-106">Monitoramento, detectar, diagnosticar e solucionar problemas permitem toocontinue de serviços com a experiência do usuário toohello mínimo de interrupção.</span><span class="sxs-lookup"><span data-stu-id="5c8bc-106">Monitoring, detecting, diagnosing, and troubleshooting allow for services toocontinue with minimal disruption toohello user experience.</span></span> <span data-ttu-id="5c8bc-107">Enquanto o monitoramento e diagnóstico é essencial em um ambiente de produção implantado real, eficiência de saudação dependem adotando um modelo semelhante durante o desenvolvimento de serviços tooensure funcionam quando você move tooa instalação do mundo real.</span><span class="sxs-lookup"><span data-stu-id="5c8bc-107">While monitoring and diagnostics are critical in an actual deployed production environment, hello efficiency will depend on adopting a similar model during development of services tooensure they work when you move tooa real-world setup.</span></span> <span data-ttu-id="5c8bc-108">Malha do serviço facilita para diagnóstico de tooimplement de desenvolvedores de serviço que pode funcionar perfeitamente em configurações de desenvolvimento local único computador e configurações de cluster de produção do mundo real.</span><span class="sxs-lookup"><span data-stu-id="5c8bc-108">Service Fabric makes it easy for service developers tooimplement diagnostics that can seamlessly work across both single-machine local development setups and real-world production cluster setups.</span></span>

## <a name="event-tracing-for-windows"></a><span data-ttu-id="5c8bc-109">Rastreamento de Eventos para Windows</span><span class="sxs-lookup"><span data-stu-id="5c8bc-109">Event Tracing for Windows</span></span>
<span data-ttu-id="5c8bc-110">[Rastreamento de eventos do Windows](https://msdn.microsoft.com/library/windows/desktop/bb968803.aspx) (ETW) é hello recomendado tecnologia para mensagens de rastreamento na malha do serviço.</span><span class="sxs-lookup"><span data-stu-id="5c8bc-110">[Event Tracing for Windows](https://msdn.microsoft.com/library/windows/desktop/bb968803.aspx) (ETW) is hello recommended technology for tracing messages in Service Fabric.</span></span> <span data-ttu-id="5c8bc-111">Alguns benefícios de usar ETW são:</span><span class="sxs-lookup"><span data-stu-id="5c8bc-111">Some benefits of using ETW are:</span></span>

* <span data-ttu-id="5c8bc-112">**O ETW é rápido.**</span><span class="sxs-lookup"><span data-stu-id="5c8bc-112">**ETW is fast.**</span></span> <span data-ttu-id="5c8bc-113">Ele foi criado como uma tecnologia de rastreamento que tem impacto mínimo sobre os tempos de execução de código.</span><span class="sxs-lookup"><span data-stu-id="5c8bc-113">It was built as a tracing technology that has minimal impact on code execution times.</span></span>
* <span data-ttu-id="5c8bc-114">**O rastreamento ETW funciona perfeitamente nos ambientes de desenvolvimento locais e também nas configurações de cluster reais.**</span><span class="sxs-lookup"><span data-stu-id="5c8bc-114">**ETW tracing works seamlessly across local development environments and also real-world cluster setups.**</span></span> <span data-ttu-id="5c8bc-115">Isso significa que você não tem toorewrite o rastreamento de código quando você estiver pronto toodeploy cluster código tooa real.</span><span class="sxs-lookup"><span data-stu-id="5c8bc-115">This  means you don't have toorewrite your tracing code when you are ready toodeploy your code tooa real cluster.</span></span>
* <span data-ttu-id="5c8bc-116">**O código do sistema da Malha do Serviço também usa o ETW para rastreamento interno.**</span><span class="sxs-lookup"><span data-stu-id="5c8bc-116">**Service Fabric system code also uses ETW for internal tracing.**</span></span> <span data-ttu-id="5c8bc-117">Isso permite que você tooview os rastreamentos de aplicativo intercalados com rastreamentos de sistema do Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="5c8bc-117">This allows you tooview your application traces interleaved with Service Fabric system traces.</span></span> <span data-ttu-id="5c8bc-118">Ele também ajuda você toomore compreender facilmente sequências hello e as relações entre o código do aplicativo e os eventos no sistema subjacente hello.</span><span class="sxs-lookup"><span data-stu-id="5c8bc-118">It also helps you toomore easily understand hello sequences and interrelationships between your application code and events in hello underlying system.</span></span>
* <span data-ttu-id="5c8bc-119">**Não há suporte interno no serviço do Fabric Visual Studio tools tooview eventos ETW.**</span><span class="sxs-lookup"><span data-stu-id="5c8bc-119">**There is built-in support in Service Fabric Visual Studio tools tooview ETW events.**</span></span> <span data-ttu-id="5c8bc-120">Eventos ETW aparecem no hello exibição de eventos de diagnóstico do Visual Studio quando o Visual Studio está configurado corretamente com o Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="5c8bc-120">ETW events appear in hello Diagnostic Events view of Visual Studio once Visual Studio is correctly configured with Service Fabric.</span></span> 

## <a name="view-service-fabric-system-events-in-visual-studio"></a><span data-ttu-id="5c8bc-121">Exibir eventos do sistema da Malha do Serviço no Visual Studio</span><span class="sxs-lookup"><span data-stu-id="5c8bc-121">View Service Fabric system events in Visual Studio</span></span>
<span data-ttu-id="5c8bc-122">Serviço de malha emite eventos ETW de desenvolvedores de aplicativos toohelp entender o que está acontecendo na plataforma de saudação.</span><span class="sxs-lookup"><span data-stu-id="5c8bc-122">Service Fabric emits ETW events toohelp application developers understand what's happening in hello platform.</span></span> <span data-ttu-id="5c8bc-123">Se você ainda não fez isso, vá em frente e siga as etapas de saudação em [criando seu primeiro aplicativo no Visual Studio](service-fabric-create-your-first-application-in-visual-studio.md).</span><span class="sxs-lookup"><span data-stu-id="5c8bc-123">If you haven't already done so, go ahead and follow hello steps in [Creating your first application in Visual Studio](service-fabric-create-your-first-application-in-visual-studio.md).</span></span> <span data-ttu-id="5c8bc-124">Essas informações ajudarão você colocar um aplicativo em execução com hello Visualizador de eventos de diagnóstico mostrando Olá mensagens de rastreamento.</span><span class="sxs-lookup"><span data-stu-id="5c8bc-124">This information will help you get an application up and running with hello Diagnostics Events Viewer showing hello trace messages.</span></span>

1. <span data-ttu-id="5c8bc-125">Se diagnóstico Olá janela eventos não mostram, automaticamente, vá toohello **exibição** guia no Visual Studio, escolha **outras janelas** e **Visualizador de eventos de diagnóstico**.</span><span class="sxs-lookup"><span data-stu-id="5c8bc-125">If hello diagnostics events window does not automatically show, Go toohello **View** tab in Visual Studio, choose **Other Windows** and then **Diagnostic Events Viewer**.</span></span>
2. <span data-ttu-id="5c8bc-126">Cada evento contém informações de metadados padrão que informa ao evento de saudação nó, aplicativo e serviço Olá é proveniente.</span><span class="sxs-lookup"><span data-stu-id="5c8bc-126">Each event has standard metadata information that tells you hello node, application and service hello event is coming from.</span></span> <span data-ttu-id="5c8bc-127">Você também pode filtrar a lista de saudação de eventos usando Olá **filtrar eventos** caixa na parte superior de Olá Olá de janela de eventos.</span><span class="sxs-lookup"><span data-stu-id="5c8bc-127">You can also filter hello list of events by using hello **Filter events** box at hello top of hello events window.</span></span> <span data-ttu-id="5c8bc-128">Por exemplo, você pode filtrar por **Nome do Nó** ou **Nome do Serviço.**</span><span class="sxs-lookup"><span data-stu-id="5c8bc-128">For example, you can filter on **Node Name** or **Service Name.**</span></span> <span data-ttu-id="5c8bc-129">E quando você está olhando detalhes do evento, você também pode pausar usando Olá **pausar** botão na parte superior de Olá Olá de janela de eventos e reiniciar mais tarde sem qualquer perda de eventos.</span><span class="sxs-lookup"><span data-stu-id="5c8bc-129">And when you're looking at event details, you can also pause by using hello **Pause** button at hello top of hello events window and resume later without any loss of events.</span></span>
   
   ![Visualizador de Eventos de Diagnóstico do Visual Studio](./media/service-fabric-diagnostics-how-to-monitor-and-diagnose-services-locally/DiagEventsExamples2.png)

## <a name="add-your-own-custom-traces-toohello-application-code"></a><span data-ttu-id="5c8bc-131">Adicionar seu próprio código de aplicativo toohello rastreamentos personalizados</span><span class="sxs-lookup"><span data-stu-id="5c8bc-131">Add your own custom traces toohello application code</span></span>
<span data-ttu-id="5c8bc-132">modelos de projeto de serviço do Fabric Visual Studio Olá contêm o código de exemplo.</span><span class="sxs-lookup"><span data-stu-id="5c8bc-132">hello Service Fabric Visual Studio project templates contain sample code.</span></span> <span data-ttu-id="5c8bc-133">código de saudação mostra como o código de aplicativo personalizado tooadd ETW rastreia que mostram o no Visualizador de ETW do Visual Studio Olá junto com rastreamentos de sistema do Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="5c8bc-133">hello code shows how tooadd custom application code ETW traces that show up in hello Visual Studio ETW viewer alongside system traces from Service Fabric.</span></span> <span data-ttu-id="5c8bc-134">Olá vantagem desse método é que metadados são adicionados automaticamente tootraces e Olá Visual Studio diagnóstico Visualizador de eventos já está configurado toodisplay-los.</span><span class="sxs-lookup"><span data-stu-id="5c8bc-134">hello advantage of this method is that metadata is automatically added tootraces, and hello Visual Studio Diagnostic Events Viewer is already configured toodisplay them.</span></span>

<span data-ttu-id="5c8bc-135">Para projetos criados de saudação **modelos de serviço** (com ou sem estado) apenas procurar Olá `RunAsync` implementação:</span><span class="sxs-lookup"><span data-stu-id="5c8bc-135">For projects created from hello **service templates** (stateless or stateful) just search for hello `RunAsync` implementation:</span></span>

1. <span data-ttu-id="5c8bc-136">Olá chamada muito`ServiceEventSource.Current.ServiceMessage` em Olá `RunAsync` método mostra um exemplo de um rastreamento ETW personalizada do código do aplicativo hello.</span><span class="sxs-lookup"><span data-stu-id="5c8bc-136">hello call too`ServiceEventSource.Current.ServiceMessage` in hello `RunAsync` method shows an example of a custom ETW trace from hello application code.</span></span>
2. <span data-ttu-id="5c8bc-137">Em Olá **ServiceEventSource.cs** arquivo, você encontrará uma sobrecarga para Olá `ServiceEventSource.ServiceMessage` método deve ser usado para eventos de alta frequência devido a motivos de tooperformance.</span><span class="sxs-lookup"><span data-stu-id="5c8bc-137">In hello **ServiceEventSource.cs** file, you will find an overload for hello `ServiceEventSource.ServiceMessage` method that should be used for high-frequency events due tooperformance reasons.</span></span>

<span data-ttu-id="5c8bc-138">Para projetos criados de saudação **modelos de ator** (com ou sem estado):</span><span class="sxs-lookup"><span data-stu-id="5c8bc-138">For projects created from hello **actor templates** (stateless or stateful):</span></span>

1. <span data-ttu-id="5c8bc-139">Olá abrir **"ProjectName" CS** arquivo onde *ProjectName* é Olá nome escolhido para o projeto do Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="5c8bc-139">Open hello **"ProjectName".cs** file where *ProjectName* is hello name you chose for your Visual Studio project.</span></span>  
2. <span data-ttu-id="5c8bc-140">Localizar código Olá `ActorEventSource.Current.ActorMessage(this, "Doing Work");` em Olá *DoWorkAsync* método.</span><span class="sxs-lookup"><span data-stu-id="5c8bc-140">Find hello code `ActorEventSource.Current.ActorMessage(this, "Doing Work");` in hello *DoWorkAsync* method.</span></span>  <span data-ttu-id="5c8bc-141">Este é um exemplo de um rastreamento ETW personalizado escrito a partir do código do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="5c8bc-141">This is an example of a custom ETW trace written from application code.</span></span>  
3. <span data-ttu-id="5c8bc-142">No arquivo **ActorEventSource.cs**, você encontrará uma sobrecarga para Olá `ActorEventSource.ActorMessage` método deve ser usado para eventos de alta frequência devido a motivos de tooperformance.</span><span class="sxs-lookup"><span data-stu-id="5c8bc-142">In file **ActorEventSource.cs**, you will find an overload for hello `ActorEventSource.ActorMessage` method that should be used for high-frequency events due tooperformance reasons.</span></span>

<span data-ttu-id="5c8bc-143">Depois de adicionar tooyour código de serviço de rastreamento de ETW personalizado, você pode criar, implantar e executar o aplicativo hello toosee novamente o evento (s) no Visualizador de eventos de diagnóstico de saudação.</span><span class="sxs-lookup"><span data-stu-id="5c8bc-143">After adding custom ETW tracing tooyour service code, you can build, deploy, and run hello application again toosee your event(s) in hello Diagnostic Events Viewer.</span></span> <span data-ttu-id="5c8bc-144">Se você depurar o aplicativo hello com **F5**, Olá Visualizador de eventos de diagnóstico será aberto automaticamente.</span><span class="sxs-lookup"><span data-stu-id="5c8bc-144">If you debug hello application with **F5**, hello Diagnostic Events Viewer will open automatically.</span></span>

## <a name="next-steps"></a><span data-ttu-id="5c8bc-145">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="5c8bc-145">Next steps</span></span>
<span data-ttu-id="5c8bc-146">Olá mesmo código de rastreamento que você adicionou o aplicativo tooyour acima para diagnóstico local funcionará com ferramentas que você pode usar tooview esses eventos durante a execução de seu aplicativo em um cluster do Azure.</span><span class="sxs-lookup"><span data-stu-id="5c8bc-146">hello same tracing code that you added tooyour application above for local diagnostics will work with tools that you can use tooview these events when running your application on an Azure cluster.</span></span> <span data-ttu-id="5c8bc-147">Consulte estes artigos que abordam opções diferentes de saudação para ferramentas hello e descrevem como você pode defini-las para cima.</span><span class="sxs-lookup"><span data-stu-id="5c8bc-147">Check out these articles that discuss hello different options for hello tools and describe how you can set them up.</span></span>

* [<span data-ttu-id="5c8bc-148">Como toocollect registra com o diagnóstico do Azure</span><span class="sxs-lookup"><span data-stu-id="5c8bc-148">How toocollect logs with Azure Diagnostics</span></span>](service-fabric-diagnostics-how-to-setup-wad.md)
* [<span data-ttu-id="5c8bc-149">Agregação e coleta de eventos usando o EventFlow</span><span class="sxs-lookup"><span data-stu-id="5c8bc-149">Event aggregation and collection using EventFlow</span></span>](service-fabric-diagnostics-event-aggregation-eventflow.md)

