---
title: "carga do Azure microsserviço aaaManage usando métricas | Microsoft Docs"
description: "Saiba mais sobre como as métricas de tooconfigure e usar no Service Fabric toomanage serviço consumo de recursos."
services: service-fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: 
ms.assetid: 0d622ea6-a7c7-4bef-886b-06e6b85a97fb
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/18/2017
ms.author: masnider
ms.openlocfilehash: 592dc749ce30683a1e439a702b7d0dc0a638276f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="managing-resource-consumption-and-load-in-service-fabric-with-metrics"></a><span data-ttu-id="123c6-103">Gerenciando o consumo e a carga de recursos no Service Fabric com métricas</span><span class="sxs-lookup"><span data-stu-id="123c6-103">Managing resource consumption and load in Service Fabric with metrics</span></span>
<span data-ttu-id="123c6-104">*Métricas* recursos de saudação valoriza seus serviços e que é fornecido por nós de saudação no cluster de saudação.</span><span class="sxs-lookup"><span data-stu-id="123c6-104">*Metrics* are hello resources that your services care about and which are provided by hello nodes in hello cluster.</span></span> <span data-ttu-id="123c6-105">Uma métrica é algo que você deseja toomanage no desempenho de saudação tooimprove ou o monitor de ordem de seus serviços.</span><span class="sxs-lookup"><span data-stu-id="123c6-105">A metric is anything that you want toomanage in order tooimprove or monitor hello performance of your services.</span></span> <span data-ttu-id="123c6-106">Por exemplo, você pode observar tooknow de consumo de memória se o serviço está sobrecarregado.</span><span class="sxs-lookup"><span data-stu-id="123c6-106">For example, you might watch memory consumption tooknow if your service is overloaded.</span></span> <span data-ttu-id="123c6-107">Outro uso é toofigure out se serviço Olá podia se mover em outro lugar em que a memória é que menos restrita em um desempenho melhor ordem tooget.</span><span class="sxs-lookup"><span data-stu-id="123c6-107">Another use is toofigure out whether hello service could move elsewhere where memory is less constrained in order tooget better performance.</span></span>

<span data-ttu-id="123c6-108">Itens como Memória, Disco e Uso de CPU são exemplos de métricas.</span><span class="sxs-lookup"><span data-stu-id="123c6-108">Things like Memory, Disk, and CPU usage are examples of metrics.</span></span> <span data-ttu-id="123c6-109">Essas métricas são métricas físicas, recursos que correspondem a recursos de toophysical no nó de saudação que precisam toobe gerenciado.</span><span class="sxs-lookup"><span data-stu-id="123c6-109">These metrics are physical metrics, resources that correspond toophysical resources on hello node that need toobe managed.</span></span> <span data-ttu-id="123c6-110">As métricas também podem ser (e normalmente são) métricas lógicas.</span><span class="sxs-lookup"><span data-stu-id="123c6-110">Metrics can also be (and commonly are) logical metrics.</span></span> <span data-ttu-id="123c6-111">Métricas lógicas são itens como "MyWorkQueueDepth", "MessagesToProcess" ou "TotalRecords".</span><span class="sxs-lookup"><span data-stu-id="123c6-111">Logical metrics are things like “MyWorkQueueDepth” or "MessagesToProcess" or "TotalRecords".</span></span> <span data-ttu-id="123c6-112">Métricas lógicas são definidas pelo aplicativo e indiretamente correspondem toosome consumo de recursos físicos.</span><span class="sxs-lookup"><span data-stu-id="123c6-112">Logical metrics are application-defined and indirectly correspond toosome physical resource consumption.</span></span> <span data-ttu-id="123c6-113">Métricas lógicas são comuns, como pode ser difícil toomeasure e relatórios de consumo de recursos físicos em uma base por serviço.</span><span class="sxs-lookup"><span data-stu-id="123c6-113">Logical metrics are common because it can be hard toomeasure and report consumption of physical resources on a per-service basis.</span></span> <span data-ttu-id="123c6-114">complexidade de saudação de medir e suas próprias métricas físicas de relatórios também é porque o serviço de malha fornece algumas métricas padrão.</span><span class="sxs-lookup"><span data-stu-id="123c6-114">hello complexity of measuring and reporting your own physical metrics is also why Service Fabric provides some default metrics.</span></span>

## <a name="default-metrics"></a><span data-ttu-id="123c6-115">Métricas padrão</span><span class="sxs-lookup"><span data-stu-id="123c6-115">Default metrics</span></span>
<span data-ttu-id="123c6-116">Digamos que você deseja tooget iniciado gravar e implantar seu serviço.</span><span class="sxs-lookup"><span data-stu-id="123c6-116">Let’s say that you want tooget started writing and deploying your service.</span></span> <span data-ttu-id="123c6-117">Neste ponto, você não sabe quais recursos físicos ou lógicos serão consumidos.</span><span class="sxs-lookup"><span data-stu-id="123c6-117">At this point you don’t know what physical or logical resources it consumes.</span></span> <span data-ttu-id="123c6-118">Sem problemas!</span><span class="sxs-lookup"><span data-stu-id="123c6-118">That’s fine!</span></span> <span data-ttu-id="123c6-119">Olá Gerenciador de recursos de Cluster do serviço de malha usa algumas métricas padrão quando não há outras métricas são especificadas.</span><span class="sxs-lookup"><span data-stu-id="123c6-119">hello Service Fabric Cluster Resource Manager uses some default metrics when no other metrics are specified.</span></span> <span data-ttu-id="123c6-120">Eles são:</span><span class="sxs-lookup"><span data-stu-id="123c6-120">They are:</span></span>

  - <span data-ttu-id="123c6-121">PrimaryCount - contagem de réplicas primárias no nó Olá</span><span class="sxs-lookup"><span data-stu-id="123c6-121">PrimaryCount - count of Primary replicas on hello node</span></span> 
  - <span data-ttu-id="123c6-122">ReplicaCount - contagem total de réplicas com monitoração de estado no nó Olá</span><span class="sxs-lookup"><span data-stu-id="123c6-122">ReplicaCount - count of total stateful replicas on hello node</span></span>
  - <span data-ttu-id="123c6-123">Contagem - contagem de todos os objetos de serviço (com e sem monitoração) no nó Olá</span><span class="sxs-lookup"><span data-stu-id="123c6-123">Count - count of all service objects (stateless and stateful) on hello node</span></span>

| <span data-ttu-id="123c6-124">Métrica</span><span class="sxs-lookup"><span data-stu-id="123c6-124">Metric</span></span> | <span data-ttu-id="123c6-125">Carga de Instância Sem Estado</span><span class="sxs-lookup"><span data-stu-id="123c6-125">Stateless Instance Load</span></span> | <span data-ttu-id="123c6-126">Carga Secundária com Estado</span><span class="sxs-lookup"><span data-stu-id="123c6-126">Stateful Secondary Load</span></span> | <span data-ttu-id="123c6-127">Carga Primária com Estado</span><span class="sxs-lookup"><span data-stu-id="123c6-127">Stateful Primary Load</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="123c6-128">PrimaryCount</span><span class="sxs-lookup"><span data-stu-id="123c6-128">PrimaryCount</span></span> |<span data-ttu-id="123c6-129">0</span><span class="sxs-lookup"><span data-stu-id="123c6-129">0</span></span> |<span data-ttu-id="123c6-130">0</span><span class="sxs-lookup"><span data-stu-id="123c6-130">0</span></span> |<span data-ttu-id="123c6-131">1</span><span class="sxs-lookup"><span data-stu-id="123c6-131">1</span></span> |
| <span data-ttu-id="123c6-132">ReplicaCount</span><span class="sxs-lookup"><span data-stu-id="123c6-132">ReplicaCount</span></span> |<span data-ttu-id="123c6-133">0</span><span class="sxs-lookup"><span data-stu-id="123c6-133">0</span></span> |<span data-ttu-id="123c6-134">1</span><span class="sxs-lookup"><span data-stu-id="123c6-134">1</span></span> |<span data-ttu-id="123c6-135">1</span><span class="sxs-lookup"><span data-stu-id="123c6-135">1</span></span> |
| <span data-ttu-id="123c6-136">Contagem</span><span class="sxs-lookup"><span data-stu-id="123c6-136">Count</span></span> |<span data-ttu-id="123c6-137">1</span><span class="sxs-lookup"><span data-stu-id="123c6-137">1</span></span> |<span data-ttu-id="123c6-138">1</span><span class="sxs-lookup"><span data-stu-id="123c6-138">1</span></span> |<span data-ttu-id="123c6-139">1</span><span class="sxs-lookup"><span data-stu-id="123c6-139">1</span></span> |

<span data-ttu-id="123c6-140">Para cargas de trabalho básicas, métricas de padrão de saudação fornecem uma distribuição razoável de trabalho no cluster hello.</span><span class="sxs-lookup"><span data-stu-id="123c6-140">For basic workloads, hello default metrics provide a decent distribution of work in hello cluster.</span></span> <span data-ttu-id="123c6-141">Saudação de exemplo a seguir, vamos ver o que acontece quando criamos dois serviços e confiar na métrica padrão de saudação para balanceamento de.</span><span class="sxs-lookup"><span data-stu-id="123c6-141">In hello following example, let’s see what happens when we create two services and rely on hello default metrics for balancing.</span></span> <span data-ttu-id="123c6-142">serviço primeiro Olá é um serviço com monitoração de estado com três partições e uma réplica de destino define tamanho de três.</span><span class="sxs-lookup"><span data-stu-id="123c6-142">hello first service is a stateful service with three partitions and a target replica set size of three.</span></span> <span data-ttu-id="123c6-143">segundo serviço de saudação é um serviço sem monitoração de estado com uma partição e uma contagem de instâncias de três.</span><span class="sxs-lookup"><span data-stu-id="123c6-143">hello second service is a stateless service with one partition and an instance count of three.</span></span>

<span data-ttu-id="123c6-144">Veja o acontece:</span><span class="sxs-lookup"><span data-stu-id="123c6-144">Here's what you get:</span></span>

<span data-ttu-id="123c6-145"><center>
![Layout de cluster com métricas padrão][Image1]
</center></span><span class="sxs-lookup"><span data-stu-id="123c6-145"><center>
![Cluster Layout with Default Metrics][Image1]
</center></span></span>

<span data-ttu-id="123c6-146">Toonote algumas coisas:</span><span class="sxs-lookup"><span data-stu-id="123c6-146">Some things toonote:</span></span>
  - <span data-ttu-id="123c6-147">As réplicas primárias para o serviço com monitoração de estado Olá são distribuídas por vários nós</span><span class="sxs-lookup"><span data-stu-id="123c6-147">Primary replicas for hello stateful service are distributed across several nodes</span></span>
  - <span data-ttu-id="123c6-148">Réplicas para a mesma partição são em nós diferentes de saudação</span><span class="sxs-lookup"><span data-stu-id="123c6-148">Replicas for hello same partition are on different nodes</span></span>
  - <span data-ttu-id="123c6-149">número total de saudação do primários e secundários é distribuído no cluster Olá</span><span class="sxs-lookup"><span data-stu-id="123c6-149">hello total number of primaries and secondaries is distributed in hello cluster</span></span>
  - <span data-ttu-id="123c6-150">número total de saudação de objetos de serviço é alocado igualmente em cada nó</span><span class="sxs-lookup"><span data-stu-id="123c6-150">hello total number of service objects are evenly allocated on each node</span></span>

<span data-ttu-id="123c6-151">Ótimo!</span><span class="sxs-lookup"><span data-stu-id="123c6-151">Good!</span></span>

<span data-ttu-id="123c6-152">métrica de padrão de saudação funciona muito bem como de início.</span><span class="sxs-lookup"><span data-stu-id="123c6-152">hello default metrics work great as a start.</span></span> <span data-ttu-id="123c6-153">No entanto, as métricas padrão de saudação apenas realizará a você até o momento.</span><span class="sxs-lookup"><span data-stu-id="123c6-153">However, hello default metrics will only carry you so far.</span></span> <span data-ttu-id="123c6-154">Por exemplo: o que é a probabilidade de saudação que Olá particionamento esquema separado resultados na utilização perfeitamente até mesmo por todas as partições?</span><span class="sxs-lookup"><span data-stu-id="123c6-154">For example: What's hello likelihood that hello partitioning scheme you picked results in perfectly even utilization by all partitions?</span></span> <span data-ttu-id="123c6-155">O que é a chance de Olá Olá carga para um determinado serviço é constante ao longo do tempo ou até mesmo Olá mesmo por várias partições agora?</span><span class="sxs-lookup"><span data-stu-id="123c6-155">What’s hello chance that hello load for a given service is constant over time, or even just hello same across multiple partitions right now?</span></span>

<span data-ttu-id="123c6-156">Você pode executar com apenas as métricas saudação padrão.</span><span class="sxs-lookup"><span data-stu-id="123c6-156">You could run with just hello default metrics.</span></span> <span data-ttu-id="123c6-157">No entanto, isso geralmente significa que a utilização do cluster é menor e mais irregular que o desejado.</span><span class="sxs-lookup"><span data-stu-id="123c6-157">However, doing so usually means that your cluster utilization is lower and more uneven than you’d like.</span></span> <span data-ttu-id="123c6-158">Isso ocorre porque as métricas padrão de saudação não adaptáveis e vamos supor que tudo o que é equivalente.</span><span class="sxs-lookup"><span data-stu-id="123c6-158">This is because hello default metrics aren't adaptive and presume everything is equivalent.</span></span> <span data-ttu-id="123c6-159">Por exemplo, uma réplica primária está ocupada e não é ambos os contribuem métrica de PrimaryCount toohello "1".</span><span class="sxs-lookup"><span data-stu-id="123c6-159">For example, a Primary that is busy and one that is not both contribute "1" toohello PrimaryCount metric.</span></span> <span data-ttu-id="123c6-160">No pior caso de Olá, usando apenas as métricas saudação padrão também pode resultar em nós overscheduled, resultando em problemas de desempenho.</span><span class="sxs-lookup"><span data-stu-id="123c6-160">In hello worst case, using only hello default metrics can also result in overscheduled nodes resulting in performance issues.</span></span> <span data-ttu-id="123c6-161">Se você estiver interessado em obter hello mais fora do seu cluster e evitar problemas de desempenho, você precisa toouse personalizados de métricas e relatórios de carga dinâmico.</span><span class="sxs-lookup"><span data-stu-id="123c6-161">If you're interested in getting hello most out of your cluster and avoiding performance issues, you need toouse custom metrics and dynamic load reporting.</span></span>

## <a name="custom-metrics"></a><span data-ttu-id="123c6-162">Métricas personalizadas</span><span class="sxs-lookup"><span data-stu-id="123c6-162">Custom metrics</span></span>
<span data-ttu-id="123c6-163">Métricas são configuradas em uma base por--serviço-instância nomeada quando você está criando o serviço de saudação.</span><span class="sxs-lookup"><span data-stu-id="123c6-163">Metrics are configured on a per-named-service-instance basis when you’re creating hello service.</span></span>

<span data-ttu-id="123c6-164">Qualquer métrica possui propriedades que a descrevem: um nome, um peso e uma carga padrão.</span><span class="sxs-lookup"><span data-stu-id="123c6-164">Any metric has some properties that describe it: a name, a weight, and a default load.</span></span>

* <span data-ttu-id="123c6-165">Nome de métrica: nome de saudação da métrica de saudação.</span><span class="sxs-lookup"><span data-stu-id="123c6-165">Metric Name: hello name of hello metric.</span></span> <span data-ttu-id="123c6-166">nome da métrica Olá é um identificador exclusivo para a métrica Olá no cluster de saudação do ponto de vista do Gerenciador de recursos de saudação.</span><span class="sxs-lookup"><span data-stu-id="123c6-166">hello metric name is a unique identifier for hello metric within hello cluster from hello Resource Manager’s perspective.</span></span>
* <span data-ttu-id="123c6-167">Peso: Peso da métrica define a importância essa métrica é relativo toohello outras métricas para esse serviço.</span><span class="sxs-lookup"><span data-stu-id="123c6-167">Weight: Metric weight defines how important this metric is relative toohello other metrics for this service.</span></span>
* <span data-ttu-id="123c6-168">Padrão de carga: carga de padrão de saudação é representada diferente dependendo se o serviço de saudação é com ou sem estado.</span><span class="sxs-lookup"><span data-stu-id="123c6-168">Default Load: hello default load is represented differently depending on whether hello service is stateless or stateful.</span></span>
  * <span data-ttu-id="123c6-169">Para serviços sem estado cada métrica tem uma propriedade única chamada DeafultLoad</span><span class="sxs-lookup"><span data-stu-id="123c6-169">For stateless services, each metric has a single property named DefaultLoad</span></span>
  * <span data-ttu-id="123c6-170">Para serviços com estado, você define:</span><span class="sxs-lookup"><span data-stu-id="123c6-170">For stateful services you define:</span></span>
    * <span data-ttu-id="123c6-171">PrimaryDefaultLoad: quantidade dessa métrica que esse serviço consome quando ele é primária padrão da saudação</span><span class="sxs-lookup"><span data-stu-id="123c6-171">PrimaryDefaultLoad: hello default amount of this metric this service consumes when it is a Primary</span></span>
    * <span data-ttu-id="123c6-172">SecondaryDefaultLoad: quantidade de padrão de saudação dessa métrica que esse serviço consome quando ele for um secundário</span><span class="sxs-lookup"><span data-stu-id="123c6-172">SecondaryDefaultLoad: hello default amount of this metric this service consumes when it is a Secondary</span></span>

> [!NOTE]
> <span data-ttu-id="123c6-173">Se você definir métricas personalizadas e deseja too_also_ usar a métrica da saudação padrão, será necessário too_explicitly_ adicionar métricas de padrão de saudação fazer e definem os pesos e os valores para eles.</span><span class="sxs-lookup"><span data-stu-id="123c6-173">If you define custom metrics and you want too_also_ use hello default metrics, you need too_explicitly_ add hello default metrics back and define weights and values for them.</span></span> <span data-ttu-id="123c6-174">Isso ocorre porque você deve definir a relação de saudação entre as métricas padrão de saudação e suas métricas personalizadas.</span><span class="sxs-lookup"><span data-stu-id="123c6-174">This is because you must define hello relationship between hello default metrics and your custom metrics.</span></span> <span data-ttu-id="123c6-175">Por exemplo, talvez você se preocupe mais com ConnectionCount ou WorkQueueDepth do que com a distribuição Principal.</span><span class="sxs-lookup"><span data-stu-id="123c6-175">For example, maybe you care about ConnectionCount or WorkQueueDepth more than Primary distribution.</span></span> <span data-ttu-id="123c6-176">Por peso de saudação do padrão de saudação PrimaryCount métrica é alta, para que você deseja tooreduce-tooMedium quando você adiciona o tooensure de métricas que eles têm precedência.</span><span class="sxs-lookup"><span data-stu-id="123c6-176">By default hello weight of hello PrimaryCount metric is High, so you want tooreduce it tooMedium when you add your other metrics tooensure they take precedence.</span></span>
>

### <a name="defining-metrics-for-your-service---an-example"></a><span data-ttu-id="123c6-177">Definindo métricas para seu serviço - um exemplo</span><span class="sxs-lookup"><span data-stu-id="123c6-177">Defining metrics for your service - an example</span></span>
<span data-ttu-id="123c6-178">Vamos supor que você queira Olá a seguinte configuração:</span><span class="sxs-lookup"><span data-stu-id="123c6-178">Let’s say you want hello following configuration:</span></span>

  - <span data-ttu-id="123c6-179">O serviço relata uma métrica denominada “ConnectionCount”</span><span class="sxs-lookup"><span data-stu-id="123c6-179">Your service reports a metric named "ConnectionCount”</span></span>
  - <span data-ttu-id="123c6-180">Você deseja que as métricas do toouse saudação padrão</span><span class="sxs-lookup"><span data-stu-id="123c6-180">You also want toouse hello default metrics</span></span> 
  - <span data-ttu-id="123c6-181">Você fez algumas medições e sabe que normalmente uma réplica Primária desse serviço requer 20 unidades de “ConnectionCount”</span><span class="sxs-lookup"><span data-stu-id="123c6-181">You’ve done some measurements and know that normally a Primary replica of that service takes up 20 units of "ConnectionCount"</span></span>
  - <span data-ttu-id="123c6-182">As secundárias usam 5 unidades de "ConnectionCount"</span><span class="sxs-lookup"><span data-stu-id="123c6-182">Secondaries use 5 units of "ConnectionCount"</span></span>
  - <span data-ttu-id="123c6-183">Você sabe que "ConnectionCount" hello mais importante em termos de Gerenciando o desempenho de saudação do serviço específico</span><span class="sxs-lookup"><span data-stu-id="123c6-183">You know that "ConnectionCount" is hello most important metric in terms of managing hello performance of this particular service</span></span>
  - <span data-ttu-id="123c6-184">Você ainda deseja que as réplicas Principais sejam balanceadas.</span><span class="sxs-lookup"><span data-stu-id="123c6-184">You still want Primary replicas balanced.</span></span> <span data-ttu-id="123c6-185">Balancear réplicas primárias geralmente é uma boa ideia.</span><span class="sxs-lookup"><span data-stu-id="123c6-185">Balancing primary replicas is generally a good idea no matter what.</span></span> <span data-ttu-id="123c6-186">Isso ajuda a evitar a perda de saudação de algum nó ou falha de domínio afetam a maioria das réplicas primárias junto com ele.</span><span class="sxs-lookup"><span data-stu-id="123c6-186">This helps prevent hello loss of some node or fault domain from impacting a majority of primary replicas along with it.</span></span> 
  - <span data-ttu-id="123c6-187">Caso contrário, as métricas padrão de saudação são permitidas</span><span class="sxs-lookup"><span data-stu-id="123c6-187">Otherwise, hello default metrics are fine</span></span>

<span data-ttu-id="123c6-188">Aqui está o código de saudação que você escreve toocreate um serviço com essa configuração de métrica:</span><span class="sxs-lookup"><span data-stu-id="123c6-188">Here’s hello code that you would write toocreate a service with that metric configuration:</span></span>

<span data-ttu-id="123c6-189">Código:</span><span class="sxs-lookup"><span data-stu-id="123c6-189">Code:</span></span>

```csharp
StatefulServiceDescription serviceDescription = new StatefulServiceDescription();
StatefulServiceLoadMetricDescription connectionMetric = new StatefulServiceLoadMetricDescription();
connectionMetric.Name = "ConnectionCount";
connectionMetric.PrimaryDefaultLoad = 20;
connectionMetric.SecondaryDefaultLoad = 5;
connectionMetric.Weight = ServiceLoadMetricWeight.High;

StatefulServiceLoadMetricDescription primaryCountMetric = new StatefulServiceLoadMetricDescription();
primaryCountMetric.Name = "PrimaryCount";
primaryCountMetric.PrimaryDefaultLoad = 1;
primaryCountMetric.SecondaryDefaultLoad = 0;
primaryCountMetric.Weight = ServiceLoadMetricWeight.Medium;

StatefulServiceLoadMetricDescription replicaCountMetric = new StatefulServiceLoadMetricDescription();
replicaCountMetric.Name = "ReplicaCount";
replicaCountMetric.PrimaryDefaultLoad = 1;
replicaCountMetric.SecondaryDefaultLoad = 1;
replicaCountMetric.Weight = ServiceLoadMetricWeight.Low;

StatefulServiceLoadMetricDescription totalCountMetric = new StatefulServiceLoadMetricDescription();
totalCountMetric.Name = "Count";
totalCountMetric.PrimaryDefaultLoad = 1;
totalCountMetric.SecondaryDefaultLoad = 1;
totalCountMetric.Weight = ServiceLoadMetricWeight.Low;

serviceDescription.Metrics.Add(connectionMetric);
serviceDescription.Metrics.Add(primaryCountMetric);
serviceDescription.Metrics.Add(replicaCountMetric);
serviceDescription.Metrics.Add(totalCountMetric);

await fabricClient.ServiceManager.CreateServiceAsync(serviceDescription);
```

<span data-ttu-id="123c6-190">Powershell:</span><span class="sxs-lookup"><span data-stu-id="123c6-190">Powershell:</span></span>

```posh
New-ServiceFabricService -ApplicationName $applicationName -ServiceName $serviceName -ServiceTypeName $serviceTypeName –Stateful -MinReplicaSetSize 3 -TargetReplicaSetSize 3 -PartitionSchemeSingleton –Metric @("ConnectionCount,High,20,5”,"PrimaryCount,Medium,1,0”,"ReplicaCount,Low,1,1”,"Count,Low,1,1”)
```

> [!NOTE]
> <span data-ttu-id="123c6-191">Olá acima exemplos e hello restante deste documento descrevem as métricas de gerenciamento em uma base por chamada-serviço.</span><span class="sxs-lookup"><span data-stu-id="123c6-191">hello above examples and hello rest of this document describe managing metrics on a per-named-service basis.</span></span> <span data-ttu-id="123c6-192">Também é possível toodefine métricas para os serviços no serviço de saudação _tipo_ nível.</span><span class="sxs-lookup"><span data-stu-id="123c6-192">It is also possible toodefine metrics for your services at hello service _type_ level.</span></span> <span data-ttu-id="123c6-193">Isso é feito especificando-as em seus manifestos de serviço.</span><span class="sxs-lookup"><span data-stu-id="123c6-193">This is accomplished by specifying them in your service manifests.</span></span> <span data-ttu-id="123c6-194">Não é recomendável definir as métricas do nível de tipo por vários motivos.</span><span class="sxs-lookup"><span data-stu-id="123c6-194">Defining type level metrics is not recommended for several reasons.</span></span> <span data-ttu-id="123c6-195">Olá primeiro motivo é que os nomes de métrica são frequentemente específico do ambiente.</span><span class="sxs-lookup"><span data-stu-id="123c6-195">hello first reason is that metric names are frequently environment-specific.</span></span> <span data-ttu-id="123c6-196">A menos que haja um contrato sólido em vigor, você não pode ter certeza de que métrica hello "Núcleos" em um ambiente não é "MiliCores" ou "Núcleos" em outros.</span><span class="sxs-lookup"><span data-stu-id="123c6-196">Unless there is a firm contract in place, you cannot be sure that hello metric "Cores" in one environment isn't "MiliCores" or "CoReS" in others.</span></span> <span data-ttu-id="123c6-197">Se suas métricas são definidas em seu manifesto, você precisará manifestos de novo toocreate por ambiente.</span><span class="sxs-lookup"><span data-stu-id="123c6-197">If your metrics are defined in your manifest you need toocreate new manifests per environment.</span></span> <span data-ttu-id="123c6-198">Isso geralmente leva tooa proliferação de manifestos diferentes com apenas algumas diferenças, que podem levar a problemas de toomanagement.</span><span class="sxs-lookup"><span data-stu-id="123c6-198">This usually leads tooa proliferation of different manifests with only minor differences, which can lead toomanagement difficulties.</span></span>  
>
> <span data-ttu-id="123c6-199">Cargas de métricas normalmente são atribuídas por instância de serviço nomeada.</span><span class="sxs-lookup"><span data-stu-id="123c6-199">Metric loads are commonly assigned on a per-named-service-instance basis.</span></span> <span data-ttu-id="123c6-200">Por exemplo, digamos que você criar uma instância de saudação do serviço para CustomerA que planeja toouse-pouco.</span><span class="sxs-lookup"><span data-stu-id="123c6-200">For example, let's say you create one instance of hello service for CustomerA who plans toouse it only lightly.</span></span> <span data-ttu-id="123c6-201">Digamos que você também crie outra para ClienteB que tem uma carga de trabalho maior.</span><span class="sxs-lookup"><span data-stu-id="123c6-201">Let's also say you create another for CustomerB who has a larger workload.</span></span> <span data-ttu-id="123c6-202">Nesse caso, talvez seja conveniente padrão de saudação tootweak carrega para esses serviços.</span><span class="sxs-lookup"><span data-stu-id="123c6-202">In this case, you'd probably want tootweak hello default loads for those services.</span></span> <span data-ttu-id="123c6-203">Se você tiver as métricas e carrega definida por meio de manifestos e você deseja toosupport neste cenário, requer diferentes aplicativos e tipos de serviço para cada cliente.</span><span class="sxs-lookup"><span data-stu-id="123c6-203">If you have metrics and loads defined via manifests and you want toosupport this scenario, it requires different application and service types for each customer.</span></span> <span data-ttu-id="123c6-204">valores de saudação definidos no momento da criação de serviço substituem as definidas no manifesto de hello, portanto você pode usar esse tooset Olá os padrões específicos.</span><span class="sxs-lookup"><span data-stu-id="123c6-204">hello values defined at service creation time override those defined in hello manifest, so you could use that tooset hello specific defaults.</span></span> <span data-ttu-id="123c6-205">No entanto, isso faz com que valores hello declarados na correspondência de toonot manifestos Olá com que esses Olá serviço realmente é executado.</span><span class="sxs-lookup"><span data-stu-id="123c6-205">However, doing that causes hello values declared in hello manifests toonot match those hello service actually runs with.</span></span> <span data-ttu-id="123c6-206">Isso pode levar tooconfusion.</span><span class="sxs-lookup"><span data-stu-id="123c6-206">This can lead tooconfusion.</span></span> 
>

<span data-ttu-id="123c6-207">Como um lembrete: se você quiser apenas as métricas do toouse saudação padrão, não precisa a coleção de métricas Olá tootouch em todos os ou fazer algo especial ao criar o serviço.</span><span class="sxs-lookup"><span data-stu-id="123c6-207">As a reminder: if you just want toouse hello default metrics, you don’t need tootouch hello metrics collection at all or do anything special when creating your service.</span></span> <span data-ttu-id="123c6-208">métrica de padrão de saudação obter usada automaticamente quando não há outros são definidos.</span><span class="sxs-lookup"><span data-stu-id="123c6-208">hello default metrics get used automatically when no others are defined.</span></span> 

<span data-ttu-id="123c6-209">Agora, vamos percorrer cada uma dessas configurações mais detalhadamente e falar sobre o comportamento de saudação que ela influencia.</span><span class="sxs-lookup"><span data-stu-id="123c6-209">Now, let's go through each of these settings in more detail and talk about hello behavior that it influences.</span></span>

## <a name="load"></a><span data-ttu-id="123c6-210">Carregar</span><span class="sxs-lookup"><span data-stu-id="123c6-210">Load</span></span>
<span data-ttu-id="123c6-211">Olá objetivo de definir métricas é toorepresent alguma carga.</span><span class="sxs-lookup"><span data-stu-id="123c6-211">hello whole point of defining metrics is toorepresent some load.</span></span> <span data-ttu-id="123c6-212">*Carga* é a quantidade de determinada métrica consumida por alguma instância de serviço ou réplica em determinado nó.</span><span class="sxs-lookup"><span data-stu-id="123c6-212">*Load* is how much of a given metric is consumed by some service instance or replica on a given node.</span></span> <span data-ttu-id="123c6-213">A carga pode ser configurada em praticamente qualquer ponto.</span><span class="sxs-lookup"><span data-stu-id="123c6-213">Load can be configured at almost any point.</span></span> <span data-ttu-id="123c6-214">Por exemplo:</span><span class="sxs-lookup"><span data-stu-id="123c6-214">For example:</span></span>

  - <span data-ttu-id="123c6-215">A carga pode ser definida quando um serviço é criado.</span><span class="sxs-lookup"><span data-stu-id="123c6-215">Load can be defined when a service is created.</span></span> <span data-ttu-id="123c6-216">Isso é chamado de _carga padrão_.</span><span class="sxs-lookup"><span data-stu-id="123c6-216">This is called _default load_.</span></span>
  - <span data-ttu-id="123c6-217">carrega informações de métrica Hello, incluindo padrão, para um serviço pode ser atualizado depois Olá serviço é criado.</span><span class="sxs-lookup"><span data-stu-id="123c6-217">hello metric information, including default loads, for a service can updated after hello service is created.</span></span> <span data-ttu-id="123c6-218">Isso é chamado de _atualização de um serviço_.</span><span class="sxs-lookup"><span data-stu-id="123c6-218">This is called _updating a service_.</span></span> 
  - <span data-ttu-id="123c6-219">Olá cargas para uma determinada partição podem ser redefinição toohello os valores padrão para o serviço.</span><span class="sxs-lookup"><span data-stu-id="123c6-219">hello loads for a given partition can be reset toohello default values for that service.</span></span> <span data-ttu-id="123c6-220">Isso é chamado de _redefinição da carga de partição_.</span><span class="sxs-lookup"><span data-stu-id="123c6-220">This is called _resetting partition load_.</span></span>
  - <span data-ttu-id="123c6-221">A carga pode ser relatada por objeto de serviço dinamicamente em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="123c6-221">Load can be reported on a per service object basis dynamically during runtime.</span></span> <span data-ttu-id="123c6-222">Isso é chamado de _relatório de carga_.</span><span class="sxs-lookup"><span data-stu-id="123c6-222">This is called _reporting load_.</span></span> 
  
<span data-ttu-id="123c6-223">Todas essas estratégias podem ser usadas em Olá mesmo de serviços por meio de seu ciclo de vida.</span><span class="sxs-lookup"><span data-stu-id="123c6-223">All of these strategies can be used within hello same service over its lifetime.</span></span> 

## <a name="default-load"></a><span data-ttu-id="123c6-224">Carga padrão</span><span class="sxs-lookup"><span data-stu-id="123c6-224">Default load</span></span>
<span data-ttu-id="123c6-225">*Padrão de carga* é a quantidade de métrica Olá consome de cada objeto de serviço (instância sem monitoração de estado ou réplica com monitoração de estado) do serviço.</span><span class="sxs-lookup"><span data-stu-id="123c6-225">*Default load* is how much of hello metric each service object (stateless instance or stateful replica) of this service consumes.</span></span> <span data-ttu-id="123c6-226">Olá Gerenciador de recursos de Cluster usa esse número para carga de saudação do objeto de serviço Olá até receber outra informação, como um relatório de carga dinâmico.</span><span class="sxs-lookup"><span data-stu-id="123c6-226">hello Cluster Resource Manager uses this number for hello load of hello service object until it receives other information, such as a dynamic load report.</span></span> <span data-ttu-id="123c6-227">Para serviços mais simples, a carga de padrão de saudação é uma definição estática.</span><span class="sxs-lookup"><span data-stu-id="123c6-227">For simpler services, hello default load is a static definition.</span></span> <span data-ttu-id="123c6-228">carga de padrão de saudação nunca é atualizada e é usada pelo tempo de vida de saudação do serviço de saudação.</span><span class="sxs-lookup"><span data-stu-id="123c6-228">hello default load is never updated and is used for hello lifetime of hello service.</span></span> <span data-ttu-id="123c6-229">Padrão carrega funciona bem para cenários em que certos valores de recursos dedicados toodifferent cargas de trabalho e não alteram de planejamento de capacidade simple.</span><span class="sxs-lookup"><span data-stu-id="123c6-229">Default loads works great for simple capacity planning scenarios where certain amounts of resources are dedicated toodifferent workloads and do not change.</span></span>

> [!NOTE]
> <span data-ttu-id="123c6-230">Para obter mais informações sobre o gerenciamento de capacidade e definindo as capacidades para nós de saudação em seu cluster, consulte [neste artigo](service-fabric-cluster-resource-manager-cluster-description.md#capacity).</span><span class="sxs-lookup"><span data-stu-id="123c6-230">For more information on capacity management and defining capacities for hello nodes in your cluster, please see [this article](service-fabric-cluster-resource-manager-cluster-description.md#capacity).</span></span>
> 

<span data-ttu-id="123c6-231">Olá Gerenciador de recursos de Cluster permite toospecify services com monitoração de estado uma carga padrão diferente para seus primários e secundários.</span><span class="sxs-lookup"><span data-stu-id="123c6-231">hello Cluster Resource Manager allows stateful services toospecify a different default load for their Primaries and Secondaries.</span></span> <span data-ttu-id="123c6-232">Serviços sem estado só podem especificar um valor que se aplica a instâncias de tooall.</span><span class="sxs-lookup"><span data-stu-id="123c6-232">Stateless services can only specify one value that applies tooall instances.</span></span> <span data-ttu-id="123c6-233">Para serviços com monitoração de estado, o carregamento de padrão de Olá para réplicas primária e secundária são normalmente diferente como réplicas diferentes tipos de trabalho em cada função.</span><span class="sxs-lookup"><span data-stu-id="123c6-233">For stateful services, hello default load for Primary and Secondary replicas are typically different since replicas do different kinds of work in each role.</span></span> <span data-ttu-id="123c6-234">Por exemplo, primárias geralmente servem leituras e gravações e lidar com a maioria da carga de computação hello, enquanto secundários não.</span><span class="sxs-lookup"><span data-stu-id="123c6-234">For example, Primaries usually serve both reads and writes, and handle most of hello computational burden, while secondaries do not.</span></span> <span data-ttu-id="123c6-235">Geralmente a carga do saudação padrão para uma réplica primária é maior que o saudação padrão de carga para réplicas secundárias.</span><span class="sxs-lookup"><span data-stu-id="123c6-235">Usually hello default load for a primary replica is higher than hello default load for secondary replicas.</span></span> <span data-ttu-id="123c6-236">números reais de saudação depende de suas próprias medidas.</span><span class="sxs-lookup"><span data-stu-id="123c6-236">hello real numbers should depend on your own measurements.</span></span>

## <a name="dynamic-load"></a><span data-ttu-id="123c6-237">Carga dinâmica</span><span class="sxs-lookup"><span data-stu-id="123c6-237">Dynamic load</span></span>
<span data-ttu-id="123c6-238">Digamos que você esteja executando o serviço há algum tempo.</span><span class="sxs-lookup"><span data-stu-id="123c6-238">Let’s say that you’ve been running your service for a while.</span></span> <span data-ttu-id="123c6-239">Com o monitoramento, você observou que:</span><span class="sxs-lookup"><span data-stu-id="123c6-239">With some monitoring, you’ve noticed that:</span></span>

1. <span data-ttu-id="123c6-240">Algumas partições ou instâncias de determinado serviço consomem mais recursos do que outras</span><span class="sxs-lookup"><span data-stu-id="123c6-240">Some partitions or instances of a given service consume more resources than others</span></span>
2. <span data-ttu-id="123c6-241">Alguns serviços têm carga que varia ao longo do tempo.</span><span class="sxs-lookup"><span data-stu-id="123c6-241">Some services have load that varies over time.</span></span>

<span data-ttu-id="123c6-242">Há muitos itens que podem causar esses tipos de flutuações de carga.</span><span class="sxs-lookup"><span data-stu-id="123c6-242">There's lots of things that could cause these types of load fluctuations.</span></span> <span data-ttu-id="123c6-243">Por exemplo, serviços ou partições diferentes estão associadas com diferentes clientes com diferentes requisitos.</span><span class="sxs-lookup"><span data-stu-id="123c6-243">For example, different services or partitions are associated with different customers with different requirements.</span></span> <span data-ttu-id="123c6-244">Carga também pode alterar como valor de saudação do serviço de saudação do trabalho varia Olá longo do dia de saudação.</span><span class="sxs-lookup"><span data-stu-id="123c6-244">Load could also change because hello amount of work hello service does varies over hello course of hello day.</span></span> <span data-ttu-id="123c6-245">Independentemente do motivo hello, normalmente há um número de único que você pode usar para padrão.</span><span class="sxs-lookup"><span data-stu-id="123c6-245">Regardless of hello reason, there’s usually no single number that you can use for default.</span></span> <span data-ttu-id="123c6-246">Isso é especialmente verdadeiro se você quiser tooget Olá utilização mais fora do cluster de saudação.</span><span class="sxs-lookup"><span data-stu-id="123c6-246">This is especially true if you want tooget hello most utilization out of hello cluster.</span></span> <span data-ttu-id="123c6-247">Qualquer valor que você escolher para o padrão de carga é errado alguns tempo de saudação.</span><span class="sxs-lookup"><span data-stu-id="123c6-247">Any value you pick for default load is wrong some of hello time.</span></span> <span data-ttu-id="123c6-248">Padrão incorreto carrega resultam em Olá Gerenciador de recursos de Cluster de failover ou na alocação de recursos.</span><span class="sxs-lookup"><span data-stu-id="123c6-248">Incorrect default loads result in hello Cluster Resource Manager either over or under allocating resources.</span></span> <span data-ttu-id="123c6-249">Como resultado, você pode ter nós acima ou abaixo utilizados, embora Olá Gerenciador de recursos de Cluster considera cluster Olá é equilibrada.</span><span class="sxs-lookup"><span data-stu-id="123c6-249">As a result, you have nodes that are over or under utilized even though hello Cluster Resource Manager thinks hello cluster is balanced.</span></span> <span data-ttu-id="123c6-250">As cargas padrão ainda são válidas, pois fornecem algumas informações para o posicionamento inicial, mas não dão a visão completa das cargas de trabalho reais.</span><span class="sxs-lookup"><span data-stu-id="123c6-250">Default loads are still good since they provide some information for initial placement, but they're not a complete story for real workloads.</span></span> <span data-ttu-id="123c6-251">tooaccurately captura alterações de requisitos de recursos, Olá Gerenciador de recursos de Cluster permite que cada tooupdate de objeto de serviço sua própria carga durante o tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="123c6-251">tooaccurately capture changing resource requirements, hello Cluster Resource Manager allows each service object tooupdate its own load during runtime.</span></span> <span data-ttu-id="123c6-252">Isso é chamado de relatório dinâmico de carga.</span><span class="sxs-lookup"><span data-stu-id="123c6-252">This is called dynamic load reporting.</span></span>

<span data-ttu-id="123c6-253">Relatórios de carga dinâmico permitem tooadjust réplicas ou as instâncias sua carga de alocação/relatados de métricas em seu tempo de vida.</span><span class="sxs-lookup"><span data-stu-id="123c6-253">Dynamic load reports allow replicas or instances tooadjust their allocation/reported load of metrics over their lifetime.</span></span> <span data-ttu-id="123c6-254">Uma réplica de serviço ou uma instância inoperante e que não realizasse trabalho normalmente informaria que estava usando valores baixos de determinada métrica.</span><span class="sxs-lookup"><span data-stu-id="123c6-254">A service replica or instance that was cold and not doing any work would usually report that it was using low amounts of a given metric.</span></span> <span data-ttu-id="123c6-255">Uma réplica ou instância ocupada relataria que está usando mais.</span><span class="sxs-lookup"><span data-stu-id="123c6-255">A busy replica or instance would report that they are using more.</span></span>

<span data-ttu-id="123c6-256">Carga por réplica ou instância de relatórios permite que Olá tooreorganize do Gerenciador de recursos de Cluster de objetos de serviço individual Olá Olá cluster.</span><span class="sxs-lookup"><span data-stu-id="123c6-256">Reporting load per replica or instance allows hello Cluster Resource Manager tooreorganize hello individual service objects in hello cluster.</span></span> <span data-ttu-id="123c6-257">A reorganização de serviços Olá ajuda a garantir que eles obtenham recursos Olá que exigem.</span><span class="sxs-lookup"><span data-stu-id="123c6-257">Reorganizing hello services helps ensure that they get hello resources they require.</span></span> <span data-ttu-id="123c6-258">Serviços de ocupado efetivamente obtém muito "recuperar" recursos de outras réplicas ou as instâncias que estão atualmente frio ou fazer menos trabalho.</span><span class="sxs-lookup"><span data-stu-id="123c6-258">Busy services effectively get too"reclaim" resources from other replicas or instances that are currently cold or doing less work.</span></span>

<span data-ttu-id="123c6-259">Em serviços confiáveis, carga de tooreport Olá código dinamicamente tem esta aparência:</span><span class="sxs-lookup"><span data-stu-id="123c6-259">Within Reliable Services, hello code tooreport load dynamically looks like this:</span></span>

<span data-ttu-id="123c6-260">Código:</span><span class="sxs-lookup"><span data-stu-id="123c6-260">Code:</span></span>

```csharp
this.Partition.ReportLoad(new List<LoadMetric> { new LoadMetric("CurrentConnectionCount", 1234), new LoadMetric("metric1", 42) });
```

<span data-ttu-id="123c6-261">Um serviço pode relatar em qualquer uma das métricas de saudação definidas para ele no momento da criação.</span><span class="sxs-lookup"><span data-stu-id="123c6-261">A service can report on any of hello metrics defined for it at creation time.</span></span> <span data-ttu-id="123c6-262">Se uma carga de relatórios de serviço para uma métrica que ele não está configurado toouse, o Service Fabric ignora esse relatório.</span><span class="sxs-lookup"><span data-stu-id="123c6-262">If a service reports load for a metric that it is not configured toouse, Service Fabric ignores that report.</span></span> <span data-ttu-id="123c6-263">Se houver outras métricas relatadas em Olá mesmo tempo que são válidos, esses relatórios são aceitas.</span><span class="sxs-lookup"><span data-stu-id="123c6-263">If there are other metrics reported at hello same time that are valid, those reports are accepted.</span></span> <span data-ttu-id="123c6-264">Código de serviço pode medir e relatar todas Olá métricas sabe como, e operadores poderá especificar Olá configuração métrica toouse sem código de serviço toochange hello.</span><span class="sxs-lookup"><span data-stu-id="123c6-264">Service code can measure and report all hello metrics it knows how to, and operators can specify hello metric configuration toouse without having toochange hello service code.</span></span> 

### <a name="updating-a-services-metric-configuration"></a><span data-ttu-id="123c6-265">Atualizando a configuração da métrica do serviço</span><span class="sxs-lookup"><span data-stu-id="123c6-265">Updating a service's metric configuration</span></span>
<span data-ttu-id="123c6-266">lista de saudação de métricas associadas ao serviço de saudação e propriedades Olá dessas métricas podem ser atualizadas dinamicamente enquanto o serviço hello está ativo.</span><span class="sxs-lookup"><span data-stu-id="123c6-266">hello list of metrics associated with hello service, and hello properties of those metrics can be updated dynamically while hello service is live.</span></span> <span data-ttu-id="123c6-267">Isso permite flexibilidade e a oportunidade de fazer experimentos.</span><span class="sxs-lookup"><span data-stu-id="123c6-267">This allows for experimentation and flexibility.</span></span> <span data-ttu-id="123c6-268">Alguns exemplos de quando isso é útil são:</span><span class="sxs-lookup"><span data-stu-id="123c6-268">Some examples of when this is useful are:</span></span>

  - <span data-ttu-id="123c6-269">ao desabilitar uma métrica com um relatório com bugs para um serviço específico</span><span class="sxs-lookup"><span data-stu-id="123c6-269">disabling a metric with a buggy report for a particular service</span></span>
  - <span data-ttu-id="123c6-270">reconfigurar os pesos de saudação de métricas com base no comportamento desejado</span><span class="sxs-lookup"><span data-stu-id="123c6-270">reconfiguring hello weights of metrics based on desired behavior</span></span>
  - <span data-ttu-id="123c6-271">habilitando uma métrica novo somente depois que o código de saudação já foi implantado e validado por meio de outros mecanismos</span><span class="sxs-lookup"><span data-stu-id="123c6-271">enabling a new metric only after hello code has already been deployed and validated via other mechanisms</span></span>
  - <span data-ttu-id="123c6-272">alterando o saudação padrão de carga para um serviço com base no consumo e comportamento observado</span><span class="sxs-lookup"><span data-stu-id="123c6-272">changing hello default load for a service based on observed behavior and consumption</span></span>

<span data-ttu-id="123c6-273">Olá principais APIs para alterar a configuração de métrica são `FabricClient.ServiceManagementClient.UpdateServiceAsync` em c# e `Update-ServiceFabricService` no PowerShell.</span><span class="sxs-lookup"><span data-stu-id="123c6-273">hello main APIs for changing metric configuration are `FabricClient.ServiceManagementClient.UpdateServiceAsync` in C# and `Update-ServiceFabricService` in PowerShell.</span></span> <span data-ttu-id="123c6-274">Quaisquer informações que você especificar com essas APIs substituem Olá as informações de métrica existente para o serviço de saudação imediatamente.</span><span class="sxs-lookup"><span data-stu-id="123c6-274">Whatever information you specify with these APIs replaces hello existing metric information for hello service immediately.</span></span> 

## <a name="mixing-default-load-values-and-dynamic-load-reports"></a><span data-ttu-id="123c6-275">Combinando valores de carga padrão e relatórios de carga dinâmica</span><span class="sxs-lookup"><span data-stu-id="123c6-275">Mixing default load values and dynamic load reports</span></span>
<span data-ttu-id="123c6-276">Padrão de carga e carrega dinâmica pode ser usadas para Olá mesmo serviço.</span><span class="sxs-lookup"><span data-stu-id="123c6-276">Default load and dynamic loads can be used for hello same service.</span></span> <span data-ttu-id="123c6-277">Quando o serviço utiliza os relatórios de carga padrão e carga dinâmica carga padrão serve como uma estimativa até os relatórios dinâmicos serem gerados.</span><span class="sxs-lookup"><span data-stu-id="123c6-277">When a service utilizes both default load and dynamic load reports, default load serves as an estimate until dynamic reports show up.</span></span> <span data-ttu-id="123c6-278">Padrão de carga é bom porque oferece Olá Gerenciador de recursos de Cluster algo toowork com.</span><span class="sxs-lookup"><span data-stu-id="123c6-278">Default load is good because it gives hello Cluster Resource Manager something toowork with.</span></span> <span data-ttu-id="123c6-279">saudação de carga de padrão permite Olá tooplace do Gerenciador de recursos de Cluster objetos de serviço de saudação em locais bom quando eles são criados.</span><span class="sxs-lookup"><span data-stu-id="123c6-279">hello default load allows hello Cluster Resource Manager tooplace hello service objects in good locations when they are created.</span></span> <span data-ttu-id="123c6-280">Se nenhuma informação de carga padrão for fornecida, o posicionamento dos serviços será efetivamente aleatório.</span><span class="sxs-lookup"><span data-stu-id="123c6-280">If no default load information is provided, placement of services is effectively random.</span></span> <span data-ttu-id="123c6-281">Quando os relatórios de carga chegam mais tarde colocação aleatória inicial de saudação geralmente é incorreta e Olá Gerenciador de recursos de Cluster com os serviços de toomove.</span><span class="sxs-lookup"><span data-stu-id="123c6-281">When load reports arrive later hello initial random placement is often wrong and hello Cluster Resource Manager has toomove services.</span></span>

<span data-ttu-id="123c6-282">Vamos conferir nosso exemplo anterior e ver o que acontece quando adicionamos algumas métricas personalizadas e relatórios dinâmicos de carga.</span><span class="sxs-lookup"><span data-stu-id="123c6-282">Let’s take our previous example and see what happens when we add some custom metrics and dynamic load reporting.</span></span> <span data-ttu-id="123c6-283">Neste exemplo, usamos "MemoryInMb" como uma métrica de exemplo.</span><span class="sxs-lookup"><span data-stu-id="123c6-283">In this example, we use “MemoryInMb” as an example metric.</span></span>

> [!NOTE]
> <span data-ttu-id="123c6-284">Memória é uma das métricas de sistema de saudação do Service Fabric pode [controlam recursos](service-fabric-resource-governance.md), e relatá-las é difícil normalmente.</span><span class="sxs-lookup"><span data-stu-id="123c6-284">Memory is one of hello system metrics that Service Fabric can [resource govern](service-fabric-resource-governance.md), and reporting it yourself is typically difficult.</span></span> <span data-ttu-id="123c6-285">Não, na verdade, esperamos que você tooreport consumo de memória; A memória é usada como um toolearning ajuda sobre recursos de saudação do hello Gerenciador de recursos de Cluster.</span><span class="sxs-lookup"><span data-stu-id="123c6-285">We don't actually expect you tooreport on Memory consumption; Memory is used here as an aid toolearning about hello capabilities of hello Cluster Resource Manager.</span></span>
>

<span data-ttu-id="123c6-286">Vamos supor que inicialmente criamos serviço com monitoração de estado Olá com hello comando a seguir:</span><span class="sxs-lookup"><span data-stu-id="123c6-286">Let’s presume that we initially created hello stateful service with hello following command:</span></span>

<span data-ttu-id="123c6-287">Powershell:</span><span class="sxs-lookup"><span data-stu-id="123c6-287">Powershell:</span></span>

```posh
New-ServiceFabricService -ApplicationName $applicationName -ServiceName $serviceName -ServiceTypeName $serviceTypeName –Stateful -MinReplicaSetSize 3 -TargetReplicaSetSize 3 -PartitionSchemeSingleton –Metric @("MemoryInMb,High,21,11”,"PrimaryCount,Medium,1,0”,"ReplicaCount,Low,1,1”,"Count,Low,1,1”)
```

<span data-ttu-id="123c6-288">Como lembrete, essa sintaxe é ("MetricName, MetricWeight, PrimaryDefaultLoad, SecondaryDefaultLoad").</span><span class="sxs-lookup"><span data-stu-id="123c6-288">As a reminder, this syntax is ("MetricName, MetricWeight, PrimaryDefaultLoad, SecondaryDefaultLoad").</span></span>

<span data-ttu-id="123c6-289">Vamos ver qual poderia ser a aparência de um layout de cluster:</span><span class="sxs-lookup"><span data-stu-id="123c6-289">Let's see what one possible cluster layout could look like:</span></span>

<span data-ttu-id="123c6-290"><center>
![Cluster equilibrado com métricas padrão e personalizadas][Image2]
</center></span><span class="sxs-lookup"><span data-stu-id="123c6-290"><center>
![Cluster Balanced with both Default and Custom metrics][Image2]
</center></span></span>

<span data-ttu-id="123c6-291">Algumas coisas que vale a pena observar:</span><span class="sxs-lookup"><span data-stu-id="123c6-291">Some things that are worth noting:</span></span>

* <span data-ttu-id="123c6-292">As réplicas secundárias dentro de uma partição podem ter cada uma a sua própria carga</span><span class="sxs-lookup"><span data-stu-id="123c6-292">Secondary replicas within a partition can each have their own load</span></span>
* <span data-ttu-id="123c6-293">Geral métricas Olá aparência equilibradas.</span><span class="sxs-lookup"><span data-stu-id="123c6-293">Overall hello metrics look balanced.</span></span> <span data-ttu-id="123c6-294">Para a memória, Olá taxa entre Olá máximo e mínimo de carga é 1,75 (nó Olá com hello mais carga é N3, Olá é menos N2 e 28/16 = 1,75).</span><span class="sxs-lookup"><span data-stu-id="123c6-294">For Memory, hello ratio between hello maximum and minimum load is 1.75 (hello node with hello most load is N3, hello least is N2, and 28/16 = 1.75).</span></span>

<span data-ttu-id="123c6-295">Há algumas coisas que precisamos ainda tooexplain:</span><span class="sxs-lookup"><span data-stu-id="123c6-295">There are some things that we still need tooexplain:</span></span>

* <span data-ttu-id="123c6-296">O que determinou se uma taxa de 1,75 é razoável ou não?</span><span class="sxs-lookup"><span data-stu-id="123c6-296">What determined whether a ratio of 1.75 was reasonable or not?</span></span> <span data-ttu-id="123c6-297">Como a saudação Gerenciador de recursos de Cluster saber se há ou se não houver mais toodo de trabalho?</span><span class="sxs-lookup"><span data-stu-id="123c6-297">How does hello Cluster Resource Manager know if that’s good enough or if there is more work toodo?</span></span>
* <span data-ttu-id="123c6-298">Quando o balanceamento acontece?</span><span class="sxs-lookup"><span data-stu-id="123c6-298">When does balancing happen?</span></span>
* <span data-ttu-id="123c6-299">O que significa que a memória foi ponderada como "Alta"?</span><span class="sxs-lookup"><span data-stu-id="123c6-299">What does it mean that Memory was weighted “High”?</span></span>

## <a name="metric-weights"></a><span data-ttu-id="123c6-300">Pesos de métrica</span><span class="sxs-lookup"><span data-stu-id="123c6-300">Metric weights</span></span>
<span data-ttu-id="123c6-301">Controle Olá mesmo métricas em diferentes serviços é importante.</span><span class="sxs-lookup"><span data-stu-id="123c6-301">Tracking hello same metrics across different services is important.</span></span> <span data-ttu-id="123c6-302">Se a exibição global é o que permite Olá consumo de tootrack do Gerenciador de recursos de Cluster no cluster hello, equilibrar o consumo em nós e certifique-se de que nós não passam pela capacidade.</span><span class="sxs-lookup"><span data-stu-id="123c6-302">That global view is what allows hello Cluster Resource Manager tootrack consumption in hello cluster, balance consumption across nodes, and ensure that nodes don’t go over capacity.</span></span> <span data-ttu-id="123c6-303">No entanto, serviços podem ter diferentes modos de exibição como toohello importância da saudação mesma métrica.</span><span class="sxs-lookup"><span data-stu-id="123c6-303">However, services may have different views as toohello importance of hello same metric.</span></span> <span data-ttu-id="123c6-304">Além disso, em um cluster com várias métricas e muitos serviços, talvez não existam soluções perfeitamente equilibradas para todas as métricas.</span><span class="sxs-lookup"><span data-stu-id="123c6-304">Also, in a cluster with many metrics and lots of services, perfectly balanced solutions may not exist for all metrics.</span></span> <span data-ttu-id="123c6-305">Como Olá Gerenciador de recursos de Cluster deve tratar essas situações?</span><span class="sxs-lookup"><span data-stu-id="123c6-305">How should hello Cluster Resource Manager handle these situations?</span></span>

<span data-ttu-id="123c6-306">Métricos pesos permitem Olá toodecide do Gerenciador de recursos de Cluster como toobalance Olá cluster quando não há nenhuma resposta perfeita.</span><span class="sxs-lookup"><span data-stu-id="123c6-306">Metric weights allow hello Cluster Resource Manager toodecide how toobalance hello cluster when there’s no perfect answer.</span></span> <span data-ttu-id="123c6-307">Métricos pesos também permitem que Olá toobalance do Gerenciador de recursos de Cluster serviços específicos diferente.</span><span class="sxs-lookup"><span data-stu-id="123c6-307">Metric weights also allow hello Cluster Resource Manager toobalance specific services differently.</span></span> <span data-ttu-id="123c6-308">As métricas podem ter quatro níveis de peso diferente: zero, baixa, média e alta.</span><span class="sxs-lookup"><span data-stu-id="123c6-308">Metrics can have four different weight levels: Zero, Low, Medium, and High.</span></span> <span data-ttu-id="123c6-309">Uma métrica com um peso Zero não contribui em nada ao considerar se as coisas estão balanceadas ou não.</span><span class="sxs-lookup"><span data-stu-id="123c6-309">A metric with a weight of Zero contributes nothing when considering whether things are balanced or not.</span></span> <span data-ttu-id="123c6-310">No entanto, sua carga ainda contribuem toocapacity gerenciamento.</span><span class="sxs-lookup"><span data-stu-id="123c6-310">However, its load does still contribute toocapacity management.</span></span> <span data-ttu-id="123c6-311">Métricas com peso Zero ainda são úteis e costumam ser usadas como parte do monitoramento de desempenho e do comportamento de serviço.</span><span class="sxs-lookup"><span data-stu-id="123c6-311">Metrics with Zero weight are still useful and are frequently used as a part of service behavior and performance monitoring.</span></span> <span data-ttu-id="123c6-312">[Este artigo](service-fabric-diagnostics-event-generation-infra.md) fornece mais informações sobre o uso de Olá das métricas de monitoramento e diagnóstico dos seus serviços.</span><span class="sxs-lookup"><span data-stu-id="123c6-312">[This article](service-fabric-diagnostics-event-generation-infra.md) provides more information on hello use of metrics for monitoring and diagnostics of your services.</span></span> 

<span data-ttu-id="123c6-313">Olá impacto real pesos de métrica diferentes no cluster Olá é que esse gerenciador de recursos de Cluster hello gera diferentes soluções.</span><span class="sxs-lookup"><span data-stu-id="123c6-313">hello real impact of different metric weights in hello cluster is that hello Cluster Resource Manager generates different solutions.</span></span> <span data-ttu-id="123c6-314">Métricos pesos informam Olá Gerenciador de recursos de Cluster que determinadas métricas são mais importantes do que outras pessoas.</span><span class="sxs-lookup"><span data-stu-id="123c6-314">Metric weights tell hello Cluster Resource Manager that certain metrics are more important than others.</span></span> <span data-ttu-id="123c6-315">Quando não houver nenhum Olá solução perfeita Gerenciador de recursos de Cluster pode preferir soluções que equilibram Olá superior ponderada métricas melhor.</span><span class="sxs-lookup"><span data-stu-id="123c6-315">When there's no perfect solution hello Cluster Resource Manager can prefer solutions which balance hello higher weighted metrics better.</span></span> <span data-ttu-id="123c6-316">Se um serviço achar que uma métrica específica não é importante, ele poderá considerar seu uso dessa métrica desequilibrado.</span><span class="sxs-lookup"><span data-stu-id="123c6-316">If a service thinks a particular metric is unimportant, it may find their use of that metric imbalanced.</span></span> <span data-ttu-id="123c6-317">Isso permite que outro tooget de serviço uma distribuição uniforme de alguns métrica que é importante tooit.</span><span class="sxs-lookup"><span data-stu-id="123c6-317">This allows another service tooget an even distribution of some metric that is important tooit.</span></span>

<span data-ttu-id="123c6-318">Vejamos um exemplo de alguns relatórios de carga e uma métrica diferente como pondera resulta em várias alocações no cluster hello.</span><span class="sxs-lookup"><span data-stu-id="123c6-318">Let’s look at an example of some load reports and how different metric weights results in different allocations in hello cluster.</span></span> <span data-ttu-id="123c6-319">Neste exemplo, podemos ver que alternar peso relativo de saudação de métricas de saudação causa Olá toocreate do Gerenciador de recursos de Cluster de diferentes organizações de serviços.</span><span class="sxs-lookup"><span data-stu-id="123c6-319">In this example, we see that switching hello relative weight of hello metrics causes hello Cluster Resource Manager toocreate different arrangements of services.</span></span>

<span data-ttu-id="123c6-320"><center>
![Exemplo de ponderação da métrica e seu impacto sobre as soluções de balanceamento][Image3]
</center></span><span class="sxs-lookup"><span data-stu-id="123c6-320"><center>
![Metric Weight Example and Its Impact on Balancing Solutions][Image3]
</center></span></span>

<span data-ttu-id="123c6-321">Neste exemplo, há quatro serviços diferentes, todos relatando diferentes valores para duas métricas diferentes, Métrica A e Métrica B.</span><span class="sxs-lookup"><span data-stu-id="123c6-321">In this example, there are four different services, all reporting different values for two different metrics, MetricA and MetricB.</span></span> <span data-ttu-id="123c6-322">Em um caso, todos os serviços de saudação definem MetricA é mais importante de hello (peso = alta) e MetricB como importantes (peso = baixo).</span><span class="sxs-lookup"><span data-stu-id="123c6-322">In one case, all hello services define MetricA is hello most important one (Weight = High) and MetricB as unimportant (Weight = Low).</span></span> <span data-ttu-id="123c6-323">Como resultado, podemos ver que Olá Gerenciador de recursos de Cluster coloca serviços Olá para que é melhor MetricA balanceada que MetricB.</span><span class="sxs-lookup"><span data-stu-id="123c6-323">As a result, we see that hello Cluster Resource Manager places hello services so that MetricA is better balanced than MetricB.</span></span> <span data-ttu-id="123c6-324">"Melhor equilibrada" significa que a Métrica A tem um desvio padrão menor que a Métrica B.</span><span class="sxs-lookup"><span data-stu-id="123c6-324">"Better balanced" means that MetricA has a lower has a lower standard deviation than MetricB.</span></span> <span data-ttu-id="123c6-325">No segundo caso de Olá, podemos reverter pesos métrica hello.</span><span class="sxs-lookup"><span data-stu-id="123c6-325">In hello second case, we reverse hello metric weights.</span></span> <span data-ttu-id="123c6-326">Como resultado, Olá Gerenciador de recursos de Cluster troca serviços A e B toocome backup com uma alocação onde MetricB é mais equilibrada que MetricA.</span><span class="sxs-lookup"><span data-stu-id="123c6-326">As a result, hello Cluster Resource Manager swaps services A and B toocome up with an allocation where MetricB is better balanced than MetricA.</span></span>

> [!NOTE]
> <span data-ttu-id="123c6-327">Métricos pesos determinam como Olá Gerenciador de recursos de Cluster deve equilibrar, mas não quando balanceamento deve ocorrer.</span><span class="sxs-lookup"><span data-stu-id="123c6-327">Metric weights determine how hello Cluster Resource Manager should balance, but not when balancing should happen.</span></span> <span data-ttu-id="123c6-328">Para saber mais sobre balanceamento, leia [este artigo](service-fabric-cluster-resource-manager-balancing.md)</span><span class="sxs-lookup"><span data-stu-id="123c6-328">For more information on balancing, check out [this article](service-fabric-cluster-resource-manager-balancing.md)</span></span>
>

### <a name="global-metric-weights"></a><span data-ttu-id="123c6-329">Pesos de métrica global</span><span class="sxs-lookup"><span data-stu-id="123c6-329">Global metric weights</span></span>
<span data-ttu-id="123c6-330">Digamos que Services define MetricA como alta de peso e ServiceB define o peso de saudação para MetricA tooLow ou Zero.</span><span class="sxs-lookup"><span data-stu-id="123c6-330">Let's say ServiceA defines MetricA as weight High, and ServiceB sets hello weight for MetricA tooLow or Zero.</span></span> <span data-ttu-id="123c6-331">O que é o peso real de saudação que acaba acostumar?</span><span class="sxs-lookup"><span data-stu-id="123c6-331">What’s hello actual weight that ends up getting used?</span></span>

<span data-ttu-id="123c6-332">Há vários pesos que são rastreados para cada métrica.</span><span class="sxs-lookup"><span data-stu-id="123c6-332">There are multiple weights that are tracked for every metric.</span></span> <span data-ttu-id="123c6-333">Peso primeiro Olá é hello definido para a métrica de saudação quando Olá serviço é criado.</span><span class="sxs-lookup"><span data-stu-id="123c6-333">hello first weight is hello one defined for hello metric when hello service is created.</span></span> <span data-ttu-id="123c6-334">Olá, outros peso é um peso global, que é calculado automaticamente.</span><span class="sxs-lookup"><span data-stu-id="123c6-334">hello other weight is a global weight, which is computed automatically.</span></span> <span data-ttu-id="123c6-335">Olá Gerenciador de recursos de Cluster usa esses níveis de importância quando soluções de pontuação.</span><span class="sxs-lookup"><span data-stu-id="123c6-335">hello Cluster Resource Manager uses both these weights when scoring solutions.</span></span> <span data-ttu-id="123c6-336">Considerar ambos os pesos é importante.</span><span class="sxs-lookup"><span data-stu-id="123c6-336">Taking both weights into account is important.</span></span> <span data-ttu-id="123c6-337">Isso permite que Olá toobalance do Gerenciador de recursos de Cluster de cada serviço tooits acordos possuir prioridades e também como um todo é alocado corretamente, verifique se esse cluster hello.</span><span class="sxs-lookup"><span data-stu-id="123c6-337">This allows hello Cluster Resource Manager toobalance each service according tooits own priorities, and also ensure that hello cluster as a whole is allocated correctly.</span></span>

<span data-ttu-id="123c6-338">O que aconteceria se Olá Gerenciador de recursos de Cluster não importa saldo global e local?</span><span class="sxs-lookup"><span data-stu-id="123c6-338">What would happen if hello Cluster Resource Manager didn’t care about both global and local balance?</span></span> <span data-ttu-id="123c6-339">Bem, é fácil tooconstruct soluções que são balanceados globalmente, mas que pode resultar no equilíbrio de recursos de baixo para serviços individuais.</span><span class="sxs-lookup"><span data-stu-id="123c6-339">Well, it’s easy tooconstruct solutions that are globally balanced, but which result in poor resource balance for individual services.</span></span> <span data-ttu-id="123c6-340">Em Olá exemplo a seguir, vamos examinar um serviço configurado com apenas as métricas saudação padrão e veja o que acontece quando somente o saldo global é considerado:</span><span class="sxs-lookup"><span data-stu-id="123c6-340">In hello following example, let’s look at a service configured with just hello default metrics, and see what happens when only global balance is considered:</span></span>

<span data-ttu-id="123c6-341"><center>
![Olá impacto de uma solução somente Global][Image4]
</center></span><span class="sxs-lookup"><span data-stu-id="123c6-341"><center>
![hello Impact of a Global Only Solution][Image4]
</center></span></span>

<span data-ttu-id="123c6-342">O exemplo de superior Olá com base apenas em equilíbrio global, Olá cluster como um todo é realmente equilibrado.</span><span class="sxs-lookup"><span data-stu-id="123c6-342">In hello top example based only on global balance, hello cluster as a whole is indeed balanced.</span></span> <span data-ttu-id="123c6-343">Todos os nós têm Olá mesma contagem de primárias e Olá mesmo número total de réplicas.</span><span class="sxs-lookup"><span data-stu-id="123c6-343">All nodes have hello same count of primaries and hello same number total replicas.</span></span> <span data-ttu-id="123c6-344">No entanto, se você observar o impacto real Olá essa alocação não é tão boa: perda de saudação de qualquer nó afeta uma carga de trabalho específica desproporcionalmente, porque usa todos os seus primários.</span><span class="sxs-lookup"><span data-stu-id="123c6-344">However, if you look at hello actual impact of this allocation it’s not so good: hello loss of any node impacts a particular workload disproportionately, because it takes out all of its primaries.</span></span> <span data-ttu-id="123c6-345">Por exemplo, se primeiro nó de saudação falhar três cores primárias de saudação para Olá três diferentes partições de saudação serviço círculo todos seriam perdidos.</span><span class="sxs-lookup"><span data-stu-id="123c6-345">For example, if hello first node fails hello three primaries for hello three different partitions of hello Circle service would all be lost.</span></span> <span data-ttu-id="123c6-346">Por outro lado, hello triângulo e serviços hexágono tem suas partições de perder uma réplica.</span><span class="sxs-lookup"><span data-stu-id="123c6-346">Conversely, hello Triangle and Hexagon services have their partitions lose a replica.</span></span> <span data-ttu-id="123c6-347">Isso faz com que sem interrupção, diferente de ter toorecover Olá para baixo de réplica.</span><span class="sxs-lookup"><span data-stu-id="123c6-347">This causes no disruption, other than having toorecover hello down replica.</span></span>

<span data-ttu-id="123c6-348">No exemplo de inferior hello, Olá Gerenciador de recursos de Cluster tenha distribuído réplicas Olá com base em ambos os equilíbrio de saudação global e por serviço.</span><span class="sxs-lookup"><span data-stu-id="123c6-348">In hello bottom example, hello Cluster Resource Manager has distributed hello replicas based on both hello global and per-service balance.</span></span> <span data-ttu-id="123c6-349">Ao calcular a pontuação de saudação da solução Olá ele fornece a maioria das soluções globais da saudação peso toohello e services tooindividual parte (configurável).</span><span class="sxs-lookup"><span data-stu-id="123c6-349">When calculating hello score of hello solution it gives most of hello weight toohello global solution, and a (configurable) portion tooindividual services.</span></span> <span data-ttu-id="123c6-350">Saldo global para uma métrica é calculado com base na média de saudação de pesos de métrica de saudação de cada serviço.</span><span class="sxs-lookup"><span data-stu-id="123c6-350">Global balance for a metric is calculated based on hello average of hello metric weights from each service.</span></span> <span data-ttu-id="123c6-351">Cada serviço é equilibrado acordo tooits próprio definido métrica pesos.</span><span class="sxs-lookup"><span data-stu-id="123c6-351">Each service is balanced according tooits own defined metric weights.</span></span> <span data-ttu-id="123c6-352">Isso garante que serviços Olá são balanceados em si, de acordo com tootheir próprias necessidades.</span><span class="sxs-lookup"><span data-stu-id="123c6-352">This ensures that hello services are balanced within themselves according tootheir own needs.</span></span> <span data-ttu-id="123c6-353">Como resultado, se hello mesmo primeiro nó falha Olá é distribuído entre todas as partições de todos os serviços.</span><span class="sxs-lookup"><span data-stu-id="123c6-353">As a result, if hello same first node fails hello failure is distributed across all partitions of all services.</span></span> <span data-ttu-id="123c6-354">Olá impacto tooeach é Olá mesmo.</span><span class="sxs-lookup"><span data-stu-id="123c6-354">hello impact tooeach is hello same.</span></span>

## <a name="next-steps"></a><span data-ttu-id="123c6-355">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="123c6-355">Next steps</span></span>
- <span data-ttu-id="123c6-356">Para obter mais informações sobre a configuração de serviços, [Saiba mais sobre como configurar serviços](service-fabric-cluster-resource-manager-configure-services.md)(service-fabric-cluster-resource-manager-configure-services.md)</span><span class="sxs-lookup"><span data-stu-id="123c6-356">For more information on configuring services, [Learn about configuring Services](service-fabric-cluster-resource-manager-configure-services.md)(service-fabric-cluster-resource-manager-configure-services.md)</span></span>
- <span data-ttu-id="123c6-357">Definir métricas de desfragmentação é carga tooconsolidate unidirecional em nós em vez de propagação de. toolearn como tooconfigure desfragmentação, consulte muito[neste artigo](service-fabric-cluster-resource-manager-defragmentation-metrics.md)</span><span class="sxs-lookup"><span data-stu-id="123c6-357">Defining Defragmentation Metrics is one way tooconsolidate load on nodes instead of spreading it out. toolearn how tooconfigure defragmentation, refer too[this article](service-fabric-cluster-resource-manager-defragmentation-metrics.md)</span></span>
- <span data-ttu-id="123c6-358">toofind out sobre como Olá Gerenciador de recursos de Cluster gerencia e equilibra a carga no cluster hello, check-out artigo Olá em [balanceamento de carga](service-fabric-cluster-resource-manager-balancing.md)</span><span class="sxs-lookup"><span data-stu-id="123c6-358">toofind out about how hello Cluster Resource Manager manages and balances load in hello cluster, check out hello article on [balancing load](service-fabric-cluster-resource-manager-balancing.md)</span></span>
- <span data-ttu-id="123c6-359">Desde o início de saudação e [obter uma introdução toohello Gerenciador de recursos de Cluster do serviço de malha](service-fabric-cluster-resource-manager-introduction.md)</span><span class="sxs-lookup"><span data-stu-id="123c6-359">Start from hello beginning and [get an Introduction toohello Service Fabric Cluster Resource Manager](service-fabric-cluster-resource-manager-introduction.md)</span></span>
- <span data-ttu-id="123c6-360">O custo de movimento é uma forma de sinalização toohello Gerenciador de recursos de Cluster que determinados serviços são toomove mais caro do que outros.</span><span class="sxs-lookup"><span data-stu-id="123c6-360">Movement Cost is one way of signaling toohello Cluster Resource Manager that certain services are more expensive toomove than others.</span></span> <span data-ttu-id="123c6-361">toolearn mais sobre o custo de movimento, consulte muito[neste artigo](service-fabric-cluster-resource-manager-movement-cost.md)</span><span class="sxs-lookup"><span data-stu-id="123c6-361">toolearn more about movement cost, refer too[this article](service-fabric-cluster-resource-manager-movement-cost.md)</span></span>

[Image1]:./media/service-fabric-cluster-resource-manager-metrics/cluster-resource-manager-cluster-layout-with-default-metrics.png
[Image2]:./media/service-fabric-cluster-resource-manager-metrics/Service-Fabric-Resource-Manager-Dynamic-Load-Reports.png
[Image3]:./media/service-fabric-cluster-resource-manager-metrics/cluster-resource-manager-metric-weights-impact.png
[Image4]:./media/service-fabric-cluster-resource-manager-metrics/cluster-resource-manager-global-vs-local-balancing.png
