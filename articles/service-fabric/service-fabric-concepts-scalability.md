---
title: "Escalabilidade de serviços do Service Fabric | Microsoft Docs"
description: "Descreve como dimensionar os serviços de malha do serviço"
services: service-fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: 
ms.assetid: ed324f23-242f-47b7-af1a-e55c839e7d5d
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/18/2017
ms.author: masnider
ms.openlocfilehash: e2dd48341499b18ebd1433611063746e95a5ac62
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/29/2017
---
# <a name="scaling-in-service-fabric"></a><span data-ttu-id="e4ec7-103">Dimensionamento no Service Fabric</span><span class="sxs-lookup"><span data-stu-id="e4ec7-103">Scaling in Service Fabric</span></span>
<span data-ttu-id="e4ec7-104">O Azure Service Fabric facilita o build de aplicativos escalonáveis gerenciando os serviços, as partições e as réplicas em todos os nós em um cluster.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-104">Azure Service Fabric makes it easy to build scalable applications by managing the services, partitions, and replicas on the nodes of a cluster.</span></span> <span data-ttu-id="e4ec7-105">Executar várias cargas de trabalho no mesmo hardware permite a utilização máxima dos recursos, mas também fornece flexibilidade em termos de como você opta por dimensionar suas cargas de trabalho.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-105">Running many workloads on the same hardware enables maximum resource utilization, but also provides flexibility in terms of how you choose to scale your workloads.</span></span> 

<span data-ttu-id="e4ec7-106">O dimensionamento no Service Fabric é feito várias maneiras diferentes:</span><span class="sxs-lookup"><span data-stu-id="e4ec7-106">Scaling in Service Fabric is accomplished several different ways:</span></span>

1. <span data-ttu-id="e4ec7-107">Dimensionamento criando ou removendo instâncias de serviço sem estado</span><span class="sxs-lookup"><span data-stu-id="e4ec7-107">Scaling by creating or removing stateless service instances</span></span>
2. <span data-ttu-id="e4ec7-108">Dimensionamento criando ou removendo novos serviços nomeados</span><span class="sxs-lookup"><span data-stu-id="e4ec7-108">Scaling by creating or removing new named services</span></span>
3. <span data-ttu-id="e4ec7-109">Dimensionamento criando ou removendo novas instâncias de aplicativos nomeados</span><span class="sxs-lookup"><span data-stu-id="e4ec7-109">Scaling by creating or removing new named application instances</span></span>
4. <span data-ttu-id="e4ec7-110">Dimensionamento usando serviços particionados</span><span class="sxs-lookup"><span data-stu-id="e4ec7-110">Scaling by using partitioned services</span></span>
5. <span data-ttu-id="e4ec7-111">Dimensionamento adicionando e removendo nós do cluster</span><span class="sxs-lookup"><span data-stu-id="e4ec7-111">Scaling by adding and removing nodes from the cluster</span></span> 
6. <span data-ttu-id="e4ec7-112">Dimensionamento usando métricas do Gerenciador de Recursos de Cluster</span><span class="sxs-lookup"><span data-stu-id="e4ec7-112">Scaling by using Cluster Resource Manager metrics</span></span>

## <a name="scaling-by-creating-or-removing-stateless-service-instances"></a><span data-ttu-id="e4ec7-113">Dimensionamento criando ou removendo instâncias de serviço sem estado</span><span class="sxs-lookup"><span data-stu-id="e4ec7-113">Scaling by creating or removing stateless service instances</span></span>
<span data-ttu-id="e4ec7-114">Uma das formas mais simples de dimensionar dentro do Service Fabric é com os serviços sem estado.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-114">One of the simplest ways to scale within Service Fabric works with stateless services.</span></span> <span data-ttu-id="e4ec7-115">Quando cria um serviço sem estado, você tem a oportunidade de definir um `InstanceCount`.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-115">When you create a stateless service, you get a chance to define an `InstanceCount`.</span></span> <span data-ttu-id="e4ec7-116">`InstanceCount` define quantas cópias em execução do código do serviço são criadas quando o serviço é iniciado.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-116">`InstanceCount` defines how many running copies of that service's code are created when the service starts up.</span></span> <span data-ttu-id="e4ec7-117">Digamos, por exemplo, que haja 100 nós no cluster.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-117">Let's say, for example, that there are 100 nodes in the cluster.</span></span> <span data-ttu-id="e4ec7-118">Digamos também que um serviço seja criado com um `InstanceCount` igual a 10.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-118">Let's also say that a service is created with an `InstanceCount` of 10.</span></span> <span data-ttu-id="e4ec7-119">Durante o tempo de execução, essas 10 cópias em execução do código podem ficar todas muito ocupadas (ou podem não ficar ocupadas o suficiente).</span><span class="sxs-lookup"><span data-stu-id="e4ec7-119">During runtime, those 10 running copies of the code could all become too busy (or could be not busy enough).</span></span> <span data-ttu-id="e4ec7-120">Uma maneira de dimensionar essa carga de trabalho é alterar o número de instâncias.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-120">One way to scale that workload is to change the number of instances.</span></span> <span data-ttu-id="e4ec7-121">Por exemplo, uma parte do código de monitoramento ou gerenciamento pode alterar o número existente de instâncias para 50 ou para 5, dependendo de a carga de trabalho precisar ser reduzida ou escalada horizontalmente com base na carga.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-121">For example, some piece of monitoring or management code can change the existing number of instances to 50, or to 5, depending on whether the workload needs to scale in or out based on the load.</span></span> 

<span data-ttu-id="e4ec7-122">C#:</span><span class="sxs-lookup"><span data-stu-id="e4ec7-122">C#:</span></span>

```csharp
StatelessServiceUpdateDescription updateDescription = new StatelessServiceUpdateDescription(); 
updateDescription.InstanceCount = 50;
await fabricClient.ServiceManager.UpdateServiceAsync(new Uri("fabric:/app/service"), updateDescription);
```

<span data-ttu-id="e4ec7-123">Powershell:</span><span class="sxs-lookup"><span data-stu-id="e4ec7-123">Powershell:</span></span>

```posh
Update-ServiceFabricService -Stateless -ServiceName $serviceName -InstanceCount 50
```
### <a name="using-dynamic-instance-count"></a><span data-ttu-id="e4ec7-124">Usando a Contagem de Instâncias Dinâmica</span><span class="sxs-lookup"><span data-stu-id="e4ec7-124">Using Dynamic Instance Count</span></span>
<span data-ttu-id="e4ec7-125">Especificamente para serviços sem estado, o Service Fabric oferece uma maneira automática de alterar a contagem de instâncias.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-125">Specifically for stateless services, Service Fabric offers an automatic way to change the instance count.</span></span> <span data-ttu-id="e4ec7-126">Isso permite que o serviço seja dimensionado dinamicamente com o número de nós que estão disponíveis.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-126">This allows the service to scale dynamically with the number of nodes that are available.</span></span> <span data-ttu-id="e4ec7-127">A maneira de aceitar esse comportamento é definir a contagem de instâncias como -1.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-127">The way to opt into this behavior is to set the instance count = -1.</span></span> <span data-ttu-id="e4ec7-128">InstanceCount = -1 é uma instrução para o Service Fabric que diz "Executar este serviço sem estado em todos os nós".</span><span class="sxs-lookup"><span data-stu-id="e4ec7-128">InstanceCount = -1 is an instruction to Service Fabric that says "Run this stateless service on every node."</span></span> <span data-ttu-id="e4ec7-129">Se o número de nós for alterado, o Service Fabric alterará automaticamente a contagem de instâncias para corresponder à alteração, garantindo que o serviço seja executado em todos os nós válidos.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-129">If the number of nodes changes, Service Fabric automatically changes the instance count to match, ensuring that the service is running on all valid nodes.</span></span> 

<span data-ttu-id="e4ec7-130">C#:</span><span class="sxs-lookup"><span data-stu-id="e4ec7-130">C#:</span></span>

```csharp
StatelessServiceDescription serviceDescription = new StatelessServiceDescription();
//Set other service properties necessary for creation....
serviceDescription.InstanceCount = -1;
await fc.ServiceManager.CreateServiceAsync(serviceDescription);
```

<span data-ttu-id="e4ec7-131">Powershell:</span><span class="sxs-lookup"><span data-stu-id="e4ec7-131">Powershell:</span></span>

```posh
New-ServiceFabricService -ApplicationName $applicationName -ServiceName $serviceName -ServiceTypeName $serviceTypeName -Stateless -PartitionSchemeSingleton -InstanceCount "-1"
```

## <a name="scaling-by-creating-or-removing-new-named-services"></a><span data-ttu-id="e4ec7-132">Dimensionamento criando ou removendo novos serviços nomeados</span><span class="sxs-lookup"><span data-stu-id="e4ec7-132">Scaling by creating or removing new named services</span></span>
<span data-ttu-id="e4ec7-133">Uma instância de serviço nomeada é uma instância específica de um tipo de serviço (consulte [Ciclo de vida do aplicativo do Service Fabric](service-fabric-application-lifecycle.md)) dentro de uma instância de aplicativo nomeada no cluster.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-133">A named service instance is a specific instance of a service type (see [Service Fabric application life cycle](service-fabric-application-lifecycle.md)) within some named application instance in the cluster.</span></span> 

<span data-ttu-id="e4ec7-134">Novas instâncias de serviço nomeadas podem ser criadas (ou removidas) conforme os serviços ficarem mais ou menos ocupados.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-134">New named service instances can be created (or removed) as services become more or less busy.</span></span> <span data-ttu-id="e4ec7-135">Isso permite que as solicitações sejam disseminadas em mais instâncias de serviço, geralmente permitindo que a carga nos serviços existentes diminua.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-135">This allows requests to be spread across more service instances, usually allowing load on existing services to decrease.</span></span> <span data-ttu-id="e4ec7-136">Ao criar serviços, o Gerenciador de Recursos de Cluster do Service Fabric coloca os serviços do cluster de maneira distribuída.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-136">When creating services, the Service Fabric Cluster Resource Manager places the services in the cluster in a distributed fashion.</span></span> <span data-ttu-id="e4ec7-137">As decisões exatas são governadas pelas [métricas](service-fabric-cluster-resource-manager-metrics.md) no cluster e por outras regras de posicionamento.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-137">The exact decisions are governed by the [metrics](service-fabric-cluster-resource-manager-metrics.md) in the cluster and other placement rules.</span></span> <span data-ttu-id="e4ec7-138">Os serviços podem ser criados de várias maneiras diferentes, mas as mais comuns são por meio de ações administrativas, como alguém chamar [`New-ServiceFabricService`](https://docs.microsoft.com/en-us/powershell/module/servicefabric/new-servicefabricservice?view=azureservicefabricps) ou o código chamar [`CreateServiceAsync`](https://docs.microsoft.com/en-us/dotnet/api/system.fabric.fabricclient.servicemanagementclient.createserviceasync?view=azure-dotnet).</span><span class="sxs-lookup"><span data-stu-id="e4ec7-138">Services can be created several different ways, but the most common are either through administrative actions like someone calling [`New-ServiceFabricService`](https://docs.microsoft.com/en-us/powershell/module/servicefabric/new-servicefabricservice?view=azureservicefabricps), or by code calling [`CreateServiceAsync`](https://docs.microsoft.com/en-us/dotnet/api/system.fabric.fabricclient.servicemanagementclient.createserviceasync?view=azure-dotnet).</span></span> <span data-ttu-id="e4ec7-139">`CreateServiceAsync` pode ser chamado até mesmo de dentro de outros serviços em execução no cluster.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-139">`CreateServiceAsync` can even be called from within other services running in the cluster.</span></span>

<span data-ttu-id="e4ec7-140">A criação de serviços de forma dinâmica pode ser usada em todo tipo de cenário e é um padrão comum.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-140">Creating services dynamically can be used in all sorts of scenarios, and is a common pattern.</span></span> <span data-ttu-id="e4ec7-141">Por exemplo, considere um serviço com estado que representa um fluxo de trabalho específico.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-141">For example, consider a stateful service that represents a particular workflow.</span></span> <span data-ttu-id="e4ec7-142">Chamadas que representam trabalho aparecerão nesse serviço e o serviço executará as etapas do fluxo de trabalho e registrará o andamento.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-142">Calls representing work are going to show up to this service, and this service is going to execute the steps to that workflow and record progress.</span></span> 

<span data-ttu-id="e4ec7-143">Como você dimensionaria esse serviço específico?</span><span class="sxs-lookup"><span data-stu-id="e4ec7-143">How would you make this particular service scale?</span></span> <span data-ttu-id="e4ec7-144">O serviço pode ser multilocatário de alguma forma e pode aceitar chamadas e disparar etapas para muitas instâncias diferentes do mesmo fluxo de trabalho, tudo ao mesmo tempo.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-144">The service could be multi-tenant in some form, and accept calls and kick off steps for many different instances of the same workflow all at once.</span></span> <span data-ttu-id="e4ec7-145">No entanto, isso pode tornar o código mais complexo, pois agora ele precisa se preocupar com muitas instâncias diferentes do mesmo fluxo de trabalho, todas elas em estágios diferentes e de clientes diferentes.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-145">However, that can make the code more complex, since now it has to worry about many different instances of the same workflow, all at different stages and from different customers.</span></span> <span data-ttu-id="e4ec7-146">Além disso, lidar com vários fluxos de trabalho ao mesmo tempo não resolve o problema de escala.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-146">Also, handling multiple workflows at the same time doesn't solve the scale problem.</span></span> <span data-ttu-id="e4ec7-147">Isso ocorre porque, em algum momento, esse serviço consumirá recursos demais para caber em um determinado computador.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-147">This is because at some point this service will consume too many resources to fit on a particular machine.</span></span> <span data-ttu-id="e4ec7-148">Muitos serviços que não foram criados para esse padrão também apresentam dificuldades devido a algum afunilamento ou lentidão inerente em seu código.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-148">Many services not built for this pattern in the first place also experience difficulty due to some inherent bottleneck or slowdown in their code.</span></span> <span data-ttu-id="e4ec7-149">Esses tipos de problemas fazem com que o serviço não funcione tão bem quando o número de fluxos de trabalho simultâneos que ele está acompanhando aumenta.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-149">These types of issues cause the service not to work as well when the number of concurrent workflows it is tracking gets larger.</span></span>  

<span data-ttu-id="e4ec7-150">Uma solução é criar uma instância do serviço para cada instância diferente do fluxo de trabalho que você deseja acompanhar. Este é um ótimo padrão e funciona quer o serviço seja com ou sem estado.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-150">A solution is to create an instance of this service for every different instance of the workflow you want to track. This is a great pattern and works whether the service is stateless or stateful.</span></span> <span data-ttu-id="e4ec7-151">Para que esse padrão funcione, geralmente há outro serviço que atua como um "Serviço de gerenciador de carga de trabalho".</span><span class="sxs-lookup"><span data-stu-id="e4ec7-151">For this pattern to work, there's usually another service that acts as a "Workload Manager Service".</span></span> <span data-ttu-id="e4ec7-152">A função desse serviço é receber solicitações e encaminhar essas solicitações para outros serviços.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-152">The job of this service is to receive requests and to route those requests to other services.</span></span> <span data-ttu-id="e4ec7-153">O gerenciador pode criar dinamicamente uma instância do serviço de carga de trabalho quando receber a mensagem e, em seguida, passar solicitações para esses serviços.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-153">The manager can dynamically create an instance of the workload service when it receives the message, and then pass on requests to those services.</span></span> <span data-ttu-id="e4ec7-154">O serviço de gerenciador também pode receber retornos de chamada quando um determinado serviço de fluxo de trabalho concluir seu trabalho.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-154">The manager service could also receive callbacks when a given workflow service completes its job.</span></span> <span data-ttu-id="e4ec7-155">Quando receber esses retornos de chamada, o gerenciador pode excluir essa instância do serviço de fluxo de trabalho ou deixá-la se mais chamadas forem esperadas.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-155">When the manager receives these callbacks it could delete that instance of the workflow service, or leave it if more calls are expected.</span></span> 

<span data-ttu-id="e4ec7-156">Versões avançadas desse tipo de gerenciador podem até mesmo criar pools dos serviços que gerencia.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-156">Advanced versions of this type of manager can even create pools of the services that it manages.</span></span> <span data-ttu-id="e4ec7-157">O pool ajuda a garantir que, quando uma nova solicitação for recebida, ela não precise aguardar o serviço para ser executada.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-157">The pool helps ensure that when a new request comes in it doesn't have to wait for the service to spin up.</span></span> <span data-ttu-id="e4ec7-158">Em vez disso, o gerenciador pode apenas escolher um serviço de fluxo de trabalho que não esteja ocupado no pool ou pode encaminhar aleatoriamente.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-158">Instead, the manager can just pick a workflow service that is not currently busy from the pool, or route randomly.</span></span> <span data-ttu-id="e4ec7-159">Manter um pool de serviços disponível torna a manipulação de novas solicitações mais rápida, pois é menos provável que a solicitação precise aguardar um novo serviço para ser executada.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-159">Keeping a pool of services available makes handling new requests faster, since it is less likely that the request has to wait for a new service to be spun up.</span></span> <span data-ttu-id="e4ec7-160">A criação de novos serviços é rápida, mas não é gratuita ou instantânea.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-160">Creating new services is quick, but not free or instantaneous.</span></span> <span data-ttu-id="e4ec7-161">O pool ajuda a minimizar o tempo que a solicitação precisa aguardar antes de ser atendida.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-161">The pool helps minimize the amount of time the request has to wait before being serviced.</span></span> <span data-ttu-id="e4ec7-162">Frequentemente, você verá esse padrão de gerenciador e pool quando os tempos de resposta forem a prioridade.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-162">You'll often see this manager and pool pattern when response times matter the most.</span></span> <span data-ttu-id="e4ec7-163">Enfileirar a solicitação e criar o serviço em segundo plano e, _em seguida_, transmiti-lo também é um padrão popular de gerenciador, assim como a criação e a exclusão de serviços com base no acompanhamento da quantidade de trabalho que o serviço tem pendente no momento.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-163">Queuing the request and creating the service in the background and _then_ passing it on is also a popular manager pattern, as is creating and deleting services based on some tracking of the amount of work that service currently has pending.</span></span> 

## <a name="scaling-by-creating-or-removing-new-named-application-instances"></a><span data-ttu-id="e4ec7-164">Dimensionamento criando ou removendo novas instâncias de aplicativos nomeados</span><span class="sxs-lookup"><span data-stu-id="e4ec7-164">Scaling by creating or removing new named application instances</span></span>
<span data-ttu-id="e4ec7-165">Criar e excluir instâncias inteiras do aplicativo é semelhante ao padrão de criação e exclusão de serviços.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-165">Creating and deleting whole application instances is similar to the pattern of creating and deleting services.</span></span> <span data-ttu-id="e4ec7-166">Para esse padrão, há um serviço de gerenciador que está tomando a decisão com base nas solicitações que está vendo e nas informações que está recebendo de outros serviços dentro do cluster.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-166">For this pattern, there's some manager service that is making the decision based on the requests that it is seeing and the information it is receiving from the other services inside the cluster.</span></span> 

<span data-ttu-id="e4ec7-167">Quando a criação de uma nova instância de aplicativo nomeada deve ser usada em vez da criação de uma nova instância de serviço nomeada em algum aplicativo já existente?</span><span class="sxs-lookup"><span data-stu-id="e4ec7-167">When should creating a new named application instance be used instead of creating a new named service instances in some already existing application?</span></span> <span data-ttu-id="e4ec7-168">Há alguns casos:</span><span class="sxs-lookup"><span data-stu-id="e4ec7-168">There's a few cases:</span></span>

  * <span data-ttu-id="e4ec7-169">A nova instância de aplicativo é destinada a um cliente cujo código precisa ser executado com algumas configurações de segurança ou identidade específicas.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-169">The new application instance is for a customer whose code needs to run under some particular identity or security settings.</span></span>
    * <span data-ttu-id="e4ec7-170">O Service Fabric permite definir diferentes pacotes de códigos para serem executados em identidades específicas.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-170">Service Fabric allows defining different code packages to run under particular identities.</span></span> <span data-ttu-id="e4ec7-171">Para iniciar o mesmo pacote de códigos em identidades diferentes, as ativações precisam ocorrer em instâncias diferentes do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-171">In order to launch the same code package under different identities, the activations need to occur in different application instances.</span></span> <span data-ttu-id="e4ec7-172">Considere um caso em que você tem as cargas de trabalho de um cliente existente implantadas.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-172">Consider a case where you have an existing customer's workloads deployed.</span></span> <span data-ttu-id="e4ec7-173">Elas podem estar em execução sob uma identidade específica, de modo que você pode monitorar e controlar seu acesso a outros recursos, como bancos de dados remotos ou outros sistemas.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-173">These may be running under a particular identity so you can monitor and control their access to other resources, such as remote databases or other systems.</span></span> <span data-ttu-id="e4ec7-174">Nesse caso, quando um novo cliente se inscreve, você provavelmente não deseja ativar seu código no mesmo contexto (espaço de processo).</span><span class="sxs-lookup"><span data-stu-id="e4ec7-174">In this case, when a new customer signs up, you probably don't want to activate their code in the same context (process space).</span></span> <span data-ttu-id="e4ec7-175">Embora seja possível fazer isso, ficaria mais difícil para o código de seu serviço atuar no contexto de uma identidade específica.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-175">While you could, this makes it harder for your service code to act within the context of a particular identity.</span></span> <span data-ttu-id="e4ec7-176">Normalmente, você precisa ter mais código de gerenciamento de identidade, isolamento e segurança.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-176">You typically must have more security, isolation, and identity management code.</span></span> <span data-ttu-id="e4ec7-177">Em vez de usar diferentes instâncias de serviço nomeadas na mesma instância do aplicativo e, portanto, o mesmo espaço de processo, você pode usar diferentes instâncias nomeadas de aplicativo do Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-177">Instead of using different named service instances within the same application instance and hence the same process space, you can use different named Service Fabric Application instances.</span></span> <span data-ttu-id="e4ec7-178">Isso torna mais fácil definir contextos de identidade diferentes.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-178">This makes it easier to define different identity contexts.</span></span>
  * <span data-ttu-id="e4ec7-179">A nova instância de aplicativo também serve como um meio de configuração</span><span class="sxs-lookup"><span data-stu-id="e4ec7-179">The new application instance also serves as a means of configuration</span></span>
    * <span data-ttu-id="e4ec7-180">Por padrão, todas as instâncias de serviço nomeadas de um tipo de serviço específico dentro de uma instância do aplicativo serão executadas no mesmo processo em um determinado nó.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-180">By default, all of the named service instances of a particular service type within an application instance will run in the same process on a given node.</span></span> <span data-ttu-id="e4ec7-181">Isso significa que, embora você possa configurar cada instância de serviço de forma diferente, fazer isso é complicado.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-181">What this means is that while you can configure each service instance differently, doing so is complicated.</span></span> <span data-ttu-id="e4ec7-182">Os serviços precisam ter algum token que eles usem para procurar sua configuração dentro de um pacote de configuração.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-182">Services must have some token they use to look up their config within a configuration package.</span></span> <span data-ttu-id="e4ec7-183">Normalmente, isso é apenas o nome do serviço.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-183">Usually this is just the service's name.</span></span> <span data-ttu-id="e4ec7-184">Isso funciona bem, mas associa a configuração aos nomes das instâncias de serviço nomeadas individuais dentro dessa instância do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-184">This works fine, but it couples the configuration to the names of the individual named service instances within that application instance.</span></span> <span data-ttu-id="e4ec7-185">Isso pode ser confuso e difícil de gerenciar, pois a configuração normalmente é um artefato de tempo de design com valores específicos de instância do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-185">This can be confusing and hard to manage since configuration is normally a design time artifact with application instance specific values.</span></span> <span data-ttu-id="e4ec7-186">A criação de mais serviços sempre significa mais atualizações de aplicativo para alterar as informações nos pacotes de configuração ou para implantar novos pacotes, para que os novos serviços possam procurar suas informações específicas.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-186">Creating more services always means more application upgrades to change the information within the config packages or to deploy new ones so that the new services can look up their specific information.</span></span> <span data-ttu-id="e4ec7-187">Normalmente, é mais fácil criar uma nova instância de aplicativo nomeada.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-187">It's often easier to create a whole new named application instance.</span></span> <span data-ttu-id="e4ec7-188">Em seguida, você pode usar os parâmetros do aplicativo para definir a configuração que for necessária para os serviços.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-188">Then you can use the application parameters to set whatever configuration is necessary for the services.</span></span> <span data-ttu-id="e4ec7-189">Dessa forma, todos os serviços que forem criados dentro dessa instância de aplicativo nomeada podem herdar configuração específicas.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-189">This way all of the services that are created within that named application instance can inherit particular configuration settings.</span></span> <span data-ttu-id="e4ec7-190">Por exemplo, em vez de ter um único arquivo de configuração com as configurações e personalizações de cada cliente, como segredos ou limites de recursos por cliente, você teria uma instância de aplicativo diferente para cada cliente com essas configurações substituídas.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-190">For example, instead of having a single configuration file with the settings and customizations for every customer, such as secrets or per customer resource limits, you'd instead have a different application instance for each customer with these settings overridden.</span></span> 
  * <span data-ttu-id="e4ec7-191">O novo aplicativo funciona como um limite de atualização</span><span class="sxs-lookup"><span data-stu-id="e4ec7-191">The new application serves as an upgrade boundary</span></span>
    * <span data-ttu-id="e4ec7-192">Dentro do Service Fabric, instâncias de aplicativo nomeadas diferentes servem como limites de atualização.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-192">Within Service Fabric, different named application instances serve as boundaries for upgrade.</span></span> <span data-ttu-id="e4ec7-193">Uma atualização de uma instância de aplicativo nomeada não afetará o código que outra instância de aplicativo nomeada está executando.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-193">An upgrade of one named application instance will not impact the code that another named application instance is running.</span></span> <span data-ttu-id="e4ec7-194">Os diferentes aplicativos terminarão executando versões diferentes do mesmo código nos mesmos nós.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-194">The different applications will end up running different versions of the same code on the same nodes.</span></span> <span data-ttu-id="e4ec7-195">Isso pode ser um fator quando você precisar tomar uma decisão de dimensionamento, porque você pode escolher se o novo código deve seguir as mesmo atualizações que o outro serviço ou não.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-195">This can be a factor when you need to make a scaling decision because you can choose whether the new code should follow the same upgrades as another service or not.</span></span> <span data-ttu-id="e4ec7-196">Por exemplo, digamos que chegue ao serviço de gerenciamento uma chamada responsável por dimensionar as cargas de trabalho de um determinado cliente criando e excluindo serviços dinamicamente.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-196">For example, say that a call arrives at the manager service that is responsible for scaling a particular customer's workloads by creating and deleting services dynamically.</span></span> <span data-ttu-id="e4ec7-197">Nesse caso, no entanto, a chamada é para uma carga de trabalho associada a m _novo_ cliente.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-197">In this case however, the call is for a workload associated with a _new_ customer.</span></span> <span data-ttu-id="e4ec7-198">A maioria dos clientes preferem ficar isolados uns dos outros não apenas pelos motivos de segurança e configuração listados anteriormente, mas porque isso oferece mais flexibilidade em termos de executar versões específicas do software e escolher quando elas são atualizadas.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-198">Most customers like being isolated from each other not just for the security and configuration reasons listed previously, but because it provides more flexibility in terms of running specific versions of the software and choosing when they get upgraded.</span></span> <span data-ttu-id="e4ec7-199">Você também pode criar uma nova instância de aplicativo e criar o serviço nela, simplesmente para particionar ainda mais a quantidade de seus serviços que qualquer atualização afetará.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-199">You may also create a new application instance and create the service there simply to further partition the amount of your services that any one upgrade will touch.</span></span> <span data-ttu-id="e4ec7-200">Instâncias de aplicativo separadas proporcionam maior granularidade ao fazer atualizações de aplicativo e também habilitam testes A/B e implantações de verde/azul.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-200">Separate application instances provide greater granularity when doing application upgrades, and also enable A/B testing and Blue/Green deployments.</span></span> 
  * <span data-ttu-id="e4ec7-201">A instância de aplicativo existente está cheia</span><span class="sxs-lookup"><span data-stu-id="e4ec7-201">The existing application instance is full</span></span>
    * <span data-ttu-id="e4ec7-202">No Service Fabric, a [capacidade do aplicativo](service-fabric-cluster-resource-manager-application-groups.md) é um conceito que você pode usar para controlar a quantidade de recursos disponíveis para instâncias de aplicativo específicas.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-202">In Service Fabric, [application capacity](service-fabric-cluster-resource-manager-application-groups.md) is a concept that you can use to control the amount of resources available for particular application instances.</span></span> <span data-ttu-id="e4ec7-203">Por exemplo, você pode decidir que um determinado serviço precisa ter outra instância criada para ser dimensionado.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-203">For example, you may decide that a given service needs to have another instance created in order to scale.</span></span> <span data-ttu-id="e4ec7-204">No entanto, essa instância de aplicativo está sem capacidade para uma determinada métrica.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-204">However, this application instance is out of capacity for a certain metric.</span></span> <span data-ttu-id="e4ec7-205">Se esse cliente ou carga de trabalho específica ainda for receber mais recursos, então você poderá aumentar a capacidade existente para esse aplicativo ou criar um novo aplicativo.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-205">If this particular customer or workload should still be granted more resources, then you could either increase the existing capacity for that application or create a new application.</span></span> 

## <a name="scaling-at-the-partition-level"></a><span data-ttu-id="e4ec7-206">Dimensionamento no nível da partição</span><span class="sxs-lookup"><span data-stu-id="e4ec7-206">Scaling at the partition level</span></span>
<span data-ttu-id="e4ec7-207">O Service Fabric permite o particionamento.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-207">Service Fabric supports partitioning.</span></span> <span data-ttu-id="e4ec7-208">O particionamento divide um serviço em várias seções lógicas e físicas, e cada uma delas funciona de forma independente.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-208">Partitioning splits a service into several logical and physical sections, each of which operates independently.</span></span> <span data-ttu-id="e4ec7-209">Isso é útil com serviços com estado, pois nenhum conjunto de réplicas precisa lidar com todas as chamadas e manipular todos os estados de uma vez.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-209">This is useful with stateful services, since no one set of replicas has to handle all the calls and manipulate all of the state at once.</span></span> <span data-ttu-id="e4ec7-210">A [Visão geral de particionamento](service-fabric-concepts-partitioning.md) fornece informações sobre os tipos de esquemas de particionamento para os quais há suporte.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-210">The [partitioning overview](service-fabric-concepts-partitioning.md) provides information on the types of partitioning schemes that are supported.</span></span> <span data-ttu-id="e4ec7-211">As réplicas de cada partição são distribuídas entre os nós de um cluster, distribuindo a carga do serviço e garantindo que nem o serviço inteiro, nem nenhuma partição tenha um ponto de falha.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-211">The replicas of each partition are spread across the nodes in a cluster, distributing that service's load and ensuring that neither the service as a whole or any partition has a single point of failure.</span></span> 

<span data-ttu-id="e4ec7-212">Considere um serviço que usa um esquema de particionamento de intervalo com uma chave baixa de 0, uma chave alta de 99 e uma contagem de partições de 4.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-212">Consider a service that uses a ranged partitioning scheme with a low key of 0, a high key of 99, and a partition count of 4.</span></span> <span data-ttu-id="e4ec7-213">Em um cluster de três nós, o serviço pode ser disposto com quatro réplicas que compartilham os recursos em cada nó, conforme mostrado aqui:</span><span class="sxs-lookup"><span data-stu-id="e4ec7-213">In a three-node cluster, the service might be laid out with four replicas that share the resources on each node as shown here:</span></span>

<span data-ttu-id="e4ec7-214"><center>
![Layout de partição com três nós](./media/service-fabric-concepts-scalability/layout-three-nodes.png)
</center></span><span class="sxs-lookup"><span data-stu-id="e4ec7-214"><center>
![Partition layout with three nodes](./media/service-fabric-concepts-scalability/layout-three-nodes.png)
</center></span></span>

<span data-ttu-id="e4ec7-215">Se você aumentar o número de nós, o Service Fabric moverá algumas das réplicas existentes nele.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-215">If you increase the number of nodes, Service Fabric will move some of the existing replicas there.</span></span> <span data-ttu-id="e4ec7-216">Por exemplo, digamos que o número de nós aumente para quatro e que as réplicas sejam redistribuídas.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-216">For example, let's say the number of nodes increases to four and the replicas get redistributed.</span></span> <span data-ttu-id="e4ec7-217">Agora, o serviço tem três réplicas em execução em cada nó, cada um pertencente a diferentes partições.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-217">Now the service now has three replicas running on each node, each belonging to different partitions.</span></span> <span data-ttu-id="e4ec7-218">Isso permite uma melhor utilização dos recursos, desde que o novo nó não seja frio.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-218">This allows better resource utilization since the new node isn't cold.</span></span> <span data-ttu-id="e4ec7-219">Normalmente, isso também melhora o desempenho, porque cada serviço tem mais recursos disponíveis para ele.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-219">Typically, it also improves performance as each service has more resources available to it.</span></span>

<span data-ttu-id="e4ec7-220"><center>
![Layout de partição com quatro nós](./media/service-fabric-concepts-scalability/layout-four-nodes.png)
</center></span><span class="sxs-lookup"><span data-stu-id="e4ec7-220"><center>
![Partition layout with four nodes](./media/service-fabric-concepts-scalability/layout-four-nodes.png)
</center></span></span>

## <a name="scaling-by-using-the-service-fabric-cluster-resource-manager-and-metrics"></a><span data-ttu-id="e4ec7-221">Dimensionamento usando métricas e o Gerenciador de Recursos de Cluster do Service Fabric</span><span class="sxs-lookup"><span data-stu-id="e4ec7-221">Scaling by using the Service Fabric Cluster Resource Manager and metrics</span></span>
<span data-ttu-id="e4ec7-222">[Métricas](service-fabric-cluster-resource-manager-metrics.md) são como os serviços expressam seu consumo de recursos ao Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-222">[Metrics](service-fabric-cluster-resource-manager-metrics.md) are how services express their resource consumption to Service Fabric.</span></span> <span data-ttu-id="e4ec7-223">O uso de métricas dá ao Gerenciador de Recursos de Cluster a oportunidade de reorganizar e otimizar o layout do cluster.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-223">Using metrics gives the Cluster Resource Manager an opportunity to reorganize and optimize the layout of the cluster.</span></span> <span data-ttu-id="e4ec7-224">Por exemplo, pode haver vários recursos no cluster, mas eles podem não estar alocados aos serviços que estão fazendo o trabalho atualmente.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-224">For example, there may be plenty of resources in the cluster, but they might not be allocated to the services that are currently doing work.</span></span> <span data-ttu-id="e4ec7-225">O uso de métricas permite que o Gerenciador de Recursos de Cluster reorganize o cluster para garantir que os serviços tenham acesso aos recursos disponíveis.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-225">Using metrics allows the Cluster Resource Manager to reorganize the cluster to ensure that services have access to the available resources.</span></span> 


## <a name="scaling-by-adding-and-removing-nodes-from-the-cluster"></a><span data-ttu-id="e4ec7-226">Dimensionamento adicionando e removendo nós do cluster</span><span class="sxs-lookup"><span data-stu-id="e4ec7-226">Scaling by adding and removing nodes from the cluster</span></span> 
<span data-ttu-id="e4ec7-227">Outra opção para dimensionar com o Service Fabric é alterar o tamanho do cluster.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-227">Another option for scaling with Service Fabric is to change the size of the cluster.</span></span> <span data-ttu-id="e4ec7-228">Alterar o tamanho do cluster significa adicionar ou remover nós de um ou mais tipos de nós no cluster.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-228">Changing the size of the cluster means adding or removing nodes for one or more of the node types in the cluster.</span></span> <span data-ttu-id="e4ec7-229">Por exemplo, considere um caso em que todos os nós no cluster estejam quentes.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-229">For example, consider a case where all of the nodes in the cluster are hot.</span></span> <span data-ttu-id="e4ec7-230">Isso significa que os recursos do cluster estão quase todos consumidos.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-230">This means that the cluster's resources are almost all consumed.</span></span> <span data-ttu-id="e4ec7-231">Nesse caso, adicionar mais nós ao cluster é a melhor maneira de dimensionar.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-231">In this case, adding more nodes to the cluster is the best way to scale.</span></span> <span data-ttu-id="e4ec7-232">Após os novos nós ingressarem no cluster, o Gerenciador de Recursos de Cluster do Service Fabric move serviços para eles, fazendo com que haja menos carga total nos nós existentes.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-232">Once the new nodes join the cluster the Service Fabric Cluster Resource Manager moves services to them, resulting in less total load on the existing nodes.</span></span> <span data-ttu-id="e4ec7-233">Para serviços sem estado com contagem de instâncias = -1, mais instâncias de serviço são criadas automaticamente.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-233">For stateless services with instance count = -1, more service instances are automatically created.</span></span> <span data-ttu-id="e4ec7-234">Isso permite que algumas chamadas sejam movidas dos nós existentes para novos nós.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-234">This allows some calls to move from the existing nodes to the new nodes.</span></span> 

<span data-ttu-id="e4ec7-235">O acréscimo e a remoção de nós do cluster podem ser feitos usando o módulo do PowerShell do Azure Resource Manager do Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-235">Adding and removing nodes to the cluster can be accomplished via the Service Fabric Azure Resource Manager PowerShell module.</span></span>

```posh
Add-AzureRmServiceFabricNode -ResourceGroupName $resourceGroupName -Name $clusterResourceName -NodeType $nodeTypeName  -NumberOfNodesToAdd 5 
Remove-AzureRmServiceFabricNode -ResourceGroupName $resourceGroupName -Name $clusterResourceName -NodeType $nodeTypeName -NumberOfNodesToRemove 5
```

## <a name="putting-it-all-together"></a><span data-ttu-id="e4ec7-236">Juntando as peças</span><span class="sxs-lookup"><span data-stu-id="e4ec7-236">Putting it all together</span></span>
<span data-ttu-id="e4ec7-237">Vamos reunir tudo o que discutimos aqui e aplicar a um exemplo.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-237">Let's take all the ideas that we've discussed here and talk through an example.</span></span> <span data-ttu-id="e4ec7-238">Considere o seguinte serviço: você está tentando criar um serviço que atue como um catálogo de endereços, mantendo nomes e informações de contato.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-238">Consider the following service: you are trying to build a service that acts as an address book, holding on to names and contact information.</span></span> 

<span data-ttu-id="e4ec7-239">Logo no início, você tem uma série de perguntas relacionadas à escala: quantos usuários você terá?</span><span class="sxs-lookup"><span data-stu-id="e4ec7-239">Right up front you have a bunch of questions related to scale: How many users are you going to have?</span></span> <span data-ttu-id="e4ec7-240">Quantos contatos cada usuário armazenará?</span><span class="sxs-lookup"><span data-stu-id="e4ec7-240">How many contacts will each user store?</span></span> <span data-ttu-id="e4ec7-241">Tentar descobrir isso enquanto você está tentando fazer o serviço funcionar pela primeira vez é difícil.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-241">Trying to figure this all out when you are standing up your service for the first time is difficult.</span></span> <span data-ttu-id="e4ec7-242">Digamos que você optasse por um único serviço estático com uma contagem de partições específica.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-242">Let's say you were going to go with a single static service with a specific partition count.</span></span> <span data-ttu-id="e4ec7-243">As consequências de escolher a contagem de partições errada poderia causar problemas de escala mais tarde.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-243">The consequences of picking the wrong partition count could cause you to have scale issues later.</span></span> <span data-ttu-id="e4ec7-244">Da mesma forma, mesmo se escolher a contagem correta, talvez você não tenha todas as informações necessárias.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-244">Similarly, even if you pick the right count you might not have all the information you need.</span></span> <span data-ttu-id="e4ec7-245">Por exemplo, você também precisa decidir o tamanho do cluster logo no início, tanto em termos do número de nós quanto de seus tamanhos.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-245">For example, you also have to decide the size of the cluster up front, both in terms of the number of nodes and their sizes.</span></span> <span data-ttu-id="e4ec7-246">Geralmente, é difícil prever quantos recursos um serviço consumirá durante seu tempo de vida.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-246">It's usually hard to predict how many resources a service is going to consume over its lifetime.</span></span> <span data-ttu-id="e4ec7-247">Também pode ser difícil saber antecipadamente o padrão de tráfego que realmente passa pelo serviço.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-247">It can also be hard to know ahead of time the traffic pattern that the service actually sees.</span></span> <span data-ttu-id="e4ec7-248">Por exemplo, talvez as pessoas adicionem e removam contatos somente de manhã ou talvez isso seja distribuído uniformemente ao longo do dia.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-248">For example, maybe people add and remove their contacts only first thing in the morning, or maybe it's distributed evenly over the course of the day.</span></span> <span data-ttu-id="e4ec7-249">Com base nisso, talvez seja necessário reduzir e escalar horizontalmente de forma dinâmica.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-249">Based on this you might need to scale out and in dynamically.</span></span> <span data-ttu-id="e4ec7-250">Talvez você possa aprender a prever quando precisará reduzir e escalar horizontalmente, mas, de qualquer forma, você provavelmente precisará reagir a alterações no consumo de recursos por seu serviço.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-250">Maybe you can learn to predict when you're going to need to scale out and in, but either way you're probably going to need to react to changing resource consumption by your service.</span></span> <span data-ttu-id="e4ec7-251">Isso pode envolver alterar o tamanho do cluster para fornecer mais recursos quando reorganizar o uso de recursos existentes não for suficiente.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-251">This can involve changing the size of the cluster in order to provide more resources when reorganizing use of existing resources isn't enough.</span></span> 

<span data-ttu-id="e4ec7-252">Mas por que mesmo tentar escolher um único esquema de partição para todos os usuários?</span><span class="sxs-lookup"><span data-stu-id="e4ec7-252">But why even try to pick a single partition scheme out for all users?</span></span> <span data-ttu-id="e4ec7-253">Por que limitar-se a um serviço e um cluster estático?</span><span class="sxs-lookup"><span data-stu-id="e4ec7-253">Why limit yourself to one service and one static cluster?</span></span> <span data-ttu-id="e4ec7-254">A situação real costuma ser mais dinâmica.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-254">The real situation is usually more dynamic.</span></span> 

<span data-ttu-id="e4ec7-255">Ao criar algo para ser dimensionado, considere o seguinte padrão dinâmico.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-255">When building for scale, consider the following dynamic pattern.</span></span> <span data-ttu-id="e4ec7-256">Talvez seja necessário adaptá-lo à sua situação:</span><span class="sxs-lookup"><span data-stu-id="e4ec7-256">You may need to adapt it to your situation:</span></span>

1. <span data-ttu-id="e4ec7-257">Em vez de tentar escolher um esquema de particionamento para todos antecipadamente, crie um "serviço de gerenciador".</span><span class="sxs-lookup"><span data-stu-id="e4ec7-257">Instead of trying to pick a partitioning scheme for everyone up front, build a "manager service".</span></span>
2. <span data-ttu-id="e4ec7-258">O trabalho do serviço de gerenciador é examinar as informações do cliente quando ele se inscreve no serviço.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-258">The job of the manager service is to look at customer information when they sign up for your service.</span></span> <span data-ttu-id="e4ec7-259">Depois, dependendo dessas informações, o serviço de gerenciador cria uma instância de seu serviço de armazenamento de contatos _real_ _apenas para esse cliente_.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-259">Then depending on that information the manager service create an instance of your _actual_ contact-storage service _just for that customer_.</span></span> <span data-ttu-id="e4ec7-260">Se ele precisar de uma configuração específica, de isolamento ou de atualizações, você também poderá optar por criar uma instância de Aplicativo para esse cliente.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-260">If they require particular configuration, isolation, or upgrades, you can also decide to spin up an Application instance for this customer.</span></span> 

<span data-ttu-id="e4ec7-261">Esse padrão de criação dinâmica traz muitos benefícios:</span><span class="sxs-lookup"><span data-stu-id="e4ec7-261">This dynamic creation pattern many benefits:</span></span>

  - <span data-ttu-id="e4ec7-262">Você não fica tentando adivinhar a contagem correta de partições para todos os usuários com antecedência ou criar um único serviço infinitamente dimensionável por conta própria.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-262">You're not trying to guess the correct partition count for all users up front or build a single service that is infinitely scalable all on its own.</span></span> 
  - <span data-ttu-id="e4ec7-263">Usuários diferentes não precisam ter a mesma contagem de partições, contagem de réplicas, restrições de posicionamento, métricas, cargas padrão, nomes de serviço, configurações de DNS ou qualquer uma das outras propriedades especificadas no nível do serviço ou do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-263">Different users don't have to have the same partition count, replica count, placement constraints, metrics, default loads, service names, dns settings, or any of the other properties specified at the service or application level.</span></span> 
  - <span data-ttu-id="e4ec7-264">Você obtém uma maior segmentação de dados.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-264">You gain additional data segmentation.</span></span> <span data-ttu-id="e4ec7-265">Cada cliente tem sua própria cópia do serviço</span><span class="sxs-lookup"><span data-stu-id="e4ec7-265">Each customer has their own copy of the service</span></span>
    - <span data-ttu-id="e4ec7-266">Cada serviço de cliente pode ser configurado de forma diferente e pode ter mais ou menos recursos, com mais ou menos partições ou réplicas, conforme a necessidade baseada na escala esperada.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-266">Each customer service can be configured differently and granted more or fewer resources, with more or fewer partitions or replicas as necessary based on their expected scale.</span></span>
      - <span data-ttu-id="e4ec7-267">Por exemplo, digamos que o cliente tenha pago pela camada "Ouro" – ele poderia receber mais réplicas ou uma contagem maior de partições e, potencialmente, mais recursos dedicados a seus serviços por meio das métricas e capacidades do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-267">For example, say the customer paid for the "Gold" tier - they could get more replicas or greater partition count, and potentially resources dedicated to their services via metrics and application capacities.</span></span>
      - <span data-ttu-id="e4ec7-268">Ou digamos que ele tenha fornecido informações indicando que o número de contatos de que precisava era "Pequeno" — ele receberia apenas algumas partições ou poderia até mesmo ser colocado em um pool de serviços compartilhados com outros clientes.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-268">Or say they provided information indicating the number of contacts they needed was "Small" - they would get only a few partitions, or could even be put into a shared service pool with other customers.</span></span>
  - <span data-ttu-id="e4ec7-269">Você não vai executar um monte de instâncias de serviços ou réplicas enquanto aguarda os clientes</span><span class="sxs-lookup"><span data-stu-id="e4ec7-269">You're not running a bunch of service instances or replicas while you're waiting for customers to show up</span></span>
  - <span data-ttu-id="e4ec7-270">Se um cliente sair, remover suas informações do serviço é tão simples quanto a exclusão de um serviço ou aplicação por um gerente.</span><span class="sxs-lookup"><span data-stu-id="e4ec7-270">If a customer ever leaves, then removing their information from your service is as simple as having the manager delete that service or application that it created.</span></span>

## <a name="next-steps"></a><span data-ttu-id="e4ec7-271">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="e4ec7-271">Next steps</span></span>
<span data-ttu-id="e4ec7-272">Para saber mais sobre os conceitos do Service Fabric, confira os seguintes artigos:</span><span class="sxs-lookup"><span data-stu-id="e4ec7-272">For more information on Service Fabric concepts, see the following articles:</span></span>

* [<span data-ttu-id="e4ec7-273">Disponibilidade dos serviços de malha do serviço</span><span class="sxs-lookup"><span data-stu-id="e4ec7-273">Availability of Service Fabric services</span></span>](service-fabric-availability-services.md)
* [<span data-ttu-id="e4ec7-274">Particionando serviços da Malha do Serviço</span><span class="sxs-lookup"><span data-stu-id="e4ec7-274">Partitioning Service Fabric services</span></span>](service-fabric-concepts-partitioning.md)
