---
title: "Autenticação e autorização no Serviço de Aplicativo do Azure | Microsoft Docs"
description: "Referência conceitual e visão geral do recurso Autenticação/Autorização para o Serviço de Aplicativo do Azure"
services: app-service
documentationcenter: 
author: mattchenderson
manager: erikre
editor: 
ms.assetid: b7151b57-09e5-4c77-a10c-375a262f17e5
ms.service: app-service
ms.workload: mobile
ms.tgt_pltfrm: na
ms.devlang: multiple
ms.topic: article
ms.date: 08/29/2016
ms.author: mahender
ms.openlocfilehash: e89ba5613c615c41af93e8f63b3703da8395095c
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/11/2017
---
# <a name="authentication-and-authorization-in-azure-app-service"></a><span data-ttu-id="5ca40-103">Autenticação e autorização no Serviço de Aplicativo do Azure</span><span class="sxs-lookup"><span data-stu-id="5ca40-103">Authentication and authorization in Azure App Service</span></span>
## <a name="what-is-app-service-authentication--authorization"></a><span data-ttu-id="5ca40-104">O que é a Autenticação/Autorização do Serviço de Aplicativo?</span><span class="sxs-lookup"><span data-stu-id="5ca40-104">What is App Service Authentication / Authorization?</span></span>
<span data-ttu-id="5ca40-105">A Autenticação/Autorização do Serviço de Aplicativo é um recurso que oferece uma maneira para seu aplicativo conectar usuários de forma que você não precise alterar o código no back-end do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="5ca40-105">App Service Authentication / Authorization is a feature that provides a way for your application to sign in users so that you don't have to change code on the app backend.</span></span> <span data-ttu-id="5ca40-106">Ele fornece uma maneira fácil de proteger o aplicativo e trabalhar com dados por usuário.</span><span class="sxs-lookup"><span data-stu-id="5ca40-106">It provides an easy way to protect your application and work with per-user data.</span></span>

<span data-ttu-id="5ca40-107">O Serviço de Aplicativo usa uma identidade federada, na qual um provedor de identidade de terceiros armazena contas e autentica usuários.</span><span class="sxs-lookup"><span data-stu-id="5ca40-107">App Service uses federated identity, in which a third-party identity provider stores accounts and authenticates users.</span></span> <span data-ttu-id="5ca40-108">O aplicativo se baseia nas informações de identidade do provedor para que o aplicativo não tenha de armazenar essas informações por conta própria.</span><span class="sxs-lookup"><span data-stu-id="5ca40-108">The application relies on the provider's identity information so that the app doesn't have to store that information itself.</span></span> <span data-ttu-id="5ca40-109">O Serviço de Aplicativo dá suporte a cinco provedores de identidade prontos para uso: Azure Active Directory, Facebook, Google, Conta da Microsoft e Twitter.</span><span class="sxs-lookup"><span data-stu-id="5ca40-109">App Service supports five identity providers out of the box: Azure Active Directory, Facebook, Google, Microsoft Account, and Twitter.</span></span> <span data-ttu-id="5ca40-110">Seu aplicativo pode utilizar qualquer quantidade desses provedores de identidade para fornecer aos usuários opções de como entrar.</span><span class="sxs-lookup"><span data-stu-id="5ca40-110">Your app can use any number of these identity providers to provide your users with options for how they sign in.</span></span> <span data-ttu-id="5ca40-111">Para expandir esse suporte interno, você pode integrar outro provedor de identidade ou [sua própria solução de identidade personalizada][custom-auth].</span><span class="sxs-lookup"><span data-stu-id="5ca40-111">To expand the built-in support, you can integrate another identity provider or [your own custom identity solution][custom-auth].</span></span>

<span data-ttu-id="5ca40-112">Se você deseja começar agora mesmo, veja um dos seguintes tutoriais:</span><span class="sxs-lookup"><span data-stu-id="5ca40-112">If you want to get started right away, see one of the following tutorials:</span></span>

* <span data-ttu-id="5ca40-113">[Adicionar autenticação ao aplicativo iOS][iOS] (ou [Android], [Windows], [Xamarin.iOS], [Xamarin.Android], [Xamarin.Forms] ou [Cordova])</span><span class="sxs-lookup"><span data-stu-id="5ca40-113">[Add authentication to your iOS app][iOS] (or [Android], [Windows], [Xamarin.iOS], [Xamarin.Android], [Xamarin.Forms], or [Cordova])</span></span>
* <span data-ttu-id="5ca40-114">[Autenticação de usuário para Aplicativos de API no Serviço de Aplicativo do Azure][apia-user]</span><span class="sxs-lookup"><span data-stu-id="5ca40-114">[User authentication for API Apps in Azure App Service][apia-user]</span></span>
* <span data-ttu-id="5ca40-115">[Introdução ao Serviço de Aplicativo do Azure - Parte 2][web-getstarted]</span><span class="sxs-lookup"><span data-stu-id="5ca40-115">[Get started with Azure App Service - Part 2][web-getstarted]</span></span>

## <a name="how-authentication-works-in-app-service"></a><span data-ttu-id="5ca40-116">Como funciona a autenticação no Serviço de Aplicativo</span><span class="sxs-lookup"><span data-stu-id="5ca40-116">How authentication works in App Service</span></span>
<span data-ttu-id="5ca40-117">Para autenticar o uso de um dos provedores de identidade, primeiro você precisa configurar o provedor de identidade para conhecer seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="5ca40-117">In order to authenticate by using one of the identity providers, you first need to configure the identity provider to know about your application.</span></span> <span data-ttu-id="5ca40-118">O provedor de identidade, em seguida, fornecerá as IDs e os segredos que você fornecer para o Serviço de Aplicativo.</span><span class="sxs-lookup"><span data-stu-id="5ca40-118">The identity provider will then provide IDs and secrets that you provide to App Service.</span></span> <span data-ttu-id="5ca40-119">Isso conclui a relação de confiança para que o Serviço de Aplicativo possa validar as declarações de usuário, como tokens de autenticação, do provedor de identidade.</span><span class="sxs-lookup"><span data-stu-id="5ca40-119">This completes the trust relationship so that App Service can validate user assertions, such as authentication tokens, from the identity provider.</span></span>

<span data-ttu-id="5ca40-120">Para conectar um usuário usando um desses provedores, o usuário deverá ser redirecionado para um ponto de extremidade que permite a entrada de usuários nesse provedor.</span><span class="sxs-lookup"><span data-stu-id="5ca40-120">To sign in a user by using one of these providers, the user must be redirected to an endpoint that signs in users for that provider.</span></span> <span data-ttu-id="5ca40-121">Se os clientes estiverem usando um navegador da Web, será possível fazer com que o Serviço de Aplicativo direcione automaticamente todos os usuários não autenticados para o ponto de extremidade que permite a entrada de usuários.</span><span class="sxs-lookup"><span data-stu-id="5ca40-121">If customers are using a web browser, you can have App Service automatically direct all unauthenticated users to the endpoint that signs in users.</span></span> <span data-ttu-id="5ca40-122">Caso contrário, você precisará direcionar seus clientes para `{your App Service base URL}/.auth/login/<provider>`, em que `<provider>` é um dos seguintes valores: aad, facebook, google, microsoft ou twitter.</span><span class="sxs-lookup"><span data-stu-id="5ca40-122">Otherwise, you will need to direct your customers to `{your App Service base URL}/.auth/login/<provider>`, where `<provider>` is one of the following values: aad, facebook, google, microsoft, or twitter.</span></span> <span data-ttu-id="5ca40-123">Os cenários móveis e de API serão explicados em seções posteriores deste artigo.</span><span class="sxs-lookup"><span data-stu-id="5ca40-123">Mobile and API scenarios are explained in sections later in this article.</span></span>

<span data-ttu-id="5ca40-124">Os usuários que interagem com seu aplicativo por meio de um navegador da Web terão um cookie definido, para que possam permanecer autenticados conforme navegam no aplicativo.</span><span class="sxs-lookup"><span data-stu-id="5ca40-124">Users who interact with your application through a web browser will have a cookie set so that they can remain authenticated as they browse your application.</span></span> <span data-ttu-id="5ca40-125">Para outros tipos de cliente, como móvel, um JWT (token Web JSON) que deve ser apresentado no cabeçalho `X-ZUMO-AUTH` , será emitido para o cliente.</span><span class="sxs-lookup"><span data-stu-id="5ca40-125">For other client types, such as mobile, a JSON web token (JWT), which should be presented in the `X-ZUMO-AUTH` header, will be issued to the client.</span></span> <span data-ttu-id="5ca40-126">Os SDKs do cliente dos Aplicativos Móveis cuidarão disso para você.</span><span class="sxs-lookup"><span data-stu-id="5ca40-126">The Mobile Apps client SDKs will handle this for you.</span></span> <span data-ttu-id="5ca40-127">Como alternativa, um token de identidade ou de acesso do Azure Active Directory poderá ser incluído diretamente no cabeçalho `Authorization` como um [token de portador](https://tools.ietf.org/html/rfc6750).</span><span class="sxs-lookup"><span data-stu-id="5ca40-127">Alternatively, an Azure Active Directory identity token or access token may be directly included in the `Authorization` header as a [bearer token](https://tools.ietf.org/html/rfc6750).</span></span>

<span data-ttu-id="5ca40-128">O Serviço de Aplicativo validará qualquer cookie ou token que seu aplicativo emitir para autenticar usuários.</span><span class="sxs-lookup"><span data-stu-id="5ca40-128">App Service will validate any cookie or token that your application issues to authenticate users.</span></span> <span data-ttu-id="5ca40-129">Para restringir os usuários que tem permissão de acessar seu aplicativo, veja a seção [Autorização](#authorization) , posteriormente neste artigo.</span><span class="sxs-lookup"><span data-stu-id="5ca40-129">To restrict who can access your application, see the [Authorization](#authorization) section later in this article.</span></span>

### <a name="mobile-authentication-with-a-provider-sdk"></a><span data-ttu-id="5ca40-130">Autenticação móvel com um SDK do provedor</span><span class="sxs-lookup"><span data-stu-id="5ca40-130">Mobile authentication with a provider SDK</span></span>
<span data-ttu-id="5ca40-131">Depois que tudo estiver configurado no back-end, é possível modificar os clientes móveis para entrar com o Serviço de Aplicativo.</span><span class="sxs-lookup"><span data-stu-id="5ca40-131">After everything is configured on the backend, you can modify mobile clients to sign in with App Service.</span></span> <span data-ttu-id="5ca40-132">Há duas abordagens aqui:</span><span class="sxs-lookup"><span data-stu-id="5ca40-132">There are two approaches here:</span></span>

* <span data-ttu-id="5ca40-133">Utilize um SDK que um provedor de identidade específico publica para estabelecer a identidade e obtenha acesso ao Serviço de Aplicativo.</span><span class="sxs-lookup"><span data-stu-id="5ca40-133">Use an SDK that a given identity provider publishes to establish identity and then gain access to App Service.</span></span>
* <span data-ttu-id="5ca40-134">Use uma única linha de código para permitir que o SDK do cliente dos Aplicativos Móveis possa fazer os usuários entrar.</span><span class="sxs-lookup"><span data-stu-id="5ca40-134">Use a single line of code so that the Mobile Apps client SDK can sign in users.</span></span>

> [!TIP]
> <span data-ttu-id="5ca40-135">A maioria dos aplicativos deve usar um provedor de SDK para obter uma experiência mais consistente quando os usuários entram, para usar o suporte atualizado e para obter outros benefícios especificados pelo provedor.</span><span class="sxs-lookup"><span data-stu-id="5ca40-135">Most applications should use a provider SDK to get a more consistent experience when users sign in, to use refresh support, and to get other benefits that the provider specifies.</span></span>
> 
> 

<span data-ttu-id="5ca40-136">Quando você usar um provedor de SDK, os usuários poderão entrar e obter uma experiência mais rigidamente integrada ao sistema operacional em que o aplicativo está sendo executado.</span><span class="sxs-lookup"><span data-stu-id="5ca40-136">When you use a provider SDK, users can sign in to an experience that integrates more tightly with the operating system that the app is running on.</span></span> <span data-ttu-id="5ca40-137">Isso também lhe fornece um token do provedor e algumas informações de usuário no cliente, o que torna muito mais fácil consumir Graph APIs e personalizar a experiência do usuário.</span><span class="sxs-lookup"><span data-stu-id="5ca40-137">This also gives you a provider token and some user information on the client, which makes it much easier to consume graph APIs and customize the user experience.</span></span> <span data-ttu-id="5ca40-138">Ocasionalmente, em blogs e fóruns você verá isso designado como “fluxo do cliente” ou “fluxo direcionado pelo cliente”, porque o código no cliente faz os clientes entrarem, e o código do cliente tem acesso a um token do provedor.</span><span class="sxs-lookup"><span data-stu-id="5ca40-138">Occasionally on blogs and forums, you will see this referred to as the "client flow" or "client-directed flow" because code on the client signs in users, and the client code has access to a provider token.</span></span>

<span data-ttu-id="5ca40-139">Depois que um token do provedor é obtido, ele precisa ser enviado ao Serviço de Aplicativo para validação.</span><span class="sxs-lookup"><span data-stu-id="5ca40-139">After a provider token is obtained, it needs to be sent to App Service for validation.</span></span> <span data-ttu-id="5ca40-140">Assim que o Serviço de Aplicativo valida o token, cria um novo token do Serviço de Aplicativo que é retornado ao cliente.</span><span class="sxs-lookup"><span data-stu-id="5ca40-140">After App Service validates the token, App Service creates a new App Service token that is returned to the client.</span></span> <span data-ttu-id="5ca40-141">O SDK do cliente dos Aplicativos Móveis tem métodos auxiliares para gerenciar essa troca e anexa automaticamente o token a todas as solicitações para o back-end do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="5ca40-141">The Mobile Apps client SDK has helper methods to manage this exchange and automatically attach the token to all requests to the application backend.</span></span> <span data-ttu-id="5ca40-142">Os desenvolvedores também podem manter uma referência ao token do provedor. se desejarem.</span><span class="sxs-lookup"><span data-stu-id="5ca40-142">Developers can also keep a reference to the provider token if they so choose.</span></span>

### <a name="mobile-authentication-without-a-provider-sdk"></a><span data-ttu-id="5ca40-143">Autenticação móvel sem um SDK do provedor</span><span class="sxs-lookup"><span data-stu-id="5ca40-143">Mobile authentication without a provider SDK</span></span>
<span data-ttu-id="5ca40-144">Se você não quiser configurar um provedor de SDK, poderá permitir que o recurso Aplicativos Móveis do Serviço de Aplicativo do Azure entre para você.</span><span class="sxs-lookup"><span data-stu-id="5ca40-144">If you do not want to set up a provider SDK, you can allow the Mobile Apps feature of Azure App Service to sign in for you.</span></span> <span data-ttu-id="5ca40-145">O SDK do cliente dos Aplicativos Móveis abrirá uma exibição da Web para o provedor de sua escolha e fará o usuário entrar.</span><span class="sxs-lookup"><span data-stu-id="5ca40-145">The Mobile Apps client SDK will open a web view to the provider of your choosing and sign in the user.</span></span> <span data-ttu-id="5ca40-146">Ocasionalmente, em blogs e fóruns, você verá isso sendo chamado de “fluxo do servidor” ou “fluxo direcionado pelo servidor”, já que o servidor gerencia o processo de entrada dos usuários, e o SDK do cliente nunca recebe o token do provedor.</span><span class="sxs-lookup"><span data-stu-id="5ca40-146">Occasionally on blogs and forums, you will see this referred to as the "server flow" or "server-directed flow" because the server manages the process that signs in users, and the client SDK never receives the provider token.</span></span>

<span data-ttu-id="5ca40-147">O código necessário para iniciar esse fluxo foi incluído no tutorial de autenticação de cada plataforma.</span><span class="sxs-lookup"><span data-stu-id="5ca40-147">Code to start this flow is included in the authentication tutorial for each platform.</span></span> <span data-ttu-id="5ca40-148">Ao final do fluxo, o SDK do cliente tem um token do Serviço de Aplicativo, e o token é anexado automaticamente a todas as solicitações para o back-end do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="5ca40-148">At the end of the flow, the client SDK has an App Service token, and the token is automatically attached to all requests to the application backend.</span></span>

### <a name="service-to-service-authentication"></a><span data-ttu-id="5ca40-149">Autenticação serviço a serviço</span><span class="sxs-lookup"><span data-stu-id="5ca40-149">Service-to-service authentication</span></span>
<span data-ttu-id="5ca40-150">Embora você possa conceder aos usuários acesso ao seu aplicativo, também pode confiar em outro aplicativo para chamar sua própria API.</span><span class="sxs-lookup"><span data-stu-id="5ca40-150">Although you can give users access to your application, you can also trust another application to call your own API.</span></span> <span data-ttu-id="5ca40-151">Por exemplo, você poderia ter um aplicativo Web chamando uma API em outro aplicativo Web.</span><span class="sxs-lookup"><span data-stu-id="5ca40-151">For example, you could have one web app call an API in another web app.</span></span> <span data-ttu-id="5ca40-152">Neste cenário, você usa as credenciais para uma conta de serviço em vez de credenciais de usuário para obter um token.</span><span class="sxs-lookup"><span data-stu-id="5ca40-152">In this scenario, you use credentials for a service account instead of user credentials to get a token.</span></span> <span data-ttu-id="5ca40-153">Uma conta de serviço também é conhecida como *entidade de serviço* no jargão do Azure Active Directory, e a autenticação que usa essa conta também é chamada de cenário de serviço a serviço.</span><span class="sxs-lookup"><span data-stu-id="5ca40-153">A service account is also known as a *service principal* in Azure Active Directory parlance, and authentication that uses such an account is also known as a service-to-service scenario.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="5ca40-154">Como os aplicativos móveis são executados em dispositivos do cliente, os aplicativos móveis *não* contam como aplicativos confiáveis e não devem usar um fluxo da entidade de serviço.</span><span class="sxs-lookup"><span data-stu-id="5ca40-154">Because mobile apps run on customer devices, mobile applications do *not* count as trusted applications and should not use a service principal flow.</span></span> <span data-ttu-id="5ca40-155">Em vez disso, eles devem usar um fluxo de usuário detalhado anteriormente.</span><span class="sxs-lookup"><span data-stu-id="5ca40-155">Instead, they should use a user flow that was detailed earlier.</span></span>
> 
> 

<span data-ttu-id="5ca40-156">Para cenários de serviço a serviço, o Serviço de Aplicativo pode proteger seu aplicativo usando o Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="5ca40-156">For service-to-service scenarios, App Service can protect your application by using Azure Active Directory.</span></span> <span data-ttu-id="5ca40-157">O aplicativo de chamada precisa apenas fornecer um token de autorização da entidade de serviço do Azure Active Directory obtido pelo fornecimento da ID do cliente e do segredo do cliente por meio do Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="5ca40-157">The calling application just needs to provide an Azure Active Directory service principal authorization token that is obtained by providing the client ID and client secret from Azure Active Directory.</span></span> <span data-ttu-id="5ca40-158">Um exemplo desse cenário que usa aplicativos de API ASP.NET é explicado pelo tutorial [Autenticação de entidade de serviço para Aplicativos de API][apia-service].</span><span class="sxs-lookup"><span data-stu-id="5ca40-158">An example of this scenario that uses ASP.NET API apps is explained by the tutorial, [Service principal authentication for API Apps][apia-service].</span></span>

<span data-ttu-id="5ca40-159">Se quiser usar a autenticação do Serviço de Aplicativo para lidar com um cenário de serviço para serviço, você poderá usar os certificados de cliente ou a autenticação básica.</span><span class="sxs-lookup"><span data-stu-id="5ca40-159">If you want to use App Service authentication to handle a service-to-service scenario, you can use client certificates or basic authentication.</span></span> <span data-ttu-id="5ca40-160">Para saber mais sobre certificados de cliente no Azure, veja [Como configurar a Autenticação Mútua TLS para aplicativos Web](../app-service-web/app-service-web-configure-tls-mutual-auth.md).</span><span class="sxs-lookup"><span data-stu-id="5ca40-160">For information about client certificates in Azure, see [How To Configure TLS Mutual Authentication for Web Apps](../app-service-web/app-service-web-configure-tls-mutual-auth.md).</span></span> <span data-ttu-id="5ca40-161">Para saber mais sobre a autenticação básica no ASP.NET, veja [Authentication Filters in ASP.NET Web API 2](http://www.asp.net/web-api/overview/security/authentication-filters)(Filtros de autenticação na API Web ASP.NET 2).</span><span class="sxs-lookup"><span data-stu-id="5ca40-161">For information about basic authentication in ASP.NET, see [Authentication Filters in ASP.NET Web API 2](http://www.asp.net/web-api/overview/security/authentication-filters).</span></span>

<span data-ttu-id="5ca40-162">A autenticação de conta de serviço de um aplicativo lógico do Serviço de Aplicativo para um aplicativo de API é um caso especial, que é explicado detalhadamente em [Usando a API personalizada hospedada no Serviço de Aplicativo com Aplicativos Lógicos](../logic-apps/logic-apps-custom-hosted-api.md).</span><span class="sxs-lookup"><span data-stu-id="5ca40-162">Service account authentication from an App Service logic app to an API app is a special case that is detailed in [Using your custom API hosted on App Service with Logic apps](../logic-apps/logic-apps-custom-hosted-api.md).</span></span>

## <span data-ttu-id="5ca40-163"><a name="authorization"></a>Como funciona a autorização no Serviço de Aplicativo</span><span class="sxs-lookup"><span data-stu-id="5ca40-163"><a name="authorization"></a>How authorization works in App Service</span></span>
<span data-ttu-id="5ca40-164">Você tem controle total sobre as solicitações que podem acessar o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="5ca40-164">You have full control over the requests that can access your application.</span></span> <span data-ttu-id="5ca40-165">A Autenticação/Autorização do Serviço de Aplicativo pode ser configurada com qualquer um dos seguintes comportamentos:</span><span class="sxs-lookup"><span data-stu-id="5ca40-165">App Service Authentication / Authorization can be configured with any of the following behaviors:</span></span>

* <span data-ttu-id="5ca40-166">Permitir que apenas solicitações autenticadas cheguem ao aplicativo.</span><span class="sxs-lookup"><span data-stu-id="5ca40-166">Allow only authenticated requests to reach your application.</span></span>
  
    <span data-ttu-id="5ca40-167">Se um navegador receber uma solicitação anônima, o Serviço de Aplicativo será redirecionado para o provedor de identidade escolhido para que os usuários possam entrar.</span><span class="sxs-lookup"><span data-stu-id="5ca40-167">If a browser receives an anonymous request, App Service will redirect to a page for the identity provider that you choose so that users can sign in.</span></span> <span data-ttu-id="5ca40-168">Se a solicitação vier de um dispositivo móvel, a resposta retornada será HTTP *401 Não Autorizado* .</span><span class="sxs-lookup"><span data-stu-id="5ca40-168">If the request comes from a mobile device, the returned response is an HTTP *401 Unauthorized* response.</span></span>
  
    <span data-ttu-id="5ca40-169">Com essa opção, você não precisa escrever nenhum código de autenticação em seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="5ca40-169">With this option, you don't need to write any authentication code at all in your app.</span></span> <span data-ttu-id="5ca40-170">Se precisar de uma autorização mais refinada, as informações sobre o usuário estarão disponíveis para seu código.</span><span class="sxs-lookup"><span data-stu-id="5ca40-170">If you need finer authorization, information about the user is available to your code.</span></span>
* <span data-ttu-id="5ca40-171">Permitir que todas as solicitações cheguem ao aplicativo, mas validar as solicitações autenticadas e transmitir informações de autenticação nos cabeçalhos HTTP.</span><span class="sxs-lookup"><span data-stu-id="5ca40-171">Allow all requests to reach your application, but validate authenticated requests, and pass along authentication information in the HTTP headers.</span></span>
  
    <span data-ttu-id="5ca40-172">Essa opção adia as decisões de autorização no código do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="5ca40-172">This option defers authorization decisions to your application code.</span></span> <span data-ttu-id="5ca40-173">Ela oferece mais flexibilidade no tratamento de solicitações anônimas, mas você precisa escrever um código.</span><span class="sxs-lookup"><span data-stu-id="5ca40-173">It provides more flexibility in handling anonymous requests, but you have to write code.</span></span>
* <span data-ttu-id="5ca40-174">Permitir que todas as solicitações cheguem ao aplicativo e não executar nenhuma ação em relação às informações de autenticação nas solicitações.</span><span class="sxs-lookup"><span data-stu-id="5ca40-174">Allow all requests to reach your application, and take no action on authentication information in the requests.</span></span>
  
    <span data-ttu-id="5ca40-175">Nesse caso, o recurso Autenticação/Autorização é desativado.</span><span class="sxs-lookup"><span data-stu-id="5ca40-175">In this case, the Authentication / Authorization feature is off.</span></span> <span data-ttu-id="5ca40-176">As tarefas de autenticação e autorização ficam inteiramente a cargo do código do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="5ca40-176">The tasks of authentication and authorization are entirely up to your application code.</span></span>

<span data-ttu-id="5ca40-177">Os comportamentos anteriores são controlados pela **Ação a ser tomada quando a solicitação não for autenticada** no portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="5ca40-177">The previous behaviors are controlled by the **Action to take when request is not authenticated** option in the Azure portal.</span></span> <span data-ttu-id="5ca40-178">Se você escolher **Fazer logon com o *nome do provedor***, todas as solicitações terão que ser autenticadas.</span><span class="sxs-lookup"><span data-stu-id="5ca40-178">If you choose **Log in with *provider name* **, all requests have to be authenticated.</span></span> <span data-ttu-id="5ca40-179">**Permitir solicitação (nenhuma ação)** adia a decisão de autorização no código, mas ainda fornece informações de autenticação.</span><span class="sxs-lookup"><span data-stu-id="5ca40-179">**Allow request (no action)** defers the authorization decision to your code, but it still provides authentication information.</span></span> <span data-ttu-id="5ca40-180">Se deseja que seu código lide com tudo, é possível desabilitar o recurso Autenticação/Autorização.</span><span class="sxs-lookup"><span data-stu-id="5ca40-180">If you want to have your code handle everything, you can disable the Authentication / Authorization feature.</span></span>

## <a name="working-with-user-identities-in-your-application"></a><span data-ttu-id="5ca40-181">Trabalhando com identidades de usuário em seu aplicativo</span><span class="sxs-lookup"><span data-stu-id="5ca40-181">Working with user identities in your application</span></span>
<span data-ttu-id="5ca40-182">O Serviço de Aplicativo transmite algumas informações do usuário para seu aplicativo usando cabeçalhos especiais.</span><span class="sxs-lookup"><span data-stu-id="5ca40-182">App Service passes some user information to your application by using special headers.</span></span> <span data-ttu-id="5ca40-183">As solicitações externas proíbem esses cabeçalhos e só estarão presentes se definidas pela Autenticação/Autorização do Serviço de Aplicativo.</span><span class="sxs-lookup"><span data-stu-id="5ca40-183">External requests prohibit these headers and will only be present if set by App Service Authentication / Authorization.</span></span> <span data-ttu-id="5ca40-184">Alguns cabeçalhos de exemplo incluem:</span><span class="sxs-lookup"><span data-stu-id="5ca40-184">Some example headers include:</span></span>

* <span data-ttu-id="5ca40-185">X-MS-CLIENT-PRINCIPAL-NAME</span><span class="sxs-lookup"><span data-stu-id="5ca40-185">X-MS-CLIENT-PRINCIPAL-NAME</span></span>
* <span data-ttu-id="5ca40-186">X-MS-CLIENT-PRINCIPAL-ID</span><span class="sxs-lookup"><span data-stu-id="5ca40-186">X-MS-CLIENT-PRINCIPAL-ID</span></span>
* <span data-ttu-id="5ca40-187">X-MS-TOKEN-FACEBOOK-ACCESS-TOKEN</span><span class="sxs-lookup"><span data-stu-id="5ca40-187">X-MS-TOKEN-FACEBOOK-ACCESS-TOKEN</span></span>
* <span data-ttu-id="5ca40-188">X-MS-TOKEN-FACEBOOK-EXPIRES-ON</span><span class="sxs-lookup"><span data-stu-id="5ca40-188">X-MS-TOKEN-FACEBOOK-EXPIRES-ON</span></span>

<span data-ttu-id="5ca40-189">Um código escrito em qualquer linguagem ou estrutura pode obter as informações necessárias desses cabeçalhos.</span><span class="sxs-lookup"><span data-stu-id="5ca40-189">Code that is written in any language or framework can get the information that it needs from these headers.</span></span> <span data-ttu-id="5ca40-190">Para aplicativos ASP.NET 4.6, **ClaimsPrincipal** é definido automaticamente com os valores apropriados.</span><span class="sxs-lookup"><span data-stu-id="5ca40-190">For ASP.NET 4.6 apps, the **ClaimsPrincipal** is automatically set with the appropriate values.</span></span>

<span data-ttu-id="5ca40-191">O aplicativo também pode obter detalhes adicionais do usuário por meio de um HTTP GET em seu ponto de extremidade `/.auth/me` .</span><span class="sxs-lookup"><span data-stu-id="5ca40-191">Your application can also obtain additional user details through an HTTP GET on the `/.auth/me` endpoint of your application.</span></span> <span data-ttu-id="5ca40-192">Um token válido incluído na solicitação retornará uma carga JSON com detalhes sobre o provedor que está sendo usado, o token do provedor subjacente e algumas outras informações do usuário.</span><span class="sxs-lookup"><span data-stu-id="5ca40-192">A valid token that's included with the request will return a JSON payload with details about the provider that's being used, the underlying provider token, and some other user information.</span></span> <span data-ttu-id="5ca40-193">Os SDKs do servidor dos Aplicativos Móveis fornecem métodos auxiliares para trabalhar com esses dados.</span><span class="sxs-lookup"><span data-stu-id="5ca40-193">The Mobile Apps server SDKs provide helper methods to work with this data.</span></span> <span data-ttu-id="5ca40-194">Para saber mais, confira [Como usar o SDK do Node.js dos Aplicativos Móveis do Azure](../app-service-mobile/app-service-mobile-node-backend-how-to-use-server-sdk.md#howto-tables-getidentity) e [Trabalhar com o SDK do servidor de back-end .NET para Aplicativos Móveis do Azure](../app-service-mobile/app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#user-info).</span><span class="sxs-lookup"><span data-stu-id="5ca40-194">For more information, see [How to use the Azure Mobile Apps Node.js SDK](../app-service-mobile/app-service-mobile-node-backend-how-to-use-server-sdk.md#howto-tables-getidentity), and [Work with the .NET backend server SDK for Azure Mobile Apps](../app-service-mobile/app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#user-info).</span></span>

## <a name="documentation-and-additional-resources"></a><span data-ttu-id="5ca40-195">Documentação e recursos adicionais</span><span class="sxs-lookup"><span data-stu-id="5ca40-195">Documentation and additional resources</span></span>
### <a name="identity-providers"></a><span data-ttu-id="5ca40-196">Provedores de identidade</span><span class="sxs-lookup"><span data-stu-id="5ca40-196">Identity providers</span></span>
<span data-ttu-id="5ca40-197">Os seguintes tutoriais mostram como configurar o Serviço de Aplicativo para usar provedores de autenticação diferentes:</span><span class="sxs-lookup"><span data-stu-id="5ca40-197">The following tutorials show how to configure App Service to use different authentication providers:</span></span>

* <span data-ttu-id="5ca40-198">[Como configurar seu aplicativo para usar o logon do Azure Active Directory][AAD]</span><span class="sxs-lookup"><span data-stu-id="5ca40-198">[How to configure your app to use Azure Active Directory login][AAD]</span></span>
* <span data-ttu-id="5ca40-199">[Como configurar seu aplicativo para usar o logon do Facebook][Facebook]</span><span class="sxs-lookup"><span data-stu-id="5ca40-199">[How to configure your app to use Facebook login][Facebook]</span></span>
* <span data-ttu-id="5ca40-200">[Como configurar seu aplicativo para usar o logon do Google][Google]</span><span class="sxs-lookup"><span data-stu-id="5ca40-200">[How to configure your app to use Google login][Google]</span></span>
* <span data-ttu-id="5ca40-201">[Como configurar seu aplicativo para usar o logon da Conta da Microsoft][MSA]</span><span class="sxs-lookup"><span data-stu-id="5ca40-201">[How to configure your app to use Microsoft Account login][MSA]</span></span>
* <span data-ttu-id="5ca40-202">[Como configurar seu aplicativo para usar o logon do Twitter][Twitter]</span><span class="sxs-lookup"><span data-stu-id="5ca40-202">[How to configure your app to use Twitter login][Twitter]</span></span>

<span data-ttu-id="5ca40-203">Se você deseja usar um sistema de identidade diferente daqueles fornecidos aqui, também é possível utilizar o [suporte de autenticação personalizada da visualização no SDK do servidor do .NET dos Aplicativos Móveis][custom-auth], que pode ser usado em aplicativos Web, em aplicativos móveis ou em aplicativos de API.</span><span class="sxs-lookup"><span data-stu-id="5ca40-203">If you want to use an identity system other than the ones provided here, you can also use the [preview custom authentication support in the Mobile Apps .NET server SDK][custom-auth], which can be used in web apps, mobile apps, or API apps.</span></span>

### <a name="web-applications"></a><span data-ttu-id="5ca40-204">Aplicativos Web</span><span class="sxs-lookup"><span data-stu-id="5ca40-204">Web applications</span></span>
<span data-ttu-id="5ca40-205">Os tutoriais a seguir mostram como adicionar a autenticação a um aplicativo Web:</span><span class="sxs-lookup"><span data-stu-id="5ca40-205">The following tutorials show how to add authentication to a web application:</span></span>

* <span data-ttu-id="5ca40-206">[Introdução ao Serviço de Aplicativo do Azure - Parte 2][web-getstarted]</span><span class="sxs-lookup"><span data-stu-id="5ca40-206">[Get started with Azure App Service - Part 2][web-getstarted]</span></span>

### <a name="mobile-applications"></a><span data-ttu-id="5ca40-207">Aplicativos móveis</span><span class="sxs-lookup"><span data-stu-id="5ca40-207">Mobile applications</span></span>
<span data-ttu-id="5ca40-208">Os seguintes tutoriais mostram como adicionar a autenticação aos clientes móveis usando o fluxo direcionado pelo servidor:</span><span class="sxs-lookup"><span data-stu-id="5ca40-208">The following tutorials show how to add authentication to your mobile clients by using the server-directed flow:</span></span>

* <span data-ttu-id="5ca40-209">[Adicionar autenticação ao seu aplicativo iOS][iOS]</span><span class="sxs-lookup"><span data-stu-id="5ca40-209">[Add authentication to your iOS app][iOS]</span></span>
* <span data-ttu-id="5ca40-210">[Adicionar autenticação ao aplicativo do Android][Android]</span><span class="sxs-lookup"><span data-stu-id="5ca40-210">[Add Authentication to your Android app][Android]</span></span>
* <span data-ttu-id="5ca40-211">[Adicionar autenticação ao seu aplicativo do Windows][Windows]</span><span class="sxs-lookup"><span data-stu-id="5ca40-211">[Add Authentication to your Windows app][Windows]</span></span>
* <span data-ttu-id="5ca40-212">[Adicionar autenticação ao aplicativo Xamarin.iOS][Xamarin.iOS]</span><span class="sxs-lookup"><span data-stu-id="5ca40-212">[Add authentication to your Xamarin.iOS app][Xamarin.iOS]</span></span>
* <span data-ttu-id="5ca40-213">[Adicionar autenticação ao aplicativo Xamarin.Android][Xamarin.Android]</span><span class="sxs-lookup"><span data-stu-id="5ca40-213">[Add authentication to your Xamarin.Android app][Xamarin.Android]</span></span>
* <span data-ttu-id="5ca40-214">[Adicionar autenticação ao aplicativo Xamarin.Forms][Xamarin.Forms]</span><span class="sxs-lookup"><span data-stu-id="5ca40-214">[Add authentication to your Xamarin.Forms app][Xamarin.Forms]</span></span>
* <span data-ttu-id="5ca40-215">[Adicionar a Autenticação ao aplicativo Cordova][Cordova]</span><span class="sxs-lookup"><span data-stu-id="5ca40-215">[Add Authentication to your Cordova app][Cordova]</span></span>

<span data-ttu-id="5ca40-216">Use os recursos a seguir se quiser usar o fluxo direcionado ao cliente para o Azure Active Directory:</span><span class="sxs-lookup"><span data-stu-id="5ca40-216">Use the following resources if you want to use the client-directed flow for Azure Active Directory:</span></span>

* <span data-ttu-id="5ca40-217">[Use a Biblioteca de Autenticação do Active Directory para iOS][ADAL-iOS]</span><span class="sxs-lookup"><span data-stu-id="5ca40-217">[Use the Active Directory Authentication Library for iOS][ADAL-iOS]</span></span>
* <span data-ttu-id="5ca40-218">[Use a Biblioteca de Autenticação do Active Directory para Android][ADAL-Android]</span><span class="sxs-lookup"><span data-stu-id="5ca40-218">[Use the Active Directory Authentication Library for Android][ADAL-Android]</span></span>
* <span data-ttu-id="5ca40-219">[Use a Biblioteca de Autenticação do Active Directory para Windows e Xamarin][ADAL-dotnet]</span><span class="sxs-lookup"><span data-stu-id="5ca40-219">[Use the Active Directory Authentication Library for Windows and Xamarin][ADAL-dotnet]</span></span>

<span data-ttu-id="5ca40-220">Use os recursos a seguir se quiser usar o fluxo direcionado ao cliente para o Facebook:</span><span class="sxs-lookup"><span data-stu-id="5ca40-220">Use the following resources if you want to use the client-directed flow for Facebook:</span></span>

* [<span data-ttu-id="5ca40-221">Usar o SDK do Facebook para iOS</span><span class="sxs-lookup"><span data-stu-id="5ca40-221">Use the Facebook SDK for iOS</span></span>](../app-service-mobile/app-service-mobile-ios-how-to-use-client-library.md#facebook-sdk)

<span data-ttu-id="5ca40-222">Use os recursos a seguir se quiser usar o fluxo direcionado ao cliente para o Twitter:</span><span class="sxs-lookup"><span data-stu-id="5ca40-222">Use the following resources if you want to use the client-directed flow for Twitter:</span></span>

* [<span data-ttu-id="5ca40-223">Usar o Twitter Fabric para iOS</span><span class="sxs-lookup"><span data-stu-id="5ca40-223">Use Twitter Fabric for iOS</span></span>](../app-service-mobile/app-service-mobile-ios-how-to-use-client-library.md#twitter-fabric)

<span data-ttu-id="5ca40-224">Use os recursos a seguir se quiser usar o fluxo direcionado ao cliente para o Google:</span><span class="sxs-lookup"><span data-stu-id="5ca40-224">Use the following resources if you want to use the client-directed flow for Google:</span></span>

* [<span data-ttu-id="5ca40-225">Usar o SDK de logon do Google para iOS</span><span class="sxs-lookup"><span data-stu-id="5ca40-225">Use the Google Sign-In SDK for iOS</span></span>](../app-service-mobile/app-service-mobile-ios-how-to-use-client-library.md#google-sdk)

### <a name="api-applications"></a><span data-ttu-id="5ca40-226">Aplicativos de API</span><span class="sxs-lookup"><span data-stu-id="5ca40-226">API applications</span></span>
<span data-ttu-id="5ca40-227">Os tutoriais a seguir mostram como proteger seus aplicativos de API:</span><span class="sxs-lookup"><span data-stu-id="5ca40-227">The following tutorials show how to protect your API apps:</span></span>

* <span data-ttu-id="5ca40-228">[Autenticação de usuário para Aplicativos de API no Serviço de Aplicativo do Azure][apia-user]</span><span class="sxs-lookup"><span data-stu-id="5ca40-228">[User authentication for API Apps in Azure App Service][apia-user]</span></span>
* <span data-ttu-id="5ca40-229">[Autenticação de entidade de serviço para Aplicativos de API no Serviço de Aplicativo do Azure][apia-service]</span><span class="sxs-lookup"><span data-stu-id="5ca40-229">[Service principal authentication for API Apps in Azure App Service][apia-service]</span></span>

[apia-user]: ../app-service-api/app-service-api-dotnet-user-principal-auth.md
[apia-service]: ../app-service-api/app-service-api-dotnet-service-principal-auth.md

[web-getstarted]: ../app-service-web/app-service-web-get-started-2.md#authenticate-your-users

[iOS]: ../app-service-mobile/app-service-mobile-ios-get-started-users.md
<span data-ttu-id="5ca40-230">[Android]: ../app-service-mobile/app-service-mobile-android-get-started-users.md</span><span class="sxs-lookup"><span data-stu-id="5ca40-230">[Android]: ../app-service-mobile/app-service-mobile-android-get-started-users.md</span></span>
<span data-ttu-id="5ca40-231">[Xamarin.iOS]: ../app-service-mobile/app-service-mobile-xamarin-ios-get-started-users.md</span><span class="sxs-lookup"><span data-stu-id="5ca40-231">[Xamarin.iOS]: ../app-service-mobile/app-service-mobile-xamarin-ios-get-started-users.md</span></span>
<span data-ttu-id="5ca40-232">[Xamarin.Android]: ../app-service-mobile/app-service-mobile-xamarin-android-get-started-users.md</span><span class="sxs-lookup"><span data-stu-id="5ca40-232">[Xamarin.Android]: ../app-service-mobile/app-service-mobile-xamarin-android-get-started-users.md</span></span>
<span data-ttu-id="5ca40-233">[Xamarin.Forms]: ../app-service-mobile/app-service-mobile-xamarin-forms-get-started-users.md</span><span class="sxs-lookup"><span data-stu-id="5ca40-233">[Xamarin.Forms]: ../app-service-mobile/app-service-mobile-xamarin-forms-get-started-users.md</span></span>
<span data-ttu-id="5ca40-234">[Windows]: ../app-service-mobile/app-service-mobile-windows-store-dotnet-get-started-users.md</span><span class="sxs-lookup"><span data-stu-id="5ca40-234">[Windows]: ../app-service-mobile/app-service-mobile-windows-store-dotnet-get-started-users.md</span></span>
<span data-ttu-id="5ca40-235">[Cordova]: ../app-service-mobile/app-service-mobile-cordova-get-started-users.md</span><span class="sxs-lookup"><span data-stu-id="5ca40-235">[Cordova]: ../app-service-mobile/app-service-mobile-cordova-get-started-users.md</span></span>

[AAD]: ../app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication.md
[Facebook]: ../app-service-mobile/app-service-mobile-how-to-configure-facebook-authentication.md
[Google]: ../app-service-mobile/app-service-mobile-how-to-configure-google-authentication.md
[MSA]: ../app-service-mobile/app-service-mobile-how-to-configure-microsoft-authentication.md
[Twitter]: ../app-service-mobile/app-service-mobile-how-to-configure-twitter-authentication.md

[custom-auth]: ../app-service-mobile/app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#custom-auth

[ADAL-Android]: ../app-service-mobile/app-service-mobile-android-how-to-use-client-library.md#adal
[ADAL-iOS]: ../app-service-mobile/app-service-mobile-ios-how-to-use-client-library.md#adal
[ADAL-dotnet]: ../app-service-mobile/app-service-mobile-dotnet-how-to-use-client-library.md#adal
