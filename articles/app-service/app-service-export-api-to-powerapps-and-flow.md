---
title: Exportando uma API hospedada no Azure para o PowerApps e o Microsoft Flow | Microsoft Docs
description: "Visão geral de como expor uma API hospedada no serviço de aplicativo ao PowerApps e ao Microsoft Flow"
services: app-service
documentationcenter: 
author: mattchenderson
manager: erikre
editor: 
ms.assetid: 
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: multiple
ms.topic: article
ms.date: 06/20/2017
ms.author: mahender
ms.openlocfilehash: 0d166a2e5b60c3b9f911f9fc3ad49ad7f252abb4
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/11/2017
---
# <a name="exporting-an-azure-hosted-api-to-powerapps-and-microsoft-flow"></a><span data-ttu-id="df9b0-103">Exportando uma API hospedada no Azure para o PowerApps e o Microsoft Flow</span><span class="sxs-lookup"><span data-stu-id="df9b0-103">Exporting an Azure-hosted API to PowerApps and Microsoft Flow</span></span>

## <a name="creating-custom-connectors-for-powerapps-and-microsoft-flow"></a><span data-ttu-id="df9b0-104">Criando conectores personalizados para o PowerApps e o Microsoft Flow</span><span class="sxs-lookup"><span data-stu-id="df9b0-104">Creating custom connectors for PowerApps and Microsoft Flow</span></span>

<span data-ttu-id="df9b0-105">O [PowerApps](https://powerapps.com) é um serviço para a criação e utilização de aplicativos comerciais personalizados que se conectam aos seus dados e trabalham entre plataformas.</span><span class="sxs-lookup"><span data-stu-id="df9b0-105">[PowerApps](https://powerapps.com) is a service for building and using custom business apps that connect to your data and work across platforms.</span></span> <span data-ttu-id="df9b0-106">O [Microsoft Flow](https://flow.microsoft.com) facilita a automação de fluxos de trabalho e processos de negócios entre seus aplicativos e serviços favoritos.</span><span class="sxs-lookup"><span data-stu-id="df9b0-106">[Microsoft Flow](https://flow.microsoft.com) makes it easy to automate workflows and business processes between your favorite apps and services.</span></span> <span data-ttu-id="df9b0-107">O PowerApps e o Microsoft Flow vêm com uma variedade de conectores integrados para fontes de dados como Office 365, Dynamics 365, Salesforce e muito mais.</span><span class="sxs-lookup"><span data-stu-id="df9b0-107">Both PowerApps and Microsoft Flow come with a variety of built-in connectors to data sources such as Office 365, Dynamics 365, Salesforce, and more.</span></span> <span data-ttu-id="df9b0-108">No entanto, os usuários também precisam ser capazes de aproveitar as fontes de dados e APIs sendo criadas pela sua organização.</span><span class="sxs-lookup"><span data-stu-id="df9b0-108">However, users also need to be able to leverage data sources and APIs being built by their organization.</span></span>

<span data-ttu-id="df9b0-109">Da mesma forma, os desenvolvedores que desejam expor suas APIs mais amplamente dentro da organização podem querer disponibilizar suas APIs para usuários do PowerApps e do Microsoft Flow.</span><span class="sxs-lookup"><span data-stu-id="df9b0-109">Similarly, developers that want to expose their APIs more broadly within the organization may want to make their APIs available to PowerApps and Microsoft Flow users.</span></span> <span data-ttu-id="df9b0-110">Este tópico mostrará a você como expor uma API criada com o Serviço de Aplicativo do Azure ou com o Azure Functions para o PowerApps e o Microsoft Flow.</span><span class="sxs-lookup"><span data-stu-id="df9b0-110">This topic will show you how to expose an API built with Azure App Service or Azure Functions to PowerApps and Microsoft Flow.</span></span> <span data-ttu-id="df9b0-111">[O Serviço de Aplicativo do Azure](https://azure.microsoft.com/services/app-service/) é uma oferta de plataforma como serviço que permite aos desenvolvedores criar com rapidez e facilidade aplicativos da Web, móveis e de API de nível empresarial.</span><span class="sxs-lookup"><span data-stu-id="df9b0-111">[Azure App Service](https://azure.microsoft.com/services/app-service/) is a platform-as-a-service offering that allows developers to quickly and easily build enterprise-grade web, mobile, and API applications.</span></span> <span data-ttu-id="df9b0-112">O [Azure Functions](https://azure.microsoft.com/services/functions/) é uma solução de computação sem servidor baseada em eventos que permite que você crie rapidamente códigos de autor que podem reagir a outras partes do seu sistema e escala com base na demanda.</span><span class="sxs-lookup"><span data-stu-id="df9b0-112">[Azure Functions](https://azure.microsoft.com/services/functions/) is an event-based serverless compute solution that allows you to quickly author code that can react to other parts of your system and scale based on demand.</span></span>

<span data-ttu-id="df9b0-113">Para saber mais sobre esses serviços, consulte:</span><span class="sxs-lookup"><span data-stu-id="df9b0-113">To learn more about these services, see:</span></span>
- [<span data-ttu-id="df9b0-114">Aprendizado Guiado do PowerApps</span><span class="sxs-lookup"><span data-stu-id="df9b0-114">PowerApps Guided Learning</span></span>](https://powerapps.microsoft.com/guided-learning/learning-introducing-powerapps/) 
- [<span data-ttu-id="df9b0-115">Aprendizado Guiado do Microsoft Flow</span><span class="sxs-lookup"><span data-stu-id="df9b0-115">Microsoft Flow Guided Learning</span></span>](https://flow.microsoft.com/guided-learning/learning-introducing-flow/)
- [<span data-ttu-id="df9b0-116">O que é o Serviço de Aplicativo</span><span class="sxs-lookup"><span data-stu-id="df9b0-116">What is App Service?</span></span>](https://docs.microsoft.com/azure/app-service/app-service-value-prop-what-is)
- [<span data-ttu-id="df9b0-117">O que é o Azure Functions?</span><span class="sxs-lookup"><span data-stu-id="df9b0-117">What is Azure Functions</span></span>](https://docs.microsoft.com/azure/azure-functions/functions-overview)

## <a name="sharing-an-api-definition"></a><span data-ttu-id="df9b0-118">Compartilhando uma definição de API</span><span class="sxs-lookup"><span data-stu-id="df9b0-118">Sharing an API definition</span></span>

<span data-ttu-id="df9b0-119">APIs normalmente são descritas usando um [documento API aberta](https://www.openapis.org/) (às vezes conhecido como um documento "Swagger").</span><span class="sxs-lookup"><span data-stu-id="df9b0-119">APIs are often described using an [OpenAPI document](https://www.openapis.org/) (sometimes referred to as a "Swagger" document).</span></span> <span data-ttu-id="df9b0-120">Ele contém todas as informações sobre quais operações estão disponíveis e como os dados devem ser estruturados.</span><span class="sxs-lookup"><span data-stu-id="df9b0-120">This contains all of the information about what operations are available and how the data should be structured.</span></span> <span data-ttu-id="df9b0-121">O PowerApps e o Microsoft Flow podem criar conectores personalizados para qualquer documento API aberta 2.0.</span><span class="sxs-lookup"><span data-stu-id="df9b0-121">PowerApps and Microsoft Flow can create custom connectors for any OpenAPI 2.0 document.</span></span> <span data-ttu-id="df9b0-122">Quando um conector personalizado é criado, ele pode ser usado exatamente da mesma forma que um dos conectores integrados e pode ser rapidamente integrado a um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="df9b0-122">Once a custom connector is created, it can be used in exactly the same way as one of the built-in connectors and can quickly be integrated into an application.</span></span>

<span data-ttu-id="df9b0-123">O Serviço de Aplicativo do Azure e o Azure Functions têm [suporte integrado](https://docs.microsoft.com/azure/app-service-api/app-service-api-metadata) para criação, hospedagem e gerenciamento um documento de API aberta.</span><span class="sxs-lookup"><span data-stu-id="df9b0-123">Azure App Service and Azure Functions have [built-in support](https://docs.microsoft.com/azure/app-service-api/app-service-api-metadata) for creating, hosting, and managing an OpenAPI document.</span></span> <span data-ttu-id="df9b0-124">Para criar um conector personalizado para um aplicativo de funções, API, móvel ou Web, o PowerApps e Flow precisam receber uma cópia da definição.</span><span class="sxs-lookup"><span data-stu-id="df9b0-124">In order to create a custom connector for a web, mobile, API, or function app, PowerApps and Flow need to be given a copy of the definition.</span></span>

> [!NOTE]
> <span data-ttu-id="df9b0-125">Como está sendo usada uma cópia da definição de API, o PowerApps e o Microsoft Flow não tomarão conhecimento imediatamente sobre atualizações ou alterações significativas para o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="df9b0-125">Because a copy of the API definition is being used, PowerApps and Microsoft Flow will not immediately know about updates or breaking changes to the application.</span></span> <span data-ttu-id="df9b0-126">Se uma nova versão da API for disponibilizada, essas etapas deverão ser repetidas para a nova versão.</span><span class="sxs-lookup"><span data-stu-id="df9b0-126">If a new version of the API is made available, these steps should be repeated for the new version.</span></span> 

<span data-ttu-id="df9b0-127">Para fornecer PowerApps e Microsoft Flow com a definição de API hospedada para seu aplicativo, siga essas etapas:</span><span class="sxs-lookup"><span data-stu-id="df9b0-127">To provide PowerApps and Microsoft Flow with the hosted API definition for your app, follow these steps:</span></span>

1. <span data-ttu-id="df9b0-128">Abra o [Portal do Azure](https://portal.azure.com) e navegue até o seu Serviço de Aplicativo ou ao aplicativo Azure Functions.</span><span class="sxs-lookup"><span data-stu-id="df9b0-128">Open the [Azure Portal](https://portal.azure.com) and navigate to your App Service or Azure Functions application.</span></span>

    <span data-ttu-id="df9b0-129">Se usar o Serviço de Aplicativo do Azure, selecione **definição de API** da lista de configurações.</span><span class="sxs-lookup"><span data-stu-id="df9b0-129">If using Azure App Service, select **API definition** from the settings list.</span></span> 
    
    <span data-ttu-id="df9b0-130">Se utilizar Azure Function, selecione seu aplicativo de funções, escolha **Recursos de plataforma** e, em seguida, **Definição de API**.</span><span class="sxs-lookup"><span data-stu-id="df9b0-130">If using Azure Functions, select your function app, and then choose **Platform features**, and then **API definition**.</span></span> <span data-ttu-id="df9b0-131">Em vez disso, também é possível optar por abrir a guia **Definição de API (visualização)**.</span><span class="sxs-lookup"><span data-stu-id="df9b0-131">You could also choose to open the **API definition (preview)** tab instead.</span></span>

2. <span data-ttu-id="df9b0-132">Se uma definição de API foi fornecida, você verá um botão **Exportar para o PowerApps + Microsoft Flow**.</span><span class="sxs-lookup"><span data-stu-id="df9b0-132">If an API definition has been provided, you will see an **Export to PowerApps + Microsoft Flow** button.</span></span> <span data-ttu-id="df9b0-133">Clique neste botão para iniciar o processo de exportação.</span><span class="sxs-lookup"><span data-stu-id="df9b0-133">Click this button to begin the export process.</span></span>

3. <span data-ttu-id="df9b0-134">Selecione o **Modo de exportação**.</span><span class="sxs-lookup"><span data-stu-id="df9b0-134">Select the **Export mode**.</span></span> <span data-ttu-id="df9b0-135">Isso determina as etapas que você precisa seguir para criar um conector.</span><span class="sxs-lookup"><span data-stu-id="df9b0-135">This determines the steps you will need to follow to create a connector.</span></span> <span data-ttu-id="df9b0-136">O Serviço de Aplicativo oferece duas opções para fornecer PowerApps e Microsoft Flow com sua definição de API:</span><span class="sxs-lookup"><span data-stu-id="df9b0-136">App Service offers two options for providing PowerApps and Microsoft Flow with your API definition:</span></span>

    <span data-ttu-id="df9b0-137">**Expresso** permite que você crie o conector personalizado a partir do portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="df9b0-137">**Express** lets you create the custom connector from within the Azure portal.</span></span> <span data-ttu-id="df9b0-138">Isso requer que o usuário atual conectado possua permissão para criar conectores no ambiente de destino.</span><span class="sxs-lookup"><span data-stu-id="df9b0-138">It requires that the curent logged-in user has permission to create connectors in the target environment.</span></span> <span data-ttu-id="df9b0-139">Essa é a abordagem recomendada se esse requisito puder ser atendido.</span><span class="sxs-lookup"><span data-stu-id="df9b0-139">This is the recommended approach if that requirement can be met.</span></span> <span data-ttu-id="df9b0-140">Se estiver utilizando esse modo, siga as instruções [Exportação de expresso](#express) abaixo.</span><span class="sxs-lookup"><span data-stu-id="df9b0-140">If using this mode, follow the [Express export](#express) instructions below.</span></span>

    <span data-ttu-id="df9b0-141">**Manual** permite exportar uma cópia da definição de API que pode ser importada utilizando os portais do PowerApps e Microsoft Flow.</span><span class="sxs-lookup"><span data-stu-id="df9b0-141">**Manual** lets you export a copy of the API definiton which can be imported using the PowerApps or Microsoft Flow portals.</span></span> <span data-ttu-id="df9b0-142">Essa é a abordagem recomendada se o usuário do Azure e o usuário com permissão para criar conectores forem pessoas diferentes ou se o conector precisar ser criado em outro locatário.</span><span class="sxs-lookup"><span data-stu-id="df9b0-142">This is the recommended approach if the Azure user and the user with permission to create connectors are different people or if the connector needs to be created in another tenant.</span></span> <span data-ttu-id="df9b0-143">Se estiver utilizando esse modo, siga as instruções [Exportação e importação manual](#manual) abaixo.</span><span class="sxs-lookup"><span data-stu-id="df9b0-143">If using this mode, follow the [Manual export and import](#manual) instructions below.</span></span>

<a name="express"></a>
## <a name="express-export"></a><span data-ttu-id="df9b0-144">Exportação de expresso</span><span class="sxs-lookup"><span data-stu-id="df9b0-144">Express export</span></span>

<span data-ttu-id="df9b0-145">Nesta seção, um novo conector personalizado será criado a partir do portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="df9b0-145">In this section, you will create a new custom connector from within the Azure portal.</span></span> <span data-ttu-id="df9b0-146">É necessário estar conectado ao locatário para qual deseja exportar e possuir permissão para criar um conector personalizado no ambiente de destino.</span><span class="sxs-lookup"><span data-stu-id="df9b0-146">You must be logged into the tenant to which you wish to export, and you must have permission to create a custom connector in the target environment.</span></span>

1. <span data-ttu-id="df9b0-147">Selecione o ambiente no qual deseja criar o conector.</span><span class="sxs-lookup"><span data-stu-id="df9b0-147">Select the environment in which you would like to create the connector.</span></span> <span data-ttu-id="df9b0-148">Em seguida, forneça um nome para o conector personalizado.</span><span class="sxs-lookup"><span data-stu-id="df9b0-148">Then provide a name for your custom connector.</span></span>

2. <span data-ttu-id="df9b0-149">Se a sua definição de API incluir quaisquer definições de segurança, elas serão chamadas na etapa n° 2.</span><span class="sxs-lookup"><span data-stu-id="df9b0-149">If your API definition includes any security definitions, these will be called out in step #2.</span></span> <span data-ttu-id="df9b0-150">Se necessário, forneça os detalhes de configuração de segurança necessários para conceder aos usuários acesso à sua API.</span><span class="sxs-lookup"><span data-stu-id="df9b0-150">If required, provide the security configuration details needed to grant users access to your API.</span></span> <span data-ttu-id="df9b0-151">Para obter mais informações, consulte [Autenticação](#auth) abaixo.</span><span class="sxs-lookup"><span data-stu-id="df9b0-151">For more information, see [Authentication](#auth) below.</span></span> 

3. <span data-ttu-id="df9b0-152">Clique em **OK** para criar seu conector personalizado.</span><span class="sxs-lookup"><span data-stu-id="df9b0-152">Click **OK** to create your custom connector.</span></span>


<a name="manual"></a>
## <a name="manual-export-and-import"></a><span data-ttu-id="df9b0-153">Exportação e importação manual</span><span class="sxs-lookup"><span data-stu-id="df9b0-153">Manual export and import</span></span>

<span data-ttu-id="df9b0-154">Para criar um conector personalizado para um aplicativo da Web, móvel, de API ou de função, serão necessárias duas etapas:</span><span class="sxs-lookup"><span data-stu-id="df9b0-154">In order to create a custom connector for a web, mobile, API, or function app, two steps will be needed:</span></span>

1. [<span data-ttu-id="df9b0-155">Recuperando a definição de API do Serviço de Aplicativo ou Azure Functions</span><span class="sxs-lookup"><span data-stu-id="df9b0-155">Retrieving the API definition from App Service or Azure Functions</span></span>](#export)
2. [<span data-ttu-id="df9b0-156">Importar a definição de API para o PowerApps e o Microsoft Flow</span><span class="sxs-lookup"><span data-stu-id="df9b0-156">Importing the API definition into PowerApps and Microsoft Flow</span></span>](#import)

<span data-ttu-id="df9b0-157">É possível que essas duas etapas precisem ser executadas por indivíduos diferentes dentro de uma organização, já que um determinado usuário pode não ter permissão para executar ambas as ações.</span><span class="sxs-lookup"><span data-stu-id="df9b0-157">It is possible that these two steps will need to be carried out by separate individuals within an organization, as a given user may not have permission to perform both actions.</span></span> <span data-ttu-id="df9b0-158">Nesse caso, um desenvolvedor que tenha acesso de colaborador ao Serviço de Aplicativo ou ao aplicativo Azure Functions precisará obter a definição de API (um único arquivo JSON) ou um link para ela.</span><span class="sxs-lookup"><span data-stu-id="df9b0-158">In this case, a developer who has contributor access to the App Service or Azure Functions application will need to obtain the API definition (a single JSON file) or a link to it.</span></span> <span data-ttu-id="df9b0-159">Eles precisarão fornecer essa definição para um proprietário do PowerApps ou do Microsoft Flow.</span><span class="sxs-lookup"><span data-stu-id="df9b0-159">They will then need to provide that definition to a PowerApps or Microsoft Flow owner.</span></span> <span data-ttu-id="df9b0-160">O proprietário pode usar os metadados para criar o conector personalizado.</span><span class="sxs-lookup"><span data-stu-id="df9b0-160">That owner can use the metadata to create the custom connector.</span></span>

<a name="export"></a>
### <a name="retrieving-the-api-definition-from-app-service-or-azure-functions"></a><span data-ttu-id="df9b0-161">Recuperando a definição de API do Serviço de Aplicativo ou do Azure Functions</span><span class="sxs-lookup"><span data-stu-id="df9b0-161">Retrieving the API definition from App Service or Azure Functions</span></span>

<span data-ttu-id="df9b0-162">Nesta seção, você exportará a definição de API para sua API de serviço de aplicativo, a ser usada posteriormente no PowerApps ou portal do Microsoft Flow.</span><span class="sxs-lookup"><span data-stu-id="df9b0-162">In this section, you will export the API definition for your App Service API, to be used later in the PowerApps or Microsoft Flow portal.</span></span>

1. <span data-ttu-id="df9b0-163">Você pode escolher **Baixar a definição de API** ou **Obter um link**.</span><span class="sxs-lookup"><span data-stu-id="df9b0-163">You can choose to either **Download the API definition** or **Get a link**.</span></span> <span data-ttu-id="df9b0-164">Seja qual for a opção escolhida, o resultado será fornecido na próxima seção.</span><span class="sxs-lookup"><span data-stu-id="df9b0-164">Whichever you choose, the result will be provided in the next section.</span></span> <span data-ttu-id="df9b0-165">Selecione uma dessas opções e siga as instruções.</span><span class="sxs-lookup"><span data-stu-id="df9b0-165">Select one of these options and follow the instructions.</span></span>
 
2. <span data-ttu-id="df9b0-166">Se a sua definição de API incluir quaisquer definições de segurança, elas serão chamadas na etapa n° 2.</span><span class="sxs-lookup"><span data-stu-id="df9b0-166">If your API definition includes any security definitions, these will be called out in step #2.</span></span> <span data-ttu-id="df9b0-167">Durante a importação, o PowerApps e o Microsoft Flow irão detectá-las e solicitar informações de segurança.</span><span class="sxs-lookup"><span data-stu-id="df9b0-167">During import, PowerApps and Microsoft Flow will detect these and will prompt for security information.</span></span> <span data-ttu-id="df9b0-168">Reúna as credenciais relacionadas a cada definição para uso na próxima seção.</span><span class="sxs-lookup"><span data-stu-id="df9b0-168">Gather the credentials related to each definition for use in the next section.</span></span> <span data-ttu-id="df9b0-169">Para obter mais informações, consulte [Autenticação](#auth) abaixo.</span><span class="sxs-lookup"><span data-stu-id="df9b0-169">For more information, see [Authentication](#auth) below.</span></span> 

<a name="import"></a>
### <a name="importing-the-api-definition-into-powerapps-and-microsoft-flow"></a><span data-ttu-id="df9b0-170">Importar a definição de API para o PowerApps e o Microsoft Flow</span><span class="sxs-lookup"><span data-stu-id="df9b0-170">Importing the API definition into PowerApps and Microsoft Flow</span></span>

<span data-ttu-id="df9b0-171">Nesta seção, você criará um conector personalizado no PowerApps e no Microsoft Flow usando a definição de API obtida anteriormente.</span><span class="sxs-lookup"><span data-stu-id="df9b0-171">In this section, you will create a custom connector in PowerApps and Microsoft Flow using the API definition obtained earlier.</span></span> <span data-ttu-id="df9b0-172">Os conectores personalizados são compartilhados entre os dois serviços, portanto, você só precisa importar a definição uma vez.</span><span class="sxs-lookup"><span data-stu-id="df9b0-172">Custom connectors are shared between the two services, so you only need to import the definition once.</span></span> <span data-ttu-id="df9b0-173">Para obter mais informações sobre conectores personalizados, consulte [Registrar e usar conectores personalizados no PowerApps] e [Registrar e usar conectores personalizados no Microsoft Flow].</span><span class="sxs-lookup"><span data-stu-id="df9b0-173">For more information on custom connectors, see [Register and use custom connectors in PowerApps] and [Register and use custom connectors in Microsoft Flow].</span></span>

1. <span data-ttu-id="df9b0-174">Abra o [Portal da web do PowerApps](https://web.powerapps.com) ou o [Portal da Web do Microsoft Flow](https://flow.microsoft.com/) e entre.</span><span class="sxs-lookup"><span data-stu-id="df9b0-174">Open the [Powerapps web portal](https://web.powerapps.com) or the [Microsoft Flow web portal](https://flow.microsoft.com/), and sign in.</span></span> 

2. <span data-ttu-id="df9b0-175">Clique no botão **Configurações** (o ícone de engrenagem) no canto superior direito da página e selecione **Conectores personalizados**.</span><span class="sxs-lookup"><span data-stu-id="df9b0-175">Click the **Settings** button (the gear icon) at the upper right of the page and select **Custom connectors**.</span></span> 

3. <span data-ttu-id="df9b0-176">Clique em **Criar conector personalizado**.</span><span class="sxs-lookup"><span data-stu-id="df9b0-176">Click **Create custom connector**.</span></span>

4. <span data-ttu-id="df9b0-177">Na guia **Geral**, forneça um nome para a API e carregue a definição de OpenAPI ou cole a URL de metadados.</span><span class="sxs-lookup"><span data-stu-id="df9b0-177">On the **General** tab, provide a name for your API, and then upload the OpenAPI definition or paste in the metadata URL.</span></span> <span data-ttu-id="df9b0-178">Clique em **Continuar**.</span><span class="sxs-lookup"><span data-stu-id="df9b0-178">Click **Continue**.</span></span>

4. <span data-ttu-id="df9b0-179">Na guia **Segurança**, se for solicitado que você forneça detalhes de autenticação, insira os valores obtidos na seção anterior.</span><span class="sxs-lookup"><span data-stu-id="df9b0-179">On the **Security** tab, if you are prompted to provide authentication details, enter the values obtained in the previous section.</span></span> <span data-ttu-id="df9b0-180">Caso contrário, prossiga para a próxima etapa.</span><span class="sxs-lookup"><span data-stu-id="df9b0-180">If not, proceed to the next step.</span></span>

5. <span data-ttu-id="df9b0-181">Na guia **Definições**, todas as operações definidas no arquivo OpenAPI são populadas automaticamente.</span><span class="sxs-lookup"><span data-stu-id="df9b0-181">On the **Definitions** tab, all the operations defined in your OpenAPI file are auto-populated.</span></span> <span data-ttu-id="df9b0-182">Se todas as suas operações necessárias forem definidas, você poderá ir para a próxima etapa.</span><span class="sxs-lookup"><span data-stu-id="df9b0-182">If all your required operations are defined, you can go to the next step.</span></span> <span data-ttu-id="df9b0-183">Caso contrário, você pode adicionar e modificar as operações aqui.</span><span class="sxs-lookup"><span data-stu-id="df9b0-183">If not, you can add and modify operations here.</span></span>

6. <span data-ttu-id="df9b0-184">Clique em **Criar conector**.</span><span class="sxs-lookup"><span data-stu-id="df9b0-184">Click **Create connector**.</span></span> <span data-ttu-id="df9b0-185">Se você quiser testar chamadas à API, vá para a próxima etapa.</span><span class="sxs-lookup"><span data-stu-id="df9b0-185">If you want to test API calls, go to the next step.</span></span>

7. <span data-ttu-id="df9b0-186">Na guia **Testar**, crie uma conexão, selecione uma operação para testar e insira os dados necessários para a operação.</span><span class="sxs-lookup"><span data-stu-id="df9b0-186">On the **Test** tab, create a connection, select an operation to test, and enter any data required by the operation.</span></span>

8. <span data-ttu-id="df9b0-187">Clique em **Testar operação**.</span><span class="sxs-lookup"><span data-stu-id="df9b0-187">Click **Test operation**.</span></span>


<a name="auth"></a>
## <a name="authentication"></a><span data-ttu-id="df9b0-188">Autenticação</span><span class="sxs-lookup"><span data-stu-id="df9b0-188">Authentication</span></span>

<span data-ttu-id="df9b0-189">O PowerApps e o Microsoft Flow suportam nativamente uma coleção de provedores de identidade que podem ser utilizada para fazer logon de usuários do seu conector personalizado.</span><span class="sxs-lookup"><span data-stu-id="df9b0-189">PowerApps and Microsoft Flow natively support a collection of identity providers which can be used to log in users of your custom connector.</span></span> <span data-ttu-id="df9b0-190">Se sua API exige autenticação, certifique-se de que ela seja capturada como uma _definição de segurança_ no documento OpenAPI.</span><span class="sxs-lookup"><span data-stu-id="df9b0-190">If your API requires authentication, ensure that it is captured as a _security definition_ in your OpenAPI document.</span></span> <span data-ttu-id="df9b0-191">Durante a exportação, será necessário fornecer valores de configuração que permitem ao PowerApps um Microsoft Flow realizar ações de logon.</span><span class="sxs-lookup"><span data-stu-id="df9b0-191">During export, you will need to provide configuration values that allow PowerApps an Microsoft Flow to perform login actions.</span></span>

<span data-ttu-id="df9b0-192">Esta seção aborda os tipos de autenticação que são suportados pelo fluxo expresso: chave de API, Azure Active Directory e OAuth 2.0 Genérico.</span><span class="sxs-lookup"><span data-stu-id="df9b0-192">This section covers the authentication types which are supported by the express flow: API key, Azure Active Directory, and Generic OAuth 2.0.</span></span> <span data-ttu-id="df9b0-193">Para obter uma lista completa de provedores e as credenciais necessárias, consulte [Registrar e usar conectores personalizados no PowerApps] e [Registrar e usar conectores personalizados no Microsoft Flow].</span><span class="sxs-lookup"><span data-stu-id="df9b0-193">For a complete list of providers and the credentials each requires, see [Register and use custom connectors in PowerApps] and [Register and use custom connectors in Microsoft Flow].</span></span>

### <a name="api-key"></a><span data-ttu-id="df9b0-194">Chave de API</span><span class="sxs-lookup"><span data-stu-id="df9b0-194">API key</span></span>
<span data-ttu-id="df9b0-195">Quando o esquema de segurança é usado, os usuários do seu conector deverão fornecer a chave ao criar uma conexão.</span><span class="sxs-lookup"><span data-stu-id="df9b0-195">When this security scheme is used, the users of your connector will be prompted to provide the key when they create a connection.</span></span> <span data-ttu-id="df9b0-196">É possível fornecer um nome de chave de API para ajudá-lo a reconhecer qual chave é necessária.</span><span class="sxs-lookup"><span data-stu-id="df9b0-196">You can provide an API key name to help them know which key is needed.</span></span> <span data-ttu-id="df9b0-197">Para o Azure Functions, geralmente será uma das chaves de host que abrangem várias funções dentro do aplicativo de funções.</span><span class="sxs-lookup"><span data-stu-id="df9b0-197">For Azure Functions, this will typically be one of the host keys, covering several functions within the function app.</span></span>

### <a name="azure-active-directory"></a><span data-ttu-id="df9b0-198">Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="df9b0-198">Azure Active Directory</span></span>
<span data-ttu-id="df9b0-199">Ao configurar um conector personalizado que requer o logon do Azure Active Directory, dois registros do aplicativo do Azure Active Directory são necessários: um para modelar a API de back-end e outro para modelar o conector no PowerApps e Flow.</span><span class="sxs-lookup"><span data-stu-id="df9b0-199">When configuring a custom connector that requires AAD login, two AAD application registrations are required: one to model the backend API, and one to model the connector in PowerApps and Flow.</span></span>

<span data-ttu-id="df9b0-200">Sua API deve ser configurada para funcionar com o primeiro registro e isso já será considerado se você utilizou o recurso de [Autenticação do Serviço de Aplicativo/Autorização](https://docs.microsoft.com/azure/app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication).</span><span class="sxs-lookup"><span data-stu-id="df9b0-200">Your API should be configured to work with the first registration, and this will already be taken care of if you used the [App Service Authentication/Authorization](https://docs.microsoft.com/azure/app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication) feature.</span></span>

<span data-ttu-id="df9b0-201">Você terá que criar manualmente o segundo registro para o conector, utilizando as etapas abordadas em [Adicionar um aplicativo do AAD](https://docs.microsoft.com/azure/active-directory/develop/active-directory-integrating-applications#adding-an-application).</span><span class="sxs-lookup"><span data-stu-id="df9b0-201">You will have to manually create the second registration for the connector, using the steps covered in [Adding an AAD application](https://docs.microsoft.com/azure/active-directory/develop/active-directory-integrating-applications#adding-an-application).</span></span> <span data-ttu-id="df9b0-202">O registro precisa ter acesso delegado à sua API e um URL de resposta de`https://msmanaged-na.consent.azure-apim.net/redirect`.</span><span class="sxs-lookup"><span data-stu-id="df9b0-202">The registration needs to have delegated access to your API and a reply URL of `https://msmanaged-na.consent.azure-apim.net/redirect`.</span></span> <span data-ttu-id="df9b0-203">Consulte [este exemplo](
https://powerapps.microsoft.com/tutorials/customapi-azure-resource-manager-tutorial/) para obter mais detalhes, substituindo sua API pelo Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="df9b0-203">Please see [this example](
https://powerapps.microsoft.com/tutorials/customapi-azure-resource-manager-tutorial/) for more detail, substituting your API for the Azure Resource Manager.</span></span>

<span data-ttu-id="df9b0-204">Os valores de configuração a seguir são necessários:</span><span class="sxs-lookup"><span data-stu-id="df9b0-204">The following configuration values are required:</span></span>
- <span data-ttu-id="df9b0-205">**ID do cliente** - o ID do cliente do seu conector de registro do AAD</span><span class="sxs-lookup"><span data-stu-id="df9b0-205">**Client ID** - the client ID of your connector AAD registration</span></span>
- <span data-ttu-id="df9b0-206">**Segredo do cliente** - o segredo do cliente do seu registro do conector AAD</span><span class="sxs-lookup"><span data-stu-id="df9b0-206">**Client secret** - the client secret of your connector AAD registration</span></span>
- <span data-ttu-id="df9b0-207">**URL de Logon** - URL básica para AAD.</span><span class="sxs-lookup"><span data-stu-id="df9b0-207">**Login URL** - the base URL for AAD.</span></span> <span data-ttu-id="df9b0-208">No Azure público, isso geralmente será `https://login.windows.net`.</span><span class="sxs-lookup"><span data-stu-id="df9b0-208">In public Azure, this will typically be `https://login.windows.net`.</span></span>
- <span data-ttu-id="df9b0-209">**ID do locatário** - o ID do locatário a ser usado para o logon.</span><span class="sxs-lookup"><span data-stu-id="df9b0-209">**Tenant ID** - the ID of the tenant to be used for the login.</span></span> <span data-ttu-id="df9b0-210">Isso deve ser "comum" ou o ID do locatário em que o conector está sendo criado.</span><span class="sxs-lookup"><span data-stu-id="df9b0-210">This should be "common" or the ID of the tenant in which the connector is being created.</span></span>
- <span data-ttu-id="df9b0-211">**URL de Recurso** - URL de recurso do seu registro do AAD de back-end de API</span><span class="sxs-lookup"><span data-stu-id="df9b0-211">**Resource URL** - the resource URL of your API backend AAD registration</span></span>

> [!IMPORTANT]
> <span data-ttu-id="df9b0-212">Se outro indivíduo importará a definição de API para o PowerApps e o Microsoft Flow como parte do fluxo manual, será necessário fornecer o ID do cliente e o segredo do cliente **do registro do conector**, assim como o URL de recurso da sua API.</span><span class="sxs-lookup"><span data-stu-id="df9b0-212">If another individual will be importing the API definition into PowerApps and Microsoft Flow as part of the manual flow, you will need to provide them with the client ID and client secret **of the connector registration**, as well as the resource URL of your API.</span></span> <span data-ttu-id="df9b0-213">Certifique-se de que esses segredos sejam gerenciados com segurança.</span><span class="sxs-lookup"><span data-stu-id="df9b0-213">Make sure that these secrets are managed securely.</span></span> <span data-ttu-id="df9b0-214">**Não compartilhe as credenciais de segurança da API, propriamente dita.**</span><span class="sxs-lookup"><span data-stu-id="df9b0-214">**Do not share the security credentials of the API itself.**</span></span>

### <a name="generic-oauth-20"></a><span data-ttu-id="df9b0-215">OAuth 2.0 genérico</span><span class="sxs-lookup"><span data-stu-id="df9b0-215">Generic OAuth 2.0</span></span>
<span data-ttu-id="df9b0-216">O suporte OAuth 2.0 genérico permite que você se integre com qualquer provedor OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="df9b0-216">The generic OAuth 2.0 support allows you to integrate with any OAuth 2.0 provider.</span></span> <span data-ttu-id="df9b0-217">Isso permite que você traga qualquer provedor personalizado que sem suporte nativo.</span><span class="sxs-lookup"><span data-stu-id="df9b0-217">This allows you to bring in any custom provider which is not natively supported.</span></span>

<span data-ttu-id="df9b0-218">Os valores de configuração a seguir são necessários:</span><span class="sxs-lookup"><span data-stu-id="df9b0-218">The following configuration values are required:</span></span>
- <span data-ttu-id="df9b0-219">**ID do Cliente** - o ID do cliente do OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="df9b0-219">**Client ID** - the OAuth 2.0 client ID</span></span>
- <span data-ttu-id="df9b0-220">**Segredo do Cliente** - o segredo do cliente do OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="df9b0-220">**Client secret** - the OAuth 2.0 client secret</span></span>
- <span data-ttu-id="df9b0-221">**URL de Autorização** - a URL de autorização do OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="df9b0-221">**Authorization URL** - the OAuth 2.0 authorization URL</span></span>
- <span data-ttu-id="df9b0-222">**URL de Token** - a URL de token do OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="df9b0-222">**Token URL** - the OAuth 2.0 token URL</span></span>
- <span data-ttu-id="df9b0-223">**URL de Atualização** - a URL de atualização do OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="df9b0-223">**Refresh URL** - the OAuth 2.0 refresh URL</span></span>



<span data-ttu-id="df9b0-224">[Registrar e usar conectores personalizados no PowerApps]: https://powerapps.microsoft.com/tutorials/register-custom-api/</span><span class="sxs-lookup"><span data-stu-id="df9b0-224">[Register and use custom connectors in PowerApps]: https://powerapps.microsoft.com/tutorials/register-custom-api/</span></span>
<span data-ttu-id="df9b0-225">[Registrar e usar conectores personalizados no Microsoft Flow]: https://flow.microsoft.com/documentation/register-custom-api/</span><span class="sxs-lookup"><span data-stu-id="df9b0-225">[Register and use custom connectors in Microsoft Flow]: https://flow.microsoft.com/documentation/register-custom-api/</span></span>
