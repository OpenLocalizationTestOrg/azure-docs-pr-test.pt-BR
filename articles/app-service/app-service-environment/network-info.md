---
title: "Considerações sobre o aaaNetworking com um ambiente de serviço de aplicativo do Azure"
description: "Explica o tráfego de rede Olá ASE e como tooset NSGs e UDRs com seu ASE"
services: app-service
documentationcenter: na
author: ccompy
manager: stefsch
ms.assetid: 955a4d84-94ca-418d-aa79-b57a5eb8cb85
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/08/2017
ms.author: ccompy
ms.openlocfilehash: d4d3000f4d4d75814b1e6d47079d967334eb1a3b
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="networking-considerations-for-an-app-service-environment"></a><span data-ttu-id="a4153-103">Considerações de rede para um ambiente do Serviço de Aplicativo</span><span class="sxs-lookup"><span data-stu-id="a4153-103">Networking considerations for an App Service environment</span></span> #

## <a name="overview"></a><span data-ttu-id="a4153-104">Visão geral</span><span class="sxs-lookup"><span data-stu-id="a4153-104">Overview</span></span> ##

 <span data-ttu-id="a4153-105">O [Ambiente do Serviço de Aplicativo][Intro] do Azure é uma implantação do Serviço de Aplicativo do Azure em uma sub-rede da sua VNet (VNet) do Azure.</span><span class="sxs-lookup"><span data-stu-id="a4153-105">Azure [App Service Environment][Intro] is a deployment of Azure App Service into a subnet in your Azure virtual network (VNet).</span></span> <span data-ttu-id="a4153-106">Há dois tipos de implantação para um ASE (ambiente de Serviço de Aplicativo):</span><span class="sxs-lookup"><span data-stu-id="a4153-106">There are two deployment types for an App Service environment (ASE):</span></span>

- <span data-ttu-id="a4153-107">**ASE externo**: expõe Olá aplicativos hospedados ASE em um endereço IP acessível pela internet.</span><span class="sxs-lookup"><span data-stu-id="a4153-107">**External ASE**: Exposes hello ASE-hosted apps on an internet-accessible IP address.</span></span> <span data-ttu-id="a4153-108">Para saber mais, confira [Criar um ASE externo][MakeExternalASE].</span><span class="sxs-lookup"><span data-stu-id="a4153-108">For more information, see [Create an External ASE][MakeExternalASE].</span></span>
- <span data-ttu-id="a4153-109">**ILB ASE**: expõe Olá aplicativos hospedados ASE em um endereço IP dentro de sua rede virtual.</span><span class="sxs-lookup"><span data-stu-id="a4153-109">**ILB ASE**: Exposes hello ASE-hosted apps on an IP address inside your VNet.</span></span> <span data-ttu-id="a4153-110">ponto de extremidade interno Olá é um balanceador de carga interno (ILB), por isso, ela é chamada uma ASE ILB.</span><span class="sxs-lookup"><span data-stu-id="a4153-110">hello internal endpoint is an internal load balancer (ILB), which is why it's called an ILB ASE.</span></span> <span data-ttu-id="a4153-111">Para saber mais, confira [Criar e usar um ASE ILB][MakeILBASE].</span><span class="sxs-lookup"><span data-stu-id="a4153-111">For more information, see [Create and use an ILB ASE][MakeILBASE].</span></span>

<span data-ttu-id="a4153-112">Agora há duas versões do Ambiente do Serviço de Aplicativo: ASEv1 e ASEv2.</span><span class="sxs-lookup"><span data-stu-id="a4153-112">There are now two versions of App Service Environment: ASEv1 and ASEv2.</span></span> <span data-ttu-id="a4153-113">Para obter informações sobre ASEv1, consulte [tooApp Introdução v1 do ambiente de serviço][ASEv1Intro].</span><span class="sxs-lookup"><span data-stu-id="a4153-113">For information on ASEv1, see [Introduction tooApp Service Environment v1][ASEv1Intro].</span></span> <span data-ttu-id="a4153-114">O ASEv1 pode ser implantado em uma VNet clássica ou do Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="a4153-114">ASEv1 can be deployed in a classic or Resource Manager VNet.</span></span> <span data-ttu-id="a4153-115">Um ASEv2 só pode ser implantado em uma VNet do Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="a4153-115">ASEv2 can only be deployed into a Resource Manager VNet.</span></span>

<span data-ttu-id="a4153-116">Todas as chamadas de uma ASE que vão toohello internet deixe Olá redes por meio de um VIP atribuído Olá ASE.</span><span class="sxs-lookup"><span data-stu-id="a4153-116">All calls from an ASE that go toohello internet leave hello VNet through a VIP assigned for hello ASE.</span></span> <span data-ttu-id="a4153-117">Olá IP público desse VIP é, em seguida, Olá IP de origem para todas as chamadas de saudação ASE que vão toohello internet.</span><span class="sxs-lookup"><span data-stu-id="a4153-117">hello public IP of this VIP is then hello source IP for all calls from hello ASE that go toohello internet.</span></span> <span data-ttu-id="a4153-118">Se Olá aplicativos no seu ASE fazer chamadas tooresources na sua rede virtual ou por uma VPN, Olá IP de origem é uma saudação IPs na sub-rede Olá usado pelo seu ASE.</span><span class="sxs-lookup"><span data-stu-id="a4153-118">If hello apps in your ASE make calls tooresources in your VNet or across a VPN, hello source IP is one of hello IPs in hello subnet used by your ASE.</span></span> <span data-ttu-id="a4153-119">Como Olá ASE em Olá VNet, também pode acessar recursos em Olá VNet sem qualquer configuração adicional.</span><span class="sxs-lookup"><span data-stu-id="a4153-119">Because hello ASE is within hello VNet, it can also access resources within hello VNet without any additional configuration.</span></span> <span data-ttu-id="a4153-120">Se Olá rede virtual é conectada tooyour rede de local, aplicativos no seu ASE também terá acesso tooresources existe.</span><span class="sxs-lookup"><span data-stu-id="a4153-120">If hello VNet is connected tooyour on-premises network, apps in your ASE also have access tooresources there.</span></span> <span data-ttu-id="a4153-121">Você não precisa tooconfigure Olá ASE ou seu aplicativo qualquer adicional.</span><span class="sxs-lookup"><span data-stu-id="a4153-121">You don't need tooconfigure hello ASE or your app any further.</span></span>

![ASE externo][1] 

<span data-ttu-id="a4153-123">Se você tiver uma ASE externo, VIP público Olá também é o ponto de extremidade de saudação que seus aplicativos ASE resolver toofor:</span><span class="sxs-lookup"><span data-stu-id="a4153-123">If you have an External ASE, hello public VIP is also hello endpoint that your ASE apps resolve toofor:</span></span>

* <span data-ttu-id="a4153-124">HTTP/S.</span><span class="sxs-lookup"><span data-stu-id="a4153-124">HTTP/S.</span></span> 
* <span data-ttu-id="a4153-125">FTP/S.</span><span class="sxs-lookup"><span data-stu-id="a4153-125">FTP/S.</span></span> 
* <span data-ttu-id="a4153-126">Implantação da Web.</span><span class="sxs-lookup"><span data-stu-id="a4153-126">Web deployment.</span></span>
* <span data-ttu-id="a4153-127">Depuração remota.</span><span class="sxs-lookup"><span data-stu-id="a4153-127">Remote debugging.</span></span>

![ILB ASE][2]

<span data-ttu-id="a4153-129">Se você tiver uma ASE ILB, o endereço IP de saudação do hello ILB é ponto de extremidade de saudação para HTTP/S, FTP/S, implantação da web e a depuração remota.</span><span class="sxs-lookup"><span data-stu-id="a4153-129">If you have an ILB ASE, hello IP address of hello ILB is hello endpoint for HTTP/S, FTP/S, web deployment, and remote debugging.</span></span>

<span data-ttu-id="a4153-130">portas de acesso de aplicativo normal Olá são:</span><span class="sxs-lookup"><span data-stu-id="a4153-130">hello normal app access ports are:</span></span>

| <span data-ttu-id="a4153-131">Uso</span><span class="sxs-lookup"><span data-stu-id="a4153-131">Use</span></span> | <span data-ttu-id="a4153-132">Da</span><span class="sxs-lookup"><span data-stu-id="a4153-132">From</span></span> | <span data-ttu-id="a4153-133">muito</span><span class="sxs-lookup"><span data-stu-id="a4153-133">too</span></span>|
|----------|---------|-------------|
|  <span data-ttu-id="a4153-134">HTTP/HTTPS</span><span class="sxs-lookup"><span data-stu-id="a4153-134">HTTP/HTTPS</span></span>  | <span data-ttu-id="a4153-135">Configurável pelo usuário</span><span class="sxs-lookup"><span data-stu-id="a4153-135">User configurable</span></span> |  <span data-ttu-id="a4153-136">80, 443</span><span class="sxs-lookup"><span data-stu-id="a4153-136">80, 443</span></span> |
|  <span data-ttu-id="a4153-137">FTP/FTPS</span><span class="sxs-lookup"><span data-stu-id="a4153-137">FTP/FTPS</span></span>    | <span data-ttu-id="a4153-138">Configurável pelo usuário</span><span class="sxs-lookup"><span data-stu-id="a4153-138">User configurable</span></span> |  <span data-ttu-id="a4153-139">21, 990, 10001-10020</span><span class="sxs-lookup"><span data-stu-id="a4153-139">21, 990, 10001-10020</span></span> |
|  <span data-ttu-id="a4153-140">Depuração remota no Visual Studio</span><span class="sxs-lookup"><span data-stu-id="a4153-140">Visual Studio remote debugging</span></span>  |  <span data-ttu-id="a4153-141">Configurável pelo usuário</span><span class="sxs-lookup"><span data-stu-id="a4153-141">User configurable</span></span> |  <span data-ttu-id="a4153-142">4016, 4018, 4020, 4022</span><span class="sxs-lookup"><span data-stu-id="a4153-142">4016, 4018, 4020, 4022</span></span> |

<span data-ttu-id="a4153-143">Isso será verdadeiro se você estiver em um ASE externo ou em um ASE ILB.</span><span class="sxs-lookup"><span data-stu-id="a4153-143">This is true if you're on an External ASE or on an ILB ASE.</span></span> <span data-ttu-id="a4153-144">Se você estiver em uma ASE externo, você atingir essas portas no VIP público hello.</span><span class="sxs-lookup"><span data-stu-id="a4153-144">If you're on an External ASE, you hit those ports on hello public VIP.</span></span> <span data-ttu-id="a4153-145">Se você estiver em uma ASE ILB, você atingir essas portas no hello ILB.</span><span class="sxs-lookup"><span data-stu-id="a4153-145">If you're on an ILB ASE, you hit those ports on hello ILB.</span></span> <span data-ttu-id="a4153-146">Se você bloquear a porta 443, pode haver um efeito em alguns recursos apresentados no portal de saudação.</span><span class="sxs-lookup"><span data-stu-id="a4153-146">If you lock down port 443, there can be an effect on some features exposed in hello portal.</span></span> <span data-ttu-id="a4153-147">Para saber mais, confira [Dependências do portal](#portaldep).</span><span class="sxs-lookup"><span data-stu-id="a4153-147">For more information, see [Portal dependencies](#portaldep).</span></span>

## <a name="ase-dependencies"></a><span data-ttu-id="a4153-148">Dependências do ASE</span><span class="sxs-lookup"><span data-stu-id="a4153-148">ASE dependencies</span></span> ##

<span data-ttu-id="a4153-149">Uma dependência de acesso de entrada do ASE é:</span><span class="sxs-lookup"><span data-stu-id="a4153-149">An ASE inbound access dependency is:</span></span>

| <span data-ttu-id="a4153-150">Uso</span><span class="sxs-lookup"><span data-stu-id="a4153-150">Use</span></span> | <span data-ttu-id="a4153-151">Da</span><span class="sxs-lookup"><span data-stu-id="a4153-151">From</span></span> | <span data-ttu-id="a4153-152">muito</span><span class="sxs-lookup"><span data-stu-id="a4153-152">too</span></span>|
|-----|------|----|
| <span data-ttu-id="a4153-153">Gerenciamento</span><span class="sxs-lookup"><span data-stu-id="a4153-153">Management</span></span> | <span data-ttu-id="a4153-154">Endereços de gerenciamento do Serviço de Aplicativo</span><span class="sxs-lookup"><span data-stu-id="a4153-154">App Service management addresses</span></span> | <span data-ttu-id="a4153-155">Sub-rede ASE: 454, 455</span><span class="sxs-lookup"><span data-stu-id="a4153-155">ASE subnet: 454, 455</span></span> |
|  <span data-ttu-id="a4153-156">Comunicação interna ASE</span><span class="sxs-lookup"><span data-stu-id="a4153-156">ASE internal communication</span></span> | <span data-ttu-id="a4153-157">Sub-rede ASE: todas as portas</span><span class="sxs-lookup"><span data-stu-id="a4153-157">ASE subnet: All ports</span></span> | <span data-ttu-id="a4153-158">Sub-rede ASE: todas as portas</span><span class="sxs-lookup"><span data-stu-id="a4153-158">ASE subnet: All ports</span></span>
|  <span data-ttu-id="a4153-159">Permitir a entrada do Azure Load Balancer</span><span class="sxs-lookup"><span data-stu-id="a4153-159">Allow Azure load balancer inbound</span></span> | <span data-ttu-id="a4153-160">Azure Load Balancer</span><span class="sxs-lookup"><span data-stu-id="a4153-160">Azure load balancer</span></span> | <span data-ttu-id="a4153-161">Sub-rede ASE: todas as portas</span><span class="sxs-lookup"><span data-stu-id="a4153-161">ASE subnet: All ports</span></span>
|  <span data-ttu-id="a4153-162">Endereços IP atribuídos ao aplicativo</span><span class="sxs-lookup"><span data-stu-id="a4153-162">App assigned IP addresses</span></span> | <span data-ttu-id="a4153-163">Endereços atribuído de aplicativo</span><span class="sxs-lookup"><span data-stu-id="a4153-163">App assigned addresses</span></span> | <span data-ttu-id="a4153-164">Sub-rede ASE: todas as portas</span><span class="sxs-lookup"><span data-stu-id="a4153-164">ASE subnet: All ports</span></span>

<span data-ttu-id="a4153-165">Olá o tráfego de entrada fornece comando e controle de saudação ASE no monitoramento de toosystem de adição.</span><span class="sxs-lookup"><span data-stu-id="a4153-165">hello inbound traffic provides command and control of hello ASE in addition toosystem monitoring.</span></span> <span data-ttu-id="a4153-166">IPs de origem Olá para esse tráfego são listadas na Olá [gerenciamento ASE endereços] [ ASEManagement] documento.</span><span class="sxs-lookup"><span data-stu-id="a4153-166">hello source IPs for this traffic are listed in hello [ASE Management addresses][ASEManagement] document.</span></span> <span data-ttu-id="a4153-167">configuração de segurança de rede Olá precisa de acesso tooallow todos os IPs em portas 454 e 455.</span><span class="sxs-lookup"><span data-stu-id="a4153-167">hello network security configuration needs tooallow access from all IPs on ports 454 and 455.</span></span>

<span data-ttu-id="a4153-168">Dentro da sub-rede Olá ASE há muitas portas usadas para comunicação de componente interno e eles podem alterar.</span><span class="sxs-lookup"><span data-stu-id="a4153-168">Within hello ASE subnet there are many ports used for internal component communication and they can change.</span></span>  <span data-ttu-id="a4153-169">Isso exige que todas as portas de saudação em Olá ASE sub-rede toobe acessível da sub-rede de ASE hello.</span><span class="sxs-lookup"><span data-stu-id="a4153-169">This requires all of hello ports in hello ASE subnet toobe accessible from hello ASE subnet.</span></span> 

<span data-ttu-id="a4153-170">Para comunicação de saudação entre balanceador de carga do Azure hello e portas mínimas do Olá Olá ASE sub-rede que toobe necessário abrir são 454 e 455 de 16001.</span><span class="sxs-lookup"><span data-stu-id="a4153-170">For hello communication between hello Azure load balancer and hello ASE subnet hello minimum ports that need toobe open are 454, 455 and 16001.</span></span> <span data-ttu-id="a4153-171">porta 16001 Olá é usada para tráfego de atividade de manter entre o balanceador de carga hello e ASE hello.</span><span class="sxs-lookup"><span data-stu-id="a4153-171">hello 16001 port is used for keep alive traffic between hello load balancer and hello ASE.</span></span> <span data-ttu-id="a4153-172">Se você estiver usando uma ASE ILB, você pode bloquear o tráfego para baixo toojust Olá 454, 455, 16001 portas.</span><span class="sxs-lookup"><span data-stu-id="a4153-172">If you are using an ILB ASE then you can lock traffic down toojust hello 454, 455, 16001 ports.</span></span>  <span data-ttu-id="a4153-173">Se você estiver usando uma ASE externo necessário tootake em portas de acesso conta saudação normal do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="a4153-173">If you are using an External ASE then you need tootake into account hello normal app access ports.</span></span>  <span data-ttu-id="a4153-174">Se você estiver usando endereços de aplicativo atribuído é necessário tooopen-tooall portas.</span><span class="sxs-lookup"><span data-stu-id="a4153-174">If you are using app assigned addresses you need tooopen it tooall ports.</span></span>  <span data-ttu-id="a4153-175">Quando um endereço é atribuído um aplicativo específico tooa, o balanceador de carga Olá usará portas que não são conhecidas com antecedência toosend HTTP e HTTPS tráfego toohello ASE.</span><span class="sxs-lookup"><span data-stu-id="a4153-175">When an address is assigned tooa specific app, then hello load balancer will use ports that are not known of in advance toosend HTTP and HTTPS traffic toohello ASE.</span></span>

<span data-ttu-id="a4153-176">Se você estiver usando endereços IP de aplicativo atribuído é necessário tooallow tráfego da saudação que IPS atribuídos subrede tooyour aplicativos toohello ASE.</span><span class="sxs-lookup"><span data-stu-id="a4153-176">If you are using app assigned IP addresses you need tooallow traffic from hello IPs assigned tooyour apps toohello ASE subnet.</span></span>

<span data-ttu-id="a4153-177">Para acesso de saída, um ASE depende de vários sistemas externos.</span><span class="sxs-lookup"><span data-stu-id="a4153-177">For outbound access, an ASE depends on multiple external systems.</span></span> <span data-ttu-id="a4153-178">Essas dependências de sistema são definidas com nomes DNS e não mapeiam tooa fixa o conjunto de endereços IP.</span><span class="sxs-lookup"><span data-stu-id="a4153-178">Those system dependencies are defined with DNS names and don't map tooa fixed set of IP addresses.</span></span> <span data-ttu-id="a4153-179">Assim, Olá ASE requer acesso de saída de hello ASE sub-rede tooall IPs externos em uma variedade de portas.</span><span class="sxs-lookup"><span data-stu-id="a4153-179">Thus, hello ASE requires outbound access from hello ASE subnet tooall external IPs across a variety of ports.</span></span> <span data-ttu-id="a4153-180">Uma ASE tem Olá dependências de saída a seguir:</span><span class="sxs-lookup"><span data-stu-id="a4153-180">An ASE has hello following outbound dependencies:</span></span>

| <span data-ttu-id="a4153-181">Uso</span><span class="sxs-lookup"><span data-stu-id="a4153-181">Use</span></span> | <span data-ttu-id="a4153-182">Da</span><span class="sxs-lookup"><span data-stu-id="a4153-182">From</span></span> | <span data-ttu-id="a4153-183">muito</span><span class="sxs-lookup"><span data-stu-id="a4153-183">too</span></span>|
|-----|------|----|
| <span data-ttu-id="a4153-184">Armazenamento do Azure</span><span class="sxs-lookup"><span data-stu-id="a4153-184">Azure Storage</span></span> | <span data-ttu-id="a4153-185">Sub-rede ASE</span><span class="sxs-lookup"><span data-stu-id="a4153-185">ASE subnet</span></span> | <span data-ttu-id="a4153-186">table.core.windows.net, blob.core.windows.net, queue.core.windows.net, file.core.windows.net: 80, 443, 445 (445 só é necessário para o ASEv1).</span><span class="sxs-lookup"><span data-stu-id="a4153-186">table.core.windows.net, blob.core.windows.net, queue.core.windows.net, file.core.windows.net: 80, 443, 445 (445 is only needed for ASEv1.)</span></span> |
| <span data-ttu-id="a4153-187">Banco de Dados SQL do Azure</span><span class="sxs-lookup"><span data-stu-id="a4153-187">Azure SQL Database</span></span> | <span data-ttu-id="a4153-188">Sub-rede ASE</span><span class="sxs-lookup"><span data-stu-id="a4153-188">ASE subnet</span></span> | <span data-ttu-id="a4153-189">database.windows.net: 1433, 11000-11999, 14000-14999 (Para saber mais, confira [Uso da porta do Banco de Dados SQL V12](../../sql-database/sql-database-develop-direct-route-ports-adonet-v12.md).)</span><span class="sxs-lookup"><span data-stu-id="a4153-189">database.windows.net: 1433, 11000-11999, 14000-14999 (For more information, see [SQL Database V12 port usage](../../sql-database/sql-database-develop-direct-route-ports-adonet-v12.md).)</span></span>|
| <span data-ttu-id="a4153-190">Gerenciamento do Azure</span><span class="sxs-lookup"><span data-stu-id="a4153-190">Azure management</span></span> | <span data-ttu-id="a4153-191">Sub-rede ASE</span><span class="sxs-lookup"><span data-stu-id="a4153-191">ASE subnet</span></span> | <span data-ttu-id="a4153-192">management.core.windows.net, management.azure.com: 443</span><span class="sxs-lookup"><span data-stu-id="a4153-192">management.core.windows.net, management.azure.com: 443</span></span> 
| <span data-ttu-id="a4153-193">Verificação de certificado SSL</span><span class="sxs-lookup"><span data-stu-id="a4153-193">SSL certificate verification</span></span> |  <span data-ttu-id="a4153-194">Sub-rede ASE</span><span class="sxs-lookup"><span data-stu-id="a4153-194">ASE subnet</span></span>            |  <span data-ttu-id="a4153-195">ocsp.msocsp.com, mscrl.microsoft.com, crl.microsoft.com: 443</span><span class="sxs-lookup"><span data-stu-id="a4153-195">ocsp.msocsp.com, mscrl.microsoft.com, crl.microsoft.com: 443</span></span>
| <span data-ttu-id="a4153-196">Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="a4153-196">Azure Active Directory</span></span>        | <span data-ttu-id="a4153-197">Sub-rede ASE</span><span class="sxs-lookup"><span data-stu-id="a4153-197">ASE subnet</span></span>            |  <span data-ttu-id="a4153-198">Internet: 443</span><span class="sxs-lookup"><span data-stu-id="a4153-198">Internet: 443</span></span>
| <span data-ttu-id="a4153-199">Gerenciamento do Serviço de Aplicativo</span><span class="sxs-lookup"><span data-stu-id="a4153-199">App Service management</span></span>        | <span data-ttu-id="a4153-200">Sub-rede ASE</span><span class="sxs-lookup"><span data-stu-id="a4153-200">ASE subnet</span></span>            |  <span data-ttu-id="a4153-201">Internet: 443</span><span class="sxs-lookup"><span data-stu-id="a4153-201">Internet: 443</span></span>
| <span data-ttu-id="a4153-202">DNS do Azure</span><span class="sxs-lookup"><span data-stu-id="a4153-202">Azure DNS</span></span>                     | <span data-ttu-id="a4153-203">Sub-rede ASE</span><span class="sxs-lookup"><span data-stu-id="a4153-203">ASE subnet</span></span>            |  <span data-ttu-id="a4153-204">Internet: 53</span><span class="sxs-lookup"><span data-stu-id="a4153-204">Internet: 53</span></span>
| <span data-ttu-id="a4153-205">Comunicação interna ASE</span><span class="sxs-lookup"><span data-stu-id="a4153-205">ASE internal communication</span></span>    | <span data-ttu-id="a4153-206">Sub-rede ASE: todas as portas</span><span class="sxs-lookup"><span data-stu-id="a4153-206">ASE subnet: All ports</span></span> |  <span data-ttu-id="a4153-207">Sub-rede ASE: todas as portas</span><span class="sxs-lookup"><span data-stu-id="a4153-207">ASE subnet: All ports</span></span>

<span data-ttu-id="a4153-208">Se Olá ASE perde o acesso dependências toothese, ele deixará de funcionar.</span><span class="sxs-lookup"><span data-stu-id="a4153-208">If hello ASE loses access toothese dependencies, it stops working.</span></span> <span data-ttu-id="a4153-209">Quando isso acontece tempo suficiente, Olá ASE está suspenso.</span><span class="sxs-lookup"><span data-stu-id="a4153-209">When that happens long enough, hello ASE is suspended.</span></span>

### <a name="customer-dns"></a><span data-ttu-id="a4153-210">DNS do cliente</span><span class="sxs-lookup"><span data-stu-id="a4153-210">Customer DNS</span></span> ###

<span data-ttu-id="a4153-211">Se hello VNet está configurada com um servidor DNS definido pelo cliente, cargas de trabalho de locatário Olá usarão-lo.</span><span class="sxs-lookup"><span data-stu-id="a4153-211">If hello VNet is configured with a customer-defined DNS server, hello tenant workloads use it.</span></span> <span data-ttu-id="a4153-212">Olá ASE ainda precisa toocommunicate com DNS do Azure para fins de gerenciamento.</span><span class="sxs-lookup"><span data-stu-id="a4153-212">hello ASE still needs toocommunicate with Azure DNS for management purposes.</span></span> 

<span data-ttu-id="a4153-213">Se hello VNet estiver configurado com um cliente DNS no Olá outro lado de uma VPN, servidor DNS Olá deve ser acessível da sub-rede Olá que contém ASE hello.</span><span class="sxs-lookup"><span data-stu-id="a4153-213">If hello VNet is configured with a customer DNS on hello other side of a VPN, hello DNS server must be reachable from hello subnet that contains hello ASE.</span></span>

<a name="portaldep"></a>

## <a name="portal-dependencies"></a><span data-ttu-id="a4153-214">Dependências do portal</span><span class="sxs-lookup"><span data-stu-id="a4153-214">Portal dependencies</span></span> ##

<span data-ttu-id="a4153-215">Dependências funcionais do toohello ASE de adição, há alguns experiência do portal toohello relacionados itens extras.</span><span class="sxs-lookup"><span data-stu-id="a4153-215">In addition toohello ASE functional dependencies, there are a few extra items related toohello portal experience.</span></span> <span data-ttu-id="a4153-216">Alguns dos recursos de saudação do hello portal do Azure dependem de acesso direto too_SCM site_.</span><span class="sxs-lookup"><span data-stu-id="a4153-216">Some of hello capabilities in hello Azure portal depend on direct access too_SCM site_.</span></span> <span data-ttu-id="a4153-217">Para cada aplicativo no Serviço de Aplicativo do Azure, há duas URLs.</span><span class="sxs-lookup"><span data-stu-id="a4153-217">For every app in Azure App Service, there are two URLs.</span></span> <span data-ttu-id="a4153-218">Olá primeira URL é tooaccess seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="a4153-218">hello first URL is tooaccess your app.</span></span> <span data-ttu-id="a4153-219">Olá, segundo URL é tooaccess Olá SCM site, o que também é chamado de saudação _console Kudu_.</span><span class="sxs-lookup"><span data-stu-id="a4153-219">hello second URL is tooaccess hello SCM site, which is also called hello _Kudu console_.</span></span> <span data-ttu-id="a4153-220">Os recursos que usam o site SCM Olá incluem:</span><span class="sxs-lookup"><span data-stu-id="a4153-220">Features that use hello SCM site include:</span></span>

-   <span data-ttu-id="a4153-221">Trabalhos da Web</span><span class="sxs-lookup"><span data-stu-id="a4153-221">Web jobs</span></span>
-   <span data-ttu-id="a4153-222">Funções</span><span class="sxs-lookup"><span data-stu-id="a4153-222">Functions</span></span>
-   <span data-ttu-id="a4153-223">Streaming de log</span><span class="sxs-lookup"><span data-stu-id="a4153-223">Log streaming</span></span>
-   <span data-ttu-id="a4153-224">Kudu</span><span class="sxs-lookup"><span data-stu-id="a4153-224">Kudu</span></span>
-   <span data-ttu-id="a4153-225">Extensões</span><span class="sxs-lookup"><span data-stu-id="a4153-225">Extensions</span></span>
-   <span data-ttu-id="a4153-226">Gerenciador de Processos</span><span class="sxs-lookup"><span data-stu-id="a4153-226">Process Explorer</span></span>
-   <span data-ttu-id="a4153-227">Console</span><span class="sxs-lookup"><span data-stu-id="a4153-227">Console</span></span>

<span data-ttu-id="a4153-228">Quando você usa uma ASE ILB, Olá SCM ainda não está acessível de fora da saudação VNet de internet.</span><span class="sxs-lookup"><span data-stu-id="a4153-228">When you use an ILB ASE, hello SCM site isn't internet accessible from outside hello VNet.</span></span> <span data-ttu-id="a4153-229">Quando seu aplicativo está hospedado em uma ASE ILB, alguns recursos não funcionarão no portal de saudação.</span><span class="sxs-lookup"><span data-stu-id="a4153-229">When your app is hosted on an ILB ASE, some capabilities will not work from hello portal.</span></span>  

<span data-ttu-id="a4153-230">Muitos desses recursos que dependem do site SCM Olá também estão disponíveis diretamente no console do Kudu hello.</span><span class="sxs-lookup"><span data-stu-id="a4153-230">Many of those capabilities that depend upon hello SCM site are also available directly in hello Kudu console.</span></span> <span data-ttu-id="a4153-231">Você pode conectar tooit diretamente em vez de por meio do portal de saudação.</span><span class="sxs-lookup"><span data-stu-id="a4153-231">You can connect tooit directly rather than by using hello portal.</span></span> <span data-ttu-id="a4153-232">Se seu aplicativo estiver hospedado em uma ASE ILB, use o toosign credenciais publicação no.</span><span class="sxs-lookup"><span data-stu-id="a4153-232">If your app is hosted in an ILB ASE, use your publishing credentials toosign in.</span></span> <span data-ttu-id="a4153-233">site Olá URL tooaccess Olá SCM de um aplicativo hospedado em uma ASE ILB tem Olá formato a seguir:</span><span class="sxs-lookup"><span data-stu-id="a4153-233">hello URL tooaccess hello SCM site of an app hosted in an ILB ASE has hello following format:</span></span> 

```
<appname>.scm.<domain name hello ILB ASE was created with> 
```

<span data-ttu-id="a4153-234">Se seu ASE ILB é o nome de domínio de saudação *contoso.net* e o nome do aplicativo é *testapp*, aplicativo hello é atingido em *testapp.contoso.net*.</span><span class="sxs-lookup"><span data-stu-id="a4153-234">If your ILB ASE is hello domain name *contoso.net* and your app name is *testapp*, hello app is reached at *testapp.contoso.net*.</span></span> <span data-ttu-id="a4153-235">site SCM Olá que acompanha é atingido em *testapp.scm.contoso.net*.</span><span class="sxs-lookup"><span data-stu-id="a4153-235">hello SCM site that goes with it is reached at *testapp.scm.contoso.net*.</span></span>

### <a name="functions-and-web-jobs"></a><span data-ttu-id="a4153-236">Funções e trabalhos Web</span><span class="sxs-lookup"><span data-stu-id="a4153-236">Functions and Web jobs</span></span> ###

<span data-ttu-id="a4153-237">Funções e Web dependem Olá SCM site mas têm suporte para uso no portal de hello, mesmo que seus aplicativos estejam em uma ASE ILB, contanto que seu navegador pode acessar o site SCM hello.</span><span class="sxs-lookup"><span data-stu-id="a4153-237">Both Functions and Web jobs depend on hello SCM site but are supported for use in hello portal, even if your apps are in an ILB ASE, so long as your browser can reach hello SCM site.</span></span>  <span data-ttu-id="a4153-238">Se você estiver usando um certificado autoassinado com seu ASE ILB, você precisará tooenable seu tootrust de navegador de certificado.</span><span class="sxs-lookup"><span data-stu-id="a4153-238">If you are using a self-signed certificate with your ILB ASE, you will need tooenable your browser tootrust that certificate.</span></span>  <span data-ttu-id="a4153-239">Para o IE e borda que significa que o certificado de saudação tem toobe na relação de confiança de computador Olá armazenar.</span><span class="sxs-lookup"><span data-stu-id="a4153-239">For IE and Edge that means hello certificate has toobe in hello computer trust store.</span></span>  <span data-ttu-id="a4153-240">Se você estiver usando o Chrome, em seguida, o que significa que você aceita o certificado Olá no navegador Olá anteriormente supostamente atingindo o site de scm Olá diretamente.</span><span class="sxs-lookup"><span data-stu-id="a4153-240">If you are using Chrome then that means you accepted hello certificate in hello browser earlier by presumably hitting hello scm site directly.</span></span>  <span data-ttu-id="a4153-241">Olá melhor solução é toouse um certificado comercial na cadeia de confiança do navegador de saudação.</span><span class="sxs-lookup"><span data-stu-id="a4153-241">hello best solution is toouse a commercial certificate that is in hello browser chain of trust.</span></span>  

## <a name="ase-ip-addresses"></a><span data-ttu-id="a4153-242">Endereços IP do ASE</span><span class="sxs-lookup"><span data-stu-id="a4153-242">ASE IP addresses</span></span> ##

<span data-ttu-id="a4153-243">Uma ASE tem alguns toobe de endereços IP atento.</span><span class="sxs-lookup"><span data-stu-id="a4153-243">An ASE has a few IP addresses toobe aware of.</span></span> <span data-ttu-id="a4153-244">Eles são:</span><span class="sxs-lookup"><span data-stu-id="a4153-244">They are:</span></span>

- <span data-ttu-id="a4153-245">**Endereço IP público de entrada**: usado para o tráfego de aplicativo em um ASE externo e o tráfego de gerenciamento em um ASE externo e em um ASE ILB.</span><span class="sxs-lookup"><span data-stu-id="a4153-245">**Public inbound IP address**: Used for app traffic in an External ASE, and management traffic in both an External ASE and an ILB ASE.</span></span>
- <span data-ttu-id="a4153-246">**Saída IP público**: usado como hello "de" IP para conexões de saída do ASE Olá Olá que deixe VNet, que não são roteadas para baixo de uma VPN.</span><span class="sxs-lookup"><span data-stu-id="a4153-246">**Outbound public IP**: Used as hello "from" IP for outbound connections from hello ASE that leave hello VNet, which aren't routed down a VPN.</span></span>
- <span data-ttu-id="a4153-247">**Endereço IP do ILB**: se você usar um ASE ILB.</span><span class="sxs-lookup"><span data-stu-id="a4153-247">**ILB IP address**: If you use an ILB ASE.</span></span>
- <span data-ttu-id="a4153-248">**Endereços SSL com base em IP atribuídos ao aplicativo**: possível somente com um ASE externo e quando o SSL baseado em IP está configurado.</span><span class="sxs-lookup"><span data-stu-id="a4153-248">**App-assigned IP-based SSL addresses**: Only possible with an External ASE and when IP-based SSL is configured.</span></span>

<span data-ttu-id="a4153-249">Todos esses endereços IP são facilmente visíveis em um ASEv2 no portal do Azure de saudação do hello ASE da interface do usuário.</span><span class="sxs-lookup"><span data-stu-id="a4153-249">All these IP addresses are easily visible in an ASEv2 in hello Azure portal from hello ASE UI.</span></span> <span data-ttu-id="a4153-250">Se você tiver uma ASE ILB, IP de Olá Olá ILB está listado.</span><span class="sxs-lookup"><span data-stu-id="a4153-250">If you have an ILB ASE, hello IP for hello ILB is listed.</span></span>

![Endereços IP][3]

### <a name="app-assigned-ip-addresses"></a><span data-ttu-id="a4153-252">Endereços IP atribuídos ao aplicativo</span><span class="sxs-lookup"><span data-stu-id="a4153-252">App-assigned IP addresses</span></span> ###

<span data-ttu-id="a4153-253">Com uma ASE externos, você pode atribuir endereços IP tooindividual aplicativos.</span><span class="sxs-lookup"><span data-stu-id="a4153-253">With an External ASE, you can assign IP addresses tooindividual apps.</span></span> <span data-ttu-id="a4153-254">Você não pode fazer isso com um ASE ILB.</span><span class="sxs-lookup"><span data-stu-id="a4153-254">You can't do that with an ILB ASE.</span></span> <span data-ttu-id="a4153-255">Para obter mais informações sobre como tooconfigure toohave seu aplicativo seu próprio endereço IP, consulte [associar um personalizado SSL certificado tooAzure aplicativos web existentes](../../app-service-web/app-service-web-tutorial-custom-ssl.md).</span><span class="sxs-lookup"><span data-stu-id="a4153-255">For more information on how tooconfigure your app toohave its own IP address, see [Bind an existing custom SSL certificate tooAzure web apps](../../app-service-web/app-service-web-tutorial-custom-ssl.md).</span></span>

<span data-ttu-id="a4153-256">Quando um aplicativo tem seu próprio endereço SSL com base em IP, Olá ASE reserva dois endereços IP portas toomap toothat.</span><span class="sxs-lookup"><span data-stu-id="a4153-256">When an app has its own IP-based SSL address, hello ASE reserves two ports toomap toothat IP address.</span></span> <span data-ttu-id="a4153-257">É uma porta para o tráfego HTTP e hello outra porta é para HTTPS.</span><span class="sxs-lookup"><span data-stu-id="a4153-257">One port is for HTTP traffic, and hello other port is for HTTPS.</span></span> <span data-ttu-id="a4153-258">Essas portas são listadas na Olá ASE da interface do usuário na seção de endereços IP hello.</span><span class="sxs-lookup"><span data-stu-id="a4153-258">Those ports are listed in hello ASE UI in hello IP addresses section.</span></span> <span data-ttu-id="a4153-259">O tráfego deve ser capaz de tooreach essas portas de saudação VIP ou Olá aplicativos não estão acessíveis.</span><span class="sxs-lookup"><span data-stu-id="a4153-259">Traffic must be able tooreach those ports from hello VIP or hello apps are inaccessible.</span></span> <span data-ttu-id="a4153-260">Esse requisito é tooremember importante quando você configura grupos de segurança de rede (NSGs).</span><span class="sxs-lookup"><span data-stu-id="a4153-260">This requirement is important tooremember when you configure Network Security Groups (NSGs).</span></span>

## <a name="network-security-groups"></a><span data-ttu-id="a4153-261">Grupos de segurança de rede</span><span class="sxs-lookup"><span data-stu-id="a4153-261">Network Security Groups</span></span> ##

<span data-ttu-id="a4153-262">[Grupos de segurança de rede] [ NSGs] fornecer acesso à rede toocontrol Olá capacidade dentro de uma rede virtual.</span><span class="sxs-lookup"><span data-stu-id="a4153-262">[Network Security Groups][NSGs] provide hello ability toocontrol network access within a VNet.</span></span> <span data-ttu-id="a4153-263">Quando você usar o portal de hello, há implícita negar regra no hello menor prioridade toodeny tudo.</span><span class="sxs-lookup"><span data-stu-id="a4153-263">When you use hello portal, there's an implicit deny rule at hello lowest priority toodeny everything.</span></span> <span data-ttu-id="a4153-264">O que você cria são suas regras de permissão.</span><span class="sxs-lookup"><span data-stu-id="a4153-264">What you build are your allow rules.</span></span>

<span data-ttu-id="a4153-265">Em uma ASE, você não tem acesso toohello VMs usadas toohost Olá ASE em si.</span><span class="sxs-lookup"><span data-stu-id="a4153-265">In an ASE, you don't have access toohello VMs used toohost hello ASE itself.</span></span> <span data-ttu-id="a4153-266">Elas estão em uma assinatura gerenciada pela Microsoft.</span><span class="sxs-lookup"><span data-stu-id="a4153-266">They're in a Microsoft-managed subscription.</span></span> <span data-ttu-id="a4153-267">Se você quiser toorestrict acesso toohello aplicativos Olá ASE, defina os NSGs na sub-rede do ASE hello.</span><span class="sxs-lookup"><span data-stu-id="a4153-267">If you want toorestrict access toohello apps on hello ASE, set NSGs on hello ASE subnet.</span></span> <span data-ttu-id="a4153-268">Dessa forma, preste muita atenção dependências de ASE toohello.</span><span class="sxs-lookup"><span data-stu-id="a4153-268">In doing so, pay careful attention toohello ASE dependencies.</span></span> <span data-ttu-id="a4153-269">Se você bloquear todas as dependências, Olá ASE para de funcionar.</span><span class="sxs-lookup"><span data-stu-id="a4153-269">If you block any dependencies, hello ASE stops working.</span></span>

<span data-ttu-id="a4153-270">Os NSGs podem ser configurados por meio de saudação portal do Azure ou por meio do PowerShell.</span><span class="sxs-lookup"><span data-stu-id="a4153-270">NSGs can be configured through hello Azure portal or via PowerShell.</span></span> <span data-ttu-id="a4153-271">informações de saudação aqui mostram Olá portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="a4153-271">hello information here shows hello Azure portal.</span></span> <span data-ttu-id="a4153-272">Criar e gerenciar os NSGs no portal de saudação como um recurso de nível superior em **rede**.</span><span class="sxs-lookup"><span data-stu-id="a4153-272">You create and manage NSGs in hello portal as a top-level resource under **Networking**.</span></span>

<span data-ttu-id="a4153-273">Quando hello requisitos de entrada e saídos são levados em conta, Olá NSGs deve ter aparência semelhante NSGs toohello mostrados neste exemplo.</span><span class="sxs-lookup"><span data-stu-id="a4153-273">When hello inbound and outbound requirements are taken into account, hello NSGs should look similar toohello NSGs shown in this example.</span></span> <span data-ttu-id="a4153-274">Olá intervalo de endereços de rede virtual é _192.168.250.0/16_, e é Olá sub-rede Olá ASE em _192.168.251.128/25_.</span><span class="sxs-lookup"><span data-stu-id="a4153-274">hello VNet address range is _192.168.250.0/16_, and hello subnet that hello ASE is in is _192.168.251.128/25_.</span></span>

<span data-ttu-id="a4153-275">requisitos de entrada duas primeiras Olá para Olá ASE toofunction são exibidos na parte superior de saudação da lista Olá neste exemplo.</span><span class="sxs-lookup"><span data-stu-id="a4153-275">hello first two inbound requirements for hello ASE toofunction are shown at hello top of hello list in this example.</span></span> <span data-ttu-id="a4153-276">Eles habilitar o gerenciamento de ASE e permitem Olá ASE toocommunicate com ele mesmo.</span><span class="sxs-lookup"><span data-stu-id="a4153-276">They enable ASE management and allow hello ASE toocommunicate with itself.</span></span> <span data-ttu-id="a4153-277">Olá outras entradas são todos os locatários configurável e podem controlar aplicativos hospedados ASE em rede acesso toohello.</span><span class="sxs-lookup"><span data-stu-id="a4153-277">hello other entries are all tenant configurable and can govern network access toohello ASE-hosted applications.</span></span> 

![Regras de segurança de entrada][4]

<span data-ttu-id="a4153-279">Uma regra padrão permite Olá IPs na sub-rede de ASE Olá VNet tootalk toohello.</span><span class="sxs-lookup"><span data-stu-id="a4153-279">A default rule enables hello IPs in hello VNet tootalk toohello ASE subnet.</span></span> <span data-ttu-id="a4153-280">Outra regra padrão permite que o balanceador de carga hello, também conhecido como VIP público hello, toocommunicate com hello ASE.</span><span class="sxs-lookup"><span data-stu-id="a4153-280">Another default rule enables hello load balancer, also known as hello public VIP, toocommunicate with hello ASE.</span></span> <span data-ttu-id="a4153-281">regras de padrão de saudação toosee, selecione **padrão regras** toohello próximo **adicionar** ícone.</span><span class="sxs-lookup"><span data-stu-id="a4153-281">toosee hello default rules, select **Default rules** next toohello **Add** icon.</span></span> <span data-ttu-id="a4153-282">Se você colocar um deny tudo regra depois Olá NSG regras mostrado, impedir que o tráfego entre Olá VIP e ASE hello.</span><span class="sxs-lookup"><span data-stu-id="a4153-282">If you put a deny everything else rule after hello NSG rules shown, you prevent traffic between hello VIP and hello ASE.</span></span> <span data-ttu-id="a4153-283">tooprevent o tráfego proveniente de dentro Olá VNet, adicione seu próprios tooallow regra entrada.</span><span class="sxs-lookup"><span data-stu-id="a4153-283">tooprevent traffic coming from inside hello VNet, add your own rule tooallow inbound.</span></span> <span data-ttu-id="a4153-284">Usar um tooAzureLoadBalancer igual de origem com um destino de **qualquer** e um intervalo de portas de  **\*** .</span><span class="sxs-lookup"><span data-stu-id="a4153-284">Use a source equal tooAzureLoadBalancer with a destination of **Any** and a port range of **\***.</span></span> <span data-ttu-id="a4153-285">Como regra NSG de saudação é aplicado toohello ASE sub-rede, você não precisa toobe específico no destino hello.</span><span class="sxs-lookup"><span data-stu-id="a4153-285">Because hello NSG rule is applied toohello ASE subnet, you don't need toobe specific in hello destination.</span></span>

<span data-ttu-id="a4153-286">Se você tiver atribuído um aplicativo de tooyour de endereço IP, certifique-se de que manter Olá portas abertas.</span><span class="sxs-lookup"><span data-stu-id="a4153-286">If you assigned an IP address tooyour app, make sure you keep hello ports open.</span></span> <span data-ttu-id="a4153-287">portas de saudação toosee, selecione **ambiente de serviço de aplicativo** > **endereços IP**.</span><span class="sxs-lookup"><span data-stu-id="a4153-287">toosee hello ports, select **App Service Environment** > **IP addresses**.</span></span>  

<span data-ttu-id="a4153-288">Todos os itens de Olá Olá regras de saída a seguir mostrados são necessárias, exceto o último item do hello.</span><span class="sxs-lookup"><span data-stu-id="a4153-288">All hello items shown in hello following outbound rules are needed, except for hello last item.</span></span> <span data-ttu-id="a4153-289">Elas permitem que dependências ASE de toohello de acesso de rede que foram observadas anteriormente neste artigo.</span><span class="sxs-lookup"><span data-stu-id="a4153-289">They enable network access toohello ASE dependencies that were noted earlier in this article.</span></span> <span data-ttu-id="a4153-290">Se você bloquear qualquer uma delas, o ASE deixará de funcionar.</span><span class="sxs-lookup"><span data-stu-id="a4153-290">If you block any of them, your ASE stops working.</span></span> <span data-ttu-id="a4153-291">último o item na lista de Olá Olá permite que seu toocommunicate ASE com outros recursos na sua rede virtual.</span><span class="sxs-lookup"><span data-stu-id="a4153-291">hello last item in hello list enables your ASE toocommunicate with other resources in your VNet.</span></span>

![Regras de segurança de saída][5]

<span data-ttu-id="a4153-293">Depois que seus NSGs são definidas, atribua toohello sub-rede seu ASE em.</span><span class="sxs-lookup"><span data-stu-id="a4153-293">After your NSGs are defined, assign them toohello subnet that your ASE is on.</span></span> <span data-ttu-id="a4153-294">Se você não lembrar Olá ASE redes ou sub-redes, você poderá ver isso Olá ASE do portal de gerenciamento.</span><span class="sxs-lookup"><span data-stu-id="a4153-294">If you don’t remember hello ASE VNet or subnet, you can see it from hello ASE management portal.</span></span> <span data-ttu-id="a4153-295">tooassign Olá subrede tooyour NSG, vá toohello sub-rede da interface do usuário e selecione Olá NSG.</span><span class="sxs-lookup"><span data-stu-id="a4153-295">tooassign hello NSG tooyour subnet, go toohello subnet UI and select hello NSG.</span></span>

## <a name="routes"></a><span data-ttu-id="a4153-296">Rotas</span><span class="sxs-lookup"><span data-stu-id="a4153-296">Routes</span></span> ##

<span data-ttu-id="a4153-297">As rotas costumam se tornar problemáticas principalmente quando você configura a VNet com o Azure ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="a4153-297">Routes become problematic most commonly when you configure your VNet with Azure ExpressRoute.</span></span> <span data-ttu-id="a4153-298">Há três tipos de rotas em uma VNet:</span><span class="sxs-lookup"><span data-stu-id="a4153-298">There are three types of routes in a VNet:</span></span>

-   <span data-ttu-id="a4153-299">Rotas do sistema</span><span class="sxs-lookup"><span data-stu-id="a4153-299">System routes</span></span>
-   <span data-ttu-id="a4153-300">Rotas BGP</span><span class="sxs-lookup"><span data-stu-id="a4153-300">BGP routes</span></span>
-   <span data-ttu-id="a4153-301">UDRs (Rotas Definidas pelo Usuário)</span><span class="sxs-lookup"><span data-stu-id="a4153-301">User-defined routes (UDRs)</span></span>

<span data-ttu-id="a4153-302">Rotas de BGP que substituem as rotas do sistema.</span><span class="sxs-lookup"><span data-stu-id="a4153-302">BGP routes override system routes.</span></span> <span data-ttu-id="a4153-303">UDRs que substituem as rotas de BGP.</span><span class="sxs-lookup"><span data-stu-id="a4153-303">UDRs override BGP routes.</span></span> <span data-ttu-id="a4153-304">Para saber mais sobre rotas em redes virtuais do Azure, confira [Visão geral das rotas definidas pelo usuário][UDRs].</span><span class="sxs-lookup"><span data-stu-id="a4153-304">For more information about routes in Azure virtual networks, see [User-defined routes overview][UDRs].</span></span>

<span data-ttu-id="a4153-305">banco de dados do SQL Azure Olá Olá ASE usa sistema de saudação toomanage tem um firewall.</span><span class="sxs-lookup"><span data-stu-id="a4153-305">hello Azure SQL database that hello ASE uses toomanage hello system has a firewall.</span></span> <span data-ttu-id="a4153-306">Ele requer comunicação toooriginate da saudação VIP público ASE.</span><span class="sxs-lookup"><span data-stu-id="a4153-306">It requires communication toooriginate from hello ASE public VIP.</span></span> <span data-ttu-id="a4153-307">Conexões toohello SQL database do hello ASE será negado se eles são enviados para baixo Olá conexão de rota expressa e outro endereço de IP.</span><span class="sxs-lookup"><span data-stu-id="a4153-307">Connections toohello SQL database from hello ASE will be denied if they are sent down hello ExpressRoute connection and out another IP address.</span></span>

<span data-ttu-id="a4153-308">Se as solicitações de gerenciamento de tooincoming respostas são enviadas Olá rota expressa, endereço de resposta de saudação é diferente de destino original da saudação.</span><span class="sxs-lookup"><span data-stu-id="a4153-308">If replies tooincoming management requests are sent down hello ExpressRoute, hello reply address is different than hello original destination.</span></span> <span data-ttu-id="a4153-309">Essa incompatibilidade interrompe a comunicação TCP hello.</span><span class="sxs-lookup"><span data-stu-id="a4153-309">This mismatch breaks hello TCP communication.</span></span>

<span data-ttu-id="a4153-310">Para sua toowork ASE enquanto sua rede virtual é configurado com uma rota expressa, hello mais fácil coisa toodo é:</span><span class="sxs-lookup"><span data-stu-id="a4153-310">For your ASE toowork while your VNet is configured with an ExpressRoute, hello easiest thing toodo is:</span></span>

-   <span data-ttu-id="a4153-311">Configurar rota expressa tooadvertise _0.0.0.0/0_.</span><span class="sxs-lookup"><span data-stu-id="a4153-311">Configure ExpressRoute tooadvertise _0.0.0.0/0_.</span></span> <span data-ttu-id="a4153-312">Por padrão, ele forçar túneis para todo o tráfego de saída local.</span><span class="sxs-lookup"><span data-stu-id="a4153-312">By default, it force tunnels all outbound traffic on-premises.</span></span>
-   <span data-ttu-id="a4153-313">Crie um UDR.</span><span class="sxs-lookup"><span data-stu-id="a4153-313">Create a UDR.</span></span> <span data-ttu-id="a4153-314">Aplicá-lo a sub-rede toohello que contém a saudação ASE com um prefixo de endereço _0.0.0.0/0_ e um próximo salto tipo de _Internet_.</span><span class="sxs-lookup"><span data-stu-id="a4153-314">Apply it toohello subnet that contains hello ASE with an address prefix of _0.0.0.0/0_ and a next hop type of _Internet_.</span></span>

<span data-ttu-id="a4153-315">Se você fizer essas duas alterações, destinado a internet tráfego originado da sub-rede de ASE Olá não forçado Olá rota expressa e hello ASE funciona.</span><span class="sxs-lookup"><span data-stu-id="a4153-315">If you make these two changes, internet-destined traffic that originates from hello ASE subnet isn't forced down hello ExpressRoute and hello ASE works.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="a4153-316">rotas de saudação definidas em um UDR devem ser precedência tootake específica o suficiente sobre qualquer rotas anunciadas pela configuração de rota expressa hello.</span><span class="sxs-lookup"><span data-stu-id="a4153-316">hello routes defined in a UDR must be specific enough tootake precedence over any routes advertised by hello ExpressRoute configuration.</span></span> <span data-ttu-id="a4153-317">Hello exemplo anterior usa o intervalo de endereços do hello amplo 0.0.0.0/0.</span><span class="sxs-lookup"><span data-stu-id="a4153-317">hello preceding example uses hello broad 0.0.0.0/0 address range.</span></span> <span data-ttu-id="a4153-318">É possível que ele seja acidentalmente substituído pelos anúncios de rota que usam intervalos de endereços mais específicos.</span><span class="sxs-lookup"><span data-stu-id="a4153-318">It can potentially be accidentally overridden by route advertisements that use more specific address ranges.</span></span>
>
> <span data-ttu-id="a4153-319">ASs não têm suporte com as configurações de rota expressa entre-anunciam rotas de saudação emparelhamento público toohello emparelhamento particular caminho.</span><span class="sxs-lookup"><span data-stu-id="a4153-319">ASEs aren't supported with ExpressRoute configurations that cross-advertise routes from hello public-peering path toohello private-peering path.</span></span> <span data-ttu-id="a4153-320">Configurações do ExpressRoute com emparelhamento público configurado recebem anúncios de rota da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="a4153-320">ExpressRoute configurations with public peering configured receive route advertisements from Microsoft.</span></span> <span data-ttu-id="a4153-321">anúncios de saudação contêm um grande conjunto de intervalos de endereços IP do Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="a4153-321">hello advertisements contain a large set of Microsoft Azure IP address ranges.</span></span> <span data-ttu-id="a4153-322">Se os intervalos de endereços Olá entre anunciados no caminho de emparelhamento privado hello, todos os pacotes de saída de rede da sub-rede de saudação do ASE são infraestrutura de rede local do cliente de tooa em túnel de força.</span><span class="sxs-lookup"><span data-stu-id="a4153-322">If hello address ranges are cross-advertised on hello private-peering path, all outbound network packets from hello ASE's subnet are force tunneled tooa customer's on-premises network infrastructure.</span></span> <span data-ttu-id="a4153-323">No momento, não há suporte para esse fluxo de rede com ASEs.</span><span class="sxs-lookup"><span data-stu-id="a4153-323">This network flow is currently not supported with ASEs.</span></span> <span data-ttu-id="a4153-324">Um problema de toothis de solução é toostop as rotas entre publicidade Olá emparelhamento público toohello emparelhamento particular caminho.</span><span class="sxs-lookup"><span data-stu-id="a4153-324">One solution toothis problem is toostop cross-advertising routes from hello public-peering path toohello private-peering path.</span></span>

<span data-ttu-id="a4153-325">toocreate um UDR, siga estas etapas:</span><span class="sxs-lookup"><span data-stu-id="a4153-325">toocreate a UDR, follow these steps:</span></span>

1. <span data-ttu-id="a4153-326">Vá toohello portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="a4153-326">Go toohello Azure portal.</span></span> <span data-ttu-id="a4153-327">Selecione **Rede** > **Tabelas de Rota**.</span><span class="sxs-lookup"><span data-stu-id="a4153-327">Select **Networking** > **Route Tables**.</span></span>

2. <span data-ttu-id="a4153-328">Criar uma nova tabela de rota em Olá mesma região que sua rede virtual.</span><span class="sxs-lookup"><span data-stu-id="a4153-328">Create a new route table in hello same region as your VNet.</span></span>

3. <span data-ttu-id="a4153-329">Dentro da interface do usuário da tabela de rota, selecione **Rotas** > **Adicionar**.</span><span class="sxs-lookup"><span data-stu-id="a4153-329">From within your route table UI, select **Routes** > **Add**.</span></span>

4. <span data-ttu-id="a4153-330">Saudação de conjunto **tipo do próximo salto** muito**Internet** e hello **prefixo de endereço** muito**0.0.0.0/0**.</span><span class="sxs-lookup"><span data-stu-id="a4153-330">Set hello **Next hop type** too**Internet** and hello **Address prefix** too**0.0.0.0/0**.</span></span> <span data-ttu-id="a4153-331">Selecione **Salvar**.</span><span class="sxs-lookup"><span data-stu-id="a4153-331">Select **Save**.</span></span>

    <span data-ttu-id="a4153-332">Você verá algo parecido com hello seguinte:</span><span class="sxs-lookup"><span data-stu-id="a4153-332">You then see something like hello following:</span></span>

    ![Rotas funcionais][6]

5. <span data-ttu-id="a4153-334">Depois de criar a nova tabela de rotas hello, vá toohello sub-rede que contém seu ASE.</span><span class="sxs-lookup"><span data-stu-id="a4153-334">After you create hello new route table, go toohello subnet that contains your ASE.</span></span> <span data-ttu-id="a4153-335">Selecione sua tabela de rotas na lista de saudação do portal hello.</span><span class="sxs-lookup"><span data-stu-id="a4153-335">Select your route table from hello list in hello portal.</span></span> <span data-ttu-id="a4153-336">Depois que você salva a alteração de hello, você deve ver, em seguida, Olá NSGs e rotas anotadas com a sua sub-rede.</span><span class="sxs-lookup"><span data-stu-id="a4153-336">After you save hello change, you should then see hello NSGs and routes noted with your subnet.</span></span>

    ![NSGs e rotas][7]

### <a name="deploy-into-existing-azure-virtual-networks-that-are-integrated-with-expressroute"></a><span data-ttu-id="a4153-338">Implantar em redes virtuais existentes do Azure integradas ao ExpressRoute</span><span class="sxs-lookup"><span data-stu-id="a4153-338">Deploy into existing Azure virtual networks that are integrated with ExpressRoute</span></span> ###

<span data-ttu-id="a4153-339">toodeploy seu ASE em uma rede virtual que esteja integrada com o ExpressRoute, pré-configurar sub-rede Olá onde você deseja ASE Olá implantado.</span><span class="sxs-lookup"><span data-stu-id="a4153-339">toodeploy your ASE into a VNet that's integrated with ExpressRoute, preconfigure hello subnet where you want hello ASE deployed.</span></span> <span data-ttu-id="a4153-340">Em seguida, usar um toodeploy de modelo do Gerenciador de recursos-lo.</span><span class="sxs-lookup"><span data-stu-id="a4153-340">Then use a Resource Manager template toodeploy it.</span></span> <span data-ttu-id="a4153-341">toocreate uma ASE em uma rede virtual que já tenha configurada de rota expressa:</span><span class="sxs-lookup"><span data-stu-id="a4153-341">toocreate an ASE in a VNet that already has ExpressRoute configured:</span></span>

- <span data-ttu-id="a4153-342">Crie uma saudação de toohost sub-rede ASE.</span><span class="sxs-lookup"><span data-stu-id="a4153-342">Create a subnet toohost hello ASE.</span></span>

    > [!NOTE]
    > <span data-ttu-id="a4153-343">Nada mais pode estar na sub-rede Olá mas ASE hello.</span><span class="sxs-lookup"><span data-stu-id="a4153-343">Nothing else can be in hello subnet but hello ASE.</span></span> <span data-ttu-id="a4153-344">Ser toochoose-se de um espaço de endereço que possibilita o crescimento futuro.</span><span class="sxs-lookup"><span data-stu-id="a4153-344">Be sure toochoose an address space that allows for future growth.</span></span> <span data-ttu-id="a4153-345">Você não poderá alterar essa configuração mais tarde.</span><span class="sxs-lookup"><span data-stu-id="a4153-345">You can't change this setting later.</span></span> <span data-ttu-id="a4153-346">Recomendamos um tamanho de `/25`, com 128 endereços.</span><span class="sxs-lookup"><span data-stu-id="a4153-346">We recommend a size of `/25` with 128 addresses.</span></span>

- <span data-ttu-id="a4153-347">Criar UDRs (por exemplo, tabelas de rota), conforme descrito anteriormente e defina que na sub-rede hello.</span><span class="sxs-lookup"><span data-stu-id="a4153-347">Create UDRs (for example, route tables) as described earlier, and set that on hello subnet.</span></span>
- <span data-ttu-id="a4153-348">Criar hello ASE usando um modelo do Gerenciador de recursos, conforme descrito em [criar uma ASE usando um modelo do Gerenciador de recursos][MakeASEfromTemplate].</span><span class="sxs-lookup"><span data-stu-id="a4153-348">Create hello ASE by using a Resource Manager template as described in [Create an ASE by using a Resource Manager template][MakeASEfromTemplate].</span></span>

<!--Image references-->
[1]: ./media/network_considerations_with_an_app_service_environment/networkase-overflow.png
[2]: ./media/network_considerations_with_an_app_service_environment/networkase-overflow2.png
[3]: ./media/network_considerations_with_an_app_service_environment/networkase-ipaddresses.png
[4]: ./media/network_considerations_with_an_app_service_environment/networkase-inboundnsg.png
[5]: ./media/network_considerations_with_an_app_service_environment/networkase-outboundnsg.png
[6]: ./media/network_considerations_with_an_app_service_environment/networkase-udr.png
[7]: ./media/network_considerations_with_an_app_service_environment/networkase-subnet.png

<!--Links-->
[Intro]: ./intro.md
[MakeExternalASE]: ./create-external-ase.md
[MakeASEfromTemplate]: ./create-from-template.md
[MakeILBASE]: ./create-ilb-ase.md
[ASENetwork]: ./network-info.md
[ASEReadme]: ./readme.md
[UsingASE]: ./using-an-ase.md
[UDRs]: ../../virtual-network/virtual-networks-udr-overview.md
[NSGs]: ../../virtual-network/virtual-networks-nsg.md
[ConfigureASEv1]: ../../app-service-web/app-service-web-configure-an-app-service-environment.md
[ASEv1Intro]: ../../app-service-web/app-service-app-service-environment-intro.md
[webapps]: ../../app-service-web/app-service-web-overview.md
[mobileapps]: ../../app-service-mobile/app-service-mobile-value-prop.md
[APIapps]: ../../app-service-api/app-service-api-apps-why-best-platform.md
[Functions]: ../../azure-functions/index.yml
[Pricing]: http://azure.microsoft.com/pricing/details/app-service/
[ARMOverview]: ../../azure-resource-manager/resource-group-overview.md
[ConfigureSSL]: ../../app-service-web/web-sites-purchase-ssl-web-site.md
[Kudu]: http://azure.microsoft.com/resources/videos/super-secret-kudu-debug-console-for-azure-web-sites/
[AppDeploy]: ../../app-service-web/web-sites-deploy.md
[ASEWAF]: ../../app-service-web/app-service-app-service-environment-web-application-firewall.md
[AppGW]: ../../application-gateway/application-gateway-web-application-firewall-overview.md
[ASEManagement]: ./management-addresses.md
