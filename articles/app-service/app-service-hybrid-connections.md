---
title: "Conexões Híbridas do Serviço de Aplicativo do Azure | Microsoft Docs"
description: "Como criar e usar Conexões Híbridas para acessar recursos em redes diferentes"
services: app-service
documentationcenter: 
author: ccompy
manager: stefsch
editor: 
ms.assetid: 66774bde-13f5-45d0-9a70-4e9536a4f619
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/22/2017
ms.author: ccompy
ms.openlocfilehash: fef9e7b280387934cb093f51b4c8aa134a3b87e7
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/11/2017
---
# <a name="azure-app-service-hybrid-connections"></a><span data-ttu-id="76bb9-103">Conexões Híbridas do Serviço de Aplicativo do Azure</span><span class="sxs-lookup"><span data-stu-id="76bb9-103">Azure App Service Hybrid Connections</span></span> #

## <a name="overview"></a><span data-ttu-id="76bb9-104">Visão geral</span><span class="sxs-lookup"><span data-stu-id="76bb9-104">Overview</span></span> ##

<span data-ttu-id="76bb9-105">Conexões Híbridas é um serviço no Azure e uma funcionalidade no Serviço de Aplicativo do Azure.</span><span class="sxs-lookup"><span data-stu-id="76bb9-105">Hybrid Connections is both a service in Azure as well as a feature in the Azure App Service.</span></span>  <span data-ttu-id="76bb9-106">Como um serviço, ele tem uso e recursos além daqueles usados no Serviço de Aplicativo do Azure.</span><span class="sxs-lookup"><span data-stu-id="76bb9-106">As a service it has use and capabilities beyond those that are leveraged in the Azure App Service.</span></span>  <span data-ttu-id="76bb9-107">Para saber mais sobre Conexões Híbridas e seu uso fora do Serviço de Aplicativo do Azure, você pode começar aqui, [Conexões Híbridas de Retransmissão do Azure][HCService]</span><span class="sxs-lookup"><span data-stu-id="76bb9-107">To learn more about Hybrid Connections and their usage outside of the Azure App Service you can start here, [Azure Relay Hybrid Connections][HCService]</span></span>

<span data-ttu-id="76bb9-108">No Serviço de Aplicativo do Azure, as conexões híbridas podem ser usadas para acessar recursos do aplicativo em outras redes.</span><span class="sxs-lookup"><span data-stu-id="76bb9-108">Within the Azure App Service, hybrid connections can be used to access application resources in other networks.</span></span> <span data-ttu-id="76bb9-109">Ele fornece acesso DE seu aplicativo PARA um ponto de extremidade do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="76bb9-109">It provides access FROM your app TO an application endpoint.</span></span>  <span data-ttu-id="76bb9-110">Ele não permite que uma funcionalidade alternativa acesse seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="76bb9-110">It does not enable an alternative capability to access your application.</span></span>  <span data-ttu-id="76bb9-111">Conforme usado no Serviço de Aplicativo, cada conexão híbrida se correlaciona com uma única combinação de host e a porta TCP.</span><span class="sxs-lookup"><span data-stu-id="76bb9-111">As used in the App Service, each hybrid connection correlates to a single TCP host and port combination.</span></span>  <span data-ttu-id="76bb9-112">Isso significa que o ponto de extremidade de conexão híbrida pode estar em qualquer sistema operacional e em qualquer aplicativo, desde que você esteja atingindo uma porta de escuta TCP.</span><span class="sxs-lookup"><span data-stu-id="76bb9-112">This means that the hybrid connection endpoint can be on any operating system and any application provided you are hitting a TCP listening port.</span></span> <span data-ttu-id="76bb9-113">As conexões híbridas não sabem e nem se importam qual é o protocolo de aplicativo ou o que você está acessando.</span><span class="sxs-lookup"><span data-stu-id="76bb9-113">Hybrid connections does not know or care what the application protocol is or what you are accessing.</span></span>  <span data-ttu-id="76bb9-114">Ele simplesmente fornece acesso à rede.</span><span class="sxs-lookup"><span data-stu-id="76bb9-114">It is simply providing network access.</span></span>  


## <a name="how-it-works"></a><span data-ttu-id="76bb9-115">Como ele funciona</span><span class="sxs-lookup"><span data-stu-id="76bb9-115">How it works</span></span> ##
<span data-ttu-id="76bb9-116">A funcionalidade de conexões híbridas consiste em duas chamadas de saída para Retransmissão do Barramento de Serviço.</span><span class="sxs-lookup"><span data-stu-id="76bb9-116">The hybrid connections feature consists of two outbound calls to Service Bus Relay.</span></span>  <span data-ttu-id="76bb9-117">Há uma conexão de uma biblioteca no host em que o aplicativo é executado no Serviço de Aplicativo e, em seguida, há uma conexão do HCM (Gerenciador de Conexão Híbrida) à Retransmissão do Barramento de Serviço.</span><span class="sxs-lookup"><span data-stu-id="76bb9-117">There is a connection from a library on the host where your app is running in the app service and then there is a connection from the Hybrid Connection Manager(HCM) to Service Bus relay.</span></span>  <span data-ttu-id="76bb9-118">O HCM é um serviço de retransmissão que você implanta dentro da hospedagem de rede</span><span class="sxs-lookup"><span data-stu-id="76bb9-118">The HCM is a relay service that you deploy within the network hosting</span></span> 

<span data-ttu-id="76bb9-119">Por meio de duas conexões unidas, seu aplicativo tem um túnel TCP para uma combinação fixa host:porta no outro lado do HCM.</span><span class="sxs-lookup"><span data-stu-id="76bb9-119">Through the two joined connections your app has a TCP tunnel to a fixed host:port combination on the other side of the HCM.</span></span>  <span data-ttu-id="76bb9-120">A conexão usa a TLS 1.2 para segurança e chaves SAS para autenticação/autorização.</span><span class="sxs-lookup"><span data-stu-id="76bb9-120">The connection uses TLS 1.2 for security and SAS keys for authentication/authorization.</span></span>    

![][1]

<span data-ttu-id="76bb9-121">Quando seu aplicativo faz uma solicitação DNS que corresponde a um ponto de extremidade de Conexão Híbrida configurado, o tráfego TCP de saída será redirecionado pela conexão híbrida.</span><span class="sxs-lookup"><span data-stu-id="76bb9-121">When your app makes a DNS request that matches a configure Hybrid Connection endpoint, then the outbound TCP traffic will be redirected down the hybrid connection.</span></span>  

> [!NOTE]
> <span data-ttu-id="76bb9-122">Isso significa que você deve tentar sempre usar um nome DNS para sua Conexão Híbrida.</span><span class="sxs-lookup"><span data-stu-id="76bb9-122">This means that you should try to always use a DNS name for your Hybrid Connection.</span></span>  <span data-ttu-id="76bb9-123">Se em vez disso o ponto de extremidade usar um endereço IP, alguns softwares cliente não farão uma pesquisa de DNS.</span><span class="sxs-lookup"><span data-stu-id="76bb9-123">Some client software does not do a DNS lookup if the endpoint uses an IP address instead.</span></span>
>
>

<span data-ttu-id="76bb9-124">Há dois tipos de conexões híbridas: as novas conexões híbridas, que são oferecidas como um serviço de Retransmissão do Azure, e as Conexões Híbridas do BizTalk, que são mais antigas.</span><span class="sxs-lookup"><span data-stu-id="76bb9-124">There are two types of hybrid connections, the new hybrid connections that are offered as a service under Azure Relay and the older BizTalk Hybrid Connections.</span></span>  <span data-ttu-id="76bb9-125">As Conexões híbridas do BizTalk mais antigas são denominadas Conexões Híbridas Clássicas no portal.</span><span class="sxs-lookup"><span data-stu-id="76bb9-125">The older BizTalk Hybrid Connections are referred to as Classic Hybrid Connections in the portal.</span></span>  <span data-ttu-id="76bb9-126">Há mais informações posteriormente neste documento sobre elas.</span><span class="sxs-lookup"><span data-stu-id="76bb9-126">There is more information later in this document about them.</span></span>

### <a name="app-service-hybrid-connection-benefits"></a><span data-ttu-id="76bb9-127">Benefícios das conexões híbridas do Serviço de Aplicativo</span><span class="sxs-lookup"><span data-stu-id="76bb9-127">App Service hybrid connection benefits</span></span> ###

<span data-ttu-id="76bb9-128">Há uma série de benefícios para a funcionalidade de conexões híbridas, incluindo</span><span class="sxs-lookup"><span data-stu-id="76bb9-128">There are a number of benefits to the hybrid connections capability including</span></span>

- <span data-ttu-id="76bb9-129">Os aplicativos podem acessar serviços e sistemas locais com segurança</span><span class="sxs-lookup"><span data-stu-id="76bb9-129">Apps can securely access on premises systems and services securely</span></span>
- <span data-ttu-id="76bb9-130">a funcionalidade não requer um ponto de extremidade acessível da Internet</span><span class="sxs-lookup"><span data-stu-id="76bb9-130">the feature does not require an internet accessible endpoint</span></span>
- <span data-ttu-id="76bb9-131">é rápido e fácil de configurar</span><span class="sxs-lookup"><span data-stu-id="76bb9-131">it is quick and easy to set up</span></span>  
- <span data-ttu-id="76bb9-132">cada conexão híbrida corresponde a uma única combinação de host: porta, o que é um aspecto de segurança excelente</span><span class="sxs-lookup"><span data-stu-id="76bb9-132">each hybrid connection matches to a single host:port combination which is an excellent security aspect</span></span>
- <span data-ttu-id="76bb9-133">ele normalmente não exige buracos de firewall, já que a saída de todas as conexões ocorre por portas da Web padrão</span><span class="sxs-lookup"><span data-stu-id="76bb9-133">it normally does not require firewall holes as the connections are all outbound over standard web ports</span></span>
- <span data-ttu-id="76bb9-134">já que a funcionalidade é no nível de rede, isso também significa que ele independe do idioma usado pelo seu aplicativo e da tecnologia usada pelo ponto de extremidade</span><span class="sxs-lookup"><span data-stu-id="76bb9-134">because the feature is network level that also means that it is agnostic to the language used by your app and the technology used by the endpoint</span></span>
- <span data-ttu-id="76bb9-135">ele pode ser usado para fornecer acesso em várias redes de um único aplicativo</span><span class="sxs-lookup"><span data-stu-id="76bb9-135">it can be used to provide access in multiple networks from a single app</span></span> 

### <a name="things-you-cannot-do-with-hybrid-connections"></a><span data-ttu-id="76bb9-136">Coisas que você não pode fazer com as Conexões Híbridas</span><span class="sxs-lookup"><span data-stu-id="76bb9-136">Things you cannot do with Hybrid Connections</span></span> ###

<span data-ttu-id="76bb9-137">Há algumas coisas que você não pode fazer com as conexões híbridas e elas incluem:</span><span class="sxs-lookup"><span data-stu-id="76bb9-137">There are a few things you cannot do with hybrid connections and they include:</span></span>

- <span data-ttu-id="76bb9-138">montagem de unidade</span><span class="sxs-lookup"><span data-stu-id="76bb9-138">mounting a drive</span></span>
- <span data-ttu-id="76bb9-139">usar UDP</span><span class="sxs-lookup"><span data-stu-id="76bb9-139">using UDP</span></span>
- <span data-ttu-id="76bb9-140">acessar serviços baseados em TCP que usam portas dinâmicas como um Modo passivo de FTP ou Modo passivo estendido</span><span class="sxs-lookup"><span data-stu-id="76bb9-140">accessing TCP based services that use dynamic ports such as FTP Passive Mode or Extended Passive Mode</span></span>
- <span data-ttu-id="76bb9-141">suporte a LDAP, já que isso às vezes requer UDP</span><span class="sxs-lookup"><span data-stu-id="76bb9-141">LDAP support, as it sometimes requires UDP</span></span>
- <span data-ttu-id="76bb9-142">suporte ao Active Directory</span><span class="sxs-lookup"><span data-stu-id="76bb9-142">Active Directory support</span></span>

## <a name="adding-and-creating-a-hybrid-connection-in-your-app"></a><span data-ttu-id="76bb9-143">Adicionar e criar uma Conexão Híbrida em seu aplicativo</span><span class="sxs-lookup"><span data-stu-id="76bb9-143">Adding and Creating a Hybrid Connection in your App</span></span> ##

<span data-ttu-id="76bb9-144">As Conexões Híbridas podem ser criadas por meio do portal do aplicativo ou do portal do serviço de Conexão Híbrida.</span><span class="sxs-lookup"><span data-stu-id="76bb9-144">Hybrid Connections can be created through the app portal or from the Hybrid Connection service portal.</span></span>  <span data-ttu-id="76bb9-145">É altamente recomendável que você use o portal do aplicativo para criar as Conexões Híbridas que você deseja usar com seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="76bb9-145">It is highly recommended that you use the app portal to create the Hybrid Connections you wish to use with your app.</span></span>  <span data-ttu-id="76bb9-146">Para criar uma Conexão Híbrida, vá para o [Portal do Azure][portal] e acesse a interface do usuário para seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="76bb9-146">To create a Hybrid Connection go to the [Azure portal][portal] and go into the UI for your app.</span></span>  <span data-ttu-id="76bb9-147">Selecione **Rede > Configurar seus pontos de extremidade de conexão híbrida**.</span><span class="sxs-lookup"><span data-stu-id="76bb9-147">Select **Networking > Configure your hybrid connection endpoints**.</span></span>  <span data-ttu-id="76bb9-148">Daqui, você pode ver as Conexões Híbridas configuradas com seu aplicativo</span><span class="sxs-lookup"><span data-stu-id="76bb9-148">From here you can see the Hybrid Connections that are configured with your app</span></span>  

![][2]

<span data-ttu-id="76bb9-149">Para adicionar uma nova Conexão híbrida, clique em Adicionar Conexão Híbrida.</span><span class="sxs-lookup"><span data-stu-id="76bb9-149">To add a new Hybrid Connection, click Add Hybrid Connection.</span></span>  <span data-ttu-id="76bb9-150">A interface do usuário lista as Conexões Híbridas que você já criou.</span><span class="sxs-lookup"><span data-stu-id="76bb9-150">The UI that opens up lists the Hybrid Connections that you have already created.</span></span>  <span data-ttu-id="76bb9-151">Para adicionar uma ou mais delas ao seu aplicativo, clique naqueles que deseja e pressione **Adicionar a conexão híbrida selecionada**.</span><span class="sxs-lookup"><span data-stu-id="76bb9-151">To add one or more of them to your app, click on the ones you want and hit **Add selected hybrid connection**.</span></span>  

![][3]

<span data-ttu-id="76bb9-152">Se você quiser criar uma nova Conexão Híbrida, clique em **criar nova conexão híbrida**.</span><span class="sxs-lookup"><span data-stu-id="76bb9-152">If you want to create a new Hybrid Connection, click **Create new hybrid connection**.</span></span>  <span data-ttu-id="76bb9-153">Aqui você especifica o:</span><span class="sxs-lookup"><span data-stu-id="76bb9-153">From here you specify the:</span></span> 

- <span data-ttu-id="76bb9-154">nome do ponto de extremidade</span><span class="sxs-lookup"><span data-stu-id="76bb9-154">endpoint name</span></span>
- <span data-ttu-id="76bb9-155">nome do host do ponto de extremidade</span><span class="sxs-lookup"><span data-stu-id="76bb9-155">endpoint hostname</span></span>
- <span data-ttu-id="76bb9-156">porta do ponto de extremidade</span><span class="sxs-lookup"><span data-stu-id="76bb9-156">endpoint port</span></span>
- <span data-ttu-id="76bb9-157">namespace do barramento de serviço que você deseja usar</span><span class="sxs-lookup"><span data-stu-id="76bb9-157">servicebus namespace you wish to use</span></span>

![][4]

<span data-ttu-id="76bb9-158">Cada conexão híbrida é associada a um namespace do barramento de serviço e cada namespace do barramento de serviço está em uma região do Azure.</span><span class="sxs-lookup"><span data-stu-id="76bb9-158">Every hybrid connection is tied to a service bus namespace and each service bus namespace is in an Azure region.</span></span>  <span data-ttu-id="76bb9-159">É importante tentar usar um namespace do barramento de serviço na mesma região do seu aplicativo para evitar latência de rede induzida.</span><span class="sxs-lookup"><span data-stu-id="76bb9-159">It is important to try and use a service bus namespace in the same region as your app so as to avoid network induced latency.</span></span>

<span data-ttu-id="76bb9-160">Se você quiser remover sua conexão híbrida do seu aplicativo, clique com o botão direito do mouse nele e selecione **Desconectar**.</span><span class="sxs-lookup"><span data-stu-id="76bb9-160">If you want to remove your hybrid connection from your app, right click on it and select **Disconnect**.</span></span>  

<span data-ttu-id="76bb9-161">Depois que uma conexão híbrida é adicionada ao seu aplicativo Web, você pode apenas clicar sobre ela para ver seus detalhes.</span><span class="sxs-lookup"><span data-stu-id="76bb9-161">Once a hybrid connection is added to your web app, you can see details on it by simply clicking on it.</span></span>  

![][5]

## <a name="hybrid-connections-and-app-service-plans"></a><span data-ttu-id="76bb9-162">Conexões Híbridas e Planos de Serviço de Aplicativo</span><span class="sxs-lookup"><span data-stu-id="76bb9-162">Hybrid Connections and App Service Plans</span></span> ##

<span data-ttu-id="76bb9-163">As únicas conexões híbridas que você pode estabelecer agora são as novas conexões híbridas.</span><span class="sxs-lookup"><span data-stu-id="76bb9-163">The only hybrid connections you can now make are the new hybrid connections.</span></span>  <span data-ttu-id="76bb9-164">Eles só estão disponíveis em SKUs de preço Básico, Standard, Premium e Isolado.</span><span class="sxs-lookup"><span data-stu-id="76bb9-164">They are only available in Basic, Standard, Premium and Isolated pricing SKUs.</span></span>  <span data-ttu-id="76bb9-165">Há limites vinculados ao plano de preços.</span><span class="sxs-lookup"><span data-stu-id="76bb9-165">There are limits tied to the pricing plan.</span></span>  

| <span data-ttu-id="76bb9-166">Plano de Preços</span><span class="sxs-lookup"><span data-stu-id="76bb9-166">Pricing Plan</span></span> | <span data-ttu-id="76bb9-167">Número de conexões híbridas utilizáveis no plano</span><span class="sxs-lookup"><span data-stu-id="76bb9-167">Number of hybrid connections usable in the plan</span></span> |
|----|----|
| <span data-ttu-id="76bb9-168">Basic</span><span class="sxs-lookup"><span data-stu-id="76bb9-168">Basic</span></span> | <span data-ttu-id="76bb9-169">5</span><span class="sxs-lookup"><span data-stu-id="76bb9-169">5</span></span> |
| <span data-ttu-id="76bb9-170">Standard</span><span class="sxs-lookup"><span data-stu-id="76bb9-170">Standard</span></span> | <span data-ttu-id="76bb9-171">25</span><span class="sxs-lookup"><span data-stu-id="76bb9-171">25</span></span> |
| <span data-ttu-id="76bb9-172">Premium</span><span class="sxs-lookup"><span data-stu-id="76bb9-172">Premium</span></span> | <span data-ttu-id="76bb9-173">200</span><span class="sxs-lookup"><span data-stu-id="76bb9-173">200</span></span> |
| <span data-ttu-id="76bb9-174">Isolado</span><span class="sxs-lookup"><span data-stu-id="76bb9-174">Isolated</span></span> | <span data-ttu-id="76bb9-175">200</span><span class="sxs-lookup"><span data-stu-id="76bb9-175">200</span></span> |

<span data-ttu-id="76bb9-176">Já que há restrições do Plano do Serviço de Aplicativo, também há uma interface do usuário no Plano do Serviço de Aplicativo que mostra quantas conexões híbridas estão sendo usadas e por quais aplicativos.</span><span class="sxs-lookup"><span data-stu-id="76bb9-176">Since there are App Service Plan restrictions there is also UI in the App Service Plan that shows you how many hybrid connections are being used and by what apps.</span></span>  

![][6]

<span data-ttu-id="76bb9-177">Assim como ocorre com o modo de exibição do aplicativo, você pode ver detalhes sobre sua conexão híbrida clicando nela.</span><span class="sxs-lookup"><span data-stu-id="76bb9-177">Just as with the app view, you can see details on your hybrid connection by clicking on it.</span></span>  <span data-ttu-id="76bb9-178">Nas propriedades mostradas aqui, você pode ver todas as informações que você tinha no modo de exibição do aplicativo, mas também pode ver quantos outros aplicativos no mesmo Plano do Serviço de Aplicativo estão usando essa conexão híbrida.</span><span class="sxs-lookup"><span data-stu-id="76bb9-178">In the properties shown here you can see all the information you had at the app view but can also see how many other apps in the same App Service Plan are using that hybrid connection.</span></span>

![][7]

<span data-ttu-id="76bb9-179">Embora haja um limite no número de pontos de extremidade de conexão híbrida que podem ser usados em um Plano do Serviço de Aplicativo, cada conexão híbrida usada pode ser usada entre qualquer número de aplicativos nesse Plano do Serviço de Aplicativo.</span><span class="sxs-lookup"><span data-stu-id="76bb9-179">While there is a limit on the number of hybrid connection endpoints that can be used in an App Service Plan, each hybrid connection used can be used across any number of apps in that App Service Plan.</span></span>  <span data-ttu-id="76bb9-180">Isso quer dizer que, se eu tivesse uma conexão híbrida que usasse em cinco aplicativos separados no meu Plano do Serviço de Aplicativo, trataria-se ainda de apenas uma conexão híbrida.</span><span class="sxs-lookup"><span data-stu-id="76bb9-180">That is to say that if I had 1 hybrid connection that I used in 5 separate apps in my App Service Plan, that is still just 1 hybrid connection.</span></span>

<span data-ttu-id="76bb9-181">Há um custo adicional para conexões híbridas que vai além de apenas serem utilizáveis em um SKU Básico, Standard, Premium ou Isolado.</span><span class="sxs-lookup"><span data-stu-id="76bb9-181">There is an additional cost to hybrid connections beyond being only usable in a Basic, Standard, Premium or Isolated SKU.</span></span>  <span data-ttu-id="76bb9-182">Para obter detalhes sobre preços de conexão híbrida, veja aqui: [Preços do Barramento de Serviço][sbpricing].</span><span class="sxs-lookup"><span data-stu-id="76bb9-182">For details on hybrid connection pricing please go here: [Service Bus pricing][sbpricing].</span></span>

## <a name="hybrid-connection-manager"></a><span data-ttu-id="76bb9-183">Gerenciador de Conexão Híbrida</span><span class="sxs-lookup"><span data-stu-id="76bb9-183">Hybrid Connection Manager</span></span> ##

<span data-ttu-id="76bb9-184">Para que as conexões híbridas funcionem, você precisa de um agente de retransmissão na rede que hospede o seu ponto de extremidade de conexão híbrida.</span><span class="sxs-lookup"><span data-stu-id="76bb9-184">In order for hybrid connections to work you need a relay agent in the network that hosts your hybrid connection endpoint.</span></span>  <span data-ttu-id="76bb9-185">Esse agente de retransmissão é chamado de HCM (Gerenciador de Conexão Híbrida).</span><span class="sxs-lookup"><span data-stu-id="76bb9-185">That relay agent is called the Hybrid Connection Manager (HCM).</span></span>  <span data-ttu-id="76bb9-186">Essa ferramenta pode ser baixada da interface do usuário **Rede > Configurar seus pontos de extremidade de conexão híbrida** disponível no seu aplicativo no [Portal do Azure][portal].</span><span class="sxs-lookup"><span data-stu-id="76bb9-186">This tool can be downloaded from the **Networking > Configure your hybrid connection endpoints** UI available from your app in the [Azure portal][portal].</span></span>  

<span data-ttu-id="76bb9-187">Essa ferramenta é executada no Windows Server 2008 R2 e versões posteriores do Windows.</span><span class="sxs-lookup"><span data-stu-id="76bb9-187">This tool runs on Windows server 2008 R2 and later versions of Windows.</span></span>  <span data-ttu-id="76bb9-188">Uma vez instalado, o HCM executa como um serviço.</span><span class="sxs-lookup"><span data-stu-id="76bb9-188">Once installed the HCM runs as a service.</span></span>  <span data-ttu-id="76bb9-189">Esse serviço se conecta à retransmissão do Barramento de Serviço do Azure com base nos pontos de extremidade configurados.</span><span class="sxs-lookup"><span data-stu-id="76bb9-189">This service connects to Azure servicebus relay based on the configured endpoints.</span></span>  <span data-ttu-id="76bb9-190">As saída das conexões provenientes do HCM destinam-se às portas 80 e 443.</span><span class="sxs-lookup"><span data-stu-id="76bb9-190">The connections from the HCM are outbound to ports 80 and 443.</span></span>    

<span data-ttu-id="76bb9-191">A HCM tem uma interface do usuário para configurá-la.</span><span class="sxs-lookup"><span data-stu-id="76bb9-191">The HCM has a UI to configure it.</span></span>  <span data-ttu-id="76bb9-192">Após o HCM ser instalado, você poderá exibir a interface do usuário executando o HybridConnectionManagerUi.exe que fica no diretório de instalação do Gerenciador de Conexão Híbrida.</span><span class="sxs-lookup"><span data-stu-id="76bb9-192">After the HCM is installed you can bring up the UI by running the HybridConnectionManagerUi.exe that sits in the Hybrid Connection Manager installation directory.</span></span>  <span data-ttu-id="76bb9-193">Ela também pode ser facilmente acessada no Windows 10 digitando *Interface do usuário do Gerenciador de Conexões Híbridas* na caixa de pesquisa.</span><span class="sxs-lookup"><span data-stu-id="76bb9-193">It is also easily reached on Windows 10 by typing *Hybrid Connection Manager UI* in your search box.</span></span>  

<span data-ttu-id="76bb9-194">Quando a interface do usuário do HCM é iniciada, a primeira coisa que você vê é uma tabela que lista todas as conexões híbridas configuradas com esta instância do HCM.</span><span class="sxs-lookup"><span data-stu-id="76bb9-194">When the HCM UI is started, the first thing you see is a table that lists all of the hybrid connections that are configured with this instance of the HCM.</span></span>  <span data-ttu-id="76bb9-195">Se você quiser fazer alterações, você precisará autenticar com o Azure.</span><span class="sxs-lookup"><span data-stu-id="76bb9-195">If you wish to make any changes you will need to authenticate with Azure.</span></span> 

<span data-ttu-id="76bb9-196">Para adicionar uma ou mais Conexões Híbridas a seu HCM:</span><span class="sxs-lookup"><span data-stu-id="76bb9-196">To add one or more Hybrid Connections to your HCM:</span></span>

1. <span data-ttu-id="76bb9-197">Inicie a interface do usuário do HCM</span><span class="sxs-lookup"><span data-stu-id="76bb9-197">Start the HCM UI</span></span>
1. <span data-ttu-id="76bb9-198">Clique em configurar outra conexão híbrida ![][8]</span><span class="sxs-lookup"><span data-stu-id="76bb9-198">Click Configure another hybrid connection ![][8]</span></span>

1. <span data-ttu-id="76bb9-199">Entre com sua conta do Azure</span><span class="sxs-lookup"><span data-stu-id="76bb9-199">Sign in with your Azure account</span></span>
1. <span data-ttu-id="76bb9-200">Escolha uma assinatura</span><span class="sxs-lookup"><span data-stu-id="76bb9-200">Choose a subscription</span></span>
1. <span data-ttu-id="76bb9-201">Clique nas conexões híbridas que você deseja que este HCM retransmita ![][9]</span><span class="sxs-lookup"><span data-stu-id="76bb9-201">Click on the hybrid connections you want this HCM to relay ![][9]</span></span>

1. <span data-ttu-id="76bb9-202">Clique em Salvar</span><span class="sxs-lookup"><span data-stu-id="76bb9-202">Click Save</span></span>

<span data-ttu-id="76bb9-203">Neste ponto, você verá as conexões híbridas que você adicionou.</span><span class="sxs-lookup"><span data-stu-id="76bb9-203">At this point you will see the hybrid connections you added.</span></span>  <span data-ttu-id="76bb9-204">Você também pode clicar na conexão híbrida configurada e ver detalhes sobre ela.</span><span class="sxs-lookup"><span data-stu-id="76bb9-204">You can also click on the configured hybrid connection and see details about the connection.</span></span>

![][10]

<span data-ttu-id="76bb9-205">Para que o HCM possa dar suporte às conexões híbridas com as quais ele é configurado, ele precisará de:</span><span class="sxs-lookup"><span data-stu-id="76bb9-205">For your HCM to be able to support the hybrid connections it is configured with, it needs:</span></span>

- <span data-ttu-id="76bb9-206">Acesso TCP ao Azure nas portas 80 e 443</span><span class="sxs-lookup"><span data-stu-id="76bb9-206">TCP access to Azure over ports 80 and 443</span></span>
- <span data-ttu-id="76bb9-207">Acesso TCP ao ponto de extremidade de conexão híbrida</span><span class="sxs-lookup"><span data-stu-id="76bb9-207">TCP access to the hybrid connection endpoint</span></span>
- <span data-ttu-id="76bb9-208">capacidade de fazer pesquisas de DNS no host do ponto de extremidade e no namespace do Barramento de Serviço do Azure</span><span class="sxs-lookup"><span data-stu-id="76bb9-208">ability to do DNS look ups on the endpoint host and the azure servicebus namespace</span></span>

<span data-ttu-id="76bb9-209">O HCM dá suporte tanto às novas conexões híbridas quanto às conexões híbridas do BizTalk mais antigas.</span><span class="sxs-lookup"><span data-stu-id="76bb9-209">The HCM supports both new hybrid connections as well as the older BizTalk hybrid connections.</span></span>

### <a name="redundancy"></a><span data-ttu-id="76bb9-210">Redundância</span><span class="sxs-lookup"><span data-stu-id="76bb9-210">Redundancy</span></span> ###

<span data-ttu-id="76bb9-211">Cada HCM pode dar suporte a várias conexões híbridas.</span><span class="sxs-lookup"><span data-stu-id="76bb9-211">Each HCM can support multiple hybrid connections.</span></span>  <span data-ttu-id="76bb9-212">Além disso, qualquer determinada conexão híbrida pode ter suporte de vários HCMs.</span><span class="sxs-lookup"><span data-stu-id="76bb9-212">Also, any given hybrid connection can be supported by multiple HCMs.</span></span>  <span data-ttu-id="76bb9-213">O comportamento padrão é transferir o tráfego pelo método round robin pelos HCMs configurados para qualquer determinado ponto de extremidade.</span><span class="sxs-lookup"><span data-stu-id="76bb9-213">The default behavior is to round robin traffic across the configured HCMs for any given endpoint.</span></span>  <span data-ttu-id="76bb9-214">Se desejar alta disponibilidade nas conexões híbridas da rede, basta instanciar vários HCMs em computadores separados.</span><span class="sxs-lookup"><span data-stu-id="76bb9-214">If you want high availability on your hybrid connections from your network, simply instantiate multiple HCMs on separate machines.</span></span> 

### <a name="manually-adding-a-hybrid-connection"></a><span data-ttu-id="76bb9-215">Adicionar uma conexão híbrida manualmente</span><span class="sxs-lookup"><span data-stu-id="76bb9-215">Manually adding a hybrid connection</span></span> ###

<span data-ttu-id="76bb9-216">Se desejar que alguém fora da sua assinatura hospede uma instância HCM para uma determinada conexão híbrida, você poderá compartilhar com eles a cadeia de conexão de gateway para a conexão híbrida.</span><span class="sxs-lookup"><span data-stu-id="76bb9-216">If you wish somebody outside of your subscription to host an HCM instance for a given hybrid connection, you can share with them the gateway connection string for the hybrid connection.</span></span>  <span data-ttu-id="76bb9-217">Você pode ver isso nas propriedades de uma conexão híbrida no [Portal do Azure][portal].</span><span class="sxs-lookup"><span data-stu-id="76bb9-217">You can see this in the properties for a hybrid connection in the [Azure portal][portal].</span></span> <span data-ttu-id="76bb9-218">Para usar essa cadeia de caracteres, clique no botão **Configurar manualmente** no HCM e cole-o na cadeia de conexão de gateway.</span><span class="sxs-lookup"><span data-stu-id="76bb9-218">To use that string, click the **Configure manually** button in the HCM and paste in the gateway connection string.</span></span>


## <a name="troubleshooting"></a><span data-ttu-id="76bb9-219">Solucionar problemas</span><span class="sxs-lookup"><span data-stu-id="76bb9-219">Troubleshooting</span></span> ##

<span data-ttu-id="76bb9-220">Quando sua conexão híbrida é configurada com um aplicativo em execução e há pelo menos um HCM com essa conexão híbrida configurada, o status indicará **Conectado** no portal.</span><span class="sxs-lookup"><span data-stu-id="76bb9-220">When your hybrid connection is set up with a running application and there is at least one HCM that has that hybrid connection configured, then the status will say **Connected** in the portal.</span></span>  <span data-ttu-id="76bb9-221">Se ele não informa **Conectado**, isso significa que seu aplicativo está inativo ou o HCM não pode realizar uma conexão de saída para o Azure nas portas 80 ou 443.</span><span class="sxs-lookup"><span data-stu-id="76bb9-221">If it does not say **Connected** then it means that either your app is down or your HCM cannot connect out to Azure on ports 80 or 443.</span></span>  

<span data-ttu-id="76bb9-222">O principal motivo pelo qual os clientes não podem se conectar ao ponto de extremidade é porque o ponto de extremidade foi especificado usando um endereço IP em vez de um nome DNS.</span><span class="sxs-lookup"><span data-stu-id="76bb9-222">The primary reason that clients cannot connect to their endpoint is because the endpoint was specified using an IP address instead of a DNS name.</span></span>  <span data-ttu-id="76bb9-223">Se seu aplicativo não puder acessar o ponto de extremidade desejado e você tiver usado um endereço IP, mude e passe a usar um nome DNS válido no host em que o HCM está em execução.</span><span class="sxs-lookup"><span data-stu-id="76bb9-223">If your app cannot reach the desired endpoint and you used an IP address, switch to using a DNS name that is valid on the host where the HCM is running.</span></span>  <span data-ttu-id="76bb9-224">Outros itens a serem verificados são que o nome DNS seja resolvido corretamente no host em que a HCM está em execução e que haja conectividade do host em que a HCM está em execução para o ponto de extremidade de conexão híbrida.</span><span class="sxs-lookup"><span data-stu-id="76bb9-224">Other things to check are that the DNS name resolves properly on the host where the HCM is running and that there is connectivity from the host where the HCM is running to the hybrid connection endpoint.</span></span>  

<span data-ttu-id="76bb9-225">Há uma ferramenta no Serviço de Aplicativo que pode ser invocada por meio do console, chamada tcpping.</span><span class="sxs-lookup"><span data-stu-id="76bb9-225">There is a tool in the App Service that can be invoked from the console called tcpping.</span></span>  <span data-ttu-id="76bb9-226">Essa ferramenta pode informar se você tem acesso a um ponto de extremidade TCP, mas não lhe diz se você tem acesso a um ponto de extremidade de conexão híbrida.</span><span class="sxs-lookup"><span data-stu-id="76bb9-226">This tool can tell you if you have access to a TCP endpoint but does not tell you if you have access to a hybrid connection endpoint.</span></span>  <span data-ttu-id="76bb9-227">Quando usado no console em relação a um ponto de extremidade de conexão híbrida, um ping bem-sucedido apenas informará que você tem uma conexão híbrida configurada para o aplicativo que usa essa combinação de host:porta.</span><span class="sxs-lookup"><span data-stu-id="76bb9-227">When used in the console against a hybrid connection endpoint, a successful ping will only tell you that you have a hybrid connection configured for your app that uses that host:port combination.</span></span>  

## <a name="biztalk-hybrid-connections"></a><span data-ttu-id="76bb9-228">Conexões Híbridas do BizTalk</span><span class="sxs-lookup"><span data-stu-id="76bb9-228">BizTalk Hybrid Connections</span></span> ##

<span data-ttu-id="76bb9-229">A funcionalidade Conexões Híbridas antiga do BizTalk foi encerrada no que se refere a criações futuras de Conexões Híbridas do BizTalk.</span><span class="sxs-lookup"><span data-stu-id="76bb9-229">The older BizTalk Hybrid Connections capability has been closed off to further BizTalk Hybrid Connection creations.</span></span>  <span data-ttu-id="76bb9-230">Você pode continuar usando as Conexões Híbridas do BizTalk preexistentes com seus aplicativos, mas deve migrar para o novo serviço.</span><span class="sxs-lookup"><span data-stu-id="76bb9-230">You can continue using your preexisting BizTalk Hybrid Connections with your apps but should migrate to the new service.</span></span>  <span data-ttu-id="76bb9-231">Entre os benefícios no novo serviço em relação à versão do BizTalk, estão:</span><span class="sxs-lookup"><span data-stu-id="76bb9-231">Among the benefits in the new service over the BizTalk version are:</span></span>

- <span data-ttu-id="76bb9-232">nenhuma conta adicional do BizTalk é necessária</span><span class="sxs-lookup"><span data-stu-id="76bb9-232">no additional BizTalk account is required</span></span>
- <span data-ttu-id="76bb9-233">O TLS é 1.2 em vez do 1.0, o qual é usado nas Conexões Híbridas do BizTalk</span><span class="sxs-lookup"><span data-stu-id="76bb9-233">TLS is 1.2 instead of 1.0 as in BizTalk Hybrid Connections</span></span>
- <span data-ttu-id="76bb9-234">A comunicação é pelas portas 80 e 443 e usa um nome DNS para acessar o Azure, em vez de usar endereços IP e uma variedade de outras portas.</span><span class="sxs-lookup"><span data-stu-id="76bb9-234">Communication is over ports 80 and 443 using a DNS name to reach Azure instead of IP addresses and a range of additional other ports.</span></span>  

<span data-ttu-id="76bb9-235">Para adicionar uma Conexão Híbrida do BizTalk ao seu aplicativo, vá para seu aplicativo no [Portal do Azure][portal] e clique em **Rede > Configurar seus pontos de extremidade de conexão híbrida**.</span><span class="sxs-lookup"><span data-stu-id="76bb9-235">To add a BizTalk hybrid connection to your app, go to your app in the [Azure portal][portal] and click **Networking > Configure your hybrid connection endpoints**.</span></span>  <span data-ttu-id="76bb9-236">Na tabela de conexões híbridas clássicas, clique em **Adicionar conexão híbrida clássica**.</span><span class="sxs-lookup"><span data-stu-id="76bb9-236">In the Classic hybrid connections table click **Add classic hybrid connection**.</span></span>  <span data-ttu-id="76bb9-237">Daqui em diante, você verá uma lista das conexões híbridas do BizTalk.</span><span class="sxs-lookup"><span data-stu-id="76bb9-237">From here you will see a list of your BizTalk hybrid connections.</span></span>  


<!--Image references-->
[1]: ./media/app-service-hybrid-connections/hybridconn-connectiondiagram.png
[2]: ./media/app-service-hybrid-connections/hybridconn-portal.png
[3]: ./media/app-service-hybrid-connections/hybridconn-addhc.png
[4]: ./media/app-service-hybrid-connections/hybridconn-createhc.png
[5]: ./media/app-service-hybrid-connections/hybridconn-properties.png
[6]: ./media/app-service-hybrid-connections/hybridconn-aspproperties.png
[7]: ./media/app-service-hybrid-connections/hybridconn-hcm.png
[8]: ./media/app-service-hybrid-connections/hybridconn-hcmadd.png
[9]: ./media/app-service-hybrid-connections/hybridconn-hcmadded.png
[10]: ./media/app-service-hybrid-connections/hybridconn-hcmdetails.png

<!--Links-->
[HCService]: http://docs.microsoft.com/azure/service-bus-relay/relay-hybrid-connections-protocol/
[portal]: http://portal.azure.com/
[oldhc]: http://docs.microsoft.com/azure/biztalk-services/integration-hybrid-connection-overview/
[sbpricing]: http://azure.microsoft.com/pricing/details/service-bus/

