---
title: "Portal do Azure - Gateway de aplicativo do Azure - investigação de aaaCreate um personalizado | Microsoft Docs"
description: "Saiba como toocreate um personalizado teste para o Application Gateway usando o portal de saudação"
services: application-gateway
documentationcenter: na
author: georgewallace
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 33fd5564-43a7-4c54-a9ec-b1235f661f97
ms.service: application-gateway
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 04/26/2017
ms.author: gwallace
ms.openlocfilehash: 9e9309045ef33ba1010868783949b4fde31619ec
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="create-a-custom-probe-for-application-gateway-by-using-hello-portal"></a><span data-ttu-id="181df-103">Criar uma investigação personalizada para o Application Gateway usando o portal de saudação</span><span class="sxs-lookup"><span data-stu-id="181df-103">Create a custom probe for Application Gateway by using hello portal</span></span>

> [!div class="op_single_selector"]
> * [<span data-ttu-id="181df-104">Portal do Azure</span><span class="sxs-lookup"><span data-stu-id="181df-104">Azure portal</span></span>](application-gateway-create-probe-portal.md)
> * [<span data-ttu-id="181df-105">PowerShell do Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="181df-105">Azure Resource Manager PowerShell</span></span>](application-gateway-create-probe-ps.md)
> * [<span data-ttu-id="181df-106">Azure Classic PowerShell</span><span class="sxs-lookup"><span data-stu-id="181df-106">Azure Classic PowerShell</span></span>](application-gateway-create-probe-classic-ps.md)

<span data-ttu-id="181df-107">Neste artigo, adicionar um gateway de aplicativo existente do investigação personalizada tooan por meio de saudação portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="181df-107">In this article, you add a custom probe tooan existing application gateway through hello Azure portal.</span></span> <span data-ttu-id="181df-108">Testes personalizados são úteis para aplicativos que têm uma página de verificação de integridade específicas ou para aplicativos que não fornecem uma resposta bem-sucedida no aplicativo de web saudação padrão.</span><span class="sxs-lookup"><span data-stu-id="181df-108">Custom probes are useful for applications that have a specific health check page or for applications that do not provide a successful response on hello default web application.</span></span>

## <a name="before-you-begin"></a><span data-ttu-id="181df-109">Antes de começar</span><span class="sxs-lookup"><span data-stu-id="181df-109">Before you begin</span></span>

<span data-ttu-id="181df-110">Se você não tiver um gateway de aplicativos, visite [criar um Application Gateway](application-gateway-create-gateway-portal.md) toocreate um toowork de gateway do aplicativo com.</span><span class="sxs-lookup"><span data-stu-id="181df-110">If you do not already have an application gateway, visit [Create an Application Gateway](application-gateway-create-gateway-portal.md) toocreate an application gateway toowork with.</span></span>

## <span data-ttu-id="181df-111"><a name="createprobe"></a>Criar a investigação de saudação</span><span class="sxs-lookup"><span data-stu-id="181df-111"><a name="createprobe"></a>Create hello probe</span></span>

<span data-ttu-id="181df-112">Testes são configurados em um processo de duas etapas por meio do portal hello.</span><span class="sxs-lookup"><span data-stu-id="181df-112">Probes are configured in a two-step process through hello portal.</span></span> <span data-ttu-id="181df-113">Olá primeira etapa é toocreate investigação de saudação.</span><span class="sxs-lookup"><span data-stu-id="181df-113">hello first step is toocreate hello probe.</span></span> <span data-ttu-id="181df-114">Na segunda etapa do hello, você deve adicionar configurações de http de back-end Olá investigação toohello do gateway de aplicativo hello.</span><span class="sxs-lookup"><span data-stu-id="181df-114">In hello second step, you add hello probe toohello backend http settings of hello application gateway.</span></span>

1. <span data-ttu-id="181df-115">Faça logon no toohello [portal do Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="181df-115">Log in toohello [Azure portal](https://portal.azure.com).</span></span> <span data-ttu-id="181df-116">Caso você ainda não tenha uma conta, poderá se inscrever para obter uma [avaliação gratuita de um mês](https://azure.microsoft.com/free)</span><span class="sxs-lookup"><span data-stu-id="181df-116">If you don't already have an account, you can sign up for a [free one-month trial](https://azure.microsoft.com/free)</span></span>

1. <span data-ttu-id="181df-117">No hello portal do Azure painel Favoritos, clique em todos os recursos.</span><span class="sxs-lookup"><span data-stu-id="181df-117">In hello Azure portal Favorites pane, click All resources.</span></span> <span data-ttu-id="181df-118">Clique em Olá application gateway em Olá folha de todos os recursos.</span><span class="sxs-lookup"><span data-stu-id="181df-118">Click hello application gateway in hello All resources blade.</span></span> <span data-ttu-id="181df-119">Se a assinatura de saudação selecionado já contiver vários recursos, você pode inserir partners.contoso.net Olá filtrar por nome...</span><span class="sxs-lookup"><span data-stu-id="181df-119">If hello subscription you selected already has several resources in it, you can enter partners.contoso.net in hello Filter by name…</span></span> <span data-ttu-id="181df-120">gateway de caixa tooeasily acesso Olá aplicativo.</span><span class="sxs-lookup"><span data-stu-id="181df-120">box tooeasily access hello application gateway.</span></span>

1. <span data-ttu-id="181df-121">Clique em **testes** e clique em Olá **adicionar** botão tooadd uma investigação.</span><span class="sxs-lookup"><span data-stu-id="181df-121">Click **Probes** and click hello **Add** button tooadd a probe.</span></span>

  ![Folha Adicionar Investigação com as informações preenchidas][1]

1. <span data-ttu-id="181df-123">Em Olá **investigação de integridade de adicionar** folha, preencha as informações para investigação Olá Olá necessário e quando concluir clique **Okey**.</span><span class="sxs-lookup"><span data-stu-id="181df-123">On hello **Add health probe** blade, fill out hello required information for hello probe, and when complete click **OK**.</span></span>

  |<span data-ttu-id="181df-124">**Configuração**</span><span class="sxs-lookup"><span data-stu-id="181df-124">**Setting**</span></span> | <span data-ttu-id="181df-125">**Valor**</span><span class="sxs-lookup"><span data-stu-id="181df-125">**Value**</span></span> | <span data-ttu-id="181df-126">**Detalhes**</span><span class="sxs-lookup"><span data-stu-id="181df-126">**Details**</span></span>|
  |---|---|---|
  |<span data-ttu-id="181df-127">**Nome**</span><span class="sxs-lookup"><span data-stu-id="181df-127">**Name**</span></span>|<span data-ttu-id="181df-128">customProbe</span><span class="sxs-lookup"><span data-stu-id="181df-128">customProbe</span></span>|<span data-ttu-id="181df-129">Esse valor é um teste de toohello nome amigável que pode ser acessado no portal de saudação.</span><span class="sxs-lookup"><span data-stu-id="181df-129">This value is a friendly name toohello probe that is accessible in hello portal.</span></span>|
  |<span data-ttu-id="181df-130">**Protocolo**</span><span class="sxs-lookup"><span data-stu-id="181df-130">**Protocol**</span></span>|<span data-ttu-id="181df-131">HTTP ou HTTPS</span><span class="sxs-lookup"><span data-stu-id="181df-131">HTTP or HTTPS</span></span> | <span data-ttu-id="181df-132">usa o protocolo de Olá Olá investigação de integridade.</span><span class="sxs-lookup"><span data-stu-id="181df-132">hello protocol that hello health probe uses.</span></span>|
  |<span data-ttu-id="181df-133">**Host**</span><span class="sxs-lookup"><span data-stu-id="181df-133">**Host**</span></span>|<span data-ttu-id="181df-134">ou seja</span><span class="sxs-lookup"><span data-stu-id="181df-134">i.e</span></span> <span data-ttu-id="181df-135">contoso.com</span><span class="sxs-lookup"><span data-stu-id="181df-135">contoso.com</span></span>|<span data-ttu-id="181df-136">Esse valor é o nome de host de saudação que é usada para teste de saudação.</span><span class="sxs-lookup"><span data-stu-id="181df-136">This value is hello host name that is used for hello probe.</span></span> <span data-ttu-id="181df-137">Aplicável somente quando vários sites são configurados no Gateway de Aplicativo; do contrário, use '127.0.0.1'.</span><span class="sxs-lookup"><span data-stu-id="181df-137">Applicable only when multi-site is configured on Application Gateway, otherwise use '127.0.0.1'.</span></span> <span data-ttu-id="181df-138">Esse valor é diferente do nome de host VM hello.</span><span class="sxs-lookup"><span data-stu-id="181df-138">This value is different from hello VM host name.</span></span>|
  |<span data-ttu-id="181df-139">**Caminho**</span><span class="sxs-lookup"><span data-stu-id="181df-139">**Path**</span></span>|<span data-ttu-id="181df-140">/ ou outro caminho</span><span class="sxs-lookup"><span data-stu-id="181df-140">/ or another path</span></span>|<span data-ttu-id="181df-141">Olá restante a url completa para investigação personalizada Olá Olá.</span><span class="sxs-lookup"><span data-stu-id="181df-141">hello remainder of hello full url for hello custom probe.</span></span> <span data-ttu-id="181df-142">Um caminho válido começa com "/".</span><span class="sxs-lookup"><span data-stu-id="181df-142">A valid path starts with '/'.</span></span> <span data-ttu-id="181df-143">Para o caminho do saudação padrão de http://contoso.com apenas usar '/'</span><span class="sxs-lookup"><span data-stu-id="181df-143">For hello default path of http://contoso.com just use '/'</span></span> |
  |<span data-ttu-id="181df-144">**Intervalo (segundos)**</span><span class="sxs-lookup"><span data-stu-id="181df-144">**Interval (secs)**</span></span>|<span data-ttu-id="181df-145">30</span><span class="sxs-lookup"><span data-stu-id="181df-145">30</span></span>|<span data-ttu-id="181df-146">Frequência hello teste é executado toocheck de integridade.</span><span class="sxs-lookup"><span data-stu-id="181df-146">How often hello probe is run toocheck for health.</span></span> <span data-ttu-id="181df-147">Não é recomendável tooset Olá menor do que 30 segundos.</span><span class="sxs-lookup"><span data-stu-id="181df-147">It is not recommended tooset hello lower than 30 seconds.</span></span>|
  |<span data-ttu-id="181df-148">**Tempo limite (segundos)**</span><span class="sxs-lookup"><span data-stu-id="181df-148">**Timeout (secs)**</span></span>|<span data-ttu-id="181df-149">30</span><span class="sxs-lookup"><span data-stu-id="181df-149">30</span></span>|<span data-ttu-id="181df-150">quantidade de saudação do teste de saudação do tempo espera antes do tempo limite. Olá timeout intervalo necessidades toobe alta o suficiente para que uma chamada http pode ser feita página de integridade tooensure Olá back-end está disponível.</span><span class="sxs-lookup"><span data-stu-id="181df-150">hello amount of time hello probe waits before timing out. hello timeout interval needs toobe high enough that an http call can be made tooensure hello backend health page is available.</span></span>|
  |<span data-ttu-id="181df-151">**Limite não íntegro**</span><span class="sxs-lookup"><span data-stu-id="181df-151">**Unhealthy threshold**</span></span>|<span data-ttu-id="181df-152">3</span><span class="sxs-lookup"><span data-stu-id="181df-152">3</span></span>|<span data-ttu-id="181df-153">Número de falhas toobe tentativas considerado não íntegro.</span><span class="sxs-lookup"><span data-stu-id="181df-153">Number of failed attempts toobe considered unhealthy.</span></span> <span data-ttu-id="181df-154">Um limite de 0 significa que se uma verificação de integridade falhar Olá back-end é determinado Íntegro imediatamente.</span><span class="sxs-lookup"><span data-stu-id="181df-154">A threshold of 0 means that if a health check fails hello back-end is determined unhealthy immediately.</span></span>|

  > [!IMPORTANT]
  > <span data-ttu-id="181df-155">nome do host Olá não é Olá igual ao nome do servidor.</span><span class="sxs-lookup"><span data-stu-id="181df-155">hello host name is not hello same as server name.</span></span> <span data-ttu-id="181df-156">Esse valor é o nome de saudação do host virtual hello, em execução no servidor de aplicativo hello.</span><span class="sxs-lookup"><span data-stu-id="181df-156">This value is hello name of hello virtual host running on hello application server.</span></span> <span data-ttu-id="181df-157">teste de saudação é enviado toohttp: / /(host name):(port from httpsetting)/urlPath</span><span class="sxs-lookup"><span data-stu-id="181df-157">hello probe is sent toohttp://(host name):(port from httpsetting)/urlPath</span></span>

## <a name="add-probe-toohello-gateway"></a><span data-ttu-id="181df-158">Adicionar teste toohello gateway</span><span class="sxs-lookup"><span data-stu-id="181df-158">Add probe toohello gateway</span></span>

<span data-ttu-id="181df-159">Agora que hello teste tiver sido criado, é hora tooadd-toohello gateway.</span><span class="sxs-lookup"><span data-stu-id="181df-159">Now that hello probe has been created, it is time tooadd it toohello gateway.</span></span> <span data-ttu-id="181df-160">Configurações de teste são definidas nas configurações de http de back-end saudação do gateway de aplicativo hello.</span><span class="sxs-lookup"><span data-stu-id="181df-160">Probe settings are set on hello backend http settings of hello application gateway.</span></span>

1. <span data-ttu-id="181df-161">Clique em **configurações HTTP** no gateway do aplicativo hello, toobring a folha de configuração Olá clique em Olá atual back-end http configurações listadas na janela de saudação.</span><span class="sxs-lookup"><span data-stu-id="181df-161">Click **HTTP settings** on hello application gateway, toobring up hello configuration blade click hello current backend http settings listed in hello window.</span></span>

  ![janela de configurações de https][2]

1. <span data-ttu-id="181df-163">Em hello **appGatewayBackEndHttpSettings** folha de configurações, Olá seleção **investigação personalizada Use** caixa de seleção e escolha investigação Olá criada no hello [criar investigação de saudação](#createprobe) seção em Olá **investigação personalizada** lista suspensa.</span><span class="sxs-lookup"><span data-stu-id="181df-163">On hello **appGatewayBackEndHttpSettings** settings blade, check hello **Use custom probe** checkbox and choose hello probe created in hello [Create hello probe](#createprobe) section on hello **Custom probe** drop-down..</span></span>
<span data-ttu-id="181df-164">Ao concluir, clique em **salvar** e Olá configurações são aplicadas.</span><span class="sxs-lookup"><span data-stu-id="181df-164">When complete, click **Save** and hello settings are applied.</span></span>

<span data-ttu-id="181df-165">investigação de padrão de saudação verifica o aplicativo web do hello padrão acesso toohello.</span><span class="sxs-lookup"><span data-stu-id="181df-165">hello default probe checks hello default access toohello web application.</span></span> <span data-ttu-id="181df-166">Agora que uma investigação personalizada tiver sido criada, o gateway de aplicativo hello usa Olá caminho personalizado definido toomonitor integridade para servidores de back-end de saudação.</span><span class="sxs-lookup"><span data-stu-id="181df-166">Now that a custom probe has been created, hello application gateway uses hello custom path defined toomonitor health for hello backend servers.</span></span> <span data-ttu-id="181df-167">Com base em critérios de saudação que foi definida, gateway de aplicativo hello verifica caminho Olá especificado na investigação de saudação.</span><span class="sxs-lookup"><span data-stu-id="181df-167">Based on hello criteria that was defined, hello application gateway checks hello path specified in hello probe.</span></span> <span data-ttu-id="181df-168">Se Olá chamar toohost:Port / caminho não retorna um HTTP 200 399 resposta de status, servidor de saudação é retirada da rotação depois que o limite não íntegro Olá for atingido.</span><span class="sxs-lookup"><span data-stu-id="181df-168">If hello call toohost:Port/path does not return an HTTP 200-399 status response, hello server is taken out of rotation after hello unhealthy threshold is reached.</span></span> <span data-ttu-id="181df-169">Sondando continua no hello toodetermine de instância não íntegro quando ele se tornar Íntegro novamente.</span><span class="sxs-lookup"><span data-stu-id="181df-169">Probing continues on hello unhealthy instance toodetermine when it becomes healthy again.</span></span> <span data-ttu-id="181df-170">Depois que instância Olá for adicionada toohealthy back pool de servidores, tráfego começa a fluir tooit novamente e toohello probing instância continua no intervalo especificado de usuário normal.</span><span class="sxs-lookup"><span data-stu-id="181df-170">Once hello instance is added back toohealthy server pool, traffic begins flowing tooit again and probing toohello instance continues at user specified interval as normal.</span></span>

## <a name="next-steps"></a><span data-ttu-id="181df-171">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="181df-171">Next steps</span></span>

<span data-ttu-id="181df-172">toolearn como tooconfigure descarregamento de SSL com o Gateway de aplicativo do Azure, consulte [configurar descarregamento de SSL](application-gateway-ssl-portal.md)</span><span class="sxs-lookup"><span data-stu-id="181df-172">toolearn how tooconfigure SSL Offloading with Azure Application Gateway, see [Configure SSL Offload](application-gateway-ssl-portal.md)</span></span>

[1]: ./media/application-gateway-create-probe-portal/figure1.png
[2]: ./media/application-gateway-create-probe-portal/figure2.png

