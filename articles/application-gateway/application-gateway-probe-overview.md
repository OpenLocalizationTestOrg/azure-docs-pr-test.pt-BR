---
title: "aaaHealth visão geral do monitoramento para o Gateway de aplicativo do Azure | Microsoft Docs"
description: "Saiba mais sobre Olá monitoramento de recursos no Azure Application Gateway"
services: application-gateway
documentationcenter: na
author: georgewallace
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 7eeba328-bb2d-4d3e-bdac-7552e7900b7f
ms.service: application-gateway
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 12/14/2016
ms.author: gwallace
ms.openlocfilehash: 5091d80394a354ff849ce7ccee8cc9d2fd0456db
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="application-gateway-health-monitoring-overview"></a><span data-ttu-id="3f7d8-103">Visão geral do monitoramento de integridade do Gateway de Aplicativo</span><span class="sxs-lookup"><span data-stu-id="3f7d8-103">Application Gateway health monitoring overview</span></span>

<span data-ttu-id="3f7d8-104">Gateway de aplicativo do Azure por padrão monitora a integridade de saudação de todos os recursos em seu pool de back-end e automaticamente remove qualquer recurso considerado não íntegro do pool de saudação.</span><span class="sxs-lookup"><span data-stu-id="3f7d8-104">Azure Application Gateway by default monitors hello health of all resources in its back-end pool and automatically removes any resource considered unhealthy from hello pool.</span></span> <span data-ttu-id="3f7d8-105">Application Gateway continua instâncias não íntegras do toomonitor hello e os adiciona fazer toohello Íntegro pool de back-end quando estiverem disponíveis e responder toohealth testes.</span><span class="sxs-lookup"><span data-stu-id="3f7d8-105">Application Gateway continues toomonitor hello unhealthy instances and adds them back toohello healthy back-end pool once they become available and respond toohealth probes.</span></span> <span data-ttu-id="3f7d8-106">Gateway de aplicativo envia Olá investigações de integridade com hello mesma porta que é definida nas configurações de HTTP de back-end de saudação.</span><span class="sxs-lookup"><span data-stu-id="3f7d8-106">Application gateway sends hello health probes with hello same port that is defined in hello back-end HTTP settings.</span></span> <span data-ttu-id="3f7d8-107">Essa configuração garante que teste hello está testando Olá a mesma porta que os clientes usarão back-end do tooconnect toohello.</span><span class="sxs-lookup"><span data-stu-id="3f7d8-107">This configuration ensures that hello probe is testing hello same port that customers would be using tooconnect toohello backend.</span></span>

![exemplo de investigação de gateway de aplicativo][1]

<span data-ttu-id="3f7d8-109">Em adição toousing padrão investigação monitoramento de integridade, você também pode personalizar toosuit de investigação de integridade Olá requisitos do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="3f7d8-109">In addition toousing default health probe monitoring, you can also customize hello health probe toosuit your application's requirements.</span></span> <span data-ttu-id="3f7d8-110">Neste artigo, serão abordadas as investigações de integridade padrão e personalizadas.</span><span class="sxs-lookup"><span data-stu-id="3f7d8-110">In this article, both default and custom health probes are covered.</span></span>

> [!NOTE]
> <span data-ttu-id="3f7d8-111">Se houver um NSG na sub-rede de Gateway do aplicativo, intervalos de porta 65503 65534 devem ser abertos na sub-rede de Gateway do aplicativo hello para tráfego de entrada.</span><span class="sxs-lookup"><span data-stu-id="3f7d8-111">If there is an NSG on Application Gateway subnet, port ranges 65503-65534 should be opened on hello Application Gateway subnet for Inbound traffic.</span></span> <span data-ttu-id="3f7d8-112">Essas portas são necessárias para Olá toowork de API de integridade de back-end.</span><span class="sxs-lookup"><span data-stu-id="3f7d8-112">These ports are required for hello backend health API toowork.</span></span>

## <a name="default-health-probe"></a><span data-ttu-id="3f7d8-113">Investigação de integridade padrão</span><span class="sxs-lookup"><span data-stu-id="3f7d8-113">Default health probe</span></span>

<span data-ttu-id="3f7d8-114">Um Application Gateway configura automaticamente uma investigação de integridade padrão quando você não define nenhuma configuração de investigação personalizada.</span><span class="sxs-lookup"><span data-stu-id="3f7d8-114">An application gateway automatically configures a default health probe when you don't set up any custom probe configuration.</span></span> <span data-ttu-id="3f7d8-115">Olá monitoramento de comportamento funciona fazendo que um IP de toohello de solicitação HTTP endereços configurado para o pool de back-end do hello.</span><span class="sxs-lookup"><span data-stu-id="3f7d8-115">hello monitoring behavior works by making an HTTP request toohello IP addresses configured for hello back-end pool.</span></span> <span data-ttu-id="3f7d8-116">Para investigações de padrão se as configurações de http de back-end de saudação são configuradas para HTTPS, investigação Olá usa HTTPS como integridade bem tootest de back-ends hello.</span><span class="sxs-lookup"><span data-stu-id="3f7d8-116">For default probes if hello backend http settings are configured for HTTPS, hello probe uses HTTPS as well tootest health of hello backends.</span></span>

<span data-ttu-id="3f7d8-117">Por exemplo: configurar o application gateway toouse servidores back-end A, B e C tooreceive HTTP tráfego de rede na porta 80.</span><span class="sxs-lookup"><span data-stu-id="3f7d8-117">For example: You configure your application gateway toouse back-end servers A, B, and C tooreceive HTTP network traffic on port 80.</span></span> <span data-ttu-id="3f7d8-118">o monitoramento de integridade de padrão de saudação testa três servidores de saudação cada 30 segundos por uma resposta HTTP íntegro.</span><span class="sxs-lookup"><span data-stu-id="3f7d8-118">hello default health monitoring tests hello three servers every 30 seconds for a healthy HTTP response.</span></span> <span data-ttu-id="3f7d8-119">Uma resposta de HTTP íntegra tem um [código de status](https://msdn.microsoft.com/library/aa287675.aspx) entre 200 e 399.</span><span class="sxs-lookup"><span data-stu-id="3f7d8-119">A healthy HTTP response has a [status code](https://msdn.microsoft.com/library/aa287675.aspx) between 200 and 399.</span></span>

<span data-ttu-id="3f7d8-120">Se a verificação de investigação de padrão de saudação falhar para o servidor, o gateway de aplicativo hello remove do seu pool de back-end e interrupção do servidor toothis de fluxo de tráfego de rede.</span><span class="sxs-lookup"><span data-stu-id="3f7d8-120">If hello default probe check fails for server A, hello application gateway removes it from its back-end pool, and network traffic stops flowing toothis server.</span></span> <span data-ttu-id="3f7d8-121">investigação de padrão de saudação ainda continua toocheck para servidor de a cada 30 segundos.</span><span class="sxs-lookup"><span data-stu-id="3f7d8-121">hello default probe still continues toocheck for server A every 30 seconds.</span></span> <span data-ttu-id="3f7d8-122">Quando o servidor responde com êxito tooone solicitação de um teste de integridade padrão, ele é adicionado novamente como pool de back-end toohello íntegro e começar a tráfego fluir toohello server novamente.</span><span class="sxs-lookup"><span data-stu-id="3f7d8-122">When server A responds successfully tooone request from a default health probe, it is added back as healthy toohello back-end pool, and traffic starts flowing toohello server again.</span></span>

### <a name="default-health-probe-settings"></a><span data-ttu-id="3f7d8-123">Configurações da investigação de integridade padrão</span><span class="sxs-lookup"><span data-stu-id="3f7d8-123">Default health probe settings</span></span>

| <span data-ttu-id="3f7d8-124">Propriedades da investigação</span><span class="sxs-lookup"><span data-stu-id="3f7d8-124">Probe property</span></span> | <span data-ttu-id="3f7d8-125">Valor</span><span class="sxs-lookup"><span data-stu-id="3f7d8-125">Value</span></span> | <span data-ttu-id="3f7d8-126">Descrição</span><span class="sxs-lookup"><span data-stu-id="3f7d8-126">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="3f7d8-127">URL de investigação</span><span class="sxs-lookup"><span data-stu-id="3f7d8-127">Probe URL</span></span> |<span data-ttu-id="3f7d8-128">http://127.0.0.1:\<porta\>/</span><span class="sxs-lookup"><span data-stu-id="3f7d8-128">http://127.0.0.1:\<port\>/</span></span> |<span data-ttu-id="3f7d8-129">Caminho da URL</span><span class="sxs-lookup"><span data-stu-id="3f7d8-129">URL path</span></span> |
| <span data-ttu-id="3f7d8-130">Intervalo</span><span class="sxs-lookup"><span data-stu-id="3f7d8-130">Interval</span></span> |<span data-ttu-id="3f7d8-131">30</span><span class="sxs-lookup"><span data-stu-id="3f7d8-131">30</span></span> |<span data-ttu-id="3f7d8-132">Intervalo da investigação em segundos</span><span class="sxs-lookup"><span data-stu-id="3f7d8-132">Probe interval in seconds</span></span> |
| <span data-ttu-id="3f7d8-133">Tempo limite</span><span class="sxs-lookup"><span data-stu-id="3f7d8-133">Time-out</span></span> |<span data-ttu-id="3f7d8-134">30</span><span class="sxs-lookup"><span data-stu-id="3f7d8-134">30</span></span> |<span data-ttu-id="3f7d8-135">Tempo limite da investigação em segundos</span><span class="sxs-lookup"><span data-stu-id="3f7d8-135">Probe time-out in seconds</span></span> |
| <span data-ttu-id="3f7d8-136">Limite não íntegro</span><span class="sxs-lookup"><span data-stu-id="3f7d8-136">Unhealthy threshold</span></span> |<span data-ttu-id="3f7d8-137">3</span><span class="sxs-lookup"><span data-stu-id="3f7d8-137">3</span></span> |<span data-ttu-id="3f7d8-138">Contagem de repetições da investigação.</span><span class="sxs-lookup"><span data-stu-id="3f7d8-138">Probe retry count.</span></span> <span data-ttu-id="3f7d8-139">servidor de back-end Hello está marcado para baixo depois contagem de falhas de investigação consecutivas Olá atinge o limite não íntegro hello.</span><span class="sxs-lookup"><span data-stu-id="3f7d8-139">hello back-end server is marked down after hello consecutive probe failure count reaches hello unhealthy threshold.</span></span> |

> [!NOTE]
> <span data-ttu-id="3f7d8-140">Olá porta é Olá mesma porta, como configurações de HTTP de back-end de saudação.</span><span class="sxs-lookup"><span data-stu-id="3f7d8-140">hello port is hello same port as hello back-end HTTP settings.</span></span>

<span data-ttu-id="3f7d8-141">investigação de padrão de saudação examina somente http://127.0.0.1:\<porta\> toodetermine status de integridade.</span><span class="sxs-lookup"><span data-stu-id="3f7d8-141">hello default probe looks only at http://127.0.0.1:\<port\> toodetermine health status.</span></span> <span data-ttu-id="3f7d8-142">Se você precisa tooconfigure Olá integridade investigação toogo tooa URL personalizada ou modifique outras configurações, você deve usar testes personalizados conforme descrito em Olá etapas a seguir:</span><span class="sxs-lookup"><span data-stu-id="3f7d8-142">If you need tooconfigure hello health probe toogo tooa custom URL or modify any other settings, you must use custom probes as described in hello following steps:</span></span>

## <a name="custom-health-probe"></a><span data-ttu-id="3f7d8-143">Investigação de integridade personalizada</span><span class="sxs-lookup"><span data-stu-id="3f7d8-143">Custom health probe</span></span>

<span data-ttu-id="3f7d8-144">Testes personalizados permitem que você toohave um controle mais granular sobre o monitoramento de integridade de saudação.</span><span class="sxs-lookup"><span data-stu-id="3f7d8-144">Custom probes allow you toohave a more granular control over hello health monitoring.</span></span> <span data-ttu-id="3f7d8-145">Ao usar testes personalizados, você pode configurar o intervalo de sondagem Olá Olá tootest de URL e o caminho e quantos tooaccept de respostas com falha antes de marcar a instância de pool de back-end hello como não íntegro.</span><span class="sxs-lookup"><span data-stu-id="3f7d8-145">When using custom probes, you can configure hello probe interval, hello URL and path tootest, and how many failed responses tooaccept before marking hello back-end pool instance as unhealthy.</span></span>

### <a name="custom-health-probe-settings"></a><span data-ttu-id="3f7d8-146">Configurações da investigação de integridade personalizada</span><span class="sxs-lookup"><span data-stu-id="3f7d8-146">Custom health probe settings</span></span>

<span data-ttu-id="3f7d8-147">Olá tabela a seguir fornece definições para as propriedades de saudação de um teste de integridade personalizado.</span><span class="sxs-lookup"><span data-stu-id="3f7d8-147">hello following table provides definitions for hello properties of a custom health probe.</span></span>

| <span data-ttu-id="3f7d8-148">Propriedades da investigação</span><span class="sxs-lookup"><span data-stu-id="3f7d8-148">Probe property</span></span> | <span data-ttu-id="3f7d8-149">Descrição</span><span class="sxs-lookup"><span data-stu-id="3f7d8-149">Description</span></span> |
| --- | --- |
| <span data-ttu-id="3f7d8-150">Nome</span><span class="sxs-lookup"><span data-stu-id="3f7d8-150">Name</span></span> |<span data-ttu-id="3f7d8-151">Nome do teste de saudação.</span><span class="sxs-lookup"><span data-stu-id="3f7d8-151">Name of hello probe.</span></span> <span data-ttu-id="3f7d8-152">Esse nome é usado toorefer toohello investigação em configurações de HTTP de back-end.</span><span class="sxs-lookup"><span data-stu-id="3f7d8-152">This name is used toorefer toohello probe in back-end HTTP settings.</span></span> |
| <span data-ttu-id="3f7d8-153">Protocolo</span><span class="sxs-lookup"><span data-stu-id="3f7d8-153">Protocol</span></span> |<span data-ttu-id="3f7d8-154">Protocolo usado toosend investigação de saudação.</span><span class="sxs-lookup"><span data-stu-id="3f7d8-154">Protocol used toosend hello probe.</span></span> <span data-ttu-id="3f7d8-155">investigação de saudação usa o protocolo de saudação definido nas configurações de HTTP de back-end de saudação</span><span class="sxs-lookup"><span data-stu-id="3f7d8-155">hello probe uses hello protocol defined in hello back-end HTTP settings</span></span> |
| <span data-ttu-id="3f7d8-156">Host</span><span class="sxs-lookup"><span data-stu-id="3f7d8-156">Host</span></span> |<span data-ttu-id="3f7d8-157">Investigação de saudação do toosend do nome de host.</span><span class="sxs-lookup"><span data-stu-id="3f7d8-157">Host name toosend hello probe.</span></span> <span data-ttu-id="3f7d8-158">Aplicável somente quando vários sites são configurados no Gateway de Aplicativo; do contrário, use '127.0.0.1'.</span><span class="sxs-lookup"><span data-stu-id="3f7d8-158">Applicable only when multi-site is configured on Application Gateway, otherwise use '127.0.0.1'.</span></span> <span data-ttu-id="3f7d8-159">Este valor é diferente do nome do host de VM.</span><span class="sxs-lookup"><span data-stu-id="3f7d8-159">This value is different from VM host name.</span></span> |
| <span data-ttu-id="3f7d8-160">Caminho</span><span class="sxs-lookup"><span data-stu-id="3f7d8-160">Path</span></span> |<span data-ttu-id="3f7d8-161">Caminho relativo da investigação de saudação.</span><span class="sxs-lookup"><span data-stu-id="3f7d8-161">Relative path of hello probe.</span></span> <span data-ttu-id="3f7d8-162">caminho válido Olá começa com '/'.</span><span class="sxs-lookup"><span data-stu-id="3f7d8-162">hello valid path starts from '/'.</span></span> |
| <span data-ttu-id="3f7d8-163">Intervalo</span><span class="sxs-lookup"><span data-stu-id="3f7d8-163">Interval</span></span> |<span data-ttu-id="3f7d8-164">Intervalo de investigação em segundos.</span><span class="sxs-lookup"><span data-stu-id="3f7d8-164">Probe interval in seconds.</span></span> <span data-ttu-id="3f7d8-165">Esse valor é o intervalo de tempo de saudação entre duas investigações consecutivos.</span><span class="sxs-lookup"><span data-stu-id="3f7d8-165">This value is hello time interval between two consecutive probes.</span></span> |
| <span data-ttu-id="3f7d8-166">Tempo limite</span><span class="sxs-lookup"><span data-stu-id="3f7d8-166">Time-out</span></span> |<span data-ttu-id="3f7d8-167">Tempo limite da investigação em segundos.</span><span class="sxs-lookup"><span data-stu-id="3f7d8-167">Probe time-out in seconds.</span></span> <span data-ttu-id="3f7d8-168">Se uma resposta válida não for recebida dentro desse período de tempo limite, investigação hello está marcada como falha.</span><span class="sxs-lookup"><span data-stu-id="3f7d8-168">If a valid response is not received within this time-out period, hello probe is marked as failed.</span></span>  |
| <span data-ttu-id="3f7d8-169">Limite não íntegro</span><span class="sxs-lookup"><span data-stu-id="3f7d8-169">Unhealthy threshold</span></span> |<span data-ttu-id="3f7d8-170">Contagem de repetições da investigação.</span><span class="sxs-lookup"><span data-stu-id="3f7d8-170">Probe retry count.</span></span> <span data-ttu-id="3f7d8-171">servidor de back-end Hello está marcado para baixo depois contagem de falhas de investigação consecutivas Olá atinge o limite não íntegro hello.</span><span class="sxs-lookup"><span data-stu-id="3f7d8-171">hello back-end server is marked down after hello consecutive probe failure count reaches hello unhealthy threshold.</span></span> |

> [!IMPORTANT]
> <span data-ttu-id="3f7d8-172">Se o Gateway do aplicativo está configurado para um único site, por saudação padrão Host nome deve ser especificado como '127.0.0.1', a menos que o contrário configurada na investigação personalizada.</span><span class="sxs-lookup"><span data-stu-id="3f7d8-172">If Application Gateway is configured for a single site, by default hello Host name should be specified as '127.0.0.1', unless otherwise configured in custom probe.</span></span>
> <span data-ttu-id="3f7d8-173">Para referência uma investigação personalizada é enviada muito\<protocolo\>://\<host\>:\<porta\>\<caminho\>.</span><span class="sxs-lookup"><span data-stu-id="3f7d8-173">For reference a custom probe is sent too\<protocol\>://\<host\>:\<port\>\<path\>.</span></span> <span data-ttu-id="3f7d8-174">Olá porta usada será Olá mesma porta, conforme definido nas configurações de HTTP de back-end de saudação.</span><span class="sxs-lookup"><span data-stu-id="3f7d8-174">hello port used will be hello same port as defined in hello back-end HTTP settings.</span></span>

## <a name="next-steps"></a><span data-ttu-id="3f7d8-175">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="3f7d8-175">Next steps</span></span>
<span data-ttu-id="3f7d8-176">Depois de conhecer o monitoramento de integridade do Application Gateway, você pode configurar um [investigação de integridade personalizado](application-gateway-create-probe-portal.md) em Olá portal do Azure ou um [investigação de integridade personalizado](application-gateway-create-probe-ps.md) usando o PowerShell e hello Azure Resource Manager modelo de implantação.</span><span class="sxs-lookup"><span data-stu-id="3f7d8-176">After learning about Application Gateway health monitoring, you can configure a [custom health probe](application-gateway-create-probe-portal.md) in hello Azure portal or a [custom health probe](application-gateway-create-probe-ps.md) using PowerShell and hello Azure Resource Manager deployment model.</span></span>

[1]: ./media/application-gateway-probe-overview/appgatewayprobe.png
