---
title: firewall do aplicativo aaaIntroduction tooweb (WAF) para o Gateway de aplicativo do Azure | Microsoft Docs
description: "Esta página fornece uma visão geral do WAF (Firewall do aplicativo Web) do Gateway de Aplicativo"
documentationcenter: na
services: application-gateway
author: amsriva
manager: rossort
editor: amsriva
ms.assetid: 04b362bc-6653-4765-86f6-55ee8ec2a0ff
ms.service: application-gateway
ms.devlang: na
ms.topic: hero-article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 05/03/2017
ms.author: amsriva
ms.openlocfilehash: 5a42ce0fb2bd12a391844099e2de8fa2571195e6
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="web-application-firewall-waf"></a><span data-ttu-id="c8883-103">Firewall do aplicativo Web (WAF)</span><span class="sxs-lookup"><span data-stu-id="c8883-103">Web application firewall (WAF)</span></span>

<span data-ttu-id="c8883-104">O Firewall do aplicativo Web (WAF) é um recurso do Gateway de Aplicativo que fornece proteção centralizada de seus aplicativos Web de vulnerabilidades e explorações comuns.</span><span class="sxs-lookup"><span data-stu-id="c8883-104">Web application firewall (WAF) is a feature of Application Gateway that provides centralized protection of your web applications from common exploits and vulnerabilities.</span></span> 

<span data-ttu-id="c8883-105">Firewall do aplicativo Web é baseada em regras de saudação [conjuntos de regras de núcleo OWASP](https://www.owasp.org/index.php/Category:OWASP_ModSecurity_Core_Rule_Set_Project) 3.0 ou 2.2.9.</span><span class="sxs-lookup"><span data-stu-id="c8883-105">Web application firewall is based on rules from hello [OWASP core rule sets](https://www.owasp.org/index.php/Category:OWASP_ModSecurity_Core_Rule_Set_Project) 3.0 or 2.2.9.</span></span> <span data-ttu-id="c8883-106">Os aplicativos Web cada vez mais são alvos de ataques mal-intencionados que exploram vulnerabilidades conhecidas comuns.</span><span class="sxs-lookup"><span data-stu-id="c8883-106">Web applications are increasingly targets of malicious attacks that exploit common known vulnerabilities.</span></span> <span data-ttu-id="c8883-107">São comuns entre essas explorações ataques de injeção SQL, script entre sites ataques tooname alguns.</span><span class="sxs-lookup"><span data-stu-id="c8883-107">Common among these exploits are SQL injection attacks, cross site scripting attacks tooname a few.</span></span> <span data-ttu-id="c8883-108">Evitar tais ataques no código do aplicativo pode ser desafiadora e pode exigir a manutenção rigorosa, aplicação de patch e monitoramento em vários níveis de topologia de aplicativo hello.</span><span class="sxs-lookup"><span data-stu-id="c8883-108">Preventing such attacks in application code can be challenging and may require rigorous maintenance, patching and monitoring at multiple layers of hello application topology.</span></span> <span data-ttu-id="c8883-109">Um firewall do aplicativo web centralizado ajuda a simplificar o gerenciamento de segurança muito mais simples e oferece aos administradores de tooapplication contra ameaças ou invasões de garantia melhor.</span><span class="sxs-lookup"><span data-stu-id="c8883-109">A centralized web application firewall helps make security management much simpler and gives better assurance tooapplication administrators against threats or intrusions.</span></span> <span data-ttu-id="c8883-110">Uma solução WAF também possa reagir de ameaça à segurança tooa mais rápida por uma vulnerabilidade conhecida em um local central em vez de proteção de cada um dos aplicativos web individuais de aplicação de patch.</span><span class="sxs-lookup"><span data-stu-id="c8883-110">A WAF solution can also react tooa security threat faster by patching a known vulnerability at a central location versus securing each of individual web applications.</span></span> <span data-ttu-id="c8883-111">Os gateways de aplicativos existentes podem ser facilmente convertido tooa web aplicativo firewall habilitado application gateway.</span><span class="sxs-lookup"><span data-stu-id="c8883-111">Existing application gateways can be converted tooa web application firewall enabled application gateway easily.</span></span>

![imageURLroute](./media/application-gateway-web-application-firewall-overview/WAF1.png)

<span data-ttu-id="c8883-113">Application Gateway funciona como uma terminação SSL do aplicativo entrega controlador e ofertas, afinidade de sessão baseada em cookie, distribuição de carga de round robin, roteamento baseado em conteúdo, capacidade toohost vários aprimoramentos de segurança e sites.</span><span class="sxs-lookup"><span data-stu-id="c8883-113">Application Gateway operates as an application delivery controller and offers SSL termination, cookie-based session affinity, round-robin load distribution, content-based routing, ability toohost multiple websites and security enhancements.</span></span> <span data-ttu-id="c8883-114">Aprimoramentos de segurança oferecidos pelo Gateway de aplicativo incluem gerenciamento de política SSL, tooend final suporte para SSL.</span><span class="sxs-lookup"><span data-stu-id="c8883-114">Security enhancements offered by Application Gateway include SSL policy management, end tooend SSL support.</span></span> <span data-ttu-id="c8883-115">Segurança do aplicativo agora é reforçada pelo WAF (firewall do aplicativo web) está sendo integrado diretamente ao oferta Olá ADC.</span><span class="sxs-lookup"><span data-stu-id="c8883-115">Application security is now strengthened by WAF (web application firewall) being directly integrated into hello ADC offering.</span></span> <span data-ttu-id="c8883-116">Isso fornece um toomanage de local central tooconfigure fácil e proteger seus aplicativos web contra vulnerabilidades de web comuns.</span><span class="sxs-lookup"><span data-stu-id="c8883-116">This provides an easy tooconfigure central location toomanage and protect your web applications against common web vulnerabilities.</span></span>

## <a name="benefits"></a><span data-ttu-id="c8883-117">Benefícios</span><span class="sxs-lookup"><span data-stu-id="c8883-117">Benefits</span></span>

<span data-ttu-id="c8883-118">Olá seguem principais benefícios Olá fornecidas pelo firewall do aplicativo web e o Application Gateway:</span><span class="sxs-lookup"><span data-stu-id="c8883-118">hello following are hello core benefits that Application Gateway and web application firewall provide:</span></span>

### <a name="protection"></a><span data-ttu-id="c8883-119">Proteção</span><span class="sxs-lookup"><span data-stu-id="c8883-119">Protection</span></span>

* <span data-ttu-id="c8883-120">Proteger seu aplicativo da web contra ataques sem código de toobackend de modificação e vulnerabilidades de web.</span><span class="sxs-lookup"><span data-stu-id="c8883-120">Protect your web application from web vulnerabilities and attacks without modification toobackend code.</span></span>

* <span data-ttu-id="c8883-121">Proteger web vários aplicativos em Olá a mesma hora atrás de um application gateway.</span><span class="sxs-lookup"><span data-stu-id="c8883-121">Protect multiple web applications at hello same time behind an application gateway.</span></span> <span data-ttu-id="c8883-122">Gateway de aplicativo oferece suporte à hospedagem de sites too20 atrás de um único gateway que pode ser protegido contra ataques de web WAF.</span><span class="sxs-lookup"><span data-stu-id="c8883-122">Application gateway supports hosting up too20 websites behind a single gateway that could all be protected against web attacks with WAF.</span></span>

### <a name="monitoring"></a><span data-ttu-id="c8883-123">Monitoramento</span><span class="sxs-lookup"><span data-stu-id="c8883-123">Monitoring</span></span>

* <span data-ttu-id="c8883-124">Monitore seu aplicativo Web contra ataques usando um log de WAF em tempo real.</span><span class="sxs-lookup"><span data-stu-id="c8883-124">Monitor your web application against attacks using a real-time WAF log.</span></span> <span data-ttu-id="c8883-125">Esse log é integrado com [Azure Monitor](../monitoring-and-diagnostics/monitoring-overview.md) tootrack WAF alertas e os logs e monitorar facilmente as tendências.</span><span class="sxs-lookup"><span data-stu-id="c8883-125">This log is integrated with [Azure Monitor](../monitoring-and-diagnostics/monitoring-overview.md) tootrack WAF alerts and logs and easily monitor trends.</span></span>

* <span data-ttu-id="c8883-126">O WAF será integrado com a Central de Segurança do Azure em breve.</span><span class="sxs-lookup"><span data-stu-id="c8883-126">WAF will be integrated with Azure Security Center soon.</span></span> <span data-ttu-id="c8883-127">Central de segurança do Azure permite que uma exibição central do estado de segurança de saudação de todos os recursos do Azure.</span><span class="sxs-lookup"><span data-stu-id="c8883-127">Azure Security Center allows for a central view of hello security state of all your Azure resources.</span></span>

### <a name="customization"></a><span data-ttu-id="c8883-128">Personalização</span><span class="sxs-lookup"><span data-stu-id="c8883-128">Customization</span></span>

* <span data-ttu-id="c8883-129">regras de WAF Olá capacidade toocustomize e regra agrupa toosuit seus requisitos de aplicativo e eliminar falsos positivos.</span><span class="sxs-lookup"><span data-stu-id="c8883-129">hello ability toocustomize WAF rules and rule groups toosuit your application requirements and eliminate false positives.</span></span>

## <a name="features"></a><span data-ttu-id="c8883-130">Recursos</span><span class="sxs-lookup"><span data-stu-id="c8883-130">Features</span></span>

<span data-ttu-id="c8883-131">Firewall do aplicativo Web vem pré-configurada com CRS 3.0 por padrão, ou você pode escolher toouse 2.2.9.</span><span class="sxs-lookup"><span data-stu-id="c8883-131">Web application firewall comes preconfigured with CRS 3.0 by default or you can choose toouse 2.2.9.</span></span> <span data-ttu-id="c8883-132">O CRS 3.0 oferece menos falsos positivos do que o 2.2.9.</span><span class="sxs-lookup"><span data-stu-id="c8883-132">CRS 3.0 offers reduced false positives over 2.2.9.</span></span> <span data-ttu-id="c8883-133">Olá capacidade muito[personalizar regras toosuit suas necessidades](application-gateway-customize-waf-rules-portal.md) é fornecido.</span><span class="sxs-lookup"><span data-stu-id="c8883-133">hello ability too[customize rules toosuit your needs](application-gateway-customize-waf-rules-portal.md) is provided.</span></span> <span data-ttu-id="c8883-134">Algumas das vulnerabilidades web comuns Olá quais firewall do aplicativo web protege contra inclui:</span><span class="sxs-lookup"><span data-stu-id="c8883-134">Some of hello common web vulnerabilities which web application firewall protects against includes:</span></span>

* <span data-ttu-id="c8883-135">Proteção contra injeção de SQL</span><span class="sxs-lookup"><span data-stu-id="c8883-135">SQL injection protection</span></span>
* <span data-ttu-id="c8883-136">Proteção contra scripts entre sites</span><span class="sxs-lookup"><span data-stu-id="c8883-136">Cross site scripting protection</span></span>
* <span data-ttu-id="c8883-137">Proteção Contra Ataques Comuns da Web, como a injeção de comandos, as solicitações HTTP indesejadas, a divisão de resposta HTTP e o ataque de inclusão de arquivo remoto</span><span class="sxs-lookup"><span data-stu-id="c8883-137">Common Web Attacks Protection such as command injection, HTTP request smuggling, HTTP response splitting, and remote file inclusion attack</span></span>
* <span data-ttu-id="c8883-138">Proteção contra violações de protocolo HTTP</span><span class="sxs-lookup"><span data-stu-id="c8883-138">Protection against HTTP protocol violations</span></span>
* <span data-ttu-id="c8883-139">Proteção contra anomalias de protocolo HTTP, como ausência de host de agente do usuário e de cabeçalhos de aceitação</span><span class="sxs-lookup"><span data-stu-id="c8883-139">Protection against HTTP protocol anomalies such as missing host user-agent and accept headers</span></span>
* <span data-ttu-id="c8883-140">Prevenção contra bots, rastreadores e scanners</span><span class="sxs-lookup"><span data-stu-id="c8883-140">Prevention against bots, crawlers, and scanners</span></span>
* <span data-ttu-id="c8883-141">Detecção de problemas de configuração de aplicativo comuns (por exemplo, Apache, IIS etc.)</span><span class="sxs-lookup"><span data-stu-id="c8883-141">Detection of common application misconfigurations (i.e. Apache, IIS, etc.)</span></span>

<span data-ttu-id="c8883-142">Para uma lista mais detalhada das regras e suas proteções consulte seguinte Olá [principais conjuntos de regras](#core-rule-sets).</span><span class="sxs-lookup"><span data-stu-id="c8883-142">For a more detailed list of rules and their protections see hello following [Core rule sets](#core-rule-sets).</span></span>

### <a name="core-rule-sets"></a><span data-ttu-id="c8883-143">Conjuntos de regras principais</span><span class="sxs-lookup"><span data-stu-id="c8883-143">Core rule sets</span></span>

<span data-ttu-id="c8883-144">O Gateway de Aplicativo dá suporte a dois conjuntos de regras, CRS 3.0 e CRS 2.2.9.</span><span class="sxs-lookup"><span data-stu-id="c8883-144">Application Gateway supports two rule sets, CRS 3.0, and CRS 2.2.9.</span></span> <span data-ttu-id="c8883-145">Esses conjuntos de regras principais são coleções de regras que protegem seus aplicativos Web contra atividades mal-intencionadas.</span><span class="sxs-lookup"><span data-stu-id="c8883-145">These core rules sets are collections of rules that protect your web applications for malicious activity.</span></span>

#### <a name="owasp30"></a><span data-ttu-id="c8883-146">OWASP_3.0</span><span class="sxs-lookup"><span data-stu-id="c8883-146">OWASP_3.0</span></span>

<span data-ttu-id="c8883-147">conjunto de regras de núcleo Olá 3.0 fornecido tem 13 grupos de regras, conforme mostrado na Olá a tabela a seguir.</span><span class="sxs-lookup"><span data-stu-id="c8883-147">hello 3.0 core rule set provided has 13 rule groups as shown in hello following table.</span></span> <span data-ttu-id="c8883-148">Cada um desses grupos de regra contém várias regras, que podem ser desabilitadas.</span><span class="sxs-lookup"><span data-stu-id="c8883-148">Each of these rule groups contains multiple rules, which can be disabled.</span></span>

|<span data-ttu-id="c8883-149">RuleGroup</span><span class="sxs-lookup"><span data-stu-id="c8883-149">RuleGroup</span></span>|<span data-ttu-id="c8883-150">Descrição</span><span class="sxs-lookup"><span data-stu-id="c8883-150">Description</span></span>|
|---|---|
|<span data-ttu-id="c8883-151">**[REQUEST-910-IP-REPUTATION](application-gateway-crs-rulegroups-rules.md#crs910)**</span><span class="sxs-lookup"><span data-stu-id="c8883-151">**[REQUEST-910-IP-REPUTATION](application-gateway-crs-rulegroups-rules.md#crs910)**</span></span>|<span data-ttu-id="c8883-152">Contém regras tooprotect contra spam conhecidos ou atividades mal-intencionadas.</span><span class="sxs-lookup"><span data-stu-id="c8883-152">Contains rules tooprotect against known spammers or malicious activity.</span></span>|
|<span data-ttu-id="c8883-153">**[REQUEST-911-METHOD-ENFORCEMENT](application-gateway-crs-rulegroups-rules.md#crs911)**</span><span class="sxs-lookup"><span data-stu-id="c8883-153">**[REQUEST-911-METHOD-ENFORCEMENT](application-gateway-crs-rulegroups-rules.md#crs911)**</span></span>|<span data-ttu-id="c8883-154">Contém regras toolock para baixo métodos (PUT, PATCH <...)</span><span class="sxs-lookup"><span data-stu-id="c8883-154">Contains rules toolock down methods (PUT, PATCH< ..)</span></span>|
|<span data-ttu-id="c8883-155">**[REQUEST-912-DOS-PROTECTION](application-gateway-crs-rulegroups-rules.md#crs912)**</span><span class="sxs-lookup"><span data-stu-id="c8883-155">**[REQUEST-912-DOS-PROTECTION](application-gateway-crs-rulegroups-rules.md#crs912)**</span></span>| <span data-ttu-id="c8883-156">Contém regras tooprotect contra ataques dos (negação de serviço).</span><span class="sxs-lookup"><span data-stu-id="c8883-156">Contains rules tooprotect against Denial of Service (DoS) attacks.</span></span>|
|<span data-ttu-id="c8883-157">**[REQUEST-913-SCANNER-DETECTION](application-gateway-crs-rulegroups-rules.md#crs913)**</span><span class="sxs-lookup"><span data-stu-id="c8883-157">**[REQUEST-913-SCANNER-DETECTION](application-gateway-crs-rulegroups-rules.md#crs913)**</span></span>| <span data-ttu-id="c8883-158">Contém regras tooprotect contra scanners de porta e o ambiente.</span><span class="sxs-lookup"><span data-stu-id="c8883-158">Contains rules tooprotect against port and environment scanners.</span></span>|
|<span data-ttu-id="c8883-159">**[REQUEST-920-PROTOCOL-ENFORCEMENT](application-gateway-crs-rulegroups-rules.md#crs920)**</span><span class="sxs-lookup"><span data-stu-id="c8883-159">**[REQUEST-920-PROTOCOL-ENFORCEMENT](application-gateway-crs-rulegroups-rules.md#crs920)**</span></span>|<span data-ttu-id="c8883-160">Contém tooprotect de regras em relação a problemas de codificação e protocolo.</span><span class="sxs-lookup"><span data-stu-id="c8883-160">Contains rules tooprotect against protocol and encoding issues.</span></span>|
|<span data-ttu-id="c8883-161">**[REQUEST-921-PROTOCOL-ATTACK](application-gateway-crs-rulegroups-rules.md#crs921)**</span><span class="sxs-lookup"><span data-stu-id="c8883-161">**[REQUEST-921-PROTOCOL-ATTACK](application-gateway-crs-rulegroups-rules.md#crs921)**</span></span>|<span data-ttu-id="c8883-162">Contém regras tooprotect contra injeção de cabeçalho, solicitações indesejadas e de divisão de resposta</span><span class="sxs-lookup"><span data-stu-id="c8883-162">Contains rules tooprotect against header injection, request smuggling, and response splitting</span></span>|
|<span data-ttu-id="c8883-163">**[REQUEST-930-APPLICATION-ATTACK-LFI](application-gateway-crs-rulegroups-rules.md#crs930)**</span><span class="sxs-lookup"><span data-stu-id="c8883-163">**[REQUEST-930-APPLICATION-ATTACK-LFI](application-gateway-crs-rulegroups-rules.md#crs930)**</span></span>|<span data-ttu-id="c8883-164">Contém regras tooprotect contra ataques de arquivo e caminho.</span><span class="sxs-lookup"><span data-stu-id="c8883-164">Contains rules tooprotect against file and path attacks.</span></span>|
|<span data-ttu-id="c8883-165">**[REQUEST-931-APPLICATION-ATTACK-RFI](application-gateway-crs-rulegroups-rules.md#crs931)**</span><span class="sxs-lookup"><span data-stu-id="c8883-165">**[REQUEST-931-APPLICATION-ATTACK-RFI](application-gateway-crs-rulegroups-rules.md#crs931)**</span></span>|<span data-ttu-id="c8883-166">Contém regras tooprotect em relação a inclusão de arquivos remotos (RFI)</span><span class="sxs-lookup"><span data-stu-id="c8883-166">Contains rules tooprotect against Remote File Inclusion (RFI)</span></span>|
|<span data-ttu-id="c8883-167">**[REQUEST-932-APPLICATION-ATTACK-RCE](application-gateway-crs-rulegroups-rules.md#crs932)**</span><span class="sxs-lookup"><span data-stu-id="c8883-167">**[REQUEST-932-APPLICATION-ATTACK-RCE](application-gateway-crs-rulegroups-rules.md#crs932)**</span></span>|<span data-ttu-id="c8883-168">Contém regras tooprotect novamente a execução remota de código.</span><span class="sxs-lookup"><span data-stu-id="c8883-168">Contains rules tooprotect again Remote Code Execution.</span></span>|
|<span data-ttu-id="c8883-169">**[REQUEST-933-APPLICATION-ATTACK-PHP](application-gateway-crs-rulegroups-rules.md#crs933)**</span><span class="sxs-lookup"><span data-stu-id="c8883-169">**[REQUEST-933-APPLICATION-ATTACK-PHP](application-gateway-crs-rulegroups-rules.md#crs933)**</span></span>|<span data-ttu-id="c8883-170">Contém regras tooprotect contra ataques de injeção de PHP.</span><span class="sxs-lookup"><span data-stu-id="c8883-170">Contains rules tooprotect against PHP injection attacks.</span></span>|
|<span data-ttu-id="c8883-171">**[REQUEST-941-APPLICATION-ATTACK-XSS](application-gateway-crs-rulegroups-rules.md#crs941)**</span><span class="sxs-lookup"><span data-stu-id="c8883-171">**[REQUEST-941-APPLICATION-ATTACK-XSS](application-gateway-crs-rulegroups-rules.md#crs941)**</span></span>|<span data-ttu-id="c8883-172">Contém regras para proteção contra scripts entre site.</span><span class="sxs-lookup"><span data-stu-id="c8883-172">Contains rules for protecting against cross site scripting.</span></span>|
|<span data-ttu-id="c8883-173">**[REQUEST-942-APPLICATION-ATTACK-SQLI](application-gateway-crs-rulegroups-rules.md#crs942)**</span><span class="sxs-lookup"><span data-stu-id="c8883-173">**[REQUEST-942-APPLICATION-ATTACK-SQLI](application-gateway-crs-rulegroups-rules.md#crs942)**</span></span>|<span data-ttu-id="c8883-174">Contém as regras para proteção contra ataques de injeção de SQL.</span><span class="sxs-lookup"><span data-stu-id="c8883-174">Contains rules for protecting against SQL injection attacks.</span></span>|
|<span data-ttu-id="c8883-175">**[REQUEST-943-APPLICATION-ATTACK-SESSION-FIXATION](application-gateway-crs-rulegroups-rules.md#crs943)**</span><span class="sxs-lookup"><span data-stu-id="c8883-175">**[REQUEST-943-APPLICATION-ATTACK-SESSION-FIXATION](application-gateway-crs-rulegroups-rules.md#crs943)**</span></span>|<span data-ttu-id="c8883-176">Contém regras tooprotect contra ataques de Fixation de sessão.</span><span class="sxs-lookup"><span data-stu-id="c8883-176">Contains rules tooprotect against Session Fixation Attacks.</span></span>|

#### <a name="owasp229"></a><span data-ttu-id="c8883-177">OWASP_2.2.9</span><span class="sxs-lookup"><span data-stu-id="c8883-177">OWASP_2.2.9</span></span>

<span data-ttu-id="c8883-178">conjunto de regras de núcleo Olá 2.2.9 fornecido tem 10 grupos de regras, conforme mostrado na Olá a tabela a seguir.</span><span class="sxs-lookup"><span data-stu-id="c8883-178">hello 2.2.9 core rule set provided has 10 rule groups as shown in hello following table.</span></span> <span data-ttu-id="c8883-179">Cada um desses grupos de regra contém várias regras, que podem ser desabilitadas.</span><span class="sxs-lookup"><span data-stu-id="c8883-179">Each of these rule groups contains multiple rules, which can be disabled.</span></span>

|<span data-ttu-id="c8883-180">RuleGroup</span><span class="sxs-lookup"><span data-stu-id="c8883-180">RuleGroup</span></span>|<span data-ttu-id="c8883-181">Descrição</span><span class="sxs-lookup"><span data-stu-id="c8883-181">Description</span></span>|
|---|---|
|<span data-ttu-id="c8883-182">**[crs_20_protocol_violations](application-gateway-crs-rulegroups-rules.md#crs20)**</span><span class="sxs-lookup"><span data-stu-id="c8883-182">**[crs_20_protocol_violations](application-gateway-crs-rulegroups-rules.md#crs20)**</span></span>|<span data-ttu-id="c8883-183">Contém regras tooprotect contra violações de protocolo (caracteres inválidos, GET com um corpo de solicitação, etc.)</span><span class="sxs-lookup"><span data-stu-id="c8883-183">Contains rules tooprotect against protocol violations (invalid characters, GET with a request body, etc.)</span></span>|
|<span data-ttu-id="c8883-184">**[crs_21_protocol_anomalies](application-gateway-crs-rulegroups-rules.md#crs21)**</span><span class="sxs-lookup"><span data-stu-id="c8883-184">**[crs_21_protocol_anomalies](application-gateway-crs-rulegroups-rules.md#crs21)**</span></span>|<span data-ttu-id="c8883-185">Contém regras tooprotect com informações de cabeçalho incorreto.</span><span class="sxs-lookup"><span data-stu-id="c8883-185">Contains rules tooprotect against incorrect header information.</span></span>|
|<span data-ttu-id="c8883-186">**[crs_23_request_limits](application-gateway-crs-rulegroups-rules.md#crs23)**</span><span class="sxs-lookup"><span data-stu-id="c8883-186">**[crs_23_request_limits](application-gateway-crs-rulegroups-rules.md#crs23)**</span></span>|<span data-ttu-id="c8883-187">Contém regras tooprotect contra argumentos ou arquivos que excedem limitações.</span><span class="sxs-lookup"><span data-stu-id="c8883-187">Contains rules tooprotect against arguments or files that exceed limitations.</span></span>|
|<span data-ttu-id="c8883-188">**[crs_30_http_policy](application-gateway-crs-rulegroups-rules.md#crs30)**</span><span class="sxs-lookup"><span data-stu-id="c8883-188">**[crs_30_http_policy](application-gateway-crs-rulegroups-rules.md#crs30)**</span></span>|<span data-ttu-id="c8883-189">Contém regras tooprotect em métodos restritos, cabeçalhos e tipos de arquivo.</span><span class="sxs-lookup"><span data-stu-id="c8883-189">Contains rules tooprotect against restricted methods, headers, and file types.</span></span> |
|<span data-ttu-id="c8883-190">**[crs_35_bad_robots](application-gateway-crs-rulegroups-rules.md#crs35)**</span><span class="sxs-lookup"><span data-stu-id="c8883-190">**[crs_35_bad_robots](application-gateway-crs-rulegroups-rules.md#crs35)**</span></span>|<span data-ttu-id="c8883-191">Contém regras tooprotect contra rastreadores da web e scanners.</span><span class="sxs-lookup"><span data-stu-id="c8883-191">Contains rules tooprotect against web crawlers and scanners.</span></span>|
|<span data-ttu-id="c8883-192">**[crs_40_generic_attacks](application-gateway-crs-rulegroups-rules.md#crs40)**</span><span class="sxs-lookup"><span data-stu-id="c8883-192">**[crs_40_generic_attacks](application-gateway-crs-rulegroups-rules.md#crs40)**</span></span>|<span data-ttu-id="c8883-193">Contém regras tooprotect contra ataques genéricos (fixation de sessão, inclusão de arquivos remoto, injeção de PHP, etc.)</span><span class="sxs-lookup"><span data-stu-id="c8883-193">Contains rules tooprotect against generic attacks (session fixation, remote file inclusion, PHP injection, etc.)</span></span>|
|<span data-ttu-id="c8883-194">**[crs_41_sql_injection_attacks](application-gateway-crs-rulegroups-rules.md#crs41sql)**</span><span class="sxs-lookup"><span data-stu-id="c8883-194">**[crs_41_sql_injection_attacks](application-gateway-crs-rulegroups-rules.md#crs41sql)**</span></span>|<span data-ttu-id="c8883-195">Contém regras tooprotect contra ataques de injeção de SQL</span><span class="sxs-lookup"><span data-stu-id="c8883-195">Contains rules tooprotect against SQL injection attacks</span></span>|
|<span data-ttu-id="c8883-196">**[crs_41_xss_attacks](application-gateway-crs-rulegroups-rules.md#crs41xss)**</span><span class="sxs-lookup"><span data-stu-id="c8883-196">**[crs_41_xss_attacks](application-gateway-crs-rulegroups-rules.md#crs41xss)**</span></span>|<span data-ttu-id="c8883-197">Contém tooprotect regras contra entre scripts do site.</span><span class="sxs-lookup"><span data-stu-id="c8883-197">Contains rules tooprotect against cross site scripting.</span></span>|
|<span data-ttu-id="c8883-198">**[crs_42_tight_security](application-gateway-crs-rulegroups-rules.md#crs42)**</span><span class="sxs-lookup"><span data-stu-id="c8883-198">**[crs_42_tight_security](application-gateway-crs-rulegroups-rules.md#crs42)**</span></span>|<span data-ttu-id="c8883-199">Contém um tooprotect regra contra ataques de passagem de caminho</span><span class="sxs-lookup"><span data-stu-id="c8883-199">Contains a rule tooprotect against path traversal attacks</span></span>|
|<span data-ttu-id="c8883-200">**[crs_45_trojans](application-gateway-crs-rulegroups-rules.md#crs45)**</span><span class="sxs-lookup"><span data-stu-id="c8883-200">**[crs_45_trojans](application-gateway-crs-rulegroups-rules.md#crs45)**</span></span>|<span data-ttu-id="c8883-201">Contém regras tooprotect contra cavalos de Troia backdoor.</span><span class="sxs-lookup"><span data-stu-id="c8883-201">Contains rules tooprotect against backdoor Trojans.</span></span>|

### <a name="waf-modes"></a><span data-ttu-id="c8883-202">Modos de WAF</span><span class="sxs-lookup"><span data-stu-id="c8883-202">WAF Modes</span></span>

<span data-ttu-id="c8883-203">Application Gateway WAF pode ser configurado toorun em Olá dois modos a seguir:</span><span class="sxs-lookup"><span data-stu-id="c8883-203">Application Gateway WAF can be configured toorun in hello following two modes:</span></span>

* <span data-ttu-id="c8883-204">**Modo de detecção** – quando toorun configurado no modo de detecção do aplicativo Gateway WAF monitora e registra todos os alertas de ameaças no arquivo de log tooa.</span><span class="sxs-lookup"><span data-stu-id="c8883-204">**Detection mode** – When configured toorun in detection mode, Application Gateway WAF monitors and logs all threat alerts in tooa log file.</span></span> <span data-ttu-id="c8883-205">Log de diagnóstico para o Application Gateway deve ser ativado usando Olá **diagnóstico** seção.</span><span class="sxs-lookup"><span data-stu-id="c8883-205">Logging diagnostics for Application Gateway should be turned on using hello **Diagnostics** section.</span></span> <span data-ttu-id="c8883-206">Você também precisa tooensure que Olá WAF log está selecionado e ativado.</span><span class="sxs-lookup"><span data-stu-id="c8883-206">You also need tooensure that hello WAF log is selected and turned on.</span></span> <span data-ttu-id="c8883-207">Ao ser executado no firewall do aplicativo Web no modo de detecção não bloqueia solicitações de entrada.</span><span class="sxs-lookup"><span data-stu-id="c8883-207">When running in detection mode web application firewall does not block incoming requests.</span></span>
* <span data-ttu-id="c8883-208">**Modo de prevenção** – quando toorun configurado no modo de prevenção, Application Gateway ativamente bloqueia invasões e ataques detectados por suas regras.</span><span class="sxs-lookup"><span data-stu-id="c8883-208">**Prevention mode** – When configured toorun in prevention mode, Application Gateway actively blocks intrusions and attacks detected by its rules.</span></span> <span data-ttu-id="c8883-209">invasor Olá recebe uma exceção de acesso não autorizado 403 e conexão Olá é encerrada.</span><span class="sxs-lookup"><span data-stu-id="c8883-209">hello attacker receives a 403 unauthorized access exception and hello connection is terminated.</span></span> <span data-ttu-id="c8883-210">Modo de prevenção continua toolog tais ataques Olá WAF logs.</span><span class="sxs-lookup"><span data-stu-id="c8883-210">Prevention mode continues toolog such attacks in hello WAF logs.</span></span>

### <span data-ttu-id="c8883-211"><a name="application-gateway-waf-reports"></a>Monitoramento de WAF</span><span class="sxs-lookup"><span data-stu-id="c8883-211"><a name="application-gateway-waf-reports"></a>WAF Monitoring</span></span>

<span data-ttu-id="c8883-212">É importante monitorar a integridade de saudação do seu gateway de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="c8883-212">Monitoring hello health of your application gateway is important.</span></span> <span data-ttu-id="c8883-213">Monitorando a integridade de saudação do seu aplicativo firewall e hello aplicativos web que ele protege são fornecidos por meio de registro em log e integração com o Monitor do Azure, Central de segurança do Azure (em breve) e a análise de Log.</span><span class="sxs-lookup"><span data-stu-id="c8883-213">Monitoring hello health of your web application firewall and hello applications that it protects are provided through logging and integration with Azure Monitor, Azure Security Center (coming soon), and Log Analytics.</span></span>

![diagnóstico](./media/application-gateway-web-application-firewall-overview/diagnostics.png)

#### <a name="azure-monitor"></a><span data-ttu-id="c8883-215">Azure Monitor</span><span class="sxs-lookup"><span data-stu-id="c8883-215">Azure Monitor</span></span>

<span data-ttu-id="c8883-216">Cada log de gateway de aplicativo é integrado ao [Azure Monitor](../monitoring-and-diagnostics/monitoring-overview.md).</span><span class="sxs-lookup"><span data-stu-id="c8883-216">Each application gateway log is integrated with [Azure Monitor](../monitoring-and-diagnostics/monitoring-overview.md).</span></span>  <span data-ttu-id="c8883-217">Isso permite que informações de diagnóstico tootrack, incluindo logs e alertas de WAF.</span><span class="sxs-lookup"><span data-stu-id="c8883-217">This allows you tootrack diagnostic information including WAF alerts and logs.</span></span>  <span data-ttu-id="c8883-218">Essa funcionalidade é fornecida em Olá recurso do Application Gateway no portal de saudação em Olá **diagnóstico** guia ou por meio de hello Azure Monitor de serviço diretamente.</span><span class="sxs-lookup"><span data-stu-id="c8883-218">This capability is provided within hello Application Gateway resource in hello portal under hello **Diagnostics** tab or through hello Azure Monitor service directly.</span></span> <span data-ttu-id="c8883-219">toolearn mais sobre como habilitar os logs de diagnóstico para o application gateway visite [diagnóstico Application Gateway](application-gateway-diagnostics.md)</span><span class="sxs-lookup"><span data-stu-id="c8883-219">toolearn more about enabling diagnostic logs for application gateway visit [Application Gateway diagnostics](application-gateway-diagnostics.md)</span></span>

#### <a name="azure-security-center"></a><span data-ttu-id="c8883-220">Central de Segurança do Azure</span><span class="sxs-lookup"><span data-stu-id="c8883-220">Azure Security Center</span></span>

<span data-ttu-id="c8883-221">[Central de segurança do Azure](../security-center/security-center-intro.md) Olá de ajuda a evitar, detectar e responder toothreats maior visibilidade e controle sobre a segurança de seus recursos do Azure.</span><span class="sxs-lookup"><span data-stu-id="c8883-221">[Azure Security Center](../security-center/security-center-intro.md) helps you prevent, detect, and respond toothreats with increased visibility into and control over hello security of your Azure resources.</span></span> <span data-ttu-id="c8883-222">Agora, o gateway de aplicativo [integra a Central de Segurança do Azure](application-gateway-integration-security-center.md).</span><span class="sxs-lookup"><span data-stu-id="c8883-222">Application gateway now [integrates into Azure Security Center](application-gateway-integration-security-center.md).</span></span> <span data-ttu-id="c8883-223">Central de segurança do Azure verifica seus aplicativos de web do ambiente toodetect desprotegido.</span><span class="sxs-lookup"><span data-stu-id="c8883-223">Azure Security Center scans your environment toodetect unprotected web applications.</span></span> <span data-ttu-id="c8883-224">Agora ele pode recomendar application gateway WAF tooprotect esses recursos vulneráveis.</span><span class="sxs-lookup"><span data-stu-id="c8883-224">It can now recommend application gateway WAF tooprotect these vulnerable resources.</span></span> <span data-ttu-id="c8883-225">Você pode criar WAF de gateway do aplicativo diretamente da saudação Central de segurança do Azure.</span><span class="sxs-lookup"><span data-stu-id="c8883-225">You can directly create application gateway WAF from hello Azure Security Center.</span></span>  <span data-ttu-id="c8883-226">Essas instâncias WAF são integradas ao centro de segurança do Azure e envia alertas e informações de integridade volta tooAzure Central de segurança para relatórios.</span><span class="sxs-lookup"><span data-stu-id="c8883-226">These WAF instances are integrated with Azure Security Center and will send alerts and health information back tooAzure Security Center for reporting.</span></span>

![figura 1](./media/application-gateway-web-application-firewall-overview/figure1.png)

#### <a name="logging"></a><span data-ttu-id="c8883-228">Registro em log</span><span class="sxs-lookup"><span data-stu-id="c8883-228">Logging</span></span>

<span data-ttu-id="c8883-229">O WAF do Gateway de Aplicativo fornece relatórios detalhados sobre cada ameaça detectada.</span><span class="sxs-lookup"><span data-stu-id="c8883-229">Application Gateway WAF provides detailed reporting on each threat it detects.</span></span> <span data-ttu-id="c8883-230">O registro em log é integrado aos Logs de diagnóstico do Azure e os alertas são registrados em um formato json.</span><span class="sxs-lookup"><span data-stu-id="c8883-230">Logging is integrated with Azure Diagnostics logs and alerts are recorded in a json format.</span></span> <span data-ttu-id="c8883-231">Esses logs podem ser integrados ao [Log Analytics](../log-analytics/log-analytics-azure-networking-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="c8883-231">These logs can be integrated with [Log Analytics](../log-analytics/log-analytics-azure-networking-analytics.md).</span></span>

![imageURLroute](./media/application-gateway-web-application-firewall-overview/waf2.png)

```json
{
  "resourceId": "/SUBSCRIPTIONS/{subscriptionId}/RESOURCEGROUPS/{resourceGroupId}/PROVIDERS/MICROSOFT.NETWORK/APPLICATIONGATEWAYS/{appGatewayName}",
  "operationName": "ApplicationGatewayFirewall",
  "time": "2017-03-20T15:52:09.1494499Z",
  "category": "ApplicationGatewayFirewallLog",
  "properties": {
    "instanceId": "ApplicationGatewayRole_IN_0",
    "clientIp": "104.210.252.3",
    "clientPort": "4835",
    "requestUri": "/?a=%3Cscript%3Ealert(%22Hello%22);%3C/script%3E",
    "ruleSetType": "OWASP",
    "ruleSetVersion": "3.0",
    "ruleId": "941320",
    "message": "Possible XSS Attack Detected - HTML Tag Handler",
    "action": "Blocked",
    "site": "Global",
    "details": {
      "message": "Warning. Pattern match \"<(a|abbr|acronym|address|applet|area|audioscope|b|base|basefront|bdo|bgsound|big|blackface|blink|blockquote|body|bq|br|button|caption|center|cite|code|col|colgroup|comment|dd|del|dfn|dir|div|dl|dt|em|embed|fieldset|fn|font|form|frame|frameset|h1|head|h ...\" at ARGS:a.",
      "data": "Matched Data: <script> found within ARGS:a: <script>alert(\\x22hello\\x22);</script>",
      "file": "rules/REQUEST-941-APPLICATION-ATTACK-XSS.conf",
      "line": "865"
    }
  }
} 

```

## <a name="application-gateway-waf-sku-pricing"></a><span data-ttu-id="c8883-233">Preços da SKU do WAF do Gateway de Aplicativo</span><span class="sxs-lookup"><span data-stu-id="c8883-233">Application Gateway WAF SKU pricing</span></span>

<span data-ttu-id="c8883-234">O firewall de aplicativo Web está disponível em um novo um SKU do WAF.</span><span class="sxs-lookup"><span data-stu-id="c8883-234">Web application firewall is available under a new a WAF SKU.</span></span> <span data-ttu-id="c8883-235">Este SKU está disponível apenas no modelo de provisionamento do Azure Resource Manager e não no modelo de implantação clássico de saudação.</span><span class="sxs-lookup"><span data-stu-id="c8883-235">This SKU is available only in Azure Resource Manager provisioning model and not under hello classic deployment model.</span></span> <span data-ttu-id="c8883-236">Além disso, o SKU do WAF vem apenas em instâncias de gateway de aplicativo médias e grandes.</span><span class="sxs-lookup"><span data-stu-id="c8883-236">Additionally WAF SKU comes only in medium and large application gateway instance sizes.</span></span> <span data-ttu-id="c8883-237">Todos os limites de saudação para o application gateway também se aplicam a toohello WAF SKU.</span><span class="sxs-lookup"><span data-stu-id="c8883-237">All hello limits for application gateway also apply toohello WAF SKU.</span></span> <span data-ttu-id="c8883-238">Preço tem base nos encargos por hora da instância do gateway e nos encargos de processamento de dados.</span><span class="sxs-lookup"><span data-stu-id="c8883-238">Pricing is based on per hour gateway instance charge and data processing charge.</span></span> <span data-ttu-id="c8883-239">O preços do gateway por hora para o SKU do WAF é diferente dos encargos pelo SKU Standard e podem ser encontrados em [Detalhes de preços do Gateway de Aplicativo](https://azure.microsoft.com/pricing/details/application-gateway/).</span><span class="sxs-lookup"><span data-stu-id="c8883-239">Per hour gateway pricing for WAF SKU is different from Standard SKU charges and can be found at [Application Gateway pricing details](https://azure.microsoft.com/pricing/details/application-gateway/).</span></span> <span data-ttu-id="c8883-240">Processamento de dados permaneçam encargos Olá mesmo.</span><span class="sxs-lookup"><span data-stu-id="c8883-240">Data processing charges remain hello same.</span></span> <span data-ttu-id="c8883-241">Não há cobrança por regra ou grupo de regras.</span><span class="sxs-lookup"><span data-stu-id="c8883-241">There is no per rule or rule group charges.</span></span> <span data-ttu-id="c8883-242">Você pode proteger vários aplicativos web por trás Olá mesmo web firewall do aplicativo e não há nenhuma cobrança adicional para dar suporte a vários aplicativos.</span><span class="sxs-lookup"><span data-stu-id="c8883-242">You can protect multiple web applications behind hello same web application firewall and there are no additional charges for supporting multiple applications.</span></span> 

<span data-ttu-id="c8883-243">A cobrança para WAF começa efetivamente 5/5/2017, até que, em seguida, Olá gateways SKU WAF continua toobe cobrado em taxas padrão.</span><span class="sxs-lookup"><span data-stu-id="c8883-243">Billing for WAF starts effectively 5/5/2017, until then hello WAF SKU gateways continues toobe charged at standard rates.</span></span>

## <a name="next-steps"></a><span data-ttu-id="c8883-244">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="c8883-244">Next steps</span></span>

<span data-ttu-id="c8883-245">Depois de aprender mais sobre os recursos de saudação do WAF, visite [como tooconfigure web firewall do aplicativo no Application Gateway](application-gateway-web-application-firewall-portal.md).</span><span class="sxs-lookup"><span data-stu-id="c8883-245">After learning more about hello capabilities of WAF, visit [How tooconfigure web application firewall on Application Gateway](application-gateway-web-application-firewall-portal.md).</span></span>

