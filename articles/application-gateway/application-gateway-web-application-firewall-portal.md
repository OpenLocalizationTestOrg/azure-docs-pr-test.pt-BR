---
title: Criar ou atualizar um Gateway de Aplicativo do Azure com o firewall do aplicativo Web | Microsoft Docs
description: Saiba como criar um Gateway de Aplicativo com o firewall do aplicativo Web usando o portal
services: application-gateway
documentationcenter: na
author: georgewallace
manager: timlt
editor: tysonn
tags: azure-resource-manager
ms.assetid: b561a210-ed99-4ab4-be06-b49215e3255a
ms.service: application-gateway
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 05/03/2017
ms.author: gwallace
ms.openlocfilehash: 650f26d19615d27a94f3947aad7b7904b6c1fabc
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/18/2017
---
# <a name="create-an-application-gateway-with-web-application-firewall-by-using-the-portal"></a><span data-ttu-id="810c3-103">Criar um gateway de aplicativo com o firewall do aplicativo Web usando o portal</span><span class="sxs-lookup"><span data-stu-id="810c3-103">Create an application gateway with web application firewall by using the portal</span></span>

> [!div class="op_single_selector"]
> * [<span data-ttu-id="810c3-104">Portal do Azure</span><span class="sxs-lookup"><span data-stu-id="810c3-104">Azure portal</span></span>](application-gateway-web-application-firewall-portal.md)
> * [<span data-ttu-id="810c3-105">PowerShell</span><span class="sxs-lookup"><span data-stu-id="810c3-105">PowerShell</span></span>](application-gateway-web-application-firewall-powershell.md)
> * [<span data-ttu-id="810c3-106">CLI do Azure</span><span class="sxs-lookup"><span data-stu-id="810c3-106">Azure CLI</span></span>](application-gateway-web-application-firewall-cli.md)

<span data-ttu-id="810c3-107">Aprenda como criar um gateway de aplicativo habilitado para firewall de aplicativo Web.</span><span class="sxs-lookup"><span data-stu-id="810c3-107">Learn how to create a web application firewall enabled application gateway.</span></span>

<span data-ttu-id="810c3-108">O firewall de aplicativo Web (WAF) no Gateway de Aplicativo do Azure protege os aplicativos Web contra ataques comuns baseados na Web, como injeção de SQL, ataques de scripts entre sites e sequestros de sessão.</span><span class="sxs-lookup"><span data-stu-id="810c3-108">The web application firewall (WAF) in Azure Application Gateway protects web applications from common web-based attacks like SQL injection, cross-site scripting attacks, and session hijacks.</span></span> <span data-ttu-id="810c3-109">O aplicativo Web protege contra muitas das 10 principais vulnerabilidades da Web OWASP.</span><span class="sxs-lookup"><span data-stu-id="810c3-109">Web application protects against many of the OWASP top 10 common web vulnerabilities.</span></span>

## <a name="scenarios"></a><span data-ttu-id="810c3-110">Cenários</span><span class="sxs-lookup"><span data-stu-id="810c3-110">Scenarios</span></span>

<span data-ttu-id="810c3-111">Neste artigo, há dois cenários:</span><span class="sxs-lookup"><span data-stu-id="810c3-111">In this article there are two scenarios:</span></span>

<span data-ttu-id="810c3-112">No primeiro cenário, você aprenderá a [criar um gateway de aplicativo com o firewall do aplicativo Web](#create-an-application-gateway-with-web-application-firewall)</span><span class="sxs-lookup"><span data-stu-id="810c3-112">In the first scenario, you learn to [create an application gateway with web application firewall](#create-an-application-gateway-with-web-application-firewall)</span></span>

<span data-ttu-id="810c3-113">No segundo cenário, você aprende a [adicionar o firewall do aplicativo Web a um gateway de aplicativo existente](#add-web-application-firewall-to-an-existing-application-gateway).</span><span class="sxs-lookup"><span data-stu-id="810c3-113">In the second scenario, you learn to [add web application firewall to an existing application gateway](#add-web-application-firewall-to-an-existing-application-gateway).</span></span>

![Cenário de exemplo][scenario]

> [!NOTE]
> <span data-ttu-id="810c3-115">A configuração adicional do Gateway de Aplicativo, incluindo investigações de integridade personalizadas, endereços de pool de back-end e regras adicionais são configuradas após o Gateway de Aplicativo ser configurado e não durante a implantação inicial.</span><span class="sxs-lookup"><span data-stu-id="810c3-115">Additional configuration of the application gateway, including custom health probes, backend pool addresses, and additional rules are configured after the application gateway is configured and not during initial deployment.</span></span>

## <a name="before-you-begin"></a><span data-ttu-id="810c3-116">Antes de começar</span><span class="sxs-lookup"><span data-stu-id="810c3-116">Before you begin</span></span>

<span data-ttu-id="810c3-117">O Gateway de Aplicativo do Azure requer sua própria sub-rede.</span><span class="sxs-lookup"><span data-stu-id="810c3-117">Azure Application Gateway requires its own subnet.</span></span> <span data-ttu-id="810c3-118">Ao criar uma rede virtual, certifique-se de deixar espaço de endereço suficiente para ter várias sub-redes.</span><span class="sxs-lookup"><span data-stu-id="810c3-118">When creating a virtual network, ensure that you leave enough address space to have multiple subnets.</span></span> <span data-ttu-id="810c3-119">Depois de implantar um gateway de aplicativo a uma sub-rede, apenas gateway de aplicativos adicionais poderão ser adicionados à sub-rede.</span><span class="sxs-lookup"><span data-stu-id="810c3-119">Once you deploy an application gateway to a subnet, only additional application gateways are able to be added to the subnet.</span></span>

##<span data-ttu-id="810c3-120"><a name="add-web-application-firewall-to-an-existing-application-gateway"></a> Adicionar o firewall do aplicativo Web a um gateway de aplicativo existente</span><span class="sxs-lookup"><span data-stu-id="810c3-120"><a name="add-web-application-firewall-to-an-existing-application-gateway"></a> Add web application firewall to an existing application gateway</span></span>

<span data-ttu-id="810c3-121">Este exemplo atualiza um gateway de aplicativo existente para dar suporte ao firewall do aplicativo Web no modo de prevenção.</span><span class="sxs-lookup"><span data-stu-id="810c3-121">This example updates an existing application gateway to support web application firewall in prevention mode.</span></span>

1. <span data-ttu-id="810c3-122">No painel **Favoritos** do portal do Azure, clique em **Todos os recursos**.</span><span class="sxs-lookup"><span data-stu-id="810c3-122">In the Azure portal **Favorites** pane, click **All resources**.</span></span> <span data-ttu-id="810c3-123">Clique no Gateway de Aplicativo existente, na folha **Todos os recursos**.</span><span class="sxs-lookup"><span data-stu-id="810c3-123">Click the existing Application Gateway in the **All resources** blade.</span></span> <span data-ttu-id="810c3-124">Se a assinatura que você selecionou já contém vários recursos, você pode inserir o nome em **Filtrar por nome...**</span><span class="sxs-lookup"><span data-stu-id="810c3-124">If the subscription you selected already has several resources in it, you can enter the name in the **Filter by name…**</span></span> <span data-ttu-id="810c3-125">para acessar a Zona DNS facilmente.</span><span class="sxs-lookup"><span data-stu-id="810c3-125">box to easily access the DNS zone.</span></span>

   ![Criação de um gateway de aplicativo][1]

1. <span data-ttu-id="810c3-127">Clique em **Firewall do Aplicativo Web** e atualize as configurações do gateway de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="810c3-127">Click **Web application firewall** and update the application gateway settings.</span></span> <span data-ttu-id="810c3-128">Quando concluir, clique em **Salvar**</span><span class="sxs-lookup"><span data-stu-id="810c3-128">When complete click **Save**</span></span>

    <span data-ttu-id="810c3-129">As configurações para atualizar um gateway de aplicativo existente para dar suporte ao firewall do aplicativo da Web são:</span><span class="sxs-lookup"><span data-stu-id="810c3-129">The settings to update an existing application gateway to support web application firewall are:</span></span>

   | <span data-ttu-id="810c3-130">**Configuração**</span><span class="sxs-lookup"><span data-stu-id="810c3-130">**Setting**</span></span> | <span data-ttu-id="810c3-131">**Valor**</span><span class="sxs-lookup"><span data-stu-id="810c3-131">**Value**</span></span> | <span data-ttu-id="810c3-132">**Detalhes**</span><span class="sxs-lookup"><span data-stu-id="810c3-132">**Details**</span></span>
   |---|---|---|
   |<span data-ttu-id="810c3-133">**Atualizar para a camada WAF**</span><span class="sxs-lookup"><span data-stu-id="810c3-133">**Upgrade to WAF Tier**</span></span>| <span data-ttu-id="810c3-134">Verificado</span><span class="sxs-lookup"><span data-stu-id="810c3-134">Checked</span></span> | <span data-ttu-id="810c3-135">Isso define a camada do gateway de aplicativo para a camada WAF.</span><span class="sxs-lookup"><span data-stu-id="810c3-135">This sets the tier of the application gateway to the WAF tier.</span></span>|
   |<span data-ttu-id="810c3-136">**Status do firewall**</span><span class="sxs-lookup"><span data-stu-id="810c3-136">**Firewall status**</span></span>| <span data-ttu-id="810c3-137">Habilitado</span><span class="sxs-lookup"><span data-stu-id="810c3-137">Enabled</span></span> | <span data-ttu-id="810c3-138">Essa configuração habilita o firewall no WAF.</span><span class="sxs-lookup"><span data-stu-id="810c3-138">This setting enables the firewall on the WAF.</span></span>|
   |<span data-ttu-id="810c3-139">**Modo de firewall**</span><span class="sxs-lookup"><span data-stu-id="810c3-139">**Firewall mode**</span></span> | <span data-ttu-id="810c3-140">Prevenção</span><span class="sxs-lookup"><span data-stu-id="810c3-140">Prevention</span></span> | <span data-ttu-id="810c3-141">Essa configuração é como o firewall do aplicativo Web lida com o tráfego mal-intencionado.</span><span class="sxs-lookup"><span data-stu-id="810c3-141">This setting is how web application firewall deals with malicious traffic.</span></span> <span data-ttu-id="810c3-142">O modo **Detecção** só registra em log os eventos, onde o modo **Prevenção** registra os eventos e interrompe o tráfego mal-intencionado.</span><span class="sxs-lookup"><span data-stu-id="810c3-142">**Detection** mode only logs the events, where **Prevention** mode logs the events and stops the malicious traffic.</span></span>|
   |<span data-ttu-id="810c3-143">**Conjunto de regras**</span><span class="sxs-lookup"><span data-stu-id="810c3-143">**Rule set**</span></span>|<span data-ttu-id="810c3-144">3.0</span><span class="sxs-lookup"><span data-stu-id="810c3-144">3.0</span></span>|<span data-ttu-id="810c3-145">Essa configuração determina o [conjunto principal de regras](application-gateway-web-application-firewall-overview.md#core-rule-sets) usado para proteger os membros do pool de back-end.</span><span class="sxs-lookup"><span data-stu-id="810c3-145">This setting determines the [core rule set](application-gateway-web-application-firewall-overview.md#core-rule-sets) that is used to protect the backend pool members.</span></span>|
   |<span data-ttu-id="810c3-146">**Configurar regras desabilitadas**</span><span class="sxs-lookup"><span data-stu-id="810c3-146">**Configure disabled rules**</span></span>|<span data-ttu-id="810c3-147">varia</span><span class="sxs-lookup"><span data-stu-id="810c3-147">varies</span></span>|<span data-ttu-id="810c3-148">Para evitar possíveis falsos positivos, essa configuração permite que você desabilite certas [regras e grupos de regras](application-gateway-crs-rulegroups-rules.md).</span><span class="sxs-lookup"><span data-stu-id="810c3-148">To prevent possible false positives, this setting allows you to disable certain [rules and rule groups](application-gateway-crs-rulegroups-rules.md).</span></span>|

    >[!NOTE]
    > <span data-ttu-id="810c3-149">Ao fazer o upgrade de um gateway de aplicativo existente para o SKU do WAF, o tamanho do SKU muda para **médio**.</span><span class="sxs-lookup"><span data-stu-id="810c3-149">When upgrading an existing application gateway to the WAF SKU, the SKU size changes to **medium**.</span></span> <span data-ttu-id="810c3-150">Isso pode ser reconfigurado após a conclusão da configuração.</span><span class="sxs-lookup"><span data-stu-id="810c3-150">This can be reconfigured after configuration is complete.</span></span>

    ![folha mostrando configurações básicas][2-1]

    > [!NOTE]
    > <span data-ttu-id="810c3-152">Para exibir logs de firewall do aplicativo Web, o diagnóstico deve ser habilitado e ApplicationGatewayFirewallLog selecionado.</span><span class="sxs-lookup"><span data-stu-id="810c3-152">To view web application firewall logs, diagnostics must be enabled and ApplicationGatewayFirewallLog selected.</span></span> <span data-ttu-id="810c3-153">É possível escolher uma contagem de instâncias de 1 para fins de teste.</span><span class="sxs-lookup"><span data-stu-id="810c3-153">An instance count of 1 can be chosen for testing purposes.</span></span> <span data-ttu-id="810c3-154">É importante saber que qualquer contagem de instâncias em duas instâncias não é coberta por um SLA e, portanto, não são recomendadas.</span><span class="sxs-lookup"><span data-stu-id="810c3-154">It is important to know that any instance count under two instances is not covered by the SLA and are therefore not recommended.</span></span> <span data-ttu-id="810c3-155">Os gateways pequenos não estão disponíveis ao usar o firewall do aplicativo Web.</span><span class="sxs-lookup"><span data-stu-id="810c3-155">Small gateways are not available when using web application firewall.</span></span>

## <a name="create-an-application-gateway-with-web-application-firewall"></a><span data-ttu-id="810c3-156">criar um gateway de aplicativo com o firewall do aplicativo Web</span><span class="sxs-lookup"><span data-stu-id="810c3-156">Create an application gateway with web application firewall</span></span>

<span data-ttu-id="810c3-157">Este cenário:</span><span class="sxs-lookup"><span data-stu-id="810c3-157">This scenario will:</span></span>

* <span data-ttu-id="810c3-158">Crie um gateway de aplicativo de firewall do aplicativo Web médio com duas instâncias.</span><span class="sxs-lookup"><span data-stu-id="810c3-158">Create a medium web application firewall application gateway with two instances.</span></span>
* <span data-ttu-id="810c3-159">Criará uma rede virtual chamada AdatumAppGatewayVNET, com um bloco CIDR 10.0.0.0/16 reservado.</span><span class="sxs-lookup"><span data-stu-id="810c3-159">Create a virtual network named AdatumAppGatewayVNET with a reserved CIDR block of 10.0.0.0/16.</span></span>
* <span data-ttu-id="810c3-160">Criará uma sub-rede chamada Appgatewaysubnet que usa 10.0.0.0/28 como seu bloco CIDR.</span><span class="sxs-lookup"><span data-stu-id="810c3-160">Create a subnet called Appgatewaysubnet that uses 10.0.0.0/28 as its CIDR block.</span></span>
* <span data-ttu-id="810c3-161">Configurará um certificado para descarregamento SSL.</span><span class="sxs-lookup"><span data-stu-id="810c3-161">Configure a certificate for SSL offload.</span></span>

1. <span data-ttu-id="810c3-162">Faça logon no [Portal do Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="810c3-162">Log in to the [Azure portal](https://portal.azure.com).</span></span> <span data-ttu-id="810c3-163">Caso você ainda não tenha uma conta, poderá se inscrever para obter uma [avaliação gratuita de um mês](https://azure.microsoft.com/free)</span><span class="sxs-lookup"><span data-stu-id="810c3-163">If you don't already have an account, you can sign up for a [free one-month trial](https://azure.microsoft.com/free)</span></span>
1. <span data-ttu-id="810c3-164">No painel Favoritos do portal, clique em **Novo**</span><span class="sxs-lookup"><span data-stu-id="810c3-164">In the Favorites pane of the portal, click **New**</span></span>
1. <span data-ttu-id="810c3-165">Na folha **Novo**, clique em **Rede**.</span><span class="sxs-lookup"><span data-stu-id="810c3-165">In the **New** blade, click **Networking**.</span></span> <span data-ttu-id="810c3-166">Na folha **Rede**, clique em **Gateway de Aplicativo**, conforme mostrado na seguinte imagem:</span><span class="sxs-lookup"><span data-stu-id="810c3-166">In the **Networking** blade, click **Application Gateway**, as shown in the following image:</span></span>
1. <span data-ttu-id="810c3-167">Navegue até o portal do Azure, clique em **Novo** > **Rede** > **Gateway de Aplicativo**</span><span class="sxs-lookup"><span data-stu-id="810c3-167">Navigate to the Azure portal, click **New** > **Networking** > **Application Gateway**</span></span>

    ![Criação de um gateway de aplicativo][1]

1. <span data-ttu-id="810c3-169">Na folha **Informações Básicas** exibida, insira os seguintes valores e clique em **OK**:</span><span class="sxs-lookup"><span data-stu-id="810c3-169">In the **Basics** blade that appears, enter the following values, then click **OK**:</span></span>

   | <span data-ttu-id="810c3-170">**Configuração**</span><span class="sxs-lookup"><span data-stu-id="810c3-170">**Setting**</span></span> | <span data-ttu-id="810c3-171">**Valor**</span><span class="sxs-lookup"><span data-stu-id="810c3-171">**Value**</span></span> | <span data-ttu-id="810c3-172">**Detalhes**</span><span class="sxs-lookup"><span data-stu-id="810c3-172">**Details**</span></span>
   |---|---|---|
   |<span data-ttu-id="810c3-173">**Nome**</span><span class="sxs-lookup"><span data-stu-id="810c3-173">**Name**</span></span>|<span data-ttu-id="810c3-174">AdatumAppGateway</span><span class="sxs-lookup"><span data-stu-id="810c3-174">AdatumAppGateway</span></span>|<span data-ttu-id="810c3-175">O nome do gateway de aplicativo</span><span class="sxs-lookup"><span data-stu-id="810c3-175">The name of the application gateway</span></span>|
   |<span data-ttu-id="810c3-176">**Camada**</span><span class="sxs-lookup"><span data-stu-id="810c3-176">**Tier**</span></span>|<span data-ttu-id="810c3-177">WAF</span><span class="sxs-lookup"><span data-stu-id="810c3-177">WAF</span></span>|<span data-ttu-id="810c3-178">Os valores disponíveis são Standard e WAF.</span><span class="sxs-lookup"><span data-stu-id="810c3-178">Available values are Standard and WAF.</span></span> <span data-ttu-id="810c3-179">Visite a página [Firewall do aplicativo Web](application-gateway-web-application-firewall-overview.md) para saber mais sobre o WAF.</span><span class="sxs-lookup"><span data-stu-id="810c3-179">Visit [web application firewall](application-gateway-web-application-firewall-overview.md) to learn more about WAF.</span></span>|
   |<span data-ttu-id="810c3-180">**Tamanho do SKU**</span><span class="sxs-lookup"><span data-stu-id="810c3-180">**SKU Size**</span></span>|<span data-ttu-id="810c3-181">Média</span><span class="sxs-lookup"><span data-stu-id="810c3-181">Medium</span></span>|<span data-ttu-id="810c3-182">As opções ao escolher a camada Standard são Pequeno, Médio e Grande.</span><span class="sxs-lookup"><span data-stu-id="810c3-182">Choices when choosing Standard tier are Small, Medium, and Large.</span></span> <span data-ttu-id="810c3-183">Ao escolher a camada do WAF, as opções são apenas Médio e Grande.</span><span class="sxs-lookup"><span data-stu-id="810c3-183">When choosing WAF tier, options are Medium and Large only.</span></span>|
   |<span data-ttu-id="810c3-184">**Contagem de instâncias**</span><span class="sxs-lookup"><span data-stu-id="810c3-184">**Instance count**</span></span>|<span data-ttu-id="810c3-185">2</span><span class="sxs-lookup"><span data-stu-id="810c3-185">2</span></span>|<span data-ttu-id="810c3-186">Número de instâncias do gateway de aplicativo para alta disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="810c3-186">Number of instances of the application gateway for high availability.</span></span> <span data-ttu-id="810c3-187">Contagens de instância iguais a 1 devem ser usadas apenas para fins de teste.</span><span class="sxs-lookup"><span data-stu-id="810c3-187">Instance counts of 1 should only be used for testing purposes.</span></span>|
   |<span data-ttu-id="810c3-188">**Assinatura**</span><span class="sxs-lookup"><span data-stu-id="810c3-188">**Subscription**</span></span>|<span data-ttu-id="810c3-189">[Sua assinatura]</span><span class="sxs-lookup"><span data-stu-id="810c3-189">[Your subscription]</span></span>|<span data-ttu-id="810c3-190">Selecione uma assinatura na qual o gateway de aplicativo será criado.</span><span class="sxs-lookup"><span data-stu-id="810c3-190">Select a subscription to create the application gateway in.</span></span>|
   |<span data-ttu-id="810c3-191">**Grupo de recursos**</span><span class="sxs-lookup"><span data-stu-id="810c3-191">**Resource group**</span></span>|<span data-ttu-id="810c3-192">**Criar novo:** AdatumAppGatewayRG</span><span class="sxs-lookup"><span data-stu-id="810c3-192">**Create new:** AdatumAppGatewayRG</span></span>|<span data-ttu-id="810c3-193">Crie um grupos de recursos.</span><span class="sxs-lookup"><span data-stu-id="810c3-193">Create a resource group.</span></span> <span data-ttu-id="810c3-194">O nome do grupo de recursos deve ser exclusivo na assinatura selecionada.</span><span class="sxs-lookup"><span data-stu-id="810c3-194">The resource group name must be unique within the subscription you selected.</span></span> <span data-ttu-id="810c3-195">Para saber mais sobre grupos de recursos, leia o artigo [Visão geral do Gerenciador de Recursos](../azure-resource-manager/resource-group-overview.md?toc=%2fazure%2fapplication-gateway%2ftoc.json#resource-groups).</span><span class="sxs-lookup"><span data-stu-id="810c3-195">To learn more about resource groups, read the [Resource Manager](../azure-resource-manager/resource-group-overview.md?toc=%2fazure%2fapplication-gateway%2ftoc.json#resource-groups) overview article.</span></span>|
   |<span data-ttu-id="810c3-196">**Localidade**</span><span class="sxs-lookup"><span data-stu-id="810c3-196">**Location**</span></span>|<span data-ttu-id="810c3-197">Oeste dos EUA</span><span class="sxs-lookup"><span data-stu-id="810c3-197">West US</span></span>||

   ![folha mostrando configurações básicas][2-2]

1. <span data-ttu-id="810c3-199">Na folha **Configurações** exibida em **Rede virtual**, clique em **Escolher uma rede virtual**.</span><span class="sxs-lookup"><span data-stu-id="810c3-199">In the **Settings** blade that appears under **Virtual network**, click **Choose a virtual network**.</span></span> <span data-ttu-id="810c3-200">Essa etapa abre a folha **Escolher rede virtual**.</span><span class="sxs-lookup"><span data-stu-id="810c3-200">This step opens enter the **Choose virtual network** blade.</span></span>  <span data-ttu-id="810c3-201">Clique em **Criar nova** para abrir a folha **Criar rede virtual**.</span><span class="sxs-lookup"><span data-stu-id="810c3-201">Click **Create new** to open the **Create virtual network** blade.</span></span>

   ![escolher uma rede virtual][2]

1. <span data-ttu-id="810c3-203">Na folha **Criar rede virtual**, insira os valores a seguir e clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="810c3-203">On the **Create virtual network blade** enter the following values, then click **OK**.</span></span> <span data-ttu-id="810c3-204">Essa etapa fecha as folhas **Criar rede virtual** e **Escolher rede virtual**.</span><span class="sxs-lookup"><span data-stu-id="810c3-204">This step closes the **Create virtual network** and **Choose virtual network** blades.</span></span> <span data-ttu-id="810c3-205">Isso popula o campo **Sub-rede** na folha **Configurações** com a sub-rede escolhida.</span><span class="sxs-lookup"><span data-stu-id="810c3-205">This populates the **Subnet** field on the **Settings** blade with the subnet chosen.</span></span>

   |<span data-ttu-id="810c3-206">**Configuração**</span><span class="sxs-lookup"><span data-stu-id="810c3-206">**Setting**</span></span> | <span data-ttu-id="810c3-207">**Valor**</span><span class="sxs-lookup"><span data-stu-id="810c3-207">**Value**</span></span> | <span data-ttu-id="810c3-208">**Detalhes**</span><span class="sxs-lookup"><span data-stu-id="810c3-208">**Details**</span></span> |
   |---|---|---|
   |<span data-ttu-id="810c3-209">**Nome**</span><span class="sxs-lookup"><span data-stu-id="810c3-209">**Name**</span></span>|<span data-ttu-id="810c3-210">AdatumAppGatewayVNET</span><span class="sxs-lookup"><span data-stu-id="810c3-210">AdatumAppGatewayVNET</span></span>|<span data-ttu-id="810c3-211">Nome do gateway de aplicativo</span><span class="sxs-lookup"><span data-stu-id="810c3-211">Name of the application gateway</span></span>|
   |<span data-ttu-id="810c3-212">**Espaço de Endereço**</span><span class="sxs-lookup"><span data-stu-id="810c3-212">**Address Space**</span></span>|<span data-ttu-id="810c3-213">10.0.0.0/16</span><span class="sxs-lookup"><span data-stu-id="810c3-213">10.0.0.0/16</span></span>| <span data-ttu-id="810c3-214">Esse valor é o espaço de endereço da rede virtual</span><span class="sxs-lookup"><span data-stu-id="810c3-214">This value is the address space for the virtual network</span></span>|
   |<span data-ttu-id="810c3-215">**Nome da sub-rede**</span><span class="sxs-lookup"><span data-stu-id="810c3-215">**Subnet name**</span></span>|<span data-ttu-id="810c3-216">AppGatewaySubnet</span><span class="sxs-lookup"><span data-stu-id="810c3-216">AppGatewaySubnet</span></span>|<span data-ttu-id="810c3-217">Nome da sub-rede do gateway de aplicativo</span><span class="sxs-lookup"><span data-stu-id="810c3-217">Name of the subnet for the application gateway</span></span>|
   |<span data-ttu-id="810c3-218">**Intervalo de endereços da sub-rede**</span><span class="sxs-lookup"><span data-stu-id="810c3-218">**Subnet address range**</span></span>|<span data-ttu-id="810c3-219">10.0.0.0/28</span><span class="sxs-lookup"><span data-stu-id="810c3-219">10.0.0.0/28</span></span> | <span data-ttu-id="810c3-220">Essa sub-rede permite sub-redes adicionais na rede virtual para membros do pool de back-end</span><span class="sxs-lookup"><span data-stu-id="810c3-220">This subnet allows more additional subnets in the virtual network for backend pool members</span></span>|

1. <span data-ttu-id="810c3-221">Na folha **Configurações** em **Configuração de IP de front-end**, escolha **Público** como o **Tipo de endereço IP**</span><span class="sxs-lookup"><span data-stu-id="810c3-221">On the **Settings** blade under **Frontend IP configuration**, choose **Public** as the **IP address type**</span></span>

1. <span data-ttu-id="810c3-222">Na folha **Configurações** em **Endereço IP público**, clique em **Escolher um endereço IP público**. Essa etapa abrirá a folha **Escolher o endereço IP público**. Em seguida, clique em **Criar novo**.</span><span class="sxs-lookup"><span data-stu-id="810c3-222">On the **Settings** blade under **Public IP address**, click **Choose a public IP address**, this step opens the **Choose public IP address** blade, click **Create new**.</span></span>

   ![escolher o IP público][3]

1. <span data-ttu-id="810c3-224">Na folha **Criar endereço IP público**, aceite o valor padrão e clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="810c3-224">On the **Create public IP address** blade, accept the default value, and click **OK**.</span></span> <span data-ttu-id="810c3-225">Essa etapa fechará as folhas **Escolher endereço IP público** e **Criar endereço IP público** e populará **Endereço IP público** com o endereço IP público escolhido.</span><span class="sxs-lookup"><span data-stu-id="810c3-225">This step closes the **Choose public IP address** blade, the **Create public IP address** blade, and populate **Public IP address** with the public IP address chosen.</span></span>

1. <span data-ttu-id="810c3-226">Na folha **Configurações** em **Configuração do ouvinte**, clique em **HTTP** sob **Protocolo**.</span><span class="sxs-lookup"><span data-stu-id="810c3-226">On the **Settings** blade under **Listener configuration**, click **HTTP** under **Protocol**.</span></span> <span data-ttu-id="810c3-227">Um certificado é necessário para usar **https**.</span><span class="sxs-lookup"><span data-stu-id="810c3-227">To use **https**, a certificate is required.</span></span> <span data-ttu-id="810c3-228">A chave privada do certificado é necessária, portanto uma exportação .pfx do certificado é necessária para ser fornecida, além da senha do arquivo.</span><span class="sxs-lookup"><span data-stu-id="810c3-228">The private key of the certificate is needed so a .pfx export of the certificate needs to be provided and the password for the file.</span></span>

1. <span data-ttu-id="810c3-229">Definir as configurações específicas do **WAF** .</span><span class="sxs-lookup"><span data-stu-id="810c3-229">Configure the **WAF** specific settings.</span></span>

   |<span data-ttu-id="810c3-230">**Configuração**</span><span class="sxs-lookup"><span data-stu-id="810c3-230">**Setting**</span></span> | <span data-ttu-id="810c3-231">**Valor**</span><span class="sxs-lookup"><span data-stu-id="810c3-231">**Value**</span></span> | <span data-ttu-id="810c3-232">**Detalhes**</span><span class="sxs-lookup"><span data-stu-id="810c3-232">**Details**</span></span> |
   |---|---|---|
   |<span data-ttu-id="810c3-233">**Status do firewall**</span><span class="sxs-lookup"><span data-stu-id="810c3-233">**Firewall status**</span></span>| <span data-ttu-id="810c3-234">habilitado</span><span class="sxs-lookup"><span data-stu-id="810c3-234">Enabled</span></span>| <span data-ttu-id="810c3-235">Essa configuração ativa ou desativa o WAF.</span><span class="sxs-lookup"><span data-stu-id="810c3-235">This setting turns WAF on or off.</span></span>|
   |<span data-ttu-id="810c3-236">**Modo de firewall**</span><span class="sxs-lookup"><span data-stu-id="810c3-236">**Firewall mode**</span></span> | <span data-ttu-id="810c3-237">Prevenção</span><span class="sxs-lookup"><span data-stu-id="810c3-237">Prevention</span></span>| <span data-ttu-id="810c3-238">Essa configuração determina as ações tomadas pelo WAF em relação ao tráfego mal-intencionado.</span><span class="sxs-lookup"><span data-stu-id="810c3-238">This setting determines the actions WAF takes on malicious traffic.</span></span> <span data-ttu-id="810c3-239">Se **Detecção** for escolhido, o tráfego só será registrado em log.</span><span class="sxs-lookup"><span data-stu-id="810c3-239">If **Detection** is chosen, traffic is only logged.</span></span>  <span data-ttu-id="810c3-240">Se **Prevenção** for escolhido, o tráfego será registrado em log e interrompido com uma resposta 403 Não Autorizado.</span><span class="sxs-lookup"><span data-stu-id="810c3-240">If **Prevention** is chosen, traffic is logged and stopped with a 403 Unauthorized response.</span></span>|


1. <span data-ttu-id="810c3-241">Examine a página Resumo e clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="810c3-241">Review the Summary page and click **OK**.</span></span>  <span data-ttu-id="810c3-242">Agora o Gateway de Aplicativo está na fila e será criado.</span><span class="sxs-lookup"><span data-stu-id="810c3-242">Now the application gateway is queued up and created.</span></span>

1. <span data-ttu-id="810c3-243">Quando o Gateway de Aplicativo tiver sido criado, navegue até ele no portal para continuar a configuração do Gateway de Aplicativo.</span><span class="sxs-lookup"><span data-stu-id="810c3-243">Once the application gateway has been created, navigate to it in the portal to continue configuration of the application gateway.</span></span>

    ![Modo de exibição de recursos do Gateway de Aplicativo][10]

<span data-ttu-id="810c3-245">Estas etapas criam um gateway de aplicativo básico com configurações padrão para o ouvinte, pool de back-end, configurações de http de back-end e regras.</span><span class="sxs-lookup"><span data-stu-id="810c3-245">These steps create a basic application gateway with default settings for the listener, backend pool, backend http settings, and rules.</span></span> <span data-ttu-id="810c3-246">Você pode modificar essas configurações de acordo com sua implantação quando o provisionamento for bem-sucedido</span><span class="sxs-lookup"><span data-stu-id="810c3-246">You can modify these settings to suit your deployment once the provisioning is successful</span></span>

> [!NOTE]
> <span data-ttu-id="810c3-247">Os gateways de aplicativo criados com a configuração básica do firewall do aplicativo Web são configurados com o CRS 3.0 para proteções.</span><span class="sxs-lookup"><span data-stu-id="810c3-247">Application gateways created with the basic web application firewall configuration are configured with CRS 3.0 for protections.</span></span>

## <a name="next-steps"></a><span data-ttu-id="810c3-248">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="810c3-248">Next steps</span></span>

<span data-ttu-id="810c3-249">Em seguida, você pode aprender a configurar um alias de domínio personalizado para o [endereço IP público](../dns/dns-custom-domain.md#public-ip-address) usando DNS do Azure ou outro provedor DNS.</span><span class="sxs-lookup"><span data-stu-id="810c3-249">Next, you can learn how to configure a custom domain alias for the [public IP address](../dns/dns-custom-domain.md#public-ip-address) using Azure DNS or another DNS provider.</span></span>

<span data-ttu-id="810c3-250">Saiba como configurar o log de diagnóstico para registrar os eventos detectados ou impedidos pelo firewall do aplicativo Web ao visitar o [Diagnóstico do Gateway de Aplicativo](application-gateway-diagnostics.md)</span><span class="sxs-lookup"><span data-stu-id="810c3-250">Learn how to configure diagnostic logging, to log the events that are detected or prevented with web application firewall by visiting [Application Gateway Diagnostics](application-gateway-diagnostics.md)</span></span>

<span data-ttu-id="810c3-251">Saiba como criar investigações de integridade personalizados visitando [Criar uma investigação de integridade personalizada](application-gateway-create-probe-portal.md)</span><span class="sxs-lookup"><span data-stu-id="810c3-251">Learn how to create custom health probes by visiting [Create a custom health probe](application-gateway-create-probe-portal.md)</span></span>

<span data-ttu-id="810c3-252">Saiba como configurar o Descarregamento de SSL e levar a descriptografia SSL cara longe dos seus servidores Web visitando [Configurar Descarregamento de SSL](application-gateway-ssl-portal.md)</span><span class="sxs-lookup"><span data-stu-id="810c3-252">Learn how to configure SSL Offloading and take the costly SSL decryption off your web servers by visiting [Configure SSL Offload](application-gateway-ssl-portal.md)</span></span>

<!--Image references-->
[1]: ./media/application-gateway-web-application-firewall-portal/figure1.png
[2]: ./media/application-gateway-web-application-firewall-portal/figure2.png
[2-1]: ./media/application-gateway-web-application-firewall-portal/figure2-1.png
[2-2]: ./media/application-gateway-web-application-firewall-portal/figure2-2.png
[3]: ./media/application-gateway-web-application-firewall-portal/figure3.png
[10]: ./media/application-gateway-web-application-firewall-portal/figure10.png
[scenario]: ./media/application-gateway-web-application-firewall-portal/scenario.png
