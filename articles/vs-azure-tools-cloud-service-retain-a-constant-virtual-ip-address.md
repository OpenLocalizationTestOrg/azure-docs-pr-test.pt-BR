---
title: "Como reter um endereço IP virtual constante para um serviço de nuvem do Azure | Microsoft Docs"
description: "Saiba como assegurar que o VIP (endereço IP virtual) do seu serviço de nuvem do Azure não mude."
services: visual-studio-online
documentationcenter: na
author: kraigb
manager: ghogen
editor: 
ms.assetid: 4a58e2c6-7a79-4051-8a2c-99182ff8b881
ms.service: multiple
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: multiple
ms.date: 03/21/2017
ms.author: kraigb
ms.openlocfilehash: a76bcba5ab4ca8e1a4899e4aa28f734c09af2aa9
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/29/2017
---
# <a name="retain-a-constant-virtual-ip-address-for-an-azure-cloud-service"></a><span data-ttu-id="81011-103">Reter um endereço IP virtual constante para um serviço de nuvem do Azure</span><span class="sxs-lookup"><span data-stu-id="81011-103">Retain a constant virtual IP address for an Azure cloud service</span></span>
<span data-ttu-id="81011-104">Quando você atualiza um serviço de nuvem que é hospedado no Azure, você precisará garantir que o VIP (endereço IP virtual) do serviço não mude.</span><span class="sxs-lookup"><span data-stu-id="81011-104">When you update a cloud service that's hosted in Azure, you might need to ensure that the virtual IP address (VIP) of the service doesn't change.</span></span> <span data-ttu-id="81011-105">Muitos serviços de gerenciamento de domínio usam o DNS (sistema de nome de domínio) para o registro de nomes de domínio.</span><span class="sxs-lookup"><span data-stu-id="81011-105">Many domain management services use the Domain Name System (DNS) for registering domain names.</span></span> <span data-ttu-id="81011-106">O DNS só funciona se o VIP permanece o mesmo.</span><span class="sxs-lookup"><span data-stu-id="81011-106">DNS works only if the VIP remains the same.</span></span> <span data-ttu-id="81011-107">Você pode usar o **Assistente de Publicação** nas Ferramentas do Azure para garantir que o VIP do seu serviço de nuvem não seja alterado quando você atualizá-lo.</span><span class="sxs-lookup"><span data-stu-id="81011-107">You can use the **Publish Wizard** in Azure Tools to ensure that the VIP of your cloud service doesn’t change when you update it.</span></span> <span data-ttu-id="81011-108">Para obter mais informações sobre como usar o gerenciamento de domínio DNS para serviços de nuvem, consulte [Configurando um nome de domínio personalizado para um serviço de nuvem do Azure](cloud-services/cloud-services-custom-domain-name.md).</span><span class="sxs-lookup"><span data-stu-id="81011-108">For more information about how to use DNS domain management for cloud services, see [Configuring a custom domain name for an Azure cloud service](cloud-services/cloud-services-custom-domain-name.md).</span></span>

## <a name="publish-a-cloud-service-without-changing-its-vip"></a><span data-ttu-id="81011-109">Publicar um serviço de nuvem sem alterar seu VIP</span><span class="sxs-lookup"><span data-stu-id="81011-109">Publish a cloud service without changing its VIP</span></span>
<span data-ttu-id="81011-110">O VIP de um serviço de nuvem é alocado ao implantá-lo pela primeira vez no Azure em um ambiente específico, como o ambiente de produção.</span><span class="sxs-lookup"><span data-stu-id="81011-110">The VIP of a cloud service is allocated when you first deploy it to Azure in a particular environment, such as the production environment.</span></span> <span data-ttu-id="81011-111">O VIP só será alterado se você excluir a implantação explicitamente ou se ela for excluída implicitamente pelo processo de atualização de implantação.</span><span class="sxs-lookup"><span data-stu-id="81011-111">The VIP changes only if you delete the deployment explicitly or the deployment is implicitly deleted by the deployment update process.</span></span> <span data-ttu-id="81011-112">Para manter o VIP, você não pode excluir sua implantação e deve certificar-se de que ela não seja excluída automaticamente pelo Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="81011-112">To retain the VIP, you must not delete your deployment, and you must make sure that Visual Studio doesn’t delete your deployment automatically.</span></span> 

<span data-ttu-id="81011-113">Você pode especificar configurações de implantação no **Assistente de Publicação**, que dá suporte a várias opções de implantação.</span><span class="sxs-lookup"><span data-stu-id="81011-113">You can specify deployment settings in the **Publish Wizard**, which supports several deployment options.</span></span> <span data-ttu-id="81011-114">Você pode especificar uma nova implantação ou uma implantação de atualização, que pode ser incremental ou simultânea.</span><span class="sxs-lookup"><span data-stu-id="81011-114">You can specify a fresh deployment or an update deployment, which can be incremental or simultaneous.</span></span> <span data-ttu-id="81011-115">Ambos esses tipos de implantação de atualização retêm o VIP.</span><span class="sxs-lookup"><span data-stu-id="81011-115">Both kinds of update deployment retain the VIP.</span></span> <span data-ttu-id="81011-116">Para obter definições desses tipos diferentes de implantação, consulte o [Assistente Publicar Aplicativo no Azure](vs-azure-tools-publish-azure-application-wizard.md).</span><span class="sxs-lookup"><span data-stu-id="81011-116">For definitions of these different types of deployment, see [Publish Azure Application Wizard](vs-azure-tools-publish-azure-application-wizard.md).</span></span> <span data-ttu-id="81011-117">Além disso, você pode controlar se a implantação anterior de um serviço de nuvem deve ou não ser excluída caso um erro ocorra.</span><span class="sxs-lookup"><span data-stu-id="81011-117">In addition, you can control whether the previous deployment of a cloud service is deleted if an error occurs.</span></span> <span data-ttu-id="81011-118">O VIP poderá mudar inesperadamente se você não definir essa opção corretamente.</span><span class="sxs-lookup"><span data-stu-id="81011-118">If you don't set that option correctly, the VIP might change unexpectedly.</span></span>

## <a name="update-a-cloud-service-without-changing-its-vip"></a><span data-ttu-id="81011-119">Para atualizar um serviço de nuvem sem alterar o respectivo VIP</span><span class="sxs-lookup"><span data-stu-id="81011-119">Update a cloud service without changing its VIP</span></span>
1. <span data-ttu-id="81011-120">Crie ou abra um projeto de serviço de nuvem do Azure no Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="81011-120">Create or open an Azure cloud service project in Visual Studio.</span></span> 

2. <span data-ttu-id="81011-121">No **Gerenciador de Soluções**, clique com o botão direito do mouse no nome do projeto.</span><span class="sxs-lookup"><span data-stu-id="81011-121">In **Solution Explorer**, right-click the project.</span></span> <span data-ttu-id="81011-122">No menu de atalho, selecione **Publicar**.</span><span class="sxs-lookup"><span data-stu-id="81011-122">On the shortcut menu, select **Publish**.</span></span>

    ![Menu Publicar](./media/vs-azure-tools-cloud-service-retain-a-constant-virtual-ip-address/solution-explorer-publish-menu.png)

3. <span data-ttu-id="81011-124">Na caixa de diálogo **Publicar Aplicativo do Azure**, selecione a assinatura do Azure na qual você deseja implantar.</span><span class="sxs-lookup"><span data-stu-id="81011-124">In the **Publish Azure Application** dialog box, select the Azure subscription to which you want to deploy.</span></span> <span data-ttu-id="81011-125">Entre se necessário e selecione **Avançar**.</span><span class="sxs-lookup"><span data-stu-id="81011-125">Sign in if necessary, and select **Next**.</span></span>

    ![Página Publicar Aplicativo do Azure – Entrar](./media/vs-azure-tools-cloud-service-retain-a-constant-virtual-ip-address/azure-publish-signin.png)

4. <span data-ttu-id="81011-127">Na guia **Configurações Comuns**, verifique se o nome do serviço de nuvem no qual você está implantando, o **Ambiente**, a **Configuração de build** e a **Configuração do serviço** estão todos corretos.</span><span class="sxs-lookup"><span data-stu-id="81011-127">On the **Common Settings** tab, verify that the name of the cloud service to which you’re deploying, the **Environment**, the **Build configuration**, and the **Service configuration** are all correct.</span></span>

    ![Guia Publicar aplicativo do Azure – Configurações Comuns](./media/vs-azure-tools-cloud-service-retain-a-constant-virtual-ip-address/azure-publish-common-settings.png)

5. <span data-ttu-id="81011-129">Na guia **Configurações Avançadas**, verifique se o **Rótulo de implantação** e a **Conta de armazenamento** estão corretas.</span><span class="sxs-lookup"><span data-stu-id="81011-129">On the **Advanced Settings** tab, verify that the **Deployment label** and the **Storage account** are correct.</span></span> <span data-ttu-id="81011-130">Verifique se a caixa de seleção **excluir implantação em caso de falha** está desmarcada e se a caixa de seleção **Atualização de implantação** está selecionada.</span><span class="sxs-lookup"><span data-stu-id="81011-130">Verify that the **Delete deployment on failure** check box is cleared, and verify that the **Deployment update** check box is selected.</span></span> <span data-ttu-id="81011-131">Ao limpar a caixa de seleção **Excluir implantação em caso de falha**, você garante que o VIP não será perdido se ocorrer um erro durante a implantação.</span><span class="sxs-lookup"><span data-stu-id="81011-131">By clearing the **Delete deployment on failure** check box, you ensure that your VIP isn't lost if an error occurs during deployment.</span></span> <span data-ttu-id="81011-132">Ao marcar a caixa de seleção **Atualização de implantação**, você garante que a implantação não será excluída e que o VIP não será perdido quando você republicar o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="81011-132">By selecting the **Deployment update** check box, you ensure that your deployment isn't deleted and your VIP isn't lost when you republish your application.</span></span> 

    ![Guia Publicar aplicativo do Azure – Configurações Avançadas](./media/vs-azure-tools-cloud-service-retain-a-constant-virtual-ip-address/azure-publish-advanced-settings.png)

6. <span data-ttu-id="81011-134">Para especificações adicionais de como você deseja que as funções sejam atualizadas, selecione **Configurações**, ao lado de **Atualização de implantação**.</span><span class="sxs-lookup"><span data-stu-id="81011-134">To further specify how you want the roles to be updated, select **Settings** next to **Deployment update**.</span></span> <span data-ttu-id="81011-135">Selecione **Atualização incremental** ou **Atualização simultânea** e selecione **OK**.</span><span class="sxs-lookup"><span data-stu-id="81011-135">Select either **Incremental update** or **Simultaneous update**, and select **OK**.</span></span> <span data-ttu-id="81011-136">Escolha **Atualização incremental** para atualizar cada instância do aplicativo uma após a outra, de modo que o aplicativo fica sempre disponível.</span><span class="sxs-lookup"><span data-stu-id="81011-136">Choose **Incremental update** to update each instance of your application, one after another, so that the application is always available.</span></span> <span data-ttu-id="81011-137">Escolha **Atualização simultânea** para atualizar todas as instâncias do aplicativo simultaneamente.</span><span class="sxs-lookup"><span data-stu-id="81011-137">Choose **Simultaneous update** to update all instances of your application at the same time.</span></span> <span data-ttu-id="81011-138">A atualização simultânea é mais rápida, mas o serviço pode não estar disponível durante o processo de atualização.</span><span class="sxs-lookup"><span data-stu-id="81011-138">Simultaneous updating is faster, but your service might not be available during the update process.</span></span> <span data-ttu-id="81011-139">Quando tiver terminado, selecione **Avançar**.</span><span class="sxs-lookup"><span data-stu-id="81011-139">When you are finished, select **Next**.</span></span>

    ![Página Publicar Aplicativo do Azure – Configurações de Implantação](./media/vs-azure-tools-cloud-service-retain-a-constant-virtual-ip-address/azure-publish-deployment-update-settings.png)

7. <span data-ttu-id="81011-141">Na caixa de diálogo **Publicar Aplicativo do Azure**, selecione **Avançar** até que a página **Resumo** seja exibida.</span><span class="sxs-lookup"><span data-stu-id="81011-141">In the **Publish Azure Application** dialog box, select **Next** until the **Summary** page is displayed.</span></span> <span data-ttu-id="81011-142">Verifique as configurações e, em seguida, selecione **Publicar**.</span><span class="sxs-lookup"><span data-stu-id="81011-142">Verify your settings, and then select **Publish**.</span></span>
   
    ![Página Publicar Aplicativo do Azure – Resumo](./media/vs-azure-tools-cloud-service-retain-a-constant-virtual-ip-address/azure-publish-summary.png)

## <a name="next-steps"></a><span data-ttu-id="81011-144">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="81011-144">Next steps</span></span>
- [<span data-ttu-id="81011-145">Usando o Assistente Publicar Aplicativo do Azure do Visual Studio</span><span class="sxs-lookup"><span data-stu-id="81011-145">Using the Visual Studio Publish Azure Application Wizard</span></span>](vs-azure-tools-publish-azure-application-wizard.md)

