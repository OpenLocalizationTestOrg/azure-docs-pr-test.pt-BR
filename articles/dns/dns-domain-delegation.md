---
title: "Visão geral da delegação do DNS do Azure | Microsoft Docs"
description: "Entenda como alterar a delegação de domínio e usar os servidores de nomes do Azure DNS para fornecer hospedagem do domínio."
services: dns
documentationcenter: na
author: georgewallace
manager: timlt
ms.assetid: 257da6ec-d6e2-4b6f-ad76-ee2dde4efbcc
ms.service: dns
ms.devlang: na
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 04/12/2017
ms.author: gwallace
ms.openlocfilehash: 31a500502a4d3e729ecb79929ed6c1de156d6259
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/11/2017
---
# <a name="delegation-of-dns-zones-with-azure-dns"></a><span data-ttu-id="2be52-103">Delegação de zonas DNS com o DNS do Azure</span><span class="sxs-lookup"><span data-stu-id="2be52-103">Delegation of DNS zones with Azure DNS</span></span>

<span data-ttu-id="2be52-104">O Azure DNS permite hospedar uma zona DNS e gerenciar os registros DNS para um domínio no Azure.</span><span class="sxs-lookup"><span data-stu-id="2be52-104">Azure DNS allows you to host a DNS zone and manage the DNS records for a domain in Azure.</span></span> <span data-ttu-id="2be52-105">Para que consultas DNS para um domínio acessem o Azure DNS, o domínio deve ser delegado ao Azure DNS por meio do domínio pai.</span><span class="sxs-lookup"><span data-stu-id="2be52-105">In order for DNS queries for a domain to reach Azure DNS, the domain has to be delegated to Azure DNS from the parent domain.</span></span> <span data-ttu-id="2be52-106">Tenha em mente que o Azure DNS não é o registrador de domínio.</span><span class="sxs-lookup"><span data-stu-id="2be52-106">Keep in mind Azure DNS is not the domain registrar.</span></span> <span data-ttu-id="2be52-107">Esta página explica como funciona a delegação de domínio e como delegar domínios ao Azure DNS.</span><span class="sxs-lookup"><span data-stu-id="2be52-107">This article explains how domain delegation works and how to delegate domains to Azure DNS.</span></span>

## <a name="how-dns-delegation-works"></a><span data-ttu-id="2be52-108">Como funciona a delegação de DNS</span><span class="sxs-lookup"><span data-stu-id="2be52-108">How DNS delegation works</span></span>

### <a name="domains-and-zones"></a><span data-ttu-id="2be52-109">Zonas e domínios</span><span class="sxs-lookup"><span data-stu-id="2be52-109">Domains and zones</span></span>

<span data-ttu-id="2be52-110">O Sistema de Nomes de Domínio é uma hierarquia de domínios.</span><span class="sxs-lookup"><span data-stu-id="2be52-110">The Domain Name System is a hierarchy of domains.</span></span> <span data-ttu-id="2be52-111">A hierarquia começa no domínio 'raiz', cujo nome é simplesmente '**.**'.</span><span class="sxs-lookup"><span data-stu-id="2be52-111">The hierarchy starts from the 'root' domain, whose name is simply '**.**'.</span></span>  <span data-ttu-id="2be52-112">Abaixo dele vêm domínios de nível superior, como 'com', 'net', 'org', 'uk' ou 'jp'.</span><span class="sxs-lookup"><span data-stu-id="2be52-112">Below this come top-level domains, such as 'com', 'net', 'org', 'uk' or 'jp'.</span></span>  <span data-ttu-id="2be52-113">Abaixo desses domínios de alto nível estão domínios de segundo nível, como 'org.uk' ou 'co.jp'.</span><span class="sxs-lookup"><span data-stu-id="2be52-113">Below these top-level domains are second-level domains, such as 'org.uk' or 'co.jp'.</span></span>  <span data-ttu-id="2be52-114">E assim por diante.</span><span class="sxs-lookup"><span data-stu-id="2be52-114">And so on.</span></span> <span data-ttu-id="2be52-115">Os domínios na hierarquia de DNS são hospedados usando zonas DNS separadas.</span><span class="sxs-lookup"><span data-stu-id="2be52-115">The domains in the DNS hierarchy are hosted using separate DNS zones.</span></span> <span data-ttu-id="2be52-116">Essas zonas são distribuídas globalmente, hospedadas por servidores de nomes DNS pelo mundo.</span><span class="sxs-lookup"><span data-stu-id="2be52-116">These zones are globally distributed, hosted by DNS name servers around the world.</span></span>

<span data-ttu-id="2be52-117">**Zona DNS** - Um domínio é um nome exclusivo no Sistema de Nomes de Domínio, por exemplo, 'contoso.com'.</span><span class="sxs-lookup"><span data-stu-id="2be52-117">**DNS zone** - A domain is a unique name in the Domain Name System, for example 'contoso.com'.</span></span> <span data-ttu-id="2be52-118">Uma zona DNS é usada para hospedar os registros DNS para um domínio específico.</span><span class="sxs-lookup"><span data-stu-id="2be52-118">A DNS zone is used to host the DNS records for a particular domain.</span></span> <span data-ttu-id="2be52-119">Por exemplo, o domínio 'contoso.com' pode conter vários registros DNS, como 'mail.contoso.com' (para um servidor de email) e 'www.contoso.com' (para um site da Web).</span><span class="sxs-lookup"><span data-stu-id="2be52-119">For example, the domain 'contoso.com' may contain several DNS records such as 'mail.contoso.com' (for a mail server) and 'www.contoso.com' (for a website).</span></span>

<span data-ttu-id="2be52-120">**Registrador de domínio** - Um registrador de domínio é uma empresa que pode fornecer nomes de domínio da Internet.</span><span class="sxs-lookup"><span data-stu-id="2be52-120">**Domain registrar** - A domain registrar is a company who can provide Internet domain names.</span></span> <span data-ttu-id="2be52-121">A empresa verifica se o domínio de Internet que você deseja usar está disponível e permite que você o compre.</span><span class="sxs-lookup"><span data-stu-id="2be52-121">They verify if the Internet domain you want to use is available and allow you to purchase it.</span></span> <span data-ttu-id="2be52-122">Uma vez registrado o nome de domínio, você passa a ser seu o proprietário legal.</span><span class="sxs-lookup"><span data-stu-id="2be52-122">Once the domain name is registered, you are the legal owner for the domain name.</span></span> <span data-ttu-id="2be52-123">Se você já tiver um domínio da Internet, usará o registrador de domínio atual para delegar ao Azure DNS.</span><span class="sxs-lookup"><span data-stu-id="2be52-123">If you already have an Internet domain, you will use the current domain registrar to delegate to Azure DNS.</span></span>

<span data-ttu-id="2be52-124">Para saber mais sobre quem possui um nome de domínio específico ou sobre como comprar um domínio, veja [Gerenciamento de domínio de Internet no Azure AD](https://msdn.microsoft.com/library/azure/hh969248.aspx).</span><span class="sxs-lookup"><span data-stu-id="2be52-124">To find out more information on who owns a given domain name, or for information on how to buy a domain, see [Internet domain management in Azure AD](https://msdn.microsoft.com/library/azure/hh969248.aspx).</span></span>

### <a name="resolution-and-delegation"></a><span data-ttu-id="2be52-125">Resolução e delegação</span><span class="sxs-lookup"><span data-stu-id="2be52-125">Resolution and delegation</span></span>

<span data-ttu-id="2be52-126">Existem dois tipos de servidores DNS:</span><span class="sxs-lookup"><span data-stu-id="2be52-126">There are two types of DNS servers:</span></span>

* <span data-ttu-id="2be52-127">Um servidor DNS *autoritativo* hospeda zonas DNS.</span><span class="sxs-lookup"><span data-stu-id="2be52-127">An *authoritative* DNS server hosts DNS zones.</span></span> <span data-ttu-id="2be52-128">Ele responde a consultas DNS apenas para registros nessas zonas.</span><span class="sxs-lookup"><span data-stu-id="2be52-128">It answers DNS queries for records in those zones only.</span></span>
* <span data-ttu-id="2be52-129">Um servidor DNS *recursivo* não hospeda zonas DNS.</span><span class="sxs-lookup"><span data-stu-id="2be52-129">A *recursive* DNS server does not host DNS zones.</span></span> <span data-ttu-id="2be52-130">Ele responde a todas as consultas DNS chamando os servidores DNS autoritativos para coletar os dados de que precisa.</span><span class="sxs-lookup"><span data-stu-id="2be52-130">It answers all DNS queries by calling authoritative DNS servers to gather the data it needs.</span></span>

<span data-ttu-id="2be52-131">O Azure DNS fornece um serviço DNS autoritativo.</span><span class="sxs-lookup"><span data-stu-id="2be52-131">Azure DNS provides an authoritative DNS service.</span></span>  <span data-ttu-id="2be52-132">Ele não fornece um serviço DNS recursivo.</span><span class="sxs-lookup"><span data-stu-id="2be52-132">It does not provide a recursive DNS service.</span></span> <span data-ttu-id="2be52-133">No Azure, os Serviços de Nuvem e as VMs são automaticamente configurados para usar o serviço DNS recursivo fornecido separadamente como parte da infraestrutura do Azure.</span><span class="sxs-lookup"><span data-stu-id="2be52-133">Cloud Services and VMs in Azure are automatically configured to use a recursive DNS service that is provided separately as part of Azure's infrastructure.</span></span> <span data-ttu-id="2be52-134">Para saber mais sobre como alterar essas configurações de DNS, confira [Resolução de nomes no Azure](../virtual-network/virtual-networks-name-resolution-for-vms-and-role-instances.md#name-resolution-using-your-own-dns-server).</span><span class="sxs-lookup"><span data-stu-id="2be52-134">For information on how to change these DNS settings, see [Name Resolution in Azure](../virtual-network/virtual-networks-name-resolution-for-vms-and-role-instances.md#name-resolution-using-your-own-dns-server).</span></span>

<span data-ttu-id="2be52-135">Os clientes DNS em computadores ou em dispositivos móveis normalmente chamam um servidor DNS recursivo para executar consultas DNS das quais os aplicativos cliente precisam.</span><span class="sxs-lookup"><span data-stu-id="2be52-135">DNS clients in PCs or mobile devices typically call a recursive DNS server to perform any DNS queries the client applications need.</span></span>

<span data-ttu-id="2be52-136">Quando um servidor DNS recursivo recebe uma consulta de um registro DNS como 'www.contoso.com', ele precisa localizar o servidor de nomes que hospeda a zona do domínio 'contoso.com'.</span><span class="sxs-lookup"><span data-stu-id="2be52-136">When a recursive DNS server receives a query for a DNS record such as 'www.contoso.com', it first needs to find the name server hosting the zone for the 'contoso.com' domain.</span></span> <span data-ttu-id="2be52-137">Para encontrar o servidor de nomes, ele começa em servidores-raiz de nomes e daí localiza os servidores de nomes que hospeda a zona 'com'.</span><span class="sxs-lookup"><span data-stu-id="2be52-137">To find the name server, it starts at the root name servers, and from there finds the name servers hosting the 'com' zone.</span></span> <span data-ttu-id="2be52-138">Em seguida, ele consulta os servidores de nomes 'com' para localizar os servidores de nomes que hospedam a zona 'contoso.com'.</span><span class="sxs-lookup"><span data-stu-id="2be52-138">It then queries the 'com' name servers to find the name servers hosting the 'contoso.com' zone.</span></span>  <span data-ttu-id="2be52-139">Finalmente, é possível consultar os servidores de nomes para 'www.contoso.com'.</span><span class="sxs-lookup"><span data-stu-id="2be52-139">Finally, it is able to query these name servers for 'www.contoso.com'.</span></span>

<span data-ttu-id="2be52-140">Esse procedimento é chamado de resolução de nome DNS.</span><span class="sxs-lookup"><span data-stu-id="2be52-140">This procedure is called resolving the DNS name.</span></span> <span data-ttu-id="2be52-141">Na verdade, a resolução de DNS inclui etapas adicionais, como as CNAMEs a seguir, mas isso não é importante para compreender como funciona a delegação de DNS.</span><span class="sxs-lookup"><span data-stu-id="2be52-141">Strictly speaking, DNS resolution includes additional steps such as following CNAMEs, but that's not important to understanding how DNS delegation works.</span></span>

<span data-ttu-id="2be52-142">Como uma zona pai 'aponta' os servidores de nomes para uma zona filho?</span><span class="sxs-lookup"><span data-stu-id="2be52-142">How does a parent zone 'point' to the name servers for a child zone?</span></span> <span data-ttu-id="2be52-143">Ele faz isso usando um tipo especial de registro DNS chamado de registro NS (NS significa 'name server', servidor de nomes).</span><span class="sxs-lookup"><span data-stu-id="2be52-143">It does this using a special type of DNS record called an NS record (NS stands for 'name server').</span></span> <span data-ttu-id="2be52-144">Por exemplo, a zona raiz contém registros NS para 'com', mostrando os servidores de nomes da zona 'com'.</span><span class="sxs-lookup"><span data-stu-id="2be52-144">For example, the root zone contains NS records for 'com' and shows the name servers for the 'com' zone.</span></span> <span data-ttu-id="2be52-145">A zona 'com', por sua vez, contém registros NS para 'contoso.com', que mostra os servidores de nomes da zona 'contoso.com'.</span><span class="sxs-lookup"><span data-stu-id="2be52-145">In turn, the 'com' zone contains NS records for 'contoso.com', which shows the name servers for the 'contoso.com' zone.</span></span> <span data-ttu-id="2be52-146">Configurar os registros NS para uma zona filho em uma zona pai é chamado de delegar o domínio.</span><span class="sxs-lookup"><span data-stu-id="2be52-146">Setting up the NS records for a child zone in a parent zone is called delegating the domain.</span></span>

<span data-ttu-id="2be52-147">A imagem a seguir mostra um exemplo de consulta DNS.</span><span class="sxs-lookup"><span data-stu-id="2be52-147">The following image shows an example DNS query.</span></span> <span data-ttu-id="2be52-148">O contoso.net e o partners.contoso.net são zonas DNS do Azure.</span><span class="sxs-lookup"><span data-stu-id="2be52-148">The contoso.net and partners.contoso.net are Azure DNS zones.</span></span>

![Servidor de nomes DNS](./media/dns-domain-delegation/image1.png)

1. <span data-ttu-id="2be52-150">O cliente solicita `www.partners.contoso.net` do servidor DNS local.</span><span class="sxs-lookup"><span data-stu-id="2be52-150">The client requests `www.partners.contoso.net` from their local DNS server.</span></span>
1. <span data-ttu-id="2be52-151">O servidor DNS local não tem o registro então ele faz uma solicitação para o servidor de nome de raiz.</span><span class="sxs-lookup"><span data-stu-id="2be52-151">The local DNS server does not have the record so it makes a request to their root name server.</span></span>
1. <span data-ttu-id="2be52-152">O servidor de nomes de raiz não tem o registro, mas sabe o endereço do servidor de nomes `.net`, ele fornece esse endereço para o servidor DNS</span><span class="sxs-lookup"><span data-stu-id="2be52-152">The root name server does not have the record, but knows the address of the `.net` name server, it provides that address to the DNS server</span></span>
1. <span data-ttu-id="2be52-153">O DNS envia a solicitação para o servidor de nomes `.net`, não tem o registro, mas não souber o endereço do servidor de nomes contoso.net.</span><span class="sxs-lookup"><span data-stu-id="2be52-153">The DNS sends the request to the `.net` name server, it does not have the record but does know the address of the contoso.net name server.</span></span> <span data-ttu-id="2be52-154">Nesse caso é uma zona DNS hospedada no DNS do Azure.</span><span class="sxs-lookup"><span data-stu-id="2be52-154">In this case it is a DNS zone hosted in Azure DNS.</span></span>
1. <span data-ttu-id="2be52-155">A zona `contoso.net` não tem o registro, mas sabe o servidor de nomes para `partners.contoso.net` e responde com isso.</span><span class="sxs-lookup"><span data-stu-id="2be52-155">The zone `contoso.net` does not have the record but knows the name server for `partners.contoso.net` and responds with that.</span></span> <span data-ttu-id="2be52-156">Nesse caso é uma zona DNS hospedada no DNS do Azure.</span><span class="sxs-lookup"><span data-stu-id="2be52-156">In this case it is a DNS zone hosted in Azure DNS.</span></span>
1. <span data-ttu-id="2be52-157">O servidor DNS solicita o endereço IP do `partners.contoso.net` da zona `partners.contoso.net`.</span><span class="sxs-lookup"><span data-stu-id="2be52-157">The DNS server requests the IP address of `partners.contoso.net` from the `partners.contoso.net` zone.</span></span> <span data-ttu-id="2be52-158">Ela contém o registro A e responde com o endereço IP.</span><span class="sxs-lookup"><span data-stu-id="2be52-158">It contains the A record and responds with the IP address.</span></span>
1. <span data-ttu-id="2be52-159">O servidor DNS fornece o endereço IP para o cliente</span><span class="sxs-lookup"><span data-stu-id="2be52-159">The DNS server provides the IP address to the client</span></span>
1. <span data-ttu-id="2be52-160">O cliente se conecta ao site `www.partners.contoso.net`.</span><span class="sxs-lookup"><span data-stu-id="2be52-160">The client connects to the website `www.partners.contoso.net`.</span></span>

<span data-ttu-id="2be52-161">Cada delegação realmente tem duas cópias dos registros NS: uma na zona pai apontando para a zona filho e outra na própria zona filho.</span><span class="sxs-lookup"><span data-stu-id="2be52-161">Each delegation actually has two copies of the NS records; one in the parent zone pointing to the child, and another in the child zone itself.</span></span> <span data-ttu-id="2be52-162">A zona 'contoso.net' contém os registros NS para contoso.net (juntamente com os registros NS em 'net').</span><span class="sxs-lookup"><span data-stu-id="2be52-162">The 'contoso.net' zone contains the NS records for 'contoso.net' (in addition to the NS records in 'net').</span></span> <span data-ttu-id="2be52-163">Esses registros são chamados de registros NS autoritativos e ficam no ápice da zona filho.</span><span class="sxs-lookup"><span data-stu-id="2be52-163">These records are called authoritative NS records and they sit at the apex of the child zone.</span></span>

## <a name="next-steps"></a><span data-ttu-id="2be52-164">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="2be52-164">Next steps</span></span>

<span data-ttu-id="2be52-165">Saiba como [delegar seu domínio ao DNS do Azure](dns-delegate-domain-azure-dns.md)</span><span class="sxs-lookup"><span data-stu-id="2be52-165">Learn how to [delegate your domain to Azure DNS](dns-delegate-domain-azure-dns.md)</span></span>

