---
title: "aaaWorking com módulos de Node. js"
description: "Saiba como toowork com módulos Node.js ao usar o serviço de aplicativo do Azure ou serviços de nuvem."
services: 
documentationcenter: nodejs
author: TomArcher
manager: routlaw
editor: 
ms.assetid: c0e6cd3d-932d-433e-b72d-e513e23b4eb6
ms.service: multiple
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: nodejs
ms.topic: article
ms.date: 08/17/2016
ms.author: tarcher
ms.openlocfilehash: 926358b7eb80a659dbc1015686b06a30d8c9b8f0
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="using-nodejs-modules-with-azure-applications"></a><span data-ttu-id="9ed35-103">Usando Módulos no Node.js com aplicativos do Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="9ed35-103">Using Node.js Modules with Azure applications</span></span>
<span data-ttu-id="9ed35-104">Este documento fornece orientação sobre como usar módulos no Node.js com aplicativos hospedados no Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="9ed35-104">This document provides guidance on using Node.js modules with applications hosted on Azure.</span></span> <span data-ttu-id="9ed35-105">Fornece orientação para garantir que seu aplicativo use uma versão específica do módulo, bem como para usar módulos nativos com o Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="9ed35-105">It provides guidance on ensuring that your application uses a specific version of module as well as using native modules with Azure.</span></span>

<span data-ttu-id="9ed35-106">Se você já estiver familiarizado com o uso de módulos Node.js, **Package. JSON** e **shrinkwrap.json npm** arquivos, Olá informações a seguir fornece um resumo de como o que é discutido neste artigo:</span><span class="sxs-lookup"><span data-stu-id="9ed35-106">If you are already familiar with using Node.js modules, **package.json** and **npm-shrinkwrap.json** files, hello following information provides a quick summary of what is discussed in this article:</span></span>

* <span data-ttu-id="9ed35-107">O Serviço de Aplicativo do Azure compreende arquivos **package.json** e **npm-shrinkwrap.json** e podem instalar módulos com base em entradas nestes arquivos.</span><span class="sxs-lookup"><span data-stu-id="9ed35-107">Azure App Service understands **package.json** and **npm-shrinkwrap.json** files and can install modules based on entries in these files.</span></span>

* <span data-ttu-id="9ed35-108">Serviços de nuvem do Azure espera que todos os toobe de módulos instalados no ambiente de desenvolvimento hello e hello **nó\_módulos** toobe directory incluído como parte do pacote de implantação de saudação.</span><span class="sxs-lookup"><span data-stu-id="9ed35-108">Azure Cloud Services expect all modules toobe installed on hello development environment, and hello **node\_modules** directory toobe included as part of hello deployment package.</span></span> <span data-ttu-id="9ed35-109">É possível tooenable suporte para a instalação de módulos usando **Package. JSON** ou **shrinkwrap.json npm** arquivos nos serviços de nuvem; no entanto, essa configuração requer a personalização do padrão de saudação scripts usados por projetos de serviço de nuvem.</span><span class="sxs-lookup"><span data-stu-id="9ed35-109">It is possible tooenable support for installing modules using **package.json** or **npm-shrinkwrap.json** files on Cloud Services; however, this configuration requires customization of hello default scripts used by Cloud Service projects.</span></span> <span data-ttu-id="9ed35-110">Para obter um exemplo de como tooconfigure nesse ambiente, consulte [inicialização Azure tarefa toorun npm instalar tooavoid Implantando módulos de nó](https://github.com/woloski/nodeonazure-blog/blob/master/articles/startup-task-to-run-npm-in-azure.markdown)</span><span class="sxs-lookup"><span data-stu-id="9ed35-110">For an example of how tooconfigure this environment, see [Azure Startup task toorun npm install tooavoid deploying node modules](https://github.com/woloski/nodeonazure-blog/blob/master/articles/startup-task-to-run-npm-in-azure.markdown)</span></span>

> [!NOTE]
> <span data-ttu-id="9ed35-111">Máquinas virtuais do Azure não são abordados neste artigo, pois Olá experiência de implantação em uma VM depende do sistema de operacional Olá hospedado pelo Olá Máquina Virtual.</span><span class="sxs-lookup"><span data-stu-id="9ed35-111">Azure Virtual Machines are not discussed in this article, as hello deployment experience in a VM is dependent on hello operating system hosted by hello Virtual Machine.</span></span>
> 
> 

## <a name="nodejs-modules"></a><span data-ttu-id="9ed35-112">Módulos no Node.js</span><span class="sxs-lookup"><span data-stu-id="9ed35-112">Node.js Modules</span></span>
<span data-ttu-id="9ed35-113">Os módulos são pacotes carregáveis do JavaScript que fornecem funcionalidade específica para seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="9ed35-113">Modules are loadable JavaScript packages that provide specific functionality for your application.</span></span> <span data-ttu-id="9ed35-114">Módulos são geralmente instalados usando Olá **npm** de linha de comando ferramenta, no entanto alguns módulos (por exemplo, o módulo http do hello) são fornecidos como parte do pacote hello core Node. js.</span><span class="sxs-lookup"><span data-stu-id="9ed35-114">Modules are usually installed using hello **npm** command-line tool, however some modules (such as hello http module) are provided as part of hello core Node.js package.</span></span>

<span data-ttu-id="9ed35-115">Quando os módulos são instalados, eles são armazenados no hello **nó\_módulos** diretório raiz de saudação da sua estrutura de diretório de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="9ed35-115">When modules are installed, they are stored in hello **node\_modules** directory at hello root of your application directory structure.</span></span> <span data-ttu-id="9ed35-116">Cada módulo dentro de saudação **nó\_módulos** directory mantém seu próprio **nó\_módulos** diretório que contém todos os módulos que ela depende e esse comportamento se repete para cada módulo todo caminho de saudação para baixo de cadeia de dependência de saudação.</span><span class="sxs-lookup"><span data-stu-id="9ed35-116">Each module within hello **node\_modules** directory maintains its own **node\_modules** directory that contains any modules that it depends on, and this behavior repeats for every module all hello way down hello dependency chain.</span></span> <span data-ttu-id="9ed35-117">Esse ambiente permite que cada módulo instalado toohave seus próprios requisitos de versão para os módulos de saudação depende, no entanto, isso pode resultar em uma estrutura de diretório grande.</span><span class="sxs-lookup"><span data-stu-id="9ed35-117">This environment allows each module installed toohave its own version requirements for hello modules it depends on, however it can result in quite a large directory structure.</span></span>

<span data-ttu-id="9ed35-118">Implantando Olá **nó\_módulos** diretório como parte do seu aplicativo aumenta o tamanho de saudação da implantação de saudação quando comparado toousing um **Package. JSON** ou  **NPM shrinkwrap.json** arquivo; no entanto, ele garante que versões Olá dos módulos de saudação usadas na produção são Olá mesmo como módulos Olá usados no desenvolvimento.</span><span class="sxs-lookup"><span data-stu-id="9ed35-118">Deploying hello **node\_modules** directory as part of your application increases hello size of hello deployment when compared toousing a **package.json** or **npm-shrinkwrap.json** file; however, it does guarantee that hello versions of hello modules used in production are hello same as hello modules used in development.</span></span>

### <a name="native-modules"></a><span data-ttu-id="9ed35-119">Módulos Nativos</span><span class="sxs-lookup"><span data-stu-id="9ed35-119">Native Modules</span></span>
<span data-ttu-id="9ed35-120">Enquanto a maioria dos módulos são simples arquivos de texto JavaScript, outros são imagens binárias específicas de plataforma.</span><span class="sxs-lookup"><span data-stu-id="9ed35-120">While most modules are simply plain-text JavaScript files, some modules are platform-specific binary images.</span></span> <span data-ttu-id="9ed35-121">Estes módulos são compilados no momento da instalação, geralmente usando o Python e o node-gyp.</span><span class="sxs-lookup"><span data-stu-id="9ed35-121">These modules are compiled at install time, usually by using Python and node-gyp.</span></span> <span data-ttu-id="9ed35-122">Como os serviços de nuvem do Azure dependem de saudação **nó\_módulos** pasta que está sendo implantada como parte do aplicativo hello, qualquer módulo nativo incluído como parte dos módulos Olá instalado deve funcionar em um serviço de nuvem, desde que ele foi instalado e compilado em um sistema de desenvolvimento do Windows.</span><span class="sxs-lookup"><span data-stu-id="9ed35-122">Since Azure Cloud Services rely on hello **node\_modules** folder being deployed as part of hello application, any native module included as part of hello installed modules should work in a cloud service as long as it was installed and compiled on a Windows development system.</span></span>

<span data-ttu-id="9ed35-123">O Serviço de Aplicativo do Azure não dá suporte a todos os módulos nativos e pode falhar ao compilar módulos com pré-requisitos específicos.</span><span class="sxs-lookup"><span data-stu-id="9ed35-123">Azure App Service does not support all native modules, and might fail when compiling modules with specific prerequisites.</span></span> <span data-ttu-id="9ed35-124">Embora alguns módulos populares como o MongoDB tenham dependências nativas opcionais e funcionem bem sem elas, duas soluções alternativas foram comprovadamente bem-sucedidas com quase todos os módulos nativos disponíveis hoje:</span><span class="sxs-lookup"><span data-stu-id="9ed35-124">While some popular modules like MongoDB have optional native dependencies and work fine without them, two workarounds proved successful with almost all native modules available today:</span></span>

* <span data-ttu-id="9ed35-125">Executar **de instalação de npm** em um computador Windows que tenha os pré-requisitos de todos os Olá nativo do módulo instalados.</span><span class="sxs-lookup"><span data-stu-id="9ed35-125">Run **npm install** on a Windows machine that has all hello native module's prerequisites installed.</span></span> <span data-ttu-id="9ed35-126">Em seguida, implante Olá criado **nó\_módulos** pasta como parte da saudação tooAzure de aplicativo do serviço de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="9ed35-126">Then, deploy hello created **node\_modules** folder as part of hello application tooAzure App Service.</span></span>

  * <span data-ttu-id="9ed35-127">Antes de compilar, verifique se sua instalação local do Node. js tem correspondentes de arquitetura e versão hello está mais próximo possível toohello usado no Azure (valores atuais Olá podem ser verificados em tempo de execução das propriedades **process.arch**e **process.version**).</span><span class="sxs-lookup"><span data-stu-id="9ed35-127">Before compiling, check that your local Node.js installation has matching architecture and hello version is as close as possible toohello one used in Azure (hello current values can be checked on runtime from properties **process.arch** and **process.version**).</span></span>

* <span data-ttu-id="9ed35-128">Serviço de aplicativo do Azure pode ser bash personalizados tooexecute configurado ou scripts de shell durante a implantação, fornecendo Olá comandos personalizados de tooexecute oportunidade e configurar precisamente Olá maneira **de instalação de npm** está sendo executado.</span><span class="sxs-lookup"><span data-stu-id="9ed35-128">Azure App Service can be configured tooexecute custom bash or shell scripts during deployment, giving you hello opportunity tooexecute custom commands and precisely configure hello way **npm install** is being run.</span></span> <span data-ttu-id="9ed35-129">Para um vídeo mostrando como tooconfigure nesse ambiente, consulte [Scripts de implantação de site personalizado com Kudu].</span><span class="sxs-lookup"><span data-stu-id="9ed35-129">For a video showing how tooconfigure that environment, see [Custom Website Deployment Scripts with Kudu].</span></span>

### <a name="using-a-packagejson-file"></a><span data-ttu-id="9ed35-130">Usando um arquivo package.json</span><span class="sxs-lookup"><span data-stu-id="9ed35-130">Using a package.json file</span></span>
<span data-ttu-id="9ed35-131">Olá **Package. JSON** arquivo é uma maneira toospecify Olá nível superior dependências seu aplicativo exige para que hello plataforma de hospedagem pode instalar dependências hello, em vez de exigir que você tooinclude Olá **nó \_pacotes** pasta como parte da implantação de saudação.</span><span class="sxs-lookup"><span data-stu-id="9ed35-131">hello **package.json** file is a way toospecify hello top-level dependencies your application requires so that hello hosting platform can install hello dependencies, rather than requiring you tooinclude hello **node\_packages** folder as part of hello deployment.</span></span> <span data-ttu-id="9ed35-132">Após a implantação de aplicativo hello, Olá **npm instalar** comando é usado tooparse Olá **Package. JSON** de arquivo e instalar todas as dependências de saudação listadas.</span><span class="sxs-lookup"><span data-stu-id="9ed35-132">After hello application has been deployed, hello **npm install** command is used tooparse hello **package.json** file and install all hello dependencies listed.</span></span>

<span data-ttu-id="9ed35-133">Durante o desenvolvimento, você pode usar o hello **– salvar**, **-dev salvar**, ou **– opcional a save** parâmetros durante a instalação de módulos tooadd uma entrada para o módulo de saudação tooyour **Package. JSON** arquivos automaticamente.</span><span class="sxs-lookup"><span data-stu-id="9ed35-133">During development, you can use hello **--save**, **--save-dev**, or **--save-optional** parameters when installing modules tooadd an entry for hello module tooyour **package.json** file automatically.</span></span> <span data-ttu-id="9ed35-134">Para obter mais informações, consulte [instalar-npm](https://docs.npmjs.com/cli/install).</span><span class="sxs-lookup"><span data-stu-id="9ed35-134">For more information, see [npm-install](https://docs.npmjs.com/cli/install).</span></span>

<span data-ttu-id="9ed35-135">Um problema potencial com hello **Package. JSON** arquivo é que ela especifica apenas versão Olá para dependências de nível superior.</span><span class="sxs-lookup"><span data-stu-id="9ed35-135">One potential problem with hello **package.json** file is that it only specifies hello version for top-level dependencies.</span></span> <span data-ttu-id="9ed35-136">Cada módulo instalado pode ou não pode especificar a versão de saudação dos módulos Olá depende, e assim, é possível que você pode acabar com uma cadeia de dependência diferentes que Olá usado no desenvolvimento.</span><span class="sxs-lookup"><span data-stu-id="9ed35-136">Each module installed may or may not specify hello version of hello modules it depends on, and so it is possible that you may end up with a different dependency chain than hello one used in development.</span></span>

> [!NOTE]
> <span data-ttu-id="9ed35-137">Ao implantar tooAzure do serviço de aplicativo, se seu <b>Package. JSON</b> arquivo faz referência a um módulo nativo, talvez você veja uma toohello semelhante erro exemplo a seguir ao publicar o aplicativo hello usando Git:</span><span class="sxs-lookup"><span data-stu-id="9ed35-137">When deploying tooAzure App Service, if your <b>package.json</b> file references a native module you might see an error similar toohello following example when publishing hello application using Git:</span></span>
> 
> <span data-ttu-id="9ed35-138">npm ERR!</span><span class="sxs-lookup"><span data-stu-id="9ed35-138">npm ERR!</span></span> <span data-ttu-id="9ed35-139">Instalar module-name@0.6.0: 'node-gyp configure build'</span><span class="sxs-lookup"><span data-stu-id="9ed35-139">module-name@0.6.0 install: 'node-gyp configure build'</span></span>
> 
> <span data-ttu-id="9ed35-140">npm ERR!</span><span class="sxs-lookup"><span data-stu-id="9ed35-140">npm ERR!</span></span> <span data-ttu-id="9ed35-141">'cmd "/c" "node-gyp rebuild"' falhou com 1</span><span class="sxs-lookup"><span data-stu-id="9ed35-141">'cmd "/c" "node-gyp configure build"' failed with 1</span></span>
> 
> 

### <a name="using-a-npm-shrinkwrapjson-file"></a><span data-ttu-id="9ed35-142">Usando um arquivo npm-shrinkwrap.json</span><span class="sxs-lookup"><span data-stu-id="9ed35-142">Using a npm-shrinkwrap.json file</span></span>
<span data-ttu-id="9ed35-143">Olá **npm shrinkwrap.json** arquivo é uma tentativa de tooaddress Olá módulo controle de versão limitações Olá **Package. JSON** arquivo.</span><span class="sxs-lookup"><span data-stu-id="9ed35-143">hello **npm-shrinkwrap.json** file is an attempt tooaddress hello module versioning limitations of hello **package.json** file.</span></span> <span data-ttu-id="9ed35-144">Durante a saudação **Package. JSON** arquivo inclui somente versões para módulos de nível superior hello, hello **shrinkwrap.json npm** arquivo contém requisitos de versão de saudação para cadeia de dependência de módulo completo hello.</span><span class="sxs-lookup"><span data-stu-id="9ed35-144">While hello **package.json** file only includes versions for hello top-level modules, hello **npm-shrinkwrap.json** file contains hello version requirements for hello full module dependency chain.</span></span>

<span data-ttu-id="9ed35-145">Quando seu aplicativo está pronto para produção, você pode bloquear os requisitos de versão e criar um **npm shrinkwrap.json** arquivo usando Olá **shrinkwrap npm** comando.</span><span class="sxs-lookup"><span data-stu-id="9ed35-145">When your application is ready for production, you can lock down version requirements and create an **npm-shrinkwrap.json** file by using hello **npm shrinkwrap** command.</span></span> <span data-ttu-id="9ed35-146">Este comando usará versões Olá atualmente instaladas no hello **nó\_módulos** pasta e registrar essas versões toohello **shrinkwrap.json npm** arquivo.</span><span class="sxs-lookup"><span data-stu-id="9ed35-146">This command will use hello versions currently installed in hello **node\_modules** folder, and record these versions toohello **npm-shrinkwrap.json** file.</span></span> <span data-ttu-id="9ed35-147">Depois que o aplicativo hello tenha sido implantado toohello ambiente de hospedagem, Olá **npm instalar** comando é usado tooparse Olá **shrinkwrap.json npm** de arquivo e instalar todas as dependências de saudação listadas.</span><span class="sxs-lookup"><span data-stu-id="9ed35-147">After hello application has been deployed toohello hosting environment, hello **npm install** command is used tooparse hello **npm-shrinkwrap.json** file and install all hello dependencies listed.</span></span> <span data-ttu-id="9ed35-148">Para obter mais informações, consulte [npm-shrinkwrap](https://docs.npmjs.com/cli/shrinkwrap).</span><span class="sxs-lookup"><span data-stu-id="9ed35-148">For more information, see [npm-shrinkwrap](https://docs.npmjs.com/cli/shrinkwrap).</span></span>

> [!NOTE]
> <span data-ttu-id="9ed35-149">Ao implantar tooAzure do serviço de aplicativo, se seu <b>shrinkwrap.json npm</b> arquivo faz referência a um módulo nativo, talvez você veja uma toohello semelhante erro exemplo a seguir ao publicar o aplicativo hello usando Git:</span><span class="sxs-lookup"><span data-stu-id="9ed35-149">When deploying tooAzure App Service, if your <b>npm-shrinkwrap.json</b> file references a native module you might see an error similar toohello following example when publishing hello application using Git:</span></span>
> 
> <span data-ttu-id="9ed35-150">npm ERR!</span><span class="sxs-lookup"><span data-stu-id="9ed35-150">npm ERR!</span></span> <span data-ttu-id="9ed35-151">Instalar module-name@0.6.0: 'node-gyp configure build'</span><span class="sxs-lookup"><span data-stu-id="9ed35-151">module-name@0.6.0 install: 'node-gyp configure build'</span></span>
> 
> <span data-ttu-id="9ed35-152">npm ERR!</span><span class="sxs-lookup"><span data-stu-id="9ed35-152">npm ERR!</span></span> <span data-ttu-id="9ed35-153">'cmd "/c" "node-gyp rebuild"' falhou com 1</span><span class="sxs-lookup"><span data-stu-id="9ed35-153">'cmd "/c" "node-gyp configure build"' failed with 1</span></span>
> 
> 

## <a name="next-steps"></a><span data-ttu-id="9ed35-154">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="9ed35-154">Next steps</span></span>
<span data-ttu-id="9ed35-155">Agora que você sabe como toouse Node. js módulos com o Azure, saiba como muito[especificar Olá Node. js versão], [criar e implantar um aplicativo de web Node.js](app-service-web/app-service-web-get-started-nodejs.md), e [como toouse Olá de linha de comando do Azure Interface para Mac e Linux].</span><span class="sxs-lookup"><span data-stu-id="9ed35-155">Now that you understand how toouse Node.js modules with Azure, learn how too[specify hello Node.js version], [build and deploy a Node.js web app](app-service-web/app-service-web-get-started-nodejs.md), and [How toouse hello Azure Command-Line Interface for Mac and Linux].</span></span>

<span data-ttu-id="9ed35-156">Para obter mais informações, consulte Olá [Node. js Developer Center](/nodejs/azure/).</span><span class="sxs-lookup"><span data-stu-id="9ed35-156">For more information, see hello [Node.js Developer Center](/nodejs/azure/).</span></span>

[especificar Olá Node. js versão]: nodejs-specify-node-version-azure-apps.md
[como toouse Olá de linha de comando do Azure Interface para Mac e Linux]:cli-install-nodejs.md
[Scripts de implantação de site personalizado com Kudu]: https://channel9.msdn.com/Shows/Azure-Friday/Custom-Web-Site-Deployment-Scripts-with-Kudu-with-David-Ebbo
