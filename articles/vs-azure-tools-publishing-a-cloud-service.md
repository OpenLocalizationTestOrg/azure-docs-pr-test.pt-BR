---
title: "Publicando um serviço de nuvem usando as ferramentas do Azure | Microsoft Docs"
description: "Saiba mais sobre como publicar projetos de serviço de nuvem do Azure usando o Visual Studio."
services: visual-studio-online
documentationcenter: na
author: kraigb
manager: ghogen
editor: 
ms.assetid: 1a07b6e4-3678-4cbf-b37e-4520b402a3d9
ms.service: multiple
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: multiple
ms.date: 8/14/2017
ms.author: kraigb
ms.openlocfilehash: e617d600dbc8287eea737fc4969833e873365288
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/29/2017
---
# <a name="publishing-a-cloud-service-using-the-azure-tools"></a><span data-ttu-id="d48cc-103">Publicando um serviço de nuvem usando as ferramentas do Azure</span><span class="sxs-lookup"><span data-stu-id="d48cc-103">Publishing a Cloud Service using the Azure Tools</span></span>
<span data-ttu-id="d48cc-104">Usando as ferramentas do Azure para Microsoft Visual Studio, você pode publicar seu aplicativo do Azure diretamente do Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="d48cc-104">By using the Azure Tools for Microsoft Visual Studio, you can publish your Azure application directly from Visual Studio.</span></span> <span data-ttu-id="d48cc-105">O Visual Studio dá suporte à publicação integrada para o ambiente de teste ou de produção de um serviço de nuvem.</span><span class="sxs-lookup"><span data-stu-id="d48cc-105">Visual Studio supports integrated publishing to either the Staging or the Production environment of a cloud service.</span></span>

<span data-ttu-id="d48cc-106">Para publicar um aplicativo do Azure, você deve ter uma assinatura do Azure.</span><span class="sxs-lookup"><span data-stu-id="d48cc-106">Before you can publish an Azure application, you must have an Azure subscription.</span></span> <span data-ttu-id="d48cc-107">Você também deve configurar uma conta de armazenamento e serviço de nuvem a ser usada pelo aplicativo.</span><span class="sxs-lookup"><span data-stu-id="d48cc-107">You must also set up a cloud service and storage account to be used by your application.</span></span> <span data-ttu-id="d48cc-108">Você pode configurá-los no [Portal Clássico do Azure](http://go.microsoft.com/fwlink/?LinkID=213885).</span><span class="sxs-lookup"><span data-stu-id="d48cc-108">You can set these up at the [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="d48cc-109">Ao publicar, você pode selecionar o ambiente de implantação para seu serviço de nuvem.</span><span class="sxs-lookup"><span data-stu-id="d48cc-109">When you publish, you can select the deployment environment for your cloud service.</span></span> <span data-ttu-id="d48cc-110">Você também deve selecionar uma conta de armazenamento que é usada para armazenar o pacote de aplicativos para implantação.</span><span class="sxs-lookup"><span data-stu-id="d48cc-110">You must also select a storage account that is used to store the application package for deployment.</span></span> <span data-ttu-id="d48cc-111">Após a implantação, o pacote de aplicativos é removido da conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="d48cc-111">After deployment, the application package is removed from the storage account.</span></span>
> 
> 

<span data-ttu-id="d48cc-112">Ao desenvolver e testar um aplicativo do Azure, você pode usar a implantação da Web para publicar alterações incrementalmente para funções Web.</span><span class="sxs-lookup"><span data-stu-id="d48cc-112">When you are developing and testing an Azure application, you can use Web Deploy to publish changes incrementally for your web roles.</span></span> <span data-ttu-id="d48cc-113">Depois de publicar seu aplicativo para um ambiente de implantação, a Implantação da Web permite implantar alterações diretamente na máquina virtual que está executando a função Web.</span><span class="sxs-lookup"><span data-stu-id="d48cc-113">After you publish your application to a deployment environment, Web Deploy lets you deploy changes directly to the virtual machine that is running the web role.</span></span> <span data-ttu-id="d48cc-114">Você não precisa empacotar e publicar o aplicativo do Azure inteiro sempre que desejar atualizar a função Web para testar as alterações.</span><span class="sxs-lookup"><span data-stu-id="d48cc-114">You do not have to package and publish your entire Azure application each time you want to update your web role to test out the changes.</span></span> <span data-ttu-id="d48cc-115">Com essa abordagem, você pode ter suas alterações de função da Web disponíveis na nuvem para testes sem aguardar a publicação do aplicativo em um ambiente de implantação.</span><span class="sxs-lookup"><span data-stu-id="d48cc-115">With this approach you can have your web role changes available in the cloud for testing without waiting to have your application published to a deployment environment.</span></span>

<span data-ttu-id="d48cc-116">Use os procedimentos a seguir para publicar seu aplicativo do Azure e atualizar uma função Web usando a implantação da Web:</span><span class="sxs-lookup"><span data-stu-id="d48cc-116">Use the following procedures to publish your Azure application and to update a web role by using Web Deploy:</span></span>

* <span data-ttu-id="d48cc-117">Publicar ou empacotar um aplicativo do Azure do Visual Studio</span><span class="sxs-lookup"><span data-stu-id="d48cc-117">Publish or Package an Azure application from Visual Studio</span></span>
* <span data-ttu-id="d48cc-118">Atualizar uma função Web como parte do ciclo de desenvolvimento e teste</span><span class="sxs-lookup"><span data-stu-id="d48cc-118">Update a web role as part of the development and testing cycle</span></span>

## <a name="publish-or-package-an-azure-application-from-visual-studio"></a><span data-ttu-id="d48cc-119">Publicar ou empacotar um aplicativo do Azure do Visual Studio</span><span class="sxs-lookup"><span data-stu-id="d48cc-119">Publish or Package an Azure Application from Visual Studio</span></span>
<span data-ttu-id="d48cc-120">Ao publicar seu aplicativo do Azure, você pode executar uma das seguintes tarefas:</span><span class="sxs-lookup"><span data-stu-id="d48cc-120">When you publish your Azure application, you can do one of the following tasks:</span></span>

* <span data-ttu-id="d48cc-121">Criar um pacote de serviço: você pode usar esse pacote e o arquivo de configuração de serviço para publicar seu aplicativo para um ambiente de implantação do [Portal Clássico do Azure](http://go.microsoft.com/fwlink/?LinkID=213885).</span><span class="sxs-lookup"><span data-stu-id="d48cc-121">Create a service package: You can use this package and the service configuration file to publish your application to a deployment environment from the [Azure Classic Portal](http://go.microsoft.com/fwlink/?LinkID=213885).</span></span>
* <span data-ttu-id="d48cc-122">Publicar seu projeto do Azure do Visual Studio: para publicar seu aplicativo diretamente no Azure, use o Assistente de Publicação.</span><span class="sxs-lookup"><span data-stu-id="d48cc-122">Publish your Azure project from Visual Studio: To publish your application directly to Azure, you use the Publish Wizard.</span></span> <span data-ttu-id="d48cc-123">Para obter informações, consulte [Assistente de Publicação de Aplicativo do Azure](vs-azure-tools-publish-azure-application-wizard.md).</span><span class="sxs-lookup"><span data-stu-id="d48cc-123">For information, see [Publish Azure Application Wizard](vs-azure-tools-publish-azure-application-wizard.md).</span></span>

### <a name="to-create-a-service-package-from-visual-studio"></a><span data-ttu-id="d48cc-124">Para criar um pacote de serviço do Visual Studio</span><span class="sxs-lookup"><span data-stu-id="d48cc-124">To create a service package from Visual Studio</span></span>
1. <span data-ttu-id="d48cc-125">Quando estiver pronto para publicar seu aplicativo, abra o Gerenciador de Soluções, abra o menu de atalho do projeto do Azure que contém suas funções e selecione Publicar.</span><span class="sxs-lookup"><span data-stu-id="d48cc-125">When you are ready to publish your application, open Solution Explorer, open the shortcut menu for the Azure project that contains your roles, and choose Publish.</span></span>
2. <span data-ttu-id="d48cc-126">Para criar um pacote de serviço, siga estas etapas:</span><span class="sxs-lookup"><span data-stu-id="d48cc-126">To create a service package only, follow these steps:</span></span>  
   
   1. <span data-ttu-id="d48cc-127">No menu de atalho do projeto do Azure, escolha **Pacote**.</span><span class="sxs-lookup"><span data-stu-id="d48cc-127">On the shortcut menu for the Azure project, choose **Package**.</span></span>
   2. <span data-ttu-id="d48cc-128">Na caixa de diálogo **Empacotar Aplicativo do Azure** , escolha a configuração de serviço para a qual você deseja criar um pacote e, em seguida, escolha a configuração de compilação.</span><span class="sxs-lookup"><span data-stu-id="d48cc-128">In the **Package Azure Application** dialog box, choose the service configuration for which you want to create a package, and then choose the build configuration.</span></span>
   3. <span data-ttu-id="d48cc-129">(opcional) Para ativar a Área de Trabalho Remota para o serviço de nuvem depois de publicá-lo, marque a caixa de seleção **Habilitar Área de Trabalho Remota para todas as Funções** e selecione **Configurações** para configurar a Área de Trabalho Remota.</span><span class="sxs-lookup"><span data-stu-id="d48cc-129">(optional) To turn on Remote Desktop for the cloud service after you publish it, select the **Enable Remote Desktop for all Roles** check box, and then select **Settings** to configure Remote Desktop.</span></span> <span data-ttu-id="d48cc-130">Se você quiser depurar seu serviço de nuvem após publicá-lo, ative a depuração remota, selecionando **Ativar o Depurador Remoto para todas as Funções**.</span><span class="sxs-lookup"><span data-stu-id="d48cc-130">If you want to debug your cloud service after you publish it, turn on remote debugging by selecting **Enable Remote Debugger for all Roles**.</span></span>
      
      <span data-ttu-id="d48cc-131">Para saber mais, confira [Usando a Área de Trabalho Remota com as funções do Azure](vs-azure-tools-remote-desktop-roles.md).</span><span class="sxs-lookup"><span data-stu-id="d48cc-131">For more information, see [Using Remote Desktop with Azure Roles](vs-azure-tools-remote-desktop-roles.md).</span></span>
   4. <span data-ttu-id="d48cc-132">Para criar o pacote, escolha o link **pacote** .</span><span class="sxs-lookup"><span data-stu-id="d48cc-132">To create the package, choose the **Package** link.</span></span>
      
      <span data-ttu-id="d48cc-133">O Explorador de Arquivos mostra o local do arquivo do pacote recém-criado.</span><span class="sxs-lookup"><span data-stu-id="d48cc-133">File Explorer shows the file location of the newly created package.</span></span> <span data-ttu-id="d48cc-134">Você pode copiar esse local para que possa usá-lo do [Portal Clássico do Azure](http://go.microsoft.com/fwlink/?LinkID=213885).</span><span class="sxs-lookup"><span data-stu-id="d48cc-134">You can copy this location so that you can use it from the [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885).</span></span>
   5. <span data-ttu-id="d48cc-135">Para publicar esse pacote em um ambiente de implantação, você deve usar esse local como o local do pacote ao criar um serviço de nuvem e implantar esse pacote em um ambiente com o [Portal Clássico do Azure](http://go.microsoft.com/fwlink/?LinkID=213885).</span><span class="sxs-lookup"><span data-stu-id="d48cc-135">To publish this package to a deployment environment, you must use this location as the Package location when you create a cloud service and deploy this package to an environment with the [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885).</span></span>
3. <span data-ttu-id="d48cc-136">(Opcional) Para cancelar o processo de implantação, no menu de atalho do item de linha no log de atividades, escolha **Cancelar e remover**.</span><span class="sxs-lookup"><span data-stu-id="d48cc-136">(Optional) To cancel the deployment process, on the shortcut menu for the line item in the activity log, choose **Cancel and remove**.</span></span> <span data-ttu-id="d48cc-137">Isso interrompe o processo de implantação e exclui o ambiente de implantação do Azure.</span><span class="sxs-lookup"><span data-stu-id="d48cc-137">This stops the deployment process and deletes the deployment environment from Azure.</span></span>
   
   > [!NOTE]
   > <span data-ttu-id="d48cc-138">Para remover este ambiente de implantação após ele ter sido implantado, você deve usar o [Portal Clássico do Azure](http://go.microsoft.com/fwlink/?LinkID=213885).</span><span class="sxs-lookup"><span data-stu-id="d48cc-138">To remove this deployment environment after it has been deployed, you must use the [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885).</span></span>
   > 
   > 
4. <span data-ttu-id="d48cc-139">(Opcional) Após ter iniciado as instâncias de função, o Visual Studio mostra automaticamente o ambiente de implantação no nó **Serviços de Nuvem** no Gerenciador de Servidores.</span><span class="sxs-lookup"><span data-stu-id="d48cc-139">(Optional) After your role instances have started, Visual Studio automatically shows the deployment environment in the **Cloud Services** node in Server Explorer.</span></span> <span data-ttu-id="d48cc-140">Nele, você pode ver o status das instâncias de função individuais.</span><span class="sxs-lookup"><span data-stu-id="d48cc-140">From here, you can see the status of the individual role instances.</span></span> <span data-ttu-id="d48cc-141">Confira [Gerenciando recursos de Azure com o Cloud Explorer](vs-azure-tools-resources-managing-with-cloud-explorer.md). A ilustração a seguir mostra as instâncias de função enquanto elas ainda estão no estado Inicializando:</span><span class="sxs-lookup"><span data-stu-id="d48cc-141">See [Managing Azure resources with Cloud Explorer](vs-azure-tools-resources-managing-with-cloud-explorer.md).The following illustration shows the role instances while they are still in the Initializing state:</span></span>
   
    ![VST_DeployComputeNode](./media/vs-azure-tools-publishing-a-cloud-service/IC744134.png)

## <a name="update-a-web-role-as-part-of-the-development-and-testing-cycle"></a><span data-ttu-id="d48cc-143">Atualizar uma função Web como parte do ciclo de desenvolvimento e teste</span><span class="sxs-lookup"><span data-stu-id="d48cc-143">Update a Web Role as Part of the Development and Testing Cycle</span></span>
<span data-ttu-id="d48cc-144">Se a infraestrutura de back-end do aplicativo for estável, mas as funções Web precisarem de atualizações mais frequentes, você poderá usar a implantação da Web para atualizar apenas uma função Web em seu projeto.</span><span class="sxs-lookup"><span data-stu-id="d48cc-144">If your app’s backend infrastructure is stable, but the web roles need more frequent updating, you can use Web Deploy to update only a web role in your project.</span></span> <span data-ttu-id="d48cc-145">Isso é útil quando você não deseja recriar e reimplantar as funções de trabalho de back-end ou se tem várias funções Web e deseja atualizar somente uma delas.</span><span class="sxs-lookup"><span data-stu-id="d48cc-145">This is handy when you don’t want to rebuild and redeploy the backend worker roles, or if you have multiple web roles and you want to update only one of the web roles.</span></span>

### <a name="requirements"></a><span data-ttu-id="d48cc-146">Requisitos</span><span class="sxs-lookup"><span data-stu-id="d48cc-146">Requirements</span></span>
<span data-ttu-id="d48cc-147">Aqui estão os requisitos para usar a Implantação da Web para atualizar a função Web:</span><span class="sxs-lookup"><span data-stu-id="d48cc-147">Here are the requirements to use Web Deploy to update your web role:</span></span>

* <span data-ttu-id="d48cc-148">**Apenas para fins de desenvolvimento e teste:** as alterações são feitas diretamente na máquina virtual em que a função Web está sendo executada.</span><span class="sxs-lookup"><span data-stu-id="d48cc-148">**For development and testing purposes only:** The changes are made directly to the virtual machine where the web role is running.</span></span> <span data-ttu-id="d48cc-149">Se essa máquina virtual precisar ser reciclada, as alterações serão perdidas porque o pacote original que você publicou é usado para recriar a máquina virtual para a função.</span><span class="sxs-lookup"><span data-stu-id="d48cc-149">If this virtual machine has to be recycled, the changes are lost because the original package that you published is used to recreate the virtual machine for the role.</span></span> <span data-ttu-id="d48cc-150">Você deve republicar seu aplicativo para obter as alterações mais recentes para a função Web.</span><span class="sxs-lookup"><span data-stu-id="d48cc-150">You must republish your application to get the latest changes for the web role.</span></span>
* <span data-ttu-id="d48cc-151">**Apenas funções Web podem ser atualizadas:** funções de trabalho não podem ser atualizadas.</span><span class="sxs-lookup"><span data-stu-id="d48cc-151">**Only web roles can be updated:** Worker roles can’t be updated.</span></span> <span data-ttu-id="d48cc-152">Além disso, você não pode atualizar o RoleEntryPoint no role.cs da Web.</span><span class="sxs-lookup"><span data-stu-id="d48cc-152">In addition, you can’t update the RoleEntryPoint in web role.cs.</span></span>
* <span data-ttu-id="d48cc-153">**Só há suporte a uma única instância de uma função Web:** não pode haver várias instâncias da função Web em seu ambiente de implantação.</span><span class="sxs-lookup"><span data-stu-id="d48cc-153">**Can only support a single instance of a web role:** You can’t have multiple instances of any web role in your deployment environment.</span></span> <span data-ttu-id="d48cc-154">No entanto, há suporte para várias funções Web, cada com apenas uma instância.</span><span class="sxs-lookup"><span data-stu-id="d48cc-154">However, multiple web roles each with only one instance are supported.</span></span>
* <span data-ttu-id="d48cc-155">**Você deve habilitar conexões de área de trabalho remota:** isso é necessário para que a Implantação da Web possa usar o usuário e a senha para se conectar à máquina virtual e implantar as alterações no servidor que está executando o IIS (Serviços de Informações da Internet).</span><span class="sxs-lookup"><span data-stu-id="d48cc-155">**You must enable remote desktop connections:** This is required so that Web Deploy can use the user and password to connect to the virtual machine to deploy the changes to the server that’s running Internet Information Services (IIS).</span></span> <span data-ttu-id="d48cc-156">Além disso, talvez seja necessário conectar-se à máquina virtual para adicionar um certificado confiável ao IIS nessa máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="d48cc-156">In addition, you might need to connect to the virtual machine to add a trusted certificate to IIS on this virtual machine.</span></span> <span data-ttu-id="d48cc-157">(Isso garante que a conexão remota ao IIS usada pela implantação da Web é segura).</span><span class="sxs-lookup"><span data-stu-id="d48cc-157">(This ensures that the remote connection for IIS that is used by Web Deploy is secure.)</span></span>

<span data-ttu-id="d48cc-158">O procedimento a seguir supõe que você esteja usando o assistente para **Publicar Aplicativo do Azure** .</span><span class="sxs-lookup"><span data-stu-id="d48cc-158">The following procedure assumes that you are using the **Publish Azure Application** wizard.</span></span>

### <a name="to-enable-web-deploy-when-you-publish-your-application"></a><span data-ttu-id="d48cc-159">Para habilitar a Implantação da Web ao publicar seu aplicativo</span><span class="sxs-lookup"><span data-stu-id="d48cc-159">To Enable Web Deploy When You Publish Your Application</span></span>
1. <span data-ttu-id="d48cc-160">Para habilitar a caixa de seleção de **Habilitar Implantação da Web** para todas as funções Web, primeiro você deve configurar conexões de área de trabalho remota.</span><span class="sxs-lookup"><span data-stu-id="d48cc-160">To enable the **Enable Web Deploy** for all web roles check box, you must first configure remote desktop connections.</span></span> <span data-ttu-id="d48cc-161">Escolha **Habilitar Área de Trabalho Remota** para todas as funções e, em seguida, forneça as credenciais que serão usadas para se conectar remotamente na caixa **Configuração da Área de Trabalho Remota** que é mostrada.</span><span class="sxs-lookup"><span data-stu-id="d48cc-161">Select **Enable Remote Desktop** for all roles and then supply the credentials that will be used to connect remotely in the **Remote Desktop Configuration** box that appears.</span></span> <span data-ttu-id="d48cc-162">Consulte [Usando a Área de Trabalho Remota com funções do Azure](vs-azure-tools-remote-desktop-roles.md) para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="d48cc-162">See [Using Remote Desktop with Azure Roles](vs-azure-tools-remote-desktop-roles.md) for more information.</span></span>
2. <span data-ttu-id="d48cc-163">Para habilitar a Implantação da Web para todas as funções Web em seu aplicativo, selecione **Habilitar Implantação da Web para todas as funções Web**.</span><span class="sxs-lookup"><span data-stu-id="d48cc-163">To enable Web Deploy for all the web roles in your application, select **Enable Web Deploy for all web roles**.</span></span>
   
    <span data-ttu-id="d48cc-164">Um triângulo amarelo de aviso será exibido.</span><span class="sxs-lookup"><span data-stu-id="d48cc-164">A yellow warning triangle appears.</span></span> <span data-ttu-id="d48cc-165">A Implantação da Web usa um certificado não confiável, autoassinado por padrão, o que não é recomendado para carregar dados confidenciais.</span><span class="sxs-lookup"><span data-stu-id="d48cc-165">Web Deploy uses an untrusted, self-signed certificate by default, which is not recommended for uploading sensitive data.</span></span> <span data-ttu-id="d48cc-166">Se precisar proteger esse processo para dados confidenciais, você poderá adicionar um certificado SSL a ser usado para conexões de Implantação da Web.</span><span class="sxs-lookup"><span data-stu-id="d48cc-166">If you need to secure this process for sensitive data, you can add a SSL certificate to be used for Web Deploy connections.</span></span> <span data-ttu-id="d48cc-167">Esse deve ser um certificado confiável.</span><span class="sxs-lookup"><span data-stu-id="d48cc-167">This certificate needs to be a trusted certificate.</span></span> <span data-ttu-id="d48cc-168">Para obter informações sobre como fazer isso, consulte a seção **Para tornar a Implantação da Web segura** , mais adiante neste tópico.</span><span class="sxs-lookup"><span data-stu-id="d48cc-168">For information about how to do this, see the section **To Make Web Deploy Secure** later in this topic.</span></span>
3. <span data-ttu-id="d48cc-169">Escolha **Avançar** para mostrar a tela **Resumo** e, em seguida, escolha **Publicar** para implantar o serviço de nuvem.</span><span class="sxs-lookup"><span data-stu-id="d48cc-169">Choose **Next** to show the **Summary** screen, and then choose **Publish** to deploy the cloud service.</span></span>
   
    <span data-ttu-id="d48cc-170">O serviço de nuvem é publicado.</span><span class="sxs-lookup"><span data-stu-id="d48cc-170">The cloud service is published.</span></span> <span data-ttu-id="d48cc-171">A máquina virtual que é criada tem conexões remotas habilitadas para o IIS para que a Implantação da Web possa ser usada para atualizar suas funções Web sem as publicar novamente.</span><span class="sxs-lookup"><span data-stu-id="d48cc-171">The virtual machine that is created has remote connections enabled for IIS so that Web Deploy can be used to update your web roles without republishing them.</span></span>
   
   > [!NOTE]
   > <span data-ttu-id="d48cc-172">Se você tiver mais de uma instância configurada para uma função Web, será exibida uma mensagem de aviso informando que cada função Web será limitada a uma instância somente no pacote que é criado para publicar seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="d48cc-172">If you have more than one instance configured for a web role, a warning message appears, stating that each web role will be limited to one instance only in the package that’s created to publish your application.</span></span> <span data-ttu-id="d48cc-173">Selecione **OK** para continuar.</span><span class="sxs-lookup"><span data-stu-id="d48cc-173">Select **OK** to continue.</span></span> <span data-ttu-id="d48cc-174">Conforme mencionado na seção Requisitos, você pode ter mais de uma função Web, mas apenas uma instância de cada função.</span><span class="sxs-lookup"><span data-stu-id="d48cc-174">As stated in the Requirements section, you can have more than one web role but only one instance of each role.</span></span>
   > 
   > 

### <a name="to-update-your-web-role-by-using-web-deploy"></a><span data-ttu-id="d48cc-175">Para atualizar sua função Web usando a Implantação da Web</span><span class="sxs-lookup"><span data-stu-id="d48cc-175">To Update Your Web Role by Using Web Deploy</span></span>
1. <span data-ttu-id="d48cc-176">Para usar a Implantação da Web, faça alterações de código no projeto para qualquer uma das funções Web no Visual Studio que você deseja publicar, clique com o botão direito no nó do projeto na solução e aponte para **Publicar**.</span><span class="sxs-lookup"><span data-stu-id="d48cc-176">To use Web Deploy, make code changes to the project for any of your web roles in Visual Studio that you want to publish, and then right-click this project node in your solution and point to **Publish**.</span></span> <span data-ttu-id="d48cc-177">A caixa de diálogo **Publicar Web** é exibida.</span><span class="sxs-lookup"><span data-stu-id="d48cc-177">The **Publish Web** dialog box appears.</span></span>
2. <span data-ttu-id="d48cc-178">(Opcional) Se adicionou um certificado SSL confiável a ser usado para conexões remotas para o IIS, você pode desmarcar a caixa de seleção **Permitir certificado não confiável** .</span><span class="sxs-lookup"><span data-stu-id="d48cc-178">(Optional) If you added a trusted SSL certificate to use for remote connections for IIS, you can clear the **Allow untrusted certificate** check box.</span></span> <span data-ttu-id="d48cc-179">Para obter informações sobre como adicionar um certificado para proteger a Implantação da Web, consulte a seção **Para tornar a Implantação da Web segura** , mais adiante neste tópico.</span><span class="sxs-lookup"><span data-stu-id="d48cc-179">For information about how to add a certificate to make Web Deploy secure, see the section **To Make Web Deploy Secure** later in this topic.</span></span>
3. <span data-ttu-id="d48cc-180">Para usar a Implantação da Web, o mecanismo de publicação precisa do nome de usuário e da senha que você configurou para a conexão de área de trabalho remota ao publicar o pacote pela primeira vez.</span><span class="sxs-lookup"><span data-stu-id="d48cc-180">To use Web Deploy, the publish mechanism needs the user name and password that you set up for your remote desktop connection when you first published the package.</span></span>
   
   1. <span data-ttu-id="d48cc-181">Em **Nome de usuário**, digite o nome de usuário.</span><span class="sxs-lookup"><span data-stu-id="d48cc-181">In **User name**, enter the user name.</span></span>
   2. <span data-ttu-id="d48cc-182">Em **Senha**, digite a senha.</span><span class="sxs-lookup"><span data-stu-id="d48cc-182">In **Password**, enter the password.</span></span>
   3. <span data-ttu-id="d48cc-183">(Opcional) Se você quiser salvar esta senha nesse perfil, escolha **Salvar senha**.</span><span class="sxs-lookup"><span data-stu-id="d48cc-183">(Optional) If you want to save this password in this profile, choose **Save password**.</span></span>
4. <span data-ttu-id="d48cc-184">Para publicar as alterações em sua função Web, escolha **Publicar**.</span><span class="sxs-lookup"><span data-stu-id="d48cc-184">To publish the changes to your web role, choose **Publish**.</span></span>
   
    <span data-ttu-id="d48cc-185">A linha de status exibe **Publicação iniciada**.</span><span class="sxs-lookup"><span data-stu-id="d48cc-185">The status line displays **Publish started**.</span></span> <span data-ttu-id="d48cc-186">Quando a publicação for concluída, a mensagem **Publicação bem-sucedida** será exibida.</span><span class="sxs-lookup"><span data-stu-id="d48cc-186">When the publishing has completed, **Publish succeeded** appears.</span></span> <span data-ttu-id="d48cc-187">Agora as alterações foram implantadas na função Web em sua máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="d48cc-187">The changes have now been deployed to the web role on your virtual machine.</span></span> <span data-ttu-id="d48cc-188">Você pode então iniciar o aplicativo do Azure no ambiente do Azure para testar as alterações.</span><span class="sxs-lookup"><span data-stu-id="d48cc-188">Now you can start your Azure application in the Azure environment to test your changes.</span></span>

### <a name="to-make-web-deploy-secure"></a><span data-ttu-id="d48cc-189">Para tornar a Implantação da Web segura</span><span class="sxs-lookup"><span data-stu-id="d48cc-189">To Make Web Deploy Secure</span></span>
1. <span data-ttu-id="d48cc-190">A Implantação da Web usa um certificado não confiável, autoassinado por padrão, o que não é recomendado para carregar dados confidenciais.</span><span class="sxs-lookup"><span data-stu-id="d48cc-190">Web Deploy uses an untrusted, self-signed certificate by default, which is not recommended for uploading sensitive data.</span></span> <span data-ttu-id="d48cc-191">Se precisar proteger esse processo para dados confidenciais, você poderá adicionar um certificado SSL a ser usado para conexões de Implantação da Web.</span><span class="sxs-lookup"><span data-stu-id="d48cc-191">If you need to secure this process for sensitive data, you can add a SSL certificate to be used for Web Deploy connections.</span></span> <span data-ttu-id="d48cc-192">Esse deve ser um certificado confiável, que você obtém de uma CA (autoridade de certificação).</span><span class="sxs-lookup"><span data-stu-id="d48cc-192">This certificate needs to be a trusted certificate, which you obtain from a certificate authority (CA).</span></span>
   
    <span data-ttu-id="d48cc-193">Para tornar a Implantação da Web segura para cada máquina virtual de cada uma das funções web, é necessário carregar o certificado de confiança que você deseja usar para a implantação da Web no [portal clássico do Azure](http://go.microsoft.com/fwlink/?LinkID=213885).</span><span class="sxs-lookup"><span data-stu-id="d48cc-193">To make Web Deploy secure for each virtual machine for each of your web roles, you must upload the trusted certificate that you want to use for web deploy to the [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885).</span></span> <span data-ttu-id="d48cc-194">Isso garante que o certificado seja adicionado à máquina virtual que é criada para a função Web quando você publicar seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="d48cc-194">This makes sure that the certificate is added to the virtual machine that is created for the web role when you publish your application.</span></span>
2. <span data-ttu-id="d48cc-195">Para adicionar um certificado SSL confiável ao IIS a ser usado em conexões remotas, siga estas etapas:</span><span class="sxs-lookup"><span data-stu-id="d48cc-195">To add a trusted SSL certificate to IIS to use for remote connections, follow these steps:</span></span>
   
   1. <span data-ttu-id="d48cc-196">Para se conectar à máquina virtual que está executando a função web, selecione a instância da função web em **Cloud Explorer** ou **Gerenciador de Servidores** e escolha o comando **Conectar-se usando a Área de Trabalho Remota**.</span><span class="sxs-lookup"><span data-stu-id="d48cc-196">To connect to the virtual machine that is running the web role, select the instance of the web role in **Cloud Explorer** or **Server Explorer**, and then choose the **Connect using Remote Desktop** command.</span></span> <span data-ttu-id="d48cc-197">Para obter etapas detalhadas sobre como se conectar à máquina virtual, consulte [Usando a Área de Trabalho Remota com funções do Azure](vs-azure-tools-remote-desktop-roles.md).</span><span class="sxs-lookup"><span data-stu-id="d48cc-197">For detailed steps about how to connect to the virtual machine, see [Using Remote Desktop with Azure Roles](vs-azure-tools-remote-desktop-roles.md).</span></span>
      
      <span data-ttu-id="d48cc-198">O navegador solicitará que você baixe um arquivo .RDP.</span><span class="sxs-lookup"><span data-stu-id="d48cc-198">Your browser will prompt you to download an .RDP file.</span></span>
   2. <span data-ttu-id="d48cc-199">Para adicionar um certificado SSL, abra o serviço de gerenciamento no Gerenciador do IIS.</span><span class="sxs-lookup"><span data-stu-id="d48cc-199">To add an SSL certificate, open the management service in IIS Manager.</span></span> <span data-ttu-id="d48cc-200">No Gerenciador do IIS, habilite o SSL abrindo o link **Ligações** no painel **Ação**.</span><span class="sxs-lookup"><span data-stu-id="d48cc-200">In IIS Manager, enable SSL by opening the **Bindings** link in the **Action** pane.</span></span> <span data-ttu-id="d48cc-201">A caixa de diálogo **Adicionar Ligação do Site** é exibida.</span><span class="sxs-lookup"><span data-stu-id="d48cc-201">The **Add Site Binding** dialog box appears.</span></span> <span data-ttu-id="d48cc-202">Escolha **Adicionar** e selecione HTTPS na lista suspensa **Tipo**.</span><span class="sxs-lookup"><span data-stu-id="d48cc-202">Choose **Add**, and then choose HTTPS in the **Type** dropdown list.</span></span> <span data-ttu-id="d48cc-203">Na lista **Certificado SSL** , escolha o certificado SSL que foi assinado por uma AC e que você carregou no [portal clássico do Azure](http://go.microsoft.com/fwlink/?LinkID=213885).</span><span class="sxs-lookup"><span data-stu-id="d48cc-203">In the **SSL certificate** list, choose the SSL certificate that you had signed by a CA and that you uploaded to the [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885).</span></span> <span data-ttu-id="d48cc-204">Para obter mais informações, consulte [Definir configurações de conexão para o serviço de gerenciamento](http://go.microsoft.com/fwlink/?LinkId=215824).</span><span class="sxs-lookup"><span data-stu-id="d48cc-204">For more information, see [Configure Connection Settings for the Management Service](http://go.microsoft.com/fwlink/?LinkId=215824).</span></span>
      
      > [!NOTE]
      > <span data-ttu-id="d48cc-205">Se você adicionar um certificado SSL confiável, o triângulo amarelo de aviso não será mais exibido no **Assistente de Publicação**.</span><span class="sxs-lookup"><span data-stu-id="d48cc-205">If you add a trusted SSL certificate, the yellow warning triangle no longer appears in the **Publish Wizard**.</span></span>
      > 
      > 

## <a name="include-files-in-the-service-package"></a><span data-ttu-id="d48cc-206">Incluir arquivos no pacote de serviço</span><span class="sxs-lookup"><span data-stu-id="d48cc-206">Include Files in the Service Package</span></span>
<span data-ttu-id="d48cc-207">Talvez seja necessário incluir arquivos específicos em seu pacote de serviço para que eles estejam disponíveis na máquina virtual que é criada para uma função.</span><span class="sxs-lookup"><span data-stu-id="d48cc-207">You might need to include specific files in your service package so that they are available on the virtual machine that is created for a role.</span></span> <span data-ttu-id="d48cc-208">Por exemplo, você talvez queira adicionar um arquivo .exe ou .msi que é usado por um script de inicialização para o pacote de serviço.</span><span class="sxs-lookup"><span data-stu-id="d48cc-208">For example, you might want to add an .exe or an .msi file that is used by a startup script to your service package.</span></span> <span data-ttu-id="d48cc-209">Ou talvez seja necessário adicionar um assembly que uma função Web ou um projeto de função de trabalho requer.</span><span class="sxs-lookup"><span data-stu-id="d48cc-209">Or you might need to add an assembly that a web role or worker role project requires.</span></span> <span data-ttu-id="d48cc-210">Para incluir arquivos, eles devem ser adicionados à solução para seu aplicativo do Azure.</span><span class="sxs-lookup"><span data-stu-id="d48cc-210">To include files they must be added to the solution for your Azure application.</span></span>

### <a name="to-include-files-in-the-service-package"></a><span data-ttu-id="d48cc-211">Para incluir arquivos no pacote de serviço</span><span class="sxs-lookup"><span data-stu-id="d48cc-211">To include files in the service package</span></span>
1. <span data-ttu-id="d48cc-212">Para adicionar um assembly a um pacote de serviço, use as seguintes etapas:</span><span class="sxs-lookup"><span data-stu-id="d48cc-212">To add an assembly to a service package, use the following steps:</span></span>
   
   1. <span data-ttu-id="d48cc-213">No **Gerenciador de Soluções** , abra o nó do projeto que está sem o assembly referenciado.</span><span class="sxs-lookup"><span data-stu-id="d48cc-213">In **Solution Explorer** open the project node for the project that is missing the referenced assembly.</span></span>
   2. <span data-ttu-id="d48cc-214">Para adicionar o assembly ao projeto, abra o menu de atalho da pasta **Referências** e escolha **Adicionar Referência**.</span><span class="sxs-lookup"><span data-stu-id="d48cc-214">To add the assembly to the project, open the shortcut menu for the **References** folder and then choose **Add Reference**.</span></span> <span data-ttu-id="d48cc-215">A caixa de diálogo Adicionar Referência é exibida.</span><span class="sxs-lookup"><span data-stu-id="d48cc-215">The Add Reference dialog appears.</span></span>
   3. <span data-ttu-id="d48cc-216">Escolha a referência que você deseja adicionar e, em seguida, escolha o botão **OK** .</span><span class="sxs-lookup"><span data-stu-id="d48cc-216">Choose the reference that you want to add and then choose the **OK** button.</span></span>
      
      <span data-ttu-id="d48cc-217">A referência é adicionada à lista na pasta **Referências** .</span><span class="sxs-lookup"><span data-stu-id="d48cc-217">The reference is added to the list under the **References** folder.</span></span>
   4. <span data-ttu-id="d48cc-218">Abra o menu de atalho do assembly que você adicionou e escolha **Propriedades**.</span><span class="sxs-lookup"><span data-stu-id="d48cc-218">Open the shortcut menu for the assembly that you added and choose **Properties**.</span></span> <span data-ttu-id="d48cc-219">A janela **Propriedades** é exibida.</span><span class="sxs-lookup"><span data-stu-id="d48cc-219">The **Properties** window appears.</span></span>
      
      <span data-ttu-id="d48cc-220">Para incluir esse assembly no pacote de serviço, na lista **Local da Cópia**, escolha **Verdadeiro**.</span><span class="sxs-lookup"><span data-stu-id="d48cc-220">To include this assembly in the service package, in the **Copy Local list** choose **True**.</span></span>
2. <span data-ttu-id="d48cc-221">No **Gerenciador de Soluções** , abra o nó do projeto que está sem o assembly referenciado.</span><span class="sxs-lookup"><span data-stu-id="d48cc-221">In **Solution Explorer** open the project node for the project that is missing the referenced assembly.</span></span>
3. <span data-ttu-id="d48cc-222">Para adicionar o assembly ao projeto, abra o menu de atalho da pasta **Referências** e escolha **Adicionar Referência**.</span><span class="sxs-lookup"><span data-stu-id="d48cc-222">To add the assembly to the project, open the shortcut menu for the **References** folder and then choose **Add Reference**.</span></span> <span data-ttu-id="d48cc-223">A caixa de diálogo **Adicionar Referência** é exibida.</span><span class="sxs-lookup"><span data-stu-id="d48cc-223">The **Add Reference** dialog appears.</span></span>
4. <span data-ttu-id="d48cc-224">Escolha a referência que você deseja adicionar e, em seguida, escolha o botão **OK** .</span><span class="sxs-lookup"><span data-stu-id="d48cc-224">Choose the reference that you want to add and then choose the **OK** button.</span></span>
   
    <span data-ttu-id="d48cc-225">A referência é adicionada à lista na pasta **Referências** .</span><span class="sxs-lookup"><span data-stu-id="d48cc-225">The reference is added to the list under the **References** folder.</span></span>
5. <span data-ttu-id="d48cc-226">Abra o menu de atalho do assembly que você adicionou e escolha **Propriedades**.</span><span class="sxs-lookup"><span data-stu-id="d48cc-226">Open the shortcut menu for the assembly that you added and choose **Properties**.</span></span> <span data-ttu-id="d48cc-227">A janela Propriedades é exibida.</span><span class="sxs-lookup"><span data-stu-id="d48cc-227">The Properties window appears.</span></span>
6. <span data-ttu-id="d48cc-228">Para incluir esse assembly no pacote de serviço, na lista **Local da Cópia**, escolha **Verdadeiro**.</span><span class="sxs-lookup"><span data-stu-id="d48cc-228">To include this assembly in the service package, in the **Copy Local** list, choose **True**.</span></span>
7. <span data-ttu-id="d48cc-229">Para incluir arquivos no pacote de serviço que foram adicionados ao projeto de função Web, abra o menu de atalho do arquivo e escolha **Propriedades**.</span><span class="sxs-lookup"><span data-stu-id="d48cc-229">To include files in the service package that have been added to your web role project, open the shortcut menu for the file, and then choose **Properties**.</span></span> <span data-ttu-id="d48cc-230">Na janela **Propriedades**, escolha **Conteúdo** na caixa de listagem **Criar Ação**.</span><span class="sxs-lookup"><span data-stu-id="d48cc-230">From the **Properties** window, choose **Content** from the **Build Action** list box.</span></span>
8. <span data-ttu-id="d48cc-231">Para incluir arquivos no pacote de serviço que foram adicionados ao projeto de função de trabalho, abra o menu de atalho do arquivo e escolha **Propriedades**.</span><span class="sxs-lookup"><span data-stu-id="d48cc-231">To include files in the service package that have been added to your worker role project, open the shortcut menu for the file, and then choose **Properties**.</span></span> <span data-ttu-id="d48cc-232">Na janela **Propriedades**, escolha **Copiar se for mais recente** na caixa de listagem **Copiar para diretório de saída**.</span><span class="sxs-lookup"><span data-stu-id="d48cc-232">From the **Properties** window, choose **Copy if newer** from the **Copy to output directory** list box.</span></span>

## <a name="next-steps"></a><span data-ttu-id="d48cc-233">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="d48cc-233">Next steps</span></span>
<span data-ttu-id="d48cc-234">Para saber mais sobre a publicação do Azure por meio do Visual Studio, consulte o [Assistente de Publicação de Aplicativo do Azure](vs-azure-tools-publish-azure-application-wizard.md).</span><span class="sxs-lookup"><span data-stu-id="d48cc-234">To learn more about publishing to Azure from Visual Studio, see [Publish Azure Application Wizard](vs-azure-tools-publish-azure-application-wizard.md).</span></span>

