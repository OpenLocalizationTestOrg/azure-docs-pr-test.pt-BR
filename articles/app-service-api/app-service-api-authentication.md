---
title: "aaaAuthentication e autorização para aplicativos de API no serviço de aplicativo do Azure | Microsoft Docs"
description: "Saiba mais sobre os serviços de autenticação e autorização de saudação que fornece o serviço de aplicativo do Azure para aplicativos de API."
services: app-service\api
documentationcenter: .net
author: alexkarcher-msft
manager: erikre
editor: 
ms.assetid: d620b53a-5a6f-41c9-84c7-f7ef5ff02ae7
ms.service: app-service-api
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/23/2016
ms.author: alkarche
ms.openlocfilehash: 6d26754b8b606ec232a74768787922ea80577c95
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="authentication-and-authorization-for-api-apps-in-azure-app-service"></a><span data-ttu-id="bca0a-103">Autenticação e autorização para aplicativos de API no Serviço de Aplicativo do Azure</span><span class="sxs-lookup"><span data-stu-id="bca0a-103">Authentication and authorization for API Apps in Azure App Service</span></span>
## <a name="overview"></a><span data-ttu-id="bca0a-104">Visão geral</span><span class="sxs-lookup"><span data-stu-id="bca0a-104">Overview</span></span>
> [!NOTE]
> <span data-ttu-id="bca0a-105">Este tópico será migrado tooa consolidado [autenticação do serviço de aplicativo / autorização](../app-service/app-service-authentication-overview.md) tópico, que abrange a Web, móveis e aplicativos de API.</span><span class="sxs-lookup"><span data-stu-id="bca0a-105">This topic will be migrated tooa consolidated [App Service Authentication / Authorization](../app-service/app-service-authentication-overview.md) topic, which covers Web, Mobile, and API Apps.</span></span>
> 
> 

<span data-ttu-id="bca0a-106">O Serviço de Aplicativo do Azure oferece serviços de autenticação e autorização internos que implementam o [OAuth 2.0](#oauth) e o [OpenID Connect](#oauth).</span><span class="sxs-lookup"><span data-stu-id="bca0a-106">Azure App Service offers built-in authentication and authorization services that implement [OAuth 2.0](#oauth) and [OpenID Connect](#oauth).</span></span> <span data-ttu-id="bca0a-107">Este artigo descreve os serviços de saudação e opções que estão disponíveis para aplicativos de API no serviço de aplicativo do Azure.</span><span class="sxs-lookup"><span data-stu-id="bca0a-107">This article describes hello services and options that are available for API Apps in Azure App Service.</span></span>

<span data-ttu-id="bca0a-108">Olá diagrama a seguir ilustra algumas características principais de autenticação do serviço de aplicativo:</span><span class="sxs-lookup"><span data-stu-id="bca0a-108">hello following diagram illustrates some key characteristics of App Service authentication:</span></span>

* <span data-ttu-id="bca0a-109">Ele processa previamente as solicitações de API de entrada, o que significa que ele funciona com qualquer linguagem ou estrutura com suporte do Serviço de Aplicativo.</span><span class="sxs-lookup"><span data-stu-id="bca0a-109">It preprocesses incoming API requests, which means it works with any language or framework supported by App Service.</span></span>
* <span data-ttu-id="bca0a-110">Ele fornece várias opções para quanto a autenticação de trabalho você deseja toodo em seu próprio código.</span><span class="sxs-lookup"><span data-stu-id="bca0a-110">It gives you several options for how much authentication work you want toodo in your own code.</span></span>
* <span data-ttu-id="bca0a-111">Ele funciona para a autenticação de usuário final e de conta de serviço.</span><span class="sxs-lookup"><span data-stu-id="bca0a-111">It works for both end user and service account authentication.</span></span> 
* <span data-ttu-id="bca0a-112">Ele dá suporte a cinco provedores de autenticação: Active Directory do Azure, Facebook, Google, Twitter e Conta da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="bca0a-112">It supports five identity providers: Azure Active Directory, Facebook, Google, Twitter, and Microsoft Account.</span></span>
* <span data-ttu-id="bca0a-113">Ele funciona hello mesmo para aplicativos de API, aplicativos Web e aplicativos móveis.</span><span class="sxs-lookup"><span data-stu-id="bca0a-113">It works hello same for API Apps, Web Apps, and Mobile Apps.</span></span>

![](./media/app-service-api-authentication/api-apps-overview.png)

## <a name="language-agnostic"></a><span data-ttu-id="bca0a-114">Independente de linguagem</span><span class="sxs-lookup"><span data-stu-id="bca0a-114">Language agnostic</span></span>
<span data-ttu-id="bca0a-115">Processamento de autenticação do serviço de aplicativo ocorre antes de solicitações acessar seu aplicativo de API, o que significa que os recursos de autenticação Olá funcionam para aplicativos escritos em qualquer idioma ou a estrutura da API.</span><span class="sxs-lookup"><span data-stu-id="bca0a-115">App Service authentication processing happens before requests reach your API app, which means that hello authentication features work for API apps written in any language or framework.</span></span>  <span data-ttu-id="bca0a-116">A API pode ser baseada em ASP.NET, Java, Node.js ou qualquer estrutura à qual o Serviço de Aplicativo dê suporte.</span><span class="sxs-lookup"><span data-stu-id="bca0a-116">Your API can be based on ASP.NET, Java, Node.js, or any framework that App Service supports.</span></span>

<span data-ttu-id="bca0a-117">Serviço de aplicativo passa no token web JSON hello (JWT) no cabeçalho de autorização de saudação de uma solicitação HTTP e código escrito em qualquer idioma ou a estrutura pode obter Olá informações necessárias de saudação token.</span><span class="sxs-lookup"><span data-stu-id="bca0a-117">App Service passes on hello JSON web token (JWT) in hello Authorization header of an HTTP request, and code written in any language or framework can get hello information it needs from hello token.</span></span> <span data-ttu-id="bca0a-118">Além disso, serviço de aplicativo fornece acesso mais fácil declarações toohello mais comumente usado definindo alguns cabeçalhos especiais, como a seguir hello:</span><span class="sxs-lookup"><span data-stu-id="bca0a-118">In addition, App Service gives you easier access toohello most commonly used claims by setting some special headers, such as hello following:</span></span>

* <span data-ttu-id="bca0a-119">X-MS-CLIENT-PRINCIPAL-NAME</span><span class="sxs-lookup"><span data-stu-id="bca0a-119">X-MS-CLIENT-PRINCIPAL-NAME</span></span>
* <span data-ttu-id="bca0a-120">X-MS-CLIENT-PRINCIPAL-ID</span><span class="sxs-lookup"><span data-stu-id="bca0a-120">X-MS-CLIENT-PRINCIPAL-ID</span></span>
* <span data-ttu-id="bca0a-121">X-MS-TOKEN-FACEBOOK-ACCESS-TOKEN</span><span class="sxs-lookup"><span data-stu-id="bca0a-121">X-MS-TOKEN-FACEBOOK-ACCESS-TOKEN</span></span>
* <span data-ttu-id="bca0a-122">X-MS-TOKEN-FACEBOOK-EXPIRES-ON</span><span class="sxs-lookup"><span data-stu-id="bca0a-122">X-MS-TOKEN-FACEBOOK-EXPIRES-ON</span></span>

<span data-ttu-id="bca0a-123">Em uma API .NET, você pode usar o hello `Authorize` atributo e para autorização refinada que você pode facilmente escrever o código com base em declarações porque as informações de declarações são preenchidas nas classes do .NET.</span><span class="sxs-lookup"><span data-stu-id="bca0a-123">In a .NET API, you can use hello `Authorize` attribute, and for fine-grained authorization you can easily write code based on claims because claims information is populated for you in .NET classes.</span></span>

## <a name="multiple-protection-options"></a><span data-ttu-id="bca0a-124">Várias opções de proteção</span><span class="sxs-lookup"><span data-stu-id="bca0a-124">Multiple protection options</span></span>
<span data-ttu-id="bca0a-125">O Serviço de Aplicativo pode impedir que as solicitações HTTP anônimas atinjam seu aplicativo de API, ele pode passar todas as solicitações e validar os tokens para solicitações que os incluem ou pode deixar passar todas as solicitações sem realizar qualquer ação sobre elas:</span><span class="sxs-lookup"><span data-stu-id="bca0a-125">App Service can prevent anonymous HTTP requests from reaching your API app, it can pass on all requests and validate tokens for requests that include them, or it can let through all requests without taking any action on them:</span></span>

1. <span data-ttu-id="bca0a-126">Permitir que somente solicitações autenticadas tooreach seu aplicativo de API.</span><span class="sxs-lookup"><span data-stu-id="bca0a-126">Allow only authenticated requests tooreach your API app.</span></span>
   
    <span data-ttu-id="bca0a-127">Se uma solicitação anônima é recebida de um navegador, do serviço de aplicativo redirecionará tooa a página de logon para o provedor de autenticação hello (Twitter do Azure AD, Google, etc.) que você escolher.</span><span class="sxs-lookup"><span data-stu-id="bca0a-127">If an anonymous request is received from a browser, App Service will redirect tooa logon page for hello authentication provider (Azure AD, Google, Twitter, etc.) that you choose.</span></span> 
   
    <span data-ttu-id="bca0a-128">Com essa opção, você não precisa toowrite qualquer código de autenticação em todos os em seu aplicativo, e o código de autorização é simplificado porque a declarações de hello mais importantes são fornecidas nos cabeçalhos HTTP da saudação.</span><span class="sxs-lookup"><span data-stu-id="bca0a-128">With this option, you don't need toowrite any authentication code at all in your app, and authorization code is simplified because hello most important claims are provided in hello HTTP headers.</span></span>
2. <span data-ttu-id="bca0a-129">Permitir tooreach de todas as solicitações de seu aplicativo de API, mas validar solicitações autenticadas e passa informações de autenticação nos cabeçalhos de saudação HTTP.</span><span class="sxs-lookup"><span data-stu-id="bca0a-129">Allow all requests tooreach your API app, but validate authenticated requests and pass along authentication information in hello HTTP headers.</span></span>
   
    <span data-ttu-id="bca0a-130">Essa opção oferece mais flexibilidade no tratamento de solicitações anônimas, mas você tiver código toowrite se desejar que os usuários anônimos tooprevent usando sua API.</span><span class="sxs-lookup"><span data-stu-id="bca0a-130">This option gives you more flexibility in handling anonymous requests, but you have toowrite code if you want tooprevent anonymous users from using your API.</span></span> <span data-ttu-id="bca0a-131">Como declarações mais populares do hello são passadas em cabeçalhos de saudação de solicitações HTTP, o código de autorização é relativamente simple.</span><span class="sxs-lookup"><span data-stu-id="bca0a-131">Since hello most popular claims are passed in hello headers of HTTP requests, authorization code is relatively simple.</span></span>
3. <span data-ttu-id="bca0a-132">Permitir tooreach de todas as solicitações sua API, executar nenhuma ação nas informações de autenticação em solicitações de saudação.</span><span class="sxs-lookup"><span data-stu-id="bca0a-132">Allow all requests tooreach your API, take no action on authentication information in hello requests.</span></span>
   
    <span data-ttu-id="bca0a-133">Essa opção deixa as tarefas de saudação de autenticação e autorização totalmente o código do aplicativo de tooyour.</span><span class="sxs-lookup"><span data-stu-id="bca0a-133">This option leaves hello tasks of authentication and authorization entirely up tooyour application code.</span></span>

<span data-ttu-id="bca0a-134">Em Olá [portal do Azure](https://portal.azure.com/), selecionar opção de saudação desejada no hello **autenticação / autorização** folha.</span><span class="sxs-lookup"><span data-stu-id="bca0a-134">In hello [Azure portal](https://portal.azure.com/), you select hello option you want on hello **Authentication / Authorization** blade.</span></span>

![](./media/app-service-api-authentication/authblade.png)

<span data-ttu-id="bca0a-135">Para opções 1 e 2, ativar **autenticação do serviço de aplicativo**e em hello **tootake ação quando a solicitação não está autenticada** lista suspensa escolha **login** ou **Permitir solicitação (nenhuma ação)**.</span><span class="sxs-lookup"><span data-stu-id="bca0a-135">For options 1 and 2, turn on **App Service Authentication**, and in hello **Action tootake when request is not authenticated** drop-down list choose **Log in** or **Allow request (no action)**.</span></span>  <span data-ttu-id="bca0a-136">Se você escolher **login**, você toochoose um provedor de autenticação e configurar esse provedor.</span><span class="sxs-lookup"><span data-stu-id="bca0a-136">If you choose **Log in**, you have toochoose an authentication provider and configure that provider.</span></span>

![](./media/app-service-api-authentication/actiontotake.png)

<span data-ttu-id="bca0a-137">Para obter informações detalhadas sobre como autenticação tooconfigure, consulte [como tooconfigure seu logon de Active Directory do Azure do serviço de aplicativo aplicativo toouse](../app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="bca0a-137">For detailed information about how tooconfigure authentication, see [How tooconfigure your App Service application toouse Azure Active Directory login](../app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication.md).</span></span> <span data-ttu-id="bca0a-138">artigo de saudação se aplica a aplicativos tooAPI, bem como os aplicativos móveis e vincula tooother artigos para Olá outros provedores de autenticação.</span><span class="sxs-lookup"><span data-stu-id="bca0a-138">hello article applies tooAPI apps as well as mobile apps, and it links tooother articles for hello other authentication providers.</span></span>

## <span data-ttu-id="bca0a-139"><a id="internal"></a> Autenticação da conta de serviço</span><span class="sxs-lookup"><span data-stu-id="bca0a-139"><a id="internal"></a> Service account authentication</span></span>
<span data-ttu-id="bca0a-140">Autenticação do serviço de aplicativo funciona para cenários internos, como para a chamada de um aplicativo de tooanother API de aplicativo de API.</span><span class="sxs-lookup"><span data-stu-id="bca0a-140">App Service authentication works for internal scenarios such as for calling from one API app tooanother API app.</span></span> <span data-ttu-id="bca0a-141">Neste cenário, você pode obter um token usando credenciais para uma conta de serviço em vez de credenciais de usuário final.</span><span class="sxs-lookup"><span data-stu-id="bca0a-141">In this scenario you get a token by using credentials for a service account instead of end user credentials.</span></span> <span data-ttu-id="bca0a-142">Uma conta de serviço também pode ser chamada de *entidade de serviço* no Active Directory do Azure e a autenticação que usa essa conta também é conhecida como um cenário de serviço a serviço.</span><span class="sxs-lookup"><span data-stu-id="bca0a-142">A service account is also known as a *service principal* in Azure Active Directory, and authentication using such an account is also known as a service-to-service scenario.</span></span> 

<span data-ttu-id="bca0a-143">Para cenários de serviço para proteger a saudação chamada aplicativo de API usando o Active Directory do Azure e fornecer um token de autorização de entidade de serviço do AAD ao chamar hello API do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="bca0a-143">For service-to-service scenarios, protect hello called API app by using Azure Active Directory, and provide an AAD service principal authorization token when you call hello API app.</span></span> <span data-ttu-id="bca0a-144">Você pode obter um token, fornecendo a ID de saudação do cliente e o segredo do aplicativo AAD de saudação do cliente.</span><span class="sxs-lookup"><span data-stu-id="bca0a-144">You get a token by providing hello client ID and client secret from hello AAD application.</span></span> <span data-ttu-id="bca0a-145">Nenhum código somente no Azure especial é necessário, como true toobe usado para lidar com o token do hello Zumo de serviços móveis.</span><span class="sxs-lookup"><span data-stu-id="bca0a-145">No special Azure-only code is required, such as used toobe true for handling hello Mobile Services Zumo token.</span></span> <span data-ttu-id="bca0a-146">Um exemplo desse cenário usando aplicativos de API do ASP.NET é coberto por tutorial Olá [autenticação principal do serviço para aplicativos de API](app-service-api-dotnet-service-principal-auth.md).</span><span class="sxs-lookup"><span data-stu-id="bca0a-146">An example of this scenario using ASP.NET API apps is covered by hello tutorial [Service principal authentication for API Apps](app-service-api-dotnet-service-principal-auth.md).</span></span>

<span data-ttu-id="bca0a-147">Se você quiser toohandle um cenário de serviços sem usar autenticação do serviço de aplicativo, você pode usar certificados de cliente ou a autenticação básica.</span><span class="sxs-lookup"><span data-stu-id="bca0a-147">If you want toohandle a service-to-service scenario without using App Service authentication, you can use client certificates or basic authentication.</span></span> <span data-ttu-id="bca0a-148">Para obter informações sobre certificados de cliente no Azure, consulte [como tooConfigure autenticação mútua do TLS para aplicativos Web](../app-service-web/app-service-web-configure-tls-mutual-auth.md).</span><span class="sxs-lookup"><span data-stu-id="bca0a-148">For information about client certificates in Azure, see [How tooConfigure TLS Mutual Authentication for Web Apps](../app-service-web/app-service-web-configure-tls-mutual-auth.md).</span></span> <span data-ttu-id="bca0a-149">Para saber mais sobre a autenticação básica no ASP.NET, confira [Filtros de autenticação na API Web 2 ASP.NET](http://www.asp.net/web-api/overview/security/authentication-filters).</span><span class="sxs-lookup"><span data-stu-id="bca0a-149">For information about basic authentication in ASP.NET, see [Authentication Filters in ASP.NET Web API 2](http://www.asp.net/web-api/overview/security/authentication-filters).</span></span>

<span data-ttu-id="bca0a-150">Autenticação de conta de serviço de um aplicativo do serviço de aplicativo lógica aplicativo tooan API é um caso especial que é explicado em [usando sua API personalizada hospedado no serviço de aplicativo com aplicativos lógicos](../logic-apps/logic-apps-custom-hosted-api.md).</span><span class="sxs-lookup"><span data-stu-id="bca0a-150">Service account authentication from an App Service logic app tooan API app is a special case that is explained in [Using your custom API hosted on App Service with Logic apps](../logic-apps/logic-apps-custom-hosted-api.md).</span></span>

## <a name="mobile-client-authentication"></a><span data-ttu-id="bca0a-151">Autenticação de cliente móvel</span><span class="sxs-lookup"><span data-stu-id="bca0a-151">Mobile client authentication</span></span>
<span data-ttu-id="bca0a-152">Para obter informações sobre como toohandle autenticação de clientes móveis, consulte Olá [documentação sobre autenticação para aplicativos móveis](../app-service-mobile/app-service-mobile-ios-get-started-users.md).</span><span class="sxs-lookup"><span data-stu-id="bca0a-152">For information about how toohandle authentication from mobile clients, see hello [documentation on authentication for mobile apps](../app-service-mobile/app-service-mobile-ios-get-started-users.md).</span></span> <span data-ttu-id="bca0a-153">A autenticação do serviço de aplicativo funciona Olá mesma forma para aplicativos móveis e aplicativos de API.</span><span class="sxs-lookup"><span data-stu-id="bca0a-153">App Service authentication works hello same way for mobile apps and API apps.</span></span>

## <a name="more-information"></a><span data-ttu-id="bca0a-154">Mais informações</span><span class="sxs-lookup"><span data-stu-id="bca0a-154">More information</span></span>
<span data-ttu-id="bca0a-155">Para obter mais informações sobre autenticação e autorização no serviço de aplicativo do Azure, consulte Olá recursos a seguir:</span><span class="sxs-lookup"><span data-stu-id="bca0a-155">For more information about authentication and authorization in Azure App Service, see hello following resources:</span></span>

* [<span data-ttu-id="bca0a-156">Como expandir a autenticação/autorização do Serviço de Aplicativo</span><span class="sxs-lookup"><span data-stu-id="bca0a-156">Expanding App Service authentication / authorization</span></span>](https://azure.microsoft.com/blog/announcing-app-service-authentication-authorization/)
* <span data-ttu-id="bca0a-157">[Como tooconfigure seu logon de Active Directory do Azure do serviço de aplicativo aplicativo toouse](../app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication.md) (inclui links para outros provedores de autenticação na parte superior de saudação da página de saudação).</span><span class="sxs-lookup"><span data-stu-id="bca0a-157">[How tooconfigure your App Service application toouse Azure Active Directory login](../app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication.md) (Includes links for other authentication providers at hello top of hello page.)</span></span> 

<span data-ttu-id="bca0a-158">Para obter mais informações sobre o OAuth 2.0, OpenID Connect e JSON Web Tokens (JWT), consulte Olá recursos a seguir.</span><span class="sxs-lookup"><span data-stu-id="bca0a-158">For more information about OAuth 2.0, OpenID Connect, and JSON Web Tokens (JWT), see hello following resources.</span></span>

* [<span data-ttu-id="bca0a-159">Introdução ao OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="bca0a-159">Getting started with OAuth 2.0</span></span>](http://shop.oreilly.com/product/0636920021810.do "Getting Started with OAuth 2.0") 
* [<span data-ttu-id="bca0a-160">Introdução tooOAuth2, OpenID Connect e JSON Web Tokens (JWT) - curso Applied</span><span class="sxs-lookup"><span data-stu-id="bca0a-160">Introduction tooOAuth2, OpenID Connect and JSON Web Tokens (JWT) - Pluralsight Course</span></span>](http://www.pluralsight.com/courses/oauth2-json-web-tokens-openid-connect-introduction) 
* [<span data-ttu-id="bca0a-161">Curso Criação e proteção de uma API RESTful para vários clientes no ASP.NET - Pluralsight</span><span class="sxs-lookup"><span data-stu-id="bca0a-161">Building and Securing a RESTful API for Multiple Clients in ASP.NET - Pluralsight course</span></span>](http://www.pluralsight.com/courses/building-securing-restful-api-aspdotnet)

<span data-ttu-id="bca0a-162">Para obter mais informações sobre o Active Directory do Azure, consulte Olá recursos a seguir.</span><span class="sxs-lookup"><span data-stu-id="bca0a-162">For more information about Azure Active Directory, see hello following resources.</span></span>

* [<span data-ttu-id="bca0a-163">Cenários do AD do Azure</span><span class="sxs-lookup"><span data-stu-id="bca0a-163">Azure AD scenarios</span></span>](http://aka.ms/aadscenarios)
* [<span data-ttu-id="bca0a-164">Guia dos desenvolvedores do AD do Azure</span><span class="sxs-lookup"><span data-stu-id="bca0a-164">Azure AD developers' guide</span></span>](http://aka.ms/aaddev)
* [<span data-ttu-id="bca0a-165">Exemplos do AD do Azure</span><span class="sxs-lookup"><span data-stu-id="bca0a-165">Azure AD samples</span></span>](http://aka.ms/aadsamples)

## <a name="next-steps"></a><span data-ttu-id="bca0a-166">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="bca0a-166">Next steps</span></span>
<span data-ttu-id="bca0a-167">Este artigo explicou os recursos de autenticação e de autorização do Serviço de Aplicativo que você pode usar para aplicativos de API.</span><span class="sxs-lookup"><span data-stu-id="bca0a-167">This article has explained authentication and authorization features of App Service that you can use for API apps.</span></span> <span data-ttu-id="bca0a-168">tutorial de Avançar Olá Olá fique iniciado série mostra como tooimplement [autenticação de usuário em aplicativos de API do serviço de aplicativo](app-service-api-dotnet-user-principal-auth.md).</span><span class="sxs-lookup"><span data-stu-id="bca0a-168">hello next tutorial in hello getting started series shows how tooimplement [user authentication in App Service API Apps](app-service-api-dotnet-user-principal-auth.md).</span></span>

