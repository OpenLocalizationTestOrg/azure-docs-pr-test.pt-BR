---
title: "Migrar redes virtuais da rota expressa associada de tooResource clássico Manager: Azure: PowerShell | Microsoft Docs"
description: "Esta página descreve como o toomigrate associado a redes virtuais tooResource Manager depois de mover seu circuito."
documentationcenter: na
services: expressroute
author: ganesr
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 
ms.service: expressroute
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/06/2017
ms.author: ganesr;cherylmc
ms.openlocfilehash: e64506c6909296f98c5dd23b1437bc0b81f31c75
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="migrate-expressroute-associated-virtual-networks-from-classic-tooresource-manager"></a><span data-ttu-id="be21e-103">Migrar redes virtuais da rota expressa associada de clássico tooResource Manager</span><span class="sxs-lookup"><span data-stu-id="be21e-103">Migrate ExpressRoute associated virtual networks from classic tooResource Manager</span></span>

<span data-ttu-id="be21e-104">Este artigo explica como o toomigrate rota expressa do Azure associado a redes virtuais do modelo de implantação do hello implantação clássica modelo toohello do Azure Resource Manager depois de mover o circuito de rota expressa.</span><span class="sxs-lookup"><span data-stu-id="be21e-104">This article explains how toomigrate Azure ExpressRoute associated virtual networks from hello classic deployment model toohello Azure Resource Manager deployment model after moving your ExpressRoute circuit.</span></span> 


## <a name="before-you-begin"></a><span data-ttu-id="be21e-105">Antes de começar</span><span class="sxs-lookup"><span data-stu-id="be21e-105">Before you begin</span></span>
* <span data-ttu-id="be21e-106">Verifique se você tem a versão mais recente Olá dos módulos do PowerShell do Azure hello.</span><span class="sxs-lookup"><span data-stu-id="be21e-106">Verify that you have hello latest version of hello Azure PowerShell modules.</span></span> <span data-ttu-id="be21e-107">Para obter mais informações, consulte [como tooinstall e configurar o Azure PowerShell](/powershell/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="be21e-107">For more information, see [How tooinstall and configure Azure PowerShell](/powershell/azure/overview).</span></span>
* <span data-ttu-id="be21e-108">Certifique-se de ter revisado Olá [pré-requisitos](expressroute-prerequisites.md), [requisitos de roteamento](expressroute-routing.md), e [fluxos de trabalho](expressroute-workflows.md) antes de começar a configuração.</span><span class="sxs-lookup"><span data-stu-id="be21e-108">Make sure that you have reviewed hello [prerequisites](expressroute-prerequisites.md), [routing requirements](expressroute-routing.md), and [workflows](expressroute-workflows.md) before you begin configuration.</span></span>
* <span data-ttu-id="be21e-109">Revise as informações de saudação que são fornecidas em [movendo um circuito de rota expressa de tooResource clássico Manager](expressroute-move.md).</span><span class="sxs-lookup"><span data-stu-id="be21e-109">Review hello information that is provided under [Moving an ExpressRoute circuit from classic tooResource Manager](expressroute-move.md).</span></span> <span data-ttu-id="be21e-110">Certifique-se de que você compreenda plenamente Olá limites e as limitações.</span><span class="sxs-lookup"><span data-stu-id="be21e-110">Make sure that you fully understand hello limits and limitations.</span></span>
* <span data-ttu-id="be21e-111">Verifique se o circuito de saudação é totalmente operacional no modelo de implantação clássico hello.</span><span class="sxs-lookup"><span data-stu-id="be21e-111">Verify that hello circuit is fully operational in hello classic deployment model.</span></span>
* <span data-ttu-id="be21e-112">Certifique-se de que você tenha um grupo de recursos que foi criado no modelo de implantação do Gerenciador de recursos de saudação.</span><span class="sxs-lookup"><span data-stu-id="be21e-112">Ensure that you have a resource group that was created in hello Resource Manager deployment model.</span></span>
* <span data-ttu-id="be21e-113">Saudação de revisão documentação de migração do recurso a seguir:</span><span class="sxs-lookup"><span data-stu-id="be21e-113">Review hello following resource-migration documentation:</span></span>

    * [<span data-ttu-id="be21e-114">Suporte de plataforma de migração de recursos de IaaS de tooAzure clássico Gerenciador de recursos</span><span class="sxs-lookup"><span data-stu-id="be21e-114">Platform-supported migration of IaaS resources from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager.md)
    * [<span data-ttu-id="be21e-115">Técnico mergulho profundo na plataforma suportada migração de clássico tooAzure Gerenciador de recursos</span><span class="sxs-lookup"><span data-stu-id="be21e-115">Technical deep dive on platform-supported migration from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager-deep-dive.md)
    * [<span data-ttu-id="be21e-116">Perguntas frequentes: Plataforma suportada migração de recursos de IaaS de tooAzure clássico Gerenciador de recursos</span><span class="sxs-lookup"><span data-stu-id="be21e-116">FAQs: Platform-supported migration of IaaS resources from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager.md)
    * [<span data-ttu-id="be21e-117">Confira os erros mais comuns de migração e as mitigações</span><span class="sxs-lookup"><span data-stu-id="be21e-117">Review most common migration errors and mitigations</span></span>](../virtual-machines/windows/migration-classic-resource-manager-errors.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)

## <a name="supported-and-unsupported-scenarios"></a><span data-ttu-id="be21e-118">Cenários com e sem suporte</span><span class="sxs-lookup"><span data-stu-id="be21e-118">Supported and unsupported scenarios</span></span>

* <span data-ttu-id="be21e-119">Um circuito de rota expressa pode ser movido do ambiente de Gerenciador de recursos de toohello clássico Olá sem nenhum tempo de inatividade.</span><span class="sxs-lookup"><span data-stu-id="be21e-119">An ExpressRoute circuit can be moved from hello classic toohello Resource Manager environment without any downtime.</span></span> <span data-ttu-id="be21e-120">Você pode mover qualquer circuito de rota expressa de saudação clássico toohello ambiente do Gerenciador de recursos sem tempo de inatividade.</span><span class="sxs-lookup"><span data-stu-id="be21e-120">You can move any ExpressRoute circuit from hello classic toohello Resource Manager environment with no downtime.</span></span> <span data-ttu-id="be21e-121">Siga as instruções de saudação em [movendo circuitos ExpressRoute de modelo de implantação do hello clássico toohello Gerenciador de recursos usando o PowerShell](expressroute-howto-move-arm.md).</span><span class="sxs-lookup"><span data-stu-id="be21e-121">Follow hello instructions in [moving ExpressRoute circuits from hello classic toohello Resource Manager deployment model using PowerShell](expressroute-howto-move-arm.md).</span></span> <span data-ttu-id="be21e-122">Isso é uma rede virtual do pré-requisito toomove recursos toohello conectado.</span><span class="sxs-lookup"><span data-stu-id="be21e-122">This is a prerequisite toomove resources connected toohello virtual network.</span></span>
* <span data-ttu-id="be21e-123">Implantações associadas na rede virtual Olá que estão anexado tooan circuito de rota expressa em Olá pode ser a mesma assinatura, gateways e redes virtuais migradas ambiente do Gerenciador de recursos de toohello sem qualquer tempo de inatividade.</span><span class="sxs-lookup"><span data-stu-id="be21e-123">Virtual networks, gateways, and associated deployments within hello virtual network that are attached tooan ExpressRoute circuit in hello same subscription can be migrated toohello Resource Manager environment without any downtime.</span></span> <span data-ttu-id="be21e-124">Você pode seguir Olá etapas descritas posteriormente toomigrate recursos como máquinas virtuais implantadas na rede virtual hello, gateways e redes virtuais.</span><span class="sxs-lookup"><span data-stu-id="be21e-124">You can follow hello steps described later toomigrate resources such as virtual networks, gateways, and virtual machines deployed within hello virtual network.</span></span> <span data-ttu-id="be21e-125">Certifique-se de que as redes virtuais Olá estão configuradas corretamente antes que eles são migrados.</span><span class="sxs-lookup"><span data-stu-id="be21e-125">You must ensure that hello virtual networks are configured correctly before they are migrated.</span></span> 
* <span data-ttu-id="be21e-126">Redes virtuais, gateways e implantações associadas na rede virtual de saudação que não estão em Olá mesma assinatura como Olá circuito de rota expressa exigir algumas migração de saudação do toocomplete de tempo de inatividade.</span><span class="sxs-lookup"><span data-stu-id="be21e-126">Virtual networks, gateways, and associated deployments within hello virtual network that are not in hello same subscription as hello ExpressRoute circuit require some downtime toocomplete hello migration.</span></span> <span data-ttu-id="be21e-127">a última seção saudação do documento hello descreve Olá etapas toobe seguido toomigrate recursos.</span><span class="sxs-lookup"><span data-stu-id="be21e-127">hello last section of hello document describes hello steps toobe followed toomigrate resources.</span></span>
* <span data-ttu-id="be21e-128">Uma rede virtual com o Gateway de ExpressRoute e Gateway VPN não pode ser migrada.</span><span class="sxs-lookup"><span data-stu-id="be21e-128">A virtual network with both ExpressRoute Gateway and VPN Gateway can't be migrated.</span></span>

## <a name="move-an-expressroute-circuit-from-classic-tooresource-manager"></a><span data-ttu-id="be21e-129">Mover um circuito de rota expressa de clássico tooResource Manager</span><span class="sxs-lookup"><span data-stu-id="be21e-129">Move an ExpressRoute circuit from classic tooResource Manager</span></span>
<span data-ttu-id="be21e-130">Você deve mover um circuito de rota expressa do hello clássico toohello ambiente do Gerenciador de recursos antes de tentar toomigrate recursos que estão anexados toohello circuito de rota expressa.</span><span class="sxs-lookup"><span data-stu-id="be21e-130">You must move an ExpressRoute circuit from hello classic toohello Resource Manager environment before you try toomigrate resources that are attached toohello ExpressRoute circuit.</span></span> <span data-ttu-id="be21e-131">tooaccomplish tarefas, consulte Olá artigos a seguir:</span><span class="sxs-lookup"><span data-stu-id="be21e-131">tooaccomplish this task, see hello following articles:</span></span>

* <span data-ttu-id="be21e-132">Revise as informações de saudação que são fornecidas em [movendo um circuito de rota expressa de tooResource clássico Manager](expressroute-move.md).</span><span class="sxs-lookup"><span data-stu-id="be21e-132">Review hello information that is provided under [Moving an ExpressRoute circuit from classic tooResource Manager](expressroute-move.md).</span></span>
* <span data-ttu-id="be21e-133">[Mover um circuito de tooResource clássico Manager usando o Azure PowerShell](expressroute-howto-move-arm.md).</span><span class="sxs-lookup"><span data-stu-id="be21e-133">[Move a circuit from classic tooResource Manager using Azure PowerShell](expressroute-howto-move-arm.md).</span></span>
* <span data-ttu-id="be21e-134">Use o portal de gerenciamento de serviços do Azure hello.</span><span class="sxs-lookup"><span data-stu-id="be21e-134">Use hello Azure Service Management portal.</span></span> <span data-ttu-id="be21e-135">Você pode seguir o fluxo de trabalho Olá muito[criar um novo circuito de rota expressa](expressroute-howto-circuit-portal-resource-manager.md) e selecione a opção de importar hello.</span><span class="sxs-lookup"><span data-stu-id="be21e-135">You can follow hello workflow too[create a new ExpressRoute circuit](expressroute-howto-circuit-portal-resource-manager.md) and select hello import option.</span></span> 

<span data-ttu-id="be21e-136">Esta operação não envolve tempo de inatividade.</span><span class="sxs-lookup"><span data-stu-id="be21e-136">This operation does not involve downtime.</span></span> <span data-ttu-id="be21e-137">Você pode continuar tootransfer dados entre suas instalações e Microsoft enquanto Olá migração está em andamento.</span><span class="sxs-lookup"><span data-stu-id="be21e-137">You can continue tootransfer data between your premises and Microsoft while hello migration is in progress.</span></span>

## <a name="migrate-virtual-networks-gateways-and-associated-deployments"></a><span data-ttu-id="be21e-138">Migrar redes virtuais, gateways e implantações associadas</span><span class="sxs-lookup"><span data-stu-id="be21e-138">Migrate virtual networks, gateways, and associated deployments</span></span>

<span data-ttu-id="be21e-139">Olá etapas que você seguir toomigrate dependem se os recursos estão em Olá mesma assinatura, assinaturas diferentes ou ambos.</span><span class="sxs-lookup"><span data-stu-id="be21e-139">hello steps you follow toomigrate depend on whether your resources are in hello same subscription, different subscriptions, or both.</span></span>

### <a name="migrate-virtual-networks-gateways-and-associated-deployments-in-hello-same-subscription-as-hello-expressroute-circuit"></a><span data-ttu-id="be21e-140">Migrar redes virtuais, gateways, e as implantações associadas no hello mesma assinatura conforme Olá circuito de rota expressa</span><span class="sxs-lookup"><span data-stu-id="be21e-140">Migrate virtual networks, gateways, and associated deployments in hello same subscription as hello ExpressRoute circuit</span></span>
<span data-ttu-id="be21e-141">Esta seção descreve Olá etapas toobe seguido toomigrate uma rede virtual, gateway e implantações associadas no hello mesma assinatura conforme Olá circuito de rota expressa.</span><span class="sxs-lookup"><span data-stu-id="be21e-141">This section describes hello steps toobe followed toomigrate a virtual network, gateway, and associated deployments in hello same subscription as hello ExpressRoute circuit.</span></span> <span data-ttu-id="be21e-142">Nenhum tempo de inatividade é associado a essa migração.</span><span class="sxs-lookup"><span data-stu-id="be21e-142">No downtime is associated with this migration.</span></span> <span data-ttu-id="be21e-143">Você pode continuar toouse todos os recursos por meio do processo de migração de saudação.</span><span class="sxs-lookup"><span data-stu-id="be21e-143">You can continue toouse all resources through hello migration process.</span></span> <span data-ttu-id="be21e-144">plano de gerenciamento de saudação é bloqueado enquanto Olá migração está em andamento.</span><span class="sxs-lookup"><span data-stu-id="be21e-144">hello management plane is locked while hello migration is in progress.</span></span> 

1. <span data-ttu-id="be21e-145">Certifique-se de que o circuito de rota expressa Olá foi movido do ambiente de Gerenciador de recursos do hello toohello clássico.</span><span class="sxs-lookup"><span data-stu-id="be21e-145">Ensure that hello ExpressRoute circuit has been moved from hello classic toohello Resource Manager environment.</span></span>
2. <span data-ttu-id="be21e-146">Certifique-se de que essa rede virtual Olá foi preparado adequadamente para a migração de saudação.</span><span class="sxs-lookup"><span data-stu-id="be21e-146">Ensure that hello virtual network has been prepared appropriately for hello migration.</span></span>
3. <span data-ttu-id="be21e-147">Registre sua assinatura para a migração de recursos.</span><span class="sxs-lookup"><span data-stu-id="be21e-147">Register your subscription for resource migration.</span></span> <span data-ttu-id="be21e-148">tooregister sua assinatura para a migração de recursos, use Olá trecho do PowerShell a seguir:</span><span class="sxs-lookup"><span data-stu-id="be21e-148">tooregister your subscription for resource migration, use hello following PowerShell snippet:</span></span>

  ```powershell 
  Select-AzureRmSubscription -SubscriptionName <Your Subscription Name>
  Register-AzureRmResourceProvider -ProviderNamespace Microsoft.ClassicInfrastructureMigrate
  Get-AzureRmResourceProvider -ProviderNamespace Microsoft.ClassicInfrastructureMigrate
  ```
4. <span data-ttu-id="be21e-149">Valide, prepare e migre.</span><span class="sxs-lookup"><span data-stu-id="be21e-149">Validate, prepare, and migrate.</span></span> <span data-ttu-id="be21e-150">toomove Olá rede virtual, e use Olá trecho do PowerShell a seguir:</span><span class="sxs-lookup"><span data-stu-id="be21e-150">toomove hello virtual network, use hello following PowerShell snippet:</span></span>

  ```powershell
  Move-AzureVirtualNetwork -Prepare $vnetName  
  Move-AzureVirtualNetwork -Commit $vnetName
  ```

  <span data-ttu-id="be21e-151">Você também pode anular migração executando Olá cmdlet do PowerShell a seguir:</span><span class="sxs-lookup"><span data-stu-id="be21e-151">You can also abort migration by running hello following PowerShell cmdlet:</span></span>

  ```powershell
  Move-AzureVirtualNetwork -Abort $vnetName
  ```

## <a name="next-steps"></a><span data-ttu-id="be21e-152">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="be21e-152">Next steps</span></span>
* [<span data-ttu-id="be21e-153">Suporte de plataforma de migração de recursos de IaaS de tooAzure clássico Gerenciador de recursos</span><span class="sxs-lookup"><span data-stu-id="be21e-153">Platform-supported migration of IaaS resources from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager.md)
* [<span data-ttu-id="be21e-154">Técnico mergulho profundo na plataforma suportada migração de clássico tooAzure Gerenciador de recursos</span><span class="sxs-lookup"><span data-stu-id="be21e-154">Technical deep dive on platform-supported migration from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager-deep-dive.md)
* [<span data-ttu-id="be21e-155">Perguntas frequentes: Plataforma suportada migração de recursos de IaaS de tooAzure clássico Gerenciador de recursos</span><span class="sxs-lookup"><span data-stu-id="be21e-155">FAQs: Platform-supported migration of IaaS resources from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager.md)
* [<span data-ttu-id="be21e-156">Confira os erros mais comuns de migração e as mitigações</span><span class="sxs-lookup"><span data-stu-id="be21e-156">Review most common migration errors and mitigations</span></span>](../virtual-machines/windows/migration-classic-resource-manager-errors.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
