---
title: "aaaAzure correlação de telemetria do Application Insights | Microsoft Docs"
description: "Correlação no Application Insights Telemetry"
services: application-insights
documentationcenter: .net
author: SergeyKanzhelev
manager: carmonm
ms.service: application-insights
ms.workload: TBD
ms.tgt_pltfrm: ibiza
ms.devlang: multiple
ms.topic: article
ms.date: 04/25/2017
ms.author: bwren
ms.openlocfilehash: 3ed8c589d237cac5daceac939ca893b7d81a2967
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="telemetry-correlation-in-application-insights"></a><span data-ttu-id="200cb-103">Correlação de telemetria no Application Insights</span><span class="sxs-lookup"><span data-stu-id="200cb-103">Telemetry correlation in Application Insights</span></span>

<span data-ttu-id="200cb-104">Olá, mundo de serviços micro, cada operação lógica requer o trabalho feito em vários componentes do serviço de saudação.</span><span class="sxs-lookup"><span data-stu-id="200cb-104">In hello world of micro services, every logical operation requires work done in various components of hello service.</span></span> <span data-ttu-id="200cb-105">Cada um desses componentes pode ser monitorado separadamente pelo [Application Insights](app-insights-overview.md).</span><span class="sxs-lookup"><span data-stu-id="200cb-105">Each of these components can be separately monitored by [Application Insights](app-insights-overview.md).</span></span> <span data-ttu-id="200cb-106">componente de aplicativo web Hello se comunica com as credenciais do usuário toovalidate de componente de provedor de autenticação e dados de tooget de componente de API de saudação para visualização.</span><span class="sxs-lookup"><span data-stu-id="200cb-106">hello web app component communicates with authentication provider component toovalidate user credentials, and with hello API component tooget data for visualization.</span></span> <span data-ttu-id="200cb-107">componente de API de saudação em sua vez pode consultar dados de outros serviços e usar componentes de provedor de cache e notificar o componente de cobrança Olá sobre esta chamada.</span><span class="sxs-lookup"><span data-stu-id="200cb-107">hello API component in its turn can query data from other services and use cache-provider components and notify hello billing component about this call.</span></span> <span data-ttu-id="200cb-108">O Application Insights dá suporte à correlação de telemetria distribuída.</span><span class="sxs-lookup"><span data-stu-id="200cb-108">Application Insights supports distributed telemetry correlation.</span></span> <span data-ttu-id="200cb-109">Ele permite que você toodetect qual componente é responsável por falhas ou degradação de desempenho.</span><span class="sxs-lookup"><span data-stu-id="200cb-109">It allows you toodetect which component is responsible for failures or performance degradation.</span></span>

<span data-ttu-id="200cb-110">Este artigo explica o modelo de dados de saudação usado pelo telemetria do Application Insights toocorrelate enviados por vários componentes.</span><span class="sxs-lookup"><span data-stu-id="200cb-110">This article explains hello data model used by Application Insights toocorrelate telemetry sent by multiple components.</span></span> <span data-ttu-id="200cb-111">Ele abrange protocolos e técnicas de propagação do contexto de saudação.</span><span class="sxs-lookup"><span data-stu-id="200cb-111">It covers hello context propagation techniques and protocols.</span></span> <span data-ttu-id="200cb-112">Ele também aborda a implementação de saudação dos conceitos de correlação Olá nas plataformas e idiomas diferentes.</span><span class="sxs-lookup"><span data-stu-id="200cb-112">It also covers hello implementation of hello correlation concepts on different languages and platforms.</span></span>

## <a name="telemetry-correlation-data-model"></a><span data-ttu-id="200cb-113">Modelo de dados de correlação de telemetria</span><span class="sxs-lookup"><span data-stu-id="200cb-113">Telemetry correlation data model</span></span>

<span data-ttu-id="200cb-114">O Application Insights define um [modelo de dados](application-insights-data-model.md) para correlação de telemetria distribuída.</span><span class="sxs-lookup"><span data-stu-id="200cb-114">Application Insights defines a [data model](application-insights-data-model.md) for distributed telemetry correlation.</span></span> <span data-ttu-id="200cb-115">Telemetria tooassociate com operação lógica hello, todos os itens de telemetria tem um campo de contexto chamado `operation_Id`.</span><span class="sxs-lookup"><span data-stu-id="200cb-115">tooassociate telemetry with hello logical operation, every telemetry item has a context field called `operation_Id`.</span></span> <span data-ttu-id="200cb-116">Esse identificador é compartilhado por todos os itens de telemetria em rastreamento Olá distribuída.</span><span class="sxs-lookup"><span data-stu-id="200cb-116">This identifier is shared by every telemetry item in hello distributed trace.</span></span> <span data-ttu-id="200cb-117">Portanto, mesmo com a perda de telemetria de uma única camada, você ainda pode associar telemetria relatada por outros componentes.</span><span class="sxs-lookup"><span data-stu-id="200cb-117">So even with loss of telemetry from a single layer you still can associate telemetry reported by other components.</span></span>

<span data-ttu-id="200cb-118">Operação lógica distribuída normalmente é constituído de um conjunto de operações menores - solicitações processadas por um dos componentes de saudação.</span><span class="sxs-lookup"><span data-stu-id="200cb-118">Distributed logical operation typically consists of a set of smaller operations - requests processed by one of hello components.</span></span> <span data-ttu-id="200cb-119">Essas operações são definidas por [telemetria de solicitação](application-insights-data-model-request-telemetry.md).</span><span class="sxs-lookup"><span data-stu-id="200cb-119">Those operations are defined by [request telemetry](application-insights-data-model-request-telemetry.md).</span></span> <span data-ttu-id="200cb-120">Toda telemetria de solicitação tem seu próprio `id` que a identifica de modo exclusivo, globalmente.</span><span class="sxs-lookup"><span data-stu-id="200cb-120">Every request telemetry has its own `id` that uniquely globally identifies it.</span></span> <span data-ttu-id="200cb-121">E toda a telemetria - rastreamentos, exceções, etc., associado a esta solicitação deve definir Olá `operation_parentId` toohello o valor da solicitação Olá `id`.</span><span class="sxs-lookup"><span data-stu-id="200cb-121">And all telemetry - traces, exceptions, etc. associated with this request should set hello `operation_parentId` toohello value of hello request `id`.</span></span>

<span data-ttu-id="200cb-122">Cada operação de saída como componente de tooanother chamada http representado por [telemetria de dependência](application-insights-data-model-dependency-telemetry.md).</span><span class="sxs-lookup"><span data-stu-id="200cb-122">Every outgoing operation like http call tooanother component represented by [dependency telemetry](application-insights-data-model-dependency-telemetry.md).</span></span> <span data-ttu-id="200cb-123">A telemetria de dependência também define sua própria `id`, que é globalmente exclusiva.</span><span class="sxs-lookup"><span data-stu-id="200cb-123">Dependency telemetry also defines its own `id` that is globally unique.</span></span> <span data-ttu-id="200cb-124">A telemetria de solicitação, iniciada por essa chamada de dependência, usa-a como `operation_parentId`.</span><span class="sxs-lookup"><span data-stu-id="200cb-124">Request telemetry, initiated by this dependency call, uses it as `operation_parentId`.</span></span>

<span data-ttu-id="200cb-125">Você pode criar modo de exibição de saudação de operação lógica distribuída usando `operation_Id`, `operation_parentId`, e `request.id` com `dependency.id`.</span><span class="sxs-lookup"><span data-stu-id="200cb-125">You can build hello view of distributed logical operation using `operation_Id`, `operation_parentId`, and `request.id` with `dependency.id`.</span></span> <span data-ttu-id="200cb-126">Esses campos também definem a ordem de causalidade de saudação das chamadas de telemetria.</span><span class="sxs-lookup"><span data-stu-id="200cb-126">Those fields also define hello causality order of telemetry calls.</span></span>

<span data-ttu-id="200cb-127">No ambiente de serviços micro rastreamentos de componentes podem ir armazenamentos diferentes toohello.</span><span class="sxs-lookup"><span data-stu-id="200cb-127">In micro services environment, traces from components may go toohello different storages.</span></span> <span data-ttu-id="200cb-128">Todo componente pode ter sua própria chave de instrumentação no Application Insights.</span><span class="sxs-lookup"><span data-stu-id="200cb-128">Every component may have its own instrumentation key in Application Insights.</span></span> <span data-ttu-id="200cb-129">tooget a telemetria para operação lógica hello, você precisa tooquery dados de cada armazenamento.</span><span class="sxs-lookup"><span data-stu-id="200cb-129">tooget telemetry for hello logical operation, you need tooquery data from every storage.</span></span> <span data-ttu-id="200cb-130">Quando o número de armazenamento for grande, você precisa toohave uma dica sobre onde toolook Avançar.</span><span class="sxs-lookup"><span data-stu-id="200cb-130">When number of storages is huge, you need toohave a hint on where toolook next.</span></span>

<span data-ttu-id="200cb-131">Application Insights modelo de dados define dois campos toosolve esse problema: `request.source` e `dependency.target`.</span><span class="sxs-lookup"><span data-stu-id="200cb-131">Application Insights data model defines two fields toosolve this problem: `request.source` and `dependency.target`.</span></span> <span data-ttu-id="200cb-132">primeiro campo de saudação identifica o componente de saudação que iniciou a solicitação de dependência hello e Olá segundo identifica qual componente retornada uma resposta de chamada de dependência Olá Olá.</span><span class="sxs-lookup"><span data-stu-id="200cb-132">hello first field identifies hello component that initiated hello dependency request, and hello second identifies which component returned hello response of hello dependency call.</span></span>


## <a name="example"></a><span data-ttu-id="200cb-133">Exemplo</span><span class="sxs-lookup"><span data-stu-id="200cb-133">Example</span></span>

<span data-ttu-id="200cb-134">Vejamos um exemplo de preços de estoque de um aplicativo mostrando Olá preço de mercado atual de uma ação usando a API externa hello, chamada de API de ações.</span><span class="sxs-lookup"><span data-stu-id="200cb-134">Let's take an example of an application STOCK PRICES showing hello current market price of a stock using hello external API called STOCKS API.</span></span> <span data-ttu-id="200cb-135">Olá aplicativo preços de estoque tem uma página `Stock page` aberto por meio do navegador da web do hello cliente `GET /Home/Stock`.</span><span class="sxs-lookup"><span data-stu-id="200cb-135">hello STOCK PRICES application has a page `Stock page` opened by hello client web browser using `GET /Home/Stock`.</span></span> <span data-ttu-id="200cb-136">consultas de aplicativo Olá Olá estoque API usando uma chamada HTTP `GET /api/stock/value`.</span><span class="sxs-lookup"><span data-stu-id="200cb-136">hello application queries hello STOCK API by using an HTTP call `GET /api/stock/value`.</span></span>

<span data-ttu-id="200cb-137">Você pode analisar telemetria resultante da execução de uma consulta:</span><span class="sxs-lookup"><span data-stu-id="200cb-137">You can analyze resulting telemetry running a query:</span></span>

```
(requests | union dependencies | union pageViews) 
| where operation_Id == "STYz"
| project timestamp, itemType, name, id, operation_ParentId, operation_Id
```

<span data-ttu-id="200cb-138">Na nota da exibição resultados Olá todos os itens de telemetria compartilham raiz Olá `operation_Id`.</span><span class="sxs-lookup"><span data-stu-id="200cb-138">In hello result view note that all telemetry items share hello root `operation_Id`.</span></span> <span data-ttu-id="200cb-139">Quando chama ajax feitas na página Olá - nova id exclusiva de `qJSXU` é atribuído toohello telemetria de dependência e id da página é usada como `operation_ParentId`.</span><span class="sxs-lookup"><span data-stu-id="200cb-139">When ajax call made from hello page - new unique id `qJSXU` is assigned toohello dependency telemetry and pageView's id is used as `operation_ParentId`.</span></span> <span data-ttu-id="200cb-140">A solicitação do servidor, por sua vez, usa a ID do AJAX como `operation_ParentId`, etc.</span><span class="sxs-lookup"><span data-stu-id="200cb-140">In turn server request uses ajax's id as `operation_ParentId`, etc.</span></span>

| <span data-ttu-id="200cb-141">itemType</span><span class="sxs-lookup"><span data-stu-id="200cb-141">itemType</span></span>   | <span data-ttu-id="200cb-142">name</span><span class="sxs-lookup"><span data-stu-id="200cb-142">name</span></span>                      | <span data-ttu-id="200cb-143">ID</span><span class="sxs-lookup"><span data-stu-id="200cb-143">id</span></span>           | <span data-ttu-id="200cb-144">operation_ParentId</span><span class="sxs-lookup"><span data-stu-id="200cb-144">operation_ParentId</span></span> | <span data-ttu-id="200cb-145">operation_Id</span><span class="sxs-lookup"><span data-stu-id="200cb-145">operation_Id</span></span> |
|------------|---------------------------|--------------|--------------------|--------------|
| <span data-ttu-id="200cb-146">pageView</span><span class="sxs-lookup"><span data-stu-id="200cb-146">pageView</span></span>   | <span data-ttu-id="200cb-147">Página de ações</span><span class="sxs-lookup"><span data-stu-id="200cb-147">Stock page</span></span>                |              | <span data-ttu-id="200cb-148">STYz</span><span class="sxs-lookup"><span data-stu-id="200cb-148">STYz</span></span>               | <span data-ttu-id="200cb-149">STYz</span><span class="sxs-lookup"><span data-stu-id="200cb-149">STYz</span></span>         |
| <span data-ttu-id="200cb-150">dependência</span><span class="sxs-lookup"><span data-stu-id="200cb-150">dependency</span></span> | <span data-ttu-id="200cb-151">GET /Home/Stock</span><span class="sxs-lookup"><span data-stu-id="200cb-151">GET /Home/Stock</span></span>           | <span data-ttu-id="200cb-152">qJSXU</span><span class="sxs-lookup"><span data-stu-id="200cb-152">qJSXU</span></span>        | <span data-ttu-id="200cb-153">STYz</span><span class="sxs-lookup"><span data-stu-id="200cb-153">STYz</span></span>               | <span data-ttu-id="200cb-154">STYz</span><span class="sxs-lookup"><span data-stu-id="200cb-154">STYz</span></span>         |
| <span data-ttu-id="200cb-155">solicitação</span><span class="sxs-lookup"><span data-stu-id="200cb-155">request</span></span>    | <span data-ttu-id="200cb-156">GET Home/Stock</span><span class="sxs-lookup"><span data-stu-id="200cb-156">GET Home/Stock</span></span>            | <span data-ttu-id="200cb-157">KqKwlrSt9PA=</span><span class="sxs-lookup"><span data-stu-id="200cb-157">KqKwlrSt9PA=</span></span> | <span data-ttu-id="200cb-158">qJSXU</span><span class="sxs-lookup"><span data-stu-id="200cb-158">qJSXU</span></span>              | <span data-ttu-id="200cb-159">STYz</span><span class="sxs-lookup"><span data-stu-id="200cb-159">STYz</span></span>         |
| <span data-ttu-id="200cb-160">dependência</span><span class="sxs-lookup"><span data-stu-id="200cb-160">dependency</span></span> | <span data-ttu-id="200cb-161">GET /api/stock/value</span><span class="sxs-lookup"><span data-stu-id="200cb-161">GET /api/stock/value</span></span>      | <span data-ttu-id="200cb-162">bBrf2L7mm2g=</span><span class="sxs-lookup"><span data-stu-id="200cb-162">bBrf2L7mm2g=</span></span> | <span data-ttu-id="200cb-163">KqKwlrSt9PA=</span><span class="sxs-lookup"><span data-stu-id="200cb-163">KqKwlrSt9PA=</span></span>       | <span data-ttu-id="200cb-164">STYz</span><span class="sxs-lookup"><span data-stu-id="200cb-164">STYz</span></span>         |

<span data-ttu-id="200cb-165">Agora quando Olá chamada `GET /api/stock/value` feitas serviço externo tooan deseja tooknow identidade de saudação do servidor.</span><span class="sxs-lookup"><span data-stu-id="200cb-165">Now when hello call `GET /api/stock/value` made tooan external service you want tooknow hello identity of that server.</span></span> <span data-ttu-id="200cb-166">Assim, você pode definir o campo `dependency.target` adequadamente.</span><span class="sxs-lookup"><span data-stu-id="200cb-166">So you can set `dependency.target` field appropriately.</span></span> <span data-ttu-id="200cb-167">Quando o serviço externo Olá não suporta o monitoramento - `target` é definido toohello o nome do host do serviço, Olá como `stock-prices-api.com`.</span><span class="sxs-lookup"><span data-stu-id="200cb-167">When hello external service does not support monitoring - `target` is set toohello host name of hello service like `stock-prices-api.com`.</span></span> <span data-ttu-id="200cb-168">No entanto se esse serviço identifica-se ao retornar um cabeçalho HTTP - `target` contém Olá identidade de serviço que permite que o rastreamento de toobuild distribuído do Application Insights consultando telemetria desse serviço.</span><span class="sxs-lookup"><span data-stu-id="200cb-168">However if that service identifies itself by returning a predefined HTTP header - `target` contains hello service identity that allows Application Insights toobuild distributed trace by querying telemetry from that service.</span></span> 

## <a name="correlation-headers"></a><span data-ttu-id="200cb-169">Cabeçalhos de correlação</span><span class="sxs-lookup"><span data-stu-id="200cb-169">Correlation headers</span></span>

<span data-ttu-id="200cb-170">Estamos trabalhando na proposta de RFC para Olá [correlação protocolo HTTP](https://github.com/lmolkova/correlation/blob/master/http_protocol_proposal_v1.md).</span><span class="sxs-lookup"><span data-stu-id="200cb-170">We are working on RFC proposal for hello [correlation HTTP protocol](https://github.com/lmolkova/correlation/blob/master/http_protocol_proposal_v1.md).</span></span> <span data-ttu-id="200cb-171">Essa proposta define dois cabeçalhos:</span><span class="sxs-lookup"><span data-stu-id="200cb-171">This proposal defines two headers:</span></span>

- <span data-ttu-id="200cb-172">`Request-Id`executar o id exclusivo global de saudação da chamada de saudação</span><span class="sxs-lookup"><span data-stu-id="200cb-172">`Request-Id` carry hello globally unique id of hello call</span></span>
- <span data-ttu-id="200cb-173">`Correlation-Context`-realizar a coleção de pares de valor Olá nome das propriedades de rastreamento Olá distribuído</span><span class="sxs-lookup"><span data-stu-id="200cb-173">`Correlation-Context` - carry hello name value pairs collection of hello distributed trace properties</span></span>

<span data-ttu-id="200cb-174">saudação padrão também define dois esquemas de `Request-Id` geração - simples e hierárquica.</span><span class="sxs-lookup"><span data-stu-id="200cb-174">hello standard also defines two schemas of `Request-Id` generation - flat and hierarchical.</span></span> <span data-ttu-id="200cb-175">Com o esquema simples de Olá, há um conhecido `Id` chave definida para Olá `Correlation-Context` coleção.</span><span class="sxs-lookup"><span data-stu-id="200cb-175">With hello flat schema, there is a well-known `Id` key defined for hello `Correlation-Context` collection.</span></span>

<span data-ttu-id="200cb-176">Application Insights define Olá [extensão](https://github.com/lmolkova/correlation/blob/master/http_protocol_proposal_v2.md) para correlação Olá protocolo HTTP.</span><span class="sxs-lookup"><span data-stu-id="200cb-176">Application Insights defines hello [extension](https://github.com/lmolkova/correlation/blob/master/http_protocol_proposal_v2.md) for hello correlation HTTP protocol.</span></span> <span data-ttu-id="200cb-177">Ele usa `Request-Context` nome pares de valor toopropagate coleção de saudação de propriedades usadas pelo chamador imediato saudação ou receptor.</span><span class="sxs-lookup"><span data-stu-id="200cb-177">It uses `Request-Context` name value pairs toopropagate hello collection of properties used by hello immediate caller or callee.</span></span> <span data-ttu-id="200cb-178">SDK do Application Insights usa esse cabeçalho tooset `dependency.target` e `request.source` campos.</span><span class="sxs-lookup"><span data-stu-id="200cb-178">Application Insights SDK uses this header tooset `dependency.target` and `request.source` fields.</span></span>

## <a name="open-tracing-and-application-insights"></a><span data-ttu-id="200cb-179">Rastreamento aberto e Application Insights</span><span class="sxs-lookup"><span data-stu-id="200cb-179">Open tracing and Application Insights</span></span>

<span data-ttu-id="200cb-180">Aparência dos modelos de dados de [Rastreamento Aberto](http://opentracing.io/) e do Application Insights</span><span class="sxs-lookup"><span data-stu-id="200cb-180">[Open Tracing](http://opentracing.io/) and Application Insights data models looks</span></span> 

- <span data-ttu-id="200cb-181">`request`, `pageView` mapeia muito**alcance** com`span.kind = server`</span><span class="sxs-lookup"><span data-stu-id="200cb-181">`request`, `pageView` maps too**Span** with `span.kind = server`</span></span>
- <span data-ttu-id="200cb-182">`dependency`mapeia muito**alcance** com`span.kind = client`</span><span class="sxs-lookup"><span data-stu-id="200cb-182">`dependency` maps too**Span** with `span.kind = client`</span></span>
- <span data-ttu-id="200cb-183">`id`de um `request` e `dependency` mapeia muito**Span.Id**</span><span class="sxs-lookup"><span data-stu-id="200cb-183">`id` of a `request` and `dependency` maps too**Span.Id**</span></span>
- <span data-ttu-id="200cb-184">`operation_Id`mapeia muito**TraceId**</span><span class="sxs-lookup"><span data-stu-id="200cb-184">`operation_Id` maps too**TraceId**</span></span>
- <span data-ttu-id="200cb-185">`operation_ParentId`mapeia muito**referência** do tipo`ChileOf`</span><span class="sxs-lookup"><span data-stu-id="200cb-185">`operation_ParentId` maps too**Reference** of type `ChileOf`</span></span>

<span data-ttu-id="200cb-186">Consulte [modelo de dados](application-insights-data-model.md) para modelo de dados e tipos do Application Insights.</span><span class="sxs-lookup"><span data-stu-id="200cb-186">See [data model](application-insights-data-model.md) for Application Insights types and data model.</span></span>

<span data-ttu-id="200cb-187">Consulte [especificação](https://github.com/opentracing/specification/blob/master/specification.md) e [semantic_conventions](https://github.com/opentracing/specification/blob/master/semantic_conventions.md) para obter definições dos conceitos de rastreamento aberto.</span><span class="sxs-lookup"><span data-stu-id="200cb-187">See [specification](https://github.com/opentracing/specification/blob/master/specification.md) and [semantic_conventions](https://github.com/opentracing/specification/blob/master/semantic_conventions.md) for definitions of Open Tracing concepts.</span></span>


## <a name="telemetry-correlation-in-net"></a><span data-ttu-id="200cb-188">Correlação de telemetria em .NET</span><span class="sxs-lookup"><span data-stu-id="200cb-188">Telemetry correlation in .NET</span></span>

<span data-ttu-id="200cb-189">Ao longo do tempo .NET definido pelo número de maneiras toocorrelate telemetria e diagnóstico logs.</span><span class="sxs-lookup"><span data-stu-id="200cb-189">Over time .NET defined number of ways toocorrelate telemetry and diagnostics logs.</span></span> <span data-ttu-id="200cb-190">Não há `System.Diagnostics.CorrelationManager` permitindo tootrack [LogicalOperationStack e ActivityId](https://msdn.microsoft.com/library/system.diagnostics.correlationmanager.aspx).</span><span class="sxs-lookup"><span data-stu-id="200cb-190">There is `System.Diagnostics.CorrelationManager` allowing tootrack [LogicalOperationStack and ActivityId](https://msdn.microsoft.com/library/system.diagnostics.correlationmanager.aspx).</span></span> <span data-ttu-id="200cb-191">`System.Diagnostics.Tracing.EventSource`e Windows ETW definir método hello [SetCurrentThreadActivityId](https://msdn.microsoft.com/library/system.diagnostics.tracing.eventsource.setcurrentthreadactivityid.aspx).</span><span class="sxs-lookup"><span data-stu-id="200cb-191">`System.Diagnostics.Tracing.EventSource` and Windows ETW define hello method [SetCurrentThreadActivityId](https://msdn.microsoft.com/library/system.diagnostics.tracing.eventsource.setcurrentthreadactivityid.aspx).</span></span> <span data-ttu-id="200cb-192">`ILogger` usa [Escopos de log](https://docs.microsoft.com/aspnet/core/fundamentals/logging#log-scopes).</span><span class="sxs-lookup"><span data-stu-id="200cb-192">`ILogger` uses [Log Scopes](https://docs.microsoft.com/aspnet/core/fundamentals/logging#log-scopes).</span></span> <span data-ttu-id="200cb-193">WCF e HTTP conectam a propagação de contexto "atual".</span><span class="sxs-lookup"><span data-stu-id="200cb-193">WCF and Http wire up "current" context propagation.</span></span>

<span data-ttu-id="200cb-194">No entanto, esses métodos não habilitam o suporte a rastreamento distribuído automático.</span><span class="sxs-lookup"><span data-stu-id="200cb-194">However those methods didn't enable automatic distributed tracing support.</span></span> <span data-ttu-id="200cb-195">`DiagnosticsSource`é um toosupport de maneira automática entre correlação de máquina.</span><span class="sxs-lookup"><span data-stu-id="200cb-195">`DiagnosticsSource` is a way toosupport automatic cross machine correlation.</span></span> <span data-ttu-id="200cb-196">Bibliotecas .NET oferecem suporte a origem de diagnóstico e permitem a propagação automática de máquina cruzada do contexto de correlação Olá por meio do transporte hello como http.</span><span class="sxs-lookup"><span data-stu-id="200cb-196">.NET libraries support Diagnostics Source and allow automatic cross machine propagation of hello correlation context via hello transport like http.</span></span>

<span data-ttu-id="200cb-197">Olá [guia tooActivities](https://github.com/dotnet/corefx/blob/master/src/System.Diagnostics.DiagnosticSource/src/ActivityUserGuide.md) na fonte de diagnóstico explica conceitos básicos de saudação do rastreamento de atividades.</span><span class="sxs-lookup"><span data-stu-id="200cb-197">hello [guide tooActivities](https://github.com/dotnet/corefx/blob/master/src/System.Diagnostics.DiagnosticSource/src/ActivityUserGuide.md) in Diagnostics Source explains hello basics of tracking Activities.</span></span> 

<span data-ttu-id="200cb-198">Núcleo do ASP.NET 2.0 dá suporte à extração de cabeçalhos Http e iniciando Olá nova atividade.</span><span class="sxs-lookup"><span data-stu-id="200cb-198">ASP.NET Core 2.0 supports extraction of Http Headers and starting hello new Activity.</span></span> 

<span data-ttu-id="200cb-199">`System.Net.HttpClient`versão inicial `<fill in>` dá suporte à inclusão automática de correlação Olá cabeçalhos Http e Olá chamada de http como uma atividade de controle.</span><span class="sxs-lookup"><span data-stu-id="200cb-199">`System.Net.HttpClient` starting version `<fill in>` supports automatic injection of hello correlation Http Headers and tracking hello http call as an Activity.</span></span>

<span data-ttu-id="200cb-200">Há um novo módulo Http [Microsoft.AspNet.TelemetryCorrelation](https://www.nuget.org/packages/Microsoft.AspNet.TelemetryCorrelation/) para Olá ASP.NET clássico.</span><span class="sxs-lookup"><span data-stu-id="200cb-200">There is a new Http Module [Microsoft.AspNet.TelemetryCorrelation](https://www.nuget.org/packages/Microsoft.AspNet.TelemetryCorrelation/) for hello ASP.NET Classic.</span></span> <span data-ttu-id="200cb-201">Este módulo implementa a correlação de telemetria usando DiagnosticsSource.</span><span class="sxs-lookup"><span data-stu-id="200cb-201">This module implements telemetry correlation using DiagnosticsSource.</span></span> <span data-ttu-id="200cb-202">Ele inicia a atividade com base nos cabeçalhos de solicitação de entrada.</span><span class="sxs-lookup"><span data-stu-id="200cb-202">It starts activity based on incoming request headers.</span></span> <span data-ttu-id="200cb-203">Ele também correlaciona telemetria dos diferentes estágios de saudação do processamento da solicitação.</span><span class="sxs-lookup"><span data-stu-id="200cb-203">It also correlates telemetry from hello different stages of request processing.</span></span> <span data-ttu-id="200cb-204">Mesmo em casos de saudação quando todos os estágios do processamento do IIS é executado em um threads gerenciar diferentes.</span><span class="sxs-lookup"><span data-stu-id="200cb-204">Even for hello cases when every stage of IIS processing runs on a different manage threads.</span></span>

<span data-ttu-id="200cb-205">Versão inicial do Application Insights SDK `2.4.0-beta1` usa a telemetria toocollect DiagnosticsSource e a atividade e associá-lo a atividade atual de saudação.</span><span class="sxs-lookup"><span data-stu-id="200cb-205">Application Insights SDK starting version `2.4.0-beta1` uses DiagnosticsSource and Activity toocollect telemetry and associate it with hello current activity.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="200cb-206">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="200cb-206">Next steps</span></span>

- [<span data-ttu-id="200cb-207">Escrever telemetria personalizada</span><span class="sxs-lookup"><span data-stu-id="200cb-207">Write custom telemetry</span></span>](app-insights-api-custom-events-metrics.md)
- <span data-ttu-id="200cb-208">Integrar todos os componentes do seu microsserviço no Application Insights.</span><span class="sxs-lookup"><span data-stu-id="200cb-208">Onboard all components of your micro service on Application Insights.</span></span> <span data-ttu-id="200cb-209">Confira as [plataformas com suporte](app-insights-platforms.md).</span><span class="sxs-lookup"><span data-stu-id="200cb-209">Check out [supported platforms](app-insights-platforms.md).</span></span>
- <span data-ttu-id="200cb-210">Consulte [modelo de dados](application-insights-data-model.md) para modelo de dados e tipos do Application Insights.</span><span class="sxs-lookup"><span data-stu-id="200cb-210">See [data model](application-insights-data-model.md) for Application Insights types and data model.</span></span>
- <span data-ttu-id="200cb-211">Saiba como muito[estender e filtrar telemetria](app-insights-api-filtering-sampling.md).</span><span class="sxs-lookup"><span data-stu-id="200cb-211">Learn how too[extend and filter telemetry](app-insights-api-filtering-sampling.md).</span></span>
