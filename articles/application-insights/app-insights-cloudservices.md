---
title: "Application Insights para Serviços de Nuvem do Azure | Microsoft Docs"
description: "Monitorar suas funções da Web e de trabalho com eficiência com o Application Insights"
services: application-insights
documentationcenter: 
keywords: "WAD2AI, Diagnóstico do Azure"
author: CFreemanwa
manager: carmonm
editor: alancameronwills
ms.assetid: 5c7a5b34-329e-42b7-9330-9dcbb9ff1f88
ms.service: application-insights
ms.devlang: na
ms.tgt_pltfrm: ibiza
ms.topic: get-started-article
ms.workload: tbd
ms.date: 05/05/2017
ms.author: bwren
ms.openlocfilehash: c12b225aa351d0c272243469550791a6840091e0
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/18/2017
---
# <a name="application-insights-for-azure-cloud-services"></a><span data-ttu-id="2f1e4-104">Application Insights para Serviços de Nuvem do Azure</span><span class="sxs-lookup"><span data-stu-id="2f1e4-104">Application Insights for Azure Cloud Services</span></span>
<span data-ttu-id="2f1e4-105">[Os aplicativos do serviço de nuvem do Microsoft Azure](https://azure.microsoft.com/services/cloud-services/) podem ser monitorados pelo [Application Insights][start] para ver a disponibilidade, desempenho, falhas e uso combinando os dados dos SDKs do Application Insights com os dados de [Diagnóstico do Azure](https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/azure-diagnostics) em seus Serviços de Nuvem.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-105">[Microsoft Azure Cloud service apps](https://azure.microsoft.com/services/cloud-services/) can be monitored by [Application Insights][start] for availability, performance, failures, and usage by combining data from Application Insights' SDKs with [Azure Diagnotics](https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/azure-diagnostics) data from your Cloud Services.</span></span> <span data-ttu-id="2f1e4-106">Com os comentários que você obtiver sobre o desempenho e a eficiência de seu aplicativo em uso, você pode fazer escolhas informadas sobre a direção do projeto em cada ciclo de vida de desenvolvimento.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-106">With the feedback you get about the performance and effectiveness of your app in the wild, you can make informed choices about the direction of the design in each development lifecycle.</span></span>

![Exemplo](./media/app-insights-cloudservices/sample.png)

## <a name="before-you-start"></a><span data-ttu-id="2f1e4-108">Antes de começar</span><span class="sxs-lookup"><span data-stu-id="2f1e4-108">Before you start</span></span>
<span data-ttu-id="2f1e4-109">Você precisará de:</span><span class="sxs-lookup"><span data-stu-id="2f1e4-109">You'll need:</span></span>

* <span data-ttu-id="2f1e4-110">Uma assinatura do [Microsoft Azure](http://azure.com).</span><span class="sxs-lookup"><span data-stu-id="2f1e4-110">A subscription with [Microsoft Azure](http://azure.com).</span></span> <span data-ttu-id="2f1e4-111">Entre com uma conta da Microsoft, que você pode ter para o Windows, XBox Live ou outros serviços de nuvem da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-111">Sign in with a Microsoft account, which you might have for Windows, XBox Live, or other Microsoft cloud services.</span></span> 
* <span data-ttu-id="2f1e4-112">Ferramentas do Microsoft Azure 2.9 ou posteriores</span><span class="sxs-lookup"><span data-stu-id="2f1e4-112">Microsoft Azure tools 2.9 or later</span></span>
* <span data-ttu-id="2f1e4-113">Developer Analytics Tools 7.10 ou posteriores</span><span class="sxs-lookup"><span data-stu-id="2f1e4-113">Developer Analytics Tools 7.10 or later</span></span>

## <a name="quick-start"></a><span data-ttu-id="2f1e4-114">Início rápido</span><span class="sxs-lookup"><span data-stu-id="2f1e4-114">Quick start</span></span>
<span data-ttu-id="2f1e4-115">A maneira mais rápida e fácil de monitorar seu serviço de nuvem com o Application Insights é escolher essa opção quando você publica seu serviço no Azure.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-115">The quickest and easiest way to monitor your cloud service with Application Insights is to choose that option when you publish your service to Azure.</span></span>

![Exemplo](./media/app-insights-cloudservices/azure-cloud-application-insights.png)

<span data-ttu-id="2f1e4-117">Esta opção instrumenta o aplicativo em tempo de execução, oferecendo a você toda a telemetria necessária para monitorar solicitações, exceções e dependências na função web, bem como contadores de desempenho nas funções de trabalho.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-117">This option instruments your app at run time, giving you all the telemetry you need to monitor requests, exceptions, and dependencies in your web role, as well as performance counters from your worker roles.</span></span> <span data-ttu-id="2f1e4-118">Os rastreamentos de diagnóstico gerados pelo aplicativo também são enviados para o Application Insights.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-118">Any diagnostic traces generated by your app are also sent to Application Insights.</span></span>

<span data-ttu-id="2f1e4-119">Se isso for tudo o que você precisa, você está pronto!</span><span class="sxs-lookup"><span data-stu-id="2f1e4-119">If that's all you need, you're done!</span></span> <span data-ttu-id="2f1e4-120">As próximas etapas são [exibição das métricas do seu aplicativo](app-insights-metrics-explorer.md), [consulta de seus dados com o Analytics](app-insights-analytics.md) e talvez a configuração de um [painel](app-insights-dashboards.md).</span><span class="sxs-lookup"><span data-stu-id="2f1e4-120">Next steps are [viewing metrics from your app](app-insights-metrics-explorer.md), [querying your data with Analytics](app-insights-analytics.md), and maybe setting up a [dashboard](app-insights-dashboards.md).</span></span> <span data-ttu-id="2f1e4-121">Você talvez queira configurar [testes de disponibilidade](app-insights-monitor-web-app-availability.md) e [adicionar código às suas páginas da Web](app-insights-javascript.md) para monitorar o desempenho no navegador.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-121">You might want to set up [availability tests](app-insights-monitor-web-app-availability.md) and [add code to your web pages](app-insights-javascript.md) to monitor performance in the browser.</span></span>

<span data-ttu-id="2f1e4-122">Mas você também pode obter mais opções:</span><span class="sxs-lookup"><span data-stu-id="2f1e4-122">But you can also get more options:</span></span>

* <span data-ttu-id="2f1e4-123">Enviar dados de diferentes componentes e criar configurações para recursos separados.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-123">Send data from different components and build configurations to separate resources.</span></span>
* <span data-ttu-id="2f1e4-124">Adicione telemetria personalizada do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-124">Add custom telemetry from your app.</span></span>

<span data-ttu-id="2f1e4-125">Se essas opções interessam a você, continue lendo.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-125">If those options are of interest to you, read on.</span></span>

## <a name="sample-application-instrumented-with-application-insights"></a><span data-ttu-id="2f1e4-126">Aplicativo de exemplo instrumentado com o Application Insights</span><span class="sxs-lookup"><span data-stu-id="2f1e4-126">Sample Application instrumented with Application Insights</span></span>
<span data-ttu-id="2f1e4-127">Vejamos esse [aplicativo de exemplo](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService) no qual o Application Insights é adicionado a um serviço de nuvem com duas funções de trabalho hospedadas no Azure.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-127">Take a look at this [sample application](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService) in which Application Insights is added to a cloud service with two worker roles hosted in Azure.</span></span> 

<span data-ttu-id="2f1e4-128">O que se segue informa como adaptar seu próprio projeto de serviço de nuvem da mesma maneira.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-128">What follows tells you how to adapt your own cloud service project in the same way.</span></span>

## <a name="plan-resources-and-resource-groups"></a><span data-ttu-id="2f1e4-129">Planejar recursos e grupos de recursos</span><span class="sxs-lookup"><span data-stu-id="2f1e4-129">Plan resources and resource groups</span></span>
<span data-ttu-id="2f1e4-130">A telemetria do aplicativo é armazenada, analisada e exibida em um recurso do Azure do tipo Application Insights.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-130">The telemetry from your app is stored, analyzed and displayed in an Azure resource of type Application Insights.</span></span> 

<span data-ttu-id="2f1e4-131">Cada recurso pertence somente a um grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-131">Each resource belongs to a resource group.</span></span> <span data-ttu-id="2f1e4-132">Os grupos de recursos são usados para gerenciar custos, conceder acesso a membros da equipe e implantar atualizações em uma única transação coordenada.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-132">Resource groups are used for managing costs, for granting access to team members, and to deploy updates in a single coordinated transaction.</span></span> <span data-ttu-id="2f1e4-133">Por exemplo, você pode [escrever um script para implantar](../azure-resource-manager/resource-group-template-deploy.md) um Serviço de Nuvem do Azure e seus recursos em uma operação de monitoramento do Application Insights.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-133">For example, you could [write a script to deploy](../azure-resource-manager/resource-group-template-deploy.md) an Azure Cloud Service and its Application Insights monitoring resources all in one operation.</span></span>

### <a name="resources-for-components"></a><span data-ttu-id="2f1e4-134">Recursos para componentes</span><span class="sxs-lookup"><span data-stu-id="2f1e4-134">Resources for components</span></span>
<span data-ttu-id="2f1e4-135">O esquema recomendado é criar um recurso separado para cada componente do aplicativo - ou seja, cada função Web e função de trabalho.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-135">The recommended scheme is to create a separate resource for each component of your application - that is, each web role and worker role.</span></span> <span data-ttu-id="2f1e4-136">Você pode analisar cada componente separadamente, mas pode criar um [painel](app-insights-dashboards.md) que reúna os principais gráficos de todos os componentes, para que você possa compará-los e monitorá-los juntos.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-136">You can analyze each component separately, but can create a [dashboard](app-insights-dashboards.md) that brings together the key charts from all the components, so that you can compare and monitor them together.</span></span> 

<span data-ttu-id="2f1e4-137">É um esquema alternativo enviar a telemetria de mais de uma função para o mesmo recurso, mas [Adicionar uma propriedade de dimensão para cada item de telemetria](app-insights-api-filtering-sampling.md#add-properties-itelemetryinitializer) que identifica sua função de origem.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-137">An alternative scheme is to send the telemetry from more than one role to the same resource, but [add a dimension property to each telemetry item](app-insights-api-filtering-sampling.md#add-properties-itelemetryinitializer) that identifies its source role.</span></span> <span data-ttu-id="2f1e4-138">Nesse esquema, os gráficos de métricas, como exceções, normalmente mostram uma agregação das contagens das diferentes funções, mas é possível segmentar o gráfico pelo identificador de função, quando necessário.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-138">In this scheme, metric charts such as exceptions normally show an aggregation of the counts from the different roles, but you can segment the chart by the role identifier when required.</span></span> <span data-ttu-id="2f1e4-139">As pesquisas também podem ser filtradas na mesma dimensão.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-139">Searches can also be filtered by the same dimension.</span></span> <span data-ttu-id="2f1e4-140">Essa alternativa torna um pouco mais fácil ver tudo ao mesmo tempo, mas também pode causar uma certa confusão entre as funções.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-140">This alternative makes it a bit easier to view everything at the same time, but could also lead to some confusion between the roles.</span></span>

<span data-ttu-id="2f1e4-141">A telemetria do navegador geralmente é incluída no mesmo recurso que sua função Web do lado servidor.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-141">Browser telemetry is usually included in the same resource as its server-side web role.</span></span>

<span data-ttu-id="2f1e4-142">Coloque os recursos do Application Insights para os diferentes componentes em um grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-142">Put the Application Insights resources for the different components in one resource group.</span></span> <span data-ttu-id="2f1e4-143">Isso facilita seu gerenciamento em conjunto.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-143">This makes it easy to manage them together.</span></span> 

### <a name="separating-development-test-and-production"></a><span data-ttu-id="2f1e4-144">A separação de desenvolvimento, teste e produção</span><span class="sxs-lookup"><span data-stu-id="2f1e4-144">Separating development, test, and production</span></span>
<span data-ttu-id="2f1e4-145">Se você estiver desenvolvendo eventos personalizados para o próximo recurso enquanto a versão anterior estiver ativa, será recomendável enviar a telemetria de desenvolvimento para um recurso separado do Application Insights.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-145">If you are developing custom events for your next feature while the previous version is live, you want to send the development telemetry to a separate Application Insights resource.</span></span> <span data-ttu-id="2f1e4-146">Caso contrário, será difícil encontrar a telemetria de teste entre todo o tráfego do site ativo.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-146">Otherwise it will be hard to find your test telemetry among all the traffic from the live site.</span></span>

<span data-ttu-id="2f1e4-147">Para evitar essa situação, crie recursos separados para cada configuração de compilação ou 'carimbo' (desenvolvimento, teste, produção,...) do sistema.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-147">To avoid this situation, create separate resources for each build configuration or 'stamp' (development, test, production, ...) of your system.</span></span> <span data-ttu-id="2f1e4-148">Coloque os recursos para cada configuração de compilação em um grupo de recursos separado.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-148">Put the resources for each build configuration in a separate resource group.</span></span> 

<span data-ttu-id="2f1e4-149">Para enviar a telemetria para os recursos apropriados, você pode configurar o SDK do Application Insights para que ele escolha uma chave de instrumentação diferente, dependendo da configuração de compilação.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-149">To send the telemetry to the appropriate resources, you can set up the Application Insights SDK so that it picks up a different instrumentation key depending on the build configuration.</span></span> 

## <a name="create-an-application-insights-resource-for-each-role"></a><span data-ttu-id="2f1e4-150">Criar um recurso do Application Insights para cada função</span><span class="sxs-lookup"><span data-stu-id="2f1e4-150">Create an Application Insights resource for each role</span></span>
<span data-ttu-id="2f1e4-151">Se você decidiu criar um recurso separado para cada função – e talvez um conjunto separado para cada configuração de build –, é mais fácil criar todos eles no portal do Application Insights.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-151">If you've decided to create a separate resource for each role - and perhaps a separate set for each build configuration - then it's easiest to create them all in the Application Insights portal.</span></span> <span data-ttu-id="2f1e4-152">(Se você cria muitos recursos, pode [automatizar o processo](app-insights-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="2f1e4-152">(If you create resources a lot, you can [automate the process](app-insights-powershell.md).</span></span>

1. <span data-ttu-id="2f1e4-153">No [Portal do Azure][portal], crie um novo recurso do Application Insights.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-153">In the [Azure portal][portal], create a new Application Insights resource.</span></span> <span data-ttu-id="2f1e4-154">Para o tipo de aplicativo, escolha o aplicativo ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-154">For application type, choose ASP.NET app.</span></span> 

    ![Clique em Novo, Application Insights](./media/app-insights-cloudservices/01-new.png)
2. <span data-ttu-id="2f1e4-156">Observe que recurso é identificado por uma Chave de Instrumentação.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-156">Note that each resource is identified by an Instrumentation Key.</span></span> <span data-ttu-id="2f1e4-157">Talvez isso seja necessário mais tarde, se você quiser configurar ou verificar manualmente a configuração do SDK.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-157">You might need this later if you want to manually configure or verify the configuration of the SDK.</span></span>

    ![Clique em Propriedades, selecione a chave e pressione ctrl + C](./media/app-insights-cloudservices/02-props.png) 

## <a name="set-up-azure-diagnostics-for-each-role"></a><span data-ttu-id="2f1e4-159">Configurar o diagnóstico do Azure para cada função</span><span class="sxs-lookup"><span data-stu-id="2f1e4-159">Set up Azure Diagnostics for each role</span></span>
<span data-ttu-id="2f1e4-160">Defina esta opção para monitorar seu aplicativo com o Application Insights.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-160">Set this option to monitor your app with Application Insights.</span></span> <span data-ttu-id="2f1e4-161">Para funções web, isso fornece monitoramento de desempenho, alertas e diagnóstico, bem como análise de uso.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-161">For web roles, this provides performance monitoring, alerts, and diagnostics, as well as usage analysis.</span></span> <span data-ttu-id="2f1e4-162">Para outras funções, você pode pesquisar e monitorar o diagnóstico do Azure, como reinicialização, contadores de desempenho e chamadas para System.Diagnostics.Trace.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-162">For other roles, you can search and monitor Azure diagnostics such as restart, performance counters, and calls to System.Diagnostics.Trace.</span></span> 

1. <span data-ttu-id="2f1e4-163">No Visual Studio Solution Explorer, em &lt;SeuServiçoDeNuvem&gt;, Funções, abra as propriedades de cada função.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-163">In Visual Studio Solution Explorer, under &lt;YourCloudService&gt;, Roles, open the properties of each role.</span></span>
2. <span data-ttu-id="2f1e4-164">Em **Configuração**, defina **Enviar dados de diagnóstico para o Application Insights** e selecione o recurso apropriado do Application Insights criado anteriormente.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-164">In **Configuration**, set **Send diagnostics data to Application Insights** and select the appropriate Application Insights resource that you created earlier.</span></span>

<span data-ttu-id="2f1e4-165">Se você tiver optado por usar um recurso Application Insights separado para cada configuração de compilação, selecione primeiro a configuração.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-165">If you have decided to use a separate Application Insights resource for each build configuration, select the configuration first.</span></span>

![Nas propriedades de cada função do Azure, configure o Application Insights](./media/app-insights-cloudservices/configure-azure-diagnostics.png)

<span data-ttu-id="2f1e4-167">Isso tem o efeito de inserção de suas chaves de instrumentação do Application Insights nos arquivos chamados `ServiceConfiguration.*.cscfg`.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-167">This has the effect of inserting your Application Insights instrumentation keys into the files named `ServiceConfiguration.*.cscfg`.</span></span> <span data-ttu-id="2f1e4-168">([Exemplo de código](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/AzureEmailService/ServiceConfiguration.Cloud.cscfg)).</span><span class="sxs-lookup"><span data-stu-id="2f1e4-168">([Sample code](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/AzureEmailService/ServiceConfiguration.Cloud.cscfg)).</span></span>

<span data-ttu-id="2f1e4-169">Se desejar variar o nível de informações de diagnóstico enviadas para o Application Insights, faça isso [editando os arquivos `.cscfg` diretamente](app-insights-azure-diagnostics.md).</span><span class="sxs-lookup"><span data-stu-id="2f1e4-169">If you want to vary the level of diagnostic information sent to Application Insights, you can do so [by editing the `.cscfg` files directly](app-insights-azure-diagnostics.md).</span></span>

## <span data-ttu-id="2f1e4-170"><a name="sdk"></a>Instalar o SDK em cada projeto</span><span class="sxs-lookup"><span data-stu-id="2f1e4-170"><a name="sdk"></a>Install the SDK in each project</span></span>
<span data-ttu-id="2f1e4-171">Esta opção proporciona a capacidade de adicionar telemetria de negócios personalizados para qualquer função, para uma análise mais próxima de como seu aplicativo é usado e como é seu desempenho.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-171">This option adds the ability to add custom business telemetry to any role, for a closer analysis of how your application is used and performs.</span></span>

<span data-ttu-id="2f1e4-172">No Visual Studio, configure o SDK do Application Insights para cada projeto de aplicativo de nuvem.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-172">In Visual Studio, configure the Application Insights SDK for each cloud app project.</span></span>

1. <span data-ttu-id="2f1e4-173">**Funções Web**: clique com o botão direito no projeto e escolha **Configurar o Application Insights** ou **Adicionar > Application Insights Telemetry**.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-173">**Web roles**: Right-click the project and choose **Configure Application Insights** or **Add > Application Insights telemetry**.</span></span>

2. <span data-ttu-id="2f1e4-174">**Funções de trabalho**:</span><span class="sxs-lookup"><span data-stu-id="2f1e4-174">**Worker roles**:</span></span> 
 * <span data-ttu-id="2f1e4-175">Clique com o botão direito no projeto e selecione **Gerenciar Pacotes Nuget**.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-175">Right-click the project and select **Manage Nuget Packages**.</span></span>
 * <span data-ttu-id="2f1e4-176">Adicione [Application Insights para Windows Servers](https://www.nuget.org/packages/Microsoft.ApplicationInsights.WindowsServer/).</span><span class="sxs-lookup"><span data-stu-id="2f1e4-176">Add [Application Insights for Windows Servers](https://www.nuget.org/packages/Microsoft.ApplicationInsights.WindowsServer/).</span></span>

    ![Pesquise “Application Insights”](./media/app-insights-cloudservices/04-ai-nuget.png)

3. <span data-ttu-id="2f1e4-178">Configure o SDK para enviar dados ao recurso do Application Insights.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-178">Configure the SDK to send data to the Application Insights resource.</span></span>

    <span data-ttu-id="2f1e4-179">Em uma função de inicialização adequada, defina a chave de instrumentação no parâmetro de configuração no arquivo .cscfg:</span><span class="sxs-lookup"><span data-stu-id="2f1e4-179">In a suitable startup function, set the instrumentation key from the configuration setting in the .cscfg file:</span></span>
 
    ```C#
   
     TelemetryConfiguration.Active.InstrumentationKey = RoleEnvironment.GetConfigurationSettingValue("APPINSIGHTS_INSTRUMENTATIONKEY");
    ```
   
    <span data-ttu-id="2f1e4-180">Faça isso para cada função em seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-180">Do this for each role in your application.</span></span> <span data-ttu-id="2f1e4-181">Veja os exemplos:</span><span class="sxs-lookup"><span data-stu-id="2f1e4-181">See the examples:</span></span>
   
   * [<span data-ttu-id="2f1e4-182">Função Web</span><span class="sxs-lookup"><span data-stu-id="2f1e4-182">Web role</span></span>](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/Global.asax.cs#L27)
   * [<span data-ttu-id="2f1e4-183">Função de trabalho</span><span class="sxs-lookup"><span data-stu-id="2f1e4-183">Worker role</span></span>](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/WorkerRoleA.cs#L232)
   * [<span data-ttu-id="2f1e4-184">Para páginas da Web</span><span class="sxs-lookup"><span data-stu-id="2f1e4-184">For web pages</span></span>](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/Views/Shared/_Layout.cshtml#L13) 
4. <span data-ttu-id="2f1e4-185">Defina o arquivo ApplicationInsights.config para sempre ser copiado no diretório de saída.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-185">Set the ApplicationInsights.config file to be copied always to the output directory.</span></span> 
   
    <span data-ttu-id="2f1e4-186">(No arquivo. config, você verá mensagens solicitando que você coloque a chave de instrumentação lá.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-186">(In the .config file, you'll see messages asking you to place the instrumentation key there.</span></span> <span data-ttu-id="2f1e4-187">No entanto, para aplicativos em nuvem é melhor defini-la por meio do arquivo .cscfg.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-187">However, for cloud applications it's better to set it from the .cscfg file.</span></span> <span data-ttu-id="2f1e4-188">Isso garante que a função seja identificada corretamente no portal).</span><span class="sxs-lookup"><span data-stu-id="2f1e4-188">This ensures that the role is correctly identified in the portal.)</span></span>

#### <a name="run-and-publish-the-app"></a><span data-ttu-id="2f1e4-189">Executar e publicar o aplicativo</span><span class="sxs-lookup"><span data-stu-id="2f1e4-189">Run and publish the app</span></span>
<span data-ttu-id="2f1e4-190">Execute o aplicativo e entre no Azure.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-190">Run your app, and sign into Azure.</span></span> <span data-ttu-id="2f1e4-191">Abra os recursos do Application Insights que você criou, veja que os pontos de dados individuais aparecerem em [Pesquisa](app-insights-diagnostic-search.md) e os dados agregados no [Metrics Explorer](app-insights-metrics-explorer.md).</span><span class="sxs-lookup"><span data-stu-id="2f1e4-191">Open the Application Insights resources you created, and you'll see individual data points appearing in [Search](app-insights-diagnostic-search.md), and aggregated data in [Metric Explorer](app-insights-metrics-explorer.md).</span></span> 

<span data-ttu-id="2f1e4-192">Adicione mais telemetria: confira as seções a seguir e publique seu aplicativo para obter comentários em tempo real sobre o diagnóstico e de uso.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-192">Add more telemetry - see the sections below - and then publish your app to get live diagnostic and usage feedback.</span></span> 

#### <a name="no-data"></a><span data-ttu-id="2f1e4-193">Não há dados?</span><span class="sxs-lookup"><span data-stu-id="2f1e4-193">No data?</span></span>
* <span data-ttu-id="2f1e4-194">Abra o bloco [Pesquisar][diagnostic] para ver eventos individuais.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-194">Open the [Search][diagnostic] tile, to see individual events.</span></span>
* <span data-ttu-id="2f1e4-195">Use o aplicativo abrindo páginas diferentes, para que ele gere alguma telemetria.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-195">Use the application, opening different pages so that it generates some telemetry.</span></span>
* <span data-ttu-id="2f1e4-196">Aguarde alguns segundos e clique em Atualizar.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-196">Wait a few seconds and click Refresh.</span></span>
* <span data-ttu-id="2f1e4-197">Consulte [Solução de problemas][qna].</span><span class="sxs-lookup"><span data-stu-id="2f1e4-197">See [Troubleshooting][qna].</span></span>

## <a name="view-azure-diagnostic-events"></a><span data-ttu-id="2f1e4-198">Exibir eventos de Diagnóstico do Azure</span><span class="sxs-lookup"><span data-stu-id="2f1e4-198">View Azure Diagnostic events</span></span>
<span data-ttu-id="2f1e4-199">Onde encontrar as informações de [Diagnóstico do Azure](https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/azure-diagnostics) no Application Insights:</span><span class="sxs-lookup"><span data-stu-id="2f1e4-199">Where to find the [Azure Diagnostics](https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/azure-diagnostics) information in Application Insights:</span></span>

* <span data-ttu-id="2f1e4-200">Os contadores de desempenho são exibidos como métricas personalizadas.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-200">Performance counters are displayed as custom metrics.</span></span> 
* <span data-ttu-id="2f1e4-201">Os logs de eventos do Windows são mostrados como eventos de rastreamentos e personalizados.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-201">Windows event logs are shown as traces and custom events.</span></span>
* <span data-ttu-id="2f1e4-202">Logs do aplicativo, logs de ETW e todos os logs de infraestrutura de diagnóstico são exibidos como rastreamentos.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-202">Application logs, ETW logs, and any diagnostics infrastructure logs appear as traces.</span></span>

<span data-ttu-id="2f1e4-203">Para ver os contadores de eventos e os contadores de desempenho, abra o [Metrics Explorer](app-insights-metrics-explorer.md) e adicione um novo gráfico:</span><span class="sxs-lookup"><span data-stu-id="2f1e4-203">To see performance counters and counts of events, open [Metrics Explorer](app-insights-metrics-explorer.md) and add a new chart:</span></span>

![Dados de diagnóstico do Azure](./media/app-insights-cloudservices/23-wad.png)

<span data-ttu-id="2f1e4-205">Use [Pesquisar](app-insights-diagnostic-search.md) em uma [consulta do Analytics](app-insights-analytics-tour.md) para pesquisar os vários logs de rastreamento enviados pelo Diagnóstico do Azure.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-205">Use [Search](app-insights-diagnostic-search.md) or an [Analytics query](app-insights-analytics-tour.md) to search across the various trace logs sent by Azure Diagnostics.</span></span> <span data-ttu-id="2f1e4-206">Por exemplo, suponha que você tem uma exceção sem tratamento que causou a falha e reciclagem de uma Função.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-206">For example, suppose you have an unhandled exception which caused a Role to crash and recycle.</span></span> <span data-ttu-id="2f1e4-207">Essa informação será mostrada no canal do Aplicativo do Log de Eventos do Windows.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-207">That information would show up in the Application channel of Windows Event Log.</span></span> <span data-ttu-id="2f1e4-208">É possível usar a Pesquisa para examinar o erro do Log de Eventos do Windows e obter o rastreamento de pilha completo da exceção.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-208">You can use Search to look at the Windows Event Log error and get the full stack trace for the exception.</span></span> <span data-ttu-id="2f1e4-209">Isso ajudará você a encontrar a causa raiz do problema.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-209">That will help you find the root cause of the issue.</span></span>

![Pesquisa de diagnóstico do Azure](./media/app-insights-cloudservices/25-wad.png)

## <a name="more-telemetry"></a><span data-ttu-id="2f1e4-211">Mais telemetria</span><span class="sxs-lookup"><span data-stu-id="2f1e4-211">More telemetry</span></span>
<span data-ttu-id="2f1e4-212">As seções a seguir mostram como obter a telemetria adicional de diferentes aspectos de seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-212">The sections below show how to get additional telemetry from different aspects of your application.</span></span>

## <a name="track-requests-from-worker-roles"></a><span data-ttu-id="2f1e4-213">Acompanhar as solicitações das funções de trabalho</span><span class="sxs-lookup"><span data-stu-id="2f1e4-213">Track Requests from Worker roles</span></span>
<span data-ttu-id="2f1e4-214">Nas funções web, o módulo de solicitações automaticamente coleta dados sobre solicitações HTTP.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-214">In web roles, the requests module automatically collects data about HTTP requests.</span></span> <span data-ttu-id="2f1e4-215">Consulte o [MVCWebRole de exemplo](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService/MvcWebRole) para obter exemplos de como você pode substituir o comportamento de coleção padrão.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-215">See the [sample MVCWebRole](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService/MvcWebRole) for examples of how you can override the default collection behavior.</span></span> 

<span data-ttu-id="2f1e4-216">Você pode capturar o desempenho das chamadas a funções de trabalho acompanhando-as da mesma maneira como faz com solicitações HTTP.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-216">You can capture the performance of calls to worker roles by tracking them in the same way as HTTP requests.</span></span> <span data-ttu-id="2f1e4-217">No Application Insights, o tipo de telemetria Solicitação mede uma unidade de trabalho do servidor nomeada que pode ser cronometrada e ser bem-sucedida ou falhar de forma independente.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-217">In Application Insights, the Request telemetry type measures a unit of named server-side work that can be timed and can independently succeed or fail.</span></span> <span data-ttu-id="2f1e4-218">Embora as solicitações HTTP sejam capturadas automaticamente pelo SDK, você pode inserir seu próprio código para acompanhar as solicitações para funções de trabalho.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-218">While HTTP requests are captured automatically by the SDK, you can insert your own code to track requests to worker roles.</span></span>

<span data-ttu-id="2f1e4-219">Consulte as duas funções de trabalho de exemplo instrumentadas para solicitações de relatório: [WorkerRoleA](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService/WorkerRoleA) e [WorkerRoleB](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService/WorkerRoleB)</span><span class="sxs-lookup"><span data-stu-id="2f1e4-219">See the two sample worker roles instrumented to report requests: [WorkerRoleA](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService/WorkerRoleA) and [WorkerRoleB](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService/WorkerRoleB)</span></span>

## <a name="exceptions"></a><span data-ttu-id="2f1e4-220">Exceções</span><span class="sxs-lookup"><span data-stu-id="2f1e4-220">Exceptions</span></span>
<span data-ttu-id="2f1e4-221">Consulte [Monitoramento de exceções no Application Insights](app-insights-asp-net-exceptions.md) para obter informações sobre como você pode coletar exceções sem tratamento de diferentes tipos de aplicativos Web.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-221">See [Monitoring Exceptions in Application Insights](app-insights-asp-net-exceptions.md) for information on how you can collect unhandled exceptions from different web application types.</span></span>

<span data-ttu-id="2f1e4-222">A função web de exemplo tem controladores MVC5 e API Web 2.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-222">The sample web role has MVC5 and Web API 2 controllers.</span></span> <span data-ttu-id="2f1e4-223">As exceções sem tratamento das duas são capturadas com os seguintes manipuladores:</span><span class="sxs-lookup"><span data-stu-id="2f1e4-223">The unhandled exceptions from the two are captured with the following handlers:</span></span>

* <span data-ttu-id="2f1e4-224">Configuração do [AiHandleErrorAttribute](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/Telemetry/AiHandleErrorAttribute.cs) [aqui](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/App_Start/FilterConfig.cs#L12) para controladores MVC5</span><span class="sxs-lookup"><span data-stu-id="2f1e4-224">[AiHandleErrorAttribute](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/Telemetry/AiHandleErrorAttribute.cs) set up [here](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/App_Start/FilterConfig.cs#L12) for MVC5 controllers</span></span>
* <span data-ttu-id="2f1e4-225">Configuração do [AiWebApiExceptionLogger](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/Telemetry/AiWebApiExceptionLogger.cs) [aqui](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/App_Start/WebApiConfig.cs#L25) para controladores da API Web 2</span><span class="sxs-lookup"><span data-stu-id="2f1e4-225">[AiWebApiExceptionLogger](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/Telemetry/AiWebApiExceptionLogger.cs) set up [here](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/App_Start/WebApiConfig.cs#L25) for Web API 2 controllers</span></span>

<span data-ttu-id="2f1e4-226">Para funções de trabalho, há duas maneiras de acompanhar exceções:</span><span class="sxs-lookup"><span data-stu-id="2f1e4-226">For worker roles, there are two ways to track exceptions:</span></span>

* <span data-ttu-id="2f1e4-227">TrackException(ex)</span><span class="sxs-lookup"><span data-stu-id="2f1e4-227">TrackException(ex)</span></span>
* <span data-ttu-id="2f1e4-228">Se você tiver adicionado o pacote NuGet do ouvinte de rastreamento do Application Insights, poderá usar **System.Diagnostics.Trace** para registrar as exceções.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-228">If you have added the Application Insights trace listener NuGet package, you can use **System.Diagnostics.Trace** to log exceptions.</span></span> [<span data-ttu-id="2f1e4-229">Exemplo de código.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-229">Code example.</span></span>](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/WorkerRoleA.cs#L107)

## <a name="performance-counters"></a><span data-ttu-id="2f1e4-230">Contadores de desempenho</span><span class="sxs-lookup"><span data-stu-id="2f1e4-230">Performance Counters</span></span>
<span data-ttu-id="2f1e4-231">Os seguintes contadores são coletados por padrão:</span><span class="sxs-lookup"><span data-stu-id="2f1e4-231">The following counters are collected by default:</span></span>

    * <span data-ttu-id="2f1e4-232">\Process(??APP_WIN32_PROC??)\% Tempo do Processador</span><span class="sxs-lookup"><span data-stu-id="2f1e4-232">\Process(??APP_WIN32_PROC??)\% Processor Time</span></span>
    * <span data-ttu-id="2f1e4-233">\Memória\Bytes Disponíveis</span><span class="sxs-lookup"><span data-stu-id="2f1e4-233">\Memory\Available Bytes</span></span>
    * <span data-ttu-id="2f1e4-234">\.Exceções NET CLR (?. APP_CLR_PROC?)\# de exceções lançadas / s</span><span class="sxs-lookup"><span data-stu-id="2f1e4-234">\.NET CLR Exceptions(??APP_CLR_PROC??)\# of Exceps Thrown / sec</span></span>
    * <span data-ttu-id="2f1e4-235">\Processo(??APP_WIN32_PROC??)\Bytes Privados</span><span class="sxs-lookup"><span data-stu-id="2f1e4-235">\Process(??APP_WIN32_PROC??)\Private Bytes</span></span>
    * <span data-ttu-id="2f1e4-236">\Processo(??APP_WIN32_PROC??)\Bytes de dados de ES/s</span><span class="sxs-lookup"><span data-stu-id="2f1e4-236">\Process(??APP_WIN32_PROC??)\IO Data Bytes/sec</span></span>
    * <span data-ttu-id="2f1e4-237">\Processador(_Total)\% Tempo do processador</span><span class="sxs-lookup"><span data-stu-id="2f1e4-237">\Processor(_Total)\% Processor Time</span></span>

<span data-ttu-id="2f1e4-238">Para funções web, esses contadores também são coletados:</span><span class="sxs-lookup"><span data-stu-id="2f1e4-238">For web roles, these counters are also collected:</span></span>

    * <span data-ttu-id="2f1e4-239">\Aplicativos ASP.NET(??APP_W3SVC_PROC??)\Solicitções/S</span><span class="sxs-lookup"><span data-stu-id="2f1e4-239">\ASP.NET Applications(??APP_W3SVC_PROC??)\Requests/Sec</span></span>
    * <span data-ttu-id="2f1e4-240">\Aplicativos ASP.NET (?. APP_W3SVC_PROC?)\Tempo de Execução de Solicitação</span><span class="sxs-lookup"><span data-stu-id="2f1e4-240">\ASP.NET Applications(??APP_W3SVC_PROC??)\Request Execution Time</span></span>
    * <span data-ttu-id="2f1e4-241">\Aplicativos ASP.NET (?. APP_W3SVC_PROC?)\Solicitações na Fila do Aplicativo</span><span class="sxs-lookup"><span data-stu-id="2f1e4-241">\ASP.NET Applications(??APP_W3SVC_PROC??)\Requests In Application Queue</span></span>

<span data-ttu-id="2f1e4-242">É possível especificar contadores de desempenho adicionais, personalizados ou do Windows editando ApplicationInsights.config, [como neste exemplo](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/ApplicationInsights.config#L14).</span><span class="sxs-lookup"><span data-stu-id="2f1e4-242">You can specify additional custom or other windows performance counters by editing ApplicationInsights.config [as in this example](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/ApplicationInsights.config#L14).</span></span>

  ![Contadores de desempenho](./media/app-insights-cloudservices/OLfMo2f.png)

## <a name="correlated-telemetry-for-worker-roles"></a><span data-ttu-id="2f1e4-244">Telemetria correlacionada para funções de trabalho</span><span class="sxs-lookup"><span data-stu-id="2f1e4-244">Correlated Telemetry for Worker Roles</span></span>
<span data-ttu-id="2f1e4-245">É uma experiência de diagnóstico avançada, quando você pode ver o que levou a uma solicitação com falha ou alta latência.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-245">It is a rich diagnostic experience, when you can see what led to a failed or high latency request.</span></span> <span data-ttu-id="2f1e4-246">Com as funções da web, o SDK automaticamente configura a correlação entre a telemetria relacionada.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-246">With web roles, the SDK automatically sets up correlation between related telemetry.</span></span> <span data-ttu-id="2f1e4-247">Para funções de trabalho, você pode usar um inicializador de telemetria personalizado para definir um atributo de contexto Operation.Id comum para todas as telemetrias para obter isso.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-247">For worker roles, you can use a custom telemetry initializer to set a common Operation.Id context attribute for all the telemetry to achieve this.</span></span> <span data-ttu-id="2f1e4-248">Isso permite ver se o problema de latência/falha foi causado devido a uma dependência ou ao código, rapidamente!</span><span class="sxs-lookup"><span data-stu-id="2f1e4-248">This allows you to see whether the latency/failure issue was caused due to a dependency or your code, at a glance!</span></span> 

<span data-ttu-id="2f1e4-249">Faça assim:</span><span class="sxs-lookup"><span data-stu-id="2f1e4-249">Here's how:</span></span>

* <span data-ttu-id="2f1e4-250">Defina a ID de correlação em uma CallContext conforme mostrado [aqui](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/WorkerRoleA.cs#L36).</span><span class="sxs-lookup"><span data-stu-id="2f1e4-250">Set the correlation Id into a CallContext as shown [here](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/WorkerRoleA.cs#L36).</span></span> <span data-ttu-id="2f1e4-251">Nesse caso, estamos usando a ID da solicitação como a id de correlação</span><span class="sxs-lookup"><span data-stu-id="2f1e4-251">In this case, we are using the Request ID as the correlation id</span></span>
* <span data-ttu-id="2f1e4-252">Adicione uma implementação personalizada de TelemetryInitializer, para definir a Operation.Id com o conjunto de correlationId acima.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-252">Add a custom TelemetryInitializer implementation, to set the Operation.Id to the correlationId set above.</span></span> <span data-ttu-id="2f1e4-253">Há um exemplo aqui: [ItemCorrelationTelemetryInitializer](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/Telemetry/ItemCorrelationTelemetryInitializer.cs#L13)</span><span class="sxs-lookup"><span data-stu-id="2f1e4-253">There's an example here: [ItemCorrelationTelemetryInitializer](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/Telemetry/ItemCorrelationTelemetryInitializer.cs#L13)</span></span>
* <span data-ttu-id="2f1e4-254">Adicione o inicializador de telemetria personalizado.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-254">Add the custom telemetry initializer.</span></span> <span data-ttu-id="2f1e4-255">Você pode fazer isso no arquivo ApplicationInsights.config ou no código conforme mostrado [aqui](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/WorkerRoleA.cs#L233)</span><span class="sxs-lookup"><span data-stu-id="2f1e4-255">You could do that in the ApplicationInsights.config file, or in code as shown [here](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/WorkerRoleA.cs#L233)</span></span>

<span data-ttu-id="2f1e4-256">É isso!</span><span class="sxs-lookup"><span data-stu-id="2f1e4-256">That's it!</span></span> <span data-ttu-id="2f1e4-257">A experiência do portal já está conectada para ajudá-lo a ver todas as telemetrias associadas rapidamente:</span><span class="sxs-lookup"><span data-stu-id="2f1e4-257">The portal experience is already wired up to help you see all associated telemetry at a glance:</span></span>

![Telemetria correlacionada](./media/app-insights-cloudservices/bHxuUhd.png)

## <a name="client-telemetry"></a><span data-ttu-id="2f1e4-259">Telemetria do cliente</span><span class="sxs-lookup"><span data-stu-id="2f1e4-259">Client telemetry</span></span>
<span data-ttu-id="2f1e4-260">[Adicione o SDK do JavaScript a suas páginas da Web][client] para obter a telemetria baseada em navegador, como contagens de exibição de página, tempos de carregamento de página, exceções de script e para permitir que você escreva telemetria personalizada em seus scripts de página.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-260">[Add the JavaScript SDK to your web pages][client] to get browser-based telemetry such as page view counts, page load times, script exceptions, and to let you write custom telemetry in your page scripts.</span></span>

## <a name="availability-tests"></a><span data-ttu-id="2f1e4-261">Testes de disponibilidade</span><span class="sxs-lookup"><span data-stu-id="2f1e4-261">Availability tests</span></span>
<span data-ttu-id="2f1e4-262">[Configure os testes da Web][availability] para certificar-se de manter seu aplicativo operante e responsivo.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-262">[Set up web tests][availability] to make sure your application stays live and responsive.</span></span>

## <a name="display-everything-together"></a><span data-ttu-id="2f1e4-263">Exibir tudo juntos</span><span class="sxs-lookup"><span data-stu-id="2f1e4-263">Display everything together</span></span>
<span data-ttu-id="2f1e4-264">Para obter uma visão geral do sistema, você pode agrupar os gráficos de monitoramento da chave em um [painel](app-insights-dashboards.md).</span><span class="sxs-lookup"><span data-stu-id="2f1e4-264">To get an overall picture of your system, you can bring the key monitoring charts together on one [dashboard](app-insights-dashboards.md).</span></span> <span data-ttu-id="2f1e4-265">Por exemplo, você pode fixar as contagens de solicitação e de falha de cada função.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-265">For example, you could pin the request and failure counts of each role.</span></span> 

<span data-ttu-id="2f1e4-266">Se o sistema usa outros serviços do Azure, como o Stream Analytics, inclua seus gráficos de monitoramento também.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-266">If your system uses other Azure services such as Stream Analytics, include their monitoring charts as well.</span></span> 

<span data-ttu-id="2f1e4-267">Se você tiver um aplicativo de cliente móvel, insira um código para enviar eventos personalizados sobre operações de chave de usuário e crie uma [ponte HockeyApp](app-insights-hockeyapp-bridge-app.md).</span><span class="sxs-lookup"><span data-stu-id="2f1e4-267">If you have a client mobile app, insert some code to send custom events on key user operations, and create a [HockeyApp bridge](app-insights-hockeyapp-bridge-app.md).</span></span> <span data-ttu-id="2f1e4-268">Crie consultas no [Analytics](app-insights-analytics.md) para exibir a contagem de eventos e fixe-os ao painel.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-268">Create queries in [Analytics](app-insights-analytics.md) to display the event counts, and pin them to the dashboard.</span></span>

## <a name="example"></a><span data-ttu-id="2f1e4-269">Exemplo</span><span class="sxs-lookup"><span data-stu-id="2f1e4-269">Example</span></span>
<span data-ttu-id="2f1e4-270">[O exemplo](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService) monitora um serviço que tem uma função web e duas funções de trabalho.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-270">[The example](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService) monitors a service that has a web role and two worker roles.</span></span>

## <a name="exception-method-not-found-on-running-in-azure-cloud-services"></a><span data-ttu-id="2f1e4-271">Exceção "método não encontrado" em execução nos Serviços de Nuvem do Azure</span><span class="sxs-lookup"><span data-stu-id="2f1e4-271">Exception "method not found" on running in Azure Cloud Services</span></span>
<span data-ttu-id="2f1e4-272">Você compilou para .NET 4.6?</span><span class="sxs-lookup"><span data-stu-id="2f1e4-272">Did you build for .NET 4.6?</span></span> <span data-ttu-id="2f1e4-273">O 4.6 não tem suporte automático nas funções dos Serviços de Nuvem do Azure.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-273">4.6 is not automatically supported in Azure Cloud Services roles.</span></span> <span data-ttu-id="2f1e4-274">[Instale o 4.6 em cada função](../cloud-services/cloud-services-dotnet-install-dotnet.md) antes de executar seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="2f1e4-274">[Install 4.6 on each role](../cloud-services/cloud-services-dotnet-install-dotnet.md) before running your app.</span></span>

## <a name="video"></a><span data-ttu-id="2f1e4-275">Vídeo</span><span class="sxs-lookup"><span data-stu-id="2f1e4-275">Video</span></span>

> [!VIDEO https://channel9.msdn.com/events/Connect/2016/100/player]

## <a name="next-steps"></a><span data-ttu-id="2f1e4-276">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="2f1e4-276">Next steps</span></span>
* [<span data-ttu-id="2f1e4-277">Configurar o envio dos Diagnósticos do Azure ao Application Insights</span><span class="sxs-lookup"><span data-stu-id="2f1e4-277">Configure sending Azure Diagnostics to Application Insights</span></span>](app-insights-azure-diagnostics.md)
* [<span data-ttu-id="2f1e4-278">Automatizar a criação de recursos do Application Insights</span><span class="sxs-lookup"><span data-stu-id="2f1e4-278">Automate creation of Application Insights resources</span></span>](app-insights-powershell.md)
* [<span data-ttu-id="2f1e4-279">Automatizar o diagnóstico do Azure</span><span class="sxs-lookup"><span data-stu-id="2f1e4-279">Automate Azure diagnostics</span></span>](app-insights-powershell-azure-diagnostics.md)
* [<span data-ttu-id="2f1e4-280">Funções do Azure</span><span class="sxs-lookup"><span data-stu-id="2f1e4-280">Azure Functions</span></span>](https://github.com/christopheranderson/azure-functions-app-insights-sample)

[api]: app-insights-api-custom-events-metrics.md
[availability]: app-insights-monitor-web-app-availability.md
[azure]: app-insights-azure.md
[client]: app-insights-javascript.md
[diagnostic]: app-insights-diagnostic-search.md
[netlogs]: app-insights-asp-net-trace-logs.md
[portal]: http://portal.azure.com/
[qna]: app-insights-troubleshoot-faq.md
[redfield]: app-insights-monitor-performance-live-website-now.md
[start]: app-insights-overview.md 
