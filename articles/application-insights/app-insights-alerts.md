---
title: Definir alertas no Azure Application Insights | Microsoft Docs
description: "Seja notificado sobre os tempos de resposta lentos, as exceções e outras alterações de desempenho ou de uso em seu aplicativo Web."
services: application-insights
documentationcenter: 
author: CFreemanwa
manager: carmonm
ms.assetid: f8ebde72-f819-4ba5-afa2-31dbd49509a5
ms.service: application-insights
ms.workload: tbd
ms.tgt_pltfrm: ibiza
ms.devlang: na
ms.topic: article
ms.date: 03/14/2017
ms.author: bwren
ms.openlocfilehash: c8386ffc5d68260eeb75edf7efb77db1163dcef8
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/18/2017
---
# <a name="set-alerts-in-application-insights"></a><span data-ttu-id="bff0e-103">Definir alertas no Application Insights</span><span class="sxs-lookup"><span data-stu-id="bff0e-103">Set Alerts in Application Insights</span></span>
<span data-ttu-id="bff0e-104">O [Azure Application Insights][start] pode alertá-lo sobre as alterações nas métricas de desempenho ou de uso do aplicativo Web.</span><span class="sxs-lookup"><span data-stu-id="bff0e-104">[Azure Application Insights][start] can alert you to changes in performance or usage metrics in your web app.</span></span> 

<span data-ttu-id="bff0e-105">O Application Insights monitora o aplicativo ativo em um [ampla variedade de plataformas][platforms] para ajudá-lo a diagnosticar problemas de desempenho e compreender os padrões de uso.</span><span class="sxs-lookup"><span data-stu-id="bff0e-105">Application Insights monitors your live app on a [wide variety of platforms][platforms] to help you diagnose performance issues and understand usage patterns.</span></span>

<span data-ttu-id="bff0e-106">Há três tipos de alerta:</span><span class="sxs-lookup"><span data-stu-id="bff0e-106">There are three kinds of alerts:</span></span>

* <span data-ttu-id="bff0e-107">Os **alertas de métrica** informam quando uma métrica ultrapassa um valor limite durante determinado período – como tempos de resposta, contagens de exceção, uso da CPU ou exibições de página.</span><span class="sxs-lookup"><span data-stu-id="bff0e-107">**Metric alerts** tell you when a metric crosses a threshold value for some period - such as response times, exception counts, CPU usage, or page views.</span></span> 
* <span data-ttu-id="bff0e-108">Os [**testes da Web**][availability] informam quando site está indisponível na Internet ou está respondendo com lentidão.</span><span class="sxs-lookup"><span data-stu-id="bff0e-108">[**Web tests**][availability] tell you when your site is unavailable on the internet, or responding slowly.</span></span> <span data-ttu-id="bff0e-109">[Saiba mais][availability].</span><span class="sxs-lookup"><span data-stu-id="bff0e-109">[Learn more][availability].</span></span>
* <span data-ttu-id="bff0e-110">Os [**diagnósticos proativos**](app-insights-proactive-diagnostics.md) são configurados automaticamente para notificar você sobre padrões de desempenho incomuns.</span><span class="sxs-lookup"><span data-stu-id="bff0e-110">[**Proactive diagnostics**](app-insights-proactive-diagnostics.md) are configured automatically to notify you about unusual performance patterns.</span></span>

<span data-ttu-id="bff0e-111">Vamos nos concentrar nos alertas de métricas deste artigo.</span><span class="sxs-lookup"><span data-stu-id="bff0e-111">We focus on metric alerts in this article.</span></span>

## <a name="set-a-metric-alert"></a><span data-ttu-id="bff0e-112">Definir um alerta de Métrica</span><span class="sxs-lookup"><span data-stu-id="bff0e-112">Set a Metric alert</span></span>
<span data-ttu-id="bff0e-113">Abra a folha Regras de alerta e, em seguida, use o botão adicionar.</span><span class="sxs-lookup"><span data-stu-id="bff0e-113">Open the Alert rules blade, and then use the add button.</span></span> 

![Na folha das Regras de alerta, escolha Adicionar Alerta.](./media/app-insights-alerts/01-set-metric.png)

* <span data-ttu-id="bff0e-116">Defina o recurso antes de outras propriedades.</span><span class="sxs-lookup"><span data-stu-id="bff0e-116">Set the resource before the other properties.</span></span> <span data-ttu-id="bff0e-117">**Escolha o recurso "(componentes)"** se desejar definir alertas em métricas de desempenho ou de uso.</span><span class="sxs-lookup"><span data-stu-id="bff0e-117">**Choose the "(components)" resource** if you want to set alerts on performance or usage metrics.</span></span>
* <span data-ttu-id="bff0e-118">O nome dado ao alerta deve ser exclusivo dentro do grupo de recursos (não apenas no seu aplicativo).</span><span class="sxs-lookup"><span data-stu-id="bff0e-118">The name that you give to the alert must be unique within the resource group (not just your application).</span></span>
* <span data-ttu-id="bff0e-119">Observe as unidades quando você for solicitado para inserir o valor de limite.</span><span class="sxs-lookup"><span data-stu-id="bff0e-119">Be careful to note the units in which you're asked to enter the threshold value.</span></span>
* <span data-ttu-id="bff0e-120">Se você marcar a caixa “Proprietários de email...”, os alertas serão enviados por email para qualquer pessoa que tenha acesso a esse grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="bff0e-120">If you check the box "Email owners...", alerts are sent by email to everyone who has access to this resource group.</span></span> <span data-ttu-id="bff0e-121">Para expandir esse grupo de pessoas, adicione-as à [assinatura ou grupo de recursos](app-insights-resources-roles-access-control.md) (não o recurso).</span><span class="sxs-lookup"><span data-stu-id="bff0e-121">To expand this set of people, add them to the [resource group or subscription](app-insights-resources-roles-access-control.md) (not the resource).</span></span>
* <span data-ttu-id="bff0e-122">Se você especificar “Emails adicionais”, os alertas serão enviados aos indivíduos ou grupos (sem levar em conta se a caixa “proprietários de email...” foi marcada ou não).</span><span class="sxs-lookup"><span data-stu-id="bff0e-122">If you specify "Additional emails", alerts are sent to those individuals or groups (whether or not you checked the "email owners..." box).</span></span> 
* <span data-ttu-id="bff0e-123">Defina um [endereço de webhook](../monitoring-and-diagnostics/insights-webhooks-alerts.md) se tiver configurado um aplicativo Web que responda aos alertas.</span><span class="sxs-lookup"><span data-stu-id="bff0e-123">Set a [webhook address](../monitoring-and-diagnostics/insights-webhooks-alerts.md) if you have set up a web app that responds to alerts.</span></span> <span data-ttu-id="bff0e-124">Ele é chamado quando o alerta é ativado e quando ele está resolvido.</span><span class="sxs-lookup"><span data-stu-id="bff0e-124">It is called both when the alert is Activated and when it is Resolved.</span></span> <span data-ttu-id="bff0e-125">(Mas observe que, no momento, os parâmetros de consulta não são passados como propriedades de webhook)</span><span class="sxs-lookup"><span data-stu-id="bff0e-125">(But note that at present, query parameters are not passed through as webhook properties.)</span></span>
* <span data-ttu-id="bff0e-126">É possível Desabilitar ou Habilitar o alerta: veja os botões na parte superior da folha.</span><span class="sxs-lookup"><span data-stu-id="bff0e-126">You can Disable or Enable the alert: see the buttons at the top of the blade.</span></span>

<span data-ttu-id="bff0e-127">*Não vejo o botão Adicionar Alerta.*</span><span class="sxs-lookup"><span data-stu-id="bff0e-127">*I don't see the Add Alert button.*</span></span> 

* <span data-ttu-id="bff0e-128">Você está usando uma conta organizacional?</span><span class="sxs-lookup"><span data-stu-id="bff0e-128">Are you using an organizational account?</span></span> <span data-ttu-id="bff0e-129">Você poderá definir alertas se tiver acesso de proprietário ou colaborador a esse recurso de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="bff0e-129">You can set alerts if you have owner or contributor access to this application resource.</span></span> <span data-ttu-id="bff0e-130">Vejamos a folha Controle de Acesso.</span><span class="sxs-lookup"><span data-stu-id="bff0e-130">Take a look at the Access Control blade.</span></span> <span data-ttu-id="bff0e-131">[Saiba mais sobre o controle de acesso][roles].</span><span class="sxs-lookup"><span data-stu-id="bff0e-131">[Learn about access control][roles].</span></span>

> [!NOTE]
> <span data-ttu-id="bff0e-132">Na folha de alertas, você vê que já existe uma configuração de alerta: [Proactive Diagnostics](app-insights-proactive-failure-diagnostics.md).</span><span class="sxs-lookup"><span data-stu-id="bff0e-132">In the alerts blade, you see that there's already an alert set up: [Proactive Diagnostics](app-insights-proactive-failure-diagnostics.md).</span></span> <span data-ttu-id="bff0e-133">O alerta automático monitora uma métrica específica, taxa de falha de solicitação.</span><span class="sxs-lookup"><span data-stu-id="bff0e-133">The automatic alert monitors one particular metric, request failure rate.</span></span> <span data-ttu-id="bff0e-134">A menos que você opte por desabilitar o alerta proativo, não precisa definir seu próprio alerta na taxa de falha de solicitação.</span><span class="sxs-lookup"><span data-stu-id="bff0e-134">Unless you decide to disable the proactive alert, you don't need to set your own alert on request failure rate.</span></span> 
> 
> 

## <a name="see-your-alerts"></a><span data-ttu-id="bff0e-135">Ver seus alertas</span><span class="sxs-lookup"><span data-stu-id="bff0e-135">See your alerts</span></span>
<span data-ttu-id="bff0e-136">Você recebe um email quando o estado de um alerta é mudado de inativo para ativo.</span><span class="sxs-lookup"><span data-stu-id="bff0e-136">You get an email when an alert changes state between inactive and active.</span></span> 

<span data-ttu-id="bff0e-137">O estado atual de cada alerta é mostrado na folha de regras de Alerta.</span><span class="sxs-lookup"><span data-stu-id="bff0e-137">The current state of each alert is shown in the Alert rules blade.</span></span>

<span data-ttu-id="bff0e-138">Há um resumo da atividade recente no menu suspenso de alertas:</span><span class="sxs-lookup"><span data-stu-id="bff0e-138">There's a summary of recent activity in the alerts drop-down:</span></span>

![Lista suspensa Alertas](./media/app-insights-alerts/010-alert-drop.png)

<span data-ttu-id="bff0e-140">O histórico das alterações de estado está no Log de Atividades:</span><span class="sxs-lookup"><span data-stu-id="bff0e-140">The history of state changes is in the Activity Log:</span></span>

![Na folha Visão geral, clique em Configurações, Logs de Auditoria](./media/app-insights-alerts/09-alerts.png)

## <a name="how-alerts-work"></a><span data-ttu-id="bff0e-142">Como funcionam os alertas</span><span class="sxs-lookup"><span data-stu-id="bff0e-142">How alerts work</span></span>
* <span data-ttu-id="bff0e-143">Um alerta tem três estados: “Nunca ativado”, “Ativado” e “Resolvido”.</span><span class="sxs-lookup"><span data-stu-id="bff0e-143">An alert has three states: "Never activated", "Activated", and "Resolved."</span></span> <span data-ttu-id="bff0e-144">Ativado significa que a condição especificada era true, quando ela foi avaliada pela última vez.</span><span class="sxs-lookup"><span data-stu-id="bff0e-144">Activated means the condition you specified was true, when it was last evaluated.</span></span>
* <span data-ttu-id="bff0e-145">Uma notificação é gerada quando um alerta muda de estado.</span><span class="sxs-lookup"><span data-stu-id="bff0e-145">A notification is generated when an alert changes state.</span></span> <span data-ttu-id="bff0e-146">(Se a condição do alerta já era true quando o alerta foi criado, talvez você não receba uma notificação até que a condição mude para false.)</span><span class="sxs-lookup"><span data-stu-id="bff0e-146">(If the alert condition was already true when you created the alert, you might not get a notification until the condition goes false.)</span></span>
* <span data-ttu-id="bff0e-147">Cada notificação gerará um email caso tenha marcado a caixa de emails ou fornecido endereços de email.</span><span class="sxs-lookup"><span data-stu-id="bff0e-147">Each notification generates an email if you checked the emails box, or provided email addresses.</span></span> <span data-ttu-id="bff0e-148">Também é possível examinar a lista suspensa Notificações.</span><span class="sxs-lookup"><span data-stu-id="bff0e-148">You can also look at the Notifications drop-down list.</span></span>
* <span data-ttu-id="bff0e-149">Um alerta é avaliado toda vez que uma métrica chega, mas não o contrário.</span><span class="sxs-lookup"><span data-stu-id="bff0e-149">An alert is evaluated each time a metric arrives, but not otherwise.</span></span>
* <span data-ttu-id="bff0e-150">A avaliação agrega a métrica ao longo do período anterior e a compara com o limite para determinar o novo estado.</span><span class="sxs-lookup"><span data-stu-id="bff0e-150">The evaluation aggregates the metric over the preceding period, and then compares it to the threshold to determine the new state.</span></span>
* <span data-ttu-id="bff0e-151">O período que você escolhe especifica o intervalo durante o qual as métricas são agregadas.</span><span class="sxs-lookup"><span data-stu-id="bff0e-151">The period that you choose specifies the interval over which metrics are aggregated.</span></span> <span data-ttu-id="bff0e-152">Ele não afeta a frequência com que o alerta é avaliado: isto depende da frequência da chegada das métricas.</span><span class="sxs-lookup"><span data-stu-id="bff0e-152">It doesn't affect how often the alert is evaluated: that depends on the frequency of arrival of metrics.</span></span>
* <span data-ttu-id="bff0e-153">Se nenhum dado chegar para uma determinada métrica por algum tempo, a lacuna tem efeitos diferentes sobre a avaliação do alerta e sobre os gráficos no Metrics Explorer.</span><span class="sxs-lookup"><span data-stu-id="bff0e-153">If no data arrives for a particular metric for some time, the gap has different effects on alert evaluation and on the charts in metric explorer.</span></span> <span data-ttu-id="bff0e-154">No Metrics Explorer, se nenhum dado for visto por mais tempo do que o intervalo de amostragem do gráfico, o gráfico mostrará um valor 0.</span><span class="sxs-lookup"><span data-stu-id="bff0e-154">In metric explorer, if no data is seen for longer than the chart's sampling interval, the chart shows a value of 0.</span></span> <span data-ttu-id="bff0e-155">Mas um alerta com base na mesma métrica não é avaliado novamente e o estado do alerta permanece inalterado.</span><span class="sxs-lookup"><span data-stu-id="bff0e-155">But an alert based on the same metric is not be reevaluated, and the alert's state remains unchanged.</span></span> 
  
    <span data-ttu-id="bff0e-156">Quando os dados chegam, o gráfico volta para um valor diferente de zero.</span><span class="sxs-lookup"><span data-stu-id="bff0e-156">When data eventually arrives, the chart jumps back to a non-zero value.</span></span> <span data-ttu-id="bff0e-157">O alerta é avaliado com base nos dados disponíveis para o período especificado.</span><span class="sxs-lookup"><span data-stu-id="bff0e-157">The alert evaluates based on the data available for the period you specified.</span></span> <span data-ttu-id="bff0e-158">Se o novo ponto de dados for o único disponível no período, a agregação se baseará apenas nisso.</span><span class="sxs-lookup"><span data-stu-id="bff0e-158">If the new data point is the only one available in the period, the aggregate is based just on that data point.</span></span>
* <span data-ttu-id="bff0e-159">Um alerta pode piscar frequentemente entre os estados de alerta e íntegro, mesmo que você defina um longo período.</span><span class="sxs-lookup"><span data-stu-id="bff0e-159">An alert can flicker frequently between alert and healthy states, even if you set a long period.</span></span> <span data-ttu-id="bff0e-160">Isso pode acontecer se o valor da métrica estiver em torno do limite.</span><span class="sxs-lookup"><span data-stu-id="bff0e-160">This can happen if the metric value hovers around the threshold.</span></span> <span data-ttu-id="bff0e-161">Não há nenhuma histerese no limite: a transição para o alerta acontece com o mesmo valor que a transição para o estado íntegro.</span><span class="sxs-lookup"><span data-stu-id="bff0e-161">There is no hysteresis in the threshold: the transition to alert happens at the same value as the transition to healthy.</span></span>

## <a name="what-are-good-alerts-to-set"></a><span data-ttu-id="bff0e-162">Quais são alguns alertas que é recomendável definir?</span><span class="sxs-lookup"><span data-stu-id="bff0e-162">What are good alerts to set?</span></span>
<span data-ttu-id="bff0e-163">Depende de seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="bff0e-163">It depends on your application.</span></span> <span data-ttu-id="bff0e-164">Para começar, é melhor não definir um número excessivo de métricas.</span><span class="sxs-lookup"><span data-stu-id="bff0e-164">To start with, it's best not to set too many metrics.</span></span> <span data-ttu-id="bff0e-165">Passe algum tempo examinando seus gráficos de métricas enquanto seu aplicativo está em execução para ter uma noção de como ele se comporta normalmente.</span><span class="sxs-lookup"><span data-stu-id="bff0e-165">Spend some time looking at your metric charts while your app is running, to get a feel for how it behaves normally.</span></span> <span data-ttu-id="bff0e-166">Esta prática ajuda a encontrar maneiras de melhorar o desempenho.</span><span class="sxs-lookup"><span data-stu-id="bff0e-166">This practice helps you find ways to improve its performance.</span></span> <span data-ttu-id="bff0e-167">Em seguida, configure alertas para informá-lo quando as métricas estiverem fora da zona normal.</span><span class="sxs-lookup"><span data-stu-id="bff0e-167">Then set up alerts to tell you when the metrics go outside the normal zone.</span></span> 

<span data-ttu-id="bff0e-168">Alguns alertas populares são:</span><span class="sxs-lookup"><span data-stu-id="bff0e-168">Popular alerts include:</span></span>

* <span data-ttu-id="bff0e-169">[Métricas de navegador][client], especificamente, **tempos de carregamento de página** do navegador, são adequados para aplicativos Web.</span><span class="sxs-lookup"><span data-stu-id="bff0e-169">[Browser metrics][client], especially Browser **page load times**, are good for web applications.</span></span> <span data-ttu-id="bff0e-170">Se a página tem muitos scripts, você deve procurar **exceções de navegador**.</span><span class="sxs-lookup"><span data-stu-id="bff0e-170">If your page has many scripts, you should look for **browser exceptions**.</span></span> <span data-ttu-id="bff0e-171">Para obter essas métricas e esses alertas, você precisa configurar o [monitoramento de página da Web][client].</span><span class="sxs-lookup"><span data-stu-id="bff0e-171">In order to get these metrics and alerts, you have to set up [web page monitoring][client].</span></span>
* <span data-ttu-id="bff0e-172">**Tempo de resposta do servidor** para o lado do servidor de aplicativos Web.</span><span class="sxs-lookup"><span data-stu-id="bff0e-172">**Server response time** for the server side of web applications.</span></span> <span data-ttu-id="bff0e-173">Além de configurar alertas, confira essa métrica para ver se ela varia de forma desproporcional com altas taxas de solicitação: a variação pode indicar que seu aplicativo está ficando sem recursos.</span><span class="sxs-lookup"><span data-stu-id="bff0e-173">As well as setting up alerts, keep an eye on this metric to see if it varies disproportionately with high request rates: variation might indicate that your app is running out of resources.</span></span> 
* <span data-ttu-id="bff0e-174">**Exceções de servidor** - para vê-las, você precisa fazer algumas [configurações adicionais](app-insights-asp-net-exceptions.md).</span><span class="sxs-lookup"><span data-stu-id="bff0e-174">**Server exceptions** - to see them, you have to do some [additional setup](app-insights-asp-net-exceptions.md).</span></span>

<span data-ttu-id="bff0e-175">Não se esqueça de que [diagnósticos de taxa de falha proativos](app-insights-proactive-failure-diagnostics.md) monitoram automaticamente a taxa em que seu aplicativo responde às solicitações com códigos de falha.</span><span class="sxs-lookup"><span data-stu-id="bff0e-175">Don't forget that [proactive failure rate diagnostics](app-insights-proactive-failure-diagnostics.md) automatically monitor the rate at which your app responds to requests with failure codes.</span></span> 

## <a name="automation"></a><span data-ttu-id="bff0e-176">Automação</span><span class="sxs-lookup"><span data-stu-id="bff0e-176">Automation</span></span>
* [<span data-ttu-id="bff0e-177">Usar o PowerShell para automatizar a configuração de alertas</span><span class="sxs-lookup"><span data-stu-id="bff0e-177">Use PowerShell to automate setting up alerts</span></span>](app-insights-powershell-alerts.md)
* [<span data-ttu-id="bff0e-178">Usar webhooks para automatizar a resposta a alertas</span><span class="sxs-lookup"><span data-stu-id="bff0e-178">Use webhooks to automate responding to alerts</span></span>](../monitoring-and-diagnostics/insights-webhooks-alerts.md)

## <a name="video"></a><span data-ttu-id="bff0e-179">Vídeo</span><span class="sxs-lookup"><span data-stu-id="bff0e-179">Video</span></span>

> [!VIDEO https://channel9.msdn.com/events/Connect/2016/112/player]

## <a name="see-also"></a><span data-ttu-id="bff0e-180">Consulte também</span><span class="sxs-lookup"><span data-stu-id="bff0e-180">See also</span></span>
* [<span data-ttu-id="bff0e-181">Testes de disponibilidade na Web</span><span class="sxs-lookup"><span data-stu-id="bff0e-181">Availability web tests</span></span>](app-insights-monitor-web-app-availability.md)
* [<span data-ttu-id="bff0e-182">Automatizar a configuração de alertas</span><span class="sxs-lookup"><span data-stu-id="bff0e-182">Automate setting up alerts</span></span>](app-insights-powershell-alerts.md)
* [<span data-ttu-id="bff0e-183">Diagnóstico proativo</span><span class="sxs-lookup"><span data-stu-id="bff0e-183">Proactive diagnostics</span></span>](app-insights-proactive-diagnostics.md) 

<!--Link references-->

[availability]: app-insights-monitor-web-app-availability.md
[client]: app-insights-javascript.md
[platforms]: app-insights-platforms.md
[roles]: app-insights-resources-roles-access-control.md
[start]: app-insights-overview.md

