---
title: "aaaConfiguring diagnóstico para os serviços de nuvem do Azure e máquinas virtuais | Microsoft Docs"
description: "Descreve como tooconfigure informações de diagnóstico para depurar os serviços de nuvem do Azure e máquinas virtuais (VMs) no Visual Studio."
services: visual-studio-online
documentationcenter: na
author: kraigb
manager: ghogen
editor: 
ms.assetid: e70cd7b4-6298-43aa-adea-6fd618414c26
ms.service: multiple
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: multiple
ms.date: 11/11/2016
ms.author: kraigb
ms.openlocfilehash: 74cdf49413d6d89a84195070dd9d817da2463373
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="configuring-diagnostics-for-azure-cloud-services-and-virtual-machines"></a><span data-ttu-id="bcf7f-103">Configurando o diagnóstico para os serviços de nuvem do Azure e máquinas virtuais</span><span class="sxs-lookup"><span data-stu-id="bcf7f-103">Configuring Diagnostics for Azure Cloud Services and Virtual Machines</span></span>
<span data-ttu-id="bcf7f-104">Quando você precisar tootroubleshoot um serviço de nuvem do Azure ou a máquina virtual do Azure, você pode configurar o diagnóstico do Azure mais facilmente usando o Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-104">When you need tootroubleshoot an Azure cloud service or Azure virtual machine, you can configure Azure diagnostics more easily by using Visual Studio.</span></span> <span data-ttu-id="bcf7f-105">Diagnóstico do Azure captura dados de sistema e dados de log em instâncias de máquina virtual que executam o serviço de nuvem e máquinas virtuais de saudação e transfere dados em uma conta de armazenamento de sua escolha.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-105">Azure diagnostics captures system data and logging data on hello virtual machines and virtual machine instances that run your cloud service and transfers that data into a storage account of your choice.</span></span> <span data-ttu-id="bcf7f-106">Consulte [Habilitar o registro em log de diagnóstico para aplicativos Web no Serviço de Aplicativo do Azure](app-service-web/web-sites-enable-diagnostic-log.md) para obter mais informações sobre o registro em log de diagnóstico no Azure.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-106">See [Enable diagnostics logging for web apps in Azure App Service](app-service-web/web-sites-enable-diagnostic-log.md) for more information about diagnostics logging in Azure.</span></span>

<span data-ttu-id="bcf7f-107">Este tópico mostra como tooenable e configurar o diagnóstico do Azure no Visual Studio, antes e após a implantação, bem como em máquinas virtuais do Azure.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-107">This topic shows you how tooenable and configure Azure diagnostics in Visual Studio, both before and after deployment, as well as in Azure virtual machines.</span></span> <span data-ttu-id="bcf7f-108">Ele também mostra como tipos de saudação do tooselect de toocollect de informações de diagnóstico e como tooview Olá as informações depois dele.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-108">It also shows you how tooselect hello types of diagnostics information toocollect and how tooview hello information after it's collected.</span></span>

<span data-ttu-id="bcf7f-109">Você pode configurar o diagnóstico do Azure no hello maneiras a seguir:</span><span class="sxs-lookup"><span data-stu-id="bcf7f-109">You can configure Azure Diagnostics in hello following ways:</span></span>

* <span data-ttu-id="bcf7f-110">Você pode alterar as configurações de diagnóstico por meio de saudação **configuração de diagnóstico** caixa de diálogo no Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-110">You can change diagnostics configuration settings through hello **Diagnostics Configuration** dialog box in Visual Studio.</span></span> <span data-ttu-id="bcf7f-111">Olá configurações são salvas em um arquivo chamado wadcfgx (wadcfg no SDK do Azure 2.4 ou anterior).</span><span class="sxs-lookup"><span data-stu-id="bcf7f-111">hello settings are saved in a file called diagnostics.wadcfgx (diagnostics.wadcfg in Azure SDK 2.4 or earlier).</span></span> <span data-ttu-id="bcf7f-112">Como alternativa, você pode modificar diretamente o arquivo de configuração de saudação.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-112">Alternatively, you can directly modify hello configuration file.</span></span> <span data-ttu-id="bcf7f-113">Se você atualizar manualmente o arquivo hello, alterações de configuração de saudação levará Olá efeito próxima vez que você implantar Olá tooAzure de serviço de nuvem ou serviço Olá execução no emulador de saudação.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-113">If you manually update hello file, hello configuration changes will take effect hello next time you deploy hello cloud service tooAzure or run hello service in hello emulator.</span></span>
* <span data-ttu-id="bcf7f-114">Use **Cloud Explorer** ou **Server Explorer** nas configurações de diagnóstico do Visual Studio toochange Olá para um serviço de nuvem em execução ou a máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-114">Use **Cloud Explorer** or **Server Explorer** in Visual Studio toochange hello diagnostics settings for a running cloud service or virtual machine.</span></span>

## <a name="azure-26-diagnostics-changes"></a><span data-ttu-id="bcf7f-115">Alterações de diagnóstico do Azure 2.6</span><span class="sxs-lookup"><span data-stu-id="bcf7f-115">Azure 2.6 diagnostics changes</span></span>
<span data-ttu-id="bcf7f-116">Para projetos de SDK 2.6 do Azure no Visual Studio, Olá as seguintes alterações foram feita.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-116">For Azure SDK 2.6 projects in Visual Studio, hello following changes were made.</span></span> <span data-ttu-id="bcf7f-117">(Essas alterações também se aplicam a versões toolater do SDK do Azure.)</span><span class="sxs-lookup"><span data-stu-id="bcf7f-117">(These changes also apply toolater versions of Azure SDK.)</span></span>

* <span data-ttu-id="bcf7f-118">emulador local Olá agora dá suporte a diagnóstico.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-118">hello local emulator now supports diagnostics.</span></span> <span data-ttu-id="bcf7f-119">Isso significa que você pode coletar dados de diagnóstico e certifique-se de que seu aplicativo está criando Olá rastreamentos direito enquanto você estiver desenvolvendo e testando no Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-119">This means you can collect diagnostics data and ensure your application is creating hello right traces while you're developing and testing in Visual Studio.</span></span> <span data-ttu-id="bcf7f-120">Olá a cadeia de caracteres de conexão `UseDevelopmentStorage=true` habilita a coleta de dados de diagnóstico durante a execução do seu projeto de serviço de nuvem no Visual Studio usando o emulador de armazenamento do Azure hello.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-120">hello connection string `UseDevelopmentStorage=true` enables diagnostics data collection while you're running your cloud service project in Visual Studio by using hello Azure storage emulator.</span></span> <span data-ttu-id="bcf7f-121">Todos os dados de diagnóstico são coletados na conta de armazenamento da saudação (armazenamento de desenvolvimento).</span><span class="sxs-lookup"><span data-stu-id="bcf7f-121">All diagnostics data is collected in hello (Development Storage) storage account.</span></span>
* <span data-ttu-id="bcf7f-122">cadeia de conexão de conta para armazenamento de diagnóstico Hello (windowsazure) é armazenada novamente no arquivo de configuração (. cscfg) do serviço de saudação.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-122">hello diagnostics storage account connection string (Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString) is stored once again in hello service configuration (.cscfg) file.</span></span> <span data-ttu-id="bcf7f-123">No Azure SDK 2.5 conta de armazenamento de diagnóstico Olá foi especificada no arquivo de wadcfgx de saudação.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-123">In Azure SDK 2.5 hello diagnostics storage account was specified in hello diagnostics.wadcfgx file.</span></span>

<span data-ttu-id="bcf7f-124">Há algumas diferenças importantes entre como cadeia de caracteres de conexão Olá funcionou no SDK do Azure 2.4 e anterior e como ele funciona no Azure SDK 2.6 e posterior.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-124">There are some notable differences between how hello connection string worked in Azure SDK 2.4 and earlier and how it works in Azure SDK 2.6 and later.</span></span>

* <span data-ttu-id="bcf7f-125">No Azure SDK 2.4 e anterior, cadeia de caracteres de conexão Olá foi usada como um tempo de execução por Olá diagnóstico plug-in tooget Olá informações conta de armazenamento para a transferência de logs de diagnóstico.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-125">In Azure SDK 2.4 and earlier, hello connection string was used as a runtime by hello diagnostics plugin tooget hello storage account information for transferring diagnostics logs.</span></span>
* <span data-ttu-id="bcf7f-126">No Azure SDK 2.6 e posterior, a cadeia de caracteres de conexão de diagnóstico Olá é usada pela extensão de diagnóstico do Visual Studio tooconfigure Olá com informações de conta de armazenamento apropriado Olá durante a publicação.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-126">In Azure SDK 2.6 and later, hello diagnostics connection string is used by Visual Studio tooconfigure hello diagnostics extension with hello appropriate storage account information during publishing.</span></span> <span data-ttu-id="bcf7f-127">cadeia de caracteres de conexão Olá permite definir contas de armazenamento diferentes para as configurações de serviço diferente que o Visual Studio usará ao publicar.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-127">hello connection string lets you define different storage accounts for different service configurations that Visual Studio will use when publishing.</span></span> <span data-ttu-id="bcf7f-128">No entanto, porque o diagnóstico de saudação plug-in não está mais disponível (após 2.5 do SDK do Azure), arquivo. cscfg Olá por si só não é possível habilitar Olá extensão de diagnóstico.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-128">However, because hello diagnostics plugin is no longer available (after Azure SDK 2.5), hello .cscfg file by itself can't enable hello Diagnostics Extension.</span></span> <span data-ttu-id="bcf7f-129">Você tem extensão de saudação tooenable separadamente através de ferramentas como o Visual Studio ou PowerShell.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-129">You have tooenable hello extension separately through tools such as Visual Studio or PowerShell.</span></span>
* <span data-ttu-id="bcf7f-130">processo de saudação toosimplify de configuração de extensão de diagnóstico Olá com o PowerShell, saída de pacote de saudação do Visual Studio também contém Olá pública XML de configuração para extensão de diagnóstico Olá para cada função.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-130">toosimplify hello process of configuring hello diagnostics extension with PowerShell, hello package output from Visual Studio also contains hello public configuration XML for hello diagnostics extension for each role.</span></span> <span data-ttu-id="bcf7f-131">O Visual Studio usa Olá diagnóstico conexão cadeia de caracteres toopopulate Olá armazenamento conta informações presentes na configuração pública hello.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-131">Visual Studio uses hello diagnostics connection string toopopulate hello storage account information present in hello public configuration.</span></span> <span data-ttu-id="bcf7f-132">arquivos de configuração pública Olá são criados na pasta de extensões hello e seguem o padrão de saudação PaaSDiagnostics. &lt;RoleName >. PubConfig.xml.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-132">hello public config files are created in hello Extensions folder and follow hello pattern PaaSDiagnostics.&lt;RoleName>.PubConfig.xml.</span></span> <span data-ttu-id="bcf7f-133">Todas as implantações do PowerShell com base podem usar este padrão toomap tooa cada configuração função.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-133">Any PowerShell based deployments can use this pattern toomap each configuration tooa Role.</span></span>
* <span data-ttu-id="bcf7f-134">cadeia de caracteres de conexão de saudação no arquivo. cscfg de saudação também é usada por Olá [portal do Azure](http://go.microsoft.com/fwlink/p/?LinkID=525040) tooaccess Olá dados de diagnóstico para que possa aparecer em hello **monitoramento** é necessária cadeia de conexão de saudação do guia. tooconfigure Olá serviço tooshow detalhado de dados no portal de saudação de monitoramento.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-134">hello connection string in hello .cscfg file is also used by hello [Azure portal](http://go.microsoft.com/fwlink/p/?LinkID=525040) tooaccess hello diagnostics data so it can appear in hello **Monitoring** tab. hello connection string is needed tooconfigure hello service tooshow verbose monitoring data in hello portal.</span></span>

## <a name="migrating-projects-tooazure-sdk-26-and-later"></a><span data-ttu-id="bcf7f-135">Migrando projetos tooAzure SDK 2.6 e posterior</span><span class="sxs-lookup"><span data-stu-id="bcf7f-135">Migrating projects tooAzure SDK 2.6 and later</span></span>
<span data-ttu-id="bcf7f-136">Ao migrar do Azure SDK 2.5 tooAzure SDK 2.6 ou posterior, se você tiver uma conta de armazenamento de diagnóstico especificada no arquivo de .wadcfgx Olá, em seguida, ele permanecerá lá.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-136">When migrating from Azure SDK 2.5 tooAzure SDK 2.6 or later, if you had a diagnostics storage account specified in hello .wadcfgx file, then it will stay there.</span></span> <span data-ttu-id="bcf7f-137">contas tootake aproveitar a flexibilidade de saudação do uso de armazenamento diferentes para configurações de armazenamento diferente, você terá que toomanually Adicionar projeto de tooyour de cadeia de caracteres de conexão de saudação.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-137">tootake advantage of hello flexibility of using different storage accounts for different storage configurations, you'll have toomanually add hello connection string tooyour project.</span></span> <span data-ttu-id="bcf7f-138">Se você estiver migrando um projeto do SDK do Azure 2.4 ou tooAzure anterior 2.6 do SDK, em seguida, Olá diagnóstico cadeias de caracteres de conexão são preservadas.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-138">If you're migrating a project from Azure SDK 2.4 or earlier tooAzure SDK 2.6, then hello diagnostics connection strings are preserved.</span></span> <span data-ttu-id="bcf7f-139">No entanto, observe alterações hello como cadeias de caracteres de conexão são tratadas no SDK 2.6 do Azure conforme especificado na seção anterior hello.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-139">However, please note hello changes in how connection strings are treated in Azure SDK 2.6 as specified in hello previous section.</span></span>

### <a name="how-visual-studio-determines-hello-diagnostics-storage-account"></a><span data-ttu-id="bcf7f-140">Como o Visual Studio determina a conta de armazenamento de diagnóstico Olá</span><span class="sxs-lookup"><span data-stu-id="bcf7f-140">How Visual Studio determines hello diagnostics storage account</span></span>
* <span data-ttu-id="bcf7f-141">Se uma cadeia de caracteres de conexão de diagnóstico é especificada no arquivo. cscfg de hello, Visual Studio usa-extensão de diagnóstico Olá tooconfigure durante a publicação e ao gerar os arquivos de xml de configuração pública Olá durante o empacotamento.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-141">If a diagnostics connection string is specified in hello .cscfg file, Visual Studio uses it tooconfigure hello diagnostics extension when publishing, and when generating hello public configuration xml files during packaging.</span></span>
* <span data-ttu-id="bcf7f-142">Se nenhuma cadeia de caracteres de conexão de diagnóstico é especificada no arquivo. cscfg de hello, em seguida, Visual Studio reverterá toousing conta de armazenamento de saudação especificada no hello .wadcfgx tooconfigure Olá diagnóstico extensão de arquivo ao publicar e gerando Olá público arquivos de xml de configuração ao empacotar.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-142">If no diagnostics connection string is specified in hello .cscfg file, then Visual Studio falls back toousing hello storage account specified in hello .wadcfgx file tooconfigure hello diagnostics extension when publishing, and generating hello public configuration xml files when packaging.</span></span>
* <span data-ttu-id="bcf7f-143">cadeia de conexão de diagnóstico Olá no arquivo. cscfg de saudação tem precedência sobre a conta de armazenamento Olá no arquivo de .wadcfgx hello.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-143">hello diagnostics connection string in hello .cscfg file takes precedence over hello storage account in hello .wadcfgx file.</span></span> <span data-ttu-id="bcf7f-144">Se uma cadeia de caracteres de conexão de diagnóstico é especificado no arquivo. cscfg hello, em seguida, Visual Studio usa e ignora a conta de armazenamento Olá .wadcfgx.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-144">If a diagnostics connection string is specified in hello .cscfg file, then Visual Studio uses that and ignores hello storage account in .wadcfgx.</span></span>

### <a name="what-does-hello-update-development-storage-connection-strings-checkbox-do"></a><span data-ttu-id="bcf7f-145">O que does hello "Atualizar cadeias de conexão de armazenamento de desenvolvimento..."</span><span class="sxs-lookup"><span data-stu-id="bcf7f-145">What does hello "Update development storage connection strings…"</span></span> <span data-ttu-id="bcf7f-146">faz a caixa de seleção?</span><span class="sxs-lookup"><span data-stu-id="bcf7f-146">checkbox do?</span></span>
<span data-ttu-id="bcf7f-147">Olá a caixa de seleção **atualizar cadeias de conexão de armazenamento de desenvolvimento para diagnóstico e Caching com credenciais de conta de armazenamento do Microsoft Azure ao publicar tooMicrosoft Azure** oferece uma maneira conveniente tooupdate qualquer cadeias de conexão de conta de armazenamento de desenvolvimento com a conta de armazenamento do Azure Olá especificada durante a publicação.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-147">hello checkbox for **Update development storage connection strings for Diagnostics and Caching with Microsoft Azure storage account credentials when publishing tooMicrosoft Azure** gives you a convenient way tooupdate any development storage account connection strings with hello Azure storage account specified during publishing.</span></span>

<span data-ttu-id="bcf7f-148">Por exemplo, suponha que você selecionar essa caixa de seleção e especifica a cadeia de caracteres de conexão de diagnóstico Olá `UseDevelopmentStorage=true`.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-148">For example, suppose you select this checkbox and hello diagnostics connection string specifies `UseDevelopmentStorage=true`.</span></span> <span data-ttu-id="bcf7f-149">Quando você publica Olá projeto tooAzure, Visual Studio atualizará automaticamente o cadeia de caracteres de conexão de diagnóstico Olá com conta de armazenamento Olá especificada no Assistente de publicação de saudação.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-149">When you publish hello project tooAzure, Visual Studio will automatically update hello diagnostics connection string with hello storage account you specified in hello Publish wizard.</span></span> <span data-ttu-id="bcf7f-150">No entanto, se uma conta de armazenamento real foi especificada como cadeia de caracteres de conexão de diagnóstico Olá, em seguida, essa conta é usada em vez disso.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-150">However, if a real storage account was specified as hello diagnostics connection string, then that account is used instead.</span></span>

## <a name="diagnostics-functionality-differences-between-azure-sdk-24-and-earlier-and-azure-sdk-25-and-later"></a><span data-ttu-id="bcf7f-151">Diferenças de funcionalidade de diagnóstico entre SDK do Azure 2.4 e anteriores e SDK do Azure 2.5 e posteriores</span><span class="sxs-lookup"><span data-stu-id="bcf7f-151">Diagnostics functionality differences between Azure SDK 2.4 and earlier and Azure SDK 2.5 and later</span></span>
<span data-ttu-id="bcf7f-152">Se você estiver atualizando seu projeto do Azure SDK 2.4 tooAzure SDK 2.5 ou posterior, você deve ter em Olá mente diferenças de recursos de diagnóstico a seguir.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-152">If you're upgrading your project from Azure SDK 2.4 tooAzure SDK 2.5 or later, you should bear in mind hello following diagnostics functionality differences.</span></span>

* <span data-ttu-id="bcf7f-153">**APIs de configuração estão preteridos** – A configuração programática de diagnóstico está disponível no SDK do Azure 2.4 ou anteriores, mas foi preterida no SDK do Azure 2.5 e posteriores.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-153">**Configuration APIs are deprecated** – Programmatic configuration of diagnostics is available in Azure SDK 2.4 or earlier versions, but is deprecated in Azure SDK 2.5 and later.</span></span> <span data-ttu-id="bcf7f-154">Se sua configuração de diagnóstico está definida atualmente no código, você precisará tooreconfigure essas configurações a partir do zero no projeto migrado de saudação na ordem de trabalho de tookeep de diagnóstico.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-154">If your diagnostics configuration is currently defined in code, you'll need tooreconfigure those settings from scratch in hello migrated project in order for diagnostics tookeep working.</span></span> <span data-ttu-id="bcf7f-155">arquivo de configuração de diagnóstico Olá para o SDK do Azure 2.4 é wadcfg e wadcfgx 2.5 do SDK do Azure e posterior.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-155">hello diagnostics configuration file for Azure SDK 2.4 is diagnostics.wadcfg, and diagnostics.wadcfgx for Azure SDK 2.5 and later.</span></span>
* <span data-ttu-id="bcf7f-156">**Diagnóstico para aplicativos de serviço de nuvem pode ser configurado somente no nível de função hello, não no nível de instância de saudação.**</span><span class="sxs-lookup"><span data-stu-id="bcf7f-156">**Diagnostics for cloud service applications can only be configured at hello role level, not at hello instance level.**</span></span>
* <span data-ttu-id="bcf7f-157">**Sempre que você implantar seu aplicativo, a configuração de diagnóstico de saudação é atualizada** – isso pode causar problemas de paridade, se você alterar a configuração de diagnóstico do Gerenciador de servidores e, em seguida, reimplante o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-157">**Every time you deploy your app, hello diagnostics configuration is updated** – This can cause parity issues if you change your diagnostics configuration from Server Explorer and then redeploy your app.</span></span>
* <span data-ttu-id="bcf7f-158">**No Azure SDK 2.5 e posterior, despejos de memória são configurados no arquivo de configuração de diagnóstico hello, não no código** – se você tiver despejos de memória configurados no código, você terá toomanually configuração de saudação de transferência de arquivo de configuração do código toohello, porque Olá despejos de memória não são transferidos durante a saudação migração tooAzure 2.6 do SDK.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-158">**In Azure SDK 2.5 and later, crash dumps are configured in hello diagnostics configuration file, not in code** – If you have crash dumps configured in code, you'll have toomanually transfer hello configuration from code toohello configuration file, because hello crash dumps aren't transferred during hello migration tooAzure SDK 2.6.</span></span>

## <a name="enable-diagnostics-in-cloud-service-projects-before-deploying-them"></a><span data-ttu-id="bcf7f-159">Habilitar o diagnóstico em projetos de serviço de nuvem antes de implantá-los</span><span class="sxs-lookup"><span data-stu-id="bcf7f-159">Enable diagnostics in cloud service projects before deploying them</span></span>
<span data-ttu-id="bcf7f-160">No Visual Studio, você pode escolher dados de diagnóstico toocollect para funções executadas no Azure, quando você executa o serviço Olá no emulador de saudação antes de implantá-lo.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-160">In Visual Studio, you can choose toocollect diagnostics data for roles that run in Azure, when you run hello service in hello emulator before deploying it.</span></span> <span data-ttu-id="bcf7f-161">Todas as configurações de toodiagnostics alterações no Visual Studio são salvos no arquivo de configuração do hello wadcfgx.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-161">All changes toodiagnostics settings in Visual Studio are saved in hello diagnostics.wadcfgx configuration file.</span></span> <span data-ttu-id="bcf7f-162">Essas definições de configuração especificam conta de armazenamento Olá onde os dados de diagnóstico são salvos quando você implantar o serviço de nuvem.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-162">These configuration settings specify hello storage account where diagnostics data is saved when you deploy your cloud service.</span></span>

[!INCLUDE [cloud-services-wad-warning](../includes/cloud-services-wad-warning.md)]

### <a name="tooenable-diagnostics-in-visual-studio-before-deployment"></a><span data-ttu-id="bcf7f-163">Diagnóstico de tooenable no Visual Studio antes da implantação</span><span class="sxs-lookup"><span data-stu-id="bcf7f-163">tooenable diagnostics in Visual Studio before deployment</span></span>
1. <span data-ttu-id="bcf7f-164">No menu de atalho Olá para função hello seu interesse, escolha **propriedades**e, em seguida, escolha Olá **configuração** guia na função de saudação **propriedades** janela.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-164">On hello shortcut menu for hello role that interests you, choose **Properties**, and then choose hello **Configuration** tab in hello role’s **Properties** window.</span></span>
2. <span data-ttu-id="bcf7f-165">Em Olá **diagnóstico** seção, certifique-se de que Olá **habilitar o diagnóstico** caixa de seleção é marcada.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-165">In hello **Diagnostics** section, make sure that hello **Enable Diagnostics** check box is selected.</span></span>
   
    ![Acessando a opção de habilitar o diagnóstico Olá](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC796660.png)
3. <span data-ttu-id="bcf7f-167">Escolha Olá reticências (...) botão toospecify Olá conta de armazenamento onde deseja Olá toobe de dados de diagnóstico armazenado.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-167">Choose hello ellipsis (…) button toospecify hello storage account where you want hello diagnostics data toobe stored.</span></span> <span data-ttu-id="bcf7f-168">conta de armazenamento Olá que você escolher será local Olá onde os dados são armazenados.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-168">hello storage account you choose will be hello location where diagnostics data is stored.</span></span>
   
    ![Especifique a saudação toouse de conta de armazenamento](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC796661.png)
4. <span data-ttu-id="bcf7f-170">Em Olá **criar cadeia de Conexão de armazenamento** caixa de diálogo, especifique se deseja tooconnect usando Olá emulador de armazenamento do Azure, uma assinatura do Azure, ou credenciais inseridas manualmente.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-170">In hello **Create Storage Connection String** dialog box, specify whether you want tooconnect using hello Azure Storage Emulator, an Azure subscription, or manually entered credentials.</span></span>
   
    ![Caixa de diálogo Conta de armazenamento](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC796662.png)
   
   * <span data-ttu-id="bcf7f-172">Se você escolher a opção de emulador de armazenamento do Microsoft Azure hello, a cadeia de conexão hello está definida tooUseDevelopmentStorage = true.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-172">If you choose hello Microsoft Azure Storage Emulator option, hello connection string is set tooUseDevelopmentStorage=true.</span></span>
   * <span data-ttu-id="bcf7f-173">Se você escolher Olá sua opção de inscrição, você pode escolher Olá assinatura do Azure que você deseja que o nome da conta de toouse e hello.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-173">If you choose hello Your subscription option, you can choose hello Azure subscription you want toouse and hello account name.</span></span> <span data-ttu-id="bcf7f-174">Você pode escolher como gerenciar contas de saudação botão toomanage suas assinaturas do Azure.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-174">You can choose hello Manage Accounts button toomanage your Azure subscriptions.</span></span>
   * <span data-ttu-id="bcf7f-175">Se você escolher a opção de credenciais Olá inserida manualmente, você está nome de saudação tooenter solicitada e a chave de saudação conta do Azure que você deseja toouse.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-175">If you choose hello Manually entered credentials option, you're prompted tooenter hello name and key of hello Azure account you want toouse.</span></span>
5. <span data-ttu-id="bcf7f-176">Escolha Olá **configurar** saudação do botão tooview **configuração de diagnóstico** caixa de diálogo.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-176">Choose hello **Configure** button tooview hello **Diagnostics configuration** dialog box.</span></span> <span data-ttu-id="bcf7f-177">Cada guia (exceto **Geral** e **Diretórios de log**) representa uma fonte de dados de diagnóstico que você pode coletar.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-177">Each tab (except for **General** and **Log Directories**) represents a diagnostic data source that you can collect.</span></span> <span data-ttu-id="bcf7f-178">Guia de padrão de saudação, **geral**, oferece Olá seguintes opções de coleta de dados de diagnóstico: **somente erros**, **todas as informações de**, e **plano personalizado** .</span><span class="sxs-lookup"><span data-stu-id="bcf7f-178">hello default tab, **General**, offers you hello following diagnostics data collection options: **Errors only**, **All information**, and **Custom plan**.</span></span> <span data-ttu-id="bcf7f-179">Olá opção padrão, **somente erros**, leva Olá menor quantidade de armazenamento porque ele não é transferida avisos ou mensagens de rastreamento.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-179">hello default option, **Errors only**, takes hello least amount of storage because it doesn’t transfer warnings or tracing messages.</span></span> <span data-ttu-id="bcf7f-180">Olá, todas as transferências de opção de informações Olá a maioria das informações e é, portanto, Olá a opção mais cara em termos de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-180">hello All information option transfers hello most information and is, therefore, hello most expensive option in terms of storage.</span></span>
   
    ![Habilitar a configuração e diagnóstico do Azure](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC758144.png)
6. <span data-ttu-id="bcf7f-182">Neste exemplo, selecione Olá **plano personalizado** opção para que você pode personalizar Olá dados coletados.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-182">For this example, select hello **Custom plan** option so you can customize hello data collected.</span></span>
7. <span data-ttu-id="bcf7f-183">Olá **cota de disco em MB** Especifica quanto espaço que deseja tooallocate na conta de seu armazenamento para dados de diagnóstico.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-183">hello **Disk Quota in MB** box specifies how much space you want tooallocate in your storage account for diagnostics data.</span></span> <span data-ttu-id="bcf7f-184">Você pode alterar o valor padrão de saudação se desejar.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-184">You can change hello default value if you want.</span></span>
8. <span data-ttu-id="bcf7f-185">Em cada guia de dados de diagnóstico que você deseja toocollect, selecione seu **Habilitar transferência de <log type>**  caixa de seleção.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-185">On each tab of diagnostics data you want toocollect, select its **Enable Transfer of <log type>** check box.</span></span> <span data-ttu-id="bcf7f-186">Por exemplo, se você quiser toocollect logs de aplicativos, selecione Olá **Habilitar transferência de Logs do aplicativo** caixa de seleção Olá **Logs de aplicativo** guia. Além disso, especifique outras informações necessárias para cada tipo de dados de diagnóstico.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-186">For example, if you want toocollect application logs, select hello **Enable transfer of Application Logs** check box on hello **Application Logs** tab. Also, specify any other information required by each diagnostics data type.</span></span> <span data-ttu-id="bcf7f-187">Consulte a seção Olá **configurar fontes de dados de diagnóstico** mais adiante neste tópico para obter informações de configuração em cada guia.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-187">See hello section **Configure diagnostics data sources** later in this topic for configuration information on each tab.</span></span>
9. <span data-ttu-id="bcf7f-188">Depois de habilitar a coleção de todos os dados de diagnóstico de saudação desejado, escolha Olá **Okey** botão.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-188">After you’ve enabled collection of all hello diagnostics data you want, choose hello **OK** button.</span></span>
10. <span data-ttu-id="bcf7f-189">Execute seu projeto de serviço de nuvem do Azure no Visual Studio, como de costume.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-189">Run your Azure cloud service project in Visual Studio as usual.</span></span> <span data-ttu-id="bcf7f-190">Como você usa seu aplicativo, informações de log Olá que você habilitou é salvo toohello conta de armazenamento do Azure especificada.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-190">As you use your application, hello log information that you enabled is saved toohello Azure storage account you specified.</span></span>

## <a name="enable-diagnostics-in-azure-virtual-machines"></a><span data-ttu-id="bcf7f-191">Habilitar o diagnóstico em máquinas virtuais do Azure</span><span class="sxs-lookup"><span data-stu-id="bcf7f-191">Enable diagnostics in Azure virtual machines</span></span>
<span data-ttu-id="bcf7f-192">No Visual Studio, você pode escolher os dados de diagnóstico toocollect para máquinas virtuais do Azure.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-192">In Visual Studio, you can choose toocollect diagnostics data for Azure virtual machines.</span></span>

### <a name="tooenable-diagnostics-in-azure-virtual-machines"></a><span data-ttu-id="bcf7f-193">Diagnóstico de tooenable em máquinas virtuais do Azure</span><span class="sxs-lookup"><span data-stu-id="bcf7f-193">tooenable diagnostics in Azure virtual machines</span></span>
1. <span data-ttu-id="bcf7f-194">Em **Server Explorer**, escolha Olá nó do Azure e, em seguida, conecte-se tooyour assinatura do Azure, se você ainda não estiver conectado.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-194">In **Server Explorer**, choose hello Azure node and then connect tooyour Azure subscription, if you're not already connected.</span></span>
2. <span data-ttu-id="bcf7f-195">Expanda Olá **máquinas virtuais** nó.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-195">Expand hello **Virtual Machines** node.</span></span> <span data-ttu-id="bcf7f-196">Você pode criar uma nova máquina virtual ou selecione uma que já está lá.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-196">You can create a new virtual machine, or select one that's already there.</span></span>
3. <span data-ttu-id="bcf7f-197">No menu de atalho Olá para a máquina virtual Olá seu interesse, escolha **configurar**.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-197">On hello shortcut menu for hello virtual machine that interests you, choose **Configure**.</span></span> <span data-ttu-id="bcf7f-198">Isso mostra a caixa de diálogo de configuração de máquina virtual de saudação.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-198">This shows hello virtual machine configuration dialog box.</span></span>
   
    ![Configurando uma máquina virtual do Azure](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC796663.png)
4. <span data-ttu-id="bcf7f-200">Se ele ainda não estiver instalado, adicione a extensão de diagnóstico de agente de monitoramento Microsoft hello.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-200">If it's not already installed, add hello Microsoft Monitoring Agent Diagnostics extension.</span></span> <span data-ttu-id="bcf7f-201">Essa extensão permite coletar dados de diagnóstico para Olá máquina virtual do Azure.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-201">This extension lets you gather diagnostics data for hello Azure virtual machine.</span></span> <span data-ttu-id="bcf7f-202">Na lista de extensões instalado hello, escolha Olá selecione uma extensão disponível lista suspensa menu e clique em Diagnóstico de agente de monitoramento Microsoft.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-202">In hello Installed Extensions list, choose hello Select an available extension drop-down menu and then choose Microsoft Monitoring Agent Diagnostics.</span></span>
   
    ![Instalando uma extensão de máquina virtual do Azure](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC766024.png)
   
   > [!NOTE]
   > <span data-ttu-id="bcf7f-204">Outras extensões de diagnóstico estão disponíveis para as máquinas virtuais.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-204">Other diagnostics extensions are available for your virtual machines.</span></span> <span data-ttu-id="bcf7f-205">Para obter mais informações, consulte recursos e extensões de VM do Azure.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-205">For more information, see Azure VM Extensions and Features.</span></span>
   > 
   > 
5. <span data-ttu-id="bcf7f-206">Escolha Olá **adicionar** botão extensão de saudação tooadd e exibir seu **configuração de diagnóstico** caixa de diálogo.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-206">Choose hello **Add** button tooadd hello extension and view its **Diagnostics configuration** dialog box.</span></span>
6. <span data-ttu-id="bcf7f-207">Escolha Olá **configurar** botão toospecify uma conta de armazenamento e, em seguida, escolha Olá **Okey** botão.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-207">Choose hello **Configure** button toospecify a storage account and then choose hello **OK** button.</span></span>
   
    <span data-ttu-id="bcf7f-208">Cada guia (exceto **Geral** e **Diretórios de log**) representa uma fonte de dados de diagnóstico que você pode coletar.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-208">Each tab (except for **General** and **Log Directories**) represents a diagnostic data source that you can collect.</span></span>
   
    ![Habilitar a configuração e diagnóstico do Azure](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC758144.png)
   
    <span data-ttu-id="bcf7f-210">Guia de padrão de saudação, **geral**, oferece Olá seguintes opções de coleta de dados de diagnóstico: **somente erros**, **todas as informações de**, e **plano personalizado** .</span><span class="sxs-lookup"><span data-stu-id="bcf7f-210">hello default tab, **General**, offers you hello following diagnostics data collection options: **Errors only**, **All information**, and **Custom plan**.</span></span> <span data-ttu-id="bcf7f-211">Olá opção padrão, **somente erros**, leva Olá menor quantidade de armazenamento porque ele não é transferida avisos ou mensagens de rastreamento.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-211">hello default option, **Errors only**, takes hello least amount of storage because it doesn’t transfer warnings or tracing messages.</span></span> <span data-ttu-id="bcf7f-212">Olá **todas as informações** transferências de opção Olá a maioria das informações e é, portanto, a opção mais cara Olá em termos de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-212">hello **All information** option transfers hello most information and is, therefore, hello most expensive option in terms of storage.</span></span>
7. <span data-ttu-id="bcf7f-213">Neste exemplo, selecione Olá **plano personalizado** opção para que você pode personalizar Olá dados coletados.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-213">For this example, select hello **Custom plan** option so you can customize hello data collected.</span></span>
8. <span data-ttu-id="bcf7f-214">Olá **cota de disco em MB** Especifica quanto espaço que deseja tooallocate na conta de seu armazenamento para dados de diagnóstico.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-214">hello **Disk Quota in MB** box specifies how much space you want tooallocate in your storage account for diagnostics data.</span></span> <span data-ttu-id="bcf7f-215">Você pode alterar o valor padrão de saudação se desejar.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-215">You can change hello default value if you want.</span></span>
9. <span data-ttu-id="bcf7f-216">Em cada guia de dados de diagnóstico que você deseja toocollect, selecione seu **Habilitar transferência de <log type>**  caixa de seleção.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-216">On each tab of diagnostics data you want toocollect, select its **Enable Transfer of <log type>** check box.</span></span>
   
    <span data-ttu-id="bcf7f-217">Por exemplo, se você quiser toocollect logs de aplicativos, selecione Olá **Habilitar transferência de Logs do aplicativo** caixa de seleção Olá **Logs de aplicativo** guia. Além disso, especifique outras informações necessárias para cada tipo de dados de diagnóstico.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-217">For example, if you want toocollect application logs, select hello **Enable transfer of Application Logs** check box on hello **Application Logs** tab. Also, specify any other information required by each diagnostics data type.</span></span> <span data-ttu-id="bcf7f-218">Consulte a seção Olá **configurar fontes de dados de diagnóstico** mais adiante neste tópico para obter informações de configuração em cada guia.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-218">See hello section **Configure diagnostics data sources** later in this topic for configuration information on each tab.</span></span>
10. <span data-ttu-id="bcf7f-219">Depois de habilitar a coleção de todos os dados de diagnóstico de saudação desejado, escolha Olá **Okey** botão.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-219">After you’ve enabled collection of all hello diagnostics data you want, choose hello **OK** button.</span></span>
11. <span data-ttu-id="bcf7f-220">Salve o projeto de saudação atualizado.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-220">Save hello updated project.</span></span>
    
     <span data-ttu-id="bcf7f-221">Você verá uma mensagem de saudação **Log de atividades do Microsoft Azure** janela Olá máquina virtual foi atualizada.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-221">You'll see a message in hello **Microsoft Azure Activity Log** window that hello virtual machine has been updated.</span></span>

## <a name="configure-diagnostics-data-sources"></a><span data-ttu-id="bcf7f-222">Configurar fontes de dados de diagnóstico</span><span class="sxs-lookup"><span data-stu-id="bcf7f-222">Configure diagnostics data sources</span></span>
<span data-ttu-id="bcf7f-223">Depois de habilitar a coleta de dados de diagnóstico, você pode escolher quais fontes de dados exatamente como você deseja toocollect e quais informações são coletadas.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-223">After you enable diagnostics data collection, you can choose exactly what data sources you want toocollect and what information is collected.</span></span> <span data-ttu-id="bcf7f-224">Olá, esta é uma lista de guias no hello **configuração de diagnóstico** caixa de diálogo e significa que cada opção de configuração.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-224">hello following is a list of tabs in hello **Diagnostics configuration** dialog box and what each configuration option means.</span></span>

### <a name="application-logs"></a><span data-ttu-id="bcf7f-225">Logs de aplicativo</span><span class="sxs-lookup"><span data-stu-id="bcf7f-225">Application logs</span></span>
<span data-ttu-id="bcf7f-226">**Logs de aplicativos** contêm informações de diagnóstico produzidas por um aplicativo Web.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-226">**Application logs** contain diagnostics information produced by a web application.</span></span> <span data-ttu-id="bcf7f-227">Se você quiser toocapture logs de aplicativos, selecione Olá **Habilitar transferência de Logs do aplicativo** caixa de seleção.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-227">If you want toocapture application logs, select hello **Enable transfer of Application Logs** check box.</span></span> <span data-ttu-id="bcf7f-228">Você pode aumentar ou diminuir Olá número de minutos quando os logs de aplicativo hello são transferidas tooyour conta de armazenamento por meio da alteração Olá **o período de transferência (min)** valor.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-228">You can increase or decrease hello number of minutes when hello application logs are transferred tooyour storage account by changing hello **Transfer Period (min)** value.</span></span> <span data-ttu-id="bcf7f-229">Você também pode alterar a quantidade de saudação de informações capturadas no log de saudação definindo o valor do nível de Log hello.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-229">You can also change hello amount of information captured in hello log by setting hello Log level value.</span></span> <span data-ttu-id="bcf7f-230">Por exemplo, você pode escolher **detalhado** tooget obter mais informações ou escolha **crítico** erros críticos apenas toocapture.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-230">For example, you can choose **Verbose** tooget more information or choose **Critical** toocapture only critical errors.</span></span> <span data-ttu-id="bcf7f-231">Se você tiver um provedor de diagnósticos específicos que emite os logs de aplicativo, você pode capturá-los adicionando toohello GUID do provedor Olá **provedor GUID** caixa.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-231">If you have a specific diagnostics provider that emits application logs, you can capture them by adding hello provider’s GUID toohello **Provider GUID** box.</span></span>

  ![Logs de aplicativo](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC758145.png)

  <span data-ttu-id="bcf7f-233">Consulte [Habilitar o registro em log de diagnóstico para aplicativos Web no Serviço de Aplicativo do Azure](app-service-web/web-sites-enable-diagnostic-log.md) para obter mais informações sobre os logs de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-233">See [Enable diagnostics logging for web apps in Azure App Service](app-service-web/web-sites-enable-diagnostic-log.md) for more information about application logs.</span></span>

### <a name="windows-event-logs"></a><span data-ttu-id="bcf7f-234">Logs de eventos do Windows</span><span class="sxs-lookup"><span data-stu-id="bcf7f-234">Windows event logs</span></span>
<span data-ttu-id="bcf7f-235">Se você quiser toocapture logs de eventos do Windows, selecione Olá **Habilitar transferência de Logs de eventos do Windows** caixa de seleção.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-235">If you want toocapture Windows event logs, select hello **Enable transfer of Windows Event Logs** check box.</span></span> <span data-ttu-id="bcf7f-236">Você pode aumentar ou diminuir Olá número de minutos quando os logs de eventos de saudação são transferidas tooyour conta de armazenamento por meio da alteração Olá **o período de transferência (min)** valor.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-236">You can increase or decrease hello number of minutes when hello event logs are transferred tooyour storage account by changing hello **Transfer Period (min)** value.</span></span> <span data-ttu-id="bcf7f-237">Marque as caixas de seleção de saudação para tipos de saudação de eventos que você deseja tootrack.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-237">Select hello check boxes for hello types of events that you want tootrack.</span></span>

  ![Logs de eventos](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC796664.png)

<span data-ttu-id="bcf7f-239">Se você estiver usando o SDK do Azure 2.6 ou posterior e deseja toospecify uma fonte de dados personalizado, insira-o no hello  **<Data source name>**  texto caixa e, em seguida, escolha Olá **adicionar** tooit próximo botão.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-239">If you're using Azure SDK 2.6 or later and want toospecify a custom data source, enter it in hello **<Data source name>** text box and then choose hello **Add** button next tooit.</span></span> <span data-ttu-id="bcf7f-240">fonte de dados de saudação é adicionado toohello diagnostics.cfcfg arquivo.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-240">hello data source is added toohello diagnostics.cfcfg file.</span></span>

<span data-ttu-id="bcf7f-241">Se você estiver usando o Azure SDK 2.5 e deseja toospecify uma fonte de dados personalizada, você pode adicioná-lo toohello `WindowsEventLog` seção Olá wadcfgx de arquivo, como Olá exemplo a seguir.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-241">If you're using Azure SDK 2.5 and want toospecify a custom data source, you can add it toohello `WindowsEventLog` section of hello diagnostics.wadcfgx file, such as in hello following example.</span></span>

```
<WindowsEventLog scheduledTransferPeriod="PT1M">
   <DataSource name="Application!*" />
   <DataSource name="CustomDataSource!*" />
</WindowsEventLog>
```
### <a name="performance-counters"></a><span data-ttu-id="bcf7f-242">Contadores de desempenho</span><span class="sxs-lookup"><span data-stu-id="bcf7f-242">Performance counters</span></span>
<span data-ttu-id="bcf7f-243">As informações do contador de desempenho podem ajudá-lo a localizar afunilamentos do sistema e ajustar o sistema e desempenho do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-243">Performance counter information can help you locate system bottlenecks and fine-tune system and application performance.</span></span> <span data-ttu-id="bcf7f-244">Consulte [Criar e usar contadores de desempenho em um aplicativo do Azure](https://msdn.microsoft.com/library/azure/hh411542.aspx) para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-244">See [Create and Use Performance Counters in an Azure Application](https://msdn.microsoft.com/library/azure/hh411542.aspx) for more information.</span></span> <span data-ttu-id="bcf7f-245">Se você quiser toocapture contadores de desempenho, selecione Olá **Habilitar transferência de contadores de desempenho** caixa de seleção.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-245">If you want toocapture performance counters, select hello **Enable transfer of Performance Counters** check box.</span></span> <span data-ttu-id="bcf7f-246">Você pode aumentar ou diminuir Olá número de minutos quando os logs de eventos de saudação são transferidas tooyour conta de armazenamento por meio da alteração Olá **o período de transferência (min)** valor.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-246">You can increase or decrease hello number of minutes when hello event logs are transferred tooyour storage account by changing hello **Transfer Period (min)** value.</span></span> <span data-ttu-id="bcf7f-247">Selecione as caixas de seleção de saudação para hello contadores de desempenho que você deseja tootrack.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-247">Select hello check boxes for hello performance counters that you want tootrack.</span></span>

  ![Contadores de desempenho](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC758147.png)

<span data-ttu-id="bcf7f-249">tootrack um contador de desempenho não estiver listado, insira-o usando Olá sintaxe sugerida e escolha Olá **adicionar** botão.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-249">tootrack a performance counter that isn’t listed, enter it by using hello suggested syntax and then choose hello **Add** button.</span></span> <span data-ttu-id="bcf7f-250">sistema operacional de saudação na máquina virtual de saudação determina quais contadores de desempenho que você pode controlar. Para obter mais informações sobre a sintaxe, consulte [Especificando um caminho de contador](https://msdn.microsoft.com/library/windows/desktop/aa373193.aspx).</span><span class="sxs-lookup"><span data-stu-id="bcf7f-250">hello operating system on hello virtual machine determines which performance counters you can track. For more information about syntax, see [Specifying a Counter Path](https://msdn.microsoft.com/library/windows/desktop/aa373193.aspx).</span></span>

### <a name="infrastructure-logs"></a><span data-ttu-id="bcf7f-251">Logs de infraestrutura</span><span class="sxs-lookup"><span data-stu-id="bcf7f-251">Infrastructure logs</span></span>
<span data-ttu-id="bcf7f-252">Se você quiser que os logs de infraestrutura de toocapture, que contêm informações sobre Olá infraestrutura de diagnóstica do Azure, o módulo RemoteAccess de saudação e o módulo RemoteForwarder de saudação, selecione Olá **Habilitar transferência de Logs de infraestrutura**caixa de seleção.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-252">If you want toocapture infrastructure logs, which contain information about hello Azure diagnostic infrastructure, hello RemoteAccess module, and hello RemoteForwarder module, select hello **Enable transfer of Infrastructure Logs** check box.</span></span> <span data-ttu-id="bcf7f-253">Você pode aumentar ou diminuir Olá número de minutos quando Olá logs são transferidas tooyour conta de armazenamento, alterando o valor do período de transferência (min) de saudação.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-253">You can increase or decrease hello number of minutes when hello logs are transferred tooyour storage account by changing hello Transfer Period (min) value.</span></span>

  ![Logs de infraestrutura de diagnósticos](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC758148.png)

  <span data-ttu-id="bcf7f-255">Para saber mais, consulte [Coletar dados do log usando o Diagnóstico do Azure](https://msdn.microsoft.com/library/azure/gg433048.aspx) .</span><span class="sxs-lookup"><span data-stu-id="bcf7f-255">See [Collect Logging Data by Using Azure Diagnostics](https://msdn.microsoft.com/library/azure/gg433048.aspx) for more information.</span></span>

### <a name="log-directories"></a><span data-ttu-id="bcf7f-256">Diretórios de log</span><span class="sxs-lookup"><span data-stu-id="bcf7f-256">Log directories</span></span>
<span data-ttu-id="bcf7f-257">Se você quiser que os diretórios de log de toocapture, que contêm os dados coletados de diretórios de log de solicitações de serviços de informações da Internet (IIS), solicitações com falha ou pastas que você escolher, selecione Olá **Habilitar transferência de diretórios de Log**caixa de seleção.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-257">If you want toocapture log directories, which contain data collected from log directories for Internet Information Services (IIS) requests, failed requests, or folders that you choose, select hello **Enable transfer of Log Directories** check box.</span></span> <span data-ttu-id="bcf7f-258">Você pode aumentar ou diminuir Olá número de minutos quando Olá logs são transferidas tooyour conta de armazenamento por meio da alteração Olá **o período de transferência (min)** valor.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-258">You can increase or decrease hello number of minutes when hello logs are transferred tooyour storage account by changing hello **Transfer Period (min)** value.</span></span>

<span data-ttu-id="bcf7f-259">Você pode marcar as caixas de saudação de logs Olá deseja toocollect, como **Logs do IIS** e **solicitação com falha** Logs.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-259">You can select hello boxes of hello logs you want toocollect, such as **IIS Logs** and **Failed Request** Logs.</span></span> <span data-ttu-id="bcf7f-260">Nomes de contêiner de armazenamento padrão são fornecidos, mas você pode alterar os nomes de saudação se você quiser.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-260">Default storage container names are provided, but you can change hello names if you want.</span></span>

<span data-ttu-id="bcf7f-261">Além disso, você pode capturar logs de qualquer pasta.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-261">Also, you can capture logs from any folder.</span></span> <span data-ttu-id="bcf7f-262">Especifique apenas o caminho de saudação no Olá **Log do diretório absoluto** seção e, em seguida, escolha Olá **Adicionar diretório** botão.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-262">Just specify hello path in hello **Log from Absolute Directory** section and then choose hello **Add Directory** button.</span></span> <span data-ttu-id="bcf7f-263">Olá logs serão capturados toohello especificado contêineres.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-263">hello logs will be captured toohello specified containers.</span></span>

  ![Diretórios de log](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC796665.png)

### <a name="etw-logs"></a><span data-ttu-id="bcf7f-265">Logs do ETW</span><span class="sxs-lookup"><span data-stu-id="bcf7f-265">ETW logs</span></span>
<span data-ttu-id="bcf7f-266">Se você usar [de rastreamento de eventos do Windows](https://msdn.microsoft.com/library/windows/desktop/bb968803\(v=vs.85\).aspx) (ETW) e desejar que os logs do ETW toocapture, selecione Olá **Habilitar transferência de Logs do ETW** caixa de seleção.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-266">If you use [Event Tracing for Windows](https://msdn.microsoft.com/library/windows/desktop/bb968803\(v=vs.85\).aspx) (ETW) and want toocapture ETW logs, select hello **Enable transfer of ETW Logs** check box.</span></span> <span data-ttu-id="bcf7f-267">Você pode aumentar ou diminuir Olá número de minutos quando Olá logs são transferidas tooyour conta de armazenamento por meio da alteração Olá **o período de transferência (min)** valor.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-267">You can increase or decrease hello number of minutes when hello logs are transferred tooyour storage account by changing hello **Transfer Period (min)** value.</span></span>

<span data-ttu-id="bcf7f-268">Olá eventos são capturados de fontes de evento e manifestos de eventos que você especificar.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-268">hello events are captured from event sources and event manifests that you specify.</span></span> <span data-ttu-id="bcf7f-269">toospecify uma fonte de evento, insira um nome no hello **fontes de evento** seção e, em seguida, escolha Olá **Adicionar origem do evento** botão.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-269">toospecify an event source, enter a name in hello **Event Sources** section and then choose hello **Add Event Source** button.</span></span> <span data-ttu-id="bcf7f-270">Da mesma forma, você pode especificar um manifesto de evento em Olá **manifestos de eventos** seção e, em seguida, escolha Olá **adicionar manifesto de evento** botão.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-270">Similarly, you can specify an event manifest in hello **Event Manifests** section and then choose hello **Add Event Manifest** button.</span></span>

  ![Logs do ETW](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC766025.png)

  <span data-ttu-id="bcf7f-272">há suporte para no ASP.NET framework do ETW Olá por meio de classes em Olá [System.Diagnostics.aspx] (namespace https://msdn.microsoft.com/library/system.diagnostics (v=vs.110).</span><span class="sxs-lookup"><span data-stu-id="bcf7f-272">hello ETW framework is supported in ASP.NET through classes in hello [System.Diagnostics.aspx](https://msdn.microsoft.com/library/system.diagnostics(v=vs.110) namespace.</span></span> <span data-ttu-id="bcf7f-273">Olá Microsoft.WindowsAzure.Diagnostics namespace, que herda e estende o padrão [System.Diagnostics.aspx] (classes de https://msdn.microsoft.com/library/system.diagnostics (v=vs.110), habilita Olá uso de [System.Diagnostics.aspx] ( https://msdn.microsoft.com/library/System.Diagnostics (v=vs.110) como uma estrutura de registro em log no hello ambiente do Azure.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-273">hello Microsoft.WindowsAzure.Diagnostics namespace, which inherits from and extends standard [System.Diagnostics.aspx](https://msdn.microsoft.com/library/system.diagnostics(v=vs.110) classes, enables hello use of [System.Diagnostics.aspx](https://msdn.microsoft.com/library/system.diagnostics(v=vs.110) as a logging framework in hello Azure environment.</span></span> <span data-ttu-id="bcf7f-274">Para obter mais informações, consulte [Tomar controle de registro em log e rastreamento no Microsoft Azure](https://msdn.microsoft.com/magazine/ff714589.aspx) e [Habilitando o diagnóstico no serviços de nuvem e Máquinas virtuais do Azure](cloud-services/cloud-services-dotnet-diagnostics.md).</span><span class="sxs-lookup"><span data-stu-id="bcf7f-274">For more information, see [Take Control of Logging and Tracing in Microsoft Azure](https://msdn.microsoft.com/magazine/ff714589.aspx) and [Enabling Diagnostics in Azure Cloud Services and Virtual Machines](cloud-services/cloud-services-dotnet-diagnostics.md).</span></span>

### <a name="crash-dumps"></a><span data-ttu-id="bcf7f-275">Despejos de falhas</span><span class="sxs-lookup"><span data-stu-id="bcf7f-275">Crash dumps</span></span>
<span data-ttu-id="bcf7f-276">Se você quiser toocapture informações sobre quando uma instância de função falha, selecione Olá **Habilitar transferência de despejos** caixa de seleção.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-276">If you want toocapture information about when a role instance crashes, select hello **Enable transfer of Crash Dumps** check box.</span></span> <span data-ttu-id="bcf7f-277">(Pelo fato do ASP.NET manipular mais exceções, isso geralmente é útil somente para uma função de trabalho.) Você pode aumentar ou diminuir a porcentagem de saudação do armazenamento espaço dedicado toohello despejos alterando Olá **cota de diretório (%)** valor.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-277">(Because ASP.NET handles most exceptions, this is generally useful only for worker roles.) You can increase or decrease hello percentage of storage space devoted toohello crash dumps by changing hello **Directory Quota (%)** value.</span></span> <span data-ttu-id="bcf7f-278">Você pode alterar o contêiner de armazenamento Olá onde Olá despejos de memória são armazenados, e você pode selecionar se deseja toocapture um **completo** ou **Mini** despejo.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-278">You can change hello storage container where hello crash dumps are stored, and you can select whether you want toocapture a **Full** or **Mini** dump.</span></span>

<span data-ttu-id="bcf7f-279">processos Hello está sendo controlados no momento estão listados.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-279">hello processes currently being tracked are listed.</span></span> <span data-ttu-id="bcf7f-280">Marque as caixas de seleção de saudação para processos de saudação que você deseja toocapture.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-280">Select hello check boxes for hello processes that you want toocapture.</span></span> <span data-ttu-id="bcf7f-281">tooadd outra lista de toohello de processo, digite o nome do processo de saudação e escolha Olá **adicionar processo** botão.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-281">tooadd another process toohello list, enter hello process name and then choose hello **Add Process** button.</span></span>

  ![Despejos de falhas](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC766026.png)

  <span data-ttu-id="bcf7f-283">Consulte [Tomar controle do registro em log e rastreamento no Microsoft Azure](https://msdn.microsoft.com/magazine/ff714589.aspx) e [Diagnóstico do Microsoft Azure parte 4: componentes de registro de log personalizados e alterações do Diagnóstico do Azure 1.3](http://justazure.com/microsoft-azure-diagnostics-part-4-custom-logging-components-azure-diagnostics-1-3-changes/) para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-283">See [Take Control of Logging and Tracing in Microsoft Azure](https://msdn.microsoft.com/magazine/ff714589.aspx) and [Microsoft Azure Diagnostics Part 4: Custom Logging Components and Azure Diagnostics 1.3 Changes](http://justazure.com/microsoft-azure-diagnostics-part-4-custom-logging-components-azure-diagnostics-1-3-changes/) for more information.</span></span>

## <a name="view-hello-diagnostics-data"></a><span data-ttu-id="bcf7f-284">Saudação de exibir dados de diagnóstico</span><span class="sxs-lookup"><span data-stu-id="bcf7f-284">View hello diagnostics data</span></span>
<span data-ttu-id="bcf7f-285">Depois que você coletou dados de diagnóstico de saudação para um serviço de nuvem ou uma máquina virtual, você pode exibi-lo.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-285">After you’ve collected hello diagnostics data for a cloud service or a virtual machine, you can view it.</span></span>

### <a name="tooview-cloud-service-diagnostics-data"></a><span data-ttu-id="bcf7f-286">dados de diagnóstico de serviço de nuvem tooview</span><span class="sxs-lookup"><span data-stu-id="bcf7f-286">tooview cloud service diagnostics data</span></span>
1. <span data-ttu-id="bcf7f-287">Implante seu serviço de nuvem como de costume e, em seguida, execute-o.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-287">Deploy your cloud service as usual and then run it.</span></span>
2. <span data-ttu-id="bcf7f-288">Você pode exibir dados de diagnóstico de saudação em um relatório que o Visual Studio gera ou tabelas em sua conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-288">You can view hello diagnostics data in either a report that Visual Studio generates or tables in your storage account.</span></span> <span data-ttu-id="bcf7f-289">dados de saudação tooview em um relatório, abra **Cloud Explorer** ou **Server Explorer**, abra o menu de atalho de saudação do nó Olá para função hello seu interesse e, em seguida, escolha **exibir dados de diagnóstico** .</span><span class="sxs-lookup"><span data-stu-id="bcf7f-289">tooview hello data in a report, open **Cloud Explorer** or **Server Explorer**, open hello shortcut menu of hello node for hello role that interests you, and then choose **View Diagnostic Data**.</span></span>
   
    ![Exibir dados de diagnóstico](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC748912.png)
   
    <span data-ttu-id="bcf7f-291">Um relatório que mostra dados de saudação disponíveis é exibida.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-291">A report that shows hello available data appears.</span></span>
   
    ![Relatório do Microsoft Azure Diagnostics no Visual Studio](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC796666.png)
   
    <span data-ttu-id="bcf7f-293">Se os dados mais recentes Olá não aparecem, você pode ter toowait para tooelapse de período de transferência hello.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-293">If hello most recent data doesn't appear, you might have toowait for hello transfer period tooelapse.</span></span>
   
    <span data-ttu-id="bcf7f-294">Escolha Olá **atualizar** vincular tooimmediately atualização Olá dados ou escolher um intervalo em Olá **atualização automática** dados suspensa lista caixa toohave saudação atualizados automaticamente.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-294">Choose hello **Refresh** link tooimmediately update hello data, or choose an interval in hello **Auto-Refresh** dropdown list box toohave hello data updated automatically.</span></span> <span data-ttu-id="bcf7f-295">dados de erro de saudação tooexport, escolha Olá **exportar tooCSV** botão toocreate um arquivo de valores separados por vírgulas, você pode abrir em uma planilha.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-295">tooexport hello error data, choose hello **Export tooCSV** button toocreate a comma-separated value file you can open in a spreadsheet.</span></span>
   
    <span data-ttu-id="bcf7f-296">No **Cloud Explorer** ou **Server Explorer**, abra a conta de armazenamento Olá associado à implantação de saudação.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-296">In **Cloud Explorer** or **Server Explorer**, open hello storage account that's associated with hello deployment.</span></span>
3. <span data-ttu-id="bcf7f-297">Abrir tabelas de diagnóstico de saudação no Visualizador de tabela hello e examine Olá dados coletados.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-297">Open hello diagnostics tables in hello table viewer, and then review hello data that you collected.</span></span> <span data-ttu-id="bcf7f-298">Para logs do IIS e os logs personalizados, você pode abrir um contêiner de blob.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-298">For IIS logs and custom logs, you can open a blob container.</span></span> <span data-ttu-id="bcf7f-299">Revisando Olá a tabela a seguir, você pode encontrar hello tabela ou contêiner de blob que contém dados de saudação que lhe interessam.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-299">By reviewing hello following table, you can find hello table or blob container that contains hello data that interests you.</span></span> <span data-ttu-id="bcf7f-300">Além disso toohello dados para que o arquivo de log, as entradas da tabela Olá contenham EventTickCount, DeploymentId, função e RoleInstance toohelp identificar qual máquina virtual e a função gerado dados saudação e quando.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-300">In addition toohello data for that log file, hello table entries contain EventTickCount, DeploymentId, Role, and RoleInstance toohelp you identify what virtual machine and role generated hello data and when.</span></span> 
   
   | <span data-ttu-id="bcf7f-301">Dados de diagnóstico</span><span class="sxs-lookup"><span data-stu-id="bcf7f-301">Diagnostic data</span></span> | <span data-ttu-id="bcf7f-302">Descrição</span><span class="sxs-lookup"><span data-stu-id="bcf7f-302">Description</span></span> | <span data-ttu-id="bcf7f-303">Local</span><span class="sxs-lookup"><span data-stu-id="bcf7f-303">Location</span></span> |
   | --- | --- | --- |
   | <span data-ttu-id="bcf7f-304">Logs de aplicativo</span><span class="sxs-lookup"><span data-stu-id="bcf7f-304">Application Logs</span></span> |<span data-ttu-id="bcf7f-305">Logs gerados pelo seu código chamando métodos da classe Trace da saudação.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-305">Logs that your code generates by calling methods of hello System.Diagnostics.Trace class.</span></span> |<span data-ttu-id="bcf7f-306">WADLogsTable</span><span class="sxs-lookup"><span data-stu-id="bcf7f-306">WADLogsTable</span></span> |
   | <span data-ttu-id="bcf7f-307">Logs de eventos</span><span class="sxs-lookup"><span data-stu-id="bcf7f-307">Event Logs</span></span> |<span data-ttu-id="bcf7f-308">Esses dados são dos logs de eventos do Windows hello em máquinas virtuais de saudação.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-308">This data is from hello Windows event logs on hello virtual machines.</span></span> <span data-ttu-id="bcf7f-309">O Windows armazena informações nesses logs, mas aplicativos e serviços também usá-los tooreport erros ou informações de log.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-309">Windows stores information in these logs, but applications and services also use them tooreport errors or log information.</span></span> |<span data-ttu-id="bcf7f-310">WADWindowsEventLogsTable</span><span class="sxs-lookup"><span data-stu-id="bcf7f-310">WADWindowsEventLogsTable</span></span> |
   | <span data-ttu-id="bcf7f-311">Contadores de desempenho</span><span class="sxs-lookup"><span data-stu-id="bcf7f-311">Performance Counters</span></span> |<span data-ttu-id="bcf7f-312">Você pode coletar dados em qualquer contador de desempenho está disponível na máquina virtual de saudação.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-312">You can collect data on any performance counter that’s available on hello virtual machine.</span></span> <span data-ttu-id="bcf7f-313">sistema operacional de saudação fornece contadores de desempenho, que incluem estatísticas, como tempo de processador e uso de memória.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-313">hello operating system provides performance counters, which include many statistics such as memory usage and processor time.</span></span> |<span data-ttu-id="bcf7f-314">WADPerformanceCountersTable</span><span class="sxs-lookup"><span data-stu-id="bcf7f-314">WADPerformanceCountersTable</span></span> |
   | <span data-ttu-id="bcf7f-315">Logs de infraestrutura</span><span class="sxs-lookup"><span data-stu-id="bcf7f-315">Infrastructure Logs</span></span> |<span data-ttu-id="bcf7f-316">Esses logs são gerados de infraestrutura de diagnóstico de saudação em si.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-316">These logs are generated from hello diagnostics infrastructure itself.</span></span> |<span data-ttu-id="bcf7f-317">WADDiagnosticInfrastructureLogsTable</span><span class="sxs-lookup"><span data-stu-id="bcf7f-317">WADDiagnosticInfrastructureLogsTable</span></span> |
   | <span data-ttu-id="bcf7f-318">Logs IIS</span><span class="sxs-lookup"><span data-stu-id="bcf7f-318">IIS Logs</span></span> |<span data-ttu-id="bcf7f-319">Esses logs registram solicitações da Web.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-319">These logs record web requests.</span></span> <span data-ttu-id="bcf7f-320">Se seu serviço de nuvem obtém uma quantidade significativa de tráfego, esses logs podem ser muito longos. Portanto, você deve coletar e armazenar esses dados somente quando forem necessários.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-320">If your cloud service gets a significant amount of traffic, these logs can be quite lengthy, so you should collect and store this data only when you need it.</span></span> |<span data-ttu-id="bcf7f-321">Você pode encontrar os logs de solicitação com falha no contêiner de blob Olá em wad-iis-failedreqlogs em um caminho para essa implantação, a função e a instância.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-321">You can find failed-request logs in hello blob container under wad-iis-failedreqlogs under a path for that deployment, role, and instance.</span></span> <span data-ttu-id="bcf7f-322">Você pode encontrar logs completos em wad-iis-logfiles.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-322">You can find complete logs under wad-iis-logfiles.</span></span> <span data-ttu-id="bcf7f-323">As entradas para cada arquivo são feitas na tabela de WADDirectories hello.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-323">Entries for each file are made in hello WADDirectories table.</span></span> |
   | <span data-ttu-id="bcf7f-324">Despejos de falhas</span><span class="sxs-lookup"><span data-stu-id="bcf7f-324">Crash dumps</span></span> |<span data-ttu-id="bcf7f-325">Essas informações fornecem imagens binárias do processo do serviço de nuvem (normalmente uma função de trabalho).</span><span class="sxs-lookup"><span data-stu-id="bcf7f-325">This information provides binary images of your cloud service’s process (typically a worker role).</span></span> |<span data-ttu-id="bcf7f-326">contêiner de blob wad-crush-dumps</span><span class="sxs-lookup"><span data-stu-id="bcf7f-326">wad-crush-dumps blob container</span></span> |
   | <span data-ttu-id="bcf7f-327">Arquivos de log personalizados</span><span class="sxs-lookup"><span data-stu-id="bcf7f-327">Custom log files</span></span> |<span data-ttu-id="bcf7f-328">Logs de dados que você predefiniu.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-328">Logs of data that you predefined.</span></span> |<span data-ttu-id="bcf7f-329">Você pode especificar no local de saudação do código personalizado de arquivos de log em sua conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-329">You can specify in code hello location of custom log files in your storage account.</span></span> <span data-ttu-id="bcf7f-330">Por exemplo, você pode especificar um contêiner de blob personalizado.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-330">For example, you can specify a custom blob container.</span></span> |
4. <span data-ttu-id="bcf7f-331">Se qualquer tipo de dados são truncados, você pode tentar crescentes buffer Olá para esse tipo de dados ou encurtar o intervalo de saudação entre transferências de dados da conta de armazenamento de tooyour Olá máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-331">If data of any type is truncated, you can try increasing hello buffer for that data type or shortening hello interval between transfers of data from hello virtual machine tooyour storage account.</span></span>
5. <span data-ttu-id="bcf7f-332">(opcional) Limpeza de dados do armazenamento de saudação conta ocasionalmente tooreduce custos gerais de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-332">(optional) Purge data from hello storage account occasionally tooreduce overall storage costs.</span></span>
6. <span data-ttu-id="bcf7f-333">Quando você fizer uma implantação completa, arquivo de diagnostics.cscfg hello (.wadcfgx 2.5 do SDK do Azure) é atualizado no Azure e seu serviço de nuvem pega qualquer configuração de diagnóstico de tooyour de alterações.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-333">When you do a full deployment, hello diagnostics.cscfg file (.wadcfgx for Azure SDK 2.5) is updated in Azure, and your cloud service picks up any changes tooyour diagnostics configuration.</span></span> <span data-ttu-id="bcf7f-334">Se, em vez disso, atualizar uma implantação existente, o arquivo. cscfg de saudação não será atualizado no Azure.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-334">If you, instead, update an existing deployment, hello .cscfg file isn’t updated in Azure.</span></span> <span data-ttu-id="bcf7f-335">Você ainda pode alterar as configurações de diagnóstico, no entanto, seguindo as etapas Olá Olá próxima seção.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-335">You can still change diagnostics settings, though, by following hello steps in hello next section.</span></span> <span data-ttu-id="bcf7f-336">Para obter mais informações sobre como executar uma implantação completa e atualizar uma implantação existente, consulte [Assistente de publicação de aplicativo no Azure](vs-azure-tools-publish-azure-application-wizard.md).</span><span class="sxs-lookup"><span data-stu-id="bcf7f-336">For more information about performing a full deployment and updating an existing deployment, see [Publish Azure Application Wizard](vs-azure-tools-publish-azure-application-wizard.md).</span></span>

### <a name="tooview-virtual-machine-diagnostics-data"></a><span data-ttu-id="bcf7f-337">dados de diagnóstico de máquina virtual tooview</span><span class="sxs-lookup"><span data-stu-id="bcf7f-337">tooview virtual machine diagnostics data</span></span>
1. <span data-ttu-id="bcf7f-338">No menu de atalho Olá para a máquina virtual de saudação, escolha **exibir dados de diagnóstico**.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-338">On hello shortcut menu for hello virtual machine, choose **View Diagnostics Data**.</span></span>
   
    ![Exibir dados de diagnóstico na máquina virtual do Azure](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC766027.png)
   
    <span data-ttu-id="bcf7f-340">Isso abre o hello **resumo de diagnóstico** janela.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-340">This opens hello **Diagnostics summary** window.</span></span>
   
    ![Resumo de diagnóstico de máquina virtual do Azure](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC796667.png)  
   
    <span data-ttu-id="bcf7f-342">Se os dados mais recentes Olá não aparecem, você pode ter toowait para tooelapse de período de transferência hello.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-342">If hello most recent data doesn't appear, you might have toowait for hello transfer period tooelapse.</span></span>
   
    <span data-ttu-id="bcf7f-343">Escolha Olá **atualizar** vincular tooimmediately atualização Olá dados ou escolher um intervalo em Olá **atualização automática** dados suspensa lista caixa toohave saudação atualizados automaticamente.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-343">Choose hello **Refresh** link tooimmediately update hello data, or choose an interval in hello **Auto-Refresh** dropdown list box toohave hello data updated automatically.</span></span> <span data-ttu-id="bcf7f-344">dados de erro de saudação tooexport, escolha Olá **exportar tooCSV** botão toocreate um arquivo de valores separados por vírgulas, você pode abrir em uma planilha.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-344">tooexport hello error data, choose hello **Export tooCSV** button toocreate a comma-separated value file you can open in a spreadsheet.</span></span>

## <a name="configure-cloud-service-diagnostics-after-deployment"></a><span data-ttu-id="bcf7f-345">Configurar o diagnóstico de serviço de nuvem após a implantação</span><span class="sxs-lookup"><span data-stu-id="bcf7f-345">Configure cloud service diagnostics after deployment</span></span>
<span data-ttu-id="bcf7f-346">Se você estiver investigando um problema com um serviço de nuvem que já em execução, convém toocollect dados que você não especificou antes de você função hello originalmente implantado.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-346">If you're investigating a problem with a cloud service that already running, you might want toocollect data that you didn't specify before you originally deployed hello role.</span></span> <span data-ttu-id="bcf7f-347">Nesse caso, você pode iniciar toocollect dados usando configurações de saudação do Gerenciador de servidores.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-347">In this case, you can start toocollect that data by using hello settings in Server Explorer.</span></span> <span data-ttu-id="bcf7f-348">Você pode configurar o diagnóstico para uma única instância ou todas as instâncias de saudação em uma função, dependendo se você abre a caixa de diálogo de configuração de diagnóstico de Olá no menu de atalho Olá para instância de saudação ou função hello.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-348">You can configure diagnostics for either a single instance or all hello instances in a role, depending on whether you open hello Diagnostics Configuration dialog box from hello shortcut menu for hello instance or hello role.</span></span> <span data-ttu-id="bcf7f-349">Se você configurar o nó da função hello, as alterações se aplicam a tooall instâncias.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-349">If you configure hello role node, any changes apply tooall instances.</span></span> <span data-ttu-id="bcf7f-350">Se você configurar o nó da instância Olá, as alterações se aplicam apenas a instância toothat.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-350">If you configure hello instance node, any changes apply toothat instance only.</span></span>

### <a name="tooconfigure-diagnostics-for-a-running-cloud-service"></a><span data-ttu-id="bcf7f-351">Diagnóstico de tooconfigure para um serviço de nuvem em execução</span><span class="sxs-lookup"><span data-stu-id="bcf7f-351">tooconfigure diagnostics for a running cloud service</span></span>
1. <span data-ttu-id="bcf7f-352">No Gerenciador de servidores, expanda Olá **serviços de nuvem** nó e em seguida, expanda a função de saudação toolocate nós ou a instância que você deseja tooinvestigate ou ambos.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-352">In Server Explorer, expand hello **Cloud Services** node, and then expand nodes toolocate hello role or instance that you want tooinvestigate or both.</span></span>
   
    ![Configurando o diagnóstico](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC748913.png)
2. <span data-ttu-id="bcf7f-354">No menu de atalho Olá para um nó da instância ou um nó de função, escolha **as configurações de diagnóstico de atualização**e escolha as configurações de diagnóstico que você deseja toocollect hello.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-354">On hello shortcut menu for an instance node or a role node, choose **Update Diagnostics Settings**, and then choose hello diagnostic settings that you want toocollect.</span></span>
   
    <span data-ttu-id="bcf7f-355">Para obter informações sobre definições de configuração hello, consulte **configurar fontes de dados de diagnóstico** neste tópico.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-355">For information about hello configuration settings, see **Configure diagnostics data sources** in this topic.</span></span> <span data-ttu-id="bcf7f-356">Para obter informações sobre como tooview Olá dados de diagnóstico, consulte **exibir dados de diagnóstico de saudação** neste tópico.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-356">For information about how tooview hello diagnostics data, see **View hello diagnostics data** in this topic.</span></span>
   
    <span data-ttu-id="bcf7f-357">Se você alterar a coleta de dados no **Gerenciador de Servidores**, essas alterações permanecerão em vigor até que você reimplante totalmente o seu serviço de nuvem.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-357">If you change data collection in **Server Explorer**, these changes remain in effect until you fully redeploy your cloud service.</span></span> <span data-ttu-id="bcf7f-358">Se você usar configurações de publicação padrão hello, Olá alterações não são substituídas, desde que o padrão de saudação publicar a configuração é implantação existente do tooupdate hello, em vez de fazer uma reimplantação completa.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-358">If you use hello default publish settings, hello changes are not overwritten, since hello default publish setting is tooupdate hello existing deployment, rather than do a full redeployment.</span></span> <span data-ttu-id="bcf7f-359">Limpar as configurações de saudação se toomake no momento da implantação, vá toohello **configurações avançadas** guia no Assistente de publicação hello e limpar Olá **atualização de implantação** caixa de seleção.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-359">toomake sure hello settings clear at deployment time, go toohello **Advanced Settings** tab in hello Publish wizard and clear hello **Deployment update** checkbox.</span></span> <span data-ttu-id="bcf7f-360">Ao reimplantar com essa caixa de seleção desmarcada, as configurações de saudação reverter toothose no arquivo de saudação .wadcfgx (ou wadcfg) conforme definido por meio do editor de propriedades de saudação para função hello.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-360">When you redeploy with that checkbox cleared, hello settings revert toothose in hello .wadcfgx (or .wadcfg) file as set through hello Properties editor for hello role.</span></span> <span data-ttu-id="bcf7f-361">Se você atualizar sua implantação, o Azure mantém as configurações antigas do hello.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-361">If you update your deployment, Azure keeps hello old settings.</span></span>

## <a name="troubleshoot-azure-cloud-service-issues"></a><span data-ttu-id="bcf7f-362">Solucionar problemas do serviço de nuvem do Azure</span><span class="sxs-lookup"><span data-stu-id="bcf7f-362">Troubleshoot Azure cloud service issues</span></span>
<span data-ttu-id="bcf7f-363">Se você tiver problemas com seus projetos de serviço de nuvem, como uma função que travou em um status "ocupado", repetidamente recicla ou gera um erro interno do servidor, há ferramentas e técnicas que você pode usar toodiagnose e corrigir esses problemas.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-363">If you experience problems with your cloud service projects, such as a role that gets stuck in a "busy" status, repeatedly recycles, or throws an internal server error, there are tools and techniques you can use toodiagnose and fix these problems.</span></span> <span data-ttu-id="bcf7f-364">Para exemplos específicos de problemas comuns e soluções, bem como uma visão geral dos conceitos de saudação e ferramentas usados toodiagnose e corrigir esses erros, consulte [dados de diagnóstico de computação do Azure PaaS](http://blogs.msdn.com/b/kwill/archive/2013/08/09/windows-azure-paas-compute-diagnostics-data.aspx).</span><span class="sxs-lookup"><span data-stu-id="bcf7f-364">For specific examples of common problems and solutions, as well as an overview of hello concepts and tools used toodiagnose and fix such errors, see [Azure PaaS Compute Diagnostics Data](http://blogs.msdn.com/b/kwill/archive/2013/08/09/windows-azure-paas-compute-diagnostics-data.aspx).</span></span>

## <a name="q--a"></a><span data-ttu-id="bcf7f-365">Perguntas e respostas</span><span class="sxs-lookup"><span data-stu-id="bcf7f-365">Q & A</span></span>
<span data-ttu-id="bcf7f-366">**O que é o tamanho do buffer de saudação e o tamanho deve ser?**</span><span class="sxs-lookup"><span data-stu-id="bcf7f-366">**What is hello buffer size, and how large should it be?**</span></span>

<span data-ttu-id="bcf7f-367">Em cada instância de máquina virtual, as cotas limitam quantos dados de diagnósticos que podem ser armazenados no sistema de arquivos local hello.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-367">On each virtual machine instance, quotas limit how much diagnostic data can be stored on hello local file system.</span></span> <span data-ttu-id="bcf7f-368">Além disso, você pode especificar um tamanho do buffer para cada tipo de dados de diagnóstico disponíveis.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-368">In addition, you specify a buffer size for each type of diagnostic data that's available.</span></span> <span data-ttu-id="bcf7f-369">Esse tamanho do buffer age como uma cota individual para esse tipo de dados.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-369">This buffer size acts like an individual quota for that type of data.</span></span> <span data-ttu-id="bcf7f-370">Verificando inferior Olá Olá da caixa de diálogo, você pode determinar Olá cota geral e a quantidade de saudação de memória que permanece.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-370">By checking hello bottom of hello dialog box, you can determine hello overall quota and hello amount of memory that remains.</span></span> <span data-ttu-id="bcf7f-371">Se você especificar buffers maiores ou mais tipos de dados, você deverá abordar Olá cota geral.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-371">If you specify larger buffers or more types of data, you'll approach hello overall quota.</span></span> <span data-ttu-id="bcf7f-372">Você pode alterar Olá cota geral modificando o arquivo de configuração diagnostics.wadcfg/.wadcfgx hello.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-372">You can change hello overall quota by modifying hello diagnostics.wadcfg/.wadcfgx configuration file.</span></span> <span data-ttu-id="bcf7f-373">Olá diagnóstico dados são armazenados em Olá mesmo sistema de arquivos como dados do aplicativo, para que se seu aplicativo usa muito espaço em disco, você não deve aumentar Olá cota geral do diagnóstico.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-373">hello diagnostics data is stored on hello same filesystem as your application’s data, so if your application uses a lot of disk space, you shouldn’t increase hello overall diagnostics quota.</span></span>

<span data-ttu-id="bcf7f-374">**O que é o período de transferência hello e quanto tempo deve ser?**</span><span class="sxs-lookup"><span data-stu-id="bcf7f-374">**What is hello transfer period, and how long should it be?**</span></span>

<span data-ttu-id="bcf7f-375">o período de transferência Olá é Olá tempo que captura a decorrer entre os dados.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-375">hello transfer period is hello amount of time that elapses between data captures.</span></span> <span data-ttu-id="bcf7f-376">Depois de cada período de transferência, os dados são movidos do sistema de arquivos local Olá em tootables uma máquina virtual em sua conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-376">After each transfer period, data is moved from hello local filesystem on a virtual machine tootables in your storage account.</span></span> <span data-ttu-id="bcf7f-377">Se o quantidade de saudação de dados que são coletados excede a cota de saudação antes do final de saudação de um período de transferência, os dados mais antigos serão descartados.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-377">If hello amount of data that's collected exceeds hello quota before hello end of a transfer period, older data is discarded.</span></span> <span data-ttu-id="bcf7f-378">Talvez você queira toodecrease o período de transferência Olá se você estiver perda de dados porque seus dados excedem o tamanho do buffer hello ou Olá cota geral.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-378">You might want toodecrease hello transfer period if you're losing data because your data exceeds hello buffer size or hello overall quota.</span></span>

<span data-ttu-id="bcf7f-379">**Fuso horário são Olá carimbos de hora?**</span><span class="sxs-lookup"><span data-stu-id="bcf7f-379">**What time zone are hello time stamps in?**</span></span>

<span data-ttu-id="bcf7f-380">os carimbos de hora Olá estão no fuso horário local de saudação do hello data center que hospeda o serviço de nuvem.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-380">hello time stamps are in hello local time zone of hello data center that hosts your cloud service.</span></span> <span data-ttu-id="bcf7f-381">Olá seguintes três colunas de carimbo de hora nas tabelas de log hello são usadas.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-381">hello following three timestamp columns in hello log tables are used.</span></span>

* <span data-ttu-id="bcf7f-382">**PreciseTimeStamp** é Olá ETW carimbo de hora Olá evento.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-382">**PreciseTimeStamp** is hello ETW timestamp of hello event.</span></span> <span data-ttu-id="bcf7f-383">Ou seja, o evento Olá Olá é registrado de cliente de saudação.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-383">That is, hello time hello event is logged from hello client.</span></span>
* <span data-ttu-id="bcf7f-384">**Carimbo de hora** é PreciseTimeStamp arredondado para baixo de limite de frequência de carregamento de toohello.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-384">**TIMESTAMP** is PreciseTimeStamp rounded down toohello upload frequency boundary.</span></span> <span data-ttu-id="bcf7f-385">Assim, se sua frequência de carregamento é 5 minutos e o evento Olá tempo 12:17:00, o carimbo de hora será 15:00:00.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-385">So, if your upload frequency is 5 minutes and hello event time 00:17:12, TIMESTAMP will be 00:15:00.</span></span>
* <span data-ttu-id="bcf7f-386">**Carimbo de hora** é Olá carimbo de hora na qual Olá entidade foi criada no hello tabela do Azure.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-386">**Timestamp** is hello timestamp at which hello entity was created in hello Azure table.</span></span>

<span data-ttu-id="bcf7f-387">**Como gerenciar custos ao coletar informações de diagnóstico?**</span><span class="sxs-lookup"><span data-stu-id="bcf7f-387">**How do I manage costs when collecting diagnostic information?**</span></span>

<span data-ttu-id="bcf7f-388">Olá configurações padrão (**nível de Log** definido muito**erro** e **o período de transferência** definido muito**1 minuto**) são projetado toominimize custo.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-388">hello default settings (**Log level** set too**Error** and **Transfer period** set too**1 minute**) are designed toominimize cost.</span></span> <span data-ttu-id="bcf7f-389">Os custos de computação aumentará, se você coleta mais dados de diagnóstico ou diminua o período de transferência hello.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-389">Your compute costs will increase if you collect more diagnostic data or decrease hello transfer period.</span></span> <span data-ttu-id="bcf7f-390">Não colete mais dados que você precisa e não se esqueça de coleta de dados toodisable quando você não precisa mais dela.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-390">Don’t collect more data than you need, and don’t forget toodisable data collection when you no longer need it.</span></span> <span data-ttu-id="bcf7f-391">Você pode sempre habilitá-lo novamente, mesmo em tempo de execução, conforme mostrado na seção anterior hello.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-391">You can always enable it again, even at runtime, as shown in hello previous section.</span></span>

<span data-ttu-id="bcf7f-392">**Como posso coletar logs de solicitação com falha do IIS?**</span><span class="sxs-lookup"><span data-stu-id="bcf7f-392">**How do I collect failed-request logs from IIS?**</span></span>

<span data-ttu-id="bcf7f-393">Por padrão, o IIS não coleta logs de solicitação com falha.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-393">By default, IIS doesn’t collect failed-request logs.</span></span> <span data-ttu-id="bcf7f-394">Você pode configurar o IIS toocollect-los, se você editar Olá para sua função web. config.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-394">You can configure IIS toocollect them if you edit hello web.config file for your web role.</span></span>

<span data-ttu-id="bcf7f-395">**Não estou obtendo informações de rastreamento de métodos RoleEntryPoint como OnStart. O que está errado?**</span><span class="sxs-lookup"><span data-stu-id="bcf7f-395">**I’m not getting trace information from RoleEntryPoint methods like OnStart. What’s wrong?**</span></span>

<span data-ttu-id="bcf7f-396">métodos de saudação do RoleEntryPoint são chamados no contexto de saudação do WAIISHost.exe, não o IIS.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-396">hello methods of RoleEntryPoint are called in hello context of WAIISHost.exe, not IIS.</span></span> <span data-ttu-id="bcf7f-397">Portanto, Olá informações de configuração no Web. config que normalmente permite rastreamento não se aplica.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-397">Therefore, hello configuration information in web.config that normally enables tracing doesn’t apply.</span></span> <span data-ttu-id="bcf7f-398">tooresolve esse problema, adicione um projeto de função da web. config arquivo tooyour e nomeie Olá arquivo toomatch Olá assembly de saída que contém o código de RoleEntryPoint hello.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-398">tooresolve this issue, add a .config file tooyour web role project, and name hello file toomatch hello output assembly that contains hello RoleEntryPoint code.</span></span> <span data-ttu-id="bcf7f-399">No projeto de função da web saudação padrão, o nome de saudação do arquivo. config de saudação seria WAIISHost.exe.config. Em seguida, adicione Olá arquivo toothis de linhas a seguir:</span><span class="sxs-lookup"><span data-stu-id="bcf7f-399">In hello default web role project, hello name of hello .config file would be WAIISHost.exe.config. Then add hello following lines toothis file:</span></span>

```
<system.diagnostics>
  <trace>
      <listeners>
          <add name “AzureDiagnostics” type=”Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener”>
              <filter type=”” />
          </add>
      </listeners>
  </trace>
</system.diagnostics>
```

<span data-ttu-id="bcf7f-400">Agora, em Olá **propriedades** janela, Olá conjunto **copiar tooOutput diretório** propriedade muito**copiar sempre**.</span><span class="sxs-lookup"><span data-stu-id="bcf7f-400">Now, in hello **Properties** window, set hello **Copy tooOutput Directory** property too**Copy always**.</span></span>

## <a name="next-steps"></a><span data-ttu-id="bcf7f-401">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="bcf7f-401">Next steps</span></span>
<span data-ttu-id="bcf7f-402">toolearn mais sobre o diagnóstico de log no Azure, consulte [habilitando o diagnóstico nos serviços de nuvem do Azure e máquinas virtuais](cloud-services/cloud-services-dotnet-diagnostics.md) e [habilitar o log de diagnóstico para aplicativos web no serviço de aplicativo do Azure](app-service-web/web-sites-enable-diagnostic-log.md).</span><span class="sxs-lookup"><span data-stu-id="bcf7f-402">toolearn more about diagnostics logging in Azure, see [Enabling Diagnostics in Azure Cloud Services and Virtual Machines](cloud-services/cloud-services-dotnet-diagnostics.md) and [Enable diagnostics logging for web apps in Azure App Service](app-service-web/web-sites-enable-diagnostic-log.md).</span></span>

