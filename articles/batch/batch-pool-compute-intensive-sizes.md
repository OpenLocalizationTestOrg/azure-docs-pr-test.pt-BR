---
title: "computação intensa aaaUse VMs do Azure com o lote | Microsoft Docs"
description: "Como os tamanhos de tootake vantagem de VM compatíveis com RDMA ou GPU habilitado nos pools de lote do Azure"
services: batch
documentationcenter: 
author: dlepow
manager: timlt
editor: 
ms.assetid: 
ms.service: batch
ms.workload: big-compute
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/27/2017
ms.author: danlep
ms.openlocfilehash: 6a462a5f2a44ddcec8bf4e5c200d444cac8fafe6
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="use-rdma-capable-or-gpu-enabled-instances-in-batch-pools"></a><span data-ttu-id="876f2-103">Usar instâncias compatíveis com RDMA ou habilitadas para GPU em pools do Lote</span><span class="sxs-lookup"><span data-stu-id="876f2-103">Use RDMA-capable or GPU-enabled instances in Batch pools</span></span>

<span data-ttu-id="876f2-104">toorun determinados trabalhos de lote, talvez você queira tootake vantagem dos tamanhos de VM do Azure criado para a computação em larga escala.</span><span class="sxs-lookup"><span data-stu-id="876f2-104">toorun certain Batch jobs, you might want tootake advantage of Azure VM sizes designed for large-scale computation.</span></span> <span data-ttu-id="876f2-105">Por exemplo, toorun várias instâncias [cargas de trabalho MPI](batch-mpi.md), você pode escolher A8, A9, ou tamanhos H-series que tem uma rede de interface para direto memória RDMA (acesso remoto).</span><span class="sxs-lookup"><span data-stu-id="876f2-105">For example, toorun multi-instance [MPI workloads](batch-mpi.md), you can choose A8, A9, or H-series sizes that have a network interface for Remote Direct Memory Access (RDMA).</span></span> <span data-ttu-id="876f2-106">Esses tamanhos de se conectar a rede InfiniBand de tooan para comunicação entre nós, o que pode acelerar aplicativos MPI.</span><span class="sxs-lookup"><span data-stu-id="876f2-106">These sizes connect tooan InfiniBand network for inter-node communication, which can accelerate MPI applications.</span></span> <span data-ttu-id="876f2-107">Ou, para aplicativos CUDA, você pode escolher tamanhos da série N que incluem cartões de GPU (unidade de processamento gráfico) da NVIDIA Tesla.</span><span class="sxs-lookup"><span data-stu-id="876f2-107">Or for CUDA applications, you can choose N-series sizes that include NVIDIA Tesla graphics processing unit (GPU) cards.</span></span>

<span data-ttu-id="876f2-108">Este artigo fornece diretrizes e exemplos toouse alguns dos tamanhos de especializada do Azure nos pools de lote.</span><span class="sxs-lookup"><span data-stu-id="876f2-108">This article provides guidance and examples toouse some of Azure's specialized sizes in Batch pools.</span></span> <span data-ttu-id="876f2-109">Para obter especificações e contexto, consulte:</span><span class="sxs-lookup"><span data-stu-id="876f2-109">For specs and background, see:</span></span>

* <span data-ttu-id="876f2-110">Tamanhos de VM de computação de alto desempenho ([Linux](../virtual-machines/linux/sizes-hpc.md), [Windows](../virtual-machines/windows/sizes-hpc.md))</span><span class="sxs-lookup"><span data-stu-id="876f2-110">High performance compute VM sizes ([Linux](../virtual-machines/linux/sizes-hpc.md), [Windows](../virtual-machines/windows/sizes-hpc.md))</span></span> 

* <span data-ttu-id="876f2-111">Tamanhos de VM habilitados para GPU ([Linux](../virtual-machines/linux/sizes-gpu.md), [Windows](../virtual-machines/windows/sizes-gpu.md))</span><span class="sxs-lookup"><span data-stu-id="876f2-111">GPU-enabled VM sizes ([Linux](../virtual-machines/linux/sizes-gpu.md), [Windows](../virtual-machines/windows/sizes-gpu.md))</span></span> 


## <a name="subscription-and-account-limits"></a><span data-ttu-id="876f2-112">Limites de assinatura e de conta</span><span class="sxs-lookup"><span data-stu-id="876f2-112">Subscription and account limits</span></span>

* <span data-ttu-id="876f2-113">**Cotas** -um ou mais cotas do Azure podem limitar Olá número ou tipo de nós, você pode adicionar pool de lote tooa.</span><span class="sxs-lookup"><span data-stu-id="876f2-113">**Quotas** - One or more Azure quotas may limit hello number or type of nodes you can add tooa Batch pool.</span></span> <span data-ttu-id="876f2-114">Você é mais provável toobe limitada quando você escolher compatíveis com RDMA, GPU habilitado, ou outros tamanhos de VM com vários núcleos.</span><span class="sxs-lookup"><span data-stu-id="876f2-114">You are more likely toobe limited when you choose RDMA-capable, GPU-enabled, or other multicore VM sizes.</span></span> <span data-ttu-id="876f2-115">Dependendo do tipo de saudação da conta de lote criado, as cotas de Olá podem se aplicam a própria conta toohello ou tooyour assinatura.</span><span class="sxs-lookup"><span data-stu-id="876f2-115">Depending on hello type of Batch account you created, hello quotas could apply toohello account itself or tooyour subscription.</span></span>

    * <span data-ttu-id="876f2-116">Se você criou sua conta de lote no hello **serviço de lote** configuração, você está limitado pela Olá [cota de núcleos dedicados por conta do lote](batch-quota-limit.md#resource-quotas).</span><span class="sxs-lookup"><span data-stu-id="876f2-116">If you created your Batch account in hello **Batch service** configuration, you are limited by hello [dedicated cores quota per Batch account](batch-quota-limit.md#resource-quotas).</span></span> <span data-ttu-id="876f2-117">Por padrão, essa cota é de 20 núcleos.</span><span class="sxs-lookup"><span data-stu-id="876f2-117">By default, this quota is 20 cores.</span></span> <span data-ttu-id="876f2-118">Uma cota separada aplica-se muito[VMs de baixa prioridade](batch-low-pri-vms.md), se você usá-los.</span><span class="sxs-lookup"><span data-stu-id="876f2-118">A separate quota applies too[low-priority VMs](batch-low-pri-vms.md), if you use them.</span></span> 

    * <span data-ttu-id="876f2-119">Se você criou a conta de saudação em Olá **assinatura de usuário** configuração, sua assinatura limita o número de saudação de núcleos VM por região.</span><span class="sxs-lookup"><span data-stu-id="876f2-119">If you created hello account in hello **User subscription** configuration, your subscription limits hello number of VM cores per region.</span></span> <span data-ttu-id="876f2-120">Veja [Assinatura do Azure e limites, cotas e restrições de serviço](../azure-subscription-service-limits.md).</span><span class="sxs-lookup"><span data-stu-id="876f2-120">See [Azure subscription and service limits, quotas, and constraints](../azure-subscription-service-limits.md).</span></span> <span data-ttu-id="876f2-121">Sua assinatura também se aplica a um tamanhos de VM toocertain cota regional, incluindo as instâncias HPC e GPU.</span><span class="sxs-lookup"><span data-stu-id="876f2-121">Your subscription also applies a regional quota toocertain VM sizes, including HPC and GPU instances.</span></span> <span data-ttu-id="876f2-122">Na configuração de assinatura de usuário hello, sem cotas adicionais se aplicam a conta do lote toohello.</span><span class="sxs-lookup"><span data-stu-id="876f2-122">In hello user subscription configuration, no additional quotas apply toohello Batch account.</span></span> 

  <span data-ttu-id="876f2-123">Talvez seja necessário tooincrease um ou mais cotas ao usar um tamanho VM especializado em lote.</span><span class="sxs-lookup"><span data-stu-id="876f2-123">You might need tooincrease one or more quotas when using a specialized VM size in Batch.</span></span> <span data-ttu-id="876f2-124">toorequest um aumento de cota, abra um [solicitação de suporte do cliente online](../azure-supportability/how-to-create-azure-support-request.md) sem custo adicional.</span><span class="sxs-lookup"><span data-stu-id="876f2-124">toorequest a quota increase, open an [online customer support request](../azure-supportability/how-to-create-azure-support-request.md) at no charge.</span></span>

* <span data-ttu-id="876f2-125">**Disponibilidade de região** - computação intensa VMs podem não estar disponíveis em regiões Olá onde você pode criar suas contas do Batch.</span><span class="sxs-lookup"><span data-stu-id="876f2-125">**Region availability** - Compute-intensive VMs might not be available in hello regions where you create your Batch accounts.</span></span> <span data-ttu-id="876f2-126">toocheck que um tamanho estiver disponível, consulte [produtos disponíveis por região](https://azure.microsoft.com/regions/services/).</span><span class="sxs-lookup"><span data-stu-id="876f2-126">toocheck that a size is available, see [Products available by region](https://azure.microsoft.com/regions/services/).</span></span>


## <a name="dependencies"></a><span data-ttu-id="876f2-127">Dependências</span><span class="sxs-lookup"><span data-stu-id="876f2-127">Dependencies</span></span>

<span data-ttu-id="876f2-128">Olá RDMA e os recursos GPU de tamanhos de computação intensa têm suporte apenas em determinados sistemas operacionais.</span><span class="sxs-lookup"><span data-stu-id="876f2-128">hello RDMA and GPU capabilities of compute-intensive sizes are supported only in certain operating systems.</span></span> <span data-ttu-id="876f2-129">Dependendo do seu sistema operacional, talvez você precise tooinstall ou configurar o driver adicional ou outros softwares.</span><span class="sxs-lookup"><span data-stu-id="876f2-129">Depending on your operating system, you might need tooinstall or configure additional driver or other software.</span></span> <span data-ttu-id="876f2-130">Olá tabelas a seguir resume essas dependências.</span><span class="sxs-lookup"><span data-stu-id="876f2-130">hello following tables summarize these dependencies.</span></span> <span data-ttu-id="876f2-131">Consulte os artigos vinculados para obter detalhes.</span><span class="sxs-lookup"><span data-stu-id="876f2-131">See linked articles for details.</span></span> <span data-ttu-id="876f2-132">Para pools de lote de tooconfigure de opções, consulte mais adiante neste artigo.</span><span class="sxs-lookup"><span data-stu-id="876f2-132">For options tooconfigure Batch pools, see later in this article.</span></span>


### <a name="linux-pools---virtual-machine-configuration"></a><span data-ttu-id="876f2-133">Pools do Linux – configuração de máquina virtual</span><span class="sxs-lookup"><span data-stu-id="876f2-133">Linux pools - Virtual machine configuration</span></span>

| <span data-ttu-id="876f2-134">Tamanho</span><span class="sxs-lookup"><span data-stu-id="876f2-134">Size</span></span> | <span data-ttu-id="876f2-135">Recurso</span><span class="sxs-lookup"><span data-stu-id="876f2-135">Capability</span></span> | <span data-ttu-id="876f2-136">Sistemas operacionais</span><span class="sxs-lookup"><span data-stu-id="876f2-136">Operating systems</span></span> | <span data-ttu-id="876f2-137">Software necessário</span><span class="sxs-lookup"><span data-stu-id="876f2-137">Required software</span></span> | <span data-ttu-id="876f2-138">Configurações do pool</span><span class="sxs-lookup"><span data-stu-id="876f2-138">Pool settings</span></span> |
| -------- | -------- | ----- |  -------- | ----- |
| [<span data-ttu-id="876f2-139">H16r, H16mr, A8, A9</span><span class="sxs-lookup"><span data-stu-id="876f2-139">H16r, H16mr, A8, A9</span></span>](../virtual-machines/linux/sizes-hpc.md#rdma-capable-instances) | <span data-ttu-id="876f2-140">RDMA</span><span class="sxs-lookup"><span data-stu-id="876f2-140">RDMA</span></span> | <span data-ttu-id="876f2-141">SUSE Linux Enterprise Server 12 HPC ou</span><span class="sxs-lookup"><span data-stu-id="876f2-141">SUSE Linux Enterprise Server 12 HPC or</span></span><br/><span data-ttu-id="876f2-142">HPC baseado em CentOS</span><span class="sxs-lookup"><span data-stu-id="876f2-142">CentOS-based HPC</span></span><br/><span data-ttu-id="876f2-143">(Azure Marketplace)</span><span class="sxs-lookup"><span data-stu-id="876f2-143">(Azure Marketplace)</span></span> | <span data-ttu-id="876f2-144">Intel MPI 5</span><span class="sxs-lookup"><span data-stu-id="876f2-144">Intel MPI 5</span></span> | <span data-ttu-id="876f2-145">Habilitar a comunicação entre nós, desabilitar a execução de tarefas simultâneas</span><span class="sxs-lookup"><span data-stu-id="876f2-145">Enable inter-node communication, disable concurrent task execution</span></span> |
| [<span data-ttu-id="876f2-146">Série NC*</span><span class="sxs-lookup"><span data-stu-id="876f2-146">NC series*</span></span>](../virtual-machines/linux/n-series-driver-setup.md#install-cuda-drivers-for-nc-vms) | <span data-ttu-id="876f2-147">GPU NVIDIA Tesla K80</span><span class="sxs-lookup"><span data-stu-id="876f2-147">NVIDIA Tesla K80 GPU</span></span> | <span data-ttu-id="876f2-148">Ubuntu 16.04 LTS.</span><span class="sxs-lookup"><span data-stu-id="876f2-148">Ubuntu 16.04 LTS.</span></span><br/><span data-ttu-id="876f2-149">Red Hat Enterprise Linux 7.3 ou</span><span class="sxs-lookup"><span data-stu-id="876f2-149">Red Hat Enterprise Linux 7.3, or</span></span><br/><span data-ttu-id="876f2-150">CentOS 7.3</span><span class="sxs-lookup"><span data-stu-id="876f2-150">CentOS-based 7.3</span></span><br/><span data-ttu-id="876f2-151">(Azure Marketplace)</span><span class="sxs-lookup"><span data-stu-id="876f2-151">(Azure Marketplace)</span></span> | <span data-ttu-id="876f2-152">Drivers NVIDIA CUDA Toolkit 8.0</span><span class="sxs-lookup"><span data-stu-id="876f2-152">NVIDIA CUDA Toolkit 8.0 drivers</span></span> | <span data-ttu-id="876f2-153">N/D</span><span class="sxs-lookup"><span data-stu-id="876f2-153">N/A</span></span> | 
| [<span data-ttu-id="876f2-154">Série NV</span><span class="sxs-lookup"><span data-stu-id="876f2-154">NV series</span></span>](../virtual-machines/linux/n-series-driver-setup.md#install-grid-drivers-for-nv-vms) | <span data-ttu-id="876f2-155">GPU NVIDIA Tesla M60</span><span class="sxs-lookup"><span data-stu-id="876f2-155">NVIDIA Tesla M60 GPU</span></span> | <span data-ttu-id="876f2-156">Ubuntu 16.04 LTS</span><span class="sxs-lookup"><span data-stu-id="876f2-156">Ubuntu 16.04 LTS</span></span><br/><span data-ttu-id="876f2-157">Red Hat Enterprise Linux 7.3</span><span class="sxs-lookup"><span data-stu-id="876f2-157">Red Hat Enterprise Linux 7.3</span></span><br/><span data-ttu-id="876f2-158">CentOS 7.3</span><span class="sxs-lookup"><span data-stu-id="876f2-158">CentOS-based 7.3</span></span><br/><span data-ttu-id="876f2-159">(Azure Marketplace)</span><span class="sxs-lookup"><span data-stu-id="876f2-159">(Azure Marketplace)</span></span> | <span data-ttu-id="876f2-160">Drivers NVIDIA GRID 4.3</span><span class="sxs-lookup"><span data-stu-id="876f2-160">NVIDIA GRID 4.3 drivers</span></span> | <span data-ttu-id="876f2-161">N/D</span><span class="sxs-lookup"><span data-stu-id="876f2-161">N/A</span></span> |

<span data-ttu-id="876f2-162">* A conectividade RDMA em VMs NC24r tem suporte em HPC baseado em CentOS 7.3 com Intel MPI.</span><span class="sxs-lookup"><span data-stu-id="876f2-162">*RDMA connectivity on NC24r VMs is supported on CentOS-based 7.3 HPC with Intel MPI.</span></span>



### <a name="windows-pools---virtual-machine-configuration"></a><span data-ttu-id="876f2-163">Pools do Windows – configuração de máquina virtual</span><span class="sxs-lookup"><span data-stu-id="876f2-163">Windows pools - Virtual machine configuration</span></span>

| <span data-ttu-id="876f2-164">Tamanho</span><span class="sxs-lookup"><span data-stu-id="876f2-164">Size</span></span> | <span data-ttu-id="876f2-165">Recurso</span><span class="sxs-lookup"><span data-stu-id="876f2-165">Capability</span></span> | <span data-ttu-id="876f2-166">Sistemas operacionais</span><span class="sxs-lookup"><span data-stu-id="876f2-166">Operating systems</span></span> | <span data-ttu-id="876f2-167">Software necessário</span><span class="sxs-lookup"><span data-stu-id="876f2-167">Required software</span></span> | <span data-ttu-id="876f2-168">Configurações do pool</span><span class="sxs-lookup"><span data-stu-id="876f2-168">Pool settings</span></span> |
| -------- | ------ | -------- | -------- | ----- |
| [<span data-ttu-id="876f2-169">H16r, H16mr, A8, A9</span><span class="sxs-lookup"><span data-stu-id="876f2-169">H16r, H16mr, A8, A9</span></span>](../virtual-machines/windows/sizes-hpc.md#rdma-capable-instances) | <span data-ttu-id="876f2-170">RDMA</span><span class="sxs-lookup"><span data-stu-id="876f2-170">RDMA</span></span> | <span data-ttu-id="876f2-171">Windows Server 2012 R2 ou</span><span class="sxs-lookup"><span data-stu-id="876f2-171">Windows Server 2012 R2 or</span></span><br/><span data-ttu-id="876f2-172">Windows Server 2012 (Azure Marketplace)</span><span class="sxs-lookup"><span data-stu-id="876f2-172">Windows Server 2012 (Azure Marketplace)</span></span> | <span data-ttu-id="876f2-173">Microsoft MPI 2012 R2 ou posterior, ou</span><span class="sxs-lookup"><span data-stu-id="876f2-173">Microsoft MPI 2012 R2 or later, or</span></span><br/> <span data-ttu-id="876f2-174">Intel MPI 5</span><span class="sxs-lookup"><span data-stu-id="876f2-174">Intel MPI 5</span></span><br/><br/><span data-ttu-id="876f2-175">Extensão de VM do Azure HpcVMDrivers</span><span class="sxs-lookup"><span data-stu-id="876f2-175">HpcVMDrivers Azure VM extension</span></span> | <span data-ttu-id="876f2-176">Habilitar a comunicação entre nós, desabilitar a execução de tarefas simultâneas</span><span class="sxs-lookup"><span data-stu-id="876f2-176">Enable inter-node communication, disable concurrent task execution</span></span> |
| [<span data-ttu-id="876f2-177">Série NC*</span><span class="sxs-lookup"><span data-stu-id="876f2-177">NC series*</span></span>](../virtual-machines/windows/n-series-driver-setup.md) | <span data-ttu-id="876f2-178">GPU NVIDIA Tesla K80</span><span class="sxs-lookup"><span data-stu-id="876f2-178">NVIDIA Tesla K80 GPU</span></span> | <span data-ttu-id="876f2-179">Windows Server 2016 ou</span><span class="sxs-lookup"><span data-stu-id="876f2-179">Windows Server 2016 or</span></span> <br/><span data-ttu-id="876f2-180">Windows Server 2012 R2 (Azure Marketplace)</span><span class="sxs-lookup"><span data-stu-id="876f2-180">Windows Server 2012 R2 (Azure Marketplace)</span></span> | <span data-ttu-id="876f2-181">Drivers NVIDIA Tesla ou drivers CUDA Toolkit 8.0</span><span class="sxs-lookup"><span data-stu-id="876f2-181">NVIDIA Tesla drivers or CUDA Toolkit 8.0 drivers</span></span>| <span data-ttu-id="876f2-182">N/D</span><span class="sxs-lookup"><span data-stu-id="876f2-182">N/A</span></span> | 
| [<span data-ttu-id="876f2-183">Série NV</span><span class="sxs-lookup"><span data-stu-id="876f2-183">NV series</span></span>](../virtual-machines/windows/n-series-driver-setup.md) | <span data-ttu-id="876f2-184">GPU NVIDIA Tesla M60</span><span class="sxs-lookup"><span data-stu-id="876f2-184">NVIDIA Tesla M60 GPU</span></span> | <span data-ttu-id="876f2-185">Windows Server 2016 ou</span><span class="sxs-lookup"><span data-stu-id="876f2-185">Windows Server 2016 or</span></span><br/><span data-ttu-id="876f2-186">Windows Server 2012 R2 (Azure Marketplace)</span><span class="sxs-lookup"><span data-stu-id="876f2-186">Windows Server 2012 R2 (Azure Marketplace)</span></span> | <span data-ttu-id="876f2-187">Drivers NVIDIA GRID 4.3</span><span class="sxs-lookup"><span data-stu-id="876f2-187">NVIDIA GRID 4.3 drivers</span></span> | <span data-ttu-id="876f2-188">N/D</span><span class="sxs-lookup"><span data-stu-id="876f2-188">N/A</span></span> |

<span data-ttu-id="876f2-189">* A conectividade RDMA em VMs NC24r tem suporte no Windows Server 2012 R2 com a extensão HpcVMDrivers e Microsoft MPI ou Intel MPI.</span><span class="sxs-lookup"><span data-stu-id="876f2-189">*RDMA connectivity on NC24r VMs is supported on Windows Server 2012 R2 with HpcVMDrivers extension and Microsoft MPI or Intel MPI.</span></span>

### <a name="windows-pools---cloud-services-configuration"></a><span data-ttu-id="876f2-190">Pools do Windows – configuração de serviços de nuvem</span><span class="sxs-lookup"><span data-stu-id="876f2-190">Windows pools - Cloud services configuration</span></span>

> [!NOTE]
> <span data-ttu-id="876f2-191">Não há suporte para tamanhos de N-series em pools de lote com a configuração de serviços de nuvem hello.</span><span class="sxs-lookup"><span data-stu-id="876f2-191">N-series sizes are not supported in Batch pools with hello cloud services configuration.</span></span>
>

| <span data-ttu-id="876f2-192">Tamanho</span><span class="sxs-lookup"><span data-stu-id="876f2-192">Size</span></span> | <span data-ttu-id="876f2-193">Recurso</span><span class="sxs-lookup"><span data-stu-id="876f2-193">Capability</span></span> | <span data-ttu-id="876f2-194">Sistemas operacionais</span><span class="sxs-lookup"><span data-stu-id="876f2-194">Operating systems</span></span> | <span data-ttu-id="876f2-195">Software necessário</span><span class="sxs-lookup"><span data-stu-id="876f2-195">Required software</span></span> | <span data-ttu-id="876f2-196">Configurações do pool</span><span class="sxs-lookup"><span data-stu-id="876f2-196">Pool settings</span></span> |
| -------- | ------- | -------- | -------- | ----- |
| [<span data-ttu-id="876f2-197">H16r, H16mr, A8, A9</span><span class="sxs-lookup"><span data-stu-id="876f2-197">H16r, H16mr, A8, A9</span></span>](../virtual-machines/windows/sizes-hpc.md#rdma-capable-instances) | <span data-ttu-id="876f2-198">RDMA</span><span class="sxs-lookup"><span data-stu-id="876f2-198">RDMA</span></span> | <span data-ttu-id="876f2-199">Windows Server 2012 R2,</span><span class="sxs-lookup"><span data-stu-id="876f2-199">Windows Server 2012 R2,</span></span><br/><span data-ttu-id="876f2-200">Windows Server 2012 ou</span><span class="sxs-lookup"><span data-stu-id="876f2-200">Windows Server 2012, or</span></span><br/><span data-ttu-id="876f2-201">Windows Server 2008 R2 (família do SO convidado)</span><span class="sxs-lookup"><span data-stu-id="876f2-201">Windows Server 2008 R2 (Guest OS family)</span></span> | <span data-ttu-id="876f2-202">Microsoft MPI 2012 R2 ou posterior, ou</span><span class="sxs-lookup"><span data-stu-id="876f2-202">Microsoft MPI 2012 R2 or later, or</span></span><br/><span data-ttu-id="876f2-203">Intel MPI 5</span><span class="sxs-lookup"><span data-stu-id="876f2-203">Intel MPI 5</span></span><br/><br/><span data-ttu-id="876f2-204">Extensão de VM do Azure HpcVMDrivers</span><span class="sxs-lookup"><span data-stu-id="876f2-204">HpcVMDrivers Azure VM extension</span></span> | <span data-ttu-id="876f2-205">Habilitar a comunicação entre nós,</span><span class="sxs-lookup"><span data-stu-id="876f2-205">Enable inter-node communication,</span></span><br/> <span data-ttu-id="876f2-206">desabilitar a execução de tarefas simultâneas</span><span class="sxs-lookup"><span data-stu-id="876f2-206">disable concurrent task execution</span></span> |





## <a name="pool-configuration-options"></a><span data-ttu-id="876f2-207">Opções de configuração do pool</span><span class="sxs-lookup"><span data-stu-id="876f2-207">Pool configuration options</span></span>

<span data-ttu-id="876f2-208">tooconfigure um tamanho VM especializado para seu pool de lote, Olá APIs de lote e ferramentas fornecem vários software de tooinstall necessário de opções ou drivers, incluindo:</span><span class="sxs-lookup"><span data-stu-id="876f2-208">tooconfigure a specialized VM size for your Batch pool, hello Batch APIs and tools provide several options tooinstall required software or drivers, including:</span></span>

* <span data-ttu-id="876f2-209">[Iniciar tarefa](batch-api-basics.md#start-task) -carregar um pacote de instalação como um arquivo de recurso tooan conta de armazenamento do Azure Olá mesma região Olá conta do lote.</span><span class="sxs-lookup"><span data-stu-id="876f2-209">[Start task](batch-api-basics.md#start-task) - Upload an installation package as a resource file tooan Azure storage account in hello same region as hello Batch account.</span></span> <span data-ttu-id="876f2-210">Crie um arquivo de recurso Iniciar tarefa linha de comando tooinstall Olá silenciosamente ao pool Olá inicia.</span><span class="sxs-lookup"><span data-stu-id="876f2-210">Create a start task command line tooinstall hello resource file silently when hello pool starts.</span></span> <span data-ttu-id="876f2-211">Para obter mais informações, consulte Olá [documentação da API REST](/rest/api/batchservice/add-a-pool-to-an-account#bk_starttask).</span><span class="sxs-lookup"><span data-stu-id="876f2-211">For more information, see hello [REST API documentation](/rest/api/batchservice/add-a-pool-to-an-account#bk_starttask).</span></span>

  > [!NOTE] 
  > <span data-ttu-id="876f2-212">Olá Iniciar tarefa deve ser executada com permissões com privilégios elevados (administrador) e ele deve esperar para o sucesso.</span><span class="sxs-lookup"><span data-stu-id="876f2-212">hello start task must run with elevated (admin) permissions, and it must wait for success.</span></span>
  >

* <span data-ttu-id="876f2-213">[Pacote de aplicativo](batch-application-packages.md) - adicionar um pacote de instalação compactado tooyour conta em lotes e configurar uma referência de pacote no pool de saudação.</span><span class="sxs-lookup"><span data-stu-id="876f2-213">[Application package](batch-application-packages.md) - Add a zipped installation package tooyour Batch account, and configure a package reference in hello pool.</span></span> <span data-ttu-id="876f2-214">Essa configuração carrega e descompacta o pacote de saudação em todos os nós no pool de saudação.</span><span class="sxs-lookup"><span data-stu-id="876f2-214">This setting uploads and unzips hello package on all nodes in hello pool.</span></span> <span data-ttu-id="876f2-215">Se o pacote de saudação é um instalador, crie um aplicativo hello Iniciar tarefa linha de comando toosilently instalar em todos os nós de pool.</span><span class="sxs-lookup"><span data-stu-id="876f2-215">If hello package is an installer, create a start task command line toosilently install hello app on all pool nodes.</span></span> <span data-ttu-id="876f2-216">Opcionalmente, instale o pacote de saudação quando uma tarefa está agendada toorun em um nó.</span><span class="sxs-lookup"><span data-stu-id="876f2-216">Optionally, install hello package when a task is scheduled toorun on a node.</span></span>

* <span data-ttu-id="876f2-217">[Imagem de pool personalizado](batch-api-basics.md#pool) - criar uma personalizada do Windows ou imagem de VM do Linux que contém os drivers, software ou outras configurações necessárias para Olá tamanho da VM.</span><span class="sxs-lookup"><span data-stu-id="876f2-217">[Custom pool image](batch-api-basics.md#pool) - Create a custom Windows or Linux VM image that contains drivers, software, or other settings required for hello VM size.</span></span> <span data-ttu-id="876f2-218">Se você criou sua conta em lotes na configuração de assinatura de usuário hello, especifique a imagem personalizada Olá para o pool de lote.</span><span class="sxs-lookup"><span data-stu-id="876f2-218">If you created your Batch account in hello user subscription configuration, specify hello custom image for your Batch pool.</span></span> <span data-ttu-id="876f2-219">(Imagens personalizadas não têm suporte nas contas na configuração de serviço de lote hello.) Imagens personalizadas podem ser usadas somente com os pools na configuração de máquina virtual de saudação.</span><span class="sxs-lookup"><span data-stu-id="876f2-219">(Custom images are not supported in accounts in hello Batch service configuration.) Custom images can only be used with pools in hello virtual machine configuration.</span></span>

  > [!IMPORTANT]
  > <span data-ttu-id="876f2-220">Nos pools do Lote, não possível usar uma imagem personalizada criada com discos gerenciados ou com o armazenamento Premium no momento.</span><span class="sxs-lookup"><span data-stu-id="876f2-220">In Batch pools, you can't currently use a custom image created with managed disks or with Premium storage.</span></span>
  >



* <span data-ttu-id="876f2-221">[Lote Shipyard](https://github.com/Azure/batch-shipyard) configura automaticamente toowork GPU e RDMA Olá transparentemente com cargas de trabalho em contêineres em lote do Azure.</span><span class="sxs-lookup"><span data-stu-id="876f2-221">[Batch Shipyard](https://github.com/Azure/batch-shipyard) automatically configures hello GPU and RDMA toowork transparently with containerized workloads on Azure Batch.</span></span> <span data-ttu-id="876f2-222">O Batch Shipyard é totalmente controlado por arquivos de configuração.</span><span class="sxs-lookup"><span data-stu-id="876f2-222">Batch Shipyard is entirely driven with configuration files.</span></span> <span data-ttu-id="876f2-223">Há muitos exemplos receita de configurações disponíveis que permitem a cargas de trabalho GPU e RDMA como Olá [CNTK GPU receita](https://github.com/Azure/batch-shipyard/tree/master/recipes/CNTK-GPU-OpenMPI) que pré-configura usando drivers de GPU em VMs série N e carrega o software Microsoft cognitivas Toolkit como uma imagem do Docker.</span><span class="sxs-lookup"><span data-stu-id="876f2-223">There are many sample recipe configurations available that enable GPU and RDMA workloads such as hello [CNTK GPU Recipe](https://github.com/Azure/batch-shipyard/tree/master/recipes/CNTK-GPU-OpenMPI)  which preconfigures GPU drivers on N-series VMs and loads Microsoft Cognitive Toolkit software as a Docker image.</span></span>


## <a name="example-microsoft-mpi-on-an-a8-vm-pool"></a><span data-ttu-id="876f2-224">Exemplo: Microsoft MPI em um pool de VM A8</span><span class="sxs-lookup"><span data-stu-id="876f2-224">Example: Microsoft MPI on an A8 VM pool</span></span>

<span data-ttu-id="876f2-225">aplicativos de MPI Windows toorun em um conjunto de nós do Azure A8, é necessário tooinstall uma implementação de MPI com suporte.</span><span class="sxs-lookup"><span data-stu-id="876f2-225">toorun Windows MPI applications on a pool of Azure A8 nodes, you need tooinstall a supported MPI implementation.</span></span> <span data-ttu-id="876f2-226">Aqui estão exemplo etapas tooinstall [Microsoft MPI](https://msdn.microsoft.com/library/bb524831(v=vs.85).aspx) em um Windows pool usando um pacote de aplicativo do lote.</span><span class="sxs-lookup"><span data-stu-id="876f2-226">Here are sample steps tooinstall [Microsoft MPI](https://msdn.microsoft.com/library/bb524831(v=vs.85).aspx) on a Windows pool using a Batch application package.</span></span>

1. <span data-ttu-id="876f2-227">Baixar Olá [o pacote de instalação](http://go.microsoft.com/FWLink/p/?LinkID=389556) (MSMpiSetup.exe) para a versão mais recente de saudação do Microsoft MPI.</span><span class="sxs-lookup"><span data-stu-id="876f2-227">Download hello [setup package](http://go.microsoft.com/FWLink/p/?LinkID=389556) (MSMpiSetup.exe) for hello latest version of Microsoft MPI.</span></span>
2. <span data-ttu-id="876f2-228">Crie um arquivo zip do pacote de saudação.</span><span class="sxs-lookup"><span data-stu-id="876f2-228">Create a zip file of hello package.</span></span>
3. <span data-ttu-id="876f2-229">Carregar a conta do lote Olá pacote tooyour.</span><span class="sxs-lookup"><span data-stu-id="876f2-229">Upload hello package tooyour Batch account.</span></span> <span data-ttu-id="876f2-230">Para obter as etapas, consulte Olá [pacotes de aplicativos](batch-application-packages.md) orientação.</span><span class="sxs-lookup"><span data-stu-id="876f2-230">For steps, see hello [application packages](batch-application-packages.md) guidance.</span></span> <span data-ttu-id="876f2-231">Especifique uma ID de aplicativo, como *MSMPI*e uma versão, como *8.1*.</span><span class="sxs-lookup"><span data-stu-id="876f2-231">Specify an application id such as *MSMPI*, and a version such as *8.1*.</span></span> 
4. <span data-ttu-id="876f2-232">Usando Olá APIs de lote ou o portal do Azure, crie um pool na configuração de serviços de nuvem Olá com número de saudação desejado de nós e a escala.</span><span class="sxs-lookup"><span data-stu-id="876f2-232">Using hello Batch APIs or Azure portal, create a pool in hello cloud services configuration with hello desired number of nodes and scale.</span></span> <span data-ttu-id="876f2-233">Olá tabela a seguir mostra exemplo configurações tooset backup MPI no modo autônomo usando uma tarefa de início:</span><span class="sxs-lookup"><span data-stu-id="876f2-233">hello following table shows sample settings tooset up MPI in unattended mode using a start task:</span></span>

| <span data-ttu-id="876f2-234">Configuração</span><span class="sxs-lookup"><span data-stu-id="876f2-234">Setting</span></span> | <span data-ttu-id="876f2-235">Valor</span><span class="sxs-lookup"><span data-stu-id="876f2-235">Value</span></span> |
| ---- | ----- | 
| <span data-ttu-id="876f2-236">**Tipo de imagem**</span><span class="sxs-lookup"><span data-stu-id="876f2-236">**Image Type**</span></span> | <span data-ttu-id="876f2-237">Serviços de Nuvem</span><span class="sxs-lookup"><span data-stu-id="876f2-237">Cloud Services</span></span> |
| <span data-ttu-id="876f2-238">**Família de sistema operacional**</span><span class="sxs-lookup"><span data-stu-id="876f2-238">**OS family**</span></span> | <span data-ttu-id="876f2-239">Windows Server 2012 R2 (família de SO 4)</span><span class="sxs-lookup"><span data-stu-id="876f2-239">Windows Server 2012 R2 (OS family 4)</span></span> |
| <span data-ttu-id="876f2-240">**Tamanho do nó**</span><span class="sxs-lookup"><span data-stu-id="876f2-240">**Node size**</span></span> | <span data-ttu-id="876f2-241">A8 Standard</span><span class="sxs-lookup"><span data-stu-id="876f2-241">A8 Standard</span></span> |
| <span data-ttu-id="876f2-242">**Comunicação entre nós habilitada**</span><span class="sxs-lookup"><span data-stu-id="876f2-242">**Internode communication enabled**</span></span> | <span data-ttu-id="876f2-243">True </span><span class="sxs-lookup"><span data-stu-id="876f2-243">True</span></span> |
| <span data-ttu-id="876f2-244">**Máx. de tarefas por nó**</span><span class="sxs-lookup"><span data-stu-id="876f2-244">**Max tasks per node**</span></span> | <span data-ttu-id="876f2-245">1</span><span class="sxs-lookup"><span data-stu-id="876f2-245">1</span></span> |
| <span data-ttu-id="876f2-246">**Referências do pacote de aplicativos**</span><span class="sxs-lookup"><span data-stu-id="876f2-246">**Application package references**</span></span> | <span data-ttu-id="876f2-247">MSMPI</span><span class="sxs-lookup"><span data-stu-id="876f2-247">MSMPI</span></span> |
| <span data-ttu-id="876f2-248">**Tarefa inicial habilitada**</span><span class="sxs-lookup"><span data-stu-id="876f2-248">**Start task enabled**</span></span> | <span data-ttu-id="876f2-249">True </span><span class="sxs-lookup"><span data-stu-id="876f2-249">True</span></span><br><span data-ttu-id="876f2-250">**Linha de comando** - `"cmd /c %AZ_BATCH_APP_PACKAGE_MSMPI#8.1%\\MSMpiSetup.exe -unattend -force"`</span><span class="sxs-lookup"><span data-stu-id="876f2-250">**Command line** - `"cmd /c %AZ_BATCH_APP_PACKAGE_MSMPI#8.1%\\MSMpiSetup.exe -unattend -force"`</span></span><br/><span data-ttu-id="876f2-251">**Identidade de usuário** – Pool autouser, administrador</span><span class="sxs-lookup"><span data-stu-id="876f2-251">**User identity** - Pool autouser, admin</span></span><br/><span data-ttu-id="876f2-252">**Aguardar o êxito** – True</span><span class="sxs-lookup"><span data-stu-id="876f2-252">**Wait for success** - True</span></span>

## <a name="example-nvidia-tesla-drivers-on-nc-vm-pool"></a><span data-ttu-id="876f2-253">Exemplo: drivers NVIDIA Tesla em pool de VM NC</span><span class="sxs-lookup"><span data-stu-id="876f2-253">Example: NVIDIA Tesla drivers on NC VM pool</span></span>

<span data-ttu-id="876f2-254">aplicativos de CUDA toorun em um conjunto de nós do Linux NC, é necessário tooinstall CUDA Toolkit 8.0 em nós de saudação.</span><span class="sxs-lookup"><span data-stu-id="876f2-254">toorun CUDA applications on a pool of Linux NC nodes, you need tooinstall CUDA Toolkit 8.0 on hello nodes.</span></span> <span data-ttu-id="876f2-255">Olá Toolkit instala drivers de NVIDIA Tesla GPU necessário hello.</span><span class="sxs-lookup"><span data-stu-id="876f2-255">hello Toolkit installs hello necessary NVIDIA Tesla GPU drivers.</span></span> <span data-ttu-id="876f2-256">Aqui estão as etapas de exemplo toodeploy uma imagem personalizada do Ubuntu 16.04 LTS com drivers de GPU Olá:</span><span class="sxs-lookup"><span data-stu-id="876f2-256">Here are sample steps toodeploy a custom Ubuntu 16.04 LTS image with hello GPU drivers:</span></span>

1. <span data-ttu-id="876f2-257">Implante uma VM do Azure NC6 que execute o Ubuntu 16.04 LTS.</span><span class="sxs-lookup"><span data-stu-id="876f2-257">Deploy an Azure NC6 VM running Ubuntu 16.04 LTS.</span></span> <span data-ttu-id="876f2-258">Por exemplo, crie hello VM na região nos Sul Central hello.</span><span class="sxs-lookup"><span data-stu-id="876f2-258">For example, create hello VM in hello US South Central region.</span></span> <span data-ttu-id="876f2-259">Certifique-se de que você crie Olá VM com o armazenamento padrão, e *sem* discos gerenciado.</span><span class="sxs-lookup"><span data-stu-id="876f2-259">Make sure that you create hello VM with standard storage, and *without* managed disks.</span></span>
2. <span data-ttu-id="876f2-260">Siga Olá etapas tooconnect toohello VM e [instalar drivers CUDA](../virtual-machines/linux/n-series-driver-setup.md#install-cuda-drivers-for-nc-vms).</span><span class="sxs-lookup"><span data-stu-id="876f2-260">Follow hello steps tooconnect toohello VM and [install CUDA drivers](../virtual-machines/linux/n-series-driver-setup.md#install-cuda-drivers-for-nc-vms).</span></span>
3. <span data-ttu-id="876f2-261">Desprovisionar o agente do Linux hello e, em seguida, capturar a imagem de VM do Linux usando comandos Olá 1.0 da CLI do Azure.</span><span class="sxs-lookup"><span data-stu-id="876f2-261">Deprovision hello Linux agent, and then capture Linux VM image using hello Azure CLI 1.0 commands.</span></span> <span data-ttu-id="876f2-262">Para obter as etapas, consulte [Capturar uma máquina virtual do Linux em execução no Azure](../virtual-machines/linux/capture-image-nodejs.md).</span><span class="sxs-lookup"><span data-stu-id="876f2-262">For steps, see [Capture a Linux virtual machine running on Azure](../virtual-machines/linux/capture-image-nodejs.md).</span></span> <span data-ttu-id="876f2-263">Tome nota do URI da imagem hello.</span><span class="sxs-lookup"><span data-stu-id="876f2-263">Make a note of hello image URI.</span></span>
  > [!IMPORTANT]
  > <span data-ttu-id="876f2-264">Não use imagem de saudação do Azure 2.0 do CLI comandos toocapture de lote do Azure.</span><span class="sxs-lookup"><span data-stu-id="876f2-264">Do not use Azure CLI 2.0 commands toocapture hello image for Azure Batch.</span></span> <span data-ttu-id="876f2-265">No momento comandos Olá 2.0 do CLI capturam somente máquinas virtuais criadas usando discos gerenciados.</span><span class="sxs-lookup"><span data-stu-id="876f2-265">Currently hello CLI 2.0 commands only capture VMs created using managed disks.</span></span>
  >
4. <span data-ttu-id="876f2-266">Crie uma conta de lote, com a configuração de assinatura de usuário hello, em uma região que dá suporte a VMs NC.</span><span class="sxs-lookup"><span data-stu-id="876f2-266">Create a Batch account, with hello user subscription configuration, in a region that supports NC VMs.</span></span>
5. <span data-ttu-id="876f2-267">Usando Olá APIs de lote ou o portal do Azure, crie um pool usando a imagem personalizada hello e com hello desejado no número de nós e a escala.</span><span class="sxs-lookup"><span data-stu-id="876f2-267">Using hello Batch APIs or Azure portal, create a pool using hello custom image and with hello desired number of nodes and scale.</span></span> <span data-ttu-id="876f2-268">Olá tabela a seguir mostra as configurações do pool de exemplo para imagem hello:</span><span class="sxs-lookup"><span data-stu-id="876f2-268">hello following table shows sample pool settings for hello image:</span></span>

| <span data-ttu-id="876f2-269">Configuração</span><span class="sxs-lookup"><span data-stu-id="876f2-269">Setting</span></span> | <span data-ttu-id="876f2-270">Valor</span><span class="sxs-lookup"><span data-stu-id="876f2-270">Value</span></span> |
| ---- | ---- |
| <span data-ttu-id="876f2-271">**Tipo de imagem**</span><span class="sxs-lookup"><span data-stu-id="876f2-271">**Image Type**</span></span> | <span data-ttu-id="876f2-272">Imagem personalizada</span><span class="sxs-lookup"><span data-stu-id="876f2-272">Custom Image</span></span> |
| <span data-ttu-id="876f2-273">**Imagem personalizada**</span><span class="sxs-lookup"><span data-stu-id="876f2-273">**Custom Image**</span></span> | <span data-ttu-id="876f2-274">URI do formulário de saudação da imagem`https://yourstorageaccountdisks.blob.core.windows.net/system/Microsoft.Compute/Images/vhds/MyVHDNamePrefix-osDisk.xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.vhd`</span><span class="sxs-lookup"><span data-stu-id="876f2-274">Image URI of hello form `https://yourstorageaccountdisks.blob.core.windows.net/system/Microsoft.Compute/Images/vhds/MyVHDNamePrefix-osDisk.xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.vhd`</span></span> |
| <span data-ttu-id="876f2-275">**SKU do agente do nó**</span><span class="sxs-lookup"><span data-stu-id="876f2-275">**Node agent SKU**</span></span> | <span data-ttu-id="876f2-276">batch.node.ubuntu 16.04</span><span class="sxs-lookup"><span data-stu-id="876f2-276">batch.node.ubuntu 16.04</span></span> |
| <span data-ttu-id="876f2-277">**Tamanho do nó**</span><span class="sxs-lookup"><span data-stu-id="876f2-277">**Node size**</span></span> | <span data-ttu-id="876f2-278">NC6 Standard</span><span class="sxs-lookup"><span data-stu-id="876f2-278">NC6 Standard</span></span> |



## <a name="next-steps"></a><span data-ttu-id="876f2-279">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="876f2-279">Next steps</span></span>

* <span data-ttu-id="876f2-280">toorun de trabalhos MPI em um pool de lote do Azure, consulte Olá [Windows](batch-mpi.md) ou [Linux](https://blogs.technet.microsoft.com/windowshpc/2016/07/20/introducing-mpi-support-for-linux-on-azure-batch/) exemplos.</span><span class="sxs-lookup"><span data-stu-id="876f2-280">toorun MPI jobs on an Azure Batch pool, see hello [Windows](batch-mpi.md) or [Linux](https://blogs.technet.microsoft.com/windowshpc/2016/07/20/introducing-mpi-support-for-linux-on-azure-batch/) examples.</span></span>

* <span data-ttu-id="876f2-281">Para obter exemplos de cargas de trabalho GPU em lote, consulte Olá [Shipyard lote](https://github.com/Azure/batch-shipyard/) receitas.</span><span class="sxs-lookup"><span data-stu-id="876f2-281">For examples of GPU workloads on Batch, see hello [Batch Shipyard](https://github.com/Azure/batch-shipyard/) recipes.</span></span>
