---
title: aaaOverview de lote do Azure para desenvolvedores | Microsoft Docs
description: "Saiba mais recursos de saudação do serviço de lote Olá e suas APIs do ponto de vista do desenvolvimento."
services: batch
documentationcenter: .net
author: tamram
manager: timlt
editor: 
ms.assetid: 416b95f8-2d7b-4111-8012-679b0f60d204
ms.service: batch
ms.devlang: multiple
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: big-compute
ms.date: 06/28/2017
ms.author: tamram
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 3da9d82572b28d05d1923166bd08c26725ca3316
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="develop-large-scale-parallel-compute-solutions-with-batch"></a><span data-ttu-id="1eb05-103">Desenvolva soluções de computação paralela em larga escala com o Lote</span><span class="sxs-lookup"><span data-stu-id="1eb05-103">Develop large-scale parallel compute solutions with Batch</span></span>

<span data-ttu-id="1eb05-104">Nesta visão geral de componentes essenciais Olá Olá serviço de lote do Azure, vamos abordar os recursos de serviço principal de hello e recursos que os desenvolvedores de lote podem usar paralela em grande escala toobuild soluções de computação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-104">In this overview of hello core components of hello Azure Batch service, we discuss hello primary service features and resources that Batch developers can use toobuild large-scale parallel compute solutions.</span></span>

<span data-ttu-id="1eb05-105">Se você estiver desenvolvendo um aplicativo de computação distribuído ou serviço que emite direto [API REST] [ batch_rest_api] chamadas ou você estiver usando um Olá [SDKs de lote](batch-apis-tools.md#azure-accounts-for-batch-development), você usará muitos dos recursos de saudação e recursos discutidos neste artigo.</span><span class="sxs-lookup"><span data-stu-id="1eb05-105">Whether you're developing a distributed computational application or service that issues direct [REST API][batch_rest_api] calls or you're using one of hello [Batch SDKs](batch-apis-tools.md#azure-accounts-for-batch-development), you'll use many of hello resources and features discussed in this article.</span></span>

> [!TIP]
> <span data-ttu-id="1eb05-106">Para um nível mais alto toohello Introdução serviço de lote, consulte [Noções básicas do lote do Azure](batch-technical-overview.md).</span><span class="sxs-lookup"><span data-stu-id="1eb05-106">For a higher-level introduction toohello Batch service, see [Basics of Azure Batch](batch-technical-overview.md).</span></span>
>
>

## <a name="batch-service-workflow"></a><span data-ttu-id="1eb05-107">Fluxo de trabalho de serviço do Lote</span><span class="sxs-lookup"><span data-stu-id="1eb05-107">Batch service workflow</span></span>
<span data-ttu-id="1eb05-108">Olá a seguinte fluxo de trabalho de alto nível é típico de quase todos os aplicativos e serviços que usam o serviço de lote Olá para o processamento de cargas de trabalho paralelas:</span><span class="sxs-lookup"><span data-stu-id="1eb05-108">hello following high-level workflow is typical of nearly all applications and services that use hello Batch service for processing parallel workloads:</span></span>

1. <span data-ttu-id="1eb05-109">Carregar Olá **arquivos de dados** que você deseja tooprocess tooan [armazenamento do Azure] [ azure_storage] conta.</span><span class="sxs-lookup"><span data-stu-id="1eb05-109">Upload hello **data files** that you want tooprocess tooan [Azure Storage][azure_storage] account.</span></span> <span data-ttu-id="1eb05-110">Lote inclui suporte interno para acessar o armazenamento de BLOBs do Azure e suas tarefas podem baixar esses arquivos muito[nós de computação](#compute-node) quando as tarefas de saudação são executadas.</span><span class="sxs-lookup"><span data-stu-id="1eb05-110">Batch includes built-in support for accessing Azure Blob storage, and your tasks can download these files too[compute nodes](#compute-node) when hello tasks are run.</span></span>
2. <span data-ttu-id="1eb05-111">Carregar Olá **arquivos de aplicativo** que as tarefas serão executadas.</span><span class="sxs-lookup"><span data-stu-id="1eb05-111">Upload hello **application files** that your tasks will run.</span></span> <span data-ttu-id="1eb05-112">Esses arquivos podem ser binários ou scripts e suas dependências e são executados por tarefas de saudação em seus trabalhos.</span><span class="sxs-lookup"><span data-stu-id="1eb05-112">These files can be binaries or scripts and their dependencies, and are executed by hello tasks in your jobs.</span></span> <span data-ttu-id="1eb05-113">As tarefas podem baixar esses arquivos em sua conta de armazenamento, ou você pode usar o hello [pacotes de aplicativos](#application-packages) recurso de lote para implantação e gerenciamento de aplicativos.</span><span class="sxs-lookup"><span data-stu-id="1eb05-113">Your tasks can download these files from your Storage account, or you can use hello [application packages](#application-packages) feature of Batch for application management and deployment.</span></span>
3. <span data-ttu-id="1eb05-114">Crie um [pool](#pool) de nós de computação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-114">Create a [pool](#pool) of compute nodes.</span></span> <span data-ttu-id="1eb05-115">Quando você cria um pool, você especifica o número de saudação de nós de computação para o pool de saudação, tamanho e sistema operacional de saudação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-115">When you create a pool, you specify hello number of compute nodes for hello pool, their size, and hello operating system.</span></span> <span data-ttu-id="1eb05-116">Quando cada tarefa no trabalho é executado, ele é atribuído tooexecute em um de nós de saudação em seu pool.</span><span class="sxs-lookup"><span data-stu-id="1eb05-116">When each task in your job runs, it's assigned tooexecute on one of hello nodes in your pool.</span></span>
4. <span data-ttu-id="1eb05-117">Crie um [trabalho](#job).</span><span class="sxs-lookup"><span data-stu-id="1eb05-117">Create a [job](#job).</span></span> <span data-ttu-id="1eb05-118">Um trabalho gerencia uma coleção de tarefas.</span><span class="sxs-lookup"><span data-stu-id="1eb05-118">A job manages a collection of tasks.</span></span> <span data-ttu-id="1eb05-119">Associe cada pool específico de trabalho tooa onde as tarefas do trabalho serão executado.</span><span class="sxs-lookup"><span data-stu-id="1eb05-119">You associate each job tooa specific pool where that job's tasks will run.</span></span>
5. <span data-ttu-id="1eb05-120">Adicionar [tarefas](#task) toohello trabalho.</span><span class="sxs-lookup"><span data-stu-id="1eb05-120">Add [tasks](#task) toohello job.</span></span> <span data-ttu-id="1eb05-121">Cada tarefa executa o aplicativo hello ou script que você carregou os arquivos de dados de saudação tooprocess baixa de sua conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="1eb05-121">Each task runs hello application or script that you uploaded tooprocess hello data files it downloads from your Storage account.</span></span> <span data-ttu-id="1eb05-122">Como cada tarefa é concluída, ela pode carregar seu armazenamento de tooAzure de saída.</span><span class="sxs-lookup"><span data-stu-id="1eb05-122">As each task completes, it can upload its output tooAzure Storage.</span></span>
6. <span data-ttu-id="1eb05-123">Monitorar o andamento do trabalho e recuperar a saída de tarefa de saudação do armazenamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="1eb05-123">Monitor job progress and retrieve hello task output from Azure Storage.</span></span>

<span data-ttu-id="1eb05-124">Olá seções a seguir discutem esses e Olá outros recursos do lote que permitem que seu cenário de computação distribuído.</span><span class="sxs-lookup"><span data-stu-id="1eb05-124">hello following sections discuss these and hello other resources of Batch that enable your distributed computational scenario.</span></span>

> [!NOTE]
> <span data-ttu-id="1eb05-125">É necessário um [conta de lote](#account) toouse Olá serviço de lote.</span><span class="sxs-lookup"><span data-stu-id="1eb05-125">You need a [Batch account](#account) toouse hello Batch service.</span></span> <span data-ttu-id="1eb05-126">A maioria das soluções do Lote também usa uma conta de [Armazenamento do Azure][azure_storage] para o armazenamento de arquivos e a recuperação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-126">Most Batch solutions also use an [Azure Storage][azure_storage] account for file storage and retrieval.</span></span> <span data-ttu-id="1eb05-127">Lote atualmente suporta apenas Olá **geral** tipo de conta de armazenamento, conforme descrito na etapa 5 do [criar uma conta de armazenamento](../storage/common/storage-create-storage-account.md#create-a-storage-account) na [contas de armazenamento do Azure sobre](../storage/common/storage-create-storage-account.md).</span><span class="sxs-lookup"><span data-stu-id="1eb05-127">Batch currently supports only hello **general-purpose** storage account type, as described in step 5 of [Create a storage account](../storage/common/storage-create-storage-account.md#create-a-storage-account) in [About Azure storage accounts](../storage/common/storage-create-storage-account.md).</span></span>
>
>

## <a name="batch-service-resources"></a><span data-ttu-id="1eb05-128">Recursos do serviço de lote</span><span class="sxs-lookup"><span data-stu-id="1eb05-128">Batch service resources</span></span>
<span data-ttu-id="1eb05-129">Alguns dos Olá recursos – contas a seguir computação nós, pools, trabalhos e tarefas — seja exigidas por todas as soluções que usam o serviço de lote de saudação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-129">Some of hello following resources--accounts, compute nodes, pools, jobs, and tasks--are required by all solutions that use hello Batch service.</span></span> <span data-ttu-id="1eb05-130">Outros, como agendas de trabalho e pacotes de aplicativos, são recursos úteis, mas opcionais.</span><span class="sxs-lookup"><span data-stu-id="1eb05-130">Others, like job schedules and application packages, are helpful, but optional, features.</span></span>

* [<span data-ttu-id="1eb05-131">Conta</span><span class="sxs-lookup"><span data-stu-id="1eb05-131">Account</span></span>](#account)
* [<span data-ttu-id="1eb05-132">Nó de computação</span><span class="sxs-lookup"><span data-stu-id="1eb05-132">Compute node</span></span>](#compute-node)
* [<span data-ttu-id="1eb05-133">Pool</span><span class="sxs-lookup"><span data-stu-id="1eb05-133">Pool</span></span>](#pool)
* [<span data-ttu-id="1eb05-134">Trabalho</span><span class="sxs-lookup"><span data-stu-id="1eb05-134">Job</span></span>](#job)

  * [<span data-ttu-id="1eb05-135">Agendas de trabalho</span><span class="sxs-lookup"><span data-stu-id="1eb05-135">Job schedules</span></span>](#scheduled-jobs)
* [<span data-ttu-id="1eb05-136">Tarefa</span><span class="sxs-lookup"><span data-stu-id="1eb05-136">Task</span></span>](#task)

  * [<span data-ttu-id="1eb05-137">Iniciar tarefa</span><span class="sxs-lookup"><span data-stu-id="1eb05-137">Start task</span></span>](#start-task)
  * [<span data-ttu-id="1eb05-138">Tarefa do Gerenciador de Trabalhos</span><span class="sxs-lookup"><span data-stu-id="1eb05-138">Job manager task</span></span>](#job-manager-task)
  * [<span data-ttu-id="1eb05-139">Tarefas de preparação e liberação do trabalho</span><span class="sxs-lookup"><span data-stu-id="1eb05-139">Job preparation and release tasks</span></span>](#job-preparation-and-release-tasks)
  * [<span data-ttu-id="1eb05-140">MPI (tarefa de várias instâncias)</span><span class="sxs-lookup"><span data-stu-id="1eb05-140">Multi-instance task (MPI)</span></span>](#multi-instance-tasks)
  * [<span data-ttu-id="1eb05-141">Dependências da tarefa</span><span class="sxs-lookup"><span data-stu-id="1eb05-141">Task dependencies</span></span>](#task-dependencies)
* [<span data-ttu-id="1eb05-142">Pacotes de aplicativos</span><span class="sxs-lookup"><span data-stu-id="1eb05-142">Application packages</span></span>](#application-packages)

## <a name="account"></a><span data-ttu-id="1eb05-143">Conta</span><span class="sxs-lookup"><span data-stu-id="1eb05-143">Account</span></span>
<span data-ttu-id="1eb05-144">Uma conta de lote é uma entidade identificada exclusivamente no serviço de lote de saudação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-144">A Batch account is a uniquely identified entity within hello Batch service.</span></span> <span data-ttu-id="1eb05-145">Todo o processamento é feito por meio de uma conta do Lote.</span><span class="sxs-lookup"><span data-stu-id="1eb05-145">All processing is associated with a Batch account.</span></span>

<span data-ttu-id="1eb05-146">Você pode criar uma conta de lote do Azure usando Olá [portal do Azure](batch-account-create-portal.md) ou programaticamente, como com hello [biblioteca Batch Management .NET](batch-management-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="1eb05-146">You can create an Azure Batch account using hello [Azure portal](batch-account-create-portal.md) or programmatically, such as with hello [Batch Management .NET library](batch-management-dotnet.md).</span></span> <span data-ttu-id="1eb05-147">Ao criar conta hello, você pode associar uma conta de armazenamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="1eb05-147">When creating hello account, you can associate an Azure storage account.</span></span>

### <a name="pool-allocation-mode"></a><span data-ttu-id="1eb05-148">Modo de alocação de pools</span><span class="sxs-lookup"><span data-stu-id="1eb05-148">Pool allocation mode</span></span>

<span data-ttu-id="1eb05-149">Quando você cria uma conta do Lote, pode especificar como os [pools](#pool) dos nós de computação são alocados.</span><span class="sxs-lookup"><span data-stu-id="1eb05-149">When you create a Batch account, you can specify how [pools](#pool) of compute nodes are allocated.</span></span> <span data-ttu-id="1eb05-150">Você pode escolher tooallocate pools de nós de computação em uma assinatura gerenciada pelo lote do Azure, ou pode ser alocada em sua própria assinatura.</span><span class="sxs-lookup"><span data-stu-id="1eb05-150">You can choose tooallocate pools of compute nodes in a subscription managed by Azure Batch, or you can allocate them in your own subscription.</span></span> <span data-ttu-id="1eb05-151">Olá *modo de alocação de pool* propriedade conta Olá determina onde os pools são alocados.</span><span class="sxs-lookup"><span data-stu-id="1eb05-151">hello *pool allocation mode* property for hello account determines where pools are allocated.</span></span> 

<span data-ttu-id="1eb05-152">toodecide qual pool toouse do modo de alocação, considere que melhor se adapta a sua situação:</span><span class="sxs-lookup"><span data-stu-id="1eb05-152">toodecide which pool allocation mode toouse, consider which best fits your scenario:</span></span>

* <span data-ttu-id="1eb05-153">**Serviço de lote**: serviço de lote é o modo para alocação de pool do padrão hello, no qual os pools são alocados em segundo plano da saudação em assinaturas gerenciado do Azure.</span><span class="sxs-lookup"><span data-stu-id="1eb05-153">**Batch Service**: Batch Service is hello default pool allocation mode, in which pools are allocated behind hello scenes in Azure-managed subscriptions.</span></span> <span data-ttu-id="1eb05-154">Tenha em mente estes pontos-chave sobre o modo de alocação de pool de serviço de lote hello:</span><span class="sxs-lookup"><span data-stu-id="1eb05-154">Keep in mind these key points about hello Batch Service pool allocation mode:</span></span>

    - <span data-ttu-id="1eb05-155">modo de alocação de pool de serviço de lote Olá oferece suporte a pools de serviço de nuvem e máquina Virtual.</span><span class="sxs-lookup"><span data-stu-id="1eb05-155">hello Batch Service pool allocation mode supports both Cloud Service and Virtual Machine pools.</span></span>
    - <span data-ttu-id="1eb05-156">Olá modo de alocação de pool do serviço de lote oferece suporte tanto a autenticação chave compartilhada ou [autenticação do Active Directory do Azure](batch-aad-auth.md) (AD do Azure).</span><span class="sxs-lookup"><span data-stu-id="1eb05-156">hello Batch Service pool allocation mode supports both shared key authentication or [Azure Active Directory authentication](batch-aad-auth.md) (Azure AD).</span></span> 
    - <span data-ttu-id="1eb05-157">Você pode usar qualquer um de nós de computação dedicado ou de baixa prioridade em pools alocados com o modo de alocação de pool de serviço de lote hello.</span><span class="sxs-lookup"><span data-stu-id="1eb05-157">You can use either dedicated or low-priority compute nodes in pools allocated with hello Batch Service pool allocation mode.</span></span>
    - <span data-ttu-id="1eb05-158">Não use o modo de alocação de pool de serviço de lote Olá se você planeja toocreate pools de máquina virtual do Azure de imagens VM personalizadas, ou se você planejar toouse uma rede virtual.</span><span class="sxs-lookup"><span data-stu-id="1eb05-158">Do not use hello Batch Service pool allocation mode if you plan toocreate Azure virtual machine pools from custom VM images, or if you plan toouse a virtual network.</span></span> <span data-ttu-id="1eb05-159">Crie sua conta com o modo de alocação de pool Olá assinatura de usuário.</span><span class="sxs-lookup"><span data-stu-id="1eb05-159">Create your account with hello User Subscription pool allocation mode instead.</span></span>
    - <span data-ttu-id="1eb05-160">Pools de máquina virtual provisionados em uma conta criada com o modo de alocação de pool de serviço de lote Olá devem ser criados de [Marketplace de máquinas virtuais do Azure] [ vm_marketplace] imagens.</span><span class="sxs-lookup"><span data-stu-id="1eb05-160">Virtual Machine pools provisioned in an account created with hello Batch Service pool allocation mode must be created from [Azure Virtual Machines Marketplace][vm_marketplace] images.</span></span>

* <span data-ttu-id="1eb05-161">**Assinatura de usuário**: com o modo de alocação de pool de assinatura de usuário hello, pools de lote são alocados em Olá assinatura do Azure em que a conta de saudação é criada.</span><span class="sxs-lookup"><span data-stu-id="1eb05-161">**User subscription**: With hello User Subscription pool allocation mode, Batch pools are allocated in hello Azure subscription where hello account is created.</span></span> <span data-ttu-id="1eb05-162">Tenha em mente estes pontos-chave sobre o modo de alocação de pool de assinatura de usuário hello:</span><span class="sxs-lookup"><span data-stu-id="1eb05-162">Keep in mind these key points about hello User Subscription pool allocation mode:</span></span>
     
    - <span data-ttu-id="1eb05-163">modo de alocação de pool de assinatura de usuário Olá oferece suporte a apenas os pools de máquina Virtual.</span><span class="sxs-lookup"><span data-stu-id="1eb05-163">hello User Subscription pool allocation mode supports only Virtual Machine pools.</span></span> <span data-ttu-id="1eb05-164">Ele não dá suporte a pools dos Serviços de Nuvem.</span><span class="sxs-lookup"><span data-stu-id="1eb05-164">It does not support Cloud Services pools.</span></span>
    - <span data-ttu-id="1eb05-165">pools de máquina Virtual toocreate de imagens da VM ou toouse uma rede virtual personalizado com pools de máquina Virtual, você deve usar o modo de alocação de pool de assinatura de usuário hello.</span><span class="sxs-lookup"><span data-stu-id="1eb05-165">toocreate Virtual Machine pools from custom VM images or toouse a virtual network with Virtual Machine pools, you must use hello User Subscription pool allocation mode.</span></span>  
    - <span data-ttu-id="1eb05-166">Você deve usar [autenticação do Active Directory do Azure](batch-aad-auth.md) com pools são alocados na assinatura de usuário hello.</span><span class="sxs-lookup"><span data-stu-id="1eb05-166">You must use [Azure Active Directory authentication](batch-aad-auth.md) with pools that are allocated in hello user subscription.</span></span> 
    - <span data-ttu-id="1eb05-167">Você deve configurar um cofre de chaves do Azure para sua conta de lote se o modo de alocação de pool de saudação é definido tooUser assinatura.</span><span class="sxs-lookup"><span data-stu-id="1eb05-167">You must set up an Azure key vault for your Batch account if hello pool allocation mode is set tooUser Subscription.</span></span> 
    - <span data-ttu-id="1eb05-168">Você pode usar nós de computação dedicado somente nos pools em uma conta criada com o modo de alocação de pool Olá assinatura de usuário.</span><span class="sxs-lookup"><span data-stu-id="1eb05-168">You can use only dedicated compute nodes in pools in an account created with hello User Subscription pool allocation mode.</span></span> <span data-ttu-id="1eb05-169">Não há suporte para nós de baixa prioridade.</span><span class="sxs-lookup"><span data-stu-id="1eb05-169">Low-priority nodes are not supported.</span></span>
    - <span data-ttu-id="1eb05-170">Pools de máquina virtual provisionados em uma conta com o modo de alocação de pool Olá assinatura de usuário podem ser criados de [Marketplace de máquinas virtuais do Azure] [ vm_marketplace] imagens ou de personalizado imagens que você fornece.</span><span class="sxs-lookup"><span data-stu-id="1eb05-170">Virtual Machine pools provisioned in an account with hello User Subscription pool allocation mode can be created either from [Azure Virtual Machines Marketplace][vm_marketplace] images, or from custom images that you provide.</span></span>

<span data-ttu-id="1eb05-171">Olá, a tabela a seguir compara os modos de alocação de pool de serviço de lote e assinatura de usuário de saudação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-171">hello following table compares hello Batch Service and User Subscription pool allocation modes.</span></span>

| <span data-ttu-id="1eb05-172">**Modo de alocação de pools**</span><span class="sxs-lookup"><span data-stu-id="1eb05-172">**Pool allocation mode**</span></span>                 | <span data-ttu-id="1eb05-173">**Serviço em Lotes**</span><span class="sxs-lookup"><span data-stu-id="1eb05-173">**Batch Service**</span></span>                                                                                       | <span data-ttu-id="1eb05-174">**Assinatura de Usuário**</span><span class="sxs-lookup"><span data-stu-id="1eb05-174">**User Subscription**</span></span>                                                              |
|-------------------------------------------|---------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------|
| <span data-ttu-id="1eb05-175">**Os pools são alocados em**</span><span class="sxs-lookup"><span data-stu-id="1eb05-175">**Pools are allocated in**</span></span>               | <span data-ttu-id="1eb05-176">Em uma assinatura gerenciada pelo Azure</span><span class="sxs-lookup"><span data-stu-id="1eb05-176">An Azure-managed subscription</span></span>                                                                           | <span data-ttu-id="1eb05-177">assinatura de usuário Olá no qual Olá lote conta é criada</span><span class="sxs-lookup"><span data-stu-id="1eb05-177">hello user subscription in which hello Batch account is created</span></span>                        |
| <span data-ttu-id="1eb05-178">**Configurações com suporte**</span><span class="sxs-lookup"><span data-stu-id="1eb05-178">**Supported configurations**</span></span>             | <ul><li><span data-ttu-id="1eb05-179">Configuração do Serviço de Nuvem</span><span class="sxs-lookup"><span data-stu-id="1eb05-179">Cloud Service Configuration</span></span></li><li><span data-ttu-id="1eb05-180">Configuração da Máquina Virtual (Linux e Windows)</span><span class="sxs-lookup"><span data-stu-id="1eb05-180">Virtual Machine Configuration (Linux and Windows)</span></span></li></ul> | <ul><li><span data-ttu-id="1eb05-181">Configuração da Máquina Virtual (Linux e Windows)</span><span class="sxs-lookup"><span data-stu-id="1eb05-181">Virtual Machine Configuration (Linux and Windows)</span></span></li></ul>                |
| <span data-ttu-id="1eb05-182">**Imagens de VM com suporte**</span><span class="sxs-lookup"><span data-stu-id="1eb05-182">**Supported VM images**</span></span>                  | <ul><li><span data-ttu-id="1eb05-183">Imagens do Azure Marketplace</span><span class="sxs-lookup"><span data-stu-id="1eb05-183">Azure Marketplace images</span></span></li></ul>                                                              | <ul><li><span data-ttu-id="1eb05-184">Imagens do Azure Marketplace</span><span class="sxs-lookup"><span data-stu-id="1eb05-184">Azure Marketplace images</span></span></li><li><span data-ttu-id="1eb05-185">Imagens personalizadas</span><span class="sxs-lookup"><span data-stu-id="1eb05-185">Custom images</span></span></li></ul>                   |
| <span data-ttu-id="1eb05-186">**Tipos de nós de computação com suporte**</span><span class="sxs-lookup"><span data-stu-id="1eb05-186">**Supported compute node types**</span></span>         | <ul><li><span data-ttu-id="1eb05-187">Nós dedicados</span><span class="sxs-lookup"><span data-stu-id="1eb05-187">Dedicated nodes</span></span></li><li><span data-ttu-id="1eb05-188">Nós de baixa prioridade</span><span class="sxs-lookup"><span data-stu-id="1eb05-188">Low-priority nodes</span></span></li></ul>                                            | <ul><li><span data-ttu-id="1eb05-189">Nós dedicados</span><span class="sxs-lookup"><span data-stu-id="1eb05-189">Dedicated nodes</span></span></li></ul>                                                  |
| <span data-ttu-id="1eb05-190">**Autenticação com suporte**</span><span class="sxs-lookup"><span data-stu-id="1eb05-190">**Supported authentication**</span></span>             | <ul><li><span data-ttu-id="1eb05-191">Chave compartilhada</span><span class="sxs-lookup"><span data-stu-id="1eb05-191">Shared Key</span></span></li><li><span data-ttu-id="1eb05-192">AD do Azure</span><span class="sxs-lookup"><span data-stu-id="1eb05-192">Azure AD</span></span></li></ul>                                                           | <ul><li><span data-ttu-id="1eb05-193">AD do Azure</span><span class="sxs-lookup"><span data-stu-id="1eb05-193">Azure AD</span></span></li></ul>                                                         |
| <span data-ttu-id="1eb05-194">**Azure Key Vault obrigatório**</span><span class="sxs-lookup"><span data-stu-id="1eb05-194">**Azure Key Vault required**</span></span>             | <span data-ttu-id="1eb05-195">Não</span><span class="sxs-lookup"><span data-stu-id="1eb05-195">No</span></span>                                                                                                      | <span data-ttu-id="1eb05-196">Sim</span><span class="sxs-lookup"><span data-stu-id="1eb05-196">Yes</span></span>                                                                                |
| <span data-ttu-id="1eb05-197">**Cota de núcleos**</span><span class="sxs-lookup"><span data-stu-id="1eb05-197">**Core quota**</span></span>                           | <span data-ttu-id="1eb05-198">Determinado pela cota de núcleos do Lote</span><span class="sxs-lookup"><span data-stu-id="1eb05-198">Determined by Batch core quota</span></span>                                                                          | <span data-ttu-id="1eb05-199">Determinado pela cota de núcleos da assinatura</span><span class="sxs-lookup"><span data-stu-id="1eb05-199">Determined by subscription core quota</span></span>                                              |
| <span data-ttu-id="1eb05-200">**Suporte a VNet (Rede Virtual) do Azure**</span><span class="sxs-lookup"><span data-stu-id="1eb05-200">**Azure Virtual Network (Vnet) support**</span></span> | <span data-ttu-id="1eb05-201">Pools criados com hello configuração de serviço de nuvem</span><span class="sxs-lookup"><span data-stu-id="1eb05-201">Pools created with hello Cloud Service Configuration</span></span>                                                      | <span data-ttu-id="1eb05-202">Pools criados com hello configuração da máquina Virtual</span><span class="sxs-lookup"><span data-stu-id="1eb05-202">Pools created with hello Virtual Machine Configuration</span></span>                               |
| <span data-ttu-id="1eb05-203">**Modelo de implantação de rede virtual com suporte**</span><span class="sxs-lookup"><span data-stu-id="1eb05-203">**Vnet deployment model supported**</span></span>      | <span data-ttu-id="1eb05-204">VNets criadas com o modelo de implantação clássico</span><span class="sxs-lookup"><span data-stu-id="1eb05-204">Vnets created with classic deployment model</span></span>                                                             | <span data-ttu-id="1eb05-205">Vnets criado com o modelo de implantação clássico hello ou Gerenciador de recursos do Azure</span><span class="sxs-lookup"><span data-stu-id="1eb05-205">Vnets created with either hello classic deployment model or Azure   Resource Manager</span></span> |

## <a name="azure-storage-account"></a><span data-ttu-id="1eb05-206">Conta de Armazenamento do Azure</span><span class="sxs-lookup"><span data-stu-id="1eb05-206">Azure Storage account</span></span>

<span data-ttu-id="1eb05-207">A maioria das soluções do Lote usa o Armazenamento do Azure para armazenar arquivos de recurso e de saída.</span><span class="sxs-lookup"><span data-stu-id="1eb05-207">Most Batch solutions use Azure Storage for storing resource files and output files.</span></span>  

<span data-ttu-id="1eb05-208">Lote atualmente suporta apenas tipo de conta de armazenamento de uso geral hello, conforme descrito na etapa 5 do [criar uma conta de armazenamento](../storage/common/storage-create-storage-account.md#create-a-storage-account) na [contas de armazenamento do Azure sobre](../storage/common/storage-create-storage-account.md).</span><span class="sxs-lookup"><span data-stu-id="1eb05-208">Batch currently supports only hello general-purpose storage account type, as described in step 5 of [Create a storage account](../storage/common/storage-create-storage-account.md#create-a-storage-account) in [About Azure storage accounts](../storage/common/storage-create-storage-account.md).</span></span> <span data-ttu-id="1eb05-209">As tarefas do Lote (incluindo as tarefas padrão, tarefas iniciais, tarefas de preparação do trabalho e tarefas de liberação do trabalho) devem especificar os arquivos de recurso que residem nas contas de armazenamento de finalidade geral.</span><span class="sxs-lookup"><span data-stu-id="1eb05-209">Your Batch tasks (including standard tasks, start tasks, job preparation tasks, and job release tasks) must specify resource files that reside in general-purpose storage accounts.</span></span>


## <a name="compute-node"></a><span data-ttu-id="1eb05-210">Nó de computação</span><span class="sxs-lookup"><span data-stu-id="1eb05-210">Compute node</span></span>
<span data-ttu-id="1eb05-211">Um nó de computação é uma máquina virtual do Azure (VM) ou a máquina virtual que é dedicado tooprocessing uma parte da carga de trabalho do aplicativo de serviço de nuvem.</span><span class="sxs-lookup"><span data-stu-id="1eb05-211">A compute node is an Azure virtual machine (VM) or cloud service VM that is dedicated tooprocessing a portion of your application's workload.</span></span> <span data-ttu-id="1eb05-212">tamanho de saudação de um nó determina o número de saudação de núcleos de CPU, capacidade de memória e tamanho do sistema de arquivo local que é alocado toohello nó.</span><span class="sxs-lookup"><span data-stu-id="1eb05-212">hello size of a node determines hello number of CPU cores, memory capacity, and local file system size that is allocated toohello node.</span></span> <span data-ttu-id="1eb05-213">Você pode criar pools de nós do Windows ou Linux por meio de serviços de nuvem do Azure, imagens de saudação [Marketplace de máquinas virtuais do Azure][vm_marketplace], ou imagens personalizadas que você preparar.</span><span class="sxs-lookup"><span data-stu-id="1eb05-213">You can create pools of Windows or Linux nodes by using Azure Cloud Services, images from hello [Azure Virtual Machines Marketplace][vm_marketplace], or custom images that you prepare.</span></span> <span data-ttu-id="1eb05-214">Veja a seguir Olá [Pool](#pool) para obter mais informações sobre essas opções.</span><span class="sxs-lookup"><span data-stu-id="1eb05-214">See hello following [Pool](#pool) section for more information on these options.</span></span>

<span data-ttu-id="1eb05-215">Nós podem executar qualquer script ou executável que é suportado pelo ambiente de sistema operacional de saudação do nó de saudação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-215">Nodes can run any executable or script that is supported by hello operating system environment of hello node.</span></span> <span data-ttu-id="1eb05-216">Isso inclui \*.exe, \*.cmd, \*.bat e os scripts do PowerShell para Windows e binários, shell e scripts Python para Linux.</span><span class="sxs-lookup"><span data-stu-id="1eb05-216">This includes \*.exe, \*.cmd, \*.bat and PowerShell scripts for Windows--and binaries, shell, and Python scripts for Linux.</span></span>

<span data-ttu-id="1eb05-217">Todos os nós de computação no Lote também incluem:</span><span class="sxs-lookup"><span data-stu-id="1eb05-217">All compute nodes in Batch also include:</span></span>

* <span data-ttu-id="1eb05-218">Uma [estrutura de pastas](#files-and-directories) padrão e as [variáveis de ambiente](#environment-settings-for-tasks) associadas disponíveis para a referência por tarefas.</span><span class="sxs-lookup"><span data-stu-id="1eb05-218">A standard [folder structure](#files-and-directories) and associated [environment variables](#environment-settings-for-tasks) that are available for reference by tasks.</span></span>
* <span data-ttu-id="1eb05-219">**Firewall** as configurações que são definidas toocontrol acesso.</span><span class="sxs-lookup"><span data-stu-id="1eb05-219">**Firewall** settings that are configured toocontrol access.</span></span>
* <span data-ttu-id="1eb05-220">[Acesso remoto](#connecting-to-compute-nodes) tooboth Windows Remote Desktop Protocol (RDP) e nós do Linux (Secure Shell (SSH)).</span><span class="sxs-lookup"><span data-stu-id="1eb05-220">[Remote access](#connecting-to-compute-nodes) tooboth Windows (Remote Desktop Protocol (RDP)) and Linux (Secure Shell (SSH)) nodes.</span></span>

## <a name="pool"></a><span data-ttu-id="1eb05-221">pool</span><span class="sxs-lookup"><span data-stu-id="1eb05-221">Pool</span></span>
<span data-ttu-id="1eb05-222">Um pool é uma coleção de nós na qual seu aplicativo é executado.</span><span class="sxs-lookup"><span data-stu-id="1eb05-222">A pool is a collection of nodes that your application runs on.</span></span> <span data-ttu-id="1eb05-223">Olá pool pode ser criado manualmente por você ou automaticamente pelo serviço de lote de hello quando você especificar Olá toobe de trabalho concluído.</span><span class="sxs-lookup"><span data-stu-id="1eb05-223">hello pool can be created manually by you, or automatically by hello Batch service when you specify hello work toobe done.</span></span> <span data-ttu-id="1eb05-224">Você pode criar e gerenciar um pool que atenda aos requisitos de recursos de saudação do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="1eb05-224">You can create and manage a pool that meets hello resource requirements of your application.</span></span> <span data-ttu-id="1eb05-225">Um pool pode ser usado somente por conta do lote Olá no qual ele foi criado.</span><span class="sxs-lookup"><span data-stu-id="1eb05-225">A pool can be used only by hello Batch account in which it was created.</span></span> <span data-ttu-id="1eb05-226">Uma conta do Batch pode ter mais de um pool.</span><span class="sxs-lookup"><span data-stu-id="1eb05-226">A Batch account can have more than one pool.</span></span>

<span data-ttu-id="1eb05-227">Criar pools de lote do Azure na parte superior da plataforma de computação do Azure Olá principal.</span><span class="sxs-lookup"><span data-stu-id="1eb05-227">Azure Batch pools build on top of hello core Azure compute platform.</span></span> <span data-ttu-id="1eb05-228">Eles fornecem alocação em larga escala, instalação de aplicativos, distribuição de dados, monitoramento de integridade e ajuste flexível do número de saudação de nós de computação em um pool ([dimensionamento](#scaling-compute-resources)).</span><span class="sxs-lookup"><span data-stu-id="1eb05-228">They provide large-scale allocation, application installation, data distribution, health monitoring, and flexible adjustment of hello number of compute nodes within a pool ([scaling](#scaling-compute-resources)).</span></span>

<span data-ttu-id="1eb05-229">Cada nó que é adicionado tooa pool é atribuído um nome exclusivo e o endereço IP.</span><span class="sxs-lookup"><span data-stu-id="1eb05-229">Every node that is added tooa pool is assigned a unique name and IP address.</span></span> <span data-ttu-id="1eb05-230">Quando um nó for removido de um pool, quaisquer alterações feitas no sistema de operacional toohello ou arquivos serão perdidas, e seu nome e endereço IP são liberados para uso futuro.</span><span class="sxs-lookup"><span data-stu-id="1eb05-230">When a node is removed from a pool, any changes that are made toohello operating system or files are lost, and its name and IP address are released for future use.</span></span> <span data-ttu-id="1eb05-231">Quando um nó deixa um pool, seu tempo de vida termina.</span><span class="sxs-lookup"><span data-stu-id="1eb05-231">When a node leaves a pool, its lifetime is over.</span></span>

<span data-ttu-id="1eb05-232">Quando você cria um pool, você pode especificar Olá atributos a seguir.</span><span class="sxs-lookup"><span data-stu-id="1eb05-232">When you create a pool, you can specify hello following attributes.</span></span> <span data-ttu-id="1eb05-233">Algumas configurações forem diferentes, dependendo do modo de alocação de pool Olá de saudação lote [conta](#account):</span><span class="sxs-lookup"><span data-stu-id="1eb05-233">Some settings differ, depending on hello pool allocation mode of hello Batch [account](#account):</span></span>

- <span data-ttu-id="1eb05-234">Sistema operacional e versão do nó de computação</span><span class="sxs-lookup"><span data-stu-id="1eb05-234">Compute node operating system and version</span></span>
- <span data-ttu-id="1eb05-235">Tipo de nó de computação e número de nós de destino</span><span class="sxs-lookup"><span data-stu-id="1eb05-235">Compute node type and target number of nodes</span></span>
- <span data-ttu-id="1eb05-236">Tamanho de nós de computação Olá</span><span class="sxs-lookup"><span data-stu-id="1eb05-236">Size of hello compute nodes</span></span>
- <span data-ttu-id="1eb05-237">Política de dimensionamento</span><span class="sxs-lookup"><span data-stu-id="1eb05-237">Scaling policy</span></span>
- <span data-ttu-id="1eb05-238">Política de agendamento de tarefas</span><span class="sxs-lookup"><span data-stu-id="1eb05-238">Task scheduling policy</span></span>
- <span data-ttu-id="1eb05-239">Status de comunicação de nós de computação</span><span class="sxs-lookup"><span data-stu-id="1eb05-239">Communication status for compute nodes</span></span>
- <span data-ttu-id="1eb05-240">Tarefas iniciais para nós de computação</span><span class="sxs-lookup"><span data-stu-id="1eb05-240">Start tasks for compute nodes</span></span>
- <span data-ttu-id="1eb05-241">pacotes de aplicativos</span><span class="sxs-lookup"><span data-stu-id="1eb05-241">Application packages</span></span>
- <span data-ttu-id="1eb05-242">Configuração de rede</span><span class="sxs-lookup"><span data-stu-id="1eb05-242">Network configuration</span></span>

<span data-ttu-id="1eb05-243">Cada uma dessas configurações é descrita mais detalhadamente nas seções a seguir de saudação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-243">Each of these settings is described in more detail in hello following sections.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="1eb05-244">Contas de lote criadas com o modo de alocação de pool de serviço de lote Olá têm uma cota padrão que limita o número de saudação de núcleos em uma conta de lote.</span><span class="sxs-lookup"><span data-stu-id="1eb05-244">Batch accounts created with hello Batch Service pool allocation mode have a default quota that limits hello number of cores in a Batch account.</span></span> <span data-ttu-id="1eb05-245">número de saudação de núcleos corresponde toohello número de nós de computação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-245">hello number of cores corresponds toohello number of compute nodes.</span></span> <span data-ttu-id="1eb05-246">Você pode encontrar as cotas de padrão de saudação e instruções sobre como muito[aumentar cota](batch-quota-limit.md#increase-a-quota) na [cotas e limites de saudação do serviço Azure Batch](batch-quota-limit.md).</span><span class="sxs-lookup"><span data-stu-id="1eb05-246">You can find hello default quotas and instructions on how too[increase a quota](batch-quota-limit.md#increase-a-quota) in [Quotas and limits for hello Azure Batch service](batch-quota-limit.md).</span></span> <span data-ttu-id="1eb05-247">Se o pool não é para alcançar seu número de destino de nós, cota de núcleo Olá pode ser motivo de saudação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-247">If your pool is not achieving its target number of nodes, hello core quota might be hello reason.</span></span>
>
><span data-ttu-id="1eb05-248">Contas de lote criadas com o modo de alocação de pool de assinatura de usuário Olá não observar as cotas do serviço de lote hello.</span><span class="sxs-lookup"><span data-stu-id="1eb05-248">Batch accounts created with hello User Subscription pool allocation mode do not observe hello Batch service quotas.</span></span> <span data-ttu-id="1eb05-249">Em vez disso, eles compartilham em Olá Olá cota principal especificado assinatura.</span><span class="sxs-lookup"><span data-stu-id="1eb05-249">Instead, they share in hello core quota for hello specified subscription.</span></span> <span data-ttu-id="1eb05-250">Para saber mais, confira[Limites das Máquinas Virtuais](../azure-subscription-service-limits.md#virtual-machines-limits) e [Assinatura e limites de serviço, cotas e restrições do Azure](../azure-subscription-service-limits.md).</span><span class="sxs-lookup"><span data-stu-id="1eb05-250">For more information, see [Virtual Machines limits](../azure-subscription-service-limits.md#virtual-machines-limits) in [Azure subscription and service limits, quotas, and constraints](../azure-subscription-service-limits.md).</span></span>
>
>

### <a name="compute-node-operating-system-and-version"></a><span data-ttu-id="1eb05-251">Sistema operacional e versão do nó de computação</span><span class="sxs-lookup"><span data-stu-id="1eb05-251">Compute node operating system and version</span></span>

<span data-ttu-id="1eb05-252">Quando você cria um pool de lote, você pode especificar a configuração de máquina virtual do Azure hello e o tipo de saudação de deseja toorun em cada nó de computação no pool de saudação do sistema operacional.</span><span class="sxs-lookup"><span data-stu-id="1eb05-252">When you create a Batch pool, you can specify hello Azure virtual machine configuration and hello type of operating system you want toorun on each compute node in hello pool.</span></span> <span data-ttu-id="1eb05-253">Olá dois tipos de configurações disponíveis em lote são:</span><span class="sxs-lookup"><span data-stu-id="1eb05-253">hello two types of configurations available in Batch are:</span></span>

- <span data-ttu-id="1eb05-254">Olá **configuração de máquina Virtual**, que especifica o pool Olá é composta de máquinas virtuais do Azure.</span><span class="sxs-lookup"><span data-stu-id="1eb05-254">hello **Virtual Machine Configuration**, which specifies that hello pool is comprised of Azure virtual machines.</span></span> <span data-ttu-id="1eb05-255">Essas máquinas virtuais podem ser criadas de imagens Linux ou Windows.</span><span class="sxs-lookup"><span data-stu-id="1eb05-255">These VMs may be created from either Linux or Windows images.</span></span> 

    <span data-ttu-id="1eb05-256">Quando você cria um pool com base em Olá configuração da máquina Virtual, você deve especificar não somente o tamanho de saudação de nós hello e origem de saudação do hello imagens usadas toocreate-los, mas também Olá **referência de imagem de máquina virtual** e hello Lote **agente nó SKU** toobe instalada em nós de saudação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-256">When you create a pool based on hello Virtual Machine Configuration, you must specify not only hello size of hello nodes and hello source of hello images used toocreate them, but also hello **virtual machine image reference** and hello Batch **node agent SKU** toobe installed on hello nodes.</span></span> <span data-ttu-id="1eb05-257">Para saber mais sobre como especificar essas propriedades de pool, confira [Provisionar nós de computação do Linux em pools do Lote do Azure](batch-linux-nodes.md).</span><span class="sxs-lookup"><span data-stu-id="1eb05-257">For more information about specifying these pool properties, see [Provision Linux compute nodes in Azure Batch pools](batch-linux-nodes.md).</span></span>

- <span data-ttu-id="1eb05-258">Olá **configuração de serviços de nuvem**, que especifica o pool Olá é composto por nós de serviços de nuvem do Azure.</span><span class="sxs-lookup"><span data-stu-id="1eb05-258">hello **Cloud Services Configuration**, which specifies that hello pool is comprised of Azure Cloud Services nodes.</span></span> <span data-ttu-id="1eb05-259">Os Serviços de Nuvem fornecem *somente* nós de computação do Windows.</span><span class="sxs-lookup"><span data-stu-id="1eb05-259">Cloud Services provide Windows compute nodes *only*.</span></span>

    <span data-ttu-id="1eb05-260">Sistemas operacionais disponíveis para pools de configuração de serviços de nuvem são listados no hello [versões do sistema operacional de convidado do Azure e matriz de compatibilidade do SDK](../cloud-services/cloud-services-guestos-update-matrix.md).</span><span class="sxs-lookup"><span data-stu-id="1eb05-260">Available operating systems for Cloud Services Configuration pools are listed in hello [Azure Guest OS releases and SDK compatibility matrix](../cloud-services/cloud-services-guestos-update-matrix.md).</span></span> <span data-ttu-id="1eb05-261">Quando você cria um pool que contém nós de serviços de nuvem, é necessário que o tamanho de nó toospecify hello e sua *família de sistemas operacionais*.</span><span class="sxs-lookup"><span data-stu-id="1eb05-261">When you create a pool that contains Cloud Services nodes, you need toospecify hello node size and its *OS Family*.</span></span> <span data-ttu-id="1eb05-262">Serviços de nuvem são implantado tooAzure mais rapidamente do que as máquinas virtuais que executam o Windows.</span><span class="sxs-lookup"><span data-stu-id="1eb05-262">Cloud Services are deployed tooAzure more quickly than virtual machines running Windows.</span></span> <span data-ttu-id="1eb05-263">Se você deseja ter pools de nós de computação do Windows, pode achar os Serviços de Nuvem mais vantajosos no desempenho em relação a tempo de implantação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-263">If you want pools of Windows compute nodes, you may find that Cloud Services provide a performance benefit in terms of deployment time.</span></span>

    * <span data-ttu-id="1eb05-264">Olá *família de sistemas operacionais* também determina quais versões do .NET são instalados com hello sistema operacional.</span><span class="sxs-lookup"><span data-stu-id="1eb05-264">hello *OS Family* also determines which versions of .NET are installed with hello OS.</span></span>
    * <span data-ttu-id="1eb05-265">Como com funções de trabalho em serviços de nuvem, você pode especificar um *versão do sistema operacional* (para obter mais informações sobre funções de trabalho, consulte Olá [sobre serviços de nuvem](../cloud-services/cloud-services-choose-me.md#tell-me-about-cloud-services) seção Olá [serviços de nuvem Visão geral](../cloud-services/cloud-services-choose-me.md)).</span><span class="sxs-lookup"><span data-stu-id="1eb05-265">As with worker roles within Cloud Services, you can specify an *OS Version* (for more information on worker roles, see hello [Tell me about cloud services](../cloud-services/cloud-services-choose-me.md#tell-me-about-cloud-services) section in hello [Cloud Services overview](../cloud-services/cloud-services-choose-me.md)).</span></span>
    * <span data-ttu-id="1eb05-266">Como com funções de trabalho, é recomendável que você especifique `*` para Olá *versão do sistema operacional* para que nós Olá são atualizados automaticamente, e não há nenhum trabalho necessário toocater toonewly lançada versões.</span><span class="sxs-lookup"><span data-stu-id="1eb05-266">As with worker roles, we recommend that you specify `*` for hello *OS Version* so that hello nodes are automatically upgraded, and there is no work required toocater toonewly released versions.</span></span> <span data-ttu-id="1eb05-267">caso de uso primário Olá para selecionar uma versão específica do sistema operacional é tooensure compatibilidade de aplicativos, que permite que o teste toobe executada antes de permitir Olá versão toobe atualizado de compatibilidade com versões anteriores.</span><span class="sxs-lookup"><span data-stu-id="1eb05-267">hello primary use case for selecting a specific OS version is tooensure application compatibility, which allows backward compatibility testing toobe performed before allowing hello version toobe updated.</span></span> <span data-ttu-id="1eb05-268">Após a validação, Olá *versão do sistema operacional* Olá pool pode ser atualizado e pode ser instalada a nova imagem do SO hello – tarefas em execução são interrompidas e retirada da fila.</span><span class="sxs-lookup"><span data-stu-id="1eb05-268">After validation, hello *OS Version* for hello pool can be updated and hello new OS image can be installed--any running tasks are interrupted and requeued.</span></span>

<span data-ttu-id="1eb05-269">Quando você cria um pool, você precisa tooselect Olá apropriado **nodeAgentSkuId**, dependendo da saudação de sistema operacional da imagem de base de saudação do seu VHD.</span><span class="sxs-lookup"><span data-stu-id="1eb05-269">When you create a pool, you need tooselect hello appropriate **nodeAgentSkuId**, depending on hello OS of hello base image of your VHD.</span></span> <span data-ttu-id="1eb05-270">Você pode obter um mapeamento de nó disponível agente IDs de SKU tootheir referências de imagem do sistema operacional, chamada hello [lista suporte nó agente SKUs](https://docs.microsoft.com/rest/api/batchservice/list-supported-node-agent-skus) operação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-270">You can get a mapping of available node agent SKU ID's tootheir OS Image references by calling hello [List Supported Node Agent SKUs](https://docs.microsoft.com/rest/api/batchservice/list-supported-node-agent-skus) operation.</span></span>

<span data-ttu-id="1eb05-271">Consulte Olá [conta](#account) seção para obter informações sobre como definir o modo de alocação de pool de hello quando você criar uma conta de lote.</span><span class="sxs-lookup"><span data-stu-id="1eb05-271">See hello [Account](#account) section for information on setting hello pool allocation mode when you create a Batch account.</span></span>

#### <a name="custom-images-for-virtual-machine-pools"></a><span data-ttu-id="1eb05-272">Imagens personalizadas para pools de máquina virtual</span><span class="sxs-lookup"><span data-stu-id="1eb05-272">Custom images for Virtual Machine pools</span></span>

<span data-ttu-id="1eb05-273">toouse pools de máquina Virtual de tooprovision uma imagem personalizada, crie sua conta em lotes com o modo de alocação de pool de assinatura de usuário hello.</span><span class="sxs-lookup"><span data-stu-id="1eb05-273">toouse a custom image tooprovision Virtual Machine pools, create your Batch account with hello User Subscription pool allocation mode.</span></span> <span data-ttu-id="1eb05-274">Com esse modo, pools de lote são alocados na assinatura Olá onde reside a conta de saudação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-274">With this mode, Batch pools are allocated into hello subscription where hello account resides.</span></span> <span data-ttu-id="1eb05-275">Consulte Olá [conta](#account) seção para obter informações sobre como definir o modo de alocação de pool de hello quando você criar uma conta de lote.</span><span class="sxs-lookup"><span data-stu-id="1eb05-275">See hello [Account](#account) section for information on setting hello pool allocation mode when you create a Batch account.</span></span>

<span data-ttu-id="1eb05-276">toouse uma imagem personalizada, você precisará imagem de saudação tooprepare generalizando-lo.</span><span class="sxs-lookup"><span data-stu-id="1eb05-276">toouse a custom image, you'll need tooprepare hello image by generalizing it.</span></span> <span data-ttu-id="1eb05-277">Para obter informações sobre como preparar imagens personalizadas do Linux de VMs do Azure, consulte [toouse uma VM do Linux do Azure como um modelo de captura](../virtual-machines/linux/capture-image-nodejs.md).</span><span class="sxs-lookup"><span data-stu-id="1eb05-277">For information about preparing custom Linux images from Azure VMs, see [Capture an Azure Linux VM toouse as a template](../virtual-machines/linux/capture-image-nodejs.md).</span></span> <span data-ttu-id="1eb05-278">Para obter informações sobre como preparar imagens personalizadas do Windows de VMs do Azure, confira [Criar imagens de VM personalizadas com o Azure PowerShell](../virtual-machines/windows/tutorial-custom-images.md).</span><span class="sxs-lookup"><span data-stu-id="1eb05-278">For information about preparing custom Windows images from Azure VMs, see [Create custom VM images with Azure PowerShell](../virtual-machines/windows/tutorial-custom-images.md).</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="1eb05-279">Ao preparar sua imagem personalizada, lembre-se no seguinte de saudação mente:</span><span class="sxs-lookup"><span data-stu-id="1eb05-279">When preparing your custom image, keep in mind hello following:</span></span>
> - <span data-ttu-id="1eb05-280">Certifique-se de que imagem do sistema operacional base Olá usar tooprovision os pools de lote não tem qualquer pré-instalado extensões do Azure, como a extensão de Script personalizado hello.</span><span class="sxs-lookup"><span data-stu-id="1eb05-280">Ensure that hello base OS image you use tooprovision your Batch pools does not have any pre-installed Azure extensions, such as hello Custom Script extension.</span></span> <span data-ttu-id="1eb05-281">Se a imagem de saudação contém uma extensão pré-instalados, Azure poderá encontrar problemas Implantando Olá VM.</span><span class="sxs-lookup"><span data-stu-id="1eb05-281">If hello image contains a pre-installed extension, Azure may encounter problems deploying hello VM.</span></span>
> - <span data-ttu-id="1eb05-282">Verifique se essa imagem do sistema operacional base Olá que é fornecer usa Olá unidade temporária do padrão, como hello agente do nó de lote no momento espera unidade temporária do saudação padrão.</span><span class="sxs-lookup"><span data-stu-id="1eb05-282">Ensure that hello base OS image you provide uses hello default temp drive, as hello Batch node agent currently expects hello default temp drive.</span></span>
>
>

<span data-ttu-id="1eb05-283">toocreate um pool de configuração de máquina Virtual usando uma imagem personalizada, você precisará de um ou mais padrão armazenamento do Azure contas toostore suas imagens VHD personalizadas.</span><span class="sxs-lookup"><span data-stu-id="1eb05-283">toocreate a Virtual Machine Configuration pool using a custom image, you'll need one or more standard Azure Storage accounts toostore your custom VHD images.</span></span> <span data-ttu-id="1eb05-284">As imagens personalizadas são armazenadas como blobs.</span><span class="sxs-lookup"><span data-stu-id="1eb05-284">Custom images are stored as blobs.</span></span> <span data-ttu-id="1eb05-285">tooreference personalizados imagens quando você cria um pool, especifique Olá URIs de blobs VHD de imagem personalizada Olá para Olá [osDisk](https://docs.microsoft.com/rest/api/batchservice/add-a-pool-to-an-account#bk_osdisk) propriedade Olá [virtualMachineConfiguration](https://docs.microsoft.com/rest/api/batchservice/add-a-pool-to-an-account#bk_vmconf) propriedade.</span><span class="sxs-lookup"><span data-stu-id="1eb05-285">tooreference your custom images when you create a pool, specify hello URIs of hello custom image VHD blobs for hello [osDisk](https://docs.microsoft.com/rest/api/batchservice/add-a-pool-to-an-account#bk_osdisk) property of hello [virtualMachineConfiguration](https://docs.microsoft.com/rest/api/batchservice/add-a-pool-to-an-account#bk_vmconf) property.</span></span>

<span data-ttu-id="1eb05-286">Certifique-se de que suas contas de armazenamento atendem Olá critérios a seguir:</span><span class="sxs-lookup"><span data-stu-id="1eb05-286">Make sure that your storage accounts meet hello following criteria:</span></span>   

- <span data-ttu-id="1eb05-287">contas de armazenamento Olá contendo Olá imagem personalizada VHD blobs necessário toobe em Olá mesma assinatura conforme Olá conta em lotes (assinatura de usuário Olá).</span><span class="sxs-lookup"><span data-stu-id="1eb05-287">hello storage accounts containing hello custom image VHD blobs need toobe in hello same subscription as hello Batch account (hello user subscription).</span></span>
- <span data-ttu-id="1eb05-288">Olá especificado contas de armazenamento precisam toobe em Olá mesma região Olá conta do lote.</span><span class="sxs-lookup"><span data-stu-id="1eb05-288">hello specified storage accounts need toobe in hello same region as hello Batch account.</span></span>
- <span data-ttu-id="1eb05-289">No momento, somente as contas de armazenamento padrão de uso geral têm suporte.</span><span class="sxs-lookup"><span data-stu-id="1eb05-289">Only standard general-purpose storage accounts are currently supported.</span></span> <span data-ttu-id="1eb05-290">Armazenamento Premium do Azure terão suporte na Olá futuras.</span><span class="sxs-lookup"><span data-stu-id="1eb05-290">Azure Premium storage will be supported in hello future.</span></span>
- <span data-ttu-id="1eb05-291">Você pode especificar uma conta de armazenamento com vários blobs VHD personalizados ou várias contas de armazenamento, cada uma com um único blob.</span><span class="sxs-lookup"><span data-stu-id="1eb05-291">You can specify one storage account with multiple custom VHD blobs or multiple storage accounts each having a single blob.</span></span> <span data-ttu-id="1eb05-292">Recomendamos que você toouse contas de armazenamento vários tooget um melhor desempenho.</span><span class="sxs-lookup"><span data-stu-id="1eb05-292">We recommend you toouse multiple storage accounts tooget a better performance.</span></span>
- <span data-ttu-id="1eb05-293">Pode dar suporte a um blob VHD de imagem personalizada exclusivo too40 que instâncias de VM do Linux ou 20 instâncias de VM do Windows.</span><span class="sxs-lookup"><span data-stu-id="1eb05-293">One unique custom image VHD blob can support up too40 Linux VM instances or 20 Windows VM instances.</span></span> <span data-ttu-id="1eb05-294">Você precisará toocreate cópias dos pools de toocreate de blob Olá VHD com mais VMs.</span><span class="sxs-lookup"><span data-stu-id="1eb05-294">You will need toocreate copies of hello VHD blob toocreate pools with more VMs.</span></span> <span data-ttu-id="1eb05-295">Por exemplo, um pool com 200 máquinas virtuais do Windows precisa 10 blobs VHD exclusivos especificados para Olá **osDisk** propriedade.</span><span class="sxs-lookup"><span data-stu-id="1eb05-295">For example, a pool with 200 Windows VMs needs 10 unique VHD blobs specified for hello **osDisk** property.</span></span>

<span data-ttu-id="1eb05-296">toocreate um pool de uma imagem personalizada usando Olá portal do Azure:</span><span class="sxs-lookup"><span data-stu-id="1eb05-296">toocreate a pool from a custom image using hello Azure portal:</span></span>

1. <span data-ttu-id="1eb05-297">Navegue tooyour conta de lote no hello portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="1eb05-297">Navigate tooyour Batch account in hello Azure portal.</span></span>
2. <span data-ttu-id="1eb05-298">Em Olá **configurações** folha, selecione Olá **Pools** item de menu.</span><span class="sxs-lookup"><span data-stu-id="1eb05-298">On hello **Settings** blade, select hello **Pools** menu item.</span></span>
3. <span data-ttu-id="1eb05-299">Em Olá **Pools** folha, selecione Olá **adicionar** comando; Olá **Adicionar pool** folha será exibida.</span><span class="sxs-lookup"><span data-stu-id="1eb05-299">On hello **Pools** blade, select hello **Add** command; hello **Add pool** blade will be displayed.</span></span>
4. <span data-ttu-id="1eb05-300">Selecione **imagem personalizada (Windows/Linux)** de saudação **tipo de imagem** lista suspensa.</span><span class="sxs-lookup"><span data-stu-id="1eb05-300">Select **Custom Image (Linux/Windows)** from hello **Image Type** dropdown.</span></span> <span data-ttu-id="1eb05-301">portal de saudação exibe Olá **imagem personalizada** seletor.</span><span class="sxs-lookup"><span data-stu-id="1eb05-301">hello portal displays hello **Custom Image** picker.</span></span> <span data-ttu-id="1eb05-302">Escolha um ou mais VHDs Olá Olá mesmo do contêiner e clique em **selecione** botão.</span><span class="sxs-lookup"><span data-stu-id="1eb05-302">Choose one or more VHDs from hello same container and click hello **Select** button.</span></span> 
    <span data-ttu-id="1eb05-303">Suporte para vários VHDs de contas de armazenamento diferentes e diferentes contêineres será adicionado em Olá futuras.</span><span class="sxs-lookup"><span data-stu-id="1eb05-303">Support for multiple VHDs from different storage accounts and different containers will be added in hello future.</span></span>
5. <span data-ttu-id="1eb05-304">Selecione Olá correto **oferta/publicador/Sku** para seus VHDs personalizados, selecione Olá desejado **cache** modo, em seguida, preencha todas Olá outros parâmetros para o pool de saudação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-304">Select hello correct **Publisher/Offer/Sku** for your custom VHDs, select hello desired **Caching** mode, then fill in all hello other parameters for hello pool.</span></span>
6. <span data-ttu-id="1eb05-305">toocheck se um pool é baseado em uma imagem personalizada, consulte Olá **sistema operacional** propriedade na seção de resumo de recursos Olá da saudação **Pool** folha.</span><span class="sxs-lookup"><span data-stu-id="1eb05-305">toocheck if a pool is based on a custom image, see hello **Operating System** property in hello resource summary section of hello **Pool** blade.</span></span> <span data-ttu-id="1eb05-306">Olá valor dessa propriedade deve ser **imagem de VM personalizada**.</span><span class="sxs-lookup"><span data-stu-id="1eb05-306">hello value of this property should be **Custom VM image**.</span></span>
7. <span data-ttu-id="1eb05-307">Todos os VHDs personalizados associados a um pool são exibidos no pool de saudação **propriedades** folha.</span><span class="sxs-lookup"><span data-stu-id="1eb05-307">All custom VHDs associated with a pool are displayed on hello pool's **Properties** blade.</span></span>

### <a name="compute-node-type-and-target-number-of-nodes"></a><span data-ttu-id="1eb05-308">Tipo de nó de computação e número de nós de destino</span><span class="sxs-lookup"><span data-stu-id="1eb05-308">Compute node type and target number of nodes</span></span>

<span data-ttu-id="1eb05-309">Quando você cria um pool, você pode especificar quais tipos de nós de computação desejado e hello número de destino para cada um.</span><span class="sxs-lookup"><span data-stu-id="1eb05-309">When you create a pool, you can specify which types of compute nodes you want and hello target number for each.</span></span> <span data-ttu-id="1eb05-310">Olá dois tipos de nós de computação são:</span><span class="sxs-lookup"><span data-stu-id="1eb05-310">hello two types of compute nodes are:</span></span>

- <span data-ttu-id="1eb05-311">**Nós de computação dedicados.**</span><span class="sxs-lookup"><span data-stu-id="1eb05-311">**Dedicated compute nodes.**</span></span> <span data-ttu-id="1eb05-312">Nós de computação dedicados são reservados para suas cargas de trabalho.</span><span class="sxs-lookup"><span data-stu-id="1eb05-312">Dedicated compute nodes are reserved for your workloads.</span></span> <span data-ttu-id="1eb05-313">Eles são mais caros do que nós de baixa prioridade, mas eles não têm garantia toonever superado.</span><span class="sxs-lookup"><span data-stu-id="1eb05-313">They are more expensive than low-priority nodes, but they are guaranteed toonever be preempted.</span></span>

- <span data-ttu-id="1eb05-314">**Nós de computação de baixa prioridade.**</span><span class="sxs-lookup"><span data-stu-id="1eb05-314">**Low-priority compute nodes.**</span></span> <span data-ttu-id="1eb05-315">Nós de baixa prioridade tirar proveito da capacidade excedente no Azure toorun suas cargas de trabalho em lotes.</span><span class="sxs-lookup"><span data-stu-id="1eb05-315">Low-priority nodes take advantage of surplus capacity in Azure toorun your Batch workloads.</span></span> <span data-ttu-id="1eb05-316">Nós de baixa prioridade são mais baratos por hora do que nós dedicados e permitem cargas de trabalho que exigem muita capacidade de computação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-316">Low-priority nodes are less expensive per hour than dedicated nodes, and enable workloads requiring a lot of compute power.</span></span> <span data-ttu-id="1eb05-317">Para obter mais informações, consulte [Usar VMs de baixa prioridade com o Lote](batch-low-pri-vms.md).</span><span class="sxs-lookup"><span data-stu-id="1eb05-317">For more information, see [Use low-priority VMs with Batch](batch-low-pri-vms.md).</span></span>

    <span data-ttu-id="1eb05-318">Pode ocorrer preempção de nós de computação de baixa prioridade quando o Azure tem capacidade excedente insuficiente.</span><span class="sxs-lookup"><span data-stu-id="1eb05-318">Low-priority compute nodes may be preempted when Azure has insufficient surplus capacity.</span></span> <span data-ttu-id="1eb05-319">Se um nó é superado durante a execução de tarefas, tarefas de saudação são retirada da fila e execute novamente depois que um nó de computação fica disponível novamente.</span><span class="sxs-lookup"><span data-stu-id="1eb05-319">If a node is preempted while running tasks, hello tasks are requeued and run again once a compute node becomes available again.</span></span> <span data-ttu-id="1eb05-320">Os nós de baixa prioridade são uma boa opção para cargas de trabalho em que o tempo de conclusão do trabalho de saudação é flexível e trabalho Olá é distribuído entre vários nós.</span><span class="sxs-lookup"><span data-stu-id="1eb05-320">Low-priority nodes are a good option for workloads where hello job completion time is flexible and hello work is distributed across many nodes.</span></span> <span data-ttu-id="1eb05-321">Antes de decidir toouse nós de baixa prioridade para seu cenário, certifique-se de que qualquer trabalho perdido devido toopreemption será toorecreate mínima e fácil.</span><span class="sxs-lookup"><span data-stu-id="1eb05-321">Before you decide toouse low-priority nodes for your scenario, make sure that any work lost due toopreemption will be minimal and easy toorecreate.</span></span>

    <span data-ttu-id="1eb05-322">Nós de computação de baixa prioridade estão disponíveis apenas para contas de lote criadas com o modo de alocação de pool de saudação definido muito**serviço de lote**.</span><span class="sxs-lookup"><span data-stu-id="1eb05-322">Low-priority compute nodes are available only for Batch accounts created with hello pool allocation mode set too**Batch Service**.</span></span>

<span data-ttu-id="1eb05-323">É possível ter ambos os nós de computação dedicado e de baixa prioridade em Olá mesmo pool.</span><span class="sxs-lookup"><span data-stu-id="1eb05-323">You can have both low-priority and dedicated compute nodes in hello same pool.</span></span> <span data-ttu-id="1eb05-324">Cada tipo de nó &mdash; dedicado e de baixa prioridade &mdash; tem sua própria configuração de destino, para o qual você pode especificar o número de saudação desejado de nós.</span><span class="sxs-lookup"><span data-stu-id="1eb05-324">Each type of node &mdash; low-priority and dedicated &mdash; has its own target setting, for which you can specify hello desired number of nodes.</span></span> 
    
<span data-ttu-id="1eb05-325">Olá, número de nós de computação é chamado tooas um *destino* porque, em algumas situações, o pool pode não alcançar número desejado de saudação de nós.</span><span class="sxs-lookup"><span data-stu-id="1eb05-325">hello number of compute nodes is referred tooas a *target* because, in some situations, your pool might not reach hello desired number of nodes.</span></span> <span data-ttu-id="1eb05-326">Por exemplo, um pool talvez não obtenha o destino de saudação se atingir Olá [cota de núcleo](batch-quota-limit.md) de lote de sua conta primeiro.</span><span class="sxs-lookup"><span data-stu-id="1eb05-326">For example, a pool might not achieve hello target if it reaches hello [core quota](batch-quota-limit.md) for your Batch account first.</span></span> <span data-ttu-id="1eb05-327">Ou, o pool de saudação talvez não obtenha o destino Olá se você aplicou um dimensionamento automático pool toohello fórmulas que limita o número máximo de saudação de nós.</span><span class="sxs-lookup"><span data-stu-id="1eb05-327">Or, hello pool might not achieve hello target if you have applied an auto-scaling formula toohello pool that limits hello maximum number of nodes.</span></span>

<span data-ttu-id="1eb05-328">Para informações sobre preços de ambos os nós de computação de baixa prioridade e dedicado, consulte [Preços de Lote](https://azure.microsoft.com/pricing/details/batch/).</span><span class="sxs-lookup"><span data-stu-id="1eb05-328">For pricing information for both low-priority and dedicated compute nodes, see [Batch Pricing](https://azure.microsoft.com/pricing/details/batch/).</span></span>

### <a name="size-of-hello-compute-nodes"></a><span data-ttu-id="1eb05-329">Tamanho de nós de computação Olá</span><span class="sxs-lookup"><span data-stu-id="1eb05-329">Size of hello compute nodes</span></span>

<span data-ttu-id="1eb05-330">**Configuração dos Serviços de Nuvem** são listados em [Tamanhos para Serviços de Nuvem](../cloud-services/cloud-services-sizes-specs.md).</span><span class="sxs-lookup"><span data-stu-id="1eb05-330">**Cloud Services Configuration** compute node sizes are listed in [Sizes for Cloud Services](../cloud-services/cloud-services-sizes-specs.md).</span></span> <span data-ttu-id="1eb05-331">O Lote dá suporte a todos os tamanhos de Serviços de Nuvem, exceto `ExtraSmall`, `STANDARD_A1_V2` e `STANDARD_A2_V2`.</span><span class="sxs-lookup"><span data-stu-id="1eb05-331">Batch supports all Cloud Services sizes except `ExtraSmall`, `STANDARD_A1_V2`, and `STANDARD_A2_V2`.</span></span>

<span data-ttu-id="1eb05-332">Os tamanhos de nós de computação da **Configuração de Máquina Virtual** são listados em [Tamanhos de máquinas virtuais no Azure](../virtual-machines/linux/sizes.md) (Linux) e [Tamanhos de máquinas virtuais no Azure](../virtual-machines/windows/sizes.md) (Windows).</span><span class="sxs-lookup"><span data-stu-id="1eb05-332">**Virtual Machine Configuration** compute node sizes are listed in [Sizes for virtual machines in Azure](../virtual-machines/linux/sizes.md) (Linux) and [Sizes for virtual machines in Azure](../virtual-machines/windows/sizes.md) (Windows).</span></span> <span data-ttu-id="1eb05-333">O Lote dá suporte a todos os tamanhos de VM do Azure, exceto `STANDARD_A0` e aqueles com armazenamento premium (série `STANDARD_GS`, `STANDARD_DS` e `STANDARD_DSV2`).</span><span class="sxs-lookup"><span data-stu-id="1eb05-333">Batch supports all Azure VM sizes except `STANDARD_A0` and those with premium storage (`STANDARD_GS`, `STANDARD_DS`, and `STANDARD_DSV2` series).</span></span>

<span data-ttu-id="1eb05-334">Ao selecionar um tamanho de nó de computação, considere as características de saudação e requisitos de aplicativos de saudação que em nós hello, você executará.</span><span class="sxs-lookup"><span data-stu-id="1eb05-334">When selecting a compute node size, consider hello characteristics and requirements of hello applications you'll run on hello nodes.</span></span> <span data-ttu-id="1eb05-335">Aspectos como se o aplicativo hello é multi-threaded e a quantidade de memória consome pode ajudar a determinam o tamanho de nó de mais adequada e econômica de saudação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-335">Aspects like whether hello application is multithreaded and how much memory it consumes can help determine hello most suitable and cost-effective node size.</span></span> <span data-ttu-id="1eb05-336">É típico tooselect um tamanho de nó, supondo que uma tarefa será executada em um nó por vez.</span><span class="sxs-lookup"><span data-stu-id="1eb05-336">It's typical tooselect a node size assuming one task will run on a node at a time.</span></span> <span data-ttu-id="1eb05-337">No entanto, é possível toohave várias tarefas (e, portanto, várias instâncias de aplicativo) [executados em paralelo](batch-parallel-node-tasks.md) em nós de computação durante a execução do trabalho.</span><span class="sxs-lookup"><span data-stu-id="1eb05-337">However, it is possible toohave multiple tasks (and therefore multiple application instances) [run in parallel](batch-parallel-node-tasks.md) on compute nodes during job execution.</span></span> <span data-ttu-id="1eb05-338">Nesse caso, é comum toochoose uma maior nó tamanho tooaccommodate Olá maior demanda de execução de tarefas paralelas.</span><span class="sxs-lookup"><span data-stu-id="1eb05-338">In this case, it is common toochoose a larger node size tooaccommodate hello increased demand of parallel task execution.</span></span> <span data-ttu-id="1eb05-339">Confira [Política de agendamento](#task-scheduling-policy) de tarefas para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="1eb05-339">See [Task scheduling policy](#task-scheduling-policy) for more information.</span></span>

<span data-ttu-id="1eb05-340">Todos os nós de saudação em um pool de são Olá mesmo tamanho.</span><span class="sxs-lookup"><span data-stu-id="1eb05-340">All of hello nodes in a pool are hello same size.</span></span> <span data-ttu-id="1eb05-341">Se você pretende toorun aplicativos com diferentes requisitos de sistema e/ou níveis de carga, é recomendável que você use grupos separados.</span><span class="sxs-lookup"><span data-stu-id="1eb05-341">If you intend toorun applications with differing system requirements and/or load levels, we recommend that you use separate pools.</span></span>

### <a name="scaling-policy"></a><span data-ttu-id="1eb05-342">Política de dimensionamento</span><span class="sxs-lookup"><span data-stu-id="1eb05-342">Scaling policy</span></span>

<span data-ttu-id="1eb05-343">Para cargas de trabalho dinâmicas, você pode escrever e aplicar um [fórmula de dimensionamento automático](#scaling-compute-resources) tooa pool.</span><span class="sxs-lookup"><span data-stu-id="1eb05-343">For dynamic workloads, you can write and apply an [auto-scaling formula](#scaling-compute-resources) tooa pool.</span></span> <span data-ttu-id="1eb05-344">Olá serviço de lote periodicamente avalia a fórmula e ajusta Olá número de nós no pool de saudação com base no pool, trabalho e parâmetros da tarefa que você pode especificar vários.</span><span class="sxs-lookup"><span data-stu-id="1eb05-344">hello Batch service periodically evaluates your formula and adjusts hello number of nodes within hello pool based on various pool, job, and task parameters that you can specify.</span></span>

### <a name="task-scheduling-policy"></a><span data-ttu-id="1eb05-345">Política de agendamento de tarefas</span><span class="sxs-lookup"><span data-stu-id="1eb05-345">Task scheduling policy</span></span>

<span data-ttu-id="1eb05-346">Olá [máximo de tarefas por nó](batch-parallel-node-tasks.md) opção de configuração determina o número de máximo de saudação de tarefas que podem ser executados em paralelo em cada nó de computação no pool de saudação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-346">hello [max tasks per node](batch-parallel-node-tasks.md) configuration option determines hello maximum number of tasks that can be run in parallel on each compute node within hello pool.</span></span>

<span data-ttu-id="1eb05-347">configuração padrão de saudação especifica que uma tarefa de cada vez é executado em um nó, mas há situações em que é benéfico toohave duas ou mais tarefas executadas simultaneamente em um nó.</span><span class="sxs-lookup"><span data-stu-id="1eb05-347">hello default configuration specifies that one task at a time runs on a node, but there are scenarios where it is beneficial toohave two or more tasks executed on a node simultaneously.</span></span> <span data-ttu-id="1eb05-348">Consulte Olá [cenário de exemplo](batch-parallel-node-tasks.md#example-scenario) em Olá [tarefas simultâneas do nó](batch-parallel-node-tasks.md) toosee artigo como você pode se beneficiar de várias tarefas por nó.</span><span class="sxs-lookup"><span data-stu-id="1eb05-348">See hello [example scenario](batch-parallel-node-tasks.md#example-scenario) in hello [concurrent node tasks](batch-parallel-node-tasks.md) article toosee how you can benefit from multiple tasks per node.</span></span>

<span data-ttu-id="1eb05-349">Você também pode especificar um *tipo de preenchimento* que determina se a opção em lotes distribui tarefas Olá igualmente entre todos os nós em um pool ou pacotes de cada nó com o número máximo de saudação de tarefas antes de atribuir o nó de tooanother de tarefas.</span><span class="sxs-lookup"><span data-stu-id="1eb05-349">You can also specify a *fill type* which determines whether Batch spreads hello tasks evenly across all nodes in a pool, or packs each node with hello maximum number of tasks before assigning tasks tooanother node.</span></span>

### <a name="communication-status-for-compute-nodes"></a><span data-ttu-id="1eb05-350">Status de comunicação de nós de computação</span><span class="sxs-lookup"><span data-stu-id="1eb05-350">Communication status for compute nodes</span></span>

<span data-ttu-id="1eb05-351">Na maioria dos cenários, tarefas operam de forma independente e não é necessário toocommunicate uns com os outros.</span><span class="sxs-lookup"><span data-stu-id="1eb05-351">In most scenarios, tasks operate independently and do not need toocommunicate with one another.</span></span> <span data-ttu-id="1eb05-352">No entanto, há alguns aplicativos em que as tarefas precisam se comunicar, como os [cenários MPI](batch-mpi.md).</span><span class="sxs-lookup"><span data-stu-id="1eb05-352">However, there are some applications in which tasks must communicate, like [MPI scenarios](batch-mpi.md).</span></span>

<span data-ttu-id="1eb05-353">Você pode configurar um pool tooallow **na comunicação**, de modo que nós dentro de um pool podem se comunicar em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="1eb05-353">You can configure a pool tooallow **internode communication**, so that nodes within a pool can communicate at runtime.</span></span> <span data-ttu-id="1eb05-354">Quando a comunicação entre nós é habilitada, os nós nos pools de Configuração dos Serviços de Nuvem podem comunicar-se uns com os outros nas portas acima de 1100 e os pools de Configuração da Máquina Virtual não restringem o tráfego em nenhuma porta.</span><span class="sxs-lookup"><span data-stu-id="1eb05-354">When internode communication is enabled, nodes in Cloud Services Configuration pools can communicate with each other on ports greater than 1100, and Virtual Machine Configuration pools do not restrict traffic on any port.</span></span>

<span data-ttu-id="1eb05-355">Observe que habilitar na comunicação também afeta o posicionamento de saudação de nós de saudação em clusters e pode limitar o número máximo de saudação de nós em um pool de devido a restrições de implantação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-355">Note that enabling internode communication also impacts hello placement of hello nodes within clusters and might limit hello maximum number of nodes in a pool because of deployment restrictions.</span></span> <span data-ttu-id="1eb05-356">Se seu aplicativo não precisar de comunicação entre os nós, Olá serviço de lote pode alocar pool toohello de um número potencialmente grande de nós de clusters diferentes muitas e data centers tooenable maior capacidade de processamento paralelo.</span><span class="sxs-lookup"><span data-stu-id="1eb05-356">If your application does not require communication between nodes, hello Batch service can allocate a potentially large number of nodes toohello pool from many different clusters and datacenters tooenable increased parallel processing power.</span></span>

### <a name="start-tasks-for-compute-nodes"></a><span data-ttu-id="1eb05-357">Tarefas iniciais para nós de computação</span><span class="sxs-lookup"><span data-stu-id="1eb05-357">Start tasks for compute nodes</span></span>

<span data-ttu-id="1eb05-358">Olá opcional *Iniciar tarefa* como nó une pool Olá, e cada vez que um nó é reiniciado ou recriar a imagem é executado em cada nó.</span><span class="sxs-lookup"><span data-stu-id="1eb05-358">hello optional *start task* executes on each node as that node joins hello pool, and each time a node is restarted or reimaged.</span></span> <span data-ttu-id="1eb05-359">tarefa de início de saudação é especialmente útil para preparar nós de computação para a execução de tarefas, como a instalação de aplicativos de saudação que as tarefas executar em nós de computação de saudação hello.</span><span class="sxs-lookup"><span data-stu-id="1eb05-359">hello start task is especially useful for preparing compute nodes for hello execution of tasks, like installing hello applications that your tasks run on hello compute nodes.</span></span>

### <a name="application-packages"></a><span data-ttu-id="1eb05-360">pacotes de aplicativos</span><span class="sxs-lookup"><span data-stu-id="1eb05-360">Application packages</span></span>

<span data-ttu-id="1eb05-361">Você pode especificar [pacotes de aplicativos](#application-packages) toodeploy toohello nós de computação no pool de saudação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-361">You can specify [application packages](#application-packages) toodeploy toohello compute nodes in hello pool.</span></span> <span data-ttu-id="1eb05-362">Pacotes de aplicativos fornecem uma implantação simplificada e controle de versão de aplicativos Olá executar suas tarefas.</span><span class="sxs-lookup"><span data-stu-id="1eb05-362">Application packages provide simplified deployment and versioning of hello applications that your tasks run.</span></span> <span data-ttu-id="1eb05-363">Os pacotes de aplicativos que você especifica para um pool são instalados em cada nó que ingressa no pool e sempre que um nó é reinicializado ou sua imagem é recriada.</span><span class="sxs-lookup"><span data-stu-id="1eb05-363">Application packages that you specify for a pool are installed on every node that joins that pool, and every time a node is rebooted or reimaged.</span></span>

> [!NOTE]
> <span data-ttu-id="1eb05-364">Os pacotes de aplicativos têm suporte em todos os pools do Lote criados após 5 de julho de 2017.</span><span class="sxs-lookup"><span data-stu-id="1eb05-364">Application packages are supported on all Batch pools created after 5 July 2017.</span></span> <span data-ttu-id="1eb05-365">Eles têm suporte em pools de lote criados entre 10 de março de 2016 e 5 de julho de 2017 somente se o pool de saudação foi criado usando uma configuração de serviço de nuvem.</span><span class="sxs-lookup"><span data-stu-id="1eb05-365">They are supported on Batch pools created between 10 March 2016 and 5 July 2017 only if hello pool was created using a Cloud Service configuration.</span></span> <span data-ttu-id="1eb05-366">Pools de lote criados too10 anterior de março de 2016 não dão suporte a pacotes de aplicativos.</span><span class="sxs-lookup"><span data-stu-id="1eb05-366">Batch pools created prior too10 March 2016 do not support application packages.</span></span> <span data-ttu-id="1eb05-367">Para obter mais informações sobre como usar o aplicativo pacotes toodeploy seus nós de lote de tooyour de aplicativos, consulte [implantar aplicativos toocompute nós com pacotes de aplicativos de lote](batch-application-packages.md).</span><span class="sxs-lookup"><span data-stu-id="1eb05-367">For more information about using application packages toodeploy your applications tooyour Batch nodes, see [Deploy applications toocompute nodes with Batch application packages](batch-application-packages.md).</span></span>
>
>

### <a name="network-configuration"></a><span data-ttu-id="1eb05-368">Configuração de rede</span><span class="sxs-lookup"><span data-stu-id="1eb05-368">Network configuration</span></span>

<span data-ttu-id="1eb05-369">Você pode especificar a sub-rede de saudação de um Azure [rede virtual (VNet)](../virtual-network/virtual-networks-overview.md) na computação do pool que Olá nós devem ser criados.</span><span class="sxs-lookup"><span data-stu-id="1eb05-369">You can specify hello subnet of an Azure [virtual network (VNet)](../virtual-network/virtual-networks-overview.md) in which hello pool's compute nodes should be created.</span></span> <span data-ttu-id="1eb05-370">Consulte Olá [configuração do Pool de rede](#pool-network-configuration) para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="1eb05-370">See hello [Pool network configuration](#pool-network-configuration) section for more information.</span></span>


## <a name="job"></a><span data-ttu-id="1eb05-371">Trabalho</span><span class="sxs-lookup"><span data-stu-id="1eb05-371">Job</span></span>
<span data-ttu-id="1eb05-372">Um trabalho é uma coleção de tarefas.</span><span class="sxs-lookup"><span data-stu-id="1eb05-372">A job is a collection of tasks.</span></span> <span data-ttu-id="1eb05-373">Ele gerencia como computação é executada por suas tarefas em nós de computação de saudação em um pool.</span><span class="sxs-lookup"><span data-stu-id="1eb05-373">It manages how computation is performed by its tasks on hello compute nodes in a pool.</span></span>

* <span data-ttu-id="1eb05-374">trabalho de saudação especifica Olá **pool** no qual Olá trabalho é toobe executar.</span><span class="sxs-lookup"><span data-stu-id="1eb05-374">hello job specifies hello **pool** in which hello work is toobe run.</span></span> <span data-ttu-id="1eb05-375">Você pode criar um novo pool para cada trabalho ou usar um pool para vários trabalhos.</span><span class="sxs-lookup"><span data-stu-id="1eb05-375">You can create a new pool for each job, or use one pool for many jobs.</span></span> <span data-ttu-id="1eb05-376">Você pode criar um pool para cada trabalho associado a um agendamento de trabalho ou para todos os trabalhos associados a um agendamento de trabalho.</span><span class="sxs-lookup"><span data-stu-id="1eb05-376">You can create a pool for each job that is associated with a job schedule, or for all jobs that are associated with a job schedule.</span></span>
* <span data-ttu-id="1eb05-377">Você pode especificar uma **prioridade de trabalho**opcional.</span><span class="sxs-lookup"><span data-stu-id="1eb05-377">You can specify an optional **job priority**.</span></span> <span data-ttu-id="1eb05-378">Quando um trabalho é enviado com uma prioridade mais alta que os trabalhos que estão atualmente em andamento, tarefas Olá para o trabalho de maior prioridade Olá são inseridas na fila de saudação à frente de tarefas para trabalhos de prioridade mais baixa hello.</span><span class="sxs-lookup"><span data-stu-id="1eb05-378">When a job is submitted with a higher priority than jobs that are currently in progress, hello tasks for hello higher-priority job are inserted into hello queue ahead of tasks for hello lower-priority jobs.</span></span> <span data-ttu-id="1eb05-379">As tarefas com prioridade mais baixa que já estejam em execução não são antecipadas.</span><span class="sxs-lookup"><span data-stu-id="1eb05-379">Tasks in lower-priority jobs that are already running are not preempted.</span></span>
* <span data-ttu-id="1eb05-380">Você pode usar o trabalho **restrições** toospecify certos limites para os seus trabalhos:</span><span class="sxs-lookup"><span data-stu-id="1eb05-380">You can use job **constraints** toospecify certain limits for your jobs:</span></span>

    <span data-ttu-id="1eb05-381">Você pode definir um **tempo máximo wallclock**, de modo que se um trabalho for executado por mais de tempo de wallclock máximo de saudação for especificado, o trabalho hello e todas as suas tarefas são encerradas.</span><span class="sxs-lookup"><span data-stu-id="1eb05-381">You can set a **maximum wallclock time**, so that if a job runs for longer than hello maximum wallclock time that is specified, hello job and all of its tasks are terminated.</span></span>

    <span data-ttu-id="1eb05-382">O Lote pode detectar e repetir as tarefas com falha.</span><span class="sxs-lookup"><span data-stu-id="1eb05-382">Batch can detect and then retry failed tasks.</span></span> <span data-ttu-id="1eb05-383">Você pode especificar Olá **número máximo de tentativas de tarefa** como uma restrição, incluindo se uma tarefa é *sempre* ou *nunca* repetida.</span><span class="sxs-lookup"><span data-stu-id="1eb05-383">You can specify hello **maximum number of task retries** as a constraint, including whether a task is *always* or *never* retried.</span></span> <span data-ttu-id="1eb05-384">Repetir uma tarefa significa que essa tarefa Olá toobe retirada da fila, execute novamente.</span><span class="sxs-lookup"><span data-stu-id="1eb05-384">Retrying a task means that hello task is requeued toobe run again.</span></span>
* <span data-ttu-id="1eb05-385">O aplicativo cliente pode adicionar o trabalho de tooa de tarefas, ou você pode especificar um [tarefa do Gerenciador de trabalho](#job-manager-task).</span><span class="sxs-lookup"><span data-stu-id="1eb05-385">Your client application can add tasks tooa job, or you can specify a [job manager task](#job-manager-task).</span></span> <span data-ttu-id="1eb05-386">Uma tarefa do Gerenciador de trabalho contém informações de saudação que é necessário toocreate Olá necessário tarefas para um trabalho, com a tarefa do Gerenciador de trabalho hello está sendo executada em uma saudação nós de computação no pool de saudação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-386">A job manager task contains hello information that is necessary toocreate hello required tasks for a job, with hello job manager task being run on one of hello compute nodes in hello pool.</span></span> <span data-ttu-id="1eb05-387">Olá tarefa do Gerenciador de trabalho é tratada especificamente pelo lote – ele está na fila assim que o trabalho Olá é criado e é reiniciado quando ele falhar.</span><span class="sxs-lookup"><span data-stu-id="1eb05-387">hello job manager task is handled specifically by Batch--it is queued as soon as hello job is created, and is restarted if it fails.</span></span> <span data-ttu-id="1eb05-388">É uma tarefa do Gerenciador de trabalho *necessária* para trabalhos que são criados por um [agenda de trabalho](#scheduled-jobs) porque ele é Olá somente toodefine Olá tarefas antes do trabalho de saudação é instanciado.</span><span class="sxs-lookup"><span data-stu-id="1eb05-388">A job manager task is *required* for jobs that are created by a [job schedule](#scheduled-jobs) because it is hello only way toodefine hello tasks before hello job is instantiated.</span></span>
* <span data-ttu-id="1eb05-389">Por padrão, trabalhos permanecem no estado ativo hello quando todas as tarefas no trabalho Olá forem concluídas.</span><span class="sxs-lookup"><span data-stu-id="1eb05-389">By default, jobs remain in hello active state when all tasks within hello job are complete.</span></span> <span data-ttu-id="1eb05-390">Você pode alterar esse comportamento para que hello trabalho será encerrado automaticamente quando todas as tarefas no trabalho Olá forem concluídas.</span><span class="sxs-lookup"><span data-stu-id="1eb05-390">You can change this behavior so that hello job is automatically terminated when all tasks in hello job are complete.</span></span> <span data-ttu-id="1eb05-391">Do trabalho de conjunto Olá **onAllTasksComplete** propriedade ([OnAllTasksComplete] [ net_onalltaskscomplete] no lote .NET) muito*terminatejob* tooautomatically Encerre trabalho hello quando todas as suas tarefas estão em estado de saudação concluída.</span><span class="sxs-lookup"><span data-stu-id="1eb05-391">Set hello job's **onAllTasksComplete** property ([OnAllTasksComplete][net_onalltaskscomplete] in Batch .NET) too*terminatejob* tooautomatically terminate hello job when all of its tasks are in hello completed state.</span></span>

    <span data-ttu-id="1eb05-392">Observe que o serviço de lote Olá considera um trabalho com *sem* toohave tarefas conclusão de todas as suas tarefas.</span><span class="sxs-lookup"><span data-stu-id="1eb05-392">Note that hello Batch service considers a job with *no* tasks toohave all of its tasks completed.</span></span> <span data-ttu-id="1eb05-393">Portanto, essa opção é mais comumente usada com uma [tarefa do gerenciador de trabalhos](#job-manager-task).</span><span class="sxs-lookup"><span data-stu-id="1eb05-393">Therefore, this option is most commonly used with a [job manager task](#job-manager-task).</span></span> <span data-ttu-id="1eb05-394">Se desejar que o encerramento do trabalho automática toouse sem um Gerenciador de trabalhos, inicialmente você deve definir um novo trabalho **onAllTasksComplete** propriedade muito*noaction*, em seguida, defini-lo muito*terminatejob* somente depois que você terminar de adicionar o trabalho de toohello de tarefas.</span><span class="sxs-lookup"><span data-stu-id="1eb05-394">If you want toouse automatic job termination without a job manager, you should initially set a new job's **onAllTasksComplete** property too*noaction*, then set it too*terminatejob* only after you've finished adding tasks toohello job.</span></span>

### <a name="job-priority"></a><span data-ttu-id="1eb05-395">prioridade de trabalho</span><span class="sxs-lookup"><span data-stu-id="1eb05-395">Job priority</span></span>
<span data-ttu-id="1eb05-396">Você pode atribuir um toojobs de prioridade que você cria no lote.</span><span class="sxs-lookup"><span data-stu-id="1eb05-396">You can assign a priority toojobs that you create in Batch.</span></span> <span data-ttu-id="1eb05-397">Olá serviço de lote usa o valor de prioridade de saudação da ordem de saudação do hello trabalho toodetermine de agendamento de trabalho em uma conta (isso não é toobe confundido com um [trabalho agendado](#scheduled-jobs)).</span><span class="sxs-lookup"><span data-stu-id="1eb05-397">hello Batch service uses hello priority value of hello job toodetermine hello order of job scheduling within an account (this is not toobe confused with a [scheduled job](#scheduled-jobs)).</span></span> <span data-ttu-id="1eb05-398">os valores de prioridade Olá variam de -1000 too1000, com -1000 sendo a prioridade mais baixa hello e 1000 hello mais alta.</span><span class="sxs-lookup"><span data-stu-id="1eb05-398">hello priority values range from -1000 too1000, with -1000 being hello lowest priority and 1000 being hello highest.</span></span> <span data-ttu-id="1eb05-399">prioridade de saudação tooupdate de um trabalho, chamada hello [atualizar propriedades de saudação de um trabalho] [ rest_update_job] operação em lote REST (), ou modificar Olá [CloudJob.Priority] [ net_cloudjob_priority] propriedade (lote .NET).</span><span class="sxs-lookup"><span data-stu-id="1eb05-399">tooupdate hello priority of a job, call hello [Update hello properties of a job][rest_update_job] operation (Batch REST), or modify hello [CloudJob.Priority][net_cloudjob_priority] property (Batch .NET).</span></span>

<span data-ttu-id="1eb05-400">Dentro de saudação mesma conta, maior prioridade trabalhos têm precedência sobre os trabalhos de prioridade mais baixa de agendamento.</span><span class="sxs-lookup"><span data-stu-id="1eb05-400">Within hello same account, higher-priority jobs have scheduling precedence over lower-priority jobs.</span></span> <span data-ttu-id="1eb05-401">Um trabalho com valor de prioridade mais alto em uma conta não tem precedência no agendamento sobre outro trabalho com valor de prioridade mais baixo em uma conta diferente.</span><span class="sxs-lookup"><span data-stu-id="1eb05-401">A job with a higher-priority value in one account does not have scheduling precedence over another job with a lower-priority value in a different account.</span></span>

<span data-ttu-id="1eb05-402">O plano de trabalho em pools é independente.</span><span class="sxs-lookup"><span data-stu-id="1eb05-402">Job scheduling across pools is independent.</span></span> <span data-ttu-id="1eb05-403">Entre pools diferentes, não é garantido que um trabalho com prioridade mais alta seja agendado primeiro, caso faltem nós ociosos em seu pool associado.</span><span class="sxs-lookup"><span data-stu-id="1eb05-403">Between different pools, it is not guaranteed that a higher-priority job is scheduled first if its associated pool is short of idle nodes.</span></span> <span data-ttu-id="1eb05-404">Em Olá mesmo pool, trabalhos com hello mesmo nível de prioridade têm a mesma chance de ser agendado.</span><span class="sxs-lookup"><span data-stu-id="1eb05-404">In hello same pool, jobs with hello same priority level have an equal chance of being scheduled.</span></span>

### <a name="scheduled-jobs"></a><span data-ttu-id="1eb05-405">Trabalhos agendados</span><span class="sxs-lookup"><span data-stu-id="1eb05-405">Scheduled jobs</span></span>
<span data-ttu-id="1eb05-406">[Agendas de trabalho] [ rest_job_schedules] permitem toocreate de trabalhos recorrentes em Olá serviço de lote.</span><span class="sxs-lookup"><span data-stu-id="1eb05-406">[Job schedules][rest_job_schedules] enable you toocreate recurring jobs within hello Batch service.</span></span> <span data-ttu-id="1eb05-407">Uma agenda de trabalho especifica quando toorun trabalhos e inclui as especificações de saudação de saudação trabalhos toobe executar.</span><span class="sxs-lookup"><span data-stu-id="1eb05-407">A job schedule specifies when toorun jobs and includes hello specifications for hello jobs toobe run.</span></span> <span data-ttu-id="1eb05-408">Você pode especificar a duração de saudação da agenda hello – quanto tempo e quando agenda hello está em vigor – e frequência os trabalhos são criados durante a saudação agendado período.</span><span class="sxs-lookup"><span data-stu-id="1eb05-408">You can specify hello duration of hello schedule--how long and when hello schedule is in effect--and how frequently jobs are created during hello scheduled period.</span></span>

## <a name="task"></a><span data-ttu-id="1eb05-409">Tarefa</span><span class="sxs-lookup"><span data-stu-id="1eb05-409">Task</span></span>
<span data-ttu-id="1eb05-410">Uma tarefa é uma unidade de computação que está associada a um trabalho.</span><span class="sxs-lookup"><span data-stu-id="1eb05-410">A task is a unit of computation that is associated with a job.</span></span> <span data-ttu-id="1eb05-411">Ela é executada em um nó.</span><span class="sxs-lookup"><span data-stu-id="1eb05-411">It runs on a node.</span></span> <span data-ttu-id="1eb05-412">Tarefas atribuídas nó tooa para execução ou são enfileiradas até que um nó fique livre.</span><span class="sxs-lookup"><span data-stu-id="1eb05-412">Tasks are assigned tooa node for execution, or are queued until a node becomes free.</span></span> <span data-ttu-id="1eb05-413">Em suma, uma tarefa executa um ou mais programas ou scripts em um computação nó tooperform Olá trabalho que é necessário.</span><span class="sxs-lookup"><span data-stu-id="1eb05-413">Put simply, a task runs one or more programs or scripts on a compute node tooperform hello work you need done.</span></span>

<span data-ttu-id="1eb05-414">Ao criar uma tarefa, você pode especificar:</span><span class="sxs-lookup"><span data-stu-id="1eb05-414">When you create a task, you can specify:</span></span>

* <span data-ttu-id="1eb05-415">Olá **linha de comando** para tarefas de saudação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-415">hello **command line** for hello task.</span></span> <span data-ttu-id="1eb05-416">Esta é a linha de comando Olá que executa o aplicativo ou script no nó de computação hello.</span><span class="sxs-lookup"><span data-stu-id="1eb05-416">This is hello command line that runs your application or script on hello compute node.</span></span>

    <span data-ttu-id="1eb05-417">É importante toonote que Olá a linha de comando não executa em um shell.</span><span class="sxs-lookup"><span data-stu-id="1eb05-417">It is important toonote that hello command line does not actually run under a shell.</span></span> <span data-ttu-id="1eb05-418">Portanto, ele nativamente não pode tirar proveito dos recursos de shell como [variável de ambiente](#environment-settings-for-tasks) expansão (Isso inclui Olá `PATH`).</span><span class="sxs-lookup"><span data-stu-id="1eb05-418">Therefore, it cannot natively take advantage of shell features like [environment variable](#environment-settings-for-tasks) expansion (this includes hello `PATH`).</span></span> <span data-ttu-id="1eb05-419">tootake proveito desses recursos, você deve chamar shell Olá na linha de comando hello – por exemplo, iniciando `cmd.exe` em nós do Windows ou `/bin/sh` no Linux:</span><span class="sxs-lookup"><span data-stu-id="1eb05-419">tootake advantage of such features, you must invoke hello shell in hello command line--for example, by launching `cmd.exe` on Windows nodes or `/bin/sh` on Linux:</span></span>

    `cmd /c MyTaskApplication.exe %MY_ENV_VAR%`

    `/bin/sh -c MyTaskApplication $MY_ENV_VAR`

    <span data-ttu-id="1eb05-420">Se precisarem de suas tarefas toorun um aplicativo ou script que não está em Olá do nó `PATH` ou fazer referência a variáveis de ambiente, invoque o shell Olá explicitamente na linha de comando de tarefa de saudação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-420">If your tasks need toorun an application or script that is not in hello node's `PATH` or reference environment variables, invoke hello shell explicitly in hello task command line.</span></span>
* <span data-ttu-id="1eb05-421">**Arquivos de recurso** que contêm Olá toobe de dados processada.</span><span class="sxs-lookup"><span data-stu-id="1eb05-421">**Resource files** that contain hello data toobe processed.</span></span> <span data-ttu-id="1eb05-422">Esses arquivos são copiados automaticamente toohello nó do armazenamento de Blob em uma conta de armazenamento do Azure para fins gerais antes de linha de comando da tarefa Olá é executada.</span><span class="sxs-lookup"><span data-stu-id="1eb05-422">These files are automatically copied toohello node from Blob storage in a general-purpose Azure Storage account before hello task's command line is executed.</span></span> <span data-ttu-id="1eb05-423">Para obter mais informações, consulte as seções de saudação [tarefa inicial](#start-task) e [arquivos e diretórios](#files-and-directories).</span><span class="sxs-lookup"><span data-stu-id="1eb05-423">For more information, see hello sections [Start task](#start-task) and [Files and directories](#files-and-directories).</span></span>
* <span data-ttu-id="1eb05-424">Olá **variáveis de ambiente** que são exigidas por seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="1eb05-424">hello **environment variables** that are required by your application.</span></span> <span data-ttu-id="1eb05-425">Para obter mais informações, consulte Olá [configurações de ambiente para tarefas](#environment-settings-for-tasks) seção.</span><span class="sxs-lookup"><span data-stu-id="1eb05-425">For more information, see hello [Environment settings for tasks](#environment-settings-for-tasks) section.</span></span>
* <span data-ttu-id="1eb05-426">Olá **restrições** sob qual Olá tarefa deve ser executada.</span><span class="sxs-lookup"><span data-stu-id="1eb05-426">hello **constraints** under which hello task should execute.</span></span> <span data-ttu-id="1eb05-427">Por exemplo, as restrições incluem o tempo máximo de saudação tarefa Olá é permitida toorun, o número de vezes que uma tarefa com falha deve ser repetida, máximo hello e máximo de saudação hora em que os arquivos no diretório de trabalho da tarefa Olá são mantidos.</span><span class="sxs-lookup"><span data-stu-id="1eb05-427">For example, constraints include hello maximum time that hello task is allowed toorun, hello maximum number of times a failed task should be retried, and hello maximum time that files in hello task's working directory are retained.</span></span>
* <span data-ttu-id="1eb05-428">**Pacotes de aplicativos** toodeploy toohello em qual Olá a tarefa está agendada toorun de nó de computação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-428">**Application packages** toodeploy toohello compute node on which hello task is scheduled toorun.</span></span> <span data-ttu-id="1eb05-429">[Pacotes de aplicativos](#application-packages) fornecem uma implantação simplificada e controle de versão de aplicativos Olá executar suas tarefas.</span><span class="sxs-lookup"><span data-stu-id="1eb05-429">[Application packages](#application-packages) provide simplified deployment and versioning of hello applications that your tasks run.</span></span> <span data-ttu-id="1eb05-430">Pacotes de aplicativos de nível de tarefa são especialmente úteis em ambientes de pool compartilhado, onde diferentes trabalhos são executados em um pool e pool de saudação não será excluído quando um trabalho é concluído.</span><span class="sxs-lookup"><span data-stu-id="1eb05-430">Task-level application packages are especially useful in shared-pool environments, where different jobs are run on one pool, and hello pool is not deleted when a job is completed.</span></span> <span data-ttu-id="1eb05-431">Se o trabalho tiver menos tarefas que os nós no pool hello, pacotes de aplicativos de tarefa podem minimizar transferência de dados desde que o aplicativo é implantado toohello apenas nós que executam tarefas.</span><span class="sxs-lookup"><span data-stu-id="1eb05-431">If your job has fewer tasks than nodes in hello pool, task application packages can minimize data transfer since your application is deployed only toohello nodes that run tasks.</span></span>

<span data-ttu-id="1eb05-432">Além disso tootasks definir tooperform computação em um nó, Olá tarefas especiais a seguir também é fornecido pelo serviço de lote hello:</span><span class="sxs-lookup"><span data-stu-id="1eb05-432">In addition tootasks you define tooperform computation on a node, hello following special tasks are also provided by hello Batch service:</span></span>

* [<span data-ttu-id="1eb05-433">Iniciar tarefa</span><span class="sxs-lookup"><span data-stu-id="1eb05-433">Start task</span></span>](#start-task)
* [<span data-ttu-id="1eb05-434">Tarefa do Gerenciador de Trabalhos</span><span class="sxs-lookup"><span data-stu-id="1eb05-434">Job manager task</span></span>](#job-manager-task)
* [<span data-ttu-id="1eb05-435">Tarefas de preparação e liberação do trabalho</span><span class="sxs-lookup"><span data-stu-id="1eb05-435">Job preparation and release tasks</span></span>](#job-preparation-and-release-tasks)
* [<span data-ttu-id="1eb05-436">MPI (Tarefas de várias instâncias)</span><span class="sxs-lookup"><span data-stu-id="1eb05-436">Multi-instance tasks (MPI)</span></span>](#multi-instance-tasks)
* [<span data-ttu-id="1eb05-437">Dependências da tarefa</span><span class="sxs-lookup"><span data-stu-id="1eb05-437">Task dependencies</span></span>](#task-dependencies)

### <a name="start-task"></a><span data-ttu-id="1eb05-438">Iniciar tarefa</span><span class="sxs-lookup"><span data-stu-id="1eb05-438">Start task</span></span>
<span data-ttu-id="1eb05-439">Associando um **Iniciar tarefa** com um pool, você pode preparar Olá de seus nós o ambiente operacional.</span><span class="sxs-lookup"><span data-stu-id="1eb05-439">By associating a **start task** with a pool, you can prepare hello operating environment of its nodes.</span></span> <span data-ttu-id="1eb05-440">Por exemplo, você pode executar ações como instalação de aplicativos de saudação que executam as tarefas ou iniciar processos em segundo plano.</span><span class="sxs-lookup"><span data-stu-id="1eb05-440">For example, you can perform actions like installing hello applications that your tasks run or starting background processes.</span></span> <span data-ttu-id="1eb05-441">tarefa de início de saudação é executado sempre que um nó é iniciado, desde que ela permaneça no pool de hello – incluindo ao nó de saudação é adicionado primeiro pool toohello e quando ele for reiniciado ou recriar a imagem.</span><span class="sxs-lookup"><span data-stu-id="1eb05-441">hello start task runs every time a node starts, for as long as it remains in hello pool--including when hello node is first added toohello pool and when it is restarted or reimaged.</span></span>

<span data-ttu-id="1eb05-442">O principal benefício Olá da tarefa de início é que ele pode conter todas as informações de saudação que é necessário tooconfigure um nó de computação e instalar aplicativos de saudação que são necessários para a execução da tarefa.</span><span class="sxs-lookup"><span data-stu-id="1eb05-442">A primary benefit of hello start task is that it can contain all of hello information that is necessary tooconfigure a compute node and install hello applications that are required for task execution.</span></span> <span data-ttu-id="1eb05-443">Portanto, o aumento Olá número de nós em um pool é tão simple quanto especificando a nova contagem de nó de destino hello.</span><span class="sxs-lookup"><span data-stu-id="1eb05-443">Therefore, increasing hello number of nodes in a pool is as simple as specifying hello new target node count.</span></span> <span data-ttu-id="1eb05-444">tarefa de início de saudação fornece informações Olá de serviço de lote de Olá Olá tooconfigure necessários novos nós e prepará-los para aceitar tarefas.</span><span class="sxs-lookup"><span data-stu-id="1eb05-444">hello start task provides hello Batch service hello information that is needed tooconfigure hello new nodes and get them ready for accepting tasks.</span></span>

<span data-ttu-id="1eb05-445">Como com qualquer tarefa em lote do Azure, você pode especificar uma lista de **arquivos de recurso** na [armazenamento do Azure][azure_storage], além de tooa **linha de comando** toobe executado.</span><span class="sxs-lookup"><span data-stu-id="1eb05-445">As with any Azure Batch task, you can specify a list of **resource files** in [Azure Storage][azure_storage], in addition tooa **command line** toobe executed.</span></span> <span data-ttu-id="1eb05-446">serviço de lote Olá copia primeiro nó de toohello de arquivos de recurso de saudação do armazenamento do Azure e, em seguida, executa a linha de comando de saudação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-446">hello Batch service first copies hello resource files toohello node from Azure Storage, and then runs hello command line.</span></span> <span data-ttu-id="1eb05-447">Para uma tarefa de início do pool, lista de arquivos Olá normalmente contém Olá tarefa aplicativo e suas dependências.</span><span class="sxs-lookup"><span data-stu-id="1eb05-447">For a pool start task, hello file list typically contains hello task application and its dependencies.</span></span>

<span data-ttu-id="1eb05-448">No entanto, tarefas de início Olá também podem incluir toobe de dados de referência usado por todas as tarefas que estão em execução no nó de computação hello.</span><span class="sxs-lookup"><span data-stu-id="1eb05-448">However, hello start task could also include reference data toobe used by all tasks that are running on hello compute node.</span></span> <span data-ttu-id="1eb05-449">Por exemplo, a linha de comando de início da tarefa pode executar um `robocopy` operação toocopy arquivos de aplicativo (que foram especificados como arquivos de recurso e baixado toohello nó) do hello Iniciar tarefa [diretório de trabalho](#files-and-directories) toohello [pasta compartilhada](#files-and-directories), e, em seguida, execute um MSI ou `setup.exe`.</span><span class="sxs-lookup"><span data-stu-id="1eb05-449">For example, a start task's command line could perform a `robocopy` operation toocopy application files (which were specified as resource files and downloaded toohello node) from hello start task's [working directory](#files-and-directories) toohello [shared folder](#files-and-directories), and then run an MSI or `setup.exe`.</span></span>

<span data-ttu-id="1eb05-450">É geralmente preferível para toowait de serviço de lote Olá para Olá Iniciar tarefa toocomplete antes de considerar Olá tarefas do nó pronto toobe atribuído, mas você pode configurá-la.</span><span class="sxs-lookup"><span data-stu-id="1eb05-450">It is typically desirable for hello Batch service toowait for hello start task toocomplete before considering hello node ready toobe assigned tasks, but you can configure this.</span></span>

<span data-ttu-id="1eb05-451">Se uma tarefa inicial falhar em um nó de computação, hello estado do nó de saudação será atualizado tooreflect Olá falha e nó Olá não está atribuído a todas as tarefas.</span><span class="sxs-lookup"><span data-stu-id="1eb05-451">If a start task fails on a compute node, then hello state of hello node is updated tooreflect hello failure, and hello node is not assigned any tasks.</span></span> <span data-ttu-id="1eb05-452">Uma tarefa inicial pode falhar se houver um problema copiando seus arquivos de recursos de armazenamento, ou se o processo de saudação executado por sua linha de comando retorna um código de saída diferente de zero.</span><span class="sxs-lookup"><span data-stu-id="1eb05-452">A start task can fail if there is an issue copying its resource files from storage, or if hello process executed by its command line returns a nonzero exit code.</span></span>

<span data-ttu-id="1eb05-453">Se você adicionar ou atualizar a tarefa de início de saudação para um pool existente, você deve reiniciar os nós de computação Olá Iniciar tarefa toobe aplicada toohello nós.</span><span class="sxs-lookup"><span data-stu-id="1eb05-453">If you add or update hello start task for an existing pool, you must reboot its compute nodes for hello start task toobe applied toohello nodes.</span></span>

>[!NOTE]
> <span data-ttu-id="1eb05-454">Olá tamanho total de uma tarefa de início deve ser menor ou igual too32768 caracteres, incluindo arquivos de recurso e variáveis de ambiente.</span><span class="sxs-lookup"><span data-stu-id="1eb05-454">hello total size of a start task must be less than or equal too32768 characters, including resource files and environment variables.</span></span> <span data-ttu-id="1eb05-455">tooensure sua tarefa de início atende a esse requisito, você pode usar uma das duas abordagens:</span><span class="sxs-lookup"><span data-stu-id="1eb05-455">tooensure that your start task meets this requirement, you can use one of two approaches:</span></span>
>
> 1. <span data-ttu-id="1eb05-456">Você pode usar aplicativos de toodistribute de pacotes de aplicativo ou dados em cada nó no pool de lote.</span><span class="sxs-lookup"><span data-stu-id="1eb05-456">You can use application packages toodistribute applications or data across each node in your Batch pool.</span></span> <span data-ttu-id="1eb05-457">Para obter mais informações sobre pacotes de aplicativos, consulte [implantar aplicativos toocompute nós com pacotes de aplicativos de lote](batch-application-packages.md).</span><span class="sxs-lookup"><span data-stu-id="1eb05-457">For more information about application packages, see [Deploy applications toocompute nodes with Batch application packages](batch-application-packages.md).</span></span>
> 2. <span data-ttu-id="1eb05-458">Você pode criar um arquivo compactado que contém os arquivos de aplicativos manualmente.</span><span class="sxs-lookup"><span data-stu-id="1eb05-458">You can manually create a zipped archive containing your applications files.</span></span> <span data-ttu-id="1eb05-459">Carregar seu arquivo compactado de tooAzure armazenamento como um blob.</span><span class="sxs-lookup"><span data-stu-id="1eb05-459">Upload your zipped archive tooAzure Storage as a blob.</span></span> <span data-ttu-id="1eb05-460">Especifique o arquivo hello compactado como um arquivo de recurso para a tarefa de início.</span><span class="sxs-lookup"><span data-stu-id="1eb05-460">Specify hello zipped archive as a resource file for your start task.</span></span> <span data-ttu-id="1eb05-461">Antes de executar a linha de comando Olá para sua tarefa de início, descompacte o arquivo Olá Olá linha de comando.</span><span class="sxs-lookup"><span data-stu-id="1eb05-461">Before you run hello command line for your start task, unzip hello archive from hello command line.</span></span> 
>
>    <span data-ttu-id="1eb05-462">arquivamento de saudação toounzip, você pode usar Olá, ferramenta de sua escolha de arquivamento.</span><span class="sxs-lookup"><span data-stu-id="1eb05-462">toounzip hello archive, you can use hello archiving tool of your choice.</span></span> <span data-ttu-id="1eb05-463">Você precisará tooinclude ferramenta de saudação que você use o arquivamento de saudação toounzip como um arquivo de recurso para a tarefa inicial de saudação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-463">You will need tooinclude hello tool that you use toounzip hello archive as a resource file for hello start task.</span></span>
>
>

### <a name="job-manager-task"></a><span data-ttu-id="1eb05-464">Tarefa do Gerenciador de Trabalhos</span><span class="sxs-lookup"><span data-stu-id="1eb05-464">Job manager task</span></span>
<span data-ttu-id="1eb05-465">Você normalmente usa um **tarefa do Gerenciador de trabalho** toocontrol e/ou o monitor de execução – por exemplo, toocreate de trabalho e enviar tarefas de saudação para um trabalho, determinar toorun tarefas adicionais e determinar quando o trabalho for concluído.</span><span class="sxs-lookup"><span data-stu-id="1eb05-465">You typically use a **job manager task** toocontrol and/or monitor job execution--for example, toocreate and submit hello tasks for a job, determine additional tasks toorun, and determine when work is complete.</span></span> <span data-ttu-id="1eb05-466">No entanto, uma tarefa do Gerenciador de trabalho não é restrito toothese atividades.</span><span class="sxs-lookup"><span data-stu-id="1eb05-466">However, a job manager task is not restricted toothese activities.</span></span> <span data-ttu-id="1eb05-467">É uma tarefa totalmente o que pode executar as ações que são necessárias para o trabalho de saudação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-467">It is a fully fledged task that can perform any actions that are required for hello job.</span></span> <span data-ttu-id="1eb05-468">Por exemplo, uma tarefa do Gerenciador de trabalho pode baixar um arquivo que é especificado como um parâmetro, analisar o conteúdo de saudação do arquivo e enviar tarefas adicionais com base em desses conteúdos.</span><span class="sxs-lookup"><span data-stu-id="1eb05-468">For example, a job manager task might download a file that is specified as a parameter, analyze hello contents of that file, and submit additional tasks based on those contents.</span></span>

<span data-ttu-id="1eb05-469">Uma tarefa do gerenciador de trabalho é iniciada antes de todas as outras tarefas.</span><span class="sxs-lookup"><span data-stu-id="1eb05-469">A job manager task is started before all other tasks.</span></span> <span data-ttu-id="1eb05-470">Ele fornece Olá recursos a seguir:</span><span class="sxs-lookup"><span data-stu-id="1eb05-470">It provides hello following features:</span></span>

* <span data-ttu-id="1eb05-471">Ele é automaticamente enviado como uma tarefa pelo serviço de lote de saudação quando Olá trabalho é criado.</span><span class="sxs-lookup"><span data-stu-id="1eb05-471">It is automatically submitted as a task by hello Batch service when hello job is created.</span></span>
* <span data-ttu-id="1eb05-472">Ele é agendado tooexecute antes Olá outras tarefas em um trabalho.</span><span class="sxs-lookup"><span data-stu-id="1eb05-472">It is scheduled tooexecute before hello other tasks in a job.</span></span>
* <span data-ttu-id="1eb05-473">O nó associado é Olá toobe última removido de um pool ao pool hello está sendo reduzida.</span><span class="sxs-lookup"><span data-stu-id="1eb05-473">Its associated node is hello last toobe removed from a pool when hello pool is being downsized.</span></span>
* <span data-ttu-id="1eb05-474">Seu encerramento pode ser associado toohello término de todas as tarefas no trabalho de saudação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-474">Its termination can be tied toohello termination of all tasks in hello job.</span></span>
* <span data-ttu-id="1eb05-475">Uma tarefa do Gerenciador de trabalho tem prioridade mais alta de saudação quando ele precisa toobe reiniciado.</span><span class="sxs-lookup"><span data-stu-id="1eb05-475">A job manager task is given hello highest priority when it needs toobe restarted.</span></span> <span data-ttu-id="1eb05-476">Se um nó ocioso não estiver disponível, Olá serviço de lote pode terminar uma saudação outras tarefas em execução no toomake espaço pool Olá Olá toorun de tarefa de Gerenciador de trabalho.</span><span class="sxs-lookup"><span data-stu-id="1eb05-476">If an idle node is not available, hello Batch service might terminate one of hello other running tasks in hello pool toomake room for hello job manager task toorun.</span></span>
* <span data-ttu-id="1eb05-477">Uma tarefa do Gerenciador de trabalho em um trabalho não têm prioridade sobre tarefas de saudação de outros trabalhos.</span><span class="sxs-lookup"><span data-stu-id="1eb05-477">A job manager task in one job does not have priority over hello tasks of other jobs.</span></span> <span data-ttu-id="1eb05-478">Entre diferentes trabalhos, somente as prioridades de nível de trabalho são observadas.</span><span class="sxs-lookup"><span data-stu-id="1eb05-478">Across jobs, only job-level priorities are observed.</span></span>

### <a name="job-preparation-and-release-tasks"></a><span data-ttu-id="1eb05-479">Tarefas de preparação e liberação do trabalho</span><span class="sxs-lookup"><span data-stu-id="1eb05-479">Job preparation and release tasks</span></span>
<span data-ttu-id="1eb05-480">O Lote fornece tarefas de preparação do trabalho para a instalação de execução pré-trabalho.</span><span class="sxs-lookup"><span data-stu-id="1eb05-480">Batch provides job preparation tasks for pre-job execution setup.</span></span> <span data-ttu-id="1eb05-481">As tarefas de liberação do trabalho são para a manutenção ou a limpeza pós-trabalho.</span><span class="sxs-lookup"><span data-stu-id="1eb05-481">Job release tasks are for post-job maintenance or cleanup.</span></span>

* <span data-ttu-id="1eb05-482">**Tarefa de preparação de trabalho**: uma tarefa de preparação de trabalho é executado em todos os nós de computação são tarefas agendadas toorun, antes de qualquer Olá outras tarefas de trabalho são executadas.</span><span class="sxs-lookup"><span data-stu-id="1eb05-482">**Job preparation task**: A job preparation task runs on all compute nodes that are scheduled toorun tasks, before any of hello other job tasks are executed.</span></span> <span data-ttu-id="1eb05-483">Você pode usar dados toocopy de tarefa de preparação um trabalho que são compartilhados por todas as tarefas, mas é exclusivo toohello trabalho, por exemplo.</span><span class="sxs-lookup"><span data-stu-id="1eb05-483">You can use a job preparation task toocopy data that is shared by all tasks, but is unique toohello job, for example.</span></span>
* <span data-ttu-id="1eb05-484">**Tarefa de liberação de trabalho**: quando um trabalho for concluída, uma tarefa de liberação de trabalho é executado em cada nó no pool de saudação que pelo menos uma tarefa executada.</span><span class="sxs-lookup"><span data-stu-id="1eb05-484">**Job release task**: When a job has completed, a job release task runs on each node in hello pool that executed at least one task.</span></span> <span data-ttu-id="1eb05-485">Você pode usar um trabalho versão toodelete dados da tarefa que são copiados pela tarefa de preparação de trabalho hello, ou toocompress e upload log dados de diagnóstico, por exemplo.</span><span class="sxs-lookup"><span data-stu-id="1eb05-485">You can use a job release task toodelete data that is copied by hello job preparation task, or toocompress and upload diagnostic log data, for example.</span></span>

<span data-ttu-id="1eb05-486">Ambos preparação de trabalho e tarefas de versão permitem toospecify toorun uma linha de comando quando a tarefa de saudação é invocada.</span><span class="sxs-lookup"><span data-stu-id="1eb05-486">Both job preparation and release tasks allow you toospecify a command line toorun when hello task is invoked.</span></span> <span data-ttu-id="1eb05-487">Elas oferecem recursos, como download de arquivo, execução elevada, variáveis de ambiente personalizadas, duração máxima da execução, contagem de repetição e tempo de retenção do arquivo.</span><span class="sxs-lookup"><span data-stu-id="1eb05-487">They offer features like file download, elevated execution, custom environment variables, maximum execution duration, retry count, and file retention time.</span></span>

<span data-ttu-id="1eb05-488">Para saber mais sobre tarefas de preparação e de liberação de trabalho, consulte [Executar tarefas de preparação e de conclusão de trabalhos em nós de computação do Lote do Azure](batch-job-prep-release.md).</span><span class="sxs-lookup"><span data-stu-id="1eb05-488">For more information on job preparation and release tasks, see [Run job preparation and completion tasks on Azure Batch compute nodes](batch-job-prep-release.md).</span></span>

### <a name="multi-instance-task"></a><span data-ttu-id="1eb05-489">Tarefa de várias instâncias</span><span class="sxs-lookup"><span data-stu-id="1eb05-489">Multi-instance task</span></span>
<span data-ttu-id="1eb05-490">Um [tarefas de várias instâncias](batch-mpi.md) é uma tarefa que é configurado toorun em mais de um nó de computação simultaneamente.</span><span class="sxs-lookup"><span data-stu-id="1eb05-490">A [multi-instance task](batch-mpi.md) is a task that is configured toorun on more than one compute node simultaneously.</span></span> <span data-ttu-id="1eb05-491">Com tarefas de várias instâncias, você pode habilitar o alto desempenho cenários de computação que exigem um grupo de nós de computação que estão alocados juntos tooprocess uma única carga de trabalho (como Interface MPI (Message Passing)).</span><span class="sxs-lookup"><span data-stu-id="1eb05-491">With multi-instance tasks, you can enable high-performance computing scenarios that require a group of compute nodes that are allocated together tooprocess a single workload (like Message Passing Interface (MPI)).</span></span>

<span data-ttu-id="1eb05-492">Para obter uma discussão detalhada sobre como executar trabalhos MPI em lote usando biblioteca de lote .NET Olá, confira [Use a instância várias tarefas toorun passando Interface aplicativos MPI (Message) em lote do Azure](batch-mpi.md).</span><span class="sxs-lookup"><span data-stu-id="1eb05-492">For a detailed discussion on running MPI jobs in Batch by using hello Batch .NET library, check out [Use multi-instance tasks toorun Message Passing Interface (MPI) applications in Azure Batch](batch-mpi.md).</span></span>

### <a name="task-dependencies"></a><span data-ttu-id="1eb05-493">Dependências da tarefa</span><span class="sxs-lookup"><span data-stu-id="1eb05-493">Task dependencies</span></span>
<span data-ttu-id="1eb05-494">[Dependências de tarefa](batch-task-dependencies.md), como Olá nome implica, permitem que você toospecify uma tarefa depende da conclusão de saudação de outras tarefas antes de sua execução.</span><span class="sxs-lookup"><span data-stu-id="1eb05-494">[Task dependencies](batch-task-dependencies.md), as hello name implies, allow you toospecify that a task depends on hello completion of other tasks before its execution.</span></span> <span data-ttu-id="1eb05-495">Este recurso fornece suporte para situações em que uma tarefa de "downstream" consome saída saudação de uma tarefa de "upstream" ou quando uma tarefa upstream executa algumas inicialização necessária para uma tarefa de downstream.</span><span class="sxs-lookup"><span data-stu-id="1eb05-495">This feature provides support for situations in which a "downstream" task consumes hello output of an "upstream" task--or when an upstream task performs some initialization that is required by a downstream task.</span></span> <span data-ttu-id="1eb05-496">toouse esse recurso, você deve primeiro habilitar dependências em seu trabalho em lotes.</span><span class="sxs-lookup"><span data-stu-id="1eb05-496">toouse this feature, you must first enable task dependencies on your Batch job.</span></span> <span data-ttu-id="1eb05-497">Em seguida, para cada tarefa que depende de outro (ou outros), você especificar tarefas Olá que essa tarefa depende.</span><span class="sxs-lookup"><span data-stu-id="1eb05-497">Then, for each task that depends on another (or many others), you specify hello tasks which that task depends on.</span></span>

<span data-ttu-id="1eb05-498">Com dependências de tarefa, você pode configurar cenários como Olá a seguir:</span><span class="sxs-lookup"><span data-stu-id="1eb05-498">With task dependencies, you can configure scenarios like hello following:</span></span>

* <span data-ttu-id="1eb05-499">A *tarefaB* depende da *tarefaA* (a *tarefaB* não começará sua execução até que a *tarefaA* tenha terminado).</span><span class="sxs-lookup"><span data-stu-id="1eb05-499">*taskB* depends on *taskA* (*taskB* will not begin execution until *taskA* has completed).</span></span>
* <span data-ttu-id="1eb05-500">A *tarefaC* depende da *tarefaA* e da *tarefaB*.</span><span class="sxs-lookup"><span data-stu-id="1eb05-500">*taskC* depends on both *taskA* and *taskB*.</span></span>
* <span data-ttu-id="1eb05-501">A *tarefaD* depende de várias tarefas, como as tarefas de *1* a *10*, antes de ser executada.</span><span class="sxs-lookup"><span data-stu-id="1eb05-501">*taskD* depends on a range of tasks, such as tasks *1* through *10*, before it executes.</span></span>

<span data-ttu-id="1eb05-502">Check-out [tarefas dependências em lote do Azure](batch-task-dependencies.md) e hello [TaskDependencies] [ github_sample_taskdeps] exemplo de código Olá [exemplos de lote do azure] [ github_samples] Repositório GitHub para mais detalhes sobre esse recurso.</span><span class="sxs-lookup"><span data-stu-id="1eb05-502">Check out [Task dependencies in Azure Batch](batch-task-dependencies.md) and hello [TaskDependencies][github_sample_taskdeps] code sample in hello [azure-batch-samples][github_samples] GitHub repository for more in-depth details on this feature.</span></span>

## <a name="environment-settings-for-tasks"></a><span data-ttu-id="1eb05-503">Configurações do ambiente para tarefas</span><span class="sxs-lookup"><span data-stu-id="1eb05-503">Environment settings for tasks</span></span>
<span data-ttu-id="1eb05-504">Cada tarefa executada pelo serviço de lote de saudação tem variáveis de tooenvironment de acesso que ele define nós de computação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-504">Each task executed by hello Batch service has access tooenvironment variables that it sets on compute nodes.</span></span> <span data-ttu-id="1eb05-505">Isso inclui variáveis de ambiente definidas pelo serviço de lote de saudação ([definido pelo serviço][msdn_env_vars]) e variáveis de ambiente personalizado que você pode definir para suas tarefas.</span><span class="sxs-lookup"><span data-stu-id="1eb05-505">This includes environment variables defined by hello Batch service ([service-defined][msdn_env_vars]) and custom environment variables that you can define for your tasks.</span></span> <span data-ttu-id="1eb05-506">executar suas tarefas de scripts e aplicativos de saudação tem acesso toothese as variáveis de ambiente durante a execução.</span><span class="sxs-lookup"><span data-stu-id="1eb05-506">hello applications and scripts your tasks execute have access toothese environment variables during execution.</span></span>

<span data-ttu-id="1eb05-507">Você pode definir variáveis de ambiente personalizadas no nível de tarefa ou trabalho Olá preenchendo Olá *configurações de ambiente* propriedade dessas entidades.</span><span class="sxs-lookup"><span data-stu-id="1eb05-507">You can set custom environment variables at hello task or job level by populating hello *environment settings* property for these entities.</span></span> <span data-ttu-id="1eb05-508">Por exemplo, consulte Olá [adicionar um trabalho tooa] [ rest_add_task] operação (API REST do lote) ou hello [CloudTask.EnvironmentSettings] [ net_cloudtask_env] e [ CloudJob.CommonEnvironmentSettings] [ net_job_env] propriedades no .NET de lote.</span><span class="sxs-lookup"><span data-stu-id="1eb05-508">For example, see hello [Add a task tooa job][rest_add_task] operation (Batch REST API), or hello [CloudTask.EnvironmentSettings][net_cloudtask_env] and [CloudJob.CommonEnvironmentSettings][net_job_env] properties in Batch .NET.</span></span>

<span data-ttu-id="1eb05-509">Seu aplicativo cliente ou serviço pode obter variáveis de ambiente da tarefa, definido pelo serviço e personalizadas, usando Olá [obter informações sobre uma tarefa] [ rest_get_task_info] operação (em lote REST) ou acessando Olá [CloudTask.EnvironmentSettings] [ net_cloudtask_env] propriedade (lote .NET).</span><span class="sxs-lookup"><span data-stu-id="1eb05-509">Your client application or service can obtain a task's environment variables, both service-defined and custom, by using hello [Get information about a task][rest_get_task_info] operation (Batch REST) or by accessing hello [CloudTask.EnvironmentSettings][net_cloudtask_env] property (Batch .NET).</span></span> <span data-ttu-id="1eb05-510">Processos em execução em um nó de computação podem acessar essas e outras variáveis de ambiente no nó hello, por exemplo, usando Olá familiar `%VARIABLE_NAME%` (Windows) ou `$VARIABLE_NAME` sintaxe (Linux).</span><span class="sxs-lookup"><span data-stu-id="1eb05-510">Processes executing on a compute node can access these and other environment variables on hello node, for example, by using hello familiar `%VARIABLE_NAME%` (Windows) or `$VARIABLE_NAME` (Linux) syntax.</span></span>

<span data-ttu-id="1eb05-511">Você pode encontrar uma lista completa de todas as variáveis de ambiente definidas pelo serviço em [Variáveis de ambiente do nó de computação][msdn_env_vars].</span><span class="sxs-lookup"><span data-stu-id="1eb05-511">You can find a full list of all service-defined environment variables in [Compute node environment variables][msdn_env_vars].</span></span>

## <a name="files-and-directories"></a><span data-ttu-id="1eb05-512">Arquivos e diretórios</span><span class="sxs-lookup"><span data-stu-id="1eb05-512">Files and directories</span></span>
<span data-ttu-id="1eb05-513">Cada tarefa tem um *diretório de trabalho* em que ela cria zero ou mais arquivos e diretórios.</span><span class="sxs-lookup"><span data-stu-id="1eb05-513">Each task has a *working directory* under which it creates zero or more files and directories.</span></span> <span data-ttu-id="1eb05-514">Esta pasta de trabalho pode ser usada para armazenar o programa hello executado pela tarefa hello, dados de saudação que ele processa, e Olá saída de processamento de hello, que ele executa.</span><span class="sxs-lookup"><span data-stu-id="1eb05-514">This working directory can be used for storing hello program that is run by hello task, hello data that it processes, and hello output of hello processing it performs.</span></span> <span data-ttu-id="1eb05-515">Todos os arquivos e diretórios de uma tarefa pertencem Olá usuário de tarefa.</span><span class="sxs-lookup"><span data-stu-id="1eb05-515">All files and directories of a task are owned by hello task user.</span></span>

<span data-ttu-id="1eb05-516">Olá serviço de lote expõe uma parte do sistema de arquivos de saudação em um nó como Olá *diretório raiz*.</span><span class="sxs-lookup"><span data-stu-id="1eb05-516">hello Batch service exposes a portion of hello file system on a node as hello *root directory*.</span></span> <span data-ttu-id="1eb05-517">Tarefas podem acessar o diretório raiz de saudação referenciando Olá `AZ_BATCH_NODE_ROOT_DIR` variável de ambiente.</span><span class="sxs-lookup"><span data-stu-id="1eb05-517">Tasks can access hello root directory by referencing hello `AZ_BATCH_NODE_ROOT_DIR` environment variable.</span></span> <span data-ttu-id="1eb05-518">Para saber mais sobre como usar as variáveis de ambiente, consulte [Configurações de ambiente para tarefas](#environment-settings-for-tasks).</span><span class="sxs-lookup"><span data-stu-id="1eb05-518">For more information about using environment variables, see [Environment settings for tasks](#environment-settings-for-tasks).</span></span>

<span data-ttu-id="1eb05-519">diretório raiz de saudação contém Olá estrutura de diretórios a seguir:</span><span class="sxs-lookup"><span data-stu-id="1eb05-519">hello root directory contains hello following directory structure:</span></span>

![Estrutura de diretórios do nó de computação][1]

* <span data-ttu-id="1eb05-521">**compartilhado**: este diretório fornece acesso de leitura/gravação muito*todos os* tarefas que são executados em um nó.</span><span class="sxs-lookup"><span data-stu-id="1eb05-521">**shared**: This directory provides read/write access too*all* tasks that run on a node.</span></span> <span data-ttu-id="1eb05-522">Qualquer tarefa que é executado no nó Olá pode criar, ler, atualizar e excluir arquivos nesse diretório.</span><span class="sxs-lookup"><span data-stu-id="1eb05-522">Any task that runs on hello node can create, read, update, and delete files in this directory.</span></span> <span data-ttu-id="1eb05-523">Tarefas podem acessar este diretório referenciando Olá `AZ_BATCH_NODE_SHARED_DIR` variável de ambiente.</span><span class="sxs-lookup"><span data-stu-id="1eb05-523">Tasks can access this directory by referencing hello `AZ_BATCH_NODE_SHARED_DIR` environment variable.</span></span>
* <span data-ttu-id="1eb05-524">**inicialização**– esse diretório é usado por uma tarefa inicial como seu diretório de trabalho.</span><span class="sxs-lookup"><span data-stu-id="1eb05-524">**startup**: This directory is used by a start task as its working directory.</span></span> <span data-ttu-id="1eb05-525">Todos os arquivos de saudação que são baixados toohello nó pela tarefa de início de saudação são armazenados.</span><span class="sxs-lookup"><span data-stu-id="1eb05-525">All of hello files that are downloaded toohello node by hello start task are stored here.</span></span> <span data-ttu-id="1eb05-526">Olá Iniciar tarefa pode criar, ler, atualizar e excluir arquivos nesse diretório.</span><span class="sxs-lookup"><span data-stu-id="1eb05-526">hello start task can create, read, update, and delete files under this directory.</span></span> <span data-ttu-id="1eb05-527">Tarefas podem acessar este diretório referenciando Olá `AZ_BATCH_NODE_STARTUP_DIR` variável de ambiente.</span><span class="sxs-lookup"><span data-stu-id="1eb05-527">Tasks can access this directory by referencing hello `AZ_BATCH_NODE_STARTUP_DIR` environment variable.</span></span>
* <span data-ttu-id="1eb05-528">**Tarefas**: um diretório é criado para cada tarefa que é executado no nó de saudação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-528">**Tasks**: A directory is created for each task that runs on hello node.</span></span> <span data-ttu-id="1eb05-529">Ele é acessado referenciando Olá `AZ_BATCH_TASK_DIR` variável de ambiente.</span><span class="sxs-lookup"><span data-stu-id="1eb05-529">It is accessed by referencing hello `AZ_BATCH_TASK_DIR` environment variable.</span></span>

    <span data-ttu-id="1eb05-530">Dentro de cada diretório de tarefa, Olá serviço de lote cria um diretório de trabalho (`wd`) cujo caminho exclusivo é especificado pelo Olá `AZ_BATCH_TASK_WORKING_DIR` variável de ambiente.</span><span class="sxs-lookup"><span data-stu-id="1eb05-530">Within each task directory, hello Batch service creates a working directory (`wd`) whose unique path is specified by hello `AZ_BATCH_TASK_WORKING_DIR` environment variable.</span></span> <span data-ttu-id="1eb05-531">Este diretório fornece tarefas de toohello de acesso de leitura/gravação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-531">This directory provides read/write access toohello task.</span></span> <span data-ttu-id="1eb05-532">tarefa Olá pode criar, ler, atualizar e excluir arquivos nesse diretório.</span><span class="sxs-lookup"><span data-stu-id="1eb05-532">hello task can create, read, update, and delete files under this directory.</span></span> <span data-ttu-id="1eb05-533">Esse diretório é mantido com base em Olá *RetentionTime* restrição especificada para a tarefa de saudação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-533">This directory is retained based on hello *RetentionTime* constraint that is specified for hello task.</span></span>

    <span data-ttu-id="1eb05-534">`stdout.txt`e `stderr.txt`: esses arquivos são gravados toohello pasta de tarefas durante a execução de saudação da tarefa de saudação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-534">`stdout.txt` and `stderr.txt`: These files are written toohello task folder during hello execution of hello task.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="1eb05-535">Quando um nó é removido do pool de saudação *todos os* de saudação arquivos que são armazenados no nó de saudação são removidos.</span><span class="sxs-lookup"><span data-stu-id="1eb05-535">When a node is removed from hello pool, *all* of hello files that are stored on hello node are removed.</span></span>
>
>

## <a name="application-packages"></a><span data-ttu-id="1eb05-536">pacotes de aplicativos</span><span class="sxs-lookup"><span data-stu-id="1eb05-536">Application packages</span></span>
<span data-ttu-id="1eb05-537">Olá [pacotes de aplicativos](batch-application-packages.md) recurso fornece fácil gerenciamento e implantação de aplicativos de nós de computação toohello em seus pools.</span><span class="sxs-lookup"><span data-stu-id="1eb05-537">hello [application packages](batch-application-packages.md) feature provides easy management and deployment of applications toohello compute nodes in your pools.</span></span> <span data-ttu-id="1eb05-538">Você pode carregar e gerenciar várias versões de saudação aplicativos executados por suas tarefas, incluindo seus binários e arquivos de suporte.</span><span class="sxs-lookup"><span data-stu-id="1eb05-538">You can upload and manage multiple versions of hello applications run by your tasks, including their binaries and support files.</span></span> <span data-ttu-id="1eb05-539">Em seguida, você pode implantar automaticamente uma ou mais toohello esses aplicativos nós de computação no pool de.</span><span class="sxs-lookup"><span data-stu-id="1eb05-539">Then you can automatically deploy one or more of these applications toohello compute nodes in your pool.</span></span>

<span data-ttu-id="1eb05-540">Você pode especificar os pacotes de aplicativos no nível de pool e tarefa hello.</span><span class="sxs-lookup"><span data-stu-id="1eb05-540">You can specify application packages at hello pool and task level.</span></span> <span data-ttu-id="1eb05-541">Quando você especifica pacotes de aplicativos do pool, o aplicativo hello é nó tooevery implantado no pool de saudação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-541">When you specify pool application packages, hello application is deployed tooevery node in hello pool.</span></span> <span data-ttu-id="1eb05-542">Quando você especifica os pacotes de aplicativos de tarefa, aplicativo hello é implantado toonodes somente que são toorun agendada pelo menos uma das tarefas do trabalho hello, antes de saudação a linha de comando da tarefa é executada.</span><span class="sxs-lookup"><span data-stu-id="1eb05-542">When you specify task application packages, hello application is deployed only toonodes that are scheduled toorun at least one of hello job's tasks, just before hello task's command line is run.</span></span>

<span data-ttu-id="1eb05-543">Identificadores de lote Olá detalhes do trabalho com o armazenamento do Azure toostore seus pacotes de aplicativos e implantação-las toocompute nós, portanto o código e o gerenciamento de sobrecarga pode ser simplificada.</span><span class="sxs-lookup"><span data-stu-id="1eb05-543">Batch handles hello details of working with Azure Storage toostore your application packages and deploy them toocompute nodes, so both your code and management overhead can be simplified.</span></span>

<span data-ttu-id="1eb05-544">toofind mais informações sobre o recurso de pacote de aplicativo hello, check-out [implantar aplicativos toocompute nós com pacotes de aplicativos de lote](batch-application-packages.md).</span><span class="sxs-lookup"><span data-stu-id="1eb05-544">toofind out more about hello application package feature, check out [Deploy applications toocompute nodes with Batch application packages](batch-application-packages.md).</span></span>

> [!NOTE]
> <span data-ttu-id="1eb05-545">Se você adicionar o pool aplicativo pacotes tooan *existente* pool, você deve reinicializar seus nós de computação para o aplicativo hello pacotes toobe implantado toohello nós.</span><span class="sxs-lookup"><span data-stu-id="1eb05-545">If you add pool application packages tooan *existing* pool, you must reboot its compute nodes for hello application packages toobe deployed toohello nodes.</span></span>
>
>

## <a name="pool-and-compute-node-lifetime"></a><span data-ttu-id="1eb05-546">Tempo de vida de nó de computação e de pool</span><span class="sxs-lookup"><span data-stu-id="1eb05-546">Pool and compute node lifetime</span></span>
<span data-ttu-id="1eb05-547">Ao projetar sua solução de lote do Azure, você tem toomake uma decisão de design sobre como e quando os pools são criados e computação quanto nós dentro desses pools estejam disponíveis.</span><span class="sxs-lookup"><span data-stu-id="1eb05-547">When you design your Azure Batch solution, you have toomake a design decision about how and when pools are created, and how long compute nodes within those pools are kept available.</span></span>

<span data-ttu-id="1eb05-548">Em uma extremidade do espectro hello, você pode criar um pool para cada trabalho que você enviar e excluir pool Olá assim que concluir suas tarefas a execução.</span><span class="sxs-lookup"><span data-stu-id="1eb05-548">On one end of hello spectrum, you can create a pool for each job that you submit, and delete hello pool as soon as its tasks finish execution.</span></span> <span data-ttu-id="1eb05-549">Isso maximiza a utilização porque nós Olá são alocados somente quando necessário e desligar assim que elas são ociosas.</span><span class="sxs-lookup"><span data-stu-id="1eb05-549">This maximizes utilization because hello nodes are only allocated when needed, and shut down as soon as they're idle.</span></span> <span data-ttu-id="1eb05-550">Enquanto isso significa que o trabalho Olá deve aguardar Olá nós toobe alocada, é importante toonote tarefas são agendadas para execução como nós individualmente disponíveis, são alocados, e Olá tarefa inicial foi concluída.</span><span class="sxs-lookup"><span data-stu-id="1eb05-550">While this means that hello job must wait for hello nodes toobe allocated, it's important toonote that tasks are scheduled for execution as soon as nodes are individually available, allocated, and hello start task has completed.</span></span> <span data-ttu-id="1eb05-551">Lote *não* Aguarde até que todos os nós dentro de um pool estão disponíveis antes de atribuir tarefas toohello nós.</span><span class="sxs-lookup"><span data-stu-id="1eb05-551">Batch does *not* wait until all nodes within a pool are available before assigning tasks toohello nodes.</span></span> <span data-ttu-id="1eb05-552">Isso garante a máxima utilização de todos os nós disponíveis.</span><span class="sxs-lookup"><span data-stu-id="1eb05-552">This ensures maximum utilization of all available nodes.</span></span>

<span data-ttu-id="1eb05-553">Em Olá outra ponta do espectro Olá, se ter trabalhos iniciar imediatamente é a prioridade mais alta do hello, você pode criar um pool antecipadamente e disponibilizar seus nós para que os trabalhos são enviados.</span><span class="sxs-lookup"><span data-stu-id="1eb05-553">At hello other end of hello spectrum, if having jobs start immediately is hello highest priority, you can create a pool ahead of time and make its nodes available before jobs are submitted.</span></span> <span data-ttu-id="1eb05-554">Nesse cenário, as tarefas podem iniciar imediatamente, mas nós podem ficam ociosos ao aguardar que eles toobe atribuído.</span><span class="sxs-lookup"><span data-stu-id="1eb05-554">In this scenario, tasks can start immediately, but nodes might sit idle while waiting for them toobe assigned.</span></span>

<span data-ttu-id="1eb05-555">Uma abordagem combinada normalmente é usada para lidar com uma carga variável, mas em andamento.</span><span class="sxs-lookup"><span data-stu-id="1eb05-555">A combined approach is typically used for handling a variable, but ongoing, load.</span></span> <span data-ttu-id="1eb05-556">Você pode ter um pool que são enviados para vários trabalhos, mas podem dimensionar o número de saudação de nós para cima ou para baixo de acordo com a carga de trabalho toohello (consulte [recursos de computação de escala](#scaling-compute-resources) em Olá seção a seguir).</span><span class="sxs-lookup"><span data-stu-id="1eb05-556">You can have a pool that multiple jobs are submitted to, but can scale hello number of nodes up or down according toohello job load (see [Scaling compute resources](#scaling-compute-resources) in hello following section).</span></span> <span data-ttu-id="1eb05-557">Isso pode ser feito de maneira reativa, com base na carga atual, ou proativamente, se a carga puder ser prevista.</span><span class="sxs-lookup"><span data-stu-id="1eb05-557">You can do this reactively, based on current load, or proactively, if load can be predicted.</span></span>

## <a name="virtual-network-vnet-and-firewall-configuration"></a><span data-ttu-id="1eb05-558">Configuração de firewall e VNet (rede virtual)</span><span class="sxs-lookup"><span data-stu-id="1eb05-558">Virtual network (VNet) and firewall configuration</span></span> 

<span data-ttu-id="1eb05-559">Quando você provisiona um conjunto de nós de computação em lote do Azure, você pode associar pool Olá com uma sub-rede de um Azure [rede virtual (VNet)](../virtual-network/virtual-networks-overview.md).</span><span class="sxs-lookup"><span data-stu-id="1eb05-559">When you provision a pool of compute nodes in Azure Batch, you can associate hello pool with a subnet of an Azure [virtual network (VNet)](../virtual-network/virtual-networks-overview.md).</span></span> <span data-ttu-id="1eb05-560">toolearn mais sobre como criar uma rede virtual com sub-redes, consulte [criar uma rede virtual do Azure com sub-redes](../virtual-network/virtual-networks-create-vnet-arm-pportal.md).</span><span class="sxs-lookup"><span data-stu-id="1eb05-560">toolearn more about creating a VNet with subnets, see [Create an Azure virtual network with subnets](../virtual-network/virtual-networks-create-vnet-arm-pportal.md).</span></span> 

 * <span data-ttu-id="1eb05-561">Olá associada a um pool de rede virtual deve ser:</span><span class="sxs-lookup"><span data-stu-id="1eb05-561">hello VNet associated with a pool must be:</span></span>

   * <span data-ttu-id="1eb05-562">Em hello Azure mesmo **região** como Olá conta de lote do Azure.</span><span class="sxs-lookup"><span data-stu-id="1eb05-562">In hello same Azure **region** as hello Azure Batch account.</span></span>
   * <span data-ttu-id="1eb05-563">Em Olá mesmo **assinatura** como Olá conta de lote do Azure.</span><span class="sxs-lookup"><span data-stu-id="1eb05-563">In hello same **subscription** as hello Azure Batch account.</span></span>

* <span data-ttu-id="1eb05-564">tipo de saudação da rede virtual com suporte depende como pools estão sendo alocados para Olá conta do lote:</span><span class="sxs-lookup"><span data-stu-id="1eb05-564">hello type of VNet supported depends on how pools are being allocated for hello Batch account:</span></span>

    - <span data-ttu-id="1eb05-565">Se o modo de alocação de pool Olá para sua conta do lote é definido tooBatch serviço, você pode atribuir um toopools somente de rede virtual criada com hello **configuração de serviços de nuvem**.</span><span class="sxs-lookup"><span data-stu-id="1eb05-565">If hello pool allocation mode for your Batch account is set tooBatch Service, then you can assign a VNet only toopools created with hello **Cloud Services Configuration**.</span></span> <span data-ttu-id="1eb05-566">Além disso, Olá especificado que redes devem ser criados com o modelo de implantação clássico hello.</span><span class="sxs-lookup"><span data-stu-id="1eb05-566">Additionally, hello specified VNet must be created with hello classic deployment model.</span></span> <span data-ttu-id="1eb05-567">Não há suporte para VNets criados com o modelo de implantação do Azure Resource Manager hello.</span><span class="sxs-lookup"><span data-stu-id="1eb05-567">VNets created with hello Azure Resource Manager deployment model are not supported.</span></span>
 
    - <span data-ttu-id="1eb05-568">Se o modo de alocação de pool Olá para sua conta do lote é definido tooUser assinatura, você pode atribuir um toopools somente de rede virtual criada com hello **configuração de máquina Virtual**.</span><span class="sxs-lookup"><span data-stu-id="1eb05-568">If hello pool allocation mode for your Batch account is set tooUser Subscription, then you can assign a VNet only toopools created with hello **Virtual Machine Configuration**.</span></span> <span data-ttu-id="1eb05-569">Pools criados com hello **configuração do serviço de nuvem** não têm suporte.</span><span class="sxs-lookup"><span data-stu-id="1eb05-569">Pools created with hello **Cloud Service Configuration** are not supported.</span></span> <span data-ttu-id="1eb05-570">Olá que redes associadas podem ser criadas com o modelo de implantação do Azure Resource Manager hello ou modelo de implantação clássico hello.</span><span class="sxs-lookup"><span data-stu-id="1eb05-570">hello associated VNet may be created with either hello Azure Resource Manager deployment model or hello classic deployment model.</span></span>

    <span data-ttu-id="1eb05-571">Para uma tabela de resumo de suporte de rede virtual de acordo com o modo de alocação toopool, consulte Olá [modo de alocação de Pool](#pool-allocation-mode) seção.</span><span class="sxs-lookup"><span data-stu-id="1eb05-571">For a table summarizing VNet support according toopool allocation mode, see hello [Pool allocation mode](#pool-allocation-mode) section.</span></span>

* <span data-ttu-id="1eb05-572">Se o modo de alocação de pool de saudação para sua conta do lote for definido tooBatch serviço, você deve fornecer permissões para Olá tooaccess principal do serviço de lote Olá VNet.</span><span class="sxs-lookup"><span data-stu-id="1eb05-572">If hello pool allocation mode for your Batch account is set tooBatch Service, then you must provide permissions for hello Batch service principal tooaccess hello VNet.</span></span> <span data-ttu-id="1eb05-573">Olá VNet deve atribuir Olá [Classic Virtual Machine Contributor Role-Based acesso RBAC (controle)](https://azure.microsoft.com/documentation/articles/role-based-access-built-in-roles/#classic-virtual-machine-contributor) entidade de serviço de lote de toohello de função.</span><span class="sxs-lookup"><span data-stu-id="1eb05-573">hello VNet must assign hello [Classic Virtual Machine Contributor Role-Based Access Control (RBAC)](https://azure.microsoft.com/documentation/articles/role-based-access-built-in-roles/#classic-virtual-machine-contributor) role toohello Batch service principal.</span></span> <span data-ttu-id="1eb05-574">Se Olá especificado função RBAC não for fornecida, o serviço de lote de saudação retorna 400 (solicitação incorreta).</span><span class="sxs-lookup"><span data-stu-id="1eb05-574">If hello specified RBAC role is not provided, hello Batch service returns 400 (Bad Request).</span></span> <span data-ttu-id="1eb05-575">função de saudação tooadd em Olá portal do Azure:</span><span class="sxs-lookup"><span data-stu-id="1eb05-575">tooadd hello role in hello Azure portal:</span></span>

    1. <span data-ttu-id="1eb05-576">Selecione Olá **VNet**, em seguida, **(IAM) do controle de acesso** > **funções** > **colaborador da máquina Virtual**  >  **Adicionar**.</span><span class="sxs-lookup"><span data-stu-id="1eb05-576">Select hello **VNet**, then **Access control (IAM)** > **Roles** > **Virtual Machine Contributor** > **Add**.</span></span>
    2. <span data-ttu-id="1eb05-577">Em Olá **adicionar permissões** folha, selecione Olá **colaborador da máquina Virtual** função.</span><span class="sxs-lookup"><span data-stu-id="1eb05-577">On hello **Add permissions** blade, select hello **Virtual Machine Contributor** role.</span></span>
    3. <span data-ttu-id="1eb05-578">Em Olá **adicionar permissões** folha, procure Olá API de lote.</span><span class="sxs-lookup"><span data-stu-id="1eb05-578">On hello **Add permissions** blade, search for hello Batch API.</span></span> <span data-ttu-id="1eb05-579">Pesquise para cada uma dessas cadeias de caracteres por sua vez até encontrar hello API:</span><span class="sxs-lookup"><span data-stu-id="1eb05-579">Search for each of these strings in turn until you find hello API:</span></span>
        1. <span data-ttu-id="1eb05-580">**MicrosoftAzureBatch**.</span><span class="sxs-lookup"><span data-stu-id="1eb05-580">**MicrosoftAzureBatch**.</span></span>
        2. <span data-ttu-id="1eb05-581">**Lote do Microsoft Azure**.</span><span class="sxs-lookup"><span data-stu-id="1eb05-581">**Microsoft Azure Batch**.</span></span> <span data-ttu-id="1eb05-582">Os locatários mais recentes do Azure AD podem usar esse nome.</span><span class="sxs-lookup"><span data-stu-id="1eb05-582">Newer Azure AD tenants may use this name.</span></span>
        3. <span data-ttu-id="1eb05-583">**ddbf3205-c6bd-46ae-8127-60eb93363864** é identificação Olá Olá API de lote.</span><span class="sxs-lookup"><span data-stu-id="1eb05-583">**ddbf3205-c6bd-46ae-8127-60eb93363864** is hello ID for hello Batch API.</span></span> 
    3. <span data-ttu-id="1eb05-584">Selecione Olá entidade de serviço de API de lote.</span><span class="sxs-lookup"><span data-stu-id="1eb05-584">Select hello Batch API service principal.</span></span> 
    4. <span data-ttu-id="1eb05-585">Clique em **Salvar**.</span><span class="sxs-lookup"><span data-stu-id="1eb05-585">Click **Save**.</span></span>

        ![Atribuir a entidade de serviço de tooBatch de função de Colaborador de VM](./media/batch-api-basics/iam-add-role.png)


* <span data-ttu-id="1eb05-587">Olá especificado sub-rede deve ter suficiente livre **endereços IP** tooaccommodate Olá número total de nós de destino; ou seja, Olá soma de saudação `targetDedicatedNodes` e `targetLowPriorityNodes` propriedades de pool de saudação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-587">hello specified subnet should have enough free **IP addresses** tooaccommodate hello total number of target nodes; that is, hello sum of hello `targetDedicatedNodes` and `targetLowPriorityNodes` properties of hello pool.</span></span> <span data-ttu-id="1eb05-588">Se a sub-rede de saudação não tiver endereços IP suficientes livres, Olá serviço de lote parcialmente aloca nós de computação Olá no pool de saudação e retornará um erro de redimensionamento.</span><span class="sxs-lookup"><span data-stu-id="1eb05-588">If hello subnet doesn't have enough free IP addresses, hello Batch service partially allocates hello compute nodes in hello pool and returns a resize error.</span></span>

* <span data-ttu-id="1eb05-589">Olá especificado sub-rede deve permitir tooschedule capaz de tarefas de comunicação de toobe de serviço de lote Olá em nós de computação de saudação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-589">hello specified subnet must allow communication from hello Batch service toobe able tooschedule tasks on hello compute nodes.</span></span> <span data-ttu-id="1eb05-590">Se nós de computação de comunicação toohello é negado por um **grupo de segurança de rede (NSG)** associado Olá rede virtual, e em seguida, Olá serviço de lote define o estado de Olá Olá de nós de computação muito**inutilizável**.</span><span class="sxs-lookup"><span data-stu-id="1eb05-590">If communication toohello compute nodes is denied by a **Network Security Group (NSG)** associated with hello VNet, then hello Batch service sets hello state of hello compute nodes too**unusable**.</span></span>

* <span data-ttu-id="1eb05-591">Se Olá especificado a rede virtual associada **grupos de segurança de rede (NSGs)** e/ou um **firewall**, e algumas portas reservado do sistema devem ser ativadas para comunicação de entrada:</span><span class="sxs-lookup"><span data-stu-id="1eb05-591">If hello specified VNet has associated **Network Security Groups (NSGs)** and/or a **firewall**, then a few reserved system ports must be enabled for inbound communication:</span></span>

- <span data-ttu-id="1eb05-592">Para pools criados com uma configuração de máquina virtual, habilite as portas 29876 e 29877, bem como a porta 22 para Linux e a porta 3389 para Windows.</span><span class="sxs-lookup"><span data-stu-id="1eb05-592">For pools created with a virtual machine configuration, enable ports 29876 and 29877, as well as port 22 for Linux and port 3389 for Windows.</span></span> 
- <span data-ttu-id="1eb05-593">Para pools criados com uma configuração de serviço de nuvem, habilite as portas 10100, 20100 e 30100.</span><span class="sxs-lookup"><span data-stu-id="1eb05-593">For pools created with a cloud service configuration, enable ports 10100, 20100, and 30100.</span></span> 
- <span data-ttu-id="1eb05-594">Habilite conexões de saída tooAzure armazenamento na porta 443.</span><span class="sxs-lookup"><span data-stu-id="1eb05-594">Enable outbound connections tooAzure Storage on port 443.</span></span> <span data-ttu-id="1eb05-595">Além disso, verifique se seu ponto de extremidade do Armazenamento do Azure pode ser resolvido por servidores DNS personalizados que servem sua rede virtual.</span><span class="sxs-lookup"><span data-stu-id="1eb05-595">Also, ensure that your Azure Storage endpoint can be resolved by any custom DNS servers that serve your VNET.</span></span> <span data-ttu-id="1eb05-596">Especificamente, uma URL do formulário de saudação `<account>.table.core.windows.net` deve ser resolvido.</span><span class="sxs-lookup"><span data-stu-id="1eb05-596">Specifically, a URL of hello form `<account>.table.core.windows.net` should be resolvable.</span></span>

    <span data-ttu-id="1eb05-597">Olá, tabela a seguir descreve Olá portas que você precisa tooenable para pools que você criou com a configuração de máquina virtual de saudação de entrada:</span><span class="sxs-lookup"><span data-stu-id="1eb05-597">hello following table describes hello inbound ports that you need tooenable for pools that you created with hello virtual machine configuration:</span></span>

    |    <span data-ttu-id="1eb05-598">Portas de destino</span><span class="sxs-lookup"><span data-stu-id="1eb05-598">Destination Port(s)</span></span>    |    <span data-ttu-id="1eb05-599">Endereço IP de origem</span><span class="sxs-lookup"><span data-stu-id="1eb05-599">Source IP address</span></span>      |    <span data-ttu-id="1eb05-600">O Lote adiciona NSGs?</span><span class="sxs-lookup"><span data-stu-id="1eb05-600">Does Batch add NSGs?</span></span>    |    <span data-ttu-id="1eb05-601">Necessário para a VM toobe utilizável?</span><span class="sxs-lookup"><span data-stu-id="1eb05-601">Required for VM toobe usable?</span></span>    |    <span data-ttu-id="1eb05-602">Ação do usuário</span><span class="sxs-lookup"><span data-stu-id="1eb05-602">Action from user</span></span>   |
    |---------------------------|---------------------------|----------------------------|-------------------------------------|-----------------------|
    |    <ul><li><span data-ttu-id="1eb05-603">Para pools criados com a configuração de máquina virtual Olá: 29876, 29877</span><span class="sxs-lookup"><span data-stu-id="1eb05-603">For pools created with hello virtual machine configuration: 29876, 29877</span></span></li><li><span data-ttu-id="1eb05-604">Para pools criados com a configuração de serviço de nuvem Olá: 10100, 20100, 30100</span><span class="sxs-lookup"><span data-stu-id="1eb05-604">For pools created with hello cloud service configuration: 10100, 20100, 30100</span></span></li></ul>         |    <span data-ttu-id="1eb05-605">Endereços IP com função de serviço Somente Lote</span><span class="sxs-lookup"><span data-stu-id="1eb05-605">Only Batch service role IP addresses</span></span> |    <span data-ttu-id="1eb05-606">Sim.</span><span class="sxs-lookup"><span data-stu-id="1eb05-606">Yes.</span></span> <span data-ttu-id="1eb05-607">Lote adiciona os NSGs no nível de saudação da rede interfaces (NIC) anexados tooVMs.</span><span class="sxs-lookup"><span data-stu-id="1eb05-607">Batch adds NSGs at hello level of network interfaces (NIC) attached tooVMs.</span></span> <span data-ttu-id="1eb05-608">Essas NSGs permitem o tráfego somente de endereços IP com função de serviço do Lote.</span><span class="sxs-lookup"><span data-stu-id="1eb05-608">These NSGs allow traffic only from Batch service role IP addresses.</span></span> <span data-ttu-id="1eb05-609">Mesmo se você abrir essas portas para web inteiro Olá, tráfego de saudação será bloqueado, a saudação NIC.</span><span class="sxs-lookup"><span data-stu-id="1eb05-609">Even if you open these ports for hello  entire web, hello traffic will get blocked at hello NIC.</span></span> |    <span data-ttu-id="1eb05-610">Sim</span><span class="sxs-lookup"><span data-stu-id="1eb05-610">Yes</span></span>  |  <span data-ttu-id="1eb05-611">Não é necessário toospecify um NSG, porque o lote permite que somente os endereços IP de lote.</span><span class="sxs-lookup"><span data-stu-id="1eb05-611">You do not need toospecify an NSG, because Batch allows only Batch IP addresses.</span></span> <br /><br /> <span data-ttu-id="1eb05-612">No entanto, se você especificar um NSG, verifique se essas portas estão abertas para tráfego de entrada.</span><span class="sxs-lookup"><span data-stu-id="1eb05-612">However, if you do specify an NSG, please ensure that these ports are open for inbound traffic.</span></span> <br /><br /> <span data-ttu-id="1eb05-613">Se você especificar * como hello IP de origem em seu NSG, lote ainda adiciona os NSGs no nível de saudação do tooVMs NIC conectada.</span><span class="sxs-lookup"><span data-stu-id="1eb05-613">If you specify * as hello source IP in your NSG, Batch still adds NSGs at hello level of NIC attached tooVMs.</span></span> |
    |    <span data-ttu-id="1eb05-614">3389, 22</span><span class="sxs-lookup"><span data-stu-id="1eb05-614">3389, 22</span></span>               |    <span data-ttu-id="1eb05-615">Máquinas de usuário, usadas para depuração, para que você pode acessar remotamente o hello VM.</span><span class="sxs-lookup"><span data-stu-id="1eb05-615">User machines, used for debugging purposes, so that you can remotely access hello VM.</span></span>    |    <span data-ttu-id="1eb05-616">Não</span><span class="sxs-lookup"><span data-stu-id="1eb05-616">No</span></span>                                    |    <span data-ttu-id="1eb05-617">Não</span><span class="sxs-lookup"><span data-stu-id="1eb05-617">No</span></span>                     |    <span data-ttu-id="1eb05-618">Adicione os NSGs toopermit toohello de acesso remoto (RDP/SSH) VM.</span><span class="sxs-lookup"><span data-stu-id="1eb05-618">Add NSGs if you want toopermit remote access (RDP/SSH) toohello VM.</span></span>   |                 

    <span data-ttu-id="1eb05-619">Olá, a tabela a seguir descreve a porta de saída Olá que você precisa tooenable toopermit acesso tooAzure armazenamento:</span><span class="sxs-lookup"><span data-stu-id="1eb05-619">hello following table describes hello outbound port that you need tooenable toopermit access tooAzure Storage:</span></span>

    |    <span data-ttu-id="1eb05-620">Portas de saída</span><span class="sxs-lookup"><span data-stu-id="1eb05-620">Outbound Port(s)</span></span>    |    <span data-ttu-id="1eb05-621">Destino</span><span class="sxs-lookup"><span data-stu-id="1eb05-621">Destination</span></span>    |    <span data-ttu-id="1eb05-622">O Lote adiciona NSGs?</span><span class="sxs-lookup"><span data-stu-id="1eb05-622">Does Batch add NSGs?</span></span>    |    <span data-ttu-id="1eb05-623">Necessário para a VM toobe utilizável?</span><span class="sxs-lookup"><span data-stu-id="1eb05-623">Required for VM toobe usable?</span></span>    |    <span data-ttu-id="1eb05-624">Ação do usuário</span><span class="sxs-lookup"><span data-stu-id="1eb05-624">Action from user</span></span>    |
    |------------------------|-------------------|----------------------------|-------------------------------------|------------------------|
    |    <span data-ttu-id="1eb05-625">443</span><span class="sxs-lookup"><span data-stu-id="1eb05-625">443</span></span>    |    <span data-ttu-id="1eb05-626">Armazenamento do Azure</span><span class="sxs-lookup"><span data-stu-id="1eb05-626">Azure Storage</span></span>    |    <span data-ttu-id="1eb05-627">Não</span><span class="sxs-lookup"><span data-stu-id="1eb05-627">No</span></span>    |    <span data-ttu-id="1eb05-628">Sim</span><span class="sxs-lookup"><span data-stu-id="1eb05-628">Yes</span></span>    |    <span data-ttu-id="1eb05-629">Se você adicionar qualquer NSGs, certifique-se de que essa porta é aberto toooutbound tráfego.</span><span class="sxs-lookup"><span data-stu-id="1eb05-629">If you add any NSGs, then ensure that this port is open toooutbound   traffic.</span></span>    |


## <a name="scaling-compute-resources"></a><span data-ttu-id="1eb05-630">Dimensionando os recursos de computação</span><span class="sxs-lookup"><span data-stu-id="1eb05-630">Scaling compute resources</span></span>
<span data-ttu-id="1eb05-631">Com [o dimensionamento automático](batch-automatic-scaling.md), você pode ter o serviço de lote Olá ajustar dinamicamente o número de saudação de nós de computação em um pool de acordo com toohello atual carga de trabalho e uso de recursos do seu cenário de computação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-631">With [automatic scaling](batch-automatic-scaling.md), you can have hello Batch service dynamically adjust hello number of compute nodes in a pool according toohello current workload and resource usage of your compute scenario.</span></span> <span data-ttu-id="1eb05-632">Isso permite toolower Olá custo geral da execução do seu aplicativo usando apenas os recursos de saudação é necessário e liberar aqueles não é necessário.</span><span class="sxs-lookup"><span data-stu-id="1eb05-632">This allows you toolower hello overall cost of running your application by using only hello resources you need, and releasing those you don't need.</span></span>

<span data-ttu-id="1eb05-633">Você habilita o dimensionamento automático escrevendo uma [fórmula de dimensionamento automático](batch-automatic-scaling.md#automatic-scaling-formulas) e associando-a a um pool.</span><span class="sxs-lookup"><span data-stu-id="1eb05-633">You enable automatic scaling by writing an [automatic scaling formula](batch-automatic-scaling.md#automatic-scaling-formulas) and associating that formula with a pool.</span></span> <span data-ttu-id="1eb05-634">Olá serviço de lote usa Olá toodetermine fórmula Olá destino quantos nós no pool Olá Olá próximo escala intervalo (um intervalo que você pode configurar).</span><span class="sxs-lookup"><span data-stu-id="1eb05-634">hello Batch service uses hello formula toodetermine hello target number of nodes in hello pool for hello next scaling interval (an interval that you can configure).</span></span> <span data-ttu-id="1eb05-635">Você pode especificar Olá configurações automáticas de escala para um pool ao criá-lo ou habilitar mais tarde o dimensionamento de um pool.</span><span class="sxs-lookup"><span data-stu-id="1eb05-635">You can specify hello automatic scaling settings for a pool when you create it, or enable scaling on a pool later.</span></span> <span data-ttu-id="1eb05-636">Você também pode atualizar Olá dimensionamento configurações em um pool de dimensionamento habilitado.</span><span class="sxs-lookup"><span data-stu-id="1eb05-636">You can also update hello scaling settings on a scaling-enabled pool.</span></span>

<span data-ttu-id="1eb05-637">Por exemplo, talvez um trabalho requer que você enviar um grande número de tarefas toobe executado.</span><span class="sxs-lookup"><span data-stu-id="1eb05-637">As an example, perhaps a job requires that you submit a very large number of tasks toobe executed.</span></span> <span data-ttu-id="1eb05-638">Você pode atribuir um pool de fórmula toohello escala que ajusta Olá número de nós no pool de saudação com base no número atual de saudação de tarefas em fila e a taxa de conclusão de saudação de tarefas Olá no trabalho de saudação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-638">You can assign a scaling formula toohello pool that adjusts hello number of nodes in hello pool based on hello current number of queued tasks and hello completion rate of hello tasks in hello job.</span></span> <span data-ttu-id="1eb05-639">Olá serviço de lote periodicamente avalia a fórmula hello e redimensiona o pool hello, com base na carga de trabalho e as outras configurações de fórmula.</span><span class="sxs-lookup"><span data-stu-id="1eb05-639">hello Batch service periodically evaluates hello formula and resizes hello pool, based on workload and your other formula settings.</span></span> <span data-ttu-id="1eb05-640">Olá serviço adiciona nós, conforme necessário quando há um grande número de tarefas em fila e remove nós quando não existem tarefas em execução ou na fila.</span><span class="sxs-lookup"><span data-stu-id="1eb05-640">hello service adds nodes as needed when there are a large number of queued tasks, and removes nodes when there are no queued or running tasks.</span></span>

<span data-ttu-id="1eb05-641">Uma fórmula de dimensionamento pode ser baseada em Olá métricas a seguir:</span><span class="sxs-lookup"><span data-stu-id="1eb05-641">A scaling formula can be based on hello following metrics:</span></span>

* <span data-ttu-id="1eb05-642">**Métricas de tempo** são baseadas em estatísticas coletadas a cada cinco minutos no Olá especificado número de horas.</span><span class="sxs-lookup"><span data-stu-id="1eb05-642">**Time metrics** are based on statistics collected every five minutes in hello specified number of hours.</span></span>
* <span data-ttu-id="1eb05-643">**métricas do recurso** são baseadas nos usos da CPU, da largura de banda e da memória, e no número de nós.</span><span class="sxs-lookup"><span data-stu-id="1eb05-643">**Resource metrics** are based on CPU usage, bandwidth usage, memory usage, and number of nodes.</span></span>
* <span data-ttu-id="1eb05-644">As **métricas de tarefa** são baseadas no estado da tarefa, como *Ativa* (na fila), *Em execução* ou *Concluída*.</span><span class="sxs-lookup"><span data-stu-id="1eb05-644">**Task metrics** are based on task state, such as *Active* (queued), *Running*, or *Completed*.</span></span>

<span data-ttu-id="1eb05-645">Quando o dimensionamento automático diminui o número de saudação de nós de computação em um pool, você deve considerar como toohandle tarefas em execução no momento de saudação do hello diminuir a operação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-645">When automatic scaling decreases hello number of compute nodes in a pool, you must consider how toohandle tasks that are running at hello time of hello decrease operation.</span></span> <span data-ttu-id="1eb05-646">tooaccommodate, lote fornece um *opção de desalocação de nó* que você pode incluir em suas fórmulas.</span><span class="sxs-lookup"><span data-stu-id="1eb05-646">tooaccommodate this, Batch provides a *node deallocation option* that you can include in your formulas.</span></span> <span data-ttu-id="1eb05-647">Por exemplo, você pode especificar que as tarefas em execução são interrompidas imediatamente, interrompidas imediatamente e, em seguida, retirada da fila para execução em outro nó ou permitidas toofinish antes que o nó de saudação é removido do pool de saudação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-647">For example, you can specify that running tasks are stopped immediately, stopped immediately and then requeued for execution on another node, or allowed toofinish before hello node is removed from hello pool.</span></span>

<span data-ttu-id="1eb05-648">Para saber mais sobre o dimensionamento automático de um aplicativo, consulte [Dimensionar automaticamente nós de computação em um pool do Lote do Azure](batch-automatic-scaling.md).</span><span class="sxs-lookup"><span data-stu-id="1eb05-648">For more information about automatically scaling an application, see [Automatically scale compute nodes in an Azure Batch pool](batch-automatic-scaling.md).</span></span>

> [!TIP]
> <span data-ttu-id="1eb05-649">toomaximize utilização de recursos de computação, definir o número de destino de saudação de nós toozero final Olá de um trabalho, mas permitir toofinish de tarefas em execução.</span><span class="sxs-lookup"><span data-stu-id="1eb05-649">toomaximize compute resource utilization, set hello target number of nodes toozero at hello end of a job, but allow running tasks toofinish.</span></span>
>
>

## <a name="security-with-certificates"></a><span data-ttu-id="1eb05-650">Segurança com certificados</span><span class="sxs-lookup"><span data-stu-id="1eb05-650">Security with certificates</span></span>
<span data-ttu-id="1eb05-651">Você normalmente precisa de certificados toouse ao criptografar ou descriptografar informações confidenciais para tarefas, como chave Olá para um [conta de armazenamento do Azure][azure_storage].</span><span class="sxs-lookup"><span data-stu-id="1eb05-651">You typically need toouse certificates when you encrypt or decrypt sensitive information for tasks, like hello key for an [Azure Storage account][azure_storage].</span></span> <span data-ttu-id="1eb05-652">toosupport isso, você pode instalar certificados em nós.</span><span class="sxs-lookup"><span data-stu-id="1eb05-652">toosupport this, you can install certificates on nodes.</span></span> <span data-ttu-id="1eb05-653">Os segredos criptografados são transmitidos tootasks por meio do parâmetros de linha de comando ou incorporados em um dos recursos da tarefa de saudação e certificados Olá instalado podem ser usado toodecrypt-los.</span><span class="sxs-lookup"><span data-stu-id="1eb05-653">Encrypted secrets are passed tootasks via command-line parameters or embedded in one of hello task resources, and hello installed certificates can be used toodecrypt them.</span></span>

<span data-ttu-id="1eb05-654">Use Olá [Adicionar certificado] [ rest_add_cert] operação (em lote REST) ou [CertificateOperations.CreateCertificate] [ net_create_cert] método (lote .NET) tooadd tooa um certificado conta do lote.</span><span class="sxs-lookup"><span data-stu-id="1eb05-654">You use hello [Add certificate][rest_add_cert] operation (Batch REST) or [CertificateOperations.CreateCertificate][net_create_cert] method (Batch .NET) tooadd a certificate tooa Batch account.</span></span> <span data-ttu-id="1eb05-655">Em seguida, você pode associar certificado Olá com um grupo novo ou existente.</span><span class="sxs-lookup"><span data-stu-id="1eb05-655">You can then associate hello certificate with a new or existing pool.</span></span> <span data-ttu-id="1eb05-656">Quando um certificado está associado um pool, Olá serviço de lote instala certificado Olá em cada nó no pool de saudação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-656">When a certificate is associated with a pool, hello Batch service installs hello certificate on each node in hello pool.</span></span> <span data-ttu-id="1eb05-657">Olá serviço de lote instala certificados apropriados hello quando o nó de saudação é iniciado, antes de iniciar as tarefas (incluindo a tarefa inicial de saudação e a tarefa do Gerenciador de trabalho).</span><span class="sxs-lookup"><span data-stu-id="1eb05-657">hello Batch service installs hello appropriate certificates when hello node starts up, before launching any tasks (including hello start task and job manager task).</span></span>

<span data-ttu-id="1eb05-658">Se você adicionar certificados tooan *existente* pool, você deve reinicializar seus nós de computação Olá certificados toobe aplicada toohello nós.</span><span class="sxs-lookup"><span data-stu-id="1eb05-658">If you add certificates tooan *existing* pool, you must reboot its compute nodes for hello certificates toobe applied toohello nodes.</span></span>

## <a name="error-handling"></a><span data-ttu-id="1eb05-659">Tratamento de erros</span><span class="sxs-lookup"><span data-stu-id="1eb05-659">Error handling</span></span>
<span data-ttu-id="1eb05-660">Talvez seja necessário toohandle falhas de tarefa e o aplicativo em sua solução de lote.</span><span class="sxs-lookup"><span data-stu-id="1eb05-660">You might find it necessary toohandle both task and application failures within your Batch solution.</span></span>

### <a name="task-failure-handling"></a><span data-ttu-id="1eb05-661">Manipulação de falha de tarefa</span><span class="sxs-lookup"><span data-stu-id="1eb05-661">Task failure handling</span></span>
<span data-ttu-id="1eb05-662">As falhas de tarefas se enquadram nestas categorias:</span><span class="sxs-lookup"><span data-stu-id="1eb05-662">Task failures fall into these categories:</span></span>

* <span data-ttu-id="1eb05-663">**Falhas de pré-processamento**</span><span class="sxs-lookup"><span data-stu-id="1eb05-663">**Pre-processing failures**</span></span>

    <span data-ttu-id="1eb05-664">Se uma tarefa falhar toostart, um erro de pré-processamento está definido para a tarefa de saudação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-664">If a task fails toostart, a pre-processing error is set for hello task.</span></span>  

    <span data-ttu-id="1eb05-665">Pré-processando erros pode ocorrer se moveram os arquivos de recursos da tarefa hello, Olá conta de armazenamento não está mais disponível ou outro problema foi encontrado que Olá impediu a cópia bem-sucedida dos arquivos toohello nó.</span><span class="sxs-lookup"><span data-stu-id="1eb05-665">Pre-processing errors can occur if hello task's resource files have moved, hello Storage account is no longer available, or another issue was encountered that prevented hello successful copying of files toohello node.</span></span>

* <span data-ttu-id="1eb05-666">**Falhas de carregamento de arquivo**</span><span class="sxs-lookup"><span data-stu-id="1eb05-666">**File upload failures**</span></span>

    <span data-ttu-id="1eb05-667">Se o carregamento de arquivos que são especificados para uma tarefa falhar por algum motivo, um erro de carregamento de arquivo é definido para a tarefa de saudação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-667">If uploading files that are specified for a task fails for any reason, a file upload error is set for hello task.</span></span>

    <span data-ttu-id="1eb05-668">Podem ocorrer erros se hello SAS fornecidos para acessar o armazenamento do Azure é inválido ou não fornecer permissões de gravação, se a conta de armazenamento Olá não está mais disponível ou se outro problema foi encontrado que impediu o hello com êxito a cópia dos arquivos de carregamento de arquivo nó de saudação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-668">File upload errors can occur if hello SAS supplied for accessing Azure Storage is invalid or does not provide write permissions, if hello storage account is no longer available, or if another issue was encountered that prevented hello successful copying of files from hello node.</span></span>    

* <span data-ttu-id="1eb05-669">**Falhas de aplicativo**</span><span class="sxs-lookup"><span data-stu-id="1eb05-669">**Application failures**</span></span>

    <span data-ttu-id="1eb05-670">processo de saudação que é especificado pela linha de comando da tarefa Olá também pode falhar.</span><span class="sxs-lookup"><span data-stu-id="1eb05-670">hello process that is specified by hello task's command line can also fail.</span></span> <span data-ttu-id="1eb05-671">Olá processo é considerado toohave falha quando um código de saída diferente de zero é retornado pelo processo de saudação que é executado pela tarefa de saudação (consulte *códigos de saída de tarefa* na próxima seção, Olá).</span><span class="sxs-lookup"><span data-stu-id="1eb05-671">hello process is deemed toohave failed when a nonzero exit code is returned by hello process that is executed by hello task (see *Task exit codes* in hello next section).</span></span>

    <span data-ttu-id="1eb05-672">Falhas de aplicativo, você pode configurar o lote tooautomatically repetição Olá tarefa tooa número especificado de vezes.</span><span class="sxs-lookup"><span data-stu-id="1eb05-672">For application failures, you can configure Batch tooautomatically retry hello task up tooa specified number of times.</span></span>

* <span data-ttu-id="1eb05-673">**Falhas de restrição**</span><span class="sxs-lookup"><span data-stu-id="1eb05-673">**Constraint failures**</span></span>

    <span data-ttu-id="1eb05-674">Você pode definir uma restrição que especifica Olá duração de execução máximo para um trabalho ou tarefa, hello *maxWallClockTime*.</span><span class="sxs-lookup"><span data-stu-id="1eb05-674">You can set a constraint that specifies hello maximum execution duration for a job or task, hello *maxWallClockTime*.</span></span> <span data-ttu-id="1eb05-675">Isso pode ser útil para finalizar as tarefas que não tooprogress.</span><span class="sxs-lookup"><span data-stu-id="1eb05-675">This can be useful for terminating tasks that fail tooprogress.</span></span>

    <span data-ttu-id="1eb05-676">Quando o período de tempo máximo Olá foi excedido, a tarefa de saudação é marcada como *concluída*, mas o código de saída de hello está definido muito`0xC000013A` e hello *schedulingError* campo está marcado como `{ category:"ServerError", code="TaskEnded"}`.</span><span class="sxs-lookup"><span data-stu-id="1eb05-676">When hello maximum amount of time has been exceeded, hello task is marked as *completed*, but hello exit code is set too`0xC000013A` and hello *schedulingError* field is marked as `{ category:"ServerError", code="TaskEnded"}`.</span></span>

### <a name="debugging-application-failures"></a><span data-ttu-id="1eb05-677">Falhas de depuração de aplicativos</span><span class="sxs-lookup"><span data-stu-id="1eb05-677">Debugging application failures</span></span>
* <span data-ttu-id="1eb05-678">`stderr` e `stdout`</span><span class="sxs-lookup"><span data-stu-id="1eb05-678">`stderr` and `stdout`</span></span>

    <span data-ttu-id="1eb05-679">Durante a execução, um aplicativo pode produzir saída de diagnóstico que você pode usar tootroubleshoot problemas.</span><span class="sxs-lookup"><span data-stu-id="1eb05-679">During execution, an application might produce diagnostic output that you can use tootroubleshoot issues.</span></span> <span data-ttu-id="1eb05-680">Conforme mencionado em Olá anteriormente nesta seção [arquivos e diretórios](#files-and-directories), Olá serviço de lote grava a saída padrão e erro padrão de saída muito`stdout.txt` e `stderr.txt` arquivos no diretório de tarefa de saudação em Olá nó de computação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-680">As mentioned in hello earlier section [Files and directories](#files-and-directories), hello Batch service writes standard output and standard error output too`stdout.txt` and `stderr.txt` files in hello task directory on hello compute node.</span></span> <span data-ttu-id="1eb05-681">Você pode usar Olá portal do Azure ou um toodownload de SDKs de lote Olá esses arquivos.</span><span class="sxs-lookup"><span data-stu-id="1eb05-681">You can use hello Azure portal or one of hello Batch SDKs toodownload these files.</span></span> <span data-ttu-id="1eb05-682">Por exemplo, você pode recuperar esses e outros arquivos para fins de solução de problemas usando [ComputeNode.GetNodeFile] [ net_getfile_node] e [CloudTask.GetNodeFile] [ net_getfile_task] na biblioteca do .NET em lotes de saudação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-682">For example, you can retrieve these and other files for troubleshooting purposes by using [ComputeNode.GetNodeFile][net_getfile_node] and [CloudTask.GetNodeFile][net_getfile_task] in hello Batch .NET library.</span></span>

* <span data-ttu-id="1eb05-683">**Códigos de saída de tarefas**</span><span class="sxs-lookup"><span data-stu-id="1eb05-683">**Task exit codes**</span></span>

    <span data-ttu-id="1eb05-684">Como mencionado anteriormente, uma tarefa está marcada como falha pelo serviço de lote Olá se o processo de saudação que é executado pela tarefa de saudação retorna um código de saída diferente de zero.</span><span class="sxs-lookup"><span data-stu-id="1eb05-684">As mentioned earlier, a task is marked as failed by hello Batch service if hello process that is executed by hello task returns a nonzero exit code.</span></span> <span data-ttu-id="1eb05-685">Quando uma tarefa executa um processo, lote preenche a propriedade de código de saída da tarefa Olá com hello *código de retorno do processo de saudação*.</span><span class="sxs-lookup"><span data-stu-id="1eb05-685">When a task executes a process, Batch populates hello task's exit code property with hello *return code of hello process*.</span></span> <span data-ttu-id="1eb05-686">É importante toonote que o código de saída da tarefa é **não** determinado pelo serviço de lote de saudação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-686">It is important toonote that a task's exit code is **not** determined by hello Batch service.</span></span> <span data-ttu-id="1eb05-687">Código de saída da tarefa é determinado pelo próprio processo de saudação ou sistema operacional Olá qual processo Olá executado.</span><span class="sxs-lookup"><span data-stu-id="1eb05-687">A task's exit code is determined by hello process itself or hello operating system on which hello process executed.</span></span>

### <a name="accounting-for-task-failures-or-interruptions"></a><span data-ttu-id="1eb05-688">Contabilidade de interrupções ou de falhas de tarefas</span><span class="sxs-lookup"><span data-stu-id="1eb05-688">Accounting for task failures or interruptions</span></span>
<span data-ttu-id="1eb05-689">As tarefas podem falhar ou ser interrompidas ocasionalmente.</span><span class="sxs-lookup"><span data-stu-id="1eb05-689">Tasks might occasionally fail or be interrupted.</span></span> <span data-ttu-id="1eb05-690">Hello tarefa aplicativo em si pode falhar, nó Olá no qual Olá tarefa está em execução pode ser reinicializado ou nó Olá pode ser removido do pool de saudação durante uma operação de redimensionamento se hello, política de desalocação do pool é conjunto tooremove nós imediatamente sem aguardar toofinish de tarefas.</span><span class="sxs-lookup"><span data-stu-id="1eb05-690">hello task application itself might fail, hello node on which hello task is running might be rebooted, or hello node might be removed from hello pool during a resize operation if hello pool's deallocation policy is set tooremove nodes immediately without waiting for tasks toofinish.</span></span> <span data-ttu-id="1eb05-691">Em todos os casos, tarefa Olá pode ser automaticamente retirada da fila de lote para execução em outro nó.</span><span class="sxs-lookup"><span data-stu-id="1eb05-691">In all cases, hello task can be automatically requeued by Batch for execution on another node.</span></span>

<span data-ttu-id="1eb05-692">Ele também é possível que um problema intermitente de toocause toohang uma tarefa ou coloque tooexecute muito longo.</span><span class="sxs-lookup"><span data-stu-id="1eb05-692">It is also possible for an intermittent issue toocause a task toohang or take too long tooexecute.</span></span> <span data-ttu-id="1eb05-693">Você pode definir o intervalo de saudação de execução máximo para uma tarefa.</span><span class="sxs-lookup"><span data-stu-id="1eb05-693">You can set hello maximum execution interval for a task.</span></span> <span data-ttu-id="1eb05-694">Se o intervalo de saudação de execução máximo for excedido, Olá serviço de lote interrupções de aplicativo de tarefa hello.</span><span class="sxs-lookup"><span data-stu-id="1eb05-694">If hello maximum execution interval is exceeded, hello Batch service interrupts hello task application.</span></span>

### <a name="connecting-toocompute-nodes"></a><span data-ttu-id="1eb05-695">Conectando nós toocompute</span><span class="sxs-lookup"><span data-stu-id="1eb05-695">Connecting toocompute nodes</span></span>
<span data-ttu-id="1eb05-696">Você pode executar adicionais de depuração e solução de problemas ao entrar no nó de computação tooa remotamente.</span><span class="sxs-lookup"><span data-stu-id="1eb05-696">You can perform additional debugging and troubleshooting by signing in tooa compute node remotely.</span></span> <span data-ttu-id="1eb05-697">Você pode usar o hello toodownload portal do Azure um arquivo de protocolo de área de trabalho remota (RDP) para nós do Windows e obter informações de conexão Secure Shell (SSH) para nós do Linux.</span><span class="sxs-lookup"><span data-stu-id="1eb05-697">You can use hello Azure portal toodownload a Remote Desktop Protocol (RDP) file for Windows nodes and obtain Secure Shell (SSH) connection information for Linux nodes.</span></span> <span data-ttu-id="1eb05-698">Você também pode fazer isso usando Olá lote APIs – por exemplo, com [Batch .NET] [ net_rdpfile] ou [lote Python](batch-linux-nodes.md#connect-to-linux-nodes-using-ssh).</span><span class="sxs-lookup"><span data-stu-id="1eb05-698">You can also do this by using hello Batch APIs--for example, with [Batch .NET][net_rdpfile] or [Batch Python](batch-linux-nodes.md#connect-to-linux-nodes-using-ssh).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="1eb05-699">nó de tooa tooconnect via RDP ou SSH, você primeiro deve criar um usuário no nó de saudação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-699">tooconnect tooa node via RDP or SSH, you must first create a user on hello node.</span></span> <span data-ttu-id="1eb05-700">toodo isso, você pode usar o hello portal do Azure, [adicionar um nó de tooa de conta de usuário] [ rest_create_user] usando Olá API REST do lote, chame Olá [ComputeNode.CreateComputeNodeUser] [ net_create_user] método no .NET em lotes ou chamada hello [add_user] [ py_add_user] método no módulo de lote Python hello.</span><span class="sxs-lookup"><span data-stu-id="1eb05-700">toodo this, you can use hello Azure portal, [add a user account tooa node][rest_create_user] by using hello Batch REST API, call hello [ComputeNode.CreateComputeNodeUser][net_create_user] method in Batch .NET, or call hello [add_user][py_add_user] method in hello Batch Python module.</span></span>
>
>

### <a name="troubleshooting-problematic-compute-nodes"></a><span data-ttu-id="1eb05-701">Solucionando os nós de computação problemáticos</span><span class="sxs-lookup"><span data-stu-id="1eb05-701">Troubleshooting problematic compute nodes</span></span>
<span data-ttu-id="1eb05-702">Em situações em que algumas das suas tarefas estão falhando, seu aplicativo de cliente do lote ou o serviço pode examinar metadados de saudação do hello falhado tarefas tooidentify um nó com comportamento inadequado.</span><span class="sxs-lookup"><span data-stu-id="1eb05-702">In situations where some of your tasks are failing, your Batch client application or service can examine hello metadata of hello failed tasks tooidentify a misbehaving node.</span></span> <span data-ttu-id="1eb05-703">Cada nó em um pool recebe uma ID exclusiva e nó Olá no qual uma tarefa é executada está incluída nos metadados da tarefa de saudação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-703">Each node in a pool is given a unique ID, and hello node on which a task runs is included in hello task metadata.</span></span> <span data-ttu-id="1eb05-704">Após identificar um nó com problemas, você poderá executar várias ações nele:</span><span class="sxs-lookup"><span data-stu-id="1eb05-704">After you've identified a problem node, you can take several actions with it:</span></span>

* <span data-ttu-id="1eb05-705">**Reinicie o nó de saudação** ([REST][rest_reboot] | [.NET][net_reboot])</span><span class="sxs-lookup"><span data-stu-id="1eb05-705">**Reboot hello node** ([REST][rest_reboot] | [.NET][net_reboot])</span></span>

    <span data-ttu-id="1eb05-706">Nó de saudação reiniciar às vezes pode limpar latentes problemas como processos presos ou falha.</span><span class="sxs-lookup"><span data-stu-id="1eb05-706">Restarting hello node can sometimes clear up latent issues like stuck or crashed processes.</span></span> <span data-ttu-id="1eb05-707">Observe que se o pool usa uma tarefa inicial ou uma tarefa de preparação de trabalho usa o seu trabalho, elas são executadas quando Olá nó é reiniciado.</span><span class="sxs-lookup"><span data-stu-id="1eb05-707">Note that if your pool uses a start task or your job uses a job preparation task, they are executed when hello node restarts.</span></span>
* <span data-ttu-id="1eb05-708">**Refazer a imagem de nó Olá** ([REST][rest_reimage] | [.NET][net_reimage])</span><span class="sxs-lookup"><span data-stu-id="1eb05-708">**Reimage hello node** ([REST][rest_reimage] | [.NET][net_reimage])</span></span>

    <span data-ttu-id="1eb05-709">Isso reinstala o sistema de operacional de saudação no nó de saudação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-709">This reinstalls hello operating system on hello node.</span></span> <span data-ttu-id="1eb05-710">Com a reinicialização de um nó, iniciar tarefas e tarefas de preparação de trabalho executar novamente depois que o nó de saudação foi criado.</span><span class="sxs-lookup"><span data-stu-id="1eb05-710">As with rebooting a node, start tasks and job preparation tasks are rerun after hello node has been reimaged.</span></span>
* <span data-ttu-id="1eb05-711">**Remover nó de saudação do pool de saudação** ([REST][rest_remove] | [.NET][net_remove])</span><span class="sxs-lookup"><span data-stu-id="1eb05-711">**Remove hello node from hello pool** ([REST][rest_remove] | [.NET][net_remove])</span></span>

    <span data-ttu-id="1eb05-712">Às vezes, é necessário toocompletely remover nó de saudação do pool de saudação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-712">Sometimes it is necessary toocompletely remove hello node from hello pool.</span></span>
* <span data-ttu-id="1eb05-713">**Desabilitar o agendamento de tarefas no nó Olá** ([REST][rest_offline] | [.NET][net_offline])</span><span class="sxs-lookup"><span data-stu-id="1eb05-713">**Disable task scheduling on hello node** ([REST][rest_offline] | [.NET][net_offline])</span></span>

    <span data-ttu-id="1eb05-714">Isso efetivamente leva nó Olá off-line de forma que nenhuma tarefa adicional recebem tooit, mas permite Olá nó tooremain em execução no pool de saudação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-714">This effectively takes hello node offline so that no further tasks are assigned tooit, but allows hello node tooremain running and in hello pool.</span></span> <span data-ttu-id="1eb05-715">Isso permite que você tooperform mais investigação Olá causa de falhas de saudação sem perda de dados da tarefa com falha Olá e sem nó Olá causando falhas de tarefas adicionais.</span><span class="sxs-lookup"><span data-stu-id="1eb05-715">This enables you tooperform further investigation into hello cause of hello failures without losing hello failed task's data, and without hello node causing additional task failures.</span></span> <span data-ttu-id="1eb05-716">Por exemplo, você pode desabilitar um agendamento de tarefas no nó hello, em seguida, [entrar remotamente](#connecting-to-compute-nodes) tooexamine Olá logs de eventos do nó ou executar outra solução de problemas.</span><span class="sxs-lookup"><span data-stu-id="1eb05-716">For example, you can disable task scheduling on hello node, then [sign in remotely](#connecting-to-compute-nodes) tooexamine hello node's event logs or perform other troubleshooting.</span></span> <span data-ttu-id="1eb05-717">Depois de concluir sua investigação, você poderá colocar nó de saudação on-line, permitindo o agendamento de tarefas ([REST][rest_online] | [.NET] [ net_online]), ou executar uma saudação outras ações discutidas anteriormente.</span><span class="sxs-lookup"><span data-stu-id="1eb05-717">After you've finished your investigation, you can then bring hello node back online by enabling task scheduling ([REST][rest_online] | [.NET][net_online]), or perform one of hello other actions discussed earlier.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="1eb05-718">Com cada ação que é descrita nesta seção – reinicializar, a recriação de imagem, remover e desabilitar agendamento de tarefas – será capaz de toospecify como tarefas atualmente em execução no nó de saudação são tratadas quando você executar a ação de saudação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-718">With each action that is described in this section--reboot, reimage, remove, and disable task scheduling--you are able toospecify how tasks currently running on hello node are handled when you perform hello action.</span></span> <span data-ttu-id="1eb05-719">Por exemplo, quando você desativar o agendamento de tarefas em um nó usando a biblioteca de cliente .NET do lote hello, você pode especificar um [DisableComputeNodeSchedulingOption] [ net_offline_option] toospecify o valor de enumeração se muito**Terminate** executar tarefas, **Requeue** -los para o agendamento em outros nós, ou permitir toocomplete de tarefas em execução antes de executar a ação de saudação (**TaskCompletion**).</span><span class="sxs-lookup"><span data-stu-id="1eb05-719">For example, when you disable task scheduling on a node by using hello Batch .NET client library, you can specify a [DisableComputeNodeSchedulingOption][net_offline_option] enum value toospecify whether too**Terminate** running tasks, **Requeue** them for scheduling on other nodes, or allow running tasks toocomplete before performing hello action (**TaskCompletion**).</span></span>
>
>

## <a name="next-steps"></a><span data-ttu-id="1eb05-720">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="1eb05-720">Next steps</span></span>
* <span data-ttu-id="1eb05-721">Saiba mais sobre Olá [ferramentas e APIs de lote](batch-apis-tools.md) disponíveis para criar soluções de lote.</span><span class="sxs-lookup"><span data-stu-id="1eb05-721">Learn about hello [Batch APIs and tools](batch-apis-tools.md) available for building Batch solutions.</span></span>
* <span data-ttu-id="1eb05-722">Percorrer um passo a passo no exemplo de aplicativo de lote [começar com hello biblioteca do lote do Azure para .NET](batch-dotnet-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="1eb05-722">Walk through a sample Batch application step-by-step in [Get started with hello Azure Batch Library for .NET](batch-dotnet-get-started.md).</span></span> <span data-ttu-id="1eb05-723">Também há um [versão do Python](batch-python-tutorial.md) tutorial Olá que executa uma carga de trabalho no Linux nós de computação.</span><span class="sxs-lookup"><span data-stu-id="1eb05-723">There is also a [Python version](batch-python-tutorial.md) of hello tutorial that runs a workload on Linux compute nodes.</span></span>
* <span data-ttu-id="1eb05-724">Baixe e criar hello [Explorer lote] [ github_batchexplorer] projeto de exemplo para uso ao desenvolver suas soluções de lote.</span><span class="sxs-lookup"><span data-stu-id="1eb05-724">Download and build hello [Batch Explorer][github_batchexplorer] sample project for use while you develop your Batch solutions.</span></span> <span data-ttu-id="1eb05-725">Olá lote Explorer pode executar a seguir hello e muito mais:</span><span class="sxs-lookup"><span data-stu-id="1eb05-725">Using hello Batch Explorer, you can perform hello following and more:</span></span>

  * <span data-ttu-id="1eb05-726">Monitorar e manipular pools, trabalhos e tarefas em sua conta do Lote</span><span class="sxs-lookup"><span data-stu-id="1eb05-726">Monitor and manipulate pools, jobs, and tasks within your Batch account</span></span>
  * <span data-ttu-id="1eb05-727">Baixe `stdout.txt`, `stderr.txt` e outros arquivos de nós</span><span class="sxs-lookup"><span data-stu-id="1eb05-727">Download `stdout.txt`, `stderr.txt`, and other files from nodes</span></span>
  * <span data-ttu-id="1eb05-728">Criar usuários em nós e baixar arquivos RDP para logon remoto</span><span class="sxs-lookup"><span data-stu-id="1eb05-728">Create users on nodes and download RDP files for remote login</span></span>
* <span data-ttu-id="1eb05-729">Saiba como muito[criar pools de nós de computação Linux](batch-linux-nodes.md).</span><span class="sxs-lookup"><span data-stu-id="1eb05-729">Learn how too[create pools of Linux compute nodes](batch-linux-nodes.md).</span></span>
* <span data-ttu-id="1eb05-730">Visite Olá [Fórum do Azure Batch] [ batch_forum] no MSDN.</span><span class="sxs-lookup"><span data-stu-id="1eb05-730">Visit hello [Azure Batch forum][batch_forum] on MSDN.</span></span> <span data-ttu-id="1eb05-731">Fórum de saudação é um bom colocar tooask perguntas, se você estiver aprendendo apenas ou um especialista em lote de uso.</span><span class="sxs-lookup"><span data-stu-id="1eb05-731">hello forum is a good place tooask questions, whether you are just learning or are an expert in using Batch.</span></span>

[1]: ./media/batch-api-basics/node-folder-structure.png

[azure_storage]: https://azure.microsoft.com/services/storage/
[batch_forum]: https://social.msdn.microsoft.com/Forums/en-US/home?forum=azurebatch
[cloud_service_sizes]: ../cloud-services/cloud-services-sizes-specs.md
[msmpi]: https://msdn.microsoft.com/library/bb524831.aspx
[github_samples]: https://github.com/Azure/azure-batch-samples
[github_sample_taskdeps]:  https://github.com/Azure/azure-batch-samples/tree/master/CSharp/ArticleProjects/TaskDependencies
[github_batchexplorer]: https://github.com/Azure/azure-batch-samples/tree/master/CSharp/BatchExplorer
[batch_net_api]: https://msdn.microsoft.com/library/azure/mt348682.aspx
[msdn_env_vars]: https://msdn.microsoft.com/library/azure/mt743623.aspx
[net_cloudjob_jobmanagertask]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudjob.jobmanagertask.aspx
[net_cloudjob_priority]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudjob.priority.aspx
[net_cloudpool_starttask]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudpool.starttask.aspx
[net_cloudtask_env]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudtask.environmentsettings.aspx
[net_create_cert]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.certificateoperations.createcertificate.aspx
[net_create_user]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.computenode.createcomputenodeuser.aspx
[net_getfile_node]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.computenode.getnodefile.aspx
[net_getfile_task]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudtask.getnodefile.aspx
[net_job_env]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudjob.commonenvironmentsettings.aspx
[net_multiinstancesettings]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.multiinstancesettings.aspx
[net_onalltaskscomplete]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudjob.onalltaskscomplete.aspx
[net_rdp]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.computenode.getrdpfile.aspx
[net_reboot]: https://msdn.microsoft.com/library/azure/mt631495.aspx
[net_reimage]: https://msdn.microsoft.com/library/azure/mt631496.aspx
[net_remove]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.pooloperations.removefrompoolasync.aspx
[net_offline]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.computenode.disableschedulingasync.aspx
[net_online]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.computenode.enableschedulingasync.aspx
[net_offline_option]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.common.disablecomputenodeschedulingoption.aspx
[net_rdpfile]: https://msdn.microsoft.com/library/azure/Mt272127.aspx
[vnet]: https://msdn.microsoft.com/library/azure/dn820174.aspx#bk_netconf

[py_add_user]: http://azure-sdk-for-python.readthedocs.io/en/latest/ref/azure.batch.operations.html#azure.batch.operations.ComputeNodeOperations.add_user

[batch_rest_api]: https://msdn.microsoft.com/library/azure/Dn820158.aspx
[rest_add_job]: https://msdn.microsoft.com/library/azure/mt282178.aspx
[rest_add_pool]: https://msdn.microsoft.com/library/azure/dn820174.aspx
[rest_add_cert]: https://msdn.microsoft.com/library/azure/dn820169.aspx
[rest_add_task]: https://msdn.microsoft.com/library/azure/dn820105.aspx
[rest_create_user]: https://msdn.microsoft.com/library/azure/dn820137.aspx
[rest_get_task_info]: https://msdn.microsoft.com/library/azure/dn820133.aspx
[rest_job_schedules]: https://msdn.microsoft.com/library/azure/mt282179.aspx
[rest_multiinstance]: https://msdn.microsoft.com/library/azure/mt637905.aspx
[rest_multiinstancesettings]: https://msdn.microsoft.com/library/azure/dn820105.aspx#multiInstanceSettings
[rest_update_job]: https://msdn.microsoft.com/library/azure/dn820162.aspx
[rest_rdp]: https://msdn.microsoft.com/library/azure/dn820120.aspx
[rest_reboot]: https://msdn.microsoft.com/library/azure/dn820171.aspx
[rest_reimage]: https://msdn.microsoft.com/library/azure/dn820157.aspx
[rest_remove]: https://msdn.microsoft.com/library/azure/dn820194.aspx
[rest_offline]: https://msdn.microsoft.com/library/azure/mt637904.aspx
[rest_online]: https://msdn.microsoft.com/library/azure/mt637907.aspx

[vm_marketplace]: https://azure.microsoft.com/marketplace/virtual-machines/
