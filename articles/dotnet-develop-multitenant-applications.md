---
title: "Padrão de aplicativo Web de locatário aaaMulti | Microsoft Docs"
description: "Localize visões gerais de arquitetura e padrões de design que descrevem como tooimplement um multilocatário web aplicativo no Azure."
services: 
documentationcenter: .net
author: wadepickett
manager: wpickett
editor: 
ms.assetid: 4f0281d2-1555-42b0-a99d-1222fade0b0f
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 06/05/2015
ms.author: wpickett
ms.openlocfilehash: 3b7822c8ca4aa50d295a174973ae4746c230ba66
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="multitenant-applications-in-azure"></a><span data-ttu-id="fef92-103">Aplicativos multilocatários no Azure</span><span class="sxs-lookup"><span data-stu-id="fef92-103">Multitenant Applications in Azure</span></span>
<span data-ttu-id="fef92-104">Um aplicativo multilocatário é um recurso compartilhado que permite que o aplicativo de saudação de tooview separado de usuários ou "locatários," como se fosse seu próprio.</span><span class="sxs-lookup"><span data-stu-id="fef92-104">A multitenant application is a shared resource that allows separate users, or "tenants," tooview hello application as though it was their own.</span></span> <span data-ttu-id="fef92-105">Um cenário típico que presta aplicativo multilocatário tooa é aquele em que todos os usuários de saudação aplicativo pode desejar a experiência do usuário Olá toocustomize mas detêm Olá os mesmos requisitos de negócios básico.</span><span class="sxs-lookup"><span data-stu-id="fef92-105">A typical scenario that lends itself tooa multitenant application is one in which all users of hello application may wish toocustomize hello user experience but otherwise have hello same basic business requirements.</span></span> <span data-ttu-id="fef92-106">Exemplos de grandes aplicativos multilocatários são o Office 365, o Outlook.com e o visualstudio.com.</span><span class="sxs-lookup"><span data-stu-id="fef92-106">Examples of large multitenant applications are Office 365, Outlook.com, and visualstudio.com.</span></span>

<span data-ttu-id="fef92-107">Da perspectiva de um provedor aplicativo, os benefícios de Olá de multilocação principalmente se relacionam toooperational e eficiência de custos.</span><span class="sxs-lookup"><span data-stu-id="fef92-107">From an application provider's perspective, hello benefits of multitenancy mostly relate toooperational and cost efficiencies.</span></span> <span data-ttu-id="fef92-108">Uma versão do seu aplicativo pode atender às necessidades de saudação de locatários muitos/clientes, permitindo a consolidação do sistema de tarefas de administração, como monitoramento, ajuste de desempenho, manutenção de software e backups de dados.</span><span class="sxs-lookup"><span data-stu-id="fef92-108">One version of your application can meet hello needs of many tenants/customers, allowing consolidation of system administration tasks such as monitoring, performance tuning, software maintenance, and data backups.</span></span>

<span data-ttu-id="fef92-109">a seguir Olá fornece uma lista de metas mais significativas do hello e os requisitos da perspectiva do provedor.</span><span class="sxs-lookup"><span data-stu-id="fef92-109">hello following provides a list of hello most significant goals and requirements from a provider's perspective.</span></span>

* <span data-ttu-id="fef92-110">**Provisionamento**: você deve ser capaz de tooprovision novos locatários para o aplicativo hello.</span><span class="sxs-lookup"><span data-stu-id="fef92-110">**Provisioning**: You must be able tooprovision new tenants for hello application.</span></span>  <span data-ttu-id="fef92-111">Para aplicativos multilocatários com um grande número de locatários, é geralmente necessário tooautomate esse processo, permitindo o provisionamento de autoatendimento.</span><span class="sxs-lookup"><span data-stu-id="fef92-111">For multitenant applications with a large number of tenants, it is usually necessary tooautomate this process by enabling self-service provisioning.</span></span>
* <span data-ttu-id="fef92-112">**Facilidade de manutenção**: você deve ser capaz de tooupgrade Olá aplicativo e executar outras tarefas de manutenção enquanto estiver usando vários locatários-lo.</span><span class="sxs-lookup"><span data-stu-id="fef92-112">**Maintainability**: You must be able tooupgrade hello application and perform other maintenance tasks while multiple tenants are using it.</span></span>
* <span data-ttu-id="fef92-113">**Monitoramento**: você deve ser toomonitor capaz de aplicativo de hello em todos os momentos tooidentify quaisquer problemas e tootroubleshoot-los.</span><span class="sxs-lookup"><span data-stu-id="fef92-113">**Monitoring**: You must be able toomonitor hello application at all times tooidentify any problems and tootroubleshoot them.</span></span> <span data-ttu-id="fef92-114">Isso inclui monitoramento como cada locatário está usando o aplicativo hello.</span><span class="sxs-lookup"><span data-stu-id="fef92-114">This includes monitoring how each tenant is using hello application.</span></span>

<span data-ttu-id="fef92-115">Um aplicativo multilocatário implementado adequadamente fornece a seguinte Olá benefícios toousers.</span><span class="sxs-lookup"><span data-stu-id="fef92-115">A properly implemented multitenant application provides hello following benefits toousers.</span></span>

* <span data-ttu-id="fef92-116">**Isolamento**: atividades Olá de locatários individuais não afeta o uso de saudação do aplicativo hello por outros locatários.</span><span class="sxs-lookup"><span data-stu-id="fef92-116">**Isolation**: hello activities of individual tenants do not affect hello use of hello application by other tenants.</span></span> <span data-ttu-id="fef92-117">Os locatários não podem acessar os dados uns dos outros.</span><span class="sxs-lookup"><span data-stu-id="fef92-117">Tenants cannot access each other's data.</span></span> <span data-ttu-id="fef92-118">Parece toohello locatário que tiverem o uso exclusivo do aplicativo hello.</span><span class="sxs-lookup"><span data-stu-id="fef92-118">It appears toohello tenant as though they have exclusive use of hello application.</span></span>
* <span data-ttu-id="fef92-119">**Disponibilidade**: locatários individuais deseja Olá aplicativo toobe constantemente disponível, talvez com garantias definidas em um SLA.</span><span class="sxs-lookup"><span data-stu-id="fef92-119">**Availability**: Individual tenants want hello application toobe constantly available, perhaps with guarantees defined in an SLA.</span></span> <span data-ttu-id="fef92-120">Novamente, atividades de saudação de outros locatários não devem afetar a disponibilidade de saudação do aplicativo hello.</span><span class="sxs-lookup"><span data-stu-id="fef92-120">Again, hello activities of other tenants should not affect hello availability of hello application.</span></span>
* <span data-ttu-id="fef92-121">**Escalabilidade**: aplicativo hello dimensiona toomeet demanda de saudação de locatários individuais.</span><span class="sxs-lookup"><span data-stu-id="fef92-121">**Scalability**: hello application scales toomeet hello demand of individual tenants.</span></span> <span data-ttu-id="fef92-122">Olá presença e ações de outros locatários não devem afetar desempenho de saudação do aplicativo hello.</span><span class="sxs-lookup"><span data-stu-id="fef92-122">hello presence and actions of other tenants should not affect hello performance of hello application.</span></span>
* <span data-ttu-id="fef92-123">**Os custos**: custos são menores que a execução de um aplicativo dedicado, único locatário, porque permite a multilocação Olá compartilhamento de recursos.</span><span class="sxs-lookup"><span data-stu-id="fef92-123">**Costs**: Costs are lower than running a dedicated, single-tenant application because multi-tenancy enables hello sharing of resources.</span></span>
* <span data-ttu-id="fef92-124">**Capacidade de personalização**.</span><span class="sxs-lookup"><span data-stu-id="fef92-124">**Customizability**.</span></span> <span data-ttu-id="fef92-125">Olá capacidade toocustomize Olá aplicativo para um locatário individual de várias maneiras, como adicionar ou remover recursos, alterar os logotipos e cores ou até mesmo adicionar seu próprio código ou script.</span><span class="sxs-lookup"><span data-stu-id="fef92-125">hello ability toocustomize hello application for an individual tenant in various ways such as adding or removing features, changing colors and logos, or even adding their own code or script.</span></span>

<span data-ttu-id="fef92-126">Resumindo, embora haja várias considerações que você deve levar em conta tooprovide um serviço altamente escalonável, também há um número de metas de saudação e requisitos de aplicativos de vários locatários toomany comuns.</span><span class="sxs-lookup"><span data-stu-id="fef92-126">In short, while there are many considerations that you must take into account tooprovide a highly scalable service, there are also a number of hello goals and requirements that are common toomany multitenant applications.</span></span> <span data-ttu-id="fef92-127">Alguns podem não ser relevantes em cenários específicos e a importância de saudação individuais metas e requisitos serão diferentes em cada cenário.</span><span class="sxs-lookup"><span data-stu-id="fef92-127">Some may not be relevant in specific scenarios, and hello importance of individual goals and requirements will differ in each scenario.</span></span> <span data-ttu-id="fef92-128">Como um provedor de aplicativo multilocatário hello, você também terá metas e requisitos, como reunião locatários Olá metas e requisitos, lucratividade, cobrança, vários níveis de serviço, provisionamento, monitoramento de facilidade de manutenção e automação.</span><span class="sxs-lookup"><span data-stu-id="fef92-128">As a provider of hello multitenant application, you will also have goals and requirements such as, meeting hello tenants' goals and requirements, profitability, billing, multiple service levels, provisioning, maintainability monitoring, and automation.</span></span>

<span data-ttu-id="fef92-129">Para obter mais informações sobre considerações de design adicionais de um aplicativo multilocatário, consulte [Hosting a Multi-Tenant Application on Azure][Hosting a Multi-Tenant Application on Azure] (Hospedando um aplicativo multilocatário no Azure).</span><span class="sxs-lookup"><span data-stu-id="fef92-129">For more information on additional design considerations of a multitenant application, see [Hosting a Multi-Tenant Application on Azure][Hosting a Multi-Tenant Application on Azure].</span></span> <span data-ttu-id="fef92-130">Para obter informações sobre os padrões comuns da arquitetura de dados dos aplicativos do banco de dados SaaS (software como serviço) multilocatário, consulte [Padrões de Design para Aplicativos SaaS multilocatário com o Banco de Dados SQL do Azure](sql-database/sql-database-design-patterns-multi-tenancy-saas-applications.md).</span><span class="sxs-lookup"><span data-stu-id="fef92-130">For information on common data architecture patterns of multi-tenant software-as-a-service (SaaS) database applications, see [Design Patterns for Multi-tenant SaaS Applications with Azure SQL Database](sql-database/sql-database-design-patterns-multi-tenancy-saas-applications.md).</span></span> 

<span data-ttu-id="fef92-131">O Azure fornece muitos recursos que permitem a você tooaddress Olá chave problemas encontrados durante a criação de um sistema multilocatário.</span><span class="sxs-lookup"><span data-stu-id="fef92-131">Azure provides many features that allow you tooaddress hello key problems encountered when designing a multitenant system.</span></span>

<span data-ttu-id="fef92-132">**Isolamento**</span><span class="sxs-lookup"><span data-stu-id="fef92-132">**Isolation**</span></span>

* <span data-ttu-id="fef92-133">Segmentar locatários de sites por Cabeçalhos de Host com ou sem comunicação SSL</span><span class="sxs-lookup"><span data-stu-id="fef92-133">Segment Website Tenants by Host Headers with or without SSL communication</span></span>
* <span data-ttu-id="fef92-134">Segmentar locatários de site por parâmetros de consulta</span><span class="sxs-lookup"><span data-stu-id="fef92-134">Segment Website Tenants by Query Parameters</span></span>
* <span data-ttu-id="fef92-135">Serviços web em funções de trabalho</span><span class="sxs-lookup"><span data-stu-id="fef92-135">Web Services in Worker Roles</span></span>
  * <span data-ttu-id="fef92-136">Funções de trabalho.</span><span class="sxs-lookup"><span data-stu-id="fef92-136">Worker Roles.</span></span> <span data-ttu-id="fef92-137">que normalmente processa os dados em Olá back-end de um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="fef92-137">that typically process data on hello backend of an application.</span></span>
  * <span data-ttu-id="fef92-138">Funções da Web que normalmente agem como Olá front-end para aplicativos.</span><span class="sxs-lookup"><span data-stu-id="fef92-138">Web Roles that typically act as hello frontend for applications.</span></span>

<span data-ttu-id="fef92-139">**Armazenamento**</span><span class="sxs-lookup"><span data-stu-id="fef92-139">**Storage**</span></span>

<span data-ttu-id="fef92-140">Gerenciamento de dados, como serviços de banco de dados do SQL Azure ou armazenamento do Azure como Olá tabela serviço que fornece serviços de armazenamento de grandes quantidades de dados não estruturados e Olá serviço Blob que fornece serviços toostore grandes quantidades de texto não estruturado ou dados binários, como imagens, áudio e vídeo.</span><span class="sxs-lookup"><span data-stu-id="fef92-140">Data management such as Azure SQL Database or Azure Storage services such as hello Table service which provides services for storage of large amounts of unstructured data and hello Blob service which provides services toostore large amounts of unstructured text or binary data such as video, audio and images.</span></span>

* <span data-ttu-id="fef92-141">Proteção de logons no SQL Server por locatário apropriados para dados de multilocatários em Bancos de Dados SQL.</span><span class="sxs-lookup"><span data-stu-id="fef92-141">Securing Multitenant Data in SQL Database appropriate per-tenant SQL Server logins.</span></span>
* <span data-ttu-id="fef92-142">Usando tabelas do Azure para o aplicativo de recursos, especificando uma política de acesso no nível do contêiner, você pode Olá permissões de tooadjust capacidade sem ter que tooissue nova URL para recursos de saudação protegidos com assinaturas de acesso compartilhado.</span><span class="sxs-lookup"><span data-stu-id="fef92-142">Using Azure Tables for Application Resources By specifying a container level access policy, you can hello ability tooadjust permissions without having tooissue new URL's for hello resources protected with shared access signatures.</span></span>
* <span data-ttu-id="fef92-143">As filas do Azure para filas do Azure de recursos do aplicativo são usada toodrive processamento em nome de locatários, mas também pode ser usado toodistribute trabalho necessário para provisionamento ou gerenciamento.</span><span class="sxs-lookup"><span data-stu-id="fef92-143">Azure Queues for Application Resources Azure queues are commonly used toodrive processing on behalf of tenants, but may also be used toodistribute work required for provisioning or management.</span></span>
* <span data-ttu-id="fef92-144">Um serviço compartilhado de filas do barramento de serviço para recursos de aplicativos que tooa de trabalho de envios por push, você pode usar uma única fila onde cada remetente do locatário tem somente permissões (conforme derivado de declarações emitidas do ACS) toopush toothat fila ao somente receptores de saudação do serviço Olá ter permissão toopull dos dados de saudação de fila Olá provenientes de vários locatários.</span><span class="sxs-lookup"><span data-stu-id="fef92-144">Service Bus Queues for Application Resources that pushes work tooa shared a service, you can use a single queue where each tenant sender only has permissions (as derived from claims issued from ACS) toopush toothat queue, while only hello receivers from hello service have permission toopull from hello queue hello data coming from multiple tenants.</span></span>

<span data-ttu-id="fef92-145">**Serviços de conexão e segurança**</span><span class="sxs-lookup"><span data-stu-id="fef92-145">**Connection and Security Services**</span></span>

* <span data-ttu-id="fef92-146">Barramento de serviço do Azure, uma infraestrutura de mensagens que fica entre aplicativos, permitindo que eles tooexchange mensagens de uma maneira flexível para maior escala e resiliência.</span><span class="sxs-lookup"><span data-stu-id="fef92-146">Azure Service Bus, a messaging infrastructure that sits between applications allowing them tooexchange messages in a loosely coupled way for improved scale and resiliency.</span></span>

<span data-ttu-id="fef92-147">**Serviços de rede**</span><span class="sxs-lookup"><span data-stu-id="fef92-147">**Networking Services**</span></span>

<span data-ttu-id="fef92-148">O Azure fornece vários serviços de rede que oferecem suporte à autenticação e melhoram a capacidade de gerenciamento dos aplicativos hospedados.</span><span class="sxs-lookup"><span data-stu-id="fef92-148">Azure provides several networking services that support authentication, and improve manageability of your hosted applications.</span></span> <span data-ttu-id="fef92-149">Esses serviços incluem o seguinte hello:</span><span class="sxs-lookup"><span data-stu-id="fef92-149">These services include hello following:</span></span>

* <span data-ttu-id="fef92-150">A Rede Virtual do Azure permite que você provisione e gerencie VPNs (redes virtuais privadas) no Azure e vincule-as com segurança à infraestrutura de TI local.</span><span class="sxs-lookup"><span data-stu-id="fef92-150">Azure Virtual Network lets you provision and manage virtual private networks (VPNs) in Azure as well as securely link these with on-premises IT infrastructure.</span></span>
* <span data-ttu-id="fef92-151">Gerenciador de tráfego de rede virtual permite balancear tooload tráfego de entrada entre vários hospedados do Azure services se estiver em execução no hello mesmo datacenter ou em data centers diferentes em torno de Olá, mundo.</span><span class="sxs-lookup"><span data-stu-id="fef92-151">Virtual Network Traffic Manager allows you tooload balance incoming traffic across multiple hosted Azure services whether they're running in hello same datacenter or across different datacenters around hello world.</span></span>
* <span data-ttu-id="fef92-152">O Active Directory do Azure (AD do Azure) é um serviço moderno e baseado em REST que fornece recursos de gerenciamento de identidade e de controle de acesso para seus aplicativos na nuvem.</span><span class="sxs-lookup"><span data-stu-id="fef92-152">Azure Active Directory (Azure AD) is a modern, REST-based service that provides identity management and access control capabilities for your cloud applications.</span></span> <span data-ttu-id="fef92-153">Usando o AD do Azure para recursos do aplicativo do Azure AD tooprovides uma maneira fácil de autenticar e autorizar usuários toogain acesso tooyour aplicativos e serviços web ao permitir que os recursos de saudação de autenticação e autorização toobe fatorados fora do seu código.</span><span class="sxs-lookup"><span data-stu-id="fef92-153">Using Azure AD for Application Resources Azure AD tooprovides an easy way of authenticating and authorizing users toogain access tooyour web applications and services while allowing hello features of authentication and authorization toobe factored out of your code.</span></span>
* <span data-ttu-id="fef92-154">O Service Bus do Azure fornece um serviço de mensagens seguro e o recurso de fluxo de dados para aplicativos distribuídos e híbridos, como a comunicação entre aplicativos hospedados do Azure e aplicativos e serviços locais, sem a necessidade de firewall complexo e de infraestruturas de segurança.</span><span class="sxs-lookup"><span data-stu-id="fef92-154">Azure Service Bus provides a secure messaging and data flow capability for distributed and hybrid applications, such as communication between Azure hosted applications and on-premises applications and services, without requiring complex firewall and security infrastructures.</span></span> <span data-ttu-id="fef92-155">Usando a retransmissão de barramento de serviço para toohello de recursos do aplicativo de serviços que são expostos como pontos de extremidade podem pertencer toohello locatário (por exemplo, hospedado fora do sistema hello, como no local), ou eles podem ser serviços provisionados especificamente para Olá locatário ( porque os dados confidenciais, específico do locatário trafegam entre eles).</span><span class="sxs-lookup"><span data-stu-id="fef92-155">Using Service Bus Relay for Application Resources toohello services that are exposed as endpoints may belong toohello tenant (for example, hosted outside of hello system, such as on-premises), or they may be services provisioned specifically for hello tenant (because sensitive, tenant-specific data travels across them).</span></span>

<span data-ttu-id="fef92-156">**Provisionando recursos**</span><span class="sxs-lookup"><span data-stu-id="fef92-156">**Provisioning Resources**</span></span>

<span data-ttu-id="fef92-157">Azure fornece várias maneiras de novos locatários de provisionamento para o aplicativo hello.</span><span class="sxs-lookup"><span data-stu-id="fef92-157">Azure provides a number of ways provision new tenants for hello application.</span></span> <span data-ttu-id="fef92-158">Para aplicativos multilocatários com um grande número de locatários, é geralmente necessário tooautomate esse processo, permitindo o provisionamento de autoatendimento.</span><span class="sxs-lookup"><span data-stu-id="fef92-158">For multitenant applications with a large number of tenants, it is usually necessary tooautomate this process by enabling self-service provisioning.</span></span>

* <span data-ttu-id="fef92-159">Funções de trabalho permitem tooprovision e provisionamento de recursos por locatário (por exemplo, quando um novo locatário se cadastra ou cancela), coletar métricas para medição de uso e o gerenciamento de escala seguindo certa programação ou na interseção de toohello de resposta de limites de chave indicadores de desempenho.</span><span class="sxs-lookup"><span data-stu-id="fef92-159">Worker roles allow you tooprovision and de-provision per tenant resources (such as when a new tenant signs-up or cancels), collect metrics for metering use, and manage scale following a certain schedule or in response toohello crossing of thresholds of key performance indicators.</span></span> <span data-ttu-id="fef92-160">Essa mesma função também pode ser usado toopush solução de toohello de atualizações.</span><span class="sxs-lookup"><span data-stu-id="fef92-160">This same role may also be used toopush out updates and upgrades toohello solution.</span></span>
* <span data-ttu-id="fef92-161">Blobs do Azure podem ser usado tooprovision computação ou recursos de armazenamento já foi inicializado para novos locatários proporcionando contêiner acesso ao nível políticas tooprotect Olá computação pacotes de serviço, imagens VHD e outros recursos.</span><span class="sxs-lookup"><span data-stu-id="fef92-161">Azure Blobs can be used tooprovision compute or pre-initialized storage resources for new tenants while providing container level access policies tooprotect hello compute service Packages, VHD images and other resources.</span></span>
* <span data-ttu-id="fef92-162">As opções para provisionamento de recursos de Banco de Dados SQL para um locatário incluem:</span><span class="sxs-lookup"><span data-stu-id="fef92-162">Options for provisioning SQL Database resources for a tenant include:</span></span>
  
  * <span data-ttu-id="fef92-163">DDL em scripts ou incorporada como recursos em assemblies</span><span class="sxs-lookup"><span data-stu-id="fef92-163">DDL in scripts or embedded as resources within assemblies</span></span>
  * <span data-ttu-id="fef92-164">Pacotes de DAC do SQL Server 2008 R2 implantados programaticamente.</span><span class="sxs-lookup"><span data-stu-id="fef92-164">SQL Server 2008 R2 DAC Packages deployed programmatically.</span></span>
  * <span data-ttu-id="fef92-165">Cópia de um banco de dados mestre de referência</span><span class="sxs-lookup"><span data-stu-id="fef92-165">Copying from a master reference database</span></span>
  * <span data-ttu-id="fef92-166">Usando o banco de dados de importação e exportação tooprovision novos bancos de dados de um arquivo.</span><span class="sxs-lookup"><span data-stu-id="fef92-166">Using database Import and Export tooprovision new databases from a file.</span></span>

<!--links-->

[Hosting a Multi-Tenant Application on Azure]: http://msdn.microsoft.com/library/hh534480.aspx
[Designing Multitenant Applications on Azure]: http://msdn.microsoft.com/library/windowsazure/hh689716
