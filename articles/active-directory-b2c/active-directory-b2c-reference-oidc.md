---
title: Entrada na Web com o OpenID Connect - Azure AD B2C | Microsoft Docs
description: "Criando aplicativos da web usando a implementação do Active Directory do Azure Olá Olá OpenID Connect do protocolo de autenticação"
services: active-directory-b2c
documentationcenter: 
author: saeedakhter-msft
manager: krassk
editor: parakhj
ms.assetid: 21d420c8-3c10-4319-b681-adf2e89e7ede
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/16/2017
ms.author: saeedakhter-msft
ms.openlocfilehash: 89e9cfa28e4e5c34304aea355cca2dd0c4b42abc
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="azure-active-directory-b2c-web-sign-in-with-openid-connect"></a><span data-ttu-id="d1870-103">Azure Active Directory B2C: entrada na Web com o OpenID Connect</span><span class="sxs-lookup"><span data-stu-id="d1870-103">Azure Active Directory B2C: Web sign-in with OpenID Connect</span></span>
<span data-ttu-id="d1870-104">OpenID Connect é um protocolo de autenticação, criado com base em OAuth 2.0, que pode ser usado toosecurely conectar usuários tooweb aplicativos.</span><span class="sxs-lookup"><span data-stu-id="d1870-104">OpenID Connect is an authentication protocol, built on top of OAuth 2.0, that can be used toosecurely sign users in tooweb applications.</span></span> <span data-ttu-id="d1870-105">Por usando hello Azure Active Directory B2C (Azure AD B2C) implementação de OpenID Connect, você pode terceirizar a inscrição, entrar e passa por outro gerenciamento de identidade em seu tooAzure de aplicativos web do Active Directory (AD do Azure).</span><span class="sxs-lookup"><span data-stu-id="d1870-105">By using hello Azure Active Directory B2C (Azure AD B2C) implementation of OpenID Connect, you can outsource sign-up, sign-in, and other identity management experiences in your web applications tooAzure Active Directory (Azure AD).</span></span> <span data-ttu-id="d1870-106">Este guia mostra como toodo caso de maneira independente de linguagem.</span><span class="sxs-lookup"><span data-stu-id="d1870-106">This guide shows you how toodo so in a language-independent manner.</span></span> <span data-ttu-id="d1870-107">Descreve como toosend e receber mensagens HTTP sem usar qualquer uma das nossas bibliotecas de código-fonte aberto.</span><span class="sxs-lookup"><span data-stu-id="d1870-107">It describes how toosend and receive HTTP messages without using any of our open-source libraries.</span></span>

<span data-ttu-id="d1870-108">[OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html) estende Olá OAuth 2.0 *autorização* protocolo para uso como um *autenticação* protocolo.</span><span class="sxs-lookup"><span data-stu-id="d1870-108">[OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html) extends hello OAuth 2.0 *authorization* protocol for use as an *authentication* protocol.</span></span> <span data-ttu-id="d1870-109">Isso permite que você tooperform o logon único usando OAuth.</span><span class="sxs-lookup"><span data-stu-id="d1870-109">This allows you tooperform single sign-on by using OAuth.</span></span> <span data-ttu-id="d1870-110">Ele apresenta o conceito de saudação de um *token de ID*, que é um token de segurança que permite Olá cliente tooverify Olá a identidade do usuário hello e obter informações de perfil básico sobre usuário hello.</span><span class="sxs-lookup"><span data-stu-id="d1870-110">It introduces hello concept of an *ID token*, which is a security token that allows hello client tooverify hello identity of hello user and obtain basic profile information about hello user.</span></span>

<span data-ttu-id="d1870-111">Porque ele estende o OAuth 2.0, ele também permite que aplicativos adquirir toosecurely *tokens de acesso*.</span><span class="sxs-lookup"><span data-stu-id="d1870-111">Because it extends OAuth 2.0, it also enables apps toosecurely acquire *access tokens*.</span></span> <span data-ttu-id="d1870-112">Você pode usar access_tokens tooaccess recursos que são protegidos por um [servidor de autorização](active-directory-b2c-reference-protocols.md#the-basics).</span><span class="sxs-lookup"><span data-stu-id="d1870-112">You can use access_tokens tooaccess resources that are secured by an [authorization server](active-directory-b2c-reference-protocols.md#the-basics).</span></span> <span data-ttu-id="d1870-113">Nós recomendamos o OpenID Connect se você estiver criando um aplicativo Web que fica hospedado em um servidor e é acessado por meio de um navegador.</span><span class="sxs-lookup"><span data-stu-id="d1870-113">We recommend OpenID Connect if you're building a web application that is hosted on a server and accessed through a browser.</span></span> <span data-ttu-id="d1870-114">Se você quiser tooadd identity management tooyour aplicativos móveis ou área de trabalho usando o Azure AD B2C, você deve usar [OAuth 2.0](active-directory-b2c-reference-oauth-code.md) em vez de OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="d1870-114">If you want tooadd identity management tooyour mobile or desktop applications by using Azure AD B2C, you should use [OAuth 2.0](active-directory-b2c-reference-oauth-code.md) rather than OpenID Connect.</span></span>

<span data-ttu-id="d1870-115">B2C do AD do Azure estende saudação padrão OpenID Connect protocolo toodo mais de autenticação simples e autorização.</span><span class="sxs-lookup"><span data-stu-id="d1870-115">Azure AD B2C extends hello standard OpenID Connect protocol toodo more than simple authentication and authorization.</span></span> <span data-ttu-id="d1870-116">Ele apresenta Olá [parâmetro política](active-directory-b2c-reference-policies.md), que permite que você toouse OpenID Connect tooadd experiências do usuário – como inscrição, entrar e gerenciamento de perfil – tooyour aplicativo.</span><span class="sxs-lookup"><span data-stu-id="d1870-116">It introduces hello [policy parameter](active-directory-b2c-reference-policies.md), which enables you toouse OpenID Connect tooadd user experiences--such as sign-up, sign-in, and profile management--tooyour app.</span></span> <span data-ttu-id="d1870-117">Aqui, mostramos como toouse tooimplement OpenID Connect e políticas de cada uma dessas experiências em seus aplicativos web.</span><span class="sxs-lookup"><span data-stu-id="d1870-117">Here, we show you how toouse OpenID Connect and policies tooimplement each of these experiences in your web applications.</span></span> <span data-ttu-id="d1870-118">Também mostraremos como APIs da web de tooget tokens de acesso para acessar.</span><span class="sxs-lookup"><span data-stu-id="d1870-118">We'll also show you how tooget access tokens for accessing web APIs.</span></span>

<span data-ttu-id="d1870-119">solicitações HTTP do exemplo Hello na próxima seção, Olá usam diretório do B2C nosso exemplo, fabrikamb2c.onmicrosoft.com, bem como nosso aplicativo de exemplo, https://aadb2cplayground.azurewebsites.net e políticas.</span><span class="sxs-lookup"><span data-stu-id="d1870-119">hello example HTTP requests in hello next section use our sample B2C directory, fabrikamb2c.onmicrosoft.com, as well as our sample application, https://aadb2cplayground.azurewebsites.net, and policies.</span></span> <span data-ttu-id="d1870-120">Você tem liberdade tootry out Olá solicitações por conta própria usando esses valores ou você pode substituí-los com seus próprios.</span><span class="sxs-lookup"><span data-stu-id="d1870-120">You're free tootry out hello requests yourself by using these values, or you can replace them with your own.</span></span>
<span data-ttu-id="d1870-121">Saiba como muito[obter seu próprio locatário B2C, aplicativos e políticas](#use-your-own-b2c-directory).</span><span class="sxs-lookup"><span data-stu-id="d1870-121">Learn how too[get your own B2C tenant, application, and policies](#use-your-own-b2c-directory).</span></span>

## <a name="send-authentication-requests"></a><span data-ttu-id="d1870-122">Enviar solicitações de autenticação</span><span class="sxs-lookup"><span data-stu-id="d1870-122">Send authentication requests</span></span>
<span data-ttu-id="d1870-123">Quando seu aplicativo web precisa de usuário de saudação tooauthenticate e executar uma política, ele pode direcionar Olá usuário toohello `/authorize` ponto de extremidade.</span><span class="sxs-lookup"><span data-stu-id="d1870-123">When your web app needs tooauthenticate hello user and execute a policy, it can direct hello user toohello `/authorize` endpoint.</span></span> <span data-ttu-id="d1870-124">Isso é parte interativa Olá fluxo Olá, qual usuário Olá agirão, dependendo da política de saudação.</span><span class="sxs-lookup"><span data-stu-id="d1870-124">This is hello interactive portion of hello flow, where hello user takes action, depending on hello policy.</span></span>

<span data-ttu-id="d1870-125">Nessa solicitação, o cliente de saudação indica permissões Olá que precisa de tooacquire de usuário Olá Olá `scope` tooexecute de política de parâmetro e hello em Olá `p` parâmetro.</span><span class="sxs-lookup"><span data-stu-id="d1870-125">In this request, hello client indicates hello permissions that it needs tooacquire from hello user in hello `scope` parameter and hello policy tooexecute in hello `p` parameter.</span></span> <span data-ttu-id="d1870-126">Três exemplos são fornecidos no hello seguintes seções (com quebras de linha para facilitar a leitura), cada um usando uma política diferente.</span><span class="sxs-lookup"><span data-stu-id="d1870-126">Three examples are provided in hello following sections (with line breaks for readability), each using a different policy.</span></span> <span data-ttu-id="d1870-127">tooget uma ideia de como cada solicitação funciona, tente a solicitação de saudação de colá-lo em um navegador e executá-lo.</span><span class="sxs-lookup"><span data-stu-id="d1870-127">tooget a feel for how each request works, try pasting hello request into a browser and running it.</span></span>

#### <a name="use-a-sign-in-policy"></a><span data-ttu-id="d1870-128">Usar uma política de entrada</span><span class="sxs-lookup"><span data-stu-id="d1870-128">Use a sign-in policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code+id_token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=form_post
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_sign_in
```

#### <a name="use-a-sign-up-policy"></a><span data-ttu-id="d1870-129">Usar uma política de inscrição</span><span class="sxs-lookup"><span data-stu-id="d1870-129">Use a sign-up policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code+id_token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=form_post
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_sign_up
```

#### <a name="use-an-edit-profile-policy"></a><span data-ttu-id="d1870-130">Usar uma política de edição de perfil</span><span class="sxs-lookup"><span data-stu-id="d1870-130">Use an edit-profile policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code+id_token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=form_post
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_edit_profile
```

| <span data-ttu-id="d1870-131">Parâmetro</span><span class="sxs-lookup"><span data-stu-id="d1870-131">Parameter</span></span> | <span data-ttu-id="d1870-132">Obrigatório?</span><span class="sxs-lookup"><span data-stu-id="d1870-132">Required?</span></span> | <span data-ttu-id="d1870-133">Descrição</span><span class="sxs-lookup"><span data-stu-id="d1870-133">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="d1870-134">client_id</span><span class="sxs-lookup"><span data-stu-id="d1870-134">client_id</span></span> |<span data-ttu-id="d1870-135">Obrigatório</span><span class="sxs-lookup"><span data-stu-id="d1870-135">Required</span></span> |<span data-ttu-id="d1870-136">aplicativo Hello ID que Olá [portal do Azure](https://portal.azure.com/) atribuído tooyour aplicativo.</span><span class="sxs-lookup"><span data-stu-id="d1870-136">hello application ID that hello [Azure portal](https://portal.azure.com/) assigned tooyour app.</span></span> |
| <span data-ttu-id="d1870-137">response_type</span><span class="sxs-lookup"><span data-stu-id="d1870-137">response_type</span></span> |<span data-ttu-id="d1870-138">Obrigatório</span><span class="sxs-lookup"><span data-stu-id="d1870-138">Required</span></span> |<span data-ttu-id="d1870-139">tipo de resposta Hello, que deve incluir um token de ID para OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="d1870-139">hello response type, which must include an ID token for OpenID Connect.</span></span> <span data-ttu-id="d1870-140">Se seu aplicativo Web também precisa de tokens para chamar uma API Web, você pode usar `code+id_token`, como fizemos aqui.</span><span class="sxs-lookup"><span data-stu-id="d1870-140">If your web app also needs tokens for calling a web API, you can use `code+id_token`, as we've done here.</span></span> |
| <span data-ttu-id="d1870-141">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="d1870-141">redirect_uri</span></span> |<span data-ttu-id="d1870-142">Recomendadas</span><span class="sxs-lookup"><span data-stu-id="d1870-142">Recommended</span></span> |<span data-ttu-id="d1870-143">Olá `redirect_uri` parâmetro do aplicativo, onde as respostas de autenticação podem ser enviadas e recebidas pelo seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="d1870-143">hello `redirect_uri` parameter of your app, where authentication responses can be sent and received by your app.</span></span> <span data-ttu-id="d1870-144">Ele deve corresponder exatamente uma saudação `redirect_uri` parâmetros que você registrou no portal de hello, exceto que ele deve ser codificados de URL.</span><span class="sxs-lookup"><span data-stu-id="d1870-144">It must exactly match one of hello `redirect_uri` parameters that you registered in hello portal, except that it must be URL encoded.</span></span> |
| <span data-ttu-id="d1870-145">scope</span><span class="sxs-lookup"><span data-stu-id="d1870-145">scope</span></span> |<span data-ttu-id="d1870-146">Obrigatório</span><span class="sxs-lookup"><span data-stu-id="d1870-146">Required</span></span> |<span data-ttu-id="d1870-147">Uma lista de escopos separados por espaços.</span><span class="sxs-lookup"><span data-stu-id="d1870-147">A space-separated list of scopes.</span></span> <span data-ttu-id="d1870-148">Um valor único escopo indica tooAzure AD ambas as permissões que estão sendo solicitados.</span><span class="sxs-lookup"><span data-stu-id="d1870-148">A single scope value indicates tooAzure AD both permissions that are being requested.</span></span> <span data-ttu-id="d1870-149">Olá `openid` escopo indica um toosign permissão nos dados de usuário e get hello sobre usuário Olá na forma de saudação de tokens de ID (mais toocome neste artigo Olá).</span><span class="sxs-lookup"><span data-stu-id="d1870-149">hello `openid` scope indicates a permission toosign in hello user and get data about hello user in hello form of ID tokens (more toocome on this later in hello article).</span></span> <span data-ttu-id="d1870-150">Olá `offline_access` escopo é opcional para aplicativos web.</span><span class="sxs-lookup"><span data-stu-id="d1870-150">hello `offline_access` scope is optional for web apps.</span></span> <span data-ttu-id="d1870-151">Indica que seu aplicativo precisará de um *token de atualização* para tooresources de acesso e longa duração.</span><span class="sxs-lookup"><span data-stu-id="d1870-151">It indicates that your app will need a *refresh token* for long-lived access tooresources.</span></span> |
| <span data-ttu-id="d1870-152">response_mode</span><span class="sxs-lookup"><span data-stu-id="d1870-152">response_mode</span></span> |<span data-ttu-id="d1870-153">Recomendadas</span><span class="sxs-lookup"><span data-stu-id="d1870-153">Recommended</span></span> |<span data-ttu-id="d1870-154">método Hello que deve ser usado toosend Olá resultante autorização código back tooyour aplicativo.</span><span class="sxs-lookup"><span data-stu-id="d1870-154">hello method that should be used toosend hello resulting authorization code back tooyour app.</span></span> <span data-ttu-id="d1870-155">Ele pode ser `query`, `form_post` ou `fragment`.</span><span class="sxs-lookup"><span data-stu-id="d1870-155">It can be either `query`, `form_post`, or `fragment`.</span></span>  <span data-ttu-id="d1870-156">Olá `form_post` resposta é recomendado para melhor segurança.</span><span class="sxs-lookup"><span data-stu-id="d1870-156">hello `form_post` response mode is recommended for best security.</span></span> |
| <span data-ttu-id="d1870-157">state</span><span class="sxs-lookup"><span data-stu-id="d1870-157">state</span></span> |<span data-ttu-id="d1870-158">Recomendadas</span><span class="sxs-lookup"><span data-stu-id="d1870-158">Recommended</span></span> |<span data-ttu-id="d1870-159">Um valor incluído na solicitação de saudação que também é retornada na resposta de token hello.</span><span class="sxs-lookup"><span data-stu-id="d1870-159">A value included in hello request that is also returned in hello token response.</span></span> <span data-ttu-id="d1870-160">Pode ser uma cadeia de caracteres de qualquer conteúdo desejado.</span><span class="sxs-lookup"><span data-stu-id="d1870-160">It can be a string of any content that you want.</span></span> <span data-ttu-id="d1870-161">Um valor exclusivo gerado aleatoriamente que normalmente é usado para impedir ataques de solicitação intersite forjada.</span><span class="sxs-lookup"><span data-stu-id="d1870-161">A randomly generated unique value is typically used for preventing cross-site request forgery attacks.</span></span> <span data-ttu-id="d1870-162">estado de saudação também é usado tooencode informações sobre o estado do usuário Olá no aplicativo hello antes de solicitação de autenticação hello, como página Olá estivesse em.</span><span class="sxs-lookup"><span data-stu-id="d1870-162">hello state is also used tooencode information about hello user's state in hello app before hello authentication request occurred, such as hello page they were on.</span></span> |
| <span data-ttu-id="d1870-163">nonce</span><span class="sxs-lookup"><span data-stu-id="d1870-163">nonce</span></span> |<span data-ttu-id="d1870-164">Obrigatório</span><span class="sxs-lookup"><span data-stu-id="d1870-164">Required</span></span> |<span data-ttu-id="d1870-165">Um valor incluído na solicitação de saudação (gerada pelo aplicativo hello) que será incluída no token de ID resultante hello como uma declaração.</span><span class="sxs-lookup"><span data-stu-id="d1870-165">A value included in hello request (generated by hello app) that will be included in hello resulting ID token as a claim.</span></span> <span data-ttu-id="d1870-166">aplicativo Hello, em seguida, pode verificar a que ataques de reprodução do token toomitigate esse valor.</span><span class="sxs-lookup"><span data-stu-id="d1870-166">hello app can then verify this value toomitigate token replay attacks.</span></span> <span data-ttu-id="d1870-167">Olá valor costuma ser uma cadeia de caracteres aleatória exclusiva que pode ser usado tooidentify Olá origem da solicitação de saudação.</span><span class="sxs-lookup"><span data-stu-id="d1870-167">hello value is typically a randomized unique string that can be used tooidentify hello origin of hello request.</span></span> |
| <span data-ttu-id="d1870-168">p</span><span class="sxs-lookup"><span data-stu-id="d1870-168">p</span></span> |<span data-ttu-id="d1870-169">Obrigatório</span><span class="sxs-lookup"><span data-stu-id="d1870-169">Required</span></span> |<span data-ttu-id="d1870-170">política de saudação que será executada.</span><span class="sxs-lookup"><span data-stu-id="d1870-170">hello policy that will be executed.</span></span> <span data-ttu-id="d1870-171">Ele é o nome de saudação de uma política que é criada no seu locatário B2C.</span><span class="sxs-lookup"><span data-stu-id="d1870-171">It is hello name of a policy that is created in your B2C tenant.</span></span> <span data-ttu-id="d1870-172">valor de nome de política Olá deve começar com `b2c\_1\_`.</span><span class="sxs-lookup"><span data-stu-id="d1870-172">hello policy name value should begin with `b2c\_1\_`.</span></span> <span data-ttu-id="d1870-173">Saiba mais sobre as políticas e Olá [estrutura da política extensível](active-directory-b2c-reference-policies.md).</span><span class="sxs-lookup"><span data-stu-id="d1870-173">Learn more about policies and hello [extensible policy framework](active-directory-b2c-reference-policies.md).</span></span> |
| <span data-ttu-id="d1870-174">prompt</span><span class="sxs-lookup"><span data-stu-id="d1870-174">prompt</span></span> |<span data-ttu-id="d1870-175">Opcional</span><span class="sxs-lookup"><span data-stu-id="d1870-175">Optional</span></span> |<span data-ttu-id="d1870-176">tipo de saudação de interação do usuário é necessária.</span><span class="sxs-lookup"><span data-stu-id="d1870-176">hello type of user interaction that is required.</span></span> <span data-ttu-id="d1870-177">Olá valor só é válida no momento é `login`, que força Olá usuário tooenter suas credenciais na solicitação.</span><span class="sxs-lookup"><span data-stu-id="d1870-177">hello only valid value at this time is `login`, which forces hello user tooenter their credentials on that request.</span></span> <span data-ttu-id="d1870-178">O logon único não terá efeito.</span><span class="sxs-lookup"><span data-stu-id="d1870-178">Single sign-on will not take effect.</span></span> |

<span data-ttu-id="d1870-179">Neste ponto, o usuário de Olá é solicitado fluxo de trabalho da política do toocomplete hello.</span><span class="sxs-lookup"><span data-stu-id="d1870-179">At this point, hello user is asked toocomplete hello policy's workflow.</span></span> <span data-ttu-id="d1870-180">Isso pode envolver usuário Olá inserir seu nome de usuário e senha, entrar com uma identidade de redes sociais, inscrever directory hello, ou qualquer outro número de etapas, dependendo de como a política de saudação é definida.</span><span class="sxs-lookup"><span data-stu-id="d1870-180">This might involve hello user entering their username and password, signing in with a social identity, signing up for hello directory, or any other number of steps, depending on how hello policy is defined.</span></span>

<span data-ttu-id="d1870-181">Após usuário Olá política hello, o AD do Azure retorna um aplicativo de tooyour de resposta em Olá indicado `redirect_uri` parâmetro, usando o método hello especificado no hello `response_mode` parâmetro.</span><span class="sxs-lookup"><span data-stu-id="d1870-181">After hello user completes hello policy, Azure AD returns a response tooyour app at hello indicated `redirect_uri` parameter, by using hello method that is specified in hello `response_mode` parameter.</span></span> <span data-ttu-id="d1870-182">resposta de saudação é Olá mesmo para cada saudação anterior casos, independentes da política de saudação que é executada.</span><span class="sxs-lookup"><span data-stu-id="d1870-182">hello response is hello same for each of hello preceding cases, independent of hello policy that is executed.</span></span>

<span data-ttu-id="d1870-183">Uma resposta bem-sucedida usando `response_mode=fragment` se parece com esta:</span><span class="sxs-lookup"><span data-stu-id="d1870-183">A successful response using `response_mode=fragment` would look like:</span></span>

```
GET https://aadb2cplayground.azurewebsites.net/#
id_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
&code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...
&state=arbitrary_data_you_can_receive_in_the_response
```

| <span data-ttu-id="d1870-184">Parâmetro</span><span class="sxs-lookup"><span data-stu-id="d1870-184">Parameter</span></span> | <span data-ttu-id="d1870-185">Descrição</span><span class="sxs-lookup"><span data-stu-id="d1870-185">Description</span></span> |
| --- | --- |
| <span data-ttu-id="d1870-186">id_token</span><span class="sxs-lookup"><span data-stu-id="d1870-186">id_token</span></span> |<span data-ttu-id="d1870-187">Olá token de ID que Olá aplicativo solicitado.</span><span class="sxs-lookup"><span data-stu-id="d1870-187">hello ID token that hello app requested.</span></span> <span data-ttu-id="d1870-188">Você pode usar a identidade do usuário do hello ID tooverify token hello e iniciar uma sessão de usuário de saudação.</span><span class="sxs-lookup"><span data-stu-id="d1870-188">You can use hello ID token tooverify hello user's identity and begin a session with hello user.</span></span> <span data-ttu-id="d1870-189">Mais detalhes sobre tokens de ID e seus conteúdos são incluídos no hello [referência de token do Azure AD B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="d1870-189">More details on ID tokens and their contents are included in hello [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |
| <span data-ttu-id="d1870-190">código</span><span class="sxs-lookup"><span data-stu-id="d1870-190">code</span></span> |<span data-ttu-id="d1870-191">Olá código de autorização que o aplicativo hello solicitado, se você usou `response_type=code+id_token`.</span><span class="sxs-lookup"><span data-stu-id="d1870-191">hello authorization code that hello app requested, if you used `response_type=code+id_token`.</span></span> <span data-ttu-id="d1870-192">saudação de aplicativo pode usar toorequest código de autorização Olá um token de acesso para um recurso de destino.</span><span class="sxs-lookup"><span data-stu-id="d1870-192">hello app can use hello authorization code toorequest an access token for a target resource.</span></span> <span data-ttu-id="d1870-193">Os códigos de autorização têm uma duração muito curta.</span><span class="sxs-lookup"><span data-stu-id="d1870-193">Authorization codes are very short-lived.</span></span> <span data-ttu-id="d1870-194">Normalmente, eles expiram depois de cerca de 10 minutos.</span><span class="sxs-lookup"><span data-stu-id="d1870-194">Typically, they expire after about 10 minutes.</span></span> |
| <span data-ttu-id="d1870-195">state</span><span class="sxs-lookup"><span data-stu-id="d1870-195">state</span></span> |<span data-ttu-id="d1870-196">Se um `state` parâmetro está incluído na solicitação de saudação hello mesmo valor deve aparecer na resposta de saudação.</span><span class="sxs-lookup"><span data-stu-id="d1870-196">If a `state` parameter is included in hello request, hello same value should appear in hello response.</span></span> <span data-ttu-id="d1870-197">Olá aplicativo deve verificar que Olá `state` valores hello solicitação e resposta são idênticos.</span><span class="sxs-lookup"><span data-stu-id="d1870-197">hello app should verify that hello `state` values in hello request and response are identical.</span></span> |

<span data-ttu-id="d1870-198">Respostas de erro também podem ser enviadas toohello `redirect_uri` parâmetro para que o aplicativo hello possa tratá-los adequadamente:</span><span class="sxs-lookup"><span data-stu-id="d1870-198">Error responses can also be sent toohello `redirect_uri` parameter so that hello app can handle them appropriately:</span></span>

```
GET https://aadb2cplayground.azurewebsites.net/#
error=access_denied
&error_description=the+user+canceled+the+authentication
&state=arbitrary_data_you_can_receive_in_the_response
```

| <span data-ttu-id="d1870-199">Parâmetro</span><span class="sxs-lookup"><span data-stu-id="d1870-199">Parameter</span></span> | <span data-ttu-id="d1870-200">Descrição</span><span class="sxs-lookup"><span data-stu-id="d1870-200">Description</span></span> |
| --- | --- |
| <span data-ttu-id="d1870-201">error</span><span class="sxs-lookup"><span data-stu-id="d1870-201">error</span></span> |<span data-ttu-id="d1870-202">Uma cadeia de caracteres de código de erro que pode ser usado tooclassify tipos de erros que ocorrem e que pode ser usado tooreact tooerrors.</span><span class="sxs-lookup"><span data-stu-id="d1870-202">An error-code string that can be used tooclassify types of errors that occur and that can be used tooreact tooerrors.</span></span> |
| <span data-ttu-id="d1870-203">error_description</span><span class="sxs-lookup"><span data-stu-id="d1870-203">error_description</span></span> |<span data-ttu-id="d1870-204">Uma mensagem de erro específicas que um desenvolvedor pode ajudar a identificar a causa de saudação de um erro de autenticação.</span><span class="sxs-lookup"><span data-stu-id="d1870-204">A specific error message that can help a developer identify hello root cause of an authentication error.</span></span> |
| <span data-ttu-id="d1870-205">state</span><span class="sxs-lookup"><span data-stu-id="d1870-205">state</span></span> |<span data-ttu-id="d1870-206">Consulte a descrição completa Olá na primeira tabela Olá nesta seção.</span><span class="sxs-lookup"><span data-stu-id="d1870-206">See hello full description in hello first table in this section.</span></span> <span data-ttu-id="d1870-207">Se um `state` parâmetro está incluído na solicitação de saudação hello mesmo valor deve aparecer na resposta de saudação.</span><span class="sxs-lookup"><span data-stu-id="d1870-207">If a `state` parameter is included in hello request, hello same value should appear in hello response.</span></span> <span data-ttu-id="d1870-208">Olá aplicativo deve verificar que Olá `state` valores hello solicitação e resposta são idênticos.</span><span class="sxs-lookup"><span data-stu-id="d1870-208">hello app should verify that hello `state` values in hello request and response are identical.</span></span> |

## <a name="validate-hello-id-token"></a><span data-ttu-id="d1870-209">Validar o token de ID de saudação</span><span class="sxs-lookup"><span data-stu-id="d1870-209">Validate hello ID token</span></span>
<span data-ttu-id="d1870-210">Receber apenas um token de ID não é suficiente tooauthenticate hello.</span><span class="sxs-lookup"><span data-stu-id="d1870-210">Just receiving an ID token is not enough tooauthenticate hello user.</span></span> <span data-ttu-id="d1870-211">Você deve validar a assinatura do token de ID hello e verificar Olá declarações no token Olá por requisitos do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="d1870-211">You must validate hello ID token's signature and verify hello claims in hello token per your app's requirements.</span></span> <span data-ttu-id="d1870-212">B2C do Azure AD usa [JSON Web Tokens (JWTs)](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html) e público tokens de toosign de criptografia de chave e verificar se eles são válidos.</span><span class="sxs-lookup"><span data-stu-id="d1870-212">Azure AD B2C uses [JSON Web Tokens (JWTs)](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html) and public key cryptography toosign tokens and verify that they are valid.</span></span>

<span data-ttu-id="d1870-213">Há muitas bibliotecas de software livre para validar JWTs dependendo do idioma de preferência.</span><span class="sxs-lookup"><span data-stu-id="d1870-213">There are many open-source libraries that are available for validating JWTs, depending on your language of preference.</span></span> <span data-ttu-id="d1870-214">Recomendamos que você explore essas opções em vez de implementar a sua própria lógica de validação.</span><span class="sxs-lookup"><span data-stu-id="d1870-214">We recommend exploring those options rather than implementing your own validation logic.</span></span> <span data-ttu-id="d1870-215">informações de saudação aqui serão úteis para descobrir como tooproperly usar essas bibliotecas.</span><span class="sxs-lookup"><span data-stu-id="d1870-215">hello information here will be useful in figuring out how tooproperly use those libraries.</span></span>

<span data-ttu-id="d1870-216">B2C do AD do Azure tem uma extremidade de metadados OpenID Connect, que permite que o aplicativo toofetch informações sobre o Azure AD B2C em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="d1870-216">Azure AD B2C has an OpenID Connect metadata endpoint, which allows an app toofetch information about Azure AD B2C at runtime.</span></span> <span data-ttu-id="d1870-217">Essas informações incluem pontos de extremidade, conteúdos de token e chaves de assinatura de token.</span><span class="sxs-lookup"><span data-stu-id="d1870-217">This information includes endpoints, token contents, and token signing keys.</span></span> <span data-ttu-id="d1870-218">Há um documento de metadados JSON para cada política no seu locatário de B2C.</span><span class="sxs-lookup"><span data-stu-id="d1870-218">There is a JSON metadata document for each policy in your B2C tenant.</span></span> <span data-ttu-id="d1870-219">Por exemplo, o documento de metadados Olá para Olá `b2c_1_sign_in` política no `fabrikamb2c.onmicrosoft.com` está localizado em:</span><span class="sxs-lookup"><span data-stu-id="d1870-219">For example, hello metadata document for hello `b2c_1_sign_in` policy in `fabrikamb2c.onmicrosoft.com` is located at:</span></span>

`https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=b2c_1_sign_in`

<span data-ttu-id="d1870-220">Uma das propriedades de saudação deste documento de configuração é `jwks_uri`, cujo valor Olá mesma diretiva seria:</span><span class="sxs-lookup"><span data-stu-id="d1870-220">One of hello properties of this configuration document is `jwks_uri`, whose value for hello same policy would be:</span></span>

<span data-ttu-id="d1870-221">`https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/discovery/v2.0/keys?p=b2c_1_sign_in`.</span><span class="sxs-lookup"><span data-stu-id="d1870-221">`https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/discovery/v2.0/keys?p=b2c_1_sign_in`.</span></span>

<span data-ttu-id="d1870-222">toodetermine a diretiva que foi usada em um token de ID de assinatura (e de onde toofetch Olá metadados), você tem duas opções.</span><span class="sxs-lookup"><span data-stu-id="d1870-222">toodetermine which policy was used in signing an ID token (and from where toofetch hello metadata), you have two options.</span></span> <span data-ttu-id="d1870-223">Primeiro, o nome da política hello está incluído no hello `acr` declaração no token de ID de saudação.</span><span class="sxs-lookup"><span data-stu-id="d1870-223">First, hello policy name is included in hello `acr` claim in hello ID token.</span></span> <span data-ttu-id="d1870-224">Para obter informações sobre como tooparse Olá declarações de um token de ID, consulte Olá [referência de token do Azure AD B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="d1870-224">For information on how tooparse hello claims from an ID token, see hello [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> <span data-ttu-id="d1870-225">A outra opção é a política de saudação tooencode no valor Olá Olá `state` parâmetro quando você emite a solicitação de saudação e decodificá-la toodetermine qual política foi usada.</span><span class="sxs-lookup"><span data-stu-id="d1870-225">Your other option is tooencode hello policy in hello value of hello `state` parameter when you issue hello request, and then decode it toodetermine which policy was used.</span></span> <span data-ttu-id="d1870-226">Ambos os métodos são válidos.</span><span class="sxs-lookup"><span data-stu-id="d1870-226">Either method is valid.</span></span>

<span data-ttu-id="d1870-227">Depois que tiver adquirido o documento de metadados de saudação do ponto de extremidade de metadados de OpenID Connect hello, você pode usar as chaves públicas de saudação RSA 256 (que estão localizadas nesse ponto de extremidade) toovalidate assinatura de saudação do token de ID de saudação.</span><span class="sxs-lookup"><span data-stu-id="d1870-227">After you've acquired hello metadata document from hello OpenID Connect metadata endpoint, you can use hello RSA 256 public keys (which are located at this endpoint) toovalidate hello signature of hello ID token.</span></span> <span data-ttu-id="d1870-228">Poderá haver várias chaves listadas nesse ponto de extremidade em qualquer ponto no tempo, cada uma identificada por uma declaração `kid`.</span><span class="sxs-lookup"><span data-stu-id="d1870-228">There might be multiple keys listed at this endpoint at any given point in time, each identified by a `kid` claim.</span></span> <span data-ttu-id="d1870-229">Olá cabeçalho do token de ID de saudação também contém um `kid` de declaração, que indica que essas chaves foi token de ID de saudação toosign usado.</span><span class="sxs-lookup"><span data-stu-id="d1870-229">hello header of hello ID token also contains a `kid` claim, which indicates which of these keys was used toosign hello ID token.</span></span> <span data-ttu-id="d1870-230">Para obter mais informações, consulte Olá [referência de token do Azure AD B2C](active-directory-b2c-reference-tokens.md) (Olá seção em [Validando tokens](active-directory-b2c-reference-tokens.md#token-validation), em particular).</span><span class="sxs-lookup"><span data-stu-id="d1870-230">For more information, see hello [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md) (hello section on [validating tokens](active-directory-b2c-reference-tokens.md#token-validation), in particular).</span></span>
<!--TODO: Improve hello information on this-->

<span data-ttu-id="d1870-231">Depois que tiver validado assinatura de saudação do token de ID hello, há várias declarações que você precisa tooverify.</span><span class="sxs-lookup"><span data-stu-id="d1870-231">After you've validated hello signature of hello ID token, there are several claims that you need tooverify.</span></span> <span data-ttu-id="d1870-232">Por exemplo:</span><span class="sxs-lookup"><span data-stu-id="d1870-232">For instance:</span></span>

* <span data-ttu-id="d1870-233">Você deve validar Olá `nonce` tooprevent ataques de reprodução de token de declaração.</span><span class="sxs-lookup"><span data-stu-id="d1870-233">You should validate hello `nonce` claim tooprevent token replay attacks.</span></span> <span data-ttu-id="d1870-234">Seu valor deve ser especificado na solicitação de entrada hello.</span><span class="sxs-lookup"><span data-stu-id="d1870-234">Its value should be what you specified in hello sign-in request.</span></span>
* <span data-ttu-id="d1870-235">Você deve validar Olá `aud` declaração tooensure que Olá token de ID foi emitido para seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="d1870-235">You should validate hello `aud` claim tooensure that hello ID token was issued for your app.</span></span> <span data-ttu-id="d1870-236">Seu valor deve ser o ID do aplicativo de saudação do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="d1870-236">Its value should be hello application ID of your app.</span></span>
* <span data-ttu-id="d1870-237">Você deve validar Olá `iat` e `exp` declarações tooensure que Olá token de ID não expirou.</span><span class="sxs-lookup"><span data-stu-id="d1870-237">You should validate hello `iat` and `exp` claims tooensure that hello ID token has not expired.</span></span>

<span data-ttu-id="d1870-238">Também há várias outras validações que devem ser realizadas.</span><span class="sxs-lookup"><span data-stu-id="d1870-238">There are also several more validations that you should perform.</span></span> <span data-ttu-id="d1870-239">Elas são descritas detalhadamente no hello [OpenID conectar Core especificação](http://openid.net/specs/openid-connect-core-1_0.html).  Você também poderá toovalidate de declarações adicionais, dependendo do cenário.</span><span class="sxs-lookup"><span data-stu-id="d1870-239">These are described in detail in hello [OpenID Connect Core Spec](http://openid.net/specs/openid-connect-core-1_0.html).  You might also want toovalidate additional claims, depending on your scenario.</span></span> <span data-ttu-id="d1870-240">Algumas validações comuns incluem:</span><span class="sxs-lookup"><span data-stu-id="d1870-240">Some common validations include:</span></span>

* <span data-ttu-id="d1870-241">Garantir que Olá/organização do usuário tiver se inscrito para o aplicativo hello.</span><span class="sxs-lookup"><span data-stu-id="d1870-241">Ensuring that hello user/organization has signed up for hello app.</span></span>
* <span data-ttu-id="d1870-242">Garantir que o usuário Olá tenha autorização/privilégios apropriados.</span><span class="sxs-lookup"><span data-stu-id="d1870-242">Ensuring that hello user has proper authorization/privileges.</span></span>
* <span data-ttu-id="d1870-243">A garantia de que uma determinada intensidade de autenticação tenha ocorrido, como o Azure Multi-Factor Authentication.</span><span class="sxs-lookup"><span data-stu-id="d1870-243">Ensuring that a certain strength of authentication has occurred, such as Azure Multi-Factor Authentication.</span></span>

<span data-ttu-id="d1870-244">Para obter mais informações sobre declarações de saudação em um token de ID, consulte Olá [referência de token do Azure AD B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="d1870-244">For more information on hello claims in an ID token, see hello [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span>

<span data-ttu-id="d1870-245">Após validar o token de ID hello, pode iniciar uma sessão de usuário hello.</span><span class="sxs-lookup"><span data-stu-id="d1870-245">After you have validated hello ID token, you can begin a session with hello user.</span></span> <span data-ttu-id="d1870-246">Você pode usar declarações de saudação nas informações de token tooobtain ID Olá sobre usuário Olá em seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="d1870-246">You can use hello claims in hello ID token tooobtain information about hello user in your app.</span></span> <span data-ttu-id="d1870-247">Os usos para essas informações incluem exibição, registros e autorização.</span><span class="sxs-lookup"><span data-stu-id="d1870-247">Uses for this information include display, records, and authorization.</span></span>

## <a name="get-a-token"></a><span data-ttu-id="d1870-248">Obter um token</span><span class="sxs-lookup"><span data-stu-id="d1870-248">Get a token</span></span>
<span data-ttu-id="d1870-249">Se você precisar de sua tooonly de aplicativo web executar políticas, você pode ignorar Olá próximas seções.</span><span class="sxs-lookup"><span data-stu-id="d1870-249">If you need your web app tooonly execute policies, you can skip hello next few sections.</span></span> <span data-ttu-id="d1870-250">Essas seções são aplicativos de tooweb somente aplicável que precisam de API da web do toomake autenticado chamadas tooa e também são protegidos pelo Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="d1870-250">These sections are applicable only tooweb apps that need toomake authenticated calls tooa web API and are also protected by Azure AD B2C.</span></span>

<span data-ttu-id="d1870-251">Você pode resgatar o código de autorização de saudação que você adquiriu (usando `response_type=code+id_token`) para um token toohello desejado recurso enviando um `POST` solicitação toohello `/token` ponto de extremidade.</span><span class="sxs-lookup"><span data-stu-id="d1870-251">You can redeem hello authorization code that you acquired (by using `response_type=code+id_token`) for a token toohello desired resource by sending a `POST` request toohello `/token` endpoint.</span></span> <span data-ttu-id="d1870-252">Atualmente, hello somente os recursos que você pode solicitar um token é sua API de web de back-end do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="d1870-252">Currently, hello only resource that you can request a token for is your app's own back-end web API.</span></span> <span data-ttu-id="d1870-253">convenção de saudação para solicitar um token tooyourself é toouse a ID de cliente do aplicativo como escopo de saudação:</span><span class="sxs-lookup"><span data-stu-id="d1870-253">hello convention for requesting a token tooyourself is toouse your app's client ID as hello scope:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=authorization_code&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access&code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob&client_secret=<your-application-secret>

```

| <span data-ttu-id="d1870-254">Parâmetro</span><span class="sxs-lookup"><span data-stu-id="d1870-254">Parameter</span></span> | <span data-ttu-id="d1870-255">Obrigatório?</span><span class="sxs-lookup"><span data-stu-id="d1870-255">Required?</span></span> | <span data-ttu-id="d1870-256">Descrição</span><span class="sxs-lookup"><span data-stu-id="d1870-256">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="d1870-257">p</span><span class="sxs-lookup"><span data-stu-id="d1870-257">p</span></span> |<span data-ttu-id="d1870-258">Obrigatório</span><span class="sxs-lookup"><span data-stu-id="d1870-258">Required</span></span> |<span data-ttu-id="d1870-259">Olá política que foi usado tooacquire Olá autorização código.</span><span class="sxs-lookup"><span data-stu-id="d1870-259">hello policy that was used tooacquire hello authorization code.</span></span> <span data-ttu-id="d1870-260">Você não poderá usar uma política diferente nessa solicitação.</span><span class="sxs-lookup"><span data-stu-id="d1870-260">You cannot use a different policy in this request.</span></span> <span data-ttu-id="d1870-261">Observe que você adicionar essa cadeia de caracteres de consulta do parâmetro toohello, não toohello `POST` corpo.</span><span class="sxs-lookup"><span data-stu-id="d1870-261">Note that you add this parameter toohello query string, not toohello `POST` body.</span></span> |
| <span data-ttu-id="d1870-262">client_id</span><span class="sxs-lookup"><span data-stu-id="d1870-262">client_id</span></span> |<span data-ttu-id="d1870-263">Obrigatório</span><span class="sxs-lookup"><span data-stu-id="d1870-263">Required</span></span> |<span data-ttu-id="d1870-264">aplicativo Hello ID que Olá [portal do Azure](https://portal.azure.com/) atribuído tooyour aplicativo.</span><span class="sxs-lookup"><span data-stu-id="d1870-264">hello application ID that hello [Azure portal](https://portal.azure.com/) assigned tooyour app.</span></span> |
| <span data-ttu-id="d1870-265">grant_type</span><span class="sxs-lookup"><span data-stu-id="d1870-265">grant_type</span></span> |<span data-ttu-id="d1870-266">Obrigatório</span><span class="sxs-lookup"><span data-stu-id="d1870-266">Required</span></span> |<span data-ttu-id="d1870-267">Olá tipo de concessão, que deve ser `authorization_code` para fluxo de código de autorização de saudação.</span><span class="sxs-lookup"><span data-stu-id="d1870-267">hello type of grant, which must be `authorization_code` for hello authorization code flow.</span></span> |
| <span data-ttu-id="d1870-268">scope</span><span class="sxs-lookup"><span data-stu-id="d1870-268">scope</span></span> |<span data-ttu-id="d1870-269">Recomendadas</span><span class="sxs-lookup"><span data-stu-id="d1870-269">Recommended</span></span> |<span data-ttu-id="d1870-270">Uma lista de escopos separados por espaços.</span><span class="sxs-lookup"><span data-stu-id="d1870-270">A space-separated list of scopes.</span></span> <span data-ttu-id="d1870-271">Um valor único escopo indica tooAzure AD ambas as permissões que estão sendo solicitados.</span><span class="sxs-lookup"><span data-stu-id="d1870-271">A single scope value indicates tooAzure AD both permissions that are being requested.</span></span> <span data-ttu-id="d1870-272">Olá `openid` escopo indica um toosign permissão nos dados de usuário e get hello sobre usuário Olá na forma de saudação de id_token parâmetros.</span><span class="sxs-lookup"><span data-stu-id="d1870-272">hello `openid` scope indicates a permission toosign in hello user and get data about hello user in hello form of id_token parameters.</span></span> <span data-ttu-id="d1870-273">Ele pode ser usado tooget tokens tooyour do aplicativo back-end API da web, que é representado por Olá mesma identificação de aplicativo cliente hello.</span><span class="sxs-lookup"><span data-stu-id="d1870-273">It can be used tooget tokens tooyour app's own back-end web API, which is represented by hello same application ID as hello client.</span></span> <span data-ttu-id="d1870-274">Olá `offline_access` escopo indica que seu aplicativo precisará de um token de atualização para tooresources de acesso e longa duração.</span><span class="sxs-lookup"><span data-stu-id="d1870-274">hello `offline_access` scope indicates that your app will need a refresh token for long-lived access tooresources.</span></span> |
| <span data-ttu-id="d1870-275">código</span><span class="sxs-lookup"><span data-stu-id="d1870-275">code</span></span> |<span data-ttu-id="d1870-276">Obrigatório</span><span class="sxs-lookup"><span data-stu-id="d1870-276">Required</span></span> |<span data-ttu-id="d1870-277">código de autorização de saudação que você copiou no trecho primeiro de saudação do fluxo de saudação.</span><span class="sxs-lookup"><span data-stu-id="d1870-277">hello authorization code that you acquired in hello first leg of hello flow.</span></span> |
| <span data-ttu-id="d1870-278">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="d1870-278">redirect_uri</span></span> |<span data-ttu-id="d1870-279">Obrigatório</span><span class="sxs-lookup"><span data-stu-id="d1870-279">Required</span></span> |<span data-ttu-id="d1870-280">Olá `redirect_uri` parâmetro do aplicativo hello em que você recebeu o código de autorização de saudação.</span><span class="sxs-lookup"><span data-stu-id="d1870-280">hello `redirect_uri` parameter of hello application where you received hello authorization code.</span></span> |
| <span data-ttu-id="d1870-281">client_secret</span><span class="sxs-lookup"><span data-stu-id="d1870-281">client_secret</span></span> |<span data-ttu-id="d1870-282">Obrigatório</span><span class="sxs-lookup"><span data-stu-id="d1870-282">Required</span></span> |<span data-ttu-id="d1870-283">segredo do aplicativo Hello geradas no hello [portal do Azure](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="d1870-283">hello application secret that you generated in hello [Azure portal](https://portal.azure.com/).</span></span> <span data-ttu-id="d1870-284">O segredo do aplicativo é um artefato de segurança importante.</span><span class="sxs-lookup"><span data-stu-id="d1870-284">This application secret is an important security artifact.</span></span> <span data-ttu-id="d1870-285">Você deve armazená-lo com segurança no servidor.</span><span class="sxs-lookup"><span data-stu-id="d1870-285">You should store it securely on your server.</span></span> <span data-ttu-id="d1870-286">Você também deve circular esse segredo do cliente em intervalos periódicos.</span><span class="sxs-lookup"><span data-stu-id="d1870-286">You should also rotate this client secret on a periodic basis.</span></span> |

<span data-ttu-id="d1870-287">Uma resposta de token bem-sucedida tem a seguinte aparência:</span><span class="sxs-lookup"><span data-stu-id="d1870-287">A successful token response looks like:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="d1870-288">Parâmetro</span><span class="sxs-lookup"><span data-stu-id="d1870-288">Parameter</span></span> | <span data-ttu-id="d1870-289">Descrição</span><span class="sxs-lookup"><span data-stu-id="d1870-289">Description</span></span> |
| --- | --- |
| <span data-ttu-id="d1870-290">not_before</span><span class="sxs-lookup"><span data-stu-id="d1870-290">not_before</span></span> |<span data-ttu-id="d1870-291">tempo de saudação no qual Olá token é considerado válido, em vez de época.</span><span class="sxs-lookup"><span data-stu-id="d1870-291">hello time at which hello token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="d1870-292">token_type</span><span class="sxs-lookup"><span data-stu-id="d1870-292">token_type</span></span> |<span data-ttu-id="d1870-293">valor de tipo de token de saudação.</span><span class="sxs-lookup"><span data-stu-id="d1870-293">hello token type value.</span></span> <span data-ttu-id="d1870-294">Olá somente tipo de AD do Azure oferece suporte a `Bearer`.</span><span class="sxs-lookup"><span data-stu-id="d1870-294">hello only type that Azure AD supports is `Bearer`.</span></span> |
| <span data-ttu-id="d1870-295">access_token</span><span class="sxs-lookup"><span data-stu-id="d1870-295">access_token</span></span> |<span data-ttu-id="d1870-296">Olá assinou o token JWT que você solicitou.</span><span class="sxs-lookup"><span data-stu-id="d1870-296">hello signed JWT token that you requested.</span></span> |
| <span data-ttu-id="d1870-297">scope</span><span class="sxs-lookup"><span data-stu-id="d1870-297">scope</span></span> |<span data-ttu-id="d1870-298">escopos de saudação para o qual Olá token é válido.</span><span class="sxs-lookup"><span data-stu-id="d1870-298">hello scopes for which hello token is valid.</span></span> <span data-ttu-id="d1870-299">Eles podem ser usados para o cache de tokens para uso posterior.</span><span class="sxs-lookup"><span data-stu-id="d1870-299">These can be used for caching tokens for later use.</span></span> |
| <span data-ttu-id="d1870-300">expires_in</span><span class="sxs-lookup"><span data-stu-id="d1870-300">expires_in</span></span> |<span data-ttu-id="d1870-301">Olá período de tempo que Olá token de acesso é válido (em segundos).</span><span class="sxs-lookup"><span data-stu-id="d1870-301">hello length of time that hello access token is valid (in seconds).</span></span> |
| <span data-ttu-id="d1870-302">refresh_token</span><span class="sxs-lookup"><span data-stu-id="d1870-302">refresh_token</span></span> |<span data-ttu-id="d1870-303">Um token de atualização do OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="d1870-303">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="d1870-304">Olá aplicativo pode usar este tokens adicionais do token tooacquire após Olá atual expire.</span><span class="sxs-lookup"><span data-stu-id="d1870-304">hello app can use this token tooacquire additional tokens after hello current token expires.</span></span> <span data-ttu-id="d1870-305">Atualizar tokens são de vida longa e pode ser usado tooretain acesso tooresources por longos períodos de tempo.</span><span class="sxs-lookup"><span data-stu-id="d1870-305">Refresh tokens are long-lived and can be used tooretain access tooresources for extended periods of time.</span></span> <span data-ttu-id="d1870-306">Para obter mais detalhes, consulte toohello [referência de token B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="d1870-306">For more details, refer toohello [B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> <span data-ttu-id="d1870-307">Observe que você deve ter usado o escopo de saudação `offline_access` no token e de autorização de saudação solicitações em ordem tooreceive um token de atualização.</span><span class="sxs-lookup"><span data-stu-id="d1870-307">Note that you must have used hello scope `offline_access` in both hello authorization and token requests in order tooreceive a refresh token.</span></span> |

<span data-ttu-id="d1870-308">As respostas de erro se parecem com:</span><span class="sxs-lookup"><span data-stu-id="d1870-308">Error responses look like:</span></span>

```
{
    "error": "access_denied",
    "error_description": "hello user revoked access toohello app.",
}
```

| <span data-ttu-id="d1870-309">Parâmetro</span><span class="sxs-lookup"><span data-stu-id="d1870-309">Parameter</span></span> | <span data-ttu-id="d1870-310">Descrição</span><span class="sxs-lookup"><span data-stu-id="d1870-310">Description</span></span> |
| --- | --- |
| <span data-ttu-id="d1870-311">error</span><span class="sxs-lookup"><span data-stu-id="d1870-311">error</span></span> |<span data-ttu-id="d1870-312">Uma cadeia de caracteres de código de erro que pode ser usado tooclassify tipos de erros que ocorrem e que pode ser usado tooreact tooerrors.</span><span class="sxs-lookup"><span data-stu-id="d1870-312">An error-code string that can be used tooclassify types of errors that occur and that can be used tooreact tooerrors.</span></span> |
| <span data-ttu-id="d1870-313">error_description</span><span class="sxs-lookup"><span data-stu-id="d1870-313">error_description</span></span> |<span data-ttu-id="d1870-314">Uma mensagem de erro específicas que um desenvolvedor pode ajudar a identificar a causa de saudação de um erro de autenticação.</span><span class="sxs-lookup"><span data-stu-id="d1870-314">A specific error message that can help a developer identify hello root cause of an authentication error.</span></span> |

## <a name="use-hello-token"></a><span data-ttu-id="d1870-315">Use o token de saudação</span><span class="sxs-lookup"><span data-stu-id="d1870-315">Use hello token</span></span>
<span data-ttu-id="d1870-316">Agora que você tenha adquirido com êxito um token de acesso, você pode usar o token Olá em APIs da web do back-end solicitações tooyour, incluí-lo no hello `Authorization` cabeçalho:</span><span class="sxs-lookup"><span data-stu-id="d1870-316">Now that you've successfully acquired an access token, you can use hello token in requests tooyour back-end web APIs by including it in hello `Authorization` header:</span></span>

```
GET /tasks
Host: https://mytaskwebapi.com
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
```

## <a name="refresh-hello-token"></a><span data-ttu-id="d1870-317">Olá token de atualização</span><span class="sxs-lookup"><span data-stu-id="d1870-317">Refresh hello token</span></span>
<span data-ttu-id="d1870-318">Os tokens de ID têm vida curta.</span><span class="sxs-lookup"><span data-stu-id="d1870-318">ID tokens are short-lived.</span></span> <span data-ttu-id="d1870-319">Você deve atualizá-los depois que elas expirarem toocontinue sendo tooaccess capaz de recursos.</span><span class="sxs-lookup"><span data-stu-id="d1870-319">You must refresh them after they expire toocontinue being able tooaccess resources.</span></span> <span data-ttu-id="d1870-320">Você pode fazer isso enviando outra `POST` solicitação toohello `/token` ponto de extremidade.</span><span class="sxs-lookup"><span data-stu-id="d1870-320">You can do so by submitting another `POST` request toohello `/token` endpoint.</span></span> <span data-ttu-id="d1870-321">Desta vez, fornecer Olá `refresh_token` parâmetro em vez da saudação `code` parâmetro:</span><span class="sxs-lookup"><span data-stu-id="d1870-321">This time, provide hello `refresh_token` parameter instead of hello `code` parameter:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=refresh_token&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=openid offline_access&refresh_token=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob&client_secret=<your-application-secret>
```

| <span data-ttu-id="d1870-322">Parâmetro</span><span class="sxs-lookup"><span data-stu-id="d1870-322">Parameter</span></span> | <span data-ttu-id="d1870-323">Obrigatório</span><span class="sxs-lookup"><span data-stu-id="d1870-323">Required</span></span> | <span data-ttu-id="d1870-324">Descrição</span><span class="sxs-lookup"><span data-stu-id="d1870-324">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="d1870-325">p</span><span class="sxs-lookup"><span data-stu-id="d1870-325">p</span></span> |<span data-ttu-id="d1870-326">Obrigatório</span><span class="sxs-lookup"><span data-stu-id="d1870-326">Required</span></span> |<span data-ttu-id="d1870-327">Olá política de token de atualização original Olá tooacquire usado.</span><span class="sxs-lookup"><span data-stu-id="d1870-327">hello policy that was used tooacquire hello original refresh token.</span></span> <span data-ttu-id="d1870-328">Você não poderá usar uma política diferente nessa solicitação.</span><span class="sxs-lookup"><span data-stu-id="d1870-328">You cannot use a different policy in this request.</span></span> <span data-ttu-id="d1870-329">Observe que você adicionar essa cadeia de caracteres de consulta do parâmetro toohello, o corpo do POST não toohello.</span><span class="sxs-lookup"><span data-stu-id="d1870-329">Note that you add this parameter toohello query string, not toohello POST body.</span></span> |
| <span data-ttu-id="d1870-330">client_id</span><span class="sxs-lookup"><span data-stu-id="d1870-330">client_id</span></span> |<span data-ttu-id="d1870-331">Obrigatório</span><span class="sxs-lookup"><span data-stu-id="d1870-331">Required</span></span> |<span data-ttu-id="d1870-332">aplicativo Hello ID que Olá [portal do Azure](https://portal.azure.com/) atribuído tooyour aplicativo.</span><span class="sxs-lookup"><span data-stu-id="d1870-332">hello application ID that hello [Azure portal](https://portal.azure.com/) assigned tooyour app.</span></span> |
| <span data-ttu-id="d1870-333">grant_type</span><span class="sxs-lookup"><span data-stu-id="d1870-333">grant_type</span></span> |<span data-ttu-id="d1870-334">Obrigatório</span><span class="sxs-lookup"><span data-stu-id="d1870-334">Required</span></span> |<span data-ttu-id="d1870-335">tipo de saudação de concessão, que deve ser um token de atualização para este segmento do fluxo de código de autorização de saudação.</span><span class="sxs-lookup"><span data-stu-id="d1870-335">hello type of grant, which must be a refresh token for this leg of hello authorization code flow.</span></span> |
| <span data-ttu-id="d1870-336">scope</span><span class="sxs-lookup"><span data-stu-id="d1870-336">scope</span></span> |<span data-ttu-id="d1870-337">Recomendadas</span><span class="sxs-lookup"><span data-stu-id="d1870-337">Recommended</span></span> |<span data-ttu-id="d1870-338">Uma lista de escopos separados por espaços.</span><span class="sxs-lookup"><span data-stu-id="d1870-338">A space-separated list of scopes.</span></span> <span data-ttu-id="d1870-339">Um valor único escopo indica tooAzure AD ambas as permissões que estão sendo solicitados.</span><span class="sxs-lookup"><span data-stu-id="d1870-339">A single scope value indicates tooAzure AD both permissions that are being requested.</span></span> <span data-ttu-id="d1870-340">Olá `openid` escopo indica um toosign permissão nos dados de usuário e get hello sobre usuário Olá na forma de saudação de tokens de ID.</span><span class="sxs-lookup"><span data-stu-id="d1870-340">hello `openid` scope indicates a permission toosign in hello user and get data about hello user in hello form of ID tokens.</span></span> <span data-ttu-id="d1870-341">Ele pode ser usado tooget tokens tooyour do aplicativo back-end API da web, que é representado por Olá mesma identificação de aplicativo cliente hello.</span><span class="sxs-lookup"><span data-stu-id="d1870-341">It can be used tooget tokens tooyour app's own back-end web API, which is represented by hello same application ID as hello client.</span></span> <span data-ttu-id="d1870-342">Olá `offline_access` escopo indica que seu aplicativo precisará de um token de atualização para tooresources de acesso e longa duração.</span><span class="sxs-lookup"><span data-stu-id="d1870-342">hello `offline_access` scope indicates that your app will need a refresh token for long-lived access tooresources.</span></span> |
| <span data-ttu-id="d1870-343">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="d1870-343">redirect_uri</span></span> |<span data-ttu-id="d1870-344">Recomendadas</span><span class="sxs-lookup"><span data-stu-id="d1870-344">Recommended</span></span> |<span data-ttu-id="d1870-345">Olá `redirect_uri` parâmetro do aplicativo hello em que você recebeu o código de autorização de saudação.</span><span class="sxs-lookup"><span data-stu-id="d1870-345">hello `redirect_uri` parameter of hello application where you received hello authorization code.</span></span> |
| <span data-ttu-id="d1870-346">refresh_token</span><span class="sxs-lookup"><span data-stu-id="d1870-346">refresh_token</span></span> |<span data-ttu-id="d1870-347">Obrigatório</span><span class="sxs-lookup"><span data-stu-id="d1870-347">Required</span></span> |<span data-ttu-id="d1870-348">Olá original token de atualização que você copiou no trecho de segundo de saudação do fluxo de saudação.</span><span class="sxs-lookup"><span data-stu-id="d1870-348">hello original refresh token that you acquired in hello second leg of hello flow.</span></span> <span data-ttu-id="d1870-349">Observe que você deve ter usado o escopo de saudação `offline_access` no token e de autorização de saudação solicitações em ordem tooreceive um token de atualização.</span><span class="sxs-lookup"><span data-stu-id="d1870-349">Note that you must have used hello scope `offline_access` in both hello authorization and token requests in order tooreceive a refresh token.</span></span> |
| <span data-ttu-id="d1870-350">client_secret</span><span class="sxs-lookup"><span data-stu-id="d1870-350">client_secret</span></span> |<span data-ttu-id="d1870-351">Obrigatório</span><span class="sxs-lookup"><span data-stu-id="d1870-351">Required</span></span> |<span data-ttu-id="d1870-352">segredo do aplicativo Hello geradas no hello [portal do Azure](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="d1870-352">hello application secret that you generated in hello [Azure portal](https://portal.azure.com/).</span></span> <span data-ttu-id="d1870-353">O segredo do aplicativo é um artefato de segurança importante.</span><span class="sxs-lookup"><span data-stu-id="d1870-353">This application secret is an important security artifact.</span></span> <span data-ttu-id="d1870-354">Você deve armazená-lo com segurança no servidor.</span><span class="sxs-lookup"><span data-stu-id="d1870-354">You should store it securely on your server.</span></span> <span data-ttu-id="d1870-355">Você também deve circular esse segredo do cliente em intervalos periódicos.</span><span class="sxs-lookup"><span data-stu-id="d1870-355">You should also rotate this client secret on a periodic basis.</span></span> |

<span data-ttu-id="d1870-356">Uma resposta de token bem-sucedida tem a seguinte aparência:</span><span class="sxs-lookup"><span data-stu-id="d1870-356">A successful token response looks like:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="d1870-357">Parâmetro</span><span class="sxs-lookup"><span data-stu-id="d1870-357">Parameter</span></span> | <span data-ttu-id="d1870-358">Descrição</span><span class="sxs-lookup"><span data-stu-id="d1870-358">Description</span></span> |
| --- | --- |
| <span data-ttu-id="d1870-359">not_before</span><span class="sxs-lookup"><span data-stu-id="d1870-359">not_before</span></span> |<span data-ttu-id="d1870-360">tempo de saudação no qual Olá token é considerado válido, em vez de época.</span><span class="sxs-lookup"><span data-stu-id="d1870-360">hello time at which hello token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="d1870-361">token_type</span><span class="sxs-lookup"><span data-stu-id="d1870-361">token_type</span></span> |<span data-ttu-id="d1870-362">valor de tipo de token de saudação.</span><span class="sxs-lookup"><span data-stu-id="d1870-362">hello token type value.</span></span> <span data-ttu-id="d1870-363">Olá somente tipo de AD do Azure oferece suporte a `Bearer`.</span><span class="sxs-lookup"><span data-stu-id="d1870-363">hello only type that Azure AD supports is `Bearer`.</span></span> |
| <span data-ttu-id="d1870-364">access_token</span><span class="sxs-lookup"><span data-stu-id="d1870-364">access_token</span></span> |<span data-ttu-id="d1870-365">Olá assinou o token JWT que você solicitou.</span><span class="sxs-lookup"><span data-stu-id="d1870-365">hello signed JWT token that you requested.</span></span> |
| <span data-ttu-id="d1870-366">scope</span><span class="sxs-lookup"><span data-stu-id="d1870-366">scope</span></span> |<span data-ttu-id="d1870-367">escopo de Olá Olá token é válido, que pode ser usado para armazenar em cache os tokens para uso posterior.</span><span class="sxs-lookup"><span data-stu-id="d1870-367">hello scope that hello token is valid for, which can be used for caching tokens for later use.</span></span> |
| <span data-ttu-id="d1870-368">expires_in</span><span class="sxs-lookup"><span data-stu-id="d1870-368">expires_in</span></span> |<span data-ttu-id="d1870-369">Olá período de tempo que Olá token de acesso é válido (em segundos).</span><span class="sxs-lookup"><span data-stu-id="d1870-369">hello length of time that hello access token is valid (in seconds).</span></span> |
| <span data-ttu-id="d1870-370">refresh_token</span><span class="sxs-lookup"><span data-stu-id="d1870-370">refresh_token</span></span> |<span data-ttu-id="d1870-371">Um token de atualização do OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="d1870-371">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="d1870-372">Olá aplicativo pode usar este tokens adicionais do token tooacquire após Olá atual expire.</span><span class="sxs-lookup"><span data-stu-id="d1870-372">hello app can use this token tooacquire additional tokens after hello current token expires.</span></span>  <span data-ttu-id="d1870-373">Atualizar tokens são de vida longa e pode ser usado tooretain acesso tooresources por longos períodos de tempo.</span><span class="sxs-lookup"><span data-stu-id="d1870-373">Refresh tokens are long-lived and can be used tooretain access tooresources for extended periods of time.</span></span> <span data-ttu-id="d1870-374">Para obter mais detalhes, consulte toohello [referência de token B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="d1870-374">For more detail, refer toohello [B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |

<span data-ttu-id="d1870-375">As respostas de erro se parecem com:</span><span class="sxs-lookup"><span data-stu-id="d1870-375">Error responses look like:</span></span>

```
{
    "error": "access_denied",
    "error_description": "hello user revoked access toohello app.",
}
```

| <span data-ttu-id="d1870-376">Parâmetro</span><span class="sxs-lookup"><span data-stu-id="d1870-376">Parameter</span></span> | <span data-ttu-id="d1870-377">Descrição</span><span class="sxs-lookup"><span data-stu-id="d1870-377">Description</span></span> |
| --- | --- |
| <span data-ttu-id="d1870-378">error</span><span class="sxs-lookup"><span data-stu-id="d1870-378">error</span></span> |<span data-ttu-id="d1870-379">Uma cadeia de caracteres de código de erro que pode ser usado tooclassify tipos de erros que ocorrem e que pode ser usado tooreact tooerrors.</span><span class="sxs-lookup"><span data-stu-id="d1870-379">An error-code string that can be used tooclassify types of errors that occur and that can be used tooreact tooerrors.</span></span> |
| <span data-ttu-id="d1870-380">error_description</span><span class="sxs-lookup"><span data-stu-id="d1870-380">error_description</span></span> |<span data-ttu-id="d1870-381">Uma mensagem de erro específicas que um desenvolvedor pode ajudar a identificar a causa de saudação de um erro de autenticação.</span><span class="sxs-lookup"><span data-stu-id="d1870-381">A specific error message that can help a developer identify hello root cause of an authentication error.</span></span> |

## <a name="send-a-sign-out-request"></a><span data-ttu-id="d1870-382">Enviar uma solicitação de saída</span><span class="sxs-lookup"><span data-stu-id="d1870-382">Send a sign-out request</span></span>
<span data-ttu-id="d1870-383">Quando você desejar toosign Olá usuário fora do aplicativo hello, é insuficiente tooclear cookies do seu aplicativo ou caso contrário, encerrar a sessão de saudação com usuário hello.</span><span class="sxs-lookup"><span data-stu-id="d1870-383">When you want toosign hello user out of hello app, it is not enough tooclear your app's cookies or otherwise end hello session with hello user.</span></span> <span data-ttu-id="d1870-384">Você também deve redirecionar Olá usuário tooAzure AD toosign-out. Se você não toodo, portanto, o usuário Olá pode ser capaz de tooreauthenticate tooyour aplicativo sem inserir suas credenciais novamente.</span><span class="sxs-lookup"><span data-stu-id="d1870-384">You must also redirect hello user tooAzure AD toosign out. If you fail toodo so, hello user might be able tooreauthenticate tooyour app without entering their credentials again.</span></span> <span data-ttu-id="d1870-385">Isso ocorre porque eles terão uma sessão de logon único válida com o Azure AD.</span><span class="sxs-lookup"><span data-stu-id="d1870-385">This is because they will have a valid single sign-on session with Azure AD.</span></span>

<span data-ttu-id="d1870-386">Você pode redirecionar simplesmente Olá usuário toohello `end_session` ponto de extremidade que está listado no documento de metadados de OpenID Connect Olá descrito anteriormente hello "Validar o token de ID hello" seção:</span><span class="sxs-lookup"><span data-stu-id="d1870-386">You can simply redirect hello user toohello `end_session` endpoint that is listed in hello OpenID Connect metadata document described earlier in hello "Validate hello ID token" section:</span></span>

```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/logout?
p=b2c_1_sign_in
&post_logout_redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
```

| <span data-ttu-id="d1870-387">Parâmetro</span><span class="sxs-lookup"><span data-stu-id="d1870-387">Parameter</span></span> | <span data-ttu-id="d1870-388">Obrigatório?</span><span class="sxs-lookup"><span data-stu-id="d1870-388">Required?</span></span> | <span data-ttu-id="d1870-389">Descrição</span><span class="sxs-lookup"><span data-stu-id="d1870-389">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="d1870-390">p</span><span class="sxs-lookup"><span data-stu-id="d1870-390">p</span></span> |<span data-ttu-id="d1870-391">Obrigatório</span><span class="sxs-lookup"><span data-stu-id="d1870-391">Required</span></span> |<span data-ttu-id="d1870-392">política de saudação que você deseja o usuário de saudação do toouse toosign fora do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="d1870-392">hello policy that you want toouse toosign hello user out of your application.</span></span> |
| <span data-ttu-id="d1870-393">post_logout_redirect_uri</span><span class="sxs-lookup"><span data-stu-id="d1870-393">post_logout_redirect_uri</span></span> |<span data-ttu-id="d1870-394">Recomendadas</span><span class="sxs-lookup"><span data-stu-id="d1870-394">Recommended</span></span> |<span data-ttu-id="d1870-395">Olá URL que o usuário Olá deve ser redirecionado tooafter bem-sucedida logout. Se não for incluída, o Azure AD B2C mostra usuário Olá uma mensagem genérica.</span><span class="sxs-lookup"><span data-stu-id="d1870-395">hello URL that hello user should be redirected tooafter successful sign-out. If it is not included, Azure AD B2C shows hello user a generic message.</span></span> |

> [!NOTE]
> <span data-ttu-id="d1870-396">Embora direcionando Olá usuário toohello `end_session` ponto de extremidade removerá alguns saudação do único logon de estado do usuário com o Azure AD B2C, ele não se conectará usuário Olá fora de sua sessão de IDP (provedor) da identidade de redes sociais.</span><span class="sxs-lookup"><span data-stu-id="d1870-396">Although directing hello user toohello `end_session` endpoint will clear some of hello user's single sign-on state with Azure AD B2C, it will not sign hello user out of their social identity provider (IDP) session.</span></span> <span data-ttu-id="d1870-397">Se o usuário Olá seleciona Olá IDP mesmo durante uma entrada subsequente, eles serão ser reautenticados, sem inserir suas credenciais.</span><span class="sxs-lookup"><span data-stu-id="d1870-397">If hello user selects hello same IDP during a subsequent sign-in, they will be reauthenticated, without entering their credentials.</span></span> <span data-ttu-id="d1870-398">Se um usuário quiser toosign fora do seu aplicativo B2C, ele não significa necessariamente que desejam toosign fora da sua conta do Facebook.</span><span class="sxs-lookup"><span data-stu-id="d1870-398">If a user wants toosign out of your B2C application, it does not necessarily mean they want toosign out of their Facebook account.</span></span> <span data-ttu-id="d1870-399">No entanto, no caso de saudação de contas locais, sessão de saudação do usuário será finalizada corretamente.</span><span class="sxs-lookup"><span data-stu-id="d1870-399">However, in hello case of local accounts, hello user's session will be ended properly.</span></span>
> 
> 

## <a name="use-your-own-b2c-tenant"></a><span data-ttu-id="d1870-400">Usar seu próprio locatário B2C</span><span class="sxs-lookup"><span data-stu-id="d1870-400">Use your own B2C tenant</span></span>
<span data-ttu-id="d1870-401">Se você quiser tootry essas solicitações por conta própria, deve primeiro executar estas três etapas e, em seguida, substituir valores de exemplo hello descritos anteriormente com seu próprio:</span><span class="sxs-lookup"><span data-stu-id="d1870-401">If you want tootry these requests for yourself, you must first perform these three steps, and then replace hello example values described earlier with your own:</span></span>

1. <span data-ttu-id="d1870-402">[Criar um locatário B2C](active-directory-b2c-get-started.md)e usar o nome de saudação do seu locatário em solicitações de saudação.</span><span class="sxs-lookup"><span data-stu-id="d1870-402">[Create a B2C tenant](active-directory-b2c-get-started.md), and use hello name of your tenant in hello requests.</span></span>
2. <span data-ttu-id="d1870-403">[Criar um aplicativo](active-directory-b2c-app-registration.md) tooobtain uma ID de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="d1870-403">[Create an application](active-directory-b2c-app-registration.md) tooobtain an application ID.</span></span> <span data-ttu-id="d1870-404">Inclui um aplicativo Web/uma API Web em seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="d1870-404">Include a web app/web API in your app.</span></span> <span data-ttu-id="d1870-405">Opcionalmente, criar um segredo do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="d1870-405">Optionally, create an application secret.</span></span>
3. <span data-ttu-id="d1870-406">[Criar suas diretivas](active-directory-b2c-reference-policies.md) tooobtain seus nomes de política.</span><span class="sxs-lookup"><span data-stu-id="d1870-406">[Create your policies](active-directory-b2c-reference-policies.md) tooobtain your policy names.</span></span>

