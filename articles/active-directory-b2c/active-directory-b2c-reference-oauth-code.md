---
title: "Fluxo de código de autorização – Azure AD B2C | Microsoft Docs"
description: "Saiba como compilar aplicativos Web usando o Azure AD B2C e o protocolo de autenticação OpenID Connect."
services: active-directory-b2c
documentationcenter: 
author: saeedakhter-msft
manager: krassk
editor: parakhj
ms.assetid: c371aaab-813a-4317-97df-b62e2f53d865
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/16/2017
ms.author: saeedakhter-msft
ms.openlocfilehash: dfc4f2e84704307ccbea6141c0dbc8d089733b22
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/29/2017
---
# <a name="azure-active-directory-b2c-oauth-20-authorization-code-flow"></a><span data-ttu-id="7c357-103">Azure Active Directory B2C: fluxo de código de autorização OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="7c357-103">Azure Active Directory B2C: OAuth 2.0 authorization code flow</span></span>
<span data-ttu-id="7c357-104">Você pode usar a concessão de código de autorização OAuth 2.0 em aplicativos instalados em um dispositivo para obter acesso a recursos protegidos, como APIs Web.</span><span class="sxs-lookup"><span data-stu-id="7c357-104">You can use the OAuth 2.0 authorization code grant in apps installed on a device to gain access to protected resources, such as web APIs.</span></span> <span data-ttu-id="7c357-105">Usando a implementação do Azure AD B2C (Azure Active Directory B2C) do OAuth 2.0, você pode adicionar tarefas de inscrição, entrada e outras de gerenciamento de identidade aos seus aplicativos móveis e da área de trabalho.</span><span class="sxs-lookup"><span data-stu-id="7c357-105">By using the Azure Active Directory B2C (Azure AD B2C) implementation of OAuth 2.0, you can add sign-up, sign-in, and other identity management tasks to your mobile and desktop apps.</span></span> <span data-ttu-id="7c357-106">Este artigo é independente de linguagem.</span><span class="sxs-lookup"><span data-stu-id="7c357-106">This article is language-independent.</span></span> <span data-ttu-id="7c357-107">No artigo, descreveremos como enviar e receber mensagens HTTP sem usar nenhuma biblioteca de software livre.</span><span class="sxs-lookup"><span data-stu-id="7c357-107">In the article, we describe how to send and receive HTTP messages without using any open-source libraries.</span></span>

<!-- TODO: Need link to libraries -->

<span data-ttu-id="7c357-108">O fluxo do código de autorização do OAuth 2.0 é descrito na [seção 4.1 da especificação do OAuth 2.0](http://tools.ietf.org/html/rfc6749).</span><span class="sxs-lookup"><span data-stu-id="7c357-108">The OAuth 2.0 authorization code flow is described in [section 4.1 of the OAuth 2.0 specification](http://tools.ietf.org/html/rfc6749).</span></span> <span data-ttu-id="7c357-109">Você pode usá-lo para autenticação e autorização na maioria dos tipos de aplicativo, incluindo [aplicativos Web](active-directory-b2c-apps.md#web-apps) e [aplicativos instalados nativamente](active-directory-b2c-apps.md#mobile-and-native-apps).</span><span class="sxs-lookup"><span data-stu-id="7c357-109">You can use it for authentication and authorization in most app types, including [web apps](active-directory-b2c-apps.md#web-apps) and [natively installed apps](active-directory-b2c-apps.md#mobile-and-native-apps).</span></span> <span data-ttu-id="7c357-110">Você pode usar o fluxo de código de autorização OAuth 2.0 para adquirir *tokens de acesso* com segurança para seus aplicativos, que podem ser usados para acessar recursos protegidos por um [servidor de autorização](active-directory-b2c-reference-protocols.md#the-basics).</span><span class="sxs-lookup"><span data-stu-id="7c357-110">You can use the OAuth 2.0 authorization code flow to securely acquire *access tokens* for your apps, which can be used to access resources that are secured by an [authorization server](active-directory-b2c-reference-protocols.md#the-basics).</span></span>

<span data-ttu-id="7c357-111">Este artigo concentra-se no fluxo de código de autorização do OAuth 2.0 de **clientes públicos**.</span><span class="sxs-lookup"><span data-stu-id="7c357-111">This article focuses on the **public clients** OAuth 2.0 authorization code flow.</span></span> <span data-ttu-id="7c357-112">Um cliente público é qualquer aplicativo cliente que não é confiável para manter a integridade de uma senha secreta com segurança.</span><span class="sxs-lookup"><span data-stu-id="7c357-112">A public client is any client application that cannot be trusted to securely maintain the integrity of a secret password.</span></span> <span data-ttu-id="7c357-113">Isso inclui aplicativos móveis, aplicativos da área de trabalho e, basicamente, qualquer aplicativo que seja executado em um dispositivo e precise obter tokens de acesso.</span><span class="sxs-lookup"><span data-stu-id="7c357-113">This includes mobile apps, desktop apps, and essentially any application that runs on a device and needs to get access tokens.</span></span> 

> [!NOTE]
> <span data-ttu-id="7c357-114">Para adicionar o gerenciamento de identidade em um aplicativo Web usando o Azure AD B2C, use o [OpenID Connect](active-directory-b2c-reference-oidc.md) em vez do OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="7c357-114">To add identity management to a web app by using Azure AD B2C, use [OpenID Connect](active-directory-b2c-reference-oidc.md) instead of OAuth 2.0.</span></span>

<span data-ttu-id="7c357-115">O Azure AD B2C estende os fluxos padrão do OAuth 2.0 para fazer mais do que simples ações de autenticação e autorização.</span><span class="sxs-lookup"><span data-stu-id="7c357-115">Azure AD B2C extends the standard OAuth 2.0 flows to do more than simple authentication and authorization.</span></span> <span data-ttu-id="7c357-116">Ele apresenta o [parâmetro de política](active-directory-b2c-reference-policies.md).</span><span class="sxs-lookup"><span data-stu-id="7c357-116">It introduces the [policy parameter](active-directory-b2c-reference-policies.md).</span></span> <span data-ttu-id="7c357-117">Com políticas internas, você pode usar o OAuth 2.0 para adicionar experiências do usuário ao seu aplicativo, como inscrição, entrada e gerenciamento de perfil.</span><span class="sxs-lookup"><span data-stu-id="7c357-117">With built-in policies, you can use OAuth 2.0 to add user experiences to your app, such as sign-up, sign-in, and profile management.</span></span> <span data-ttu-id="7c357-118">Neste artigo, mostramos como usar políticas e o OAuth 2.0 para implementar cada uma dessas experiências em seus aplicativos nativos.</span><span class="sxs-lookup"><span data-stu-id="7c357-118">In this article, we show you how to use OAuth 2.0 and policies to implement each of these experiences in your native applications.</span></span> <span data-ttu-id="7c357-119">Também mostramos como obter tokens de acesso para acessar APIs Web.</span><span class="sxs-lookup"><span data-stu-id="7c357-119">We also show you how to get access tokens for accessing web APIs.</span></span>

<span data-ttu-id="7c357-120">Nas solicitações HTTP de exemplo neste artigo, usamos o diretório do Azure AD B2C de exemplo, **fabrikamb2c.onmicrosoft.com**. Também usamos nosso aplicativo de exemplo e políticas.</span><span class="sxs-lookup"><span data-stu-id="7c357-120">In the example HTTP requests in this article, we use our sample Azure AD B2C directory, **fabrikamb2c.onmicrosoft.com**. We also use our sample application and policies.</span></span> <span data-ttu-id="7c357-121">Você pode tentar as solicitações sozinho usando esses valores ou substituindo-os pelos seus próprios valores.</span><span class="sxs-lookup"><span data-stu-id="7c357-121">You can try the requests yourself by using these values, or you can replace them with your own values.</span></span>
<span data-ttu-id="7c357-122">Saiba como [obter seus próprios diretório, aplicativo e políticas do Azure AD B2C](#use-your-own-azure-ad-b2c-directory).</span><span class="sxs-lookup"><span data-stu-id="7c357-122">Learn how to [get your own Azure AD B2C directory, application, and policies](#use-your-own-azure-ad-b2c-directory).</span></span>

## <a name="1-get-an-authorization-code"></a><span data-ttu-id="7c357-123">1. Obter um código de autorização</span><span class="sxs-lookup"><span data-stu-id="7c357-123">1. Get an authorization code</span></span>
<span data-ttu-id="7c357-124">O fluxo do código de autorização começa com o cliente direcionando o usuário para o ponto de extremidade `/authorize` .</span><span class="sxs-lookup"><span data-stu-id="7c357-124">The authorization code flow begins with the client directing the user to the `/authorize` endpoint.</span></span> <span data-ttu-id="7c357-125">Essa é a parte interativa do fluxo, na qual o usuário entra em ação.</span><span class="sxs-lookup"><span data-stu-id="7c357-125">This is the interactive part of the flow, where the user takes action.</span></span> <span data-ttu-id="7c357-126">Nessa solicitação, o cliente indica no parâmetro `scope` as permissões que ele precisa adquirir do usuário.</span><span class="sxs-lookup"><span data-stu-id="7c357-126">In this request, the client indicates in the `scope` parameter the permissions that it needs to acquire from the user.</span></span> <span data-ttu-id="7c357-127">No parâmetro `p`, ele indica que a política a ser executada.</span><span class="sxs-lookup"><span data-stu-id="7c357-127">In the `p` parameter, it indicates the policy to execute.</span></span> <span data-ttu-id="7c357-128">Cada um dos três exemplos a seguir (com quebras de linha para facilitar a leitura) usam uma política diferente.</span><span class="sxs-lookup"><span data-stu-id="7c357-128">The following three examples (with line breaks for readability) each use a different policy.</span></span>

### <a name="use-a-sign-in-policy"></a><span data-ttu-id="7c357-129">Usar uma política de entrada</span><span class="sxs-lookup"><span data-stu-id="7c357-129">Use a sign-in policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code
&redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob
&response_mode=query
&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&p=b2c_1_sign_in
```

### <a name="use-a-sign-up-policy"></a><span data-ttu-id="7c357-130">Usar uma política de inscrição</span><span class="sxs-lookup"><span data-stu-id="7c357-130">Use a sign-up policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code
&redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob
&response_mode=query
&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&p=b2c_1_sign_up
```

### <a name="use-an-edit-profile-policy"></a><span data-ttu-id="7c357-131">Usar uma política de edição de perfil</span><span class="sxs-lookup"><span data-stu-id="7c357-131">Use an edit-profile policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code
&redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob
&response_mode=query
&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&p=b2c_1_edit_profile
```

| <span data-ttu-id="7c357-132">Parâmetro</span><span class="sxs-lookup"><span data-stu-id="7c357-132">Parameter</span></span> | <span data-ttu-id="7c357-133">Obrigatório?</span><span class="sxs-lookup"><span data-stu-id="7c357-133">Required?</span></span> | <span data-ttu-id="7c357-134">Descrição</span><span class="sxs-lookup"><span data-stu-id="7c357-134">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="7c357-135">client_id</span><span class="sxs-lookup"><span data-stu-id="7c357-135">client_id</span></span> |<span data-ttu-id="7c357-136">Obrigatório</span><span class="sxs-lookup"><span data-stu-id="7c357-136">Required</span></span> |<span data-ttu-id="7c357-137">A ID do aplicativo atribuída ao seu aplicativo no [portal do Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="7c357-137">The application ID assigned to your app in the [Azure portal](https://portal.azure.com).</span></span> |
| <span data-ttu-id="7c357-138">response_type</span><span class="sxs-lookup"><span data-stu-id="7c357-138">response_type</span></span> |<span data-ttu-id="7c357-139">Obrigatório</span><span class="sxs-lookup"><span data-stu-id="7c357-139">Required</span></span> |<span data-ttu-id="7c357-140">O tipo de resposta, que deve incluir `code` para o fluxo do código de autorização.</span><span class="sxs-lookup"><span data-stu-id="7c357-140">The response type, which must include `code` for the authorization code flow.</span></span> |
| <span data-ttu-id="7c357-141">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="7c357-141">redirect_uri</span></span> |<span data-ttu-id="7c357-142">Obrigatório</span><span class="sxs-lookup"><span data-stu-id="7c357-142">Required</span></span> |<span data-ttu-id="7c357-143">O URI de redirecionamento do seu aplicativo, no qual as respostas de autenticação são enviadas e recebidas pelo seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="7c357-143">The redirect URI of your app, where authentication responses are sent and received by your app.</span></span> <span data-ttu-id="7c357-144">Ele deve corresponder exatamente a um dos URIs de redirecionamento registrados no portal, exceto que ele deve ser codificado como URL.</span><span class="sxs-lookup"><span data-stu-id="7c357-144">It must exactly match one of the redirect URIs that you registered in the portal, except that it must be URL-encoded.</span></span> |
| <span data-ttu-id="7c357-145">scope</span><span class="sxs-lookup"><span data-stu-id="7c357-145">scope</span></span> |<span data-ttu-id="7c357-146">Obrigatório</span><span class="sxs-lookup"><span data-stu-id="7c357-146">Required</span></span> |<span data-ttu-id="7c357-147">Uma lista de escopos separados por espaços.</span><span class="sxs-lookup"><span data-stu-id="7c357-147">A space-separated list of scopes.</span></span> <span data-ttu-id="7c357-148">Um valor de escopo único indica ao Azure AD (Azure Active Directory) que ambas as permissões estão sendo solicitadas.</span><span class="sxs-lookup"><span data-stu-id="7c357-148">A single scope value indicates to Azure Active Directory (Azure AD) both of the permissions that are being requested.</span></span> <span data-ttu-id="7c357-149">O uso da ID do cliente como o escopo indica que seu aplicativo precisa de um token de acesso que possa ser usado em relação a seu próprio serviço ou API Web, representado pela mesma ID de cliente.</span><span class="sxs-lookup"><span data-stu-id="7c357-149">Using the client ID as the scope indicates that your app needs an access token that can be used against your own service or web API, represented by the same client ID.</span></span>  <span data-ttu-id="7c357-150">O escopo `offline_access` indica que seu aplicativo precisa de um token de atualização para acesso de longa duração a recursos.</span><span class="sxs-lookup"><span data-stu-id="7c357-150">The `offline_access` scope indicates that your app needs a refresh token for long-lived access to resources.</span></span> <span data-ttu-id="7c357-151">Você também pode usar o escopo `openid` para solicitar um token de ID do Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="7c357-151">You also can use the `openid` scope to request an ID token from Azure AD B2C.</span></span> |
| <span data-ttu-id="7c357-152">response_mode</span><span class="sxs-lookup"><span data-stu-id="7c357-152">response_mode</span></span> |<span data-ttu-id="7c357-153">Recomendadas</span><span class="sxs-lookup"><span data-stu-id="7c357-153">Recommended</span></span> |<span data-ttu-id="7c357-154">O método que você usa para enviar o código de autorização resultante para seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="7c357-154">The method that you use to send the resulting authorization code back to your app.</span></span> <span data-ttu-id="7c357-155">Pode ser `query`, `form_post` ou `fragment`.</span><span class="sxs-lookup"><span data-stu-id="7c357-155">It can be `query`, `form_post`, or `fragment`.</span></span> |
| <span data-ttu-id="7c357-156">state</span><span class="sxs-lookup"><span data-stu-id="7c357-156">state</span></span> |<span data-ttu-id="7c357-157">Recomendadas</span><span class="sxs-lookup"><span data-stu-id="7c357-157">Recommended</span></span> |<span data-ttu-id="7c357-158">Um valor incluído na solicitação que retorna na resposta do token.</span><span class="sxs-lookup"><span data-stu-id="7c357-158">A value included in the request that is returned in the token response.</span></span> <span data-ttu-id="7c357-159">Pode ser uma cadeia de caracteres de qualquer conteúdo que você deseje usar.</span><span class="sxs-lookup"><span data-stu-id="7c357-159">It can be a string of any content that you want to use.</span></span> <span data-ttu-id="7c357-160">Geralmente, um valor exclusivo gerado aleatoriamente é usado para evitar ataques de solicitação intersite forjada.</span><span class="sxs-lookup"><span data-stu-id="7c357-160">Usually, a randomly generated unique value is  used, to prevent cross-site request forgery attacks.</span></span> <span data-ttu-id="7c357-161">O estado também é usado para codificar informações sobre o estado do usuário no aplicativo, antes que a solicitação de autenticação tenha ocorrido.</span><span class="sxs-lookup"><span data-stu-id="7c357-161">The state also is used to encode information about the user's state in the app before the authentication request occurred.</span></span> <span data-ttu-id="7c357-162">Por exemplo, a página em que o usuário estava em ou a política que estava sendo executada.</span><span class="sxs-lookup"><span data-stu-id="7c357-162">For example, the page the user was on, or the policy that was being executed.</span></span> |
| <span data-ttu-id="7c357-163">p</span><span class="sxs-lookup"><span data-stu-id="7c357-163">p</span></span> |<span data-ttu-id="7c357-164">Obrigatório</span><span class="sxs-lookup"><span data-stu-id="7c357-164">Required</span></span> |<span data-ttu-id="7c357-165">A política que é executada.</span><span class="sxs-lookup"><span data-stu-id="7c357-165">The policy that is executed.</span></span> <span data-ttu-id="7c357-166">É o nome de uma política que é criada no diretório do Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="7c357-166">It's the name of a policy that is created in your Azure AD B2C directory.</span></span> <span data-ttu-id="7c357-167">O valor de nome da política deve começar com **b2c\_1\_**.</span><span class="sxs-lookup"><span data-stu-id="7c357-167">The policy name value should begin with **b2c\_1\_**.</span></span> <span data-ttu-id="7c357-168">Para saber mais sobre políticas, consulte [Políticas internas do Azure AD B2C](active-directory-b2c-reference-policies.md).</span><span class="sxs-lookup"><span data-stu-id="7c357-168">To learn more about policies, see [Azure AD B2C built-in policies](active-directory-b2c-reference-policies.md).</span></span> |
| <span data-ttu-id="7c357-169">prompt</span><span class="sxs-lookup"><span data-stu-id="7c357-169">prompt</span></span> |<span data-ttu-id="7c357-170">Opcional</span><span class="sxs-lookup"><span data-stu-id="7c357-170">Optional</span></span> |<span data-ttu-id="7c357-171">O tipo de interação do usuário que é necessário.</span><span class="sxs-lookup"><span data-stu-id="7c357-171">The type of user interaction that is required.</span></span> <span data-ttu-id="7c357-172">Atualmente, o único valor válido é `login`, que força o usuário a inserir suas credenciais nessa solicitação.</span><span class="sxs-lookup"><span data-stu-id="7c357-172">Currently, the only valid value is `login`, which forces the user to enter their credentials on that request.</span></span> <span data-ttu-id="7c357-173">O logon único não terá efeito.</span><span class="sxs-lookup"><span data-stu-id="7c357-173">Single sign-on will not take effect.</span></span> |

<span data-ttu-id="7c357-174">Nesse momento, é solicitado que o usuário conclua o fluxo de trabalho da política.</span><span class="sxs-lookup"><span data-stu-id="7c357-174">At this point, the user is asked to complete the policy's workflow.</span></span> <span data-ttu-id="7c357-175">Isso pode exigir que o usuário insira seu nome de usuário e senha, entre com uma identidade social, inscreva-se no diretório ou realize outras etapas.</span><span class="sxs-lookup"><span data-stu-id="7c357-175">This might involve the user entering their username and password, signing in with a social identity, signing up for the directory, or any other number of steps.</span></span> <span data-ttu-id="7c357-176">As ações do usuário dependem de como a política é definida.</span><span class="sxs-lookup"><span data-stu-id="7c357-176">User actions depend on how the policy is defined.</span></span>

<span data-ttu-id="7c357-177">Depois que o usuário completar a política, o Azure AD retornará uma resposta ao seu aplicativo no valor usado para `redirect_uri`.</span><span class="sxs-lookup"><span data-stu-id="7c357-177">After the user completes the policy, Azure AD returns a response to your app at the value you used for `redirect_uri`.</span></span> <span data-ttu-id="7c357-178">Ele usa o método especificado no parâmetro `response_mode`.</span><span class="sxs-lookup"><span data-stu-id="7c357-178">It uses the method specified in the `response_mode` parameter.</span></span> <span data-ttu-id="7c357-179">A resposta é exatamente a mesma para cada um dos cenários de ação do usuário, independentemente de qual política foi executada.</span><span class="sxs-lookup"><span data-stu-id="7c357-179">The response is exactly the same for each of the user action scenarios, independent of the policy that was executed.</span></span>

<span data-ttu-id="7c357-180">Uma resposta bem-sucedida que usa `response_mode=query` tem esta aparência:</span><span class="sxs-lookup"><span data-stu-id="7c357-180">A successful response that uses `response_mode=query` looks like this:</span></span>

```
GET urn:ietf:wg:oauth:2.0:oob?
code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...        // the authorization_code, truncated
&state=arbitrary_data_you_can_receive_in_the_response                // the value provided in the request
```

| <span data-ttu-id="7c357-181">Parâmetro</span><span class="sxs-lookup"><span data-stu-id="7c357-181">Parameter</span></span> | <span data-ttu-id="7c357-182">Descrição</span><span class="sxs-lookup"><span data-stu-id="7c357-182">Description</span></span> |
| --- | --- |
| <span data-ttu-id="7c357-183">código</span><span class="sxs-lookup"><span data-stu-id="7c357-183">code</span></span> |<span data-ttu-id="7c357-184">O código de autorização que o aplicativo solicitou.</span><span class="sxs-lookup"><span data-stu-id="7c357-184">The authorization code that the app requested.</span></span> <span data-ttu-id="7c357-185">O aplicativo pode usar o código de autorização para solicitar um token de acesso para um recurso de destino.</span><span class="sxs-lookup"><span data-stu-id="7c357-185">The app can use the authorization code to request an access token for a target resource.</span></span> <span data-ttu-id="7c357-186">Os códigos de autorização têm uma duração muito curta.</span><span class="sxs-lookup"><span data-stu-id="7c357-186">Authorization codes are very short-lived.</span></span> <span data-ttu-id="7c357-187">Normalmente, eles expiram depois de cerca de 10 minutos.</span><span class="sxs-lookup"><span data-stu-id="7c357-187">Typically, they expire after about 10 minutes.</span></span> |
| <span data-ttu-id="7c357-188">state</span><span class="sxs-lookup"><span data-stu-id="7c357-188">state</span></span> |<span data-ttu-id="7c357-189">Consulte a descrição completa na tabela na seção anterior.</span><span class="sxs-lookup"><span data-stu-id="7c357-189">See the full description in the table in the preceding section.</span></span> <span data-ttu-id="7c357-190">Se um parâmetro `state` estiver incluído na solicitação, o mesmo valor deverá aparecer na resposta.</span><span class="sxs-lookup"><span data-stu-id="7c357-190">If a `state` parameter is included in the request, the same value should appear in the response.</span></span> <span data-ttu-id="7c357-191">O aplicativo deve verificar se os valores `state` na solicitação e na resposta são idênticos.</span><span class="sxs-lookup"><span data-stu-id="7c357-191">The app should verify that the `state` values in the request and response are identical.</span></span> |

<span data-ttu-id="7c357-192">As respostas de erro também podem ser enviadas ao URI de redirecionamento, de modo que o aplicativo possa tratá-las adequadamente:</span><span class="sxs-lookup"><span data-stu-id="7c357-192">Error responses also can be sent to the redirect URI so that the app can handle them appropriately:</span></span>

```
GET urn:ietf:wg:oauth:2.0:oob?
error=access_denied
&error_description=The+user+has+cancelled+entering+self-asserted+information
&state=arbitrary_data_you_can_receive_in_the_response
```

| <span data-ttu-id="7c357-193">Parâmetro</span><span class="sxs-lookup"><span data-stu-id="7c357-193">Parameter</span></span> | <span data-ttu-id="7c357-194">Descrição</span><span class="sxs-lookup"><span data-stu-id="7c357-194">Description</span></span> |
| --- | --- |
| <span data-ttu-id="7c357-195">error</span><span class="sxs-lookup"><span data-stu-id="7c357-195">error</span></span> |<span data-ttu-id="7c357-196">Uma cadeia de caracteres de código de erro que você pode usar para classificar os tipos de erros que ocorrem.</span><span class="sxs-lookup"><span data-stu-id="7c357-196">An error code string that you can use to classify the types of errors that occur.</span></span> <span data-ttu-id="7c357-197">Você também pode usar a cadeia de caracteres para reagir a erros.</span><span class="sxs-lookup"><span data-stu-id="7c357-197">You also can use the string to react to errors.</span></span> |
| <span data-ttu-id="7c357-198">error_description</span><span class="sxs-lookup"><span data-stu-id="7c357-198">error_description</span></span> |<span data-ttu-id="7c357-199">Uma mensagem de erro específica que pode ajudar você a identificar a causa raiz de um erro de autenticação.</span><span class="sxs-lookup"><span data-stu-id="7c357-199">A specific error message that can help you identify the root cause of an authentication error.</span></span> |
| <span data-ttu-id="7c357-200">state</span><span class="sxs-lookup"><span data-stu-id="7c357-200">state</span></span> |<span data-ttu-id="7c357-201">Consulte a descrição completa na tabela anterior.</span><span class="sxs-lookup"><span data-stu-id="7c357-201">See the full description in the preceding table.</span></span> <span data-ttu-id="7c357-202">Se um parâmetro `state` estiver incluído na solicitação, o mesmo valor deverá aparecer na resposta.</span><span class="sxs-lookup"><span data-stu-id="7c357-202">If a `state` parameter is included in the request, the same value should appear in the response.</span></span> <span data-ttu-id="7c357-203">O aplicativo deve verificar se os valores `state` na solicitação e na resposta são idênticos.</span><span class="sxs-lookup"><span data-stu-id="7c357-203">The app should verify that the `state` values in the request and response are identical.</span></span> |

## <a name="2-get-a-token"></a><span data-ttu-id="7c357-204">2. Obter um token</span><span class="sxs-lookup"><span data-stu-id="7c357-204">2. Get a token</span></span>
<span data-ttu-id="7c357-205">Agora que você adquiriu um código de autorização, será possível resgatar o `code` de um token para o recurso desejado enviando uma solicitação POST para o ponto de extremidade `/token`.</span><span class="sxs-lookup"><span data-stu-id="7c357-205">Now that you've acquired an authorization code, you can redeem the `code` for a token to the intended resource by sending a POST request to the `/token` endpoint.</span></span> <span data-ttu-id="7c357-206">No Azure AD B2C, o único recurso para o qual você pode solicitar um token é a própria API Web de back-end do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="7c357-206">In Azure AD B2C, the only resource that you can request a token for is your app's own back-end web API.</span></span> <span data-ttu-id="7c357-207">A convenção usada para solicitar um token para si mesmo é usar a ID do cliente do aplicativo como o escopo:</span><span class="sxs-lookup"><span data-stu-id="7c357-207">The convention that's used for requesting a token to yourself is to use your app's client ID as the scope:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=authorization_code&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access&code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob

```

| <span data-ttu-id="7c357-208">Parâmetro</span><span class="sxs-lookup"><span data-stu-id="7c357-208">Parameter</span></span> | <span data-ttu-id="7c357-209">Obrigatório?</span><span class="sxs-lookup"><span data-stu-id="7c357-209">Required?</span></span> | <span data-ttu-id="7c357-210">Descrição</span><span class="sxs-lookup"><span data-stu-id="7c357-210">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="7c357-211">p</span><span class="sxs-lookup"><span data-stu-id="7c357-211">p</span></span> |<span data-ttu-id="7c357-212">Obrigatório</span><span class="sxs-lookup"><span data-stu-id="7c357-212">Required</span></span> |<span data-ttu-id="7c357-213">A política que foi usada para adquirir o código de autorização.</span><span class="sxs-lookup"><span data-stu-id="7c357-213">The policy that was used to acquire the authorization code.</span></span> <span data-ttu-id="7c357-214">Você não poderá usar uma política diferente nessa solicitação.</span><span class="sxs-lookup"><span data-stu-id="7c357-214">You cannot use a different policy in this request.</span></span> <span data-ttu-id="7c357-215">Observe que esse parâmetro é adicionado à *cadeia de caracteres de consulta*e não ao corpo do POST.</span><span class="sxs-lookup"><span data-stu-id="7c357-215">Note that you add this parameter to the *query string*, not in the POST body.</span></span> |
| <span data-ttu-id="7c357-216">client_id</span><span class="sxs-lookup"><span data-stu-id="7c357-216">client_id</span></span> |<span data-ttu-id="7c357-217">Obrigatório</span><span class="sxs-lookup"><span data-stu-id="7c357-217">Required</span></span> |<span data-ttu-id="7c357-218">A ID do aplicativo atribuída ao seu aplicativo no [portal do Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="7c357-218">The application ID assigned to your app in the [Azure portal](https://portal.azure.com).</span></span> |
| <span data-ttu-id="7c357-219">grant_type</span><span class="sxs-lookup"><span data-stu-id="7c357-219">grant_type</span></span> |<span data-ttu-id="7c357-220">Obrigatório</span><span class="sxs-lookup"><span data-stu-id="7c357-220">Required</span></span> |<span data-ttu-id="7c357-221">O tipo de concessão.</span><span class="sxs-lookup"><span data-stu-id="7c357-221">The type of grant.</span></span> <span data-ttu-id="7c357-222">Para o fluxo de código de autorização, o tipo de concessão deve ser `authorization_code`.</span><span class="sxs-lookup"><span data-stu-id="7c357-222">For the authorization code flow, the grant type must be `authorization_code`.</span></span> |
| <span data-ttu-id="7c357-223">scope</span><span class="sxs-lookup"><span data-stu-id="7c357-223">scope</span></span> |<span data-ttu-id="7c357-224">Recomendadas</span><span class="sxs-lookup"><span data-stu-id="7c357-224">Recommended</span></span> |<span data-ttu-id="7c357-225">Uma lista de escopos separados por espaços.</span><span class="sxs-lookup"><span data-stu-id="7c357-225">A space-separated list of scopes.</span></span> <span data-ttu-id="7c357-226">Um valor de escopo único indica ao Azure AD que ambas as permissões estão sendo solicitadas.</span><span class="sxs-lookup"><span data-stu-id="7c357-226">A single scope value indicates to Azure AD both of the permissions that are being requested.</span></span> <span data-ttu-id="7c357-227">O uso da ID do cliente como o escopo indica que seu aplicativo precisa de um token de acesso que possa ser usado em relação a seu próprio serviço ou API Web, representado pela mesma ID de cliente.</span><span class="sxs-lookup"><span data-stu-id="7c357-227">Using the client ID as the scope indicates that your app needs an access token that can be used against your own service or web API, represented by the same client ID.</span></span>  <span data-ttu-id="7c357-228">O escopo `offline_access` indica que seu aplicativo precisa de um token de atualização para acesso de longa duração a recursos.</span><span class="sxs-lookup"><span data-stu-id="7c357-228">The `offline_access` scope indicates that your app needs a refresh token for long-lived access to resources.</span></span>  <span data-ttu-id="7c357-229">Você também pode usar o escopo `openid` para solicitar um token de ID do Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="7c357-229">You also can use the `openid` scope to request an ID token from Azure AD B2C.</span></span> |
| <span data-ttu-id="7c357-230">código</span><span class="sxs-lookup"><span data-stu-id="7c357-230">code</span></span> |<span data-ttu-id="7c357-231">Obrigatório</span><span class="sxs-lookup"><span data-stu-id="7c357-231">Required</span></span> |<span data-ttu-id="7c357-232">O código de autorização que você adquiriu no primeiro segmento do fluxo.</span><span class="sxs-lookup"><span data-stu-id="7c357-232">The authorization code that you acquired in the first leg of the flow.</span></span> |
| <span data-ttu-id="7c357-233">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="7c357-233">redirect_uri</span></span> |<span data-ttu-id="7c357-234">Obrigatório</span><span class="sxs-lookup"><span data-stu-id="7c357-234">Required</span></span> |<span data-ttu-id="7c357-235">O URI de redirecionamento do aplicativo em que você recebeu o código de autorização.</span><span class="sxs-lookup"><span data-stu-id="7c357-235">The redirect URI of the application where you received the authorization code.</span></span> |

<span data-ttu-id="7c357-236">Uma resposta de token bem-sucedido tem esta aparência:</span><span class="sxs-lookup"><span data-stu-id="7c357-236">A successful token response looks like this:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="7c357-237">Parâmetro</span><span class="sxs-lookup"><span data-stu-id="7c357-237">Parameter</span></span> | <span data-ttu-id="7c357-238">Descrição</span><span class="sxs-lookup"><span data-stu-id="7c357-238">Description</span></span> |
| --- | --- |
| <span data-ttu-id="7c357-239">not_before</span><span class="sxs-lookup"><span data-stu-id="7c357-239">not_before</span></span> |<span data-ttu-id="7c357-240">A hora em que o token é considerado válido, nos valores de hora da época.</span><span class="sxs-lookup"><span data-stu-id="7c357-240">The time at which the token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="7c357-241">token_type</span><span class="sxs-lookup"><span data-stu-id="7c357-241">token_type</span></span> |<span data-ttu-id="7c357-242">O valor do tipo de token.</span><span class="sxs-lookup"><span data-stu-id="7c357-242">The token type value.</span></span> <span data-ttu-id="7c357-243">O único tipo com suporte do Azure AD é Portador</span><span class="sxs-lookup"><span data-stu-id="7c357-243">The only type that Azure AD supports is Bearer.</span></span> |
| <span data-ttu-id="7c357-244">access_token</span><span class="sxs-lookup"><span data-stu-id="7c357-244">access_token</span></span> |<span data-ttu-id="7c357-245">O JWT (Token Web JSON) assinado que você solicitou.</span><span class="sxs-lookup"><span data-stu-id="7c357-245">The signed JSON Web Token (JWT) that you requested.</span></span> |
| <span data-ttu-id="7c357-246">scope</span><span class="sxs-lookup"><span data-stu-id="7c357-246">scope</span></span> |<span data-ttu-id="7c357-247">Os escopos para os quais o token é válido.</span><span class="sxs-lookup"><span data-stu-id="7c357-247">The scopes that the token is valid for.</span></span> <span data-ttu-id="7c357-248">Você também pode usar os escopos para armazenar tokens em cache para uso posterior.</span><span class="sxs-lookup"><span data-stu-id="7c357-248">You also can use scopes to cache tokens for later use.</span></span> |
| <span data-ttu-id="7c357-249">expires_in</span><span class="sxs-lookup"><span data-stu-id="7c357-249">expires_in</span></span> |<span data-ttu-id="7c357-250">O período de tempo pelo qual o token é válido (em segundos).</span><span class="sxs-lookup"><span data-stu-id="7c357-250">The length of time that the token is valid (in seconds).</span></span> |
| <span data-ttu-id="7c357-251">refresh_token</span><span class="sxs-lookup"><span data-stu-id="7c357-251">refresh_token</span></span> |<span data-ttu-id="7c357-252">Um token de atualização do OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="7c357-252">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="7c357-253">O aplicativo pode usar esse token para adquirir tokens de acesso adicionais depois que o atual expirar.</span><span class="sxs-lookup"><span data-stu-id="7c357-253">The app can use this token to acquire additional tokens after the current token expires.</span></span> <span data-ttu-id="7c357-254">Os tokens de atualização têm uma vida longa.</span><span class="sxs-lookup"><span data-stu-id="7c357-254">Refresh tokens are long-lived.</span></span> <span data-ttu-id="7c357-255">Você pode usá-los para manter o acesso aos recursos por longos períodos de tempo.</span><span class="sxs-lookup"><span data-stu-id="7c357-255">You can use them to retain access to resources for extended periods of time.</span></span> <span data-ttu-id="7c357-256">Para obter mais informações, consulte a [Referência de token do Azure AD B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="7c357-256">For more information, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |

<span data-ttu-id="7c357-257">As respostas de erro tem esta aparência:</span><span class="sxs-lookup"><span data-stu-id="7c357-257">Error responses look like this:</span></span>

```
{
    "error": "access_denied",
    "error_description": "The user revoked access to the app.",
}
```

| <span data-ttu-id="7c357-258">Parâmetro</span><span class="sxs-lookup"><span data-stu-id="7c357-258">Parameter</span></span> | <span data-ttu-id="7c357-259">Descrição</span><span class="sxs-lookup"><span data-stu-id="7c357-259">Description</span></span> |
| --- | --- |
| <span data-ttu-id="7c357-260">error</span><span class="sxs-lookup"><span data-stu-id="7c357-260">error</span></span> |<span data-ttu-id="7c357-261">Uma cadeia de caracteres de código de erro que você pode usar para classificar os tipos de erros que ocorrem.</span><span class="sxs-lookup"><span data-stu-id="7c357-261">An error code string that you can use to classify the types of errors that occur.</span></span> <span data-ttu-id="7c357-262">Você também pode usar a cadeia de caracteres para reagir a erros.</span><span class="sxs-lookup"><span data-stu-id="7c357-262">You also can use the string to react to errors.</span></span> |
| <span data-ttu-id="7c357-263">error_description</span><span class="sxs-lookup"><span data-stu-id="7c357-263">error_description</span></span> |<span data-ttu-id="7c357-264">Uma mensagem de erro específica que pode ajudar você a identificar a causa raiz de um erro de autenticação.</span><span class="sxs-lookup"><span data-stu-id="7c357-264">A specific error message that can help you identify the root cause of an authentication error.</span></span> |

## <a name="3-use-the-token"></a><span data-ttu-id="7c357-265">3. Usar o token</span><span class="sxs-lookup"><span data-stu-id="7c357-265">3. Use the token</span></span>
<span data-ttu-id="7c357-266">Agora que adquiriu um token de acesso com êxito, você poderá usá-lo em solicitações às suas APIs Web de back-end incluindo-o no cabeçalho `Authorization`:</span><span class="sxs-lookup"><span data-stu-id="7c357-266">Now that you've successfully acquired an access token, you can use the token in requests to your back-end web APIs by including it in the `Authorization` header:</span></span>

```
GET /tasks
Host: https://mytaskwebapi.com
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
```

## <a name="4-refresh-the-token"></a><span data-ttu-id="7c357-267">4. Atualizar o token</span><span class="sxs-lookup"><span data-stu-id="7c357-267">4. Refresh the token</span></span>
<span data-ttu-id="7c357-268">Os tokens de acesso e os tokens de ID tem curta duração.</span><span class="sxs-lookup"><span data-stu-id="7c357-268">Access tokens and ID tokens are short-lived.</span></span> <span data-ttu-id="7c357-269">Depois que eles expirarem, você deverá atualizá-los para continuar a acessar recursos.</span><span class="sxs-lookup"><span data-stu-id="7c357-269">After they expire, you must refresh them to continue to access resources.</span></span> <span data-ttu-id="7c357-270">Para fazer isso, envie outra solicitação POST para o ponto de extremidade `/token`.</span><span class="sxs-lookup"><span data-stu-id="7c357-270">To do this, submit another POST request to the `/token` endpoint.</span></span> <span data-ttu-id="7c357-271">Dessa vez, forneça o `refresh_token` em vez do `code`:</span><span class="sxs-lookup"><span data-stu-id="7c357-271">This time, provide the `refresh_token` instead of the `code`:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=refresh_token&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access&refresh_token=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob
```

| <span data-ttu-id="7c357-272">Parâmetro</span><span class="sxs-lookup"><span data-stu-id="7c357-272">Parameter</span></span> | <span data-ttu-id="7c357-273">Obrigatório?</span><span class="sxs-lookup"><span data-stu-id="7c357-273">Required?</span></span> | <span data-ttu-id="7c357-274">Descrição</span><span class="sxs-lookup"><span data-stu-id="7c357-274">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="7c357-275">p</span><span class="sxs-lookup"><span data-stu-id="7c357-275">p</span></span> |<span data-ttu-id="7c357-276">Obrigatório</span><span class="sxs-lookup"><span data-stu-id="7c357-276">Required</span></span> |<span data-ttu-id="7c357-277">A política que foi usada para adquirir o token de atualização original.</span><span class="sxs-lookup"><span data-stu-id="7c357-277">The policy that was used to acquire the original refresh token.</span></span> <span data-ttu-id="7c357-278">Você não poderá usar uma política diferente nessa solicitação.</span><span class="sxs-lookup"><span data-stu-id="7c357-278">You cannot use a different policy in this request.</span></span> <span data-ttu-id="7c357-279">Observe que esse parâmetro é adicionado à *cadeia de caracteres de consulta*e não ao corpo do POST.</span><span class="sxs-lookup"><span data-stu-id="7c357-279">Note that you add this parameter to the *query string*, not in the POST body.</span></span> |
| <span data-ttu-id="7c357-280">client_id</span><span class="sxs-lookup"><span data-stu-id="7c357-280">client_id</span></span> |<span data-ttu-id="7c357-281">Recomendadas</span><span class="sxs-lookup"><span data-stu-id="7c357-281">Recommended</span></span> |<span data-ttu-id="7c357-282">A ID do aplicativo atribuída ao seu aplicativo no [portal do Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="7c357-282">The application ID assigned to your app in the [Azure portal](https://portal.azure.com).</span></span> |
| <span data-ttu-id="7c357-283">grant_type</span><span class="sxs-lookup"><span data-stu-id="7c357-283">grant_type</span></span> |<span data-ttu-id="7c357-284">Obrigatório</span><span class="sxs-lookup"><span data-stu-id="7c357-284">Required</span></span> |<span data-ttu-id="7c357-285">O tipo de concessão.</span><span class="sxs-lookup"><span data-stu-id="7c357-285">The type of grant.</span></span> <span data-ttu-id="7c357-286">Para este segmento do fluxo de código de autorização, o tipo de concessão deve ser `refresh_token`.</span><span class="sxs-lookup"><span data-stu-id="7c357-286">For this leg of the authorization code flow, the grant type must be `refresh_token`.</span></span> |
| <span data-ttu-id="7c357-287">scope</span><span class="sxs-lookup"><span data-stu-id="7c357-287">scope</span></span> |<span data-ttu-id="7c357-288">Recomendadas</span><span class="sxs-lookup"><span data-stu-id="7c357-288">Recommended</span></span> |<span data-ttu-id="7c357-289">Uma lista de escopos separados por espaços.</span><span class="sxs-lookup"><span data-stu-id="7c357-289">A space-separated list of scopes.</span></span> <span data-ttu-id="7c357-290">Um valor de escopo único indica ao Azure AD que ambas as permissões estão sendo solicitadas.</span><span class="sxs-lookup"><span data-stu-id="7c357-290">A single scope value indicates to Azure AD both of the permissions that are being requested.</span></span> <span data-ttu-id="7c357-291">O uso da ID do cliente como o escopo indica que seu aplicativo precisa de um token de acesso que possa ser usado em relação a seu próprio serviço ou API Web, representado pela mesma ID de cliente.</span><span class="sxs-lookup"><span data-stu-id="7c357-291">Using the client ID as the scope indicates that your app needs an access token that can be used against your own service or web API, represented by the same client ID.</span></span>  <span data-ttu-id="7c357-292">O escopo `offline_access` indica que o aplicativo precisará de um token de atualização para acessar os recursos de longa duração.</span><span class="sxs-lookup"><span data-stu-id="7c357-292">The `offline_access` scope indicates that your app will need a refresh token for long-lived access to resources.</span></span>  <span data-ttu-id="7c357-293">Você também pode usar o escopo `openid` para solicitar um token de ID do Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="7c357-293">You also can use the `openid` scope to request an ID token from Azure AD B2C.</span></span> |
| <span data-ttu-id="7c357-294">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="7c357-294">redirect_uri</span></span> |<span data-ttu-id="7c357-295">Opcional</span><span class="sxs-lookup"><span data-stu-id="7c357-295">Optional</span></span> |<span data-ttu-id="7c357-296">O URI de redirecionamento do aplicativo em que você recebeu o código de autorização.</span><span class="sxs-lookup"><span data-stu-id="7c357-296">The redirect URI of the application where you received the authorization code.</span></span> |
| <span data-ttu-id="7c357-297">refresh_token</span><span class="sxs-lookup"><span data-stu-id="7c357-297">refresh_token</span></span> |<span data-ttu-id="7c357-298">Obrigatório</span><span class="sxs-lookup"><span data-stu-id="7c357-298">Required</span></span> |<span data-ttu-id="7c357-299">O token de atualização original que você adquiriu na segunda ramificação do fluxo.</span><span class="sxs-lookup"><span data-stu-id="7c357-299">The original refresh token that you acquired in the second leg of the flow.</span></span> |

<span data-ttu-id="7c357-300">Uma resposta de token bem-sucedido tem esta aparência:</span><span class="sxs-lookup"><span data-stu-id="7c357-300">A successful token response looks like this:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="7c357-301">Parâmetro</span><span class="sxs-lookup"><span data-stu-id="7c357-301">Parameter</span></span> | <span data-ttu-id="7c357-302">Descrição</span><span class="sxs-lookup"><span data-stu-id="7c357-302">Description</span></span> |
| --- | --- |
| <span data-ttu-id="7c357-303">not_before</span><span class="sxs-lookup"><span data-stu-id="7c357-303">not_before</span></span> |<span data-ttu-id="7c357-304">A hora em que o token é considerado válido, nos valores de hora da época.</span><span class="sxs-lookup"><span data-stu-id="7c357-304">The time at which the token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="7c357-305">token_type</span><span class="sxs-lookup"><span data-stu-id="7c357-305">token_type</span></span> |<span data-ttu-id="7c357-306">O valor do tipo de token.</span><span class="sxs-lookup"><span data-stu-id="7c357-306">The token type value.</span></span> <span data-ttu-id="7c357-307">O único tipo com suporte do Azure AD é Portador</span><span class="sxs-lookup"><span data-stu-id="7c357-307">The only type that Azure AD supports is Bearer.</span></span> |
| <span data-ttu-id="7c357-308">access_token</span><span class="sxs-lookup"><span data-stu-id="7c357-308">access_token</span></span> |<span data-ttu-id="7c357-309">O JWT assinado que você solicitou.</span><span class="sxs-lookup"><span data-stu-id="7c357-309">The signed JWT that you requested.</span></span> |
| <span data-ttu-id="7c357-310">scope</span><span class="sxs-lookup"><span data-stu-id="7c357-310">scope</span></span> |<span data-ttu-id="7c357-311">Os escopos para os quais o token é válido.</span><span class="sxs-lookup"><span data-stu-id="7c357-311">The scopes that the token is valid for.</span></span> <span data-ttu-id="7c357-312">Você também pode usar os escopos para armazenar tokens em cache para uso posterior.</span><span class="sxs-lookup"><span data-stu-id="7c357-312">You also can use the scopes to cache tokens for later use.</span></span> |
| <span data-ttu-id="7c357-313">expires_in</span><span class="sxs-lookup"><span data-stu-id="7c357-313">expires_in</span></span> |<span data-ttu-id="7c357-314">O período de tempo pelo qual o token é válido (em segundos).</span><span class="sxs-lookup"><span data-stu-id="7c357-314">The length of time that the token is valid (in seconds).</span></span> |
| <span data-ttu-id="7c357-315">refresh_token</span><span class="sxs-lookup"><span data-stu-id="7c357-315">refresh_token</span></span> |<span data-ttu-id="7c357-316">Um token de atualização do OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="7c357-316">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="7c357-317">O aplicativo pode usar esse token para adquirir tokens de acesso adicionais depois que o atual expirar.</span><span class="sxs-lookup"><span data-stu-id="7c357-317">The app can use this token to acquire additional tokens after the current token expires.</span></span> <span data-ttu-id="7c357-318">Os tokens de atualização têm longa duração e podem ser usados para reter acesso a recursos por períodos estendidos.</span><span class="sxs-lookup"><span data-stu-id="7c357-318">Refresh tokens are long-lived, and can be used to retain access to resources for extended periods of time.</span></span> <span data-ttu-id="7c357-319">Para obter mais informações, consulte a [Referência de token do Azure AD B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="7c357-319">For more information, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |

<span data-ttu-id="7c357-320">As respostas de erro tem esta aparência:</span><span class="sxs-lookup"><span data-stu-id="7c357-320">Error responses look like this:</span></span>

```
{
    "error": "access_denied",
    "error_description": "The user revoked access to the app.",
}
```

| <span data-ttu-id="7c357-321">Parâmetro</span><span class="sxs-lookup"><span data-stu-id="7c357-321">Parameter</span></span> | <span data-ttu-id="7c357-322">Descrição</span><span class="sxs-lookup"><span data-stu-id="7c357-322">Description</span></span> |
| --- | --- |
| <span data-ttu-id="7c357-323">error</span><span class="sxs-lookup"><span data-stu-id="7c357-323">error</span></span> |<span data-ttu-id="7c357-324">Uma cadeia de caracteres de código de erro que você pode usar para classificar os tipos de erros que ocorrem.</span><span class="sxs-lookup"><span data-stu-id="7c357-324">An error code string that you can use to classify types of errors that occur.</span></span> <span data-ttu-id="7c357-325">Você também pode usar a cadeia de caracteres para reagir a erros.</span><span class="sxs-lookup"><span data-stu-id="7c357-325">You also can use the string to react to errors.</span></span> |
| <span data-ttu-id="7c357-326">error_description</span><span class="sxs-lookup"><span data-stu-id="7c357-326">error_description</span></span> |<span data-ttu-id="7c357-327">Uma mensagem de erro específica que pode ajudar você a identificar a causa raiz de um erro de autenticação.</span><span class="sxs-lookup"><span data-stu-id="7c357-327">A specific error message that can help you identify the root cause of an authentication error.</span></span> |

## <a name="use-your-own-azure-ad-b2c-directory"></a><span data-ttu-id="7c357-328">Use seu próprio diretório do Azure AD B2C</span><span class="sxs-lookup"><span data-stu-id="7c357-328">Use your own Azure AD B2C directory</span></span>
<span data-ttu-id="7c357-329">Para testar essas solicitações, conclua as etapas a seguir.</span><span class="sxs-lookup"><span data-stu-id="7c357-329">To try these requests yourself, complete the following steps.</span></span> <span data-ttu-id="7c357-330">Substitua os valores de exemplo que usamos neste artigo pelos seus próprios valores.</span><span class="sxs-lookup"><span data-stu-id="7c357-330">Replace the example values we used in this article with your own values.</span></span>

1. <span data-ttu-id="7c357-331">[Criar um diretório do Azure AD B2C](active-directory-b2c-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="7c357-331">[Create an Azure AD B2C directory](active-directory-b2c-get-started.md).</span></span> <span data-ttu-id="7c357-332">Use o nome do seu diretório nas solicitações.</span><span class="sxs-lookup"><span data-stu-id="7c357-332">Use the name of your directory in the requests.</span></span>
2. <span data-ttu-id="7c357-333">[Criar um aplicativo](active-directory-b2c-app-registration.md) para obter uma ID de aplicativo e um URI de redirecionamento.</span><span class="sxs-lookup"><span data-stu-id="7c357-333">[Create an application](active-directory-b2c-app-registration.md) to obtain an application ID and a redirect URI.</span></span> <span data-ttu-id="7c357-334">Inclua um cliente nativo em seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="7c357-334">Include a native client in your app.</span></span>
3. <span data-ttu-id="7c357-335">[Criar suas regras](active-directory-b2c-reference-policies.md) para obter os nomes de política.</span><span class="sxs-lookup"><span data-stu-id="7c357-335">[Create your policies](active-directory-b2c-reference-policies.md) to obtain your policy names.</span></span>

