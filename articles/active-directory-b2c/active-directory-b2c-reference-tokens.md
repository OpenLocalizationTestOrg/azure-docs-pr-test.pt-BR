---
title: "Azure Active Directory B2C: referência de token | Microsoft Docs"
description: "tipos de saudação de tokens emitidos no Azure Active Directory B2C"
services: active-directory-b2c
documentationcenter: 
author: dstrockis
manager: mbaldwin
editor: 
ms.assetid: 6df79878-65cb-4dfc-98bb-2b328055bc2e
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 3/17/2017
ms.author: dastrock
ms.openlocfilehash: 776bc88cc0308875ac6e576f19ac9edf50319d08
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="azure-ad-b2c-token-reference"></a><span data-ttu-id="4bdfe-103">Azure AD B2C: Referência de token</span><span class="sxs-lookup"><span data-stu-id="4bdfe-103">Azure AD B2C: Token reference</span></span>
<span data-ttu-id="4bdfe-104">O Azure AD B2C (Azure Active Directory B2C) emite vários tipos de tokens de segurança ao processar cada [fluxo de autenticação](active-directory-b2c-apps.md).</span><span class="sxs-lookup"><span data-stu-id="4bdfe-104">Azure Active Directory B2C (Azure AD B2C) emits several types of security tokens as it processes each [authentication flow](active-directory-b2c-apps.md).</span></span> <span data-ttu-id="4bdfe-105">Este documento descreve o formato de saudação, características de segurança e conteúdo de cada tipo de token.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-105">This document describes hello format, security characteristics, and contents of each type of token.</span></span>

## <a name="types-of-tokens"></a><span data-ttu-id="4bdfe-106">Tipos de tokens</span><span class="sxs-lookup"><span data-stu-id="4bdfe-106">Types of tokens</span></span>
<span data-ttu-id="4bdfe-107">B2C do Azure AD oferece suporte a saudação [protocolo de autorização do OAuth 2.0](active-directory-b2c-reference-protocols.md), que faz uso de ambos os tokens de acesso e tokens de atualização.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-107">Azure AD B2C supports hello [OAuth 2.0 authorization protocol](active-directory-b2c-reference-protocols.md), which makes use of both access tokens and refresh tokens.</span></span> <span data-ttu-id="4bdfe-108">Ele também suporta autenticação e entrar via [OpenID Connect](active-directory-b2c-reference-protocols.md), que apresenta um terceiro tipo de token: token de ID de saudação.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-108">It also supports authentication and sign-in via [OpenID Connect](active-directory-b2c-reference-protocols.md), which introduces a third type of token: hello ID token.</span></span> <span data-ttu-id="4bdfe-109">Cada um desses tokens é representado como um token de portador.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-109">Each of these tokens is represented as a bearer token.</span></span>

<span data-ttu-id="4bdfe-110">Um token de portador é o recurso protegido de um token de segurança leve que concede Olá tooa de acesso de "portador".</span><span class="sxs-lookup"><span data-stu-id="4bdfe-110">A bearer token is a lightweight security token that grants hello "bearer" access tooa protected resource.</span></span> <span data-ttu-id="4bdfe-111">portador Olá é qualquer parte que pode apresentar um token de saudação.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-111">hello bearer is any party that can present hello token.</span></span> <span data-ttu-id="4bdfe-112">Primeiro, o Azure AD deve autenticar uma parte para que ela possa receber um token de portador.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-112">Azure AD must first authenticate a party before it can receive a bearer token.</span></span> <span data-ttu-id="4bdfe-113">Mas se Olá necessárias não são as etapas seguidas token de saudação toosecure durante a transmissão e armazenamento, pode ser interceptado e usado por uma parte não pretendida.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-113">But if hello required steps are not taken toosecure hello token in transmission and storage, it can be intercepted and used by an unintended party.</span></span> <span data-ttu-id="4bdfe-114">Alguns tokens de segurança têm um mecanismo interno para impedir que partes não autorizadas os usem, mas os tokens de portador não têm esse mecanismo.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-114">Some security tokens have a built-in mechanism for preventing unauthorized parties from using them, but bearer tokens do not have this mechanism.</span></span> <span data-ttu-id="4bdfe-115">Eles devem ser transportados em um canal seguro, como segurança da camada de transporte (HTTPS).</span><span class="sxs-lookup"><span data-stu-id="4bdfe-115">They must be transported in a secure channel, such as transport layer security (HTTPS).</span></span>

<span data-ttu-id="4bdfe-116">Se um token de portador for transmitido fora de um canal seguro, um terceiro mal-intencionado pode usar um token de saudação do ataque man-in-the-middle tooacquire e usar o recurso de tooa protegido de acesso toogain não autorizado.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-116">If a bearer token is transmitted outside a secure channel, a malicious party can use a man-in-the-middle attack tooacquire hello token and use it toogain unauthorized access tooa protected resource.</span></span> <span data-ttu-id="4bdfe-117">Olá mesmos princípios de segurança se aplicam quando os tokens de portador são armazenados ou armazenado em cache para uso posterior.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-117">hello same security principles apply when bearer tokens are stored or cached for later use.</span></span> <span data-ttu-id="4bdfe-118">Sempre se certifique de que seu aplicativo transmita e armazene tokens de portador de maneira segura.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-118">Always ensure that your app transmits and stores bearer tokens in a secure manner.</span></span>

<span data-ttu-id="4bdfe-119">Para obter considerações de segurança adicionais sobre tokens de portador, consulte [RFC 6750 Seção 5](http://tools.ietf.org/html/rfc6750).</span><span class="sxs-lookup"><span data-stu-id="4bdfe-119">For additional security considerations on bearer tokens, see [RFC 6750 Section 5](http://tools.ietf.org/html/rfc6750).</span></span>

<span data-ttu-id="4bdfe-120">Muitos dos tokens de saudação do Azure AD B2C emite são implementados como tokens de web JSON (JWTs).</span><span class="sxs-lookup"><span data-stu-id="4bdfe-120">Many of hello tokens that Azure AD B2C issues are implemented as JSON web tokens (JWTs).</span></span> <span data-ttu-id="4bdfe-121">Um JWT é um meio compacto e protegido por URL de transferir informações entre duas partes.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-121">A JWT is a compact, URL-safe means of transferring information between two parties.</span></span> <span data-ttu-id="4bdfe-122">Os JWTs contêm informações conhecidas como declarações.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-122">JWTs contain information known as claims.</span></span> <span data-ttu-id="4bdfe-123">Esses são asserções de informações sobre o portador hello e assunto de saudação do token de saudação.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-123">These are assertions of information about hello bearer and hello subject of hello token.</span></span> <span data-ttu-id="4bdfe-124">declarações de saudação em JWTs são objetos JSON codificados e serializados para transmissão.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-124">hello claims in JWTs are JSON objects that are encoded and serialized for transmission.</span></span> <span data-ttu-id="4bdfe-125">Porque Olá JWTs emitidos pelo Azure AD B2C estiver assinado, mas não criptografado, você pode inspecionar facilmente conteúdo de saudação do toodebug JWT-lo.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-125">Because hello JWTs issued by Azure AD B2C are signed but not encrypted, you can easily inspect hello contents of a JWT toodebug it.</span></span> <span data-ttu-id="4bdfe-126">Estão disponíveis várias ferramentas que podem fazer isso, incluindo [calebb.net](http://calebb.net).</span><span class="sxs-lookup"><span data-stu-id="4bdfe-126">Several tools are available that can do this, including [calebb.net](http://calebb.net).</span></span> <span data-ttu-id="4bdfe-127">Para obter mais informações sobre JWTs, consulte muito[especificações de JWT](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html).</span><span class="sxs-lookup"><span data-stu-id="4bdfe-127">For more information about JWTs, refer too[JWT specifications](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html).</span></span>

### <a name="id-tokens"></a><span data-ttu-id="4bdfe-128">Tokens de ID</span><span class="sxs-lookup"><span data-stu-id="4bdfe-128">ID tokens</span></span>
<span data-ttu-id="4bdfe-129">Um token de ID é uma forma de token de segurança que seu aplicativo recebe de saudação do Azure AD B2C `authorize` e `token` pontos de extremidade.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-129">An ID token is a form of security token that your app receives from hello Azure AD B2C `authorize` and `token` endpoints.</span></span> <span data-ttu-id="4bdfe-130">Tokens de ID são representados como [JWTs](#types-of-tokens), e eles contêm declarações que você pode usar tooidentify usuários em seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-130">ID tokens are represented as [JWTs](#types-of-tokens), and they contain claims that you can use tooidentify users in your app.</span></span> <span data-ttu-id="4bdfe-131">Quando os tokens de ID são adquiridos de saudação `authorize` ponto de extremidade, elas geralmente são toosign usado em aplicativos de tooweb de usuários.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-131">When ID tokens are acquired from hello `authorize` endpoint, they are often used toosign in users tooweb applications.</span></span> <span data-ttu-id="4bdfe-132">Quando os tokens de ID são adquiridos de saudação `token` ponto de extremidade, eles podem ser enviados nas solicitações HTTP durante a comunicação entre dois componentes de saudação mesmo aplicativo ou serviço.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-132">When ID tokens are acquired from hello `token` endpoint, they can be sent in HTTP requests during communication between two components of hello same application or service.</span></span> <span data-ttu-id="4bdfe-133">Você pode usar declarações de saudação em um token de ID como desejar.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-133">You can use hello claims in an ID token as you see fit.</span></span> <span data-ttu-id="4bdfe-134">Elas são usadas toodisplay conta informações ou toomake acesso decisões de controle em um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-134">They are commonly used toodisplay account information or toomake access control decisions in an app.</span></span>  

<span data-ttu-id="4bdfe-135">Os tokens de ID são assinados, mas não são criptografados atualmente.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-135">ID tokens are signed, but they are not currently encrypted.</span></span> <span data-ttu-id="4bdfe-136">Quando seu aplicativo ou a API recebe um token de ID, ele deverá [validar assinatura Olá](#token-validation) tooprove Olá token é autêntica.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-136">When your app or API receives an ID token, it must [validate hello signature](#token-validation) tooprove that hello token is authentic.</span></span> <span data-ttu-id="4bdfe-137">Seu aplicativo ou a API também deve validar algumas declarações em Olá tooprove de token é válido.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-137">Your app or API must also validate a few claims in hello token tooprove that it is valid.</span></span> <span data-ttu-id="4bdfe-138">Dependendo dos requisitos do cenário de hello, declarações de saudação validadas por um aplicativo podem variar, mas seu aplicativo deve executar algumas [comuns validações de declaração](#token-validation) em cada cenário.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-138">Depending on hello scenario requirements, hello claims validated by an app can vary, but your app must perform some [common claim validations](#token-validation) in every scenario.</span></span>

#### <a name="sample-id-token"></a><span data-ttu-id="4bdfe-139">Token de ID de exemplo</span><span class="sxs-lookup"><span data-stu-id="4bdfe-139">Sample ID token</span></span>
```
// Line breaks for display purposes only

eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IklkVG9rZW5TaWduaW5nS2V5Q29udGFpbmVyIn0.
eyJleHAiOjE0NDIzNjAwMzQsIm5iZiI6MTQ0MjM1NjQzNCwidmVyIjoiMS4wIiwiaXNzIjoiaHR0cHM6Ly9s
b2dpbi5taWNyb3NvZnRvbmxpbmUuY29tLzc3NTUyN2ZmLTlhMzctNDMwNy04YjNkLWNjMzExZjU4ZDkyNS92
Mi4wLyIsImFjciI6ImIyY18xX3NpZ25faW5fc3RvY2siLCJzdWIiOiJOb3Qgc3VwcG9ydGVkIGN1cnJlbnRs
eS4gVXNlIG9pZCBjbGFpbS4iLCJhdWQiOiI5MGMwZmU2My1iY2YyLTQ0ZDUtOGZiNy1iOGJiYzBiMjlkYzYi
LCJpYXQiOjE0NDIzNTY0MzQsImF1dGhfdGltZSI6MTQ0MjM1NjQzNCwiaWRwIjoiZmFjZWJvb2suY29tIn0.
h-uiKcrT882pSKUtWCpj-_3b3vPs3bOWsESAhPMrL-iIIacKc6_uZrWxaWvIYkLra5czBcGKWrYwrAC8ZvQe
DJWZ50WXQrZYODEW1OUwzaD_I1f1HE0c2uvaWdGXBpDEVdsD3ExKaFlKGjFR2V7F-fPThkVDdKmkUDQX3bVc
yyj2V2nlCQ9jd7aGnokTPfLfpOjuIrTsAdPcGpe5hfSEuwYDmqOJjGs9Jp1f-eSNEiCDQOaTBSvr479L5ptP
XWeQZyX2SypN05Rjr05bjZh3j70ZUimiocfJzjibeoDCaQTz907yAg91WYuFOrQxb-5BaUoR7K-O7vxr2M-_
CQhoFA

```

### <a name="access-tokens"></a><span data-ttu-id="4bdfe-140">Tokens de acesso</span><span class="sxs-lookup"><span data-stu-id="4bdfe-140">Access tokens</span></span>
<span data-ttu-id="4bdfe-141">Um token de acesso também é uma forma de token de segurança que seu aplicativo recebe de saudação do Azure AD B2C `authorize` e `token` pontos de extremidade.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-141">An access token is also a form of security token that your app receives from hello Azure AD B2C `authorize` and `token` endpoints.</span></span> <span data-ttu-id="4bdfe-142">Tokens de acesso também são representados como [JWTs](#types-of-tokens), e eles contêm declarações que você pode usar o hello tooidentify concedida permissões tooyour APIs.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-142">Access tokens are also represented as [JWTs](#types-of-tokens), and they contain claims that you can use tooidentify hello granted permissions tooyour APIs.</span></span> <span data-ttu-id="4bdfe-143">Os tokens de acesso são assinados, mas não são criptografados atualmente.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-143">Access tokens are signed, but they are not currently encrypted.</span></span> <span data-ttu-id="4bdfe-144">Tokens de acesso devem ser servidores de tooAPIs e recursos de acesso de tooprovide usado.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-144">Access tokens should be used tooprovide access tooAPIs and resource servers.</span></span> <span data-ttu-id="4bdfe-145">Saiba mais sobre como muito[usar tokens de acesso](active-directory-b2c-access-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="4bdfe-145">Learn more about how too[use access tokens](active-directory-b2c-access-tokens.md).</span></span> 

<span data-ttu-id="4bdfe-146">Quando sua API recebe um token de acesso, ele deverá [validar assinatura Olá](#token-validation) tooprove Olá token é autêntica.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-146">When your API receives an access token, it must [validate hello signature](#token-validation) tooprove that hello token is authentic.</span></span> <span data-ttu-id="4bdfe-147">Sua API também deve validar algumas declarações em Olá tooprove de token é válido.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-147">Your API must also validate a few claims in hello token tooprove that it is valid.</span></span> <span data-ttu-id="4bdfe-148">Dependendo dos requisitos do cenário de hello, declarações de saudação validadas por um aplicativo podem variar, mas seu aplicativo deve executar algumas [comuns validações de declaração](#token-validation) em cada cenário.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-148">Depending on hello scenario requirements, hello claims validated by an app can vary, but your app must perform some [common claim validations](#token-validation) in every scenario.</span></span>

### <a name="claims-in-id-and-access-tokens"></a><span data-ttu-id="4bdfe-149">Declarações em tokens de ID e de acesso</span><span class="sxs-lookup"><span data-stu-id="4bdfe-149">Claims in ID and access tokens</span></span>
<span data-ttu-id="4bdfe-150">Quando você usa o Azure AD B2C, você tem controle refinado sobre o conteúdo da saudação de seus tokens.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-150">When you use Azure AD B2C, you have fine-grained control over hello content of your tokens.</span></span> <span data-ttu-id="4bdfe-151">Você pode configurar [políticas](active-directory-b2c-reference-policies.md) toosend determinado conjuntos de dados de usuário em declarações que seu aplicativo requer para suas operações.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-151">You can configure [policies](active-directory-b2c-reference-policies.md) toosend certain sets of user data in claims that your app requires for its operations.</span></span> <span data-ttu-id="4bdfe-152">Essas declarações podem incluir propriedades padrão como usuário Olá `displayName` e `emailAddress`.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-152">These claims can include standard properties such as hello user's `displayName` and `emailAddress`.</span></span> <span data-ttu-id="4bdfe-153">Também podem incluir [atributos de usuário personalizados](active-directory-b2c-reference-custom-attr.md) que você pode definir no diretório do B2C.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-153">They can also include [custom user attributes](active-directory-b2c-reference-custom-attr.md) that you can define in your B2C directory.</span></span> <span data-ttu-id="4bdfe-154">Cada token de ID e de acesso que você recebe contém um determinado conjunto de declarações relacionadas à segurança.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-154">Every ID and access token that you receive contains a certain set of security-related claims.</span></span> <span data-ttu-id="4bdfe-155">Os aplicativos podem usar essas declarações toosecurely autenticar usuários e solicitações.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-155">Your applications can use these claims toosecurely authenticate users and requests.</span></span>

<span data-ttu-id="4bdfe-156">Observe que Olá declarações nos tokens de ID não são retornadas em uma ordem específica.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-156">Note that hello claims in ID tokens are not returned in any particular order.</span></span> <span data-ttu-id="4bdfe-157">Além disso, novas declarações podem ser introduzidas em tokens de ID a qualquer momento.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-157">In addition, new claims can be introduced in ID tokens at any time.</span></span> <span data-ttu-id="4bdfe-158">Seu aplicativo não deve ser interrompido à medida que novas declarações são introduzidas.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-158">Your app should not break as new claims are introduced.</span></span> <span data-ttu-id="4bdfe-159">Aqui estão Olá declarações que você espera que tooexist nos tokens de acesso e ID emitidos pelo Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-159">Here are hello claims that you expect tooexist in ID and access tokens issued by Azure AD B2C.</span></span> <span data-ttu-id="4bdfe-160">As declarações adicionais são determinadas por políticas.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-160">Any additional claims are determined by policies.</span></span> <span data-ttu-id="4bdfe-161">Para praticar, tente inspecionando Olá declarações no token de ID do exemplo hello colando-o na [calebb.net](http://calebb.net).</span><span class="sxs-lookup"><span data-stu-id="4bdfe-161">For practice, try inspecting hello claims in hello sample ID token by pasting it into [calebb.net](http://calebb.net).</span></span> <span data-ttu-id="4bdfe-162">Mais detalhes podem ser encontradas no hello [OpenID Connect especificação](http://openid.net/specs/openid-connect-core-1_0.html).</span><span class="sxs-lookup"><span data-stu-id="4bdfe-162">Further details can be found in hello [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span></span>

| <span data-ttu-id="4bdfe-163">Nome</span><span class="sxs-lookup"><span data-stu-id="4bdfe-163">Name</span></span> | <span data-ttu-id="4bdfe-164">Declaração</span><span class="sxs-lookup"><span data-stu-id="4bdfe-164">Claim</span></span> | <span data-ttu-id="4bdfe-165">Valor de exemplo</span><span class="sxs-lookup"><span data-stu-id="4bdfe-165">Example value</span></span> | <span data-ttu-id="4bdfe-166">Descrição</span><span class="sxs-lookup"><span data-stu-id="4bdfe-166">Description</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="4bdfe-167">Público-alvo</span><span class="sxs-lookup"><span data-stu-id="4bdfe-167">Audience</span></span> |`aud` |`90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6` |<span data-ttu-id="4bdfe-168">Uma declaração de público identifica destinatário Olá pretendido do token de saudação.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-168">An audience claim identifies hello intended recipient of hello token.</span></span> <span data-ttu-id="4bdfe-169">Para o Azure AD B2C, público Olá é ID de aplicativo do seu aplicativo, como aplicativo tooyour atribuído no portal de registro de aplicativo hello.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-169">For Azure AD B2C, hello audience is your app's application ID, as assigned tooyour app in hello app registration portal.</span></span> <span data-ttu-id="4bdfe-170">Seu aplicativo deve validar esse valor e rejeitar o token de saudação se ela não corresponde.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-170">Your app should validate this value and reject hello token if it does not match.</span></span> |
| <span data-ttu-id="4bdfe-171">Emissor</span><span class="sxs-lookup"><span data-stu-id="4bdfe-171">Issuer</span></span> |`iss` |`https://login.microsoftonline.com/775527ff-9a37-4307-8b3d-cc311f58d925/v2.0/` |<span data-ttu-id="4bdfe-172">Esta declaração identifica Olá serviço de token segurança (STS) que cria e retorna um token de saudação.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-172">This claim identifies hello security token service (STS) that constructs and returns hello token.</span></span> <span data-ttu-id="4bdfe-173">Ele também identifica Olá diretório AD do Azure no qual Olá usuário foi autenticado.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-173">It also identifies hello Azure AD directory in which hello user was authenticated.</span></span> <span data-ttu-id="4bdfe-174">Seu aplicativo deve validar a declaração do emissor Olá tooensure Olá token veio do ponto de extremidade do hello Active Directory do Azure v 2.0.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-174">Your app should validate hello issuer claim tooensure that hello token came from hello Azure Active Directory v2.0 endpoint.</span></span> |
| <span data-ttu-id="4bdfe-175">Emitido em</span><span class="sxs-lookup"><span data-stu-id="4bdfe-175">Issued at</span></span> |`iat` |`1438535543` |<span data-ttu-id="4bdfe-176">Esta declaração é tempo de saudação em qual Olá token foi emitido, representado em vez de época.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-176">This claim is hello time at which hello token was issued, represented in epoch time.</span></span> |
| <span data-ttu-id="4bdfe-177">Hora de expiração</span><span class="sxs-lookup"><span data-stu-id="4bdfe-177">Expiration time</span></span> |`exp` |`1438539443` |<span data-ttu-id="4bdfe-178">Olá, declaração de tempo de expiração é tempo de saudação na qual Olá token se torna inválido, representado em vez de época.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-178">hello expiration time claim is hello time at which hello token becomes invalid, represented in epoch time.</span></span> <span data-ttu-id="4bdfe-179">Seu aplicativo deve usar essa validade de saudação tooverify declaração de vida útil do token hello.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-179">Your app should use this claim tooverify hello validity of hello token lifetime.</span></span> |
| <span data-ttu-id="4bdfe-180">Não antes de</span><span class="sxs-lookup"><span data-stu-id="4bdfe-180">Not before</span></span> |`nbf` |`1438535543` |<span data-ttu-id="4bdfe-181">Esta declaração é tempo de saudação na qual Olá token se torna válido, representado em vez de época.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-181">This claim is hello time at which hello token becomes valid, represented in epoch time.</span></span> <span data-ttu-id="4bdfe-182">Isso é geralmente Olá mesmo como Olá tempo Olá token foi emitido.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-182">This is usually hello same as hello time hello token was issued.</span></span> <span data-ttu-id="4bdfe-183">Seu aplicativo deve usar essa validade de saudação tooverify declaração de vida útil do token hello.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-183">Your app should use this claim tooverify hello validity of hello token lifetime.</span></span> |
| <span data-ttu-id="4bdfe-184">Versão</span><span class="sxs-lookup"><span data-stu-id="4bdfe-184">Version</span></span> |`ver` |`1.0` |<span data-ttu-id="4bdfe-185">Essa é a versão de saudação do token de ID hello, conforme definido pelo AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-185">This is hello version of hello ID token, as defined by Azure AD.</span></span> |
| <span data-ttu-id="4bdfe-186">Hash de código</span><span class="sxs-lookup"><span data-stu-id="4bdfe-186">Code hash</span></span> |`c_hash` |`SGCPtt01wxwfgnYZy2VJtQ` |<span data-ttu-id="4bdfe-187">Um hash de código é incluído em um token de ID apenas quando Olá token é emitido junto com um código de autorização OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-187">A code hash is included in an ID token only when hello token is issued together with an OAuth 2.0 authorization code.</span></span> <span data-ttu-id="4bdfe-188">Um hash de código pode ser usado toovalidate Olá autenticidade de um código de autorização.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-188">A code hash can be used toovalidate hello authenticity of an authorization code.</span></span> <span data-ttu-id="4bdfe-189">Para obter mais detalhes sobre como tooperform dessa validação, consulte Olá [OpenID Connect especificação](http://openid.net/specs/openid-connect-core-1_0.html).</span><span class="sxs-lookup"><span data-stu-id="4bdfe-189">For more details on how tooperform this validation, see hello [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span></span>  |
| <span data-ttu-id="4bdfe-190">Hash de token de acesso</span><span class="sxs-lookup"><span data-stu-id="4bdfe-190">Access token hash</span></span> |`at_hash` |`SGCPtt01wxwfgnYZy2VJtQ` |<span data-ttu-id="4bdfe-191">Um hash de token de acesso é incluído em um token de ID apenas quando Olá token é emitido junto com um token de acesso OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-191">An access token hash is included in an ID token only when hello token is issued together with an OAuth 2.0 access token.</span></span> <span data-ttu-id="4bdfe-192">Um hash de token de acesso pode ser usado toovalidate Olá autenticidade de um token de acesso.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-192">An access token hash can be used toovalidate hello authenticity of an access token.</span></span> <span data-ttu-id="4bdfe-193">Para obter mais detalhes sobre como tooperform dessa validação, consulte Olá [especificação OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html)</span><span class="sxs-lookup"><span data-stu-id="4bdfe-193">For more details on how tooperform this validation, see hello [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html)</span></span>  |
| <span data-ttu-id="4bdfe-194">Nonce</span><span class="sxs-lookup"><span data-stu-id="4bdfe-194">Nonce</span></span> |`nonce` |`12345` |<span data-ttu-id="4bdfe-195">Um valor de uso único é que uma estratégia usada toomitigate ataques de reprodução de token.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-195">A nonce is a strategy used toomitigate token replay attacks.</span></span> <span data-ttu-id="4bdfe-196">Seu aplicativo pode especificar um valor de uso único em uma solicitação de autorização usando Olá `nonce` parâmetro de consulta.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-196">Your app can specify a nonce in an authorization request by using hello `nonce` query parameter.</span></span> <span data-ttu-id="4bdfe-197">valor de saudação fornecer na solicitação de saudação será emitido sem modificações no hello `nonce` de declaração de um token de ID.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-197">hello value you provide in hello request will be emitted unmodified in hello `nonce` claim of an ID token only.</span></span> <span data-ttu-id="4bdfe-198">Isso permite que o valor do aplicativo tooverify Olá com valor de saudação que ele especificado na solicitação de saudação, que associa a sessão de saudação do aplicativo com um token de ID especificado.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-198">This allows your app tooverify hello value against hello value it specified on hello request, which associates hello app's session with a given ID token.</span></span> <span data-ttu-id="4bdfe-199">Seu aplicativo deve executar essa validação durante o processo de validação de token de ID de saudação.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-199">Your app should perform this validation during hello ID token validation process.</span></span> |
| <span data-ttu-id="4bdfe-200">Assunto</span><span class="sxs-lookup"><span data-stu-id="4bdfe-200">Subject</span></span> |`sub` |`884408e1-2918-4cz0-b12d-3aa027d7563b` |<span data-ttu-id="4bdfe-201">Este é o principal Olá sobre quais Olá token declara informações, como usuário de saudação de um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-201">This is hello principal about which hello token asserts information, such as hello user of an app.</span></span> <span data-ttu-id="4bdfe-202">Esse valor é imutável e não pode ser reatribuído nem reutilizado.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-202">This value is immutable and cannot be reassigned or reused.</span></span> <span data-ttu-id="4bdfe-203">Pode ser usado tooperform verificações de autorização com segurança, como quando o token hello está tooaccess usado um recurso.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-203">It can be used tooperform authorization checks safely, such as when hello token is used tooaccess a resource.</span></span> <span data-ttu-id="4bdfe-204">Por padrão, declaração do assunto Olá é preenchida com a ID de objeto de saudação do usuário Olá no diretório de saudação.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-204">By default, hello subject claim is populated with hello object ID of hello user in hello directory.</span></span> <span data-ttu-id="4bdfe-205">mais, consulte toolearn [do Azure Active Directory B2C: Token de sessão e configuração de logon único](active-directory-b2c-token-session-sso.md).</span><span class="sxs-lookup"><span data-stu-id="4bdfe-205">toolearn more, see [Azure Active Directory B2C: Token, session, and single sign-on configuration](active-directory-b2c-token-session-sso.md).</span></span> |
| <span data-ttu-id="4bdfe-206">Referência de classe de contexto de autenticação</span><span class="sxs-lookup"><span data-stu-id="4bdfe-206">Authentication context class reference</span></span> |`acr` |<span data-ttu-id="4bdfe-207">Não aplicável</span><span class="sxs-lookup"><span data-stu-id="4bdfe-207">Not applicable</span></span> |<span data-ttu-id="4bdfe-208">Não usado no momento, exceto no caso de saudação de políticas mais antigos.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-208">Not used currently, except in hello case of older policies.</span></span> <span data-ttu-id="4bdfe-209">mais, consulte toolearn [do Azure Active Directory B2C: Token de sessão e configuração de logon único](active-directory-b2c-token-session-sso.md).</span><span class="sxs-lookup"><span data-stu-id="4bdfe-209">toolearn more, see [Azure Active Directory B2C: Token, session, and single sign-on configuration](active-directory-b2c-token-session-sso.md).</span></span> |
| <span data-ttu-id="4bdfe-210">Política de estrutura confiável</span><span class="sxs-lookup"><span data-stu-id="4bdfe-210">Trust framework policy</span></span> |`tfp` |`b2c_1_sign_in` |<span data-ttu-id="4bdfe-211">Este é o nome de saudação do política Olá de token de ID de saudação tooacquire usado.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-211">This is hello name of hello policy that was used tooacquire hello ID token.</span></span> |
| <span data-ttu-id="4bdfe-212">Hora da autenticação</span><span class="sxs-lookup"><span data-stu-id="4bdfe-212">Authentication time</span></span> |`auth_time` |`1438535543` |<span data-ttu-id="4bdfe-213">Esta declaração é tempo de saudação em que um usuário último inserido as credenciais, representado em vez de época.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-213">This claim is hello time at which a user last entered credentials, represented in epoch time.</span></span> |

### <a name="refresh-tokens"></a><span data-ttu-id="4bdfe-214">Tokens de atualização</span><span class="sxs-lookup"><span data-stu-id="4bdfe-214">Refresh tokens</span></span>
<span data-ttu-id="4bdfe-215">Atualizar tokens são tokens de segurança que seu aplicativo pode usar os novos tokens de ID tooacquire tokens de acesso e em um fluxo de OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-215">Refresh tokens are security tokens that your app can use tooacquire new ID tokens and access tokens in an OAuth 2.0 flow.</span></span> <span data-ttu-id="4bdfe-216">Eles fornecem seu aplicativo com tooresources de acesso de longo prazo em nome dos usuários sem a necessidade de interação com os usuários.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-216">They provide your app with long-term access tooresources on behalf of users without requiring interaction with those users.</span></span>

<span data-ttu-id="4bdfe-217">tooreceive um token de atualização em uma resposta de token, seu aplicativo deve solicitar Olá `offline_acesss` escopo.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-217">tooreceive a refresh token in a token response, your app must request hello `offline_acesss` scope.</span></span> <span data-ttu-id="4bdfe-218">toolearn mais sobre Olá `offline_access` escopo, consulte toohello [referência de protocolo do Azure AD B2C](active-directory-b2c-reference-protocols.md).</span><span class="sxs-lookup"><span data-stu-id="4bdfe-218">toolearn more about hello `offline_access` scope, refer toohello [Azure AD B2C protocol reference](active-directory-b2c-reference-protocols.md).</span></span>

<span data-ttu-id="4bdfe-219">Tokens de atualização são e sempre será, aplicativo tooyour completamente opaco.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-219">Refresh tokens are, and will always be, completely opaque tooyour app.</span></span> <span data-ttu-id="4bdfe-220">Eles são emitidos pelo Azure AD e só podem ser inspecionados e interpretados por ele.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-220">They are issued by Azure AD and can be inspected and interpreted only by Azure AD.</span></span> <span data-ttu-id="4bdfe-221">Eles são vida longa, mas seu aplicativo não deve ser escrito com expectativa de saudação que um token de atualização irão durar por um período de tempo específico.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-221">They are long-lived, but your app should not be written with hello expectation that a refresh token will last for a specific period of time.</span></span> <span data-ttu-id="4bdfe-222">Os tokens de atualização podem ser invalidados a qualquer momento por vários motivos.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-222">Refresh tokens can be invalidated at any moment for a variety of reasons.</span></span> <span data-ttu-id="4bdfe-223">Olá somente modo para tooknow seu aplicativo se um token de atualização é válido é tooattempt tooredeem-lo fazendo uma solicitação de token de tooAzure AD.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-223">hello only way for your app tooknow if a refresh token is valid is tooattempt tooredeem it by making a token request tooAzure AD.</span></span>

<span data-ttu-id="4bdfe-224">Quando você resgatar um token de atualização de um novo token (e se seu aplicativo tiver sido concedido Olá `offline_access` escopo), você receberá um novo token de atualização na resposta de token hello.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-224">When you redeem a refresh token for a new token (and if your app has been granted hello `offline_access` scope), you will receive a new refresh token in hello token response.</span></span> <span data-ttu-id="4bdfe-225">Você deve salvar o token de atualização Olá emitido recentemente.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-225">You should save hello newly issued refresh token.</span></span> <span data-ttu-id="4bdfe-226">Ele deve substituir o token de atualização de saudação usado anteriormente na solicitação de saudação.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-226">It should replace hello refresh token you previously used in hello request.</span></span> <span data-ttu-id="4bdfe-227">Isso ajuda a garantir que seus tokens de atualização permaneçam válidos pelo máximo tempo possível.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-227">This helps guarantee that your refresh tokens remain valid for as long as possible.</span></span>

## <a name="token-validation"></a><span data-ttu-id="4bdfe-228">Validação de token</span><span class="sxs-lookup"><span data-stu-id="4bdfe-228">Token validation</span></span>
<span data-ttu-id="4bdfe-229">toovalidate um token, seu aplicativo deve verificar assinatura hello e declarações do token de saudação.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-229">toovalidate a token, your app should check both hello signature and claims of hello token.</span></span>

<span data-ttu-id="4bdfe-230">Muitas bibliotecas de software livre estão disponíveis para validação de JWTs, dependendo da linguagem preferencial.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-230">Many open source libraries are available for validating JWTs, depending on your preferred language.</span></span> <span data-ttu-id="4bdfe-231">É recomendável explorar essas opções em vez de implementar sua própria lógica de validação.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-231">We recommend that you explore those options rather than implement your own validation logic.</span></span> <span data-ttu-id="4bdfe-232">Olá informações neste guia podem ajudá-lo a aprender como tooproperly usar essas bibliotecas.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-232">hello information in this guide can help you learn how tooproperly use those libraries.</span></span>

### <a name="validate-hello-signature"></a><span data-ttu-id="4bdfe-233">Validar assinatura Olá</span><span class="sxs-lookup"><span data-stu-id="4bdfe-233">Validate hello signature</span></span>
<span data-ttu-id="4bdfe-234">Um JWT contém três segmentos, separados por Olá `.` caracteres.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-234">A JWT contains three segments, separated by hello `.` character.</span></span> <span data-ttu-id="4bdfe-235">Olá primeiro segmento é Olá *cabeçalho*, Olá segundo é hello *corpo*, e Olá terceiro é hello *assinatura*.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-235">hello first segment is hello *header*, hello second is hello *body*, and hello third is hello *signature*.</span></span> <span data-ttu-id="4bdfe-236">segmento de assinatura Olá pode ser usado toovalidate Olá autenticidade do token Olá para que ela pode ser confiável pelo seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-236">hello signature segment can be used toovalidate hello authenticity of hello token so that it can be trusted by your app.</span></span>

<span data-ttu-id="4bdfe-237">Os tokens do Azure AD B2C são assinados usando algoritmos de criptografia assimétrica padrão do setor, como o RSA 256.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-237">Azure AD B2C tokens are signed by using industry-standard asymmetric encryption algorithms, such as RSA 256.</span></span> <span data-ttu-id="4bdfe-238">cabeçalho de saudação do token Olá contém informações sobre chave hello e token de saudação toosign do método de criptografia usado:</span><span class="sxs-lookup"><span data-stu-id="4bdfe-238">hello header of hello token contains information about hello key and encryption method used toosign hello token:</span></span>

```
{
        "typ": "JWT",
        "alg": "RS256",
        "kid": "GvnPApfWMdLRi8PDmisFn7bprKg"
}
```

<span data-ttu-id="4bdfe-239">Olá `alg` declaração indica o algoritmo de saudação que era o token de saudação toosign usado.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-239">hello `alg` claim indicates hello algorithm that was used toosign hello token.</span></span> <span data-ttu-id="4bdfe-240">Olá `kid` declaração indica Olá determinada chave pública que foi usado toosign token de saudação.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-240">hello `kid` claim indicates hello particular public key that was used toosign hello token.</span></span>

<span data-ttu-id="4bdfe-241">A qualquer momento, o Azure AD pode assinar um token usando qualquer opção de determinado conjunto de pares de chaves públicas-privadas.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-241">At any given time, Azure AD can sign a token by using any one of a certain set of public-private key pairs.</span></span> <span data-ttu-id="4bdfe-242">AD do Azure gira possível o conjunto de chaves Olá periodicamente, para que seu aplicativo deve ser gravado toohandle esses chave muda automaticamente.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-242">Azure AD rotates hello possible set of keys periodically, so your app should be written toohandle those key changes automatically.</span></span> <span data-ttu-id="4bdfe-243">Um toocheck frequência razoável para atualizações toohello pública as chaves usadas pelo AD do Azure é a cada 24 horas.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-243">A reasonable frequency toocheck for updates toohello public keys used by Azure AD is every 24 hours.</span></span>

<span data-ttu-id="4bdfe-244">O Azure AD B2C tem um ponto de extremidade de metadados OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-244">Azure AD B2C has an OpenID Connect metadata endpoint.</span></span> <span data-ttu-id="4bdfe-245">Isso permite que aplicativos informações toofetch sobre o Azure AD B2C em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-245">This allows apps toofetch information about Azure AD B2C at runtime.</span></span> <span data-ttu-id="4bdfe-246">Essas informações incluem pontos de extremidade, conteúdos de token e chaves de assinatura de token.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-246">This information includes endpoints, token contents, and token signing keys.</span></span> <span data-ttu-id="4bdfe-247">O diretório B2C contém um documento de metadados JSON para cada política.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-247">Your B2C directory contains a JSON metadata document for each policy.</span></span> <span data-ttu-id="4bdfe-248">Por exemplo, o documento de metadados Olá para Olá `b2c_1_sign_in` política no `fabrikamb2c.onmicrosoft.com` está localizado em:</span><span class="sxs-lookup"><span data-stu-id="4bdfe-248">For example, hello metadata document for hello `b2c_1_sign_in` policy in  `fabrikamb2c.onmicrosoft.com` is located at:</span></span>

```
https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=b2c_1_sign_in
```

<span data-ttu-id="4bdfe-249">`fabrikamb2c.onmicrosoft.com`diretório Olá B2C usada usuário Olá tooauthenticate e `b2c_1_sign_in` política Olá usada tooacquire token de saudação.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-249">`fabrikamb2c.onmicrosoft.com` is hello B2C directory used tooauthenticate hello user, and `b2c_1_sign_in` is hello policy used tooacquire hello token.</span></span> <span data-ttu-id="4bdfe-250">toodetermine qual política foi toosign usado um token (e onde toogo toofetch Olá metadados), você tem duas opções.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-250">toodetermine which policy was used toosign a token (and where toogo toofetch hello metadata), you have two options.</span></span> <span data-ttu-id="4bdfe-251">Primeiro, o nome da política hello está incluído no hello `acr` declaração no token de saudação.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-251">First, hello policy name is included in hello `acr` claim in hello token.</span></span> <span data-ttu-id="4bdfe-252">Você pode analisar declarações fora do corpo de saudação do hello JWT pelo corpo Olá decodificação de base 64 e saudação de desserialização JSON de cadeia de caracteres resultante.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-252">You can parse claims out of hello body of hello JWT by base-64 decoding hello body and deserializing hello JSON string that results.</span></span> <span data-ttu-id="4bdfe-253">Olá `acr` declaração será o nome de saudação do política Olá de token de saudação tooissue usado.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-253">hello `acr` claim will be hello name of hello policy that was used tooissue hello token.</span></span>  <span data-ttu-id="4bdfe-254">A outra opção é a política de saudação tooencode no valor Olá Olá `state` parâmetro quando você emite a solicitação de saudação e decodificá-la toodetermine qual política foi usada.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-254">Your other option is tooencode hello policy in hello value of hello `state` parameter when you issue hello request, and then decode it toodetermine which policy was used.</span></span> <span data-ttu-id="4bdfe-255">Ambos os métodos são válidos.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-255">Either method is valid.</span></span>

<span data-ttu-id="4bdfe-256">documento de metadados de saudação é um objeto JSON que contém várias informações úteis.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-256">hello metadata document is a JSON object that contains several useful pieces of information.</span></span> <span data-ttu-id="4bdfe-257">Esses incluem o local de saudação de saudação de pontos de extremidade necessários tooperform autenticação OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-257">These include hello location of hello endpoints required tooperform OpenID Connect authentication.</span></span> <span data-ttu-id="4bdfe-258">Eles também incluem `jwks_uri`, que fornece o local de saudação do conjunto de saudação de chaves públicas que são tokens de toosign usado.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-258">They also include `jwks_uri`, which gives hello location of hello set of public keys that are used toosign tokens.</span></span> <span data-ttu-id="4bdfe-259">Esse local é fornecido aqui, mas é melhor local de saudação toofetch dinamicamente usando o documento de metadados hello e analisando `jwks_uri`:</span><span class="sxs-lookup"><span data-stu-id="4bdfe-259">That location is provided here, but it is best toofetch hello location dynamically by using hello metadata document and parsing out `jwks_uri`:</span></span>

```
https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/discovery/v2.0/keys?p=b2c_1_sign_in
```

<span data-ttu-id="4bdfe-260">documento JSON Olá localizado na seguinte URL contém todos os Olá informações de chave pública em uso em um momento específico.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-260">hello JSON document located at this URL contains all hello public key information in use at a particular moment.</span></span> <span data-ttu-id="4bdfe-261">Seu aplicativo pode usar Olá `kid` um token específico de declaração em Olá JWT cabeçalho tooselect Olá chave pública no documento JSON de saudação toosign usado.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-261">Your app can use hello `kid` claim in hello JWT header tooselect hello public key in hello JSON document that is used toosign a particular token.</span></span> <span data-ttu-id="4bdfe-262">Ele pode executar a validação de assinatura usando a chave pública correta de saudação e algoritmo indicado hello.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-262">It can then perform signature validation by using hello correct public key and hello indicated algorithm.</span></span>

<span data-ttu-id="4bdfe-263">Uma descrição de como validação de assinatura tooperform está fora do escopo Olá deste documento.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-263">A description of how tooperform signature validation is outside hello scope of this document.</span></span> <span data-ttu-id="4bdfe-264">Muitas bibliotecas de código-fonte aberto são toohelp disponível com esse se você precisa dele.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-264">Many open source libraries are available toohelp you with this if you need it.</span></span>

### <a name="validate-hello-claims"></a><span data-ttu-id="4bdfe-265">Validar Olá declarações</span><span class="sxs-lookup"><span data-stu-id="4bdfe-265">Validate hello claims</span></span>
<span data-ttu-id="4bdfe-266">Quando seu aplicativo ou a API recebe um token de ID, ele também deve executar diversas verificações em relação a saudação declarações no token de ID de saudação.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-266">When your app or API receives an ID token, it should also perform several checks against hello claims in hello ID token.</span></span> <span data-ttu-id="4bdfe-267">Elas incluem, mas sem limitação:</span><span class="sxs-lookup"><span data-stu-id="4bdfe-267">These include, but are not limited to:</span></span>

* <span data-ttu-id="4bdfe-268">Olá **público** de declaração: Isso verifica esse token de ID Olá foi pretendido toobe dado aplicativo tooyour.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-268">hello **audience** claim: This verifies that hello ID token was intended toobe given tooyour app.</span></span>
* <span data-ttu-id="4bdfe-269">Olá **não antes** e **tempo de expiração** declarações: esses verificar esse token de ID de saudação não expirou.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-269">hello **not before** and **expiration time** claims: These verify that hello ID token has not expired.</span></span>
* <span data-ttu-id="4bdfe-270">Olá **emissor** de declaração: Isso verifica esse token Olá foi emitido tooyour aplicativo pelo AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-270">hello **issuer** claim: This verifies that hello token was issued tooyour app by Azure AD.</span></span>
* <span data-ttu-id="4bdfe-271">Olá **nonce**: esta é uma estratégia de mitigação de ataque de reprodução de token.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-271">hello **nonce**: This is a strategy for token replay attack mitigation.</span></span>

<span data-ttu-id="4bdfe-272">Para obter uma lista completa de validações de seu aplicativo deve executar, consulte toohello [OpenID Connect especificação](https://openid.net).</span><span class="sxs-lookup"><span data-stu-id="4bdfe-272">For a full list of validations your app should perform, refer toohello [OpenID Connect specification](https://openid.net).</span></span> <span data-ttu-id="4bdfe-273">Detalhes dos valores esperados de saudação para essas declarações são incluídos no hello anterior [token seção](#types-of-tokens).</span><span class="sxs-lookup"><span data-stu-id="4bdfe-273">Details of hello expected values for these claims are included in hello preceding [token section](#types-of-tokens).</span></span>  

## <a name="token-lifetimes"></a><span data-ttu-id="4bdfe-274">Tempos de vida do token</span><span class="sxs-lookup"><span data-stu-id="4bdfe-274">Token lifetimes</span></span>
<span data-ttu-id="4bdfe-275">Olá tempos de vida de token a seguir é fornecidos toofurther seu conhecimento.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-275">hello following token lifetimes are provided toofurther your knowledge.</span></span> <span data-ttu-id="4bdfe-276">Eles poderão ajudá-lo quando você desenvolver e depurar aplicativos.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-276">They can help you when you develop and debug apps.</span></span> <span data-ttu-id="4bdfe-277">Observe que os aplicativos não devem ser gravados tooexpect qualquer constante de tooremain esses tempos de vida.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-277">Note that your apps should not be written tooexpect any of these lifetimes tooremain constant.</span></span> <span data-ttu-id="4bdfe-278">Eles podem e vão ser alterados.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-278">They can and will change.</span></span> <span data-ttu-id="4bdfe-279">Leia mais sobre Olá [personalização de vidas úteis de token](active-directory-b2c-token-session-sso.md) no Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-279">Read more about hello [customization of token lifetimes](active-directory-b2c-token-session-sso.md) in Azure AD B2C.</span></span>

| <span data-ttu-id="4bdfe-280">Token</span><span class="sxs-lookup"><span data-stu-id="4bdfe-280">Token</span></span> | <span data-ttu-id="4bdfe-281">Tempo de vida</span><span class="sxs-lookup"><span data-stu-id="4bdfe-281">Lifetime</span></span> | <span data-ttu-id="4bdfe-282">Descrição</span><span class="sxs-lookup"><span data-stu-id="4bdfe-282">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="4bdfe-283">Tokens de ID</span><span class="sxs-lookup"><span data-stu-id="4bdfe-283">ID tokens</span></span> |<span data-ttu-id="4bdfe-284">Uma hora</span><span class="sxs-lookup"><span data-stu-id="4bdfe-284">One hour</span></span> |<span data-ttu-id="4bdfe-285">Tokens de ID normalmente são válidos por uma hora.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-285">ID tokens are typically valid for an hour.</span></span> <span data-ttu-id="4bdfe-286">Seu aplicativo web pode usar esse tempo de vida toomaintain seus próprio sessões com os usuários (recomendados).</span><span class="sxs-lookup"><span data-stu-id="4bdfe-286">Your web app can use this lifetime toomaintain its own sessions with users (recommended).</span></span> <span data-ttu-id="4bdfe-287">Também é possível escolher um tempo de vida de sessão diferente.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-287">You can also choose a different session lifetime.</span></span> <span data-ttu-id="4bdfe-288">Se seu aplicativo precisa tooget um novo token de ID, ele precisa simplesmente toomake um novo tooAzure de solicitação de entrada AD.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-288">If your app needs tooget a new ID token, it simply needs toomake a new sign-in request tooAzure AD.</span></span> <span data-ttu-id="4bdfe-289">Se um usuário tiver uma sessão do navegador válido com o Azure AD, esse usuário não pode ser tooenter necessárias credenciais novamente.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-289">If a user has a valid browser session with Azure AD, that user might not be required tooenter credentials again.</span></span> |
| <span data-ttu-id="4bdfe-290">Tokens de atualização</span><span class="sxs-lookup"><span data-stu-id="4bdfe-290">Refresh tokens</span></span> |<span data-ttu-id="4bdfe-291">Backup too14 dias</span><span class="sxs-lookup"><span data-stu-id="4bdfe-291">Up too14 days</span></span> |<span data-ttu-id="4bdfe-292">Um único token de atualização é válido para um máximo de 14 dias.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-292">A single refresh token is valid for a maximum of 14 days.</span></span> <span data-ttu-id="4bdfe-293">No entanto, um token de atualização pode se tornar inválido a qualquer momento por vários motivos.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-293">However, a refresh token can become invalid at any time for a number of reasons.</span></span> <span data-ttu-id="4bdfe-294">Seu aplicativo deve continuar tootry toouse um token de atualização até que a falha de solicitação de saudação ou seu aplicativo substitui o token de atualização de saudação com um novo.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-294">Your app should continue tootry toouse a refresh token until hello request fails, or until your app replaces hello refresh token with a new one.</span></span> <span data-ttu-id="4bdfe-295">Um token de atualização também pode se tornar inválido se 90 dias passaram desde que o usuário Olá última as credenciais inseridas.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-295">A refresh token can also become invalid if 90 days have passed since hello user last entered credentials.</span></span> |
| <span data-ttu-id="4bdfe-296">Códigos de autorização</span><span class="sxs-lookup"><span data-stu-id="4bdfe-296">Authorization codes</span></span> |<span data-ttu-id="4bdfe-297">Cinco minutos</span><span class="sxs-lookup"><span data-stu-id="4bdfe-297">Five minutes</span></span> |<span data-ttu-id="4bdfe-298">Intencionalmente, os códigos de autorização são de curta duração.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-298">Authorization codes are intentionally short-lived.</span></span> <span data-ttu-id="4bdfe-299">Eles devem ser resgatados imediatamente para tokens de acesso, tokens de ID ou tokens de atualização ao serem recebidos.</span><span class="sxs-lookup"><span data-stu-id="4bdfe-299">They should be redeemed immediately for access tokens, ID tokens, or refresh tokens when they are received.</span></span> |

