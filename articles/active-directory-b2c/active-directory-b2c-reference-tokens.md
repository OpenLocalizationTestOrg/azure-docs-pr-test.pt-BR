---
title: "Azure Active Directory B2C: referência de token | Microsoft Docs"
description: Os tipos de tokens emitidos no Azure Active Directory B2C
services: active-directory-b2c
documentationcenter: 
author: dstrockis
manager: mbaldwin
editor: 
ms.assetid: 6df79878-65cb-4dfc-98bb-2b328055bc2e
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 3/17/2017
ms.author: dastrock
ms.openlocfilehash: 39cfbc1c6dea138fe2f1eb3190770606f3895d40
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/11/2017
---
# <a name="azure-ad-b2c-token-reference"></a><span data-ttu-id="ca1ba-103">Azure AD B2C: Referência de token</span><span class="sxs-lookup"><span data-stu-id="ca1ba-103">Azure AD B2C: Token reference</span></span>
<span data-ttu-id="ca1ba-104">O Azure AD B2C (Azure Active Directory B2C) emite vários tipos de tokens de segurança ao processar cada [fluxo de autenticação](active-directory-b2c-apps.md).</span><span class="sxs-lookup"><span data-stu-id="ca1ba-104">Azure Active Directory B2C (Azure AD B2C) emits several types of security tokens as it processes each [authentication flow](active-directory-b2c-apps.md).</span></span> <span data-ttu-id="ca1ba-105">Este documento descreve o formato, as características de segurança e o conteúdo de cada tipo de token.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-105">This document describes the format, security characteristics, and contents of each type of token.</span></span>

## <a name="types-of-tokens"></a><span data-ttu-id="ca1ba-106">Tipos de tokens</span><span class="sxs-lookup"><span data-stu-id="ca1ba-106">Types of tokens</span></span>
<span data-ttu-id="ca1ba-107">O Azure AD B2C dá suporte ao [protocolo de autorização do OAuth 2.0](active-directory-b2c-reference-protocols.md), que usa tokens de acesso e tokens de atualização.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-107">Azure AD B2C supports the [OAuth 2.0 authorization protocol](active-directory-b2c-reference-protocols.md), which makes use of both access tokens and refresh tokens.</span></span> <span data-ttu-id="ca1ba-108">Ele também oferece suporte à autenticação e conexão por meio do [OpenID Connect](active-directory-b2c-reference-protocols.md), que introduz um terceiro tipo de token, o id_token.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-108">It also supports authentication and sign-in via [OpenID Connect](active-directory-b2c-reference-protocols.md), which introduces a third type of token: the ID token.</span></span> <span data-ttu-id="ca1ba-109">Cada um desses tokens é representado como um token de portador.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-109">Each of these tokens is represented as a bearer token.</span></span>

<span data-ttu-id="ca1ba-110">Um token de portador é um token de segurança leve que concede ao "portador" acesso a um recurso protegido.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-110">A bearer token is a lightweight security token that grants the "bearer" access to a protected resource.</span></span> <span data-ttu-id="ca1ba-111">O portador é qualquer parte que possa apresentar o token.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-111">The bearer is any party that can present the token.</span></span> <span data-ttu-id="ca1ba-112">Primeiro, o Azure AD deve autenticar uma parte para que ela possa receber um token de portador.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-112">Azure AD must first authenticate a party before it can receive a bearer token.</span></span> <span data-ttu-id="ca1ba-113">Porém, se as medidas necessárias não forem tomadas para proteger o token durante a transmissão e o armazenamento, ele poderá ser interceptado e usado por uma parte não planejada.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-113">But if the required steps are not taken to secure the token in transmission and storage, it can be intercepted and used by an unintended party.</span></span> <span data-ttu-id="ca1ba-114">Alguns tokens de segurança têm um mecanismo interno para impedir que partes não autorizadas os usem, mas os tokens de portador não têm esse mecanismo.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-114">Some security tokens have a built-in mechanism for preventing unauthorized parties from using them, but bearer tokens do not have this mechanism.</span></span> <span data-ttu-id="ca1ba-115">Eles devem ser transportados em um canal seguro, como segurança da camada de transporte (HTTPS).</span><span class="sxs-lookup"><span data-stu-id="ca1ba-115">They must be transported in a secure channel, such as transport layer security (HTTPS).</span></span>

<span data-ttu-id="ca1ba-116">Se um token de portador for transmitido fora de um canal seguro, uma parte mal-intencionada poderá usar um ataque por parte de intermediários para adquirir o token e usá-lo para acesso não autorizado a um recurso protegido.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-116">If a bearer token is transmitted outside a secure channel, a malicious party can use a man-in-the-middle attack to acquire the token and use it to gain unauthorized access to a protected resource.</span></span> <span data-ttu-id="ca1ba-117">Os mesmos princípios de segurança são aplicáveis ao se armazenar ou manter em cache tokens de portador para uso posterior.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-117">The same security principles apply when bearer tokens are stored or cached for later use.</span></span> <span data-ttu-id="ca1ba-118">Sempre se certifique de que seu aplicativo transmita e armazene tokens de portador de maneira segura.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-118">Always ensure that your app transmits and stores bearer tokens in a secure manner.</span></span>

<span data-ttu-id="ca1ba-119">Para obter considerações de segurança adicionais sobre tokens de portador, consulte [RFC 6750 Seção 5](http://tools.ietf.org/html/rfc6750).</span><span class="sxs-lookup"><span data-stu-id="ca1ba-119">For additional security considerations on bearer tokens, see [RFC 6750 Section 5](http://tools.ietf.org/html/rfc6750).</span></span>

<span data-ttu-id="ca1ba-120">Muitos dos tokens emitidos pelo Azure AD B2C são implementados como tokens Web JSON (JWTs).</span><span class="sxs-lookup"><span data-stu-id="ca1ba-120">Many of the tokens that Azure AD B2C issues are implemented as JSON web tokens (JWTs).</span></span> <span data-ttu-id="ca1ba-121">Um JWT é um meio compacto e protegido por URL de transferir informações entre duas partes.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-121">A JWT is a compact, URL-safe means of transferring information between two parties.</span></span> <span data-ttu-id="ca1ba-122">Os JWTs contêm informações conhecidas como declarações.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-122">JWTs contain information known as claims.</span></span> <span data-ttu-id="ca1ba-123">Trata-se de asserções de informações sobre o portador e o assunto do token.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-123">These are assertions of information about the bearer and the subject of the token.</span></span> <span data-ttu-id="ca1ba-124">As declarações em JWTs são objetos JSON codificados e serializados para transmissão.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-124">The claims in JWTs are JSON objects that are encoded and serialized for transmission.</span></span> <span data-ttu-id="ca1ba-125">Como os JWTs emitidos pelo Azure AD B2C são assinados, mas não criptografados, você pode inspecionar facilmente o conteúdo de um JWT para depurá-lo.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-125">Because the JWTs issued by Azure AD B2C are signed but not encrypted, you can easily inspect the contents of a JWT to debug it.</span></span> <span data-ttu-id="ca1ba-126">Estão disponíveis várias ferramentas que podem fazer isso, incluindo [calebb.net](http://calebb.net).</span><span class="sxs-lookup"><span data-stu-id="ca1ba-126">Several tools are available that can do this, including [calebb.net](http://calebb.net).</span></span> <span data-ttu-id="ca1ba-127">Para saber mais sobre JWTs, confira [Especificações de JWT](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html).</span><span class="sxs-lookup"><span data-stu-id="ca1ba-127">For more information about JWTs, refer to [JWT specifications](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html).</span></span>

### <a name="id-tokens"></a><span data-ttu-id="ca1ba-128">Tokens de ID</span><span class="sxs-lookup"><span data-stu-id="ca1ba-128">ID tokens</span></span>
<span data-ttu-id="ca1ba-129">Um token de ID é uma forma de token de segurança que seu aplicativo recebe dos pontos de extremidade `authorize` e `token` do Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-129">An ID token is a form of security token that your app receives from the Azure AD B2C `authorize` and `token` endpoints.</span></span> <span data-ttu-id="ca1ba-130">Os tokens de ID são representados como [JWTs](#types-of-tokens)e contêm declarações que você pode usar para identificar usuários em seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-130">ID tokens are represented as [JWTs](#types-of-tokens), and they contain claims that you can use to identify users in your app.</span></span> <span data-ttu-id="ca1ba-131">Quando tokens de ID são adquiridos do ponto de extremidade `authorize` , frequentemente são usados para conectar usuários a aplicativos Web.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-131">When ID tokens are acquired from the `authorize` endpoint, they are often used to sign in users to web applications.</span></span> <span data-ttu-id="ca1ba-132">Quando tokens de ID são adquiridos do ponto de extremidade `token` , podem ser enviados em solicitações HTTP durante a comunicação entre dois componentes do mesmo aplicativo ou serviço.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-132">When ID tokens are acquired from the `token` endpoint, they can be sent in HTTP requests during communication between two components of the same application or service.</span></span> <span data-ttu-id="ca1ba-133">Você pode usar as declarações em um token de ID como desejar.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-133">You can use the claims in an ID token as you see fit.</span></span> <span data-ttu-id="ca1ba-134">Elas são comumente usadas para exibir informações de conta ou para tomar decisões de controle de acesso em um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-134">They are commonly used to display account information or to make access control decisions in an app.</span></span>  

<span data-ttu-id="ca1ba-135">Os tokens de ID são assinados, mas não são criptografados atualmente.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-135">ID tokens are signed, but they are not currently encrypted.</span></span> <span data-ttu-id="ca1ba-136">Quando seu aplicativo ou a API recebe um token de ID, deve [validar a assinatura](#token-validation) para provar que o token é autêntico.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-136">When your app or API receives an ID token, it must [validate the signature](#token-validation) to prove that the token is authentic.</span></span> <span data-ttu-id="ca1ba-137">Seu aplicativo ou a API também deve validar algumas declarações no token para provar que ele é válido.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-137">Your app or API must also validate a few claims in the token to prove that it is valid.</span></span> <span data-ttu-id="ca1ba-138">Dependendo dos requisitos do cenário, as declarações validadas por um aplicativo podem variar, mas seu aplicativo deve executar algumas [validações de declaração comuns](#token-validation) em cada cenário.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-138">Depending on the scenario requirements, the claims validated by an app can vary, but your app must perform some [common claim validations](#token-validation) in every scenario.</span></span>

#### <a name="sample-id-token"></a><span data-ttu-id="ca1ba-139">Token de ID de exemplo</span><span class="sxs-lookup"><span data-stu-id="ca1ba-139">Sample ID token</span></span>
```
// Line breaks for display purposes only

eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IklkVG9rZW5TaWduaW5nS2V5Q29udGFpbmVyIn0.
eyJleHAiOjE0NDIzNjAwMzQsIm5iZiI6MTQ0MjM1NjQzNCwidmVyIjoiMS4wIiwiaXNzIjoiaHR0cHM6Ly9s
b2dpbi5taWNyb3NvZnRvbmxpbmUuY29tLzc3NTUyN2ZmLTlhMzctNDMwNy04YjNkLWNjMzExZjU4ZDkyNS92
Mi4wLyIsImFjciI6ImIyY18xX3NpZ25faW5fc3RvY2siLCJzdWIiOiJOb3Qgc3VwcG9ydGVkIGN1cnJlbnRs
eS4gVXNlIG9pZCBjbGFpbS4iLCJhdWQiOiI5MGMwZmU2My1iY2YyLTQ0ZDUtOGZiNy1iOGJiYzBiMjlkYzYi
LCJpYXQiOjE0NDIzNTY0MzQsImF1dGhfdGltZSI6MTQ0MjM1NjQzNCwiaWRwIjoiZmFjZWJvb2suY29tIn0.
h-uiKcrT882pSKUtWCpj-_3b3vPs3bOWsESAhPMrL-iIIacKc6_uZrWxaWvIYkLra5czBcGKWrYwrAC8ZvQe
DJWZ50WXQrZYODEW1OUwzaD_I1f1HE0c2uvaWdGXBpDEVdsD3ExKaFlKGjFR2V7F-fPThkVDdKmkUDQX3bVc
yyj2V2nlCQ9jd7aGnokTPfLfpOjuIrTsAdPcGpe5hfSEuwYDmqOJjGs9Jp1f-eSNEiCDQOaTBSvr479L5ptP
XWeQZyX2SypN05Rjr05bjZh3j70ZUimiocfJzjibeoDCaQTz907yAg91WYuFOrQxb-5BaUoR7K-O7vxr2M-_
CQhoFA

```

### <a name="access-tokens"></a><span data-ttu-id="ca1ba-140">Tokens de acesso</span><span class="sxs-lookup"><span data-stu-id="ca1ba-140">Access tokens</span></span>
<span data-ttu-id="ca1ba-141">Um token de acesso é uma forma de token de segurança que seu aplicativo recebe dos pontos de extremidade `authorize` e `token` do Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-141">An access token is also a form of security token that your app receives from the Azure AD B2C `authorize` and `token` endpoints.</span></span> <span data-ttu-id="ca1ba-142">Os tokens de acesso também são representados como [JWTs](#types-of-tokens) e contêm declarações que você pode usar para identificar as permissões concedidas às suas APIs.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-142">Access tokens are also represented as [JWTs](#types-of-tokens), and they contain claims that you can use to identify the granted permissions to your APIs.</span></span> <span data-ttu-id="ca1ba-143">Os tokens de acesso são assinados, mas não são criptografados atualmente.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-143">Access tokens are signed, but they are not currently encrypted.</span></span> <span data-ttu-id="ca1ba-144">Os tokens de acesso devem ser usados para fornecer acesso aos servidores de APIs e recursos.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-144">Access tokens should be used to provide access to APIs and resource servers.</span></span> <span data-ttu-id="ca1ba-145">Saiba mais sobre como [usar tokens de acesso](active-directory-b2c-access-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="ca1ba-145">Learn more about how to [use access tokens](active-directory-b2c-access-tokens.md).</span></span> 

<span data-ttu-id="ca1ba-146">Quando sua API recebe um token de acesso, deve [validar a assinatura](#token-validation) para provar que o token é autêntico.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-146">When your API receives an access token, it must [validate the signature](#token-validation) to prove that the token is authentic.</span></span> <span data-ttu-id="ca1ba-147">Sua API também deve validar algumas declarações no token para provar que ele é válido.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-147">Your API must also validate a few claims in the token to prove that it is valid.</span></span> <span data-ttu-id="ca1ba-148">Dependendo dos requisitos do cenário, as declarações validadas por um aplicativo podem variar, mas seu aplicativo deve executar algumas [validações de declaração comuns](#token-validation) em cada cenário.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-148">Depending on the scenario requirements, the claims validated by an app can vary, but your app must perform some [common claim validations](#token-validation) in every scenario.</span></span>

### <a name="claims-in-id-and-access-tokens"></a><span data-ttu-id="ca1ba-149">Declarações em tokens de ID e de acesso</span><span class="sxs-lookup"><span data-stu-id="ca1ba-149">Claims in ID and access tokens</span></span>
<span data-ttu-id="ca1ba-150">Ao usar o Azure AD B2C, você tem um controle refinado sobre o conteúdo de seus tokens.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-150">When you use Azure AD B2C, you have fine-grained control over the content of your tokens.</span></span> <span data-ttu-id="ca1ba-151">Você pode configurar [políticas](active-directory-b2c-reference-policies.md) para enviar determinados conjuntos de dados do usuário em declarações que o aplicativo requer para suas operações.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-151">You can configure [policies](active-directory-b2c-reference-policies.md) to send certain sets of user data in claims that your app requires for its operations.</span></span> <span data-ttu-id="ca1ba-152">Essas declarações podem incluir propriedades padrão, como o `displayName` e o `emailAddress` do usuário.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-152">These claims can include standard properties such as the user's `displayName` and `emailAddress`.</span></span> <span data-ttu-id="ca1ba-153">Também podem incluir [atributos de usuário personalizados](active-directory-b2c-reference-custom-attr.md) que você pode definir no diretório do B2C.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-153">They can also include [custom user attributes](active-directory-b2c-reference-custom-attr.md) that you can define in your B2C directory.</span></span> <span data-ttu-id="ca1ba-154">Cada token de ID e de acesso que você recebe contém um determinado conjunto de declarações relacionadas à segurança.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-154">Every ID and access token that you receive contains a certain set of security-related claims.</span></span> <span data-ttu-id="ca1ba-155">Seus aplicativos podem usar essas declarações para autenticar usuários e solicitações com segurança.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-155">Your applications can use these claims to securely authenticate users and requests.</span></span>

<span data-ttu-id="ca1ba-156">Observe que as declarações em tokens de ID não são retornadas em uma ordem específica.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-156">Note that the claims in ID tokens are not returned in any particular order.</span></span> <span data-ttu-id="ca1ba-157">Além disso, novas declarações podem ser introduzidas em tokens de ID a qualquer momento.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-157">In addition, new claims can be introduced in ID tokens at any time.</span></span> <span data-ttu-id="ca1ba-158">Seu aplicativo não deve ser interrompido à medida que novas declarações são introduzidas.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-158">Your app should not break as new claims are introduced.</span></span> <span data-ttu-id="ca1ba-159">Aqui estão as declarações que você espera que existam em tokens de ID e de acesso emitidos pelo Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-159">Here are the claims that you expect to exist in ID and access tokens issued by Azure AD B2C.</span></span> <span data-ttu-id="ca1ba-160">As declarações adicionais são determinadas por políticas.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-160">Any additional claims are determined by policies.</span></span> <span data-ttu-id="ca1ba-161">Para praticar, tente inspecionar as declarações no exemplo de id_token colando-o em [calebb.net](http://calebb.net).</span><span class="sxs-lookup"><span data-stu-id="ca1ba-161">For practice, try inspecting the claims in the sample ID token by pasting it into [calebb.net](http://calebb.net).</span></span> <span data-ttu-id="ca1ba-162">Mais detalhes podem ser encontrados na [especificação do OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html).</span><span class="sxs-lookup"><span data-stu-id="ca1ba-162">Further details can be found in the [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span></span>

| <span data-ttu-id="ca1ba-163">Nome</span><span class="sxs-lookup"><span data-stu-id="ca1ba-163">Name</span></span> | <span data-ttu-id="ca1ba-164">Declaração</span><span class="sxs-lookup"><span data-stu-id="ca1ba-164">Claim</span></span> | <span data-ttu-id="ca1ba-165">Valor de exemplo</span><span class="sxs-lookup"><span data-stu-id="ca1ba-165">Example value</span></span> | <span data-ttu-id="ca1ba-166">Descrição</span><span class="sxs-lookup"><span data-stu-id="ca1ba-166">Description</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="ca1ba-167">Público-alvo</span><span class="sxs-lookup"><span data-stu-id="ca1ba-167">Audience</span></span> |`aud` |`90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6` |<span data-ttu-id="ca1ba-168">Uma declaração de audiência identifica o destinatário pretendido do token.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-168">An audience claim identifies the intended recipient of the token.</span></span> <span data-ttu-id="ca1ba-169">Para o Azure AD B2C, o público-alvo é a ID de aplicativo de seu aplicativo, conforme atribuída a ele no portal de registro do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-169">For Azure AD B2C, the audience is your app's application ID, as assigned to your app in the app registration portal.</span></span> <span data-ttu-id="ca1ba-170">O aplicativo deve validar esse valor e rejeitar o token, caso ele não corresponda.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-170">Your app should validate this value and reject the token if it does not match.</span></span> |
| <span data-ttu-id="ca1ba-171">Emissor</span><span class="sxs-lookup"><span data-stu-id="ca1ba-171">Issuer</span></span> |`iss` |`https://login.microsoftonline.com/775527ff-9a37-4307-8b3d-cc311f58d925/v2.0/` |<span data-ttu-id="ca1ba-172">Essa declaração identifica o STS (serviço de token de segurança) que constrói e retorna o token.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-172">This claim identifies the security token service (STS) that constructs and returns the token.</span></span> <span data-ttu-id="ca1ba-173">Também identifica o diretório do Azure AD no qual o usuário foi autenticado.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-173">It also identifies the Azure AD directory in which the user was authenticated.</span></span> <span data-ttu-id="ca1ba-174">O aplicativo deve validar a declaração do emissor para garantir que o token venha do ponto de extremidade Azure Active Directory v2.0.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-174">Your app should validate the issuer claim to ensure that the token came from the Azure Active Directory v2.0 endpoint.</span></span> |
| <span data-ttu-id="ca1ba-175">Emitido em</span><span class="sxs-lookup"><span data-stu-id="ca1ba-175">Issued at</span></span> |`iat` |`1438535543` |<span data-ttu-id="ca1ba-176">Essa declaração é a hora em que o token foi emitido, representada na época.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-176">This claim is the time at which the token was issued, represented in epoch time.</span></span> |
| <span data-ttu-id="ca1ba-177">Hora de expiração</span><span class="sxs-lookup"><span data-stu-id="ca1ba-177">Expiration time</span></span> |`exp` |`1438539443` |<span data-ttu-id="ca1ba-178">A declaração de hora de expiração é a hora em que o token se torna inválido, representada na época.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-178">The expiration time claim is the time at which the token becomes invalid, represented in epoch time.</span></span> <span data-ttu-id="ca1ba-179">O aplicativo deve usar essa declaração para verificar a validade do tempo de vida do token.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-179">Your app should use this claim to verify the validity of the token lifetime.</span></span> |
| <span data-ttu-id="ca1ba-180">Não antes de</span><span class="sxs-lookup"><span data-stu-id="ca1ba-180">Not before</span></span> |`nbf` |`1438535543` |<span data-ttu-id="ca1ba-181">Essa declaração é a hora na qual o token se torna válido, representada na época.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-181">This claim is the time at which the token becomes valid, represented in epoch time.</span></span> <span data-ttu-id="ca1ba-182">Essa geralmente é a mesma hora em que o token foi emitido.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-182">This is usually the same as the time the token was issued.</span></span> <span data-ttu-id="ca1ba-183">O aplicativo deve usar essa declaração para verificar a validade do tempo de vida do token.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-183">Your app should use this claim to verify the validity of the token lifetime.</span></span> |
| <span data-ttu-id="ca1ba-184">Versão</span><span class="sxs-lookup"><span data-stu-id="ca1ba-184">Version</span></span> |`ver` |`1.0` |<span data-ttu-id="ca1ba-185">Essa é a versão do token de ID, conforme definido pelo Azure AD.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-185">This is the version of the ID token, as defined by Azure AD.</span></span> |
| <span data-ttu-id="ca1ba-186">Hash de código</span><span class="sxs-lookup"><span data-stu-id="ca1ba-186">Code hash</span></span> |`c_hash` |`SGCPtt01wxwfgnYZy2VJtQ` |<span data-ttu-id="ca1ba-187">Um hash de código é incluído em um token de ID apenas quando o token é emitido junto com um código de autorização OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-187">A code hash is included in an ID token only when the token is issued together with an OAuth 2.0 authorization code.</span></span> <span data-ttu-id="ca1ba-188">Um hash de código pode ser usado para validar a autenticidade de um código de autorização.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-188">A code hash can be used to validate the authenticity of an authorization code.</span></span> <span data-ttu-id="ca1ba-189">Para obter mais detalhes sobre como realizar essa validação, veja a [Especificação do OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html).</span><span class="sxs-lookup"><span data-stu-id="ca1ba-189">For more details on how to perform this validation, see the [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span></span>  |
| <span data-ttu-id="ca1ba-190">Hash de token de acesso</span><span class="sxs-lookup"><span data-stu-id="ca1ba-190">Access token hash</span></span> |`at_hash` |`SGCPtt01wxwfgnYZy2VJtQ` |<span data-ttu-id="ca1ba-191">Um hash de token de acesso é incluído em um token de ID apenas quando o token é emitido junto com um token de acesso OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-191">An access token hash is included in an ID token only when the token is issued together with an OAuth 2.0 access token.</span></span> <span data-ttu-id="ca1ba-192">Um hash de token de acesso pode ser usado para validar a autenticidade de um token de acesso.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-192">An access token hash can be used to validate the authenticity of an access token.</span></span> <span data-ttu-id="ca1ba-193">Para obter mais detalhes sobre como realizar essa validação, veja a [Especificação do OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html)</span><span class="sxs-lookup"><span data-stu-id="ca1ba-193">For more details on how to perform this validation, see the [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html)</span></span>  |
| <span data-ttu-id="ca1ba-194">Nonce</span><span class="sxs-lookup"><span data-stu-id="ca1ba-194">Nonce</span></span> |`nonce` |`12345` |<span data-ttu-id="ca1ba-195">Um nonce é uma estratégia usada para reduzir ataques de reprodução de token.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-195">A nonce is a strategy used to mitigate token replay attacks.</span></span> <span data-ttu-id="ca1ba-196">O aplicativo pode especificar um nonce em uma solicitação de autorização usando o parâmetro de consulta `nonce` .</span><span class="sxs-lookup"><span data-stu-id="ca1ba-196">Your app can specify a nonce in an authorization request by using the `nonce` query parameter.</span></span> <span data-ttu-id="ca1ba-197">O valor que você fornecer na solicitação será emitido sem modificações na declaração `nonce` de um token de ID somente.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-197">The value you provide in the request will be emitted unmodified in the `nonce` claim of an ID token only.</span></span> <span data-ttu-id="ca1ba-198">Isso permite ao aplicativo verificar o valor em relação ao valor que ele especificou na solicitação, que associa a sessão do aplicativo a determinado token de ID.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-198">This allows your app to verify the value against the value it specified on the request, which associates the app's session with a given ID token.</span></span> <span data-ttu-id="ca1ba-199">O aplicativo deve executar essa validação durante o processo de validação do token de ID.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-199">Your app should perform this validation during the ID token validation process.</span></span> |
| <span data-ttu-id="ca1ba-200">Subject</span><span class="sxs-lookup"><span data-stu-id="ca1ba-200">Subject</span></span> |`sub` |`884408e1-2918-4cz0-b12d-3aa027d7563b` |<span data-ttu-id="ca1ba-201">Essa é a entidade de segurança sobre a qual o token declara informações, como o usuário de um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-201">This is the principal about which the token asserts information, such as the user of an app.</span></span> <span data-ttu-id="ca1ba-202">Esse valor é imutável e não pode ser reatribuído nem reutilizado.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-202">This value is immutable and cannot be reassigned or reused.</span></span> <span data-ttu-id="ca1ba-203">Ele pode ser usado para executar verificações de autorização com segurança, por exemplo, quando o token é usado para acessar um recurso.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-203">It can be used to perform authorization checks safely, such as when the token is used to access a resource.</span></span> <span data-ttu-id="ca1ba-204">Por padrão, a declaração de entidade é preenchida com a ID de objeto do usuário no diretório.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-204">By default, the subject claim is populated with the object ID of the user in the directory.</span></span> <span data-ttu-id="ca1ba-205">Para obter mais informações, consulte [Azure Active Directory B2C: configuração de token, de sessão e de logon único](active-directory-b2c-token-session-sso.md).</span><span class="sxs-lookup"><span data-stu-id="ca1ba-205">To learn more, see [Azure Active Directory B2C: Token, session, and single sign-on configuration](active-directory-b2c-token-session-sso.md).</span></span> |
| <span data-ttu-id="ca1ba-206">Referência de classe de contexto de autenticação</span><span class="sxs-lookup"><span data-stu-id="ca1ba-206">Authentication context class reference</span></span> |`acr` |<span data-ttu-id="ca1ba-207">Não aplicável</span><span class="sxs-lookup"><span data-stu-id="ca1ba-207">Not applicable</span></span> |<span data-ttu-id="ca1ba-208">Não usado atualmente, exceto no caso de políticas mais antigas.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-208">Not used currently, except in the case of older policies.</span></span> <span data-ttu-id="ca1ba-209">Para obter mais informações, consulte [Azure Active Directory B2C: configuração de token, de sessão e de logon único](active-directory-b2c-token-session-sso.md).</span><span class="sxs-lookup"><span data-stu-id="ca1ba-209">To learn more, see [Azure Active Directory B2C: Token, session, and single sign-on configuration](active-directory-b2c-token-session-sso.md).</span></span> |
| <span data-ttu-id="ca1ba-210">Política de estrutura confiável</span><span class="sxs-lookup"><span data-stu-id="ca1ba-210">Trust framework policy</span></span> |`tfp` |`b2c_1_sign_in` |<span data-ttu-id="ca1ba-211">Esse é o nome da política que foi usada para adquirir o token de ID.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-211">This is the name of the policy that was used to acquire the ID token.</span></span> |
| <span data-ttu-id="ca1ba-212">Hora da autenticação</span><span class="sxs-lookup"><span data-stu-id="ca1ba-212">Authentication time</span></span> |`auth_time` |`1438535543` |<span data-ttu-id="ca1ba-213">Essa declaração é a hora em que um usuário inseriu credenciais pela última vez, representada na época.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-213">This claim is the time at which a user last entered credentials, represented in epoch time.</span></span> |

### <a name="refresh-tokens"></a><span data-ttu-id="ca1ba-214">Tokens de atualização</span><span class="sxs-lookup"><span data-stu-id="ca1ba-214">Refresh tokens</span></span>
<span data-ttu-id="ca1ba-215">Os tokens de atualização são tokens de segurança que o aplicativo pode usar para adquirir novos tokens de ID e tokens de acesso em um fluxo do OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-215">Refresh tokens are security tokens that your app can use to acquire new ID tokens and access tokens in an OAuth 2.0 flow.</span></span> <span data-ttu-id="ca1ba-216">Eles fornecem ao aplicativo acesso de longo prazo aos recursos em nome dos usuários sem a necessidade de interação com os usuários.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-216">They provide your app with long-term access to resources on behalf of users without requiring interaction with those users.</span></span>

<span data-ttu-id="ca1ba-217">Para receber um token de atualização em uma resposta de token, o aplicativo deve solicitar o escopo `offline_acesss` .</span><span class="sxs-lookup"><span data-stu-id="ca1ba-217">To receive a refresh token in a token response, your app must request the `offline_acesss` scope.</span></span> <span data-ttu-id="ca1ba-218">Para saber mais sobre o escopo `offline_access` , consulte a [referência de protocolo do AD B2C do Azure](active-directory-b2c-reference-protocols.md).</span><span class="sxs-lookup"><span data-stu-id="ca1ba-218">To learn more about the `offline_access` scope, refer to the [Azure AD B2C protocol reference](active-directory-b2c-reference-protocols.md).</span></span>

<span data-ttu-id="ca1ba-219">Os tokens de atualização são, e sempre serão, completamente opacos para seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-219">Refresh tokens are, and will always be, completely opaque to your app.</span></span> <span data-ttu-id="ca1ba-220">Eles são emitidos pelo Azure AD e só podem ser inspecionados e interpretados por ele.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-220">They are issued by Azure AD and can be inspected and interpreted only by Azure AD.</span></span> <span data-ttu-id="ca1ba-221">Eles têm longa duração, mas o aplicativo não deve ser escrito com a expectativa de que um token de atualização durará por um período de tempo específico.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-221">They are long-lived, but your app should not be written with the expectation that a refresh token will last for a specific period of time.</span></span> <span data-ttu-id="ca1ba-222">Os tokens de atualização podem ser invalidados a qualquer momento por vários motivos.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-222">Refresh tokens can be invalidated at any moment for a variety of reasons.</span></span> <span data-ttu-id="ca1ba-223">A única maneira de o aplicativo saber se um token de atualização é válido, é tentando resgatá-lo fazendo uma solicitação de token ao AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-223">The only way for your app to know if a refresh token is valid is to attempt to redeem it by making a token request to Azure AD.</span></span>

<span data-ttu-id="ca1ba-224">Ao resgatar um token de atualização para um novo token (e se o escopo `offline_access` o tiver sido concedido ao aplicativo), você receberá um novo token de atualização na resposta de token.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-224">When you redeem a refresh token for a new token (and if your app has been granted the `offline_access` scope), you will receive a new refresh token in the token response.</span></span> <span data-ttu-id="ca1ba-225">Você deve salvar o token de atualização recém-emitido.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-225">You should save the newly issued refresh token.</span></span> <span data-ttu-id="ca1ba-226">Ele deve substituir o token de atualização que você usou anteriormente na solicitação.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-226">It should replace the refresh token you previously used in the request.</span></span> <span data-ttu-id="ca1ba-227">Isso ajuda a garantir que seus tokens de atualização permaneçam válidos pelo máximo tempo possível.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-227">This helps guarantee that your refresh tokens remain valid for as long as possible.</span></span>

## <a name="token-validation"></a><span data-ttu-id="ca1ba-228">Validação de token</span><span class="sxs-lookup"><span data-stu-id="ca1ba-228">Token validation</span></span>
<span data-ttu-id="ca1ba-229">Para validar um token, o aplicativo deve verificar a assinatura e as declarações do token.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-229">To validate a token, your app should check both the signature and claims of the token.</span></span>

<span data-ttu-id="ca1ba-230">Muitas bibliotecas de software livre estão disponíveis para validação de JWTs, dependendo da linguagem preferencial.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-230">Many open source libraries are available for validating JWTs, depending on your preferred language.</span></span> <span data-ttu-id="ca1ba-231">É recomendável explorar essas opções em vez de implementar sua própria lógica de validação.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-231">We recommend that you explore those options rather than implement your own validation logic.</span></span> <span data-ttu-id="ca1ba-232">As informações neste guia podem ajudá-lo a aprender a usar essas bibliotecas adequadamente.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-232">The information in this guide can help you learn how to properly use those libraries.</span></span>

### <a name="validate-the-signature"></a><span data-ttu-id="ca1ba-233">validar a assinatura</span><span class="sxs-lookup"><span data-stu-id="ca1ba-233">Validate the signature</span></span>
<span data-ttu-id="ca1ba-234">Um JWT contém três segmentos, separados pelo caractere `.` .</span><span class="sxs-lookup"><span data-stu-id="ca1ba-234">A JWT contains three segments, separated by the `.` character.</span></span> <span data-ttu-id="ca1ba-235">O primeiro segmento é o *cabeçalho*, o segundo é o *corpo* e o terceiro é a *assinatura*.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-235">The first segment is the *header*, the second is the *body*, and the third is the *signature*.</span></span> <span data-ttu-id="ca1ba-236">O segmento de assinatura pode ser usado para validar a autenticidade do token, de modo que seu aplicativo possa confiar nele.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-236">The signature segment can be used to validate the authenticity of the token so that it can be trusted by your app.</span></span>

<span data-ttu-id="ca1ba-237">Os tokens do Azure AD B2C são assinados usando algoritmos de criptografia assimétrica padrão do setor, como o RSA 256.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-237">Azure AD B2C tokens are signed by using industry-standard asymmetric encryption algorithms, such as RSA 256.</span></span> <span data-ttu-id="ca1ba-238">O cabeçalho do token contém informações sobre o método de criptografia e a chave usados para assinar o token:</span><span class="sxs-lookup"><span data-stu-id="ca1ba-238">The header of the token contains information about the key and encryption method used to sign the token:</span></span>

```
{
        "typ": "JWT",
        "alg": "RS256",
        "kid": "GvnPApfWMdLRi8PDmisFn7bprKg"
}
```

<span data-ttu-id="ca1ba-239">A declaração `alg` indica o algoritmo que foi usado para assinar o token.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-239">The `alg` claim indicates the algorithm that was used to sign the token.</span></span> <span data-ttu-id="ca1ba-240">A declaração `kid` indica a chave pública específica que foi usada para assinar o token.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-240">The `kid` claim indicates the particular public key that was used to sign the token.</span></span>

<span data-ttu-id="ca1ba-241">A qualquer momento, o Azure AD pode assinar um token usando qualquer opção de determinado conjunto de pares de chaves públicas-privadas.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-241">At any given time, Azure AD can sign a token by using any one of a certain set of public-private key pairs.</span></span> <span data-ttu-id="ca1ba-242">O Azure AD gira o possível conjunto de chaves periodicamente. Portanto, o aplicativo deve ser escrito para lidar com essas mudanças de chave automaticamente.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-242">Azure AD rotates the possible set of keys periodically, so your app should be written to handle those key changes automatically.</span></span> <span data-ttu-id="ca1ba-243">Uma frequência razoável para verificar se há atualizações para as chaves públicas usadas pelo Azure AD é a cada 24 horas.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-243">A reasonable frequency to check for updates to the public keys used by Azure AD is every 24 hours.</span></span>

<span data-ttu-id="ca1ba-244">O Azure AD B2C tem um ponto de extremidade de metadados OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-244">Azure AD B2C has an OpenID Connect metadata endpoint.</span></span> <span data-ttu-id="ca1ba-245">Isso permite que os aplicativos busquem informações sobre o Azure AD B2C em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-245">This allows apps to fetch information about Azure AD B2C at runtime.</span></span> <span data-ttu-id="ca1ba-246">Essas informações incluem pontos de extremidade, conteúdos de token e chaves de assinatura de token.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-246">This information includes endpoints, token contents, and token signing keys.</span></span> <span data-ttu-id="ca1ba-247">O diretório B2C contém um documento de metadados JSON para cada política.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-247">Your B2C directory contains a JSON metadata document for each policy.</span></span> <span data-ttu-id="ca1ba-248">Por exemplo, o documento de metadados para a política `b2c_1_sign_in` em `fabrikamb2c.onmicrosoft.com` está localizado em:</span><span class="sxs-lookup"><span data-stu-id="ca1ba-248">For example, the metadata document for the `b2c_1_sign_in` policy in  `fabrikamb2c.onmicrosoft.com` is located at:</span></span>

```
https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=b2c_1_sign_in
```

<span data-ttu-id="ca1ba-249">`fabrikamb2c.onmicrosoft.com` é o diretório B2C usado para autenticar o usuário e `b2c_1_sign_in` é a política usada para adquirir o token.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-249">`fabrikamb2c.onmicrosoft.com` is the B2C directory used to authenticate the user, and `b2c_1_sign_in` is the policy used to acquire the token.</span></span> <span data-ttu-id="ca1ba-250">Para determinar qual política foi usada para assinar um token (e onde buscar os metadados), você tem duas opções.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-250">To determine which policy was used to sign a token (and where to go to fetch the metadata), you have two options.</span></span> <span data-ttu-id="ca1ba-251">Primeiro, o nome da política é incluído na declaração `acr` no token.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-251">First, the policy name is included in the `acr` claim in the token.</span></span> <span data-ttu-id="ca1ba-252">Você pode analisar as declarações fora do corpo do JWT decodificando em base 64 o corpo e desserializando a cadeia de caracteres JSON resultante.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-252">You can parse claims out of the body of the JWT by base-64 decoding the body and deserializing the JSON string that results.</span></span> <span data-ttu-id="ca1ba-253">A declaração `acr` será o nome da política que foi usada para emitir o token.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-253">The `acr` claim will be the name of the policy that was used to issue the token.</span></span>  <span data-ttu-id="ca1ba-254">A outra opção é codificar a política no valor do parâmetro `state` quando você emitir a solicitação e, em seguida, decodificá-lo para determinar qual política foi usada.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-254">Your other option is to encode the policy in the value of the `state` parameter when you issue the request, and then decode it to determine which policy was used.</span></span> <span data-ttu-id="ca1ba-255">Ambos os métodos são válidos.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-255">Either method is valid.</span></span>

<span data-ttu-id="ca1ba-256">O documento de metadados é um objeto JSON que contém várias informações úteis.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-256">The metadata document is a JSON object that contains several useful pieces of information.</span></span> <span data-ttu-id="ca1ba-257">Isso inclui o local dos pontos de extremidade necessários para realizar a autenticação OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-257">These include the location of the endpoints required to perform OpenID Connect authentication.</span></span> <span data-ttu-id="ca1ba-258">Também inclui um `jwks_uri`, que fornece o local do conjunto de chaves públicas usadas para assinar tokens.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-258">They also include `jwks_uri`, which gives the location of the set of public keys that are used to sign tokens.</span></span> <span data-ttu-id="ca1ba-259">Esse local é fornecido aqui, mas é melhor buscar o local dinamicamente usando o documento de metadados e analisando `jwks_uri`:</span><span class="sxs-lookup"><span data-stu-id="ca1ba-259">That location is provided here, but it is best to fetch the location dynamically by using the metadata document and parsing out `jwks_uri`:</span></span>

```
https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/discovery/v2.0/keys?p=b2c_1_sign_in
```

<span data-ttu-id="ca1ba-260">O documento JSON localizado nessa URL contém todas as informações de chave pública em uso em um momento específico.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-260">The JSON document located at this URL contains all the public key information in use at a particular moment.</span></span> <span data-ttu-id="ca1ba-261">O aplicativo pode usar a declaração `kid` no cabeçalho do JWT para selecionar a chave pública no documento JSON que é usada para assinar um token específico.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-261">Your app can use the `kid` claim in the JWT header to select the public key in the JSON document that is used to sign a particular token.</span></span> <span data-ttu-id="ca1ba-262">Assim, ele pode executar a validação da assinatura usando a chave pública correta e o algoritmo indicado.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-262">It can then perform signature validation by using the correct public key and the indicated algorithm.</span></span>

<span data-ttu-id="ca1ba-263">Uma descrição de como executar a validação de assinatura está fora do escopo deste documento.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-263">A description of how to perform signature validation is outside the scope of this document.</span></span> <span data-ttu-id="ca1ba-264">Muitas bibliotecas de software livre estão disponíveis para ajudá-lo, se necessário.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-264">Many open source libraries are available to help you with this if you need it.</span></span>

### <a name="validate-the-claims"></a><span data-ttu-id="ca1ba-265">Validar as declarações</span><span class="sxs-lookup"><span data-stu-id="ca1ba-265">Validate the claims</span></span>
<span data-ttu-id="ca1ba-266">Quando o aplicativo ou a API recebe um token de ID, também deve fazer diversas verificações em relação às declarações no token de ID.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-266">When your app or API receives an ID token, it should also perform several checks against the claims in the ID token.</span></span> <span data-ttu-id="ca1ba-267">Elas incluem, mas sem limitação:</span><span class="sxs-lookup"><span data-stu-id="ca1ba-267">These include, but are not limited to:</span></span>

* <span data-ttu-id="ca1ba-268">A declaração **audiência** : verifica se o token de ID se destinava a ser fornecido a seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-268">The **audience** claim: This verifies that the ID token was intended to be given to your app.</span></span>
* <span data-ttu-id="ca1ba-269">As declarações **não antes** de e **hora de expiração**: verificam se o token de ID não expirou.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-269">The **not before** and **expiration time** claims: These verify that the ID token has not expired.</span></span>
* <span data-ttu-id="ca1ba-270">A declaração **emissor** : verifica se o token foi de fato emitido para o aplicativo pelo Azure AD.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-270">The **issuer** claim: This verifies that the token was issued to your app by Azure AD.</span></span>
* <span data-ttu-id="ca1ba-271">O **nonce**: essa é uma estratégia para redução de ataques de reprodução de token.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-271">The **nonce**: This is a strategy for token replay attack mitigation.</span></span>

<span data-ttu-id="ca1ba-272">Para obter uma lista completa de validações que seu aplicativo deve realizar, consulte a [especificação do OpenID Connect](https://openid.net).</span><span class="sxs-lookup"><span data-stu-id="ca1ba-272">For a full list of validations your app should perform, refer to the [OpenID Connect specification](https://openid.net).</span></span> <span data-ttu-id="ca1ba-273">Os detalhes dos valores esperados para essas declarações estão incluídos na [seção sobre tokens](#types-of-tokens)anterior.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-273">Details of the expected values for these claims are included in the preceding [token section](#types-of-tokens).</span></span>  

## <a name="token-lifetimes"></a><span data-ttu-id="ca1ba-274">Tempos de vida do token</span><span class="sxs-lookup"><span data-stu-id="ca1ba-274">Token lifetimes</span></span>
<span data-ttu-id="ca1ba-275">Os tempos de vida de token a seguir são fornecidos para expandir seus conhecimentos.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-275">The following token lifetimes are provided to further your knowledge.</span></span> <span data-ttu-id="ca1ba-276">Eles poderão ajudá-lo quando você desenvolver e depurar aplicativos.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-276">They can help you when you develop and debug apps.</span></span> <span data-ttu-id="ca1ba-277">Observe que seus aplicativos não devem ser escritos com a esxpectativa de que esses tempos de vida permaneçam constantes.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-277">Note that your apps should not be written to expect any of these lifetimes to remain constant.</span></span> <span data-ttu-id="ca1ba-278">Eles podem e vão ser alterados.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-278">They can and will change.</span></span> <span data-ttu-id="ca1ba-279">Leia mais sobre a [personalização de tempos de vida de token](active-directory-b2c-token-session-sso.md) no Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-279">Read more about the [customization of token lifetimes](active-directory-b2c-token-session-sso.md) in Azure AD B2C.</span></span>

| <span data-ttu-id="ca1ba-280">A criptografia do token</span><span class="sxs-lookup"><span data-stu-id="ca1ba-280">Token</span></span> | <span data-ttu-id="ca1ba-281">Tempo de vida</span><span class="sxs-lookup"><span data-stu-id="ca1ba-281">Lifetime</span></span> | <span data-ttu-id="ca1ba-282">Descrição</span><span class="sxs-lookup"><span data-stu-id="ca1ba-282">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="ca1ba-283">Tokens de ID</span><span class="sxs-lookup"><span data-stu-id="ca1ba-283">ID tokens</span></span> |<span data-ttu-id="ca1ba-284">Uma hora</span><span class="sxs-lookup"><span data-stu-id="ca1ba-284">One hour</span></span> |<span data-ttu-id="ca1ba-285">Tokens de ID normalmente são válidos por uma hora.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-285">ID tokens are typically valid for an hour.</span></span> <span data-ttu-id="ca1ba-286">O aplicativo Web pode usar esse tempo de vida para manter suas próprias sessões com usuários (recomendado).</span><span class="sxs-lookup"><span data-stu-id="ca1ba-286">Your web app can use this lifetime to maintain its own sessions with users (recommended).</span></span> <span data-ttu-id="ca1ba-287">Também é possível escolher um tempo de vida de sessão diferente.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-287">You can also choose a different session lifetime.</span></span> <span data-ttu-id="ca1ba-288">Se o aplicativo precisar obter um novo token de ID, ele simplesmente precisará fazer uma nova solicitação de conexão ao Azure AD.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-288">If your app needs to get a new ID token, it simply needs to make a new sign-in request to Azure AD.</span></span> <span data-ttu-id="ca1ba-289">Se um usuário tiver uma sessão de navegador válida com o Azure AD, talvez ele não precise inserir suas credenciais novamente.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-289">If a user has a valid browser session with Azure AD, that user might not be required to enter credentials again.</span></span> |
| <span data-ttu-id="ca1ba-290">Tokens de atualização</span><span class="sxs-lookup"><span data-stu-id="ca1ba-290">Refresh tokens</span></span> |<span data-ttu-id="ca1ba-291">Até 14 dias</span><span class="sxs-lookup"><span data-stu-id="ca1ba-291">Up to 14 days</span></span> |<span data-ttu-id="ca1ba-292">Um único token de atualização é válido para um máximo de 14 dias.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-292">A single refresh token is valid for a maximum of 14 days.</span></span> <span data-ttu-id="ca1ba-293">No entanto, um token de atualização pode se tornar inválido a qualquer momento por vários motivos.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-293">However, a refresh token can become invalid at any time for a number of reasons.</span></span> <span data-ttu-id="ca1ba-294">Seu aplicativo deve continuar a tentar usar um token de atualização até que a solicitação falhe ou até que o aplicativo substitua o token de atualização por um novo.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-294">Your app should continue to try to use a refresh token until the request fails, or until your app replaces the refresh token with a new one.</span></span> <span data-ttu-id="ca1ba-295">Um token de atualização também pode se tornar inválido se 90 dias se passaram desde a última vez em que o usuário inseriu credenciais.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-295">A refresh token can also become invalid if 90 days have passed since the user last entered credentials.</span></span> |
| <span data-ttu-id="ca1ba-296">Códigos de autorização</span><span class="sxs-lookup"><span data-stu-id="ca1ba-296">Authorization codes</span></span> |<span data-ttu-id="ca1ba-297">Cinco minutos</span><span class="sxs-lookup"><span data-stu-id="ca1ba-297">Five minutes</span></span> |<span data-ttu-id="ca1ba-298">Intencionalmente, os códigos de autorização são de curta duração.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-298">Authorization codes are intentionally short-lived.</span></span> <span data-ttu-id="ca1ba-299">Eles devem ser resgatados imediatamente para tokens de acesso, tokens de ID ou tokens de atualização ao serem recebidos.</span><span class="sxs-lookup"><span data-stu-id="ca1ba-299">They should be redeemed immediately for access tokens, ID tokens, or refresh tokens when they are received.</span></span> |

