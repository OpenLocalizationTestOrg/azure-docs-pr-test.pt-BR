---
title: mensagens de aaaUnderstand Azure IoT Hub de nuvem para dispositivo | Microsoft Docs
description: "Guia do desenvolvedor - como toouse nuvem para dispositivo de mensagens com o IoT Hub. Inclui informações sobre o ciclo de vida de mensagem de saudação e opções de configuração."
services: iot-hub
documentationcenter: .net
author: dominicbetts
manager: timlt
editor: 
ms.service: iot-hub
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 05/25/2017
ms.author: dobett
ms.openlocfilehash: 5c747b50163873d823556a8baa769c4b8f7f8c44
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="send-cloud-to-device-messages-from-iot-hub"></a><span data-ttu-id="b260a-104">Enviar mensagens de nuvem para o dispositivo do Hub IoT</span><span class="sxs-lookup"><span data-stu-id="b260a-104">Send cloud-to-device messages from IoT Hub</span></span>

<span data-ttu-id="b260a-105">aplicativo de dispositivo de toohello toosend notificações unidirecional de sua solução back-end, enviar mensagens de nuvem para dispositivos do dispositivo IoT hub tooyour.</span><span class="sxs-lookup"><span data-stu-id="b260a-105">toosend one-way notifications toohello device app from your solution back end, send cloud-to-devices messages from your IoT hub tooyour device.</span></span> <span data-ttu-id="b260a-106">Para uma discussão sobre outras opções de nuvem para o dispositivo com suporte do Hub IoT, consulte [Diretrizes de comunicação de nuvem para o dispositivo][lnk-c2d-guidance].</span><span class="sxs-lookup"><span data-stu-id="b260a-106">For a discussion of other cloud-to-devices options supported by IoT Hub, see [Cloud-to-device communications guidance][lnk-c2d-guidance].</span></span>

<span data-ttu-id="b260a-107">Você pode enviar mensagens da nuvem para o dispositivo por meio de um ponto de extremidade voltado para o serviço (**/messages/devicebound**).</span><span class="sxs-lookup"><span data-stu-id="b260a-107">You send cloud-to-device messages through a service-facing endpoint (**/messages/devicebound**).</span></span> <span data-ttu-id="b260a-108">Um dispositivo, em seguida, recebe mensagens de saudação por meio de um ponto de extremidade específico do dispositivo (**/devices/ {deviceId} mensagens/devicebound**).</span><span class="sxs-lookup"><span data-stu-id="b260a-108">A device then receives hello messages through a device-specific endpoint (**/devices/{deviceId}/messages/devicebound**).</span></span>

<span data-ttu-id="b260a-109">Cada mensagem de nuvem para dispositivo é destinada a um único dispositivo por configuração Olá **para** propriedade muito**/devices/ {deviceId} mensagens/devicebound**.</span><span class="sxs-lookup"><span data-stu-id="b260a-109">Each cloud-to-device message is targeted at a single device by setting hello **to** property too**/devices/{deviceId}/messages/devicebound**.</span></span>

<span data-ttu-id="b260a-110">Cada fila de dispositivo contém no máximo 50 mensagens da nuvem para o dispositivo.</span><span class="sxs-lookup"><span data-stu-id="b260a-110">Each device queue holds at most 50 cloud-to-device messages.</span></span> <span data-ttu-id="b260a-111">Tentar toosend mais toohello de mensagens mesmo dispositivo resulta em um erro.</span><span class="sxs-lookup"><span data-stu-id="b260a-111">Trying toosend more messages toohello same device results in an error.</span></span>

## <a name="hello-cloud-to-device-message-lifecycle"></a><span data-ttu-id="b260a-112">Olá do ciclo de vida da mensagem de nuvem para dispositivo</span><span class="sxs-lookup"><span data-stu-id="b260a-112">hello cloud-to-device message lifecycle</span></span>

<span data-ttu-id="b260a-113">entrega de mensagem at-least-once tooguarantee, IoT Hub mantém as mensagens de nuvem para dispositivo nas filas de cada dispositivo.</span><span class="sxs-lookup"><span data-stu-id="b260a-113">tooguarantee at-least-once message delivery, IoT Hub persists cloud-to-device messages in per-device queues.</span></span> <span data-ttu-id="b260a-114">Dispositivos explicitamente devem reconhecer *conclusão* para o IoT Hub tooremove-los do hello fila.</span><span class="sxs-lookup"><span data-stu-id="b260a-114">Devices must explicitly acknowledge *completion* for IoT Hub tooremove them from hello queue.</span></span> <span data-ttu-id="b260a-115">Essa abordagem garante a resiliência contra conectividade e falhas de dispositivo.</span><span class="sxs-lookup"><span data-stu-id="b260a-115">This approach guarantees resiliency against connectivity and device failures.</span></span>

<span data-ttu-id="b260a-116">Olá diagrama a seguir mostra saudação do ciclo de vida estado gráfico para uma mensagem de nuvem para dispositivo no IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="b260a-116">hello following diagram shows hello lifecycle state graph for a cloud-to-device message in IoT Hub.</span></span>

![Ciclo de vida de mensagens da nuvem para o dispositivo][img-lifecycle]

<span data-ttu-id="b260a-118">Quando Olá serviço IoT Hub envia uma mensagem tooa dispositivo, como serviço Olá define o estado da mensagem de saudação muito**enfileirado**.</span><span class="sxs-lookup"><span data-stu-id="b260a-118">When hello IoT Hub service sends a message tooa device, hello service sets hello message state too**Enqueued**.</span></span> <span data-ttu-id="b260a-119">Quando um dispositivo se quiser muito*receber* uma mensagem, o IoT Hub *bloqueios* mensagem de saudação (definindo o estado de saudação muito**invisível**), que permite que outros threads em Olá dispositivo toostart recebendo outras mensagens.</span><span class="sxs-lookup"><span data-stu-id="b260a-119">When a device wants too*receive* a message, IoT Hub *locks* hello message (by setting hello state too**Invisible**), which allows other threads on hello device toostart receiving other messages.</span></span> <span data-ttu-id="b260a-120">Quando um thread de dispositivo conclui o processamento de uma mensagem de saudação, ele notifica o IoT Hub por *concluir* mensagem de saudação.</span><span class="sxs-lookup"><span data-stu-id="b260a-120">When a device thread completes hello processing of a message, it notifies IoT Hub by *completing* hello message.</span></span> <span data-ttu-id="b260a-121">IoT Hub, em seguida, define o estado de saudação muito**concluído**.</span><span class="sxs-lookup"><span data-stu-id="b260a-121">IoT Hub then sets hello state too**Completed**.</span></span>

<span data-ttu-id="b260a-122">Um dispositivo também pode escolher:</span><span class="sxs-lookup"><span data-stu-id="b260a-122">A device can also choose to:</span></span>

* <span data-ttu-id="b260a-123">*Rejeitar* mensagem de saudação, que faz com que o IoT Hub tooset-toohello **morta** estado.</span><span class="sxs-lookup"><span data-stu-id="b260a-123">*Reject* hello message, which causes IoT Hub tooset it toohello **Deadlettered** state.</span></span> <span data-ttu-id="b260a-124">Dispositivos que se conectam por Olá protocolo MQTT não é possível rejeitar mensagens de nuvem para dispositivo.</span><span class="sxs-lookup"><span data-stu-id="b260a-124">Devices that connect over hello MQTT protocol cannot reject cloud-to-device messages.</span></span>
* <span data-ttu-id="b260a-125">*Abandonar* mensagem de saudação, que faz com que o IoT Hub mensagem de saudação tooput novamente na fila de hello, com estado de saudação definido muito**enfileirado**.</span><span class="sxs-lookup"><span data-stu-id="b260a-125">*Abandon* hello message, which causes IoT Hub tooput hello message back in hello queue, with hello state set too**Enqueued**.</span></span>

<span data-ttu-id="b260a-126">Um thread pode falhar tooprocess uma mensagem sem notificar o IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="b260a-126">A thread could fail tooprocess a message without notifying IoT Hub.</span></span> <span data-ttu-id="b260a-127">Nesse caso, as mensagens automaticamente transição do hello **invisível** toohello back estado **enfileirado** estado após um *tempo limite de visibilidade (ou bloqueio)*.</span><span class="sxs-lookup"><span data-stu-id="b260a-127">In this case, messages automatically transition from hello **Invisible** state back toohello **Enqueued** state after a *visibility (or lock) timeout*.</span></span> <span data-ttu-id="b260a-128">valor padrão Olá esse tempo limite é um minuto.</span><span class="sxs-lookup"><span data-stu-id="b260a-128">hello default value of this timeout is one minute.</span></span>

<span data-ttu-id="b260a-129">Uma mensagem pode fazer a transição entre Olá **enfileirado** e **invisível** estados, Olá no máximo, o número de vezes especificado em Olá **máximo de contagem de entrega** propriedade no IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="b260a-129">A message can transition between hello **Enqueued** and **Invisible** states for, at most, hello number of times specified in hello **max delivery count** property on IoT Hub.</span></span> <span data-ttu-id="b260a-130">Após esse número de transições, IoT Hub define o estado de saudação da mensagem de saudação muito**morta**.</span><span class="sxs-lookup"><span data-stu-id="b260a-130">After that number of transitions, IoT Hub sets hello state of hello message too**Deadlettered**.</span></span> <span data-ttu-id="b260a-131">Da mesma forma, o IoT Hub define estado saudação de uma mensagem muito**morta** após seu tempo de expiração (consulte [tempo toolive][lnk-ttl]).</span><span class="sxs-lookup"><span data-stu-id="b260a-131">Similarly, IoT Hub sets hello state of a message too**Deadlettered** after its expiration time (see [Time toolive][lnk-ttl]).</span></span>

<span data-ttu-id="b260a-132">Olá [como mensagens de nuvem para dispositivo toosend com o IoT Hub] [ lnk-c2d-tutorial] mostra como as mensagens de nuvem para dispositivo toosend de saudação de nuvem e recebem-los em um dispositivo.</span><span class="sxs-lookup"><span data-stu-id="b260a-132">hello [How toosend cloud-to-device messages with IoT Hub][lnk-c2d-tutorial] shows you how toosend cloud-to-device messages from hello cloud and receive them on a device.</span></span>

<span data-ttu-id="b260a-133">Normalmente, um dispositivo conclui uma mensagem de nuvem para dispositivo quando Olá perda de mensagem de saudação não afeta a lógica do aplicativo hello.</span><span class="sxs-lookup"><span data-stu-id="b260a-133">Typically, a device completes a cloud-to-device message when hello loss of hello message does not affect hello application logic.</span></span> <span data-ttu-id="b260a-134">Por exemplo, quando dispositivo Olá persistiu conteúdo da mensagem de saudação localmente ou executou com êxito uma operação.</span><span class="sxs-lookup"><span data-stu-id="b260a-134">For example, when hello device has persisted hello message content locally or has successfully executed an operation.</span></span> <span data-ttu-id="b260a-135">mensagem de saudação também pode executar informações temporárias, cuja perda não poderia afetar a funcionalidade de saudação do aplicativo hello.</span><span class="sxs-lookup"><span data-stu-id="b260a-135">hello message could also carry transient information, whose loss would not impact hello functionality of hello application.</span></span> <span data-ttu-id="b260a-136">Às vezes, para tarefas de longa execução, você pode concluir a mensagem de saudação do nuvem para dispositivo depois de persistência Olá descrição da tarefa no armazenamento local.</span><span class="sxs-lookup"><span data-stu-id="b260a-136">Sometimes, for long-running tasks, you can complete hello cloud-to-device message after persisting hello task description in local storage.</span></span> <span data-ttu-id="b260a-137">Em seguida, você pode notificar Olá solução back-end com uma ou mais mensagens de dispositivo para nuvem em vários estágios do progresso da tarefa de saudação.</span><span class="sxs-lookup"><span data-stu-id="b260a-137">Then you can notify hello solution back end with one or more device-to-cloud messages at various stages of progress of hello task.</span></span>

## <a name="message-expiration-time-toolive"></a><span data-ttu-id="b260a-138">Expiração da mensagem (tempo toolive)</span><span class="sxs-lookup"><span data-stu-id="b260a-138">Message expiration (time toolive)</span></span>

<span data-ttu-id="b260a-139">Todas as mensagens da nuvem para o dispositivo têm um tempo de expiração.</span><span class="sxs-lookup"><span data-stu-id="b260a-139">Every cloud-to-device message has an expiration time.</span></span> <span data-ttu-id="b260a-140">Esse tempo é definido pelo serviço de saudação (em Olá **ExpiryTimeUtc** propriedade), ou pelo IoT Hub usando o saudação padrão *tempo toolive* especificado como uma propriedade de IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="b260a-140">This time is set either by hello service (in hello **ExpiryTimeUtc** property), or by IoT Hub using hello default *time toolive* specified as an IoT Hub property.</span></span> <span data-ttu-id="b260a-141">Consulte [Opções de configuração da nuvem para o dispositivo][lnk-c2d-configuration].</span><span class="sxs-lookup"><span data-stu-id="b260a-141">See [Cloud-to-device configuration options][lnk-c2d-configuration].</span></span>

<span data-ttu-id="b260a-142">Uma vantagem de tootake de maneira comum de expiração da mensagem e evitar o envio de mensagens toodisconnected dispositivos, é tooset valores toolive curto período de tempo.</span><span class="sxs-lookup"><span data-stu-id="b260a-142">A common way tootake advantage of message expiration and avoid sending messages toodisconnected devices, is tooset short time toolive values.</span></span> <span data-ttu-id="b260a-143">Essa abordagem gera Olá mesmo resultado manter o estado de conexão do dispositivo hello, ao mesmo tempo, sendo mais eficiente.</span><span class="sxs-lookup"><span data-stu-id="b260a-143">This approach achieves hello same result as maintaining hello device connection state, while being more efficient.</span></span> <span data-ttu-id="b260a-144">Quando você solicitar confirmações de mensagens, o IoT Hub notifica-o de quais dispositivos estão tooreceive capaz de mensagens e os dispositivos que não estão online ou se houve falha.</span><span class="sxs-lookup"><span data-stu-id="b260a-144">When you request message acknowledgements, IoT Hub notifies you which devices are able tooreceive messages, and which devices are not online or have failed.</span></span>

## <a name="message-feedback"></a><span data-ttu-id="b260a-145">Comentários da mensagem</span><span class="sxs-lookup"><span data-stu-id="b260a-145">Message feedback</span></span>

<span data-ttu-id="b260a-146">Quando você enviar uma mensagem de nuvem para dispositivo, serviço Olá pode solicitar a entrega de saudação comentários de mensagem em relação ao estado final de saudação da mensagem.</span><span class="sxs-lookup"><span data-stu-id="b260a-146">When you send a cloud-to-device message, hello service can request hello delivery of per-message feedback regarding hello final state of that message.</span></span>

| <span data-ttu-id="b260a-147">Propriedade Ack</span><span class="sxs-lookup"><span data-stu-id="b260a-147">Ack property</span></span> | <span data-ttu-id="b260a-148">Comportamento</span><span class="sxs-lookup"><span data-stu-id="b260a-148">Behavior</span></span> |
| ------------ | -------- |
| <span data-ttu-id="b260a-149">**positivo**</span><span class="sxs-lookup"><span data-stu-id="b260a-149">**positive**</span></span> | <span data-ttu-id="b260a-150">IoT Hub gera uma mensagem de comentários se e somente se, mensagem de saudação do nuvem para dispositivo atingido Olá **concluído** estado.</span><span class="sxs-lookup"><span data-stu-id="b260a-150">IoT Hub generates a feedback message if, and only if, hello cloud-to-device message reached hello **Completed** state.</span></span> |
| <span data-ttu-id="b260a-151">**negativo**</span><span class="sxs-lookup"><span data-stu-id="b260a-151">**negative**</span></span> | <span data-ttu-id="b260a-152">IoT Hub gera uma mensagem de comentários, e apenas se, mensagem de saudação do nuvem para dispositivo atinge Olá **morta** estado.</span><span class="sxs-lookup"><span data-stu-id="b260a-152">IoT Hub generates a feedback message, if and only if, hello cloud-to-device message reaches hello **Deadlettered** state.</span></span> |
| <span data-ttu-id="b260a-153">**completo**</span><span class="sxs-lookup"><span data-stu-id="b260a-153">**full**</span></span>     | <span data-ttu-id="b260a-154">O Hub IoT gera uma mensagem de comentários em ambos os casos.</span><span class="sxs-lookup"><span data-stu-id="b260a-154">IoT Hub generates a feedback message in either case.</span></span> |

<span data-ttu-id="b260a-155">Se **Ack** é **completo**e você não recebe uma mensagem de comentários, o que significa que essa mensagem de saudação do comentários expirou.</span><span class="sxs-lookup"><span data-stu-id="b260a-155">If **Ack** is **full**, and you don't receive a feedback message, it means that hello feedback message expired.</span></span> <span data-ttu-id="b260a-156">Olá serviço não é possível saber qual é a mensagem original com toohello.</span><span class="sxs-lookup"><span data-stu-id="b260a-156">hello service can't know what happened toohello original message.</span></span> <span data-ttu-id="b260a-157">Na prática, um serviço deve garantir que ele possa processar comentários de saudação antes de expirar.</span><span class="sxs-lookup"><span data-stu-id="b260a-157">In practice, a service should ensure that it can process hello feedback before it expires.</span></span> <span data-ttu-id="b260a-158">tempo máximo de expiração de saudação é dois dias, que permite bastante tempo tooget Olá serviço em execução novamente se ocorrer uma falha.</span><span class="sxs-lookup"><span data-stu-id="b260a-158">hello maximum expiry time is two days, which allows plenty of time tooget hello service running again if a failure occurs.</span></span>

<span data-ttu-id="b260a-159">Como explicado em [Pontos de extremidade][lnk-endpoints], o Hub IoT fornece comentários por meio de um ponto de extremidade voltado para o serviço (**/messages/servicebound/feedback**) como mensagens.</span><span class="sxs-lookup"><span data-stu-id="b260a-159">As explained in [Endpoints][lnk-endpoints], IoT Hub delivers feedback through a service-facing endpoint (**/messages/servicebound/feedback**) as messages.</span></span> <span data-ttu-id="b260a-160">Olá semântica para receber comentários Olá mesmo para mensagens de nuvem para dispositivos e ter Olá mesmo [ciclo de vida da mensagem][lnk-lifecycle].</span><span class="sxs-lookup"><span data-stu-id="b260a-160">hello semantics for receiving feedback are hello same as for cloud-to-device messages, and have hello same [Message lifecycle][lnk-lifecycle].</span></span> <span data-ttu-id="b260a-161">Sempre que possível, comentários de mensagem é colocado em lote em uma única mensagem, com hello formato a seguir:</span><span class="sxs-lookup"><span data-stu-id="b260a-161">Whenever possible, message feedback is batched in a single message, with hello following format:</span></span>

| <span data-ttu-id="b260a-162">Propriedade</span><span class="sxs-lookup"><span data-stu-id="b260a-162">Property</span></span>     | <span data-ttu-id="b260a-163">Descrição</span><span class="sxs-lookup"><span data-stu-id="b260a-163">Description</span></span> |
| ------------ | ----------- |
| <span data-ttu-id="b260a-164">EnqueuedTime</span><span class="sxs-lookup"><span data-stu-id="b260a-164">EnqueuedTime</span></span> | <span data-ttu-id="b260a-165">O carimbo de hora que indica quando a mensagem de saudação foi criada.</span><span class="sxs-lookup"><span data-stu-id="b260a-165">Timestamp indicating when hello message was created.</span></span> |
| <span data-ttu-id="b260a-166">UserId</span><span class="sxs-lookup"><span data-stu-id="b260a-166">UserId</span></span>       | `{iot hub name}` |
| <span data-ttu-id="b260a-167">ContentType</span><span class="sxs-lookup"><span data-stu-id="b260a-167">ContentType</span></span>  | `application/vnd.microsoft.iothub.feedback.json` |

<span data-ttu-id="b260a-168">corpo de saudação é uma matriz serializado para JSON de registros, cada um com hello propriedades a seguir:</span><span class="sxs-lookup"><span data-stu-id="b260a-168">hello body is a JSON-serialized array of records, each with hello following properties:</span></span>

| <span data-ttu-id="b260a-169">Propriedade</span><span class="sxs-lookup"><span data-stu-id="b260a-169">Property</span></span>           | <span data-ttu-id="b260a-170">Descrição</span><span class="sxs-lookup"><span data-stu-id="b260a-170">Description</span></span> |
| ------------------ | ----------- |
| <span data-ttu-id="b260a-171">EnqueuedTimeUtc</span><span class="sxs-lookup"><span data-stu-id="b260a-171">EnqueuedTimeUtc</span></span>    | <span data-ttu-id="b260a-172">O carimbo de hora que indica quando o resultado de saudação da mensagem de saudação aconteceu.</span><span class="sxs-lookup"><span data-stu-id="b260a-172">Timestamp indicating when hello outcome of hello message happened.</span></span> <span data-ttu-id="b260a-173">Olá, por exemplo, o dispositivo foi concluído ou mensagem de saudação expirou.</span><span class="sxs-lookup"><span data-stu-id="b260a-173">For example, hello device completed or hello message expired.</span></span> |
| <span data-ttu-id="b260a-174">OriginalMessageId</span><span class="sxs-lookup"><span data-stu-id="b260a-174">OriginalMessageId</span></span>  | <span data-ttu-id="b260a-175">**MessageId** de toowhich de nuvem para dispositivo mensagem de saudação essas informações de comentários está relacionada.</span><span class="sxs-lookup"><span data-stu-id="b260a-175">**MessageId** of hello cloud-to-device message toowhich this feedback information relates.</span></span> |
| <span data-ttu-id="b260a-176">StatusCode</span><span class="sxs-lookup"><span data-stu-id="b260a-176">StatusCode</span></span>         | <span data-ttu-id="b260a-177">Cadeia de caracteres obrigatória.</span><span class="sxs-lookup"><span data-stu-id="b260a-177">Required string.</span></span> <span data-ttu-id="b260a-178">Usado em mensagens de comentários geradas pelo Hub IoT.</span><span class="sxs-lookup"><span data-stu-id="b260a-178">Used in feedback messages generated by IoT Hub.</span></span> <br/> <span data-ttu-id="b260a-179">'Êxito'</span><span class="sxs-lookup"><span data-stu-id="b260a-179">'Success'</span></span> <br/> <span data-ttu-id="b260a-180">'Expirado'</span><span class="sxs-lookup"><span data-stu-id="b260a-180">'Expired'</span></span> <br/> <span data-ttu-id="b260a-181">'DeliveryCountExceeded'</span><span class="sxs-lookup"><span data-stu-id="b260a-181">'DeliveryCountExceeded'</span></span> <br/> <span data-ttu-id="b260a-182">'Rejeitado'</span><span class="sxs-lookup"><span data-stu-id="b260a-182">'Rejected'</span></span> <br/> <span data-ttu-id="b260a-183">'Limpo'</span><span class="sxs-lookup"><span data-stu-id="b260a-183">'Purged'</span></span> |
| <span data-ttu-id="b260a-184">Descrição</span><span class="sxs-lookup"><span data-stu-id="b260a-184">Description</span></span>        | <span data-ttu-id="b260a-185">Valores de cadeia de caracteres para **StatusCode**.</span><span class="sxs-lookup"><span data-stu-id="b260a-185">String values for **StatusCode**.</span></span> |
| <span data-ttu-id="b260a-186">deviceId</span><span class="sxs-lookup"><span data-stu-id="b260a-186">DeviceId</span></span>           | <span data-ttu-id="b260a-187">**DeviceId** de dispositivo de destino de saudação do toowhich de nuvem para dispositivo mensagem de saudação peça de comentários está relacionada.</span><span class="sxs-lookup"><span data-stu-id="b260a-187">**DeviceId** of hello target device of hello cloud-to-device message toowhich this piece of feedback relates.</span></span> |
| <span data-ttu-id="b260a-188">DeviceGenerationId</span><span class="sxs-lookup"><span data-stu-id="b260a-188">DeviceGenerationId</span></span> | <span data-ttu-id="b260a-189">**DeviceGenerationId** de dispositivo de destino de saudação do toowhich de nuvem para dispositivo mensagem de saudação peça de comentários está relacionada.</span><span class="sxs-lookup"><span data-stu-id="b260a-189">**DeviceGenerationId** of hello target device of hello cloud-to-device message toowhich this piece of feedback relates.</span></span> |

<span data-ttu-id="b260a-190">serviço de saudação deve especificar um **MessageId** para hello nuvem para dispositivo mensagem toocorrelate capaz de toobe seus comentários com mensagem de saudação do original.</span><span class="sxs-lookup"><span data-stu-id="b260a-190">hello service must specify a **MessageId** for hello cloud-to-device message toobe able toocorrelate its feedback with hello original message.</span></span>

<span data-ttu-id="b260a-191">Olá, exemplo a seguir mostra Olá corpo de uma mensagem de comentários.</span><span class="sxs-lookup"><span data-stu-id="b260a-191">hello following example shows hello body of a feedback message.</span></span>

```json
[
  {
    "OriginalMessageId": "0987654321",
    "EnqueuedTimeUtc": "2015-07-28T16:24:48.789Z",
    "StatusCode": 0,
    "Description": "Success",
    "DeviceId": "123",
    "DeviceGenerationId": "abcdefghijklmnopqrstuvwxyz"
  },
  {
    ...
  },
  ...
]
```

## <a name="cloud-to-device-configuration-options"></a><span data-ttu-id="b260a-192">Opções de configuração da nuvem para o dispositivo</span><span class="sxs-lookup"><span data-stu-id="b260a-192">Cloud-to-device configuration options</span></span>

<span data-ttu-id="b260a-193">Cada hub IoT expõe Olá as opções de configuração para a nuvem para dispositivo de mensagens a seguir:</span><span class="sxs-lookup"><span data-stu-id="b260a-193">Each IoT hub exposes hello following configuration options for cloud-to-device messaging:</span></span>

| <span data-ttu-id="b260a-194">Propriedade</span><span class="sxs-lookup"><span data-stu-id="b260a-194">Property</span></span>                  | <span data-ttu-id="b260a-195">Descrição</span><span class="sxs-lookup"><span data-stu-id="b260a-195">Description</span></span> | <span data-ttu-id="b260a-196">Intervalo e padrão</span><span class="sxs-lookup"><span data-stu-id="b260a-196">Range and default</span></span> |
| ------------------------- | ----------- | ----------------- |
| <span data-ttu-id="b260a-197">defaultTtlAsIso8601</span><span class="sxs-lookup"><span data-stu-id="b260a-197">defaultTtlAsIso8601</span></span>       | <span data-ttu-id="b260a-198">TTL padrão para mensagens da nuvem para o dispositivo.</span><span class="sxs-lookup"><span data-stu-id="b260a-198">Default TTL for cloud-to-device messages.</span></span> | <span data-ttu-id="b260a-199">Intervalo de ISO_8601 a too2D (mínimo 1 minuto).</span><span class="sxs-lookup"><span data-stu-id="b260a-199">ISO_8601 interval up too2D (minimum 1 minute).</span></span> <span data-ttu-id="b260a-200">Padrão: 1 hora.</span><span class="sxs-lookup"><span data-stu-id="b260a-200">Default: 1 hour.</span></span> |
| <span data-ttu-id="b260a-201">maxDeliveryCount</span><span class="sxs-lookup"><span data-stu-id="b260a-201">maxDeliveryCount</span></span>          | <span data-ttu-id="b260a-202">Contagem máxima de entrega para filas de nuvem para o dispositivo por dispositivo.</span><span class="sxs-lookup"><span data-stu-id="b260a-202">Maximum delivery count for cloud-to-device per-device queues.</span></span> | <span data-ttu-id="b260a-203">1 too100.</span><span class="sxs-lookup"><span data-stu-id="b260a-203">1 too100.</span></span> <span data-ttu-id="b260a-204">Padrão: 10.</span><span class="sxs-lookup"><span data-stu-id="b260a-204">Default: 10.</span></span> |
| <span data-ttu-id="b260a-205">feedback.ttlAsIso8601</span><span class="sxs-lookup"><span data-stu-id="b260a-205">feedback.ttlAsIso8601</span></span>     | <span data-ttu-id="b260a-206">Retenção de mensagens informativas do serviço associado.</span><span class="sxs-lookup"><span data-stu-id="b260a-206">Retention for service-bound feedback messages.</span></span> | <span data-ttu-id="b260a-207">Intervalo de ISO_8601 a too2D (mínimo 1 minuto).</span><span class="sxs-lookup"><span data-stu-id="b260a-207">ISO_8601 interval up too2D (minimum 1 minute).</span></span> <span data-ttu-id="b260a-208">Padrão: 1 hora.</span><span class="sxs-lookup"><span data-stu-id="b260a-208">Default: 1 hour.</span></span> |
| <span data-ttu-id="b260a-209">feedback.maxDeliveryCount</span><span class="sxs-lookup"><span data-stu-id="b260a-209">feedback.maxDeliveryCount</span></span> |<span data-ttu-id="b260a-210">Contagem máxima de entrega para a fila de comentários.</span><span class="sxs-lookup"><span data-stu-id="b260a-210">Maximum delivery count for feedback queue.</span></span> | <span data-ttu-id="b260a-211">1 too100.</span><span class="sxs-lookup"><span data-stu-id="b260a-211">1 too100.</span></span> <span data-ttu-id="b260a-212">Padrão: 100.</span><span class="sxs-lookup"><span data-stu-id="b260a-212">Default: 100.</span></span> |

<span data-ttu-id="b260a-213">Para obter mais informações sobre como tooset essas opções de configuração, consulte [hubs IoT criar][lnk-portal].</span><span class="sxs-lookup"><span data-stu-id="b260a-213">For more information about how tooset these configuration options, see [Create IoT hubs][lnk-portal].</span></span>

## <a name="next-steps"></a><span data-ttu-id="b260a-214">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="b260a-214">Next steps</span></span>

<span data-ttu-id="b260a-215">Para obter informações sobre SDKs de saudação, você pode usar mensagens de nuvem para dispositivo tooreceive, consulte [SDKs do Azure IoT][lnk-sdks].</span><span class="sxs-lookup"><span data-stu-id="b260a-215">For information about hello SDKs you can use tooreceive cloud-to-device messages, see [Azure IoT SDKs][lnk-sdks].</span></span>

<span data-ttu-id="b260a-216">tootry limite de recebimento de mensagens de nuvem para dispositivo, consulte Olá [enviar nuvem para dispositivo] [ lnk-c2d-tutorial] tutorial.</span><span class="sxs-lookup"><span data-stu-id="b260a-216">tootry out receiving cloud-to-device messages, see hello [Send cloud-to-device][lnk-c2d-tutorial] tutorial.</span></span>

[img-lifecycle]: ./media/iot-hub-devguide-messages-c2d/lifecycle.png

[lnk-portal]: iot-hub-create-through-portal.md
[lnk-c2d-guidance]: iot-hub-devguide-c2d-guidance.md
[lnk-endpoints]: iot-hub-devguide-endpoints.md
[lnk-sdks]: iot-hub-devguide-sdks.md
[lnk-ttl]: #message-expiration-time-to-live
[lnk-c2d-configuration]: #cloud-to-device-configuration-options
[lnk-lifecycle]: #message-lifecycle
[lnk-c2d-tutorial]: iot-hub-csharp-csharp-c2d.md
