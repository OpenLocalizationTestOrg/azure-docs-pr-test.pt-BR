---
title: Entender o Registro da identidade do Hub IoT do Azure | Microsoft Docs
description: "Guia do desenvolvedor ‑ descrição do Registro de identidade do Hub IoT e como usá-lo para gerenciar seus dispositivos. Inclui informações sobre a importação e exportação de identidades de dispositivo em massa."
services: iot-hub
documentationcenter: .net
author: dominicbetts
manager: timlt
editor: 
ms.assetid: 0706eccd-e84c-4ae7-bbd4-2b1a22241147
ms.service: iot-hub
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/08/2017
ms.author: dobett
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: b6e9c7b71fa6fc78f97c0144c735fc44778181d8
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/18/2017
---
# <a name="understand-the-identity-registry-in-your-iot-hub"></a><span data-ttu-id="9a798-104">Entender o registro de identidade no Hub IoT</span><span class="sxs-lookup"><span data-stu-id="9a798-104">Understand the identity registry in your IoT hub</span></span>

<span data-ttu-id="9a798-105">Cada Hub IoT tem um registro de identidade que armazena informações sobre os dispositivos com permissão para se conectar ao Hub IoT.</span><span class="sxs-lookup"><span data-stu-id="9a798-105">Every IoT hub has an identity registry that stores information about the devices permitted to connect to the IoT hub.</span></span> <span data-ttu-id="9a798-106">Antes de um dispositivo poder se conectar a um Hub IoT, deve existir uma entrada para esse dispositivo no registro de identidade do Hub IoT.</span><span class="sxs-lookup"><span data-stu-id="9a798-106">Before a device can connect to an IoT hub, there must be an entry for that device in the IoT hub's identity registry.</span></span> <span data-ttu-id="9a798-107">O dispositivo também deve realizar a autenticação no Hub IoT com base em credenciais armazenadas no registro de identidade.</span><span class="sxs-lookup"><span data-stu-id="9a798-107">A device must also authenticate with the IoT hub based on credentials stored in the identity registry.</span></span>

<span data-ttu-id="9a798-108">A ID do dispositivo armazenada no registro de identidade diferencia maiúsculas de minúsculas.</span><span class="sxs-lookup"><span data-stu-id="9a798-108">The device ID stored in the identity registry is case-sensitive.</span></span>

<span data-ttu-id="9a798-109">Em um alto nível, o registro de identidade é uma coleção compatível com REST de recursos de identidade do dispositivo.</span><span class="sxs-lookup"><span data-stu-id="9a798-109">At a high level, the identity registry is a REST-capable collection of device identity resources.</span></span> <span data-ttu-id="9a798-110">Quando você adiciona uma entrada ao registro de identidade, o Hub IoT cria um conjunto de recursos por dispositivo, tal como a fila que contém mensagens em andamento da nuvem para o dispositivo.</span><span class="sxs-lookup"><span data-stu-id="9a798-110">When you add an entry in the identity registry, IoT Hub creates a set of per-device resources such as the queue that contains in-flight cloud-to-device messages.</span></span>

### <a name="when-to-use"></a><span data-ttu-id="9a798-111">Quando usar</span><span class="sxs-lookup"><span data-stu-id="9a798-111">When to use</span></span>

<span data-ttu-id="9a798-112">Use o registro de identidade quando você precisa:</span><span class="sxs-lookup"><span data-stu-id="9a798-112">Use the identity registry when you need to:</span></span>

* <span data-ttu-id="9a798-113">Provisionar dispositivos que se conectam ao Hub IoT.</span><span class="sxs-lookup"><span data-stu-id="9a798-113">Provision devices that connect to your IoT hub.</span></span>
* <span data-ttu-id="9a798-114">Controlar o acesso por dispositivo aos pontos de extremidade do hub voltados para o dispositivo.</span><span class="sxs-lookup"><span data-stu-id="9a798-114">Control per-device access to your hub's device-facing endpoints.</span></span>

> [!NOTE]
> <span data-ttu-id="9a798-115">O registro de identidade não contém os metadados específicos do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="9a798-115">The identity registry does not contain any application-specific metadata.</span></span>

## <a name="identity-registry-operations"></a><span data-ttu-id="9a798-116">Operações de registro de identidade</span><span class="sxs-lookup"><span data-stu-id="9a798-116">Identity registry operations</span></span>

<span data-ttu-id="9a798-117">O registro de identidade do Hub IoT expõe as seguintes operações:</span><span class="sxs-lookup"><span data-stu-id="9a798-117">The IoT Hub identity registry exposes the following operations:</span></span>

* <span data-ttu-id="9a798-118">Criar identidade do dispositivo</span><span class="sxs-lookup"><span data-stu-id="9a798-118">Create device identity</span></span>
* <span data-ttu-id="9a798-119">Atualizar identidade do dispositivo</span><span class="sxs-lookup"><span data-stu-id="9a798-119">Update device identity</span></span>
* <span data-ttu-id="9a798-120">Recuperar a identidade do dispositivo por ID</span><span class="sxs-lookup"><span data-stu-id="9a798-120">Retrieve device identity by ID</span></span>
* <span data-ttu-id="9a798-121">Excluir identidade do dispositivo</span><span class="sxs-lookup"><span data-stu-id="9a798-121">Delete device identity</span></span>
* <span data-ttu-id="9a798-122">Listar até 1000 identidades</span><span class="sxs-lookup"><span data-stu-id="9a798-122">List up to 1000 identities</span></span>
* <span data-ttu-id="9a798-123">Exportar todas as identidades para o Armazenamento de Blobs do Azure</span><span class="sxs-lookup"><span data-stu-id="9a798-123">Export all identities to Azure blob storage</span></span>
* <span data-ttu-id="9a798-124">Importar identidades do Armazenamento de Blobs do Azure</span><span class="sxs-lookup"><span data-stu-id="9a798-124">Import identities from Azure blob storage</span></span>

<span data-ttu-id="9a798-125">Todas essas operações podem usar a simultaneidade otimista, conforme especificado na [RFC7232][lnk-rfc7232].</span><span class="sxs-lookup"><span data-stu-id="9a798-125">All these operations can use optimistic concurrency, as specified in [RFC7232][lnk-rfc7232].</span></span>

> [!IMPORTANT]
> <span data-ttu-id="9a798-126">A única maneira de recuperar todas as identidades em um registro de identidade do Hub IoT é usar a funcionalidade [Exportar][lnk-export].</span><span class="sxs-lookup"><span data-stu-id="9a798-126">The only way to retrieve all identities in an IoT hub's identity registry is to use the [Export][lnk-export] functionality.</span></span>

<span data-ttu-id="9a798-127">Um registro de identidade do Hub IoT:</span><span class="sxs-lookup"><span data-stu-id="9a798-127">An IoT Hub identity registry:</span></span>

* <span data-ttu-id="9a798-128">Não contém metadados de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="9a798-128">Does not contain any application metadata.</span></span>
* <span data-ttu-id="9a798-129">Pode ser acessado como um dicionário usando o **deviceId** como a chave.</span><span class="sxs-lookup"><span data-stu-id="9a798-129">Can be accessed like a dictionary, by using the **deviceId** as the key.</span></span>
* <span data-ttu-id="9a798-130">Não permite consultas expressivas.</span><span class="sxs-lookup"><span data-stu-id="9a798-130">Does not support expressive queries.</span></span>

<span data-ttu-id="9a798-131">Normalmente, uma solução de IoT tem um armazenamento específico da solução separado que contém metadados específicos do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="9a798-131">An IoT solution typically has a separate solution-specific store that contains application-specific metadata.</span></span> <span data-ttu-id="9a798-132">Por exemplo, o armazenamento específico da solução em uma solução de construção inteligente seria registrar a sala na qual um sensor de temperatura está implantado.</span><span class="sxs-lookup"><span data-stu-id="9a798-132">For example, the solution-specific store in a smart building solution would record the room in which a temperature sensor is deployed.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="9a798-133">Você deve usar o registro de identidade apenas para operações de provisionamento e gerenciamento de dispositivos.</span><span class="sxs-lookup"><span data-stu-id="9a798-133">Only use the identity registry for device management and provisioning operations.</span></span> <span data-ttu-id="9a798-134">As operações de alta produtividade no tempo de execução não devem depender da execução de operações no registro de identidade.</span><span class="sxs-lookup"><span data-stu-id="9a798-134">High throughput operations at run time should not depend on performing operations in the identity registry.</span></span> <span data-ttu-id="9a798-135">Por exemplo, verificar o estado da conexão de um dispositivo antes de enviar um comando não é um padrão permitido.</span><span class="sxs-lookup"><span data-stu-id="9a798-135">For example, checking the connection state of a device before sending a command is not a supported pattern.</span></span> <span data-ttu-id="9a798-136">Lembre-se de verificar as [taxas de limitação][lnk-quotas] do registro de identidade e o padrão de [pulsação do dispositivo][lnk-guidance-heartbeat].</span><span class="sxs-lookup"><span data-stu-id="9a798-136">Make sure to check the [throttling rates][lnk-quotas] for the identity registry, and the [device heartbeat][lnk-guidance-heartbeat] pattern.</span></span>

## <a name="disable-devices"></a><span data-ttu-id="9a798-137">Desabilitar dispositivos</span><span class="sxs-lookup"><span data-stu-id="9a798-137">Disable devices</span></span>

<span data-ttu-id="9a798-138">Você pode desabilitar dispositivos atualizando a propriedade **status** de uma identidade no Registro.</span><span class="sxs-lookup"><span data-stu-id="9a798-138">You can disable devices by updating the **status** property of an identity in the identity registry.</span></span> <span data-ttu-id="9a798-139">Normalmente, você deve usar essa propriedade em dois cenários:</span><span class="sxs-lookup"><span data-stu-id="9a798-139">Typically, you use this property in two scenarios:</span></span>

* <span data-ttu-id="9a798-140">Durante um processo de orquestração de provisionamento.</span><span class="sxs-lookup"><span data-stu-id="9a798-140">During a provisioning orchestration process.</span></span> <span data-ttu-id="9a798-141">Para saber mais, veja [Provisionamento de dispositivo][lnk-guidance-provisioning].</span><span class="sxs-lookup"><span data-stu-id="9a798-141">For more information, see [Device Provisioning][lnk-guidance-provisioning].</span></span>
* <span data-ttu-id="9a798-142">Se, por algum motivo, você considerar que um dispositivo está comprometido ou que se tornou não autorizado.</span><span class="sxs-lookup"><span data-stu-id="9a798-142">If, for any reason, you consider a device is compromised or has become unauthorized.</span></span>

## <a name="import-and-export-device-identities"></a><span data-ttu-id="9a798-143">Importar e exportar identidades de dispositivo</span><span class="sxs-lookup"><span data-stu-id="9a798-143">Import and export device identities</span></span>

<span data-ttu-id="9a798-144">É possível exportar identidades de dispositivo em massa do registro de identidade de um Hub IoT usando operações assíncronas no [ponto de extremidade do provedor de recursos do Hub IoT][lnk-endpoints].</span><span class="sxs-lookup"><span data-stu-id="9a798-144">You can export device identities in bulk from an IoT hub's identity registry, by using asynchronous operations on the [IoT Hub resource provider endpoint][lnk-endpoints].</span></span> <span data-ttu-id="9a798-145">As exportações são trabalhos de execução longa que usam um contêiner de blobs fornecido pelo cliente para salvar dados de identidade do dispositivo lidos no registro de identidade.</span><span class="sxs-lookup"><span data-stu-id="9a798-145">Exports are long-running jobs that use a customer-supplied blob container to save device identity data read from the identity registry.</span></span>

<span data-ttu-id="9a798-146">É possível importar identidades de dispositivo em massa para um registro de identidade de um Hub IoT usando operações assíncronas no [ponto de extremidade do provedor de recursos do Hub IoT][lnk-endpoints].</span><span class="sxs-lookup"><span data-stu-id="9a798-146">You can import device identities in bulk to an IoT hub's identity registry, by using asynchronous operations on the [IoT Hub resource provider endpoint][lnk-endpoints].</span></span> <span data-ttu-id="9a798-147">As exportações são trabalhos de execução longa que usam dados em um contêiner de blobs fornecido pelo cliente para gravar dados de identidade do dispositivo no registro de identidade.</span><span class="sxs-lookup"><span data-stu-id="9a798-147">Imports are long-running jobs that use data in a customer-supplied blob container to write device identity data into the identity registry.</span></span>

* <span data-ttu-id="9a798-148">Para obter informações detalhadas sobre as APIs de importação e exportação, consulte [APIs REST do provedor de recursos do Hub IoT][lnk-resource-provider-apis].</span><span class="sxs-lookup"><span data-stu-id="9a798-148">For detailed information about the import and export APIs, see [IoT Hub resource provider REST APIs][lnk-resource-provider-apis].</span></span>
* <span data-ttu-id="9a798-149">Para saber mais sobre como executar trabalhos de importação e exportação, veja [Gerenciamento em massa de identidades de dispositivo do Hub IoT][lnk-bulk-identity].</span><span class="sxs-lookup"><span data-stu-id="9a798-149">To learn more about running import and export jobs, see [Bulk management of IoT Hub device identities][lnk-bulk-identity].</span></span>

## <a name="device-provisioning"></a><span data-ttu-id="9a798-150">Provisionamento de dispositivos</span><span class="sxs-lookup"><span data-stu-id="9a798-150">Device provisioning</span></span>

<span data-ttu-id="9a798-151">Os dados de dispositivo que uma determinada solução IoT armazena dependem dos requisitos específicos dessa solução.</span><span class="sxs-lookup"><span data-stu-id="9a798-151">The device data that a given IoT solution stores depends on the specific requirements of that solution.</span></span> <span data-ttu-id="9a798-152">Porém, no mínimo, uma solução deve armazenar identidades e chaves de autenticação.</span><span class="sxs-lookup"><span data-stu-id="9a798-152">But, as a minimum, a solution must store device identities and authentication keys.</span></span> <span data-ttu-id="9a798-153">O Hub IoT do Azure inclui um registro de identidades que pode armazenar valores para cada dispositivo, como IDs, chaves de autenticação e códigos de status.</span><span class="sxs-lookup"><span data-stu-id="9a798-153">Azure IoT Hub includes an identity registry that can store values for each device such as IDs, authentication keys, and status codes.</span></span> <span data-ttu-id="9a798-154">Uma solução pode usar outros serviços do Azure como armazenamento de tabelas, armazenamento de blobs ou Cosmos DB para armazenar outros dados de dispositivo.</span><span class="sxs-lookup"><span data-stu-id="9a798-154">A solution can use other Azure services such as table storage, blob storage, or Cosmos DB to store any additional device data.</span></span>

<span data-ttu-id="9a798-155">*Provisionamento de dispositivos* é o processo de adição dos dados iniciais do dispositivo para as lojas em sua solução.</span><span class="sxs-lookup"><span data-stu-id="9a798-155">*Device provisioning* is the process of adding the initial device data to the stores in your solution.</span></span> <span data-ttu-id="9a798-156">Para permitir que um dispositivo se conecte ao hub, você deve adicionar uma ID e chaves de dispositivo ao registro de identidade do Hub IoT.</span><span class="sxs-lookup"><span data-stu-id="9a798-156">To enable a new device to connect to your hub, you must add a device ID and keys to the IoT Hub identity registry.</span></span> <span data-ttu-id="9a798-157">Como parte do processo de provisionamento, talvez seja necessário inicializar dados específicos do dispositivo em outros repositórios da solução.</span><span class="sxs-lookup"><span data-stu-id="9a798-157">As part of the provisioning process, you might need to initialize device-specific data in other solution stores.</span></span>

## <a name="device-heartbeat"></a><span data-ttu-id="9a798-158">Pulsação do dispositivo</span><span class="sxs-lookup"><span data-stu-id="9a798-158">Device heartbeat</span></span>

<span data-ttu-id="9a798-159">O registro de identidade do Hub IoT contém um campo chamado **connectionState**.</span><span class="sxs-lookup"><span data-stu-id="9a798-159">The IoT Hub identity registry contains a field called **connectionState**.</span></span> <span data-ttu-id="9a798-160">Use somente o campo **connectionState** durante o desenvolvimento e a depuração.</span><span class="sxs-lookup"><span data-stu-id="9a798-160">Only use the **connectionState** field during development and debugging.</span></span> <span data-ttu-id="9a798-161">Soluções de IoT não devem consultar o campo em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="9a798-161">IoT solutions should not query the field at run time.</span></span> <span data-ttu-id="9a798-162">Por exemplo, não consulte o campo **connectionState** para verificar se um dispositivo está conectado antes de enviar uma mensagem de nuvem para dispositivo ou um SMS.</span><span class="sxs-lookup"><span data-stu-id="9a798-162">For example, do not query the **connectionState** field to check if a device is connected before you send a cloud-to-device message or an SMS.</span></span>

<span data-ttu-id="9a798-163">Se sua solução de IoT precisa saber se um dispositivo está conectado, você deve implementar o *padrão de pulsação*.</span><span class="sxs-lookup"><span data-stu-id="9a798-163">If your IoT solution needs to know if a device is connected, you should implement the *heartbeat pattern*.</span></span>

<span data-ttu-id="9a798-164">No padrão de pulsação, o dispositivo envia mensagens do dispositivo para a nuvem pelo menos uma vez a cada período de tempo fixo (por exemplo, pelo menos uma vez a cada hora).</span><span class="sxs-lookup"><span data-stu-id="9a798-164">In the heartbeat pattern, the device sends device-to-cloud messages at least once every fixed amount of time (for example, at least once every hour).</span></span> <span data-ttu-id="9a798-165">Portanto, mesmo quando um dispositivo não tiver dados para enviar, ele enviará uma mensagem vazia do dispositivo para a nuvem (geralmente com uma propriedade que a identifique como uma pulsação).</span><span class="sxs-lookup"><span data-stu-id="9a798-165">Therefore, even if a device does not have any data to send, it still sends an empty device-to-cloud message (usually with a property that identifies it as a heartbeat).</span></span> <span data-ttu-id="9a798-166">No lado do serviço, a solução mantém um mapa com a última pulsação recebida para cada dispositivo.</span><span class="sxs-lookup"><span data-stu-id="9a798-166">On the service side, the solution maintains a map with the last heartbeat received for each device.</span></span> <span data-ttu-id="9a798-167">Se a solução não recebe uma mensagem de pulsação de um dispositivo no tempo esperado, ela supõe que há um problema com ele.</span><span class="sxs-lookup"><span data-stu-id="9a798-167">If the solution does not receive a heartbeat message within the expected time from the device, it assumes that there is a problem with the device.</span></span>

<span data-ttu-id="9a798-168">Uma implementação mais complexa pode incluir as informações do [monitoramento de operações][lnk-devguide-opmon] para identificar dispositivos que estão tentando se conectar ou se comunicar, mas falham.</span><span class="sxs-lookup"><span data-stu-id="9a798-168">A more complex implementation could include the information from [operations monitoring][lnk-devguide-opmon] to identify devices that are trying to connect or communicate but failing.</span></span> <span data-ttu-id="9a798-169">Ao implementar o padrão de pulsação, verifique as [Cotas e limitações do Hub IoT][lnk-quotas].</span><span class="sxs-lookup"><span data-stu-id="9a798-169">When you implement the heartbeat pattern, make sure to check [IoT Hub Quotas and Throttles][lnk-quotas].</span></span>

> [!NOTE]
> <span data-ttu-id="9a798-170">Se uma solução IoT usa o estado de conexão apenas para determinar se deve enviar mensagens da nuvem para o dispositivo e as mensagens não forem difundidas para conjuntos grandes de dispositivos, considere usar o padrão mais simples de *tempo de expiração mais curto*.</span><span class="sxs-lookup"><span data-stu-id="9a798-170">If an IoT solution uses the connection state solely to determine whether to send cloud-to-device messages, and messages are not broadcast to large sets of devices, consider using the simpler *short expiry time* pattern.</span></span> <span data-ttu-id="9a798-171">Esse padrão é o mesmo que manter um registro do estado da conexão do dispositivo usando o padrão de pulsação, embora seja mais eficiente.</span><span class="sxs-lookup"><span data-stu-id="9a798-171">This pattern achieves the same result as maintaining a device connection state registry using the heartbeat pattern, while being more efficient.</span></span> <span data-ttu-id="9a798-172">Se você solicita confirmações de mensagem, o Hub IoT pode notificar você sobre quais dispositivos têm capacidade de receber mensagens e quais não têm.</span><span class="sxs-lookup"><span data-stu-id="9a798-172">If you request message acknowledgements, IoT Hub can notify you about which devices are able to receive messages and which are not.</span></span>

## <a name="device-lifecycle-notifications"></a><span data-ttu-id="9a798-173">Notificações do ciclo de vida do dispositivo</span><span class="sxs-lookup"><span data-stu-id="9a798-173">Device lifecycle notifications</span></span>

<span data-ttu-id="9a798-174">O Hub IoT pode notificar sua solução de IoT quando uma identidade de dispositivo é criada ou excluída, enviando notificações do ciclo de vida do dispositivo.</span><span class="sxs-lookup"><span data-stu-id="9a798-174">IoT Hub can notify your IoT solution when a device identity is created or deleted by sending device lifecycle notifications.</span></span> <span data-ttu-id="9a798-175">Para fazer isso, sua solução de IoT precisa para criar uma rota e definir a Fonte de Dados como *DeviceLifecycleEvents*.</span><span class="sxs-lookup"><span data-stu-id="9a798-175">To do so, your IoT solution needs to create a route and to set the Data Source equal to *DeviceLifecycleEvents*.</span></span> <span data-ttu-id="9a798-176">Por padrão, nenhuma notificação de ciclo de vida é enviada, ou seja, nenhuma dessas rotas existe previamente.</span><span class="sxs-lookup"><span data-stu-id="9a798-176">By default, no lifecycle notifications are sent, that is, no such routes pre-exist.</span></span> <span data-ttu-id="9a798-177">A mensagem de notificação inclui propriedades e o corpo.</span><span class="sxs-lookup"><span data-stu-id="9a798-177">The notification message includes properties, and body.</span></span>

<span data-ttu-id="9a798-178">Propriedades: as propriedades do sistema de mensagens são prefixadas com o símbolo `'$'`.</span><span class="sxs-lookup"><span data-stu-id="9a798-178">Properties: Message system properties are prefixed with the `'$'` symbol.</span></span>

| <span data-ttu-id="9a798-179">Nome</span><span class="sxs-lookup"><span data-stu-id="9a798-179">Name</span></span> | <span data-ttu-id="9a798-180">Valor</span><span class="sxs-lookup"><span data-stu-id="9a798-180">Value</span></span> |
| --- | --- |
<span data-ttu-id="9a798-181">$content-type</span><span class="sxs-lookup"><span data-stu-id="9a798-181">$content-type</span></span> | <span data-ttu-id="9a798-182">aplicativo/json</span><span class="sxs-lookup"><span data-stu-id="9a798-182">application/json</span></span> |
<span data-ttu-id="9a798-183">$iothub-enqueuedtime</span><span class="sxs-lookup"><span data-stu-id="9a798-183">$iothub-enqueuedtime</span></span> |  <span data-ttu-id="9a798-184">Hora em que a notificação foi enviada</span><span class="sxs-lookup"><span data-stu-id="9a798-184">Time when the notification was sent</span></span> |
<span data-ttu-id="9a798-185">$iothub-message-source</span><span class="sxs-lookup"><span data-stu-id="9a798-185">$iothub-message-source</span></span> | <span data-ttu-id="9a798-186">deviceLifecycleEvents</span><span class="sxs-lookup"><span data-stu-id="9a798-186">deviceLifecycleEvents</span></span> |
<span data-ttu-id="9a798-187">$content-encoding</span><span class="sxs-lookup"><span data-stu-id="9a798-187">$content-encoding</span></span> | <span data-ttu-id="9a798-188">utf-8</span><span class="sxs-lookup"><span data-stu-id="9a798-188">utf-8</span></span> |
<span data-ttu-id="9a798-189">opType</span><span class="sxs-lookup"><span data-stu-id="9a798-189">opType</span></span> | <span data-ttu-id="9a798-190">**createDeviceIdentity** ou **deleteDeviceIdentity**</span><span class="sxs-lookup"><span data-stu-id="9a798-190">**createDeviceIdentity** or **deleteDeviceIdentity**</span></span> |
<span data-ttu-id="9a798-191">hubName</span><span class="sxs-lookup"><span data-stu-id="9a798-191">hubName</span></span> | <span data-ttu-id="9a798-192">Nome do Hub IoT</span><span class="sxs-lookup"><span data-stu-id="9a798-192">Name of IoT Hub</span></span> |
<span data-ttu-id="9a798-193">deviceId</span><span class="sxs-lookup"><span data-stu-id="9a798-193">deviceId</span></span> | <span data-ttu-id="9a798-194">ID do dispositivo</span><span class="sxs-lookup"><span data-stu-id="9a798-194">ID of the device</span></span> |
<span data-ttu-id="9a798-195">operationTimestamp</span><span class="sxs-lookup"><span data-stu-id="9a798-195">operationTimestamp</span></span> | <span data-ttu-id="9a798-196">Carimbo de data/hora ISO8601 da operação</span><span class="sxs-lookup"><span data-stu-id="9a798-196">ISO8601 timestamp of operation</span></span> |
<span data-ttu-id="9a798-197">iothub-message-schema</span><span class="sxs-lookup"><span data-stu-id="9a798-197">iothub-message-schema</span></span> | <span data-ttu-id="9a798-198">deviceLifecycleNotification</span><span class="sxs-lookup"><span data-stu-id="9a798-198">deviceLifecycleNotification</span></span> |

<span data-ttu-id="9a798-199">Corpo: esta seção está no formato JSON e representa o gêmeo da identidade de dispositivo criada.</span><span class="sxs-lookup"><span data-stu-id="9a798-199">Body: This section is in JSON format and represents the twin of the created device identity.</span></span> <span data-ttu-id="9a798-200">Por exemplo,</span><span class="sxs-lookup"><span data-stu-id="9a798-200">For example,</span></span>

```json
{
    "deviceId":"11576-ailn-test-0-67333793211",
    "etag":"AAAAAAAAAAE=",
    "properties": {
        "desired": {
            "$metadata": {
                "$lastUpdated": "2016-02-30T16:24:48.789Z"
            },
            "$version": 1
        },
        "reported": {
            "$metadata": {
                "$lastUpdated": "2016-02-30T16:24:48.789Z"
            },
            "$version": 1
        }
    }
}
```

## <a name="reference-topics"></a><span data-ttu-id="9a798-201">Tópicos de referência:</span><span class="sxs-lookup"><span data-stu-id="9a798-201">Reference topics:</span></span>

<span data-ttu-id="9a798-202">Os tópicos de referência a seguir fornecem a você mais informações sobre o registro de identidade.</span><span class="sxs-lookup"><span data-stu-id="9a798-202">The following reference topics provide you with more information about the identity registry.</span></span>

## <a name="device-identity-properties"></a><span data-ttu-id="9a798-203">Propriedades de identidade do dispositivo</span><span class="sxs-lookup"><span data-stu-id="9a798-203">Device identity properties</span></span>

<span data-ttu-id="9a798-204">As identidades do dispositivo são representadas como documentos JSON com as seguintes propriedades:</span><span class="sxs-lookup"><span data-stu-id="9a798-204">Device identities are represented as JSON documents with the following properties:</span></span>

| <span data-ttu-id="9a798-205">Propriedade</span><span class="sxs-lookup"><span data-stu-id="9a798-205">Property</span></span> | <span data-ttu-id="9a798-206">Opções</span><span class="sxs-lookup"><span data-stu-id="9a798-206">Options</span></span> | <span data-ttu-id="9a798-207">Descrição</span><span class="sxs-lookup"><span data-stu-id="9a798-207">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="9a798-208">deviceId</span><span class="sxs-lookup"><span data-stu-id="9a798-208">deviceId</span></span> |<span data-ttu-id="9a798-209">obrigatória, somente leitura em atualizações</span><span class="sxs-lookup"><span data-stu-id="9a798-209">required, read-only on updates</span></span> |<span data-ttu-id="9a798-210">Uma cadeia de caracteres que diferencia maiúsculas de minúsculas (com até 128 caracteres) de caracteres alfanuméricos ASCII de 7 bits + `{'-', ':', '.', '+', '%', '_', '#', '*', '?', '!', '(', ')', ',', '=', '@', ';', '$', '''}`.</span><span class="sxs-lookup"><span data-stu-id="9a798-210">A case-sensitive string (up to 128 characters long) of ASCII 7-bit alphanumeric characters + `{'-', ':', '.', '+', '%', '_', '#', '*', '?', '!', '(', ')', ',', '=', '@', ';', '$', '''}`.</span></span> |
| <span data-ttu-id="9a798-211">generationId</span><span class="sxs-lookup"><span data-stu-id="9a798-211">generationId</span></span> |<span data-ttu-id="9a798-212">obrigatória, somente leitura</span><span class="sxs-lookup"><span data-stu-id="9a798-212">required, read-only</span></span> |<span data-ttu-id="9a798-213">Uma cadeia de caracteres que diferencia maiúsculas de minúsculas com até 128 caracteres gerada pelo Hub IoT.</span><span class="sxs-lookup"><span data-stu-id="9a798-213">An IoT hub-generated, case-sensitive string up to 128 characters long.</span></span> <span data-ttu-id="9a798-214">Esse valor é usado para distinguir os dispositivos com a mesma **deviceId** quando são excluídos e recriados.</span><span class="sxs-lookup"><span data-stu-id="9a798-214">This value is used to distinguish devices with the same **deviceId**, when they have been deleted and re-created.</span></span> |
| <span data-ttu-id="9a798-215">etag</span><span class="sxs-lookup"><span data-stu-id="9a798-215">etag</span></span> |<span data-ttu-id="9a798-216">obrigatória, somente leitura</span><span class="sxs-lookup"><span data-stu-id="9a798-216">required, read-only</span></span> |<span data-ttu-id="9a798-217">Uma cadeia de caracteres que representa uma ETag fraca para a identidade do dispositivo, de acordo com [RFC7232][lnk-rfc7232].</span><span class="sxs-lookup"><span data-stu-id="9a798-217">A string representing a weak ETag for the device identity, as per [RFC7232][lnk-rfc7232].</span></span> |
| <span data-ttu-id="9a798-218">auth</span><span class="sxs-lookup"><span data-stu-id="9a798-218">auth</span></span> |<span data-ttu-id="9a798-219">opcional</span><span class="sxs-lookup"><span data-stu-id="9a798-219">optional</span></span> |<span data-ttu-id="9a798-220">Um objeto composto que contém as informações de autenticação e os materiais de segurança.</span><span class="sxs-lookup"><span data-stu-id="9a798-220">A composite object containing authentication information and security materials.</span></span> |
| <span data-ttu-id="9a798-221">auth.symkey</span><span class="sxs-lookup"><span data-stu-id="9a798-221">auth.symkey</span></span> |<span data-ttu-id="9a798-222">opcional</span><span class="sxs-lookup"><span data-stu-id="9a798-222">optional</span></span> |<span data-ttu-id="9a798-223">Um objeto composto que contém as chaves primária e secundária, armazenadas no formato base64.</span><span class="sxs-lookup"><span data-stu-id="9a798-223">A composite object containing a primary and a secondary key, stored in base64 format.</span></span> |
| <span data-ttu-id="9a798-224">status</span><span class="sxs-lookup"><span data-stu-id="9a798-224">status</span></span> |<span data-ttu-id="9a798-225">obrigatório</span><span class="sxs-lookup"><span data-stu-id="9a798-225">required</span></span> |<span data-ttu-id="9a798-226">Um indicador de acesso.</span><span class="sxs-lookup"><span data-stu-id="9a798-226">An access indicator.</span></span> <span data-ttu-id="9a798-227">Pode estar **Habilitado** ou **Desabilitado**.</span><span class="sxs-lookup"><span data-stu-id="9a798-227">Can be **Enabled** or **Disabled**.</span></span> <span data-ttu-id="9a798-228">Se estiver **Habilitado**, o dispositivo terá permissão para se conectar.</span><span class="sxs-lookup"><span data-stu-id="9a798-228">If **Enabled**, the device is allowed to connect.</span></span> <span data-ttu-id="9a798-229">Se estiver **Desabilitado**, este dispositivo não poderá acessar qualquer ponto de extremidade voltado para o dispositivo.</span><span class="sxs-lookup"><span data-stu-id="9a798-229">If **Disabled**, this device cannot access any device-facing endpoint.</span></span> |
| <span data-ttu-id="9a798-230">statusReason</span><span class="sxs-lookup"><span data-stu-id="9a798-230">statusReason</span></span> |<span data-ttu-id="9a798-231">opcional</span><span class="sxs-lookup"><span data-stu-id="9a798-231">optional</span></span> |<span data-ttu-id="9a798-232">Uma cadeia de caracteres com 128 caracteres que armazena o motivo do status de identidade do dispositivo.</span><span class="sxs-lookup"><span data-stu-id="9a798-232">A 128 character-long string that stores the reason for the device identity status.</span></span> <span data-ttu-id="9a798-233">Todos os caracteres UTF-8 são permitidos.</span><span class="sxs-lookup"><span data-stu-id="9a798-233">All UTF-8 characters are allowed.</span></span> |
| <span data-ttu-id="9a798-234">statusUpdateTime</span><span class="sxs-lookup"><span data-stu-id="9a798-234">statusUpdateTime</span></span> |<span data-ttu-id="9a798-235">somente leitura</span><span class="sxs-lookup"><span data-stu-id="9a798-235">read-only</span></span> |<span data-ttu-id="9a798-236">Um indicador temporal, mostrando a data e hora da última atualização de status.</span><span class="sxs-lookup"><span data-stu-id="9a798-236">A temporal indicator, showing the date and time of the last status update.</span></span> |
| <span data-ttu-id="9a798-237">connectionState</span><span class="sxs-lookup"><span data-stu-id="9a798-237">connectionState</span></span> |<span data-ttu-id="9a798-238">somente leitura</span><span class="sxs-lookup"><span data-stu-id="9a798-238">read-only</span></span> |<span data-ttu-id="9a798-239">Um campo indicando o status da conexão: **Conectado** ou **Desconectado**.</span><span class="sxs-lookup"><span data-stu-id="9a798-239">A field indicating connection status: either **Connected** or **Disconnected**.</span></span> <span data-ttu-id="9a798-240">Esse campo representa a exibição do Hub IoT do status de conexão do dispositivo.</span><span class="sxs-lookup"><span data-stu-id="9a798-240">This field represents the IoT Hub view of the device connection status.</span></span> <span data-ttu-id="9a798-241">**Importante**: esse campo deve ser usado apenas para fins de desenvolvimento/depuração.</span><span class="sxs-lookup"><span data-stu-id="9a798-241">**Important**: This field should be used only for development/debugging purposes.</span></span> <span data-ttu-id="9a798-242">O estado da conexão é atualizado somente nos dispositivos que usam MQTT ou AMQP.</span><span class="sxs-lookup"><span data-stu-id="9a798-242">The connection state is updated only for devices using MQTT or AMQP.</span></span> <span data-ttu-id="9a798-243">Além disso, ele se baseia nos pings do nível de protocolo (pings MQTT ou AMQP) e pode ter um atraso máximo de apenas cinco minutos.</span><span class="sxs-lookup"><span data-stu-id="9a798-243">Also, it is based on protocol-level pings (MQTT pings, or AMQP pings), and it can have a maximum delay of only 5 minutes.</span></span> <span data-ttu-id="9a798-244">Por esses motivos, pode haver falsos positivos, como dispositivos relatados como conectados, mas que estão desconectados.</span><span class="sxs-lookup"><span data-stu-id="9a798-244">For these reasons, there can be false positives, such as devices reported as connected but that are disconnected.</span></span> |
| <span data-ttu-id="9a798-245">connectionStateUpdatedTime</span><span class="sxs-lookup"><span data-stu-id="9a798-245">connectionStateUpdatedTime</span></span> |<span data-ttu-id="9a798-246">somente leitura</span><span class="sxs-lookup"><span data-stu-id="9a798-246">read-only</span></span> |<span data-ttu-id="9a798-247">Um indicador temporal, mostrando a data e a hora da última atualização do estado da conexão.</span><span class="sxs-lookup"><span data-stu-id="9a798-247">A temporal indicator, showing the date and last time the connection state was updated.</span></span> |
| <span data-ttu-id="9a798-248">lastActivityTime</span><span class="sxs-lookup"><span data-stu-id="9a798-248">lastActivityTime</span></span> |<span data-ttu-id="9a798-249">somente leitura</span><span class="sxs-lookup"><span data-stu-id="9a798-249">read-only</span></span> |<span data-ttu-id="9a798-250">Um indicador temporal, mostrando a data e hora da última vez em que o dispositivo se conectou, recebeu ou enviou uma mensagem.</span><span class="sxs-lookup"><span data-stu-id="9a798-250">A temporal indicator, showing the date and last time the device connected, received, or sent a message.</span></span> |

> [!NOTE]
> <span data-ttu-id="9a798-251">O estado da conexão pode representar apenas a visão do Hub IoT do status da conexão.</span><span class="sxs-lookup"><span data-stu-id="9a798-251">Connection state can only represent the IoT Hub view of the status of the connection.</span></span> <span data-ttu-id="9a798-252">As atualizações para esse estado podem ser atrasadas, dependendo das configurações e das condições da rede.</span><span class="sxs-lookup"><span data-stu-id="9a798-252">Updates to this state may be delayed, depending on network conditions and configurations.</span></span>

## <a name="additional-reference-material"></a><span data-ttu-id="9a798-253">Material de referência adicional</span><span class="sxs-lookup"><span data-stu-id="9a798-253">Additional reference material</span></span>

<span data-ttu-id="9a798-254">Outros tópicos de referência no Guia do desenvolvedor do Hub IoT incluem:</span><span class="sxs-lookup"><span data-stu-id="9a798-254">Other reference topics in the IoT Hub developer guide include:</span></span>

* <span data-ttu-id="9a798-255">[Pontos de extremidade do Hub IoT][lnk-endpoints] descreve os vários pontos de extremidade que cada Hub IoT expõe para operações de tempo de execução e de gerenciamento.</span><span class="sxs-lookup"><span data-stu-id="9a798-255">[IoT Hub endpoints][lnk-endpoints] describes the various endpoints that each IoT hub exposes for run-time and management operations.</span></span>
* <span data-ttu-id="9a798-256">[Limitação e cotas][lnk-quotas] descreve as cotas e os comportamentos de limitação que se aplicam ao serviço Hub IoT.</span><span class="sxs-lookup"><span data-stu-id="9a798-256">[Throttling and quotas][lnk-quotas] describes the quotas and throttling behaviors that apply to the IoT Hub service.</span></span>
* <span data-ttu-id="9a798-257">[SDKs de dispositivo e serviço IoT do Azure][lnk-sdks] lista os vários SDKs de linguagem que você pode usar no desenvolvimento de aplicativos de dispositivo e de serviço que interagem com o Hub IoT.</span><span class="sxs-lookup"><span data-stu-id="9a798-257">[Azure IoT device and service SDKs][lnk-sdks] lists the various language SDKs you can use when you develop both device and service apps that interact with IoT Hub.</span></span>
* <span data-ttu-id="9a798-258">A [linguagem de consulta do Hub IoT][lnk-query] descreve a linguagem de consulta que você pode usar para recuperar informações do Hub IoT sobre dispositivos gêmeos e trabalhos.</span><span class="sxs-lookup"><span data-stu-id="9a798-258">[IoT Hub query language][lnk-query] describes the query language you can use to retrieve information from IoT Hub about your device twins and jobs.</span></span>
* <span data-ttu-id="9a798-259">[Suporte ao MQTT do Hub IoT][lnk-devguide-mqtt] fornece mais informações sobre o suporte do Hub IoT para o protocolo MQTT.</span><span class="sxs-lookup"><span data-stu-id="9a798-259">[IoT Hub MQTT support][lnk-devguide-mqtt] provides more information about IoT Hub support for the MQTT protocol.</span></span>

## <a name="next-steps"></a><span data-ttu-id="9a798-260">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="9a798-260">Next steps</span></span>

<span data-ttu-id="9a798-261">Agora que você aprendeu a usar o Registro de identidade do Hub IoT, pode ser interessante ler os seguintes tópicos do Guia do desenvolvedor do Hub IoT:</span><span class="sxs-lookup"><span data-stu-id="9a798-261">Now you have learned how to use the IoT Hub identity registry, you may be interested in the following IoT Hub developer guide topics:</span></span>

* <span data-ttu-id="9a798-262">[Controlar o acesso ao Hub IoT][lnk-devguide-security]</span><span class="sxs-lookup"><span data-stu-id="9a798-262">[Control access to IoT Hub][lnk-devguide-security]</span></span>
* <span data-ttu-id="9a798-263">[Usar dispositivos gêmeos para sincronizar o estado e as configurações][lnk-devguide-device-twins]</span><span class="sxs-lookup"><span data-stu-id="9a798-263">[Use device twins to synchronize state and configurations][lnk-devguide-device-twins]</span></span>
* <span data-ttu-id="9a798-264">[Invocar um método direto em um dispositivo][lnk-devguide-directmethods]</span><span class="sxs-lookup"><span data-stu-id="9a798-264">[Invoke a direct method on a device][lnk-devguide-directmethods]</span></span>
* <span data-ttu-id="9a798-265">[Agendar trabalhos em vários dispositivos][lnk-devguide-jobs]</span><span class="sxs-lookup"><span data-stu-id="9a798-265">[Schedule jobs on multiple devices][lnk-devguide-jobs]</span></span>

<span data-ttu-id="9a798-266">Se você quiser experimentar alguns dos conceitos descritos neste artigo, talvez se interesse pelo seguinte tutorial de Hub IoT:</span><span class="sxs-lookup"><span data-stu-id="9a798-266">If you would like to try out some of the concepts described in this article, you may be interested in the following IoT Hub tutorial:</span></span>

* <span data-ttu-id="9a798-267">[Introdução ao Hub IoT do Azure][lnk-getstarted-tutorial]</span><span class="sxs-lookup"><span data-stu-id="9a798-267">[Get started with Azure IoT Hub][lnk-getstarted-tutorial]</span></span>

<!-- Links and images -->

[lnk-endpoints]: iot-hub-devguide-endpoints.md
[lnk-quotas]: iot-hub-devguide-quotas-throttling.md
[lnk-sdks]: iot-hub-devguide-sdks.md
[lnk-query]: iot-hub-devguide-query-language.md
[lnk-devguide-mqtt]: iot-hub-mqtt-support.md
[lnk-resource-provider-apis]: https://docs.microsoft.com/rest/api/iothub/iothubresource
[lnk-guidance-provisioning]: iot-hub-devguide-identity-registry.md#device-provisioning
[lnk-guidance-heartbeat]: iot-hub-devguide-identity-registry.md#device-heartbeat
[lnk-rfc7232]: https://tools.ietf.org/html/rfc7232
[lnk-bulk-identity]: iot-hub-bulk-identity-mgmt.md
[lnk-export]: iot-hub-devguide-identity-registry.md#import-and-export-device-identities
[lnk-devguide-opmon]: iot-hub-operations-monitoring.md

[lnk-devguide-security]: iot-hub-devguide-security.md
[lnk-devguide-device-twins]: iot-hub-devguide-device-twins.md
[lnk-devguide-directmethods]: iot-hub-devguide-direct-methods.md
[lnk-devguide-jobs]: iot-hub-devguide-jobs.md

[lnk-getstarted-tutorial]: iot-hub-csharp-csharp-getstarted.md
