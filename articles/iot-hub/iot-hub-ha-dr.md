---
title: "IoT Hub alta disponibilidade e recuperação de desastres de aaaAzure | Microsoft Docs"
description: "Descreve recursos hello Azure e o IoT Hub que ajudam você a toobuild soluções altamente disponíveis de Azure IoT com recursos de recuperação de desastres."
services: iot-hub
documentationcenter: 
author: fsautomata
manager: timlt
editor: 
ms.assetid: ae320e58-aa20-45b9-abdc-fa4faae8e6dd
ms.service: iot-hub
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 11/16/2016
ms.author: elioda
ms.openlocfilehash: 74e1fa1682258819ffb3fd84eb79e42fc6e4120f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="iot-hub-high-availability-and-disaster-recovery"></a><span data-ttu-id="e17e9-103">Alta disponibilidade e recuperação de desastres do Hub IoT</span><span class="sxs-lookup"><span data-stu-id="e17e9-103">IoT Hub high availability and disaster recovery</span></span>
<span data-ttu-id="e17e9-104">Como um serviço do Azure, o IoT Hub fornece alta disponibilidade (HA) usando redundâncias no nível de região do Azure hello, sem qualquer trabalho adicional exigido pela solução de saudação.</span><span class="sxs-lookup"><span data-stu-id="e17e9-104">As an Azure service, IoT Hub provides high availability (HA) using redundancies at hello Azure region level, without any additional work required by hello solution.</span></span> <span data-ttu-id="e17e9-105">plataforma do Microsoft Azure Olá também inclui recursos toohelp criar soluções com recursos de recuperação de desastres ou disponibilidade entre regiões.</span><span class="sxs-lookup"><span data-stu-id="e17e9-105">hello Microsoft Azure platform also includes features toohelp you build solutions with disaster recovery (DR) capabilities or cross-region availability.</span></span> <span data-ttu-id="e17e9-106">Se você quiser tooprovide global, alta disponibilidade entre regiões para dispositivos ou usuários, criar e preparar suas soluções tootake aproveitar esses recursos de recuperação de desastres do Azure.</span><span class="sxs-lookup"><span data-stu-id="e17e9-106">If you want tooprovide global, cross-region high availability for devices or users, design and prepare your solutions tootake advantage of these Azure DR features.</span></span> <span data-ttu-id="e17e9-107">artigo Olá [orientação técnica de continuidade de negócios do Azure](../resiliency/resiliency-technical-guidance.md) descreve recursos internos Olá no Azure para continuidade de negócios e recuperação de desastres.</span><span class="sxs-lookup"><span data-stu-id="e17e9-107">hello article [Azure Business Continuity Technical Guidance](../resiliency/resiliency-technical-guidance.md) describes hello built-in features in Azure for business continuity and DR.</span></span> <span data-ttu-id="e17e9-108">Olá [recuperação de desastres e alta disponibilidade para aplicativos do Azure] [ Disaster recovery and high availability for Azure applications] paper fornece diretrizes de arquitetura sobre estratégias para aplicativos do Azure tooachieve alta disponibilidade e recuperação de desastres.</span><span class="sxs-lookup"><span data-stu-id="e17e9-108">hello [Disaster recovery and high availability for Azure applications][Disaster recovery and high availability for Azure applications] paper provides architecture guidance on strategies for Azure applications tooachieve HA and DR.</span></span>

## <a name="azure-iot-hub-dr"></a><span data-ttu-id="e17e9-109">DR do Hub IoT do Azure</span><span class="sxs-lookup"><span data-stu-id="e17e9-109">Azure IoT Hub DR</span></span>
<span data-ttu-id="e17e9-110">Além disso toointra região HA, IoT Hub implementa mecanismos de failover para a recuperação de desastres que não exigem nenhuma intervenção do usuário hello.</span><span class="sxs-lookup"><span data-stu-id="e17e9-110">In addition toointra-region HA, IoT Hub implements failover mechanisms for disaster recovery that require no intervention from hello user.</span></span> <span data-ttu-id="e17e9-111">Recuperação de desastres de Hub IoT é iniciada automaticamente e tem um objetivo de tempo de recuperação (RTO) de 26 de 2 horas e Olá objetivos de ponto de recuperação (RPOs) a seguir.</span><span class="sxs-lookup"><span data-stu-id="e17e9-111">IoT Hub DR is self-initiated and has a recovery time objective (RTO) of 2-26 hours, and hello following recovery point objectives (RPOs).</span></span>

| <span data-ttu-id="e17e9-112">Funcionalidade</span><span class="sxs-lookup"><span data-stu-id="e17e9-112">Functionality</span></span> | <span data-ttu-id="e17e9-113">RPO</span><span class="sxs-lookup"><span data-stu-id="e17e9-113">RPO</span></span> |
| --- | --- |
| <span data-ttu-id="e17e9-114">Disponibilidade de serviço para operações de registro e comunicação</span><span class="sxs-lookup"><span data-stu-id="e17e9-114">Service availability for registry and communication operations</span></span> |<span data-ttu-id="e17e9-115">Possível perda de CName</span><span class="sxs-lookup"><span data-stu-id="e17e9-115">Possible CName loss</span></span> |
| <span data-ttu-id="e17e9-116">Dados de identidade no registro de identidade</span><span class="sxs-lookup"><span data-stu-id="e17e9-116">Identity data in identity registry</span></span> |<span data-ttu-id="e17e9-117">Perda de dados de 0 a 5 minutos</span><span class="sxs-lookup"><span data-stu-id="e17e9-117">0-5 mins data loss</span></span> |
| <span data-ttu-id="e17e9-118">Mensagens do dispositivo para a nuvem</span><span class="sxs-lookup"><span data-stu-id="e17e9-118">Device-to-cloud messages</span></span> |<span data-ttu-id="e17e9-119">Todas as mensagens não lidas são perdidas</span><span class="sxs-lookup"><span data-stu-id="e17e9-119">All unread messages are lost</span></span> |
| <span data-ttu-id="e17e9-120">Mensagens de monitoramento de operações</span><span class="sxs-lookup"><span data-stu-id="e17e9-120">Operations monitoring messages</span></span> |<span data-ttu-id="e17e9-121">Todas as mensagens não lidas são perdidas</span><span class="sxs-lookup"><span data-stu-id="e17e9-121">All unread messages are lost</span></span> |
| <span data-ttu-id="e17e9-122">Mensagens da nuvem para o dispositivo</span><span class="sxs-lookup"><span data-stu-id="e17e9-122">Cloud-to-device messages</span></span> |<span data-ttu-id="e17e9-123">Perda de dados de 0 a 5 minutos</span><span class="sxs-lookup"><span data-stu-id="e17e9-123">0-5 mins data loss</span></span> |
| <span data-ttu-id="e17e9-124">Fila de comentários da nuvem para o dispositivo</span><span class="sxs-lookup"><span data-stu-id="e17e9-124">Cloud-to-device feedback queue</span></span> |<span data-ttu-id="e17e9-125">Todas as mensagens não lidas são perdidas</span><span class="sxs-lookup"><span data-stu-id="e17e9-125">All unread messages are lost</span></span> |

## <a name="regional-failover-with-iot-hub"></a><span data-ttu-id="e17e9-126">Failover regional com o Hub IoT</span><span class="sxs-lookup"><span data-stu-id="e17e9-126">Regional failover with IoT Hub</span></span>
<span data-ttu-id="e17e9-127">Um tratamento completo das topologias de implantação em soluções de IoT está fora do escopo deste artigo hello.</span><span class="sxs-lookup"><span data-stu-id="e17e9-127">A complete treatment of deployment topologies in IoT solutions is outside hello scope of this article.</span></span> <span data-ttu-id="e17e9-128">Olá artigo Olá *failover regional* modelo de implantação para a finalidade de saudação de alta disponibilidade e recuperação de desastres.</span><span class="sxs-lookup"><span data-stu-id="e17e9-128">hello article discusses hello *regional failover* deployment model for hello purpose of high availability and disaster recovery.</span></span>

<span data-ttu-id="e17e9-129">Em um modelo de failover regional, Olá solução back end executa principalmente em um datacenter local e um hub IoT secundário e um back-end são implantados em outro local do datacenter.</span><span class="sxs-lookup"><span data-stu-id="e17e9-129">In a regional failover model, hello solution back end runs primarily in one datacenter location, and a secondary IoT hub and back end are deployed in another datacenter location.</span></span> <span data-ttu-id="e17e9-130">Se o hub IoT de saudação no datacenter primário Olá sofre uma interrupção ou conectividade de rede de saudação do data center principal do hello dispositivo toohello é interrompida.</span><span class="sxs-lookup"><span data-stu-id="e17e9-130">If hello IoT hub in hello primary datacenter suffers an outage or hello network connectivity from hello device toohello primary datacenter is interrupted.</span></span> <span data-ttu-id="e17e9-131">Dispositivos usam um ponto de extremidade de serviço secundário, sempre que o gateway primário de saudação não pode ser alcançado.</span><span class="sxs-lookup"><span data-stu-id="e17e9-131">Devices use a secondary service endpoint whenever hello primary gateway cannot be reached.</span></span> <span data-ttu-id="e17e9-132">Com um recurso de failover entre regiões, disponibilidade de solução de saudação pode ser melhorada além de alta disponibilidade saudação de uma única região.</span><span class="sxs-lookup"><span data-stu-id="e17e9-132">With a cross-region failover capability, hello solution availability can be improved beyond hello high availability of a single region.</span></span>

<span data-ttu-id="e17e9-133">Em um nível alto, tooimplement um modelo de failover regional com o IoT Hub, você precisa seguir hello:</span><span class="sxs-lookup"><span data-stu-id="e17e9-133">At a high level, tooimplement a regional failover model with IoT Hub, you need hello following:</span></span>

* <span data-ttu-id="e17e9-134">**Um hub IoT e o dispositivo de roteamento lógica secundário**: no caso de saudação de uma interrupção do serviço em sua região primária, dispositivos devem iniciar conexão região secundária do tooyour.</span><span class="sxs-lookup"><span data-stu-id="e17e9-134">**A secondary IoT hub and device routing logic**: In hello case of a service disruption in your primary region, devices must start connecting tooyour secondary region.</span></span> <span data-ttu-id="e17e9-135">Considerando a natureza de reconhecimento de estado de saudação da maioria dos serviços envolvidos, é comum para o processo de failover entre região solução administradores tootrigger hello.</span><span class="sxs-lookup"><span data-stu-id="e17e9-135">Given hello state-aware nature of most services involved, it is common for solution administrators tootrigger hello inter-region failover process.</span></span> <span data-ttu-id="e17e9-136">Olá melhor maneira toocommunicate Olá novo ponto de extremidade toodevices, mantendo o controle do processo de saudação é toohave-los regularmente um *assistente* serviço para Olá active ponto de extremidade atual.</span><span class="sxs-lookup"><span data-stu-id="e17e9-136">hello best way toocommunicate hello new endpoint toodevices, while maintaining control of hello process, is toohave them regularly check a *concierge* service for hello current active endpoint.</span></span> <span data-ttu-id="e17e9-137">Olá Assistente serviço pode ser um aplicativo web que é replicado e mantido acessível usando técnicas de redirecionamento de DNS (por exemplo, usando [Azure Traffic Manager][Azure Traffic Manager]).</span><span class="sxs-lookup"><span data-stu-id="e17e9-137">hello concierge service can be a web application that is replicated and kept reachable using DNS-redirection techniques (for example, using [Azure Traffic Manager][Azure Traffic Manager]).</span></span>
* <span data-ttu-id="e17e9-138">**Replicação de registro de identidade** -toobe utilizável, o hub IoT secundário de saudação deve conter todas as identidades de dispositivo que podem se conectar a solução toohello.</span><span class="sxs-lookup"><span data-stu-id="e17e9-138">**Identity registry replication** - toobe usable, hello secondary IoT hub must contain all device identities that can connect toohello solution.</span></span> <span data-ttu-id="e17e9-139">Olá solução deve manter backups replicados geograficamente de identidades de dispositivo e carregá-los toohello secundário IoT hub antes de alternar ponto de extremidade ativo para dispositivos Olá Olá.</span><span class="sxs-lookup"><span data-stu-id="e17e9-139">hello solution should keep geo-replicated backups of device identities, and upload them toohello secondary IoT hub before switching hello active endpoint for hello devices.</span></span> <span data-ttu-id="e17e9-140">funcionalidade de exportação de identidade de dispositivo de saudação do IoT Hub é útil neste contexto.</span><span class="sxs-lookup"><span data-stu-id="e17e9-140">hello device identity export functionality of IoT Hub is useful in this context.</span></span> <span data-ttu-id="e17e9-141">Para saber mais, confira [Guia do desenvolvedor do Hub IoT ‑ Registro de identidade][IoT Hub developer guide - identity registry].</span><span class="sxs-lookup"><span data-stu-id="e17e9-141">For more information, see [IoT Hub developer guide - identity registry][IoT Hub developer guide - identity registry].</span></span>
* <span data-ttu-id="e17e9-142">**Mesclando lógica** - quando região primária Olá fica disponível novamente, todos Olá estado e dados que foram criados no site secundário Olá devem ser região primária toohello back migrados.</span><span class="sxs-lookup"><span data-stu-id="e17e9-142">**Merging logic** - When hello primary region becomes available again, all hello state and data that have been created in hello secondary site must be migrated back toohello primary region.</span></span> <span data-ttu-id="e17e9-143">Esse estado e os dados relacionado principalmente toodevice identidades e metadados de aplicativo, que devem ser mesclados com o hub IoT principal de saudação e qualquer outra loja na região primária Olá específicas do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="e17e9-143">This state and data mostly relates toodevice identities and application metadata, which must be merged with hello primary IoT hub and any other application-specific stores in hello primary region.</span></span> <span data-ttu-id="e17e9-144">toosimplify nesta etapa, você deve usar operações idempotentes.</span><span class="sxs-lookup"><span data-stu-id="e17e9-144">toosimplify this step, you should use idempotent operations.</span></span> <span data-ttu-id="e17e9-145">Operações de idempotente minimizar Olá efeitos colaterais de saudação eventual consistente a distribuição de eventos e de duplicatas ou fora de ordem entrega de eventos.</span><span class="sxs-lookup"><span data-stu-id="e17e9-145">Idempotent operations minimize hello side-effects from hello eventual consistent distribution of events, and from duplicates or out-of-order delivery of events.</span></span> <span data-ttu-id="e17e9-146">Além disso, a lógica do aplicativo hello deve ser projetado tootolerate possíveis inconsistências ou "ligeiramente" fora do estado de data.</span><span class="sxs-lookup"><span data-stu-id="e17e9-146">In addition, hello application logic should be designed tootolerate potential inconsistencies or "slightly" out of date-state.</span></span> <span data-ttu-id="e17e9-147">Essa situação pode ocorrer devido a toohello mais tempo que leva para o sistema de saudação muito "reparar" com base nos objetivos de ponto de recuperação (RPO).</span><span class="sxs-lookup"><span data-stu-id="e17e9-147">This situation can occur due toohello additional time it takes for hello system too"heal" based on recovery point objectives (RPO).</span></span>

## <a name="next-steps"></a><span data-ttu-id="e17e9-148">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="e17e9-148">Next steps</span></span>
<span data-ttu-id="e17e9-149">Siga essas toolearn links mais sobre Azure IoT Hub:</span><span class="sxs-lookup"><span data-stu-id="e17e9-149">Follow these links toolearn more about Azure IoT Hub:</span></span>

* <span data-ttu-id="e17e9-150">[Introdução aos Hubs IoT (Tutorial)][lnk-get-started]</span><span class="sxs-lookup"><span data-stu-id="e17e9-150">[Get started with IoT Hubs (Tutorial)][lnk-get-started]</span></span>
* <span data-ttu-id="e17e9-151">[O que é o Hub IoT do Azure?][What is Azure IoT Hub?]</span><span class="sxs-lookup"><span data-stu-id="e17e9-151">[What is Azure IoT Hub?][What is Azure IoT Hub?]</span></span>

[Disaster recovery and high availability for Azure applications]: ../resiliency/resiliency-disaster-recovery-high-availability-azure-applications.md
[Azure Business Continuity Technical Guidance]: https://azure.microsoft.com/documentation/articles/resiliency-technical-guidance/
[Azure Traffic Manager]: https://azure.microsoft.com/documentation/services/traffic-manager/
[IoT Hub developer guide - identity registry]: iot-hub-devguide-identity-registry.md

[lnk-get-started]: iot-hub-csharp-csharp-getstarted.md
[What is Azure IoT Hub?]: iot-hub-what-is-iot-hub.md
