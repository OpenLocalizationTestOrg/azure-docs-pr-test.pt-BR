---
title: "SAP NetWeaver em Máquinas Virtuais do Azure – Guia de Implantação do DBMS | Microsoft Docs"
description: "SAP NetWeaver em VMs (máquinas virtuais) do Azure – Guia de implantação de DBMS"
services: virtual-machines-windows,virtual-network,storage
documentationcenter: 
author: MSSedusch
manager: timlt
editor: 
tags: azure-resource-manager
keywords: 
ms.assetid: e0e05b5e-47aa-4c1e-bf83-0d62ee8f614e
ms.service: virtual-machines-windows
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: vm-windows
ms.workload: infrastructure-services
ms.date: 11/08/2016
ms.author: sedusch
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: cc7c85382d8f8183ef3eb3cc7496b012808148e5
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/11/2017
---
# <a name="sap-netweaver-on-azure-windows-virtual-machines-vms--dbms-deployment-guide"></a><span data-ttu-id="6f87f-103">SAP NetWeaver em VMs (Máquinas Virtuais) Windows do Azure – Guia de implantação do DBMS</span><span class="sxs-lookup"><span data-stu-id="6f87f-103">SAP NetWeaver on Azure Windows Virtual Machines (VMs) – DBMS Deployment Guide</span></span>
<span data-ttu-id="6f87f-104">[767598]:https://launchpad.support.sap.com/#/notes/767598</span><span class="sxs-lookup"><span data-stu-id="6f87f-104">[767598]:https://launchpad.support.sap.com/#/notes/767598</span></span>
<span data-ttu-id="6f87f-105">[773830]:https://launchpad.support.sap.com/#/notes/773830</span><span class="sxs-lookup"><span data-stu-id="6f87f-105">[773830]:https://launchpad.support.sap.com/#/notes/773830</span></span>
<span data-ttu-id="6f87f-106">[826037]:https://launchpad.support.sap.com/#/notes/826037</span><span class="sxs-lookup"><span data-stu-id="6f87f-106">[826037]:https://launchpad.support.sap.com/#/notes/826037</span></span>
<span data-ttu-id="6f87f-107">[965908]:https://launchpad.support.sap.com/#/notes/965908</span><span class="sxs-lookup"><span data-stu-id="6f87f-107">[965908]:https://launchpad.support.sap.com/#/notes/965908</span></span>
[1031096]:https://launchpad.support.sap.com/#/notes/1031096
<span data-ttu-id="6f87f-108">[1139904]:https://launchpad.support.sap.com/#/notes/1139904</span><span class="sxs-lookup"><span data-stu-id="6f87f-108">[1139904]:https://launchpad.support.sap.com/#/notes/1139904</span></span>
<span data-ttu-id="6f87f-109">[1173395]:https://launchpad.support.sap.com/#/notes/1173395</span><span class="sxs-lookup"><span data-stu-id="6f87f-109">[1173395]:https://launchpad.support.sap.com/#/notes/1173395</span></span>
<span data-ttu-id="6f87f-110">[1245200]:https://launchpad.support.sap.com/#/notes/1245200</span><span class="sxs-lookup"><span data-stu-id="6f87f-110">[1245200]:https://launchpad.support.sap.com/#/notes/1245200</span></span>
<span data-ttu-id="6f87f-111">[1409604]:https://launchpad.support.sap.com/#/notes/1409604</span><span class="sxs-lookup"><span data-stu-id="6f87f-111">[1409604]:https://launchpad.support.sap.com/#/notes/1409604</span></span>
<span data-ttu-id="6f87f-112">[1558958]:https://launchpad.support.sap.com/#/notes/1558958</span><span class="sxs-lookup"><span data-stu-id="6f87f-112">[1558958]:https://launchpad.support.sap.com/#/notes/1558958</span></span>
<span data-ttu-id="6f87f-113">[1585981]:https://launchpad.support.sap.com/#/notes/1585981</span><span class="sxs-lookup"><span data-stu-id="6f87f-113">[1585981]:https://launchpad.support.sap.com/#/notes/1585981</span></span>
<span data-ttu-id="6f87f-114">[1588316]:https://launchpad.support.sap.com/#/notes/1588316</span><span class="sxs-lookup"><span data-stu-id="6f87f-114">[1588316]:https://launchpad.support.sap.com/#/notes/1588316</span></span>
<span data-ttu-id="6f87f-115">[1590719]:https://launchpad.support.sap.com/#/notes/1590719</span><span class="sxs-lookup"><span data-stu-id="6f87f-115">[1590719]:https://launchpad.support.sap.com/#/notes/1590719</span></span>
[1597355]:https://launchpad.support.sap.com/#/notes/1597355
<span data-ttu-id="6f87f-116">[1605680]:https://launchpad.support.sap.com/#/notes/1605680</span><span class="sxs-lookup"><span data-stu-id="6f87f-116">[1605680]:https://launchpad.support.sap.com/#/notes/1605680</span></span>
<span data-ttu-id="6f87f-117">[1619720]:https://launchpad.support.sap.com/#/notes/1619720</span><span class="sxs-lookup"><span data-stu-id="6f87f-117">[1619720]:https://launchpad.support.sap.com/#/notes/1619720</span></span>
<span data-ttu-id="6f87f-118">[1619726]:https://launchpad.support.sap.com/#/notes/1619726</span><span class="sxs-lookup"><span data-stu-id="6f87f-118">[1619726]:https://launchpad.support.sap.com/#/notes/1619726</span></span>
<span data-ttu-id="6f87f-119">[1619967]:https://launchpad.support.sap.com/#/notes/1619967</span><span class="sxs-lookup"><span data-stu-id="6f87f-119">[1619967]:https://launchpad.support.sap.com/#/notes/1619967</span></span>
<span data-ttu-id="6f87f-120">[1750510]:https://launchpad.support.sap.com/#/notes/1750510</span><span class="sxs-lookup"><span data-stu-id="6f87f-120">[1750510]:https://launchpad.support.sap.com/#/notes/1750510</span></span>
<span data-ttu-id="6f87f-121">[1752266]:https://launchpad.support.sap.com/#/notes/1752266</span><span class="sxs-lookup"><span data-stu-id="6f87f-121">[1752266]:https://launchpad.support.sap.com/#/notes/1752266</span></span>
<span data-ttu-id="6f87f-122">[1757924]:https://launchpad.support.sap.com/#/notes/1757924</span><span class="sxs-lookup"><span data-stu-id="6f87f-122">[1757924]:https://launchpad.support.sap.com/#/notes/1757924</span></span>
<span data-ttu-id="6f87f-123">[1757928]:https://launchpad.support.sap.com/#/notes/1757928</span><span class="sxs-lookup"><span data-stu-id="6f87f-123">[1757928]:https://launchpad.support.sap.com/#/notes/1757928</span></span>
<span data-ttu-id="6f87f-124">[1758182]:https://launchpad.support.sap.com/#/notes/1758182</span><span class="sxs-lookup"><span data-stu-id="6f87f-124">[1758182]:https://launchpad.support.sap.com/#/notes/1758182</span></span>
<span data-ttu-id="6f87f-125">[1758496]:https://launchpad.support.sap.com/#/notes/1758496</span><span class="sxs-lookup"><span data-stu-id="6f87f-125">[1758496]:https://launchpad.support.sap.com/#/notes/1758496</span></span>
<span data-ttu-id="6f87f-126">[1772688]:https://launchpad.support.sap.com/#/notes/1772688</span><span class="sxs-lookup"><span data-stu-id="6f87f-126">[1772688]:https://launchpad.support.sap.com/#/notes/1772688</span></span>
<span data-ttu-id="6f87f-127">[1814258]:https://launchpad.support.sap.com/#/notes/1814258</span><span class="sxs-lookup"><span data-stu-id="6f87f-127">[1814258]:https://launchpad.support.sap.com/#/notes/1814258</span></span>
<span data-ttu-id="6f87f-128">[1882376]:https://launchpad.support.sap.com/#/notes/1882376</span><span class="sxs-lookup"><span data-stu-id="6f87f-128">[1882376]:https://launchpad.support.sap.com/#/notes/1882376</span></span>
[1909114]:https://launchpad.support.sap.com/#/notes/1909114
<span data-ttu-id="6f87f-129">[1922555]:https://launchpad.support.sap.com/#/notes/1922555</span><span class="sxs-lookup"><span data-stu-id="6f87f-129">[1922555]:https://launchpad.support.sap.com/#/notes/1922555</span></span>
<span data-ttu-id="6f87f-130">[1928533]:https://launchpad.support.sap.com/#/notes/1928533</span><span class="sxs-lookup"><span data-stu-id="6f87f-130">[1928533]:https://launchpad.support.sap.com/#/notes/1928533</span></span>
<span data-ttu-id="6f87f-131">[1941500]:https://launchpad.support.sap.com/#/notes/1941500</span><span class="sxs-lookup"><span data-stu-id="6f87f-131">[1941500]:https://launchpad.support.sap.com/#/notes/1941500</span></span>
<span data-ttu-id="6f87f-132">[1956005]:https://launchpad.support.sap.com/#/notes/1956005</span><span class="sxs-lookup"><span data-stu-id="6f87f-132">[1956005]:https://launchpad.support.sap.com/#/notes/1956005</span></span>
<span data-ttu-id="6f87f-133">[1973241]:https://launchpad.support.sap.com/#/notes/1973241</span><span class="sxs-lookup"><span data-stu-id="6f87f-133">[1973241]:https://launchpad.support.sap.com/#/notes/1973241</span></span>
<span data-ttu-id="6f87f-134">[1984787]:https://launchpad.support.sap.com/#/notes/1984787</span><span class="sxs-lookup"><span data-stu-id="6f87f-134">[1984787]:https://launchpad.support.sap.com/#/notes/1984787</span></span>
<span data-ttu-id="6f87f-135">[1999351]:https://launchpad.support.sap.com/#/notes/1999351</span><span class="sxs-lookup"><span data-stu-id="6f87f-135">[1999351]:https://launchpad.support.sap.com/#/notes/1999351</span></span>
<span data-ttu-id="6f87f-136">[2002167]:https://launchpad.support.sap.com/#/notes/2002167</span><span class="sxs-lookup"><span data-stu-id="6f87f-136">[2002167]:https://launchpad.support.sap.com/#/notes/2002167</span></span>
<span data-ttu-id="6f87f-137">[2015553]:https://launchpad.support.sap.com/#/notes/2015553</span><span class="sxs-lookup"><span data-stu-id="6f87f-137">[2015553]:https://launchpad.support.sap.com/#/notes/2015553</span></span>
<span data-ttu-id="6f87f-138">[2039619]:https://launchpad.support.sap.com/#/notes/2039619</span><span class="sxs-lookup"><span data-stu-id="6f87f-138">[2039619]:https://launchpad.support.sap.com/#/notes/2039619</span></span>
<span data-ttu-id="6f87f-139">[2121797]:https://launchpad.support.sap.com/#/notes/2121797</span><span class="sxs-lookup"><span data-stu-id="6f87f-139">[2121797]:https://launchpad.support.sap.com/#/notes/2121797</span></span>
<span data-ttu-id="6f87f-140">[2134316]:https://launchpad.support.sap.com/#/notes/2134316</span><span class="sxs-lookup"><span data-stu-id="6f87f-140">[2134316]:https://launchpad.support.sap.com/#/notes/2134316</span></span>
<span data-ttu-id="6f87f-141">[2178632]:https://launchpad.support.sap.com/#/notes/2178632</span><span class="sxs-lookup"><span data-stu-id="6f87f-141">[2178632]:https://launchpad.support.sap.com/#/notes/2178632</span></span>
<span data-ttu-id="6f87f-142">[2191498]:https://launchpad.support.sap.com/#/notes/2191498</span><span class="sxs-lookup"><span data-stu-id="6f87f-142">[2191498]:https://launchpad.support.sap.com/#/notes/2191498</span></span>
<span data-ttu-id="6f87f-143">[2233094]:https://launchpad.support.sap.com/#/notes/2233094</span><span class="sxs-lookup"><span data-stu-id="6f87f-143">[2233094]:https://launchpad.support.sap.com/#/notes/2233094</span></span>
<span data-ttu-id="6f87f-144">[2243692]:https://launchpad.support.sap.com/#/notes/2243692</span><span class="sxs-lookup"><span data-stu-id="6f87f-144">[2243692]:https://launchpad.support.sap.com/#/notes/2243692</span></span>

[azure-cli]:../../cli-install-nodejs.md
[azure-portal]:https://portal.azure.com
[azure-ps]:/powershell/azureps-cmdlets-docs
[azure-quickstart-templates-github]:https://github.com/Azure/azure-quickstart-templates
[azure-script-ps]:https://go.microsoft.com/fwlink/p/?LinkID=395017
[azure-subscription-service-limits]:../../azure-subscription-service-limits.md
[azure-subscription-service-limits-subscription]:../../azure-subscription-service-limits.md#subscription-limits

[dbms-guide]:sap-dbms-guide.md 
[dbms-guide-2.1]:#c7abf1f0-c927-4a7c-9c1d-c7b5b3b7212f 
[dbms-guide-2.2]:#c8e566f9-21b7-4457-9f7f-126036971a91 
[dbms-guide-2.3]:#10b041ef-c177-498a-93ed-44b3441ab152 
[dbms-guide-2]:#65fa79d6-a85f-47ee-890b-22e794f51a64 
[dbms-guide-3]:#871dfc27-e509-4222-9370-ab1de77021c3 
[dbms-guide-5.5.1]:#0fef0e79-d3fe-4ae2-85af-73666a6f7268 
[dbms-guide-5.5.2]:#f9071eff-9d72-4f47-9da4-1852d782087b 
[dbms-guide-5.6]:#1b353e38-21b3-4310-aeb6-a77e7c8e81c8 
[dbms-guide-5.8]:#9053f720-6f3b-4483-904d-15dc54141e30 
[dbms-guide-5]:#3264829e-075e-4d25-966e-a49dad878737 
[dbms-guide-8.4.1]:#b48cfe3b-48e9-4f5b-a783-1d29155bd573 
[dbms-guide-8.4.2]:#23c78d3b-ca5a-4e72-8a24-645d141a3f5d 
[dbms-guide-8.4.3]:#77cd2fbb-307e-4cbf-a65f-745553f72d2c 
[dbms-guide-8.4.4]:#f77c1436-9ad8-44fb-a331-8671342de818 
[dbms-guide-900-sap-cache-server-on-premises]:#642f746c-e4d4-489d-bf63-73e80177a0a8

[dbms-guide-figure-100]:./media/virtual-machines-shared-sap-dbms-guide/100_storage_account_types.png
[dbms-guide-figure-200]:./media/virtual-machines-shared-sap-dbms-guide/200-ha-set-for-dbms-ha.png
[dbms-guide-figure-300]:./media/virtual-machines-shared-sap-dbms-guide/300-reference-config-iaas.png
[dbms-guide-figure-400]:./media/virtual-machines-shared-sap-dbms-guide/400-sql-2012-backup-to-blob-storage.png
[dbms-guide-figure-500]:./media/virtual-machines-shared-sap-dbms-guide/500-sql-2012-backup-to-blob-storage-different-containers.png
[dbms-guide-figure-600]:./media/virtual-machines-shared-sap-dbms-guide/600-iaas-maxdb.png
[dbms-guide-figure-700]:./media/virtual-machines-shared-sap-dbms-guide/700-livecach-prod.png
[dbms-guide-figure-800]:./media/virtual-machines-shared-sap-dbms-guide/800-azure-vm-sap-content-server.png
[dbms-guide-figure-900]:./media/virtual-machines-shared-sap-dbms-guide/900-sap-cache-server-on-premises.png

[deployment-guide]:sap-deployment-guide.md 
[deployment-guide-2.2]:sap-deployment-guide.md#42ee2bdb-1efc-4ec7-ab31-fe4c22769b94 
[deployment-guide-3.1.2]:sap-deployment-guide.md#3688666f-281f-425b-a312-a77e7db2dfab 
[deployment-guide-3.2]:sap-deployment-guide.md#db477013-9060-4602-9ad4-b0316f8bb281 
[deployment-guide-3.3]:sap-deployment-guide.md#54a1fc6d-24fd-4feb-9c57-ac588a55dff2 
[deployment-guide-3.4]:sap-deployment-guide.md#a9a60133-a763-4de8-8986-ac0fa33aa8c1
[deployment-guide-3]:sap-deployment-guide.md#b3253ee3-d63b-4d74-a49b-185e76c4088e 
[deployment-guide-4.1]:sap-deployment-guide.md#604bcec2-8b6e-48d2-a944-61b0f5dee2f7 
[deployment-guide-4.2]:sap-deployment-guide.md#7ccf6c3e-97ae-4a7a-9c75-e82c37beb18e
[deployment-guide-4.3]:sap-deployment-guide.md#31d9ecd6-b136-4c73-b61e-da4a29bbc9cc 
[deployment-guide-4.4.2]:sap-deployment-guide.md#6889ff12-eaaf-4f3c-97e1-7c9edc7f7542 
[deployment-guide-4.4]:sap-deployment-guide.md#c7cbb0dc-52a4-49db-8e03-83e7edc2927d 
[deployment-guide-4.5.1]:sap-deployment-guide.md#987cf279-d713-4b4c-8143-6b11589bb9d4 
[deployment-guide-4.5.2]:sap-deployment-guide.md#408f3779-f422-4413-82f8-c57a23b4fc2f 
[deployment-guide-4.5]:sap-deployment-guide.md#d98edcd3-f2a1-49f7-b26a-07448ceb60ca 
[deployment-guide-5.1]:sap-deployment-guide.md#bb61ce92-8c5c-461f-8c53-39f5e5ed91f2 
[deployment-guide-5.2]:sap-deployment-guide.md#e2d592ff-b4ea-4a53-a91a-e5521edb6cd1 
[deployment-guide-5.3]:sap-deployment-guide.md#fe25a7da-4e4e-4388-8907-8abc2d33cfd8 

[deployment-guide-configure-monitoring-scenario-1]:sap-deployment-guide.md#ec323ac3-1de9-4c3a-b770-4ff701def65b 
[deployment-guide-configure-proxy]:sap-deployment-guide.md#baccae00-6f79-4307-ade4-40292ce4e02d 
[deployment-guide-figure-100]:./media/virtual-machines-shared-sap-deployment-guide/100-deploy-vm-image.png
[deployment-guide-figure-1000]:./media/virtual-machines-shared-sap-deployment-guide/1000-service-properties.png
[deployment-guide-figure-11]:sap-deployment-guide.md#figure-11
[deployment-guide-figure-1100]:./media/virtual-machines-shared-sap-deployment-guide/1100-azperflib.png
[deployment-guide-figure-1200]:./media/virtual-machines-shared-sap-deployment-guide/1200-cmd-test-login.png
[deployment-guide-figure-1300]:./media/virtual-machines-shared-sap-deployment-guide/1300-cmd-test-executed.png
[deployment-guide-figure-14]:sap-deployment-guide.md#figure-14
[deployment-guide-figure-1400]:./media/virtual-machines-shared-sap-deployment-guide/1400-azperflib-error-servicenotstarted.png
[deployment-guide-figure-300]:./media/virtual-machines-shared-sap-deployment-guide/300-deploy-private-image.png
[deployment-guide-figure-400]:./media/virtual-machines-shared-sap-deployment-guide/400-deploy-using-disk.png
[deployment-guide-figure-5]:sap-deployment-guide.md#figure-5
[deployment-guide-figure-50]:./media/virtual-machines-shared-sap-deployment-guide/50-forced-tunneling-suse.png
[deployment-guide-figure-500]:./media/virtual-machines-shared-sap-deployment-guide/500-install-powershell.png
[deployment-guide-figure-6]:sap-deployment-guide.md#figure-6
[deployment-guide-figure-600]:./media/virtual-machines-shared-sap-deployment-guide/600-powershell-version.png
[deployment-guide-figure-7]:sap-deployment-guide.md#figure-7
[deployment-guide-figure-700]:./media/virtual-machines-shared-sap-deployment-guide/700-install-powershell-installed.png
[deployment-guide-figure-760]:./media/virtual-machines-shared-sap-deployment-guide/760-azure-cli-version.png
[deployment-guide-figure-900]:./media/virtual-machines-shared-sap-deployment-guide/900-cmd-update-executed.png
[deployment-guide-figure-azure-cli-installed]:sap-deployment-guide.md#402488e5-f9bb-4b29-8063-1c5f52a892d0
[deployment-guide-figure-azure-cli-version]:sap-deployment-guide.md#0ad010e6-f9b5-4c21-9c09-bb2e5efb3fda
[deployment-guide-install-vm-agent-windows]:sap-deployment-guide.md#b2db5c9a-a076-42c6-9835-16945868e866
[deployment-guide-troubleshooting-chapter]:sap-deployment-guide.md#564adb4f-5c95-4041-9616-6635e83a810b 

[deploy-template-cli]:../../resource-group-template-deploy-cli.md
[deploy-template-portal]:../../resource-group-template-deploy-portal.md
[deploy-template-powershell]:../../resource-group-template-deploy.md

[dr-guide-classic]:http://go.microsoft.com/fwlink/?LinkID=521971

[getting-started]:sap-get-started.md
[getting-started-dbms]:sap-get-started.md#1343ffe1-8021-4ce6-a08d-3a1553a4db82
[getting-started-deployment]:sap-get-started.md#6aadadd2-76b5-46d8-8713-e8d63630e955
[getting-started-planning]:sap-get-started.md#3da0389e-708b-4e82-b2a2-e92f132df89c

[getting-started-windows-classic]:../virtual-machines-windows-classic-sap-get-started.md
[getting-started-windows-classic-dbms]:../virtual-machines-windows-classic-sap-get-started.md#c5b77a14-f6b4-44e9-acab-4d28ff72a930
[getting-started-windows-classic-deployment]:../virtual-machines-windows-classic-sap-get-started.md#f84ea6ce-bbb4-41f7-9965-34d31b0098ea
[getting-started-windows-classic-dr]:../virtual-machines-windows-classic-sap-get-started.md#cff10b4a-01a5-4dc3-94b6-afb8e55757d3
[getting-started-windows-classic-ha-sios]:../virtual-machines-windows-classic-sap-get-started.md#4bb7512c-0fa0-4227-9853-4004281b1037
[getting-started-windows-classic-planning]:../virtual-machines-windows-classic-sap-get-started.md#f2a5e9d8-49e4-419e-9900-af783173481c

[ha-guide-classic]:http://go.microsoft.com/fwlink/?LinkId=613056

[ha-guide]:sap-high-availability-guide.md

[install-extension-cli]:virtual-machines-linux-enable-aem.md

[Logo_Linux]:./media/virtual-machines-shared-sap-shared/Linux.png
[Logo_Windows]:./media/virtual-machines-shared-sap-shared/Windows.png

[msdn-set-azurermvmaemextension]:https://msdn.microsoft.com/library/azure/mt670598.aspx

[planning-guide]:sap-planning-guide.md  
[planning-guide-1.2]:sap-planning-guide.md#e55d1e22-c2c8-460b-9897-64622a34fdff 
[planning-guide-11]:sap-planning-guide.md#7cf991a1-badd-40a9-944e-7baae842a058 
[planning-guide-11.4.1]:sap-planning-guide.md#5d9d36f9-9058-435d-8367-5ad05f00de77 
[planning-guide-11.5]:sap-planning-guide.md#4e165b58-74ca-474f-a7f4-5e695a93204f 
[planning-guide-2.1]:sap-planning-guide.md#1625df66-4cc6-4d60-9202-de8a0b77f803 
[planning-guide-2.2]:sap-planning-guide.md#f5b3b18c-302c-4bd8-9ab2-c388f1ab3d10
[planning-guide-3.1]:sap-planning-guide.md#be80d1b9-a463-4845-bd35-f4cebdb5424a 
[planning-guide-3.2.1]:sap-planning-guide.md#df49dc09-141b-4f34-a4a2-990913b30358 
[planning-guide-3.2.2]:sap-planning-guide.md#fc1ac8b2-e54a-487c-8581-d3cc6625e560 
[planning-guide-3.2.3]:sap-planning-guide.md#18810088-f9be-4c97-958a-27996255c665 
[planning-guide-3.2]:sap-planning-guide.md#8d8ad4b8-6093-4b91-ac36-ea56d80dbf77 
[planning-guide-3.3.2]:sap-planning-guide.md#ff5ad0f9-f7f4-4022-9102-af07aef3bc92 
[planning-guide-5.1.1]:sap-planning-guide.md#4d175f1b-7353-4137-9d2f-817683c26e53 
[planning-guide-5.1.2]:sap-planning-guide.md#e18f7839-c0e2-4385-b1e6-4538453a285c 
[planning-guide-5.2.1]:sap-planning-guide.md#1b287330-944b-495d-9ea7-94b83aff73ef 
[planning-guide-5.2.2]:sap-planning-guide.md#57f32b1c-0cba-4e57-ab6e-c39fe22b6ec3 
[planning-guide-5.2]:sap-planning-guide.md#6ffb9f41-a292-40bf-9e70-8204448559e7 
[planning-guide-5.3.1]:sap-planning-guide.md#6e835de8-40b1-4b71-9f18-d45b20959b79 
[planning-guide-5.3.2]:sap-planning-guide.md#a43e40e6-1acc-4633-9816-8f095d5a7b6a 
[planning-guide-5.4.2]:sap-planning-guide.md#9789b076-2011-4afa-b2fe-b07a8aba58a1 
[planning-guide-5.5.1]:sap-planning-guide.md#4efec401-91e0-40c0-8e64-f2dceadff646 
[planning-guide-5.5.3]:sap-planning-guide.md#17e0d543-7e8c-4160-a7da-dd7117a1ad9d 
[planning-guide-7.1]:sap-planning-guide.md#3e9c3690-da67-421a-bc3f-12c520d99a30 
[planning-guide-7]:sap-planning-guide.md#96a77628-a05e-475d-9df3-fb82217e8f14 
[planning-guide-9.1]:sap-planning-guide.md#6f0a47f3-a289-4090-a053-2521618a28c3 
[planning-guide-azure-premium-storage]:sap-planning-guide.md#ff5ad0f9-f7f4-4022-9102-af07aef3bc92 

[planning-guide-figure-100]:./media/virtual-machines-shared-sap-planning-guide/100-single-vm-in-azure.png
[planning-guide-figure-1300]:./media/virtual-machines-shared-sap-planning-guide/1300-ref-config-iaas-for-sap.png
[planning-guide-figure-1400]:./media/virtual-machines-shared-sap-planning-guide/1400-attach-detach-disks.png
[planning-guide-figure-1600]:./media/virtual-machines-shared-sap-planning-guide/1600-firewall-port-rule.png
[planning-guide-figure-1700]:./media/virtual-machines-shared-sap-planning-guide/1700-single-vm-demo.png
[planning-guide-figure-1900]:./media/virtual-machines-shared-sap-planning-guide/1900-vm-set-vnet.png
[planning-guide-figure-200]:./media/virtual-machines-shared-sap-planning-guide/200-multiple-vms-in-azure.png
[planning-guide-figure-2100]:./media/virtual-machines-shared-sap-planning-guide/2100-s2s.png
[planning-guide-figure-2200]:./media/virtual-machines-shared-sap-planning-guide/2200-network-printing.png
[planning-guide-figure-2300]:./media/virtual-machines-shared-sap-planning-guide/2300-sapgui-stms.png
[planning-guide-figure-2400]:./media/virtual-machines-shared-sap-planning-guide/2400-vm-extension-overview.png
[planning-guide-figure-2500]:./media/virtual-machines-shared-sap-planning-guide/2500-vm-extension-details.png
[planning-guide-figure-2600]:./media/virtual-machines-shared-sap-planning-guide/2600-sap-router-connection.png
[planning-guide-figure-2700]:./media/virtual-machines-shared-sap-planning-guide/2700-exposed-sap-portal.png
[planning-guide-figure-2800]:./media/virtual-machines-shared-sap-planning-guide/2800-endpoint-config.png
[planning-guide-figure-2900]:./media/virtual-machines-shared-sap-planning-guide/2900-azure-ha-sap-ha.png
[planning-guide-figure-300]:./media/virtual-machines-shared-sap-planning-guide/300-vpn-s2s.png
[planning-guide-figure-3000]:./media/virtual-machines-shared-sap-planning-guide/3000-sap-ha-on-azure.png
[planning-guide-figure-3200]:./media/virtual-machines-shared-sap-planning-guide/3200-sap-ha-with-sql.png
[planning-guide-figure-400]:./media/virtual-machines-shared-sap-planning-guide/400-vm-services.png
[planning-guide-figure-600]:./media/virtual-machines-shared-sap-planning-guide/600-s2s-details.png
[planning-guide-figure-700]:./media/virtual-machines-shared-sap-planning-guide/700-decision-tree-deploy-to-azure.png
[planning-guide-figure-800]:./media/virtual-machines-shared-sap-planning-guide/800-portal-vm-overview.png
[planning-guide-microsoft-azure-networking]:sap-planning-guide.md#61678387-8868-435d-9f8c-450b2424f5bd 
[planning-guide-storage-microsoft-azure-storage-and-data-disks]:sap-planning-guide.md#a72afa26-4bf4-4a25-8cf7-855d6032157f 

[powershell-install-configure]:/powershell/azureps-cmdlets-docs
[resource-group-authoring-templates]:../../resource-group-authoring-templates.md
[resource-group-overview]:../../azure-resource-manager/resource-group-overview.md
[resource-groups-networking]:../../virtual-network/resource-groups-networking.md
[sap-pam]:https://support.sap.com/pam 
[sap-templates-2-tier-marketplace-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-2-tier-marketplace-image%2Fazuredeploy.json
[sap-templates-2-tier-os-disk]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-2-tier-user-disk%2Fazuredeploy.json
[sap-templates-2-tier-user-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-2-tier-user-image%2Fazuredeploy.json
[sap-templates-3-tier-marketplace-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-3-tier-marketplace-image%2Fazuredeploy.json
[sap-templates-3-tier-user-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-3-tier-user-image%2Fazuredeploy.json
[storage-azure-cli]:../../storage/storage-azure-cli.md
[storage-azure-cli-copy-blobs]:../../storage/storage-azure-cli.md#copy-blobs
[storage-introduction]:../../storage/storage-introduction.md
[storage-powershell-guide-full-copy-vhd]:../../storage/storage-powershell-guide-full.md#how-to-copy-blobs-from-one-storage-container-to-another
[storage-premium-storage-preview-portal]:../../storage/storage-premium-storage.md
[storage-redundancy]:../../storage/storage-redundancy.md
[storage-scalability-targets]:../../storage/storage-scalability-targets.md
[storage-use-azcopy]:../../storage/storage-use-azcopy.md
[template-201-vm-from-specialized-vhd]:https://github.com/Azure/azure-quickstart-templates/tree/master/201-vm-from-specialized-vhd
[templates-101-simple-windows-vm]:https://github.com/Azure/azure-quickstart-templates/tree/master/101-simple-windows-vm
[templates-101-vm-from-user-image]:https://github.com/Azure/azure-quickstart-templates/tree/master/101-vm-from-user-image
[virtual-machines-linux-attach-disk-portal]:../linux/attach-disk-portal.md
[virtual-machines-azure-resource-manager-architecture]:../../resource-manager-deployment-model.md
[virtual-machines-azurerm-versus-azuresm]:../../resource-manager-deployment-model.md
[virtual-machines-windows-classic-configure-oracle-data-guard]:../virtual-machines-windows-classic-configure-oracle-data-guard.md
[virtual-machines-linux-cli-deploy-templates]:../linux/cli-deploy-templates.md (Deploy and manage virtual machines by using Azure Resource Manager templates and the Azure CLI)
[virtual-machines-deploy-rmtemplates-powershell]:../virtual-machines-windows-ps-manage.md (Manage virtual machines using Azure Resource Manager and PowerShell)
[virtual-machines-linux-agent-user-guide]:../linux/agent-user-guide.md
[virtual-machines-linux-agent-user-guide-command-line-options]:../linux/agent-user-guide.md#command-line-options
[virtual-machines-linux-capture-image]:../linux/capture-image.md
[virtual-machines-linux-capture-image-resource-manager]:../linux/capture-image.md
[virtual-machines-linux-capture-image-resource-manager-capture]:../linux/capture-image.md#step-2-capture-the-vm
[virtual-machines-linux-configure-lvm]:../linux/configure-lvm.md
[virtual-machines-linux-configure-raid]:../linux/configure-raid.md
[virtual-machines-linux-classic-create-upload-vhd-step-1]:../virtual-machines-linux-classic-create-upload-vhd.md#step-1-prepare-the-image-to-be-uploaded
[virtual-machines-linux-create-upload-vhd-suse]:../linux/suse-create-upload-vhd.md
[virtual-machines-linux-redhat-create-upload-vhd]:../linux/redhat-create-upload-vhd.md
[virtual-machines-linux-how-to-attach-disk]:../linux/add-disk.md
[virtual-machines-linux-how-to-attach-disk-how-to-initialize-a-new-data-disk-in-linux]:../linux/add-disk.md#connect-to-the-linux-vm-to-mount-the-new-disk
[virtual-machines-linux-tutorial]:../linux/quick-create-cli.md
[virtual-machines-linux-update-agent]:../linux/update-agent.md
[virtual-machines-manage-availability]:../virtual-machines-windows-manage-availability.md
[virtual-machines-ps-create-preconfigure-windows-resource-manager-vms]:../virtual-machines-windows-ps-create.md
[virtual-machines-sizes]:sizes.md
[virtual-machines-windows-classic-ps-sql-alwayson-availability-groups]:classic/ps-sql-alwayson-availability-groups.md
[virtual-machines-windows-classic-ps-sql-int-listener]:classic/ps-sql-int-listener.md
[virtual-machines-sql-server-high-availability-and-disaster-recovery-solutions]:./sql/virtual-machines-windows-sql-high-availability-dr.md
[virtual-machines-sql-server-infrastructure-services]:./sql/virtual-machines-windows-sql-server-iaas-overview.md
[virtual-machines-sql-server-performance-best-practices]:./sql/virtual-machines-windows-sql-performance.md
[virtual-machines-upload-image-windows-resource-manager]:upload-image.md
[virtual-machines-windows-tutorial]:../virtual-machines-windows-hero-tutorial.md
[virtual-machines-workload-template-sql-alwayson]:https://azure.microsoft.com/documentation/templates/sql-server-2014-alwayson-dsc/
[virtual-network-deploy-multinic-arm-cli]:../../virtual-network/virtual-network-deploy-multinic-arm-cli.md
[virtual-network-deploy-multinic-arm-ps]:../../virtual-network/virtual-network-deploy-multinic-arm-ps.md
[virtual-network-deploy-multinic-arm-template]:../../virtual-network/virtual-network-deploy-multinic-arm-template.md
[virtual-networks-configure-vnet-to-vnet-connection]:../../vpn-gateway/vpn-gateway-vnet-vnet-rm-ps.md
[virtual-networks-create-vnet-arm-pportal]:../../virtual-network/virtual-networks-create-vnet-arm-pportal.md
[virtual-networks-manage-dns-in-vnet]:../../virtual-network/virtual-networks-name-resolution-for-vms-and-role-instances.md
[virtual-networks-multiple-nics]:../../virtual-network/virtual-networks-multiple-nics.md
[virtual-networks-nsg]:../../virtual-network/virtual-networks-nsg.md
[virtual-networks-reserved-private-ip]:../../virtual-network/virtual-networks-static-private-ip-arm-ps.md
[virtual-networks-static-private-ip-arm-pportal]:../../virtual-network/virtual-networks-static-private-ip-arm-pportal.md
[virtual-networks-udr-overview]:../../virtual-network/virtual-networks-udr-overview.md
[vpn-gateway-about-vpn-devices]:../../vpn-gateway/vpn-gateway-about-vpn-devices.md
[vpn-gateway-create-site-to-site-rm-powershell]:../../vpn-gateway/vpn-gateway-create-site-to-site-rm-powershell.md
[vpn-gateway-cross-premises-options]:../../vpn-gateway/vpn-gateway-plan-design.md
[vpn-gateway-site-to-site-create]:../../vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-portal.md
[vpn-gateway-vpn-faq]:../../vpn-gateway/vpn-gateway-vpn-faq.md
[xplat-cli]:../../cli-install-nodejs.md
[xplat-cli-azure-resource-manager]:../../xplat-cli-azure-resource-manager.md

<span data-ttu-id="6f87f-145">Este guia faz parte da documentação sobre como implementar e implantar o software SAP no Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-145">This guide is part of the documentation on implementing and deploying the SAP software on Microsoft Azure.</span></span> <span data-ttu-id="6f87f-146">Antes de ler este guia, leia o [Guia de Planejamento e Implementação][planning-guide].</span><span class="sxs-lookup"><span data-stu-id="6f87f-146">Before reading this guide, please read the [Planning and Implementation Guide][planning-guide].</span></span> <span data-ttu-id="6f87f-147">Este documento aborda a implantação de vários RDBMS e produtos relacionados em combinação com o SAP em VMs (Máquinas Virtuais) do Microsoft Azure usando as funcionalidades de IaaS (Infraestrutura como serviço) do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-147">This document covers the deployment of various Relational Database Management Systems (RDBMS) and related products in combination with SAP on Microsoft Azure Virtual Machines (VMs) using the Azure Infrastructure as a Service (IaaS) capabilities.</span></span>

<span data-ttu-id="6f87f-148">O documento complementa a documentação de instalação do SAP e as Notas SAP, que representam os recursos primários para instalações e implantações do software SAP em determinadas plataformas.</span><span class="sxs-lookup"><span data-stu-id="6f87f-148">The paper complements the SAP Installation Documentation and SAP Notes which represent the primary resources for installations and deployments of SAP software on given platforms</span></span>

## <a name="general-considerations"></a><span data-ttu-id="6f87f-149">Considerações gerais</span><span class="sxs-lookup"><span data-stu-id="6f87f-149">General considerations</span></span>
<span data-ttu-id="6f87f-150">Neste capítulo, são introduzidas considerações sobre a execução sistemas DBMS relacionados ao SAP em VMs do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-150">In this chapter, considerations of running SAP related DBMS systems in Azure VMs are introduced.</span></span> <span data-ttu-id="6f87f-151">Há algumas referências a sistemas DBMS específicos neste capítulo.</span><span class="sxs-lookup"><span data-stu-id="6f87f-151">There are few references to specific DBMS systems in this chapter.</span></span> <span data-ttu-id="6f87f-152">Em vez disso, os sistemas DBMS específicos são abordados neste documento, após este capítulo.</span><span class="sxs-lookup"><span data-stu-id="6f87f-152">Instead the specific DBMS systems are handled within this paper, after this chapter.</span></span>

### <a name="definitions-upfront"></a><span data-ttu-id="6f87f-153">Definições prévias</span><span class="sxs-lookup"><span data-stu-id="6f87f-153">Definitions upfront</span></span>
<span data-ttu-id="6f87f-154">No decorrer do documento, usaremos os termos a seguir:</span><span class="sxs-lookup"><span data-stu-id="6f87f-154">Throughout the document we will use the following terms:</span></span>

* <span data-ttu-id="6f87f-155">IaaS: infraestrutura como serviço.</span><span class="sxs-lookup"><span data-stu-id="6f87f-155">IaaS: Infrastructure as a Service.</span></span>
* <span data-ttu-id="6f87f-156">PaaS: plataforma como serviço.</span><span class="sxs-lookup"><span data-stu-id="6f87f-156">PaaS: Platform as a Service.</span></span>
* <span data-ttu-id="6f87f-157">SaaS: software como serviço.</span><span class="sxs-lookup"><span data-stu-id="6f87f-157">SaaS: Software as a Service.</span></span>
* <span data-ttu-id="6f87f-158">Componente SAP: um aplicativo SAP individual como ECC, BW, Solution Manager ou EP.</span><span class="sxs-lookup"><span data-stu-id="6f87f-158">SAP Component: an individual SAP application such as ECC, BW, Solution Manager or EP.</span></span>  <span data-ttu-id="6f87f-159">Os componentes SAP podem ser baseados em tecnologias ABAP ou Java tradicionais ou em um aplicativo não baseado em NetWeaver, como o Business Objects.</span><span class="sxs-lookup"><span data-stu-id="6f87f-159">SAP components can be based on traditional ABAP or Java technologies or a non-NetWeaver based application such as Business Objects.</span></span>
* <span data-ttu-id="6f87f-160">Ambiente SAP: um ou mais componentes SAP agrupados logicamente para executar uma função de negócios, como Desenvolvimento, QAS, Treinamento, DR ou Produção.</span><span class="sxs-lookup"><span data-stu-id="6f87f-160">SAP Environment: one or more SAP components logically grouped to perform a business function such as Development, QAS, Training, DR or Production.</span></span>
* <span data-ttu-id="6f87f-161">Estrutura da SAP: refere-se à totalidade dos ativos SAP na estrutura de TI de um cliente.</span><span class="sxs-lookup"><span data-stu-id="6f87f-161">SAP Landscape: This refers to the entire SAP assets in a customer’s IT landscape.</span></span> <span data-ttu-id="6f87f-162">A estrutura da SAP inclui todos os ambientes de produção e de não produção.</span><span class="sxs-lookup"><span data-stu-id="6f87f-162">The SAP landscape includes all production and non-production environments.</span></span>
* <span data-ttu-id="6f87f-163">Sistema SAP: a combinação de camada DBMS e camada de aplicativo de, por exemplo, um sistema de desenvolvimento SAP ERP, sistema de teste SAP BW, sistema de produção SAP CRM etc. Em implantações do Azure não há suporte para dividir essas duas camadas entre local e Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-163">SAP System: The combination of DBMS layer and application layer of e.g. an SAP ERP development system, SAP BW test system, SAP CRM production system, etc. In Azure deployments it is not supported to divide these two layers between on-premises and Azure.</span></span> <span data-ttu-id="6f87f-164">Isso significa que um sistema SAP é implantado localmente ou no Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-164">This means an SAP system is either deployed on-premises or it is deployed in Azure.</span></span> <span data-ttu-id="6f87f-165">No entanto, você pode implantar os diferentes sistemas de uma estrutura da SAP no Azure ou de forma local.</span><span class="sxs-lookup"><span data-stu-id="6f87f-165">However, you can deploy the different systems of an SAP landscape in Azure or on-premises.</span></span> <span data-ttu-id="6f87f-166">Por exemplo, você poderia implantar os sistemas de desenvolvimento e teste SAP CRM no Azure, mas o sistema de produção CRM SAP localmente.</span><span class="sxs-lookup"><span data-stu-id="6f87f-166">For example, you could deploy the SAP CRM development and test systems in Azure but the SAP CRM production system on-premises.</span></span>
* <span data-ttu-id="6f87f-167">Implantação somente em nuvem: uma implantação em que a assinatura do Azure não está conectada por meio de uma conexão site a site ou de ExpressRoute à infraestrutura de rede local.</span><span class="sxs-lookup"><span data-stu-id="6f87f-167">Cloud-Only deployment: A deployment where the Azure subscription is not connected via a site-to-site or ExpressRoute connection to the on-premises network infrastructure.</span></span> <span data-ttu-id="6f87f-168">Na documentação comum do Azure, esses tipos de implantações também são descritos como implantações 'Somente em nuvem'.</span><span class="sxs-lookup"><span data-stu-id="6f87f-168">In common Azure documentation these kinds of deployments are also described as ‘Cloud-Only’ deployments.</span></span> <span data-ttu-id="6f87f-169">As máquinas virtuais implantadas com esse método são acessadas por meio da Internet e pontos de extremidade da Internet públicos atribuídos às VMs no Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-169">Virtual Machines deployed with this method are accessed through the Internet and public Internet endpoints assigned to the VMs in Azure.</span></span> <span data-ttu-id="6f87f-170">O AD (Active Directory) local e o DNS não se estendem ao Azure nesses tipos de implantações.</span><span class="sxs-lookup"><span data-stu-id="6f87f-170">The on-premises Active Directory (AD) and DNS is not extended to Azure in these types of deployments.</span></span> <span data-ttu-id="6f87f-171">Portanto, as VMs não fazem parte do Active Directory local.</span><span class="sxs-lookup"><span data-stu-id="6f87f-171">Hence the VMs are not part of the on-premises Active Directory.</span></span> <span data-ttu-id="6f87f-172">Observação: as implantações somente em nuvem neste documento são definidas como estruturas da SAP completas que estão sendo executadas exclusivamente no Azure sem extensão do Active Directory ou resolução de nomes do local para a nuvem pública.</span><span class="sxs-lookup"><span data-stu-id="6f87f-172">Note: Cloud-Only deployments in this document are defined as complete SAP landscapes which are running exclusively in Azure without extension of Active Directory or name resolution from on-premises into public cloud.</span></span> <span data-ttu-id="6f87f-173">Não há suporte para configurações somente em nuvem para sistemas SAP de produção ou configurações nas quais o SAP STMS ou outros recursos locais precisem ser usados entre sistemas SAP hospedados no Azure e recursos locais.</span><span class="sxs-lookup"><span data-stu-id="6f87f-173">Cloud-Only configurations are not supported for production SAP systems or configurations where SAP STMS or other on-premises resources need to be used between SAP systems hosted on Azure and resources residing on-premises.</span></span>
* <span data-ttu-id="6f87f-174">Entre instalações: descreve um cenário em que as VMs são implantadas em uma assinatura do Azure com conectividade site a site, multissite ou de ExpressRoute entre o(s) datacenter(s) local(is) e o Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-174">Cross-Premises: Describes a scenario where VMs are deployed to an Azure subscription that has site-to-site, multi-site or ExpressRoute connectivity between the on-premises datacenter(s) and Azure.</span></span> <span data-ttu-id="6f87f-175">Na documentação comum do Azure, esses tipos de implantações também são descritas como cenários entre instalações.</span><span class="sxs-lookup"><span data-stu-id="6f87f-175">In common Azure documentation, these kinds of deployments are also described as Cross-Premises scenarios.</span></span> <span data-ttu-id="6f87f-176">O motivo para a conexão é estender domínios locais, Active Directory local e DNS local para o Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-176">The reason for the connection is to extend on-premises domains, on-premises Active Directory and on-premises DNS into Azure.</span></span> <span data-ttu-id="6f87f-177">A estrutura local é estendida para os ativos do Azure da assinatura.</span><span class="sxs-lookup"><span data-stu-id="6f87f-177">The on-premises landscape is extended to the Azure assets of the subscription.</span></span> <span data-ttu-id="6f87f-178">Com esta extensão, as VMs podem ser parte do domínio local.</span><span class="sxs-lookup"><span data-stu-id="6f87f-178">Having this extension, the VMs can be part of the on-premises domain.</span></span> <span data-ttu-id="6f87f-179">Usuários de domínio do domínio local podem acessar os servidores e podem executar serviços nessas VMs (como serviços DBMS).</span><span class="sxs-lookup"><span data-stu-id="6f87f-179">Domain users of the on-premises domain can access the servers and can run services on those VMs (like DBMS services).</span></span> <span data-ttu-id="6f87f-180">A comunicação e resolução de nomes entre VMs implantadas de forma local e VMs implantadas no Azure são possíveis.</span><span class="sxs-lookup"><span data-stu-id="6f87f-180">Communication and name resolution between VMs deployed on-premises and VMs deployed in Azure is possible.</span></span> <span data-ttu-id="6f87f-181">Esperamos que este seja o cenário mais comum para a implantação de ativos SAP no Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-181">We expect this to be the most common scenario for deploying SAP assets on Azure.</span></span> <span data-ttu-id="6f87f-182">Para saber mais, veja [este][vpn-gateway-cross-premises-options] artigo e [este][vpn-gateway-site-to-site-create].</span><span class="sxs-lookup"><span data-stu-id="6f87f-182">See [this][vpn-gateway-cross-premises-options] article and [this][vpn-gateway-site-to-site-create] for more information.</span></span>

> [!NOTE]
> <span data-ttu-id="6f87f-183">Implantações entre instalações de sistemas SAP em que máquinas virtuais do Azure que executam sistemas SAP são membros de um domínio local têm suporte para sistemas SAP de produção.</span><span class="sxs-lookup"><span data-stu-id="6f87f-183">Cross-Premises deployments of SAP systems where Azure Virtual Machines running SAP systems are members of an on-premises domain are supported for production SAP systems.</span></span> <span data-ttu-id="6f87f-184">Configurações entre locais têm suporte para a implantação de partes ou estruturas da SAP completas no Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-184">Cross-Premises configurations are supported for deploying parts or complete SAP landscapes into Azure.</span></span> <span data-ttu-id="6f87f-185">Até mesmo a execução da estrutura da SAP completa no Azure requer que essas VMs sejam parte do domínio local e ADS.</span><span class="sxs-lookup"><span data-stu-id="6f87f-185">Even running the complete SAP landscape in Azure requires having those VMs being part of on-premises domain and ADS.</span></span> <span data-ttu-id="6f87f-186">Em versões anteriores da documentação, falamos sobre cenários de TI híbrido, em que o termo 'Híbrido' está enraizado no fato de que há uma conectividade entre instalações entre o local e o Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-186">In former versions of the documentation we talked about Hybrid-IT scenarios, where the term ‘Hybrid’ is rooted in the fact that there is a cross-premises connectivity between on-premises and Azure.</span></span> <span data-ttu-id="6f87f-187">Nesse caso, ‘Híbrido’ também significa que as VMs no Azure são parte do Active Directory local.</span><span class="sxs-lookup"><span data-stu-id="6f87f-187">In this case ‘Hybrid’ also means that the VMs in Azure are part of the on-premises Active Directory.</span></span>
>
>

<span data-ttu-id="6f87f-188">Alguma documentação da Microsoft descreve cenários entre instalações de modo um pouco diferente, especialmente para configurações de HA do DBMS.</span><span class="sxs-lookup"><span data-stu-id="6f87f-188">Some Microsoft documentation describes Cross-Premises scenarios a bit differently, especially for DBMS HA configurations.</span></span> <span data-ttu-id="6f87f-189">No caso de documentos relacionados ao SAP, o cenário entre locais se resume a ter uma conectividade de site a site ou privada (ExpressRoute) e ao fato de que a estrutura da SAP é distribuída entre os locais e o Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-189">In the case of the SAP related documents, the Cross-Premises scenario just boils down to having a site-to-site or private (ExpressRoute) connectivity and to the fact that the SAP landscape is distributed between on-premises and Azure.</span></span>

### <a name="resources"></a><span data-ttu-id="6f87f-190">Recursos</span><span class="sxs-lookup"><span data-stu-id="6f87f-190">Resources</span></span>
<span data-ttu-id="6f87f-191">Os seguintes guias estão disponíveis para o tópico das implantações da SAP no Azure:</span><span class="sxs-lookup"><span data-stu-id="6f87f-191">The following guides are available for the topic of SAP deployments on Azure:</span></span>

* <span data-ttu-id="6f87f-192">[SAP NetWeaver em VMs (máquinas virtuais) do Azure – Guia de planejamento e implementação][planning-guide]</span><span class="sxs-lookup"><span data-stu-id="6f87f-192">[SAP NetWeaver on Azure Virtual Machines (VMs) – Planning and Implementation Guide][planning-guide]</span></span>
* <span data-ttu-id="6f87f-193">[SAP NetWeaver em VMs (máquinas virtuais) do Azure – Guia de implantação][deployment-guide]</span><span class="sxs-lookup"><span data-stu-id="6f87f-193">[SAP NetWeaver on Azure Virtual Machines (VMs) – Deployment Guide][deployment-guide]</span></span>
* <span data-ttu-id="6f87f-194">[SAP NetWeaver em VMs (máquinas virtuais) do Azure – Guia de Implantação do DBMS (este documento)][dbms-guide]</span><span class="sxs-lookup"><span data-stu-id="6f87f-194">[SAP NetWeaver on Azure Virtual Machines (VMs) – DBMS Deployment Guide (this document)][dbms-guide]</span></span>
* <span data-ttu-id="6f87f-195">[SAP NetWeaver em VMs (Máquinas Virtuais) do Azure – Guia de implantação de alta disponibilidade][ha-guide]</span><span class="sxs-lookup"><span data-stu-id="6f87f-195">[SAP NetWeaver on Azure Virtual Machines (VMs) – High Availability Deployment Guide][ha-guide]</span></span>

<span data-ttu-id="6f87f-196">As seguintes Notas do SAP estão relacionadas com o tópico do SAP no Azure:</span><span class="sxs-lookup"><span data-stu-id="6f87f-196">The following SAP Notes are related to the topic of SAP on Azure:</span></span>

| <span data-ttu-id="6f87f-197">Número da observação</span><span class="sxs-lookup"><span data-stu-id="6f87f-197">Note number</span></span> | <span data-ttu-id="6f87f-198">Title</span><span class="sxs-lookup"><span data-stu-id="6f87f-198">Title</span></span> |
| --- | --- |
| <span data-ttu-id="6f87f-199">[1928533]</span><span class="sxs-lookup"><span data-stu-id="6f87f-199">[1928533]</span></span> |<span data-ttu-id="6f87f-200">Aplicativos SAP no Azure: tipos de VM do Azure e produtos com suporte</span><span class="sxs-lookup"><span data-stu-id="6f87f-200">SAP Applications on Azure: Supported Products and Azure VM types</span></span> |
| <span data-ttu-id="6f87f-201">[2015553]</span><span class="sxs-lookup"><span data-stu-id="6f87f-201">[2015553]</span></span> |<span data-ttu-id="6f87f-202">SAP no Microsoft Azure: pré-requisitos de suporte</span><span class="sxs-lookup"><span data-stu-id="6f87f-202">SAP on Microsoft Azure: Support Prerequisites</span></span> |
| <span data-ttu-id="6f87f-203">[1999351]</span><span class="sxs-lookup"><span data-stu-id="6f87f-203">[1999351]</span></span> |<span data-ttu-id="6f87f-204">Solução de problemas de monitoramento aprimorado do Azure para SAP</span><span class="sxs-lookup"><span data-stu-id="6f87f-204">Troubleshooting Enhanced Azure Monitoring for SAP</span></span> |
| <span data-ttu-id="6f87f-205">[2178632]</span><span class="sxs-lookup"><span data-stu-id="6f87f-205">[2178632]</span></span> |<span data-ttu-id="6f87f-206">Métricas-chave de monitoramento para SAP no Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="6f87f-206">Key Monitoring Metrics for SAP on Microsoft Azure</span></span> |
| <span data-ttu-id="6f87f-207">[1409604]</span><span class="sxs-lookup"><span data-stu-id="6f87f-207">[1409604]</span></span> |<span data-ttu-id="6f87f-208">Virtualização no Windows: monitoramento avançado</span><span class="sxs-lookup"><span data-stu-id="6f87f-208">Virtualization on Windows: Enhanced Monitoring</span></span> |
| <span data-ttu-id="6f87f-209">[2191498]</span><span class="sxs-lookup"><span data-stu-id="6f87f-209">[2191498]</span></span> |<span data-ttu-id="6f87f-210">SAP no Linux com o Azure: monitoramento avançado</span><span class="sxs-lookup"><span data-stu-id="6f87f-210">SAP on Linux with Azure: Enhanced Monitoring</span></span> |
| <span data-ttu-id="6f87f-211">[2039619]</span><span class="sxs-lookup"><span data-stu-id="6f87f-211">[2039619]</span></span> |<span data-ttu-id="6f87f-212">Aplicativos SAP no Microsoft Azure usando o Banco de Dados Oracle: versões e produtos com suporte</span><span class="sxs-lookup"><span data-stu-id="6f87f-212">SAP Applications on Microsoft Azure using the Oracle Database: Supported Products and Versions</span></span> |
| <span data-ttu-id="6f87f-213">[2233094]</span><span class="sxs-lookup"><span data-stu-id="6f87f-213">[2233094]</span></span> |<span data-ttu-id="6f87f-214">DB6: Aplicativos SAP no Azure usando o IBM DB2 para Linux, UNIX e Windows - informações adicionais</span><span class="sxs-lookup"><span data-stu-id="6f87f-214">DB6: SAP Applications on Azure Using IBM DB2 for Linux, UNIX, and Windows - Additional Information</span></span> |
| <span data-ttu-id="6f87f-215">[2243692]</span><span class="sxs-lookup"><span data-stu-id="6f87f-215">[2243692]</span></span> |<span data-ttu-id="6f87f-216">Linux na VM do Microsoft Azure (IaaS): problemas de licença SAP</span><span class="sxs-lookup"><span data-stu-id="6f87f-216">Linux on Microsoft Azure (IaaS) VM: SAP license issues</span></span> |
| <span data-ttu-id="6f87f-217">[1984787]</span><span class="sxs-lookup"><span data-stu-id="6f87f-217">[1984787]</span></span> |<span data-ttu-id="6f87f-218">SUSE LINUX Enterprise Server 12: notas de instalação</span><span class="sxs-lookup"><span data-stu-id="6f87f-218">SUSE LINUX Enterprise Server 12: Installation notes</span></span> |
| <span data-ttu-id="6f87f-219">[2002167]</span><span class="sxs-lookup"><span data-stu-id="6f87f-219">[2002167]</span></span> |<span data-ttu-id="6f87f-220">Red Hat Enterprise Linux 7.x: instalação e atualização</span><span class="sxs-lookup"><span data-stu-id="6f87f-220">Red Hat Enterprise Linux 7.x: Installation and Upgrade</span></span> |

<span data-ttu-id="6f87f-221">Leia também a [SCN Wiki](https://wiki.scn.sap.com/wiki/display/HOME/SAPonLinuxNotes) , que contém todas as Notas SAP para Linux.</span><span class="sxs-lookup"><span data-stu-id="6f87f-221">Please also read the [SCN Wiki](https://wiki.scn.sap.com/wiki/display/HOME/SAPonLinuxNotes) that contains all SAP Notes for Linux.</span></span>

<span data-ttu-id="6f87f-222">Você deve ter um conhecimento prático sobre a arquitetura do Microsoft Azure e como as Máquinas Virtuais do Microsoft Azure são implantadas e operadas.</span><span class="sxs-lookup"><span data-stu-id="6f87f-222">You should have a working knowledge about the Microsoft Azure Architecture and how Microsoft Azure Virtual Machines are deployed and operated.</span></span> <span data-ttu-id="6f87f-223">Você pode encontrar mais informações aqui <https://azure.microsoft.com/documentation/></span><span class="sxs-lookup"><span data-stu-id="6f87f-223">You can find more information here <https://azure.microsoft.com/documentation/></span></span>

> [!NOTE]
> <span data-ttu-id="6f87f-224">**Não** estamos discutindo as ofertas de PaaS (Plataforma como Serviço) do Microsoft Azure da plataforma Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-224">We are **not** discussing Microsoft Azure Platform as a Service (PaaS) offerings of the Microsoft Azure Platform.</span></span> <span data-ttu-id="6f87f-225">Este artigo é sobre a execução de um DBMS (sistema de gerenciamento de banco de dados) em Máquinas Virtuais do Microsoft Azure (IaaS) exatamente como você executaria o DBMS em seus ambientes locais.</span><span class="sxs-lookup"><span data-stu-id="6f87f-225">This paper is about running a database management system (DBMS) in Microsoft Azure Virtual Machines (IaaS) just as you would run the DBMS in your on-premises environment.</span></span> <span data-ttu-id="6f87f-226">As funcionalidades e recursos do banco de dados entre essas duas ofertas são muito diferentes e não devem ser misturados uns com os outros.</span><span class="sxs-lookup"><span data-stu-id="6f87f-226">Database capabilities and functionalities between these two offers are very different and should not be mixed up with each other.</span></span> <span data-ttu-id="6f87f-227">Confira também: <https://azure.microsoft.com/services/sql-database/></span><span class="sxs-lookup"><span data-stu-id="6f87f-227">See also: <https://azure.microsoft.com/services/sql-database/></span></span>
>
>

<span data-ttu-id="6f87f-228">Uma vez que estamos discutindo IaaS, em geral, a instalação e a configuração do Windows, Linux e DBMS são essencialmente as mesmas que qualquer máquina virtual ou computador bare metal que você instalaria de forma local.</span><span class="sxs-lookup"><span data-stu-id="6f87f-228">Since we are discussing IaaS, in general the Windows, Linux and DBMS installation and configuration are essentially the same as any virtual machine or bare metal machine you would install on-premises.</span></span> <span data-ttu-id="6f87f-229">No entanto, há algumas decisões de implementação de gerenciamento de sistema e arquitetura que serão diferentes ao utilizar o IaaS.</span><span class="sxs-lookup"><span data-stu-id="6f87f-229">However, there are some architecture and system management implementation decisions which will be different when utilizing IaaS.</span></span> <span data-ttu-id="6f87f-230">A finalidade deste documento é explicar as diferenças de gerenciamento de sistema e de arquitetura específicas para as quais você deve estar preparado ao usar o IaaS.</span><span class="sxs-lookup"><span data-stu-id="6f87f-230">The purpose of this document is to explain the specific architectural and system management differences that you must be prepared for when using IaaS.</span></span>

<span data-ttu-id="6f87f-231">Em geral, as áreas gerais de diferença discutidas neste documento são:</span><span class="sxs-lookup"><span data-stu-id="6f87f-231">In general, the overall areas of difference that this paper will discuss are:</span></span>

* <span data-ttu-id="6f87f-232">Planejamento do layout de VM/VHD adequado dos sistemas SAP para garantir que você tenha o layout de arquivo de dados adequado e possa obter IOPS suficientes para sua carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="6f87f-232">Planning the proper VM/VHD layout of SAP systems to ensure you have the proper data file layout and can achieve enough IOPS for your workload.</span></span>
* <span data-ttu-id="6f87f-233">Considerações de rede ao usar IaaS.</span><span class="sxs-lookup"><span data-stu-id="6f87f-233">Networking considerations when using IaaS.</span></span>
* <span data-ttu-id="6f87f-234">Recursos de banco de dados específico a serem usados para otimizar o layout do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="6f87f-234">Specific database features to use in order to optimize the database layout.</span></span>
* <span data-ttu-id="6f87f-235">Considerações sobre backup e restauração no IaaS.</span><span class="sxs-lookup"><span data-stu-id="6f87f-235">Backup and restore considerations in IaaS.</span></span>
* <span data-ttu-id="6f87f-236">Uso de diferentes tipos de imagens para implantação.</span><span class="sxs-lookup"><span data-stu-id="6f87f-236">Utilizing different types of images for deployment.</span></span>
* <span data-ttu-id="6f87f-237">Alta disponibilidade no Azure IaaS.</span><span class="sxs-lookup"><span data-stu-id="6f87f-237">High Availability in Azure IaaS.</span></span>

## <span data-ttu-id="6f87f-238"><a name="65fa79d6-a85f-47ee-890b-22e794f51a64"></a>Estrutura de uma implantação do RDBMS</span><span class="sxs-lookup"><span data-stu-id="6f87f-238"><a name="65fa79d6-a85f-47ee-890b-22e794f51a64"></a>Structure of a RDBMS Deployment</span></span>
<span data-ttu-id="6f87f-239">Para seguir este capítulo, é necessário compreender o que foi apresentado [neste][deployment-guide-3] capítulo do [Guia de Implantação][deployment-guide].</span><span class="sxs-lookup"><span data-stu-id="6f87f-239">In order follow this chapter, it is necessary to understand what was presented in [this][deployment-guide-3] chapter of the [Deployment Guide][deployment-guide].</span></span> <span data-ttu-id="6f87f-240">O conhecimento sobre as diferentes séries de VM e suas diferenças e as diferenças do Armazenamento Premium e Standard do Azure deve ser compreendido e conhecido antes de ler este capítulo.</span><span class="sxs-lookup"><span data-stu-id="6f87f-240">Knowledge about the different VM-Series and their differences and differences of Azure Standard and Premium Storage should be understood and known before reading this chapter.</span></span>

<span data-ttu-id="6f87f-241">Até março de 2015, os VHDs do Azure que contêm um sistema operacional eram limitados a 127 GB de tamanho.</span><span class="sxs-lookup"><span data-stu-id="6f87f-241">Until March 2015, Azure VHDs which contain an operating system were limited to 127 GB in size.</span></span> <span data-ttu-id="6f87f-242">Essa limitação foi elevada em março de 2015 (para obter informações, confira <https://azure.microsoft.com/blog/2015/03/25/azure-vm-os-drive-limit-octupled/> ).</span><span class="sxs-lookup"><span data-stu-id="6f87f-242">This limitation got lifted in March 2015 (for more information check <https://azure.microsoft.com/blog/2015/03/25/azure-vm-os-drive-limit-octupled/> ).</span></span> <span data-ttu-id="6f87f-243">A partir daí os VHDs que contêm o sistema operacional podem ter o mesmo tamanho de qualquer outro VHD.</span><span class="sxs-lookup"><span data-stu-id="6f87f-243">From there on VHDs containing the operating system can have the same size as any other VHD.</span></span> <span data-ttu-id="6f87f-244">No entanto, ainda preferimos uma estrutura de implantação na qual o sistema operacional, o DBMS e eventuais binários SAP são separados dos arquivos de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="6f87f-244">Nevertheless, we still prefer a structure of deployment where the operating system, DBMS and eventual SAP binaries are separate from the database files.</span></span> <span data-ttu-id="6f87f-245">Portanto, esperamos que os sistemas SAP em execução em máquinas virtuais do Azure terão a VM base (ou VHD) instalada com o sistema operacional, executáveis do sistema de gerenciamento de banco de dados e executáveis da SAP.</span><span class="sxs-lookup"><span data-stu-id="6f87f-245">Therefore, we expect SAP systems running in Azure Virtual Machines will have the base VM (or VHD) installed with the operating system, database management system executables and SAP executables.</span></span> <span data-ttu-id="6f87f-246">Os arquivos de dados e de log do DBMS serão armazenados no Armazenamento do Azure (Armazenamento Standard ou Premium) em arquivos VHD separados e anexados como discos lógicos para a VM da imagem do sistema operacional do Azure original.</span><span class="sxs-lookup"><span data-stu-id="6f87f-246">The DBMS data and log files will be stored in Azure Storage (Standard or Premium Storage) in separate VHD files and attached as logical disks to the original Azure operating system image VM.</span></span>

<span data-ttu-id="6f87f-247">Dependendo do aproveitamento do Armazenamento Premium ou Standard do Azure (por exemplo, usando VMs da série GS ou DS), há outras cotas no Azure que estão documentadas [aqui][virtual-machines-sizes].</span><span class="sxs-lookup"><span data-stu-id="6f87f-247">Dependent on leveraging Azure Standard or Premium Storage (e.g. by using the DS-series or GS-series VMs) there are other quotas in Azure which are documented [here][virtual-machines-sizes].</span></span> <span data-ttu-id="6f87f-248">Ao planejar seus VHDs do Azure, você precisará localizar o melhor equilíbrio das cotas para o seguinte:</span><span class="sxs-lookup"><span data-stu-id="6f87f-248">When planning your Azure VHDs, you’ll need to find the best balance of the quotas for the following:</span></span>

* <span data-ttu-id="6f87f-249">O número de arquivos de dados.</span><span class="sxs-lookup"><span data-stu-id="6f87f-249">The number of data files.</span></span>
* <span data-ttu-id="6f87f-250">O número de VHDs que contêm os arquivos.</span><span class="sxs-lookup"><span data-stu-id="6f87f-250">The number of VHDs which contain the files.</span></span>
* <span data-ttu-id="6f87f-251">As cotas IOPS de um único VHD.</span><span class="sxs-lookup"><span data-stu-id="6f87f-251">The IOPS quotas of a single VHD.</span></span>
* <span data-ttu-id="6f87f-252">A taxa de transferência de dados por VHD.</span><span class="sxs-lookup"><span data-stu-id="6f87f-252">The data throughput per VHD.</span></span>
* <span data-ttu-id="6f87f-253">O número de VHDs adicionais possíveis por tamanho da VM.</span><span class="sxs-lookup"><span data-stu-id="6f87f-253">The number of additional VHDs possible per VM size.</span></span>
* <span data-ttu-id="6f87f-254">A taxa de transferência geral do armazenamento que uma VM pode fornecer.</span><span class="sxs-lookup"><span data-stu-id="6f87f-254">The overall storage throughput a VM can provide.</span></span>

<span data-ttu-id="6f87f-255">O Azure vai impor uma cota IOPS por unidade VHD.</span><span class="sxs-lookup"><span data-stu-id="6f87f-255">Azure will enforce an IOPS quota per VHD drive.</span></span> <span data-ttu-id="6f87f-256">Essas cotas são diferentes para VHDs hospedados no Armazenamento Standard e no Armazenamento Premium do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-256">These quotas are different for VHDs hosted on Azure Standard Storage and Premium Storage.</span></span> <span data-ttu-id="6f87f-257">As latências de E/S também serão muito diferentes entre os dois tipos de armazenamento, com o Armazenamento Premium fornecendo fatores de melhores latências de E/S.</span><span class="sxs-lookup"><span data-stu-id="6f87f-257">I/O latencies will also be very different between the two storage types with Premium Storage delivering factors better I/O latencies.</span></span> <span data-ttu-id="6f87f-258">Cada um dos diferentes tipos de VM tem um número limitado VHDs que você pode anexar.</span><span class="sxs-lookup"><span data-stu-id="6f87f-258">Each of the different VM types have a limited number of VHDs that you are able to attach.</span></span> <span data-ttu-id="6f87f-259">Outra restrição é que somente determinados tipos de VM podem aproveitar o Armazenamento Premium do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-259">Another restriction is that only certain VM types can leverage Azure Premium Storage.</span></span> <span data-ttu-id="6f87f-260">Isso significa que a decisão para um determinado tipo de VM pode ser orientada não apenas pelos requisitos de CPU e memória, mas também pelo IOPS, requisitos de taxa de transferência do disco e latência que normalmente são dimensionados com o número de VHDs ou o tipo de discos de Armazenamento Premium.</span><span class="sxs-lookup"><span data-stu-id="6f87f-260">This means the decision for a certain VM type might not only be driven by the CPU and memory requirements, but also by the IOPS, latency and disk throughput requirements that usually are scaled with the number of VHDs or the type of Premium Storage disks.</span></span> <span data-ttu-id="6f87f-261">Especialmente com o Armazenamento Premium, o tamanho de um VHD também pode ser determinado pelo número de IOPS e taxa de transferência que precisa ser atingido por cada VHD.</span><span class="sxs-lookup"><span data-stu-id="6f87f-261">Especially with Premium Storage the size of a VHD also might be dictated by the number of IOPS and throughput that needs to be achieved by each VHD.</span></span>

<span data-ttu-id="6f87f-262">O fato de que a taxa IOPS geral, o número de VHDs montados e o tamanho da VM estão todos interligados pode fazer com que uma configuração do Azure de um sistema SAP seja diferente de sua implantação local.</span><span class="sxs-lookup"><span data-stu-id="6f87f-262">The fact that the overall IOPS rate, the number of VHDs mounted, and the size of the VM are all tied together, might cause an Azure configuration of an SAP system to be different than its on-premises deployment.</span></span> <span data-ttu-id="6f87f-263">Os limites de IOPS por LUN geralmente são configuráveis em implantações locais.</span><span class="sxs-lookup"><span data-stu-id="6f87f-263">The IOPS limits per LUN are usually configurable in on-premises deployments.</span></span> <span data-ttu-id="6f87f-264">Enquanto com o Armazenamento do Azure esses limites são fixos ou como o Armazenamento Premium depende do tipo de disco.</span><span class="sxs-lookup"><span data-stu-id="6f87f-264">Whereas with Azure Storage those limits are fixed or as in Premium Storage dependent on the disk type.</span></span> <span data-ttu-id="6f87f-265">Assim com implantações locais, vemos configurações de cliente de servidores de banco de dados que usam muitos volumes diferentes para executáveis especiais como SAP e o DBMS ou volumes especiais para bancos de dados temporários ou espaços de tabela.</span><span class="sxs-lookup"><span data-stu-id="6f87f-265">So with on-premises deployments we see customer configurations of database servers which are using many different volumes for special executables like SAP and the DBMS or special volumes for temporary databases or table spaces.</span></span> <span data-ttu-id="6f87f-266">Quando tal sistema local é movido para o Azure, isso pode levar a uma perda de largura de banda IOPS potencial por desperdiçar um VHD para executáveis ou bancos de dados que não executam nenhum IOPS ou não muitos.</span><span class="sxs-lookup"><span data-stu-id="6f87f-266">When such an on-premises system is moved to Azure it might lead to a waste of potential IOPS bandwidth by wasting a VHD for executables or databases which do not perform any or not a lot of IOPS.</span></span> <span data-ttu-id="6f87f-267">Portanto, em VMs do Azure é recomendável que os executáveis do DBMS e SAP estejam instalados no disco do SO se possível.</span><span class="sxs-lookup"><span data-stu-id="6f87f-267">Therefore, in Azure VMs we recommend that the DBMS and SAP executables be installed on the OS disk if possible.</span></span>

<span data-ttu-id="6f87f-268">O posicionamento de arquivos de banco de dados e arquivos de log e o tipo de Armazenamento do Azure usado devem ser definidos por requisitos de taxa de transferência, latência e IOPS.</span><span class="sxs-lookup"><span data-stu-id="6f87f-268">The placement of the database files and log files and the type of Azure Storage used, should be defined by IOPS, latency and throughput requirements.</span></span> <span data-ttu-id="6f87f-269">Para ter IOPS suficientes para o log de transações, você poderá ser forçado a aproveitar vários VHDs para o arquivo de log de transações ou usar um disco de Armazenamento Premium maior.</span><span class="sxs-lookup"><span data-stu-id="6f87f-269">In order to have enough IOPS for the transaction log, you might be forced to leverage multiple VHDs for the transaction log file or use a larger Premium Storage disk.</span></span> <span data-ttu-id="6f87f-270">Nesse caso, seria possível simplesmente criar um RAID de software (por exemplo, pool de armazenamento do Windows para Windows ou MDADM ou LVM [Logical Volume Manager] para Linux) com os VHDs que conteria o log de transações.</span><span class="sxs-lookup"><span data-stu-id="6f87f-270">In such a case one would simply build a software RAID (e.g. Windows Storage Pool for Windows or MDADM and LVM (Logical Volume Manager) for Linux) with the VHDs which will contain the transaction log.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="6f87f-272">Windows</span><span class="sxs-lookup"><span data-stu-id="6f87f-272">Windows</span></span>
>
> <span data-ttu-id="6f87f-273">A unidade D:\ em uma VM do Azure é uma unidade não persistente que é apoiada por alguns discos locais no nó de computação do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-273">Drive D:\ in an Azure VM is a non-persisted drive which is backed by some local disks on the Azure compute node.</span></span> <span data-ttu-id="6f87f-274">Como ela não é persistente, isso significa que as alterações feitas no conteúdo na unidade D:\ são perdidas quando a VM é reiniciada.</span><span class="sxs-lookup"><span data-stu-id="6f87f-274">Because it is non-persisted, this means that any changes made to the content on the D:\ drive is lost when the VM is rebooted.</span></span> <span data-ttu-id="6f87f-275">Por "alterações", queremos dizer arquivos salvos, diretórios criados, aplicativos instalados etc.</span><span class="sxs-lookup"><span data-stu-id="6f87f-275">By "any changes", we mean saved files, directories created, applications installed, etc.</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="6f87f-277">Linux</span><span class="sxs-lookup"><span data-stu-id="6f87f-277">Linux</span></span>
>
> <span data-ttu-id="6f87f-278">As VMs do Azure do Linux montam automaticamente uma unidade em /mnt/resource, que é uma unidade não persistente apoiada por discos locais no nó de computação do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-278">Linux Azure VMs automatically mount a drive at /mnt/resource which is a non-persisted drive backed by local disks on the Azure compute node.</span></span> <span data-ttu-id="6f87f-279">Como ela não é persistente, isso significa que as alterações feitas no conteúdo em /mnt/resource são perdidas quando a VM é reinicializada.</span><span class="sxs-lookup"><span data-stu-id="6f87f-279">Because it is non-persisted, this means that any changes made to content in /mnt/resource is lost when the VM is rebooted.</span></span> <span data-ttu-id="6f87f-280">Por alterações, queremos dizer arquivos salvos, diretórios criados, aplicativos instalados etc.</span><span class="sxs-lookup"><span data-stu-id="6f87f-280">By any changes, we mean files saved, directories created, applications installed, etc.</span></span>
>
>

- - -
<span data-ttu-id="6f87f-281">Dependendo da série da VM do Azure, os discos locais no nó de computação mostram diferentes desempenhos que podem ser categorizados como:</span><span class="sxs-lookup"><span data-stu-id="6f87f-281">Dependent on the Azure VM-series, the local disks on the compute node show different performance which can be categorized like:</span></span>

* <span data-ttu-id="6f87f-282">A0-A7: desempenho muito limitado.</span><span class="sxs-lookup"><span data-stu-id="6f87f-282">A0-A7: Very limited performance.</span></span> <span data-ttu-id="6f87f-283">Não pode ser usado para nada além do arquivo de paginação do Windows</span><span class="sxs-lookup"><span data-stu-id="6f87f-283">Not usable for anything beyond windows page file</span></span>
* <span data-ttu-id="6f87f-284">A8-A11: características de desempenho excelentes, com aproximadamente dez mil IOPS e taxa de transferência superior a 1 GB/s</span><span class="sxs-lookup"><span data-stu-id="6f87f-284">A8-A11: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput</span></span>
* <span data-ttu-id="6f87f-285">Série D: características de desempenho excelentes, com aproximadamente dez mil IOPS e taxa de transferência superior a 1 GB/s</span><span class="sxs-lookup"><span data-stu-id="6f87f-285">D-Series: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput</span></span>
* <span data-ttu-id="6f87f-286">Série DS: características de desempenho excelentes, com aproximadamente dez mil IOPS e taxa de transferência superior a 1 GB/s</span><span class="sxs-lookup"><span data-stu-id="6f87f-286">DS-Series: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput</span></span>
* <span data-ttu-id="6f87f-287">Série G: características de desempenho excelentes, com aproximadamente dez mil IOPS e taxa de transferência superior a 1 GB/s</span><span class="sxs-lookup"><span data-stu-id="6f87f-287">G-Series: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput</span></span>
* <span data-ttu-id="6f87f-288">Série GS: características de desempenho excelentes, com aproximadamente dez mil IOPS e taxa de transferência superior a 1 GB/s</span><span class="sxs-lookup"><span data-stu-id="6f87f-288">GS-Series: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput</span></span>

<span data-ttu-id="6f87f-289">As instruções acima estão sendo aplicadas aos tipos de VM que são certificados com a SAP.</span><span class="sxs-lookup"><span data-stu-id="6f87f-289">Statements above are applying to the VM types that are certified with SAP.</span></span> <span data-ttu-id="6f87f-290">A série de VMs com IOPS e taxa de transferência excelentes se qualifica para o aproveitamento por alguns recursos do DBMS, como tempdb ou espaço de tabela temporário.</span><span class="sxs-lookup"><span data-stu-id="6f87f-290">The VM-series with excellent IOPS and throughput qualify for leverage by some DBMS features, like tempdb or temporary table space.</span></span>

### <span data-ttu-id="6f87f-291"><a name="c7abf1f0-c927-4a7c-9c1d-c7b5b3b7212f"></a>Cache para VMs e VHDs</span><span class="sxs-lookup"><span data-stu-id="6f87f-291"><a name="c7abf1f0-c927-4a7c-9c1d-c7b5b3b7212f"></a>Caching for VMs and VHDs</span></span>
<span data-ttu-id="6f87f-292">Quando criamos esses discos/VHDs por meio do portal ou quando montamos VHDs carregados em VMs, podemos escolher se o tráfego de E/S entre a VM e os VHDs localizados no Armazenamento do Azure são armazenadas em cache.</span><span class="sxs-lookup"><span data-stu-id="6f87f-292">When we create those disks/VHDs through the portal or when we mount uploaded VHDs to VMs, we can choose whether the I/O traffic between the VM and those VHDs located in Azure storage are cached.</span></span> <span data-ttu-id="6f87f-293">O Armazenamento Standard e Premium do Azure usam duas tecnologias diferentes para esse tipo de cache.</span><span class="sxs-lookup"><span data-stu-id="6f87f-293">Azure Standard and Premium Storage use two different technologies for this type of cache.</span></span> <span data-ttu-id="6f87f-294">Em ambos os casos o cache em si terá o backup em disco feito nas mesmas unidades usadas pelo disco temporário (D:\ no Windows ou /mnt/resource no Linux) da VM.</span><span class="sxs-lookup"><span data-stu-id="6f87f-294">In both cases the cache itself would be disk backed on the same drives used by the temporary disk (D:\ on Windows or /mnt/resource on Linux) of the VM.</span></span>

<span data-ttu-id="6f87f-295">Para o Armazenamento Standard do Azure, os possíveis tipos de cache são:</span><span class="sxs-lookup"><span data-stu-id="6f87f-295">For Azure Standard Storage the possible cache types are:</span></span>

* <span data-ttu-id="6f87f-296">Sem cache</span><span class="sxs-lookup"><span data-stu-id="6f87f-296">No caching</span></span>
* <span data-ttu-id="6f87f-297">Cache de leitura</span><span class="sxs-lookup"><span data-stu-id="6f87f-297">Read caching</span></span>
* <span data-ttu-id="6f87f-298">Cache de leitura e gravação</span><span class="sxs-lookup"><span data-stu-id="6f87f-298">Read and Write caching</span></span>

<span data-ttu-id="6f87f-299">Para obter um desempenho consistente e determinístico, você deve definir o caching no Armazenamento Standard do Azure para todos os VHDs contendo **Arquivos de dados relacionados ao DBMS, arquivos de log e espaço de tabela como ‘NENHUM’**.</span><span class="sxs-lookup"><span data-stu-id="6f87f-299">In order to get consistent and deterministic performance, you should set the caching on Azure Standard Storage for all VHDs containing **DBMS related data files, log files and table space to 'NONE'**.</span></span> <span data-ttu-id="6f87f-300">O caching da VM pode permanecer com o padrão.</span><span class="sxs-lookup"><span data-stu-id="6f87f-300">The caching of the VM can remain with the default.</span></span>

<span data-ttu-id="6f87f-301">Para o Armazenamento Premium do Azure, existem as seguintes opções de caching:</span><span class="sxs-lookup"><span data-stu-id="6f87f-301">For Azure Premium Storage the following caching options exist:</span></span>

* <span data-ttu-id="6f87f-302">Sem cache</span><span class="sxs-lookup"><span data-stu-id="6f87f-302">No caching</span></span>
* <span data-ttu-id="6f87f-303">Cache de leitura</span><span class="sxs-lookup"><span data-stu-id="6f87f-303">Read caching</span></span>

<span data-ttu-id="6f87f-304">A recomendação para o Armazenamento Premium do Azure é aproveitar o **Cache de leitura para arquivos de dados** do banco de dados SAP e escolher **Sem cache para os VHDs de arquivos de log**.</span><span class="sxs-lookup"><span data-stu-id="6f87f-304">Recommendation for Azure Premium Storage is to leverage **Read caching for data files** of the SAP database and chose **No caching for the VHD(s) of log file(s)**.</span></span>

### <span data-ttu-id="6f87f-305"><a name="c8e566f9-21b7-4457-9f7f-126036971a91"></a>RAID de software</span><span class="sxs-lookup"><span data-stu-id="6f87f-305"><a name="c8e566f9-21b7-4457-9f7f-126036971a91"></a>Software RAID</span></span>
<span data-ttu-id="6f87f-306">Como já foi dito acima, você precisará equilibrar o número de IOPS necessários para os arquivos de banco de dados entre o número de VHDs que pode configurar e o máximo de IOPS que uma VM do Azure fornecerá por tipo de disco de Armazenamento Premium ou VHD.</span><span class="sxs-lookup"><span data-stu-id="6f87f-306">As already stated above, you will need to balance the number of IOPS needed for the database files across the number of VHDs you can configure and the maximum IOPS an Azure VM will provide per VHD or Premium Storage disk type.</span></span> <span data-ttu-id="6f87f-307">A maneira mais fácil de lidar com a carga de IOPS em VHDs é criar um RAID de software nos diferentes VHDs.</span><span class="sxs-lookup"><span data-stu-id="6f87f-307">Easiest way to deal with the IOPS load over VHDs is to build a software RAID over the different VHDs.</span></span> <span data-ttu-id="6f87f-308">Em seguida, colocar um número de arquivos de dados do SAP DBMS no LUNS retirado do RAID de software.</span><span class="sxs-lookup"><span data-stu-id="6f87f-308">Then place a number of data files of the SAP DBMS on the LUNS carved out of the software RAID.</span></span> <span data-ttu-id="6f87f-309">Dependendo dos requisitos, talvez você queira considerar o uso do Armazenamento Premium também, uma vez que dois dos três discos diferentes do Armazenamento Premium fornecem uma cota IOPS maior que os VHDs com base no Armazenamento Standard.</span><span class="sxs-lookup"><span data-stu-id="6f87f-309">Dependent on the requirements you might want to consider the usage of Premium Storage as well since two of the three different Premium Storage disks provide higher IOPS quota than VHDs based on Standard Storage.</span></span> <span data-ttu-id="6f87f-310">Além da latência de E/S significativamente melhor fornecida pelo Armazenamento Premium do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-310">Besides the significant better I/O latency provided by Azure Premium Storage.</span></span>

<span data-ttu-id="6f87f-311">O mesmo se aplica ao log de transações dos diferentes sistemas DBMS.</span><span class="sxs-lookup"><span data-stu-id="6f87f-311">Same applies to the transaction log of the different DBMS systems.</span></span> <span data-ttu-id="6f87f-312">Com muitos deles apenas adicionando mais arquivos Tlog não ajuda, uma vez que os sistemas DBMS gravam em um dos arquivos de cada vez.</span><span class="sxs-lookup"><span data-stu-id="6f87f-312">With a lot of them just adding more Tlog files does not help since the DBMS systems write into one of the files at a time only.</span></span> <span data-ttu-id="6f87f-313">Se forem necessárias taxas de IOPS mais altas do que um único VHD baseado no Armazenamento Standard pode oferecer, você poderá distribuir entre vários VHDs de Armazenamento Standard ou poderá usar um tipo de disco de Armazenamento Premium maior que, além de taxas de IOPS mais altas, também oferece latência menor de fatores para as E/Ss de gravação no log de transações.</span><span class="sxs-lookup"><span data-stu-id="6f87f-313">If higher IOPS rates are needed than a single Standard Storage based VHD can deliver, you can stripe over multiple Standard Storage VHDs or you can use a larger Premium Storage disk type that beyond higher IOPS rates also delivers factors lower latency for the write I/Os into the transaction log.</span></span>

<span data-ttu-id="6f87f-314">As situações vivenciadas em implantações do Azure que seriam beneficiadas pelo uso de um RAID de software são:</span><span class="sxs-lookup"><span data-stu-id="6f87f-314">Situations experienced in Azure deployments which would favor using a software RAID are:</span></span>

* <span data-ttu-id="6f87f-315">O log de transações/log de restauração requerem mais IOPS do que o Azure fornece para um único VHD.</span><span class="sxs-lookup"><span data-stu-id="6f87f-315">Transaction Log/Redo Log require more IOPS than Azure provides for a single VHD.</span></span> <span data-ttu-id="6f87f-316">Conforme mencionado acima isso pode ser resolvido com a criação de um LUN em vários VHDs usando um RAID de software.</span><span class="sxs-lookup"><span data-stu-id="6f87f-316">As mentioned above this can be solved by building a LUN over multiple VHDs using a software RAID.</span></span>
* <span data-ttu-id="6f87f-317">Distribuição de carga de trabalho de E/S desigual nos diferentes arquivos de dados do banco de dados SAP.</span><span class="sxs-lookup"><span data-stu-id="6f87f-317">Uneven I/O workload distribution over the different data files of the SAP database.</span></span> <span data-ttu-id="6f87f-318">Nesses casos, pode ocorrer de um arquivo de dados atingir a cota com bastante frequência.</span><span class="sxs-lookup"><span data-stu-id="6f87f-318">In such cases one can experience one data file hitting the quota rather often.</span></span> <span data-ttu-id="6f87f-319">Enquanto outros arquivos de dados não estão nem mesmo se aproximando da cota IOPS de um único VHD.</span><span class="sxs-lookup"><span data-stu-id="6f87f-319">Whereas other data files are not even getting close to the IOPS quota of a single VHD.</span></span> <span data-ttu-id="6f87f-320">Nesses casos, a solução mais fácil é criar um LUN em vários VHDs usando um RAID de software.</span><span class="sxs-lookup"><span data-stu-id="6f87f-320">In such cases the easiest solution is to build one LUN over multiple VHDs using a software RAID.</span></span>
* <span data-ttu-id="6f87f-321">Você não sabe qual é a carga de trabalho de E/S exata por arquivo de dados e sabe apenas aproximadamente qual é a carga de trabalho de IOPS geral no DBMS.</span><span class="sxs-lookup"><span data-stu-id="6f87f-321">You don’t know what the exact I/O workload per data file is and only roughly know what the overall IOPS workload against the DBMS is.</span></span> <span data-ttu-id="6f87f-322">O mais fácil a se fazer é criar um LUN com a ajuda de um RAID de software.</span><span class="sxs-lookup"><span data-stu-id="6f87f-322">Easiest to do is to build one LUN with the help of a software RAID.</span></span> <span data-ttu-id="6f87f-323">A soma das cotas de vários VHDs por trás desse LUN deve atender à taxa IOPS conhecida.</span><span class="sxs-lookup"><span data-stu-id="6f87f-323">The sum of quotas of multiple VHDs behind this LUN should then fulfill the known IOPS rate.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="6f87f-325">Windows</span><span class="sxs-lookup"><span data-stu-id="6f87f-325">Windows</span></span>
>
> <span data-ttu-id="6f87f-326">O uso de Espaços de Armazenamento do Windows Server 2012 ou superior é preferível uma vez que é mais eficiente do que a distribuição do Windows de versões anteriores do Windows.</span><span class="sxs-lookup"><span data-stu-id="6f87f-326">Usage of Windows Server 2012 or higher Storage Spaces is preferable since it is more efficient than Windows Striping of earlier Windows versions.</span></span> <span data-ttu-id="6f87f-327">Esteja ciente de que você precisa criar os Pools de Armazenamento do Windows e Espaços de Armazenamento por comandos do PowerShell ao usar o Windows Server 2012 como sistema operacional.</span><span class="sxs-lookup"><span data-stu-id="6f87f-327">Please be aware that you might need to create the Windows Storage Pools and Storage Spaces by PowerShell commands when using Windows Server 2012 as Operating System.</span></span> <span data-ttu-id="6f87f-328">Os comandos do PowerShell podem ser encontrados aqui <https://technet.microsoft.com/library/jj851254.aspx></span><span class="sxs-lookup"><span data-stu-id="6f87f-328">The PowerShell commands can be found here <https://technet.microsoft.com/library/jj851254.aspx></span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="6f87f-330">Linux</span><span class="sxs-lookup"><span data-stu-id="6f87f-330">Linux</span></span>
>
> <span data-ttu-id="6f87f-331">Há suporte apenas para MDADM e LVM (Logical Volume Manager) para criar um RAID de software no Linux.</span><span class="sxs-lookup"><span data-stu-id="6f87f-331">Only MDADM and LVM (Logical Volume Manager) are supported to build a software RAID on Linux.</span></span> <span data-ttu-id="6f87f-332">Para obter mais informações, leia os seguintes artigos:</span><span class="sxs-lookup"><span data-stu-id="6f87f-332">For more information, read the following articles:</span></span>
>
> * <span data-ttu-id="6f87f-333">[Configurar RAID de software no Linux][virtual-machines-linux-configure-raid] (para MDADM)</span><span class="sxs-lookup"><span data-stu-id="6f87f-333">[Configure Software RAID on Linux][virtual-machines-linux-configure-raid] (for MDADM)</span></span>
> * <span data-ttu-id="6f87f-334">[Configurar o LVM em uma VM Linux no Azure][virtual-machines-linux-configure-lvm]</span><span class="sxs-lookup"><span data-stu-id="6f87f-334">[Configure LVM on a Linux VM in Azure][virtual-machines-linux-configure-lvm]</span></span>
>
>

- - -
<span data-ttu-id="6f87f-335">As considerações para aproveitar a série de VM que é capaz de trabalhar com o Armazenamento Premium do Azure geralmente são:</span><span class="sxs-lookup"><span data-stu-id="6f87f-335">Considerations for leveraging VM-series which are able to work with Azure Premium Storage usually are:</span></span>

* <span data-ttu-id="6f87f-336">Demandas de latências de E/S que estão próximas às que os dispositivos SAN/NAS fornecem.</span><span class="sxs-lookup"><span data-stu-id="6f87f-336">Demands for I/O latencies that are close to what SAN/NAS devices deliver.</span></span>
* <span data-ttu-id="6f87f-337">Demanda de fatores de melhores latências de E/S que o Armazenamento Standard do Azure pode fornecer.</span><span class="sxs-lookup"><span data-stu-id="6f87f-337">Demand for factors better I/O latency than Azure Standard Storage can deliver.</span></span>
* <span data-ttu-id="6f87f-338">IOPS por VM maior do que o que pode ser obtido com vários VHDs de Armazenamento Standard em um determinado tipo de VM.</span><span class="sxs-lookup"><span data-stu-id="6f87f-338">Higher IOPS per VM than what could be achieved with multiple Standard Storage VHDs against a certain VM type.</span></span>

<span data-ttu-id="6f87f-339">Como o Armazenamento do Azure subjacente replica cada VHD para pelo menos três nós de armazenamento, é possível usar a distribuição de RAID 0 simples.</span><span class="sxs-lookup"><span data-stu-id="6f87f-339">Since the underlying Azure Storage replicates each VHD to at least three storage nodes, simple RAID 0 striping can be used.</span></span> <span data-ttu-id="6f87f-340">Não há nenhuma necessidade de implementar o RAID5 ou o RAID1.</span><span class="sxs-lookup"><span data-stu-id="6f87f-340">There is no need to implement RAID5 or RAID1.</span></span>

### <span data-ttu-id="6f87f-341"><a name="10b041ef-c177-498a-93ed-44b3441ab152"></a>Armazenamento do Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="6f87f-341"><a name="10b041ef-c177-498a-93ed-44b3441ab152"></a>Microsoft Azure Storage</span></span>
<span data-ttu-id="6f87f-342">O Armazenamento do Microsoft Azure armazenará a VM base (com o SO) e VHDs ou blobs para pelo menos três nós de armazenamento separados.</span><span class="sxs-lookup"><span data-stu-id="6f87f-342">Microsoft Azure Storage will store the base VM (with OS) and VHDs or BLOBs to at least 3 separate storage nodes.</span></span> <span data-ttu-id="6f87f-343">Ao criar uma conta de armazenamento, há uma opção de proteção conforme mostrado aqui:</span><span class="sxs-lookup"><span data-stu-id="6f87f-343">When creating a storage account, there is a choice of protection as shown here:</span></span>

![Replicação geográfica habilitada para a conta de armazenamento do Azure][dbms-guide-figure-100]

<span data-ttu-id="6f87f-345">A Replicação Local do Armazenamento do Azure (localmente redundante) fornece níveis de proteção contra a perda de dados devido à falha de infraestrutura que alguns clientes podem ter condições de implantar.</span><span class="sxs-lookup"><span data-stu-id="6f87f-345">Azure Storage Local Replication (Locally Redundant) provides levels of protection against data loss due to infrastructure failure that few customers could afford to deploy.</span></span> <span data-ttu-id="6f87f-346">Conforme mostrado acima, há quatro opções diferentes com uma quinta sendo uma variação de uma das três primeiras.</span><span class="sxs-lookup"><span data-stu-id="6f87f-346">As shown above there are 4 different options with a fifth being a variation of one of the first three.</span></span> <span data-ttu-id="6f87f-347">Analisando-as mais de perto, podemos distinguir:</span><span class="sxs-lookup"><span data-stu-id="6f87f-347">Looking closer at them we can distinguish:</span></span>

* <span data-ttu-id="6f87f-348">**LRS (Armazenamento com Redundância Local) Premium**: o Armazenamento Premium do Azure fornece alto desempenho, dá suporte a disco de baixa latência para máquinas virtuais executando cargas de trabalho intensas de E/S.</span><span class="sxs-lookup"><span data-stu-id="6f87f-348">**Premium Locally Redundant Storage (LRS)**: Azure Premium Storage delivers high-performance, low-latency disk support for virtual machines running I/O-intensive workloads.</span></span> <span data-ttu-id="6f87f-349">Há três réplicas dos dados dentro do mesmo datacenter do Azure de uma região do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-349">There are 3 replicas of the data within the same Azure datacenter of an Azure region.</span></span> <span data-ttu-id="6f87f-350">As cópias estarão em diferentes Domínios de Falha e de Atualização (para conhecer os conceitos, veja [este][planning-guide-3.2] capítulo no [Guia de Planejamento][planning-guide]).</span><span class="sxs-lookup"><span data-stu-id="6f87f-350">The copies will be in different Fault and Upgrade Domains (for concepts see [this][planning-guide-3.2] chapter in the [Planning Guide][planning-guide]).</span></span> <span data-ttu-id="6f87f-351">No caso de uma réplica dos dados sendo retirada de serviço devido a uma falha de nó de armazenamento ou a falha de disco, uma nova réplica é gerada automaticamente.</span><span class="sxs-lookup"><span data-stu-id="6f87f-351">In case of a replica of the data going out of service due to a storage node failure or disk failure, a new replica is generated automatically.</span></span>
* <span data-ttu-id="6f87f-352">**LRS (Armazenamento com Redundância Local)**: nesse caso, há três réplicas dos dados dentro do mesmo datacenter do Azure de uma região do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-352">**Locally Redundant Storage (LRS)**: In this case there are 3 replicas of the data within the same Azure datacenter of an Azure region.</span></span> <span data-ttu-id="6f87f-353">As cópias estarão em diferentes Domínios de Falha e de Atualização (para conhecer os conceitos, veja [este][planning-guide-3.2] capítulo no [Guia de Planejamento][planning-guide]).</span><span class="sxs-lookup"><span data-stu-id="6f87f-353">The copies will be in different Fault and Upgrade Domains (for concepts see [this][planning-guide-3.2] chapter in the [Planning Guide][planning-guide]).</span></span> <span data-ttu-id="6f87f-354">No caso de uma réplica dos dados sendo retirada de serviço devido a uma falha de nó de armazenamento ou a falha de disco, uma nova réplica é gerada automaticamente.</span><span class="sxs-lookup"><span data-stu-id="6f87f-354">In case of a replica of the data going out of service due to a storage node failure or disk failure, a new replica is generated automatically.</span></span>
* <span data-ttu-id="6f87f-355">**GRS (Armazenamento de Redundância Geográfica)**: nesse caso, há uma replicação assíncrona que alimentará três réplicas adicionais dos dados em outra região do Azure, que na maioria dos casos está na mesma região geográfica (como Europa Setentrional e Europa Ocidental).</span><span class="sxs-lookup"><span data-stu-id="6f87f-355">**Geo Redundant Storage (GRS)**: In this case there is an asynchronous replication that will feed an additional 3 replicas of the data in another Azure Region which is in most of the cases in the same geographical region (like North Europe and West Europe).</span></span> <span data-ttu-id="6f87f-356">Isso resultará em três réplicas adicionais, para que haja seis réplicas em suma.</span><span class="sxs-lookup"><span data-stu-id="6f87f-356">This will result in 3 additional replicas, so that there are 6 replicas in sum.</span></span> <span data-ttu-id="6f87f-357">Uma variação disso é uma adição em que os dados na região do Azure replicada geograficamente podem ser usados para fins de leitura (Redundância Geográfica com Acesso de Leitura).</span><span class="sxs-lookup"><span data-stu-id="6f87f-357">A variation of this is an addition where the data in the geo replicated Azure region can be used for read purposes (Read-Access Geo-Redundant).</span></span>
* <span data-ttu-id="6f87f-358">**ZRS (Armazenamento com Redundância de Zona)**: nesse caso, as três réplicas dos dados permanecem na mesma região do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-358">**Zone Redundant Storage (ZRS)**: In this case the 3 replicas of the data remain in the same Azure Region.</span></span> <span data-ttu-id="6f87f-359">Conforme explicado [neste][planning-guide-3.1] capítulo do [Guia de Planejamento][planning-guide], uma região do Azure pode ser um número de datacenters próximos uns dos outros.</span><span class="sxs-lookup"><span data-stu-id="6f87f-359">As explained in [this][planning-guide-3.1] chapter of the [Planning Guide][planning-guide] an Azure region can be a number of datacenters in close proximity.</span></span> <span data-ttu-id="6f87f-360">No caso do LRS, as réplicas devem ser distribuídas em diferentes datacenters que compõem uma região do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-360">In the case of LRS the replicas would be distributed over the different datacenters that make one Azure region.</span></span>

<span data-ttu-id="6f87f-361">Mais informações podem ser encontradas [aqui][storage-redundancy].</span><span class="sxs-lookup"><span data-stu-id="6f87f-361">More information can be found [here][storage-redundancy].</span></span>

> [!NOTE]
> <span data-ttu-id="6f87f-362">Para implantações de DBMS, o uso do Armazenamento de Redundância Geográfica não é recomendado</span><span class="sxs-lookup"><span data-stu-id="6f87f-362">For DBMS deployments, the usage of Geo Redundant Storage is not recommended</span></span>
>
> <span data-ttu-id="6f87f-363">A replicação geográfica do Armazenamento do Azure é assíncrona.</span><span class="sxs-lookup"><span data-stu-id="6f87f-363">Azure Storage Geo-Replication is asynchronous.</span></span> <span data-ttu-id="6f87f-364">A replicação de VHDs individuais montados em uma única VM não é sincronizada na etapa de bloqueio.</span><span class="sxs-lookup"><span data-stu-id="6f87f-364">Replication of individual VHDs mounted to a single VM are not synchronized in lock step.</span></span> <span data-ttu-id="6f87f-365">Portanto, não é adequado replicar arquivos DBMS que são distribuídos em diferentes VHDs ou implantados em um RAID de software com base em vários VHDs.</span><span class="sxs-lookup"><span data-stu-id="6f87f-365">Therefore, it is not suitable to replicate DBMS files that are distributed over different VHDs or deployed against a software RAID based on multiple VHDs.</span></span> <span data-ttu-id="6f87f-366">O software DBMS requer que o armazenamento em disco persistente seja sincronizado com precisão em LUNs diferentes e discos subjacentes/VHDs/eixo.</span><span class="sxs-lookup"><span data-stu-id="6f87f-366">DBMS software requires that the persistent disk storage is precisely synchronized across different LUNs and underlying disks/VHDs/spindles.</span></span> <span data-ttu-id="6f87f-367">O software DBMS usa vários mecanismos para sequenciar atividades de gravação de E/S e um DBMS relatará que o armazenamento de disco alvo da replicação está corrompido se variarem mesmo por alguns milissegundos.</span><span class="sxs-lookup"><span data-stu-id="6f87f-367">DBMS software uses various mechanisms to sequence IO write activities and a DBMS will report that the disk storage targeted by the replication is corrupted if these vary even by a few milliseconds.</span></span> <span data-ttu-id="6f87f-368">Portanto, se você realmente quiser uma configuração de banco de dados com um banco de dados estendido por vários VHDs com replicação geográfica, tal replicação precisará ser executada com meios e funcionalidade de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="6f87f-368">Hence if one really wants a database configuration with a database stretched across multiple VHDs geo-replicated, such a replication needs to be performed with database means and functionality.</span></span> <span data-ttu-id="6f87f-369">Não se deve confiar na replicação geográfica do Armazenamento do Azure para realizar esse trabalho.</span><span class="sxs-lookup"><span data-stu-id="6f87f-369">One should not rely on Azure Storage Geo-Replication to perform this job.</span></span>
>
> <span data-ttu-id="6f87f-370">O problema é mais simples de ser explicado com um sistema de exemplo.</span><span class="sxs-lookup"><span data-stu-id="6f87f-370">The problem is simplest to explain with an example system.</span></span> <span data-ttu-id="6f87f-371">Vamos supor que você tenha um sistema SAP carregado no Azure que tem oito VHDs contendo arquivos de dados do DBMS, mais um VHD que contém o arquivo de log de transações.</span><span class="sxs-lookup"><span data-stu-id="6f87f-371">Let’s assume you have an SAP system uploaded into Azure which has 8 VHDs containing data files of the DBMS plus one VHD containing the transaction log file.</span></span> <span data-ttu-id="6f87f-372">Cada um desses nove VHDs terá dados gravados neles em um método consistente de acordo com o DBMS, quer os dados estejam sendo gravados nos arquivos de log de transações ou dados.</span><span class="sxs-lookup"><span data-stu-id="6f87f-372">Each one of these 9 VHDs will have data written to them in a consistent method according to the DBMS, whether the data is being written to the data or transaction log files.</span></span>
>
> <span data-ttu-id="6f87f-373">Para replicar geograficamente de forma correta os dados e manter uma imagem de banco de dados consistente, o conteúdo de todos os nove VHDs precisaria ser replicado geograficamente na ordem exata em que as operações de E/S foram executadas em relação aos nove VHDs diferentes.</span><span class="sxs-lookup"><span data-stu-id="6f87f-373">In order to properly geo-replicate the data and maintain a consistent database image, the content of all nine VHDs would have to be geo-replicated in the exact order the I/O operations were executed against the nine different VHDs.</span></span> <span data-ttu-id="6f87f-374">No entanto, a replicação geográfica do Armazenamento do Azure não permite declarar dependências entre VHDs.</span><span class="sxs-lookup"><span data-stu-id="6f87f-374">However, Azure Storage geo-replication does not allow to declare dependencies between VHDs.</span></span> <span data-ttu-id="6f87f-375">Isso significa que a replicação geográfica do Armazenamento do Microsoft Azure não conhece o fato de que os conteúdos desses nove VHDs diferentes estão relacionados uns aos outros e que as alterações de dados são consistentes apenas ao replicar na ordem em que as operações de E/S ocorreu entre todos os nove VHDs.</span><span class="sxs-lookup"><span data-stu-id="6f87f-375">This means Microsoft Azure Storage geo-replication doesn’t know about the fact that the content in these nine different VHDs are related to each other and that the data changes are consistent only when replicating in the order the I/O operations happened across all the 9 VHDs.</span></span>
>
> <span data-ttu-id="6f87f-376">Além de serem altas as chances de as imagens replicadas geograficamente no cenário não fornecerem uma imagem consistente do banco de dados, também há uma penalidade de desempenho que surge com o armazenamento de redundância geográfica que pode afetar seriamente o desempenho.</span><span class="sxs-lookup"><span data-stu-id="6f87f-376">Besides chances being high that the geo-replicated images in the scenario do not provide a consistent database image, there also is a performance penalty that shows up with geo redundant storage that can severely impact performance.</span></span> <span data-ttu-id="6f87f-377">Em resumo, não use esse tipo de redundância de armazenamento para cargas de trabalho do tipo DBMS.</span><span class="sxs-lookup"><span data-stu-id="6f87f-377">In summary do not use this type of storage redundancy for DBMS type workloads.</span></span>
>
>

#### <a name="mapping-vhds-into-azure-virtual-machine-service-storage-accounts"></a><span data-ttu-id="6f87f-378">Mapeando VHDs em contas de armazenamento do serviço de máquina virtual do Azure</span><span class="sxs-lookup"><span data-stu-id="6f87f-378">Mapping VHDs into Azure Virtual Machine Service Storage Accounts</span></span>
<span data-ttu-id="6f87f-379">Uma Conta de Armazenamento do Azure não é apenas um constructo administrativo, mas também uma entidade de limitações.</span><span class="sxs-lookup"><span data-stu-id="6f87f-379">An Azure Storage Account is not only an administrative construct, but also a subject of limitations.</span></span> <span data-ttu-id="6f87f-380">Enquanto as limitações variam se falamos de uma Conta de Armazenamento Standard do Azure ou uma Conta de Armazenamento Premium do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-380">Whereas the limitations vary on whether we talk about an Azure Standard Storage Account or an Azure Premium Storage Account.</span></span> <span data-ttu-id="6f87f-381">As funcionalidades e limitações exatas são listadas [aqui][storage-scalability-targets]</span><span class="sxs-lookup"><span data-stu-id="6f87f-381">The exact capabilities and limitations are listed [here][storage-scalability-targets]</span></span>

<span data-ttu-id="6f87f-382">Portanto, para o Armazenamento Standard do Azure, é importante observar que há um limite no IOPS por conta de armazenamento (linha contendo “Taxa de Solicitação Total” [no artigo][storage-scalability-targets]).</span><span class="sxs-lookup"><span data-stu-id="6f87f-382">So for Azure Standard Storage it is important to note there is a limit on the IOPS per storage account (Row containing ‘Total Request Rate’ in [the article][storage-scalability-targets]).</span></span> <span data-ttu-id="6f87f-383">Além disso, há um limite inicial de 100 contas de armazenamento por assinatura do Azure (a partir de julho de 2015).</span><span class="sxs-lookup"><span data-stu-id="6f87f-383">In addition, there is an initial limit of 100 Storage Accounts per Azure subscription (as of July 2015).</span></span> <span data-ttu-id="6f87f-384">Portanto, é recomendável equilibrar o IOPS de VMs entre várias contas de armazenamento ao usar o Armazenamento Standard do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-384">Therefore, it is recommended to balance IOPS of VMs between multiple storage accounts when using Azure Standard Storage.</span></span> <span data-ttu-id="6f87f-385">Enquanto uma única VM idealmente usa uma conta de armazenamento se possível.</span><span class="sxs-lookup"><span data-stu-id="6f87f-385">Whereas a single VM ideally uses one storage account if possible.</span></span> <span data-ttu-id="6f87f-386">Então, se falamos sobre implantações de DBMS em que cada VHD que é hospedado no Armazenamento Standard do Azure pode atingir seu limite de cota, você deve implantar apenas 30 a 40 VHDs por Conta de Armazenamento do Azure que usa o Armazenamento Standard do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-386">So if we talk about DBMS deployments where each VHD that is hosted on Azure Standard Storage could reach its quota limit, you should only deploy 30-40 VHDs per Azure Storage Account that uses Azure Standard Storage.</span></span> <span data-ttu-id="6f87f-387">Por outro lado, se você utiliza o Armazenamento Premium do Azure e deseja armazenar grandes volumes de banco de dados, pode estar bem em termos de IOPS.</span><span class="sxs-lookup"><span data-stu-id="6f87f-387">On the other hand, if you leverage Azure Premium Storage and want to store large database volumes, you might be fine in terms of IOPS.</span></span> <span data-ttu-id="6f87f-388">Mas uma Conta de Armazenamento Premium do Azure é muito mais restritiva no volume de dados do que uma Conta de Armazenamento Standard do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-388">But an Azure Premium Storage Account is way more restrictive in data volume than an Azure Standard Storage Account.</span></span> <span data-ttu-id="6f87f-389">Como resultado, você pode implantar apenas um número limitado de VHDs em uma Conta de Armazenamento Premium do Azure antes de atingir o limite do volume de dados.</span><span class="sxs-lookup"><span data-stu-id="6f87f-389">As a result, you can only deploy a limited number of VHDs within an Azure Premium Storage Account before hitting the data volume limit.</span></span> <span data-ttu-id="6f87f-390">No fim, pense em uma Conta de Armazenamento do Azure como uma “SAN virtual” que tem funcionalidades limitadas no IOPS e/ou capacidade.</span><span class="sxs-lookup"><span data-stu-id="6f87f-390">At the end think of an Azure Storage Account as a “Virtual SAN” that has limited capabilities in IOPS and/or capacity.</span></span> <span data-ttu-id="6f87f-391">Como resultado, a tarefa permanece, como em implantações locais, para definir o layout dos VHDs dos diferentes sistemas SAP nos diferentes 'dispositivos SAN imaginários' ou Contas de Armazenamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-391">As a result, the task remains, as in on-premises deployments, to define the layout of the VHDs of the different SAP systems over the different ‘imaginary SAN devices’ or Azure Storage Accounts.</span></span>

<span data-ttu-id="6f87f-392">Para o Armazenamento Standard do Azure não é recomendável apresentar o armazenamento de diferentes contas de armazenamento para uma única VM, se possível.</span><span class="sxs-lookup"><span data-stu-id="6f87f-392">For Azure Standard Storage it is not recommended to present storage from different storage accounts to a single VM if possible.</span></span>

<span data-ttu-id="6f87f-393">Usando a série DS ou GS de VMs do Azure, é possível montar VHDs de Contas de Armazenamento Standard e Contas de Armazenamento Premium do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-393">Whereas using the DS or GS-series of Azure VMs it is possible to mount VHDs out of Azure Standard Storage Accounts and Premium Storage Accounts.</span></span> <span data-ttu-id="6f87f-394">Casos de uso como a gravação de backups em VHDs apoiados pelo Armazenamento Standard enquanto se tem dados DBMS e arquivos de log no Armazenamento Premium vêm à mente onde tal armazenamento heterogêneo poderia ser aproveitado.</span><span class="sxs-lookup"><span data-stu-id="6f87f-394">Use cases like writing backups into Standard Storage backed VHDs whereas having DBMS data and log files on Premium Storage come to mind where such heterogeneous storage could be leveraged.</span></span>

<span data-ttu-id="6f87f-395">Com base em implantações de clientes e testes, em torno de 30 a 40 VHDs contendo arquivos de dados do banco de dados e arquivos de log podem ser provisionados em uma única Conta de Armazenamento Standard do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-395">Based on customer deployments and testing around 30 to 40 VHDs containing database data files and log files can be provisioned on a single Azure Standard Storage Account with acceptable performance.</span></span> <span data-ttu-id="6f87f-396">Como mencionado anteriormente, a limitação de uma Conta de Armazenamento Premium do Azure provavelmente é a capacidade de dados que ela pode conter, não o IOPS.</span><span class="sxs-lookup"><span data-stu-id="6f87f-396">As mentioned earlier, the limitation of an Azure Premium Storage Account is likely to be the data capacity it can hold and not IOPS.</span></span>

<span data-ttu-id="6f87f-397">Como com dispositivos locais SAN, o compartilhamento requer algum monitoramento para, eventualmente, detectar afunilamentos em uma Conta de Armazenamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-397">As with SAN devices on-premises, sharing requires some monitoring in order to eventually detect bottlenecks on an Azure Storage Account.</span></span> <span data-ttu-id="6f87f-398">A extensão de monitoramento do Azure para SAP e o Portal do Azure são ferramentas que podem ser usadas para detectar Contas de Armazenamento do Azure ocupadas que podem estar fornecendo um desempenho de E/S abaixo do ideal.</span><span class="sxs-lookup"><span data-stu-id="6f87f-398">The Azure Monitoring Extension for SAP and the Azure Portal are tools that can be used to detect busy Azure Storage Accounts that may be delivering suboptimal IO performance.</span></span>  <span data-ttu-id="6f87f-399">Se essa situação for detectada, será recomendável mover as VMs ocupadas para outra Conta de Armazenamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-399">If this situation is detected it is recommended to move busy VMs to another Azure Storage Account.</span></span> <span data-ttu-id="6f87f-400">Veja o [Guia de Implantação][deployment-guide] para obter detalhes sobre como ativar as funcionalidades de monitoramento de host do SAP.</span><span class="sxs-lookup"><span data-stu-id="6f87f-400">Please refer to the [Deployment Guide][deployment-guide] for details on how to activate the SAP host monitoring capabilities.</span></span>

<span data-ttu-id="6f87f-401">Outro artigo que resume as práticas recomendadas em relação ao Armazenamento Standard e às Contas de Armazenamento Standard do Azure pode ser encontrado aqui <https://blogs.msdn.com/b/mast/archive/2014/10/14/configuring-azure-virtual-machines-for-optimal-storage-performance.aspx></span><span class="sxs-lookup"><span data-stu-id="6f87f-401">Another article summarizing best practices around Azure Standard Storage and Azure Standard Storage Accounts can be found here <https://blogs.msdn.com/b/mast/archive/2014/10/14/configuring-azure-virtual-machines-for-optimal-storage-performance.aspx></span></span>

#### <a name="moving-deployed-dbms-vms-from-azure-standard-storage-to-azure-premium-storage"></a><span data-ttu-id="6f87f-402">Movendo VMs DBMS implantadas do Armazenamento Standard do Azure para o Armazenamento Premium do Azure</span><span class="sxs-lookup"><span data-stu-id="6f87f-402">Moving deployed DBMS VMs from Azure Standard Storage to Azure Premium Storage</span></span>
<span data-ttu-id="6f87f-403">Podemos encontrar alguns cenários em que você como cliente deseja mover uma VM implantada do Armazenamento Standard do Azure para o Armazenamento Premium do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-403">We encounter quite some scenarios where you as customer want to move a deployed VM from Azure Standard Storage into Azure Premium Storage.</span></span> <span data-ttu-id="6f87f-404">Isso não é possível sem mover fisicamente os dados.</span><span class="sxs-lookup"><span data-stu-id="6f87f-404">This is not possible without physically moving the data.</span></span> <span data-ttu-id="6f87f-405">Há várias maneiras atingir o objetivo:</span><span class="sxs-lookup"><span data-stu-id="6f87f-405">There are several ways to achieve the goal:</span></span>

* <span data-ttu-id="6f87f-406">Você pode simplesmente copiar todos os VHDs, VHD base, bem como VHDs de dados em uma nova Conta de Armazenamento Premium do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-406">You could simply copy all VHDs, base VHD as well as data VHDs into a new Azure Premium Storage Account.</span></span> <span data-ttu-id="6f87f-407">Frequentemente você escolheu o número de VHDs no Armazenamento Standard do Azure não devido ao fato de que precisava do volume de dados.</span><span class="sxs-lookup"><span data-stu-id="6f87f-407">Very often you chose the number of VHDs in Azure Standard Storage not because of the fact that you needed the data volume.</span></span> <span data-ttu-id="6f87f-408">Mas precisava daquela quantidade de VHDs por causa do IOPS.</span><span class="sxs-lookup"><span data-stu-id="6f87f-408">But you needed that many VHDs because of the IOPS.</span></span> <span data-ttu-id="6f87f-409">Agora que mover para o Armazenamento Premium do Azure pode ir com muito menos VHDs para atingir a mesma taxa de transferência de IOPS.</span><span class="sxs-lookup"><span data-stu-id="6f87f-409">Now that you move to Azure Premium Storage you could go with way less VHDs to achieve the some IOPS throughput.</span></span> <span data-ttu-id="6f87f-410">Devido ao fato de que no Armazenamento Standard do Azure você paga pelos dados usados e não pelo tamanho do disco nominal, o número de VHDs realmente não importava em termos de custos.</span><span class="sxs-lookup"><span data-stu-id="6f87f-410">Given the fact that in Azure Standard Storage you pay for the used data and not the nominal disk size, the number of VHDs did not really matter in terms of costs.</span></span> <span data-ttu-id="6f87f-411">No entanto, com o Armazenamento Premium do Azure, você pagaria pelo tamanho do disco nominal.</span><span class="sxs-lookup"><span data-stu-id="6f87f-411">However, with Azure Premium Storage, you would pay for the nominal disk size.</span></span> <span data-ttu-id="6f87f-412">Portanto, a maioria dos clientes tenta manter o número de VHDs do Azure no Armazenamento Premium no número necessário para alcançar a taxa de transferência de IOPS necessária.</span><span class="sxs-lookup"><span data-stu-id="6f87f-412">Therefore, most of the customer try to keep the number of Azure VHDs in Premium Storage at the number needed to achieve the IOPS throughput necessary.</span></span> <span data-ttu-id="6f87f-413">Dessa forma, a maioria dos clientes decide contra a forma de uma cópia simples de 1:1.</span><span class="sxs-lookup"><span data-stu-id="6f87f-413">So, most customers decide against the way of a simple 1:1 copy.</span></span>
* <span data-ttu-id="6f87f-414">Se ainda não estiver montado, você montará um único VHD que pode conter um backup de banco de dados do seu banco de dados SAP.</span><span class="sxs-lookup"><span data-stu-id="6f87f-414">If not yet mounted, you mount a single VHD that can contain a database backup of your SAP database.</span></span> <span data-ttu-id="6f87f-415">Depois do backup, você desmonta todos os VHDs, incluindo o VHD que contém o backup e copia o VHD base e o VHD com o backup em uma Conta de Armazenamento Premium do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-415">After the backup, you unmount all VHDs including the VHD containing the backup and copy the base VHD and the VHD with the backup into an Azure Premium Storage account.</span></span> <span data-ttu-id="6f87f-416">Em seguida, você deve implantar a VM com base no VHD base e montar o VHD com o backup.</span><span class="sxs-lookup"><span data-stu-id="6f87f-416">You would then deploy the VM based on the base VHD and mount the VHD with the backup.</span></span> <span data-ttu-id="6f87f-417">Agora você cria discos de Armazenamento Premium vazios adicionais para a VM que são usados como o local da restauração do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="6f87f-417">Now you create additional empty Premium Storage Disks for the VM that are used to restore the database into.</span></span> <span data-ttu-id="6f87f-418">Isso pressupõe que o DBMS permite alterar os caminhos para os arquivos de log e de dados como parte do processo de restauração.</span><span class="sxs-lookup"><span data-stu-id="6f87f-418">This assumes that the DBMS allows you to change paths to the data and log files as part of the restore process.</span></span>
* <span data-ttu-id="6f87f-419">Outra possibilidade é uma variação do processo anterior, em que você simplesmente copia o VHD de backup no Armazenamento Premium do Azure e o anexa em uma VM que recentemente implantou e instalou.</span><span class="sxs-lookup"><span data-stu-id="6f87f-419">Another possibility is a variation of the former process, where you just copy the backup VHD into Azure Premium Storage and attach it against a VM that you newly deployed and installed.</span></span>
* <span data-ttu-id="6f87f-420">A quarta possibilidade você escolhe quando precisa alterar o número de arquivos de dados do seu banco de dados.</span><span class="sxs-lookup"><span data-stu-id="6f87f-420">The fourth possibility you would choose when you are in need to change the number of data files of your database.</span></span> <span data-ttu-id="6f87f-421">Nesse caso, você executa uma cópia do sistema homogêneo SAP usando a exportação/importação.</span><span class="sxs-lookup"><span data-stu-id="6f87f-421">In such a case you would perform a SAP homogenous system copy using export/import.</span></span> <span data-ttu-id="6f87f-422">Coloque os arquivos da exportação em um VHD que é copiado para uma Conta de Armazenamento Premium do Azure e anexe-o a uma VM usada para executar os processos de importação.</span><span class="sxs-lookup"><span data-stu-id="6f87f-422">Put those export files into a VHD that is copied into an Azure Premium Storage Account and attach it to a VM that you use to run the import processes.</span></span> <span data-ttu-id="6f87f-423">Os clientes usam essa possibilidade principalmente quando desejam diminuir o número de arquivos de dados.</span><span class="sxs-lookup"><span data-stu-id="6f87f-423">Customers use this possibility mainly when they want to decrease the number of data files.</span></span>

### <a name="deployment-of-vms-for-sap-in-azure"></a><span data-ttu-id="6f87f-424">Implantação de VMs para SAP no Azure</span><span class="sxs-lookup"><span data-stu-id="6f87f-424">Deployment of VMs for SAP in Azure</span></span>
<span data-ttu-id="6f87f-425">O Microsoft Azure oferece várias maneiras de implantar VMs e discos associados.</span><span class="sxs-lookup"><span data-stu-id="6f87f-425">Microsoft Azure offers multiple ways to deploy VMs and associated disks.</span></span> <span data-ttu-id="6f87f-426">Assim, é muito importante entender as diferenças, uma vez que as preparações das VMs podem ser diferentes dependendo da forma de implantação.</span><span class="sxs-lookup"><span data-stu-id="6f87f-426">Thereby it is very important to understand the differences since preparations of the VMs might differ dependent on the way of deployment.</span></span> <span data-ttu-id="6f87f-427">Em geral, analisamos os cenários descritos nos capítulos a seguir.</span><span class="sxs-lookup"><span data-stu-id="6f87f-427">In general, we look into the scenarios described in the following chapters.</span></span>

#### <a name="deploying-a-vm-from-the-azure-marketplace"></a><span data-ttu-id="6f87f-428">Implantando uma VM do Azure Marketplace</span><span class="sxs-lookup"><span data-stu-id="6f87f-428">Deploying a VM from the Azure Marketplace</span></span>
<span data-ttu-id="6f87f-429">Você gostaria de usar uma imagem fornecida pela Microsoft ou por terceiros no Azure Marketplace para implantar a VM.</span><span class="sxs-lookup"><span data-stu-id="6f87f-429">You like to take a Microsoft or 3rd party provided image from the Azure Marketplace to deploy your VM.</span></span> <span data-ttu-id="6f87f-430">Depois de implantar a VM no Azure, siga as mesmas diretrizes e ferramentas para instalar o software SAP na VM, como você faria em um ambiente local.</span><span class="sxs-lookup"><span data-stu-id="6f87f-430">After you deployed your VM in Azure, you follow the same guidelines and tools to install the SAP software inside your VM as you would do in an on-premises environment.</span></span> <span data-ttu-id="6f87f-431">Para instalar o software SAP na VM do Azure, a SAP e a Microsoft recomendam carregar e armazenar a mídia de instalação do SAP em VHDs do Azure ou criar uma VM do Azure funcionando como um "servidor de arquivos" que contém todas as mídias de instalação do SAP necessárias.</span><span class="sxs-lookup"><span data-stu-id="6f87f-431">For installing the SAP software inside the Azure VM, SAP and Microsoft recommend to upload and store the SAP installation media in Azure VHDs or to create an Azure VM working as a ‘File server’ which contains all the necessary SAP installation media.</span></span>

#### <a name="deploying-a-vm-with-a-customer-specific-generalized-image"></a><span data-ttu-id="6f87f-432">Implantando uma VM com uma imagem generalizada específica do cliente</span><span class="sxs-lookup"><span data-stu-id="6f87f-432">Deploying a VM with a customer specific generalized image</span></span>
<span data-ttu-id="6f87f-433">Devido a requisitos de patch específicos no que diz respeito à sua versão do SO ou DBMS, as imagens fornecidas no Azure Marketplace podem não atender às suas necessidades.</span><span class="sxs-lookup"><span data-stu-id="6f87f-433">Due to specific patch requirements in regards to your OS or DBMS version, the provided images in the Azure Marketplace might not fit your needs.</span></span> <span data-ttu-id="6f87f-434">Portanto, você precisará criar uma VM usando sua própria imagem “privada” de VM do SO/DBMS, que poderá ser implantada várias vezes posteriormente.</span><span class="sxs-lookup"><span data-stu-id="6f87f-434">Therefore, you might need to create a VM using your own ‘private’ OS/DBMS VM image which can be deployed several times afterwards.</span></span> <span data-ttu-id="6f87f-435">Para preparar essa imagem “privada” para duplicação, o SO deve ser generalizado na VM local.</span><span class="sxs-lookup"><span data-stu-id="6f87f-435">To prepare such a ‘private’ image for duplication, the OS must be generalized on the on-premises VM.</span></span> <span data-ttu-id="6f87f-436">Veja o [Guia de Implantação][deployment-guide] para obter detalhes sobre como generalizar uma VM.</span><span class="sxs-lookup"><span data-stu-id="6f87f-436">Please refer to the [Deployment Guide][deployment-guide] for details on how to generalize a VM.</span></span>

<span data-ttu-id="6f87f-437">Se já tiver instalado o conteúdo do SAP na VM local (especialmente para sistemas de duas camadas), você poderá adaptar as configurações do sistema SAP após a implantação da VM do Azure por meio do procedimento de renomeação da instância ao qual o Software Provisioning Manager SAP dá suporte (Nota do SAP [1619720]).</span><span class="sxs-lookup"><span data-stu-id="6f87f-437">If you have already installed SAP content in your on-premises VM (especially for 2-Tier systems), you can adapt the SAP system settings after the deployment of the Azure VM through the instance rename procedure supported by the SAP Software Provisioning Manager (SAP Note [1619720]).</span></span> <span data-ttu-id="6f87f-438">Caso contrário, você pode instalar o software SAP posteriormente, após a implantação da VM do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-438">Otherwise you can install the SAP software later after the deployment of the Azure VM.</span></span>

<span data-ttu-id="6f87f-439">Por meio do conteúdo do banco de dados usado pelo aplicativo SAP, você pode gerar o conteúdo recentemente por uma instalação do SAP ou pode importar seu conteúdo para o Azure usando um VHD com um backup de banco de dados DBMS ou aproveitando os recursos do DBMS para fazer o backup diretamente no Armazenamento do Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-439">As of the database content used by the SAP application, you can either generate the content freshly by an SAP installation or you can import your content into Azure by using a VHD with a DBMS database backup or by leveraging capabilities of the DBMS to directly backup into Microsoft Azure Storage.</span></span> <span data-ttu-id="6f87f-440">Nesse caso, você também pode preparar VHDs com os arquivos de log e de dados do DBMS locais e, em seguida, importá-los como discos no Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-440">In this case, you could also prepare VHDs with the DBMS data and log files on-premises and then import those as Disks into Azure.</span></span> <span data-ttu-id="6f87f-441">Mas a transferência de dados do DBMS que estão sendo carregados do local para o Azure funcionaria em discos VHD que precisam ser preparados de forma local.</span><span class="sxs-lookup"><span data-stu-id="6f87f-441">But the transfer of DBMS data which is getting loaded from on-premises to Azure would work over VHD disks that need to be prepared on-premises.</span></span>

#### <a name="moving-a-vm-from-on-premises-to-azure-with-a-non-generalized-disk"></a><span data-ttu-id="6f87f-442">Movendo uma VM do local para o Azure com um disco não generalizado</span><span class="sxs-lookup"><span data-stu-id="6f87f-442">Moving a VM from on-premises to Azure with a non-generalized disk</span></span>
<span data-ttu-id="6f87f-443">Você planeja mover um sistema SAP específico do local para o Azure (lift and shift).</span><span class="sxs-lookup"><span data-stu-id="6f87f-443">You plan to move a specific SAP system from on-premises to Azure (lift and shift).</span></span> <span data-ttu-id="6f87f-444">Isso pode ser feito carregando o VHD que contém o SO, os binários SAP e eventuais binários DBMS, mais os VHDs com os arquivos de log e de dados do DBMS para o Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-444">This can be done by uploading the VHD which contains the OS, the SAP binaries and eventual DBMS binaries plus the VHDs with the data and log files of the DBMS to Azure.</span></span> <span data-ttu-id="6f87f-445">Ao contrário do cenário nº 2 acima, você mantém o nome de host, a SID da SAP e as contas de usuário SAP na VM do Azure, já que elas foram configuradas no ambiente local.</span><span class="sxs-lookup"><span data-stu-id="6f87f-445">In opposite to scenario #2 above, you keep the hostname, SAP SID and SAP user accounts in the Azure VM as they were configured in the on-premises environment.</span></span> <span data-ttu-id="6f87f-446">Portanto, não é necessário generalizar a imagem.</span><span class="sxs-lookup"><span data-stu-id="6f87f-446">Therefore, generalizing the image is not necessary.</span></span> <span data-ttu-id="6f87f-447">Esse caso se aplicará principalmente para cenários entre instalações em que uma parte da estrutura da SAP é executada localmente e partes no Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-447">This case will mostly apply for Cross-Premises scenarios where a part of the SAP landscape is run on-premises and parts on Azure.</span></span>

## <span data-ttu-id="6f87f-448"><a name="871dfc27-e509-4222-9370-ab1de77021c3"></a>Alta disponibilidade e recuperação de desastre com VMs do Azure</span><span class="sxs-lookup"><span data-stu-id="6f87f-448"><a name="871dfc27-e509-4222-9370-ab1de77021c3"></a>High Availability and Disaster Recovery with Azure VMs</span></span>
<span data-ttu-id="6f87f-449">O Azure oferece as seguintes funcionalidades de HA (Alta Disponibilidade) e DR (Recuperação de Desastre) que se aplicam a diferentes componentes que usaríamos para implantações SAP e DBMS</span><span class="sxs-lookup"><span data-stu-id="6f87f-449">Azure offers the following High Availability (HA) and Disaster Recovery (DR) functionalities which apply to different components we would use for SAP and DBMS deployments</span></span>

### <a name="vms-deployed-on-azure-nodes"></a><span data-ttu-id="6f87f-450">VMs implantadas em nós do Azure</span><span class="sxs-lookup"><span data-stu-id="6f87f-450">VMs deployed on Azure Nodes</span></span>
<span data-ttu-id="6f87f-451">A plataforma Azure não oferece recursos como Migração ao Vivo para VMs implantadas.</span><span class="sxs-lookup"><span data-stu-id="6f87f-451">The Azure Platform does not offer features such as Live Migration for deployed VMs.</span></span> <span data-ttu-id="6f87f-452">Isso significa que se for necessária a manutenção em um cluster de servidores no qual uma VM está implantada, a VM precisará ser parada e reiniciada.</span><span class="sxs-lookup"><span data-stu-id="6f87f-452">This means if there is maintenance necessary on a server cluster on which a VM is deployed, the VM needs to get stopped and restarted.</span></span> <span data-ttu-id="6f87f-453">A manutenção no Azure é realizada usando os chamados domínios de atualização em clusters de servidores.</span><span class="sxs-lookup"><span data-stu-id="6f87f-453">Maintenance in Azure is performed using so called Upgrade Domains within clusters of servers.</span></span> <span data-ttu-id="6f87f-454">A manutenção é realizada em apenas um domínio de atualização de cada vez.</span><span class="sxs-lookup"><span data-stu-id="6f87f-454">Only one Upgrade Domain at a time is being maintained.</span></span> <span data-ttu-id="6f87f-455">Durante tal reinicialização haverá uma interrupção de serviço enquanto a VM for desligada, a manutenção realizada e a VM reiniciada.</span><span class="sxs-lookup"><span data-stu-id="6f87f-455">During such a restart there will be an interruption of service while the VM is shut down, maintenance is performed and VM restarted.</span></span> <span data-ttu-id="6f87f-456">No entanto, a maioria dos fornecedores de DBMS fornece a funcionalidade de alta disponibilidade e recuperação de desastre que reiniciará rapidamente os serviços DBMS em outro nó se o nó primário não estiver disponível.</span><span class="sxs-lookup"><span data-stu-id="6f87f-456">Most DBMS vendors however provide High Availability and Disaster Recovery functionality that will quickly restart the DBMS services on another node if the primary node is unavailable.</span></span> <span data-ttu-id="6f87f-457">A plataforma Azure oferece a funcionalidade para distribuir as VMs, armazenamento e outros serviços do Azure entre domínios de atualização para garantir que falhas de infraestrutura ou manutenção planejada afetarão apenas um pequeno subconjunto das VMs ou serviços.</span><span class="sxs-lookup"><span data-stu-id="6f87f-457">The Azure Platform offers functionality to distribute VMs, Storage and other Azure services across Upgrade Domains to ensure that planned maintenance or infrastructure failures would only impact a small subset of VMs or services.</span></span>  <span data-ttu-id="6f87f-458">Com um planejamento cuidadoso é possível alcançar níveis de disponibilidade comparáveis às infraestruturas locais.</span><span class="sxs-lookup"><span data-stu-id="6f87f-458">With careful planning it is possible to achieve availability levels comparable to on-premises infrastructures.</span></span>

<span data-ttu-id="6f87f-459">Os Conjuntos de Disponibilidade do Microsoft Azure são agrupamentos lógicos de VMs ou de serviços que garantem que as VMs e os outros serviços sejam distribuídos em diferentes Domínios de Falha e de Atualização em um cluster, de modo que haja apenas um desligamento de nó em um determinado momento (leia [este][virtual-machines-manage-availability] artigo para obter mais detalhes).</span><span class="sxs-lookup"><span data-stu-id="6f87f-459">Microsoft Azure Availability Sets are a logical grouping of VMs or Services that ensures VMs and other services are distributed to different Fault and Upgrade Domains within a cluster such that there would only be one node shutdown at any one point in time (read [this][virtual-machines-manage-availability] article for more details).</span></span>

<span data-ttu-id="6f87f-460">Eles precisam ser configurados por finalidade ao distribuir VMs, como visto aqui:</span><span class="sxs-lookup"><span data-stu-id="6f87f-460">It needs to be configured by purpose when rolling out VMs as seen here:</span></span>

![Definição de conjunto de disponibilidade para configurações de HA do DBMS][dbms-guide-figure-200]

<span data-ttu-id="6f87f-462">Se quisermos criar configurações de alta disponibilidade de implantações de DBMS (independentemente da funcionalidade de HA do DBMS utilizada), as VMs de DBMS precisarão:</span><span class="sxs-lookup"><span data-stu-id="6f87f-462">If we want to create highly available configurations of DBMS deployments (independent of the individual DBMS HA functionality used), the DBMS VMs would need to:</span></span>

* <span data-ttu-id="6f87f-463">Adicione as VMs à mesma Rede Virtual do Azure (<https://azure.microsoft.com/documentation/services/virtual-network/>)</span><span class="sxs-lookup"><span data-stu-id="6f87f-463">Add the VMs to the same Azure Virtual Network (<https://azure.microsoft.com/documentation/services/virtual-network/>)</span></span>
* <span data-ttu-id="6f87f-464">As VMs da configuração de HA também devem estar na mesma sub-rede.</span><span class="sxs-lookup"><span data-stu-id="6f87f-464">The VMs of the HA configuration should also be in the same subnet.</span></span> <span data-ttu-id="6f87f-465">A resolução de nomes entre as diferentes sub-redes não é possível em implantações somente em nuvem, apenas a resolução de IP funcionará.</span><span class="sxs-lookup"><span data-stu-id="6f87f-465">Name resolution between the different subnets is not possible in Cloud-Only deployments, only IP resolution will work.</span></span> <span data-ttu-id="6f87f-466">Usando a conectividade de ExpressRoute ou site a site para implantações entre instalações, uma rede com pelo menos uma sub-rede já estará estabelecida.</span><span class="sxs-lookup"><span data-stu-id="6f87f-466">Using site-to-site or ExpressRoute connectivity for Cross-Premises deployments, a network with at least one subnet will be already established.</span></span> <span data-ttu-id="6f87f-467">A resolução de nomes será feita de acordo com a infraestrutura de rede e políticas de AD locais.</span><span class="sxs-lookup"><span data-stu-id="6f87f-467">Name resolution will be done according to the on-premises AD policies and network infrastructure.</span></span>

<span data-ttu-id="6f87f-468">[comment]: <> (Teste TODO MSSedusch se ainda for verdadeiro no ARM)</span><span class="sxs-lookup"><span data-stu-id="6f87f-468">[comment]: <> (MSSedusch TODO Test if still true in ARM)</span></span>

#### <a name="ip-addresses"></a><span data-ttu-id="6f87f-469">Endereços IP</span><span class="sxs-lookup"><span data-stu-id="6f87f-469">IP Addresses</span></span>
<span data-ttu-id="6f87f-470">É altamente recomendável definir as VMs para configurações de HA de forma resiliente.</span><span class="sxs-lookup"><span data-stu-id="6f87f-470">It is highly recommended to setup the VMs for HA configurations in a resilient way.</span></span> <span data-ttu-id="6f87f-471">Confiar em endereços IP para endereçar os parceiros de HA na configuração de HA não é confiável no Azure a menos que sejam usados endereços IP estáticos.</span><span class="sxs-lookup"><span data-stu-id="6f87f-471">Relying on IP addresses to address the HA partner(s) within the HA configuration is not reliable in Azure unless static IP addresses are used.</span></span> <span data-ttu-id="6f87f-472">Há dois conceitos de "Desligamento" no Azure:</span><span class="sxs-lookup"><span data-stu-id="6f87f-472">There are two “Shutdown” concepts in Azure:</span></span>

* <span data-ttu-id="6f87f-473">Desligamento por meio do Portal do Azure ou do cmdlet Stop-AzureRmVM do Azure PowerShell: nesse caso a máquina virtual é desligada e desalocada.</span><span class="sxs-lookup"><span data-stu-id="6f87f-473">Shut down through Azure Portal or Azure PowerShell cmdlet Stop-AzureRmVM: In this case the Virtual Machine gets shutdown and de-allocated.</span></span> <span data-ttu-id="6f87f-474">Sua conta do Azure não será mais cobrada por essa VM, de forma que as únicas alterações que incorrerão serão referentes ao armazenamento usado.</span><span class="sxs-lookup"><span data-stu-id="6f87f-474">Your Azure account will no longer be charged for this VM so the only charges that will incur are for the storage used.</span></span> <span data-ttu-id="6f87f-475">No entanto, se o endereço IP privado da interface da rede não for estático, o endereço IP será liberado e não haverá garantia de que a interface de rede obterá o endereço IP antigo atribuído novamente após a reinicialização da VM.</span><span class="sxs-lookup"><span data-stu-id="6f87f-475">However, if the private IP address of the network interface was not static, the IP address is released and it is not guaranteed that the network interface gets the old IP address assigned again after a restart of the VM.</span></span> <span data-ttu-id="6f87f-476">Realizar o desligamento por meio do Portal do Azure ou chamar Stop-AzureRmVM automaticamente causará a desalocação.</span><span class="sxs-lookup"><span data-stu-id="6f87f-476">Performing the shut down through the Azure Portal or by calling Stop-AzureRmVM will automatically cause de-allocation.</span></span> <span data-ttu-id="6f87f-477">Se você não quiser desalocar a máquina virtual, use Stop-AzureRmVM -StayProvisioned</span><span class="sxs-lookup"><span data-stu-id="6f87f-477">If you do not want to deallocat the machine use Stop-AzureRmVM -StayProvisioned</span></span>
* <span data-ttu-id="6f87f-478">Se você desligar a VM de um nível de SO, a VM será desligada e NÃO desalocada.</span><span class="sxs-lookup"><span data-stu-id="6f87f-478">If you shut down the VM from an OS level, the VM gets shut down and NOT de-allocated.</span></span> <span data-ttu-id="6f87f-479">No entanto, nesse caso, sua conta do Azure ainda será cobrada pela VM, apesar do fato de ela estar desligada.</span><span class="sxs-lookup"><span data-stu-id="6f87f-479">However, in this case, your Azure account will still be charged for the VM, despite the fact that it is shutdown.</span></span> <span data-ttu-id="6f87f-480">Nesse caso, a atribuição do endereço IP para uma VM parada permanecerá intacta.</span><span class="sxs-lookup"><span data-stu-id="6f87f-480">In such a case, the assignment of the IP address to a stopped VM will remain intact.</span></span> <span data-ttu-id="6f87f-481">Desligar a VM de dentro não forçará a desalocação automaticamente.</span><span class="sxs-lookup"><span data-stu-id="6f87f-481">Shutting down the VM from within will not automatically force de-allocation.</span></span>

<span data-ttu-id="6f87f-482">Mesmo para cenários entre instalações, por padrão um desligamento e desalocação significarão a desatribuição dos endereços IP da VM, mesmo se as políticas locais no DHCP forem diferentes.</span><span class="sxs-lookup"><span data-stu-id="6f87f-482">Even for Cross-Premises scenarios, by default a shutdown and de-allocation will mean de-assignment of the IP addresses from the VM, even if on-premises policies in DHCP settings are different.</span></span>

* <span data-ttu-id="6f87f-483">Uma exceção é quando ocorre a atribuição de um endereço IP estático a um adaptador de rede, conforme descrito [aqui][virtual-networks-reserved-private-ip].</span><span class="sxs-lookup"><span data-stu-id="6f87f-483">The exception is if one assigns a static IP address to a network interface as described [here][virtual-networks-reserved-private-ip].</span></span>
* <span data-ttu-id="6f87f-484">Nesse caso o endereço IP permanece fixo contanto que a interface de rede não seja excluída.</span><span class="sxs-lookup"><span data-stu-id="6f87f-484">In such a case the IP address remains fixed as long as the network interface is not deleted.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="6f87f-485">Para manter toda a implantação simples e gerenciável, a recomendação clara é configurar a parceria de VMs em uma configuração de HA ou DR de DBMS no Azure de uma maneira que haja uma resolução de nome funcionando entre as diferentes VMs envolvidas.</span><span class="sxs-lookup"><span data-stu-id="6f87f-485">In order to keep the whole deployment simple and manageable, the clear recommendation is to setup the VMs partnering in a DBMS HA or DR configuration within Azure in a way that there is a functioning name resolution between the different VMs involved.</span></span>
>
>

## <a name="deployment-of-host-monitoring"></a><span data-ttu-id="6f87f-486">Implantação do monitoramento de host</span><span class="sxs-lookup"><span data-stu-id="6f87f-486">Deployment of Host Monitoring</span></span>
<span data-ttu-id="6f87f-487">Para o uso produtivo de aplicativos SAP nas máquinas virtuais do Azure, o SAP requer a capacidade de obter dados de monitoramento dos hosts físicos executando as máquinas virtuais do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-487">For productive usage of SAP Applications in Azure Virtual Machines, SAP requires the ability to get host monitoring data from the physical hosts running the Azure Virtual Machines.</span></span> <span data-ttu-id="6f87f-488">Será necessário um nível de patch do HostAgent do SAP específico que habilita essa funcionalidade no SAPOSCOL e no HostAgent do SAP.</span><span class="sxs-lookup"><span data-stu-id="6f87f-488">A specific SAP HostAgent patch level will be required that enables this capability in SAPOSCOL and SAP HostAgent.</span></span> <span data-ttu-id="6f87f-489">O nível de patch exato está documentado na Nota SAP [1409604].</span><span class="sxs-lookup"><span data-stu-id="6f87f-489">The exact patch level is documented in SAP Note [1409604].</span></span>

<span data-ttu-id="6f87f-490">Para obter detalhes sobre a implantação de componentes que fornecem dados de host ao SAPOSCOL e ao SAPHostAgent, bem como sobre o gerenciamento de ciclo de vida desses componentes, veja o [Guia de Implantação][deployment-guide]</span><span class="sxs-lookup"><span data-stu-id="6f87f-490">For the details regarding deployment of components that deliver host data to SAPOSCOL and SAPHostAgent and the lifecycle management of those components, please refer to the [Deployment Guide][deployment-guide]</span></span>

## <span data-ttu-id="6f87f-491"><a name="3264829e-075e-4d25-966e-a49dad878737"></a>Informações específicas para o Microsoft SQL Server</span><span class="sxs-lookup"><span data-stu-id="6f87f-491"><a name="3264829e-075e-4d25-966e-a49dad878737"></a>Specifics to Microsoft SQL Server</span></span>
### <a name="sql-server-iaas"></a><span data-ttu-id="6f87f-492">IaaS do SQL Server</span><span class="sxs-lookup"><span data-stu-id="6f87f-492">SQL Server IaaS</span></span>
<span data-ttu-id="6f87f-493">Começando com o Microsoft Azure, você pode facilmente migrar seus aplicativos existentes do SQL Server criados na plataforma Windows Server para máquinas virtuais do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-493">Starting with Microsoft Azure, you can easily migrate your existing SQL Server applications built on Windows Server platform to Azure Virtual Machines.</span></span> <span data-ttu-id="6f87f-494">O SQL Server em uma máquina Virtual permite reduzir o custo total de propriedade de implantação, gerenciamento e manutenção de aplicativos de amplitude empresarial migrando facilmente esses aplicativos para o Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-494">SQL Server in a Virtual Machine enables you to reduce the total cost of ownership of deployment, management and maintenance of enterprise breadth applications by easily migrating these applications to Microsoft Azure.</span></span> <span data-ttu-id="6f87f-495">Com o SQL Server em uma máquina virtual do Azure, os administradores e desenvolvedores ainda podem usar as mesmas ferramentas de desenvolvimento e administração que estão disponíveis localmente.</span><span class="sxs-lookup"><span data-stu-id="6f87f-495">With SQL Server in an Azure Virtual Machine, administrators and developers can still use the same development and administration tools that are available on-premises.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="6f87f-496">Observe que não estamos discutindo o Banco de Dados SQL do Microsoft Azure, que é uma oferta de Plataforma como Serviço da plataforma Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-496">Please note we are not discussing Microsoft Azure SQL Database which is a Platform as a Service offer of the Microsoft Azure Platform.</span></span> <span data-ttu-id="6f87f-497">A discussão neste artigo é sobre a execução do produto SQL Server como é conhecido para implantações locais nas máquinas virtuais do Azure, aproveitando a funcionalidade de Infraestrutura como Serviço do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-497">The discussion in this paper is about running the SQL Server product as it is known for on-premises deployments in Azure Virtual Machines, leveraging the Infrastructure as a Service capability of Azure.</span></span> <span data-ttu-id="6f87f-498">As funcionalidades e recursos do banco de dados entre essas duas ofertas são muito diferentes e não devem ser misturados entre si.</span><span class="sxs-lookup"><span data-stu-id="6f87f-498">Database capabilities and functionalities between these two offers are different and should not be mixed up with each other.</span></span> <span data-ttu-id="6f87f-499">Confira também: <https://azure.microsoft.com/services/sql-database/></span><span class="sxs-lookup"><span data-stu-id="6f87f-499">See also: <https://azure.microsoft.com/services/sql-database/></span></span>
>
>

<span data-ttu-id="6f87f-500">É altamente recomendável examinar [esta][virtual-machines-sql-server-infrastructure-services] documentação antes de continuar.</span><span class="sxs-lookup"><span data-stu-id="6f87f-500">It is strongly recommended to review [this][virtual-machines-sql-server-infrastructure-services] documentation before continuing.</span></span>

<span data-ttu-id="6f87f-501">Nas seções a seguir, trechos de partes da documentação no link acima serão agregados e mencionados.</span><span class="sxs-lookup"><span data-stu-id="6f87f-501">In the following sections pieces of parts of the documentation under the link above will be aggregated and mentioned.</span></span> <span data-ttu-id="6f87f-502">Informações especificas do SAP também são mencionadas e alguns conceitos são descritos mais detalhadamente.</span><span class="sxs-lookup"><span data-stu-id="6f87f-502">Specifics around SAP are mentioned as well and some concepts are described in more detail.</span></span> <span data-ttu-id="6f87f-503">No entanto, é altamente recomendável percorrer a documentação acima primeiro antes de ler a documentação específica do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="6f87f-503">However, it is highly recommended to work through the documentation above first before reading the SQL Server specific documentation.</span></span>

<span data-ttu-id="6f87f-504">Há algumas informações específicas do SQL Server no IaaS que você deve conhecer antes de continuar:</span><span class="sxs-lookup"><span data-stu-id="6f87f-504">There is some SQL Server in IaaS specific information you should know before continuing:</span></span>

* <span data-ttu-id="6f87f-505">**SLA da máquina virtual**: há um SLA para máquinas virtuais em execução no Azure que pode ser encontrado aqui: <https://azure.microsoft.com/support/legal/sla/></span><span class="sxs-lookup"><span data-stu-id="6f87f-505">**Virtual Machine SLA**: There is an SLA for Virtual Machines running in Azure which can be found here: <https://azure.microsoft.com/support/legal/sla/></span></span>  
* <span data-ttu-id="6f87f-506">**Suporte de versão do SQL**: para clientes SAP, damos suporte para SQL Server 2008 R2 e superior na máquina virtual do Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-506">**SQL Version Support**: For SAP customers, we support SQL Server 2008 R2 and higher on Microsoft Azure Virtual Machine.</span></span> <span data-ttu-id="6f87f-507">Não há suporte para edições anteriores.</span><span class="sxs-lookup"><span data-stu-id="6f87f-507">Earlier editions are not supported.</span></span> <span data-ttu-id="6f87f-508">Examine esta [Instrução de suporte](https://support.microsoft.com/kb/956893) geral para obter mais detalhes.</span><span class="sxs-lookup"><span data-stu-id="6f87f-508">Review this general [Support Statement](https://support.microsoft.com/kb/956893) for more details.</span></span> <span data-ttu-id="6f87f-509">Observe que em geral o SQL Server 2008 também tem suporte pela Microsoft.</span><span class="sxs-lookup"><span data-stu-id="6f87f-509">Please note that in general SQL Server 2008 is supported by Microsoft as well.</span></span> <span data-ttu-id="6f87f-510">No entanto, devido à funcionalidade significativa para SAP que foi introduzida com o SQL Server 2008 R2, o SQL Server 2008 R2 é a versão mínima para SAP.</span><span class="sxs-lookup"><span data-stu-id="6f87f-510">However due to significant functionality for SAP which was introduced with SQL Server 2008 R2, SQL Server 2008 R2 is the minimum release for SAP.</span></span> <span data-ttu-id="6f87f-511">Tenha em mente que o SQL Server 2012 e 2014 foram estendidos com uma maior integração com o cenário de IaaS (como a realização do backup diretamente no Armazenamento do Azure).</span><span class="sxs-lookup"><span data-stu-id="6f87f-511">Keep in mind that SQL Server 2012 and 2014 got extended with deeper integration into the IaaS scenario (like backing up directly against Azure Storage).</span></span> <span data-ttu-id="6f87f-512">Portanto, nós restringimos este documento para SQL Server 2012 e 2014 com seu nível de patch mais recente para o Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-512">Therefore, we restrict this paper to SQL Server 2012 and 2014 with its latest patch level for Azure.</span></span>
* <span data-ttu-id="6f87f-513">**Suporte ao recurso de SQL**: a maioria dos recursos do SQL Server tem suporte em Máquinas Virtuais do Microsoft Azure com algumas exceções.</span><span class="sxs-lookup"><span data-stu-id="6f87f-513">**SQL Feature Support**: Most SQL Server features are supported on Microsoft Azure Virtual Machines with some exceptions.</span></span> <span data-ttu-id="6f87f-514">**Não há suporte para o clustering de failover do SQL Server usando discos compartilhados**.</span><span class="sxs-lookup"><span data-stu-id="6f87f-514">**SQL Server Failover Clustering using Shared Disks is not supported**.</span></span>  <span data-ttu-id="6f87f-515">Tecnologias distribuídas, como o espelhamento de banco de dados, grupos de disponibilidade AlwaysOn, replicação, envio de logs e Service Broker, têm suporte dentro de uma única região do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-515">Distributed technologies like Database Mirroring, AlwaysOn Availability Groups, Replication, Log Shipping and Service Broker are supported within a single Azure Region.</span></span> <span data-ttu-id="6f87f-516">O AlwaysOn do SQL Server também tem suporte entre diferentes regiões do Azure, conforme documentado aqui: <https://blogs.technet.com/b/dataplatforminsider/archive/2014/06/19/sql-server-alwayson-availability-groups-supported-between-microsoft-azure-regions.aspx>.</span><span class="sxs-lookup"><span data-stu-id="6f87f-516">SQL Server AlwaysOn also is supported between different Azure Regions as documented here:  <https://blogs.technet.com/b/dataplatforminsider/archive/2014/06/19/sql-server-alwayson-availability-groups-supported-between-microsoft-azure-regions.aspx>.</span></span>  <span data-ttu-id="6f87f-517">Examine esta [Instrução de suporte](https://support.microsoft.com/kb/956893) para obter mais detalhes.</span><span class="sxs-lookup"><span data-stu-id="6f87f-517">Review the [Support Statement](https://support.microsoft.com/kb/956893) for more details.</span></span> <span data-ttu-id="6f87f-518">Um exemplo de como implantar uma configuração AlwaysOn é mostrado [neste][virtual-machines-workload-template-sql-alwayson] artigo.</span><span class="sxs-lookup"><span data-stu-id="6f87f-518">An example on how to deploy an AlwaysOn configuration is shown in [this][virtual-machines-workload-template-sql-alwayson] article.</span></span> <span data-ttu-id="6f87f-519">Além disso, confira as práticas recomendadas documentadas [aqui][virtual-machines-sql-server-infrastructure-services]</span><span class="sxs-lookup"><span data-stu-id="6f87f-519">Also, check out the Best Practices documented [here][virtual-machines-sql-server-infrastructure-services]</span></span>
* <span data-ttu-id="6f87f-520">**Desempenho do SQL**: temos certeza de que as máquinas virtuais hospedadas do Microsoft Azure terão um ótimo desempenho em comparação com outras ofertas de virtualização de nuvem pública, mas os resultados individuais podem variar.</span><span class="sxs-lookup"><span data-stu-id="6f87f-520">**SQL Performance**: We are confident that Microsoft Azure hosted Virtual Machines will perform very well in comparison to other public cloud virtualization offerings, but individual results may vary.</span></span> <span data-ttu-id="6f87f-521">Confira [este][virtual-machines-sql-server-performance-best-practices] artigo.</span><span class="sxs-lookup"><span data-stu-id="6f87f-521">Check out [this][virtual-machines-sql-server-performance-best-practices] article.</span></span>
* <span data-ttu-id="6f87f-522">**Uso de imagens do Azure Marketplace**: a maneira mais rápida de implantar uma nova VM do Microsoft Azure é usar uma imagem do Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="6f87f-522">**Using Images from Azure Marketplace**: The fastest way to deploy a new Microsoft Azure VM is to use an image from the Azure Marketplace.</span></span> <span data-ttu-id="6f87f-523">Há imagens no Azure Marketplace que contêm o SQL Server.</span><span class="sxs-lookup"><span data-stu-id="6f87f-523">There are images in the Azure Marketplace which contain SQL Server.</span></span> <span data-ttu-id="6f87f-524">As imagens em que o SQL Server já está instalado não podem ser usadas imediatamente para aplicativos SAP NetWeaver.</span><span class="sxs-lookup"><span data-stu-id="6f87f-524">The images where SQL Server already is installed can’t be immediately used for SAP NetWeaver applications.</span></span> <span data-ttu-id="6f87f-525">O motivo é que o agrupamento do SQL Server padrão é instalado dentro dessas imagens e não o agrupamento exigido pelos sistemas SAP NetWeaver.</span><span class="sxs-lookup"><span data-stu-id="6f87f-525">The reason is the default SQL Server collation is installed within those images and not the collation required by SAP NetWeaver systems.</span></span> <span data-ttu-id="6f87f-526">Para usar essas imagens, verifique as etapas documentadas no capítulo [Usando imagens do SQL Server fora do Microsoft Azure Marketplace][dbms-guide-5.6].</span><span class="sxs-lookup"><span data-stu-id="6f87f-526">In order to use such images, please check the steps documented in chapter [Using a SQL Server images out of the Microsoft Azure Marketplace][dbms-guide-5.6].</span></span>
* <span data-ttu-id="6f87f-527">Consulte os [Detalhes de preço](https://azure.microsoft.com/pricing/) para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="6f87f-527">Check out [Pricing Details](https://azure.microsoft.com/pricing/) for more information.</span></span> <span data-ttu-id="6f87f-528">O [Guia de licenciamento do SQL Server 2012](https://download.microsoft.com/download/7/3/C/73CAD4E0-D0B5-4BE5-AB49-D5B886A5AE00/SQL_Server_2012_Licensing_Reference_Guide.pdf) e o [Guia de licenciamento do SQL Server 2014](https://download.microsoft.com/download/B/4/E/B4E604D9-9D38-4BBA-A927-56E4C872E41C/SQL_Server_2014_Licensing_Guide.pdf) também são recursos importantes.</span><span class="sxs-lookup"><span data-stu-id="6f87f-528">The [SQL Server 2012 Licensing Guide](https://download.microsoft.com/download/7/3/C/73CAD4E0-D0B5-4BE5-AB49-D5B886A5AE00/SQL_Server_2012_Licensing_Reference_Guide.pdf) and [SQL Server 2014 Licensing Guide](https://download.microsoft.com/download/B/4/E/B4E604D9-9D38-4BBA-A927-56E4C872E41C/SQL_Server_2014_Licensing_Guide.pdf) are also an important resource.</span></span>

### <a name="sql-server-configuration-guidelines-for-sap-related-sql-server-installations-in-azure-vms"></a><span data-ttu-id="6f87f-529">Diretrizes de configuração do SQL Server para instalações do SQL Server relacionadas ao SAP em VMs do Azure</span><span class="sxs-lookup"><span data-stu-id="6f87f-529">SQL Server configuration guidelines for SAP related SQL Server installations in Azure VMs</span></span>
#### <a name="recommendations-on-vmvhd-structure-for-sap-related-sql-server-deployments"></a><span data-ttu-id="6f87f-530">Recomendações sobre a estrutura de VM/VHD para implantações do SQL Server relacionadas ao SAP</span><span class="sxs-lookup"><span data-stu-id="6f87f-530">Recommendations on VM/VHD structure for SAP related SQL Server deployments</span></span>
<span data-ttu-id="6f87f-531">De acordo com a descrição geral, os executáveis do SQL Server devem ser localizados ou instalados na unidade de sistema do VHD base da VM (unidade C:\).</span><span class="sxs-lookup"><span data-stu-id="6f87f-531">In accordance with the general description, SQL Server executables should be located or installed into the system drive of the VM’s base VHD (drive C:\).</span></span>  <span data-ttu-id="6f87f-532">Normalmente, a maioria dos bancos de dados de sistema do SQL Server não é utilizada em um alto nível pela carga de trabalho do SAP NetWeaver.</span><span class="sxs-lookup"><span data-stu-id="6f87f-532">Typically, most of the SQL Server system databases are not utilized at a high level by SAP NetWeaver workload.</span></span> <span data-ttu-id="6f87f-533">Portanto, os bancos de dados de sistema do SQL Server (mestre, msdb e modelo) podem permanecer na unidade C:\ também.</span><span class="sxs-lookup"><span data-stu-id="6f87f-533">Hence the system databases of SQL Server (master, msdb, and model) can remain on the C:\ drive as well.</span></span> <span data-ttu-id="6f87f-534">Uma exceção poderia ser o tempdb, que, no caso de algumas cargas de trabalho do SAP ERP e todas do BW, pode exigir um volume de dados ou um volume de operações de E/S maior que não cabe na VM original.</span><span class="sxs-lookup"><span data-stu-id="6f87f-534">An exception could be tempdb, which in the case of some SAP ERP and all BW workloads, might require either higher data volume or I/O operations volume which can’t fit into the original VM.</span></span> <span data-ttu-id="6f87f-535">Para esses sistemas, as etapas a seguir devem ser executadas:</span><span class="sxs-lookup"><span data-stu-id="6f87f-535">For such systems, the following steps should be performed:</span></span>

* <span data-ttu-id="6f87f-536">Mova os arquivos de dados de tempdb principais para a mesma unidade lógica que os arquivos de dados primário do banco de dados SAP.</span><span class="sxs-lookup"><span data-stu-id="6f87f-536">Move the primary tempdb data file(s) to the same logical drive as the primary data file(s) of the SAP database.</span></span>
* <span data-ttu-id="6f87f-537">Adicione os arquivos de dados de tempdb adicionais a cada uma das outras unidades lógicas que contém um arquivo de dados do banco de dados de usuário SAP.</span><span class="sxs-lookup"><span data-stu-id="6f87f-537">Add any additional tempdb data files to each of the other logical drives containing a data file of the SAP user database.</span></span>
* <span data-ttu-id="6f87f-538">Adicione o arquivo de log do tempdb à unidade lógica que contém o arquivo de log do banco de dados de usuário.</span><span class="sxs-lookup"><span data-stu-id="6f87f-538">Add the tempdb logfile to the logical drive which contains the user database’s log file.</span></span>
* <span data-ttu-id="6f87f-539">**Exclusivamente para tipos de VM que usam SSDs locais** no nó de computação, os arquivos de log e de dados de tempdb devem ser colocados na unidade D:\.</span><span class="sxs-lookup"><span data-stu-id="6f87f-539">**Exclusively for VM types that use local SSDs** on the compute node tempdb data and log files might be placed on the D:\ drive.</span></span> <span data-ttu-id="6f87f-540">No entanto, pode ser recomendável usar vários arquivos de dados de tempdb.</span><span class="sxs-lookup"><span data-stu-id="6f87f-540">Nevertheless, it might be recommended to use multiple tempdb data files.</span></span> <span data-ttu-id="6f87f-541">Esteja ciente de que os volumes da unidade D:\ são diferentes com base no tipo de VM.</span><span class="sxs-lookup"><span data-stu-id="6f87f-541">Be aware D:\ drive volumes are different based on the VM type.</span></span>

<span data-ttu-id="6f87f-542">Essas configurações permitem que o tempdb consuma mais espaço do que a unidade do sistema é capaz de fornecer.</span><span class="sxs-lookup"><span data-stu-id="6f87f-542">These configurations enable tempdb to consume more space than the system drive is able to provide.</span></span> <span data-ttu-id="6f87f-543">Para determinar o tamanho adequado de tempdb, é possível verificar os tamanhos de tempdb nos sistemas existentes que são executados localmente.</span><span class="sxs-lookup"><span data-stu-id="6f87f-543">In order to determine the proper tempdb size, one can check the tempdb sizes on existing systems which run on-premises.</span></span> <span data-ttu-id="6f87f-544">Além disso, tal configuração habilitaria números de IOPS em relação ao tempdb que não poderiam ser fornecidos com a unidade do sistema.</span><span class="sxs-lookup"><span data-stu-id="6f87f-544">In addition, such a configuration would enable IOPS numbers against tempdb which cannot be provided with the system drive.</span></span> <span data-ttu-id="6f87f-545">Novamente, os sistemas que estão em execução local podem ser usados para monitorar a carga de trabalho de E/S em relação ao tempdb para que você possa obter os números de IOPS que espera ver no tempdb.</span><span class="sxs-lookup"><span data-stu-id="6f87f-545">Again, systems that are running on-premises can be used to monitor I/O workload against tempdb so that you can derive the IOPS numbers you expect to see on your tempdb.</span></span>

<span data-ttu-id="6f87f-546">Uma configuração de VM que executa o SQL Server com um banco de dados SAP e em que os arquivos de log e dados do tempdb são colocados na unidade D:\ teria a seguinte aparência:</span><span class="sxs-lookup"><span data-stu-id="6f87f-546">A VM configuration which runs SQL Server with a SAP database and where tempdb data and tempdb logfile are placed on the D:\ drive would look like:</span></span>

![Configuração de referência da VM IaaS do Azure para SAP][dbms-guide-figure-300]

<span data-ttu-id="6f87f-548">Lembre-se de que a unidade D:\ tem diferentes tamanhos dependendo do tipo de VM.</span><span class="sxs-lookup"><span data-stu-id="6f87f-548">Be aware that the D:\ drive has different sizes dependent on the VM type.</span></span> <span data-ttu-id="6f87f-549">Dependendo do requisito de tamanho de tempdb você pode ser forçado a parear os arquivos de log e de dados de tempdb com os arquivos de log e de dados do banco de dados SAP em casos em que a unidade D:\ é muito pequena.</span><span class="sxs-lookup"><span data-stu-id="6f87f-549">Dependent on the size requirement of tempdb you might be forced to pair tempdb data and log files with the SAP database data and log files in cases where D:\ drive is too small.</span></span>

#### <a name="formatting-the-vhds"></a><span data-ttu-id="6f87f-550">Formatando os VHDs</span><span class="sxs-lookup"><span data-stu-id="6f87f-550">Formatting the VHDs</span></span>
<span data-ttu-id="6f87f-551">Para o SQL Server, o tamanho do bloco NTFS para VHDs contendo arquivos de log e de dados do SQL Server deve ser de 64 K.</span><span class="sxs-lookup"><span data-stu-id="6f87f-551">For SQL Server the NTFS block size for VHDs containing SQL Server data and log files should be 64K.</span></span> <span data-ttu-id="6f87f-552">Não é necessário formatar a unidade D:\.</span><span class="sxs-lookup"><span data-stu-id="6f87f-552">There is no need to format the D:\ drive.</span></span> <span data-ttu-id="6f87f-553">Essa unidade vem pré-formatada.</span><span class="sxs-lookup"><span data-stu-id="6f87f-553">This drive comes pre-formatted.</span></span>

<span data-ttu-id="6f87f-554">Para se certificar de que a restauração ou a criação de bancos de dados não está inicializando os arquivos de dados zerando o conteúdo dos arquivos, é necessário se assegurar de que o contexto de usuário em que o serviço do SQL Server está em execução tem uma determinada permissão.</span><span class="sxs-lookup"><span data-stu-id="6f87f-554">In order to make sure that the restore or creation of databases is not initializing the data files by zeroing the content of the files, one should make sure that the user context the SQL Server service is running in has a certain permission.</span></span> <span data-ttu-id="6f87f-555">Normalmente, os usuários do grupo Administrador do Windows têm essas permissões.</span><span class="sxs-lookup"><span data-stu-id="6f87f-555">Usually users in the Windows Administrator group have these permissions.</span></span> <span data-ttu-id="6f87f-556">Se o serviço do SQL Server for executado no contexto do usuário que não é Administrador do Windows, você precisará atribuir ao usuário o direito 'Executar tarefas de manutenção de volume'.</span><span class="sxs-lookup"><span data-stu-id="6f87f-556">If the SQL Server service is run in the user context of non-Windows Administrator user, you need to assign that user the User Right ‘Perform volume maintenance tasks’.</span></span>  <span data-ttu-id="6f87f-557">Confira os detalhes neste artigo da Base de Dados de Conhecimento Microsoft: <https://support.microsoft.com/kb/2574695></span><span class="sxs-lookup"><span data-stu-id="6f87f-557">See the details in this Microsoft Knowledge Base Article: <https://support.microsoft.com/kb/2574695></span></span>

#### <a name="impact-of-database-compression"></a><span data-ttu-id="6f87f-558">Impacto da compactação do banco de dados</span><span class="sxs-lookup"><span data-stu-id="6f87f-558">Impact of database compression</span></span>
<span data-ttu-id="6f87f-559">Em configurações em que a largura de banda de E/S pode se tornar um fator limitante, todas as medidas que reduzem o IOPS podem ajudar a ampliar a carga de trabalho que pode ser executada em um cenário de IaaS como o Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-559">In configurations where I/O bandwidth can become a limiting factor, every measure which reduces IOPS might help to stretch the workload one can run in an IaaS scenario like Azure.</span></span> <span data-ttu-id="6f87f-560">Portanto, caso ainda não tenha feito isso, aplicar a compactação de PÁGINA do SQL Server é altamente recomendável pela SAP e Microsoft antes de carregar os bancos de dados SAP existentes para o Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-560">Therefore, if not yet done, applying SQL Server PAGE compression is strongly recommended by both SAP and Microsoft before uploading an existing SAP databases to Azure.</span></span>

<span data-ttu-id="6f87f-561">A recomendação para executar a compactação do banco de dados antes de carregar no Azure é fornecida por duas razões:</span><span class="sxs-lookup"><span data-stu-id="6f87f-561">The recommendation to perform Database Compression before uploading to Azure is given out of two reasons:</span></span>

* <span data-ttu-id="6f87f-562">A quantidade de dados a ser carregada é menor.</span><span class="sxs-lookup"><span data-stu-id="6f87f-562">The amount of data to be uploaded is lower.</span></span>
* <span data-ttu-id="6f87f-563">A duração da execução de compactação é menor, presumindo-se que seja possível usar um hardware mais poderoso com mais CPUs ou maior largura de banda de E/S ou menor latência de E/S local.</span><span class="sxs-lookup"><span data-stu-id="6f87f-563">The duration of the compression execution is shorter assuming that one can use stronger hardware with more CPUs or higher I/O bandwidth or less I/O latency on-premises.</span></span>
* <span data-ttu-id="6f87f-564">Tamanhos menores de banco de dados podem levar a menos custos de alocação de disco</span><span class="sxs-lookup"><span data-stu-id="6f87f-564">Smaller database sizes might lead to less costs for disk allocation</span></span>

<span data-ttu-id="6f87f-565">A compactação de banco de dados funciona bem nas máquinas virtuais do Azure como o faz localmente.</span><span class="sxs-lookup"><span data-stu-id="6f87f-565">Database compression works as well in an Azure Virtual Machines as it does on-premises.</span></span> <span data-ttu-id="6f87f-566">Para obter mais detalhes sobre como compactar um banco de dados SQL Server para SAP existente, acesse: <https://blogs.msdn.com/b/saponsqlserver/archive/2010/10/08/compressing-an-sap-database-using-report-msscompress.aspx></span><span class="sxs-lookup"><span data-stu-id="6f87f-566">For more details on how to compress an existing SAP SQL Server database please check here: <https://blogs.msdn.com/b/saponsqlserver/archive/2010/10/08/compressing-an-sap-database-using-report-msscompress.aspx></span></span>

### <a name="sql-server-2014--storing-database-files-directly-on-azure-blog-storage"></a><span data-ttu-id="6f87f-567">SQL Server 2014: armazenando arquivos do banco de dados arquivos diretamente no Armazenamento de Blobs do Azure</span><span class="sxs-lookup"><span data-stu-id="6f87f-567">SQL Server 2014 – Storing Database Files directly on Azure Blog Storage</span></span>
<span data-ttu-id="6f87f-568">O SQL Server 2014 abre a possibilidade para armazenar arquivos de banco de dados diretamente no Armazenamento de Blobs do Azure sem o ‘wrapper’ de um VHD em torno deles.</span><span class="sxs-lookup"><span data-stu-id="6f87f-568">SQL Server 2014 opens the possibility to store database files directly on Azure Blob Store without the ‘wrapper’ of a VHD around them.</span></span> <span data-ttu-id="6f87f-569">Especialmente com o uso do Armazenamento do Azure Standard ou tipos de VM menores, isso permite cenários em que você pode superar os limites de IOPS que seriam impostos por um número limitado de VHDs que podem ser montados em alguns tipos de VM menores.</span><span class="sxs-lookup"><span data-stu-id="6f87f-569">Especially with using Standard Azure Storage or smaller VM types this enables scenarios where you can overcome the limits of IOPS that would be enforced by a limited number of VHDs that can be mounted to some smaller VM types.</span></span> <span data-ttu-id="6f87f-570">Isso funciona para bancos de dados de usuário, no entanto, não para bancos de dados de sistema do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="6f87f-570">This works for user databases however not for system databases of SQL Server.</span></span> <span data-ttu-id="6f87f-571">Ele também funciona para arquivos de log e dados do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="6f87f-571">It also works for data and log files of SQL Server.</span></span> <span data-ttu-id="6f87f-572">Se desejar implantar um banco de dados do SQL Server do SAP dessa forma, em vez de aplicar ‘wrappers’ nele nos VHDs, tenha o seguinte em mente:</span><span class="sxs-lookup"><span data-stu-id="6f87f-572">If you’d like to deploy a SAP SQL Server database this way instead of ‘wrapping’ it into VHDs, please keep the following in mind:</span></span>

* <span data-ttu-id="6f87f-573">A conta de armazenamento usada precisa estar na mesma região do Azure que a usada para implantar a VM em que o SQL Server está sendo executado.</span><span class="sxs-lookup"><span data-stu-id="6f87f-573">The Storage Account used needs to be in the same Azure Region as the one that is used to deploy the VM SQL Server is running in.</span></span>
* <span data-ttu-id="6f87f-574">As considerações listadas anteriormente em relação à distribuição de VHDs em diferentes Contas de Armazenamento do Azure também se aplicam a esse método de implantações.</span><span class="sxs-lookup"><span data-stu-id="6f87f-574">Considerations listed earlier in regards to distribute VHDs over different Azure Storage Accounts apply for this method of deployments as well.</span></span> <span data-ttu-id="6f87f-575">Significa a contagem de operações de E/S em relação aos limites da Conta de Armazenamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-575">Means the I/O operations count against the limits of the Azure Storage Account.</span></span>

<span data-ttu-id="6f87f-576">[comment]: <> (MSSedusch TODO Mas isso vai usar largura de banda de rede e não largura de banda de armazenamento, não é?)</span><span class="sxs-lookup"><span data-stu-id="6f87f-576">[comment]: <> (MSSedusch TODO But this will use network bandwith and not storage bandwith, doesn't it?)</span></span>

<span data-ttu-id="6f87f-577">Os detalhes sobre esse tipo de implantação estão listados aqui: <https://msdn.microsoft.com/library/dn385720.aspx></span><span class="sxs-lookup"><span data-stu-id="6f87f-577">Details about this type of deployment are listed here: <https://msdn.microsoft.com/library/dn385720.aspx></span></span>

<span data-ttu-id="6f87f-578">Para armazenar arquivos de dados do SQL Server diretamente no Armazenamento Premium do Azure, você precisa ter uma versão de patch do SQL Server 2014 mínima que está documentada aqui: <https://support.microsoft.com/kb/3063054>.</span><span class="sxs-lookup"><span data-stu-id="6f87f-578">In order to store SQL Server data files directly on Azure Premium Storage, you need to have a minimum SQL Server 2014 patch release which is documented here: <https://support.microsoft.com/kb/3063054>.</span></span> <span data-ttu-id="6f87f-579">O armazenamento de arquivos de dados do SQL Server no Armazenamento Standard do Azure funciona com a versão lançada do SQL Server 2014.</span><span class="sxs-lookup"><span data-stu-id="6f87f-579">Storing SQL Server data files on Azure Standard Storage does work with the released version of SQL Server 2014.</span></span> <span data-ttu-id="6f87f-580">No entanto, os mesmos patches contêm outra série de correções que tornam o uso direto do Armazenamento de Blobs do Azure para arquivos de dados do SQL Server e backups mais confiáveis.</span><span class="sxs-lookup"><span data-stu-id="6f87f-580">However, the very same patches contain another series of fixes which make the direct usage of Azure Blob Storage for SQL Server data files and backups more reliable.</span></span> <span data-ttu-id="6f87f-581">Portanto, é recomendável usar esses patches em geral.</span><span class="sxs-lookup"><span data-stu-id="6f87f-581">Therefore we recommend to use these patches in general.</span></span>

### <a name="sql-server-2014-buffer-pool-extension"></a><span data-ttu-id="6f87f-582">Extensão do pool de buffers do SQL Server 2014</span><span class="sxs-lookup"><span data-stu-id="6f87f-582">SQL Server 2014 Buffer Pool Extension</span></span>
<span data-ttu-id="6f87f-583">SQL Server 2014 introduziu um novo recurso que é chamado de extensão do pool de buffers.</span><span class="sxs-lookup"><span data-stu-id="6f87f-583">SQL Server 2014 introduced a new feature which is called Buffer Pool Extension.</span></span> <span data-ttu-id="6f87f-584">Essa funcionalidade estende o pool de buffers do SQL Server que é mantida na memória com um cache de segundo nível que é apoiado por SSDs local de um servidor ou VM.</span><span class="sxs-lookup"><span data-stu-id="6f87f-584">This functionality extends the buffer pool of SQL Server which is kept in memory with a second level cache that is backed by local SSDs of a server or VM.</span></span> <span data-ttu-id="6f87f-585">Isso permite manter um conjunto de trabalho maior de dados ‘na memória’.</span><span class="sxs-lookup"><span data-stu-id="6f87f-585">This enables to keep a larger working set of data ‘in memory’.</span></span> <span data-ttu-id="6f87f-586">Em comparação com o acesso ao Armazenamento Standard do Azure, o acesso na extensão do pool de buffers, que é armazenado em SSDs locais de uma VM do Azure, é muitos fatores mais rápido.</span><span class="sxs-lookup"><span data-stu-id="6f87f-586">Compared to accessing Azure Standard Storage the access into the extension of the buffer pool which is stored on local SSDs of an Azure VM is many factors faster.</span></span>  <span data-ttu-id="6f87f-587">Portanto, aproveitar a unidade D:\ local dos tipos de VM que têm excelentes IOPS e taxa de transferência pode ser uma maneira bastante razoável para reduzir a carga de IOPS no Armazenamento do Azure e para melhorar os tempos de resposta de consultas drasticamente.</span><span class="sxs-lookup"><span data-stu-id="6f87f-587">Therefore, leveraging the local D:\ drive of the VM types that have excellent IOPS and throughput could be a very reasonable way to reduce the IOPS load against Azure Storage and improve response times of queries dramatically.</span></span> <span data-ttu-id="6f87f-588">Isso se aplica especialmente quando não usar o Armazenamento Premium.</span><span class="sxs-lookup"><span data-stu-id="6f87f-588">This applies especially when not using Premium Storage.</span></span> <span data-ttu-id="6f87f-589">No caso do Armazenamento Premium e o uso do cache de leitura do Azure Premium no nó de computação, conforme recomendado para arquivos de dados, não são esperadas grandes diferenças.</span><span class="sxs-lookup"><span data-stu-id="6f87f-589">In case of Premium Storage and the usage of the Premium Azure Read Cache on the compute node, as recommended for data files, no big differences are expected.</span></span> <span data-ttu-id="6f87f-590">O motivo é que ambos os caches (extensão do pool de buffers do SQL Server e o cache de leitura do Armazenamento Premium) estão usando os discos locais dos nós de computação.</span><span class="sxs-lookup"><span data-stu-id="6f87f-590">Reason is that both caches (SQL Server Buffer Pool Extension and Premium Storage Read Cache) are using the local disks of the compute nodes.</span></span>
<span data-ttu-id="6f87f-591">Para obter mais detalhes sobre essa funcionalidade, veja esta documentação: <https://msdn.microsoft.com/library/dn133176.aspx></span><span class="sxs-lookup"><span data-stu-id="6f87f-591">For more details about this functionality, please check this documentation: <https://msdn.microsoft.com/library/dn133176.aspx></span></span>

### <a name="backuprecovery-considerations-for-sql-server"></a><span data-ttu-id="6f87f-592">Considerações sobre backup e recuperação para o SQL Server</span><span class="sxs-lookup"><span data-stu-id="6f87f-592">Backup/Recovery considerations for SQL Server</span></span>
<span data-ttu-id="6f87f-593">Ao implantar o SQL Server no Azure, sua metodologia de backup deve ser examinada.</span><span class="sxs-lookup"><span data-stu-id="6f87f-593">When deploying SQL Server into Azure your backup methodology must be reviewed.</span></span> <span data-ttu-id="6f87f-594">Mesmo se o sistema não for um sistema produtivo, o banco de dados SAP hospedado pelo SQL Server deverá ser submetido a backup periodicamente.</span><span class="sxs-lookup"><span data-stu-id="6f87f-594">Even if the system is not a productive system, the SAP database hosted by SQL Server must be backed up periodically.</span></span> <span data-ttu-id="6f87f-595">Como o armazenamento do Azure mantém três imagens, um backup agora é menos importante no que diz respeito à compensação de uma falha de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="6f87f-595">Since Azure Storage keeps three images, a backup is now less important in respect to compensating a storage crash.</span></span> <span data-ttu-id="6f87f-596">A razão de prioridade para manter um plano de backup e recuperação adequado é mais que você pode compensar erros lógicos/manuais fornecendo funcionalidades de recuperação pontual.</span><span class="sxs-lookup"><span data-stu-id="6f87f-596">The priority reason for maintaining a proper backup and recovery plan is more that you can compensate for logical/manual errors by providing point in time recovery capabilities.</span></span> <span data-ttu-id="6f87f-597">Portanto, o objetivo é usar backups para restaurar o banco de dados para um determinado momento ou usar os backups no Azure para propagar outro sistema copiando o banco de dados existente.</span><span class="sxs-lookup"><span data-stu-id="6f87f-597">So the goal is to either use backups to restore the database back to a certain point in time or to use the backups in Azure to seed another system by copying the existing database.</span></span> <span data-ttu-id="6f87f-598">Por exemplo, você pode transferir de uma configuração do SAP de duas camadas para uma configuração de sistema de três camadas do mesmo sistema restaurando um backup.</span><span class="sxs-lookup"><span data-stu-id="6f87f-598">For example, you could transfer from a 2-Tier SAP configuration to a 3-Tier system setup of the same system by restoring a backup.</span></span>

<span data-ttu-id="6f87f-599">Há três maneiras diferentes de fazer o backup do SQL Server para o Armazenamento do Azure:</span><span class="sxs-lookup"><span data-stu-id="6f87f-599">There are three different ways to backup SQL Server to Azure Storage:</span></span>

1. <span data-ttu-id="6f87f-600">O SQL Server 2012 CU4 e superior podem fazer o backup de bancos de dados para uma URL de forma nativa.</span><span class="sxs-lookup"><span data-stu-id="6f87f-600">SQL Server 2012 CU4 and higher can natively backup databases to a URL.</span></span> <span data-ttu-id="6f87f-601">Isso é detalhado no blog de [New functionality in SQL Server 2014 – Part 5 – Backup/Restore Enhancements](https://blogs.msdn.com/b/saponsqlserver/archive/2014/02/15/new-functionality-in-sql-server-2014-part-5-backup-restore-enhancements.aspx)(Nova funcionalidade no SQL Server 2014, parte 5, aprimoramentos de backup e restauração).</span><span class="sxs-lookup"><span data-stu-id="6f87f-601">This is detailed in the blog [New functionality in SQL Server 2014 – Part 5 – Backup/Restore Enhancements](https://blogs.msdn.com/b/saponsqlserver/archive/2014/02/15/new-functionality-in-sql-server-2014-part-5-backup-restore-enhancements.aspx).</span></span> <span data-ttu-id="6f87f-602">Veja o capítulo [SQL Server 2012 SP1 CU4 e posterior][dbms-guide-5.5.1].</span><span class="sxs-lookup"><span data-stu-id="6f87f-602">See chapter [SQL Server 2012 SP1 CU4 and later][dbms-guide-5.5.1].</span></span>
2. <span data-ttu-id="6f87f-603">Versões do SQL Server anteriores ao SQL 2012 CU4 podem usar uma funcionalidade de redirecionamento para fazer o backup em um VHD e basicamente mover o fluxo de gravação para um local de Armazenamento do Azure que tenha sido configurado.</span><span class="sxs-lookup"><span data-stu-id="6f87f-603">SQL Server releases prior to SQL 2012 CU4 can use a redirection functionality to backup to a VHD and basically move the write stream towards an Azure Storage location that has been configured.</span></span> <span data-ttu-id="6f87f-604">Veja o capítulo [SQL Server 2012 SP1 CU3 e versões anteriores][dbms-guide-5.5.2].</span><span class="sxs-lookup"><span data-stu-id="6f87f-604">See chapter [SQL Server 2012 SP1 CU3 and earlier releases][dbms-guide-5.5.2].</span></span>
3. <span data-ttu-id="6f87f-605">O método final é executar um comando de backup convencional do SQL Server para disco em um dispositivo de disco VHD.</span><span class="sxs-lookup"><span data-stu-id="6f87f-605">The final method is to perform a conventional SQL Server backup to disk command onto a VHD disk device.</span></span>  <span data-ttu-id="6f87f-606">Isso é idêntico ao padrão de implantação local e não é discutido em detalhes neste documento.</span><span class="sxs-lookup"><span data-stu-id="6f87f-606">This is identical to the on-premises deployment pattern and is not discussed in detail in this document.</span></span>

#### <span data-ttu-id="6f87f-607"><a name="0fef0e79-d3fe-4ae2-85af-73666a6f7268"></a>SQL Server 2012 SP1 CU4 e posterior</span><span class="sxs-lookup"><span data-stu-id="6f87f-607"><a name="0fef0e79-d3fe-4ae2-85af-73666a6f7268"></a>SQL Server 2012 SP1 CU4 and later</span></span>
<span data-ttu-id="6f87f-608">Essa funcionalidade permite que você faça o backup diretamente no Armazenamento de Blobs do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-608">This functionality allows you to directly backup to Azure BLOB storage.</span></span> <span data-ttu-id="6f87f-609">Sem esse método, você deve fazer backup para outros VHDs do Azure, o que consumiria a capacidade do VHD e IOPS.</span><span class="sxs-lookup"><span data-stu-id="6f87f-609">Without this method, you must backup to other Azure VHDs which would consume VHD and IOPS capacity.</span></span> <span data-ttu-id="6f87f-610">A ideia é basicamente essa:</span><span class="sxs-lookup"><span data-stu-id="6f87f-610">The idea is basically this:</span></span>

 ![Usando o backup do SQL Server 2012 para o Blob de Armazenamento do Microsoft Azure][dbms-guide-figure-400]

<span data-ttu-id="6f87f-612">A vantagem nesse caso é que não é necessário gastar VHDs para armazenar backups do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="6f87f-612">The advantage in this case is that one doesn’t need to spend VHDs to store SQL Server backups on.</span></span> <span data-ttu-id="6f87f-613">Então você tem menos VHDs alocados e a largura de banda total de IOPS do VHD pode ser usada para arquivos de log e de dados.</span><span class="sxs-lookup"><span data-stu-id="6f87f-613">So you have fewer VHDs allocated and the whole bandwidth of VHD IOPS can be used for data and log files.</span></span> <span data-ttu-id="6f87f-614">Observe que o tamanho máximo de um backup é limitado ao máximo de 1 TB, conforme documentado na seção "Limitações" neste artigo: <https://msdn.microsoft.com/library/dn435916.aspx#limitations>.</span><span class="sxs-lookup"><span data-stu-id="6f87f-614">Please note that the maximum size of a backup is limited to a maximum of 1 TB as documented in the section ‘Limitations’ in this article: <https://msdn.microsoft.com/library/dn435916.aspx#limitations>.</span></span> <span data-ttu-id="6f87f-615">Se o tamanho do backup, apesar do uso da compactação de backup do SQL Server, exceder 1 TB, a funcionalidade descrita no capítulo [SQL Server 2012 SP1 CU3 e versões anteriores][dbms-guide-5.5.2] neste documento deverá ser usada.</span><span class="sxs-lookup"><span data-stu-id="6f87f-615">If the backup size, despite using SQL Server Backup compression would exceed 1 TB in size, the functionality described in chapter [SQL Server 2012 SP1 CU3 and earlier releases][dbms-guide-5.5.2] in this document needs to be used.</span></span>

<span data-ttu-id="6f87f-616">A [documentação relacionada](https://msdn.microsoft.com/library/dn449492.aspx) descrevendo a restauração de bancos de dados de backups no Armazenamento de Blobs do Azure recomenda não realizar a restauração diretamente do Armazenamento de Blobs do Azure se o backup for maior que 25 GB.</span><span class="sxs-lookup"><span data-stu-id="6f87f-616">[Related documentation](https://msdn.microsoft.com/library/dn449492.aspx) describing the restore of databases from backups against Azure Blob Store recommend not to restore directly from Azure BLOB store if the backups is >25GB.</span></span> <span data-ttu-id="6f87f-617">A recomendação neste artigo é baseada simplesmente em considerações de desempenho e não devido a restrições funcionais.</span><span class="sxs-lookup"><span data-stu-id="6f87f-617">The recommendation in this article is simply based on performance considerations and not due to functional restrictions.</span></span> <span data-ttu-id="6f87f-618">Portanto, diferentes condições podem se aplicar caso a caso.</span><span class="sxs-lookup"><span data-stu-id="6f87f-618">Therefore, different conditions may apply on a case by case basis.</span></span>

<span data-ttu-id="6f87f-619">A documentação sobre como esse tipo de backup é configurado e utilizado pode ser encontrada [neste](https://msdn.microsoft.com/library/dn466438.aspx) tutorial</span><span class="sxs-lookup"><span data-stu-id="6f87f-619">Documentation on how this type of backup is set up and leveraged can be found in [this](https://msdn.microsoft.com/library/dn466438.aspx) tutorial</span></span>

<span data-ttu-id="6f87f-620">Um exemplo da sequência de etapas pode ser lido [aqui](https://msdn.microsoft.com/library/dn435916.aspx).</span><span class="sxs-lookup"><span data-stu-id="6f87f-620">An example of the sequence of steps can be read [here](https://msdn.microsoft.com/library/dn435916.aspx).</span></span>

<span data-ttu-id="6f87f-621">A automatização de backups é da mais alta importância para se certificar de que os blobs para cada backup estejam nomeados de forma diferente.</span><span class="sxs-lookup"><span data-stu-id="6f87f-621">Automating backups, it is of highest importance to make sure that the BLOBs for each backup are named differently.</span></span> <span data-ttu-id="6f87f-622">Caso contrário, eles serão substituídos e a cadeia restauração será interrompida.</span><span class="sxs-lookup"><span data-stu-id="6f87f-622">Otherwise they will be overwritten and the restore chain is broken.</span></span>

<span data-ttu-id="6f87f-623">Para não misturar o conteúdo entre os três tipos diferentes de backups, é aconselhável criar contêineres diferentes sob a conta de armazenamento usada para backups.</span><span class="sxs-lookup"><span data-stu-id="6f87f-623">In order not to mix up things between the 3 different types of backups, it is advisable to create different containers underneath the storage account used for backups.</span></span> <span data-ttu-id="6f87f-624">Os contêineres podem ser apenas por VM ou por VM e tipo de backup.</span><span class="sxs-lookup"><span data-stu-id="6f87f-624">The containers could be by VM only or by VM and Backup type.</span></span> <span data-ttu-id="6f87f-625">O esquema seria semelhante ao seguinte:</span><span class="sxs-lookup"><span data-stu-id="6f87f-625">The schema could look like:</span></span>

 ![Usando o backup do SQL Server 2012 para o Blob de Armazenamento do Microsoft Azure – Diferentes contêineres na conta de armazenamento separada][dbms-guide-figure-500]

<span data-ttu-id="6f87f-627">No exemplo acima, os backups não seriam realizados na mesma conta de armazenamento em que as VMs são implantadas.</span><span class="sxs-lookup"><span data-stu-id="6f87f-627">In the example above, the backups would not be performed into the same storage account where the VMs are deployed.</span></span> <span data-ttu-id="6f87f-628">Haveria uma nova conta de armazenamento especificamente para os backups.</span><span class="sxs-lookup"><span data-stu-id="6f87f-628">There would be a new storage account specifically for the backups.</span></span> <span data-ttu-id="6f87f-629">Em contas de armazenamento, haveria diferentes contêineres criados com uma matriz do tipo de backup e o nome da VM.</span><span class="sxs-lookup"><span data-stu-id="6f87f-629">Within the storage accounts, there would be different containers created with a matrix of the type of backup and the VM name.</span></span> <span data-ttu-id="6f87f-630">Essa segmentação tornará mais fácil administrar os backups das VMs diferentes.</span><span class="sxs-lookup"><span data-stu-id="6f87f-630">Such segmentation will make it easier to administrate the backups of the different VMs.</span></span>

<span data-ttu-id="6f87f-631">Os blobs nos quais os backups são gravados diretamente não são incluídos na contagem dos VHDs de uma VM.</span><span class="sxs-lookup"><span data-stu-id="6f87f-631">The BLOBs one directly writes the backups to, are not adding to the count of the VHDs of a VM.</span></span> <span data-ttu-id="6f87f-632">Portanto, é possível expandir o máximo de VHDs montados do SKU de VM específico para os arquivos de log de transações e dados e ainda executar um backup em um contêiner de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="6f87f-632">Hence one could maximize the maximum of VHDs mounted of the specific VM SKU for the data and transaction log file and still execute a backup against a storage container.</span></span>

#### <span data-ttu-id="6f87f-633"><a name="f9071eff-9d72-4f47-9da4-1852d782087b"></a>SQL Server 2012 SP1 CU3 e versões anteriores</span><span class="sxs-lookup"><span data-stu-id="6f87f-633"><a name="f9071eff-9d72-4f47-9da4-1852d782087b"></a>SQL Server 2012 SP1 CU3 and earlier releases</span></span>
<span data-ttu-id="6f87f-634">A primeira etapa que você deve executar para realizar um backup diretamente no Armazenamento do Azure é baixar o msi que está vinculado a [esse](https://www.microsoft.com/download/details.aspx?id=40740) artigo da KBA.</span><span class="sxs-lookup"><span data-stu-id="6f87f-634">The first step you must perform in order to achieve a backup directly against Azure Storage would be to download the msi which is linked to [this](https://www.microsoft.com/download/details.aspx?id=40740) KBA article.</span></span>

<span data-ttu-id="6f87f-635">Baixe o arquivo de instalação x64 e a documentação.</span><span class="sxs-lookup"><span data-stu-id="6f87f-635">Download the x64 installation file and the documentation.</span></span> <span data-ttu-id="6f87f-636">O arquivo instalará um programa chamado: 'Microsoft SQL Server Backup to Microsoft Azure Tool'.</span><span class="sxs-lookup"><span data-stu-id="6f87f-636">The file will install a program called: ‘Microsoft SQL Server Backup to Microsoft Azure Tool’.</span></span> <span data-ttu-id="6f87f-637">Leia a documentação do produto completamente.</span><span class="sxs-lookup"><span data-stu-id="6f87f-637">Read the documentation of the product thoroughly.</span></span>  <span data-ttu-id="6f87f-638">A ferramenta basicamente funciona da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="6f87f-638">The tool basically works in the following way:</span></span>

* <span data-ttu-id="6f87f-639">No lado do SQL Server, um local de disco para o backup do SQL Server é definido (não use a unidade D:\ para isso).</span><span class="sxs-lookup"><span data-stu-id="6f87f-639">From the SQL Server side, a disk location for the SQL Server backup is defined (don’t use the D:\ drive for this).</span></span>
* <span data-ttu-id="6f87f-640">A ferramenta permitirá que você defina regras que podem ser usadas para direcionar diferentes tipos de backups para diferentes contêineres de Armazenamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-640">The tool will allow you to define rules which can be used to direct different types of backups to different Azure Storage containers.</span></span>
* <span data-ttu-id="6f87f-641">Depois que as regras estiverem em vigor, a ferramenta redirecionará o fluxo de gravação do backup para um dos VHDs/discos para o local de armazenamento do Azure que foi definido anteriormente.</span><span class="sxs-lookup"><span data-stu-id="6f87f-641">Once the rules are in place, the tool will redirect the write stream of the backup to one of the VHDs/disks to the Azure Storage location which was defined earlier.</span></span>
* <span data-ttu-id="6f87f-642">A ferramenta deixará um pequeno arquivo stub de alguns KB de tamanho no VHD/disco que foi definido para o backup do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="6f87f-642">The tool will leave a small stub file of a few KB size on the VHD/Disk which was defined for the SQL Server backup.</span></span> <span data-ttu-id="6f87f-643">**Esse arquivo deve ser deixado no local de armazenamento, já que é necessário para restaurar novamente do armazenamento do Azure.**</span><span class="sxs-lookup"><span data-stu-id="6f87f-643">**This file should be left on the storage location since it is required to restore again from Azure Storage.**</span></span>
  * <span data-ttu-id="6f87f-644">Se você tiver perdido o arquivo stub (por exemplo, por meio de perda da mídia de armazenamento que continha o arquivo stub) e tiver escolhido a opção de backup em uma conta de Armazenamento do Microsoft Azure, você poderá recuperar o arquivo stub por meio do Armazenamento do Microsoft Azure baixando-o do contêiner de armazenamento na qual ele foi colocado.</span><span class="sxs-lookup"><span data-stu-id="6f87f-644">If you have lost the stub file (e.g. through loss of the storage media that contained the stub file) and you have chosen the option of backing up to a Microsoft Azure Storage account, you may recover the stub file through Microsoft Azure Storage by downloading it from the storage container in which it was placed.</span></span> <span data-ttu-id="6f87f-645">Em seguida, você deverá colocar o arquivo stub em uma pasta no computador local em que a ferramenta está configurada para detectar e carregar no mesmo contêiner com a mesma senha de criptografia se a criptografia tiver sido usada com a regra original.</span><span class="sxs-lookup"><span data-stu-id="6f87f-645">You should then place the stub file into a folder on the local machine where the Tool is configured to detect and upload to the same container with the same encryption password if encryption was used with the original rule.</span></span>

<span data-ttu-id="6f87f-646">Isso significa que o esquema conforme descrito acima para versões mais recentes do SQL Server pode ser colocado em vigor também para versões do SQL Server que não permitem endereçar diretamente um local de armazenamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-646">This means the schema as described above for more recent releases of SQL Server can be put in place as well for SQL Server releases which are not allowing direct address an Azure Storage location.</span></span>

<span data-ttu-id="6f87f-647">Esse método não deve ser usado com versões mais recentes do SQL Server que dão suporte à realização do backup nativamente no armazenamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-647">This method should not be used with more recent SQL Server releases which support backing up natively against Azure Storage.</span></span> <span data-ttu-id="6f87f-648">As exceções existem onde as limitações do backup nativo no Azure estão impedindo a execução do backup nativo no Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-648">Exceptions are where limitations of the native backup into Azure are blocking native backup execution into Azure.</span></span>

#### <a name="other-possibilities-to-backup-sql-server-databases"></a><span data-ttu-id="6f87f-649">Outras possibilidades para fazer o backup de bancos de dados SQL Server</span><span class="sxs-lookup"><span data-stu-id="6f87f-649">Other possibilities to backup SQL Server databases</span></span>
<span data-ttu-id="6f87f-650">Outras possibilidades para bancos de dados de backup é anexar VHDs adicionais a uma VM que você usa para armazenar backups.</span><span class="sxs-lookup"><span data-stu-id="6f87f-650">Other possibilities to backup databases is to attach additional VHDs to a VM that you use to store backups on.</span></span> <span data-ttu-id="6f87f-651">Nesse caso, você precisaria se certificar de que os VHDs não estão executando completos.</span><span class="sxs-lookup"><span data-stu-id="6f87f-651">In such a case you would need to make sure that the VHDs are not running full.</span></span> <span data-ttu-id="6f87f-652">Se esse for o caso, será necessário desmontar o VHD e por assim dizer 'arquivá-lo' e substituí-lo por um novo VHD vazio.</span><span class="sxs-lookup"><span data-stu-id="6f87f-652">If that is the case, you would need to unmount the VHD and so to speak ‘archive’ it and replace it with a new empty VHD.</span></span> <span data-ttu-id="6f87f-653">Se seguir esse caminho, você desejará manter esses VHDs em contas de armazenamento do Azure separadas daquelas dos VHDs com os arquivos de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="6f87f-653">If you go down that path, you want to keep these VHDs in separate Azure Storage Accounts from the ones that the VHDs with the database files.</span></span>

<span data-ttu-id="6f87f-654">Uma segunda possibilidade é usar uma VM grande que pode ter vários VHDs anexados.</span><span class="sxs-lookup"><span data-stu-id="6f87f-654">A second possibility is to use a large VM that can have many VHDs attached.</span></span> <span data-ttu-id="6f87f-655">Por exemplo</span><span class="sxs-lookup"><span data-stu-id="6f87f-655">E.g.</span></span> <span data-ttu-id="6f87f-656">D14 com 32 VHDs.</span><span class="sxs-lookup"><span data-stu-id="6f87f-656">D14 with 32VHDs.</span></span> <span data-ttu-id="6f87f-657">Use espaços de armazenamento para criar um ambiente flexível em que você pode criar compartilhamentos que são usados como destinos de backup para os diferentes servidores DBMS.</span><span class="sxs-lookup"><span data-stu-id="6f87f-657">Use Storage Spaces to build a flexible environment where you could build shares that are used then as backup targets for the different DBMS servers.</span></span>

<span data-ttu-id="6f87f-658">Algumas práticas recomendadas também foram documentadas [aqui](https://blogs.msdn.com/b/sqlcat/archive/2015/02/26/large-sql-server-database-backup-on-an-azure-vm-and-archiving.aspx) .</span><span class="sxs-lookup"><span data-stu-id="6f87f-658">Some best practices got documented [here](https://blogs.msdn.com/b/sqlcat/archive/2015/02/26/large-sql-server-database-backup-on-an-azure-vm-and-archiving.aspx) as well.</span></span>

#### <a name="performance-considerations-for-backupsrestores"></a><span data-ttu-id="6f87f-659">Considerações de desempenho para backups/restaurações</span><span class="sxs-lookup"><span data-stu-id="6f87f-659">Performance considerations for backups/restores</span></span>
<span data-ttu-id="6f87f-660">Como em implantações bare-metal, o desempenho de backup/restauração depende de quantos volumes podem ser lidos em paralelo e qual pode ser a taxa de transferência desses volumes.</span><span class="sxs-lookup"><span data-stu-id="6f87f-660">As in bare-metal deployments, backup/restore performance is dependent on how many volumes can be read in parallel and what the throughput of those volumes might be.</span></span> <span data-ttu-id="6f87f-661">Além disso, o consumo de CPU usado pela compactação de backup pode desempenhar uma função significativa em VMs com apenas até 8 threads de CPU.</span><span class="sxs-lookup"><span data-stu-id="6f87f-661">In addition, the CPU consumption used by backup compression may play a significant role on VMs with just up to 8 CPU threads.</span></span> <span data-ttu-id="6f87f-662">Portanto, é possível supor que:</span><span class="sxs-lookup"><span data-stu-id="6f87f-662">Therefore, one can assume:</span></span>

* <span data-ttu-id="6f87f-663">Quanto menor o número de VHDs usados para armazenar os arquivos de dados, menor é a taxa de transferência geral na leitura.</span><span class="sxs-lookup"><span data-stu-id="6f87f-663">The fewer the number of VHDs used to store the data files, the smaller the overall throughput in reading.</span></span>
* <span data-ttu-id="6f87f-664">Quanto menor o número de threads de CPU na VM, mais severo é o impacto da compactação de backup.</span><span class="sxs-lookup"><span data-stu-id="6f87f-664">The smaller the number of CPU threads in the VM, the more severe the impact of backup compression.</span></span>
* <span data-ttu-id="6f87f-665">Quanto menos destinos (blobs ou VHDs) nos quais gravar o backup, menor é a taxa de transferência.</span><span class="sxs-lookup"><span data-stu-id="6f87f-665">The fewer targets (BLOBs or VHDs) to write the backup to, the lesser the throughput.</span></span>
* <span data-ttu-id="6f87f-666">Quanto menor o tamanho da VM, menor é a gravação e leitura da cota de taxa de transferência do Armazenamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-666">The smaller the VM size, the smaller the storage throughput quota writing and reading from Azure Storage.</span></span> <span data-ttu-id="6f87f-667">Independentemente de se os backups são armazenados diretamente no Blob do Azure ou se eles são armazenados em VHDs que novamente são armazenados em Blobs do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-667">Independent of whether the backups are directly stored on Azure Blob or whether they are stored in VHDs that again are stored in Azure Blobs.</span></span>

<span data-ttu-id="6f87f-668">Ao usar um blob de Armazenamento do Microsoft Azure como o destino de backup em versões mais recentes, você está restrito a designar apenas uma URL de destino para cada backup específico.</span><span class="sxs-lookup"><span data-stu-id="6f87f-668">When using a Microsoft Azure Storage BLOB as the backup target in more recent releases, you are restricted to designating only one URL target for each specific backup.</span></span>

<span data-ttu-id="6f87f-669">Mas ao usar o 'Microsoft SQL Server Backup to Microsoft Azure Tool' em versões mais antigas, você pode definir mais de um destino de arquivo.</span><span class="sxs-lookup"><span data-stu-id="6f87f-669">But when using the ‘Microsoft SQL Server Backup to Microsoft Azure Tool’ in older releases, you can define more than one file target.</span></span> <span data-ttu-id="6f87f-670">Com mais de um destino, o backup pode ser dimensionado e a taxa de transferência do backup pode ser maior.</span><span class="sxs-lookup"><span data-stu-id="6f87f-670">With more than one target, the backup can scale and the throughput of the backup is higher.</span></span> <span data-ttu-id="6f87f-671">Isso resultaria, então, em vários arquivos também na conta de armazenamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-671">This would result then in multiple files as well in the Azure Storage account.</span></span> <span data-ttu-id="6f87f-672">Em nossos testes, usando vários destinos de arquivo é possível atingir definitivamente a taxa de transferência que poderia ser atingida com as extensões de backup implementadas por meio do SQL Server 2012 SP1 CU4.</span><span class="sxs-lookup"><span data-stu-id="6f87f-672">In our testing, using multiple file destinations one can definitely achieve the throughput which one could achieve with the backup extensions implemented in from SQL Server 2012 SP1 CU4 on.</span></span> <span data-ttu-id="6f87f-673">Você também não é bloqueado pelo limite de 1 TB como no backup nativo no Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-673">You also are not blocked by the 1TB limit as in the native backup into Azure.</span></span>

<span data-ttu-id="6f87f-674">No entanto, tenha em mente que a taxa de transferência também é depende do local da conta de armazenamento do Azure usada para o backup.</span><span class="sxs-lookup"><span data-stu-id="6f87f-674">However, keep in mind, the throughput also is dependent on the location of the Azure Storage Account you use for the backup.</span></span> <span data-ttu-id="6f87f-675">Uma ideia pode ser localizar a conta de armazenamento em uma região diferente daquela em que as VMs estão em execução.</span><span class="sxs-lookup"><span data-stu-id="6f87f-675">An idea might be to locate the storage account in a different region than the VMs are running in.</span></span> <span data-ttu-id="6f87f-676">Por exemplo</span><span class="sxs-lookup"><span data-stu-id="6f87f-676">E.g.</span></span> <span data-ttu-id="6f87f-677">você executaria a configuração da VM no Oeste da Europa, mas colocaria a Conta de Armazenamento que usa para fazer backup no Norte da Europa.</span><span class="sxs-lookup"><span data-stu-id="6f87f-677">you would run the VM configuration in West-Europe, but put the Storage Account that you use to back up against in North-Europe.</span></span> <span data-ttu-id="6f87f-678">Isso certamente terá impacto na taxa de transferência de backup e não está propenso a gerar uma taxa de transferência de 150 MB/s como parece ser possível em casos em que o armazenamento de destino e as VMs estão em execução no mesmo datacenter regional.</span><span class="sxs-lookup"><span data-stu-id="6f87f-678">That certainly will have impact on the backup throughput and is not likely to generate a throughput of 150MB/sec as it seems to be possible in cases where the target storage and the VMs are running in the same regional datacenter.</span></span>

#### <a name="managing-backup-blobs"></a><span data-ttu-id="6f87f-679">Gerenciando blobs de Backup</span><span class="sxs-lookup"><span data-stu-id="6f87f-679">Managing Backup BLOBs</span></span>
<span data-ttu-id="6f87f-680">Há um requisito para gerenciar os backups por conta própria.</span><span class="sxs-lookup"><span data-stu-id="6f87f-680">There is a requirement to manage the backups on your own.</span></span> <span data-ttu-id="6f87f-681">Como a expectativa é que muitos blobs serão criados pela execução de backups de log de transações frequentes, a administração desses blobs pode facilmente sobrecarregar o Portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-681">Since the expectation is that many blobs will be created by executing frequent transaction log backups, administration of those blobs easily can overburden the Azure Portal.</span></span> <span data-ttu-id="6f87f-682">Portanto, é recomendável utilizar um Gerenciador de Armazenamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-682">Therefore, it is recommendable to leverage a Azure Storage Explorer.</span></span> <span data-ttu-id="6f87f-683">Existem vários bons disponíveis que podem ajudar a gerenciar uma conta de armazenamento do Azure</span><span class="sxs-lookup"><span data-stu-id="6f87f-683">There are several good ones available which can help to manage an Azure storage account</span></span>

* <span data-ttu-id="6f87f-684">Microsoft Visual Studio com o SDK do Azure instalado (<https://azure.microsoft.com/downloads/>)</span><span class="sxs-lookup"><span data-stu-id="6f87f-684">Microsoft Visual Studio with Azure SDK installed (<https://azure.microsoft.com/downloads/>)</span></span>
* <span data-ttu-id="6f87f-685">Gerenciador de Armazenamento do Microsoft Azure (<https://azure.microsoft.com/downloads/>)</span><span class="sxs-lookup"><span data-stu-id="6f87f-685">Microsoft Azure Storage Explorer (<https://azure.microsoft.com/downloads/>)</span></span>
* <span data-ttu-id="6f87f-686">Ferramentas de terceiros</span><span class="sxs-lookup"><span data-stu-id="6f87f-686">3rd party tools</span></span>

<span data-ttu-id="6f87f-687">[comment]: <> (Ainda não tem suporte no ARM)</span><span class="sxs-lookup"><span data-stu-id="6f87f-687">[comment]: <> (Not yet supported on ARM)</span></span>
<span data-ttu-id="6f87f-688">[comment]: <> (#### Backup da VM do Azure)</span><span class="sxs-lookup"><span data-stu-id="6f87f-688">[comment]: <> (#### Azure VM backup)</span></span>
<span data-ttu-id="6f87f-689">[comment]: <> (O backup de VMs no sistema SAP pode ser feito usando a funcionalidade de Backup da Máquina Virtual do Azure. O Backup de máquina virtual do Azure foi introduzido no início do ano de 2015 e ao mesmo tempo é um método standard para fazer o backup de uma VM completa no Azure. O Backup do Azure armazena os backups no Azure e permite a restauração de uma VM novamente.)</span><span class="sxs-lookup"><span data-stu-id="6f87f-689">[comment]: <> (VMs within the SAP system can be backed up using Azure Virtual Machine Backup functionality. Azure Virtual Machine Backup got introduced early in the year 2015 and meanwhile is a standard method to backup a complete VM in Azure. Azure Backup stores the backups in Azure and allows a restore of a VM again.)</span></span>
<span data-ttu-id="6f87f-690">[comment]: <> (É possível fazer backup de maneira consistente das VMs que executam os bancos de dados, caso os sistemas DBMS deem suporte ao VSS (Serviço de Cópias de Sombra de Volume) do Windows <https://msdn.microsoft.com/library/windows/desktop/bb968832.aspx> como o SQL Server faz. Portanto, usar o backup da VM do Azure pode ser uma maneira de obter um backup restaurável de um banco de dados do SAP. No entanto, lembre-se de que com base nos backups de VM do Azure, as restaurações pontuais não são possíveis. Portanto, a recomendação é executar backups de bancos de dados com a funcionalidade do DBMS em vez de depender do Backup de VM do Azure)</span><span class="sxs-lookup"><span data-stu-id="6f87f-690">[comment]: <> (VMs that run databases can be backed up in a consistent manner as well if the DBMS systems supports the Windows VSS Volume Shadow Copy Service <https://msdn.microsoft.com/library/windows/desktop/bb968832.aspx> as SQL Server does. So using Azure VM backup could be a way to get to a restorable backup of a SAP database. However, be aware that based on Azure VM backups point-in-time restores of databases is not possible. Therefore, the recommendation is to perform backups of databases with DBMS functionality instead of relying on Azure VM Backup.)</span></span>
<span data-ttu-id="6f87f-691">[comment]: <> (Para se familiarizar com o Backup de Máquina Virtual do Azure, comece aqui: <https://azure.microsoft.com/documentation/services/backup/>)</span><span class="sxs-lookup"><span data-stu-id="6f87f-691">[comment]: <> (To get familiar with Azure Virtual Machine Backup please start here <https://azure.microsoft.com/documentation/services/backup/>)</span></span>

### <span data-ttu-id="6f87f-692"><a name="1b353e38-21b3-4310-aeb6-a77e7c8e81c8"></a>Usando imagens do SQL Server do Microsoft Azure Marketplace</span><span class="sxs-lookup"><span data-stu-id="6f87f-692"><a name="1b353e38-21b3-4310-aeb6-a77e7c8e81c8"></a>Using a SQL Server images out of the Microsoft Azure Marketplace</span></span>
<span data-ttu-id="6f87f-693">A Microsoft oferece VMs no Azure Marketplace que já contêm versões do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="6f87f-693">Microsoft offers VMs in the Azure Marketplace which already contain versions of SQL Server.</span></span> <span data-ttu-id="6f87f-694">Para os clientes SAP que necessitam de licenças para o SQL Server e Windows, essa pode ser uma oportunidade para cobrir basicamente a necessidade de licenças gerando VMs com o SQL Server já instalado.</span><span class="sxs-lookup"><span data-stu-id="6f87f-694">For SAP customers who require licenses for SQL Server and Windows, this might be an opportunity to basically cover the need for licenses by spinning up VMs with SQL Server already installed.</span></span> <span data-ttu-id="6f87f-695">Para usar essas imagens para SAP, as considerações a seguir precisam ser feitas:</span><span class="sxs-lookup"><span data-stu-id="6f87f-695">In order to use such images for SAP, the following considerations need to be made:</span></span>

* <span data-ttu-id="6f87f-696">As versões do SQL Server que não são de avaliação acarretam em custos mais elevados do que uma VM ‘Somente Windows’ implantada do Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="6f87f-696">The SQL Server non-Evaluation versions acquire higher costs than just a ‘Windows-only’ VM deployed from Azure Marketplace.</span></span> <span data-ttu-id="6f87f-697">Confira estes artigos para comparar preços: <https://azure.microsoft.com/pricing/details/virtual-machines/> e <https://azure.microsoft.com/pricing/details/virtual-machines/#Sql>.</span><span class="sxs-lookup"><span data-stu-id="6f87f-697">Please see these articles to compare prices: <https://azure.microsoft.com/pricing/details/virtual-machines/> and <https://azure.microsoft.com/pricing/details/virtual-machines/#Sql>.</span></span>
* <span data-ttu-id="6f87f-698">Você pode usar apenas versões do SQL Server que têm suporte pelo SAP, como o SQL Server 2012.</span><span class="sxs-lookup"><span data-stu-id="6f87f-698">You only can use SQL Server releases which are supported by SAP, like SQL Server 2012.</span></span>
* <span data-ttu-id="6f87f-699">O agrupamento da instância do SQL Server que é instalado nas VMs oferecidas no Azure Marketplace não é o agrupamento que o SAP NetWeaver requer para a instância do SQL Server ser executada.</span><span class="sxs-lookup"><span data-stu-id="6f87f-699">The collation of the SQL Server instance which is installed in the VMs offered in the Azure Marketplace is not the collation SAP NetWeaver requires the SQL Server instance to run.</span></span> <span data-ttu-id="6f87f-700">No entanto, você pode alterar o agrupamento com as instruções na seção a seguir.</span><span class="sxs-lookup"><span data-stu-id="6f87f-700">You can change the collation though with the directions in the following section.</span></span>

#### <a name="changing-the-sql-server-collation-of-a-microsoft-windowssql-server-vm"></a><span data-ttu-id="6f87f-701">Alterando o agrupamento do SQL Server de uma VM Microsoft Windows/SQL Server</span><span class="sxs-lookup"><span data-stu-id="6f87f-701">Changing the SQL Server Collation of a Microsoft Windows/SQL Server VM</span></span>
<span data-ttu-id="6f87f-702">Como as imagens do SQL Server no Azure Marketplace não estão configuradas para usar o agrupamento que é exigido pelos aplicativos SAP NetWeaver, elas precisam ser alteradas imediatamente após a implantação.</span><span class="sxs-lookup"><span data-stu-id="6f87f-702">Since the SQL Server images in the Azure Marketplace are not set up to use the collation which is required by SAP NetWeaver applications, it needs to be changed immediately after the deployment.</span></span> <span data-ttu-id="6f87f-703">Para o SQL Server 2012, isso pode ser feito com as etapas a seguir assim que a VM tiver sido implantada e um administrador for capaz de fazer logon nela:</span><span class="sxs-lookup"><span data-stu-id="6f87f-703">For SQL Server 2012, this can be done with the following steps as soon as the VM has been deployed and an administrator is able to log into the deployed VM:</span></span>

* <span data-ttu-id="6f87f-704">Abra uma janela de comando do Windows ‘como administrador’.</span><span class="sxs-lookup"><span data-stu-id="6f87f-704">Open a Windows Command Window ‘as administrator’.</span></span>
* <span data-ttu-id="6f87f-705">Altere o diretório para C:\Arquivos de Programas\Microsoft SQL Server\110\Setup Bootstrap\SQLServer2012.</span><span class="sxs-lookup"><span data-stu-id="6f87f-705">Change the directory to C:\Program Files\Microsoft SQL Server\110\Setup Bootstrap\SQLServer2012.</span></span>
* <span data-ttu-id="6f87f-706">Execute o comando: Setup.exe /QUIET /ACTION=REBUILDDATABASE /INSTANCENAME=MSSQLSERVER /SQLSYSADMINACCOUNTS=`<local_admin_account_name`> /SQLCOLLATION=SQL_Latin1_General_Cp850_BIN2</span><span class="sxs-lookup"><span data-stu-id="6f87f-706">Execute the command: Setup.exe /QUIET /ACTION=REBUILDDATABASE /INSTANCENAME=MSSQLSERVER /SQLSYSADMINACCOUNTS=`<local_admin_account_name`> /SQLCOLLATION=SQL_Latin1_General_Cp850_BIN2</span></span>   
  * <span data-ttu-id="6f87f-707">`<local_admin_account_name`> é a conta que foi definida como a conta de administrador ao implantar a VM pela primeira vez por meio da galeria.</span><span class="sxs-lookup"><span data-stu-id="6f87f-707">`<local_admin_account_name`> is the account which was defined as the administrator account when deploying the VM for the first time through the gallery.</span></span>

<span data-ttu-id="6f87f-708">O processo deve levar apenas alguns minutos.</span><span class="sxs-lookup"><span data-stu-id="6f87f-708">The process should only take a few minutes.</span></span> <span data-ttu-id="6f87f-709">Para verificar se a etapa terminou com o resultado correto, execute as seguintes etapas:</span><span class="sxs-lookup"><span data-stu-id="6f87f-709">In order to make sure whether the step ended up with the correct result, please perform the following steps:</span></span>

* <span data-ttu-id="6f87f-710">Abra o SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="6f87f-710">Open SQL Server Management Studio.</span></span>
* <span data-ttu-id="6f87f-711">Abra uma Janela de Consulta.</span><span class="sxs-lookup"><span data-stu-id="6f87f-711">Open a Query Window.</span></span>
* <span data-ttu-id="6f87f-712">Execute o comando sp_helpsort no banco de dados mestre do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="6f87f-712">Execute the command sp_helpsort in the SQL Server master database.</span></span>

<span data-ttu-id="6f87f-713">O resultado desejado deve ter uma aparência semelhante a essa:</span><span class="sxs-lookup"><span data-stu-id="6f87f-713">The desired result should look like:</span></span>

    Latin1-General, binary code point comparison sort for Unicode Data, SQL Server Sort Order 40 on Code Page 850 for non-Unicode Data

<span data-ttu-id="6f87f-714">Se esse não for o resultado, INTERROMPA a implantação do SAP e investigue por que o comando de instalação não funcionou conforme o esperado.</span><span class="sxs-lookup"><span data-stu-id="6f87f-714">If this is not the result, STOP deploying SAP and investigate why the setup command did not work as expected.</span></span> <span data-ttu-id="6f87f-715">A implantação de aplicativos SAP NetWeaver na instância do SQL Server com páginas de código do SQL Server diferentes da mencionada acima **NÃO** tem suporte.</span><span class="sxs-lookup"><span data-stu-id="6f87f-715">Deployment of SAP NetWeaver applications onto SQL Server instance with different SQL Server codepages than the one mentioned above is **NOT** supported.</span></span>

### <a name="sql-server-high-availability-for-sap-in-azure"></a><span data-ttu-id="6f87f-716">Alta disponibilidade do SQL Server para SAP no Azure</span><span class="sxs-lookup"><span data-stu-id="6f87f-716">SQL Server High-Availability for SAP in Azure</span></span>
<span data-ttu-id="6f87f-717">Conforme mencionado anteriormente neste artigo, não há nenhuma possibilidade de criar um armazenamento compartilhado, o que é necessário para o uso da funcionalidade de alta disponibilidade do SQL Server mais antigo.</span><span class="sxs-lookup"><span data-stu-id="6f87f-717">As mentioned earlier in this paper, there is no possibility to create shared storage which is necessary for the usage of the oldest SQL Server high availability functionality.</span></span> <span data-ttu-id="6f87f-718">Essa funcionalidade instalaria duas ou mais instâncias do SQL Server em um WSFC (Cluster de Failover do Windows Server) usando um disco compartilhado para os bancos de dados do usuário (e, eventualmente, tempdb).</span><span class="sxs-lookup"><span data-stu-id="6f87f-718">This functionality would install two or more SQL Server instances in a Windows Server Failover Cluster (WSFC) using a shared disk for the user databases (and eventually tempdb).</span></span> <span data-ttu-id="6f87f-719">Esse é o método de alta disponibilidade standard de longa data, que também tem suporte pelo SAP.</span><span class="sxs-lookup"><span data-stu-id="6f87f-719">This is the long time standard high availability method which also is supported by SAP.</span></span> <span data-ttu-id="6f87f-720">Como o Azure não dá suporte ao armazenamento compartilhado, as configurações de alta disponibilidade do SQL Server com uma configuração de cluster de disco compartilhado não podem ser realizadas.</span><span class="sxs-lookup"><span data-stu-id="6f87f-720">Because Azure doesn’t support shared storage, SQL Server high availability configurations with a shared disk cluster configuration cannot be realized.</span></span> <span data-ttu-id="6f87f-721">No entanto, muitos outros métodos de alta disponibilidade ainda são possíveis e são descritos nas seções a seguir.</span><span class="sxs-lookup"><span data-stu-id="6f87f-721">However, many other high availability methods are still possible and are described in the following sections.</span></span>

<span data-ttu-id="6f87f-722">[comment]: <> (O artigo ainda está fazendo referência ao ASM)</span><span class="sxs-lookup"><span data-stu-id="6f87f-722">[comment]: <> (Article is still refering to ASM)</span></span>
<span data-ttu-id="6f87f-723">[comment]: <> (Antes de ler as diferentes tecnologias de alta disponibilidade específicas utilizáveis para o SQL Server no Azure, há um documento muito bom que fornece mais detalhes e ponteiros [aqui][virtual-machines-sql-server-high-availability-and-disaster-recovery-solutions])</span><span class="sxs-lookup"><span data-stu-id="6f87f-723">[comment]: <> (Before reading the different specific high availability technologies usable for SQL Server in Azure, there is a very good document which gives more details and pointers [here][virtual-machines-sql-server-high-availability-and-disaster-recovery-solutions])</span></span>

#### <a name="sql-server-log-shipping"></a><span data-ttu-id="6f87f-724">Envio de logs do SQL Server</span><span class="sxs-lookup"><span data-stu-id="6f87f-724">SQL Server Log Shipping</span></span>
<span data-ttu-id="6f87f-725">Um dos métodos de HA (alta disponibilidade) é o envio de logs do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="6f87f-725">One of the methods of high availability (HA) is SQL Server Log Shipping.</span></span> <span data-ttu-id="6f87f-726">Se as VMs que participam da configuração de HA têm uma resolução de nome funcionando, não há problema e a configuração no Azure não será diferente de nenhuma configuração feita localmente.</span><span class="sxs-lookup"><span data-stu-id="6f87f-726">If the VMs participating in the HA configuration have working name resolution, there is no problem and the setup in Azure will not differ from any setup that is done on-premises.</span></span> <span data-ttu-id="6f87f-727">Não é recomendável confiar apenas na resolução de IP.</span><span class="sxs-lookup"><span data-stu-id="6f87f-727">It is not recommended to rely on IP resolution only.</span></span> <span data-ttu-id="6f87f-728">No que diz respeito à configuração do envio de logs e os princípios em torno dele, consulte esta documentação:</span><span class="sxs-lookup"><span data-stu-id="6f87f-728">In regards to setting up Log Shipping and the principles around Log Shipping please check this documentation:</span></span>

<span data-ttu-id="6f87f-729"><https://technet.microsoft.com/library/ms187103.aspx></span><span class="sxs-lookup"><span data-stu-id="6f87f-729"><https://technet.microsoft.com/library/ms187103.aspx></span></span>

<span data-ttu-id="6f87f-730">Para realmente atingir a alta disponibilidade, é necessário implantar as VMs que estão dentro de tal configuração de envio de logs dentro do mesmo conjunto de disponibilidade do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-730">In order to really achieve any high availability, one needs to deploy the VMs which are within such a Log Shipping configuration to be within the same Azure Availability Set.</span></span>

#### <a name="database-mirroring"></a><span data-ttu-id="6f87f-731">Espelhamento de banco de dados</span><span class="sxs-lookup"><span data-stu-id="6f87f-731">Database Mirroring</span></span>
<span data-ttu-id="6f87f-732">O espelhamento de banco de dados conforme o que tem suporte pelo SAP (consulte a Nota SAP [965908]) se baseia na definição de um parceiro de failover na cadeia de conexão SAP.</span><span class="sxs-lookup"><span data-stu-id="6f87f-732">Database Mirroring as supported by SAP (see SAP Note [965908]) relies on defining a failover partner in the SAP connection string.</span></span> <span data-ttu-id="6f87f-733">Para os casos entre instalações, assumimos que as duas VMs estão no mesmo domínio e que o contexto de usuário sob o qual as duas instâncias do SQL Server são executados é o usuário de domínio e tem privilégios suficientes nas duas instâncias do SQL Server envolvidas.</span><span class="sxs-lookup"><span data-stu-id="6f87f-733">For the Cross-Premises cases, we assume that the two VMs are in the same domain and that the user context the two SQL Server instances are running under are domain users as well and have sufficient privileges in the two SQL Server instances involved.</span></span> <span data-ttu-id="6f87f-734">Portanto, a configuração do espelhamento de banco de dados no Azure não difere entre uma configuração/instalação local típica.</span><span class="sxs-lookup"><span data-stu-id="6f87f-734">Therefore, the setup of Database Mirroring in Azure does not differ between a typical on-premises setup/configuration.</span></span>

<span data-ttu-id="6f87f-735">A partir de implantações somente em nuvem, o método mais fácil é ter outra configuração de domínio no Azure para que essas VMs de DBMS (e VMs do SAP idealmente dedicadas) dentro de um domínio.</span><span class="sxs-lookup"><span data-stu-id="6f87f-735">As of Cloud-Only deployments, the easiest method is to have another domain setup in Azure to have those DBMS VMs (and ideally dedicated SAP VMs) within one domain.</span></span>

<span data-ttu-id="6f87f-736">Se um domínio não for possível, também será possível usar certificados para pontos de extremidade de espelhamento de banco de dados, conforme descrito aqui: <https://technet.microsoft.com/library/ms191477.aspx></span><span class="sxs-lookup"><span data-stu-id="6f87f-736">If a domain is not possible, one can also use certificates for the database mirroring endpoints as described here: <https://technet.microsoft.com/library/ms191477.aspx></span></span>

<span data-ttu-id="6f87f-737">Um tutorial para configurar o Espelhamento do Banco de Dados no Azure pode ser encontrado aqui: <https://technet.microsoft.com/library/ms189852.aspx></span><span class="sxs-lookup"><span data-stu-id="6f87f-737">A tutorial to set-up Database Mirroring in Azure can be found here: <https://technet.microsoft.com/library/ms189852.aspx></span></span>

#### <a name="alwayson"></a><span data-ttu-id="6f87f-738">AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="6f87f-738">AlwaysOn</span></span>
<span data-ttu-id="6f87f-739">Como AlwaysOn tem suporte para o SAP local (consulte a Nota SAP [1772688]), ele tem suporte para ser usado em combinação com o SAP no Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-739">As AlwaysOn is supported for SAP on-premises (see SAP Note [1772688]), it is supported to be used in combination with SAP in Azure.</span></span> <span data-ttu-id="6f87f-740">O fato de que você não pode criar discos compartilhados no Azure não significa que não seja possível criar uma configuração de WSFC (Cluster de Failover do Windows Server) do AlwaysOn entre diferentes VMs.</span><span class="sxs-lookup"><span data-stu-id="6f87f-740">The fact that you are not able to create shared disks in Azure doesn’t mean that one can’t create an AlwaysOn Windows Server Failover Cluster (WSFC) configuration between different VMs.</span></span> <span data-ttu-id="6f87f-741">Isso significa apenas que você não tem a possibilidade de usar um disco compartilhado como um quórum na configuração do cluster.</span><span class="sxs-lookup"><span data-stu-id="6f87f-741">It only means that you do not have the possibility to use a shared disk as a quorum in the cluster configuration.</span></span> <span data-ttu-id="6f87f-742">Portanto, você pode criar uma configuração de WSFC do AlwaysOn no Azure e simplesmente não selecionar o tipo de quórum que usa o disco compartilhado.</span><span class="sxs-lookup"><span data-stu-id="6f87f-742">Hence you can build an AlwaysOn WSFC configuration in Azure and simply not select the quorum type that utilizes shared disk.</span></span> <span data-ttu-id="6f87f-743">O ambiente do Azure em que essa VMs são implantadas deve resolver as VMs por nome e as VMs devem estar no mesmo domínio.</span><span class="sxs-lookup"><span data-stu-id="6f87f-743">The Azure environment those VMs are deployed in should resolve the VMs by name and the VMs should be in the same domain.</span></span> <span data-ttu-id="6f87f-744">Isso é verdadeiro para implantações somente do Azure e entre instalações.</span><span class="sxs-lookup"><span data-stu-id="6f87f-744">This is true for Azure only and Cross-Premises deployments.</span></span> <span data-ttu-id="6f87f-745">Há algumas considerações especiais para implantar o ouvinte de grupo de disponibilidade do SQL Server (não deve ser confundido com o conjunto de disponibilidade do Azure) uma vez que o Azure neste momento não permite simplesmente criar um objeto AD/DNS como é possível localmente.</span><span class="sxs-lookup"><span data-stu-id="6f87f-745">There are some special considerations around deploying the SQL Server Availability Group Listener (not to be confused with the Azure Availability Set) since Azure at this point in time does not allow to simply create an AD/DNS object as it is possible on-premises.</span></span> <span data-ttu-id="6f87f-746">Portanto, algumas etapas de instalação diferentes são necessárias para superar o comportamento específico do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-746">Therefore, some different installation steps are necessary to overcome the specific behavior of Azure.</span></span>

<span data-ttu-id="6f87f-747">Algumas considerações sobre o uso de um ouvinte de grupo de disponibilidade são:</span><span class="sxs-lookup"><span data-stu-id="6f87f-747">Some considerations using an Availability Group Listener are:</span></span>

* <span data-ttu-id="6f87f-748">O uso de um ouvinte de grupo de disponibilidade é possível apenas com o Windows Server 2012 ou Windows Server 2012 R2 como o SO convidado da VM.</span><span class="sxs-lookup"><span data-stu-id="6f87f-748">Using an Availability Group Listener is only possible with Windows Server 2012 or Windows Server 2012 R2 as guest OS of the VM.</span></span> <span data-ttu-id="6f87f-749">Para o Windows Server 2012, você precisa se certificar de que o patch foi aplicado: <https://support.microsoft.com/kb/2854082></span><span class="sxs-lookup"><span data-stu-id="6f87f-749">For Windows Server 2012 you need to make sure that this patch is applied: <https://support.microsoft.com/kb/2854082></span></span>
* <span data-ttu-id="6f87f-750">Para o Windows Server 2008 R2 esse patch não existe e AlwaysOn precisaria ser usado da mesma maneira que o espelhamento de banco de dados especificando um parceiro de failover na cadeia de conexões (feito por meio do parâmetro default.pfl do SAP dbs/mss/server, consulte a Nota SAP [965908]).</span><span class="sxs-lookup"><span data-stu-id="6f87f-750">For Windows Server 2008 R2 this patch does not exist and AlwaysOn would need to be used in the same manner as Database Mirroring by specifying a failover partner in the connections string (done through the SAP default.pfl parameter dbs/mss/server – see SAP Note [965908]).</span></span>
* <span data-ttu-id="6f87f-751">Ao usar um ouvinte de grupo de disponibilidade, as VMs de banco de dados precisam estar conectadas a um balanceador de carga dedicado.</span><span class="sxs-lookup"><span data-stu-id="6f87f-751">When using an Availability Group Listener, the Database VMs need to be connected to a dedicated Load Balancer.</span></span> <span data-ttu-id="6f87f-752">A resolução de nomes em implantações somente em nuvem exigiria que todas as VMs do sistema SAP (servidores de aplicativo, servidor DBMS e servidor (A)SCS) estivessem na mesma rede virtual ou exigiria a manutenção do arquivo etc\host da camada de aplicativo SAP para obter os nomes de VM das VMs do SQL Server resolvido.</span><span class="sxs-lookup"><span data-stu-id="6f87f-752">Name resolution in Cloud-Only deployments would either require all VMs of an SAP system (application servers, DBMS server and (A)SCS server) are in the same virtual network or would require from an SAP application layer the maintenance of the etc\host file in order to get the VM names of the SQL Server VMs resolved.</span></span> <span data-ttu-id="6f87f-753">Para evitar que o Azure atribua novos endereços IP em casos em que ambas as VMs por acaso sejam desligadas, deve-se atribuir endereços IP estáticos aos adaptadores de rede das VMs na configuração do AlwaysOn (a definição de um endereço IP estático é descrita [neste][virtual-networks-reserved-private-ip] artigo)</span><span class="sxs-lookup"><span data-stu-id="6f87f-753">In order to avoid that Azure is assigning new IP addresses in cases where both VMs incidentally are shutdown, one should assign static IP addresses to the network interfaces of those VMs in the AlwaysOn configuration (defining a static IP address is described in [this][virtual-networks-reserved-private-ip] article)</span></span>

<span data-ttu-id="6f87f-754">[comment]: <> (Blogs antigos)</span><span class="sxs-lookup"><span data-stu-id="6f87f-754">[comment]: <> (Old blogs)</span></span>
<span data-ttu-id="6f87f-755">[comment]: <> (<https://blogs.msdn.com/b/alwaysonpro/archive/2014/08/29/recommendations-and-best-practices-when-deploying-sql-server-alwayson-availability-groups-in-windows-azure-iaas.aspx>, <https://blogs.technet.com/b/rmilne/archive/2015/07/27/how-to-set-static-ip-on-azure-vm.aspx>)</span><span class="sxs-lookup"><span data-stu-id="6f87f-755">[comment]: <> (<https://blogs.msdn.com/b/alwaysonpro/archive/2014/08/29/recommendations-and-best-practices-when-deploying-sql-server-alwayson-availability-groups-in-windows-azure-iaas.aspx>, <https://blogs.technet.com/b/rmilne/archive/2015/07/27/how-to-set-static-ip-on-azure-vm.aspx>)</span></span>
* <span data-ttu-id="6f87f-756">Há etapas especiais necessárias ao criar a configuração de cluster de WSFC em que o cluster precisa de um endereço IP especial atribuído, pois o Azure com sua funcionalidade atual atribuiria ao nome do cluster o mesmo endereço IP que o nó em que o cluster foi criado.</span><span class="sxs-lookup"><span data-stu-id="6f87f-756">There are special steps required when building the WSFC cluster configuration where the cluster needs a special IP address assigned, because Azure with its current functionality would assign the cluster name the same IP address as the node the cluster is created on.</span></span> <span data-ttu-id="6f87f-757">Isso significa que uma etapa manual deve ser executada para atribuir um endereço IP diferente ao cluster.</span><span class="sxs-lookup"><span data-stu-id="6f87f-757">This means a manual step must be performed to assign a different IP address to the cluster.</span></span>
* <span data-ttu-id="6f87f-758">O ouvinte do grupo de disponibilidade será criado no Azure com pontos de extremidade TCP/IP que são atribuídos às VMs executando as réplicas primária e secundária do grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="6f87f-758">The Availability Group Listener is going to be created in Azure with TCP/IP endpoints which are assigned to the VMs running the primary and secondary replicas of the Availability group.</span></span>
* <span data-ttu-id="6f87f-759">Pode haver a necessidade de proteger esses pontos de extremidade com ACLs.</span><span class="sxs-lookup"><span data-stu-id="6f87f-759">There might be a need to secure these endpoints with ACLs.</span></span>

<span data-ttu-id="6f87f-760">[comment]: <> (Blog antigo TODO)</span><span class="sxs-lookup"><span data-stu-id="6f87f-760">[comment]: <> (TODO old blog)</span></span>
<span data-ttu-id="6f87f-761">[comment]: <> (As necessidades e etapas detalhadas de instalação de uma configuração AlwaysOn no Azure são mais bem entendidas com o passo a passo do tutorial disponível [aqui][virtual-machines-windows-classic-ps-sql-alwayson-availability-groups])</span><span class="sxs-lookup"><span data-stu-id="6f87f-761">[comment]: <> (The detailed steps and necessities of installing an AlwaysOn configuration on Azure are best experienced when walking through the tutorial available [here][virtual-machines-windows-classic-ps-sql-alwayson-availability-groups])</span></span>
<span data-ttu-id="6f87f-762">[comment]: <> (Instalação pré-configurada do AlwaysOn por meio da galeria do Azure <https://blogs.technet.com/b/dataplatforminsider/archive/2014/08/25/sql-server-alwayson-offering-in-microsoft-azure-portal-gallery.aspx>)</span><span class="sxs-lookup"><span data-stu-id="6f87f-762">[comment]: <> (Preconfigured AlwaysOn setup via the Azure gallery <https://blogs.technet.com/b/dataplatforminsider/archive/2014/08/25/sql-server-alwayson-offering-in-microsoft-azure-portal-gallery.aspx>)</span></span>
<span data-ttu-id="6f87f-763">[comment]: <> (A criação de um Ouvinte do Grupo de Disponibilidade é mais bem descrita [neste][virtual-machines-windows-classic-ps-sql-int-listener] tutorial)</span><span class="sxs-lookup"><span data-stu-id="6f87f-763">[comment]: <> (Creating an Availability Group Listener is best described in [this][virtual-machines-windows-classic-ps-sql-int-listener] tutorial)</span></span>
<span data-ttu-id="6f87f-764">[comment]: <> (A proteção dos pontos de extremidade da rede com ACLs é explicada aqui:)</span><span class="sxs-lookup"><span data-stu-id="6f87f-764">[comment]: <> (Securing network endpoints with ACLs are explained best here:)</span></span>
<span data-ttu-id="6f87f-765">[comment]: <> (*    <https://michaelwasham.com/windows-azure-powershell-reference-guide/network-access-control-list-capability-in-windows-azure-powershell/>)</span><span class="sxs-lookup"><span data-stu-id="6f87f-765">[comment]: <> (*    <https://michaelwasham.com/windows-azure-powershell-reference-guide/network-access-control-list-capability-in-windows-azure-powershell/>)</span></span>
<span data-ttu-id="6f87f-766">[comment]: <> (*    <https://blogs.technet.com/b/heyscriptingguy/archive/2013/08/31/weekend-scripter-creating-acls-for-windows-azure-endpoints-part-1-of-2.aspx> )</span><span class="sxs-lookup"><span data-stu-id="6f87f-766">[comment]: <> (*    <https://blogs.technet.com/b/heyscriptingguy/archive/2013/08/31/weekend-scripter-creating-acls-for-windows-azure-endpoints-part-1-of-2.aspx> )</span></span>
<span data-ttu-id="6f87f-767">[comment]: <> (*    <https://blogs.technet.com/b/heyscriptingguy/archive/2013/09/01/weekend-scripter-creating-acls-for-windows-azure-endpoints-part-2-of-2.aspx>)  </span><span class="sxs-lookup"><span data-stu-id="6f87f-767">[comment]: <> (*    <https://blogs.technet.com/b/heyscriptingguy/archive/2013/09/01/weekend-scripter-creating-acls-for-windows-azure-endpoints-part-2-of-2.aspx>)  </span></span>
<span data-ttu-id="6f87f-768">[comment]: <> (*    <https://blogs.technet.com/b/heyscriptingguy/archive/2013/09/18/creating-acls-for-windows-azure-endpoints.aspx>)</span><span class="sxs-lookup"><span data-stu-id="6f87f-768">[comment]: <> (*    <https://blogs.technet.com/b/heyscriptingguy/archive/2013/09/18/creating-acls-for-windows-azure-endpoints.aspx>)</span></span>

<span data-ttu-id="6f87f-769">É possível implantar um grupo de disponibilidade AlwaysOn do SQL Server em diferentes regiões do Azure também.</span><span class="sxs-lookup"><span data-stu-id="6f87f-769">It is possible to deploy a SQL Server AlwaysOn Availability Group over different Azure Regions as well.</span></span> <span data-ttu-id="6f87f-770">Essa funcionalidade aproveitará a conectividade Vnet a Vnet do Azure ([mais detalhes][virtual-networks-configure-vnet-to-vnet-connection]).</span><span class="sxs-lookup"><span data-stu-id="6f87f-770">This functionality will leverage the Azure VNet-to-Vnet connectivity ([more details][virtual-networks-configure-vnet-to-vnet-connection]).</span></span>

<span data-ttu-id="6f87f-771">[comment]: <> (Blog antigo TODO)</span><span class="sxs-lookup"><span data-stu-id="6f87f-771">[comment]: <> (TODO old blog)</span></span>
<span data-ttu-id="6f87f-772">[comment]: <> (A configuração dos Grupos de Disponibilidade AlwaysOn do SQL Server em tal cenário é descrita aqui: <https://blogs.technet.com/b/dataplatforminsider/archive/2014/06/19/sql-server-alwayson-availability-groups-supported-between-microsoft-azure-regions.aspx>.)</span><span class="sxs-lookup"><span data-stu-id="6f87f-772">[comment]: <> (The setup of SQL Server AlwaysOn Availability Groups in such a scenario is described here: <https://blogs.technet.com/b/dataplatforminsider/archive/2014/06/19/sql-server-alwayson-availability-groups-supported-between-microsoft-azure-regions.aspx>.)</span></span>

#### <a name="summary-on-sql-server-high-availability-in-azure"></a><span data-ttu-id="6f87f-773">Resumo da alta disponibilidade do SQL Server no Azure</span><span class="sxs-lookup"><span data-stu-id="6f87f-773">Summary on SQL Server High Availability in Azure</span></span>
<span data-ttu-id="6f87f-774">Devido ao fato de que o armazenamento do Azure está protegendo o conteúdo, há um motivo a menos para insistir em uma imagem de espera ativa.</span><span class="sxs-lookup"><span data-stu-id="6f87f-774">Given the fact that Azure Storage is protecting the content, there is one less reason to insist on a hot-standby image.</span></span> <span data-ttu-id="6f87f-775">Isso significa que seu cenário de alta disponibilidade precisa proteger apenas contra os seguintes casos:</span><span class="sxs-lookup"><span data-stu-id="6f87f-775">This means your High Availability scenario needs to only protect against the following cases:</span></span>

* <span data-ttu-id="6f87f-776">Indisponibilidade da VM como um todo devido à manutenção no cluster de servidores no Azure ou por outros motivos</span><span class="sxs-lookup"><span data-stu-id="6f87f-776">Unavailability of the VM as a whole due to maintenance on the server cluster in Azure or other reasons</span></span>
* <span data-ttu-id="6f87f-777">Problemas de software na instância do SQL Server</span><span class="sxs-lookup"><span data-stu-id="6f87f-777">Software issues in the SQL Server instance</span></span>
* <span data-ttu-id="6f87f-778">Proteção contra erros manuais em que os dados são excluídos e a recuperação pontual é necessária</span><span class="sxs-lookup"><span data-stu-id="6f87f-778">Protecting from manual error where data gets deleted and point-in-time recovery is needed</span></span>

<span data-ttu-id="6f87f-779">Examinando as tecnologias correspondentes, é possível argumentar que os dois primeiros casos podem ser abrangidos pelo espelhamento de banco de dados ou o AlwaysOn, enquanto o terceiro caso pode ser abrangido apenas pelo envio de logs.</span><span class="sxs-lookup"><span data-stu-id="6f87f-779">Looking at matching technologies one can argue that the first two cases can be covered by Database Mirroring or AlwaysOn, whereas the third case only can be covered by Log-Shipping.</span></span>

<span data-ttu-id="6f87f-780">Você precisará balancear a configuração mais complexa do AlwaysOn, comparado ao espelhamento de banco de dados, com as vantagens do AlwaysOn.</span><span class="sxs-lookup"><span data-stu-id="6f87f-780">You will need to balance the more complex setup of AlwaysOn, compared to Database Mirroring, with the advantages of AlwaysOn.</span></span> <span data-ttu-id="6f87f-781">É possível listar essas vantagens como:</span><span class="sxs-lookup"><span data-stu-id="6f87f-781">Those advantages can be listed like:</span></span>

* <span data-ttu-id="6f87f-782">Replicas secundárias legíveis.</span><span class="sxs-lookup"><span data-stu-id="6f87f-782">Readable secondary replicas.</span></span>
* <span data-ttu-id="6f87f-783">Backups de réplicas secundárias.</span><span class="sxs-lookup"><span data-stu-id="6f87f-783">Backups from secondary replicas.</span></span>
* <span data-ttu-id="6f87f-784">Melhor escalabilidade.</span><span class="sxs-lookup"><span data-stu-id="6f87f-784">Better scalability.</span></span>
* <span data-ttu-id="6f87f-785">Mais de uma réplica secundária.</span><span class="sxs-lookup"><span data-stu-id="6f87f-785">More than one secondary replicas.</span></span>

### <span data-ttu-id="6f87f-786"><a name="9053f720-6f3b-4483-904d-15dc54141e30"></a>Resumo do SQL Server para SAP no Azure geral</span><span class="sxs-lookup"><span data-stu-id="6f87f-786"><a name="9053f720-6f3b-4483-904d-15dc54141e30"></a>General SQL Server for SAP on Azure Summary</span></span>
<span data-ttu-id="6f87f-787">Há muitas recomendações neste guia e recomendamos que você o leia mais de uma vez antes de planejar sua implantação do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-787">There are many recommendations in this guide and we recommend you read it more than once before planning your Azure deployment.</span></span> <span data-ttu-id="6f87f-788">Em geral, no entanto, não se esqueça de seguir os dez principais pontos específicos do DBMS no Azure gerais:</span><span class="sxs-lookup"><span data-stu-id="6f87f-788">In general, though, be sure to follow the top ten general DBMS on Azure specific points:</span></span>

<span data-ttu-id="6f87f-789">[comment]: <> (Taxa de transferência superior a 2.3 do que o que? De um VHD?)</span><span class="sxs-lookup"><span data-stu-id="6f87f-789">[comment]: <> (2.3 higher throughput than what? Than one VHD?)</span></span>
1. <span data-ttu-id="6f87f-790">Use a versão mais recente do DBMS, como SQL Server 2014, que tem mais vantagens no Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-790">Use the latest DBMS release, like SQL Server 2014, that has the most advantages in Azure.</span></span> <span data-ttu-id="6f87f-791">Para o SQL Server, esse é o SQL Server 2012 SP1 CU4, que inclui o recurso de backup no armazenamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-791">For SQL Server, this is SQL Server 2012 SP1 CU4 which would include the feature of backing up against Azure Storage.</span></span> <span data-ttu-id="6f87f-792">No entanto, em conjunto com o SAP, recomendamos pelo menos o SQL Server 2014 SP1 CU1 ou o SQL Server 2012 SP2 e o CU mais recente.</span><span class="sxs-lookup"><span data-stu-id="6f87f-792">However, in conjunction with SAP we would recommend at least SQL Server 2014 SP1 CU1 or SQL Server 2012 SP2 and the latest CU.</span></span>
2. <span data-ttu-id="6f87f-793">Planeje cuidadosamente sua estrutura de sistema da SAP no Azure para balancear o layout do arquivo de dados e as restrições do Azure:</span><span class="sxs-lookup"><span data-stu-id="6f87f-793">Carefully plan your SAP system landscape in Azure to balance the data file layout and Azure restrictions:</span></span>
   * <span data-ttu-id="6f87f-794">Não tenha muitos VHDs, mas tenha espaço suficiente para garantir que você pode atingir seus IOPS necessários.</span><span class="sxs-lookup"><span data-stu-id="6f87f-794">Don’t have too many VHDs, but have enough to ensure you can reach your required IOPS.</span></span>
   * <span data-ttu-id="6f87f-795">Lembre-se de que os IOPS também são limitados por conta de armazenamento do Azure e que as contas de armazenamento são limitadas em cada assinatura do Azure ([mais detalhes][azure-subscription-service-limits]).</span><span class="sxs-lookup"><span data-stu-id="6f87f-795">Remember that IOPS are also limited per Azure Storage Account and that Storage Accounts are limited within each Azure subscription ([more details][azure-subscription-service-limits]).</span></span>
   * <span data-ttu-id="6f87f-796">Distribua entre VHDs apenas se você precisar obter uma maior taxa de transferência.</span><span class="sxs-lookup"><span data-stu-id="6f87f-796">Only stripe across VHDs if you need to achieve a higher throughput.</span></span>
3. <span data-ttu-id="6f87f-797">Nunca instale software ou coloque quaisquer arquivos que exijam persistência na unidade D:\, uma vez que ela não é permanente e tudo nessa unidade será perdido em uma reinicialização do Windows.</span><span class="sxs-lookup"><span data-stu-id="6f87f-797">Never install software or put any files that require persistence on the D:\ drive as it is non-permanent and anything on this drive will be lost at a Windows reboot.</span></span>
4. <span data-ttu-id="6f87f-798">Não use o caching de VHD do Azure para o Armazenamento Standard do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-798">Don’t use Azure VHD caching for Azure Standard Storage.</span></span>
5. <span data-ttu-id="6f87f-799">Não use contas de armazenamento com replicação geográfica do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-799">Don’t use Azure geo-replicated Storage Accounts.</span></span>  <span data-ttu-id="6f87f-800">Use Localmente Redundante para cargas de trabalho do DBMS.</span><span class="sxs-lookup"><span data-stu-id="6f87f-800">Use Locally Redundant for DBMS workloads.</span></span>
6. <span data-ttu-id="6f87f-801">Use a solução de HA/DR do seu fornecedor do DBMS para replicar dados do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="6f87f-801">Use your DBMS vendor’s HA/DR solution to replicate database data.</span></span>
7. <span data-ttu-id="6f87f-802">Sempre use a resolução de nome, não confie em endereços IP.</span><span class="sxs-lookup"><span data-stu-id="6f87f-802">Always use Name Resolution, don’t rely on IP addresses.</span></span>
8. <span data-ttu-id="6f87f-803">Use a maior compactação de banco de dados possível.</span><span class="sxs-lookup"><span data-stu-id="6f87f-803">Use the highest database compression possible.</span></span> <span data-ttu-id="6f87f-804">Para o SQL Server, essa é a compactação de página.</span><span class="sxs-lookup"><span data-stu-id="6f87f-804">For SQL Server this is page compression.</span></span>
9. <span data-ttu-id="6f87f-805">Tenha cuidado ao usar imagens do SQL Server do Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="6f87f-805">Be careful using SQL Server images from the Azure Marketplace.</span></span> <span data-ttu-id="6f87f-806">Se você usar o SQL Server um, deverá alterar o agrupamento de instância antes de instalar qualquer sistema SAP NetWeaver nele.</span><span class="sxs-lookup"><span data-stu-id="6f87f-806">If you use the SQL Server one, you must change the instance collation before installing any SAP NetWeaver system on it.</span></span>
10. <span data-ttu-id="6f87f-807">Instale e configure o Monitoramento de Host do SAP para Azure, conforme descrito no [Guia de Implantação][deployment-guide].</span><span class="sxs-lookup"><span data-stu-id="6f87f-807">Install and configure the SAP Host Monitoring for Azure as described in [Deployment Guide][deployment-guide].</span></span>

## <a name="specifics-to-sap-ase-on-windows"></a><span data-ttu-id="6f87f-808">Informações específicas para o SAP ASE no Windows</span><span class="sxs-lookup"><span data-stu-id="6f87f-808">Specifics to SAP ASE on Windows</span></span>
<span data-ttu-id="6f87f-809">Começando com o Microsoft Azure, você pode facilmente migrar seus aplicativos SAP ASE existentes para máquinas virtuais do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-809">Starting with Microsoft Azure, you can easily migrate your existing SAP ASE applications to Azure Virtual Machines.</span></span> <span data-ttu-id="6f87f-810">O SAP ASE em uma Máquina Virtual permite reduzir o custo total de propriedade de implantação, gerenciamento e manutenção de aplicativos de amplitude empresarial migrando facilmente esses aplicativos para o Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-810">SAP ASE in a Virtual Machine enables you to reduce the total cost of ownership of deployment, management and maintenance of enterprise breadth applications by easily migrating these applications to Microsoft Azure.</span></span> <span data-ttu-id="6f87f-811">Com o SAP ASE em uma máquina virtual do Azure, os administradores e desenvolvedores ainda podem usar as mesmas ferramentas de desenvolvimento e administração que estão disponíveis localmente.</span><span class="sxs-lookup"><span data-stu-id="6f87f-811">With SAP ASE in an Azure Virtual Machine, administrators and developers can still use the same development and administration tools that are available on-premises.</span></span>

<span data-ttu-id="6f87f-812">Há um SLA para Máquinas Virtuais do Azure que pode ser encontrado aqui: <https://azure.microsoft.com/support/legal/sla></span><span class="sxs-lookup"><span data-stu-id="6f87f-812">There is an SLA for the Azure Virtual Machines which can be found here: <https://azure.microsoft.com/support/legal/sla></span></span>

<span data-ttu-id="6f87f-813">Temos certeza de que as máquinas virtuais hospedadas do Microsoft Azure terão um ótimo desempenho em comparação com outras ofertas de virtualização de nuvem pública, mas os resultados individuais podem variar.</span><span class="sxs-lookup"><span data-stu-id="6f87f-813">We are confident that Microsoft Azure hosted Virtual Machines will perform very well in comparison to other public cloud virtualization offerings, but individual results may vary.</span></span> <span data-ttu-id="6f87f-814">Os números de SAPS do dimensionamento do SAP dos diferentes SKUs de VM certificados do SAP serão fornecidos em uma Nota SAP [1928533]separada.</span><span class="sxs-lookup"><span data-stu-id="6f87f-814">SAP sizing SAPS numbers of the different SAP certified VM SKUs will be provided in a separate SAP Note [1928533].</span></span>

<span data-ttu-id="6f87f-815">As instruções e recomendações sobre o uso do armazenamento do Azure, implantação de VMs SAP ou monitoramento do SAP se aplicam às implantações do SAP ASE em conjunto com aplicativos SAP conforme indicado em todos os quatro primeiros capítulos deste documento.</span><span class="sxs-lookup"><span data-stu-id="6f87f-815">Statements and recommendations in regard to the usage of Azure Storage, Deployment of SAP VMs or SAP Monitoring apply to deployments of SAP ASE in conjunction with SAP applications as stated throughout the first four chapters of this document.</span></span>

### <a name="sap-ase-version-support"></a><span data-ttu-id="6f87f-816">Suporte de versão do SAP ASE</span><span class="sxs-lookup"><span data-stu-id="6f87f-816">SAP ASE Version Support</span></span>
<span data-ttu-id="6f87f-817">No momento, a SAP dá suporte ao SAP ASE versão 16.0 para uso com produtos SAP Business Suite.</span><span class="sxs-lookup"><span data-stu-id="6f87f-817">SAP currently supports SAP ASE version 16.0 for use with SAP Business Suite products.</span></span> <span data-ttu-id="6f87f-818">Todas as atualizações para o servidor SAP ASE ou drivers JDBC e ODBC a serem usadas com produtos SAP Business Suite são fornecidas exclusivamente pelo SAP Service Marketplace em: <https://support.sap.com/swdc>.</span><span class="sxs-lookup"><span data-stu-id="6f87f-818">All updates for SAP ASE server, or JDBC and ODBC drivers to be used with SAP Business Suite products are provided solely through the SAP Service Marketplace at: <https://support.sap.com/swdc>.</span></span>

<span data-ttu-id="6f87f-819">Para instalações locais, não baixe atualizações para o servidor SAP ASE ou para os drivers JDBC e ODBC diretamente de sites do Sybase.</span><span class="sxs-lookup"><span data-stu-id="6f87f-819">As for installations on-premises, do not download updates for the SAP ASE server, or for the JDBC and ODBC drivers directly from Sybase websites.</span></span> <span data-ttu-id="6f87f-820">Para obter informações detalhadas sobre os patches que têm suporte para uso com produtos SAP Business Suite locais e em máquinas virtuais do Azure, consulte as seguintes Notas SAP:</span><span class="sxs-lookup"><span data-stu-id="6f87f-820">For detailed information on patches which are supported for use with SAP Business Suite products on-premises and in Azure Virtual Machines see the following SAP Notes:</span></span>

* <span data-ttu-id="6f87f-821">[1590719]</span><span class="sxs-lookup"><span data-stu-id="6f87f-821">[1590719]</span></span>
* <span data-ttu-id="6f87f-822">[1973241]</span><span class="sxs-lookup"><span data-stu-id="6f87f-822">[1973241]</span></span>

<span data-ttu-id="6f87f-823">Informações gerais sobre como executar o SAP Business Suite em SAP ASE podem ser encontradas no [SCN](https://scn.sap.com/community/ase)</span><span class="sxs-lookup"><span data-stu-id="6f87f-823">General information on running SAP Business Suite on SAP ASE can be found in the [SCN](https://scn.sap.com/community/ase)</span></span>

### <a name="sap-ase-configuration-guidelines-for-sap-related-sap-ase-installations-in-azure-vms"></a><span data-ttu-id="6f87f-824">Diretrizes de configuração do SAP ASE para instalações do SAP ASE relacionadas ao SAP em VMs do Azure</span><span class="sxs-lookup"><span data-stu-id="6f87f-824">SAP ASE Configuration Guidelines for SAP related SAP ASE Installations in Azure VMs</span></span>
#### <a name="structure-of-the-sap-ase-deployment"></a><span data-ttu-id="6f87f-825">Estrutura da implantação do SAP ASE</span><span class="sxs-lookup"><span data-stu-id="6f87f-825">Structure of the SAP ASE Deployment</span></span>
<span data-ttu-id="6f87f-826">De acordo com a descrição geral, os executáveis do SAP ASE devem estar localizados ou instalados na unidade de sistema do VHD base da VM (unidade C:\).</span><span class="sxs-lookup"><span data-stu-id="6f87f-826">In accordance with the general description, SAP ASE executables should be located or installed into the system drive of the VM’s base VHD (drive c:\).</span></span> <span data-ttu-id="6f87f-827">Normalmente, a maioria dos bancos de dados de ferramentas e sistema do SAP ASE não é realmente utilizada de forma concreta pela carga de trabalho do SAP NetWeaver.</span><span class="sxs-lookup"><span data-stu-id="6f87f-827">Typically, most of the SAP ASE system and tools databases are not really leveraged hard by SAP NetWeaver workload.</span></span> <span data-ttu-id="6f87f-828">Portanto, os bancos de dados de ferramentas e sistema (mestre, modelo, saptools, sybmgmtdb, sybsystemdb) podem permanecer na unidade C: também.</span><span class="sxs-lookup"><span data-stu-id="6f87f-828">Hence the system and tools databases (master, model, saptools, sybmgmtdb, sybsystemdb) can remain on the C:\drive as well.</span></span>

<span data-ttu-id="6f87f-829">Uma exceção pode ser o banco de dados temporário que contém todas as tabelas de trabalho e tabelas temporárias criadas pelo SAP ASE, que, no caso de algumas cargas de trabalho do SAP ERP e todas do BW, pode exigir um volume de dados ou um volume de operações de E/S maior, que pode não caber no VHD base da VM original (unidade C:\).</span><span class="sxs-lookup"><span data-stu-id="6f87f-829">An exception could be the temporary database containing all work tables and temporary tables created by SAP ASE, which in case of some SAP ERP and all BW workloads might require either higher data volume or I/O operations volume which can’t fit into the original VM’s base VHD (drive c:\).</span></span>

<span data-ttu-id="6f87f-830">Dependendo da versão do SAPInst/SWPM usada para instalar o sistema, o banco de dados pode conter:</span><span class="sxs-lookup"><span data-stu-id="6f87f-830">Depending on the version of SAPInst/SWPM used to install the system, the database might contain:</span></span>

* <span data-ttu-id="6f87f-831">Um único tempdb do SAP ASE, que é criado durante a instalação do SAP ASE</span><span class="sxs-lookup"><span data-stu-id="6f87f-831">A single SAP ASE tempdb which is created when installing SAP ASE</span></span>
* <span data-ttu-id="6f87f-832">Um tempdb do SAP ASE criado pela instalação do SAP ASE e um saptempdb adicional criado pela rotina de instalação do SAP</span><span class="sxs-lookup"><span data-stu-id="6f87f-832">An SAP ASE tempdb created by installing SAP ASE and an additional saptempdb created by the SAP installation routine</span></span>
* <span data-ttu-id="6f87f-833">Um tempdb do SAP ASE criado pela instalação do SAP ASE e um tempdb adicional que foi criado manualmente (por exemplo, seguindo a Nota SAP [1752266]) para atender aos requisitos de tempdb específicos do ERP/BW</span><span class="sxs-lookup"><span data-stu-id="6f87f-833">An SAP ASE tempdb created by installing SAP ASE and an additional tempdb that has been created manually (e.g. following SAP Note [1752266]) to meet ERP/BW specific tempdb requirements</span></span>

<span data-ttu-id="6f87f-834">No caso de ERP específica ou todas as cargas de trabalho do BW faz sentido, em termos de desempenho, para manter os dispositivos de tempdb do tempdb adicionalmente criado (por SWPM ou manualmente) em uma unidade diferente C:\.</span><span class="sxs-lookup"><span data-stu-id="6f87f-834">In case of specific ERP or all BW workloads it makes sense, in regard to performance, to keep the tempdb devices of the additionally created tempdb (by SWPM or manually) on a drive other than C:\.</span></span> <span data-ttu-id="6f87f-835">Caso não exista nenhum tempdb adicional, é recomendável criar um (Nota SAP [1752266]).</span><span class="sxs-lookup"><span data-stu-id="6f87f-835">If no additional tempdb exists it is recommended to create one (SAP Note [1752266]).</span></span>

<span data-ttu-id="6f87f-836">Para esses sistemas, as etapas a seguir devem ser executadas para o tempdb criado adicionalmente:</span><span class="sxs-lookup"><span data-stu-id="6f87f-836">For such systems the following steps should be performed for the additionally created tempdb:</span></span>

* <span data-ttu-id="6f87f-837">Mova o primeiro dispositivo de tempdb para o primeiro dispositivo do banco de dados SAP</span><span class="sxs-lookup"><span data-stu-id="6f87f-837">Move the first tempdb device to the first device of the SAP database</span></span>
* <span data-ttu-id="6f87f-838">Adicione dispositivos de tempdb para cada um dos VHDs contendo um dispositivo do banco de dados SAP</span><span class="sxs-lookup"><span data-stu-id="6f87f-838">Add tempdb devices to each of the VHDs containing a devices of the SAP database</span></span>

<span data-ttu-id="6f87f-839">Essa configuração permite que o tempdb consuma mais espaço do que a unidade do sistema é capaz de fornecer.</span><span class="sxs-lookup"><span data-stu-id="6f87f-839">This configuration enables tempdb to either consume more space than the system drive is able to provide.</span></span> <span data-ttu-id="6f87f-840">Como referência, é possível verificar os tamanhos de dispositivo de tempdb em sistemas existentes que são executados localmente.</span><span class="sxs-lookup"><span data-stu-id="6f87f-840">As a reference one can check the tempdb device sizes on existing systems which run on-premises.</span></span> <span data-ttu-id="6f87f-841">Ou tal configuração habilitaria números de IOPS em relação ao tempdb que não poderiam ser fornecidos com a unidade do sistema.</span><span class="sxs-lookup"><span data-stu-id="6f87f-841">Or such a configuration would enable IOPS numbers against tempdb which cannot be provided with the system drive.</span></span> <span data-ttu-id="6f87f-842">Novamente, sistemas que são executados localmente podem ser usados para monitorar a carga de trabalho de E/S no tempdb.</span><span class="sxs-lookup"><span data-stu-id="6f87f-842">Again systems that are running on-premises can be used to monitor I/O workload against tempdb.</span></span>

<span data-ttu-id="6f87f-843">Nunca coloque nenhum dispositivo do SAP ASE na unidade D:\ da VM.</span><span class="sxs-lookup"><span data-stu-id="6f87f-843">Never put any SAP ASE devices onto the D:\ drive of the VM.</span></span> <span data-ttu-id="6f87f-844">Isso também se aplica ao tempdb, mesmo que os objetos mantidos no tempdb sejam apenas temporários.</span><span class="sxs-lookup"><span data-stu-id="6f87f-844">This also applies to the tempdb, even if the objects kept in the tempdb are only temporary.</span></span>

#### <a name="impact-of-database-compression"></a><span data-ttu-id="6f87f-845">Impacto da compactação do banco de dados</span><span class="sxs-lookup"><span data-stu-id="6f87f-845">Impact of Database Compression</span></span>
<span data-ttu-id="6f87f-846">Em configurações em que a largura de banda de E/S pode se tornar um fator limitante, todas as medidas que reduzem o IOPS podem ajudar a ampliar a carga de trabalho que pode ser executada em um cenário de IaaS como o Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-846">In configurations where I/O bandwidth can become a limiting factor, every measure which reduces IOPS might help to stretch the workload one can run in an IaaS scenario like Azure.</span></span> <span data-ttu-id="6f87f-847">Portanto, é altamente recomendável para se certificar de que a compactação do SAP ASE seja usada antes de carregar um banco de dados SAP existente no Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-847">Therefore, it is strongly recommended to make sure that SAP ASE compression is used before uploading an existing SAP database to Azure.</span></span>

<span data-ttu-id="6f87f-848">A recomendação de executar a compactação antes de carregar no Azure, se ainda não estiver implementada, é indicada por vários motivos:</span><span class="sxs-lookup"><span data-stu-id="6f87f-848">The recommendation to perform compression before uploading to Azure if it is not already implemented is given out of several reasons:</span></span>

* <span data-ttu-id="6f87f-849">A quantidade de dados a ser carregada no Azure é menor</span><span class="sxs-lookup"><span data-stu-id="6f87f-849">The amount of data to be uploaded to Azure is lower</span></span>
* <span data-ttu-id="6f87f-850">A duração da execução de compactação é menor, presumindo-se que seja possível usar um hardware mais poderoso com mais CPUs ou maior largura de banda de E/S ou menor latência de E/S local</span><span class="sxs-lookup"><span data-stu-id="6f87f-850">The duration of the compression execution is shorter assuming that one can use stronger hardware with more CPUs or higher I/O bandwidth or less I/O latency on-premises</span></span>
* <span data-ttu-id="6f87f-851">Tamanhos menores de banco de dados podem levar a menos custos de alocação de disco</span><span class="sxs-lookup"><span data-stu-id="6f87f-851">Smaller database sizes might lead to less costs for disk allocation</span></span>

<span data-ttu-id="6f87f-852">A compactação de LOB e dados funciona em uma VM hospedada em máquinas virtuais do Azure como o faz localmente.</span><span class="sxs-lookup"><span data-stu-id="6f87f-852">Data- and LOB-Compression work in a VM hosted in Azure Virtual Machines as it does on-premises.</span></span> <span data-ttu-id="6f87f-853">Para obter mais detalhes sobre como verificar se a compactação já está em uso em um banco de dados SAP ASE existente, consulte a Nota SAP [1750510].</span><span class="sxs-lookup"><span data-stu-id="6f87f-853">For more details on how to check if compression is already in use in an existing SAP ASE database please check SAP Note [1750510].</span></span>

#### <a name="using-dbacockpit-to-monitor-database-instances"></a><span data-ttu-id="6f87f-854">Usando o DBACockpit para monitorar instâncias do banco de dados</span><span class="sxs-lookup"><span data-stu-id="6f87f-854">Using DBACockpit to monitor Database Instances</span></span>
<span data-ttu-id="6f87f-855">Para sistemas SAP que estão usando o SAP ASE como plataforma de banco de dados, o DBACockpit está acessível como janelas de navegador incorporadas no DBACockpit de transação ou como Webdynpro.</span><span class="sxs-lookup"><span data-stu-id="6f87f-855">For SAP systems which are using SAP ASE as database platform, the DBACockpit is accessible as embedded browser windows in transaction DBACockpit or as Webdynpro.</span></span> <span data-ttu-id="6f87f-856">No entanto, a funcionalidade completa para monitorar e administrar o banco de dados está disponível na implementação do Webdynpro do DBACockpit apenas.</span><span class="sxs-lookup"><span data-stu-id="6f87f-856">However the full functionality for monitoring and administering the database is available in the Webdynpro implementation of the DBACockpit only.</span></span>

<span data-ttu-id="6f87f-857">Como com sistemas locais, são necessárias várias etapas para habilitar toda a funcionalidade do SAP NetWeaver usada pela implementação do Webdynpro do DBACockpit.</span><span class="sxs-lookup"><span data-stu-id="6f87f-857">As with on-premises systems several steps are required to enable all SAP NetWeaver functionality used by the Webdynpro implementation of the DBACockpit.</span></span> <span data-ttu-id="6f87f-858">Siga as instruções da Nota SAP [1245200] para habilitar o uso de webdynpros e gerar os necessários.</span><span class="sxs-lookup"><span data-stu-id="6f87f-858">Please follow SAP Note [1245200] to enable the usage of webdynpros and generate the required ones.</span></span> <span data-ttu-id="6f87f-859">Ao seguir as instruções nas notas acima, você também configurará o ICM (Gerenciador de Comunicação da Internet) junto com as portas a serem usadas para conexões http e https.</span><span class="sxs-lookup"><span data-stu-id="6f87f-859">When following the instructions in the above notes you will also configure the Internet Communication Manager (icm) along with the ports to be used for http and https connections.</span></span> <span data-ttu-id="6f87f-860">A configuração padrão para http tem esta aparência:</span><span class="sxs-lookup"><span data-stu-id="6f87f-860">The default setting for http looks like this:</span></span>

> <span data-ttu-id="6f87f-861">icm/server_port_0 = PROT=HTTP,PORT=8000,PROCTIMEOUT=600,TIMEOUT=600</span><span class="sxs-lookup"><span data-stu-id="6f87f-861">icm/server_port_0 = PROT=HTTP,PORT=8000,PROCTIMEOUT=600,TIMEOUT=600</span></span>
>
> <span data-ttu-id="6f87f-862">icm/server_port_1 = PROT=HTTPS,PORT=443$$,PROCTIMEOUT=600,TIMEOUT=600</span><span class="sxs-lookup"><span data-stu-id="6f87f-862">icm/server_port_1 = PROT=HTTPS,PORT=443$$,PROCTIMEOUT=600,TIMEOUT=600</span></span>
>
>

<span data-ttu-id="6f87f-863">e os links gerados no DBACockpit da transação serão semelhantes a este:</span><span class="sxs-lookup"><span data-stu-id="6f87f-863">and the links generated in transaction DBACockpit will look similar to this:</span></span>

> <span data-ttu-id="6f87f-864">https://`<fullyqualifiedhostname`>:44300/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="6f87f-864">https://`<fullyqualifiedhostname`>:44300/sap/bc/webdynpro/sap/dba_cockpit</span></span>
>
> <span data-ttu-id="6f87f-865">http://`<fullyqualifiedhostname`>:8000/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="6f87f-865">http://`<fullyqualifiedhostname`>:8000/sap/bc/webdynpro/sap/dba_cockpit</span></span>
>
>

<span data-ttu-id="6f87f-866">Dependendo de se e como a máquina virtual do Azure que hospeda o sistema SAP está conectado via site a site, multissite ou ExpressRoute (implantação entre instalações), você precisa se certificar de que o ICM esteja usando um nome de host totalmente qualificado que pode ser resolvido na máquina virtual da qual você está tentando abrir o DBACockpit.</span><span class="sxs-lookup"><span data-stu-id="6f87f-866">Depending on if and how the Azure Virtual Machine hosting the SAP system is connected via site-to-site, multi-site or ExpressRoute (Cross-Premises deployment) you need to make sure that ICM is using a fully qualified hostname that can be resolved on the machine where you are trying to open the DBACockpit from.</span></span> <span data-ttu-id="6f87f-867">Consulte a Nota SAP [773830] para entender como o ICM determina o nome de host totalmente qualificado de acordo com os parâmetros de perfil e defina o parâmetro icm/host_name_full explicitamente, se necessário.</span><span class="sxs-lookup"><span data-stu-id="6f87f-867">Please see SAP Note [773830] to understand how ICM determines the fully qualified host name depending on profile parameters and set parameter icm/host_name_full explicitly if required.</span></span>

<span data-ttu-id="6f87f-868">Se você implantou a VM em um cenário de somente na nuvem sem conectividade entre instalações entre locais e o Azure, você precisa definir um endereço IP público e um domainlabel.</span><span class="sxs-lookup"><span data-stu-id="6f87f-868">If you deployed the VM in a Cloud-Only scenario without cross-premises connectivity between on-premises and Azure, you need to define a public IP address and a domainlabel.</span></span> <span data-ttu-id="6f87f-869">O formato do nome DNS público da VM será assim:</span><span class="sxs-lookup"><span data-stu-id="6f87f-869">The format of the public DNS name of the VM will then look like this :</span></span>

> <span data-ttu-id="6f87f-870">`<custom domainlabel`>.`<azure region`>.cloudapp.azure.com</span><span class="sxs-lookup"><span data-stu-id="6f87f-870">`<custom domainlabel`>.`<azure region`>.cloudapp.azure.com</span></span>
>
>

<span data-ttu-id="6f87f-871">É possível encontrar mais detalhes relacionados ao nome DNS [aqui][virtual-machines-azurerm-versus-azuresm].</span><span class="sxs-lookup"><span data-stu-id="6f87f-871">More details related to the DNS name can be found [here][virtual-machines-azurerm-versus-azuresm].</span></span>

<span data-ttu-id="6f87f-872">Definindo o parâmetro de perfil do SAP icm/host_name_full para o nome DNS da VM do Azure, o link pode ser semelhante a:</span><span class="sxs-lookup"><span data-stu-id="6f87f-872">Setting the SAP profile parameter icm/host_name_full to the DNS name of the Azure VM the link might look similar to:</span></span>

> <span data-ttu-id="6f87f-873">https://mydomainlabel.westeurope.cloudapp.net:44300/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="6f87f-873">https://mydomainlabel.westeurope.cloudapp.net:44300/sap/bc/webdynpro/sap/dba_cockpit</span></span>
>
> <span data-ttu-id="6f87f-874">http://mydomainlabel.westeurope.cloudapp.net:8000/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="6f87f-874">http://mydomainlabel.westeurope.cloudapp.net:8000/sap/bc/webdynpro/sap/dba_cockpit</span></span>
>
>

<span data-ttu-id="6f87f-875">Nesse caso, você precisa se certificar de:</span><span class="sxs-lookup"><span data-stu-id="6f87f-875">In this case you need to make sure to:</span></span>

* <span data-ttu-id="6f87f-876">Adicionar regras de entrada para o grupo de segurança de rede no Portal do Azure para as portas TCP/IP usadas para se comunicar com o ICM</span><span class="sxs-lookup"><span data-stu-id="6f87f-876">Add Inbound rules to the Network Security Group in the Azure Portal for the TCP/IP ports used to communicate with ICM</span></span>
* <span data-ttu-id="6f87f-877">Adicionar regras de entrada para a configuração do Firewall do Windows para as portas TCP/IP usadas para se comunicar com o ICM</span><span class="sxs-lookup"><span data-stu-id="6f87f-877">Add Inbound rules to the Windows Firewall configuration for the TCP/IP ports used to communicate with the ICM</span></span>

<span data-ttu-id="6f87f-878">Para um processo importado automatizado de todas as correções disponíveis, recomenda-se aplicar periodicamente a Nota SAP da coleção de correções aplicável à sua versão do SAP:</span><span class="sxs-lookup"><span data-stu-id="6f87f-878">For an automated imported of all corrections available, it is recommended to periodically apply the correction collection SAP Note applicable to your SAP version:</span></span>

* <span data-ttu-id="6f87f-879">[1558958]</span><span class="sxs-lookup"><span data-stu-id="6f87f-879">[1558958]</span></span>
* <span data-ttu-id="6f87f-880">[1619967]</span><span class="sxs-lookup"><span data-stu-id="6f87f-880">[1619967]</span></span>
* <span data-ttu-id="6f87f-881">[1882376]</span><span class="sxs-lookup"><span data-stu-id="6f87f-881">[1882376]</span></span>

<span data-ttu-id="6f87f-882">Mais informações sobre o DBA Cockpit para SAP ASE podem ser encontradas nas seguintes Notas SAP:</span><span class="sxs-lookup"><span data-stu-id="6f87f-882">Further information about DBA Cockpit for SAP ASE can be found in the following SAP Notes:</span></span>

* <span data-ttu-id="6f87f-883">[1605680]</span><span class="sxs-lookup"><span data-stu-id="6f87f-883">[1605680]</span></span>
* <span data-ttu-id="6f87f-884">[1757924]</span><span class="sxs-lookup"><span data-stu-id="6f87f-884">[1757924]</span></span>
* <span data-ttu-id="6f87f-885">[1757928]</span><span class="sxs-lookup"><span data-stu-id="6f87f-885">[1757928]</span></span>
* <span data-ttu-id="6f87f-886">[1758182]</span><span class="sxs-lookup"><span data-stu-id="6f87f-886">[1758182]</span></span>
* <span data-ttu-id="6f87f-887">[1758496]</span><span class="sxs-lookup"><span data-stu-id="6f87f-887">[1758496]</span></span>    
* <span data-ttu-id="6f87f-888">[1814258]</span><span class="sxs-lookup"><span data-stu-id="6f87f-888">[1814258]</span></span>
* <span data-ttu-id="6f87f-889">[1922555]</span><span class="sxs-lookup"><span data-stu-id="6f87f-889">[1922555]</span></span>
* <span data-ttu-id="6f87f-890">[1956005]</span><span class="sxs-lookup"><span data-stu-id="6f87f-890">[1956005]</span></span>

#### <a name="backuprecovery-considerations-for-sap-ase"></a><span data-ttu-id="6f87f-891">Considerações sobre backup/recuperação para o SAP ASE</span><span class="sxs-lookup"><span data-stu-id="6f87f-891">Backup/Recovery Considerations for SAP ASE</span></span>
<span data-ttu-id="6f87f-892">Ao implantar o SAP ASE no Azure, sua metodologia de backup deve ser examinada.</span><span class="sxs-lookup"><span data-stu-id="6f87f-892">When deploying SAP ASE into Azure your backup methodology must be reviewed.</span></span> <span data-ttu-id="6f87f-893">Mesmo se o sistema não for um sistema produtivo, o banco de dados SAP hospedado pelo SAP ASE deverá ser submetido a backup periodicamente.</span><span class="sxs-lookup"><span data-stu-id="6f87f-893">Even if the system is not a productive system, the SAP database hosted by SAP ASE must be backed up periodically.</span></span> <span data-ttu-id="6f87f-894">Como o armazenamento do Azure mantém três imagens, um backup agora é menos importante no que diz respeito à compensação de uma falha de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="6f87f-894">Since Azure Storage keeps three images, a backup is now less important in respect to compensating a storage crash.</span></span> <span data-ttu-id="6f87f-895">A razão principal para manter um plano de backup e restauração adequado é mais que você pode compensar erros lógicos/manuais fornecendo funcionalidades de recuperação pontual.</span><span class="sxs-lookup"><span data-stu-id="6f87f-895">The primary reason for maintaining a proper backup and restore plan is more that you can compensate for logical/manual errors by providing point in time recovery capabilities.</span></span> <span data-ttu-id="6f87f-896">Portanto, o objetivo é usar backups para restaurar o banco de dados para um determinado momento ou usar os backups no Azure para propagar outro sistema copiando o banco de dados existente.</span><span class="sxs-lookup"><span data-stu-id="6f87f-896">So the goal is to either use backups to restore the database back to a certain point in time or to use the backups in Azure to seed another system by copying the existing database.</span></span> <span data-ttu-id="6f87f-897">Por exemplo, você pode transferir de uma configuração do SAP de duas camadas para uma configuração de sistema de três camadas do mesmo sistema restaurando um backup.</span><span class="sxs-lookup"><span data-stu-id="6f87f-897">For example, you could transfer from a 2-Tier SAP configuration to a 3-Tier system setup of the same system by restoring a backup.</span></span>

<span data-ttu-id="6f87f-898">A realização do backup e a recuperação de um banco de dados no Azure funcionam da mesma maneira que localmente.</span><span class="sxs-lookup"><span data-stu-id="6f87f-898">Backing up and restoring a database in Azure works the same way as it does on-premises.</span></span> <span data-ttu-id="6f87f-899">Consulte as Notas SAP:</span><span class="sxs-lookup"><span data-stu-id="6f87f-899">Please see SAP Notes:</span></span>

* <span data-ttu-id="6f87f-900">[1588316]</span><span class="sxs-lookup"><span data-stu-id="6f87f-900">[1588316]</span></span>
* <span data-ttu-id="6f87f-901">[1585981]</span><span class="sxs-lookup"><span data-stu-id="6f87f-901">[1585981]</span></span>

<span data-ttu-id="6f87f-902">para obter detalhes sobre como criar configurações de despejo e agendar backups.</span><span class="sxs-lookup"><span data-stu-id="6f87f-902">for details on creating dump configurations and scheduling backups.</span></span> <span data-ttu-id="6f87f-903">Dependendo da sua estratégia e necessidades, você pode configurar despejos de log e banco de dados em um dos VHDs existentes ou adicionar um VHD adicional para o backup.</span><span class="sxs-lookup"><span data-stu-id="6f87f-903">Depending on your strategy and needs you can configure database and log dumps to disk onto one of the existing VHDs or add an additional VHD for the backup.</span></span>  <span data-ttu-id="6f87f-904">Para reduzir o risco de perda de dados em caso de erro, é recomendável usar um VHD em que não esteja localizado nenhum dispositivo de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="6f87f-904">To reduce the danger of data loss in case of an error it is recommended to use a VHD where no database device is located.</span></span>

<span data-ttu-id="6f87f-905">Além da compactação do LOB e dados, o SAP ASE também oferece a compactação de backup.</span><span class="sxs-lookup"><span data-stu-id="6f87f-905">Besides data- and LOB compression SAP ASE also offers backup compression.</span></span> <span data-ttu-id="6f87f-906">Para ocupar menos espaço com os despejos de banco de dados e de log, é recomendável usar a compactação de backup.</span><span class="sxs-lookup"><span data-stu-id="6f87f-906">To occupy less space with the database and log dumps it is recommended to use backup compression.</span></span> <span data-ttu-id="6f87f-907">Consulte a Nota SAP [1588316] para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="6f87f-907">Please see SAP Note [1588316] for more information.</span></span> <span data-ttu-id="6f87f-908">A compactação do backup também é crucial para reduzir a quantidade de dados a ser transferida se você planeja baixar os backups ou VHDs contendo despejos de backup da máquina virtual do Azure para o local.</span><span class="sxs-lookup"><span data-stu-id="6f87f-908">Compressing the backup is also crucial to reduce the amount of data to be transferred if you plan to download backups or VHDs containing backup dumps from the Azure Virtual Machine to on-premises.</span></span>

<span data-ttu-id="6f87f-909">Não use a unidade D:\ como destino de despejo de log ou banco de dados.</span><span class="sxs-lookup"><span data-stu-id="6f87f-909">Do not use drive D:\ as database or log dump destination.</span></span>

#### <a name="performance-considerations-for-backupsrestores"></a><span data-ttu-id="6f87f-910">Considerações de desempenho para backups/restaurações</span><span class="sxs-lookup"><span data-stu-id="6f87f-910">Performance Considerations for Backups/Restores</span></span>
<span data-ttu-id="6f87f-911">Como em implantações bare-metal, o desempenho de backup/restauração depende de quantos volumes podem ser lidos em paralelo e qual pode ser a taxa de transferência desses volumes.</span><span class="sxs-lookup"><span data-stu-id="6f87f-911">As in bare-metal deployments, backup/restore performance is dependent on how many volumes can be read in parallel and what the throughput of those volumes might be.</span></span> <span data-ttu-id="6f87f-912">Além disso, o consumo de CPU usado pela compactação de backup pode desempenhar uma função significativa em VMs com apenas até 8 threads de CPU.</span><span class="sxs-lookup"><span data-stu-id="6f87f-912">In addition, the CPU consumption used by backup compression may play a significant role on VMs with just up to 8 CPU threads.</span></span> <span data-ttu-id="6f87f-913">Portanto, é possível supor que:</span><span class="sxs-lookup"><span data-stu-id="6f87f-913">Therefore, one can assume:</span></span>

* <span data-ttu-id="6f87f-914">Quanto menor o número de VHDs usados para armazenar os dispositivos de banco de dados, menor é a taxa de transferência geral na leitura</span><span class="sxs-lookup"><span data-stu-id="6f87f-914">The fewer the number of VHDs used to store the database devices, the smaller the overall throughput in reading</span></span>
* <span data-ttu-id="6f87f-915">Quanto menor o número de threads de CPU na VM, mais severo é o impacto da compactação de backup</span><span class="sxs-lookup"><span data-stu-id="6f87f-915">The smaller the number of CPU threads in the VM, the more severe the impact of backup compression</span></span>
* <span data-ttu-id="6f87f-916">Quanto menos destinos (diretórios de distribuição, VHDs) nos quais gravar o backup, menor é a taxa de transferência</span><span class="sxs-lookup"><span data-stu-id="6f87f-916">The fewer targets (Stripe Directories, VHDs) to write the backup to, the lesser the throughput</span></span>

<span data-ttu-id="6f87f-917">Para aumentar o número de destinos nos quais gravar, existem duas opções que podem ser usadas/combinadas dependendo das suas necessidades:</span><span class="sxs-lookup"><span data-stu-id="6f87f-917">To increase the number of targets to write to there are two options which can be used/combined depending on your needs:</span></span>

* <span data-ttu-id="6f87f-918">Distribuir o volume de destino de backup em vários VHDs montados para melhorar a taxa de transferência de IOPS nesse volume distribuído</span><span class="sxs-lookup"><span data-stu-id="6f87f-918">Striping the backup target volume over multiple mounted VHDs in order to improve the IOPS throughput on that striped volume</span></span>
* <span data-ttu-id="6f87f-919">Criar uma configuração de despejo no nível do SAP ASE que usa mais de um diretório de destino no qual gravar o despejo</span><span class="sxs-lookup"><span data-stu-id="6f87f-919">Creating a dump configuration on SAP ASE level which uses more than one target directory to write the dump to</span></span>

<span data-ttu-id="6f87f-920">A distribuição de um volume em vários VHDs montados foi discutida anteriormente nesse guia.</span><span class="sxs-lookup"><span data-stu-id="6f87f-920">Striping a volume over multiple mounted VHDs has been discussed earlier in this guide.</span></span> <span data-ttu-id="6f87f-921">Para obter mais informações sobre como usar vários diretórios na configuração de despejo do ASE SAP, confira a documentação sobre o procedimento armazenado sp_config_dump que é usado para criar a configuração de despejo no [Infocenter do Sybase](http://infocenter.sybase.com/help/index.jsp).</span><span class="sxs-lookup"><span data-stu-id="6f87f-921">For more information on using multiple directories in the SAP ASE dump configuration please refer to the documentation on Stored Procedure sp_config_dump which is used to create the dump configuration on the [Sybase Infocenter](http://infocenter.sybase.com/help/index.jsp).</span></span>

### <a name="disaster-recovery-with-azure-vms"></a><span data-ttu-id="6f87f-922">Recuperação de desastre com VMs do Azure</span><span class="sxs-lookup"><span data-stu-id="6f87f-922">Disaster Recovery with Azure VMs</span></span>
#### <a name="data-replication-with-sap-sybase-replication-server"></a><span data-ttu-id="6f87f-923">Replicação de dados com o Servidor de Replicação do SAP Sybase</span><span class="sxs-lookup"><span data-stu-id="6f87f-923">Data Replication with SAP Sybase Replication Server</span></span>
<span data-ttu-id="6f87f-924">Com o SRS (Servidor de Replicação SAP Sybase), o SAP ASE fornece uma solução de espera passiva para transferir transações de banco de dados para um local distante de forma assíncrona.</span><span class="sxs-lookup"><span data-stu-id="6f87f-924">With the SAP Sybase Replication Server (SRS) SAP ASE provides a warm standby solution to transfer database transactions to a distant location asynchronously.</span></span>

<span data-ttu-id="6f87f-925">A instalação e operação do SRS funcionam tão bem funcionalmente em uma VM hospedada nos Serviços de Máquina Virtual do Azure como localmente.</span><span class="sxs-lookup"><span data-stu-id="6f87f-925">The installation and operation of SRS works as well functionally in a VM hosted in Azure Virtual Machine Services as it does on-premises.</span></span>

<span data-ttu-id="6f87f-926">O ASE HADR por meio do servidor de replicação do SAP é planejado com uma versão futura.</span><span class="sxs-lookup"><span data-stu-id="6f87f-926">ASE HADR via SAP Replication Server is planned with a future release.</span></span> <span data-ttu-id="6f87f-927">Ele será testado com e liberado para plataformas Microsoft Azure assim que estiver disponível.</span><span class="sxs-lookup"><span data-stu-id="6f87f-927">It will be tested with and released for Microsoft Azure platforms as soon as it is available.</span></span>

## <a name="specifics-to-sap-ase-on-linux"></a><span data-ttu-id="6f87f-928">Informações específicas para o SAP ASE no Linux</span><span class="sxs-lookup"><span data-stu-id="6f87f-928">Specifics to SAP ASE on Linux</span></span>
<span data-ttu-id="6f87f-929">Começando com o Microsoft Azure, você pode facilmente migrar seus aplicativos SAP ASE existentes para máquinas virtuais do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-929">Starting with Microsoft Azure, you can easily migrate your existing SAP ASE applications to Azure Virtual Machines.</span></span> <span data-ttu-id="6f87f-930">O SAP ASE em uma Máquina Virtual permite reduzir o custo total de propriedade de implantação, gerenciamento e manutenção de aplicativos de amplitude empresarial migrando facilmente esses aplicativos para o Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-930">SAP ASE in a Virtual Machine enables you to reduce the total cost of ownership of deployment, management and maintenance of enterprise breadth applications by easily migrating these applications to Microsoft Azure.</span></span> <span data-ttu-id="6f87f-931">Com o SAP ASE em uma máquina virtual do Azure, os administradores e desenvolvedores ainda podem usar as mesmas ferramentas de desenvolvimento e administração que estão disponíveis localmente.</span><span class="sxs-lookup"><span data-stu-id="6f87f-931">With SAP ASE in an Azure Virtual Machine, administrators and developers can still use the same development and administration tools that are available on-premises.</span></span>

<span data-ttu-id="6f87f-932">Para implantar VMs do Azure, é importante conhecer os SLAs oficiais que podem ser encontrados aqui: <https://azure.microsoft.com/support/legal/sla></span><span class="sxs-lookup"><span data-stu-id="6f87f-932">For deploying Azure VMs it's important to know the official SLAs which can be found here : <https://azure.microsoft.com/support/legal/sla></span></span>

<span data-ttu-id="6f87f-933">As informações de dimensionamento do SAP e uma lista dos SKUs de VM certificados do SAP serão fornecidas na Nota SAP [1928533].</span><span class="sxs-lookup"><span data-stu-id="6f87f-933">SAP sizing information and a list of SAP certified VM SKUs will be provided in SAP Note [1928533].</span></span> <span data-ttu-id="6f87f-934">Documentos adicionais sobre dimensionamento de SAP para máquinas virtuais do Azure podem ser encontrados aqui <http://blogs.msdn.com/b/saponsqlserver/archive/2015/06/19/how-to-size-sap-systems-running-on-azure-vms.aspx> e aqui <http://blogs.msdn.com/b/saponsqlserver/archive/2015/12/01/new-white-paper-on-sizing-sap-solutions-on-azure-public-cloud.aspx></span><span class="sxs-lookup"><span data-stu-id="6f87f-934">Additional SAP sizing documents for Azure Virtual machines can be found here <http://blogs.msdn.com/b/saponsqlserver/archive/2015/06/19/how-to-size-sap-systems-running-on-azure-vms.aspx> and here <http://blogs.msdn.com/b/saponsqlserver/archive/2015/12/01/new-white-paper-on-sizing-sap-solutions-on-azure-public-cloud.aspx></span></span>

<span data-ttu-id="6f87f-935">As instruções e recomendações sobre o uso do armazenamento do Azure, implantação de VMs SAP ou monitoramento do SAP se aplicam às implantações do SAP ASE em conjunto com aplicativos SAP conforme indicado em todos os quatro primeiros capítulos deste documento.</span><span class="sxs-lookup"><span data-stu-id="6f87f-935">Statements and recommendations in regard to the usage of Azure Storage, Deployment of SAP VMs or SAP Monitoring apply to deployments of SAP ASE in conjunction with SAP applications as stated throughout the first four chapters of this document.</span></span>

<span data-ttu-id="6f87f-936">As duas Notas da SAP a seguir incluem informações gerais sobre o ASE no Linux e ASE na nuvem:</span><span class="sxs-lookup"><span data-stu-id="6f87f-936">The following two SAP Notes include general information about ASE on Linux and ASE in the Cloud :</span></span>

* <span data-ttu-id="6f87f-937">[2134316]</span><span class="sxs-lookup"><span data-stu-id="6f87f-937">[2134316]</span></span>
* <span data-ttu-id="6f87f-938">[1941500]</span><span class="sxs-lookup"><span data-stu-id="6f87f-938">[1941500]</span></span>

### <a name="sap-ase-version-support"></a><span data-ttu-id="6f87f-939">Suporte de versão do SAP ASE</span><span class="sxs-lookup"><span data-stu-id="6f87f-939">SAP ASE Version Support</span></span>
<span data-ttu-id="6f87f-940">No momento, a SAP dá suporte ao SAP ASE versão 16.0 para uso com produtos SAP Business Suite.</span><span class="sxs-lookup"><span data-stu-id="6f87f-940">SAP currently supports SAP ASE version 16.0 for use with SAP Business Suite products.</span></span> <span data-ttu-id="6f87f-941">Todas as atualizações para o servidor SAP ASE ou drivers JDBC e ODBC a serem usadas com produtos SAP Business Suite são fornecidas exclusivamente pelo SAP Service Marketplace em: <https://support.sap.com/swdc>.</span><span class="sxs-lookup"><span data-stu-id="6f87f-941">All updates for SAP ASE server, or JDBC and ODBC drivers to be used with SAP Business Suite products are provided solely through the SAP Service Marketplace at: <https://support.sap.com/swdc>.</span></span>

<span data-ttu-id="6f87f-942">Para instalações locais, não baixe atualizações para o servidor SAP ASE ou para os drivers JDBC e ODBC diretamente de sites do Sybase.</span><span class="sxs-lookup"><span data-stu-id="6f87f-942">As for installations on-premises, do not download updates for the SAP ASE server, or for the JDBC and ODBC drivers directly from Sybase websites.</span></span> <span data-ttu-id="6f87f-943">Para obter informações detalhadas sobre os patches que têm suporte para uso com produtos SAP Business Suite locais e em máquinas virtuais do Azure, consulte as seguintes Notas SAP:</span><span class="sxs-lookup"><span data-stu-id="6f87f-943">For detailed information on patches which are supported for use with SAP Business Suite products on-premises and in Azure Virtual Machines see the following SAP Notes:</span></span>

* <span data-ttu-id="6f87f-944">[1590719]</span><span class="sxs-lookup"><span data-stu-id="6f87f-944">[1590719]</span></span>
* <span data-ttu-id="6f87f-945">[1973241]</span><span class="sxs-lookup"><span data-stu-id="6f87f-945">[1973241]</span></span>

<span data-ttu-id="6f87f-946">Informações gerais sobre como executar o SAP Business Suite em SAP ASE podem ser encontradas no [SCN](https://scn.sap.com/community/ase)</span><span class="sxs-lookup"><span data-stu-id="6f87f-946">General information on running SAP Business Suite on SAP ASE can be found in the [SCN](https://scn.sap.com/community/ase)</span></span>

### <a name="sap-ase-configuration-guidelines-for-sap-related-sap-ase-installations-in-azure-vms"></a><span data-ttu-id="6f87f-947">Diretrizes de configuração do SAP ASE para instalações do SAP ASE relacionadas ao SAP em VMs do Azure</span><span class="sxs-lookup"><span data-stu-id="6f87f-947">SAP ASE Configuration Guidelines for SAP related SAP ASE Installations in Azure VMs</span></span>
#### <a name="structure-of-the-sap-ase-deployment"></a><span data-ttu-id="6f87f-948">Estrutura da implantação do SAP ASE</span><span class="sxs-lookup"><span data-stu-id="6f87f-948">Structure of the SAP ASE Deployment</span></span>
<span data-ttu-id="6f87f-949">De acordo com a descrição geral, os executáveis do SAP ASE devem ser localizados ou instalados no sistema de arquivos raiz da VM (/sybase ).</span><span class="sxs-lookup"><span data-stu-id="6f87f-949">In accordance with the general description, SAP ASE executables should be located or installed into the root file system of the VM ( /sybase ).</span></span> <span data-ttu-id="6f87f-950">Normalmente, a maioria dos bancos de dados de ferramentas e sistema do SAP ASE não é realmente utilizada de forma concreta pela carga de trabalho do SAP NetWeaver.</span><span class="sxs-lookup"><span data-stu-id="6f87f-950">Typically, most of the SAP ASE system and tools databases are not really leveraged hard by SAP NetWeaver workload.</span></span> <span data-ttu-id="6f87f-951">Portanto, os bancos de dados de ferramentas e sistema (mestre, modelo, saptools, sybmgmtdb, sybsystemdb) podem permanecer no sistema de arquivos raiz também.</span><span class="sxs-lookup"><span data-stu-id="6f87f-951">Hence the system and tools databases (master, model, saptools, sybmgmtdb, sybsystemdb) can remain on the root file system as well.</span></span>

<span data-ttu-id="6f87f-952">Uma exceção pode ser o banco de dados temporário que contém todas as tabelas de trabalho e tabelas temporárias criadas pelo SAP ASE, que, no caso de algumas cargas de trabalho do SAP ERP e todas do BW, pode exigir um volume de dados ou um volume de operações de E/S maior, o que pode não caber no disco do SO da VM original.</span><span class="sxs-lookup"><span data-stu-id="6f87f-952">An exception could be the temporary database containing all work tables and temporary tables created by SAP ASE, which in case of some SAP ERP and all BW workloads might require either higher data volume or I/O operations volume which can’t fit into the original VM’s OS disk.</span></span>

<span data-ttu-id="6f87f-953">Dependendo da versão do SAPInst/SWPM usada para instalar o sistema, o banco de dados pode conter:</span><span class="sxs-lookup"><span data-stu-id="6f87f-953">Depending on the version of SAPInst/SWPM used to install the system, the database might contain:</span></span>

* <span data-ttu-id="6f87f-954">Um único tempdb do SAP ASE, que é criado durante a instalação do SAP ASE</span><span class="sxs-lookup"><span data-stu-id="6f87f-954">A single SAP ASE tempdb which is created when installing SAP ASE</span></span>
* <span data-ttu-id="6f87f-955">Um tempdb do SAP ASE criado pela instalação do SAP ASE e um saptempdb adicional criado pela rotina de instalação do SAP</span><span class="sxs-lookup"><span data-stu-id="6f87f-955">An SAP ASE tempdb created by installing SAP ASE and an additional saptempdb created by the SAP installation routine</span></span>
* <span data-ttu-id="6f87f-956">Um tempdb do SAP ASE criado pela instalação do SAP ASE e um tempdb adicional que foi criado manualmente (por exemplo, seguindo a Nota SAP [1752266]) para atender aos requisitos de tempdb específicos do ERP/BW</span><span class="sxs-lookup"><span data-stu-id="6f87f-956">An SAP ASE tempdb created by installing SAP ASE and an additional tempdb that has been created manually (e.g. following SAP Note [1752266]) to meet ERP/BW specific tempdb requirements</span></span>

<span data-ttu-id="6f87f-957">No caso de cargas de trabalho do ERP específicas ou todas do BW faz sentido, em relação ao desempenho, manter os dispositivos tempdb do tempdb criado adicionalmente (por SWPM ou manualmente) em um sistema de arquivos separado que pode ser representado por um único disco de dados do Azure ou um RAID do Linux que abranja a vários discos de dados do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-957">In case of specific ERP or all BW workloads it makes sense, in regard to performance, to keep the tempdb devices of the additionally created tempdb (by SWPM or manually) on a separate file system which can be represented by a single Azure data disk or a Linux RAID spanning multiple Azure data disks.</span></span> <span data-ttu-id="6f87f-958">Caso não exista nenhum tempdb adicional, é recomendável criar um (Nota SAP [1752266]).</span><span class="sxs-lookup"><span data-stu-id="6f87f-958">If no additional tempdb exists it is recommended to create one (SAP Note [1752266]).</span></span>

<span data-ttu-id="6f87f-959">Para esses sistemas, as etapas a seguir devem ser executadas para o tempdb criado adicionalmente:</span><span class="sxs-lookup"><span data-stu-id="6f87f-959">For such systems the following steps should be performed for the additionally created tempdb:</span></span>

* <span data-ttu-id="6f87f-960">Mova o primeiro diretório do tempdb para o primeiro sistema de arquivos do banco de dados SAP</span><span class="sxs-lookup"><span data-stu-id="6f87f-960">Move the first tempdb directory to the first file system of the SAP database</span></span>
* <span data-ttu-id="6f87f-961">Adicione diretórios do tempdb para cada um dos VHDs contendo um sistema de arquivos do banco de dados SAP</span><span class="sxs-lookup"><span data-stu-id="6f87f-961">Add tempdb directories to each of the VHDs containing a filesystem of the SAP database</span></span>

<span data-ttu-id="6f87f-962">Essa configuração permite que o tempdb consuma mais espaço do que a unidade do sistema é capaz de fornecer.</span><span class="sxs-lookup"><span data-stu-id="6f87f-962">This configuration enables tempdb to either consume more space than the system drive is able to provide.</span></span> <span data-ttu-id="6f87f-963">Como referência, é possível verificar os tamanhos de diretório do tempdb em sistemas existentes que são executados localmente.</span><span class="sxs-lookup"><span data-stu-id="6f87f-963">As a reference one can check the tempdb directory sizes on existing systems which run on-premises.</span></span> <span data-ttu-id="6f87f-964">Ou tal configuração habilitaria números de IOPS em relação ao tempdb que não poderiam ser fornecidos com a unidade do sistema.</span><span class="sxs-lookup"><span data-stu-id="6f87f-964">Or such a configuration would enable IOPS numbers against tempdb which cannot be provided with the system drive.</span></span> <span data-ttu-id="6f87f-965">Novamente, sistemas que são executados localmente podem ser usados para monitorar a carga de trabalho de E/S no tempdb.</span><span class="sxs-lookup"><span data-stu-id="6f87f-965">Again systems that are running on-premises can be used to monitor I/O workload against tempdb.</span></span>

<span data-ttu-id="6f87f-966">Nunca coloque qualquer diretório do SAP ASE em /mnt ou /mnt/resource da VM.</span><span class="sxs-lookup"><span data-stu-id="6f87f-966">Never put any SAP ASE directories onto /mnt or /mnt/resource of the VM.</span></span> <span data-ttu-id="6f87f-967">Isso também se aplicará ao tempdb, mesmo se os objetos mantidos no tempdb forem apenas temporários porque /mnt ou /mnt/resource é um espaço temporário da VM do Azure padrão que não é persistente.</span><span class="sxs-lookup"><span data-stu-id="6f87f-967">This also applies to the tempdb, even if the objects kept in the tempdb are only temporary because /mnt or /mnt/resource is a default Azure VM temp space which is not persistent.</span></span> <span data-ttu-id="6f87f-968">Mais detalhes sobre o espaço temporário da VM do Azure podem ser encontrados [neste artigo][virtual-machines-linux-how-to-attach-disk]</span><span class="sxs-lookup"><span data-stu-id="6f87f-968">More details about the Azure VM temp space can be found in [this article][virtual-machines-linux-how-to-attach-disk]</span></span>

#### <a name="impact-of-database-compression"></a><span data-ttu-id="6f87f-969">Impacto da compactação do banco de dados</span><span class="sxs-lookup"><span data-stu-id="6f87f-969">Impact of Database Compression</span></span>
<span data-ttu-id="6f87f-970">Em configurações em que a largura de banda de E/S pode se tornar um fator limitante, todas as medidas que reduzem o IOPS podem ajudar a ampliar a carga de trabalho que pode ser executada em um cenário de IaaS como o Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-970">In configurations where I/O bandwidth can become a limiting factor, every measure which reduces IOPS might help to stretch the workload one can run in an IaaS scenario like Azure.</span></span> <span data-ttu-id="6f87f-971">Portanto, é altamente recomendável para se certificar de que a compactação do SAP ASE seja usada antes de carregar um banco de dados SAP existente no Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-971">Therefore, it is strongly recommended to make sure that SAP ASE compression is used before uploading an existing SAP database to Azure.</span></span>

<span data-ttu-id="6f87f-972">A recomendação de executar a compactação antes de carregar no Azure, se ainda não estiver implementada, é indicada por vários motivos:</span><span class="sxs-lookup"><span data-stu-id="6f87f-972">The recommendation to perform compression before uploading to Azure if it is not already implemented is given out of several reasons:</span></span>

* <span data-ttu-id="6f87f-973">A quantidade de dados a ser carregada no Azure é menor</span><span class="sxs-lookup"><span data-stu-id="6f87f-973">The amount of data to be uploaded to Azure is lower</span></span>
* <span data-ttu-id="6f87f-974">A duração da execução de compactação é menor, presumindo-se que seja possível usar um hardware mais poderoso com mais CPUs ou maior largura de banda de E/S ou menor latência de E/S local</span><span class="sxs-lookup"><span data-stu-id="6f87f-974">The duration of the compression execution is shorter assuming that one can use stronger hardware with more CPUs or higher I/O bandwidth or less I/O latency on-premises</span></span>
* <span data-ttu-id="6f87f-975">Tamanhos menores de banco de dados podem levar a menos custos de alocação de disco</span><span class="sxs-lookup"><span data-stu-id="6f87f-975">Smaller database sizes might lead to less costs for disk allocation</span></span>

<span data-ttu-id="6f87f-976">A compactação de LOB e dados funciona em uma VM hospedada em máquinas virtuais do Azure como o faz localmente.</span><span class="sxs-lookup"><span data-stu-id="6f87f-976">Data- and LOB-Compression work in a VM hosted in Azure Virtual Machines as it does on-premises.</span></span> <span data-ttu-id="6f87f-977">Para obter mais detalhes sobre como verificar se a compactação já está em uso em um banco de dados SAP ASE existente, consulte a Nota SAP [1750510].</span><span class="sxs-lookup"><span data-stu-id="6f87f-977">For more details on how to check if compression is already in use in an existing SAP ASE database please check SAP Note [1750510].</span></span> <span data-ttu-id="6f87f-978">Consulte também a Nota SAP [2121797] para obter informações adicionais sobre a compactação de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="6f87f-978">Also see SAP Note [2121797] for additional information regarding database compression.</span></span>

#### <a name="using-dbacockpit-to-monitor-database-instances"></a><span data-ttu-id="6f87f-979">Usando o DBACockpit para monitorar instâncias do banco de dados</span><span class="sxs-lookup"><span data-stu-id="6f87f-979">Using DBACockpit to monitor Database Instances</span></span>
<span data-ttu-id="6f87f-980">Para sistemas SAP que estão usando o SAP ASE como plataforma de banco de dados, o DBACockpit está acessível como janelas de navegador incorporadas no DBACockpit de transação ou como Webdynpro.</span><span class="sxs-lookup"><span data-stu-id="6f87f-980">For SAP systems which are using SAP ASE as database platform, the DBACockpit is accessible as embedded browser windows in transaction DBACockpit or as Webdynpro.</span></span> <span data-ttu-id="6f87f-981">No entanto, a funcionalidade completa para monitorar e administrar o banco de dados está disponível na implementação do Webdynpro do DBACockpit apenas.</span><span class="sxs-lookup"><span data-stu-id="6f87f-981">However the full functionality for monitoring and administering the database is available in the Webdynpro implementation of the DBACockpit only.</span></span>

<span data-ttu-id="6f87f-982">Como com sistemas locais, são necessárias várias etapas para habilitar toda a funcionalidade do SAP NetWeaver usada pela implementação do Webdynpro do DBACockpit.</span><span class="sxs-lookup"><span data-stu-id="6f87f-982">As with on-premises systems several steps are required to enable all SAP NetWeaver functionality used by the Webdynpro implementation of the DBACockpit.</span></span> <span data-ttu-id="6f87f-983">Siga as instruções da Nota SAP [1245200] para habilitar o uso de webdynpros e gerar os necessários.</span><span class="sxs-lookup"><span data-stu-id="6f87f-983">Please follow SAP Note [1245200] to enable the usage of webdynpros and generate the required ones.</span></span> <span data-ttu-id="6f87f-984">Ao seguir as instruções nas notas acima, você também configurará o ICM (Gerenciador de Comunicação da Internet) junto com as portas a serem usadas para conexões http e https.</span><span class="sxs-lookup"><span data-stu-id="6f87f-984">When following the instructions in the above notes you will also configure the Internet Communication Manager (icm) along with the ports to be used for http and https connections.</span></span> <span data-ttu-id="6f87f-985">A configuração padrão para http tem esta aparência:</span><span class="sxs-lookup"><span data-stu-id="6f87f-985">The default setting for http looks like this:</span></span>

> <span data-ttu-id="6f87f-986">icm/server_port_0 = PROT=HTTP,PORT=8000,PROCTIMEOUT=600,TIMEOUT=600</span><span class="sxs-lookup"><span data-stu-id="6f87f-986">icm/server_port_0 = PROT=HTTP,PORT=8000,PROCTIMEOUT=600,TIMEOUT=600</span></span>
>
> <span data-ttu-id="6f87f-987">icm/server_port_1 = PROT=HTTPS,PORT=443$$,PROCTIMEOUT=600,TIMEOUT=600</span><span class="sxs-lookup"><span data-stu-id="6f87f-987">icm/server_port_1 = PROT=HTTPS,PORT=443$$,PROCTIMEOUT=600,TIMEOUT=600</span></span>
>
>

<span data-ttu-id="6f87f-988">e os links gerados no DBACockpit da transação serão semelhantes a este:</span><span class="sxs-lookup"><span data-stu-id="6f87f-988">and the links generated in transaction DBACockpit will look similar to this:</span></span>

> <span data-ttu-id="6f87f-989">https://`<fullyqualifiedhostname`>:44300/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="6f87f-989">https://`<fullyqualifiedhostname`>:44300/sap/bc/webdynpro/sap/dba_cockpit</span></span>
>
> <span data-ttu-id="6f87f-990">http://`<fullyqualifiedhostname`>:8000/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="6f87f-990">http://`<fullyqualifiedhostname`>:8000/sap/bc/webdynpro/sap/dba_cockpit</span></span>
>
>

<span data-ttu-id="6f87f-991">Dependendo de se e como a máquina virtual do Azure que hospeda o sistema SAP está conectado via site a site, multissite ou ExpressRoute (implantação entre instalações), você precisa se certificar de que o ICM esteja usando um nome de host totalmente qualificado que pode ser resolvido na máquina virtual da qual você está tentando abrir o DBACockpit.</span><span class="sxs-lookup"><span data-stu-id="6f87f-991">Depending on if and how the Azure Virtual Machine hosting the SAP system is connected via site-to-site, multi-site or ExpressRoute (Cross-Premises deployment) you need to make sure that ICM is using a fully qualified hostname that can be resolved on the machine where you are trying to open the DBACockpit from.</span></span> <span data-ttu-id="6f87f-992">Consulte a Nota SAP [773830] para entender como o ICM determina o nome de host totalmente qualificado de acordo com os parâmetros de perfil e defina o parâmetro icm/host_name_full explicitamente, se necessário.</span><span class="sxs-lookup"><span data-stu-id="6f87f-992">Please see SAP Note [773830] to understand how ICM determines the fully qualified host name depending on profile parameters and set parameter icm/host_name_full explicitly if required.</span></span>

<span data-ttu-id="6f87f-993">Se você implantou a VM em um cenário de somente na nuvem sem conectividade entre instalações entre locais e o Azure, você precisa definir um endereço IP público e um domainlabel.</span><span class="sxs-lookup"><span data-stu-id="6f87f-993">If you deployed the VM in a Cloud-Only scenario without cross-premises connectivity between on-premises and Azure, you need to define a public IP address and a domainlabel.</span></span> <span data-ttu-id="6f87f-994">O formato do nome DNS público da VM será assim:</span><span class="sxs-lookup"><span data-stu-id="6f87f-994">The format of the public DNS name of the VM will then look like this :</span></span>

> <span data-ttu-id="6f87f-995">`<custom domainlabel`>.`<azure region`>.cloudapp.azure.com</span><span class="sxs-lookup"><span data-stu-id="6f87f-995">`<custom domainlabel`>.`<azure region`>.cloudapp.azure.com</span></span>
>
>

<span data-ttu-id="6f87f-996">É possível encontrar mais detalhes relacionados ao nome DNS [aqui][virtual-machines-azurerm-versus-azuresm].</span><span class="sxs-lookup"><span data-stu-id="6f87f-996">More details related to the DNS name can be found [here][virtual-machines-azurerm-versus-azuresm].</span></span>

<span data-ttu-id="6f87f-997">Definindo o parâmetro de perfil do SAP icm/host_name_full para o nome DNS da VM do Azure, o link pode ser semelhante a:</span><span class="sxs-lookup"><span data-stu-id="6f87f-997">Setting the SAP profile parameter icm/host_name_full to the DNS name of the Azure VM the link might look similar to:</span></span>

> <span data-ttu-id="6f87f-998">https://mydomainlabel.westeurope.cloudapp.net:44300/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="6f87f-998">https://mydomainlabel.westeurope.cloudapp.net:44300/sap/bc/webdynpro/sap/dba_cockpit</span></span>
>
> <span data-ttu-id="6f87f-999">http://mydomainlabel.westeurope.cloudapp.net:8000/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="6f87f-999">http://mydomainlabel.westeurope.cloudapp.net:8000/sap/bc/webdynpro/sap/dba_cockpit</span></span>
>
>

<span data-ttu-id="6f87f-1000">Nesse caso, você precisa se certificar de:</span><span class="sxs-lookup"><span data-stu-id="6f87f-1000">In this case you need to make sure to:</span></span>

* <span data-ttu-id="6f87f-1001">Adicionar regras de entrada para o grupo de segurança de rede no Portal do Azure para as portas TCP/IP usadas para se comunicar com o ICM</span><span class="sxs-lookup"><span data-stu-id="6f87f-1001">Add Inbound rules to the Network Security Group in the Azure Portal for the TCP/IP ports used to communicate with ICM</span></span>
* <span data-ttu-id="6f87f-1002">Adicionar regras de entrada para a configuração do Firewall do Windows para as portas TCP/IP usadas para se comunicar com o ICM</span><span class="sxs-lookup"><span data-stu-id="6f87f-1002">Add Inbound rules to the Windows Firewall configuration for the TCP/IP ports used to communicate with the ICM</span></span>

<span data-ttu-id="6f87f-1003">Para um processo importado automatizado de todas as correções disponíveis, recomenda-se aplicar periodicamente a Nota SAP da coleção de correções aplicável à sua versão do SAP:</span><span class="sxs-lookup"><span data-stu-id="6f87f-1003">For an automated imported of all corrections available, it is recommended to periodically apply the correction collection SAP Note applicable to your SAP version:</span></span>

* <span data-ttu-id="6f87f-1004">[1558958]</span><span class="sxs-lookup"><span data-stu-id="6f87f-1004">[1558958]</span></span>
* <span data-ttu-id="6f87f-1005">[1619967]</span><span class="sxs-lookup"><span data-stu-id="6f87f-1005">[1619967]</span></span>
* <span data-ttu-id="6f87f-1006">[1882376]</span><span class="sxs-lookup"><span data-stu-id="6f87f-1006">[1882376]</span></span>

<span data-ttu-id="6f87f-1007">Mais informações sobre o DBA Cockpit para SAP ASE podem ser encontradas nas seguintes Notas SAP:</span><span class="sxs-lookup"><span data-stu-id="6f87f-1007">Further information about DBA Cockpit for SAP ASE can be found in the following SAP Notes:</span></span>

* <span data-ttu-id="6f87f-1008">[1605680]</span><span class="sxs-lookup"><span data-stu-id="6f87f-1008">[1605680]</span></span>
* <span data-ttu-id="6f87f-1009">[1757924]</span><span class="sxs-lookup"><span data-stu-id="6f87f-1009">[1757924]</span></span>
* <span data-ttu-id="6f87f-1010">[1757928]</span><span class="sxs-lookup"><span data-stu-id="6f87f-1010">[1757928]</span></span>
* <span data-ttu-id="6f87f-1011">[1758182]</span><span class="sxs-lookup"><span data-stu-id="6f87f-1011">[1758182]</span></span>
* <span data-ttu-id="6f87f-1012">[1758496]</span><span class="sxs-lookup"><span data-stu-id="6f87f-1012">[1758496]</span></span>    
* <span data-ttu-id="6f87f-1013">[1814258]</span><span class="sxs-lookup"><span data-stu-id="6f87f-1013">[1814258]</span></span>
* <span data-ttu-id="6f87f-1014">[1922555]</span><span class="sxs-lookup"><span data-stu-id="6f87f-1014">[1922555]</span></span>
* <span data-ttu-id="6f87f-1015">[1956005]</span><span class="sxs-lookup"><span data-stu-id="6f87f-1015">[1956005]</span></span>

#### <a name="backuprecovery-considerations-for-sap-ase"></a><span data-ttu-id="6f87f-1016">Considerações sobre backup/recuperação para o SAP ASE</span><span class="sxs-lookup"><span data-stu-id="6f87f-1016">Backup/Recovery Considerations for SAP ASE</span></span>
<span data-ttu-id="6f87f-1017">Ao implantar o SAP ASE no Azure, sua metodologia de backup deve ser examinada.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1017">When deploying SAP ASE into Azure your backup methodology must be reviewed.</span></span> <span data-ttu-id="6f87f-1018">Mesmo se o sistema não for um sistema produtivo, o banco de dados SAP hospedado pelo SAP ASE deverá ser submetido a backup periodicamente.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1018">Even if the system is not a productive system, the SAP database hosted by SAP ASE must be backed up periodically.</span></span> <span data-ttu-id="6f87f-1019">Como o armazenamento do Azure mantém três imagens, um backup agora é menos importante no que diz respeito à compensação de uma falha de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1019">Since Azure Storage keeps three images, a backup is now less important in respect to compensating a storage crash.</span></span> <span data-ttu-id="6f87f-1020">A razão principal para manter um plano de backup e restauração adequado é mais que você pode compensar erros lógicos/manuais fornecendo funcionalidades de recuperação pontual.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1020">The primary reason for maintaining a proper backup and restore plan is more that you can compensate for logical/manual errors by providing point in time recovery capabilities.</span></span> <span data-ttu-id="6f87f-1021">Portanto, o objetivo é usar backups para restaurar o banco de dados para um determinado momento ou usar os backups no Azure para propagar outro sistema copiando o banco de dados existente.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1021">So the goal is to either use backups to restore the database back to a certain point in time or to use the backups in Azure to seed another system by copying the existing database.</span></span> <span data-ttu-id="6f87f-1022">Por exemplo, você pode transferir de uma configuração do SAP de duas camadas para uma configuração de sistema de três camadas do mesmo sistema restaurando um backup.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1022">For example, you could transfer from a 2-Tier SAP configuration to a 3-Tier system setup of the same system by restoring a backup.</span></span>

<span data-ttu-id="6f87f-1023">A realização do backup e a recuperação de um banco de dados no Azure funcionam da mesma maneira que localmente.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1023">Backing up and restoring a database in Azure works the same way as it does on-premises.</span></span> <span data-ttu-id="6f87f-1024">Consulte as Notas SAP:</span><span class="sxs-lookup"><span data-stu-id="6f87f-1024">Please see SAP Notes:</span></span>

* <span data-ttu-id="6f87f-1025">[1588316]</span><span class="sxs-lookup"><span data-stu-id="6f87f-1025">[1588316]</span></span>
* <span data-ttu-id="6f87f-1026">[1585981]</span><span class="sxs-lookup"><span data-stu-id="6f87f-1026">[1585981]</span></span>

<span data-ttu-id="6f87f-1027">para obter detalhes sobre como criar configurações de despejo e agendar backups.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1027">for details on creating dump configurations and scheduling backups.</span></span> <span data-ttu-id="6f87f-1028">Dependendo da sua estratégia e necessidades, você pode configurar despejos de log e banco de dados em um dos VHDs existentes ou adicionar um VHD adicional para o backup.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1028">Depending on your strategy and needs you can configure database and log dumps to disk onto one of the existing VHDs or add an additional VHD for the backup.</span></span>  <span data-ttu-id="6f87f-1029">Para reduzir o risco de perda de dados em caso de erro, é recomendável usar um VHD em que não esteja localizado nenhum diretório/arquivo de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1029">To reduce the danger of data loss in case of an error it is recommended to use a VHD where no database directory/file is located.</span></span>

<span data-ttu-id="6f87f-1030">Além da compactação do LOB e dados, o SAP ASE também oferece a compactação de backup.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1030">Besides data- and LOB compression SAP ASE also offers backup compression.</span></span> <span data-ttu-id="6f87f-1031">Para ocupar menos espaço com os despejos de banco de dados e de log, é recomendável usar a compactação de backup.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1031">To occupy less space with the database and log dumps it is recommended to use backup compression.</span></span> <span data-ttu-id="6f87f-1032">Consulte a Nota SAP [1588316] para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1032">Please see SAP Note [1588316] for more information.</span></span> <span data-ttu-id="6f87f-1033">A compactação do backup também é crucial para reduzir a quantidade de dados a ser transferida se você planeja baixar os backups ou VHDs contendo despejos de backup da máquina virtual do Azure para o local.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1033">Compressing the backup is also crucial to reduce the amount of data to be transferred if you plan to download backups or VHDs containing backup dumps from the Azure Virtual Machine to on-premises.</span></span>

<span data-ttu-id="6f87f-1034">Não use o espaço temporário da VM do Azure /mnt ou /mnt/resource como o destino do despejo de log ou banco de dados.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1034">Do not use the Azure VM temp space /mnt or /mnt/resource as database or log dump destination.</span></span>

#### <a name="performance-considerations-for-backupsrestores"></a><span data-ttu-id="6f87f-1035">Considerações de desempenho para backups/restaurações</span><span class="sxs-lookup"><span data-stu-id="6f87f-1035">Performance Considerations for Backups/Restores</span></span>
<span data-ttu-id="6f87f-1036">Como em implantações bare-metal, o desempenho de backup/restauração depende de quantos volumes podem ser lidos em paralelo e qual pode ser a taxa de transferência desses volumes.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1036">As in bare-metal deployments, backup/restore performance is dependent on how many volumes can be read in parallel and what the throughput of those volumes might be.</span></span> <span data-ttu-id="6f87f-1037">Além disso, o consumo de CPU usado pela compactação de backup pode desempenhar uma função significativa em VMs com apenas até 8 threads de CPU.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1037">In addition, the CPU consumption used by backup compression may play a significant role on VMs with just up to 8 CPU threads.</span></span> <span data-ttu-id="6f87f-1038">Portanto, é possível supor que:</span><span class="sxs-lookup"><span data-stu-id="6f87f-1038">Therefore, one can assume:</span></span>

* <span data-ttu-id="6f87f-1039">Quanto menor o número de VHDs usados para armazenar os dispositivos de banco de dados, menor é a taxa de transferência geral na leitura</span><span class="sxs-lookup"><span data-stu-id="6f87f-1039">The fewer the number of VHDs used to store the database devices, the smaller the overall throughput in reading</span></span>
* <span data-ttu-id="6f87f-1040">Quanto menor o número de threads de CPU na VM, mais severo é o impacto da compactação de backup</span><span class="sxs-lookup"><span data-stu-id="6f87f-1040">The smaller the number of CPU threads in the VM, the more severe the impact of backup compression</span></span>
* <span data-ttu-id="6f87f-1041">Quanto menos destinos (RAID de software do Linux, VHDs) nos quais gravar o backup, menor é a taxa de transferência</span><span class="sxs-lookup"><span data-stu-id="6f87f-1041">The fewer targets ( Linux software RAID, VHDs) to write the backup to, the lesser the throughput</span></span>

<span data-ttu-id="6f87f-1042">Para aumentar o número de destinos nos quais gravar, existem duas opções que podem ser usadas/combinadas dependendo das suas necessidades:</span><span class="sxs-lookup"><span data-stu-id="6f87f-1042">To increase the number of targets to write to there are two options which can be used/combined depending on your needs:</span></span>

* <span data-ttu-id="6f87f-1043">Distribuir o volume de destino de backup em vários VHDs montados para melhorar a taxa de transferência de IOPS nesse volume distribuído</span><span class="sxs-lookup"><span data-stu-id="6f87f-1043">Striping the backup target volume over multiple mounted VHDs in order to improve the IOPS throughput on that striped volume</span></span>
* <span data-ttu-id="6f87f-1044">Criar uma configuração de despejo no nível do SAP ASE que usa mais de um diretório de destino no qual gravar o despejo</span><span class="sxs-lookup"><span data-stu-id="6f87f-1044">Creating a dump configuration on SAP ASE level which uses more than one target directory to write the dump to</span></span>

<span data-ttu-id="6f87f-1045">A distribuição de um volume em vários VHDs montados foi discutida anteriormente nesse guia.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1045">Striping a volume over multiple mounted VHDs has been discussed earlier in this guide.</span></span> <span data-ttu-id="6f87f-1046">Para obter mais informações sobre como usar vários diretórios na configuração de despejo do ASE SAP, confira a documentação sobre o procedimento armazenado sp_config_dump que é usado para criar a configuração de despejo no [Infocenter do Sybase](http://infocenter.sybase.com/help/index.jsp).</span><span class="sxs-lookup"><span data-stu-id="6f87f-1046">For more information on using multiple directories in the SAP ASE dump configuration please refer to the documentation on Stored Procedure sp_config_dump which is used to create the dump configuration on the [Sybase Infocenter](http://infocenter.sybase.com/help/index.jsp).</span></span>

### <a name="disaster-recovery-with-azure-vms"></a><span data-ttu-id="6f87f-1047">Recuperação de desastre com VMs do Azure</span><span class="sxs-lookup"><span data-stu-id="6f87f-1047">Disaster Recovery with Azure VMs</span></span>
#### <a name="data-replication-with-sap-sybase-replication-server"></a><span data-ttu-id="6f87f-1048">Replicação de dados com o Servidor de Replicação do SAP Sybase</span><span class="sxs-lookup"><span data-stu-id="6f87f-1048">Data Replication with SAP Sybase Replication Server</span></span>
<span data-ttu-id="6f87f-1049">Com o SRS (Servidor de Replicação SAP Sybase), o SAP ASE fornece uma solução de espera passiva para transferir transações de banco de dados para um local distante de forma assíncrona.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1049">With the SAP Sybase Replication Server (SRS) SAP ASE provides a warm standby solution to transfer database transactions to a distant location asynchronously.</span></span>

<span data-ttu-id="6f87f-1050">A instalação e operação do SRS funcionam tão bem funcionalmente em uma VM hospedada nos Serviços de Máquina Virtual do Azure como localmente.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1050">The installation and operation of SRS works as well functionally in a VM hosted in Azure Virtual Machine Services as it does on-premises.</span></span>

<span data-ttu-id="6f87f-1051">O ASE HADR por meio do servidor de replicação do SAP NÃO tem suporte neste momento.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1051">ASE HADR via SAP Replication Server is NOT supported at this point in time.</span></span> <span data-ttu-id="6f87f-1052">Ele pode ser testado com e liberado para plataformas Microsoft Azure no futuro.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1052">It might be tested with and released for Microsoft Azure platforms in the future.</span></span>

## <a name="specifics-to-oracle-database-on-windows"></a><span data-ttu-id="6f87f-1053">Informações específicas do Banco de Dados Oracle no Windows</span><span class="sxs-lookup"><span data-stu-id="6f87f-1053">Specifics to Oracle Database on Windows</span></span>
<span data-ttu-id="6f87f-1054">Desde meados de 2013, o software Oracle tem suporte pela Oracle para ser executado no Microsoft Windows Hyper-V e no Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1054">Since midyear 2013, Oracle software is supported by Oracle to run on Microsoft Windows Hyper-V and Azure.</span></span> <span data-ttu-id="6f87f-1055">Leia este artigo para obter mais detalhes sobre o suporte geral do Windows Hyper-V e Azure pela Oracle: <https://blogs.oracle.com/cloud/entry/oracle_and_microsoft_join_forces></span><span class="sxs-lookup"><span data-stu-id="6f87f-1055">Please read this article to get more details on the general support of Windows Hyper-V and Azure by Oracle: <https://blogs.oracle.com/cloud/entry/oracle_and_microsoft_join_forces></span></span>

<span data-ttu-id="6f87f-1056">Após o suporte geral, o cenário específico de aplicativos SAP que utilizam os Bancos de Dados Oracle também tem suporte.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1056">Following the general support, the specific scenario of SAP applications leveraging Oracle Databases is supported as well.</span></span> <span data-ttu-id="6f87f-1057">Os detalhes são indicados nesta parte do documento.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1057">Details are named in this part of the document.</span></span>

### <a name="oracle-version-support"></a><span data-ttu-id="6f87f-1058">Suporte de versão do Oracle</span><span class="sxs-lookup"><span data-stu-id="6f87f-1058">Oracle Version Support</span></span>
<span data-ttu-id="6f87f-1059">Todos os detalhes sobre as versões do Oracle e versões de SO correspondentes que têm suporte para execução do SAP no Oracle nas máquinas virtuais do Azure podem ser encontrados na Nota SAP [2039619]</span><span class="sxs-lookup"><span data-stu-id="6f87f-1059">All details about Oracle versions and corresponding OS versions which are supported for running SAP on Oracle on Azure Virtual Machines can be found in the following SAP Note [2039619]</span></span>

<span data-ttu-id="6f87f-1060">Informações gerais sobre como executar o SAP Business Suite no Oracle podem ser encontradas na SCN: <https://scn.sap.com/community/oracle></span><span class="sxs-lookup"><span data-stu-id="6f87f-1060">General information about running SAP Business Suite on Oracle can be found on SCN: <https://scn.sap.com/community/oracle></span></span>

### <a name="oracle-configuration-guidelines-for-sap-installations-in-azure-vms"></a><span data-ttu-id="6f87f-1061">Diretrizes de configuração do Oracle para instalações do SAP em VMs do Azure</span><span class="sxs-lookup"><span data-stu-id="6f87f-1061">Oracle Configuration Guidelines for SAP Installations in Azure VMs</span></span>
#### <a name="storage-configuration"></a><span data-ttu-id="6f87f-1062">Configuração de armazenamento</span><span class="sxs-lookup"><span data-stu-id="6f87f-1062">Storage configuration</span></span>
<span data-ttu-id="6f87f-1063">Há suporte a apenas uma única instância do Oracle usando discos formatados em NTFS.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1063">Only single instance Oracle using NTFS formatted disks is supported.</span></span> <span data-ttu-id="6f87f-1064">Todos os arquivos de banco de dados devem ser armazenados no sistema de arquivos NTFS com base em discos VHD.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1064">All database files must be stored on the NTFS file system based on VHD disks.</span></span> <span data-ttu-id="6f87f-1065">Esses VHDs são montados na VM do Azure e se baseiam no Armazenamento de Blobs de Páginas do Azure (<https://msdn.microsoft.com/library/azure/ee691964.aspx>).</span><span class="sxs-lookup"><span data-stu-id="6f87f-1065">These VHDs are mounted to the Azure VM and are based on Azure Page BLOB Storage (<https://msdn.microsoft.com/library/azure/ee691964.aspx>).</span></span>
<span data-ttu-id="6f87f-1066">Qualquer variante de unidades de rede ou compartilhamentos remotos como serviços de arquivo do Azure:</span><span class="sxs-lookup"><span data-stu-id="6f87f-1066">Any kind of network drives or remote shares like Azure file services:</span></span>

* <span data-ttu-id="6f87f-1067"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx></span><span class="sxs-lookup"><span data-stu-id="6f87f-1067"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx></span></span>
* <span data-ttu-id="6f87f-1068"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/27/persisting-connections-to-microsoft-azure-files.aspx></span><span class="sxs-lookup"><span data-stu-id="6f87f-1068"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/27/persisting-connections-to-microsoft-azure-files.aspx></span></span>

<span data-ttu-id="6f87f-1069">**NÃO** têm suporte para arquivos de banco de dados Oracle!</span><span class="sxs-lookup"><span data-stu-id="6f87f-1069">are **NOT** supported for Oracle database files!</span></span>

<span data-ttu-id="6f87f-1070">Usando VHDs do Azure com base no Armazenamento de Blobs de Páginas do Azure, as declarações feitas nos capítulos [Cache para VMs e VHDs][dbms-guide-2.1] e [Armazenamento do Microsoft Azure][dbms-guide-2.3] deste documento também se aplicam a implantações com o Banco de Dados Oracle.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1070">Using Azure VHDs based on Azure Page BLOB Storage, the statements made in this document in chapter [Caching for VMs and VHDs][dbms-guide-2.1] and [Microsoft Azure Storage][dbms-guide-2.3] apply to deployments with the Oracle Database as well.</span></span>

<span data-ttu-id="6f87f-1071">Conforme explicado anteriormente na parte geral do documento, existem cotas na taxa de transferência de IOPS para VHDs do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1071">As explained earlier in the general part of the document, quotas on IOPS throughput for Azure VHDs exist.</span></span> <span data-ttu-id="6f87f-1072">As cotas exatas dependem do tipo de VM usado.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1072">The exact quotas are depending on the VM type used.</span></span> <span data-ttu-id="6f87f-1073">Uma lista de tipos de VM com suas cotas pode ser encontrada [aqui][virtual-machines-sizes]</span><span class="sxs-lookup"><span data-stu-id="6f87f-1073">A list of VM types with their quotas can be found [here][virtual-machines-sizes]</span></span>

<span data-ttu-id="6f87f-1074">Para identificar os tipos de VM do Azure com suporte, consulte a Nota SAP [1928533]</span><span class="sxs-lookup"><span data-stu-id="6f87f-1074">To identify the supported Azure VM types, please refer to SAP note [1928533]</span></span>

<span data-ttu-id="6f87f-1075">Desde que a cota de IOPS por disco atual atenda aos requisitos, é possível armazenar todos os arquivos de DB em um único VHD do Azure montado.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1075">As long as the current IOPS quota per disk satisfies the requirements, it is possible to store all the DB files on one single mounted Azure VHD.</span></span>

<span data-ttu-id="6f87f-1076">Se mais IOPS forem necessários, será altamente recomendável usar pools de armazenamento do Windows (disponíveis apenas no Windows Server 2012 e superior) ou distribuição do Windows para o Windows 2008 R2 para criar um grande dispositivo lógico em vários discos VHD montados.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1076">If more IOPS are required, it is strongly recommended to use Window Storage Pools (only available in Windows Server 2012 and higher) or Windows striping for Windows 2008 R2 to create one big logical device over multiple mounted VHD disks.</span></span> <span data-ttu-id="6f87f-1077">Veja também o capítulo [RAID de Software][dbms-guide-2.2] deste documento.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1077">See also chapter [Software RAID][dbms-guide-2.2] of this document.</span></span> <span data-ttu-id="6f87f-1078">Essa abordagem simplifica a sobrecarga administrativa para gerenciar o espaço em disco e evita o esforço para distribuir manualmente os arquivos entre vários VHDs montados.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1078">This approach simplifies the administration overhead to manage the disk space and avoids the effort to manually distribute files across multiple mounted VHDs.</span></span>

#### <a name="backup--restore"></a><span data-ttu-id="6f87f-1079">Backup/restauração</span><span class="sxs-lookup"><span data-stu-id="6f87f-1079">Backup / Restore</span></span>
<span data-ttu-id="6f87f-1080">Para a funcionalidade de backup/restauração, o SAP BR*Tools para Oracle tem suporte da mesma maneira que o Hyper-V e sistemas operacionais Windows Server standard.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1080">For backup / restore functionality, the SAP BR*Tools for Oracle are supported in the same way as on standard Windows Server Operating Systems and Hyper-V.</span></span> <span data-ttu-id="6f87f-1081">O RMAN (Gerenciador de Recuperação) da Oracle também tem suporte para backups em disco e restaurações do disco.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1081">Oracle Recovery Manager (RMAN) is also supported for backups to disk and restore from disk.</span></span>

#### <a name="high-availability"></a><span data-ttu-id="6f87f-1082">Alta disponibilidade</span><span class="sxs-lookup"><span data-stu-id="6f87f-1082">High Availability</span></span>
<span data-ttu-id="6f87f-1083">[comment]: <> (O link se refere ao ASM)</span><span class="sxs-lookup"><span data-stu-id="6f87f-1083">[comment]: <> (link refers to ASM)</span></span>
<span data-ttu-id="6f87f-1084">O Oracle Data Guard tem suporte para fins de recuperação de desastre e alta disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1084">Oracle Data Guard is supported for high availability and disaster recovery purposes.</span></span> <span data-ttu-id="6f87f-1085">É possível encontrar detalhes [nesta][virtual-machines-windows-classic-configure-oracle-data-guard] documentação.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1085">Details can be found in [this][virtual-machines-windows-classic-configure-oracle-data-guard] documentation.</span></span>

#### <a name="other"></a><span data-ttu-id="6f87f-1086">outro</span><span class="sxs-lookup"><span data-stu-id="6f87f-1086">Other</span></span>
<span data-ttu-id="6f87f-1087">Todos os outros tópicos gerais, como o monitoramento do SAP ou conjuntos de disponibilidade do Azure, se aplicam como descrito nos três primeiros capítulos desse documento para implantações de VMs com o Banco de Dados Oracle.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1087">All other general topics like Azure Availability Sets or SAP monitoring apply as described in the first three chapters of this document for deployments of VMs with the Oracle Database as well.</span></span>

## <a name="specifics-for-the-sap-maxdb-database-on-windows"></a><span data-ttu-id="6f87f-1088">Informações específicas para o banco de dados SAP MaxDB no Windows</span><span class="sxs-lookup"><span data-stu-id="6f87f-1088">Specifics for the SAP MaxDB Database on Windows</span></span>
### <a name="sap-maxdb-version-support"></a><span data-ttu-id="6f87f-1089">Suporte de versão do SAP MaxDB</span><span class="sxs-lookup"><span data-stu-id="6f87f-1089">SAP MaxDB Version Support</span></span>
<span data-ttu-id="6f87f-1090">No momento, o SAP dá suporte ao SAP MaxDB versão 7.9 para o uso com produtos baseados no SAP NetWeaver no Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1090">SAP currently supports SAP MaxDB version 7.9 for use with SAP NetWeaver-based products in Azure.</span></span> <span data-ttu-id="6f87f-1091">Todas as atualizações para o servidor SAP MaxDB ou drivers JDBC e ODBC a serem usadas com produtos baseados no SAP NetWeaver são fornecidas exclusivamente pelo SAP Service Marketplace em <https://support.sap.com/swdc>.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1091">All updates for SAP MaxDB server, or JDBC and ODBC drivers to be used with SAP NetWeaver-based products are provided solely through the SAP Service Marketplace at <https://support.sap.com/swdc>.</span></span>
<span data-ttu-id="6f87f-1092">Informações gerais sobre como executar o SAP NetWeaver no SAP MaxDB podem ser encontradas em <https://scn.sap.com/community/maxdb>.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1092">General information on running SAP NetWeaver on SAP MaxDB can be found at <https://scn.sap.com/community/maxdb>.</span></span>

### <a name="supported-microsoft-windows-versions-and-azure-vm-types-for-sap-maxdb-dbms"></a><span data-ttu-id="6f87f-1093">Versões do Microsoft Windows e tipos de VM do Azure com suporte para DBMS do SAP MaxDB</span><span class="sxs-lookup"><span data-stu-id="6f87f-1093">Supported Microsoft Windows Versions and Azure VM types for SAP MaxDB DBMS</span></span>
<span data-ttu-id="6f87f-1094">Para localizar a versão com suporte do Microsoft Windows para DBMS do SAP MaxDB no Azure, consulte:</span><span class="sxs-lookup"><span data-stu-id="6f87f-1094">To find the supported Microsoft Windows version for SAP MaxDB DBMS on Azure, see:</span></span>

* <span data-ttu-id="6f87f-1095">[PAM (Matriz de Disponibilidade de Produto) da SAP][sap-pam]</span><span class="sxs-lookup"><span data-stu-id="6f87f-1095">[SAP Product Availability Matrix (PAM)][sap-pam]</span></span>
* <span data-ttu-id="6f87f-1096">Nota SAP [1928533]</span><span class="sxs-lookup"><span data-stu-id="6f87f-1096">SAP Note [1928533]</span></span>

<span data-ttu-id="6f87f-1097">É altamente recomendável usar a versão mais recente do sistema operacional Microsoft Windows, que é o Microsoft Windows 2012 R2.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1097">It is highly recommended to use the newest version of the operating system Microsoft Windows, which is Microsoft Windows 2012 R2.</span></span>

### <a name="available-sap-maxdb-documentation"></a><span data-ttu-id="6f87f-1098">Documentação do SAP MaxDB disponível</span><span class="sxs-lookup"><span data-stu-id="6f87f-1098">Available SAP MaxDB Documentation</span></span>
<span data-ttu-id="6f87f-1099">Você pode encontrar a lista atualizada da documentação do SAP MaxDB na seguinte Nota SAP [767598]</span><span class="sxs-lookup"><span data-stu-id="6f87f-1099">You can find the updated list of SAP MaxDB documentation in the following SAP Note [767598]</span></span>

### <a name="sap-maxdb-configuration-guidelines-for-sap-installations-in-azure-vms"></a><span data-ttu-id="6f87f-1100">Diretrizes de configuração do SAP MaxDB para instalações do SAP em VMs do Azure</span><span class="sxs-lookup"><span data-stu-id="6f87f-1100">SAP MaxDB Configuration Guidelines for SAP Installations in Azure VMs</span></span>
#### <span data-ttu-id="6f87f-1101"><a name="b48cfe3b-48e9-4f5b-a783-1d29155bd573"></a>Configuração de armazenamento</span><span class="sxs-lookup"><span data-stu-id="6f87f-1101"><a name="b48cfe3b-48e9-4f5b-a783-1d29155bd573"></a>Storage configuration</span></span>
<span data-ttu-id="6f87f-1102">As práticas recomendadas de armazenamento do Azure para SAP MaxDB seguem as recomendações gerais mencionadas no capítulo [Estrutura de uma implantação do RDBMS][dbms-guide-2].</span><span class="sxs-lookup"><span data-stu-id="6f87f-1102">Azure storage best practices for SAP MaxDB follow the general recommendations mentioned in chapter [Structure of a RDBMS Deployment][dbms-guide-2].</span></span>

> [!IMPORTANT]
> <span data-ttu-id="6f87f-1103">Como outros bancos de dados, o SAP MaxDB também tem arquivos de log e de dados.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1103">Like other databases, SAP MaxDB also has data and log files.</span></span> <span data-ttu-id="6f87f-1104">No entanto, na terminologia do SAP MaxDB o termo correto é "volume" (não "arquivo").</span><span class="sxs-lookup"><span data-stu-id="6f87f-1104">However, in SAP MaxDB terminology the correct term is “volume” (not “file”).</span></span> <span data-ttu-id="6f87f-1105">Por exemplo, há volumes de dados e volumes de log do SAP MaxDB.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1105">For example, there are SAP MaxDB data volumes and log volumes.</span></span> <span data-ttu-id="6f87f-1106">Não os confunda com volumes de disco do SO.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1106">Do not confuse these with OS disk volumes.</span></span>
>
>

<span data-ttu-id="6f87f-1107">Em resumo, você precisa:</span><span class="sxs-lookup"><span data-stu-id="6f87f-1107">In short you have to:</span></span>

* <span data-ttu-id="6f87f-1108">Definir a conta de armazenamento do Azure que contém os volumes de log e de dados (ou seja, arquivos) do SAP MaxDB para **LRS (Armazenamento Local Redundante)**, conforme especificado no capítulo [Armazenamento do Microsoft Azure][dbms-guide-2.3].</span><span class="sxs-lookup"><span data-stu-id="6f87f-1108">Set the Azure storage account that holds the SAP MaxDB data and log volumes (i.e. files) to **Local Redundant Storage (LRS)** as specified in chapter [Microsoft Azure Storage][dbms-guide-2.3].</span></span>
* <span data-ttu-id="6f87f-1109">Separe o caminho de E/S para volumes de dados (ou seja, arquivos) do SAP MaxDB do caminho de E/S para volumes de log (ou seja, arquivos).</span><span class="sxs-lookup"><span data-stu-id="6f87f-1109">Separate the IO path for SAP MaxDB data volumes (i.e. files) from the IO path for log volumes (i.e. files).</span></span> <span data-ttu-id="6f87f-1110">Isso significa que os volumes de dados (ou seja, arquivos) do SAP MaxDB precisam ser instalado em uma unidade lógica e os volumes de log (ou seja, arquivos) do SAP MaxDB precisam ser instalado em outra unidade lógica.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1110">This means that SAP MaxDB data volumes (i.e. files) have to be installed on one logical drive and SAP MaxDB log volumes (i.e. files) have to be installed on another logical drive.</span></span>
* <span data-ttu-id="6f87f-1111">Definir o cache de arquivo apropriado para cada blob do Azure, dependendo se você o usar para volumes de log ou de dados (ou seja, arquivos) do SAP MaxDB e se usar o Armazenamento Standard ou o Armazenamento Premium do Azure, conforme descrito no capítulo [Caching para VMs][dbms-guide-2.1].</span><span class="sxs-lookup"><span data-stu-id="6f87f-1111">Set the proper file caching for each Azure blob, depending on whether you use it for SAP MaxDB data or log volumes (i.e. files), and whether you use Azure Standard or Azure Premium Storage, as described in chapter [Caching for VMs][dbms-guide-2.1].</span></span>
* <span data-ttu-id="6f87f-1112">Desde que a cota de IOPS por disco atenda aos requisitos, é possível armazenar todos os volumes de dados em um único VHD do Azure montado e também armazenar todos os volumes de log do banco de dados em outro único VHD do Azure montado.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1112">As long as the current IOPS quota per disk satisfies the requirements, it is possible to store all the data volumes on a single mounted Azure VHD, and also store all database log volumes on another single mounted Azure VHD.</span></span>
* <span data-ttu-id="6f87f-1113">Se mais IOPS e/ou espaço forem necessários, será altamente recomendável usar pools de armazenamento do Microsoft Windows (disponíveis apenas no Microsoft Windows Server 2012 e superior) ou distribuição do Microsoft Windows para o Microsoft Windows 2008 R2 para criar um grande dispositivo lógico em vários discos VHD montados.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1113">If more IOPS and/or space are required, it is strongly recommended to use Microsoft Window Storage Pools (only available in Microsoft Windows Server 2012 and higher) or Microsoft Windows striping for Microsoft Windows 2008 R2 to create one large logical device over multiple mounted VHD disks.</span></span> <span data-ttu-id="6f87f-1114">Veja também o capítulo [RAID de Software][dbms-guide-2.2] deste documento.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1114">See also chapter [Software RAID][dbms-guide-2.2] of this document.</span></span> <span data-ttu-id="6f87f-1115">Essa abordagem simplifica a sobrecarga administrativa para gerenciar o espaço em disco e evita o esforço de distribuir manualmente os arquivos entre vários VHDs montados.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1115">This approach simplifies the administration overhead to manage the disk space and avoids the effort of manually distributing files across multiple mounted VHDs.</span></span>
* <span data-ttu-id="6f87f-1116">Para os requisitos de IOPS mais altos, você pode usar o Armazenamento Premium do Azure, que está disponível nas VMs das séries DS e GS.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1116">For the highest IOPS requirements, you can use Azure Premium Storage, which is available on DS-series and GS-series VMs.</span></span>

![Configuração de referência da VM IaaS do Azure para DBMS do SAP MaxDB][dbms-guide-figure-600]

#### <span data-ttu-id="6f87f-1118"><a name="23c78d3b-ca5a-4e72-8a24-645d141a3f5d"></a>Backup e restauração</span><span class="sxs-lookup"><span data-stu-id="6f87f-1118"><a name="23c78d3b-ca5a-4e72-8a24-645d141a3f5d"></a>Backup and Restore</span></span>
<span data-ttu-id="6f87f-1119">Ao implantar o SAP MaxDB no Azure, você deve examinar sua metodologia de backup.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1119">When deploying SAP MaxDB into Azure, you must review your backup methodology.</span></span> <span data-ttu-id="6f87f-1120">Mesmo se o sistema não for um sistema produtivo, o banco de dados SAP hospedado pelo SAP MaxDB deverá ser submetido a backup periodicamente.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1120">Even if the system is not a productive system, the SAP database hosted by SAP MaxDB must be backed up periodically.</span></span> <span data-ttu-id="6f87f-1121">Como o armazenamento do Azure mantém três imagens, um backup agora é menos importante em termos de proteger seu sistema contra falhas de armazenamento e falhas administrativas ou operacionais mais importantes.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1121">Since Azure Storage keeps three images, a backup is now less important in terms of protecting your system against storage failure and more important operational or administrative failures.</span></span> <span data-ttu-id="6f87f-1122">A razão principal para manter um plano de backup e restauração adequado é para que você possa compensar erros lógicos ou manuais fornecendo funcionalidades de recuperação pontual.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1122">The primary reason for maintaining a proper backup and restore plan is so that you can compensate for logical or manual errors by providing point-in-time recovery capabilities.</span></span> <span data-ttu-id="6f87f-1123">Portanto, o objetivo é usar backups para restaurar o banco de dados para um determinado momento ou usar os backups no Azure para propagar outro sistema copiando o banco de dados existente.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1123">So the goal is to either use backups to restore the database to a certain point in time or to use the backups in Azure to seed another system by copying the existing database.</span></span> <span data-ttu-id="6f87f-1124">Por exemplo, você pode transferir de uma configuração do SAP de duas camadas para uma configuração de sistema de três camadas do mesmo sistema restaurando um backup.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1124">For example, you could transfer from a 2-tier SAP configuration to a 3-tier system setup of the same system by restoring a backup.</span></span>

<span data-ttu-id="6f87f-1125">A realização do backup e a restauração de um banco de dados no Azure funcionam da mesma maneira que para sistemas locais, então você pode usar ferramentas standard de backup/restauração do MaxDB SAP, que são descritas em um dos documentos da documentação do SAP MaxDB listados na Nota SAP [767598].</span><span class="sxs-lookup"><span data-stu-id="6f87f-1125">Backing up and restoring a database in Azure works the same way as it does for on-premises systems, so you can use standard SAP MaxDB backup/restore tools, which are described in one of the SAP MaxDB documentation documents listed in SAP Note [767598].</span></span>

#### <span data-ttu-id="6f87f-1126"><a name="77cd2fbb-307e-4cbf-a65f-745553f72d2c"></a>Considerações de desempenho para backup e restauração</span><span class="sxs-lookup"><span data-stu-id="6f87f-1126"><a name="77cd2fbb-307e-4cbf-a65f-745553f72d2c"></a>Performance Considerations for Backup and Restore</span></span>
<span data-ttu-id="6f87f-1127">Como em implantações bare-metal, o desempenho de backup e restauração depende de quantos volumes podem ser lidos em paralelo e a taxa de transferência desses volumes.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1127">As in bare-metal deployments, backup and restore performance is dependent on how many volumes can be read in parallel and the throughput of those volumes.</span></span> <span data-ttu-id="6f87f-1128">Além disso, o consumo de CPU usado pela compactação de backup pode desempenhar uma função significativa em VMs com até 8 threads de CPU.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1128">In addition, the CPU consumption used by backup compression can play a significant role on VMs with up to 8 CPU threads.</span></span> <span data-ttu-id="6f87f-1129">Portanto, é possível supor que:</span><span class="sxs-lookup"><span data-stu-id="6f87f-1129">Therefore, one can assume:</span></span>

* <span data-ttu-id="6f87f-1130">Quanto menor o número de VHDs usados para armazenar dispositivos de banco de dados, menor é a taxa de transferência de leitura geral.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1130">The fewer the number of VHDs used to store the database devices, the lower the overall read throughput</span></span>
* <span data-ttu-id="6f87f-1131">Quanto menor o número de threads de CPU na VM, mais severo é o impacto da compactação de backup</span><span class="sxs-lookup"><span data-stu-id="6f87f-1131">The smaller the number of CPU threads in the VM, the more severe the impact of backup compression</span></span>
* <span data-ttu-id="6f87f-1132">Quanto menos destinos (diretórios de distribuição, VHDs) nos quais gravar o backup, menor é a taxa de transferência</span><span class="sxs-lookup"><span data-stu-id="6f87f-1132">The fewer targets (Stripe Directories, VHDs) to write the backup to, the lower the throughput</span></span>

<span data-ttu-id="6f87f-1133">Para aumentar o número de destinos nos quais gravar, existem duas opções que podem ser usadas, possivelmente em combinação, dependendo das suas necessidades:</span><span class="sxs-lookup"><span data-stu-id="6f87f-1133">To increase the number of targets to write to, there are two options that you can use, possibly in combination, depending on your needs:</span></span>

* <span data-ttu-id="6f87f-1134">Dedicando volumes separados para backup</span><span class="sxs-lookup"><span data-stu-id="6f87f-1134">Dedicating separate volumes for backup</span></span>
* <span data-ttu-id="6f87f-1135">Distribuir o volume de destino de backup em vários VHDs montados para melhorar a taxa de transferência de IOPS nesse volume de disco distribuído</span><span class="sxs-lookup"><span data-stu-id="6f87f-1135">Striping the backup target volume over multiple mounted VHDs in order to improve the IOPS throughput on that striped disk volume</span></span>
* <span data-ttu-id="6f87f-1136">Com dispositivos de disco lógico dedicados separados para:</span><span class="sxs-lookup"><span data-stu-id="6f87f-1136">Having separate dedicated logical disk devices for:</span></span>
  * <span data-ttu-id="6f87f-1137">Volumes de backup (ou seja, arquivos) do SAP MaxDB</span><span class="sxs-lookup"><span data-stu-id="6f87f-1137">SAP MaxDB backup volumes (i.e. files)</span></span>
  * <span data-ttu-id="6f87f-1138">Volumes de dados (ou seja, arquivos) do SAP MaxDB</span><span class="sxs-lookup"><span data-stu-id="6f87f-1138">SAP MaxDB data volumes ( i.e. files)</span></span>
  * <span data-ttu-id="6f87f-1139">Volumes de log (ou seja, arquivos) do SAP MaxDB</span><span class="sxs-lookup"><span data-stu-id="6f87f-1139">SAP MaxDB log volumes ( i.e. files)</span></span>

<span data-ttu-id="6f87f-1140">A distribuição de um volume em vários VHDs montados foi discutida anteriormente no capítulo [RAID de software][dbms-guide-2.2] deste documento.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1140">Striping a volume over multiple mounted VHDs has been discussed earlier in chapter [Software RAID][dbms-guide-2.2] of this document.</span></span>

#### <span data-ttu-id="6f87f-1141"><a name="f77c1436-9ad8-44fb-a331-8671342de818"></a>Outros</span><span class="sxs-lookup"><span data-stu-id="6f87f-1141"><a name="f77c1436-9ad8-44fb-a331-8671342de818"></a>Other</span></span>
<span data-ttu-id="6f87f-1142">Todos os outros tópicos gerais, como o monitoramento do SAP ou conjuntos de disponibilidade do Azure, também se aplicam como descrito nos três primeiros capítulos desse documento para implantações de VMs com o banco de dados SAP MaxDB.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1142">All other general topics such as Azure Availability Sets or SAP monitoring also apply as described in the first three chapters of this document for deployments of VMs with the SAP MaxDB database.</span></span>
<span data-ttu-id="6f87f-1143">Outras configurações específicas do SAP MaxDB são transparentes para VMs do Azure e são descritas em diferentes documentos listados na Nota SAP [767598] e nestas Notas SAP:</span><span class="sxs-lookup"><span data-stu-id="6f87f-1143">Other SAP MaxDB-specific settings are transparent to Azure VMs and are described in different documents listed in SAP Note [767598] and in these SAP notes:</span></span>

* <span data-ttu-id="6f87f-1144">[826037]</span><span class="sxs-lookup"><span data-stu-id="6f87f-1144">[826037]</span></span>
* <span data-ttu-id="6f87f-1145">[1139904]</span><span class="sxs-lookup"><span data-stu-id="6f87f-1145">[1139904]</span></span>
* <span data-ttu-id="6f87f-1146">[1173395]</span><span class="sxs-lookup"><span data-stu-id="6f87f-1146">[1173395]</span></span>

## <a name="specifics-for-sap-livecache-on-windows"></a><span data-ttu-id="6f87f-1147">Informações específicas para o SAP liveCache no Windows</span><span class="sxs-lookup"><span data-stu-id="6f87f-1147">Specifics for SAP liveCache on Windows</span></span>
### <a name="sap-livecache-version-support"></a><span data-ttu-id="6f87f-1148">Suporte de versão do SAP liveCache</span><span class="sxs-lookup"><span data-stu-id="6f87f-1148">SAP liveCache Version Support</span></span>
<span data-ttu-id="6f87f-1149">A versão mínima do SAP liveCache com suporte nas Máquinas Virtuais do Azure é **SAP LC/LCAPPS 10.0 SP 25**, incluindo **liveCache 7.9.08.31** e **LCA-Build 25**, lançado para **EhP 2 for SAP SCM 7.0** e superior.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1149">Minimal version of SAP liveCache supported in Azure Virtual Machines is **SAP LC/LCAPPS 10.0 SP 25** including **liveCache 7.9.08.31** and **LCA-Build 25**, released for **EhP 2 for SAP SCM 7.0** and higher.</span></span>

### <a name="supported-microsoft-windows-versions-and-azure-vm-types-for-sap-livecache-dbms"></a><span data-ttu-id="6f87f-1150">Versões do Microsoft Windows e tipos de VM do Azure com suporte para DBMS do SAP liveCache</span><span class="sxs-lookup"><span data-stu-id="6f87f-1150">Supported Microsoft Windows Versions and Azure VM types for SAP liveCache DBMS</span></span>
<span data-ttu-id="6f87f-1151">Para localizar a versão com suporte do Microsoft Windows para SAP liveCache no Azure, consulte:</span><span class="sxs-lookup"><span data-stu-id="6f87f-1151">To find the supported Microsoft Windows version for SAP liveCache on Azure, see:</span></span>

* <span data-ttu-id="6f87f-1152">[PAM (Matriz de Disponibilidade de Produto) da SAP][sap-pam]</span><span class="sxs-lookup"><span data-stu-id="6f87f-1152">[SAP Product Availability Matrix (PAM)][sap-pam]</span></span>
* <span data-ttu-id="6f87f-1153">Nota SAP [1928533]</span><span class="sxs-lookup"><span data-stu-id="6f87f-1153">SAP Note [1928533]</span></span>

<span data-ttu-id="6f87f-1154">É altamente recomendável usar a versão mais recente do sistema operacional Microsoft Windows, que é o Microsoft Windows 2012 R2.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1154">It is highly recommended to use the newest version of the operating system Microsoft Windows, which is Microsoft Windows 2012 R2.</span></span>

### <a name="sap-livecache-configuration-guidelines-for-sap-installations-in-azure-vms"></a><span data-ttu-id="6f87f-1155">Diretrizes de configuração do SAP liveCache para instalações do SAP em VMs do Azure</span><span class="sxs-lookup"><span data-stu-id="6f87f-1155">SAP liveCache Configuration Guidelines for SAP Installations in Azure VMs</span></span>
#### <a name="recommended-azure-vm-types"></a><span data-ttu-id="6f87f-1156">Tipos de VM do Azure recomendados</span><span class="sxs-lookup"><span data-stu-id="6f87f-1156">Recommended Azure VM Types</span></span>
<span data-ttu-id="6f87f-1157">Como SAP liveCache é um aplicativo que executa cálculos enormes, a quantidade e a velocidade de RAM e CPU têm uma grande influência no desempenho do SAP liveCache.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1157">As SAP liveCache is an application that performs huge calculations, the amount and speed of RAM and CPU has a major influence on SAP liveCache performance.</span></span>

<span data-ttu-id="6f87f-1158">Para os tipos de VM do Azure com suporte pelo SAP (Nota SAP [1928533]), todos os recursos de CPU virtual alocados para a máquina virtual são apoiados por recursos de CPU físicos dedicados do hipervisor.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1158">For the Azure VM types supported by SAP (SAP Note [1928533]), all virtual CPU resources allocated to the VM are backed by dedicated physical CPU resources of the hypervisor.</span></span> <span data-ttu-id="6f87f-1159">Não ocorre o excesso de provisionamento (e, portanto, nenhuma competição por recursos de CPU).</span><span class="sxs-lookup"><span data-stu-id="6f87f-1159">No overprovisioning (and therefore no competition for CPU resources) takes place.</span></span>

<span data-ttu-id="6f87f-1160">Da mesma forma, para todos os tipos de instância VM do Azure com suporte pelo SAP, a memória VM é 100% mapeada para a memória física, o excesso de provisionamento (sobreposição), por exemplo, não é usado.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1160">Similarly, for all Azure VM instance types supported by SAP, the VM memory is 100 % mapped to the physical memory – overprovisioning (over-commitment), for example, is not used.</span></span>

<span data-ttu-id="6f87f-1161">Sob essa perspectiva, é altamente recomendável usar o tipo de VM do Azure da nova série D ou série DS (em combinação com o Armazenamento Premium do Azure), pois eles têm processadores 60% mais rápidos que a série A.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1161">From this perspective it is highly recommended to use the new D- series or DS-series (in combination with Azure Premium Storage) Azure VM type, as they have 60 % faster processors than the A-series.</span></span> <span data-ttu-id="6f87f-1162">Para a carga de RAM e CPU mais alta, você pode usar VMs das séries G e GS (em combinação com o Armazenamento Premium do Azure) com a família E5 v3 de processadores Intel® Xeon® mais recente, que tem o dobro de memória e quatro vezes o SSDs (armazenamento da unidade de estado sólido) da série D/DS.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1162">For the highest RAM and CPU load, you can use G-series and GS-series (in combination with Azure Premium Storage) VMs with the latest Intel® Xeon® processor E5 v3 family, which have twice the memory and four times the solid state drive storage (SSDs) of the D/DS-series.</span></span>

#### <a name="storage-configuration"></a><span data-ttu-id="6f87f-1163">Configuração de armazenamento</span><span class="sxs-lookup"><span data-stu-id="6f87f-1163">Storage Configuration</span></span>
<span data-ttu-id="6f87f-1164">Como o SAP liveCache se baseia na tecnologia SAP MaxDB, todas as práticas recomendadas de armazenamento do Azure mencionadas para o SAP MaxDB no capítulo [Configuração de armazenamento][dbms-guide-8.4.1] também são válidas para o SAP liveCache.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1164">As SAP liveCache is based on SAP MaxDB technology, all the Azure storage best practice recommendations mentioned for SAP MaxDB in chapter [Storage configuration][dbms-guide-8.4.1] are also valid for SAP liveCache.</span></span>

#### <a name="dedicated-azure-vm-for-livecache"></a><span data-ttu-id="6f87f-1165">VM do Azure dedicada para o liveCache</span><span class="sxs-lookup"><span data-stu-id="6f87f-1165">Dedicated Azure VM for liveCache</span></span>
<span data-ttu-id="6f87f-1166">Como o SAP liveCache usa intensivamente a potência computacional, para o uso produtivo é altamente recomendável implantar em uma máquina virtual do Azure dedicada.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1166">As SAP liveCache intensively uses computational power, for productive usage it is highly recommended to deploy on a dedicated Azure Virtual Machine.</span></span>

![VM do Azure dedicada para liveCache para caso de uso produtivo][dbms-guide-figure-700]

#### <a name="backup-and-restore"></a><span data-ttu-id="6f87f-1168">Backup e restauração</span><span class="sxs-lookup"><span data-stu-id="6f87f-1168">Backup and Restore</span></span>
<span data-ttu-id="6f87f-1169">O backup e a restauração, incluindo considerações de desempenho, já estão descritos nos capítulos relevantes do SAP MaxDB, [Backup e restauração][dbms-guide-8.4.2] e [Considerações de desempenho para backup e restauração][dbms-guide-8.4.3].</span><span class="sxs-lookup"><span data-stu-id="6f87f-1169">Backup and restore, including performance considerations, are already described in the relevant SAP MaxDB chapters [Backup and Restore][dbms-guide-8.4.2] and [Performance Considerations for Backup and Restore][dbms-guide-8.4.3].</span></span>

#### <a name="other"></a><span data-ttu-id="6f87f-1170">outro</span><span class="sxs-lookup"><span data-stu-id="6f87f-1170">Other</span></span>
<span data-ttu-id="6f87f-1171">Todos os outros tópicos gerais já estão descritos [neste][dbms-guide-8.4.4] capítulo relevante sobre o SAP MaxDB.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1171">All other general topics are already described in the relevant SAP MaxDB [this][dbms-guide-8.4.4] chapter.</span></span>

## <a name="specifics-for-the-sap-content-server-on-windows"></a><span data-ttu-id="6f87f-1172">Informações específicas para o SAP Content Server no Windows</span><span class="sxs-lookup"><span data-stu-id="6f87f-1172">Specifics for the SAP Content Server on Windows</span></span>
<span data-ttu-id="6f87f-1173">O SAP Content Server é um componente baseado em servidor separado para armazenar conteúdos como documentos eletrônicos em diferentes formatos.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1173">The SAP Content Server is a separate, server-based component to store content such as electronic documents in different formats.</span></span> <span data-ttu-id="6f87f-1174">O SAP Content Server é fornecido pelo desenvolvimento de tecnologia e deve ser usada entre aplicativos para todos os aplicativos SAP.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1174">The SAP Content Server is provided by development of technology and is to be used cross-application for any SAP applications.</span></span> <span data-ttu-id="6f87f-1175">Ele é instalado em um sistema separado.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1175">It is installed on a separate system.</span></span> <span data-ttu-id="6f87f-1176">O conteúdo normal é o material de treinamento e a documentação do Depósito de Dados de Conhecimento ou desenhos técnicos provenientes do Sistema de Gerenciamento de Documentos do mySAP PLM.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1176">Typical content is training material and documentation from Knowledge Warehouse or technical drawings originating from the mySAP PLM Document Management System.</span></span>

### <a name="sap-content-server-version-support"></a><span data-ttu-id="6f87f-1177">Suporte de versão do SAP Content Server</span><span class="sxs-lookup"><span data-stu-id="6f87f-1177">SAP Content Server Version Support</span></span>
<span data-ttu-id="6f87f-1178">No momento o SAP dá suporte ao:</span><span class="sxs-lookup"><span data-stu-id="6f87f-1178">SAP currently supports:</span></span>

* <span data-ttu-id="6f87f-1179">**SAP Content Server** com a versão **6.50 (e superiores)**</span><span class="sxs-lookup"><span data-stu-id="6f87f-1179">**SAP Content Server** with version **6.50 (and higher)**</span></span>
* <span data-ttu-id="6f87f-1180">**SAP MaxDB versão 7.9**</span><span class="sxs-lookup"><span data-stu-id="6f87f-1180">**SAP MaxDB version 7.9**</span></span>
* <span data-ttu-id="6f87f-1181">**IIS (Servidor de informações da Internet) da Microsoft versão 8.0 (e posterior)**</span><span class="sxs-lookup"><span data-stu-id="6f87f-1181">**Microsoft IIS (Internet Information Server) version 8.0 (and higher)**</span></span>

<span data-ttu-id="6f87f-1182">É altamente recomendável usar a versão mais recente do SAP Content Server, que no momento da redação deste documento é **6.50 SP4**, e a versão mais recente do **IIS da Microsoft 8.5**.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1182">It is highly recommended to use the newest version of SAP Content Server, which at the time of writing this document is **6.50 SP4**, and the newest version of **Microsoft IIS 8.5**.</span></span>

<span data-ttu-id="6f87f-1183">Verifique as versões mais recentes com suporte do SAP Content Server e do IIS da Microsoft no [PAM (Matriz de Disponibilidade de Produto) da SAP][sap-pam].</span><span class="sxs-lookup"><span data-stu-id="6f87f-1183">Check the latest supported versions of SAP Content Server and Microsoft IIS in the [SAP Product Availability Matrix (PAM)][sap-pam].</span></span>

### <a name="supported-microsoft-windows-and-azure-vm-types-for-sap-content-server"></a><span data-ttu-id="6f87f-1184">Tipos de VM do Azure e Microsoft Windows com suporte para o SAP Content Server</span><span class="sxs-lookup"><span data-stu-id="6f87f-1184">Supported Microsoft Windows and Azure VM types for SAP Content Server</span></span>
<span data-ttu-id="6f87f-1185">Para descobrir a versão com suporte do Windows para o SAP Content Server no Azure, consulte:</span><span class="sxs-lookup"><span data-stu-id="6f87f-1185">To find out supported Windows version for SAP Content Server on Azure, see:</span></span>

* <span data-ttu-id="6f87f-1186">[PAM (Matriz de Disponibilidade de Produto) da SAP][sap-pam]</span><span class="sxs-lookup"><span data-stu-id="6f87f-1186">[SAP Product Availability Matrix (PAM)][sap-pam]</span></span>
* <span data-ttu-id="6f87f-1187">Nota SAP [1928533]</span><span class="sxs-lookup"><span data-stu-id="6f87f-1187">SAP Note [1928533]</span></span>

<span data-ttu-id="6f87f-1188">É altamente recomendável usar a versão mais recente do Microsoft Windows, que no momento da redação deste documento é **Windows Server 2012 R2**.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1188">It is highly recommended to use the newest version of Microsoft Windows, which at the time of writing this document is **Windows Server 2012 R2**.</span></span>

### <a name="sap-content-server-configuration-guidelines-for-sap-installations-in-azure-vms"></a><span data-ttu-id="6f87f-1189">Diretrizes de configuração do SAP Content Server para instalações do SAP em VMs do Azure</span><span class="sxs-lookup"><span data-stu-id="6f87f-1189">SAP Content Server Configuration Guidelines for SAP Installations in Azure VMs</span></span>
#### <a name="storage-configuration"></a><span data-ttu-id="6f87f-1190">Configuração de armazenamento</span><span class="sxs-lookup"><span data-stu-id="6f87f-1190">Storage Configuration</span></span>
<span data-ttu-id="6f87f-1191">Se você configurar o SAP Content Server para armazenar arquivos no banco de dados do SAP MaxDB, todas as práticas recomendadas de armazenamento do Azure mencionadas para o SAP MaxDB no capítulo [Configuração de armazenamento][dbms-guide-8.4.1] também serão válidas para o cenário do SAP Content Server.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1191">If you configure SAP Content Server to store files in the SAP MaxDB database, all Azure storage best practices recommendation mentioned for SAP MaxDB in chapter [Storage Configuration][dbms-guide-8.4.1] are also valid for the SAP Content Server scenario.</span></span>

<span data-ttu-id="6f87f-1192">Se você configurar o SAP Content Server para armazenar arquivos no sistema de arquivos, será recomendável usar uma unidade lógica dedicada.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1192">If you configure SAP Content Server to store files in the file system, it is recommended to use a dedicated logical drive.</span></span> <span data-ttu-id="6f87f-1193">O uso de espaços de armazenamento permite que você também aumente o tamanho do disco lógico e a taxa de transferência de IOPS, conforme descrito no capítulo [RAID de software][dbms-guide-2.2].</span><span class="sxs-lookup"><span data-stu-id="6f87f-1193">Using storage spaces enables you to also increase logical disk size and IOPS throughput, as described in in chapter [Software RAID][dbms-guide-2.2].</span></span>

#### <a name="sap-content-server-location"></a><span data-ttu-id="6f87f-1194">Local do SAP Content Server</span><span class="sxs-lookup"><span data-stu-id="6f87f-1194">SAP Content Server Location</span></span>
<span data-ttu-id="6f87f-1195">O SAP Content Server deve ser implantado na mesma região do Azure e VNET do Azure em que o sistema SAP está implantado.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1195">SAP Content Server has to be deployed in the same Azure region and Azure VNET where the SAP system is deployed.</span></span> <span data-ttu-id="6f87f-1196">Você é livre para decidir se deseja implantar os componentes do SAP Content Server em uma VM do Azure dedicada ou na mesma VM em que o sistema SAP está sendo executado.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1196">You are free to decide whether you want to deploy SAP Content Server components on a dedicated Azure VM or on the same VM where the SAP system is running.</span></span>

![VM do Azure dedicada para SAP Content Server][dbms-guide-figure-800]

#### <a name="sap-cache-server-location"></a><span data-ttu-id="6f87f-1198">Local do SAP Cache Server</span><span class="sxs-lookup"><span data-stu-id="6f87f-1198">SAP Cache Server Location</span></span>
<span data-ttu-id="6f87f-1199">O SAP Cache Server é um componente adicional com base em servidor para fornecer acesso a documentos (em cache) localmente.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1199">The SAP Cache Server is an additional server-based component to provide access to (cached) documents locally.</span></span> <span data-ttu-id="6f87f-1200">O SAP Cache Server armazena em cache os documentos de um SAP Content Server.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1200">The SAP Cache Server caches the documents of a SAP Content Server.</span></span> <span data-ttu-id="6f87f-1201">Isso é para otimizar o tráfego de rede se documentos precisam ser recuperados de mais de uma vez de locais diferentes.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1201">This is to optimize network traffic if documents have to be retrieved more than once from different locations.</span></span> <span data-ttu-id="6f87f-1202">A regra geral é que o SAP Cache Server precisa estar fisicamente próximo ao cliente que acessa o SAP Cache Server.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1202">The general rule is that the SAP Cache Server has to be physically close to the client that accesses the SAP Cache Server.</span></span>

<span data-ttu-id="6f87f-1203">Aqui você tem duas opções:</span><span class="sxs-lookup"><span data-stu-id="6f87f-1203">Here you have two options:</span></span>

1. <span data-ttu-id="6f87f-1204">**O cliente é um sistema SAP de back-end** Se um sistema SAP de back-end estiver configurado para acessar o SAP Content Server, o sistema SAP será um cliente.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1204">**Client is a backend SAP system** If a backend SAP system is configured to access SAP Content Server, that SAP system is a client.</span></span> <span data-ttu-id="6f87f-1205">Como o sistema SAP e o SAP Content Server são implantados na mesma região do Azure, no mesmo datacenter do Azure, eles estão fisicamente próximos.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1205">As both SAP system and SAP Content Server are deployed in the same Azure region – in the same Azure datacenter – they are physically close to each other.</span></span> <span data-ttu-id="6f87f-1206">Portanto, não é necessário ter um SAP Cache Server dedicado.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1206">Therefore, there is no need to have a dedicated SAP Cache Server.</span></span> <span data-ttu-id="6f87f-1207">Os clientes da interface do usuário do SAP (GUI do SAP ou navegador da Web) acessam o sistema SAP diretamente e o sistema SAP recupera documentos do SAP Content Server.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1207">SAP UI clients (SAP GUI or web browser) access the SAP system directly, and the SAP system retrieves documents from the SAP Content Server.</span></span>
2. <span data-ttu-id="6f87f-1208">**O cliente é um navegador da Web local** O SAP Content Server pode ser configurado para ser acessado diretamente pelo navegador da Web.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1208">**Client is an on-premises web browser** The SAP Content Server can be configured to be accessed directly by the web browser.</span></span> <span data-ttu-id="6f87f-1209">Nesse caso, um navegador da Web em execução no local é um cliente do SAP Content Server.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1209">In this case, a web browser running on–premises is a client of the SAP Content Server.</span></span> <span data-ttu-id="6f87f-1210">O datacenter local e o datacenter do Azure são colocados em diferentes locais físicos (idealmente próximos entre si).</span><span class="sxs-lookup"><span data-stu-id="6f87f-1210">On-premises datacenter and Azure datacenter are placed in different physical locations (ideally close to each other).</span></span> <span data-ttu-id="6f87f-1211">Seu datacenter local é conectado ao Azure por meio do ExpressRoute ou VPN site a site do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1211">Your on-premises datacenter is connected to Azure via Azure Site-to-Site VPN or ExpressRoute.</span></span> <span data-ttu-id="6f87f-1212">Embora as duas opções ofereçam uma conexão de rede VPN segura para o Azure, a conexão de rede site a site não oferece uma largura de banda de rede e SLA de latência entre o datacenter local e o datacenter do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1212">Although both options offer secure VPN network connection to Azure, site-to-site network connection does not offer a network bandwidth and latency SLA between the on-premises datacenter and the Azure datacenter.</span></span> <span data-ttu-id="6f87f-1213">Para acelerar o acesso a documentos, você pode realizar uma das seguintes ações:</span><span class="sxs-lookup"><span data-stu-id="6f87f-1213">To speed up access to documents, you can do one of the following:</span></span>
   1. <span data-ttu-id="6f87f-1214">Instale o SAP Cache Server local, próximo ao navegador da Web local (opção [nesta][dbms-guide-900-sap-cache-server-on-premises] Figura)</span><span class="sxs-lookup"><span data-stu-id="6f87f-1214">Install SAP Cache Server on-premises, close to the on-premises web browser (option on [this][dbms-guide-900-sap-cache-server-on-premises] Figure)</span></span>
   2. <span data-ttu-id="6f87f-1215">Configure o ExpressRoute do Azure, que oferece uma conexão de rede dedicada de alta velocidade e baixa latência entre o datacenter local e o datacenter do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1215">Configure Azure ExpressRoute, which offers a high-speed and low-latency dedicated network connection between on-premises datacenter and Azure datacenter.</span></span>

<span data-ttu-id="6f87f-1216">![Opção de instalação local do SAP Cache Server][dbms-guide-figure-900]
<a name="642f746c-e4d4-489d-bf63-73e80177a0a8"></a></span><span class="sxs-lookup"><span data-stu-id="6f87f-1216">![Option to install SAP Cache Server on-premises][dbms-guide-figure-900]
<a name="642f746c-e4d4-489d-bf63-73e80177a0a8"></a></span></span>

#### <a name="backup--restore"></a><span data-ttu-id="6f87f-1217">Backup/restauração</span><span class="sxs-lookup"><span data-stu-id="6f87f-1217">Backup / Restore</span></span>
<span data-ttu-id="6f87f-1218">Se você configurar o SAP Content Server para armazenar arquivos no banco de dados do SAP MaxDB, as considerações de desempenho e o procedimento de backup/restauração já estão descritas nos capítulos [Backup e restauração][dbms-guide-8.4.2] e [Considerações de desempenho para backup e restauração][dbms-guide-8.4.3] sobre o SAP MaxDB.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1218">If you configure the SAP Content Server to store files in the SAP MaxDB database, the backup/restore procedure and performance considerations are already described in SAP MaxDB chapter [Backup and Restore][dbms-guide-8.4.2] and chapter [Performance Considerations for Backup and Restore][dbms-guide-8.4.3].</span></span>

<span data-ttu-id="6f87f-1219">Se você configura o SAP Content Server para armazenar arquivos no sistema de arquivos, uma opção é executar o backup/restauração manual da estrutura do arquivo inteiro na qual os documentos estão localizados.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1219">If you configure the SAP Content Server to store files in the file system, one option is to execute manual backup/restore of the whole file structure where the documents are located.</span></span> <span data-ttu-id="6f87f-1220">Semelhante ao backup/restauração do SAP MaxDB, é recomendável ter um volume de disco dedicado para fins de backup.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1220">Similar to SAP MaxDB backup/restore, it is recommended to have a dedicated disk volume for backup purpose.</span></span>

#### <a name="other"></a><span data-ttu-id="6f87f-1221">Outros</span><span class="sxs-lookup"><span data-stu-id="6f87f-1221">Other</span></span>
<span data-ttu-id="6f87f-1222">Outras configurações específicas do SAP Content Server são transparentes para VMs do Azure e são descritas em vários documentos e Notas SAP:</span><span class="sxs-lookup"><span data-stu-id="6f87f-1222">Other SAP Content Server specific settings are transparent to Azure VMs and are described in various documents and SAP Notes:</span></span>

* <span data-ttu-id="6f87f-1223"><https://service.sap.com/contentserver></span><span class="sxs-lookup"><span data-stu-id="6f87f-1223"><https://service.sap.com/contentserver></span></span>
* <span data-ttu-id="6f87f-1224">Nota SAP [1619726]</span><span class="sxs-lookup"><span data-stu-id="6f87f-1224">SAP Note [1619726]</span></span>  

## <a name="specifics-to-ibm-db2-for-luw-on-windows"></a><span data-ttu-id="6f87f-1225">Informações específicas para o IBM DB2 para LUW no Windows</span><span class="sxs-lookup"><span data-stu-id="6f87f-1225">Specifics to IBM DB2 for LUW on Windows</span></span>
<span data-ttu-id="6f87f-1226">Com o Microsoft Azure, você pode facilmente migrar seu aplicativo SAP existente em execução no IBM DB2 para LUW (Linux, UNIX e Windows) para máquinas virtuais do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1226">With Microsoft Azure, you can easily migrate your existing SAP application running on IBM DB2 for Linux, UNIX, and Windows (LUW) to Azure virtual machines.</span></span> <span data-ttu-id="6f87f-1227">Com o SAP no IBM DB2 para LUW, os administradores e desenvolvedores ainda podem usar as mesmas ferramentas de desenvolvimento e administração que estão disponíveis localmente.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1227">With SAP on IBM DB2 for LUW, administrators and developers can still use the same development and administration tools which are available on-premises.</span></span>
<span data-ttu-id="6f87f-1228">As informações gerais sobre como executar o SAP Business Suite no IBM DB2 para LUW podem ser encontradas na SCN (SAP Community Network) em <https://scn.sap.com/community/db2-for-linux-unix-windows>.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1228">General information about running SAP Business Suite on IBM DB2 for LUW can be found in the SAP Community Network (SCN) at <https://scn.sap.com/community/db2-for-linux-unix-windows>.</span></span>

<span data-ttu-id="6f87f-1229">Para obter informações adicionais e atualizações sobre o SAP no DB2 para LUW no Azure, consulte a Nota SAP [2233094].</span><span class="sxs-lookup"><span data-stu-id="6f87f-1229">For additional information and updates about SAP on DB2 for LUW on Azure, see SAP Note [2233094].</span></span>

### <a name="ibm-db2-for-linux-unix-and-windows-version-support"></a><span data-ttu-id="6f87f-1230">Suporte de versão do IBM DB2 para Linux, UNIX e Windows</span><span class="sxs-lookup"><span data-stu-id="6f87f-1230">IBM DB2 for Linux, UNIX, and Windows Version Support</span></span>
<span data-ttu-id="6f87f-1231">Há suporte para o SAP no IBM DB2 para LUW nos serviços de máquina virtual do Microsoft Azure a partir da versão 10.5 do DB2.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1231">SAP on IBM DB2 for LUW on Microsoft Azure Virtual Machine Services is supported as of DB2 version 10.5.</span></span>

<span data-ttu-id="6f87f-1232">Para obter informações sobre os tipos de VM do Azure e produtos SAP com suporte, consulte a Nota SAP [1928533].</span><span class="sxs-lookup"><span data-stu-id="6f87f-1232">For information about supported SAP products and Azure VM types, please refer to SAP Note [1928533].</span></span>

### <a name="ibm-db2-for-linux-unix-and-windows-configuration-guidelines-for-sap-installations-in-azure-vms"></a><span data-ttu-id="6f87f-1233">Diretrizes de configuração do IBM DB2 para Linux, UNIX e Windows para instalações do SAP em VMs do Azure</span><span class="sxs-lookup"><span data-stu-id="6f87f-1233">IBM DB2 for Linux, UNIX, and Windows Configuration Guidelines for SAP Installations in Azure VMs</span></span>
#### <a name="storage-configuration"></a><span data-ttu-id="6f87f-1234">Configuração de armazenamento</span><span class="sxs-lookup"><span data-stu-id="6f87f-1234">Storage Configuration</span></span>
<span data-ttu-id="6f87f-1235">Todos os arquivos de banco de dados devem ser armazenados no sistema de arquivos NTFS com base em discos VHD.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1235">All database files must be stored on the NTFS file system based on VHD disks.</span></span> <span data-ttu-id="6f87f-1236">Esses VHDs são montados na VM do Azure e se baseiam no Armazenamento de Blobs de Páginas do Azure (<https://msdn.microsoft.com/library/azure/ee691964.aspx>).</span><span class="sxs-lookup"><span data-stu-id="6f87f-1236">These VHDs are mounted to the Azure VM and are based in Azure Page BLOB Storage (<https://msdn.microsoft.com/library/azure/ee691964.aspx>).</span></span>
<span data-ttu-id="6f87f-1237">Qualquer variante de unidades de rede ou compartilhamentos remotos, como os seguintes serviços de arquivo do Azure **NÃO** tem suporte para arquivos de banco de dados:</span><span class="sxs-lookup"><span data-stu-id="6f87f-1237">Any kind of network drives or remote shares like the following Azure file services are **NOT** supported for database files:</span></span>

* <span data-ttu-id="6f87f-1238"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx></span><span class="sxs-lookup"><span data-stu-id="6f87f-1238"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx></span></span>
* <span data-ttu-id="6f87f-1239"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/27/persisting-connections-to-microsoft-azure-files.aspx></span><span class="sxs-lookup"><span data-stu-id="6f87f-1239"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/27/persisting-connections-to-microsoft-azure-files.aspx></span></span>

<span data-ttu-id="6f87f-1240">Se você estiver usando VHDs do Azure com base no Armazenamento de Blobs de Páginas do Azure, as declarações feitas no capítulo [Estrutura de uma implantação do RDBMS][dbms-guide-2] deste documento também se aplicarão a implantações com o banco de dados do IBM DB2 para LUW.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1240">If you are using Azure VHDs based on Azure Page BLOB Storage, the statements made in this document in chapter [Structure of a RDBMS Deployment][dbms-guide-2] also apply to deployments with the IBM DB2 for LUW Database.</span></span>

<span data-ttu-id="6f87f-1241">Conforme explicado anteriormente na parte geral do documento, existem cotas na taxa de transferência de IOPS para VHDs do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1241">As explained earlier in the general part of the document, quotas on IOPS throughput for Azure VHDs exist.</span></span> <span data-ttu-id="6f87f-1242">As cotas exatas dependem do tipo de VM usado.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1242">The exact quotas depend on the VM type used.</span></span> <span data-ttu-id="6f87f-1243">Encontre uma lista de tipos de VM com suas cotas [aqui][virtual-machines-sizes]</span><span class="sxs-lookup"><span data-stu-id="6f87f-1243">A list of VM types with their quotas can be found [here][virtual-machines-sizes]</span></span>

<span data-ttu-id="6f87f-1244">Desde que a cota de IOPS por disco atual seja suficiente, é possível armazenar todos os arquivos de banco de dados em um único VHD do Azure montado.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1244">As long as the current IOPS quota per disk is sufficient, it is possible to store all the database files on one single mounted Azure VHD.</span></span>

<span data-ttu-id="6f87f-1245">Para considerações sobre o desempenho, consulte também o capítulo “Data Safety and Performance Considerations for Database Directories” (Considerações sobre segurança de dados e desempenho para diretórios de banco de dados) nos guias de instalação SAP.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1245">For performance considerations also refer to chapter “Data Safety and Performance Considerations for Database Directories” in SAP installation guides.</span></span>

<span data-ttu-id="6f87f-1246">Como alternativa, você pode usar Pools de Armazenamento do Windows (disponíveis apenas no Windows Server 2012 e superior) ou a distribuição do Windows para o Windows 2008 R2, conforme descrito no capítulo [RAID de software][dbms-guide-2.2] deste documento, para criar um grande dispositivo lógico em vários discos VHD montados.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1246">Alternatively, you can use Windows Storage Pools (only available in Windows Server 2012 and higher) or Windows striping for Windows 2008 R2 as described in chapter [Software RAID][dbms-guide-2.2] of this document to create one big logical device over multiple mounted VHD disks.</span></span>
<span data-ttu-id="6f87f-1247">Para os discos que contém os caminhos de armazenamento do DB2 para os sapdata e saptmp, você deve especificar um tamanho de setor do disco físico de 512 KB.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1247">For the disks containing the DB2 storage paths for your sapdata and saptmp directories, you must specify a physical disk sector size of 512 KB.</span></span> <span data-ttu-id="6f87f-1248">Ao usar Pools de Armazenamento do Windows, você deve criá-los manualmente por meio da interface de linha de comando usando o parâmetro "-LogicalSectorSizeDefault".</span><span class="sxs-lookup"><span data-stu-id="6f87f-1248">When using Windows Storage Pools, you must create the storage pools  manually via command line interface using the parameter „-LogicalSectorSizeDefault“.</span></span> <span data-ttu-id="6f87f-1249">Para obter detalhes, veja <https://technet.microsoft.com/library/hh848689.aspx>.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1249">For details see <https://technet.microsoft.com/library/hh848689.aspx>.</span></span>

#### <a name="backuprestore"></a><span data-ttu-id="6f87f-1250">Backup/restauração</span><span class="sxs-lookup"><span data-stu-id="6f87f-1250">Backup/Restore</span></span>
<span data-ttu-id="6f87f-1251">A funcionalidade de backup/restauração para o IBM DB2 para LUW tem suporte da mesma maneira que no Hyper-V e sistemas operacionais Windows Server standard.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1251">The backup/restore functionality for IBM DB2 for LUW is supported in the same way as on standard Windows Server Operating Systems and Hyper-V.</span></span>

<span data-ttu-id="6f87f-1252">Você deve se certificar de que tenha uma estratégia de backup do banco de dados válida em vigor.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1252">You must make sure that you have a valid database backup strategy in place.</span></span>

<span data-ttu-id="6f87f-1253">Como em implantações bare-metal, o desempenho de backup/restauração depende de quantos volumes podem ser lidos em paralelo e qual pode ser a taxa de transferência desses volumes.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1253">As in bare-metal deployments, backup/restore performance depends on how many volumes can be read in parallel and what the throughput of those volumes might be.</span></span> <span data-ttu-id="6f87f-1254">Além disso, o consumo de CPU usado pela compactação de backup pode desempenhar uma função significativa em VMs com apenas até 8 threads de CPU.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1254">In addition, the CPU consumption used by backup compression may play a significant role on VMs with just up to 8 CPU threads.</span></span> <span data-ttu-id="6f87f-1255">Portanto, é possível supor que:</span><span class="sxs-lookup"><span data-stu-id="6f87f-1255">Therefore, one can assume:</span></span>

* <span data-ttu-id="6f87f-1256">Quanto menor o número de VHDs usados para armazenar os dispositivos de banco de dados, menor é a taxa de transferência geral na leitura</span><span class="sxs-lookup"><span data-stu-id="6f87f-1256">The fewer the number of VHDs used to store the database devices, the smaller the overall throughput in reading</span></span>
* <span data-ttu-id="6f87f-1257">Quanto menor o número de threads de CPU na VM, mais severo é o impacto da compactação de backup</span><span class="sxs-lookup"><span data-stu-id="6f87f-1257">The smaller the number of CPU threads in the VM, the more severe the impact of backup compression</span></span>
* <span data-ttu-id="6f87f-1258">Quanto menos destinos (diretórios de distribuição, VHDs) nos quais gravar o backup, menor é a taxa de transferência</span><span class="sxs-lookup"><span data-stu-id="6f87f-1258">The fewer targets (Stripe Directories, VHDs) to write the backup to, the lower the throughput</span></span>

<span data-ttu-id="6f87f-1259">Para aumentar o número de destinos nos quais gravar, é possível usar/combinar duas opções dependendo das suas necessidades:</span><span class="sxs-lookup"><span data-stu-id="6f87f-1259">To increase the number of targets to write to, two options can be used/combined depending on your needs:</span></span>

* <span data-ttu-id="6f87f-1260">Distribuir o volume de destino de backup em vários VHDs montados para melhorar a taxa de transferência de IOPS nesse volume distribuído</span><span class="sxs-lookup"><span data-stu-id="6f87f-1260">Striping the backup target volume over multiple mounted VHDs in order to improve the IOPS throughput on that striped volume</span></span>
* <span data-ttu-id="6f87f-1261">Usando mais de um diretório de destino no qual gravar o backup</span><span class="sxs-lookup"><span data-stu-id="6f87f-1261">Using more than one target directory to write the backup to</span></span>

#### <a name="high-availability-and-disaster-recovery"></a><span data-ttu-id="6f87f-1262">Alta disponibilidade e recuperação de desastre</span><span class="sxs-lookup"><span data-stu-id="6f87f-1262">High Availability and Disaster Recovery</span></span>
<span data-ttu-id="6f87f-1263">Não há suporte para o MSCS (Microsoft Cluster Server).</span><span class="sxs-lookup"><span data-stu-id="6f87f-1263">Microsoft Cluster Server (MSCS) is not supported.</span></span>

<span data-ttu-id="6f87f-1264">Há suporte para HADR (alta disponibilidade e recuperação de desastre) do DB2.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1264">DB2 high availability disaster recovery (HADR) is supported.</span></span> <span data-ttu-id="6f87f-1265">Se as máquinas virtuais da configuração de HA tiverem uma resolução de nome funcionando, a configuração no Azure não será diferente de nenhuma configuração feita localmente.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1265">If the virtual machines of the HA configuration have working name resolution, the setup in Azure will not differ from any setup that is done on-premises.</span></span> <span data-ttu-id="6f87f-1266">Não é recomendável confiar apenas na resolução de IP.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1266">It is not recommended to rely on IP resolution only.</span></span>

<span data-ttu-id="6f87f-1267">Não use a replicação geográfica do armazenamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1267">Do not use Azure Store Geo-Replication.</span></span> <span data-ttu-id="6f87f-1268">Para obter mais informações, confira o capítulo [Armazenamento do Microsoft Azure][dbms-guide-2.3] e o capítulo [Alta disponibilidade e recuperação de desastre com VMs do Azure][dbms-guide-3].</span><span class="sxs-lookup"><span data-stu-id="6f87f-1268">For further information, refer to chapter [Microsoft Azure Storage][dbms-guide-2.3] and chapter [High Availability and Disaster Recovery with Azure VMs][dbms-guide-3].</span></span>

#### <a name="other"></a><span data-ttu-id="6f87f-1269">outro</span><span class="sxs-lookup"><span data-stu-id="6f87f-1269">Other</span></span>
<span data-ttu-id="6f87f-1270">Todos os outros tópicos gerais, como o monitoramento do SAP ou conjuntos de disponibilidade do Azure, se aplicam como descrito nos três primeiros capítulos desse documento para implantações de VMs com o IBM DB2 para LUW.</span><span class="sxs-lookup"><span data-stu-id="6f87f-1270">All other general topics like Azure Availability Sets or SAP monitoring apply as described in the first three chapters of this document for deployments of VMs with IBM DB2 for LUW as well.</span></span>

<span data-ttu-id="6f87f-1271">Veja também o capítulo [Resumo geral do SQL Server para SAP no Azure][dbms-guide-5.8].</span><span class="sxs-lookup"><span data-stu-id="6f87f-1271">Also refer to chapter [General SQL Server for SAP on Azure Summary][dbms-guide-5.8].</span></span>
