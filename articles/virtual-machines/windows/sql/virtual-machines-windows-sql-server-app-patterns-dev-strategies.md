---
title: "Padrões de aplicativo do SQL Server em VMs | Microsoft Docs"
description: "Este artigo aborda os padrões de aplicativo para o SQL Server em máquinas virtuais do Azure. Ele fornece aos desenvolvedores e arquitetos de soluções uma base para design e arquitetura de aplicativos de qualidade."
services: virtual-machines-windows
documentationcenter: na
author: ninarn
manager: jhubbard
editor: 
tags: azure-service-management,azure-resource-manager
ms.assetid: 41863c8d-f3a3-4584-ad86-b95094365e05
ms.service: virtual-machines-sql
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 05/31/2017
ms.author: ninarn
ms.openlocfilehash: a716de21e21148a082f49f0f416b14ca0eaa8192
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/29/2017
---
# <a name="application-patterns-and-development-strategies-for-sql-server-in-azure-virtual-machines"></a><span data-ttu-id="6b869-104">Estratégias de Desenvolvimento e Padrões de Aplicativo para o SQL Server em Máquinas Virtuais do Azure</span><span class="sxs-lookup"><span data-stu-id="6b869-104">Application Patterns and Development Strategies for SQL Server in Azure Virtual Machines</span></span>
[!INCLUDE [learn-about-deployment-models](../../../../includes/learn-about-deployment-models-both-include.md)]

## <a name="summary"></a><span data-ttu-id="6b869-105">Resumo:</span><span class="sxs-lookup"><span data-stu-id="6b869-105">Summary:</span></span>
<span data-ttu-id="6b869-106">Determinar o padrão ou os padrões de aplicativos que serão utilizados em seus aplicativos baseados em SQL Server no ambiente do Azure é uma decisão de design importante, que requer uma compreensão sólida de como o SQL Server e cada componente de infraestrutura do Azure funcionam juntos.</span><span class="sxs-lookup"><span data-stu-id="6b869-106">Determining which application pattern or patterns to use for your SQL-Server-based applications in Azure environment is an important design decision and it requires a solid understanding of how SQL Server and each infrastructure component of Azure work together.</span></span> <span data-ttu-id="6b869-107">Com o SQL Server nos Serviços de Infraestrutura do Azure, você pode migrar, manter e monitorar com facilidade seus aplicativos de SQL Server existentes integrados ao Windows Server em máquinas virtuais no Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-107">With SQL Server in Azure Infrastructure Services, you can easily migrate, maintain, and monitor your existing SQL Server applications built-on Windows Server to virtual machines in Azure.</span></span>

<span data-ttu-id="6b869-108">O objetivo deste artigo é fornecer aos desenvolvedores e arquitetos de soluções a base para uma boa arquitetura e design de aplicativos que eles possam seguir ao migrar aplicativos existentes para o Azure, bem como ao desenvolver novos aplicativos no Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-108">The goal of this article is to provide solution architects and developers a foundation for good application architecture and design, which they can follow when migrating existing applications to Azure as well as developing new applications in Azure.</span></span>

<span data-ttu-id="6b869-109">Para cada padrão de aplicativo, você encontrará um cenário local, sua respectiva solução habilitada para nuvem e as recomendações técnicas relacionadas.</span><span class="sxs-lookup"><span data-stu-id="6b869-109">For each application pattern, you will find an on-premises scenario, its respective cloud-enabled solution, and the related technical recommendations.</span></span> <span data-ttu-id="6b869-110">Além disso, o artigo discute estratégias de desenvolvimento específicas do Azure para que você possa criar seus aplicativos corretamente.</span><span class="sxs-lookup"><span data-stu-id="6b869-110">In addition, the article discusses Azure-specific development strategies so that you can design your applications correctly.</span></span> <span data-ttu-id="6b869-111">Devido à variedade de padrões de aplicativos, é recomendável que arquitetos e desenvolvedores escolham o padrão mais apropriado para seus aplicativos e usuários.</span><span class="sxs-lookup"><span data-stu-id="6b869-111">Due to the many possible application patterns, it’s recommended that architects and developers should choose the most appropriate pattern for their applications and users.</span></span>

<span data-ttu-id="6b869-112">**Colaboradores técnicos:** Luis Carlos Vargas Herring, Madhan Arumugam Ramakrishnan</span><span class="sxs-lookup"><span data-stu-id="6b869-112">**Technical Contributors:** Luis Carlos Vargas Herring, Madhan Arumugam Ramakrishnan</span></span>

<span data-ttu-id="6b869-113">**Revisores técnicos:** Corey Sanders, Drew McDaniel, Narayan Annamalai, Nir Mashkowski, Sanjay Mishra, Silvano Coriani, Stefan Schackow, Tim Hickey, Tim Wieman e Xin Jin</span><span class="sxs-lookup"><span data-stu-id="6b869-113">**Technical Reviewers:** Corey Sanders, Drew McDaniel, Narayan Annamalai, Nir Mashkowski, Sanjay Mishra, Silvano Coriani, Stefan Schackow, Tim Hickey, Tim Wieman, Xin Jin</span></span>

## <a name="introduction"></a><span data-ttu-id="6b869-114">Introdução</span><span class="sxs-lookup"><span data-stu-id="6b869-114">Introduction</span></span>
<span data-ttu-id="6b869-115">Você pode desenvolver diversos tipos de aplicativos com n camadas, separando os componentes das diferentes camadas de aplicativo em máquinas diferentes, bem como em componentes separados.</span><span class="sxs-lookup"><span data-stu-id="6b869-115">You can develop many types of n-tier applications by separating the components of the different application layers on different machines as well as in separate components.</span></span> <span data-ttu-id="6b869-116">Por exemplo, você pode colocar os componentes de regras de negócios e aplicativo cliente em uma máquina, os componentes da camada web de front-end e da camada de acesso de dados em outra máquina e uma camada de banco de dados de back-end em outra máquina.</span><span class="sxs-lookup"><span data-stu-id="6b869-116">For example, you can place the client application and business rules components in one machine, front-end web tier and data access tier components in another machine, and a back-end database tier in another machine.</span></span> <span data-ttu-id="6b869-117">Este tipo de estruturação ajuda a isolar as camadas entre si.</span><span class="sxs-lookup"><span data-stu-id="6b869-117">This kind of structuring helps isolate each tier from each other.</span></span> <span data-ttu-id="6b869-118">Se alterar a origem dos dados, você não precisa alterar o aplicativo cliente ou Web, somente os componentes de camada de acesso dados.</span><span class="sxs-lookup"><span data-stu-id="6b869-118">If you change where data comes from, you don’t need to change the client or web application but only the data access tier components.</span></span>

<span data-ttu-id="6b869-119">Um aplicativo típico de *n camadas* inclui a camada de apresentação, a camada de negócios e a camada de dados:</span><span class="sxs-lookup"><span data-stu-id="6b869-119">A typical *n-tier* application includes the presentation tier, the business tier, and the data tier:</span></span>

| <span data-ttu-id="6b869-120">Camada</span><span class="sxs-lookup"><span data-stu-id="6b869-120">Tier</span></span> | <span data-ttu-id="6b869-121">Descrição</span><span class="sxs-lookup"><span data-stu-id="6b869-121">Description</span></span> |
| --- | --- |
| <span data-ttu-id="6b869-122">**Apresentação**</span><span class="sxs-lookup"><span data-stu-id="6b869-122">**Presentation**</span></span> |<span data-ttu-id="6b869-123">A *camada de apresentação* (camada da Web, camada de front-end) é a camada na qual os usuários interagem com um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="6b869-123">The *presentation tier* (web tier, front-end tier) is the layer in which users interact with an application.</span></span> |
| <span data-ttu-id="6b869-124">**Negócios**</span><span class="sxs-lookup"><span data-stu-id="6b869-124">**Business**</span></span> |<span data-ttu-id="6b869-125">A *camada de negócios* (camada intermediária) é a camada usada pela camada de apresentação e pela camada de dados para se comunicar e que inclui a principal funcionalidade do sistema.</span><span class="sxs-lookup"><span data-stu-id="6b869-125">The *business tier* (middle tier) is the layer that the presentation tier and the data tier use to communicate with each other and includes the core functionality of the system.</span></span> |
| <span data-ttu-id="6b869-126">**Dados**</span><span class="sxs-lookup"><span data-stu-id="6b869-126">**Data**</span></span> |<span data-ttu-id="6b869-127">A *camada de dados* é basicamente o servidor que armazena os dados de um aplicativo (por exemplo, um servidor que executa o SQL Server).</span><span class="sxs-lookup"><span data-stu-id="6b869-127">The *data tier* is basically the server that stores an application's data (for example, a server running SQL Server).</span></span> |

<span data-ttu-id="6b869-128">Camadas de aplicativo descrevem os agrupamentos lógicos de funcionalidades e os componentes em um aplicativo, enquanto as camadas de modo geral descrevem a distribuição física das funcionalidades e dos componentes em servidores físicos, computadores, redes ou locais remotos separados.</span><span class="sxs-lookup"><span data-stu-id="6b869-128">Application layers describe the logical groupings of the functionality and components in an application; whereas tiers describe the physical distribution of the functionality and components on separate physical servers, computers, networks, or remote locations.</span></span> <span data-ttu-id="6b869-129">As camadas de aplicativo podem residir no mesmo computador físico (a mesma camada) ou podem ser distribuídas em computadores separados (n camadas), e os componentes de cada camada de aplicativo se comunicam com componentes de outras camadas por meio de interfaces bem definidas.</span><span class="sxs-lookup"><span data-stu-id="6b869-129">The layers of an application may reside on the same physical computer (the same tier) or may be distributed over separate computers (n-tier), and the components in each layer communicate with components in other layers through well-defined interfaces.</span></span> <span data-ttu-id="6b869-130">Você pode considerar o termo camada, como uma referência a padrões de distribuição física, como de duas camadas, três camadas e n camadas.</span><span class="sxs-lookup"><span data-stu-id="6b869-130">You can think of the term tier as referring to physical distribution patterns such as two-tier, three-tier, and n-tier.</span></span> <span data-ttu-id="6b869-131">Um **padrão de aplicativo de duas camadas** contém duas camadas de aplicativo: o servidor de aplicativos e o servidor de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="6b869-131">A **2-tier application pattern** contains two application tiers: application server and database server.</span></span> <span data-ttu-id="6b869-132">A comunicação direta acontece entre o servidor de aplicativos e o servidor de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="6b869-132">The direct communication happens between the application server and the database server.</span></span> <span data-ttu-id="6b869-133">O servidor de aplicativos contém componentes de camada da web e camada de negócios.</span><span class="sxs-lookup"><span data-stu-id="6b869-133">The application server contains both web-tier and business-tier components.</span></span> <span data-ttu-id="6b869-134">Em um **padrão de aplicativo de três camadas**, há três camadas de aplicativo: servidor Web, servidor de aplicativos, que contém a camada da lógica de negócios e/ou os componentes de acesso de dados da camada de negócios, e o servidor de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="6b869-134">In **3-tier application pattern**, there are three application tiers: web server, application server, which contains the business logic tier and/or business tier data access components, and the database server.</span></span> <span data-ttu-id="6b869-135">A comunicação entre o servidor Web e o servidor de banco de dados ocorre no servidor de aplicativos.</span><span class="sxs-lookup"><span data-stu-id="6b869-135">The communication between the web server and the database server happens over the application server.</span></span> <span data-ttu-id="6b869-136">Para obter informações detalhadas sobre as camadas de aplicativos, veja o [Guia de arquitetura de aplicativos da Microsoft](https://msdn.microsoft.com/library/ff650706.aspx).</span><span class="sxs-lookup"><span data-stu-id="6b869-136">For detailed information on application layers and tiers, see [Microsoft Application Architecture Guide](https://msdn.microsoft.com/library/ff650706.aspx).</span></span>

<span data-ttu-id="6b869-137">Antes de começar a ler este artigo, você deve ter conhecimento dos conceitos básicos do SQL Server e do Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-137">Before you start reading this article, you should have knowledge on the fundamental concepts of SQL Server and Azure.</span></span> <span data-ttu-id="6b869-138">Para obter mais informações, confira [Manuais Online do SQL Server](https://msdn.microsoft.com/library/bb545450.aspx), [SQL Server nas Máquinas Virtuais do Azure](virtual-machines-windows-sql-server-iaas-overview.md) e [Azure.com](https://azure.microsoft.com/).</span><span class="sxs-lookup"><span data-stu-id="6b869-138">For information, see [SQL Server Books Online](https://msdn.microsoft.com/library/bb545450.aspx), [SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-server-iaas-overview.md) and [Azure.com](https://azure.microsoft.com/).</span></span>

<span data-ttu-id="6b869-139">Este artigo descreve vários padrões de aplicativos que podem ser adequados para seus aplicativos simples, bem como para aplicativos corporativos altamente complexos.</span><span class="sxs-lookup"><span data-stu-id="6b869-139">This article describes several application patterns that can be suitable for your simple applications as well as the highly complex enterprise applications.</span></span> <span data-ttu-id="6b869-140">Antes de detalharmos cada padrão, recomendamos que você se familiarize com os serviços de armazenamento de dados disponíveis no Azure, como o [Armazenamento do Azure](../../../storage/common/storage-introduction.md), o [Banco de Dados SQL do Azure](../../../sql-database/sql-database-technical-overview.md) e o [SQL Server em uma Máquina Virtual do Azure](virtual-machines-windows-sql-server-iaas-overview.md).</span><span class="sxs-lookup"><span data-stu-id="6b869-140">Before detailing each pattern, we recommend that you should familiarize yourself with the available data storage services in Azure, such as [Azure Storage](../../../storage/common/storage-introduction.md), [Azure SQL Database](../../../sql-database/sql-database-technical-overview.md), and [SQL Server in an Azure Virtual Machine](virtual-machines-windows-sql-server-iaas-overview.md).</span></span> <span data-ttu-id="6b869-141">Para tomar as melhores decisões de design para seus aplicativos, entenda claramente quando usar cada serviço de armazenamento de dados.</span><span class="sxs-lookup"><span data-stu-id="6b869-141">To make the best design decisions for your applications, understand when to use which data storage service clearly.</span></span>

### <a name="choose-sql-server-in-an-azure-virtual-machine-when"></a><span data-ttu-id="6b869-142">Escolha o SQL Server em uma Máquina Virtual do Azure quando:</span><span class="sxs-lookup"><span data-stu-id="6b869-142">Choose SQL Server in an Azure Virtual Machine, when:</span></span>
* <span data-ttu-id="6b869-143">Você precisa ter controle no SQL Server e no Windows.</span><span class="sxs-lookup"><span data-stu-id="6b869-143">You need control on SQL Server and Windows.</span></span> <span data-ttu-id="6b869-144">Por exemplo, isso pode incluir a versão do SQL Server, hotfixes especiais, configuração de desempenho etc.</span><span class="sxs-lookup"><span data-stu-id="6b869-144">For example, this might include the SQL Server version, special hotfixes, performance configuration, etc.</span></span>
* <span data-ttu-id="6b869-145">Você precisa de compatibilidade total com o SQL Server local e quer mover aplicativos existentes para o Azure como eles estão.</span><span class="sxs-lookup"><span data-stu-id="6b869-145">You need a full compatibility with SQL Server on-premises and want to move existing applications to Azure as-is.</span></span>
* <span data-ttu-id="6b869-146">Você quer aproveitar os recursos do ambiente do Azure, mas o Banco de Dados SQL do Azure não dá suporte a todos os recursos que seu aplicativo requer.</span><span class="sxs-lookup"><span data-stu-id="6b869-146">You want to leverage the capabilities of the Azure environment but Azure SQL Database does not support all the features that your application requires.</span></span> <span data-ttu-id="6b869-147">Isso pode incluir as áreas a seguir:</span><span class="sxs-lookup"><span data-stu-id="6b869-147">This could include the following areas:</span></span>
  
  * <span data-ttu-id="6b869-148">**Tamanho do banco de dados**: no momento em que este artigo foi atualizado, o Banco de Dados SQL dá suporte a um banco de dados com até 1 TB de dados.</span><span class="sxs-lookup"><span data-stu-id="6b869-148">**Database size**: At the time this article was updated, SQL Database supports a database of up to 1 TB of data.</span></span> <span data-ttu-id="6b869-149">Se seu aplicativo exigir mais de 1 TB de dados e você não quiser implementar soluções de fragmentação personalizadas, será recomendável usar o SQL Server em uma Máquina Virtual do Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-149">If your application requires more than 1 TB of data and you don’t want to implement custom sharding solutions, it’s recommended that you use SQL Server in an Azure Virtual Machine.</span></span> <span data-ttu-id="6b869-150">Para obter as informações mais recentes, veja [Escalando horizontalmente Bancos de Dados SQL do Azure](https://msdn.microsoft.com/library/azure/dn495641.aspx) e [Camadas de serviço e níveis de desempenho do Banco de Dados SQL do Azure](../../../sql-database/sql-database-service-tiers.md).</span><span class="sxs-lookup"><span data-stu-id="6b869-150">For the latest information, see [Scaling Out Azure SQL Databases](https://msdn.microsoft.com/library/azure/dn495641.aspx) and [Azure SQL Database Service Tiers and Performance Levels](../../../sql-database/sql-database-service-tiers.md).</span></span>
  * <span data-ttu-id="6b869-151">**Conformidade com a HIPAA**: ISVs (Fornecedores de Software Independentes) e clientes do setor de serviços de saúde podem optar pelo [SQL Server nas Máquinas Virtuais do Azure](virtual-machines-windows-sql-server-iaas-overview.md) em vez do [Banco de Dados SQL do Azure](../../../sql-database/sql-database-technical-overview.md), pois o SQL Server em uma Máquina Virtual do Azure é coberto pelo BAA (Acordo de Parceiro Comercial) da HIPAA.</span><span class="sxs-lookup"><span data-stu-id="6b869-151">**HIPAA compliance**: Healthcare customers and Independent Software Vendors (ISVs) might choose [SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-server-iaas-overview.md) instead of [Azure SQL Database](../../../sql-database/sql-database-technical-overview.md) because SQL Server in an Azure Virtual Machine is covered by HIPAA Business Associate Agreement (BAA).</span></span> <span data-ttu-id="6b869-152">Para obter informações sobre conformidade, veja [Central de Confiabilidade do Microsoft Azure: conformidade](https://azure.microsoft.com/support/trust-center/compliance/).</span><span class="sxs-lookup"><span data-stu-id="6b869-152">For information on compliance, see [Microsoft Azure Trust Center: Compliance](https://azure.microsoft.com/support/trust-center/compliance/).</span></span>
  * <span data-ttu-id="6b869-153">**Recursos do nível de instância**: neste momento, o Banco de Dados SQL não dá suporte a recursos que residem fora do banco de dados (como Servidores Vinculados, trabalhos do Agente, FileStream, Service Broker, etc).</span><span class="sxs-lookup"><span data-stu-id="6b869-153">**Instance-level features**: At this time, SQL Database doesn’t support features that live outside of the database (such as Linked Servers, Agent jobs, FileStream, Service Broker, etc.).</span></span> <span data-ttu-id="6b869-154">Para obter mais informações, veja [Diretrizes e limitações do Banco de Dados SQL do Azure](https://msdn.microsoft.com/library/azure/ff394102.aspx).</span><span class="sxs-lookup"><span data-stu-id="6b869-154">For more information, see [Azure SQL Database Guidelines and Limitations](https://msdn.microsoft.com/library/azure/ff394102.aspx).</span></span>

## <a name="1-tier-simple-single-virtual-machine"></a><span data-ttu-id="6b869-155">Uma camada (simples): máquina virtual única</span><span class="sxs-lookup"><span data-stu-id="6b869-155">1-tier (simple): single virtual machine</span></span>
<span data-ttu-id="6b869-156">Neste padrão de aplicativo, você implanta seu banco de dados e aplicativo do SQL Server em uma máquina virtual autônoma no Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-156">In this application pattern, you deploy your SQL Server application and database to a standalone virtual machine in Azure.</span></span> <span data-ttu-id="6b869-157">A mesma máquina virtual contém seu aplicativo Web/cliente, componentes de negócios, camada de acesso de dados e o servidor de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="6b869-157">The same virtual machine contains your client/web application, business components, data access layer, and the database server.</span></span> <span data-ttu-id="6b869-158">A apresentação, os negócios e o código de acesso a dados estão separados logicamente, mas estão localizados fisicamente em uma única máquina do servidor.</span><span class="sxs-lookup"><span data-stu-id="6b869-158">The presentation, business, and data access code are logically separated but are physically located in a single-server machine.</span></span> <span data-ttu-id="6b869-159">A maioria dos clientes inicia com esse padrão de aplicativo e escala horizontalmente por meio do acréscimo de mais funções Web ou máquinas virtuais a seu sistema.</span><span class="sxs-lookup"><span data-stu-id="6b869-159">Most customers start with this application pattern and then, they scale out by adding more web roles or virtual machines to their system.</span></span>

<span data-ttu-id="6b869-160">Esse padrão de aplicativo é útil quando:</span><span class="sxs-lookup"><span data-stu-id="6b869-160">This application pattern is useful when:</span></span>

* <span data-ttu-id="6b869-161">Você deseja executar uma migração simples para a plataforma do Azure para avaliar se a plataforma atende aos requisitos do aplicativo ou não.</span><span class="sxs-lookup"><span data-stu-id="6b869-161">You want to perform a simple migration to Azure platform to evaluate whether the platform answers your application’s requirements or not.</span></span>
* <span data-ttu-id="6b869-162">Você deseja manter todas as camadas do aplicativo hospedadas na mesma máquina virtual no mesmo data center do Azure para reduzir a latência entre camadas.</span><span class="sxs-lookup"><span data-stu-id="6b869-162">You want to keep all the application tiers hosted in the same virtual machine in the same Azure data center to reduce the latency between tiers.</span></span>
* <span data-ttu-id="6b869-163">Você deseja provisionar rapidamente ambientes de teste e desenvolvimento por curtos períodos de tempo.</span><span class="sxs-lookup"><span data-stu-id="6b869-163">You want to quickly provision development and test environments for short periods of time.</span></span>
* <span data-ttu-id="6b869-164">Você deseja executar testes de estresse para vários níveis de carga de trabalho, mas ao mesmo tempo não deseja possuir e manter muitas máquinas físicas o tempo todo.</span><span class="sxs-lookup"><span data-stu-id="6b869-164">You want to perform stress testing for varying workload levels but at the same time you do not want to own and maintain many physical machines all the time.</span></span>

<span data-ttu-id="6b869-165">O diagrama a seguir demonstra um cenário local simples e como você pode implantar sua solução habilitada para nuvem em uma única máquina virtual no Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-165">The following diagram demonstrates a simple on-premises scenario and how you can deploy its cloud enabled solution in a single virtual machine in Azure.</span></span>

![Padrão de aplicativo de uma camada](./media/virtual-machines-windows-sql-server-app-patterns-dev-strategies/IC728008.png)

<span data-ttu-id="6b869-167">Implantar a camada de negócios (componentes de acesso de dados e lógica de negócios) na mesma camada física da camada de apresentação pode maximizar o desempenho do aplicativo, a menos que você precise usar uma camada separada devido a questões de dimensionamento ou segurança.</span><span class="sxs-lookup"><span data-stu-id="6b869-167">Deploying the business layer (business logic and data access components) on the same physical tier as the presentation layer can maximize application performance, unless you must use a separate tier due to scalability or security concerns.</span></span>

<span data-ttu-id="6b869-168">Como esse é um padrão muito comum para começar, você pode considerar útil o seguinte artigo sobre migração para mover seus dados para a VM do SQL Server: [Migrando um banco de dados para o SQL Server em uma VM do Azure](virtual-machines-windows-migrate-sql.md).</span><span class="sxs-lookup"><span data-stu-id="6b869-168">Since this is a very common pattern to start with, you might find the following article on migration useful for moving your data to your SQL Server VM: [Migrating a Database to SQL Server on an Azure VM](virtual-machines-windows-migrate-sql.md).</span></span>

## <a name="3-tier-simple-multiple-virtual-machines"></a><span data-ttu-id="6b869-169">Três camadas (simples): várias máquinas virtuais</span><span class="sxs-lookup"><span data-stu-id="6b869-169">3-tier (simple): multiple virtual machines</span></span>
<span data-ttu-id="6b869-170">Nesse padrão de aplicativo, você implanta um aplicativo de três camadas no Azure colocando cada camada do aplicativo em uma máquina virtual diferente.</span><span class="sxs-lookup"><span data-stu-id="6b869-170">In this application pattern, you deploy a 3-tier application in Azure by placing each application tier in a different virtual machine.</span></span> <span data-ttu-id="6b869-171">Isso fornece um ambiente flexível para facilitar cenários de ampliação e redução.</span><span class="sxs-lookup"><span data-stu-id="6b869-171">This provides a flexible environment for an easy scale-up and scale-out scenarios.</span></span> <span data-ttu-id="6b869-172">Quando uma máquina virtual contém seu aplicativo Web/cliente, a outra hospeda seus componentes de negócios e a terceira hospeda o servidor de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="6b869-172">When one virtual machine contains your client/web application, the other one hosts your business components, and the other one hosts the database server.</span></span>

<span data-ttu-id="6b869-173">Esse padrão de aplicativo é útil quando:</span><span class="sxs-lookup"><span data-stu-id="6b869-173">This application pattern is useful when:</span></span>

* <span data-ttu-id="6b869-174">Você deseja executar uma migração de aplicativos de bancos de dados complexos para máquinas virtuais do Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-174">You want to perform a migration of complex database applications to Azure Virtual Machines.</span></span>
* <span data-ttu-id="6b869-175">Você quer que diferentes camadas do aplicativo sejam hospedadas em regiões diferentes.</span><span class="sxs-lookup"><span data-stu-id="6b869-175">You want different application tiers to be hosted in different regions.</span></span> <span data-ttu-id="6b869-176">Por exemplo, você pode ter bancos de dados compartilhados implantados em várias regiões para fins de elaboração de relatórios.</span><span class="sxs-lookup"><span data-stu-id="6b869-176">For example, you might have shared databases that are deployed to multiple regions for reporting purposes.</span></span>
* <span data-ttu-id="6b869-177">Você deseja mover aplicativos corporativos de plataformas locais virtualizadas para máquinas virtuais do Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-177">You want to move enterprise applications from on-premises virtualized platforms to Azure Virtual Machines.</span></span> <span data-ttu-id="6b869-178">Para ver uma discussão detalhada sobre aplicativos empresariais, confira [O que é um Aplicativo Empresarial](https://msdn.microsoft.com/library/aa267045.aspx).</span><span class="sxs-lookup"><span data-stu-id="6b869-178">For a detailed discussion on enterprise applications, see [What is an Enterprise Application](https://msdn.microsoft.com/library/aa267045.aspx).</span></span>
* <span data-ttu-id="6b869-179">Você deseja provisionar rapidamente ambientes de teste e desenvolvimento por curtos períodos de tempo.</span><span class="sxs-lookup"><span data-stu-id="6b869-179">You want to quickly provision development and test environments for short periods of time.</span></span>
* <span data-ttu-id="6b869-180">Você deseja executar testes de estresse para vários níveis de carga de trabalho, mas ao mesmo tempo não deseja possuir e manter muitas máquinas físicas o tempo todo.</span><span class="sxs-lookup"><span data-stu-id="6b869-180">You want to perform stress testing for varying workload levels but at the same time you do not want to own and maintain many physical machines all the time.</span></span>

<span data-ttu-id="6b869-181">O diagrama a seguir demonstra como você pode colocar um aplicativo simples de três camadas no Azure colocando cada camada do aplicativo em uma máquina virtual diferente.</span><span class="sxs-lookup"><span data-stu-id="6b869-181">The following diagram demonstrates how you can place a simple 3-tier application in Azure by placing each application tier in a different virtual machine.</span></span>

![padrão de aplicativo de três camadas](./media/virtual-machines-windows-sql-server-app-patterns-dev-strategies/IC728009.png)

<span data-ttu-id="6b869-183">Neste padrão de aplicativo, há apenas uma VM (máquina virtual) em cada camada.</span><span class="sxs-lookup"><span data-stu-id="6b869-183">In this application pattern, there is only one virtual machine (VM) in each tier.</span></span> <span data-ttu-id="6b869-184">Se você tiver várias VMs no Azure, recomendamos configurar uma rede virtual.</span><span class="sxs-lookup"><span data-stu-id="6b869-184">If you have multiple VMs in Azure, we recommend that you set up a virtual network.</span></span> <span data-ttu-id="6b869-185">[Rede Virtual do Azure](../../../virtual-network/virtual-networks-overview.md) cria um limite de segurança confiável e também permite que as VMs se comuniquem por meio do endereço IP privado.</span><span class="sxs-lookup"><span data-stu-id="6b869-185">[Azure Virtual Network](../../../virtual-network/virtual-networks-overview.md) creates a trusted security boundary and also allows VMs to communicate among themselves over the private IP address.</span></span> <span data-ttu-id="6b869-186">Além disso, certifique-se de que todas as conexões de Internet vão apenas para a camada de apresentação.</span><span class="sxs-lookup"><span data-stu-id="6b869-186">In addition, always make sure that all Internet connections only go to the presentation tier.</span></span> <span data-ttu-id="6b869-187">Quando seguir esse padrão de aplicativo, gerencie as regras de grupos de segurança de rede para controlar o acesso.</span><span class="sxs-lookup"><span data-stu-id="6b869-187">When following this application pattern, manage the network security group rules to control access.</span></span> <span data-ttu-id="6b869-188">Para obter mais informações, consulte [Permitir o acesso externo à sua VM usando o Portal do Azure](../nsg-quickstart-portal.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="6b869-188">For more information, see [Allow external access to your VM using the Azure portal](../nsg-quickstart-portal.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>

<span data-ttu-id="6b869-189">No diagrama, os protocolos de Internet podem ser TCP, UDP, HTTP ou HTTPS.</span><span class="sxs-lookup"><span data-stu-id="6b869-189">In the diagram, Internet Protocols can be TCP, UDP, HTTP, or HTTPS.</span></span>

> [!NOTE]
> <span data-ttu-id="6b869-190">Configurar uma rede virtual no Azure é gratuito.</span><span class="sxs-lookup"><span data-stu-id="6b869-190">Setting up a virtual network in Azure is free of charge.</span></span> <span data-ttu-id="6b869-191">No entanto, você é cobrado pelo gateway de VPN que se conecta ao local.</span><span class="sxs-lookup"><span data-stu-id="6b869-191">However, you are charged for the VPN gateway that connects to on-premises.</span></span> <span data-ttu-id="6b869-192">A cobrança é feita com base na quantidade de tempo que a conexão é fornecida e fica disponível.</span><span class="sxs-lookup"><span data-stu-id="6b869-192">This charge is based on the amount of time that connection is provisioned and available.</span></span>
> 
> 

## <a name="2-tier-and-3-tier-with-presentation-tier-scale-out"></a><span data-ttu-id="6b869-193">Duas e três camadas com dimensionamento da camada de apresentação</span><span class="sxs-lookup"><span data-stu-id="6b869-193">2-tier and 3-tier with presentation tier scale-out</span></span>
<span data-ttu-id="6b869-194">Nesse padrão de aplicativo, você implanta um aplicativo de banco de dados de duas ou três camadas em máquinas virtuais do Azure colocando cada camada do aplicativo em uma máquina virtual diferente.</span><span class="sxs-lookup"><span data-stu-id="6b869-194">In this application pattern, you deploy 2-tier or 3-tier database application to Azure Virtual Machines by placing each application tier in a different virtual machine.</span></span> <span data-ttu-id="6b869-195">Além disso, você escala horizontalmente a camada de apresentação devido ao maior volume de solicitações do cliente.</span><span class="sxs-lookup"><span data-stu-id="6b869-195">In addition, you scale out the presentation tier due to increased volume of incoming client requests.</span></span>

<span data-ttu-id="6b869-196">Esse padrão de aplicativo é útil quando:</span><span class="sxs-lookup"><span data-stu-id="6b869-196">This application pattern is useful when:</span></span>

* <span data-ttu-id="6b869-197">Você deseja mover aplicativos corporativos de plataformas locais virtualizadas para máquinas virtuais do Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-197">You want to move enterprise applications from on-premises virtualized platforms to Azure Virtual Machines.</span></span>
* <span data-ttu-id="6b869-198">Você deseja escalar horizontalmente a camada de apresentação devido ao maior volume de solicitações do cliente.</span><span class="sxs-lookup"><span data-stu-id="6b869-198">You want to scale out the presentation tier due to increased volume of incoming client requests.</span></span>
* <span data-ttu-id="6b869-199">Você deseja provisionar rapidamente ambientes de teste e desenvolvimento por curtos períodos de tempo.</span><span class="sxs-lookup"><span data-stu-id="6b869-199">You want to quickly provision development and test environments for short periods of time.</span></span>
* <span data-ttu-id="6b869-200">Você deseja executar testes de estresse para vários níveis de carga de trabalho, mas ao mesmo tempo não deseja possuir e manter muitas máquinas físicas o tempo todo.</span><span class="sxs-lookup"><span data-stu-id="6b869-200">You want to perform stress testing for varying workload levels but at the same time you do not want to own and maintain many physical machines all the time.</span></span>
* <span data-ttu-id="6b869-201">Você deseja ter um ambiente de infraestrutura que possa escalar e reduzir verticalmente sob demanda.</span><span class="sxs-lookup"><span data-stu-id="6b869-201">You want to own an infrastructure environment that can scale up and down on demand.</span></span>

<span data-ttu-id="6b869-202">O diagrama a seguir demonstra como você pode colocar as camadas do aplicativo em várias máquinas virtuais no Azure expandindo a camada de apresentação devido a um volume maior de solicitações de clientes.</span><span class="sxs-lookup"><span data-stu-id="6b869-202">The following diagram demonstrates how you can place the application tiers in multiple virtual machines in Azure by scaling out the presentation tier due to increased volume of incoming client requests.</span></span> <span data-ttu-id="6b869-203">Como visto no diagrama, o Balanceador de Carga do Azure é responsável por distribuir o tráfego entre várias máquinas virtuais e por determinar a qual servidor Web se conectar.</span><span class="sxs-lookup"><span data-stu-id="6b869-203">As seen in the diagram, Azure Load Balancer is responsible for distributing traffic across multiple virtual machines and also determining which web server to connect to.</span></span> <span data-ttu-id="6b869-204">Ter várias instâncias dos servidores Web atrás de um balanceador de carga garante a alta disponibilidade da camada de apresentação.</span><span class="sxs-lookup"><span data-stu-id="6b869-204">Having multiple instances of the web servers behind a load balancer ensures the high availability of the presentation tier.</span></span>

![Padrão de aplicativo - escalamento horizontal da camada de apresentação](./media/virtual-machines-windows-sql-server-app-patterns-dev-strategies/IC728010.png)

### <a name="best-practices-for-2-tier-3-tier-or-n-tier-patterns-that-have-multiple-vms-in-one-tier"></a><span data-ttu-id="6b869-206">Práticas recomendadas para padrões de duas, três ou n camadas que têm várias VMs em uma camada</span><span class="sxs-lookup"><span data-stu-id="6b869-206">Best practices for 2-tier, 3-tier, or n-tier patterns that have multiple VMs in one tier</span></span>
<span data-ttu-id="6b869-207">É recomendável que você coloque as máquinas virtuais que pertencem à mesma camada no mesmo serviço de nuvem e no mesmo conjunto de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="6b869-207">It’s recommended that you place the virtual machines that belong to the same tier in the same cloud service and in the same the availability set.</span></span> <span data-ttu-id="6b869-208">Por exemplo, coloque um conjunto de servidores Web em **CloudService1** e **AvailabilitySet1** e um conjunto de servidores de banco de dados em **CloudService2** e **AvailabilitySet2**.</span><span class="sxs-lookup"><span data-stu-id="6b869-208">For example, place a set of web servers in **CloudService1** and **AvailabilitySet1** and a set of database servers in **CloudService2** and **AvailabilitySet2**.</span></span> <span data-ttu-id="6b869-209">Um conjunto de disponibilidade no Azure permite que você coloque os nós de alta disponibilidade em domínios de falha e domínios de atualização separados.</span><span class="sxs-lookup"><span data-stu-id="6b869-209">An availability set in Azure enables you to place the high availability nodes into separate fault domains and upgrade domains.</span></span>

<span data-ttu-id="6b869-210">Para aproveitar as várias instâncias de VM de uma camada, você precisa configurar o Balanceador de Carga do Azure entre as camadas do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="6b869-210">To leverage multiple VM instances of a tier, you need to configure Azure Load Balancer between application tiers.</span></span> <span data-ttu-id="6b869-211">Para configurar o Balanceador de Carga em cada camada, crie um ponto de extremidade com balanceamento de carga nas VMs de cada camada separadamente.</span><span class="sxs-lookup"><span data-stu-id="6b869-211">To configure Load Balancer in each tier, create a load-balanced endpoint on each tier’s VMs separately.</span></span> <span data-ttu-id="6b869-212">Para uma camada específica, primeiro crie VMs no mesmo serviço de nuvem.</span><span class="sxs-lookup"><span data-stu-id="6b869-212">For a specific tier, first create VMs in the same cloud service.</span></span> <span data-ttu-id="6b869-213">Isso garante que todos eles tenham o mesmo endereço IP virtual público.</span><span class="sxs-lookup"><span data-stu-id="6b869-213">This ensures that they have the same public Virtual IP address.</span></span> <span data-ttu-id="6b869-214">Em seguida, crie um ponto de extremidade em uma das máquinas virtuais nessa camada.</span><span class="sxs-lookup"><span data-stu-id="6b869-214">Next, create an endpoint on one of the virtual machines on that tier.</span></span> <span data-ttu-id="6b869-215">Em seguida, atribua o mesmo ponto de extremidade às outras máquinas virtuais na camada para balanceamento de carga.</span><span class="sxs-lookup"><span data-stu-id="6b869-215">Then, assign the same endpoint to the other virtual machines on that tier for load balancing.</span></span> <span data-ttu-id="6b869-216">Ao criar um conjunto com balanceamento de carga, você distribui o tráfego entre várias máquinas virtuais e também permite que o Balanceador de Carga determine qual nó conectar quando um nó de VM de back-end falhar.</span><span class="sxs-lookup"><span data-stu-id="6b869-216">By creating a load-balanced set, you distribute traffic across multiple virtual machines and also allow the Load Balancer to determine which node to connect when a backend VM node fails.</span></span> <span data-ttu-id="6b869-217">Por exemplo, ter várias instâncias dos servidores Web atrás de um balanceador de carga garante a alta disponibilidade da camada de apresentação.</span><span class="sxs-lookup"><span data-stu-id="6b869-217">For example, having multiple instances of the web servers behind a load balancer ensures the high availability of the presentation tier.</span></span>

<span data-ttu-id="6b869-218">Como prática recomendada, sempre certifique-se de que todas as conexões de Internet vão primeiro para a camada de apresentação.</span><span class="sxs-lookup"><span data-stu-id="6b869-218">As a best practice, always make sure that all internet connections first go to the presentation tier.</span></span> <span data-ttu-id="6b869-219">A camada de apresentação acessa a camada de negócios e, em seguida, a camada de negócios acessa a camada de dados.</span><span class="sxs-lookup"><span data-stu-id="6b869-219">The presentation layer accesses the business tier, and then the business tier accesses the data tier.</span></span> <span data-ttu-id="6b869-220">Para obter mais informações sobre como permitir o acesso à camada de apresentação, consulte [Permitir o acesso externo à sua VM usando o Portal do Azure](../nsg-quickstart-portal.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="6b869-220">For more information on how to allow access to the presentation layer, see [Allow external access to your VM using the Azure portal](../nsg-quickstart-portal.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>

<span data-ttu-id="6b869-221">Observe que o Balanceador de Carga no Azure funciona de forma semelhante a balanceadores de carga em um ambiente local.</span><span class="sxs-lookup"><span data-stu-id="6b869-221">Note that the Load Balancer in Azure works similar to load balancers in an on-premises environment.</span></span> <span data-ttu-id="6b869-222">Para obter mais informações, veja [Balanceamento de carga para serviços de infraestrutura do Azure](../tutorial-load-balancer.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="6b869-222">For more information, see [Load balancing for Azure infrastructure services](../tutorial-load-balancer.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>

<span data-ttu-id="6b869-223">Além disso, recomendamos que você configure uma rede privada para suas máquinas virtuais usando a Rede Virtual do Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-223">In addition, we recommend that you set up a private network for your virtual machines by using Azure Virtual Network.</span></span> <span data-ttu-id="6b869-224">Isso permite que elas se comuniquem por meio do endereço IP privado.</span><span class="sxs-lookup"><span data-stu-id="6b869-224">This allows them to communicate among themselves over the private IP address.</span></span> <span data-ttu-id="6b869-225">Para obter mais informações, veja [Rede Virtual do Azure](../../../virtual-network/virtual-networks-overview.md).</span><span class="sxs-lookup"><span data-stu-id="6b869-225">For more information, see [Azure Virtual Network](../../../virtual-network/virtual-networks-overview.md).</span></span>

## <a name="2-tier-and-3-tier-with-business-tier-scale-out"></a><span data-ttu-id="6b869-226">Duas e três camadas com dimensionamento da camada de negócios</span><span class="sxs-lookup"><span data-stu-id="6b869-226">2-tier and 3-tier with business tier scale-out</span></span>
<span data-ttu-id="6b869-227">Nesse padrão de aplicativo, você implanta um aplicativo de banco de dados de duas ou três camadas em máquinas virtuais do Azure colocando cada camada do aplicativo em uma máquina virtual diferente.</span><span class="sxs-lookup"><span data-stu-id="6b869-227">In this application pattern, you deploy 2-tier or 3-tier database application to Azure Virtual Machines by placing each application tier in a different virtual machine.</span></span> <span data-ttu-id="6b869-228">Além disso, talvez você queira distribuir os componentes do servidor de aplicativos em várias máquinas virtuais devido à complexidade do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="6b869-228">In addition, you might want to distribute the application server components to multiple virtual machines due to the complexity of your application.</span></span>

<span data-ttu-id="6b869-229">Esse padrão de aplicativo é útil quando:</span><span class="sxs-lookup"><span data-stu-id="6b869-229">This application pattern is useful when:</span></span>

* <span data-ttu-id="6b869-230">Você deseja mover aplicativos corporativos de plataformas locais virtualizadas para máquinas virtuais do Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-230">You want to move enterprise applications from on-premises virtualized platforms to Azure Virtual Machines.</span></span>
* <span data-ttu-id="6b869-231">Você deseja distribuir os componentes do servidor de aplicativos em várias máquinas virtuais devido à complexidade do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="6b869-231">You want to distribute the application server components to multiple virtual machines due to the complexity of your application.</span></span>
* <span data-ttu-id="6b869-232">Você deseja mover aplicativos pesados de LOB (linha de negócios) locais de lógica de negócios para as Máquinas Virtuais do Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-232">You want to move business logic heavy on-premises LOB (line-of-business) applications to Azure Virtual Machines.</span></span> <span data-ttu-id="6b869-233">Aplicativos de LOB são um conjunto de aplicativos críticos de computador que são vitais para comandar uma empresa, como aplicativos de contabilidade, RH (recursos humanos), folha de pagamento, gerenciamento da cadeia de suprimentos e planejamento de recursos.</span><span class="sxs-lookup"><span data-stu-id="6b869-233">LOB applications are a set of critical computer applications that are vital to running an enterprise, such as accounting, human resources (HR), payroll, supply chain management, and resource planning applications.</span></span>
* <span data-ttu-id="6b869-234">Você deseja provisionar rapidamente ambientes de teste e desenvolvimento por curtos períodos de tempo.</span><span class="sxs-lookup"><span data-stu-id="6b869-234">You want to quickly provision development and test environments for short periods of time.</span></span>
* <span data-ttu-id="6b869-235">Você deseja executar testes de estresse para vários níveis de carga de trabalho, mas ao mesmo tempo não deseja possuir e manter muitas máquinas físicas o tempo todo.</span><span class="sxs-lookup"><span data-stu-id="6b869-235">You want to perform stress testing for varying workload levels but at the same time you do not want to own and maintain many physical machines all the time.</span></span>
* <span data-ttu-id="6b869-236">Você deseja ter um ambiente de infraestrutura que possa escalar e reduzir verticalmente sob demanda.</span><span class="sxs-lookup"><span data-stu-id="6b869-236">You want to own an infrastructure environment that can scale up and down on demand.</span></span>

<span data-ttu-id="6b869-237">O diagrama a seguir demonstra um cenário local e sua solução habilitada para nuvem.</span><span class="sxs-lookup"><span data-stu-id="6b869-237">The following diagram demonstrates an on-premises scenario and its cloud enabled solution.</span></span> <span data-ttu-id="6b869-238">Nesse cenário, você coloca as camadas do aplicativo em várias máquinas virtuais no Azure por meio da expansão da camada de negócios, que contém os componentes de acesso de dados e a camada de lógica de negócios.</span><span class="sxs-lookup"><span data-stu-id="6b869-238">In this scenario, you place the application tiers in multiple virtual machines in Azure by scaling out the business tier, which contains the business logic tier and data access components.</span></span> <span data-ttu-id="6b869-239">Como visto no diagrama, o Balanceador de Carga do Azure é responsável por distribuir o tráfego entre várias máquinas virtuais e por determinar a qual servidor Web se conectar.</span><span class="sxs-lookup"><span data-stu-id="6b869-239">As seen in the diagram, Azure Load Balancer is responsible for distributing traffic across multiple virtual machines and also determining which web server to connect to.</span></span> <span data-ttu-id="6b869-240">Ter várias instâncias dos servidores de aplicativo atrás de um balanceador de carga garante a alta disponibilidade da camada de negócios.</span><span class="sxs-lookup"><span data-stu-id="6b869-240">Having multiple instances of the application servers behind a load balancer ensures the high availability of the business tier.</span></span> <span data-ttu-id="6b869-241">Para obter mais informações, veja [Práticas recomendadas para padrões de aplicativos de duas, três ou n camadas que têm várias máquinas virtuais em uma camada](#best-practices-for-2-tier-3-tier-or-n-tier-patterns-that-have-multiple-vms-in-one-tier).</span><span class="sxs-lookup"><span data-stu-id="6b869-241">For more information, see [Best practices for 2-tier, 3-tier, or n-tier application patterns that have multiple virtual machines in one tier](#best-practices-for-2-tier-3-tier-or-n-tier-patterns-that-have-multiple-vms-in-one-tier).</span></span>

![Padrão de aplicativo com escalamento horizontal da camada de negócios](./media/virtual-machines-windows-sql-server-app-patterns-dev-strategies/IC728011.png)

## <a name="2-tier-and-3-tier-with-presentation-and-business-tiers-scale-out-and-hadr"></a><span data-ttu-id="6b869-243">Duas e três camadas com expansão das camadas de negócios e apresentação e HADR</span><span class="sxs-lookup"><span data-stu-id="6b869-243">2-tier and 3-tier with presentation and business tiers scale-out and HADR</span></span>
<span data-ttu-id="6b869-244">Nesse padrão de aplicativo, você implanta um aplicativo de banco de dados de duas ou três camadas em Máquinas Virtuais do Azure distribuindo a camada de apresentação (servidor Web) e os componentes da camada corporativa (servidor de aplicativos) em várias máquinas virtuais.</span><span class="sxs-lookup"><span data-stu-id="6b869-244">In this application pattern, you deploy 2-tier or 3-tier database application to Azure Virtual Machines by distributing the presentation tier (web server) and the business tier (application server) components to multiple virtual machines.</span></span> <span data-ttu-id="6b869-245">Além disso, você deve implementar soluções de recuperação de desastres e alta disponibilidade em seus bancos de dados nas máquinas virtuais do Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-245">In addition, you implement high-availability and disaster recovery solutions for your databases in Azure virtual machines.</span></span>

<span data-ttu-id="6b869-246">Esse padrão de aplicativo é útil quando:</span><span class="sxs-lookup"><span data-stu-id="6b869-246">This application pattern is useful when:</span></span>

* <span data-ttu-id="6b869-247">Você deseja mudar aplicativos corporativos de plataformas virtualizadas locais para o Azure implementando os recursos de alta disponibilidade e recuperação de dados do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="6b869-247">You want to move enterprise applications from virtualized platforms on-premises to Azure by implementing SQL Server high availability and disaster recovery capabilities.</span></span>
* <span data-ttu-id="6b869-248">Você deseja escalar horizontalmente a camada de apresentação e a camada de negócios devido ao aumento no volume de solicitações de cliente e à complexidade do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="6b869-248">You want to scale out the presentation tier and the business tier due to increased volume of incoming client requests and the complexity of your application.</span></span>
* <span data-ttu-id="6b869-249">Você deseja provisionar rapidamente ambientes de teste e desenvolvimento por curtos períodos de tempo.</span><span class="sxs-lookup"><span data-stu-id="6b869-249">You want to quickly provision development and test environments for short periods of time.</span></span>
* <span data-ttu-id="6b869-250">Você deseja executar testes de estresse para vários níveis de carga de trabalho, mas ao mesmo tempo não deseja possuir e manter muitas máquinas físicas o tempo todo.</span><span class="sxs-lookup"><span data-stu-id="6b869-250">You want to perform stress testing for varying workload levels but at the same time you do not want to own and maintain many physical machines all the time.</span></span>
* <span data-ttu-id="6b869-251">Você deseja ter um ambiente de infraestrutura que possa escalar e reduzir verticalmente sob demanda.</span><span class="sxs-lookup"><span data-stu-id="6b869-251">You want to own an infrastructure environment that can scale up and down on demand.</span></span>

<span data-ttu-id="6b869-252">O diagrama a seguir demonstra um cenário local e sua solução habilitada para nuvem.</span><span class="sxs-lookup"><span data-stu-id="6b869-252">The following diagram demonstrates an on-premises scenario and its cloud enabled solution.</span></span> <span data-ttu-id="6b869-253">Nesse cenário, você escala horizontalmente os componentes da camada de apresentação e da camada de negócios em várias máquinas virtuais no Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-253">In this scenario, you scale out the presentation tier and the business tier components in multiple virtual machines in Azure.</span></span> <span data-ttu-id="6b869-254">Além disso, você deve implementar técnicas de HADR (alta disponibilidade e recuperação de desastres) em seus bancos de dados do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="6b869-254">In addition, you implement high availability and disaster recovery (HADR) techniques for SQL Server databases in Azure.</span></span>

<span data-ttu-id="6b869-255">Ao executar várias cópias de um aplicativo em diferentes VMs, certifique-se de estar balanceando a carga de solicitações entre elas.</span><span class="sxs-lookup"><span data-stu-id="6b869-255">Running multiple copies of an application in different VMs make sure that you are load balancing requests across them.</span></span> <span data-ttu-id="6b869-256">Quando tem várias máquinas virtuais, você precisa certificar-se de que todas as suas VMs estejam acessíveis e em execução em um determinado momento.</span><span class="sxs-lookup"><span data-stu-id="6b869-256">When you have multiple virtual machines, you need to make sure that all your VMs are accessible and running at one point in time.</span></span> <span data-ttu-id="6b869-257">Se você configurar o balanceamento de carga, o Azure Load Balancer vai monitorar a integridade das VMs e direcionar as chamadas de entrada para os nós de VM funcionando corretamente.</span><span class="sxs-lookup"><span data-stu-id="6b869-257">If you configure load balancing, Azure Load Balancer tracks the health of VMs and directs incoming calls to the healthy functioning VM nodes properly.</span></span> <span data-ttu-id="6b869-258">Para obter informações sobre como configurar o balanceamento de carga das máquinas virtuais, veja [Balanceamento de carga para serviços de infraestrutura do Azure](../tutorial-load-balancer.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="6b869-258">For information on how to set up load balancing of the virtual machines, see [Load balancing for Azure infrastructure services](../tutorial-load-balancer.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span> <span data-ttu-id="6b869-259">Ter várias instâncias dos servidores Web e de aplicativo atrás de um balanceador de carga garante a alta disponibilidade das camadas de negócios e apresentação.</span><span class="sxs-lookup"><span data-stu-id="6b869-259">Having multiple instances of web and application servers behind a load balancer ensures the high availability of the presentation and business tiers.</span></span>

![Escalamento horizontal e alta disponibilidade](./media/virtual-machines-windows-sql-server-app-patterns-dev-strategies/IC728012.png)

### <a name="best-practices-for-application-patterns-requiring-sql-hadr"></a><span data-ttu-id="6b869-261">Práticas recomendadas para padrões de aplicativo que exigem HADR SQL</span><span class="sxs-lookup"><span data-stu-id="6b869-261">Best practices for application patterns requiring SQL HADR</span></span>
<span data-ttu-id="6b869-262">Quando você configura soluções de alta disponibilidade e recuperação de desastre do SQL Server nas Máquinas Virtuais do Azure, é obrigatório configurar uma rede virtual para suas máquinas virtuais usando a [Rede Virtual do Azure](../../../virtual-network/virtual-networks-overview.md) .</span><span class="sxs-lookup"><span data-stu-id="6b869-262">When you set up SQL Server high availability and disaster recovery solutions in Azure Virtual Machines, setting up a virtual network for your virtual machines using [Azure Virtual Network](../../../virtual-network/virtual-networks-overview.md) is mandatory.</span></span>  <span data-ttu-id="6b869-263">Máquinas virtuais em uma Rede Virtual terão um endereço IP privado estável mesmo após um tempo de inatividade do serviço, assim você pode evitar o tempo de atualização necessário para resolução de nome DNS.</span><span class="sxs-lookup"><span data-stu-id="6b869-263">Virtual machines within a Virtual Network will have a stable private IP address even after a service downtime, thus you can avoid the update time required for DNS name resolution.</span></span> <span data-ttu-id="6b869-264">Além disso, a rede virtual permite que você estenda sua rede local para o Azure e crie um limite de segurança confiável.</span><span class="sxs-lookup"><span data-stu-id="6b869-264">In addition, the virtual network allows you to extend your on-premises network to Azure and creates a trusted security boundary.</span></span> <span data-ttu-id="6b869-265">Por exemplo, se o seu aplicativo tiver restrições de domínio corporativo (por exemplo, autenticação do Windows, Active Directory), é necessário configurar a [Rede Virtual do Azure](../../../virtual-network/virtual-networks-overview.md) .</span><span class="sxs-lookup"><span data-stu-id="6b869-265">For example, if your application has corporate domain restrictions (such as, Windows authentication, Active Directory), setting up [Azure Virtual Network](../../../virtual-network/virtual-networks-overview.md) is necessary.</span></span>

<span data-ttu-id="6b869-266">A maioria dos clientes que estão executando código de produção no Azure mantêm as réplicas primária e secundária no Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-266">Most of customers, who are running production code on Azure, are keeping both primary and secondary replicas in Azure.</span></span>

<span data-ttu-id="6b869-267">Para obter informações abrangentes e tutoriais sobre técnicas de alta disponibilidade e recuperação de desastres, veja [Alta disponibilidade e recuperação de desastre para o SQL Server nas Máquinas Virtuais do Azure](virtual-machines-windows-sql-high-availability-dr.md).</span><span class="sxs-lookup"><span data-stu-id="6b869-267">For comprehensive information and tutorials on high availability and disaster recovery techniques, see [High Availability and Disaster Recovery for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-high-availability-dr.md).</span></span>

## <a name="2-tier-and-3-tier-using-azure-vms-and-cloud-services"></a><span data-ttu-id="6b869-268">Duas e três camadas usando Serviços de Nuvem e VMs do Azure</span><span class="sxs-lookup"><span data-stu-id="6b869-268">2-tier and 3-tier using Azure VMs and Cloud Services</span></span>
<span data-ttu-id="6b869-269">Nesse padrão de aplicativo, você implanta um aplicativo de duas ou três camadas no Azure usando os [Serviços de Nuvem do Azure](../../../cloud-services/cloud-services-choose-me.md#tellmecs) (funções web e de trabalho – PaaS (Plataforma como serviço)) e as [Máquinas Virtuais do Azure](../overview.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) (IaaS (Infraestrutura como serviço)).</span><span class="sxs-lookup"><span data-stu-id="6b869-269">In this application pattern, you deploy 2-tier or 3-tier application to Azure by using both [Azure Cloud Services](../../../cloud-services/cloud-services-choose-me.md#tellmecs) (web and worker roles - Platform as a Service (PaaS)) and [Azure Virtual Machines](../overview.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) (Infrastructure as a Service (IaaS)).</span></span> <span data-ttu-id="6b869-270">Usar os [Serviços de Nuvem do Azure](https://azure.microsoft.com/documentation/services/cloud-services/) para a camada de negócios/camada de apresentação e o SQL Server nas [Máquinas Virtuais do Azure](../overview.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) para a camada de dados é útil para a maioria dos aplicativos em execução no Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-270">Using [Azure Cloud Services](https://azure.microsoft.com/documentation/services/cloud-services/) for the presentation tier/business tier and SQL Server in [Azure Virtual Machines](../overview.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) for the data tier is beneficial for most applications running on Azure.</span></span> <span data-ttu-id="6b869-271">O motivo é que ter uma instância de computação em execução nos Serviços de Nuvem facilita o gerenciamento, a implantação, o monitoramento e o dimensionamento.</span><span class="sxs-lookup"><span data-stu-id="6b869-271">The reason is that having a compute instance running on Cloud Services provides an easy management, deployment, monitoring, and scale-out.</span></span>

<span data-ttu-id="6b869-272">Com os Serviços de Nuvem, o Azure mantém a infraestrutura para você, executa a manutenção de rotina, aplica patches aos sistemas operacionais e tenta se recuperar de falhas do serviço e do hardware.</span><span class="sxs-lookup"><span data-stu-id="6b869-272">With Cloud Services, Azure maintains the infrastructure for you, performs routine maintenance, patches the operating systems, and attempts to recover from service and hardware failures.</span></span> <span data-ttu-id="6b869-273">Quando seu aplicativo precisa ser escala horizontalmente, há opções de escalamento horizontal automático e manual disponíveis para seu projeto de serviço de nuvem, aumentando ou diminuindo o número de instâncias ou máquinas virtuais que são usadas pelo aplicativo.</span><span class="sxs-lookup"><span data-stu-id="6b869-273">When your application needs scale-out, automatic, and manual scale-out options are available for your cloud service project by increasing or decreasing the number of instances or virtual machines that are used by your application.</span></span> <span data-ttu-id="6b869-274">Além disso, você pode usar o Visual Studio local para implantar o aplicativo em um projeto de serviço de nuvem no Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-274">In addition, you can use on-premises Visual Studio to deploy your application to a cloud service project in Azure.</span></span>

<span data-ttu-id="6b869-275">Em resumo, se você não quiser ser responsável por extensas tarefas administrativas para as camadas de negócios/apresentação e seu aplicativo não precisar de nenhuma configuração complexa de software ou sistema operacional, use os Serviços de Nuvem do Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-275">In summary, if you don’t want to own extensive administrative tasks for the presentation/business tier and your application does not require any complex configuration of software or the operating system, use Azure Cloud Services.</span></span> <span data-ttu-id="6b869-276">Se o Banco de Dados SQL do Azure não der suporte a todos os recursos que você está procurando, use o SQL Server em uma Máquina Virtual do Azure para a camada de dados.</span><span class="sxs-lookup"><span data-stu-id="6b869-276">If Azure SQL Database does not support all the features you are looking for, use SQL Server in an Azure Virtual Machine for the data tier.</span></span> <span data-ttu-id="6b869-277">Executar um aplicativo nos Serviços de Nuvem do Azure e armazenar dados em Máquinas Virtuais do Azure combina os benefícios dos dois serviços.</span><span class="sxs-lookup"><span data-stu-id="6b869-277">Running an application on Azure Cloud Services and storing data in Azure Virtual Machines combines the benefits of both services.</span></span> <span data-ttu-id="6b869-278">Para ver uma comparação detalhada, confira a seção neste tópico em [Comparando as estratégias de desenvolvimento no Azure](#comparing-web-development-strategies-in-azure).</span><span class="sxs-lookup"><span data-stu-id="6b869-278">For a detailed comparison, see the section in this topic on [Comparing development strategies in Azure](#comparing-web-development-strategies-in-azure).</span></span>

<span data-ttu-id="6b869-279">Nesse padrão de aplicativo, a camada de apresentação inclui uma função web, que é um componente dos Serviços de Nuvem em execução no ambiente de execução do Azure e é personalizada para a programação de aplicativos Web com suporte do IIS e ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="6b869-279">In this application pattern, the presentation tier includes a web role, which is a Cloud Services component running in the Azure execution environment and it is customized for web application programming as supported by IIS and ASP.NET.</span></span> <span data-ttu-id="6b869-280">A camada de negócios ou back-end inclui uma função de trabalho, que é um componente dos Serviços de Nuvem em execução no ambiente de execução do Azure e é útil para desenvolvimento de forma geral, e pode executar o processamento em segundo plano para uma função web.</span><span class="sxs-lookup"><span data-stu-id="6b869-280">The business or backend tier includes a worker role, which is a Cloud Services component running in the Azure execution environment and it is useful for generalized development, and may perform background processing for a web role.</span></span> <span data-ttu-id="6b869-281">A camada de banco de dados reside em uma máquina virtual do SQL Server no Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-281">The database tier resides in a SQL Server virtual machine in Azure.</span></span> <span data-ttu-id="6b869-282">A comunicação entre a camada de apresentação e a camada de banco de dados acontece diretamente ou por meio dos componentes da camada de negócios - função de trabalho.</span><span class="sxs-lookup"><span data-stu-id="6b869-282">The communication between the presentation tier and the database tier happens directly or over the business tier – worker role components.</span></span>

<span data-ttu-id="6b869-283">Esse padrão de aplicativo é útil quando:</span><span class="sxs-lookup"><span data-stu-id="6b869-283">This application pattern is useful when:</span></span>

* <span data-ttu-id="6b869-284">Você deseja mudar aplicativos corporativos de plataformas virtualizadas locais para o Azure implementando os recursos de alta disponibilidade e recuperação de dados do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="6b869-284">You want to move enterprise applications from virtualized platforms on-premises to Azure by implementing SQL Server high availability and disaster recovery capabilities.</span></span>
* <span data-ttu-id="6b869-285">Você deseja ter um ambiente de infraestrutura que possa escalar e reduzir verticalmente sob demanda.</span><span class="sxs-lookup"><span data-stu-id="6b869-285">You want to own an infrastructure environment that can scale up and down on demand.</span></span>
* <span data-ttu-id="6b869-286">O Banco de Dados SQL do Azure não dá suporte a todos os recursos de que seu aplicativo ou banco de dados precisa.</span><span class="sxs-lookup"><span data-stu-id="6b869-286">Azure SQL Database does not support all the features that your application or database needs.</span></span>
* <span data-ttu-id="6b869-287">Você deseja executar testes de estresse para vários níveis de carga de trabalho, mas ao mesmo tempo não deseja possuir e manter muitas máquinas físicas o tempo todo.</span><span class="sxs-lookup"><span data-stu-id="6b869-287">You want to perform stress testing for varying workload levels but at the same time you do not want to own and maintain many physical machines all the time.</span></span>

<span data-ttu-id="6b869-288">O diagrama a seguir demonstra um cenário local e sua solução habilitada para nuvem.</span><span class="sxs-lookup"><span data-stu-id="6b869-288">The following diagram demonstrates an on-premises scenario and its cloud enabled solution.</span></span> <span data-ttu-id="6b869-289">Nesse cenário, você coloca a camada de apresentação em funções da Web e a camada de negócios em funções de trabalho, mas a camada de dados em máquinas virtuais no Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-289">In this scenario, you place the presentation tier in web roles, the business tier in worker roles but the data tier in virtual machines in Azure.</span></span> <span data-ttu-id="6b869-290">Executar várias cópias da camada de apresentação em diferentes funções da Web garante o balanceamento da carga de solicitações entre elas.</span><span class="sxs-lookup"><span data-stu-id="6b869-290">Running multiple copies of the presentation tier in different web roles ensures to load balance requests across them.</span></span> <span data-ttu-id="6b869-291">Quando você combina os Serviços de Nuvem do Azure com as Máquinas Virtuais do Azure, recomendamos que você configure também a [Rede Virtual do Azure](../../../virtual-network/virtual-networks-overview.md) .</span><span class="sxs-lookup"><span data-stu-id="6b869-291">When you combine Azure Cloud Services with Azure Virtual Machines, we recommend that you set up [Azure Virtual Network](../../../virtual-network/virtual-networks-overview.md) as well.</span></span> <span data-ttu-id="6b869-292">Com a [Rede Virtual do Azure](../../../virtual-network/virtual-networks-overview.md), você pode ter endereços IP privados estáveis e persistentes dentro do mesmo serviço de nuvem na nuvem.</span><span class="sxs-lookup"><span data-stu-id="6b869-292">With [Azure Virtual Network](../../../virtual-network/virtual-networks-overview.md), you can have stable and persistent private IP addresses within the same cloud service in the cloud.</span></span> <span data-ttu-id="6b869-293">Depois de você definir uma rede virtual para suas máquinas virtuais e serviços de nuvem, eles poderão começar a se comunicar entre si por meio di endereço IP privado.</span><span class="sxs-lookup"><span data-stu-id="6b869-293">Once you define a virtual network for your virtual machines and cloud services, they can start communicating among themselves over the private IP address.</span></span> <span data-ttu-id="6b869-294">Além disso, ter máquinas virtuais e funções web/de trabalho do Azure na mesma [Rede Virtual do Azure](../../../virtual-network/virtual-networks-overview.md) proporciona baixa latência e uma conectividade mais segura.</span><span class="sxs-lookup"><span data-stu-id="6b869-294">In addition, having virtual machines and Azure web/worker roles in the same [Azure Virtual Network](../../../virtual-network/virtual-networks-overview.md) provides low latency and more secure connectivity.</span></span> <span data-ttu-id="6b869-295">Para obter mais informações, veja [O que é um serviço de nuvem?](../../../cloud-services/cloud-services-choose-me.md)</span><span class="sxs-lookup"><span data-stu-id="6b869-295">For more information, see [What is a cloud service](../../../cloud-services/cloud-services-choose-me.md).</span></span>

<span data-ttu-id="6b869-296">Como visto no diagrama, o Balanceador de Carga do Azure distribui o tráfego entre várias máquinas virtuais e determina a qual servidor Web ou servidor de aplicativos se conectar.</span><span class="sxs-lookup"><span data-stu-id="6b869-296">As seen in the diagram, Azure Load Balancer distributes traffic across multiple virtual machines and also determines which web server or application server to connect to.</span></span> <span data-ttu-id="6b869-297">Ter várias instâncias dos servidores Web e de aplicativo atrás de um balanceador de carga garante a alta disponibilidade das camadas de negócios e de apresentação.</span><span class="sxs-lookup"><span data-stu-id="6b869-297">Having multiple instances of the web and application servers behind a load balancer ensures the high availability of the presentation tier and the business tier.</span></span> <span data-ttu-id="6b869-298">Para obter mais informações, veja [Práticas recomendadas para padrões de aplicativos que exigem o HADR SQL](#best-practices-for-application-patterns-requiring-sql-hadr).</span><span class="sxs-lookup"><span data-stu-id="6b869-298">For more information, see [Best practices for application patterns requiring SQL HADR](#best-practices-for-application-patterns-requiring-sql-hadr).</span></span>

![Padrões de aplicativo com Serviços de Nuvem](./media/virtual-machines-windows-sql-server-app-patterns-dev-strategies/IC728013.png)

<span data-ttu-id="6b869-300">Outra abordagem para implementar esse padrão de aplicativo é usar uma função web consolidada que contém componentes de camada de apresentação e camada de negócios, conforme mostrado no diagrama a seguir.</span><span class="sxs-lookup"><span data-stu-id="6b869-300">Another approach to implement this application pattern is to use a consolidated web role that contains both presentation tier and business tier components as shown in the following diagram.</span></span> <span data-ttu-id="6b869-301">Esse padrão de aplicativo é útil para aplicativos que requerem um design com monitoração de estado.</span><span class="sxs-lookup"><span data-stu-id="6b869-301">This application pattern is useful for applications that require stateful design.</span></span> <span data-ttu-id="6b869-302">Como o Azure fornece nós de computação sem monitoração de estado em funções web e de trabalho, recomendamos que você implemente uma lógica para armazenar o estado de sessão usando uma das seguintes tecnologias: [Caching do Azure](https://azure.microsoft.com/documentation/services/redis-cache/), [Armazenamento de Tabelas do Azure](../../../cosmos-db/table-storage-how-to-use-dotnet.md) ou [Banco de Dados SQL do Azure](../../../sql-database/sql-database-technical-overview.md).</span><span class="sxs-lookup"><span data-stu-id="6b869-302">Since Azure provides stateless compute nodes on web and worker roles, we recommend that you implement a logic to store session state using one of the following technologies: [Azure Caching](https://azure.microsoft.com/documentation/services/redis-cache/), [Azure Table Storage](../../../cosmos-db/table-storage-how-to-use-dotnet.md) or [Azure SQL Database](../../../sql-database/sql-database-technical-overview.md).</span></span>

![Padrões de aplicativo com Serviços de Nuvem](./media/virtual-machines-windows-sql-server-app-patterns-dev-strategies/IC728014.png)

## <a name="pattern-with-azure-vms-azure-sql-database-and-azure-app-service-web-apps"></a><span data-ttu-id="6b869-304">Padrão com VMs do Azure, Banco de Dados SQL do Azure e Serviço de Aplicativo do Azure (Aplicativos Web)</span><span class="sxs-lookup"><span data-stu-id="6b869-304">Pattern with Azure VMs, Azure SQL Database, and Azure App Service (Web Apps)</span></span>
<span data-ttu-id="6b869-305">O objetivo principal deste padrão de aplicativo é mostrar como combinar os componentes de IaaS (infraestrutura como serviço) do Azure com componentes de PaaS (plataforma como serviço) do Azure em sua solução.</span><span class="sxs-lookup"><span data-stu-id="6b869-305">The primary goal of this application pattern is to show you how to combine Azure infrastructure as a service (IaaS) components with Azure platform-as-a-service components (PaaS) in your solution.</span></span> <span data-ttu-id="6b869-306">Este padrão tem como foco o Banco de Dados SQL do Azure para armazenamento de dados relacionais.</span><span class="sxs-lookup"><span data-stu-id="6b869-306">This pattern is focused on Azure SQL Database for relational data storage.</span></span> <span data-ttu-id="6b869-307">Ele não inclui o SQL Server em uma máquina virtual do Azure, que faz parte da oferta de infraestrutura como serviço do Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-307">It does not include SQL Server in an Azure virtual machine, which is part of the Azure infrastructure as a service offering.</span></span>

<span data-ttu-id="6b869-308">Nesse padrão de aplicativo, você implanta um aplicativo de banco de dados no Azure colocando as camadas de apresentação e negócios na mesma máquina virtual e acessando um banco de dados nos servidores do Banco de Dados SQL do Azure (Banco de Dados SQL).</span><span class="sxs-lookup"><span data-stu-id="6b869-308">In this application pattern, you deploy a database application to Azure by placing the presentation and business tiers in the same virtual machine and accessing a database in Azure SQL Database (SQL Database) servers.</span></span> <span data-ttu-id="6b869-309">Você pode implementar a camada de apresentação usando soluções Web tradicionais baseadas no IIS.</span><span class="sxs-lookup"><span data-stu-id="6b869-309">You can implement the presentation tier by using traditional IIS-based web solutions.</span></span> <span data-ttu-id="6b869-310">Ou você pode implementar uma camada combinada de apresentação e de negócios usando os [Aplicativos Web do Azure](https://azure.microsoft.com/documentation/services/app-service/web/).</span><span class="sxs-lookup"><span data-stu-id="6b869-310">Or, you can implement a combined presentation and business tier by using [Azure Web Apps](https://azure.microsoft.com/documentation/services/app-service/web/).</span></span>

<span data-ttu-id="6b869-311">Esse padrão de aplicativo é útil quando:</span><span class="sxs-lookup"><span data-stu-id="6b869-311">This application pattern is useful when:</span></span>

* <span data-ttu-id="6b869-312">Você já tem um servidor de Banco de Dados SQL existente configurado no Azure e deseja testar seu aplicativo rapidamente.</span><span class="sxs-lookup"><span data-stu-id="6b869-312">You already have an existing SQL Database server configured in Azure and you want to test your application quickly.</span></span>
* <span data-ttu-id="6b869-313">Você deseja testar os recursos do ambiente do Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-313">You want to test the capabilities of Azure environment.</span></span>
* <span data-ttu-id="6b869-314">Você deseja provisionar rapidamente ambientes de teste e desenvolvimento por curtos períodos de tempo.</span><span class="sxs-lookup"><span data-stu-id="6b869-314">You want to quickly provision development and test environments for short periods of time.</span></span>
* <span data-ttu-id="6b869-315">Os componentes de acesso de dados e lógica de negócios podem ser contidos de forma autônoma dentro de um aplicativo Web.</span><span class="sxs-lookup"><span data-stu-id="6b869-315">Your business logic and data access components can be self-contained within a web application.</span></span>

<span data-ttu-id="6b869-316">O diagrama a seguir demonstra um cenário local e sua solução habilitada para nuvem.</span><span class="sxs-lookup"><span data-stu-id="6b869-316">The following diagram demonstrates an on-premises scenario and its cloud enabled solution.</span></span> <span data-ttu-id="6b869-317">Nesse cenário, você coloca as camadas de aplicativo em uma única máquina virtual no Azure e acessa dados no Banco de Dados SQL do Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-317">In this scenario, you place the application tiers in a single virtual machine in Azure and access data in Azure SQL Database.</span></span>

![Padrão de aplicativo misto](./media/virtual-machines-windows-sql-server-app-patterns-dev-strategies/IC728015.png)

<span data-ttu-id="6b869-319">Se você optar por implementar uma camada Web e de aplicativo combinada usando os Aplicativos Web do Azure, recomendamos que você mantenha a camada intermediária ou camada de aplicativo como DLLs (bibliotecas de vínculo dinâmico) no contexto de um aplicativo Web.</span><span class="sxs-lookup"><span data-stu-id="6b869-319">If you choose to implement a combined web and application tier by using Azure Web Apps, we recommend that you keep the middle-tier or application tier as dynamic-link libraries (DLLs) in the context of a web application.</span></span>

<span data-ttu-id="6b869-320">Além disso, examine as recomendações apresentadas na seção [Comparando as estratégias de desenvolvimento da Web no Azure](#comparing-web-development-strategies-in-azure) no final deste artigo para saber mais sobre técnicas de programação.</span><span class="sxs-lookup"><span data-stu-id="6b869-320">In addition, review the recommendations given in the [Comparing web development strategies in Azure](#comparing-web-development-strategies-in-azure) section at the end of this article to learn more about programming techniques.</span></span>

## <a name="n-tier-hybrid-application-pattern"></a><span data-ttu-id="6b869-321">Padrão de aplicativo híbrido de n camadas</span><span class="sxs-lookup"><span data-stu-id="6b869-321">N-tier hybrid application pattern</span></span>
<span data-ttu-id="6b869-322">No padrão de aplicativo híbrido com n camadas, você implementa seu aplicativo em várias camadas distribuídas entre locais e o Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-322">In n-tier hybrid application pattern, you implement your application in multiple tiers distributed between on-premises and Azure.</span></span> <span data-ttu-id="6b869-323">Portanto, você cria um sistema híbrido flexível e reutilizável que pode modificar ou adicionar uma camada específica sem alterar as outras camadas.</span><span class="sxs-lookup"><span data-stu-id="6b869-323">Therefore, you create a flexible and reusable hybrid system, which you can modify or add a specific tier without changing the other tiers.</span></span> <span data-ttu-id="6b869-324">Para estender sua rede corporativa para a nuvem, use o serviço da [Rede Virtual do Azure](../../../virtual-network/virtual-networks-overview.md) .</span><span class="sxs-lookup"><span data-stu-id="6b869-324">To extend your corporate network to the cloud, you use [Azure Virtual Network](../../../virtual-network/virtual-networks-overview.md) service.</span></span>

<span data-ttu-id="6b869-325">Esse padrão de aplicativo híbrido é útil quando:</span><span class="sxs-lookup"><span data-stu-id="6b869-325">This hybrid application pattern is useful when:</span></span>

* <span data-ttu-id="6b869-326">Você deseja criar aplicativos que são executados parcialmente na nuvem e parcialmente localmente.</span><span class="sxs-lookup"><span data-stu-id="6b869-326">You want to build applications that run partly in the cloud and partly on-premises.</span></span>
* <span data-ttu-id="6b869-327">Você deseja migrar alguns ou todos os elementos de um aplicativo local existente para a nuvem.</span><span class="sxs-lookup"><span data-stu-id="6b869-327">You want to migrate some or all elements of an existing on-premises application to the cloud.</span></span>
* <span data-ttu-id="6b869-328">Você deseja mover aplicativos corporativos de plataformas locais virtualizadas para o Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-328">You want to move enterprise applications from on-premises virtualized platforms to Azure.</span></span>
* <span data-ttu-id="6b869-329">Você deseja ter um ambiente de infraestrutura que possa escalar e reduzir verticalmente sob demanda.</span><span class="sxs-lookup"><span data-stu-id="6b869-329">You want to own an infrastructure environment that can scale up and down on demand.</span></span>
* <span data-ttu-id="6b869-330">Você deseja provisionar rapidamente ambientes de teste e desenvolvimento por curtos períodos de tempo.</span><span class="sxs-lookup"><span data-stu-id="6b869-330">You want to quickly provision development and test environments for short periods of time.</span></span>
* <span data-ttu-id="6b869-331">Você deseja ter uma forma econômica de fazer backups para aplicativos de bancos de dados corporativos.</span><span class="sxs-lookup"><span data-stu-id="6b869-331">You want a cost effective way to take backups for enterprise database applications.</span></span>

<span data-ttu-id="6b869-332">O diagrama a seguir demonstra um padrão de aplicativo híbrido de n camadas que inclui o local e o Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-332">The following diagram demonstrates an n-tier hybrid application pattern that spans across on-premises and Azure.</span></span> <span data-ttu-id="6b869-333">Como mostrado no diagrama, a infraestrutura local inclui o controlador de domínio dos [Serviços de Domínio do Active Directory](https://technet.microsoft.com/library/hh831484.aspx) para dar suporte à autenticação e autorização do usuário.</span><span class="sxs-lookup"><span data-stu-id="6b869-333">As shown in the diagram, on-premises infrastructure includes [Active Directory Domain Services](https://technet.microsoft.com/library/hh831484.aspx) domain controller to support user authentication and authorization.</span></span> <span data-ttu-id="6b869-334">Observe que o diagrama demonstra um cenário em que algumas partes da camada de dados residem em um data center local, enquanto outras partes da camada residem no Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-334">Note that the diagram demonstrates a scenario, where some parts of the data tier live in an on-premises data center whereas some parts of the data tier live in Azure.</span></span> <span data-ttu-id="6b869-335">Dependendo das necessidades do seu aplicativo, você pode implementar vários outros cenários híbridos.</span><span class="sxs-lookup"><span data-stu-id="6b869-335">Depending on your application’s needs, you can implement several other hybrid scenarios.</span></span> <span data-ttu-id="6b869-336">Por exemplo, você pode manter a camada de apresentação e a camada de negócios em um ambiente local, mas a camada de dados no Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-336">For example, you might keep the presentation tier and the business tier in an on-premises environment but the data tier in Azure.</span></span>

![Padrão de aplicativo de n camadas](./media/virtual-machines-windows-sql-server-app-patterns-dev-strategies/IC728016.png)

<span data-ttu-id="6b869-338">No Azure, você pode usar o Active Directory como um diretório de nuvem autônomo para a sua organização ou também pode integrar o Active Directory local existente com o [Active Directory do Azure](https://azure.microsoft.com/documentation/services/active-directory/).</span><span class="sxs-lookup"><span data-stu-id="6b869-338">In Azure, you can use Active Directory as a standalone cloud directory for your organization, or you can also integrate existing on-premises Active Directory with [Azure Active Directory](https://azure.microsoft.com/documentation/services/active-directory/).</span></span> <span data-ttu-id="6b869-339">Como visto no diagrama, os componentes da camada de negócios podem acessar várias fontes de dados, como o [SQL Server no Azure](virtual-machines-windows-sql-server-iaas-overview.md) por meio de um endereço IP interno privado, o SQL Server local por meio da [Rede Virtual do Azure](../../../virtual-network/virtual-networks-overview.md) ou o [Banco de Dados SQL](../../../sql-database/sql-database-technical-overview.md) usando as tecnologias de provedor de dados do .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="6b869-339">As seen in the diagram, the business tier components can access to multiple data sources, such as to [SQL Server in Azure](virtual-machines-windows-sql-server-iaas-overview.md) via a private internal IP address, to on-premises SQL Server via [Azure Virtual Network](../../../virtual-network/virtual-networks-overview.md), or to [SQL Database](../../../sql-database/sql-database-technical-overview.md) using the .NET Framework data provider technologies.</span></span> <span data-ttu-id="6b869-340">Neste diagrama, o Banco de Dados SQL do Azure é um serviço de armazenamento de dados opcionais.</span><span class="sxs-lookup"><span data-stu-id="6b869-340">In this diagram, Azure SQL Database is an optional data storage service.</span></span>

<span data-ttu-id="6b869-341">No padrão de aplicativo híbrido de n camadas, você pode implementar o fluxo de trabalho a seguir na ordem especificada:</span><span class="sxs-lookup"><span data-stu-id="6b869-341">In n-tier hybrid application pattern, you can implement the following workflow in the order specified:</span></span>

1. <span data-ttu-id="6b869-342">Identificar aplicativos de banco de dados empresariais que precisam ser movidos para a nuvem usando o [MAP (Microsoft Assessment and Planning) Toolkit](http://microsoft.com/map).</span><span class="sxs-lookup"><span data-stu-id="6b869-342">Identify enterprise database applications that need to be moved up to cloud by using the [Microsoft Assessment and Planning (MAP) Toolkit](http://microsoft.com/map).</span></span> <span data-ttu-id="6b869-343">O MAP Toolkit reúne dados de desempenho e inventário de computadores que você está considerando para virtualização e faz recomendações sobre o planejamento de avaliação e a capacidade.</span><span class="sxs-lookup"><span data-stu-id="6b869-343">The MAP Toolkit gathers inventory and performance data from computers you are considering for virtualization and provides recommendations on capacity and assessment planning.</span></span>
2. <span data-ttu-id="6b869-344">Planeje os recursos e a configuração necessários na plataforma do Azure, como as contas de armazenamento e máquinas virtuais.</span><span class="sxs-lookup"><span data-stu-id="6b869-344">Plan the resources and configuration needed in the Azure platform, such as storage accounts and virtual machines.</span></span>
3. <span data-ttu-id="6b869-345">Configure a conectividade de rede entre a rede corporativa local e a [Rede Virtual do Azure](../../../virtual-network/virtual-networks-overview.md).</span><span class="sxs-lookup"><span data-stu-id="6b869-345">Set up network connectivity between the corporate network on-premises and [Azure Virtual Network](../../../virtual-network/virtual-networks-overview.md).</span></span> <span data-ttu-id="6b869-346">Para configurar a conexão entre a rede corporativa local e uma máquina virtual no Azure, use um dos dois métodos a seguir:</span><span class="sxs-lookup"><span data-stu-id="6b869-346">To set up the connection between the corporate network on-premises and a virtual machine in Azure, use one of the following two methods:</span></span>
   
   1. <span data-ttu-id="6b869-347">Estabelecer uma conexão entre locais e o Azure por meio de pontos de extremidade públicos em uma máquina virtual no Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-347">Establish a connection between on-premises and Azure via public end points on a virtual machine in Azure.</span></span> <span data-ttu-id="6b869-348">Esse método fornece uma configuração fácil e permite que você use a autenticação do SQL Server em sua máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="6b869-348">This method provides an easy setup and enables you to use SQL Server authentication in your virtual machine.</span></span> <span data-ttu-id="6b869-349">Além disso, configure as regras de grupo de segurança de rede para controlar o tráfego público para a VM.</span><span class="sxs-lookup"><span data-stu-id="6b869-349">In addition, set up your network security group rules to control public traffic to the VM.</span></span> <span data-ttu-id="6b869-350">Para obter mais informações, consulte [Permitir o acesso externo à sua VM usando o Portal do Azure](../nsg-quickstart-portal.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="6b869-350">For more information, see [Allow external access to your VM using the Azure portal](../nsg-quickstart-portal.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>
   2. <span data-ttu-id="6b869-351">Estabelecer uma conexão entre locais e o Azure através do túnel da VPN (rede virtual privada) do Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-351">Establish a connection between on-premises and Azure via Azure Virtual Private network (VPN) tunnel.</span></span> <span data-ttu-id="6b869-352">Esse método permite a extensão de políticas de domínio a uma máquina virtual no Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-352">This method allows you to extend domain policies to a virtual machine in Azure.</span></span> <span data-ttu-id="6b869-353">Além disso, você pode configurar regras de firewall e usar a autenticação do Windows em sua máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="6b869-353">In addition, you can set up firewall rules and use Windows authentication in your virtual machine.</span></span> <span data-ttu-id="6b869-354">Atualmente, o Azure dá suporte a conexões seguras de VPN site a site e VPN site a ponto:</span><span class="sxs-lookup"><span data-stu-id="6b869-354">Currently, Azure supports secure site-to-site VPN and point-to-site VPN connections:</span></span>
      
      * <span data-ttu-id="6b869-355">Com a conexão segura site a site, você pode estabelecer a conectividade de rede entre sua rede local e sua rede virtual no Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-355">With secure site-to-site connection, you can establish network connectivity between your on-premises network and your virtual network in Azure.</span></span> <span data-ttu-id="6b869-356">É recomendável para conectar o seu ambiente de data center local ao Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-356">It is recommended for connecting your on-premises data center environment to Azure.</span></span>
      * <span data-ttu-id="6b869-357">Com a conexão segura ponto a site, você pode estabelecer a conectividade de rede entre sua rede virtual no Azure e seus computadores virtuais em execução em qualquer lugar.</span><span class="sxs-lookup"><span data-stu-id="6b869-357">With secure point-to-site connection, you can establish network connectivity between your virtual network in Azure and your individual computers running anywhere.</span></span> <span data-ttu-id="6b869-358">É recomendável principalmente para fins de desenvolvimento e teste.</span><span class="sxs-lookup"><span data-stu-id="6b869-358">It is mostly recommended for development and test purposes.</span></span>
      
      <span data-ttu-id="6b869-359">Para obter informações sobre como se conectar ao SQL Server no Azure, veja [Conectar-se a uma Máquina Virtual do SQL Server no Azure](virtual-machines-windows-sql-connect.md).</span><span class="sxs-lookup"><span data-stu-id="6b869-359">For information on how to connect to SQL Server in Azure, see [Connect to a SQL Server Virtual Machine on Azure](virtual-machines-windows-sql-connect.md).</span></span>
4. <span data-ttu-id="6b869-360">Configure trabalhos agendados e alertas que fazem backup de dados locais em um disco de máquina virtual no Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-360">Set up scheduled jobs and alerts that back up on-premises data in a virtual machine disk in Azure.</span></span> <span data-ttu-id="6b869-361">Para obter mais informações, veja [Backup e restauração do SQL Server com o Serviço de Armazenamento de Blobs do Azure](https://msdn.microsoft.com/library/jj919148.aspx) e [Backup e restauração do SQL Server nas Máquinas Virtuais do Azure](virtual-machines-windows-sql-backup-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="6b869-361">For more information, see [SQL Server Backup and Restore with Azure Blob Storage Service](https://msdn.microsoft.com/library/jj919148.aspx) and [Backup and Restore for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-backup-recovery.md).</span></span>
5. <span data-ttu-id="6b869-362">Dependendo das necessidades do seu aplicativo, você pode implementar um dos três cenários comuns a seguir:</span><span class="sxs-lookup"><span data-stu-id="6b869-362">Depending on your application’s needs, you can implement one of the following three common scenarios:</span></span>
   
   1. <span data-ttu-id="6b869-363">Você pode manter seu servidor Web, servidor de aplicativos e dados não confidenciais em um servidor de banco de dados no Azure, enquanto mantém os dados confidenciais localmente.</span><span class="sxs-lookup"><span data-stu-id="6b869-363">You can keep your web server, application server, and insensitive data in a database server in Azure whereas you keep the sensitive data on-premises.</span></span>
   2. <span data-ttu-id="6b869-364">Você pode manter seu servidor Web e servidor de aplicativos localmente, enquanto mantém o servidor de banco de dados em uma máquina virtual no Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-364">You can keep your web server and application server on-premises whereas the database server in a virtual machine in Azure.</span></span>
   3. <span data-ttu-id="6b869-365">Você pode manter seu servidor de banco de dados, servidor Web e servidor de aplicativos localmente, enquanto mantém as réplicas de banco de dados em máquinas virtuais no Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-365">You can keep your database server, web server, and application server on-premises whereas you keep the database replicas in virtual machines in Azure.</span></span> <span data-ttu-id="6b869-366">Essa configuração permite que servidores Web locais ou aplicativos de geração de relatórios acessem as réplicas de banco de dados no Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-366">This setting allows the on-premises web servers or reporting applications to access the database replicas in Azure.</span></span> <span data-ttu-id="6b869-367">Portanto, você pode reduzir a carga de trabalho em um banco de dados local.</span><span class="sxs-lookup"><span data-stu-id="6b869-367">Therefore, you can achieve to lower the workload in an on-premises database.</span></span> <span data-ttu-id="6b869-368">Nós recomendamos que você implemente este cenário para cargas de trabalho de leitura pesadas e para fins de desenvolvimento.</span><span class="sxs-lookup"><span data-stu-id="6b869-368">We recommend that you implement this scenario for heavy read workloads and developmental purposes.</span></span> <span data-ttu-id="6b869-369">Para obter informações sobre como criar réplicas de banco de dados no Azure, veja os Grupos de Disponibilidade AlwaysOn em [Alta disponibilidade e recuperação de desastre para o SQL Server nas Máquinas Virtuais do Azure](virtual-machines-windows-sql-high-availability-dr.md).</span><span class="sxs-lookup"><span data-stu-id="6b869-369">For information on creating database replicas in Azure, see AlwaysOn Availability Groups at [High Availability and Disaster Recovery for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-high-availability-dr.md).</span></span>

## <a name="comparing-web-development-strategies-in-azure"></a><span data-ttu-id="6b869-370">Comparando as estratégias de desenvolvimento da Web no Azure</span><span class="sxs-lookup"><span data-stu-id="6b869-370">Comparing web development strategies in Azure</span></span>
<span data-ttu-id="6b869-371">Para implementar e implantar um aplicativo de várias camadas baseado no SQL Server no Azure, você pode usar um dos dois métodos programação a seguir:</span><span class="sxs-lookup"><span data-stu-id="6b869-371">To implement and deploy a multi-tier SQL Server-based application in Azure, you can use one of the following two programming methods:</span></span>

* <span data-ttu-id="6b869-372">Configurar um servidor Web tradicional (IIS - Serviços de Informações da Internet) no Azure e acessar bancos de dados no SQL Server nas Máquinas Virtuais do Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-372">Set up a traditional web server (IIS - Internet Information Services) in Azure and access databases in SQL Server in Azure Virtual Machines.</span></span>
* <span data-ttu-id="6b869-373">Implemente e implante um serviço de nuvem no Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-373">Implement and deploy a cloud service to Azure.</span></span> <span data-ttu-id="6b869-374">Em seguida, certifique-se de que esse serviço de nuvem pode acessar bancos de dados no SQL Server nas Máquinas Virtuais do Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-374">Then, make sure that this cloud service can access databases in SQL Server in Azure Virtual machines.</span></span> <span data-ttu-id="6b869-375">Um serviço de nuvem pode incluir várias funções Web e de trabalho.</span><span class="sxs-lookup"><span data-stu-id="6b869-375">A cloud service can include multiple web and worker roles.</span></span>

<span data-ttu-id="6b869-376">A tabela a seguir fornece uma comparação do desenvolvimento tradicional da Web com os Serviços de Nuvem do Azure e os Aplicativos Web do Azure em relação ao SQL Server nas Máquinas Virtuais do Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-376">The following table provides a comparison of traditional web development with Azure Cloud Services and Azure Web Apps with respect to SQL Server in Azure Virtual Machines.</span></span> <span data-ttu-id="6b869-377">A tabela inclui os Aplicativos Web do Azure pois é possível usar o SQL Server em uma Máquina Virtual do Azure como fonte de dados para aplicativos Web do Azure por meio de seu endereço IP virtual público ou nome DNS.</span><span class="sxs-lookup"><span data-stu-id="6b869-377">The table includes Azure Web Apps as it is possible to use SQL Server in Azure VM as a data source for Azure Web Apps via its public virtual IP address or DNS name.</span></span>

|  | <span data-ttu-id="6b869-378">Desenvolvimento para a web tradicional em Máquinas Virtuais do Azure</span><span class="sxs-lookup"><span data-stu-id="6b869-378">Traditional web development in Azure Virtual Machines</span></span> | <span data-ttu-id="6b869-379">Serviços de nuvem no Azure</span><span class="sxs-lookup"><span data-stu-id="6b869-379">Cloud Services in Azure</span></span> | <span data-ttu-id="6b869-380">Hospedagem na Web com Aplicativos Web do Azure</span><span class="sxs-lookup"><span data-stu-id="6b869-380">Web Hosting with Azure Web Apps</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="6b869-381">**Migração de aplicativos do local**</span><span class="sxs-lookup"><span data-stu-id="6b869-381">**Application Migration from on-premises**</span></span> |<span data-ttu-id="6b869-382">Aplicativos existentes como são.</span><span class="sxs-lookup"><span data-stu-id="6b869-382">Existing applications as-is.</span></span> |<span data-ttu-id="6b869-383">Os aplicativos precisam de funções da web e do trabalhador.</span><span class="sxs-lookup"><span data-stu-id="6b869-383">Applications need web and worker roles.</span></span> |<span data-ttu-id="6b869-384">Aplicativos existentes como são, mas adequados para aplicativos da web autocontidos e serviços Web que exigem escalabilidade rápida.</span><span class="sxs-lookup"><span data-stu-id="6b869-384">Existing applications as-is but suited for self-contained web applications and web services that require quick scalability.</span></span> |
| <span data-ttu-id="6b869-385">**Desenvolvimento e Implantação**</span><span class="sxs-lookup"><span data-stu-id="6b869-385">**Development and Deployment**</span></span> |<span data-ttu-id="6b869-386">Visual Studio, WebMatrix, Visual Web Developer, WebDeploy, FTP, TFS, Gerenciador do IIS, PowerShell.</span><span class="sxs-lookup"><span data-stu-id="6b869-386">Visual Studio, WebMatrix, Visual Web Developer, WebDeploy, FTP, TFS, IIS Manager, PowerShell.</span></span> |<span data-ttu-id="6b869-387">Visual Studio, SDK do Azure, TFS, PowerShell.</span><span class="sxs-lookup"><span data-stu-id="6b869-387">Visual Studio, Azure SDK, TFS, PowerShell.</span></span> <span data-ttu-id="6b869-388">Cada serviço de nuvem tem dois ambientes nos quais você pode implantar seu pacote e configuração de serviço: preparo e produção.</span><span class="sxs-lookup"><span data-stu-id="6b869-388">Each cloud service has two environments to which you can deploy your service package and configuration: staging and production.</span></span> <span data-ttu-id="6b869-389">Você pode implantar um serviço de nuvem para p ambiente de preparo para testá-lo antes de promovê-lo para produção.</span><span class="sxs-lookup"><span data-stu-id="6b869-389">You can deploy a cloud service to the staging environment to test it before you promote it to production.</span></span> |<span data-ttu-id="6b869-390">Visual Studio, WebMatrix, Visual Web Developer, FTP, GIT, BitBucket, CodePlex, DropBox, GitHub, Mercurial, TFS, Implantação da Web, PowerShell.</span><span class="sxs-lookup"><span data-stu-id="6b869-390">Visual Studio, WebMatrix, Visual Web Developer, FTP, GIT, BitBucket, CodePlex, DropBox, GitHub, Mercurial, TFS, Web Deploy, PowerShell.</span></span> |
| <span data-ttu-id="6b869-391">**Administração e Configuração**</span><span class="sxs-lookup"><span data-stu-id="6b869-391">**Administration and Setup**</span></span> |<span data-ttu-id="6b869-392">Você é responsável por tarefas administrativas no aplicativo, dados, regras de firewall, rede virtual e sistema operacional.</span><span class="sxs-lookup"><span data-stu-id="6b869-392">You are responsible for administrative tasks on the application, data, firewall rules, virtual network, and operating system.</span></span> |<span data-ttu-id="6b869-393">Você é responsável por tarefas administrativas no aplicativo, dados, regras de firewall e rede virtual.</span><span class="sxs-lookup"><span data-stu-id="6b869-393">You are responsible for administrative tasks on the application, data, firewall rules, and virtual network.</span></span> |<span data-ttu-id="6b869-394">Você é responsável por tarefas administrativas no aplicativo e somente dados.</span><span class="sxs-lookup"><span data-stu-id="6b869-394">You are responsible for administrative tasks on the application and data only.</span></span> |
| <span data-ttu-id="6b869-395">**HADR (Alta Disponibilidade e Recuperação de Desastre)**</span><span class="sxs-lookup"><span data-stu-id="6b869-395">**High Availability and Disaster Recovery (HADR)**</span></span> |<span data-ttu-id="6b869-396">É recomendável que você coloque máquinas virtuais no mesmo conjunto de disponibilidade e no mesmo serviço de nuvem.</span><span class="sxs-lookup"><span data-stu-id="6b869-396">We recommend that you place virtual machines in the same availability set and in the same cloud service.</span></span> <span data-ttu-id="6b869-397">Manter suas VMs no mesmo conjunto de disponibilidade permite que o Azure coloque os nós de alta disponibilidade em domínios de falha e domínios de atualização separados.</span><span class="sxs-lookup"><span data-stu-id="6b869-397">Keeping your VMs in the same availability set allows Azure to place the high availability nodes into separate fault domains and upgrade domains.</span></span> <span data-ttu-id="6b869-398">Da mesma forma, manter suas VMs no mesmo serviço de nuvem permite o balanceamento de carga e as VMs podem se comunicar diretamente umas com as outras pela rede local dentro de um datacenter do Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-398">Similarly, keeping your VMs in the same cloud service enables load balancing and VMs can communicate directly with one another over the local network within an Azure data center.</span></span><br/><br/><span data-ttu-id="6b869-399">Você é responsável por implementar uma solução de alta disponibilidade e de recuperação de desastre para o SQL Server nas Máquinas Virtuais do Azure para evitar qualquer tempo de inatividade.</span><span class="sxs-lookup"><span data-stu-id="6b869-399">You are responsible for implementing a high availability and disaster recovery solution for SQL Server in Azure Virtual Machines to avoid any downtime.</span></span> <span data-ttu-id="6b869-400">Para conhecer as tecnologias de HADR com suporte, veja [Alta disponibilidade e recuperação de desastre para o SQL Server nas Máquinas Virtuais do Azure](virtual-machines-windows-sql-high-availability-dr.md).</span><span class="sxs-lookup"><span data-stu-id="6b869-400">For supported HADR technologies, see [High Availability and Disaster Recovery for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-high-availability-dr.md).</span></span><br/><br/><span data-ttu-id="6b869-401">Você é responsável pelo backup de seus dados e aplicativos.</span><span class="sxs-lookup"><span data-stu-id="6b869-401">You are responsible for backing up your own data and application.</span></span><br/><br/><span data-ttu-id="6b869-402">O Azure pode mover suas máquinas virtuais se o computador host no datacenter falhar devido a problemas de hardware.</span><span class="sxs-lookup"><span data-stu-id="6b869-402">Azure can move your virtual machines if the host machine in the data center fails due to hardware issues.</span></span> <span data-ttu-id="6b869-403">Além disso, pode haver tempo de inatividade planejado de sua VM quando o computador host for atualizado devido a atualizações de software ou segurança.</span><span class="sxs-lookup"><span data-stu-id="6b869-403">In addition, there could be planned downtime of your VM when the host machine is updated for security or software updates.</span></span> <span data-ttu-id="6b869-404">Portanto, recomendamos que você mantenha pelo menos duas VMs em cada camada de aplicativo para garantir a disponibilidade contínua.</span><span class="sxs-lookup"><span data-stu-id="6b869-404">Therefore, we recommend that you maintain at least two VMs in each application tier to ensure the continuous availability.</span></span> <span data-ttu-id="6b869-405">O Azure não fornece SLA para uma única máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="6b869-405">Azure does not provide SLA for a single virtual machine.</span></span> <span data-ttu-id="6b869-406">Para saber mais, confira as [Orientação técnica de resiliência do Azure](../../../resiliency/resiliency-technical-guidance.md).</span><span class="sxs-lookup"><span data-stu-id="6b869-406">For more information, see [Azure resiliency technical guidance](../../../resiliency/resiliency-technical-guidance.md).</span></span> |<span data-ttu-id="6b869-407">O Azure gerencia as falhas resultantes do hardware subjacente ou do software de sistema operacional.</span><span class="sxs-lookup"><span data-stu-id="6b869-407">Azure manages the failures resulting from the underlying hardware or operating system software.</span></span> <span data-ttu-id="6b869-408">É recomendável que você implemente várias instâncias de uma função de trabalho ou Web para garantir a alta disponibilidade do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="6b869-408">We recommend that you implement multiple instances of a web or worker role to ensure the high availability of your application.</span></span> <span data-ttu-id="6b869-409">Para obter informações, consulte [Contrato de Nível de Serviço de Rede Virtual, Máquinas Virtuais e Serviços de Nuvem](http://www.microsoft.com/download/details.aspx?id=38427) e [Recuperação de desastre e alta disponibilidade para aplicativos do Azure](../../../resiliency/resiliency-disaster-recovery-high-availability-azure-applications.md)</span><span class="sxs-lookup"><span data-stu-id="6b869-409">For information, see [Cloud Services, Virtual Machines, and Virtual Network Service Level Agreement](http://www.microsoft.com/download/details.aspx?id=38427) and [Disaster recovery and high availability for Azure applications](../../../resiliency/resiliency-disaster-recovery-high-availability-azure-applications.md)</span></span><br/><br/><span data-ttu-id="6b869-410">Você é responsável pelo backup de seus dados e aplicativos.</span><span class="sxs-lookup"><span data-stu-id="6b869-410">You are responsible for backing up your own data and application.</span></span><br/><br/><span data-ttu-id="6b869-411">Para bancos de dados que residem em um banco de dados do SQL Server em uma VM do Azure, você é responsável por implementar uma solução de recuperação de desastre e alta disponibilidade para evitar qualquer tempo de inatividade.</span><span class="sxs-lookup"><span data-stu-id="6b869-411">For databases residing in a SQL Server database in an Azure VM, you are responsible for implementing a high availability and disaster recovery solution to avoid any downtime.</span></span> <span data-ttu-id="6b869-412">Para conhecer as tecnologias de HADR com suporte, veja Alta disponibilidade e recuperação de desastre para o SQL Server nas Máquinas Virtuais do Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-412">For supported HDAR technologies, see High Availability and Disaster Recovery for SQL Server in Azure Virtual Machines.</span></span><br/><br/><span data-ttu-id="6b869-413">**Espelhamento de banco de dados do SQL Server**: uso com os Serviços de Nuvem do Azure (funções web/de trabalho).</span><span class="sxs-lookup"><span data-stu-id="6b869-413">**SQL Server Database Mirroring**: Use with Azure Cloud Services (web/worker roles).</span></span> <span data-ttu-id="6b869-414">Máquinas virtuais do SQL Server e um projeto de serviço de nuvem podem estar na mesma Rede Virtual do Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-414">SQL Server VMs and a cloud service project can be in the same Azure Virtual Network.</span></span> <span data-ttu-id="6b869-415">Se a VM do SQL Server não estiver na mesma Rede Virtual, você precisa criar um alias do SQL Server para encaminhar a comunicação para a instância do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="6b869-415">If SQL Server VM is not in the same Virtual Network, you need to create a SQL Server Alias to route communication to the instance of SQL Server.</span></span> <span data-ttu-id="6b869-416">Além disso, o nome do alias deve corresponder ao nome do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="6b869-416">In addition, the alias name must match the SQL Server name.</span></span> |<span data-ttu-id="6b869-417">A alta disponibilidade é herdada de funções do trabalhador do Azure, do armazenamento de blobs do Azure e do banco de dados SQL.</span><span class="sxs-lookup"><span data-stu-id="6b869-417">High Availability is inherited from Azure worker roles, Azure blob storage, and Azure SQL Database.</span></span> <span data-ttu-id="6b869-418">Por exemplo, o Armazenamento do Azure mantém três réplicas de todos dados de blob, tabela e fila.</span><span class="sxs-lookup"><span data-stu-id="6b869-418">For example, Azure Storage maintains three replicas of all blob, table, and queue data.</span></span> <span data-ttu-id="6b869-419">A qualquer momento, o Banco de Dados SQL do Azure mantém três réplicas dos dados em execução — uma réplica primária e duas réplicas secundárias.</span><span class="sxs-lookup"><span data-stu-id="6b869-419">At any one time, Azure SQL Database keeps three replicas of data running—one primary replica and two secondary replicas.</span></span> <span data-ttu-id="6b869-420">Para saber mais, confira [Armazenamento do Azure](https://azure.microsoft.com/documentation/services/storage/) e [Banco de Dados SQL do Azure](../../../sql-database/sql-database-technical-overview.md).</span><span class="sxs-lookup"><span data-stu-id="6b869-420">For more information, see [Azure Storage](https://azure.microsoft.com/documentation/services/storage/) and [Azure SQL Database](../../../sql-database/sql-database-technical-overview.md).</span></span><br/><br/><span data-ttu-id="6b869-421">Ao usar o SQL Server na VM do Azure como uma fonte de dados para Aplicativos Web do Azure, tenha em mente de que os Aplicativos Web do Azure não dão suporte à Rede Virtual do Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-421">When using SQL Server in Azure VM as a data source for Azure Web Apps, keep in mind that Azure Web Apps does not support Azure Virtual Network.</span></span> <span data-ttu-id="6b869-422">Ou seja, todas as conexões dos Aplicativos Web do Azure com as VMs do SQL Server no Azure devem passar pelos pontos de extremidade públicos das máquinas virtuais.</span><span class="sxs-lookup"><span data-stu-id="6b869-422">In other words, all connections from Azure Web Apps to SQL Server VMs in Azure must go through public end points of virtual machines.</span></span> <span data-ttu-id="6b869-423">Isso pode causar algumas limitações para cenários de alta disponibilidade e recuperação de desastres.</span><span class="sxs-lookup"><span data-stu-id="6b869-423">This might cause some limitations for high availability and disaster recovery scenarios.</span></span> <span data-ttu-id="6b869-424">Por exemplo, o aplicativo cliente nos Aplicativos Web do Azure que se conectam à VM do SQL Server com espelhamento de banco de dados não seria capaz de se conectar ao novo servidor principal, pois o espelhamento de banco de dados exige que você configure a Rede Virtual do Azure entre as VMs do host do SQL Server no Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-424">For example, the client application on Azure Web Apps connecting to SQL Server VM with database mirroring would not be able to connect to the new primary server as database mirroring requires that you set up Azure Virtual Network between SQL Server host VMs in Azure.</span></span> <span data-ttu-id="6b869-425">Portanto, atualmente não há suporte ao uso do **Espelhamento de banco de dados do SQL Server** com Aplicativos Web do Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-425">Therefore, using **SQL Server Database Mirroring** with Azure Web Apps is not supported currently.</span></span><br/><br/><span data-ttu-id="6b869-426">**Grupos de Disponibilidade AlwaysOn do SQL Server**: é possível configurar Grupos de Disponibilidade AlwaysOn ao usar os Aplicativos Web do Azure com as VMs do SQL Server no Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-426">**SQL Server AlwaysOn Availability Groups**: You can set up AlwaysOn Availability Groups when using Azure Web Apps with SQL Server VMs in Azure.</span></span> <span data-ttu-id="6b869-427">Mas, você precisa configurar o ouvinte de grupo de disponibilidade do AlwaysOn para rotear a comunicação para a réplica primária por meio de pontos de extremidade públicos com balanceamento de carga.</span><span class="sxs-lookup"><span data-stu-id="6b869-427">But you need to configure AlwaysOn Availability Group Listener to route the communication to the primary replica via public load-balanced endpoints.</span></span> |
| <span data-ttu-id="6b869-428">**Conectividade entre locais**</span><span class="sxs-lookup"><span data-stu-id="6b869-428">**cross-premises Connectivity**</span></span> |<span data-ttu-id="6b869-429">Você pode usar a Rede Virtual do Azure para se conectar ao local.</span><span class="sxs-lookup"><span data-stu-id="6b869-429">You can use Azure Virtual Network to connect to on-premises.</span></span> |<span data-ttu-id="6b869-430">Você pode usar a Rede Virtual do Azure para se conectar ao local.</span><span class="sxs-lookup"><span data-stu-id="6b869-430">You can use Azure Virtual Network to connect to on-premises.</span></span> |<span data-ttu-id="6b869-431">Há suporte para a Rede Virtual do Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-431">Azure Virtual Network is supported.</span></span> <span data-ttu-id="6b869-432">Para saber mais, confira a [Integração da Rede Virtual de Aplicativos Web](https://azure.microsoft.com/blog/2014/09/15/azure-websites-virtual-network-integration/).</span><span class="sxs-lookup"><span data-stu-id="6b869-432">For more information, see [Web Apps Virtual Network Integration](https://azure.microsoft.com/blog/2014/09/15/azure-websites-virtual-network-integration/).</span></span> |
| <span data-ttu-id="6b869-433">**Escalabilidade**</span><span class="sxs-lookup"><span data-stu-id="6b869-433">**Scalability**</span></span> |<span data-ttu-id="6b869-434">A ampliação está disponível ao aumentar o tamanho da máquina virtual ou ao adicionar mais discos.</span><span class="sxs-lookup"><span data-stu-id="6b869-434">Scale-up is available by increasing the virtual machine sizes or adding more disks.</span></span> <span data-ttu-id="6b869-435">Para obter mais informações sobre tamanhos de máquina virtual, consulte [Tamanhos de Máquina Virtual para o Azure](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="6b869-435">For more information about virtual machine sizes, see [Virtual Machine Sizes for Azure](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span><br/><br/><span data-ttu-id="6b869-436">**Para Servidor de Banco de Dados**: a expansão está disponível por meio de técnicas de particionamento do banco de dados e Grupos de disponibilidade AlwaysOn do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="6b869-436">**For Database Server**: Scale-out is available via database partitioning techniques and SQL Server AlwaysOn Availability groups.</span></span><br/><br/><span data-ttu-id="6b869-437">Para cargas de trabalho de leitura pesadas, você pode usar [Grupos de Disponibilidade AlwaysOn](https://msdn.microsoft.com/library/hh510230.aspx) em vários nós secundários, bem como a replicação do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="6b869-437">For heavy read workloads, you can use [AlwaysOn Availability Groups](https://msdn.microsoft.com/library/hh510230.aspx) on multiple secondary nodes as well as SQL Server Replication.</span></span><br/><br/><span data-ttu-id="6b869-438">Para cargas de trabalho pesadas de gravação, você pode implementar o particionamento horizontal de dados entre vários servidores físicos para fornecer expansão do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="6b869-438">For heavy write workloads, you can implement horizontal partitioning data across multiple physical servers to provide application scale-out.</span></span><br/><br/><span data-ttu-id="6b869-439">Além disso, você pode implementar uma expansão usando [SQL Server com roteamento dependente de dados](https://technet.microsoft.com/library/cc966448.aspx).</span><span class="sxs-lookup"><span data-stu-id="6b869-439">In addition, you can implement a scale-out by using [SQL Server with Data Dependent Routing](https://technet.microsoft.com/library/cc966448.aspx).</span></span> <span data-ttu-id="6b869-440">Com o DDR (roteamento dependente de dados), você precisa implementar o mecanismo de particionamento no aplicativo cliente, normalmente na camada de negócios, para rotear as solicitações de banco de dados para vários nós do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="6b869-440">With Data Dependent Routing (DDR), you need to implement the partitioning mechanism in the client application, typically in the business tier layer, to route the database requests to multiple SQL Server nodes.</span></span> <span data-ttu-id="6b869-441">A camada de negócios contém mapeamentos de como os dados são particionados e o nó que contém os dados.</span><span class="sxs-lookup"><span data-stu-id="6b869-441">The business tier contains mappings to how the data is partitioned and which node contains the data.</span></span><br/><br/><span data-ttu-id="6b869-442">Você pode escalar aplicativos que executam máquinas virtuais.</span><span class="sxs-lookup"><span data-stu-id="6b869-442">You can scale applications that are running virtual machines.</span></span> <span data-ttu-id="6b869-443">Para saber mais, confira [Como dimensionar um aplicativo](../../../cloud-services/cloud-services-how-to-scale.md).</span><span class="sxs-lookup"><span data-stu-id="6b869-443">For more information, see [How to Scale an Application](../../../cloud-services/cloud-services-how-to-scale.md).</span></span><br/><br/><span data-ttu-id="6b869-444">**Observação importante**: o recurso de **Dimensionamento Automático** no Azure permite aumentar ou diminuir automaticamente as Máquinas Virtuais usadas pelo seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="6b869-444">**Important Note**: The **AutoScale** feature in Azure allows you to automatically increase or decrease the Virtual Machines that are used by your application.</span></span> <span data-ttu-id="6b869-445">Esse recurso garante que a experiência do usuário final não seja afetada negativamente durante períodos de pico e que as VMs sejam desativadas quando a demanda diminuir.</span><span class="sxs-lookup"><span data-stu-id="6b869-445">This feature guarantees that the end-user experience is not affected negatively during peak periods, and VMs are shut down when the demand is low.</span></span> <span data-ttu-id="6b869-446">É recomendável que você não defina a opção de Dimensionamento automático para seu serviço de nuvem se ele incluir VMs do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="6b869-446">It’s recommended that you do not set the AutoScale option for your cloud service if it includes SQL Server VMs.</span></span> <span data-ttu-id="6b869-447">O motivo é que o recurso de Dimensionamento automático permite que o Azure ative uma máquina virtual quando o uso da CPU da VM ultrapassar um limite e desative uma máquina virtual quando o uso da CPU for inferior ao limite.</span><span class="sxs-lookup"><span data-stu-id="6b869-447">The reason is that the AutoScale feature lets Azure to turn on a virtual machine when the CPU usage in that VM is higher than some threshold, and to turn off a virtual machine when the CPU usage goes lower than it.</span></span> <span data-ttu-id="6b869-448">O recurso de Dimensionamento automático é útil para aplicativos sem monitoração de estado, como servidores Web, em que qualquer VM pode gerenciar a carga de trabalho sem quaisquer referências a qualquer estado anterior.</span><span class="sxs-lookup"><span data-stu-id="6b869-448">The AutoScale feature is useful for stateless applications, such as web servers, where any VM can manage the workload without any references to any previous state.</span></span> <span data-ttu-id="6b869-449">No entanto, o recurso Dimensionamento Automático não é útil para aplicativos com monitoração de estado, como o SQL Server, nos quais apenas uma instância permite gravar no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="6b869-449">However, the AutoScale feature is not useful for stateful applications, such as SQL Server, where only one instance allows writing to the database.</span></span> |<span data-ttu-id="6b869-450">A ampliação está disponível ao usar várias funções da web e do trabalhador.</span><span class="sxs-lookup"><span data-stu-id="6b869-450">Scale-up is available by using multiple web and worker roles.</span></span> <span data-ttu-id="6b869-451">Para obter mais informações sobre tamanhos de máquina virtual para funções web e funções de trabalho, consulte [Configurar tamanhos para Serviços de Nuvem](../../../cloud-services/cloud-services-sizes-specs.md).</span><span class="sxs-lookup"><span data-stu-id="6b869-451">For more information about virtual machine sizes for web roles and worker roles, see [Configure Sizes for Cloud Services](../../../cloud-services/cloud-services-sizes-specs.md).</span></span><br/><br/><span data-ttu-id="6b869-452">Ao usar os **Serviços de Nuvem**, é possível definir várias funções para distribuir o processamento e também alcançar a escala flexível do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="6b869-452">When using **Cloud Services**, you can define multiple roles to distribute processing and also achieve flexible scaling of your application.</span></span> <span data-ttu-id="6b869-453">Cada serviço de nuvem inclui uma ou mais funções Web e/ou funções de trabalho, cada uma com seus próprios arquivos e configuração de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="6b869-453">Each cloud service includes one or more web roles and/or worker roles, each with its own application files and configuration.</span></span> <span data-ttu-id="6b869-454">Você pode ampliar um serviço de nuvem aumentando o número de instâncias de função (máquinas virtuais) implantadas para uma função e reduzir o serviço de nuvem diminuindo o número de instâncias de função.</span><span class="sxs-lookup"><span data-stu-id="6b869-454">You can scale-up a cloud service by increasing the number of role instances (virtual machines) deployed for a role and scale-down a cloud service by decreasing the number of role instances.</span></span> <span data-ttu-id="6b869-455">Para obter mais informações, consulte [Modelos de execução do Azure](../../../cloud-services/cloud-services-choose-me.md).</span><span class="sxs-lookup"><span data-stu-id="6b869-455">For detailed information, see [Azure Execution Models](../../../cloud-services/cloud-services-choose-me.md).</span></span><br/><br/><span data-ttu-id="6b869-456">A expansão está disponível por meio do suporte interno de alta disponibilidade do Azure através do [Contrato de Nível de Serviço de Rede Virtual, Máquinas Virtuais e Serviços de Nuvem](http://www.microsoft.com/download/details.aspx?id=38427) e do Balanceador de carga.</span><span class="sxs-lookup"><span data-stu-id="6b869-456">Scale-out is available via built-in Azure high availability support through [Cloud Services, Virtual Machines, and Virtual Network Service Level Agreement](http://www.microsoft.com/download/details.aspx?id=38427) and Load Balancer.</span></span><br/><br/><span data-ttu-id="6b869-457">Para um aplicativo de várias camadas, é recomendável que você conecte aplicativos de função Web/de trabalho a VMs do servidor de banco de dados na Rede Virtual do Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-457">For a multi-tier application, we recommend that you connect web/worker roles application to database server VMs via Azure Virtual Network.</span></span> <span data-ttu-id="6b869-458">Além disso, o Azure fornece balanceamento de carga para VMs no mesmo serviço de nuvem, distribuindo as solicitações de usuários entre elas.</span><span class="sxs-lookup"><span data-stu-id="6b869-458">In addition, Azure provides load balancing for VMs in the same cloud service, spreading user requests across them.</span></span> <span data-ttu-id="6b869-459">As máquinas virtuais conectadas dessa maneira podem se comunicar diretamente entre si pela rede local em um datacenter do Azure.</span><span class="sxs-lookup"><span data-stu-id="6b869-459">Virtual machines connected in this way can communicate directly with one another over the local network within an Azure data center.</span></span><br/><br/><span data-ttu-id="6b869-460">É possível configurar o **Dimensionamento Automático** no portal do Azure, bem como os horários de agendamento.</span><span class="sxs-lookup"><span data-stu-id="6b869-460">You can set up **AutoScale** on the Azure portal as well as the schedule times.</span></span> <span data-ttu-id="6b869-461">Para obter mais informações, consulte [Como configurar o dimensionamento automático para um Serviço de Nuvem no portal](../../../cloud-services/cloud-services-how-to-scale-portal.md).</span><span class="sxs-lookup"><span data-stu-id="6b869-461">For more information, see [How to configure auto scaling for a Cloud Service in the portal](../../../cloud-services/cloud-services-how-to-scale-portal.md).</span></span> |<span data-ttu-id="6b869-462">**Escalar e reduzir verticalmente**: você pode aumentar/diminuir o tamanho da instância (VM) reservada para seu site da Web.</span><span class="sxs-lookup"><span data-stu-id="6b869-462">**Scale up and down**: You can increase/decrease the size of the instance (VM) reserved for your web site.</span></span><br/><br/><span data-ttu-id="6b869-463">Escalar horizontalmente: você pode adicionar mais instâncias reservadas (VMs) para seu site da Web.</span><span class="sxs-lookup"><span data-stu-id="6b869-463">Scale out: You can add more reserved instances (VMs) for your web site.</span></span><br/><br/><span data-ttu-id="6b869-464">É possível configurar a **Dimensionamento Automático** no Portal do Azure, bem como os horários de agendamento.</span><span class="sxs-lookup"><span data-stu-id="6b869-464">You can set up **AutoScale** on the portal as well as the schedule times.</span></span> <span data-ttu-id="6b869-465">Para saber mais, confira [Como dimensionar aplicativos Web](../../../app-service-web/web-sites-scale.md).</span><span class="sxs-lookup"><span data-stu-id="6b869-465">For more information, see [How to Scale Web Apps](../../../app-service-web/web-sites-scale.md).</span></span> |

<span data-ttu-id="6b869-466">Para obter mais informações sobre como escolher entre esses métodos de programação, veja [Aplicativos Web, Serviços de Nuvem e VMs do Azure: quando usar qual?](../../../app-service-web/choose-web-site-cloud-service-vm.md)</span><span class="sxs-lookup"><span data-stu-id="6b869-466">For more information on choosing between these programming methods, see [Azure Web Apps, Cloud Services, and VMs: When to use which](../../../app-service-web/choose-web-site-cloud-service-vm.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="6b869-467">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="6b869-467">Next Steps</span></span>
<span data-ttu-id="6b869-468">Para obter informações sobre como executar o SQL Server nas Máquinas Virtuais do Azure, confira [Visão geral do SQL Server nas Máquinas Virtuais do Azure](virtual-machines-windows-sql-server-iaas-overview.md).</span><span class="sxs-lookup"><span data-stu-id="6b869-468">For more information on running SQL Server in Azure Virtual machines, see [SQL Server on Azure Virtual Machines Overview](virtual-machines-windows-sql-server-iaas-overview.md).</span></span>

