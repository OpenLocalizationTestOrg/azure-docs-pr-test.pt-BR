---
title: "Configuração de armazenamento para VMs do SQL Server | Microsoft Docs"
description: "Este tópico descreve como o Azure configura o armazenamento para VMs do SQL Server durante o provisionamento (modelo de implantação do Resource Manager). Também explica como você pode configurar o armazenamento para suas VMs existentes do SQL Server."
services: virtual-machines-windows
documentationcenter: na
author: ninarn
manager: jhubbard
tags: azure-resource-manager
ms.assetid: 169fc765-3269-48fa-83f1-9fe3e4e40947
ms.service: virtual-machines-sql
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 01/31/2017
ms.author: ninarn
ms.openlocfilehash: f10bac1189c94a581487d19fc0cc129acec6a636
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/29/2017
---
# <a name="storage-configuration-for-sql-server-vms"></a><span data-ttu-id="9e3c1-104">Configuração de armazenamento para VMs do SQL Server</span><span class="sxs-lookup"><span data-stu-id="9e3c1-104">Storage configuration for SQL Server VMs</span></span>
<span data-ttu-id="9e3c1-105">Quando você configurar uma imagem de máquina virtual do SQL Server no Azure, o Portal ajuda você a automatizar a configuração de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-105">When you configure a SQL Server virtual machine image in Azure, the Portal helps to automate your storage configuration.</span></span> <span data-ttu-id="9e3c1-106">Isso inclui a anexação de armazenamento para a VM, tornando o armazenamento acessível para o SQL Server e configurando-o para otimizar seus requisitos específicos de desempenho.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-106">This includes attaching storage to the VM, making that storage accessible to SQL Server, and configuring it to optimize for your specific performance requirements.</span></span>

<span data-ttu-id="9e3c1-107">Este tópico explica como o Azure configura o armazenamento para suas VMs do SQL Server durante o provisionamento e para VMs existentes.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-107">This topic explains how Azure configures storage for your SQL Server VMs both during provisioning and for existing VMs.</span></span> <span data-ttu-id="9e3c1-108">Essa configuração tem base nas [práticas recomendadas de desempenho](virtual-machines-windows-sql-performance.md) para VMs do Azure executando o SQL Server.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-108">This configuration is based on the [performance best practices](virtual-machines-windows-sql-performance.md) for Azure VMs running SQL Server.</span></span>

[!INCLUDE [learn-about-deployment-models](../../../../includes/learn-about-deployment-models-rm-include.md)]

## <a name="prerequisites"></a><span data-ttu-id="9e3c1-109">Pré-requisitos</span><span class="sxs-lookup"><span data-stu-id="9e3c1-109">Prerequisites</span></span>
<span data-ttu-id="9e3c1-110">Para usar as definições automatizadas de configuração de armazenamento, sua máquina virtual exige as seguintes características:</span><span class="sxs-lookup"><span data-stu-id="9e3c1-110">To use the automated storage configuration settings, your virtual machine requires the following characteristics:</span></span>

* <span data-ttu-id="9e3c1-111">Deve ser provisionada com uma [imagem da galeria do SQL Server](virtual-machines-windows-sql-server-iaas-overview.md#option-1-create-a-sql-vm-with-per-minute-licensing).</span><span class="sxs-lookup"><span data-stu-id="9e3c1-111">Provisioned with a [SQL Server gallery image](virtual-machines-windows-sql-server-iaas-overview.md#option-1-create-a-sql-vm-with-per-minute-licensing).</span></span>
* <span data-ttu-id="9e3c1-112">Deve usar o [Modelo de implantação do Resource Manager](../../../azure-resource-manager/resource-manager-deployment-model.md).</span><span class="sxs-lookup"><span data-stu-id="9e3c1-112">Uses the [Resource Manager deployment model](../../../azure-resource-manager/resource-manager-deployment-model.md).</span></span>
* <span data-ttu-id="9e3c1-113">Deve usar o [Armazenamento Premium](../../../storage/common/storage-premium-storage.md).</span><span class="sxs-lookup"><span data-stu-id="9e3c1-113">Uses [Premium Storage](../../../storage/common/storage-premium-storage.md).</span></span>

## <a name="new-vms"></a><span data-ttu-id="9e3c1-114">Novas VMs</span><span class="sxs-lookup"><span data-stu-id="9e3c1-114">New VMs</span></span>
<span data-ttu-id="9e3c1-115">As seções a seguir descrevem como configurar o armazenamento para novas máquinas virtuais do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-115">The following sections describe how to configure storage for new SQL Server virtual machines.</span></span>

### <a name="azure-portal"></a><span data-ttu-id="9e3c1-116">Portal do Azure</span><span class="sxs-lookup"><span data-stu-id="9e3c1-116">Azure Portal</span></span>
<span data-ttu-id="9e3c1-117">Ao provisionar uma VM do Azure usando uma imagem da galeria do SQL Server, você pode optar por configurar automaticamente o armazenamento para sua nova VM.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-117">When provisioning an Azure VM using a SQL Server gallery image, you can choose to automatically configure the storage for your new VM.</span></span> <span data-ttu-id="9e3c1-118">Você especificar o tamanho do armazenamento, limites de desempenho e o tipo de carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-118">You specify the storage size, performance limits, and workload type.</span></span> <span data-ttu-id="9e3c1-119">A captura de tela a seguir mostra a folha de Configuração de armazenamento usada durante o provisionamento da VM do SQL.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-119">The following screenshot shows the Storage configuration blade used during SQL VM provisioning.</span></span>

![Configuração de armazenamento da VM do SQL Server durante o provisionamento](./media/virtual-machines-windows-sql-storage-configuration/sql-vm-storage-configuration-provisioning.png)

<span data-ttu-id="9e3c1-121">Com base em suas opções, o Azure realiza as seguintes tarefas de configuração de armazenamento depois de criar a VM:</span><span class="sxs-lookup"><span data-stu-id="9e3c1-121">Based on your choices, Azure performs the following storage configuration tasks after creating the VM:</span></span>

* <span data-ttu-id="9e3c1-122">Cria e anexa os discos de dados de armazenamento premium à máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-122">Creates and attaches premium storage data disks to the virtual machine.</span></span>
* <span data-ttu-id="9e3c1-123">Configura os discos de dados para serem acessíveis ao SQL Server.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-123">Configures the data disks to be accessible to SQL Server.</span></span>
* <span data-ttu-id="9e3c1-124">Configura os discos de dados em um pool de armazenamento com base nos requisitos de tamanho e desempenho (IOPS e taxa de transferência) especificados.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-124">Configures the data disks into a storage pool based on the specified size and performance (IOPS and throughput) requirements.</span></span>
* <span data-ttu-id="9e3c1-125">Associa o pool de armazenamento a uma nova unidade na máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-125">Associates the storage pool with a new drive on the virtual machine.</span></span>
* <span data-ttu-id="9e3c1-126">Otimiza essa nova unidade com base em seu tipo de carga de trabalho especificado (Data warehouse, Processamento transacional ou Geral).</span><span class="sxs-lookup"><span data-stu-id="9e3c1-126">Optimizes this new drive based on your specified workload type (Data warehousing, Transactional processing, or General).</span></span>

<span data-ttu-id="9e3c1-127">Para obter mais detalhes sobre como o Azure define as configurações de armazenamento, confira a [Seção de configuração de armazenamento](#storage-configuration).</span><span class="sxs-lookup"><span data-stu-id="9e3c1-127">For further details on how Azure configures storage settings, see the [Storage configuration section](#storage-configuration).</span></span> <span data-ttu-id="9e3c1-128">Para obter uma explicação completa de como criar uma VM do SQL Server no Portal do Azure, veja [o tutorial provisionamento](virtual-machines-windows-portal-sql-server-provision.md).</span><span class="sxs-lookup"><span data-stu-id="9e3c1-128">For a full walkthrough of how to create a SQL Server VM in the Azure Portal, see [the provisioning tutorial](virtual-machines-windows-portal-sql-server-provision.md).</span></span>

### <a name="resource-manage-templates"></a><span data-ttu-id="9e3c1-129">Modelos do Resource Manager</span><span class="sxs-lookup"><span data-stu-id="9e3c1-129">Resource Manage templates</span></span>
<span data-ttu-id="9e3c1-130">Se você usar os modelos do Resource Manager a seguir, dois discos de dados premium são conectados por padrão, sem nenhuma configuração de pool de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-130">If you use the following Resource Manager templates, two premium data disks are attached by default, with no storage pool configuration.</span></span> <span data-ttu-id="9e3c1-131">No entanto, você pode personalizar esses modelos para alterar o número de discos de dados premium anexados à máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-131">However, you can customize these templates to change the number of premium data disks that are attached to the virtual machine.</span></span>

* [<span data-ttu-id="9e3c1-132">Criar VM com backup automatizado</span><span class="sxs-lookup"><span data-stu-id="9e3c1-132">Create VM with Automated Backup</span></span>](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vm-sql-full-autobackup)
* [<span data-ttu-id="9e3c1-133">Criar VM com aplicação de patch automatizada</span><span class="sxs-lookup"><span data-stu-id="9e3c1-133">Create VM with Automated Patching</span></span>](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vm-sql-full-autopatching)
* [<span data-ttu-id="9e3c1-134">Criar VM com integração de AKV</span><span class="sxs-lookup"><span data-stu-id="9e3c1-134">Create VM with AKV Integration</span></span>](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vm-sql-full-keyvault)

## <a name="existing-vms"></a><span data-ttu-id="9e3c1-135">VMs existentes</span><span class="sxs-lookup"><span data-stu-id="9e3c1-135">Existing VMs</span></span>
<span data-ttu-id="9e3c1-136">Para VMs do SQL Server existente, você pode modificar algumas configurações de armazenamento no Portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-136">For existing SQL Server VMs, you can modify some storage settings in the Azure portal.</span></span> <span data-ttu-id="9e3c1-137">Selecione sua VM, vá até a área de Configurações e, em seguida, selecione Configuração do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-137">Select your VM, go to the Settings area, and then select SQL Server Configuration.</span></span> <span data-ttu-id="9e3c1-138">A folha Configuração do SQL Server mostra o uso do armazenamento atual da VM.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-138">The SQL Server Configuration blade shows the current storage usage of your VM.</span></span> <span data-ttu-id="9e3c1-139">Todas as unidades que existem na sua VM são exibidas neste gráfico.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-139">All drives that exist on your VM are displayed in this chart.</span></span> <span data-ttu-id="9e3c1-140">Para cada unidade, o espaço de armazenamento é exibido em quatro seções:</span><span class="sxs-lookup"><span data-stu-id="9e3c1-140">For each drive, the storage space displays in four sections:</span></span>

* <span data-ttu-id="9e3c1-141">Dados SQL</span><span class="sxs-lookup"><span data-stu-id="9e3c1-141">SQL data</span></span>
* <span data-ttu-id="9e3c1-142">Log do SQL</span><span class="sxs-lookup"><span data-stu-id="9e3c1-142">SQL log</span></span>
* <span data-ttu-id="9e3c1-143">Outros (armazenamento não SQL)</span><span class="sxs-lookup"><span data-stu-id="9e3c1-143">Other (non-SQL storage)</span></span>
* <span data-ttu-id="9e3c1-144">Disponível</span><span class="sxs-lookup"><span data-stu-id="9e3c1-144">Available</span></span>

![Configurar o armazenamento para a VM do SQL Server existente](./media/virtual-machines-windows-sql-storage-configuration/sql-vm-storage-configuration-existing.png)

<span data-ttu-id="9e3c1-146">Para configurar o armazenamento a fim de adicionar uma nova unidade ou estender uma unidade existente, clique no link Editar acima do gráfico.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-146">To configure the storage to add a new drive or extend an existing drive, click the Edit link above the chart.</span></span>

<span data-ttu-id="9e3c1-147">As opções de configuração que você vê variam de acordo com o uso se desse recurso anteriormente.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-147">The configuration options that you see varies depending on whether you have used this feature before.</span></span> <span data-ttu-id="9e3c1-148">Ao usar pela primeira vez, você pode especificar os requisitos de armazenamento para uma nova unidade.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-148">When using for the first time, you can specify your storage requirements for a new drive.</span></span> <span data-ttu-id="9e3c1-149">Se você tiver usado esse recurso para criar uma unidade, opte por estender o armazenamento da unidade.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-149">If you previously used this feature to create a drive, you can choose to extend that drive’s storage.</span></span>

### <a name="use-for-the-first-time"></a><span data-ttu-id="9e3c1-150">Uso pela primeira vez</span><span class="sxs-lookup"><span data-stu-id="9e3c1-150">Use for the first time</span></span>
<span data-ttu-id="9e3c1-151">Se esta for a primeira vez que você usa esse recurso, especifique os limites de tamanho e desempenho de armazenamento para uma nova unidade.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-151">If it is your first time using this feature, you can specify the storage size and performance limits for a new drive.</span></span> <span data-ttu-id="9e3c1-152">Essa experiência é semelhante ao que você veria no tempo de provisionamento.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-152">This experience is similar to what you would see at provisioning time.</span></span> <span data-ttu-id="9e3c1-153">A principal diferença é que você não tem permissão para especificar o tipo de carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-153">The main difference is that you are not permitted to specify the workload type.</span></span> <span data-ttu-id="9e3c1-154">Essa restrição impede a interrupção de quaisquer configurações existentes do SQL Server na máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-154">This restriction prevents disrupting any existing SQL Server configurations on the virtual machine.</span></span>

![Configurar controles deslizantes de armazenamento do SQL Server](./media/virtual-machines-windows-sql-storage-configuration/sql-vm-storage-usage-sliders.png)

<span data-ttu-id="9e3c1-156">O Azure cria uma nova unidade com base em suas especificações.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-156">Azure creates a new drive based on your specifications.</span></span> <span data-ttu-id="9e3c1-157">Nesse cenário, o Azure realiza as seguintes tarefas de configuração de armazenamento:</span><span class="sxs-lookup"><span data-stu-id="9e3c1-157">In this scenario, Azure performs the following storage configuration tasks:</span></span>

* <span data-ttu-id="9e3c1-158">Cria e anexa os discos de dados de armazenamento premium à máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-158">Creates and attaches premium storage data disks to the virtual machine.</span></span>
* <span data-ttu-id="9e3c1-159">Configura os discos de dados para serem acessíveis ao SQL Server.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-159">Configures the data disks to be accessible to SQL Server.</span></span>
* <span data-ttu-id="9e3c1-160">Configura os discos de dados em um pool de armazenamento com base nos requisitos de tamanho e desempenho (IOPS e taxa de transferência) especificados.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-160">Configures the data disks into a storage pool based on the specified size and performance (IOPS and throughput) requirements.</span></span>
* <span data-ttu-id="9e3c1-161">Associa o pool de armazenamento a uma nova unidade na máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-161">Associates the storage pool with a new drive on the virtual machine.</span></span>

<span data-ttu-id="9e3c1-162">Para obter mais detalhes sobre como o Azure define as configurações de armazenamento, confira a [Seção de configuração de armazenamento](#storage-configuration).</span><span class="sxs-lookup"><span data-stu-id="9e3c1-162">For further details on how Azure configures storage settings, see the [Storage configuration section](#storage-configuration).</span></span>

### <a name="add-a-new-drive"></a><span data-ttu-id="9e3c1-163">Adicionar uma nova unidade</span><span class="sxs-lookup"><span data-stu-id="9e3c1-163">Add a new drive</span></span>
<span data-ttu-id="9e3c1-164">Se você já tiver configurado o armazenamento na sua VM do SQL Server, a expansão do armazenamento apresenta duas opções novas.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-164">If you have already configured storage on your SQL Server VM, expanding storage brings up two new options.</span></span> <span data-ttu-id="9e3c1-165">A primeira opção é adicionar uma nova unidade, que pode aumentar o nível de desempenho da VM.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-165">The first option is to add a new drive, which can increase the performance level of your VM.</span></span>

![Adicionar uma nova unidade a uma VM do SQL](./media/virtual-machines-windows-sql-storage-configuration/sql-vm-storage-configuration-add-new-drive.png)

<span data-ttu-id="9e3c1-167">No entanto, depois de adicionar a unidade, você deve executar alguma configuração manual extra para alcançar o aumento de desempenho.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-167">However, after adding the drive, you must perform some extra manual configuration to achieve the performance increase.</span></span>

### <a name="extend-the-drive"></a><span data-ttu-id="9e3c1-168">Estender a unidade</span><span class="sxs-lookup"><span data-stu-id="9e3c1-168">Extend the drive</span></span>
<span data-ttu-id="9e3c1-169">A outra opção para expandir o armazenamento é estender a unidade existente.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-169">The other option for expanding storage is to extend the existing drive.</span></span> <span data-ttu-id="9e3c1-170">Essa opção aumenta o armazenamento disponível para sua unidade, mas ele não aumenta o desempenho.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-170">This option increases the available storage for your drive, but it does not increase performance.</span></span> <span data-ttu-id="9e3c1-171">Com os pools de armazenamento, você não pode alterar o número de colunas após a criação do pool de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-171">With storage pools, you cannot alter the number of columns after the storage pool is created.</span></span> <span data-ttu-id="9e3c1-172">O número de colunas determina o número de gravações paralelas, que podem ser distribuídas entre os discos de dados.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-172">The number of columns determines the number of parallel writes, which can be striped across the data disks.</span></span> <span data-ttu-id="9e3c1-173">Portanto, os discos de dados não podem aumentar o desempenho.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-173">Therefore, any added data disks cannot increase performance.</span></span> <span data-ttu-id="9e3c1-174">Eles só podem fornecer mais armazenamento para os dados que estão sendo gravados.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-174">They can only provide more storage for the data being written.</span></span> <span data-ttu-id="9e3c1-175">Essa limitação também significa que, ao estender a unidade, o número de colunas determina o número mínimo de discos de dados que você pode adicionar.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-175">This limitation also means that, when extending the drive, the number of columns determines the minimum number of data disks that you can add.</span></span> <span data-ttu-id="9e3c1-176">Então se você criar um pool de armazenamento com quatro discos de dados, o número de colunas também será quatro.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-176">So if you create a storage pool with four data disks, the number of columns is also four.</span></span> <span data-ttu-id="9e3c1-177">Sempre que você estender o armazenamento, deverá adicionar pelo menos quatro discos de dados.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-177">Any time you extend the storage, you must add at least four data disks.</span></span>

![Estender uma unidade para uma VM do SQL](./media/virtual-machines-windows-sql-storage-configuration/sql-vm-storage-extend-a-drive.png)

## <a name="storage-configuration"></a><span data-ttu-id="9e3c1-179">Configuração de armazenamento</span><span class="sxs-lookup"><span data-stu-id="9e3c1-179">Storage configuration</span></span>
<span data-ttu-id="9e3c1-180">Esta seção fornece uma referência para as alterações de configuração de armazenamento realizadas automaticamente pelo Azure durante a configuração ou provisionamento de VM do SQL no Portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-180">This section provides a reference for the storage configuration changes that Azure automatically performs during SQL VM provisioning or configuration in the Azure Portal.</span></span>

* <span data-ttu-id="9e3c1-181">Se você tiver selecionado menos de dois TBs de armazenamento para sua VM, o Azure não criará um pool de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-181">If you have selected fewer than two TBs of storage for your VM, Azure does not create a storage pool.</span></span>
* <span data-ttu-id="9e3c1-182">Se você tiver selecionado pelo menos de dois TBs de armazenamento para sua VM, o Azure configurará um pool de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-182">If you have selected at least two TBs of storage for your VM, Azure configures a storage pool.</span></span> <span data-ttu-id="9e3c1-183">A próxima seção deste tópico fornece os detalhes sobre a configuração do pool de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-183">The next section of this topic provides the details of the storage pool configuration.</span></span>
* <span data-ttu-id="9e3c1-184">A configuração de armazenamento automática sempre usa discos de dados P30 do [armazenamento premium](../../../storage/common/storage-premium-storage.md) .</span><span class="sxs-lookup"><span data-stu-id="9e3c1-184">Automatic storage configuration always uses [premium storage](../../../storage/common/storage-premium-storage.md) P30 data disks.</span></span> <span data-ttu-id="9e3c1-185">Consequentemente, há um mapeamento 1:1 entre o número selecionado de Terabytes e o número de discos de dados anexados à sua VM.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-185">Consequently, there is a 1:1 mapping between your selected number of Terabytes and the number of data disks attached to your VM.</span></span>

<span data-ttu-id="9e3c1-186">Para saber mais sobre preços, consulte a página [Preços de armazenamento](https://azure.microsoft.com/pricing/details/storage) na guia **Armazenamento em disco** .</span><span class="sxs-lookup"><span data-stu-id="9e3c1-186">For pricing information, see the [Storage pricing](https://azure.microsoft.com/pricing/details/storage) page on the **Disk Storage** tab.</span></span>

### <a name="creation-of-the-storage-pool"></a><span data-ttu-id="9e3c1-187">Criação do pool de armazenamento</span><span class="sxs-lookup"><span data-stu-id="9e3c1-187">Creation of the storage pool</span></span>
<span data-ttu-id="9e3c1-188">O Azure usa as configurações a seguir para criar o pool de armazenamento em VMs do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-188">Azure uses the following settings to create the storage pool on SQL Server VMs.</span></span>

| <span data-ttu-id="9e3c1-189">Configuração</span><span class="sxs-lookup"><span data-stu-id="9e3c1-189">Setting</span></span> | <span data-ttu-id="9e3c1-190">Valor</span><span class="sxs-lookup"><span data-stu-id="9e3c1-190">Value</span></span> |
| --- | --- |
| <span data-ttu-id="9e3c1-191">Tamanho da distribuição</span><span class="sxs-lookup"><span data-stu-id="9e3c1-191">Stripe size</span></span> |<span data-ttu-id="9e3c1-192">256 KB (Data warehouse); 64 KB (Transacional)</span><span class="sxs-lookup"><span data-stu-id="9e3c1-192">256 KB (Data warehousing); 64 KB (Transactional)</span></span> |
| <span data-ttu-id="9e3c1-193">Tamanhos do disco</span><span class="sxs-lookup"><span data-stu-id="9e3c1-193">Disk sizes</span></span> |<span data-ttu-id="9e3c1-194">1 TB cada</span><span class="sxs-lookup"><span data-stu-id="9e3c1-194">1 TB each</span></span> |
| <span data-ttu-id="9e3c1-195">Cache</span><span class="sxs-lookup"><span data-stu-id="9e3c1-195">Cache</span></span> |<span data-ttu-id="9e3c1-196">Ler</span><span class="sxs-lookup"><span data-stu-id="9e3c1-196">Read</span></span> |
| <span data-ttu-id="9e3c1-197">Tamanho da alocação</span><span class="sxs-lookup"><span data-stu-id="9e3c1-197">Allocation size</span></span> |<span data-ttu-id="9e3c1-198">Tamanho da unidade de alocação de NTFS de 64 KB</span><span class="sxs-lookup"><span data-stu-id="9e3c1-198">64 KB NTFS allocation unit size</span></span> |
| <span data-ttu-id="9e3c1-199">Inicialização de arquivo instantânea</span><span class="sxs-lookup"><span data-stu-id="9e3c1-199">Instant file initialization</span></span> |<span data-ttu-id="9e3c1-200">Habilitado</span><span class="sxs-lookup"><span data-stu-id="9e3c1-200">Enabled</span></span> |
| <span data-ttu-id="9e3c1-201">Bloquear páginas na memória</span><span class="sxs-lookup"><span data-stu-id="9e3c1-201">Lock pages in memory</span></span> |<span data-ttu-id="9e3c1-202">Habilitado</span><span class="sxs-lookup"><span data-stu-id="9e3c1-202">Enabled</span></span> |
| <span data-ttu-id="9e3c1-203">Recuperação</span><span class="sxs-lookup"><span data-stu-id="9e3c1-203">Recovery</span></span> |<span data-ttu-id="9e3c1-204">Recuperação simples (sem resiliência)</span><span class="sxs-lookup"><span data-stu-id="9e3c1-204">Simple recovery (no resiliency)</span></span> |
| <span data-ttu-id="9e3c1-205">Número de colunas</span><span class="sxs-lookup"><span data-stu-id="9e3c1-205">Number of columns</span></span> |<span data-ttu-id="9e3c1-206">Número de discos de dados<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="9e3c1-206">Number of data disks<sup>1</sup></span></span> |
| <span data-ttu-id="9e3c1-207">Local do TempDB</span><span class="sxs-lookup"><span data-stu-id="9e3c1-207">TempDB location</span></span> |<span data-ttu-id="9e3c1-208">Armazenados em discos de dados<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="9e3c1-208">Stored on data disks<sup>2</sup></span></span> |

<span data-ttu-id="9e3c1-209"><sup>1</sup>Após a criação do pool de armazenamento, você não pode alterar o número de colunas no pool de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-209"><sup>1</sup> After the storage pool is created, you cannot alter the number of columns in the storage pool.</span></span>

<span data-ttu-id="9e3c1-210"><sup>2</sup> Essa configuração se aplica somente a primeira unidade que você cria usando o recurso de configuração de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-210"><sup>2</sup> This setting only applies to the first drive you create using the storage configuration feature.</span></span>

## <a name="workload-optimization-settings"></a><span data-ttu-id="9e3c1-211">Configurações de otimização da carga de trabalho</span><span class="sxs-lookup"><span data-stu-id="9e3c1-211">Workload optimization settings</span></span>
<span data-ttu-id="9e3c1-212">A tabela a seguir descreve as três opções de tipo de carga de trabalho disponíveis e suas otimizações correspondentes:</span><span class="sxs-lookup"><span data-stu-id="9e3c1-212">The following table describes the three workload type options available and their corresponding optimizations:</span></span>

| <span data-ttu-id="9e3c1-213">Tipo de carga de trabalho</span><span class="sxs-lookup"><span data-stu-id="9e3c1-213">Workload type</span></span> | <span data-ttu-id="9e3c1-214">Descrição</span><span class="sxs-lookup"><span data-stu-id="9e3c1-214">Description</span></span> | <span data-ttu-id="9e3c1-215">Otimizações</span><span class="sxs-lookup"><span data-stu-id="9e3c1-215">Optimizations</span></span> |
| --- | --- | --- |
| <span data-ttu-id="9e3c1-216">**Geral**</span><span class="sxs-lookup"><span data-stu-id="9e3c1-216">**General**</span></span> |<span data-ttu-id="9e3c1-217">Configuração padrão que oferece suporte à maioria das cargas de trabalho</span><span class="sxs-lookup"><span data-stu-id="9e3c1-217">Default setting that supports most workloads</span></span> |<span data-ttu-id="9e3c1-218">Nenhum</span><span class="sxs-lookup"><span data-stu-id="9e3c1-218">None</span></span> |
| <span data-ttu-id="9e3c1-219">**Processamento transacional**</span><span class="sxs-lookup"><span data-stu-id="9e3c1-219">**Transactional processing**</span></span> |<span data-ttu-id="9e3c1-220">Otimiza o armazenamento para cargas de trabalho OLTP tradicionais do banco de dados</span><span class="sxs-lookup"><span data-stu-id="9e3c1-220">Optimizes the storage for traditional database OLTP workloads</span></span> |<span data-ttu-id="9e3c1-221">Sinalizador de Rastreamento 1117</span><span class="sxs-lookup"><span data-stu-id="9e3c1-221">Trace Flag 1117</span></span><br/><span data-ttu-id="9e3c1-222">Sinalizador de Rastreamento 1118</span><span class="sxs-lookup"><span data-stu-id="9e3c1-222">Trace Flag 1118</span></span> |
| <span data-ttu-id="9e3c1-223">**Data warehouse**</span><span class="sxs-lookup"><span data-stu-id="9e3c1-223">**Data warehousing**</span></span> |<span data-ttu-id="9e3c1-224">Otimiza o armazenamento para as cargas de trabalho de análise e emissão de relatórios</span><span class="sxs-lookup"><span data-stu-id="9e3c1-224">Optimizes the storage for analytic and reporting workloads</span></span> |<span data-ttu-id="9e3c1-225">Sinalizador de Rastreamento 610</span><span class="sxs-lookup"><span data-stu-id="9e3c1-225">Trace Flag 610</span></span><br/><span data-ttu-id="9e3c1-226">Sinalizador de Rastreamento 1117</span><span class="sxs-lookup"><span data-stu-id="9e3c1-226">Trace Flag 1117</span></span> |

> [!NOTE]
> <span data-ttu-id="9e3c1-227">Você só pode especificar o tipo de carga de trabalho quando provisiona uma máquina virtual do SQL, selecionando-o na etapa de configuração de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="9e3c1-227">You can only specify the workload type when you provision a SQL virtual machine by selecting it in the storage configuration step.</span></span>
>
>

## <a name="next-steps"></a><span data-ttu-id="9e3c1-228">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="9e3c1-228">Next steps</span></span>
<span data-ttu-id="9e3c1-229">Para outros tópicos relacionados à execução do SQL Server em VMs do Azure, consulte [SQL Server em Máquinas Virtuais do Azure](virtual-machines-windows-sql-server-iaas-overview.md).</span><span class="sxs-lookup"><span data-stu-id="9e3c1-229">For other topics related to running SQL Server in Azure VMs, see [SQL Server on Azure Virtual Machines](virtual-machines-windows-sql-server-iaas-overview.md).</span></span>
