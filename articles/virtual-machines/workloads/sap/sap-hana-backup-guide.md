---
title: "Guia de aaaBackup do SAP HANA em máquinas virtuais do Azure | Microsoft Docs"
description: "O guia de backup do SAP HANA oferece duas possibilidades principais de backup para SAP HANA em máquinas virtuais do Azure"
services: virtual-machines-linux
documentationcenter: 
author: hermanndms
manager: timlt
editor: 
ms.service: virtual-machines-linux
ms.devlang: NA
ms.topic: article
ums.tgt_pltfrm: vm-linux
ms.workload: infrastructure-services
ms.date: 3/13/2017
ms.author: rclaus
ms.openlocfilehash: e651091bb5da2698ec8bf80cad405bfce5b192cf
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="backup-guide-for-sap-hana-on-azure-virtual-machines"></a><span data-ttu-id="0f8f0-103">Guia de backup para SAP HANA em Máquinas Virtuais do Azure</span><span class="sxs-lookup"><span data-stu-id="0f8f0-103">Backup guide for SAP HANA on Azure Virtual Machines</span></span>

## <a name="getting-started"></a><span data-ttu-id="0f8f0-104">Introdução</span><span class="sxs-lookup"><span data-stu-id="0f8f0-104">Getting Started</span></span>

<span data-ttu-id="0f8f0-105">Guia de backup de saudação do HANA SAP em execução em máquinas virtuais do Azure só descrevem os tópicos específicos do Azure.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-105">hello backup guide for SAP HANA running on Azure virtual Machines will only describe Azure-specific topics.</span></span> <span data-ttu-id="0f8f0-106">Para geral SAP HANA backup itens relacionados, verifique a documentação do SAP HANA hello (consulte _documentação de backup do SAP HANA_ posteriormente neste artigo).</span><span class="sxs-lookup"><span data-stu-id="0f8f0-106">For general SAP HANA backup related items, check hello SAP HANA documentation (see _SAP HANA backup documentation_ later in this article).</span></span>

<span data-ttu-id="0f8f0-107">Olá foco deste artigo é duas principais backup possibilidades para SAP HANA em máquinas virtuais do Azure:</span><span class="sxs-lookup"><span data-stu-id="0f8f0-107">hello focus of this article is on two major backup possibilities for SAP HANA on Azure virtual machines:</span></span>

- <span data-ttu-id="0f8f0-108">Sistema de arquivos de backup toohello HANA em uma máquina Virtual do Azure Linux (consulte [SAP HANA Azure Backup em nível de arquivo](sap-hana-backup-file-level.md))</span><span class="sxs-lookup"><span data-stu-id="0f8f0-108">HANA backup toohello file system in an Azure Linux Virtual Machine (see [SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md))</span></span>
- <span data-ttu-id="0f8f0-109">Backup do HANA com base em instantâneos de armazenamento usando o recurso de instantâneo de blob de armazenamento do Azure Olá manualmente ou o serviço de Backup do Azure (consulte [backup SAP HANA com base em instantâneos de armazenamento](sap-hana-backup-storage-snapshots.md))</span><span class="sxs-lookup"><span data-stu-id="0f8f0-109">HANA backup based on storage snapshots using hello Azure storage blob snapshot feature manually or Azure Backup Service (see [SAP HANA backup based on storage snapshots](sap-hana-backup-storage-snapshots.md))</span></span>

<span data-ttu-id="0f8f0-110">SAP HANA oferece um backup de API, que permite que as ferramentas de backup de terceiros toointegrate diretamente com o SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-110">SAP HANA offers a backup API, which allows third-party backup tools toointegrate directly with SAP HANA.</span></span> <span data-ttu-id="0f8f0-111">(Que não está dentro do escopo deste guia hello.) Não há nenhuma integração direta do SAP HANA com o Serviço de Backup do Azure disponível nessa API no momento.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-111">(That is not within hello scope of this guide.) There is no direct integration of SAP HANA with Azure Backup service available right now based on this API.</span></span>

<span data-ttu-id="0f8f0-112">SAP HANA oficialmente tem suporte no tipo de VM do Azure GS5 como instância única com cargas de trabalho de tooOLAP uma restrição adicional (consulte [localizar certificados de plataformas de IaaS](https://global.sap.com/community/ebook/2014-09-02-hana-hardware/enEN/iaas.html) no site SAP Olá).</span><span class="sxs-lookup"><span data-stu-id="0f8f0-112">SAP HANA is officially supported on Azure VM type GS5 as single instance with an additional restriction tooOLAP workloads (see [Find Certified IaaS Platforms](https://global.sap.com/community/ebook/2014-09-02-hana-hardware/enEN/iaas.html) on hello SAP website).</span></span> <span data-ttu-id="0f8f0-113">Este artigo será atualizado conforme novas ofertas do SAP HANA forem disponibilizados para o Azure.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-113">This article will be updated as new offerings for SAP HANA on Azure become available.</span></span>

<span data-ttu-id="0f8f0-114">Há também uma solução híbrida do SAP HANA disponível no Azure, onde o SAP HANA é executado de forma não virtualizada em servidores físicos.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-114">There is also an SAP HANA hybrid solution available on Azure, where SAP HANA runs non-virtualized on physical servers.</span></span> <span data-ttu-id="0f8f0-115">No entanto, este guia de backup do Azure do SAP HANA abrange um ambiente puro do Azure onde o SAP HANA é executado em uma VM do Azure, sem ter o SAP HANA em execução em &quot;instâncias grandes.&quot; Consulte [Visão geral e arquitetura do SAP HANA (instâncias grandes) no Azure](hana-overview-architecture.md) para obter mais informações sobre essa solução de backup em &quot;instâncias grandes&quot; com base em instantâneos de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-115">However, this SAP HANA Azure backup guide covers a pure Azure environment where SAP HANA runs in an Azure VM, not SAP HANA running on &quot;large instances.&quot; See [SAP HANA (large instances) overview and architecture on Azure](hana-overview-architecture.md) for more information about this backup solution on &quot;large instances&quot; based on storage snapshots.</span></span>

<span data-ttu-id="0f8f0-116">Informações gerais sobre produtos SAP com suporte no Azure podem ser encontradas em [SAP Observação 1928533](https://launchpad.support.sap.com/#/notes/1928533).</span><span class="sxs-lookup"><span data-stu-id="0f8f0-116">General information about SAP products supported on Azure can be found in [SAP Note 1928533](https://launchpad.support.sap.com/#/notes/1928533).</span></span>

<span data-ttu-id="0f8f0-117">Olá três figuras a seguir oferecem uma visão geral da saudação opções de backup do SAP HANA usando recursos nativos do Azure no momento e também mostram três cenários possíveis de backup futuros.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-117">hello following three figures give an overview of hello SAP HANA backup options using native Azure capabilities currently, and also show three potential future backup scenarios.</span></span> <span data-ttu-id="0f8f0-118">artigos relacionados do Hello [SAP HANA Azure Backup em nível de arquivo](sap-hana-backup-file-level.md) e [backup SAP HANA com base em instantâneos de armazenamento](sap-hana-backup-storage-snapshots.md) descrevem essas opções mais detalhadamente, incluindo considerações de tamanho e desempenho para SAP HANA backup de vários terabytes de tamanho.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-118">hello related articles [SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md) and [SAP HANA backup based on storage snapshots](sap-hana-backup-storage-snapshots.md) describe these options in more detail, including size and performance considerations for SAP HANA backups that are multi-terabytes in size.</span></span>

![Esta figura mostra duas possibilidades para salvar o estado da VM atual Olá](media/sap-hana-backup-guide/image001.png)

<span data-ttu-id="0f8f0-120">Esta figura mostra a possibilidade de saudação de salvar Olá atual estado da VM, através de serviço de Backup do Azure ou instantâneo manual de discos de VM.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-120">This figure shows hello possibility of saving hello current VM state, either via Azure Backup service or manual snapshot of VM disks.</span></span> <span data-ttu-id="0f8f0-121">Com essa abordagem, um &#39; não tem backups do SAP HANA toomanage.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-121">With this approach, one doesn&#39;t have toomanage SAP HANA backups.</span></span> <span data-ttu-id="0f8f0-122">desafio de saudação do cenário de instantâneo do disco Olá é consistência do sistema de arquivos e um estado consistente com o aplicativo de disco.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-122">hello challenge of hello disk snapshot scenario is file system consistency, and an application-consistent disk state.</span></span> <span data-ttu-id="0f8f0-123">tópico de consistência de saudação é discutido na seção de saudação _consistência de dados SAP HANA ao armazenamento de instantâneos_ posteriormente neste artigo.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-123">hello consistency topic is discussed in hello section _SAP HANA data consistency when taking storage snapshots_ later in this article.</span></span> <span data-ttu-id="0f8f0-124">Recursos e restrições do serviço de Backup do Azure relacionados a backups do HANA tooSAP também são discutidos neste artigo.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-124">Capabilities and restrictions of Azure Backup service related tooSAP HANA backups are also discussed later in this article.</span></span>

![Esta figura mostra opções para colocar um SAP HANA arquivo de backup dentro de saudação VM](media/sap-hana-backup-guide/image002.png)

<span data-ttu-id="0f8f0-126">Esta figura mostra opções para fazer um backup de arquivo do SAP HANA dentro Olá VM e, em seguida, armazenando-os arquivos de backup HANA em algum lugar outro uso de ferramentas diferentes.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-126">This figure shows options for taking an SAP HANA file backup inside hello VM, and then storing it HANA backup files somewhere else using different tools.</span></span> <span data-ttu-id="0f8f0-127">Fazer um backup do HANA requer mais tempo do que uma solução de backup do instantâneo, mas ele tem vantagens em relação à integridade e consistência.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-127">Taking a HANA backup requires more time than a snapshot-based backup solution, but it has advantages regarding integrity and consistency.</span></span> <span data-ttu-id="0f8f0-128">Mais detalhes são fornecidos neste artigo.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-128">More details are provided later in this article.</span></span>

![Esta figura mostra um potencial futuro cenário de backup do SAP HANA](media/sap-hana-backup-guide/image003.png)

<span data-ttu-id="0f8f0-130">Esta figura mostra um potencial futuro cenário de backup do SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-130">This figure shows a potential future SAP HANA backup scenario.</span></span> <span data-ttu-id="0f8f0-131">Se o SAP HANA permitisse fazer backups a partir de uma replicação secundária, ele poderia adicionar mais opções para estratégias de backup.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-131">If SAP HANA allowed taking backups from a replication secondary, it would add additional options for backup strategies.</span></span> <span data-ttu-id="0f8f0-132">No momento não é possível postar tooa Olá SAP HANA Wiki de acordo com:</span><span class="sxs-lookup"><span data-stu-id="0f8f0-132">Currently it isn't possible according tooa post in hello SAP HANA Wiki:</span></span>

<span data-ttu-id="0f8f0-133">_&quot;É possível tootake backups no lado secundário Olá?_</span><span class="sxs-lookup"><span data-stu-id="0f8f0-133">_&quot;Is it possible tootake backups on hello secondary side?_</span></span>

<span data-ttu-id="0f8f0-134">_Não, atualmente pode apenas obter os dados e backups do lado primário da saudação de log. Se o backup de log automática estiver habilitada, após toohello tomada de lado secundário, os backups de log Olá automaticamente serão gravados existe.&quot;_</span><span class="sxs-lookup"><span data-stu-id="0f8f0-134">_No, currently you can only take data and log backups on hello primary side. If automatic log backup is enabled, after takeover toohello secondary side, hello log backups will automatically be written there.&quot;_</span></span>

## <a name="sap-resources-for-hana-backup"></a><span data-ttu-id="0f8f0-135">Recursos do SAP para backup HANA</span><span class="sxs-lookup"><span data-stu-id="0f8f0-135">SAP resources for HANA backup</span></span>

### <a name="sap-hana-backup-documentation"></a><span data-ttu-id="0f8f0-136">Documentação de backup do SAP HANA</span><span class="sxs-lookup"><span data-stu-id="0f8f0-136">SAP HANA backup documentation</span></span>

- [<span data-ttu-id="0f8f0-137">Introdução tooSAP HANA administração</span><span class="sxs-lookup"><span data-stu-id="0f8f0-137">Introduction tooSAP HANA Administration</span></span>](https://help.sap.com/viewer/6b94445c94ae495c83a19646e7c3fd56/2.0.00/en-US)
- [<span data-ttu-id="0f8f0-138">Planejando sua estratégia de backup e recuperação</span><span class="sxs-lookup"><span data-stu-id="0f8f0-138">Planning Your Backup and Recovery Strategy</span></span>](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm)
- [<span data-ttu-id="0f8f0-139">Agendar Backup HANA usando ABAP DBACOCKPIT</span><span class="sxs-lookup"><span data-stu-id="0f8f0-139">Schedule HANA Backup using ABAP DBACOCKPIT</span></span>](http://www.hanatutorials.com/p/schedule-hana-backup-using-abap.html)
- [<span data-ttu-id="0f8f0-140">Agendar Backups de Dados (Ferramenta Cockpit do SAP HANA)</span><span class="sxs-lookup"><span data-stu-id="0f8f0-140">Schedule Data Backups (SAP HANA Cockpit)</span></span>](http://help.sap.com/saphelp_hanaplatform/helpdata/en/6d/385fa14ef64a6bab2c97a3d3e40292/frameset.htm)
- <span data-ttu-id="0f8f0-141">Perguntas frequentes sobre o backup do SAP HANA em [Observação 1642148 do SAP](https://launchpad.support.sap.com/#/notes/1642148)</span><span class="sxs-lookup"><span data-stu-id="0f8f0-141">FAQ about SAP HANA backup in [SAP Note 1642148](https://launchpad.support.sap.com/#/notes/1642148)</span></span>
- <span data-ttu-id="0f8f0-142">Perguntas frequentes sobre instantâneos de banco de dados e armazenamento do SAP HANA em [Observação 2039883 do SAP](https://launchpad.support.sap.com/#/notes/2039883)</span><span class="sxs-lookup"><span data-stu-id="0f8f0-142">FAQ about SAP HANA database and storage snapshots in [SAP Note 2039883](https://launchpad.support.sap.com/#/notes/2039883)</span></span>
- <span data-ttu-id="0f8f0-143">Sistemas de arquivos de rede inadequados para backup e recuperação em [Observação 1820529 do SAP](https://launchpad.support.sap.com/#/notes/1820529)</span><span class="sxs-lookup"><span data-stu-id="0f8f0-143">Unsuitable network file systems for backup and recovery in [SAP Note 1820529](https://launchpad.support.sap.com/#/notes/1820529)</span></span>

### <a name="why-sap-hana-backup"></a><span data-ttu-id="0f8f0-144">Por que o backup do SAP HANA?</span><span class="sxs-lookup"><span data-stu-id="0f8f0-144">Why SAP HANA backup?</span></span>

<span data-ttu-id="0f8f0-145">Armazenamento do Azure oferece disponibilidade e confiabilidade imediato saudação (consulte [tooMicrosoft Introdução armazenamento do Azure](../../../storage/common/storage-introduction.md) para obter mais informações sobre o armazenamento do Azure).</span><span class="sxs-lookup"><span data-stu-id="0f8f0-145">Azure storage offers availability and reliability out of hello box (see [Introduction tooMicrosoft Azure Storage](../../../storage/common/storage-introduction.md) for more information about Azure storage).</span></span>

<span data-ttu-id="0f8f0-146">Olá mínimo para &quot;backup&quot; é toorely em Olá SLAs do Azure, Olá manter arquivos de log e dados do SAP HANA no servidor de SAP HANA toohello anexado de VHDs do Azure VM.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-146">hello minimum for &quot;backup&quot; is toorely on hello Azure SLAs, keeping hello SAP HANA data and log files on Azure VHDs attached toohello SAP HANA server VM.</span></span> <span data-ttu-id="0f8f0-147">Essa abordagem abrange falhas VM, mas não possíveis danos toohello SAP HANA dados e arquivos de log ou erros lógicos, como a exclusão de arquivos de dados ou por engano.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-147">This approach covers VM failures, but not potential damage toohello SAP HANA data and log files, or logical errors like deleting data or files by accident.</span></span> <span data-ttu-id="0f8f0-148">Os backups também são necessários por motivos legais ou de conformidade.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-148">Backups are also required for compliance or legal reasons.</span></span> <span data-ttu-id="0f8f0-149">Em resumo, sempre há a necessidade de backups do SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-149">In short, there is always a need for SAP HANA backups.</span></span>

### <a name="how-tooverify-correctness-of-sap-hana-backup"></a><span data-ttu-id="0f8f0-150">Como tooverify exatidão do backup do SAP HANA</span><span class="sxs-lookup"><span data-stu-id="0f8f0-150">How tooverify correctness of SAP HANA backup</span></span>
<span data-ttu-id="0f8f0-151">Ao usar instantâneos de armazenamento, recomenda-se executar uma restauração de teste em um sistema diferente.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-151">When using storage snapshots, running a test restore on a different system is recommended.</span></span> <span data-ttu-id="0f8f0-152">Essa abordagem oferece um tooensure de forma que um backup está corretos e internos processos para o trabalho de backup e restauração conforme o esperado.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-152">This approach provides a way tooensure that a backup is correct, and internal processes for backup and restore work as expected.</span></span> <span data-ttu-id="0f8f0-153">Embora esse seja um problema significativo obstáculo no local, é muito mais fácil tooaccomplish na nuvem hello, fornecendo os recursos necessários temporariamente para essa finalidade.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-153">While this is a significant hurdle on-premises, it is much easier tooaccomplish in hello cloud by providing necessary resources temporarily for this purpose.</span></span>

<span data-ttu-id="0f8f0-154">Tenha em mente que fazer uma restauração simples e verificar se o HANA está ativo e em execução não são o suficiente.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-154">Keep in mind that doing a simple restore and checking if HANA is up and running is not sufficient.</span></span> <span data-ttu-id="0f8f0-155">Idealmente, um deve ser executado um toobe de verificação de consistência de tabela se que esse banco de dados restaurado de saudação é bom.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-155">Ideally, one should run a table consistency check toobe sure that hello restored database is fine.</span></span> <span data-ttu-id="0f8f0-156">O SAP HANA oferece vários tipos de verificações de consistência descritos [Observação 1977584 do SAP](https://launchpad.support.sap.com/#/notes/1977584).</span><span class="sxs-lookup"><span data-stu-id="0f8f0-156">SAP HANA offers several kinds of consistency checks described in [SAP Note 1977584](https://launchpad.support.sap.com/#/notes/1977584).</span></span>

<span data-ttu-id="0f8f0-157">Informações sobre a verificação de consistência de tabela Olá também podem ser encontradas no site do SAP Olá em [tabela e verificações de consistência do catálogo](http://help.sap.com/saphelp_hanaplatform/helpdata/en/25/84ec2e324d44529edc8221956359ea/content.htm#loio9357bf52c7324bee9567dca417ad9f8b).</span><span class="sxs-lookup"><span data-stu-id="0f8f0-157">Information about hello table consistency check can also be found on hello SAP website at [Table and Catalog Consistency Checks](http://help.sap.com/saphelp_hanaplatform/helpdata/en/25/84ec2e324d44529edc8221956359ea/content.htm#loio9357bf52c7324bee9567dca417ad9f8b).</span></span>

<span data-ttu-id="0f8f0-158">Para backups de arquivos padrões, um teste de restauração não é necessário.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-158">For standard file backups, a test restore is not necessary.</span></span> <span data-ttu-id="0f8f0-159">Há duas ferramentas SAP HANA que ajudam a toocheck backups que podem ser usados para restauração: hdbbackupdiag e hdbbackupcheck.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-159">There are two SAP HANA tools that help toocheck which backup can be used for restore: hdbbackupdiag and hdbbackupcheck.</span></span> <span data-ttu-id="0f8f0-160">Consulte [Verificar manualmente se uma recuperação é possível](https://help.sap.com/saphelp_hanaplatform/helpdata/en/77/522ef1e3cb4d799bab33e0aeb9c93b/content.htm) para obter mais informações sobre essas ferramentas.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-160">See [Manually Checking Whether a Recovery is Possible](https://help.sap.com/saphelp_hanaplatform/helpdata/en/77/522ef1e3cb4d799bab33e0aeb9c93b/content.htm) for more information about these tools.</span></span>

### <a name="pros-and-cons-of-hana-backup-versus-storage-snapshot"></a><span data-ttu-id="0f8f0-161">Prós e contras do backup do HANA versus instantâneo do armazenamento</span><span class="sxs-lookup"><span data-stu-id="0f8f0-161">Pros and cons of HANA backup versus storage snapshot</span></span>

<span data-ttu-id="0f8f0-162">SAP & #39 t dê preferência tooeither HANA backup; em vez de instantâneo de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-162">SAP doesn&#39;t give preference tooeither HANA backup versus storage snapshot.</span></span> <span data-ttu-id="0f8f0-163">Ela lista seus prós e contras, para que um possa determinar qual toouse dependendo da situação hello e tecnologia de armazenamento disponível (consulte [planejar sua estratégia de Backup e recuperação](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm)).</span><span class="sxs-lookup"><span data-stu-id="0f8f0-163">It lists their pros and cons, so one can determine which toouse depending on hello situation and available storage technology (see [Planning Your Backup and Recovery Strategy](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm)).</span></span>

<span data-ttu-id="0f8f0-164">No Azure, esteja atento ao fato de Olá Olá não de recurso de instantâneo de blob do Azure &#39; t para garantir a consistência do sistema de arquivo (consulte [usando instantâneos de blob com o PowerShell](https://blogs.msdn.microsoft.com/cie/2016/05/17/using-blob-snapshots-with-powershell/)).</span><span class="sxs-lookup"><span data-stu-id="0f8f0-164">On Azure, be aware of hello fact that hello Azure blob snapshot feature doesn&#39;t guarantee file system consistency (see [Using blob snapshots with PowerShell](https://blogs.msdn.microsoft.com/cie/2016/05/17/using-blob-snapshots-with-powershell/)).</span></span> <span data-ttu-id="0f8f0-165">Olá a próxima seção, _consistência de dados SAP HANA ao armazenamento de instantâneos_, aborda algumas considerações sobre esse recurso.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-165">hello next section, _SAP HANA data consistency when taking storage snapshots_, discusses some considerations regarding this feature.</span></span>

<span data-ttu-id="0f8f0-166">Além disso, uma tem toounderstand Olá implicações de cobranças ao trabalhar com instantâneos de blob frequentemente conforme descrito neste artigo: [Noções básicas sobre como os instantâneos acumulam cobranças](/rest/api/storageservices/understanding-how-snapshots-accrue-charges)— ela nem &#39; t tão óbvia como usar o Azure discos virtuais.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-166">In addition, one has toounderstand hello billing implications when working frequently with blob snapshots as described in this article: [Understanding How Snapshots Accrue Charges](/rest/api/storageservices/understanding-how-snapshots-accrue-charges)—it isn&#39;t as obvious as using Azure virtual disks.</span></span>

### <a name="sap-hana-data-consistency-when-taking-storage-snapshots"></a><span data-ttu-id="0f8f0-167">Consistência de dados do SAP HANA ao realizar instantâneos de armazenamento</span><span class="sxs-lookup"><span data-stu-id="0f8f0-167">SAP HANA data consistency when taking storage snapshots</span></span>

<span data-ttu-id="0f8f0-168">A consistência de aplicativos e do sistema de arquivos é um problema complexo quando ao realizar instantâneos de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-168">File system and application consistency is a complex issue when taking storage snapshots.</span></span> <span data-ttu-id="0f8f0-169">problemas de tooavoid de maneira mais fácil Olá ser tooshut para baixo do SAP HANA ou talvez até mesmo a máquina virtual inteira de saudação.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-169">hello easiest way tooavoid problems would be tooshut down SAP HANA, or maybe even hello whole virtual machine.</span></span> <span data-ttu-id="0f8f0-170">Um desligamento pode ser viável com uma demonstração ou protótipo ou até mesmo como um sistema de desenvolvimento, mas não é uma opção para um sistema de produção.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-170">A shutdown might be doable with a demo or prototype, or even a development system, but it is not an option for a production system.</span></span>

<span data-ttu-id="0f8f0-171">No Azure, um tem tookeep em mente que Olá não de recurso de instantâneo de blob do Azure &#39; t para garantir a consistência do sistema de arquivos.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-171">On Azure, one has tookeep in mind that hello Azure blob snapshot feature doesn&#39;t guarantee file system consistency.</span></span> <span data-ttu-id="0f8f0-172">Ele funciona bem no entanto, usando Olá SAP HANA instantâneo recurso, como apenas um único disco virtual está envolvido.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-172">It works fine however by using hello SAP HANA snapshot feature, as long as there is only a single virtual disk involved.</span></span> <span data-ttu-id="0f8f0-173">Mas mesmo com um único disco, itens adicionais toobe marcada.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-173">But even with a single disk, additional items have toobe checked.</span></span> <span data-ttu-id="0f8f0-174">A [Observação 2039883 do SAP](https://launchpad.support.sap.com/#/notes/2039883) possui informações importantes sobre backups do SAP HANA por meio de instantâneos de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-174">[SAP Note 2039883](https://launchpad.support.sap.com/#/notes/2039883) has important information about SAP HANA backups via storage snapshots.</span></span> <span data-ttu-id="0f8f0-175">Por exemplo, menciona que, com o sistema de arquivos XFS Olá, é necessário toorun **xfs\_congelar** antes de iniciar um armazenamento de instantâneo de consistência tooguarantee (consulte [xfs\_freeze(8) - man do Linux página](https://linux.die.net/man/8/xfs_freeze) para obter detalhes sobre **xfs\_congelar**).</span><span class="sxs-lookup"><span data-stu-id="0f8f0-175">For example, it mentions that, with hello XFS file system, it is necessary toorun **xfs\_freeze** before starting a storage snapshot tooguarantee consistency (see [xfs\_freeze(8) - Linux man page](https://linux.die.net/man/8/xfs_freeze) for details on **xfs\_freeze**).</span></span>

<span data-ttu-id="0f8f0-176">tópico de saudação de consistência se torna ainda mais desafiador em um caso em que um único sistema de arquivos se estender por vários discos/volumes.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-176">hello topic of consistency becomes even more challenging in a case where a single file system spans multiple disks/volumes.</span></span> <span data-ttu-id="0f8f0-177">Por exemplo, ao usar mdadm ou LVM e distribuição.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-177">For example, by using mdadm or LVM and striping.</span></span> <span data-ttu-id="0f8f0-178">Olá nota da SAP mencionados acima estados:</span><span class="sxs-lookup"><span data-stu-id="0f8f0-178">hello SAP Note mentioned above states:</span></span>

<span data-ttu-id="0f8f0-179">_&quot;Mas tenha em mente que o sistema de armazenamento de saudação terá consistência tooguarantee e/s ao criar um instantâneo de armazenamento por volume de dados do SAP HANA, ou seja, o instantâneo de um volume de dados específico ao serviço do SAP HANA deve ser uma operação atômica.&quot;_</span><span class="sxs-lookup"><span data-stu-id="0f8f0-179">_&quot;But keep in mind that hello storage system has tooguarantee I/O consistency while creating a storage snapshot per SAP HANA data volume, i.e. snapshotting of an SAP HANA service-specific data volume must be an atomic operation.&quot;_</span></span>

<span data-ttu-id="0f8f0-180">Supondo que não há um sistema de arquivos XFS abrangência quatro discos virtuais do Azure, hello etapas a seguir fornecem um instantâneo consistente que representa a área de dados do HANA hello:</span><span class="sxs-lookup"><span data-stu-id="0f8f0-180">Assuming there is an XFS file system spanning four Azure virtual disks, hello following steps provide a consistent snapshot that represents hello HANA data area:</span></span>

- <span data-ttu-id="0f8f0-181">Preparação do instantâneo do HANA</span><span class="sxs-lookup"><span data-stu-id="0f8f0-181">HANA snapshot prepare</span></span>
- <span data-ttu-id="0f8f0-182">Congelar o sistema de arquivos da saudação (por exemplo, use **xfs\_congelar**)</span><span class="sxs-lookup"><span data-stu-id="0f8f0-182">Freeze hello file system (for example, use **xfs\_freeze**)</span></span>
- <span data-ttu-id="0f8f0-183">Crie todos os instantâneos de blob necessários no Azure</span><span class="sxs-lookup"><span data-stu-id="0f8f0-183">Create all necessary blob snapshots on Azure</span></span>
- <span data-ttu-id="0f8f0-184">Descongelar o sistema de arquivos de saudação</span><span class="sxs-lookup"><span data-stu-id="0f8f0-184">Unfreeze hello file system</span></span>
- <span data-ttu-id="0f8f0-185">Confirme o instantâneo do HANA Olá</span><span class="sxs-lookup"><span data-stu-id="0f8f0-185">Confirm hello HANA snapshot</span></span>

<span data-ttu-id="0f8f0-186">Recomendação é toouse Olá procedimento acima toobe de todos os casos no lado seguro hello, não importa qual sistema de arquivos.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-186">Recommendation is toouse hello procedure above in all cases toobe on hello safe side, no matter which file system.</span></span> <span data-ttu-id="0f8f0-187">Ou, se for um disco único ou distribuição, via mdadm ou LVM em vários discos.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-187">Or if it is a single disk or striping, via mdadm or LVM across multiple disks.</span></span>

<span data-ttu-id="0f8f0-188">Ele é importante tooconfirm Olá HANA instantâneo.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-188">It is important tooconfirm hello HANA snapshot.</span></span> <span data-ttu-id="0f8f0-189">Vencimento toohello &quot;Copy-on-Write,&quot; SAP HANA podem não exigir espaço em disco adicional enquanto neste modo de preparação de instantâneo.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-189">Due toohello &quot;Copy-on-Write,&quot; SAP HANA might not require additional disk space while in this snapshot-prepare mode.</span></span> <span data-ttu-id="0f8f0-190">&#39; s também não é possível toostart novos backups até que o instantâneo do SAP HANA Olá for confirmado.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-190">It&#39;s also not possible toostart new backups until hello SAP HANA snapshot is confirmed.</span></span>

<span data-ttu-id="0f8f0-191">Serviço de Backup do Azure usa tootake de extensões de VM do Azure respeito a consistência do sistema de arquivo hello.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-191">Azure Backup service uses Azure VM extensions tootake care of hello file system consistency.</span></span> <span data-ttu-id="0f8f0-192">Essas extensões de VM não estão disponíveis para uso independente.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-192">These VM extensions are not available for standalone usage.</span></span> <span data-ttu-id="0f8f0-193">Ainda assim é toomanage consistência de SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-193">One still has toomanage SAP HANA consistency.</span></span> <span data-ttu-id="0f8f0-194">Consulte o artigo relacionado Olá [SAP HANA Azure Backup em nível de arquivo](sap-hana-backup-file-level.md) para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-194">See hello related article [SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md) for more information.</span></span>

### <a name="sap-hana-backup-scheduling-strategy"></a><span data-ttu-id="0f8f0-195">Estratégia de agendamento de backup do SAP HANA</span><span class="sxs-lookup"><span data-stu-id="0f8f0-195">SAP HANA backup scheduling strategy</span></span>

<span data-ttu-id="0f8f0-196">artigo do SAP HANA Olá [planejar sua estratégia de Backup e recuperação](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm) estados a basic planejar toodo backups:</span><span class="sxs-lookup"><span data-stu-id="0f8f0-196">hello SAP HANA article [Planning Your Backup and Recovery Strategy](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm) states a basic plan toodo backups:</span></span>

- <span data-ttu-id="0f8f0-197">Realize um instantâneo do armazenamento (diariamente)</span><span class="sxs-lookup"><span data-stu-id="0f8f0-197">Storage snapshot (daily)</span></span>
- <span data-ttu-id="0f8f0-198">Faça um backup completo de dados usando o arquivo ou formato bacint (uma vez por semana)</span><span class="sxs-lookup"><span data-stu-id="0f8f0-198">Complete data backup using file or bacint format (once a week)</span></span>
- <span data-ttu-id="0f8f0-199">Backups de log automático</span><span class="sxs-lookup"><span data-stu-id="0f8f0-199">Automatic log backups</span></span>

<span data-ttu-id="0f8f0-200">Opcionalmente, é possível não realizar nenhum instantâneo de armazenamento; eles podem ser substituídos por backups de delta do HANA, como backups incrementais ou diferenciais (consulte [Backups Delta](https://help.sap.com/saphelp_hanaplatform/helpdata/en/c3/bb7e33bb571014a03eeabba4e37541/content.htm)).</span><span class="sxs-lookup"><span data-stu-id="0f8f0-200">Optionally, one could go completely without storage snapshots; they could be replaced by HANA delta backups, like incremental or differential backups (see [Delta Backups](https://help.sap.com/saphelp_hanaplatform/helpdata/en/c3/bb7e33bb571014a03eeabba4e37541/content.htm)).</span></span>

<span data-ttu-id="0f8f0-201">Guia de administração do HANA Olá fornece uma lista de exemplos.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-201">hello HANA Administration guide provides an example list.</span></span> <span data-ttu-id="0f8f0-202">Sugere que um ponto de recuperação SAP HANA tooa específico usando Olá sequência de backups a seguir:</span><span class="sxs-lookup"><span data-stu-id="0f8f0-202">It suggests that one recover SAP HANA tooa specific point in time using hello following sequence of backups:</span></span>

1. <span data-ttu-id="0f8f0-203">Backup de dados completo</span><span class="sxs-lookup"><span data-stu-id="0f8f0-203">Full data backup</span></span>
2. <span data-ttu-id="0f8f0-204">Backup diferencial</span><span class="sxs-lookup"><span data-stu-id="0f8f0-204">Differential backup</span></span>
3. <span data-ttu-id="0f8f0-205">Backup incremental 1</span><span class="sxs-lookup"><span data-stu-id="0f8f0-205">Incremental backup 1</span></span>
4. <span data-ttu-id="0f8f0-206">Backup incremental 2</span><span class="sxs-lookup"><span data-stu-id="0f8f0-206">Incremental backup 2</span></span>
5. <span data-ttu-id="0f8f0-207">Backups de log</span><span class="sxs-lookup"><span data-stu-id="0f8f0-207">Log backups</span></span>

<span data-ttu-id="0f8f0-208">Sobre uma agenda exata como toowhen e a frequência com que um tipo específico de backup deve ocorrer, não é possível toogive uma diretriz geral, é muito específicas do cliente e depende de quantas alterações de dados ocorrerem no sistema de saudação.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-208">Regarding an exact schedule as toowhen and how often a specific backup type should happen, it is not possible toogive a general guideline—it is too customer-specific, and depends on how many data changes occur in hello system.</span></span> <span data-ttu-id="0f8f0-209">Uma recomendação básico do lado do SAP, que pode ser visto como orientação geral, é um backup HANA completo toomake uma vez por semana.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-209">One basic recommendation from SAP side, which can be seen as general guidance, is toomake one full HANA backup once a week.</span></span>
<span data-ttu-id="0f8f0-210">Sobre backups de log, consulte a documentação do SAP HANA Olá [Backups de Log](https://help.sap.com/saphelp_hanaplatform/helpdata/en/c3/bb7e33bb571014a03eeabba4e37541/content.htm).</span><span class="sxs-lookup"><span data-stu-id="0f8f0-210">Regarding log backups, see hello SAP HANA documentation [Log Backups](https://help.sap.com/saphelp_hanaplatform/helpdata/en/c3/bb7e33bb571014a03eeabba4e37541/content.htm).</span></span>

<span data-ttu-id="0f8f0-211">SAP também recomenda a limpeza de saudação catálogo de backup tookeep ele cresça infinitamente (consulte [de limpeza para o catálogo de Backup e armazenamento de Backup](http://help.sap.com/saphelp_hanaplatform/helpdata/en/ca/c903c28b0e4301b39814ef41dbf568/content.htm)).</span><span class="sxs-lookup"><span data-stu-id="0f8f0-211">SAP also recommends doing some housekeeping of hello backup catalog tookeep it from growing infinitely (see [Housekeeping for Backup Catalog and Backup Storage](http://help.sap.com/saphelp_hanaplatform/helpdata/en/ca/c903c28b0e4301b39814ef41dbf568/content.htm)).</span></span>

### <a name="sap-hana-configuration-files"></a><span data-ttu-id="0f8f0-212">Arquivos de configuração do SAP HANA</span><span class="sxs-lookup"><span data-stu-id="0f8f0-212">SAP HANA configuration files</span></span>

<span data-ttu-id="0f8f0-213">Conforme indicado na hello mais frequentes [SAP Observação 1642148](https://launchpad.support.sap.com/#/notes/1642148), arquivos de configuração do SAP HANA Olá não fazem parte de um backup do HANA padrão.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-213">As stated in hello FAQ in [SAP Note 1642148](https://launchpad.support.sap.com/#/notes/1642148), hello SAP HANA configuration files are not part of a standard HANA backup.</span></span> <span data-ttu-id="0f8f0-214">Eles não são essencial toorestore um sistema.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-214">They are not essential toorestore a system.</span></span> <span data-ttu-id="0f8f0-215">configuração do HANA Olá pode ser alterada manualmente após a restauração de saudação.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-215">hello HANA configuration could be changed manually after hello restore.</span></span> <span data-ttu-id="0f8f0-216">No caso de você desejar tooget Olá a mesma configuração personalizada durante o processo de restauração Olá, é necessário tooback backup de arquivos de configuração do HANA Olá separadamente.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-216">In case one would like tooget hello same custom configuration during hello restore process, it is necessary tooback up hello HANA configuration files separately.</span></span>

<span data-ttu-id="0f8f0-217">Se backups HANA padrão tooa dedicado de sistema de arquivos de backup do HANA, um também pode copiar Olá toohello de arquivos de configuração mesmo sistema de arquivos de backup e, em seguida, copiar tudo como o destino final de armazenamento de toohello juntos interessantes armazenamento de blob.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-217">If standard HANA backups are going tooa dedicated HANA backup file system, one could also copy hello configuration files toohello same backup filesystem, and then copy everything together toohello final storage destination like cool blob storage.</span></span>

### <a name="sap-hana-cockpit"></a><span data-ttu-id="0f8f0-218">Ferramenta Cockpit do SAP HANA</span><span class="sxs-lookup"><span data-stu-id="0f8f0-218">SAP HANA Cockpit</span></span>

<span data-ttu-id="0f8f0-219">SAP HANA Cockpit oferece a possibilidade de saudação do monitoramento e gerenciamento do SAP HANA por meio de um navegador.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-219">SAP HANA Cockpit offers hello possibility of monitoring and managing SAP HANA via a browser.</span></span> <span data-ttu-id="0f8f0-220">Ele também permite a manipulação de backups do SAP HANA e, portanto, pode ser usado como uma alternativa tooSAP Studio HANA e ABAP DBACOCKPIT (consulte [SAP HANA Cockpit](https://help.sap.com/saphelp_hanaplatform/helpdata/en/73/c37822444344f3973e0e976b77958e/content.htm) para obter mais informações).</span><span class="sxs-lookup"><span data-stu-id="0f8f0-220">It also allows handling of SAP HANA backups, and therefore can be used as an alternative tooSAP HANA Studio and ABAP DBACOCKPIT (see [SAP HANA Cockpit](https://help.sap.com/saphelp_hanaplatform/helpdata/en/73/c37822444344f3973e0e976b77958e/content.htm) for more information).</span></span>

![Esta figura mostra Olá tela de administração de banco de dados do SAP HANA Cockpit](media/sap-hana-backup-guide/image004.png)

<span data-ttu-id="0f8f0-222">Esta figura mostra Olá tela de administração de banco de dados do SAP HANA Cockpit e bloco backup Olá Olá à esquerda.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-222">This figure shows hello SAP HANA Cockpit Database Administration Screen, and hello backup tile on hello left.</span></span> <span data-ttu-id="0f8f0-223">Bloco de backup Olá vendo requer permissões de usuário apropriado para a conta de logon.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-223">Seeing hello backup tile requires appropriate user permissions for login account.</span></span>

![Os backups podem ser monitorados na Ferramenta Cockpit do SAP HANA enquanto eles estiverem em andamento](media/sap-hana-backup-guide/image005.png)

<span data-ttu-id="0f8f0-225">Os backups podem ser monitorados na ferramenta cockpit da SAP HANA enquanto estiverem em andamento e, depois que ele for concluído, todos os detalhes de backup Olá estão disponíveis.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-225">Backups can be monitored in SAP HANA Cockpit while they are ongoing and, once it is finished, all hello backup details are available.</span></span>

![Um exemplo usando o Firefox em uma VM do Azure SLES 12 com área de trabalho Gnome](media/sap-hana-backup-guide/image006.png)

<span data-ttu-id="0f8f0-227">Olá capturas de tela anteriores foram feitas a uma VM do Windows Azure.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-227">hello previous screenshots were made from an Azure Windows VM.</span></span> <span data-ttu-id="0f8f0-228">Esse é um exemplo usando o Firefox em uma VM do Azure SLES 12 com área de trabalho Gnome</span><span class="sxs-lookup"><span data-stu-id="0f8f0-228">This one is an example using Firefox on an Azure SLES 12 VM with Gnome desktop.</span></span> <span data-ttu-id="0f8f0-229">Ele mostra os agendamentos de backup do hello opção toodefine SAP HANA na ferramenta cockpit da SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-229">It shows hello option toodefine SAP HANA backup schedules in SAP HANA Cockpit.</span></span> <span data-ttu-id="0f8f0-230">Como um também pode ver, sugere data/hora como um prefixo Olá dos arquivos de backup.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-230">As one can also see, it suggests date/time as a prefix for hello backup files.</span></span> <span data-ttu-id="0f8f0-231">No Studio do HANA SAP, o prefixo de padrão de saudação é &quot;concluir\_dados\_BACKUP&quot; ao fazer um backup de arquivo completo.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-231">In SAP HANA Studio, hello default prefix is &quot;COMPLETE\_DATA\_BACKUP&quot; when doing a full file backup.</span></span> <span data-ttu-id="0f8f0-232">É recomendável usar um prefixo exclusivo.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-232">Using a unique prefix is recommended.</span></span>

### <a name="sap-hana-backup-encryption"></a><span data-ttu-id="0f8f0-233">Criptografia de backup do SAP HANA</span><span class="sxs-lookup"><span data-stu-id="0f8f0-233">SAP HANA backup encryption</span></span>

<span data-ttu-id="0f8f0-234">O SAP HANA oferece criptografia de dados e de log.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-234">SAP HANA offers encryption of data and log.</span></span> <span data-ttu-id="0f8f0-235">Se o log e dados do SAP HANA não são criptografados, em seguida, backups Olá também não são criptografados.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-235">If SAP HANA data and log are not encrypted, then hello backups are also not encrypted.</span></span> <span data-ttu-id="0f8f0-236">É o toohello cliente toouse alguma forma de backups do solução de terceiros tooencrypt Olá SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-236">It is up toohello customer toouse some form of third-party solution tooencrypt hello SAP HANA backups.</span></span> <span data-ttu-id="0f8f0-237">Consulte [dados e a criptografia de Volume de Log](https://help.sap.com/saphelp_hanaplatform/helpdata/en/dc/01f36fbb5710148b668201a6e95cf2/content.htm) toofind mais informações sobre a criptografia do SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-237">See [Data and Log Volume Encryption](https://help.sap.com/saphelp_hanaplatform/helpdata/en/dc/01f36fbb5710148b668201a6e95cf2/content.htm) toofind out more about SAP HANA encryption.</span></span>

<span data-ttu-id="0f8f0-238">No Microsoft Azure, um cliente pode usar Olá IaaS VM tooencrypt de recurso de criptografia.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-238">On Microsoft Azure, a customer could use hello IaaS VM encryption feature tooencrypt.</span></span> <span data-ttu-id="0f8f0-239">Por exemplo, um pode usar dados dedicados de discos anexados toohello VM, que são usado toostore backups do SAP HANA, fazer cópias desses discos.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-239">For example, one could use dedicated data disks attached toohello VM, which are used toostore SAP HANA backups, then make copies of these disks.</span></span>

<span data-ttu-id="0f8f0-240">Serviço de Backup do Azure pode lidar com VMs/discos criptografados (consulte [como tooback backup e restauração criptografada máquinas virtuais com o Azure Backup](../../../backup/backup-azure-vms-encryption.md)).</span><span class="sxs-lookup"><span data-stu-id="0f8f0-240">Azure Backup service can handle encrypted VMs/disks (see [How tooback up and restore encrypted virtual machines with Azure Backup](../../../backup/backup-azure-vms-encryption.md)).</span></span>

<span data-ttu-id="0f8f0-241">Outra opção seria toomaintain Olá SAP HANA VM e seus discos sem criptografia e armazenar arquivos de backup Olá SAP HANA em uma conta de armazenamento para o qual a criptografia foi habilitada (consulte [criptografia de serviço de armazenamento do Azure para dados em repouso](../../../storage/common/storage-service-encryption.md)) .</span><span class="sxs-lookup"><span data-stu-id="0f8f0-241">Another option would be toomaintain hello SAP HANA VM and its disks without encryption, and store hello SAP HANA backup files in a storage account for which encryption was enabled (see [Azure Storage Service Encryption for Data at Rest](../../../storage/common/storage-service-encryption.md)).</span></span>

## <a name="test-setup"></a><span data-ttu-id="0f8f0-242">Configuração de teste</span><span class="sxs-lookup"><span data-stu-id="0f8f0-242">Test setup</span></span>

### <a name="test-virtual-machine-on-azure"></a><span data-ttu-id="0f8f0-243">Teste da máquina virtual no Azure</span><span class="sxs-lookup"><span data-stu-id="0f8f0-243">Test Virtual Machine on Azure</span></span>

<span data-ttu-id="0f8f0-244">Uma instalação do SAP HANA em uma VM do Azure GS5 foi usada para Olá testes de backup/restauração a seguir.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-244">An SAP HANA installation in an Azure GS5 VM was used for hello following backup/restore tests.</span></span>

![Esta figura mostra a parte da saudação visão geral do portal do Azure para a VM de teste HANA Olá](media/sap-hana-backup-guide/image007.png)

<span data-ttu-id="0f8f0-246">Esta figura mostra a parte da saudação visão geral do portal do Azure para a VM de teste HANA hello.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-246">This figure shows part of hello Azure portal overview for hello HANA test VM.</span></span>

### <a name="test-backup-size"></a><span data-ttu-id="0f8f0-247">Teste do tamanho do backup</span><span class="sxs-lookup"><span data-stu-id="0f8f0-247">Test backup size</span></span>

![Esta figura foi retirada do console de backup Olá no Studio HANA e mostra o tamanho do arquivo de backup Olá 229 GB para o servidor de índice do HANA Olá](media/sap-hana-backup-guide/image008.png)

<span data-ttu-id="0f8f0-249">Uma tabela fictícia foi preenchida com dados tooget um tamanho total dos dados de backup mais de 200 GB tooderive realista de dados de desempenho.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-249">A dummy table was filled up with data tooget a total data backup size of over 200 GB tooderive realistic performance data.</span></span> <span data-ttu-id="0f8f0-250">Figura Olá foi retirada do console de backup Olá no Studio HANA e mostra o tamanho do arquivo de backup Olá 229 GB para o servidor de índice do HANA hello.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-250">hello figure was taken from hello backup console in HANA Studio and shows hello backup file size of 229 GB for hello HANA index server.</span></span> <span data-ttu-id="0f8f0-251">Para testes de hello, o prefixo "COMPLETE_DATA_BACKUP" no SAP HANA Studio do backup de padrão de saudação foi usado.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-251">For hello tests, hello default backup prefix "COMPLETE_DATA_BACKUP" in SAP HANA Studio was used.</span></span> <span data-ttu-id="0f8f0-252">Em sistemas de produção real, um prefixo mais útil deve ser definido.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-252">In real production systems, a more useful prefix should be defined.</span></span> <span data-ttu-id="0f8f0-253">A Ferramenta Cockpit da SAP HANA sugere a data/hora.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-253">SAP HANA Cockpit suggests date/time.</span></span>

### <a name="test-tool-toocopy-files-directly-tooazure-storage"></a><span data-ttu-id="0f8f0-254">Toocopy da ferramenta de teste diretamente arquivos tooAzure armazenamento</span><span class="sxs-lookup"><span data-stu-id="0f8f0-254">Test tool toocopy files directly tooAzure storage</span></span>

<span data-ttu-id="0f8f0-255">arquivos de backup SAP HANA de tootransfer ferramenta de blobxfer de saudação diretamente o armazenamento de blob tooAzure ou compartilhamentos de arquivos do Azure, foi usada porque ele oferece suporte a destinos e ele podem ser facilmente integrados em scripts de automação de interface de linha de comando tooits de conclusão.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-255">tootransfer SAP HANA backup files directly tooAzure blob storage, or Azure file shares, hello blobxfer tool was used because it supports both targets and it can be easily integrated into automation scripts due tooits command-line interface.</span></span> <span data-ttu-id="0f8f0-256">Olá blobxfer ferramenta está disponível em [GitHub](https://github.com/Azure/blobxfer).</span><span class="sxs-lookup"><span data-stu-id="0f8f0-256">hello blobxfer tool is available on [GitHub](https://github.com/Azure/blobxfer).</span></span>

### <a name="test-backup-size-estimation"></a><span data-ttu-id="0f8f0-257">Teste a estimativa de tamanho do backup</span><span class="sxs-lookup"><span data-stu-id="0f8f0-257">Test backup size estimation</span></span>

<span data-ttu-id="0f8f0-258">É importante tooestimate tamanho do backup saudação do SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-258">It is important tooestimate hello backup size of SAP HANA.</span></span> <span data-ttu-id="0f8f0-259">Essa estimativa ajuda tooimprove desempenho definindo o tamanho de arquivo máximo de backup Olá para um número de arquivos de backup, vencimento tooparallelism durante a cópia de um arquivo.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-259">This estimate helps tooimprove performance by defining hello max backup file size for a number of backup files, due tooparallelism during a file copy.</span></span> <span data-ttu-id="0f8f0-260">(Esses detalhes são explicados mais adiante neste artigo.) Você também deve decidir se toodo completo de backup ou um delta de backup (incremental ou diferencial).</span><span class="sxs-lookup"><span data-stu-id="0f8f0-260">(Those details are explained later in this article.) One must also decide whether toodo a full backup or a delta backup (incremental or differential).</span></span>

<span data-ttu-id="0f8f0-261">Felizmente, há uma instrução SQL simples que calcula o tamanho de Olá Olá dos arquivos de backup: **selecione \* de M\_BACKUP\_tamanho\_estimativas** (consulte [ Saudação de estimativa espaço necessário no hello sistema de arquivos para um Backup de dados](https://help.sap.com/saphelp_hanaplatform/helpdata/en/7d/46337b7a9c4c708d965b65bc0f343c/content.htm)).</span><span class="sxs-lookup"><span data-stu-id="0f8f0-261">Fortunately, there is a simple SQL statement that estimates hello size of hello backup files: **select \* from M\_BACKUP\_SIZE\_ESTIMATIONS** (see [Estimate hello Space Needed in hello File System for a Data Backup](https://help.sap.com/saphelp_hanaplatform/helpdata/en/7d/46337b7a9c4c708d965b65bc0f343c/content.htm)).</span></span>

![saída de Hello dessa instrução SQL corresponde quase Olá tamanho real do backup de dados completo Olá no disco](media/sap-hana-backup-guide/image009.png)

<span data-ttu-id="0f8f0-263">Para o sistema de teste hello, a saída de hello dessa instrução SQL corresponde quase Olá tamanho real do backup de dados completo Olá no disco.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-263">For hello test system, hello output of this SQL statement matches almost exactly hello real size of hello full data backup on disk.</span></span>

### <a name="test-hana-backup-file-size"></a><span data-ttu-id="0f8f0-264">Teste o tamanho do arquivo de backup do HANA</span><span class="sxs-lookup"><span data-stu-id="0f8f0-264">Test HANA backup file size</span></span>

![console de backup do Hello HANA Studio permite que um tamanho de arquivo máximo Olá toorestrict HANA dos arquivos de backup](media/sap-hana-backup-guide/image010.png)

<span data-ttu-id="0f8f0-266">console backup do HANA Studio Olá permite que um tamanho de arquivo máximo Olá toorestrict HANA dos arquivos de backup.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-266">hello HANA Studio backup console allows one toorestrict hello max file size of HANA backup files.</span></span> <span data-ttu-id="0f8f0-267">No ambiente do exemplo hello, esse recurso torna possível tooget backup menor vários arquivos em vez de um arquivo de backup de 230-GB.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-267">In hello sample environment, that feature makes it possible tooget multiple smaller backup files instead of one 230-GB backup file.</span></span> <span data-ttu-id="0f8f0-268">Menor tamanho do arquivo tem um impacto significativo no desempenho (consulte o artigo relacionado Olá [SAP HANA Azure Backup em nível de arquivo](sap-hana-backup-file-level.md)).</span><span class="sxs-lookup"><span data-stu-id="0f8f0-268">Smaller file size has a significant impact on performance (see hello related article [SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md)).</span></span>

## <a name="summary"></a><span data-ttu-id="0f8f0-269">Resumo</span><span class="sxs-lookup"><span data-stu-id="0f8f0-269">Summary</span></span>

<span data-ttu-id="0f8f0-270">Com base nos resultados de teste de Olá Olá tabelas a seguir mostra os prós e contras das soluções tooback backup de um banco de dados do SAP HANA em execução em máquinas virtuais do Azure.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-270">Based on hello test results hello following tables show pros and cons of solutions tooback up an SAP HANA database running on Azure virtual machines.</span></span>

<span data-ttu-id="0f8f0-271">**Fazer backup de cópia e sistema de arquivos do SAP HANA toohello arquivos de backup depois toohello destino de backup final**</span><span class="sxs-lookup"><span data-stu-id="0f8f0-271">**Back up SAP HANA toohello file system and copy backup files afterwards toohello final backup destination**</span></span>

|<span data-ttu-id="0f8f0-272">Solução</span><span class="sxs-lookup"><span data-stu-id="0f8f0-272">Solution</span></span>                                           |<span data-ttu-id="0f8f0-273">Prós</span><span class="sxs-lookup"><span data-stu-id="0f8f0-273">Pros</span></span>                                 |<span data-ttu-id="0f8f0-274">Contras</span><span class="sxs-lookup"><span data-stu-id="0f8f0-274">Cons</span></span>                                  |
|---------------------------------------------------|-------------------------------------|--------------------------------------|
|<span data-ttu-id="0f8f0-275">Mantém os backups do HANA em discos de VM</span><span class="sxs-lookup"><span data-stu-id="0f8f0-275">Keep HANA backups on VM disks</span></span>                      |<span data-ttu-id="0f8f0-276">Nenhum trabalho de gerenciamento adicional</span><span class="sxs-lookup"><span data-stu-id="0f8f0-276">No additional management efforts</span></span>     |<span data-ttu-id="0f8f0-277">Consome espaço em disco da VM local</span><span class="sxs-lookup"><span data-stu-id="0f8f0-277">Eats up local VM disk space</span></span>           |
|<span data-ttu-id="0f8f0-278">Armazenamento de tooblob Blobxfer ferramenta toocopy arquivos de backup</span><span class="sxs-lookup"><span data-stu-id="0f8f0-278">Blobxfer tool toocopy backup files tooblob storage</span></span> |<span data-ttu-id="0f8f0-279">Paralelismo toocopy vários arquivos, armazenamento de blob moderado toouse opção</span><span class="sxs-lookup"><span data-stu-id="0f8f0-279">Parallelism toocopy multiple files, choice toouse cool blob storage</span></span> | <span data-ttu-id="0f8f0-280">Manutenção de ferramenta adicional e scripts personalizados</span><span class="sxs-lookup"><span data-stu-id="0f8f0-280">Additional tool maintenance and custom scripting</span></span> | 
|<span data-ttu-id="0f8f0-281">Cópia de blob por meio do Powershell ou CLI</span><span class="sxs-lookup"><span data-stu-id="0f8f0-281">Blob copy via Powershell or CLI</span></span>                    |<span data-ttu-id="0f8f0-282">Nenhuma ferramenta adicional necessária, pode ser realizada por meio do Azure Powershell ou CLI</span><span class="sxs-lookup"><span data-stu-id="0f8f0-282">No additional tool necessary, can be accomplished via Azure Powershell or CLI</span></span> |<span data-ttu-id="0f8f0-283">processo manual, o cliente tem tootake respeito scripts e gerenciamento de blobs copiados para restauração</span><span class="sxs-lookup"><span data-stu-id="0f8f0-283">manual process, customer has tootake care of scripting and management of copied blobs for restore</span></span>|
|<span data-ttu-id="0f8f0-284">Compartilhamento de cópia de tooNFS</span><span class="sxs-lookup"><span data-stu-id="0f8f0-284">Copy tooNFS share</span></span>                                  |<span data-ttu-id="0f8f0-285">Pós-processamento de arquivos de backup em outra VM sem impacto no servidor do HANA Olá</span><span class="sxs-lookup"><span data-stu-id="0f8f0-285">Post-processing of backup files on other VM without impact on hello HANA server</span></span>|<span data-ttu-id="0f8f0-286">Processo de cópia lento</span><span class="sxs-lookup"><span data-stu-id="0f8f0-286">Slow copy process</span></span>|
|<span data-ttu-id="0f8f0-287">Blobxfer cópia tooAzure serviço de arquivos</span><span class="sxs-lookup"><span data-stu-id="0f8f0-287">Blobxfer copy tooAzure File Service</span></span>                |<span data-ttu-id="0f8f0-288">Não consome espaço nos discos VM locais</span><span class="sxs-lookup"><span data-stu-id="0f8f0-288">Doesn't eat up space on local VM disks</span></span>|<span data-ttu-id="0f8f0-289">Sem suporte direto para gravação para backup do HANA, restrição de tamanho do compartilhamento de arquivos no momento em 5 TB</span><span class="sxs-lookup"><span data-stu-id="0f8f0-289">No direct write support by HANA backup, size restriction of file share currently at 5 TB</span></span>|
|<span data-ttu-id="0f8f0-290">Agente de Backup do Azure</span><span class="sxs-lookup"><span data-stu-id="0f8f0-290">Azure Backup Agent</span></span>                                 | <span data-ttu-id="0f8f0-291">Seria a melhor solução</span><span class="sxs-lookup"><span data-stu-id="0f8f0-291">Would be preferred solution</span></span>         | <span data-ttu-id="0f8f0-292">Não disponível no momento no Linux</span><span class="sxs-lookup"><span data-stu-id="0f8f0-292">Currently not available on Linux</span></span>    |



<span data-ttu-id="0f8f0-293">**Backup do SAP HANA baseado em instantâneos de armazenamento**</span><span class="sxs-lookup"><span data-stu-id="0f8f0-293">**Backup SAP HANA based on storage snapshots**</span></span>

|<span data-ttu-id="0f8f0-294">Solução</span><span class="sxs-lookup"><span data-stu-id="0f8f0-294">Solution</span></span>                                           |<span data-ttu-id="0f8f0-295">Prós</span><span class="sxs-lookup"><span data-stu-id="0f8f0-295">Pros</span></span>                                 |<span data-ttu-id="0f8f0-296">Contras</span><span class="sxs-lookup"><span data-stu-id="0f8f0-296">Cons</span></span>                                  |
|---------------------------------------------------|-------------------------------------|--------------------------------------|
|<span data-ttu-id="0f8f0-297">Serviço de Backup do Azure</span><span class="sxs-lookup"><span data-stu-id="0f8f0-297">Azure Backup Service</span></span>                               | <span data-ttu-id="0f8f0-298">Permite o backup da VM com base em instantâneos de blob</span><span class="sxs-lookup"><span data-stu-id="0f8f0-298">Allows VM backup based on blob snapshots</span></span> | <span data-ttu-id="0f8f0-299">Quando não usar a restauração no nível de arquivo, ele exige a criação de saudação de uma nova VM para o processo de restauração hello, o que implica, em seguida, a necessidade de saudação de uma nova chave de licença do SAP HANA</span><span class="sxs-lookup"><span data-stu-id="0f8f0-299">When not using file level restore, it requires hello creation of a new VM for hello restore process, which then implies hello need of a new SAP HANA license key</span></span>|
|<span data-ttu-id="0f8f0-300">Instantâneos de blob manual</span><span class="sxs-lookup"><span data-stu-id="0f8f0-300">Manual blob snapshots</span></span>                              | <span data-ttu-id="0f8f0-301">Flexibilidade toocreate e restauração específicos discos de VM sem alterar Olá ID exclusiva do VM</span><span class="sxs-lookup"><span data-stu-id="0f8f0-301">Flexibility toocreate and restore specific VM disks without changing hello unique VM ID</span></span>|<span data-ttu-id="0f8f0-302">Todo trabalho manual, que tem toobe feita pelo cliente Olá</span><span class="sxs-lookup"><span data-stu-id="0f8f0-302">All manual work, which has toobe done by hello customer</span></span>|

## <a name="next-steps"></a><span data-ttu-id="0f8f0-303">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="0f8f0-303">Next steps</span></span>
* <span data-ttu-id="0f8f0-304">[SAP HANA Azure Backup em nível de arquivo](sap-hana-backup-file-level.md) descreve a opção de backup baseado em arquivo hello.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-304">[SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md) describes hello file-based backup option.</span></span>
* <span data-ttu-id="0f8f0-305">[Backup do HANA SAP com base em instantâneos de armazenamento](sap-hana-backup-storage-snapshots.md) descreve Olá armazenamento baseado em instantâneo opção de backup.</span><span class="sxs-lookup"><span data-stu-id="0f8f0-305">[SAP HANA backup based on storage snapshots](sap-hana-backup-storage-snapshots.md) describes hello storage snapshot-based backup option.</span></span>
* <span data-ttu-id="0f8f0-306">toolearn como tooestablish alta disponibilidade e o plano de recuperação de desastres do HANA SAP no Azure (instâncias grandes), consulte [SAP HANA (instâncias grandes) alta disponibilidade e recuperação de desastres no Azure](hana-overview-high-availability-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="0f8f0-306">toolearn how tooestablish high availability and plan for disaster recovery of SAP HANA on Azure (large instances), see [SAP HANA (large instances) high availability and disaster recovery on Azure](hana-overview-high-availability-disaster-recovery.md).</span></span>
