---
title: Define aaaAvailability para VMs do Linux no Azure | Microsoft Docs
description: "Saiba mais sobre Olá design e implementação diretrizes importantes para a implantação de conjuntos de disponibilidade nos serviços de infraestrutura do Azure."
documentationcenter: 
services: virtual-machines-linux
author: iainfoulds
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 24f1d91c-8cc0-4251-bb67-ac4c4c37e8cd
ms.service: virtual-machines-linux
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 06/26/2017
ms.author: iainfou
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 78e4da5c8fd9eb186cafacb46454444b73a9439c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="azure-availability-sets-guidelines-for-linux-vms"></a><span data-ttu-id="746bf-103">Diretrizes de conjuntos de disponibilidade do Azure para VMs Linux</span><span class="sxs-lookup"><span data-stu-id="746bf-103">Azure availability sets guidelines for Linux VMs</span></span>

[!INCLUDE [virtual-machines-linux-infrastructure-guidelines-intro](../../../includes/virtual-machines-linux-infrastructure-guidelines-intro.md)]

<span data-ttu-id="746bf-104">Este artigo enfoca a compreensão Olá necessárias etapas de planejamento para conjuntos de disponibilidade tooensure seus aplicativos permanecem acessíveis durante eventos planejados ou não planejados.</span><span class="sxs-lookup"><span data-stu-id="746bf-104">This article focuses on understanding hello required planning steps for availability sets tooensure your applications remains accessible during planned or unplanned events.</span></span>

## <a name="implementation-guidelines-for-availability-sets"></a><span data-ttu-id="746bf-105">Diretrizes de implementação para conjuntos de disponibilidade</span><span class="sxs-lookup"><span data-stu-id="746bf-105">Implementation guidelines for availability sets</span></span>
<span data-ttu-id="746bf-106">Decisões:</span><span class="sxs-lookup"><span data-stu-id="746bf-106">Decisions:</span></span>

* <span data-ttu-id="746bf-107">Quantos conjuntos de disponibilidade você precisa para Olá várias camadas e funções em sua infraestrutura de aplicativo?</span><span class="sxs-lookup"><span data-stu-id="746bf-107">How many availability sets do you need for hello various roles and tiers in your application infrastructure?</span></span>

<span data-ttu-id="746bf-108">Tarefas:</span><span class="sxs-lookup"><span data-stu-id="746bf-108">Tasks:</span></span>

* <span data-ttu-id="746bf-109">Defina o número de saudação de VMs em cada camada de aplicativo que você precisa.</span><span class="sxs-lookup"><span data-stu-id="746bf-109">Define hello number of VMs in each application tier you require.</span></span>
* <span data-ttu-id="746bf-110">Determine se você precisa que o número de saudação do tooadjust de toobe domínios de falha ou atualização usado para o seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="746bf-110">Determine if you need tooadjust hello number of fault or update domains toobe used for your application.</span></span>
* <span data-ttu-id="746bf-111">Definir conjuntos de disponibilidade Olá necessárias usando a convenção de nomenclatura e quais máquinas virtuais residem neles.</span><span class="sxs-lookup"><span data-stu-id="746bf-111">Define hello required availability sets using your naming convention and what VMs reside in them.</span></span> <span data-ttu-id="746bf-112">Uma VM pode residir apenas em um conjunto de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="746bf-112">A VM can only reside in one availability set.</span></span> 

## <a name="availability-sets"></a><span data-ttu-id="746bf-113">Conjuntos de disponibilidade</span><span class="sxs-lookup"><span data-stu-id="746bf-113">Availability sets</span></span>
<span data-ttu-id="746bf-114">No Azure, máquinas virtuais (VMs) pode ser colocadas em um agrupamento lógico de tooa chamado de um conjunto de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="746bf-114">In Azure, virtual machines (VMs) can be placed in tooa logical grouping called an availability set.</span></span> <span data-ttu-id="746bf-115">Quando você criar máquinas virtuais dentro de um conjunto de disponibilidade, Olá plataforma Windows Azure distribui o posicionamento de saudação dessas VMs por Olá infra-estrutura subjacente.</span><span class="sxs-lookup"><span data-stu-id="746bf-115">When you create VMs within an availability set, hello Azure platform distributes hello placement of those VMs across hello underlying infrastructure.</span></span> <span data-ttu-id="746bf-116">Deve haver um hardware subjacente ou um evento de manutenção planejada toohello plataforma Windows Azure / falhas de infraestrutura, use Olá conjuntos de disponibilidade garante que pelo menos uma VM permanece em execução.</span><span class="sxs-lookup"><span data-stu-id="746bf-116">Should there be a planned maintenance event toohello Azure platform or an underlying hardware / infrastructure fault, hello use of availability sets ensures that at least one VM remains running.</span></span>

<span data-ttu-id="746bf-117">Como prática recomendada, os aplicativos não devem residir em uma única VM.</span><span class="sxs-lookup"><span data-stu-id="746bf-117">As a best practice, applications should not reside on a single VM.</span></span> <span data-ttu-id="746bf-118">Um conjunto de disponibilidade que contém uma única VM não obter proteção contra eventos planejados ou não planejados em Olá plataforma Windows Azure.</span><span class="sxs-lookup"><span data-stu-id="746bf-118">An availability set that contains a single VM doesn't gain any protection from planned or unplanned events within hello Azure platform.</span></span> <span data-ttu-id="746bf-119">Olá [SLA do Azure](https://azure.microsoft.com/support/legal/sla/virtual-machines) requer dois ou mais VMs dentro de uma disponibilidade conjunto tooallow Olá distribuição de VMs em Olá infra-estrutura subjacente.</span><span class="sxs-lookup"><span data-stu-id="746bf-119">hello [Azure SLA](https://azure.microsoft.com/support/legal/sla/virtual-machines) requires two or more VMs within an availability set tooallow hello distribution of VMs across hello underlying infrastructure.</span></span> <span data-ttu-id="746bf-120">Se você estiver usando [armazenamento Premium do Azure](../../storage/storage-premium-storage.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json), Olá SLA do Azure se aplica a tooa única VM.</span><span class="sxs-lookup"><span data-stu-id="746bf-120">If you are using [Azure Premium Storage](../../storage/storage-premium-storage.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json), hello Azure SLA applies tooa single VM.</span></span>

<span data-ttu-id="746bf-121">a infraestrutura subjacente Olá no Azure é dividida em clusters de hardware toomultiple.</span><span class="sxs-lookup"><span data-stu-id="746bf-121">hello underlying infrastructure in Azure is divided in toomultiple hardware clusters.</span></span> <span data-ttu-id="746bf-122">Cada cluster de hardware pode dar suporte a uma variedade de tamanhos de VM.</span><span class="sxs-lookup"><span data-stu-id="746bf-122">Each hardware cluster can support a range of VM sizes.</span></span> <span data-ttu-id="746bf-123">Um conjunto de disponibilidade só pode ser hospedado em um único cluster de hardware em qualquer ponto no tempo.</span><span class="sxs-lookup"><span data-stu-id="746bf-123">An availability set can only be hosted on a single hardware cluster at any point in time.</span></span> <span data-ttu-id="746bf-124">Portanto, os tamanhos de intervalo de VM Olá que podem existir em um único conjunto de disponibilidade é limitado toohello tamanhos de intervalo de VM suportados por cluster de hardware de saudação.</span><span class="sxs-lookup"><span data-stu-id="746bf-124">Therefore, hello range of VM sizes that can exist in a single availability set is limited toohello range of VM sizes supported by hello hardware cluster.</span></span> <span data-ttu-id="746bf-125">cluster de hardware de saudação para conjunto de disponibilidade de saudação é selecionado quando hello primeira VM no conjunto de disponibilidade de saudação é implantado ou iniciando Olá primeira VM em um conjunto de disponibilidade, onde todas as máquinas virtuais estão em estado de parado-desalocado hello.</span><span class="sxs-lookup"><span data-stu-id="746bf-125">hello hardware cluster for hello availability set is selected when hello first VM in hello availability set is deployed or when starting hello first VM in an availability set where all VMs are currently in hello stopped-deallocated state.</span></span> <span data-ttu-id="746bf-126">Olá CLI comando a seguir pode ser usado toodetermine Olá intervalo da VM tamanhos disponíveis para um conjunto de disponibilidade: "az vm lista-tamanhos – local \<cadeia de caracteres\>"</span><span class="sxs-lookup"><span data-stu-id="746bf-126">hello following CLI command can be used toodetermine hello range of VM sizes available for an availability set: “az vm list-sizes --location \<string\>”</span></span>

<span data-ttu-id="746bf-127">Cada cluster de hardware é dividido em domínios de atualização toomultiple e domínios de falha.</span><span class="sxs-lookup"><span data-stu-id="746bf-127">Each hardware cluster is divided in toomultiple update domains and fault domains.</span></span> <span data-ttu-id="746bf-128">Esses domínios são definidos pelos hosts que compartilham um ciclo de atualização comum ou uma infraestrutura física semelhante, como energia e rede.</span><span class="sxs-lookup"><span data-stu-id="746bf-128">These domains are defined by what hosts share a common update cycle, or share similar physical infrastructure such as power and networking.</span></span> <span data-ttu-id="746bf-129">Azure distribui automaticamente suas VMs em um conjunto de disponibilidade de toomaintain de domínios e tolerância a falhas de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="746bf-129">Azure automatically distributes your VMs within an availability set across domains toomaintain availability and fault tolerance.</span></span> <span data-ttu-id="746bf-130">Dependendo do tamanho de saudação do seu aplicativo e o número de saudação de VMs em um conjunto de disponibilidade, você pode ajustar o número de saudação de domínios que você deseja toouse.</span><span class="sxs-lookup"><span data-stu-id="746bf-130">Depending on hello size of your application and hello number of VMs within an availability set, you can adjust hello number of domains you wish toouse.</span></span> <span data-ttu-id="746bf-131">Você pode ler mais sobre [gerenciamento de disponibilidade e o uso dos domínios de atualização e de falha](manage-availability.md).</span><span class="sxs-lookup"><span data-stu-id="746bf-131">You can read more about [managing availability and use of update and fault domains](manage-availability.md).</span></span>

<span data-ttu-id="746bf-132">Ao projetar sua infraestrutura de aplicativo, planeje Olá toouse de camadas de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="746bf-132">When designing your application infrastructure, plan out hello application tiers toouse.</span></span> <span data-ttu-id="746bf-133">Máquinas virtuais do grupo que servem Olá mesmo finalidade em conjuntos de tooavailability, como um conjunto de disponibilidade para suas VMs front-end executando o nginx ou Apache.</span><span class="sxs-lookup"><span data-stu-id="746bf-133">Group VMs that serve hello same purpose in tooavailability sets, such as an availability set for your front-end VMs running nginx or Apache.</span></span> <span data-ttu-id="746bf-134">Crie um conjunto de disponibilidade separado para suas VMs de back-end executando o MongoDB ou MySQL.</span><span class="sxs-lookup"><span data-stu-id="746bf-134">Create a separate availability set for your back-end VMs running MongoDB or MySQL.</span></span> <span data-ttu-id="746bf-135">meta de saudação é tooensure que cada componente do aplicativo é protegido por um conjunto de disponibilidade e pelo menos uma vez instância sempre permanece em execução.</span><span class="sxs-lookup"><span data-stu-id="746bf-135">hello goal is tooensure that each component of your application is protected by an availability set and at least once instance always remains running.</span></span>

<span data-ttu-id="746bf-136">Balanceadores de carga podem ser utilizados na frente de cada toowork de camada de aplicativo junto com um conjunto de disponibilidade e certifique-se de que o tráfego sempre pode ser roteada tooa instância em execução.</span><span class="sxs-lookup"><span data-stu-id="746bf-136">Load balancers can be utilized in front of each application tier toowork alongside an availability set and ensure traffic can always be routed tooa running instance.</span></span> <span data-ttu-id="746bf-137">Sem um balanceador de carga, suas VMs podem continuar em execução durante manutenções planejadas e não planejadas, mas seu usuário final pode não ser capaz de tooresolve-los se hello VM primário está indisponível.</span><span class="sxs-lookup"><span data-stu-id="746bf-137">Without a load balancer, your VMs may continue running throughout planned and unplanned maintenance events, but your end user may not be able tooresolve them if hello primary VM is unavailable.</span></span>

<span data-ttu-id="746bf-138">Projete o aplicativo para alta disponibilidade na camada de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="746bf-138">Design your application for high availability at storage layer.</span></span> <span data-ttu-id="746bf-139">prática recomendada Olá é muito[usar discos gerenciados para as VMs em um conjunto de disponibilidade](manage-availability.md#use-managed-disks-for-vms-in-an-availability-set).</span><span class="sxs-lookup"><span data-stu-id="746bf-139">hello best practice is too[use Managed Disks for VMs in an Availability Set](manage-availability.md#use-managed-disks-for-vms-in-an-availability-set).</span></span> <span data-ttu-id="746bf-140">Se você estiver usando discos não gerenciados, é altamente recomendável muito[converter VMs no conjunto de disponibilidade toouse gerenciados discos](convert-unmanaged-to-managed-disks.md#convert-vms-in-an-availability-set).</span><span class="sxs-lookup"><span data-stu-id="746bf-140">If you are currently using unmanaged disks, we highly recommend you too[convert VMs in Availability Set toouse Managed Disks](convert-unmanaged-to-managed-disks.md#convert-vms-in-an-availability-set).</span></span>

## <a name="next-steps"></a><span data-ttu-id="746bf-141">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="746bf-141">Next steps</span></span>
[!INCLUDE [virtual-machines-linux-infrastructure-guidelines-next-steps](../../../includes/virtual-machines-linux-infrastructure-guidelines-next-steps.md)]

