---
title: aaaOptimize sua VM do Linux no Azure | Microsoft Docs
description: "Saiba algumas toomake de dicas de otimização se que você tiver configurado a VM do Linux para otimizar o desempenho no Azure"
keywords: "máquina virtual linux, linux máquina virtual, máquina virtual ubuntu"
services: virtual-machines-linux
documentationcenter: 
author: rickstercdn
manager: timlt
editor: tysonn
tags: azure-resource-manager
ms.assetid: 8baa30c8-d40e-41ac-93d0-74e96fe18d4c
ms.service: virtual-machines-linux
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 09/06/2016
ms.author: rclaus
ms.openlocfilehash: 89a9ac022928a2801a9a15e1c172340352745354
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="optimize-your-linux-vm-on-azure"></a><span data-ttu-id="0eebb-104">Otimizar sua VM do Linux no Azure</span><span class="sxs-lookup"><span data-stu-id="0eebb-104">Optimize your Linux VM on Azure</span></span>
<span data-ttu-id="0eebb-105">Criar uma máquina virtual do Linux (VM) é fácil toodo de linha de comando Olá ou portal hello.</span><span class="sxs-lookup"><span data-stu-id="0eebb-105">Creating a Linux virtual machine (VM) is easy toodo from hello command line or from hello portal.</span></span> <span data-ttu-id="0eebb-106">Este tutorial mostra como tooensure configurá-lo toooptimize o desempenho na plataforma do Microsoft Azure hello.</span><span class="sxs-lookup"><span data-stu-id="0eebb-106">This tutorial shows you how tooensure you have set it up toooptimize its performance on hello Microsoft Azure platform.</span></span> <span data-ttu-id="0eebb-107">Este tópico usa uma VM do Ubuntu Server, mas é possível também criar uma máquina virtual do Linux usando [suas próprias imagens como modelos](create-upload-generic.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="0eebb-107">This topic uses an Ubuntu Server VM, but you can also create Linux virtual machine using [your own images as templates](create-upload-generic.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span>  

## <a name="prerequisites"></a><span data-ttu-id="0eebb-108">Pré-requisitos</span><span class="sxs-lookup"><span data-stu-id="0eebb-108">Prerequisites</span></span>
<span data-ttu-id="0eebb-109">Este tópico pressupõe que você já tenha uma Assinatura do Azure ativa ([inscrição de avaliação gratuita](https://azure.microsoft.com/pricing/free-trial/)) e já tenha provisionado uma VM na sua Assinatura do Azure.</span><span class="sxs-lookup"><span data-stu-id="0eebb-109">This topic assumes you already have a working Azure subscription ([free trial signup](https://azure.microsoft.com/pricing/free-trial/)) and have already provisioned a VM into your Azure subscription.</span></span> <span data-ttu-id="0eebb-110">Certifique-se de que você tenha mais recente Olá [2.0 do CLI do Azure](/cli/azure/install-az-cli2) instalado e registrado no tooyour assinatura do Azure com [logon az](/cli/azure/#login) antes de [criar uma VM](quick-create-cli.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="0eebb-110">Make sure that you have hello latest [Azure CLI 2.0](/cli/azure/install-az-cli2) installed and logged in tooyour Azure subscription with [az login](/cli/azure/#login) before you [create a VM](quick-create-cli.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span>

## <a name="azure-os-disk"></a><span data-ttu-id="0eebb-111">Disco do sistema operacional do Azure</span><span class="sxs-lookup"><span data-stu-id="0eebb-111">Azure OS Disk</span></span>
<span data-ttu-id="0eebb-112">Depois de criar uma VM Linux no Azure, ela terá dois discos associados.</span><span class="sxs-lookup"><span data-stu-id="0eebb-112">Once you create a Linux VM in Azure, it has two disks associated with it.</span></span> <span data-ttu-id="0eebb-113">**/dev/sda** é o disco do sistema operacional, **/dev/sdb** é o disco temporário.</span><span class="sxs-lookup"><span data-stu-id="0eebb-113">**/dev/sda** is your OS disk, **/dev/sdb** is your temporary disk.</span></span>  <span data-ttu-id="0eebb-114">Não use o disco do sistema operacional principal hello (**/desenvolvimento/sda**) para qualquer coisa, exceto o sistema operacional de saudação como ela é otimizada para rápido tempo de inicialização VM e fornece um bom desempenho para suas cargas de trabalho.</span><span class="sxs-lookup"><span data-stu-id="0eebb-114">Do not use hello main OS disk (**/dev/sda**) for anything except hello operating system as it is optimized for fast VM boot time and does not provide good performance for your workloads.</span></span> <span data-ttu-id="0eebb-115">Você deseja tooattach um ou mais discos tooyour VM tooget persistente e otimizado armazenamento para seus dados.</span><span class="sxs-lookup"><span data-stu-id="0eebb-115">You want tooattach one or more disks tooyour VM tooget persistent and optimized storage for your data.</span></span> 

## <a name="adding-disks-for-size-and-performance-targets"></a><span data-ttu-id="0eebb-116">Adicionando discos para metas de desempenho e tamanho</span><span class="sxs-lookup"><span data-stu-id="0eebb-116">Adding Disks for Size and Performance targets</span></span>
<span data-ttu-id="0eebb-117">Com base no tamanho da VM de saudação, você pode anexar discos adicionais em uma série de too16, 32 discos em uma série D e 64 discos em uma máquina de série G - cada backup too1 TB de tamanho.</span><span class="sxs-lookup"><span data-stu-id="0eebb-117">Based on hello VM size, you can attach up too16 additional disks on an A-Series, 32 disks on a D-Series and 64 disks on a G-Series machine - each up too1 TB in size.</span></span> <span data-ttu-id="0eebb-118">Adicione discos adicionais conforme necessário para seus requisitos de IOps e espaço.</span><span class="sxs-lookup"><span data-stu-id="0eebb-118">You add extra disks as needed per your space and IOps requirements.</span></span> <span data-ttu-id="0eebb-119">Cada disco tem uma meta de desempenho de 500 IOps para o armazenamento padrão e backup too5000 IOps por disco para armazenamento Premium.</span><span class="sxs-lookup"><span data-stu-id="0eebb-119">Each disk has a performance target of 500 IOps for Standard Storage and up too5000 IOps per disk for Premium Storage.</span></span>  <span data-ttu-id="0eebb-120">Para saber mais sobre os discos de Armazenamento Premium, consulte [Armazenamento Premium: Armazenamento de Alto Desempenho para VMs do Azure](../../storage/common/storage-premium-storage.md)</span><span class="sxs-lookup"><span data-stu-id="0eebb-120">For more information about Premium Storage disks, see [Premium Storage: High-Performance Storage for Azure VMs](../../storage/common/storage-premium-storage.md)</span></span>

<span data-ttu-id="0eebb-121">tooachieve Olá IOps mais alto em discos de armazenamento Premium, em que as configurações de cache foram definidas tooeither **ReadOnly** ou **nenhum**, você deve desabilitar **barreiras** enquanto montar o sistema de arquivos de saudação do Linux.</span><span class="sxs-lookup"><span data-stu-id="0eebb-121">tooachieve hello highest IOps on Premium Storage disks where their cache settings have been set tooeither **ReadOnly** or **None**, you must disable **barriers** while mounting hello file system in Linux.</span></span> <span data-ttu-id="0eebb-122">Não é necessário barreiras como Olá grava tooPremium armazenamento feito discos são duráveis para essas configurações de cache.</span><span class="sxs-lookup"><span data-stu-id="0eebb-122">You do not need barriers because hello writes tooPremium Storage backed disks are durable for these cache settings.</span></span>

* <span data-ttu-id="0eebb-123">Se você usar **reiserFS**, desabilitar barreiras usando a opção de montagem Olá `barrier=none` (para habilitar as barreiras, use `barrier=flush`)</span><span class="sxs-lookup"><span data-stu-id="0eebb-123">If you use **reiserFS**, disable barriers using hello mount option `barrier=none` (For enabling barriers, use `barrier=flush`)</span></span>
* <span data-ttu-id="0eebb-124">Se você usar **ext3/ext4**, desabilitar barreiras usando a opção de montagem Olá `barrier=0` (para habilitar as barreiras, use `barrier=1`)</span><span class="sxs-lookup"><span data-stu-id="0eebb-124">If you use **ext3/ext4**, disable barriers using hello mount option `barrier=0` (For enabling barriers, use `barrier=1`)</span></span>
* <span data-ttu-id="0eebb-125">Se você usar **XFS**, desabilitar barreiras usando a opção de montagem Olá `nobarrier` (para habilitar as barreiras, use a opção de saudação `barrier`)</span><span class="sxs-lookup"><span data-stu-id="0eebb-125">If you use **XFS**, disable barriers using hello mount option `nobarrier` (For enabling barriers, use hello option `barrier`)</span></span>

## <a name="unmanaged-storage-account-considerations"></a><span data-ttu-id="0eebb-126">Considerações sobre a conta de armazenamento não gerenciado</span><span class="sxs-lookup"><span data-stu-id="0eebb-126">Unmanaged storage account considerations</span></span>
<span data-ttu-id="0eebb-127">ação de padrão de Hello quando você cria uma máquina virtual com hello Azure CLI 2.0 é toouse Azure gerenciados discos.</span><span class="sxs-lookup"><span data-stu-id="0eebb-127">hello default action when you create a VM with hello Azure CLI 2.0 is toouse Azure Managed Disks.</span></span>  <span data-ttu-id="0eebb-128">Esses discos são manipulados pelo Olá plataforma Windows Azure e não exigem qualquer etapa de preparação ou local toostore-los.</span><span class="sxs-lookup"><span data-stu-id="0eebb-128">These disks are handled by hello Azure platform and do not require any preparation or location toostore them.</span></span>  <span data-ttu-id="0eebb-129">Os discos não gerenciados exigem uma conta de armazenamento e têm algumas considerações adicionais de desempenho.</span><span class="sxs-lookup"><span data-stu-id="0eebb-129">Unmanaged disks require a storage account and have some additional performance considerations.</span></span>  <span data-ttu-id="0eebb-130">Para saber mais sobre discos gerenciados, veja [Visão geral dos Azure Managed Disks](../windows/managed-disks-overview.md).</span><span class="sxs-lookup"><span data-stu-id="0eebb-130">For more information about managed disks, see [Azure Managed Disks overview](../windows/managed-disks-overview.md).</span></span>  <span data-ttu-id="0eebb-131">Olá seção a seguir descreve as considerações de desempenho apenas quando você usar discos não gerenciados.</span><span class="sxs-lookup"><span data-stu-id="0eebb-131">hello following section outlines performance considerations only when you use unmanaged disks.</span></span>  <span data-ttu-id="0eebb-132">Olá novamente, padrão e solução de armazenamento recomendado é discos toouse gerenciado.</span><span class="sxs-lookup"><span data-stu-id="0eebb-132">Again, hello default and recommended storage solution is toouse managed disks.</span></span>

<span data-ttu-id="0eebb-133">Se você criar uma VM com discos não gerenciados, certifique-se de que você anexar discos de contas de armazenamento que reside no hello mesmo região tooensure sua VM próximos e minimizar a latência de rede.</span><span class="sxs-lookup"><span data-stu-id="0eebb-133">If you create a VM with unmanaged disks, make sure that you attach disks from storage accounts residing in hello same region as your VM tooensure close proximity and minimize network latency.</span></span>  <span data-ttu-id="0eebb-134">Cada conta de Armazenamento Standard tem um máximo de 20k IOps e uma capacidade de tamanho de 500 TB.</span><span class="sxs-lookup"><span data-stu-id="0eebb-134">Each Standard storage account has a maximum of 20k IOps and a 500 TB size capacity.</span></span>  <span data-ttu-id="0eebb-135">Esse limite estabelece discos tooapproximately 40 usado como disco Olá SO e discos de dados que você criar.</span><span class="sxs-lookup"><span data-stu-id="0eebb-135">This  limit works out tooapproximately 40 heavily used disks including both hello OS disk and any data disks you create.</span></span> <span data-ttu-id="0eebb-136">Para contas de Armazenamento Premium, não há nenhum limite máximo de IOps, mas há um limite de tamanho de 32 TB.</span><span class="sxs-lookup"><span data-stu-id="0eebb-136">For Premium Storage accounts, there is no Maximum IOps limit but there is a 32 TB size limit.</span></span> 

<span data-ttu-id="0eebb-137">Ao lidar com cargas de trabalho de IOps alto e você tiver escolhido o armazenamento padrão para os discos, talvez seja necessário discos de saudação toosplit em vários toomake de contas de armazenamento se que você não atingiu Olá 20.000 IOps limitar para contas de armazenamento padrão.</span><span class="sxs-lookup"><span data-stu-id="0eebb-137">When dealing with high IOps workloads and you have chosen Standard Storage for your disks, you might need toosplit hello disks across multiple storage accounts toomake sure you have not hit hello 20,000 IOps limit for Standard Storage accounts.</span></span> <span data-ttu-id="0eebb-138">Sua VM pode conter uma mistura de discos de diferentes contas de armazenamento e tooachieve de tipos de conta de armazenamento a configuração ideal.</span><span class="sxs-lookup"><span data-stu-id="0eebb-138">Your VM can contain a mix of disks from across different storage accounts and storage account types tooachieve your optimal configuration.</span></span>
 

## <a name="your-vm-temporary-drive"></a><span data-ttu-id="0eebb-139">Unidade temporária da VM</span><span class="sxs-lookup"><span data-stu-id="0eebb-139">Your VM Temporary drive</span></span>
<span data-ttu-id="0eebb-140">Por padrão, quando você cria uma VM, o Azure fornece um disco de sistema operacional (**/dev/sda**) e um disco temporário (**/dev/sdb**).</span><span class="sxs-lookup"><span data-stu-id="0eebb-140">By default when you create a VM, Azure provides you with an OS disk (**/dev/sda**) and a temporary disk (**/dev/sdb**).</span></span>  <span data-ttu-id="0eebb-141">Todos os discos extras que você adicionar aparecerão como **/dev/sdc**, **/dev/sdd**, **/dev/sde** e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="0eebb-141">All additional disks you add show up as **/dev/sdc**, **/dev/sdd**, **/dev/sde** and so on.</span></span> <span data-ttu-id="0eebb-142">Todos os dados no disco temporário (**/dev/sdb**) não são duráveis e poderão ser perdidos se eventos específicos, como redimensionamento de VM, reimplantação ou manutenção, forçarem uma reinicialização da VM.</span><span class="sxs-lookup"><span data-stu-id="0eebb-142">All data on your temporary disk (**/dev/sdb**) is not durable, and can be lost if specific events like VM Resizing, redeployment, or maintenance forces a restart of your VM.</span></span>  <span data-ttu-id="0eebb-143">tamanho de saudação e tipo de disco temporário é escolhido no momento da implantação de tamanho de VM de toohello relacionados.</span><span class="sxs-lookup"><span data-stu-id="0eebb-143">hello size and type of your temporary disk is related toohello VM size you chose at deployment time.</span></span> <span data-ttu-id="0eebb-144">Todos unidade temporária do hello de VMs (série DS, G e DS_V2) de tamanho do hello premium contam com um SSD local de desempenho adicional de backup too48k IOps.</span><span class="sxs-lookup"><span data-stu-id="0eebb-144">All of hello premium size VMs (DS, G, and DS_V2 series) hello temporary drive are backed by a local SSD for additional performance of up too48k IOps.</span></span> 

## <a name="linux-swap-file"></a><span data-ttu-id="0eebb-145">Arquivo de permuta do Linux</span><span class="sxs-lookup"><span data-stu-id="0eebb-145">Linux Swap File</span></span>
<span data-ttu-id="0eebb-146">Se sua VM do Azure for de uma imagem Ubuntu ou CoreOS, você pode usar CustomData toosend toocloud-init uma configuração de nuvem.</span><span class="sxs-lookup"><span data-stu-id="0eebb-146">If your Azure VM is from an Ubuntu or CoreOS image, then you can use CustomData toosend a cloud-config toocloud-init.</span></span> <span data-ttu-id="0eebb-147">Se você [carregou uma imagem do Linux personalizada](upload-vhd.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) que usa a inicialização de nuvem, configure também as partições de troca usando a inicialização de nuvem.</span><span class="sxs-lookup"><span data-stu-id="0eebb-147">If you [uploaded a custom Linux image](upload-vhd.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) that uses cloud-init, you also configure swap partitions using cloud-init.</span></span>

<span data-ttu-id="0eebb-148">No Ubuntu imagens de nuvem, você deve usar partição de troca init nuvem tooconfigure hello.</span><span class="sxs-lookup"><span data-stu-id="0eebb-148">On Ubuntu Cloud Images, you must use cloud-init tooconfigure hello swap partition.</span></span> <span data-ttu-id="0eebb-149">Para obter mais informações, consulte [AzureSwapPartitions](https://wiki.ubuntu.com/AzureSwapPartitions).</span><span class="sxs-lookup"><span data-stu-id="0eebb-149">For more information, see [AzureSwapPartitions](https://wiki.ubuntu.com/AzureSwapPartitions).</span></span>

<span data-ttu-id="0eebb-150">Para imagens sem suporte de inicialização de nuvem, imagens VM implantadas por meio de saudação do Azure Marketplace tem um agente de Linux de VM integrado com hello sistema operacional.</span><span class="sxs-lookup"><span data-stu-id="0eebb-150">For images without cloud-init support, VM images deployed from hello Azure Marketplace have a VM Linux Agent integrated with hello OS.</span></span> <span data-ttu-id="0eebb-151">Esse agente permite Olá toointeract VM com vários serviços do Azure.</span><span class="sxs-lookup"><span data-stu-id="0eebb-151">This agent allows hello VM toointeract with various Azure services.</span></span> <span data-ttu-id="0eebb-152">Supondo que você implantou uma imagem padrão do hello Azure Marketplace, você precisaria toodo Olá toocorrectly a seguir configurar as configurações do arquivo de permuta Linux:</span><span class="sxs-lookup"><span data-stu-id="0eebb-152">Assuming you have deployed a standard image from hello Azure Marketplace, you would need toodo hello following toocorrectly configure your Linux swap file settings:</span></span>

<span data-ttu-id="0eebb-153">Localizar e modificar as duas entradas Olá **/etc/waagent.conf** arquivo.</span><span class="sxs-lookup"><span data-stu-id="0eebb-153">Locate and modify two entries in hello **/etc/waagent.conf** file.</span></span> <span data-ttu-id="0eebb-154">Eles controlam o tamanho do arquivo de permuta hello e a existência de saudação de um arquivo de permuta dedicado.</span><span class="sxs-lookup"><span data-stu-id="0eebb-154">They control hello existence of a dedicated swap file and size of hello swap file.</span></span> <span data-ttu-id="0eebb-155">Olá parâmetros você está procurando toomodify são `ResourceDisk.EnableSwap=N` e`ResourceDisk.SwapSizeMB=0`</span><span class="sxs-lookup"><span data-stu-id="0eebb-155">hello parameters you are looking toomodify are `ResourceDisk.EnableSwap=N` and `ResourceDisk.SwapSizeMB=0`</span></span> 

<span data-ttu-id="0eebb-156">Alterar Olá parâmetros toohello configurações a seguir:</span><span class="sxs-lookup"><span data-stu-id="0eebb-156">Change hello parameters toohello following settings:</span></span>

* <span data-ttu-id="0eebb-157">ResourceDisk.EnableSwap=Y</span><span class="sxs-lookup"><span data-stu-id="0eebb-157">ResourceDisk.EnableSwap=Y</span></span>
* <span data-ttu-id="0eebb-158">ResourceDisk.SwapSizeMB={size em MB toomeet suas necessidades}</span><span class="sxs-lookup"><span data-stu-id="0eebb-158">ResourceDisk.SwapSizeMB={size in MB toomeet your needs}</span></span> 

<span data-ttu-id="0eebb-159">Depois que você fez Olá alterar, precisar toorestart Olá waagent ou reinicie a VM do Linux tooreflect essas alterações.</span><span class="sxs-lookup"><span data-stu-id="0eebb-159">Once you have made hello change, you need toorestart hello waagent or restart your Linux VM tooreflect those changes.</span></span>  <span data-ttu-id="0eebb-160">Você sabe que foram implementadas alterações hello e um arquivo de permuta foi criado quando você usa Olá `free` comando tooview de espaço livre.</span><span class="sxs-lookup"><span data-stu-id="0eebb-160">You know hello changes have been implemented and a swap file has been created when you use hello `free` command tooview free space.</span></span> <span data-ttu-id="0eebb-161">Olá, exemplo a seguir tem um arquivo de permuta de 512MB criado como resultado de modificação de saudação **waagent.conf** arquivo:</span><span class="sxs-lookup"><span data-stu-id="0eebb-161">hello following example has a 512MB swap file created as a result of modifying hello **waagent.conf** file:</span></span>

```bash
azuseruser@myVM:~$ free
            total       used       free     shared    buffers     cached
Mem:       3525156     804168    2720988        408       8428     633192
-/+ buffers/cache:     162548    3362608
Swap:       524284          0     524284
```

## <a name="io-scheduling-algorithm-for-premium-storage"></a><span data-ttu-id="0eebb-162">Algoritmo de agendamento de E/S para o Armazenamento Premium</span><span class="sxs-lookup"><span data-stu-id="0eebb-162">I/O scheduling algorithm for Premium Storage</span></span>
<span data-ttu-id="0eebb-163">Com o kernel do Linux Olá 2.6.18, algoritmo de programação de e/s do saudação padrão foi alterado de prazo tooCFQ (algoritmo de fila justa completamente).</span><span class="sxs-lookup"><span data-stu-id="0eebb-163">With hello 2.6.18 Linux kernel, hello default I/O scheduling algorithm was changed from Deadline tooCFQ (Completely fair queuing algorithm).</span></span> <span data-ttu-id="0eebb-164">Para padrões de E/S de acesso aleatório, há uma diferença insignificante nas diferenças de desempenho entre CFQ e Deadline.</span><span class="sxs-lookup"><span data-stu-id="0eebb-164">For random access I/O patterns, there is negligible difference in performance differences between CFQ and Deadline.</span></span>  <span data-ttu-id="0eebb-165">Para discos baseada em SSD, onde o padrão de e/s de disco Olá é predominantemente sequencial, alternar novamente toohello algoritmo NOOP ou prazo pode obter um melhor desempenho de e/s.</span><span class="sxs-lookup"><span data-stu-id="0eebb-165">For SSD-based disks where hello disk I/O pattern is predominantly sequential, switching back toohello NOOP or Deadline algorithm can achieve better I/O performance.</span></span>

### <a name="view-hello-current-io-scheduler"></a><span data-ttu-id="0eebb-166">Agendador do modo de exibição Olá atual e/s</span><span class="sxs-lookup"><span data-stu-id="0eebb-166">View hello current I/O scheduler</span></span>
<span data-ttu-id="0eebb-167">Use Olá comando a seguir:</span><span class="sxs-lookup"><span data-stu-id="0eebb-167">Use hello following command:</span></span>  

```bash
cat /sys/block/sda/queue/scheduler
```

<span data-ttu-id="0eebb-168">Você verá a seguinte saída, que indica o Agendador atual hello.</span><span class="sxs-lookup"><span data-stu-id="0eebb-168">You see following output, which indicates hello current scheduler.</span></span>  

```bash
noop [deadline] cfq
```

### <a name="change-hello-current-device-devsda-of-io-scheduling-algorithm"></a><span data-ttu-id="0eebb-169">Alterar dispositivo atual hello (dev/sda) de algoritmo de agendamento de e/s</span><span class="sxs-lookup"><span data-stu-id="0eebb-169">Change hello current device (/dev/sda) of I/O scheduling algorithm</span></span>
<span data-ttu-id="0eebb-170">Use Olá comandos a seguir:</span><span class="sxs-lookup"><span data-stu-id="0eebb-170">Use hello following commands:</span></span>  

```bash
azureuser@myVM:~$ sudo su -
root@myVM:~# echo "noop" >/sys/block/sda/queue/scheduler
root@myVM:~# sed -i 's/GRUB_CMDLINE_LINUX=""/GRUB_CMDLINE_LINUX_DEFAULT="quiet splash elevator=noop"/g' /etc/default/grub
root@myVM:~# update-grub
```

> [!NOTE]
> <span data-ttu-id="0eebb-171">Aplicar esta configuração somente para **/dev/sda** não é útil.</span><span class="sxs-lookup"><span data-stu-id="0eebb-171">Applying this setting for **/dev/sda** alone is not useful.</span></span> <span data-ttu-id="0eebb-172">Defina em todos os discos de dados onde a e/s sequencial domina padrão de e/s de saudação.</span><span class="sxs-lookup"><span data-stu-id="0eebb-172">Set on all data disks where sequential I/O dominates hello I/O pattern.</span></span>  

<span data-ttu-id="0eebb-173">Você deve ver Olá saída a seguir, indicando que **grub.cfg** foi recriado com êxito e que o Agendador de saudação padrão tiver sido atualizado tooNOOP.</span><span class="sxs-lookup"><span data-stu-id="0eebb-173">You should see hello following output, indicating that **grub.cfg** has been rebuilt successfully and that hello default scheduler has been updated tooNOOP.</span></span>  

```bash
Generating grub configuration file ...
Found linux image: /boot/vmlinuz-3.13.0-34-generic
Found initrd image: /boot/initrd.img-3.13.0-34-generic
Found linux image: /boot/vmlinuz-3.13.0-32-generic
Found initrd image: /boot/initrd.img-3.13.0-32-generic
Found memtest86+ image: /memtest86+.elf
Found memtest86+ image: /memtest86+.bin
done
```

<span data-ttu-id="0eebb-174">Para Olá Redhat família de distribuição, você só precisa Olá comando a seguir:</span><span class="sxs-lookup"><span data-stu-id="0eebb-174">For hello Redhat distribution family, you only need hello following command:</span></span>   

```bash
echo 'echo noop >/sys/block/sda/queue/scheduler' >> /etc/rc.local
```

## <a name="using-software-raid-tooachieve-higher-iops"></a><span data-ttu-id="0eebb-175">Usando RAID de Software tooachieve maior / Ops</span><span class="sxs-lookup"><span data-stu-id="0eebb-175">Using Software RAID tooachieve higher I/Ops</span></span>
<span data-ttu-id="0eebb-176">Se suas cargas de trabalho exigem mais IOps do que um único disco pode fornecer, será necessário toouse uma configuração de RAID de software de vários discos.</span><span class="sxs-lookup"><span data-stu-id="0eebb-176">If your workloads require more IOps than a single disk can provide, you need toouse a software RAID configuration of multiple disks.</span></span> <span data-ttu-id="0eebb-177">Como Azure já executa resiliência de disco na camada de infraestrutura local hello, você atingir o nível mais alto de saudação do desempenho de uma configuração de distribuição de RAID 0.</span><span class="sxs-lookup"><span data-stu-id="0eebb-177">Because Azure already performs disk resiliency at hello local fabric layer, you achieve hello highest level of performance from a RAID-0 striping configuration.</span></span>  <span data-ttu-id="0eebb-178">Provisionar e criar discos Olá ambiente do Azure e anexá-los tooyour VM Linux antes de particionamento, formatação e montar Olá unidades.</span><span class="sxs-lookup"><span data-stu-id="0eebb-178">Provision and create disks in hello Azure environment and attach them tooyour Linux VM before partitioning, formatting and mounting hello drives.</span></span>  <span data-ttu-id="0eebb-179">Mais detalhes sobre como configurar uma configuração de RAID de software em sua VM do Linux no azure podem ser encontrados no hello  **[configuração RAID de Software no Linux](configure-raid.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)**  documento.</span><span class="sxs-lookup"><span data-stu-id="0eebb-179">More details on configuring a software RAID setup on your Linux VM in azure can be found in hello **[Configuring Software RAID on Linux](configure-raid.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)** document.</span></span>

## <a name="next-steps"></a><span data-ttu-id="0eebb-180">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="0eebb-180">Next Steps</span></span>
<span data-ttu-id="0eebb-181">Lembre-se de que, com todas as discussões de otimização, você precisa de testes tooperform antes e depois de cada impacto de saudação toomeasure alteração hello alteração tem.</span><span class="sxs-lookup"><span data-stu-id="0eebb-181">Remember, as with all optimization discussions, you need tooperform tests before and after each change toomeasure hello impact hello change has.</span></span>  <span data-ttu-id="0eebb-182">A otimização é um processo passo a passo que tem resultados distintos em computadores diferentes no seu ambiente.</span><span class="sxs-lookup"><span data-stu-id="0eebb-182">Optimization is a step by step process that has different results across different machines in your environment.</span></span>  <span data-ttu-id="0eebb-183">O que funciona para uma configuração pode não funcionar para outras.</span><span class="sxs-lookup"><span data-stu-id="0eebb-183">What works for one configuration may not work for others.</span></span>

<span data-ttu-id="0eebb-184">Alguns recursos de tooadditional links úteis:</span><span class="sxs-lookup"><span data-stu-id="0eebb-184">Some useful links tooadditional resources:</span></span> 

* [<span data-ttu-id="0eebb-185">Armazenamento Premium: Armazenamento de Alto Desempenho para as Cargas de Trabalho da Máquina Virtual do Azure</span><span class="sxs-lookup"><span data-stu-id="0eebb-185">Premium Storage: High-Performance Storage for Azure Virtual Machine Workloads</span></span>](../../storage/common/storage-premium-storage.md)
* [<span data-ttu-id="0eebb-186">Guia do usuário do agente Linux para o Azure</span><span class="sxs-lookup"><span data-stu-id="0eebb-186">Azure Linux Agent User Guide</span></span>](../windows/agent-user-guide.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)
* [<span data-ttu-id="0eebb-187">Otimizando o desempenho do MySQL nas VMs Linux do Azure</span><span class="sxs-lookup"><span data-stu-id="0eebb-187">Optimizing MySQL Performance on Azure Linux VMs</span></span>](classic/optimize-mysql.md?toc=%2fazure%2fvirtual-machines%2flinux%2fclassic%2ftoc.json)
* [<span data-ttu-id="0eebb-188">Configurar RAID de software no Linux</span><span class="sxs-lookup"><span data-stu-id="0eebb-188">Configure Software RAID on Linux</span></span>](configure-raid.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)

