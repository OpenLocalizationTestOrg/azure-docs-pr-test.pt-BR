---
title: "aaaTroubleshoot clássico de implantação de VM do Linux | Microsoft Docs"
description: "Solucionar problemas de implantação clássica ao criar uma nova máquina virtual Linux no Azure"
services: virtual-machines-linux
documentationcenter: 
author: JiangChen79
manager: felixwu
editor: 
tags: top-support-issue
ms.assetid: c8a963fa-6b2a-4c7a-a1f4-7793adb02b19
ms.service: virtual-machines-linux
ms.workload: na
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 09/06/2016
ms.author: cjiang
ms.openlocfilehash: a642bfd9a543cd6d2104b03fe04193d9352ccae1
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="troubleshoot-classic-deployment-issues-with-creating-a-new-linux-virtual-machine-in-azure"></a><span data-ttu-id="62ad9-103">Solucionar problemas de implantação clássica ao criar uma nova máquina virtual Linux no Azure</span><span class="sxs-lookup"><span data-stu-id="62ad9-103">Troubleshoot classic deployment issues with creating a new Linux virtual machine in Azure</span></span>
[!INCLUDE [virtual-machines-troubleshoot-deployment-new-vm-selectors](../../../../includes/virtual-machines-linux-troubleshoot-deployment-new-vm-selectors-include.md)]

[!INCLUDE [virtual-machines-troubleshoot-deployment-new-vm-opening](../../../../includes/virtual-machines-troubleshoot-deployment-new-vm-opening-include.md)]

> [!IMPORTANT] 
> <span data-ttu-id="62ad9-104">O Azure tem dois modelos de implantação diferentes para criar e trabalhar com recursos: [Gerenciador de Recursos e Clássico](../../../resource-manager-deployment-model.md).</span><span class="sxs-lookup"><span data-stu-id="62ad9-104">Azure has two different deployment models for creating and working with resources: [Resource Manager and Classic](../../../resource-manager-deployment-model.md).</span></span> <span data-ttu-id="62ad9-105">Este artigo aborda usando o modelo de implantação clássico hello.</span><span class="sxs-lookup"><span data-stu-id="62ad9-105">This article covers using hello Classic deployment model.</span></span> <span data-ttu-id="62ad9-106">A Microsoft recomenda que mais novas implantações de usam o modelo do Gerenciador de recursos de saudação.</span><span class="sxs-lookup"><span data-stu-id="62ad9-106">Microsoft recommends that most new deployments use hello Resource Manager model.</span></span> <span data-ttu-id="62ad9-107">Para a versão do Gerenciador de recursos de saudação deste artigo, consulte [aqui](../troubleshoot-deployment-new-vm.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="62ad9-107">For hello Resource Manager version of this article, see [here](../troubleshoot-deployment-new-vm.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span>

[!INCLUDE [support-disclaimer](../../../../includes/support-disclaimer.md)]

## <a name="collect-audit-logs"></a><span data-ttu-id="62ad9-108">Coletar logs de auditoria</span><span class="sxs-lookup"><span data-stu-id="62ad9-108">Collect audit logs</span></span>
<span data-ttu-id="62ad9-109">toostart de solução de problemas, auditoria Olá coletar registra o erro de saudação de tooidentify associado Olá problema.</span><span class="sxs-lookup"><span data-stu-id="62ad9-109">toostart troubleshooting, collect hello audit logs tooidentify hello error associated with hello issue.</span></span>

<span data-ttu-id="62ad9-110">No portal do Azure de Olá, clique em **procurar** > **máquinas virtuais** > *sua máquina virtual do Windows*  >   **Configurações de** > **logs de auditoria**.</span><span class="sxs-lookup"><span data-stu-id="62ad9-110">In hello Azure portal, click **Browse** > **Virtual machines** > *your Windows virtual machine* > **Settings** > **Audit logs**.</span></span>

[!INCLUDE [virtual-machines-troubleshoot-deployment-new-vm-issue1](../../../../includes/virtual-machines-troubleshoot-deployment-new-vm-issue1-include.md)]

[!INCLUDE [virtual-machines-linux-troubleshoot-deployment-new-vm-table](../../../../includes/virtual-machines-linux-troubleshoot-deployment-new-vm-table.md)]

<span data-ttu-id="62ad9-111">**Y:** se Olá SO for Linux generalizado e ele é carregado e/ou capturado com hello generalizado configuração, não haja erros.</span><span class="sxs-lookup"><span data-stu-id="62ad9-111">**Y:** If hello OS is Linux generalized, and it is uploaded and/or captured with hello generalized setting, then there won’t be any errors.</span></span> <span data-ttu-id="62ad9-112">Da mesma forma, se Olá SO é especializada do Linux, e ele é carregado e/ou capturado com hello especializado configuração, e não haja erros.</span><span class="sxs-lookup"><span data-stu-id="62ad9-112">Similarly, if hello OS is Linux specialized, and it is uploaded and/or captured with hello specialized setting, then there won’t be any errors.</span></span>

<span data-ttu-id="62ad9-113">**Erros de upload:**</span><span class="sxs-lookup"><span data-stu-id="62ad9-113">**Upload Errors:**</span></span>

<span data-ttu-id="62ad9-114">**N<sup>1</sup>:** se Olá SO for Linux generalizado, e ele é carregado como especializado, obterá um erro de tempo limite de provisionamento porque Olá VM está preso em Olá estágio de provisionamento.</span><span class="sxs-lookup"><span data-stu-id="62ad9-114">**N<sup>1</sup>:** If hello OS is Linux generalized, and it is uploaded as specialized, you will get a provisioning timeout error because hello VM is stuck at hello provisioning stage.</span></span>

<span data-ttu-id="62ad9-115">**N<sup>2</sup>:** se Olá SO especializado do Linux, e ele é carregado como generalizado, você obterá um erro de falha no provisionamento porque hello nova máquina virtual está em execução com o nome do computador original hello, username e password.</span><span class="sxs-lookup"><span data-stu-id="62ad9-115">**N<sup>2</sup>:** If hello OS is Linux specialized, and it is uploaded as generalized, you will get a provisioning failure error because hello new VM is running with hello original computer name, username and password.</span></span>

<span data-ttu-id="62ad9-116">**Resolução:**</span><span class="sxs-lookup"><span data-stu-id="62ad9-116">**Resolution:**</span></span>

<span data-ttu-id="62ad9-117">tooresolve ambos esses erros, carregar Olá VHD original, disponível no local, com Olá a mesma configuração que para Olá SO (generalizado/especializado).</span><span class="sxs-lookup"><span data-stu-id="62ad9-117">tooresolve both these errors, upload hello original VHD, available on-prem, with hello same setting as that for hello OS (generalized/specialized).</span></span> <span data-ttu-id="62ad9-118">tooupload como generalizado, lembre-se de toorun-desprovisionar primeiro.</span><span class="sxs-lookup"><span data-stu-id="62ad9-118">tooupload as generalized, remember toorun -deprovision first.</span></span> <span data-ttu-id="62ad9-119">Consulte [criar e carregar um disco rígido Virtual que Olá contém sistema operacional Linux](create-upload-vhd.md) para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="62ad9-119">See [Create and Upload a Virtual Hard Disk that Contains hello Linux Operating System](create-upload-vhd.md) for more information.</span></span>

<span data-ttu-id="62ad9-120">**Erros de captura:**</span><span class="sxs-lookup"><span data-stu-id="62ad9-120">**Capture Errors:**</span></span>

<span data-ttu-id="62ad9-121">**N<sup>3</sup>:** se Olá SO for Linux generalizado, e ele é capturado como especializado, você obterá um erro de tempo limite de provisionamento porque Olá original VM não é utilizável que está marcado como generalizado.</span><span class="sxs-lookup"><span data-stu-id="62ad9-121">**N<sup>3</sup>:** If hello OS is Linux generalized, and it is captured as specialized, you will get a provisioning timeout error because hello original VM is not usable as it is marked as generalized.</span></span>

<span data-ttu-id="62ad9-122">**N<sup>4</sup>:** se Olá SO especializado do Linux, e eles são capturados como generalizado, você obterá um erro de falha no provisionamento porque hello nova máquina virtual está em execução com o nome do computador original hello, username e password.</span><span class="sxs-lookup"><span data-stu-id="62ad9-122">**N<sup>4</sup>:** If hello OS is Linux specialized, and it is captured as generalized, you will get a provisioning failure error because hello new VM is running with hello original computer name, username and password.</span></span> <span data-ttu-id="62ad9-123">Além disso, Olá original VM não é utilizável porque ele está marcado como especializadas.</span><span class="sxs-lookup"><span data-stu-id="62ad9-123">Also, hello original VM is not usable because it is marked as specialized.</span></span>

<span data-ttu-id="62ad9-124">**Resolução:**</span><span class="sxs-lookup"><span data-stu-id="62ad9-124">**Resolution:**</span></span>

<span data-ttu-id="62ad9-125">tooresolve ambos esses erros, excluir imagem atual de saudação do portal de saudação e [recapturá-lo da saudação VHDs atuais](capture-image.md) com Olá a mesma configuração que para hello (generalizado/especializado) de sistema operacional.</span><span class="sxs-lookup"><span data-stu-id="62ad9-125">tooresolve both these errors, delete hello current image from hello portal, and [recapture it from hello current VHDs](capture-image.md) with hello same setting as that for hello OS (generalized/specialized).</span></span>

## <a name="issue-custom-gallery-marketplace-image-allocation-failure"></a><span data-ttu-id="62ad9-126">Problema: imagem personalizada/da galeria/do Marketplace; falha de alocação</span><span class="sxs-lookup"><span data-stu-id="62ad9-126">Issue: Custom/ gallery/ marketplace image; allocation failure</span></span>
<span data-ttu-id="62ad9-127">Esse erro ocorre em situações quando nova solicitação de VM Olá é enviada tooa cluster que não tenha a solicitação de saudação do tooaccommodate de espaço livre disponível, ou não aceitar o tamanho da VM hello está sendo solicitado.</span><span class="sxs-lookup"><span data-stu-id="62ad9-127">This error arises in situations when hello new VM request is sent tooa cluster that either does not have available free space tooaccommodate hello request, or cannot support hello VM size being requested.</span></span> <span data-ttu-id="62ad9-128">Não é possível toomix outra série de VMs em Olá mesmo serviço de nuvem.</span><span class="sxs-lookup"><span data-stu-id="62ad9-128">It is not possible toomix different series of VMs in hello same cloud service.</span></span> <span data-ttu-id="62ad9-129">Assim, se você quiser toocreate uma nova VM do que seu serviço de nuvem pode dar suporte a um tamanho diferente, Olá computação solicitação falhará.</span><span class="sxs-lookup"><span data-stu-id="62ad9-129">So if you want toocreate a new VM of a different size than what your cloud service can support, hello compute request will fail.</span></span>

<span data-ttu-id="62ad9-130">Dependendo de restrições de Olá Olá do serviço de nuvem que você usar toocreate Olá nova VM, você pode encontrar um erro causado por uma das duas situações.</span><span class="sxs-lookup"><span data-stu-id="62ad9-130">Depending on hello constraints of hello cloud service you use toocreate hello new VM, you might encounter an error caused by one of two situations.</span></span>

<span data-ttu-id="62ad9-131">**Causa 1:** Olá serviço em nuvem é fixado tooa determinado cluster, ou é o grupo de afinidade tooan vinculado e tooa fixos, portanto, o cluster específico por design.</span><span class="sxs-lookup"><span data-stu-id="62ad9-131">**Cause 1:** hello cloud service is pinned tooa specific cluster, or it is linked tooan affinity group, and hence pinned tooa specific cluster by design.</span></span> <span data-ttu-id="62ad9-132">Para solicitações de novos recursos de computação no grupo de afinidade serão tentadas por Olá mesmo cluster que hospedam os recursos existentes de saudação.</span><span class="sxs-lookup"><span data-stu-id="62ad9-132">So new compute resource requests in that affinity group are tried in hello same cluster where hello existing resources are hosted.</span></span> <span data-ttu-id="62ad9-133">No entanto, hello mesmo cluster talvez não suporte Olá solicitado tamanho da VM ou tiver espaço suficiente disponível, resultando em um erro de alocação.</span><span class="sxs-lookup"><span data-stu-id="62ad9-133">However, hello same cluster may either not support hello requested VM size or have insufficient available space, resulting in an allocation error.</span></span> <span data-ttu-id="62ad9-134">Isso é verdadeiro se o hello novos recursos são criados por meio de um novo serviço de nuvem ou um serviço de nuvem existente.</span><span class="sxs-lookup"><span data-stu-id="62ad9-134">This is true whether hello new resources are created through a new cloud service or through an existing cloud service.</span></span>

<span data-ttu-id="62ad9-135">**Resolução 1:**</span><span class="sxs-lookup"><span data-stu-id="62ad9-135">**Resolution 1:**</span></span>

* <span data-ttu-id="62ad9-136">Crie um novo serviço de nuvem e o associe a uma região ou a uma rede virtual baseada em região.</span><span class="sxs-lookup"><span data-stu-id="62ad9-136">Create a new cloud service and associate it with either a region or a region-based virtual network.</span></span>
* <span data-ttu-id="62ad9-137">Crie uma nova VM no novo serviço de nuvem hello.</span><span class="sxs-lookup"><span data-stu-id="62ad9-137">Create a new VM in hello new cloud service.</span></span>
  <span data-ttu-id="62ad9-138">Se você receber um erro ao tentar toocreate um novo serviço de nuvem, tente novamente mais tarde ou alterar a região Olá Olá serviço de nuvem.</span><span class="sxs-lookup"><span data-stu-id="62ad9-138">If you get an error when trying toocreate a new cloud service, either retry at a later time or change hello region for hello cloud service.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="62ad9-139">Se você estivesse tentando toocreate uma nova VM em um serviço de nuvem existente, mas não foi possível e tinha toocreate um novo serviço de nuvem para sua nova VM, você pode escolher tooconsolidate todas as suas VMs em Olá mesmo serviço de nuvem.</span><span class="sxs-lookup"><span data-stu-id="62ad9-139">If you were trying toocreate a new VM in an existing cloud service but couldn’t, and had toocreate a new cloud service for your new VM, you can choose tooconsolidate all your VMs in hello same cloud service.</span></span> <span data-ttu-id="62ad9-140">Assim, toodo excluir Olá VMs no serviço de nuvem existente hello e recapturá-los de seus discos no novo serviço de nuvem hello.</span><span class="sxs-lookup"><span data-stu-id="62ad9-140">toodo so, delete hello VMs in hello existing cloud service, and recapture them from their disks in hello new cloud service.</span></span> <span data-ttu-id="62ad9-141">No entanto, é importante tooremember que novo serviço de nuvem Olá terá um novo nome e o VIP, portanto, será necessário tooupdate para todas as dependências de saudação que atualmente usam essas informações para o serviço de nuvem existente hello.</span><span class="sxs-lookup"><span data-stu-id="62ad9-141">However, it is important tooremember that hello new cloud service will have a new name and VIP, so you will need tooupdate these for all hello dependencies that currently use this information for hello existing cloud service.</span></span>
> 
> 

<span data-ttu-id="62ad9-142">**Causa 2:** serviço de nuvem hello está associado uma rede virtual que é vinculado tooan grupo de afinidade, sendo tooa fixados cluster específico de design.</span><span class="sxs-lookup"><span data-stu-id="62ad9-142">**Cause 2:** hello cloud service is associated with a virtual network that is linked tooan affinity group, so it is pinned tooa specific cluster by design.</span></span> <span data-ttu-id="62ad9-143">Todas as novas solicitações de recursos de computação no grupo de afinidade, portanto, são feitas tentativas em Olá mesmo cluster que hospedam os recursos existentes de saudação.</span><span class="sxs-lookup"><span data-stu-id="62ad9-143">All new compute resource requests in that affinity group are therefore tried in hello same cluster where hello existing resources are hosted.</span></span> <span data-ttu-id="62ad9-144">No entanto, hello mesmo cluster talvez não suporte Olá solicitado tamanho da VM ou tiver espaço suficiente disponível, resultando em um erro de alocação.</span><span class="sxs-lookup"><span data-stu-id="62ad9-144">However, hello same cluster may either not support hello requested VM size or have insufficient available space, resulting in an allocation error.</span></span> <span data-ttu-id="62ad9-145">Isso é verdadeiro se o hello novos recursos são criados por meio de um novo serviço de nuvem ou um serviço de nuvem existente.</span><span class="sxs-lookup"><span data-stu-id="62ad9-145">This is true whether hello new resources are created through a new cloud service or through an existing cloud service.</span></span>

<span data-ttu-id="62ad9-146">**Resolução 2:**</span><span class="sxs-lookup"><span data-stu-id="62ad9-146">**Resolution 2:**</span></span>

* <span data-ttu-id="62ad9-147">Crie uma nova rede virtual regional.</span><span class="sxs-lookup"><span data-stu-id="62ad9-147">Create a new regional virtual network.</span></span>
* <span data-ttu-id="62ad9-148">Criar hello nova VM na nova rede virtual de saudação.</span><span class="sxs-lookup"><span data-stu-id="62ad9-148">Create hello new VM in hello new virtual network.</span></span>
* <span data-ttu-id="62ad9-149">[Conecte-se a sua rede virtual existente](https://azure.microsoft.com/blog/vnet-to-vnet-connecting-virtual-networks-in-azure-across-different-regions/) toohello nova rede virtual.</span><span class="sxs-lookup"><span data-stu-id="62ad9-149">[Connect your existing virtual network](https://azure.microsoft.com/blog/vnet-to-vnet-connecting-virtual-networks-in-azure-across-different-regions/) toohello new virtual network.</span></span> <span data-ttu-id="62ad9-150">Saiba mais sobre as [redes virtuais regionais](https://azure.microsoft.com/blog/2014/05/14/regional-virtual-networks/).</span><span class="sxs-lookup"><span data-stu-id="62ad9-150">See more about [regional virtual networks](https://azure.microsoft.com/blog/2014/05/14/regional-virtual-networks/).</span></span> <span data-ttu-id="62ad9-151">Como alternativa, você pode [migrar sua rede de virtual baseado em grupos de afinidade de rede virtual tooa regionais](https://azure.microsoft.com/blog/2014/11/26/migrating-existing-services-to-regional-scope/)e, em seguida, criar hello nova VM.</span><span class="sxs-lookup"><span data-stu-id="62ad9-151">Alternatively, you can [migrate your affinity-group-based virtual network tooa regional virtual network](https://azure.microsoft.com/blog/2014/11/26/migrating-existing-services-to-regional-scope/), and then create hello new VM.</span></span>

## <a name="next-steps"></a><span data-ttu-id="62ad9-152">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="62ad9-152">Next steps</span></span>
<span data-ttu-id="62ad9-153">Se você encontrar problemas ao iniciar uma VM do Linux parada ou redimensionar uma VM do Linux existente no Azure, consulte [Solucionar problemas de implantação clássico ao reinicializar ou redimensionar uma máquina virtual Linux existente no Azure](restart-resize-error-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="62ad9-153">If you encounter issues when you start a stopped Linux VM or resize an existing Linux VM in Azure, see [Troubleshoot classic deployment issues with restarting or resizing an existing Linux Virtual Machine in Azure](restart-resize-error-troubleshooting.md).</span></span>

