---
title: "soluções aaaStorage para VMs do Linux no Azure | Microsoft Docs"
description: "Saiba mais sobre Olá design e implementação diretrizes importantes para a implantação de soluções de armazenamento nos serviços de infraestrutura do Azure."
documentationcenter: 
services: virtual-machines-linux
author: iainfoulds
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 3c368f07-189b-4520-bbe2-f4080253bbf2
ms.service: virtual-machines-linux
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 06/26/2017
ms.author: iainfou
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: d270c4786d7b55b18b011aa345063b6816a80876
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="azure-storage-infrastructure-guidelines-for-linux-vms"></a><span data-ttu-id="7990e-103">Diretrizes de infraestrutura de armazenamento do Azure para VMs Linux</span><span class="sxs-lookup"><span data-stu-id="7990e-103">Azure storage infrastructure guidelines for Linux VMs</span></span>

[!INCLUDE [virtual-machines-linux-infrastructure-guidelines-intro](../../../includes/virtual-machines-linux-infrastructure-guidelines-intro.md)]

<span data-ttu-id="7990e-104">Este artigo destaca as noções básicas sobre as necessidades de armazenamento e considerações de design para atingir o desempenho de VM (máquina virtual) ideal.</span><span class="sxs-lookup"><span data-stu-id="7990e-104">This article focuses on understanding storage needs and design considerations for achieving optimum virtual machine (VM) performance.</span></span>

## <a name="implementation-guidelines-for-storage"></a><span data-ttu-id="7990e-105">Diretrizes de implementação de armazenamento</span><span class="sxs-lookup"><span data-stu-id="7990e-105">Implementation guidelines for storage</span></span>
<span data-ttu-id="7990e-106">Decisões:</span><span class="sxs-lookup"><span data-stu-id="7990e-106">Decisions:</span></span>

* <span data-ttu-id="7990e-107">Você vai toouse Azure gerenciados discos ou discos não gerenciados?</span><span class="sxs-lookup"><span data-stu-id="7990e-107">Are you going toouse Azure Managed Disks or unmanaged disks?</span></span>
* <span data-ttu-id="7990e-108">Você precisa de armazenamento de toouse Standard ou Premium para sua carga de trabalho?</span><span class="sxs-lookup"><span data-stu-id="7990e-108">Do you need toouse Standard or Premium storage for your workload?</span></span>
* <span data-ttu-id="7990e-109">Você precisa de disco distribuição toocreate discos maiores que 4TB?</span><span class="sxs-lookup"><span data-stu-id="7990e-109">Do you need disk striping toocreate disks larger than 4TB?</span></span>
* <span data-ttu-id="7990e-110">Você precisa de disco distribuição tooachieve i / o desempenho ideal para sua carga de trabalho?</span><span class="sxs-lookup"><span data-stu-id="7990e-110">Do you need disk striping tooachieve optimal I/O performance for your workload?</span></span>
* <span data-ttu-id="7990e-111">O conjunto de contas de armazenamento você precisa toohost a infra-estrutura ou carga de trabalho TI?</span><span class="sxs-lookup"><span data-stu-id="7990e-111">What set of storage accounts do you need toohost your IT workload or infrastructure?</span></span>

<span data-ttu-id="7990e-112">Tarefas:</span><span class="sxs-lookup"><span data-stu-id="7990e-112">Tasks:</span></span>

* <span data-ttu-id="7990e-113">Examine as demandas de e/s de aplicativos de saudação você está implantando e planeja o número apropriado de saudação e o tipo de contas de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="7990e-113">Review I/O demands of hello applications you are deploying and plan hello appropriate number and type of storage accounts.</span></span>
* <span data-ttu-id="7990e-114">Crie conjunto de saudação de contas de armazenamento usando a convenção de nomenclatura.</span><span class="sxs-lookup"><span data-stu-id="7990e-114">Create hello set of storage accounts using your naming convention.</span></span> <span data-ttu-id="7990e-115">Você pode usar o portal de CLI do Azure ou Olá Olá.</span><span class="sxs-lookup"><span data-stu-id="7990e-115">You can use hello Azure CLI or hello portal.</span></span>

## <a name="storage"></a><span data-ttu-id="7990e-116">Armazenamento</span><span class="sxs-lookup"><span data-stu-id="7990e-116">Storage</span></span>
<span data-ttu-id="7990e-117">O Armazenamento do Azure é uma parte fundamental de implantação e gerenciamento de aplicativos e VMs (máquinas virtuais).</span><span class="sxs-lookup"><span data-stu-id="7990e-117">Azure Storage is a key part of deploying and managing virtual machines (VMs) and applications.</span></span> <span data-ttu-id="7990e-118">Armazenamento do Azure fornece serviços para armazenar dados de arquivos, dados não estruturados e mensagens, e também faz parte da infraestrutura de saudação dando suporte a máquinas virtuais.</span><span class="sxs-lookup"><span data-stu-id="7990e-118">Azure Storage provides services for storing file data, unstructured data, and messages, and it is also part of hello infrastructure supporting VMs.</span></span>

<span data-ttu-id="7990e-119">[Os discos do Azure gerenciados](../../storage/storage-managed-disks-overview.md) lida com armazenamento para você em segundo plano da saudação.</span><span class="sxs-lookup"><span data-stu-id="7990e-119">[Azure Managed Disks](../../storage/storage-managed-disks-overview.md) handles storage for you behind hello scenes.</span></span> <span data-ttu-id="7990e-120">Com discos não gerenciados, você cria contas de armazenamento toohold Olá discos (arquivos VHD) para as VMs do Azure.</span><span class="sxs-lookup"><span data-stu-id="7990e-120">With unmanaged disks, you create storage accounts toohold hello disks (VHD files) for your Azure VMs.</span></span> <span data-ttu-id="7990e-121">Na adição de hardware, você deve verificar se que criação de contas de armazenamento adicional para não exceder o limite de IOPS de saudação do armazenamento com qualquer um dos seus discos.</span><span class="sxs-lookup"><span data-stu-id="7990e-121">When scaling up, you must make sure you created additional storage accounts so you don’t exceed hello IOPS limit for storage with any of your disks.</span></span> <span data-ttu-id="7990e-122">Com discos gerenciados tratamento de armazenamento, você não está limitado pela Olá limites da conta de armazenamento (como 20.000 IOPS / conta).</span><span class="sxs-lookup"><span data-stu-id="7990e-122">With Managed Disks handling storage, you are no longer limited by hello storage account limits (such as 20,000 IOPS / account).</span></span> <span data-ttu-id="7990e-123">Você também não tem mais toocopy suas contas de armazenamento toomultiple imagens personalizadas (arquivos VHD).</span><span class="sxs-lookup"><span data-stu-id="7990e-123">You also no longer have toocopy your custom images (VHD files) toomultiple storage accounts.</span></span> <span data-ttu-id="7990e-124">Você pode gerenciá-los em um local central – uma conta de armazenamento por região do Azure – e usá-los toocreate centenas de VMs em uma assinatura.</span><span class="sxs-lookup"><span data-stu-id="7990e-124">You can manage them in a central location – one storage account per Azure region – and use them toocreate hundreds of VMs in a subscription.</span></span> <span data-ttu-id="7990e-125">Recomendamos o uso do Managed Disks para novas implantações.</span><span class="sxs-lookup"><span data-stu-id="7990e-125">We recommend you use Managed Disks for new deployments.</span></span>

<span data-ttu-id="7990e-126">Há dois tipos de conta de armazenamento disponíveis para dar suporte às VMs:</span><span class="sxs-lookup"><span data-stu-id="7990e-126">There are two types of storage accounts available for supporting VMs:</span></span>

* <span data-ttu-id="7990e-127">Forneça contas de armazenamento padrão você acessar o armazenamento de tooblob (usado para armazenar discos de VM do Azure), armazenamento, armazenamento de fila, de tabela e armazenamento de arquivos.</span><span class="sxs-lookup"><span data-stu-id="7990e-127">Standard storage accounts give you access tooblob storage (used for storing Azure VM disks), table storage, queue storage, and file storage.</span></span>
* <span data-ttu-id="7990e-128">[Armazenamento Premium](../../storage/storage-premium-storage.md) dão suporte a discos de alto desempenho e baixa latência para cargas de trabalho de E/S intensiva, como cluster fragmentado do MongoDB.</span><span class="sxs-lookup"><span data-stu-id="7990e-128">[Premium storage](../../storage/storage-premium-storage.md) accounts deliver high-performance, low-latency disk support for I/O intensive workloads, such as MongoDB Sharded cluster.</span></span> <span data-ttu-id="7990e-129">Um armazenamento premium dá suporte no momento somente a discos de VM do Azure.</span><span class="sxs-lookup"><span data-stu-id="7990e-129">Premium storage currently supports Azure VM disks only.</span></span>

<span data-ttu-id="7990e-130">O Azure cria VMs com um disco do sistema operacional, um disco temporário e zero ou mais discos de dados opcionais.</span><span class="sxs-lookup"><span data-stu-id="7990e-130">Azure creates VMs with an operating system disk, a temporary disk, and zero or more optional data disks.</span></span> <span data-ttu-id="7990e-131">disco do sistema operacional Hello e discos de dados são blobs de página do Azure, enquanto o disco temporário Olá é armazenado localmente no nó Olá onde reside a máquina de saudação.</span><span class="sxs-lookup"><span data-stu-id="7990e-131">hello operating system disk and data disks are Azure page blobs, whereas hello temporary disk is stored locally on hello node where hello machine lives.</span></span> <span data-ttu-id="7990e-132">Tome cuidado ao criar aplicativos tooonly usar esse disco temporário para dados não são persistentes como Olá VM pode ser migrada entre hosts durante um evento de manutenção.</span><span class="sxs-lookup"><span data-stu-id="7990e-132">Take care when designing applications tooonly use this temporary disk for non-persistent data as hello VM may be migrated between hosts during a maintenance event.</span></span> <span data-ttu-id="7990e-133">Todos os dados armazenados em disco temporário Olá seriam perdidos.</span><span class="sxs-lookup"><span data-stu-id="7990e-133">Any data stored on hello temporary disk would be lost.</span></span>

<span data-ttu-id="7990e-134">Alta disponibilidade e durabilidade é fornecido pelo Olá subjacente tooensure de ambiente de armazenamento do Azure que seus dados permaneçam protegidos contra falhas de hardware ou de manutenção não planejadas.</span><span class="sxs-lookup"><span data-stu-id="7990e-134">Durability and high availability is provided by hello underlying Azure Storage environment tooensure that your data remains protected against unplanned maintenance or hardware failures.</span></span> <span data-ttu-id="7990e-135">Ao projetar seu ambiente de armazenamento do Azure, você pode escolher tooreplicate armazenamento de máquina virtual:</span><span class="sxs-lookup"><span data-stu-id="7990e-135">As you design your Azure Storage environment, you can choose tooreplicate VM storage:</span></span>

* <span data-ttu-id="7990e-136">localmente em um datacenter do Azure fornecido</span><span class="sxs-lookup"><span data-stu-id="7990e-136">locally within a given Azure datacenter</span></span>
* <span data-ttu-id="7990e-137">entre os datacenters do Azure dentro de uma determinada região</span><span class="sxs-lookup"><span data-stu-id="7990e-137">across Azure datacenters within a given region</span></span>
* <span data-ttu-id="7990e-138">entre os datacenters do Azure em regiões diferentes.</span><span class="sxs-lookup"><span data-stu-id="7990e-138">across Azure datacenters across different regions.</span></span>

<span data-ttu-id="7990e-139">Você pode ler [mais sobre opções de replicação Olá para alta disponibilidade](../../storage/storage-introduction.md#replication-for-durability-and-high-availability).</span><span class="sxs-lookup"><span data-stu-id="7990e-139">You can read [more about hello replication options for high availability](../../storage/storage-introduction.md#replication-for-durability-and-high-availability).</span></span>

<span data-ttu-id="7990e-140">Discos do sistema operacional e discos de dados possuem um tamanho máximo de 4TB.</span><span class="sxs-lookup"><span data-stu-id="7990e-140">Operating system disks and data disks have a maximum size of 4TB.</span></span> <span data-ttu-id="7990e-141">Você pode usar o Gerenciador de Volume lógico (LVM) toosurpass esse limite pelo pool de discos toopresent lógico volumes de dados maiores do que 1.023 GB tooyour VM juntos.</span><span class="sxs-lookup"><span data-stu-id="7990e-141">You can use Logical Volume Manager (LVM) toosurpass this limit by pooling together data disks toopresent logical volumes larger than 1023GB tooyour VM.</span></span>

<span data-ttu-id="7990e-142">Há alguns limites de escalabilidade ao projetar suas implantações do Armazenamento do Azure. Para obter mais informações, consulte [Assinatura do Microsoft Azure e limite de serviços, cotas e restrições](../../azure-subscription-service-limits.md#storage-limits).</span><span class="sxs-lookup"><span data-stu-id="7990e-142">There are some scalability limits when designing your Azure Storage deployments - for more information, see [Microsoft Azure subscription and service limits, quotas, and constraints](../../azure-subscription-service-limits.md#storage-limits).</span></span> <span data-ttu-id="7990e-143">Consulte também [Metas de desempenho e escalabilidade do armazenamento do Azure](../../storage/storage-scalability-targets.md).</span><span class="sxs-lookup"><span data-stu-id="7990e-143">Also see [Azure storage scalability and performance targets](../../storage/storage-scalability-targets.md).</span></span>

<span data-ttu-id="7990e-144">Para armazenamento de aplicativos, é possível armazenar dados de objeto não estruturados, como documentos, imagens, backups, dados de configuração, logs etc.</span><span class="sxs-lookup"><span data-stu-id="7990e-144">For application storage, you can store unstructured object data such as documents, images, backups, configuration data, logs, etc.</span></span> <span data-ttu-id="7990e-145">usando o armazenamento de blobs.</span><span class="sxs-lookup"><span data-stu-id="7990e-145">using blob storage.</span></span> <span data-ttu-id="7990e-146">Em vez de seu aplicativo gravar tooa toohello de disco virtual anexado VMs, aplicativo hello pode gravar diretamente a tooAzure armazenamento de blob.</span><span class="sxs-lookup"><span data-stu-id="7990e-146">Rather than your application writing tooa virtual disk attached toohello VM, hello application can write directly tooAzure blob storage.</span></span> <span data-ttu-id="7990e-147">Armazenamento de blob também oferece a opção de saudação do [hot e interessantes camadas de armazenamento](../../storage/storage-blob-storage-tiers.md) dependendo de suas necessidades de disponibilidade e restrições de custo.</span><span class="sxs-lookup"><span data-stu-id="7990e-147">Blob storage also provides hello option of [hot and cool storage tiers](../../storage/storage-blob-storage-tiers.md) depending on your availability needs and cost constraints.</span></span>

## <a name="striped-disks"></a><span data-ttu-id="7990e-148">Discos distribuídos</span><span class="sxs-lookup"><span data-stu-id="7990e-148">Striped disks</span></span>
<span data-ttu-id="7990e-149">Além de permitir que você toocreate discos maior do que 1.023 GB, em muitos casos, usar a distribuição para discos de dados melhora o desempenho, permitindo que vários blobs tooback armazenamento de saudação para um único volume.</span><span class="sxs-lookup"><span data-stu-id="7990e-149">Besides allowing you toocreate disks larger than 1023 GB, in many instances, using striping for data disks enhances performance by allowing multiple blobs tooback hello storage for a single volume.</span></span> <span data-ttu-id="7990e-150">Com a distribuição, hello e/s necessária toowrite e dados de leitura de um único disco lógico continua em paralelo.</span><span class="sxs-lookup"><span data-stu-id="7990e-150">With striping, hello I/O required toowrite and read data from a single logical disk proceeds in parallel.</span></span>

<span data-ttu-id="7990e-151">O Azure impõe limites no número de saudação de discos de dados e a quantidade de largura de banda disponível, dependendo do tamanho da VM hello.</span><span class="sxs-lookup"><span data-stu-id="7990e-151">Azure imposes limits on hello number of data disks and amount of bandwidth available, depending on hello VM size.</span></span> <span data-ttu-id="7990e-152">Para obter detalhes, consulte [Tamanhos das máquinas virtuais](sizes.md)</span><span class="sxs-lookup"><span data-stu-id="7990e-152">For details, see [Sizes for virtual machines](sizes.md)</span></span>

<span data-ttu-id="7990e-153">Se você estiver usando a distribuição de disco para discos de dados do Azure, considere Olá diretrizes a seguir:</span><span class="sxs-lookup"><span data-stu-id="7990e-153">If you are using disk striping for Azure data disks, consider hello following guidelines:</span></span>

* <span data-ttu-id="7990e-154">Anexe discos de dados máximo de saudação permitidos para Olá tamanho da VM.</span><span class="sxs-lookup"><span data-stu-id="7990e-154">Attach hello maximum data disks allowed for hello VM size.</span></span>
* <span data-ttu-id="7990e-155">Use o LVM.</span><span class="sxs-lookup"><span data-stu-id="7990e-155">Use LVM.</span></span>
* <span data-ttu-id="7990e-156">Evite usar opções de cache de disco de dados do Azure (política de cache = Nenhuma).</span><span class="sxs-lookup"><span data-stu-id="7990e-156">Avoid using Azure data disk caching options (caching policy = None).</span></span>

<span data-ttu-id="7990e-157">Para obter mais informações, veja [Configuração de LVM em uma VM do Linux](configure-lvm.md).</span><span class="sxs-lookup"><span data-stu-id="7990e-157">For more information, see [Configuring LVM on a Linux VM](configure-lvm.md).</span></span>

## <a name="multiple-storage-accounts"></a><span data-ttu-id="7990e-158">Várias contas de armazenamento</span><span class="sxs-lookup"><span data-stu-id="7990e-158">Multiple storage accounts</span></span>
<span data-ttu-id="7990e-159">Esta seção não se aplica muito[discos gerenciado do Azure](../../storage/storage-managed-disks-overview.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json), pois você não criar contas de armazenamento separada.</span><span class="sxs-lookup"><span data-stu-id="7990e-159">This section does not apply too[Azure Managed Disks](../../storage/storage-managed-disks-overview.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json), as you do not create separate storage accounts.</span></span> 

<span data-ttu-id="7990e-160">Ao criar seu ambiente de armazenamento do Azure para discos não gerenciados, você pode usar várias contas de armazenamento como número de saudação de VMs implantar aumenta.</span><span class="sxs-lookup"><span data-stu-id="7990e-160">When designing your Azure Storage environment for unmanaged disks, you can use multiple storage accounts as hello number of VMs you deploy increases.</span></span> <span data-ttu-id="7990e-161">Essa abordagem ajuda a distribuir o hello e/s em Olá subjacente armazenamento do Azure infraestrutura toomaintain um desempenho ideal para suas máquinas virtuais e aplicativos.</span><span class="sxs-lookup"><span data-stu-id="7990e-161">This approach helps distribute out hello I/O across hello underlying Azure Storage infrastructure toomaintain optimum performance for your VMs and applications.</span></span> <span data-ttu-id="7990e-162">Como projetar aplicativos Olá que você está implantando, considere os requisitos de e/s de saudação que cada VM tem e balancear essas VMs entre contas de armazenamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="7990e-162">As you design hello applications that you are deploying, consider hello I/O requirements each VM has and balance out those VMs across Azure Storage accounts.</span></span> <span data-ttu-id="7990e-163">Tente tooavoid agrupamento Olá alta e/s mais exigentes VMs em toojust uma ou duas contas de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="7990e-163">Try tooavoid grouping all hello high I/O demanding VMs in toojust one or two storage accounts.</span></span>

<span data-ttu-id="7990e-164">Para obter mais informações sobre os recursos de e/s de saudação das diferentes opções de armazenamento do Azure hello e alguns recomendam máximos, consulte [destinos de escalabilidade e desempenho do armazenamento do Azure](../../storage/storage-scalability-targets.md).</span><span class="sxs-lookup"><span data-stu-id="7990e-164">For more information about hello I/O capabilities of hello different Azure Storage options and some recommend maximums, see [Azure storage scalability and performance targets](../../storage/storage-scalability-targets.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="7990e-165">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="7990e-165">Next steps</span></span>
[!INCLUDE [virtual-machines-linux-infrastructure-guidelines-next-steps](../../../includes/virtual-machines-linux-infrastructure-guidelines-next-steps.md)]

