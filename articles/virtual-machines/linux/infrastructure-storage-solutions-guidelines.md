---
title: "Soluções de armazenamento das VMs do Linux no Azure | Microsoft Docs"
description: "Saiba mais sobre as principais diretrizes de design e implementação referentes à implantação de soluções de armazenamento em serviços de infraestrutura do Azure."
documentationcenter: 
services: virtual-machines-linux
author: iainfoulds
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 3c368f07-189b-4520-bbe2-f4080253bbf2
ms.service: virtual-machines-linux
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 06/26/2017
ms.author: iainfou
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 7c5089b9db945b0e0f4523e53bb44c178ffd0781
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/03/2017
---
# <a name="azure-storage-infrastructure-guidelines-for-linux-vms"></a><span data-ttu-id="b0a30-103">Diretrizes de infraestrutura de armazenamento do Azure para VMs Linux</span><span class="sxs-lookup"><span data-stu-id="b0a30-103">Azure storage infrastructure guidelines for Linux VMs</span></span>

[!INCLUDE [virtual-machines-linux-infrastructure-guidelines-intro](../../../includes/virtual-machines-linux-infrastructure-guidelines-intro.md)]

<span data-ttu-id="b0a30-104">Este artigo destaca as noções básicas sobre as necessidades de armazenamento e considerações de design para atingir o desempenho de VM (máquina virtual) ideal.</span><span class="sxs-lookup"><span data-stu-id="b0a30-104">This article focuses on understanding storage needs and design considerations for achieving optimum virtual machine (VM) performance.</span></span>

## <a name="implementation-guidelines-for-storage"></a><span data-ttu-id="b0a30-105">Diretrizes de implementação de armazenamento</span><span class="sxs-lookup"><span data-stu-id="b0a30-105">Implementation guidelines for storage</span></span>
<span data-ttu-id="b0a30-106">Decisões:</span><span class="sxs-lookup"><span data-stu-id="b0a30-106">Decisions:</span></span>

* <span data-ttu-id="b0a30-107">Você pretende usar o Azure Managed Disks ou discos não gerenciados?</span><span class="sxs-lookup"><span data-stu-id="b0a30-107">Are you going to use Azure Managed Disks or unmanaged disks?</span></span>
* <span data-ttu-id="b0a30-108">Você precisa usar o armazenamento Standard ou Premium para sua carga de trabalho?</span><span class="sxs-lookup"><span data-stu-id="b0a30-108">Do you need to use Standard or Premium storage for your workload?</span></span>
* <span data-ttu-id="b0a30-109">Você precisa de distribuição de disco para criar discos maiores que 4TB?</span><span class="sxs-lookup"><span data-stu-id="b0a30-109">Do you need disk striping to create disks larger than 4TB?</span></span>
* <span data-ttu-id="b0a30-110">Você precisa da distribuição de discos para obter o desempenho de E/S ideal para sua carga de trabalho?</span><span class="sxs-lookup"><span data-stu-id="b0a30-110">Do you need disk striping to achieve optimal I/O performance for your workload?</span></span>
* <span data-ttu-id="b0a30-111">De que conjunto de contas de armazenamento você precisa para hospedar a infraestrutura ou a carga de trabalho de TI?</span><span class="sxs-lookup"><span data-stu-id="b0a30-111">What set of storage accounts do you need to host your IT workload or infrastructure?</span></span>

<span data-ttu-id="b0a30-112">Tarefas:</span><span class="sxs-lookup"><span data-stu-id="b0a30-112">Tasks:</span></span>

* <span data-ttu-id="b0a30-113">Examinar as demandas de E/S dos aplicativos que serão implantados e planejar a quantidade e o tipo apropriados de contas de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="b0a30-113">Review I/O demands of the applications you are deploying and plan the appropriate number and type of storage accounts.</span></span>
* <span data-ttu-id="b0a30-114">Crie o conjunto de contas de armazenamento usando a sua convenção de nomenclatura.</span><span class="sxs-lookup"><span data-stu-id="b0a30-114">Create the set of storage accounts using your naming convention.</span></span> <span data-ttu-id="b0a30-115">Você pode usar a CLI do Azure ou o portal.</span><span class="sxs-lookup"><span data-stu-id="b0a30-115">You can use the Azure CLI or the portal.</span></span>

## <a name="storage"></a><span data-ttu-id="b0a30-116">Armazenamento</span><span class="sxs-lookup"><span data-stu-id="b0a30-116">Storage</span></span>
<span data-ttu-id="b0a30-117">O Armazenamento do Azure é uma parte fundamental de implantação e gerenciamento de aplicativos e VMs (máquinas virtuais).</span><span class="sxs-lookup"><span data-stu-id="b0a30-117">Azure Storage is a key part of deploying and managing virtual machines (VMs) and applications.</span></span> <span data-ttu-id="b0a30-118">O Armazenamento do Azure fornece serviços para armazenar dados de arquivo, dados não estruturados e mensagens, além de fazer parte da infraestrutura que dá suporte às VMs.</span><span class="sxs-lookup"><span data-stu-id="b0a30-118">Azure Storage provides services for storing file data, unstructured data, and messages, and it is also part of the infrastructure supporting VMs.</span></span>

<span data-ttu-id="b0a30-119">O [Azure Managed Disks](../../storage/storage-managed-disks-overview.md) lida com o armazenamento para você nos bastidores.</span><span class="sxs-lookup"><span data-stu-id="b0a30-119">[Azure Managed Disks](../../storage/storage-managed-disks-overview.md) handles storage for you behind the scenes.</span></span> <span data-ttu-id="b0a30-120">Com discos não gerenciados, você cria contas de armazenamento para armazenar os discos (arquivos VHD) para as VMs do Azure.</span><span class="sxs-lookup"><span data-stu-id="b0a30-120">With unmanaged disks, you create storage accounts to hold the disks (VHD files) for your Azure VMs.</span></span> <span data-ttu-id="b0a30-121">Ao aumentar, é necessário verificar se você criou contas de armazenamento adicionais para não exceder o limite de IOPS de armazenamento com um dos discos.</span><span class="sxs-lookup"><span data-stu-id="b0a30-121">When scaling up, you must make sure you created additional storage accounts so you don’t exceed the IOPS limit for storage with any of your disks.</span></span> <span data-ttu-id="b0a30-122">Com o Managed Disks lidando com o armazenamento, não há mais os limites de conta de armazenamento (como 20.000 IOPS/conta).</span><span class="sxs-lookup"><span data-stu-id="b0a30-122">With Managed Disks handling storage, you are no longer limited by the storage account limits (such as 20,000 IOPS / account).</span></span> <span data-ttu-id="b0a30-123">Também não é mais necessário copiar as imagens personalizadas (arquivos VHD) em várias contas de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="b0a30-123">You also no longer have to copy your custom images (VHD files) to multiple storage accounts.</span></span> <span data-ttu-id="b0a30-124">Você pode gerenciá-las em um local central, uma conta de armazenamento por região do Azure, e usá-las para criar centenas de VMs em uma assinatura.</span><span class="sxs-lookup"><span data-stu-id="b0a30-124">You can manage them in a central location – one storage account per Azure region – and use them to create hundreds of VMs in a subscription.</span></span> <span data-ttu-id="b0a30-125">Recomendamos o uso do Managed Disks para novas implantações.</span><span class="sxs-lookup"><span data-stu-id="b0a30-125">We recommend you use Managed Disks for new deployments.</span></span>

<span data-ttu-id="b0a30-126">Há dois tipos de conta de armazenamento disponíveis para dar suporte às VMs:</span><span class="sxs-lookup"><span data-stu-id="b0a30-126">There are two types of storage accounts available for supporting VMs:</span></span>

* <span data-ttu-id="b0a30-127">Contas de armazenamento Standard fornece acesso ao armazenamento de blobs (usado para armazenar discos da VM do Azure), armazenamento de tabelas, armazenamento de filas e armazenamento de arquivos.</span><span class="sxs-lookup"><span data-stu-id="b0a30-127">Standard storage accounts give you access to blob storage (used for storing Azure VM disks), table storage, queue storage, and file storage.</span></span>
* <span data-ttu-id="b0a30-128">[Armazenamento Premium](../../storage/storage-premium-storage.md) dão suporte a discos de alto desempenho e baixa latência para cargas de trabalho de E/S intensiva, como cluster fragmentado do MongoDB.</span><span class="sxs-lookup"><span data-stu-id="b0a30-128">[Premium storage](../../storage/storage-premium-storage.md) accounts deliver high-performance, low-latency disk support for I/O intensive workloads, such as MongoDB Sharded cluster.</span></span> <span data-ttu-id="b0a30-129">Um armazenamento premium dá suporte no momento somente a discos de VM do Azure.</span><span class="sxs-lookup"><span data-stu-id="b0a30-129">Premium storage currently supports Azure VM disks only.</span></span>

<span data-ttu-id="b0a30-130">O Azure cria VMs com um disco do sistema operacional, um disco temporário e zero ou mais discos de dados opcionais.</span><span class="sxs-lookup"><span data-stu-id="b0a30-130">Azure creates VMs with an operating system disk, a temporary disk, and zero or more optional data disks.</span></span> <span data-ttu-id="b0a30-131">O disco do sistema operacional e os discos de dados são blobs de página do Azure, enquanto o disco temporário é armazenado localmente no nó em que a máquina reside.</span><span class="sxs-lookup"><span data-stu-id="b0a30-131">The operating system disk and data disks are Azure page blobs, whereas the temporary disk is stored locally on the node where the machine lives.</span></span> <span data-ttu-id="b0a30-132">Tome cuidado ao projetar aplicativos para usar somente este disco temporário para dados não persistentes, pois a VM poderá ser migrada entre hosts durante um evento de manutenção.</span><span class="sxs-lookup"><span data-stu-id="b0a30-132">Take care when designing applications to only use this temporary disk for non-persistent data as the VM may be migrated between hosts during a maintenance event.</span></span> <span data-ttu-id="b0a30-133">Todos os dados armazenados no disco temporário seriam perdidos.</span><span class="sxs-lookup"><span data-stu-id="b0a30-133">Any data stored on the temporary disk would be lost.</span></span>

<span data-ttu-id="b0a30-134">Durabilidade e alta disponibilidade são fornecidas pelo ambiente de Armazenamento do Azure subjacente para garantir que seus dados permaneçam protegidos contra falhas de hardware ou de manutenção não planejadas.</span><span class="sxs-lookup"><span data-stu-id="b0a30-134">Durability and high availability is provided by the underlying Azure Storage environment to ensure that your data remains protected against unplanned maintenance or hardware failures.</span></span> <span data-ttu-id="b0a30-135">Ao projetar seu ambiente de Armazenamento do Azure, você pode optar por replicar o armazenamento da VM:</span><span class="sxs-lookup"><span data-stu-id="b0a30-135">As you design your Azure Storage environment, you can choose to replicate VM storage:</span></span>

* <span data-ttu-id="b0a30-136">localmente em um datacenter do Azure fornecido</span><span class="sxs-lookup"><span data-stu-id="b0a30-136">locally within a given Azure datacenter</span></span>
* <span data-ttu-id="b0a30-137">entre os datacenters do Azure dentro de uma determinada região</span><span class="sxs-lookup"><span data-stu-id="b0a30-137">across Azure datacenters within a given region</span></span>
* <span data-ttu-id="b0a30-138">entre os datacenters do Azure em regiões diferentes.</span><span class="sxs-lookup"><span data-stu-id="b0a30-138">across Azure datacenters across different regions.</span></span>

<span data-ttu-id="b0a30-139">Você pode ler [mais sobre as opções de replicação para alta disponibilidade](../../storage/storage-introduction.md#replication-for-durability-and-high-availability).</span><span class="sxs-lookup"><span data-stu-id="b0a30-139">You can read [more about the replication options for high availability](../../storage/storage-introduction.md#replication-for-durability-and-high-availability).</span></span>

<span data-ttu-id="b0a30-140">Discos do sistema operacional e discos de dados possuem um tamanho máximo de 4TB.</span><span class="sxs-lookup"><span data-stu-id="b0a30-140">Operating system disks and data disks have a maximum size of 4TB.</span></span> <span data-ttu-id="b0a30-141">É possível usar o LVM (Gerenciador de Volume Lógico) para ultrapassar esse limite com o pool de discos de dados para apresentar volumes lógicos maiores que 1.023 GB à sua VM.</span><span class="sxs-lookup"><span data-stu-id="b0a30-141">You can use Logical Volume Manager (LVM) to surpass this limit by pooling together data disks to present logical volumes larger than 1023GB to your VM.</span></span>

<span data-ttu-id="b0a30-142">Há alguns limites de escalabilidade ao projetar suas implantações do Armazenamento do Azure. Para obter mais informações, consulte [Assinatura do Microsoft Azure e limite de serviços, cotas e restrições](../../azure-subscription-service-limits.md#storage-limits).</span><span class="sxs-lookup"><span data-stu-id="b0a30-142">There are some scalability limits when designing your Azure Storage deployments - for more information, see [Microsoft Azure subscription and service limits, quotas, and constraints](../../azure-subscription-service-limits.md#storage-limits).</span></span> <span data-ttu-id="b0a30-143">Consulte também [Metas de desempenho e escalabilidade do armazenamento do Azure](../../storage/storage-scalability-targets.md).</span><span class="sxs-lookup"><span data-stu-id="b0a30-143">Also see [Azure storage scalability and performance targets](../../storage/storage-scalability-targets.md).</span></span>

<span data-ttu-id="b0a30-144">Para armazenamento de aplicativos, é possível armazenar dados de objeto não estruturados, como documentos, imagens, backups, dados de configuração, logs etc.</span><span class="sxs-lookup"><span data-stu-id="b0a30-144">For application storage, you can store unstructured object data such as documents, images, backups, configuration data, logs, etc.</span></span> <span data-ttu-id="b0a30-145">usando o armazenamento de blobs.</span><span class="sxs-lookup"><span data-stu-id="b0a30-145">using blob storage.</span></span> <span data-ttu-id="b0a30-146">Em vez de seu aplicativo gravar em um disco virtual anexado à VM, o aplicativo poderá gravar diretamente no armazenamento de blobs do Azure.</span><span class="sxs-lookup"><span data-stu-id="b0a30-146">Rather than your application writing to a virtual disk attached to the VM, the application can write directly to Azure blob storage.</span></span> <span data-ttu-id="b0a30-147">O armazenamento de blobs também oferece a opção de [camadas de armazenamento quentes e frias](../../storage/storage-blob-storage-tiers.md) dependendo de suas necessidades de disponibilidade e restrições de custo.</span><span class="sxs-lookup"><span data-stu-id="b0a30-147">Blob storage also provides the option of [hot and cool storage tiers](../../storage/storage-blob-storage-tiers.md) depending on your availability needs and cost constraints.</span></span>

## <a name="striped-disks"></a><span data-ttu-id="b0a30-148">Discos distribuídos</span><span class="sxs-lookup"><span data-stu-id="b0a30-148">Striped disks</span></span>
<span data-ttu-id="b0a30-149">Além de permitir que você crie discos com mais de 1023 GB, em muitos casos, o uso da distribuição para discos de dados pode melhorar o desempenho, permitindo que vários blobs façam o armazenamento de um único volume.</span><span class="sxs-lookup"><span data-stu-id="b0a30-149">Besides allowing you to create disks larger than 1023 GB, in many instances, using striping for data disks enhances performance by allowing multiple blobs to back the storage for a single volume.</span></span> <span data-ttu-id="b0a30-150">Com a distribuição, a E/S necessária para gravar e ler dados de um único disco lógico continua em paralelo.</span><span class="sxs-lookup"><span data-stu-id="b0a30-150">With striping, the I/O required to write and read data from a single logical disk proceeds in parallel.</span></span>

<span data-ttu-id="b0a30-151">O Azure impõe limites no número de discos de dados e na quantidade de largura de banda disponíveis, dependendo do tamanho da VM.</span><span class="sxs-lookup"><span data-stu-id="b0a30-151">Azure imposes limits on the number of data disks and amount of bandwidth available, depending on the VM size.</span></span> <span data-ttu-id="b0a30-152">Para obter detalhes, consulte [Tamanhos das máquinas virtuais](sizes.md)</span><span class="sxs-lookup"><span data-stu-id="b0a30-152">For details, see [Sizes for virtual machines](sizes.md)</span></span>

<span data-ttu-id="b0a30-153">Se você estiver usando a distribuição de disco para os discos de dados do Azure, considere as seguintes diretrizes:</span><span class="sxs-lookup"><span data-stu-id="b0a30-153">If you are using disk striping for Azure data disks, consider the following guidelines:</span></span>

* <span data-ttu-id="b0a30-154">Anexar o número máximo de discos de dados permitidos para o tamanho da VM.</span><span class="sxs-lookup"><span data-stu-id="b0a30-154">Attach the maximum data disks allowed for the VM size.</span></span>
* <span data-ttu-id="b0a30-155">Use o LVM.</span><span class="sxs-lookup"><span data-stu-id="b0a30-155">Use LVM.</span></span>
* <span data-ttu-id="b0a30-156">Evite usar opções de cache de disco de dados do Azure (política de cache = Nenhuma).</span><span class="sxs-lookup"><span data-stu-id="b0a30-156">Avoid using Azure data disk caching options (caching policy = None).</span></span>

<span data-ttu-id="b0a30-157">Para obter mais informações, veja [Configuração de LVM em uma VM do Linux](configure-lvm.md).</span><span class="sxs-lookup"><span data-stu-id="b0a30-157">For more information, see [Configuring LVM on a Linux VM](configure-lvm.md).</span></span>

## <a name="multiple-storage-accounts"></a><span data-ttu-id="b0a30-158">Várias contas de armazenamento</span><span class="sxs-lookup"><span data-stu-id="b0a30-158">Multiple storage accounts</span></span>
<span data-ttu-id="b0a30-159">Esta seção não se aplica ao [Azure Managed Disks](../../storage/storage-managed-disks-overview.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json), pois você não cria contas de armazenamento separadas.</span><span class="sxs-lookup"><span data-stu-id="b0a30-159">This section does not apply to [Azure Managed Disks](../../storage/storage-managed-disks-overview.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json), as you do not create separate storage accounts.</span></span> 

<span data-ttu-id="b0a30-160">Durante a criação do ambiente do Armazenamento do Azure para discos não gerenciados, você poderá usar várias contas de armazenamento conforme o número de VMs implantadas aumentar.</span><span class="sxs-lookup"><span data-stu-id="b0a30-160">When designing your Azure Storage environment for unmanaged disks, you can use multiple storage accounts as the number of VMs you deploy increases.</span></span> <span data-ttu-id="b0a30-161">Essa abordagem ajuda a distribuir a E/S em toda a infraestrutura subjacente do Armazenamento do Azure, para manter o desempenho ideal para suas VMs e aplicativos.</span><span class="sxs-lookup"><span data-stu-id="b0a30-161">This approach helps distribute out the I/O across the underlying Azure Storage infrastructure to maintain optimum performance for your VMs and applications.</span></span> <span data-ttu-id="b0a30-162">Ao projetar os aplicativos que serão implantados, considere os requisitos de E/S que cada VM terá e faça um balanceamento dessas VMs entre as contas do Armazenamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="b0a30-162">As you design the applications that you are deploying, consider the I/O requirements each VM has and balance out those VMs across Azure Storage accounts.</span></span> <span data-ttu-id="b0a30-163">Tente evitar agrupar todas as VMs que exigem E/S alta em apenas uma ou duas contas de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="b0a30-163">Try to avoid grouping all the high I/O demanding VMs in to just one or two storage accounts.</span></span>

<span data-ttu-id="b0a30-164">Para saber mais sobre as funcionalidades de E/S das diferentes opções do Armazenamento do Azure e de alguns limites máximos recomendáveis, veja [Metas de desempenho e escalabilidade do armazenamento do Azure](../../storage/storage-scalability-targets.md).</span><span class="sxs-lookup"><span data-stu-id="b0a30-164">For more information about the I/O capabilities of the different Azure Storage options and some recommend maximums, see [Azure storage scalability and performance targets](../../storage/storage-scalability-targets.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="b0a30-165">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="b0a30-165">Next steps</span></span>
[!INCLUDE [virtual-machines-linux-infrastructure-guidelines-next-steps](../../../includes/virtual-machines-linux-infrastructure-guidelines-next-steps.md)]

