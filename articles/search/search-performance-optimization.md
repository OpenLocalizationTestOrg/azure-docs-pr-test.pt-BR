---
title: "Considerações de desempenho e otimização de pesquisa aaaAzure | Microsoft Docs"
description: Ajustar o desempenho da Pesquisa do Azure e configurar o dimensionamento ideal
services: search
documentationcenter: 
author: LiamCavanagh
manager: pablocas
editor: 
ms.assetid: 4d3cd864-29d2-4921-be0d-a3f1a819de46
ms.service: search
ms.devlang: rest-api
ms.workload: search
ms.topic: article
ms.tgt_pltfrm: na
ms.date: 05/01/2017
ms.author: liamca
ms.openlocfilehash: 725149ba32773ab6b4c9d4b441424aba78db7c42
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="azure-search-performance-and-optimization-considerations"></a><span data-ttu-id="1b0a9-103">Considerações de desempenho e otimização da Pesquisa do Azure</span><span class="sxs-lookup"><span data-stu-id="1b0a9-103">Azure Search performance and optimization considerations</span></span>
<span data-ttu-id="1b0a9-104">Uma experiência de pesquisa grande é uma chave toosuccess para muitos móveis e aplicativos da web.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-104">A great search experience is a key toosuccess for many mobile and web applications.</span></span> <span data-ttu-id="1b0a9-105">De imóveis, catálogos de tooonline tooused carro mercados, a pesquisa rápida e resultados relevantes afetará experiência de saudação do cliente.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-105">From real estate, tooused car marketplaces tooonline catalogs, fast search and relevant results will affect hello customer experience.</span></span> <span data-ttu-id="1b0a9-106">Este documento é pretendido toohelp descobrir as práticas recomendadas para como Olá tooget máximo proveito de pesquisa do Azure, especialmente para cenários avançados com sofisticadas requisitos de escalabilidade, suporte a vários idiomas ou classificação personalizada.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-106">This document is intended toohelp you discover best practices for how tooget hello most out of Azure Search, especially for advanced scenarios with sophisticated requirements for scalability, multi-language support, or custom ranking.</span></span>  <span data-ttu-id="1b0a9-107">Além disso, este documento descreve componentes internos e cobre abordagens que funcionam bem em aplicativos reais de clientes.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-107">In addition, this document outlines internals and covers approaches that work effectively in real-world customer apps.</span></span>

## <a name="performance-and-scale-tuning-for-search-services"></a><span data-ttu-id="1b0a9-108">Ajuste de desempenho e escala para serviços de pesquisa</span><span class="sxs-lookup"><span data-stu-id="1b0a9-108">Performance and scale tuning for Search services</span></span>
<span data-ttu-id="1b0a9-109">Estamos todos os mecanismos de toosearch usado como o Bing e Google e saudação de alto desempenho que oferecem.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-109">We are all used toosearch engines such as Bing and Google and hello high performance they offer.</span></span>  <span data-ttu-id="1b0a9-110">Como resultado, quando os clientes usam seu aplicativo móvel ou da Web habilitado para pesquisa, eles esperam características de desempenho semelhantes.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-110">As a result, when customers use your search-enabled web or mobile application, they will expect similar performance characteristics.</span></span>  <span data-ttu-id="1b0a9-111">Quando a otimização de desempenho da pesquisa, uma das abordagens recomendadas Olá é toofocus na latência, que é Olá tempo uma consulta toocomplete e retornar resultados.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-111">When optimizing for search performance, one of hello best approaches is toofocus on latency, which is hello time a query takes toocomplete and return results.</span></span>  <span data-ttu-id="1b0a9-112">Ao otimização a latência de pesquisa é importante:</span><span class="sxs-lookup"><span data-stu-id="1b0a9-112">When optimizing for search latency it is important to:</span></span>

1. <span data-ttu-id="1b0a9-113">Escolha uma latência de destino (ou a quantidade máxima de tempo) que uma solicitação de pesquisa típica deve levar toocomplete.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-113">Pick a target latency (or maximum amount of time) that a typical search request should take toocomplete.</span></span>
2. <span data-ttu-id="1b0a9-114">Criar e testar uma carga de trabalho real em relação a seu serviço de pesquisa com um conjunto de dados realista toomeasure essas taxas de latência.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-114">Create and test a real workload against your search service with a realistic dataset toomeasure these latency rates.</span></span>
3. <span data-ttu-id="1b0a9-115">Iniciar com um número baixo de consultas por segundo (QPS) e continue o número de saudação tooincrease executado no teste de saudação até que a consulta Olá latência está abaixo da saudação definido latência de destino.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-115">Start with a low number of queries per second (QPS) and continue tooincrease hello number executed in hello test until hello query latency drops below hello defined target latency.</span></span>  <span data-ttu-id="1b0a9-116">Este é um toohelp benchmark importante que você planeje a expansão à medida que aumenta de seu aplicativo em uso.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-116">This is an important benchmark toohelp you plan for scale as your application grows in usage.</span></span>
4. <span data-ttu-id="1b0a9-117">Sempre que possível, reutilize as conexões HTTP.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-117">Wherever possible, reuse HTTP connections.</span></span>  <span data-ttu-id="1b0a9-118">Se você estiver usando Olá SDK .NET da pesquisa do Azure, isso significa que você deve reutilizar uma instância ou [SearchIndexClient](https://docs.microsoft.com/dotnet/api/microsoft.azure.search.searchindexclient) de instância e se você estiver usando Olá API REST, você deve reutilizar um único HttpClient.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-118">If you are using hello Azure Search .NET SDK, this means you should reuse an instance or [SearchIndexClient](https://docs.microsoft.com/dotnet/api/microsoft.azure.search.searchindexclient) instance, and if you are using hello REST API, you should reuse a single HttpClient.</span></span>

<span data-ttu-id="1b0a9-119">Ao criar essas cargas de trabalho de teste, há algumas características de pesquisa do Azure tookeep em mente:</span><span class="sxs-lookup"><span data-stu-id="1b0a9-119">While creating these test workloads, there are some characteristics of Azure Search tookeep in mind:</span></span>

1. <span data-ttu-id="1b0a9-120">É possível toopush muitas consultas feitas ao mesmo tempo, que recursos de saudação disponíveis em seu serviço de pesquisa do Azure serão sobrecarregados.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-120">It is possible toopush so many search queries at one time, that hello resources available in your Azure Search service will be overwhelmed.</span></span>  <span data-ttu-id="1b0a9-121">Quando isso acontecer, você verá códigos de resposta HTTP 503.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-121">When this happens, you will see HTTP 503 response codes.</span></span>  <span data-ttu-id="1b0a9-122">Por esse motivo, é melhor toostart com vários intervalos de pesquisa solicitações toosee Olá diferenças em taxas de latência conforme você adiciona mais solicitações de pesquisa.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-122">For this reason, it is best toostart with various ranges of search requests toosee hello differences in latency rates as you add more search requests.</span></span>
2. <span data-ttu-id="1b0a9-123">Carregamento de conteúdo tooAzure pesquisa afetará Olá desempenho geral e latência de Olá serviço de pesquisa do Azure.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-123">Uploading of content tooAzure Search will impact hello overall performance and latency of hello Azure Search service.</span></span>  <span data-ttu-id="1b0a9-124">Se você espera que os dados de toosend enquanto os usuários estão fazendo pesquisas, é importante tootake essa carga de trabalho na conta em seus testes.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-124">If you expect toosend data while users are performing searches, it is important tootake this workload into account in your tests.</span></span>
3. <span data-ttu-id="1b0a9-125">Nem todas as consultas de pesquisa executará em Olá mesmo níveis de desempenho.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-125">Not every search query will perform at hello same performance levels.</span></span>  <span data-ttu-id="1b0a9-126">Por exemplo, uma sugestão de pesquisa ou pesquisa de documento normalmente será executada mais rápido do que uma consulta com um número considerável de facetas e filtros.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-126">For example, a document lookup or search suggestion will typically perform faster than a query with a significant number of facets and filters.</span></span>  <span data-ttu-id="1b0a9-127">É melhor Olá tootake várias consultas que você espera toosee em conta ao criar seus testes.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-127">It is best tootake hello various queries you expect toosee into account when building your tests.</span></span>  
4. <span data-ttu-id="1b0a9-128">Variação de solicitações de pesquisa é importante porque, se você executar continuamente Olá mesmo solicitações de pesquisa, o cache de dados inicial toomake desempenho ficará melhor que ele pode com uma consulta mais diferentes definido.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-128">Variation of search requests is important because if you continually execute hello same search requests, caching of data will start toomake performance look better than it might with a more disparate query set.</span></span>

> [!NOTE]
> <span data-ttu-id="1b0a9-129">[Teste de carga do Visual Studio](https://www.visualstudio.com/docs/test/performance-testing/run-performance-tests-app-before-release) é tooperform uma maneira muito bom seu parâmetro de comparação testes que permite a você solicitações tooexecute HTTP que seria necessário para executar consultas em relação a pesquisa do Azure e habilita a paralelização de solicitações.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-129">[Visual Studio Load Testing](https://www.visualstudio.com/docs/test/performance-testing/run-performance-tests-app-before-release) is a really good way tooperform your benchmark tests as it allows you tooexecute HTTP requests as you would need for executing queries against Azure Search and enables parallelization of requests.</span></span>
> 
> 

## <a name="scaling-azure-search-for-high-query-rates-and-throttled-requests"></a><span data-ttu-id="1b0a9-130">Dimensionamento da Pesquisa do Azure para taxas de consulta altas e solicitações limitadas</span><span class="sxs-lookup"><span data-stu-id="1b0a9-130">Scaling Azure Search for high query rates and throttled requests</span></span>
<span data-ttu-id="1b0a9-131">Quando você está recebendo muitas solicitações limitadas ou excede suas taxas de latência de destino de uma carga maior de consulta, você pode examinar as taxas de latência de toodecrease de duas maneiras:</span><span class="sxs-lookup"><span data-stu-id="1b0a9-131">When you are receiving too many throttled requests or exceed your target latency rates from an increased query load, you can look toodecrease latency rates in one of two ways:</span></span>

1. <span data-ttu-id="1b0a9-132">**Réplicas de aumento:** uma réplica é semelhante a uma cópia de dados permitir solicitações de saldo de tooload de pesquisa do Azure em relação a saudação várias cópias.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-132">**Increase Replicas:**  A replica is like a copy of your data allowing Azure Search tooload balance requests against hello multiple copies.</span></span>  <span data-ttu-id="1b0a9-133">Todos o balanceamento de carga e a replicação de dados por meio de réplicas é gerenciada pela pesquisa do Azure e você pode alterar o número de saudação de réplicas alocada para o serviço a qualquer momento.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-133">All load balancing and replication of data across replicas is managed by Azure Search and you can alter hello number of replicas allocated for your service at any time.</span></span>  <span data-ttu-id="1b0a9-134">Você pode alocar too12 réplicas em um serviço de pesquisa padrão e 3 réplicas em um serviço de pesquisa básica.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-134">You can allocate up too12 replicas in a Standard search service and 3 replicas in a Basic search service.</span></span> <span data-ttu-id="1b0a9-135">As réplicas podem ser ajustadas de saudação [portal do Azure](search-create-service-portal.md) ou [PowerShell](search-manage-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="1b0a9-135">Replicas can be adjusted either from hello [Azure portal](search-create-service-portal.md) or [PowerShell](search-manage-powershell.md).</span></span>
2. <span data-ttu-id="1b0a9-136">**Aumentar a Camada de Pesquisa:** o Azure Search vem em [várias camadas](https://azure.microsoft.com/pricing/details/search/), e cada uma dessas camadas oferece níveis diferentes de desempenho.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-136">**Increase Search Tier:**  Azure Search comes in a [number of tiers](https://azure.microsoft.com/pricing/details/search/) and each of these tiers offers different levels of performance.</span></span>  <span data-ttu-id="1b0a9-137">Em alguns casos, você pode ter muitas consultas nessa camada Olá em que estão não pode fornecer taxas suficientemente baixa latência, mesmo quando réplicas são maximizadas.  Nesse caso, convém tooconsider aproveitar um dos níveis mais altos de pesquisa hello como camada de S3 de pesquisa do Azure Olá que é adequado para cenários com um grande número de documentos e cargas de trabalho de consulta muito alta.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-137">In some cases, you may have so many queries that hello tier you are on cannot provide sufficiently low latency rates, even when replicas are maxed out.  In this case, you may want tooconsider leveraging one of hello higher search tiers such as hello Azure Search S3 tier that is well suited for scenarios with large numbers of documents and extremely high query workloads.</span></span>

## <a name="scaling-azure-search-for-slow-individual-queries"></a><span data-ttu-id="1b0a9-138">Dimensionamento da Pesquisa do Azure para consultas individuais lentas</span><span class="sxs-lookup"><span data-stu-id="1b0a9-138">Scaling Azure Search for slow individual queries</span></span>
<span data-ttu-id="1b0a9-139">Outro motivo por que as taxas de latência podem ser lentas é de uma única consulta demorando muito toocomplete.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-139">Another reason why latency rates can be slow is from a single query taking too long toocomplete.</span></span>  <span data-ttu-id="1b0a9-140">Nesse caso, a adição de réplicas não melhorará as taxas de latência.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-140">In this case, adding replicas will not improve latency rates.</span></span>  <span data-ttu-id="1b0a9-141">Para esses casos, há duas opções disponíveis:</span><span class="sxs-lookup"><span data-stu-id="1b0a9-141">For this case there are two options available:</span></span>

1. <span data-ttu-id="1b0a9-142">**Aumentar Partições** Uma partição é um mecanismo para dividir os dados entre recursos extras.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-142">**Increase Partitions** A partition is a mechanism for splitting your data across extra resources.</span></span>  <span data-ttu-id="1b0a9-143">Por esse motivo, quando você adiciona uma segunda partição, seus dados são divididos em dois.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-143">For this reason, when you add a second partition, your data gets split into two.</span></span>  <span data-ttu-id="1b0a9-144">Uma terceira partição divide o índice em três etc.  Isso também tem o efeito de saudação que em alguns casos, consultas lentas executará mais rápido devido a paralelização toohello de computação.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-144">A third partition splits your index into three, etc.  This also has hello effect that in some cases, slow queries will perform faster due toohello parallelization of computation.</span></span>  <span data-ttu-id="1b0a9-145">Há alguns exemplos nos quais temos visto essa paralelização funcionar muito bem com consultas de baixa seletividade.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-145">There are a few examples of where we have seen this parallelization work extremely well with queries that have low selectivity queries.</span></span>  <span data-ttu-id="1b0a9-146">Isso consiste em consultas que corresponder a vários documentos ou quando as necessidades de facetas tooprovide contagens de grandes números de documentos.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-146">This consists of queries that match many documents or when faceting needs tooprovide counts over large numbers of documents.</span></span>  <span data-ttu-id="1b0a9-147">Como há que um lote de computação necessária tooscore relevância de saudação de documentos de saudação ou números de saudação toocount de documentos, adicionando partições adicionais podem ajudar a computação adicionais tooprovide.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-147">Since there is a lot of computation needed tooscore hello relevancy of hello documents or toocount hello numbers of documents, adding extra partitions can help tooprovide additional computation.</span></span>  
   
   <span data-ttu-id="1b0a9-148">Pode haver um máximo de 12 partições no serviço de pesquisa padrão e 1 partição no serviço de pesquisa básica hello.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-148">There can be a maximum of 12 partitions in Standard search service and 1 partition in hello basic search service.</span></span>  <span data-ttu-id="1b0a9-149">As partições podem ser ajustadas de saudação [portal do Azure](search-create-service-portal.md) ou [PowerShell](search-manage-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="1b0a9-149">Partitions can be adjusted either from hello [Azure portal](search-create-service-portal.md) or [PowerShell](search-manage-powershell.md).</span></span>
2. <span data-ttu-id="1b0a9-150">**Campos de cardinalidade alto limite:** um campo de alta cardinalidade consiste em uma facetable ou podem ser filtrado campo que tem um número significativo de valores exclusivos e como resultado, assume muitos recursos toocompute resultados.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-150">**Limit High Cardinality Fields:** A high cardinality field consists of a facetable or filterable field that has a significant number of unique values, and as a result, takes a lot of resources toocompute results over.</span></span>   <span data-ttu-id="1b0a9-151">Por exemplo, a configuração de um campo de descrição ou a identificação de produto como facetable/filtrável faria para alta cardinalidade porque a maioria dos valores de saudação do documento toodocument é exclusiva.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-151">For example, setting a Product ID or Description field as facetable/filterable would make for high cardinality because most of hello values from document toodocument are unique.</span></span> <span data-ttu-id="1b0a9-152">Sempre que possível, limitar o número de saudação de campos de alta cardinalidade.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-152">Wherever possible, limit hello number of high cardinality fields.</span></span>
3. <span data-ttu-id="1b0a9-153">**Camada de pesquisa de aumento:** subindo tooa mais alto nível de pesquisa do Azure pode ser outro desempenho tooimprove de maneira de consultas lentas.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-153">**Increase Search Tier:**  Moving up tooa higher Azure Search tier can be another way tooimprove performance of slow queries.</span></span>  <span data-ttu-id="1b0a9-154">Cada camada superior também fornece uma CPU mais rápida e mais memória, o que pode ter um impacto positivo no desempenho da consulta.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-154">Each higher tier also provides faster CPU’s and more memory which can have a positive impact on query performance.</span></span>

## <a name="scaling-for-availability"></a><span data-ttu-id="1b0a9-155">Dimensionamento para disponibilidade</span><span class="sxs-lookup"><span data-stu-id="1b0a9-155">Scaling for availability</span></span>
<span data-ttu-id="1b0a9-156">As réplicas não apenas ajudam a reduzir a latência da consulta, mas também permitem a alta disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-156">Replicas not only help reduce query latency but can also allow for high availability.</span></span>  <span data-ttu-id="1b0a9-157">Com uma única réplica, você deve esperar o tempo de inatividade periódico devido tooserver reinicializações após as atualizações de software ou de outros eventos de manutenção que ocorrerão.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-157">With a single replica, you should expect periodic downtime due tooserver reboots after software updates or for other maintenance events that will occur.</span></span>  <span data-ttu-id="1b0a9-158">Como resultado, é importante tooconsider se seu aplicativo exigir alta disponibilidade de pesquisas (consultas), bem como gravações (eventos de indexação).</span><span class="sxs-lookup"><span data-stu-id="1b0a9-158">As a result, it is important tooconsider if your application requires high availability of searches (queries) as well as writes (indexing events).</span></span>  <span data-ttu-id="1b0a9-159">A pesquisa do Azure oferece opções de SLA em todos os Olá ofertas de pesquisa paga por hello seguintes atributos:</span><span class="sxs-lookup"><span data-stu-id="1b0a9-159">Azure Search offers SLA options on all hello paid search offerings with hello following attributes:</span></span>

* <span data-ttu-id="1b0a9-160">Duas réplicas para alta disponibilidade das cargas de trabalho somente leitura (consultas)</span><span class="sxs-lookup"><span data-stu-id="1b0a9-160">2 replicas for high availability of read-only workloads (queries)</span></span>
* <span data-ttu-id="1b0a9-161">Três ou mais réplicas para alta disponibilidade das cargas de trabalho de leitura/gravação (consultas e indexação)</span><span class="sxs-lookup"><span data-stu-id="1b0a9-161">3 or more replicas for high availability of read-write workloads (queries and indexing)</span></span>

<span data-ttu-id="1b0a9-162">Para obter mais detalhes sobre isso, visite Olá [contrato de nível de serviço de pesquisa do Azure](https://azure.microsoft.com/support/legal/sla/search/v1_0/).</span><span class="sxs-lookup"><span data-stu-id="1b0a9-162">For more details on this, please visit hello [Azure Search Service Level Agreement](https://azure.microsoft.com/support/legal/sla/search/v1_0/).</span></span>

<span data-ttu-id="1b0a9-163">Desde que as réplicas são cópias de seus dados, com várias réplicas permite que a pesquisa do Azure toodo máquina reinicializações e manutenção com base em uma réplica em um momento enquanto permite que consultas toobe toocontinue executada em Olá outras réplicas.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-163">Since replicas are copies of your data, having multiple replicas allows Azure Search toodo machine reboots and maintenance against one replica at a time while allowing queries toocontinue toobe executed against hello other replicas.</span></span>  <span data-ttu-id="1b0a9-164">Por esse motivo, você também precisará tooconsider como esse tempo de inatividade pode impactar consultas Olá que agora têm toobe executado em um menor cópia dos dados de saudação.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-164">For that reason, you will also need tooconsider how this downtime may impact hello queries that now have toobe executed against one less copy of hello data.</span></span>

## <a name="scaling-geo-distributed-workloads-and-provide-geo-redundancy"></a><span data-ttu-id="1b0a9-165">Dimensionamento de cargas de trabalho distribuídas geograficamente e fornecimento de redundância geográfica</span><span class="sxs-lookup"><span data-stu-id="1b0a9-165">Scaling geo-distributed workloads and provide geo-redundancy</span></span>
<span data-ttu-id="1b0a9-166">Para cargas de trabalho distribuído geograficamente, você descobrirá que os usuários localizados distantes Olá data center em que o serviço de pesquisa do Azure é hospedado terá taxas mais altas de latência.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-166">For geo-distributed workloads, you will find that users located far from hello data center where your Azure Search service is hosted will have higher latency rates.</span></span>  <span data-ttu-id="1b0a9-167">Por esse motivo, é geralmente importante toohave pesquisa vários serviços em regiões que estão em usuários de toothese proximidade mais próximos.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-167">For this reason, it is often important toohave multiple search services in regions that are in closer proximity toothese users.</span></span>  <span data-ttu-id="1b0a9-168">A pesquisa do Azure atualmente não fornece um método automatizado de replicação geográfica índices de pesquisa do Azure entre regiões, mas há algumas técnicas que podem ser usadas que podem gerenciar e fazer essa tooimplement simples do processo.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-168">Azure Search does not currently provide an automated method of geo-replicating Azure Search indexes across regions, but there are some techniques that can be used that can make this process simple tooimplement and manage.</span></span> <span data-ttu-id="1b0a9-169">Elas são descritas na Olá próximas seções.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-169">These are outlined in hello next few sections.</span></span>

<span data-ttu-id="1b0a9-170">meta de um conjunto distribuído geograficamente de serviços de pesquisa Hello é toohave dois ou mais índices disponíveis em duas ou mais regiões em que o usuário será roteado toohello serviço de pesquisa do Azure que fornece a latência mais baixa hello como mostrado neste exemplo:</span><span class="sxs-lookup"><span data-stu-id="1b0a9-170">hello goal of a geo-distributed set of search services is toohave two or more indexes available in two or more regions where a user will be routed toohello Azure Search service that provides hello lowest latency as seen in this example:</span></span>

   ![Tabela de referência cruzada de serviços por região][1]

### <a name="keeping-data-in-sync-across-multiple-azure-search-services"></a><span data-ttu-id="1b0a9-172">Manter os dados sincronizados em vários serviços de Pesquisa do Azure</span><span class="sxs-lookup"><span data-stu-id="1b0a9-172">Keeping data in sync across multiple Azure Search services</span></span>
<span data-ttu-id="1b0a9-173">Há duas opções para manter seus serviços de pesquisa distribuída em sincronia que consistem em usando Olá [indexador da pesquisa do Azure](search-indexer-overview.md) ou Olá API Push (também chamado hello tooas [API de REST de pesquisa do Azure](https://docs.microsoft.com/rest/api/searchservice/)).</span><span class="sxs-lookup"><span data-stu-id="1b0a9-173">There are two options for keeping your distributed search services in sync which consist of either using hello [Azure Search Indexer](search-indexer-overview.md) or hello Push API (also referred tooas hello [Azure Search REST API](https://docs.microsoft.com/rest/api/searchservice/)).</span></span>  

### <a name="azure-search-indexers"></a><span data-ttu-id="1b0a9-174">Indexadores na Pesquisa do Azure</span><span class="sxs-lookup"><span data-stu-id="1b0a9-174">Azure Search Indexers</span></span>
<span data-ttu-id="1b0a9-175">Se você estiver usando Olá indexador da pesquisa do Azure, você já estiver importando as alterações de dados de um repositório central de dados como banco de dados do Azure SQL ou banco de dados do Azure Cosmos.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-175">If you are using hello Azure Search Indexer, you are already importing data changes from a central datastore such as Azure SQL DB or Azure Cosmos DB.</span></span> <span data-ttu-id="1b0a9-176">Quando você cria uma nova pesquisa serviço, você simplesmente também criar um novo indexador da pesquisa do Azure para o serviço que toothis pontos mesmo repositório de dados.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-176">When you create a new search Service, you simply also create a new Azure Search Indexer for that service that points toothis same datastore.</span></span> <span data-ttu-id="1b0a9-177">Dessa forma, sempre que novas alterações entram em armazenamento de dados hello, elas serão indexados por Olá vários indexadores.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-177">That way, whenever new changes come into hello data store, they will then be indexed by hello various Indexers.</span></span>  

<span data-ttu-id="1b0a9-178">Veja um exemplo de como seria a aparência dessa arquitetura.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-178">Here is an example of what that architecture would look like.</span></span>

   ![Única fonte de dados com o indexador distribuído e combinações de serviço][2]

### <a name="push-api"></a><span data-ttu-id="1b0a9-180">API Push</span><span class="sxs-lookup"><span data-stu-id="1b0a9-180">Push API</span></span>
<span data-ttu-id="1b0a9-181">Se você estiver usando Olá Push API de pesquisa do Azure muito[atualizar conteúdo em seu índice de pesquisa do Azure](https://docs.microsoft.com/rest/api/searchservice/update-index), você pode manter seus vários serviços de pesquisa em sincronia Enviando alterações tooall pesquisa serviços sempre que uma atualização é necessária.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-181">If you are using hello Azure Search Push API too[update content in your Azure Search index](https://docs.microsoft.com/rest/api/searchservice/update-index), you can keep your various search services in sync by pushing changes tooall search services whenever an update is required.</span></span>  <span data-ttu-id="1b0a9-182">Quando isso é importante toomake se toohandle casos em que um serviço de pesquisa de tooone de atualização falha e bem-sucedida de uma ou mais atualizações.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-182">When doing this it is important toomake sure toohandle cases where an update tooone search service fails and one or more updates succeed.</span></span>

## <a name="leveraging-azure-traffic-manager"></a><span data-ttu-id="1b0a9-183">Aproveitando o Gerenciador de Tráfego do Azure</span><span class="sxs-lookup"><span data-stu-id="1b0a9-183">Leveraging Azure Traffic Manager</span></span>
<span data-ttu-id="1b0a9-184">[O Azure Traffic Manager](../traffic-manager/traffic-manager-overview.md) permite que você tooroute solicitações toomultiple localizados geograficamente sites que, em seguida, são feitos por vários serviços de pesquisa do Azure.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-184">[Azure Traffic Manager](../traffic-manager/traffic-manager-overview.md) allows you tooroute requests toomultiple geo-located websites that are then backed by multiple Azure Search Services.</span></span>  <span data-ttu-id="1b0a9-185">Uma vantagem de saudação do Traffic Manager é que ele pode investigação tooensure de pesquisa do Azure que está disponível e rotear os serviços de pesquisa tooalternate usuários no evento de saudação do tempo de inatividade.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-185">One advantage of hello Traffic Manager is that it can probe Azure Search tooensure that it is available and route users tooalternate search services in hello event of downtime.</span></span>  <span data-ttu-id="1b0a9-186">Além disso, se você está roteando as solicitações de pesquisa por meio de Sites do Azure, o Azure Traffic Manager permite casos de saldo de tooload onde Olá site está ativo, mas não a pesquisa do Azure.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-186">In addition, if you are routing search requests through Azure Web Sites, Azure Traffic Manager allows you tooload balance cases where hello Website is up but not Azure Search.</span></span>  <span data-ttu-id="1b0a9-187">Aqui está um exemplo de arquitetura que Olá que utiliza o Gerenciador de tráfego.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-187">Here is an example of what hello architecture that leverages Traffic Manager.</span></span>

   ![Tabela de referência cruzada de serviços por região, com o Gerenciador de tráfego central][3]

## <a name="monitoring-performance"></a><span data-ttu-id="1b0a9-189">Monitoramento de desempenho</span><span class="sxs-lookup"><span data-stu-id="1b0a9-189">Monitoring performance</span></span>
<span data-ttu-id="1b0a9-190">A pesquisa do Azure oferece Olá capacidade tooanalyze Olá desempenho do monitor do serviço por meio de [análise de tráfego de pesquisa (STA)](search-traffic-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="1b0a9-190">Azure Search offers hello ability tooanalyze and monitor hello performance of your service through [Search Traffic Analytics (STA)](search-traffic-analytics.md).</span></span> <span data-ttu-id="1b0a9-191">Por meio de STA, você pode, opcionalmente, registrar as operações de pesquisa individual Olá assim como uma conta de armazenamento do Azure de tooan as métricas agregadas que pode ser processada para análise ou visualizada no Power BI.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-191">Through STA, you can optionally log hello individual search operations as well as aggregated metrics tooan Azure Storage account that can then be processed for analysis or visualized in Power BI.</span></span>  <span data-ttu-id="1b0a9-192">Usando as métricas de STA, você pode examinar as estatísticas de desempenho, como o número médio de consultas ou tempos de resposta da consulta.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-192">Using STA metrics, you can review performance statistics such as average number of queries or query response times.</span></span>  <span data-ttu-id="1b0a9-193">Além disso, o log de operações Olá permite-lhe toodrill em detalhes das operações de pesquisa específico.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-193">In addition, hello operation logging allows you toodrill into details of specific search operations.</span></span>

<span data-ttu-id="1b0a9-194">STA é taxas de latência de toounderstand uma ferramenta valiosa sob essa perspectiva de pesquisa do Azure.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-194">STA is a valuable tool toounderstand latency rates from that Azure Search perspective.</span></span>  <span data-ttu-id="1b0a9-195">Como métricas de desempenho de consulta Olá conectadas se baseiam no tempo de saudação toobe totalmente processada na pesquisa do Azure (do tempo de saudação é toowhen solicitada, ela é enviada) entra em uma consulta, será capaz de toouse este toodetermine se houver problemas de latência de saudação serviço de pesquisa do Azure lado ou fora do hello serviço, como a latência de rede.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-195">Since hello query performance metrics logged are based on hello time a query takes toobe fully processed in Azure Search (from hello time it is requested toowhen it is sent out), you are able toouse this toodetermine if latency issues are from hello Azure Search service side or outside of hello service, such as from network latency.</span></span>  

## <a name="next-steps"></a><span data-ttu-id="1b0a9-196">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="1b0a9-196">Next steps</span></span>
<span data-ttu-id="1b0a9-197">toolearn mais sobre Olá preços camadas e os limites de serviços para cada um, consulte [limites na pesquisa do Azure do serviço](search-limits-quotas-capacity.md).</span><span class="sxs-lookup"><span data-stu-id="1b0a9-197">toolearn more about hello pricing tiers and services limits for each one, see [Service limits in Azure Search](search-limits-quotas-capacity.md).</span></span>

<span data-ttu-id="1b0a9-198">Visite [planejamento de capacidade](search-capacity-planning.md) toolearn mais sobre as combinações de partição e de réplica.</span><span class="sxs-lookup"><span data-stu-id="1b0a9-198">Visit [Capacity planning](search-capacity-planning.md) toolearn more about partition and replica combinations.</span></span>

<span data-ttu-id="1b0a9-199">Para mais detalhados sobre desempenho e toosee algumas demonstrações de como tooimplement Olá otimizações discutidas neste artigo, assista a saudação de vídeo a seguir:</span><span class="sxs-lookup"><span data-stu-id="1b0a9-199">For more drilldown on performance and toosee some demonstrations of how tooimplement hello optimizations discussed in this article, watch hello following video:</span></span>

> [!VIDEO https://channel9.msdn.com/Events/Microsoft-Azure/AzureCon-2015/ACON319/player]
> 
> 

<!--Image references-->
[1]: ./media/search-performance-optimization/geo-redundancy.png
[2]: ./media/search-performance-optimization/scale-indexers.png
[3]: ./media/search-performance-optimization/geo-search-traffic-mgr.png
