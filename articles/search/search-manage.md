---
title: "Administração do serviço do Azure Search no portal do Azure"
description: "Gerenciar o Azure Search, um serviço de nuvem hospedado no Microsoft Azure, usando o portal do Azure."
services: search
documentationcenter: 
author: HeidiSteen
manager: jhubbard
editor: 
tags: azure-portal
ms.assetid: c87d1fdd-b3b8-4702-a753-6d7e29dbe0a2
ms.service: search
ms.devlang: rest-api
ms.workload: search
ms.topic: article
ms.tgt_pltfrm: na
ms.date: 06/18/2017
ms.author: heidist
ms.openlocfilehash: c293de5b43103c8cbec01f61a26b8b28ac7e9116
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/11/2017
---
# <a name="service-administration-for-azure-search-in-the-azure-portal"></a><span data-ttu-id="72e2d-103">Administração do serviço do Azure Search no portal do Azure</span><span class="sxs-lookup"><span data-stu-id="72e2d-103">Service administration for Azure Search in the Azure portal</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="72e2d-104">Portal</span><span class="sxs-lookup"><span data-stu-id="72e2d-104">Portal</span></span>](search-manage.md)
> * [<span data-ttu-id="72e2d-105">PowerShell</span><span class="sxs-lookup"><span data-stu-id="72e2d-105">PowerShell</span></span>](search-manage-powershell.md)
> * [<span data-ttu-id="72e2d-106">SDK .NET</span><span class="sxs-lookup"><span data-stu-id="72e2d-106">.NET SDK</span></span>](https://docs.microsoft.com/dotnet/api/microsoft.azure.management.search)
> * <span data-ttu-id="72e2d-107">[Python](https://pypi.python.org/pypi/azure-mgmt-search/0.1.0)></span><span class="sxs-lookup"><span data-stu-id="72e2d-107">[Python](https://pypi.python.org/pypi/azure-mgmt-search/0.1.0)></span></span> 

<span data-ttu-id="72e2d-108">O Azure Search é um serviço de pesquisa baseado em nuvem, totalmente gerenciado usado para criar uma experiência avançada de pesquisa em aplicativos personalizados.</span><span class="sxs-lookup"><span data-stu-id="72e2d-108">Azure Search is a fully managed, cloud-based search service used for building a rich search experience into custom apps.</span></span> <span data-ttu-id="72e2d-109">Este artigo aborda as tarefas *administração de serviço* que você pode executar no [portal do Azure](https://portal.azure.com) para um serviço de pesquisa que você já tenha provisionado.</span><span class="sxs-lookup"><span data-stu-id="72e2d-109">This article covers the *service administration* tasks that you can perform in the [Azure portal](https://portal.azure.com) for a search service that you've already provisioned.</span></span> <span data-ttu-id="72e2d-110">*Service administration* é leve por design, limitada às seguintes tarefas:</span><span class="sxs-lookup"><span data-stu-id="72e2d-110">*Service administration* is lightweight by design, limited to the following tasks:</span></span>

* <span data-ttu-id="72e2d-111">Gerenciar e proteger o acesso para as *chaves de api* usadas para acesso de leitura ou gravação para o serviço.</span><span class="sxs-lookup"><span data-stu-id="72e2d-111">Manage and secure access to the *api-keys* used for read or write access to your service.</span></span>
* <span data-ttu-id="72e2d-112">Ajuste a capacidade de serviço, alterando a alocação de partições e réplicas.</span><span class="sxs-lookup"><span data-stu-id="72e2d-112">Adjust service capacity by changing the allocation of partitions and replicas.</span></span>
* <span data-ttu-id="72e2d-113">Monitorar o uso de recursos, em relação aos limites máximos da sua camada de serviço.</span><span class="sxs-lookup"><span data-stu-id="72e2d-113">Monitor resource usage, relative to maximum limits of your service tier.</span></span>

<span data-ttu-id="72e2d-114">**Não está no escopo**</span><span class="sxs-lookup"><span data-stu-id="72e2d-114">**Not in scope**</span></span> 

<span data-ttu-id="72e2d-115">*Gerenciamento de conteúdo* (ou gerenciamento de índice) refere-se a operações, como análise de tráfego de pesquisa para entender o volume de consultas, descobrir quais termos as pessoas pesquisam e como os resultados da pesquisa bem-sucedida são para a orientação dos clientes para documentos específicos no índice.</span><span class="sxs-lookup"><span data-stu-id="72e2d-115">*Content management* (or index management) refers to operations such as analyzing search traffic to understand query volume, discover which terms people search for, and how successful search results are in guiding customers to specific documents in your index.</span></span> <span data-ttu-id="72e2d-116">Para ajuda nessa área, veja [Análise de Tráfego de Pesquisa para o Azure Search](search-traffic-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="72e2d-116">For help in this area, see [Search Traffic Analytics for Azure Search](search-traffic-analytics.md).</span></span>

<span data-ttu-id="72e2d-117">*desempenho de consulta* também está além do escopo deste artigo.</span><span class="sxs-lookup"><span data-stu-id="72e2d-117">*Query performance* is also beyond the scope of this article.</span></span> <span data-ttu-id="72e2d-118">Para obter mais informações, confira [Monitorar as métricas de uso e consulta](search-monitor-usage.md) e [Desempenho e otimização](search-performance-optimization.md).</span><span class="sxs-lookup"><span data-stu-id="72e2d-118">For more information, see [Monitor usage and query metrics](search-monitor-usage.md) and [Performance and optimization](search-performance-optimization.md).</span></span>

<span data-ttu-id="72e2d-119">*Atualizar* não é uma tarefa administrativa.</span><span class="sxs-lookup"><span data-stu-id="72e2d-119">*Upgrade* is not an administrative task.</span></span> <span data-ttu-id="72e2d-120">Já que os recursos são alocados quando o serviço for fornecido, a mudança para uma camada diferente exige um novo serviço.</span><span class="sxs-lookup"><span data-stu-id="72e2d-120">Because resources are allocated when the service is provisioned, moving to a different tier requires a new service.</span></span> <span data-ttu-id="72e2d-121">Veja [Criar um serviço do Azure Search](search-create-service-portal.md) para obter detalhes.</span><span class="sxs-lookup"><span data-stu-id="72e2d-121">For details, see [Create an Azure Search service](search-create-service-portal.md).</span></span>

<a id="admin-rights"></a>

## <a name="administrator-rights"></a><span data-ttu-id="72e2d-122">Direitos de administrador</span><span class="sxs-lookup"><span data-stu-id="72e2d-122">Administrator rights</span></span>
<span data-ttu-id="72e2d-123">O provisionamento ou encerramento do serviço em si podem ser feitos por um administrador ou coadministrador de assinatura do Azure.</span><span class="sxs-lookup"><span data-stu-id="72e2d-123">Provisioning or decommissioning the service itself can be done by an Azure subscription administrator or co-administrator.</span></span>

<span data-ttu-id="72e2d-124">Em um serviço, qualquer pessoa com acesso à URL do serviço e uma chave de API de administração tem acesso de leitura-gravação para o serviço.</span><span class="sxs-lookup"><span data-stu-id="72e2d-124">Within a service, anyone with access to the service URL and an admin api-key has read-write access to the service.</span></span> <span data-ttu-id="72e2d-125">Acesso de leitura-gravação fornece a capacidade de adicionar, excluir ou modificar objetos de servidor, incluindo chaves de API, índices, indexadores, fontes de dados, agendas e atribuições de função, conforme implementados por meio de [funções definidas pelo RBAC](#rbac).</span><span class="sxs-lookup"><span data-stu-id="72e2d-125">Read-write access provides the ability to add, delete, or modify server objects, including api-keys, indexes, indexers, data sources, schedules, and role assignments as implemented through [RBAC-defined roles](#rbac).</span></span>

<span data-ttu-id="72e2d-126">Todas as interações do usuário com o Azure Search se enquadram em um destes modos: acesso de leitura e gravação para o serviço (direitos de administrador) ou acesso somente de leitura ao serviço (direitos de consulta).</span><span class="sxs-lookup"><span data-stu-id="72e2d-126">All user interaction with Azure Search falls within one of these modes: read-write access to the service (administrator rights), or read-only access to the service (query rights).</span></span> <span data-ttu-id="72e2d-127">Para obter mais informações, consulte [Gerenciar as chaves de api](#manage-keys).</span><span class="sxs-lookup"><span data-stu-id="72e2d-127">For more information, see [Manage the api-keys](#manage-keys).</span></span>

<a id="sys-info"></a>

## <a name="set-rbac-roles-for-administrative-access"></a><span data-ttu-id="72e2d-128">Definir funções RBAC para acesso administrativo</span><span class="sxs-lookup"><span data-stu-id="72e2d-128">Set RBAC roles for administrative access</span></span>
<span data-ttu-id="72e2d-129">O Azure fornece um [modelo global de autorização baseado em funções](../active-directory/role-based-access-control-configure.md) para todos os serviços gerenciados por meio do portal ou nas APIs do Gerenciador de Recursos.</span><span class="sxs-lookup"><span data-stu-id="72e2d-129">Azure provides a [global role-based authorization model](../active-directory/role-based-access-control-configure.md) for all services managed through the portal or Resource Manager APIs.</span></span> <span data-ttu-id="72e2d-130">Funções de Leitor, Colaborador e Proprietário determinam o nível de administração do serviço para usuários, grupos e entidades de segurança do Active Directory, que você atribui a cada função.</span><span class="sxs-lookup"><span data-stu-id="72e2d-130">Owner, Contributor, and Reader roles determine the level of service administration for Active Directory users, groups, and security principals assigned to each role.</span></span> 

<span data-ttu-id="72e2d-131">Para o Azure Search, as permissões de RBAC determinam as seguintes tarefas administrativas:</span><span class="sxs-lookup"><span data-stu-id="72e2d-131">For Azure Search, RBAC permissions determine the following administrative tasks:</span></span>

| <span data-ttu-id="72e2d-132">Função</span><span class="sxs-lookup"><span data-stu-id="72e2d-132">Role</span></span> | <span data-ttu-id="72e2d-133">Tarefa</span><span class="sxs-lookup"><span data-stu-id="72e2d-133">Task</span></span> |
| --- | --- |
| <span data-ttu-id="72e2d-134">Proprietário</span><span class="sxs-lookup"><span data-stu-id="72e2d-134">Owner</span></span> |<span data-ttu-id="72e2d-135">Criar ou excluir o serviço ou qualquer objeto no serviço, incluindo chaves de api, índices, indexadores, fontes de dados do indexador e agendas do indexador.</span><span class="sxs-lookup"><span data-stu-id="72e2d-135">Create or delete the service or any object on the service, including api-keys, indexes, indexers, indexer data sources, and indexer schedules.</span></span><p><span data-ttu-id="72e2d-136">Exibir o status do serviço, incluindo o tamanho de armazenamento e contagens.</span><span class="sxs-lookup"><span data-stu-id="72e2d-136">View service status, including counts and storage size.</span></span><p><span data-ttu-id="72e2d-137">Adicionar ou excluir a associação de função (somente um Proprietário pode gerenciar a associação de função).</span><span class="sxs-lookup"><span data-stu-id="72e2d-137">Add or delete role membership (only an Owner can manage role membership).</span></span><p><span data-ttu-id="72e2d-138">Os administradores de assinatura e proprietários de serviço possuem associação automática na função Proprietários.</span><span class="sxs-lookup"><span data-stu-id="72e2d-138">Subscription administrators and service owners have automatic membership in the Owners role.</span></span> |
| <span data-ttu-id="72e2d-139">Colaborador</span><span class="sxs-lookup"><span data-stu-id="72e2d-139">Contributor</span></span> |<span data-ttu-id="72e2d-140">Mesmo nível de acesso como Proprietário, menos gerenciamento de funções RBAC.</span><span class="sxs-lookup"><span data-stu-id="72e2d-140">Same level of access as Owner, minus RBAC role management.</span></span> <span data-ttu-id="72e2d-141">Por exemplo, um Colaborador pode exibir e gerar novamente a `api-key`, mas não pode modificar as associações de função.</span><span class="sxs-lookup"><span data-stu-id="72e2d-141">For example, a Contributor can view and regenerate `api-key`, but cannot modify role memberships.</span></span> |
| <span data-ttu-id="72e2d-142">Leitor</span><span class="sxs-lookup"><span data-stu-id="72e2d-142">Reader</span></span> |<span data-ttu-id="72e2d-143">Exibir chaves de consulta e de status do serviço.</span><span class="sxs-lookup"><span data-stu-id="72e2d-143">View service status and query keys.</span></span> <span data-ttu-id="72e2d-144">Os membros dessa função não podem alterar a configuração do serviço, nem exibir chaves admin.</span><span class="sxs-lookup"><span data-stu-id="72e2d-144">Members of this role cannot change service configuration, nor can they view admin keys.</span></span> |

<span data-ttu-id="72e2d-145">As funções não concedem direitos de acesso para o ponto de extremidade de serviço.</span><span class="sxs-lookup"><span data-stu-id="72e2d-145">Roles do not grant access rights to the service endpoint.</span></span> <span data-ttu-id="72e2d-146">As operações do serviço de pesquisa, como gerenciamento de índices, preenchimento de índice e consultas em dados de pesquisa, são controladas por meio de chaves de api, não funções.</span><span class="sxs-lookup"><span data-stu-id="72e2d-146">Search service operations, such as index management, index population, and queries on search data, are controlled through api-keys, not roles.</span></span> <span data-ttu-id="72e2d-147">Para mais informações, consulte "Autorização para gerenciamento versus operações de dados" em [O que é controle de acesso baseado em função](../active-directory/role-based-access-control-what-is.md).</span><span class="sxs-lookup"><span data-stu-id="72e2d-147">For more information, see "Authorization for management versus data operations" in [What is Role-based access control](../active-directory/role-based-access-control-what-is.md).</span></span>

<a id="secure-keys"></a>
## <a name="logging-and-system-information"></a><span data-ttu-id="72e2d-148">Log e informações do sistema</span><span class="sxs-lookup"><span data-stu-id="72e2d-148">Logging and system information</span></span>
<span data-ttu-id="72e2d-149">O Azure Search não expõe os arquivos de log para um serviço individual por meio do portal ou interfaces programáticas.</span><span class="sxs-lookup"><span data-stu-id="72e2d-149">Azure Search does not expose log files for an individual service either through the portal or programmatic interfaces.</span></span> <span data-ttu-id="72e2d-150">Na camada Básica e acima, a Microsoft monitora todos os serviços do Azure Search para disponibilidade de 99,9% por contratos de nível de serviço (SLA).</span><span class="sxs-lookup"><span data-stu-id="72e2d-150">At the Basic tier and above, Microsoft monitors all Azure Search services for 99.9% availability per service level agreements (SLA).</span></span> <span data-ttu-id="72e2d-151">Se o serviço estiver lento ou a taxa de transferência de solicitação estiver abaixo dos limites de SLA, as equipes de suporte analisam os arquivos de log disponíveis para resolver o problema.</span><span class="sxs-lookup"><span data-stu-id="72e2d-151">If the service is slow or request throughput falls below SLA thresholds, support teams review the log files available to them and address the issue.</span></span>

<span data-ttu-id="72e2d-152">Em termos de informações gerais sobre o serviço, você pode obter informações das seguintes maneiras:</span><span class="sxs-lookup"><span data-stu-id="72e2d-152">In terms of general information about your service, you can obtain information in the following ways:</span></span>

* <span data-ttu-id="72e2d-153">No portal, no painel de serviço, por meio de notificações, propriedades e mensagens de status.</span><span class="sxs-lookup"><span data-stu-id="72e2d-153">In the portal, on the service dashboard, through notifications, properties, and status messages.</span></span>
* <span data-ttu-id="72e2d-154">Usando o [PowerShell](search-manage-powershell.md) ou a [API REST de gerenciamento](https://docs.microsoft.com/rest/api/searchmanagement/) para [obter propriedades do serviço](https://docs.microsoft.com/rest/api/searchmanagement/services), ou status no uso de recursos do índice.</span><span class="sxs-lookup"><span data-stu-id="72e2d-154">Using [PowerShell](search-manage-powershell.md) or the [Management REST API](https://docs.microsoft.com/rest/api/searchmanagement/) to [get service properties](https://docs.microsoft.com/rest/api/searchmanagement/services), or status on index resource usage.</span></span>
* <span data-ttu-id="72e2d-155">Por meio de [análise de tráfego de pesquisa](search-traffic-analytics.md), conforme observado anteriormente.</span><span class="sxs-lookup"><span data-stu-id="72e2d-155">Via [search traffic analytics](search-traffic-analytics.md), as noted previously.</span></span>

<a id="manage-keys"></a>

## <a name="manage-api-keys"></a><span data-ttu-id="72e2d-156">Gerenciar api-keys</span><span class="sxs-lookup"><span data-stu-id="72e2d-156">Manage api-keys</span></span>
<span data-ttu-id="72e2d-157">Todas as solicitações para um serviço de pesquisa precisam de uma chave de api gerada especificamente para o seu serviço.</span><span class="sxs-lookup"><span data-stu-id="72e2d-157">All requests to a search service need an api-key that was generated specifically for your service.</span></span> <span data-ttu-id="72e2d-158">Esta chave de API é o único mecanismo para autenticar o acesso ao ponto de extremidade do seu serviço de pesquisa.</span><span class="sxs-lookup"><span data-stu-id="72e2d-158">This api-key is the sole mechanism for authenticating access to your search service endpoint.</span></span> 

<span data-ttu-id="72e2d-159">Uma chave de api é uma cadeia de caracteres composta de letras e números gerados aleatoriamente.</span><span class="sxs-lookup"><span data-stu-id="72e2d-159">An api-key is a string composed of randomly generated numbers and letters.</span></span> <span data-ttu-id="72e2d-160">Por meio de [permissões RBAC](#rbac), você pode excluir ou ler as chaves, mas você não pode substituir uma chave por uma senha definida pelo usuário.</span><span class="sxs-lookup"><span data-stu-id="72e2d-160">Through [RBAC permissions](#rbac), you can delete or read the keys, but you can't replace a key with a user-defined password.</span></span> 

<span data-ttu-id="72e2d-161">Dois tipos de chaves são usados para acessar seu serviço de pesquisa:</span><span class="sxs-lookup"><span data-stu-id="72e2d-161">Two types of keys are used to access your search service:</span></span>

* <span data-ttu-id="72e2d-162">Admin (válida para qualquer operação de leitura e gravação em relação ao serviço)</span><span class="sxs-lookup"><span data-stu-id="72e2d-162">Admin (valid for any read-write operation against the service)</span></span>
* <span data-ttu-id="72e2d-163">Consulta (válida para operações somente leitura, como consultas em um índice)</span><span class="sxs-lookup"><span data-stu-id="72e2d-163">Query (valid for read-only operations such as queries against an index)</span></span>

<span data-ttu-id="72e2d-164">Uma chave de api admin é criada quando o serviço é provisionado.</span><span class="sxs-lookup"><span data-stu-id="72e2d-164">An admin api-key is created when the service is provisioned.</span></span> <span data-ttu-id="72e2d-165">Há duas chaves de administração, designadas como *primária* e *secundária* para mantê-las de forma linear, mas na verdade elas são intercambiáveis.</span><span class="sxs-lookup"><span data-stu-id="72e2d-165">There are two admin keys, designated as *primary* and *secondary* to keep them straight, but in fact they are interchangeable.</span></span> <span data-ttu-id="72e2d-166">Cada serviço tem duas chaves admin para que você possa derrubar uma sem perder o acesso ao seu serviço.</span><span class="sxs-lookup"><span data-stu-id="72e2d-166">Each service has two admin keys so that you can roll one over without losing access to your service.</span></span> <span data-ttu-id="72e2d-167">Você pode gerar novamente as duas chaves admin, mas não pode aumentar a contagem total de chaves admin.</span><span class="sxs-lookup"><span data-stu-id="72e2d-167">You can regenerate either admin key, but you cannot add to the total admin key count.</span></span> <span data-ttu-id="72e2d-168">Pode haver no máximo duas chaves admin por serviço de pesquisa.</span><span class="sxs-lookup"><span data-stu-id="72e2d-168">There is a maximum of two admin keys per search service.</span></span>

<span data-ttu-id="72e2d-169">Chaves de consulta foram criadas para aplicativos cliente que chamam a Pesquisa diretamente.</span><span class="sxs-lookup"><span data-stu-id="72e2d-169">Query keys are designed for client applications that call Search directly.</span></span> <span data-ttu-id="72e2d-170">Você pode criar até 50 chaves de consulta.</span><span class="sxs-lookup"><span data-stu-id="72e2d-170">You can create up to 50 query keys.</span></span> <span data-ttu-id="72e2d-171">No código do aplicativo, você pode especificar a URL de pesquisa e uma chave de api de consulta para permitir o acesso somente leitura para o serviço.</span><span class="sxs-lookup"><span data-stu-id="72e2d-171">In application code, you specify the search URL and a query api-key to allow read-only access to the service.</span></span> <span data-ttu-id="72e2d-172">O código do aplicativo também especifica o índice usado pelo seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="72e2d-172">Your application code also specifies the index used by your application.</span></span> <span data-ttu-id="72e2d-173">Juntos, o ponto de extremidade, uma chave de api para acesso somente leitura e um índice de destino definem o nível de acesso e escopo da conexão de seu aplicativo cliente.</span><span class="sxs-lookup"><span data-stu-id="72e2d-173">Together, the endpoint, an api-key for read-only access, and a target index define the scope and access level of the connection from your client application.</span></span>

<span data-ttu-id="72e2d-174">Para obter ou gerar chaves de API novamente, abra o painel do serviço.</span><span class="sxs-lookup"><span data-stu-id="72e2d-174">To get or regenerate api-keys, open the service dashboard.</span></span> <span data-ttu-id="72e2d-175">Clique em **CHAVES** para abrir a página de gerenciamento de chaves.</span><span class="sxs-lookup"><span data-stu-id="72e2d-175">Click **KEYS** to slide open the key management page.</span></span> <span data-ttu-id="72e2d-176">Os comandos para gerar novamente ou criar chaves estão no topo da página.</span><span class="sxs-lookup"><span data-stu-id="72e2d-176">Commands for regenerating or creating keys are at the top of the page.</span></span> <span data-ttu-id="72e2d-177">Por padrão, somente as chaves admin são criadas.</span><span class="sxs-lookup"><span data-stu-id="72e2d-177">By default, only admin keys are created.</span></span> <span data-ttu-id="72e2d-178">As chaves de api de consulta devem ser criadas manualmente.</span><span class="sxs-lookup"><span data-stu-id="72e2d-178">Query api-keys must be created manually.</span></span>

 ![][9]

<a id="rbac"></a>

## <a name="secure-api-keys"></a><span data-ttu-id="72e2d-179">Proteger api-keys</span><span class="sxs-lookup"><span data-stu-id="72e2d-179">Secure api-keys</span></span>
<span data-ttu-id="72e2d-180">A chave de segurança é protegida restringindo o acesso por meio do portal ou interfaces do Gerenciador de Recursos (PowerShell ou interface de linha de comando).</span><span class="sxs-lookup"><span data-stu-id="72e2d-180">Key security is ensured by restricting access via the portal or Resource Manager interfaces (PowerShell or command-line interface).</span></span> <span data-ttu-id="72e2d-181">Conforme observado, os administradores de assinatura podem exibir e gerar novamente todas as chaves de api.</span><span class="sxs-lookup"><span data-stu-id="72e2d-181">As noted, subscription administrators can view and regenerate all api-keys.</span></span> <span data-ttu-id="72e2d-182">Como precaução, revise as atribuições de função para entender quem tem acesso às chaves admin.</span><span class="sxs-lookup"><span data-stu-id="72e2d-182">As a precaution, review role assignments to understand who has access to the admin keys.</span></span>

1. <span data-ttu-id="72e2d-183">No painel de serviço, clique no ícone de acesso para abrir a folha de Usuários.</span><span class="sxs-lookup"><span data-stu-id="72e2d-183">In the service dashboard, click the Access icon to slide open the Users blade.</span></span>
   ![][7]
2. <span data-ttu-id="72e2d-184">Em Usuários, analise as atribuições de função existentes.</span><span class="sxs-lookup"><span data-stu-id="72e2d-184">In Users, review existing role assignments.</span></span> <span data-ttu-id="72e2d-185">Conforme o esperado, os administradores de Assinatura já possuem acesso total ao serviço por meio da função Proprietário.</span><span class="sxs-lookup"><span data-stu-id="72e2d-185">As expected, Subscription admins already have full access to the service via the Owner role.</span></span>
3. <span data-ttu-id="72e2d-186">Para analisar mais, clique em **Administradores de assinatura** e, em seguida, expanda a lista de atribuição de função para ver quem tem direitos de coadministração no seu serviço de pesquisa.</span><span class="sxs-lookup"><span data-stu-id="72e2d-186">To drill further, click **Subscription admins** and then expand the role assignment list to see who has co-administration rights on your search service.</span></span>

<span data-ttu-id="72e2d-187">Outra maneira de exibir permissões de acesso é clicar em **Funções** na folha de Usuários.</span><span class="sxs-lookup"><span data-stu-id="72e2d-187">Another way to view access permissions is to click **Roles** on the Users blade.</span></span> <span data-ttu-id="72e2d-188">Isso exibe funções disponíveis e o número de usuários ou grupos atribuídos a cada função.</span><span class="sxs-lookup"><span data-stu-id="72e2d-188">Doing so displays available roles and the number of users or groups assigned to each role.</span></span>

<a id="sub-5"></a>

## <a name="monitor-resource-usage"></a><span data-ttu-id="72e2d-189">Monitorar o uso de recursos</span><span class="sxs-lookup"><span data-stu-id="72e2d-189">Monitor resource usage</span></span>
<span data-ttu-id="72e2d-190">No painel, o monitoramento de recursos é limitado às informações mostradas no painel de serviço e a algumas métricas que você pode obter ao consultar o serviço.</span><span class="sxs-lookup"><span data-stu-id="72e2d-190">In the dashboard, resource monitoring is limited to the information shown in the service dashboard and a few metrics that you can obtain by querying the service.</span></span> <span data-ttu-id="72e2d-191">No painel do serviço, na seção Uso, é possível determinar rapidamente se os níveis de recurso da partição estão adequados para o seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="72e2d-191">On the service dashboard, in the Usage section, you can quickly determine whether partition resource levels are adequate for your application.</span></span>

<span data-ttu-id="72e2d-192">Usando a API do serviço de pesquisa, você pode obter uma contagem dos documentos e índices.</span><span class="sxs-lookup"><span data-stu-id="72e2d-192">Using the Search Service API, you can get a count on documents and indexes.</span></span> <span data-ttu-id="72e2d-193">Há limites associados a essas contagens com base na camada de preços.</span><span class="sxs-lookup"><span data-stu-id="72e2d-193">There are hard limits associated with these counts based on the pricing tier.</span></span> <span data-ttu-id="72e2d-194">Para saber mais, confira [Limites de serviço de pesquisa](search-limits-quotas-capacity.md).</span><span class="sxs-lookup"><span data-stu-id="72e2d-194">For more information, see [Search service limits](search-limits-quotas-capacity.md).</span></span> 

* [<span data-ttu-id="72e2d-195">Obter estatísticas de índice</span><span class="sxs-lookup"><span data-stu-id="72e2d-195">Get Index Statistics</span></span>](https://docs.microsoft.com/rest/api/searchservice/Get-Index-Statistics)
* [<span data-ttu-id="72e2d-196">Contar documentos</span><span class="sxs-lookup"><span data-stu-id="72e2d-196">Count Documents</span></span>](https://docs.microsoft.com/rest/api/searchservice/count-documents)

> [!NOTE]
> <span data-ttu-id="72e2d-197">Os comportamentos de cache podem aumentar um limite temporariamente.</span><span class="sxs-lookup"><span data-stu-id="72e2d-197">Caching behaviors can temporarily overstate a limit.</span></span> <span data-ttu-id="72e2d-198">Por exemplo, ao usar o serviço compartilhado, você pode ver uma contagem de documentos que ultrapassa o limite de 10.000.</span><span class="sxs-lookup"><span data-stu-id="72e2d-198">For example, when using the shared service, you might see a document count over the hard limit of 10,000 documents.</span></span> <span data-ttu-id="72e2d-199">O aumento é temporário e será detectado na próxima verificação de aplicação do limite.</span><span class="sxs-lookup"><span data-stu-id="72e2d-199">The overstatement is temporary and will be detected on the next limit enforcement check.</span></span> 
> 
> 

## <a name="disaster-recovery-and-service-outages"></a><span data-ttu-id="72e2d-200">Recuperação de desastre e interrupções de serviço</span><span class="sxs-lookup"><span data-stu-id="72e2d-200">Disaster recovery and service outages</span></span>

<span data-ttu-id="72e2d-201">Embora possamos recuperar seus dados, o Azure Search não fornece failover instantâneo do serviço se há uma interrupção no cluster ou no nível do datacenter.</span><span class="sxs-lookup"><span data-stu-id="72e2d-201">Although we can salvage your data, Azure Search does not provide instant failover of the service if there is an outage at the cluster or data center level.</span></span> <span data-ttu-id="72e2d-202">Se um cluster falhar no datacenter, a equipe de operações detectará e trabalhará para restaurar o serviço.</span><span class="sxs-lookup"><span data-stu-id="72e2d-202">If a cluster fails in the data center, the operations team will detect and work to restore service.</span></span> <span data-ttu-id="72e2d-203">Haverá tempo de inatividade durante a restauração do serviço.</span><span class="sxs-lookup"><span data-stu-id="72e2d-203">You will experience downtime during service restoration.</span></span> <span data-ttu-id="72e2d-204">É possível solicitar créditos de serviço para compensar a indisponibilidade do serviço de acordo com o [SLA (Contrato de Nível de Serviço)](https://azure.microsoft.com/support/legal/sla/search/v1_0/).</span><span class="sxs-lookup"><span data-stu-id="72e2d-204">You can request service credits to compensate for service unavailability per the [Service Level Agreement (SLA)](https://azure.microsoft.com/support/legal/sla/search/v1_0/).</span></span> 

<span data-ttu-id="72e2d-205">Se o serviço contínuo for necessário em caso de falhas catastróficas fora do controle da Microsoft, você poderá [provisionar um serviço adicional](search-create-service-portal.md) em outra região e implementar uma estratégia de replicação geográfica para garantir que os índices seja totalmente redundantes em todos os serviços.</span><span class="sxs-lookup"><span data-stu-id="72e2d-205">If continuous service is required in the event of catastrophic failures outside of Microsoft’s control, you could [provision an additional service](search-create-service-portal.md) in a different region and implement a geo-replication strategy to ensure indexes are fully redundant across all services.</span></span>

<span data-ttu-id="72e2d-206">Os clientes que usam [indexadores](search-indexer-overview.md) para popular e atualizar índices podem lidar com a recuperação de desastre por meio de indexadores específicos à geografia utilizando a mesma fonte de dados.</span><span class="sxs-lookup"><span data-stu-id="72e2d-206">Customers who use [indexers](search-indexer-overview.md) to populate and refresh indexes can handle disaster recovery through geo-specific indexers leveraging the same data source.</span></span> <span data-ttu-id="72e2d-207">Dois serviços em regiões diferentes, cada um executando um indexador, poderiam indexar da mesma fonte de dados para obter redundância geográfica.</span><span class="sxs-lookup"><span data-stu-id="72e2d-207">Two services in different regions, each running an indexer, could index from the same data source to achieve geo-redundancy.</span></span> <span data-ttu-id="72e2d-208">Se você estiver indexando fontes de dados que também são com redundância geográfica, lembre-se de que a indexadores do Azure Search só podem executar a indexação incremental de réplicas primárias.</span><span class="sxs-lookup"><span data-stu-id="72e2d-208">If you are indexing from data sources that are also geo-redundant, be aware that Azure Search indexers can only perform incremental indexing from primary replicas.</span></span> <span data-ttu-id="72e2d-209">Em um evento de failover, verifique se você apontou novamente o indexador para a nova réplica primária.</span><span class="sxs-lookup"><span data-stu-id="72e2d-209">In a failover event, be sure to re-point the indexer to the new primary replica.</span></span> 

<span data-ttu-id="72e2d-210">Se você não usar indexadores, você usará o código do aplicativo para enviar objetos e dados por push para diferentes serviços de pesquisa em paralelo.</span><span class="sxs-lookup"><span data-stu-id="72e2d-210">If you do not use indexers, you would use your application code to push objects and data to different search services in parallel.</span></span> <span data-ttu-id="72e2d-211">Para obter mais informações, consulte [Desempenho e otimização no Azure Search](search-performance-optimization.md).</span><span class="sxs-lookup"><span data-stu-id="72e2d-211">For more information, see [Performance and optimization in Azure Search](search-performance-optimization.md).</span></span>

## <a name="backup-and-restore"></a><span data-ttu-id="72e2d-212">Backup e restauração</span><span class="sxs-lookup"><span data-stu-id="72e2d-212">Backup and restore</span></span>

<span data-ttu-id="72e2d-213">Como o Azure Search não é uma solução de armazenamento de dados primário, não fornecemos um mecanismo formal de backup e restauração de autoatendimento.</span><span class="sxs-lookup"><span data-stu-id="72e2d-213">Because Azure Search is not a primary data storage solution, we do not provide a formal mechanism for self-service backup and restore.</span></span> <span data-ttu-id="72e2d-214">O código do aplicativo usado para criar e popular um índice é a opção de restauração de fato, caso você exclua um índice por engano.</span><span class="sxs-lookup"><span data-stu-id="72e2d-214">Your application code used for creating and populating an index is the de facto restore option if you delete an index by mistake.</span></span> 

<span data-ttu-id="72e2d-215">Para recompilar um índice, exclua-o (supondo que ele exista), recrie o índice no serviço e recarregue-o recuperando dados do armazenamento de dados primário.</span><span class="sxs-lookup"><span data-stu-id="72e2d-215">To rebuild an index, you would delete it (assuming it exists), recreate the index in the service, and reload by retrieving data from your primary data store.</span></span> <span data-ttu-id="72e2d-216">Como alternativa, você poderá contatar o [atendimento ao cliente]() para recuperar índices, caso haja uma interrupção regional.</span><span class="sxs-lookup"><span data-stu-id="72e2d-216">Alternatively, you can reach out to [customer support]() to salvage indexes if there is a regional outage.</span></span>


<a id="scale"></a>

## <a name="scale-up-or-down"></a><span data-ttu-id="72e2d-217">Expandir ou reduzir</span><span class="sxs-lookup"><span data-stu-id="72e2d-217">Scale up or down</span></span>
<span data-ttu-id="72e2d-218">Todo serviço de pesquisa começa com um mínimo de uma réplica e uma partição.</span><span class="sxs-lookup"><span data-stu-id="72e2d-218">Every search service starts with a minimum of one replica and one partition.</span></span> <span data-ttu-id="72e2d-219">Se você se inscreveu um [camada que fornece recursos dedicados](search-limits-quotas-capacity.md), clique no bloco **ESCALA** no painel de serviço para ajustar o uso de recursos.</span><span class="sxs-lookup"><span data-stu-id="72e2d-219">If you signed up for a [tier that provides dedicated resources](search-limits-quotas-capacity.md), click the **SCALE** tile in the service dashboard to adjust resource usage.</span></span>

<span data-ttu-id="72e2d-220">Quando você adiciona capacidade por meio de qualquer recurso, o serviço as utiliza automaticamente.</span><span class="sxs-lookup"><span data-stu-id="72e2d-220">When you add capacity through either resource, the service uses them automatically.</span></span> <span data-ttu-id="72e2d-221">Não será necessária nenhuma outra medida de sua parte, mas haverá um breve atraso antes que ocorra o impacto do novo serviço.</span><span class="sxs-lookup"><span data-stu-id="72e2d-221">No further action is required on your part, but there is a slight delay before the impact of the new resource is realized.</span></span> <span data-ttu-id="72e2d-222">Pode levar 15 minutos ou mais para provisionar recursos adicionais.</span><span class="sxs-lookup"><span data-stu-id="72e2d-222">It can take 15 minutes or more to provision additional resources.</span></span>

 ![][10]

### <a name="add-replicas"></a><span data-ttu-id="72e2d-223">Adicionar réplicas</span><span class="sxs-lookup"><span data-stu-id="72e2d-223">Add replicas</span></span>
<span data-ttu-id="72e2d-224">O aumento de QPS (consultas por segundo) ou o alcance da alta disponibilidade são feitos adicionando réplicas.</span><span class="sxs-lookup"><span data-stu-id="72e2d-224">Increasing queries per second (QPS) or achieving high availability is done by adding replicas.</span></span> <span data-ttu-id="72e2d-225">Cada réplica tem uma cópia de um índice, de modo que adicionar mais uma réplica se traduz em mais um índice que pode ser usado para atender às solicitações de consulta.</span><span class="sxs-lookup"><span data-stu-id="72e2d-225">Each replica has one copy of an index, so adding one more replica translates to one more index available for handling service query requests.</span></span> <span data-ttu-id="72e2d-226">Um mínimo de 3 réplicas são necessários para alta disponibilidade (consulte [Planejamento de capacidade](search-capacity-planning.md) para obter detalhes).</span><span class="sxs-lookup"><span data-stu-id="72e2d-226">A minimum of 3 replicas are required for high availability (see [Capacity Planning](search-capacity-planning.md) for details).</span></span>

<span data-ttu-id="72e2d-227">Um serviço de pesquisa com mais réplicas é capaz de balancear a carga das solicitações de consulta em um número maior de índices.</span><span class="sxs-lookup"><span data-stu-id="72e2d-227">A search service having more replicas can load balance query requests over a larger number of indexes.</span></span> <span data-ttu-id="72e2d-228">Em um determinado nível de volume de consultas, a produtividade das consultas será maior quando houver mais cópias do índice disponíveis para atender à solicitação.</span><span class="sxs-lookup"><span data-stu-id="72e2d-228">Given a level of query volume, query throughput is going to be faster when there are more copies of the index available to service the request.</span></span> <span data-ttu-id="72e2d-229">Caso esteja ocorrendo latência nas consultas, você pode esperar um impacto positivo quando as réplicas adicionais entrarem em atividade.</span><span class="sxs-lookup"><span data-stu-id="72e2d-229">If you are experiencing query latency, you can expect a positive impact on performance once the additional replicas are online.</span></span>

<span data-ttu-id="72e2d-230">Embora a produtividade das consultas aumente conforme você adiciona réplicas, ela não necessariamente dobra ou triplica conforme você adiciona réplicas ao seu serviço.</span><span class="sxs-lookup"><span data-stu-id="72e2d-230">Although query throughput goes up as you add replicas, it does not precisely double or triple as you add replicas to your service.</span></span> <span data-ttu-id="72e2d-231">Todos os aplicativos de pesquisa estão sujeitos a fatores externos que podem afetar o desempenho das consultas.</span><span class="sxs-lookup"><span data-stu-id="72e2d-231">All search applications are subject to external factors that can impinge on query performance.</span></span> <span data-ttu-id="72e2d-232">Consultas complexas e latência da rede são dois fatores que contribuem para variações nos tempos de resposta das consultas.</span><span class="sxs-lookup"><span data-stu-id="72e2d-232">Complex queries and network latency are two factors that contribute to variations in query response times.</span></span>

### <a name="add-partitions"></a><span data-ttu-id="72e2d-233">Adicionar partições</span><span class="sxs-lookup"><span data-stu-id="72e2d-233">Add partitions</span></span>
<span data-ttu-id="72e2d-234">A maioria dos aplicativos de serviço possui uma necessidade integrada de mais réplicas em vez de partições.</span><span class="sxs-lookup"><span data-stu-id="72e2d-234">Most service applications have a built-in need for more replicas rather than partitions.</span></span> <span data-ttu-id="72e2d-235">Nos casos em que seja necessária uma contagem maior de documentos, é possível adicionar partições se você se inscreveu no serviço Standard.</span><span class="sxs-lookup"><span data-stu-id="72e2d-235">For those cases where an increased document count is required, you can add partitions if you signed up for Standard service.</span></span> <span data-ttu-id="72e2d-236">A camada Básica não fornece partições adicionais.</span><span class="sxs-lookup"><span data-stu-id="72e2d-236">Basic tier does not provide for additional partitions.</span></span>

<span data-ttu-id="72e2d-237">Na camada Standard, as partições são adicionadas em múltiplos de 12 (especificamente, 1, 2, 3, 4, 6 ou 12).</span><span class="sxs-lookup"><span data-stu-id="72e2d-237">At the Standard tier, partitions are added in multiples of 12 (specifically, 1, 2, 3, 4, 6, or 12).</span></span> <span data-ttu-id="72e2d-238">Isso é um artefato de fragmentação.</span><span class="sxs-lookup"><span data-stu-id="72e2d-238">This is an artifact of sharding.</span></span> <span data-ttu-id="72e2d-239">Um índice é criado em 12 fragmentos, que podem todos ser armazenados em 1 partição ou divididos igualmente em 2, 3, 4, 6 ou 12 partições (um fragmento por partição).</span><span class="sxs-lookup"><span data-stu-id="72e2d-239">An index is created in 12 shards, which can all be stored on 1 partition or equally divided into 2, 3, 4, 6, or 12 partitions (one shard per partition).</span></span>

### <a name="remove-replicas"></a><span data-ttu-id="72e2d-240">Remover réplicas</span><span class="sxs-lookup"><span data-stu-id="72e2d-240">Remove replicas</span></span>
<span data-ttu-id="72e2d-241">Após períodos de grandes volumes de consulta, você poderá reduzir réplicas quando as cargas de pesquisa tiverem se normalizado (por exemplo, após as vendas de final de ano).</span><span class="sxs-lookup"><span data-stu-id="72e2d-241">After periods of high query volumes, you can reduce replicas after search query loads have normalized (for example, after holiday sales are over).</span></span>

<span data-ttu-id="72e2d-242">Para fazer isso, mova o controle deslizante de réplicas para um número mais baixo.</span><span class="sxs-lookup"><span data-stu-id="72e2d-242">To do this, move the replica slider back to a lower number.</span></span> <span data-ttu-id="72e2d-243">Não são necessárias mais medidas de sua parte.</span><span class="sxs-lookup"><span data-stu-id="72e2d-243">There are no further steps required on your part.</span></span> <span data-ttu-id="72e2d-244">Reduzir o número de réplicas libera máquinas virtuais no datacenter.</span><span class="sxs-lookup"><span data-stu-id="72e2d-244">Lowering the replica count relinquishes virtual machines in the data center.</span></span> <span data-ttu-id="72e2d-245">Suas operações de consulta e ingestão de dados passarão a ser executadas em menos VMs do que antes.</span><span class="sxs-lookup"><span data-stu-id="72e2d-245">Your query and data ingestion operations will now run on fewer VMs than before.</span></span> <span data-ttu-id="72e2d-246">O limite mínimo é uma réplica.</span><span class="sxs-lookup"><span data-stu-id="72e2d-246">The minimum limit is one replica.</span></span>

### <a name="remove-partitions"></a><span data-ttu-id="72e2d-247">Remover partições</span><span class="sxs-lookup"><span data-stu-id="72e2d-247">Remove partitions</span></span>
<span data-ttu-id="72e2d-248">Em contraste com a remoção de réplicas, que não requer nenhum esforço extra da sua parte, você pode precisar tomar algumas medidas se estiver usando armazenamento a mais que pode ser reduzido.</span><span class="sxs-lookup"><span data-stu-id="72e2d-248">In contrast with removing replicas, which requires no extra effort on your part, you might have some work to do if you are using more storage than can be reduced.</span></span> <span data-ttu-id="72e2d-249">Por exemplo, se a sua solução estiver usando três partições, fazendo o downsizing de uma ou duas partições gerará um erro se o novo espaço de armazenamento é menor do que o necessário.</span><span class="sxs-lookup"><span data-stu-id="72e2d-249">For example, if your solution is using three partitions, downsizing to one or two partitions will generate an error if the new storage space is less than required.</span></span> <span data-ttu-id="72e2d-250">Como é de se esperar, suas opções são excluir índices ou documentos dentro de um índice associado para liberar espaço ou manter a configuração atual.</span><span class="sxs-lookup"><span data-stu-id="72e2d-250">As you might expect, your choices are to delete indexes or documents within an associated index to free up space, or keep the current configuration.</span></span>

<span data-ttu-id="72e2d-251">Não há um método de detecção que informe quais fragmentos de índices estão armazenados em quais partições.</span><span class="sxs-lookup"><span data-stu-id="72e2d-251">There is no detection method that tells you which index shards are stored on specific partitions.</span></span> <span data-ttu-id="72e2d-252">Cada partição fornece cerca de 25 GB de armazenamento, de modo que você precisará reduzir o armazenamento para um tamanho que possa ser acomodado pelo número de partições que possui.</span><span class="sxs-lookup"><span data-stu-id="72e2d-252">Each partition provides approximately 25 GB in storage, so you will need to reduce storage to a size that can be accommodated by the number of partitions you have.</span></span> <span data-ttu-id="72e2d-253">Caso queira reverter para uma partição, os 12 fragmentos precisarão se encaixar.</span><span class="sxs-lookup"><span data-stu-id="72e2d-253">If you want to revert to one partition, all 12 shards will need to fit.</span></span>

<span data-ttu-id="72e2d-254">Para se planejar para o futuro, talvez você queira conferir o armazenamento (usando [Obter Estatísticas do Índice](https://docs.microsoft.com/rest/api/searchservice/Get-Index-Statistics)) para ver o quanto você realmente usou.</span><span class="sxs-lookup"><span data-stu-id="72e2d-254">To help with future planning, you might want to check storage (using [Get Index Statistics](https://docs.microsoft.com/rest/api/searchservice/Get-Index-Statistics)) to see how much you actually used.</span></span> 

<a id="advanced-deployment"></a>

## <a name="best-practices-on-scale-and-deployment"></a><span data-ttu-id="72e2d-255">Melhores práticas para escala e implantação</span><span class="sxs-lookup"><span data-stu-id="72e2d-255">Best practices on scale and deployment</span></span>
<span data-ttu-id="72e2d-256">Este vídeo de 30 minutos examina as práticas recomendadas para cenários de implantação avançados, incluindo cargas de trabalho distribuídas geograficamente.</span><span class="sxs-lookup"><span data-stu-id="72e2d-256">This 30-minute video reviews best practices for advanced deployment scenarios, including geo-distributed workloads.</span></span> <span data-ttu-id="72e2d-257">Você também pode consultar [Desempenho e otimização no Azure Search](search-performance-optimization.md) para páginas de ajuda que abrangem os mesmos pontos.</span><span class="sxs-lookup"><span data-stu-id="72e2d-257">You can also see [Performance and optimization in Azure Search](search-performance-optimization.md) for help pages that cover the same points.</span></span>

> [!VIDEO https://channel9.msdn.com/Events/Microsoft-Azure/AzureCon-2015/ACON319/player]
> 
> 

<a id="next-steps"></a>

## <a name="next-steps"></a><span data-ttu-id="72e2d-258">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="72e2d-258">Next steps</span></span>
<span data-ttu-id="72e2d-259">Depois de compreender os conceitos por trás de administração do serviço, considere o uso do [PowerShell](search-manage-powershell.md) para automatizar tarefas.</span><span class="sxs-lookup"><span data-stu-id="72e2d-259">Once you understand the concepts behind service administration, consider using [PowerShell](search-manage-powershell.md) to automate tasks.</span></span>

<span data-ttu-id="72e2d-260">Também é recomendável examinar o [artigo de desempenho e otimização](search-performance-optimization.md).</span><span class="sxs-lookup"><span data-stu-id="72e2d-260">We also recommend reviewing the [performance and optimization article](search-performance-optimization.md).</span></span>

<span data-ttu-id="72e2d-261">Outra recomendação é assistir ao vídeo mencionado na seção anterior.</span><span class="sxs-lookup"><span data-stu-id="72e2d-261">Another recommendation is to watch the video noted in the previous section.</span></span> <span data-ttu-id="72e2d-262">Ele fornece uma cobertura mais profunda das técnicas mencionadas nesta seção.</span><span class="sxs-lookup"><span data-stu-id="72e2d-262">It provides deeper coverage of the techniques mentioned in this section.</span></span>

<!--Image references-->
[7]: ./media/search-manage/rbac-icon.png
[8]: ./media/search-manage/Azure-Search-Manage-1-URL.png
[9]: ./media/search-manage/Azure-Search-Manage-2-Keys.png
[10]: ./media/search-manage/Azure-Search-Manage-3-ScaleUp.png



