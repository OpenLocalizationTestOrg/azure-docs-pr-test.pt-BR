---
title: "aaaModeling multilocação na pesquisa do Azure | Microsoft Docs"
description: "Saiba mais sobre padrões de design comuns para aplicativos SaaS multilocatários ao usar o Azure Search."
services: search
manager: jhubbard
author: ashmaka
documentationcenter: 
ms.assetid: 72e9696a-553b-47dc-9e05-a82db0ebf094
ms.service: search
ms.devlang: NA
ms.workload: search
ms.topic: article
ms.tgt_pltfrm: na
ms.date: 10/26/2016
ms.author: ashmaka
ms.openlocfilehash: dd46cda772d32566b9aaa18d407f12fdf178bd43
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="design-patterns-for-multitenant-saas-applications-and-azure-search"></a><span data-ttu-id="ffb7a-103">Padrões de design para aplicativos SaaS multilocatários e Azure Search</span><span class="sxs-lookup"><span data-stu-id="ffb7a-103">Design patterns for multitenant SaaS applications and Azure Search</span></span>
<span data-ttu-id="ffb7a-104">Um aplicativo multilocatário é aquele que fornece Olá mesmo número de tooany de serviços e recursos de locatários que não pode ver ou compartilhar dados de saudação de nenhum outro locatário.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-104">A multitenant application is one that provides hello same services and capabilities tooany number of tenants who cannot see or share hello data of any other tenant.</span></span> <span data-ttu-id="ffb7a-105">Este documento discute estratégias de isolamento de locatário para aplicativos multilocatários criados com o Azure Search.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-105">This document discusses tenant isolation strategies for multitenant applications built with Azure Search.</span></span>

## <a name="azure-search-concepts"></a><span data-ttu-id="ffb7a-106">Conceitos do Azure Search</span><span class="sxs-lookup"><span data-stu-id="ffb7a-106">Azure Search concepts</span></span>
<span data-ttu-id="ffb7a-107">Como uma solução de pesquisa como um serviço, a pesquisa do Azure permite experiências de pesquisa avançada do desenvolvedores tooadd tooapplications sem nenhuma infraestrutura de gerenciamento ou se tornar um especialista em pesquisa.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-107">As a search-as-a-service solution, Azure Search allows developers tooadd rich search experiences tooapplications without managing any infrastructure or becoming an expert in search.</span></span> <span data-ttu-id="ffb7a-108">Os dados são carregados toohello serviço e, em seguida, são armazenados na nuvem hello.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-108">Data is uploaded toohello service and then stored in hello cloud.</span></span> <span data-ttu-id="ffb7a-109">Usando solicitações simples toohello API de pesquisa do Azure, dados saudação podem ser modificados e pesquisados.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-109">Using simple requests toohello Azure Search API, hello data can then be modified and searched.</span></span> <span data-ttu-id="ffb7a-110">Uma visão geral do serviço de saudação pode ser encontrada no [neste artigo](http://aka.ms/whatisazsearch).</span><span class="sxs-lookup"><span data-stu-id="ffb7a-110">An overview of hello service can be found in [this article](http://aka.ms/whatisazsearch).</span></span> <span data-ttu-id="ffb7a-111">Antes de discutir sobre padrões de design, é importante toounderstand alguns conceitos na pesquisa do Azure.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-111">Before discussing design patterns, it is important toounderstand some concepts in Azure Search.</span></span>

### <a name="search-services-indexes-fields-and-documents"></a><span data-ttu-id="ffb7a-112">Serviços de pesquisa, índices, campos e documentos</span><span class="sxs-lookup"><span data-stu-id="ffb7a-112">Search services, indexes, fields, and documents</span></span>
<span data-ttu-id="ffb7a-113">Ao usar a pesquisa do Azure, um assina tooa *serviço de pesquisa*.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-113">When using Azure Search, one subscribes tooa *search service*.</span></span> <span data-ttu-id="ffb7a-114">Os dados são carregado tooAzure pesquisa, são armazenados em um *índice* no serviço de pesquisa de saudação.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-114">As data is uploaded tooAzure Search, it is stored in an *index* within hello search service.</span></span> <span data-ttu-id="ffb7a-115">Pode haver um número de índices em um único serviço.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-115">There can be a number of indexes within a single service.</span></span> <span data-ttu-id="ffb7a-116">conceitos familiares de saudação de toouse de bancos de dados, o serviço de pesquisa Olá pode ser comparado tooa banco de dados enquanto os índices de saudação dentro de um serviço podem ser comparadas tootables dentro de um banco de dados.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-116">toouse hello familiar concepts of databases, hello search service can be likened tooa database while hello indexes within a service can be likened tootables within a database.</span></span>

<span data-ttu-id="ffb7a-117">Cada índice dentro de um serviço de pesquisa tem seu próprio esquema, que é definido por um número de *campos*personalizáveis.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-117">Each index within a search service has its own schema, which is defined by a number of customizable *fields*.</span></span> <span data-ttu-id="ffb7a-118">Os dados serão adicionados tooan índice de pesquisa do Azure no formulário de saudação do indivíduo *documentos*.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-118">Data is added tooan Azure Search index in hello form of individual *documents*.</span></span> <span data-ttu-id="ffb7a-119">Cada documento deve ser carregado tooa determinado índice e deve se ajustar o esquema do índice.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-119">Each document must be uploaded tooa particular index and must fit that index's schema.</span></span> <span data-ttu-id="ffb7a-120">Ao pesquisar dados usando a pesquisa do Azure, as consultas de pesquisa de texto completo de saudação são emitidas em relação a um índice específico.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-120">When searching data using Azure Search, hello full-text search queries are issued against a particular index.</span></span>  <span data-ttu-id="ffb7a-121">toocompare toothose esses conceitos de banco de dados, os campos podem ser comparadas toocolumns em uma tabela e os documentos podem ser comparadas toorows.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-121">toocompare these concepts toothose of a database, fields can be likened toocolumns in a table and documents can be likened toorows.</span></span>

### <a name="scalability"></a><span data-ttu-id="ffb7a-122">Escalabilidade</span><span class="sxs-lookup"><span data-stu-id="ffb7a-122">Scalability</span></span>
<span data-ttu-id="ffb7a-123">Qualquer serviço de pesquisa do Azure na saudação padrão [preço](https://azure.microsoft.com/pricing/details/search/) pode aumentar em duas dimensões: armazenamento e disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-123">Any Azure Search service in hello Standard [pricing tier](https://azure.microsoft.com/pricing/details/search/) can scale in two dimensions: storage and availability.</span></span>

* <span data-ttu-id="ffb7a-124">*Partições* podem ser adicionados como armazenamento de saudação tooincrease de um serviço de pesquisa.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-124">*Partitions* can be added tooincrease hello storage of a search service.</span></span>
* <span data-ttu-id="ffb7a-125">*Réplicas* podem ser adicionados a taxa de transferência do tooa serviço tooincrease Olá de solicitações que um serviço de pesquisa pode manipular.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-125">*Replicas* can be added tooa service tooincrease hello throughput of requests that a search service can handle.</span></span>

<span data-ttu-id="ffb7a-126">Adicionando e removendo partições e réplicas em permitirá que a capacidade de saudação do toogrow de serviço de pesquisa Olá com valor de saudação de dados e o tráfego demandas de aplicativo hello.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-126">Adding and removing partitions and replicas at will allow hello capacity of hello search service toogrow with hello amount of data and traffic hello application demands.</span></span> <span data-ttu-id="ffb7a-127">Em ordem para um tooachieve de serviço de pesquisa uma leitura [SLA](https://azure.microsoft.com/support/legal/sla/search/v1_0/), ele requer duas réplicas.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-127">In order for a search service tooachieve a read [SLA](https://azure.microsoft.com/support/legal/sla/search/v1_0/), it requires two replicas.</span></span> <span data-ttu-id="ffb7a-128">Em ordem para um serviço tooachieve uma leitura-gravação [SLA](https://azure.microsoft.com/support/legal/sla/search/v1_0/), ele requer três réplicas.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-128">In order for a service tooachieve a read-write [SLA](https://azure.microsoft.com/support/legal/sla/search/v1_0/), it requires three replicas.</span></span>

### <a name="service-and-index-limits-in-azure-search"></a><span data-ttu-id="ffb7a-129">Limites de serviço e índice no Azure Search</span><span class="sxs-lookup"><span data-stu-id="ffb7a-129">Service and index limits in Azure Search</span></span>
<span data-ttu-id="ffb7a-130">Existem alguns diferentes [camadas de preços](https://azure.microsoft.com/pricing/details/search/) na pesquisa do Azure, cada uma das camadas de saudação tem diferentes [limites e cotas](search-limits-quotas-capacity.md).</span><span class="sxs-lookup"><span data-stu-id="ffb7a-130">There are a few different [pricing tiers](https://azure.microsoft.com/pricing/details/search/) in Azure Search, each of hello tiers has different [limits and quotas](search-limits-quotas-capacity.md).</span></span> <span data-ttu-id="ffb7a-131">Alguns desses limites são a saudação de nível de serviço, alguns estão no nível de índice hello e alguns estão no nível de partição hello.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-131">Some of these limits are at hello service-level, some are at hello index-level, and some are at hello partition-level.</span></span>

|  | <span data-ttu-id="ffb7a-132">Basic</span><span class="sxs-lookup"><span data-stu-id="ffb7a-132">Basic</span></span> | <span data-ttu-id="ffb7a-133">Standard1</span><span class="sxs-lookup"><span data-stu-id="ffb7a-133">Standard1</span></span> | <span data-ttu-id="ffb7a-134">Standard2</span><span class="sxs-lookup"><span data-stu-id="ffb7a-134">Standard2</span></span> | <span data-ttu-id="ffb7a-135">Standard3</span><span class="sxs-lookup"><span data-stu-id="ffb7a-135">Standard3</span></span> | <span data-ttu-id="ffb7a-136">Standard3 HD</span><span class="sxs-lookup"><span data-stu-id="ffb7a-136">Standard3 HD</span></span> |
| --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="ffb7a-137">Máximo de réplicas por serviço</span><span class="sxs-lookup"><span data-stu-id="ffb7a-137">Maximum Replicas per Service</span></span> |<span data-ttu-id="ffb7a-138">3</span><span class="sxs-lookup"><span data-stu-id="ffb7a-138">3</span></span> |<span data-ttu-id="ffb7a-139">12</span><span class="sxs-lookup"><span data-stu-id="ffb7a-139">12</span></span> |<span data-ttu-id="ffb7a-140">12</span><span class="sxs-lookup"><span data-stu-id="ffb7a-140">12</span></span> |<span data-ttu-id="ffb7a-141">12</span><span class="sxs-lookup"><span data-stu-id="ffb7a-141">12</span></span> |<span data-ttu-id="ffb7a-142">12</span><span class="sxs-lookup"><span data-stu-id="ffb7a-142">12</span></span> |
| <span data-ttu-id="ffb7a-143">Máximo de partições por serviço</span><span class="sxs-lookup"><span data-stu-id="ffb7a-143">Maximum Partitions per Service</span></span> |<span data-ttu-id="ffb7a-144">1</span><span class="sxs-lookup"><span data-stu-id="ffb7a-144">1</span></span> |<span data-ttu-id="ffb7a-145">12</span><span class="sxs-lookup"><span data-stu-id="ffb7a-145">12</span></span> |<span data-ttu-id="ffb7a-146">12</span><span class="sxs-lookup"><span data-stu-id="ffb7a-146">12</span></span> |<span data-ttu-id="ffb7a-147">12</span><span class="sxs-lookup"><span data-stu-id="ffb7a-147">12</span></span> |<span data-ttu-id="ffb7a-148">1</span><span class="sxs-lookup"><span data-stu-id="ffb7a-148">1</span></span> |
| <span data-ttu-id="ffb7a-149">Máximo de unidades de pesquisa (réplicas * partições) por serviço</span><span class="sxs-lookup"><span data-stu-id="ffb7a-149">Maximum Search Units (Replicas*Partitions) per Service</span></span> |<span data-ttu-id="ffb7a-150">3</span><span class="sxs-lookup"><span data-stu-id="ffb7a-150">3</span></span> |<span data-ttu-id="ffb7a-151">36</span><span class="sxs-lookup"><span data-stu-id="ffb7a-151">36</span></span> |<span data-ttu-id="ffb7a-152">36</span><span class="sxs-lookup"><span data-stu-id="ffb7a-152">36</span></span> |<span data-ttu-id="ffb7a-153">36</span><span class="sxs-lookup"><span data-stu-id="ffb7a-153">36</span></span> |<span data-ttu-id="ffb7a-154">36 (máx. de 3 partições)</span><span class="sxs-lookup"><span data-stu-id="ffb7a-154">36 (max 3 partitions)</span></span> |
| <span data-ttu-id="ffb7a-155">Máximo de documentos por serviço</span><span class="sxs-lookup"><span data-stu-id="ffb7a-155">Maximum Documents per Service</span></span> |<span data-ttu-id="ffb7a-156">1 milhão</span><span class="sxs-lookup"><span data-stu-id="ffb7a-156">1 million</span></span> |<span data-ttu-id="ffb7a-157">180 milhões</span><span class="sxs-lookup"><span data-stu-id="ffb7a-157">180 million</span></span> |<span data-ttu-id="ffb7a-158">720 milhões</span><span class="sxs-lookup"><span data-stu-id="ffb7a-158">720 million</span></span> |<span data-ttu-id="ffb7a-159">1.4 bilhão</span><span class="sxs-lookup"><span data-stu-id="ffb7a-159">1.4 billion</span></span> |<span data-ttu-id="ffb7a-160">600 milhões</span><span class="sxs-lookup"><span data-stu-id="ffb7a-160">600 million</span></span> |
| <span data-ttu-id="ffb7a-161">Armazenamento máximo por serviço</span><span class="sxs-lookup"><span data-stu-id="ffb7a-161">Maximum Storage per Service</span></span> |<span data-ttu-id="ffb7a-162">2 GB</span><span class="sxs-lookup"><span data-stu-id="ffb7a-162">2 GB</span></span> |<span data-ttu-id="ffb7a-163">300 GB</span><span class="sxs-lookup"><span data-stu-id="ffb7a-163">300 GB</span></span> |<span data-ttu-id="ffb7a-164">1,2 TB</span><span class="sxs-lookup"><span data-stu-id="ffb7a-164">1.2 TB</span></span> |<span data-ttu-id="ffb7a-165">2,4 TB</span><span class="sxs-lookup"><span data-stu-id="ffb7a-165">2.4 TB</span></span> |<span data-ttu-id="ffb7a-166">600 GB</span><span class="sxs-lookup"><span data-stu-id="ffb7a-166">600 GB</span></span> |
| <span data-ttu-id="ffb7a-167">Máximo de documentos por partição</span><span class="sxs-lookup"><span data-stu-id="ffb7a-167">Maximum Documents per Partition</span></span> |<span data-ttu-id="ffb7a-168">1 milhão</span><span class="sxs-lookup"><span data-stu-id="ffb7a-168">1 million</span></span> |<span data-ttu-id="ffb7a-169">15 milhões</span><span class="sxs-lookup"><span data-stu-id="ffb7a-169">15 million</span></span> |<span data-ttu-id="ffb7a-170">60 milhões</span><span class="sxs-lookup"><span data-stu-id="ffb7a-170">60 million</span></span> |<span data-ttu-id="ffb7a-171">120 milhões</span><span class="sxs-lookup"><span data-stu-id="ffb7a-171">120 million</span></span> |<span data-ttu-id="ffb7a-172">200 milhões</span><span class="sxs-lookup"><span data-stu-id="ffb7a-172">200 million</span></span> |
| <span data-ttu-id="ffb7a-173">Armazenamento máximo por partição</span><span class="sxs-lookup"><span data-stu-id="ffb7a-173">Maximum Storage per Partition</span></span> |<span data-ttu-id="ffb7a-174">2 GB</span><span class="sxs-lookup"><span data-stu-id="ffb7a-174">2 GB</span></span> |<span data-ttu-id="ffb7a-175">25 GB</span><span class="sxs-lookup"><span data-stu-id="ffb7a-175">25 GB</span></span> |<span data-ttu-id="ffb7a-176">100 GB</span><span class="sxs-lookup"><span data-stu-id="ffb7a-176">100 GB</span></span> |<span data-ttu-id="ffb7a-177">200 GB</span><span class="sxs-lookup"><span data-stu-id="ffb7a-177">200 GB</span></span> |<span data-ttu-id="ffb7a-178">200 GB</span><span class="sxs-lookup"><span data-stu-id="ffb7a-178">200 GB</span></span> |
| <span data-ttu-id="ffb7a-179">Índices máximos por serviço</span><span class="sxs-lookup"><span data-stu-id="ffb7a-179">Maximum Indexes per Service</span></span> |<span data-ttu-id="ffb7a-180">5</span><span class="sxs-lookup"><span data-stu-id="ffb7a-180">5</span></span> |<span data-ttu-id="ffb7a-181">50</span><span class="sxs-lookup"><span data-stu-id="ffb7a-181">50</span></span> |<span data-ttu-id="ffb7a-182">200</span><span class="sxs-lookup"><span data-stu-id="ffb7a-182">200</span></span> |<span data-ttu-id="ffb7a-183">200</span><span class="sxs-lookup"><span data-stu-id="ffb7a-183">200</span></span> |<span data-ttu-id="ffb7a-184">3000 (máx. de 1000 índices/partição)</span><span class="sxs-lookup"><span data-stu-id="ffb7a-184">3000 (max 1000 indexes/partition)</span></span> |

#### <a name="s3-high-density"></a><span data-ttu-id="ffb7a-185">Alta densidade S3</span><span class="sxs-lookup"><span data-stu-id="ffb7a-185">S3 High Density'</span></span>
<span data-ttu-id="ffb7a-186">Na camada de preços de S3 da pesquisa do Azure, há uma opção para o modo de alta densidade (HD) Olá projetado especificamente para cenários multilocatários.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-186">In Azure Search’s S3 pricing tier, there is an option for hello High Density (HD) mode designed specifically for multitenant scenarios.</span></span> <span data-ttu-id="ffb7a-187">Em muitos casos, é necessário toosupport um grande número de locatários menores em benefícios de Olá de tooachieve um único serviço de simplicidade e redução de custos.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-187">In many cases, it is necessary toosupport a large number of smaller tenants under a single service tooachieve hello benefits of simplicity and cost efficiency.</span></span>

<span data-ttu-id="ffb7a-188">S3 HD permite Olá muitos toobe de índices pequenos compactados em gerenciamento de saudação de um serviço de pesquisa único pelo comerciais Olá capacidade tooscale out índices usando partições para Olá capacidade toohost mais índices em um único serviço.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-188">S3 HD allows for hello many small indexes toobe packed under hello management of a single search service by trading hello ability tooscale out indexes using partitions for hello ability toohost more indexes in a single service.</span></span>

<span data-ttu-id="ffb7a-189">Concretamente, um serviço S3 poderia ter entre 1 e 200 índices que juntos podem hospedar documentos bilhões too1.4.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-189">Concretely, an S3 service could have between 1 and 200 indexes that together could host up too1.4 billion documents.</span></span> <span data-ttu-id="ffb7a-190">Um HD S3 em Olá outro lado permitiria índices individuais tooonly subir too1 milhões de documentos, mas ele pode tratar dos índices de too1000 por partição (backup too3000 por serviço) com uma contagem de documento total de 200 milhões por partição (backup too600 milhões por serviço).</span><span class="sxs-lookup"><span data-stu-id="ffb7a-190">An S3 HD on hello other hand would allow individual indexes tooonly go up too1 million documents, but it can handle up too1000 indexes per partition (up too3000 per service) with a total document count of 200 million per partition (up too600 million per service).</span></span>

## <a name="considerations-for-multitenant-applications"></a><span data-ttu-id="ffb7a-191">Considerações para aplicativos multilocatários</span><span class="sxs-lookup"><span data-stu-id="ffb7a-191">Considerations for multitenant applications</span></span>
<span data-ttu-id="ffb7a-192">Aplicativos multilocatários devem distribuir de forma eficiente recursos entre locatários Olá preservando algum nível de privacidade entre hello vários locatários.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-192">Multitenant applications must effectively distribute resources among hello tenants while preserving some level of privacy between hello various tenants.</span></span> <span data-ttu-id="ffb7a-193">Há algumas considerações ao criar a arquitetura de saudação para esse aplicativo:</span><span class="sxs-lookup"><span data-stu-id="ffb7a-193">There are a few considerations when designing hello architecture for such an application:</span></span>

* <span data-ttu-id="ffb7a-194">*Isolamento de locatários:* os desenvolvedores de aplicativos precisam tootake medidas apropriadas tooensure que nenhum locatários tem não autorizado ou indesejado toohello de acessar dados de outros locatários.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-194">*Tenant isolation:* Application developers need tootake appropriate measures tooensure that no tenants have unauthorized or unwanted access toohello data of other tenants.</span></span> <span data-ttu-id="ffb7a-195">Além da perspectiva de saudação de privacidade de dados, estratégias de isolamento de locatário exigem o gerenciamento eficaz de recursos compartilhados e a proteção de vizinhos com ruídos.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-195">Beyond hello perspective of data privacy, tenant isolation strategies require effective management of shared resources and protection from noisy neighbors.</span></span>
* <span data-ttu-id="ffb7a-196">*Custo de recursos de nuvem:* como com qualquer outro aplicativo, as soluções de software devem permanecer competitivas em termos de custo como um componente de um aplicativo multilocatário.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-196">*Cloud resource cost:* As with any other application, software solutions must remain cost competitive as a component of a multitenant application.</span></span>
* <span data-ttu-id="ffb7a-197">*Facilidade de operações:* ao desenvolver uma arquitetura de multilocatária, Olá impacto nas operações do aplicativo hello e complexidade é uma consideração importante.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-197">*Ease of Operations:* When developing a multitenant architecture, hello impact on hello application's operations and complexity is an important consideration.</span></span> <span data-ttu-id="ffb7a-198">O Azure Search tem um [SLA de 99,9%](https://azure.microsoft.com/support/legal/sla/search/v1_0/).</span><span class="sxs-lookup"><span data-stu-id="ffb7a-198">Azure Search has a [99.9% SLA](https://azure.microsoft.com/support/legal/sla/search/v1_0/).</span></span>
* <span data-ttu-id="ffb7a-199">*Espaço global:* aplicativos Multilocatários talvez seja necessário tooeffectively sirvam locatários que são distribuídos entre globo hello.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-199">*Global footprint:* Multitenant applications may need tooeffectively serve tenants which are distributed across hello globe.</span></span>
* <span data-ttu-id="ffb7a-200">*Escalabilidade:* os desenvolvedores de aplicativos precisam tooconsider como eles reconciliam entre manter um nível de complexidade do aplicativo suficientemente baixo e criando Olá aplicativo tooscale com número de locatários e Olá tamanho dos dados de locatários e carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-200">*Scalability:* Application developers need tooconsider how they reconcile between maintaining a sufficiently low level of application complexity and designing hello application tooscale with number of tenants and hello size of tenants' data and workload.</span></span>

<span data-ttu-id="ffb7a-201">A pesquisa do Azure oferece alguns limites que podem ser usados tooisolate locatários dados e carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-201">Azure Search offers a few boundaries that can be used tooisolate tenants’ data and workload.</span></span>

## <a name="modeling-multitenancy-with-azure-search"></a><span data-ttu-id="ffb7a-202">Modelagem de multilocação com o Azure Search</span><span class="sxs-lookup"><span data-stu-id="ffb7a-202">Modeling multitenancy with Azure Search</span></span>
<span data-ttu-id="ffb7a-203">No caso de saudação de um cenário de multilocatário, o desenvolvedor do aplicativo hello consome um ou mais serviços de pesquisa e dividir seus locatários entre serviços, índices ou ambos.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-203">In hello case of a multitenant scenario, hello application developer consumes one or more search services and divide their tenants among services, indexes, or both.</span></span> <span data-ttu-id="ffb7a-204">O Azure Search tem alguns padrões comuns ao modelar um cenário de multilocatário:</span><span class="sxs-lookup"><span data-stu-id="ffb7a-204">Azure Search has a few common patterns when modeling a multitenant scenario:</span></span>

1. <span data-ttu-id="ffb7a-205">*Índice por locatário:* cada locatário tem seu próprio índice dentro de um serviço de pesquisa que é compartilhado com outros locatários.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-205">*Index per tenant:* Each tenant has its own index within a search service that is shared with other tenants.</span></span>
2. <span data-ttu-id="ffb7a-206">*Serviço por locatário:* cada locatário tem seu próprio serviço do Azure Search dedicado, oferecendo o nível mais alto de separação de dados e a carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-206">*Service per tenant:* Each tenant has its own dedicated Azure Search service, offering highest level of data and workload separation.</span></span>
3. <span data-ttu-id="ffb7a-207">*Mistura de ambos:* locatários maiores e mais ativos são atribuídos a serviços dedicados enquanto locatários menores são atribuídos a índices individuais dentro de serviços compartilhados.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-207">*Mix of both:* Larger, more-active tenants are assigned dedicated services while smaller tenants are assigned individual indexes within shared services.</span></span>

## <a name="1-index-per-tenant"></a><span data-ttu-id="ffb7a-208">1. Indexar por locatário</span><span class="sxs-lookup"><span data-stu-id="ffb7a-208">1. Index per tenant</span></span>
![Um portrayal de modelo de índice por locatário Olá](./media/search-modeling-multitenant-saas-applications/azure-search-index-per-tenant.png)

<span data-ttu-id="ffb7a-210">Em um modelo de índice por locatário, vários locatários ocupam um único serviço do Azure Search, em que cada locatário tem seu próprio índice.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-210">In an index-per-tenant model, multiple tenants occupy a single Azure Search service where each tenant has their own index.</span></span>

<span data-ttu-id="ffb7a-211">Locatários atingem o isolamento de dados porque todas as solicitações de pesquisa e operações de documento são emitidas em um nível de índice no Azure Search.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-211">Tenants achieve data isolation because all search requests and document operations are issued at an index level in Azure Search.</span></span> <span data-ttu-id="ffb7a-212">Na camada de aplicativo hello, não há reconhecimento de necessidade de saudação toodirect Olá índices adequados de toohello de tráfego de vários locatários ao também gerenciar recursos no nível de serviço Olá entre todos os locatários.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-212">In hello application layer, there is hello need awareness toodirect hello various tenants’ traffic toohello proper indexes while also managing resources at hello service level across all tenants.</span></span>

<span data-ttu-id="ffb7a-213">Um atributo de chave do modelo de índice por locatário Olá é a capacidade de Olá Olá aplicativo developer toooversubscribe Olá capacidade de um serviço de pesquisa entre locatários do aplicativo hello.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-213">A key attribute of hello index-per-tenant model is hello ability for hello application developer toooversubscribe hello capacity of a search service among hello application’s tenants.</span></span> <span data-ttu-id="ffb7a-214">Se locatários Olá têm uma distribuição irregular de carga de trabalho, a combinação ideal de saudação de locatários pode ser distribuídos em um serviço de pesquisa índices tooaccommodate um número de locatários altamente ativos, uso intensivo de recursos ao servir simultaneamente uma cauda longa de locatários menos ativos.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-214">If hello tenants have an uneven distribution of workload, hello optimal combination of tenants can be distributed across a search service’s indexes tooaccommodate a number of highly active, resource-intensive tenants while simultaneously serving a long tail of less active tenants.</span></span> <span data-ttu-id="ffb7a-215">compensação de saudação é a incapacidade de saudação toohandle situações Olá modelo onde cada locatário simultaneamente é altamente ativo.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-215">hello trade-off is hello inability of hello model toohandle situations where each tenant is concurrently highly active.</span></span>

<span data-ttu-id="ffb7a-216">modelo de índice por locatário Olá fornece a base de saudação para um modelo de variável de custo, em que um serviço de pesquisa do Azure inteiro é comprou inicial e subsequentemente preenchido com locatários.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-216">hello index-per-tenant model provides hello basis for a variable cost model, where an entire Azure Search service is bought up-front and then subsequently filled with tenants.</span></span> <span data-ttu-id="ffb7a-217">Isso possibilita a capacidade não utilizada toobe designado para as avaliações e as contas gratuitas.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-217">This allows for unused capacity toobe designated for trials and free accounts.</span></span>

<span data-ttu-id="ffb7a-218">Para aplicativos com um espaço global, modelo de índice por locatário Olá pode não ser hello mais eficiente.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-218">For applications with a global footprint, hello index-per-tenant model may not be hello most efficient.</span></span> <span data-ttu-id="ffb7a-219">Se locatários do aplicativo são distribuídos globo hello, um serviço separado pode ser necessário para cada região que pode duplicar os custos em cada um deles.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-219">If an application's tenants are distributed across hello globe, a separate service may be necessary for each region which may duplicate costs across each of them.</span></span>

<span data-ttu-id="ffb7a-220">Pesquisa do Azure permite a escala de saudação de índices individuais hello e o número total de saudação do toogrow de índices.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-220">Azure Search allows for hello scale of both hello individual indexes and hello total number of indexes toogrow.</span></span> <span data-ttu-id="ffb7a-221">Se um preço apropriado camada for escolhido, partições e réplicas podem ser adicionadas a serviço de pesquisa inteira toohello quando um índice individual no serviço Olá ficar muito grande em termos de armazenamento ou o tráfego.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-221">If an appropriate pricing tier is chosen, partitions and replicas can be added toohello entire search service when an individual index within hello service grows too large in terms of storage or traffic.</span></span>

<span data-ttu-id="ffb7a-222">Se o número total de saudação de índices aumenta muito grande para um único serviço, o outro serviço tem tooaccommodate toobe provisionado Olá novos locatários.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-222">If hello total number of indexes grows too large for a single service, another service has toobe provisioned tooaccommodate hello new tenants.</span></span> <span data-ttu-id="ffb7a-223">Se os índices têm toobe movido entre serviços de pesquisa à medida que são adicionados novos serviços, dados de saudação do índice de saudação tem toobe copiado manualmente um índice toohello outros como pesquisa do Azure não permite uma toobe índice movido.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-223">If indexes have toobe moved between search services as new services are added, hello data from hello index has toobe manually copied from one index toohello other as Azure Search does not allow for an index toobe moved.</span></span>

## <a name="2-service-per-tenant"></a><span data-ttu-id="ffb7a-224">2. Serviço por locatário</span><span class="sxs-lookup"><span data-stu-id="ffb7a-224">2. Service per tenant</span></span>
![Um portrayal de modelo de serviço por locatário Olá](./media/search-modeling-multitenant-saas-applications/azure-search-service-per-tenant.png)

<span data-ttu-id="ffb7a-226">Em uma arquitetura de serviço por locatário, cada locatário tem seu próprio serviço de pesquisa.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-226">In a service-per-tenant architecture, each tenant has its own search service.</span></span>

<span data-ttu-id="ffb7a-227">Nesse modelo, o aplicativo hello atinge o nível máximo de isolamento para seus locatários hello.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-227">In this model, hello application achieves hello maximum level of isolation for its tenants.</span></span> <span data-ttu-id="ffb7a-228">Cada serviço tem armazenamento dedicado e taxa de transferência para lidar com solicitação de pesquisa, bem como chaves de API separadas.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-228">Each service has dedicated storage and throughput for handling search request as well as separate API keys.</span></span>

<span data-ttu-id="ffb7a-229">Para aplicativos em que cada locatário tem um volume grande ou carga de trabalho Olá tem pouca variação de locatário tootenant, o modelo de serviço por locatário Olá é uma opção adequada como recursos não são compartilhados entre as cargas de trabalho de vários locatários.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-229">For applications where each tenant has a large footprint or hello workload has little variability from tenant tootenant, hello service-per-tenant model is an effective choice as resources are not shared across various tenants’ workloads.</span></span>

<span data-ttu-id="ffb7a-230">Um serviço de acordo com o modelo de locatário também oferece o benefício de saudação de um modelo de custo fixo e previsível.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-230">A service per tenant model also offers hello benefit of a predictable, fixed cost model.</span></span> <span data-ttu-id="ffb7a-231">Não há nenhum investimento inicial em um serviço de pesquisa inteira até que haja um locatário toofill, porém Olá custo por locatário for maior do que um modelo de índice por locatário.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-231">There is no up-front investment in an entire search service until there is a tenant toofill it, however hello cost-per-tenant is higher than an index-per-tenant model.</span></span>

<span data-ttu-id="ffb7a-232">modelo de serviço por locatário Olá é uma opção eficiente para aplicativos com um espaço global.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-232">hello service-per-tenant model is an efficient choice for applications with a global footprint.</span></span> <span data-ttu-id="ffb7a-233">Com locatários geograficamente distribuídas, é fácil toohave serviço cada locatário na região apropriada hello.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-233">With geographically-distributed tenants, it is easy toohave each tenant's service in hello appropriate region.</span></span>

<span data-ttu-id="ffb7a-234">os desafios de Olá na expansão deste padrão surgir quando locatários individuais mais atender o crescimento seu serviço.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-234">hello challenges in scaling this pattern arise when individual tenants outgrow their service.</span></span> <span data-ttu-id="ffb7a-235">A pesquisa do Azure atualmente não dá suporte para atualização Olá preço de um serviço de pesquisa, para que todos os dados teria toobe copiado manualmente tooa novo serviço.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-235">Azure Search does not currently support upgrading hello pricing tier of a search service, so all data would have toobe manually copied tooa new service.</span></span>

## <a name="3-mixing-both-models"></a><span data-ttu-id="ffb7a-236">3. Combinação dos dois modelos</span><span class="sxs-lookup"><span data-stu-id="ffb7a-236">3. Mixing both models</span></span>
<span data-ttu-id="ffb7a-237">Outro padrão para modelar a multilocação é misturar estratégias de índice por locatário e de serviço por locatário.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-237">Another pattern for modeling multitenancy is mixing both index-per-tenant and service-per-tenant strategies.</span></span>

<span data-ttu-id="ffb7a-238">Misturando padrões Olá dois, locatários maior de um aplicativo podem ocupar serviços dedicados enquanto Olá longa parte final do menos locatários ativos, menores pode ocupar índices em um serviço compartilhado.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-238">By mixing hello two patterns, an application's largest tenants can occupy dedicated services while hello long tail of less active, smaller tenants can occupy indexes in a shared service.</span></span> <span data-ttu-id="ffb7a-239">Esse modelo garante que locatários maior Olá consistentemente alto desempenho do serviço de saudação enquanto ajuda tooprotect Olá locatários menores de qualquer vizinhos com ruídos.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-239">This model ensures that hello largest tenants have consistently high performance from hello service while helping tooprotect hello smaller tenants from any noisy neighbors.</span></span>

<span data-ttu-id="ffb7a-240">No entanto, implementar essa estratégia depende da antecipação para prever quais locatários exigirão um serviço dedicado em vez de um índice em um serviço compartilhado.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-240">However, implementing this strategy relies foresight in predicting which tenants will require a dedicated service versus an index in a shared service.</span></span> <span data-ttu-id="ffb7a-241">Complexidade de aplicativo aumenta com hello necessidade toomanage dois desses modelos de multilocação.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-241">Application complexity increases with hello need toomanage both of these multitenancy models.</span></span>

## <a name="achieving-even-finer-granularity"></a><span data-ttu-id="ffb7a-242">Como obter granularidade ainda maior</span><span class="sxs-lookup"><span data-stu-id="ffb7a-242">Achieving even finer granularity</span></span>
<span data-ttu-id="ffb7a-243">Olá acima cenários multilocatário de toomodel do padrões de design na pesquisa do Azure suponha um escopo uniforme, onde cada locatário é toda a instância de um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-243">hello above design patterns toomodel multitenant scenarios in Azure Search assume a uniform scope where each tenant is a whole instance of an application.</span></span> <span data-ttu-id="ffb7a-244">No entanto, às vezes, os aplicativos podem manipular vários escopos menores.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-244">However, applications can sometimes handle many smaller scopes.</span></span>

<span data-ttu-id="ffb7a-245">Se os modelos de serviço por locatário e índice por locatário não forem suficientemente pequenos escopos, é possível toomodel tooachieve um índice um grau de granularidade até mesmo mais detalhado.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-245">If service-per-tenant and index-per-tenant models are not sufficiently small scopes, it is possible toomodel an index tooachieve an even finer degree of granularity.</span></span>

<span data-ttu-id="ffb7a-246">toohave um único índice se comportam de forma diferente para pontos de extremidade de cliente diferentes, um campo pode ser índice tooan adicionado, que designa um determinado valor para cada cliente possíveis.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-246">toohave a single index behave differently for different client endpoints, a field can be added tooan index which designates a certain value for each possible client.</span></span> <span data-ttu-id="ffb7a-247">Cada vez que um cliente chama tooquery de pesquisa do Azure ou modificar um índice, código de saudação do aplicativo de cliente hello Especifica valor apropriado de saudação para esse campo usando a pesquisa do Azure [filtro](https://msdn.microsoft.com/library/azure/dn798921.aspx) recurso no momento da consulta.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-247">Each time a client calls Azure Search tooquery or modify an index, hello code from hello client application specifies hello appropriate value for that field using Azure Search's [filter](https://msdn.microsoft.com/library/azure/dn798921.aspx) capability at query time.</span></span>

<span data-ttu-id="ffb7a-248">Esse método pode ser usado tooachieve funcionalidade de contas de usuário separadas, níveis de permissão separados e aplicativos até mesmo completamente separados.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-248">This method can be used tooachieve functionality of separate user accounts, separate permission levels, and even completely separate applications.</span></span>

> [!NOTE]
> <span data-ttu-id="ffb7a-249">Usando a abordagem de saudação descrita acima tooconfigure tooserve um único índice vários locatários afeta Olá de relevância de resultados da pesquisa.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-249">Using hello approach described above tooconfigure a single index tooserve multiple tenants affects hello relevance of search results.</span></span> <span data-ttu-id="ffb7a-250">Pontuações de relevância da pesquisa são calculadas em um escopo de nível de índice, não é um escopo de nível de locatário, para que os dados de todos os locatários são incorporados na estatísticas subjacentes de pontuações de relevância hello, como a frequência do termo.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-250">Search relevance scores are computed at an index-level scope, not a tenant-level scope, so all tenants' data is incorporated in hello relevance scores' underlying statistics such as term frequency.</span></span>
> 
> 

## <a name="next-steps"></a><span data-ttu-id="ffb7a-251">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="ffb7a-251">Next steps</span></span>
<span data-ttu-id="ffb7a-252">Pesquisa do Azure é uma opção atraente para muitos aplicativos, [Leia mais sobre recursos avançados do serviço Olá](http://aka.ms/whatisazsearch).</span><span class="sxs-lookup"><span data-stu-id="ffb7a-252">Azure Search is a compelling choice for many applications, [read more about hello service's robust capabilities](http://aka.ms/whatisazsearch).</span></span> <span data-ttu-id="ffb7a-253">Quando avaliar Olá vários padrões para aplicativos multilocatários de design, considere Olá [várias camadas de preços](https://azure.microsoft.com/pricing/details/search/) e hello respectivo [limites de serviço](search-limits-quotas-capacity.md) toobest personalizar toofit de pesquisa do Azure arquiteturas de todos os tamanhos e cargas de trabalho do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-253">When evaluating hello various design patterns for multitenant applications, consider hello [various pricing tiers](https://azure.microsoft.com/pricing/details/search/) and hello respective [service limits](search-limits-quotas-capacity.md) toobest tailor Azure Search toofit application workloads and architectures of all sizes.</span></span>

<span data-ttu-id="ffb7a-254">Dúvidas sobre cenários de multilocatários e de pesquisa do Azure podem ser direcionadas tooazuresearch_contact@microsoft.com.</span><span class="sxs-lookup"><span data-stu-id="ffb7a-254">Any questions about Azure Search and multitenant scenarios can be directed tooazuresearch_contact@microsoft.com.</span></span>

