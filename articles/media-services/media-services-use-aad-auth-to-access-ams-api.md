---
title: "Acessar a API dos Serviços de Mídia do Azure com a autenticação do Azure Active Directory | Microsoft Docs"
description: "Saiba mais sobre os conceitos e as etapas necessárias para usar o Azure AD (Azure Active Directory) para autenticar o acesso à API dos Serviços de Mídia do Azure."
services: media-services
documentationcenter: 
author: Juliako
manager: cfowler
editor: 
ms.service: media-services
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/17/2017
ms.author: juliako
ms.openlocfilehash: 0e1217afb0a37353793c64ae927b741d9fee4954
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/29/2017
---
# <a name="access-the-azure-media-services-api-with-azure-ad-authentication"></a><span data-ttu-id="e61cf-103">Acessar a API dos Serviços de Mídia do Azure com a autenticação do Azure AD</span><span class="sxs-lookup"><span data-stu-id="e61cf-103">Access the Azure Media Services API with Azure AD authentication</span></span>
 
<span data-ttu-id="e61cf-104">A API dos Serviços de Mídia do Azure é uma API RESTful.</span><span class="sxs-lookup"><span data-stu-id="e61cf-104">The Azure Media Services API is a RESTful API.</span></span> <span data-ttu-id="e61cf-105">Você pode usá-la para executar operações em recursos de mídia usando uma API REST ou os SDKs de cliente disponíveis.</span><span class="sxs-lookup"><span data-stu-id="e61cf-105">You can use it to perform operations on media resources by using a REST API or by using available client SDKs.</span></span> <span data-ttu-id="e61cf-106">Os Serviços de Mídia do Azure oferecem um SDK de cliente dos Serviços de Mídia para o Microsoft .NET.</span><span class="sxs-lookup"><span data-stu-id="e61cf-106">Azure Media Services offers a Media Services client SDK for Microsoft .NET.</span></span> <span data-ttu-id="e61cf-107">Para estar autorizado a acessar os recursos e a API dos Serviços de Mídia, primeiro você deve ser autenticado.</span><span class="sxs-lookup"><span data-stu-id="e61cf-107">To be authorized to access Media Services resources and the Media Services API, you must first be authenticated.</span></span> 

<span data-ttu-id="e61cf-108">Os Serviços de Mídia dão suporte à [autenticação baseada no Azure AD (Azure Active Directory)](../active-directory/active-directory-whatis.md).</span><span class="sxs-lookup"><span data-stu-id="e61cf-108">Media Services supports [Azure Active Directory (Azure AD)-based authentication](../active-directory/active-directory-whatis.md).</span></span> <span data-ttu-id="e61cf-109">O serviço REST de Mídia do Azure exige que o usuário ou o aplicativo que faz as solicitações da API REST tenha a função **Colaborador** ou **Proprietário** para acessar os recursos.</span><span class="sxs-lookup"><span data-stu-id="e61cf-109">The Azure Media REST service requires that the user or application that makes the REST API requests have either the **Contributor** or **Owner** role to access the resources.</span></span> <span data-ttu-id="e61cf-110">Para obter mais informações, consulte [Introdução ao Controle de Acesso Baseado em Função no portal do Azure](../active-directory/role-based-access-control-what-is.md).</span><span class="sxs-lookup"><span data-stu-id="e61cf-110">For more information, see [Get started with Role-Based Access Control in the Azure portal](../active-directory/role-based-access-control-what-is.md).</span></span>  

> [!IMPORTANT]
> <span data-ttu-id="e61cf-111">Atualmente, os Serviços de Mídia dão suporte ao modelo de autenticação do serviço de Controle de Acesso do Azure.</span><span class="sxs-lookup"><span data-stu-id="e61cf-111">Currently, Media Services supports the Azure Access Control service authentication model.</span></span> <span data-ttu-id="e61cf-112">No entanto, a autorização de Controle de Acesso será preterida em 1º de junho de 2018.</span><span class="sxs-lookup"><span data-stu-id="e61cf-112">However, Access Control authorization will be deprecated on June 1, 2018.</span></span> <span data-ttu-id="e61cf-113">Recomendamos que você migre para o modelo de autenticação do Azure AD assim que possível.</span><span class="sxs-lookup"><span data-stu-id="e61cf-113">We recommend that you migrate to the Azure AD authentication model as soon as possible.</span></span>

<span data-ttu-id="e61cf-114">Este documento fornece uma visão geral de como acessar a API dos Serviços de Mídia usando as APIs REST ou as APIs do .NET.</span><span class="sxs-lookup"><span data-stu-id="e61cf-114">This document gives an overview of how to access the Media Services API by using REST or .NET APIs.</span></span>

## <a name="access-control"></a><span data-ttu-id="e61cf-115">Controle de acesso</span><span class="sxs-lookup"><span data-stu-id="e61cf-115">Access control</span></span>

<span data-ttu-id="e61cf-116">Para que a solicitação REST da Mídia do Azure seja bem-sucedida, o usuário chamador deve ter uma função Colaborador ou Proprietário na conta dos Serviços de Mídia que ele está tentando acessar.</span><span class="sxs-lookup"><span data-stu-id="e61cf-116">For the Azure Media REST request to succeed, the calling user must have a Contributor or Owner role for the Media Services account it is trying to access.</span></span>  
<span data-ttu-id="e61cf-117">Somente um usuário com a função Proprietário pode conceder acesso (conta) aos recursos de mídia para novos usuários ou aplicativos.</span><span class="sxs-lookup"><span data-stu-id="e61cf-117">Only a user with the Owner role can give media resource (account) access to new users or apps.</span></span> <span data-ttu-id="e61cf-118">A função Colaborador pode acessar somente o recurso de mídia.</span><span class="sxs-lookup"><span data-stu-id="e61cf-118">The Contributor role can access only the media resource.</span></span>
<span data-ttu-id="e61cf-119">Solicitações não autorizadas falham, com o código de status 401.</span><span class="sxs-lookup"><span data-stu-id="e61cf-119">Unauthorized requests fail, with status code of 401.</span></span> <span data-ttu-id="e61cf-120">Se você receber esse código de erro, verifique se o usuário tem a função Colaborador ou Proprietário atribuída à conta dos Serviços de Mídia do usuário.</span><span class="sxs-lookup"><span data-stu-id="e61cf-120">If you see this error code, check whether your user has the Contributor or Owner role assigned for the user's Media Services account.</span></span> <span data-ttu-id="e61cf-121">Verifique isso no portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="e61cf-121">You can check this in the Azure portal.</span></span> <span data-ttu-id="e61cf-122">Pesquise sua conta de mídia e, em seguida, clique na guia **Controle de acesso**.</span><span class="sxs-lookup"><span data-stu-id="e61cf-122">Search for your media account, and then click the **Access control** tab.</span></span> 

![Guia Controle de acesso](./media/media-services-use-aad-auth-to-access-ams-api/media-services-access-control.png)

## <a name="types-of-authentication"></a><span data-ttu-id="e61cf-124">Tipos de autenticação</span><span class="sxs-lookup"><span data-stu-id="e61cf-124">Types of authentication</span></span> 
 
<span data-ttu-id="e61cf-125">Ao usar a autenticação do Azure AD com os Serviços de Mídia do Azure, você tem duas opções de autenticação:</span><span class="sxs-lookup"><span data-stu-id="e61cf-125">When you use Azure AD authentication with Azure Media Services, you have two authentication options:</span></span>

- <span data-ttu-id="e61cf-126">**Autenticação de usuário**.</span><span class="sxs-lookup"><span data-stu-id="e61cf-126">**User authentication**.</span></span> <span data-ttu-id="e61cf-127">Autentica uma pessoa que está usando o aplicativo para interagir com os recursos dos Serviços de Mídia.</span><span class="sxs-lookup"><span data-stu-id="e61cf-127">Authenticate a person who is using the app to interact with Media Services resources.</span></span> <span data-ttu-id="e61cf-128">O aplicativo interativo deve primeiro solicitar ao usuário as credenciais do usuário.</span><span class="sxs-lookup"><span data-stu-id="e61cf-128">The interactive application should first prompt the user for the user's credentials.</span></span> <span data-ttu-id="e61cf-129">Um exemplo é um aplicativo de console de gerenciamento usado por usuários autorizados para monitorar trabalhos de codificação ou uma transmissão ao vivo.</span><span class="sxs-lookup"><span data-stu-id="e61cf-129">An example is a management console app used by authorized users to monitor encoding jobs or live streaming.</span></span> 
- <span data-ttu-id="e61cf-130">**Autenticação de entidade de serviço**.</span><span class="sxs-lookup"><span data-stu-id="e61cf-130">**Service principal authentication**.</span></span> <span data-ttu-id="e61cf-131">Autentica um serviço.</span><span class="sxs-lookup"><span data-stu-id="e61cf-131">Authenticate a service.</span></span> <span data-ttu-id="e61cf-132">Os aplicativos que geralmente usam esse método de autenticação são aplicativos que executam serviços daemon, serviços de camada intermediária ou trabalhos agendados.</span><span class="sxs-lookup"><span data-stu-id="e61cf-132">Applications that commonly use this authentication method are apps that run daemon services, middle-tier services, or scheduled jobs.</span></span> <span data-ttu-id="e61cf-133">Entre os exemplos estão aplicativos Web, aplicativos de funções, aplicativos lógicos, APIs e microsserviços.</span><span class="sxs-lookup"><span data-stu-id="e61cf-133">Examples are web apps, function apps, logic apps, API, and microservices.</span></span>

### <a name="user-authentication"></a><span data-ttu-id="e61cf-134">Autenticação de usuário</span><span class="sxs-lookup"><span data-stu-id="e61cf-134">User authentication</span></span> 

<span data-ttu-id="e61cf-135">Os aplicativos que devem usar o método de autenticação de usuário são aplicativos nativos de gerenciamento ou monitoramento: aplicativos móveis, aplicativos do Windows e aplicativos de Console.</span><span class="sxs-lookup"><span data-stu-id="e61cf-135">Applications that should use the user authentication method are management or monitoring native apps: mobile apps, Windows apps, and Console applications.</span></span> <span data-ttu-id="e61cf-136">Esse tipo de solução é útil quando você deseja proporcionar interação humana com o serviço em um dos seguintes cenários:</span><span class="sxs-lookup"><span data-stu-id="e61cf-136">This type of solution is useful when you want human interaction with the service in one of the following scenarios:</span></span>

- <span data-ttu-id="e61cf-137">Painel de monitoramento dos trabalhos de codificação.</span><span class="sxs-lookup"><span data-stu-id="e61cf-137">Monitoring dashboard for your encoding jobs.</span></span>
- <span data-ttu-id="e61cf-138">Painel de monitoramento dos fluxos ao vivo.</span><span class="sxs-lookup"><span data-stu-id="e61cf-138">Monitoring dashboard for your live streams.</span></span>
- <span data-ttu-id="e61cf-139">Aplicativo de gerenciamento para usuários móveis ou da área de trabalho administrarem os recursos em uma conta dos Serviços de Mídia.</span><span class="sxs-lookup"><span data-stu-id="e61cf-139">Management application for desktop or mobile users to administer resources in a Media Services account.</span></span>

> [!NOTE]
> <span data-ttu-id="e61cf-140">Esse método de autenticação não deve ser usado para aplicativos voltados para o consumidor.</span><span class="sxs-lookup"><span data-stu-id="e61cf-140">This authentication method should not be used for consumer-facing applications.</span></span> 

<span data-ttu-id="e61cf-141">Um aplicativo nativo deve primeiro adquirir um token de acesso do Azure AD e, em seguida, usá-lo ao fazer solicitações HTTP para a API REST dos Serviços de Mídia.</span><span class="sxs-lookup"><span data-stu-id="e61cf-141">A native application must first acquire an access token from Azure AD, and then use it when you make HTTP requests to the Media Services REST API.</span></span> <span data-ttu-id="e61cf-142">Adicione o token de acesso ao cabeçalho da solicitação.</span><span class="sxs-lookup"><span data-stu-id="e61cf-142">Add the access token to the request header.</span></span> 

<span data-ttu-id="e61cf-143">O seguinte diagrama mostra um fluxo típico de autenticação de aplicativo interativo:</span><span class="sxs-lookup"><span data-stu-id="e61cf-143">The following diagram shows a typical interactive application authentication flow:</span></span> 

![Diagrama de aplicativos nativos](./media/media-services-use-aad-auth-to-access-ams-api/media-services-native-aad-app1.png)

<span data-ttu-id="e61cf-145">No diagrama anterior, os números representam o fluxo das solicitações em ordem cronológica.</span><span class="sxs-lookup"><span data-stu-id="e61cf-145">In the preceding diagram, the numbers represent the flow of the requests in chronological order.</span></span>

> [!NOTE]
> <span data-ttu-id="e61cf-146">Quando você usa o método de autenticação de usuário, todos os aplicativos compartilham a mesma ID do cliente do aplicativo nativo (padrão) e o mesmo URI de redirecionamento do aplicativo nativo.</span><span class="sxs-lookup"><span data-stu-id="e61cf-146">When you use the user authentication method, all apps share the same (default) native application client ID and native application redirect URI.</span></span> 

1. <span data-ttu-id="e61cf-147">Solicite as credenciais a um usuário.</span><span class="sxs-lookup"><span data-stu-id="e61cf-147">Prompt a user for credentials.</span></span>
2. <span data-ttu-id="e61cf-148">Solicite um token de acesso do Azure AD com os seguintes parâmetros:</span><span class="sxs-lookup"><span data-stu-id="e61cf-148">Request an Azure AD access token with the following parameters:</span></span>  

    * <span data-ttu-id="e61cf-149">Ponto de extremidade do locatário do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="e61cf-149">Azure AD tenant endpoint.</span></span>

        <span data-ttu-id="e61cf-150">As informações do locatário podem ser recuperadas no portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="e61cf-150">The tenant information can be retrieved from the Azure portal.</span></span> <span data-ttu-id="e61cf-151">Coloque o cursor sobre o nome do usuário conectado no canto superior direito.</span><span class="sxs-lookup"><span data-stu-id="e61cf-151">Place your cursor over the name of the signed-in user in the top right corner.</span></span>
    * <span data-ttu-id="e61cf-152">URI de recurso dos Serviços de Mídia.</span><span class="sxs-lookup"><span data-stu-id="e61cf-152">Media Services resource URI.</span></span> 

        <span data-ttu-id="e61cf-153">Esse URI é o mesmo das contas dos Serviços de Mídia que estão no mesmo ambiente do Azure (por exemplo, https://rest.media.azure.net).</span><span class="sxs-lookup"><span data-stu-id="e61cf-153">This URI is the same for Media Services accounts that are in the same Azure environment (for example, https://rest.media.azure.net).</span></span>

    * <span data-ttu-id="e61cf-154">ID do cliente do aplicativo (nativo) dos Serviços de Mídia.</span><span class="sxs-lookup"><span data-stu-id="e61cf-154">Media Services (native) application client ID.</span></span>
    * <span data-ttu-id="e61cf-155">URI de redirecionamento do aplicativo (nativo) dos Serviços de Mídia.</span><span class="sxs-lookup"><span data-stu-id="e61cf-155">Media Services (native) application redirect URI.</span></span>
    * <span data-ttu-id="e61cf-156">URI de recurso dos Serviços de Mídia REST.</span><span class="sxs-lookup"><span data-stu-id="e61cf-156">Resource URI for REST Media Services.</span></span>
        
        <span data-ttu-id="e61cf-157">O URI representa o ponto de extremidade de API REST (por exemplo, https://test03.restv2.westus.media.azure.net/api/).</span><span class="sxs-lookup"><span data-stu-id="e61cf-157">The URI represents the REST API endpoint (for example, https://test03.restv2.westus.media.azure.net/api/).</span></span>

    <span data-ttu-id="e61cf-158">Para obter valores para esses parâmetros, consulte [Usar o portal do Azure para acessar as configurações de autenticação do Azure AD](media-services-portal-get-started-with-aad.md) usando a opção de autenticação de usuário.</span><span class="sxs-lookup"><span data-stu-id="e61cf-158">To get values for these parameters, see [Use the Azure portal to access Azure AD authentication settings](media-services-portal-get-started-with-aad.md) using the user authentication option.</span></span>

3. <span data-ttu-id="e61cf-159">O token de acesso do Azure AD é enviado ao cliente.</span><span class="sxs-lookup"><span data-stu-id="e61cf-159">The Azure AD access token is sent to the client.</span></span>
4. <span data-ttu-id="e61cf-160">O cliente envia uma solicitação para a API REST da Mídia do Azure com o token de acesso do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="e61cf-160">The client sends a request to the Azure Media REST API with the Azure AD access token.</span></span>
5. <span data-ttu-id="e61cf-161">O cliente recebe novamente os dados dos Serviços de Mídia.</span><span class="sxs-lookup"><span data-stu-id="e61cf-161">The client gets back the data from Media Services.</span></span>

<span data-ttu-id="e61cf-162">Para obter informações sobre como usar a autenticação do Azure AD para se comunicar com solicitações REST usando o SDK de cliente do .NET dos Serviços de Mídia, consulte [Usar a autenticação do Azure AD para acessar a API dos Serviços de Mídia com o .NET](media-services-dotnet-get-started-with-aad.md).</span><span class="sxs-lookup"><span data-stu-id="e61cf-162">For information about how to use Azure AD authentication to communicate with REST requests by using the Media Services .NET client SDK, see [Use Azure AD authentication to access the Media Services API with .NET](media-services-dotnet-get-started-with-aad.md).</span></span> 

<span data-ttu-id="e61cf-163">Se você não estiver usando o SDK de cliente do .NET dos Serviços de Mídia, deverá criar manualmente uma solicitação de token de acesso do Azure AD usando os parâmetros descritos na etapa 2.</span><span class="sxs-lookup"><span data-stu-id="e61cf-163">If you are not using the Media Services .NET client SDK, you must manually create an Azure AD access token request by using the parameters described in step 2.</span></span> <span data-ttu-id="e61cf-164">Para obter mais informações, consulte [Como usar a Biblioteca de Autenticação do Azure AD para obter o token do Azure AD](../active-directory/develop/active-directory-authentication-libraries.md).</span><span class="sxs-lookup"><span data-stu-id="e61cf-164">For more information, see [How to use the Azure AD Authentication Library to get the Azure AD token](../active-directory/develop/active-directory-authentication-libraries.md).</span></span>

### <a name="service-principal-authentication"></a><span data-ttu-id="e61cf-165">Autenticação de entidade de serviço</span><span class="sxs-lookup"><span data-stu-id="e61cf-165">Service principal authentication</span></span>

<span data-ttu-id="e61cf-166">Os aplicativos que geralmente usam esse método de autenticação são aplicativos que executam serviços de camada intermediária e trabalhos agendados: aplicativos Web, aplicativos de funções, aplicativos lógicos, APIs e microsserviços.</span><span class="sxs-lookup"><span data-stu-id="e61cf-166">Applications that commonly use this authentication method are apps that run middle-tier services and scheduled jobs: web apps, function apps, logic apps, APIs, and microservices.</span></span> <span data-ttu-id="e61cf-167">Esse método de autenticação também é adequado para aplicativos interativos nos quais você talvez deseje usar uma conta de serviço para gerenciar os recursos.</span><span class="sxs-lookup"><span data-stu-id="e61cf-167">This authentication method also is suitable for interactive applications in which you might want to use a service account to manage resources.</span></span>

<span data-ttu-id="e61cf-168">Quando você usa o método de autenticação de entidade de serviço para criar cenários de consumidor, a autenticação normalmente é manipulada na camada intermediária (por meio de alguma API) e não diretamente em um aplicativo móvel ou da área de trabalho.</span><span class="sxs-lookup"><span data-stu-id="e61cf-168">When you use the service principal authentication method to build consumer scenarios, authentication typically is handled in the middle tier (through some API) and not directly in a mobile or desktop application.</span></span> 

<span data-ttu-id="e61cf-169">Para usar esse método, crie um aplicativo e uma entidade de serviço do Azure AD em seu próprio locatário.</span><span class="sxs-lookup"><span data-stu-id="e61cf-169">To use this method, create an Azure AD application and service principal in its own tenant.</span></span> <span data-ttu-id="e61cf-170">Depois de criar o aplicativo, conceda o acesso da função de Colaborador ou Proprietário ao aplicativo à conta dos Serviços de Mídia.</span><span class="sxs-lookup"><span data-stu-id="e61cf-170">After you create the application, give the app Contributor or Owner role access to the Media Services account.</span></span> <span data-ttu-id="e61cf-171">Faça isso no portal do Azure, usando a CLI do Azure ou com um script do PowerShell.</span><span class="sxs-lookup"><span data-stu-id="e61cf-171">You can do this in the Azure portal, by using Azure CLI, or with a PowerShell script.</span></span> <span data-ttu-id="e61cf-172">Use também um aplicativo existente do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="e61cf-172">You also can use an existing Azure AD application.</span></span> <span data-ttu-id="e61cf-173">Registre e gerencie o aplicativo e a entidade de serviço do Azure AD [no portal do Azure](media-services-portal-get-started-with-aad.md).</span><span class="sxs-lookup"><span data-stu-id="e61cf-173">You can register and manage your Azure AD app and service principal [in the Azure portal](media-services-portal-get-started-with-aad.md).</span></span> <span data-ttu-id="e61cf-174">Também faça isso usando a [CLI 2.0 do Azure](media-services-use-aad-auth-to-access-ams-api.md) ou o [PowerShell](media-services-powershell-create-and-configure-aad-app.md).</span><span class="sxs-lookup"><span data-stu-id="e61cf-174">You also can do this by using [Azure CLI 2.0](media-services-use-aad-auth-to-access-ams-api.md) or [PowerShell](media-services-powershell-create-and-configure-aad-app.md).</span></span> 

![Aplicativos de camada intermediária](./media/media-services-use-aad-auth-to-access-ams-api/media-services-principal-service-aad-app1.png)

<span data-ttu-id="e61cf-176">Depois de criar o aplicativo do Azure AD, você obtém valores para as configurações a seguir.</span><span class="sxs-lookup"><span data-stu-id="e61cf-176">After you create your Azure AD application, you get values for the following settings.</span></span> <span data-ttu-id="e61cf-177">Você precisa destes valores para autenticação:</span><span class="sxs-lookup"><span data-stu-id="e61cf-177">You need these values for authentication:</span></span>

- <span data-ttu-id="e61cf-178">ID do cliente</span><span class="sxs-lookup"><span data-stu-id="e61cf-178">Client ID</span></span> 
- <span data-ttu-id="e61cf-179">Segredo do cliente</span><span class="sxs-lookup"><span data-stu-id="e61cf-179">Client secret</span></span> 

<span data-ttu-id="e61cf-180">Na figura anterior, os números representam o fluxo das solicitações em ordem cronológica:</span><span class="sxs-lookup"><span data-stu-id="e61cf-180">In the preceding figure, the numbers represent the flow of the requests in chronological order:</span></span>
    
1. <span data-ttu-id="e61cf-181">Um aplicativo de camada intermediária (API Web ou aplicativo Web) solicita um token de acesso do Azure AD que tem os seguintes parâmetros:</span><span class="sxs-lookup"><span data-stu-id="e61cf-181">A middle-tier app (web API or web application) requests an Azure AD access token that has the following parameters:</span></span>  

    * <span data-ttu-id="e61cf-182">Ponto de extremidade do locatário do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="e61cf-182">Azure AD tenant endpoint.</span></span>

        <span data-ttu-id="e61cf-183">As informações do locatário podem ser recuperadas no portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="e61cf-183">The tenant information can be retrieved from the Azure portal.</span></span> <span data-ttu-id="e61cf-184">Coloque o cursor sobre o nome do usuário conectado no canto superior direito.</span><span class="sxs-lookup"><span data-stu-id="e61cf-184">Place your cursor over the name of the signed-in user in the top right corner.</span></span>
    * <span data-ttu-id="e61cf-185">URI de recurso dos Serviços de Mídia.</span><span class="sxs-lookup"><span data-stu-id="e61cf-185">Media Services resource URI.</span></span> 

        <span data-ttu-id="e61cf-186">Esse URI é o mesmo das contas dos Serviços de Mídia que estão localizadas no mesmo ambiente do Azure (por exemplo, https://rest.media.azure.net).</span><span class="sxs-lookup"><span data-stu-id="e61cf-186">This URI is the same for Media Services accounts that are located in the same Azure environment (for example, https://rest.media.azure.net).</span></span>

    * <span data-ttu-id="e61cf-187">URI de recurso dos Serviços de Mídia REST.</span><span class="sxs-lookup"><span data-stu-id="e61cf-187">Resource URI for REST Media Services.</span></span>

        <span data-ttu-id="e61cf-188">O URI representa o ponto de extremidade de API REST (por exemplo, https://test03.restv2.westus.media.azure.net/api/).</span><span class="sxs-lookup"><span data-stu-id="e61cf-188">The URI represents the REST API endpoint (for example, https://test03.restv2.westus.media.azure.net/api/).</span></span>

    * <span data-ttu-id="e61cf-189">Valores do aplicativo do Azure AD: a ID do cliente e o segredo do cliente.</span><span class="sxs-lookup"><span data-stu-id="e61cf-189">Azure AD application values: the client ID and client secret.</span></span>
    
    <span data-ttu-id="e61cf-190">Para obter valores para esses parâmetros, consulte [Usar o portal do Azure para acessar as configurações de autenticação do Azure AD](media-services-portal-get-started-with-aad.md) usando a opção de autenticação de entidade de serviço.</span><span class="sxs-lookup"><span data-stu-id="e61cf-190">To get values for these parameters, see [Use the Azure portal to access Azure AD authentication settings](media-services-portal-get-started-with-aad.md) by using the service principal authentication option.</span></span>

2. <span data-ttu-id="e61cf-191">O token de acesso do Azure AD é enviado à camada intermediária.</span><span class="sxs-lookup"><span data-stu-id="e61cf-191">The Azure AD access token is sent to the middle tier.</span></span>
4. <span data-ttu-id="e61cf-192">A camada intermediária envia a solicitação à API REST da Mídia do Azure com o token do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="e61cf-192">The middle tier sends request to the Azure Media REST API with the Azure AD token.</span></span>
5. <span data-ttu-id="e61cf-193">A camada intermediária obtém novamente os dados dos Serviços de Mídia.</span><span class="sxs-lookup"><span data-stu-id="e61cf-193">The middle tier gets back the data from Media Services.</span></span>

<span data-ttu-id="e61cf-194">Para obter mais informações sobre como usar a autenticação do Azure AD para se comunicar com solicitações REST usando o SDK de cliente do .NET dos Serviços de Mídia, consulte [Usar a autenticação do Azure AD para acessar a API dos Serviços de Mídia do Azure com o .NET](media-services-dotnet-get-started-with-aad.md).</span><span class="sxs-lookup"><span data-stu-id="e61cf-194">For more information about how to use Azure AD authentication to communicate with REST requests by using the Media Services .NET client SDK, see [Use Azure AD authentication to access Azure Media Services API with .NET](media-services-dotnet-get-started-with-aad.md).</span></span> 

<span data-ttu-id="e61cf-195">Se você não estiver usando o SDK de cliente do .NET dos Serviços de Mídia, deverá criar manualmente uma solicitação de token do Azure AD usando os parâmetros descritos na etapa 1.</span><span class="sxs-lookup"><span data-stu-id="e61cf-195">If you are not using the Media Services .NET client SDK, you must manually create an Azure AD token request by using parameters described in step 1.</span></span> <span data-ttu-id="e61cf-196">Para obter mais informações, consulte [Como usar a Biblioteca de Autenticação do Azure AD para obter o token do Azure AD](../active-directory/develop/active-directory-authentication-libraries.md).</span><span class="sxs-lookup"><span data-stu-id="e61cf-196">For more information, see [How to use the Azure AD Authentication Library to get the Azure AD token](../active-directory/develop/active-directory-authentication-libraries.md).</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="e61cf-197">Solucionar problemas</span><span class="sxs-lookup"><span data-stu-id="e61cf-197">Troubleshooting</span></span>

<span data-ttu-id="e61cf-198">Exceção: “O servidor remoto retornou um erro: (401) Não autorizado”.</span><span class="sxs-lookup"><span data-stu-id="e61cf-198">Exception: "The remote server returned an error: (401) Unauthorized."</span></span>

<span data-ttu-id="e61cf-199">Solução: para que a solicitação REST dos Serviços de Mídia seja bem-sucedida, o usuário chamador deve ter uma função Colaborador ou Proprietário na conta dos Serviços de Mídia que ele está tentando acessar.</span><span class="sxs-lookup"><span data-stu-id="e61cf-199">Solution: For the Media Services REST request to succeed, the calling user must be a Contributor or Owner role in the Media Services account it is trying to access.</span></span> <span data-ttu-id="e61cf-200">Para obter mais informações, consulte a seção [Controle de acesso](media-services-use-aad-auth-to-access-ams-api.md#access-control).</span><span class="sxs-lookup"><span data-stu-id="e61cf-200">For more information, see the [Access control](media-services-use-aad-auth-to-access-ams-api.md#access-control) section.</span></span>

## <a name="resources"></a><span data-ttu-id="e61cf-201">Recursos</span><span class="sxs-lookup"><span data-stu-id="e61cf-201">Resources</span></span>

<span data-ttu-id="e61cf-202">Os seguintes artigos são visões gerais dos conceitos de autenticação do Azure AD:</span><span class="sxs-lookup"><span data-stu-id="e61cf-202">The following articles are overviews of Azure AD authentication concepts:</span></span> 

- [<span data-ttu-id="e61cf-203">Cenários de autenticação abordados pelo Azure AD</span><span class="sxs-lookup"><span data-stu-id="e61cf-203">Authentication scenarios addressed by Azure AD</span></span>](../active-directory/develop/active-directory-authentication-scenarios.md#basics-of-authentication-in-azure-ad)
- [<span data-ttu-id="e61cf-204">Adicionar, atualizar ou remover um aplicativo no Azure AD</span><span class="sxs-lookup"><span data-stu-id="e61cf-204">Add, update, or remove an application in Azure AD</span></span>](../active-directory/develop/active-directory-integrating-applications.md)
- [<span data-ttu-id="e61cf-205">Configurar e gerenciar o Controle de Acesso Baseado em Função usando o PowerShell</span><span class="sxs-lookup"><span data-stu-id="e61cf-205">Configure and manage Role-Based Access Control by using PowerShell</span></span>](../active-directory/role-based-access-control-manage-access-powershell.md)

## <a name="next-steps"></a><span data-ttu-id="e61cf-206">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="e61cf-206">Next steps</span></span>

* <span data-ttu-id="e61cf-207">Use o portal do Azure para [Acessar a autenticação do Azure AD para consumir a API dos Serviços de Mídia do Azure](media-services-portal-get-started-with-aad.md).</span><span class="sxs-lookup"><span data-stu-id="e61cf-207">Use the Azure portal to [access Azure AD authentication to consume Azure Media Services API](media-services-portal-get-started-with-aad.md).</span></span>
* <span data-ttu-id="e61cf-208">Use a autenticação do Azure AD para [acessar a API dos Serviços de Mídia do Azure com o .NET](media-services-dotnet-get-started-with-aad.md).</span><span class="sxs-lookup"><span data-stu-id="e61cf-208">Use Azure AD authentication to [access Azure Media Services API with .NET](media-services-dotnet-get-started-with-aad.md).</span></span>

