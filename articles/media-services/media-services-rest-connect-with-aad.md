---
title: "aaaUse tooaccess de autenticação do AD do Azure API de serviços de mídia do Azure com REST | Microsoft Docs"
description: "Saiba como tooaccess API de serviços de mídia do Azure com a autenticação do Active Directory do Azure usando REST."
services: media-services
documentationcenter: 
author: willzhan
manager: cfowler
editor: 
ms.service: media-services
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/17/2017
ms.author: willzhan;juliako
ms.openlocfilehash: 114f7bdde3a8f5fe6189d712e05b6afdc8a8787a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="use-azure-ad-authentication-tooaccess-hello-azure-media-services-api-with-rest"></a><span data-ttu-id="63748-103">Uso do Azure AD authentication tooaccess Olá API de serviços de mídia do Azure com REST</span><span class="sxs-lookup"><span data-stu-id="63748-103">Use Azure AD authentication tooaccess hello Azure Media Services API with REST</span></span>

<span data-ttu-id="63748-104">equipe de serviços de mídia do Azure Olá lançou o suporte da autenticação do Azure Active Directory (AD do Azure) para acessar os serviços de mídia do Azure.</span><span class="sxs-lookup"><span data-stu-id="63748-104">hello Azure Media Services team has released Azure Active Directory (Azure AD) authentication support for Azure Media Services access.</span></span> <span data-ttu-id="63748-105">Ele também anunciou a autenticação do serviço de controle de acesso do Azure planos toodeprecate para acesso de serviços de mídia.</span><span class="sxs-lookup"><span data-stu-id="63748-105">It also announced plans toodeprecate Azure Access Control service authentication for Media Services access.</span></span> <span data-ttu-id="63748-106">Como cada assinatura do Azure e todas as contas de serviços de mídia, locatário anexado tooan AD do Azure, o suporte de autenticação do AD do Azure traz muitos benefícios de segurança.</span><span class="sxs-lookup"><span data-stu-id="63748-106">Because every Azure subscription, and every Media Services account, is attached tooan Azure AD tenant, Azure AD authentication support brings many security benefits.</span></span> <span data-ttu-id="63748-107">Para obter detalhes sobre essa alteração e a migração (se você usar o SDK do Media Services .NET de saudação para seu aplicativo), consulte o seguinte Olá postagens de blog e artigos:</span><span class="sxs-lookup"><span data-stu-id="63748-107">For details about this change and migration (if you use hello Media Services .NET SDK for your app), see hello following blog posts and articles:</span></span>

- [<span data-ttu-id="63748-108">Os Serviços de Mídia do Azure anuncia suporte para o Azure AD e substituição da autenticação de Controle de Acesso</span><span class="sxs-lookup"><span data-stu-id="63748-108">Azure Media Services announces support for Azure AD and deprecation of Access Control authentication</span></span>](https://azure.microsoft.com/blog/azure%20media%20service%20aad%20auth%20and%20acs%20deprecation)
- [<span data-ttu-id="63748-109">Acessar a API dos Serviços de Mídia do Azure utilizando a autenticação do Azure AD</span><span class="sxs-lookup"><span data-stu-id="63748-109">Access Azure Media Services API by using Azure AD authentication</span></span>](media-services-use-aad-auth-to-access-ams-api.md)
- [<span data-ttu-id="63748-110">Usar tooaccess de autenticação do AD do Azure API de serviços de mídia do Azure usando o Microsoft .NET</span><span class="sxs-lookup"><span data-stu-id="63748-110">Use Azure AD authentication tooaccess Azure Media Services API by using Microsoft .NET</span></span>](media-services-dotnet-get-started-with-aad.md)
- [<span data-ttu-id="63748-111">Guia de Introdução com a autenticação do AD do Azure usando Olá portal do Azure</span><span class="sxs-lookup"><span data-stu-id="63748-111">Getting started with Azure AD authentication by using hello Azure portal</span></span>](media-services-portal-get-started-with-aad.md)

<span data-ttu-id="63748-112">Alguns clientes precisam toodevelop suas soluções de serviços de mídia em Olá restrições a seguir:</span><span class="sxs-lookup"><span data-stu-id="63748-112">Some customers need toodevelop their Media Services solutions under hello following constraints:</span></span>

*   <span data-ttu-id="63748-113">Eles usam uma linguagem de programação que não seja Microsoft .NET ou c#, ou ambiente de tempo de execução de saudação não é Windows.</span><span class="sxs-lookup"><span data-stu-id="63748-113">They use a programming language that is not Microsoft .NET or C#, or hello runtime environment is not Windows.</span></span>
*   <span data-ttu-id="63748-114">Bibliotecas do AD do Azure, como bibliotecas de autenticação do Active Directory não estão disponíveis para a linguagem de programação de saudação ou não podem ser usadas para o seu ambiente de tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="63748-114">Azure AD libraries such as Active Directory Authentication Libraries are not available for hello programming language or can't be used for their runtime environment.</span></span>

<span data-ttu-id="63748-115">Alguns clientes desenvolveram aplicativos utilizando API REST tanto para autenticação de Controle de Acesso quanto para acesso aos Serviços de Mídia do Azure.</span><span class="sxs-lookup"><span data-stu-id="63748-115">Some customers have developed applications by using REST API for both Access Control authentication and Azure Media Services access.</span></span> <span data-ttu-id="63748-116">Para esses clientes, você precisará Olá somente uma maneira toouse API REST para autenticação do AD do Azure e acessar os serviços de mídia do Azure subsequentes.</span><span class="sxs-lookup"><span data-stu-id="63748-116">For these customers, you need a way toouse only hello REST API for Azure AD authentication and subsequent Azure Media Services access.</span></span> <span data-ttu-id="63748-117">Você precisa toonot confiar em qualquer uma das bibliotecas de saudação do AD do Azure ou em Olá SDK do Media Services .NET.</span><span class="sxs-lookup"><span data-stu-id="63748-117">You need toonot rely on any of hello Azure AD libraries or on hello Media Services .NET SDK.</span></span> <span data-ttu-id="63748-118">Este artigo descreve uma solução e fornece o código de exemplo para esse cenário.</span><span class="sxs-lookup"><span data-stu-id="63748-118">In this article, we describe a solution and provide sample code for this scenario.</span></span> <span data-ttu-id="63748-119">Como o código de saudação é todas as chamadas da API REST, sem dependência no nenhum AD do Azure ou biblioteca de serviços de mídia do Azure, o código de saudação pode facilmente ser traduzido tooany outra linguagem de programação.</span><span class="sxs-lookup"><span data-stu-id="63748-119">Because hello code is all REST API calls, with no dependency on any Azure AD or Azure Media Services library, hello code can easily be translated tooany other programming language.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="63748-120">Atualmente, os serviços de mídia oferece suporte a modelo de autenticação de serviços de controle de acesso do Azure hello.</span><span class="sxs-lookup"><span data-stu-id="63748-120">Currently, Media Services supports hello Azure Access Control services authentication model.</span></span> <span data-ttu-id="63748-121">No entanto, a autenticação de Controle de Acesso será preterida em 1º de junho de 2018.</span><span class="sxs-lookup"><span data-stu-id="63748-121">However, Access Control authentication will be deprecated June 1, 2018.</span></span> <span data-ttu-id="63748-122">É recomendável que você migre o modelo de autenticação toohello AD do Azure assim que possível.</span><span class="sxs-lookup"><span data-stu-id="63748-122">We recommend that you migrate toohello Azure AD authentication model as soon as possible.</span></span>


## <a name="design"></a><span data-ttu-id="63748-123">Design</span><span class="sxs-lookup"><span data-stu-id="63748-123">Design</span></span>

<span data-ttu-id="63748-124">Neste artigo, usamos Olá autenticação e autorização de design a seguir:</span><span class="sxs-lookup"><span data-stu-id="63748-124">In this article, we use hello following authentication and authorization design:</span></span>

*  <span data-ttu-id="63748-125">Protocolo de autorização: OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="63748-125">Authorization protocol: OAuth 2.0.</span></span> <span data-ttu-id="63748-126">OAuth 2.0 é um padrão de segurança na Web que abrange a autenticação e autorização.</span><span class="sxs-lookup"><span data-stu-id="63748-126">OAuth 2.0 is a web security standard that covers both authentication and authorization.</span></span> <span data-ttu-id="63748-127">Há suporte pela Microsoft, Google, Facebook e PayPal.</span><span class="sxs-lookup"><span data-stu-id="63748-127">It is supported by Google, Microsoft, Facebook, and PayPal.</span></span> <span data-ttu-id="63748-128">Ele foi ratificado em outubro de 2012.</span><span class="sxs-lookup"><span data-stu-id="63748-128">It was ratified October 2012.</span></span> <span data-ttu-id="63748-129">A Microsoft suporta firmemente OAuth 2.0 e OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="63748-129">Microsoft firmly supports OAuth 2.0 and OpenID Connect.</span></span> <span data-ttu-id="63748-130">Ambos os padrões são suportados em vários serviços e bibliotecas de clientes, incluindo Azure Active Directory, Open Web Interface para Katana .NET (OWIN) e bibliotecas do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="63748-130">Both of these standards are supported in multiple services and client libraries, including Azure Active Directory, Open Web Interface for .NET (OWIN) Katana, and Azure AD libraries.</span></span>
*  <span data-ttu-id="63748-131">Tipo de concessão: tipo de concessão de credenciais do cliente.</span><span class="sxs-lookup"><span data-stu-id="63748-131">Grant type: Client credentials grant type.</span></span> <span data-ttu-id="63748-132">As credenciais do cliente é um dos tipos de concessão de quatro Olá no OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="63748-132">Client credentials is one of hello four grant types in OAuth 2.0.</span></span> <span data-ttu-id="63748-133">Muitas vezes é utilizado para acessar API do Microsoft Azure AD Graph.</span><span class="sxs-lookup"><span data-stu-id="63748-133">It's often used for Azure AD Microsoft Graph API access.</span></span>
*  <span data-ttu-id="63748-134">Modo de autenticação: entidade de serviço.</span><span class="sxs-lookup"><span data-stu-id="63748-134">Authentication mode: Service principal.</span></span> <span data-ttu-id="63748-135">Olá outro modo de autenticação é usuário ou autenticação interativa.</span><span class="sxs-lookup"><span data-stu-id="63748-135">hello other authentication mode is user or interactive authentication.</span></span>

<span data-ttu-id="63748-136">Um total de quatro aplicativos ou serviços estão envolvidos no fluxo de autenticação e autorização de saudação do AD do Azure para usar os serviços de mídia.</span><span class="sxs-lookup"><span data-stu-id="63748-136">A total of four applications or services are involved in hello Azure AD authentication and authorization flow for using Media Services.</span></span> <span data-ttu-id="63748-137">Olá aplicativos e serviços e fluxo de hello, são descritos na Olá a tabela a seguir:</span><span class="sxs-lookup"><span data-stu-id="63748-137">hello applications and services, and hello flow, are described in hello following table:</span></span>

|<span data-ttu-id="63748-138">Tipo de aplicativo</span><span class="sxs-lookup"><span data-stu-id="63748-138">Application type</span></span> |<span data-ttu-id="63748-139">Aplicativo</span><span class="sxs-lookup"><span data-stu-id="63748-139">Application</span></span> |<span data-ttu-id="63748-140">Flow</span><span class="sxs-lookup"><span data-stu-id="63748-140">Flow</span></span>|
|---|---|---|
|<span data-ttu-id="63748-141">Cliente</span><span class="sxs-lookup"><span data-stu-id="63748-141">Client</span></span> | <span data-ttu-id="63748-142">Aplicativo ou solução de cliente</span><span class="sxs-lookup"><span data-stu-id="63748-142">Customer app or solution</span></span> | <span data-ttu-id="63748-143">Este aplicativo (na verdade, seu proxy) é registrado no locatário do AD do Azure Olá em qual mídia do Azure de assinatura e Olá Olá residem conta de serviço.</span><span class="sxs-lookup"><span data-stu-id="63748-143">This app (actually, its proxy) is registered in hello Azure AD tenant in which hello Azure subscription and hello media service account reside.</span></span> <span data-ttu-id="63748-144">Hello entidade de serviço de aplicativo hello registrado é, em seguida, concedida com a função de proprietário ou colaborador em hello controle de acesso (IAM) da conta de serviço de mídia hello.</span><span class="sxs-lookup"><span data-stu-id="63748-144">hello service principal of hello registered app is then granted with Owner or Contributor role in hello Access Control (IAM) of hello media service account.</span></span> <span data-ttu-id="63748-145">entidade de serviço Olá é representada por Olá aplicativo cliente e ID de segredo do cliente.</span><span class="sxs-lookup"><span data-stu-id="63748-145">hello service principal is represented by hello app client ID and client secret.</span></span> |
|<span data-ttu-id="63748-146">IDP (Provedor de identidade)</span><span class="sxs-lookup"><span data-stu-id="63748-146">Identity Provider (IDP)</span></span> | <span data-ttu-id="63748-147">Azure AD como IDP</span><span class="sxs-lookup"><span data-stu-id="63748-147">Azure AD as IDP</span></span> | <span data-ttu-id="63748-148">entidade de serviço de aplicativo registrado Hello (ID do cliente e o segredo do cliente) é autenticada pelo Azure AD como Olá IDP.</span><span class="sxs-lookup"><span data-stu-id="63748-148">hello registered app service principal (client ID and client secret) is authenticated by Azure AD as hello IDP.</span></span> <span data-ttu-id="63748-149">Essa autenticação é executada internamente e implicitamente.</span><span class="sxs-lookup"><span data-stu-id="63748-149">This authentication is performed internally and implicitly.</span></span> <span data-ttu-id="63748-150">Como o fluxo de credenciais do cliente, o cliente de Olá é autenticado em vez de usuário de saudação.</span><span class="sxs-lookup"><span data-stu-id="63748-150">As in client credentials flow, hello client is authenticated instead of hello user.</span></span> |
|<span data-ttu-id="63748-151">STS (Serviço de Token de Segurança)/servidor OAuth</span><span class="sxs-lookup"><span data-stu-id="63748-151">Secure Token Service (STS)/OAuth server</span></span> | <span data-ttu-id="63748-152">Azure AD como STS</span><span class="sxs-lookup"><span data-stu-id="63748-152">Azure AD as STS</span></span> | <span data-ttu-id="63748-153">Após a autenticação por Olá IDP (ou servidor OAuth em termos do OAuth 2.0), um token de acesso ou JSON Web Token (JWT) é emitido pelo AD do Azure como servidor de STS/OAuth para o recurso de camada intermediária do acesso toohello: em nosso caso, Olá ponto de extremidade de API de REST de serviços de mídia.</span><span class="sxs-lookup"><span data-stu-id="63748-153">After authentication by hello IDP (or OAuth Server in OAuth 2.0 terms), an access token or JSON Web Token (JWT) is issued by Azure AD as STS/OAuth Server for access toohello middle-tier resource: in our case, hello Media Services REST API endpoint.</span></span> |
|<span data-ttu-id="63748-154">Recurso</span><span class="sxs-lookup"><span data-stu-id="63748-154">Resource</span></span> | <span data-ttu-id="63748-155">API REST dos Serviços de Mídia</span><span class="sxs-lookup"><span data-stu-id="63748-155">Media Services REST API</span></span> | <span data-ttu-id="63748-156">Todas as chamadas de API de REST de serviços de mídia é autorizada por um token de acesso que é emitido pelo AD do Azure como STS ou Olá OAuth.</span><span class="sxs-lookup"><span data-stu-id="63748-156">Every Media Services REST API call is authorized by an access token that is issued by Azure AD as STS or hello OAuth server.</span></span> |

<span data-ttu-id="63748-157">Se você executar o código de exemplo hello e captura um JWT ou um token de acesso, Olá JWT tem Olá seguintes atributos:</span><span class="sxs-lookup"><span data-stu-id="63748-157">If you run hello sample code and capture a JWT or an access token, hello JWT has hello following attributes:</span></span>

    aud: "https://rest.media.azure.net",

    iss: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/",

    iat: 1497146280,

    nbf: 1497146280,
    exp: 1497150180,

    aio: "Y2ZgYDjuy7SptPzO/muf+uRu1B+ZDQA=",

    appid: "02ed1e8e-af8b-477e-af3d-7e7219a99ac6",

    appidacr: "1",

    idp: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/",

    oid: "a938cfcc-d3de-479c-b0dd-d4ffe6f50f7c",

    sub: "a938cfcc-d3de-479c-b0dd-d4ffe6f50f7c",

    tid: "72f988bf-86f1-41af-91ab-2d7cd011db47",

<span data-ttu-id="63748-158">Aqui estão os mapeamentos de saudação entre atributos Olá Olá JWT e hello quatro aplicativos ou serviços na saudação anterior da tabela:</span><span class="sxs-lookup"><span data-stu-id="63748-158">Here are hello mappings between hello attributes in hello JWT and hello four applications or services in hello preceding table:</span></span>

|<span data-ttu-id="63748-159">Tipo de aplicativo</span><span class="sxs-lookup"><span data-stu-id="63748-159">Application type</span></span> |<span data-ttu-id="63748-160">Aplicativo</span><span class="sxs-lookup"><span data-stu-id="63748-160">Application</span></span> |<span data-ttu-id="63748-161">Atributo JWT</span><span class="sxs-lookup"><span data-stu-id="63748-161">JWT attribute</span></span> |
|---|---|---|
|<span data-ttu-id="63748-162">Cliente</span><span class="sxs-lookup"><span data-stu-id="63748-162">Client</span></span> |<span data-ttu-id="63748-163">Aplicativo ou solução de cliente</span><span class="sxs-lookup"><span data-stu-id="63748-163">Customer app or solution</span></span> |<span data-ttu-id="63748-164">appid: "02ed1e8e-af8b-477e-af3d-7e7219a99ac6".</span><span class="sxs-lookup"><span data-stu-id="63748-164">appid: "02ed1e8e-af8b-477e-af3d-7e7219a99ac6".</span></span> <span data-ttu-id="63748-165">ID de saudação do cliente de um aplicativo, você registrará o tooAzure AD na próxima seção, Olá.</span><span class="sxs-lookup"><span data-stu-id="63748-165">hello client ID of an application you will register tooAzure AD in hello next section.</span></span> |
|<span data-ttu-id="63748-166">IDP (Provedor de identidade)</span><span class="sxs-lookup"><span data-stu-id="63748-166">Identity Provider (IDP)</span></span> | <span data-ttu-id="63748-167">Azure AD como IDP</span><span class="sxs-lookup"><span data-stu-id="63748-167">Azure AD as IDP</span></span> |<span data-ttu-id="63748-168">idp: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span><span class="sxs-lookup"><span data-stu-id="63748-168">idp: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span></span>  <span data-ttu-id="63748-169">Olá GUID é o locatário da ID da Microsoft hello (microsoft.onmicrosoft.com).</span><span class="sxs-lookup"><span data-stu-id="63748-169">hello GUID is hello ID of Microsoft tenant (microsoft.onmicrosoft.com).</span></span> <span data-ttu-id="63748-170">Cada locatário tem sua própria ID exclusiva.</span><span class="sxs-lookup"><span data-stu-id="63748-170">Each tenant has its own, unique ID.</span></span> |
|<span data-ttu-id="63748-171">STS (Serviço de Token de Segurança)/servidor OAuth</span><span class="sxs-lookup"><span data-stu-id="63748-171">Secure Token Service (STS)/OAuth server</span></span> |<span data-ttu-id="63748-172">Azure AD como STS</span><span class="sxs-lookup"><span data-stu-id="63748-172">Azure AD as STS</span></span> | <span data-ttu-id="63748-173">iss: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span><span class="sxs-lookup"><span data-stu-id="63748-173">iss: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span></span> <span data-ttu-id="63748-174">Olá GUID é o locatário da ID da Microsoft hello (microsoft.onmicrosoft.com).</span><span class="sxs-lookup"><span data-stu-id="63748-174">hello GUID is hello ID of Microsoft tenant (microsoft.onmicrosoft.com).</span></span> |
|<span data-ttu-id="63748-175">Recurso</span><span class="sxs-lookup"><span data-stu-id="63748-175">Resource</span></span> | <span data-ttu-id="63748-176">API REST dos Serviços de Mídia</span><span class="sxs-lookup"><span data-stu-id="63748-176">Media Services REST API</span></span> |<span data-ttu-id="63748-177">aud: "https://rest.media.azure.net".</span><span class="sxs-lookup"><span data-stu-id="63748-177">aud: "https://rest.media.azure.net".</span></span> <span data-ttu-id="63748-178">destinatário de saudação ou audiência do token de acesso de saudação.</span><span class="sxs-lookup"><span data-stu-id="63748-178">hello recipient or audience of hello access token.</span></span> |

## <a name="steps-for-setup"></a><span data-ttu-id="63748-179">Etapas para configuração</span><span class="sxs-lookup"><span data-stu-id="63748-179">Steps for setup</span></span>

<span data-ttu-id="63748-180">tooregister e configurar um aplicativo do AD do Azure para autenticação do AD do Azure e tooobtain um token de acesso para chamar o ponto de extremidade de API de REST de serviços de mídia do Azure de hello, Olá concluir as etapas a seguir:</span><span class="sxs-lookup"><span data-stu-id="63748-180">tooregister and set up an Azure AD application for Azure AD authentication, and tooobtain an access token for calling hello Azure Media Services REST API endpoint, complete hello following steps:</span></span>

1.  <span data-ttu-id="63748-181">Em Olá [portal clássico do Azure](http://go.microsoft.com/fwlink/?LinkID=213885), registre um locatário de toohello AD do Azure do aplicativo (por exemplo, wzmediaservice) do AD do Azure (por exemplo, microsoft.onmicrosoft.com).</span><span class="sxs-lookup"><span data-stu-id="63748-181">In hello [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885), register an Azure AD application (for example, wzmediaservice) toohello Azure AD tenant (for example, microsoft.onmicrosoft.com).</span></span> <span data-ttu-id="63748-182">Independe se foi registrado como aplicativo Web ou nativo.</span><span class="sxs-lookup"><span data-stu-id="63748-182">It doesn't matter whether you registered as web app or native app.</span></span> <span data-ttu-id="63748-183">Além disso, é possível escolher qualquer URL de login e URL de resposta (por exemplo, http://wzmediaservice.com para ambos).</span><span class="sxs-lookup"><span data-stu-id="63748-183">Also, you can choose any sign-on URL and reply URL (for example, http://wzmediaservice.com for both).</span></span>
2. <span data-ttu-id="63748-184">Em Olá [portal clássico do Azure](http://go.microsoft.com/fwlink/?LinkID=213885), vá toohello **configurar** guia de seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="63748-184">In hello [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885), go toohello **Configure** tab of your application.</span></span> <span data-ttu-id="63748-185">Saudação de Observação **ID do cliente**.</span><span class="sxs-lookup"><span data-stu-id="63748-185">Note hello **client ID**.</span></span> <span data-ttu-id="63748-186">Em seguida, em **Chaves**, gere uma **chave do cliente** (segredo do cliente).</span><span class="sxs-lookup"><span data-stu-id="63748-186">Then, under **Keys**, generate a **client key** (client secret).</span></span> 

    > [!NOTE] 
    > <span data-ttu-id="63748-187">Anote o segredo de saudação do cliente.</span><span class="sxs-lookup"><span data-stu-id="63748-187">Take note of hello client secret.</span></span> <span data-ttu-id="63748-188">Não será mostrado novamente.</span><span class="sxs-lookup"><span data-stu-id="63748-188">It won't be shown again.</span></span>
    
3.  <span data-ttu-id="63748-189">Em Olá [portal do Azure](http://ms.portal.azure.com), vá toohello conta de serviços de mídia.</span><span class="sxs-lookup"><span data-stu-id="63748-189">In hello [Azure portal](http://ms.portal.azure.com), go toohello Media Services account.</span></span> <span data-ttu-id="63748-190">Selecione Olá **controle de acesso** painel (IAM).</span><span class="sxs-lookup"><span data-stu-id="63748-190">Select hello **Access Control** (IAM) pane.</span></span> <span data-ttu-id="63748-191">Adicione um novo membro que tem Olá proprietário ou função de Colaborador hello.</span><span class="sxs-lookup"><span data-stu-id="63748-191">Add a new member that has either hello Owner or hello Contributor role.</span></span> <span data-ttu-id="63748-192">Para principal Olá, pesquise o nome do aplicativo hello registrado na etapa 1 (por exemplo, wzmediaservice).</span><span class="sxs-lookup"><span data-stu-id="63748-192">For hello principal, search for hello application name you registered in step 1 (in this example, wzmediaservice).</span></span>

## <a name="info-toocollect"></a><span data-ttu-id="63748-193">Informações toocollect</span><span class="sxs-lookup"><span data-stu-id="63748-193">Info toocollect</span></span>

<span data-ttu-id="63748-194">tooprepare REST de codificação, coletar Olá tooinclude de pontos de dados no código Olá a seguir:</span><span class="sxs-lookup"><span data-stu-id="63748-194">tooprepare REST coding, collect hello following data points tooinclude in hello code:</span></span>

*   <span data-ttu-id="63748-195">Azure AD como um ponto de extremidade STS: https://login.microsoftonline.com/microsoft.onmicrosoft.com/oauth2/token.</span><span class="sxs-lookup"><span data-stu-id="63748-195">Azure AD as an STS endpoint: https://login.microsoftonline.com/microsoft.onmicrosoft.com/oauth2/token.</span></span> <span data-ttu-id="63748-196">A partir deste ponto de extremidade, um token de acesso JWT é solicitado.</span><span class="sxs-lookup"><span data-stu-id="63748-196">From this endpoint, a JWT access token is requested.</span></span> <span data-ttu-id="63748-197">Além disso tooserving como um IDP, o AD do Azure também serve como um STS.</span><span class="sxs-lookup"><span data-stu-id="63748-197">In addition tooserving as an IDP, Azure AD also serves as an STS.</span></span> <span data-ttu-id="63748-198">O Azure AD emite um JWT para acesso ao recurso (um token de acesso).</span><span class="sxs-lookup"><span data-stu-id="63748-198">Azure AD issues a JWT for resource access (an access token).</span></span> <span data-ttu-id="63748-199">Um token JWT tem várias declarações.</span><span class="sxs-lookup"><span data-stu-id="63748-199">A JWT token has various claims.</span></span>
*   <span data-ttu-id="63748-200">API REST dos Serviços de Mídia do Azure como recurso ou audiência: https://rest.media.azure.net.</span><span class="sxs-lookup"><span data-stu-id="63748-200">Azure Media Services REST API as resource or audience: https://rest.media.azure.net.</span></span>
*   <span data-ttu-id="63748-201">ID do cliente: consulte a etapa 2 em[Etapas para configuração](#steps-for-setup).</span><span class="sxs-lookup"><span data-stu-id="63748-201">Client ID: See step 2 in [Steps for setup](#steps-for-setup).</span></span>
*   <span data-ttu-id="63748-202">Segredo do cliente: veja o passo 2 em  [Etapas para configuração](#steps-for-setup).</span><span class="sxs-lookup"><span data-stu-id="63748-202">Client secret: See step 2 in  [Steps for setup](#steps-for-setup).</span></span>
*   <span data-ttu-id="63748-203">Os serviços de mídia da conta do ponto de extremidade de API REST em Olá formato a seguir:</span><span class="sxs-lookup"><span data-stu-id="63748-203">Your Media Services account REST API endpoint in hello following format:</span></span>

    <span data-ttu-id="63748-204">https://[media_service_account_name].restv2.[data_center].media.azure.net/API</span><span class="sxs-lookup"><span data-stu-id="63748-204">https://[media_service_account_name].restv2.[data_center].media.azure.net/API</span></span> 

    <span data-ttu-id="63748-205">Este é o ponto de extremidade de saudação em relação a quais API REST do Media Services todas as chamadas em seu aplicativo são feitas.</span><span class="sxs-lookup"><span data-stu-id="63748-205">This is hello endpoint against which all Media Services REST API calls in your application are made.</span></span> <span data-ttu-id="63748-206">Por exemplo, https://willzhanmswjapan.restv2.japanwest.media.azure.net/API.</span><span class="sxs-lookup"><span data-stu-id="63748-206">For example, https://willzhanmswjapan.restv2.japanwest.media.azure.net/API.</span></span>

<span data-ttu-id="63748-207">Você pode colocar esses cinco parâmetros em seu arquivo App. config ou Web. config, toouse em seu código.</span><span class="sxs-lookup"><span data-stu-id="63748-207">You can then put these five parameters in your web.config or app.config file, toouse in your code.</span></span>

## <a name="sample-code"></a><span data-ttu-id="63748-208">Exemplo de código</span><span class="sxs-lookup"><span data-stu-id="63748-208">Sample code</span></span>

<span data-ttu-id="63748-209">Você pode encontrar o código de exemplo hello [autenticação do AD do Azure para acesso de serviços de mídia do Azure: tanto por meio da API REST](https://github.com/willzhan/WAMSRESTSoln).</span><span class="sxs-lookup"><span data-stu-id="63748-209">You can find hello sample code in [Azure AD Authentication for Azure Media Services Access: Both via REST API](https://github.com/willzhan/WAMSRESTSoln).</span></span>

<span data-ttu-id="63748-210">o código de exemplo Hello tem duas partes:</span><span class="sxs-lookup"><span data-stu-id="63748-210">hello sample code has two parts:</span></span>

*   <span data-ttu-id="63748-211">Um projeto de biblioteca DLL que tem todos os códigos de API REST Olá para autenticação e autorização do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="63748-211">A DLL library project that has all hello REST API code for Azure AD authentication and authorization.</span></span> <span data-ttu-id="63748-212">Ele também tem um método para fazer a API REST chamadas toohello API REST do Media Services ponto de extremidade, com o token de acesso de saudação.</span><span class="sxs-lookup"><span data-stu-id="63748-212">It also has a method for making REST API calls toohello Media Services REST API endpoint, with hello access token.</span></span>
*   <span data-ttu-id="63748-213">Um cliente de teste de console que inicia a autenticação do Azure AD e chama diferentes API REST de Serviços de Mídia.</span><span class="sxs-lookup"><span data-stu-id="63748-213">A console test client, which initiates Azure AD authentication and calls different Media Services REST API.</span></span>

<span data-ttu-id="63748-214">projeto de exemplo Hello tem três recursos:</span><span class="sxs-lookup"><span data-stu-id="63748-214">hello sample project has three features:</span></span>

*   <span data-ttu-id="63748-215">Autenticações de AD do Azure por meio de credenciais de cliente Olá conceder usando Olá API REST.</span><span class="sxs-lookup"><span data-stu-id="63748-215">Azure AD authentications via hello client credentials grant by using only hello REST API.</span></span>
*   <span data-ttu-id="63748-216">Acesso de serviços de mídia do Azure usando Olá API REST.</span><span class="sxs-lookup"><span data-stu-id="63748-216">Azure Media Services access by using only hello REST API.</span></span>
*   <span data-ttu-id="63748-217">Acesso de armazenamento do Azure usando apenas Olá API REST (como toocreate usada uma conta de serviços de mídia, usando a API REST).</span><span class="sxs-lookup"><span data-stu-id="63748-217">Azure Storage access by using only hello REST API (as used toocreate a Media Services account, by using REST API).</span></span>


## <a name="where-is-hello-refresh-token"></a><span data-ttu-id="63748-218">Onde está o token de atualização Olá?</span><span class="sxs-lookup"><span data-stu-id="63748-218">Where is hello refresh token?</span></span>

<span data-ttu-id="63748-219">Alguns leitores podem solicitar: onde está o token de atualização Olá?</span><span class="sxs-lookup"><span data-stu-id="63748-219">Some readers might ask: Where is hello refresh token?</span></span> <span data-ttu-id="63748-220">Por que não utilizar um token de atualização aqui?</span><span class="sxs-lookup"><span data-stu-id="63748-220">Why not use a refresh token here?</span></span>

<span data-ttu-id="63748-221">finalidade de saudação de um token de atualização não é toorefresh um token de acesso.</span><span class="sxs-lookup"><span data-stu-id="63748-221">hello purpose of a refresh token is not toorefresh an access token.</span></span> <span data-ttu-id="63748-222">Em vez disso, é projetado toobypass intervenção do usuário ou autenticação do usuário final e ainda obter um token de acesso válido quando um token anterior expira.</span><span class="sxs-lookup"><span data-stu-id="63748-222">Instead, it is designed toobypass end-user authentication or user intervention and still get a valid access token when an earlier token expires.</span></span> <span data-ttu-id="63748-223">Um nome melhor para um token de atualização pode ser algo como "token de re-entada de usuário de bypass."</span><span class="sxs-lookup"><span data-stu-id="63748-223">A better name for a refresh token might be something like "bypass user re-sign-in token."</span></span>

<span data-ttu-id="63748-224">Se você usar o hello (nome de usuário e senha, atuar em nome do usuário) de fluxo de concessão de autorização do OAuth 2.0, um token de atualização ajuda a obter acesso a um renovado token sem solicitar a intervenção do usuário.</span><span class="sxs-lookup"><span data-stu-id="63748-224">If you use hello OAuth 2.0 authorization grant flow (username and password, acting on behalf of a user), a refresh token helps you get a renewed access token without requesting user intervention.</span></span> <span data-ttu-id="63748-225">No entanto, para Olá OAuth 2.0 que descrevemos neste artigo fluxo de concessão de credenciais do cliente, cliente Olá atua em seu próprio nome.</span><span class="sxs-lookup"><span data-stu-id="63748-225">However, for hello OAuth 2.0 client credentials grant flow that we describe in this article, hello client acts on its own behalf.</span></span> <span data-ttu-id="63748-226">Intervenção do usuário não é necessário em todos os, e o servidor de autorização Olá não precisa muito (e não) fornecem um token de atualização.</span><span class="sxs-lookup"><span data-stu-id="63748-226">You don't need user intervention at all, and hello authorization server doesn't need too(and won't) give you a refresh token.</span></span> <span data-ttu-id="63748-227">Se você depurar Olá **GetUrlEncodedJWT** método, observe que a resposta de saudação do ponto de extremidade token Olá tem um token de acesso, mas nenhum token de atualização.</span><span class="sxs-lookup"><span data-stu-id="63748-227">If you debug hello **GetUrlEncodedJWT** method, you notice that hello response from hello token endpoint has an access token, but no refresh token.</span></span>

## <a name="next-steps"></a><span data-ttu-id="63748-228">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="63748-228">Next steps</span></span>

<span data-ttu-id="63748-229">Introdução ao [carregando arquivos tooyour conta](media-services-dotnet-upload-files.md).</span><span class="sxs-lookup"><span data-stu-id="63748-229">Get started with [uploading files tooyour account](media-services-dotnet-upload-files.md).</span></span>
