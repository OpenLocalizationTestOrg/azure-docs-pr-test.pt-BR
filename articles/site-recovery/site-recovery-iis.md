---
title: aaaReplicate um IIS multicamado com base em aplicativo web usando o Azure Site Recovery | Microsoft Docs
description: "Este artigo descreve como tooreplicate IIS web farm máquinas de virtuais usando o Azure Site Recovery."
services: site-recovery
documentationcenter: 
author: nsoneji
manager: gauravd
editor: 
ms.assetid: 
ms.service: site-recovery
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/11/2017
ms.author: nisoneji
ms.openlocfilehash: 1974265b3cb05f6dc57049876306d2e08424bb97
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="replicate-a-multi-tier-iis-based-web-application-using-azure-site-recovery"></a><span data-ttu-id="4c1ce-103">Replicar um aplicativo Web baseado em IIS de várias camadas usando o Azure Site Recovery</span><span class="sxs-lookup"><span data-stu-id="4c1ce-103">Replicate a multi-tier IIS based web application using Azure Site Recovery</span></span>

## <a name="overview"></a><span data-ttu-id="4c1ce-104">Visão geral</span><span class="sxs-lookup"><span data-stu-id="4c1ce-104">Overview</span></span>


<span data-ttu-id="4c1ce-105">Software de aplicativo é o mecanismo de saudação de produtividade de negócios em uma organização.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-105">Application software is hello engine of business productivity in an organization.</span></span> <span data-ttu-id="4c1ce-106">Vários aplicativos Web podem servir para propósitos diferentes em uma organização.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-106">Various web applications can serve different purposes in an organization.</span></span> <span data-ttu-id="4c1ce-107">Alguns deles, como processamento de folha de pagamento, aplicativos financeiros e sites voltados para o cliente podem ser essenciais para uma organização.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-107">Some of these like payroll processing, financial applications and customer facing websites can be utmost critical for an organization.</span></span> <span data-ttu-id="4c1ce-108">É importante para Olá organização toohave-los para cima e em execução com perda de tooprevent de todos os tempos de produtividade e mais importante evitar qualquer imagem de marca toohello danos da organização hello.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-108">It will be important for hello organization toohave them up and running at all times tooprevent loss of productivity and more importantly prevent any damage toohello brand image of hello organization.</span></span>

<span data-ttu-id="4c1ce-109">Aplicativos web críticos geralmente são definidos como aplicativos de várias camadas com Olá web, o banco de dados e o aplicativo em diferentes camadas.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-109">Critical web applications are typically set up as multi-tier applications with hello web, database and application on different tiers.</span></span> <span data-ttu-id="4c1ce-110">Seja espalhada em várias camadas, além de aplicativos de saudação também podem usar vários servidores em cada camada tooload Olá balancear.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-110">Apart from being spread across various tiers, hello applications may also be using multiple servers in each tier tooload balance hello traffic.</span></span> <span data-ttu-id="4c1ce-111">Além disso, os mapeamentos de saudação entre várias camadas e no servidor de web hello podem ser baseados em endereços IP estáticos.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-111">Moreover, hello mappings between various tiers and on hello web server may be based on static IP addresses.</span></span> <span data-ttu-id="4c1ce-112">Durante o failover, alguns destes mapeamentos precisará toobe atualizado, especialmente, se você tiver vários sites configurados no servidor de web hello.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-112">On failover, some of these mappings will need toobe updated, especially, if you have multiple websites configured on hello web server.</span></span> <span data-ttu-id="4c1ce-113">No caso de aplicativos web usando SSL, associações de certificado serão necessário toobe atualizado.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-113">In case of web applications using SSL, certificate bindings will need toobe updated.</span></span>

<span data-ttu-id="4c1ce-114">Métodos tradicionais de recuperação baseados em replicação não envolvem fazendo backup de vários arquivos de configuração, as configurações do registro, associações, componentes personalizados (COM ou .NET), conteúdo e também certificados e recuperar arquivos Olá por meio de um conjunto de etapas manuais.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-114">Traditional non-replication based recovery methods involve backing up of various configuration files, registry settings, bindings, custom components (COM or .NET), content and also certificates and recovering hello files through a set of manual steps.</span></span> <span data-ttu-id="4c1ce-115">Está claro que essas técnicas são inconvenientes, propensas a erros e não escalonáveis.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-115">These techniques are clearly cumbersome, error prone and not scalable.</span></span> <span data-ttu-id="4c1ce-116">Ele é, por exemplo, facilmente possível tooforget fazendo backup de certificados e ficar com nenhuma opção mas toobuy novos certificados para o servidor de saudação após o failover.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-116">It is, for example, easily possible for you tooforget backing up certificates and be left with no choice but toobuy new certificates for hello server after failover.</span></span>

<span data-ttu-id="4c1ce-117">Uma solução de recuperação de desastres BOM, deve permitir modelagem de planos de recuperação em torno de saudação acima arquiteturas de aplicativos complexos e também ter Olá capacidade tooadd personalizado etapas toohandle aplicativo mapeamentos entre várias camadas, portanto, fornecendo um Clique se captura solução no evento de saudação de um desastre esquerda tooa reduzir o RTO.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-117">A good disaster recovery solution, should allow modeling of recovery plans around hello above complex application architectures and also have hello ability tooadd customized steps toohandle application mappings between various tiers hence providing a single-click sure shot solution in hello event of a disaster leading tooa lower RTO.</span></span>


<span data-ttu-id="4c1ce-118">Este artigo descreve como tooprotect um IIS com base em aplicativo web usando um [do Azure Site Recovery](site-recovery-overview.md).</span><span class="sxs-lookup"><span data-stu-id="4c1ce-118">This article describes how tooprotect an IIS based web application using a [Azure Site Recovery](site-recovery-overview.md).</span></span> <span data-ttu-id="4c1ce-119">Este artigo aborda as práticas recomendadas para a replicação de uma camada de três IIS com base tooAzure de aplicativo web, como você pode fazer uma simulação de recuperação de desastres e como é possível o failover Olá aplicativo tooAzure.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-119">This article will cover best practices for replicating a three tier IIS based web application tooAzure, how you can do a disaster recovery drill, and how you can failover hello application tooAzure.</span></span>


## <a name="prerequisites"></a><span data-ttu-id="4c1ce-120">Pré-requisitos</span><span class="sxs-lookup"><span data-stu-id="4c1ce-120">Prerequisites</span></span>

<span data-ttu-id="4c1ce-121">Antes de começar, certifique-se de que compreender o seguinte hello:</span><span class="sxs-lookup"><span data-stu-id="4c1ce-121">Before you start, make sure you understand hello following:</span></span>

1. [<span data-ttu-id="4c1ce-122">Replicando tooAzure uma máquina virtual</span><span class="sxs-lookup"><span data-stu-id="4c1ce-122">Replicating a virtual machine tooAzure</span></span>](site-recovery-vmware-to-azure.md)
1. <span data-ttu-id="4c1ce-123">Como muito[criar uma rede de recuperação](site-recovery-network-design.md)</span><span class="sxs-lookup"><span data-stu-id="4c1ce-123">How too[design a recovery network](site-recovery-network-design.md)</span></span>
1. [<span data-ttu-id="4c1ce-124">Fazer um tooAzure de failover de teste</span><span class="sxs-lookup"><span data-stu-id="4c1ce-124">Doing a test failover tooAzure</span></span>](./site-recovery-test-failover-to-azure.md)
1. [<span data-ttu-id="4c1ce-125">Fazer um failover tooAzure</span><span class="sxs-lookup"><span data-stu-id="4c1ce-125">Doing a failover tooAzure</span></span>](site-recovery-failover.md)
1. <span data-ttu-id="4c1ce-126">Como muito[replicar um controlador de domínio](site-recovery-active-directory.md)</span><span class="sxs-lookup"><span data-stu-id="4c1ce-126">How too[replicate a domain controller](site-recovery-active-directory.md)</span></span>
1. <span data-ttu-id="4c1ce-127">Como muito[replicar do SQL Server](site-recovery-sql.md)</span><span class="sxs-lookup"><span data-stu-id="4c1ce-127">How too[replicate SQL Server](site-recovery-sql.md)</span></span>

## <a name="deployment-patterns"></a><span data-ttu-id="4c1ce-128">Padrões de implantação</span><span class="sxs-lookup"><span data-stu-id="4c1ce-128">Deployment patterns</span></span>
<span data-ttu-id="4c1ce-129">Um aplicativo de web do IIS com base em geralmente segue uma saudação padrões de implantação a seguir:</span><span class="sxs-lookup"><span data-stu-id="4c1ce-129">An IIS based web application typically follows one of hello following deployment patterns:</span></span>

<span data-ttu-id="4c1ce-130">**Padrão de implantação 1** Um farm da Web baseado no IIS com ARR (Application Request Routing), o Servidor IIS e o Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-130">**Deployment pattern 1 ** An IIS based web farm  with Application Request Routing(ARR), IIS Server and Microsoft SQL Server.</span></span>

![Padrão de implantação](./media/site-recovery-iis/deployment-pattern1.png)

<span data-ttu-id="4c1ce-132">**Padrão de implantação 2** Um farm da Web baseado no IIS com ARR (Application Request Routing), o Servidor IIS, Servidor de Aplicativos e o Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-132">**Deployment pattern 2** An IIS based web farm with Application Request Routing(ARR), IIS Server, Application Server, and Microsoft SQL Server.</span></span>


![Padrão de implantação](./media/site-recovery-iis/deployment-pattern2.png)

## <a name="site-recovery-support"></a><span data-ttu-id="4c1ce-134">Suporte do Site Recovery</span><span class="sxs-lookup"><span data-stu-id="4c1ce-134">Site Recovery support</span></span>

<span data-ttu-id="4c1ce-135">Para fins de saudação de criação neste artigo as máquinas virtuais VMware com o servidor IIS versão 7.5 no Windows Server 2012 R2 Enterprise foram usados.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-135">For hello purpose of creating this article VMware virtual machines with IIS Server version 7.5 on Windows Server 2012 R2 Enterprise were used.</span></span> <span data-ttu-id="4c1ce-136">Como a replicação de recuperação de site é independente do aplicativo, recomendações Olá fornecidos aqui são apenas toohold esperado nos seguintes cenários de e para uma versão diferente do IIS.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-136">As site recovery replication is application agnostic, hello recommendations provided here are expected toohold on following scenarios as well and for different version of IIS.</span></span>

### <a name="source-and-target"></a><span data-ttu-id="4c1ce-137">Origem e destino</span><span class="sxs-lookup"><span data-stu-id="4c1ce-137">Source and target</span></span>

<span data-ttu-id="4c1ce-138">**Cenário**</span><span class="sxs-lookup"><span data-stu-id="4c1ce-138">**Scenario**</span></span> | <span data-ttu-id="4c1ce-139">**site secundário tooa**</span><span class="sxs-lookup"><span data-stu-id="4c1ce-139">**tooa secondary site**</span></span> | <span data-ttu-id="4c1ce-140">**tooAzure**</span><span class="sxs-lookup"><span data-stu-id="4c1ce-140">**tooAzure**</span></span>
--- | --- | ---
<span data-ttu-id="4c1ce-141">**Hyper-V**</span><span class="sxs-lookup"><span data-stu-id="4c1ce-141">**Hyper-V**</span></span> | <span data-ttu-id="4c1ce-142">Sim</span><span class="sxs-lookup"><span data-stu-id="4c1ce-142">Yes</span></span> | <span data-ttu-id="4c1ce-143">Sim</span><span class="sxs-lookup"><span data-stu-id="4c1ce-143">Yes</span></span>
<span data-ttu-id="4c1ce-144">**VMware**</span><span class="sxs-lookup"><span data-stu-id="4c1ce-144">**VMware**</span></span> | <span data-ttu-id="4c1ce-145">Sim</span><span class="sxs-lookup"><span data-stu-id="4c1ce-145">Yes</span></span> | <span data-ttu-id="4c1ce-146">Sim</span><span class="sxs-lookup"><span data-stu-id="4c1ce-146">Yes</span></span>
<span data-ttu-id="4c1ce-147">**Servidor físico**</span><span class="sxs-lookup"><span data-stu-id="4c1ce-147">**Physical server**</span></span> | <span data-ttu-id="4c1ce-148">Não</span><span class="sxs-lookup"><span data-stu-id="4c1ce-148">No</span></span> | <span data-ttu-id="4c1ce-149">Sim</span><span class="sxs-lookup"><span data-stu-id="4c1ce-149">Yes</span></span>

## <a name="replicate-virtual-machines"></a><span data-ttu-id="4c1ce-150">Replicar máquinas virtuais</span><span class="sxs-lookup"><span data-stu-id="4c1ce-150">Replicate virtual machines</span></span>

<span data-ttu-id="4c1ce-151">Execute [neste guia](site-recovery-vmware-to-azure.md) toostart replicando todas as Olá IIS web farm máquinas virtuais tooAzure.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-151">Follow [this guidance](site-recovery-vmware-to-azure.md) toostart replicating all hello IIS web farm virtual machines tooAzure.</span></span>

<span data-ttu-id="4c1ce-152">Se você estiver usando um endereço IP estático, especifique Olá IP que você deseja Olá tootake de máquina virtual em Olá [ **IP de destino** ](./site-recovery-replicate-vmware-to-azure.md#view-and-manage-vm-properties) configuração em configurações de rede e computação.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-152">If you are using a static IP then specify hello IP that you want hello virtual machine tootake in hello [**Target IP**](./site-recovery-replicate-vmware-to-azure.md#view-and-manage-vm-properties) setting in Compute and Network settings.</span></span>

![IP de Destino](./media/site-recovery-active-directory/dns-target-ip.png)


## <a name="creating-a-recovery-plan"></a><span data-ttu-id="4c1ce-154">Criar um plano de recuperação</span><span class="sxs-lookup"><span data-stu-id="4c1ce-154">Creating a recovery plan</span></span>

<span data-ttu-id="4c1ce-155">Um plano de recuperação permite sequenciamento Olá failover de várias camadas em um aplicativo de várias camada, assim, manter a consistência do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-155">A recovery plan allows sequencing hello failover of various tiers in a multi-tier application, hence, maintaining application consistency.</span></span> <span data-ttu-id="4c1ce-156">Siga Olá etapas a seguir ao criar um plano de recuperação para um aplicativo web de várias camadas.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-156">Follow hello below steps while creating a recovery plan for a multi-tier web application.</span></span>  <span data-ttu-id="4c1ce-157">[Saiba mais sobre a criação de um plano de recuperação](./site-recovery-create-recovery-plans.md).</span><span class="sxs-lookup"><span data-stu-id="4c1ce-157">[Learn more about creating a recovery plan](./site-recovery-create-recovery-plans.md).</span></span>

### <a name="adding-virtual-machines-toofailover-groups"></a><span data-ttu-id="4c1ce-158">A adição de grupos de toofailover de máquinas virtuais</span><span class="sxs-lookup"><span data-stu-id="4c1ce-158">Adding virtual machines toofailover groups</span></span>
<span data-ttu-id="4c1ce-159">Um aplicativo de web IIS de várias camado típico consiste em uma camada de banco de dados com máquinas virtuais do SQL, camada da web de saudação constituído por um servidor do IIS e uma camada de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-159">A typical multi-tier IIS web application will consist of a database tier with SQL virtual machines, hello web tier constituted by a IIS server and an application tier.</span></span> <span data-ttu-id="4c1ce-160">Adicione todos os grupo de toodifferent essas máquinas virtuais com base na camada como abaixo.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-160">Add all these virtual machines toodifferent group based on tier as below.</span></span> <span data-ttu-id="4c1ce-161">[Saiba mais sobre como personalizar o plano de recuperação](site-recovery-runbook-automation.md#customize-the-recovery-plan).</span><span class="sxs-lookup"><span data-stu-id="4c1ce-161">[Learn more about customising recovery plan](site-recovery-runbook-automation.md#customize-the-recovery-plan).</span></span>

1. <span data-ttu-id="4c1ce-162">Crie um plano de recuperação.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-162">Create a recovery plan.</span></span> <span data-ttu-id="4c1ce-163">Adicione máquinas virtuais de camada de banco de dados Olá em 1 grupo tooensure que eles são desligadas última e colocado primeiro.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-163">Add hello database tier virtual machines under Group 1 tooensure that they are shutdown last and brought up first.</span></span>

1. <span data-ttu-id="4c1ce-164">Adicione máquinas virtuais de camada de aplicativo hello sob o grupo 2, de modo que eles sejam ativados após a camada de banco de dados de saudação foram ativada.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-164">Add hello application tier virtual machines under Group 2 such that they are brought up after hello database tier has been brought up.</span></span>

1. <span data-ttu-id="4c1ce-165">Adicione máquinas virtuais do Olá web camada no grupo 3, de modo que eles sejam ativados depois de camada de aplicativo hello foram ativada.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-165">Add hello web tier virtual machines in Group 3 such that they are brought up after hello application tier has been brought up.</span></span>

1. <span data-ttu-id="4c1ce-166">Adicione balancear a carga de máquinas virtuais no grupo 4, de modo que eles sejam ativados depois da camada de dados da web hello foram ativada.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-166">Add load balance virtual machines in Group 4 such that they are brought up after hello web tier has been brought up.</span></span>


### <a name="adding-scripts-toohello-recovery-plan"></a><span data-ttu-id="4c1ce-167">Adicionar plano de recuperação de toohello de scripts</span><span class="sxs-lookup"><span data-stu-id="4c1ce-167">Adding scripts toohello recovery plan</span></span>
<span data-ttu-id="4c1ce-168">Talvez seja necessário toodo algumas operações em máquinas virtuais do Azure post/teste de failover failover toomake função do IIS web farm de saudação corretamente.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-168">You may need toodo some operations on hello Azure virtual machines post failover/Test failover toomake IIS web farm function correctly.</span></span> <span data-ttu-id="4c1ce-169">Você pode automatizar a operação de failover Olá post como atualizar a entrada DNS, alterando a associação do site, alterações na cadeia de caracteres de conexão adicionando scripts correspondentes no plano de recuperação hello como abaixo.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-169">You can automate hello post failover operation like updating DNS entry, changing site binding, change  in connection string  by adding corresponding scripts in hello recovery plan as below.</span></span> <span data-ttu-id="4c1ce-170">[Saiba mais sobre como adicionar script ao plano de recuperação](./site-recovery-create-recovery-plans.md#add-scripts).</span><span class="sxs-lookup"><span data-stu-id="4c1ce-170">[Learn more about add script recovery plan](./site-recovery-create-recovery-plans.md#add-scripts).</span></span>

#### <a name="dns-update"></a><span data-ttu-id="4c1ce-171">Atualização de DNS</span><span class="sxs-lookup"><span data-stu-id="4c1ce-171">DNS Update</span></span>
<span data-ttu-id="4c1ce-172">Se Olá DNS é configurado para a atualização dinâmica de DNS máquinas virtuais normalmente atualizar Olá DNS com hello novo IP quando eles são iniciados.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-172">If hello DNS is configured for dynamic DNS update then virtual machines usually update hello DNS with hello new IP once they start.</span></span> <span data-ttu-id="4c1ce-173">Se desejar tooadd um tooupdate etapa explícita DNS com hello novos IPs de máquinas virtuais de hello, em seguida, adicione isso [script tooupdate IP no DNS](https://aka.ms/asr-dns-update) como uma ação de postagem em grupos do plano de recuperação.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-173">If you want tooadd an explicit step tooupdate DNS with hello new IPs of hello virtual machines then add this [script tooupdate IP in DNS](https://aka.ms/asr-dns-update) as a post action on recovery plan groups.</span></span>  

#### <a name="connection-string-in-an-applications-webconfig"></a><span data-ttu-id="4c1ce-174">Cadeia de conexão no web.config do aplicativo</span><span class="sxs-lookup"><span data-stu-id="4c1ce-174">Connection string in an application’s web.config</span></span>
<span data-ttu-id="4c1ce-175">cadeia de caracteres de conexão de saudação especifica o banco de dados Olá Olá site da web se comunica com.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-175">hello connection string specifies hello database that hello web site communicates with.</span></span>

<span data-ttu-id="4c1ce-176">Se cadeia de caracteres de conexão Olá assume o nome de saudação da máquina de virtual de banco de dados hello, nenhuma etapa adicional será necessária post failover e aplicativo hello poderá tooautomatically se comunicam toohello banco de dados.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-176">If hello connection string carries hello name of hello database virtual machine, no further steps will be needed post failover and hello application will be able tooautomatically communicate toohello DB.</span></span> <span data-ttu-id="4c1ce-177">Além disso, se o endereço IP Olá Olá máquina de virtual de banco de dados é mantido, não será necessária a cadeia de caracteres de conexão do tooupdate hello.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-177">Also, if hello IP address for hello database virtual machine is retained, it will not be needed tooupdate hello connection string.</span></span> <span data-ttu-id="4c1ce-178">Se a cadeia de caracteres de conexão de saudação refere-se a máquina de virtual de banco de dados toohello usando um endereço IP, será necessário toobe atualizado após failover.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-178">If hello connection string refers toohello database virtual machine using an IP address, it will need toobe updated post failover.</span></span> <span data-ttu-id="4c1ce-179">Por exemplo</span><span class="sxs-lookup"><span data-stu-id="4c1ce-179">E.g.</span></span> <span data-ttu-id="4c1ce-180">Olá abaixo de cadeia de caracteres de conexão aponta toohello banco de dados com IP 127.0.1.2</span><span class="sxs-lookup"><span data-stu-id="4c1ce-180">hello below connection string points toohello DB with IP 127.0.1.2</span></span>

        <?xml version="1.0" encoding="utf-8"?>
        <configuration>
        <connectionStrings>
        <add name="ConnStringDb1" connectionString="Data Source= 127.0.1.2\SqlExpress; Initial Catalog=TestDB1;Integrated Security=False;" />
        </connectionStrings>
        </configuration>

<span data-ttu-id="4c1ce-181">Você pode atualizar a cadeia de caracteres de conexão de saudação na camada da web adicionando [script de atualização de conexão do IIS](https://aka.ms/asr-update-webtier-script-classic) após o grupo 3 no plano de recuperação de saudação.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-181">You can update hello connection string in web tier by adding [IIS connection update script](https://aka.ms/asr-update-webtier-script-classic) after Group 3 in hello recovery plan.</span></span>

#### <a name="site-bindings-for-hello-application"></a><span data-ttu-id="4c1ce-182">Ligações do site para o aplicativo hello</span><span class="sxs-lookup"><span data-stu-id="4c1ce-182">Site bindings for hello application</span></span>
<span data-ttu-id="4c1ce-183">Cada site consiste em informações que incluem o tipo de saudação de associação, o endereço IP de Olá no qual Olá servidor IIS escuta solicitações de toohello para site hello, número da porta hello e nomes de host de saudação do site Olá de associação.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-183">Every site consists of binding information that includes hello type of binding, hello IP address at which hello IIS server listens toohello requests for hello site, hello port number and hello host names for hello site.</span></span> <span data-ttu-id="4c1ce-184">Em tempo de saudação de um failover, essas associações talvez seja necessário toobe atualizado se houver uma alteração no endereço IP hello associado a eles.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-184">At hello time of a failover, these bindings might need toobe updated if there is a change in hello IP address associated with them.</span></span>

> [!NOTE]
>
> <span data-ttu-id="4c1ce-185">Se você tiver marcado como 'all unassigned' para associação do site Olá exemplo hello abaixo, você não precisará tooupdate esse failover de postagem de associação.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-185">If you have marked ‘all unassigned’ for hello site binding as in hello example below, you will not need tooupdate this binding post failover.</span></span> <span data-ttu-id="4c1ce-186">Além disso, se o endereço IP de saudação associado a um site não for alterado após failover, associação do site Olá necessário não ser atualizada (retenção de endereço IP hello depende da arquitetura de rede hello e sub-redes atribuído toohello sites primário e de recuperação e, portanto, podem ou não seja viável para sua organização.)</span><span class="sxs-lookup"><span data-stu-id="4c1ce-186">Also, if hello IP address associated with a site is not changed post failover, hello site binding need not be updated (Retention of hello IP address depends on hello network architecture and subnets assigned toohello primary and recovery sites and hence may or may not be feasible for your organization.)</span></span>

![Associação de SSL](./media/site-recovery-iis/sslbinding.png)

<span data-ttu-id="4c1ce-188">Se você associou o endereço IP de saudação com um site, você precisará tooupdate todas as associações de site com o novo endereço IP hello.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-188">If you have associated hello IP address with a site, you will need tooupdate all site bindings with hello new IP address.</span></span> <span data-ttu-id="4c1ce-189">Você pode adicionar [script de atualização da camada da Web do IIS](https://aka.ms/asr-web-tier-update-runbook-classic) após o grupo 3 em associações de site saudação do toochange de plano de recuperação.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-189">You can add [IIS Web tier update script](https://aka.ms/asr-web-tier-update-runbook-classic) after Group 3 in recovery plan toochange hello site bindings.</span></span>


#### <a name="update-load-balancer-ip-address"></a><span data-ttu-id="4c1ce-190">Atualizar o endereço IP do balanceador de carga</span><span class="sxs-lookup"><span data-stu-id="4c1ce-190">Update load balancer IP address</span></span>
<span data-ttu-id="4c1ce-191">Se você tiver máquina de virtual Application Request Routing, adicione [script de failover de ARR IIS](https://aka.ms/asr-iis-arrtier-failover-script-classic) após o endereço IP do grupo 4 tooupdate hello.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-191">If you have  Application Request Routing virtual machine, add [IIS ARR  failover script](https://aka.ms/asr-iis-arrtier-failover-script-classic) after Group 4 tooupdate hello IP address.</span></span>

#### <a name="hello-ssl-cert-binding-for-an-https-connection"></a><span data-ttu-id="4c1ce-192">associação de certificado SSL Olá para uma conexão https</span><span class="sxs-lookup"><span data-stu-id="4c1ce-192">hello SSL cert binding for an https connection</span></span>
<span data-ttu-id="4c1ce-193">Sites podem ter um certificado SSL associado que ajuda a garantir uma comunicação segura entre Olá servidorweb e navegador saudação do usuário.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-193">Websites can have an associated SSL certificate that helps in ensuring a secure communication between hello webserver and hello user’s browser.</span></span> <span data-ttu-id="4c1ce-194">Se o site Olá tem uma conexão https e um endereço IP https associado site associação toohello saudação do servidor do IIS com uma associação de certificado SSL, uma nova associação de site precisará toobe adicionado cert Olá com hello IP da máquina de virtual IIS Olá após o failover.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-194">If hello website has an https connection and an associated https site binding toohello IP address of hello IIS server with an SSL cert binding, a new site binding will need toobe added for hello cert with hello IP of hello IIS virtual machine post failover.</span></span>

<span data-ttu-id="4c1ce-195">certificado SSL Olá pode ser emitido em relação a-</span><span class="sxs-lookup"><span data-stu-id="4c1ce-195">hello SSL cert can be issued against-</span></span>

<span data-ttu-id="4c1ce-196">um) nome de domínio totalmente qualificado de Olá do site Olá</span><span class="sxs-lookup"><span data-stu-id="4c1ce-196">a) hello fully qualified domain name of hello website</span></span><br>
<span data-ttu-id="4c1ce-197">b) nome saudação do servidor de saudação</span><span class="sxs-lookup"><span data-stu-id="4c1ce-197">b) hello name of hello server</span></span><br>
<span data-ttu-id="4c1ce-198">c) um certificado curinga para o nome de domínio Olá</span><span class="sxs-lookup"><span data-stu-id="4c1ce-198">c) A wildcard certificate for hello domain name</span></span><br>
<span data-ttu-id="4c1ce-199">d) um endereço IP – se o certificado SSL da saudação é feito em IP hello saudação do servidor do IIS, outro toobe de necessidades de certificado SSL emitido para o endereço IP de saudação do hello servidor IIS em Olá site do Azure e uma associação de SSL adicional para este certificado será necessário toobe criado.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-199">d) An IP address – If hello SSL cert is issued against hello IP of hello IIS server, another SSL cert needs toobe issued against hello IP address of hello IIS server on hello Azure site and an additional SSL binding for this certificate will need toobe created.</span></span> <span data-ttu-id="4c1ce-200">Portanto, é aconselhável toonot usar um certificado SSL emitido em IP.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-200">Hence, it is advisable toonot use an SSL cert issued against IP.</span></span> <span data-ttu-id="4c1ce-201">Essa é uma opção menos usada e em breve será substituída de acordo com as novas alterações na CA/fórum do navegador.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-201">This is a less widely used option and will soon be deprecated as per new CA/browser forum changes.</span></span>

#### <a name="update-hello-dependency-between-hello-web-and-hello-application-tier"></a><span data-ttu-id="4c1ce-202">Atualização Olá dependência entre Olá web e a camada de aplicativo hello</span><span class="sxs-lookup"><span data-stu-id="4c1ce-202">Update hello dependency between hello web and hello application tier</span></span>
<span data-ttu-id="4c1ce-203">Se você tiver uma dependência específicas de aplicativo com base no endereço IP hello de máquinas virtuais de saudação, você precisa tooupdate esse failover de postagem de dependência.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-203">If you have an application specific dependency based on hello IP address of hello virtual machines, you need tooupdate this dependency post failover.</span></span>

## <a name="doing-a-test-failover"></a><span data-ttu-id="4c1ce-204">Executar um failover de teste</span><span class="sxs-lookup"><span data-stu-id="4c1ce-204">Doing a test failover</span></span>
<span data-ttu-id="4c1ce-205">Execute [neste guia](site-recovery-test-failover-to-azure.md) toodo um failover de teste.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-205">Follow [this guidance](site-recovery-test-failover-to-azure.md) toodo a test failover.</span></span>

1.  <span data-ttu-id="4c1ce-206">Vá tooAzure portal e selecione seu Cofre de recuperação de serviço.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-206">Go tooAzure portal and select your Recovery Service vault.</span></span>
1.  <span data-ttu-id="4c1ce-207">Clique no plano de recuperação de saudação criado para o farm da web do IIS.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-207">Click on hello recovery plan created for IIS web farm.</span></span>
1.  <span data-ttu-id="4c1ce-208">Clique em 'Failover de Teste'.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-208">Click on 'Test Failover'.</span></span>
1.  <span data-ttu-id="4c1ce-209">Selecione o ponto de recuperação e o processo de failover de teste do rede virtual do Azure toostart hello.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-209">Select recovery point and Azure virtual network toostart hello test failover process.</span></span>
1.  <span data-ttu-id="4c1ce-210">Após ambiente secundário hello, você pode executar a validação.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-210">Once hello secondary environment is up, you can perform your validations.</span></span>
1.  <span data-ttu-id="4c1ce-211">Depois que as validações de saudação estiverem concluídas, você pode selecionar 'Validações Concluir' e ambiente de failover de teste hello serão limpos.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-211">Once hello validations are complete, you can select ‘Validations complete’ and hello test failover environment will be cleaned.</span></span>

## <a name="doing-a-failover"></a><span data-ttu-id="4c1ce-212">Executar um failover</span><span class="sxs-lookup"><span data-stu-id="4c1ce-212">Doing a failover</span></span>
<span data-ttu-id="4c1ce-213">Siga [este guia](site-recovery-failover.md) quando estiver realizando um failover.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-213">Follow [this guidance](site-recovery-failover.md) when you are doing a failover.</span></span>

1.  <span data-ttu-id="4c1ce-214">Vá tooAzure portal e selecione seu Cofre de recuperação de serviço.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-214">Go tooAzure portal and select your Recovery Service vault.</span></span>
1.  <span data-ttu-id="4c1ce-215">Clique no plano de recuperação de saudação criado para o farm da web do IIS.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-215">Click on hello recovery plan created for IIS web farm.</span></span>
1.  <span data-ttu-id="4c1ce-216">Clique em 'Failover'.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-216">Click on 'Failover'.</span></span>
1.  <span data-ttu-id="4c1ce-217">Selecione o processo de failover de saudação de toostart de ponto de recuperação.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-217">Select recovery point toostart hello failover process.</span></span>

## <a name="next-steps"></a><span data-ttu-id="4c1ce-218">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="4c1ce-218">Next steps</span></span>
<span data-ttu-id="4c1ce-219">Saiba mais sobre [replicar outros aplicativos](site-recovery-workload.md) usando o Site Recovery.</span><span class="sxs-lookup"><span data-stu-id="4c1ce-219">You can learn more about [replicate other applications](site-recovery-workload.md) using Site Recovery.</span></span>
