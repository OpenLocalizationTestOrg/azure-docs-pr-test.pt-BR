---
title: "Usando a CDN do Azure para acessar blobs com domínios personalizados por HTTPS"
description: "Aprenda a integrar a CDN do Azure com o Armazenamento de Blobs para acessar blobs com domínios personalizados por HTTPS"
services: storage
documentationcenter: 
author: michaelhauss
manager: vamshik
editor: tysonn
ms.assetid: 
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/04/2017
ms.author: mihauss
ms.openlocfilehash: 1439198250346ae9484eae448489e8a5de4734b7
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/11/2017
---
# <a name="using-the-azure-cdn-to-access-blobs-with-custom-domains-over-https"></a><span data-ttu-id="7a906-103">Usando a CDN do Azure para acessar blobs com domínios personalizados por HTTPS</span><span class="sxs-lookup"><span data-stu-id="7a906-103">Using the Azure CDN to access blobs with custom domains over HTTPS</span></span>

<span data-ttu-id="7a906-104">A CDN (Rede de Distribuição de Conteúdo) do Azure agora dá suporte a HTTPS para nomes de domínio personalizados.</span><span class="sxs-lookup"><span data-stu-id="7a906-104">Azure Content Delivery Network (CDN) now supports HTTPS for custom domain names.</span></span>
<span data-ttu-id="7a906-105">Você pode aproveitar esse recurso para acessar blobs de armazenamento usando seu domínio personalizado por HTTPS.</span><span class="sxs-lookup"><span data-stu-id="7a906-105">You can leverage this feature to access storage blobs using your custom domain over HTTPS.</span></span> <span data-ttu-id="7a906-106">Para fazer isso, primeiro será necessário habilitar a CDN do Azure em seu ponto de extremidade de blob e mapear a CDN para um nome de domínio personalizado.</span><span class="sxs-lookup"><span data-stu-id="7a906-106">To do so, you’ll first need to enable Azure CDN on your blob endpoint and map the CDN to a custom domain name.</span></span> <span data-ttu-id="7a906-107">Uma vez realizadas essas etapas, a tarefa de habilitar HTTPS para o seu domínio personalizado é simplificada com a habilitação de apenas um clique e o gerenciamento do certificado completo, sem nenhum custo adicional ao preço normal da CDN.</span><span class="sxs-lookup"><span data-stu-id="7a906-107">Once you take these steps, enabling HTTPS for your custom domain is simplified via one-click enablement, complete certificate management, and all with no additional cost to normal CDN pricing.</span></span>

<span data-ttu-id="7a906-108">Essa capacidade é importante porque ela permite proteger a privacidade e a integridade dos dados confidenciais do aplicativo Web quando estão em trânsito.</span><span class="sxs-lookup"><span data-stu-id="7a906-108">This ability is important because it enables you to protect the privacy and data integrity of your sensitive web application data while in transit.</span></span> <span data-ttu-id="7a906-109">Usar o protocolo SSL para assegurar o tráfego via HTTPS garante que esses dados sejam criptografados quando enviados pela Internet.</span><span class="sxs-lookup"><span data-stu-id="7a906-109">Using the SSL protocol to serve traffic via HTTPS ensures that data is encrypted when it is sent across the internet.</span></span> <span data-ttu-id="7a906-110">O HTTPS fornece confiabilidade, autenticação e protege seus aplicativos Web contra ataques.</span><span class="sxs-lookup"><span data-stu-id="7a906-110">HTTPS provides trust and authentication, and protects your web applications from attacks.</span></span>

> [!NOTE]
> <span data-ttu-id="7a906-111">Além de dar suporte a SSL para nomes de domínio personalizado, a CDN do Azure pode ajudá-lo a dimensionar seu aplicativo para fornecer conteúdo de alta largura de banda em todo o mundo.</span><span class="sxs-lookup"><span data-stu-id="7a906-111">In addition to providing SSL support for custom domain names, the Azure CDN can help you scale your application to deliver high-bandwidth content around the world.</span></span>
> <span data-ttu-id="7a906-112">Para obter mais informações, confira [Visão geral da CDN do Azure](../cdn/cdn-overview.md).</span><span class="sxs-lookup"><span data-stu-id="7a906-112">To learn more, check out [Overview of the Azure CDN](../cdn/cdn-overview.md).</span></span>
>
>

## <a name="quick-start"></a><span data-ttu-id="7a906-113">Início rápido</span><span class="sxs-lookup"><span data-stu-id="7a906-113">Quick start</span></span>

<span data-ttu-id="7a906-114">Estas são as etapas necessárias para habilitar HTTPS para o ponto de extremidade do Armazenamento de Blobs personalizado:</span><span class="sxs-lookup"><span data-stu-id="7a906-114">These are the steps required to enable HTTPS for your custom blob storage endpoint:</span></span>

1.  <span data-ttu-id="7a906-115">[Integrar uma conta de armazenamento do Azure com a CDN do Azure](../cdn/cdn-create-a-storage-account-with-cdn.md).</span><span class="sxs-lookup"><span data-stu-id="7a906-115">[Integrate an Azure storage account with Azure CDN](../cdn/cdn-create-a-storage-account-with-cdn.md).</span></span>
    <span data-ttu-id="7a906-116">Este artigo guia você pela criação de uma conta de armazenamento no Portal do Azure, se você ainda não fez isso.</span><span class="sxs-lookup"><span data-stu-id="7a906-116">This article walks you through creating a storage account in the Azure Portal if you have not done so already.</span></span>
2.  <span data-ttu-id="7a906-117">[Mapeie conteúdo da CDN do Azure para um domínio personalizado](../cdn/cdn-map-content-to-custom-domain.md).</span><span class="sxs-lookup"><span data-stu-id="7a906-117">[Map Azure CDN content to a custom domain](../cdn/cdn-map-content-to-custom-domain.md).</span></span>
3.  <span data-ttu-id="7a906-118">[Habilite HTTPS em um domínio personalizado da CDN do Azure](../cdn/cdn-custom-ssl.md).</span><span class="sxs-lookup"><span data-stu-id="7a906-118">[Enable HTTPS on an Azure CDN custom domain](../cdn/cdn-custom-ssl.md).</span></span>

## <a name="shared-access-signatures"></a><span data-ttu-id="7a906-119">As Assinaturas de Acesso Compartilhado</span><span class="sxs-lookup"><span data-stu-id="7a906-119">Shared Access Signatures</span></span>

<span data-ttu-id="7a906-120">Se o ponto de extremidade do Armazenamento de Blobs estiver configurado para não permitir acesso de leitura anônimo, você precisará fornecer um token [SAS (assinatura de acesso compartilhado)](storage-dotnet-shared-access-signature-part-1.md) em cada solicitação que fizer ao domínio personalizado.</span><span class="sxs-lookup"><span data-stu-id="7a906-120">If your blob storage endpoint is configured to disallow anonymous read access, you will need to provide a [Shared Access Signature (SAS)](storage-dotnet-shared-access-signature-part-1.md) token in each request you make to your custom domain.</span></span> <span data-ttu-id="7a906-121">Por padrão, os pontos de extremidade de Armazenamento de Blobs não permitem acesso de leitura anônimo.</span><span class="sxs-lookup"><span data-stu-id="7a906-121">By default, blob storage endpoints disallow anonymous read access.</span></span> <span data-ttu-id="7a906-122">Para obter mais informações sobre assinaturas de acesso compartilhado, veja [Gerenciar acesso de leitura anônimo a contêineres e blobs](storage-manage-access-to-resources.md).</span><span class="sxs-lookup"><span data-stu-id="7a906-122">See [Managing anonymous read access to containers and blobs](storage-manage-access-to-resources.md) for more information on shared access signatures.</span></span>

<span data-ttu-id="7a906-123">A CDN do Azure não respeita nenhuma restrição adicionada ao token SAS.</span><span class="sxs-lookup"><span data-stu-id="7a906-123">Azure CDN does not respect any restrictions added to the SAS token.</span></span> <span data-ttu-id="7a906-124">Por exemplo, todos os tokens SAS têm uma hora da expiração.</span><span class="sxs-lookup"><span data-stu-id="7a906-124">For example, all SAS tokens have an expiration time.</span></span> <span data-ttu-id="7a906-125">Isso significa que o conteúdo ainda pode ser acessado com uma SAS expirada até que esse conteúdo seja limpo dos nós de borda da CDN.</span><span class="sxs-lookup"><span data-stu-id="7a906-125">This means that content can still be accessed with an expired SAS until that content is purged from the CDN edge nodes.</span></span> <span data-ttu-id="7a906-126">Você pode controlar por quanto tempo os dados são armazenados em cache na CDN definindo o cabeçalho de resposta do cache.</span><span class="sxs-lookup"><span data-stu-id="7a906-126">You can control how long data is cached on the CDN by setting the cache response header.</span></span> <span data-ttu-id="7a906-127">Veja [Gerenciar a expiração dos blobs de Armazenamento do Azure na CDN do Azure](../cdn/cdn-manage-expiration-of-blob-content.md) para obter instruções.</span><span class="sxs-lookup"><span data-stu-id="7a906-127">See [Managing expiration of Azure Storage blobs in Azure CDN](../cdn/cdn-manage-expiration-of-blob-content.md) for instructions.</span></span>

<span data-ttu-id="7a906-128">Se você criar várias URLs de SAS para o mesmo ponto de extremidade de blob, é recomendável ativar o caching de cadeias de consulta da CDN do Azure.</span><span class="sxs-lookup"><span data-stu-id="7a906-128">If you create multiple SAS URLs for the same blob endpoint, we recommend turning on query string caching for your Azure CDN.</span></span> <span data-ttu-id="7a906-129">Isso é para garantir que cada URL seja tratada como uma entidade exclusiva.</span><span class="sxs-lookup"><span data-stu-id="7a906-129">This is to ensure that each URL is treated as a unique entity.</span></span> <span data-ttu-id="7a906-130">Para obter mais informações, confira [Controlar o comportamento de caching da CDN do Azure com cadeias de consulta](../cdn/cdn-query-string.md).</span><span class="sxs-lookup"><span data-stu-id="7a906-130">See [Controlling Azure CDN caching behavior with query strings](../cdn/cdn-query-string.md) for more information.</span></span>

## <a name="http-to-https-redirection"></a><span data-ttu-id="7a906-131">Redirecionamento de HTTP para HTTPS</span><span class="sxs-lookup"><span data-stu-id="7a906-131">HTTP to HTTPS redirection</span></span>

<span data-ttu-id="7a906-132">Você pode optar por redirecionar o tráfego de HTTP para HTTPS.</span><span class="sxs-lookup"><span data-stu-id="7a906-132">You can elect to redirect HTTP traffic to HTTPS.</span></span> <span data-ttu-id="7a906-133">Isso requer o uso da oferta do Azure CDN Premium da Verizon.</span><span class="sxs-lookup"><span data-stu-id="7a906-133">This requires use of the Azure CDN premium offering from Verizon.</span></span> <span data-ttu-id="7a906-134">Você precisa [Substituir o comportamento HTTP usando o mecanismo de regras da CDN do Azure](../cdn/cdn-rules-engine.md) com a regra a seguir:</span><span class="sxs-lookup"><span data-stu-id="7a906-134">You need to [Override HTTP behavior using the Azure CDN rules engine](../cdn/cdn-rules-engine.md) with the following rule:</span></span>

![](./media/storage-https-custom-domain-cdn/redirect-to-https.png)

<span data-ttu-id="7a906-135">“Cdn-endpoint-name” refere-se ao nome que você configurou para o ponto de extremidade da CDN.</span><span class="sxs-lookup"><span data-stu-id="7a906-135">“Cdn-endpoint-name” refers to the name that you configured for your CDN endpoint.</span></span> <span data-ttu-id="7a906-136">Você pode selecionar esse valor na lista suspensa.</span><span class="sxs-lookup"><span data-stu-id="7a906-136">You can select this value from the dropdown.</span></span> <span data-ttu-id="7a906-137">“Origin-path” refere-se ao caminho dentro de sua conta de armazenamento de origem em que reside o conteúdo estático.</span><span class="sxs-lookup"><span data-stu-id="7a906-137">“Origin-path” refers to the path within your origin storage account where your static content resides.</span></span>
<span data-ttu-id="7a906-138">Se você estiver hospedando todo o conteúdo estático em um único contêiner, substitua “origin-path” pelo nome do contêiner.</span><span class="sxs-lookup"><span data-stu-id="7a906-138">If you are hosting all static content in a single container, replace “origin-path” with the name of that container.</span></span>

<span data-ttu-id="7a906-139">Para informações mais aprofundadas sobre regras, consulte os [Recursos do mecanismo de regras da CDN do Azure](../cdn/cdn-rules-engine-reference-features.md).</span><span class="sxs-lookup"><span data-stu-id="7a906-139">For a deeper dive into rules, please see the [Azure CDN rules engine features](../cdn/cdn-rules-engine-reference-features.md).</span></span>

## <a name="pricing-and-billing"></a><span data-ttu-id="7a906-140">Preços e cobrança</span><span class="sxs-lookup"><span data-stu-id="7a906-140">Pricing and billing</span></span>

<span data-ttu-id="7a906-141">Quando você acessa blobs por meio de uma CDN do Azure, você paga [preços de Armazenamento de Blobs](https://azure.microsoft.com/pricing/details/storage/blobs/) para o tráfego entre os nós de borda e a origem (Armazenamento de Blobs) e [preços de CDN](https://azure.microsoft.com/pricing/details/cdn/) para dados acessados por meio dos nós de borda.</span><span class="sxs-lookup"><span data-stu-id="7a906-141">When you access blobs through an Azure CDN, you pay [Blob storage prices](https://azure.microsoft.com/pricing/details/storage/blobs/) for traffic between the edge nodes and the origin (Blob storage), and [CDN prices](https://azure.microsoft.com/pricing/details/cdn/) for data accessed from the edge nodes.</span></span>

<span data-ttu-id="7a906-142">Por exemplo, digamos que você tenha uma conta de armazenamento no Oeste dos EUA que está sendo acessada usando uma CDN do Azure.</span><span class="sxs-lookup"><span data-stu-id="7a906-142">For example, say you have a storage account in West US that is being accessed using an Azure CDN.</span></span> <span data-ttu-id="7a906-143">Se alguém no Reino Unido tenta acessar um dos blobs na conta de armazenamento por meio da CDN, o Azure verifica primeiro o nó de borda desse blob mais próximo do Reino Unido.</span><span class="sxs-lookup"><span data-stu-id="7a906-143">If someone in the UK tries to access one of the blobs in that storage account via the CDN, Azure first checks the edge node closest to the UK for that blob.</span></span> <span data-ttu-id="7a906-144">Se for encontrado, ele acessará essa cópia do blob e usará preços de CDN, porque ele estará sendo acessado na CDN.</span><span class="sxs-lookup"><span data-stu-id="7a906-144">If found, it accesses that copy of the blob and will use CDN pricing, because it is being accessed on the CDN.</span></span> <span data-ttu-id="7a906-145">Se não for encontrado, o Azure copiará o blob para o nó de borda, o que resultará em cobranças de saída e transação conforme especificado nos preços de Armazenamento de Blobs e, em seguida, acessará o arquivo no nó de borda, o que resultará na cobrança da CDN.</span><span class="sxs-lookup"><span data-stu-id="7a906-145">If not found, Azure will copy the blob to the edge node, which will result in egress and transaction charges as specified in the Blob storage pricing, and then access the file on the edge node, which will result in CDN billing.</span></span>

<span data-ttu-id="7a906-146">Ao examinar a [Página de preços da CDN](https://azure.microsoft.com/pricing/details/cdn/), observe que o suporte ao protocolo HTTPS para nomes de domínio personalizado só está disponível para a CDN do Azure dos produtos Verizon (Standard e Premium).</span><span class="sxs-lookup"><span data-stu-id="7a906-146">When looking at the [CDN pricing page](https://azure.microsoft.com/pricing/details/cdn/), note that HTTPS support for custom domain names is only available for Azure CDN from Verizon products (Standard and Premium).</span></span>

## <a name="next-steps"></a><span data-ttu-id="7a906-147">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="7a906-147">Next steps</span></span>

[<span data-ttu-id="7a906-148">Configurar um nome de domínio personalizado para seu ponto de extremidade de Armazenamento de Blobs</span><span class="sxs-lookup"><span data-stu-id="7a906-148">Configure a custom domain name for your Blob storage endpoint</span></span>](storage-custom-domain-name.md)
