---
title: 'Armazenamento Premium do Azure: projetado para desempenho | Microsoft Docs'
description: "Crie aplicativos de alto desempenho usando o Armazenamento Premium do Azure. O Armazenamento Premium dá suporte ao disco de alto desempenho e baixa latência para cargas de trabalho que usam muita E/S em execução em máquinas virtuais do Azure."
services: storage
documentationcenter: na
author: aungoo-msft
manager: tadb
editor: tysonn
ms.assetid: e6a409c3-d31a-4704-a93c-0a04fdc95960
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/27/2017
ms.author: aungoo
ms.openlocfilehash: 7bd38be9f8e1160ebf0d7c5ed51fd31d89481881
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/11/2017
---
# <a name="azure-premium-storage-design-for-high-performance"></a><span data-ttu-id="0f309-104">Armazenamento Premium do Azure: projeto para alto desempenho</span><span class="sxs-lookup"><span data-stu-id="0f309-104">Azure Premium Storage: Design for High Performance</span></span>
## <a name="overview"></a><span data-ttu-id="0f309-105">Visão geral</span><span class="sxs-lookup"><span data-stu-id="0f309-105">Overview</span></span>
<span data-ttu-id="0f309-106">Este artigo fornece diretrizes para a criação de aplicativos de alto desempenho usando o Armazenamento Premium do Azure.</span><span class="sxs-lookup"><span data-stu-id="0f309-106">This article provides guidelines for building high performance applications using Azure Premium Storage.</span></span> <span data-ttu-id="0f309-107">Você pode usar as instruções fornecidas neste documento combinadas com as práticas recomendadas de desempenho aplicáveis às tecnologias usadas pelo aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f309-107">You can use the instructions provided in this document combined with performance best practices applicable to technologies used by your application.</span></span> <span data-ttu-id="0f309-108">Para ilustrar as diretrizes, usamos o SQL Server em execução no Armazenamento Premium como exemplo em todo este documento.</span><span class="sxs-lookup"><span data-stu-id="0f309-108">To illustrate the guidelines, we have used SQL Server running on Premium Storage as an example throughout this document.</span></span>

<span data-ttu-id="0f309-109">Embora, neste artigo, tenhamos abordado cenários da camada de Armazenamento, você precisará otimizar a camada de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f309-109">While we address performance scenarios for the Storage layer in this article, you will need to optimize the application layer.</span></span> <span data-ttu-id="0f309-110">Por exemplo, se estiver hospedando um Farm do SharePoint no Armazenamento Premium do Azure, você poderá usar os exemplos do SQL Server deste artigo para otimizar o servidor de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="0f309-110">For example, if you are hosting a SharePoint Farm on Azure Premium Storage, you can use the SQL Server examples from this article to optimize the database server.</span></span> <span data-ttu-id="0f309-111">Adicionalmente, otimize o servidor Web e o servidor de Aplicativos do Farm do SharePoint para obter o melhor desempenho possível.</span><span class="sxs-lookup"><span data-stu-id="0f309-111">Additionally, optimize the SharePoint Farm's Web server and Application server to get the most performance.</span></span>

<span data-ttu-id="0f309-112">Este artigo ajudará a responder às perguntas comuns a seguir sobre como otimizar o desempenho de aplicativos no Armazenamento Premium do Azure.</span><span class="sxs-lookup"><span data-stu-id="0f309-112">This article will help answer following common questions about optimizing application performance on Azure Premium Storage,</span></span>

* <span data-ttu-id="0f309-113">Como avaliar o desempenho do aplicativo?</span><span class="sxs-lookup"><span data-stu-id="0f309-113">How to measure your application performance?</span></span>  
* <span data-ttu-id="0f309-114">Por que você não está vendo o alto desempenho esperado?</span><span class="sxs-lookup"><span data-stu-id="0f309-114">Why are you not seeing expected high performance?</span></span>  
* <span data-ttu-id="0f309-115">Quais fatores influenciam o desempenho do aplicativo no Armazenamento Premium?</span><span class="sxs-lookup"><span data-stu-id="0f309-115">Which factors influence your application performance on Premium Storage?</span></span>  
* <span data-ttu-id="0f309-116">Como esses fatores influenciam o desempenho do aplicativo no Armazenamento Premium?</span><span class="sxs-lookup"><span data-stu-id="0f309-116">How do these factors influence performance of your application on Premium Storage?</span></span>  
* <span data-ttu-id="0f309-117">Como você pode otimizar para IOPS, Largura de Banda e Latência?</span><span class="sxs-lookup"><span data-stu-id="0f309-117">How can you optimize for IOPS, Bandwidth and Latency?</span></span>  

<span data-ttu-id="0f309-118">Fornecemos estas diretrizes especificamente para Armazenamento Premium porque as cargas de trabalho em execução no Armazenamento Premium são altamente sensíveis ao desempenho.</span><span class="sxs-lookup"><span data-stu-id="0f309-118">We have provided these guidelines specifically for Premium Storage because workloads running on Premium Storage are highly performance sensitive.</span></span> <span data-ttu-id="0f309-119">Fornecemos exemplos onde apropriado.</span><span class="sxs-lookup"><span data-stu-id="0f309-119">We have provided examples where appropriate.</span></span> <span data-ttu-id="0f309-120">Também é possível aplicar algumas destas diretrizes a aplicativos em execução nas VMs da IaaS com discos de Armazenamento Padrão.</span><span class="sxs-lookup"><span data-stu-id="0f309-120">You can also apply some of these guidelines to applications running on IaaS VMs with Standard Storage disks.</span></span>

<span data-ttu-id="0f309-121">Antes de começar, se você não estiver familiarizado com o Armazenamento Premium, primeiramente leia os artigos [Armazenamento Premium: armazenamento de alto desempenho para cargas de trabalho da máquina virtual do Azure](storage-premium-storage.md) e [Metas de desempenho e escalabilidade do Armazenamento do Azure](storage-scalability-targets.md).</span><span class="sxs-lookup"><span data-stu-id="0f309-121">Before you begin, if you are new to Premium Storage, first read the [Premium Storage: High-Performance Storage for Azure Virtual Machine Workloads](storage-premium-storage.md) and [Azure Storage Scalability and Performance Targets](storage-scalability-targets.md) articles.</span></span>

## <a name="application-performance-indicators"></a><span data-ttu-id="0f309-122">Indicadores de desempenho de aplicativo</span><span class="sxs-lookup"><span data-stu-id="0f309-122">Application Performance Indicators</span></span>
<span data-ttu-id="0f309-123">Avaliamos o desempenho de um aplicativo como bom ou ruim usando indicadores de desempenho como estes: rapidez com que um aplicativo está processando uma solicitação de usuário, volume de dados que um aplicativo está processando por solicitação, quantidade de solicitações que um aplicativo está processando em um intervalo específico, quanto tempo um usuário precisa aguardar para obter uma resposta depois de enviar uma solicitação.</span><span class="sxs-lookup"><span data-stu-id="0f309-123">We assess whether an application is performing well or not using performance indicators like, how fast an application is processing a user request, how much data an application is processing per request, how many requests is an application processing in a specific period of time, how long a user has to wait to get a response after submitting their request.</span></span> <span data-ttu-id="0f309-124">Os termos técnicos para esses indicadores de desempenho são IOPS, Taxa de Transferência ou Largura de Banda e Latência.</span><span class="sxs-lookup"><span data-stu-id="0f309-124">The technical terms for these performance indicators are, IOPS, Throughput or Bandwidth, and Latency.</span></span>

<span data-ttu-id="0f309-125">Nesta seção, discutiremos os indicadores comuns de desempenho no contexto do Armazenamento Premium.</span><span class="sxs-lookup"><span data-stu-id="0f309-125">In this section, we will discuss the common performance indicators in the context of Premium Storage.</span></span> <span data-ttu-id="0f309-126">Na seção a seguir, Coletando os requisitos de aplicativo, você aprenderá como avaliar esses indicadores de desempenho para seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f309-126">In the following section, Gathering Application Requirements, you will learn how to measure these performance indicators for your application.</span></span> <span data-ttu-id="0f309-127">Mais adiante, em Otimizando o desempenho do aplicativo, você saberá mais sobre os fatores que afetam esses indicadores de desempenho e as recomendações para otimizá-los.</span><span class="sxs-lookup"><span data-stu-id="0f309-127">Later in Optimizing Application Performance, you will learn about the factors affecting these performance indicators and recommendations to optimize them.</span></span>

## <a name="iops"></a><span data-ttu-id="0f309-128">IOPS</span><span class="sxs-lookup"><span data-stu-id="0f309-128">IOPS</span></span>
<span data-ttu-id="0f309-129">O IOPS é o número de solicitações que seu aplicativo está enviando para os discos de armazenamento em um segundo.</span><span class="sxs-lookup"><span data-stu-id="0f309-129">IOPS is number of requests that your application is sending to the storage disks in one second.</span></span> <span data-ttu-id="0f309-130">Uma operação de entrada/saída pode ser de leitura ou gravação, sequencial ou aleatória.</span><span class="sxs-lookup"><span data-stu-id="0f309-130">An input/output operation could be read or write, sequential or random.</span></span> <span data-ttu-id="0f309-131">Os aplicativos OLTP, como um site varejista online, precisam processar muitas solicitações simultâneas de usuários instantaneamente.</span><span class="sxs-lookup"><span data-stu-id="0f309-131">OLTP applications like an online retail website need to process many concurrent user requests immediately.</span></span> <span data-ttu-id="0f309-132">As solicitações do usuário são transações de banco de dados com inserções e atualizações intensas, que o aplicativo deve processar rapidamente.</span><span class="sxs-lookup"><span data-stu-id="0f309-132">The user requests are insert and update intensive database transactions, which the application must process quickly.</span></span> <span data-ttu-id="0f309-133">Desse modo, os aplicativos OLTP exigem IOPS bastante alta.</span><span class="sxs-lookup"><span data-stu-id="0f309-133">Therefore, OLTP applications require very high IOPS.</span></span> <span data-ttu-id="0f309-134">Tais aplicativos tratam milhões de solicitações de E/S aleatórias e pequenas.</span><span class="sxs-lookup"><span data-stu-id="0f309-134">Such applications handle millions of small and random IO requests.</span></span> <span data-ttu-id="0f309-135">Se você tiver um aplicativo desse tipo, será preciso projetar a infraestrutura do aplicativo para otimização de IOPS.</span><span class="sxs-lookup"><span data-stu-id="0f309-135">If you have such an application, you must design the application infrastructure to optimize for IOPS.</span></span> <span data-ttu-id="0f309-136">Na seção posterior, *Otimizando o desempenho do aplicativo*, vamos abordar em detalhes os fatores que devem ser considerados para obter IOPS alta.</span><span class="sxs-lookup"><span data-stu-id="0f309-136">In the later section, *Optimizing Application Performance*, we discuss in detail all the factors that you must consider to get high IOPS.</span></span>

<span data-ttu-id="0f309-137">Quando você anexa um disco do armazenamento premium à sua VM de alta escala, o Azure provisiona um número garantido de IOPS de acordo com a especificação do disco.</span><span class="sxs-lookup"><span data-stu-id="0f309-137">When you attach a premium storage disk to your high scale VM, Azure provisions for you a guaranteed number of IOPS as per the disk specification.</span></span> <span data-ttu-id="0f309-138">Por exemplo, um disco P50 provisiona 7500 IOPS.</span><span class="sxs-lookup"><span data-stu-id="0f309-138">For example, a P50 disk provisions 7500 IOPS.</span></span> <span data-ttu-id="0f309-139">Cada tamanho de VM de alta escala também tem um limite específico de IOPS que ela pode manter.</span><span class="sxs-lookup"><span data-stu-id="0f309-139">Each high scale VM size also has a specific IOPS limit that it can sustain.</span></span> <span data-ttu-id="0f309-140">Por exemplo, uma VM GS5 Padrão tem um limite de 80.000 IOPS.</span><span class="sxs-lookup"><span data-stu-id="0f309-140">For example, a Standard GS5 VM has 80,000 IOPS limit.</span></span>

## <a name="throughput"></a><span data-ttu-id="0f309-141">Taxa de transferência</span><span class="sxs-lookup"><span data-stu-id="0f309-141">Throughput</span></span>
<span data-ttu-id="0f309-142">A Taxa de Transferência ou Largura de Banda é o volume de dados que o aplicativo está enviando aos discos de armazenamento em um intervalo especificado.</span><span class="sxs-lookup"><span data-stu-id="0f309-142">Throughput or Bandwidth is the amount of data that your application is sending to the storage disks in a specified interval.</span></span> <span data-ttu-id="0f309-143">Se o aplicativo estiver executando operações de entrada/saída com tamanhos grandes de unidade de E/S, ele exigirá Taxa de Transferência alta.</span><span class="sxs-lookup"><span data-stu-id="0f309-143">If your application is performing input/output operations with large IO unit sizes, it requires high Throughput.</span></span> <span data-ttu-id="0f309-144">Os aplicativos de data warehouse tendem a emitir operações de alta verificação que acessam grandes partes de dados por vez e geralmente executam operações em massa.</span><span class="sxs-lookup"><span data-stu-id="0f309-144">Data warehouse applications tend to issue scan intensive operations that access large portions of data at a time and commonly perform bulk operations.</span></span> <span data-ttu-id="0f309-145">Em outras palavras, tais aplicativos exigem Taxa de Transferência mais alta.</span><span class="sxs-lookup"><span data-stu-id="0f309-145">In other words, such applications require higher Throughput.</span></span> <span data-ttu-id="0f309-146">Caso você tenha um aplicativo desse tipo, será preciso projetar sua infraestrutura para otimização da Taxa de Transferência.</span><span class="sxs-lookup"><span data-stu-id="0f309-146">If you have such an application, you must design its infrastructure to optimize for Throughput.</span></span> <span data-ttu-id="0f309-147">Na próxima seção, abordaremos em detalhes os fatores que você deve ajustar para conseguir isso.</span><span class="sxs-lookup"><span data-stu-id="0f309-147">In the next section, we discuss in detail the factors you must tune to achieve this.</span></span>

<span data-ttu-id="0f309-148">Quando você anexa um disco do armazenamento premium a uma VM de alta escala, o Azure provisiona Taxa de Transferência de acordo com a especificação do disco.</span><span class="sxs-lookup"><span data-stu-id="0f309-148">When you attach a premium storage disk to a high scale VM, Azure provisions Throughput as per that disk specification.</span></span> <span data-ttu-id="0f309-149">Por exemplo, um disco P50 provisiona Taxa de Transferência de disco de 250 MB por segundo.</span><span class="sxs-lookup"><span data-stu-id="0f309-149">For example, a P50 disk provisions 250 MB per second disk Throughput.</span></span> <span data-ttu-id="0f309-150">Cada tamanho de VM de alta escala também tem um limite específico de Taxa de Transferência que ela pode manter.</span><span class="sxs-lookup"><span data-stu-id="0f309-150">Each high scale VM size also has as specific Throughput limit that it can sustain.</span></span> <span data-ttu-id="0f309-151">Por exemplo, a VM GS5 padrão tem uma Taxa de Transferência máxima de 2.000 MB por segundo.</span><span class="sxs-lookup"><span data-stu-id="0f309-151">For example, Standard GS5 VM has a maximum throughput of 2,000 MB per second.</span></span> 

<span data-ttu-id="0f309-152">Há uma relação entre a Taxa de Transferência e a IOPS, como mostrado na fórmula abaixo.</span><span class="sxs-lookup"><span data-stu-id="0f309-152">There is a relation between Throughput and IOPS as shown in the formula below.</span></span>

![](media/storage-premium-storage-performance/image1.png)

<span data-ttu-id="0f309-153">Portanto, é importante determinar os valores ideais de Taxa de Transferência e IOPS que o aplicativo exige.</span><span class="sxs-lookup"><span data-stu-id="0f309-153">Therefore, it is important to determine the optimal Throughput and IOPS values that your application requires.</span></span> <span data-ttu-id="0f309-154">Ao tentar otimizar um deles, o outro também é afetado.</span><span class="sxs-lookup"><span data-stu-id="0f309-154">As you try to optimize one, the other also gets affected.</span></span> <span data-ttu-id="0f309-155">Em uma seção mais adiante, *Otimizando o desempenho do aplicativo*, abordaremos em mais detalhes como otimizar a IOPS e Taxa de Transferência.</span><span class="sxs-lookup"><span data-stu-id="0f309-155">In a later section, *Optimizing Application Performance*, we will discuss in more details about optimizing IOPS and Throughput.</span></span>

## <a name="latency"></a><span data-ttu-id="0f309-156">Latência</span><span class="sxs-lookup"><span data-stu-id="0f309-156">Latency</span></span>
<span data-ttu-id="0f309-157">A Latência é o tempo que leva para um aplicativo receber uma única solicitação, enviá-la aos discos de armazenamento e enviar a resposta ao cliente.</span><span class="sxs-lookup"><span data-stu-id="0f309-157">Latency is the time it takes an application to receive a single request, send it to the storage disks and send the response to the client.</span></span> <span data-ttu-id="0f309-158">Essa é uma medida essencial do desempenho de um aplicativo, além de IOPS e da Taxa de Transferência.</span><span class="sxs-lookup"><span data-stu-id="0f309-158">This is a critical measure of an application's performance in addition to IOPS and Throughput.</span></span> <span data-ttu-id="0f309-159">A Latência de um disco do Armazenamento Premium é o tempo que se leva para recuperar informações de uma solicitação e comunicá-la de volta ao aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f309-159">The Latency of a premium storage disk is the time it takes to retrieve the information for a request and communicate it back to your application.</span></span> <span data-ttu-id="0f309-160">O Armazenamento Premium fornece baixas latências consistentes.</span><span class="sxs-lookup"><span data-stu-id="0f309-160">Premium Storage provides consistent low latencies.</span></span> <span data-ttu-id="0f309-161">Ao habilitar o cache do host ReadOnly nos discos do Armazenamento Premium, você obtém latência de leitura mais baixa.</span><span class="sxs-lookup"><span data-stu-id="0f309-161">If you enable ReadOnly host caching on premium storage disks, you can get much lower read latency.</span></span> <span data-ttu-id="0f309-162">Abordaremos o Cache de Disco em mais detalhes na seção *Otimizando o desempenho do aplicativo*.</span><span class="sxs-lookup"><span data-stu-id="0f309-162">We will discuss Disk Caching in more detail in later section on *Optimizing Application Performance*.</span></span>

<span data-ttu-id="0f309-163">Quando você otimiza o aplicativo para obter IOPS e Taxa de Transferência mais altas, a Latência do aplicativo também é afetada.</span><span class="sxs-lookup"><span data-stu-id="0f309-163">When you are optimizing your application to get higher IOPS and Throughput, it will affect the Latency of your application.</span></span> <span data-ttu-id="0f309-164">Depois de ajustar o desempenho do aplicativo, sempre avalie a latência do aplicativo para evitar comportamento inesperado de alta latência.</span><span class="sxs-lookup"><span data-stu-id="0f309-164">After tuning the application performance, always evaluate the Latency of the application to avoid unexpected high latency behavior.</span></span>

## <a name="gather-application-performance-requirements"></a><span data-ttu-id="0f309-165">Entender os requisitos de desempenho do aplicativo</span><span class="sxs-lookup"><span data-stu-id="0f309-165">Gather Application Performance Requirements</span></span>
<span data-ttu-id="0f309-166">A primeira etapa na criação de aplicativos de alto desempenho a serem executados no Armazenamento Premium do Azure é entender os requisitos de desempenho do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f309-166">The first step in designing high performance applications running on Azure Premium Storage is, to understand the performance requirements of your application.</span></span> <span data-ttu-id="0f309-167">Depois de entender os requisitos de desempenho, você pode otimizar o aplicativo para obter o desempenho ideal.</span><span class="sxs-lookup"><span data-stu-id="0f309-167">After you gather performance requirements, you can optimize your application to achieve the most optimal performance.</span></span>

<span data-ttu-id="0f309-168">Na seção anterior, explicamos os indicadores comuns de desempenho: IOPS, Taxa de Transferência e Latência.</span><span class="sxs-lookup"><span data-stu-id="0f309-168">In the previous section, we explained the common performance indicators, IOPS, Throughput and Latency.</span></span> <span data-ttu-id="0f309-169">Você deve identificar quais desses indicadores de desempenho são essenciais para o aplicativo proporcionar a experiência desejada ao usuário.</span><span class="sxs-lookup"><span data-stu-id="0f309-169">You must identify which of these performance indicators are critical to your application to deliver the desired user experience.</span></span> <span data-ttu-id="0f309-170">Por exemplo, a IOPS alta é mais importante para aplicativos OLTP que processam milhões de transações em um segundo.</span><span class="sxs-lookup"><span data-stu-id="0f309-170">For example, high IOPS matters most to OLTP applications processing millions of transactions in a second.</span></span> <span data-ttu-id="0f309-171">Já a Taxa de Transferência alta é essencial para aplicativos de data warehouse que processam grandes volumes de dados em um segundo.</span><span class="sxs-lookup"><span data-stu-id="0f309-171">Whereas, high Throughput is critical for Data Warehouse applications processing large amounts of data in a second.</span></span> <span data-ttu-id="0f309-172">A Latência extremamente baixa é essencial para aplicativos em tempo real, como sites de streaming de vídeo ao vivo.</span><span class="sxs-lookup"><span data-stu-id="0f309-172">Extremely low Latency is crucial for real-time applications like live video streaming websites.</span></span>

<span data-ttu-id="0f309-173">Em seguida, avalie os requisitos de desempenho máximo do aplicativo durante todo o seu ciclo de vida.</span><span class="sxs-lookup"><span data-stu-id="0f309-173">Next, measure the maximum performance requirements of your application throughout its lifetime.</span></span> <span data-ttu-id="0f309-174">Use a lista de verificação de exemplo como ponto de partida.</span><span class="sxs-lookup"><span data-stu-id="0f309-174">Use the sample checklist below as a start.</span></span> <span data-ttu-id="0f309-175">Registre os requisitos de desempenho máximo durante os períodos de carga de trabalho normais, de pico e fora do horário de expediente.</span><span class="sxs-lookup"><span data-stu-id="0f309-175">Record the maximum performance requirements during normal, peak and off-hours workload periods.</span></span> <span data-ttu-id="0f309-176">Ao identificar os requisitos para todos os níveis de cargas de trabalho, você poderá determinar o requisito de desempenho geral do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f309-176">By identifying requirements for all workloads levels, you will be able to determine the overall performance requirement of your application.</span></span> <span data-ttu-id="0f309-177">Por exemplo, a carga de trabalho normal de um site de comércio eletrônico serão as transações feitas durante a maioria dos dias em um ano.</span><span class="sxs-lookup"><span data-stu-id="0f309-177">For example, the normal workload of an e-commerce website will be the transactions it serves during most days in a year.</span></span> <span data-ttu-id="0f309-178">A carga de trabalho de pico do site será composta das transações atendidas no fim do ano ou em datas especiais.</span><span class="sxs-lookup"><span data-stu-id="0f309-178">The peak workload of the website will be the transactions it serves during holiday season or special sale events.</span></span> <span data-ttu-id="0f309-179">A carga de trabalho de pico geralmente ocorre por um tempo limitado, mas pode exigir que o aplicativo seja dimensionado para duas ou três vezes de sua operação normal.</span><span class="sxs-lookup"><span data-stu-id="0f309-179">The peak workload is typically experienced for a limited period, but can require your application to scale two or more times its normal operation.</span></span> <span data-ttu-id="0f309-180">Descubra os requisitos de percentil 50, percentil 90 e percentil 99.</span><span class="sxs-lookup"><span data-stu-id="0f309-180">Find out the 50 percentile, 90 percentile and 99 percentile requirements.</span></span> <span data-ttu-id="0f309-181">Isso ajuda a filtrar as exceções nos requisitos de desempenho e você pode concentrar seus esforços na otimização dos valores certos.</span><span class="sxs-lookup"><span data-stu-id="0f309-181">This helps filter out any outliers in the performance requirements and you can focus your efforts on optimizing for the right values.</span></span>

<span data-ttu-id="0f309-182">**Lista de verificação dos requisitos de desempenho do aplicativo**</span><span class="sxs-lookup"><span data-stu-id="0f309-182">**Application Performance Requirements Checklist**</span></span>

| <span data-ttu-id="0f309-183">**Requisitos de desempenho**</span><span class="sxs-lookup"><span data-stu-id="0f309-183">**Performance requirements**</span></span> | <span data-ttu-id="0f309-184">**Percentil 50**</span><span class="sxs-lookup"><span data-stu-id="0f309-184">**50 Percentile**</span></span> | <span data-ttu-id="0f309-185">**Percentil 90**</span><span class="sxs-lookup"><span data-stu-id="0f309-185">**90 Percentile**</span></span> | <span data-ttu-id="0f309-186">**Percentil 99**</span><span class="sxs-lookup"><span data-stu-id="0f309-186">**99  Percentile**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="0f309-187">Máx.</span><span class="sxs-lookup"><span data-stu-id="0f309-187">Max.</span></span> <span data-ttu-id="0f309-188">Transações por segundo</span><span class="sxs-lookup"><span data-stu-id="0f309-188">Transactions per second</span></span> | | | |
| <span data-ttu-id="0f309-189">% de operações de Leitura</span><span class="sxs-lookup"><span data-stu-id="0f309-189">% Read operations</span></span> | | | |
| <span data-ttu-id="0f309-190">% de operações de Gravação</span><span class="sxs-lookup"><span data-stu-id="0f309-190">% Write operations</span></span> | | | |
| <span data-ttu-id="0f309-191">% de operações Aleatórias</span><span class="sxs-lookup"><span data-stu-id="0f309-191">% Random operations</span></span> | | | |
| <span data-ttu-id="0f309-192">% de operações Sequenciais</span><span class="sxs-lookup"><span data-stu-id="0f309-192">% Sequential operations</span></span> | | | |
| <span data-ttu-id="0f309-193">Tamanho da solicitação de E/S</span><span class="sxs-lookup"><span data-stu-id="0f309-193">IO request size</span></span> | | | |
| <span data-ttu-id="0f309-194">Taxa de transferência média</span><span class="sxs-lookup"><span data-stu-id="0f309-194">Average Throughput</span></span> | | | |
| <span data-ttu-id="0f309-195">Máx.</span><span class="sxs-lookup"><span data-stu-id="0f309-195">Max.</span></span> <span data-ttu-id="0f309-196">Taxa de transferência</span><span class="sxs-lookup"><span data-stu-id="0f309-196">Throughput</span></span> | | | |
| <span data-ttu-id="0f309-197">Mín.</span><span class="sxs-lookup"><span data-stu-id="0f309-197">Min.</span></span> <span data-ttu-id="0f309-198">Latência</span><span class="sxs-lookup"><span data-stu-id="0f309-198">Latency</span></span> | | | |
| <span data-ttu-id="0f309-199">Latência Média</span><span class="sxs-lookup"><span data-stu-id="0f309-199">Average Latency</span></span> | | | |
| <span data-ttu-id="0f309-200">Máx.</span><span class="sxs-lookup"><span data-stu-id="0f309-200">Max.</span></span> <span data-ttu-id="0f309-201">CPU</span><span class="sxs-lookup"><span data-stu-id="0f309-201">CPU</span></span> | | | |
| <span data-ttu-id="0f309-202">CPU Média</span><span class="sxs-lookup"><span data-stu-id="0f309-202">Average CPU</span></span> | | | |
| <span data-ttu-id="0f309-203">Máx.</span><span class="sxs-lookup"><span data-stu-id="0f309-203">Max.</span></span> <span data-ttu-id="0f309-204">Memória</span><span class="sxs-lookup"><span data-stu-id="0f309-204">Memory</span></span> | | | |
| <span data-ttu-id="0f309-205">Memória Média</span><span class="sxs-lookup"><span data-stu-id="0f309-205">Average Memory</span></span> | | | |
| <span data-ttu-id="0f309-206">Profundidade da Fila</span><span class="sxs-lookup"><span data-stu-id="0f309-206">Queue Depth</span></span> | | | |

> [!NOTE]
> <span data-ttu-id="0f309-207">você deve considerar o dimensionamento desses números com base no futuro crescimento esperado do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f309-207">You should consider scaling these numbers based on expected future growth of your application.</span></span> <span data-ttu-id="0f309-208">É uma boa ideia planejar o crescimento antecipadamente, pois pode ser mais difícil alterar a infraestrutura para melhorar o desempenho posteriormente.</span><span class="sxs-lookup"><span data-stu-id="0f309-208">It is a good idea to plan for growth ahead of time, because it could be harder to change the infrastructure for improving performance later.</span></span>
>
>

<span data-ttu-id="0f309-209">Se você já tiver um aplicativo e deseja passar para o Armazenamento Premium, antes de qualquer coisa, crie a lista de verificação acima para o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f309-209">If you have an existing application and want to move to Premium Storage, first build the checklist above for the existing application.</span></span> <span data-ttu-id="0f309-210">Em seguida, crie um protótipo do aplicativo no Armazenamento Premium e projete o aplicativo com base nas diretrizes descritas em *Otimizando o desempenho do aplicativo* em uma seção posterior deste documento.</span><span class="sxs-lookup"><span data-stu-id="0f309-210">Then, build a prototype of your application on Premium Storage and design the application based on guidelines described in *Optimizing Application Performance* in a later section of this document.</span></span> <span data-ttu-id="0f309-211">A próxima seção descreve as ferramentas que você pode usar para entender as medições de desempenho.</span><span class="sxs-lookup"><span data-stu-id="0f309-211">The next section describes the tools you can use to gather the performance measurements.</span></span>

<span data-ttu-id="0f309-212">Crie uma lista de verificação semelhante para o aplicativo existente do protótipo.</span><span class="sxs-lookup"><span data-stu-id="0f309-212">Create a checklist similar to your existing application for the prototype.</span></span> <span data-ttu-id="0f309-213">Usando ferramentas de Benchmark, você pode simular as cargas de trabalho e avaliar o desempenho no aplicativo do protótipo.</span><span class="sxs-lookup"><span data-stu-id="0f309-213">Using Benchmarking tools you can simulate the workloads and measure performance on the prototype application.</span></span> <span data-ttu-id="0f309-214">Consulte a seção [Parâmetros de comparação](#benchmarking) para saber mais.</span><span class="sxs-lookup"><span data-stu-id="0f309-214">See the section on [Benchmarking](#benchmarking) to learn more.</span></span> <span data-ttu-id="0f309-215">Com isso, você pode determinar se o Armazenamento Premium pode corresponder ou superar os requisitos de desempenho do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f309-215">By doing so you can determine whether Premium Storage can match or surpass your application performance requirements.</span></span> <span data-ttu-id="0f309-216">Em seguida, você pode implementar as mesmas diretrizes para o aplicativo de produção.</span><span class="sxs-lookup"><span data-stu-id="0f309-216">Then you can implement the same guidelines for your production application.</span></span>

### <a name="counters-to-measure-application-performance-requirements"></a><span data-ttu-id="0f309-217">Contadores para avaliar requisitos de desempenho do aplicativo</span><span class="sxs-lookup"><span data-stu-id="0f309-217">Counters to measure application performance requirements</span></span>
<span data-ttu-id="0f309-218">A melhor maneira de avaliar os requisitos de desempenho do aplicativo é usando as ferramentas de monitoramento de desempenho fornecidas pelo sistema operacional do servidor.</span><span class="sxs-lookup"><span data-stu-id="0f309-218">The best way to measure performance requirements of your application, is to use performance-monitoring tools provided by the operating system of the server.</span></span> <span data-ttu-id="0f309-219">Você pode usar o PerfMon para Windows e iostat para Linux.</span><span class="sxs-lookup"><span data-stu-id="0f309-219">You can use PerfMon for Windows and iostat for Linux.</span></span> <span data-ttu-id="0f309-220">Essas ferramentas capturam contadores correspondentes para cada medida explicada na seção acima.</span><span class="sxs-lookup"><span data-stu-id="0f309-220">These tools capture counters corresponding to each measure explained in the above section.</span></span> <span data-ttu-id="0f309-221">Você deve capturar os valores desses contadores quando o aplicativo está executando suas cargas de trabalho normais, de pico ou fora do expediente.</span><span class="sxs-lookup"><span data-stu-id="0f309-221">You must capture the values of these counters when your application is running its normal, peak and off-hours workloads.</span></span>

<span data-ttu-id="0f309-222">Os contadores do PerfMon estão disponíveis para processador, memória e cada disco lógico e físico do seu servidor.</span><span class="sxs-lookup"><span data-stu-id="0f309-222">The PerfMon counters are available for processor, memory and, each logical disk and physical disk of your server.</span></span> <span data-ttu-id="0f309-223">Quando você usa discos do Armazenamento Premium com uma VM, os contadores de disco físico são para cada disco do Armazenamento Premium e os contadores de disco lógico são para cada volume criado nos discos do Armazenamento Premium.</span><span class="sxs-lookup"><span data-stu-id="0f309-223">When you use premium storage disks with a VM, the physical disk counters are for each premium storage disk, and logical disk counters are for each volume created on the premium storage disks.</span></span> <span data-ttu-id="0f309-224">É preciso capturar os valores dos discos que hospedam a carga de trabalho do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f309-224">You must capture the values for the disks that host your application workload.</span></span> <span data-ttu-id="0f309-225">Se houver um mapeamento de um para um entre os discos lógicos e físicos, você poderá consultar os contadores de disco físico, caso contrário, consulte os contadores de disco lógico.</span><span class="sxs-lookup"><span data-stu-id="0f309-225">If there is a one to one mapping between logical and physical disks, you can refer to physical disk counters; otherwise refer to the logical disk counters.</span></span> <span data-ttu-id="0f309-226">No Linux, o comando iostat gera um relatório de utilização de CPU e disco.</span><span class="sxs-lookup"><span data-stu-id="0f309-226">On Linux, the iostat command generates a CPU and disk utilization report.</span></span> <span data-ttu-id="0f309-227">O relatório de utilização de disco fornece estatísticas por dispositivo físico ou partição.</span><span class="sxs-lookup"><span data-stu-id="0f309-227">The disk utilization report provides statistics per physical device or partition.</span></span> <span data-ttu-id="0f309-228">Se você tiver um servidor de banco de dados com seus dados e registrados em discos separados, colete esses dados de ambos os discos.</span><span class="sxs-lookup"><span data-stu-id="0f309-228">If you have a database server with its data and log on separate disks, collect this data for both disks.</span></span> <span data-ttu-id="0f309-229">A tabela abaixo descreve contadores de discos, processador e memória:</span><span class="sxs-lookup"><span data-stu-id="0f309-229">Below table describes counters for disks, processor and memory:</span></span>

| <span data-ttu-id="0f309-230">Contador</span><span class="sxs-lookup"><span data-stu-id="0f309-230">Counter</span></span> | <span data-ttu-id="0f309-231">Descrição</span><span class="sxs-lookup"><span data-stu-id="0f309-231">Description</span></span> | <span data-ttu-id="0f309-232">PerfMon</span><span class="sxs-lookup"><span data-stu-id="0f309-232">PerfMon</span></span> | <span data-ttu-id="0f309-233">Iostat</span><span class="sxs-lookup"><span data-stu-id="0f309-233">Iostat</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="0f309-234">**IOPS ou Transações por segundo**</span><span class="sxs-lookup"><span data-stu-id="0f309-234">**IOPS or Transactions per second**</span></span> |<span data-ttu-id="0f309-235">Número de solicitações de E/S emitidas para o disco de armazenamento por segundo.</span><span class="sxs-lookup"><span data-stu-id="0f309-235">Number of I/O requests issued to the storage disk per second.</span></span> |<span data-ttu-id="0f309-236">Leituras de Disco/s </span><span class="sxs-lookup"><span data-stu-id="0f309-236">Disk Reads/sec</span></span> <br> <span data-ttu-id="0f309-237">Gravações de Disco/s</span><span class="sxs-lookup"><span data-stu-id="0f309-237">Disk Writes/sec</span></span> |<span data-ttu-id="0f309-238">tps </span><span class="sxs-lookup"><span data-stu-id="0f309-238">tps</span></span> <br> <span data-ttu-id="0f309-239">r/s </span><span class="sxs-lookup"><span data-stu-id="0f309-239">r/s</span></span> <br> <span data-ttu-id="0f309-240">w/s</span><span class="sxs-lookup"><span data-stu-id="0f309-240">w/s</span></span> |
| <span data-ttu-id="0f309-241">**Leituras e gravações de discos**</span><span class="sxs-lookup"><span data-stu-id="0f309-241">**Disk Reads and Writes**</span></span> |<span data-ttu-id="0f309-242">% de operações de Leitura e Gravação executadas no disco.</span><span class="sxs-lookup"><span data-stu-id="0f309-242">% of Reads and Write operations performed on the disk.</span></span> |<span data-ttu-id="0f309-243">% de Tempo de Leitura de Disco </span><span class="sxs-lookup"><span data-stu-id="0f309-243">% Disk Read Time</span></span> <br> <span data-ttu-id="0f309-244">% de Tempo de Gravação de Disco</span><span class="sxs-lookup"><span data-stu-id="0f309-244">% Disk Write Time</span></span> |<span data-ttu-id="0f309-245">r/s </span><span class="sxs-lookup"><span data-stu-id="0f309-245">r/s</span></span> <br> <span data-ttu-id="0f309-246">w/s</span><span class="sxs-lookup"><span data-stu-id="0f309-246">w/s</span></span> |
| <span data-ttu-id="0f309-247">**Taxa de transferência**</span><span class="sxs-lookup"><span data-stu-id="0f309-247">**Throughput**</span></span> |<span data-ttu-id="0f309-248">Volume de dados lidos ou gravados no disco por segundo.</span><span class="sxs-lookup"><span data-stu-id="0f309-248">Amount of data read from or written to the disk per second.</span></span> |<span data-ttu-id="0f309-249">Bytes Lidos no Disco/s </span><span class="sxs-lookup"><span data-stu-id="0f309-249">Disk Read Bytes/sec</span></span> <br> <span data-ttu-id="0f309-250">Bytes Gravados no Disco/s</span><span class="sxs-lookup"><span data-stu-id="0f309-250">Disk Write Bytes/sec</span></span> |<span data-ttu-id="0f309-251">kB_read/s</span><span class="sxs-lookup"><span data-stu-id="0f309-251">kB_read/s</span></span> <br> <span data-ttu-id="0f309-252">kB_wrtn/s</span><span class="sxs-lookup"><span data-stu-id="0f309-252">kB_wrtn/s</span></span> |
| <span data-ttu-id="0f309-253">**Latência**</span><span class="sxs-lookup"><span data-stu-id="0f309-253">**Latency**</span></span> |<span data-ttu-id="0f309-254">Tempo total para concluir uma solicitação de E/S no disco.</span><span class="sxs-lookup"><span data-stu-id="0f309-254">Total time to complete a disk IO request.</span></span> |<span data-ttu-id="0f309-255">Média por Segundo do Disco/Leitura </span><span class="sxs-lookup"><span data-stu-id="0f309-255">Average Disk sec/Read</span></span> <br> <span data-ttu-id="0f309-256">Média por segundo do disco/Gravação</span><span class="sxs-lookup"><span data-stu-id="0f309-256">Average disk sec/Write</span></span> |<span data-ttu-id="0f309-257">await </span><span class="sxs-lookup"><span data-stu-id="0f309-257">await</span></span> <br> <span data-ttu-id="0f309-258">svctm</span><span class="sxs-lookup"><span data-stu-id="0f309-258">svctm</span></span> |
| <span data-ttu-id="0f309-259">**Tamanho de E/S**</span><span class="sxs-lookup"><span data-stu-id="0f309-259">**IO size**</span></span> |<span data-ttu-id="0f309-260">O tamanho das solicitações de E/S emitidas para os discos de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="0f309-260">The size of I/O requests issues to the storage disks.</span></span> |<span data-ttu-id="0f309-261">Média de Bytes do Disco/Leitura </span><span class="sxs-lookup"><span data-stu-id="0f309-261">Average Disk Bytes/Read</span></span> <br> <span data-ttu-id="0f309-262">Média de Bytes do Disco/Gravação</span><span class="sxs-lookup"><span data-stu-id="0f309-262">Average Disk Bytes/Write</span></span> |<span data-ttu-id="0f309-263">avgrq-sz</span><span class="sxs-lookup"><span data-stu-id="0f309-263">avgrq-sz</span></span> |
| <span data-ttu-id="0f309-264">**Profundidade da Fila**</span><span class="sxs-lookup"><span data-stu-id="0f309-264">**Queue Depth**</span></span> |<span data-ttu-id="0f309-265">Número de solicitações de E/S pendentes aguardando serem lidas ou gravadas no disco de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="0f309-265">Number of outstanding I/O requests waiting to be read form or written to the storage disk.</span></span> |<span data-ttu-id="0f309-266">Comprimento da Fila do Disco Atual</span><span class="sxs-lookup"><span data-stu-id="0f309-266">Current Disk Queue Length</span></span> |<span data-ttu-id="0f309-267">avgqu-sz</span><span class="sxs-lookup"><span data-stu-id="0f309-267">avgqu-sz</span></span> |
| <span data-ttu-id="0f309-268">**IOPS Máxima**</span><span class="sxs-lookup"><span data-stu-id="0f309-268">**Max. Memory**</span></span> |<span data-ttu-id="0f309-269">Quantidade de memória exigida para execução perfeita do aplicativo</span><span class="sxs-lookup"><span data-stu-id="0f309-269">Amount of memory required to run application smoothly</span></span> |<span data-ttu-id="0f309-270">% de Bytes Confirmados em Uso</span><span class="sxs-lookup"><span data-stu-id="0f309-270">% Committed Bytes in Use</span></span> |<span data-ttu-id="0f309-271">Usar o vmstat</span><span class="sxs-lookup"><span data-stu-id="0f309-271">Use vmstat</span></span> |
| <span data-ttu-id="0f309-272">**IOPS Máxima**</span><span class="sxs-lookup"><span data-stu-id="0f309-272">**Max. CPU**</span></span> |<span data-ttu-id="0f309-273">Quantidade de CPU exigida para a execução perfeita do aplicativo</span><span class="sxs-lookup"><span data-stu-id="0f309-273">Amount CPU required to run application smoothly</span></span> |<span data-ttu-id="0f309-274">% do Tempo do Processador</span><span class="sxs-lookup"><span data-stu-id="0f309-274">% Processor time</span></span> |<span data-ttu-id="0f309-275">%util</span><span class="sxs-lookup"><span data-stu-id="0f309-275">%util</span></span> |

<span data-ttu-id="0f309-276">Saiba mais sobre o [iostat](http://linuxcommand.org/man_pages/iostat1.html) e [PerfMon](https://msdn.microsoft.com/library/aa645516.aspx).</span><span class="sxs-lookup"><span data-stu-id="0f309-276">Learn more about [iostat](http://linuxcommand.org/man_pages/iostat1.html) and [PerfMon](https://msdn.microsoft.com/library/aa645516.aspx).</span></span>

## <a name="optimizing-application-performance"></a><span data-ttu-id="0f309-277">Otimizando o desempenho do aplicativo</span><span class="sxs-lookup"><span data-stu-id="0f309-277">Optimizing Application Performance</span></span>
<span data-ttu-id="0f309-278">Os principais fatores que influenciam o desempenho de um aplicativo em execução no Armazenamento Premium são nativos das solicitações de E/S, do tamanho da VM, do tamanho do disco, do número de discos, do cache do disco, do multithreading e da profundidade da fila.</span><span class="sxs-lookup"><span data-stu-id="0f309-278">The main factors that influence performance of an application running on Premium Storage are Nature of IO Requests, VM size, Disk size, Number of disks, Disk Caching, Multithreading and Queue Depth.</span></span> <span data-ttu-id="0f309-279">Você pode controlar alguns desses fatores com botões fornecidos pelo sistema.</span><span class="sxs-lookup"><span data-stu-id="0f309-279">You can control some of these factors with knobs provided by the system.</span></span> <span data-ttu-id="0f309-280">A maioria dos aplicativos talvez não apresente uma opção para alterar o tamanho de E/S e a profundidade da fila diretamente.</span><span class="sxs-lookup"><span data-stu-id="0f309-280">Most applications may not give you an option to alter the IO size and Queue Depth directly.</span></span> <span data-ttu-id="0f309-281">Por exemplo, se você estiver usando o SQL Server, não será possível escolher a profundidade de fila e o tamanho de E/S.</span><span class="sxs-lookup"><span data-stu-id="0f309-281">For example, if you are using SQL Server, you cannot choose the IO size and queue depth.</span></span> <span data-ttu-id="0f309-282">O SQL Server escolhe os valores ideais do tamanho de E/S e da profundidade da fila para obter o melhor desempenho.</span><span class="sxs-lookup"><span data-stu-id="0f309-282">SQL Server chooses the optimal IO size and queue depth values to get the most performance.</span></span> <span data-ttu-id="0f309-283">É importante compreender os efeitos de ambos os tipos de fator no desempenho do aplicativo para que você possa provisionar recursos apropriados que atendam às necessidades de desempenho.</span><span class="sxs-lookup"><span data-stu-id="0f309-283">It is important to understand the effects of both types of factors on your application performance, so that you can provision appropriate resources to meet performance needs.</span></span>

<span data-ttu-id="0f309-284">Ao longo desta seção, consulte a lista de verificação de requisitos de aplicativo que você criou para identificar quanto você precisa para otimizar o desempenho do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f309-284">Throughout this section, refer to the application requirements checklist that you created, to identify how much you need to optimize your application performance.</span></span> <span data-ttu-id="0f309-285">Com base nisso, você poderá determinar quais fatores dessa seção será preciso ajustar.</span><span class="sxs-lookup"><span data-stu-id="0f309-285">Based on that, you will be able to determine which factors from this section you will need to tune.</span></span> <span data-ttu-id="0f309-286">Para ver os efeitos de cada fator no desempenho do aplicativo, execute os parâmetros de comparação na configuração do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f309-286">To witness the effects of each factor on your application performance, run benchmarking tools on your application setup.</span></span> <span data-ttu-id="0f309-287">Consulte a seção [Parâmetros de comparação](#Benchmarking) no fim deste artigo para ver as etapas para executar ferramentas comuns de comparação em VMs do Windows e do Linux.</span><span class="sxs-lookup"><span data-stu-id="0f309-287">Refer to the [Benchmarking](#Benchmarking) section at the end of this article for steps to run common benchmarking tools on Windows and Linux VMs.</span></span>

### <a name="optimizing-iops-throughput-and-latency-at-a-glance"></a><span data-ttu-id="0f309-288">Otimizando a IOPS, a Taxa de Transferência e a latência em segundos</span><span class="sxs-lookup"><span data-stu-id="0f309-288">Optimizing IOPS, Throughput and Latency at a glance</span></span>
<span data-ttu-id="0f309-289">A tabela abaixo resume os fatores de desempenho e as etapas para otimizar a IOPS, Taxa de Transferência e Latência.</span><span class="sxs-lookup"><span data-stu-id="0f309-289">The table below summarizes all the performance factors and the steps to optimize IOPS, Throughput and Latency.</span></span> <span data-ttu-id="0f309-290">As seções a seguir deste resumo descreverão cada fator mais detalhadamente.</span><span class="sxs-lookup"><span data-stu-id="0f309-290">The sections following this summary will describe each factor is much more depth.</span></span>

| &nbsp; | <span data-ttu-id="0f309-291">**IOPS**</span><span class="sxs-lookup"><span data-stu-id="0f309-291">**IOPS**</span></span> | <span data-ttu-id="0f309-292">**Taxa de transferência**</span><span class="sxs-lookup"><span data-stu-id="0f309-292">**Throughput**</span></span> | <span data-ttu-id="0f309-293">**Latência**</span><span class="sxs-lookup"><span data-stu-id="0f309-293">**Latency**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="0f309-294">**Cenário de exemplo**</span><span class="sxs-lookup"><span data-stu-id="0f309-294">**Example Scenario**</span></span> |<span data-ttu-id="0f309-295">Aplicativo OLTP corporativo que exige taxa muito alta de transações por segundo.</span><span class="sxs-lookup"><span data-stu-id="0f309-295">Enterprise OLTP application requiring very high transactions per second rate.</span></span> |<span data-ttu-id="0f309-296">Aplicativo de data warehouse corporativo que processa grandes volumes de dados.</span><span class="sxs-lookup"><span data-stu-id="0f309-296">Enterprise Data warehousing application processing large amounts of data.</span></span> |<span data-ttu-id="0f309-297">Aplicativos quase em tempo real que exigem respostas instantâneas às solicitações de usuário, como jogos online.</span><span class="sxs-lookup"><span data-stu-id="0f309-297">Near real-time applications requiring instant responses to user requests, like online gaming.</span></span> |
| <span data-ttu-id="0f309-298">Fatores de desempenho</span><span class="sxs-lookup"><span data-stu-id="0f309-298">Performance factors</span></span> | &nbsp; | &nbsp; | &nbsp; |
| <span data-ttu-id="0f309-299">**Tamanho de E/S**</span><span class="sxs-lookup"><span data-stu-id="0f309-299">**IO size**</span></span> |<span data-ttu-id="0f309-300">E/S menores geram IOPS mais altas.</span><span class="sxs-lookup"><span data-stu-id="0f309-300">Smaller IO size yields higher IOPS.</span></span> |<span data-ttu-id="0f309-301">E/S maiores geram Taxa de Transferência mais altas.</span><span class="sxs-lookup"><span data-stu-id="0f309-301">Larger IO size to yields higher Throughput.</span></span> | &nbsp;|
| <span data-ttu-id="0f309-302">**Tamanho da VM**</span><span class="sxs-lookup"><span data-stu-id="0f309-302">**VM size**</span></span> |<span data-ttu-id="0f309-303">Use um tamanho de VM que ofereça IOPS maior que o requisito do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f309-303">Use a VM size that offers IOPS greater than your application requirement.</span></span> <span data-ttu-id="0f309-304">Veja os tamanhos de VM e respectivos limites de IOPS aqui.</span><span class="sxs-lookup"><span data-stu-id="0f309-304">See VM sizes and their IOPS limits here.</span></span> |<span data-ttu-id="0f309-305">Use um tamanho de VM com limite de Taxa de Transferência maior que o requisito do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f309-305">Use a VM size with Throughput limit greater than your application requirement.</span></span> <span data-ttu-id="0f309-306">Veja os tamanhos de VM e respectivos limites de Taxa de Transferência aqui.</span><span class="sxs-lookup"><span data-stu-id="0f309-306">See VM sizes and their Throughput limits here.</span></span> |<span data-ttu-id="0f309-307">Use um tamanho de VM que ofereça limites de escala maiores que o requisito do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f309-307">Use a VM size that offers scale limits greater than your application requirement.</span></span> <span data-ttu-id="0f309-308">Veja os tamanhos de VM e os respectivos limites aqui.</span><span class="sxs-lookup"><span data-stu-id="0f309-308">See VM sizes and their limits here.</span></span> |
| <span data-ttu-id="0f309-309">**Tamanho do disco**</span><span class="sxs-lookup"><span data-stu-id="0f309-309">**Disk size**</span></span> |<span data-ttu-id="0f309-310">Use um tamanho de disco que ofereça IOPS maior que o requisito de seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f309-310">Use a disk size that offers IOPS greater than your application requirement.</span></span> <span data-ttu-id="0f309-311">Veja os tamanhos de disco e respectivos limites de IOPS aqui.</span><span class="sxs-lookup"><span data-stu-id="0f309-311">See disk sizes and their IOPS limits here.</span></span> |<span data-ttu-id="0f309-312">Use um tamanho de disco com limite de Taxa de Transferência maior que o requisito do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f309-312">Use a disk size with Throughput limit greater than your application requirement.</span></span> <span data-ttu-id="0f309-313">Veja os tamanhos de disco e respectivos limites de Taxa de Transferência aqui.</span><span class="sxs-lookup"><span data-stu-id="0f309-313">See disk sizes and their Throughput limits here.</span></span> |<span data-ttu-id="0f309-314">Use um tamanho de disco que ofereça limites de escala maiores que o requisito do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f309-314">Use a disk size that offers scale limits greater than your application requirement.</span></span> <span data-ttu-id="0f309-315">Veja os tamanhos de disco e respectivos limites aqui.</span><span class="sxs-lookup"><span data-stu-id="0f309-315">See disk sizes and their limits here.</span></span> |
| <span data-ttu-id="0f309-316">**Limites de escala de VM e disco**</span><span class="sxs-lookup"><span data-stu-id="0f309-316">**VM and Disk Scale Limits**</span></span> |<span data-ttu-id="0f309-317">O limite de IOPS do tamanho da VM escolhido deve ser maior que o total de IOPS impulsionado pelos discos do Armazenamento Premium anexados a ela.</span><span class="sxs-lookup"><span data-stu-id="0f309-317">IOPS limit of the VM size chosen should be greater than total IOPS driven by premium storage disks attached to it.</span></span> |<span data-ttu-id="0f309-318">O limite de Taxa de Transferência do tamanho da VM escolhido deve ser maior que o total de Taxa de Transferência impulsionado pelos discos do Armazenamento Premium anexados a ela.</span><span class="sxs-lookup"><span data-stu-id="0f309-318">Throughput limit of the VM size chosen should be greater than total Throughput driven by premium storage disks attached to it.</span></span> |<span data-ttu-id="0f309-319">Os limites de escala do tamanho da VM escolhido devem ser maiores que o total de limites de escala de discos do Armazenamento Premium anexados.</span><span class="sxs-lookup"><span data-stu-id="0f309-319">Scale limits of the VM size chosen must be greater than total scale limits of attached premium storage disks.</span></span> |
| <span data-ttu-id="0f309-320">**Cache de disco**</span><span class="sxs-lookup"><span data-stu-id="0f309-320">**Disk Caching**</span></span> |<span data-ttu-id="0f309-321">Habilite o Cache ReadOnly nos discos do Armazenamento Premium com operações pesadas de leitura para obter IOPS mais alta de leitura.</span><span class="sxs-lookup"><span data-stu-id="0f309-321">Enable ReadOnly Cache on premium storage disks with Read heavy operations to get higher Read IOPS.</span></span> | &nbsp; |<span data-ttu-id="0f309-322">Habilite o Cache ReadOnly nos discos do Armazenamento Premium com operações pesadas de leitura para obter latências de leitura bem baixas.</span><span class="sxs-lookup"><span data-stu-id="0f309-322">Enable ReadOnly Cache on premium storage disks with Ready heavy operations to get very low Read latencies.</span></span> |
| <span data-ttu-id="0f309-323">**Distribuição de disco**</span><span class="sxs-lookup"><span data-stu-id="0f309-323">**Disk Striping**</span></span> |<span data-ttu-id="0f309-324">Use vários discos e distribua-os em conjunto para obter um limite combinado mais alto de IOPS e Taxa de Transferência.</span><span class="sxs-lookup"><span data-stu-id="0f309-324">Use multiple disks and stripe them together to get a combined higher IOPS and Throughput limit.</span></span> <span data-ttu-id="0f309-325">Observe que o limite combinado por VM deve ser maior do que os limites combinados de discos premium anexados.</span><span class="sxs-lookup"><span data-stu-id="0f309-325">Note that the combined limit per VM should be higher than the combined limits of attached premium disks.</span></span> | &nbsp; | &nbsp; |
| <span data-ttu-id="0f309-326">**Tamanho da distribuição**</span><span class="sxs-lookup"><span data-stu-id="0f309-326">**Stripe Size**</span></span> |<span data-ttu-id="0f309-327">Tamanho menor de distribuição para padrão pequeno de E/S aleatório visto em aplicativos OLTP.</span><span class="sxs-lookup"><span data-stu-id="0f309-327">Smaller stripe size for random small IO pattern seen in OLTP applications.</span></span> <span data-ttu-id="0f309-328">Por exemplo, use o tamanho de distribuição de 64 KB para aplicativo OLTP do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="0f309-328">E.g., use stripe size of 64KB for SQL Server OLTP application.</span></span> |<span data-ttu-id="0f309-329">Tamanho maior de distribuição para padrão grande de E/S sequencial visto em aplicativos de data warehouse.</span><span class="sxs-lookup"><span data-stu-id="0f309-329">Larger stripe size for sequential large IO pattern seen in Data Warehouse applications.</span></span> <span data-ttu-id="0f309-330">Por exemplo, use o tamanho de distribuição de 256 KB para aplicativo de data warehouse do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="0f309-330">E.g., use 256KB stripe size for SQL Server Data warehouse application.</span></span> | &nbsp; |
| <span data-ttu-id="0f309-331">**Multithreading**</span><span class="sxs-lookup"><span data-stu-id="0f309-331">**Multithreading**</span></span> |<span data-ttu-id="0f309-332">Use multithreading para enviar por push números maiores de solicitações ao Armazenamento Premium que levarão à IOPS e Taxa de Transferência mais altas.</span><span class="sxs-lookup"><span data-stu-id="0f309-332">Use multithreading to push higher number of requests to Premium Storage that will lead to higher IOPS and Throughput.</span></span> <span data-ttu-id="0f309-333">Por exemplo, no SQL Server, defina um valor MAXDOP alto para alocar mais CPUs para o SQL Server.</span><span class="sxs-lookup"><span data-stu-id="0f309-333">For example, on SQL Server set a high MAXDOP value to allocate more CPUs to SQL Server.</span></span> | &nbsp; | &nbsp; |
| <span data-ttu-id="0f309-334">**Profundidade da Fila**</span><span class="sxs-lookup"><span data-stu-id="0f309-334">**Queue Depth**</span></span> |<span data-ttu-id="0f309-335">Profundidade da fila maior gera IOPS mais alta.</span><span class="sxs-lookup"><span data-stu-id="0f309-335">Larger Queue Depth yields higher IOPS.</span></span> |<span data-ttu-id="0f309-336">Uma Profundidade da Fila maior gera uma Taxa de Transferência mais alta.</span><span class="sxs-lookup"><span data-stu-id="0f309-336">Larger Queue Depth yields higher Throughput.</span></span> |<span data-ttu-id="0f309-337">Profundidade da fila menor gera latências mais baixas.</span><span class="sxs-lookup"><span data-stu-id="0f309-337">Smaller Queue Depth yields lower latencies.</span></span> |

## <a name="nature-of-io-requests"></a><span data-ttu-id="0f309-338">Natureza das solicitações de E/S</span><span class="sxs-lookup"><span data-stu-id="0f309-338">Nature of IO Requests</span></span>
<span data-ttu-id="0f309-339">Uma solicitação de E/S é uma unidade da operação de entrada/saída que seu aplicativo executará.</span><span class="sxs-lookup"><span data-stu-id="0f309-339">An IO request is a unit of input/output operation that your application will be performing.</span></span> <span data-ttu-id="0f309-340">Identificar a natureza das solicitações de E/S, aleatória ou sequencial, leitura ou gravação, grande ou pequena, ajudará você a determinar os requisitos de desempenho do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f309-340">Identifying the nature of IO requests, random or sequential, read or write, small or large, will help you determine the performance requirements of your application.</span></span> <span data-ttu-id="0f309-341">É muito importante entender a natureza das solicitações de E/S para tomar das decisões certas ao projetar a infraestrutura do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f309-341">It is very important to understand the nature of IO requests, to make the right decisions when designing your application infrastructure.</span></span>

<span data-ttu-id="0f309-342">O tamanho de E/S é um dos fatores mais importantes.</span><span class="sxs-lookup"><span data-stu-id="0f309-342">IO size is one of the more important factors.</span></span> <span data-ttu-id="0f309-343">O tamanho de E/S é o tamanho da solicitação de operação de entrada/saída gerada pelo aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f309-343">The IO size is the size of the input/output operation request generated by your application.</span></span> <span data-ttu-id="0f309-344">O tamanho de E/S tem um impacto significativo no desempenho, especificamente na IOPS e na largura de banda que o aplicativo é capaz de atingir.</span><span class="sxs-lookup"><span data-stu-id="0f309-344">The IO size has a significant impact on performance especially on the IOPS and Bandwidth that the application is able to achieve.</span></span> <span data-ttu-id="0f309-345">A fórmula a seguir mostra a relação entre IOPS, tamanho de E/S e largura de banda/taxa de transferência.</span><span class="sxs-lookup"><span data-stu-id="0f309-345">The following formula shows the relationship between IOPS, IO size and Bandwidth/Throughput.</span></span>  
    ![](media/storage-premium-storage-performance/image1.png)

<span data-ttu-id="0f309-346">Alguns aplicativos permitem a você alterar o tamanho de E/S, enquanto outros aplicativos, não.</span><span class="sxs-lookup"><span data-stu-id="0f309-346">Some applications allow you to alter their IO size, while some applications do not.</span></span> <span data-ttu-id="0f309-347">Por exemplo, o SQL Server determina por si só o tamanho ideal de E/S e não fornece aos usuários nenhum botão para alterá-lo.</span><span class="sxs-lookup"><span data-stu-id="0f309-347">For example, SQL Server determines the optimal IO size itself, and does not provide users with any knobs to change it.</span></span> <span data-ttu-id="0f309-348">Por outro lado, o Oracle oferece um parâmetro chamado [DB\_BLOCK\_SIZE](https://docs.oracle.com/cd/B19306_01/server.102/b14211/iodesign.htm#i28815) com o qual você pode configurar o tamanho da solicitação de E/S do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="0f309-348">On the other hand, Oracle provides a parameter called [DB\_BLOCK\_SIZE](https://docs.oracle.com/cd/B19306_01/server.102/b14211/iodesign.htm#i28815) using which you can configure the I/O request size of the database.</span></span>

<span data-ttu-id="0f309-349">Se estiver usando um aplicativo que não permite alterar o tamanho de E/S, use as diretrizes neste artigo para otimizar o KPI de desempenho que é mais relevante para o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f309-349">If you are using an application, which does not allow you to change the IO size, use the guidelines in this article to optimize the performance KPI that is most relevant to your application.</span></span> <span data-ttu-id="0f309-350">Por exemplo,</span><span class="sxs-lookup"><span data-stu-id="0f309-350">For example,</span></span>

* <span data-ttu-id="0f309-351">Um aplicativo OLTP gera milhões de solicitações de E/S pequenas e aleatórias.</span><span class="sxs-lookup"><span data-stu-id="0f309-351">An OLTP application generates millions of small and random IO requests.</span></span> <span data-ttu-id="0f309-352">Para lidar com esses tipos de solicitação de E/S, você deve projetar a infraestrutura do aplicativo para obter IOPS mais alta.</span><span class="sxs-lookup"><span data-stu-id="0f309-352">To handle these type of IO requests, you must design your application infrastructure to get higher IOPS.</span></span>  
* <span data-ttu-id="0f309-353">Um aplicativo de data warehouse gera solicitações de E/S grandes e sequenciais.</span><span class="sxs-lookup"><span data-stu-id="0f309-353">A data warehousing application generates large and sequential IO requests.</span></span> <span data-ttu-id="0f309-354">Para lidar com esses tipos de solicitação de E/S, você deve projetar a infraestrutura do aplicativo para obter largura de banda ou Taxa de Transferência mais alta.</span><span class="sxs-lookup"><span data-stu-id="0f309-354">To handle these type of IO requests, you must design your application infrastructure to get higher Bandwidth or Throughput.</span></span>

<span data-ttu-id="0f309-355">Se estiver usando um aplicativo que permita alterar o tamanho de E/S, use esta regra prática para o tamanho de E/S além de outras diretrizes de desempenho:</span><span class="sxs-lookup"><span data-stu-id="0f309-355">If you are using an application, which allows you to change the IO size, use this rule of thumb for the IO size in addition to other performance guidelines,</span></span>

* <span data-ttu-id="0f309-356">Tamanho menor de E/S para obter IOPS mais alta.</span><span class="sxs-lookup"><span data-stu-id="0f309-356">Smaller IO size to get higher IOPS.</span></span> <span data-ttu-id="0f309-357">Por exemplo, 8 KB para um aplicativo OLTP.</span><span class="sxs-lookup"><span data-stu-id="0f309-357">For example, 8 KB for an OLTP application.</span></span>  
* <span data-ttu-id="0f309-358">Tamanho maior de E/S para obter largura de banda/Taxa de Transferência mais alta.</span><span class="sxs-lookup"><span data-stu-id="0f309-358">Larger IO size to get higher Bandwidth/Throughput.</span></span> <span data-ttu-id="0f309-359">Por exemplo, 1024 KB para um aplicativo de data warehouse.</span><span class="sxs-lookup"><span data-stu-id="0f309-359">For example, 1024 KB for a data warehouse application.</span></span>

<span data-ttu-id="0f309-360">Veja um exemplo de como é possível calcular a IOPS e a Taxa de Transferência/largura de banda do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f309-360">Here is an example on how you can calculate the IOPS and Throughput/Bandwidth for your application.</span></span> <span data-ttu-id="0f309-361">Considere um aplicativo usando um disco P30.</span><span class="sxs-lookup"><span data-stu-id="0f309-361">Consider an application using a P30 disk.</span></span> <span data-ttu-id="0f309-362">A IOPS e a Taxa de Transferência/largura de banda máximas que um disco P30 pode atingir é de 5.000 IOPS e 200 MB por segundo, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="0f309-362">The maximum IOPS and Throughput/Bandwidth a P30 disk can achieve is 5000 IOPS and 200 MB per second respectively.</span></span> <span data-ttu-id="0f309-363">Agora, se seu aplicativo exigir a IOPS máxima do disco P30 e você usar um tamanho de E/S menor, como 8 KB, a largura de banda resultante que você poderá obter será de 40 MB por segundo.</span><span class="sxs-lookup"><span data-stu-id="0f309-363">Now, if your application requires the maximum IOPS from the P30 disk and you use a smaller IO size like 8 KB, the resulting Bandwidth you will be able to get is 40 MB per second.</span></span> <span data-ttu-id="0f309-364">No entanto, se seu aplicativo exigir a Taxa de Transferência/largura de banda máxima do disco P30 e você usar um tamanho de E/S maior, como 1024 KB, a IOPS resultante será menor, 200 IOPS.</span><span class="sxs-lookup"><span data-stu-id="0f309-364">However, if your application requires the maximum Throughput/Bandwidth from P30 disk, and you use a larger IO size like 1024 KB, the resulting IOPS will be less, 200 IOPS.</span></span> <span data-ttu-id="0f309-365">Sendo assim, ajuste o tamanho de E/S, de tal modo que ele atenda aos requisitos de IOPS e Taxa de Transferência/Largura de Banda do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f309-365">Therefore, tune the IO size such that it meets both your application's IOPS and Throughput/Bandwidth requirement.</span></span> <span data-ttu-id="0f309-366">A tabela abaixo resume os diferentes tamanhos de E/S e a IOPS e a Taxa de Transferência correspondentes para um disco P30.</span><span class="sxs-lookup"><span data-stu-id="0f309-366">Table below summarizes the different IO sizes and their corresponding IOPS and Throughput for a P30 disk.</span></span>

| <span data-ttu-id="0f309-367">Requisito de aplicativo</span><span class="sxs-lookup"><span data-stu-id="0f309-367">Application Requirement</span></span> | <span data-ttu-id="0f309-368">Tamanho de E/S</span><span class="sxs-lookup"><span data-stu-id="0f309-368">I/O size</span></span> | <span data-ttu-id="0f309-369">IOPS</span><span class="sxs-lookup"><span data-stu-id="0f309-369">IOPS</span></span> | <span data-ttu-id="0f309-370">Taxa de Transferência/Largura de Banda</span><span class="sxs-lookup"><span data-stu-id="0f309-370">Throughput/Bandwidth</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="0f309-371">IOPS Máxima</span><span class="sxs-lookup"><span data-stu-id="0f309-371">Max IOPS</span></span> |<span data-ttu-id="0f309-372">8 KB</span><span class="sxs-lookup"><span data-stu-id="0f309-372">8 KB</span></span> |<span data-ttu-id="0f309-373">5.000</span><span class="sxs-lookup"><span data-stu-id="0f309-373">5,000</span></span> |<span data-ttu-id="0f309-374">40 MB por segundo</span><span class="sxs-lookup"><span data-stu-id="0f309-374">40 MB per second</span></span> |
| <span data-ttu-id="0f309-375">Taxa de Transferência Máxima</span><span class="sxs-lookup"><span data-stu-id="0f309-375">Max Throughput</span></span> |<span data-ttu-id="0f309-376">1024 KB</span><span class="sxs-lookup"><span data-stu-id="0f309-376">1024 KB</span></span> |<span data-ttu-id="0f309-377">200</span><span class="sxs-lookup"><span data-stu-id="0f309-377">200</span></span> |<span data-ttu-id="0f309-378">200 MB por segundo</span><span class="sxs-lookup"><span data-stu-id="0f309-378">200 MB per second</span></span> |
| <span data-ttu-id="0f309-379">Taxa de Transferência Máxima + IOPS alta</span><span class="sxs-lookup"><span data-stu-id="0f309-379">Max Throughput + high IOPS</span></span> |<span data-ttu-id="0f309-380">64 KB</span><span class="sxs-lookup"><span data-stu-id="0f309-380">64 KB</span></span> |<span data-ttu-id="0f309-381">3.200</span><span class="sxs-lookup"><span data-stu-id="0f309-381">3,200</span></span> |<span data-ttu-id="0f309-382">200 MB por segundo</span><span class="sxs-lookup"><span data-stu-id="0f309-382">200 MB per second</span></span> |
| <span data-ttu-id="0f309-383">IOPS máxima + Taxa de Transferência alta</span><span class="sxs-lookup"><span data-stu-id="0f309-383">Max IOPS + high Throughput</span></span> |<span data-ttu-id="0f309-384">32 KB</span><span class="sxs-lookup"><span data-stu-id="0f309-384">32 KB</span></span> |<span data-ttu-id="0f309-385">5.000</span><span class="sxs-lookup"><span data-stu-id="0f309-385">5,000</span></span> |<span data-ttu-id="0f309-386">160 MB por segundo</span><span class="sxs-lookup"><span data-stu-id="0f309-386">160 MB per second</span></span> |

<span data-ttu-id="0f309-387">Para obter IOPS e Largura de Banda mais altas do que o valor máximo de um único disco do Armazenamento Premium, use vários discos premium distribuídos em conjunto.</span><span class="sxs-lookup"><span data-stu-id="0f309-387">To get IOPS and Bandwidth higher than the maximum value of a single premium storage disk, use multiple premium disks striped together.</span></span> <span data-ttu-id="0f309-388">Por exemplo, distribua dois discos P30 para obter uma IOPS de 10.000 IOPS ou um combinado de Taxa de Transferência de 400 MB por segundo.</span><span class="sxs-lookup"><span data-stu-id="0f309-388">For example, stripe two P30 disks to get a combined IOPS of 10,000 IOPS or a combined Throughput of 400 MB per second.</span></span> <span data-ttu-id="0f309-389">Como explicado na próxima seção, você deve usar um tamanho de VM que ofereça suporte à IOPS e à Taxa de Transferência de disco combinado.</span><span class="sxs-lookup"><span data-stu-id="0f309-389">As explained in the next section, you must use a VM size that supports the combined disk IOPS and Throughput.</span></span>

> [!NOTE]
> <span data-ttu-id="0f309-390">À medida que você aumenta a IOPS ou a Taxa de Transferência, a outra também aumenta. Fique dentro dos limites de Taxa de Transferência ou de IOPS do disco ou da VM ao aumentar uma das duas.</span><span class="sxs-lookup"><span data-stu-id="0f309-390">As you increase either IOPS or Throughput the other also increases, make sure you do not hit throughput or IOPS limits of the disk or VM when increasing either one.</span></span>
>
>

<span data-ttu-id="0f309-391">Para ver os efeitos do tamanho de E/S no desempenho do aplicativo, você pode executar ferramentas de parâmetros comparação na VM e nos discos.</span><span class="sxs-lookup"><span data-stu-id="0f309-391">To witness the effects of IO size on application performance, you can run benchmarking tools on your VM and disks.</span></span> <span data-ttu-id="0f309-392">Crie várias execuções de teste e use diferentes tamanhos de E/S para cada execução a fim de ver o impacto.</span><span class="sxs-lookup"><span data-stu-id="0f309-392">Create multiple test runs and use different IO size for each run to see the impact.</span></span> <span data-ttu-id="0f309-393">Consulte a seção [Parâmetros de comparação](#Benchmarking) no fim deste artigo para obter mais detalhes.</span><span class="sxs-lookup"><span data-stu-id="0f309-393">Refer to the [Benchmarking](#Benchmarking) section at the end of this article for more details.</span></span>

## <a name="high-scale-vm-sizes"></a><span data-ttu-id="0f309-394">Tamanhos de VM de alta escala</span><span class="sxs-lookup"><span data-stu-id="0f309-394">High Scale VM Sizes</span></span>
<span data-ttu-id="0f309-395">Quando você começa a criar um aplicativo, uma das primeiras tarefas é escolher uma VM para hospedar o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f309-395">When you start designing an application, one of the first things to do is, choose a VM to host your application.</span></span> <span data-ttu-id="0f309-396">O Armazenamento Premium surge com os tamanhos de VM de alta escala que podem executar aplicativos que exigem potência mais alta de computação e um alto desempenho de E/S do disco local.</span><span class="sxs-lookup"><span data-stu-id="0f309-396">Premium Storage comes with High Scale VM sizes that can run applications requiring higher compute power and a high local disk I/O performance.</span></span> <span data-ttu-id="0f309-397">Essas VMs fornecem processadores mais rápidos, uma taxa mais alta de memória para núcleo e uma SSD (unidade de estado sólido) para o disco local.</span><span class="sxs-lookup"><span data-stu-id="0f309-397">These VMs provide faster processors, a higher memory-to-core ratio, and a Solid-State Drive (SSD) for the local disk.</span></span> <span data-ttu-id="0f309-398">Exemplos de VMs de alta escala que dão suporte ao Armazenamento Premium são as VMs das séries DS, DSv2 e GS.</span><span class="sxs-lookup"><span data-stu-id="0f309-398">Examples of High Scale VMs supporting Premium Storage are the DS, DSv2 and GS series VMs.</span></span>

<span data-ttu-id="0f309-399">As VMs de alta escala estão disponíveis em diferentes tamanhos com diferentes números de núcleos de CPU, memória, sistema operacional e tamanho de disco temporário.</span><span class="sxs-lookup"><span data-stu-id="0f309-399">High Scale VMs are available in different sizes with a different number of CPU cores, memory, OS and temporary disk size.</span></span> <span data-ttu-id="0f309-400">Cada tamanho de VM também tem um número máximo de discos de dados que você pode anexar à VM.</span><span class="sxs-lookup"><span data-stu-id="0f309-400">Each VM size also has maximum number of data disks that you can attach to the VM.</span></span> <span data-ttu-id="0f309-401">Sendo assim, o tamanho de VM escolhido afetará a quantidade de capacidade de armazenamento, processamento e memória disponível para o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f309-401">Therefore, the chosen VM size will affect how much processing, memory, and storage capacity is available for your application.</span></span> <span data-ttu-id="0f309-402">Ele também afeta o custo da computação e do armazenamento.</span><span class="sxs-lookup"><span data-stu-id="0f309-402">It also affects the Compute and Storage cost.</span></span> <span data-ttu-id="0f309-403">Por exemplo, abaixo estão as especificações do maior tamanho de VM em uma série DS, uma DSv2 e uma GS:</span><span class="sxs-lookup"><span data-stu-id="0f309-403">For example, below are the specifications of the largest VM size in a DS series, DSv2 series and a GS series:</span></span>

| <span data-ttu-id="0f309-404">Tamanho da VM</span><span class="sxs-lookup"><span data-stu-id="0f309-404">VM size</span></span> | <span data-ttu-id="0f309-405">Núcleos de CPU</span><span class="sxs-lookup"><span data-stu-id="0f309-405">CPU cores</span></span> | <span data-ttu-id="0f309-406">Memória</span><span class="sxs-lookup"><span data-stu-id="0f309-406">Memory</span></span> | <span data-ttu-id="0f309-407">Tamanhos de disco da VM</span><span class="sxs-lookup"><span data-stu-id="0f309-407">VM disk sizes</span></span> | <span data-ttu-id="0f309-408">Máx.</span><span class="sxs-lookup"><span data-stu-id="0f309-408">Max.</span></span> <span data-ttu-id="0f309-409">de discos de dados</span><span class="sxs-lookup"><span data-stu-id="0f309-409">data disks</span></span> | <span data-ttu-id="0f309-410">Tamanho do cache</span><span class="sxs-lookup"><span data-stu-id="0f309-410">Cache size</span></span> | <span data-ttu-id="0f309-411">IOPS</span><span class="sxs-lookup"><span data-stu-id="0f309-411">IOPS</span></span> | <span data-ttu-id="0f309-412">Limites de E/S do cache da largura de banda</span><span class="sxs-lookup"><span data-stu-id="0f309-412">Bandwidth Cache IO limits</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="0f309-413">Standard_DS14</span><span class="sxs-lookup"><span data-stu-id="0f309-413">Standard_DS14</span></span> |<span data-ttu-id="0f309-414">16</span><span class="sxs-lookup"><span data-stu-id="0f309-414">16</span></span> |<span data-ttu-id="0f309-415">112 GB</span><span class="sxs-lookup"><span data-stu-id="0f309-415">112 GB</span></span> |<span data-ttu-id="0f309-416">SO = 1023 GB </span><span class="sxs-lookup"><span data-stu-id="0f309-416">OS = 1023 GB</span></span> <br> <span data-ttu-id="0f309-417">SSD local = 224 GB</span><span class="sxs-lookup"><span data-stu-id="0f309-417">Local SSD = 224 GB</span></span> |<span data-ttu-id="0f309-418">32</span><span class="sxs-lookup"><span data-stu-id="0f309-418">32</span></span> |<span data-ttu-id="0f309-419">576 GB</span><span class="sxs-lookup"><span data-stu-id="0f309-419">576 GB</span></span> |<span data-ttu-id="0f309-420">50.000 IOPS </span><span class="sxs-lookup"><span data-stu-id="0f309-420">50,000 IOPS</span></span> <br> <span data-ttu-id="0f309-421">512 MB por segundo</span><span class="sxs-lookup"><span data-stu-id="0f309-421">512 MB per second</span></span> |<span data-ttu-id="0f309-422">4.000 IOPS e 33 MB por segundo</span><span class="sxs-lookup"><span data-stu-id="0f309-422">4,000 IOPS and 33 MB per second</span></span> |
| <span data-ttu-id="0f309-423">Standard_GS5</span><span class="sxs-lookup"><span data-stu-id="0f309-423">Standard_GS5</span></span> |<span data-ttu-id="0f309-424">32</span><span class="sxs-lookup"><span data-stu-id="0f309-424">32</span></span> |<span data-ttu-id="0f309-425">448 GB</span><span class="sxs-lookup"><span data-stu-id="0f309-425">448 GB</span></span> |<span data-ttu-id="0f309-426">SO = 1023 GB </span><span class="sxs-lookup"><span data-stu-id="0f309-426">OS = 1023 GB</span></span> <br> <span data-ttu-id="0f309-427">SSD local = 896 GB</span><span class="sxs-lookup"><span data-stu-id="0f309-427">Local SSD = 896 GB</span></span> |<span data-ttu-id="0f309-428">64</span><span class="sxs-lookup"><span data-stu-id="0f309-428">64</span></span> |<span data-ttu-id="0f309-429">4224 GB</span><span class="sxs-lookup"><span data-stu-id="0f309-429">4224 GB</span></span> |<span data-ttu-id="0f309-430">80.000 IOPS </span><span class="sxs-lookup"><span data-stu-id="0f309-430">80,000 IOPS</span></span> <br> <span data-ttu-id="0f309-431">2.000 MB por segundo</span><span class="sxs-lookup"><span data-stu-id="0f309-431">2,000 MB per second</span></span> |<span data-ttu-id="0f309-432">5.000 IOPS e 50 MB por segundo</span><span class="sxs-lookup"><span data-stu-id="0f309-432">5,000 IOPS and 50 MB per second</span></span> |

<span data-ttu-id="0f309-433">Para exibir uma lista completa de todos os tamanhos de VM do Azure disponíveis, consulte [tamanhos de VM do Windows](../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) ou [tamanhos de VM do Linux](../virtual-machines/linux/sizes.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="0f309-433">To view a complete list of all available Azure VM sizes, refer to [Windows VM sizes](../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) or [Linux VM sizes](../virtual-machines/linux/sizes.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span> <span data-ttu-id="0f309-434">Escolha um tamanho de VM que possa atender aos requisitos de desempenho de aplicativo desejados.</span><span class="sxs-lookup"><span data-stu-id="0f309-434">Choose a VM size that can meet and scale to your desired application performance requirements.</span></span> <span data-ttu-id="0f309-435">Além disso, leve em consideração as seguintes considerações importantes ao escolher tamanhos de VM.</span><span class="sxs-lookup"><span data-stu-id="0f309-435">In addition to this, take into account following important considerations when choosing VM sizes.</span></span>

<span data-ttu-id="0f309-436">*Limites de Escala*</span><span class="sxs-lookup"><span data-stu-id="0f309-436">*Scale Limits*</span></span>  
<span data-ttu-id="0f309-437">Os limites máximos de IOPS por VM e por disco são diferentes e independentes um do outro.</span><span class="sxs-lookup"><span data-stu-id="0f309-437">The maximum IOPS limits per VM and per disk are different and independent of each other.</span></span> <span data-ttu-id="0f309-438">Verifique se o aplicativo está impulsionando a IOPS dentro dos limites da VM, bem como os discos premium anexados a ela.</span><span class="sxs-lookup"><span data-stu-id="0f309-438">Make sure that the application is driving IOPS within the limits of the VM as well as the premium disks attached to it.</span></span> <span data-ttu-id="0f309-439">Caso contrário, o desempenho do aplicativo será limitado.</span><span class="sxs-lookup"><span data-stu-id="0f309-439">Otherwise, application performance will experience throttling.</span></span>

<span data-ttu-id="0f309-440">Por exemplo, suponha que o requisito de um aplicativo seja de 4.000 IOPS.</span><span class="sxs-lookup"><span data-stu-id="0f309-440">As an example, suppose an application requirement is a maximum of 4,000 IOPS.</span></span> <span data-ttu-id="0f309-441">Para chegar a isso, você provisiona um disco P30 em uma VM DS1.</span><span class="sxs-lookup"><span data-stu-id="0f309-441">To achieve this, you provision a P30 disk on a DS1 VM.</span></span> <span data-ttu-id="0f309-442">O disco P30 pode oferecer até 5.000 IOPS.</span><span class="sxs-lookup"><span data-stu-id="0f309-442">The P30 disk can deliver up to 5,000 IOPS.</span></span> <span data-ttu-id="0f309-443">No entanto, a VM DS1 é limitada a 3.200 IOPS.</span><span class="sxs-lookup"><span data-stu-id="0f309-443">However, the DS1 VM is limited to 3,200 IOPS.</span></span> <span data-ttu-id="0f309-444">Consequentemente, o desempenho do aplicativo será restrito pelo limite da VM de 3.200 IOPS e haverá degradação do desempenho.</span><span class="sxs-lookup"><span data-stu-id="0f309-444">Consequently, the application performance will be constrained by the VM limit at 3,200 IOPS and there will be degraded performance.</span></span> <span data-ttu-id="0f309-445">Para evitar essa situação, escolha um tamanho de disco e VM que atenda aos requisitos do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f309-445">To prevent this situation, choose a VM and disk size that will both meet application requirements.</span></span>

<span data-ttu-id="0f309-446">*Custo da operação*</span><span class="sxs-lookup"><span data-stu-id="0f309-446">*Cost of Operation*</span></span>  
<span data-ttu-id="0f309-447">Em muitos casos, é possível que o custo geral de operação usando o Armazenamento Premium seja menor do que usando o Armazenamento Padrão.</span><span class="sxs-lookup"><span data-stu-id="0f309-447">In many cases, it is possible that your overall cost of operation using Premium Storage is lower than using Standard Storage.</span></span>

<span data-ttu-id="0f309-448">Por exemplo, considere um aplicativo que exija 16.000 IOPS.</span><span class="sxs-lookup"><span data-stu-id="0f309-448">For example, consider an application requiring 16,000 IOPS.</span></span> <span data-ttu-id="0f309-449">Para atingir esse desempenho, você precisará de uma VM de IaaS Standard\_D14 do Azure que possa fornecer um máximo de 16.000 IOPS usando 32 discos de armazenamento padrão de 1 TB.</span><span class="sxs-lookup"><span data-stu-id="0f309-449">To achieve this performance, you will need a Standard\_D14 Azure IaaS VM, which can give a maximum IOPS of 16,000 using 32 standard storage 1TB disks.</span></span> <span data-ttu-id="0f309-450">Cada disco de armazenamento padrão de 1TB pode atingir um máximo de 500 IOPS.</span><span class="sxs-lookup"><span data-stu-id="0f309-450">Each 1TB standard storage disk can achieve a maximum of 500 IOPS.</span></span> <span data-ttu-id="0f309-451">O custo estimado dessa VM por mês será de US$ 1.570.</span><span class="sxs-lookup"><span data-stu-id="0f309-451">The estimated cost of this VM per month will be $1,570.</span></span> <span data-ttu-id="0f309-452">O custo mensal de 32 discos de armazenamento padrão será de US$ 1.638.</span><span class="sxs-lookup"><span data-stu-id="0f309-452">The monthly cost of 32 standard storage disks will be $1,638.</span></span> <span data-ttu-id="0f309-453">O custo mensal total estimado será de US$ 3.208.</span><span class="sxs-lookup"><span data-stu-id="0f309-453">The estimated total monthly cost will be $3,208.</span></span>

<span data-ttu-id="0f309-454">No entanto, se você tiver hospedado o mesmo aplicativo no Armazenamento Premium, será preciso uma VM menor e menos discos de Armazenamento Premium, reduzindo, assim, o custo geral.</span><span class="sxs-lookup"><span data-stu-id="0f309-454">However, if you hosted the same application on Premium Storage, you will need a smaller VM size and fewer premium storage disks, thus reducing the overall cost.</span></span> <span data-ttu-id="0f309-455">Uma VM Standard\_DS13 pode atender ao requisito de 16.000 IOPS usando quatro discos P30.</span><span class="sxs-lookup"><span data-stu-id="0f309-455">A Standard\_DS13 VM can meet the 16,000 IOPS requirement using four P30 disks.</span></span> <span data-ttu-id="0f309-456">A VM DS13 tem um máximo de 25.600 IOPS e cada disco P30 tem um máximo de 5.000 IOPS.</span><span class="sxs-lookup"><span data-stu-id="0f309-456">The DS13 VM has a maximum IOPS of 25,600 and each P30 disk has a maximum IOPS of 5,000.</span></span> <span data-ttu-id="0f309-457">Em geral, essa configuração pode alcançar 5.000 x 4 = 20.000 IOPS.</span><span class="sxs-lookup"><span data-stu-id="0f309-457">Overall, this configuration can achieve 5,000 x 4 = 20,000 IOPS.</span></span> <span data-ttu-id="0f309-458">O custo estimado dessa VM por mês será de US$ 1.003.</span><span class="sxs-lookup"><span data-stu-id="0f309-458">The estimated cost of this VM per month will be $1,003.</span></span> <span data-ttu-id="0f309-459">O custo mensal de quatro discos P30 de armazenamento premium será de US$ 544,34.</span><span class="sxs-lookup"><span data-stu-id="0f309-459">The monthly cost of four P30 premium storage disks will be $544.34.</span></span> <span data-ttu-id="0f309-460">O custo total mensal estimado será de US$ 1.544.</span><span class="sxs-lookup"><span data-stu-id="0f309-460">The estimated total monthly cost will be $1,544.</span></span>

<span data-ttu-id="0f309-461">A tabela abaixo resume o detalhamento do custo desse cenário para Armazenamento Premium e Standard.</span><span class="sxs-lookup"><span data-stu-id="0f309-461">Table below summarizes the cost breakdown of this scenario for Standard and Premium Storage.</span></span>

| &nbsp; | <span data-ttu-id="0f309-462">**Standard**</span><span class="sxs-lookup"><span data-stu-id="0f309-462">**Standard**</span></span> | <span data-ttu-id="0f309-463">**Premium**</span><span class="sxs-lookup"><span data-stu-id="0f309-463">**Premium**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="0f309-464">**Custo de VM por mês**</span><span class="sxs-lookup"><span data-stu-id="0f309-464">**Cost of VM per month**</span></span> |<span data-ttu-id="0f309-465">US$ 1.570,58 (Standard\_D14)</span><span class="sxs-lookup"><span data-stu-id="0f309-465">$1,570.58 (Standard\_D14)</span></span> |<span data-ttu-id="0f309-466">US$ 1.003,66 (Standard\_DS13)</span><span class="sxs-lookup"><span data-stu-id="0f309-466">$1,003.66 (Standard\_DS13)</span></span> |
| <span data-ttu-id="0f309-467">**Custo de discos por mês**</span><span class="sxs-lookup"><span data-stu-id="0f309-467">**Cost of Disks per month**</span></span> |<span data-ttu-id="0f309-468">US$ 1.638,40 (32 discos x 1 TB)</span><span class="sxs-lookup"><span data-stu-id="0f309-468">$1,638.40 (32 x 1 TB disks)</span></span> |<span data-ttu-id="0f309-469">US$ 544,34 (4 discos x P30)</span><span class="sxs-lookup"><span data-stu-id="0f309-469">$544.34 (4 x P30 disks)</span></span> |
| <span data-ttu-id="0f309-470">**Custo geral por mês**</span><span class="sxs-lookup"><span data-stu-id="0f309-470">**Overall Cost per month**</span></span> |<span data-ttu-id="0f309-471">US$ 3.208,98</span><span class="sxs-lookup"><span data-stu-id="0f309-471">$3,208.98</span></span> |<span data-ttu-id="0f309-472">US$ 1.544,34</span><span class="sxs-lookup"><span data-stu-id="0f309-472">$1,544.34</span></span> |

<span data-ttu-id="0f309-473">*Distribuições do Linux*</span><span class="sxs-lookup"><span data-stu-id="0f309-473">*Linux Distros*</span></span>  

<span data-ttu-id="0f309-474">Com o Armazenamento Premium do Azure, você obtém o mesmo nível de Desempenho para VMs que executam Windows e Linux.</span><span class="sxs-lookup"><span data-stu-id="0f309-474">With Azure Premium Storage, you get the same level of Performance for VMs running Windows and Linux.</span></span> <span data-ttu-id="0f309-475">Há suporte para vários tipos de distribuição Linux, e você pode ver a lista completa [aqui](../virtual-machines/linux/endorsed-distros.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="0f309-475">We support many flavors of Linux distros, and you can see the complete list [here](../virtual-machines/linux/endorsed-distros.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span> <span data-ttu-id="0f309-476">É importante observar que as diferentes distribuições são mais adequadas para tipos diferentes de carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="0f309-476">It is important to note that different distros are better suited for different types of workloads.</span></span> <span data-ttu-id="0f309-477">Você verá diferentes níveis de desempenho dependendo da distribuição em que a carga de trabalho está sendo executada.</span><span class="sxs-lookup"><span data-stu-id="0f309-477">You will see different levels of performance depending on the distro your workload is running on.</span></span> <span data-ttu-id="0f309-478">Teste as distribuições Linux com seu aplicativo e escolha a mais adequada.</span><span class="sxs-lookup"><span data-stu-id="0f309-478">Test the Linux distros with your application and choose the one that works best.</span></span>

<span data-ttu-id="0f309-479">Ao executar Linux com Armazenamento Premium, verifique as últimas atualizações dos drivers necessários para garantir alto desempenho.</span><span class="sxs-lookup"><span data-stu-id="0f309-479">When running Linux with Premium Storage, check the latest updates about required drivers to ensure high performance.</span></span>

## <a name="premium-storage-disk-sizes"></a><span data-ttu-id="0f309-480">Tamanhos de disco do Armazenamento Premium</span><span class="sxs-lookup"><span data-stu-id="0f309-480">Premium Storage Disk Sizes</span></span>
<span data-ttu-id="0f309-481">Atualmente, o Armazenamento Premium do Azure oferece sete tamanhos de disco.</span><span class="sxs-lookup"><span data-stu-id="0f309-481">Azure Premium Storage offers seven disk sizes currently.</span></span> <span data-ttu-id="0f309-482">Cada tamanho de disco tem um limite de escala diferente para IOPS, largura de banda e armazenamento.</span><span class="sxs-lookup"><span data-stu-id="0f309-482">Each disk size has a different scale limit for IOPS, Bandwidth and Storage.</span></span> <span data-ttu-id="0f309-483">Escolha o tamanho certo do disco do Armazenamento Premium de acordo com os requisitos do aplicativo e o tamanho da VM de alta escala.</span><span class="sxs-lookup"><span data-stu-id="0f309-483">Choose the right Premium Storage Disk size depending on the application requirements and the high scale VM size.</span></span> <span data-ttu-id="0f309-484">A tabela abaixo mostra os sete tamanhos de disco e seus recursos.</span><span class="sxs-lookup"><span data-stu-id="0f309-484">The table below shows the seven disks sizes and their capabilities.</span></span> <span data-ttu-id="0f309-485">Atualmente, os tamanhos de disco P4 e P6 têm suporte somente para o Managed Disks.</span><span class="sxs-lookup"><span data-stu-id="0f309-485">P4 and P6 sizes are currently only supported for Managed Disks.</span></span>

| <span data-ttu-id="0f309-486">Tipo de discos premium</span><span class="sxs-lookup"><span data-stu-id="0f309-486">Premium Disks Type</span></span>  | <span data-ttu-id="0f309-487">P4</span><span class="sxs-lookup"><span data-stu-id="0f309-487">P4</span></span>    | <span data-ttu-id="0f309-488">P6</span><span class="sxs-lookup"><span data-stu-id="0f309-488">P6</span></span>    | <span data-ttu-id="0f309-489">P10</span><span class="sxs-lookup"><span data-stu-id="0f309-489">P10</span></span>   | <span data-ttu-id="0f309-490">P20</span><span class="sxs-lookup"><span data-stu-id="0f309-490">P20</span></span>   | <span data-ttu-id="0f309-491">P30</span><span class="sxs-lookup"><span data-stu-id="0f309-491">P30</span></span>   | <span data-ttu-id="0f309-492">P40</span><span class="sxs-lookup"><span data-stu-id="0f309-492">P40</span></span>   | <span data-ttu-id="0f309-493">P50</span><span class="sxs-lookup"><span data-stu-id="0f309-493">P50</span></span>   | 
|---------------------|-------|-------|-------|-------|-------|-------|-------|
| <span data-ttu-id="0f309-494">Tamanho do disco</span><span class="sxs-lookup"><span data-stu-id="0f309-494">Disk size</span></span>           | <span data-ttu-id="0f309-495">32 GB</span><span class="sxs-lookup"><span data-stu-id="0f309-495">32 GB</span></span> | <span data-ttu-id="0f309-496">64 GB</span><span class="sxs-lookup"><span data-stu-id="0f309-496">64 GB</span></span> | <span data-ttu-id="0f309-497">128 GB</span><span class="sxs-lookup"><span data-stu-id="0f309-497">128 GB</span></span>| <span data-ttu-id="0f309-498">512 GB</span><span class="sxs-lookup"><span data-stu-id="0f309-498">512 GB</span></span>            | <span data-ttu-id="0f309-499">1024 GB (1 TB)</span><span class="sxs-lookup"><span data-stu-id="0f309-499">1024 GB (1 TB)</span></span>    | <span data-ttu-id="0f309-500">2048 GB (2 TB)</span><span class="sxs-lookup"><span data-stu-id="0f309-500">2048 GB (2 TB)</span></span>    | <span data-ttu-id="0f309-501">4095 GB (4 TB)</span><span class="sxs-lookup"><span data-stu-id="0f309-501">4095 GB (4 TB)</span></span>    | 
| <span data-ttu-id="0f309-502">IOPS por disco</span><span class="sxs-lookup"><span data-stu-id="0f309-502">IOPS per disk</span></span>       | <span data-ttu-id="0f309-503">120</span><span class="sxs-lookup"><span data-stu-id="0f309-503">120</span></span>   | <span data-ttu-id="0f309-504">240</span><span class="sxs-lookup"><span data-stu-id="0f309-504">240</span></span>   | <span data-ttu-id="0f309-505">500</span><span class="sxs-lookup"><span data-stu-id="0f309-505">500</span></span>   | <span data-ttu-id="0f309-506">2.300</span><span class="sxs-lookup"><span data-stu-id="0f309-506">2300</span></span>              | <span data-ttu-id="0f309-507">5.000</span><span class="sxs-lookup"><span data-stu-id="0f309-507">5000</span></span>              | <span data-ttu-id="0f309-508">7500</span><span class="sxs-lookup"><span data-stu-id="0f309-508">7500</span></span>              | <span data-ttu-id="0f309-509">7500</span><span class="sxs-lookup"><span data-stu-id="0f309-509">7500</span></span>              | 
| <span data-ttu-id="0f309-510">Taxa de transferência por disco</span><span class="sxs-lookup"><span data-stu-id="0f309-510">Throughput per disk</span></span> | <span data-ttu-id="0f309-511">25 MB por segundo</span><span class="sxs-lookup"><span data-stu-id="0f309-511">25 MB per second</span></span>  | <span data-ttu-id="0f309-512">50 MB por segundo</span><span class="sxs-lookup"><span data-stu-id="0f309-512">50 MB per second</span></span>  | <span data-ttu-id="0f309-513">100 MB por segundo</span><span class="sxs-lookup"><span data-stu-id="0f309-513">100 MB per second</span></span> | <span data-ttu-id="0f309-514">150 MB por segundo</span><span class="sxs-lookup"><span data-stu-id="0f309-514">150 MB per second</span></span> | <span data-ttu-id="0f309-515">200 MB por segundo</span><span class="sxs-lookup"><span data-stu-id="0f309-515">200 MB per second</span></span> | <span data-ttu-id="0f309-516">250 MB por segundo</span><span class="sxs-lookup"><span data-stu-id="0f309-516">250 MB per second</span></span> | <span data-ttu-id="0f309-517">250 MB por segundo</span><span class="sxs-lookup"><span data-stu-id="0f309-517">250 MB per second</span></span> | 


<span data-ttu-id="0f309-518">Quantos discos você escolhe depende do tamanho do disco escolhido.</span><span class="sxs-lookup"><span data-stu-id="0f309-518">How many disks you choose depends on the disk size chosen.</span></span> <span data-ttu-id="0f309-519">Você pode usar um único disco P50 ou vários discos P10 para atender aos requisitos do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f309-519">You could use a single P50 disk or multiple P10 disks to meet your application requirement.</span></span> <span data-ttu-id="0f309-520">Leve em conta as considerações listadas abaixo ao fazer sua escolha.</span><span class="sxs-lookup"><span data-stu-id="0f309-520">Take into account considerations listed below when making the choice.</span></span>

<span data-ttu-id="0f309-521">*Limites de Escala (IOPS e Taxa de Transferência)*</span><span class="sxs-lookup"><span data-stu-id="0f309-521">*Scale Limits (IOPS and Throughput)*</span></span>  
<span data-ttu-id="0f309-522">Os limites de IOPS e Taxa de Transferência de cada tamanho de disco Premium são diferentes e independentes dos limites de escala da VM.</span><span class="sxs-lookup"><span data-stu-id="0f309-522">The IOPS and Throughput limits of each Premium disk size is different and independent from the VM scale limits.</span></span> <span data-ttu-id="0f309-523">Verifique se o total de IOPS e Taxa de Transferência dos discos estão dentro dos limites de escala do tamanho escolhido de VM.</span><span class="sxs-lookup"><span data-stu-id="0f309-523">Make sure that the total IOPS and Throughput from the disks are within scale limits of the chosen VM size.</span></span>

<span data-ttu-id="0f309-524">Por exemplo, se o requisito de um aplicativo for de, no máximo, 250 MB/s de Taxa de Transferência e você estiver usando uma VM DS4 com um único disco P30.</span><span class="sxs-lookup"><span data-stu-id="0f309-524">For example, if an application requirement is a maximum of 250 MB/sec Throughput and you are using a DS4 VM with a single P30 disk.</span></span> <span data-ttu-id="0f309-525">A VM DS4 pode fornecer uma Taxa de Transferência de 256 MB/s.</span><span class="sxs-lookup"><span data-stu-id="0f309-525">The DS4 VM can give up to 256 MB/sec Throughput.</span></span> <span data-ttu-id="0f309-526">No entanto, um único disco P30 tem um limite de Taxa de Transferência de 200 MB/s.</span><span class="sxs-lookup"><span data-stu-id="0f309-526">However, a single P30 disk has Throughput limit of 200 MB/sec.</span></span> <span data-ttu-id="0f309-527">Consequentemente, o aplicativo será restrito a 200 MB/s devido ao limite do disco.</span><span class="sxs-lookup"><span data-stu-id="0f309-527">Consequently, the application will be constrained at 200 MB/sec due to the disk limit.</span></span> <span data-ttu-id="0f309-528">Para superar esse limite, provisione mais de um disco de dados à VM ou redimensione seus discos para P40 ou P50.</span><span class="sxs-lookup"><span data-stu-id="0f309-528">To overcome this limit, provision more than one data disks to the VM or resize your disks to P40 or P50.</span></span>

> [!NOTE]
> <span data-ttu-id="0f309-529">as leituras atendidas pelo cache não estão incluídas na IOPS e Taxa de Transferência do disco, portanto, não estão sujeitas aos limites de disco.</span><span class="sxs-lookup"><span data-stu-id="0f309-529">Reads served by the cache are not included in the disk IOPS and Throughput, hence not subject to disk limits.</span></span> <span data-ttu-id="0f309-530">O cache tem seu limite de IOPS e Taxa de Transferência separado por VM.</span><span class="sxs-lookup"><span data-stu-id="0f309-530">Cache has its separate IOPS and Throughput limit per VM.</span></span>
>
> <span data-ttu-id="0f309-531">Por exemplo, inicialmente as leituras e gravações são de 60 MB/s e 40 MB/s, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="0f309-531">For example, initially your reads and writes are 60MB/sec and 40MB/sec respectively.</span></span> <span data-ttu-id="0f309-532">Ao longo do tempo, o cache aquece e atende cada vez mais leituras no cache.</span><span class="sxs-lookup"><span data-stu-id="0f309-532">Over time, the cache warms up and serves more and more of the reads from the cache.</span></span> <span data-ttu-id="0f309-533">Assim, você pode obter Taxa de Transferência de gravação mais alta do disco.</span><span class="sxs-lookup"><span data-stu-id="0f309-533">Then, you can get higher write Throughput from the disk.</span></span>
>
>

<span data-ttu-id="0f309-534">*Número de discos*</span><span class="sxs-lookup"><span data-stu-id="0f309-534">*Number of Disks*</span></span>  
<span data-ttu-id="0f309-535">Determine o número de discos que você precisará ao avaliar os requisitos de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f309-535">Determine the number of disks you will need by assessing application requirements.</span></span> <span data-ttu-id="0f309-536">Cada tamanho de VM também tem um limite de número de discos que você pode anexar à VM.</span><span class="sxs-lookup"><span data-stu-id="0f309-536">Each VM size also has a limit on the number of disks that you can attach to the VM.</span></span> <span data-ttu-id="0f309-537">Normalmente, é duas vezes o número de núcleos.</span><span class="sxs-lookup"><span data-stu-id="0f309-537">Typically, this is twice the number of cores.</span></span> <span data-ttu-id="0f309-538">Verifique se o tamanho de VM que você escolheu pode oferecer suporte ao número de discos necessário.</span><span class="sxs-lookup"><span data-stu-id="0f309-538">Ensure that the VM size you choose can support the number of disks needed.</span></span>

<span data-ttu-id="0f309-539">Lembre-se de que os discos do Armazenamento Premium têm recursos de desempenho mais alto comparados aos discos do Armazenamento Padrão.</span><span class="sxs-lookup"><span data-stu-id="0f309-539">Remember, the Premium Storage disks have higher performance capabilities compared to Standard Storage disks.</span></span> <span data-ttu-id="0f309-540">Portanto, se estiver migrando seu aplicativo da VM de IaaS do Azure usando Armazenamento Padrão para Armazenamento Premium, provavelmente você precisará de poucos discos premium para atingir o mesmo desempenho ou mais alto para seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f309-540">Therefore, if you are migrating your application from Azure IaaS VM using Standard Storage to Premium Storage, you will likely need fewer premium disks to achieve the same or higher performance for your application.</span></span>

## <a name="disk-caching"></a><span data-ttu-id="0f309-541">Cache de disco</span><span class="sxs-lookup"><span data-stu-id="0f309-541">Disk Caching</span></span>
<span data-ttu-id="0f309-542">As VMs de alta escala que aproveitam o Armazenamento Premium do Azure têm uma tecnologia de cache de várias camadas chamada BlobCache.</span><span class="sxs-lookup"><span data-stu-id="0f309-542">High Scale VMs that leverage Azure Premium Storage have a multi-tier caching technology called BlobCache.</span></span> <span data-ttu-id="0f309-543">O BlobCache usa uma combinação de RAM da máquina Virtual e SSD local para cache.</span><span class="sxs-lookup"><span data-stu-id="0f309-543">BlobCache uses a combination of the Virtual Machine RAM and local SSD for caching.</span></span> <span data-ttu-id="0f309-544">Esse cache está disponível para os discos persistentes do Armazenamento Premium e os discos locais da VM.</span><span class="sxs-lookup"><span data-stu-id="0f309-544">This cache is available for the Premium Storage persistent disks and the VM local disks.</span></span> <span data-ttu-id="0f309-545">Por padrão, essa configuração de cache é definida como Leitura/Gravação para discos do SO e ReadOnly para discos de dados hospedados no Armazenamento Premium.</span><span class="sxs-lookup"><span data-stu-id="0f309-545">By default, this cache setting is set to Read/Write for OS disks and ReadOnly for data disks hosted on Premium Storage.</span></span> <span data-ttu-id="0f309-546">Com o cache de disco habilitado nos discos do Armazenamento Premium, as VMs de alta escala podem atingir níveis extremamente altos de desempenho que excedem o desempenho do disco subjacente.</span><span class="sxs-lookup"><span data-stu-id="0f309-546">With disk caching enabled on the Premium Storage disks, the high scale VMs can achieve extremely high levels of performance that exceed the underlying disk performance.</span></span>

> [!WARNING]
> <span data-ttu-id="0f309-547">Alterar a configuração de cache de um disco do Azure desanexa e anexa novamente o disco de destino.</span><span class="sxs-lookup"><span data-stu-id="0f309-547">Changing the cache setting of an Azure disk detaches and re-attaches the target disk.</span></span> <span data-ttu-id="0f309-548">Se for o disco do sistema operacional, a VM será reiniciada.</span><span class="sxs-lookup"><span data-stu-id="0f309-548">If it is the operating system disk, the VM is restarted.</span></span> <span data-ttu-id="0f309-549">Pare todos os aplicativos/serviços que podem ser afetados por essa interrupção antes de alterar a configuração de cache do disco.</span><span class="sxs-lookup"><span data-stu-id="0f309-549">Stop all applications/services that might be affected by this disruption before changing the disk cache setting.</span></span>
>
>

<span data-ttu-id="0f309-550">Para saber mais sobre como o BlobCache funciona, consulte a postagem do blog interno [Armazenamento Premium do Azure](https://azure.microsoft.com/blog/azure-premium-storage-now-generally-available-2/) .</span><span class="sxs-lookup"><span data-stu-id="0f309-550">To learn more about how BlobCache works, refer to the Inside [Azure Premium Storage](https://azure.microsoft.com/blog/azure-premium-storage-now-generally-available-2/) blog post.</span></span>

<span data-ttu-id="0f309-551">É importante habilitar o cache no conjunto certo de discos.</span><span class="sxs-lookup"><span data-stu-id="0f309-551">It is important to enable cache on the right set of disks.</span></span> <span data-ttu-id="0f309-552">Se você deve habilitar o cache de disco em um disco premium ou não dependerá do padrão da carga de trabalho que o disco manipulará.</span><span class="sxs-lookup"><span data-stu-id="0f309-552">Whether you should enable disk caching on a premium disk or not will depend on the workload pattern that disk will be handling.</span></span> <span data-ttu-id="0f309-553">A tabela abaixo mostra as configurações padrão de cache para sistema operacional e discos de dados.</span><span class="sxs-lookup"><span data-stu-id="0f309-553">Table below shows the default cache settings for OS and Data disks.</span></span>

| <span data-ttu-id="0f309-554">**Tipo de disco**</span><span class="sxs-lookup"><span data-stu-id="0f309-554">**Disk Type**</span></span> | <span data-ttu-id="0f309-555">**Configuração padrão de cache**</span><span class="sxs-lookup"><span data-stu-id="0f309-555">**Default Cache Setting**</span></span> |
| --- | --- |
| <span data-ttu-id="0f309-556">Disco do sistema operacional</span><span class="sxs-lookup"><span data-stu-id="0f309-556">OS disk</span></span> |<span data-ttu-id="0f309-557">ReadWrite</span><span class="sxs-lookup"><span data-stu-id="0f309-557">ReadWrite</span></span> |
| <span data-ttu-id="0f309-558">Disco de dados</span><span class="sxs-lookup"><span data-stu-id="0f309-558">Data disk</span></span> |<span data-ttu-id="0f309-559">Nenhum</span><span class="sxs-lookup"><span data-stu-id="0f309-559">None</span></span> |

<span data-ttu-id="0f309-560">Veja a seguir as configurações recomendadas de cache de disco para discos de dados:</span><span class="sxs-lookup"><span data-stu-id="0f309-560">Following are the recommended disk cache settings for data disks,</span></span>

| <span data-ttu-id="0f309-561">**Configuração do cache de disco**</span><span class="sxs-lookup"><span data-stu-id="0f309-561">**Disk Caching Setting**</span></span> | <span data-ttu-id="0f309-562">**Recomendação sobre quando usar essa configuração**</span><span class="sxs-lookup"><span data-stu-id="0f309-562">**Recommendation on when to use this setting**</span></span> |
| --- | --- |
| <span data-ttu-id="0f309-563">Nenhum</span><span class="sxs-lookup"><span data-stu-id="0f309-563">None</span></span> |<span data-ttu-id="0f309-564">Configure o cache do host como None para discos de gravação pesada e somente gravação.</span><span class="sxs-lookup"><span data-stu-id="0f309-564">Configure host-cache as None for write-only and write-heavy disks.</span></span> |
| <span data-ttu-id="0f309-565">ReadOnly</span><span class="sxs-lookup"><span data-stu-id="0f309-565">ReadOnly</span></span> |<span data-ttu-id="0f309-566">Configure o cache do host como ReadOnly para discos de leitura/gravação e somente leitura.</span><span class="sxs-lookup"><span data-stu-id="0f309-566">Configure host-cache as ReadOnly for read-only and read-write disks.</span></span> |
| <span data-ttu-id="0f309-567">ReadWrite</span><span class="sxs-lookup"><span data-stu-id="0f309-567">ReadWrite</span></span> |<span data-ttu-id="0f309-568">Configure o cache do host como ReadWrite somente se o aplicativo tratar adequadamente a gravação de dados em cache em discos persistentes quando necessário.</span><span class="sxs-lookup"><span data-stu-id="0f309-568">Configure host-cache as ReadWrite only if your application properly  handles writing cached data to persistent disks when needed.</span></span> |

<span data-ttu-id="0f309-569">*ReadOnly*</span><span class="sxs-lookup"><span data-stu-id="0f309-569">*ReadOnly*</span></span>  
<span data-ttu-id="0f309-570">Ao configurar o cache ReadOnly em discos de dados do Armazenamento Premium, você pode obter baixa latência de leitura e IOPS de leitura e Taxa de Transferência muito altas para seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f309-570">By configuring ReadOnly caching on Premium Storage data disks, you can achieve low Read latency and get very high Read IOPS and Throughput for your application.</span></span> <span data-ttu-id="0f309-571">Isso se deve a dois motivos:</span><span class="sxs-lookup"><span data-stu-id="0f309-571">This is due two reasons,</span></span>

1. <span data-ttu-id="0f309-572">As leituras executadas no cache, que está na memória da VM e na SSD local, são muito mais rápidas do que as leituras no disco de dados, que está no armazenamento blob do Azure.</span><span class="sxs-lookup"><span data-stu-id="0f309-572">Reads performed from cache, which is on the VM memory and local SSD, are much faster than reads from the data disk, which is on the Azure blob storage.</span></span>  
2. <span data-ttu-id="0f309-573">O Armazenamento Premium não conta as leituras atendidas no cache para IOPS e Taxa de Transferência do disco.</span><span class="sxs-lookup"><span data-stu-id="0f309-573">Premium Storage does not count the Reads served from cache, towards the disk IOPS and Throughput.</span></span> <span data-ttu-id="0f309-574">Portanto, o aplicativo é capaz de atingir um total mais alto de IOPS e Taxa de Transferência.</span><span class="sxs-lookup"><span data-stu-id="0f309-574">Therefore, your application is able to achieve higher total IOPS and Throughput.</span></span>

<span data-ttu-id="0f309-575">*ReadWrite*</span><span class="sxs-lookup"><span data-stu-id="0f309-575">*ReadWrite*</span></span>  
<span data-ttu-id="0f309-576">Por padrão, os discos do sistema operacional têm o cache ReadWrite habilitado.</span><span class="sxs-lookup"><span data-stu-id="0f309-576">By default, the OS disks have ReadWrite caching enabled.</span></span> <span data-ttu-id="0f309-577">Recentemente, adicionamos suporte ao cache ReadWrite também nos discos de dados.</span><span class="sxs-lookup"><span data-stu-id="0f309-577">We have recently added support for ReadWrite caching on data disks as well.</span></span> <span data-ttu-id="0f309-578">Se estiver usando o cache ReadWrite, você deverá ter uma maneira adequada de gravar os dados do cache nos discos persistentes.</span><span class="sxs-lookup"><span data-stu-id="0f309-578">If you are using ReadWrite caching, you must have a proper way to write the data from cache to persistent disks.</span></span> <span data-ttu-id="0f309-579">Por exemplo, o SQL Server manipula a gravação de dados em cache nos discos de armazenamento persistentes por sua própria conta.</span><span class="sxs-lookup"><span data-stu-id="0f309-579">For example, SQL Server handles writing cached data to the persistent storage disks on its own.</span></span> <span data-ttu-id="0f309-580">Usar o cache ReadWrite com um aplicativo que não manipule a persistência dos dados necessários pode levar à perda de dados no caso de falha da VM.</span><span class="sxs-lookup"><span data-stu-id="0f309-580">Using ReadWrite cache with an application that does not handle persisting the required data can lead to data loss, if the VM crashes.</span></span>

<span data-ttu-id="0f309-581">Por exemplo, você pode aplicar essas diretrizes ao SQL Server em execução no Armazenamento Premium seguindo estes passos.</span><span class="sxs-lookup"><span data-stu-id="0f309-581">As an example, you can apply these guidelines to SQL Server running on Premium Storage by doing the following,</span></span>

1. <span data-ttu-id="0f309-582">Configure o cache "ReadOnly" em discos do Armazenamento Premium que hospedam arquivos de dados.</span><span class="sxs-lookup"><span data-stu-id="0f309-582">Configure "ReadOnly" cache on premium storage disks hosting data files.</span></span>  
   <span data-ttu-id="0f309-583">a.</span><span class="sxs-lookup"><span data-stu-id="0f309-583">a.</span></span>  <span data-ttu-id="0f309-584">A leitura rápida no cache reduz o tempo de consulta do SQL Server, uma vez que as páginas de dados são recuperadas muito mais rapidamente do cache do que diretamente dos discos de dados.</span><span class="sxs-lookup"><span data-stu-id="0f309-584">The fast reads from cache lower the SQL Server query time since data pages are retrieved much faster from the cache compared to directly from the data disks.</span></span>  
   <span data-ttu-id="0f309-585">b.</span><span class="sxs-lookup"><span data-stu-id="0f309-585">b.</span></span>  <span data-ttu-id="0f309-586">Atender às leituras no cache, significa que há Taxa de Transferência adicional disponível nos discos de dados premium.</span><span class="sxs-lookup"><span data-stu-id="0f309-586">Serving reads from cache, means there is additional Throughput available from premium data disks.</span></span> <span data-ttu-id="0f309-587">O SQL Server pode usar essa Taxa de Transferência adicional para recuperar mais páginas de dados e outras operações, como backup/restauração, cargas em lote e recriações de índice.</span><span class="sxs-lookup"><span data-stu-id="0f309-587">SQL Server can use this additional Throughput towards retrieving more data pages and other operations like backup/restore, batch loads, and index rebuilds.</span></span>  
2. <span data-ttu-id="0f309-588">Configure o cache "None" nos discos do Armazenamento Premium que hospedam os arquivos de log.</span><span class="sxs-lookup"><span data-stu-id="0f309-588">Configure "None" cache on premium storage disks hosting the log files.</span></span>  
   <span data-ttu-id="0f309-589">a.</span><span class="sxs-lookup"><span data-stu-id="0f309-589">a.</span></span>  <span data-ttu-id="0f309-590">Os arquivos de log têm basicamente operações pesadas de gravação.</span><span class="sxs-lookup"><span data-stu-id="0f309-590">Log files have primarily write-heavy operations.</span></span> <span data-ttu-id="0f309-591">Sendo assim, eles não se beneficiam do cache ReadOnly.</span><span class="sxs-lookup"><span data-stu-id="0f309-591">Therefore, they do not benefit from the ReadOnly cache.</span></span>

## <a name="disk-striping"></a><span data-ttu-id="0f309-592">Distribuição de disco</span><span class="sxs-lookup"><span data-stu-id="0f309-592">Disk Striping</span></span>
<span data-ttu-id="0f309-593">Quando uma VM de alta escala é anexada aos vários discos persistentes do Armazenamento Premium, os discos podem ser divididos em conjunto para agregar a respectiva capacidade de armazenamento, IOPS e largura de banda.</span><span class="sxs-lookup"><span data-stu-id="0f309-593">When a high scale VM is attached with several premium storage persistent disks, the disks can be striped together to aggregate their IOPs, bandwidth, and storage capacity.</span></span>

<span data-ttu-id="0f309-594">No Windows, você pode usar Espaços de Armazenamento para dividir discos em conjunto.</span><span class="sxs-lookup"><span data-stu-id="0f309-594">On Windows, you can use Storage Spaces to stripe disks together.</span></span> <span data-ttu-id="0f309-595">É preciso configurar uma coluna para cada disco em um pool.</span><span class="sxs-lookup"><span data-stu-id="0f309-595">You must configure one column for each disk in a pool.</span></span> <span data-ttu-id="0f309-596">Caso contrário, o desempenho geral do volume distribuído poderá ser menor que o esperado devido a uma distribuição irregular do tráfego entre os discos.</span><span class="sxs-lookup"><span data-stu-id="0f309-596">Otherwise, the overall performance of striped volume can be lower than expected, due to uneven distribution of traffic across the disks.</span></span>

<span data-ttu-id="0f309-597">Importante: usando a interface de usuário do Gerenciador de Servidores, você pode definir o número total de colunas até 8 para um volume distribuído.</span><span class="sxs-lookup"><span data-stu-id="0f309-597">Important: Using Server Manager UI, you can set the total number of columns up to 8 for a striped volume.</span></span> <span data-ttu-id="0f309-598">Ao anexar mais de 8 discos, use o PowerShell para criar o volume.</span><span class="sxs-lookup"><span data-stu-id="0f309-598">When attaching more than 8 disks, use PowerShell to create the volume.</span></span> <span data-ttu-id="0f309-599">Usando o PowerShell, é possível definir o número de colunas como igual ao número de discos.</span><span class="sxs-lookup"><span data-stu-id="0f309-599">Using PowerShell, you can set the number of columns equal to the number of disks.</span></span> <span data-ttu-id="0f309-600">Por exemplo, se houver 16 discos em um único conjunto de distribuição; especifique 16 colunas no parâmetro *NumberOfColumns* do cmdlet *New-VirtualDisk* do PowerShell.</span><span class="sxs-lookup"><span data-stu-id="0f309-600">For example, if there are 16 disks in a single stripe set; specify 16 columns in the *NumberOfColumns* parameter of the *New-VirtualDisk* PowerShell cmdlet.</span></span>

<span data-ttu-id="0f309-601">No Linux, use o utilitário MDADM para distribuir os discos em conjunto.</span><span class="sxs-lookup"><span data-stu-id="0f309-601">On Linux, use the MDADM utility to stripe disks together.</span></span> <span data-ttu-id="0f309-602">Para ver etapas detalhadas sobre como distribuir discos no Linux, consulte [Configurar o Software RAID no Linux](../virtual-machines/linux/configure-raid.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="0f309-602">For detailed steps on striping disks on Linux refer to [Configure Software RAID on Linux](../virtual-machines/linux/configure-raid.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span>

<span data-ttu-id="0f309-603">*Tamanho da distribuição*</span><span class="sxs-lookup"><span data-stu-id="0f309-603">*Stripe Size*</span></span>  
<span data-ttu-id="0f309-604">Uma configuração importante na distribuição de disco é o tamanho dela.</span><span class="sxs-lookup"><span data-stu-id="0f309-604">An important configuration in disk striping is the stripe size.</span></span> <span data-ttu-id="0f309-605">O tamanho da distribuição ou tamanho do bloco é a menor parte de dados que o aplicativo pode incluir em um volume distribuído.</span><span class="sxs-lookup"><span data-stu-id="0f309-605">The stripe size or block size is the smallest chunk of data that application can address on a striped volume.</span></span> <span data-ttu-id="0f309-606">O tamanho da distribuição que você configura depende do tipo de aplicativo e de seu padrão de solicitação.</span><span class="sxs-lookup"><span data-stu-id="0f309-606">The stripe size you configure depends on the type of application and its request pattern.</span></span> <span data-ttu-id="0f309-607">Se você escolher o tamanho de distribuição errado, isso pode levar ao alinhamento incorreto de E/S, o que leva à degradação de desempenho do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f309-607">If you choose the wrong stripe size, it could lead to IO misalignment, which leads to degraded performance of your application.</span></span>

<span data-ttu-id="0f309-608">Por exemplo, se uma solicitação de E/S gerada pelo seu aplicativo for maior que o tamanho da distribuição do disco, o sistema de armazenamento a gravará entre limites de unidade de distribuição em mais de um disco.</span><span class="sxs-lookup"><span data-stu-id="0f309-608">For example, if an IO request generated by your application is bigger than the disk stripe size, the storage system writes it across stripe unit boundaries on more than one disk.</span></span> <span data-ttu-id="0f309-609">Quando for a hora de acessar esses dados, ele terá que procurar em mais de uma unidade de distribuição para concluir a solicitação.</span><span class="sxs-lookup"><span data-stu-id="0f309-609">When it is time to access that data, it will have to seek across more than one stripe units to complete the request.</span></span> <span data-ttu-id="0f309-610">O efeito cumulativo de tal comportamento pode levar à degradação substancial de desempenho.</span><span class="sxs-lookup"><span data-stu-id="0f309-610">The cumulative effect of such behavior can lead to substantial performance degradation.</span></span> <span data-ttu-id="0f309-611">Por outro lado, se o tamanho da solicitação de E/S for menor que o tamanho da distribuição e se ela for de natureza aleatória, as solicitações de E/S poderão ser adicionadas no mesmo disco, causando um afunilamento e, por fim, a degradação do desempenho de E/S.</span><span class="sxs-lookup"><span data-stu-id="0f309-611">On the other hand, if the IO request size is smaller than stripe size, and if it is random in nature, the IO requests may add up on the same disk causing a bottleneck and ultimately degrading the IO performance.</span></span>

<span data-ttu-id="0f309-612">De acordo com o tipo de carga de trabalho que o aplicativo está executando, escolha um tamanho de distribuição apropriado.</span><span class="sxs-lookup"><span data-stu-id="0f309-612">Depending on the type of workload your application is running, choose an appropriate stripe size.</span></span> <span data-ttu-id="0f309-613">Para solicitações pequenas e aleatórias de E/S, use um tamanho de distribuição menor.</span><span class="sxs-lookup"><span data-stu-id="0f309-613">For random small IO requests, use a smaller stripe size.</span></span> <span data-ttu-id="0f309-614">Já para solicitações de E/S grandes e sequenciais, use um tamanho de distribuição maior.</span><span class="sxs-lookup"><span data-stu-id="0f309-614">Whereas, for large sequential IO requests use a larger stripe size.</span></span> <span data-ttu-id="0f309-615">Descubra as recomendações de tamanho de distribuição para o aplicativo que será executado no Armazenamento Premium.</span><span class="sxs-lookup"><span data-stu-id="0f309-615">Find out the stripe size recommendations for the application you will be running on Premium Storage.</span></span> <span data-ttu-id="0f309-616">Para SQL Server, configure o tamanho da distribuição de 64 KB para cargas de trabalho OLTP e 256 KB para cargas de trabalho de data warehouse.</span><span class="sxs-lookup"><span data-stu-id="0f309-616">For SQL Server, configure stripe size of 64KB for OLTP workloads and 256KB for data warehousing workloads.</span></span> <span data-ttu-id="0f309-617">Confira [Melhores práticas de desempenho para o SQL Server em VMs do Azure](../virtual-machines/windows/sql/virtual-machines-windows-sql-performance.md#disks-guidance) para saber mais.</span><span class="sxs-lookup"><span data-stu-id="0f309-617">See [Performance best practices for SQL Server on Azure VMs](../virtual-machines/windows/sql/virtual-machines-windows-sql-performance.md#disks-guidance) to learn more.</span></span>

> [!NOTE]
> <span data-ttu-id="0f309-618">você pode usar a distribuição com um máximo de 32 discos do armazenamento premium em uma VM série DS e 64 discos do armazenamento premium em uma VM série GS.</span><span class="sxs-lookup"><span data-stu-id="0f309-618">You can stripe together a maximum of 32 premium storage disks on a DS series VM and 64 premium storage disks on a GS series VM.</span></span>
>
>

## <a name="multi-threading"></a><span data-ttu-id="0f309-619">Multithreading</span><span class="sxs-lookup"><span data-stu-id="0f309-619">Multi-threading</span></span>
<span data-ttu-id="0f309-620">O Azure projetou a plataforma Armazenamento Premium para ser extremamente paralela.</span><span class="sxs-lookup"><span data-stu-id="0f309-620">Azure has designed Premium Storage platform to be massively parallel.</span></span> <span data-ttu-id="0f309-621">Portanto, um aplicativo com multithread atinge desempenho muito mais alto que um aplicativo de único thread.</span><span class="sxs-lookup"><span data-stu-id="0f309-621">Therefore, a multi-threaded application achieves much higher performance than a single-threaded application.</span></span> <span data-ttu-id="0f309-622">Um aplicativo com multithread divide as tarefas entre vários threads e aumenta a eficiência de sua execução ao utilizar ao máximo os recursos de VM e disco.</span><span class="sxs-lookup"><span data-stu-id="0f309-622">A multi-threaded application splits up its tasks across multiple threads and increases efficiency of its execution by utilizing the VM and disk resources to the maximum.</span></span>

<span data-ttu-id="0f309-623">Por exemplo, se o aplicativo estiver em execução em uma VM de único núcleo usando dois threads, a CPU poderá alternar entre os dois threads para obter eficiência.</span><span class="sxs-lookup"><span data-stu-id="0f309-623">For example, if your application is running on a single core VM using two threads, the CPU can switch between the two threads to achieve efficiency.</span></span> <span data-ttu-id="0f309-624">Enquanto um thread está aguardando em um disco que a E/S seja concluída, a CPU pode alternar para o outro thread.</span><span class="sxs-lookup"><span data-stu-id="0f309-624">While one thread is waiting on a disk IO to complete, the CPU can switch to the other thread.</span></span> <span data-ttu-id="0f309-625">Dessa forma, dois threads podem fazer mais do que um único thread.</span><span class="sxs-lookup"><span data-stu-id="0f309-625">In this way, two threads can accomplish more than a single thread would.</span></span> <span data-ttu-id="0f309-626">Se a VM tiver mais de um núcleo, ela diminui ainda mais o tempo de execução, uma vez que cada núcleo pode executar tarefas paralelamente.</span><span class="sxs-lookup"><span data-stu-id="0f309-626">If the VM has more than one core, it further decreases running time since each core can execute tasks in parallel.</span></span>

<span data-ttu-id="0f309-627">Você não poderá alterar a forma como um aplicativo pronto para uso implementa único thread ou multithreading.</span><span class="sxs-lookup"><span data-stu-id="0f309-627">You may not be able to change the way an off-the-shelf application implements single threading or multi-threading.</span></span> <span data-ttu-id="0f309-628">Por exemplo, o SQL Server é capaz de lidar com várias CPUs e vários núcleos.</span><span class="sxs-lookup"><span data-stu-id="0f309-628">For example, SQL Server is capable of handling multi-CPU and multi-core.</span></span> <span data-ttu-id="0f309-629">No entanto, o SQL Server decide sob quais condições ele utilizará um ou mais threads para processar uma consulta.</span><span class="sxs-lookup"><span data-stu-id="0f309-629">However, SQL Server decides under what conditions it will leverage one or more threads to process a query.</span></span> <span data-ttu-id="0f309-630">Ele pode executar consultas e criar índices usando multithreading.</span><span class="sxs-lookup"><span data-stu-id="0f309-630">It can run queries and build indexes using multi-threading.</span></span> <span data-ttu-id="0f309-631">Para uma consulta que envolva união de tabelas grandes e classificação de dados antes do retorno ao usuário, o SQL Server provavelmente usará vários threads.</span><span class="sxs-lookup"><span data-stu-id="0f309-631">For a query that involves joining large tables and sorting data before returning to the user, SQL Server will likely use multiple threads.</span></span> <span data-ttu-id="0f309-632">No entanto, um usuário não pode controlar se o SQL Server executará uma consulta usando um único thread ou vários threads.</span><span class="sxs-lookup"><span data-stu-id="0f309-632">However, a user cannot control whether SQL Server executes a query using a single thread or multiple threads.</span></span>

<span data-ttu-id="0f309-633">Há definições de configuração que você pode alterar para influenciar esse multithreading ou processamento paralelo de um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f309-633">There are configuration settings that you can alter to influence this multi-threading or parallel processing of an application.</span></span> <span data-ttu-id="0f309-634">Por exemplo, no caso do SQL Server, ele é a configuração máxima do grau de paralelismo.</span><span class="sxs-lookup"><span data-stu-id="0f309-634">For example, in case of SQL Server it is the maximum Degree of Parallelism configuration.</span></span> <span data-ttu-id="0f309-635">Essa configuração chamada MAXDOP, permite que você configure o número máximo de processadores que o SQL Server pode usar no processamento paralelo.</span><span class="sxs-lookup"><span data-stu-id="0f309-635">This setting called MAXDOP, allows you to configure the maximum number of processors SQL Server can use when parallel processing.</span></span> <span data-ttu-id="0f309-636">É possível configurar MAXDOP para consultas individuais ou operações de índice.</span><span class="sxs-lookup"><span data-stu-id="0f309-636">You can configure MAXDOP for individual queries or index operations.</span></span> <span data-ttu-id="0f309-637">Isso é benéfico quando você deseja equilibrar recursos do sistema para um aplicativo crítico de desempenho.</span><span class="sxs-lookup"><span data-stu-id="0f309-637">This is beneficial when you want to balance resources of your system for a performance critical application.</span></span>

<span data-ttu-id="0f309-638">Por exemplo, digamos que seu aplicativo que usa SQL Server está executando uma consulta grande e uma operação de índice ao mesmo tempo.</span><span class="sxs-lookup"><span data-stu-id="0f309-638">For example, say your application using SQL Server is executing a large query and an index operation at the same time.</span></span> <span data-ttu-id="0f309-639">Vamos supor que você gostaria que a operação de índice tivesse um desempenho melhor do que a consulta grande.</span><span class="sxs-lookup"><span data-stu-id="0f309-639">Let us assume that you wanted the index operation to be more performant compared to the large query.</span></span> <span data-ttu-id="0f309-640">Nesse caso, você pode definir o valor MAXDOP da operação de índice para que seja maior que o valor MAXDOP da consulta.</span><span class="sxs-lookup"><span data-stu-id="0f309-640">In such a case, you can set MAXDOP value of the index operation to be higher than the MAXDOP value for the query.</span></span> <span data-ttu-id="0f309-641">Dessa forma, o SQL Server tem maior número de processadores que pode aproveitar para a operação de índice em comparação ao número de processadores que pode dedicar à consulta grande.</span><span class="sxs-lookup"><span data-stu-id="0f309-641">This way, SQL Server has more number of processors that it can leverage for the index operation compared to the number of processors it can dedicate to the large query.</span></span> <span data-ttu-id="0f309-642">Lembre-se de que você não controla o número de threads que o SQL Server usará para cada operação.</span><span class="sxs-lookup"><span data-stu-id="0f309-642">Remember, you do not control the number of threads SQL Server will use for each operation.</span></span> <span data-ttu-id="0f309-643">É possível controlar o número máximo de processadores que está sendo dedicado ao multithreading.</span><span class="sxs-lookup"><span data-stu-id="0f309-643">You can control the maximum number of processors being dedicated for multi-threading.</span></span>

<span data-ttu-id="0f309-644">Saiba mais sobre [Graus de Paralelismo](https://technet.microsoft.com/library/ms188611.aspx) no SQL Server.</span><span class="sxs-lookup"><span data-stu-id="0f309-644">Learn more about [Degrees of Parallelism](https://technet.microsoft.com/library/ms188611.aspx) in SQL Server.</span></span> <span data-ttu-id="0f309-645">Descubra as configurações que influenciam o multithreading em seu aplicativo e as respectivas configurações para otimizar o desempenho.</span><span class="sxs-lookup"><span data-stu-id="0f309-645">Find out such settings that influence multi-threading in your application and their configurations to optimize performance.</span></span>

## <a name="queue-depth"></a><span data-ttu-id="0f309-646">Profundidade da Fila</span><span class="sxs-lookup"><span data-stu-id="0f309-646">Queue Depth</span></span>
<span data-ttu-id="0f309-647">A Profundidade da Fila, ou Comprimento da Fila, ou Tamanho da Fila é o número de solicitações de E/S pendentes no sistema.</span><span class="sxs-lookup"><span data-stu-id="0f309-647">The Queue Depth or Queue Length or Queue Size is the number of pending IO requests in the system.</span></span> <span data-ttu-id="0f309-648">O valor da profundidade da fila determina quantas operações de E/S o aplicativo pode alinhar, as quais os discos de armazenamento processarão.</span><span class="sxs-lookup"><span data-stu-id="0f309-648">The value of Queue Depth determines how many IO operations your application can line up, which the storage disks will be processing.</span></span> <span data-ttu-id="0f309-649">Isso afeta os três indicadores de desempenho de aplicativo que abordamos neste artigo: IOPS, Taxa de Transferência e latência.</span><span class="sxs-lookup"><span data-stu-id="0f309-649">It affects all the three application performance indicators that we discussed in this article viz., IOPS, Throughput and Latency.</span></span>

<span data-ttu-id="0f309-650">A profundidade da fila e o multithreading estão intimamente relacionados.</span><span class="sxs-lookup"><span data-stu-id="0f309-650">Queue Depth and multi-threading are closely related.</span></span> <span data-ttu-id="0f309-651">O valor de profundidade da fila indica quanto multithreading pode ser obtido pelo aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f309-651">The Queue Depth value indicates how much multi-threading can be achieved by the application.</span></span> <span data-ttu-id="0f309-652">Se a profundidade da fila for grande, o aplicativo poderá executar mais operações simultaneamente. Em outras  palavras, mais multithreading.</span><span class="sxs-lookup"><span data-stu-id="0f309-652">If the Queue Depth is large, application can execute more operations concurrently, in other words, more multi-threading.</span></span> <span data-ttu-id="0f309-653">Se a profundidade da fila for pequena, mesmo que o aplicativo esteja com multithread, ele não terá solicitações suficientes alinhadas para execução simultânea.</span><span class="sxs-lookup"><span data-stu-id="0f309-653">If the Queue Depth is small, even though application is multi-threaded, it will not have enough requests lined up for concurrent execution.</span></span>

<span data-ttu-id="0f309-654">Normalmente, aplicativos prontos para uso não permitem que você altere a profundidade da fila, pois se definida incorretamente, fará mais mal do que bem.</span><span class="sxs-lookup"><span data-stu-id="0f309-654">Typically, off the shelf applications do not allow you to change the queue depth, because if set incorrectly it will do more harm than good.</span></span> <span data-ttu-id="0f309-655">Os aplicativos definirão o valor correto da profundidade da fila para obter o desempenho ideal.</span><span class="sxs-lookup"><span data-stu-id="0f309-655">Applications will set the right value of queue depth to get the optimal performance.</span></span> <span data-ttu-id="0f309-656">No entanto, é importante compreender esse conceito para que você possa solucionar problemas de desempenho com seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f309-656">However, it is important to understand this concept so that you can troubleshoot performance issues with your application.</span></span> <span data-ttu-id="0f309-657">Também é possível observar os efeitos da profundidade da fila executando ferramentas de parâmetros de comparação no sistema.</span><span class="sxs-lookup"><span data-stu-id="0f309-657">You can also observe the effects of queue depth by running benchmarking tools on your system.</span></span>

<span data-ttu-id="0f309-658">Alguns aplicativos fornecem configurações para influenciar a profundidade da fila.</span><span class="sxs-lookup"><span data-stu-id="0f309-658">Some applications provide settings to influence the Queue Depth.</span></span> <span data-ttu-id="0f309-659">Por exemplo, a configuração MAXDOP (grau máximo de paralelismo) do SQL Server explicada na seção anterior.</span><span class="sxs-lookup"><span data-stu-id="0f309-659">For example, the MAXDOP (maximum degree of parallelism) setting in SQL Server explained in previous section.</span></span> <span data-ttu-id="0f309-660">MAXDOP é uma forma de influenciar a profundidade da fila e o multithreading, embora isso não altere diretamente o valor da profundidade da fila do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="0f309-660">MAXDOP is a way to influence Queue Depth and multi-threading, although it does not directly change the Queue Depth value of SQL Server.</span></span>

<span data-ttu-id="0f309-661">*Profundidade Alta de Fila*</span><span class="sxs-lookup"><span data-stu-id="0f309-661">*High Queue Depth*</span></span>  
<span data-ttu-id="0f309-662">Uma profundidade alta de fila alinha mais operações no disco.</span><span class="sxs-lookup"><span data-stu-id="0f309-662">A high queue depth lines up more operations on the disk.</span></span> <span data-ttu-id="0f309-663">O disco sabe da próxima solicitação na fila antecipadamente.</span><span class="sxs-lookup"><span data-stu-id="0f309-663">The disk knows the next request in its queue ahead of time.</span></span> <span data-ttu-id="0f309-664">Consequentemente, o disco pode agendar operações com antecedência e processá-las em uma sequência ideal.</span><span class="sxs-lookup"><span data-stu-id="0f309-664">Consequently, the disk can schedule operations ahead of time and process them in an optimal sequence.</span></span> <span data-ttu-id="0f309-665">Uma vez que o aplicativo está enviando mais solicitações ao disco, este pode processar mais E/S paralelamente.</span><span class="sxs-lookup"><span data-stu-id="0f309-665">Since the application is sending more requests to the disk, the disk can process more parallel IOs.</span></span> <span data-ttu-id="0f309-666">No fim, o aplicativo poderá atingir IOPS mais alta.</span><span class="sxs-lookup"><span data-stu-id="0f309-666">Ultimately, the application will be able to achieve higher IOPS.</span></span> <span data-ttu-id="0f309-667">Uma vez que o aplicativo está processando mais solicitações, a Taxa de Transferência total do aplicativo também aumenta.</span><span class="sxs-lookup"><span data-stu-id="0f309-667">Since application is processing more requests, the total Throughput of the application also increases.</span></span>

<span data-ttu-id="0f309-668">Normalmente, um aplicativo pode atingir a taxa máxima de transferência com 8 a pouco mais de 16 E/S pendentes por disco anexado.</span><span class="sxs-lookup"><span data-stu-id="0f309-668">Typically, an application can achieve maximum Throughput with 8-16+ outstanding IOs per attached disk.</span></span> <span data-ttu-id="0f309-669">Se a profundidade de fila for um, o aplicativo não está enviando E/S suficiente ao sistema, e ele processará menos quantidade em um determinado período.</span><span class="sxs-lookup"><span data-stu-id="0f309-669">If a Queue Depth is one, application is not pushing enough IOs to the system, and it will process less amount of in a given period.</span></span> <span data-ttu-id="0f309-670">Em outras palavras, Taxa de Transferência menor.</span><span class="sxs-lookup"><span data-stu-id="0f309-670">In other words, less Throughput.</span></span>

<span data-ttu-id="0f309-671">Por exemplo, no SQL Server, configurar o valor MAXDOP de uma consulta para "4" informa ao SQL Server que ele pode usar até quatro núcleos para executar a consulta.</span><span class="sxs-lookup"><span data-stu-id="0f309-671">For example, in SQL Server, setting the MAXDOP value for a query to "4" informs SQL Server that it can use up to four cores to execute the query.</span></span> <span data-ttu-id="0f309-672">O SQL Server determinará qual é o melhor valor de profundidade de fila e o número de núcleos para a execução da consulta.</span><span class="sxs-lookup"><span data-stu-id="0f309-672">SQL Server will determine what is best queue depth value and the number of cores for the query execution.</span></span>

<span data-ttu-id="0f309-673">*Profundidade Ideal de Fila*</span><span class="sxs-lookup"><span data-stu-id="0f309-673">*Optimal Queue Depth*</span></span>  
<span data-ttu-id="0f309-674">Um valor muito alto de profundidade de fila também tem suas desvantagens.</span><span class="sxs-lookup"><span data-stu-id="0f309-674">Very high queue depth value also has its drawbacks.</span></span> <span data-ttu-id="0f309-675">Se o valor de profundidade da fila for muito alto, o aplicativo tentará impulsionar uma IOPS muito alta.</span><span class="sxs-lookup"><span data-stu-id="0f309-675">If queue depth value is too high, the application will try to drive very high IOPS.</span></span> <span data-ttu-id="0f309-676">A menos que o aplicativo tenha discos persistentes com provisão suficiente de IOPS, isso pode afetar negativamente as latências do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f309-676">Unless application has persistent disks with sufficient provisioned IOPS, this can negatively affect application latencies.</span></span> <span data-ttu-id="0f309-677">A fórmula a seguir mostra a relação entre a IOPS, a Latência e a Profundidade da Fila.</span><span class="sxs-lookup"><span data-stu-id="0f309-677">Following formula shows the relationship between IOPS, Latency and Queue Depth.</span></span>  
    ![](media/storage-premium-storage-performance/image6.png)

<span data-ttu-id="0f309-678">Você não deve configurar a profundidade da fila para algum valor alto, mas para um valor ideal, o que pode fornecer IOPS suficiente ao aplicativo sem afetar as latências.</span><span class="sxs-lookup"><span data-stu-id="0f309-678">You should not configure Queue Depth to any high value, but to an optimal value, which can deliver enough IOPS for the application without affecting latencies.</span></span> <span data-ttu-id="0f309-679">Por exemplo, se a latência do aplicativo precisa ser de 1 milissegundo, a profundidade da fila necessária para alcançar 5.000 IOPS será, QD = 5000 x 0,001 = 5.</span><span class="sxs-lookup"><span data-stu-id="0f309-679">For example, if the application latency needs to be 1 millisecond, the Queue Depth required to achieve 5,000 IOPS is, QD = 5000 x 0.001 = 5.</span></span>

<span data-ttu-id="0f309-680">*Profundidade da fila para volume distribuído*</span><span class="sxs-lookup"><span data-stu-id="0f309-680">*Queue Depth for Striped Volume*</span></span>  
<span data-ttu-id="0f309-681">Para um volume distribuído, mantenha uma profundidade de fila alta o suficiente, de tal forma que cada disco tenha uma profundidade de fila de pico individualmente.</span><span class="sxs-lookup"><span data-stu-id="0f309-681">For a striped volume, maintain a high enough queue depth such that, every disk has a peak queue depth individually.</span></span> <span data-ttu-id="0f309-682">Por exemplo, considere um aplicativo que envia uma profundidade de fila de 2 e tenha 4 discos na distribuição.</span><span class="sxs-lookup"><span data-stu-id="0f309-682">For example, consider an application that pushes a queue depth of 2 and there are 4 disks in the stripe.</span></span> <span data-ttu-id="0f309-683">As duas solicitações de E/S vão para os dois discos e os dois discos restantes ficarão ociosos.</span><span class="sxs-lookup"><span data-stu-id="0f309-683">The two IO requests will go to two disks and remaining two disks will be idle.</span></span> <span data-ttu-id="0f309-684">Sendo assim, configure a profundidade da fila para que todos os discos possam estar ocupados.</span><span class="sxs-lookup"><span data-stu-id="0f309-684">Therefore, configure the queue depth such that all the disks can be busy.</span></span> <span data-ttu-id="0f309-685">A fórmula abaixo mostra como determinar a profundidade da fila de volumes distribuídos.</span><span class="sxs-lookup"><span data-stu-id="0f309-685">Formula below shows how to determine the queue depth of striped volumes.</span></span>  
    ![](media/storage-premium-storage-performance/image7.png)

## <a name="throttling"></a><span data-ttu-id="0f309-686">Limitação</span><span class="sxs-lookup"><span data-stu-id="0f309-686">Throttling</span></span>
<span data-ttu-id="0f309-687">O Armazenamento Premium do Azure provisiona um número especificado de IOPS e Taxa de Transferência, dependendo dos tamanhos da VM e do disco que você escolhe.</span><span class="sxs-lookup"><span data-stu-id="0f309-687">Azure Premium Storage provisions specified number of IOPS and Throughput depending on the VM sizes and disk sizes you choose.</span></span> <span data-ttu-id="0f309-688">Sempre que o aplicativo tentar impulsionar IOPS ou Taxa de Transferência acima desses limites com os quais a VM ou o disco podem lidar, o Armazenamento Premium será restrito.</span><span class="sxs-lookup"><span data-stu-id="0f309-688">Anytime your application tries to drive IOPS or Throughput above these limits of what the VM or disk can handle, Premium Storage will throttle it.</span></span> <span data-ttu-id="0f309-689">Isso se manifesta na forma de degradação de desempenho do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f309-689">This manifests in the form of degraded performance in your application.</span></span> <span data-ttu-id="0f309-690">Isso pode significar latência mais alta, Taxa de Transferência mais baixa ou IOPS mais baixa.</span><span class="sxs-lookup"><span data-stu-id="0f309-690">This can mean higher latency, lower Throughput or lower IOPS.</span></span> <span data-ttu-id="0f309-691">Se o Armazenamento Premium não for restrito, o aplicativo poderá falhar completamente, excedendo o que seus recursos são capazes de alcançar.</span><span class="sxs-lookup"><span data-stu-id="0f309-691">If Premium Storage does not throttle, your application could completely fail by exceeding what its resources are capable of achieving.</span></span> <span data-ttu-id="0f309-692">Portanto, para evitar problemas de desempenho devido à limitação, sempre provisione recursos suficientes ao aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f309-692">So, to avoid performance issues due to throttling, always provision sufficient resources for your application.</span></span> <span data-ttu-id="0f309-693">Leve em consideração o que abordamos nas seções acima sobre tamanhos de disco e VM </span><span class="sxs-lookup"><span data-stu-id="0f309-693">Take into consideration what we discussed in the VM sizes and Disk sizes sections above.</span></span> <span data-ttu-id="0f309-694">Os parâmetros de comparação são a melhor maneira de entender de quais recursos você precisará para hospedar o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f309-694">Benchmarking is the best way to figure out what resources you will need to host your application.</span></span>

## <a name="benchmarking"></a><span data-ttu-id="0f309-695">Parâmetros de comparação</span><span class="sxs-lookup"><span data-stu-id="0f309-695">Benchmarking</span></span>
<span data-ttu-id="0f309-696">Os parâmetros de comparação são o processo de simular diferentes cargas de trabalho no aplicativo e avaliar o desempenho do aplicativo para cada carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="0f309-696">Benchmarking is the process of simulating different workloads on your application and measuring the application performance for each workload.</span></span> <span data-ttu-id="0f309-697">Usando as etapas descritas em uma seção anterior, você entendeu os requisitos de desempenho do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f309-697">Using the steps described in an earlier section, you have gathered the application performance requirements.</span></span> <span data-ttu-id="0f309-698">Ao executar ferramentas de parâmetros de comparação nas VMs que hospedam o aplicativo, você poderá determinar os níveis de desempenho que o aplicativo pode atingir com o Armazenamento Premium.</span><span class="sxs-lookup"><span data-stu-id="0f309-698">By running benchmarking tools on the VMs hosting the application, you can determine the performance levels that your application can achieve with Premium Storage.</span></span> <span data-ttu-id="0f309-699">Nesta seção, forneceremos exemplos de parâmetros de comparação de uma VM DS14 padrão provisionada com discos do Armazenamento Premium do Azure.</span><span class="sxs-lookup"><span data-stu-id="0f309-699">In this section, we provide you examples of benchmarking a Standard DS14 VM provisioned with Azure Premium Storage disks.</span></span>

<span data-ttu-id="0f309-700">Usamos ferramentas comuns de parâmetros de comparação, Iometer e FIO, para Windows e Linux, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="0f309-700">We have used common benchmarking tools Iometer and FIO, for Windows and Linux respectively.</span></span> <span data-ttu-id="0f309-701">Essas ferramentas geram vários threads que simulam uma carga de trabalho parecida com uma produção e avaliam o desempenho do sistema.</span><span class="sxs-lookup"><span data-stu-id="0f309-701">These tools spawn multiple threads simulating a production like workload, and measure the system performance.</span></span> <span data-ttu-id="0f309-702">Usando as ferramentas, você pode configurar parâmetros como tamanho do bloco e profundidade da fila, que normalmente você não pode mudar para um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f309-702">Using the tools you can also configure parameters like block size and queue depth, which you normally cannot change for an application.</span></span> <span data-ttu-id="0f309-703">Isso proporciona mais flexibilidade para impulsionar o desempenho máximo em uma VM de alta escala provisionada com discos premium para diferentes tipos de carga de trabalho de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f309-703">This gives you more flexibility to drive the maximum performance on a high scale VM provisioned with premium disks for different types of application workloads.</span></span> <span data-ttu-id="0f309-704">Para saber mais sobre cada ferramenta de parâmetro de comparação, acesse [Iometer](http://www.iometer.org/) e [FIO](http://freecode.com/projects/fio).</span><span class="sxs-lookup"><span data-stu-id="0f309-704">To learn more about each benchmarking tool visit [Iometer](http://www.iometer.org/) and [FIO](http://freecode.com/projects/fio).</span></span>

<span data-ttu-id="0f309-705">Para seguir os exemplos abaixo, crie uma VM DS14 padrão e anexe 11 discos do Armazenamento Premium à VM.</span><span class="sxs-lookup"><span data-stu-id="0f309-705">To follow the examples below, create a Standard DS14 VM and attach 11 Premium Storage disks to the VM.</span></span> <span data-ttu-id="0f309-706">Dos 11 discos, configure dez discos com cache de host como "None" e distribua-os em um volume chamado NoCacheWrites.</span><span class="sxs-lookup"><span data-stu-id="0f309-706">Of the 11 disks, configure 10 disks with host caching as "None" and stripe them into a volume called NoCacheWrites.</span></span> <span data-ttu-id="0f309-707">Configure o cache de host como "ReadOnly" no disco restante e crie um volume chamado CacheReads com esse disco.</span><span class="sxs-lookup"><span data-stu-id="0f309-707">Configure host caching as "ReadOnly" on the remaining disk and create a volume called CacheReads with this disk.</span></span> <span data-ttu-id="0f309-708">Usando essa configuração, você poderá ver o desempenho máximo de Leitura e Gravação de uma VM DS14 padrão.</span><span class="sxs-lookup"><span data-stu-id="0f309-708">Using this setup, you will be able to see the maximum Read and Write performance from a Standard DS14 VM.</span></span> <span data-ttu-id="0f309-709">Para obter as etapas detalhadas sobre como criar uma VM DS14 com discos premium, acesse [Criar e usar uma conta de Armazenamento Premium para um disco de dados da máquina virtual](storage-premium-storage.md).</span><span class="sxs-lookup"><span data-stu-id="0f309-709">For detailed steps about creating a DS14 VM with premium disks, go to [Create and use a Premium Storage account for a virtual machine data disk](storage-premium-storage.md).</span></span>

<span data-ttu-id="0f309-710">*Aquecendo o cache*</span><span class="sxs-lookup"><span data-stu-id="0f309-710">*Warming up the Cache*</span></span>  
<span data-ttu-id="0f309-711">O disco com o cache de host ReadOnly poderá oferecer IOPS mais alta do que o limite do disco.</span><span class="sxs-lookup"><span data-stu-id="0f309-711">The disk with ReadOnly host caching will be able to give higher IOPS than the disk limit.</span></span> <span data-ttu-id="0f309-712">Para atingir esse desempenho máximo de leitura do cache de host, primeiramente você deve aquecer o cache desse disco.</span><span class="sxs-lookup"><span data-stu-id="0f309-712">To get this maximum read performance from the host cache, first you must warm up the cache of this disk.</span></span> <span data-ttu-id="0f309-713">Isso garante que as E/S de leitura que a ferramenta de parâmetros de comparação impulsionará no volume CacheReads realmente atinjam o cache, e não o disco diretamente.</span><span class="sxs-lookup"><span data-stu-id="0f309-713">This ensures that the Read IOs which benchmarking tool will drive on CacheReads volume actually hits the cache and not the disk directly.</span></span> <span data-ttu-id="0f309-714">Os acertos no cache resultam em IOPS adicional do único disco habilitado para cache.</span><span class="sxs-lookup"><span data-stu-id="0f309-714">The cache hits result in additional IOPS from the single cache enabled disk.</span></span>

> <span data-ttu-id="0f309-715">**Importante:**</span><span class="sxs-lookup"><span data-stu-id="0f309-715">**Important:**</span></span>  
> <span data-ttu-id="0f309-716">você deve aquecer o cache antes de executar os parâmetros de comparação, toda vez que a VM é reinicializada.</span><span class="sxs-lookup"><span data-stu-id="0f309-716">You must warm up the cache before running benchmarking, every time VM is rebooted.</span></span>
>
>

#### <a name="iometer"></a><span data-ttu-id="0f309-717">Iometer</span><span class="sxs-lookup"><span data-stu-id="0f309-717">Iometer</span></span>
<span data-ttu-id="0f309-718">[Baixe a ferramenta Iometer](http://sourceforge.net/projects/iometer/files/iometer-stable/2006-07-27/iometer-2006.07.27.win32.i386-setup.exe/download) na VM.</span><span class="sxs-lookup"><span data-stu-id="0f309-718">[Download the Iometer tool](http://sourceforge.net/projects/iometer/files/iometer-stable/2006-07-27/iometer-2006.07.27.win32.i386-setup.exe/download) on the VM.</span></span>

<span data-ttu-id="0f309-719">*Arquivo de teste*</span><span class="sxs-lookup"><span data-stu-id="0f309-719">*Test file*</span></span>  
<span data-ttu-id="0f309-720">O Iometer usa um arquivo de teste que é armazenado no volume no qual você executará o teste de parâmetros de comparação.</span><span class="sxs-lookup"><span data-stu-id="0f309-720">Iometer uses a test file that is stored on the volume on which you will run the benchmarking test.</span></span> <span data-ttu-id="0f309-721">Ele orienta as leituras e gravações nesse arquivo de teste para avaliar a IOPS e a Taxa de Transferência do disco.</span><span class="sxs-lookup"><span data-stu-id="0f309-721">It drives Reads and Writes on this test file to measure the disk IOPS and Throughput.</span></span> <span data-ttu-id="0f309-722">O Iometer criará esse arquivo de teste caso você não tenha fornecido um.</span><span class="sxs-lookup"><span data-stu-id="0f309-722">Iometer creates this test file if you have not provided one.</span></span> <span data-ttu-id="0f309-723">Crie um arquivo de teste de 200 GB chamado iobw.tst nos volumes CacheReads e NoCacheWrites.</span><span class="sxs-lookup"><span data-stu-id="0f309-723">Create a 200GB test file called iobw.tst on the CacheReads and NoCacheWrites volumes.</span></span>

<span data-ttu-id="0f309-724">*Especificações de Acesso*</span><span class="sxs-lookup"><span data-stu-id="0f309-724">*Access Specifications*</span></span>  
<span data-ttu-id="0f309-725">As especificações, o tamanho da E/S de solicitação, a % de leitura/gravação, a % aleatória/sequencial são configurados usando a guia "Especificações de Acesso" no Iometer.</span><span class="sxs-lookup"><span data-stu-id="0f309-725">The specifications, request IO size, % read/write, % random/sequential are configured using the "Access Specifications" tab in Iometer.</span></span> <span data-ttu-id="0f309-726">Crie uma especificação de acesso para cada um dos cenários descritos abaixo.</span><span class="sxs-lookup"><span data-stu-id="0f309-726">Create an access specification for each of the scenarios described below.</span></span> <span data-ttu-id="0f309-727">Crie as especificações de acesso e "Salve" com um nome apropriado como – RandomWrites\_8K, RandomReads\_8K.</span><span class="sxs-lookup"><span data-stu-id="0f309-727">Create the access specifications and "Save" with an appropriate name like – RandomWrites\_8K, RandomReads\_8K.</span></span> <span data-ttu-id="0f309-728">Selecione a especificação correspondente ao executar o cenário de teste.</span><span class="sxs-lookup"><span data-stu-id="0f309-728">Select the corresponding specification when running the test scenario.</span></span>

<span data-ttu-id="0f309-729">Um exemplo de especificações de acesso para o cenário de IOPS de gravação máxima é mostrado abaixo, </span><span class="sxs-lookup"><span data-stu-id="0f309-729">An example of access specifications for maximum Write IOPS scenario is shown below,</span></span>  
    ![](media/storage-premium-storage-performance/image8.png)

<span data-ttu-id="0f309-730">*Especificações de teste de IOPS máxima*</span><span class="sxs-lookup"><span data-stu-id="0f309-730">*Maximum IOPS Test Specifications*</span></span>  
<span data-ttu-id="0f309-731">Para demonstrar a IOPS máxima, use o tamanho de solicitação menor.</span><span class="sxs-lookup"><span data-stu-id="0f309-731">To demonstrate maximum IOPs, use smaller request size.</span></span> <span data-ttu-id="0f309-732">Use o tamanho de solicitação de 8 K e crie especificações para gravações e leituras aleatórias.</span><span class="sxs-lookup"><span data-stu-id="0f309-732">Use 8K request size and create specifications for Random Writes and Reads.</span></span>

| <span data-ttu-id="0f309-733">Especificação de acesso</span><span class="sxs-lookup"><span data-stu-id="0f309-733">Access Specification</span></span> | <span data-ttu-id="0f309-734">Tamanho da solicitação</span><span class="sxs-lookup"><span data-stu-id="0f309-734">Request size</span></span> | <span data-ttu-id="0f309-735">Aleatório %</span><span class="sxs-lookup"><span data-stu-id="0f309-735">Random %</span></span> | <span data-ttu-id="0f309-736">Leitura %</span><span class="sxs-lookup"><span data-stu-id="0f309-736">Read %</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="0f309-737">RandomWrites\_8K</span><span class="sxs-lookup"><span data-stu-id="0f309-737">RandomWrites\_8K</span></span> |<span data-ttu-id="0f309-738">8 K</span><span class="sxs-lookup"><span data-stu-id="0f309-738">8K</span></span> |<span data-ttu-id="0f309-739">100</span><span class="sxs-lookup"><span data-stu-id="0f309-739">100</span></span> |<span data-ttu-id="0f309-740">0</span><span class="sxs-lookup"><span data-stu-id="0f309-740">0</span></span> |
| <span data-ttu-id="0f309-741">RandomReads\_8K</span><span class="sxs-lookup"><span data-stu-id="0f309-741">RandomReads\_8K</span></span> |<span data-ttu-id="0f309-742">8 K</span><span class="sxs-lookup"><span data-stu-id="0f309-742">8K</span></span> |<span data-ttu-id="0f309-743">100</span><span class="sxs-lookup"><span data-stu-id="0f309-743">100</span></span> |<span data-ttu-id="0f309-744">100</span><span class="sxs-lookup"><span data-stu-id="0f309-744">100</span></span> |

<span data-ttu-id="0f309-745">*Especificações de Teste de Taxa de Transferência Máxima*</span><span class="sxs-lookup"><span data-stu-id="0f309-745">*Maximum Throughput Test Specifications*</span></span>  
<span data-ttu-id="0f309-746">Para demonstrar a Taxa de Transferência máxima, use o tamanho de solicitação maior.</span><span class="sxs-lookup"><span data-stu-id="0f309-746">To demonstrate maximum Throughput, use larger request size.</span></span> <span data-ttu-id="0f309-747">Use o tamanho de solicitação de 64 K e crie especificações para gravações e leituras aleatórias.</span><span class="sxs-lookup"><span data-stu-id="0f309-747">Use 64K request size and create specifications for Random Writes and Reads.</span></span>

| <span data-ttu-id="0f309-748">Especificação de acesso</span><span class="sxs-lookup"><span data-stu-id="0f309-748">Access Specification</span></span> | <span data-ttu-id="0f309-749">Tamanho da solicitação</span><span class="sxs-lookup"><span data-stu-id="0f309-749">Request size</span></span> | <span data-ttu-id="0f309-750">Aleatório %</span><span class="sxs-lookup"><span data-stu-id="0f309-750">Random %</span></span> | <span data-ttu-id="0f309-751">Leitura %</span><span class="sxs-lookup"><span data-stu-id="0f309-751">Read %</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="0f309-752">RandomWrites\_64K</span><span class="sxs-lookup"><span data-stu-id="0f309-752">RandomWrites\_64K</span></span> |<span data-ttu-id="0f309-753">64 K</span><span class="sxs-lookup"><span data-stu-id="0f309-753">64K</span></span> |<span data-ttu-id="0f309-754">100</span><span class="sxs-lookup"><span data-stu-id="0f309-754">100</span></span> |<span data-ttu-id="0f309-755">0</span><span class="sxs-lookup"><span data-stu-id="0f309-755">0</span></span> |
| <span data-ttu-id="0f309-756">RandomReads\_64K</span><span class="sxs-lookup"><span data-stu-id="0f309-756">RandomReads\_64K</span></span> |<span data-ttu-id="0f309-757">64 K</span><span class="sxs-lookup"><span data-stu-id="0f309-757">64K</span></span> |<span data-ttu-id="0f309-758">100</span><span class="sxs-lookup"><span data-stu-id="0f309-758">100</span></span> |<span data-ttu-id="0f309-759">100</span><span class="sxs-lookup"><span data-stu-id="0f309-759">100</span></span> |

<span data-ttu-id="0f309-760">*Executando o Teste Iometer*</span><span class="sxs-lookup"><span data-stu-id="0f309-760">*Running the Iometer Test*</span></span>  
<span data-ttu-id="0f309-761">Execute as etapas abaixo para aquecer o cache</span><span class="sxs-lookup"><span data-stu-id="0f309-761">Perform the steps below to warm up cache</span></span>

1. <span data-ttu-id="0f309-762">Crie duas especificações de acesso com os valores mostrados abaixo:</span><span class="sxs-lookup"><span data-stu-id="0f309-762">Create two access specifications with values shown below,</span></span>

   | <span data-ttu-id="0f309-763">Nome</span><span class="sxs-lookup"><span data-stu-id="0f309-763">Name</span></span> | <span data-ttu-id="0f309-764">Tamanho da solicitação</span><span class="sxs-lookup"><span data-stu-id="0f309-764">Request size</span></span> | <span data-ttu-id="0f309-765">Aleatório %</span><span class="sxs-lookup"><span data-stu-id="0f309-765">Random %</span></span> | <span data-ttu-id="0f309-766">Leitura %</span><span class="sxs-lookup"><span data-stu-id="0f309-766">Read %</span></span> |
   | --- | --- | --- | --- |
   | <span data-ttu-id="0f309-767">RandomWrites\_1MB</span><span class="sxs-lookup"><span data-stu-id="0f309-767">RandomWrites\_1MB</span></span> |<span data-ttu-id="0f309-768">1 MB</span><span class="sxs-lookup"><span data-stu-id="0f309-768">1MB</span></span> |<span data-ttu-id="0f309-769">100</span><span class="sxs-lookup"><span data-stu-id="0f309-769">100</span></span> |<span data-ttu-id="0f309-770">0</span><span class="sxs-lookup"><span data-stu-id="0f309-770">0</span></span> |
   | <span data-ttu-id="0f309-771">RandomReads\_1MB</span><span class="sxs-lookup"><span data-stu-id="0f309-771">RandomReads\_1MB</span></span> |<span data-ttu-id="0f309-772">1 MB</span><span class="sxs-lookup"><span data-stu-id="0f309-772">1MB</span></span> |<span data-ttu-id="0f309-773">100</span><span class="sxs-lookup"><span data-stu-id="0f309-773">100</span></span> |<span data-ttu-id="0f309-774">100</span><span class="sxs-lookup"><span data-stu-id="0f309-774">100</span></span> |
2. <span data-ttu-id="0f309-775">Execute o teste Iometer para inicializar o disco do cache com os parâmetros a seguir.</span><span class="sxs-lookup"><span data-stu-id="0f309-775">Run the Iometer test for initializing cache disk with following parameters.</span></span> <span data-ttu-id="0f309-776">Use três threads de trabalho para o volume de destino e uma profundidade de fila de 128.</span><span class="sxs-lookup"><span data-stu-id="0f309-776">Use three worker threads for the target volume and a queue depth of 128.</span></span> <span data-ttu-id="0f309-777">Defina a duração do teste "Tempo de execução" para 2 horas na guia "Configuração do teste".</span><span class="sxs-lookup"><span data-stu-id="0f309-777">Set the "Run time" duration of the test to 2hrs on the "Test Setup" tab.</span></span>

   | <span data-ttu-id="0f309-778">Cenário</span><span class="sxs-lookup"><span data-stu-id="0f309-778">Scenario</span></span> | <span data-ttu-id="0f309-779">Volume de destino</span><span class="sxs-lookup"><span data-stu-id="0f309-779">Target Volume</span></span> | <span data-ttu-id="0f309-780">Nome</span><span class="sxs-lookup"><span data-stu-id="0f309-780">Name</span></span> | <span data-ttu-id="0f309-781">Duração</span><span class="sxs-lookup"><span data-stu-id="0f309-781">Duration</span></span> |
   | --- | --- | --- | --- |
   | <span data-ttu-id="0f309-782">Inicializar disco do cache</span><span class="sxs-lookup"><span data-stu-id="0f309-782">Initialize Cache Disk</span></span> |<span data-ttu-id="0f309-783">CacheReads</span><span class="sxs-lookup"><span data-stu-id="0f309-783">CacheReads</span></span> |<span data-ttu-id="0f309-784">RandomWrites\_1MB</span><span class="sxs-lookup"><span data-stu-id="0f309-784">RandomWrites\_1MB</span></span> |<span data-ttu-id="0f309-785">2 horas</span><span class="sxs-lookup"><span data-stu-id="0f309-785">2hrs</span></span> |
3. <span data-ttu-id="0f309-786">Execute o teste Iometer para aquecer o disco do cache com os parâmetros a seguir.</span><span class="sxs-lookup"><span data-stu-id="0f309-786">Run the Iometer test for warming up cache disk with following parameters.</span></span> <span data-ttu-id="0f309-787">Use três threads de trabalho para o volume de destino e uma profundidade de fila de 128.</span><span class="sxs-lookup"><span data-stu-id="0f309-787">Use three worker threads for the target volume and a queue depth of 128.</span></span> <span data-ttu-id="0f309-788">Defina a duração do teste "Tempo de execução" para 2 horas na guia "Configuração do teste".</span><span class="sxs-lookup"><span data-stu-id="0f309-788">Set the "Run time" duration of the test to 2hrs on the "Test Setup" tab.</span></span>

   | <span data-ttu-id="0f309-789">Cenário</span><span class="sxs-lookup"><span data-stu-id="0f309-789">Scenario</span></span> | <span data-ttu-id="0f309-790">Volume de destino</span><span class="sxs-lookup"><span data-stu-id="0f309-790">Target Volume</span></span> | <span data-ttu-id="0f309-791">Nome</span><span class="sxs-lookup"><span data-stu-id="0f309-791">Name</span></span> | <span data-ttu-id="0f309-792">Duração</span><span class="sxs-lookup"><span data-stu-id="0f309-792">Duration</span></span> |
   | --- | --- | --- | --- |
   | <span data-ttu-id="0f309-793">Aquecer o disco do cache</span><span class="sxs-lookup"><span data-stu-id="0f309-793">Warm up Cache Disk</span></span> |<span data-ttu-id="0f309-794">CacheReads</span><span class="sxs-lookup"><span data-stu-id="0f309-794">CacheReads</span></span> |<span data-ttu-id="0f309-795">RandomReads\_1MB</span><span class="sxs-lookup"><span data-stu-id="0f309-795">RandomReads\_1MB</span></span> |<span data-ttu-id="0f309-796">2 horas</span><span class="sxs-lookup"><span data-stu-id="0f309-796">2hrs</span></span> |

<span data-ttu-id="0f309-797">Depois de aquecer o disco do cache, prossiga com os cenários de teste listados abaixo.</span><span class="sxs-lookup"><span data-stu-id="0f309-797">After cache disk is warmed up, proceed with the test scenarios listed below.</span></span> <span data-ttu-id="0f309-798">Para executar o teste Iometer, use pelo menos três threads de trabalho para **cada** volume de destino.</span><span class="sxs-lookup"><span data-stu-id="0f309-798">To run the Iometer test, use at least three worker threads for **each** target volume.</span></span> <span data-ttu-id="0f309-799">Para cada thread de trabalho, selecione o volume de destino, defina a profundidade da fila e selecione uma das especificações de teste salvas, conforme mostrado na tabela a seguir, para executar o cenário de teste correspondente.</span><span class="sxs-lookup"><span data-stu-id="0f309-799">For each worker thread, select the target volume, set queue depth and select one of the saved test specifications, as shown in the table below, to run the corresponding test scenario.</span></span> <span data-ttu-id="0f309-800">A tabela também mostra os resultados esperados para IOPS e Taxa de Transferência ao executar esses testes.</span><span class="sxs-lookup"><span data-stu-id="0f309-800">The table also shows expected results for IOPS and Throughput when running these tests.</span></span> <span data-ttu-id="0f309-801">Em todos os cenários são usados um tamanho pequeno de 8 KB de E/S e uma profundidade de fila alta de 128.</span><span class="sxs-lookup"><span data-stu-id="0f309-801">For all scenarios, a small IO size of 8KB and a high queue depth of 128 is used.</span></span>

| <span data-ttu-id="0f309-802">Cenário de teste</span><span class="sxs-lookup"><span data-stu-id="0f309-802">Test Scenario</span></span> | <span data-ttu-id="0f309-803">Volume de destino</span><span class="sxs-lookup"><span data-stu-id="0f309-803">Target Volume</span></span> | <span data-ttu-id="0f309-804">Nome</span><span class="sxs-lookup"><span data-stu-id="0f309-804">Name</span></span> | <span data-ttu-id="0f309-805">Result</span><span class="sxs-lookup"><span data-stu-id="0f309-805">Result</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="0f309-806">Máx.</span><span class="sxs-lookup"><span data-stu-id="0f309-806">Max.</span></span> <span data-ttu-id="0f309-807">IOPS de leitura</span><span class="sxs-lookup"><span data-stu-id="0f309-807">Read IOPS</span></span> |<span data-ttu-id="0f309-808">CacheReads</span><span class="sxs-lookup"><span data-stu-id="0f309-808">CacheReads</span></span> |<span data-ttu-id="0f309-809">RandomWrites\_8K</span><span class="sxs-lookup"><span data-stu-id="0f309-809">RandomWrites\_8K</span></span> |<span data-ttu-id="0f309-810">50.000 IOPS </span><span class="sxs-lookup"><span data-stu-id="0f309-810">50,000 IOPS</span></span> |
| <span data-ttu-id="0f309-811">Máx.</span><span class="sxs-lookup"><span data-stu-id="0f309-811">Max.</span></span> <span data-ttu-id="0f309-812">IOPS de gravação</span><span class="sxs-lookup"><span data-stu-id="0f309-812">Write IOPS</span></span> |<span data-ttu-id="0f309-813">NoCacheWrites</span><span class="sxs-lookup"><span data-stu-id="0f309-813">NoCacheWrites</span></span> |<span data-ttu-id="0f309-814">RandomReads\_8K</span><span class="sxs-lookup"><span data-stu-id="0f309-814">RandomReads\_8K</span></span> |<span data-ttu-id="0f309-815">64.000 IOPS</span><span class="sxs-lookup"><span data-stu-id="0f309-815">64,000 IOPS</span></span> |
| <span data-ttu-id="0f309-816">Máx.</span><span class="sxs-lookup"><span data-stu-id="0f309-816">Max.</span></span> <span data-ttu-id="0f309-817">IOPS combinada</span><span class="sxs-lookup"><span data-stu-id="0f309-817">Combined IOPS</span></span> |<span data-ttu-id="0f309-818">CacheReads</span><span class="sxs-lookup"><span data-stu-id="0f309-818">CacheReads</span></span> |<span data-ttu-id="0f309-819">RandomWrites\_8K</span><span class="sxs-lookup"><span data-stu-id="0f309-819">RandomWrites\_8K</span></span> |<span data-ttu-id="0f309-820">100.000 IOPS</span><span class="sxs-lookup"><span data-stu-id="0f309-820">100,000 IOPS</span></span> |
| <span data-ttu-id="0f309-821">NoCacheWrites</span><span class="sxs-lookup"><span data-stu-id="0f309-821">NoCacheWrites</span></span> |<span data-ttu-id="0f309-822">RandomReads\_8K</span><span class="sxs-lookup"><span data-stu-id="0f309-822">RandomReads\_8K</span></span> | &nbsp; | &nbsp; |
| <span data-ttu-id="0f309-823">Máx.</span><span class="sxs-lookup"><span data-stu-id="0f309-823">Max.</span></span> <span data-ttu-id="0f309-824">MB/s de leitura</span><span class="sxs-lookup"><span data-stu-id="0f309-824">Read MB/sec</span></span> |<span data-ttu-id="0f309-825">CacheReads</span><span class="sxs-lookup"><span data-stu-id="0f309-825">CacheReads</span></span> |<span data-ttu-id="0f309-826">RandomWrites\_64K</span><span class="sxs-lookup"><span data-stu-id="0f309-826">RandomWrites\_64K</span></span> |<span data-ttu-id="0f309-827">524 MB/s</span><span class="sxs-lookup"><span data-stu-id="0f309-827">524 MB/sec</span></span> |
| <span data-ttu-id="0f309-828">Máx.</span><span class="sxs-lookup"><span data-stu-id="0f309-828">Max.</span></span> <span data-ttu-id="0f309-829">MB/s de gravação</span><span class="sxs-lookup"><span data-stu-id="0f309-829">Write MB/sec</span></span> |<span data-ttu-id="0f309-830">NoCacheWrites</span><span class="sxs-lookup"><span data-stu-id="0f309-830">NoCacheWrites</span></span> |<span data-ttu-id="0f309-831">RandomReads\_64K</span><span class="sxs-lookup"><span data-stu-id="0f309-831">RandomReads\_64K</span></span> |<span data-ttu-id="0f309-832">524 MB/s</span><span class="sxs-lookup"><span data-stu-id="0f309-832">524 MB/sec</span></span> |
| <span data-ttu-id="0f309-833">MB/s combinado</span><span class="sxs-lookup"><span data-stu-id="0f309-833">Combined MB/sec</span></span> |<span data-ttu-id="0f309-834">CacheReads</span><span class="sxs-lookup"><span data-stu-id="0f309-834">CacheReads</span></span> |<span data-ttu-id="0f309-835">RandomWrites\_64K</span><span class="sxs-lookup"><span data-stu-id="0f309-835">RandomWrites\_64K</span></span> |<span data-ttu-id="0f309-836">1000 MB/s</span><span class="sxs-lookup"><span data-stu-id="0f309-836">1000 MB/sec</span></span> |
| <span data-ttu-id="0f309-837">NoCacheWrites</span><span class="sxs-lookup"><span data-stu-id="0f309-837">NoCacheWrites</span></span> |<span data-ttu-id="0f309-838">RandomReads\_64K</span><span class="sxs-lookup"><span data-stu-id="0f309-838">RandomReads\_64K</span></span> | &nbsp; | &nbsp; |

<span data-ttu-id="0f309-839">Veja abaixo as capturas de tela dos resultado do teste Iometer para cenários combinados de IOPS e Taxa de Transferência.</span><span class="sxs-lookup"><span data-stu-id="0f309-839">Below are screenshots of the Iometer test results for combined IOPS and Throughput scenarios.</span></span>

<span data-ttu-id="0f309-840">*IOPS Máxima de Leituras e Gravações Combinadas*</span><span class="sxs-lookup"><span data-stu-id="0f309-840">*Combined Reads and Writes Maximum IOPS*</span></span>  
![](media/storage-premium-storage-performance/image9.png)

<span data-ttu-id="0f309-841">*Taxa de Transferência Máxima de Leituras e Gravações Combinadas*</span><span class="sxs-lookup"><span data-stu-id="0f309-841">*Combined Reads and Writes Maximum Throughput*</span></span>  
![](media/storage-premium-storage-performance/image10.png)

### <a name="fio"></a><span data-ttu-id="0f309-842">FIO</span><span class="sxs-lookup"><span data-stu-id="0f309-842">FIO</span></span>
<span data-ttu-id="0f309-843">FIO é uma ferramenta popular para o armazenamento de parâmetros de comparação em VMs Linux.</span><span class="sxs-lookup"><span data-stu-id="0f309-843">FIO is a popular tool to benchmark storage on the Linux VMs.</span></span> <span data-ttu-id="0f309-844">Ela tem a flexibilidade para selecionar diferentes tamanhos de E/S, leituras e gravações sequenciais ou aleatórias.</span><span class="sxs-lookup"><span data-stu-id="0f309-844">It has the flexibility to select different IO sizes, sequential or random reads and writes.</span></span> <span data-ttu-id="0f309-845">Ela gera threads ou processos de trabalho para executar as operações de E/S especificadas.</span><span class="sxs-lookup"><span data-stu-id="0f309-845">It spawns worker threads or processes to perform the specified I/O operations.</span></span> <span data-ttu-id="0f309-846">Você pode especificar o tipo de operação de E/S que cada thread de trabalho deve executar usando arquivos de trabalho.</span><span class="sxs-lookup"><span data-stu-id="0f309-846">You can specify the type of I/O operations each worker thread must perform using job files.</span></span> <span data-ttu-id="0f309-847">Criamos um arquivo de trabalho por cenário ilustrado nos exemplos abaixo.</span><span class="sxs-lookup"><span data-stu-id="0f309-847">We created one job file per scenario illustrated in the examples below.</span></span> <span data-ttu-id="0f309-848">É possível alterar as especificações nesses arquivos de trabalho para comparar diferentes cargas de trabalho em execução no Armazenamento Premium.</span><span class="sxs-lookup"><span data-stu-id="0f309-848">You can change the specifications in these job files to benchmark different workloads running on Premium Storage.</span></span> <span data-ttu-id="0f309-849">Nos exemplos, estamos usando uma VM DS14 padrão executando o **Ubuntu**.</span><span class="sxs-lookup"><span data-stu-id="0f309-849">In the examples, we are using a Standard DS 14 VM running **Ubuntu**.</span></span> <span data-ttu-id="0f309-850">Use a mesma configuração descrita no início da [seção Parâmetros de comparação](#Benchmarking) e aqueça o cache antes de executar os testes de parâmetros de comparação.</span><span class="sxs-lookup"><span data-stu-id="0f309-850">Use the same setup described in the beginning of the [Benchmarking section](#Benchmarking) and warm up the cache before running the benchmarking tests.</span></span>

<span data-ttu-id="0f309-851">Antes de começar, [baixe o FIO](https://github.com/axboe/fio) e instale-o em sua máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="0f309-851">Before you begin, [download FIO](https://github.com/axboe/fio) and install it on your virtual machine.</span></span>

<span data-ttu-id="0f309-852">Execute o comando a seguir para o Ubuntu,</span><span class="sxs-lookup"><span data-stu-id="0f309-852">Run the following command for Ubuntu,</span></span>

```
apt-get install fio
```

<span data-ttu-id="0f309-853">Usaremos quatro threads de trabalho para impulsionar operações de gravação e quatro threads de trabalho para impulsionar as operações de leitura nos discos.</span><span class="sxs-lookup"><span data-stu-id="0f309-853">We will use four worker threads for driving Write operations and four worker threads for driving Read operations on the disks.</span></span> <span data-ttu-id="0f309-854">Os trabalhos de gravação orientarão o tráfego no volume "nocache", que tem 10 discos com o cache definido como "None".</span><span class="sxs-lookup"><span data-stu-id="0f309-854">The Write workers will be driving traffic on the "nocache" volume, which has 10 disks with cache set to "None".</span></span> <span data-ttu-id="0f309-855">Os trabalhos de leitura orientarão o tráfego no volume "readcache", que tem um disco com o cache definido como "ReadOnly".</span><span class="sxs-lookup"><span data-stu-id="0f309-855">The Read workers will be driving traffic on the "readcache" volume, which has 1 disk with cache set to "ReadOnly".</span></span>

<span data-ttu-id="0f309-856">*IOPS máxima de gravação*</span><span class="sxs-lookup"><span data-stu-id="0f309-856">*Maximum Write IOPS*</span></span>  
<span data-ttu-id="0f309-857">Crie o arquivo de trabalho com as especificações a seguir para obter IOPS máxima de gravação.</span><span class="sxs-lookup"><span data-stu-id="0f309-857">Create the job file with following specifications to get maximum Write IOPS.</span></span> <span data-ttu-id="0f309-858">Dê o nome de "fiowrite.ini".</span><span class="sxs-lookup"><span data-stu-id="0f309-858">Name it "fiowrite.ini".</span></span>

```
[global]
size=30g
direct=1
iodepth=256
ioengine=libaio
bs=8k

[writer1]
rw=randwrite
directory=/mnt/nocache
[writer2]
rw=randwrite
directory=/mnt/nocache
[writer3]
rw=randwrite
directory=/mnt/nocache
[writer4]
rw=randwrite
directory=/mnt/nocache
```

<span data-ttu-id="0f309-859">Observe os itens importantes a seguir que estão de acordo com as diretrizes de projeto abordadas nas seções anteriores.</span><span class="sxs-lookup"><span data-stu-id="0f309-859">Note the follow key things that are in line with the design guidelines discussed in previous sections.</span></span> <span data-ttu-id="0f309-860">Estas especificações são essenciais para impulsionar a IOPS máxima:</span><span class="sxs-lookup"><span data-stu-id="0f309-860">These specifications are essential to drive maximum IOPS,</span></span>  

* <span data-ttu-id="0f309-861">Uma profundidade de fila alta de 256.</span><span class="sxs-lookup"><span data-stu-id="0f309-861">A high queue depth of 256.</span></span>  
* <span data-ttu-id="0f309-862">Um bloco pequeno de 8 KB.</span><span class="sxs-lookup"><span data-stu-id="0f309-862">A small block size of 8KB.</span></span>  
* <span data-ttu-id="0f309-863">Vários threads que executam gravações aleatórias.</span><span class="sxs-lookup"><span data-stu-id="0f309-863">Multiple threads performing random writes.</span></span>

<span data-ttu-id="0f309-864">Execute o seguinte comando para iniciar o teste FIO por 30 segundos:</span><span class="sxs-lookup"><span data-stu-id="0f309-864">Run the following command to kick off the FIO test for 30 seconds,</span></span>  

```
sudo fio --runtime 30 fiowrite.ini
```

<span data-ttu-id="0f309-865">Enquanto o teste é executado, você poderá ver o número de IOPS de gravação fornecido pela VM e pelos discos premium.</span><span class="sxs-lookup"><span data-stu-id="0f309-865">While the test runs, you will be able to see the number of write IOPS the VM and Premium disks are delivering.</span></span> <span data-ttu-id="0f309-866">Como mostrado no exemplo abaixo, a VM DS14 está fornecendo seu limite máximo de IOPS de gravação, isto é, 50.000 IOPS.</span><span class="sxs-lookup"><span data-stu-id="0f309-866">As shown in the sample below, the DS14 VM is delivering its maximum write IOPS limit of 50,000 IOPS.</span></span>  
    ![](media/storage-premium-storage-performance/image11.png)

<span data-ttu-id="0f309-867">*IOPS máxima de leitura*</span><span class="sxs-lookup"><span data-stu-id="0f309-867">*Maximum Read IOPS*</span></span>  
<span data-ttu-id="0f309-868">Crie o arquivo de trabalho com as especificações a seguir para obter IOPS máxima de leitura.</span><span class="sxs-lookup"><span data-stu-id="0f309-868">Create the job file with following specifications to get maximum Read IOPS.</span></span> <span data-ttu-id="0f309-869">Dê o nome de "fioread.ini".</span><span class="sxs-lookup"><span data-stu-id="0f309-869">Name it "fioread.ini".</span></span>

```
[global]
size=30g
direct=1
iodepth=256
ioengine=libaio
bs=8k

[reader1]
rw=randread
directory=/mnt/readcache
[reader2]
rw=randread
directory=/mnt/readcache
[reader3]
rw=randread
directory=/mnt/readcache
[reader4]
rw=randread
directory=/mnt/readcache
```

<span data-ttu-id="0f309-870">Observe os itens importantes a seguir que estão de acordo com as diretrizes de projeto abordadas nas seções anteriores.</span><span class="sxs-lookup"><span data-stu-id="0f309-870">Note the follow key things that are in line with the design guidelines discussed in previous sections.</span></span> <span data-ttu-id="0f309-871">Estas especificações são essenciais para impulsionar a IOPS máxima:</span><span class="sxs-lookup"><span data-stu-id="0f309-871">These specifications are essential to drive maximum IOPS,</span></span>

* <span data-ttu-id="0f309-872">Uma profundidade de fila alta de 256.</span><span class="sxs-lookup"><span data-stu-id="0f309-872">A high queue depth of 256.</span></span>  
* <span data-ttu-id="0f309-873">Um bloco pequeno de 8 KB.</span><span class="sxs-lookup"><span data-stu-id="0f309-873">A small block size of 8KB.</span></span>  
* <span data-ttu-id="0f309-874">Vários threads que executam gravações aleatórias.</span><span class="sxs-lookup"><span data-stu-id="0f309-874">Multiple threads performing random writes.</span></span>

<span data-ttu-id="0f309-875">Execute o seguinte comando para iniciar o teste FIO por 30 segundos:</span><span class="sxs-lookup"><span data-stu-id="0f309-875">Run the following command to kick off the FIO test for 30 seconds,</span></span>

```
sudo fio --runtime 30 fioread.ini
```

<span data-ttu-id="0f309-876">Enquanto o teste for executado, você poderá ver o número de IOPS de leitura fornecido pela VM e pelos discos premium.</span><span class="sxs-lookup"><span data-stu-id="0f309-876">While the test runs, you will be able to see the number of read IOPS the VM and Premium disks are delivering.</span></span> <span data-ttu-id="0f309-877">Conforme mostrado no exemplo abaixo, a VM DS14 está fornecendo mais de 64.000 IOPS de leitura.</span><span class="sxs-lookup"><span data-stu-id="0f309-877">As shown in the sample below, the DS14 VM is delivering more than 64,000 Read IOPS.</span></span> <span data-ttu-id="0f309-878">Essa é uma combinação do desempenho do cache e do disco.</span><span class="sxs-lookup"><span data-stu-id="0f309-878">This is a combination of the disk and the cache performance.</span></span>  
    ![](media/storage-premium-storage-performance/image12.png)

<span data-ttu-id="0f309-879">*IOPS Máxima de Leitura e Gravação*</span><span class="sxs-lookup"><span data-stu-id="0f309-879">*Maximum Read and Write IOPS*</span></span>  
<span data-ttu-id="0f309-880">Crie o arquivo de trabalho com as especificações a seguir para obter a IOPS Máxima de Leitura e Gravação.</span><span class="sxs-lookup"><span data-stu-id="0f309-880">Create the job file with following specifications to get maximum combined Read and Write IOPS.</span></span> <span data-ttu-id="0f309-881">Dê o nome de "fioreadwrite.ini".</span><span class="sxs-lookup"><span data-stu-id="0f309-881">Name it "fioreadwrite.ini".</span></span>

```
[global]
size=30g
direct=1
iodepth=128
ioengine=libaio
bs=4k

[reader1]
rw=randread
directory=/mnt/readcache
[reader2]
rw=randread
directory=/mnt/readcache
[reader3]
rw=randread
directory=/mnt/readcache
[reader4]
rw=randread
directory=/mnt/readcache

[writer1]
rw=randwrite
directory=/mnt/nocache
rate_iops=12500
[writer2]
rw=randwrite
directory=/mnt/nocache
rate_iops=12500
[writer3]
rw=randwrite
directory=/mnt/nocache
rate_iops=12500
[writer4]
rw=randwrite
directory=/mnt/nocache
rate_iops=12500
```

<span data-ttu-id="0f309-882">Observe os itens importantes a seguir que estão de acordo com as diretrizes de projeto abordadas nas seções anteriores.</span><span class="sxs-lookup"><span data-stu-id="0f309-882">Note the follow key things that are in line with the design guidelines discussed in previous sections.</span></span> <span data-ttu-id="0f309-883">Estas especificações são essenciais para impulsionar a IOPS máxima:</span><span class="sxs-lookup"><span data-stu-id="0f309-883">These specifications are essential to drive maximum IOPS,</span></span>

* <span data-ttu-id="0f309-884">Uma profundidade alta de fila de 128.</span><span class="sxs-lookup"><span data-stu-id="0f309-884">A high queue depth of 128.</span></span>  
* <span data-ttu-id="0f309-885">Um bloco pequeno de 4 KB.</span><span class="sxs-lookup"><span data-stu-id="0f309-885">A small block size of 4KB.</span></span>  
* <span data-ttu-id="0f309-886">Vários threads que executam leituras e gravações aleatórias.</span><span class="sxs-lookup"><span data-stu-id="0f309-886">Multiple threads performing random reads and writes.</span></span>

<span data-ttu-id="0f309-887">Execute o seguinte comando para iniciar o teste FIO por 30 segundos:</span><span class="sxs-lookup"><span data-stu-id="0f309-887">Run the following command to kick off the FIO test for 30 seconds,</span></span>

```
sudo fio --runtime 30 fioreadwrite.ini
```

<span data-ttu-id="0f309-888">Enquanto o teste for executado, você poderá ver o número de IOPS de leitura e gravação combinadas fornecido pela VM e pelos discos premium.</span><span class="sxs-lookup"><span data-stu-id="0f309-888">While the test runs, you will be able to see the number of combined read and write IOPS the VM and Premium disks are delivering.</span></span> <span data-ttu-id="0f309-889">Como mostrado no exemplo abaixo, a VM DS14 está fornecendo mais de 100.000 IOPS de leitura e gravação combinadas.</span><span class="sxs-lookup"><span data-stu-id="0f309-889">As shown in the sample below, the DS14 VM is delivering more than 100,000 combined Read and Write IOPS.</span></span> <span data-ttu-id="0f309-890">Essa é uma combinação do desempenho do cache e do disco.</span><span class="sxs-lookup"><span data-stu-id="0f309-890">This is a combination of the disk and the cache performance.</span></span>  
    ![](media/storage-premium-storage-performance/image13.png)

<span data-ttu-id="0f309-891">*Taxa de Transferência Máxima Combinada*</span><span class="sxs-lookup"><span data-stu-id="0f309-891">*Maximum Combined Throughput*</span></span>  
<span data-ttu-id="0f309-892">Para atingir a Taxa de Transferência máxima de Leitura e Gravação combinadas, use um tamanho de bloco maior e uma profundidade de fila grande com vários threads executando leituras e gravações.</span><span class="sxs-lookup"><span data-stu-id="0f309-892">To get the maximum combined Read and Write Throughput, use a larger block size and large queue depth with multiple threads performing reads and writes.</span></span> <span data-ttu-id="0f309-893">É possível usar um tamanho de bloco de 64 KB e uma profundidade de fila de 128.</span><span class="sxs-lookup"><span data-stu-id="0f309-893">You can use a block size of 64KB and queue depth of 128.</span></span>

## <a name="next-steps"></a><span data-ttu-id="0f309-894">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="0f309-894">Next Steps</span></span>
<span data-ttu-id="0f309-895">Saiba mais sobre o Armazenamento Premium do Azure:</span><span class="sxs-lookup"><span data-stu-id="0f309-895">Learn more about Azure Premium Storage:</span></span>

* [<span data-ttu-id="0f309-896">Armazenamento Premium: Armazenamento de Alto Desempenho para as Cargas de Trabalho da Máquina Virtual do Azure</span><span class="sxs-lookup"><span data-stu-id="0f309-896">Premium Storage: High-Performance Storage for Azure Virtual Machine Workloads</span></span>](storage-premium-storage.md)  

<span data-ttu-id="0f309-897">Para usuários do SQL Server, leia os artigos sobre Práticas recomendadas de desempenho para o SQL Server:</span><span class="sxs-lookup"><span data-stu-id="0f309-897">For SQL Server users, read articles on Performance Best Practices for SQL Server:</span></span>

* [<span data-ttu-id="0f309-898">Práticas recomendadas para o SQL Server em Máquinas Virtuais do Azure</span><span class="sxs-lookup"><span data-stu-id="0f309-898">Performance Best Practices for SQL Server in Azure Virtual Machines</span></span>](../virtual-machines/windows/sql/virtual-machines-windows-sql-performance.md)
* [<span data-ttu-id="0f309-899">Armazenamento Premium do Azure fornece desempenho mais alto para SQL Server na VM do Azure</span><span class="sxs-lookup"><span data-stu-id="0f309-899">Azure Premium Storage provides highest performance for SQL Server in Azure VM</span></span>](http://blogs.technet.com/b/dataplatforminsider/archive/2015/04/23/azure-premium-storage-provides-highest-performance-for-sql-server-in-azure-vm.aspx)
