---
title: Monitorar, diagnosticar e solucionar problemas do Armazenamento do Azure | Microsoft Docs
description: "Use recursos como análise de armazenamento, registro em log do lado do cliente e outras ferramentas de terceiros para identificar, diagnosticar e solucionar problemas relacionados ao Armazenamento do Azure."
services: storage
documentationcenter: 
author: fhryo-msft
manager: jahogg
editor: tysonn
ms.assetid: d1e87d98-c763-4caa-ba20-2cf85f853303
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/11/2017
ms.author: fhryo-msft
ms.openlocfilehash: c6bf7cd3bd16d8af30fed09f7878a0e68748a971
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/03/2017
---
# <a name="monitor-diagnose-and-troubleshoot-microsoft-azure-storage"></a><span data-ttu-id="ef53c-103">Monitoramento, diagnóstico e solução de problemas de Armazenamento do Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="ef53c-103">Monitor, diagnose, and troubleshoot Microsoft Azure Storage</span></span>
[!INCLUDE [storage-selector-portal-monitoring-diagnosing-troubleshooting](../../includes/storage-selector-portal-monitoring-diagnosing-troubleshooting.md)]

## <a name="overview"></a><span data-ttu-id="ef53c-104">Visão geral</span><span class="sxs-lookup"><span data-stu-id="ef53c-104">Overview</span></span>
<span data-ttu-id="ef53c-105">Questões de diagnóstico e de solução de problemas em um aplicativo distribuído hospedado em um ambiente de nuvem podem ser mais complexas que em ambientes tradicionais.</span><span class="sxs-lookup"><span data-stu-id="ef53c-105">Diagnosing and troubleshooting issues in a distributed application hosted in a cloud environment can be more complex than in traditional environments.</span></span> <span data-ttu-id="ef53c-106">Aplicativos podem ser implantados em infraestrutura PaaS ou IaaS, no local, em um dispositivo móvel ou em uma dessas combinações.</span><span class="sxs-lookup"><span data-stu-id="ef53c-106">Applications can be deployed in a PaaS or IaaS infrastructure, on premises, on a mobile device, or in some combination of these.</span></span> <span data-ttu-id="ef53c-107">Normalmente, o tráfego de rede do seu aplicativo pode passar por redes privadas e públicas e o seu aplicativo pode usar múltiplas tecnologias de armazenamento tais como: Tabelas de Armazenamento, Blobs, Filas e Arquivos do Microsoft Azure, além de outros repositórios de dados, tais como: bancos de dados de documentos e relacionais.</span><span class="sxs-lookup"><span data-stu-id="ef53c-107">Typically, your application's network traffic may traverse public and private networks and your application may use multiple storage technologies such as Microsoft Azure Storage Tables, Blobs, Queues, or Files in addition to other data stores such as relational and document databases.</span></span>

<span data-ttu-id="ef53c-108">Para gerenciar esses aplicativos com êxito, monitore-os de forma proativa e entenda todos os aspectos de como se faz o diagnóstico e a solução de problemas deles e de suas tecnologias dependentes.</span><span class="sxs-lookup"><span data-stu-id="ef53c-108">To manage such applications successfully you should monitor them proactively and understand how to diagnose and troubleshoot all aspects of them and their dependent technologies.</span></span> <span data-ttu-id="ef53c-109">Como usuário dos serviços de Armazenamento do Azure, monitore continuamente o serviços de Armazenamento que o seu aplicativo utiliza para qualquer mudança inesperada em comportamento (como um tempo maior de resposta do que o normal) e faça o login para coletar mais dados detalhados para analisar o problema em profundidade.</span><span class="sxs-lookup"><span data-stu-id="ef53c-109">As a user of Azure Storage services, you should continuously monitor the Storage services your application uses for any unexpected changes in behavior (such as slower than usual response times), and use logging to collect more detailed data and to analyze a problem in depth.</span></span> <span data-ttu-id="ef53c-110">As informações de diagnósticos que você obtiver tanto do monitoramento como do registro em log irão ajudá-lo a determinar a raiz do problema que o seu aplicativo encontrou.</span><span class="sxs-lookup"><span data-stu-id="ef53c-110">The diagnostics information you obtain from both monitoring and logging will help you to determine the root cause of the issue your application encountered.</span></span> <span data-ttu-id="ef53c-111">Você poderá solucionar o problema e determinar as etapas apropriadas que você pode tomar para corrigi-lo.</span><span class="sxs-lookup"><span data-stu-id="ef53c-111">Then you can troubleshoot the issue and determine the appropriate steps you can take to remediate it.</span></span> <span data-ttu-id="ef53c-112">O Armazenamento do Azure é um serviço básico do Azure e é parte importante da maioria das soluções que os clientes implantam para a infraestrutura Azure.</span><span class="sxs-lookup"><span data-stu-id="ef53c-112">Azure Storage is a core Azure service, and forms an important part of the majority of solutions that customers deploy to the Azure infrastructure.</span></span> <span data-ttu-id="ef53c-113">O Armazenamento do Azure inclui capacidades de simplificar questões de monitoramento, diagnóstico e de soluções de problemas de armazenamento em seus aplicativos em nuvem.</span><span class="sxs-lookup"><span data-stu-id="ef53c-113">Azure Storage includes capabilities to simplify monitoring, diagnosing, and troubleshooting storage issues in your cloud-based applications.</span></span>

> [!NOTE]
> <span data-ttu-id="ef53c-114">O Armazenamento de Arquivos do Azure não dá suporte ao registro em log no momento.</span><span class="sxs-lookup"><span data-stu-id="ef53c-114">The Azure File storage does not support logging at this time.</span></span>
> 

<span data-ttu-id="ef53c-115">Para obter um guia prático para solução de problemas de ponta a ponta em aplicativos de armazenamento do Azure, consulte [Solução de problemas de ponta a ponta usando métricas de armazenamento do Azure e registro em log, AzCopy e Message Analyzer](storage-e2e-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="ef53c-115">For a hands-on guide to end-to-end troubleshooting in Azure Storage applications, see [End-to-End Troubleshooting using Azure Storage Metrics and Logging, AzCopy, and Message Analyzer](storage-e2e-troubleshooting.md).</span></span>

* <span data-ttu-id="ef53c-116">[Introdução]</span><span class="sxs-lookup"><span data-stu-id="ef53c-116">[Introduction]</span></span>
  * <span data-ttu-id="ef53c-117">[Como esse guia está organizado]</span><span class="sxs-lookup"><span data-stu-id="ef53c-117">[How this guide is organized]</span></span>
* <span data-ttu-id="ef53c-118">[Monitoramento do seu serviço de armazenamento]</span><span class="sxs-lookup"><span data-stu-id="ef53c-118">[Monitoring your storage service]</span></span>
  * <span data-ttu-id="ef53c-119">[Monitoramento da integridade do serviço]</span><span class="sxs-lookup"><span data-stu-id="ef53c-119">[Monitoring service health]</span></span>
  * <span data-ttu-id="ef53c-120">[Monitoramento de capacidade]</span><span class="sxs-lookup"><span data-stu-id="ef53c-120">[Monitoring capacity]</span></span>
  * <span data-ttu-id="ef53c-121">[Monitoramento de disponibilidade]</span><span class="sxs-lookup"><span data-stu-id="ef53c-121">[Monitoring availability]</span></span>
  * <span data-ttu-id="ef53c-122">[Monitoramento de desempenho]</span><span class="sxs-lookup"><span data-stu-id="ef53c-122">[Monitoring performance]</span></span>
* <span data-ttu-id="ef53c-123">[Diagnóstico de problemas de armazenamento]</span><span class="sxs-lookup"><span data-stu-id="ef53c-123">[Diagnosing storage issues]</span></span>
  * <span data-ttu-id="ef53c-124">[Problemas de integridade do serviço]</span><span class="sxs-lookup"><span data-stu-id="ef53c-124">[Service health issues]</span></span>
  * <span data-ttu-id="ef53c-125">[Problemas de desempenho]</span><span class="sxs-lookup"><span data-stu-id="ef53c-125">[Performance issues]</span></span>
  * <span data-ttu-id="ef53c-126">[Diagnóstico de erros]</span><span class="sxs-lookup"><span data-stu-id="ef53c-126">[Diagnosing errors]</span></span>
  * <span data-ttu-id="ef53c-127">[Problemas de emulador de armazenamento]</span><span class="sxs-lookup"><span data-stu-id="ef53c-127">[Storage emulator issues]</span></span>
  * <span data-ttu-id="ef53c-128">[Ferramentas de log de armazenamento]</span><span class="sxs-lookup"><span data-stu-id="ef53c-128">[Storage logging tools]</span></span>
  * <span data-ttu-id="ef53c-129">[Uso de ferramentas de log de rede]</span><span class="sxs-lookup"><span data-stu-id="ef53c-129">[Using network logging tools]</span></span>
* <span data-ttu-id="ef53c-130">[Rastreamento de ponta a ponta]</span><span class="sxs-lookup"><span data-stu-id="ef53c-130">[End-to-end tracing]</span></span>
  * <span data-ttu-id="ef53c-131">[Correlacionamento de dados de log]</span><span class="sxs-lookup"><span data-stu-id="ef53c-131">[Correlating log data]</span></span>
  * <span data-ttu-id="ef53c-132">[ID de solicitação do cliente]</span><span class="sxs-lookup"><span data-stu-id="ef53c-132">[Client request ID]</span></span>
  * <span data-ttu-id="ef53c-133">[ID de solicitação do servidor]</span><span class="sxs-lookup"><span data-stu-id="ef53c-133">[Server request ID]</span></span>
  * <span data-ttu-id="ef53c-134">[Carimbos de data/hora]</span><span class="sxs-lookup"><span data-stu-id="ef53c-134">[Timestamps]</span></span>
* <span data-ttu-id="ef53c-135">[Diretrizes para solução de problemas]</span><span class="sxs-lookup"><span data-stu-id="ef53c-135">[Troubleshooting guidance]</span></span>
  * <span data-ttu-id="ef53c-136">[As métricas mostram alta AverageE2ELatency e baixa AverageServerLatency]</span><span class="sxs-lookup"><span data-stu-id="ef53c-136">[Metrics show high AverageE2ELatency and low AverageServerLatency]</span></span>
  * <span data-ttu-id="ef53c-137">[As métricas mostram baixa AverageE2ELatency e baixa AverageServerLatency, mas o cliente está recebendo uma latência alta]</span><span class="sxs-lookup"><span data-stu-id="ef53c-137">[Metrics show low AverageE2ELatency and low AverageServerLatency but the client is experiencing high latency]</span></span>
  * <span data-ttu-id="ef53c-138">[As métricas mostram alta AverageServerLatency]</span><span class="sxs-lookup"><span data-stu-id="ef53c-138">[Metrics show high AverageServerLatency]</span></span>
  * <span data-ttu-id="ef53c-139">[Você está sofrendo atrasos inesperados na entrega de mensagens na fila]</span><span class="sxs-lookup"><span data-stu-id="ef53c-139">[You are experiencing unexpected delays in message delivery on a queue]</span></span>
  * <span data-ttu-id="ef53c-140">[As métricas mostram um aumento em PercentThrottlingError]</span><span class="sxs-lookup"><span data-stu-id="ef53c-140">[Metrics show an increase in PercentThrottlingError]</span></span>
  * <span data-ttu-id="ef53c-141">[As métricas mostram um aumento em PercentTimeoutError]</span><span class="sxs-lookup"><span data-stu-id="ef53c-141">[Metrics show an increase in PercentTimeoutError]</span></span>
  * <span data-ttu-id="ef53c-142">[As métricas mostram um aumento em PercentNetworkError]</span><span class="sxs-lookup"><span data-stu-id="ef53c-142">[Metrics show an increase in PercentNetworkError]</span></span>
  * <span data-ttu-id="ef53c-143">[O cliente está recebendo mensagens HTTP 403 (Proibido)]</span><span class="sxs-lookup"><span data-stu-id="ef53c-143">[The client is receiving HTTP 403 (Forbidden) messages]</span></span>
  * <span data-ttu-id="ef53c-144">[O cliente está recebendo mensagens HTTP 404 (Não encontrado)]</span><span class="sxs-lookup"><span data-stu-id="ef53c-144">[The client is receiving HTTP 404 (Not found) messages]</span></span>
  * <span data-ttu-id="ef53c-145">[O cliente está recebendo mensagens HTTP 409 (Conflito)]</span><span class="sxs-lookup"><span data-stu-id="ef53c-145">[The client is receiving HTTP 409 (Conflict) messages]</span></span>
  * <span data-ttu-id="ef53c-146">[As métricas mostram uma baixa PercentSuccess ou as entradas de log analíticas têm operações com status de transação de ClientOtherErrors]</span><span class="sxs-lookup"><span data-stu-id="ef53c-146">[Metrics show low PercentSuccess or analytics log entries have operations with transaction status of ClientOtherErrors]</span></span>
  * <span data-ttu-id="ef53c-147">[As métricas de capacidade mostram um aumento inesperado em uso de capacidade de armazenamento]</span><span class="sxs-lookup"><span data-stu-id="ef53c-147">[Capacity metrics show an unexpected increase in storage capacity usage]</span></span>
  * <span data-ttu-id="ef53c-148">[Você está enfrentando reinicializações inesperadas das máquinas virtuais que contêm um grande número de VHDs anexados]</span><span class="sxs-lookup"><span data-stu-id="ef53c-148">[You are experiencing unexpected reboots of Virtual Machines that have a large number of attached VHDs]</span></span>
  * <span data-ttu-id="ef53c-149">[Seu problema apareceu por usar o emulador de armazenamento para desenvolvimento ou teste]</span><span class="sxs-lookup"><span data-stu-id="ef53c-149">[Your issue arises from using the storage emulator for development or test]</span></span>
  * <span data-ttu-id="ef53c-150">[Você encontrou problemas ao instalar o SDK do Azure para .NET]</span><span class="sxs-lookup"><span data-stu-id="ef53c-150">[You are encountering problems installing the Azure SDK for .NET]</span></span>
  * <span data-ttu-id="ef53c-151">[Você tem um problema diferente com um serviço de armazenamento]</span><span class="sxs-lookup"><span data-stu-id="ef53c-151">[You have a different issue with a storage service]</span></span>
  * [<span data-ttu-id="ef53c-152">Solucionando problemas de Armazenamento de Arquivos do Azure com Windows e Linux</span><span class="sxs-lookup"><span data-stu-id="ef53c-152">Troubleshooting Azure File storage issues with Windows and Linux</span></span>](storage-troubleshoot-file-connection-problems.md)
* <span data-ttu-id="ef53c-153">[Anexos]</span><span class="sxs-lookup"><span data-stu-id="ef53c-153">[Appendices]</span></span>
  * <span data-ttu-id="ef53c-154">[Anexo 1: Usando o Fiddler para capturar o tráfego HTTP e HTTPS]</span><span class="sxs-lookup"><span data-stu-id="ef53c-154">[Appendix 1: Using Fiddler to capture HTTP and HTTPS traffic]</span></span>
  * <span data-ttu-id="ef53c-155">[Anexo 2: Usando o Wireshark para capturar o tráfego de rede]</span><span class="sxs-lookup"><span data-stu-id="ef53c-155">[Appendix 2: Using Wireshark to capture network traffic]</span></span>
  * <span data-ttu-id="ef53c-156">[Anexo 3: Usando o Microsoft Message Analyzer para capturar o tráfego de rede]</span><span class="sxs-lookup"><span data-stu-id="ef53c-156">[Appendix 3: Using Microsoft Message Analyzer to capture network traffic]</span></span>
  * <span data-ttu-id="ef53c-157">[Anexo 4: Usando o Excel para exibir as métricas e os dados de log]</span><span class="sxs-lookup"><span data-stu-id="ef53c-157">[Appendix 4: Using Excel to view metrics and log data]</span></span>
  * <span data-ttu-id="ef53c-158">[Anexo 5: Monitoramento com o Application Insights no Visual Studio Team Services]</span><span class="sxs-lookup"><span data-stu-id="ef53c-158">[Appendix 5: Monitoring with Application Insights for Visual Studio Team Services]</span></span>

## <span data-ttu-id="ef53c-159"><a name="introduction"></a>Introdução</span><span class="sxs-lookup"><span data-stu-id="ef53c-159"><a name="introduction"></a>Introduction</span></span>
<span data-ttu-id="ef53c-160">Esse guia mostra como você usa recursos como o Armazenamento Analítico do Azure, a biblioteca de armazenamento do cliente Azure com login do lado do cliente e outras ferramentas de terceiros para identificar, diagnosticar e solucionar problemas relacionados ao armazenamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="ef53c-160">This guide shows you how to use features such as Azure Storage Analytics, client-side logging in the Azure Storage Client Library, and other third-party tools to identify, diagnose, and troubleshoot Azure Storage related issues.</span></span>

![][1]

<span data-ttu-id="ef53c-161">Esse guia deve ser lido primeiramente pelos desenvolvedores de serviços online que usam os Serviços Armazenamento do Azure e profissionais de TI para gerenciar esses serviços online.</span><span class="sxs-lookup"><span data-stu-id="ef53c-161">This guide is intended to be read primarily by developers of online services that use Azure Storage Services and IT Pros responsible for managing such online services.</span></span> <span data-ttu-id="ef53c-162">Os objetivos desse guia são:</span><span class="sxs-lookup"><span data-stu-id="ef53c-162">The goals of this guide are:</span></span>

* <span data-ttu-id="ef53c-163">Ajudar a manter a integridade e o desempenho de suas contas de Armazenamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="ef53c-163">To help you maintain the health and performance of your Azure Storage accounts.</span></span>
* <span data-ttu-id="ef53c-164">Oferecer os processos e as ferramentas necessários para ajudá-lo a decidir se um problema em um aplicativo está ou não relacionado ao armazenamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="ef53c-164">To provide you with the necessary processes and tools to help you decide if an issue or problem in an application relates to Azure Storage.</span></span>
* <span data-ttu-id="ef53c-165">Oferecer diretrizes de ações para resolver problemas relacionados ao armazenamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="ef53c-165">To provide you with actionable guidance for resolving problems related to Azure Storage.</span></span>

### <span data-ttu-id="ef53c-166"><a name="how-this-guide-is-organized"></a>Como esse guia está organizado</span><span class="sxs-lookup"><span data-stu-id="ef53c-166"><a name="how-this-guide-is-organized"></a>How this guide is organized</span></span>
<span data-ttu-id="ef53c-167">A seção "[Monitoramento do seu serviço de armazenamento]“ descreve como monitorar a integridade e o desempenho de seus serviços de armazenamento do Azure usando as métricas analíticas de armazenamento do Azure (Métricas de Armazenamento).</span><span class="sxs-lookup"><span data-stu-id="ef53c-167">The section "[Monitoring your storage service]" describes how to monitor the health and performance of your Azure Storage services using Azure Storage Analytics Metrics (Storage Metrics).</span></span>

<span data-ttu-id="ef53c-168">A seção "[Diagnóstico de problemas de armazenamento]" descreve como diagnosticar os problemas ao usar o log de armazenamento analítico (Log de Armazenamento).</span><span class="sxs-lookup"><span data-stu-id="ef53c-168">The section "[Diagnosing storage issues]" describes how to diagnose issues using Azure Storage Analytics Logging (Storage Logging).</span></span> <span data-ttu-id="ef53c-169">Ela também descreve como habilitar o log do lado do cliente usando as facilidades em uma das bibliotecas do cliente, como a Bibliotecas de Cliente de Armazenamento para .NET ou o SDK do Azure para Java.</span><span class="sxs-lookup"><span data-stu-id="ef53c-169">It also describes how to enable client-side logging using the facilities in one of the client libraries such as the Storage Client Library for .NET or the Azure SDK for Java.</span></span>

<span data-ttu-id="ef53c-170">A seção "[Rastreamento de ponta a ponta]" descreve como você correlaciona as informações contidas em vários arquivos de log e em dados de métrica.</span><span class="sxs-lookup"><span data-stu-id="ef53c-170">The section "[End-to-end tracing]" describes how you can correlate the information contained in various log files and metrics data.</span></span>

<span data-ttu-id="ef53c-171">A seção "[Diretrizes para solução de problemas]" oferece diretrizes para a solução dos problemas mais comuns relacionados a armazenamento que você possa encontrar.</span><span class="sxs-lookup"><span data-stu-id="ef53c-171">The section "[Troubleshooting guidance]" provides troubleshooting guidance for some of the common storage-related issues you might encounter.</span></span>

<span data-ttu-id="ef53c-172">Os "[Anexos]" incluem informações sobre o uso de ferramentas como o Wireshark e Netmon para a análise de dados de pacote de rede, Fiddler para a análise de mensagens HTTP/HTTPS e o Microsoft Message Analyzer para correlacionar os dados de log.</span><span class="sxs-lookup"><span data-stu-id="ef53c-172">The "[Appendices]" include information about using other tools such as Wireshark and Netmon for analyzing network packet data, Fiddler for analyzing HTTP/HTTPS messages, and Microsoft Message Analyzer for correlating log data.</span></span>

## <span data-ttu-id="ef53c-173"><a name="monitoring-your-storage-service"></a>Monitoramento do seu serviço de armazenamento</span><span class="sxs-lookup"><span data-stu-id="ef53c-173"><a name="monitoring-your-storage-service"></a>Monitoring your storage service</span></span>
<span data-ttu-id="ef53c-174">Se você está acostumado com o monitoramento de desempenho do Windows, é possível entender as Métricas de Armazenamento como equivalentes aos contadores do Monitor de Desempenho do Windows.</span><span class="sxs-lookup"><span data-stu-id="ef53c-174">If you are familiar with Windows performance monitoring, you can think of Storage Metrics as being an Azure Storage equivalent of Windows Performance Monitor counters.</span></span> <span data-ttu-id="ef53c-175">Nas Métricas de Armazenamento, você encontrará um grupo detalhado de métricas (contadores com terminologia de Monitor de Desempenho do Windows) como disponibilidade de serviço, número total de solicitações de serviço ou percentual de êxito em solicitações de serviço.</span><span class="sxs-lookup"><span data-stu-id="ef53c-175">In Storage Metrics you will find a comprehensive set of metrics (counters in Windows Performance Monitor terminology) such as service availability, total number of requests to service, or percentage of successful requests to service.</span></span> <span data-ttu-id="ef53c-176">Para obter uma lista completa das métricas disponíveis, confira [Esquema da tabela de métricas da análise do armazenamento](http://msdn.microsoft.com/library/azure/hh343264.aspx).</span><span class="sxs-lookup"><span data-stu-id="ef53c-176">For a full list of the available metrics, see [Storage Analytics Metrics Table Schema](http://msdn.microsoft.com/library/azure/hh343264.aspx).</span></span> <span data-ttu-id="ef53c-177">Você pode especificar se deseja que o serviço de armazenamento colete e agregue as métricas a cada hora e ou cada minuto.</span><span class="sxs-lookup"><span data-stu-id="ef53c-177">You can specify whether you want the storage service to collect and aggregate metrics every hour or every minute.</span></span> <span data-ttu-id="ef53c-178">Para mais informações sobre como habilitar as métricas e monitorar suas contas de armazenamento, confira [Habilitação das métricas de armazenamento e exibição dos dados de métrica](http://go.microsoft.com/fwlink/?LinkId=510865).</span><span class="sxs-lookup"><span data-stu-id="ef53c-178">For more information about how to enable metrics and monitor your storage accounts, see [Enabling storage metrics and viewing metrics data](http://go.microsoft.com/fwlink/?LinkId=510865).</span></span>

<span data-ttu-id="ef53c-179">Você pode escolher quais intervalos de hora das métricas que você quer exibir no [Portal do Azure](https://portal.azure.com) e configurar as regras de notificação dos administradores por email caso a métrica a cada hora ultrapasse um valor particular.</span><span class="sxs-lookup"><span data-stu-id="ef53c-179">You can choose which hourly metrics you want to display in the [Azure portal](https://portal.azure.com) and configure rules that notify administrators by email whenever an hourly metric exceeds a particular threshold.</span></span> <span data-ttu-id="ef53c-180">Para obter mais informações, confira [Receber notificações de alerta](../monitoring-and-diagnostics/insights-receive-alert-notifications.md).</span><span class="sxs-lookup"><span data-stu-id="ef53c-180">For more information, see [Receive Alert Notifications](../monitoring-and-diagnostics/insights-receive-alert-notifications.md).</span></span> 

<span data-ttu-id="ef53c-181">O serviço de armazenamento coleta as métricas usando o melhor esforço, porém pode não registrar todas as operações de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="ef53c-181">The storage service collects metrics using a best effort, but may not record every storage operation.</span></span>

<span data-ttu-id="ef53c-182">No Portal do Azure, você pode exibir as métricas de disponibilidade, total de solicitações e números das médias de latência para uma conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="ef53c-182">In the Azure portal, you can view metrics such as availability, total requests, and average latency numbers for a storage account.</span></span> <span data-ttu-id="ef53c-183">Uma regra de notificação também foi configurada para alertar um administrador caso uma disponibilidade caia abaixo de um certo nível.</span><span class="sxs-lookup"><span data-stu-id="ef53c-183">A notification rule has also been set up to alert an administrator if availability drops below a certain level.</span></span> <span data-ttu-id="ef53c-184">Para exibir esses dados uma possível área para investigação é a tabela de porcentagem de êxito estar abaixo de 100% (para obter mais informações, consulte a seção "[As métricas mostram uma baixa PercentSuccess ou as entradas de log analíticas têm operações com status de transação de ClientOtherErrors]").</span><span class="sxs-lookup"><span data-stu-id="ef53c-184">From viewing this data, one possible area for investigation is the table service success percentage being below 100% (for more information, see the section "[Metrics show low PercentSuccess or analytics log entries have operations with transaction status of ClientOtherErrors]").</span></span>

<span data-ttu-id="ef53c-185">Monitore continuamente seus aplicativos do Azure para garantir que sua integridade e desempenho estejam como esperados ao:</span><span class="sxs-lookup"><span data-stu-id="ef53c-185">You should continuously monitor your Azure applications to ensure they are healthy and performing as expected by:</span></span>

* <span data-ttu-id="ef53c-186">Estabelecer algumas métricas de linha de base para aplicativos que permitirão que você compare os dados atuais e identifique qualquer mudança significativa em comportamento do armazenamento do Azure e seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ef53c-186">Establishing some baseline metrics for application that will enable you to compare current data and identify any significant changes in the behavior of Azure storage and your application.</span></span> <span data-ttu-id="ef53c-187">Os valores para as métricas de linha de base irão, em muitos casos, ser específicos para cada aplicativo e você deverá estabelecê-los ao realizar um teste de desempenho do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ef53c-187">The values of your baseline metrics will, in many cases, be application specific and you should establish them when you are performance testing your application.</span></span>
* <span data-ttu-id="ef53c-188">Registrar métricas a cada minuto e usá-las para monitorar ativamente cada erros e anomalias inesperados tais como: picos em contagem de erros ou taxas de solicitação.</span><span class="sxs-lookup"><span data-stu-id="ef53c-188">Recording minute metrics and using them to monitor actively for unexpected errors and anomalies such as spikes in error counts or request rates.</span></span>
* <span data-ttu-id="ef53c-189">Registrar métricas a cada hora e usá-las para monitorar os valores médios como: médias de contagem de erros ou taxas de solicitação.</span><span class="sxs-lookup"><span data-stu-id="ef53c-189">Recording hourly metrics and using them to monitor average values such as average error counts and request rates.</span></span>
* <span data-ttu-id="ef53c-190">Investigar os potenciais problemas usando as ferramentas de diagnóstico como discutido anteriormente na seção "[Diagnóstico de problemas de armazenamento]“.</span><span class="sxs-lookup"><span data-stu-id="ef53c-190">Investigating potential issues using diagnostics tools as discussed later in the section "[Diagnosing storage issues]."</span></span>

<span data-ttu-id="ef53c-191">Os gráficos na imagem a seguir ilustram como a média que acontece nas métricas de hora em hora podem esconder picos em atividade.</span><span class="sxs-lookup"><span data-stu-id="ef53c-191">The charts in the following image illustrate how the averaging that occurs for hourly metrics can hide spikes in activity.</span></span> <span data-ttu-id="ef53c-192">As métricas de hora em hora parecem mostrar uma taxa constante de solicitações, enquanto as métricas de minuto em minuto revelam as flutuações que estão realmente acontecendo.</span><span class="sxs-lookup"><span data-stu-id="ef53c-192">The hourly metrics appear to show a steady rate of requests, while the minute metrics reveal the fluctuations that are really taking place.</span></span>

![][3]

<span data-ttu-id="ef53c-193">O restante desta seção descreve quais as métricas que você deve monitorar e o porquê.</span><span class="sxs-lookup"><span data-stu-id="ef53c-193">The remainder of this section describes what metrics you should monitor and why.</span></span>

### <span data-ttu-id="ef53c-194"><a name="monitoring-service-health"></a>Monitoramento da integridade do serviço</span><span class="sxs-lookup"><span data-stu-id="ef53c-194"><a name="monitoring-service-health"></a>Monitoring service health</span></span>
<span data-ttu-id="ef53c-195">Você pode usar o [Portal do Azure](https://portal.azure.com) para exibir a integridade do serviço de armazenamento (e outros serviços do Azure) em todas as regiões do Azure no mundo.</span><span class="sxs-lookup"><span data-stu-id="ef53c-195">You can use the [Azure portal](https://portal.azure.com) to view the health of the Storage service (and other Azure services) in all the Azure regions around the world.</span></span> <span data-ttu-id="ef53c-196">Isso permite que você veja imediatamente se um problema fora do seu controle está afetando o serviço de armazenamento na região em que você usa o seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ef53c-196">This enables you to see immediately if an issue outside of your control is affecting the Storage service in the region you use for your application.</span></span>

<span data-ttu-id="ef53c-197">O [Portal do Azure](https://portal.azure.com) pode também fornecer notificações de incidentes que afetam os diversos serviços do Azure.</span><span class="sxs-lookup"><span data-stu-id="ef53c-197">The [Azure portal](https://portal.azure.com) can also provide notifications of incidents that affect the various Azure services.</span></span>
<span data-ttu-id="ef53c-198">Nota: Essa informação está disponível anteriormente, juntamente com os dados históricos, no [Painel de Serviços do Azure](http://status.azure.com).</span><span class="sxs-lookup"><span data-stu-id="ef53c-198">Note: This information was previously available, along with historical data, on the [Azure Service Dashboard](http://status.azure.com).</span></span>

<span data-ttu-id="ef53c-199">Enquanto o [Portal do Azure](https://portal.azure.com) coleta informações sobre integridade de dentro dos centros de dados do Azure (monitoramento inside-out), você também pode considerar a adoção de uma abordagem outside-in para gerar transações sintéticas que acessam periodicamente o seu aplicativo Web hospedado no Azure de vários locais.</span><span class="sxs-lookup"><span data-stu-id="ef53c-199">While the [Azure portal](https://portal.azure.com) collects health information from inside the Azure datacenters (inside-out monitoring), you could also consider adopting an outside-in approach to generate synthetic transactions that periodically access your Azure-hosted web application from multiple locations.</span></span> <span data-ttu-id="ef53c-200">Os serviços oferecidos pelo [Dynatrace](http://www.dynatrace.com/en/synthetic-monitoring) e Application Insights no Visual Studio Team Services são exemplos dessa abordagem outside-in.</span><span class="sxs-lookup"><span data-stu-id="ef53c-200">The services offered by [Dynatrace](http://www.dynatrace.com/en/synthetic-monitoring) and Application Insights for Visual Studio Team Services are examples of this outside-in approach.</span></span> <span data-ttu-id="ef53c-201">Para obter mais informações sobre o Application Insights no Visual Studio Team Services, consulte o anexo "[Anexo 5: Monitoramento com o Application Insights no Visual Studio Team Services](#appendix-5)".</span><span class="sxs-lookup"><span data-stu-id="ef53c-201">For more information about Application Insights for Visual Studio Team Services, see the appendix "[Appendix 5: Monitoring with Application Insights for Visual Studio Team Services](#appendix-5)."</span></span>

### <span data-ttu-id="ef53c-202"><a name="monitoring-capacity"></a>Monitoramento de capacidade</span><span class="sxs-lookup"><span data-stu-id="ef53c-202"><a name="monitoring-capacity"></a>Monitoring capacity</span></span>
<span data-ttu-id="ef53c-203">As métricas de armazenamento apenas armazena as métricas de capacidade do serviço blob porque os blobs normalmente são responsáveis pela maior proporção dos dados armazenados (no momento em que se escreve, não é possível usar as métricas de armazenamento para monitorar a capacidade de suas tabelas e filas).</span><span class="sxs-lookup"><span data-stu-id="ef53c-203">Storage Metrics only stores capacity metrics for the blob service because blobs typically account for the largest proportion of stored data (at the time of writing, it is not possible to use Storage Metrics to monitor the capacity of your tables and queues).</span></span> <span data-ttu-id="ef53c-204">Você pode encontrar esses dados na tabela **$MetricsCapacityBlob** se você tiver habilitado o monitoramento para o serviço blob.</span><span class="sxs-lookup"><span data-stu-id="ef53c-204">You can find this data in the **$MetricsCapacityBlob** table if you have enabled monitoring for the Blob service.</span></span> <span data-ttu-id="ef53c-205">As métricas de armazenamento registram esses dados uma vez ao dia e você pode usar o valor do **RowKey** para determinar se uma linha contém uma entidade que se relaciona aos **dados** do usuário (dados do valor) ou dados analíticos (valor **analítico**).</span><span class="sxs-lookup"><span data-stu-id="ef53c-205">Storage Metrics records this data once per day, and you can use the value of the **RowKey** to determine whether the row contains an entity that relates to user data (value **data**) or analytics data (value **analytics**).</span></span> <span data-ttu-id="ef53c-206">Cada entidade armazenada contém informações sobre a quantidade de armazenamento usada (**Capacidade** medida em bytes) e o número atual de contêineres (**ContainerCount**) e blobs (**ObjectCount**) em uso em cada conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="ef53c-206">Each stored entity contains information about the amount of storage used (**Capacity** measured in bytes) and the current number of containers (**ContainerCount**) and blobs (**ObjectCount**) in use in the storage account.</span></span> <span data-ttu-id="ef53c-207">Para saber mais sobre as métricas de capacidade armazenadas na tabela **$MetricsCapacityBlob** , consulte [Esquema da tabela de métricas da análise de armazenamento](http://msdn.microsoft.com/library/azure/hh343264.aspx).</span><span class="sxs-lookup"><span data-stu-id="ef53c-207">For more information about the capacity metrics stored in the **$MetricsCapacityBlob** table, see [Storage Analytics Metrics Table Schema](http://msdn.microsoft.com/library/azure/hh343264.aspx).</span></span>

> [!NOTE]
> <span data-ttu-id="ef53c-208">Monitore esses valores por meio de um aviso antecipado de que você está se aproximando dos limites de capacidade de sua conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="ef53c-208">You should monitor these values for an early warning that you are approaching the capacity limits of your storage account.</span></span> <span data-ttu-id="ef53c-209">No Portal do Azure, você pode adicionar as regras de alertas para notificá-lo se o uso de armazenamento agregado excede ou está abaixo dos limites que você especificou.</span><span class="sxs-lookup"><span data-stu-id="ef53c-209">In the Azure portal, you can add alert rules to notify you if aggregate storage use exceeds or falls below thresholds that you specify.</span></span>
> 
> 

<span data-ttu-id="ef53c-210">Para ajudar na estimativa do tamanho dos diversos objetos de armazenamento, tais como os blobs, consulte a postagem no blog [Compreendendo a cobrança do Armazenamento do Azure – Largura de banda, transações e capacidade](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/07/09/understanding-windows-azure-storage-billing-bandwidth-transactions-and-capacity.aspx).</span><span class="sxs-lookup"><span data-stu-id="ef53c-210">For help estimating the size of various storage objects such as blobs, see the blog post [Understanding Azure Storage Billing – Bandwidth, Transactions, and Capacity](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/07/09/understanding-windows-azure-storage-billing-bandwidth-transactions-and-capacity.aspx).</span></span>

### <span data-ttu-id="ef53c-211"><a name="monitoring-availability"></a>Monitoramento de disponibilidade</span><span class="sxs-lookup"><span data-stu-id="ef53c-211"><a name="monitoring-availability"></a>Monitoring availability</span></span>
<span data-ttu-id="ef53c-212">Monitore a disponibilidade dos serviços de monitoramento em sua conta de armazenamento monitorando os valores na coluna de **Disponibilidade** nas tabelas métricas de hora em hora ou de minuto em minuto — **$MetricsHourPrimaryTransactionsBlob**, **$MetricsHourPrimaryTransactionsTable**, **$MetricsHourPrimaryTransactionsQueue**, **$MetricsMinutePrimaryTransactionsBlob**, **$MetricsMinutePrimaryTransactionsTable**, **$MetricsMinutePrimaryTransactionsQueue**, **$MetricsCapacityBlob**.</span><span class="sxs-lookup"><span data-stu-id="ef53c-212">You should monitor the availability of the storage services in your storage account by monitoring the value in the **Availability** column in the hourly or minute metrics tables — **$MetricsHourPrimaryTransactionsBlob**, **$MetricsHourPrimaryTransactionsTable**, **$MetricsHourPrimaryTransactionsQueue**, **$MetricsMinutePrimaryTransactionsBlob**, **$MetricsMinutePrimaryTransactionsTable**, **$MetricsMinutePrimaryTransactionsQueue**, **$MetricsCapacityBlob**.</span></span> <span data-ttu-id="ef53c-213">A coluna **Disponibilidade** contém um valor percentual que indica a disponibilidade do serviço ou da operação API representada pela linda (a **RowKey** mostra se uma linha contém as métricas para o serviço como um todo ou para uma operação API específica).</span><span class="sxs-lookup"><span data-stu-id="ef53c-213">The **Availability** column contains a percentage value that indicates the availability of the service or the API operation represented by the row (the **RowKey** shows if the row contains metrics for the service as a whole or for a specific API operation).</span></span>

<span data-ttu-id="ef53c-214">Qualquer valor inferior a 100% indica que houve falha em algumas solicitações de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="ef53c-214">Any value less than 100% indicates that some storage requests are failing.</span></span> <span data-ttu-id="ef53c-215">Você pode ver porque estão falhando ao examinar as outras colunas nos dados de métricas que mostras os números de solicitações com diferentes tipos de erros, tais como **ServerTimeoutError**.</span><span class="sxs-lookup"><span data-stu-id="ef53c-215">You can see why they are failing by examining the other columns in the metrics data that show the numbers of requests with different error types such as **ServerTimeoutError**.</span></span> <span data-ttu-id="ef53c-216">Espere para ver a **Disponibilidade** cair temporariamente abaixo de 100% devido a razões como tempo limite do servidor transitório enquanto o serviço muda as partições para melhor balancear a carga da solicitação; a lógica de nova tentativa no aplicativo do seu cliente deve lidar com tais condições intermitentes.</span><span class="sxs-lookup"><span data-stu-id="ef53c-216">You should expect to see **Availability** fall temporarily below 100% for reasons such as transient server timeouts while the service moves partitions to better load-balance request; the retry logic in your client application should handle such intermittent conditions.</span></span> <span data-ttu-id="ef53c-217">O artigo [Operações registradas e mensagens de status da análise de armazenamento](http://msdn.microsoft.com/library/azure/hh343260.aspx) lista os tipos de transação que as Métricas de armazenamento incluem em seu cálculo de **Disponibilidade** .</span><span class="sxs-lookup"><span data-stu-id="ef53c-217">The article [Storage Analytics Logged Operations and Status Messages](http://msdn.microsoft.com/library/azure/hh343260.aspx) lists the transaction types that Storage Metrics includes in its **Availability** calculation.</span></span>

<span data-ttu-id="ef53c-218">No [Portal do Azure](https://portal.azure.com), você pode adicionar as regras de alertas para notificá-lo se a **Disponibilidade** de um serviço está abaixo dos limites que você especificou.</span><span class="sxs-lookup"><span data-stu-id="ef53c-218">In the [Azure portal](https://portal.azure.com), you can add alert rules to notify you if **Availability** for a service falls below a threshold that you specify.</span></span>

<span data-ttu-id="ef53c-219">A seção "[Diretrizes para solução de problemas]" deste guia descreve alguns dos problemas mais comuns de armazenamento relacionados a disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="ef53c-219">The "[Troubleshooting guidance]" section of this guide describes some common storage service issues related to availability.</span></span>

### <span data-ttu-id="ef53c-220"><a name="monitoring-performance"></a>Monitoramento de desempenho</span><span class="sxs-lookup"><span data-stu-id="ef53c-220"><a name="monitoring-performance"></a>Monitoring performance</span></span>
<span data-ttu-id="ef53c-221">Para monitorar o desempenho dos serviços de armazenamento, você pode usar as seguintes métricas das tabelas de hora em hora ou minuto em minuto.</span><span class="sxs-lookup"><span data-stu-id="ef53c-221">To monitor the performance of the storage services, you can use the following metrics from the hourly and minute metrics tables.</span></span>

* <span data-ttu-id="ef53c-222">Os valores nas colunas **AverageE2ELatency** e **AverageServerLatency** mostram o tempo médio do serviço de armazenamento ou do tipo da operação de API que está sendo usado para processar as solicitações.</span><span class="sxs-lookup"><span data-stu-id="ef53c-222">The values in the **AverageE2ELatency** and **AverageServerLatency** columns show the average time the storage service or API operation type is taking to process requests.</span></span> <span data-ttu-id="ef53c-223">**AverageE2ELatency** é uma medida de latência de ponta a ponta que inclui o tempo levado para ler as solicitações e enviar a resposta, além do tempo levado para processar a solicitação (por isso, inclui a latência de rede uma vez que a solicitação atinge o serviço de armazenamento); **AverageServerLatency** é a medida apenas do tempo de processamento e, por isso, exclui qualquer latência de rede relacionada à comunicação com o cliente.</span><span class="sxs-lookup"><span data-stu-id="ef53c-223">**AverageE2ELatency** is a measure of end-to-end latency that includes the time taken to read the request and send the response in addition to the time taken to process the request (therefore includes network latency once the request reaches the storage service); **AverageServerLatency** is a measure of just the processing time and therefore excludes any network latency related to communicating with the client.</span></span> <span data-ttu-id="ef53c-224">Consulte a seção "[As métricas mostram alta AverageE2ELatency e baixa AverageServerLatency]" posteriormente neste guia para uma discussão sobre porque pode haver uma diferença significante entre esses dois valores.</span><span class="sxs-lookup"><span data-stu-id="ef53c-224">See the section "[Metrics show high AverageE2ELatency and low AverageServerLatency]" later in this guide for a discussion of why there might be a significant difference between these two values.</span></span>
* <span data-ttu-id="ef53c-225">Os valores nas colunas **TotalIngress** e **TotalEgress** mostram um valor total de dados, em bytes, entrando e saindo do seu serviço de armazenamento ou por um tipo de operação API específica.</span><span class="sxs-lookup"><span data-stu-id="ef53c-225">The values in the **TotalIngress** and **TotalEgress** columns show the total amount of data, in bytes, coming in to and going out of your storage service or through a specific API operation type.</span></span>
* <span data-ttu-id="ef53c-226">Os valores na coluna **TotalRequests** mostram o número total de solicitações que o serviço de armazenamento da operação API está recebendo.</span><span class="sxs-lookup"><span data-stu-id="ef53c-226">The values in the **TotalRequests** column show the total number of requests that the storage service of API operation is receiving.</span></span> <span data-ttu-id="ef53c-227">**TotalRequests** é o número total de solicitações que o serviço de armazenamento recebe.</span><span class="sxs-lookup"><span data-stu-id="ef53c-227">**TotalRequests** is the total number of requests that the storage service receives.</span></span>

<span data-ttu-id="ef53c-228">Normalmente, você irá monitorar as mudanças inesperadas em qualquer um desses valores como indicador de que você tem um problema que requer uma investigação.</span><span class="sxs-lookup"><span data-stu-id="ef53c-228">Typically, you will monitor for unexpected changes in any of these values as an indicator that you have an issue that requires investigation.</span></span>

<span data-ttu-id="ef53c-229">No [Portal do Azure](https://portal.azure.com), você pode adicionar as regras de alertas para notificá-lo se quaisquer métricas de desempenho desse serviço estão abaixo dos limites que você especificou.</span><span class="sxs-lookup"><span data-stu-id="ef53c-229">In the [Azure portal](https://portal.azure.com), you can add alert rules to notify you if any of the performance metrics for this service fall below or exceed a threshold that you specify.</span></span>

<span data-ttu-id="ef53c-230">A seção "[Diretrizes para solução de problemas]" deste guia descreve alguns dos problemas mais comuns de armazenamento relacionados a desempenho.</span><span class="sxs-lookup"><span data-stu-id="ef53c-230">The "[Troubleshooting guidance]" section of this guide describes some common storage service issues related to performance.</span></span>

## <span data-ttu-id="ef53c-231"><a name="diagnosing-storage-issues"></a>Diagnóstico de problemas de armazenamento</span><span class="sxs-lookup"><span data-stu-id="ef53c-231"><a name="diagnosing-storage-issues"></a>Diagnosing storage issues</span></span>
<span data-ttu-id="ef53c-232">Há inúmero caminhos que você pode ter para ficar ciente de um problema em seu aplicativo, entre eles:</span><span class="sxs-lookup"><span data-stu-id="ef53c-232">There are a number of ways that you might become aware of a problem or issue in your application, these include:</span></span>

* <span data-ttu-id="ef53c-233">Uma grande falha que faz com que o aplicativo entre em pane ou pare de funcionar.</span><span class="sxs-lookup"><span data-stu-id="ef53c-233">A major failure that causes the application to crash or to stop working.</span></span>
* <span data-ttu-id="ef53c-234">Mudanças significativas dos valores de linha de base em métricas que você está monitorando como descritas na seção anterior "[Monitoramento do seu serviço de armazenamento]“.</span><span class="sxs-lookup"><span data-stu-id="ef53c-234">Significant changes from baseline values in the metrics you are monitoring as described in the previous section "[Monitoring your storage service]."</span></span>
* <span data-ttu-id="ef53c-235">Relatórios de usuários do seu aplicativo informando que uma operação em particular não foi concluída como esperado ou que algum recurso não está funcionando.</span><span class="sxs-lookup"><span data-stu-id="ef53c-235">Reports from users of your application that some particular operation didn't complete as expected or that some feature is not working.</span></span>
* <span data-ttu-id="ef53c-236">Erros gerados dentro do seu aplicativo que aparecem nos arquivos de log ou em outros métodos de notificação.</span><span class="sxs-lookup"><span data-stu-id="ef53c-236">Errors generated within your application that appear in log files or through some other notification method.</span></span>

<span data-ttu-id="ef53c-237">Normalmente, problemas relacionados aos serviços de armazenamento do Azure estão entre uma das quatro grandes categorias:</span><span class="sxs-lookup"><span data-stu-id="ef53c-237">Typically, issues related to Azure storage services fall into one of four broad categories:</span></span>

* <span data-ttu-id="ef53c-238">Seu aplicativo apresenta um problema de desempenho, relatado por um de seus usuários ou revelado por mudanças nas métricas de desempenho.</span><span class="sxs-lookup"><span data-stu-id="ef53c-238">Your application has a performance issue, either reported by your users, or revealed by changes in the performance metrics.</span></span>
* <span data-ttu-id="ef53c-239">Há um problema com a infraestrutura de armazenamento do Azure em uma ou mais regiões.</span><span class="sxs-lookup"><span data-stu-id="ef53c-239">There is a problem with the Azure Storage infrastructure in one or more regions.</span></span>
* <span data-ttu-id="ef53c-240">Seu aplicativo está encontrando um erro, relatado por um de seus usuários ou revelado por um aumento em uma das métricas de contagem de erro que você monitora.</span><span class="sxs-lookup"><span data-stu-id="ef53c-240">Your application is encountering an error, either reported by your users, or revealed by an increase in one of the error count metrics you monitor.</span></span>
* <span data-ttu-id="ef53c-241">Durante o desenvolvimento e o teste, você talvez esteja usando o emulador de armazenamento local; você pode encontrar alguns problemas relacionados especificamente ao uso do emulador de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="ef53c-241">During development and test, you may be using the local storage emulator; you may encounter some issues that relate specifically to usage of the storage emulator.</span></span>

<span data-ttu-id="ef53c-242">As seguintes seções apresentam as etapas que você deve seguir para diagnosticar e solucionar os problemas em cada uma dessas quatro categorias.</span><span class="sxs-lookup"><span data-stu-id="ef53c-242">The following sections outline the steps you should follow to diagnose and troubleshoot issues in each of these four categories.</span></span> <span data-ttu-id="ef53c-243">A seção "[Diretrizes para solução de problemas]" posteriormente nesse guia dará mais detalhes para alguns dos problemas mais comuns que você pode encontrar.</span><span class="sxs-lookup"><span data-stu-id="ef53c-243">The section "[Troubleshooting guidance]" later in this guide provides more detail for some common issues you may encounter.</span></span>

### <span data-ttu-id="ef53c-244"><a name="service-health-issues"></a>Problemas de integridade do serviço</span><span class="sxs-lookup"><span data-stu-id="ef53c-244"><a name="service-health-issues"></a>Service health issues</span></span>
<span data-ttu-id="ef53c-245">Problemas de integridade do serviço são normalmente fora do seu controle.</span><span class="sxs-lookup"><span data-stu-id="ef53c-245">Service health issues are typically outside of your control.</span></span> <span data-ttu-id="ef53c-246">O [Portal do Azure](https://portal.azure.com) dá informações sobre quaisquer problemas existentes com os serviços do Azure inclusive com os serviços de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="ef53c-246">The [Azure portal](https://portal.azure.com) provides information about any ongoing issues with Azure services including storage services.</span></span> <span data-ttu-id="ef53c-247">Se você optou pelo armazenamento com redundância geográfica de acesso a leitura (RA_GRS) quando você criou sua conta de armazenamento, então no evento de seus dados estarem indisponíveis no local principal, seu aplicativo pode mudar temporariamente para cópia somente de leitura em um local secundário.</span><span class="sxs-lookup"><span data-stu-id="ef53c-247">If you opted for Read-Access Geo-Redundant Storage when you created your storage account, then in the event of your data being unavailable in the primary location, your application could switch temporarily to the read-only copy in the secondary location.</span></span> <span data-ttu-id="ef53c-248">Para fazer isso, seu aplicativo deve ser capaz de alterar entre o uso de locais de armazenamento principal e secundário e ser capaz de trabalhar em modo de funcionamento reduzido com dados somente de leitura.</span><span class="sxs-lookup"><span data-stu-id="ef53c-248">To do this, your application must be able to switch between using the primary and secondary storage locations, and be able to work in a reduced functionality mode with read-only data.</span></span> <span data-ttu-id="ef53c-249">As bibliotecas do cliente de armazenamento do Azure permitem que você defina uma política de tentativa que pode ler a partir do armazenamento secundário caso a leitura do armazenamento principal falhar.</span><span class="sxs-lookup"><span data-stu-id="ef53c-249">The Azure Storage Client libraries allow you to define a retry policy that can read from secondary storage in case a read from primary storage fails.</span></span> <span data-ttu-id="ef53c-250">Seu aplicativo também precisa estar ciente que os dados do local secundário são consistentes.</span><span class="sxs-lookup"><span data-stu-id="ef53c-250">Your application also needs to be aware that the data in the secondary location is eventually consistent.</span></span> <span data-ttu-id="ef53c-251">Para saber mais, consulte no blog a postagem [Opções de redundância do Armazenamento do Azure e armazenamento com redundância geográfica do acesso de leitura](https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/11/windows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage/).</span><span class="sxs-lookup"><span data-stu-id="ef53c-251">For more information, see the blog post [Azure Storage Redundancy Options and Read Access Geo Redundant Storage](https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/11/windows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage/).</span></span>

### <span data-ttu-id="ef53c-252"><a name="performance-issues"></a>Problemas de desempenho</span><span class="sxs-lookup"><span data-stu-id="ef53c-252"><a name="performance-issues"></a>Performance issues</span></span>
<span data-ttu-id="ef53c-253">O desempenho de um aplicativo pode ser subjetivo, especialmente da perspectiva de um usuário.</span><span class="sxs-lookup"><span data-stu-id="ef53c-253">The performance of an application can be subjective, especially from a user perspective.</span></span> <span data-ttu-id="ef53c-254">Por isso, é importante ter métricas de linha de base disponíveis para ajudá-lo a identificar onde pode haver um problema de desempenho.</span><span class="sxs-lookup"><span data-stu-id="ef53c-254">Therefore, it is important to have baseline metrics available to help you identify where there might be a performance issue.</span></span> <span data-ttu-id="ef53c-255">Muitos fatores podem afetar o desempenho de um serviço de armazenamento do Azure da perspectiva do aplicativo do cliente.</span><span class="sxs-lookup"><span data-stu-id="ef53c-255">Many factors might affect the performance of an Azure storage service from the client application perspective.</span></span> <span data-ttu-id="ef53c-256">Esses fatores podem operar em um serviço de armazenamento, no cliente ou em uma infraestrutura de rede; portanto, é importante ter uma estratégia para identificar a origem do problema de desempenho.</span><span class="sxs-lookup"><span data-stu-id="ef53c-256">These factors might operate in the storage service, in the client, or in the network infrastructure; therefore it is important to have a strategy for identifying the origin of the performance issue.</span></span>

<span data-ttu-id="ef53c-257">Após ter identificado o possível local da causa do problema de desempenho a partir das métricas, você pode usar os arquivos de log para encontrar as informações detalhadas para diagnosticar e solucionar o problema mais profundamente.</span><span class="sxs-lookup"><span data-stu-id="ef53c-257">After you have identified the likely location of the cause of the performance issue from the metrics, you can then use the log files to find detailed information to diagnose and troubleshoot the problem further.</span></span>

<span data-ttu-id="ef53c-258">A seção "[Diretrizes para solução de problemas]" posteriormente nesse guia dará mais detalhes para alguns dos problemas mais comuns que você pode encontrar.</span><span class="sxs-lookup"><span data-stu-id="ef53c-258">The section "[Troubleshooting guidance]" later in this guide provides more information about some common performance related issues you may encounter.</span></span>

### <span data-ttu-id="ef53c-259"><a name="diagnosing-errors"></a>Diagnóstico de erros</span><span class="sxs-lookup"><span data-stu-id="ef53c-259"><a name="diagnosing-errors"></a>Diagnosing errors</span></span>
<span data-ttu-id="ef53c-260">Usuários do seu aplicativo podem notificá-lo de erros registrados pelo aplicativo do cliente.</span><span class="sxs-lookup"><span data-stu-id="ef53c-260">Users of your application may notify you of errors reported by the client application.</span></span> <span data-ttu-id="ef53c-261">Métricas de armazenamento também registram contagens de diferentes tipos de erros do seus serviços de armazenamento, tais como **NetworkError**, **ClientTimeoutError** ou **AuthorizationError**.</span><span class="sxs-lookup"><span data-stu-id="ef53c-261">Storage Metrics also records counts of different error types from your storage services such as **NetworkError**, **ClientTimeoutError**, or **AuthorizationError**.</span></span> <span data-ttu-id="ef53c-262">Enquanto as métricas de armazenamento apenas registram as contagens de diferentes tipos de erros, você obter mais detalhes sobre solicitações individuais ao examinar os logs do servidor, do cliente e da rede.</span><span class="sxs-lookup"><span data-stu-id="ef53c-262">While Storage Metrics only records counts of different error types, you can obtain more detail about individual requests by examining server-side, client-side, and network logs.</span></span> <span data-ttu-id="ef53c-263">Normalmente, o código de status HTTP que voltam para o serviço de armazenamento darão uma indicação da razão da falha da solicitação.</span><span class="sxs-lookup"><span data-stu-id="ef53c-263">Typically, the HTTP status code returned by the storage service will give an indication of why the request failed.</span></span>

> [!NOTE]
> <span data-ttu-id="ef53c-264">Lembre-se de que você deve esperar ver alguns erros intermitentes: por exemplo, erros devido a condições transitórias da rede ou erros de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ef53c-264">Remember that you should expect to see some intermittent errors: for example, errors due to transient network conditions, or application errors.</span></span>
> 
> 

<span data-ttu-id="ef53c-265">Os seguintes recursos são úteis para compreender os status relacionados a armazenamento e os códigos de erro:</span><span class="sxs-lookup"><span data-stu-id="ef53c-265">The following resources are useful for understanding storage-related status and error codes:</span></span>

* [<span data-ttu-id="ef53c-266">Códigos de erro comuns da API REST</span><span class="sxs-lookup"><span data-stu-id="ef53c-266">Common REST API Error Codes</span></span>](http://msdn.microsoft.com/library/azure/dd179357.aspx)
* [<span data-ttu-id="ef53c-267">Códigos de erro do serviço Blob</span><span class="sxs-lookup"><span data-stu-id="ef53c-267">Blob Service Error Codes</span></span>](http://msdn.microsoft.com/library/azure/dd179439.aspx)
* [<span data-ttu-id="ef53c-268">Códigos de erro do serviço Fila</span><span class="sxs-lookup"><span data-stu-id="ef53c-268">Queue Service Error Codes</span></span>](http://msdn.microsoft.com/library/azure/dd179446.aspx)
* [<span data-ttu-id="ef53c-269">Códigos de erro do serviço de tabela</span><span class="sxs-lookup"><span data-stu-id="ef53c-269">Table Service Error Codes</span></span>](http://msdn.microsoft.com/library/azure/dd179438.aspx)
* [<span data-ttu-id="ef53c-270">Códigos de erro do serviço de arquivo</span><span class="sxs-lookup"><span data-stu-id="ef53c-270">File Service Error Codes</span></span>](https://msdn.microsoft.com/library/azure/dn690119.aspx)

### <span data-ttu-id="ef53c-271"><a name="storage-emulator-issues"></a>Problemas de emulador de armazenamento</span><span class="sxs-lookup"><span data-stu-id="ef53c-271"><a name="storage-emulator-issues"></a>Storage emulator issues</span></span>
<span data-ttu-id="ef53c-272">O SDK do Azure inclui um emulador de armazenamento que você pode executar em uma estação de trabalho de desenvolvimento.</span><span class="sxs-lookup"><span data-stu-id="ef53c-272">The Azure SDK includes a storage emulator you can run on a development workstation.</span></span> <span data-ttu-id="ef53c-273">Esse emulador simula a maior parte do comportamento dos serviços de armazenamento do Azure e é útil durante o desenvolvimento e o teste, permitindo que você execute aplicativos que você usam serviços de armazenamento do Azure sem a necessidade de uma assinatura e uma conta de armazenamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="ef53c-273">This emulator simulates most of the behavior of the Azure storage services and is useful during development and test, enabling you to run applications that use Azure storage services without the need for an Azure subscription and an Azure storage account.</span></span>

<span data-ttu-id="ef53c-274">A seção "[Diretrizes para solução de problemas]" deste guia descreve alguns dos problemas mais comuns usando o emulador de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="ef53c-274">The "[Troubleshooting guidance]" section of this guide describes some common issues encountered using the storage emulator.</span></span>

### <span data-ttu-id="ef53c-275"><a name="storage-logging-tools"></a>Ferramentas de log de armazenamento</span><span class="sxs-lookup"><span data-stu-id="ef53c-275"><a name="storage-logging-tools"></a>Storage logging tools</span></span>
<span data-ttu-id="ef53c-276">O log de armazenamento oferece o log do lado do servidor para solicitações de armazenamento na sua conta de armazenamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="ef53c-276">Storage Logging provides server-side logging of storage requests in your Azure storage account.</span></span> <span data-ttu-id="ef53c-277">Para saber mais sobre como habilitar o log do lado do servidor e acessar os dados de log, consulte [Enabling Storage Logging and Accessing Log Data](http://go.microsoft.com/fwlink/?LinkId=510867)(Como habilitar o registro em log do armazenamento e o acesso aos dados do log).</span><span class="sxs-lookup"><span data-stu-id="ef53c-277">For more information about how to enable server-side logging and access the log data, see [Enabling Storage Logging and Accessing Log Data](http://go.microsoft.com/fwlink/?LinkId=510867).</span></span>

<span data-ttu-id="ef53c-278">A biblioteca do cliente de armazenamento para .NET habilita você a coletar dados de log do cliente relacionados as operações de armazenamento realizadas pelo seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ef53c-278">The Storage Client Library for .NET enables you to collect client-side log data that relates to storage operations performed by your application.</span></span> <span data-ttu-id="ef53c-279">Para saber mais, consulte [Registro em log no lado do cliente com a biblioteca do cliente de armazenamento para .NET](http://go.microsoft.com/fwlink/?LinkId=510868).</span><span class="sxs-lookup"><span data-stu-id="ef53c-279">For more information, see [Client-side Logging with the .NET Storage Client Library](http://go.microsoft.com/fwlink/?LinkId=510868).</span></span>

> [!NOTE]
> <span data-ttu-id="ef53c-280">Em algumas circunstâncias (tais como falhas de autorizações SAS) um usuário pode informar um erro pelo qual você não pode encontrar nenhum dado de solicitação nos logs de armazenamento do lado do cliente.</span><span class="sxs-lookup"><span data-stu-id="ef53c-280">In some circumstances (such as SAS authorization failures), a user may report an error for which you can find no request data in the server-side Storage logs.</span></span> <span data-ttu-id="ef53c-281">Você pode usar as capacidades de log da biblioteca do cliente de armazenamento para investigar se a causa desse problema está no cliente ou use as as ferramentas de monitoramento de rede para investigar a rede.</span><span class="sxs-lookup"><span data-stu-id="ef53c-281">You can use the logging capabilities of the Storage Client Library to investigate if the cause of the issue is on the client or use network monitoring tools to investigate the network.</span></span>
> 
> 

### <span data-ttu-id="ef53c-282"><a name="using-network-logging-tools"></a>Uso de ferramentas de log de rede</span><span class="sxs-lookup"><span data-stu-id="ef53c-282"><a name="using-network-logging-tools"></a>Using network logging tools</span></span>
<span data-ttu-id="ef53c-283">Você pode capturar o tráfego entre o cliente e o servidor para dar informações detalhadas sobre os dados que o cliente e o servidor estão trocando e as condições subjacentes de rede.</span><span class="sxs-lookup"><span data-stu-id="ef53c-283">You can capture the traffic between the client and server to provide detailed information about the data the client and server are exchanging and the underlying network conditions.</span></span> <span data-ttu-id="ef53c-284">Ferramentas úteis de log de rede incluem:</span><span class="sxs-lookup"><span data-stu-id="ef53c-284">Useful network logging tools include:</span></span>

* <span data-ttu-id="ef53c-285">[Fiddler](http://www.telerik.com/fiddler) é um proxy de depuração Web gratuito que permite que você examine os cabeçalhos e dados de conteúdo das solicitações HTTP e HTTPS e as mensagens de resposta.</span><span class="sxs-lookup"><span data-stu-id="ef53c-285">[Fiddler](http://www.telerik.com/fiddler) is a free web debugging proxy that enables you to examine the headers and payload data of HTTP and HTTPS request and response messages.</span></span> <span data-ttu-id="ef53c-286">Para saber mais, consulte [Anexo 1: Usando o Fiddler para capturar o tráfego HTTP e HTTPS](#appendix-1).</span><span class="sxs-lookup"><span data-stu-id="ef53c-286">For more information, see [Appendix 1: Using Fiddler to capture HTTP and HTTPS traffic](#appendix-1).</span></span>
* <span data-ttu-id="ef53c-287">[Monitor de Rede da Microsoft (Netmon)](http://www.microsoft.com/download/details.aspx?id=4865) e [Wireshark](http://www.wireshark.org/) são analisadores de protocolo de rede gratuitos que permitem que você exiba informações detalhadas de pacote de uma vasta gama de protocolos de rede.</span><span class="sxs-lookup"><span data-stu-id="ef53c-287">[Microsoft Network Monitor (Netmon)](http://www.microsoft.com/download/details.aspx?id=4865) and [Wireshark](http://www.wireshark.org/) are free network protocol analyzers that enable you to view detailed packet information for a wide range of network protocols.</span></span> <span data-ttu-id="ef53c-288">Para obter mais informações sobre o Wireshark, consulte "[Anexo 2: Usando o Wireshark para capturar o tráfego de rede](#appendix-2)".</span><span class="sxs-lookup"><span data-stu-id="ef53c-288">For more information about Wireshark, see "[Appendix 2: Using Wireshark to capture network traffic](#appendix-2)".</span></span>
* <span data-ttu-id="ef53c-289">O Microsoft Message Analyzer é uma ferramenta da Microsoft que substitui o Netmon e que além de capturar os dados de pacote de rede, a ajuda a exibir e analisar os dados de log capturados das outras ferramentas.</span><span class="sxs-lookup"><span data-stu-id="ef53c-289">Microsoft Message Analyzer is a tool from Microsoft that supersedes Netmon and that in addition to capturing network packet data, helps you to view and analyze the log data captured from other tools.</span></span> <span data-ttu-id="ef53c-290">Para saber mais, consulte "[Anexo 3: Usando o Microsoft Message Analyzer para capturar o tráfego de rede](#appendix-3)".</span><span class="sxs-lookup"><span data-stu-id="ef53c-290">For more information, see "[Appendix 3: Using Microsoft Message Analyzer to capture network traffic](#appendix-3)".</span></span>
* <span data-ttu-id="ef53c-291">Se você quer realizar um teste de conectividade básico para verificar que a máquina do cliente pode se conectar ao serviço de armazenamento do Azure pela rede, você não pode fazer isso usando a ferramenta padrão **ping** no cliente.</span><span class="sxs-lookup"><span data-stu-id="ef53c-291">If you want to perform a basic connectivity test to check that your client machine can connect to the Azure storage service over the network, you cannot do this using the standard **ping** tool on the client.</span></span> <span data-ttu-id="ef53c-292">Entretanto, você pode usar a [**ferramenta** tcping](http://www.elifulkerson.com/projects/tcping.php) para verificar a conectividade.</span><span class="sxs-lookup"><span data-stu-id="ef53c-292">However, you can use the [**tcping** tool](http://www.elifulkerson.com/projects/tcping.php) to check connectivity.</span></span>

<span data-ttu-id="ef53c-293">Em muitos casos, os dados de log a partir do log de armazenamento e da biblioteca do cliente serão suficientes para diagnosticar um problema, porém, em alguns cenários, você poderá precisar de informações mais detalhadas que podem ser providas por essas ferramentas de log de rede.</span><span class="sxs-lookup"><span data-stu-id="ef53c-293">In many cases, the log data from Storage Logging and the Storage Client Library will be sufficient to diagnose an issue, but in some scenarios, you may need the more detailed information that these network logging tools can provide.</span></span> <span data-ttu-id="ef53c-294">Por exemplo, usando o Fiddler para ver as mensagens HTTP e HTTPS permitem que você exiba o cabeçalho e os dados de carga enviados para e a partir dos serviços de armazenamento, o qual permite que você examine como o aplicativo do cliente repete as operações de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="ef53c-294">For example, using Fiddler to view HTTP and HTTPS messages enables you to view header and payload data sent to and from the storage services, which would enable you to examine how a client application retries storage operations.</span></span> <span data-ttu-id="ef53c-295">Analisadores de protocolo, tais como Wireshark opera em nível de pacote permitindo que você exiba os dados TCP, os quais permitem que você solucione problemas de pacotes perdidos e problemas de conectividade.</span><span class="sxs-lookup"><span data-stu-id="ef53c-295">Protocol analyzers such as Wireshark operate at the packet level enabling you to view TCP data, which would enable you to troubleshoot lost packets and connectivity issues.</span></span> <span data-ttu-id="ef53c-296">O Message Analyzer pode operar tanto em camadas HTTP como TCP.</span><span class="sxs-lookup"><span data-stu-id="ef53c-296">Message Analyzer can operate at both HTTP and TCP layers.</span></span>

## <span data-ttu-id="ef53c-297"><a name="end-to-end-tracing"></a>Rastreamento de ponta a ponta</span><span class="sxs-lookup"><span data-stu-id="ef53c-297"><a name="end-to-end-tracing"></a>End-to-end tracing</span></span>
<span data-ttu-id="ef53c-298">O rastreamento de ponta a ponta usando uma variedade de arquivos de log é uma técnica útil para a investigação de potenciais problemas.</span><span class="sxs-lookup"><span data-stu-id="ef53c-298">End-to-end tracing using a variety of log files is a useful technique for investigating potential issues.</span></span> <span data-ttu-id="ef53c-299">Você pode usar as informações de dia/hora de seus dados de métrica como uma indicação de onde começar a procurar nos arquivos de log para informações mais detalhadas que irão ajudá-lo a solucionar o problema.</span><span class="sxs-lookup"><span data-stu-id="ef53c-299">You can use the date/time information from your metrics data as an indication of where to start looking in the log files for the detailed information that will help you troubleshoot the issue.</span></span>

### <span data-ttu-id="ef53c-300"><a name="correlating-log-data"></a>Correlacionamento de dados de log</span><span class="sxs-lookup"><span data-stu-id="ef53c-300"><a name="correlating-log-data"></a>Correlating log data</span></span>
<span data-ttu-id="ef53c-301">Ao exibir os logs dos aplicativos do cliente, rastreamento de rede e log de armazenamento do servidor é fundamental ser capaz de correlacionar as solicitações com os diferentes arquivos de log.</span><span class="sxs-lookup"><span data-stu-id="ef53c-301">When viewing logs from client applications, network traces, and server-side storage logging it is critical to be able to correlate requests across the different log files.</span></span> <span data-ttu-id="ef53c-302">Os arquivos de log incluem inúmeros campos diferentes que são úteis como identificadores de correlação.</span><span class="sxs-lookup"><span data-stu-id="ef53c-302">The log files include a number of different fields that are useful as correlation identifiers.</span></span> <span data-ttu-id="ef53c-303">A id de solicitação do cliente é o campo mais útil para usa para correlacionar entradas em logs diferentes.</span><span class="sxs-lookup"><span data-stu-id="ef53c-303">The client request id is the most useful field to use to correlate entries in the different logs.</span></span> <span data-ttu-id="ef53c-304">Entretanto, algumas vezes, pode ser útil usar ou a id de solicitação do servidor ou os carimbos de data/hora.</span><span class="sxs-lookup"><span data-stu-id="ef53c-304">However sometimes, it can be useful to use either the server request id or timestamps.</span></span> <span data-ttu-id="ef53c-305">As seções a seguir fornecem mais detalhes sobre essas opções.</span><span class="sxs-lookup"><span data-stu-id="ef53c-305">The following sections provide more details about these options.</span></span>

### <span data-ttu-id="ef53c-306"><a name="client-request-id"></a>ID de solicitação do cliente</span><span class="sxs-lookup"><span data-stu-id="ef53c-306"><a name="client-request-id"></a>Client request ID</span></span>
<span data-ttu-id="ef53c-307">A biblioteca de cliente de armazenamento gera automaticamente uma única id de solicitação do cliente para cada solicitação.</span><span class="sxs-lookup"><span data-stu-id="ef53c-307">The Storage Client Library automatically generates a unique client request id for every request.</span></span>

* <span data-ttu-id="ef53c-308">No log do lado do cliente que a biblioteca do cliente de armazenamento cria, a id de solicitação do cliente aparece no campo **ID de solicitação do cliente** de cada entrada de log relacionada à solicitação.</span><span class="sxs-lookup"><span data-stu-id="ef53c-308">In the client-side log that the Storage Client Library creates, the client request id appears in the **Client Request ID** field of every log entry relating to the request.</span></span>
* <span data-ttu-id="ef53c-309">No rastreamento da rede tal como uma capturada pelo Fiddler, a id de solicitação do cliente está visível em mensagens de solicitação como no valor do cabeçalho HTTP **x-ms-client-request-id** .</span><span class="sxs-lookup"><span data-stu-id="ef53c-309">In a network trace such as one captured by Fiddler, the client request id is visible in request messages as the **x-ms-client-request-id** HTTP header value.</span></span>
* <span data-ttu-id="ef53c-310">No log de armazenamento do lado do servidor, a id de solicitação do cliente aparece na coluna de id de solicitação do cliente.</span><span class="sxs-lookup"><span data-stu-id="ef53c-310">In the server-side Storage Logging log, the client request id appears in the Client request ID column.</span></span>

> [!NOTE]
> <span data-ttu-id="ef53c-311">É possível que solicitações múltiplas compartilharem a mesma ID de solicitação do cliente porque o cliente pode atribuir esse valor (embora a biblioteca do cliente de armazenamento atribua um novo valor automaticamente).</span><span class="sxs-lookup"><span data-stu-id="ef53c-311">It is possible for multiple requests to share the same client request id because the client can assign this value (although the Storage Client Library assigns a new value automatically).</span></span> <span data-ttu-id="ef53c-312">No caso de novas tentativas do cliente, todas as tentativas compartilham a mesma ID de solicitação do cliente.</span><span class="sxs-lookup"><span data-stu-id="ef53c-312">In the case of retries from the client, all attempts share the same client request id.</span></span> <span data-ttu-id="ef53c-313">No caso de um lote enviado pelo cliente, o lote tem uma ID de solicitação de cliente único.</span><span class="sxs-lookup"><span data-stu-id="ef53c-313">In the case of a batch sent from the client, the batch has a single client request id.</span></span>
> 
> 

### <span data-ttu-id="ef53c-314"><a name="server-request-id"></a>ID de solicitação do servidor</span><span class="sxs-lookup"><span data-stu-id="ef53c-314"><a name="server-request-id"></a>Server request ID</span></span>
<span data-ttu-id="ef53c-315">O serviço de armazenamento automaticamente gera ids de solicitação do servidor.</span><span class="sxs-lookup"><span data-stu-id="ef53c-315">The storage service automatically generates server request ids.</span></span>

* <span data-ttu-id="ef53c-316">No log de armazenamento do lado do servidor, a id de solicitação do servidor aparece na coluna **Cabeçalho da id de solicitação do** .</span><span class="sxs-lookup"><span data-stu-id="ef53c-316">In the server-side Storage Logging log, the server request id appears the **Request ID header** column.</span></span>
* <span data-ttu-id="ef53c-317">No rastreamento da rede tal como uma capturada pelo Fiddler, a id de solicitação do servidor está visível em mensagens de solicitação como no valor do cabeçalho HTTP **x-ms-request-id** .</span><span class="sxs-lookup"><span data-stu-id="ef53c-317">In a network trace such as one captured by Fiddler, the server request id appears in response messages as the **x-ms-request-id** HTTP header value.</span></span>
* <span data-ttu-id="ef53c-318">No log do lado do cliente que a biblioteca do cliente de armazenamento cria, a id de solicitação do cliente aparece na coluna **Texto de operação** para a entrada de log mostrando a resposta do servidor.</span><span class="sxs-lookup"><span data-stu-id="ef53c-318">In the client-side log that the Storage Client Library creates, the server request id appears in the **Operation Text** column for the log entry showing details of the server response.</span></span>

> [!NOTE]
> <span data-ttu-id="ef53c-319">O serviço de armazenamento sempre atribui uma única id de solicitação de servidor para cada solicitação recebida, para que cada tentativa do cliente de para cada operação incluída no lote tenha uma única id de solicitação do servidor.</span><span class="sxs-lookup"><span data-stu-id="ef53c-319">The storage service always assigns a unique server request id to every request it receives, so every retry attempt from the client and every operation included in a batch has a unique server request id.</span></span>
> 
> 

<span data-ttu-id="ef53c-320">Se a biblioteca do cliente de armazenamento aciona uma **StorageException** no cliente, a propriedade **RequestInformation** contém um objeto **RequestResult** que inclui uma propriedade **ServiceRequestID**.</span><span class="sxs-lookup"><span data-stu-id="ef53c-320">If the Storage Client Library throws a **StorageException** in the client, the **RequestInformation** property contains a **RequestResult** object that includes a **ServiceRequestID** property.</span></span> <span data-ttu-id="ef53c-321">Você também pode acessar um objeto **RequestResult** a partir de uma instância de **OperationContext**.</span><span class="sxs-lookup"><span data-stu-id="ef53c-321">You can also access a **RequestResult** object from an **OperationContext** instance.</span></span>

<span data-ttu-id="ef53c-322">O exemplo de código abaixo demonstra como definir um valor personalizado de **ClientRequestId** ao anexar um objeto **OperationContext** à solicitação para o serviço de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="ef53c-322">The code sample below demonstrates how to set a custom **ClientRequestId** value by attaching an **OperationContext** object the request to the storage service.</span></span> <span data-ttu-id="ef53c-323">Isso também mostra como recuperar p valor de **ServerRequestId** de uma mensagem de resposta.</span><span class="sxs-lookup"><span data-stu-id="ef53c-323">It also shows how to retrieve the **ServerRequestId** value from the response message.</span></span>

```csharp
//Parse the connection string for the storage account.
const string ConnectionString = "DefaultEndpointsProtocol=https;AccountName=account-name;AccountKey=account-key";
CloudStorageAccount storageAccount = CloudStorageAccount.Parse(ConnectionString);
CloudBlobClient blobClient = storageAccount.CreateCloudBlobClient();

// Create an Operation Context that includes custom ClientRequestId string based on constants defined within the application along with a Guid.
OperationContext oc = new OperationContext();
oc.ClientRequestID = String.Format("{0} {1} {2} {3}", HOSTNAME, APPNAME, USERID, Guid.NewGuid().ToString());

try
{
    CloudBlobContainer container = blobClient.GetContainerReference("democontainer");
    ICloudBlob blob = container.GetBlobReferenceFromServer("testImage.jpg", null, null, oc);  
    var downloadToPath = string.Format("./{0}", blob.Name);
    using (var fs = File.OpenWrite(downloadToPath))
    {
        blob.DownloadToStream(fs, null, null, oc);
        Console.WriteLine("\t Blob downloaded to file: {0}", downloadToPath);
    }
}
catch (StorageException storageException)
{
    Console.WriteLine("Storage exception {0} occurred", storageException.Message);
    // Multiple results may exist due to client side retry logic - each retried operation will have a unique ServiceRequestId
    foreach (var result in oc.RequestResults)
    {
            Console.WriteLine("HttpStatus: {0}, ServiceRequestId {1}", result.HttpStatusCode, result.ServiceRequestID);
    }
}
```

### <span data-ttu-id="ef53c-324"><a name="timestamps"></a>Carimbos de data/hora</span><span class="sxs-lookup"><span data-stu-id="ef53c-324"><a name="timestamps"></a>Timestamps</span></span>
<span data-ttu-id="ef53c-325">Você também pode usar o carimbo de data/hora para localizar as entradas de log relacionadas, porém cuidado com qualquer distorção que possa existir entre o relógio do cliente e do servidor.</span><span class="sxs-lookup"><span data-stu-id="ef53c-325">You can also use timestamps to locate related log entries, but be careful of any clock skew between the client and server that may exist.</span></span> <span data-ttu-id="ef53c-326">Pesquise por mais ou menos 15 minutos para coincidir as entradas do lado do servidor com base no carimbo de data/hora do cliente.</span><span class="sxs-lookup"><span data-stu-id="ef53c-326">You should search plus or minus 15 minutes for matching server-side entries based on the timestamp on the client.</span></span> <span data-ttu-id="ef53c-327">Lembre-se que os metadados de blob para os blobs contendo métricas indicam o intervalo de tempo para as métricas armazenadas no blob; isso é útil se você tiver muitas blobs de métricas para o mesmo minuto ou hora.</span><span class="sxs-lookup"><span data-stu-id="ef53c-327">Remember that the blob metadata for the blobs containing metrics indicates the time range for the metrics stored in the blob; this is useful if you have many metrics blobs for the same minute or hour.</span></span>

## <span data-ttu-id="ef53c-328"><a name="troubleshooting-guidance"></a>Diretrizes de solução de problemas</span><span class="sxs-lookup"><span data-stu-id="ef53c-328"><a name="troubleshooting-guidance"></a>Troubleshooting guidance</span></span>
<span data-ttu-id="ef53c-329">Essa seção irá ajudá-lo com o diagnóstico e com a solução de alguns dos problemas mais comuns que seu aplicativo pode encontrar ao usar os serviços de armazenamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="ef53c-329">This section will help you with the diagnosis and troubleshooting of some of the common issues your application may encounter when using the Azure storage services.</span></span> <span data-ttu-id="ef53c-330">Use a lista abaixo para localizar as informações relevantes para o seu problema específico.</span><span class="sxs-lookup"><span data-stu-id="ef53c-330">Use the list below to locate the information relevant to your specific issue.</span></span>

<span data-ttu-id="ef53c-331">**Árvore de decisão de solução de problemas**</span><span class="sxs-lookup"><span data-stu-id="ef53c-331">**Troubleshooting Decision Tree**</span></span>

---
<span data-ttu-id="ef53c-332">O seu problema está relacionado ao desempenho de um dos serviços de armazenamento?</span><span class="sxs-lookup"><span data-stu-id="ef53c-332">Does your issue relate to the performance of one of the storage services?</span></span>

* <span data-ttu-id="ef53c-333">[As métricas mostram alta AverageE2ELatency e baixa AverageServerLatency]</span><span class="sxs-lookup"><span data-stu-id="ef53c-333">[Metrics show high AverageE2ELatency and low AverageServerLatency]</span></span>
* <span data-ttu-id="ef53c-334">[As métricas mostram baixa AverageE2ELatency e baixa AverageServerLatency, mas o cliente está recebendo uma latência alta]</span><span class="sxs-lookup"><span data-stu-id="ef53c-334">[Metrics show low AverageE2ELatency and low AverageServerLatency but the client is experiencing high latency]</span></span>
* <span data-ttu-id="ef53c-335">[As métricas mostram alta AverageServerLatency]</span><span class="sxs-lookup"><span data-stu-id="ef53c-335">[Metrics show high AverageServerLatency]</span></span>
* <span data-ttu-id="ef53c-336">[Você está sofrendo atrasos inesperados na entrega de mensagens na fila]</span><span class="sxs-lookup"><span data-stu-id="ef53c-336">[You are experiencing unexpected delays in message delivery on a queue]</span></span>

---
<span data-ttu-id="ef53c-337">O seu problema está relacionado à disponibilidade de um dos serviços de armazenamento?</span><span class="sxs-lookup"><span data-stu-id="ef53c-337">Does your issue relate to the availability of one of the storage services?</span></span>

* <span data-ttu-id="ef53c-338">[As métricas mostram um aumento em PercentThrottlingError]</span><span class="sxs-lookup"><span data-stu-id="ef53c-338">[Metrics show an increase in PercentThrottlingError]</span></span>
* <span data-ttu-id="ef53c-339">[As métricas mostram um aumento em PercentTimeoutError]</span><span class="sxs-lookup"><span data-stu-id="ef53c-339">[Metrics show an increase in PercentTimeoutError]</span></span>
* <span data-ttu-id="ef53c-340">[As métricas mostram um aumento em PercentNetworkError]</span><span class="sxs-lookup"><span data-stu-id="ef53c-340">[Metrics show an increase in PercentNetworkError]</span></span>

---
 <span data-ttu-id="ef53c-341">O seu aplicativo do cliente está recebendo uma resposta HTTP 4XX (tal como 404) de um serviço de armazenamento?</span><span class="sxs-lookup"><span data-stu-id="ef53c-341">Is your client application receiving an HTTP 4XX (such as 404) response from a storage service?</span></span>

* <span data-ttu-id="ef53c-342">[O cliente está recebendo mensagens HTTP 403 (Proibido)]</span><span class="sxs-lookup"><span data-stu-id="ef53c-342">[The client is receiving HTTP 403 (Forbidden) messages]</span></span>
* <span data-ttu-id="ef53c-343">[O cliente está recebendo mensagens HTTP 404 (Não encontrado)]</span><span class="sxs-lookup"><span data-stu-id="ef53c-343">[The client is receiving HTTP 404 (Not found) messages]</span></span>
* <span data-ttu-id="ef53c-344">[O cliente está recebendo mensagens HTTP 409 (Conflito)]</span><span class="sxs-lookup"><span data-stu-id="ef53c-344">[The client is receiving HTTP 409 (Conflict) messages]</span></span>

---
<span data-ttu-id="ef53c-345">[As métricas mostram uma baixa PercentSuccess ou as entradas de log analíticas têm operações com status de transação de ClientOtherErrors]</span><span class="sxs-lookup"><span data-stu-id="ef53c-345">[Metrics show low PercentSuccess or analytics log entries have operations with transaction status of ClientOtherErrors]</span></span>

---
<span data-ttu-id="ef53c-346">[As métricas de capacidade mostram um aumento inesperado em uso de capacidade de armazenamento]</span><span class="sxs-lookup"><span data-stu-id="ef53c-346">[Capacity metrics show an unexpected increase in storage capacity usage]</span></span>

---
<span data-ttu-id="ef53c-347">[Você está enfrentando reinicializações inesperadas das máquinas virtuais que contêm um grande número de VHDs anexados]</span><span class="sxs-lookup"><span data-stu-id="ef53c-347">[You are experiencing unexpected reboots of Virtual Machines that have a large number of attached VHDs]</span></span>

---
<span data-ttu-id="ef53c-348">[Seu problema apareceu por usar o emulador de armazenamento para desenvolvimento ou teste]</span><span class="sxs-lookup"><span data-stu-id="ef53c-348">[Your issue arises from using the storage emulator for development or test]</span></span>

---
<span data-ttu-id="ef53c-349">[Você encontrou problemas ao instalar o SDK do Azure para .NET]</span><span class="sxs-lookup"><span data-stu-id="ef53c-349">[You are encountering problems installing the Azure SDK for .NET]</span></span>

---
<span data-ttu-id="ef53c-350">[Você tem um problema diferente com um serviço de armazenamento]</span><span class="sxs-lookup"><span data-stu-id="ef53c-350">[You have a different issue with a storage service]</span></span>

---
### <span data-ttu-id="ef53c-351"><a name="metrics-show-high-AverageE2ELatency-and-low-AverageServerLatency"></a>As métricas mostram alta AverageE2ELatency e baixa AverageServerLatency</span><span class="sxs-lookup"><span data-stu-id="ef53c-351"><a name="metrics-show-high-AverageE2ELatency-and-low-AverageServerLatency"></a>Metrics show high AverageE2ELatency and low AverageServerLatency</span></span>
<span data-ttu-id="ef53c-352">A figura abaixo da ferramenta de monitoramento do [portal do Azure](https://portal.azure.com) mostra um exemplo em que a **AverageE2ELatency** é significantemente mais alta que a **AverageServerLatency**.</span><span class="sxs-lookup"><span data-stu-id="ef53c-352">The illustration below from the [Azure portal](https://portal.azure.com) monitoring tool shows an example where the **AverageE2ELatency** is significantly higher than the **AverageServerLatency**.</span></span>

![][4]

<span data-ttu-id="ef53c-353">Observe que o serviço de armazenamento calcula apenas a métrica **AverageE2ELatency** para solicitações de êxito e, ao contrário de **AverageServerLatency**, inclui o tempo que o cliente leva para enviar os dados e receber a confirmação do serviço de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="ef53c-353">Note that the storage service only calculates the metric **AverageE2ELatency** for successful requests and, unlike **AverageServerLatency**, includes the time the client takes to send the data and receive acknowledgement from the storage service.</span></span> <span data-ttu-id="ef53c-354">Portanto, a diferença entre a **AverageE2ELatency** e a **AverageServerLatency** pode ser ou devido a lentidão de resposta do aplicativo do cliente ou devido às condições da rede.</span><span class="sxs-lookup"><span data-stu-id="ef53c-354">Therefore, a difference between **AverageE2ELatency** and **AverageServerLatency** could be either due to the client application being slow to respond, or due to conditions on the network.</span></span>

> [!NOTE]
> <span data-ttu-id="ef53c-355">Você também pode exibir **E2ELatency** e **ServerLatency** das operações de armazenamento individual nos dados de registro do log de Armazenamento.</span><span class="sxs-lookup"><span data-stu-id="ef53c-355">You can also view **E2ELatency** and **ServerLatency** for individual storage operations in the Storage Logging log data.</span></span>
> 
> 

#### <a name="investigating-client-performance-issues"></a><span data-ttu-id="ef53c-356">Investigação dos problemas de desempenho do cliente</span><span class="sxs-lookup"><span data-stu-id="ef53c-356">Investigating client performance issues</span></span>
<span data-ttu-id="ef53c-357">Entre as possíveis razões para a lentidão de resposta do cliente estão: ter um número limitado de conexões ou threads disponíveis ou ter poucos recursos, como CPU, memória ou largura de banda de rede.</span><span class="sxs-lookup"><span data-stu-id="ef53c-357">Possible reasons for the client responding slowly include having a limited number of available connections or threads, or being low on resources such as CPU, memory or network bandwidth.</span></span> <span data-ttu-id="ef53c-358">Você pode ser capaz de resolver os problemas ao modificar o código do cliente para ser mais eficiente (por exemplo ao usar chamadas assíncronas para o serviço de armazenamento) ou usar uma máquina virtual maior (com mais cores e mais memória).</span><span class="sxs-lookup"><span data-stu-id="ef53c-358">You may be able to resolve the issue by modifying the client code to be more efficient (for example by using asynchronous calls to the storage service), or by using a larger Virtual Machine (with more cores and more memory).</span></span>

<span data-ttu-id="ef53c-359">Para os serviços Tabela e Fila, o algoritmo Nagle também pode causar **AverageE2ELatency** alta em comparação com **AverageServerLatency**: para saber mais, confira a postagem [Nagle’s Algorithm is Not Friendly towards Small Requests](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/06/25/nagle-s-algorithm-is-not-friendly-towards-small-requests.aspx) (Algoritmo Nagle não é amigável a solicitações pequenas).</span><span class="sxs-lookup"><span data-stu-id="ef53c-359">For the table and queue services, the Nagle algorithm can also cause high **AverageE2ELatency** as compared to **AverageServerLatency**: for more information see the post [Nagle's Algorithm is Not Friendly towards Small Requests](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/06/25/nagle-s-algorithm-is-not-friendly-towards-small-requests.aspx).</span></span> <span data-ttu-id="ef53c-360">Você pode desabilitar o algoritmo de Nagle em código ao usar a classe **ServicePointManager** no namespace **System.Net**.</span><span class="sxs-lookup"><span data-stu-id="ef53c-360">You can disable the Nagle algorithm in code by using the **ServicePointManager** class in the **System.Net** namespace.</span></span> <span data-ttu-id="ef53c-361">Faça isso antes de fazer qualquer chamada para os serviços de tabela ou fila no seu aplicativo já que isso não afeta as conexões que já estão abertas.</span><span class="sxs-lookup"><span data-stu-id="ef53c-361">You should do this before you make any calls to the table or queue services in your application since this does not affect connections that are already open.</span></span> <span data-ttu-id="ef53c-362">O exemplo a seguir vem do método **Application_Start** em uma função de trabalho.</span><span class="sxs-lookup"><span data-stu-id="ef53c-362">The following example comes from the **Application_Start** method in a worker role.</span></span>

```csharp
var storageAccount = CloudStorageAccount.Parse(connStr);
ServicePoint tableServicePoint = ServicePointManager.FindServicePoint(storageAccount.TableEndpoint);
tableServicePoint.UseNagleAlgorithm = false;
ServicePoint queueServicePoint = ServicePointManager.FindServicePoint(storageAccount.QueueEndpoint);
queueServicePoint.UseNagleAlgorithm = false;
```

<span data-ttu-id="ef53c-363">Verifique os logs do lado do cliente para ver quantas solicitações seu aplicativo do cliente está enviando e verifique se há afunilamentos gerais de desempenho relacionados ao .NET no seu cliente, tais como CPU, coleta de lixo .NET, utilização da rede ou memória.</span><span class="sxs-lookup"><span data-stu-id="ef53c-363">You should check the client-side logs to see how many requests your client application is submitting, and check for general .NET related performance bottlenecks in your client such as CPU, .NET garbage collection, network utilization, or memory.</span></span> <span data-ttu-id="ef53c-364">Como ponto de partida para solucionar problemas de aplicativos do cliente .NET, confira [Depuração, rastreamento e criação de perfil](http://msdn.microsoft.com/library/7fe0dd2y).</span><span class="sxs-lookup"><span data-stu-id="ef53c-364">As a starting point for troubleshooting .NET client applications, see [Debugging, Tracing, and Profiling](http://msdn.microsoft.com/library/7fe0dd2y).</span></span>

#### <a name="investigating-network-latency-issues"></a><span data-ttu-id="ef53c-365">Investigando os problemas de latência de rede</span><span class="sxs-lookup"><span data-stu-id="ef53c-365">Investigating network latency issues</span></span>
<span data-ttu-id="ef53c-366">Normalmente a alta latência de ponta a ponta causada pela rede é devido a condições transitórias.</span><span class="sxs-lookup"><span data-stu-id="ef53c-366">Typically, high end-to-end latency caused by the network is due to transient conditions.</span></span> <span data-ttu-id="ef53c-367">Você pode investigar tantos os problemas de rede persistentes ou transitórios, tais como pacotes ignorados ao usar ferramentas, tais como Wireshark ou Microsoft Message Analyzer.</span><span class="sxs-lookup"><span data-stu-id="ef53c-367">You can investigate both transient and persistent network issues such as dropped packets by using tools such as Wireshark or Microsoft Message Analyzer.</span></span>

<span data-ttu-id="ef53c-368">Para saber mais sobre o uso do Wireshark para a solução de problemas de rede, consulte o "[Anexo 2: Usando o Wireshark para capturar o tráfego de rede]".</span><span class="sxs-lookup"><span data-stu-id="ef53c-368">For more information about using Wireshark to troubleshoot network issues, see "[Appendix 2: Using Wireshark to capture network traffic]."</span></span>

<span data-ttu-id="ef53c-369">Para saber mais sobre o uso do Microsoft Message Analyzer para a solução de problemas de rede, consulte o "[Anexo 3: Usando o Microsoft Message Analyzer para capturar o tráfego de rede]".</span><span class="sxs-lookup"><span data-stu-id="ef53c-369">For more information about using Microsoft Message Analyzer to troubleshoot network issues, see "[Appendix 3: Using Microsoft Message Analyzer to capture network traffic]."</span></span>

### <span data-ttu-id="ef53c-370"><a name="metrics-show-low-AverageE2ELatency-and-low-AverageServerLatency"></a>As métricas mostram baixa AverageE2ELatency e baixa AverageServerLatency, mas o cliente está recebendo uma latência alta</span><span class="sxs-lookup"><span data-stu-id="ef53c-370"><a name="metrics-show-low-AverageE2ELatency-and-low-AverageServerLatency"></a>Metrics show low AverageE2ELatency and low AverageServerLatency but the client is experiencing high latency</span></span>
<span data-ttu-id="ef53c-371">Nesse cenário, o caso mais provável é um atraso nas solicitações de armazenamento chegando no serviço de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="ef53c-371">In this scenario, the most likely cause is a delay in the storage requests reaching the storage service.</span></span> <span data-ttu-id="ef53c-372">Investigue porque as solicitações do cliente não estão passando pelo serviço de blob.</span><span class="sxs-lookup"><span data-stu-id="ef53c-372">You should investigate why requests from the client are not making it through to the blob service.</span></span>

<span data-ttu-id="ef53c-373">Uma das possíveis razões para o atraso do cliente em enviar solicitações é que há um número limitado de conexões ou threads disponíveis.</span><span class="sxs-lookup"><span data-stu-id="ef53c-373">One possible reason for the client delaying sending requests is that there are a limited number of available connections or threads.</span></span>

<span data-ttu-id="ef53c-374">Verifique também se o cliente está realizando várias tentativas e investigue a razão, se for o caso.</span><span class="sxs-lookup"><span data-stu-id="ef53c-374">You should also check whether the client is performing multiple retries, and investigate the reason if this is the case.</span></span> <span data-ttu-id="ef53c-375">Para determinar se o cliente está realizando várias tentativas, é possível:</span><span class="sxs-lookup"><span data-stu-id="ef53c-375">To determine whether the client is performing multiple retries, you can:</span></span>

* <span data-ttu-id="ef53c-376">Examine os logs da Análise de Armazenamento.</span><span class="sxs-lookup"><span data-stu-id="ef53c-376">Examine the Storage Analytics logs.</span></span> <span data-ttu-id="ef53c-377">Se estiverem ocorrendo várias repetições, você verá várias operações com a mesma ID de solicitação do cliente, mas com IDs de solicitação de servidor diferentes.</span><span class="sxs-lookup"><span data-stu-id="ef53c-377">If multiple retries are happening, you will see multiple operations with the same client request ID but with different server request IDs.</span></span>
* <span data-ttu-id="ef53c-378">Examine os logs do cliente.</span><span class="sxs-lookup"><span data-stu-id="ef53c-378">Examine the client logs.</span></span> <span data-ttu-id="ef53c-379">O log detalhado indica que ocorreu uma repetição.</span><span class="sxs-lookup"><span data-stu-id="ef53c-379">Verbose logging will indicate that a retry has occurred.</span></span>
* <span data-ttu-id="ef53c-380">Depure seu código e verifique as propriedades do objeto **OperationContext** associado à solicitação.</span><span class="sxs-lookup"><span data-stu-id="ef53c-380">Debug your code, and check the properties of the **OperationContext** object associated with the request.</span></span> <span data-ttu-id="ef53c-381">Se a operação foi repetida, a propriedade **RequestResults** incluirá várias IDs de solicitação de servidor exclusivas.</span><span class="sxs-lookup"><span data-stu-id="ef53c-381">If the operation has retried, the **RequestResults** property will include multiple unique server request IDs.</span></span> <span data-ttu-id="ef53c-382">Você também pode verificar as horas de início e término de cada solicitação.</span><span class="sxs-lookup"><span data-stu-id="ef53c-382">You can also check the start and end times for each request.</span></span> <span data-ttu-id="ef53c-383">Para obter mais informações, veja o exemplo de código na seção [ID de solicitação do servidor].</span><span class="sxs-lookup"><span data-stu-id="ef53c-383">For more information, see the code sample in the section [Server request ID].</span></span>

<span data-ttu-id="ef53c-384">Se não houver problemas no cliente, investigue os possíveis problemas de rede, tais como perda de pacote.</span><span class="sxs-lookup"><span data-stu-id="ef53c-384">If there are no issues in the client, you should investigate potential network issues such as packet loss.</span></span> <span data-ttu-id="ef53c-385">Você pode usar as ferramentas, tais como Wireshark ou Microsoft Message Analyzer para investigar os problemas de rede.</span><span class="sxs-lookup"><span data-stu-id="ef53c-385">You can use tools such as Wireshark or Microsoft Message Analyzer to investigate network issues.</span></span>

<span data-ttu-id="ef53c-386">Para saber mais sobre o uso do Wireshark para a solução de problemas de rede, consulte o "[Anexo 2: Usando o Wireshark para capturar o tráfego de rede]".</span><span class="sxs-lookup"><span data-stu-id="ef53c-386">For more information about using Wireshark to troubleshoot network issues, see "[Appendix 2: Using Wireshark to capture network traffic]."</span></span>

<span data-ttu-id="ef53c-387">Para saber mais sobre o uso do Microsoft Message Analyzer para a solução de problemas de rede, consulte o "[Anexo 3: Usando o Microsoft Message Analyzer para capturar o tráfego de rede]".</span><span class="sxs-lookup"><span data-stu-id="ef53c-387">For more information about using Microsoft Message Analyzer to troubleshoot network issues, see "[Appendix 3: Using Microsoft Message Analyzer to capture network traffic]."</span></span>

### <span data-ttu-id="ef53c-388"><a name="metrics-show-high-AverageServerLatency"></a>As métricas mostram alta AverageServerLatency</span><span class="sxs-lookup"><span data-stu-id="ef53c-388"><a name="metrics-show-high-AverageServerLatency"></a>Metrics show high AverageServerLatency</span></span>
<span data-ttu-id="ef53c-389">No caso de alta **AverageServerLatency** para as solicitações de download de blob, você deve usar os registros de log de armazenamento para ver se há solicitações repetidas para o mesmo blob (ou para grupos de blobs).</span><span class="sxs-lookup"><span data-stu-id="ef53c-389">In the case of high **AverageServerLatency** for blob download requests, you should use the Storage Logging logs to see if there are repeated requests for the same blob (or set of blobs).</span></span> <span data-ttu-id="ef53c-390">Para solicitações de carregamento de blob, você deve investigar que tamanho de bloco o cliente está usando (por exemplo, blocos inferiores a 64k em tamanho podem resultar em sobrecargas ao menos que leituras também sejam inferiores a 64k partes) e se múltiplos clientes estiverem carregando blocos no mesmo blob em paralelo.</span><span class="sxs-lookup"><span data-stu-id="ef53c-390">For blob upload requests, you should investigate what block size the client is using (for example, blocks less than 64K in size can result in overheads unless the reads are also in less than 64K chunks), and if multiple clients are uploading blocks to the same blob in parallel.</span></span> <span data-ttu-id="ef53c-391">Você também deve verificar as métricas por minuto para ver se há picos no número de solicitações que excedem as metas de escalabilidade por segundo: veja também “[As métricas mostram um aumento em PercentTimeoutError]”.</span><span class="sxs-lookup"><span data-stu-id="ef53c-391">You should also check the per-minute metrics for spikes in the number of requests that result in exceeding the per second scalability targets: also see "[Metrics show an increase in PercentTimeoutError]."</span></span>

<span data-ttu-id="ef53c-392">No caso de alta **AverageServerLatency** para as solicitações de download de blob, você deve usar os registros de log de armazenamento para ver se há solicitações repetidas para o mesmo blob (ou para grupos de blobs).</span><span class="sxs-lookup"><span data-stu-id="ef53c-392">If you are seeing high **AverageServerLatency** for blob download requests when there are repeated requests the same blob or set of blobs, then you should consider caching these blobs using Azure Cache or the Azure Content Delivery Network (CDN).</span></span> <span data-ttu-id="ef53c-393">Para solicitações de carregamento, você pode aprimorar a produtividade usando um tamanho maior de bloco.</span><span class="sxs-lookup"><span data-stu-id="ef53c-393">For upload requests, you can improve the throughput by using a larger block size.</span></span> <span data-ttu-id="ef53c-394">Para consultas às tabelas, também é possível implementar o cache no lado do cliente nos clientes que realizam as mesmas operações de consulta e nos casos em que os dados não mudam com frequência.</span><span class="sxs-lookup"><span data-stu-id="ef53c-394">For queries to tables, it is also possible to implement client-side caching on clients that perform the same query operations and where the data doesn't change frequently.</span></span>

<span data-ttu-id="ef53c-395">Valores altos de **AverageServerLatency** podem também ser um sintoma de tabelas ou consultas mal desenhadas que resultam em operações de digitalização ou que seguem a anti-sequência acrescentar/preceder.</span><span class="sxs-lookup"><span data-stu-id="ef53c-395">High **AverageServerLatency** values can also be a symptom of poorly designed tables or queries that result in scan operations or that follow the append/prepend anti-pattern.</span></span> <span data-ttu-id="ef53c-396">Consulte "[As métricas mostram um aumento em PercentThrottlingError]" para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="ef53c-396">See "[Metrics show an increase in PercentThrottlingError]" for more information.</span></span>

> [!NOTE]
> <span data-ttu-id="ef53c-397">É possível encontrar uma lista de verificação de desempenho abrangente aqui: [Lista de verificação de escalabilidade e desempenho do Armazenamento do Microsoft Azure](storage-performance-checklist.md).</span><span class="sxs-lookup"><span data-stu-id="ef53c-397">You can find a comprehensive checklist performance checklist here: [Microsoft Azure Storage Performance and Scalability Checklist](storage-performance-checklist.md).</span></span>
> 
> 

### <span data-ttu-id="ef53c-398"><a name="you-are-experiencing-unexpected-delays-in-message-delivery"></a>Você está sofrendo atrasos inesperados na entrega de mensagens na fila</span><span class="sxs-lookup"><span data-stu-id="ef53c-398"><a name="you-are-experiencing-unexpected-delays-in-message-delivery"></a>You are experiencing unexpected delays in message delivery on a queue</span></span>
<span data-ttu-id="ef53c-399">Se você estiver sofrendo um atraso entre o tempo um aplicativo adiciona uma mensagem à fila e o tempo que ela fica disponível para a leitura da fila, então siga as seguintes etapas para diagnosticar o problemas:</span><span class="sxs-lookup"><span data-stu-id="ef53c-399">If you are experiencing a delay between the time an application adds a message to a queue and the time it becomes available to read from the queue, then you should take the following steps to diagnose the issue:</span></span>

* <span data-ttu-id="ef53c-400">Verifique se o aplicativo está efetivamente adicionando as mensagens à fila.</span><span class="sxs-lookup"><span data-stu-id="ef53c-400">Verify the application is successfully adding the messages to the queue.</span></span> <span data-ttu-id="ef53c-401">Verifique se o aplicativo não está tentando o método **AddMessage** várias vezes antes de conseguir.</span><span class="sxs-lookup"><span data-stu-id="ef53c-401">Check that the application is not retrying the **AddMessage** method several times before succeeding.</span></span> <span data-ttu-id="ef53c-402">Os logs da biblioteca do cliente de armazenamento irá mostrar qualquer tentativa repetida de operações de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="ef53c-402">The Storage Client Library logs will show any repeated retries of storage operations.</span></span>
* <span data-ttu-id="ef53c-403">Verifique se não há nenhum distorção no relógio entre a função de trabalho que adiciona a mensagem à fila e a função de trabalho que lê a mensagem da fila que faz parecer como se houvesse um atraso em processamento.</span><span class="sxs-lookup"><span data-stu-id="ef53c-403">Verify there is no clock skew between the worker role that adds the message to the queue and the worker role that reads the message from the queue that makes it appear as if there is a delay in processing.</span></span>
* <span data-ttu-id="ef53c-404">A função de trabalho lê as mensagens da fila que tem falhas.</span><span class="sxs-lookup"><span data-stu-id="ef53c-404">Check if the worker role that reads the messages from the queue is failing.</span></span> <span data-ttu-id="ef53c-405">Se um cliente de fila chama o método **GetMessage**, mas falha em responder com uma confirmação, a mensagem permanecerá invisível na fila até que o período de **invisibilityTimeout** expire.</span><span class="sxs-lookup"><span data-stu-id="ef53c-405">If a queue client calls the **GetMessage** method but fails to respond with an acknowledgement, the message will remain invisible on the queue until the **invisibilityTimeout** period expires.</span></span> <span data-ttu-id="ef53c-406">Nesse momento, a mensagem se torna disponibilidade para ser processada novamente.</span><span class="sxs-lookup"><span data-stu-id="ef53c-406">At this point, the message becomes available for processing again.</span></span>
* <span data-ttu-id="ef53c-407">Verifique se o tamanho da fila está aumentando com o tempo.</span><span class="sxs-lookup"><span data-stu-id="ef53c-407">Check if the queue length is growing over time.</span></span> <span data-ttu-id="ef53c-408">Isso pode acontecer se você não tiver operadores disponíveis o suficiente para processar todas as mensagens que os outros operadores estão colocando na fila.</span><span class="sxs-lookup"><span data-stu-id="ef53c-408">This can occur if you do not have sufficient workers available to process all of the messages that other workers are placing on the queue.</span></span> <span data-ttu-id="ef53c-409">Verifique também as métricas para ver se as solicitações excluídas estão falhando e a retirada da fila conta as mensagens as quais podem indicar falhas repetidas de tentativas para excluir a mensagem.</span><span class="sxs-lookup"><span data-stu-id="ef53c-409">You should also check the metrics to see if delete requests are failing and the dequeue count on messages, which might indicate repeated failed attempts to delete the message.</span></span>
* <span data-ttu-id="ef53c-410">Examine os registros de log de armazenamento para qualquer operação de fila que possa estar mais alta do que a **E2ELatency** esperada e dos valor **ServerLatency** durante um período mais longo de tempo do que de costume.</span><span class="sxs-lookup"><span data-stu-id="ef53c-410">Examine the Storage Logging logs for any queue operations that have higher than expected **E2ELatency** and **ServerLatency** values over a longer period of time than usual.</span></span>

### <span data-ttu-id="ef53c-411"><a name="metrics-show-an-increase-in-PercentThrottlingError"></a>As métricas mostram um aumento em PercentThrottlingError</span><span class="sxs-lookup"><span data-stu-id="ef53c-411"><a name="metrics-show-an-increase-in-PercentThrottlingError"></a>Metrics show an increase in PercentThrottlingError</span></span>
<span data-ttu-id="ef53c-412">Erros de limitação acontecem quando você excede os alvos de escalabilidade de um serviço de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="ef53c-412">Throttling errors occur when you exceed the scalability targets of a storage service.</span></span> <span data-ttu-id="ef53c-413">O serviço de armazenamento faz isso para garantir que nenhum cliente ou locatário possa usar o serviço a custos de outros.</span><span class="sxs-lookup"><span data-stu-id="ef53c-413">The storage service does this to ensure that no single client or tenant can use the service at the expense of others.</span></span> <span data-ttu-id="ef53c-414">Para saber mais, consulte [Metas de desempenho e de escalabilidade do Armazenamento do Azure](storage-scalability-targets.md) para obter detalhes sobre alvos de escalabilidade para contas de armazenamento e alvos de desempenho para partições dentro de contas de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="ef53c-414">For more information, see [Azure Storage Scalability and Performance Targets](storage-scalability-targets.md) for details on scalability targets for storage accounts and performance targets for partitions within storage accounts.</span></span>

<span data-ttu-id="ef53c-415">Se a métrica de **PercentThrottlingError** mostra um aumento na porcentagem de solicitações que estão falhando com um erro de limitação, você precisa investigar um dos dois cenários:</span><span class="sxs-lookup"><span data-stu-id="ef53c-415">If the **PercentThrottlingError** metric show an increase in the percentage of requests that are failing with a throttling error, you need to investigate one of two scenarios:</span></span>

* <span data-ttu-id="ef53c-416">[Aumento transitório em PercentThrottlingError]</span><span class="sxs-lookup"><span data-stu-id="ef53c-416">[Transient increase in PercentThrottlingError]</span></span>
* <span data-ttu-id="ef53c-417">[Aumento permanente em erro de PercentThrottlingError]</span><span class="sxs-lookup"><span data-stu-id="ef53c-417">[Permanent increase in PercentThrottlingError error]</span></span>

<span data-ttu-id="ef53c-418">Um aumento em **PercentThrottlingError** frequentemente acontece ao mesmo tempo que há um aumento no número de solicitações de armazenamento ou quando você está fazendo um teste de carga inicial do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ef53c-418">An increase in **PercentThrottlingError** often occurs at the same time as an increase in the number of storage requests, or when you are initially load testing your application.</span></span> <span data-ttu-id="ef53c-419">Isso pode também manifestar no cliente como mensagens de status HTTP "503 Server Busy" ou "500 Operation Timeout" a partir das operações de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="ef53c-419">This may also manifest itself in the client as "503 Server Busy" or "500 Operation Timeout" HTTP status messages from storage operations.</span></span>

#### <span data-ttu-id="ef53c-420"><a name="transient-increase-in-PercentThrottlingError"></a>Aumento transitório em PercentThrottlingError</span><span class="sxs-lookup"><span data-stu-id="ef53c-420"><a name="transient-increase-in-PercentThrottlingError"></a>Transient increase in PercentThrottlingError</span></span>
<span data-ttu-id="ef53c-421">Se você estiver vendo picos no valor do **PercentThrottlingError** que coincidam com períodos de alta atividade para o aplicativo, você deve implementar uma retirada estratégia exponencial (não linear) para novas tentativas em seu cliente: isso reduzirá a carga imediata na partição e ajudará seu aplicativo a suavizar picos no tráfego.</span><span class="sxs-lookup"><span data-stu-id="ef53c-421">If you are seeing spikes in the value of **PercentThrottlingError** that coincide with periods of high activity for the application, you should implement an exponential (not linear) back off strategy for retries in your client: this will reduce the immediate load on the partition and help your application to smooth out spikes in traffic.</span></span> <span data-ttu-id="ef53c-422">Para saber mais sobre como implementar políticas de repetição usando a Biblioteca do Cliente de Armazenamento, veja o [Namespace Microsoft.WindowsAzure.Storage.RetryPolicies](http://msdn.microsoft.com/library/azure/microsoft.windowsazure.storage.retrypolicies.aspx).</span><span class="sxs-lookup"><span data-stu-id="ef53c-422">For more information about how to implement retry policies using the Storage Client Library, see [Microsoft.WindowsAzure.Storage.RetryPolicies Namespace](http://msdn.microsoft.com/library/azure/microsoft.windowsazure.storage.retrypolicies.aspx).</span></span>

> [!NOTE]
> <span data-ttu-id="ef53c-423">Você também pode ver os picos no valor de **PercentThrottlingError** que não coincidem com períodos de alta atividade para o aplicativo: a causa mais provável aqui é o serviço de armazenamento estar movendo partições para melhorar o balanceamento de carga.</span><span class="sxs-lookup"><span data-stu-id="ef53c-423">You may also see spikes in the value of **PercentThrottlingError** that do not coincide with periods of high activity for the application: the most likely cause here is the storage service moving partitions to improve load balancing.</span></span>
> 
> 

#### <span data-ttu-id="ef53c-424"><a name="permanent-increase-in-PercentThrottlingError"></a>Aumento permanente em erro de PercentThrottlingError</span><span class="sxs-lookup"><span data-stu-id="ef53c-424"><a name="permanent-increase-in-PercentThrottlingError"></a>Permanent increase in PercentThrottlingError error</span></span>
<span data-ttu-id="ef53c-425">Se você está vendo constantemente um valor alto para **PercentThrottlingError** seguido de um aumento permanente nos seus volumes de transações ou quando você está realizando os seus testes de carga iniciais no seu aplicativo, então você deve avaliar como o seu aplicativo está usando as partições de armazenamento e se está atingindo os alvos de escalabilidade para a conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="ef53c-425">If you are seeing a consistently high value for **PercentThrottlingError** following a permanent increase in your transaction volumes, or when you are performing your initial load tests on your application, then you need to evaluate how your application is using storage partitions and whether it is approaching the scalability targets for a storage account.</span></span> <span data-ttu-id="ef53c-426">Por exemplo, se você está vendo erros de limitação na fila (o qual conta como uma partição única), então considere usar filas adicionais para espalhar as transações entre diversas partições.</span><span class="sxs-lookup"><span data-stu-id="ef53c-426">For example, if you are seeing throttling errors on a queue (which counts as a single partition), then you should consider using additional queues to spread the transactions across multiple partitions.</span></span> <span data-ttu-id="ef53c-427">Se você está vendo erros de limitação em uma tabela, você precisa considerar usar um esquema de partições diferentes para espalhar suas transações entre as diversas partições usando uma gama maior de valores chave de partição.</span><span class="sxs-lookup"><span data-stu-id="ef53c-427">If you are seeing throttling errors on a table, you need to consider using a different partitioning scheme to spread your transactions across multiple partitions by using a wider range of partition key values.</span></span> <span data-ttu-id="ef53c-428">Uma causa comum desse problema é a colocar/acrescentar antipadrão onde você seleciona a data como a chave de partição e, em seguida, todos os dados em um determinado dia são gravados em uma partição: sob carga, isso pode resultar em um afunilamento de gravação.</span><span class="sxs-lookup"><span data-stu-id="ef53c-428">One common cause of this issue is the prepend/append anti-pattern where you select the date as the partition key and then all data on a particular day is written to one partition: under load, this can result in a write bottleneck.</span></span> <span data-ttu-id="ef53c-429">Considere um design de partição diferente ou avalie se usando um armazenamento de blob pode ser uma solução melhor.</span><span class="sxs-lookup"><span data-stu-id="ef53c-429">You should either consider a different partitioning design or evaluate whether using blob storage might be a better solution.</span></span> <span data-ttu-id="ef53c-430">Verifique também se a limitação está ocorrendo como resultado de picos no seu tráfego e investigue as formas de suavizar seu padrão de solicitações.</span><span class="sxs-lookup"><span data-stu-id="ef53c-430">You should also check if the throttling is occurring as a result of spikes in your traffic and investigate ways of smoothing your pattern of requests.</span></span>

<span data-ttu-id="ef53c-431">Se você distribuir suas transações entre diversas partições, você ainda deve levar em consideração os limites de escalabilidade definidos para a conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="ef53c-431">If you distribute your transactions across multiple partitions, you must still be aware of the scalability limits set for the storage account.</span></span> <span data-ttu-id="ef53c-432">Por exemplo, se você usa dez filas cada processando no máximo 2.000 mensagens de 1KB por segundo, você estará no limite total de 20.000 mensagens por segundo para cada conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="ef53c-432">For example, if you used ten queues each processing the maximum of 2,000 1KB messages per second, you will be at the overall limit of 20,000 messages per second for the storage account.</span></span> <span data-ttu-id="ef53c-433">Se você precisa processar mais de 20.000 entidades por segundo, você deve considerar usar diversas contas de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="ef53c-433">If you need to process more than 20,000 entities per second, you should consider using multiple storage accounts.</span></span> <span data-ttu-id="ef53c-434">Você também deve ter em mente que o tamanho de suas solicitações e entidades tem um impacto no quando o serviço de armazenamento limita seus clientes: se você tiver maiores solicitações e entidades, você pode estar limitada mais cedo.</span><span class="sxs-lookup"><span data-stu-id="ef53c-434">You should also bear in mind that the size of your requests and entities has an impact on when the storage service throttles your clients: if you have larger requests and entities, you may be throttled sooner.</span></span>

<span data-ttu-id="ef53c-435">Designs de consultas ineficientes podem causar também que você atinja os limites de escalabilidade para as partições de tabela.</span><span class="sxs-lookup"><span data-stu-id="ef53c-435">Inefficient query design can also cause you to hit the scalability limits for table partitions.</span></span> <span data-ttu-id="ef53c-436">Por exemplo, uma consulta com um filtro que seleciona apenas um por cento das entidades em uma partição, mas que digitaliza todas as entidades em uma partição precisará ter acesso a cada entidade.</span><span class="sxs-lookup"><span data-stu-id="ef53c-436">For example, a query with a filter that only selects one percent of the entities in a partition but that scans all the entities in a partition will need to access each entity.</span></span> <span data-ttu-id="ef53c-437">Toda entidade lida irá contar para um número total de transações naquela partição, portanto, você pode facilmente atingir os alvos de escalabilidade.</span><span class="sxs-lookup"><span data-stu-id="ef53c-437">Every entity read will count towards the total number of transactions in that partition; therefore, you can easily reach the scalability targets.</span></span>

> [!NOTE]
> <span data-ttu-id="ef53c-438">Seu teste de desempenho deve revelar qualquer design de consulta ineficiente em sua partição.</span><span class="sxs-lookup"><span data-stu-id="ef53c-438">Your performance testing should reveal any inefficient query designs in your application.</span></span>
> 
> 

### <span data-ttu-id="ef53c-439"><a name="metrics-show-an-increase-in-PercentTimeoutError"></a>As métricas mostram um aumento em PercentTimeoutError</span><span class="sxs-lookup"><span data-stu-id="ef53c-439"><a name="metrics-show-an-increase-in-PercentTimeoutError"></a>Metrics show an increase in PercentTimeoutError</span></span>
<span data-ttu-id="ef53c-440">Suas métricas mostram um aumento em **PercentTimeoutError** para um dos seus serviços de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="ef53c-440">Your metrics show an increase in **PercentTimeoutError** for one of your storage services.</span></span> <span data-ttu-id="ef53c-441">Ao mesmo tempo, o cliente recebe um volume alto de mensagens de status HTTP "500 Operation Timeout" a partir das operações de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="ef53c-441">At the same time, the client receives a high volume of "500 Operation Timeout" HTTP status messages from storage operations.</span></span>

> [!NOTE]
> <span data-ttu-id="ef53c-442">Você pode ver temporariamente erros de tempo limite enquanto o serviço de armazenamento balanceia a carga de solicitações movendo um partição para um novo servidor.</span><span class="sxs-lookup"><span data-stu-id="ef53c-442">You may see timeout errors temporarily as the storage service load balances requests by moving a partition to a new server.</span></span>
> 
> 

<span data-ttu-id="ef53c-443">A métrica **PercentTimeoutError** é uma agregação das seguintes métricas: **ClientTimeoutError**, **AnonymousClientTimeoutError**, **SASClientTimeoutError**, **ServerTimeoutError**, **AnonymousServerTimeoutError** e **SASServerTimeoutError**.</span><span class="sxs-lookup"><span data-stu-id="ef53c-443">The **PercentTimeoutError** metric is an aggregation of the following metrics: **ClientTimeoutError**, **AnonymousClientTimeoutError**, **SASClientTimeoutError**, **ServerTimeoutError**, **AnonymousServerTimeoutError**, and **SASServerTimeoutError**.</span></span>

<span data-ttu-id="ef53c-444">Os tempos limites do servidor são causados por um erro no servidor.</span><span class="sxs-lookup"><span data-stu-id="ef53c-444">The server timeouts are caused by an error on the server.</span></span> <span data-ttu-id="ef53c-445">Os tempos limites do cliente acontecem porque uma operação no servidor excedeu o tempo limite especificado pelo cliente; por exemplo, um cliente usando a biblioteca do cliente de armazenamento pode definir um tempo limite para uma operação usando a propriedade **ServerTimeout** da classe **QueueRequestOptions**.</span><span class="sxs-lookup"><span data-stu-id="ef53c-445">The client timeouts happen because an operation on the server has exceeded the timeout specified by the client; for example, a client using the Storage Client Library can set a timeout for an operation by using the **ServerTimeout** property of the **QueueRequestOptions** class.</span></span>

<span data-ttu-id="ef53c-446">Os tempos limites indicam um problema com o serviço de armazenamento que requer uma investigação detalhada.</span><span class="sxs-lookup"><span data-stu-id="ef53c-446">Server timeouts indicate a problem with the storage service that requires further investigation.</span></span> <span data-ttu-id="ef53c-447">Você pode usar as métricas para ver se você está atingindo os limites de escalabilidade do servidor e para identificar quaisquer picos de tráfego que pode estar causando esse problema.</span><span class="sxs-lookup"><span data-stu-id="ef53c-447">You can use metrics to see if you are hitting the scalability limits for the service and to identify any spikes in traffic that might be causing this problem.</span></span> <span data-ttu-id="ef53c-448">Se o problema for intermitente, pode ser devido à atividade de balanceamento de carga no serviço.</span><span class="sxs-lookup"><span data-stu-id="ef53c-448">If the problem is intermittent, it may be due to load-balancing activity in the service.</span></span> <span data-ttu-id="ef53c-449">Se o problema for persistente e não for causado por atingir os limites de escalabilidade do serviço, acione um problema de suporte.</span><span class="sxs-lookup"><span data-stu-id="ef53c-449">If the problem is persistent and is not caused by your application hitting the scalability limits of the service, you should raise a support issue.</span></span> <span data-ttu-id="ef53c-450">Para os tempos limites do cliente, você deve decidir se os tempos limites estão definidos com um valor apropriado no cliente e alterar o valor definido para o tempo limite no cliente ou investigar como você pode melhorar o desempenho das operações no serviço de armazenamento, por exemplo, otimizando suas consultas de tabela ou reduzindo o tamanho de suas mensagens.</span><span class="sxs-lookup"><span data-stu-id="ef53c-450">For client timeouts, you must decide if the timeout is set to an appropriate value in the client and either change the timeout value set in the client or investigate how you can improve the performance of the operations in the storage service, for example by optimizing your table queries or reducing the size of your messages.</span></span>

### <span data-ttu-id="ef53c-451"><a name="metrics-show-an-increase-in-PercentNetworkError"></a>As métricas mostram um aumento em PercentNetworkError</span><span class="sxs-lookup"><span data-stu-id="ef53c-451"><a name="metrics-show-an-increase-in-PercentNetworkError"></a>Metrics show an increase in PercentNetworkError</span></span>
<span data-ttu-id="ef53c-452">Suas métricas mostram um aumento em **PercentNetworkError** para um dos seus serviços de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="ef53c-452">Your metrics show an increase in **PercentNetworkError** for one of your storage services.</span></span> <span data-ttu-id="ef53c-453">A métrica **PercentNetworkError** é uma agregação das seguintes métricas: **NetworkError**, **AnonymousNetworkError** e **SASNetworkError**.</span><span class="sxs-lookup"><span data-stu-id="ef53c-453">The **PercentNetworkError** metric is an aggregation of the following metrics: **NetworkError**, **AnonymousNetworkError**, and **SASNetworkError**.</span></span> <span data-ttu-id="ef53c-454">Eles ocorrem quando o serviço de armazenamento detecta um erro de rede quando o cliente faz uma solicitação de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="ef53c-454">These occur when the storage service detects a network error when the client makes a storage request.</span></span>

<span data-ttu-id="ef53c-455">A causa mais comum desse erro é um cliente desconectando antes do tempo limite expirar no serviço de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="ef53c-455">The most common cause of this error is a client disconnecting before a timeout expires in the storage service.</span></span> <span data-ttu-id="ef53c-456">Investigue o código no seu cliente para entender porque e quando o cliente desconecta do serviço de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="ef53c-456">You should investigate the code in your client to understand why and when the client disconnects from the storage service.</span></span> <span data-ttu-id="ef53c-457">Você também pode usar o Wireshark, o Microsoft Mensagem Analyzer ou o Tcping para investigar os problemas de conectividade de rede do cliente.</span><span class="sxs-lookup"><span data-stu-id="ef53c-457">You can also use Wireshark, Microsoft Message Analyzer, or Tcping to investigate network connectivity issues from the client.</span></span> <span data-ttu-id="ef53c-458">Essas ferramentas estão descritas nos [Anexos].</span><span class="sxs-lookup"><span data-stu-id="ef53c-458">These tools are described in the [Appendices].</span></span>

### <span data-ttu-id="ef53c-459"><a name="the-client-is-receiving-403-messages"></a>O cliente está recebendo mensagens HTTP 403 (Proibido)</span><span class="sxs-lookup"><span data-stu-id="ef53c-459"><a name="the-client-is-receiving-403-messages"></a>The client is receiving HTTP 403 (Forbidden) messages</span></span>
<span data-ttu-id="ef53c-460">Se o seu aplicativo do cliente está emitindo erros HTTP 403 (Proibido), uma possível causa é que o cliente esteja usando uma assinatura de acesso compartilhado (SAS) expirada quando envia uma solicitação de armazenamento (embora outras causas possíveis incluem distorção de relógio, chaves inválidas e cabeçalhos vazios).</span><span class="sxs-lookup"><span data-stu-id="ef53c-460">If your client application is throwing HTTP 403 (Forbidden) errors, a likely cause is that the client is using an expired Shared Access Signature (SAS) when it sends a storage request (although other possible causes include clock skew, invalid keys, and empty headers).</span></span> <span data-ttu-id="ef53c-461">Se uma chave SAS expirada for a causa, você não verá nenhuma entrada nos dados de registro de log de armazenamento do lado do servidor.</span><span class="sxs-lookup"><span data-stu-id="ef53c-461">If an expired SAS key is the cause, you will not see any entries in the server-side Storage Logging log data.</span></span> <span data-ttu-id="ef53c-462">A tabela a seguir mostra um exemplo de log do lado do cliente gerado pela biblioteca do cliente de armazenamento que ilustra esse problema acontecendo:</span><span class="sxs-lookup"><span data-stu-id="ef53c-462">The following table shows a sample from the client-side log generated by the Storage Client Library that illustrates this issue occurring:</span></span>

| <span data-ttu-id="ef53c-463">Fonte</span><span class="sxs-lookup"><span data-stu-id="ef53c-463">Source</span></span> | <span data-ttu-id="ef53c-464">Detalhamento</span><span class="sxs-lookup"><span data-stu-id="ef53c-464">Verbosity</span></span> | <span data-ttu-id="ef53c-465">Detalhamento</span><span class="sxs-lookup"><span data-stu-id="ef53c-465">Verbosity</span></span> | <span data-ttu-id="ef53c-466">ID de solicitação do cliente</span><span class="sxs-lookup"><span data-stu-id="ef53c-466">Client request id</span></span> | <span data-ttu-id="ef53c-467">Texto de operação</span><span class="sxs-lookup"><span data-stu-id="ef53c-467">Operation text</span></span> |
| --- | --- | --- | --- | --- |
| <span data-ttu-id="ef53c-468">Microsoft.WindowsAzure.Storage</span><span class="sxs-lookup"><span data-stu-id="ef53c-468">Microsoft.WindowsAzure.Storage</span></span> |<span data-ttu-id="ef53c-469">Informações</span><span class="sxs-lookup"><span data-stu-id="ef53c-469">Information</span></span> |<span data-ttu-id="ef53c-470">3</span><span class="sxs-lookup"><span data-stu-id="ef53c-470">3</span></span> |<span data-ttu-id="ef53c-471">85d077ab-…</span><span class="sxs-lookup"><span data-stu-id="ef53c-471">85d077ab-…</span></span> |<span data-ttu-id="ef53c-472">Inicialização da operação com o local principal por modo de local PrimaryOnly.</span><span class="sxs-lookup"><span data-stu-id="ef53c-472">Starting operation with location Primary per location mode PrimaryOnly.</span></span> |
| <span data-ttu-id="ef53c-473">Microsoft.WindowsAzure.Storage</span><span class="sxs-lookup"><span data-stu-id="ef53c-473">Microsoft.WindowsAzure.Storage</span></span> |<span data-ttu-id="ef53c-474">Informações</span><span class="sxs-lookup"><span data-stu-id="ef53c-474">Information</span></span> |<span data-ttu-id="ef53c-475">3</span><span class="sxs-lookup"><span data-stu-id="ef53c-475">3</span></span> |<span data-ttu-id="ef53c-476">85d077ab -…</span><span class="sxs-lookup"><span data-stu-id="ef53c-476">85d077ab -…</span></span> |<span data-ttu-id="ef53c-477">Iniciando a solicitação síncrona para https://domemaildist.blob.core.windows.netazureimblobcontainer/blobCreatedViaSAS.txt?sv=2014-02-14&amp;sr=c&amp;si=mypolicy&amp;sig=OFnd4Rd7z01fIvh%2BmcR6zbudIH2F5Ikm%2FyhNYZEmJNQ%3D&amp;api-version=2014-02-14.</span><span class="sxs-lookup"><span data-stu-id="ef53c-477">Starting synchronous request to https://domemaildist.blob.core.windows.netazureimblobcontainer/blobCreatedViaSAS.txt?sv=2014-02-14&amp;sr=c&amp;si=mypolicy&amp;sig=OFnd4Rd7z01fIvh%2BmcR6zbudIH2F5Ikm%2FyhNYZEmJNQ%3D&amp;api-version=2014-02-14.</span></span> |
| <span data-ttu-id="ef53c-478">Microsoft.WindowsAzure.Storage</span><span class="sxs-lookup"><span data-stu-id="ef53c-478">Microsoft.WindowsAzure.Storage</span></span> |<span data-ttu-id="ef53c-479">Informações</span><span class="sxs-lookup"><span data-stu-id="ef53c-479">Information</span></span> |<span data-ttu-id="ef53c-480">3</span><span class="sxs-lookup"><span data-stu-id="ef53c-480">3</span></span> |<span data-ttu-id="ef53c-481">85d077ab -…</span><span class="sxs-lookup"><span data-stu-id="ef53c-481">85d077ab -…</span></span> |<span data-ttu-id="ef53c-482">Esperando uma resposta.</span><span class="sxs-lookup"><span data-stu-id="ef53c-482">Waiting for response.</span></span> |
| <span data-ttu-id="ef53c-483">Microsoft.WindowsAzure.Storage</span><span class="sxs-lookup"><span data-stu-id="ef53c-483">Microsoft.WindowsAzure.Storage</span></span> |<span data-ttu-id="ef53c-484">Aviso</span><span class="sxs-lookup"><span data-stu-id="ef53c-484">Warning</span></span> |<span data-ttu-id="ef53c-485">2</span><span class="sxs-lookup"><span data-stu-id="ef53c-485">2</span></span> |<span data-ttu-id="ef53c-486">85d077ab -…</span><span class="sxs-lookup"><span data-stu-id="ef53c-486">85d077ab -…</span></span> |<span data-ttu-id="ef53c-487">Exceção acionada enquanto aguarda a resposta: O servidor remoto retornou um erro: (403) Proibido.</span><span class="sxs-lookup"><span data-stu-id="ef53c-487">Exception thrown while waiting for response: The remote server returned an error: (403) Forbidden..</span></span> |
| <span data-ttu-id="ef53c-488">Microsoft.WindowsAzure.Storage</span><span class="sxs-lookup"><span data-stu-id="ef53c-488">Microsoft.WindowsAzure.Storage</span></span> |<span data-ttu-id="ef53c-489">Informações</span><span class="sxs-lookup"><span data-stu-id="ef53c-489">Information</span></span> |<span data-ttu-id="ef53c-490">3</span><span class="sxs-lookup"><span data-stu-id="ef53c-490">3</span></span> |<span data-ttu-id="ef53c-491">85d077ab -…</span><span class="sxs-lookup"><span data-stu-id="ef53c-491">85d077ab -…</span></span> |<span data-ttu-id="ef53c-492">Resposta recebida.</span><span class="sxs-lookup"><span data-stu-id="ef53c-492">Response received.</span></span> <span data-ttu-id="ef53c-493">Status code = 403, Request ID = 9d67c64a-64ed-4b0d-9515-3b14bbcdc63d, Content-MD5 = , ETag = .</span><span class="sxs-lookup"><span data-stu-id="ef53c-493">Status code = 403, Request ID = 9d67c64a-64ed-4b0d-9515-3b14bbcdc63d, Content-MD5 = , ETag = .</span></span> |
| <span data-ttu-id="ef53c-494">Microsoft.WindowsAzure.Storage</span><span class="sxs-lookup"><span data-stu-id="ef53c-494">Microsoft.WindowsAzure.Storage</span></span> |<span data-ttu-id="ef53c-495">Aviso</span><span class="sxs-lookup"><span data-stu-id="ef53c-495">Warning</span></span> |<span data-ttu-id="ef53c-496">2</span><span class="sxs-lookup"><span data-stu-id="ef53c-496">2</span></span> |<span data-ttu-id="ef53c-497">85d077ab -…</span><span class="sxs-lookup"><span data-stu-id="ef53c-497">85d077ab -…</span></span> |<span data-ttu-id="ef53c-498">Exceção emitida durante a operação: O servidor remoto retornou um erro: (403) Proibido.</span><span class="sxs-lookup"><span data-stu-id="ef53c-498">Exception thrown during the operation: The remote server returned an error: (403) Forbidden..</span></span> |
| <span data-ttu-id="ef53c-499">Microsoft.WindowsAzure.Storage</span><span class="sxs-lookup"><span data-stu-id="ef53c-499">Microsoft.WindowsAzure.Storage</span></span> |<span data-ttu-id="ef53c-500">Informações</span><span class="sxs-lookup"><span data-stu-id="ef53c-500">Information</span></span> |<span data-ttu-id="ef53c-501">3</span><span class="sxs-lookup"><span data-stu-id="ef53c-501">3</span></span> |<span data-ttu-id="ef53c-502">85d077ab -…</span><span class="sxs-lookup"><span data-stu-id="ef53c-502">85d077ab -…</span></span> |<span data-ttu-id="ef53c-503">Verificando se a operação deve ser repetida.</span><span class="sxs-lookup"><span data-stu-id="ef53c-503">Checking if the operation should be retried.</span></span> <span data-ttu-id="ef53c-504">Contagem de repetição = 0, Código de status HTTP = 403, Exceção = O servidor remoto retornou um erro: (403) Proibido.</span><span class="sxs-lookup"><span data-stu-id="ef53c-504">Retry count = 0, HTTP status code = 403, Exception = The remote server returned an error: (403) Forbidden..</span></span> |
| <span data-ttu-id="ef53c-505">Microsoft.WindowsAzure.Storage</span><span class="sxs-lookup"><span data-stu-id="ef53c-505">Microsoft.WindowsAzure.Storage</span></span> |<span data-ttu-id="ef53c-506">Informações</span><span class="sxs-lookup"><span data-stu-id="ef53c-506">Information</span></span> |<span data-ttu-id="ef53c-507">3</span><span class="sxs-lookup"><span data-stu-id="ef53c-507">3</span></span> |<span data-ttu-id="ef53c-508">85d077ab -…</span><span class="sxs-lookup"><span data-stu-id="ef53c-508">85d077ab -…</span></span> |<span data-ttu-id="ef53c-509">O próximo local deve ser definido como principal, com base no modo de local.</span><span class="sxs-lookup"><span data-stu-id="ef53c-509">The next location has been set to Primary, based on the location mode.</span></span> |
| <span data-ttu-id="ef53c-510">Microsoft.WindowsAzure.Storage</span><span class="sxs-lookup"><span data-stu-id="ef53c-510">Microsoft.WindowsAzure.Storage</span></span> |<span data-ttu-id="ef53c-511">Erro</span><span class="sxs-lookup"><span data-stu-id="ef53c-511">Error</span></span> |<span data-ttu-id="ef53c-512">1</span><span class="sxs-lookup"><span data-stu-id="ef53c-512">1</span></span> |<span data-ttu-id="ef53c-513">85d077ab -…</span><span class="sxs-lookup"><span data-stu-id="ef53c-513">85d077ab -…</span></span> |<span data-ttu-id="ef53c-514">A política de repetição não permitiu uma nova tentativa.</span><span class="sxs-lookup"><span data-stu-id="ef53c-514">Retry policy did not allow for a retry.</span></span> <span data-ttu-id="ef53c-515">Falha com O servidor remoto retornou um erro: (403) Proibido.</span><span class="sxs-lookup"><span data-stu-id="ef53c-515">Failing with The remote server returned an error: (403) Forbidden.</span></span> |

<span data-ttu-id="ef53c-516">Nesse cenário, você deve investigar porque o token de SAS está expirando antes do cliente enviar o token para o servidor:</span><span class="sxs-lookup"><span data-stu-id="ef53c-516">In this scenario, you should investigate why the SAS token is expiring before the client sends the token to the server:</span></span>

* <span data-ttu-id="ef53c-517">Normalmente, você não deveria definir um tempo de início quando você cria uma SAS para um cliente para usar imediatamente.</span><span class="sxs-lookup"><span data-stu-id="ef53c-517">Typically, you should not set a start time when you create a SAS for a client to use immediately.</span></span> <span data-ttu-id="ef53c-518">Se houver pequenas diferenças entre os relógios do hospedeiro que gera o SAS usando o horário atual e o serviço de armazenamento, então é possível que o serviço de armazenamento receba uma SAS que não seja válida.</span><span class="sxs-lookup"><span data-stu-id="ef53c-518">If there are small clock differences between the host generating the SAS using the current time and the storage service, then it is possible for the storage service to receive a SAS that is not yet valid.</span></span>
* <span data-ttu-id="ef53c-519">Não defina um tempo de expiração muito curto na SAS.</span><span class="sxs-lookup"><span data-stu-id="ef53c-519">You should not set a very short expiry time on a SAS.</span></span> <span data-ttu-id="ef53c-520">Novamente, pequenas diferenças entre os relógios do hospedeiro gerando a SAS e o serviço de armazenamento pode levar a uma SAS aparentemente expirando mais cedo do que esperado.</span><span class="sxs-lookup"><span data-stu-id="ef53c-520">Again, small clock differences between the host generating the SAS and the storage service can lead to a SAS apparently expiring earlier than anticipated.</span></span>
* <span data-ttu-id="ef53c-521">Os parâmetros da versão na chave SAS (por exemplo **sv=2015-04-05**) correspondem à versão da Biblioteca do Cliente de Armazenamento usada?</span><span class="sxs-lookup"><span data-stu-id="ef53c-521">Does the version parameter in the SAS key (for example **sv=2015-04-05**) match the version of the Storage Client Library you are using?</span></span> <span data-ttu-id="ef53c-522">Recomendamos usar sempre a versão mais recente da [Biblioteca de Cliente de Armazenamento](https://www.nuget.org/packages/WindowsAzure.Storage/).</span><span class="sxs-lookup"><span data-stu-id="ef53c-522">We recommend that you always use the latest version of the [Storage Client Library](https://www.nuget.org/packages/WindowsAzure.Storage/).</span></span>
* <span data-ttu-id="ef53c-523">Se você gerar suas chaves de acesso de armazenamento, isso pode invalidar quaisquer tokens de SAS existentes.</span><span class="sxs-lookup"><span data-stu-id="ef53c-523">If you regenerate your storage access keys, this can invalidate any existing SAS tokens.</span></span> <span data-ttu-id="ef53c-524">Isso pode ser um problema se você token de SAS com um tempo de expiração longo para aplicativos de cliente para o cache.</span><span class="sxs-lookup"><span data-stu-id="ef53c-524">This may be an issue if you generate SAS tokens with a long expiry time for client applications to cache.</span></span>

<span data-ttu-id="ef53c-525">Se você estiver usando a biblioteca do cliente de armazenamento para gerar tokens de SAS, então será fácil compilar um token válido.</span><span class="sxs-lookup"><span data-stu-id="ef53c-525">If you are using the Storage Client Library to generate SAS tokens, then it is easy to build a valid token.</span></span> <span data-ttu-id="ef53c-526">Entretanto, se você estiver usando a API REST de Armazenamento e compilando tokens de SAS manualmente, leia cuidadosamente o tópico [Delegando acesso com uma assinatura de acesso compartilhado](http://msdn.microsoft.com/library/azure/ee395415.aspx).</span><span class="sxs-lookup"><span data-stu-id="ef53c-526">However, if you are using the Storage REST API and constructing the SAS tokens by hand you should carefully read the topic [Delegating Access with a Shared Access Signature](http://msdn.microsoft.com/library/azure/ee395415.aspx).</span></span>

### <span data-ttu-id="ef53c-527"><a name="the-client-is-receiving-404-messages"></a>O cliente está recebendo mensagens HTTP 404 (Não encontrado)</span><span class="sxs-lookup"><span data-stu-id="ef53c-527"><a name="the-client-is-receiving-404-messages"></a>The client is receiving HTTP 404 (Not found) messages</span></span>
<span data-ttu-id="ef53c-528">Se o aplicativo do cliente recebe uma mensagem HTTP 404 (Não encontrado) do ser, isso implica que o objeto do cliente estava tentando usar (tais como: uma entidade, tabela, blob, contêiner ou fila) não existe no serviço de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="ef53c-528">If the client application receives an HTTP 404 (Not found) message from the server, this implies that the object the client was attempting to use (such as an entity, table, blob, container, or queue) does not exist in the storage service.</span></span> <span data-ttu-id="ef53c-529">Existem muitas razões para isso, tais como:</span><span class="sxs-lookup"><span data-stu-id="ef53c-529">There are a number of possible reasons for this, such as:</span></span>

* <span data-ttu-id="ef53c-530">[O cliente ou outro processo excluiu anteriormente o objeto]</span><span class="sxs-lookup"><span data-stu-id="ef53c-530">[The client or another process previously deleted the object]</span></span>
* <span data-ttu-id="ef53c-531">[Um problema de autorização de assinatura de acesso compartilhado (SAS)]</span><span class="sxs-lookup"><span data-stu-id="ef53c-531">[A Shared Access Signature (SAS) authorization issue]</span></span>
* <span data-ttu-id="ef53c-532">[O código JavaScript do lado do cliente não tem permissão para acessar o objeto]</span><span class="sxs-lookup"><span data-stu-id="ef53c-532">[Client-side JavaScript code does not have permission to access the object]</span></span>
* <span data-ttu-id="ef53c-533">[Falha de rede]</span><span class="sxs-lookup"><span data-stu-id="ef53c-533">[Network failure]</span></span>

#### <span data-ttu-id="ef53c-534"><a name="client-previously-deleted-the-object"></a>O cliente ou outro processo excluiu anteriormente o objeto</span><span class="sxs-lookup"><span data-stu-id="ef53c-534"><a name="client-previously-deleted-the-object"></a>The client or another process previously deleted the object</span></span>
<span data-ttu-id="ef53c-535">Em cenários onde o cliente está tentando ler, atualizar ou excluir dados em um serviço de armazenamento é, normalmente, fácil de se identificar nos logs do lado do servidor uma operação anterior que excluiu o objeto em questão de um serviço de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="ef53c-535">In scenarios where the client is attempting to read, update, or delete data in a storage service it is usually easy to identify in the server-side logs a previous operation that deleted the object in question from the storage service.</span></span> <span data-ttu-id="ef53c-536">Frequentemente, os dados de log mostram que um outro usuário ou processo excluiu o objeto.</span><span class="sxs-lookup"><span data-stu-id="ef53c-536">Very often, the log data shows that another user or process deleted the object.</span></span> <span data-ttu-id="ef53c-537">No registro de log de armazenamento no lado do servidor, as colunas do tipo de operação e de chave de objeto solicitado mostram quando um cliente excluiu um objeto.</span><span class="sxs-lookup"><span data-stu-id="ef53c-537">In the server-side Storage Logging log, the operation-type and requested-object-key columns show when a client deleted an object.</span></span>

<span data-ttu-id="ef53c-538">No cenário onde um cliente está tentando inserir um objeto, pode não ser imediatamente óbvio porque isso resulta em uma resposta HTTP 404 (Não encontrado) dado que o cliente está criando um novo objeto.</span><span class="sxs-lookup"><span data-stu-id="ef53c-538">In the scenario where a client is attempting to insert an object, it may not be immediately obvious why this results in an HTTP 404 (Not found) response given that the client is creating a new object.</span></span> <span data-ttu-id="ef53c-539">Entretanto, se o cliente estiver criando um blob, é possível achar o contêiner do blob, se o cliente estiver criando uma mensagem, é possível encontrar a fila e se o cliente estiver adicionando uma coluna é possível encontrar uma tabela.</span><span class="sxs-lookup"><span data-stu-id="ef53c-539">However, if the client is creating a blob it must be able to find the blob container, if the client is creating a message it must be able to find a queue, and if the client is adding a row it must be able to find the table.</span></span>

<span data-ttu-id="ef53c-540">Você pode usar o log do lado do cliente a partir da biblioteca do cliente de armazenamento para obter uma compreensão mais detalhada de quando o cliente envia solicitações específicas para o serviço de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="ef53c-540">You can use the client-side log from the Storage Client Library to gain a more detailed understanding of when the client sends specific requests to the storage service.</span></span>

<span data-ttu-id="ef53c-541">O seguinte log do lado do cliente gerado pela biblioteca do cliente de armazenamento ilustra o problema quando o cliente não pode encontrar o contêiner para o blob que está criando.</span><span class="sxs-lookup"><span data-stu-id="ef53c-541">The following client-side log generated by the Storage Client library illustrates the problem when the client cannot find the container for the blob it is creating.</span></span> <span data-ttu-id="ef53c-542">Esse log inclui detalhes das seguintes operações de armazenamento:</span><span class="sxs-lookup"><span data-stu-id="ef53c-542">This log includes details of the following storage operations:</span></span>

| <span data-ttu-id="ef53c-543">ID de solicitação</span><span class="sxs-lookup"><span data-stu-id="ef53c-543">Request ID</span></span> | <span data-ttu-id="ef53c-544">Operação</span><span class="sxs-lookup"><span data-stu-id="ef53c-544">Operation</span></span> |
| --- | --- |
| <span data-ttu-id="ef53c-545">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="ef53c-545">07b26a5d-...</span></span> |<span data-ttu-id="ef53c-546">**DeleteIfExists** para excluir o contêiner do blob.</span><span class="sxs-lookup"><span data-stu-id="ef53c-546">**DeleteIfExists** method to delete the blob container.</span></span> <span data-ttu-id="ef53c-547">Observe que essa operação inclui uma solicitação **HEAD** para verificar a existência do contêiner.</span><span class="sxs-lookup"><span data-stu-id="ef53c-547">Note that this operation includes a **HEAD** request to check for the existence of the container.</span></span> |
| <span data-ttu-id="ef53c-548">e2d06d78…</span><span class="sxs-lookup"><span data-stu-id="ef53c-548">e2d06d78…</span></span> |<span data-ttu-id="ef53c-549">**CreateIfNotExists** para criar o contêiner do blob.</span><span class="sxs-lookup"><span data-stu-id="ef53c-549">**CreateIfNotExists** method to create the blob container.</span></span> <span data-ttu-id="ef53c-550">Observe que essa operação inclui uma solicitação **HEAD** que verifica a existência do contêiner.</span><span class="sxs-lookup"><span data-stu-id="ef53c-550">Note that this operation includes a **HEAD** request that checks for the existence of the container.</span></span> <span data-ttu-id="ef53c-551">**HEAD** retorna uma mensagem 404, porém continua.</span><span class="sxs-lookup"><span data-stu-id="ef53c-551">The **HEAD** returns a 404 message but continues.</span></span> |
| <span data-ttu-id="ef53c-552">de8b1c3c-...</span><span class="sxs-lookup"><span data-stu-id="ef53c-552">de8b1c3c-...</span></span> |<span data-ttu-id="ef53c-553">**UploadFromStream** para criar um blob.</span><span class="sxs-lookup"><span data-stu-id="ef53c-553">**UploadFromStream** method to create the blob.</span></span> <span data-ttu-id="ef53c-554">A solicitação **PUT** falha com uma mensagem 404</span><span class="sxs-lookup"><span data-stu-id="ef53c-554">The **PUT** request fails with a 404 message</span></span> |

<span data-ttu-id="ef53c-555">Entradas de log:</span><span class="sxs-lookup"><span data-stu-id="ef53c-555">Log entries:</span></span>

| <span data-ttu-id="ef53c-556">ID de solicitação</span><span class="sxs-lookup"><span data-stu-id="ef53c-556">Request ID</span></span> | <span data-ttu-id="ef53c-557">Texto de operação</span><span class="sxs-lookup"><span data-stu-id="ef53c-557">Operation Text</span></span> |
| --- | --- |
| <span data-ttu-id="ef53c-558">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="ef53c-558">07b26a5d-...</span></span> |<span data-ttu-id="ef53c-559">Inicialização de solicitação síncrona para https://domemaildist.blob.core.windows.net/azuremmblobcontainer.</span><span class="sxs-lookup"><span data-stu-id="ef53c-559">Starting synchronous request to https://domemaildist.blob.core.windows.net/azuremmblobcontainer.</span></span> |
| <span data-ttu-id="ef53c-560">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="ef53c-560">07b26a5d-...</span></span> |<span data-ttu-id="ef53c-561">StringToSign = HEAD............x-ms-client-request-id:07b26a5d-....x-ms-date:Tue, 03 Jun 2014 10:33:11 GMT.x-ms-version:2014-02-14./domemaildist/azuremmblobcontainer.restype:container.</span><span class="sxs-lookup"><span data-stu-id="ef53c-561">StringToSign = HEAD............x-ms-client-request-id:07b26a5d-....x-ms-date:Tue, 03 Jun 2014 10:33:11 GMT.x-ms-version:2014-02-14./domemaildist/azuremmblobcontainer.restype:container.</span></span> |
| <span data-ttu-id="ef53c-562">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="ef53c-562">07b26a5d-...</span></span> |<span data-ttu-id="ef53c-563">Esperando uma resposta.</span><span class="sxs-lookup"><span data-stu-id="ef53c-563">Waiting for response.</span></span> |
| <span data-ttu-id="ef53c-564">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="ef53c-564">07b26a5d-...</span></span> |<span data-ttu-id="ef53c-565">Resposta recebida.</span><span class="sxs-lookup"><span data-stu-id="ef53c-565">Response received.</span></span> <span data-ttu-id="ef53c-566">Status code = 200, Request ID = eeead849-...Content-MD5 = , ETag =    &quot;0x8D14D2DC63D059B&quot;.</span><span class="sxs-lookup"><span data-stu-id="ef53c-566">Status code = 200, Request ID = eeead849-...Content-MD5 = , ETag =    &quot;0x8D14D2DC63D059B&quot;.</span></span> |
| <span data-ttu-id="ef53c-567">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="ef53c-567">07b26a5d-...</span></span> |<span data-ttu-id="ef53c-568">Cabeçalhos da resposta foram processados com êxito, procedendo com o resto da operação.</span><span class="sxs-lookup"><span data-stu-id="ef53c-568">Response headers were processed successfully, proceeding with the rest of the operation.</span></span> |
| <span data-ttu-id="ef53c-569">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="ef53c-569">07b26a5d-...</span></span> |<span data-ttu-id="ef53c-570">Baixar o corpo da resposta.</span><span class="sxs-lookup"><span data-stu-id="ef53c-570">Downloading response body.</span></span> |
| <span data-ttu-id="ef53c-571">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="ef53c-571">07b26a5d-...</span></span> |<span data-ttu-id="ef53c-572">Operação concluída com sucesso.</span><span class="sxs-lookup"><span data-stu-id="ef53c-572">Operation completed successfully.</span></span> |
| <span data-ttu-id="ef53c-573">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="ef53c-573">07b26a5d-...</span></span> |<span data-ttu-id="ef53c-574">Inicialização de solicitação síncrona para https://domemaildist.blob.core.windows.net/azuremmblobcontainer.</span><span class="sxs-lookup"><span data-stu-id="ef53c-574">Starting synchronous request to https://domemaildist.blob.core.windows.net/azuremmblobcontainer.</span></span> |
| <span data-ttu-id="ef53c-575">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="ef53c-575">07b26a5d-...</span></span> |<span data-ttu-id="ef53c-576">StringToSign = DELETE............x-ms-client-request-id:07b26a5d-....x-ms-date:Tue, 03 Jun 2014 10:33:12    GMT.x-ms-version:2014-02-14./domemaildist/azuremmblobcontainer.restype:container.</span><span class="sxs-lookup"><span data-stu-id="ef53c-576">StringToSign = DELETE............x-ms-client-request-id:07b26a5d-....x-ms-date:Tue, 03 Jun 2014 10:33:12    GMT.x-ms-version:2014-02-14./domemaildist/azuremmblobcontainer.restype:container.</span></span> |
| <span data-ttu-id="ef53c-577">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="ef53c-577">07b26a5d-...</span></span> |<span data-ttu-id="ef53c-578">Esperando uma resposta.</span><span class="sxs-lookup"><span data-stu-id="ef53c-578">Waiting for response.</span></span> |
| <span data-ttu-id="ef53c-579">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="ef53c-579">07b26a5d-...</span></span> |<span data-ttu-id="ef53c-580">Resposta recebida.</span><span class="sxs-lookup"><span data-stu-id="ef53c-580">Response received.</span></span> <span data-ttu-id="ef53c-581">Status code = 202, Request ID = 6ab2a4cf-..., Content-MD5 = , ETag = .</span><span class="sxs-lookup"><span data-stu-id="ef53c-581">Status code = 202, Request ID = 6ab2a4cf-..., Content-MD5 = , ETag = .</span></span> |
| <span data-ttu-id="ef53c-582">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="ef53c-582">07b26a5d-...</span></span> |<span data-ttu-id="ef53c-583">Cabeçalhos da resposta foram processados com êxito, procedendo com o resto da operação.</span><span class="sxs-lookup"><span data-stu-id="ef53c-583">Response headers were processed successfully, proceeding with the rest of the operation.</span></span> |
| <span data-ttu-id="ef53c-584">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="ef53c-584">07b26a5d-...</span></span> |<span data-ttu-id="ef53c-585">Baixar o corpo da resposta.</span><span class="sxs-lookup"><span data-stu-id="ef53c-585">Downloading response body.</span></span> |
| <span data-ttu-id="ef53c-586">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="ef53c-586">07b26a5d-...</span></span> |<span data-ttu-id="ef53c-587">Operação concluída com sucesso.</span><span class="sxs-lookup"><span data-stu-id="ef53c-587">Operation completed successfully.</span></span> |
| <span data-ttu-id="ef53c-588">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="ef53c-588">e2d06d78-...</span></span> |<span data-ttu-id="ef53c-589">Inicialização de solicitação assíncrona para https://domemaildist.blob.core.windows.net/azuremmblobcontainer.</span><span class="sxs-lookup"><span data-stu-id="ef53c-589">Starting asynchronous request to https://domemaildist.blob.core.windows.net/azuremmblobcontainer.</span></span></td> |
| <span data-ttu-id="ef53c-590">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="ef53c-590">e2d06d78-...</span></span> |<span data-ttu-id="ef53c-591">StringToSign = HEAD............x-ms-client-request-id:e2d06d78-....x-ms-date:Tue, 03 Jun 2014 10:33:12 GMT.x-ms-version:2014-02-14./domemaildist/azuremmblobcontainer.restype:container.</span><span class="sxs-lookup"><span data-stu-id="ef53c-591">StringToSign = HEAD............x-ms-client-request-id:e2d06d78-....x-ms-date:Tue, 03 Jun 2014 10:33:12 GMT.x-ms-version:2014-02-14./domemaildist/azuremmblobcontainer.restype:container.</span></span> |
| <span data-ttu-id="ef53c-592">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="ef53c-592">e2d06d78-...</span></span> |<span data-ttu-id="ef53c-593">Esperando uma resposta.</span><span class="sxs-lookup"><span data-stu-id="ef53c-593">Waiting for response.</span></span> |
| <span data-ttu-id="ef53c-594">de8b1c3c-...</span><span class="sxs-lookup"><span data-stu-id="ef53c-594">de8b1c3c-...</span></span> |<span data-ttu-id="ef53c-595">Inicialização de solicitação síncrona para https://domemaildist.blob.core.windows.net/azuremmblobcontainer/blobCreated.txt.</span><span class="sxs-lookup"><span data-stu-id="ef53c-595">Starting synchronous request to https://domemaildist.blob.core.windows.net/azuremmblobcontainer/blobCreated.txt.</span></span> |
| <span data-ttu-id="ef53c-596">de8b1c3c-...</span><span class="sxs-lookup"><span data-stu-id="ef53c-596">de8b1c3c-...</span></span> |<span data-ttu-id="ef53c-597">StringToSign = PUT...64.qCmF+TQLPhq/YYK50mP9ZQ==........x-ms-blob-type:BlockBlob.x-ms-client-request-id:de8b1c3c-....x-ms-date:Tue, 03 Jun 2014 10:33:12 GMT.x-ms-version:2014-02-14./domemaildist/azuremmblobcontainer/blobCreated.txt.</span><span class="sxs-lookup"><span data-stu-id="ef53c-597">StringToSign = PUT...64.qCmF+TQLPhq/YYK50mP9ZQ==........x-ms-blob-type:BlockBlob.x-ms-client-request-id:de8b1c3c-....x-ms-date:Tue, 03 Jun 2014 10:33:12 GMT.x-ms-version:2014-02-14./domemaildist/azuremmblobcontainer/blobCreated.txt.</span></span> |
| <span data-ttu-id="ef53c-598">de8b1c3c-...</span><span class="sxs-lookup"><span data-stu-id="ef53c-598">de8b1c3c-...</span></span> |<span data-ttu-id="ef53c-599">Preparação para gravar os dados solicitados.</span><span class="sxs-lookup"><span data-stu-id="ef53c-599">Preparing to write request data.</span></span> |
| <span data-ttu-id="ef53c-600">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="ef53c-600">e2d06d78-...</span></span> |<span data-ttu-id="ef53c-601">Exceção acionada enquanto aguarda a resposta: O servidor remoto retornou um erro: (404) Não encontrado.</span><span class="sxs-lookup"><span data-stu-id="ef53c-601">Exception thrown while waiting for response: The remote server returned an error: (404) Not Found..</span></span> |
| <span data-ttu-id="ef53c-602">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="ef53c-602">e2d06d78-...</span></span> |<span data-ttu-id="ef53c-603">Resposta recebida.</span><span class="sxs-lookup"><span data-stu-id="ef53c-603">Response received.</span></span> <span data-ttu-id="ef53c-604">Status code = 404, Request ID = 353ae3bc-..., Content-MD5 = , ETag = .</span><span class="sxs-lookup"><span data-stu-id="ef53c-604">Status code = 404, Request ID = 353ae3bc-..., Content-MD5 = , ETag = .</span></span> |
| <span data-ttu-id="ef53c-605">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="ef53c-605">e2d06d78-...</span></span> |<span data-ttu-id="ef53c-606">Cabeçalhos da resposta foram processados com êxito, procedendo com o resto da operação.</span><span class="sxs-lookup"><span data-stu-id="ef53c-606">Response headers were processed successfully, proceeding with the rest of the operation.</span></span> |
| <span data-ttu-id="ef53c-607">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="ef53c-607">e2d06d78-...</span></span> |<span data-ttu-id="ef53c-608">Baixar o corpo da resposta.</span><span class="sxs-lookup"><span data-stu-id="ef53c-608">Downloading response body.</span></span> |
| <span data-ttu-id="ef53c-609">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="ef53c-609">e2d06d78-...</span></span> |<span data-ttu-id="ef53c-610">Operação concluída com sucesso.</span><span class="sxs-lookup"><span data-stu-id="ef53c-610">Operation completed successfully.</span></span> |
| <span data-ttu-id="ef53c-611">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="ef53c-611">e2d06d78-...</span></span> |<span data-ttu-id="ef53c-612">Inicialização de solicitação assíncrona para https://domemaildist.blob.core.windows.net/azuremmblobcontainer.</span><span class="sxs-lookup"><span data-stu-id="ef53c-612">Starting asynchronous request to https://domemaildist.blob.core.windows.net/azuremmblobcontainer.</span></span> |
| <span data-ttu-id="ef53c-613">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="ef53c-613">e2d06d78-...</span></span> |<span data-ttu-id="ef53c-614">StringToSign = PUT...0.........x-ms-client-request-id:e2d06d78-....x-ms-date:Tue, 03 Jun 2014 10:33:12 GMT.x-ms-version:2014-02-14./domemaildist/azuremmblobcontainer.restype:container.</span><span class="sxs-lookup"><span data-stu-id="ef53c-614">StringToSign = PUT...0.........x-ms-client-request-id:e2d06d78-....x-ms-date:Tue, 03 Jun 2014 10:33:12 GMT.x-ms-version:2014-02-14./domemaildist/azuremmblobcontainer.restype:container.</span></span> |
| <span data-ttu-id="ef53c-615">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="ef53c-615">e2d06d78-...</span></span> |<span data-ttu-id="ef53c-616">Esperando uma resposta.</span><span class="sxs-lookup"><span data-stu-id="ef53c-616">Waiting for response.</span></span> |
| <span data-ttu-id="ef53c-617">de8b1c3c-...</span><span class="sxs-lookup"><span data-stu-id="ef53c-617">de8b1c3c-...</span></span> |<span data-ttu-id="ef53c-618">Gravação dos dados solicitados.</span><span class="sxs-lookup"><span data-stu-id="ef53c-618">Writing request data.</span></span> |
| <span data-ttu-id="ef53c-619">de8b1c3c-...</span><span class="sxs-lookup"><span data-stu-id="ef53c-619">de8b1c3c-...</span></span> |<span data-ttu-id="ef53c-620">Esperando uma resposta.</span><span class="sxs-lookup"><span data-stu-id="ef53c-620">Waiting for response.</span></span> |
| <span data-ttu-id="ef53c-621">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="ef53c-621">e2d06d78-...</span></span> |<span data-ttu-id="ef53c-622">Exceção acionada enquanto aguarda a resposta: O servidor remoto retornou um erro: (409) Conflito.</span><span class="sxs-lookup"><span data-stu-id="ef53c-622">Exception thrown while waiting for response: The remote server returned an error: (409) Conflict..</span></span> |
| <span data-ttu-id="ef53c-623">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="ef53c-623">e2d06d78-...</span></span> |<span data-ttu-id="ef53c-624">Resposta recebida.</span><span class="sxs-lookup"><span data-stu-id="ef53c-624">Response received.</span></span> <span data-ttu-id="ef53c-625">Status code = 409, Request ID = c27da20e-..., Content-MD5 = , ETag = .</span><span class="sxs-lookup"><span data-stu-id="ef53c-625">Status code = 409, Request ID = c27da20e-..., Content-MD5 = , ETag = .</span></span> |
| <span data-ttu-id="ef53c-626">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="ef53c-626">e2d06d78-...</span></span> |<span data-ttu-id="ef53c-627">Erro ao baixar o corpo da resposta.</span><span class="sxs-lookup"><span data-stu-id="ef53c-627">Downloading error response body.</span></span> |
| <span data-ttu-id="ef53c-628">de8b1c3c-...</span><span class="sxs-lookup"><span data-stu-id="ef53c-628">de8b1c3c-...</span></span> |<span data-ttu-id="ef53c-629">Exceção acionada enquanto aguarda a resposta: O servidor remoto retornou um erro: (404) Não encontrado.</span><span class="sxs-lookup"><span data-stu-id="ef53c-629">Exception thrown while waiting for response: The remote server returned an error: (404) Not Found..</span></span> |
| <span data-ttu-id="ef53c-630">de8b1c3c-...</span><span class="sxs-lookup"><span data-stu-id="ef53c-630">de8b1c3c-...</span></span> |<span data-ttu-id="ef53c-631">Resposta recebida.</span><span class="sxs-lookup"><span data-stu-id="ef53c-631">Response received.</span></span> <span data-ttu-id="ef53c-632">Status code = 404, Request ID = 0eaeab3e-..., Content-MD5 = , ETag = .</span><span class="sxs-lookup"><span data-stu-id="ef53c-632">Status code = 404, Request ID = 0eaeab3e-..., Content-MD5 = , ETag = .</span></span> |
| <span data-ttu-id="ef53c-633">de8b1c3c-...</span><span class="sxs-lookup"><span data-stu-id="ef53c-633">de8b1c3c-...</span></span> |<span data-ttu-id="ef53c-634">Exceção emitida durante a operação: O servidor remoto retornou um erro: (404) Não encontrado.</span><span class="sxs-lookup"><span data-stu-id="ef53c-634">Exception thrown during the operation: The remote server returned an error: (404) Not Found..</span></span> |
| <span data-ttu-id="ef53c-635">de8b1c3c-...</span><span class="sxs-lookup"><span data-stu-id="ef53c-635">de8b1c3c-...</span></span> |<span data-ttu-id="ef53c-636">A política de repetição não permitiu uma nova tentativa.</span><span class="sxs-lookup"><span data-stu-id="ef53c-636">Retry policy did not allow for a retry.</span></span> <span data-ttu-id="ef53c-637">Falha com o servidor remoto retornou um erro: (404) Não encontrado.</span><span class="sxs-lookup"><span data-stu-id="ef53c-637">Failing with The remote server returned an error: (404) Not Found..</span></span> |
| <span data-ttu-id="ef53c-638">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="ef53c-638">e2d06d78-...</span></span> |<span data-ttu-id="ef53c-639">A política de repetição não permitiu uma nova tentativa.</span><span class="sxs-lookup"><span data-stu-id="ef53c-639">Retry policy did not allow for a retry.</span></span> <span data-ttu-id="ef53c-640">Falha com o servidor remoto retornou um erro: (409) Conflito.</span><span class="sxs-lookup"><span data-stu-id="ef53c-640">Failing with The remote server returned an error: (409) Conflict..</span></span> |

<span data-ttu-id="ef53c-641">Nesse exemplo, o log mostra que o cliente está intercalando solicitações do método **CreateIfNotExists** (ID de solicitação e2d06d78…) com as solicitações do método **UploadFromStream** (de8b1c3c-...); isso está acontecendo porque o aplicativo do cliente está chamando esses métodos de modo assíncrono.</span><span class="sxs-lookup"><span data-stu-id="ef53c-641">In this example, the log shows that the client is interleaving requests from the **CreateIfNotExists** method (request id e2d06d78…) with the requests from the **UploadFromStream** method (de8b1c3c-...); this is happening because the client application is invoking these methods asynchronously.</span></span> <span data-ttu-id="ef53c-642">Modifique o código assíncrono no cliente para garantir que ele crie o contêiner antes de tentar carregar qualquer dado para o blob nesse contêiner.</span><span class="sxs-lookup"><span data-stu-id="ef53c-642">You should modify the asynchronous code in the client to ensure that it creates the container before attempting to upload any data to a blob in that container.</span></span> <span data-ttu-id="ef53c-643">Idealmente, crie todos os contêineres antes.</span><span class="sxs-lookup"><span data-stu-id="ef53c-643">Ideally, you should create all your containers in advance.</span></span>

#### <span data-ttu-id="ef53c-644"><a name="SAS-authorization-issue"></a>Um problema de autorização de assinatura de acesso compartilhado (SAS)</span><span class="sxs-lookup"><span data-stu-id="ef53c-644"><a name="SAS-authorization-issue"></a>A Shared Access Signature (SAS) authorization issue</span></span>
<span data-ttu-id="ef53c-645">Se o aplicativo do cliente tentar usar uma chave de SAS que não inclui as permissões necessárias para a operação, o serviço de armazenamento retorna uma mensagem HTTP 404 (Não encontrado) para o cliente.</span><span class="sxs-lookup"><span data-stu-id="ef53c-645">If the client application attempts to use a SAS key that does not include the necessary permissions for the operation, the storage service returns an HTTP 404 (Not found) message to the client.</span></span> <span data-ttu-id="ef53c-646">Ao mesmo tempo, você também verá um valor diferente de zero para **SASAuthorizationError** nas métricas.</span><span class="sxs-lookup"><span data-stu-id="ef53c-646">At the same time, you will also see a non-zero value for **SASAuthorizationError** in the metrics.</span></span>

<span data-ttu-id="ef53c-647">A tabela a seguir mostra um exemplo de mensagem d log do lado do servidor a partir do arquivo de registro de log de armazenamento:</span><span class="sxs-lookup"><span data-stu-id="ef53c-647">The following table shows a sample server-side log message from the Storage Logging log file:</span></span>

| <span data-ttu-id="ef53c-648">Nome</span><span class="sxs-lookup"><span data-stu-id="ef53c-648">Name</span></span> | <span data-ttu-id="ef53c-649">Valor</span><span class="sxs-lookup"><span data-stu-id="ef53c-649">Value</span></span> |
| --- | --- |
| <span data-ttu-id="ef53c-650">Hora de início da solicitação</span><span class="sxs-lookup"><span data-stu-id="ef53c-650">Request start time</span></span> | <span data-ttu-id="ef53c-651">2014-05-30T06:17:48.4473697Z</span><span class="sxs-lookup"><span data-stu-id="ef53c-651">2014-05-30T06:17:48.4473697Z</span></span> |
| <span data-ttu-id="ef53c-652">Tipo de operação</span><span class="sxs-lookup"><span data-stu-id="ef53c-652">Operation type</span></span>     | <span data-ttu-id="ef53c-653">GetBlobProperties</span><span class="sxs-lookup"><span data-stu-id="ef53c-653">GetBlobProperties</span></span>            |
| <span data-ttu-id="ef53c-654">Status da solicitação</span><span class="sxs-lookup"><span data-stu-id="ef53c-654">Request status</span></span>     | <span data-ttu-id="ef53c-655">SASAuthorizationError</span><span class="sxs-lookup"><span data-stu-id="ef53c-655">SASAuthorizationError</span></span>        |
| <span data-ttu-id="ef53c-656">Código de status HTTP</span><span class="sxs-lookup"><span data-stu-id="ef53c-656">HTTP status code</span></span>   | <span data-ttu-id="ef53c-657">404</span><span class="sxs-lookup"><span data-stu-id="ef53c-657">404</span></span>                          |
| <span data-ttu-id="ef53c-658">Tipo de autenticação.</span><span class="sxs-lookup"><span data-stu-id="ef53c-658">Authentication type</span></span>| <span data-ttu-id="ef53c-659">Sas</span><span class="sxs-lookup"><span data-stu-id="ef53c-659">Sas</span></span>                          |
| <span data-ttu-id="ef53c-660">Tipo de serviço</span><span class="sxs-lookup"><span data-stu-id="ef53c-660">Service type</span></span>       | <span data-ttu-id="ef53c-661">Blob</span><span class="sxs-lookup"><span data-stu-id="ef53c-661">Blob</span></span>                         |
| <span data-ttu-id="ef53c-662">URL de Solicitação</span><span class="sxs-lookup"><span data-stu-id="ef53c-662">Request URL</span></span>        | <span data-ttu-id="ef53c-663">https://domemaildist.blob.core.windows.net/azureimblobcontainer/blobCreatedViaSAS.txt</span><span class="sxs-lookup"><span data-stu-id="ef53c-663">https://domemaildist.blob.core.windows.net/azureimblobcontainer/blobCreatedViaSAS.txt</span></span> |
| <span data-ttu-id="ef53c-664">nbsp;</span><span class="sxs-lookup"><span data-stu-id="ef53c-664">nbsp;</span></span>              |   <span data-ttu-id="ef53c-665">?sv=2014-02-14&sr=c&si=mypolicy&sig=XXXXX&;api-version=2014-02-14</span><span class="sxs-lookup"><span data-stu-id="ef53c-665">?sv=2014-02-14&sr=c&si=mypolicy&sig=XXXXX&;api-version=2014-02-14</span></span> |
| <span data-ttu-id="ef53c-666">Cabeçalho da id de solicitação do </span><span class="sxs-lookup"><span data-stu-id="ef53c-666">Request id header</span></span>  | <span data-ttu-id="ef53c-667">a1f348d5-8032-4912-93ef-b393e5252a3b</span><span class="sxs-lookup"><span data-stu-id="ef53c-667">a1f348d5-8032-4912-93ef-b393e5252a3b</span></span> |
| <span data-ttu-id="ef53c-668">ID de solicitação do cliente</span><span class="sxs-lookup"><span data-stu-id="ef53c-668">Client request ID</span></span>  | <span data-ttu-id="ef53c-669">2d064953-8436-4ee0-aa0c-65cb874f7929</span><span class="sxs-lookup"><span data-stu-id="ef53c-669">2d064953-8436-4ee0-aa0c-65cb874f7929</span></span> |


<span data-ttu-id="ef53c-670">Investigue porque o aplicativo do cliente está tentando realizar uma operação que não tem permissão.</span><span class="sxs-lookup"><span data-stu-id="ef53c-670">You should investigate why your client application is attempting to perform an operation it has not been granted permissions for.</span></span>

#### <span data-ttu-id="ef53c-671"><a name="JavaScript-code-does-not-have-permission"></a>O código JavaScript do lado do cliente não tem permissão para acessar o objeto</span><span class="sxs-lookup"><span data-stu-id="ef53c-671"><a name="JavaScript-code-does-not-have-permission"></a>Client-side JavaScript code does not have permission to access the object</span></span>
<span data-ttu-id="ef53c-672">Se você estiver usando um cliente JavaScript e um serviço de armazenamento está retornando mensagens HTTP 404 (Não encontrado), verifique os seguintes erros JavaScript no navegador:</span><span class="sxs-lookup"><span data-stu-id="ef53c-672">If you are using a JavaScript client and the storage service is returning HTTP 404 messages, you check for the following JavaScript errors in the browser:</span></span>

```
SEC7120: Origin http://localhost:56309 not found in Access-Control-Allow-Origin header.
SCRIPT7002: XMLHttpRequest: Network Error 0x80070005, Access is denied.
```

> [!NOTE]
> <span data-ttu-id="ef53c-673">Você pode usar a ferramenta de desenvolvedor F12 no Internet Explorer para rastrear as mensagens trocadas entre o navegador e o serviço de armazenamento quando você estiver solucionando os problemas JavaScript do lado do cliente.</span><span class="sxs-lookup"><span data-stu-id="ef53c-673">You can use the F12 Developer Tools in Internet Explorer to trace the messages exchanged between the browser and the storage service when you are troubleshooting client-side JavaScript issues.</span></span>
> 
> 

<span data-ttu-id="ef53c-674">Esses erros acontecem porque o navegador da Web implementa a restrição de segurança de [política de mesma origem](http://www.w3.org/Security/wiki/Same_Origin_Policy) , que impede uma página da Web de chamar uma API em um domínio diferente do domínio de onde a página vem.</span><span class="sxs-lookup"><span data-stu-id="ef53c-674">These errors occur because the web browser implements the [same origin policy](http://www.w3.org/Security/wiki/Same_Origin_Policy) security restriction that prevents a web page from calling an API in a different domain from the domain the page comes from.</span></span>

<span data-ttu-id="ef53c-675">Para resolver o problema JavaScript, configure o compartilhamento de recursos entre origens (CORS) para o serviço de armazenamento que o cliente está acessando.</span><span class="sxs-lookup"><span data-stu-id="ef53c-675">To work around the JavaScript issue, you can configure Cross Origin Resource Sharing (CORS) for the storage service the client is accessing.</span></span> <span data-ttu-id="ef53c-676">Para saber mais, veja [Suporte de CORS (Compartilhamento de Recursos entre Origens) para os Serviços de Armazenamento do Azure](http://msdn.microsoft.com/library/azure/dn535601.aspx).</span><span class="sxs-lookup"><span data-stu-id="ef53c-676">For more information, see [Cross-Origin Resource Sharing (CORS) Support for Azure Storage Services](http://msdn.microsoft.com/library/azure/dn535601.aspx).</span></span>

<span data-ttu-id="ef53c-677">O código a seguir mostra como configurar seu serviço blob para permitir que o JavaScript execute o domínio Contoso para acessar um blob no seu serviço de armazenamento de blob:</span><span class="sxs-lookup"><span data-stu-id="ef53c-677">The following code sample shows how to configure your blob service to allow JavaScript running in the Contoso domain to access a blob in your blob storage service:</span></span>

```csharp
CloudBlobClient client = new CloudBlobClient(blobEndpoint, new StorageCredentials(accountName, accountKey));
// Set the service properties.
ServiceProperties sp = client.GetServiceProperties();
sp.DefaultServiceVersion = "2013-08-15";
CorsRule cr = new CorsRule();
cr.AllowedHeaders.Add("*");
cr.AllowedMethods = CorsHttpMethods.Get | CorsHttpMethods.Put;
cr.AllowedOrigins.Add("http://www.contoso.com");
cr.ExposedHeaders.Add("x-ms-*");
cr.MaxAgeInSeconds = 5;
sp.Cors.CorsRules.Clear();
sp.Cors.CorsRules.Add(cr);
client.SetServiceProperties(sp);
```

#### <span data-ttu-id="ef53c-678"><a name="network-failure"></a>Falha de rede</span><span class="sxs-lookup"><span data-stu-id="ef53c-678"><a name="network-failure"></a>Network Failure</span></span>
<span data-ttu-id="ef53c-679">Em algumas circunstâncias, os pacotes de rede perdidos podem levar o serviço de armazenamento a retornar mensagens HTTP 404 para o cliente.</span><span class="sxs-lookup"><span data-stu-id="ef53c-679">In some circumstances, lost network packets can lead to the storage service returning HTTP 404 messages to the client.</span></span> <span data-ttu-id="ef53c-680">Por exemplo, quando o seu aplicativo do cliente está excluindo uma entidade do serviço de tabela, você pode ver o cliente emitir uma exceção de armazenamento relatando uma mensagem de status "HTTP 404 (Não encontrado)" do serviço de tabela.</span><span class="sxs-lookup"><span data-stu-id="ef53c-680">For example, when your client application is deleting an entity from the table service you see the client throw a storage exception reporting an "HTTP 404 (Not Found)" status message from the table service.</span></span> <span data-ttu-id="ef53c-681">Quando você investiga a tabela no serviço de armazenamento da tabela, é possível ver que o serviço excluiu a entidade como solicitado.</span><span class="sxs-lookup"><span data-stu-id="ef53c-681">When you investigate the table in the table storage service, you see that the service did delete the entity as requested.</span></span>

<span data-ttu-id="ef53c-682">Os detalhes da exceção no cliente incluem a ID da solicitação (7e84f12d...) atribuída pelo serviço Tabela para a solicitação: você pode usar essas informações para localizar os detalhes da solicitação nos logs de armazenamento no lado do servidor pesquisando na coluna **request-id-header** no arquivo de log.</span><span class="sxs-lookup"><span data-stu-id="ef53c-682">The exception details in the client include the request id (7e84f12d…) assigned by the table service for the request: you can use this information to locate the request details in the server-side storage logs by searching in the **request-id-header** column in the log file.</span></span> <span data-ttu-id="ef53c-683">Você pode também usar as métricas para identificar quando falhas como essa ocorrem e pesquisar os arquivos de log com base no horário que as métricas registraram esse erro.</span><span class="sxs-lookup"><span data-stu-id="ef53c-683">You could also use the metrics to identify when failures such as this occur and then search the log files based on the time the metrics recorded this error.</span></span> <span data-ttu-id="ef53c-684">Essa entrada de log mostram a falha excluída com uma mensagem de status "HTTP (404) Outro Erro do Cliente".</span><span class="sxs-lookup"><span data-stu-id="ef53c-684">This log entry shows that the delete failed with an "HTTP (404) Client Other Error" status message.</span></span> <span data-ttu-id="ef53c-685">A mesma entrada de log também inclui a ID de solicitação gerada pelo cliente na coluna **client-request-id** (813ea74f…).</span><span class="sxs-lookup"><span data-stu-id="ef53c-685">The same log entry also includes the request id generated by the client in the **client-request-id** column (813ea74f…).</span></span>

<span data-ttu-id="ef53c-686">O log do lado do servidor inclui também uma outra entrada com o mesmo valor **client-request-id** (813ea74f…) para uma operação de exclusão com sucesso para a mesma entidade e do mesmo cliente.</span><span class="sxs-lookup"><span data-stu-id="ef53c-686">The server-side log also includes another entry with the same **client-request-id** value (813ea74f…) for a successful delete operation for the same entity, and from the same client.</span></span> <span data-ttu-id="ef53c-687">A operação de exclusão com êxito aconteceu um pouco antes da solicitação de exclusão falhar.</span><span class="sxs-lookup"><span data-stu-id="ef53c-687">This successful delete operation took place very shortly before the failed delete request.</span></span>

<span data-ttu-id="ef53c-688">O caso mais provável nesse cenário é que o cliente enviou uma solicitação excluída da entidade para o serviço de tabela, a qual teve êxito, mas não recebeu uma confirmação do servidor (talvez devido a problemas temporários de rede).</span><span class="sxs-lookup"><span data-stu-id="ef53c-688">The most likely cause of this scenario is that the client sent a delete request for the entity to the table service, which succeeded, but did not receive an acknowledgement from the server (perhaps due to a temporary network issue).</span></span> <span data-ttu-id="ef53c-689">O cliente repetiu a operação automaticamente (usando o mesmo **client-request-id**) e essa tentativa falhou porque a entidade já tinha sido excluída.</span><span class="sxs-lookup"><span data-stu-id="ef53c-689">The client then automatically retried the operation (using the same **client-request-id**), and this retry failed because the entity had already been deleted.</span></span>

<span data-ttu-id="ef53c-690">Se esse problema ocorre com frequência, investigue porque o cliente não está recebendo as confirmações do serviço de tabela.</span><span class="sxs-lookup"><span data-stu-id="ef53c-690">If this problem occurs frequently, you should investigate why the client is failing to receive acknowledgements from the table service.</span></span> <span data-ttu-id="ef53c-691">Se o problema for intermitente, intercepte o erro "HTTP (404) Não encontrado" e log no cliente, mas permita que o cliente continue.</span><span class="sxs-lookup"><span data-stu-id="ef53c-691">If the problem is intermittent, you should trap the "HTTP (404) Not Found" error and log it in the client, but allow the client to continue.</span></span>

### <span data-ttu-id="ef53c-692"><a name="the-client-is-receiving-409-messages"></a>O cliente está recebendo mensagens HTTP 409 (Conflito)</span><span class="sxs-lookup"><span data-stu-id="ef53c-692"><a name="the-client-is-receiving-409-messages"></a>The client is receiving HTTP 409 (Conflict) messages</span></span>
<span data-ttu-id="ef53c-693">A tabela a seguir mostra um trecho do log do lado do servidor para duas operações de cliente: **DeleteIfExists** seguida imediatamente de **CreateIfNotExists**, ambas usando o mesmo nome de contêiner de blob.</span><span class="sxs-lookup"><span data-stu-id="ef53c-693">The following table shows an extract from the server-side log for two client operations: **DeleteIfExists** followed immediately by **CreateIfNotExists** using the same blob container name.</span></span> <span data-ttu-id="ef53c-694">Observe que a operação do cliente resulta em duas solicitações enviadas para o servidor, primeiro uma solicitação **GetContainerProperties** para verificar se o contêiner existe, seguida por uma solicitação de **DeleteContainer** ou **CreateContainer**.</span><span class="sxs-lookup"><span data-stu-id="ef53c-694">Note that each client operation results in two requests sent to the server, first a **GetContainerProperties** request to check if the container exists, followed by the **DeleteContainer** or **CreateContainer** request.</span></span>

| <span data-ttu-id="ef53c-695">Timestamp</span><span class="sxs-lookup"><span data-stu-id="ef53c-695">Timestamp</span></span> | <span data-ttu-id="ef53c-696">Operação</span><span class="sxs-lookup"><span data-stu-id="ef53c-696">Operation</span></span> | <span data-ttu-id="ef53c-697">Result</span><span class="sxs-lookup"><span data-stu-id="ef53c-697">Result</span></span> | <span data-ttu-id="ef53c-698">Nome do contêiner</span><span class="sxs-lookup"><span data-stu-id="ef53c-698">Container name</span></span> | <span data-ttu-id="ef53c-699">ID de solicitação do cliente</span><span class="sxs-lookup"><span data-stu-id="ef53c-699">Client request id</span></span> |
| --- | --- | --- | --- | --- |
| <span data-ttu-id="ef53c-700">05:10:13.7167225</span><span class="sxs-lookup"><span data-stu-id="ef53c-700">05:10:13.7167225</span></span> |<span data-ttu-id="ef53c-701">GetContainerProperties</span><span class="sxs-lookup"><span data-stu-id="ef53c-701">GetContainerProperties</span></span> |<span data-ttu-id="ef53c-702">200</span><span class="sxs-lookup"><span data-stu-id="ef53c-702">200</span></span> |<span data-ttu-id="ef53c-703">mmcont</span><span class="sxs-lookup"><span data-stu-id="ef53c-703">mmcont</span></span> |<span data-ttu-id="ef53c-704">c9f52c89-…</span><span class="sxs-lookup"><span data-stu-id="ef53c-704">c9f52c89-…</span></span> |
| <span data-ttu-id="ef53c-705">05:10:13.8167325</span><span class="sxs-lookup"><span data-stu-id="ef53c-705">05:10:13.8167325</span></span> |<span data-ttu-id="ef53c-706">DeleteContainer</span><span class="sxs-lookup"><span data-stu-id="ef53c-706">DeleteContainer</span></span> |<span data-ttu-id="ef53c-707">202</span><span class="sxs-lookup"><span data-stu-id="ef53c-707">202</span></span> |<span data-ttu-id="ef53c-708">mmcont</span><span class="sxs-lookup"><span data-stu-id="ef53c-708">mmcont</span></span> |<span data-ttu-id="ef53c-709">c9f52c89-…</span><span class="sxs-lookup"><span data-stu-id="ef53c-709">c9f52c89-…</span></span> |
| <span data-ttu-id="ef53c-710">05:10:13.8987407</span><span class="sxs-lookup"><span data-stu-id="ef53c-710">05:10:13.8987407</span></span> |<span data-ttu-id="ef53c-711">GetContainerProperties</span><span class="sxs-lookup"><span data-stu-id="ef53c-711">GetContainerProperties</span></span> |<span data-ttu-id="ef53c-712">404</span><span class="sxs-lookup"><span data-stu-id="ef53c-712">404</span></span> |<span data-ttu-id="ef53c-713">mmcont</span><span class="sxs-lookup"><span data-stu-id="ef53c-713">mmcont</span></span> |<span data-ttu-id="ef53c-714">bc881924-…</span><span class="sxs-lookup"><span data-stu-id="ef53c-714">bc881924-…</span></span> |
| <span data-ttu-id="ef53c-715">05:10:14.2147723</span><span class="sxs-lookup"><span data-stu-id="ef53c-715">05:10:14.2147723</span></span> |<span data-ttu-id="ef53c-716">CreateContainer</span><span class="sxs-lookup"><span data-stu-id="ef53c-716">CreateContainer</span></span> |<span data-ttu-id="ef53c-717">409</span><span class="sxs-lookup"><span data-stu-id="ef53c-717">409</span></span> |<span data-ttu-id="ef53c-718">mmcont</span><span class="sxs-lookup"><span data-stu-id="ef53c-718">mmcont</span></span> |<span data-ttu-id="ef53c-719">bc881924-…</span><span class="sxs-lookup"><span data-stu-id="ef53c-719">bc881924-…</span></span> |

<span data-ttu-id="ef53c-720">O código no aplicativo cliente exclui e, em seguida, recria imediatamente um contêiner de blob usando o mesmo nome: o método **CreateIfNotExists** (ID de solicitação de cliente bc881924-...), eventualmente, falha com o erro de HTTP 409 (Conflito).</span><span class="sxs-lookup"><span data-stu-id="ef53c-720">The code in the client application deletes and then immediately recreates a blob container using the same name: the **CreateIfNotExists** method (Client request ID bc881924-…) eventually fails with the HTTP 409 (Conflict) error.</span></span> <span data-ttu-id="ef53c-721">Quando um cliente exclui contêineres de blob, tabelas ou filas há um breve período antes do nome ficar disponível novamente.</span><span class="sxs-lookup"><span data-stu-id="ef53c-721">When a client deletes blob containers, tables, or queues there is a brief period before the name becomes available again.</span></span>

<span data-ttu-id="ef53c-722">O aplicativo do cliente deve usar nomes de contêiner exclusivos sempre que criar novos contêineres caso o padrão excluir/recriar for comum.</span><span class="sxs-lookup"><span data-stu-id="ef53c-722">The client application should use unique container names whenever it creates new containers if the delete/recreate pattern is common.</span></span>

### <span data-ttu-id="ef53c-723"><a name="metrics-show-low-percent-success"></a>As métricas mostram uma baixa PercentSuccess ou as entradas de log analíticas têm operações com status de transação de ClientOtherErrors</span><span class="sxs-lookup"><span data-stu-id="ef53c-723"><a name="metrics-show-low-percent-success"></a>Metrics show low PercentSuccess or analytics log entries have operations with transaction status of ClientOtherErrors</span></span>
<span data-ttu-id="ef53c-724">As métricas de **PercentSuccess** capturam a porcentagem das operações que tiveram êxito com base nos códigos de status HTTP.</span><span class="sxs-lookup"><span data-stu-id="ef53c-724">The **PercentSuccess** metric captures the percent of operations that were successful based on their HTTP Status Code.</span></span> <span data-ttu-id="ef53c-725">As operações com códigos de status 2XX contam como bem sucedidas, enquanto as operações com código de status de intervalos 3XX, 4XX e 5XX são contadas como sem sucesso e inferiores aos valores de métricas **PercentSucess** .</span><span class="sxs-lookup"><span data-stu-id="ef53c-725">Operations with status codes of 2XX count as successful, whereas operations with status codes in 3XX, 4XX and 5XX ranges are counted as unsuccessful and lower the **PercentSucess** metric value.</span></span> <span data-ttu-id="ef53c-726">Nos arquivos de log do lado do servidor, essas operações são registradas com um status de transação de **ClientOtherErrors**.</span><span class="sxs-lookup"><span data-stu-id="ef53c-726">In the server-side storage log files, these operations are recorded with a transaction status of **ClientOtherErrors**.</span></span>

<span data-ttu-id="ef53c-727">É importante observar que essas operações foram concluídas com sucesso e por isso não afetam as outras métricas como a de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="ef53c-727">It is important to note that these operations have completed successfully and therefore do not affect other metrics such as availability.</span></span> <span data-ttu-id="ef53c-728">Alguns exemplos de operações que executam com sucesso, mas que podem resultar em códigos de status HTTP sem sucesso incluem:</span><span class="sxs-lookup"><span data-stu-id="ef53c-728">Some examples of operations that execute successfully but that can result in unsuccessful HTTP status codes include:</span></span>

* <span data-ttu-id="ef53c-729">**ResourceNotFound** (Não encontrado 404), por exemplo, de uma solicitação GET para o blob que não existe.</span><span class="sxs-lookup"><span data-stu-id="ef53c-729">**ResourceNotFound** (Not Found 404), for example from a GET request to a blob that does not exist.</span></span>
* <span data-ttu-id="ef53c-730">**ResouceAlreadyExists** (Conflito 409), por exemplo, de uma operação **CreateIfNotExist** em que o recurso já existe.</span><span class="sxs-lookup"><span data-stu-id="ef53c-730">**ResouceAlreadyExists** (Conflict 409), for example from a **CreateIfNotExist** operation where the resource already exists.</span></span>
* <span data-ttu-id="ef53c-731">**ConditionNotMet** (Não Modificado 304), por exemplo, de uma operação condicional tal como quando o cliente envia um valor **ETag** e um cabeçalho HTTP **If-None-Match** para solicitar uma imagem apenas se ela tiver sido carregada desde a última operação.</span><span class="sxs-lookup"><span data-stu-id="ef53c-731">**ConditionNotMet** (Not Modified 304), for example from a conditional operation such as when a client sends an **ETag** value and an HTTP **If-None-Match** header to request an image only if it has been updated since the last operation.</span></span>

<span data-ttu-id="ef53c-732">Você pode encontrar uma lista de códigos de erro comuns da API REST que os serviços de armazenamento retornam na página [Códigos de erro comuns da API REST](http://msdn.microsoft.com/library/azure/dd179357.aspx).</span><span class="sxs-lookup"><span data-stu-id="ef53c-732">You can find a list of common REST API error codes that the storage services return on the page [Common REST API Error Codes](http://msdn.microsoft.com/library/azure/dd179357.aspx).</span></span>

### <span data-ttu-id="ef53c-733"><a name="capacity-metrics-show-an-unexpected-increase"></a>As métricas de capacidade mostram um aumento inesperado em uso de capacidade de armazenamento</span><span class="sxs-lookup"><span data-stu-id="ef53c-733"><a name="capacity-metrics-show-an-unexpected-increase"></a>Capacity metrics show an unexpected increase in storage capacity usage</span></span>
<span data-ttu-id="ef53c-734">Se você ver mudanças repentinas, inesperadas na capacidade de uso na sua conta de armazenamento, você pode investigar as razões, primeiramente, olhando suas métricas de disponibilidade; por exemplo, um aumento no número de falhas de solicitações de exclusão pode levar a um aumento na quantidade de armazenamento de blob que você está usando como aplicativo específico de operações de limpeza, o qual você esperava estar liberando espaço, pode não estar funcionando como esperado (por exemplo, porque os tokens de SAS usados para liberação de espaço expiraram).</span><span class="sxs-lookup"><span data-stu-id="ef53c-734">If you see sudden, unexpected changes in capacity usage in your storage account, you can investigate the reasons by first looking at your availability metrics; for example, an increase in the number of failed delete requests might lead to an increase in the amount of blob storage you are using as application specific cleanup operations you might have expected to be freeing up space may not be working as expected (for example, because the SAS tokens used for freeing up space have expired).</span></span>

### <span data-ttu-id="ef53c-735"><a name="you-are-experiencing-unexpected-reboots"></a>Você está enfrentando reinicializações inesperadas das máquinas virtuais do Azure que contêm um grande número de VHDs anexados</span><span class="sxs-lookup"><span data-stu-id="ef53c-735"><a name="you-are-experiencing-unexpected-reboots"></a>You are experiencing unexpected reboots of Azure Virtual Machines that have a large number of attached VHDs</span></span>
<span data-ttu-id="ef53c-736">Se uma máquina virtual (VM) do Azure tem um grande número de VHDs anexados que estão na mesma conta de armazenamento, você pode exceder os alvos de escalabilidade de uma conta de armazenamento individual causando uma falha na VM.</span><span class="sxs-lookup"><span data-stu-id="ef53c-736">If an Azure Virtual Machine (VM) has a large number of attached VHDs that are in the same storage account, you could exceed the scalability targets for an individual storage account causing the VM to fail.</span></span> <span data-ttu-id="ef53c-737">Verifique as métricas de minuto da conta de armazenamento ((**TotalRequests**/**TotalIngress**/**TotalEgress**) para ver se há picos que excedem as metas de escalabilidade de uma conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="ef53c-737">You should check the minute metrics for the storage account (**TotalRequests**/**TotalIngress**/**TotalEgress**) for spikes that exceed the scalability targets for a storage account.</span></span> <span data-ttu-id="ef53c-738">Consulte a seção "[As métricas mostram um aumento em PercentThrottlingError]" para ajudar a determinar se a limitação ocorreu na sua conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="ef53c-738">See the section "[Metrics show an increase in PercentThrottlingError]" for assistance in determining if throttling has occurred on your storage account.</span></span>

<span data-ttu-id="ef53c-739">Em geral, cada operação de entrada ou saída individual em um VHD a partir de uma máquina virtual se traduz em operações **Get Page** ou **Put Page** no blob de página subjacente.</span><span class="sxs-lookup"><span data-stu-id="ef53c-739">In general, each individual input or output operation on a VHD from a Virtual Machine translates to **Get Page** or **Put Page** operations on the underlying page blob.</span></span> <span data-ttu-id="ef53c-740">Portanto, você pode usar os IOPS estimados para o seu ambiente para ajustar quantos VHDs você pode ter em uma única conta de armazenamento com base no comportamento específico do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ef53c-740">Therefore, you can use the estimated IOPS for your environment to tune how many VHDs you can have in a single storage account based on the specific behavior of your application.</span></span> <span data-ttu-id="ef53c-741">Não recomendamos ter mais do que 40 discos em uma única conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="ef53c-741">We do not recommend having more than 40 disks in a single storage account.</span></span> <span data-ttu-id="ef53c-742">Consulte [Metas de desempenho e escalabilidade do armazenamento do Azure](storage-scalability-targets.md) para obter detalhes sobre as metas de escalabilidade atuais para contas de armazenamento, em particular a largura de banda total e a taxa de solicitação para o tipo de conta de armazenamento que você está usando.</span><span class="sxs-lookup"><span data-stu-id="ef53c-742">See [Azure Storage Scalability and Performance Targets](storage-scalability-targets.md) for details of the current scalability targets for storage accounts, in particular the total request rate and total bandwidth for the type of storage account you are using.</span></span>
<span data-ttu-id="ef53c-743">Se você está excedendo as metas de escalabilidade para sua conta de armazenamento, você deve colocar seus VHDs em várias contas de armazenamento diferentes para reduzir a atividade de cada conta individual.</span><span class="sxs-lookup"><span data-stu-id="ef53c-743">If you are exceeding the scalability targets for your storage account, you should place your VHDs in multiple different storage accounts to reduce the activity in each individual account.</span></span>

### <span data-ttu-id="ef53c-744"><a name="your-issue-arises-from-using-the-storage-emulator"></a>Seu problema apareceu por usar o emulador de armazenamento para desenvolvimento ou teste</span><span class="sxs-lookup"><span data-stu-id="ef53c-744"><a name="your-issue-arises-from-using-the-storage-emulator"></a>Your issue arises from using the storage emulator for development or test</span></span>
<span data-ttu-id="ef53c-745">Você normalmente usa o emulador de armazenamento durante o desenvolvimento e teste para evitar o requisito de uma conta de armazenamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="ef53c-745">You typically use the storage emulator during development and test to avoid the requirement for an Azure storage account.</span></span> <span data-ttu-id="ef53c-746">Os problemas comuns que podem ocorrer quando você estiver usando o emulador de armazenamento são:</span><span class="sxs-lookup"><span data-stu-id="ef53c-746">The common issues that can occur when you are using the storage emulator are:</span></span>

* <span data-ttu-id="ef53c-747">[O recurso "X” não está funcionando no emulador de armazenamento]</span><span class="sxs-lookup"><span data-stu-id="ef53c-747">[Feature "X" is not working in the storage emulator]</span></span>
* <span data-ttu-id="ef53c-748">[Erro "O valor de um dos cabeçalhos HTTP não está no formato correto" ao usar o emulador de armazenamento]</span><span class="sxs-lookup"><span data-stu-id="ef53c-748">[Error "The value for one of the HTTP headers is not in the correct format" when using the storage emulator]</span></span>
* <span data-ttu-id="ef53c-749">[A execução do emulador de armazenamento requer privilégios administrativos]</span><span class="sxs-lookup"><span data-stu-id="ef53c-749">[Running the storage emulator requires administrative privileges]</span></span>

#### <span data-ttu-id="ef53c-750"><a name="feature-X-is-not-working"></a>O recurso "X” não está funcionando no emulador de armazenamento</span><span class="sxs-lookup"><span data-stu-id="ef53c-750"><a name="feature-X-is-not-working"></a>Feature "X" is not working in the storage emulator</span></span>
<span data-ttu-id="ef53c-751">O emulador de armazenamento não é compatível com todos os recursos dos serviços de armazenamento do Azure, como o serviço de arquivo.</span><span class="sxs-lookup"><span data-stu-id="ef53c-751">The storage emulator does not support all of the features of the Azure storage services such as the file service.</span></span> <span data-ttu-id="ef53c-752">Para saber mais, confira [Usar o Emulador de Armazenamento do Azure para desenvolvimento e teste](storage-use-emulator.md).</span><span class="sxs-lookup"><span data-stu-id="ef53c-752">For more information, see [Use the Azure Storage Emulator for Development and Testing](storage-use-emulator.md).</span></span>

<span data-ttu-id="ef53c-753">Para os recursos que não são compatíveis com o emulador de armazenamento, use o serviço de armazenamento do Azure em nuvem.</span><span class="sxs-lookup"><span data-stu-id="ef53c-753">For those features that the storage emulator does not support, use the Azure storage service in the cloud.</span></span>

#### <span data-ttu-id="ef53c-754"><a name="error-HTTP-header-not-correct-format"></a>Erro "O valor de um dos cabeçalhos HTTP não está no formato correto" ao usar o emulador de armazenamento</span><span class="sxs-lookup"><span data-stu-id="ef53c-754"><a name="error-HTTP-header-not-correct-format"></a>Error "The value for one of the HTTP headers is not in the correct format" when using the storage emulator</span></span>
<span data-ttu-id="ef53c-755">Você está testando o seu aplicativo que usa a biblioteca de cliente de armazenamento em relação ao emulador de armazenamento local e o método chama **CreateIfNotExists** falha com uma mensagem de erro "O valor para um dos cabeçalhos HTTP não está no formato correto”.</span><span class="sxs-lookup"><span data-stu-id="ef53c-755">You are testing your application that use the Storage Client Library against the local storage emulator and method calls such as **CreateIfNotExists** fail with the error message "The value for one of the HTTP headers is not in the correct format."</span></span> <span data-ttu-id="ef53c-756">Isso indica que a versão do emulador de armazenamento que você está usando não é compatível com a versão da biblioteca do cliente de armazenamento que você está usando.</span><span class="sxs-lookup"><span data-stu-id="ef53c-756">This indicates that the version of the storage emulator you are using does not support the version of the storage client library you are using.</span></span> <span data-ttu-id="ef53c-757">A biblioteca do cliente de armazenamento adiciona um cabeçalho **x-ms-version** em todas as solicitações que ela faz.</span><span class="sxs-lookup"><span data-stu-id="ef53c-757">The Storage Client Library adds the header **x-ms-version** to all the requests it makes.</span></span> <span data-ttu-id="ef53c-758">Se o emulador de armazenamento não reconhecer o valor no cabeçalho **x-ms-version** , ele rejeita a solicitação.</span><span class="sxs-lookup"><span data-stu-id="ef53c-758">If the storage emulator does not recognize the value in the **x-ms-version** header, it rejects the request.</span></span>

<span data-ttu-id="ef53c-759">Você pode usar os log de clientes de biblioteca de armazenamento para ver o valor do **cabeçalho x-ms-version** que está enviando.</span><span class="sxs-lookup"><span data-stu-id="ef53c-759">You can use the Storage Library Client logs to see the value of the **x-ms-version header** it is sending.</span></span> <span data-ttu-id="ef53c-760">Você também pode ver o valor do **cabeçalho x-ms-version** se você usar o Fiddler para rastrear as solicitações do aplicativo do cliente.</span><span class="sxs-lookup"><span data-stu-id="ef53c-760">You can also see the value of the **x-ms-version header** if you use Fiddler to trace the requests from your client application.</span></span>

<span data-ttu-id="ef53c-761">Esse cenário normalmente acontece se você instalar e usar a versão mais recente da biblioteca do cliente de armazenamento sem atualizar o emulador de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="ef53c-761">This scenario typically occurs if you install and use the latest version of the Storage Client Library without updating the storage emulator.</span></span> <span data-ttu-id="ef53c-762">Instale a versão mais recente do emulador de armazenamento ou use o armazenamento em nuvem em vez do emulador para desenvolvimento ou teste.</span><span class="sxs-lookup"><span data-stu-id="ef53c-762">You should either install the latest version of the storage emulator, or use cloud storage instead of the emulator for development and test.</span></span>

#### <span data-ttu-id="ef53c-763"><a name="storage-emulator-requires-administrative-privileges"></a>A execução do emulador de armazenamento requer privilégios administrativos</span><span class="sxs-lookup"><span data-stu-id="ef53c-763"><a name="storage-emulator-requires-administrative-privileges"></a>Running the storage emulator requires administrative privileges</span></span>
<span data-ttu-id="ef53c-764">Você pode solicitar credenciais para o administrador quando você executar o emulador de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="ef53c-764">You are prompted for administrator credentials when you run the storage emulator.</span></span> <span data-ttu-id="ef53c-765">Isso acontece apenas quando você inicializar o emulador de armazenamento pela primeira vez.</span><span class="sxs-lookup"><span data-stu-id="ef53c-765">This only occurs when you are initializing the storage emulator for the first time.</span></span> <span data-ttu-id="ef53c-766">Após você ter inicializado o emulador de armazenamento, você não precisa de privilégios de administrador para executá-lo novamente.</span><span class="sxs-lookup"><span data-stu-id="ef53c-766">After you have initialized the storage emulator, you do not need administrative privileges to run it again.</span></span>

<span data-ttu-id="ef53c-767">Para saber mais, confira [Usar o Emulador de Armazenamento do Azure para desenvolvimento e teste](storage-use-emulator.md).</span><span class="sxs-lookup"><span data-stu-id="ef53c-767">For more information, see [Use the Azure Storage Emulator for Development and Testing](storage-use-emulator.md).</span></span> <span data-ttu-id="ef53c-768">Observe que você também pode inicializar o emulador de armazenamento no Visual Studio, o que também exige privilégios administrativos.</span><span class="sxs-lookup"><span data-stu-id="ef53c-768">Note that you can also initialize the storage emulator in Visual Studio, which will also require administrative privileges.</span></span>

### <span data-ttu-id="ef53c-769"><a name="you-are-encountering-problems-installing-the-Windows-Azure-SDK"></a>Você encontrou problemas ao instalar o SDK do Azure para .NET</span><span class="sxs-lookup"><span data-stu-id="ef53c-769"><a name="you-are-encountering-problems-installing-the-Windows-Azure-SDK"></a>You are encountering problems installing the Azure SDK for .NET</span></span>
<span data-ttu-id="ef53c-770">Quando você tenta instalar o SDK, ele falhar ao tentar instalar o emulador de armazenamento no seu computador local.</span><span class="sxs-lookup"><span data-stu-id="ef53c-770">When you try to install the SDK, it fails trying to install the storage emulator on your local machine.</span></span> <span data-ttu-id="ef53c-771">O log de instalação contém uma das seguintes mensagens:</span><span class="sxs-lookup"><span data-stu-id="ef53c-771">The installation log contains one of the following messages:</span></span>

* <span data-ttu-id="ef53c-772">CAQuietExec: Erro: Não é possível acessar a instância do SQL</span><span class="sxs-lookup"><span data-stu-id="ef53c-772">CAQuietExec:  Error: Unable to access SQL instance</span></span>
* <span data-ttu-id="ef53c-773">CAQuietExec: Erro: Não é possível criar o banco de dados</span><span class="sxs-lookup"><span data-stu-id="ef53c-773">CAQuietExec:  Error: Unable to create database</span></span>

<span data-ttu-id="ef53c-774">A causa é um problema com a instalação LocalDB existente.</span><span class="sxs-lookup"><span data-stu-id="ef53c-774">The cause is an issue with existing LocalDB installation.</span></span> <span data-ttu-id="ef53c-775">Por padrão, o emulador de armazenamento usa o LocalDB para persistir os dados quando simula os serviços de armazenamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="ef53c-775">By default, the storage emulator uses LocalDB to persist data when it simulates the Azure storage services.</span></span> <span data-ttu-id="ef53c-776">Você pode reiniciar a sua instância LocalDB ao executar os seguintes comando na janela de prompt de comando antes de tentar instalar o SDK.</span><span class="sxs-lookup"><span data-stu-id="ef53c-776">You can reset your LocalDB instance by running the following commands in a command-prompt window before trying to install the SDK.</span></span>

```
sqllocaldb stop v11.0
sqllocaldb delete v11.0
delete %USERPROFILE%\WAStorageEmulatorDb3*.*
sqllocaldb create v11.0
```

<span data-ttu-id="ef53c-777">O comando **delete** remove qualquer arquivo de bancos de dado antigo das instalações anteriores do emulador de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="ef53c-777">The **delete** command removes any old database files from previous installations of the storage emulator.</span></span>

### <span data-ttu-id="ef53c-778"><a name="you-have-a-different-issue-with-a-storage-service"></a>Você tem um problema diferente com um serviço de armazenamento</span><span class="sxs-lookup"><span data-stu-id="ef53c-778"><a name="you-have-a-different-issue-with-a-storage-service"></a>You have a different issue with a storage service</span></span>
<span data-ttu-id="ef53c-779">Se as seções anteriores de solução de problemas não incluem os problemas que você está tendo com o serviço de armazenamento, adote a seguinte abordagem para diagnosticar a solução de seu problema.</span><span class="sxs-lookup"><span data-stu-id="ef53c-779">If the previous troubleshooting sections do not include the issue you are having with a storage service, you should adopt the following approach to diagnosing and troubleshooting your issue.</span></span>

* <span data-ttu-id="ef53c-780">Verifique as métricas para ver se há qualquer mudança de comportamento da linha de base esperada.</span><span class="sxs-lookup"><span data-stu-id="ef53c-780">Check your metrics to see if there is any change from your expected base-line behavior.</span></span> <span data-ttu-id="ef53c-781">A partir das métricas, você pode determinar se o problema é transitório ou permanente, e quais as operações de armazenamento que o problema está afetando.</span><span class="sxs-lookup"><span data-stu-id="ef53c-781">From the metrics, you may be able to determine whether the issue is transient or permanent, and which storage operations the issue is affecting.</span></span>
* <span data-ttu-id="ef53c-782">Você pode usar as informações de métricas para ajudá-lo a procurar os dados de log do lado do servidor para obter informações mais detalhadas sobre qualquer erro que esteja ocorrendo.</span><span class="sxs-lookup"><span data-stu-id="ef53c-782">You can use the metrics information to help you search your server-side log data for more detailed information about any errors that are occurring.</span></span> <span data-ttu-id="ef53c-783">Essa informação pode ajudá-lo a encontrar e a solucionar o problema.</span><span class="sxs-lookup"><span data-stu-id="ef53c-783">This information may help you troubleshoot and resolve the issue.</span></span>
* <span data-ttu-id="ef53c-784">Se a informação nos logs do lado do servidor não forem suficientes para resolver o problema com êxito, você pode usar os logs do lado do cliente da biblioteca do cliente de armazenamento para investigar o comportamento do seu aplicativo do cliente e ferramentas, tais como Fiddler, Wireshark e Microsoft Message Analyzer para investigar a sua rede.</span><span class="sxs-lookup"><span data-stu-id="ef53c-784">If the information in the server-side logs is not sufficient to troubleshoot the issue successfully, you can use the Storage Client Library client-side logs to investigate the behavior of your client application, and tools such as Fiddler, Wireshark, and Microsoft Message Analyzer to investigate your network.</span></span>

<span data-ttu-id="ef53c-785">Para saber mais sobre como usar o Fiddler, consulte "[Anexo 1: Usando o Fiddler para capturar o tráfego HTTP e HTTPS]".</span><span class="sxs-lookup"><span data-stu-id="ef53c-785">For more information about using Fiddler, see "[Appendix 1: Using Fiddler to capture HTTP and HTTPS traffic]."</span></span>

<span data-ttu-id="ef53c-786">Para saber mais sobre usar o Wireshark, veja “[Anexo 2: Usando o Wireshark para capturar o tráfego de rede]”.</span><span class="sxs-lookup"><span data-stu-id="ef53c-786">For more information about using Wireshark, see "[Appendix 2: Using Wireshark to capture network traffic]."</span></span>

<span data-ttu-id="ef53c-787">Para saber mais sobre como usar o Microsoft Message Analyzer, consulte o "[Anexo 3: Usando o Microsoft Message Analyzer para capturar o tráfego de rede]".</span><span class="sxs-lookup"><span data-stu-id="ef53c-787">For more information about using Microsoft Message Analyzer, see "[Appendix 3: Using Microsoft Message Analyzer to capture network traffic]."</span></span>

## <span data-ttu-id="ef53c-788"><a name="appendices"></a>Anexos</span><span class="sxs-lookup"><span data-stu-id="ef53c-788"><a name="appendices"></a>Appendices</span></span>
<span data-ttu-id="ef53c-789">Os anexos descrevem várias ferramentas que você pode achar úteis ao diagnosticar ou solucionar os problemas com o armazenamento do Azure (e outros serviços).</span><span class="sxs-lookup"><span data-stu-id="ef53c-789">The appendices describe several tools that you may find useful when you are diagnosing and troubleshooting issues with Azure Storage (and other services).</span></span> <span data-ttu-id="ef53c-790">Essas ferramentas não são parte do armazenamento do Azure e alguns são produtos de terceiros.</span><span class="sxs-lookup"><span data-stu-id="ef53c-790">These tools are not part of Azure Storage and some are third-party products.</span></span> <span data-ttu-id="ef53c-791">Como tal, as ferramentas discutidas nesses anexos não são cobertas por nenhum contrato de suporte que você possa ter com o Microsoft Azure ou Armazenamento do Azure e, portanto, como parte de seu processo de avaliação examine as opções de licença e de suporte disponíveis pelos fornecedores dessas ferramentas.</span><span class="sxs-lookup"><span data-stu-id="ef53c-791">As such, the tools discussed in these appendices are not covered by any support agreement you may have with Microsoft Azure or Azure Storage, and therefore as part of your evaluation process you should examine the licensing and support options available from the providers of these tools.</span></span>

### <span data-ttu-id="ef53c-792"><a name="appendix-1"></a>Anexo 1: Usando o Fiddler para capturar o tráfego HTTP e HTTPS</span><span class="sxs-lookup"><span data-stu-id="ef53c-792"><a name="appendix-1"></a>Appendix 1: Using Fiddler to capture HTTP and HTTPS traffic</span></span>
<span data-ttu-id="ef53c-793">[Fiddler](http://www.telerik.com/fiddler) é uma ferramenta útil para analisar o tráfego HTTP e HTTPS entre o aplicativo do cliente e o serviço de armazenamento do Azure que você está usando.</span><span class="sxs-lookup"><span data-stu-id="ef53c-793">[Fiddler](http://www.telerik.com/fiddler) is a useful tool for analyzing the HTTP and HTTPS traffic between your client application and the Azure storage service you are using.</span></span>

> [!NOTE]
> <span data-ttu-id="ef53c-794">O Fiddler pode decodificar o tráfego HTTPS; leia a documentação do Fiddler cuidadosamente para entender como ele faz isso e para entender as implicações de segurança.</span><span class="sxs-lookup"><span data-stu-id="ef53c-794">Fiddler can decode HTTPS traffic; you should read the Fiddler documentation carefully to understand how it does this, and to understand the security implications.</span></span>
> 
> 

<span data-ttu-id="ef53c-795">Esse anexo dá um breve passo a passo de como configurar o Fiddler para capturar o tráfego entre o computador local onde você instalou o Fiddler e os serviços de armazenamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="ef53c-795">This appendix provides a brief walkthrough of how to configure Fiddler to capture traffic between the local machine where you have installed Fiddler and the Azure storage services.</span></span>

<span data-ttu-id="ef53c-796">Após você ter iniciado o Fiddler, ele começará capturar o tráfego HTTP e HTTPS da sua máquina local.</span><span class="sxs-lookup"><span data-stu-id="ef53c-796">After you have launched Fiddler, it will begin capturing HTTP and HTTPS traffic on your local machine.</span></span> <span data-ttu-id="ef53c-797">A seguir há alguns comandos úteis para controlar o Fiddler:</span><span class="sxs-lookup"><span data-stu-id="ef53c-797">The following are some useful commands for controlling Fiddler:</span></span>

* <span data-ttu-id="ef53c-798">Parar e iniciar a captura de tráfego.</span><span class="sxs-lookup"><span data-stu-id="ef53c-798">Stop and start capturing traffic.</span></span> <span data-ttu-id="ef53c-799">No menu principal, vá para **Arquivo** e clique em **Capturar Tráfego** para alternar entre captura ativada e desativada.</span><span class="sxs-lookup"><span data-stu-id="ef53c-799">On the main menu, go to **File** and then click **Capture Traffic** to toggle capturing on and off.</span></span>
* <span data-ttu-id="ef53c-800">Salve os dados de tráfego capturados.</span><span class="sxs-lookup"><span data-stu-id="ef53c-800">Save captured traffic data.</span></span> <span data-ttu-id="ef53c-801">No menu principal, vá até **Arquivo**, clique em **Salvar** e, em seguida, clique em **Todas as Sessões**: isso permite que você salve o tráfego em um arquivo de sessão.</span><span class="sxs-lookup"><span data-stu-id="ef53c-801">On the main menu, go to **File**, click **Save**, and then click **All Sessions**: this enables you to save the traffic in a Session Archive file.</span></span> <span data-ttu-id="ef53c-802">Você pode recarregar um Session Archive mais tarde para análise ou enviá-lo se solicitado pelo suporte Microsoft.</span><span class="sxs-lookup"><span data-stu-id="ef53c-802">You can reload a Session Archive later for analysis, or send it if requested to Microsoft support.</span></span>

<span data-ttu-id="ef53c-803">Para limitar o valor de tráfego que o Fiddler captura, você pode usar filtros que você configura na guia **Filtros** .</span><span class="sxs-lookup"><span data-stu-id="ef53c-803">To limit the amount of traffic that Fiddler captures, you can use filters that you configure in the **Filters** tab.</span></span> <span data-ttu-id="ef53c-804">A seguinte captura de tela mostra um filtro que captura apenas o tráfego enviado para o ponto de extremidade de armazenamento **contosoemaildist.table.core.windows.net** :</span><span class="sxs-lookup"><span data-stu-id="ef53c-804">The following screenshot shows a filter that captures only traffic sent to the **contosoemaildist.table.core.windows.net** storage endpoint:</span></span>

![][5]

### <span data-ttu-id="ef53c-805"><a name="appendix-2"></a>Anexo 2: Usando o Wireshark para capturar o tráfego de rede</span><span class="sxs-lookup"><span data-stu-id="ef53c-805"><a name="appendix-2"></a>Appendix 2: Using Wireshark to capture network traffic</span></span>
<span data-ttu-id="ef53c-806">[Wireshark](http://www.wireshark.org/) é um analisar de protocolo de rede que permite que você exiba informações detalhadas de pacote de uma vasta gama de protocolos de rede.</span><span class="sxs-lookup"><span data-stu-id="ef53c-806">[Wireshark](http://www.wireshark.org/) is a network protocol analyzer that enables you to view detailed packet information for a wide range of network protocols.</span></span>

<span data-ttu-id="ef53c-807">O procedimento a seguir mostra como capturar informações detalhadas de pacote para tráfego a partir do computador local onde você instalou o Wireshark para o serviço de tabela na sua conta de armazenamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="ef53c-807">The following procedure shows you how to capture detailed packet information for traffic from the local machine where you installed Wireshark to the table service in your Azure storage account.</span></span>

1. <span data-ttu-id="ef53c-808">Habilite o Wireshark no seu computador local.</span><span class="sxs-lookup"><span data-stu-id="ef53c-808">Launch Wireshark on your local machine.</span></span>
2. <span data-ttu-id="ef53c-809">Na seção **Iniciar** , selecione a interface de rede local ou as interfaces que estão conectadas à Internet.</span><span class="sxs-lookup"><span data-stu-id="ef53c-809">In the **Start** section, select the local network interface or interfaces that are connected to the internet.</span></span>
3. <span data-ttu-id="ef53c-810">Clique em **Opções de Captura**.</span><span class="sxs-lookup"><span data-stu-id="ef53c-810">Click **Capture Options**.</span></span>
4. <span data-ttu-id="ef53c-811">Adicione um filtro à caixa de texto **Filtro de Captura** .</span><span class="sxs-lookup"><span data-stu-id="ef53c-811">Add a filter to the **Capture Filter** textbox.</span></span> <span data-ttu-id="ef53c-812">Por exemplo, o **host contosoemaildist.table.core.windows.net** configurará o Wireshark para capturar apenas os pacotes enviados para ou a partir do ponto de extremidade de serviço tabela na conta de armazenamento **contosoemaildist**.</span><span class="sxs-lookup"><span data-stu-id="ef53c-812">For example, **host contosoemaildist.table.core.windows.net** will configure Wireshark to capture only packets sent to or from the table service endpoint in the **contosoemaildist** storage account.</span></span> <span data-ttu-id="ef53c-813">Confira a [Lista completa de filtros de captura](http://wiki.wireshark.org/CaptureFilters).</span><span class="sxs-lookup"><span data-stu-id="ef53c-813">Check out the [complete list of Capture Filters](http://wiki.wireshark.org/CaptureFilters).</span></span>
   
   ![][6]
5. <span data-ttu-id="ef53c-814">Clique em **Iniciar**.</span><span class="sxs-lookup"><span data-stu-id="ef53c-814">Click **Start**.</span></span> <span data-ttu-id="ef53c-815">O Wireshark capturará agora todos pacotes enviados para ou a partir do ponto de extremidade do serviço de tabela enquanto você usa o aplicativo do cliente no seu computador local.</span><span class="sxs-lookup"><span data-stu-id="ef53c-815">Wireshark will now capture all the packets send to or from the table service endpoint as you use your client application on your local machine.</span></span>
6. <span data-ttu-id="ef53c-816">Quando você tiver terminado, no menu principal clique em **Capturar** e em **Parar**.</span><span class="sxs-lookup"><span data-stu-id="ef53c-816">When you have finished, on the main menu click **Capture** and then **Stop**.</span></span>
7. <span data-ttu-id="ef53c-817">Para salvar os dados capturados no arquivo de captura do Wireshark, no menu principal clique em **Arquivo** e em **Salvar**.</span><span class="sxs-lookup"><span data-stu-id="ef53c-817">To save the captured data in a Wireshark Capture File, on the main menu click **File** and then **Save**.</span></span>

<span data-ttu-id="ef53c-818">O Wireshark irá realçar qualquer erro que existir na janela **packetlist** .</span><span class="sxs-lookup"><span data-stu-id="ef53c-818">WireShark will highlight any errors that exist in the **packetlist** window.</span></span> <span data-ttu-id="ef53c-819">Você também pode usar a janela **Informações do Especialista** (clique em **Analisar** e em **Informações do Especialista**) para exibir um resumo dos erros e avisos.</span><span class="sxs-lookup"><span data-stu-id="ef53c-819">You can also use the **Expert Info** window (click **Analyze**, then **Expert Info**) to view a summary of errors and warnings.</span></span>

![][7]

<span data-ttu-id="ef53c-820">Você também pode escolher para exibir os dados de TCP enquanto a camada do aplicativo vê isso ao clicar com o botão direito nos dados de TCP e ao selecionar **Siga o Fluxo TCP**.</span><span class="sxs-lookup"><span data-stu-id="ef53c-820">You can also chose to view the TCP data as the application layer sees it by right-clicking on the TCP data and selecting **Follow TCP Stream**.</span></span> <span data-ttu-id="ef53c-821">Isso é bastante útil se você capturou o seu despejo sem o filtro de captura.</span><span class="sxs-lookup"><span data-stu-id="ef53c-821">This is particularly useful if you captured your dump without a capture filter.</span></span> <span data-ttu-id="ef53c-822">Para saber mais, confira [Como seguir fluxos TCP](http://www.wireshark.org/docs/wsug_html_chunked/ChAdvFollowTCPSection.html).</span><span class="sxs-lookup"><span data-stu-id="ef53c-822">For more information, see [Following TCP Streams](http://www.wireshark.org/docs/wsug_html_chunked/ChAdvFollowTCPSection.html).</span></span>

![][8]

> [!NOTE]
> <span data-ttu-id="ef53c-823">Para saber mais sobre como usar o Wireshark, veja o [Guia de Usuários do Wireshark](http://www.wireshark.org/docs/wsug_html_chunked).</span><span class="sxs-lookup"><span data-stu-id="ef53c-823">For more information about using Wireshark, see the [Wireshark Users Guide](http://www.wireshark.org/docs/wsug_html_chunked).</span></span>
> 
> 

### <span data-ttu-id="ef53c-824"><a name="appendix-3"></a>Anexo 3: Usando o Microsoft Message Analyzer para capturar o tráfego de rede</span><span class="sxs-lookup"><span data-stu-id="ef53c-824"><a name="appendix-3"></a>Appendix 3: Using Microsoft Message Analyzer to capture network traffic</span></span>
<span data-ttu-id="ef53c-825">Você pode usar o Microsoft Message Analyzer para capturar o tráfego HTTP e HTTPS de uma forma similar ao Fiddler e capturar o tráfego de rede de uma forma similar ao Wireshark.</span><span class="sxs-lookup"><span data-stu-id="ef53c-825">You can use Microsoft Message Analyzer to capture HTTP and HTTPS traffic in a similar way to Fiddler, and capture network traffic in a similar way to Wireshark.</span></span>

#### <a name="configure-a-web-tracing-session-using-microsoft-message-analyzer"></a><span data-ttu-id="ef53c-826">Configure a sessão de rastreamento Web usando o Microsoft Message Analyzer</span><span class="sxs-lookup"><span data-stu-id="ef53c-826">Configure a web tracing session using Microsoft Message Analyzer</span></span>
<span data-ttu-id="ef53c-827">Para configurar a sessão de rastreamento Web para tráfego HTTP e HTTPS usando o Microsoft Message Analyzer, execute o aplicativo Microsoft Message Analyzer e, no menu **Arquivo**, clique em **Capturar/Rastrear**.</span><span class="sxs-lookup"><span data-stu-id="ef53c-827">To configure a web tracing session for HTTP and HTTPS traffic using Microsoft Message Analyzer, run the Microsoft Message Analyzer application and then on the **File** menu, click **Capture/Trace**.</span></span> <span data-ttu-id="ef53c-828">Na lista de cenários de rastreamento disponíveis, selecione **Proxy da Web**.</span><span class="sxs-lookup"><span data-stu-id="ef53c-828">In the list of available trace scenarios, select **Web Proxy**.</span></span> <span data-ttu-id="ef53c-829">Em seguida, no painel **Rastrear Configuração de Cenário**, na caixa de texto **HostnameFilter**, adicione os nomes dos pontos de extremidade de armazenamento (você pode procurar esses nomes no [Portal do Azure](https://portal.azure.com)).</span><span class="sxs-lookup"><span data-stu-id="ef53c-829">Then in the **Trace Scenario Configuration** panel, in the **HostnameFilter** textbox, add the names of your storage endpoints (you can look up these names in the [Azure portal](https://portal.azure.com)).</span></span> <span data-ttu-id="ef53c-830">Por exemplo, se o nome da sua conta de armazenamento do Azure é **contosodata**, adicione a seguinte caixa de diálogo **HostnameFilter**:</span><span class="sxs-lookup"><span data-stu-id="ef53c-830">For example, if the name of your Azure storage account is **contosodata**, you should add the following to the **HostnameFilter** textbox:</span></span>

```
contosodata.blob.core.windows.net contosodata.table.core.windows.net contosodata.queue.core.windows.net
```

> [!NOTE]
> <span data-ttu-id="ef53c-831">Um caractere de espaço separa o nome de host.</span><span class="sxs-lookup"><span data-stu-id="ef53c-831">A space character separates the hostnames.</span></span>
> 
> 

<span data-ttu-id="ef53c-832">Quando você estiver pronto para coletar os dados de rastreamento, clique no botão **Iniciar Com** .</span><span class="sxs-lookup"><span data-stu-id="ef53c-832">When you are ready to start collecting trace data, click the **Start With** button.</span></span>

<span data-ttu-id="ef53c-833">Para saber mais sobre o rastreamento de **Proxy da Web** do Microsoft Message Analyzer, consulte [Provedor Microsoft-PEF-WebProxy](http://technet.microsoft.com/library/jj674814.aspx).</span><span class="sxs-lookup"><span data-stu-id="ef53c-833">For more information about the Microsoft Message Analyzer **Web Proxy** trace, see [Microsoft-PEF-WebProxy Provider](http://technet.microsoft.com/library/jj674814.aspx).</span></span>

<span data-ttu-id="ef53c-834">O rastreamento interno de **Proxy da Web** no Microsoft Message Analyzer é com base no Fiddler; ele pode capturar o tráfego do lado do cliente e exibir as mensagens HTTPS não criptografadas.</span><span class="sxs-lookup"><span data-stu-id="ef53c-834">The built-in **Web Proxy** trace in Microsoft Message Analyzer is based on Fiddler; it can capture client-side HTTPS traffic and display unencrypted HTTPS messages.</span></span> <span data-ttu-id="ef53c-835">O rastreamento **Proxy da Web** funciona ao configurar um proxy local para todo o tráfego HTTP e HTTPS que dá acesso às mensagens não criptografadas.</span><span class="sxs-lookup"><span data-stu-id="ef53c-835">The **Web Proxy** trace works by configuring a local proxy for all HTTP and HTTPS traffic that gives it access to unencrypted messages.</span></span>

#### <a name="diagnosing-network-issues-using-microsoft-message-analyzer"></a><span data-ttu-id="ef53c-836">Diagnóstico dos problemas de rede usando o Microsoft Message Analyzer</span><span class="sxs-lookup"><span data-stu-id="ef53c-836">Diagnosing network issues using Microsoft Message Analyzer</span></span>
<span data-ttu-id="ef53c-837">Além de usar o rastreamento de **Proxy da Web** do Microsoft Message Analyzer para capturar detalhes do tráfego HTTP/HTTPS entre o aplicativo do cliente e o serviço de armazenamento, você pode usar também o rastreamento interno **Camada de Link Local** para capturar as informações do pacote de rede.</span><span class="sxs-lookup"><span data-stu-id="ef53c-837">In addition to using the Microsoft Message Analyzer **Web Proxy** trace to capture details of the HTTP/HTTPs traffic between the client application and the storage service, you can also use the built-in **Local Link Layer** trace to capture network packet information.</span></span> <span data-ttu-id="ef53c-838">Isso permite que você capture os dados similares aos que você pode capturar com o Wireshark e que diagnostique os problemas de rede tal como os pacotes ignorados.</span><span class="sxs-lookup"><span data-stu-id="ef53c-838">This enables you to capture data similar to that which you can capture with Wireshark, and diagnose network issues such as dropped packets.</span></span>

<span data-ttu-id="ef53c-839">A seguinte captura de tela mostra um exemplo de rastreamento de **Camada de Link Local** com algumas mensagens **informativas** na coluna **DiagnosisTypes**.</span><span class="sxs-lookup"><span data-stu-id="ef53c-839">The following screenshot shows an example **Local Link Layer** trace with some **informational** messages in the **DiagnosisTypes** column.</span></span> <span data-ttu-id="ef53c-840">Clicar no ícone na coluna **DiagnosisTypes** mostra detalhes da mensagem.</span><span class="sxs-lookup"><span data-stu-id="ef53c-840">Clicking on an icon in the **DiagnosisTypes** column shows the details of the message.</span></span> <span data-ttu-id="ef53c-841">Neste exemplo, o servidor retransmitiu a mensagem nº 305 porque ele não recebeu uma confirmação do cliente:</span><span class="sxs-lookup"><span data-stu-id="ef53c-841">In this example, the server retransmitted message #305 because it did not receive an acknowledgement from the client:</span></span>

![][9]

<span data-ttu-id="ef53c-842">Quando você cria uma sessão de rastreamento no Microsoft Message Analyzer, é possível especificar filtros para reduzir a quantidade de ruídos no rastreamento.</span><span class="sxs-lookup"><span data-stu-id="ef53c-842">When you create the trace session in Microsoft Message Analyzer, you can specify filters to reduce the amount of noise in the trace.</span></span> <span data-ttu-id="ef53c-843">Na página **Capturar/Rastrear** na qual você define o rastreamento, clique no link **Configurar** próximo a **Microsoft-Windows-NDIS-PacketCapture**.</span><span class="sxs-lookup"><span data-stu-id="ef53c-843">On the **Capture / Trace** page where you define the trace, click on the **Configure** link next to **Microsoft-Windows-NDIS-PacketCapture**.</span></span> <span data-ttu-id="ef53c-844">A seguinte captura de tela mostra a configuração que filtra o tráfego TCP para os endereços de IP de três serviços de armazenamento:</span><span class="sxs-lookup"><span data-stu-id="ef53c-844">The following screenshot shows a configuration that filters TCP traffic for the IP addresses of three storage services:</span></span>

![][10]

<span data-ttu-id="ef53c-845">Para obter mais informações sobre o rastreamento de Camada de Link Local do Microsoft Message Analyzer, consulte [Provedor do Microsoft-PEF-NDIS-PacketCapture](http://technet.microsoft.com/library/jj659264.aspx).</span><span class="sxs-lookup"><span data-stu-id="ef53c-845">For more information about the Microsoft Message Analyzer Local Link Layer trace, see [Microsoft-PEF-NDIS-PacketCapture Provider](http://technet.microsoft.com/library/jj659264.aspx).</span></span>

### <span data-ttu-id="ef53c-846"><a name="appendix-4"></a>Anexo 4: Usando o Excel para exibir as métricas e os dados de log</span><span class="sxs-lookup"><span data-stu-id="ef53c-846"><a name="appendix-4"></a>Appendix 4: Using Excel to view metrics and log data</span></span>
<span data-ttu-id="ef53c-847">Muitas ferramentas permitem que você baixe os dados de métricas de armazenamento a partir do armazenamento de tabela do Azure em um formato delimitado que o torna fácil para se carregado no Excel para exibição e análise.</span><span class="sxs-lookup"><span data-stu-id="ef53c-847">Many tools enable you to download the Storage Metrics data from Azure table storage in a delimited format that makes it easy to load the data into Excel for viewing and analysis.</span></span> <span data-ttu-id="ef53c-848">Os dados de log de armazenamento do armazenamento de blob do Azure já estão em um formato delimitado que pode ser carregado no Excel.</span><span class="sxs-lookup"><span data-stu-id="ef53c-848">Storage Logging data from Azure blob storage is already in a delimited format that you can load into Excel.</span></span> <span data-ttu-id="ef53c-849">Entretanto, você precisará adicionar cabeçalhos apropriados às colunas com base na informação no [Formato de Log Analítico de Armazenamento](http://msdn.microsoft.com/library/azure/hh343259.aspx) e no [Esquema de Tabela de Métricas Analíticas de Armazenamento](http://msdn.microsoft.com/library/azure/hh343264.aspx).</span><span class="sxs-lookup"><span data-stu-id="ef53c-849">However, you will need to add appropriate column headings based in the information at [Storage Analytics Log Format](http://msdn.microsoft.com/library/azure/hh343259.aspx) and [Storage Analytics Metrics Table Schema](http://msdn.microsoft.com/library/azure/hh343264.aspx).</span></span>

<span data-ttu-id="ef53c-850">Para importar os dados de log de armazenamento para o Excel após ter baixado do armazenamento de blob:</span><span class="sxs-lookup"><span data-stu-id="ef53c-850">To import your Storage Logging data into Excel after you download it from blob storage:</span></span>

* <span data-ttu-id="ef53c-851">No menu **Dados**, clique em **Do Texto**.</span><span class="sxs-lookup"><span data-stu-id="ef53c-851">On the **Data** menu, click **From Text**.</span></span>
* <span data-ttu-id="ef53c-852">Procure o arquivo de log que deseja exibir e clique em **Importar**.</span><span class="sxs-lookup"><span data-stu-id="ef53c-852">Browse to the log file you want to view and click **Import**.</span></span>
* <span data-ttu-id="ef53c-853">Na etapa 1 do **Assistente de Importação de Texto**, selecione **Delimitado**.</span><span class="sxs-lookup"><span data-stu-id="ef53c-853">On step 1 of the **Text Import Wizard**, select **Delimited**.</span></span>

<span data-ttu-id="ef53c-854">Na etapa 1 do **Assistente de Importação de Texto**, selecione **Ponto e vírgula** como o único delimitador e escolha aspas duplas como **Qualificador de texto**.</span><span class="sxs-lookup"><span data-stu-id="ef53c-854">On step 1 of the **Text Import Wizard**, select **Semicolon** as the only delimiter and choose double-quote as the **Text qualifier**.</span></span> <span data-ttu-id="ef53c-855">Clique em **Concluir** e escolha onde colocar os dados na sua pasta de trabalho.</span><span class="sxs-lookup"><span data-stu-id="ef53c-855">Then click **Finish** and choose where to place the data in your workbook.</span></span>

### <span data-ttu-id="ef53c-856"><a name="appendix-5"></a>Anexo 5: Monitoramento com o Application Insights no Visual Studio Team Services</span><span class="sxs-lookup"><span data-stu-id="ef53c-856"><a name="appendix-5"></a>Appendix 5: Monitoring with Application Insights for Visual Studio Team Services</span></span>
<span data-ttu-id="ef53c-857">Você pode também usar o recurso Application Insights no Visual Studio Team Services como parte do seu monitoramento de desempenho e disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="ef53c-857">You can also use the Application Insights feature for Visual Studio Team Services as part of your performance and availability monitoring.</span></span> <span data-ttu-id="ef53c-858">Essa ferramenta pode:</span><span class="sxs-lookup"><span data-stu-id="ef53c-858">This tool can:</span></span>

* <span data-ttu-id="ef53c-859">Garantir que seu aplicativo da Web esteja disponível e respondendo.</span><span class="sxs-lookup"><span data-stu-id="ef53c-859">Make sure your web service is available and responsive.</span></span> <span data-ttu-id="ef53c-860">Se o seu aplicativo é um site ou um aplicativo de dispositivo que usa um serviço Web, você pode testar a sua URL a cada minuto de locais ao redor do mundo e ser avisado se houver um problema.</span><span class="sxs-lookup"><span data-stu-id="ef53c-860">Whether your app is a web site or a device app that uses a web service, it can test your URL every few minutes from locations around the world, and let you know if there's a problem.</span></span>
* <span data-ttu-id="ef53c-861">Diagnostique rapidamente qualquer problema de desempenho ou exceções no seu serviço da Web.</span><span class="sxs-lookup"><span data-stu-id="ef53c-861">Quickly diagnose any performance issues or exceptions in your web service.</span></span> <span data-ttu-id="ef53c-862">Descubra se a CPU ou outros recursos estão sendo alongados, receba rastreamento de linhas de exceções e pesquise facilmente pelos rastreamentos de log.</span><span class="sxs-lookup"><span data-stu-id="ef53c-862">Find out if CPU or other resources are being stretched, get stack traces from exceptions, and easily search through log traces.</span></span> <span data-ttu-id="ef53c-863">Se o desempenho do aplicativo cair abaixo dos limites aceitáveis, nós poderemos lhe enviar um email.</span><span class="sxs-lookup"><span data-stu-id="ef53c-863">If the app's performance drops below acceptable limits, we can send you an email.</span></span> <span data-ttu-id="ef53c-864">Você pode monitorar os serviços Web .NET e Java.</span><span class="sxs-lookup"><span data-stu-id="ef53c-864">You can monitor both .NET and Java web services.</span></span>

<span data-ttu-id="ef53c-865">Você pode encontrar mais informações em [O que é o Application Insights?](../application-insights/app-insights-overview.md).</span><span class="sxs-lookup"><span data-stu-id="ef53c-865">You can find more information at [What is Application Insights?](../application-insights/app-insights-overview.md).</span></span>

<!--Anchors-->
<span data-ttu-id="ef53c-866">[Introdução]: #introduction</span><span class="sxs-lookup"><span data-stu-id="ef53c-866">[Introduction]: #introduction</span></span>
<span data-ttu-id="ef53c-867">[Como esse guia está organizado]: #how-this-guide-is-organized</span><span class="sxs-lookup"><span data-stu-id="ef53c-867">[How this guide is organized]: #how-this-guide-is-organized</span></span>

<span data-ttu-id="ef53c-868">[Monitoramento do seu serviço de armazenamento]: #monitoring-your-storage-service</span><span class="sxs-lookup"><span data-stu-id="ef53c-868">[Monitoring your storage service]: #monitoring-your-storage-service</span></span>
<span data-ttu-id="ef53c-869">[Monitoramento da integridade do serviço]: #monitoring-service-health</span><span class="sxs-lookup"><span data-stu-id="ef53c-869">[Monitoring service health]: #monitoring-service-health</span></span>
<span data-ttu-id="ef53c-870">[Monitoramento de capacidade]: #monitoring-capacity</span><span class="sxs-lookup"><span data-stu-id="ef53c-870">[Monitoring capacity]: #monitoring-capacity</span></span>
<span data-ttu-id="ef53c-871">[Monitoramento de disponibilidade]: #monitoring-availability</span><span class="sxs-lookup"><span data-stu-id="ef53c-871">[Monitoring availability]: #monitoring-availability</span></span>
<span data-ttu-id="ef53c-872">[Monitoramento de desempenho]: #monitoring-performance</span><span class="sxs-lookup"><span data-stu-id="ef53c-872">[Monitoring performance]: #monitoring-performance</span></span>

<span data-ttu-id="ef53c-873">[Diagnóstico de problemas de armazenamento]: #diagnosing-storage-issues</span><span class="sxs-lookup"><span data-stu-id="ef53c-873">[Diagnosing storage issues]: #diagnosing-storage-issues</span></span>
<span data-ttu-id="ef53c-874">[Problemas de integridade do serviço]: #service-health-issues</span><span class="sxs-lookup"><span data-stu-id="ef53c-874">[Service health issues]: #service-health-issues</span></span>
<span data-ttu-id="ef53c-875">[Problemas de desempenho]: #performance-issues</span><span class="sxs-lookup"><span data-stu-id="ef53c-875">[Performance issues]: #performance-issues</span></span>
<span data-ttu-id="ef53c-876">[Diagnóstico de erros]: #diagnosing-errors</span><span class="sxs-lookup"><span data-stu-id="ef53c-876">[Diagnosing errors]: #diagnosing-errors</span></span>
<span data-ttu-id="ef53c-877">[Problemas de emulador de armazenamento]: #storage-emulator-issues</span><span class="sxs-lookup"><span data-stu-id="ef53c-877">[Storage emulator issues]: #storage-emulator-issues</span></span>
<span data-ttu-id="ef53c-878">[Ferramentas de log de armazenamento]: #storage-logging-tools</span><span class="sxs-lookup"><span data-stu-id="ef53c-878">[Storage logging tools]: #storage-logging-tools</span></span>
<span data-ttu-id="ef53c-879">[Uso de ferramentas de log de rede]: #using-network-logging-tools</span><span class="sxs-lookup"><span data-stu-id="ef53c-879">[Using network logging tools]: #using-network-logging-tools</span></span>

<span data-ttu-id="ef53c-880">[Rastreamento de ponta a ponta]: #end-to-end-tracing</span><span class="sxs-lookup"><span data-stu-id="ef53c-880">[End-to-end tracing]: #end-to-end-tracing</span></span>
<span data-ttu-id="ef53c-881">[Correlacionamento de dados de log]: #correlating-log-data</span><span class="sxs-lookup"><span data-stu-id="ef53c-881">[Correlating log data]: #correlating-log-data</span></span>
<span data-ttu-id="ef53c-882">[ID de solicitação do cliente]: #client-request-id</span><span class="sxs-lookup"><span data-stu-id="ef53c-882">[Client request ID]: #client-request-id</span></span>
<span data-ttu-id="ef53c-883">[ID de solicitação do servidor]: #server-request-id</span><span class="sxs-lookup"><span data-stu-id="ef53c-883">[Server request ID]: #server-request-id</span></span>
<span data-ttu-id="ef53c-884">[Carimbos de data/hora]: #timestamps</span><span class="sxs-lookup"><span data-stu-id="ef53c-884">[Timestamps]: #timestamps</span></span>

<span data-ttu-id="ef53c-885">[Diretrizes para solução de problemas]: #troubleshooting-guidance</span><span class="sxs-lookup"><span data-stu-id="ef53c-885">[Troubleshooting guidance]: #troubleshooting-guidance</span></span>
<span data-ttu-id="ef53c-886">[As métricas mostram alta AverageE2ELatency e baixa AverageServerLatency]: #metrics-show-high-AverageE2ELatency-and-low-AverageServerLatency</span><span class="sxs-lookup"><span data-stu-id="ef53c-886">[Metrics show high AverageE2ELatency and low AverageServerLatency]: #metrics-show-high-AverageE2ELatency-and-low-AverageServerLatency</span></span>
<span data-ttu-id="ef53c-887">[As métricas mostram baixa AverageE2ELatency e baixa AverageServerLatency, mas o cliente está recebendo uma latência alta]: #metrics-show-low-AverageE2ELatency-and-low-AverageServerLatency</span><span class="sxs-lookup"><span data-stu-id="ef53c-887">[Metrics show low AverageE2ELatency and low AverageServerLatency but the client is experiencing high latency]: #metrics-show-low-AverageE2ELatency-and-low-AverageServerLatency</span></span>
<span data-ttu-id="ef53c-888">[As métricas mostram alta AverageServerLatency]: #metrics-show-high-AverageServerLatency</span><span class="sxs-lookup"><span data-stu-id="ef53c-888">[Metrics show high AverageServerLatency]: #metrics-show-high-AverageServerLatency</span></span>
<span data-ttu-id="ef53c-889">[Você está sofrendo atrasos inesperados na entrega de mensagens na fila]: #you-are-experiencing-unexpected-delays-in-message-delivery</span><span class="sxs-lookup"><span data-stu-id="ef53c-889">[You are experiencing unexpected delays in message delivery on a queue]: #you-are-experiencing-unexpected-delays-in-message-delivery</span></span>

<span data-ttu-id="ef53c-890">[As métricas mostram um aumento em PercentThrottlingError]: #metrics-show-an-increase-in-PercentThrottlingError</span><span class="sxs-lookup"><span data-stu-id="ef53c-890">[Metrics show an increase in PercentThrottlingError]: #metrics-show-an-increase-in-PercentThrottlingError</span></span>
<span data-ttu-id="ef53c-891">[Aumento transitório em PercentThrottlingError]: #transient-increase-in-PercentThrottlingError</span><span class="sxs-lookup"><span data-stu-id="ef53c-891">[Transient increase in PercentThrottlingError]: #transient-increase-in-PercentThrottlingError</span></span>
<span data-ttu-id="ef53c-892">[Aumento permanente em erro de PercentThrottlingError]: #permanent-increase-in-PercentThrottlingError</span><span class="sxs-lookup"><span data-stu-id="ef53c-892">[Permanent increase in PercentThrottlingError error]: #permanent-increase-in-PercentThrottlingError</span></span>
<span data-ttu-id="ef53c-893">[As métricas mostram um aumento em PercentTimeoutError]: #metrics-show-an-increase-in-PercentTimeoutError</span><span class="sxs-lookup"><span data-stu-id="ef53c-893">[Metrics show an increase in PercentTimeoutError]: #metrics-show-an-increase-in-PercentTimeoutError</span></span>
<span data-ttu-id="ef53c-894">[As métricas mostram um aumento em PercentNetworkError]: #metrics-show-an-increase-in-PercentNetworkError</span><span class="sxs-lookup"><span data-stu-id="ef53c-894">[Metrics show an increase in PercentNetworkError]: #metrics-show-an-increase-in-PercentNetworkError</span></span>

<span data-ttu-id="ef53c-895">[O cliente está recebendo mensagens HTTP 403 (Proibido)]: #the-client-is-receiving-403-messages</span><span class="sxs-lookup"><span data-stu-id="ef53c-895">[The client is receiving HTTP 403 (Forbidden) messages]: #the-client-is-receiving-403-messages</span></span>
<span data-ttu-id="ef53c-896">[O cliente está recebendo mensagens HTTP 404 (Não encontrado)]: #the-client-is-receiving-404-messages</span><span class="sxs-lookup"><span data-stu-id="ef53c-896">[The client is receiving HTTP 404 (Not found) messages]: #the-client-is-receiving-404-messages</span></span>
<span data-ttu-id="ef53c-897">[O cliente ou outro processo excluiu anteriormente o objeto]: #client-previously-deleted-the-object</span><span class="sxs-lookup"><span data-stu-id="ef53c-897">[The client or another process previously deleted the object]: #client-previously-deleted-the-object</span></span>
<span data-ttu-id="ef53c-898">[Um problema de autorização de assinatura de acesso compartilhado (SAS)]: #SAS-authorization-issue</span><span class="sxs-lookup"><span data-stu-id="ef53c-898">[A Shared Access Signature (SAS) authorization issue]: #SAS-authorization-issue</span></span>
<span data-ttu-id="ef53c-899">[O código JavaScript do lado do cliente não tem permissão para acessar o objeto]: #JavaScript-code-does-not-have-permission</span><span class="sxs-lookup"><span data-stu-id="ef53c-899">[Client-side JavaScript code does not have permission to access the object]: #JavaScript-code-does-not-have-permission</span></span>
<span data-ttu-id="ef53c-900">[Falha de rede]: #network-failure</span><span class="sxs-lookup"><span data-stu-id="ef53c-900">[Network failure]: #network-failure</span></span>
<span data-ttu-id="ef53c-901">[O cliente está recebendo mensagens HTTP 409 (Conflito)]: #the-client-is-receiving-409-messages</span><span class="sxs-lookup"><span data-stu-id="ef53c-901">[The client is receiving HTTP 409 (Conflict) messages]: #the-client-is-receiving-409-messages</span></span>

<span data-ttu-id="ef53c-902">[As métricas mostram uma baixa PercentSuccess ou as entradas de log analíticas têm operações com status de transação de ClientOtherErrors]: #metrics-show-low-percent-success</span><span class="sxs-lookup"><span data-stu-id="ef53c-902">[Metrics show low PercentSuccess or analytics log entries have operations with transaction status of ClientOtherErrors]: #metrics-show-low-percent-success</span></span>
<span data-ttu-id="ef53c-903">[As métricas de capacidade mostram um aumento inesperado em uso de capacidade de armazenamento]: #capacity-metrics-show-an-unexpected-increase</span><span class="sxs-lookup"><span data-stu-id="ef53c-903">[Capacity metrics show an unexpected increase in storage capacity usage]: #capacity-metrics-show-an-unexpected-increase</span></span>
<span data-ttu-id="ef53c-904">[Você está enfrentando reinicializações inesperadas das máquinas virtuais que contêm um grande número de VHDs anexados]: #you-are-experiencing-unexpected-reboots</span><span class="sxs-lookup"><span data-stu-id="ef53c-904">[You are experiencing unexpected reboots of Virtual Machines that have a large number of attached VHDs]: #you-are-experiencing-unexpected-reboots</span></span>
<span data-ttu-id="ef53c-905">[Seu problema apareceu por usar o emulador de armazenamento para desenvolvimento ou teste]: #your-issue-arises-from-using-the-storage-emulator</span><span class="sxs-lookup"><span data-stu-id="ef53c-905">[Your issue arises from using the storage emulator for development or test]: #your-issue-arises-from-using-the-storage-emulator</span></span>
<span data-ttu-id="ef53c-906">[O recurso "X” não está funcionando no emulador de armazenamento]: #feature-X-is-not-working</span><span class="sxs-lookup"><span data-stu-id="ef53c-906">[Feature "X" is not working in the storage emulator]: #feature-X-is-not-working</span></span>
<span data-ttu-id="ef53c-907">[Erro "O valor de um dos cabeçalhos HTTP não está no formato correto" ao usar o emulador de armazenamento]: #error-HTTP-header-not-correct-format</span><span class="sxs-lookup"><span data-stu-id="ef53c-907">[Error "The value for one of the HTTP headers is not in the correct format" when using the storage emulator]: #error-HTTP-header-not-correct-format</span></span>
<span data-ttu-id="ef53c-908">[A execução do emulador de armazenamento requer privilégios administrativos]: #storage-emulator-requires-administrative-privileges</span><span class="sxs-lookup"><span data-stu-id="ef53c-908">[Running the storage emulator requires administrative privileges]: #storage-emulator-requires-administrative-privileges</span></span>
<span data-ttu-id="ef53c-909">[Você encontrou problemas ao instalar o SDK do Azure para .NET]: #you-are-encountering-problems-installing-the-Windows-Azure-SDK</span><span class="sxs-lookup"><span data-stu-id="ef53c-909">[You are encountering problems installing the Azure SDK for .NET]: #you-are-encountering-problems-installing-the-Windows-Azure-SDK</span></span>
<span data-ttu-id="ef53c-910">[Você tem um problema diferente com um serviço de armazenamento]: #you-have-a-different-issue-with-a-storage-service</span><span class="sxs-lookup"><span data-stu-id="ef53c-910">[You have a different issue with a storage service]: #you-have-a-different-issue-with-a-storage-service</span></span>

<span data-ttu-id="ef53c-911">[Anexos]: #appendices</span><span class="sxs-lookup"><span data-stu-id="ef53c-911">[Appendices]: #appendices</span></span>
<span data-ttu-id="ef53c-912">[Anexo 1: Usando o Fiddler para capturar o tráfego HTTP e HTTPS]: #appendix-1</span><span class="sxs-lookup"><span data-stu-id="ef53c-912">[Appendix 1: Using Fiddler to capture HTTP and HTTPS traffic]: #appendix-1</span></span>
<span data-ttu-id="ef53c-913">[Anexo 2: Usando o Wireshark para capturar o tráfego de rede]: #appendix-2</span><span class="sxs-lookup"><span data-stu-id="ef53c-913">[Appendix 2: Using Wireshark to capture network traffic]: #appendix-2</span></span>
<span data-ttu-id="ef53c-914">[Anexo 3: Usando o Microsoft Message Analyzer para capturar o tráfego de rede]: #appendix-3</span><span class="sxs-lookup"><span data-stu-id="ef53c-914">[Appendix 3: Using Microsoft Message Analyzer to capture network traffic]: #appendix-3</span></span>
<span data-ttu-id="ef53c-915">[Anexo 4: Usando o Excel para exibir as métricas e os dados de log]: #appendix-4</span><span class="sxs-lookup"><span data-stu-id="ef53c-915">[Appendix 4: Using Excel to view metrics and log data]: #appendix-4</span></span>
<span data-ttu-id="ef53c-916">[Anexo 5: Monitoramento com o Application Insights no Visual Studio Team Services]: #appendix-5</span><span class="sxs-lookup"><span data-stu-id="ef53c-916">[Appendix 5: Monitoring with Application Insights for Visual Studio Team Services]: #appendix-5</span></span>

<!--Image references-->
[1]: ./media/storage-monitoring-diagnosing-troubleshooting/overview.png
[3]: ./media/storage-monitoring-diagnosing-troubleshooting/hour-minute-metrics.png
[4]: ./media/storage-monitoring-diagnosing-troubleshooting/high-e2e-latency.png
[5]: ./media/storage-monitoring-diagnosing-troubleshooting/fiddler-screenshot.png
[6]: ./media/storage-monitoring-diagnosing-troubleshooting/wireshark-screenshot-1.png
[7]: ./media/storage-monitoring-diagnosing-troubleshooting/wireshark-screenshot-2.png
[8]: ./media/storage-monitoring-diagnosing-troubleshooting/wireshark-screenshot-3.png
[9]: ./media/storage-monitoring-diagnosing-troubleshooting/mma-screenshot-1.png
[10]: ./media/storage-monitoring-diagnosing-troubleshooting/mma-screenshot-2.png
