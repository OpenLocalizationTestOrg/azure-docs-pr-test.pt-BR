---
title: "Usar a Análise de Armazenamento do Azure para coletar dados de logs e métricas | Microsoft Docs"
description: "A Análise de Armazenamento permite que você para acompanhe dados de métricas de todos os serviços de armazenamento e para coletar logs para o armazenamento de Tabelas, Blobs e Filas."
services: storage
documentationcenter: 
author: robinsh
manager: timlt
editor: tysonn
ms.assetid: 7894993b-ca42-4125-8f17-8f6dfe3dca76
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 03/03/2017
ms.author: robinsh
ms.openlocfilehash: a477c1eaf2388f31d4fd36b90f9a830c782873d3
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/29/2017
---
# <a name="storage-analytics"></a><span data-ttu-id="4720e-103">Análise de Armazenamento</span><span class="sxs-lookup"><span data-stu-id="4720e-103">Storage Analytics</span></span>

<span data-ttu-id="4720e-104">A análise de armazenamento do Azure executa registro em log e fornece dados de métrica para uma conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="4720e-104">Azure Storage Analytics performs logging and provides metrics data for a storage account.</span></span> <span data-ttu-id="4720e-105">Você pode usar esses dados para rastrear solicitações, analisar tendências de uso e diagnosticar problemas com sua conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="4720e-105">You can use this data to trace requests, analyze usage trends, and diagnose issues with your storage account.</span></span>

<span data-ttu-id="4720e-106">Para usar a análise de armazenamento, você deve habilitá-la separadamente para cada serviço que você deseja monitorar.</span><span class="sxs-lookup"><span data-stu-id="4720e-106">To use Storage Analytics, you must enable it individually for each service you want to monitor.</span></span> <span data-ttu-id="4720e-107">Você pode habilitá-la no [portal do Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="4720e-107">You can enable it from the [Azure Portal](https://portal.azure.com).</span></span> <span data-ttu-id="4720e-108">Para obter detalhes, consulte [Monitorar uma conta de armazenamento no Portal do Azure](storage-monitor-storage-account.md).</span><span class="sxs-lookup"><span data-stu-id="4720e-108">For details, see [Monitor a storage account in the Azure Portal](storage-monitor-storage-account.md).</span></span> <span data-ttu-id="4720e-109">Você também pode habilitar a análise de armazenamento programaticamente por meio da API REST ou da biblioteca de cliente.</span><span class="sxs-lookup"><span data-stu-id="4720e-109">You can also enable Storage Analytics programmatically via the REST API or the client library.</span></span> <span data-ttu-id="4720e-110">Use as operações [Obter propriedades do serviço Blob](https://msdn.microsoft.com/library/hh452239.aspx), [Obter propriedades do serviço Fila](https://msdn.microsoft.com/library/hh452243.aspx), [Obter propriedades do serviço Tabela](https://msdn.microsoft.com/library/hh452238.aspx) e [Obter propriedades do serviço Arquivo](https://msdn.microsoft.com/library/mt427369.aspx) para habilitar a Análise de Armazenamento para cada serviço.</span><span class="sxs-lookup"><span data-stu-id="4720e-110">Use the [Get Blob Service Properties](https://msdn.microsoft.com/library/hh452239.aspx), [Get Queue Service Properties](https://msdn.microsoft.com/library/hh452243.aspx), [Get Table Service Properties](https://msdn.microsoft.com/library/hh452238.aspx), and [Get File Service Properties](https://msdn.microsoft.com/library/mt427369.aspx) operations to enable Storage Analytics for each service.</span></span>

<span data-ttu-id="4720e-111">Os dados agregados são armazenados em um blob conhecido (para registro em log) e em tabelas conhecidas (para métricas), que podem ser acessados usando os serviços de Blob e APIs do serviço de tabela</span><span class="sxs-lookup"><span data-stu-id="4720e-111">The aggregated data is stored in a well-known blob (for logging) and in well-known tables (for metrics), which may be accessed using the Blob service and Table service APIs.</span></span>

<span data-ttu-id="4720e-112">A Análise de Armazenamento tem um limite de 20 TB na quantidade de dados armazenados que é independente do limite total para sua conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="4720e-112">Storage Analytics has a 20 TB limit on the amount of stored data that is independent of the total limit for your storage account.</span></span> <span data-ttu-id="4720e-113">Para saber mais sobre cobrança e políticas de retenção de dados, consulte [Análise de armazenamento e cobrança](https://msdn.microsoft.com/library/hh360997.aspx).</span><span class="sxs-lookup"><span data-stu-id="4720e-113">For more information about billing and data retention policies, see [Storage Analytics and Billing](https://msdn.microsoft.com/library/hh360997.aspx).</span></span> <span data-ttu-id="4720e-114">Para saber mais sobre limites de contas de armazenamento, consulte [Escalabilidade e metas de desempenho do armazenamento do Azure](storage-scalability-targets.md).</span><span class="sxs-lookup"><span data-stu-id="4720e-114">For more information about storage account limits, see [Azure Storage Scalability and Performance Targets](storage-scalability-targets.md).</span></span>

<span data-ttu-id="4720e-115">Para um guia aprofundado sobre como usar a Análise de Armazenamento e outras ferramentas para identificar, diagnosticar e solucionar problemas relacionados ao Armazenamento do Azure, consulte [Monitorar, diagnosticar e solucionar problemas do Armazenamento do Microsoft Azure](storage-monitoring-diagnosing-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="4720e-115">For an in-depth guide on using Storage Analytics and other tools to identify, diagnose, and troubleshoot Azure Storage-related issues, see [Monitor, diagnose, and troubleshoot Microsoft Azure Storage](storage-monitoring-diagnosing-troubleshooting.md).</span></span>

## <a name="about-storage-analytics-logging"></a><span data-ttu-id="4720e-116">Sobre o registro em log da Análise de Armazenamento</span><span class="sxs-lookup"><span data-stu-id="4720e-116">About Storage Analytics logging</span></span>
<span data-ttu-id="4720e-117">A análise de armazenamento registra informações detalhadas sobre solicitações bem-sucedidas e com falha para um serviço de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="4720e-117">Storage Analytics logs detailed information about successful and failed requests to a storage service.</span></span> <span data-ttu-id="4720e-118">Essas informações podem ser usadas para monitorar solicitações individuais e diagnosticar problemas com um serviço de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="4720e-118">This information can be used to monitor individual requests and to diagnose issues with a storage service.</span></span> <span data-ttu-id="4720e-119">As solicitações são registradas em uma base de melhor esforço.</span><span class="sxs-lookup"><span data-stu-id="4720e-119">Requests are logged on a best-effort basis.</span></span>

<span data-ttu-id="4720e-120">As entradas de log são criadas somente se houver atividade de serviço de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="4720e-120">Log entries are created only if there is storage service activity.</span></span> <span data-ttu-id="4720e-121">Por exemplo, se uma conta de armazenamento tiver atividade em seu serviço Blob, mas não em seus serviços de fila ou tabela, somente os logs referentes ao serviço Blob serão criados.</span><span class="sxs-lookup"><span data-stu-id="4720e-121">For example, if a storage account has activity in its Blob service but not in its Table or Queue services, only logs pertaining to the Blob service will be created.</span></span>

<span data-ttu-id="4720e-122">O Log de Análise de Armazenamento não está disponível para o Armazenamento de Arquivos do Azure.</span><span class="sxs-lookup"><span data-stu-id="4720e-122">Storage Analytics Logging is not available for Azure File storage.</span></span>

### <a name="logging-authenticated-requests"></a><span data-ttu-id="4720e-123">Solicitações de registro em log autenticadas</span><span class="sxs-lookup"><span data-stu-id="4720e-123">Logging authenticated requests</span></span>
<span data-ttu-id="4720e-124">Os seguintes tipos de solicitações autenticadas são registrados:</span><span class="sxs-lookup"><span data-stu-id="4720e-124">The following types of authenticated requests are logged:</span></span>

* <span data-ttu-id="4720e-125">Solicitações bem sucedidas.</span><span class="sxs-lookup"><span data-stu-id="4720e-125">Successful requests.</span></span>
* <span data-ttu-id="4720e-126">Solicitações com falha, incluindo o tempo limite, limitação, rede, autorização e outros erros.</span><span class="sxs-lookup"><span data-stu-id="4720e-126">Failed requests, including timeout, throttling, network, authorization, and other errors.</span></span>
* <span data-ttu-id="4720e-127">Solicitações que usam uma SAS (Assinatura de Acesso Compartilhado), incluindo solicitações bem-sucedidas e com falha.</span><span class="sxs-lookup"><span data-stu-id="4720e-127">Requests using a Shared Access Signature (SAS), including failed and successful requests.</span></span>
* <span data-ttu-id="4720e-128">Solicitações para dados de análise.</span><span class="sxs-lookup"><span data-stu-id="4720e-128">Requests to analytics data.</span></span>

<span data-ttu-id="4720e-129">As solicitações feitas pela própria análise de armazenamento, como criação de log ou exclusão, não estão conectadas.</span><span class="sxs-lookup"><span data-stu-id="4720e-129">Requests made by Storage Analytics itself, such as log creation or deletion, are not logged.</span></span> <span data-ttu-id="4720e-130">Uma lista completa dos dados registrados está documentada nos tópicos [Storage Analytics Logged Operations and Status Messages](https://msdn.microsoft.com/library/hh343260.aspx) (Mensagens de operações e status registradas do Storage Analytics) e [Storage Analytics Log Format](https://msdn.microsoft.com/library/hh343259.aspx) (Formato do log do Storage Analytics).</span><span class="sxs-lookup"><span data-stu-id="4720e-130">A full list of the logged data is documented in the [Storage Analytics Logged Operations and Status Messages](https://msdn.microsoft.com/library/hh343260.aspx) and [Storage Analytics Log Format](https://msdn.microsoft.com/library/hh343259.aspx) topics.</span></span>

### <a name="logging-anonymous-requests"></a><span data-ttu-id="4720e-131">Registro em log de solicitações anônimas</span><span class="sxs-lookup"><span data-stu-id="4720e-131">Logging anonymous requests</span></span>
<span data-ttu-id="4720e-132">Os seguintes tipos de solicitações anônimas são registrados:</span><span class="sxs-lookup"><span data-stu-id="4720e-132">The following types of anonymous requests are logged:</span></span>

* <span data-ttu-id="4720e-133">Solicitações bem sucedidas.</span><span class="sxs-lookup"><span data-stu-id="4720e-133">Successful requests.</span></span>
* <span data-ttu-id="4720e-134">Erros do servidor.</span><span class="sxs-lookup"><span data-stu-id="4720e-134">Server errors.</span></span>
* <span data-ttu-id="4720e-135">Erros de tempo limite para o cliente e servidor.</span><span class="sxs-lookup"><span data-stu-id="4720e-135">Timeout errors for both client and server.</span></span>
* <span data-ttu-id="4720e-136">Solicitações GET com falha com o código de erro 304 (não modificado).</span><span class="sxs-lookup"><span data-stu-id="4720e-136">Failed GET requests with error code 304 (Not Modified).</span></span>

<span data-ttu-id="4720e-137">Todas as outras solicitações anônimas com falha não estão conectadas.</span><span class="sxs-lookup"><span data-stu-id="4720e-137">All other failed anonymous requests are not logged.</span></span> <span data-ttu-id="4720e-138">Uma lista completa dos dados registrados está documentada nos tópicos [Storage Analytics Logged Operations and Status Messages](https://msdn.microsoft.com/library/hh343260.aspx) (Mensagens de operações e status registradas do Storage Analytics) e [Storage Analytics Log Format](https://msdn.microsoft.com/library/hh343259.aspx) (Formato do log do Storage Analytics).</span><span class="sxs-lookup"><span data-stu-id="4720e-138">A full list of the logged data is documented in the [Storage Analytics Logged Operations and Status Messages](https://msdn.microsoft.com/library/hh343260.aspx) and [Storage Analytics Log Format](https://msdn.microsoft.com/library/hh343259.aspx) topics.</span></span>

### <a name="how-logs-are-stored"></a><span data-ttu-id="4720e-139">Como os logs são armazenados</span><span class="sxs-lookup"><span data-stu-id="4720e-139">How logs are stored</span></span>
<span data-ttu-id="4720e-140">Todos os logs são armazenados em blobs de bloco em um contêiner denominado $logs, que é criado automaticamente quando a análise de armazenamento é habilitada para uma conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="4720e-140">All logs are stored in block blobs in a container named $logs, which is automatically created when Storage Analytics is enabled for a storage account.</span></span> <span data-ttu-id="4720e-141">O contêiner $logs está localizado no namespace de blob da conta de armazenamento, por exemplo: `http://<accountname>.blob.core.windows.net/$logs`.</span><span class="sxs-lookup"><span data-stu-id="4720e-141">The $logs container is located in the blob namespace of the storage account, for example: `http://<accountname>.blob.core.windows.net/$logs`.</span></span> <span data-ttu-id="4720e-142">Este contêiner não pode ser excluído quando a análise de armazenamento tiver sido habilitada, embora seu conteúdo possa ser excluído.</span><span class="sxs-lookup"><span data-stu-id="4720e-142">This container cannot be deleted once Storage Analytics has been enabled, though its contents can be deleted.</span></span>

> [!NOTE]
> <span data-ttu-id="4720e-143">O contêiner de $logs não é exibido quando uma operação de listagem do contêiner é executada, como o método [ListContainers](https://msdn.microsoft.com/library/azure/dd179352.aspx) .</span><span class="sxs-lookup"><span data-stu-id="4720e-143">The $logs container is not displayed when a container listing operation is performed, such as the [ListContainers](https://msdn.microsoft.com/library/azure/dd179352.aspx) method.</span></span> <span data-ttu-id="4720e-144">Ele deve ser acessado diretamente.</span><span class="sxs-lookup"><span data-stu-id="4720e-144">It must be accessed directly.</span></span> <span data-ttu-id="4720e-145">Por exemplo, você pode usar o método [ListBlobs](https://msdn.microsoft.com/library/azure/dd135734.aspx) para acessar os blobs no contêiner `$logs`.</span><span class="sxs-lookup"><span data-stu-id="4720e-145">For example, you can use the [ListBlobs](https://msdn.microsoft.com/library/azure/dd135734.aspx) method to access the blobs in the `$logs` container.</span></span>
> <span data-ttu-id="4720e-146">Como as solicitações são registradas, a análise de armazenamento carrega resultados intermediários como blocos.</span><span class="sxs-lookup"><span data-stu-id="4720e-146">As requests are logged, Storage Analytics will upload intermediate results as blocks.</span></span> <span data-ttu-id="4720e-147">Periodicamente, a análise de armazenamento confirmará esses blocos e os disponibilizará como um blob.</span><span class="sxs-lookup"><span data-stu-id="4720e-147">Periodically, Storage Analytics will commit these blocks and make them available as a blob.</span></span>
> 
> 

<span data-ttu-id="4720e-148">Podem existir registros duplicados para os logs criados na mesma hora.</span><span class="sxs-lookup"><span data-stu-id="4720e-148">Duplicate records may exist for logs created in the same hour.</span></span> <span data-ttu-id="4720e-149">Você pode determinar se um registro é uma duplicata verificando **RequestId** e o número da **Operação**.</span><span class="sxs-lookup"><span data-stu-id="4720e-149">You can determine if a record is a duplicate by checking the **RequestId** and **Operation** number.</span></span>

### <a name="log-naming-conventions"></a><span data-ttu-id="4720e-150">Convenções de nomenclatura de log</span><span class="sxs-lookup"><span data-stu-id="4720e-150">Log naming conventions</span></span>
<span data-ttu-id="4720e-151">Cada log será gravado no formato a seguir.</span><span class="sxs-lookup"><span data-stu-id="4720e-151">Each log will be written in the following format.</span></span>

    <service-name>/YYYY/MM/DD/hhmm/<counter>.log

<span data-ttu-id="4720e-152">A tabela a seguir descreve cada atributo no nome do log.</span><span class="sxs-lookup"><span data-stu-id="4720e-152">The following table describes each attribute in the log name.</span></span>

| <span data-ttu-id="4720e-153">Atributo</span><span class="sxs-lookup"><span data-stu-id="4720e-153">Attribute</span></span> | <span data-ttu-id="4720e-154">Descrição</span><span class="sxs-lookup"><span data-stu-id="4720e-154">Description</span></span> |
| --- | --- |
| <span data-ttu-id="4720e-155"><service-name></span><span class="sxs-lookup"><span data-stu-id="4720e-155"><service-name></span></span> |<span data-ttu-id="4720e-156">O nome do serviço de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="4720e-156">The name of the storage service.</span></span> <span data-ttu-id="4720e-157">Por exemplo: blob, tabela ou fila.</span><span class="sxs-lookup"><span data-stu-id="4720e-157">For example: blob, table, or queue.</span></span> |
| <span data-ttu-id="4720e-158">AAAA</span><span class="sxs-lookup"><span data-stu-id="4720e-158">YYYY</span></span> |<span data-ttu-id="4720e-159">O ano de quatro dígitos para o log.</span><span class="sxs-lookup"><span data-stu-id="4720e-159">The four-digit year for the log.</span></span> <span data-ttu-id="4720e-160">Por exemplo: 2011.</span><span class="sxs-lookup"><span data-stu-id="4720e-160">For example: 2011.</span></span> |
| <span data-ttu-id="4720e-161">MM</span><span class="sxs-lookup"><span data-stu-id="4720e-161">MM</span></span> |<span data-ttu-id="4720e-162">O mês de dois dígitos do log.</span><span class="sxs-lookup"><span data-stu-id="4720e-162">The two-digit month for the log.</span></span> <span data-ttu-id="4720e-163">Por exemplo: 07.</span><span class="sxs-lookup"><span data-stu-id="4720e-163">For example: 07.</span></span> |
| <span data-ttu-id="4720e-164">DD</span><span class="sxs-lookup"><span data-stu-id="4720e-164">DD</span></span> |<span data-ttu-id="4720e-165">O mês de dois dígitos do log.</span><span class="sxs-lookup"><span data-stu-id="4720e-165">The two-digit month for the log.</span></span> <span data-ttu-id="4720e-166">Por exemplo: 07.</span><span class="sxs-lookup"><span data-stu-id="4720e-166">For example: 07.</span></span> |
| <span data-ttu-id="4720e-167">hh</span><span class="sxs-lookup"><span data-stu-id="4720e-167">hh</span></span> |<span data-ttu-id="4720e-168">A hora de dois dígitos que indica a hora inicial dos logs, no formato de 24 horas UTC.</span><span class="sxs-lookup"><span data-stu-id="4720e-168">The two-digit hour that indicates the starting hour for the logs, in 24-hour UTC format.</span></span> <span data-ttu-id="4720e-169">Por exemplo: 18.</span><span class="sxs-lookup"><span data-stu-id="4720e-169">For example: 18.</span></span> |
| <span data-ttu-id="4720e-170">MM</span><span class="sxs-lookup"><span data-stu-id="4720e-170">mm</span></span> |<span data-ttu-id="4720e-171">O número de dois dígitos que indica o minuto inicial dos logs.</span><span class="sxs-lookup"><span data-stu-id="4720e-171">The two-digit number that indicates the starting minute for the logs.</span></span> <span data-ttu-id="4720e-172">Esse valor não tem suporte na versão atual da análise de armazenamento e seu valor será sempre 00.</span><span class="sxs-lookup"><span data-stu-id="4720e-172">This value is unsupported in the current version of Storage Analytics, and its value will always be 00.</span></span> |
| <counter> |<span data-ttu-id="4720e-173">Um contador baseado em zero com seis dígitos que indica o número de blobs de log gerado para o serviço de armazenamento em um período de uma hora.</span><span class="sxs-lookup"><span data-stu-id="4720e-173">A zero-based counter with six digits that indicates the number of log blobs generated for the storage service in an hour time period.</span></span> <span data-ttu-id="4720e-174">Esse contador começa em 000000.</span><span class="sxs-lookup"><span data-stu-id="4720e-174">This counter starts at 000000.</span></span> <span data-ttu-id="4720e-175">Por exemplo: 000001.</span><span class="sxs-lookup"><span data-stu-id="4720e-175">For example: 000001.</span></span> |

<span data-ttu-id="4720e-176">Veja a seguir um exemplo de nome de log completo que combina os exemplos anteriores.</span><span class="sxs-lookup"><span data-stu-id="4720e-176">The following is a complete sample log name that combines the previous examples.</span></span>

    blob/2011/07/31/1800/000001.log

<span data-ttu-id="4720e-177">Veja a seguir um exemplo de URI que pode ser usado para acessar o log anterior.</span><span class="sxs-lookup"><span data-stu-id="4720e-177">The following is a sample URI that can be used to access the previous log.</span></span>

    https://<accountname>.blob.core.windows.net/$logs/blob/2011/07/31/1800/000001.log

<span data-ttu-id="4720e-178">Quando uma solicitação de armazenamento estiver conectada, o nome do log resultante se correlaciona com a hora quando concluir a operação solicitada.</span><span class="sxs-lookup"><span data-stu-id="4720e-178">When a storage request is logged, the resulting log name correlates to the hour when the requested operation completed.</span></span> <span data-ttu-id="4720e-179">Por exemplo, se uma solicitação GetBlob foi concluída às 18:30,</span><span class="sxs-lookup"><span data-stu-id="4720e-179">For example, if a GetBlob request was completed at 6:30 P.M.</span></span> <span data-ttu-id="4720e-180">em 31/07/2011, o log seria gravado com o seguinte prefixo: `blob/2011/07/31/1800/`</span><span class="sxs-lookup"><span data-stu-id="4720e-180">on 7/31/2011, the log would be written with the following prefix: `blob/2011/07/31/1800/`</span></span>

### <a name="log-metadata"></a><span data-ttu-id="4720e-181">Metadados de log</span><span class="sxs-lookup"><span data-stu-id="4720e-181">Log metadata</span></span>
<span data-ttu-id="4720e-182">Todos os blobs de log são armazenados com metadados que podem ser usados para identificar os dados de log que contém o blob.</span><span class="sxs-lookup"><span data-stu-id="4720e-182">All log blobs are stored with metadata that can be used to identify what logging data the blob contains.</span></span> <span data-ttu-id="4720e-183">A tabela a seguir descreve cada atributo de metadados.</span><span class="sxs-lookup"><span data-stu-id="4720e-183">The following table describes each metadata attribute.</span></span>

| <span data-ttu-id="4720e-184">Atributo</span><span class="sxs-lookup"><span data-stu-id="4720e-184">Attribute</span></span> | <span data-ttu-id="4720e-185">Descrição</span><span class="sxs-lookup"><span data-stu-id="4720e-185">Description</span></span> |
| --- | --- |
| <span data-ttu-id="4720e-186">LogType</span><span class="sxs-lookup"><span data-stu-id="4720e-186">LogType</span></span> |<span data-ttu-id="4720e-187">Descreve se o log contém informações referentes a operações de ler, gravar ou de exclusão.</span><span class="sxs-lookup"><span data-stu-id="4720e-187">Describes whether the log contains information pertaining to read, write, or delete operations.</span></span> <span data-ttu-id="4720e-188">Esse valor pode incluir um tipo ou uma combinação dos três, separados por vírgulas.</span><span class="sxs-lookup"><span data-stu-id="4720e-188">This value can include one type or a combination of all three, separated by commas.</span></span> <span data-ttu-id="4720e-189">Exemplo 1: gravar. Exemplo 2: ler, gravar. Exemplo 3: ler, gravar e excluir.</span><span class="sxs-lookup"><span data-stu-id="4720e-189">Example 1: write; Example 2: read,write; Example 3: read,write,delete.</span></span> |
| <span data-ttu-id="4720e-190">StartTime</span><span class="sxs-lookup"><span data-stu-id="4720e-190">StartTime</span></span> |<span data-ttu-id="4720e-191">A hora mais antiga de uma entrada de log, no formato AAAA-MM-DDThh:mm:ssZ.</span><span class="sxs-lookup"><span data-stu-id="4720e-191">The earliest time of an entry in the log, in the form of YYYY-MM-DDThh:mm:ssZ.</span></span> <span data-ttu-id="4720e-192">Por exemplo: 2011-07-31T18:21:46Z.</span><span class="sxs-lookup"><span data-stu-id="4720e-192">For example: 2011-07-31T18:21:46Z.</span></span> |
| <span data-ttu-id="4720e-193">EndTime</span><span class="sxs-lookup"><span data-stu-id="4720e-193">EndTime</span></span> |<span data-ttu-id="4720e-194">A hora mais recente de uma entrada de log, no formato YYYY-MM-DDThh:mm:ssZ.</span><span class="sxs-lookup"><span data-stu-id="4720e-194">The latest time of an entry in the log, in the form of YYYY-MM-DDThh:mm:ssZ.</span></span> <span data-ttu-id="4720e-195">Por exemplo: 2011-07-31T18:22:09Z.</span><span class="sxs-lookup"><span data-stu-id="4720e-195">For example: 2011-07-31T18:22:09Z.</span></span> |
| <span data-ttu-id="4720e-196">LogVersion</span><span class="sxs-lookup"><span data-stu-id="4720e-196">LogVersion</span></span> |<span data-ttu-id="4720e-197">A versão do formato do log.</span><span class="sxs-lookup"><span data-stu-id="4720e-197">The version of the log format.</span></span> <span data-ttu-id="4720e-198">Atualmente, o único valor aceito é 1.0.</span><span class="sxs-lookup"><span data-stu-id="4720e-198">Currently the only supported value is 1.0.</span></span> |

<span data-ttu-id="4720e-199">A lista a seguir exibe exemplos completos de metadados que usam os exemplos anteriores.</span><span class="sxs-lookup"><span data-stu-id="4720e-199">The following list displays complete sample metadata using the previous examples.</span></span>

* <span data-ttu-id="4720e-200">LogType=write</span><span class="sxs-lookup"><span data-stu-id="4720e-200">LogType=write</span></span>
* <span data-ttu-id="4720e-201">StartTime=2011-07-31T18:21:46Z</span><span class="sxs-lookup"><span data-stu-id="4720e-201">StartTime=2011-07-31T18:21:46Z</span></span>
* <span data-ttu-id="4720e-202">EndTime=2011-07-31T18:22:09Z</span><span class="sxs-lookup"><span data-stu-id="4720e-202">EndTime=2011-07-31T18:22:09Z</span></span>
* <span data-ttu-id="4720e-203">LogVersion=1.0</span><span class="sxs-lookup"><span data-stu-id="4720e-203">LogVersion=1.0</span></span>

### <a name="accessing-logging-data"></a><span data-ttu-id="4720e-204">Acessando dados de log</span><span class="sxs-lookup"><span data-stu-id="4720e-204">Accessing logging data</span></span>
<span data-ttu-id="4720e-205">Todos os dados no contêiner `$logs` podem ser acessados usando as APIs do serviço Blob, incluindo as APIs do .NET fornecidas pela biblioteca gerenciada do Azure.</span><span class="sxs-lookup"><span data-stu-id="4720e-205">All data in the `$logs` container can be accessed by using the Blob service APIs, including the .NET APIs provided by the Azure managed library.</span></span> <span data-ttu-id="4720e-206">O administrador da conta de armazenamento pode ler e excluir logs, mas não é possível criá-los ou atualizá-los.</span><span class="sxs-lookup"><span data-stu-id="4720e-206">The storage account administrator can read and delete logs, but cannot create or update them.</span></span> <span data-ttu-id="4720e-207">Tanto os metadados do log quanto o nome do log podem ser usados ao consultar em busca de um log.</span><span class="sxs-lookup"><span data-stu-id="4720e-207">Both the log's metadata and log name can be used when querying for a log.</span></span> <span data-ttu-id="4720e-208">É possível que os logs de uma determinada hora sejam exibidos fora de ordem, mas os metadados sempre especificam o período das entradas de log em um log.</span><span class="sxs-lookup"><span data-stu-id="4720e-208">It is possible for a given hour's logs to appear out of order, but the metadata always specifies the timespan of log entries in a log.</span></span> <span data-ttu-id="4720e-209">Portanto, você pode usar uma combinação de nomes de log e metadados ao procurar um log específico.</span><span class="sxs-lookup"><span data-stu-id="4720e-209">Therefore, you can use a combination of log names and metadata when searching for a particular log.</span></span>

## <a name="about-storage-analytics-metrics"></a><span data-ttu-id="4720e-210">Sobre as métricas de Análise de Armazenamento</span><span class="sxs-lookup"><span data-stu-id="4720e-210">About Storage Analytics metrics</span></span>
<span data-ttu-id="4720e-211">A análise de armazenamento pode armazenar métricas que incluem estatísticas de transação agregadas e os dados de capacidade sobre solicitações para um serviço de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="4720e-211">Storage Analytics can store metrics that include aggregated transaction statistics and capacity data about requests to a storage service.</span></span> <span data-ttu-id="4720e-212">As transações são relatadas no nível de operação da API, bem como no nível de serviço de armazenamento, e a capacidade é relatada no nível de serviço de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="4720e-212">Transactions are reported at both the API operation level as well as at the storage service level, and capacity is reported at the storage service level.</span></span> <span data-ttu-id="4720e-213">Os dados de métricas podem ser usados para analisar o uso do serviço de armazenamento, diagnosticar problemas com solicitações feitas no serviço de armazenamento e melhorar o desempenho de aplicativos que usam um serviço.</span><span class="sxs-lookup"><span data-stu-id="4720e-213">Metrics data can be used to analyze storage service usage, diagnose issues with requests made against the storage service, and to improve the performance of applications that use a service.</span></span>

<span data-ttu-id="4720e-214">Para usar a análise de armazenamento, você deve habilitá-la separadamente para cada serviço que você deseja monitorar.</span><span class="sxs-lookup"><span data-stu-id="4720e-214">To use Storage Analytics, you must enable it individually for each service you want to monitor.</span></span> <span data-ttu-id="4720e-215">Você pode habilitá-la no [portal do Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="4720e-215">You can enable it from the [Azure Portal](https://portal.azure.com).</span></span> <span data-ttu-id="4720e-216">Para obter detalhes, consulte [Monitorar uma conta de armazenamento no Portal do Azure](storage-monitor-storage-account.md).</span><span class="sxs-lookup"><span data-stu-id="4720e-216">For details, see [Monitor a storage account in the Azure Portal](storage-monitor-storage-account.md).</span></span> <span data-ttu-id="4720e-217">Você também pode habilitar a análise de armazenamento programaticamente por meio da API REST ou da biblioteca de cliente.</span><span class="sxs-lookup"><span data-stu-id="4720e-217">You can also enable Storage Analytics programmatically via the REST API or the client library.</span></span> <span data-ttu-id="4720e-218">Use as operações **Obter Propriedades do Serviço** para habilitar a Análise de Armazenamento para cada serviço.</span><span class="sxs-lookup"><span data-stu-id="4720e-218">Use the **Get Service Properties** operations to enable Storage Analytics for each service.</span></span>

### <a name="transaction-metrics"></a><span data-ttu-id="4720e-219">Métricas de transação</span><span class="sxs-lookup"><span data-stu-id="4720e-219">Transaction metrics</span></span>
<span data-ttu-id="4720e-220">Um conjunto robusto de dados é registrado em intervalos de horas ou minutos para cada serviço de armazenamento e operações de API solicitadas, incluindo ingresso/egresso, disponibilidade, erros e percentuais da solicitação categorizados.</span><span class="sxs-lookup"><span data-stu-id="4720e-220">A robust set of data is recorded at hourly or minute intervals for each storage service and requested API operation, including ingress/egress, availability, errors, and categorized request percentages.</span></span> <span data-ttu-id="4720e-221">Você pode ver uma lista completa dos detalhes da transação no tópico [Esquema da tabela de métricas da análise de armazenamento](https://msdn.microsoft.com/library/hh343264.aspx) .</span><span class="sxs-lookup"><span data-stu-id="4720e-221">You can see a complete list of the transaction details in the [Storage Analytics Metrics Table Schema](https://msdn.microsoft.com/library/hh343264.aspx) topic.</span></span>

<span data-ttu-id="4720e-222">Os dados de transação são registrados em dois níveis: nível de serviço e nível de operação da API.</span><span class="sxs-lookup"><span data-stu-id="4720e-222">Transaction data is recorded at two levels – the service level and the API operation level.</span></span> <span data-ttu-id="4720e-223">No nível de serviço, as estatísticas que resumem todas as operações de API solicitadas são gravadas em uma entidade de tabela a cada hora, mesmo que nenhuma solicitação seja feita ao serviço.</span><span class="sxs-lookup"><span data-stu-id="4720e-223">At the service level, statistics summarizing all requested API operations are written to a table entity every hour even if no requests were made to the service.</span></span> <span data-ttu-id="4720e-224">No nível de operação da API, as estatísticas serão gravadas somente em uma entidade se a operação foi solicitada nessa hora.</span><span class="sxs-lookup"><span data-stu-id="4720e-224">At the API operation level, statistics are only written to an entity if the operation was requested within that hour.</span></span>

<span data-ttu-id="4720e-225">Por exemplo, se você executar uma operação **GetBlob** no serviço Blob, as métricas do Storage Analytics vão registrar a solicitação e as incluirá nos dados agregados para o serviço Blob, bem como a operação **GetBlob**.</span><span class="sxs-lookup"><span data-stu-id="4720e-225">For example, if you perform a **GetBlob** operation on your Blob service, Storage Analytics Metrics will log the request and include it in the aggregated data for both the Blob service as well as the **GetBlob** operation.</span></span> <span data-ttu-id="4720e-226">No entanto, se nenhuma operação **GetBlob** for solicitada durante a hora, uma entidade não será gravada no `$MetricsTransactionsBlob` para essa operação.</span><span class="sxs-lookup"><span data-stu-id="4720e-226">However, if no **GetBlob** operation is requested during the hour, an entity will not be written to the `$MetricsTransactionsBlob` for that operation.</span></span>

<span data-ttu-id="4720e-227">As métricas de transações são registradas para solicitações de usuários e solicitações feitas pela própria análise de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="4720e-227">Transaction metrics are recorded for both user requests and requests made by Storage Analytics itself.</span></span> <span data-ttu-id="4720e-228">Por exemplo, solicitações pela análise de armazenamento para gravar logs e entidades de tabela são registradas.</span><span class="sxs-lookup"><span data-stu-id="4720e-228">For example, requests by Storage Analytics to write logs and table entities are recorded.</span></span> <span data-ttu-id="4720e-229">Para saber mais sobre como essas solicitações são cobradas, consulte [Análise de armazenamento e cobrança](https://msdn.microsoft.com/library/hh360997.aspx).</span><span class="sxs-lookup"><span data-stu-id="4720e-229">For more information about how these requests are billed, see [Storage Analytics and Billing](https://msdn.microsoft.com/library/hh360997.aspx).</span></span>

### <a name="capacity-metrics"></a><span data-ttu-id="4720e-230">Métricas de capacidade</span><span class="sxs-lookup"><span data-stu-id="4720e-230">Capacity metrics</span></span>
> [!NOTE]
> <span data-ttu-id="4720e-231">Atualmente, as métricas de capacidade somente estão disponíveis para o serviço Blob.</span><span class="sxs-lookup"><span data-stu-id="4720e-231">Currently, capacity metrics are only available for the Blob service.</span></span> <span data-ttu-id="4720e-232">As métricas de capacidade para os serviços de tabela e fila estarão disponíveis em versões futuras da análise de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="4720e-232">Capacity metrics for the Table service and Queue service will be available in future versions of Storage Analytics.</span></span>
> 
> 

<span data-ttu-id="4720e-233">Os dados de capacidade são gravados diariamente para o serviço Blob de uma conta de armazenamento e duas entidades de tabela são gravadas.</span><span class="sxs-lookup"><span data-stu-id="4720e-233">Capacity data is recorded daily for a storage account's Blob service, and two table entities are written.</span></span> <span data-ttu-id="4720e-234">Uma entidade fornece estatísticas para dados de usuário e a outra fornece estatísticas sobre o contêiner de blob `$logs` usado pela análise de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="4720e-234">One entity provides statistics for user data, and the other provides statistics about the `$logs` blob container used by Storage Analytics.</span></span> <span data-ttu-id="4720e-235">A tabela `$MetricsCapacityBlob` inclui as seguintes estatísticas:</span><span class="sxs-lookup"><span data-stu-id="4720e-235">The `$MetricsCapacityBlob` table includes the following statistics:</span></span>

* <span data-ttu-id="4720e-236">**Capacidade**: a quantidade de armazenamento usado pelo serviço Blob da conta de armazenamento, em bytes.</span><span class="sxs-lookup"><span data-stu-id="4720e-236">**Capacity**: The amount of storage used by the storage account's Blob service, in bytes.</span></span>
* <span data-ttu-id="4720e-237">**ContainerCount**: o número de contêineres de blob no serviço Blob da conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="4720e-237">**ContainerCount**: The number of blob containers in the storage account's Blob service.</span></span>
* <span data-ttu-id="4720e-238">**ObjectCount**: o número de blobs de páginas ou de blocos confirmados e não confirmados no serviço Blob da conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="4720e-238">**ObjectCount**: The number of committed and uncommitted block or page blobs in the storage account's Blob service.</span></span>

<span data-ttu-id="4720e-239">Para saber mais sobre as métricas de capacidade, consulte [Esquema da tabela de métricas da Análise de Armazenamento](https://msdn.microsoft.com/library/hh343264.aspx).</span><span class="sxs-lookup"><span data-stu-id="4720e-239">For more information about the capacity metrics, see [Storage Analytics Metrics Table Schema](https://msdn.microsoft.com/library/hh343264.aspx).</span></span>

### <a name="how-metrics-are-stored"></a><span data-ttu-id="4720e-240">Como as métricas são armazenadas</span><span class="sxs-lookup"><span data-stu-id="4720e-240">How metrics are stored</span></span>
<span data-ttu-id="4720e-241">Todos os dados de métricas para cada um dos serviços de armazenamento são armazenados em três tabelas reservadas para esse serviço: uma tabela para informações de transação, uma tabela de informações de transações de minutos e outra tabela para informações de capacidade.</span><span class="sxs-lookup"><span data-stu-id="4720e-241">All metrics data for each of the storage services is stored in three tables reserved for that service: one table for transaction information, one table for minute transaction information, and another table for capacity information.</span></span> <span data-ttu-id="4720e-242">Informações de transações de transação de minuto consistem em dados de solicitação e resposta, e informações de capacidade consistem em dados de uso de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="4720e-242">Transaction and minute transaction information consists of request and response data, and capacity information consists of storage usage data.</span></span> <span data-ttu-id="4720e-243">A métrica de horas, a métrica de minutos e a capacidade de um serviço Blob da conta de armazenamento podem ser acessadas nas tabelas que são nomeadas conforme descrito na tabela a seguir.</span><span class="sxs-lookup"><span data-stu-id="4720e-243">Hour metrics, minute metrics, and capacity for a storage account's Blob service can be accessed in tables that are named as described in the following table.</span></span>

| <span data-ttu-id="4720e-244">Nível de métricas</span><span class="sxs-lookup"><span data-stu-id="4720e-244">Metrics level</span></span> | <span data-ttu-id="4720e-245">Nomes da tabela</span><span class="sxs-lookup"><span data-stu-id="4720e-245">Table names</span></span> | <span data-ttu-id="4720e-246">Versões com suporte</span><span class="sxs-lookup"><span data-stu-id="4720e-246">Supported versions</span></span> |
| --- | --- | --- |
| <span data-ttu-id="4720e-247">Métricas por hora, local principal</span><span class="sxs-lookup"><span data-stu-id="4720e-247">Hourly metrics, primary location</span></span> |<span data-ttu-id="4720e-248">$MetricsTransactionsBlob </span><span class="sxs-lookup"><span data-stu-id="4720e-248">$MetricsTransactionsBlob</span></span> <br/><span data-ttu-id="4720e-249">$MetricsTransactionsTable</span><span class="sxs-lookup"><span data-stu-id="4720e-249">$MetricsTransactionsTable</span></span> <br/> <span data-ttu-id="4720e-250">$MetricsTransactionsQueue</span><span class="sxs-lookup"><span data-stu-id="4720e-250">$MetricsTransactionsQueue</span></span> |<span data-ttu-id="4720e-251">Versões anteriores a 15-08-2013 apenas.</span><span class="sxs-lookup"><span data-stu-id="4720e-251">Versions prior to 2013-08-15 only.</span></span> <span data-ttu-id="4720e-252">Embora esses nomes ainda tenham suporte, é recomendável que você passe a usar as tabelas listadas abaixo.</span><span class="sxs-lookup"><span data-stu-id="4720e-252">While these names are still supported, it's recommended that you switch to using the tables listed below.</span></span> |
| <span data-ttu-id="4720e-253">Métricas por hora, local principal</span><span class="sxs-lookup"><span data-stu-id="4720e-253">Hourly metrics, primary location</span></span> |<span data-ttu-id="4720e-254">$MetricsHourPrimaryTransactionsBlob</span><span class="sxs-lookup"><span data-stu-id="4720e-254">$MetricsHourPrimaryTransactionsBlob</span></span> <br/><span data-ttu-id="4720e-255">$MetricsHourPrimaryTransactionsTable</span><span class="sxs-lookup"><span data-stu-id="4720e-255">$MetricsHourPrimaryTransactionsTable</span></span> <br/><span data-ttu-id="4720e-256">$MetricsHourPrimaryTransactionsQueue</span><span class="sxs-lookup"><span data-stu-id="4720e-256">$MetricsHourPrimaryTransactionsQueue</span></span> |<span data-ttu-id="4720e-257">Todas as versões, incluindo 15-08-2013.</span><span class="sxs-lookup"><span data-stu-id="4720e-257">All versions, including 2013-08-15.</span></span> |
| <span data-ttu-id="4720e-258">Métricas por minuto, local principal</span><span class="sxs-lookup"><span data-stu-id="4720e-258">Minute metrics, primary location</span></span> |<span data-ttu-id="4720e-259">$MetricsMinutePrimaryTransactionsBlob</span><span class="sxs-lookup"><span data-stu-id="4720e-259">$MetricsMinutePrimaryTransactionsBlob</span></span> <br/><span data-ttu-id="4720e-260">$MetricsMinutePrimaryTransactionsTable</span><span class="sxs-lookup"><span data-stu-id="4720e-260">$MetricsMinutePrimaryTransactionsTable</span></span> <br/><span data-ttu-id="4720e-261">$MetricsMinutePrimaryTransactionsQueue</span><span class="sxs-lookup"><span data-stu-id="4720e-261">$MetricsMinutePrimaryTransactionsQueue</span></span> |<span data-ttu-id="4720e-262">Todas as versões, incluindo 15-08-2013.</span><span class="sxs-lookup"><span data-stu-id="4720e-262">All versions, including 2013-08-15.</span></span> |
| <span data-ttu-id="4720e-263">Métricas por hora, local secundário</span><span class="sxs-lookup"><span data-stu-id="4720e-263">Hourly metrics, secondary location</span></span> |<span data-ttu-id="4720e-264">$MetricsHourSecondaryTransactionsBlob </span><span class="sxs-lookup"><span data-stu-id="4720e-264">$MetricsHourSecondaryTransactionsBlob</span></span> <br/><span data-ttu-id="4720e-265">$MetricsHourSecondaryTransactionsTable</span><span class="sxs-lookup"><span data-stu-id="4720e-265">$MetricsHourSecondaryTransactionsTable</span></span> <br/><span data-ttu-id="4720e-266">$MetricsHourSecondaryTransactionsQueue</span><span class="sxs-lookup"><span data-stu-id="4720e-266">$MetricsHourSecondaryTransactionsQueue</span></span> |<span data-ttu-id="4720e-267">Todas as versões, incluindo 15-08-2013.</span><span class="sxs-lookup"><span data-stu-id="4720e-267">All versions, including 2013-08-15.</span></span> <span data-ttu-id="4720e-268">A replicação de redundância geográfica com acesso de leitura deve estar habilitada.</span><span class="sxs-lookup"><span data-stu-id="4720e-268">Read-access geo-redundant replication must be enabled.</span></span> |
| <span data-ttu-id="4720e-269">Métricas por minuto, local secundário</span><span class="sxs-lookup"><span data-stu-id="4720e-269">Minute metrics, secondary location</span></span> |<span data-ttu-id="4720e-270">$MetricsMinuteSecondaryTransactionsBlob </span><span class="sxs-lookup"><span data-stu-id="4720e-270">$MetricsMinuteSecondaryTransactionsBlob</span></span> <br/><span data-ttu-id="4720e-271">$MetricsMinuteSecondaryTransactionsTable</span><span class="sxs-lookup"><span data-stu-id="4720e-271">$MetricsMinuteSecondaryTransactionsTable</span></span> <br/><span data-ttu-id="4720e-272">$MetricsMinuteSecondaryTransactionsQueue</span><span class="sxs-lookup"><span data-stu-id="4720e-272">$MetricsMinuteSecondaryTransactionsQueue</span></span> |<span data-ttu-id="4720e-273">Todas as versões, incluindo 15-08-2013.</span><span class="sxs-lookup"><span data-stu-id="4720e-273">All versions, including 2013-08-15.</span></span> <span data-ttu-id="4720e-274">A replicação de redundância geográfica com acesso de leitura deve estar habilitada.</span><span class="sxs-lookup"><span data-stu-id="4720e-274">Read-access geo-redundant replication must be enabled.</span></span> |
| <span data-ttu-id="4720e-275">Capacidade (apenas serviço Blob)</span><span class="sxs-lookup"><span data-stu-id="4720e-275">Capacity (Blob service only)</span></span> |<span data-ttu-id="4720e-276">$MetricsCapacityBlob</span><span class="sxs-lookup"><span data-stu-id="4720e-276">$MetricsCapacityBlob</span></span> |<span data-ttu-id="4720e-277">Todas as versões, incluindo 15-08-2013.</span><span class="sxs-lookup"><span data-stu-id="4720e-277">All versions, including 2013-08-15.</span></span> |

<span data-ttu-id="4720e-278">Essas tabelas são criadas automaticamente quando a análise de armazenamento é habilitada para uma conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="4720e-278">These tables are automatically created when Storage Analytics is enabled for a storage account.</span></span> <span data-ttu-id="4720e-279">Elas são acessadas por meio do namespace da conta de armazenamento, por exemplo: `https://<accountname>.table.core.windows.net/Tables("$MetricsTransactionsBlob")`</span><span class="sxs-lookup"><span data-stu-id="4720e-279">They are accessed via the namespace of the storage account, for example: `https://<accountname>.table.core.windows.net/Tables("$MetricsTransactionsBlob")`</span></span>

### <a name="accessing-metrics-data"></a><span data-ttu-id="4720e-280">Acessando dados de métrica</span><span class="sxs-lookup"><span data-stu-id="4720e-280">Accessing metrics data</span></span>
<span data-ttu-id="4720e-281">Todos os dados nas tabelas de métricas podem ser acessados usando as APIs do serviço de tabela, incluindo as APIs do .NET fornecidas pela biblioteca gerenciada do Azure.</span><span class="sxs-lookup"><span data-stu-id="4720e-281">All data in the metrics tables can be accessed by using the Table service APIs, including the .NET APIs provided by the Azure managed library.</span></span> <span data-ttu-id="4720e-282">O administrador da conta de armazenamento pode ler e excluir entidades de tabela, mas não pode criá-las ou atualizá-las.</span><span class="sxs-lookup"><span data-stu-id="4720e-282">The storage account administrator can read and delete table entities, but cannot create or update them.</span></span>

## <a name="billing-for-storage-analytics"></a><span data-ttu-id="4720e-283">Cobrança da análise de armazenamento</span><span class="sxs-lookup"><span data-stu-id="4720e-283">Billing for Storage Analytics</span></span>
<span data-ttu-id="4720e-284">Todos os dados de métricas são gravados pelos serviços de uma conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="4720e-284">All metrics data is written by the services of a storage account.</span></span> <span data-ttu-id="4720e-285">Como resultado, cada operação de gravação executada pela análise de armazenamento é faturável.</span><span class="sxs-lookup"><span data-stu-id="4720e-285">As a result, each write operation performed by Storage Analytics is billable.</span></span> <span data-ttu-id="4720e-286">Além disso, a quantidade de armazenamento usado por dados de métrica também é faturável.</span><span class="sxs-lookup"><span data-stu-id="4720e-286">Additionally, the amount of storage used by metrics data is also billable.</span></span>

<span data-ttu-id="4720e-287">As seguintes ações executadas pela análise de armazenamento são faturáveis:</span><span class="sxs-lookup"><span data-stu-id="4720e-287">The following actions performed by Storage Analytics are billable:</span></span>

* <span data-ttu-id="4720e-288">Solicitações para criar blobs para registro em log.</span><span class="sxs-lookup"><span data-stu-id="4720e-288">Requests to create blobs for logging.</span></span> 
* <span data-ttu-id="4720e-289">Solicitações para criar entidades de tabela para métricas.</span><span class="sxs-lookup"><span data-stu-id="4720e-289">Requests to create table entities for metrics.</span></span>

<span data-ttu-id="4720e-290">Se você configurou uma política de retenção de dados, você não é cobrado para excluir transações quando a análise de armazenamento exclui dados antigos de log e métricas.</span><span class="sxs-lookup"><span data-stu-id="4720e-290">If you have configured a data retention policy, you are not charged for delete transactions when Storage Analytics deletes old logging and metrics data.</span></span> <span data-ttu-id="4720e-291">No entanto, excluir as transações de um cliente são faturáveis.</span><span class="sxs-lookup"><span data-stu-id="4720e-291">However, delete transactions from a client are billable.</span></span> <span data-ttu-id="4720e-292">Para saber mais sobre as políticas de retenção, consulte [Definindo uma política de retenção de dados de análise de armazenamento](https://msdn.microsoft.com/library/azure/hh343263.aspx).</span><span class="sxs-lookup"><span data-stu-id="4720e-292">For more information about retention policies, see [Setting a Storage Analytics Data Retention Policy](https://msdn.microsoft.com/library/azure/hh343263.aspx).</span></span>

### <a name="understanding-billable-requests"></a><span data-ttu-id="4720e-293">Noções básicas sobre solicitações faturáveis</span><span class="sxs-lookup"><span data-stu-id="4720e-293">Understanding billable requests</span></span>
<span data-ttu-id="4720e-294">Todas as solicitações feitas ao serviço de armazenamento da conta são faturáveis ou então não faturáveis.</span><span class="sxs-lookup"><span data-stu-id="4720e-294">Every request made to an account's storage service is either billable or non-billable.</span></span> <span data-ttu-id="4720e-295">A análise de armazenamento registra cada solicitação individual feita a um serviço, incluindo uma mensagem de status que indica como a solicitação foi processada.</span><span class="sxs-lookup"><span data-stu-id="4720e-295">Storage Analytics logs each individual request made to a service, including a status message that indicates how the request was handled.</span></span> <span data-ttu-id="4720e-296">Da mesma forma, a análise de armazenamento armazena métricas para um serviço e as operações de API desse serviço, incluindo os percentuais e a contagem de determinadas mensagens de status.</span><span class="sxs-lookup"><span data-stu-id="4720e-296">Similarly, Storage Analytics stores metrics for both a service and the API operations of that service, including the percentages and count of certain status messages.</span></span> <span data-ttu-id="4720e-297">Juntos, esses recursos podem ajudá-lo a analisar suas solicitações faturáveis, fazer melhorias em seu aplicativo e diagnosticar problemas com solicitações de serviços.</span><span class="sxs-lookup"><span data-stu-id="4720e-297">Together, these features can help you analyze your billable requests, make improvements on your application, and diagnose issues with requests to your services.</span></span> <span data-ttu-id="4720e-298">Para saber mais sobre a cobrança, confira [Noções básicas sobre cobrança no armazenamento do Azure – largura de banda, transações e capacidade](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/07/09/understanding-windows-azure-storage-billing-bandwidth-transactions-and-capacity.aspx).</span><span class="sxs-lookup"><span data-stu-id="4720e-298">For more information about billing, see [Understanding Azure Storage Billing - Bandwidth, Transactions, and Capacity](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/07/09/understanding-windows-azure-storage-billing-bandwidth-transactions-and-capacity.aspx).</span></span>

<span data-ttu-id="4720e-299">Ao analisar os dados de análise de armazenamento, você pode usar as tabelas no tópico [Mensagens de operações e status registradas da análise de armazenamento](https://msdn.microsoft.com/library/azure/hh343260.aspx) para determinar quais solicitações são faturáveis.</span><span class="sxs-lookup"><span data-stu-id="4720e-299">When looking at Storage Analytics data, you can use the tables in the [Storage Analytics Logged Operations and Status Messages](https://msdn.microsoft.com/library/azure/hh343260.aspx) topic to determine what requests are billable.</span></span> <span data-ttu-id="4720e-300">Em seguida, você pode comparar seus logs e dados de métricas para as mensagens de status para ver se houve cobrança por uma determinada solicitação.</span><span class="sxs-lookup"><span data-stu-id="4720e-300">Then you can compare your logs and metrics data to the status messages to see if you were charged for a particular request.</span></span> <span data-ttu-id="4720e-301">Você também pode usar as tabelas no tópico anterior para investigar a disponibilidade de um serviço de armazenamento ou operação de API individual.</span><span class="sxs-lookup"><span data-stu-id="4720e-301">You can also use the tables in the previous topic to investigate availability for a storage service or individual API operation.</span></span>

## <a name="next-steps"></a><span data-ttu-id="4720e-302">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="4720e-302">Next steps</span></span>
### <a name="setting-up-storage-analytics"></a><span data-ttu-id="4720e-303">Configurando a análise de armazenamento</span><span class="sxs-lookup"><span data-stu-id="4720e-303">Setting up Storage Analytics</span></span>
* [<span data-ttu-id="4720e-304">Monitorar uma conta de armazenamento no Portal do Azure</span><span class="sxs-lookup"><span data-stu-id="4720e-304">Monitor a storage account in the Azure Portal</span></span>](storage-monitor-storage-account.md)
* [<span data-ttu-id="4720e-305">Habilitar e configurar a análise de armazenamento</span><span class="sxs-lookup"><span data-stu-id="4720e-305">Enabling and Configuring Storage Analytics</span></span>](https://msdn.microsoft.com/library/hh360996.aspx)

### <a name="storage-analytics-logging"></a><span data-ttu-id="4720e-306">Registro em log da Análise de Armazenamento</span><span class="sxs-lookup"><span data-stu-id="4720e-306">Storage Analytics logging</span></span>
* [<span data-ttu-id="4720e-307">Sobre o registro em log da análise de armazenamento</span><span class="sxs-lookup"><span data-stu-id="4720e-307">About Storage Analytics Logging</span></span>](https://msdn.microsoft.com/library/hh343262.aspx)
* [<span data-ttu-id="4720e-308">Formato de Log de análise de armazenamento</span><span class="sxs-lookup"><span data-stu-id="4720e-308">Storage Analytics Log Format</span></span>](https://msdn.microsoft.com/library/hh343259.aspx)
* [<span data-ttu-id="4720e-309">Mensagens de operações e status registradas de análise de armazenamento</span><span class="sxs-lookup"><span data-stu-id="4720e-309">Storage Analytics Logged Operations and Status Messages</span></span>](https://msdn.microsoft.com/library/hh343260.aspx)

### <a name="storage-analytics-metrics"></a><span data-ttu-id="4720e-310">Métricas da Análise de Armazenamento</span><span class="sxs-lookup"><span data-stu-id="4720e-310">Storage Analytics metrics</span></span>
* [<span data-ttu-id="4720e-311">Sobre as métricas de análise de armazenamento</span><span class="sxs-lookup"><span data-stu-id="4720e-311">About Storage Analytics Metrics</span></span>](https://msdn.microsoft.com/library/hh343258.aspx)
* [<span data-ttu-id="4720e-312">Esquema da tabela de métricas da análise de armazenamento</span><span class="sxs-lookup"><span data-stu-id="4720e-312">Storage Analytics Metrics Table Schema</span></span>](https://msdn.microsoft.com/library/hh343264.aspx)
* [<span data-ttu-id="4720e-313">Mensagens de operações e status registradas de análise de armazenamento</span><span class="sxs-lookup"><span data-stu-id="4720e-313">Storage Analytics Logged Operations and Status Messages</span></span>](https://msdn.microsoft.com/library/hh343260.aspx)  

