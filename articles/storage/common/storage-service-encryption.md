---
title: "Criptografia do Serviço de Armazenamento do Azure para dados em repouso | Microsoft Docs"
description: "Use o recurso de Criptografia do Serviço de Armazenamento do Azure para criptografar seu Armazenamento de Blobs do Azure no lado do serviço ao armazenar os dados, e descriptografá-lo ao recuperar os dados."
services: storage
documentationcenter: .net
author: robinsh
manager: timlt
editor: tysonn
ms.assetid: edabe3ee-688b-41e0-b34f-613ac9c3fdfd
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/09/2017
ms.author: robinsh
ms.openlocfilehash: bac7b3292f21aa97d02a18dd58f79a4f10485b7d
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/29/2017
---
# <a name="azure-storage-service-encryption-for-data-at-rest"></a><span data-ttu-id="f7e22-103">Criptografia do Serviço de Armazenamento do Azure para dados em repouso</span><span class="sxs-lookup"><span data-stu-id="f7e22-103">Azure Storage Service Encryption for Data at Rest</span></span>
<span data-ttu-id="f7e22-104">A SSE (Criptografia do Serviço de Armazenamento) do Azure para dados em repouso ajuda a proteger seus dados a fim de atender aos compromissos de conformidade e segurança da organização.</span><span class="sxs-lookup"><span data-stu-id="f7e22-104">Azure Storage Service Encryption (SSE) for Data at Rest helps you protect and safeguard your data to meet your organizational security and compliance commitments.</span></span> <span data-ttu-id="f7e22-105">Com esse recurso, o Armazenamento do Azure criptografa automaticamente seus dados antes de persistir no armazenamento e os descriptografa antes da recuperação.</span><span class="sxs-lookup"><span data-stu-id="f7e22-105">With this feature, Azure Storage automatically encrypts your data prior to persisting to storage and decrypts prior to retrieval.</span></span> <span data-ttu-id="f7e22-106">A criptografia, a descriptografia e o gerenciamento de chaves são totalmente transparentes para os usuários.</span><span class="sxs-lookup"><span data-stu-id="f7e22-106">The encryption, decryption, and key management are totally transparent to users.</span></span>

<span data-ttu-id="f7e22-107">As seções a seguir fornecem orientações detalhadas sobre como usar os recursos de Criptografia do Serviço de Armazenamento, bem como os cenários com suporte e experiências do usuário.</span><span class="sxs-lookup"><span data-stu-id="f7e22-107">The following sections provide detailed guidance on how to use the Storage Service Encryption features as well as the supported scenarios and user experiences.</span></span>

## <a name="overview"></a><span data-ttu-id="f7e22-108">Visão geral</span><span class="sxs-lookup"><span data-stu-id="f7e22-108">Overview</span></span>
<span data-ttu-id="f7e22-109">O Armazenamento do Azure fornece um conjunto abrangente de recursos de segurança que, juntos, permitem aos desenvolvedores criar aplicativos seguros.</span><span class="sxs-lookup"><span data-stu-id="f7e22-109">Azure Storage provides a comprehensive set of security capabilities which together enable developers to build secure applications.</span></span> <span data-ttu-id="f7e22-110">Os dados podem ser protegidos em trânsito, entre um aplicativo e o Azure, usando a [Criptografia do lado do cliente](../storage-client-side-encryption.md), HTTPs ou SMB 3.0.</span><span class="sxs-lookup"><span data-stu-id="f7e22-110">Data can be secured in transit between an application and Azure by using [Client-Side Encryption](../storage-client-side-encryption.md), HTTPs, or SMB 3.0.</span></span> <span data-ttu-id="f7e22-111">A Criptografia do Serviço de Armazenamento fornece criptografia em repouso, lidando com a criptografia, a descriptografia e o gerenciamento de chaves de forma totalmente transparente.</span><span class="sxs-lookup"><span data-stu-id="f7e22-111">Storage Service Encryption provides encryption at rest, handling encryption, decryption, and key management in a totally transparent fashion.</span></span> <span data-ttu-id="f7e22-112">Todos os dados são criptografados usando a [criptografia AES](https://en.wikipedia.org/wiki/Advanced_Encryption_Standard)de 256 bits, um dos codificadores de blocos mais potentes.</span><span class="sxs-lookup"><span data-stu-id="f7e22-112">All data is encrypted using 256-bit [AES encryption](https://en.wikipedia.org/wiki/Advanced_Encryption_Standard), one of the strongest block ciphers available.</span></span>

<span data-ttu-id="f7e22-113">A SSE criptografa dados quando eles são gravados no Armazenamento do Azure e pode ser usada para o Armazenamento de Blobs do Azure e o Armazenamento de Arquivos.</span><span class="sxs-lookup"><span data-stu-id="f7e22-113">SSE works by encrypting the data when it is written to Azure Storage, and can be used for Azure Blob Storage and File Storage.</span></span> <span data-ttu-id="f7e22-114">Ela funciona para o seguinte:</span><span class="sxs-lookup"><span data-stu-id="f7e22-114">It works for the following:</span></span>

* <span data-ttu-id="f7e22-115">Armazenamento Standard: contas de armazenamento de uso geral para o armazenamento de Blobs e Arquivos e contas de armazenamento de Blobs</span><span class="sxs-lookup"><span data-stu-id="f7e22-115">Standard Storage: General purpose storage accounts for Blobs and File storage and Blob storage accounts</span></span>
* <span data-ttu-id="f7e22-116">Armazenamento Premium</span><span class="sxs-lookup"><span data-stu-id="f7e22-116">Premium storage</span></span> 
* <span data-ttu-id="f7e22-117">Todos os níveis de redundância (LRS, ZRS, GRS e RA-GRS)</span><span class="sxs-lookup"><span data-stu-id="f7e22-117">All redundancy levels (LRS, ZRS, GRS, RA-GRS)</span></span>
* <span data-ttu-id="f7e22-118">Contas de armazenamento do Azure Resource Manager (mas não clássico)</span><span class="sxs-lookup"><span data-stu-id="f7e22-118">Azure Resource Manager storage accounts (but not classic)</span></span> 
* <span data-ttu-id="f7e22-119">Todas as regiões.</span><span class="sxs-lookup"><span data-stu-id="f7e22-119">All regions.</span></span>

<span data-ttu-id="f7e22-120">Para saber mais, veja as perguntas frequentes.</span><span class="sxs-lookup"><span data-stu-id="f7e22-120">To learn more, please refer to the FAQ.</span></span>

<span data-ttu-id="f7e22-121">Para habilitar ou desabilitar a Criptografia do Serviço de Armazenamento para uma conta de armazenamento, faça logon no [Portal do Azure](https://portal.azure.com) e selecione uma conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="f7e22-121">To enable or disable Storage Service Encryption for a storage account, log into the [Azure portal](https://portal.azure.com) and select a storage account.</span></span> <span data-ttu-id="f7e22-122">Na folha Configurações, procure a seção de Serviço Blob, conforme mostrado nesta captura de tela, e clique em Criptografia.</span><span class="sxs-lookup"><span data-stu-id="f7e22-122">On the Settings blade, look for the Blob Service section as shown in this screenshot and click Encryption.</span></span>

<span data-ttu-id="f7e22-123">![Captura de tela do Portal mostrando a opção Criptografia](./media/storage-service-encryption/image1.png)
</span><span class="sxs-lookup"><span data-stu-id="f7e22-123">![Portal Screenshot showing Encryption option](./media/storage-service-encryption/image1.png)
</span></span><br/><span data-ttu-id="f7e22-124">*Figura 1: habilitar a SSE para serviço Blob (etapa 1)*</span><span class="sxs-lookup"><span data-stu-id="f7e22-124">*Figure 1: Enable SSE for Blob Service (Step1)*</span></span>

<span data-ttu-id="f7e22-125">![Captura de tela do Portal mostrando a opção Criptografia](./media/storage-service-encryption/image3.png)
</span><span class="sxs-lookup"><span data-stu-id="f7e22-125">![Portal Screenshot showing Encryption option](./media/storage-service-encryption/image3.png)
</span></span><br/><span data-ttu-id="f7e22-126">*Figura 2: habilitar a SSE para serviço de arquivo (etapa 1)*</span><span class="sxs-lookup"><span data-stu-id="f7e22-126">*Figure 2: Enable SSE for File Service (Step1)*</span></span>

<span data-ttu-id="f7e22-127">Depois de clicar na configuração da Criptografia, habilite ou desabilite a Criptografia do Serviço de Armazenamento.</span><span class="sxs-lookup"><span data-stu-id="f7e22-127">After you click the Encryption setting, you can enable or disable Storage Service Encryption.</span></span>

<span data-ttu-id="f7e22-128">![Captura de tela do Portal mostrando as propriedades da criptografia](./media/storage-service-encryption/image2.png)
</span><span class="sxs-lookup"><span data-stu-id="f7e22-128">![Portal Screenshot showing Encryption properties](./media/storage-service-encryption/image2.png)
</span></span><br/><span data-ttu-id="f7e22-129">*Figura 3: Habilitar a SSE para o Serviço Blob e Arquivo (etapa 2)*</span><span class="sxs-lookup"><span data-stu-id="f7e22-129">*Figure 3: Enable SSE for Blob and File Service (Step2)*</span></span>

## <a name="encryption-scenarios"></a><span data-ttu-id="f7e22-130">Cenários de criptografia</span><span class="sxs-lookup"><span data-stu-id="f7e22-130">Encryption Scenarios</span></span>
<span data-ttu-id="f7e22-131">A Criptografia do Serviço de Armazenamento pode ser habilitada no nível da conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="f7e22-131">Storage Service Encryption can be enabled at a storage account level.</span></span> <span data-ttu-id="f7e22-132">Depois de habilitada, os clientes escolherão quais serviços serão criptografados.</span><span class="sxs-lookup"><span data-stu-id="f7e22-132">Once enabled, customers will choose which services to encrypt.</span></span> <span data-ttu-id="f7e22-133">Ela oferece suporte aos seguintes cenários de cliente:</span><span class="sxs-lookup"><span data-stu-id="f7e22-133">It supports the following customer scenarios:</span></span>

* <span data-ttu-id="f7e22-134">Criptografia do Armazenamento de Blobs e do Armazenamento de Arquivos em contas do Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="f7e22-134">Encryption of Blob Storage and File Storage in Resource Manager accounts.</span></span>
* <span data-ttu-id="f7e22-135">Criptografia do Serviço Blob e Arquivo em contas de armazenamento clássico, depois de migradas para contas de armazenamento do Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="f7e22-135">Encryption of Blob and File Service in classic storage accounts once migrated to Resource Manager storage accounts.</span></span>

<span data-ttu-id="f7e22-136">A SSE tem as seguintes limitações:</span><span class="sxs-lookup"><span data-stu-id="f7e22-136">SSE has the following limitations:</span></span>

* <span data-ttu-id="f7e22-137">Não há suporte para a criptografia de contas de armazenamento clássicas.</span><span class="sxs-lookup"><span data-stu-id="f7e22-137">Encryption of classic storage accounts is not supported.</span></span>
* <span data-ttu-id="f7e22-138">Dados existentes - A SSE criptografa apenas os dados recém-criados após a habilitação da criptografia.</span><span class="sxs-lookup"><span data-stu-id="f7e22-138">Existing Data - SSE only encrypts newly created data after the encryption is enabled.</span></span> <span data-ttu-id="f7e22-139">Se, por exemplo, você criar uma nova conta de armazenamento do Resource Manager mas não ativar a criptografia e, na sequência, carregar blobs ou VHDs arquivados nessa conta de armazenamento e então ativar a SSE, esses blobs não serão criptografados, a menos que sejam reconfigurados ou copiados.</span><span class="sxs-lookup"><span data-stu-id="f7e22-139">If for example you create a new Resource Manager storage account but don't turn on encryption, and then you upload blobs or archived VHDs to that storage account and then turn on SSE, those blobs will not be encrypted unless they are rewritten or copied.</span></span>
* <span data-ttu-id="f7e22-140">Suporte do Marketplace – habilite a criptografia de VMs criadas no Marketplace usando o [portal do Azure](https://portal.azure.com), o PowerShell e a CLI do Azure.</span><span class="sxs-lookup"><span data-stu-id="f7e22-140">Marketplace Support - Enable encryption of VMs created from the Marketplace using the [Azure portal](https://portal.azure.com), PowerShell, and Azure CLI.</span></span> <span data-ttu-id="f7e22-141">Imagem base de VHD permanecerá não criptografada; no entanto, quaisquer gravações feitas após a rotação da VM serão criptografadas.</span><span class="sxs-lookup"><span data-stu-id="f7e22-141">The VHD base image will remain unencrypted; however, any writes done after the VM has spun up will be encrypted.</span></span>
* <span data-ttu-id="f7e22-142">Dados de filas e tabelas não serão criptografados.</span><span class="sxs-lookup"><span data-stu-id="f7e22-142">Table and Queues data will not be encrypted.</span></span>

## <a name="getting-started"></a><span data-ttu-id="f7e22-143">Introdução</span><span class="sxs-lookup"><span data-stu-id="f7e22-143">Getting Started</span></span>
### <a name="step-1-create-a-new-storage-accountstorage-create-storage-accountmd"></a><span data-ttu-id="f7e22-144">Etapa 1: [Criar uma nova conta de armazenamento](../storage-create-storage-account.md).</span><span class="sxs-lookup"><span data-stu-id="f7e22-144">Step 1: [Create a new storage account](../storage-create-storage-account.md).</span></span>
### <a name="step-2-enable-encryption"></a><span data-ttu-id="f7e22-145">Etapa 2: Habilitar a criptografia.</span><span class="sxs-lookup"><span data-stu-id="f7e22-145">Step 2: Enable encryption.</span></span>
<span data-ttu-id="f7e22-146">Você pode habilitar a criptografia usando o [portal do Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="f7e22-146">You can enable encryption using the [Azure portal](https://portal.azure.com).</span></span>

> [!NOTE]
> <span data-ttu-id="f7e22-147">Se você quiser habilitar ou desabilitar programaticamente a Criptografia do Serviço de Armazenamento em uma conta de armazenamento, use a [API REST do Provedor de Recursos de Armazenamento do Azure](https://msdn.microsoft.com/library/azure/mt163683.aspx), a [Biblioteca de Cliente do Provedor de Recursos de Armazenamento do .NET](https://msdn.microsoft.com/library/azure/mt131037.aspx), o [Azure PowerShell](/powershell/azureps-cmdlets-docs) ou a [CLI do Azure](../storage-azure-cli.md).</span><span class="sxs-lookup"><span data-stu-id="f7e22-147">If you want to programmatically enable or disable the Storage Service Encryption on a storage account, you can use the [Azure Storage Resource Provider REST API](https://msdn.microsoft.com/library/azure/mt163683.aspx), the [Storage Resource Provider Client Library for .NET](https://msdn.microsoft.com/library/azure/mt131037.aspx), [Azure PowerShell](/powershell/azureps-cmdlets-docs), or the [Azure CLI](../storage-azure-cli.md).</span></span>
> 
> 

### <a name="step-3-copy-data-to-storage-account"></a><span data-ttu-id="f7e22-148">Etapa 3: Copiar dados para a conta de armazenamento</span><span class="sxs-lookup"><span data-stu-id="f7e22-148">Step 3: Copy data to storage account</span></span>
<span data-ttu-id="f7e22-149">Se você habilitar a SSE para o serviço Blob, todos os blobs gravados nessa conta de armazenamento serão criptografados.</span><span class="sxs-lookup"><span data-stu-id="f7e22-149">If you enable SSE for the Blob service, any blobs written to that storage account will be encrypted.</span></span> <span data-ttu-id="f7e22-150">Blobs que já estiverem na conta de armazenamento não serão criptografados até que sejam gravados novamente.</span><span class="sxs-lookup"><span data-stu-id="f7e22-150">Any blobs already located in that storage account will not be encrypted until they are rewritten.</span></span> <span data-ttu-id="f7e22-151">Você pode copiar dados de uma conta de armazenamento para uma com criptografia da SSE, ou até mesmo habilitar a SSE e copiar os blobs de um contêiner para outro para garantir que os dados anteriores sejam criptografados.</span><span class="sxs-lookup"><span data-stu-id="f7e22-151">You can copy the data from one storage account to one with SSE encrypted, or even enable SSE and copy the blobs from one container to another to sure that previous data is encrypted.</span></span> <span data-ttu-id="f7e22-152">É possível fazer isso usando qualquer uma das ferramentas a seguir.</span><span class="sxs-lookup"><span data-stu-id="f7e22-152">You can use any of the following tools to accomplish this.</span></span> <span data-ttu-id="f7e22-153">Este é o mesmo comportamento do armazenamento de arquivos.</span><span class="sxs-lookup"><span data-stu-id="f7e22-153">This is the same behavior for File Storage as well.</span></span>

#### <a name="using-azcopy"></a><span data-ttu-id="f7e22-154">Como usar o AzCopy</span><span class="sxs-lookup"><span data-stu-id="f7e22-154">Using AzCopy</span></span>
<span data-ttu-id="f7e22-155">O AzCopy é um utilitário de linha de comando do Windows projetado para copiar dados entre o Armazenamento de Blobs, de Arquivos e de Tabelas do Microsoft Azure usando comandos simples com o desempenho ideal.</span><span class="sxs-lookup"><span data-stu-id="f7e22-155">AzCopy is a Windows command-line utility designed for copying data to and from Microsoft Azure Blob, File, and Table storage using simple commands with optimal performance.</span></span> <span data-ttu-id="f7e22-156">Você pode usá-lo para copiar seus blobs ou arquivos de uma conta de armazenamento para outra que tenha a SSE habilitada.</span><span class="sxs-lookup"><span data-stu-id="f7e22-156">You can use this to copy your blobs or files from one storage account to another one that has SSE enabled.</span></span> 

<span data-ttu-id="f7e22-157">Para saber mais, visite [Transferir dados com o utilitário de linha de comando AzCopy](storage-use-azcopy.md).</span><span class="sxs-lookup"><span data-stu-id="f7e22-157">To learn more, please visit [Transfer data with the AzCopy Command-Line Utility](storage-use-azcopy.md).</span></span>

#### <a name="using-smb"></a><span data-ttu-id="f7e22-158">Como usar o SMB</span><span class="sxs-lookup"><span data-stu-id="f7e22-158">Using SMB</span></span>
<span data-ttu-id="f7e22-159">O armazenamento de arquivos do Azure oferece compartilhamentos de arquivos na nuvem usando o protocolo SMB padrão.</span><span class="sxs-lookup"><span data-stu-id="f7e22-159">Azure File storage offers file shares in the cloud using the standard SMB protocol.</span></span> <span data-ttu-id="f7e22-160">Você pode montar um compartilhamento de arquivo de um cliente no local ou no Azure.</span><span class="sxs-lookup"><span data-stu-id="f7e22-160">You can mount a file share from a client on premises or in Azure.</span></span> <span data-ttu-id="f7e22-161">Uma vez montado, use ferramentas como o Robocopy para copiar arquivos para os compartilhamentos de arquivos do Azure.</span><span class="sxs-lookup"><span data-stu-id="f7e22-161">Once mounted, tools such as Robocopy can be used to copy files over to Azure File shares.</span></span> <span data-ttu-id="f7e22-162">Para obter mais informações, consulte [Como montar um Compartilhamento de Arquivos do Azure no Windows](../files/storage-how-to-use-files-windows.md) e [Como montar um Compartilhamento de Arquivos do Azure no Linux](../storage-how-to-use-files-linux.md).</span><span class="sxs-lookup"><span data-stu-id="f7e22-162">For more information, see [how to mount Azure File Share on Windows](../files/storage-how-to-use-files-windows.md) and [how to mount Azure File share on Linux](../storage-how-to-use-files-linux.md).</span></span>


#### <a name="using-the-storage-client-libraries"></a><span data-ttu-id="f7e22-163">Como usar as Bibliotecas de Cliente de Armazenamento</span><span class="sxs-lookup"><span data-stu-id="f7e22-163">Using the Storage Client Libraries</span></span>
<span data-ttu-id="f7e22-164">Você pode copiar dados de arquivo ou de blob para e do armazenamento de blobs ou entre contas de armazenamento usando nosso conjunto avançado de Bibliotecas de cliente de armazenamento, que incluem .NET, C++, Java, Android, Node.js, PHP, Python e Ruby.</span><span class="sxs-lookup"><span data-stu-id="f7e22-164">You can copy blob or file data to and from blob storage or between storage accounts using our rich set of Storage Client Libraries including .NET, C++, Java, Android, Node.js, PHP, Python, and Ruby.</span></span>

<span data-ttu-id="f7e22-165">Para saber mais, confira [Introdução ao armazenamento de blobs do Azure usando o .NET](../blobs/storage-dotnet-how-to-use-blobs.md).</span><span class="sxs-lookup"><span data-stu-id="f7e22-165">To learn more, please visit our [Get started with Azure Blob storage using .NET](../blobs/storage-dotnet-how-to-use-blobs.md).</span></span>

#### <a name="using-a-storage-explorer"></a><span data-ttu-id="f7e22-166">Como usar o Gerenciador de Armazenamento</span><span class="sxs-lookup"><span data-stu-id="f7e22-166">Using a Storage Explorer</span></span>
<span data-ttu-id="f7e22-167">Use um gerenciador de armazenamento para criar contas de armazenamento, carregar e baixar dados, exibir o conteúdo de blobs e navegar por diretórios.</span><span class="sxs-lookup"><span data-stu-id="f7e22-167">You can use a Storage explorer to create storage accounts, upload and download data, view contents of blobs, and navigate through directories.</span></span> <span data-ttu-id="f7e22-168">Você pode usar uma dessas opções para carregar blobs em sua conta de armazenamento com a criptografia habilitada.</span><span class="sxs-lookup"><span data-stu-id="f7e22-168">You can use one of these to upload blobs to your storage account with encryption enabled.</span></span> <span data-ttu-id="f7e22-169">Com alguns gerenciadores de armazenamento, também é possível copiar dados de um armazenamento de blobs existente para um contêiner diferente na conta de armazenamento ou para uma nova conta de armazenamento com a SSE habilitada.</span><span class="sxs-lookup"><span data-stu-id="f7e22-169">With some storage explorers, you can also copy data from existing blob storage to a different container in the storage account or a new storage account that has SSE enabled.</span></span>

<span data-ttu-id="f7e22-170">Para saber mais, visite [Pesquisadores de armazenamento do Azure](../storage-explorers.md).</span><span class="sxs-lookup"><span data-stu-id="f7e22-170">To learn more, please visit [Azure Storage Explorers](../storage-explorers.md).</span></span>

### <a name="step-4-query-the-status-of-the-encrypted-data"></a><span data-ttu-id="f7e22-171">Etapa 4: Consultar o status dos dados criptografados</span><span class="sxs-lookup"><span data-stu-id="f7e22-171">Step 4: Query the status of the encrypted data</span></span>
<span data-ttu-id="f7e22-172">Uma versão atualizada das bibliotecas de Cliente de Armazenamento foi implantada para permitir que você consulte o estado de um objeto para determinar se ele está criptografado ou não.</span><span class="sxs-lookup"><span data-stu-id="f7e22-172">An updated version of the Storage Client libraries has been deployed that allows you to query the state of an object to determine if it is encrypted or not.</span></span> <span data-ttu-id="f7e22-173">Disponível apenas para armazenamento de blobs.</span><span class="sxs-lookup"><span data-stu-id="f7e22-173">This is currently only available for Blob storage.</span></span> <span data-ttu-id="f7e22-174">O suporte para armazenamento de arquivos está previsto.</span><span class="sxs-lookup"><span data-stu-id="f7e22-174">Support for File storage is on the roadmap.</span></span> 

<span data-ttu-id="f7e22-175">Enquanto isso, você pode chamar [Obter propriedades da conta](https://msdn.microsoft.com/library/azure/mt163553.aspx) para verificar se a conta de armazenamento tem a criptografia habilitada ou para exibir as propriedades da conta de armazenamento no Portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="f7e22-175">In the meantime, you can call [Get Account Properties](https://msdn.microsoft.com/library/azure/mt163553.aspx) to verify that the storage account has encryption enabled or view the storage account properties in the Azure portal.</span></span>

## <a name="encryption-and-decryption-workflow"></a><span data-ttu-id="f7e22-176">Fluxo de trabalho da criptografia e da descriptografia</span><span class="sxs-lookup"><span data-stu-id="f7e22-176">Encryption and Decryption Workflow</span></span>
<span data-ttu-id="f7e22-177">Aqui está uma breve descrição de como funciona o fluxo de trabalho de criptografia/descriptografia:</span><span class="sxs-lookup"><span data-stu-id="f7e22-177">Here is a brief description of the encryption/decryption workflow:</span></span>

* <span data-ttu-id="f7e22-178">O cliente habilita a criptografia na conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="f7e22-178">The customer enables encryption on the storage account.</span></span>
* <span data-ttu-id="f7e22-179">Quando o cliente grava novos dados (PUT Blob, PUT Block, PUT Page, PUT File etc.) no armazenamento de blobs ou no armazenamento de arquivos, todas as gravações são criptografadas usando a [criptografia AES](https://en.wikipedia.org/wiki/Advanced_Encryption_Standard) de 256 bits, uma das codificações de bloco mais fortes disponíveis.</span><span class="sxs-lookup"><span data-stu-id="f7e22-179">When the customer writes new data (PUT Blob, PUT Block, PUT Page, PUT File etc.) to Blob or File storage; every write is encrypted using 256-bit [AES encryption](https://en.wikipedia.org/wiki/Advanced_Encryption_Standard), one of the strongest block ciphers available.</span></span>
* <span data-ttu-id="f7e22-180">Quando o cliente precisa acessar os dados (GET Blob etc.), esses dados são descriptografados automaticamente antes de retornar para o usuário.</span><span class="sxs-lookup"><span data-stu-id="f7e22-180">When the customer needs to access data (GET Blob, etc.), data is automatically decrypted before returning to the user.</span></span>
* <span data-ttu-id="f7e22-181">Se a criptografia estiver desabilitada, as novas gravações não serão criptografadas, e os dados criptografados existentes permanecerão criptografados até que sejam regravados pelo usuário.</span><span class="sxs-lookup"><span data-stu-id="f7e22-181">If encryption is disabled, new writes are no longer encrypted and existing encrypted data remains encrypted until rewritten by the user.</span></span> <span data-ttu-id="f7e22-182">Enquanto a criptografia estiver habilitada, as gravações no Armazenamento de Arquivo ou de blobs serão criptografadas.</span><span class="sxs-lookup"><span data-stu-id="f7e22-182">While encryption is enabled, writes to Blob or File storage will be encrypted.</span></span> <span data-ttu-id="f7e22-183">O estado dos dados não muda com a habilitação/desabilitação da criptografia na conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="f7e22-183">The state of data does not change with the user toggling between enabling/disabling encryption for the storage account.</span></span>
* <span data-ttu-id="f7e22-184">Todas as chaves de criptografia são armazenadas, criptografadas e gerenciadas pela Microsoft.</span><span class="sxs-lookup"><span data-stu-id="f7e22-184">All encryption keys are stored, encrypted, and managed by Microsoft.</span></span>

## <a name="frequently-asked-questions-about-storage-service-encryption-for-data-at-rest"></a><span data-ttu-id="f7e22-185">Perguntas frequentes sobre a Criptografia do Serviço de Armazenamento de dados em repouso</span><span class="sxs-lookup"><span data-stu-id="f7e22-185">Frequently asked questions about Storage Service Encryption for Data at Rest</span></span>
<span data-ttu-id="f7e22-186">**P: Tenho uma conta de armazenamento clássica. Posso habilitar o SSE nela?**</span><span class="sxs-lookup"><span data-stu-id="f7e22-186">**Q: I have an existing classic storage account. Can I enable SSE on it?**</span></span>

<span data-ttu-id="f7e22-187">R: Não, apenas contas de armazenamento do Resource Manager dão suporte à SSE.</span><span class="sxs-lookup"><span data-stu-id="f7e22-187">A: No, SSE is only supported on Resource Manager storage accounts.</span></span>

<span data-ttu-id="f7e22-188">**P: Como posso criptografar os dados em minha conta de armazenamento clássica?**</span><span class="sxs-lookup"><span data-stu-id="f7e22-188">**Q: How can I encrypt data in my classic storage account?**</span></span>

<span data-ttu-id="f7e22-189">R: Você pode criar uma nova conta de armazenamento do Resource Manager e copiar seus dados usando o [AzCopy](storage-use-azcopy.md) da conta de armazenamento clássica existente para sua nova conta de armazenamento do Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="f7e22-189">A: You can create a new Resource Manager storage account and copy your data using [AzCopy](storage-use-azcopy.md) from your existing classic storage account to your newly created Resource Manager storage account.</span></span> 

<span data-ttu-id="f7e22-190">Se você migrar sua conta de armazenamento clássico para uma conta de armazenamento do Resource Manager, essa operação será instantânea: ela alterará o tipo de conta, mas não afetará os dados existentes.</span><span class="sxs-lookup"><span data-stu-id="f7e22-190">If you migrate your classic storage account to a Resource Manager storage account, this operation is instantaneous, it changes the type of your account but does not effect your existing data.</span></span> <span data-ttu-id="f7e22-191">Todos os novos dados gravados serão criptografados somente depois que a criptografia for habilitada.</span><span class="sxs-lookup"><span data-stu-id="f7e22-191">Any new data written will be encrypted only after enabling encryption.</span></span> <span data-ttu-id="f7e22-192">Para obter mais informações, consulte [Migração de recursos de IaaS com suporte da plataforma do clássico para o Azure Resource Manager](https://azure.microsoft.com/blog/iaas-migration-classic-resource-manager/).</span><span class="sxs-lookup"><span data-stu-id="f7e22-192">For more information, see [Platform Supported Migration of IaaS Resources from Classic to Resource Manager](https://azure.microsoft.com/blog/iaas-migration-classic-resource-manager/).</span></span> <span data-ttu-id="f7e22-193">Observe que há suporte para isso apenas nos serviços Blob e Arquivo.</span><span class="sxs-lookup"><span data-stu-id="f7e22-193">Please note that this is supported only for Blob and File services.</span></span>

<span data-ttu-id="f7e22-194">**P: posso ter uma conta de armazenamento do Resource Manager existente. Posso habilitar o SSE nela?**</span><span class="sxs-lookup"><span data-stu-id="f7e22-194">**Q: I have an existing Resource Manager storage account. Can I enable SSE on it?**</span></span>

<span data-ttu-id="f7e22-195">R: Sim, mas apenas dados gravados recentemente serão criptografados.</span><span class="sxs-lookup"><span data-stu-id="f7e22-195">A: Yes, but only newly written data will be encrypted.</span></span> <span data-ttu-id="f7e22-196">Ela não criptografa dados que já existiam anteriormente.</span><span class="sxs-lookup"><span data-stu-id="f7e22-196">It does not go back and encrypt data that was already present.</span></span> <span data-ttu-id="f7e22-197">Ainda não há suporte para a visualização do armazenamento de arquivos.</span><span class="sxs-lookup"><span data-stu-id="f7e22-197">This is not yet supported for the File Storage Preview.</span></span>

<span data-ttu-id="f7e22-198">**P: Eu gostaria de criptografar os dados atuais em uma conta de armazenamento do Resource Manager existente?**</span><span class="sxs-lookup"><span data-stu-id="f7e22-198">**Q: I would like to encrypt the current data in an existing Resource Manager storage account?**</span></span>

<span data-ttu-id="f7e22-199">R: Você pode habilitar a SSE a qualquer momento em uma conta de armazenamento do Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="f7e22-199">A: You can enable SSE at any time in a Resource Manager storage account.</span></span> <span data-ttu-id="f7e22-200">No entanto, dados que já existiam não serão criptografados.</span><span class="sxs-lookup"><span data-stu-id="f7e22-200">However, data that were already present will not be encrypted.</span></span> <span data-ttu-id="f7e22-201">Para criptografar os dados existentes, você pode copiá-los para outro nome ou outro contêiner e, depois, remover as versões não criptografadas.</span><span class="sxs-lookup"><span data-stu-id="f7e22-201">To encrypt existing data, you can copy them to another name or another container and then remove the unencrypted versions.</span></span>

<span data-ttu-id="f7e22-202">**P: Estou usando o armazenamento Premium. Posso usar o SSE?**</span><span class="sxs-lookup"><span data-stu-id="f7e22-202">**Q: I'm using Premium storage; can I use SSE?**</span></span>

<span data-ttu-id="f7e22-203">R: Sim, o SSE recebe suporte no Armazenamento Standard e no Armazenamento Premium.</span><span class="sxs-lookup"><span data-stu-id="f7e22-203">A: Yes, SSE is supported on both Standard Storage and Premium Storage.</span></span>  <span data-ttu-id="f7e22-204">Não há suporte para o Armazenamento Premium no Serviço Arquivo.</span><span class="sxs-lookup"><span data-stu-id="f7e22-204">Premium Storage is not supported for the File Service.</span></span>

<span data-ttu-id="f7e22-205">**P: Se eu criar uma nova conta de armazenamento, habilitar o SSE e depois criar uma nova VM usando a conta de armazenamento, isso significa que minha VM está criptografada?**</span><span class="sxs-lookup"><span data-stu-id="f7e22-205">**Q: If I create a new storage account and enable SSE, then create a new VM using that storage account, does that mean my VM is encrypted?**</span></span>

<span data-ttu-id="f7e22-206">R: Sim.</span><span class="sxs-lookup"><span data-stu-id="f7e22-206">A: Yes.</span></span> <span data-ttu-id="f7e22-207">Todos os discos criados que usam a nova conta de armazenamento serão criptografados, desde que eles sejam criados após a habilitação do SSE.</span><span class="sxs-lookup"><span data-stu-id="f7e22-207">Any disks created that use the new storage account will be encrypted, as long as they are created after SSE is enabled.</span></span> <span data-ttu-id="f7e22-208">Se a VM tiver sido criada usando o Azure Marketplace, a imagem base do VHD permanecerá não criptografada; no entanto, quaisquer gravações feitas após a rotação da VM serão criptografadas.</span><span class="sxs-lookup"><span data-stu-id="f7e22-208">If the VM was created using Azure Market Place, the VHD base image will remain unencrypted; however, any writes done after the VM has spun up will be encrypted.</span></span>

<span data-ttu-id="f7e22-209">**P: Posso criar novas contas de armazenamento com o SSE habilitado usando o Azure PowerShell e a CLI do Azure?**</span><span class="sxs-lookup"><span data-stu-id="f7e22-209">**Q: Can I create new storage accounts with SSE enabled using Azure PowerShell and Azure CLI?**</span></span>

<span data-ttu-id="f7e22-210">R: Sim.</span><span class="sxs-lookup"><span data-stu-id="f7e22-210">A: Yes.</span></span>

<span data-ttu-id="f7e22-211">**P: Há algum custo adicional no Armazenamento do Azure se o SSE estiver habilitado?**</span><span class="sxs-lookup"><span data-stu-id="f7e22-211">**Q: How much more does Azure Storage cost if SSE is enabled?**</span></span>

<span data-ttu-id="f7e22-212">R: Não há qualquer custo adicional.</span><span class="sxs-lookup"><span data-stu-id="f7e22-212">A: There is no additional cost.</span></span>

<span data-ttu-id="f7e22-213">**P: Quem gerencia as chaves de criptografia?**</span><span class="sxs-lookup"><span data-stu-id="f7e22-213">**Q: Who manages the encryption keys?**</span></span>

<span data-ttu-id="f7e22-214">R: As chaves são gerenciadas pela Microsoft.</span><span class="sxs-lookup"><span data-stu-id="f7e22-214">A: The keys are managed by Microsoft.</span></span>

<span data-ttu-id="f7e22-215">**P: Posso usar minhas próprias chaves de criptografia?**</span><span class="sxs-lookup"><span data-stu-id="f7e22-215">**Q: Can I use my own encryption keys?**</span></span>

<span data-ttu-id="f7e22-216">R: Estamos trabalhando no fornecimento de recursos para que os clientes tragam suas próprias chaves de criptografia.</span><span class="sxs-lookup"><span data-stu-id="f7e22-216">A: We are working on providing capabilities for customers to bring their own encryption keys.</span></span>

<span data-ttu-id="f7e22-217">**P: Posso revogar o acesso às chaves de criptografia?**</span><span class="sxs-lookup"><span data-stu-id="f7e22-217">**Q: Can I revoke access to the encryption keys?**</span></span>

<span data-ttu-id="f7e22-218">R: Não no momento; as chaves são totalmente gerenciadas pela Microsoft.</span><span class="sxs-lookup"><span data-stu-id="f7e22-218">A: Not at this time; the keys are fully managed by Microsoft.</span></span>

<span data-ttu-id="f7e22-219">**P: O SSE é habilitado por padrão quando eu crio uma nova conta de armazenamento?**</span><span class="sxs-lookup"><span data-stu-id="f7e22-219">**Q: Is SSE enabled by default when I create a new storage account?**</span></span>

<span data-ttu-id="f7e22-220">R: O SSE não está habilitado por padrão. Você pode usar o portal do Azure para habilitá-lo.</span><span class="sxs-lookup"><span data-stu-id="f7e22-220">A: SSE is not enabled by default; you can use the Azure portal to enable it.</span></span> <span data-ttu-id="f7e22-221">Você também pode habilitar esse recurso por meio de programação usando a API REST do Provedor de Recursos de Armazenamento.</span><span class="sxs-lookup"><span data-stu-id="f7e22-221">You can also programmatically enable this feature using the Storage Resource Provider REST API.</span></span>

<span data-ttu-id="f7e22-222">**P: Qual é a diferença para o Azure Disk Encryption?**</span><span class="sxs-lookup"><span data-stu-id="f7e22-222">**Q: How is this different from Azure Disk Encryption?**</span></span>

<span data-ttu-id="f7e22-223">R: Esse recurso é usado para criptografar dados no Armazenamento de Blobs do Azure.</span><span class="sxs-lookup"><span data-stu-id="f7e22-223">A: This feature is used to encrypt data in Azure Blob storage.</span></span> <span data-ttu-id="f7e22-224">A Azure Disk Encryption é usada para criptografar o sistema operacional e discos de dados em VMs de IaaS.</span><span class="sxs-lookup"><span data-stu-id="f7e22-224">The Azure Disk Encryption is used to encrypt OS and Data disks in IaaS VMs.</span></span> <span data-ttu-id="f7e22-225">Para obter mais detalhes, visite nosso [Guia de segurança do armazenamento](../storage-security-guide.md).</span><span class="sxs-lookup"><span data-stu-id="f7e22-225">For more details, please visit our [Storage Security Guide](../storage-security-guide.md).</span></span>

<span data-ttu-id="f7e22-226">**P: E se eu habilitar o SSE e depois habilitar a Azure Disk Encryption nos discos?**</span><span class="sxs-lookup"><span data-stu-id="f7e22-226">**Q: What if I enable SSE, and then go in and enable Azure Disk Encryption on the disks?**</span></span>

<span data-ttu-id="f7e22-227">R: Isso funcionará perfeitamente.</span><span class="sxs-lookup"><span data-stu-id="f7e22-227">A: This will work seamlessly.</span></span> <span data-ttu-id="f7e22-228">Os dados serão criptografados pelos dois métodos.</span><span class="sxs-lookup"><span data-stu-id="f7e22-228">Your data will be encrypted by both methods.</span></span>

<span data-ttu-id="f7e22-229">**P: Minha conta de armazenamento está configurada para ser replicada de forma geograficamente redundante. Se eu habilitar o SSE, minha cópia redundante também será criptografada?**</span><span class="sxs-lookup"><span data-stu-id="f7e22-229">**Q: My storage account is set up to be replicated geo-redundantly. If I enable SSE, will my redundant copy also be encrypted?**</span></span>

<span data-ttu-id="f7e22-230">R: Sim, todas as cópias da conta de armazenamento são criptografadas, e todas as opções de redundância – LRS (Armazenamento com Redundância Local), ZRS (Armazenamento com Redundância de Zona), GRS (Armazenamento com Redundância Geográfica) e RA-GRS (Armazenamento com Redundância Geográfica de Acesso de Leitura) – têm suporte.</span><span class="sxs-lookup"><span data-stu-id="f7e22-230">A: Yes, all copies of the storage account are encrypted, and all redundancy options – Locally Redundant Storage (LRS), Zone-Redundant Storage (ZRS), Geo-Redundant Storage (GRS), and Read Access Geo-Redundant Storage (RA-GRS) – are supported.</span></span>

<span data-ttu-id="f7e22-231">**P: Não consigo habilitar a criptografia em minha conta de armazenamento.**</span><span class="sxs-lookup"><span data-stu-id="f7e22-231">**Q: I can't enable encryption on my storage account.**</span></span>

<span data-ttu-id="f7e22-232">R: A conta é uma conta de armazenamento do Resource Manager?</span><span class="sxs-lookup"><span data-stu-id="f7e22-232">A: Is it a Resource Manager storage account?</span></span> <span data-ttu-id="f7e22-233">Não há suporte para contas de armazenamento clássicas.</span><span class="sxs-lookup"><span data-stu-id="f7e22-233">Classic storage accounts are not supported.</span></span> 

<span data-ttu-id="f7e22-234">**P: A SSE é permitida somente em regiões específicas?**</span><span class="sxs-lookup"><span data-stu-id="f7e22-234">**Q: Is SSE only permitted in specific regions?**</span></span>

<span data-ttu-id="f7e22-235">R: A SSE está disponível em todas as regiões para o armazenamento de blobs.</span><span class="sxs-lookup"><span data-stu-id="f7e22-235">A: The SSE is available in all regions for Blob storage.</span></span> <span data-ttu-id="f7e22-236">Verifique a seção de disponibilidade para o armazenamento de arquivos.</span><span class="sxs-lookup"><span data-stu-id="f7e22-236">Please check the Availability Section for File storage.</span></span> 

<span data-ttu-id="f7e22-237">**P: Como devo contatar alguém se eu tiver problemas ou quiser enviar comentários?**</span><span class="sxs-lookup"><span data-stu-id="f7e22-237">**Q: How do I contact someone if I have any issues or want to provide feedback?**</span></span>

<span data-ttu-id="f7e22-238">R: Entre em contato com [ssediscussions@microsoft.com](mailto:ssediscussions@microsoft.com) para falar sobre problemas relacionados à Criptografia do Serviço de Armazenamento.</span><span class="sxs-lookup"><span data-stu-id="f7e22-238">A: Please contact [ssediscussions@microsoft.com](mailto:ssediscussions@microsoft.com) for any issues related to Storage Service Encryption.</span></span>

## <a name="next-steps"></a><span data-ttu-id="f7e22-239">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="f7e22-239">Next Steps</span></span>
<span data-ttu-id="f7e22-240">O Armazenamento do Azure fornece um conjunto abrangente de recursos de segurança que, juntos, permitem aos desenvolvedores criar aplicativos seguros.</span><span class="sxs-lookup"><span data-stu-id="f7e22-240">Azure Storage provides a comprehensive set of security capabilities which together enable developers to build secure applications.</span></span> <span data-ttu-id="f7e22-241">Para obter mais detalhes, visite o [Guia de segurança do armazenamento](../storage-security-guide.md).</span><span class="sxs-lookup"><span data-stu-id="f7e22-241">For more details, visit the [Storage Security Guide](../storage-security-guide.md).</span></span>

