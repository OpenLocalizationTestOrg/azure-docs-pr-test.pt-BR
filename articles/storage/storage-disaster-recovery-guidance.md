---
title: "O que fazer caso ocorra uma interrupção de Armazenamento do Azure | Microsoft Docs"
description: "O que fazer caso ocorra uma interrupção de Armazenamento do Azure"
services: storage
documentationcenter: .net
author: robinsh
manager: timlt
editor: tysonn
ms.assetid: 8f040b0f-8926-4831-ac07-79f646f31926
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 1/19/2017
ms.author: robinsh
ms.openlocfilehash: 83ab487f382eb84aa64b927bdf5560eec5cbbd6d
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/11/2017
---
# <a name="what-to-do-if-an-azure-storage-outage-occurs"></a><span data-ttu-id="ef8db-103">O que fazer se uma interrupção no Armazenamento do Azure ocorrer</span><span class="sxs-lookup"><span data-stu-id="ef8db-103">What to do if an Azure Storage outage occurs</span></span>
<span data-ttu-id="ef8db-104">Na Microsoft, trabalhamos muito para garantir que nossos serviços estejam sempre disponíveis.</span><span class="sxs-lookup"><span data-stu-id="ef8db-104">At Microsoft, we work hard to make sure our services are always available.</span></span> <span data-ttu-id="ef8db-105">Às vezes, forças além do nosso controle nos afetam de formas que causam interrupções de serviço não planejadas em uma ou mais regiões.</span><span class="sxs-lookup"><span data-stu-id="ef8db-105">Sometimes, forces beyond our control impact us in ways that cause unplanned service outages in one or more regions.</span></span> <span data-ttu-id="ef8db-106">Para ajudá-lo a lidar com essas ocorrências raras, fornecemos as seguintes diretrizes de alto nível para serviços de Armazenamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="ef8db-106">To help you handle these rare occurrences, we provide the following high-level guidance for Azure Storage services.</span></span>

## <a name="how-to-prepare"></a><span data-ttu-id="ef8db-107">Como se preparar</span><span class="sxs-lookup"><span data-stu-id="ef8db-107">How to prepare</span></span>
<span data-ttu-id="ef8db-108">É essencial para todos os clientes preparar seu próprio plano de recuperação de desastre.</span><span class="sxs-lookup"><span data-stu-id="ef8db-108">It is critical for every customer to prepare their own disaster recovery plan.</span></span> <span data-ttu-id="ef8db-109">O esforço para se recuperar de uma interrupção de armazenamento geralmente envolve a equipe de operações e procedimentos automatizados para reativar os aplicativos em um estado funcional.</span><span class="sxs-lookup"><span data-stu-id="ef8db-109">The effort to recover from a storage outage typically involves both operations personnel and automated procedures in order to reactivate your applications in a functioning state.</span></span> <span data-ttu-id="ef8db-110">Consulte a documentação do Azure abaixo para compilar seu próprio plano de recuperação de desastre:</span><span class="sxs-lookup"><span data-stu-id="ef8db-110">Please refer to the Azure documentation below to build your own disaster recovery plan:</span></span>

* [<span data-ttu-id="ef8db-111">Recuperação de desastre e alta disponibilidade para aplicativos do Azure</span><span class="sxs-lookup"><span data-stu-id="ef8db-111">Disaster recovery and high availability for Azure applications</span></span>](../resiliency/resiliency-disaster-recovery-high-availability-azure-applications.md)
* [<span data-ttu-id="ef8db-112">Orientações técnicas de resiliência do Azure</span><span class="sxs-lookup"><span data-stu-id="ef8db-112">Azure resiliency technical guidance</span></span>](../resiliency/resiliency-technical-guidance.md)
* [<span data-ttu-id="ef8db-113">Serviço do Azure Site Recovery</span><span class="sxs-lookup"><span data-stu-id="ef8db-113">Azure Site Recovery service</span></span>](https://azure.microsoft.com/services/site-recovery/)
* [<span data-ttu-id="ef8db-114">Replicação de Armazenamento do Azure</span><span class="sxs-lookup"><span data-stu-id="ef8db-114">Azure Storage replication</span></span>](storage-redundancy.md)
* [<span data-ttu-id="ef8db-115">Serviço de Backup do Azure</span><span class="sxs-lookup"><span data-stu-id="ef8db-115">Azure Backup service</span></span>](https://azure.microsoft.com/services/backup/)

## <a name="how-to-detect"></a><span data-ttu-id="ef8db-116">Como detectar</span><span class="sxs-lookup"><span data-stu-id="ef8db-116">How to detect</span></span>
<span data-ttu-id="ef8db-117">A maneira recomendada de determinar o status de serviço do Azure é assinar o [Painel de Integridade do Serviço do Azure](https://azure.microsoft.com/status/).</span><span class="sxs-lookup"><span data-stu-id="ef8db-117">The recommended way to determine the Azure service status is to subscribe to the [Azure Service Health Dashboard](https://azure.microsoft.com/status/).</span></span>

## <a name="what-to-do-if-a-storage-outage-occurs"></a><span data-ttu-id="ef8db-118">O que fazer se uma interrupção no Armazenamento ocorrer</span><span class="sxs-lookup"><span data-stu-id="ef8db-118">What to do if a Storage outage occurs</span></span>
<span data-ttu-id="ef8db-119">Se um ou mais serviços de Armazenamento estão indisponíveis no momento em uma ou mais regiões, há duas opções a serem consideradas.</span><span class="sxs-lookup"><span data-stu-id="ef8db-119">If one or more Storage services are temporarily unavailable at one or more regions, there are two options for you to consider.</span></span> <span data-ttu-id="ef8db-120">Se você quiser acesso imediato a seus dados, considere a Opção 2.</span><span class="sxs-lookup"><span data-stu-id="ef8db-120">If you desire immediate access to your data, please consider Option 2.</span></span>

### <a name="option-1-wait-for-recovery"></a><span data-ttu-id="ef8db-121">Opção 1: aguardar a recuperação</span><span class="sxs-lookup"><span data-stu-id="ef8db-121">Option 1: Wait for recovery</span></span>
<span data-ttu-id="ef8db-122">Nesse caso, nenhuma ação sua é necessária.</span><span class="sxs-lookup"><span data-stu-id="ef8db-122">In this case, no action on your part is required.</span></span> <span data-ttu-id="ef8db-123">Estamos trabalhando cuidadosamente para restaurar a disponibilidade do serviço do Azure.</span><span class="sxs-lookup"><span data-stu-id="ef8db-123">We are working diligently to restore the Azure service availability.</span></span> <span data-ttu-id="ef8db-124">Você pode ver o status atual do serviço no nosso [Painel de Integridade do Serviço do Azure](https://azure.microsoft.com/status/).</span><span class="sxs-lookup"><span data-stu-id="ef8db-124">You can monitor the service status on the [Azure Service Health Dashboard](https://azure.microsoft.com/status/).</span></span>

### <a name="option-2-copy-data-from-secondary"></a><span data-ttu-id="ef8db-125">Opção 2: copiar os dados do secundário</span><span class="sxs-lookup"><span data-stu-id="ef8db-125">Option 2: Copy data from secondary</span></span>
<span data-ttu-id="ef8db-126">Se você escolheu [RA-GRS (armazenamento com redundância geográfica de acesso de leitura)](storage-redundancy.md#read-access-geo-redundant-storage) (recomendado) para suas contas de armazenamento, você terá acesso de leitura aos dados da região secundária.</span><span class="sxs-lookup"><span data-stu-id="ef8db-126">If you chose [Read-access geo-redundant storage (RA-GRS)](storage-redundancy.md#read-access-geo-redundant-storage) (recommended) for your storage accounts, you will have read access to your data from the secondary region.</span></span> <span data-ttu-id="ef8db-127">Você pode usar ferramentas como [AzCopy](storage-use-azcopy.md), [Azure PowerShell](storage-powershell-guide-full.md) e [biblioteca de Movimentação de Dados do Azure](https://azure.microsoft.com/blog/introducing-azure-storage-data-movement-library-preview-2/) para copiar dados da região secundária para outra conta de armazenamento em uma região não afetada e, em seguida, apontar os aplicativos para essa conta de armazenamento para disponibilidade de leitura e gravação.</span><span class="sxs-lookup"><span data-stu-id="ef8db-127">You can use tools such as [AzCopy](storage-use-azcopy.md), [Azure PowerShell](storage-powershell-guide-full.md), and the [Azure Data Movement library](https://azure.microsoft.com/blog/introducing-azure-storage-data-movement-library-preview-2/) to copy data from the secondary region into another storage account in an unimpacted region, and then point your applications to that storage account for both read and write availability.</span></span>

## <a name="what-to-expect-if-a-storage-failover-occurs"></a><span data-ttu-id="ef8db-128">O que esperar se ocorrer um failover de Armazenamento</span><span class="sxs-lookup"><span data-stu-id="ef8db-128">What to expect if a Storage failover occurs</span></span>
<span data-ttu-id="ef8db-129">Se você tiver escolhido [GRS (armazenamento com redundância geográfica)](storage-redundancy.md#geo-redundant-storage) ou [RA-GRS (armazenamento com redundância geográfica de acesso de leitura)](storage-redundancy.md#read-access-geo-redundant-storage) (recomendado), o Armazenamento do Azure mantém seus dados duráveis em duas regiões (primária e secundária).</span><span class="sxs-lookup"><span data-stu-id="ef8db-129">If you chose [Geo-redundant storage (GRS)](storage-redundancy.md#geo-redundant-storage) or [Read-access geo-redundant storage (RA-GRS)](storage-redundancy.md#read-access-geo-redundant-storage) (recommended), Azure Storage will keep your data durable in two regions (primary and secondary).</span></span> <span data-ttu-id="ef8db-130">Em ambas as regiões, o Armazenamento do Azure mantém constantemente várias réplicas de seus dados.</span><span class="sxs-lookup"><span data-stu-id="ef8db-130">In both regions, Azure Storage constantly maintains multiple replicas of your data.</span></span>

<span data-ttu-id="ef8db-131">Quando um desastre regional afeta sua região primária, primeiro tentaremos restaurar o serviço nessa região.</span><span class="sxs-lookup"><span data-stu-id="ef8db-131">When a regional disaster affects your primary region, we will first try to restore the service in that region.</span></span> <span data-ttu-id="ef8db-132">Dependendo da natureza do desastre e seus impactos, em algumas ocasiões raras não será possível restaurar a região primária.</span><span class="sxs-lookup"><span data-stu-id="ef8db-132">Dependent upon the nature of the disaster and its impacts, in some rare occasions we may not be able to restore the primary region.</span></span> <span data-ttu-id="ef8db-133">Nesse ponto, executaremos um failover geográfico.</span><span class="sxs-lookup"><span data-stu-id="ef8db-133">At that point, we will perform a geo-failover.</span></span> <span data-ttu-id="ef8db-134">A replicação de dados entre regiões é um processo assíncrono que pode envolver um atraso, portanto, é possível que as alterações que ainda não foram replicadas para a região secundária sejam perdidas.</span><span class="sxs-lookup"><span data-stu-id="ef8db-134">The cross-region data replication is an asynchronous process which can involve a delay, so it is possible that changes that have not yet been replicated to the secondary region may be lost.</span></span> <span data-ttu-id="ef8db-135">Você pode consultar o ["Horário da última sincronização" da sua conta de armazenamento](https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/11/windows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage/) para obter detalhes sobre o status da replicação.</span><span class="sxs-lookup"><span data-stu-id="ef8db-135">You can query the ["Last Sync Time" of your storage account](https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/11/windows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage/) to get details on the replication status.</span></span>

<span data-ttu-id="ef8db-136">Alguns pontos sobre a experiência de failover geográfico de armazenamento:</span><span class="sxs-lookup"><span data-stu-id="ef8db-136">A couple of points regarding the storage geo-failover experience:</span></span>

* <span data-ttu-id="ef8db-137">O failover geográfico de armazenamento somente será disparado pela equipe do Armazenamento do Azure – não é necessária nenhuma ação do cliente.</span><span class="sxs-lookup"><span data-stu-id="ef8db-137">Storage geo-failover will only be triggered by the Azure Storage team – there is no customer action required.</span></span>
* <span data-ttu-id="ef8db-138">Os pontos de extremidade de serviço armazenamento existente para blobs, tabelas, filas e arquivos permanecerão os mesmos após o failover; a entrada DNS precisa ser atualizada para alternar da região primária para a região secundária.</span><span class="sxs-lookup"><span data-stu-id="ef8db-138">Your existing storage service endpoints for blobs, tables, queues, and files will remain the same after the failover; the DNS entry will need to be updated to switch from the primary region to the secondary region.</span></span>
* <span data-ttu-id="ef8db-139">Antes e durante o failover geográfico, você não terá acesso de gravação à conta de armazenamento devido ao impacto do desastre, mas você poderá ler por meio do secundário se sua conta de armazenamento tiver sido configurada como RA-GRS.</span><span class="sxs-lookup"><span data-stu-id="ef8db-139">Before and during the geo-failover, you won't have write access to your storage account due to the impact of the disaster but you can still read from the secondary if your storage account has been configured as RA-GRS.</span></span>
* <span data-ttu-id="ef8db-140">Quando o failover geográfico for concluído e as alterações DNS propagadas, o acesso de leitura e gravação à sua conta de armazenamento será retomado. Isso indica o que costumava ser seu ponto de extremidade secundário.</span><span class="sxs-lookup"><span data-stu-id="ef8db-140">When the geo-failover has been completed and the DNS changes propagated, read and write access to your storage account will be resumed; this points to what used to be your secondary endpoint.</span></span> 
* <span data-ttu-id="ef8db-141">Observe que você terá acesso de gravação se tiver GRS ou RA-GRS configurado para a conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="ef8db-141">Note that you will have write access if you have GRS or RA-GRS configured for the storage account.</span></span> 
* <span data-ttu-id="ef8db-142">Você pode consultar ["Horário do Último Failover Geográfico" da sua conta de armazenamento](https://msdn.microsoft.com/library/azure/ee460802.aspx) para obter mais detalhes.</span><span class="sxs-lookup"><span data-stu-id="ef8db-142">You can query ["Last Geo Failover Time" of your storage account](https://msdn.microsoft.com/library/azure/ee460802.aspx) to get more details.</span></span>
* <span data-ttu-id="ef8db-143">Após o failover, sua conta de armazenamento estará em funcionamento total, mas em um status "degradado", pois costuma ficar hospedada em uma região autônoma sem replicação geográfica possível.</span><span class="sxs-lookup"><span data-stu-id="ef8db-143">After the failover, your storage account will be fully functioning, but in a "degraded" status, as it is actually hosted in a standalone region with no geo-replication possible.</span></span> <span data-ttu-id="ef8db-144">Para reduzir esse risco, podemos restaurar a região primária original e, em seguida, fazer um failback geográfico para restaurar o estado original.</span><span class="sxs-lookup"><span data-stu-id="ef8db-144">To mitigate this risk, we will restore the original primary region and then do a geo-failback to restore the original state.</span></span> <span data-ttu-id="ef8db-145">Se a região primária original for irrecuperável, alocaremos outra região secundária.</span><span class="sxs-lookup"><span data-stu-id="ef8db-145">If the original primary region is unrecoverable, we will allocate another secondary region.</span></span>
  <span data-ttu-id="ef8db-146">Para obter mais detalhes sobre a infraestrutura de replicação geográfica de Armazenamento do Azure, consulte o artigo no blog da equipe de Armazenamento sobre [Opções de Redundância e RA-GRS](https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/11/windows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage/).</span><span class="sxs-lookup"><span data-stu-id="ef8db-146">For more details on the infrastructure of Azure Storage geo replication, please refer to the article on the Storage team blog about [Redundancy Options and RA-GRS](https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/11/windows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage/).</span></span>

## <a name="best-practices-for-protecting-your-data"></a><span data-ttu-id="ef8db-147">Melhores Práticas para proteger seus dados</span><span class="sxs-lookup"><span data-stu-id="ef8db-147">Best Practices for protecting your data</span></span>
<span data-ttu-id="ef8db-148">Há algumas abordagens recomendadas para fazer backup de seus dados de armazenamento regularmente.</span><span class="sxs-lookup"><span data-stu-id="ef8db-148">There are some recommended approaches to back up your storage data on a regular basis.</span></span>

* <span data-ttu-id="ef8db-149">Discos VM – Use o [serviço de Backup do Azure](https://azure.microsoft.com/services/backup/) para fazer backup dos discos VM usados pelas máquinas virtuais do Azure.</span><span class="sxs-lookup"><span data-stu-id="ef8db-149">VM Disks – Use the [Azure Backup service](https://azure.microsoft.com/services/backup/) to back up the VM disks used by your Azure virtual machines.</span></span>
* <span data-ttu-id="ef8db-150">Blobs de bloco – crie um [instantâneo](https://msdn.microsoft.com/library/azure/hh488361.aspx) de cada blob de blocos ou copie os blobs para outra conta de armazenamento em outra região usando o [AzCopy](storage-use-azcopy.md), o [Azure PowerShell](storage-powershell-guide-full.md) ou a [biblioteca de Movimentação de Dados do Azure](https://azure.microsoft.com/blog/introducing-azure-storage-data-movement-library-preview-2/).</span><span class="sxs-lookup"><span data-stu-id="ef8db-150">Block blobs –Create a [snapshot](https://msdn.microsoft.com/library/azure/hh488361.aspx) of each block blob, or copy the blobs to another storage account in another region using [AzCopy](storage-use-azcopy.md), [Azure PowerShell](storage-powershell-guide-full.md), or the [Azure Data Movement library](https://azure.microsoft.com/blog/introducing-azure-storage-data-movement-library-preview-2/).</span></span>
* <span data-ttu-id="ef8db-151">Tabelas – Use [AzCopy](storage-use-azcopy.md) para exportar os dados da tabela para outra conta de armazenamento em outra região.</span><span class="sxs-lookup"><span data-stu-id="ef8db-151">Tables – use [AzCopy](storage-use-azcopy.md) to export the table data into another storage account in another region.</span></span>
* <span data-ttu-id="ef8db-152">Arquivos – use [AzCopy](storage-use-azcopy.md) ou [Azure PowerShell](storage-powershell-guide-full.md) para copiar os arquivos para outra conta de armazenamento em outra região.</span><span class="sxs-lookup"><span data-stu-id="ef8db-152">Files – use [AzCopy](storage-use-azcopy.md) or [Azure PowerShell](storage-powershell-guide-full.md) to copy your files to another storage account in another region.</span></span>

<span data-ttu-id="ef8db-153">Para obter informações sobre como criar aplicativos que se beneficiam do recurso RA-GRS, confira [Criação de aplicativos altamente disponíveis usando o Armazenamento de RA-GRS](storage-designing-ha-apps-with-ragrs.md)</span><span class="sxs-lookup"><span data-stu-id="ef8db-153">For information about creating applications that take full advantage of the RA-GRS feature, please check out [Designing Highly Available Applications using RA-GRS Storage](storage-designing-ha-apps-with-ragrs.md)</span></span>

