---
title: "aaaDesigning aplicativos altamente disponíveis usando o armazenamento com redundância geográfica do Azure acesso de leitura (RA-GRS) | Microsoft Docs"
description: "Como toouse Azure RA-GRS armazenamento tooarchitect um aplicativo altamente disponível flexível suficiente toohandle interrupções."
services: storage
documentationcenter: .net
author: robinsh
manager: timlt
editor: tysonn
ms.assetid: 8f040b0f-8926-4831-ac07-79f646f31926
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 1/19/2017
ms.author: robinsh
ms.openlocfilehash: e4a9fe7ef33eecd894408b3c1ef59920a248d1bd
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="designing-highly-available-applications-using-ra-grs"></a><span data-ttu-id="36cb9-103">Criando aplicativos altamente disponíveis usando RA-GRS</span><span class="sxs-lookup"><span data-stu-id="36cb9-103">Designing Highly Available Applications using RA-GRS</span></span>

<span data-ttu-id="36cb9-104">Um recurso comum das infraestruturas de nuvem é que elas fornecem uma plataforma altamente disponível para hospedar aplicativos.</span><span class="sxs-lookup"><span data-stu-id="36cb9-104">A common feature of cloud-based infrastructures is that they provide a highly available platform for hosting applications.</span></span> <span data-ttu-id="36cb9-105">Os desenvolvedores de aplicativos baseados em nuvem devem considerar cuidadosamente como tooleverage usuários de tootheir essa plataforma toodeliver aplicativos altamente disponíveis.</span><span class="sxs-lookup"><span data-stu-id="36cb9-105">Developers of cloud-based applications must consider carefully how tooleverage this platform toodeliver highly available applications tootheir users.</span></span> <span data-ttu-id="36cb9-106">Este artigo se concentra especificamente em como os desenvolvedores podem usar toomake de armazenamento de redundância geográfica (RA-GRS) de acesso de leitura de armazenamento do Azure Olá seus aplicativos mais disponíveis.</span><span class="sxs-lookup"><span data-stu-id="36cb9-106">This article focuses specifically on how developers can use hello Azure Storage Read Access Geo Redundant Storage (RA-GRS) toomake their applications more available.</span></span>

<span data-ttu-id="36cb9-107">Há quatro opções de redundância: LRS (armazenamento com redundância local), ZRS (armazenamento com redundância de zona), GRS (armazenamento com redundância geográfica) e RA-GRS (armazenamento com redundância geográfica com acesso de leitura).</span><span class="sxs-lookup"><span data-stu-id="36cb9-107">There are four choices for redundancy – LRS (Locally Redundant Storage), ZRS (Zone Redundant Storage), GRS (Geo-Redundant Storage), and RA-GRS (Read Access Geo-Redundant Storage).</span></span> <span data-ttu-id="36cb9-108">Vamos toodiscuss GRS e RA-GRS neste artigo.</span><span class="sxs-lookup"><span data-stu-id="36cb9-108">We are going toodiscuss GRS and RA-GRS in this article.</span></span> <span data-ttu-id="36cb9-109">Com o GRS, três cópias de seus dados são mantidas na região primária hello, que você selecionou ao configurar a conta de armazenamento hello.</span><span class="sxs-lookup"><span data-stu-id="36cb9-109">With GRS, three copies of your data are kept in hello primary region you selected when setting up hello storage account.</span></span> <span data-ttu-id="36cb9-110">Três cópias adicionais são mantidas de forma assíncrona em uma região secundária especificada pelo Azure.</span><span class="sxs-lookup"><span data-stu-id="36cb9-110">Three additional copies are maintained asynchronously in a secondary region specified by Azure.</span></span> <span data-ttu-id="36cb9-111">RA-GRS é Olá mesma coisa que GRS, exceto que você tem acesso de leitura toohello segunda cópia.</span><span class="sxs-lookup"><span data-stu-id="36cb9-111">RA-GRS is hello same thing as GRS except that you have read access toohello secondary copy.</span></span> <span data-ttu-id="36cb9-112">Para obter mais informações sobre as diferentes opções de redundância de armazenamento do Azure hello, consulte [replicação de armazenamento do Azure](https://docs.microsoft.com/en-us/azure/storage/storage-redundancy).</span><span class="sxs-lookup"><span data-stu-id="36cb9-112">For more information about hello different Azure Storage redundancy options, see [Azure Storage replication](https://docs.microsoft.com/en-us/azure/storage/storage-redundancy).</span></span> <span data-ttu-id="36cb9-113">artigo de replicação Olá também mostra Olá emparelhamentos de regiões de saudação primários e secundários.</span><span class="sxs-lookup"><span data-stu-id="36cb9-113">hello replication article also shows hello pairings of hello primary and secondary regions.</span></span>

<span data-ttu-id="36cb9-114">Há trechos de código incluídos neste artigo, e um exemplo completo de tooa link final Olá que você pode baixar e executar.</span><span class="sxs-lookup"><span data-stu-id="36cb9-114">There are code snippets included in this article, and a link tooa complete sample at hello end that you can download and run.</span></span>

## <a name="key-features-of-ra-grs"></a><span data-ttu-id="36cb9-115">Principais recursos do RA-GRS</span><span class="sxs-lookup"><span data-stu-id="36cb9-115">Key features of RA-GRS</span></span>

<span data-ttu-id="36cb9-116">Antes de falarmos sobre como toouse armazenamento RA-GRS, vamos falar sobre suas propriedades e comportamento.</span><span class="sxs-lookup"><span data-stu-id="36cb9-116">Before we talk about how toouse RA-GRS storage, let's talk about its properties and behavior.</span></span>

* <span data-ttu-id="36cb9-117">Armazenamento do Azure mantém uma cópia somente leitura de dados de saudação que armazenar em sua região primária em uma região secundária; conforme observado acima, o serviço de armazenamento de saudação determina a localização de Olá da região secundária hello.</span><span class="sxs-lookup"><span data-stu-id="36cb9-117">Azure Storage maintains a read-only copy of hello data you store in your primary region in a secondary region; as noted above, hello storage service determines hello location of hello secondary region.</span></span>

* <span data-ttu-id="36cb9-118">cópia de somente leitura Olá é [finalmente consistente](https://en.wikipedia.org/wiki/Eventual_consistency) com dados Olá na região primária hello.</span><span class="sxs-lookup"><span data-stu-id="36cb9-118">hello read-only copy is [eventually consistent](https://en.wikipedia.org/wiki/Eventual_consistency) with hello data in hello primary region.</span></span>

* <span data-ttu-id="36cb9-119">Para blobs, tabelas e filas, você pode consultar a região secundária Olá para um *hora da última sincronização* valor que indica quando ocorreu a última replicação Olá da região secundária do hello toohello primário.</span><span class="sxs-lookup"><span data-stu-id="36cb9-119">For blobs, tables, and queues, you can query hello secondary region for a *Last Sync Time* value that tells you when hello last replication from hello primary toohello secondary region occurred.</span></span> <span data-ttu-id="36cb9-120">(Não há suporte para isso no Armazenamento de Arquivos do Azure, os quais não têm redundância RA-GRS no momento.)</span><span class="sxs-lookup"><span data-stu-id="36cb9-120">(This is not supported for Azure File storage, which doesn't have RA-GRS redundancy at this time.)</span></span>

* <span data-ttu-id="36cb9-121">Você pode usar o hello toointeract de biblioteca de cliente de armazenamento com dados de saudação em qualquer região primária ou secundária de saudação.</span><span class="sxs-lookup"><span data-stu-id="36cb9-121">You can use hello Storage Client Library toointeract with hello data in either hello primary or secondary region.</span></span> <span data-ttu-id="36cb9-122">Você também pode redirecionar solicitações de leitura automaticamente região secundária toohello se uma região primária do toohello de solicitação de leitura o tempo limite.</span><span class="sxs-lookup"><span data-stu-id="36cb9-122">You can also redirect read requests automatically toohello secondary region if a read request toohello primary region times out.</span></span>

* <span data-ttu-id="36cb9-123">Se houver um problema grave que afetam a acessibilidade de saudação de dados de saudação na região primária hello, Olá, equipe do Azure pode disparar um failover geográfico, no ponto em que as entradas DNS Olá apontando região primária toohello será região secundária do toohello toopoint alterados.</span><span class="sxs-lookup"><span data-stu-id="36cb9-123">If there is a major issue affecting hello accessibility of hello data in hello primary region, hello Azure team may trigger a geo-failover, at which point hello DNS entries pointing toohello primary region will be changed toopoint toohello secondary region.</span></span>

* <span data-ttu-id="36cb9-124">Se ocorrer um failover geográfico, Azure selecione um novo local secundário e replicar o local de toothat dados hello e Olá secundário tooit de entradas DNS do ponto.</span><span class="sxs-lookup"><span data-stu-id="36cb9-124">If a geo-failover occurs, Azure will select a new secondary location and replicate hello data toothat location, then point hello secondary DNS entries tooit.</span></span> <span data-ttu-id="36cb9-125">ponto de extremidade secundário Olá estarão disponível até que a conta de armazenamento Olá concluiu a replicação.</span><span class="sxs-lookup"><span data-stu-id="36cb9-125">hello secondary endpoint will be unavailable until hello storage account has finished replicating.</span></span> <span data-ttu-id="36cb9-126">Para obter mais informações, consulte [que toodo se ocorrer uma interrupção de armazenamento do Azure](https://docs.microsoft.com/en-us/azure/storage/storage-disaster-recovery-guidance).</span><span class="sxs-lookup"><span data-stu-id="36cb9-126">For more information, please see [What toodo if an Azure Storage outage occurs](https://docs.microsoft.com/en-us/azure/storage/storage-disaster-recovery-guidance).</span></span>

## <a name="application-design-considerations-when-using-ra-grs"></a><span data-ttu-id="36cb9-127">Considerações de design de aplicativo ao usar RA-GRS</span><span class="sxs-lookup"><span data-stu-id="36cb9-127">Application design considerations when using RA-GRS</span></span>

<span data-ttu-id="36cb9-128">Olá principal finalidade deste artigo é tooshow você como um aplicativo que continuará toofunction (embora em uma capacidade limitada) até mesmo em caso de Olá de um desastre de grande proporções dados primários de saudação do toodesign center.</span><span class="sxs-lookup"><span data-stu-id="36cb9-128">hello main purpose of this article is tooshow you how toodesign an application that will continue toofunction (albeit in a limited capacity) even in hello event of a major disaster at hello primary data center.</span></span> <span data-ttu-id="36cb9-129">Isso é feito com seu transitório do aplicativo toohandle ou problemas de execução longa alternando tooread da região secundária Olá enquanto há um problema e alternar de volta quando a região primária hello está disponível novamente.</span><span class="sxs-lookup"><span data-stu-id="36cb9-129">You do this by having your application toohandle transient or long-running issues by switching tooread from hello secondary region while there is a problem, and switching back when hello primary region is available again.</span></span>

### <a name="using-eventually-consistent-data"></a><span data-ttu-id="36cb9-130">Usando dados eventualmente consistentes</span><span class="sxs-lookup"><span data-stu-id="36cb9-130">Using eventually consistent data</span></span>

<span data-ttu-id="36cb9-131">Esta solução pressupõe que ele é tooreturn okey o que poderia ser o aplicativo de chamada de toohello dados obsoletos.</span><span class="sxs-lookup"><span data-stu-id="36cb9-131">This proposed solution assumes that it is okay tooreturn what could be stale data toohello calling application.</span></span> <span data-ttu-id="36cb9-132">Porque os dados secundários Olá seja finalmente consistentes, é possível que dados saudação foi escritos toohello principal mas Olá atualização toohello secundário não foi concluída replicando quando a região primária Olá tornou-se inacessível.</span><span class="sxs-lookup"><span data-stu-id="36cb9-132">Because hello secondary data is eventually consistent, it is possible that hello data was written toohello primary but hello update toohello secondary had not finished replicating when hello primary region became inaccessible.</span></span>

<span data-ttu-id="36cb9-133">Por exemplo, o cliente pode enviar uma atualização bem-sucedida e Olá primário foi vá para baixo antes atualização hello é propagado toohello secundário.</span><span class="sxs-lookup"><span data-stu-id="36cb9-133">For example, your customer could submit an update that is successful, and then hello primary could go down before hello update is propagated toohello secondary.</span></span> <span data-ttu-id="36cb9-134">Nesse caso, se o cliente hello, em seguida, solicita dados de saudação tooread novamente, ele recebe dados obsoletos saudação em vez de dados atualizado de saudação.</span><span class="sxs-lookup"><span data-stu-id="36cb9-134">In this case, if hello customer then asks tooread hello data back, he receives hello stale data instead of hello updated data.</span></span> <span data-ttu-id="36cb9-135">Você deve decidir se isso for aceitável e nesse caso, como você cliente Olá será uma mensagem.</span><span class="sxs-lookup"><span data-stu-id="36cb9-135">You must decide if this is acceptable, and if so, how you will message hello customer.</span></span> <span data-ttu-id="36cb9-136">Você verá como toocheck Olá hora da última sincronização Olá secundário dados posteriormente neste artigo toosee se Olá secundário for atualizado.</span><span class="sxs-lookup"><span data-stu-id="36cb9-136">You'll see how toocheck hello Last Sync Time on hello secondary data later in this article toosee if hello secondary is up-to-date.</span></span>

### <a name="handling-services-separately-or-all-together"></a><span data-ttu-id="36cb9-137">Tratamento de serviços separadamente ou em conjunto</span><span class="sxs-lookup"><span data-stu-id="36cb9-137">Handling services separately or all together</span></span>

<span data-ttu-id="36cb9-138">Embora provavelmente não é possível para um serviço toobecome indisponível enquanto hello outros serviços ainda totalmente funcionais.</span><span class="sxs-lookup"><span data-stu-id="36cb9-138">While not likely, it is possible for one service toobecome unavailable while hello other services are still fully functional.</span></span> <span data-ttu-id="36cb9-139">Você podem identificador Olá repetições e o modo somente leitura para cada serviço separadamente (blobs, filas, tabelas), ou você pode manipular novas tentativas genericamente para todos os serviços de armazenamento Olá juntos.</span><span class="sxs-lookup"><span data-stu-id="36cb9-139">You can handle hello retries and read-only mode for each service separately (blobs, queues, tables), or you can handle retries generically for all hello storage services together.</span></span>

<span data-ttu-id="36cb9-140">Por exemplo, se você usar filas e blobs em seu aplicativo, você pode decidir tooput em erros de nova tentativa de toohandle de código separado para cada um deles.</span><span class="sxs-lookup"><span data-stu-id="36cb9-140">For example, if you use queues and blobs in your application, you may decide tooput in separate code toohandle retryable errors for each of these.</span></span> <span data-ttu-id="36cb9-141">Em seguida, se você obter uma nova tentativa do serviço de blob Olá, mas o serviço de fila Olá ainda está funcionando, apenas parte de saudação do seu aplicativo que trata os blobs será afetado.</span><span class="sxs-lookup"><span data-stu-id="36cb9-141">Then if you get a retry from hello blob service, but hello queue service is still working, only hello part of your application that handles blobs will be impacted.</span></span> <span data-ttu-id="36cb9-142">Se você decidir toohandle serviço de armazenamento de todas as tentativas de forma genérica e um serviço de blob toohello chamada retornará um erro reproduzível, solicitações tooboth Olá blob service e serviço de fila hello serão afetados.</span><span class="sxs-lookup"><span data-stu-id="36cb9-142">If you decide toohandle all storage service retries generically and a call toohello blob service returns a retryable error, then requests tooboth hello blob service and hello queue service will be impacted.</span></span>

<span data-ttu-id="36cb9-143">Por fim, isso depende de complexidade de saudação do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="36cb9-143">Ultimately, this depends on hello complexity of your application.</span></span> <span data-ttu-id="36cb9-144">Você pode decidir não falhas de saudação toohandle pelo serviço, mas em vez disso tooredirect solicitações para todos os storage services toohello região secundária de leitura e executar o aplicativo hello no modo somente leitura quando detectar um problema com qualquer serviço de armazenamento na região primária hello.</span><span class="sxs-lookup"><span data-stu-id="36cb9-144">You may decide not toohandle hello failures by service, but instead tooredirect read requests for all storage services toohello secondary region and run hello application in read-only mode when you detect a problem with any storage service in hello primary region.</span></span>

### <a name="other-considerations"></a><span data-ttu-id="36cb9-145">Outras considerações</span><span class="sxs-lookup"><span data-stu-id="36cb9-145">Other considerations</span></span>

<span data-ttu-id="36cb9-146">Esses são Olá outras considerações, discutiremos no restante deste artigo hello.</span><span class="sxs-lookup"><span data-stu-id="36cb9-146">These are hello other considerations we will discuss in hello rest of this article.</span></span>

*   <span data-ttu-id="36cb9-147">Lidar com repetições de solicitações de leitura usando o padrão de disjuntor Olá</span><span class="sxs-lookup"><span data-stu-id="36cb9-147">Handling retries of read requests using hello Circuit Breaker pattern</span></span>

*   <span data-ttu-id="36cb9-148">Dados finalmente consistente e hello hora da última sincronização</span><span class="sxs-lookup"><span data-stu-id="36cb9-148">Eventually-consistent data and hello Last Sync Time</span></span>

*   <span data-ttu-id="36cb9-149">Testando</span><span class="sxs-lookup"><span data-stu-id="36cb9-149">Testing</span></span>

## <a name="running-your-application-in-read-only-mode"></a><span data-ttu-id="36cb9-150">Executando o aplicativo no modo somente leitura</span><span class="sxs-lookup"><span data-stu-id="36cb9-150">Running your application in read-only mode</span></span>

<span data-ttu-id="36cb9-151">toouse armazenamento RA-GRS, você deve ser solicitações de leitura de ambos os capaz de toohandle falhado e falha de solicitações de atualização (com atualização nesse caso, significando inserções, atualizações e exclusões).</span><span class="sxs-lookup"><span data-stu-id="36cb9-151">toouse RA-GRS storage, you must be able toohandle both failed read requests and failed update requests (with update in this case meaning inserts, updates, and deletions).</span></span> <span data-ttu-id="36cb9-152">Se hello primário data center falhar, ler solicitações podem ser redirecionadas toohello data center secundário, mas não de solicitações de atualização porque Olá secundário é somente leitura.</span><span class="sxs-lookup"><span data-stu-id="36cb9-152">If hello primary data center fails, read requests can be redirected toohello secondary data center, but update requests cannot because hello secondary is read only.</span></span> <span data-ttu-id="36cb9-153">Por esse motivo, é necessário algum toorun de maneira seu aplicativo no modo somente leitura.</span><span class="sxs-lookup"><span data-stu-id="36cb9-153">For this reason, you need some way toorun your application in read-only mode.</span></span>

<span data-ttu-id="36cb9-154">Por exemplo, você pode definir um sinalizador que será verificado antes de enviar qualquer serviço de armazenamento de toohello de solicitações de atualização.</span><span class="sxs-lookup"><span data-stu-id="36cb9-154">For example, you can set a flag that will be checked before submitting any update requests toohello storage service.</span></span> <span data-ttu-id="36cb9-155">Quando uma das solicitações de atualização de saudação passa pelo, você pode ignorá-la e retornar um cliente de toohello resposta apropriada.</span><span class="sxs-lookup"><span data-stu-id="36cb9-155">When one of hello update requests comes through, you can skip it and return an appropriate response toohello customer.</span></span> <span data-ttu-id="36cb9-156">Você pode até mesmo desejada toodisable totalmente determinados recursos até Olá problema seja resolvido e notificar os usuários que esses recursos estão temporariamente indisponíveis.</span><span class="sxs-lookup"><span data-stu-id="36cb9-156">You may even want toodisable certain features altogether until hello problem is resolved and notify users that those features are temporarily unavailable.</span></span>

<span data-ttu-id="36cb9-157">Se você decidir toohandle erros para cada serviço separadamente, você também precisará toohandle Olá capacidade toorun seu aplicativo no modo somente leitura pelo serviço.</span><span class="sxs-lookup"><span data-stu-id="36cb9-157">If you decide toohandle errors for each service separately, you will also need toohandle hello ability toorun your application in read-only mode by service.</span></span> <span data-ttu-id="36cb9-158">Você pode ter sinalizadores de somente leitura para cada serviço que pode ser habilitado e desabilitado e o identificador Olá sinalizador apropriado em locais apropriados de saudação em seu código.</span><span class="sxs-lookup"><span data-stu-id="36cb9-158">You could have read-only flags for each service that can be enabled and disabled and handle hello appropriate flag in hello appropriate places in your code.</span></span>

<span data-ttu-id="36cb9-159">Sendo toorun capaz de seu aplicativo no modo somente leitura tem outro benefício de lado – ele fornece a funcionalidade limitada de saudação capacidade tooensure durante uma atualização do aplicativo principal.</span><span class="sxs-lookup"><span data-stu-id="36cb9-159">Being able toorun your application in read-only mode has another side benefit – it gives you hello ability tooensure limited functionality during a major application upgrade.</span></span> <span data-ttu-id="36cb9-160">Você pode disparar toorun seu aplicativo em somente leitura modo e toohello de ponto de data center secundário, garantindo que ninguém está acessando dados de saudação na região primária Olá ao fazer atualizações.</span><span class="sxs-lookup"><span data-stu-id="36cb9-160">You can trigger your application toorun in read-only mode and point toohello secondary data center, ensuring nobody is accessing hello data in hello primary region while you're making upgrades.</span></span>

## <a name="handling-updates-when-running-in-read-only-mode"></a><span data-ttu-id="36cb9-161">Tratamento de atualizações ao executar no modo somente leitura</span><span class="sxs-lookup"><span data-stu-id="36cb9-161">Handling updates when running in read-only mode</span></span>

<span data-ttu-id="36cb9-162">Há muitas maneiras toohandle atualização solicitações durante a execução no modo somente leitura.</span><span class="sxs-lookup"><span data-stu-id="36cb9-162">There are many ways toohandle update requests when running in read-only mode.</span></span> <span data-ttu-id="36cb9-163">Não abordaremos isso de forma abrangente, mas, em geral, há alguns padrões a serem considerados.</span><span class="sxs-lookup"><span data-stu-id="36cb9-163">We won't cover this comprehensively, but generally, there are a couple of patterns that you consider.</span></span>

1.  <span data-ttu-id="36cb9-164">Você pode responder tooyour usuário e peça que eles são não está aceitando atualizações.</span><span class="sxs-lookup"><span data-stu-id="36cb9-164">You can respond tooyour user and tell them you are not currently accepting updates.</span></span> <span data-ttu-id="36cb9-165">Por exemplo, um sistema de gerenciamento de contatos pode habilitar os clientes tooaccess informações de contato, mas não fazer atualizações.</span><span class="sxs-lookup"><span data-stu-id="36cb9-165">For example, a contact management system could enable customers tooaccess contact information but not make updates.</span></span>

2.  <span data-ttu-id="36cb9-166">Você pode enfileirar as atualizações em outra região.</span><span class="sxs-lookup"><span data-stu-id="36cb9-166">You can enqueue your updates in another region.</span></span> <span data-ttu-id="36cb9-167">Nesse caso, você deve gravar sua fila de tooa de solicitações de atualização pendente em uma região diferente e, em seguida, ter uma maneira tooprocess essas solicitações depois Olá data center primário fica online novamente.</span><span class="sxs-lookup"><span data-stu-id="36cb9-167">In this case, you would write your pending update requests tooa queue in a different region, and then have a way tooprocess those requests after hello primary data center comes online again.</span></span> <span data-ttu-id="36cb9-168">Nesse cenário, você deve informar a cliente Olá atualização Olá solicitada foi enfileirada para processamento posterior.</span><span class="sxs-lookup"><span data-stu-id="36cb9-168">In this scenario, you should let hello customer know that hello update requested is queued for later processing.</span></span>

3.  <span data-ttu-id="36cb9-169">Você pode escrever suas atualizações tooa conta de armazenamento em outra região.</span><span class="sxs-lookup"><span data-stu-id="36cb9-169">You can write your updates tooa storage account in another region.</span></span> <span data-ttu-id="36cb9-170">Em seguida, quando Olá data center principal volta a ficar online, você pode ter uma maneira toomerge essas atualizações em dados primários hello, dependendo da estrutura de saudação dos dados de saudação.</span><span class="sxs-lookup"><span data-stu-id="36cb9-170">Then when hello primary data center comes back online, you can have a way toomerge those updates into hello primary data, depending on hello structure of hello data.</span></span> <span data-ttu-id="36cb9-171">Por exemplo, se você estiver criando arquivos separados com um carimbo de data/hora no nome hello, você pode copiar essas região primária do toohello backup de arquivos.</span><span class="sxs-lookup"><span data-stu-id="36cb9-171">For example, if you are creating separate files with a date/time stamp in hello name, you can copy those files back toohello primary region.</span></span> <span data-ttu-id="36cb9-172">Isso funciona para algumas cargas de trabalho, como dados de log e iOT.</span><span class="sxs-lookup"><span data-stu-id="36cb9-172">This works for some workloads such as logging and iOT data.</span></span>

## <a name="handling-retries"></a><span data-ttu-id="36cb9-173">Lidar com repetições</span><span class="sxs-lookup"><span data-stu-id="36cb9-173">Handling retries</span></span>

<span data-ttu-id="36cb9-174">Como saber quais são os erros com nova tentativa?</span><span class="sxs-lookup"><span data-stu-id="36cb9-174">How do you know which errors are retryable?</span></span> <span data-ttu-id="36cb9-175">Isso é determinado pela biblioteca de cliente de armazenamento hello.</span><span class="sxs-lookup"><span data-stu-id="36cb9-175">This is determined by hello storage client library.</span></span> <span data-ttu-id="36cb9-176">Por exemplo, um erro 404 (não encontrado de recurso) não é reproduzível porque não é provavelmente tooresult sucesso repetindo a ele.</span><span class="sxs-lookup"><span data-stu-id="36cb9-176">For example, a 404 error (resource not found) is not retryable because retrying it is not likely tooresult in success.</span></span> <span data-ttu-id="36cb9-177">Em Olá outro lado, um erro 500 for reproduzível porque ele é um erro de servidor, e pode ser simplesmente um problema temporário.</span><span class="sxs-lookup"><span data-stu-id="36cb9-177">On hello other hand, a 500 error is retryable because it is a server error, and it may simply be a transient issue.</span></span> <span data-ttu-id="36cb9-178">Para obter mais detalhes, confira Olá [abrir o código-fonte para Olá classe ExponentialRetry](https://github.com/Azure/azure-storage-net/blob/87b84b3d5ee884c7adc10e494e2c7060956515d0/Lib/Common/RetryPolicies/ExponentialRetry.cs) na biblioteca de cliente de armazenamento Olá .NET.</span><span class="sxs-lookup"><span data-stu-id="36cb9-178">For more details, check out hello [open source code for hello ExponentialRetry class](https://github.com/Azure/azure-storage-net/blob/87b84b3d5ee884c7adc10e494e2c7060956515d0/Lib/Common/RetryPolicies/ExponentialRetry.cs) in hello .NET storage client library.</span></span> <span data-ttu-id="36cb9-179">(Procure Olá método ShouldRetry).</span><span class="sxs-lookup"><span data-stu-id="36cb9-179">(Look for hello ShouldRetry method.)</span></span>

### <a name="read-requests"></a><span data-ttu-id="36cb9-180">Solicitações de leitura</span><span class="sxs-lookup"><span data-stu-id="36cb9-180">Read requests</span></span>

<span data-ttu-id="36cb9-181">Solicitações de leitura podem ser redirecionado toosecondary armazenamento se houver um problema com o armazenamento principal.</span><span class="sxs-lookup"><span data-stu-id="36cb9-181">Read requests can be redirected toosecondary storage if there is a problem with primary storage.</span></span> <span data-ttu-id="36cb9-182">Como mencionado acima na [usando eventualmente dados consistentes](#using-eventually-consistent-data), ele deve ser aceitável para seu aplicativo toopotentially leia dados obsoletos.</span><span class="sxs-lookup"><span data-stu-id="36cb9-182">As noted above in [Using Eventually Consistent Data](#using-eventually-consistent-data), it must be acceptable for your application toopotentially read stale data.</span></span> <span data-ttu-id="36cb9-183">Se você estiver usando Olá armazenamento cliente biblioteca tooaccess dados RA-GRS, você pode especificar o comportamento de repetição de saudação de uma solicitação de leitura, definindo um valor para Olá **LocationMode** tooone propriedade seguinte hello:</span><span class="sxs-lookup"><span data-stu-id="36cb9-183">If you are using hello storage client library tooaccess RA-GRS data, you can specify hello retry behavior of a read request by setting a value for hello **LocationMode** property tooone of hello following:</span></span>

*   <span data-ttu-id="36cb9-184">**PrimaryOnly** (Olá padrão)</span><span class="sxs-lookup"><span data-stu-id="36cb9-184">**PrimaryOnly** (hello default)</span></span>

*   <span data-ttu-id="36cb9-185">**PrimaryThenSecondary**</span><span class="sxs-lookup"><span data-stu-id="36cb9-185">**PrimaryThenSecondary**</span></span>

*   <span data-ttu-id="36cb9-186">**SecondaryOnly**</span><span class="sxs-lookup"><span data-stu-id="36cb9-186">**SecondaryOnly**</span></span>

*   <span data-ttu-id="36cb9-187">**SecondaryThenPrimary**</span><span class="sxs-lookup"><span data-stu-id="36cb9-187">**SecondaryThenPrimary**</span></span>

<span data-ttu-id="36cb9-188">Quando você define Olá **LocationMode** muito**PrimaryThenSecondary**, se a saudação inicial ler toohello solicitação ponto de extremidade primário falha com um erro reproduzível, cliente Olá automaticamente faz outra leitura solicitação de ponto de extremidade secundário toohello.</span><span class="sxs-lookup"><span data-stu-id="36cb9-188">When you set hello **LocationMode** too**PrimaryThenSecondary**, if hello initial read request toohello primary endpoint fails with a retryable error, hello client automatically makes another read request toohello secondary endpoint.</span></span> <span data-ttu-id="36cb9-189">Se o erro de saudação é um tempo limite do servidor, cliente Olá terá toowait para tooexpire de tempo limite de saudação antes de receber um erro reproduzível do serviço de saudação.</span><span class="sxs-lookup"><span data-stu-id="36cb9-189">If hello error is a server timeout, then hello client will have toowait for hello timeout tooexpire before it receives a retryable error from hello service.</span></span>

<span data-ttu-id="36cb9-190">Há basicamente dois cenários tooconsider ao decidir como erro com nova tentativa de tooa toorespond:</span><span class="sxs-lookup"><span data-stu-id="36cb9-190">There are basically two scenarios tooconsider when you are deciding how toorespond tooa retryable error:</span></span>

*   <span data-ttu-id="36cb9-191">Este é um problema isolado e ponto de extremidade primário solicitações subsequentes toohello não retornará um erro reproduzível.</span><span class="sxs-lookup"><span data-stu-id="36cb9-191">This is an isolated problem and subsequent requests toohello primary endpoint will not return a retryable error.</span></span> <span data-ttu-id="36cb9-192">Um exemplo é quando há um erro de rede temporário.</span><span class="sxs-lookup"><span data-stu-id="36cb9-192">An example of where this might happen is when there is a transient network error.</span></span>

    <span data-ttu-id="36cb9-193">Nesse cenário, não há nenhuma penalidade de desempenho significativa em ter **LocationMode** definido muito**PrimaryThenSecondary** como isso acontece apenas raramente.</span><span class="sxs-lookup"><span data-stu-id="36cb9-193">In this scenario, there is no significant performance penalty in having **LocationMode** set too**PrimaryThenSecondary** as this only happens infrequently.</span></span>

*   <span data-ttu-id="36cb9-194">Este é um problema com pelo menos um dos serviços de armazenamento de saudação na região primária hello e todos os serviços de toothat solicitações subsequentes na região primária Olá provavelmente tooreturn reproduzível erros por um período de tempo.</span><span class="sxs-lookup"><span data-stu-id="36cb9-194">This is a problem with at least one of hello storage services in hello primary region and all subsequent requests toothat service in hello primary region are likely tooreturn retryable errors for a period of time.</span></span> <span data-ttu-id="36cb9-195">Um exemplo disso é se a região primária Olá é totalmente inacessível.</span><span class="sxs-lookup"><span data-stu-id="36cb9-195">An example of this is if hello primary region is completely inaccessible.</span></span>

    <span data-ttu-id="36cb9-196">Nesse cenário, há uma penalidade de desempenho porque todas as suas solicitações de leitura tente primeiro o ponto de extremidade primário hello, aguarde Olá tooexpire de tempo limite e alternar ponto de extremidade secundário toohello.</span><span class="sxs-lookup"><span data-stu-id="36cb9-196">In this scenario, there is a performance penalty because all your read requests will try hello primary endpoint first, wait for hello timeout tooexpire, then switch toohello secondary endpoint.</span></span>

<span data-ttu-id="36cb9-197">Para esses cenários, você deve identificar que há um problema contínuo com o ponto de extremidade primário hello e enviar todas as solicitações de leitura diretamente o ponto de extremidade secundário, definindo toohello Olá **LocationMode** propriedade muito **SecondaryOnly**.</span><span class="sxs-lookup"><span data-stu-id="36cb9-197">For these scenarios, you should identify that there is an ongoing issue with hello primary endpoint and send all read requests directly toohello secondary endpoint by setting hello **LocationMode** property too**SecondaryOnly**.</span></span> <span data-ttu-id="36cb9-198">Neste momento, você deve também alterar Olá toorun de aplicativo no modo somente leitura.</span><span class="sxs-lookup"><span data-stu-id="36cb9-198">At this time, you should also change hello application toorun in read-only mode.</span></span> <span data-ttu-id="36cb9-199">Essa abordagem é conhecida como Olá [padrão de disjuntor](https://msdn.microsoft.com/library/dn589784.aspx).</span><span class="sxs-lookup"><span data-stu-id="36cb9-199">This approach is known as hello [Circuit Breaker Pattern](https://msdn.microsoft.com/library/dn589784.aspx).</span></span>

### <a name="update-requests"></a><span data-ttu-id="36cb9-200">Solicitações de atualização</span><span class="sxs-lookup"><span data-stu-id="36cb9-200">Update requests</span></span>

<span data-ttu-id="36cb9-201">padrão de disjuntor Olá também pode ser aplicadas tooupdate solicitações.</span><span class="sxs-lookup"><span data-stu-id="36cb9-201">hello Circuit Breaker pattern can also be applied tooupdate requests.</span></span> <span data-ttu-id="36cb9-202">No entanto, solicitações de atualização não podem ser redirecionada toosecondary armazenamento, que é somente leitura.</span><span class="sxs-lookup"><span data-stu-id="36cb9-202">However, update requests cannot be redirected toosecondary storage, which is read-only.</span></span> <span data-ttu-id="36cb9-203">Para essas solicitações, você deve deixar Olá **LocationMode** propriedade definida muito**PrimaryOnly** (Olá padrão).</span><span class="sxs-lookup"><span data-stu-id="36cb9-203">For these requests, you should leave hello **LocationMode** property set too**PrimaryOnly** (hello default).</span></span> <span data-ttu-id="36cb9-204">toohandle esses erros, você pode aplicar um solicitações toothese métrica – como 10 falhas em uma linha – e quando o limite é atingido, o aplicativo hello em modo somente leitura.</span><span class="sxs-lookup"><span data-stu-id="36cb9-204">toohandle these errors, you can apply a metric toothese requests – such as 10 failures in a row – and when your threshold is met, switch hello application into read-only mode.</span></span> <span data-ttu-id="36cb9-205">Você pode usar Olá mesmo métodos para retornar tooupdate o modo como as descritas abaixo na próxima seção, sobre o padrão de disjuntor Olá Olá.</span><span class="sxs-lookup"><span data-stu-id="36cb9-205">You can use hello same methods for returning tooupdate mode as those described below in hello next section about hello Circuit Breaker pattern.</span></span>

## <a name="circuit-breaker-pattern"></a><span data-ttu-id="36cb9-206">Padrão de Disjuntor</span><span class="sxs-lookup"><span data-stu-id="36cb9-206">Circuit Breaker pattern</span></span>

<span data-ttu-id="36cb9-207">Usando o padrão de disjuntor Olá em seu aplicativo pode impedir que ele repetir uma operação que é provavelmente toofail repetidamente.</span><span class="sxs-lookup"><span data-stu-id="36cb9-207">Using hello Circuit Breaker pattern in your application can prevent it from retrying an operation that is likely toofail repeatedly.</span></span> <span data-ttu-id="36cb9-208">Ele permite Olá aplicativo toocontinue toorun em vez de colocar o tempo durante a operação de saudação é repetida exponencialmente.</span><span class="sxs-lookup"><span data-stu-id="36cb9-208">It allows hello application toocontinue toorun rather than taking up time while hello operation is retried exponentially.</span></span> <span data-ttu-id="36cb9-209">Ela também detecta quando falhas Olá foi corrigido, em que o aplicativo hello de tempo pode Repita a operação hello.</span><span class="sxs-lookup"><span data-stu-id="36cb9-209">It also detects when hello fault has been fixed, at which time hello application can try hello operation again.</span></span>

### <a name="how-tooimplement-hello-circuit-breaker-pattern"></a><span data-ttu-id="36cb9-210">Como tooimplement Olá padrão de Disjuntor</span><span class="sxs-lookup"><span data-stu-id="36cb9-210">How tooimplement hello circuit breaker pattern</span></span>

<span data-ttu-id="36cb9-211">tooidentify que há um problema contínuo com um ponto de extremidade primário, você pode monitorar a frequência cliente Olá encontra erros de nova tentativa.</span><span class="sxs-lookup"><span data-stu-id="36cb9-211">tooidentify that there is an ongoing problem with a primary endpoint, you can monitor how frequently hello client encounters retryable errors.</span></span> <span data-ttu-id="36cb9-212">Como cada caso é diferente, é preciso toodecide no limite de saudação desejado toouse para Olá decisão tooswitch toohello ponto de extremidade secundário e execute o aplicativo hello no modo somente leitura.</span><span class="sxs-lookup"><span data-stu-id="36cb9-212">Because each case is different, you have toodecide on hello threshold you want toouse for hello decision tooswitch toohello secondary endpoint and run hello application in read-only mode.</span></span> <span data-ttu-id="36cb9-213">Por exemplo, você pode decidir switch de saudação tooperform se há 10 falhas em uma linha com nenhuma êxitos.</span><span class="sxs-lookup"><span data-stu-id="36cb9-213">For example, you could decide tooperform hello switch if there are 10 failures in a row with no successes.</span></span> <span data-ttu-id="36cb9-214">Outro exemplo é tooswitch se falhar de 90% das solicitações de saudação em um período de 2 minutos.</span><span class="sxs-lookup"><span data-stu-id="36cb9-214">Another example is tooswitch if 90% of hello requests in a 2-minute period fail.</span></span>

<span data-ttu-id="36cb9-215">Para o primeiro cenário de hello, simplesmente, você pode manter uma contagem de falhas de saudação e se houver êxito antes de alcançar Olá Olá máximo, defina contagem back toozero.</span><span class="sxs-lookup"><span data-stu-id="36cb9-215">For hello first scenario, you can simply keep a count of hello failures, and if there is a success before reaching hello maximum, set hello count back toozero.</span></span> <span data-ttu-id="36cb9-216">Para o segundo cenário de hello, tooimplement unidirecional é toouse Olá MemoryCache objeto (.NET).</span><span class="sxs-lookup"><span data-stu-id="36cb9-216">For hello second scenario, one way tooimplement it is toouse hello MemoryCache object (in .NET).</span></span> <span data-ttu-id="36cb9-217">Para cada solicitação, adicionar um cache de toohello CacheItem, definir Olá valor toosuccess (1) ou falha (0) e definir minutos de too2 de tempo de expiração de saudação do agora (ou o que é a restrição de tempo).</span><span class="sxs-lookup"><span data-stu-id="36cb9-217">For each request, add a CacheItem toohello cache, set hello value toosuccess (1) or fail (0), and set hello expiration time too2 minutes from now (or whatever your time constraint is).</span></span> <span data-ttu-id="36cb9-218">Quando é atingido o tempo de expiração de uma entrada, entrada hello será removida automaticamente.</span><span class="sxs-lookup"><span data-stu-id="36cb9-218">When an entry's expiration time is reached, hello entry is automatically removed.</span></span> <span data-ttu-id="36cb9-219">Isso lhe dará uma janela de dois minutos sem interrupção.</span><span class="sxs-lookup"><span data-stu-id="36cb9-219">This will give you a rolling 2-minute window.</span></span> <span data-ttu-id="36cb9-220">Cada vez que um serviço de armazenamento de toohello de solicitação, primeiro você usar uma consulta Linq em Olá MemoryCache objeto toocalculate Olá porcentagem de êxitos somando os valores hello e dividindo por contagem de saudação.</span><span class="sxs-lookup"><span data-stu-id="36cb9-220">Each time you make a request toohello storage service, you first use a Linq query across hello MemoryCache object toocalculate hello percent success by summing hello values and dividing by hello count.</span></span> <span data-ttu-id="36cb9-221">Quando a porcentagem de êxitos Olá cai abaixo de limite (por exemplo, 10%), definir Olá **LocationMode** propriedade para solicitações de leitura muito**SecondaryOnly** e aplicativo hello em modo somente leitura antes de alternar continuar.</span><span class="sxs-lookup"><span data-stu-id="36cb9-221">When hello percent success drops below some threshold (such as 10%), set hello **LocationMode** property for read requests too**SecondaryOnly** and switch hello application into read-only mode before continuing.</span></span>

<span data-ttu-id="36cb9-222">limite de saudação de erros usado toodetermine ao comutador de saudação toomake pode variar de serviço tooservice em seu aplicativo, portanto, você deve considerar tornando-os parâmetros configuráveis.</span><span class="sxs-lookup"><span data-stu-id="36cb9-222">hello threshold of errors used toodetermine when toomake hello switch may vary from service tooservice in your application, so you should consider making them configurable parameters.</span></span> <span data-ttu-id="36cb9-223">Isso também é onde você decidir toohandle erros de nova tentativa de cada serviço separadamente ou como uma, conforme discutido anteriormente.</span><span class="sxs-lookup"><span data-stu-id="36cb9-223">This is also where you decide toohandle retryable errors from each service separately or as one, as discussed previously.</span></span>

<span data-ttu-id="36cb9-224">Outra consideração é como toohandle várias instâncias de um aplicativo e quais toodo quando detectar erros de nova tentativa em cada instância.</span><span class="sxs-lookup"><span data-stu-id="36cb9-224">Another consideration is how toohandle multiple instances of an application, and what toodo when you detect retryable errors in each instance.</span></span> <span data-ttu-id="36cb9-225">Por exemplo, você pode ter 20 VMs em execução com hello carregado do mesmo aplicativo.</span><span class="sxs-lookup"><span data-stu-id="36cb9-225">For example, you may have 20 VMs running with hello same application loaded.</span></span> <span data-ttu-id="36cb9-226">Você lida com cada instância separadamente?</span><span class="sxs-lookup"><span data-stu-id="36cb9-226">Do you handle each instance separately?</span></span> <span data-ttu-id="36cb9-227">Se uma instância inicia com problemas, você deseja toolimit Olá resposta toojust que uma instância ou desejar tootry toohave todas as instâncias de respondem em Olá mesmo quando uma instância tem um problema?</span><span class="sxs-lookup"><span data-stu-id="36cb9-227">If one instance starts having problems, do you want toolimit hello response toojust that one instance, or do you want tootry toohave all instances respond in hello same way when one instance has a problem?</span></span> <span data-ttu-id="36cb9-228">Manipular instâncias Olá separadamente é muito mais simples do que a tentativa de resposta de saudação toocoordinate entre eles, mas como fazer isso depende da arquitetura do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="36cb9-228">Handling hello instances separately is much simpler than trying toocoordinate hello response across them, but how you do this depends on your application's architecture.</span></span>

### <a name="options-for-monitoring-hello-error-frequency"></a><span data-ttu-id="36cb9-229">Opções de frequência de erro de saudação de monitoramento</span><span class="sxs-lookup"><span data-stu-id="36cb9-229">Options for monitoring hello error frequency</span></span>

<span data-ttu-id="36cb9-230">Você tem três opções principais para monitoramento de frequência de saudação de novas tentativas na região primária do hello em ordem toodetermine quando tooswitch por região secundária toohello e alteração Olá toorun de aplicativo no modo somente leitura.</span><span class="sxs-lookup"><span data-stu-id="36cb9-230">You have three main options for monitoring hello frequency of retries in hello primary region in order toodetermine when tooswitch over toohello secondary region and change hello application toorun in read-only mode.</span></span>

*   <span data-ttu-id="36cb9-231">Adicionar um manipulador para Olá [ **repetindo** ](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storage.operationcontext.retrying.aspx) evento em Olá [ **OperationContext** ](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storage.operationcontext.aspx) passar solicitações de armazenamento tooyour – isso é hello do objeto método exibido neste artigo e usado em Olá que acompanha o exemplo.</span><span class="sxs-lookup"><span data-stu-id="36cb9-231">Add a handler for hello [**Retrying**](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storage.operationcontext.retrying.aspx) event on hello [**OperationContext**](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storage.operationcontext.aspx) object you pass tooyour storage requests – this is hello method displayed in this article and used in hello accompanying sample.</span></span> <span data-ttu-id="36cb9-232">Esses eventos acionam sempre que o cliente Olá repete uma solicitação, permitindo que você tootrack frequência cliente Olá encontra erros de nova tentativa em um ponto de extremidade primário.</span><span class="sxs-lookup"><span data-stu-id="36cb9-232">These events fire whenever hello client retries a request, enabling you tootrack how often hello client encounters retryable errors on a primary endpoint.</span></span>

    ```csharp 
    operationContext.Retrying += (sender, arguments) =>
    {
        // Retrying in hello primary region
        if (arguments.Request.Host == primaryhostname)
            ...
    };
    ```

*   <span data-ttu-id="36cb9-233">Em Olá [ **avaliar** ](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storage.retrypolicies.iextendedretrypolicy.evaluate.aspx) método em uma política de repetição personalizada, você pode executar código personalizado sempre que uma repetição ocorre.</span><span class="sxs-lookup"><span data-stu-id="36cb9-233">In hello [**Evaluate**](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storage.retrypolicies.iextendedretrypolicy.evaluate.aspx) method in a custom retry policy, you can run custom code whenever a retry takes place.</span></span> <span data-ttu-id="36cb9-234">Em adição toorecording quando uma repetição ocorre, isso também permite que você Olá oportunidade toomodify seu comportamento de repetição.</span><span class="sxs-lookup"><span data-stu-id="36cb9-234">In addition toorecording when a retry happens, this also gives you hello opportunity toomodify your retry behavior.</span></span>

    ```csharp 
    public RetryInfo Evaluate(RetryContext retryContext,
    OperationContext operationContext)
    {
        var statusCode = retryContext.LastRequestResult.HttpStatusCode;
        if (retryContext.CurrentRetryCount >= this.maximumAttempts
        || ((statusCode &gt;= 300 && statusCode &lt; 500 && statusCode != 408)
        || statusCode == 501 // Not Implemented
        || statusCode == 505 // Version Not Supported
            ))
        {
        // Do not retry
            return null;
        }

        // Monitor retries in hello primary location
        ...

        // Determine RetryInterval and TargetLocation
        RetryInfo info =
            CreateRetryInfo(retryContext.CurrentRetryCount);

        return info;
    }
    ```

*   <span data-ttu-id="36cb9-235">Olá, terceira abordagem é tooimplement um componente de monitoramento personalizado em seu aplicativo que executa ping continuamente em seu ponto de extremidade de armazenamento principal com fictício ler solicitações (como ler um blob pequeno) toodetermine sua integridade.</span><span class="sxs-lookup"><span data-stu-id="36cb9-235">hello third approach is tooimplement a custom monitoring component in your application that continually pings your primary storage endpoint with dummy read requests (such as reading a small blob) toodetermine its health.</span></span> <span data-ttu-id="36cb9-236">Isso deve exigir alguns recursos, mas não uma quantidade significativa.</span><span class="sxs-lookup"><span data-stu-id="36cb9-236">This would take up some resources, but not a significant amount.</span></span> <span data-ttu-id="36cb9-237">Quando um problema é descoberto que atinge o limite, em seguida, você executará comutador hello muito**SecondaryOnly** e modo somente leitura.</span><span class="sxs-lookup"><span data-stu-id="36cb9-237">When a problem is discovered that reaches your threshold, you would then perform hello switch too**SecondaryOnly** and read-only mode.</span></span>

<span data-ttu-id="36cb9-238">Em algum momento, você desejará tooswitch toousing back Olá ponto de extremidade primário e permitir atualizações.</span><span class="sxs-lookup"><span data-stu-id="36cb9-238">At some point, you will want tooswitch back toousing hello primary endpoint and allowing updates.</span></span> <span data-ttu-id="36cb9-239">Se usando um dos primeiros dois métodos de saudação listados acima, você pode simplesmente alternar ponto de extremidade primário toohello back e habilitar o modo de atualização após um período arbitrariamente selecionado ou o número de operações foi executado.</span><span class="sxs-lookup"><span data-stu-id="36cb9-239">If using one of hello first two methods listed above, you could simply switch back toohello primary endpoint and enable update mode after an arbitrarily selected amount of time or number of operations has been performed.</span></span> <span data-ttu-id="36cb9-240">Você pode, em seguida, permitir que ele percorrer a lógica de repetição Olá novamente.</span><span class="sxs-lookup"><span data-stu-id="36cb9-240">You can then let it go through hello retry logic again.</span></span> <span data-ttu-id="36cb9-241">Se Olá problema foi corrigido, ele continuará ponto de extremidade primário toouse hello e permitir atualizações.</span><span class="sxs-lookup"><span data-stu-id="36cb9-241">If hello problem has been fixed, it will continue toouse hello primary endpoint and allow updates.</span></span> <span data-ttu-id="36cb9-242">Se ainda houver um problema, ele irá mais uma vez alternar ponto de extremidade secundário toohello voltar e o modo somente leitura após a falha de critérios de saudação que você definiu.</span><span class="sxs-lookup"><span data-stu-id="36cb9-242">If there is still a problem, it will once more switch back toohello secondary endpoint and read-only mode after failing hello criteria you've set.</span></span>

<span data-ttu-id="36cb9-243">Para o cenário de terceiro hello, quando o ponto de extremidade do ping Olá armazenamento primário torna-se com êxito novamente, você pode disparar retornar Olá muito**PrimaryOnly** e continuar a permitir atualizações.</span><span class="sxs-lookup"><span data-stu-id="36cb9-243">For hello third scenario, when pinging hello primary storage endpoint becomes successful again, you can trigger hello switch back too**PrimaryOnly** and continue allowing updates.</span></span>

## <a name="handling-eventually-consistent-data"></a><span data-ttu-id="36cb9-244">Manipulação de dados eventualmente consistentes</span><span class="sxs-lookup"><span data-stu-id="36cb9-244">Handling eventually consistent data</span></span>

<span data-ttu-id="36cb9-245">RA-GRS funciona por transações de replicação da região secundária do hello toohello primário.</span><span class="sxs-lookup"><span data-stu-id="36cb9-245">RA-GRS works by replicating transactions from hello primary toohello secondary region.</span></span> <span data-ttu-id="36cb9-246">Esse processo de replicação garante que dados de saudação na região secundária Olá são *finalmente consistente*.</span><span class="sxs-lookup"><span data-stu-id="36cb9-246">This replication process guarantees that hello data in hello secondary region is *eventually consistent*.</span></span> <span data-ttu-id="36cb9-247">Isso significa que todas as transações de saudação na região primária Olá eventualmente aparecerá na região secundária hello, mas que pode haver um atraso antes que elas sejam exibidas, e que não há nenhuma garantia de transações Olá chegam na região secundária do hello em Olá mesma ordem que na qual eles foram aplicados originalmente na região primária hello.</span><span class="sxs-lookup"><span data-stu-id="36cb9-247">This means that all hello transactions in hello primary region will eventually appear in hello secondary region, but that there may be a lag before they appear, and that there is no guarantee hello transactions arrive in hello secondary region in hello same order as that in which they were originally applied in hello primary region.</span></span> <span data-ttu-id="36cb9-248">Se as transações chegam na região secundária do hello fora de ordem, você *pode* considerar seus dados no hello região secundária toobe em um estado inconsistente até que o serviço de saudação alcança.</span><span class="sxs-lookup"><span data-stu-id="36cb9-248">If your transactions arrive in hello secondary region out of order, you *may* consider your data in hello secondary region toobe in an inconsistent state until hello service catches up.</span></span>

<span data-ttu-id="36cb9-249">Olá, tabela a seguir mostra um exemplo do que pode acontecer quando você atualizar os detalhes de saudação do toomake funcionário a um membro da saudação *administradores* função.</span><span class="sxs-lookup"><span data-stu-id="36cb9-249">hello following table shows an example of what might happen when you update hello details of an employee toomake her a member of hello *administrators* role.</span></span> <span data-ttu-id="36cb9-250">Para bem Olá deste exemplo, é necessário atualizar Olá **funcionário** entidade e atualizar um **função administrador** entidade com uma contagem do número total de saudação de administradores.</span><span class="sxs-lookup"><span data-stu-id="36cb9-250">For hello sake of this example, this requires you update hello **employee** entity and update an **administrator role** entity with a count of hello total number of administrators.</span></span> <span data-ttu-id="36cb9-251">Observe como Olá atualizações são aplicadas fora de ordem na região secundária hello.</span><span class="sxs-lookup"><span data-stu-id="36cb9-251">Notice how hello updates are applied out of order in hello secondary region.</span></span>

| <span data-ttu-id="36cb9-252">**Hora**</span><span class="sxs-lookup"><span data-stu-id="36cb9-252">**Time**</span></span> | <span data-ttu-id="36cb9-253">**Transação**</span><span class="sxs-lookup"><span data-stu-id="36cb9-253">**Transaction**</span></span>                                            | <span data-ttu-id="36cb9-254">**Replicação**</span><span class="sxs-lookup"><span data-stu-id="36cb9-254">**Replication**</span></span>                       | <span data-ttu-id="36cb9-255">**Hora da Última Sincronização**</span><span class="sxs-lookup"><span data-stu-id="36cb9-255">**Last Sync Time**</span></span> | <span data-ttu-id="36cb9-256">**Resultado**</span><span class="sxs-lookup"><span data-stu-id="36cb9-256">**Result**</span></span> |
|----------|------------------------------------------------------------|---------------------------------------|--------------------|------------| 
| <span data-ttu-id="36cb9-257">T0</span><span class="sxs-lookup"><span data-stu-id="36cb9-257">T0</span></span>       | <span data-ttu-id="36cb9-258">Transação A:</span><span class="sxs-lookup"><span data-stu-id="36cb9-258">Transaction A:</span></span> <br> <span data-ttu-id="36cb9-259">Inserir funcionário</span><span class="sxs-lookup"><span data-stu-id="36cb9-259">Insert employee</span></span> <br> <span data-ttu-id="36cb9-260">entidade no principal</span><span class="sxs-lookup"><span data-stu-id="36cb9-260">entity in primary</span></span> |                                   |                    | <span data-ttu-id="36cb9-261">A transação A inserido tooprimary,</span><span class="sxs-lookup"><span data-stu-id="36cb9-261">Transaction A inserted tooprimary,</span></span><br> <span data-ttu-id="36cb9-262">ainda não replicada.</span><span class="sxs-lookup"><span data-stu-id="36cb9-262">not replicated yet.</span></span> |
| <span data-ttu-id="36cb9-263">T1</span><span class="sxs-lookup"><span data-stu-id="36cb9-263">T1</span></span>       |                                                            | <span data-ttu-id="36cb9-264">Transação A</span><span class="sxs-lookup"><span data-stu-id="36cb9-264">Transaction A</span></span> <br> <span data-ttu-id="36cb9-265">replicada para</span><span class="sxs-lookup"><span data-stu-id="36cb9-265">replicated to</span></span><br> <span data-ttu-id="36cb9-266">secundário</span><span class="sxs-lookup"><span data-stu-id="36cb9-266">secondary</span></span> | <span data-ttu-id="36cb9-267">T1</span><span class="sxs-lookup"><span data-stu-id="36cb9-267">T1</span></span> | <span data-ttu-id="36cb9-268">A transação A replicadas toosecondary.</span><span class="sxs-lookup"><span data-stu-id="36cb9-268">Transaction A replicated toosecondary.</span></span> <br><span data-ttu-id="36cb9-269">Hora da Última Sincronização atualizada.</span><span class="sxs-lookup"><span data-stu-id="36cb9-269">Last Sync Time updated.</span></span>    |
| <span data-ttu-id="36cb9-270">T2</span><span class="sxs-lookup"><span data-stu-id="36cb9-270">T2</span></span>       | <span data-ttu-id="36cb9-271">Transação B:</span><span class="sxs-lookup"><span data-stu-id="36cb9-271">Transaction B:</span></span><br><span data-ttu-id="36cb9-272">Atualização</span><span class="sxs-lookup"><span data-stu-id="36cb9-272">Update</span></span><br> <span data-ttu-id="36cb9-273">entidade de funcionário</span><span class="sxs-lookup"><span data-stu-id="36cb9-273">employee entity</span></span><br> <span data-ttu-id="36cb9-274">no principal</span><span class="sxs-lookup"><span data-stu-id="36cb9-274">in primary</span></span>  |                                | <span data-ttu-id="36cb9-275">T1</span><span class="sxs-lookup"><span data-stu-id="36cb9-275">T1</span></span>                 | <span data-ttu-id="36cb9-276">Transação B gravado tooprimary,</span><span class="sxs-lookup"><span data-stu-id="36cb9-276">Transaction B written tooprimary,</span></span><br> <span data-ttu-id="36cb9-277">ainda não replicada.</span><span class="sxs-lookup"><span data-stu-id="36cb9-277">not replicated yet.</span></span>  |
| <span data-ttu-id="36cb9-278">T3</span><span class="sxs-lookup"><span data-stu-id="36cb9-278">T3</span></span>       | <span data-ttu-id="36cb9-279">Transação C:</span><span class="sxs-lookup"><span data-stu-id="36cb9-279">Transaction C:</span></span><br> <span data-ttu-id="36cb9-280">Atualização</span><span class="sxs-lookup"><span data-stu-id="36cb9-280">Update</span></span> <br><span data-ttu-id="36cb9-281">administrator</span><span class="sxs-lookup"><span data-stu-id="36cb9-281">administrator</span></span><br><span data-ttu-id="36cb9-282">entidade de função em</span><span class="sxs-lookup"><span data-stu-id="36cb9-282">role entity in</span></span><br><span data-ttu-id="36cb9-283">primary</span><span class="sxs-lookup"><span data-stu-id="36cb9-283">primary</span></span> |                    | <span data-ttu-id="36cb9-284">T1</span><span class="sxs-lookup"><span data-stu-id="36cb9-284">T1</span></span>                 | <span data-ttu-id="36cb9-285">Transação C gravado tooprimary,</span><span class="sxs-lookup"><span data-stu-id="36cb9-285">Transaction C written tooprimary,</span></span><br> <span data-ttu-id="36cb9-286">ainda não replicada.</span><span class="sxs-lookup"><span data-stu-id="36cb9-286">not replicated yet.</span></span>  |
| <span data-ttu-id="36cb9-287">*T4*</span><span class="sxs-lookup"><span data-stu-id="36cb9-287">*T4*</span></span>     |                                                       | <span data-ttu-id="36cb9-288">Transação C</span><span class="sxs-lookup"><span data-stu-id="36cb9-288">Transaction C</span></span> <br><span data-ttu-id="36cb9-289">replicada para</span><span class="sxs-lookup"><span data-stu-id="36cb9-289">replicated to</span></span><br> <span data-ttu-id="36cb9-290">secundário</span><span class="sxs-lookup"><span data-stu-id="36cb9-290">secondary</span></span> | <span data-ttu-id="36cb9-291">T1</span><span class="sxs-lookup"><span data-stu-id="36cb9-291">T1</span></span>         | <span data-ttu-id="36cb9-292">Transação C replicada toosecondary.</span><span class="sxs-lookup"><span data-stu-id="36cb9-292">Transaction C replicated toosecondary.</span></span><br><span data-ttu-id="36cb9-293">LastSyncTime não atualizado porque</span><span class="sxs-lookup"><span data-stu-id="36cb9-293">LastSyncTime not updated because</span></span> <br><span data-ttu-id="36cb9-294">a transação B ainda não foi replicada.</span><span class="sxs-lookup"><span data-stu-id="36cb9-294">transaction B has not been replicated yet.</span></span>|
| <span data-ttu-id="36cb9-295">*T5*</span><span class="sxs-lookup"><span data-stu-id="36cb9-295">*T5*</span></span>     | <span data-ttu-id="36cb9-296">Ler entidades</span><span class="sxs-lookup"><span data-stu-id="36cb9-296">Read entities</span></span> <br><span data-ttu-id="36cb9-297">de secundário</span><span class="sxs-lookup"><span data-stu-id="36cb9-297">from secondary</span></span>                           |                                  | <span data-ttu-id="36cb9-298">T1</span><span class="sxs-lookup"><span data-stu-id="36cb9-298">T1</span></span>                 | <span data-ttu-id="36cb9-299">Obter valor obsoleto de saudação de funcionário</span><span class="sxs-lookup"><span data-stu-id="36cb9-299">You get hello stale value for employee</span></span> <br> <span data-ttu-id="36cb9-300">porque a transação B não foi</span><span class="sxs-lookup"><span data-stu-id="36cb9-300">entity because transaction B hasn't</span></span> <br> <span data-ttu-id="36cb9-301">replicada ainda.</span><span class="sxs-lookup"><span data-stu-id="36cb9-301">replicated yet.</span></span> <span data-ttu-id="36cb9-302">Obter o novo valor Olá para</span><span class="sxs-lookup"><span data-stu-id="36cb9-302">You get hello new value for</span></span><br> <span data-ttu-id="36cb9-303">a entidade de função de administrador porque C foi</span><span class="sxs-lookup"><span data-stu-id="36cb9-303">administrator role entity because C has</span></span><br> <span data-ttu-id="36cb9-304">replicada.</span><span class="sxs-lookup"><span data-stu-id="36cb9-304">replicated.</span></span> <span data-ttu-id="36cb9-305">A Hora da Última Sincronização ainda não</span><span class="sxs-lookup"><span data-stu-id="36cb9-305">Last Sync Time still hasn't</span></span><br> <span data-ttu-id="36cb9-306">foi atualizada porque a transação B</span><span class="sxs-lookup"><span data-stu-id="36cb9-306">been updated because transaction B</span></span><br> <span data-ttu-id="36cb9-307">não foi replicada.</span><span class="sxs-lookup"><span data-stu-id="36cb9-307">hasn't replicated.</span></span> <span data-ttu-id="36cb9-308">Você pode ver que a</span><span class="sxs-lookup"><span data-stu-id="36cb9-308">You can tell the</span></span><br><span data-ttu-id="36cb9-309">entidade da função de administrador está inconsistente</span><span class="sxs-lookup"><span data-stu-id="36cb9-309">administrator role entity is inconsistent</span></span> <br><span data-ttu-id="36cb9-310">como Olá entidade data/hora é após</span><span class="sxs-lookup"><span data-stu-id="36cb9-310">because hello entity date/time is after</span></span> <br><span data-ttu-id="36cb9-311">Olá hora da última sincronização.</span><span class="sxs-lookup"><span data-stu-id="36cb9-311">hello Last Sync Time.</span></span> |
| <span data-ttu-id="36cb9-312">*T6*</span><span class="sxs-lookup"><span data-stu-id="36cb9-312">*T6*</span></span>     |                                                      | <span data-ttu-id="36cb9-313">Transação B</span><span class="sxs-lookup"><span data-stu-id="36cb9-313">Transaction B</span></span><br> <span data-ttu-id="36cb9-314">replicada para</span><span class="sxs-lookup"><span data-stu-id="36cb9-314">replicated to</span></span><br> <span data-ttu-id="36cb9-315">secundário</span><span class="sxs-lookup"><span data-stu-id="36cb9-315">secondary</span></span> | <span data-ttu-id="36cb9-316">T6</span><span class="sxs-lookup"><span data-stu-id="36cb9-316">T6</span></span>                 | <span data-ttu-id="36cb9-317">*T6* – todas as transações até C</span><span class="sxs-lookup"><span data-stu-id="36cb9-317">*T6* – All transactions through C have</span></span> <br><span data-ttu-id="36cb9-318">foram replicadas; a Hora da Última Sincronização</span><span class="sxs-lookup"><span data-stu-id="36cb9-318">been replicated, Last Sync Time</span></span><br> <span data-ttu-id="36cb9-319">foi atualizada.</span><span class="sxs-lookup"><span data-stu-id="36cb9-319">is updated.</span></span> |

<span data-ttu-id="36cb9-320">Neste exemplo, suponha que Olá cliente comutadores tooreading da região secundária do hello na T5.</span><span class="sxs-lookup"><span data-stu-id="36cb9-320">In this example, assume hello client switches tooreading from hello secondary region at T5.</span></span> <span data-ttu-id="36cb9-321">Ela pode ler com êxito Olá **função de administrador** entidade neste momento, mas a entidade Olá contém um valor para contagem de saudação de administradores que não é consistente com o número de saudação do **funcionário** entidades que são marcados como administradores na região secundária Olá neste momento.</span><span class="sxs-lookup"><span data-stu-id="36cb9-321">It can successfully read hello **administrator role** entity at this time, but hello entity contains a value for hello count of administrators that is not consistent with hello number of **employee** entities that are marked as administrators in hello secondary region at this time.</span></span> <span data-ttu-id="36cb9-322">O cliente simplesmente pode exibir esse valor, com o risco de saudação que se trata de informações inconsistentes.</span><span class="sxs-lookup"><span data-stu-id="36cb9-322">Your client could simply display this value, with hello risk that it is inconsistent information.</span></span> <span data-ttu-id="36cb9-323">Como alternativa, Olá cliente pode tentar toodetermine que Olá **função administrador** está em um estado potencialmente inconsistente porque atualizações Olá aconteceram fora de ordem e informam o usuário Olá desse fato.</span><span class="sxs-lookup"><span data-stu-id="36cb9-323">Alternatively, hello client could attempt toodetermine that hello **administrator role** is in a potentially inconsistent state because hello updates have happened out of order, and then inform hello user of this fact.</span></span>

<span data-ttu-id="36cb9-324">toorecognize que contém dados potencialmente inconsistentes, o cliente Olá pode usar o valor Olá Olá *hora da última sincronização* que você pode obter a qualquer momento por meio de um serviço de armazenamento de consultas.</span><span class="sxs-lookup"><span data-stu-id="36cb9-324">toorecognize that it has potentially inconsistent data, hello client can use hello value of hello *Last Sync Time* that you can get at any time by querying a storage service.</span></span> <span data-ttu-id="36cb9-325">Isso informa Olá hora do dados de saudação na região secundária Olá últimos consistente e ao serviço de saudação aplicado todas Olá transações anteriores toothat ponto no tempo.</span><span class="sxs-lookup"><span data-stu-id="36cb9-325">This tells you hello time when hello data in hello secondary region was last consistent and when hello service had applied all hello transactions prior toothat point in time.</span></span> <span data-ttu-id="36cb9-326">No exemplo hello mostrado acima, depois que o serviço Olá insere hello **funcionário** entidade na região secundária hello, Olá hora da última sincronização está definido muito*T1*.</span><span class="sxs-lookup"><span data-stu-id="36cb9-326">In hello example shown above, after hello service inserts hello **employee** entity in hello secondary region, hello last sync time is set too*T1*.</span></span> <span data-ttu-id="36cb9-327">Ele permanece em *T1* até que as atualizações de serviço de Olá Olá **funcionário** entidade na região secundária do hello quando ele está definido muito*T6*.</span><span class="sxs-lookup"><span data-stu-id="36cb9-327">It remains at *T1* until hello service updates hello **employee** entity in hello secondary region when it is set too*T6*.</span></span> <span data-ttu-id="36cb9-328">Se o cliente de saudação recupera Olá hora da última sincronização quando lê entidade Olá *T5*, ele pode compará-la com carimbo de hora Olá na entidade hello.</span><span class="sxs-lookup"><span data-stu-id="36cb9-328">If hello client retrieves hello last sync time when it reads hello entity at *T5*, it can compare it with hello timestamp on hello entity.</span></span> <span data-ttu-id="36cb9-329">Se timestamp Olá na entidade Olá é posterior à saudação sincronização pela última vez, em seguida, hello entidade está em um estado inconsistente potencialmente e você pode colocar tudo o que é a ação apropriada Olá para seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="36cb9-329">If hello timestamp on hello entity is later than hello last sync time, then hello entity is in a potentially inconsistent state, and you can take whatever is hello appropriate action for your application.</span></span> <span data-ttu-id="36cb9-330">Usar este campo requer que você saiba quando Olá última atualização toohello primário foi concluída.</span><span class="sxs-lookup"><span data-stu-id="36cb9-330">Using this field requires that you know when hello last update toohello primary was completed.</span></span>

## <a name="testing"></a><span data-ttu-id="36cb9-331">Testando</span><span class="sxs-lookup"><span data-stu-id="36cb9-331">Testing</span></span>

<span data-ttu-id="36cb9-332">É importante tootest que seu aplicativo se comporta conforme o esperado quando encontra erros de nova tentativa.</span><span class="sxs-lookup"><span data-stu-id="36cb9-332">It's important tootest that your application behaves as expected when it encounters retryable errors.</span></span> <span data-ttu-id="36cb9-333">Por exemplo, você precisa tootest que Olá aplicativo comutadores toohello secundário e no modo somente leitura quando ela detecta um problema e volta quando região primária Olá fica disponível novamente.</span><span class="sxs-lookup"><span data-stu-id="36cb9-333">For example, you need tootest that hello application switches toohello secondary and into read-only mode when it detects a problem, and switches back when hello primary region becomes available again.</span></span> <span data-ttu-id="36cb9-334">toodo isso, você precisa de uma maneira toosimulate reproduzível os erros e controlar a frequência que ocorrem.</span><span class="sxs-lookup"><span data-stu-id="36cb9-334">toodo this, you need a way toosimulate retryable errors and control how often they occur.</span></span>

<span data-ttu-id="36cb9-335">Você pode usar [Fiddler](http://www.telerik.com/fiddler) toointercept e modificar as respostas HTTP em um script.</span><span class="sxs-lookup"><span data-stu-id="36cb9-335">You can use [Fiddler](http://www.telerik.com/fiddler) toointercept and modify HTTP responses in a script.</span></span> <span data-ttu-id="36cb9-336">Esse script pode identificar as respostas que vêm do ponto de extremidade primário e alterar Olá tooone de código de status HTTP que Olá que reconhece biblioteca de cliente de armazenamento como um erro reproduzível.</span><span class="sxs-lookup"><span data-stu-id="36cb9-336">This script can identify responses that come from your primary endpoint and change hello HTTP status code tooone that hello Storage Client Library recognizes as a retryable error.</span></span> <span data-ttu-id="36cb9-337">Este trecho de código mostra um exemplo simples de um script do Fiddler que intercepta as respostas tooread solicitações contra Olá **employeedata** tooreturn tabela 502 status:</span><span class="sxs-lookup"><span data-stu-id="36cb9-337">This code snippet shows a simple example of a Fiddler script that intercepts responses tooread requests against hello **employeedata** table tooreturn a 502 status:</span></span>

```java
static function OnBeforeResponse(oSession: Session) {
    ...
    if ((oSession.hostname == "\[yourstorageaccount\].table.core.windows.net")
      && (oSession.PathAndQuery.StartsWith("/employeedata?$filter"))) {
        oSession.responseCode = 502;
    }
}
```

<span data-ttu-id="36cb9-338">Você pode estender esse exemplo toointercept uma variedade maior de solicitações e alterar apenas Olá **responseCode** em algumas delas toobetter simular um cenário do mundo real.</span><span class="sxs-lookup"><span data-stu-id="36cb9-338">You could extend this example toointercept a wider range of requests and only change hello **responseCode** on some of them toobetter simulate a real-world scenario.</span></span> <span data-ttu-id="36cb9-339">Para obter mais informações sobre como personalizar os scripts do Fiddler, consulte [modificando uma solicitação ou resposta](http://docs.telerik.com/fiddler/KnowledgeBase/FiddlerScript/ModifyRequestOrResponse) em Olá documentação Fiddler.</span><span class="sxs-lookup"><span data-stu-id="36cb9-339">For more information about customizing Fiddler scripts, see [Modifying a Request or Response](http://docs.telerik.com/fiddler/KnowledgeBase/FiddlerScript/ModifyRequestOrResponse) in hello Fiddler documentation.</span></span>

<span data-ttu-id="36cb9-340">Se você tiver feito limites Olá para alternar entre o aplicativo somente tooread modo pode ser configurado, será mais fácil comportamento de saudação tootest com volumes de transações de não produção.</span><span class="sxs-lookup"><span data-stu-id="36cb9-340">If you have made hello thresholds for switching your application tooread-only mode configurable, it will be easier tootest hello behavior with non-production transaction volumes.</span></span>

## <a name="next-steps"></a><span data-ttu-id="36cb9-341">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="36cb9-341">Next Steps</span></span>

* <span data-ttu-id="36cb9-342">Para obter mais informações sobre acesso de leitura a redundância geográfica, incluindo outro exemplo de como Olá LastSyncTime for definido, consulte [opções de redundância de armazenamento do Windows Azure e armazenamento geograficamente redundante de acesso de leitura](https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/11/windows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage/).</span><span class="sxs-lookup"><span data-stu-id="36cb9-342">For more information about Read Access Geo-Redundancy, including another example of how hello LastSyncTime is set, please see [Windows Azure Storage Redundancy Options and Read Access Geo Redundant Storage](https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/11/windows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage/).</span></span>

* <span data-ttu-id="36cb9-343">Para obter um exemplo completo mostrando como toomake Olá alternar e voltar entre pontos de extremidade primário e secundário Olá, consulte [exemplos do Azure – usando Olá padrão de disjuntor com armazenamento de RA-GRS](https://github.com/Azure-Samples/storage-dotnet-circuit-breaker-pattern-ha-apps-using-ra-grs).</span><span class="sxs-lookup"><span data-stu-id="36cb9-343">For a complete sample showing how toomake hello switch back and forth between hello Primary and Secondary endpoints, please see [Azure Samples – Using hello Circuit Breaker Pattern with RA-GRS storage](https://github.com/Azure-Samples/storage-dotnet-circuit-breaker-pattern-ha-apps-using-ra-grs).</span></span>
