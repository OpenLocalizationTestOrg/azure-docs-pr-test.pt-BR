---
title: "Como usar o Controle de acesso baseado em função no Gerenciamento de API do Azure | Microsoft Docs"
description: "Saiba como usar as funções internas e criar funções personalizadas no Gerenciamento de API do Azure"
services: api-management
documentationcenter: 
author: miaojiang
manager: erikre
editor: 
ms.assetid: 364cd53e-88fb-4301-a093-f132fa1f88f5
ms.service: api-management
ms.workload: mobile
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/30/2017
ms.author: apimpm
ms.openlocfilehash: fa757a591d788f52d759bc24accedd3c55149ae7
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/11/2017
---
# <a name="how-to-use-role-based-access-control-in-azure-api-management"></a><span data-ttu-id="d13c1-103">Como usar o Controle de Acesso baseado em função no Gerenciamento de API do Azure</span><span class="sxs-lookup"><span data-stu-id="d13c1-103">How to Use Role-Based Access Control in Azure API Management</span></span>
<span data-ttu-id="d13c1-104">O Gerenciamento de API do Azure depende do RBAC (Controle de Acesso baseado em função) do Azure para habilitar o gerenciamento de acesso refinado de serviços e entidades (por exemplo, APIs, políticas).</span><span class="sxs-lookup"><span data-stu-id="d13c1-104">Azure API Management relies on Azure Role-Based Access Control (RBAC) to enable fine-grained access management for API Management services and entities (e.g., APIs, policies).</span></span> <span data-ttu-id="d13c1-105">Este artigo fornece uma visão geral das funções internas e personalizadas no Gerenciamento de API.</span><span class="sxs-lookup"><span data-stu-id="d13c1-105">This article gives you an overview of the built-in and custom roles in API Management.</span></span> <span data-ttu-id="d13c1-106">Se você quiser mais detalhes sobre o gerenciamento de acesso no Portal do Azure, confira [Introdução ao gerenciamento de acesso no Portal do Azure](https://azure.microsoft.com/en-us/documentation/articles/role-based-access-control-what-is/)</span><span class="sxs-lookup"><span data-stu-id="d13c1-106">If you want more details on access management in the Azure portal, see [Get started with access management in the Azure portal](https://azure.microsoft.com/en-us/documentation/articles/role-based-access-control-what-is/)</span></span>

## <a name="built-in-roles"></a><span data-ttu-id="d13c1-107">Funções internas</span><span class="sxs-lookup"><span data-stu-id="d13c1-107">Built-in Roles</span></span>
<span data-ttu-id="d13c1-108">No momento, o Gerenciamento de API oferece três funções internas, e adicionará outras duas funções em breve.</span><span class="sxs-lookup"><span data-stu-id="d13c1-108">API Management currently provides 3 built-in roles and will add 2 more roles in the near future.</span></span> <span data-ttu-id="d13c1-109">Essas funções podem ser atribuídas em escopos diferentes, incluindo assinatura, grupo de recursos e instância individual do Gerenciamento de API.</span><span class="sxs-lookup"><span data-stu-id="d13c1-109">These roles can be assigned at differnt scopes including subscription, resource group, and individual API Management instance.</span></span> <span data-ttu-id="d13c1-110">Por exemplo, se a função "Leitor de Serviço do Gerenciamento de API do Azure" for atribuída a um usuário no nível do grupo de recursos, o usuário terá acesso de leitura a todas as instâncias do Gerenciamento de API dentro do grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="d13c1-110">For instance, if the "Azure API Management Service Reader" role is assigned to an user at the resource group level, then the user will have read access to all API Management instances inside the resource group.</span></span> 

<span data-ttu-id="d13c1-111">A tabela a seguir fornece breves descrições das funções internas.</span><span class="sxs-lookup"><span data-stu-id="d13c1-111">The following table provides brief descriptions of the built-in roles.</span></span> <span data-ttu-id="d13c1-112">Atribua essas funções usando o Portal do Azure ou outras ferramentas, incluindo o Azure [PowerShell](https://docs.microsoft.com/en-us/azure/active-directory/role-based-access-control-manage-access-powershell), a [Interface de linha de comando](https://docs.microsoft.com/en-us/azure/active-directory/role-based-access-control-manage-access-azure-cli) do Azure e a [API REST](https://docs.microsoft.com/en-us/azure/active-directory/role-based-access-control-manage-access-rest).</span><span class="sxs-lookup"><span data-stu-id="d13c1-112">You can assign these roles using the Azure Portal or other tools including Azure [PowerShell](https://docs.microsoft.com/en-us/azure/active-directory/role-based-access-control-manage-access-powershell), Azure [Command-line interface](https://docs.microsoft.com/en-us/azure/active-directory/role-based-access-control-manage-access-azure-cli), and [REST API](https://docs.microsoft.com/en-us/azure/active-directory/role-based-access-control-manage-access-rest).</span></span> <span data-ttu-id="d13c1-113">Para obter detalhes sobre como atribuir funções internas, confira [Usar atribuições de função para gerenciar o acesso aos recursos de sua assinatura do Azure](https://azure.microsoft.com/en-us/documentation/articles/role-based-access-control-what-is/).</span><span class="sxs-lookup"><span data-stu-id="d13c1-113">For details about how to assign built-in roles, see [Use role assignments to manage access to your Azure subscription resources](https://azure.microsoft.com/en-us/documentation/articles/role-based-access-control-what-is/).</span></span>

| <span data-ttu-id="d13c1-114">Função</span><span class="sxs-lookup"><span data-stu-id="d13c1-114">Role</span></span>          | <span data-ttu-id="d13c1-115">Acesso de leitura<sup>[1]</sup></span><span class="sxs-lookup"><span data-stu-id="d13c1-115">Read access<sup>[1]</sup></span></span> | <span data-ttu-id="d13c1-116">Acesso de gravação<sup>[2]</sup></span><span class="sxs-lookup"><span data-stu-id="d13c1-116">Write access<sup>[2]</sup></span></span> | <span data-ttu-id="d13c1-117">Criação, exclusão, dimensionamento do serviço, configuração de VPN e domínio personalizado</span><span class="sxs-lookup"><span data-stu-id="d13c1-117">Service creation, deletion, scaling, VPN and custom domain configuration</span></span> | <span data-ttu-id="d13c1-118">Acesso ao Portal do Publicador herdado</span><span class="sxs-lookup"><span data-stu-id="d13c1-118">Access to legacy Publsiher Portal</span></span> | <span data-ttu-id="d13c1-119">Descrição</span><span class="sxs-lookup"><span data-stu-id="d13c1-119">Description</span></span>
| ------------- | ---- | ---- | ---- | ---- | ---- | ---- |
| <span data-ttu-id="d13c1-120">Colaborador do serviço de Gerenciamento de API do Azure</span><span class="sxs-lookup"><span data-stu-id="d13c1-120">Azure API Management Service Contributor</span></span> | <span data-ttu-id="d13c1-121">✓</span><span class="sxs-lookup"><span data-stu-id="d13c1-121">✓</span></span> | <span data-ttu-id="d13c1-122">✓ </span><span class="sxs-lookup"><span data-stu-id="d13c1-122">✓</span></span> | <span data-ttu-id="d13c1-123">✓ </span><span class="sxs-lookup"><span data-stu-id="d13c1-123">✓</span></span> | <span data-ttu-id="d13c1-124">✓</span><span class="sxs-lookup"><span data-stu-id="d13c1-124">✓</span></span> | <span data-ttu-id="d13c1-125">Superusuário.</span><span class="sxs-lookup"><span data-stu-id="d13c1-125">Super user.</span></span> <span data-ttu-id="d13c1-126">Tem acesso total de CRUD aos serviços e entidades do Gerenciamento de API (por exemplo, APIs, Políticas).</span><span class="sxs-lookup"><span data-stu-id="d13c1-126">Has full CRUD access to API Management services and entities (e.g., APIs, Policies).</span></span> <span data-ttu-id="d13c1-127">Tem acesso ao portal do publicador herdado.</span><span class="sxs-lookup"><span data-stu-id="d13c1-127">Has access to the legacy publisher portal.</span></span> |
| <span data-ttu-id="d13c1-128">Leitor do serviço de Gerenciamento de API do Azure</span><span class="sxs-lookup"><span data-stu-id="d13c1-128">Azure API Management Service Reader</span></span> | <span data-ttu-id="d13c1-129">✓</span><span class="sxs-lookup"><span data-stu-id="d13c1-129">✓</span></span> | | || <span data-ttu-id="d13c1-130">Tem acesso somente leitura aos serviços e entidades do Gerenciamento de API.</span><span class="sxs-lookup"><span data-stu-id="d13c1-130">Has read-only access to API Management services and entities.</span></span> |
| <span data-ttu-id="d13c1-131">Operador do serviço de Gerenciamento de API do Azure</span><span class="sxs-lookup"><span data-stu-id="d13c1-131">Azure API Management Service Operator</span></span> | <span data-ttu-id="d13c1-132">✓</span><span class="sxs-lookup"><span data-stu-id="d13c1-132">✓</span></span> | | <span data-ttu-id="d13c1-133">✓</span><span class="sxs-lookup"><span data-stu-id="d13c1-133">✓</span></span> | | <span data-ttu-id="d13c1-134">Pode gerenciar os serviços de Gerenciamento de API, mas não as entidades.</span><span class="sxs-lookup"><span data-stu-id="d13c1-134">Can manage API Management services but not entities.</span></span>|
| <span data-ttu-id="d13c1-135">Editor do serviço de Gerenciamento de API do Azure<sup>*</sup></span><span class="sxs-lookup"><span data-stu-id="d13c1-135">Azure API Management Service Editor<sup>*</sup></span></span> | <span data-ttu-id="d13c1-136">✓</span><span class="sxs-lookup"><span data-stu-id="d13c1-136">✓</span></span> | <span data-ttu-id="d13c1-137">✓</span><span class="sxs-lookup"><span data-stu-id="d13c1-137">✓</span></span> | |  | <span data-ttu-id="d13c1-138">Pode gerenciar as entidades de Gerenciamento de API, mas não os serviços.</span><span class="sxs-lookup"><span data-stu-id="d13c1-138">Can manage API Management entities but not services.</span></span>|
| <span data-ttu-id="d13c1-139">Gerenciador de conteúdo do Gerenciamento de API do Azure<sup>*</sup></span><span class="sxs-lookup"><span data-stu-id="d13c1-139">Azure API Management Content Manager<sup>*</sup></span></span> | <span data-ttu-id="d13c1-140">✓</span><span class="sxs-lookup"><span data-stu-id="d13c1-140">✓</span></span> | | | <span data-ttu-id="d13c1-141">✓</span><span class="sxs-lookup"><span data-stu-id="d13c1-141">✓</span></span> | <span data-ttu-id="d13c1-142">Pode gerenciar o portal do desenvolvedor.</span><span class="sxs-lookup"><span data-stu-id="d13c1-142">Can manage developer portal.</span></span> <span data-ttu-id="d13c1-143">Acesso somente leitura aos serviços e entidades.</span><span class="sxs-lookup"><span data-stu-id="d13c1-143">Read-only access to services and entities.</span></span>|

<span data-ttu-id="d13c1-144"><sup>[1] Acesso de leitura aos serviços e entidades do Gerenciamento de API (por exemplo, APIs, Políticas)</sup></span><span class="sxs-lookup"><span data-stu-id="d13c1-144"><sup>[1] Read access to API Management services and entities (e.g., APIs, policies)</sup></span></span>

<span data-ttu-id="d13c1-145"><sup>[2] Acesso de gravação aos serviços e entidades do Gerenciamento de API, exceto as seguintes operações: 1) Criação, exclusão e dimensionamento de instância 2) Configuração de VPN 3) Configuração de nome de domínio personalizado</sup></span><span class="sxs-lookup"><span data-stu-id="d13c1-145"><sup>[2] Write access to API Management services and entities except following opeartions: 1) Instance creation, deletion, and scaling 2) VPN configuration  3) Custom domain name setup</sup></span></span>

<span data-ttu-id="d13c1-146"><sup>\* A função Editor de Serviço estará disponível após migrarmos toda a interface de usuário do administrador do portal do publicador existente para o Portal do Azure. A função Gerenciador de Conteúdo estará disponível após o portal do publicador ser refatorado para conter apenas as funcionalidades relacionadas ao gerenciamento do portal do desenvolvedor.</sup></span><span class="sxs-lookup"><span data-stu-id="d13c1-146"><sup>\* The Service Editor role will be available after we migrate all admin UI from the existing publisher portal to the Azure portal. The Content Manager role will be available after the publisher portal is refactored to only contain functionalities related to managing the developer portal.</sup></span></span>  


## <a name="custom-roles"></a><span data-ttu-id="d13c1-147">Funções personalizadas</span><span class="sxs-lookup"><span data-stu-id="d13c1-147">Custom Roles</span></span>
<span data-ttu-id="d13c1-148">Se nenhuma das funções internas atender às suas necessidades específicas, será possível criar funções personalizadas para fornecer um gerenciamento de acesso mais refinado às entidades do Gerenciamento de API.</span><span class="sxs-lookup"><span data-stu-id="d13c1-148">If none of the built-in roles meet your specific needs, custom roles can be created to provide more granular access management for API Management entities.</span></span> <span data-ttu-id="d13c1-149">Por exemplo, você pode criar uma função personalizada que tem acesso somente leitura a um serviço do Gerenciamento de API, mas que tem acesso de gravação somente para uma API específica.</span><span class="sxs-lookup"><span data-stu-id="d13c1-149">For example, you can create a custom role which has read-only access to an API Management service but only has write access to one specific API.</span></span> <span data-ttu-id="d13c1-150">Para saber mais detalhes sobre funções personalizadas, consulte [Funções personalizadas no Azure RBAC](https://docs.microsoft.com/en-us/azure/active-directory/role-based-access-control-custom-roles).</span><span class="sxs-lookup"><span data-stu-id="d13c1-150">To learn more details about custom roles, see [Custom Roles in Azure RBAC](https://docs.microsoft.com/en-us/azure/active-directory/role-based-access-control-custom-roles).</span></span> 

<span data-ttu-id="d13c1-151">Ao criar uma função personalizada, é mais fácil começar com uma das funções internas.</span><span class="sxs-lookup"><span data-stu-id="d13c1-151">When you create a custom role, it is easier to start with one of the built-in roles.</span></span> <span data-ttu-id="d13c1-152">Edite os atributos para adicionar Actions, NotActions ou AssignableScopes e salve as alterações como uma nova função.</span><span class="sxs-lookup"><span data-stu-id="d13c1-152">Edit the attributes to add the Actions, NotActions, or AssignableScopes, then save the changes as a new role.</span></span> <span data-ttu-id="d13c1-153">O exemplo a seguir começa com a função "Leitor de serviço do Gerenciamento de API do Azure" e cria uma função personalizada chamada "Editor de API da Calculadora".</span><span class="sxs-lookup"><span data-stu-id="d13c1-153">The following example begins with the "Azure API Managment Service Reader" role and creates a custom role called "Calculator API Editor".</span></span> <span data-ttu-id="d13c1-154">A função personalizada pode ser atribuída somente a uma API específica, portanto, terá acesso somente a essa API.</span><span class="sxs-lookup"><span data-stu-id="d13c1-154">The custom role can be assigned only to a specific API therefore will only has access to that API.</span></span> 

```
$role = Get-AzureRmRoleDefinition "API Management Service Reader Role"
$role.Id = $null
$role.Name = 'Calculator API Contributor'
$role.Description = 'Has read access to Contoso APIM instance and write access to the Calculator API.'
$role.Actions.Add('Microsoft.ApiManagement/service/apis/write')
$role.AssignableScopes.Clear()
$role.AssignableScopes.Add('/subscriptions/<subscription ID>/resourceGroups/<resource group name>/providers/Microsoft.ApiManagement/service/<service name>/apis/<api ID>')
New-AzureRmRoleDefinition -Role $role
New-AzureRmRoleAssignment -ObjectId <object ID of the user account> -RoleDefinitionName 'Calculator API Contributor' -Scope '/subscriptions/<subscription ID>/resourceGroups/<resource group name>/providers/Microsoft.ApiManagement/service/<service name>/apis/<api ID>'
```

## <a name="watch-a-video-overview"></a><span data-ttu-id="d13c1-155">Assista a uma visão geral em vídeo</span><span class="sxs-lookup"><span data-stu-id="d13c1-155">Watch a Video Overview</span></span>

> [!VIDEO https://channel9.msdn.com/Blogs/AzureApiMgmt/Role-Based-Access-Control-in-API-Management/player]
> 
> 

## <a name="next-steps"></a><span data-ttu-id="d13c1-156">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="d13c1-156">Next Steps</span></span>

* <span data-ttu-id="d13c1-157">Saiba mais sobre o Controle de Acesso baseado em função no Azure</span><span class="sxs-lookup"><span data-stu-id="d13c1-157">Learn more about Role-Based Access Control in Azure</span></span>
  * [<span data-ttu-id="d13c1-158">Introdução ao gerenciamento de acesso no portal do Azure</span><span class="sxs-lookup"><span data-stu-id="d13c1-158">Get started with access management in the Azure portal</span></span>](https://azure.microsoft.com/en-us/documentation/articles/role-based-access-control-what-is/)
  * [<span data-ttu-id="d13c1-159">Usar as atribuições de função para gerenciar o acesso aos recursos de assinatura do Azure</span><span class="sxs-lookup"><span data-stu-id="d13c1-159">Use role assignments to manage access to your Azure subscription resources</span></span>](https://azure.microsoft.com/en-us/documentation/articles/role-based-access-control-what-is/)
  * [<span data-ttu-id="d13c1-160">Funções personalizadas no Azure RBAC</span><span class="sxs-lookup"><span data-stu-id="d13c1-160">Custom Roles in Azure RBAC</span></span>](https://docs.microsoft.com/en-us/azure/active-directory/role-based-access-control-custom-roles)
