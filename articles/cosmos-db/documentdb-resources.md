---
title: aaaAzure Cosmos banco de dados modelo de recursos e conceitos | Microsoft Docs
description: "Saiba mais sobre o modelo de hierárquica do Azure Cosmos DB de bancos de dados, coleções, função definida pelo usuário (UDF), documentos, recursos de toomanage permissões e muito mais."
keywords: "Modelo hierárquico, cosmosdb, azure, Microsoft azure"
services: cosmos-db
documentationcenter: 
author: AndrewHoh
manager: jhubbard
editor: monicar
ms.assetid: ef9d5c0c-0867-4317-bb1b-98e219799fd5
ms.service: cosmos-db
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/24/2017
ms.author: anhoh
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: fc3642232b86cc27901ebd97456c386829324632
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="azure-cosmos-db-hierarchical-resource-model-and-core-concepts"></a><span data-ttu-id="2bb7b-104">Modelo de recurso hierárquico e principais conceitos do Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="2bb7b-104">Azure Cosmos DB hierarchical resource model and core concepts</span></span>
<span data-ttu-id="2bb7b-105">entidades de banco de dados que gerencia o banco de dados do Azure Cosmos Hello são chamados tooas **recursos**.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-105">hello database entities that Azure Cosmos DB manages are referred tooas **resources**.</span></span> <span data-ttu-id="2bb7b-106">Cada recurso é identificado de maneira exclusiva por um URI lógico.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-106">Each resource is uniquely identified by a logical URI.</span></span> <span data-ttu-id="2bb7b-107">Você pode interagir com os recursos de saudação usando verbos HTTP padrão, os cabeçalhos de solicitação/resposta e códigos de status.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-107">You can interact with hello resources using standard HTTP verbs, request/response headers and status codes.</span></span> 

<span data-ttu-id="2bb7b-108">Lendo este artigo, você será capaz de tooanswer Olá perguntas a seguir:</span><span class="sxs-lookup"><span data-stu-id="2bb7b-108">By reading this article, you'll be able tooanswer hello following questions:</span></span>

* <span data-ttu-id="2bb7b-109">O que é o modelo de recurso do Cosmos DB?</span><span class="sxs-lookup"><span data-stu-id="2bb7b-109">What is Cosmos DB's resource model?</span></span>
* <span data-ttu-id="2bb7b-110">Quais são de sistema definidos recursos como recursos de toouser contrário definido?</span><span class="sxs-lookup"><span data-stu-id="2bb7b-110">What are system defined resources as opposed toouser defined resources?</span></span>
* <span data-ttu-id="2bb7b-111">Como eu acesso um recurso?</span><span class="sxs-lookup"><span data-stu-id="2bb7b-111">How do I address a resource?</span></span>
* <span data-ttu-id="2bb7b-112">Como eu trabalho com coleções?</span><span class="sxs-lookup"><span data-stu-id="2bb7b-112">How do I work with collections?</span></span>
* <span data-ttu-id="2bb7b-113">Como trabalhar com procedimentos armazenados, disparadores e UDFs (Funções Definidas pelo Usuário)?</span><span class="sxs-lookup"><span data-stu-id="2bb7b-113">How do I work with stored procedures, triggers and User Defined Functions (UDFs)?</span></span>

## <a name="hierarchical-resource-model"></a><span data-ttu-id="2bb7b-114">Modelo de recursos hierárquico</span><span class="sxs-lookup"><span data-stu-id="2bb7b-114">Hierarchical resource model</span></span>
<span data-ttu-id="2bb7b-115">Como hello diagrama a seguir ilustra, Olá Cosmos DB hierárquica **modelo de recurso** consistem em conjuntos de recursos em uma conta de banco de dados, cada endereçável por meio de um URI de lógico e estável.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-115">As hello following diagram illustrates, hello Cosmos DB hierarchical **resource model** consists of sets of resources under a database account, each addressable via a logical and stable URI.</span></span> <span data-ttu-id="2bb7b-116">Um conjunto de recursos será chamado tooas um **feed** neste artigo.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-116">A set of resources will be referred tooas a **feed** in this article.</span></span> 

> [!NOTE]
> <span data-ttu-id="2bb7b-117">Banco de dados do Azure Cosmos oferece um protocolo TCP altamente eficiente, que também é RESTful no seu modelo de comunicação, disponível por meio de saudação [API cliente .NET do DocumentDB](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="2bb7b-117">Azure Cosmos DB offers a highly efficient TCP protocol which is also RESTful in its communication model, available through hello [DocumentDB .NET client API](documentdb-sdk-dotnet.md).</span></span>
> 
> 

<span data-ttu-id="2bb7b-118">![Modelo de recurso hierárquico do Azure Cosmos DB][1]</span><span class="sxs-lookup"><span data-stu-id="2bb7b-118">![Azure Cosmos DB hierarchical resource model][1]</span></span>  
<span data-ttu-id="2bb7b-119">**Modelo de recursos hierárquico**</span><span class="sxs-lookup"><span data-stu-id="2bb7b-119">**Hierarchical resource model**</span></span>   

<span data-ttu-id="2bb7b-120">toostart trabalhar com recursos, você deve [criar uma conta de banco de dados](create-documentdb-dotnet.md) usando sua assinatura do Azure.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-120">toostart working with resources, you must [create a database account](create-documentdb-dotnet.md) using your Azure subscription.</span></span> <span data-ttu-id="2bb7b-121">Uma conta do banco de dados pode ser formada por um conjunto de **bancos de dados**, cada um contendo diversas **coleções**, cada uma delas, por sua vez, contendo **procedimentos armazenados, gatilhos, UDFs, documentos** e **anexos** relacionados.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-121">A database account can consist of a set of **databases**, each containing multiple **collections**, each of which in turn contain **stored procedures, triggers, UDFs, documents** and related **attachments**.</span></span> <span data-ttu-id="2bb7b-122">Um banco de dados também associada **usuários**, cada um com um conjunto de **permissões** tooaccess coleções, procedimentos armazenados, disparadores, UDFs, documentos ou anexos.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-122">A database also has associated **users**, each with a set of **permissions** tooaccess collections, stored procedures, triggers, UDFs, documents or attachments.</span></span> <span data-ttu-id="2bb7b-123">Enquanto bancos de dados, usuários, permissões e coleções são recursos definidos pelo sistema com esquemas bastante conhecidos, os documentos e anexos possuem conteúdos JSON arbitrários, definidos pelo usuário.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-123">While databases, users, permissions and collections are system-defined resources with well-known schemas, documents and attachments contain arbitrary, user defined JSON content.</span></span>  

| <span data-ttu-id="2bb7b-124">Recurso</span><span class="sxs-lookup"><span data-stu-id="2bb7b-124">Resource</span></span> | <span data-ttu-id="2bb7b-125">Descrição</span><span class="sxs-lookup"><span data-stu-id="2bb7b-125">Description</span></span> |
| --- | --- |
| <span data-ttu-id="2bb7b-126">Conta de banco de dados</span><span class="sxs-lookup"><span data-stu-id="2bb7b-126">Database account</span></span> |<span data-ttu-id="2bb7b-127">Uma conta de banco de dados está associada a um conjunto de bancos de dados e uma quantidade fixa de armazenamento de blobs para anexos.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-127">A database account is associated with a set of databases and a fixed amount of blob storage for attachments.</span></span> <span data-ttu-id="2bb7b-128">Você pode criar uma ou mais contas do banco de dados usando sua assinatura do Azure.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-128">You can create one or more database accounts using your Azure subscription.</span></span> <span data-ttu-id="2bb7b-129">Para obter mais informações, visite nossa [página de preços](https://azure.microsoft.com/pricing/details/cosmos-db/).</span><span class="sxs-lookup"><span data-stu-id="2bb7b-129">For more information, visit our [pricing page](https://azure.microsoft.com/pricing/details/cosmos-db/).</span></span> |
| <span data-ttu-id="2bb7b-130">Banco de dados</span><span class="sxs-lookup"><span data-stu-id="2bb7b-130">Database</span></span> |<span data-ttu-id="2bb7b-131">Um banco de dados é um contêiner lógico de armazenamento de documentos particionado em coleções.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-131">A database is a logical container of document storage partitioned across collections.</span></span> <span data-ttu-id="2bb7b-132">Ele também é um contêiner para usuários.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-132">It is also a users container.</span></span> |
| <span data-ttu-id="2bb7b-133">Usuário</span><span class="sxs-lookup"><span data-stu-id="2bb7b-133">User</span></span> |<span data-ttu-id="2bb7b-134">Olá namespace lógico para definir permissões.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-134">hello logical namespace for scoping permissions.</span></span> |
| <span data-ttu-id="2bb7b-135">Permissão</span><span class="sxs-lookup"><span data-stu-id="2bb7b-135">Permission</span></span> |<span data-ttu-id="2bb7b-136">Um token de autorização associado a um usuário para um recurso específico do acesso tooa.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-136">An authorization token associated with a user for access tooa specific resource.</span></span> |
| <span data-ttu-id="2bb7b-137">Coleção</span><span class="sxs-lookup"><span data-stu-id="2bb7b-137">Collection</span></span> |<span data-ttu-id="2bb7b-138">Uma coleção é um contêiner de documentos JSON e Olá associados a lógica do aplicativo JavaScript.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-138">A collection is a container of JSON documents and hello associated JavaScript application logic.</span></span> <span data-ttu-id="2bb7b-139">Uma coleção é uma entidade faturável, onde hello [custo](performance-levels.md) é determinado pelo nível de desempenho Olá associado à coleta de saudação.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-139">A collection is a billable entity, where hello [cost](performance-levels.md) is determined by hello performance level associated with hello collection.</span></span> <span data-ttu-id="2bb7b-140">Coleções podem abranger um ou mais partições/servidores e pode ser dimensionado toohandle praticamente ilimitados volumes de armazenamento ou de taxa de transferência.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-140">Collections can span one or more partitions/servers and can scale toohandle practically unlimited volumes of storage or throughput.</span></span> |
| <span data-ttu-id="2bb7b-141">Procedimento armazenado</span><span class="sxs-lookup"><span data-stu-id="2bb7b-141">Stored Procedure</span></span> |<span data-ttu-id="2bb7b-142">Lógica de aplicativo escrita em JavaScript que é registrada com uma coleção e executado de forma transacional no mecanismo de banco de dados de saudação.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-142">Application logic written in JavaScript which is registered with a collection and transactionally executed within hello database engine.</span></span> |
| <span data-ttu-id="2bb7b-143">Gatilho</span><span class="sxs-lookup"><span data-stu-id="2bb7b-143">Trigger</span></span> |<span data-ttu-id="2bb7b-144">Lógica de aplicativo escrita em JavaScript executada antes ou depois de uma operação de inserção, substituição ou exclusão.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-144">Application logic written in JavaScript executed before or after either an insert, replace or delete operation.</span></span> |
| <span data-ttu-id="2bb7b-145">UDF</span><span class="sxs-lookup"><span data-stu-id="2bb7b-145">UDF</span></span> |<span data-ttu-id="2bb7b-146">Uma lógica de aplicativo escrita em JavaScript.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-146">Application logic written in JavaScript.</span></span> <span data-ttu-id="2bb7b-147">UDFs habilitar toomodel um operador de consulta personalizada e, portanto, estendem a linguagem de consulta Olá core API DocumentDB.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-147">UDFs enable you toomodel a custom query operator and thereby extend hello core DocumentDB API query language.</span></span> |
| <span data-ttu-id="2bb7b-148">Documento</span><span class="sxs-lookup"><span data-stu-id="2bb7b-148">Document</span></span> |<span data-ttu-id="2bb7b-149">Conteúdo JSON (arbitrário) definido pelo usuário.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-149">User defined (arbitrary) JSON content.</span></span> <span data-ttu-id="2bb7b-150">Por padrão, nenhum esquema precisa toobe definido nem índices secundários precisarem toobe fornecido para Olá todos os documentos adicionados tooa coleção.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-150">By default, no schema needs toobe defined nor do secondary indices need toobe provided for all hello documents added tooa collection.</span></span> |
| <span data-ttu-id="2bb7b-151">Anexo</span><span class="sxs-lookup"><span data-stu-id="2bb7b-151">Attachment</span></span> |<span data-ttu-id="2bb7b-152">Um anexo é um documento especial que contém referências e metadados associados a blobs/mídias externos.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-152">An attachment is a special document containing references and associated metadata for external blob/media.</span></span> <span data-ttu-id="2bb7b-153">desenvolvedor Olá pode escolher o blob de saudação toohave gerenciada pelo banco de dados do Cosmos ou armazená-lo com um provedor de serviço blob externo, como OneDrive, Dropbox, etc.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-153">hello developer can choose toohave hello blob managed by Cosmos DB or store it with an external blob service provider such as OneDrive, Dropbox, etc.</span></span> |

## <a name="system-vs-user-defined-resources"></a><span data-ttu-id="2bb7b-154">Recursos definidos pelo sistema versus usuário</span><span class="sxs-lookup"><span data-stu-id="2bb7b-154">System vs. user defined resources</span></span>
<span data-ttu-id="2bb7b-155">Recursos como contas do banco de dados, bancos de dados, coleções, usuários, permissões, procedimentos armazenados, gatilhos e UDFs, todos possuem um esquema fixo e são chamados de recursos do sistema.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-155">Resources such as database accounts, databases, collections, users, permissions, stored procedures, triggers, and UDFs - all have a fixed schema and are called system resources.</span></span> <span data-ttu-id="2bb7b-156">Por outro lado, recursos, como documentos e anexos não têm restrições no esquema de saudação e exemplos de recursos definida pelo usuário.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-156">In contrast, resources such as documents and attachments have no restrictions on hello schema and are examples of user defined resources.</span></span> <span data-ttu-id="2bb7b-157">No Cosmos DB, ambos os recursos definidos pelo sistema e pelo usuário são representados e gerenciados como JSON em conformidade com o padrão.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-157">In Cosmos DB, both system and user defined resources are represented and managed as standard-compliant JSON.</span></span> <span data-ttu-id="2bb7b-158">Todos os recursos, sistema ou usuário definida, tem Olá propriedades comuns a seguir.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-158">All resources, system or user defined, have hello following common properties.</span></span>

> [!NOTE]
> <span data-ttu-id="2bb7b-159">Observe que todas as propriedades geradas pelo sistema em um recurso têm como prefixo um sublinhado (_) na sua representação JSON.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-159">Note that all system generated properties in a resource are prefixed with an underscore (_) in their JSON representation.</span></span>
> 
> 

<table>
    <tbody>
        <tr>
            <td valign="top"><p><span data-ttu-id="2bb7b-160"><strong>Propriedade</strong></span><span class="sxs-lookup"><span data-stu-id="2bb7b-160"><strong>Property</strong></span></span></p></td>
            <td valign="top"><p><span data-ttu-id="2bb7b-161"><strong>Configurável pelo usuário ou gerada pelo sistema?</strong></span><span class="sxs-lookup"><span data-stu-id="2bb7b-161"><strong>User settable or system generated?</strong></span></span></p></td>
            <td valign="top"><p><span data-ttu-id="2bb7b-162"><strong>Finalidade</strong></span><span class="sxs-lookup"><span data-stu-id="2bb7b-162"><strong>Purpose</strong></span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="2bb7b-163">_rid</span><span class="sxs-lookup"><span data-stu-id="2bb7b-163">_rid</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="2bb7b-164">Gerada pelo sistema</span><span class="sxs-lookup"><span data-stu-id="2bb7b-164">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="2bb7b-165">Gerados pelo sistema, identificador exclusivo e hierárquico do recurso de saudação</span><span class="sxs-lookup"><span data-stu-id="2bb7b-165">System generated, unique and hierarchical identifier of hello resource</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="2bb7b-166">_etag</span><span class="sxs-lookup"><span data-stu-id="2bb7b-166">_etag</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="2bb7b-167">Gerada pelo sistema</span><span class="sxs-lookup"><span data-stu-id="2bb7b-167">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="2bb7b-168">ETag do recurso Olá necessário para o controle de simultaneidade otimista</span><span class="sxs-lookup"><span data-stu-id="2bb7b-168">etag of hello resource required for optimistic concurrency control</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="2bb7b-169">_ts</span><span class="sxs-lookup"><span data-stu-id="2bb7b-169">_ts</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="2bb7b-170">Gerada pelo sistema</span><span class="sxs-lookup"><span data-stu-id="2bb7b-170">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="2bb7b-171">Último carimbo de hora atualizado do recurso de saudação</span><span class="sxs-lookup"><span data-stu-id="2bb7b-171">Last updated timestamp of hello resource</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="2bb7b-172">_self</span><span class="sxs-lookup"><span data-stu-id="2bb7b-172">_self</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="2bb7b-173">Gerada pelo sistema</span><span class="sxs-lookup"><span data-stu-id="2bb7b-173">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="2bb7b-174">URI endereçável exclusivo do recurso de saudação</span><span class="sxs-lookup"><span data-stu-id="2bb7b-174">Unique addressable URI of hello resource</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="2bb7b-175">ID</span><span class="sxs-lookup"><span data-stu-id="2bb7b-175">id</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="2bb7b-176">Gerada pelo sistema</span><span class="sxs-lookup"><span data-stu-id="2bb7b-176">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="2bb7b-177">Nome exclusivo do recurso Olá definido pelo usuário (com hello mesma partição valor de chave).</span><span class="sxs-lookup"><span data-stu-id="2bb7b-177">User defined unique name of hello resource (with hello same partition key value).</span></span> <span data-ttu-id="2bb7b-178">Se o usuário Olá não especificar uma id, uma id será gerada pelo sistema</span><span class="sxs-lookup"><span data-stu-id="2bb7b-178">If hello user does not specify an id, an id will be system generated</span></span></p></td>
        </tr>
    </tbody>
</table>

### <a name="wire-representation-of-resources"></a><span data-ttu-id="2bb7b-179">Representação da conexão dos recursos</span><span class="sxs-lookup"><span data-stu-id="2bb7b-179">Wire representation of resources</span></span>
<span data-ttu-id="2bb7b-180">Cosmos banco de dados não exige qualquer extensões proprietárias toohello JSON padrão ou especiais codificações; ele funciona com documentos JSON compatíveis padrão.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-180">Cosmos DB does not mandate any proprietary extensions toohello JSON standard or special encodings; it works with standard compliant JSON documents.</span></span>  

### <a name="addressing-a-resource"></a><span data-ttu-id="2bb7b-181">Endereçamento de um recurso</span><span class="sxs-lookup"><span data-stu-id="2bb7b-181">Addressing a resource</span></span>
<span data-ttu-id="2bb7b-182">Todos os recursos são endereçáveis pelo URI.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-182">All resources are URI addressable.</span></span> <span data-ttu-id="2bb7b-183">Olá valor Olá **Self** propriedade de um recurso representa Olá URI relativo do recurso de saudação.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-183">hello value of hello **_self** property of a resource represents hello relative URI of hello resource.</span></span> <span data-ttu-id="2bb7b-184">Hello formato de saudação URI consiste Olá /\<feed\>/ segmentos de caminho de { RID}:</span><span class="sxs-lookup"><span data-stu-id="2bb7b-184">hello format of hello URI consists of hello /\<feed\>/{_rid} path segments:</span></span>  

| <span data-ttu-id="2bb7b-185">Valor de Olá Self</span><span class="sxs-lookup"><span data-stu-id="2bb7b-185">Value of hello _self</span></span> | <span data-ttu-id="2bb7b-186">Descrição</span><span class="sxs-lookup"><span data-stu-id="2bb7b-186">Description</span></span> |
| --- | --- |
| <span data-ttu-id="2bb7b-187">/dbs</span><span class="sxs-lookup"><span data-stu-id="2bb7b-187">/dbs</span></span> |<span data-ttu-id="2bb7b-188">Feed de bancos de dados em uma conta de banco de dados</span><span class="sxs-lookup"><span data-stu-id="2bb7b-188">Feed of databases under a database account</span></span> |
| <span data-ttu-id="2bb7b-189">/dbs/{dbName}</span><span class="sxs-lookup"><span data-stu-id="2bb7b-189">/dbs/{dbName}</span></span> |<span data-ttu-id="2bb7b-190">Banco de dados com uma id de correspondência do valor Olá {dbName}</span><span class="sxs-lookup"><span data-stu-id="2bb7b-190">Database with an id matching hello value {dbName}</span></span> |
| <span data-ttu-id="2bb7b-191">/dbs/{dbName}/colls/</span><span class="sxs-lookup"><span data-stu-id="2bb7b-191">/dbs/{dbName}/colls/</span></span> |<span data-ttu-id="2bb7b-192">Feed de coleções em um banco de dados</span><span class="sxs-lookup"><span data-stu-id="2bb7b-192">Feed of collections under a database</span></span> |
| <span data-ttu-id="2bb7b-193">/dbs/{dbName}/colls/{collName}</span><span class="sxs-lookup"><span data-stu-id="2bb7b-193">/dbs/{dbName}/colls/{collName}</span></span> |<span data-ttu-id="2bb7b-194">Coleção com uma id de correspondência do valor Olá {collName}</span><span class="sxs-lookup"><span data-stu-id="2bb7b-194">Collection with an id matching hello value {collName}</span></span> |
| <span data-ttu-id="2bb7b-195">/dbs/{dbName}/colls/{collName}/docs</span><span class="sxs-lookup"><span data-stu-id="2bb7b-195">/dbs/{dbName}/colls/{collName}/docs</span></span> |<span data-ttu-id="2bb7b-196">Feed de documentos em uma coleção</span><span class="sxs-lookup"><span data-stu-id="2bb7b-196">Feed of documents under a collection</span></span> |
| <span data-ttu-id="2bb7b-197">/dbs/{dbName}/colls/{collName}/docs/{docId}</span><span class="sxs-lookup"><span data-stu-id="2bb7b-197">/dbs/{dbName}/colls/{collName}/docs/{docId}</span></span> |<span data-ttu-id="2bb7b-198">Um documento com uma id de correspondência do valor Olá {doc}</span><span class="sxs-lookup"><span data-stu-id="2bb7b-198">Document with an id matching hello value {doc}</span></span> |
| <span data-ttu-id="2bb7b-199">/dbs/{dbName}/users/</span><span class="sxs-lookup"><span data-stu-id="2bb7b-199">/dbs/{dbName}/users/</span></span> |<span data-ttu-id="2bb7b-200">Feed de usuários em um banco de dados</span><span class="sxs-lookup"><span data-stu-id="2bb7b-200">Feed of users under a database</span></span> |
| <span data-ttu-id="2bb7b-201">/dbs/{dbName}/users/{userId}</span><span class="sxs-lookup"><span data-stu-id="2bb7b-201">/dbs/{dbName}/users/{userId}</span></span> |<span data-ttu-id="2bb7b-202">Usuário com uma id de correspondência do valor Olá {user}</span><span class="sxs-lookup"><span data-stu-id="2bb7b-202">User with an id matching hello value {user}</span></span> |
| <span data-ttu-id="2bb7b-203">/dbs/{dbName}/users/{userId}/permissions</span><span class="sxs-lookup"><span data-stu-id="2bb7b-203">/dbs/{dbName}/users/{userId}/permissions</span></span> |<span data-ttu-id="2bb7b-204">Feed de permissões em um usuário</span><span class="sxs-lookup"><span data-stu-id="2bb7b-204">Feed of permissions under a user</span></span> |
| <span data-ttu-id="2bb7b-205">/dbs/{dbName}/users/{userId}/permissions/{permissionId}</span><span class="sxs-lookup"><span data-stu-id="2bb7b-205">/dbs/{dbName}/users/{userId}/permissions/{permissionId}</span></span> |<span data-ttu-id="2bb7b-206">Permissão com uma id de correspondência do valor Olá {permissão}</span><span class="sxs-lookup"><span data-stu-id="2bb7b-206">Permission with an id matching hello value {permission}</span></span> |

<span data-ttu-id="2bb7b-207">Cada recurso tem um nome de usuário exclusivo definido exposto por meio da propriedade de id de saudação.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-207">Each resource has a unique user defined name exposed via hello id property.</span></span> <span data-ttu-id="2bb7b-208">Observação: para documentos, se o usuário Olá não especificar uma id nossos SDKs com suporte gerará automaticamente uma id exclusiva para o documento de saudação.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-208">Note: for documents, if hello user does not specify an id, our supported SDKs will automatically generate a unique id for hello document.</span></span> <span data-ttu-id="2bb7b-209">id de saudação é uma cadeia de caracteres definida pelo usuário, de caracteres too256 que é exclusiva no contexto de saudação de um recurso específico do pai.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-209">hello id is a user defined string, of up too256 characters that is unique within hello context of a specific parent resource.</span></span> 

<span data-ttu-id="2bb7b-210">Cada recurso também tem um identificador de recurso hierárquica de gerada pelo sistema (também chamado tooas uma RID), que está disponível por meio da propriedade Olá RID.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-210">Each resource also has a system generated hierarchical resource identifier (also referred tooas an RID), which is available via hello _rid property.</span></span> <span data-ttu-id="2bb7b-211">Olá RID codifica toda a hierarquia de um determinado recurso hello e é que uma representação interna conveniente usado tooenforce a integridade referencial de maneira distribuída.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-211">hello RID encodes hello entire hierarchy of a given resource and it is a convenient internal representation used tooenforce referential integrity in a distributed manner.</span></span> <span data-ttu-id="2bb7b-212">Olá RID é exclusivo dentro de uma conta de banco de dados e ele é usado internamente pelo banco de dados do Cosmos para roteamento eficiente, sem a necessidade de pesquisas de partição cruzada.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-212">hello RID is unique within a database account and it is internally used by Cosmos DB for efficient routing without requiring cross partition lookups.</span></span> <span data-ttu-id="2bb7b-213">Olá valores Olá Self e propriedades de RID Olá são representações alternativas e canônicas de um recurso.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-213">hello values of hello _self and hello  _rid properties are both alternate and canonical representations of a resource.</span></span> 

<span data-ttu-id="2bb7b-214">suporte a APIs REST Olá endereçamento de recursos e roteamento de solicitações por id de saudação e propriedades de RID hello.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-214">hello REST APIs support addressing of resources and routing of requests by both hello id and hello _rid properties.</span></span>

## <a name="database-accounts"></a><span data-ttu-id="2bb7b-215">Contas de banco de dados</span><span class="sxs-lookup"><span data-stu-id="2bb7b-215">Database accounts</span></span>
<span data-ttu-id="2bb7b-216">É possível provisionar uma ou mais contas de bancos de dados do Cosmos DB usando sua assinatura do Azure.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-216">You can provision one or more Cosmos DB database accounts using your Azure subscription.</span></span>

<span data-ttu-id="2bb7b-217">Você pode criar e gerenciar contas de banco de dados do banco de dados do Cosmos via Olá Portal do Azure em [http://portal.azure.com/](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="2bb7b-217">You can create and manage Cosmos DB database accounts via hello Azure Portal at [http://portal.azure.com/](https://portal.azure.com/).</span></span> <span data-ttu-id="2bb7b-218">Criar e gerenciar uma conta do banco de dados requer acesso administrativo e pode ser feito somente com sua assinatura do Azure.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-218">Creating and managing a database account requires administrative access and can only be performed under your Azure subscription.</span></span> 

### <a name="database-account-properties"></a><span data-ttu-id="2bb7b-219">Propriedades de contas de banco de dados</span><span class="sxs-lookup"><span data-stu-id="2bb7b-219">Database account properties</span></span>
<span data-ttu-id="2bb7b-220">Como parte do provisionamento e gerenciamento de uma conta de banco de dados, você pode configurar e ler Olá propriedades a seguir:</span><span class="sxs-lookup"><span data-stu-id="2bb7b-220">As part of provisioning and managing a database account you can configure and read hello following properties:</span></span>  

<table border="0" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td valign="top"><p><span data-ttu-id="2bb7b-221"><strong>Nome da Propriedade</strong></span><span class="sxs-lookup"><span data-stu-id="2bb7b-221"><strong>Property Name</strong></span></span></p></td>
            <td valign="top"><p><span data-ttu-id="2bb7b-222"><strong>Descrição</strong></span><span class="sxs-lookup"><span data-stu-id="2bb7b-222"><strong>Description</strong></span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="2bb7b-223">Política de Consistência</span><span class="sxs-lookup"><span data-stu-id="2bb7b-223">Consistency Policy</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="2bb7b-224">Defina esse nível de consistência propriedade tooconfigure saudação padrão para todas as coleções de saudação em sua conta do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-224">Set this property tooconfigure hello default consistency level for all hello collections under your database account.</span></span> <span data-ttu-id="2bb7b-225">Você pode substituir o nível de consistência de saudação em uma base por solicitação usando o cabeçalho de solicitação Olá [x-ms-consistency-level].</span><span class="sxs-lookup"><span data-stu-id="2bb7b-225">You can override hello consistency level on a per request basis using hello [x-ms-consistency-level] request header.</span></span> <p><p><span data-ttu-id="2bb7b-226">Observe que essa propriedade só se aplica a toohello <i>recursos definidos pelo usuário</i>.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-226">Note that this property only applies toohello <i>user defined resources</i>.</span></span> <span data-ttu-id="2bb7b-227">Todos os recursos definidos pelo sistema são toosupport configurado leituras/consultas com forte consistência.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-227">All system defined resources are configured toosupport reads/queries with strong consistency.</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="2bb7b-228">Chaves de autorização</span><span class="sxs-lookup"><span data-stu-id="2bb7b-228">Authorization Keys</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="2bb7b-229">Essas são Olá primário e secundárias chaves mestre e somente leitura que fornecem administrativas acessar tooall de recursos de saudação na conta de banco de dados de saudação.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-229">These are hello primary and secondary master and readonly keys that provide administrative access tooall of hello resources under hello database account.</span></span></p></td>
        </tr>
    </tbody>
</table>

<span data-ttu-id="2bb7b-230">Observe que na adição tooprovisioning, configurar e gerenciar sua conta do banco de dados de saudação Portal do Azure, você pode também programaticamente criar e gerenciar contas de banco de dados do banco de dados do Cosmos usando Olá [APIs REST do Azure Cosmos DB](/rest/api/documentdb/) como Assim como [cliente SDKs](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="2bb7b-230">Note that in addition tooprovisioning, configuring and managing your database account from hello Azure Portal, you can also programmatically create and manage Cosmos DB database accounts by using hello [Azure Cosmos DB REST APIs](/rest/api/documentdb/) as well as [client SDKs](documentdb-sdk-dotnet.md).</span></span>  

## <a name="databases"></a><span data-ttu-id="2bb7b-231">Bancos de dados</span><span class="sxs-lookup"><span data-stu-id="2bb7b-231">Databases</span></span>
<span data-ttu-id="2bb7b-232">Um banco de dados do banco de dados do Cosmos é um contêiner lógico de uma ou mais coleções e usuários, conforme mostrado no diagrama a seguir de saudação.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-232">A Cosmos DB database is a logical container of one or more collections and users, as shown in hello following diagram.</span></span> <span data-ttu-id="2bb7b-233">Você pode criar qualquer número de bancos de dados em um toooffer de entidade de conta de banco de dados Cosmos DB limites.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-233">You can create any number of databases under a Cosmos DB database account subject toooffer limits.</span></span>  

<span data-ttu-id="2bb7b-234">![Modelo hierárquico de coleções e conta de banco de dados][2]</span><span class="sxs-lookup"><span data-stu-id="2bb7b-234">![Database account and collections hierarchical model][2]</span></span>  
<span data-ttu-id="2bb7b-235">**Um banco de dados é um contêiner lógico de usuários e coleções**</span><span class="sxs-lookup"><span data-stu-id="2bb7b-235">**A Database is a logical container of users and collections**</span></span>

<span data-ttu-id="2bb7b-236">Um banco de dados pode conter armazenamento de documentos praticamente ilimitado dividido nas coleções.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-236">A database can contain virtually unlimited document storage partitioned within collections.</span></span>

### <a name="elastic-scale-of-a-cosmos-db-database"></a><span data-ttu-id="2bb7b-237">Escala elástica de um banco de dados do Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="2bb7b-237">Elastic scale of a Cosmos DB database</span></span>
<span data-ttu-id="2bb7b-238">Um banco de dados do banco de dados do Cosmos é Elástico por padrão – desde alguns toopetabytes GB de armazenamento de documentos SSD feito e taxa de transferência fornecida.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-238">A Cosmos DB database is elastic by default – ranging from a few GB toopetabytes of SSD backed document storage and provisioned throughput.</span></span> 

<span data-ttu-id="2bb7b-239">Ao contrário de um banco de dados RDBMS tradicional, um banco de dados no banco de dados do Cosmos não é tooa escopo único computador.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-239">Unlike a database in traditional RDBMS, a database in Cosmos DB is not scoped tooa single machine.</span></span> <span data-ttu-id="2bb7b-240">Com o banco de dados do Cosmos, conforme a escala do aplicativo precisa toogrow, você pode criar mais coleções, bancos de dados ou ambos.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-240">With Cosmos DB, as your application’s scale needs toogrow, you can create more collections, databases, or both.</span></span> <span data-ttu-id="2bb7b-241">Na verdade, vários aplicativos internos da Microsoft utilizam o Cosmos DB na escala do cliente criando bancos de dados do Cosmos DB extremamente grandes, cada um contendo milhares de coleções com terabytes de armazenamento de documentos.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-241">Indeed, various first party applications within Microsoft have been using Cosmos DB at a consumer scale by creating extremely large Cosmos DB databases each containing thousands of collections with terabytes of document storage.</span></span> <span data-ttu-id="2bb7b-242">Você pode aumentar ou reduzir um banco de dados, adicionando ou removendo coleções toomeet requisitos de escala do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-242">You can grow or shrink a database by adding or removing collections toomeet your application’s scale requirements.</span></span> 

<span data-ttu-id="2bb7b-243">Você pode criar qualquer número de coleções em uma oferta de toohello de entidade de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-243">You can create any number of collections within a database subject toohello offer.</span></span> <span data-ttu-id="2bb7b-244">Cada coleção tem armazenamento SSD feito e taxa de transferência provisionado para você dependendo do nível de desempenho selecionados hello.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-244">Each collection has SSD backed storage and throughput provisioned for you depending on hello selected performance tier.</span></span>

<span data-ttu-id="2bb7b-245">Um banco de dados do Cosmos DB também é um contêiner de usuários.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-245">A Cosmos DB database is also a container of users.</span></span> <span data-ttu-id="2bb7b-246">Um usuário, por sua vez, é um namespace lógico para um conjunto de permissões que fornece toocollections refinada de autorização e acesso, documentos e anexos.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-246">A user, in-turn, is a logical namespace for a set of permissions that provides fine-grained authorization and access toocollections, documents and attachments.</span></span>  

<span data-ttu-id="2bb7b-247">Como com outros recursos no modelo de recurso de banco de dados do Cosmos hello, bancos de dados podem ser criados, substituídos, excluídos, ler ou enumeradas facilmente usando o hello [APIs REST](/rest/api/documentdb/) ou qualquer Olá [cliente SDKs](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="2bb7b-247">As with other resources in hello Cosmos DB resource model, databases can be created, replaced, deleted, read or enumerated easily using either hello [REST APIs](/rest/api/documentdb/) or any of hello [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="2bb7b-248">Cosmos DB garante a consistência forte para a leitura ou consultar metadados de saudação de um recurso de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-248">Cosmos DB guarantees strong consistency for reading or querying hello metadata of a database resource.</span></span> <span data-ttu-id="2bb7b-249">A exclusão de um banco de dados automaticamente garante que você não pode acessar qualquer uma das coleções de saudação ou usuários contidos nele.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-249">Deleting a database automatically ensures that you cannot access any of hello collections or users contained within it.</span></span>   

## <a name="collections"></a><span data-ttu-id="2bb7b-250">Coleções</span><span class="sxs-lookup"><span data-stu-id="2bb7b-250">Collections</span></span>
<span data-ttu-id="2bb7b-251">Uma coleção do Cosmos DB é um contêiner de seus documentos JSON.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-251">A Cosmos DB collection is a container for your JSON documents.</span></span> 

### <a name="elastic-ssd-backed-document-storage"></a><span data-ttu-id="2bb7b-252">Armazenamento de documentos com suporte de SSD elástico</span><span class="sxs-lookup"><span data-stu-id="2bb7b-252">Elastic SSD backed document storage</span></span>
<span data-ttu-id="2bb7b-253">Uma coleção é intrinsicamente elástica; ela cresce e é reduzida automaticamente conforme você adiciona ou remove documentos.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-253">A collection is intrinsically elastic - it automatically grows and shrinks as you add or remove documents.</span></span> <span data-ttu-id="2bb7b-254">Coleções são recursos lógicos e podem abranger um ou mais servidores ou partições físicas.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-254">Collections are logical resources and can span one or more physical partitions or servers.</span></span> <span data-ttu-id="2bb7b-255">número de Olá de partições em uma coleção é determinado pelo banco de dados do Cosmos com base no tamanho do armazenamento hello e taxa de transferência fornecida da sua coleção hello.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-255">hello number of partitions within a collection is determined by Cosmos DB based on hello storage size and hello provisioned throughput of your collection.</span></span> <span data-ttu-id="2bb7b-256">Cada partição no DB Cosmos tem uma quantidade fixa de armazenamento com suporte de SSD associado a ela e é replicada para alta disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-256">Every partition in Cosmos DB has a fixed amount of SSD-backed storage associated with it, and is replicated for high availability.</span></span> <span data-ttu-id="2bb7b-257">Gerenciamento de partição é totalmente gerenciado pelo banco de dados do Azure Cosmos, e você não tem código complexo toowrite ou gerenciar as partições.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-257">Partition management is fully managed by Azure Cosmos DB, and you do not have toowrite complex code or manage your partitions.</span></span> <span data-ttu-id="2bb7b-258">As coleções do Cosmos DB são **praticamente ilimitadas** em termos de armazenamento e produtividade.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-258">Cosmos DB collections are **practically unlimited** in terms of storage and throughput.</span></span> 

### <a name="automatic-indexing-of-collections"></a><span data-ttu-id="2bb7b-259">Indexação automática de coleções</span><span class="sxs-lookup"><span data-stu-id="2bb7b-259">Automatic indexing of collections</span></span>
<span data-ttu-id="2bb7b-260">O Cosmos DB é um verdadeiro sistema de banco de dados sem esquemas.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-260">Cosmos DB is a true schema-free database system.</span></span> <span data-ttu-id="2bb7b-261">Não suponha ou exigir qualquer esquema para documentos JSON hello.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-261">It does not assume or require any schema for hello JSON documents.</span></span> <span data-ttu-id="2bb7b-262">Conforme você adiciona a coleção de tooa de documentos, banco de dados do Cosmos os índices automaticamente e estão disponíveis para você tooquery.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-262">As you add documents tooa collection, Cosmos DB automatically indexes them and they are available for you tooquery.</span></span> <span data-ttu-id="2bb7b-263">A indexação automática de documentos sem a necessidade de esquemas ou de índices secundários é uma das principais funcionalidades do Cosmos DB e é habilitada por técnicas de manutenção de índice otimizada para gravação, livre de bloqueios e estruturada para log.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-263">Automatic indexing of documents without requiring schema or secondary indexes is a key capability of Cosmos DB and is enabled by write-optimized, lock-free and log-structured index maintenance techniques.</span></span> <span data-ttu-id="2bb7b-264">O Cosmos DB dá suporte a um volume sustentado de gravações extremamente rápidas, ao mesmo tempo que oferece consultas consistentes.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-264">Cosmos DB supports sustained volume of extremely fast writes while still serving consistent queries.</span></span> <span data-ttu-id="2bb7b-265">Armazenamento de documento e de índice são usado toocalculate Olá armazenamento consumido por cada coleção.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-265">Both document and index storage are used toocalculate hello storage consumed by each collection.</span></span> <span data-ttu-id="2bb7b-266">Você pode controlar Olá armazenamento e desempenho compensações associadas indexação Configurando a política de indexação Olá para uma coleção.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-266">You can control hello storage and performance trade-offs associated with indexing by configuring hello indexing policy for a collection.</span></span> 

### <a name="configuring-hello-indexing-policy-of-a-collection"></a><span data-ttu-id="2bb7b-267">Configurando a política de indexação de saudação de uma coleção</span><span class="sxs-lookup"><span data-stu-id="2bb7b-267">Configuring hello indexing policy of a collection</span></span>
<span data-ttu-id="2bb7b-268">Olá, política de cada coleção de indexação permite que você toomake desempenho e armazenamento associadas com a indexação de vantagens e desvantagens.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-268">hello indexing policy of each collection allows you toomake performance and storage trade-offs associated with indexing.</span></span> <span data-ttu-id="2bb7b-269">Olá opções a seguir estão disponível tooyou como parte da configuração de indexação:</span><span class="sxs-lookup"><span data-stu-id="2bb7b-269">hello following options are available tooyou as part of indexing configuration:</span></span>  

* <span data-ttu-id="2bb7b-270">Escolha se a coleção de saudação indexa automaticamente todos os documentos de saudação ou não.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-270">Choose whether hello collection automatically indexes all of hello documents or not.</span></span> <span data-ttu-id="2bb7b-271">Por padrão, todos os documentos são indexados automaticamente.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-271">By default, all documents are automatically indexed.</span></span> <span data-ttu-id="2bb7b-272">Você pode escolher tooturn desativar a indexação automática e adicionar seletivamente apenas o índice de toohello documentos específicos.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-272">You can choose tooturn off automatic indexing and selectively add only specific documents toohello index.</span></span> <span data-ttu-id="2bb7b-273">Por outro lado, você pode seletivamente escolher tooexclude somente documentos específicos.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-273">Conversely, you can selectively choose tooexclude only specific documents.</span></span> <span data-ttu-id="2bb7b-274">Você pode obter isso definindo Olá automática de propriedade toobe true ou false no indexingPolicy saudação de uma coleção e usando o cabeçalho de solicitação Olá [x-ms-indexingdirective] durante a inserção, substituição ou exclusão de um documento.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-274">You can achieve this by setting hello automatic property toobe true or false on hello indexingPolicy of a collection and using hello [x-ms-indexingdirective] request header while inserting, replacing or deleting a document.</span></span>  
* <span data-ttu-id="2bb7b-275">Escolha se tooinclude ou excluir caminhos específicos ou padrões nos seus documentos de Olá índice.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-275">Choose whether tooinclude or exclude specific paths or patterns in your documents from hello index.</span></span> <span data-ttu-id="2bb7b-276">Você pode obter isso por configuração includedPaths e excludedPaths no indexingPolicy de saudação de uma coleção respectivamente.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-276">You can achieve this by setting includedPaths and excludedPaths on hello indexingPolicy of a collection respectively.</span></span> <span data-ttu-id="2bb7b-277">Você também pode configurar Olá armazenamento e desempenho as compensações de intervalo e hash de consultas de padrões de caminho específico.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-277">You can also configure hello storage and performance trade-offs for range and hash queries for specific path patterns.</span></span> 
* <span data-ttu-id="2bb7b-278">Escolha entre atualizações de índice síncronas (consistentes) e assíncronas (lentas).</span><span class="sxs-lookup"><span data-stu-id="2bb7b-278">Choose between synchronous (consistent) and asynchronous (lazy) index updates.</span></span> <span data-ttu-id="2bb7b-279">Por padrão, o índice de saudação é atualizado de forma síncrona em cada inserção, substituição ou exclusão de uma coleção de toohello do documento.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-279">By default, hello index is updated synchronously on each insert, replace or delete of a document toohello collection.</span></span> <span data-ttu-id="2bb7b-280">Isso permite consultas Olá toohonor Olá mesmo nível de consistência de leituras de documento hello.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-280">This enables hello queries toohonor hello same consistency level as that of hello document reads.</span></span> <span data-ttu-id="2bb7b-281">Enquanto Cosmos DB é otimizada de gravação e oferece suporte a volumes prolongados de gravações de documento junto com a manutenção do índice síncrona e fazer consultas consistentes, você pode configurar determinada coleções tooupdate seu índice lentamente.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-281">While Cosmos DB is write optimized and supports sustained volumes of document writes along with synchronous index maintenance and serving consistent queries, you can configure certain collections tooupdate their index lazily.</span></span> <span data-ttu-id="2bb7b-282">A indexação lenta aumenta o desempenho de gravação de saudação adicional e é ideal para cenários de ingestão em massa para coleções de leitura intensa principalmente.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-282">Lazy indexing boosts hello write performance further and is ideal for bulk ingestion scenarios for primarily read-heavy collections.</span></span>

<span data-ttu-id="2bb7b-283">Olá, política de indexação pode ser alterado por executar um PUT na coleção de saudação.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-283">hello indexing policy can be changed by executing a PUT on hello collection.</span></span> <span data-ttu-id="2bb7b-284">Isso pode ser obtido por meio de saudação [SDK de cliente](documentdb-sdk-dotnet.md), Olá [Portal do Azure](https://portal.azure.com) ou hello [APIs REST](/rest/api/documentdb/).</span><span class="sxs-lookup"><span data-stu-id="2bb7b-284">This can be achieved either through hello [client SDK](documentdb-sdk-dotnet.md), hello [Azure Portal](https://portal.azure.com) or hello [REST APIs](/rest/api/documentdb/).</span></span>

### <a name="querying-a-collection"></a><span data-ttu-id="2bb7b-285">Consultando uma coleção</span><span class="sxs-lookup"><span data-stu-id="2bb7b-285">Querying a collection</span></span>
<span data-ttu-id="2bb7b-286">documentos de saudação dentro de uma coleção podem ter esquemas arbitrárias e você pode consultar documentos dentro de uma coleção sem fornecer qualquer esquema ou os índices secundários antecipadamente.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-286">hello documents within a collection can have arbitrary schemas and you can query documents within a collection without providing any schema or secondary indices upfront.</span></span> <span data-ttu-id="2bb7b-287">Você pode consultar a coleção de saudação usando Olá [API DocumentDB do Azure Cosmos DB: referência de sintaxe SQL](https://msdn.microsoft.com/library/azure/dn782250.aspx), que fornece operadores espaciais hierárquicas e relacionais avançados e extensibilidade via UDFs baseados em JavaScript.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-287">You can query hello collection using hello [Azure Cosmos DB DocumentDB API: SQL syntax reference](https://msdn.microsoft.com/library/azure/dn782250.aspx), which provides rich hierarchical, relational, and spatial operators and extensibility via JavaScript-based UDFs.</span></span> <span data-ttu-id="2bb7b-288">Gramática JSON permite que documentos JSON como árvores com rótulos como nós de árvore de saudação de modelagem.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-288">JSON grammar allows for modeling JSON documents as trees with labels as hello tree nodes.</span></span> <span data-ttu-id="2bb7b-289">Isso é explorado pelas técnicas de indexação automática da API do DocumentDB, bem como pelo dialeto SQL da API do DocumentDB.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-289">This is exploited both by DocumentDB API’s automatic indexing techniques as well as DocumentDB API's SQL dialect.</span></span> <span data-ttu-id="2bb7b-290">Olá linguagem de consulta DocumetDB API consiste em três aspectos principais:</span><span class="sxs-lookup"><span data-stu-id="2bb7b-290">hello DocumetDB API query language consists of three main aspects:</span></span>   

1. <span data-ttu-id="2bb7b-291">Um pequeno conjunto de operações de consulta que mapeiam naturalmente a estrutura de árvore toohello incluindo projeções e consultas hierárquicas.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-291">A small set of query operations that map naturally toohello tree structure including hierarchical queries and projections.</span></span> 
2. <span data-ttu-id="2bb7b-292">Um subconjunto de operações relacionais, incluindo composição, filtragem, projeções, agregados e junções automáticas.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-292">A subset of relational operations including composition, filter, projections, aggregates and self joins.</span></span> 
3. <span data-ttu-id="2bb7b-293">UDFs puras baseadas em JavaScript que funcionam com (1) e (2).</span><span class="sxs-lookup"><span data-stu-id="2bb7b-293">Pure JavaScript based UDFs that work with (1) and (2).</span></span>  

<span data-ttu-id="2bb7b-294">modelo de consulta de banco de dados do Cosmos Olá tentativas toostrike um equilíbrio entre a funcionalidade de simplicidade e eficiência.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-294">hello Cosmos DB query model attempts toostrike a balance between functionality, efficiency and simplicity.</span></span> <span data-ttu-id="2bb7b-295">mecanismo de banco de dados do banco de dados do Cosmos Olá compila e executa instruções de consulta SQL Olá nativamente.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-295">hello Cosmos DB database engine natively compiles and executes hello SQL query statements.</span></span> <span data-ttu-id="2bb7b-296">Você pode consultar uma coleção usando Olá [APIs REST](/rest/api/documentdb/) ou qualquer Olá [cliente SDKs](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="2bb7b-296">You can query a collection using hello [REST APIs](/rest/api/documentdb/) or any of hello [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="2bb7b-297">Olá .NET SDK vem com um provedor LINQ.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-297">hello .NET SDK comes with a LINQ provider.</span></span>

> [!TIP]
> <span data-ttu-id="2bb7b-298">Você pode experimentar Olá API DocumentDB e executar consultas SQL em nosso conjunto de dados no hello [parque de consulta](https://www.documentdb.com/sql/demo).</span><span class="sxs-lookup"><span data-stu-id="2bb7b-298">You can try out hello DocumentDB API and run SQL queries against our dataset in hello [Query Playground](https://www.documentdb.com/sql/demo).</span></span>
> 
> 

## <a name="multi-document-transactions"></a><span data-ttu-id="2bb7b-299">Transações entre vários documentos</span><span class="sxs-lookup"><span data-stu-id="2bb7b-299">Multi-document transactions</span></span>
<span data-ttu-id="2bb7b-300">Transações de banco de dados fornecem um modelo de programação previsível e seguro para lidar com as alterações simultâneas toohello dados.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-300">Database transactions provide a safe and predictable programming model for dealing with concurrent changes toohello data.</span></span> <span data-ttu-id="2bb7b-301">Em RDBMS, lógica de negócios de toowrite de maneira tradicional de saudação é toowrite **procedimentos armazenados** e/ou **gatilhos** e enviar toohello servidor de banco de dados para execução transacional.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-301">In RDBMS, hello traditional way toowrite business logic is toowrite **stored-procedures** and/or **triggers** and ship it toohello database server for transactional execution.</span></span> <span data-ttu-id="2bb7b-302">Em RDBMS, Programador de aplicativo hello é necessário toodeal com duas linguagens de programação diferentes:</span><span class="sxs-lookup"><span data-stu-id="2bb7b-302">In RDBMS, hello application programmer is required toodeal with two disparate programming languages:</span></span> 

* <span data-ttu-id="2bb7b-303">saudação (não-transacional) aplicativo linguagem de programação (por exemplo, JavaScript, Python, c#, Java, etc.)</span><span class="sxs-lookup"><span data-stu-id="2bb7b-303">hello (non-transactional) application programming language (e.g. JavaScript, Python, C#, Java, etc.)</span></span>
* <span data-ttu-id="2bb7b-304">T-SQL, Olá transacional linguagem de programação que é executada nativamente pelo banco de dados de saudação</span><span class="sxs-lookup"><span data-stu-id="2bb7b-304">T-SQL, hello transactional programming language which is natively executed by hello database</span></span>

<span data-ttu-id="2bb7b-305">Em virtude do seu compromisso profundo tooJavaScript e JSON diretamente no mecanismo de banco de dados hello, Cosmos DB fornece um modelo de programação intuitivo para JavaScript em execução com base em lógica do aplicativo diretamente em coleções de saudação em termos de procedimentos armazenados e gatilhos.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-305">By virtue of its deep commitment tooJavaScript and JSON directly within hello database engine, Cosmos DB provides an intuitive programming model for executing JavaScript based application logic directly on hello collections in terms of stored procedures and triggers.</span></span> <span data-ttu-id="2bb7b-306">Isso permite que tanto a seguir Olá para:</span><span class="sxs-lookup"><span data-stu-id="2bb7b-306">This allows for both of hello following:</span></span>

* <span data-ttu-id="2bb7b-307">Controlar a implementação eficiente de simultaneidade, recuperação, automática de indexação de gráficos de objeto JSON Olá diretamente no mecanismo de banco de dados de saudação</span><span class="sxs-lookup"><span data-stu-id="2bb7b-307">Efficient implementation of concurrency control, recovery, automatic indexing of hello JSON object graphs directly in hello database engine</span></span>
* <span data-ttu-id="2bb7b-308">Naturalmente expressar o fluxo de controle, a variável de escopo, a atribuição e integração de primitivos com transações de banco de dados diretamente em termos de linguagem de programação de JavaScript Olá de tratamento de exceção</span><span class="sxs-lookup"><span data-stu-id="2bb7b-308">Naturally expressing control flow, variable scoping, assignment and integration of exception handling primitives with database transactions directly in terms of hello JavaScript programming language</span></span>

<span data-ttu-id="2bb7b-309">lógica de JavaScript Olá registrada em um nível de coleção pode emitir, em seguida, operações de banco de dados em documentos de saudação do hello considerando a coleção.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-309">hello JavaScript logic registered at a collection level can then issue database operations on hello documents of hello given collection.</span></span> <span data-ttu-id="2bb7b-310">Banco de dados do cosmos implicitamente Olá encapsula JavaScript com base em procedimentos armazenados e disparadores em um ambiente transações ACID com isolamento de instantâneo em documentos dentro de uma coleção.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-310">Cosmos DB implicitly wraps hello JavaScript based stored procedures and triggers within an ambient ACID transactions with snapshot isolation across documents within a collection.</span></span> <span data-ttu-id="2bb7b-311">Durante o curso de saudação de sua execução, se Olá JavaScript lança uma exceção, em seguida, Olá toda transação foi anulada.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-311">During hello course of its execution, if hello JavaScript throws an exception, then hello entire transaction is aborted.</span></span> <span data-ttu-id="2bb7b-312">Olá modelo de programação resultante é muito simples mas poderosas.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-312">hello resulting programming model is a very simple yet powerful.</span></span> <span data-ttu-id="2bb7b-313">Os desenvolvedores de JavaScript obtêm um modelo de programação “durável”, ao mesmo tempo em que utilizam os construtores de linguagem e primitivas de biblioteca com os quais estão familiarizados.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-313">JavaScript developers get a “durable” programming model while still using their familiar language constructs and library primitives.</span></span>   

<span data-ttu-id="2bb7b-314">Olá capacidade tooexecute JavaScript diretamente no banco de dados de saudação mecanismo Olá mesmo espaço de endereço, como o pool de buffers Olá permite alto desempenho e a execução transacional das operações de banco de dados em relação a documentos de saudação de uma coleção.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-314">hello ability tooexecute JavaScript directly within hello database engine in hello same address space as hello buffer pool enables performant and transactional execution of database operations against hello documents of a collection.</span></span> <span data-ttu-id="2bb7b-315">Além disso, mecanismo de banco de dados do banco de dados do Cosmos torna toohello um compromisso profundo JSON e JavaScript elimina qualquer incompatibilidade de impedância entre sistemas de tipos de saudação do aplicativo e banco de dados de saudação.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-315">Furthermore, Cosmos DB database engine makes a deep commitment toohello JSON and JavaScript eliminates any impedance mismatch between hello type systems of application and hello database.</span></span>   

<span data-ttu-id="2bb7b-316">Depois de criar uma coleção, você pode registrar os procedimentos armazenados, gatilhos e UDFs com uma coleção usando Olá [APIs REST](/rest/api/documentdb/) ou qualquer Olá [cliente SDKs](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="2bb7b-316">After creating a collection, you can register stored procedures, triggers and UDFs with a collection using hello [REST APIs](/rest/api/documentdb/) or any of hello [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="2bb7b-317">Após o registro, você pode fazer referência a eles e executá-los.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-317">After registration, you can reference and execute them.</span></span> <span data-ttu-id="2bb7b-318">Considere seguinte Olá escrito inteiramente em JavaScript, abaixo do código Olá leva dois argumentos (nome do catálogo e o nome do autor) de procedimento armazenado e cria um novo documento, consultas para um documento e, em seguida, atualiza-– tudo dentro de uma transação ACID implícita.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-318">Consider hello following stored procedure written entirely in JavaScript, hello code below takes two arguments (book name and author name) and creates a new document, queries for a document and then updates it – all within an implicit ACID transaction.</span></span> <span data-ttu-id="2bb7b-319">A qualquer momento durante a execução de Olá, se for lançada uma exceção de JavaScript, Olá toda transação é anulada.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-319">At any point during hello execution, if a JavaScript exception is thrown, hello entire transaction aborts.</span></span>

    function businessLogic(name, author) {
        var context = getContext();
        var collectionManager = context.getCollection();        
        var collectionLink = collectionManager.getSelfLink()

        // create a new document.
        collectionManager.createDocument(collectionLink,
            {id: name, author: author},
            function(err, documentCreated) {
                if(err) throw new Error(err.message);

                // filter documents by author
                var filterQuery = "SELECT * from root r WHERE r.author = 'George R.'";
                collectionManager.queryDocuments(collectionLink,
                    filterQuery,
                    function(err, matchingDocuments) {
                        if(err) throw new Error(err.message);

                        context.getResponse().setBody(matchingDocuments.length);

                        // Replace hello author name for all documents that satisfied hello query.
                        for (var i = 0; i < matchingDocuments.length; i++) {
                            matchingDocuments[i].author = "George R. R. Martin";
                            // we don’t need tooexecute a callback because they are in parallel
                            collectionManager.replaceDocument(matchingDocuments[i]._self,
                                matchingDocuments[i]);   
                        }
                    })
            })
    };

<span data-ttu-id="2bb7b-320">cliente Olá pode "Enviar" hello acima de banco de dados de toohello lógica de JavaScript para execução transacional por meio de HTTP POST.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-320">hello client can “ship” hello above JavaScript logic toohello database for transactional execution via HTTP POST.</span></span> <span data-ttu-id="2bb7b-321">Para obter mais informações sobre como usar métodos HTTP, consulte [Interações RESTful com recursos do Azure Cosmos DB](https://msdn.microsoft.com/library/azure/mt622086.aspx).</span><span class="sxs-lookup"><span data-stu-id="2bb7b-321">For more information about using HTTP methods, see [RESTful interactions with Azure Cosmos DB resources](https://msdn.microsoft.com/library/azure/mt622086.aspx).</span></span> 

    client.createStoredProcedureAsync(collection._self, {id: "CRUDProc", body: businessLogic})
       .then(function(createdStoredProcedure) {
            return client.executeStoredProcedureAsync(createdStoredProcedure.resource._self,
                "NoSQL Distilled",
                "Martin Fowler");
        })
        .then(function(result) {
            console.log(result);
        },
        function(error) {
            console.log(error);
        });


<span data-ttu-id="2bb7b-322">Observe que porque o banco de dados de saudação nativamente compreende JSON e JavaScript, não há nenhuma incompatibilidade de sistema de tipo, "Mapeamento de OR" ou mágico de geração de código necessária.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-322">Notice that because hello database natively understands JSON and JavaScript, there is no type system mismatch, no “OR mapping” or code generation magic required.</span></span>   

<span data-ttu-id="2bb7b-323">Procedimentos armazenados e gatilhos interagem com os documentos em uma coleção por meio de um modelo de objeto bem definidos, que expõe o contexto atual de coleção Olá coleta e hello.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-323">Stored procedures and triggers interact with a collection and hello documents in a collection through a well-defined object model, which exposes hello current collection context.</span></span>  

<span data-ttu-id="2bb7b-324">Coleções no hello API DocumentDB podem ser criado, excluídos, leitura ou enumeradas facilmente usando o hello [APIs REST](/rest/api/documentdb/) ou qualquer Olá [cliente SDKs](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="2bb7b-324">Collections in hello DocumentDB API can be created, deleted, read or enumerated easily using either hello [REST APIs](/rest/api/documentdb/) or any of hello [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="2bb7b-325">Olá API DocumentDB sempre fornece consistência forte para a leitura ou consultar metadados de saudação de uma coleção.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-325">hello DocumentDB API always provides strong consistency for reading or querying hello metadata of a collection.</span></span> <span data-ttu-id="2bb7b-326">A exclusão de uma coleção automaticamente garante que você não pode acessar qualquer um dos documentos hello, anexos, procedimentos armazenados, gatilhos e UDFs contém nele.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-326">Deleting a collection automatically ensures that you cannot access any of hello documents, attachments, stored procedures, triggers, and UDFs contained within it.</span></span>   

## <a name="stored-procedures-triggers-and-user-defined-functions-udf"></a><span data-ttu-id="2bb7b-327">Procedimentos armazenados, gatilhos e UDF (Funções Definidas pelo Usuário)</span><span class="sxs-lookup"><span data-stu-id="2bb7b-327">Stored procedures, triggers and User Defined Functions (UDF)</span></span>
<span data-ttu-id="2bb7b-328">Conforme descrito na seção anterior hello, você pode escrever toorun de lógica de aplicativo diretamente em uma transação dentro do mecanismo de banco de dados de saudação.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-328">As described in hello previous section, you can write application logic toorun directly within a transaction inside of hello database engine.</span></span> <span data-ttu-id="2bb7b-329">a lógica do aplicativo Hello pode ser escrita inteiramente em JavaScript e pode ser modelada como um procedimento armazenado, gatilho ou uma UDF.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-329">hello application logic can be written entirely in JavaScript and can be modeled as a stored procedure, trigger or a UDF.</span></span> <span data-ttu-id="2bb7b-330">Olá código JavaScript em um procedimento armazenado ou um disparador pode inserir, substituir, excluir, documentos de leitura ou de consulta dentro de uma coleção.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-330">hello JavaScript code within a stored procedure or a trigger can insert, replace, delete, read or query documents within a collection.</span></span> <span data-ttu-id="2bb7b-331">Em Olá outro lado, Olá JavaScript dentro de um UDF não pode inserir, substituir ou excluir documentos.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-331">On hello other hand, hello JavaScript within a UDF cannot insert, replace, or delete documents.</span></span> <span data-ttu-id="2bb7b-332">UDFs enumerar documentos de saudação do conjunto de resultados da consulta e geram outro conjunto de resultados.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-332">UDFs enumerate hello documents of a query's result set and produce another result set.</span></span> <span data-ttu-id="2bb7b-333">Para multilocatários, o Cosmos DB impõe uma rígida governança de recursos baseada em reserva.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-333">For multi-tenancy, Cosmos DB enforces a strict reservation based resource governance.</span></span> <span data-ttu-id="2bb7b-334">Cada procedimento armazenado, gatilho ou uma UDF obtém um quantum fixo de toodo de recursos de sistema operacional seu trabalho.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-334">Each stored procedure, trigger or a UDF gets a fixed quantum of operating system resources toodo its work.</span></span> <span data-ttu-id="2bb7b-335">Além disso, procedimentos armazenados, gatilhos ou UDFs não é possível vincular com bibliotecas JavaScript externas e estão na lista negra se excederem os orçamentos de recurso de saudação alocados toothem.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-335">Furthermore, stored procedures, triggers or UDFs cannot link against external JavaScript libraries and are blacklisted if they exceed hello resource budgets allocated toothem.</span></span> <span data-ttu-id="2bb7b-336">Você pode registrar, cancelar o registro de procedimentos armazenados, gatilhos ou UDFs com uma coleção usando Olá APIs REST.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-336">You can register, unregister stored procedures, triggers or UDFs with a collection by using hello REST APIs.</span></span>  <span data-ttu-id="2bb7b-337">Após o registro, um procedimento armazenado, gatilho ou UDF é pré-compilado e armazenado como um código de byte que é executado posteriormente.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-337">Upon registration a stored procedure, trigger, or a UDF is pre-compiled and stored as byte code which gets executed later.</span></span> <span data-ttu-id="2bb7b-338">Olá seção a seguir ilustra como você pode usar Olá SDK de JavaScript do Cosmos DB tooregister, executar e cancelar o registro de um procedimento armazenado, gatilho e uma UDF.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-338">hello following section illustrate how you can use hello Cosmos DB JavaScript SDK tooregister, execute, and unregister a stored procedure, trigger, and a UDF.</span></span> <span data-ttu-id="2bb7b-339">Olá SDK de JavaScript é um wrapper simple sobre Olá [APIs REST](/rest/api/documentdb/).</span><span class="sxs-lookup"><span data-stu-id="2bb7b-339">hello JavaScript SDK is a simple wrapper over hello [REST APIs](/rest/api/documentdb/).</span></span> 

### <a name="registering-a-stored-procedure"></a><span data-ttu-id="2bb7b-340">Registrando um procedimento armazenado</span><span class="sxs-lookup"><span data-stu-id="2bb7b-340">Registering a stored procedure</span></span>
<span data-ttu-id="2bb7b-341">O registro de um procedimento armazenado cria um novo recurso de procedimento armazenado em uma coleção por meio do HTTP POST.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-341">Registration of a stored procedure creates a new stored procedure resource on a collection via HTTP POST.</span></span>  

    var storedProc = {
        id: "validateAndCreate",
        body: function (documentToCreate) {
            documentToCreate.id = documentToCreate.id.toUpperCase();

            var collectionManager = getContext().getCollection();
            collectionManager.createDocument(collectionManager.getSelfLink(),
                documentToCreate,
                function(err, documentCreated) {
                    if(err) throw new Error('Error while creating document: ' + err.message;
                    getContext().getResponse().setBody('success - created ' + 
                            documentCreated.name);
                });
        }
    };

    client.createStoredProcedureAsync(collection._self, storedProc)
        .then(function (createdStoredProcedure) {
            console.log("Successfully created stored procedure");
        }, function(error) {
            console.log("Error");
        });

### <a name="executing-a-stored-procedure"></a><span data-ttu-id="2bb7b-342">Executando um procedimento armazenado</span><span class="sxs-lookup"><span data-stu-id="2bb7b-342">Executing a stored procedure</span></span>
<span data-ttu-id="2bb7b-343">Execução de um procedimento armazenado é feita por meio de um HTTP POST em um recurso de procedimento armazenado existente, passando parâmetros de procedimento toohello no corpo da solicitação de saudação.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-343">Execution of a stored procedure is done by issuing an HTTP POST against an existing stored procedure resource by passing parameters toohello procedure in hello request body.</span></span>

    var inputDocument = {id : "document1", author: "G. G. Marquez"};
    client.executeStoredProcedureAsync(createdStoredProcedure.resource._self, inputDocument)
        .then(function(executionResult) {
            assert.equal(executionResult, "success - created DOCUMENT1");
        }, function(error) {
            console.log("Error");
        });

### <a name="unregistering-a-stored-procedure"></a><span data-ttu-id="2bb7b-344">Cancelando o registro de um procedimento armazenado</span><span class="sxs-lookup"><span data-stu-id="2bb7b-344">Unregistering a stored procedure</span></span>
<span data-ttu-id="2bb7b-345">Cancelar o registro de um procedimento armazenado é um processo simples, feito com a emissão de um HTTP DELETE para um recurso do procedimento armazenado existente.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-345">Unregistering a stored procedure is simply done by issuing an HTTP DELETE against an existing stored procedure resource.</span></span>   

    client.deleteStoredProcedureAsync(createdStoredProcedure.resource._self)
        .then(function (response) {
            return;
        }, function(error) {
            console.log("Error");
        });


### <a name="registering-a-pre-trigger"></a><span data-ttu-id="2bb7b-346">Registrando um pré-gatilho</span><span class="sxs-lookup"><span data-stu-id="2bb7b-346">Registering a pre-trigger</span></span>
<span data-ttu-id="2bb7b-347">O registro de um gatilho é realizado ao criar um novo recurso de gatilho em uma coleção por meio do HTTP POST.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-347">Registration of a trigger is done by creating a new trigger resource on a collection via HTTP POST.</span></span> <span data-ttu-id="2bb7b-348">Você pode especificar se o gatilho de saudação é uma versão anterior ou um tipo de gatilho e hello post de operação pode ser associado (por exemplo, criar, substituir, excluir ou todos).</span><span class="sxs-lookup"><span data-stu-id="2bb7b-348">You can specify if hello trigger is a pre or a post trigger and hello type of operation it can be associated with (e.g. Create, Replace, Delete, or All).</span></span>   

    var preTrigger = {
        id: "upperCaseId",
        body: function() {
                var item = getContext().getRequest().getBody();
                item.id = item.id.toUpperCase();
                getContext().getRequest().setBody(item);
        },
        triggerType: TriggerType.Pre,
        triggerOperation: TriggerOperation.All
    }

    client.createTriggerAsync(collection._self, preTrigger)
        .then(function (createdPreTrigger) {
            console.log("Successfully created trigger");
        }, function(error) {
            console.log("Error");
        });

### <a name="executing-a-pre-trigger"></a><span data-ttu-id="2bb7b-349">Executando um pré-gatilho</span><span class="sxs-lookup"><span data-stu-id="2bb7b-349">Executing a pre-trigger</span></span>
<span data-ttu-id="2bb7b-350">Execução de um gatilho é feita especificando o nome hello de um gatilho existente em tempo de saudação de emitir a solicitação do hello PUT/POST/exclusão de um recurso de documento por meio do cabeçalho de solicitação de saudação.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-350">Execution of a trigger is done by specifying hello name of an existing trigger at hello time of issuing hello POST/PUT/DELETE request of a document resource via hello request header.</span></span>  

    client.createDocumentAsync(collection._self, { id: "doc1", key: "Love in hello Time of Cholera" }, { preTriggerInclude: "upperCaseId" })
        .then(function(createdDocument) {
            assert.equal(createdDocument.resource.id, "DOC1");
        }, function(error) {
            console.log("Error");
        });

### <a name="unregistering-a-pre-trigger"></a><span data-ttu-id="2bb7b-351">Cancelando o registro de um pré-gatilho</span><span class="sxs-lookup"><span data-stu-id="2bb7b-351">Unregistering a pre-trigger</span></span>
<span data-ttu-id="2bb7b-352">O cancelamento do registro de um gatilho é feito simplesmente ao emitir um comando HTTP DELETE para um recurso de gatilho existente.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-352">Unregistering a trigger is simply done via issuing an HTTP DELETE against an existing trigger resource.</span></span>  

    client.deleteTriggerAsync(createdPreTrigger._self);
        .then(function(response) {
            return;
        }, function(error) {
            console.log("Error");
        });

### <a name="registering-a-udf"></a><span data-ttu-id="2bb7b-353">Registrando uma UDF</span><span class="sxs-lookup"><span data-stu-id="2bb7b-353">Registering a UDF</span></span>
<span data-ttu-id="2bb7b-354">O registro de uma UDF é realizado ao criar um novo recurso de UDF em uma coleção por meio do HTTP POST.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-354">Registration of a UDF is done by creating a new UDF resource on a collection via HTTP POST.</span></span>  

    var udf = { 
        id: "mathSqrt",
        body: function(number) {
                return Math.sqrt(number);
        },
    };
    client.createUserDefinedFunctionAsync(collection._self, udf)
        .then(function (createdUdf) {
            console.log("Successfully created stored procedure");
        }, function(error) {
            console.log("Error");
        });

### <a name="executing-a-udf-as-part-of-hello-query"></a><span data-ttu-id="2bb7b-355">Execução de um UDF como parte da consulta Olá</span><span class="sxs-lookup"><span data-stu-id="2bb7b-355">Executing a UDF as part of hello query</span></span>
<span data-ttu-id="2bb7b-356">Um UDF pode ser especificado como parte da consulta SQL hello e é usado como um núcleo de saudação do modo tooextend [linguagem de consulta SQL para Olá API DocumentDB](https://msdn.microsoft.com/library/azure/dn782250.aspx).</span><span class="sxs-lookup"><span data-stu-id="2bb7b-356">A UDF can be specified as part of hello SQL query and is used as a way tooextend hello core [SQL query language for hello DocumentDB API](https://msdn.microsoft.com/library/azure/dn782250.aspx).</span></span>

    var filterQuery = "SELECT udf.mathSqrt(r.Age) AS sqrtAge FROM root r WHERE r.FirstName='John'";
    client.queryDocuments(collection._self, filterQuery).toArrayAsync();
        .then(function(queryResponse) {
            var queryResponseDocuments = queryResponse.feed;
        }, function(error) {
            console.log("Error");
        });

### <a name="unregistering-a-udf"></a><span data-ttu-id="2bb7b-357">Cancelando o registro de uma UDF</span><span class="sxs-lookup"><span data-stu-id="2bb7b-357">Unregistering a UDF</span></span>
<span data-ttu-id="2bb7b-358">O cancelamento do registro de uma UDF é feito simplesmente ao emitir um comando HTTP DELETE para um recurso de UDF existente.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-358">Unregistering a UDF is simply done by issuing an HTTP DELETE against an existing UDF resource.</span></span>  

    client.deleteUserDefinedFunctionAsync(createdUdf._self)
        .then(function(response) {
            return;
        }, function(error) {
            console.log("Error");
        });

<span data-ttu-id="2bb7b-359">Embora os trechos de código Olá acima mostraram registro hello (POST), o cancelamento do registro (PUT), lista/leitura (GET) e execução (POST) por meio de saudação [SDK de JavaScript](https://github.com/Azure/azure-documentdb-js), você também pode usar o hello [APIs REST](/rest/api/documentdb/) ou outros [cliente SDKs](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="2bb7b-359">Although hello snippets above showed hello registration (POST), unregistration (PUT), read/list (GET) and execution (POST) via hello [JavaScript SDK](https://github.com/Azure/azure-documentdb-js), you can also use hello [REST APIs](/rest/api/documentdb/) or other [client SDKs](documentdb-sdk-dotnet.md).</span></span> 

## <a name="documents"></a><span data-ttu-id="2bb7b-360">Documentos</span><span class="sxs-lookup"><span data-stu-id="2bb7b-360">Documents</span></span>
<span data-ttu-id="2bb7b-361">Você pode inserir, substituir, excluir, ler, enumerar e consultar documentos JSON arbitrários em uma coleção.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-361">You can insert, replace, delete, read, enumerate and query arbitrary JSON documents in a collection.</span></span> <span data-ttu-id="2bb7b-362">Cosmos banco de dados não exige qualquer esquema e não requer índices secundários na ordem toosupport consultas em documentos em uma coleção.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-362">Cosmos DB does not mandate any schema and does not require secondary indexes in order toosupport querying over documents in a collection.</span></span> <span data-ttu-id="2bb7b-363">tamanho máximo de saudação para um documento é 2 MB.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-363">hello maximum size for a document is 2 MB.</span></span>   

<span data-ttu-id="2bb7b-364">Sendo um serviço de banco de dados verdadeiramente aberto, o Cosmos DB não inverte nenhum tipo de dados especializado (por exemplo, data e hora) nem codificações específicas para documentos JSON.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-364">Being a truly open database service, Cosmos DB does not invent any specialized data types (e.g. date time) or specific encodings for JSON documents.</span></span> <span data-ttu-id="2bb7b-365">Observe que o banco de dados do Cosmos não exigem qualquer especial JSON convenções toocodify Olá relações entre vários documentos; sintaxe SQL de saudação do Cosmos DB fornece operadores de consulta relacional e hierárquica muito poderoso documentos tooquery e projeto sem anotações especiais ou necessidade toocodify relações entre documentos usando propriedades distintos.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-365">Note that Cosmos DB does not require any special JSON conventions toocodify hello relationships among various documents; hello SQL syntax of Cosmos DB provides very powerful hierarchical and relational query operators tooquery and project documents without any special annotations or need toocodify relationships among documents using distinguished properties.</span></span>  

<span data-ttu-id="2bb7b-366">Como com todos os outros recursos, os documentos podem ser criados, substituídos, excluídos, ler, enumerados e consultados facilmente usando APIs REST ou qualquer Olá [cliente SDKs](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="2bb7b-366">As with all other resources, documents can be created, replaced, deleted, read, enumerated and queried easily using either REST APIs or any of hello [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="2bb7b-367">Exclusão de um documento instantaneamente libera Olá cota correspondente tooall de anexos Olá aninhado.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-367">Deleting a document instantly frees up hello quota corresponding tooall of hello nested attachments.</span></span> <span data-ttu-id="2bb7b-368">Olá ler o nível de consistência de documentos segue a política de consistência de saudação na conta de banco de dados de saudação.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-368">hello read consistency level of documents follows hello consistency policy on hello database account.</span></span> <span data-ttu-id="2bb7b-369">Essa política pode ser substituída com base em cada solicitação, dependendo dos requisitos de consistência de dados de seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-369">This policy can be overridden on a per-request basis depending on data consistency requirements of your application.</span></span> <span data-ttu-id="2bb7b-370">Ao consultar documentos, Olá ler consistência segue Olá definido na coleção de saudação do modo de indexação.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-370">When querying documents, hello read consistency follows hello indexing mode set on hello collection.</span></span> <span data-ttu-id="2bb7b-371">Para "consistente", isso segue a política de consistência da conta hello.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-371">For “consistent”, this follows hello account’s consistency policy.</span></span> 

## <a name="attachments-and-media"></a><span data-ttu-id="2bb7b-372">Anexos e mídia</span><span class="sxs-lookup"><span data-stu-id="2bb7b-372">Attachments and media</span></span>
<span data-ttu-id="2bb7b-373">Cosmos banco de dados permite que você toostore binário blobs/mídia com banco de dados do Cosmos (máximo de 2 GB por conta) ou tooyour de mídia remota próprio repositório.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-373">Cosmos DB allows you toostore binary blobs/media either with Cosmos DB (maximum of 2 GB per account) or tooyour own remote media store.</span></span> <span data-ttu-id="2bb7b-374">Ele também permite toorepresent Olá metadados de uma mídia em termos de um documento especial chamado de anexo.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-374">It also allows you toorepresent hello metadata of a media in terms of a special document called attachment.</span></span> <span data-ttu-id="2bb7b-375">Um anexo em Cosmos DB é um documento de (JSON) especial que referências Olá mídia/blob armazenado em outro lugar.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-375">An attachment in Cosmos DB is a special (JSON) document that references hello media/blob stored elsewhere.</span></span> <span data-ttu-id="2bb7b-376">Um anexo é simplesmente um documento especial que captura Olá metadados (por exemplo, o local, o autor etc.) de uma mídia armazenada em um armazenamento de mídia remota.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-376">An attachment is simply a special document that captures hello metadata (e.g. location, author etc.) of a media stored in a remote media storage.</span></span> 

<span data-ttu-id="2bb7b-377">Considere um aplicativo de leitura social que usa o banco de dados do Cosmos toostore anotações e realça os metadados, incluindo comentários, indicadores, classificações, equipara/preferências pessoais etc. associados para um livro eletrônico de um determinado usuário.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-377">Consider a social reading application which uses Cosmos DB toostore ink annotations, and metadata including comments, highlights, bookmarks, ratings, likes/dislikes etc. associated for an e-book of a given user.</span></span>   

* <span data-ttu-id="2bb7b-378">Hello conteúdo do catálogo de saudação em si é armazenado no armazenamento de mídia hello ou disponível como parte da conta de banco de dados do banco de dados do Cosmos ou um repositório de mídia remota.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-378">hello content of hello book itself is stored in hello media storage either available as part of Cosmos DB database account or a remote media store.</span></span> 
* <span data-ttu-id="2bb7b-379">Um aplicativo poderá armazenar os metadados de cada usuário como um documento distinto, por exemplo, os metadados de Joe para o book1 são armazenados em um documento cuja referência é /colls/joe/docs/book1.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-379">An application may store each user’s metadata as a distinct document -- e.g. Joe’s metadata for book1 is stored in a document referenced by /colls/joe/docs/book1.</span></span> 
* <span data-ttu-id="2bb7b-380">Anexos apontando toohello páginas de conteúdo de um determinado registro de um usuário são armazenados em um documento correspondente do hello, por exemplo, /colls/joe/docs/book1/chapter1, /colls/joe/docs/book1/chapter2 etc.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-380">Attachments pointing toohello content pages of a given book of a user are stored under hello corresponding document e.g. /colls/joe/docs/book1/chapter1, /colls/joe/docs/book1/chapter2 etc.</span></span> 

<span data-ttu-id="2bb7b-381">Observe que os exemplos de saudação listados acima use hierarquia de recursos do ids amigável tooconvey hello.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-381">Note that hello examples listed above use friendly ids tooconvey hello resource hierarchy.</span></span> <span data-ttu-id="2bb7b-382">Recursos são acessados por meio de saudação APIs REST por meio de ids de recurso exclusivo.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-382">Resources are accessed via hello REST APIs through unique resource ids.</span></span> 

<span data-ttu-id="2bb7b-383">Para mídia de saudação que é gerenciada pelo banco de dados do Cosmos, propriedade de _media de saudação do anexo de saudação fará referência a mídia de saudação por seu URI.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-383">For hello media that is managed by Cosmos DB, hello _media property of hello attachment will reference hello media by its URI.</span></span> <span data-ttu-id="2bb7b-384">Cosmos DB garantirá mídia de coletar Olá toogarbage quando todas as referências de saudação pendentes serão descartadas.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-384">Cosmos DB will ensure toogarbage collect hello media when all of hello outstanding references are dropped.</span></span> <span data-ttu-id="2bb7b-385">Cosmos DB gera anexo hello quando você carregar uma nova mídia hello e popula Olá _media toopoint toohello recém-adicionado mídia automaticamente.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-385">Cosmos DB automatically generates hello attachment when you upload hello new media and populates hello _media toopoint toohello newly added media.</span></span> <span data-ttu-id="2bb7b-386">Se você escolher a mídia de saudação toostore em um armazenamento de blob remoto gerenciado por você (por exemplo, o OneDrive, o armazenamento do Azure, DropBox etc), você ainda pode usar a mídia de saudação tooreference anexos.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-386">If you choose toostore hello media in a remote blob store managed by you (e.g. OneDrive, Azure Storage, DropBox etc), you can still use attachments tooreference hello media.</span></span> <span data-ttu-id="2bb7b-387">Nesse caso, você mesmo cria anexo hello e preencher sua propriedade _media.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-387">In this case, you will create hello attachment yourself and populate its _media property.</span></span>   

<span data-ttu-id="2bb7b-388">Assim como acontece com todos os outros recursos, anexos podem ser criados, substituídos, excluídos, ler ou enumeradas facilmente usando APIs REST ou qualquer um dos SDKs de cliente de saudação.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-388">As with all other resources, attachments can be created, replaced, deleted, read or enumerated easily using either REST APIs or any of hello client SDKs.</span></span> <span data-ttu-id="2bb7b-389">Como com os documentos, Olá do nível de consistência de anexos de leitura segue a política de consistência de saudação na conta de banco de dados de saudação.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-389">As with documents, hello read consistency level of attachments follows hello consistency policy on hello database account.</span></span> <span data-ttu-id="2bb7b-390">Essa política pode ser substituída com base em cada solicitação, dependendo dos requisitos de consistência de dados de seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-390">This policy can be overridden on a per-request basis depending on data consistency requirements of your application.</span></span> <span data-ttu-id="2bb7b-391">Ao consultar anexos, Olá ler consistência segue Olá definido na coleção de saudação do modo de indexação.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-391">When querying for attachments, hello read consistency follows hello indexing mode set on hello collection.</span></span> <span data-ttu-id="2bb7b-392">Para "consistente", isso segue a política de consistência da conta hello.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-392">For “consistent”, this follows hello account’s consistency policy.</span></span> 
 

## <a name="users"></a><span data-ttu-id="2bb7b-393">Usuários</span><span class="sxs-lookup"><span data-stu-id="2bb7b-393">Users</span></span>
<span data-ttu-id="2bb7b-394">Um usuário do Cosmos DB representa um namespace lógico para agrupar permissões.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-394">A Cosmos DB user represents a logical namespace for grouping permissions.</span></span> <span data-ttu-id="2bb7b-395">Um usuário de banco de dados do Cosmos pode corresponder tooa usuário em um sistema de gerenciamento de identidade ou uma função de aplicativo predefinido.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-395">A Cosmos DB user may correspond tooa user in an identity management system or a predefined application role.</span></span> <span data-ttu-id="2bb7b-396">Para o banco de dados do Cosmos, um usuário simplesmente representa uma abstração toogroup um conjunto de permissões em um banco de dados.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-396">For Cosmos DB, a user simply represents an abstraction toogroup a set of permissions under a database.</span></span>   

<span data-ttu-id="2bb7b-397">Para implementar a multilocação em seu aplicativo, você pode criar usuários no banco de dados do Cosmos que corresponde a usuários reais de tooyour ou locatários de saudação do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-397">For implementing multi-tenancy in your application, you can create users in Cosmos DB which corresponds tooyour actual users or hello tenants of your application.</span></span> <span data-ttu-id="2bb7b-398">Você pode criar permissões para um determinado usuário que correspondem a controle de acesso de toohello sobre várias coleções, documentos, anexos, etc.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-398">You can then create permissions for a given user that correspond toohello access control over various collections, documents, attachments, etc.</span></span>   

<span data-ttu-id="2bb7b-399">Como seus aplicativos precisam tooscale com o crescimento de usuário, você pode adotar tooshard de várias maneiras seus dados.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-399">As your applications need tooscale with your user growth, you can adopt various ways tooshard your data.</span></span> <span data-ttu-id="2bb7b-400">Você pode modelar seus usuários da seguinte forma:</span><span class="sxs-lookup"><span data-stu-id="2bb7b-400">You can model each of your users as follows:</span></span>   

* <span data-ttu-id="2bb7b-401">Cada usuário mapeado tooa banco de dados.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-401">Each user maps tooa database.</span></span>
* <span data-ttu-id="2bb7b-402">Cada usuário mapeado tooa coleção.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-402">Each user maps tooa collection.</span></span> 
* <span data-ttu-id="2bb7b-403">Documentos correspondente toomultiple usuários vá coleção tooa dedicado.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-403">Documents corresponding toomultiple users go tooa dedicated collection.</span></span> 
* <span data-ttu-id="2bb7b-404">Documentos correspondente toomultiple usuários vá tooa conjunto de coleções.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-404">Documents corresponding toomultiple users go tooa set of collections.</span></span>   

<span data-ttu-id="2bb7b-405">Independentemente da estratégia de fragmentação específico Olá que você escolher, podem ser usuários reais de modelo como usuários no banco de dados do banco de dados do Cosmos e associar o usuário de tooeach permissões refinadas.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-405">Regardless of hello specific sharding strategy you choose, you can model your actual users as users in Cosmos DB database and associate fine grained permissions tooeach user.</span></span>  

<span data-ttu-id="2bb7b-406">![Coleções do usuário][3]</span><span class="sxs-lookup"><span data-stu-id="2bb7b-406">![User collections][3]</span></span>  
<span data-ttu-id="2bb7b-407">**Estratégias de fragmentação e modelagem de usuários**</span><span class="sxs-lookup"><span data-stu-id="2bb7b-407">**Sharding strategies and modeling users**</span></span>

<span data-ttu-id="2bb7b-408">Como todos os outros recursos, os usuários no banco de dados do Cosmos podem ser criados, substituído, excluído, ler ou enumeradas facilmente usando APIs REST ou qualquer um dos SDKs de cliente de saudação.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-408">Like all other resources, users in Cosmos DB can be created, replaced, deleted, read or enumerated easily using either REST APIs or any of hello client SDKs.</span></span> <span data-ttu-id="2bb7b-409">Cosmos DB sempre fornece consistência forte para a leitura ou consultar metadados de saudação de um recurso de usuário.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-409">Cosmos DB always provides strong consistency for reading or querying hello metadata of a user resource.</span></span> <span data-ttu-id="2bb7b-410">Vale a pena destacar que a exclusão de um usuário automaticamente garante que você não pode acessar qualquer uma das permissões Olá contidas nele.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-410">It is worth pointing out that deleting a user automatically ensures that you cannot access any of hello permissions contained within it.</span></span> <span data-ttu-id="2bb7b-411">Embora Olá Cosmos DB recupera cota Olá de permissões Olá como parte do usuário Olá excluído no plano de fundo Olá, permissões Olá excluído está disponível imediatamente novamente para você toouse.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-411">Even though hello Cosmos DB reclaims hello quota of hello permissions as part of hello deleted user in hello background, hello deleted permissions is available instantly again for you toouse.</span></span>  

## <a name="permissions"></a><span data-ttu-id="2bb7b-412">Permissões</span><span class="sxs-lookup"><span data-stu-id="2bb7b-412">Permissions</span></span>
<span data-ttu-id="2bb7b-413">De uma perspectiva do controle de acesso, recursos como as contas do banco de dados, bancos de dados, usuários e permissão são considerados recursos *administrativos*, uma vez que requerem permissões administrativas.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-413">From an access control perspective, resources such as database accounts, databases, users and permission are considered *administrative* resources since these require administrative permissions.</span></span> <span data-ttu-id="2bb7b-414">Em Olá outro lado, recursos, incluindo coleções hello, documentos, anexos, procedimentos armazenados, disparadores, e UDFs estão no escopo em um determinado banco de dados e consideradas *recursos do aplicativo*.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-414">On hello other hand, resources including hello collections, documents, attachments, stored procedures, triggers, and UDFs are scoped under a given database and considered *application resources*.</span></span> <span data-ttu-id="2bb7b-415">Correspondente toohello dois tipos de recursos e funções hello acessá-los (ou seja, o administrador de saudação e o usuário), o modelo de autorização Olá define dois tipos de *chaves de acesso*: *chave mestra* e *a chave de recurso*.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-415">Corresponding toohello two types of resources and hello roles that access them (namely hello administrator and user), hello authorization model defines two types of *access keys*: *master key* and *resource key*.</span></span> <span data-ttu-id="2bb7b-416">Olá master key faz parte da conta do banco de dados de saudação e é fornecida toohello desenvolvedor (ou o administrador) que é o provisionamento de conta de banco de dados de saudação.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-416">hello master key is a part of hello database account and is provided toohello developer (or administrator) who is provisioning hello database account.</span></span> <span data-ttu-id="2bb7b-417">Essa chave mestra tem semântica de administrador, que pode ser usado tooauthorize tooboth de acesso administrativo e recursos do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-417">This master key has administrator semantics, in that it can be used tooauthorize access tooboth administrative and application resources.</span></span> <span data-ttu-id="2bb7b-418">Em contraste, uma chave de recurso é uma chave de acesso granulares que permite acesso tooa *específico* recurso de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-418">In contrast, a resource key is a granular access key that allows access tooa *specific* application resource.</span></span> <span data-ttu-id="2bb7b-419">Assim, captura relação Olá entre usuário Olá de um banco de dados e Olá permissões Olá usuário para um recurso específico (por exemplo, coleta, documento, anexo, procedimento armazenado, gatilho ou UDF).</span><span class="sxs-lookup"><span data-stu-id="2bb7b-419">Thus, it captures hello relationship between hello user of a database and hello permissions hello user has for a specific resource (e.g. collection, document, attachment, stored procedure, trigger, or UDF).</span></span>   

<span data-ttu-id="2bb7b-420">Olá somente tooobtain de forma que uma chave de recurso é criando um recurso de permissão em um determinado usuário.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-420">hello only way tooobtain a resource key is by creating a permission resource under a given user.</span></span> <span data-ttu-id="2bb7b-421">Observe que, em ordem toocreate ou recuperar uma permissão, uma chave mestra deve ser apresentada no cabeçalho de autorização de saudação.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-421">Note that In order toocreate or retrieve a permission, a master key must be presented in hello authorization header.</span></span> <span data-ttu-id="2bb7b-422">Um recurso de permissão vincula o usuário de recurso, seu acesso e Olá Olá.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-422">A permission resource ties hello resource, its access and hello user.</span></span> <span data-ttu-id="2bb7b-423">Depois de criar um recurso de permissão, Olá usuário só precisa de chave de recurso associado Olá toopresent no recurso relevante do toohello ordem toogain acesso.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-423">After creating a permission resource, hello user only needs toopresent hello associated resource key in order toogain access toohello relevant resource.</span></span> <span data-ttu-id="2bb7b-424">Portanto, uma chave de recurso pode ser exibida como uma representação lógica e compact do recurso de permissão de saudação.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-424">Hence, a resource key can be viewed as a logical and compact representation of hello permission resource.</span></span>  

<span data-ttu-id="2bb7b-425">Assim como acontece com todos os outros recursos, as permissões no banco de dados do Cosmos podem ser criadas, substituído, excluído, ler ou enumeradas facilmente usando APIs REST ou qualquer um dos SDKs de cliente de saudação.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-425">As with all other resources, permissions in Cosmos DB can be created, replaced, deleted, read or enumerated easily using either REST APIs or any of hello client SDKs.</span></span> <span data-ttu-id="2bb7b-426">Cosmos DB sempre fornece consistência forte para a leitura ou consultar metadados de saudação de uma permissão.</span><span class="sxs-lookup"><span data-stu-id="2bb7b-426">Cosmos DB always provides strong consistency for reading or querying hello metadata of a permission.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="2bb7b-427">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="2bb7b-427">Next steps</span></span>
<span data-ttu-id="2bb7b-428">Saiba mais sobre como trabalhar com recursos usando comandos HTTP em [Interações RESTful com recursos do Cosmos DB](https://msdn.microsoft.com/library/azure/mt622086.aspx).</span><span class="sxs-lookup"><span data-stu-id="2bb7b-428">Learn more about working with resources by using HTTP commands in [RESTful interactions with Cosmos DB resources](https://msdn.microsoft.com/library/azure/mt622086.aspx).</span></span>

[1]: media/documentdb-resources/resources1.png
[2]: media/documentdb-resources/resources2.png
[3]: media/documentdb-resources/resources3.png

