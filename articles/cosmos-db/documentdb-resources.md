---
title: Conceitos e modelo de recurso do Azure Cosmos DB | Microsoft Docs
description: "Saiba mais sobre o modelo hierárquico de bancos de dados, coleções, UDF (função definida pelo usuário), documentos, permissões do Azure Cosmos DB para gerenciar recursos e muito mais."
keywords: "Modelo hierárquico, cosmosdb, azure, Microsoft azure"
services: cosmos-db
documentationcenter: 
author: AndrewHoh
manager: jhubbard
editor: monicar
ms.assetid: ef9d5c0c-0867-4317-bb1b-98e219799fd5
ms.service: cosmos-db
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/24/2017
ms.author: anhoh
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 8051742c7c368d1ed84bcd90ab75b20f62105e2f
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/03/2017
---
# <a name="azure-cosmos-db-hierarchical-resource-model-and-core-concepts"></a><span data-ttu-id="dd930-104">Modelo de recurso hierárquico e principais conceitos do Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="dd930-104">Azure Cosmos DB hierarchical resource model and core concepts</span></span>
<span data-ttu-id="dd930-105">As entidades de banco de dados gerenciadas pelo Azure Cosmos DB são chamadas de **recursos**.</span><span class="sxs-lookup"><span data-stu-id="dd930-105">The database entities that Azure Cosmos DB manages are referred to as **resources**.</span></span> <span data-ttu-id="dd930-106">Cada recurso é identificado de maneira exclusiva por um URI lógico.</span><span class="sxs-lookup"><span data-stu-id="dd930-106">Each resource is uniquely identified by a logical URI.</span></span> <span data-ttu-id="dd930-107">Você pode interagir com os recursos usando verbos de HTTP padrão, cabeçalhos de solicitação/resposta e códigos de status.</span><span class="sxs-lookup"><span data-stu-id="dd930-107">You can interact with the resources using standard HTTP verbs, request/response headers and status codes.</span></span> 

<span data-ttu-id="dd930-108">Após ler este artigo, você poderá responder as perguntas a seguir:</span><span class="sxs-lookup"><span data-stu-id="dd930-108">By reading this article, you'll be able to answer the following questions:</span></span>

* <span data-ttu-id="dd930-109">O que é o modelo de recurso do Cosmos DB?</span><span class="sxs-lookup"><span data-stu-id="dd930-109">What is Cosmos DB's resource model?</span></span>
* <span data-ttu-id="dd930-110">O que são recursos definidos pelo sistema em oposição a recursos definidos pelo usuário?</span><span class="sxs-lookup"><span data-stu-id="dd930-110">What are system defined resources as opposed to user defined resources?</span></span>
* <span data-ttu-id="dd930-111">Como eu acesso um recurso?</span><span class="sxs-lookup"><span data-stu-id="dd930-111">How do I address a resource?</span></span>
* <span data-ttu-id="dd930-112">Como eu trabalho com coleções?</span><span class="sxs-lookup"><span data-stu-id="dd930-112">How do I work with collections?</span></span>
* <span data-ttu-id="dd930-113">Como trabalhar com procedimentos armazenados, disparadores e UDFs (Funções Definidas pelo Usuário)?</span><span class="sxs-lookup"><span data-stu-id="dd930-113">How do I work with stored procedures, triggers and User Defined Functions (UDFs)?</span></span>

## <a name="hierarchical-resource-model"></a><span data-ttu-id="dd930-114">Modelo de recursos hierárquico</span><span class="sxs-lookup"><span data-stu-id="dd930-114">Hierarchical resource model</span></span>
<span data-ttu-id="dd930-115">Como o diagrama a seguir ilustra, o **modelo de recurso** hierárquico do Cosmos DB é formado por conjuntos de recursos em uma conta de banco de dados, cada um podendo ser acessado por meio de um URI lógico e estável.</span><span class="sxs-lookup"><span data-stu-id="dd930-115">As the following diagram illustrates, the Cosmos DB hierarchical **resource model** consists of sets of resources under a database account, each addressable via a logical and stable URI.</span></span> <span data-ttu-id="dd930-116">Neste artigo, um conjunto de recursos será chamado de **feed** .</span><span class="sxs-lookup"><span data-stu-id="dd930-116">A set of resources will be referred to as a **feed** in this article.</span></span> 

> [!NOTE]
> <span data-ttu-id="dd930-117">O Azure Cosmos DB oferece um protocolo TCP altamente eficiente, que também é RESTful no seu modelo de comunicação, disponível por meio da [API do cliente .NET do DocumentDB](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="dd930-117">Azure Cosmos DB offers a highly efficient TCP protocol which is also RESTful in its communication model, available through the [DocumentDB .NET client API](documentdb-sdk-dotnet.md).</span></span>
> 
> 

<span data-ttu-id="dd930-118">![Modelo de recurso hierárquico do Azure Cosmos DB][1]</span><span class="sxs-lookup"><span data-stu-id="dd930-118">![Azure Cosmos DB hierarchical resource model][1]</span></span>  
<span data-ttu-id="dd930-119">**Modelo de recursos hierárquico**</span><span class="sxs-lookup"><span data-stu-id="dd930-119">**Hierarchical resource model**</span></span>   

<span data-ttu-id="dd930-120">Para começar a trabalhar com os recursos, [crie uma conta do banco de dados](create-documentdb-dotnet.md) usando sua assinatura do Azure.</span><span class="sxs-lookup"><span data-stu-id="dd930-120">To start working with resources, you must [create a database account](create-documentdb-dotnet.md) using your Azure subscription.</span></span> <span data-ttu-id="dd930-121">Uma conta do banco de dados pode ser formada por um conjunto de **bancos de dados**, cada um contendo diversas **coleções**, cada uma delas, por sua vez, contendo **procedimentos armazenados, gatilhos, UDFs, documentos** e **anexos** relacionados.</span><span class="sxs-lookup"><span data-stu-id="dd930-121">A database account can consist of a set of **databases**, each containing multiple **collections**, each of which in turn contain **stored procedures, triggers, UDFs, documents** and related **attachments**.</span></span> <span data-ttu-id="dd930-122">Um banco de dados também tem **usuários** associados, cada um com um conjunto de **permissões** para acessar coleções, procedimentos armazenados, gatilhos, UDFs, documentos ou anexos.</span><span class="sxs-lookup"><span data-stu-id="dd930-122">A database also has associated **users**, each with a set of **permissions** to access collections, stored procedures, triggers, UDFs, documents or attachments.</span></span> <span data-ttu-id="dd930-123">Enquanto bancos de dados, usuários, permissões e coleções são recursos definidos pelo sistema com esquemas bastante conhecidos, os documentos e anexos possuem conteúdos JSON arbitrários, definidos pelo usuário.</span><span class="sxs-lookup"><span data-stu-id="dd930-123">While databases, users, permissions and collections are system-defined resources with well-known schemas, documents and attachments contain arbitrary, user defined JSON content.</span></span>  

| <span data-ttu-id="dd930-124">Recurso</span><span class="sxs-lookup"><span data-stu-id="dd930-124">Resource</span></span> | <span data-ttu-id="dd930-125">Descrição</span><span class="sxs-lookup"><span data-stu-id="dd930-125">Description</span></span> |
| --- | --- |
| <span data-ttu-id="dd930-126">Conta de banco de dados</span><span class="sxs-lookup"><span data-stu-id="dd930-126">Database account</span></span> |<span data-ttu-id="dd930-127">Uma conta de banco de dados está associada a um conjunto de bancos de dados e uma quantidade fixa de armazenamento de blobs para anexos.</span><span class="sxs-lookup"><span data-stu-id="dd930-127">A database account is associated with a set of databases and a fixed amount of blob storage for attachments.</span></span> <span data-ttu-id="dd930-128">Você pode criar uma ou mais contas do banco de dados usando sua assinatura do Azure.</span><span class="sxs-lookup"><span data-stu-id="dd930-128">You can create one or more database accounts using your Azure subscription.</span></span> <span data-ttu-id="dd930-129">Para obter mais informações, visite nossa [página de preços](https://azure.microsoft.com/pricing/details/cosmos-db/).</span><span class="sxs-lookup"><span data-stu-id="dd930-129">For more information, visit our [pricing page](https://azure.microsoft.com/pricing/details/cosmos-db/).</span></span> |
| <span data-ttu-id="dd930-130">Banco de dados</span><span class="sxs-lookup"><span data-stu-id="dd930-130">Database</span></span> |<span data-ttu-id="dd930-131">Um banco de dados é um contêiner lógico de armazenamento de documentos particionado em coleções.</span><span class="sxs-lookup"><span data-stu-id="dd930-131">A database is a logical container of document storage partitioned across collections.</span></span> <span data-ttu-id="dd930-132">Ele também é um contêiner para usuários.</span><span class="sxs-lookup"><span data-stu-id="dd930-132">It is also a users container.</span></span> |
| <span data-ttu-id="dd930-133">Usuário</span><span class="sxs-lookup"><span data-stu-id="dd930-133">User</span></span> |<span data-ttu-id="dd930-134">O namespace lógico para obter o escopo das permissões.</span><span class="sxs-lookup"><span data-stu-id="dd930-134">The logical namespace for scoping permissions.</span></span> |
| <span data-ttu-id="dd930-135">Permissão</span><span class="sxs-lookup"><span data-stu-id="dd930-135">Permission</span></span> |<span data-ttu-id="dd930-136">Um token de autorização associado a um usuário para acesso a um recurso específico.</span><span class="sxs-lookup"><span data-stu-id="dd930-136">An authorization token associated with a user for access to a specific resource.</span></span> |
| <span data-ttu-id="dd930-137">Coleção</span><span class="sxs-lookup"><span data-stu-id="dd930-137">Collection</span></span> |<span data-ttu-id="dd930-138">Uma coleção é um contêiner de documentos JSON e uma lógica de aplicativo JavaScript associada.</span><span class="sxs-lookup"><span data-stu-id="dd930-138">A collection is a container of JSON documents and the associated JavaScript application logic.</span></span> <span data-ttu-id="dd930-139">Uma coleção é uma entidade faturável, em que o [custo](performance-levels.md) é determinado pelo nível de desempenho associado à coleção.</span><span class="sxs-lookup"><span data-stu-id="dd930-139">A collection is a billable entity, where the [cost](performance-levels.md) is determined by the performance level associated with the collection.</span></span> <span data-ttu-id="dd930-140">As coleções podem abranger uma ou mais partições/servidores e podem ser dimensionadas para lidar com volumes de armazenamento ou taxa de transferência praticamente ilimitados.</span><span class="sxs-lookup"><span data-stu-id="dd930-140">Collections can span one or more partitions/servers and can scale to handle practically unlimited volumes of storage or throughput.</span></span> |
| <span data-ttu-id="dd930-141">Procedimento armazenado</span><span class="sxs-lookup"><span data-stu-id="dd930-141">Stored Procedure</span></span> |<span data-ttu-id="dd930-142">Lógica de aplicativo gravada no JavaScript que é registrada com uma coleção e executada de forma transacional dentro do mecanismo do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="dd930-142">Application logic written in JavaScript which is registered with a collection and transactionally executed within the database engine.</span></span> |
| <span data-ttu-id="dd930-143">Gatilho</span><span class="sxs-lookup"><span data-stu-id="dd930-143">Trigger</span></span> |<span data-ttu-id="dd930-144">Lógica de aplicativo escrita em JavaScript executada antes ou depois de uma operação de inserção, substituição ou exclusão.</span><span class="sxs-lookup"><span data-stu-id="dd930-144">Application logic written in JavaScript executed before or after either an insert, replace or delete operation.</span></span> |
| <span data-ttu-id="dd930-145">UDF</span><span class="sxs-lookup"><span data-stu-id="dd930-145">UDF</span></span> |<span data-ttu-id="dd930-146">Uma lógica de aplicativo escrita em JavaScript.</span><span class="sxs-lookup"><span data-stu-id="dd930-146">Application logic written in JavaScript.</span></span> <span data-ttu-id="dd930-147">As UDFs permitem modelar um operador de consulta personalizada e, portanto, estender a linguagem de consulta principal da API do DocumentDB.</span><span class="sxs-lookup"><span data-stu-id="dd930-147">UDFs enable you to model a custom query operator and thereby extend the core DocumentDB API query language.</span></span> |
| <span data-ttu-id="dd930-148">Documento</span><span class="sxs-lookup"><span data-stu-id="dd930-148">Document</span></span> |<span data-ttu-id="dd930-149">Conteúdo JSON (arbitrário) definido pelo usuário.</span><span class="sxs-lookup"><span data-stu-id="dd930-149">User defined (arbitrary) JSON content.</span></span> <span data-ttu-id="dd930-150">Por padrão, nenhum esquema precisa ser definido e nenhum índice secundário precisa ser fornecido a todos os documentos adicionados a uma coleção.</span><span class="sxs-lookup"><span data-stu-id="dd930-150">By default, no schema needs to be defined nor do secondary indices need to be provided for all the documents added to a collection.</span></span> |
| <span data-ttu-id="dd930-151">Anexo</span><span class="sxs-lookup"><span data-stu-id="dd930-151">Attachment</span></span> |<span data-ttu-id="dd930-152">Um anexo é um documento especial que contém referências e metadados associados a blobs/mídias externos.</span><span class="sxs-lookup"><span data-stu-id="dd930-152">An attachment is a special document containing references and associated metadata for external blob/media.</span></span> <span data-ttu-id="dd930-153">O desenvolvedor pode optar por ter o blob gerenciado pelo Cosmos DB ou armazená-lo em um provedor de serviços blob externo, como OneDrive, Dropbox, etc.</span><span class="sxs-lookup"><span data-stu-id="dd930-153">The developer can choose to have the blob managed by Cosmos DB or store it with an external blob service provider such as OneDrive, Dropbox, etc.</span></span> |

## <a name="system-vs-user-defined-resources"></a><span data-ttu-id="dd930-154">Recursos definidos pelo sistema versus usuário</span><span class="sxs-lookup"><span data-stu-id="dd930-154">System vs. user defined resources</span></span>
<span data-ttu-id="dd930-155">Recursos como contas do banco de dados, bancos de dados, coleções, usuários, permissões, procedimentos armazenados, gatilhos e UDFs, todos possuem um esquema fixo e são chamados de recursos do sistema.</span><span class="sxs-lookup"><span data-stu-id="dd930-155">Resources such as database accounts, databases, collections, users, permissions, stored procedures, triggers, and UDFs - all have a fixed schema and are called system resources.</span></span> <span data-ttu-id="dd930-156">Em contraste, recursos como documentos e anexos não possuem restrições sobre o esquema e são exemplos de recursos definidos pelo usuário.</span><span class="sxs-lookup"><span data-stu-id="dd930-156">In contrast, resources such as documents and attachments have no restrictions on the schema and are examples of user defined resources.</span></span> <span data-ttu-id="dd930-157">No Cosmos DB, ambos os recursos definidos pelo sistema e pelo usuário são representados e gerenciados como JSON em conformidade com o padrão.</span><span class="sxs-lookup"><span data-stu-id="dd930-157">In Cosmos DB, both system and user defined resources are represented and managed as standard-compliant JSON.</span></span> <span data-ttu-id="dd930-158">Todos os recursos, definidos pelo usuário ou pelo sistema, possuem as seguintes propriedades em comum.</span><span class="sxs-lookup"><span data-stu-id="dd930-158">All resources, system or user defined, have the following common properties.</span></span>

> [!NOTE]
> <span data-ttu-id="dd930-159">Observe que todas as propriedades geradas pelo sistema em um recurso têm como prefixo um sublinhado (_) na sua representação JSON.</span><span class="sxs-lookup"><span data-stu-id="dd930-159">Note that all system generated properties in a resource are prefixed with an underscore (_) in their JSON representation.</span></span>
> 
> 

<table>
    <tbody>
        <tr>
            <td valign="top"><p><span data-ttu-id="dd930-160"><strong>Propriedade</strong></span><span class="sxs-lookup"><span data-stu-id="dd930-160"><strong>Property</strong></span></span></p></td>
            <td valign="top"><p><span data-ttu-id="dd930-161"><strong>Configurável pelo usuário ou gerada pelo sistema?</strong></span><span class="sxs-lookup"><span data-stu-id="dd930-161"><strong>User settable or system generated?</strong></span></span></p></td>
            <td valign="top"><p><span data-ttu-id="dd930-162"><strong>Finalidade</strong></span><span class="sxs-lookup"><span data-stu-id="dd930-162"><strong>Purpose</strong></span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="dd930-163">_rid</span><span class="sxs-lookup"><span data-stu-id="dd930-163">_rid</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="dd930-164">Gerada pelo sistema</span><span class="sxs-lookup"><span data-stu-id="dd930-164">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="dd930-165">Identificador hierárquico e exclusivo do recurso, gerado pelo sistema</span><span class="sxs-lookup"><span data-stu-id="dd930-165">System generated, unique and hierarchical identifier of the resource</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="dd930-166">_etag</span><span class="sxs-lookup"><span data-stu-id="dd930-166">_etag</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="dd930-167">Gerada pelo sistema</span><span class="sxs-lookup"><span data-stu-id="dd930-167">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="dd930-168">etag do recurso necessário para controle de concorrência otimista</span><span class="sxs-lookup"><span data-stu-id="dd930-168">etag of the resource required for optimistic concurrency control</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="dd930-169">_ts</span><span class="sxs-lookup"><span data-stu-id="dd930-169">_ts</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="dd930-170">Gerada pelo sistema</span><span class="sxs-lookup"><span data-stu-id="dd930-170">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="dd930-171">Último carimbo de data/hora atualizado do recurso</span><span class="sxs-lookup"><span data-stu-id="dd930-171">Last updated timestamp of the resource</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="dd930-172">_self</span><span class="sxs-lookup"><span data-stu-id="dd930-172">_self</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="dd930-173">Gerada pelo sistema</span><span class="sxs-lookup"><span data-stu-id="dd930-173">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="dd930-174">URI endereçável exclusivo do recurso</span><span class="sxs-lookup"><span data-stu-id="dd930-174">Unique addressable URI of the resource</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="dd930-175">ID</span><span class="sxs-lookup"><span data-stu-id="dd930-175">id</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="dd930-176">Gerada pelo sistema</span><span class="sxs-lookup"><span data-stu-id="dd930-176">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="dd930-177">Nome exclusivo definido pelo usuário para o recurso (com o mesmo valor de chave de partição).</span><span class="sxs-lookup"><span data-stu-id="dd930-177">User defined unique name of the resource (with the same partition key value).</span></span> <span data-ttu-id="dd930-178">Se o usuário não especificar uma id, uma id será gerada pelo sistema</span><span class="sxs-lookup"><span data-stu-id="dd930-178">If the user does not specify an id, an id will be system generated</span></span></p></td>
        </tr>
    </tbody>
</table>

### <a name="wire-representation-of-resources"></a><span data-ttu-id="dd930-179">Representação da conexão dos recursos</span><span class="sxs-lookup"><span data-stu-id="dd930-179">Wire representation of resources</span></span>
<span data-ttu-id="dd930-180">O Cosmos DB não exige nenhuma extensão proprietária no padrão JSON nem codificações especiais; ele trabalha com documentos JSON em conformidade com o padrão.</span><span class="sxs-lookup"><span data-stu-id="dd930-180">Cosmos DB does not mandate any proprietary extensions to the JSON standard or special encodings; it works with standard compliant JSON documents.</span></span>  

### <a name="addressing-a-resource"></a><span data-ttu-id="dd930-181">Endereçamento de um recurso</span><span class="sxs-lookup"><span data-stu-id="dd930-181">Addressing a resource</span></span>
<span data-ttu-id="dd930-182">Todos os recursos são endereçáveis pelo URI.</span><span class="sxs-lookup"><span data-stu-id="dd930-182">All resources are URI addressable.</span></span> <span data-ttu-id="dd930-183">O valor da propriedade **_self** de um recurso representa o URI relativo do recurso.</span><span class="sxs-lookup"><span data-stu-id="dd930-183">The value of the **_self** property of a resource represents the relative URI of the resource.</span></span> <span data-ttu-id="dd930-184">O formato do URI consiste nos segmentos do caminho /\<feed\>/{_rid}:</span><span class="sxs-lookup"><span data-stu-id="dd930-184">The format of the URI consists of the /\<feed\>/{_rid} path segments:</span></span>  

| <span data-ttu-id="dd930-185">Valor de _self</span><span class="sxs-lookup"><span data-stu-id="dd930-185">Value of the _self</span></span> | <span data-ttu-id="dd930-186">Descrição</span><span class="sxs-lookup"><span data-stu-id="dd930-186">Description</span></span> |
| --- | --- |
| <span data-ttu-id="dd930-187">/dbs</span><span class="sxs-lookup"><span data-stu-id="dd930-187">/dbs</span></span> |<span data-ttu-id="dd930-188">Feed de bancos de dados em uma conta de banco de dados</span><span class="sxs-lookup"><span data-stu-id="dd930-188">Feed of databases under a database account</span></span> |
| <span data-ttu-id="dd930-189">/dbs/{dbName}</span><span class="sxs-lookup"><span data-stu-id="dd930-189">/dbs/{dbName}</span></span> |<span data-ttu-id="dd930-190">Banco de dados com uma ID correspondente ao valor {dbName}</span><span class="sxs-lookup"><span data-stu-id="dd930-190">Database with an id matching the value {dbName}</span></span> |
| <span data-ttu-id="dd930-191">/dbs/{dbName}/colls/</span><span class="sxs-lookup"><span data-stu-id="dd930-191">/dbs/{dbName}/colls/</span></span> |<span data-ttu-id="dd930-192">Feed de coleções em um banco de dados</span><span class="sxs-lookup"><span data-stu-id="dd930-192">Feed of collections under a database</span></span> |
| <span data-ttu-id="dd930-193">/dbs/{dbName}/colls/{collName}</span><span class="sxs-lookup"><span data-stu-id="dd930-193">/dbs/{dbName}/colls/{collName}</span></span> |<span data-ttu-id="dd930-194">Coleção com uma ID correspondente ao valor de {collName}</span><span class="sxs-lookup"><span data-stu-id="dd930-194">Collection with an id matching the value {collName}</span></span> |
| <span data-ttu-id="dd930-195">/dbs/{dbName}/colls/{collName}/docs</span><span class="sxs-lookup"><span data-stu-id="dd930-195">/dbs/{dbName}/colls/{collName}/docs</span></span> |<span data-ttu-id="dd930-196">Feed de documentos em uma coleção</span><span class="sxs-lookup"><span data-stu-id="dd930-196">Feed of documents under a collection</span></span> |
| <span data-ttu-id="dd930-197">/dbs/{dbName}/colls/{collName}/docs/{docId}</span><span class="sxs-lookup"><span data-stu-id="dd930-197">/dbs/{dbName}/colls/{collName}/docs/{docId}</span></span> |<span data-ttu-id="dd930-198">Documento com uma ID correspondente ao valor {doc}</span><span class="sxs-lookup"><span data-stu-id="dd930-198">Document with an id matching the value {doc}</span></span> |
| <span data-ttu-id="dd930-199">/dbs/{dbName}/users/</span><span class="sxs-lookup"><span data-stu-id="dd930-199">/dbs/{dbName}/users/</span></span> |<span data-ttu-id="dd930-200">Feed de usuários em um banco de dados</span><span class="sxs-lookup"><span data-stu-id="dd930-200">Feed of users under a database</span></span> |
| <span data-ttu-id="dd930-201">/dbs/{dbName}/users/{userId}</span><span class="sxs-lookup"><span data-stu-id="dd930-201">/dbs/{dbName}/users/{userId}</span></span> |<span data-ttu-id="dd930-202">Usuário com uma ID correspondente ao valor {user}</span><span class="sxs-lookup"><span data-stu-id="dd930-202">User with an id matching the value {user}</span></span> |
| <span data-ttu-id="dd930-203">/dbs/{dbName}/users/{userId}/permissions</span><span class="sxs-lookup"><span data-stu-id="dd930-203">/dbs/{dbName}/users/{userId}/permissions</span></span> |<span data-ttu-id="dd930-204">Feed de permissões em um usuário</span><span class="sxs-lookup"><span data-stu-id="dd930-204">Feed of permissions under a user</span></span> |
| <span data-ttu-id="dd930-205">/dbs/{dbName}/users/{userId}/permissions/{permissionId}</span><span class="sxs-lookup"><span data-stu-id="dd930-205">/dbs/{dbName}/users/{userId}/permissions/{permissionId}</span></span> |<span data-ttu-id="dd930-206">Permissão com uma ID correspondente ao valor {permission}</span><span class="sxs-lookup"><span data-stu-id="dd930-206">Permission with an id matching the value {permission}</span></span> |

<span data-ttu-id="dd930-207">Cada recurso tem um nome de usuário exclusivo definido exposto por meio da propriedade id.</span><span class="sxs-lookup"><span data-stu-id="dd930-207">Each resource has a unique user defined name exposed via the id property.</span></span> <span data-ttu-id="dd930-208">Observação: para documentos, se o usuário não especificar uma id, os SDKs com suporte gerarão automaticamente uma id exclusiva para o documento.</span><span class="sxs-lookup"><span data-stu-id="dd930-208">Note: for documents, if the user does not specify an id, our supported SDKs will automatically generate a unique id for the document.</span></span> <span data-ttu-id="dd930-209">A ID é uma cadeia de caracteres definida pelo usuário, com até 256 caracteres e exclusiva no contexto de um recurso pai específico.</span><span class="sxs-lookup"><span data-stu-id="dd930-209">The id is a user defined string, of up to 256 characters that is unique within the context of a specific parent resource.</span></span> 

<span data-ttu-id="dd930-210">Cada recurso também tem um identificador de recurso hierárquico gerado pelo sistema (também chamado de RID), que é disponibilizado pela propriedade _rid.</span><span class="sxs-lookup"><span data-stu-id="dd930-210">Each resource also has a system generated hierarchical resource identifier (also referred to as an RID), which is available via the _rid property.</span></span> <span data-ttu-id="dd930-211">O RID codifica a hierarquia inteira de um determinado recurso, sendo uma representação interna conveniente usada para impor integridade referencial de maneira distribuída.</span><span class="sxs-lookup"><span data-stu-id="dd930-211">The RID encodes the entire hierarchy of a given resource and it is a convenient internal representation used to enforce referential integrity in a distributed manner.</span></span> <span data-ttu-id="dd930-212">O RID é exclusivo em uma conta de banco de dados e é usado internamente pelo Cosmos DB para o roteamento eficiente, sem a necessidade de pesquisas entre partições.</span><span class="sxs-lookup"><span data-stu-id="dd930-212">The RID is unique within a database account and it is internally used by Cosmos DB for efficient routing without requiring cross partition lookups.</span></span> <span data-ttu-id="dd930-213">Os valores das propriedades _self e _rid são representações alternativas e canônicas de um recurso.</span><span class="sxs-lookup"><span data-stu-id="dd930-213">The values of the _self and the  _rid properties are both alternate and canonical representations of a resource.</span></span> 

<span data-ttu-id="dd930-214">As APIs REST têm suporte para manipular recursos e endereçamento de solicitações pelas propriedades de id e _rid.</span><span class="sxs-lookup"><span data-stu-id="dd930-214">The REST APIs support addressing of resources and routing of requests by both the id and the _rid properties.</span></span>

## <a name="database-accounts"></a><span data-ttu-id="dd930-215">Contas de banco de dados</span><span class="sxs-lookup"><span data-stu-id="dd930-215">Database accounts</span></span>
<span data-ttu-id="dd930-216">É possível provisionar uma ou mais contas de bancos de dados do Cosmos DB usando sua assinatura do Azure.</span><span class="sxs-lookup"><span data-stu-id="dd930-216">You can provision one or more Cosmos DB database accounts using your Azure subscription.</span></span>

<span data-ttu-id="dd930-217">Você pode criar e gerenciar contas de bancos de dados do Cosmos DB por meio do Portal do Azure em [http://portal.azure.com/](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="dd930-217">You can create and manage Cosmos DB database accounts via the Azure Portal at [http://portal.azure.com/](https://portal.azure.com/).</span></span> <span data-ttu-id="dd930-218">Criar e gerenciar uma conta do banco de dados requer acesso administrativo e pode ser feito somente com sua assinatura do Azure.</span><span class="sxs-lookup"><span data-stu-id="dd930-218">Creating and managing a database account requires administrative access and can only be performed under your Azure subscription.</span></span> 

### <a name="database-account-properties"></a><span data-ttu-id="dd930-219">Propriedades de contas de banco de dados</span><span class="sxs-lookup"><span data-stu-id="dd930-219">Database account properties</span></span>
<span data-ttu-id="dd930-220">Como parte do provisionamento e gerenciamento de uma conta do banco de dados, você pode configurar e ler as seguintes propriedades:</span><span class="sxs-lookup"><span data-stu-id="dd930-220">As part of provisioning and managing a database account you can configure and read the following properties:</span></span>  

<table border="0" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td valign="top"><p><span data-ttu-id="dd930-221"><strong>Nome da Propriedade</strong></span><span class="sxs-lookup"><span data-stu-id="dd930-221"><strong>Property Name</strong></span></span></p></td>
            <td valign="top"><p><span data-ttu-id="dd930-222"><strong>Descrição</strong></span><span class="sxs-lookup"><span data-stu-id="dd930-222"><strong>Description</strong></span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="dd930-223">Política de Consistência</span><span class="sxs-lookup"><span data-stu-id="dd930-223">Consistency Policy</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="dd930-224">Defina essa propriedade para configurar o nível de consistência padrão para todas as coleções em sua conta do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="dd930-224">Set this property to configure the default consistency level for all the collections under your database account.</span></span> <span data-ttu-id="dd930-225">Você pode substituir o nível de consistência com base na solicitação usando o cabeçalho de solicitação [x-ms-consistency-level].</span><span class="sxs-lookup"><span data-stu-id="dd930-225">You can override the consistency level on a per request basis using the [x-ms-consistency-level] request header.</span></span> <p><p><span data-ttu-id="dd930-226">Observe que essa propriedade somente se aplica aos <i>recursos definidos pelo usuário</i>.</span><span class="sxs-lookup"><span data-stu-id="dd930-226">Note that this property only applies to the <i>user defined resources</i>.</span></span> <span data-ttu-id="dd930-227">Todos os recursos definidos pelo sistema são configurados para oferecer suporte a leituras/consultas com uma forte consistência.</span><span class="sxs-lookup"><span data-stu-id="dd930-227">All system defined resources are configured to support reads/queries with strong consistency.</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="dd930-228">Chaves de autorização</span><span class="sxs-lookup"><span data-stu-id="dd930-228">Authorization Keys</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="dd930-229">Essas são as chaves primária e secundária principal e somente leitura que dão acesso administrativo a todos os recursos na conta de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="dd930-229">These are the primary and secondary master and readonly keys that provide administrative access to all of the resources under the database account.</span></span></p></td>
        </tr>
    </tbody>
</table>

<span data-ttu-id="dd930-230">Observe que, além de provisionar, configurar e gerenciar sua conta de banco de dados no Portal do Azure, também é possível criar e gerenciar de forma programática contas de bancos de dados do Cosmos DB usando as [APIs REST do Azure Cosmos DB](/rest/api/documentdb/) e os [SDKs do cliente](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="dd930-230">Note that in addition to provisioning, configuring and managing your database account from the Azure Portal, you can also programmatically create and manage Cosmos DB database accounts by using the [Azure Cosmos DB REST APIs](/rest/api/documentdb/) as well as [client SDKs](documentdb-sdk-dotnet.md).</span></span>  

## <a name="databases"></a><span data-ttu-id="dd930-231">Bancos de dados</span><span class="sxs-lookup"><span data-stu-id="dd930-231">Databases</span></span>
<span data-ttu-id="dd930-232">Um banco de dados do Cosmos DB é um contêiner lógico de uma ou mais coleções e usuários, conforme mostrado no diagrama a seguir.</span><span class="sxs-lookup"><span data-stu-id="dd930-232">A Cosmos DB database is a logical container of one or more collections and users, as shown in the following diagram.</span></span> <span data-ttu-id="dd930-233">Você pode criar qualquer quantidade de bancos de dados em uma conta de banco de dados do Cosmos DB, sujeito aos limites da oferta.</span><span class="sxs-lookup"><span data-stu-id="dd930-233">You can create any number of databases under a Cosmos DB database account subject to offer limits.</span></span>  

<span data-ttu-id="dd930-234">![Modelo hierárquico de coleções e conta de banco de dados][2]</span><span class="sxs-lookup"><span data-stu-id="dd930-234">![Database account and collections hierarchical model][2]</span></span>  
<span data-ttu-id="dd930-235">**Um banco de dados é um contêiner lógico de usuários e coleções**</span><span class="sxs-lookup"><span data-stu-id="dd930-235">**A Database is a logical container of users and collections**</span></span>

<span data-ttu-id="dd930-236">Um banco de dados pode conter armazenamento de documentos praticamente ilimitado dividido nas coleções.</span><span class="sxs-lookup"><span data-stu-id="dd930-236">A database can contain virtually unlimited document storage partitioned within collections.</span></span>

### <a name="elastic-scale-of-a-cosmos-db-database"></a><span data-ttu-id="dd930-237">Escala elástica de um banco de dados do Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="dd930-237">Elastic scale of a Cosmos DB database</span></span>
<span data-ttu-id="dd930-238">Um banco de dados do Cosmos DB é elástico por padrão – variando de alguns GB a petabytes de armazenamento de documentos com suporte de SSD e produtividade provisionada.</span><span class="sxs-lookup"><span data-stu-id="dd930-238">A Cosmos DB database is elastic by default – ranging from a few GB to petabytes of SSD backed document storage and provisioned throughput.</span></span> 

<span data-ttu-id="dd930-239">Ao contrário de um banco de dados em um RDBMS tradicional, um banco de dados do Cosmos DB não tem o escopo definido para um único computador.</span><span class="sxs-lookup"><span data-stu-id="dd930-239">Unlike a database in traditional RDBMS, a database in Cosmos DB is not scoped to a single machine.</span></span> <span data-ttu-id="dd930-240">Com o Cosmos DB, conforme a escala de seu aplicativo precisa ser aumentada, você pode criar mais coleções, bancos de dados ou ambos.</span><span class="sxs-lookup"><span data-stu-id="dd930-240">With Cosmos DB, as your application’s scale needs to grow, you can create more collections, databases, or both.</span></span> <span data-ttu-id="dd930-241">Na verdade, vários aplicativos internos da Microsoft utilizam o Cosmos DB na escala do cliente criando bancos de dados do Cosmos DB extremamente grandes, cada um contendo milhares de coleções com terabytes de armazenamento de documentos.</span><span class="sxs-lookup"><span data-stu-id="dd930-241">Indeed, various first party applications within Microsoft have been using Cosmos DB at a consumer scale by creating extremely large Cosmos DB databases each containing thousands of collections with terabytes of document storage.</span></span> <span data-ttu-id="dd930-242">É possível expandir ou reduzir um banco de dados adicionando ou removendo coleções para atender os requisitos de escada do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="dd930-242">You can grow or shrink a database by adding or removing collections to meet your application’s scale requirements.</span></span> 

<span data-ttu-id="dd930-243">Você pode criar qualquer número de coleções dentro de um banco de dados sujeito à oferta.</span><span class="sxs-lookup"><span data-stu-id="dd930-243">You can create any number of collections within a database subject to the offer.</span></span> <span data-ttu-id="dd930-244">Cada coleção tem armazenamento com SSD e taxa de transferência provisionada para você, dependendo do nível de desempenho selecionado.</span><span class="sxs-lookup"><span data-stu-id="dd930-244">Each collection has SSD backed storage and throughput provisioned for you depending on the selected performance tier.</span></span>

<span data-ttu-id="dd930-245">Um banco de dados do Cosmos DB também é um contêiner de usuários.</span><span class="sxs-lookup"><span data-stu-id="dd930-245">A Cosmos DB database is also a container of users.</span></span> <span data-ttu-id="dd930-246">Um usuário, por sua vez, é um namespace lógico para um conjunto de permissões que oferece autorização e acesso refinado a coleções, documentos e anexos.</span><span class="sxs-lookup"><span data-stu-id="dd930-246">A user, in-turn, is a logical namespace for a set of permissions that provides fine-grained authorization and access to collections, documents and attachments.</span></span>  

<span data-ttu-id="dd930-247">Assim como ocorre com outros recursos do modelo de recurso do Cosmos DB, os bancos de dados podem ser criados, substituídos, excluídos, lidos ou enumerados facilmente usando as [APIs REST](/rest/api/documentdb/) ou um dos [SDKs do cliente](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="dd930-247">As with other resources in the Cosmos DB resource model, databases can be created, replaced, deleted, read or enumerated easily using either the [REST APIs](/rest/api/documentdb/) or any of the [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="dd930-248">O Cosmos DB garante uma coerência forte para leitura ou consulta dos metadados de um recurso do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="dd930-248">Cosmos DB guarantees strong consistency for reading or querying the metadata of a database resource.</span></span> <span data-ttu-id="dd930-249">Excluir um banco de dados automaticamente garante que você não possa acessar qualquer uma das coleções ou usuários contidos nele.</span><span class="sxs-lookup"><span data-stu-id="dd930-249">Deleting a database automatically ensures that you cannot access any of the collections or users contained within it.</span></span>   

## <a name="collections"></a><span data-ttu-id="dd930-250">Coleções</span><span class="sxs-lookup"><span data-stu-id="dd930-250">Collections</span></span>
<span data-ttu-id="dd930-251">Uma coleção do Cosmos DB é um contêiner de seus documentos JSON.</span><span class="sxs-lookup"><span data-stu-id="dd930-251">A Cosmos DB collection is a container for your JSON documents.</span></span> 

### <a name="elastic-ssd-backed-document-storage"></a><span data-ttu-id="dd930-252">Armazenamento de documentos com suporte de SSD elástico</span><span class="sxs-lookup"><span data-stu-id="dd930-252">Elastic SSD backed document storage</span></span>
<span data-ttu-id="dd930-253">Uma coleção é intrinsicamente elástica; ela cresce e é reduzida automaticamente conforme você adiciona ou remove documentos.</span><span class="sxs-lookup"><span data-stu-id="dd930-253">A collection is intrinsically elastic - it automatically grows and shrinks as you add or remove documents.</span></span> <span data-ttu-id="dd930-254">Coleções são recursos lógicos e podem abranger um ou mais servidores ou partições físicas.</span><span class="sxs-lookup"><span data-stu-id="dd930-254">Collections are logical resources and can span one or more physical partitions or servers.</span></span> <span data-ttu-id="dd930-255">O número de partições em uma coleção é determinado pelo Cosmos DB com base no tamanho do armazenamento e na produtividade provisionada da coleção.</span><span class="sxs-lookup"><span data-stu-id="dd930-255">The number of partitions within a collection is determined by Cosmos DB based on the storage size and the provisioned throughput of your collection.</span></span> <span data-ttu-id="dd930-256">Cada partição no DB Cosmos tem uma quantidade fixa de armazenamento com suporte de SSD associado a ela e é replicada para alta disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="dd930-256">Every partition in Cosmos DB has a fixed amount of SSD-backed storage associated with it, and is replicated for high availability.</span></span> <span data-ttu-id="dd930-257">O gerenciamento de partição é totalmente gerenciado pelo DB Cosmos do Azure e você não precisa escrever um código complexo ou gerenciar suas partições.</span><span class="sxs-lookup"><span data-stu-id="dd930-257">Partition management is fully managed by Azure Cosmos DB, and you do not have to write complex code or manage your partitions.</span></span> <span data-ttu-id="dd930-258">As coleções do Cosmos DB são **praticamente ilimitadas** em termos de armazenamento e produtividade.</span><span class="sxs-lookup"><span data-stu-id="dd930-258">Cosmos DB collections are **practically unlimited** in terms of storage and throughput.</span></span> 

### <a name="automatic-indexing-of-collections"></a><span data-ttu-id="dd930-259">Indexação automática de coleções</span><span class="sxs-lookup"><span data-stu-id="dd930-259">Automatic indexing of collections</span></span>
<span data-ttu-id="dd930-260">O Cosmos DB é um verdadeiro sistema de banco de dados sem esquemas.</span><span class="sxs-lookup"><span data-stu-id="dd930-260">Cosmos DB is a true schema-free database system.</span></span> <span data-ttu-id="dd930-261">Ele não assume nem requer qualquer esquema para os documentos JSON.</span><span class="sxs-lookup"><span data-stu-id="dd930-261">It does not assume or require any schema for the JSON documents.</span></span> <span data-ttu-id="dd930-262">Conforme você adiciona documentos a uma coleção, o Cosmos DB os indexa automaticamente e eles ficam disponíveis para consulta.</span><span class="sxs-lookup"><span data-stu-id="dd930-262">As you add documents to a collection, Cosmos DB automatically indexes them and they are available for you to query.</span></span> <span data-ttu-id="dd930-263">A indexação automática de documentos sem a necessidade de esquemas ou de índices secundários é uma das principais funcionalidades do Cosmos DB e é habilitada por técnicas de manutenção de índice otimizada para gravação, livre de bloqueios e estruturada para log.</span><span class="sxs-lookup"><span data-stu-id="dd930-263">Automatic indexing of documents without requiring schema or secondary indexes is a key capability of Cosmos DB and is enabled by write-optimized, lock-free and log-structured index maintenance techniques.</span></span> <span data-ttu-id="dd930-264">O Cosmos DB dá suporte a um volume sustentado de gravações extremamente rápidas, ao mesmo tempo que oferece consultas consistentes.</span><span class="sxs-lookup"><span data-stu-id="dd930-264">Cosmos DB supports sustained volume of extremely fast writes while still serving consistent queries.</span></span> <span data-ttu-id="dd930-265">Ambos os armazenamentos de documentos e de índices são usados para calcular o armazenamento consumido por cada coleção.</span><span class="sxs-lookup"><span data-stu-id="dd930-265">Both document and index storage are used to calculate the storage consumed by each collection.</span></span> <span data-ttu-id="dd930-266">Você pode controlar os compromissos de armazenamento e desempenho associados à indexação configurando a política de indexação para uma coleção.</span><span class="sxs-lookup"><span data-stu-id="dd930-266">You can control the storage and performance trade-offs associated with indexing by configuring the indexing policy for a collection.</span></span> 

### <a name="configuring-the-indexing-policy-of-a-collection"></a><span data-ttu-id="dd930-267">Configurando a política de indexação de uma coleção</span><span class="sxs-lookup"><span data-stu-id="dd930-267">Configuring the indexing policy of a collection</span></span>
<span data-ttu-id="dd930-268">A política de indexação de cada coleção permite realizar compromissos de desempenho e armazenamento associados à indexação.</span><span class="sxs-lookup"><span data-stu-id="dd930-268">The indexing policy of each collection allows you to make performance and storage trade-offs associated with indexing.</span></span> <span data-ttu-id="dd930-269">As seguintes opções estão disponíveis como parte da configuração de indexação:</span><span class="sxs-lookup"><span data-stu-id="dd930-269">The following options are available to you as part of indexing configuration:</span></span>  

* <span data-ttu-id="dd930-270">Escolha se a coleção indexa automaticamente todos os documentos ou não.</span><span class="sxs-lookup"><span data-stu-id="dd930-270">Choose whether the collection automatically indexes all of the documents or not.</span></span> <span data-ttu-id="dd930-271">Por padrão, todos os documentos são indexados automaticamente.</span><span class="sxs-lookup"><span data-stu-id="dd930-271">By default, all documents are automatically indexed.</span></span> <span data-ttu-id="dd930-272">Você pode escolher desativar a indexação automática e adicionar seletivamente somente documentos específicos para o índice.</span><span class="sxs-lookup"><span data-stu-id="dd930-272">You can choose to turn off automatic indexing and selectively add only specific documents to the index.</span></span> <span data-ttu-id="dd930-273">Da mesma forma, é possível escolher seletivamente excluir somente documentos específicos.</span><span class="sxs-lookup"><span data-stu-id="dd930-273">Conversely, you can selectively choose to exclude only specific documents.</span></span> <span data-ttu-id="dd930-274">Isso pode ser feito definindo a propriedade automática como verdadeira ou falsa na indexingPolicy de uma coleção e usando o cabeçalho de solicitação [x-ms-indexingdirective] ao inserir, substituir ou excluir um documento.</span><span class="sxs-lookup"><span data-stu-id="dd930-274">You can achieve this by setting the automatic property to be true or false on the indexingPolicy of a collection and using the [x-ms-indexingdirective] request header while inserting, replacing or deleting a document.</span></span>  
* <span data-ttu-id="dd930-275">Escolha se deseja incluir ou excluir caminhos ou padrões específicos em seus documentos do índice.</span><span class="sxs-lookup"><span data-stu-id="dd930-275">Choose whether to include or exclude specific paths or patterns in your documents from the index.</span></span> <span data-ttu-id="dd930-276">Isso pode ser feito definindo includedPaths e excludedPaths na indexingPolicy de uma coleção, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="dd930-276">You can achieve this by setting includedPaths and excludedPaths on the indexingPolicy of a collection respectively.</span></span> <span data-ttu-id="dd930-277">Também é possível configurar os compromissos de armazenamento e desempenho para consultas de intervalo e hash para padrões de caminho específicos.</span><span class="sxs-lookup"><span data-stu-id="dd930-277">You can also configure the storage and performance trade-offs for range and hash queries for specific path patterns.</span></span> 
* <span data-ttu-id="dd930-278">Escolha entre atualizações de índice síncronas (consistentes) e assíncronas (lentas).</span><span class="sxs-lookup"><span data-stu-id="dd930-278">Choose between synchronous (consistent) and asynchronous (lazy) index updates.</span></span> <span data-ttu-id="dd930-279">Por padrão, o índice é atualizado sincronamente em cada inserção, substituição ou exclusão de um documento para a coleção.</span><span class="sxs-lookup"><span data-stu-id="dd930-279">By default, the index is updated synchronously on each insert, replace or delete of a document to the collection.</span></span> <span data-ttu-id="dd930-280">Isso permite que as consultas obedeçam ao mesmo nível de consistência das leituras de documentos.</span><span class="sxs-lookup"><span data-stu-id="dd930-280">This enables the queries to honor the same consistency level as that of the document reads.</span></span> <span data-ttu-id="dd930-281">Embora o Cosmos DB seja otimizado para gravação e dê suporte a volumes sustentados de gravações de documentos, junto com a manutenção síncrona de índice e fornecimento de consultas consistentes, você pode configurar determinadas coleções para atualizar seus índices lentamente.</span><span class="sxs-lookup"><span data-stu-id="dd930-281">While Cosmos DB is write optimized and supports sustained volumes of document writes along with synchronous index maintenance and serving consistent queries, you can configure certain collections to update their index lazily.</span></span> <span data-ttu-id="dd930-282">A indexação lenta aumenta ainda mais o desempenho de gravação, sendo ideal para cenários de ingestão em massa para coleções basicamente de leitura intensa.</span><span class="sxs-lookup"><span data-stu-id="dd930-282">Lazy indexing boosts the write performance further and is ideal for bulk ingestion scenarios for primarily read-heavy collections.</span></span>

<span data-ttu-id="dd930-283">A política de indexação pode ser alterada executando-se um PUT na coleção.</span><span class="sxs-lookup"><span data-stu-id="dd930-283">The indexing policy can be changed by executing a PUT on the collection.</span></span> <span data-ttu-id="dd930-284">Isso pode ser obtido por meio do [SDK de cliente](documentdb-sdk-dotnet.md), do [Portal do Azure](https://portal.azure.com) ou de [APIs REST](/rest/api/documentdb/).</span><span class="sxs-lookup"><span data-stu-id="dd930-284">This can be achieved either through the [client SDK](documentdb-sdk-dotnet.md), the [Azure Portal](https://portal.azure.com) or the [REST APIs](/rest/api/documentdb/).</span></span>

### <a name="querying-a-collection"></a><span data-ttu-id="dd930-285">Consultando uma coleção</span><span class="sxs-lookup"><span data-stu-id="dd930-285">Querying a collection</span></span>
<span data-ttu-id="dd930-286">Os documentos dentro de uma coleção podem ter esquemas arbitrários e os documentos podem ser consultados dentro de uma coleção sem oferecer qualquer esquema ou índices secundários de início.</span><span class="sxs-lookup"><span data-stu-id="dd930-286">The documents within a collection can have arbitrary schemas and you can query documents within a collection without providing any schema or secondary indices upfront.</span></span> <span data-ttu-id="dd930-287">É possível consultar a coleção usando a [API DocumentDB do Azure Cosmos DB: referência de sintaxe SQL](https://msdn.microsoft.com/library/azure/dn782250.aspx), que fornece operadores hierárquicos, relacionais e espaciais avançados, bem como extensibilidade por meio de UDFs baseadas em JavaScript.</span><span class="sxs-lookup"><span data-stu-id="dd930-287">You can query the collection using the [Azure Cosmos DB DocumentDB API: SQL syntax reference](https://msdn.microsoft.com/library/azure/dn782250.aspx), which provides rich hierarchical, relational, and spatial operators and extensibility via JavaScript-based UDFs.</span></span> <span data-ttu-id="dd930-288">A gramática JSON permite modelar documentos JSON como árvores com rótulos como os nós da árvore.</span><span class="sxs-lookup"><span data-stu-id="dd930-288">JSON grammar allows for modeling JSON documents as trees with labels as the tree nodes.</span></span> <span data-ttu-id="dd930-289">Isso é explorado pelas técnicas de indexação automática da API do DocumentDB, bem como pelo dialeto SQL da API do DocumentDB.</span><span class="sxs-lookup"><span data-stu-id="dd930-289">This is exploited both by DocumentDB API’s automatic indexing techniques as well as DocumentDB API's SQL dialect.</span></span> <span data-ttu-id="dd930-290">A linguagem de consulta da API do DocumentDB é formada por três aspectos principais:</span><span class="sxs-lookup"><span data-stu-id="dd930-290">The DocumetDB API query language consists of three main aspects:</span></span>   

1. <span data-ttu-id="dd930-291">Um pequeno conjunto de operações de consulta que é mapeado naturalmente para a estrutura de árvore, incluindo projeções e consultas hierárquicas.</span><span class="sxs-lookup"><span data-stu-id="dd930-291">A small set of query operations that map naturally to the tree structure including hierarchical queries and projections.</span></span> 
2. <span data-ttu-id="dd930-292">Um subconjunto de operações relacionais, incluindo composição, filtragem, projeções, agregados e junções automáticas.</span><span class="sxs-lookup"><span data-stu-id="dd930-292">A subset of relational operations including composition, filter, projections, aggregates and self joins.</span></span> 
3. <span data-ttu-id="dd930-293">UDFs puras baseadas em JavaScript que funcionam com (1) e (2).</span><span class="sxs-lookup"><span data-stu-id="dd930-293">Pure JavaScript based UDFs that work with (1) and (2).</span></span>  

<span data-ttu-id="dd930-294">O modelo de consulta do Cosmos DB tenta criar um equilíbrio entre funcionalidade, eficiência e simplicidade.</span><span class="sxs-lookup"><span data-stu-id="dd930-294">The Cosmos DB query model attempts to strike a balance between functionality, efficiency and simplicity.</span></span> <span data-ttu-id="dd930-295">O mecanismo de banco de dados do Cosmos DB compila nativamente e executa as instruções de consulta SQL.</span><span class="sxs-lookup"><span data-stu-id="dd930-295">The Cosmos DB database engine natively compiles and executes the SQL query statements.</span></span> <span data-ttu-id="dd930-296">Você pode consultar uma coleção usando as [APIs REST](/rest/api/documentdb/) ou um dos [SDKs do cliente](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="dd930-296">You can query a collection using the [REST APIs](/rest/api/documentdb/) or any of the [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="dd930-297">O SDK do .NET é fornecido com o provedor LINQ.</span><span class="sxs-lookup"><span data-stu-id="dd930-297">The .NET SDK comes with a LINQ provider.</span></span>

> [!TIP]
> <span data-ttu-id="dd930-298">Experimente a API do DocumentDB e execute consultas SQL em nosso conjunto de dados no [Espaço de Consulta](https://www.documentdb.com/sql/demo).</span><span class="sxs-lookup"><span data-stu-id="dd930-298">You can try out the DocumentDB API and run SQL queries against our dataset in the [Query Playground](https://www.documentdb.com/sql/demo).</span></span>
> 
> 

## <a name="multi-document-transactions"></a><span data-ttu-id="dd930-299">Transações entre vários documentos</span><span class="sxs-lookup"><span data-stu-id="dd930-299">Multi-document transactions</span></span>
<span data-ttu-id="dd930-300">As transações do banco de dados oferecem um modelo de programação seguro e previsível para lidar com alterações simultâneas aos dados.</span><span class="sxs-lookup"><span data-stu-id="dd930-300">Database transactions provide a safe and predictable programming model for dealing with concurrent changes to the data.</span></span> <span data-ttu-id="dd930-301">No RDBMS, a maneira tradicional de gravar a lógica de negócios é gravar **procedimentos armazenados** e/ou **gatilhos** e enviá-los ao servidor do banco de dados para execução transacional.</span><span class="sxs-lookup"><span data-stu-id="dd930-301">In RDBMS, the traditional way to write business logic is to write **stored-procedures** and/or **triggers** and ship it to the database server for transactional execution.</span></span> <span data-ttu-id="dd930-302">No RDBMS, o programador do aplicativo precisa lidar com duas linguagens de programação diferentes:</span><span class="sxs-lookup"><span data-stu-id="dd930-302">In RDBMS, the application programmer is required to deal with two disparate programming languages:</span></span> 

* <span data-ttu-id="dd930-303">A linguagem de programação (não transacional) do aplicativo (como JavaScript, Python, C#, Java etc.)</span><span class="sxs-lookup"><span data-stu-id="dd930-303">The (non-transactional) application programming language (e.g. JavaScript, Python, C#, Java, etc.)</span></span>
* <span data-ttu-id="dd930-304">T-SQL, a linguagem de programação transacional que é executada nativamente pelo banco de dados</span><span class="sxs-lookup"><span data-stu-id="dd930-304">T-SQL, the transactional programming language which is natively executed by the database</span></span>

<span data-ttu-id="dd930-305">Devido ao seu profundo compromisso com o JavaScript e JSON diretamente no mecanismo de banco de dados, o Cosmos DB oferece um modelo de programação intuitivo para executar a lógica de aplicativos baseados em JavaScript diretamente nas coleções, com relação a procedimentos armazenados e gatilhos.</span><span class="sxs-lookup"><span data-stu-id="dd930-305">By virtue of its deep commitment to JavaScript and JSON directly within the database engine, Cosmos DB provides an intuitive programming model for executing JavaScript based application logic directly on the collections in terms of stored procedures and triggers.</span></span> <span data-ttu-id="dd930-306">Isso permite o seguinte:</span><span class="sxs-lookup"><span data-stu-id="dd930-306">This allows for both of the following:</span></span>

* <span data-ttu-id="dd930-307">Implementação eficaz de controle de simultaneidade, recuperação e indexação automática dos gráficos de objeto JSON diretamente no mecanismo do banco de dados</span><span class="sxs-lookup"><span data-stu-id="dd930-307">Efficient implementation of concurrency control, recovery, automatic indexing of the JSON object graphs directly in the database engine</span></span>
* <span data-ttu-id="dd930-308">Expressar naturalmente o fluxo de controle, escopo de variáveis, atribuição e integração de primitivos de manuseio de exceções com transações de bancos de dados diretamente em termos da linguagem de programação JavaScript</span><span class="sxs-lookup"><span data-stu-id="dd930-308">Naturally expressing control flow, variable scoping, assignment and integration of exception handling primitives with database transactions directly in terms of the JavaScript programming language</span></span>

<span data-ttu-id="dd930-309">A lógica de JavaScript registrada no nível da coleção pode, então, emitir operações do banco de dados nos documentos da coleção determinada.</span><span class="sxs-lookup"><span data-stu-id="dd930-309">The JavaScript logic registered at a collection level can then issue database operations on the documents of the given collection.</span></span> <span data-ttu-id="dd930-310">O Cosmos DB encapsula implicitamente os procedimentos de armazenamento baseados em JavaScript e os gatilhos em transações ACID ambientes com isolamento de instantâneos entre documentos de uma coleção.</span><span class="sxs-lookup"><span data-stu-id="dd930-310">Cosmos DB implicitly wraps the JavaScript based stored procedures and triggers within an ambient ACID transactions with snapshot isolation across documents within a collection.</span></span> <span data-ttu-id="dd930-311">Durante sua execução, se o JavaScript lançar uma exceção, então, toda a transação será abortada.</span><span class="sxs-lookup"><span data-stu-id="dd930-311">During the course of its execution, if the JavaScript throws an exception, then the entire transaction is aborted.</span></span> <span data-ttu-id="dd930-312">O modelo de programação resultante é bastante simples, porém, poderoso.</span><span class="sxs-lookup"><span data-stu-id="dd930-312">The resulting programming model is a very simple yet powerful.</span></span> <span data-ttu-id="dd930-313">Os desenvolvedores de JavaScript obtêm um modelo de programação “durável”, ao mesmo tempo em que utilizam os construtores de linguagem e primitivas de biblioteca com os quais estão familiarizados.</span><span class="sxs-lookup"><span data-stu-id="dd930-313">JavaScript developers get a “durable” programming model while still using their familiar language constructs and library primitives.</span></span>   

<span data-ttu-id="dd930-314">A capacidade de executar JavaScript diretamente dentro do mecanismo do banco de dados no mesmo espaço de endereço que o conjunto de buffer permite uma execução de desempenho e transacional das operações do banco de dados em relação aos documentos de uma coleção.</span><span class="sxs-lookup"><span data-stu-id="dd930-314">The ability to execute JavaScript directly within the database engine in the same address space as the buffer pool enables performant and transactional execution of database operations against the documents of a collection.</span></span> <span data-ttu-id="dd930-315">Além disso, o mecanismo de banco de dados do Cosmos DB assume um forte compromisso com o JSON e o JavaScript elimina qualquer incompatibilidade de impedância entre os sistemas de tipos do aplicativo e do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="dd930-315">Furthermore, Cosmos DB database engine makes a deep commitment to the JSON and JavaScript eliminates any impedance mismatch between the type systems of application and the database.</span></span>   

<span data-ttu-id="dd930-316">Depois de criar uma coleção, você pode registrar os procedimentos armazenados, disparadores e UDFs com uma coleção usando as [APIs REST](/rest/api/documentdb/) ou qualquer um dos [SDKs de cliente](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="dd930-316">After creating a collection, you can register stored procedures, triggers and UDFs with a collection using the [REST APIs](/rest/api/documentdb/) or any of the [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="dd930-317">Após o registro, você pode fazer referência a eles e executá-los.</span><span class="sxs-lookup"><span data-stu-id="dd930-317">After registration, you can reference and execute them.</span></span> <span data-ttu-id="dd930-318">Considere que o seguinte procedimento armazenado gravado inteiramente em JavaScript, o código a seguir pega dois argumentos (nome do livro e nome do autor) e cria um novo documento, consulta um documento e, então, o atualiza; tudo em uma transação ACID implícita.</span><span class="sxs-lookup"><span data-stu-id="dd930-318">Consider the following stored procedure written entirely in JavaScript, the code below takes two arguments (book name and author name) and creates a new document, queries for a document and then updates it – all within an implicit ACID transaction.</span></span> <span data-ttu-id="dd930-319">A qualquer momento durante a execução, se uma exceção de JavaScript for lançada, toda a transação será abortada.</span><span class="sxs-lookup"><span data-stu-id="dd930-319">At any point during the execution, if a JavaScript exception is thrown, the entire transaction aborts.</span></span>

    function businessLogic(name, author) {
        var context = getContext();
        var collectionManager = context.getCollection();        
        var collectionLink = collectionManager.getSelfLink()

        // create a new document.
        collectionManager.createDocument(collectionLink,
            {id: name, author: author},
            function(err, documentCreated) {
                if(err) throw new Error(err.message);

                // filter documents by author
                var filterQuery = "SELECT * from root r WHERE r.author = 'George R.'";
                collectionManager.queryDocuments(collectionLink,
                    filterQuery,
                    function(err, matchingDocuments) {
                        if(err) throw new Error(err.message);

                        context.getResponse().setBody(matchingDocuments.length);

                        // Replace the author name for all documents that satisfied the query.
                        for (var i = 0; i < matchingDocuments.length; i++) {
                            matchingDocuments[i].author = "George R. R. Martin";
                            // we don’t need to execute a callback because they are in parallel
                            collectionManager.replaceDocument(matchingDocuments[i]._self,
                                matchingDocuments[i]);   
                        }
                    })
            })
    };

<span data-ttu-id="dd930-320">O cliente pode “enviar” a lógica de JavaScript acima para o banco de dados para execução transacional por meio do HTTP POST.</span><span class="sxs-lookup"><span data-stu-id="dd930-320">The client can “ship” the above JavaScript logic to the database for transactional execution via HTTP POST.</span></span> <span data-ttu-id="dd930-321">Para obter mais informações sobre como usar métodos HTTP, consulte [Interações RESTful com recursos do Azure Cosmos DB](https://msdn.microsoft.com/library/azure/mt622086.aspx).</span><span class="sxs-lookup"><span data-stu-id="dd930-321">For more information about using HTTP methods, see [RESTful interactions with Azure Cosmos DB resources](https://msdn.microsoft.com/library/azure/mt622086.aspx).</span></span> 

    client.createStoredProcedureAsync(collection._self, {id: "CRUDProc", body: businessLogic})
       .then(function(createdStoredProcedure) {
            return client.executeStoredProcedureAsync(createdStoredProcedure.resource._self,
                "NoSQL Distilled",
                "Martin Fowler");
        })
        .then(function(result) {
            console.log(result);
        },
        function(error) {
            console.log(error);
        });


<span data-ttu-id="dd930-322">Observe que, como o banco de dados compreende nativamente JSON e JavaScript, não há incompatibilidade no sistema de tipos, nem é preciso um “mapeamento OR” ou mágica na geração de códigos.</span><span class="sxs-lookup"><span data-stu-id="dd930-322">Notice that because the database natively understands JSON and JavaScript, there is no type system mismatch, no “OR mapping” or code generation magic required.</span></span>   

<span data-ttu-id="dd930-323">Os procedimentos armazenados e gatilhos interagem com uma coleção e os documentos em uma coleção por meio de um modelo de objeto bem-definido que expõe o contexto de coleção atual.</span><span class="sxs-lookup"><span data-stu-id="dd930-323">Stored procedures and triggers interact with a collection and the documents in a collection through a well-defined object model, which exposes the current collection context.</span></span>  

<span data-ttu-id="dd930-324">As coleções na API do DocumentDB podem ser criadas, excluídas, lidas ou enumeradas facilmente usando as [APIs REST](/rest/api/documentdb/) ou um dos [SDKs do cliente](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="dd930-324">Collections in the DocumentDB API can be created, deleted, read or enumerated easily using either the [REST APIs](/rest/api/documentdb/) or any of the [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="dd930-325">A API do DocumentDB sempre fornece uma coerência forte para leitura ou consulta dos metadados de uma coleção.</span><span class="sxs-lookup"><span data-stu-id="dd930-325">The DocumentDB API always provides strong consistency for reading or querying the metadata of a collection.</span></span> <span data-ttu-id="dd930-326">Excluir uma coleção automaticamente garante que você não possa acessar qualquer documento, anexo, procedimento armazenado, gatilho e UDFs contidos nela.</span><span class="sxs-lookup"><span data-stu-id="dd930-326">Deleting a collection automatically ensures that you cannot access any of the documents, attachments, stored procedures, triggers, and UDFs contained within it.</span></span>   

## <a name="stored-procedures-triggers-and-user-defined-functions-udf"></a><span data-ttu-id="dd930-327">Procedimentos armazenados, gatilhos e UDF (Funções Definidas pelo Usuário)</span><span class="sxs-lookup"><span data-stu-id="dd930-327">Stored procedures, triggers and User Defined Functions (UDF)</span></span>
<span data-ttu-id="dd930-328">Conforme descrito na seção anterior, você pode gravar a lógica do aplicativo para ser executada diretamente de uma transação no mecanismo de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="dd930-328">As described in the previous section, you can write application logic to run directly within a transaction inside of the database engine.</span></span> <span data-ttu-id="dd930-329">A lógica do aplicativo pode ser gravada inteiramente em JavaScript e pode ser modelada como um procedimento armazenado, um gatilho ou uma UDF.</span><span class="sxs-lookup"><span data-stu-id="dd930-329">The application logic can be written entirely in JavaScript and can be modeled as a stored procedure, trigger or a UDF.</span></span> <span data-ttu-id="dd930-330">O código de JavaScript em um procedimento armazenado ou um gatilho pode inserir, substituir, excluir, ler ou consultar documentos dentro de uma coleção.</span><span class="sxs-lookup"><span data-stu-id="dd930-330">The JavaScript code within a stored procedure or a trigger can insert, replace, delete, read or query documents within a collection.</span></span> <span data-ttu-id="dd930-331">Por outro lado, o JavaScript dentro de uma UDF não pode inserir, substituir nem excluir documentos.</span><span class="sxs-lookup"><span data-stu-id="dd930-331">On the other hand, the JavaScript within a UDF cannot insert, replace, or delete documents.</span></span> <span data-ttu-id="dd930-332">UDFs enumeram os documentos do conjunto de resultados de uma consulta e geram outro conjunto de resultados.</span><span class="sxs-lookup"><span data-stu-id="dd930-332">UDFs enumerate the documents of a query's result set and produce another result set.</span></span> <span data-ttu-id="dd930-333">Para multilocatários, o Cosmos DB impõe uma rígida governança de recursos baseada em reserva.</span><span class="sxs-lookup"><span data-stu-id="dd930-333">For multi-tenancy, Cosmos DB enforces a strict reservation based resource governance.</span></span> <span data-ttu-id="dd930-334">Cada procedimento armazenado, gatilho ou UDF obtém um quantum fixo de recursos do sistema operacional para realizar esse trabalho.</span><span class="sxs-lookup"><span data-stu-id="dd930-334">Each stored procedure, trigger or a UDF gets a fixed quantum of operating system resources to do its work.</span></span> <span data-ttu-id="dd930-335">Além disso, os procedimentos armazenados, gatilhos ou UDFs não podem ser vinculados a bibliotecas de JavaScript externas e são incluídos em listas negras se excederem os orçamentos de recursos alocados para eles.</span><span class="sxs-lookup"><span data-stu-id="dd930-335">Furthermore, stored procedures, triggers or UDFs cannot link against external JavaScript libraries and are blacklisted if they exceed the resource budgets allocated to them.</span></span> <span data-ttu-id="dd930-336">Você pode registrar e cancelar o registro de procedimentos armazenados, gatilhos ou UDFs com uma coleção por meio das APIs REST.</span><span class="sxs-lookup"><span data-stu-id="dd930-336">You can register, unregister stored procedures, triggers or UDFs with a collection by using the REST APIs.</span></span>  <span data-ttu-id="dd930-337">Após o registro, um procedimento armazenado, gatilho ou UDF é pré-compilado e armazenado como um código de byte que é executado posteriormente.</span><span class="sxs-lookup"><span data-stu-id="dd930-337">Upon registration a stored procedure, trigger, or a UDF is pre-compiled and stored as byte code which gets executed later.</span></span> <span data-ttu-id="dd930-338">A seção a seguir ilustra como você pode usar o SDK do JavaScript do Cosmos DB para registrar, executar e cancelar o registro de um procedimento armazenado, um gatilho e uma UDF.</span><span class="sxs-lookup"><span data-stu-id="dd930-338">The following section illustrate how you can use the Cosmos DB JavaScript SDK to register, execute, and unregister a stored procedure, trigger, and a UDF.</span></span> <span data-ttu-id="dd930-339">O SDK do JavaScript é um wrapper simples das [APIs REST](/rest/api/documentdb/).</span><span class="sxs-lookup"><span data-stu-id="dd930-339">The JavaScript SDK is a simple wrapper over the [REST APIs](/rest/api/documentdb/).</span></span> 

### <a name="registering-a-stored-procedure"></a><span data-ttu-id="dd930-340">Registrando um procedimento armazenado</span><span class="sxs-lookup"><span data-stu-id="dd930-340">Registering a stored procedure</span></span>
<span data-ttu-id="dd930-341">O registro de um procedimento armazenado cria um novo recurso de procedimento armazenado em uma coleção por meio do HTTP POST.</span><span class="sxs-lookup"><span data-stu-id="dd930-341">Registration of a stored procedure creates a new stored procedure resource on a collection via HTTP POST.</span></span>  

    var storedProc = {
        id: "validateAndCreate",
        body: function (documentToCreate) {
            documentToCreate.id = documentToCreate.id.toUpperCase();

            var collectionManager = getContext().getCollection();
            collectionManager.createDocument(collectionManager.getSelfLink(),
                documentToCreate,
                function(err, documentCreated) {
                    if(err) throw new Error('Error while creating document: ' + err.message;
                    getContext().getResponse().setBody('success - created ' + 
                            documentCreated.name);
                });
        }
    };

    client.createStoredProcedureAsync(collection._self, storedProc)
        .then(function (createdStoredProcedure) {
            console.log("Successfully created stored procedure");
        }, function(error) {
            console.log("Error");
        });

### <a name="executing-a-stored-procedure"></a><span data-ttu-id="dd930-342">Executando um procedimento armazenado</span><span class="sxs-lookup"><span data-stu-id="dd930-342">Executing a stored procedure</span></span>
<span data-ttu-id="dd930-343">A execução de um procedimento armazenado é feita com a emissão de um HTTP POST para um recurso de procedimento armazenado existente, transferindo parâmetros para o procedimento no corpo da solicitação.</span><span class="sxs-lookup"><span data-stu-id="dd930-343">Execution of a stored procedure is done by issuing an HTTP POST against an existing stored procedure resource by passing parameters to the procedure in the request body.</span></span>

    var inputDocument = {id : "document1", author: "G. G. Marquez"};
    client.executeStoredProcedureAsync(createdStoredProcedure.resource._self, inputDocument)
        .then(function(executionResult) {
            assert.equal(executionResult, "success - created DOCUMENT1");
        }, function(error) {
            console.log("Error");
        });

### <a name="unregistering-a-stored-procedure"></a><span data-ttu-id="dd930-344">Cancelando o registro de um procedimento armazenado</span><span class="sxs-lookup"><span data-stu-id="dd930-344">Unregistering a stored procedure</span></span>
<span data-ttu-id="dd930-345">Cancelar o registro de um procedimento armazenado é um processo simples, feito com a emissão de um HTTP DELETE para um recurso do procedimento armazenado existente.</span><span class="sxs-lookup"><span data-stu-id="dd930-345">Unregistering a stored procedure is simply done by issuing an HTTP DELETE against an existing stored procedure resource.</span></span>   

    client.deleteStoredProcedureAsync(createdStoredProcedure.resource._self)
        .then(function (response) {
            return;
        }, function(error) {
            console.log("Error");
        });


### <a name="registering-a-pre-trigger"></a><span data-ttu-id="dd930-346">Registrando um pré-gatilho</span><span class="sxs-lookup"><span data-stu-id="dd930-346">Registering a pre-trigger</span></span>
<span data-ttu-id="dd930-347">O registro de um gatilho é realizado ao criar um novo recurso de gatilho em uma coleção por meio do HTTP POST.</span><span class="sxs-lookup"><span data-stu-id="dd930-347">Registration of a trigger is done by creating a new trigger resource on a collection via HTTP POST.</span></span> <span data-ttu-id="dd930-348">Você pode especificar se o gatilho é um pré ou pós-gatilho e o tipo de operação à qual ele pode ser associado (p. ex., Criar, Substituir, Excluir ou Tudo).</span><span class="sxs-lookup"><span data-stu-id="dd930-348">You can specify if the trigger is a pre or a post trigger and the type of operation it can be associated with (e.g. Create, Replace, Delete, or All).</span></span>   

    var preTrigger = {
        id: "upperCaseId",
        body: function() {
                var item = getContext().getRequest().getBody();
                item.id = item.id.toUpperCase();
                getContext().getRequest().setBody(item);
        },
        triggerType: TriggerType.Pre,
        triggerOperation: TriggerOperation.All
    }

    client.createTriggerAsync(collection._self, preTrigger)
        .then(function (createdPreTrigger) {
            console.log("Successfully created trigger");
        }, function(error) {
            console.log("Error");
        });

### <a name="executing-a-pre-trigger"></a><span data-ttu-id="dd930-349">Executando um pré-gatilho</span><span class="sxs-lookup"><span data-stu-id="dd930-349">Executing a pre-trigger</span></span>
<span data-ttu-id="dd930-350">A execução de um gatilho é realizada especificando o nome de um gatilho existente ao mesmo tempo em que a solicitação POST/PUT/DELETE de um recurso de documento é emitida por meio do cabeçalho de solicitação.</span><span class="sxs-lookup"><span data-stu-id="dd930-350">Execution of a trigger is done by specifying the name of an existing trigger at the time of issuing the POST/PUT/DELETE request of a document resource via the request header.</span></span>  

    client.createDocumentAsync(collection._self, { id: "doc1", key: "Love in the Time of Cholera" }, { preTriggerInclude: "upperCaseId" })
        .then(function(createdDocument) {
            assert.equal(createdDocument.resource.id, "DOC1");
        }, function(error) {
            console.log("Error");
        });

### <a name="unregistering-a-pre-trigger"></a><span data-ttu-id="dd930-351">Cancelando o registro de um pré-gatilho</span><span class="sxs-lookup"><span data-stu-id="dd930-351">Unregistering a pre-trigger</span></span>
<span data-ttu-id="dd930-352">O cancelamento do registro de um gatilho é feito simplesmente ao emitir um comando HTTP DELETE para um recurso de gatilho existente.</span><span class="sxs-lookup"><span data-stu-id="dd930-352">Unregistering a trigger is simply done via issuing an HTTP DELETE against an existing trigger resource.</span></span>  

    client.deleteTriggerAsync(createdPreTrigger._self);
        .then(function(response) {
            return;
        }, function(error) {
            console.log("Error");
        });

### <a name="registering-a-udf"></a><span data-ttu-id="dd930-353">Registrando uma UDF</span><span class="sxs-lookup"><span data-stu-id="dd930-353">Registering a UDF</span></span>
<span data-ttu-id="dd930-354">O registro de uma UDF é realizado ao criar um novo recurso de UDF em uma coleção por meio do HTTP POST.</span><span class="sxs-lookup"><span data-stu-id="dd930-354">Registration of a UDF is done by creating a new UDF resource on a collection via HTTP POST.</span></span>  

    var udf = { 
        id: "mathSqrt",
        body: function(number) {
                return Math.sqrt(number);
        },
    };
    client.createUserDefinedFunctionAsync(collection._self, udf)
        .then(function (createdUdf) {
            console.log("Successfully created stored procedure");
        }, function(error) {
            console.log("Error");
        });

### <a name="executing-a-udf-as-part-of-the-query"></a><span data-ttu-id="dd930-355">Executando uma UDF como parte da consulta</span><span class="sxs-lookup"><span data-stu-id="dd930-355">Executing a UDF as part of the query</span></span>
<span data-ttu-id="dd930-356">Uma UDF pode ser especificada como parte da consulta SQL e é usada como uma maneira de estender a [linguagem de consulta SQL principal para a API do DocumentDB](https://msdn.microsoft.com/library/azure/dn782250.aspx).</span><span class="sxs-lookup"><span data-stu-id="dd930-356">A UDF can be specified as part of the SQL query and is used as a way to extend the core [SQL query language for the DocumentDB API](https://msdn.microsoft.com/library/azure/dn782250.aspx).</span></span>

    var filterQuery = "SELECT udf.mathSqrt(r.Age) AS sqrtAge FROM root r WHERE r.FirstName='John'";
    client.queryDocuments(collection._self, filterQuery).toArrayAsync();
        .then(function(queryResponse) {
            var queryResponseDocuments = queryResponse.feed;
        }, function(error) {
            console.log("Error");
        });

### <a name="unregistering-a-udf"></a><span data-ttu-id="dd930-357">Cancelando o registro de uma UDF</span><span class="sxs-lookup"><span data-stu-id="dd930-357">Unregistering a UDF</span></span>
<span data-ttu-id="dd930-358">O cancelamento do registro de uma UDF é feito simplesmente ao emitir um comando HTTP DELETE para um recurso de UDF existente.</span><span class="sxs-lookup"><span data-stu-id="dd930-358">Unregistering a UDF is simply done by issuing an HTTP DELETE against an existing UDF resource.</span></span>  

    client.deleteUserDefinedFunctionAsync(createdUdf._self)
        .then(function(response) {
            return;
        }, function(error) {
            console.log("Error");
        });

<span data-ttu-id="dd930-359">Embora os trechos acima mostrem o registro (POST), cancelamento do registro (PUT), leitura/lista (GET) e execução (POST) por meio do [SDK do JavaScript](https://github.com/Azure/azure-documentdb-js), você também pode usar as [APIs REST](/rest/api/documentdb/) ou outros [SDKs do cliente](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="dd930-359">Although the snippets above showed the registration (POST), unregistration (PUT), read/list (GET) and execution (POST) via the [JavaScript SDK](https://github.com/Azure/azure-documentdb-js), you can also use the [REST APIs](/rest/api/documentdb/) or other [client SDKs](documentdb-sdk-dotnet.md).</span></span> 

## <a name="documents"></a><span data-ttu-id="dd930-360">Documentos</span><span class="sxs-lookup"><span data-stu-id="dd930-360">Documents</span></span>
<span data-ttu-id="dd930-361">Você pode inserir, substituir, excluir, ler, enumerar e consultar documentos JSON arbitrários em uma coleção.</span><span class="sxs-lookup"><span data-stu-id="dd930-361">You can insert, replace, delete, read, enumerate and query arbitrary JSON documents in a collection.</span></span> <span data-ttu-id="dd930-362">O Cosmos DB não exige nenhum esquema nem índices secundários para dar suporte à consulta em documentos de uma coleção.</span><span class="sxs-lookup"><span data-stu-id="dd930-362">Cosmos DB does not mandate any schema and does not require secondary indexes in order to support querying over documents in a collection.</span></span> <span data-ttu-id="dd930-363">O tamanho máximo de um documento é de 2 MB.</span><span class="sxs-lookup"><span data-stu-id="dd930-363">The maximum size for a document is 2 MB.</span></span>   

<span data-ttu-id="dd930-364">Sendo um serviço de banco de dados verdadeiramente aberto, o Cosmos DB não inverte nenhum tipo de dados especializado (por exemplo, data e hora) nem codificações específicas para documentos JSON.</span><span class="sxs-lookup"><span data-stu-id="dd930-364">Being a truly open database service, Cosmos DB does not invent any specialized data types (e.g. date time) or specific encodings for JSON documents.</span></span> <span data-ttu-id="dd930-365">Observe que o Cosmos DB não exige nenhuma convenção JSON especial para codificar as relações entre vários documentos; a sintaxe SQL do Cosmos DB fornece operadores de consulta hierárquica e relacional muito avançados para consultar e projetar documentos sem nenhuma anotação especial nem a necessidade de codificar relações entre documentos usando propriedades diferenciadas.</span><span class="sxs-lookup"><span data-stu-id="dd930-365">Note that Cosmos DB does not require any special JSON conventions to codify the relationships among various documents; the SQL syntax of Cosmos DB provides very powerful hierarchical and relational query operators to query and project documents without any special annotations or need to codify relationships among documents using distinguished properties.</span></span>  

<span data-ttu-id="dd930-366">Como ocorre com todos os outros recursos, documentos podem ser criados, substituídos, excluídos, lidos, enumerados e consultados facilmente usando APIs REST ou qualquer [SDK cliente](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="dd930-366">As with all other resources, documents can be created, replaced, deleted, read, enumerated and queried easily using either REST APIs or any of the [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="dd930-367">Excluir um documento libera imediatamente a cota correspondente a todos os anexos aninhados.</span><span class="sxs-lookup"><span data-stu-id="dd930-367">Deleting a document instantly frees up the quota corresponding to all of the nested attachments.</span></span> <span data-ttu-id="dd930-368">O nível de consistência de leitura dos documentos segue a política de consistência da conta do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="dd930-368">The read consistency level of documents follows the consistency policy on the database account.</span></span> <span data-ttu-id="dd930-369">Essa política pode ser substituída com base em cada solicitação, dependendo dos requisitos de consistência de dados de seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="dd930-369">This policy can be overridden on a per-request basis depending on data consistency requirements of your application.</span></span> <span data-ttu-id="dd930-370">Ao consultar documentos, a consistência de leitura segue o conjunto do modo de indexação na coleção.</span><span class="sxs-lookup"><span data-stu-id="dd930-370">When querying documents, the read consistency follows the indexing mode set on the collection.</span></span> <span data-ttu-id="dd930-371">Para fins de “consistência”, a política de consistência da conta é seguida.</span><span class="sxs-lookup"><span data-stu-id="dd930-371">For “consistent”, this follows the account’s consistency policy.</span></span> 

## <a name="attachments-and-media"></a><span data-ttu-id="dd930-372">Anexos e mídia</span><span class="sxs-lookup"><span data-stu-id="dd930-372">Attachments and media</span></span>
<span data-ttu-id="dd930-373">O Cosmos DB permite armazenar blobs binários/mídia no Cosmos DB (máximo de 2 GB por conta) ou em seu próprio repositório de mídia remoto.</span><span class="sxs-lookup"><span data-stu-id="dd930-373">Cosmos DB allows you to store binary blobs/media either with Cosmos DB (maximum of 2 GB per account) or to your own remote media store.</span></span> <span data-ttu-id="dd930-374">Ele também permite representar os metadados de uma mídia de acordo com um documento especial chamado anexo.</span><span class="sxs-lookup"><span data-stu-id="dd930-374">It also allows you to represent the metadata of a media in terms of a special document called attachment.</span></span> <span data-ttu-id="dd930-375">Um anexo do Cosmos DB é um documento especial (JSON) que referencia a mídia ou o blob armazenado em outro lugar.</span><span class="sxs-lookup"><span data-stu-id="dd930-375">An attachment in Cosmos DB is a special (JSON) document that references the media/blob stored elsewhere.</span></span> <span data-ttu-id="dd930-376">Um anexo é simplesmente um documento especial que captura os metadados (p. ex., localização, autor etc.) de uma mídia em um armazenamento remoto de mídia.</span><span class="sxs-lookup"><span data-stu-id="dd930-376">An attachment is simply a special document that captures the metadata (e.g. location, author etc.) of a media stored in a remote media storage.</span></span> 

<span data-ttu-id="dd930-377">Considere um aplicativo de leitura social que usa o Cosmos DB para armazenar anotações de tintas e metadados, incluindo comentários, destaques, favoritos, classificações, preferências/não preferências, etc., associados a um livro eletrônico de determinado usuário.</span><span class="sxs-lookup"><span data-stu-id="dd930-377">Consider a social reading application which uses Cosmos DB to store ink annotations, and metadata including comments, highlights, bookmarks, ratings, likes/dislikes etc. associated for an e-book of a given user.</span></span>   

* <span data-ttu-id="dd930-378">O conteúdo do livro em si é armazenado no armazenamento de mídia disponível como parte da conta de banco de dados do Cosmos DB ou de um repositório de mídia remoto.</span><span class="sxs-lookup"><span data-stu-id="dd930-378">The content of the book itself is stored in the media storage either available as part of Cosmos DB database account or a remote media store.</span></span> 
* <span data-ttu-id="dd930-379">Um aplicativo poderá armazenar os metadados de cada usuário como um documento distinto, por exemplo, os metadados de Joe para o book1 são armazenados em um documento cuja referência é /colls/joe/docs/book1.</span><span class="sxs-lookup"><span data-stu-id="dd930-379">An application may store each user’s metadata as a distinct document -- e.g. Joe’s metadata for book1 is stored in a document referenced by /colls/joe/docs/book1.</span></span> 
* <span data-ttu-id="dd930-380">Anexos indicando para as páginas de conteúdo de um determinado livro de um usuário são armazenados no documento correspondente, p. ex., /colls/joe/docs/book1/chapter1, /colls/joe/docs/book1/chapter2, etc.</span><span class="sxs-lookup"><span data-stu-id="dd930-380">Attachments pointing to the content pages of a given book of a user are stored under the corresponding document e.g. /colls/joe/docs/book1/chapter1, /colls/joe/docs/book1/chapter2 etc.</span></span> 

<span data-ttu-id="dd930-381">Observe que os exemplos listados acima utilizam IDs amigáveis para transmitir a hierarquia de recursos.</span><span class="sxs-lookup"><span data-stu-id="dd930-381">Note that the examples listed above use friendly ids to convey the resource hierarchy.</span></span> <span data-ttu-id="dd930-382">Os recursos são acessados por meio das APIs REST usando IDs de recurso exclusivos.</span><span class="sxs-lookup"><span data-stu-id="dd930-382">Resources are accessed via the REST APIs through unique resource ids.</span></span> 

<span data-ttu-id="dd930-383">Para a mídia gerenciada pelo Cosmos DB, a propriedade _media do anexo referenciará a mídia por meio de seu URI.</span><span class="sxs-lookup"><span data-stu-id="dd930-383">For the media that is managed by Cosmos DB, the _media property of the attachment will reference the media by its URI.</span></span> <span data-ttu-id="dd930-384">O Cosmos DB garantirá que a mídia será coletada como lixo quando todas as referências pendentes forem removidas.</span><span class="sxs-lookup"><span data-stu-id="dd930-384">Cosmos DB will ensure to garbage collect the media when all of the outstanding references are dropped.</span></span> <span data-ttu-id="dd930-385">O Cosmos DB gera o anexo automaticamente ao carregar a nova mídia e popula _media para que ela aponte para a mídia recém-adicionada.</span><span class="sxs-lookup"><span data-stu-id="dd930-385">Cosmos DB automatically generates the attachment when you upload the new media and populates the _media to point to the newly added media.</span></span> <span data-ttu-id="dd930-386">Se escolher armazenar a mídia em um armazenamento de blob remoto por conta própria (p. ex., OneDrive, Azure Storage, DropBox, etc.), você ainda poderá usar os anexos para fazer referência à mídia.</span><span class="sxs-lookup"><span data-stu-id="dd930-386">If you choose to store the media in a remote blob store managed by you (e.g. OneDrive, Azure Storage, DropBox etc), you can still use attachments to reference the media.</span></span> <span data-ttu-id="dd930-387">Nesse caso, você criará o anexo por conta própria e preencherá a propriedade its _media.</span><span class="sxs-lookup"><span data-stu-id="dd930-387">In this case, you will create the attachment yourself and populate its _media property.</span></span>   

<span data-ttu-id="dd930-388">Assim como todos os outros recursos, os anexos podem ser criados, substituídos, excluídos, lidos ou enumerados facilmente usando as APIs REST ou qualquer SDK do cliente.</span><span class="sxs-lookup"><span data-stu-id="dd930-388">As with all other resources, attachments can be created, replaced, deleted, read or enumerated easily using either REST APIs or any of the client SDKs.</span></span> <span data-ttu-id="dd930-389">Assim como com os documentos, o nível de consistência de leitura dos anexos segue a política de consistência na conta do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="dd930-389">As with documents, the read consistency level of attachments follows the consistency policy on the database account.</span></span> <span data-ttu-id="dd930-390">Essa política pode ser substituída com base em cada solicitação, dependendo dos requisitos de consistência de dados de seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="dd930-390">This policy can be overridden on a per-request basis depending on data consistency requirements of your application.</span></span> <span data-ttu-id="dd930-391">Ao consultar anexos, a consistência de leitura segue o conjunto do modo de indexação na coleção.</span><span class="sxs-lookup"><span data-stu-id="dd930-391">When querying for attachments, the read consistency follows the indexing mode set on the collection.</span></span> <span data-ttu-id="dd930-392">Para fins de “consistência”, a política de consistência da conta é seguida.</span><span class="sxs-lookup"><span data-stu-id="dd930-392">For “consistent”, this follows the account’s consistency policy.</span></span> 
 

## <a name="users"></a><span data-ttu-id="dd930-393">Usuários</span><span class="sxs-lookup"><span data-stu-id="dd930-393">Users</span></span>
<span data-ttu-id="dd930-394">Um usuário do Cosmos DB representa um namespace lógico para agrupar permissões.</span><span class="sxs-lookup"><span data-stu-id="dd930-394">A Cosmos DB user represents a logical namespace for grouping permissions.</span></span> <span data-ttu-id="dd930-395">Um usuário do Cosmos DB pode corresponder a um usuário em um sistema de gerenciamento de identidades ou uma função de aplicativo predefinida.</span><span class="sxs-lookup"><span data-stu-id="dd930-395">A Cosmos DB user may correspond to a user in an identity management system or a predefined application role.</span></span> <span data-ttu-id="dd930-396">Para o Cosmos DB, um usuário apenas representa uma abstração para agrupar um conjunto de permissões em um banco de dados.</span><span class="sxs-lookup"><span data-stu-id="dd930-396">For Cosmos DB, a user simply represents an abstraction to group a set of permissions under a database.</span></span>   

<span data-ttu-id="dd930-397">Para implementar multilocatários no aplicativo, você pode criar usuários no Cosmos DB que correspondem aos seus usuários reais ou aos locatários de seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="dd930-397">For implementing multi-tenancy in your application, you can create users in Cosmos DB which corresponds to your actual users or the tenants of your application.</span></span> <span data-ttu-id="dd930-398">Você pode, então, criar permissões para um determinado usuário que corresponde ao controle de acesso em várias coleções, documentos, anexos etc.</span><span class="sxs-lookup"><span data-stu-id="dd930-398">You can then create permissions for a given user that correspond to the access control over various collections, documents, attachments, etc.</span></span>   

<span data-ttu-id="dd930-399">Como seus aplicativos precisam ser escalados conforme o crescimento do usuário, você pode adotar várias maneiras de fragmentar seus dados.</span><span class="sxs-lookup"><span data-stu-id="dd930-399">As your applications need to scale with your user growth, you can adopt various ways to shard your data.</span></span> <span data-ttu-id="dd930-400">Você pode modelar seus usuários da seguinte forma:</span><span class="sxs-lookup"><span data-stu-id="dd930-400">You can model each of your users as follows:</span></span>   

* <span data-ttu-id="dd930-401">Cada usuário é mapeado para um banco de dados.</span><span class="sxs-lookup"><span data-stu-id="dd930-401">Each user maps to a database.</span></span>
* <span data-ttu-id="dd930-402">Cada usuário é mapeado para uma coleção.</span><span class="sxs-lookup"><span data-stu-id="dd930-402">Each user maps to a collection.</span></span> 
* <span data-ttu-id="dd930-403">Documentos correspondentes a vários usuários vão para uma coleção dedicada.</span><span class="sxs-lookup"><span data-stu-id="dd930-403">Documents corresponding to multiple users go to a dedicated collection.</span></span> 
* <span data-ttu-id="dd930-404">Documentos correspondentes a vários usuários vão para um conjunto de coleções.</span><span class="sxs-lookup"><span data-stu-id="dd930-404">Documents corresponding to multiple users go to a set of collections.</span></span>   

<span data-ttu-id="dd930-405">Independentemente da estratégia de fragmentação específica escolhida, você pode modelar seus usuários reais como usuários no banco de dados do Cosmos DB e associar permissões refinadas a cada usuário.</span><span class="sxs-lookup"><span data-stu-id="dd930-405">Regardless of the specific sharding strategy you choose, you can model your actual users as users in Cosmos DB database and associate fine grained permissions to each user.</span></span>  

<span data-ttu-id="dd930-406">![Coleções do usuário][3]</span><span class="sxs-lookup"><span data-stu-id="dd930-406">![User collections][3]</span></span>  
<span data-ttu-id="dd930-407">**Estratégias de fragmentação e modelagem de usuários**</span><span class="sxs-lookup"><span data-stu-id="dd930-407">**Sharding strategies and modeling users**</span></span>

<span data-ttu-id="dd930-408">Assim como todos os outros recursos, os usuários do Cosmos DB podem ser criados, substituídos, excluídos, lidos ou enumerados facilmente usando as APIs REST ou um dos SDKs do cliente.</span><span class="sxs-lookup"><span data-stu-id="dd930-408">Like all other resources, users in Cosmos DB can be created, replaced, deleted, read or enumerated easily using either REST APIs or any of the client SDKs.</span></span> <span data-ttu-id="dd930-409">O Cosmos DB sempre fornece uma coerência forte para leitura ou consulta dos metadados de um recurso do usuário.</span><span class="sxs-lookup"><span data-stu-id="dd930-409">Cosmos DB always provides strong consistency for reading or querying the metadata of a user resource.</span></span> <span data-ttu-id="dd930-410">Vale destacar que excluir um usuário automaticamente assegura que você não poderá acessar nenhuma das permissões contidas nele.</span><span class="sxs-lookup"><span data-stu-id="dd930-410">It is worth pointing out that deleting a user automatically ensures that you cannot access any of the permissions contained within it.</span></span> <span data-ttu-id="dd930-411">Embora o Cosmos DB recupere a cota das permissões como parte do usuário excluído em segundo plano, as permissões excluídas estão disponíveis imediatamente mais uma vez para uso.</span><span class="sxs-lookup"><span data-stu-id="dd930-411">Even though the Cosmos DB reclaims the quota of the permissions as part of the deleted user in the background, the deleted permissions is available instantly again for you to use.</span></span>  

## <a name="permissions"></a><span data-ttu-id="dd930-412">Permissões</span><span class="sxs-lookup"><span data-stu-id="dd930-412">Permissions</span></span>
<span data-ttu-id="dd930-413">De uma perspectiva do controle de acesso, recursos como as contas do banco de dados, bancos de dados, usuários e permissão são considerados recursos *administrativos*, uma vez que requerem permissões administrativas.</span><span class="sxs-lookup"><span data-stu-id="dd930-413">From an access control perspective, resources such as database accounts, databases, users and permission are considered *administrative* resources since these require administrative permissions.</span></span> <span data-ttu-id="dd930-414">Por outro lado, recursos que incluem as coleções, documentos, anexos, procedimentos armazenados, gatilhos e UDFs têm seu escopo definido em um determinado banco de dados e são considerados como *recursos do aplicativo*.</span><span class="sxs-lookup"><span data-stu-id="dd930-414">On the other hand, resources including the collections, documents, attachments, stored procedures, triggers, and UDFs are scoped under a given database and considered *application resources*.</span></span> <span data-ttu-id="dd930-415">Correspondente aos dois tipos de recursos e à funções que os acessam (ou seja, o administrador e o usuário), o modelo de autorização define dois tipos de *chaves de acesso*: *chave mestra* e *chave de recurso*.</span><span class="sxs-lookup"><span data-stu-id="dd930-415">Corresponding to the two types of resources and the roles that access them (namely the administrator and user), the authorization model defines two types of *access keys*: *master key* and *resource key*.</span></span> <span data-ttu-id="dd930-416">A chave mestre é uma parte da conta do banco de dados e é fornecida ao desenvolvedor (ou administrador) que está provisionando a conta do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="dd930-416">The master key is a part of the database account and is provided to the developer (or administrator) who is provisioning the database account.</span></span> <span data-ttu-id="dd930-417">Essa chave mestre possui uma semântica do administrador, e ela pode ser usada para autorizar o acesso aos recursos administrativos e do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="dd930-417">This master key has administrator semantics, in that it can be used to authorize access to both administrative and application resources.</span></span> <span data-ttu-id="dd930-418">Em contraste, uma chave de recurso é uma chave de acesso granular que permite o acesso a um recurso de aplicativo *específico*.</span><span class="sxs-lookup"><span data-stu-id="dd930-418">In contrast, a resource key is a granular access key that allows access to a *specific* application resource.</span></span> <span data-ttu-id="dd930-419">Portanto, ela captura a relação entre o usuário de um banco de dados e as permissões que o usuário possui para um recurso específico (p. ex., coleção, documento, anexo, procedimento armazenado, gatilho ou UDF).</span><span class="sxs-lookup"><span data-stu-id="dd930-419">Thus, it captures the relationship between the user of a database and the permissions the user has for a specific resource (e.g. collection, document, attachment, stored procedure, trigger, or UDF).</span></span>   

<span data-ttu-id="dd930-420">A única maneira de obter uma chave de recurso é criar um recurso de permissão em um determinado usuário.</span><span class="sxs-lookup"><span data-stu-id="dd930-420">The only way to obtain a resource key is by creating a permission resource under a given user.</span></span> <span data-ttu-id="dd930-421">Observe que, a fim de criar ou recuperar uma permissão, uma chave mestre deve ser apresentada no cabeçalho de autorização.</span><span class="sxs-lookup"><span data-stu-id="dd930-421">Note that In order to create or retrieve a permission, a master key must be presented in the authorization header.</span></span> <span data-ttu-id="dd930-422">Um recurso de permissão vincula o recurso, seu acesso e o usuário.</span><span class="sxs-lookup"><span data-stu-id="dd930-422">A permission resource ties the resource, its access and the user.</span></span> <span data-ttu-id="dd930-423">Após criar um recurso de permissão, o usuário só precisa apresentar a chave de recurso associada para obter acesso ao recurso relevante.</span><span class="sxs-lookup"><span data-stu-id="dd930-423">After creating a permission resource, the user only needs to present the associated resource key in order to gain access to the relevant resource.</span></span> <span data-ttu-id="dd930-424">Portanto, uma chave de recurso pode ser visualizada como uma representação lógica e compacta do recurso de permissão.</span><span class="sxs-lookup"><span data-stu-id="dd930-424">Hence, a resource key can be viewed as a logical and compact representation of the permission resource.</span></span>  

<span data-ttu-id="dd930-425">Assim como todos os outros recursos, as permissões do Cosmos DB podem ser criadas, substituídas, excluídas, lidas ou enumeradas facilmente usando as APIs REST ou um dos SDKs do cliente.</span><span class="sxs-lookup"><span data-stu-id="dd930-425">As with all other resources, permissions in Cosmos DB can be created, replaced, deleted, read or enumerated easily using either REST APIs or any of the client SDKs.</span></span> <span data-ttu-id="dd930-426">O Cosmos DB sempre fornece uma coerência forte para leitura ou consulta dos metadados de uma permissão.</span><span class="sxs-lookup"><span data-stu-id="dd930-426">Cosmos DB always provides strong consistency for reading or querying the metadata of a permission.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="dd930-427">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="dd930-427">Next steps</span></span>
<span data-ttu-id="dd930-428">Saiba mais sobre como trabalhar com recursos usando comandos HTTP em [Interações RESTful com recursos do Cosmos DB](https://msdn.microsoft.com/library/azure/mt622086.aspx).</span><span class="sxs-lookup"><span data-stu-id="dd930-428">Learn more about working with resources by using HTTP commands in [RESTful interactions with Cosmos DB resources](https://msdn.microsoft.com/library/azure/mt622086.aspx).</span></span>

[1]: media/documentdb-resources/resources1.png
[2]: media/documentdb-resources/resources2.png
[3]: media/documentdb-resources/resources3.png

