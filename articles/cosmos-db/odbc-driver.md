---
title: "Conectar ao Azure Cosmos DB usando ferramentas de análise de BI | Microsoft Docs"
description: "Saiba como usar o driver ODBC do Azure Cosmos DB para criar tabelas e exibições, de forma que os dados normalizados possam ser exibidos no software de BI e análise de dados."
keywords: odbc, driver odbc
services: cosmos-db
author: mimig1
manager: jhubbard
editor: 
documentationcenter: 
ms.assetid: 9967f4e5-4b71-4cd7-8324-221a8c789e6b
ms.service: cosmos-db
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: rest-api
ms.topic: article
ms.date: 05/24/2017
ms.author: mimig
ms.openlocfilehash: 2df792c00b7a789dbefa64bfe0245f1ad73c3faa
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/11/2017
---
# <a name="connect-to-azure-cosmos-db-using-bi-analytics-tools-with-the-odbc-driver"></a><span data-ttu-id="bbd30-104">Conectar ao Azure Cosmos DB usando ferramentas de análise de BI com o driver ODBC</span><span class="sxs-lookup"><span data-stu-id="bbd30-104">Connect to Azure Cosmos DB using BI analytics tools with the ODBC driver</span></span>

<span data-ttu-id="bbd30-105">O driver ODBC do Azure Cosmos DB permite que você se conecte ao Azure Cosmos DB usando ferramentas de análise de BI, como SQL Server Integration Services, Power BI Desktop e Tableau, de forma que você possa analisar e criar visualizações dos dados do Cosmos DB nessas soluções.</span><span class="sxs-lookup"><span data-stu-id="bbd30-105">The Azure Cosmos DB ODBC driver enables you to connect to Azure Cosmos DB using BI analytics tools such as SQL Server Integration Services, Power BI Desktop, and Tableau so that you can analyze and create visualizations of your Azure Cosmos DB data in those solutions.</span></span>

<span data-ttu-id="bbd30-106">O driver ODBC do Azure Cosmos DB está em conformidade com o ODBC 3.8 e dá suporte à sintaxe ANSI SQL-92.</span><span class="sxs-lookup"><span data-stu-id="bbd30-106">The Azure Cosmos DB ODBC driver is ODBC 3.8 compliant and supports ANSI SQL-92 syntax.</span></span> <span data-ttu-id="bbd30-107">O driver oferece recursos avançados para ajudá-lo a renormalizar dados no Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="bbd30-107">The driver offers rich features to help you renormalize data in Azure Cosmos DB.</span></span> <span data-ttu-id="bbd30-108">Usando o driver, você pode representar dados no Azure Cosmos DB como tabelas e exibições.</span><span class="sxs-lookup"><span data-stu-id="bbd30-108">Using the driver, you can represent data in Azure Cosmos DB as tables and views.</span></span> <span data-ttu-id="bbd30-109">O driver permite que você execute operações de SQL em tabelas e exibições incluindo o agrupamento por consultas, inserções, atualizações e exclusões.</span><span class="sxs-lookup"><span data-stu-id="bbd30-109">The driver enables you to perform SQL operations against the tables and views including group by queries, inserts, updates, and deletes.</span></span>

## <a name="why-do-i-need-to-normalize-my-data"></a><span data-ttu-id="bbd30-110">Por que preciso normalizar meus dados?</span><span class="sxs-lookup"><span data-stu-id="bbd30-110">Why do I need to normalize my data?</span></span>
<span data-ttu-id="bbd30-111">O Azure Cosmos DB é um banco de dados sem esquemas e, portanto, permite o desenvolvimento rápido de aplicativos permitindo que aplicativos iterem seu modelo de dados em tempo real e não o limitem a um esquema rígido.</span><span class="sxs-lookup"><span data-stu-id="bbd30-111">Azure Cosmos DB is a schemaless database, so it enables rapid development of apps by enabling applications to iterate their data model on the fly and not confine them to a strict schema.</span></span> <span data-ttu-id="bbd30-112">Um único banco de dados do Azure Cosmos DB pode conter documentos JSON de várias estruturas.</span><span class="sxs-lookup"><span data-stu-id="bbd30-112">A single Azure Cosmos DB database can contain JSON documents of various structures.</span></span> <span data-ttu-id="bbd30-113">Isso é ótimo para o método RAD, mas quando você deseja analisar e criar relatórios de dados usando ferramentas de BI e análise de dados, os dados geralmente precisam ser nivelados e aderir a um esquema específico.</span><span class="sxs-lookup"><span data-stu-id="bbd30-113">This is great for rapid application development, but when you want to analyze and create reports of your data using data analytics and BI tools, the data often needs to be flattened and adhere to a specific schema.</span></span>

<span data-ttu-id="bbd30-114">Esse é o ponto em que o driver ODBC entra.</span><span class="sxs-lookup"><span data-stu-id="bbd30-114">This is where the ODBC driver comes in.</span></span> <span data-ttu-id="bbd30-115">Usando o driver ODBC, agora você pode renormalizar dados no Azure Cosmos DB em tabelas e exibições, atendendo às suas necessidades de relatórios e análise de dados.</span><span class="sxs-lookup"><span data-stu-id="bbd30-115">By using the ODBC driver, you can now renormalized data in Azure Cosmos DB into tables and views fitting to your data analytic and reporting needs.</span></span> <span data-ttu-id="bbd30-116">Os esquemas renormalizados não têm impacto sobre os dados subjacentes e não confinam os desenvolvedores para aderir a eles, eles simplesmente permitem utilizar ferramentas em conformidade com ODBC para acessar os dados.</span><span class="sxs-lookup"><span data-stu-id="bbd30-116">The renormalized schemas have no impact on the underlying data and do not confine developers to adhere to them, they simply enable you to leverage ODBC-compliant tools to access the data.</span></span> <span data-ttu-id="bbd30-117">Agora seu banco de dados do Azure Cosmos DB não será apenas um favorito de sua equipe de desenvolvimento, mas seus analistas de dados vão adorá-lo também.</span><span class="sxs-lookup"><span data-stu-id="bbd30-117">So now your Azure Cosmos DB database will not only be a favorite for your development team, but your data analysts will love it too.</span></span>

<span data-ttu-id="bbd30-118">Vamos começar com o driver ODBC.</span><span class="sxs-lookup"><span data-stu-id="bbd30-118">Now lets get started with the ODBC driver.</span></span>

## <span data-ttu-id="bbd30-119"><a id="install"></a>Etapa 1: Instalar o driver ODBC do Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="bbd30-119"><a id="install"></a>Step 1: Install the Azure Cosmos DB ODBC driver</span></span>

1. <span data-ttu-id="bbd30-120">Baixe os drivers para seu ambiente:</span><span class="sxs-lookup"><span data-stu-id="bbd30-120">Download the drivers for your environment:</span></span>

    * <span data-ttu-id="bbd30-121">[Microsoft Azure Cosmos DB ODBC 64-bit.msi](https://aka.ms/documentdb-odbc-64x64) para Windows de 64 bits</span><span class="sxs-lookup"><span data-stu-id="bbd30-121">[Microsoft Azure Cosmos DB ODBC 64-bit.msi](https://aka.ms/documentdb-odbc-64x64) for 64-bit Windows</span></span>
    * <span data-ttu-id="bbd30-122">[Microsoft Azure Cosmos DB ODBC 32x64-bit.msi](https://aka.ms/documentdb-odbc-32x64) para 32 bits no Windows de 64 bits</span><span class="sxs-lookup"><span data-stu-id="bbd30-122">[Microsoft Azure Cosmos DB ODBC 32x64-bit.msi](https://aka.ms/documentdb-odbc-32x64) for 32-bit on 64-bit Windows</span></span>
    * <span data-ttu-id="bbd30-123">[Microsoft Azure Cosmos DB ODBC 32-bit.msi](https://aka.ms/documentdb-odbc-32x32) para Windows de 32 bits</span><span class="sxs-lookup"><span data-stu-id="bbd30-123">[Microsoft Azure Cosmos DB ODBC 32-bit.msi](https://aka.ms/documentdb-odbc-32x32) for 32-bit Windows</span></span>

    <span data-ttu-id="bbd30-124">Execute o arquivo msi localmente, que inicia o **Assistente de Instalação do Driver ODBC do Microsoft Azure Cosmos DB**.</span><span class="sxs-lookup"><span data-stu-id="bbd30-124">Run the msi file locally, which starts the **Microsoft Azure Cosmos DB ODBC Driver Installation Wizard**.</span></span> 
2. <span data-ttu-id="bbd30-125">Conclua o assistente de instalação usando a entrada padrão para instalar o driver ODBC.</span><span class="sxs-lookup"><span data-stu-id="bbd30-125">Complete the installation wizard using the default input to install the ODBC driver.</span></span>
3. <span data-ttu-id="bbd30-126">Abra o aplicativo **Administrador de Fonte de Dados ODBC** no computador, você pode fazer isso digitando **Fontes de dados ODBC** na caixa de pesquisa do Windows.</span><span class="sxs-lookup"><span data-stu-id="bbd30-126">Open the **ODBC Data source Administrator** app on your computer, you can do this by typing **ODBC Data sources** in the Windows search box.</span></span> 
    <span data-ttu-id="bbd30-127">Confirme se o driver foi instalado clicando na guia **Drivers** e garantindo que o **Driver ODBC do Microsoft Azure Cosmos DB** está listado.</span><span class="sxs-lookup"><span data-stu-id="bbd30-127">You can confirm the driver was installed by clicking the **Drivers** tab and ensuring **Microsoft Azure Cosmos DB ODBC Driver** is listed.</span></span>

    ![Administrador de fonte de dados ODBC do Azure Cosmos DB](./media/odbc-driver/odbc-driver.png)

## <span data-ttu-id="bbd30-129"><a id="connect"></a>Etapa 2: Conectar ao banco de dados do Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="bbd30-129"><a id="connect"></a>Step 2: Connect to your Azure Cosmos DB database</span></span>

1. <span data-ttu-id="bbd30-130">Depois de [Instalar o driver ODBC do Azure Cosmos DB](#install), na janela **Administrador de Fonte de Dados ODBC**, clique em **Adicionar**.</span><span class="sxs-lookup"><span data-stu-id="bbd30-130">After [Installing the Azure Cosmos DB ODBC driver](#install), in the **ODBC Data Source Administrator** window, click **Add**.</span></span> <span data-ttu-id="bbd30-131">Você pode criar um DSN de usuário ou de sistema.</span><span class="sxs-lookup"><span data-stu-id="bbd30-131">You can create a User or System DSN.</span></span> <span data-ttu-id="bbd30-132">Neste exemplo, estamos criando um DSN de usuário.</span><span class="sxs-lookup"><span data-stu-id="bbd30-132">In this example, we are creating a User DSN.</span></span>
2. <span data-ttu-id="bbd30-133">Na janela **Criar Nova Fonte de Dados**, selecione **Driver ODBC do Microsoft Azure Cosmos DB** e clique em **Concluir**.</span><span class="sxs-lookup"><span data-stu-id="bbd30-133">In the **Create New Data Source** window, select **Microsoft Azure Cosmos DB ODBC Driver**, and then click **Finish**.</span></span>
3. <span data-ttu-id="bbd30-134">Na janela **Instalação de SDN do Driver ODBC do Azure Cosmos DB**, preencha o seguinte:</span><span class="sxs-lookup"><span data-stu-id="bbd30-134">In the **Azure Cosmos DB ODBC Driver SDN Setup** window, fill in the following:</span></span> 

    ![Janela Configuração de DSN do Driver ODBC do Azure Cosmos DB](./media/odbc-driver/odbc-driver-dsn-setup.png)
    - <span data-ttu-id="bbd30-136">**Nome da Fonte de Dados**: seu próprio nome amigável para o DSN do ODBC.</span><span class="sxs-lookup"><span data-stu-id="bbd30-136">**Data Source Name**: Your own friendly name for the ODBC DSN.</span></span> <span data-ttu-id="bbd30-137">Esse nome é exclusivo à sua conta do Azure Cosmos DB; portanto, nomeie-a corretamente se você tiver várias contas.</span><span class="sxs-lookup"><span data-stu-id="bbd30-137">This name is unique to your Azure Cosmos DB account, so name it appropriately if you have multiple accounts.</span></span>
    - <span data-ttu-id="bbd30-138">**Descrição**: uma breve descrição da fonte de dados.</span><span class="sxs-lookup"><span data-stu-id="bbd30-138">**Description**: A brief description of the data source.</span></span>
    - <span data-ttu-id="bbd30-139">**Host**: URI de sua conta do Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="bbd30-139">**Host**: URI for your Azure Cosmos DB account.</span></span> <span data-ttu-id="bbd30-140">Você pode recuperá-lo na folha Chaves do Azure Cosmos DB no portal do Azure, conforme mostra a captura de tela a seguir.</span><span class="sxs-lookup"><span data-stu-id="bbd30-140">You can retrieve this from the Azure Cosmos DB Keys blade in the Azure portal, as shown in the following screenshot.</span></span> 
    - <span data-ttu-id="bbd30-141">**Chave de Acesso**: a chave primária ou secundária, somente leitura ou gravação da folha Chaves do Azure Cosmos DB no portal do Azure, conforme mostra a captura de tela a seguir.</span><span class="sxs-lookup"><span data-stu-id="bbd30-141">**Access Key**: The primary or secondary, read-write or read-only key from the Azure Cosmos DB Keys blade in the Azure portal as shown in the following screenshot.</span></span> <span data-ttu-id="bbd30-142">É recomendável que você use a chave somente leitura se o DSN for usado para relatórios e processamento de dados somente leitura.</span><span class="sxs-lookup"><span data-stu-id="bbd30-142">We recommend you use the read-only key if the DSN is used for read-only data processing and reporting.</span></span>
    <span data-ttu-id="bbd30-143">![Folha Chaves do Azure Cosmos DB](./media/odbc-driver/odbc-driver-keys.png)</span><span class="sxs-lookup"><span data-stu-id="bbd30-143">![Azure Cosmos DB Keys blade](./media/odbc-driver/odbc-driver-keys.png)</span></span>
    - <span data-ttu-id="bbd30-144">**Criptografar a Tecla de Acesso para**: selecione a melhor opção com base nos usuários deste computador.</span><span class="sxs-lookup"><span data-stu-id="bbd30-144">**Encrypt Access Key for**: Select the best choice based on the users of this machine.</span></span> 
4. <span data-ttu-id="bbd30-145">Clique no botão **Testar** para ter certeza de que você pode se conectar à sua conta do Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="bbd30-145">Click the **Test** button to make sure you can connect to your Azure Cosmos DB account.</span></span> 
5. <span data-ttu-id="bbd30-146">Clique em **Opções Avançadas de** e defina os seguintes valores:</span><span class="sxs-lookup"><span data-stu-id="bbd30-146">Click **Advanced Options** and set the following values:</span></span>
    - <span data-ttu-id="bbd30-147">**Consistência de Consulta**: selecione o [nível de consistência](consistency-levels.md) para as operações.</span><span class="sxs-lookup"><span data-stu-id="bbd30-147">**Query Consistency**: Select the [consistency level](consistency-levels.md) for your operations.</span></span> <span data-ttu-id="bbd30-148">O padrão é Sessão.</span><span class="sxs-lookup"><span data-stu-id="bbd30-148">The default is Session.</span></span>
    - <span data-ttu-id="bbd30-149">**Número de tentativas**: insira o número de vezes para tentar novamente uma operação se a solicitação inicial não for concluída devido à limitação.</span><span class="sxs-lookup"><span data-stu-id="bbd30-149">**Number of Retries**: Enter the number of times to retry an operation if the initial request does not complete due to service throttling.</span></span>
    - <span data-ttu-id="bbd30-150">**Arquivo de Esquema**: você tem várias opções aqui.</span><span class="sxs-lookup"><span data-stu-id="bbd30-150">**Schema File**: You have a number of options here.</span></span>
        - <span data-ttu-id="bbd30-151">Por padrão, deixando a essa entrada como está (vazia), o driver examina os dados da primeira página de todas as coleções para determinar o esquema de cada coleção.</span><span class="sxs-lookup"><span data-stu-id="bbd30-151">By default, leaving this entry as is (blank), the driver scans the first page data for all collections to determine the schema of each collection.</span></span> <span data-ttu-id="bbd30-152">Isso é conhecido como Mapeamento de Coleção.</span><span class="sxs-lookup"><span data-stu-id="bbd30-152">This is known as Collection Mapping.</span></span> <span data-ttu-id="bbd30-153">Sem um arquivo de esquema definido, o driver deve executar o exame para cada sessão de driver e pode resultar em um tempo de inicialização mais alto de um aplicativo usando o DSN.</span><span class="sxs-lookup"><span data-stu-id="bbd30-153">Without a schema file defined, the driver has to perform the scan for each driver session and could result in a higher start up time of an application using the DSN.</span></span> <span data-ttu-id="bbd30-154">É recomendável sempre associar um arquivo de esquema para um DSN.</span><span class="sxs-lookup"><span data-stu-id="bbd30-154">We recommend that you always associate a schema file for a DSN.</span></span>
        - <span data-ttu-id="bbd30-155">Se você já tiver um arquivo de esquema (possivelmente um criado usando o [Editor de Esquema](#schema-editor)), poderá clicar em **Procurar**, navegar até o arquivo, clicar em **Salvar** e clicar em **OK**.</span><span class="sxs-lookup"><span data-stu-id="bbd30-155">If you already have a schema file (possibly one that you created using the [Schema Editor](#schema-editor)), you can click **Browse**, navigate to your file, click **Save**, and then click **OK**.</span></span>
        - <span data-ttu-id="bbd30-156">Se você desejar criar um novo esquema, clique em **OK** e clique em **Editor de Esquema** na janela principal.</span><span class="sxs-lookup"><span data-stu-id="bbd30-156">If you want to create a new schema, click **OK**, and then click **Schema Editor** in the main window.</span></span> <span data-ttu-id="bbd30-157">Em seguida, vá para as informações do [Editor de Esquema](#schema-editor).</span><span class="sxs-lookup"><span data-stu-id="bbd30-157">Then proceed to the [Schema Editor](#schema-editor) information.</span></span> <span data-ttu-id="bbd30-158">Ao criar o novo arquivo de esquema, não se esqueça de voltar para a janela **Opções Avançadas** para incluir o arquivo de esquema recém-criado.</span><span class="sxs-lookup"><span data-stu-id="bbd30-158">Upon creating the new schema file, please remember to go back to the **Advanced Options** window to include the newly created schema file.</span></span>

6. <span data-ttu-id="bbd30-159">Depois de concluir e fechar a janela **Instalação de DSN do Driver ODBC do Azure Cosmos DB**, o novo DSN de Usuário é adicionado à guia DSN de Usuário.</span><span class="sxs-lookup"><span data-stu-id="bbd30-159">Once you complete and close the **Azure Cosmos DB ODBC Driver DSN Setup** window, the new User DSN is added to the User DSN tab.</span></span>

    ![Novo DSN ODBC do Azure Cosmos DB na guia DSN de Usuário](./media/odbc-driver/odbc-driver-user-dsn.png)

## <span data-ttu-id="bbd30-161"><a id="#collection-mapping"></a>Etapa 3: Criar uma definição de esquema usando o método de mapeamento de coleção</span><span class="sxs-lookup"><span data-stu-id="bbd30-161"><a id="#collection-mapping"></a>Step 3: Create a schema definition using the collection mapping method</span></span>

<span data-ttu-id="bbd30-162">Há dois tipos de métodos de amostragem que você pode usar: **mapeamento de coleção** ou **delimitadores de tabela**.</span><span class="sxs-lookup"><span data-stu-id="bbd30-162">There are two types of sampling methods that you can use: **collection mapping** or **table-delimiters**.</span></span> <span data-ttu-id="bbd30-163">Uma sessão de amostragem pode utilizar ambos os métodos de amostragem, mas cada coleta pode usar apenas um método de amostragem específico.</span><span class="sxs-lookup"><span data-stu-id="bbd30-163">A sampling session can utilize both sampling methods, but each collection can only use a specific sampling method.</span></span> <span data-ttu-id="bbd30-164">As etapas a seguir criam um esquema para os dados em uma ou mais coleções usando o método de mapeamento de coleção.</span><span class="sxs-lookup"><span data-stu-id="bbd30-164">The steps below create a schema for the data in one or more collections using the collection mapping method.</span></span> <span data-ttu-id="bbd30-165">Esse método de amostragem recupera os dados na página de uma coleção para determinar a estrutura dos dados.</span><span class="sxs-lookup"><span data-stu-id="bbd30-165">This sampling method retrieves the data in the page of a collection to determine the structure of the data.</span></span> <span data-ttu-id="bbd30-166">Ele transpõe uma coleção para uma tabela no lado do ODBC.</span><span class="sxs-lookup"><span data-stu-id="bbd30-166">It transposes a collection to a table on the ODBC side.</span></span> <span data-ttu-id="bbd30-167">Esse método de amostragem é eficiente e rápido quando os dados em uma coleção são homogêneos.</span><span class="sxs-lookup"><span data-stu-id="bbd30-167">This sampling method is efficient and fast when the data in a collection is homogenous.</span></span> <span data-ttu-id="bbd30-168">Se uma coleção contiver o tipo heterogêneo de dados, será recomendável usar o [método de mapeamento de delimitadores de tabela](#table-mapping) uma vez que ele fornece um método de amostragem mais robusto para determinar as estruturas de dados na coleção.</span><span class="sxs-lookup"><span data-stu-id="bbd30-168">If a collection contains heterogenous type of data, we recommend you use the [table-delimiters mapping method](#table-mapping) as it provides a more robust sampling method to determine the data structures in the collection.</span></span> 

1. <span data-ttu-id="bbd30-169">Depois de concluir as etapas 1 a 4, em [Conectar-se ao seu banco de dados do Azure Cosmos DB](#connect), clique em **Editor de Esquema** na janela **Instalação de DSN do Driver ODBC do Azure Cosmos DB**.</span><span class="sxs-lookup"><span data-stu-id="bbd30-169">After completing steps 1-4 in [Connect to your Azure Cosmos DB database](#connect), click **Schema Editor** in the **Azure Cosmos DB ODBC Driver DSN Setup** window.</span></span>

    ![Botão do editor de esquema na janela Instalação de DSN do Driver ODBC do Azure Cosmos DB](./media/odbc-driver/odbc-driver-schema-editor.png)
2. <span data-ttu-id="bbd30-171">Na janela **Editor de Esquema**, clique em **Criar Novo**.</span><span class="sxs-lookup"><span data-stu-id="bbd30-171">In the **Schema Editor** window, click **Create New**.</span></span>
    <span data-ttu-id="bbd30-172">A janela **Gerar Esquema** exibe todas as coleções na conta do Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="bbd30-172">The **Generate Schema** window displays all the collections in the Azure Cosmos DB account.</span></span> 
3. <span data-ttu-id="bbd30-173">Selecione uma ou mais coleções para obter o exemplo e clique em **Exemplo**.</span><span class="sxs-lookup"><span data-stu-id="bbd30-173">Select one or more collections to sample, and then click **Sample**.</span></span> 
4. <span data-ttu-id="bbd30-174">Na guia **Modo de Exibição de Design**, o banco de dados, o esquema e a tabela são representados.</span><span class="sxs-lookup"><span data-stu-id="bbd30-174">In the **Design View** tab, the database, schema, and table are represented.</span></span> <span data-ttu-id="bbd30-175">Na exibição de tabela, o exame mostra o conjunto de propriedades associado aos nomes de coluna (Nome SQL, Nome da Fonte etc.).</span><span class="sxs-lookup"><span data-stu-id="bbd30-175">In the table view, the scan displays the set of properties associated with the column names (SQL Name, Source Name, etc.).</span></span>
    <span data-ttu-id="bbd30-176">Para cada coluna, você pode modificar o nome SQL, o tipo SQL, o comprimento SQL (se aplicável), a escala (se aplicável), a precisão (se aplicável) e o que permite valor nulo da coluna.</span><span class="sxs-lookup"><span data-stu-id="bbd30-176">For each column, you can modify the column SQL name, the SQL type, SQL length (if applicable), Scale (if applicable), Precision (if applicable) and Nullable.</span></span>
    - <span data-ttu-id="bbd30-177">Você pode definir **Ocultar Coluna** como **true** se deseja excluir a coluna dos resultados da consulta.</span><span class="sxs-lookup"><span data-stu-id="bbd30-177">You can set **Hide Column** to **true** if you want to exclude that column from query results.</span></span> <span data-ttu-id="bbd30-178">As colunas marcadas com Ocultar Coluna = true não são retornadas para seleção e projeção, embora ainda façam parte do esquema.</span><span class="sxs-lookup"><span data-stu-id="bbd30-178">Columns marked Hide Column = true are not returned for selection and projection, although they are still part of the schema.</span></span> <span data-ttu-id="bbd30-179">Por exemplo, você pode ocultar todas as propriedades obrigatórias do sistema do Azure Cosmos DB que começam com “_”.</span><span class="sxs-lookup"><span data-stu-id="bbd30-179">For example, you can hide all of the Azure Cosmos DB system required properties starting with “_”.</span></span>
    - <span data-ttu-id="bbd30-180">A coluna **id** é o único campo que não pode ser oculto porque ele é usado como a chave primária no esquema normalizado.</span><span class="sxs-lookup"><span data-stu-id="bbd30-180">The **id** column is the only field that cannot be hidden as it is used as the primary key in the normalized schema.</span></span> 
5. <span data-ttu-id="bbd30-181">Quando você terminar de definir o esquema, clique em **Arquivo** | **Salvar**, navegue até o diretório para salvar o esquema e clique em **Salvar**.</span><span class="sxs-lookup"><span data-stu-id="bbd30-181">Once you have finished defining the schema, click **File** | **Save**, navigate to the directory to save the schema, and then click **Save**.</span></span>

    <span data-ttu-id="bbd30-182">Se, no futuro, você desejar usar esse esquema com um DSN, abra a janela Instalação de DSN do Driver ODBC do Azure Cosmos DB (por meio do Administrador da Fonte de Dados ODBC), clique em Opções Avançadas e, na caixa Arquivo de Esquema, navegue para o esquema salvo.</span><span class="sxs-lookup"><span data-stu-id="bbd30-182">If in the future you want to use this schema with a DSN, open the Azure Cosmos DB ODBC Driver DSN Setup window (via the ODBC Data Source Administrator), click Advanced Options, and then in the Schema File box, navigate to the saved schema.</span></span> <span data-ttu-id="bbd30-183">Salvar um arquivo de esquema em um DSN existente modifica a conexão DSN de escopo para os dados e a estrutura definidos pelo esquema.</span><span class="sxs-lookup"><span data-stu-id="bbd30-183">Saving a schema file to an existing DSN modifies the DSN connection to scope to the data and structure defined by schema.</span></span>

## <span data-ttu-id="bbd30-184"><a id="table-mapping"></a>Etapa 4: Criar uma definição de esquema usando o método de mapeamento de delimitadores de tabela</span><span class="sxs-lookup"><span data-stu-id="bbd30-184"><a id="table-mapping"></a>Step 4: Create a schema definition using the table-delimiters mapping method</span></span>

<span data-ttu-id="bbd30-185">Há dois tipos de métodos de amostragem que você pode usar: **mapeamento de coleção** ou **delimitadores de tabela**.</span><span class="sxs-lookup"><span data-stu-id="bbd30-185">There are two types of sampling methods that you can use: **collection mapping** or **table-delimiters**.</span></span> <span data-ttu-id="bbd30-186">Uma sessão de amostragem pode utilizar ambos os métodos de amostragem, mas cada coleta pode usar apenas um método de amostragem específico.</span><span class="sxs-lookup"><span data-stu-id="bbd30-186">A sampling session can utilize both sampling methods, but each collection can only use a specific sampling method.</span></span> 

<span data-ttu-id="bbd30-187">As etapas a seguir criam um esquema para os dados em uma ou mais coleções usando o método de mapeamento de **delimitadores de tabela**.</span><span class="sxs-lookup"><span data-stu-id="bbd30-187">The following steps create a schema for the data in one or more collections using the **table-delimiters** mapping method.</span></span> <span data-ttu-id="bbd30-188">É recomendável que você use esse método de amostragem quando suas coleções contiverem tipos heterogêneos de dados.</span><span class="sxs-lookup"><span data-stu-id="bbd30-188">We recommend that you use this sampling method when your collections contain heterogeneous type of data.</span></span> <span data-ttu-id="bbd30-189">Você pode usar esse método para definir o escopo de amostragem para um conjunto de atributos e seus valores correspondentes.</span><span class="sxs-lookup"><span data-stu-id="bbd30-189">You can use this method to scope the sampling to a set of attributes and its corresponding values.</span></span> <span data-ttu-id="bbd30-190">Por exemplo, se um documento contém uma propriedade "Type", você pode definir o escopo de amostragem para os valores dessa propriedade.</span><span class="sxs-lookup"><span data-stu-id="bbd30-190">For example, if a document contains a “Type” property, you can scope the sampling to the values of this property.</span></span> <span data-ttu-id="bbd30-191">O resultado final da amostragem seria um conjunto de tabelas para cada um dos valores de Type especificados.</span><span class="sxs-lookup"><span data-stu-id="bbd30-191">The end result of the sampling would be a set of tables for each of the values for Type you have specified.</span></span> <span data-ttu-id="bbd30-192">Por exemplo, Type = Carro gerará uma tabela Carro, enquanto Type = Avião gerará uma tabela Avião.</span><span class="sxs-lookup"><span data-stu-id="bbd30-192">For example, Type = Car will produce a Car table while Type = Plane would produce a Plane table.</span></span>

1. <span data-ttu-id="bbd30-193">Depois de concluir as etapas 1 a 4, em [Conectar-se ao seu banco de dados do Azure Cosmos DB](#connect), clique em **Editor de Esquema** na janela Instalação de DSN do Driver ODBC do Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="bbd30-193">After completing steps 1-4 in [Connect to your Azure Cosmos DB database](#connect), click **Schema Editor** in the Azure Cosmos DB ODBC Driver DSN Setup window.</span></span>
2. <span data-ttu-id="bbd30-194">Na janela **Editor de Esquema**, clique em **Criar Novo**.</span><span class="sxs-lookup"><span data-stu-id="bbd30-194">In the **Schema Editor** window, click **Create New**.</span></span>
    <span data-ttu-id="bbd30-195">A janela **Gerar Esquema** exibe todas as coleções na conta do Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="bbd30-195">The **Generate Schema** window displays all the collections in the Azure Cosmos DB account.</span></span> 
3. <span data-ttu-id="bbd30-196">Selecione uma coleção na guia **Exibição de Exemplo**, na coluna **Definição do Mapeamento** da coleção, clique em **Editar**.</span><span class="sxs-lookup"><span data-stu-id="bbd30-196">Select a collection on the **Sample View** tab, in the **Mapping Definition** column for the collection, click **Edit**.</span></span> <span data-ttu-id="bbd30-197">Em seguida, na janela **Definição do Mapeamento**, selecione o método **Delimitadores de Tabela**.</span><span class="sxs-lookup"><span data-stu-id="bbd30-197">Then in the **Mapping Definition** window, select **Table Delimiters** method.</span></span> <span data-ttu-id="bbd30-198">Faremos o seguinte:</span><span class="sxs-lookup"><span data-stu-id="bbd30-198">Then do the following:</span></span>

    <span data-ttu-id="bbd30-199">a.</span><span class="sxs-lookup"><span data-stu-id="bbd30-199">a.</span></span> <span data-ttu-id="bbd30-200">Na caixa **Atributos**, digite o nome de uma propriedade de delimitador.</span><span class="sxs-lookup"><span data-stu-id="bbd30-200">In the **Attributes** box, type the name of a delimiter property.</span></span> <span data-ttu-id="bbd30-201">Esta é uma propriedade do documento para a qual você deseja definir o escopo de amostragem, por exemplo, Cidade, e pressione Enter.</span><span class="sxs-lookup"><span data-stu-id="bbd30-201">This is a property in your document that you want to scope the sampling to, for instance, City and press enter.</span></span> 

    <span data-ttu-id="bbd30-202">b.</span><span class="sxs-lookup"><span data-stu-id="bbd30-202">b.</span></span> <span data-ttu-id="bbd30-203">Se você quiser definir o escopo de amostragem para determinados valores para o atributo que acabou de inserir, selecione o atributo na caixa de seleção e insira um valor na caixa **Valor**, por exemplo, Seattle, e pressione Enter.</span><span class="sxs-lookup"><span data-stu-id="bbd30-203">If you only want to scope the sampling to certain values for the attribute you just entered, select the attribute in the selection box, then enter a value in the **Value** box, for example, Seattle and press enter.</span></span> <span data-ttu-id="bbd30-204">Você pode continuar a adicionar vários valores para atributos.</span><span class="sxs-lookup"><span data-stu-id="bbd30-204">You can continue to add multiple values for attributes.</span></span> <span data-ttu-id="bbd30-205">Apenas certifique-se de que o atributo correto esteja selecionado quando estiver inserindo valores.</span><span class="sxs-lookup"><span data-stu-id="bbd30-205">Just ensure that the correct attribute is selected when you're entering values.</span></span>

    <span data-ttu-id="bbd30-206">Por exemplo, se você incluir um valor de **Atributos** de Cidade e desejar limitar sua tabela para incluir apenas linhas com um valor de cidade de Nova York e Dubai, insira Cidade na caixa Atributos e Nova York e Dubai na caixa **Valores**.</span><span class="sxs-lookup"><span data-stu-id="bbd30-206">For example, if you include an **Attributes** value of City, and you want to limit your table to only include rows with a city value of New York and Dubai, you would enter City in the Attributes box, and New York and then Dubai in the **Values** box.</span></span>
4. <span data-ttu-id="bbd30-207">Clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="bbd30-207">Click **OK**.</span></span> 
5. <span data-ttu-id="bbd30-208">Depois de concluir as definições de mapeamento das coleções para as quais deseja realizar a amostragem, na janela **Editor de Esquema**, clique em **Exemplo**.</span><span class="sxs-lookup"><span data-stu-id="bbd30-208">After completing the mapping definitions for the collections you want to sample, in the **Schema Editor** window, click **Sample**.</span></span>
     <span data-ttu-id="bbd30-209">Para cada coluna, você pode modificar o nome SQL, o tipo SQL, o comprimento SQL (se aplicável), a escala (se aplicável), a precisão (se aplicável) e o que permite valor nulo da coluna.</span><span class="sxs-lookup"><span data-stu-id="bbd30-209">For each column, you can modify the column SQL name, the SQL type, SQL length (if applicable), Scale (if applicable), Precision (if applicable) and Nullable.</span></span>
    - <span data-ttu-id="bbd30-210">Você pode definir **Ocultar Coluna** como **true** se deseja excluir a coluna dos resultados da consulta.</span><span class="sxs-lookup"><span data-stu-id="bbd30-210">You can set **Hide Column** to **true** if you want to exclude that column from query results.</span></span> <span data-ttu-id="bbd30-211">As colunas marcadas com Ocultar Coluna = true não são retornadas para seleção e projeção, embora ainda façam parte do esquema.</span><span class="sxs-lookup"><span data-stu-id="bbd30-211">Columns marked Hide Column = true are not returned for selection and projection, although they are still part of the schema.</span></span> <span data-ttu-id="bbd30-212">Por exemplo, você pode ocultar todas as propriedades obrigatórias do sistema do Azure Cosmos DB que começam com “_”.</span><span class="sxs-lookup"><span data-stu-id="bbd30-212">For example, you can hide all the Azure Cosmos DB system required properties starting with “_”.</span></span>
    - <span data-ttu-id="bbd30-213">A coluna **id** é o único campo que não pode ser oculto porque ele é usado como a chave primária no esquema normalizado.</span><span class="sxs-lookup"><span data-stu-id="bbd30-213">The **id** column is the only field that cannot be hidden as it is used as the primary key in the normalized schema.</span></span> 
6. <span data-ttu-id="bbd30-214">Quando você terminar de definir o esquema, clique em **Arquivo** | **Salvar**, navegue até o diretório para salvar o esquema e clique em **Salvar**.</span><span class="sxs-lookup"><span data-stu-id="bbd30-214">Once you have finished defining the schema, click **File** | **Save**, navigate to the directory to save the schema, and then click **Save**.</span></span>
7. <span data-ttu-id="bbd30-215">Na janela **Instalação de DSN do Driver ODBC do Azure Cosmos DB**, clique em **Opções Avançadas**.</span><span class="sxs-lookup"><span data-stu-id="bbd30-215">Back in the **Azure Cosmos DB ODBC Driver DSN Setup** window, click ** Advanced Options**.</span></span> <span data-ttu-id="bbd30-216">Em seguida, na caixa **Arquivo de Esquema**, navegue até o arquivo de esquema salvo e clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="bbd30-216">Then, in the **Schema File** box, navigate to the saved schema file and click **OK**.</span></span> <span data-ttu-id="bbd30-217">Clique em **OK** novamente para salvar o DSN.</span><span class="sxs-lookup"><span data-stu-id="bbd30-217">Click **OK** again to save the DSN.</span></span> <span data-ttu-id="bbd30-218">Isso salva o esquema que você criou no DSN.</span><span class="sxs-lookup"><span data-stu-id="bbd30-218">This saves the schema you created to the DSN.</span></span> 

## <a name="optional-creating-views"></a><span data-ttu-id="bbd30-219">(Opcional) Criando exibições</span><span class="sxs-lookup"><span data-stu-id="bbd30-219">(Optional) Creating views</span></span>
<span data-ttu-id="bbd30-220">Você pode definir e criar exibições como parte do processo de amostragem.</span><span class="sxs-lookup"><span data-stu-id="bbd30-220">You can define and create views as part of the sampling process.</span></span> <span data-ttu-id="bbd30-221">Essas exibições são equivalentes às exibições do SQL.</span><span class="sxs-lookup"><span data-stu-id="bbd30-221">These views are equivalent to SQL views.</span></span> <span data-ttu-id="bbd30-222">Eles são somente leitura e são o escopo definido pelas seleções e projeções do SQL do Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="bbd30-222">They are read-only and are scope the selections and projections of the Azure Cosmos DB SQL defined.</span></span> 

<span data-ttu-id="bbd30-223">Para criar uma exibição para seus dados, na janela **Editor de Esquema**, na coluna **Definições de Exibição**, clique em **Adicionar** na linha da coleção para a qual realizar a amostragem.</span><span class="sxs-lookup"><span data-stu-id="bbd30-223">To create a view for your data, in the **Schema Editor** window, in the **View Definitions** column, click **Add** on the row of the collection to sample.</span></span> <span data-ttu-id="bbd30-224">Em seguida, na janela **Definições de Exibição**, faça o seguinte:</span><span class="sxs-lookup"><span data-stu-id="bbd30-224">Then in the **View Definitions** window, do the following:</span></span>
1. <span data-ttu-id="bbd30-225">Clique em **Novo**, insira um nome para exibição, por exemplo, EmployeesfromSeattleView e, em seguida, clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="bbd30-225">Click **New**, enter a name for the view, for example, EmployeesfromSeattleView and then click **OK**.</span></span>
2. <span data-ttu-id="bbd30-226">Na janela **Editar exibição**, insira uma consulta do Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="bbd30-226">In the **Edit view** window, enter an Azure Cosmos DB query.</span></span> <span data-ttu-id="bbd30-227">Ela deve ser uma consulta SQL do Azure Cosmos DB, por exemplo, `SELECT c.City, c.EmployeeName, c.Level, c.Age, c.Gender, c.Manager FROM c WHERE c.City = “Seattle”`. Depois, clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="bbd30-227">This must be an Azure Cosmos DB SQL query, for example`SELECT c.City, c.EmployeeName, c.Level, c.Age, c.Gender, c.Manager FROM c WHERE c.City = “Seattle”`, and then click **OK**.</span></span>

<span data-ttu-id="bbd30-228">Você pode criar quantas exibições desejar.</span><span class="sxs-lookup"><span data-stu-id="bbd30-228">You can create a many views as you like.</span></span> <span data-ttu-id="bbd30-229">Depois de definir as exibições, você pode realizar a amostragem dos dados.</span><span class="sxs-lookup"><span data-stu-id="bbd30-229">Once you are done defining the views, you can then sample the data.</span></span> 

## <a name="step-5-view-your-data-in-bi-tools-such-as-power-bi-desktop"></a><span data-ttu-id="bbd30-230">Etapa 5: Exibir os dados em ferramentas de BI como Power BI Desktop</span><span class="sxs-lookup"><span data-stu-id="bbd30-230">Step 5: View your data in BI tools such as Power BI Desktop</span></span>

<span data-ttu-id="bbd30-231">Você pode usar o novo DSN para conectar o DocumentADB com qualquer ferramenta em conformidade com ODBC, essa etapa simplesmente mostra como se conectar ao Power BI Desktop e criar uma visualização do Power BI.</span><span class="sxs-lookup"><span data-stu-id="bbd30-231">You can use your new DSN to connect DocumentADB with any ODBC-compliant tools - this step simply shows you how to connect to Power BI Desktop and create a Power BI visualization.</span></span>

1. <span data-ttu-id="bbd30-232">Abra o Power BI Desktop.</span><span class="sxs-lookup"><span data-stu-id="bbd30-232">Open Power BI Desktop.</span></span>
2. <span data-ttu-id="bbd30-233">Clique em **Obter Dados**.</span><span class="sxs-lookup"><span data-stu-id="bbd30-233">Click **Get Data**.</span></span>
3. <span data-ttu-id="bbd30-234">Na janela **Obter Dados**, clique em **Outro** | **ODBC** | **Conectar**.</span><span class="sxs-lookup"><span data-stu-id="bbd30-234">In the **Get Data** window, click **Other** | **ODBC** | **Connect**.</span></span>
4. <span data-ttu-id="bbd30-235">Na janela **Do ODBC**, selecione o nome da fonte de dados que você criou e clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="bbd30-235">In the **From ODBC** window, select the data source name you created, and then click **OK**.</span></span> <span data-ttu-id="bbd30-236">Você pode deixar as entradas de **Opções Avançadas** em branco.</span><span class="sxs-lookup"><span data-stu-id="bbd30-236">You can leave the **Advanced Options** entries blank.</span></span>
5. <span data-ttu-id="bbd30-237">Na janela **Acesse uma fonte de dados usando um driver ODBC**, selecione **Padrão ou Personalizada** e clique em **Conectar**.</span><span class="sxs-lookup"><span data-stu-id="bbd30-237">In the **Access a data source using an ODBC driver** window, select **Default or Custom** and then click **Connect**.</span></span> <span data-ttu-id="bbd30-238">Você não precisa incluir as **Propriedades de cadeia de conexão de credencial**.</span><span class="sxs-lookup"><span data-stu-id="bbd30-238">You do not need to include the **Credential connection string properties**.</span></span>
6. <span data-ttu-id="bbd30-239">Na janela **Navegador**, no painel esquerdo, expanda o banco de dados, o esquema e selecione a tabela.</span><span class="sxs-lookup"><span data-stu-id="bbd30-239">In the **Navigator** window, in the left pane, expand the database, the schema, and then select the table.</span></span> <span data-ttu-id="bbd30-240">O painel de resultados inclui os dados usando o esquema que você criou.</span><span class="sxs-lookup"><span data-stu-id="bbd30-240">The results pane includes the data using the schema you created.</span></span>
7. <span data-ttu-id="bbd30-241">Para visualizar os dados no Power BI Desktop, marque a caixa na frente do nome da tabela e clique em **Carregar**.</span><span class="sxs-lookup"><span data-stu-id="bbd30-241">To visualize the data in Power BI desktop, check the box in front of the table name, and then click **Load**.</span></span>
8. <span data-ttu-id="bbd30-242">No Power BI Desktop, na extrema esquerda, selecione a guia Dados</span><span class="sxs-lookup"><span data-stu-id="bbd30-242">In Power BI Desktop, on the far left, select the Data tab</span></span> ![Guia Dados no Power BI Desktop](./media/odbc-driver/odbc-driver-data-tab.png) <span data-ttu-id="bbd30-244">para confirmar se os dados foram importados.</span><span class="sxs-lookup"><span data-stu-id="bbd30-244">to confirm your data was imported.</span></span>
9. <span data-ttu-id="bbd30-245">Agora você pode criar elementos visuais usando o Power BI clicando na guia Relatório ![guia Relatório no Power BI Desktop](./media/odbc-driver/odbc-driver-report-tab.png), em **Visual Novo** e personalizando o bloco.</span><span class="sxs-lookup"><span data-stu-id="bbd30-245">You can now create visuals using Power BI by clicking on the Report tab ![Report tab in Power BI Desktop](./media/odbc-driver/odbc-driver-report-tab.png), clicking **New Visual**, and then customizing your tile.</span></span> <span data-ttu-id="bbd30-246">Para obter mais informações sobre como criar visualizações no Power BI Desktop, consulte [Tipos de visualização no Power BI](https://powerbi.microsoft.com/documentation/powerbi-service-visualization-types-for-reports-and-q-and-a/).</span><span class="sxs-lookup"><span data-stu-id="bbd30-246">For more information about creating visualizations in Power BI Desktop, see [Visualization types in Power BI](https://powerbi.microsoft.com/documentation/powerbi-service-visualization-types-for-reports-and-q-and-a/).</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="bbd30-247">Solucionar problemas</span><span class="sxs-lookup"><span data-stu-id="bbd30-247">Troubleshooting</span></span>

<span data-ttu-id="bbd30-248">Se você receber o seguinte erro, verifique se os valores de **Host** e **Tecla de Acesso** copiados do Portal do Azure na [Etapa 2](#connect) estão corretos e tente novamente.</span><span class="sxs-lookup"><span data-stu-id="bbd30-248">If you receive the following error, ensure the **Host** and **Access Key** values you copied the Azure portal in [Step 2](#connect) are correct and then retry.</span></span> <span data-ttu-id="bbd30-249">Use os botões de cópia à direita dos valores de **Host** e **Tecla de Acesso** no Portal do Azure para copiar os valores sem erros.</span><span class="sxs-lookup"><span data-stu-id="bbd30-249">Use the copy buttons to the right of the **Host** and **Access Key** values in the Azure portal to copy the values error free.</span></span>

    [HY000]: [Microsoft][Azure Cosmos DB] (401) HTTP 401 Authentication Error: {"code":"Unauthorized","message":"The input authorization token can't serve the request. Please check that the expected payload is built as per the protocol, and check the key being used. Server used the following payload to sign: 'get\ndbs\n\nfri, 20 jan 2017 03:43:55 gmt\n\n'\r\nActivityId: 9acb3c0d-cb31-4b78-ac0a-413c8d33e373"}`

## <a name="next-steps"></a><span data-ttu-id="bbd30-250">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="bbd30-250">Next steps</span></span>

<span data-ttu-id="bbd30-251">Para saber mais sobre o Azure Cosmos DB, consulte [O que é o Azure Cosmos DB?](introduction.md).</span><span class="sxs-lookup"><span data-stu-id="bbd30-251">To learn more about Azure Cosmos DB, see [What is Azure Cosmos DB?](introduction.md).</span></span>
