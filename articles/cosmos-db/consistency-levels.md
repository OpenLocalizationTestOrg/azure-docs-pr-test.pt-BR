---
title: "níveis de aaaConsistency no banco de dados do Azure Cosmos | Microsoft Docs"
description: "Banco de dados do Azure Cosmos tem cinco consistência níveis toohelp saldo eventual consistência, disponibilidade e latência de vantagens e desvantagens."
keywords: "consistência eventual, azure cosmos db, Microsoft azure"
services: cosmos-db
author: mimig1
manager: jhubbard
editor: cgronlun
documentationcenter: 
ms.assetid: 3fe51cfa-a889-4a4a-b320-16bf871fe74c
ms.service: cosmos-db
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/16/2017
ms.author: mimig
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: ac399c229d0856cd811bc81568536e519af3300f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="tunable-data-consistency-levels-in-azure-cosmos-db"></a><span data-ttu-id="76749-104">Níveis ajustáveis de consistência de dados no Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="76749-104">Tunable data consistency levels in Azure Cosmos DB</span></span>
<span data-ttu-id="76749-105">Banco de dados do Azure Cosmos destina-se da saudação Terra com distribuição global em mente para cada modelo de dados.</span><span class="sxs-lookup"><span data-stu-id="76749-105">Azure Cosmos DB is designed from hello ground up with global distribution in mind for every data model.</span></span> <span data-ttu-id="76749-106">É projetado toooffer garantias de baixa latência previsível, um SLA de disponibilidade de 99,99%, e vários bem-definidos relaxada modelos de consistência.</span><span class="sxs-lookup"><span data-stu-id="76749-106">It is designed toooffer predictable low latency guarantees, a 99.99% availability SLA, and multiple well-defined relaxed consistency models.</span></span> <span data-ttu-id="76749-107">Atualmente, o Azure Cosmos DB fornece cinco níveis de consistência: forte, desatualização limitada, sessão, prefixo consistente e eventual.</span><span class="sxs-lookup"><span data-stu-id="76749-107">Currently, Azure Cosmos DB provides five consistency levels: strong, bounded-staleness, session, consistent prefix, and eventual.</span></span> 

<span data-ttu-id="76749-108">Além dos modelos de consistência **forte** e **eventual** geralmente oferecidos por bancos de dados distribuídos, o Azure Cosmos DB oferece mais três modelos de consistência cuidadosamente codificados e operacionalizados, e validou sua utilidade em casos de uso do mundo real.</span><span class="sxs-lookup"><span data-stu-id="76749-108">Besides **strong** and **eventual consistency** models commonly offered by distributed databases, Azure Cosmos DB offers three more carefully codified and operationalized consistency models, and has validated their usefulness against real world use cases.</span></span> <span data-ttu-id="76749-109">Esses são Olá **limitada envelhecimento**, **sessão**, e **prefixo consistente** níveis de consistência.</span><span class="sxs-lookup"><span data-stu-id="76749-109">These are hello **bounded staleness**, **session**, and **consistent prefix** consistency levels.</span></span> <span data-ttu-id="76749-110">Esses níveis de cinco consistência habilitar coletivamente toomake bem fundamentada prós e contras latência, a disponibilidade e a consistência.</span><span class="sxs-lookup"><span data-stu-id="76749-110">Collectively these five consistency levels enable you toomake well-reasoned trade-offs between consistency, availability, and latency.</span></span> 

## <a name="distributed-databases-and-consistency"></a><span data-ttu-id="76749-111">Consistência e bancos de dados distribuídos</span><span class="sxs-lookup"><span data-stu-id="76749-111">Distributed databases and consistency</span></span>
<span data-ttu-id="76749-112">Os bancos de dados distribuídos comercialmente se enquadram em duas categorias: bancos de dados que não oferecem opções de consistência bem definidas e comprovadas e bancos de dados que oferecem duas opções de programação extrema (consistência forte versus consistência eventual).</span><span class="sxs-lookup"><span data-stu-id="76749-112">Commercial distributed databases fall into two categories: databases that do not offer well-defined, provable consistency choices at all, and databases which offer two extreme programmability choices (strong vs. eventual consistency).</span></span> 

<span data-ttu-id="76749-113">Olá os desenvolvedores de aplicativos de carga anterior com detalhes de seus protocolos de replicação e esperada compensações de difícil toomake entre consistência, disponibilidade, latência e taxa de transferência.</span><span class="sxs-lookup"><span data-stu-id="76749-113">hello former burdens application developers with minutia of their replication protocols and expects them toomake difficult tradeoffs between consistency, availability, latency, and throughput.</span></span> <span data-ttu-id="76749-114">Olá último coloca um toochoose pressão um dos dois extremos de saudação.</span><span class="sxs-lookup"><span data-stu-id="76749-114">hello latter puts a pressure toochoose one of hello two extremes.</span></span> <span data-ttu-id="76749-115">Apesar infinidade de saudação de pesquisa e propostas para mais de 50 modelos de consistência, hello comunidade do banco de dados distribuído não foi capaz de toocommercialize níveis de consistência além da consistência eventual e forte.</span><span class="sxs-lookup"><span data-stu-id="76749-115">Despite hello abundance of research and proposals for more than 50 consistency models, hello distributed database community has not been able toocommercialize consistency levels beyond strong and eventual consistency.</span></span> <span data-ttu-id="76749-116">Cosmos banco de dados permite que os desenvolvedores toochoose entre cinco modelos de consistência bem definido ao longo do espectro de consistência hello – forte, limitada envelhecimento, [sessão](http://dl.acm.org/citation.cfm?id=383631), prefixo consistente e eventual.</span><span class="sxs-lookup"><span data-stu-id="76749-116">Cosmos DB allows developers toochoose between five well-defined consistency models along hello consistency spectrum – strong, bounded staleness, [session](http://dl.acm.org/citation.cfm?id=383631), consistent prefix, and eventual.</span></span> 

![Banco de dados do Azure Cosmos oferece vários bem definidas (reduzida) consistência modelos toochoose do](./media/consistency-levels/five-consistency-levels.png)

<span data-ttu-id="76749-118">Olá a tabela a seguir ilustra as garantias específico hello, que cada nível de consistência fornece.</span><span class="sxs-lookup"><span data-stu-id="76749-118">hello following table illustrates hello specific guarantees each consistency level provides.</span></span>
 
<span data-ttu-id="76749-119">**Níveis de consistência e garantias**</span><span class="sxs-lookup"><span data-stu-id="76749-119">**Consistency Levels and guarantees**</span></span>

| <span data-ttu-id="76749-120">Nível de Consistência</span><span class="sxs-lookup"><span data-stu-id="76749-120">Consistency Level</span></span> | <span data-ttu-id="76749-121">Garantias</span><span class="sxs-lookup"><span data-stu-id="76749-121">Guarantees</span></span> |
| --- | --- |
| <span data-ttu-id="76749-122">Strong</span><span class="sxs-lookup"><span data-stu-id="76749-122">Strong</span></span> | <span data-ttu-id="76749-123">Transação atômica</span><span class="sxs-lookup"><span data-stu-id="76749-123">Linearizability</span></span> |
| <span data-ttu-id="76749-124">Bounded staleness</span><span class="sxs-lookup"><span data-stu-id="76749-124">Bounded Staleness</span></span> | <span data-ttu-id="76749-125">Prefixo consistente.</span><span class="sxs-lookup"><span data-stu-id="76749-125">Consistent Prefix.</span></span> <span data-ttu-id="76749-126">Lê latência por trás de gravações por meio de prefixos k ou intervalos t</span><span class="sxs-lookup"><span data-stu-id="76749-126">Reads lag behind writes by k prefixes or t interval</span></span> |
| <span data-ttu-id="76749-127">Session</span><span class="sxs-lookup"><span data-stu-id="76749-127">Session</span></span>   | <span data-ttu-id="76749-128">Prefixo consistente.</span><span class="sxs-lookup"><span data-stu-id="76749-128">Consistent Prefix.</span></span> <span data-ttu-id="76749-129">Leituras monotônicas, gravações monotônicas, read-your-writes (operações de leitura refletem gravações anteriores), write-follows-reads (gravações são propagadas após as leituras)</span><span class="sxs-lookup"><span data-stu-id="76749-129">Monotonic reads, monotonic writes, read-your-writes, write-follows-reads</span></span> |
| <span data-ttu-id="76749-130">Prefixo consistente</span><span class="sxs-lookup"><span data-stu-id="76749-130">Consistent Prefix</span></span> | <span data-ttu-id="76749-131">Atualizações retornadas são alguns prefixo de todas as atualizações de hello sem intervalos</span><span class="sxs-lookup"><span data-stu-id="76749-131">Updates returned are some prefix of all hello updates, with no gaps</span></span> |
| <span data-ttu-id="76749-132">Eventual</span><span class="sxs-lookup"><span data-stu-id="76749-132">Eventual</span></span>  | <span data-ttu-id="76749-133">Leituras fora de ordem</span><span class="sxs-lookup"><span data-stu-id="76749-133">Out of order reads</span></span> |

<span data-ttu-id="76749-134">Você pode configurar o nível de consistência saudação padrão em sua conta do banco de dados do Cosmos (e posteriormente substituir consistência Olá em uma solicitação de leitura específica).</span><span class="sxs-lookup"><span data-stu-id="76749-134">You can configure hello default consistency level on your Cosmos DB account (and later override hello consistency on a specific read request).</span></span> <span data-ttu-id="76749-135">Internamente, o nível de consistência saudação padrão se aplica a toodata em conjuntos de partições de saudação que pode abranger regiões.</span><span class="sxs-lookup"><span data-stu-id="76749-135">Internally, hello default consistency level applies toodata within hello partition sets which may span regions.</span></span> <span data-ttu-id="76749-136">Cerca de 73% dos nossos locatários usam a consistência de sessão e 20% preferem desatualização limitada.</span><span class="sxs-lookup"><span data-stu-id="76749-136">About 73% of our tenants use session consistency and 20% prefer bounded staleness.</span></span> <span data-ttu-id="76749-137">Observamos que aproximadamente 3% de nossos clientes experimentam vários níveis de consistência inicialmente antes de escolherem uma opção de consistência específica para seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="76749-137">We observe that approximately 3% of our customers experiment with various consistency levels initially before settling on a specific consistency choice for their application.</span></span> <span data-ttu-id="76749-138">Também observamos que apenas 2% de nossos locatários substituem os níveis de consistência por solicitação.</span><span class="sxs-lookup"><span data-stu-id="76749-138">We also observe that only 2% of our tenants override consistency levels on a per request basis.</span></span> 

<span data-ttu-id="76749-139">No Cosmos DB, leituras que atuam em consistência de sessão, prefixo consistente e eventual são duas vezes mais econômicas que leituras com consistência forte ou de desatualização limitada.</span><span class="sxs-lookup"><span data-stu-id="76749-139">In Cosmos DB, reads served at session, consistent prefix and eventual consistency are twice as cheap as reads with strong or bounded staleness consistency.</span></span> <span data-ttu-id="76749-140">O Cosmos DB tem SLAs abrangente de 99,99% líderes do setor, incluindo garantias de consistência junto com disponibilidade, taxa de transferência e latência.</span><span class="sxs-lookup"><span data-stu-id="76749-140">Cosmos DB has industry leading comprehensive 99.99% SLAs including consistency guarantees along with availability, throughput, and latency.</span></span> <span data-ttu-id="76749-141">Empregamos um [verificador linearizability](http://dl.acm.org/citation.cfm?id=1806634), que opera continuamente em nosso telemetria de serviço e relatórios aberta qualquer tooyou de violações de consistência.</span><span class="sxs-lookup"><span data-stu-id="76749-141">We employ a [linearizability checker](http://dl.acm.org/citation.cfm?id=1806634), which continuously operates over our service telemetry and openly reports any consistency violations tooyou.</span></span> <span data-ttu-id="76749-142">Para determinado envelhecimento, podemos monitorar e relatar qualquer violação levou e limites de t.</span><span class="sxs-lookup"><span data-stu-id="76749-142">For bounded staleness, we monitor and report any violations took and t bounds.</span></span> <span data-ttu-id="76749-143">Todos os cinco níveis de consistência reduzida, podemos também relata Olá [métrica probabilístico desatualização associada](http://dl.acm.org/citation.cfm?id=2212359) tooyou diretamente.</span><span class="sxs-lookup"><span data-stu-id="76749-143">For all five relaxed consistency levels, we also report hello [probabilistic bounded staleness metric](http://dl.acm.org/citation.cfm?id=2212359) directly tooyou.</span></span>  

## <a name="scope-of-consistency"></a><span data-ttu-id="76749-144">Escopo de consistência</span><span class="sxs-lookup"><span data-stu-id="76749-144">Scope of consistency</span></span>
<span data-ttu-id="76749-145">granularidade de saudação de consistência é tooa escopo solicitação de usuário único.</span><span class="sxs-lookup"><span data-stu-id="76749-145">hello granularity of consistency is scoped tooa single user request.</span></span> <span data-ttu-id="76749-146">Uma solicitação de gravação pode corresponder tooan inserção, substituição, upsert ou excluir a transação.</span><span class="sxs-lookup"><span data-stu-id="76749-146">A write request may correspond tooan insert, replace, upsert, or delete transaction.</span></span> <span data-ttu-id="76749-147">Assim como ocorre em gravações, uma transação de leitura/consulta também é tooa no escopo solicitação de usuário único.</span><span class="sxs-lookup"><span data-stu-id="76749-147">As with writes, a read/query transaction is also scoped tooa single user request.</span></span> <span data-ttu-id="76749-148">usuário Olá pode ser necessário toopaginate sobre um grande conjunto de resultados, abrangendo várias partições, mas cada leitura transação está no escopo tooa única página e atendidas a partir de uma única partição.</span><span class="sxs-lookup"><span data-stu-id="76749-148">hello user may be required toopaginate over a large result-set, spanning multiple partitions, but each read transaction is scoped tooa single page and served from within a single partition.</span></span>

## <a name="consistency-levels"></a><span data-ttu-id="76749-149">Níveis de consistência</span><span class="sxs-lookup"><span data-stu-id="76749-149">Consistency levels</span></span>
<span data-ttu-id="76749-150">Você pode configurar um nível de consistência padrão em sua conta do banco de dados que se aplica a coleções de tooall (e bancos de dados) em sua conta do banco de dados do Cosmos.</span><span class="sxs-lookup"><span data-stu-id="76749-150">You can configure a default consistency level on your database account that applies tooall collections (and databases) under your Cosmos DB account.</span></span> <span data-ttu-id="76749-151">Por padrão, todas as leituras e consultas em Olá recursos definidos pelo usuário usam o nível de consistência de padrão de saudação especificado na conta de banco de dados de saudação.</span><span class="sxs-lookup"><span data-stu-id="76749-151">By default, all reads and queries issued against hello user-defined resources use hello default consistency level specified on hello database account.</span></span> <span data-ttu-id="76749-152">Você pode relaxar o nível de consistência de saudação de uma leitura/consulta específica solicitar suporte para usar em cada Olá APIs.</span><span class="sxs-lookup"><span data-stu-id="76749-152">You can relax hello consistency level of a specific read/query request using in each of hello supported APIs.</span></span> <span data-ttu-id="76749-153">Há cinco tipos de níveis de consistência com suporte do protocolo de replicação de banco de dados do Azure Cosmos Olá que fornecem uma compensação clara entre desempenho e garantias de consistência específico, conforme descrito nesta seção.</span><span class="sxs-lookup"><span data-stu-id="76749-153">There are five types of consistency levels supported by hello Azure Cosmos DB replication protocol that provide a clear trade-off between specific consistency guarantees and performance, as described in this section.</span></span>

<span data-ttu-id="76749-154">**Strong**:</span><span class="sxs-lookup"><span data-stu-id="76749-154">**Strong**:</span></span> 

* <span data-ttu-id="76749-155">Consistência forte oferece um [linearizability](https://aphyr.com/posts/313-strong-consistency-models) garantia com hello lê a versão mais recente do hello tooreturn garantida de um item.</span><span class="sxs-lookup"><span data-stu-id="76749-155">Strong consistency offers a [linearizability](https://aphyr.com/posts/313-strong-consistency-models) guarantee with hello reads guaranteed tooreturn hello most recent version of an item.</span></span> 
* <span data-ttu-id="76749-156">Uma coerência forte garante que uma gravação seja visível somente após ela ser confirmada forma durável pela quorum de maioria de saudação de réplicas.</span><span class="sxs-lookup"><span data-stu-id="76749-156">Strong consistency guarantees that a write is only visible after it is committed durably by hello majority quorum of replicas.</span></span> <span data-ttu-id="76749-157">Uma gravação é ou sincronicamente confirmada forma duradoura Olá primário e quorum de saudação de secundários, ou será anulada.</span><span class="sxs-lookup"><span data-stu-id="76749-157">A write is either synchronously committed durably by both hello primary and hello quorum of secondaries, or it is aborted.</span></span> <span data-ttu-id="76749-158">Uma leitura sempre é confirmada por leitura quorum de maioria de hello, um cliente nunca pode ver uma gravação não confirmada ou parcial e sempre é garantido tooread hello mais recente confirmada gravação.</span><span class="sxs-lookup"><span data-stu-id="76749-158">A read is always acknowledged by hello majority read quorum, a client can never see an uncommitted or partial write and is always guaranteed tooread hello latest acknowledged write.</span></span> 
* <span data-ttu-id="76749-159">Contas Cosmos DB do Azure que são consistência forte toouse configurado não é possível associar mais de uma região do Azure com sua conta do banco de dados do Azure Cosmos.</span><span class="sxs-lookup"><span data-stu-id="76749-159">Azure Cosmos DB accounts that are configured toouse strong consistency cannot associate more than one Azure region with their Azure Cosmos DB account.</span></span> 
* <span data-ttu-id="76749-160">Olá custo de uma operação de leitura (em termos de [unidades de solicitação](request-units.md) consumido) com consistência forte é maior do que a sessão e eventual, mas Olá mesmo como desatualização associada.</span><span class="sxs-lookup"><span data-stu-id="76749-160">hello cost of a read operation (in terms of [request units](request-units.md) consumed) with strong consistency is higher than session and eventual, but hello same as bounded staleness.</span></span>

<span data-ttu-id="76749-161">**Bounded staleness**:</span><span class="sxs-lookup"><span data-stu-id="76749-161">**Bounded staleness**:</span></span> 

* <span data-ttu-id="76749-162">Coerência de desatualização associada garante que as leituras de saudação podem atrasar gravações no máximo *K* versões ou prefixos de um item ou *t* intervalo de tempo.</span><span class="sxs-lookup"><span data-stu-id="76749-162">Bounded staleness consistency guarantees that hello reads may lag behind writes by at most *K* versions or prefixes of an item or *t* time-interval.</span></span> 
* <span data-ttu-id="76749-163">Portanto, quando escolher limitada envelhecimento, Olá "envelhecimento" pode ser configurado de duas maneiras: número de versões *K* do item de saudação pelo qual Olá leituras atrasem Olá gravações e o intervalo de tempo de saudação *t*</span><span class="sxs-lookup"><span data-stu-id="76749-163">Therefore, when choosing bounded staleness, hello "staleness" can be configured in two ways: number of versions *K* of hello item by which hello reads lag behind hello writes, and hello time interval *t*</span></span> 
* <span data-ttu-id="76749-164">Limitado envelhecimento oferece total global ordem exceto dentro hello "janela envelhecimento."</span><span class="sxs-lookup"><span data-stu-id="76749-164">Bounded staleness offers total global order except within hello "staleness window."</span></span> <span data-ttu-id="76749-165">Olá monotônico ler garantias existe dentro de uma região dentro e fora de hello "janela envelhecimento."</span><span class="sxs-lookup"><span data-stu-id="76749-165">hello monotonic read guarantees exists within a region both inside and outside hello "staleness window."</span></span> 
* <span data-ttu-id="76749-166">A bounded staleness oferece garantia de consistência mais forte do que session ou eventual.</span><span class="sxs-lookup"><span data-stu-id="76749-166">Bounded staleness provides a stronger consistency guarantee than session or eventual consistency.</span></span> <span data-ttu-id="76749-167">Para aplicativos distribuídos globalmente, é recomendável que você use desatualização associada para cenários onde você seria como consistência forte toohave mas também quer 99,99% de disponibilidade e de baixa latência.</span><span class="sxs-lookup"><span data-stu-id="76749-167">For globally distributed applications, we recommend you use bounded staleness for scenarios where you would like toohave strong consistency but also want 99.99% availability and low latency.</span></span> 
* <span data-ttu-id="76749-168">As contas do Azure Cosmos DB configuradas com a consistência de desatualização limitada podem associar qualquer número de regiões do Azure à respectiva conta do Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="76749-168">Azure Cosmos DB accounts that are configured with bounded staleness consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span></span> 
* <span data-ttu-id="76749-169">Olá custo de uma operação de leitura (em termos de RUs consumido) com desatualização associada for maior do que a sessão e consistência eventual, mas Olá mesmo como consistência forte.</span><span class="sxs-lookup"><span data-stu-id="76749-169">hello cost of a read operation (in terms of RUs consumed) with bounded staleness is higher than session and eventual consistency, but hello same as strong consistency.</span></span>

<span data-ttu-id="76749-170">**Session**:</span><span class="sxs-lookup"><span data-stu-id="76749-170">**Session**:</span></span> 

* <span data-ttu-id="76749-171">Ao contrários dos modelos de consistência global Olá oferecidos pelos níveis de consistência envelhecimento forte e limitada, a coerência de sessão é tooa escopo sessão de cliente.</span><span class="sxs-lookup"><span data-stu-id="76749-171">Unlike hello global consistency models offered by strong and bounded staleness consistency levels, session consistency is scoped tooa client session.</span></span> 
* <span data-ttu-id="76749-172">A consistência session é ideal para todos os cenários em que há o envolvimento de um dispositivo ou uma sessão de usuário, uma vez que ela garante leituras monotônicas, gravações monotônicas e RYW (leitura de suas próprias gravações).</span><span class="sxs-lookup"><span data-stu-id="76749-172">Session consistency is ideal for all scenarios where a device or user session is involved since it guarantees monotonic reads, monotonic writes, and read your own writes (RYW) guarantees.</span></span> 
* <span data-ttu-id="76749-173">A coerência de sessão fornece consistência previsível para uma sessão e máxima de taxa de transferência de leitura, oferecendo leituras e gravações de latência mais baixas Olá.</span><span class="sxs-lookup"><span data-stu-id="76749-173">Session consistency provides predictable consistency for a session, and maximum read throughput while offering hello lowest latency writes and reads.</span></span> 
* <span data-ttu-id="76749-174">As contas do Azure Cosmos DB configuradas com a consistência de sessão podem associar qualquer número de regiões do Azure à respectiva conta do Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="76749-174">Azure Cosmos DB accounts that are configured with session consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span></span> 
* <span data-ttu-id="76749-175">Olá custo de uma operação de leitura (em termos de RUs consumido) com a sessão de nível de consistência é menor que envelhecimento forte e limitado, mas consistência eventual mais de</span><span class="sxs-lookup"><span data-stu-id="76749-175">hello cost of a read operation (in terms of RUs consumed) with session consistency level is less than strong and bounded staleness, but more than eventual consistency</span></span>

<span data-ttu-id="76749-176"><a id="consistent-prefix"></a>
**Prefixo consistente**:</span><span class="sxs-lookup"><span data-stu-id="76749-176"><a id="consistent-prefix"></a>
**Consistent Prefix**:</span></span> 

* <span data-ttu-id="76749-177">Prefixo consistente garante que na ausência de qualquer mais gravações, Olá réplicas no grupo Olá convertidas eventualmente.</span><span class="sxs-lookup"><span data-stu-id="76749-177">Consistent prefix guarantees that in absence of any further writes, hello replicas within hello group eventually converge.</span></span> 
* <span data-ttu-id="76749-178">O prefixo consistente garante que as leituras nunca vejam gravações fora de ordem.</span><span class="sxs-lookup"><span data-stu-id="76749-178">Consistent prefix guarantees that reads never see out of order writes.</span></span> <span data-ttu-id="76749-179">Se gravações foram executadas na ordem de saudação `A, B, C`, em seguida, um cliente vê o `A`, `A,B`, ou `A,B,C`, mas nunca fora de ordem como `A,C` ou `B,A,C`.</span><span class="sxs-lookup"><span data-stu-id="76749-179">If writes were performed in hello order `A, B, C`, then a client sees either `A`, `A,B`, or `A,B,C`, but never out of order like `A,C` or `B,A,C`.</span></span>
* <span data-ttu-id="76749-180">As contas do Azure Cosmos DB configuradas com a consistência de prefixo consistente podem associar qualquer número de regiões do Azure à respectiva conta do Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="76749-180">Azure Cosmos DB accounts that are configured with consistent prefix consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span></span> 

<span data-ttu-id="76749-181">**Eventual**:</span><span class="sxs-lookup"><span data-stu-id="76749-181">**Eventual**:</span></span> 

* <span data-ttu-id="76749-182">Consistência eventual garante que na ausência de qualquer mais gravações, Olá réplicas no grupo Olá convertidas eventualmente.</span><span class="sxs-lookup"><span data-stu-id="76749-182">Eventual consistency guarantees that in absence of any further writes, hello replicas within hello group eventually converge.</span></span> 
* <span data-ttu-id="76749-183">Consistência eventual é a forma mais fraca Olá de consistência onde um cliente pode obter valores hello mais antigos que Olá que ele tinha visto antes.</span><span class="sxs-lookup"><span data-stu-id="76749-183">Eventual consistency is hello weakest form of consistency where a client may get hello values that are older than hello ones it had seen before.</span></span>
* <span data-ttu-id="76749-184">Consistência eventual fornece consistência de leitura hello mais fraco, mas oferece hello latência mais baixa para leituras e gravações.</span><span class="sxs-lookup"><span data-stu-id="76749-184">Eventual consistency provides hello weakest read consistency but offers hello lowest latency for both reads and writes.</span></span>
* <span data-ttu-id="76749-185">As contas do Azure Cosmos DB configuradas com a consistência eventual podem associar qualquer número de regiões do Azure à respectiva conta do Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="76749-185">Azure Cosmos DB accounts that are configured with eventual consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span></span> 
* <span data-ttu-id="76749-186">Olá custo de uma operação de leitura (em termos de RUs consumido) com consistência eventual Olá nível é hello mais baixo de todos os níveis de consistência do banco de dados do Azure Cosmos hello.</span><span class="sxs-lookup"><span data-stu-id="76749-186">hello cost of a read operation (in terms of RUs consumed) with hello eventual consistency level is hello lowest of all hello Azure Cosmos DB consistency levels.</span></span>

## <a name="configuring-hello-default-consistency-level"></a><span data-ttu-id="76749-187">Configurando o nível de consistência saudação padrão</span><span class="sxs-lookup"><span data-stu-id="76749-187">Configuring hello default consistency level</span></span>
1. <span data-ttu-id="76749-188">Em Olá [portal do Azure](https://portal.azure.com/), Olá Jumpbar no, clique em **o banco de dados do Azure Cosmos**.</span><span class="sxs-lookup"><span data-stu-id="76749-188">In hello [Azure portal](https://portal.azure.com/), in hello Jumpbar, click **Azure Cosmos DB**.</span></span>
2. <span data-ttu-id="76749-189">Em Olá **o banco de dados do Azure Cosmos** folha, selecione Olá toomodify de conta de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="76749-189">In hello **Azure Cosmos DB** blade, select hello database account toomodify.</span></span>
3. <span data-ttu-id="76749-190">Na folha de conta hello, clique em **padrão consistência**.</span><span class="sxs-lookup"><span data-stu-id="76749-190">In hello account blade, click **Default consistency**.</span></span>
4. <span data-ttu-id="76749-191">Em Olá **consistência padrão** folha, o novo nível de consistência Olá selecione e clique em **salvar**.</span><span class="sxs-lookup"><span data-stu-id="76749-191">In hello **Default Consistency** blade, select hello new consistency level and click **Save**.</span></span>
   
    ![Captura de tela, realce o ícone de configurações de saudação e entrada de consistência padrão](./media/consistency-levels/database-consistency-level-1.png)

## <a name="consistency-levels-for-queries"></a><span data-ttu-id="76749-193">Níveis de consistência para consultas</span><span class="sxs-lookup"><span data-stu-id="76749-193">Consistency levels for queries</span></span>
<span data-ttu-id="76749-194">Por padrão, para os recursos definidos pelo usuário, nível de consistência Olá para consultas é Olá mesmo como o nível de consistência Olá para leituras.</span><span class="sxs-lookup"><span data-stu-id="76749-194">By default, for user-defined resources, hello consistency level for queries is hello same as hello consistency level for reads.</span></span> <span data-ttu-id="76749-195">Por padrão, o índice de saudação é atualizado de forma síncrona em cada inserção, substituição ou exclusão de um contêiner do item toohello Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="76749-195">By default, hello index is updated synchronously on each insert, replace, or delete of an item toohello Cosmos DB container.</span></span> <span data-ttu-id="76749-196">Isso permite consultas Olá toohonor Olá mesmo nível de consistência de ponto de leituras.</span><span class="sxs-lookup"><span data-stu-id="76749-196">This enables hello queries toohonor hello same consistency level as that of point reads.</span></span> <span data-ttu-id="76749-197">Enquanto o banco de dados do Azure Cosmos é otimizada de gravação e oferece suporte a volumes prolongados de gravações, a manutenção do índice síncrona e fazer consultas consistentes, você pode configurar determinada coleções tooupdate seu índice lentamente.</span><span class="sxs-lookup"><span data-stu-id="76749-197">While Azure Cosmos DB is write optimized and supports sustained volumes of writes, synchronous index maintenance and serving consistent queries, you can configure certain collections tooupdate their index lazily.</span></span> <span data-ttu-id="76749-198">Ainda mais a indexação lenta aumenta o desempenho de gravação da saudação e é ideal para cenários de ingestão em massa quando uma carga de trabalho é principalmente pesadas de leitura.</span><span class="sxs-lookup"><span data-stu-id="76749-198">Lazy indexing further boosts hello write performance and is ideal for bulk ingestion scenarios when a workload is primarily read-heavy.</span></span>  

| <span data-ttu-id="76749-199">Modo de indexação</span><span class="sxs-lookup"><span data-stu-id="76749-199">Indexing Mode</span></span> | <span data-ttu-id="76749-200">Leituras</span><span class="sxs-lookup"><span data-stu-id="76749-200">Reads</span></span> | <span data-ttu-id="76749-201">Consultas</span><span class="sxs-lookup"><span data-stu-id="76749-201">Queries</span></span> |
| --- | --- | --- |
| <span data-ttu-id="76749-202">Consistente (padrão)</span><span class="sxs-lookup"><span data-stu-id="76749-202">Consistent (default)</span></span> |<span data-ttu-id="76749-203">Selecione entre forte, desatualização limitada, sessão, prefixo consistente ou eventual</span><span class="sxs-lookup"><span data-stu-id="76749-203">Select from strong, bounded staleness, session, consistent prefix, or eventual</span></span> |<span data-ttu-id="76749-204">Escolher entre strong, bounded staleness, session ou eventual</span><span class="sxs-lookup"><span data-stu-id="76749-204">Select from strong, bounded staleness, session, or eventual</span></span> |
| <span data-ttu-id="76749-205">Lentidão</span><span class="sxs-lookup"><span data-stu-id="76749-205">Lazy</span></span> |<span data-ttu-id="76749-206">Selecione entre forte, desatualização limitada, sessão, prefixo consistente ou eventual</span><span class="sxs-lookup"><span data-stu-id="76749-206">Select from strong, bounded staleness, session, consistent prefix, or eventual</span></span> |<span data-ttu-id="76749-207">Eventual</span><span class="sxs-lookup"><span data-stu-id="76749-207">Eventual</span></span> |
| <span data-ttu-id="76749-208">Nenhum</span><span class="sxs-lookup"><span data-stu-id="76749-208">None</span></span> |<span data-ttu-id="76749-209">Selecione entre forte, desatualização limitada, sessão, prefixo consistente ou eventual</span><span class="sxs-lookup"><span data-stu-id="76749-209">Select from strong, bounded staleness, session, consistent prefix, or eventual</span></span> |<span data-ttu-id="76749-210">Não aplicável</span><span class="sxs-lookup"><span data-stu-id="76749-210">Not applicable</span></span> |

<span data-ttu-id="76749-211">Como com solicitações de leitura, você pode diminuir nível de consistência de saudação de uma solicitação de consulta específica em cada API.</span><span class="sxs-lookup"><span data-stu-id="76749-211">As with read requests, you can lower hello consistency level of a specific query request in each API.</span></span>

## <a name="next-steps"></a><span data-ttu-id="76749-212">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="76749-212">Next steps</span></span>
<span data-ttu-id="76749-213">Se você quiser toodo ler mais sobre níveis de consistência e compensações, recomendamos Olá recursos a seguir:</span><span class="sxs-lookup"><span data-stu-id="76749-213">If you'd like toodo more reading about consistency levels and tradeoffs, we recommend hello following resources:</span></span>

* <span data-ttu-id="76749-214">Doug Terry.</span><span class="sxs-lookup"><span data-stu-id="76749-214">Doug Terry.</span></span> <span data-ttu-id="76749-215">Replicated Data Consistency explained through baseball (vídeo).</span><span class="sxs-lookup"><span data-stu-id="76749-215">Replicated Data Consistency explained through baseball (video).</span></span>   
  [<span data-ttu-id="76749-216">https://www.youtube.com/watch?v=gluIh8zd26I</span><span class="sxs-lookup"><span data-stu-id="76749-216">https://www.youtube.com/watch?v=gluIh8zd26I</span></span>](https://www.youtube.com/watch?v=gluIh8zd26I)
* <span data-ttu-id="76749-217">Doug Terry.</span><span class="sxs-lookup"><span data-stu-id="76749-217">Doug Terry.</span></span> <span data-ttu-id="76749-218">Replicated Data Consistency explained through baseball.</span><span class="sxs-lookup"><span data-stu-id="76749-218">Replicated Data Consistency explained through baseball.</span></span>   
  [<span data-ttu-id="76749-219">http://research.microsoft.com/pubs/157411/ConsistencyAndBaseballReport.pdf</span><span class="sxs-lookup"><span data-stu-id="76749-219">http://research.microsoft.com/pubs/157411/ConsistencyAndBaseballReport.pdf</span></span>](http://research.microsoft.com/pubs/157411/ConsistencyAndBaseballReport.pdf)
* <span data-ttu-id="76749-220">Doug Terry.</span><span class="sxs-lookup"><span data-stu-id="76749-220">Doug Terry.</span></span> <span data-ttu-id="76749-221">Session Guarantees for Weakly Consistent Replicated Data.</span><span class="sxs-lookup"><span data-stu-id="76749-221">Session Guarantees for Weakly Consistent Replicated Data.</span></span>   
  [<span data-ttu-id="76749-222">http://dl.acm.org/citation.cfm?id=383631</span><span class="sxs-lookup"><span data-stu-id="76749-222">http://dl.acm.org/citation.cfm?id=383631</span></span>](http://dl.acm.org/citation.cfm?id=383631)
* <span data-ttu-id="76749-223">Daniel Abadi.</span><span class="sxs-lookup"><span data-stu-id="76749-223">Daniel Abadi.</span></span> <span data-ttu-id="76749-224">Vantagens e desvantagens de consistência no Design da modernos sistemas de banco de dados distribuído: CAP é apenas parte da história Olá ".</span><span class="sxs-lookup"><span data-stu-id="76749-224">Consistency Tradeoffs in Modern Distributed Database Systems Design: CAP is only part of hello story”.</span></span>   
  [<span data-ttu-id="76749-225">http://computer.org/csdl/mags/co/2012/02/mco2012020037-abs.html</span><span class="sxs-lookup"><span data-stu-id="76749-225">http://computer.org/csdl/mags/co/2012/02/mco2012020037-abs.html</span></span>](http://computer.org/csdl/mags/co/2012/02/mco2012020037-abs.html)
* <span data-ttu-id="76749-226">Peter Bailis, Shivaram Venkataraman, Michael J. Franklin, Joseph M. Hellerstein, Ion Stoica.</span><span class="sxs-lookup"><span data-stu-id="76749-226">Peter Bailis, Shivaram Venkataraman, Michael J. Franklin, Joseph M. Hellerstein, Ion Stoica.</span></span> <span data-ttu-id="76749-227">Probabilistic Bounded Staleness (PBS) para quóruns parciais práticos.</span><span class="sxs-lookup"><span data-stu-id="76749-227">Probabilistic Bounded Staleness (PBS) for Practical Partial Quorums.</span></span>   
  [<span data-ttu-id="76749-228">http://vldb.org/pvldb/vol5/p776_peterbailis_vldb2012.pdf</span><span class="sxs-lookup"><span data-stu-id="76749-228">http://vldb.org/pvldb/vol5/p776_peterbailis_vldb2012.pdf</span></span>](http://vldb.org/pvldb/vol5/p776_peterbailis_vldb2012.pdf)
* <span data-ttu-id="76749-229">Werner Vogels.</span><span class="sxs-lookup"><span data-stu-id="76749-229">Werner Vogels.</span></span> <span data-ttu-id="76749-230">Eventual Consistent - Revisited.</span><span class="sxs-lookup"><span data-stu-id="76749-230">Eventual Consistent - Revisited.</span></span>    
  [<span data-ttu-id="76749-231">http://allthingsdistributed.com/2008/12/eventually_consistent.html</span><span class="sxs-lookup"><span data-stu-id="76749-231">http://allthingsdistributed.com/2008/12/eventually_consistent.html</span></span>](http://allthingsdistributed.com/2008/12/eventually_consistent.html)
* <span data-ttu-id="76749-232">Moni Naor, Avishai lã, Olá carga, capacidade e disponibilidade de Quorum sistemas, SIAM diário em computação, 27 n.2, p.423-447, abril de 1998.</span><span class="sxs-lookup"><span data-stu-id="76749-232">Moni Naor , Avishai Wool, hello Load, Capacity, and Availability of Quorum Systems, SIAM Journal on Computing, v.27 n.2, p.423-447, April 1998.</span></span>
  [<span data-ttu-id="76749-233">http://epubs.siam.org/doi/abs/10.1137/S0097539795281232</span><span class="sxs-lookup"><span data-stu-id="76749-233">http://epubs.siam.org/doi/abs/10.1137/S0097539795281232</span></span>](http://epubs.siam.org/doi/abs/10.1137/S0097539795281232)
* <span data-ttu-id="76749-234">Sebastian Burckhardt, Chris Dern, Macanal Musuvathi, Roy Tan, linha: um linearizability completa e automática verificador, procedimentos da conferência de ACM SIGPLAN 2010 Olá no idioma de design e implementação, 05-10 de junho de 2010, Toronto, Ontário, de programação Canadá [doi > 10.1145/1806596.1806634] [http://dl.acm.org/citation.cfm?id=1806634](http://dl.acm.org/citation.cfm?id=1806634)</span><span class="sxs-lookup"><span data-stu-id="76749-234">Sebastian Burckhardt, Chris Dern, Macanal Musuvathi, Roy Tan, Line-up: a complete and automatic linearizability checker, Proceedings of hello 2010 ACM SIGPLAN conference on Programming language design and implementation, June 05-10, 2010, Toronto, Ontario, Canada  [doi>10.1145/1806596.1806634] [http://dl.acm.org/citation.cfm?id=1806634](http://dl.acm.org/citation.cfm?id=1806634)</span></span>
* <span data-ttu-id="76749-235">Peter Bailis, Shivaram Venkataraman, Michael J. Franklin, Joseph M. Hellerstein, Stoica de retenção limitado com probabilidade envelhecimento para quorums parciais práticos, procedimentos da saudação Endowment VLDB, v. 5 n.8, p.776-787, abril de 2012 [http:// DL.ACM.org/Citation.cfm?ID=2212359](http://dl.acm.org/citation.cfm?id=2212359)</span><span class="sxs-lookup"><span data-stu-id="76749-235">Peter Bailis, Shivaram Venkataraman, Michael J. Franklin, Joseph M. Hellerstein , Ion Stoica, Probabilistically bounded staleness for practical partial quorums, Proceedings of hello VLDB Endowment, v.5 n.8, p.776-787, April 2012 [http://dl.acm.org/citation.cfm?id=2212359](http://dl.acm.org/citation.cfm?id=2212359)</span></span>
