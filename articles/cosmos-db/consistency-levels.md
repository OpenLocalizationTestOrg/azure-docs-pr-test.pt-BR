---
title: "Níveis de consistência no Azure Cosmos DB | Microsoft Docs"
description: "O Azure Cosmos DB tem cinco níveis de consistência que ajudam a equilibrar prós e contras de consistência eventual, disponibilidade e latência."
keywords: "consistência eventual, azure cosmos db, Microsoft azure"
services: cosmos-db
author: mimig1
manager: jhubbard
editor: cgronlun
documentationcenter: 
ms.assetid: 3fe51cfa-a889-4a4a-b320-16bf871fe74c
ms.service: cosmos-db
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/16/2017
ms.author: mimig
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: a1ebec2285982c70aa9dc49950769fe18e2e2d0d
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/03/2017
---
# <a name="tunable-data-consistency-levels-in-azure-cosmos-db"></a><span data-ttu-id="6d998-104">Níveis ajustáveis de consistência de dados no Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="6d998-104">Tunable data consistency levels in Azure Cosmos DB</span></span>
<span data-ttu-id="6d998-105">O Azure Cosmos DB é projetado desde o início pensando em distribuição global para cada modelo de dados.</span><span class="sxs-lookup"><span data-stu-id="6d998-105">Azure Cosmos DB is designed from the ground up with global distribution in mind for every data model.</span></span> <span data-ttu-id="6d998-106">Ele se destina a oferecer garantias de baixa latência previsível, um SLA de disponibilidade de 99,99% e vários modelos flexíveis de consistência bem definidos.</span><span class="sxs-lookup"><span data-stu-id="6d998-106">It is designed to offer predictable low latency guarantees, a 99.99% availability SLA, and multiple well-defined relaxed consistency models.</span></span> <span data-ttu-id="6d998-107">Atualmente, o Azure Cosmos DB fornece cinco níveis de consistência: forte, desatualização limitada, sessão, prefixo consistente e eventual.</span><span class="sxs-lookup"><span data-stu-id="6d998-107">Currently, Azure Cosmos DB provides five consistency levels: strong, bounded-staleness, session, consistent prefix, and eventual.</span></span> 

<span data-ttu-id="6d998-108">Além dos modelos de consistência **forte** e **eventual** geralmente oferecidos por bancos de dados distribuídos, o Azure Cosmos DB oferece mais três modelos de consistência cuidadosamente codificados e operacionalizados, e validou sua utilidade em casos de uso do mundo real.</span><span class="sxs-lookup"><span data-stu-id="6d998-108">Besides **strong** and **eventual consistency** models commonly offered by distributed databases, Azure Cosmos DB offers three more carefully codified and operationalized consistency models, and has validated their usefulness against real world use cases.</span></span> <span data-ttu-id="6d998-109">Estes são os níveis de consistência: **desatualização limitada**, **sessão** e **prefixo consistente**.</span><span class="sxs-lookup"><span data-stu-id="6d998-109">These are the **bounded staleness**, **session**, and **consistent prefix** consistency levels.</span></span> <span data-ttu-id="6d998-110">Coletivamente, esses cinco níveis de consistência permitem obter um equilíbrio bem pensado entre consistência, disponibilidade e latência.</span><span class="sxs-lookup"><span data-stu-id="6d998-110">Collectively these five consistency levels enable you to make well-reasoned trade-offs between consistency, availability, and latency.</span></span> 

## <a name="distributed-databases-and-consistency"></a><span data-ttu-id="6d998-111">Consistência e bancos de dados distribuídos</span><span class="sxs-lookup"><span data-stu-id="6d998-111">Distributed databases and consistency</span></span>
<span data-ttu-id="6d998-112">Os bancos de dados distribuídos comercialmente se enquadram em duas categorias: bancos de dados que não oferecem opções de consistência bem definidas e comprovadas e bancos de dados que oferecem duas opções de programação extrema (consistência forte versus consistência eventual).</span><span class="sxs-lookup"><span data-stu-id="6d998-112">Commercial distributed databases fall into two categories: databases that do not offer well-defined, provable consistency choices at all, and databases which offer two extreme programmability choices (strong vs. eventual consistency).</span></span> 

<span data-ttu-id="6d998-113">A primeira sobrecarrega os desenvolvedores de aplicativos com detalhes de seus protocolos de replicação e espera que eles façam compensações difíceis entre consistência, disponibilidade, latência e taxa de transferência.</span><span class="sxs-lookup"><span data-stu-id="6d998-113">The former burdens application developers with minutia of their replication protocols and expects them to make difficult tradeoffs between consistency, availability, latency, and throughput.</span></span> <span data-ttu-id="6d998-114">A segunda opção coloca uma pressão para escolher entre os dois extremos.</span><span class="sxs-lookup"><span data-stu-id="6d998-114">The latter puts a pressure to choose one of the two extremes.</span></span> <span data-ttu-id="6d998-115">Apesar da abundância de pesquisas e propostas de mais de 50 modelos de consistência, a comunidade de banco de dados distribuído não tem sido capaz de comercializar níveis de consistência diferentes da consistência forte e consistência eventual.</span><span class="sxs-lookup"><span data-stu-id="6d998-115">Despite the abundance of research and proposals for more than 50 consistency models, the distributed database community has not been able to commercialize consistency levels beyond strong and eventual consistency.</span></span> <span data-ttu-id="6d998-116">O Cosmos DB permite escolher entre cinco modelos de consistência bem-definidos, juntamente com o espectro de consistência: forte, desatualização limitada, [sessão](http://dl.acm.org/citation.cfm?id=383631), prefixo consistente e eventual.</span><span class="sxs-lookup"><span data-stu-id="6d998-116">Cosmos DB allows developers to choose between five well-defined consistency models along the consistency spectrum – strong, bounded staleness, [session](http://dl.acm.org/citation.cfm?id=383631), consistent prefix, and eventual.</span></span> 

![O Azure Cosmos DB oferece várias opções de modelos de consistência bem definidos (flexíveis) para sua escolha](./media/consistency-levels/five-consistency-levels.png)

<span data-ttu-id="6d998-118">A tabela a seguir ilustra as garantias específicas que cada nível de consistência oferece.</span><span class="sxs-lookup"><span data-stu-id="6d998-118">The following table illustrates the specific guarantees each consistency level provides.</span></span>
 
<span data-ttu-id="6d998-119">**Níveis de consistência e garantias**</span><span class="sxs-lookup"><span data-stu-id="6d998-119">**Consistency Levels and guarantees**</span></span>

| <span data-ttu-id="6d998-120">Nível de Consistência</span><span class="sxs-lookup"><span data-stu-id="6d998-120">Consistency Level</span></span> | <span data-ttu-id="6d998-121">Garantias</span><span class="sxs-lookup"><span data-stu-id="6d998-121">Guarantees</span></span> |
| --- | --- |
| <span data-ttu-id="6d998-122">Strong</span><span class="sxs-lookup"><span data-stu-id="6d998-122">Strong</span></span> | <span data-ttu-id="6d998-123">Transação atômica</span><span class="sxs-lookup"><span data-stu-id="6d998-123">Linearizability</span></span> |
| <span data-ttu-id="6d998-124">Bounded staleness</span><span class="sxs-lookup"><span data-stu-id="6d998-124">Bounded Staleness</span></span> | <span data-ttu-id="6d998-125">Prefixo consistente.</span><span class="sxs-lookup"><span data-stu-id="6d998-125">Consistent Prefix.</span></span> <span data-ttu-id="6d998-126">Lê latência por trás de gravações por meio de prefixos k ou intervalos t</span><span class="sxs-lookup"><span data-stu-id="6d998-126">Reads lag behind writes by k prefixes or t interval</span></span> |
| <span data-ttu-id="6d998-127">Session</span><span class="sxs-lookup"><span data-stu-id="6d998-127">Session</span></span>   | <span data-ttu-id="6d998-128">Prefixo consistente.</span><span class="sxs-lookup"><span data-stu-id="6d998-128">Consistent Prefix.</span></span> <span data-ttu-id="6d998-129">Leituras monotônicas, gravações monotônicas, read-your-writes (operações de leitura refletem gravações anteriores), write-follows-reads (gravações são propagadas após as leituras)</span><span class="sxs-lookup"><span data-stu-id="6d998-129">Monotonic reads, monotonic writes, read-your-writes, write-follows-reads</span></span> |
| <span data-ttu-id="6d998-130">Prefixo consistente</span><span class="sxs-lookup"><span data-stu-id="6d998-130">Consistent Prefix</span></span> | <span data-ttu-id="6d998-131">As atualizações retornadas são algum prefixo de todas as atualizações, sem intervalos</span><span class="sxs-lookup"><span data-stu-id="6d998-131">Updates returned are some prefix of all the updates, with no gaps</span></span> |
| <span data-ttu-id="6d998-132">Eventual</span><span class="sxs-lookup"><span data-stu-id="6d998-132">Eventual</span></span>  | <span data-ttu-id="6d998-133">Leituras fora de ordem</span><span class="sxs-lookup"><span data-stu-id="6d998-133">Out of order reads</span></span> |

<span data-ttu-id="6d998-134">Você pode configurar o nível de consistência padrão na sua conta do Cosmos DB (e mais tarde, substituir a consistência em uma solicitação de leitura específica).</span><span class="sxs-lookup"><span data-stu-id="6d998-134">You can configure the default consistency level on your Cosmos DB account (and later override the consistency on a specific read request).</span></span> <span data-ttu-id="6d998-135">Internamente, o nível de consistência padrão aplica-se aos dados nos conjuntos de partições que podem abranger regiões.</span><span class="sxs-lookup"><span data-stu-id="6d998-135">Internally, the default consistency level applies to data within the partition sets which may span regions.</span></span> <span data-ttu-id="6d998-136">Cerca de 73% dos nossos locatários usam a consistência de sessão e 20% preferem desatualização limitada.</span><span class="sxs-lookup"><span data-stu-id="6d998-136">About 73% of our tenants use session consistency and 20% prefer bounded staleness.</span></span> <span data-ttu-id="6d998-137">Observamos que aproximadamente 3% de nossos clientes experimentam vários níveis de consistência inicialmente antes de escolherem uma opção de consistência específica para seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="6d998-137">We observe that approximately 3% of our customers experiment with various consistency levels initially before settling on a specific consistency choice for their application.</span></span> <span data-ttu-id="6d998-138">Também observamos que apenas 2% de nossos locatários substituem os níveis de consistência por solicitação.</span><span class="sxs-lookup"><span data-stu-id="6d998-138">We also observe that only 2% of our tenants override consistency levels on a per request basis.</span></span> 

<span data-ttu-id="6d998-139">No Cosmos DB, leituras que atuam em consistência de sessão, prefixo consistente e eventual são duas vezes mais econômicas que leituras com consistência forte ou de desatualização limitada.</span><span class="sxs-lookup"><span data-stu-id="6d998-139">In Cosmos DB, reads served at session, consistent prefix and eventual consistency are twice as cheap as reads with strong or bounded staleness consistency.</span></span> <span data-ttu-id="6d998-140">O Cosmos DB tem SLAs abrangente de 99,99% líderes do setor, incluindo garantias de consistência junto com disponibilidade, taxa de transferência e latência.</span><span class="sxs-lookup"><span data-stu-id="6d998-140">Cosmos DB has industry leading comprehensive 99.99% SLAs including consistency guarantees along with availability, throughput, and latency.</span></span> <span data-ttu-id="6d998-141">Utilizamos um [verificador de transação atômica](http://dl.acm.org/citation.cfm?id=1806634), que opera continuamente em nossa telemetria do serviço e relata de maneira aberta quaisquer violações de consistência a você.</span><span class="sxs-lookup"><span data-stu-id="6d998-141">We employ a [linearizability checker](http://dl.acm.org/citation.cfm?id=1806634), which continuously operates over our service telemetry and openly reports any consistency violations to you.</span></span> <span data-ttu-id="6d998-142">Para desatualização limitada, monitoramos e relatamos quaisquer violações de limites k e t.</span><span class="sxs-lookup"><span data-stu-id="6d998-142">For bounded staleness, we monitor and report any violations to k and t bounds.</span></span> <span data-ttu-id="6d998-143">Para todos os cinco níveis de consistência reduzida, podemos também relatar a [métrica probabilística de desatualização limitada](http://dl.acm.org/citation.cfm?id=2212359) diretamente a você.</span><span class="sxs-lookup"><span data-stu-id="6d998-143">For all five relaxed consistency levels, we also report the [probabilistic bounded staleness metric](http://dl.acm.org/citation.cfm?id=2212359) directly to you.</span></span>  

## <a name="scope-of-consistency"></a><span data-ttu-id="6d998-144">Escopo de consistência</span><span class="sxs-lookup"><span data-stu-id="6d998-144">Scope of consistency</span></span>
<span data-ttu-id="6d998-145">A granularidade da consistência engloba uma única solicitação de usuário.</span><span class="sxs-lookup"><span data-stu-id="6d998-145">The granularity of consistency is scoped to a single user request.</span></span> <span data-ttu-id="6d998-146">Uma solicitação de gravação pode corresponder a uma transação de inserir, substituir, upsert ou excluir.</span><span class="sxs-lookup"><span data-stu-id="6d998-146">A write request may correspond to an insert, replace, upsert, or delete transaction.</span></span> <span data-ttu-id="6d998-147">Assim como nas gravações, uma transação de leitura/consulta também tem como escopo uma única solicitação de usuário.</span><span class="sxs-lookup"><span data-stu-id="6d998-147">As with writes, a read/query transaction is also scoped to a single user request.</span></span> <span data-ttu-id="6d998-148">O usuário pode ter que paginar um amplo conjunto de resultados, abrangendo várias partições, mas cada transação de leitura engloba uma única página e é servida de dentro de uma única partição.</span><span class="sxs-lookup"><span data-stu-id="6d998-148">The user may be required to paginate over a large result-set, spanning multiple partitions, but each read transaction is scoped to a single page and served from within a single partition.</span></span>

## <a name="consistency-levels"></a><span data-ttu-id="6d998-149">Níveis de consistência</span><span class="sxs-lookup"><span data-stu-id="6d998-149">Consistency levels</span></span>
<span data-ttu-id="6d998-150">Você pode configurar um nível de consistência padrão na conta do banco de dados que se aplica a todas as coleções (e os bancos de dados) em sua conta do Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="6d998-150">You can configure a default consistency level on your database account that applies to all collections (and databases) under your Cosmos DB account.</span></span> <span data-ttu-id="6d998-151">Por padrão, todas as leituras e consultas emitidas para os recursos definidos pelo usuário usarão o nível de consistência padrão especificado na conta do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="6d998-151">By default, all reads and queries issued against the user-defined resources use the default consistency level specified on the database account.</span></span> <span data-ttu-id="6d998-152">Você pode relaxar o nível de consistência de uma solicitação de leitura/consulta específica usado em cada uma das APIs com suporte.</span><span class="sxs-lookup"><span data-stu-id="6d998-152">You can relax the consistency level of a specific read/query request using in each of the supported APIs.</span></span> <span data-ttu-id="6d998-153">Há suporte para cinco tipos de nível de consistência no protocolo de replicação do Azure Cosmos DB que fornecem uma clara compensação entre garantias de consistência específica e desempenho, conforme descrito abaixo.</span><span class="sxs-lookup"><span data-stu-id="6d998-153">There are five types of consistency levels supported by the Azure Cosmos DB replication protocol that provide a clear trade-off between specific consistency guarantees and performance, as described in this section.</span></span>

<span data-ttu-id="6d998-154">**Strong**:</span><span class="sxs-lookup"><span data-stu-id="6d998-154">**Strong**:</span></span> 

* <span data-ttu-id="6d998-155">A coerência forte oferece uma garantia de [transação atômica](https://aphyr.com/posts/313-strong-consistency-models), assegurando que as leituras retornarão a versão mais recente de um item.</span><span class="sxs-lookup"><span data-stu-id="6d998-155">Strong consistency offers a [linearizability](https://aphyr.com/posts/313-strong-consistency-models) guarantee with the reads guaranteed to return the most recent version of an item.</span></span> 
* <span data-ttu-id="6d998-156">a consistência Strong garante que uma gravação fique visível somente depois de confirmada permanentemente pela maioria do quorum de réplicas.</span><span class="sxs-lookup"><span data-stu-id="6d998-156">Strong consistency guarantees that a write is only visible after it is committed durably by the majority quorum of replicas.</span></span> <span data-ttu-id="6d998-157">Uma gravação é confirmada de modo síncrono e permanente pelo quorum primário e secundário, ou é anulada.</span><span class="sxs-lookup"><span data-stu-id="6d998-157">A write is either synchronously committed durably by both the primary and the quorum of secondaries, or it is aborted.</span></span> <span data-ttu-id="6d998-158">Uma leitura sempre é confirmada pela maioria do quorum de leitura. Um cliente nunca pode ver uma gravação não confirmada ou parcial, e sempre há a garantia de leitura da última gravação confirmada.</span><span class="sxs-lookup"><span data-stu-id="6d998-158">A read is always acknowledged by the majority read quorum, a client can never see an uncommitted or partial write and is always guaranteed to read the latest acknowledged write.</span></span> 
* <span data-ttu-id="6d998-159">As contas do Azure Cosmos DB que são configuradas para usar coerência forte não podem associar mais de uma região do Azure à respectiva conta do Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="6d998-159">Azure Cosmos DB accounts that are configured to use strong consistency cannot associate more than one Azure region with their Azure Cosmos DB account.</span></span> 
* <span data-ttu-id="6d998-160">O custo de uma operação de leitura (em termos de [unidades de solicitação](request-units.md) consumidas) com coerência forte é maior do que com sessão e eventual, mas igual ao de obsolescência vinculada.</span><span class="sxs-lookup"><span data-stu-id="6d998-160">The cost of a read operation (in terms of [request units](request-units.md) consumed) with strong consistency is higher than session and eventual, but the same as bounded staleness.</span></span>

<span data-ttu-id="6d998-161">**Bounded staleness**:</span><span class="sxs-lookup"><span data-stu-id="6d998-161">**Bounded staleness**:</span></span> 

* <span data-ttu-id="6d998-162">A consistência desatualização limitada garante que as leituras possam não acompanhar as gravações até, no máximo, os prefixos ou as versões *K* de um item ou intervalo de tempo *t*.</span><span class="sxs-lookup"><span data-stu-id="6d998-162">Bounded staleness consistency guarantees that the reads may lag behind writes by at most *K* versions or prefixes of an item or *t* time-interval.</span></span> 
* <span data-ttu-id="6d998-163">Portanto, quando escolher desatualização limitada, a "desatualização" pode ser configurada de duas maneiras: número de versões *K* do item pelo qual as leituras fiquem atrás das gravações e o intervalo de tempo *t*</span><span class="sxs-lookup"><span data-stu-id="6d998-163">Therefore, when choosing bounded staleness, the "staleness" can be configured in two ways: number of versions *K* of the item by which the reads lag behind the writes, and the time interval *t*</span></span> 
* <span data-ttu-id="6d998-164">A desatualização limitada oferece ordem global total, exceto na "janela de desatualização".</span><span class="sxs-lookup"><span data-stu-id="6d998-164">Bounded staleness offers total global order except within the "staleness window."</span></span> <span data-ttu-id="6d998-165">Há garantias de leitura monotônica em uma região tanto dentro quanto fora da "janela de desatualização".</span><span class="sxs-lookup"><span data-stu-id="6d998-165">The monotonic read guarantees exists within a region both inside and outside the "staleness window."</span></span> 
* <span data-ttu-id="6d998-166">A bounded staleness oferece garantia de consistência mais forte do que session ou eventual.</span><span class="sxs-lookup"><span data-stu-id="6d998-166">Bounded staleness provides a stronger consistency guarantee than session or eventual consistency.</span></span> <span data-ttu-id="6d998-167">Para aplicativos distribuídos globalmente, é recomendável usar bounded staleness para cenários em que deseja ter consistência forte, mas também 99,99% de disponibilidade e baixa latência.</span><span class="sxs-lookup"><span data-stu-id="6d998-167">For globally distributed applications, we recommend you use bounded staleness for scenarios where you would like to have strong consistency but also want 99.99% availability and low latency.</span></span> 
* <span data-ttu-id="6d998-168">As contas do Azure Cosmos DB configuradas com a consistência de desatualização limitada podem associar qualquer número de regiões do Azure à respectiva conta do Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="6d998-168">Azure Cosmos DB accounts that are configured with bounded staleness consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span></span> 
* <span data-ttu-id="6d998-169">O custo de uma operação de leitura (em termos de RUs consumidas) com obsolescência vinculada é maior do que com sessão e eventual, mas igual ao da coerência forte.</span><span class="sxs-lookup"><span data-stu-id="6d998-169">The cost of a read operation (in terms of RUs consumed) with bounded staleness is higher than session and eventual consistency, but the same as strong consistency.</span></span>

<span data-ttu-id="6d998-170">**Session**:</span><span class="sxs-lookup"><span data-stu-id="6d998-170">**Session**:</span></span> 

* <span data-ttu-id="6d998-171">Ao contrário dos modelos globais de consistência oferecidos pelos níveis de consistência strong e bounded staleness, a consistência session engloba uma sessão de cliente.</span><span class="sxs-lookup"><span data-stu-id="6d998-171">Unlike the global consistency models offered by strong and bounded staleness consistency levels, session consistency is scoped to a client session.</span></span> 
* <span data-ttu-id="6d998-172">A consistência session é ideal para todos os cenários em que há o envolvimento de um dispositivo ou uma sessão de usuário, uma vez que ela garante leituras monotônicas, gravações monotônicas e RYW (leitura de suas próprias gravações).</span><span class="sxs-lookup"><span data-stu-id="6d998-172">Session consistency is ideal for all scenarios where a device or user session is involved since it guarantees monotonic reads, monotonic writes, and read your own writes (RYW) guarantees.</span></span> 
* <span data-ttu-id="6d998-173">A consistência session oferece consistência previsível para uma sessão, além de taxa de transferência de leitura máxima, ao mesmo tempo que oferece gravações e leituras de latência mais baixa.</span><span class="sxs-lookup"><span data-stu-id="6d998-173">Session consistency provides predictable consistency for a session, and maximum read throughput while offering the lowest latency writes and reads.</span></span> 
* <span data-ttu-id="6d998-174">As contas do Azure Cosmos DB configuradas com a consistência de sessão podem associar qualquer número de regiões do Azure à respectiva conta do Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="6d998-174">Azure Cosmos DB accounts that are configured with session consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span></span> 
* <span data-ttu-id="6d998-175">O custo de uma operação de leitura (em termos de RUs consumidas) com nível de consistência session é menor do que com strong e bounded staleness, mas maior do que com a consistência eventual</span><span class="sxs-lookup"><span data-stu-id="6d998-175">The cost of a read operation (in terms of RUs consumed) with session consistency level is less than strong and bounded staleness, but more than eventual consistency</span></span>

<span data-ttu-id="6d998-176"><a id="consistent-prefix"></a>
**Prefixo consistente**:</span><span class="sxs-lookup"><span data-stu-id="6d998-176"><a id="consistent-prefix"></a>
**Consistent Prefix**:</span></span> 

* <span data-ttu-id="6d998-177">O prefixo consistente garante que, na ausência de qualquer gravação adicional, as réplicas no grupo acabem convergindo.</span><span class="sxs-lookup"><span data-stu-id="6d998-177">Consistent prefix guarantees that in absence of any further writes, the replicas within the group eventually converge.</span></span> 
* <span data-ttu-id="6d998-178">O prefixo consistente garante que as leituras nunca vejam gravações fora de ordem.</span><span class="sxs-lookup"><span data-stu-id="6d998-178">Consistent prefix guarantees that reads never see out of order writes.</span></span> <span data-ttu-id="6d998-179">Se as gravações tiverem sido realizadas na ordem `A, B, C`, o cliente verá `A`, `A,B` ou `A,B,C`, mas nunca fora de ordem, como `A,C` ou `B,A,C`.</span><span class="sxs-lookup"><span data-stu-id="6d998-179">If writes were performed in the order `A, B, C`, then a client sees either `A`, `A,B`, or `A,B,C`, but never out of order like `A,C` or `B,A,C`.</span></span>
* <span data-ttu-id="6d998-180">As contas do Azure Cosmos DB configuradas com a consistência de prefixo consistente podem associar qualquer número de regiões do Azure à respectiva conta do Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="6d998-180">Azure Cosmos DB accounts that are configured with consistent prefix consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span></span> 

<span data-ttu-id="6d998-181">**Eventual**:</span><span class="sxs-lookup"><span data-stu-id="6d998-181">**Eventual**:</span></span> 

* <span data-ttu-id="6d998-182">A consistência eventual garante que, na ausência de qualquer gravação adicional, as réplicas no grupo acabem convergindo.</span><span class="sxs-lookup"><span data-stu-id="6d998-182">Eventual consistency guarantees that in absence of any further writes, the replicas within the group eventually converge.</span></span> 
* <span data-ttu-id="6d998-183">A consistência eventual é a forma mais fraca de consistência, em que um cliente pode obter valores que sejam mais antigos do que aqueles que tinha visto antes.</span><span class="sxs-lookup"><span data-stu-id="6d998-183">Eventual consistency is the weakest form of consistency where a client may get the values that are older than the ones it had seen before.</span></span>
* <span data-ttu-id="6d998-184">A consistência Eventual oferece a consistência de leitura mais fraca, mas oferece a menor latência para leituras e gravações.</span><span class="sxs-lookup"><span data-stu-id="6d998-184">Eventual consistency provides the weakest read consistency but offers the lowest latency for both reads and writes.</span></span>
* <span data-ttu-id="6d998-185">As contas do Azure Cosmos DB configuradas com a consistência eventual podem associar qualquer número de regiões do Azure à respectiva conta do Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="6d998-185">Azure Cosmos DB accounts that are configured with eventual consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span></span> 
* <span data-ttu-id="6d998-186">O custo de uma operação de leitura (em termos de RUs consumidas) com o nível de consistência eventual é o mais baixo de todos os níveis de consistência do Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="6d998-186">The cost of a read operation (in terms of RUs consumed) with the eventual consistency level is the lowest of all the Azure Cosmos DB consistency levels.</span></span>

## <a name="configuring-the-default-consistency-level"></a><span data-ttu-id="6d998-187">Configurando o nível de consistência padrão</span><span class="sxs-lookup"><span data-stu-id="6d998-187">Configuring the default consistency level</span></span>
1. <span data-ttu-id="6d998-188">No [Portal do Azure](https://portal.azure.com/), na barra esquerda, clique em **Azure Cosmos DB**.</span><span class="sxs-lookup"><span data-stu-id="6d998-188">In the [Azure portal](https://portal.azure.com/), in the Jumpbar, click **Azure Cosmos DB**.</span></span>
2. <span data-ttu-id="6d998-189">Na folha **Azure Cosmos DB**, escolha a conta do banco de dados a ser modificada.</span><span class="sxs-lookup"><span data-stu-id="6d998-189">In the **Azure Cosmos DB** blade, select the database account to modify.</span></span>
3. <span data-ttu-id="6d998-190">Na folha da conta, clique em **Consistência padrão**.</span><span class="sxs-lookup"><span data-stu-id="6d998-190">In the account blade, click **Default consistency**.</span></span>
4. <span data-ttu-id="6d998-191">Na folha **Consistência Padrão**, selecione o novo nível de consistência e clique em **Salvar**.</span><span class="sxs-lookup"><span data-stu-id="6d998-191">In the **Default Consistency** blade, select the new consistency level and click **Save**.</span></span>
   
    ![Captura de tela realçando o ícone Configurações e a entrada Consistência Padrão](./media/consistency-levels/database-consistency-level-1.png)

## <a name="consistency-levels-for-queries"></a><span data-ttu-id="6d998-193">Níveis de consistência para consultas</span><span class="sxs-lookup"><span data-stu-id="6d998-193">Consistency levels for queries</span></span>
<span data-ttu-id="6d998-194">Por padrão, para recursos definidos pelo usuário, o nível de consistência para consultas é o mesmo nível de consistência para leituras.</span><span class="sxs-lookup"><span data-stu-id="6d998-194">By default, for user-defined resources, the consistency level for queries is the same as the consistency level for reads.</span></span> <span data-ttu-id="6d998-195">Por padrão, o índice é atualizado de maneira síncrona em cada inserção, substituição ou exclusão de um item no contêiner do Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="6d998-195">By default, the index is updated synchronously on each insert, replace, or delete of an item to the Cosmos DB container.</span></span> <span data-ttu-id="6d998-196">Isso permite que as consultas sigam o mesmo nível de consistência que as leituras de ponto.</span><span class="sxs-lookup"><span data-stu-id="6d998-196">This enables the queries to honor the same consistency level as that of point reads.</span></span> <span data-ttu-id="6d998-197">Embora o Azure Cosmos DB seja otimizado para gravação e tenha suporte para volumes constantes de gravações, manutenção síncrona de índice e atendimento a consultas consistentes, você pode configurar determinadas coleções para atualizar o próprio índice sem pressa.</span><span class="sxs-lookup"><span data-stu-id="6d998-197">While Azure Cosmos DB is write optimized and supports sustained volumes of writes, synchronous index maintenance and serving consistent queries, you can configure certain collections to update their index lazily.</span></span> <span data-ttu-id="6d998-198">A indexação lenta aumenta ainda mais o desempenho de gravação, sendo ideal para cenários de ingestão em massa em que uma carga de trabalho é basicamente de leitura intensa.</span><span class="sxs-lookup"><span data-stu-id="6d998-198">Lazy indexing further boosts the write performance and is ideal for bulk ingestion scenarios when a workload is primarily read-heavy.</span></span>  

| <span data-ttu-id="6d998-199">Modo de indexação</span><span class="sxs-lookup"><span data-stu-id="6d998-199">Indexing Mode</span></span> | <span data-ttu-id="6d998-200">Leituras</span><span class="sxs-lookup"><span data-stu-id="6d998-200">Reads</span></span> | <span data-ttu-id="6d998-201">Consultas</span><span class="sxs-lookup"><span data-stu-id="6d998-201">Queries</span></span> |
| --- | --- | --- |
| <span data-ttu-id="6d998-202">Consistente (padrão)</span><span class="sxs-lookup"><span data-stu-id="6d998-202">Consistent (default)</span></span> |<span data-ttu-id="6d998-203">Selecione entre forte, desatualização limitada, sessão, prefixo consistente ou eventual</span><span class="sxs-lookup"><span data-stu-id="6d998-203">Select from strong, bounded staleness, session, consistent prefix, or eventual</span></span> |<span data-ttu-id="6d998-204">Escolher entre strong, bounded staleness, session ou eventual</span><span class="sxs-lookup"><span data-stu-id="6d998-204">Select from strong, bounded staleness, session, or eventual</span></span> |
| <span data-ttu-id="6d998-205">Lentidão</span><span class="sxs-lookup"><span data-stu-id="6d998-205">Lazy</span></span> |<span data-ttu-id="6d998-206">Selecione entre forte, desatualização limitada, sessão, prefixo consistente ou eventual</span><span class="sxs-lookup"><span data-stu-id="6d998-206">Select from strong, bounded staleness, session, consistent prefix, or eventual</span></span> |<span data-ttu-id="6d998-207">Eventual</span><span class="sxs-lookup"><span data-stu-id="6d998-207">Eventual</span></span> |
| <span data-ttu-id="6d998-208">Nenhum</span><span class="sxs-lookup"><span data-stu-id="6d998-208">None</span></span> |<span data-ttu-id="6d998-209">Selecione entre forte, desatualização limitada, sessão, prefixo consistente ou eventual</span><span class="sxs-lookup"><span data-stu-id="6d998-209">Select from strong, bounded staleness, session, consistent prefix, or eventual</span></span> |<span data-ttu-id="6d998-210">Não aplicável</span><span class="sxs-lookup"><span data-stu-id="6d998-210">Not applicable</span></span> |

<span data-ttu-id="6d998-211">Assim como nas solicitações de leitura, você pode diminuir o nível de consistência de uma solicitação de consulta específica em cada API.</span><span class="sxs-lookup"><span data-stu-id="6d998-211">As with read requests, you can lower the consistency level of a specific query request in each API.</span></span>

## <a name="next-steps"></a><span data-ttu-id="6d998-212">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="6d998-212">Next steps</span></span>
<span data-ttu-id="6d998-213">Se você quiser ler mais sobre níveis de consistência e tradeoffs, recomendamos os seguintes recursos:</span><span class="sxs-lookup"><span data-stu-id="6d998-213">If you'd like to do more reading about consistency levels and tradeoffs, we recommend the following resources:</span></span>

* <span data-ttu-id="6d998-214">Doug Terry.</span><span class="sxs-lookup"><span data-stu-id="6d998-214">Doug Terry.</span></span> <span data-ttu-id="6d998-215">Replicated Data Consistency explained through baseball (vídeo).</span><span class="sxs-lookup"><span data-stu-id="6d998-215">Replicated Data Consistency explained through baseball (video).</span></span>   
  [<span data-ttu-id="6d998-216">https://www.youtube.com/watch?v=gluIh8zd26I</span><span class="sxs-lookup"><span data-stu-id="6d998-216">https://www.youtube.com/watch?v=gluIh8zd26I</span></span>](https://www.youtube.com/watch?v=gluIh8zd26I)
* <span data-ttu-id="6d998-217">Doug Terry.</span><span class="sxs-lookup"><span data-stu-id="6d998-217">Doug Terry.</span></span> <span data-ttu-id="6d998-218">Replicated Data Consistency explained through baseball.</span><span class="sxs-lookup"><span data-stu-id="6d998-218">Replicated Data Consistency explained through baseball.</span></span>   
  [<span data-ttu-id="6d998-219">http://research.microsoft.com/pubs/157411/ConsistencyAndBaseballReport.pdf</span><span class="sxs-lookup"><span data-stu-id="6d998-219">http://research.microsoft.com/pubs/157411/ConsistencyAndBaseballReport.pdf</span></span>](http://research.microsoft.com/pubs/157411/ConsistencyAndBaseballReport.pdf)
* <span data-ttu-id="6d998-220">Doug Terry.</span><span class="sxs-lookup"><span data-stu-id="6d998-220">Doug Terry.</span></span> <span data-ttu-id="6d998-221">Session Guarantees for Weakly Consistent Replicated Data.</span><span class="sxs-lookup"><span data-stu-id="6d998-221">Session Guarantees for Weakly Consistent Replicated Data.</span></span>   
  [<span data-ttu-id="6d998-222">http://dl.acm.org/citation.cfm?id=383631</span><span class="sxs-lookup"><span data-stu-id="6d998-222">http://dl.acm.org/citation.cfm?id=383631</span></span>](http://dl.acm.org/citation.cfm?id=383631)
* <span data-ttu-id="6d998-223">Daniel Abadi.</span><span class="sxs-lookup"><span data-stu-id="6d998-223">Daniel Abadi.</span></span> <span data-ttu-id="6d998-224">Consistency Tradeoffs in Modern Distributed Database Systems Design: CAP is only part of the story”.</span><span class="sxs-lookup"><span data-stu-id="6d998-224">Consistency Tradeoffs in Modern Distributed Database Systems Design: CAP is only part of the story”.</span></span>   
  [<span data-ttu-id="6d998-225">http://computer.org/csdl/mags/co/2012/02/mco2012020037-abs.html</span><span class="sxs-lookup"><span data-stu-id="6d998-225">http://computer.org/csdl/mags/co/2012/02/mco2012020037-abs.html</span></span>](http://computer.org/csdl/mags/co/2012/02/mco2012020037-abs.html)
* <span data-ttu-id="6d998-226">Peter Bailis, Shivaram Venkataraman, Michael J. Franklin, Joseph M. Hellerstein, Ion Stoica.</span><span class="sxs-lookup"><span data-stu-id="6d998-226">Peter Bailis, Shivaram Venkataraman, Michael J. Franklin, Joseph M. Hellerstein, Ion Stoica.</span></span> <span data-ttu-id="6d998-227">Probabilistic Bounded Staleness (PBS) para quóruns parciais práticos.</span><span class="sxs-lookup"><span data-stu-id="6d998-227">Probabilistic Bounded Staleness (PBS) for Practical Partial Quorums.</span></span>   
  [<span data-ttu-id="6d998-228">http://vldb.org/pvldb/vol5/p776_peterbailis_vldb2012.pdf</span><span class="sxs-lookup"><span data-stu-id="6d998-228">http://vldb.org/pvldb/vol5/p776_peterbailis_vldb2012.pdf</span></span>](http://vldb.org/pvldb/vol5/p776_peterbailis_vldb2012.pdf)
* <span data-ttu-id="6d998-229">Werner Vogels.</span><span class="sxs-lookup"><span data-stu-id="6d998-229">Werner Vogels.</span></span> <span data-ttu-id="6d998-230">Eventual Consistent - Revisited.</span><span class="sxs-lookup"><span data-stu-id="6d998-230">Eventual Consistent - Revisited.</span></span>    
  [<span data-ttu-id="6d998-231">http://allthingsdistributed.com/2008/12/eventually_consistent.html</span><span class="sxs-lookup"><span data-stu-id="6d998-231">http://allthingsdistributed.com/2008/12/eventually_consistent.html</span></span>](http://allthingsdistributed.com/2008/12/eventually_consistent.html)
* <span data-ttu-id="6d998-232">Moni Naor, Avishai Wool, The Load, Capacity, and Availability of Quorum Systems, SIAM Journal on Computing, v.27 n.2, p.423-447, abril de 1998.</span><span class="sxs-lookup"><span data-stu-id="6d998-232">Moni Naor , Avishai Wool, The Load, Capacity, and Availability of Quorum Systems, SIAM Journal on Computing, v.27 n.2, p.423-447, April 1998.</span></span>
  [<span data-ttu-id="6d998-233">http://epubs.siam.org/doi/abs/10.1137/S0097539795281232</span><span class="sxs-lookup"><span data-stu-id="6d998-233">http://epubs.siam.org/doi/abs/10.1137/S0097539795281232</span></span>](http://epubs.siam.org/doi/abs/10.1137/S0097539795281232)
* <span data-ttu-id="6d998-234">Sebastian Burckhardt, Chris Dern, Macanal Musuvathi, Roy Tan, Line-up: a complete and automatic linearizability checker, Proceedings of the 2010 ACM SIGPLAN conference on Programming language design and implementation, 05-10 de junho de 2010, Toronto, Ontário, Canadá [doi>10.1145/1806596.1806634] [http://dl.acm.org/citation.cfm?id=1806634](http://dl.acm.org/citation.cfm?id=1806634)</span><span class="sxs-lookup"><span data-stu-id="6d998-234">Sebastian Burckhardt, Chris Dern, Macanal Musuvathi, Roy Tan, Line-up: a complete and automatic linearizability checker, Proceedings of the 2010 ACM SIGPLAN conference on Programming language design and implementation, June 05-10, 2010, Toronto, Ontario, Canada  [doi>10.1145/1806596.1806634] [http://dl.acm.org/citation.cfm?id=1806634](http://dl.acm.org/citation.cfm?id=1806634)</span></span>
* <span data-ttu-id="6d998-235">Peter Bailis, Shivaram Venkataraman, Michael J. Franklin, Joseph M. Hellerstein, Ion Stoica, Probabilistically bounded staleness for practical partial quorums, Proceedings of the VLDB Endowment, v.5 n.8, p.776-787, abril de 2012 [http://dl.acm.org/citation.cfm?id=2212359](http://dl.acm.org/citation.cfm?id=2212359)</span><span class="sxs-lookup"><span data-stu-id="6d998-235">Peter Bailis, Shivaram Venkataraman, Michael J. Franklin, Joseph M. Hellerstein , Ion Stoica, Probabilistically bounded staleness for practical partial quorums, Proceedings of the VLDB Endowment, v.5 n.8, p.776-787, April 2012 [http://dl.acm.org/citation.cfm?id=2212359](http://dl.acm.org/citation.cfm?id=2212359)</span></span>
