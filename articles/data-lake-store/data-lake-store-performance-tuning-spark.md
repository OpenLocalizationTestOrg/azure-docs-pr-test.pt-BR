---
title: "aaaAzure Data Lake repositório Spark ajuste diretrizes de desempenho | Microsoft Docs"
description: Diretrizes de ajuste de desempenho para Spark do Azure Data Lake Store
services: data-lake-store
documentationcenter: 
author: stewu
manager: amitkul
editor: stewu
ms.assetid: ebde7b9f-2e51-4d43-b7ab-566417221335
ms.service: data-lake-store
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 12/19/2016
ms.author: stewu
ms.openlocfilehash: da1d172e9cb1199ad95605ea1718e78559f79650
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="performance-tuning-guidance-for-spark-on-hdinsight-and-azure-data-lake-store"></a><span data-ttu-id="23405-103">Diretrizes de ajuste do desempenho para o Spark no HDInsight e Azure Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="23405-103">Performance tuning guidance for Spark on HDInsight and Azure Data Lake Store</span></span>

<span data-ttu-id="23405-104">Quando o ajuste de desempenho no Spark, é necessário tooconsider número de saudação de aplicativos que serão executados no cluster.</span><span class="sxs-lookup"><span data-stu-id="23405-104">When tuning performance on Spark, you need tooconsider hello number of apps that will be running on your cluster.</span></span>  <span data-ttu-id="23405-105">Por padrão, você pode executar 4 aplicativos simultaneamente em seu cluster HDI (Observação: configuração padrão de saudação é toochange assunto).</span><span class="sxs-lookup"><span data-stu-id="23405-105">By default, you can run 4 apps concurrently on your HDI cluster (Note: hello default setting is subject toochange).</span></span>  <span data-ttu-id="23405-106">Você pode decidir toouse menos aplicativos para que você pode substituir as configurações padrão de saudação e usar mais de um cluster de saudação para esses aplicativos.</span><span class="sxs-lookup"><span data-stu-id="23405-106">You may decide toouse fewer apps so you can override hello default settings and use more of hello cluster for those apps.</span></span>  

## <a name="prerequisites"></a><span data-ttu-id="23405-107">Pré-requisitos</span><span class="sxs-lookup"><span data-stu-id="23405-107">Prerequisites</span></span>

* <span data-ttu-id="23405-108">**Uma assinatura do Azure**.</span><span class="sxs-lookup"><span data-stu-id="23405-108">**An Azure subscription**.</span></span> <span data-ttu-id="23405-109">Consulte [Obter avaliação gratuita do Azure](https://azure.microsoft.com/pricing/free-trial/).</span><span class="sxs-lookup"><span data-stu-id="23405-109">See [Get Azure free trial](https://azure.microsoft.com/pricing/free-trial/).</span></span>
* <span data-ttu-id="23405-110">**Uma conta do repositório Azure Data Lake**.</span><span class="sxs-lookup"><span data-stu-id="23405-110">**An Azure Data Lake Store account**.</span></span> <span data-ttu-id="23405-111">Para obter instruções sobre como um, ver toocreate [Introdução ao repositório Azure Data Lake](data-lake-store-get-started-portal.md)</span><span class="sxs-lookup"><span data-stu-id="23405-111">For instructions on how toocreate one, see [Get started with Azure Data Lake Store](data-lake-store-get-started-portal.md)</span></span>
* <span data-ttu-id="23405-112">**Cluster de HDInsight do Azure** com acesso tooa conta do repositório Data Lake.</span><span class="sxs-lookup"><span data-stu-id="23405-112">**Azure HDInsight cluster** with access tooa Data Lake Store account.</span></span> <span data-ttu-id="23405-113">Confira [Criar um cluster HDInsight com o Data Lake Store](data-lake-store-hdinsight-hadoop-use-portal.md).</span><span class="sxs-lookup"><span data-stu-id="23405-113">See [Create an HDInsight cluster with Data Lake Store](data-lake-store-hdinsight-hadoop-use-portal.md).</span></span> <span data-ttu-id="23405-114">Verifique se que você habilitar a área de trabalho remota para o cluster de saudação.</span><span class="sxs-lookup"><span data-stu-id="23405-114">Make sure you enable Remote Desktop for hello cluster.</span></span>
* <span data-ttu-id="23405-115">**Executando o cluster Spark no Azure Data Lake Store**.</span><span class="sxs-lookup"><span data-stu-id="23405-115">**Running Spark cluster on Azure Data Lake Store**.</span></span>  <span data-ttu-id="23405-116">Para obter mais informações, consulte [dados de tooanalyze cluster Use HDInsight Spark no repositório Data Lake](https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-apache-spark-use-with-data-lake-store)</span><span class="sxs-lookup"><span data-stu-id="23405-116">For more information, see [Use HDInsight Spark cluster tooanalyze data in Data Lake Store](https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-apache-spark-use-with-data-lake-store)</span></span>
* <span data-ttu-id="23405-117">**Diretrizes de ajuste de desempenho no ADLS**.</span><span class="sxs-lookup"><span data-stu-id="23405-117">**Performance tuning guidelines on ADLS**.</span></span>  <span data-ttu-id="23405-118">Para ver os conceitos gerais de desempenho, confira [Diretrizes de ajuste de desempenho do Data Lake Store](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-performance-tuning-guidance)</span><span class="sxs-lookup"><span data-stu-id="23405-118">For general performance concepts, see [Data Lake Store Performance Tuning Guidance](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-performance-tuning-guidance)</span></span> 

## <a name="parameters"></a><span data-ttu-id="23405-119">parâmetros</span><span class="sxs-lookup"><span data-stu-id="23405-119">Parameters</span></span>

<span data-ttu-id="23405-120">Ao executar Spark trabalhos, aqui estão configurações mais importantes de saudação que podem ser ajustado tooincrease desempenho ADLS:</span><span class="sxs-lookup"><span data-stu-id="23405-120">When running Spark jobs, here are hello most important settings that can be tuned tooincrease performance on ADLS:</span></span>

* <span data-ttu-id="23405-121">**Num executores** -Olá várias tarefas simultâneas que podem ser executadas.</span><span class="sxs-lookup"><span data-stu-id="23405-121">**Num-executors** - hello number of concurrent tasks that can be executed.</span></span>

* <span data-ttu-id="23405-122">**Memória de executor** -quantidade de saudação de memória alocada tooeach executor.</span><span class="sxs-lookup"><span data-stu-id="23405-122">**Executor-memory** - hello amount of memory allocated tooeach executor.</span></span>

* <span data-ttu-id="23405-123">**Núcleos de executor** -número de saudação de núcleos alocado tooeach executor.</span><span class="sxs-lookup"><span data-stu-id="23405-123">**Executor-cores** - hello number of cores allocated tooeach executor.</span></span>                     

<span data-ttu-id="23405-124">**Num executores** executores Num definirá o número máximo de saudação de tarefas que podem ser executados em paralelo.</span><span class="sxs-lookup"><span data-stu-id="23405-124">**Num-executors** Num-executors will set hello maximum number of tasks that can run in parallel.</span></span>  <span data-ttu-id="23405-125">número real de saudação de tarefas que podem ser executados em paralelo é determinado pelo Olá recursos de memória e CPU disponíveis no cluster.</span><span class="sxs-lookup"><span data-stu-id="23405-125">hello actual number of tasks that can run in parallel is bounded by hello memory and CPU resources available in your cluster.</span></span>

<span data-ttu-id="23405-126">**Memória de executor** esta é Olá quantidade de memória que está sendo alocada tooeach executor.</span><span class="sxs-lookup"><span data-stu-id="23405-126">**Executor-memory** This is hello amount of memory that is being allocated tooeach executor.</span></span>  <span data-ttu-id="23405-127">memória de saudação necessária para cada executor é dependente de trabalho hello.</span><span class="sxs-lookup"><span data-stu-id="23405-127">hello memory needed for each executor is dependent on hello job.</span></span>  <span data-ttu-id="23405-128">Para operações complexas, memória Olá precisa toobe superior.</span><span class="sxs-lookup"><span data-stu-id="23405-128">For complex operations, hello memory needs toobe higher.</span></span>  <span data-ttu-id="23405-129">Para operações simples como leitura e gravação, os requisitos de memória serão menores.</span><span class="sxs-lookup"><span data-stu-id="23405-129">For simple operations like read and write, memory requirements will be lower.</span></span>  <span data-ttu-id="23405-130">Olá quantidade de memória para cada executor pode ser exibida no Ambari.</span><span class="sxs-lookup"><span data-stu-id="23405-130">hello amount of memory for each executor can be viewed in Ambari.</span></span>  <span data-ttu-id="23405-131">No Ambari, navegar tooSpark e exiba a guia de configurações de saudação.</span><span class="sxs-lookup"><span data-stu-id="23405-131">In Ambari, navigate tooSpark and view hello Configs tab.</span></span>  

<span data-ttu-id="23405-132">**Núcleos de executor** isso define a quantidade de saudação de núcleos usados por executor, que determina o número de saudação de threads paralelos que podem ser executados por executor.</span><span class="sxs-lookup"><span data-stu-id="23405-132">**Executor-cores** This sets hello amount of cores used per executor, which determines hello number of parallel threads that can be run per executor.</span></span>  <span data-ttu-id="23405-133">Por exemplo, se executor núcleos = 2, e cada executor pode executar tarefas paralelas 2 no executor hello.</span><span class="sxs-lookup"><span data-stu-id="23405-133">For example, if executor-cores = 2, then each executor can run 2 parallel tasks in hello executor.</span></span>  <span data-ttu-id="23405-134">núcleos de executor Olá necessário dependerá trabalho hello.</span><span class="sxs-lookup"><span data-stu-id="23405-134">hello executor-cores needed will be dependent on hello job.</span></span>  <span data-ttu-id="23405-135">Trabalhos com uso intensivo de E/S não exigem uma grande quantidade de memória por tarefa para que cada executor possa manipular mais tarefas paralelas.</span><span class="sxs-lookup"><span data-stu-id="23405-135">I/O heavy jobs do not require a large amount of memory per task so each executor can handle more parallel tasks.</span></span>

<span data-ttu-id="23405-136">Por padrão, dois núcleos YARN virtuais são definidos para cada núcleo físico ao executar o Spark no HDInsight.</span><span class="sxs-lookup"><span data-stu-id="23405-136">By default, two virtual YARN cores are defined for each physical core when running Spark on HDInsight.</span></span>  <span data-ttu-id="23405-137">Esse número fornece um bom equilíbrio entre a simultaneidade e a quantidade de mudanças de contexto de vários threads.</span><span class="sxs-lookup"><span data-stu-id="23405-137">This number provides a good balance of concurrecy and amount of context switching from multiple threads.</span></span>  

## <a name="guidance"></a><span data-ttu-id="23405-138">Diretrizes</span><span class="sxs-lookup"><span data-stu-id="23405-138">Guidance</span></span>

<span data-ttu-id="23405-139">Durante a execução Spark toowork analíticos cargas de trabalho com dados no repositório Data Lake, recomendamos que você use hello mais recente HDInsight versão tooget Olá melhor desempenho com repositório Data Lake.</span><span class="sxs-lookup"><span data-stu-id="23405-139">While running Spark analytic workloads toowork with data in Data Lake Store, we recommend that you use hello most recent HDInsight version tooget hello best performance with Data Lake Store.</span></span> <span data-ttu-id="23405-140">Quando o trabalho estiver mais e/s intensiva, determinados parâmetros podem ser configurado tooimprove desempenho.</span><span class="sxs-lookup"><span data-stu-id="23405-140">When your job is more I/O intensive, then certain parameters can be configured tooimprove performance.</span></span>  <span data-ttu-id="23405-141">O Azure Data Lake Store é uma plataforma de armazenamento altamente escalonável que pode lidar com uma alta taxa de transferência.</span><span class="sxs-lookup"><span data-stu-id="23405-141">Azure Data Lake Store is a highly scalable storage platform that can handle high throughput.</span></span>  <span data-ttu-id="23405-142">Se o trabalho Olá consiste principalmente de leitura ou gravações, aumentando a simultaneidade para tooand de e/s do repositório Azure Data Lake pode melhorar o desempenho.</span><span class="sxs-lookup"><span data-stu-id="23405-142">If hello job mainly consists of read or writes, then increasing concurrency for I/O tooand from Azure Data Lake Store could increase performance.</span></span>

<span data-ttu-id="23405-143">Há alguns simultaneidade tooincrease de maneiras gerais para trabalhos de e/s intensivas.</span><span class="sxs-lookup"><span data-stu-id="23405-143">There are a few general ways tooincrease concurrency for I/O intensive jobs.</span></span>

<span data-ttu-id="23405-144">**Etapa 1: Determinar quantos aplicativos estão em execução no cluster** – você deve saber quantos aplicativos estão em execução no cluster Olá incluindo Olá atual.</span><span class="sxs-lookup"><span data-stu-id="23405-144">**Step 1: Determine how many apps are running on your cluster** – You should know how many apps are running on hello cluster including hello current one.</span></span>  <span data-ttu-id="23405-145">valores padrão de saudação para cada Spark configuração assume que há 4 aplicativos em execução simultaneamente.</span><span class="sxs-lookup"><span data-stu-id="23405-145">hello default values for each Spark setting assumes that there are 4 apps running concurrently.</span></span>  <span data-ttu-id="23405-146">Portanto, você terá apenas 25% de cluster de saudação disponível para cada aplicativo.</span><span class="sxs-lookup"><span data-stu-id="23405-146">Therefore, you will only have 25% of hello cluster available for each app.</span></span>  <span data-ttu-id="23405-147">tooget um desempenho melhor, você pode substituir os padrões de saudação alterando o número de saudação de executores.</span><span class="sxs-lookup"><span data-stu-id="23405-147">tooget better performance, you can override hello defaults by changing hello number of executors.</span></span>  

<span data-ttu-id="23405-148">**Etapa 2: Configurar a memória de executor** – hello primeiro tooset é Olá executor-memória.</span><span class="sxs-lookup"><span data-stu-id="23405-148">**Step 2: Set executor-memory** – hello first thing tooset is hello executor-memory.</span></span>  <span data-ttu-id="23405-149">memória Olá dependerá trabalho Olá que você está indo toorun.</span><span class="sxs-lookup"><span data-stu-id="23405-149">hello memory will be dependent on hello job that you are going toorun.</span></span>  <span data-ttu-id="23405-150">Você pode aumentar a simultaneidade ao alocar menos memória por executor.</span><span class="sxs-lookup"><span data-stu-id="23405-150">You can increase concurrency by allocating less memory per executor.</span></span>  <span data-ttu-id="23405-151">Se você vir fora de exceções de memória ao executar o trabalho, você deve aumentar o valor de saudação para esse parâmetro.</span><span class="sxs-lookup"><span data-stu-id="23405-151">If you see out of memory exceptions when you run your job, then you should increase hello value for this parameter.</span></span>  <span data-ttu-id="23405-152">Uma alternativa é tooget mais memória usando um cluster que tem a maior quantidade de memória ou aumentar o tamanho de saudação do cluster.</span><span class="sxs-lookup"><span data-stu-id="23405-152">One alternative is tooget more memory by using a cluster that has higher amounts of memory or increasing hello size of your cluster.</span></span>  <span data-ttu-id="23405-153">Mais memória permitirá toobe executores mais usado, o que significa que mais de simultaneidade.</span><span class="sxs-lookup"><span data-stu-id="23405-153">More memory will enable more executors toobe used, which means more concurrency.</span></span>

<span data-ttu-id="23405-154">**Etapa 3: Definir o executor núcleos** – para e/s intensivas cargas de trabalho que não tenham operações complexas, é bom toostart com um grande número de núcleos de executor tooincrease Olá inúmeras tarefas paralelas por executor.</span><span class="sxs-lookup"><span data-stu-id="23405-154">**Step 3: Set executor-cores** – For I/O intensive workloads that do not have complex operations, it’s good toostart with a high number of executor-cores tooincrease hello number of parallel tasks per executor.</span></span>  <span data-ttu-id="23405-155">A configuração de núcleos de executor too4 é um bom começo.</span><span class="sxs-lookup"><span data-stu-id="23405-155">Setting executor-cores too4 is a good start.</span></span>   

    executor-cores = 4
<span data-ttu-id="23405-156">Aumentar Olá número de núcleos de executor lhe dará mais paralelismo para que você possa testar com diferentes de núcleos de executor.</span><span class="sxs-lookup"><span data-stu-id="23405-156">Increasing hello number of executor-cores will give you more parallelism so you can experiment with different executor-cores.</span></span>  <span data-ttu-id="23405-157">Para trabalhos que possuem operações mais complexas, você deve reduzir o número de saudação de núcleos por executor.</span><span class="sxs-lookup"><span data-stu-id="23405-157">For jobs that have more complex operations, you should reduce hello number of cores per executor.</span></span>  <span data-ttu-id="23405-158">Se executor-cores for definido para um valor maior que 4, a coleta de lixo poderá tornar-se ineficiente e prejudicar o desempenho.</span><span class="sxs-lookup"><span data-stu-id="23405-158">If executor-cores is set higher than 4, then garbage collection may become inefficient and degrade performance.</span></span>

<span data-ttu-id="23405-159">**Etapa 4: determinar a quantidade de memória YARN no cluster** – essas informações estão disponíveis no Ambari.</span><span class="sxs-lookup"><span data-stu-id="23405-159">**Step 4: Determine amount of YARN memory in cluster** – This information is available in Ambari.</span></span>  <span data-ttu-id="23405-160">Navegue tooYARN e exiba a guia de configurações de saudação.  Olá memória YARN é exibido nesta janela.</span><span class="sxs-lookup"><span data-stu-id="23405-160">Navigate tooYARN and view hello Configs tab.  hello YARN memory is displayed in this window.</span></span>  
<span data-ttu-id="23405-161">Observação: enquanto você estiver na janela de saudação, você também pode ver tamanho do contêiner saudação padrão YARN.</span><span class="sxs-lookup"><span data-stu-id="23405-161">Note: while you are in hello window, you can also see hello default YARN container size.</span></span>  <span data-ttu-id="23405-162">Olá tamanho do contêiner YARN é Olá igual a memória por parâmetro de executor.</span><span class="sxs-lookup"><span data-stu-id="23405-162">hello YARN container size is hello same as memory per executor paramter.</span></span>

    Total YARN memory = nodes * YARN memory per node
<span data-ttu-id="23405-163">**Etapa 5: calcular num-executors**</span><span class="sxs-lookup"><span data-stu-id="23405-163">**Step 5: Calculate num-executors**</span></span>

<span data-ttu-id="23405-164">**Calcular a restrição de memória** -parâmetro de executores num hello é restrito por memória ou por CPU.</span><span class="sxs-lookup"><span data-stu-id="23405-164">**Calculate memory constraint** - hello num-executors parameter is constrained either by memory or by CPU.</span></span>  <span data-ttu-id="23405-165">restrição de memória Olá é determinada pela quantidade de saudação de memória YARN disponível para seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="23405-165">hello memory constraint is determined by hello amount of available YARN memory for your application.</span></span>  <span data-ttu-id="23405-166">Você deve pegar a memória YARN total e dividi-la por executor-memory.</span><span class="sxs-lookup"><span data-stu-id="23405-166">You should take total YARN memory and divide that by executor-memory.</span></span>  <span data-ttu-id="23405-167">restrição de saudação precisa toobe eliminação dimensionado para número de saudação de aplicativos para nós dividimos pelo número de saudação de aplicativos.</span><span class="sxs-lookup"><span data-stu-id="23405-167">hello constraint needs toobe de-scaled for hello number of apps so we divide by hello number of apps.</span></span>

    Memory constraint = (total YARN memory / executor memory) / # of apps   
<span data-ttu-id="23405-168">**Calcular a restrição de CPU** -Olá restrição de CPU é calculado como Olá total núcleos virtuais divididos pelo número de saudação de núcleos por executor.</span><span class="sxs-lookup"><span data-stu-id="23405-168">**Calculate CPU constraint** - hello CPU constraint is calculated as hello total virtual cores divided by hello number of cores per executor.</span></span>  <span data-ttu-id="23405-169">Há dois núcleos virtuais para cada núcleo físico.</span><span class="sxs-lookup"><span data-stu-id="23405-169">There are 2 virtual cores for each physical core.</span></span>  <span data-ttu-id="23405-170">Restrição de memória toohello semelhante, temos dividida pelo número de saudação de aplicativos.</span><span class="sxs-lookup"><span data-stu-id="23405-170">Similar toohello memory constraint, we have divide by hello number of apps.</span></span>

    virtual cores = (nodes in cluster * # of physical cores in node * 2)
    CPU constraint = (total virtual cores / # of cores per executor) / # of apps
<span data-ttu-id="23405-171">**Definir num executores** – parâmetro num executores de hello é determinado executando Olá mínimo de restrição de memória de saudação e restrição de saudação da CPU.</span><span class="sxs-lookup"><span data-stu-id="23405-171">**Set num-executors** – hello num-executors parameter is determined by taking hello minimum of hello memory constraint and hello CPU constraint.</span></span> 

    num-executors = Min (total virtual Cores / # of cores per executor, available YARN memory / executor-memory)   
<span data-ttu-id="23405-172">Configurar um número maior de num-executors não implica necessariamente em aumento de desempenho.</span><span class="sxs-lookup"><span data-stu-id="23405-172">Setting a higher number of num-executors does not necessarily increase performance.</span></span>  <span data-ttu-id="23405-173">Considere que adicionar mais executores adicionará sobrecarga extra para cada executor adicional, o que pode degradar o desempenho.</span><span class="sxs-lookup"><span data-stu-id="23405-173">You should consider that adding more executors will add extra overhead for each additional executor, which can potentially degrade performance.</span></span>  <span data-ttu-id="23405-174">Num executores é limitado pelos recursos de cluster de saudação.</span><span class="sxs-lookup"><span data-stu-id="23405-174">Num-executors is bounded by hello cluster resources.</span></span>    

## <a name="example-calculation"></a><span data-ttu-id="23405-175">Exemplo de cálculo</span><span class="sxs-lookup"><span data-stu-id="23405-175">Example Calculation</span></span>

<span data-ttu-id="23405-176">Digamos que você tenha o composto de 8 nós D4v2 um cluster que está em execução 2 aplicativos incluindo Olá você vai toorun no momento.</span><span class="sxs-lookup"><span data-stu-id="23405-176">Let’s say you currently have a cluster composed of 8 D4v2 nodes that is running 2 apps including hello one you are going toorun.</span></span>  

<span data-ttu-id="23405-177">**Etapa 1: Determinar quantos aplicativos estão em execução no cluster** – você souber que tem 2 aplicativos no cluster, incluindo Olá um for toorun.</span><span class="sxs-lookup"><span data-stu-id="23405-177">**Step 1: Determine how many apps are running on your cluster** – you know that you have 2 apps on your cluster, including hello one you are going toorun.</span></span>  

<span data-ttu-id="23405-178">**Etapa 2: definir executor-memory** – neste exemplo, determinamos que 6 GB de executor-memory será suficiente para trabalho com uso intensivo de E/S.</span><span class="sxs-lookup"><span data-stu-id="23405-178">**Step 2: Set executor-memory** – for this example, we determine that 6GB of executor-memory will be sufficient for I/O intensive job.</span></span>  

    executor-memory = 6GB
<span data-ttu-id="23405-179">**Etapa 3: Definir o executor núcleos** – como este é um trabalho de e/s intensivo, podemos definir número Olá de núcleos de cada too4 executor.</span><span class="sxs-lookup"><span data-stu-id="23405-179">**Step 3: Set executor-cores** – Since this is an I/O intensive job, we can set hello number of cores for each executor too4.</span></span>  <span data-ttu-id="23405-180">Configuração de núcleos por toolarger do executor de 4 pode causar problemas de coleta de lixo.</span><span class="sxs-lookup"><span data-stu-id="23405-180">Setting cores per executor toolarger than 4 may cause garbage collection problems.</span></span>  

    executor-cores = 4
<span data-ttu-id="23405-181">**Etapa 4: Determinar a quantidade de memória YARN em cluster** – navegarmos toofind tooAmbari out cada D4v2 tem 25 GB de memória do YARN.</span><span class="sxs-lookup"><span data-stu-id="23405-181">**Step 4: Determine amount of YARN memory in cluster** – We navigate tooAmbari toofind out that each D4v2 has 25GB of YARN memory.</span></span>  <span data-ttu-id="23405-182">Uma vez que há 8 nós, a memória disponível YARN Olá é multiplicada por 8.</span><span class="sxs-lookup"><span data-stu-id="23405-182">Since there are 8 nodes, hello available YARN memory is multiplied by 8.</span></span>

    Total YARN memory = nodes * YARN memory* per node
    Total YARN memory = 8 nodes * 25GB = 200GB
<span data-ttu-id="23405-183">**Etapa 5: Calcular num executores** – parâmetro num executores de hello é determinado executando Olá mínimo de restrição de memória hello e restrição de CPU Olá dividido por Olá n º de aplicativos em execução no Spark.</span><span class="sxs-lookup"><span data-stu-id="23405-183">**Step 5: Calculate num-executors** – hello num-executors parameter is determined by taking hello minimum of hello memory constraint and hello CPU constraint divided by hello # of apps running on Spark.</span></span>    

<span data-ttu-id="23405-184">**Calcular a restrição de memória** – restrição de memória Olá é calculada como memória YARN total Olá dividida pela memória Olá por executor.</span><span class="sxs-lookup"><span data-stu-id="23405-184">**Calculate memory constraint** – hello memory constraint is calculated as hello total YARN memory divided by hello memory per executor.</span></span>

    Memory constraint = (total YARN memory / executor memory) / # of apps   
    Memory constraint = (200GB / 6GB) / 2   
    Memory constraint = 16 (rounded)
<span data-ttu-id="23405-185">**Calcular a restrição de CPU** -Olá restrição de CPU é calculado como Olá núcleos yarn total divididos pelo número de saudação de núcleos por executor.</span><span class="sxs-lookup"><span data-stu-id="23405-185">**Calculate CPU constraint** - hello CPU constraint is calculated as hello total yarn cores divided by hello number of cores per executor.</span></span>
    
    YARN cores = nodes in cluster * # of cores per node * 2   
    YARN cores = 8 nodes * 8 cores per D14 * 2 = 128
    CPU constraint = (total YARN cores / # of cores per executor) / # of apps
    CPU constraint = (128 / 4) / 2
    CPU constraint = 16
<span data-ttu-id="23405-186">**Definir num-executors**</span><span class="sxs-lookup"><span data-stu-id="23405-186">**Set num-executors**</span></span>

    num-executors = Min (memory constraint, CPU constraint)
    num-executors = Min (16, 16)
    num-executors = 16    

