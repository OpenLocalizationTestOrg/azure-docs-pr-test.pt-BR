---
title: "Autenticação de serviço a serviço: Data Lake Store com o Azure Active Directory | Microsoft Docs"
description: "Saiba como obter a autenticação de serviço a serviço com o Data Lake Store usando o Azure Active Directory"
services: data-lake-store
documentationcenter: 
author: nitinme
manager: jhubbard
editor: cgronlun
ms.assetid: 820b7c5d-4863-4225-9bd1-df4d8f515537
ms.service: data-lake-store
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 04/21/2017
ms.author: nitinme
ms.openlocfilehash: 27ec0a4f48115d44da98dd048868b044aedf173c
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/11/2017
---
# <a name="service-to-service-authentication-with-data-lake-store-using-azure-active-directory"></a><span data-ttu-id="33ad6-103">Autenticação de serviço a serviço com o Data Lake Store usando o Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="33ad6-103">Service-to-service authentication with Data Lake Store using Azure Active Directory</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="33ad6-104">Autenticação serviço a serviço</span><span class="sxs-lookup"><span data-stu-id="33ad6-104">Service-to-service authentication</span></span>](data-lake-store-authenticate-using-active-directory.md)
> * [<span data-ttu-id="33ad6-105">Autenticação do usuário final</span><span class="sxs-lookup"><span data-stu-id="33ad6-105">End-user authentication</span></span>](data-lake-store-end-user-authenticate-using-active-directory.md)
> 
> 

<span data-ttu-id="33ad6-106">O Azure Data Lake Store usa o Azure Active Directory para autenticação.</span><span class="sxs-lookup"><span data-stu-id="33ad6-106">Azure Data Lake Store uses Azure Active Directory for authentication.</span></span> <span data-ttu-id="33ad6-107">Antes de criar um aplicativo que funciona com o Azure Data Lake Store ou com o Azure Data Lake Analytics, primeiro você deve decidir como deseja autenticar seu aplicativo no Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="33ad6-107">Before authoring an application that works with Azure Data Lake Store or Azure Data Lake Analytics, you must first decide how you would like to authenticate your application with Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="33ad6-108">As duas principais opções disponíveis são:</span><span class="sxs-lookup"><span data-stu-id="33ad6-108">The two main options available are:</span></span>

* <span data-ttu-id="33ad6-109">Autenticação do usuário final</span><span class="sxs-lookup"><span data-stu-id="33ad6-109">End-user authentication</span></span> 
* <span data-ttu-id="33ad6-110">Autenticação serviço a serviço (este artigo)</span><span class="sxs-lookup"><span data-stu-id="33ad6-110">Service-to-service authentication (this article)</span></span> 

<span data-ttu-id="33ad6-111">As duas opções resultam no fornecimento de um token OAuth 2.0 a seu aplicativo, que é anexado a cada solicitação feita ao Azure Data Lake Store ou ao Azure Data Lake Analytics.</span><span class="sxs-lookup"><span data-stu-id="33ad6-111">Both these options result in your application being provided with an OAuth 2.0 token, which gets attached to each request made to Azure Data Lake Store or Azure Data Lake Analytics.</span></span>

<span data-ttu-id="33ad6-112">Este artigo explica como criar um **aplicativo Web do Azure AD para autenticação serviço a serviço**.</span><span class="sxs-lookup"><span data-stu-id="33ad6-112">This article talks about how create an **Azure AD web application for service-to-service authentication**.</span></span> <span data-ttu-id="33ad6-113">Para obter instruções sobre a configuração de aplicativo do Azure AD para autenticação de usuário final, consulte [Autenticação de usuário final com o Data Lake Store usando o Azure Active Directory](data-lake-store-end-user-authenticate-using-active-directory.md).</span><span class="sxs-lookup"><span data-stu-id="33ad6-113">For instructions on Azure AD application configuration for end-user authentication see [End-user authentication with Data Lake Store using Azure Active Directory](data-lake-store-end-user-authenticate-using-active-directory.md).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="33ad6-114">Pré-requisitos</span><span class="sxs-lookup"><span data-stu-id="33ad6-114">Prerequisites</span></span>
* <span data-ttu-id="33ad6-115">Uma assinatura do Azure.</span><span class="sxs-lookup"><span data-stu-id="33ad6-115">An Azure subscription.</span></span> <span data-ttu-id="33ad6-116">Consulte [Obter avaliação gratuita do Azure](https://azure.microsoft.com/pricing/free-trial/).</span><span class="sxs-lookup"><span data-stu-id="33ad6-116">See [Get Azure free trial](https://azure.microsoft.com/pricing/free-trial/).</span></span>

## <a name="step-1-create-an-active-directory-web-application"></a><span data-ttu-id="33ad6-117">Etapa 1: Criar um aplicativo Web do Active Directory</span><span class="sxs-lookup"><span data-stu-id="33ad6-117">Step 1: Create an Active Directory web application</span></span>

<span data-ttu-id="33ad6-118">Crie e configure um aplicativo Web do Azure AD para autenticação serviço a serviço com o Azure Data Lake Store usando o Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="33ad6-118">Create and configure an Azure AD web application for service-to-service authentication with Azure Data Lake Store using Azure Active Directory.</span></span> <span data-ttu-id="33ad6-119">Para obter instruções, consulte [Criar um aplicativo do Azure AD](../azure-resource-manager/resource-group-create-service-principal-portal.md).</span><span class="sxs-lookup"><span data-stu-id="33ad6-119">For instructions, see [Create an Azure AD application](../azure-resource-manager/resource-group-create-service-principal-portal.md).</span></span>

<span data-ttu-id="33ad6-120">Ao seguir as instruções do link acima, verifique se você selecionou **Aplicativo Web/API** para tipo de aplicativo, conforme mostrado na captura de tela abaixo.</span><span class="sxs-lookup"><span data-stu-id="33ad6-120">While following the instructions at the above link, make sure you select **Web App / API** for application type, as shown in the screenshot below.</span></span>

<span data-ttu-id="33ad6-121">![Criar aplicativo Web](./media/data-lake-store-authenticate-using-active-directory/azure-active-directory-create-web-app.png "Criar aplicativo Web")</span><span class="sxs-lookup"><span data-stu-id="33ad6-121">![Create web app](./media/data-lake-store-authenticate-using-active-directory/azure-active-directory-create-web-app.png "Create web app")</span></span>

## <a name="step-2-get-application-id-authentication-key-and-tenant-id"></a><span data-ttu-id="33ad6-122">Etapa 2: Obter a id do aplicativo, a chave de autenticação e a id de locatário</span><span class="sxs-lookup"><span data-stu-id="33ad6-122">Step 2: Get application id, authentication key, and tenant id</span></span>
<span data-ttu-id="33ad6-123">Ao fazer logon por meio de programação, você precisa da id para seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="33ad6-123">When programmatically logging in, you need the id for your application.</span></span> <span data-ttu-id="33ad6-124">Se o aplicativo for executado com suas próprias credenciais, você também precisará de uma chave de autenticação.</span><span class="sxs-lookup"><span data-stu-id="33ad6-124">If the application runs under its own credentials, you will also need an authentication key.</span></span>

* <span data-ttu-id="33ad6-125">.Para obter instruções sobre como recuperar a ID e o segredo do cliente do aplicativo, consulte [Obter ID do aplicativo e chave de autenticação](../azure-resource-manager/resource-group-create-service-principal-portal.md#get-application-id-and-authentication-key).</span><span class="sxs-lookup"><span data-stu-id="33ad6-125">For instructions on how to retrieve the application ID and authentication key (also called the client secret) for your application, see [Get application ID and authentication key](../azure-resource-manager/resource-group-create-service-principal-portal.md#get-application-id-and-authentication-key).</span></span>

* <span data-ttu-id="33ad6-126">Para obter instruções sobre como recuperar a ID do locatário, consulte [Obter ID do locatário](../azure-resource-manager/resource-group-create-service-principal-portal.md#get-tenant-id).</span><span class="sxs-lookup"><span data-stu-id="33ad6-126">For instructions on how to retrieve the tenant ID, see [Get tenant ID](../azure-resource-manager/resource-group-create-service-principal-portal.md#get-tenant-id).</span></span>

## <a name="step-3-assign-the-azure-ad-application-to-the-azure-data-lake-store-account-file-or-folder-only-for-service-to-service-authentication"></a><span data-ttu-id="33ad6-127">Etapa 3: Atribuir o aplicativo do Azure AD ao arquivo ou pasta da conta do Azure Data Lake Store (apenas para autenticação de serviços)</span><span class="sxs-lookup"><span data-stu-id="33ad6-127">Step 3: Assign the Azure AD application to the Azure Data Lake Store account file or folder (only for service-to-service authentication)</span></span>
1. <span data-ttu-id="33ad6-128">Faça logon no novo [portal do Azure](https://portal.azure.com) e abra a conta do Azure Data Lake Store que você deseja associar ao aplicativo do Azure Active Directory criado anteriormente.</span><span class="sxs-lookup"><span data-stu-id="33ad6-128">Sign on to the new [Azure portal](https://portal.azure.com) and open the Azure Data Lake Store account that you want to associate with the Azure Active Directory application you created earlier.</span></span>
2. <span data-ttu-id="33ad6-129">Na folha de sua conta do Repositório Data Lake, clique em **Gerenciador de Dados**.</span><span class="sxs-lookup"><span data-stu-id="33ad6-129">In your Data Lake Store account blade, click **Data Explorer**.</span></span>
   
    <span data-ttu-id="33ad6-130">![Crie diretórios na conta do Data Lake Store](./media/data-lake-store-authenticate-using-active-directory/adl.start.data.explorer.png "criar diretórios na conta Data Lake")</span><span class="sxs-lookup"><span data-stu-id="33ad6-130">![Create directories in Data Lake Store account](./media/data-lake-store-authenticate-using-active-directory/adl.start.data.explorer.png "Create directories in Data Lake account")</span></span>
3. <span data-ttu-id="33ad6-131">Na folha **Data Explorer**, clique no arquivo ou pasta para o qual você deseja fornecer acesso ao aplicativo do Azure AD e, em seguida, clique em **Acessar**.</span><span class="sxs-lookup"><span data-stu-id="33ad6-131">In the **Data Explorer** blade, click the file or folder for which you want to provide access to the Azure AD application, and then click **Access**.</span></span> <span data-ttu-id="33ad6-132">Para configurar o acesso a um arquivo, você deverá clicar em **Acessar** da folha **Visualização do Arquivo**.</span><span class="sxs-lookup"><span data-stu-id="33ad6-132">To configure access to a file, you must click **Access** from the **File Preview** blade.</span></span>
   
    <span data-ttu-id="33ad6-133">![Configurar ACLs no sistema de arquivos do Data Lake](./media/data-lake-store-authenticate-using-active-directory/adl.acl.1.png "definir ACLs no sistema de arquivos do Data Lake")</span><span class="sxs-lookup"><span data-stu-id="33ad6-133">![Set ACLs on Data Lake file system](./media/data-lake-store-authenticate-using-active-directory/adl.acl.1.png "Set ACLs on Data Lake file system")</span></span>
4. <span data-ttu-id="33ad6-134">A folha **Acesso** lista o acesso padrão e o acesso personalizado já atribuídos à raiz.</span><span class="sxs-lookup"><span data-stu-id="33ad6-134">The **Access** blade lists the standard access and custom access already assigned to the root.</span></span> <span data-ttu-id="33ad6-135">Clique no ícone **Adicionar** para adicionar as ACLs de nível personalizado.</span><span class="sxs-lookup"><span data-stu-id="33ad6-135">Click the **Add** icon to add custom-level ACLs.</span></span>
   
    <span data-ttu-id="33ad6-136">![Lista de acesso padrão e personalizado](./media/data-lake-store-authenticate-using-active-directory/adl.acl.2.png "lista de acesso padrão e personalizado")</span><span class="sxs-lookup"><span data-stu-id="33ad6-136">![List standard and custom access](./media/data-lake-store-authenticate-using-active-directory/adl.acl.2.png "List standard and custom access")</span></span>
5. <span data-ttu-id="33ad6-137">Clique no ícone **Adicionar** para abrir a folha **Adicionar Acesso Personalizado**.</span><span class="sxs-lookup"><span data-stu-id="33ad6-137">Click the **Add** icon to open the **Add Custom Access** blade.</span></span> <span data-ttu-id="33ad6-138">Nessa folha, clique em **Selecionar Usuário ou Grupo** e, na folha **Selecionar Usuário ou Grupo**, procure o aplicativo do Azure Active Directory que você criou anteriormente.</span><span class="sxs-lookup"><span data-stu-id="33ad6-138">In this blade, click **Select User or Group**, and then in **Select User or Group** blade, look for the Azure Active Directory application you created earlier.</span></span> <span data-ttu-id="33ad6-139">Se houver muitos grupos para sua pesquisa, use a caixa de texto na parte superior para filtrar pelo nome do grupo.</span><span class="sxs-lookup"><span data-stu-id="33ad6-139">If you have a lot of groups to search from, use the text box at the top to filter on the group name.</span></span> <span data-ttu-id="33ad6-140">Clique no grupo que você deseja adicionar e clique em **Selecionar**.</span><span class="sxs-lookup"><span data-stu-id="33ad6-140">Click the group you want to add and then click **Select**.</span></span>
   
    <span data-ttu-id="33ad6-141">![Adicionar um grupo](./media/data-lake-store-authenticate-using-active-directory/adl.acl.3.png "Adicionar um grupo")</span><span class="sxs-lookup"><span data-stu-id="33ad6-141">![Add a group](./media/data-lake-store-authenticate-using-active-directory/adl.acl.3.png "Add a group")</span></span>
6. <span data-ttu-id="33ad6-142">Clique em **Selecionar Permissões**, selecione as permissões e se você desejar atribuir as permissões como uma ACL padrão, acessar a ACL ou ambos.</span><span class="sxs-lookup"><span data-stu-id="33ad6-142">Click **Select Permissions**, select the permissions and whether you want to assign the permissions as a default ACL, access ACL, or both.</span></span> <span data-ttu-id="33ad6-143">Clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="33ad6-143">Click **OK**.</span></span>
   
    <span data-ttu-id="33ad6-144">![Atribuir permissões ao grupo](./media/data-lake-store-authenticate-using-active-directory/adl.acl.4.png "Atribuir permissões ao grupo")</span><span class="sxs-lookup"><span data-stu-id="33ad6-144">![Assign permissions to group](./media/data-lake-store-authenticate-using-active-directory/adl.acl.4.png "Assign permissions to group")</span></span>
   
    <span data-ttu-id="33ad6-145">Para obter mais informações sobre permissões no Data Lake Store e ACLs de acesso/padrão, consulte [Controle de acesso no Data Lake Store](data-lake-store-access-control.md).</span><span class="sxs-lookup"><span data-stu-id="33ad6-145">For more information about permissions in Data Lake Store, and Default/Access ACLs, see [Access Control in Data Lake Store](data-lake-store-access-control.md).</span></span>
7. <span data-ttu-id="33ad6-146">Na folha **Adicionar Acesso Personalizado**, clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="33ad6-146">In the **Add Custom Access** blade, click **OK**.</span></span> <span data-ttu-id="33ad6-147">O grupo recém-adicionado, com as permissões associadas, estará listado na folha **Acesso** .</span><span class="sxs-lookup"><span data-stu-id="33ad6-147">The newly added group, with the associated permissions, will now be listed in the **Access** blade.</span></span>
   
    <span data-ttu-id="33ad6-148">![Atribuir permissões ao grupo](./media/data-lake-store-authenticate-using-active-directory/adl.acl.5.png "Atribuir permissões ao grupo")</span><span class="sxs-lookup"><span data-stu-id="33ad6-148">![Assign permissions to group](./media/data-lake-store-authenticate-using-active-directory/adl.acl.5.png "Assign permissions to group")</span></span>

## <a name="step-4-get-the-oauth-20-token-endpoint-only-for-java-based-applications"></a><span data-ttu-id="33ad6-149">Etapa 4: obter o ponto de extremidade do Token OAuth 2.0 (somente para aplicativos baseados em Java)</span><span class="sxs-lookup"><span data-stu-id="33ad6-149">Step 4: Get the OAuth 2.0 token endpoint (only for Java-based applications)</span></span>

1. <span data-ttu-id="33ad6-150">Faça logon no novo [Portal do Azure](https://portal.azure.com) e clique em Active Directory, no painel esquerdo.</span><span class="sxs-lookup"><span data-stu-id="33ad6-150">Sign on to the new [Azure portal](https://portal.azure.com) and click Active Directory from the left pane.</span></span>

2. <span data-ttu-id="33ad6-151">No painel esquerdo, clique em **Registros do aplicativo**.</span><span class="sxs-lookup"><span data-stu-id="33ad6-151">From the left pane, click **App registrations**.</span></span>

3. <span data-ttu-id="33ad6-152">Na parte superior da folha Registros do aplicativo, clique em **Pontos de extremidade**.</span><span class="sxs-lookup"><span data-stu-id="33ad6-152">From the top of the App registrations blade, click **Endpoints**.</span></span>

    <span data-ttu-id="33ad6-153">![Ponto de extremidade de token OAuth](./media/data-lake-store-authenticate-using-active-directory/oauth-token-endpoint.png "Ponto de extremidade de token OAuth")</span><span class="sxs-lookup"><span data-stu-id="33ad6-153">![OAuth token endpoint](./media/data-lake-store-authenticate-using-active-directory/oauth-token-endpoint.png "OAuth token endpoint")</span></span>

4. <span data-ttu-id="33ad6-154">Da lista de pontos de extremidade, copie o ponto de extremidade do token OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="33ad6-154">From the list of endpoints, copy the OAuth 2.0 token endpoint.</span></span>

    <span data-ttu-id="33ad6-155">![Ponto de extremidade de token OAuth](./media/data-lake-store-authenticate-using-active-directory/oauth-token-endpoint-1.png "Ponto de extremidade de token OAuth")</span><span class="sxs-lookup"><span data-stu-id="33ad6-155">![OAuth token endpoint](./media/data-lake-store-authenticate-using-active-directory/oauth-token-endpoint-1.png "OAuth token endpoint")</span></span>   

## <a name="next-steps"></a><span data-ttu-id="33ad6-156">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="33ad6-156">Next steps</span></span>
<span data-ttu-id="33ad6-157">Neste artigo, você criou um aplicativo Web do Azure AD e reuniu as informações necessárias em seus aplicativos cliente, que você cria usando o SDK do .NET, SDK do Java, etc. Agora você pode prosseguir para os artigos seguintes, que falam sobre como usar o aplicativo Web do Azure AD para primeiro se autenticar no Data Lake Store e, em seguida, executar outras operações no repositório.</span><span class="sxs-lookup"><span data-stu-id="33ad6-157">In this article you created an Azure AD web application and gathered the information you need in your client applications that you author using .NET SDK, Java SDK, etc. You can now proceed to the following articles that talk about how to use the Azure AD web application to first authenticate with Data Lake Store and then perform other operations on the store.</span></span>

* [<span data-ttu-id="33ad6-158">Introdução ao Repositório Azure Data Lake usando o SDK do .NET</span><span class="sxs-lookup"><span data-stu-id="33ad6-158">Get started with Azure Data Lake Store using .NET SDK</span></span>](data-lake-store-get-started-net-sdk.md)
* [<span data-ttu-id="33ad6-159">Introdução ao Azure Data Lake Store usando o SDK do Java</span><span class="sxs-lookup"><span data-stu-id="33ad6-159">Get started with Azure Data Lake Store using Java SDK</span></span>](data-lake-store-get-started-java-sdk.md)

<span data-ttu-id="33ad6-160">Este artigo ensinou em detalhes as etapas básicas necessárias para obter um usuário principal para cima e em execução para o seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="33ad6-160">This article walked you through the basic steps needed to get a user principal up and running for your application.</span></span> <span data-ttu-id="33ad6-161">Você pode ver os seguintes artigos para obter mais informações:</span><span class="sxs-lookup"><span data-stu-id="33ad6-161">You can look at the following articles to get further information:</span></span>
* [<span data-ttu-id="33ad6-162">Usar o PowerShell para criar entidade de serviço</span><span class="sxs-lookup"><span data-stu-id="33ad6-162">Use PowerShell to create service principal</span></span>](https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-authenticate-service-principal)
* [<span data-ttu-id="33ad6-163">Usar autenticação de certificado para autenticação de entidade de serviço</span><span class="sxs-lookup"><span data-stu-id="33ad6-163">Use certificate authentication for service principal authentication</span></span>](https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-authenticate-service-principal#create-service-principal-with-certificate)
* [<span data-ttu-id="33ad6-164">Outros métodos para autenticar no AD do Azure</span><span class="sxs-lookup"><span data-stu-id="33ad6-164">Other methods to authenticate to Azure AD</span></span>](https://docs.microsoft.com/en-us/azure/active-directory/active-directory-authentication-scenarios)


