---
title: "aaaAzure diretrizes de ajuste de desempenho do dados Lake repositório | Microsoft Docs"
description: Diretrizes de ajuste de desempenho do Azure Data Lake Store
services: data-lake-store
documentationcenter: 
author: stewu
manager: amitkul
editor: cgronlun
ms.assetid: ebde7b9f-2e51-4d43-b7ab-566417221335
ms.service: data-lake-store
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 06/30/2017
ms.author: stewu
ms.openlocfilehash: 939faa068c0f81d18d9533956f4d336bc4d0cbe3
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="tuning-azure-data-lake-store-for-performance"></a><span data-ttu-id="4d67f-103">Ajustando o desempenho do Azure Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="4d67f-103">Tuning Azure Data Lake Store for performance</span></span>

<span data-ttu-id="4d67f-104">O Data Lake Store dá suporte a alta taxa de transferência para análise de uso intensivo de E/S e movimentação de dados.</span><span class="sxs-lookup"><span data-stu-id="4d67f-104">Data Lake Store supports high-throughput for I/O intensive analytics and data movement.</span></span>  <span data-ttu-id="4d67f-105">No repositório Azure Data Lake, usando a taxa de transferência disponível – valor Olá de dados que podem ser lidos ou gravados por segundo – é importante tooget Olá obter um melhor desempenho.</span><span class="sxs-lookup"><span data-stu-id="4d67f-105">In Azure Data Lake Store, using all available throughput – hello amount of data that can be read or written per second – is important tooget hello best performance.</span></span>  <span data-ttu-id="4d67f-106">Isso é obtido executando o maior número possível de leituras e gravações em paralelo.</span><span class="sxs-lookup"><span data-stu-id="4d67f-106">This is achieved by performing as many reads and writes in parallel as possible.</span></span>

![Desempenho do Data Lake Store](./media/data-lake-store-performance-tuning-guidance/throughput.png)

<span data-ttu-id="4d67f-108">Pode ser dimensionado tooprovide Olá necessário taxa de transferência para o cenário de análise de todos os repositório Azure Data Lake.</span><span class="sxs-lookup"><span data-stu-id="4d67f-108">Azure Data Lake Store can scale tooprovide hello necessary throughput for all analytics scenario.</span></span> <span data-ttu-id="4d67f-109">Por padrão, uma conta do repositório Azure Data Lake fornece automaticamente taxa de transferência suficiente toomeet necessidades de saudação de uma categoria ampla de casos de uso.</span><span class="sxs-lookup"><span data-stu-id="4d67f-109">By default, an Azure Data Lake Store account provides automatically enough throughput toomeet hello needs of a broad category of use cases.</span></span> <span data-ttu-id="4d67f-110">Para casos de saudação onde os clientes ficar saudação padrão limite, Olá conta ADLS pode ser configurado tooprovide mais taxa de transferência entrando em contato com o suporte da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="4d67f-110">For hello cases where customers run into hello default limit, hello ADLS account can be configured tooprovide more throughput by contacting Microsoft support.</span></span>

## <a name="data-ingestion"></a><span data-ttu-id="4d67f-111">Ingestão de dados</span><span class="sxs-lookup"><span data-stu-id="4d67f-111">Data ingestion</span></span>

<span data-ttu-id="4d67f-112">Ingestão de dados de um tooADLS do sistema de origem, é importante tooconsider que Olá hardware de origem, o hardware de rede de origem e tooADLS de conectividade de rede pode ser o gargalo de hello.</span><span class="sxs-lookup"><span data-stu-id="4d67f-112">When ingesting data from a source system tooADLS, it is important tooconsider that hello source hardware, source network hardware, and network connectivity tooADLS can be hello bottleneck.</span></span>  

![Desempenho do Data Lake Store](./media/data-lake-store-performance-tuning-guidance/bottleneck.png)

<span data-ttu-id="4d67f-114">É importante tooensure que Olá movimentação de dados não é afetado por esses fatores.</span><span class="sxs-lookup"><span data-stu-id="4d67f-114">It is important tooensure that hello data movement is not affected by these factors.</span></span>

### <a name="source-hardware"></a><span data-ttu-id="4d67f-115">Hardware de Origem</span><span class="sxs-lookup"><span data-stu-id="4d67f-115">Source Hardware</span></span>

<span data-ttu-id="4d67f-116">Se você estiver usando computadores locais ou máquinas virtuais no Azure, você deve selecionar cuidadosamente hardware apropriado hello.</span><span class="sxs-lookup"><span data-stu-id="4d67f-116">Whether you are using on-premises machines or VMs in Azure, you should carefully select hello appropriate hardware.</span></span> <span data-ttu-id="4d67f-117">Para Hardware de disco de origem, prefira tooHDDs SSDs e escolha o hardware de disco com eixos mais rápidos.</span><span class="sxs-lookup"><span data-stu-id="4d67f-117">For Source Disk Hardware, prefer SSDs tooHDDs and pick disk hardware with faster spindles.</span></span> <span data-ttu-id="4d67f-118">Para Hardware de rede de origem, use o mais rápido possível de NICs hello.</span><span class="sxs-lookup"><span data-stu-id="4d67f-118">For Source Network Hardware, use hello fastest NICs possible.</span></span>  <span data-ttu-id="4d67f-119">No Azure, recomendamos Azure D14 VMs que têm o disco adequadamente poderoso hello e hardware de rede.</span><span class="sxs-lookup"><span data-stu-id="4d67f-119">On Azure, we recommend Azure D14 VMs which have hello appropriately powerful disk and networking hardware.</span></span>

### <a name="network-connectivity-tooazure-data-lake-store"></a><span data-ttu-id="4d67f-120">Repositório Data Lake do conectividade tooAzure de rede</span><span class="sxs-lookup"><span data-stu-id="4d67f-120">Network Connectivity tooAzure Data Lake Store</span></span>

<span data-ttu-id="4d67f-121">conectividade de rede de saudação entre a fonte de dados e armazenamento do Azure Data Lake às vezes pode ser o gargalo hello.</span><span class="sxs-lookup"><span data-stu-id="4d67f-121">hello network connectivity between your source data and Azure Data Lake store can sometimes be hello bottleneck.</span></span> <span data-ttu-id="4d67f-122">Quando os dados de origem forem locais, considere o uso de uma conexão dedicada com o [Azure ExpressRoute](https://azure.microsoft.com/en-us/services/expressroute/).</span><span class="sxs-lookup"><span data-stu-id="4d67f-122">When your source data is On-Premises, consider using a dedicated link with [Azure ExpressRoute](https://azure.microsoft.com/en-us/services/expressroute/) .</span></span> <span data-ttu-id="4d67f-123">Se sua fonte de dados estiver no Azure, o desempenho de Olá será melhor quando dados saudação estão em Olá mesma região do Azure Olá repositório Data Lake.</span><span class="sxs-lookup"><span data-stu-id="4d67f-123">If your source data is in Azure, hello performance will be best when hello data is in hello same Azure region as hello Data Lake Store.</span></span>

### <a name="configure-data-ingestion-tools-for-maximum-parallelization"></a><span data-ttu-id="4d67f-124">Configurar as ferramentas de ingestão de dados para paralelização máxima</span><span class="sxs-lookup"><span data-stu-id="4d67f-124">Configure Data Ingestion tools for maximum parallelization</span></span>

<span data-ttu-id="4d67f-125">Depois que você resolveu o hardware de origem hello e acima de afunilamentos de conectividade de rede, você está pronto tooconfigure suas ferramentas de inclusão.</span><span class="sxs-lookup"><span data-stu-id="4d67f-125">Once you have addressed hello source hardware and network connectivity bottlenecks above, you are ready tooconfigure your ingestion tools.</span></span> <span data-ttu-id="4d67f-126">Olá tabela a seguir resume as configurações de chave de saudação para diversas ferramentas populares de inclusão e fornece desempenho detalhado ajuste artigos para eles.</span><span class="sxs-lookup"><span data-stu-id="4d67f-126">hello following table summarizes hello key settings for several popular ingestion tools and provides in-depth performance tuning articles for them.</span></span>  <span data-ttu-id="4d67f-127">toolearn mais sobre qual ferramenta toouse para seu cenário, visite este [artigo](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-data-scenarios).</span><span class="sxs-lookup"><span data-stu-id="4d67f-127">toolearn more about which tool toouse for your scenario, visit this [article](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-data-scenarios).</span></span>

| <span data-ttu-id="4d67f-128">Ferramenta</span><span class="sxs-lookup"><span data-stu-id="4d67f-128">Tool</span></span>               | <span data-ttu-id="4d67f-129">Configurações</span><span class="sxs-lookup"><span data-stu-id="4d67f-129">Settings</span></span>     | <span data-ttu-id="4d67f-130">Mais detalhes</span><span class="sxs-lookup"><span data-stu-id="4d67f-130">More Details</span></span>                                                                 |
|--------------------|------------------------------------------------------|------------------------------|
| <span data-ttu-id="4d67f-131">Powershell</span><span class="sxs-lookup"><span data-stu-id="4d67f-131">Powershell</span></span>       | <span data-ttu-id="4d67f-132">PerFileThreadCount, ConcurrentFileCount</span><span class="sxs-lookup"><span data-stu-id="4d67f-132">PerFileThreadCount, ConcurrentFileCount</span></span> |  [<span data-ttu-id="4d67f-133">Link</span><span class="sxs-lookup"><span data-stu-id="4d67f-133">Link</span></span>](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-get-started-powershell#performance-guidance-while-using-powershell)   |
| <span data-ttu-id="4d67f-134">AdlCopy</span><span class="sxs-lookup"><span data-stu-id="4d67f-134">AdlCopy</span></span>    | <span data-ttu-id="4d67f-135">Unidades do Azure Data Lake Analytics</span><span class="sxs-lookup"><span data-stu-id="4d67f-135">Azure Data Lake Analytics units</span></span>  |   [<span data-ttu-id="4d67f-136">Link</span><span class="sxs-lookup"><span data-stu-id="4d67f-136">Link</span></span>](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-copy-data-azure-storage-blob#performance-considerations-for-using-adlcopy)         |
| <span data-ttu-id="4d67f-137">DistCp</span><span class="sxs-lookup"><span data-stu-id="4d67f-137">DistCp</span></span>            | <span data-ttu-id="4d67f-138">-m (mapper)</span><span class="sxs-lookup"><span data-stu-id="4d67f-138">-m (mapper)</span></span>   | [<span data-ttu-id="4d67f-139">Link</span><span class="sxs-lookup"><span data-stu-id="4d67f-139">Link</span></span>](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-copy-data-wasb-distcp#performance-considerations-while-using-distcp)                             |
| <span data-ttu-id="4d67f-140">Fábrica de dados do Azure</span><span class="sxs-lookup"><span data-stu-id="4d67f-140">Azure Data Factory</span></span>| <span data-ttu-id="4d67f-141">parallelCopies</span><span class="sxs-lookup"><span data-stu-id="4d67f-141">parallelCopies</span></span>    | [<span data-ttu-id="4d67f-142">Link</span><span class="sxs-lookup"><span data-stu-id="4d67f-142">Link</span></span>](../data-factory/data-factory-copy-activity-performance.md)                          |
| <span data-ttu-id="4d67f-143">Sqoop</span><span class="sxs-lookup"><span data-stu-id="4d67f-143">Sqoop</span></span>           | <span data-ttu-id="4d67f-144">fs.azure.block.size, -m (mapper)</span><span class="sxs-lookup"><span data-stu-id="4d67f-144">fs.azure.block.size, -m (mapper)</span></span>    |   [<span data-ttu-id="4d67f-145">Link</span><span class="sxs-lookup"><span data-stu-id="4d67f-145">Link</span></span>](https://blogs.msdn.microsoft.com/bigdatasupport/2015/02/17/sqoop-job-performance-tuning-in-hdinsight-hadoop/)        |

## <a name="structure-your-data-set"></a><span data-ttu-id="4d67f-146">Estruturar seu conjunto de dados</span><span class="sxs-lookup"><span data-stu-id="4d67f-146">Structure your data set</span></span>

<span data-ttu-id="4d67f-147">Quando dados são armazenados no repositório Data Lake, o tamanho do arquivo hello, o número de arquivos e a estrutura de pasta ter um impacto no desempenho.</span><span class="sxs-lookup"><span data-stu-id="4d67f-147">When data is stored in Data Lake Store, hello file size, number of files, and folder structure have an impact on performance.</span></span>  <span data-ttu-id="4d67f-148">Olá, seção a seguir descreve as práticas recomendadas nessas áreas.</span><span class="sxs-lookup"><span data-stu-id="4d67f-148">hello following section describes best practices in these areas.</span></span>  

### <a name="file-size"></a><span data-ttu-id="4d67f-149">Tamanho do arquivo</span><span class="sxs-lookup"><span data-stu-id="4d67f-149">File size</span></span>

<span data-ttu-id="4d67f-150">Normalmente os mecanismos de análise, tais como HDInsight e Azure Data Lake Analytics, têm uma sobrecarga por arquivo.</span><span class="sxs-lookup"><span data-stu-id="4d67f-150">Typically, analytics engines such as HDInsight and Azure Data Lake Analytics have a per-file overhead.</span></span>  <span data-ttu-id="4d67f-151">Se você armazenar os dados como vários arquivos pequenos, isso poderá afetar negativamente o desempenho.</span><span class="sxs-lookup"><span data-stu-id="4d67f-151">If you store your data as many small files, this can negatively affect performance.</span></span>  

<span data-ttu-id="4d67f-152">Em geral, organize seus dados em arquivos de tamanhos maior para melhorar o desempenho.</span><span class="sxs-lookup"><span data-stu-id="4d67f-152">In general, organize your data into larger sized files for better performance.</span></span>  <span data-ttu-id="4d67f-153">Como regra geral, organize conjuntos de dados em arquivos de 256 MB ou maiores.</span><span class="sxs-lookup"><span data-stu-id="4d67f-153">As a rule of thumb, organize data sets in files of 256MB or larger.</span></span> <span data-ttu-id="4d67f-154">Em alguns casos, como imagens e dados binários, não é possível tooprocess-los em paralelo.</span><span class="sxs-lookup"><span data-stu-id="4d67f-154">In some cases such as images and binary data, it is not possible tooprocess them in parallel.</span></span>  <span data-ttu-id="4d67f-155">Nesses casos, recomenda-se arquivos individuais de tookeep menos de 2GB.</span><span class="sxs-lookup"><span data-stu-id="4d67f-155">In these cases, it is recommended tookeep individual files under 2GB.</span></span>

<span data-ttu-id="4d67f-156">Às vezes, os pipelines de dados limitada controle sobre dados brutos de saudação que tem muitos arquivos pequenos.</span><span class="sxs-lookup"><span data-stu-id="4d67f-156">Sometimes, data pipelines have limited control over hello raw data which has lots of small files.</span></span>  <span data-ttu-id="4d67f-157">É recomendável toohave toouse para aplicativos downstream de arquivos de um processo de "culinária" gera maior.</span><span class="sxs-lookup"><span data-stu-id="4d67f-157">It is recommended toohave a “cooking” process that generates larger files toouse for downstream applications.</span></span>  

### <a name="organizing-time-series-data-in-folders"></a><span data-ttu-id="4d67f-158">Organizar os dados de série temporal em pastas</span><span class="sxs-lookup"><span data-stu-id="4d67f-158">Organizing Time Series data in folders</span></span>

<span data-ttu-id="4d67f-159">Para cargas de trabalho de Hive e ADLA, remoção de partição de dados de série temporal pode ajudar algumas consultas apenas um subconjunto dos dados de saudação que melhora o desempenho de leitura.</span><span class="sxs-lookup"><span data-stu-id="4d67f-159">For Hive and ADLA workloads, partition pruning of time-series data can help some queries read only a subset of hello data which improves performance.</span></span>    

<span data-ttu-id="4d67f-160">Esses pipelines que ingerem dados de série temporal muitas vezes colocam seus arquivos com uma nomenclatura muito estruturada para arquivos e pastas.</span><span class="sxs-lookup"><span data-stu-id="4d67f-160">Those pipelines that ingest time-series data, often place their files with a very structured naming for files and folders.</span></span> <span data-ttu-id="4d67f-161">Abaixo está um exemplo muito comum para dados estruturados por data:</span><span class="sxs-lookup"><span data-stu-id="4d67f-161">Below is a very common example we see for data that is structured by date:</span></span>

    \DataSet\YYYY\MM\DD\datafile_YYYY_MM_DD.tsv

<span data-ttu-id="4d67f-162">Observe que informações de data e hora Olá aparecem como pastas e nome de arquivo hello.</span><span class="sxs-lookup"><span data-stu-id="4d67f-162">Notice that hello datetime information appears both as folders and in hello filename.</span></span>

<span data-ttu-id="4d67f-163">Data e hora, a seguinte Olá é um padrão comum</span><span class="sxs-lookup"><span data-stu-id="4d67f-163">For date and time, hello following is a common pattern</span></span>

    \DataSet\YYYY\MM\DD\HH\mm\datafile_YYYY_MM_DD_HH_mm.tsv

<span data-ttu-id="4d67f-164">Novamente, escolha Olá feita com a organização de pasta e arquivo hello deve otimizar para Olá arquivos maiores e um número razoável de arquivos em cada pasta.</span><span class="sxs-lookup"><span data-stu-id="4d67f-164">Again, hello choice you make with hello folder and file organization should optimize for hello larger file sizes and a reasonable number of files in each folder.</span></span>

## <a name="optimizing-io-intensive-jobs-on-hadoop-and-spark-workloads-on-hdinsight"></a><span data-ttu-id="4d67f-165">Otimizar os trabalhos com uso intensivo de E/S em cargas de trabalho do Hadoop e Spark no HDInsight</span><span class="sxs-lookup"><span data-stu-id="4d67f-165">Optimizing I/O intensive jobs on Hadoop and Spark workloads on HDInsight</span></span>

<span data-ttu-id="4d67f-166">Trabalhos se encaixam em uma saudação três categorias a seguir:</span><span class="sxs-lookup"><span data-stu-id="4d67f-166">Jobs fall into one of hello following three categories:</span></span>

* <span data-ttu-id="4d67f-167">**Com uso intensivo de CPU.**</span><span class="sxs-lookup"><span data-stu-id="4d67f-167">**CPU intensive.**</span></span>  <span data-ttu-id="4d67f-168">Esses trabalhos têm tempos de computação longos com tempos de E/S mínimos.</span><span class="sxs-lookup"><span data-stu-id="4d67f-168">These jobs have long computation times with minimal I/O times.</span></span>  <span data-ttu-id="4d67f-169">Exemplos incluem aprendizado de máquina e trabalhos de processamento de linguagem natural.</span><span class="sxs-lookup"><span data-stu-id="4d67f-169">Examples include machine learning and natural language processing jobs.</span></span>  
* <span data-ttu-id="4d67f-170">**Com uso intensivo de memória.**</span><span class="sxs-lookup"><span data-stu-id="4d67f-170">**Memory intensive.**</span></span>  <span data-ttu-id="4d67f-171">Estes trabalhos usam muita memória.</span><span class="sxs-lookup"><span data-stu-id="4d67f-171">These jobs use lots of memory.</span></span>  <span data-ttu-id="4d67f-172">Exemplos incluem PageRank e trabalhos de análise em tempo real.</span><span class="sxs-lookup"><span data-stu-id="4d67f-172">Examples include PageRank and real-time analytics jobs.</span></span>  
* <span data-ttu-id="4d67f-173">**Com uso intensivo de E/S.**</span><span class="sxs-lookup"><span data-stu-id="4d67f-173">**I/O intensive.**</span></span>  <span data-ttu-id="4d67f-174">Esses trabalhos passam a maior parte do tempo fazendo E/S.</span><span class="sxs-lookup"><span data-stu-id="4d67f-174">These jobs spend most of their time doing I/O.</span></span>  <span data-ttu-id="4d67f-175">Um exemplo comum é um trabalho de cópia que realiza somente operações de leitura e gravação.</span><span class="sxs-lookup"><span data-stu-id="4d67f-175">A common example is a copy job which does only read and write operations.</span></span>  <span data-ttu-id="4d67f-176">Outros exemplos incluem trabalhos de preparação de dados leitura muitos dados, executa alguma transformação de dados e, em seguida, grava Olá repositório toohello backup de dados.</span><span class="sxs-lookup"><span data-stu-id="4d67f-176">Other examples include data preparation jobs that read a lot of data, performs some data transformation, and then writes hello data back toohello store.</span></span>  

<span data-ttu-id="4d67f-177">Olá diretrizes a seguir é apenas aplicável tooI trabalhos/S intensivos.</span><span class="sxs-lookup"><span data-stu-id="4d67f-177">hello following guidance is only applicable tooI/O intensive jobs.</span></span>

### <a name="general-considerations-for-an-hdinsight-cluster"></a><span data-ttu-id="4d67f-178">Considerações gerais para um cluster HDInsight</span><span class="sxs-lookup"><span data-stu-id="4d67f-178">General Considerations for an HDInsight cluster</span></span>

* <span data-ttu-id="4d67f-179">**Versões do HDInsight.**</span><span class="sxs-lookup"><span data-stu-id="4d67f-179">**HDInsight versions.**</span></span> <span data-ttu-id="4d67f-180">Para melhor desempenho, use a versão mais recente de saudação do HDInsight.</span><span class="sxs-lookup"><span data-stu-id="4d67f-180">For best performance, use hello latest release of HDInsight.</span></span>
* <span data-ttu-id="4d67f-181">**Regiões.**</span><span class="sxs-lookup"><span data-stu-id="4d67f-181">**Regions.**</span></span> <span data-ttu-id="4d67f-182">Coloque repositório Olá Data Lake em Olá mesma região do cluster do HDInsight hello.</span><span class="sxs-lookup"><span data-stu-id="4d67f-182">Place hello Data Lake Store in hello same region as hello HDInsight cluster.</span></span>  

<span data-ttu-id="4d67f-183">Um cluster HDInsight é composto de dois nós principais e alguns nós de trabalho.</span><span class="sxs-lookup"><span data-stu-id="4d67f-183">An HDInsight cluster is composed of two head nodes and some worker nodes.</span></span> <span data-ttu-id="4d67f-184">Cada nó de trabalho fornece um número específico de núcleos e memória, que é determinada pela Olá tipo de VM.</span><span class="sxs-lookup"><span data-stu-id="4d67f-184">Each worker node provides a specific number of cores and memory, which is determined by hello VM-type.</span></span>  <span data-ttu-id="4d67f-185">Ao executar um trabalho, YARN é Negociador de recurso Olá que aloca a memória disponível do hello e contêineres de toocreate núcleos.</span><span class="sxs-lookup"><span data-stu-id="4d67f-185">When running a job, YARN is hello resource negotiator that allocates hello available memory and cores toocreate containers.</span></span>  <span data-ttu-id="4d67f-186">Cada contêiner é executado trabalho de Olá Olá tarefas toocomplete necessários.</span><span class="sxs-lookup"><span data-stu-id="4d67f-186">Each container runs hello tasks needed toocomplete hello job.</span></span>  <span data-ttu-id="4d67f-187">Contêineres executados em paralelo tooprocess tarefas rapidamente.</span><span class="sxs-lookup"><span data-stu-id="4d67f-187">Containers run in parallel tooprocess tasks quickly.</span></span> <span data-ttu-id="4d67f-188">Portanto, o desempenho é aprimorado executando o máximo possível de contêineres paralelos.</span><span class="sxs-lookup"><span data-stu-id="4d67f-188">Therefore, performance is improved by running as many parallel containers as possible.</span></span>

<span data-ttu-id="4d67f-189">Há três camadas em um cluster HDInsight que podem ser ajustada tooincrease Olá número de contêineres e usam a taxa de transferência disponível.</span><span class="sxs-lookup"><span data-stu-id="4d67f-189">There are three layers within an HDInsight cluster that can be tuned tooincrease hello number of containers and use all available throughput.</span></span>  

* <span data-ttu-id="4d67f-190">**Camada física**</span><span class="sxs-lookup"><span data-stu-id="4d67f-190">**Physical layer**</span></span>
* <span data-ttu-id="4d67f-191">**Camada YARN**</span><span class="sxs-lookup"><span data-stu-id="4d67f-191">**YARN layer**</span></span>
* <span data-ttu-id="4d67f-192">**Camada de carga de trabalho**</span><span class="sxs-lookup"><span data-stu-id="4d67f-192">**Workload layer**</span></span>

### <a name="physical-layer"></a><span data-ttu-id="4d67f-193">Camada física</span><span class="sxs-lookup"><span data-stu-id="4d67f-193">Physical Layer</span></span>

<span data-ttu-id="4d67f-194">**Execute o cluster com mais nós e/ou VMs de tamanhos maior.**</span><span class="sxs-lookup"><span data-stu-id="4d67f-194">**Run cluster with more nodes and/or larger sized VMs.**</span></span>  <span data-ttu-id="4d67f-195">Um cluster maior permite que você toorun mais contêineres YARN conforme mostrado na imagem de saudação abaixo.</span><span class="sxs-lookup"><span data-stu-id="4d67f-195">A larger cluster will enable you toorun more YARN containers as shown in hello picture below.</span></span>

![Desempenho do Data Lake Store](./media/data-lake-store-performance-tuning-guidance/VM.png)

<span data-ttu-id="4d67f-197">**Use VMs com mais largura de banda de rede.**</span><span class="sxs-lookup"><span data-stu-id="4d67f-197">**Use VMs with more network bandwidth.**</span></span>  <span data-ttu-id="4d67f-198">quantidade de saudação de largura de banda de rede pode ser um gargalo se houver menos largura de banda de rede que a taxa de transferência do repositório Data Lake.</span><span class="sxs-lookup"><span data-stu-id="4d67f-198">hello amount of network bandwidth can be a bottleneck if there is less network bandwidth than Data Lake Store throughput.</span></span>  <span data-ttu-id="4d67f-199">Diferentes VMs terão diversos tamanhos de largura de banda de rede.</span><span class="sxs-lookup"><span data-stu-id="4d67f-199">Different VMs will have varying network bandwidth sizes.</span></span>  <span data-ttu-id="4d67f-200">Escolha um tipo de VM com hello maior largura de banda de rede possível.</span><span class="sxs-lookup"><span data-stu-id="4d67f-200">Choose a VM-type that has hello largest possible network bandwidth.</span></span>

### <a name="yarn-layer"></a><span data-ttu-id="4d67f-201">Camada YARN</span><span class="sxs-lookup"><span data-stu-id="4d67f-201">YARN Layer</span></span>

<span data-ttu-id="4d67f-202">**Use contêineres YARN menores.**</span><span class="sxs-lookup"><span data-stu-id="4d67f-202">**Use smaller YARN containers.**</span></span>  <span data-ttu-id="4d67f-203">Reduzir o tamanho de saudação do cada toocreate de contêiner YARN mais contêineres com hello mesma quantidade de recursos.</span><span class="sxs-lookup"><span data-stu-id="4d67f-203">Reduce hello size of each YARN container toocreate more containers with hello same amount of resources.</span></span>

![Desempenho do Data Lake Store](./media/data-lake-store-performance-tuning-guidance/small-containers.png)

<span data-ttu-id="4d67f-205">Dependendo de sua carga de trabalho, sempre haverá um tamanho de contêiner YARN mínimo necessário.</span><span class="sxs-lookup"><span data-stu-id="4d67f-205">Depending on your workload, there will always be a minimum YARN container size that is needed.</span></span> <span data-ttu-id="4d67f-206">Se você selecionar um contêiner muito pequeno, os trabalhos encontrarão problemas de falta de memória.</span><span class="sxs-lookup"><span data-stu-id="4d67f-206">If you pick too small a container, your jobs will run into out-of-memory issues.</span></span> <span data-ttu-id="4d67f-207">Normalmente, contêineres YARN não devem ser menores que 1 GB.</span><span class="sxs-lookup"><span data-stu-id="4d67f-207">Typically YARN containers should be no smaller than 1GB.</span></span> <span data-ttu-id="4d67f-208">É comuns contêineres YARN de 3GB toosee.</span><span class="sxs-lookup"><span data-stu-id="4d67f-208">It’s common toosee 3GB YARN containers.</span></span> <span data-ttu-id="4d67f-209">Para algumas cargas de trabalho, talvez contêineres YARN maiores sejam necessários.</span><span class="sxs-lookup"><span data-stu-id="4d67f-209">For some workloads, you may need larger YARN containers.</span></span>  

<span data-ttu-id="4d67f-210">**Aumente os núcleos por contêiner YARN.**</span><span class="sxs-lookup"><span data-stu-id="4d67f-210">**Increase cores per YARN container.**</span></span>  <span data-ttu-id="4d67f-211">Aumente o número de saudação de núcleos alocado tooeach contêiner tooincrease Olá número de tarefas paralelas que são executados em cada contêiner.</span><span class="sxs-lookup"><span data-stu-id="4d67f-211">Increase hello number of cores allocated tooeach container tooincrease hello number of parallel tasks that run in each container.</span></span>  <span data-ttu-id="4d67f-212">Isso funciona para aplicativos como Spark, que executam várias tarefas por contêiner.</span><span class="sxs-lookup"><span data-stu-id="4d67f-212">This works for applications like Spark which run multiple tasks per container.</span></span>  <span data-ttu-id="4d67f-213">Para aplicativos como o Hive que executam um único thread em cada contêiner, é melhor toohave mais contêineres em vez de mais núcleos por contêiner.</span><span class="sxs-lookup"><span data-stu-id="4d67f-213">For applications like Hive which run a single thread in each container, it is better toohave more containers rather than more cores per container.</span></span>   

### <a name="workload-layer"></a><span data-ttu-id="4d67f-214">Camada de carga de trabalho</span><span class="sxs-lookup"><span data-stu-id="4d67f-214">Workload Layer</span></span>

<span data-ttu-id="4d67f-215">**Use todos os contêineres disponíveis.**</span><span class="sxs-lookup"><span data-stu-id="4d67f-215">**Use all available containers.**</span></span>  <span data-ttu-id="4d67f-216">Definir número de saudação de tarefas toobe igual ou maior que o número de saudação de recipientes disponíveis para que todos os recursos são utilizados.</span><span class="sxs-lookup"><span data-stu-id="4d67f-216">Set hello number of tasks toobe equal or larger than hello number of available containers so that all resources are utilized.</span></span>

![Desempenho do Data Lake Store](./media/data-lake-store-performance-tuning-guidance/use-containers.png)

<span data-ttu-id="4d67f-218">**Tarefas com falha têm alto custo.**</span><span class="sxs-lookup"><span data-stu-id="4d67f-218">**Failed tasks are costly.**</span></span> <span data-ttu-id="4d67f-219">Se cada tarefa tem uma grande quantidade de dados tooprocess, falha de uma tarefa resulta em uma repetição cara.</span><span class="sxs-lookup"><span data-stu-id="4d67f-219">If each task has a large amount of data tooprocess, then failure of a task results in an expensive retry.</span></span>  <span data-ttu-id="4d67f-220">Portanto, é melhor toocreate mais tarefas, cada uma delas processa uma pequena quantidade de dados.</span><span class="sxs-lookup"><span data-stu-id="4d67f-220">Therefore, it is better toocreate more tasks, each of which processes a small amount of data.</span></span>

<span data-ttu-id="4d67f-221">Em adição toohello diretrizes gerais acima, cada aplicativo tem tootune de parâmetros diferentes disponíveis para o aplicativo específico.</span><span class="sxs-lookup"><span data-stu-id="4d67f-221">In addition toohello general guidelines above, each application has different parameters available tootune for that specific application.</span></span> <span data-ttu-id="4d67f-222">Olá tabela a seguir lista alguns dos tooget de parâmetros e links de saudação iniciado com o ajuste de desempenho para cada aplicativo.</span><span class="sxs-lookup"><span data-stu-id="4d67f-222">hello table below lists some of hello parameters and links tooget started with performance tuning for each application.</span></span>

| <span data-ttu-id="4d67f-223">Carga de trabalho</span><span class="sxs-lookup"><span data-stu-id="4d67f-223">Workload</span></span>               | <span data-ttu-id="4d67f-224">Tarefas do parâmetro tooset</span><span class="sxs-lookup"><span data-stu-id="4d67f-224">Parameter tooset tasks</span></span>                                                         |
|--------------------|-------------------------------------------------------------------------------------|
| [<span data-ttu-id="4d67f-225">Spark no HDInisight</span><span class="sxs-lookup"><span data-stu-id="4d67f-225">Spark on HDInisight</span></span>](data-lake-store-performance-tuning-spark.md)       | <ul><li><span data-ttu-id="4d67f-226">Num-executors</span><span class="sxs-lookup"><span data-stu-id="4d67f-226">Num-executors</span></span></li><li><span data-ttu-id="4d67f-227">Executor-memory</span><span class="sxs-lookup"><span data-stu-id="4d67f-227">Executor-memory</span></span></li><li><span data-ttu-id="4d67f-228">Executor-cores</span><span class="sxs-lookup"><span data-stu-id="4d67f-228">Executor-cores</span></span></li></ul> |
| [<span data-ttu-id="4d67f-229">Hive no HDInsight</span><span class="sxs-lookup"><span data-stu-id="4d67f-229">Hive on HDInsight</span></span>](data-lake-store-performance-tuning-hive.md)    | <ul><li><span data-ttu-id="4d67f-230">hive.tez.container.size</span><span class="sxs-lookup"><span data-stu-id="4d67f-230">hive.tez.container.size</span></span></li></ul>         |
| [<span data-ttu-id="4d67f-231">MapReduce no HDInsight</span><span class="sxs-lookup"><span data-stu-id="4d67f-231">MapReduce on HDInsight</span></span>](data-lake-store-performance-tuning-mapreduce.md)            | <ul><li><span data-ttu-id="4d67f-232">Mapreduce.map.memory</span><span class="sxs-lookup"><span data-stu-id="4d67f-232">Mapreduce.map.memory</span></span></li><li><span data-ttu-id="4d67f-233">Mapreduce.job.maps</span><span class="sxs-lookup"><span data-stu-id="4d67f-233">Mapreduce.job.maps</span></span></li><li><span data-ttu-id="4d67f-234">Mapreduce.reduce.memory</span><span class="sxs-lookup"><span data-stu-id="4d67f-234">Mapreduce.reduce.memory</span></span></li><li><span data-ttu-id="4d67f-235">Mapreduce.job.reduces</span><span class="sxs-lookup"><span data-stu-id="4d67f-235">Mapreduce.job.reduces</span></span></li></ul> |
| [<span data-ttu-id="4d67f-236">Storm no HDInsight</span><span class="sxs-lookup"><span data-stu-id="4d67f-236">Storm on HDInsight</span></span>](data-lake-store-performance-tuning-storm.md)| <ul><li><span data-ttu-id="4d67f-237">Número de processos de trabalho</span><span class="sxs-lookup"><span data-stu-id="4d67f-237">Number of worker processes</span></span></li><li><span data-ttu-id="4d67f-238">Número de instâncias de spout executor</span><span class="sxs-lookup"><span data-stu-id="4d67f-238">Number of spout executor instances</span></span></li><li><span data-ttu-id="4d67f-239">Número de instâncias de bolt executor</span><span class="sxs-lookup"><span data-stu-id="4d67f-239">Number of bolt executor instances</span></span> </li><li><span data-ttu-id="4d67f-240">Número de tarefas de spout</span><span class="sxs-lookup"><span data-stu-id="4d67f-240">Number of spout tasks</span></span></li><li><span data-ttu-id="4d67f-241">Número de tarefas de bolt</span><span class="sxs-lookup"><span data-stu-id="4d67f-241">Number of bolt tasks</span></span></li></ul>|

## <a name="see-also"></a><span data-ttu-id="4d67f-242">Consulte também</span><span class="sxs-lookup"><span data-stu-id="4d67f-242">See also</span></span>
* [<span data-ttu-id="4d67f-243">Visão geral do Repositório Azure Data Lake</span><span class="sxs-lookup"><span data-stu-id="4d67f-243">Overview of Azure Data Lake Store</span></span>](data-lake-store-overview.md)
* [<span data-ttu-id="4d67f-244">Introdução à Análise Data Lake do Azure</span><span class="sxs-lookup"><span data-stu-id="4d67f-244">Get Started with Azure Data Lake Analytics</span></span>](../data-lake-analytics/data-lake-analytics-get-started-portal.md)
