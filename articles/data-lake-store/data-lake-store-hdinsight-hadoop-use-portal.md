---
title: "Olá aaaUse toocreate portal do Azure HDInsight do Azure clusters com repositório Data Lake | Microsoft Docs"
description: "Usar Olá toocreate portal do Azure e usar clusters de HDInsight com repositório Azure Data Lake"
services: data-lake-store,hdinsight
documentationcenter: 
author: nitinme
manager: jhubbard
editor: cgronlun
ms.assetid: a8c45a83-a8e3-4227-8b02-1bc1e1de6767
ms.service: data-lake-store
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 08/14/2017
ms.author: nitinme
ms.openlocfilehash: f23113d444a3c5a01894dba29f75f3621b2d16bd
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="create-hdinsight-clusters-with-data-lake-store-by-using-hello-azure-portal"></a><span data-ttu-id="1c737-103">Criar clusters de HDInsight com repositório Data Lake usando Olá portal do Azure</span><span class="sxs-lookup"><span data-stu-id="1c737-103">Create HDInsight clusters with Data Lake Store by using hello Azure portal</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="1c737-104">Use Olá portal do Azure</span><span class="sxs-lookup"><span data-stu-id="1c737-104">Use hello Azure portal</span></span>](data-lake-store-hdinsight-hadoop-use-portal.md)
> * [<span data-ttu-id="1c737-105">Usar o PowerShell (para armazenamento padrão)</span><span class="sxs-lookup"><span data-stu-id="1c737-105">Use PowerShell (for default storage)</span></span>](data-lake-store-hdinsight-hadoop-use-powershell-for-default-storage.md)
> * [<span data-ttu-id="1c737-106">Usar o PowerShell (para armazenamento adicional)</span><span class="sxs-lookup"><span data-stu-id="1c737-106">Use PowerShell (for additional storage)</span></span>](data-lake-store-hdinsight-hadoop-use-powershell.md)
> * [<span data-ttu-id="1c737-107">Usar o Resource Manager</span><span class="sxs-lookup"><span data-stu-id="1c737-107">Use Resource Manager</span></span>](data-lake-store-hdinsight-hadoop-use-resource-manager-template.md)
>
>

<span data-ttu-id="1c737-108">Saiba como toouse Olá toocreate portal do Azure um cluster HDInsight com uma conta do repositório Azure Data Lake como um armazenamento adicional ou de armazenamento padrão da saudação.</span><span class="sxs-lookup"><span data-stu-id="1c737-108">Learn how toouse hello Azure portal toocreate a HDInsight cluster with an Azure Data Lake Store account as hello default storage or an additional storage.</span></span> <span data-ttu-id="1c737-109">Embora o armazenamento adicional é opcional para um cluster HDInsight, é recomendável toostore seus dados comerciais em hello mais contas de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="1c737-109">Even though additional storage is optional for a HDInsight cluster, it is recommended toostore your business data in hello additional storage accounts.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="1c737-110">Pré-requisitos</span><span class="sxs-lookup"><span data-stu-id="1c737-110">Prerequisites</span></span>
<span data-ttu-id="1c737-111">Antes de começar este tutorial, certifique-se de que você cumpriu Olá requisitos a seguir:</span><span class="sxs-lookup"><span data-stu-id="1c737-111">Before you begin this tutorial, ensure that you've met hello following requirements:</span></span>

* <span data-ttu-id="1c737-112">**Uma assinatura do Azure**.</span><span class="sxs-lookup"><span data-stu-id="1c737-112">**An Azure subscription**.</span></span> <span data-ttu-id="1c737-113">Vá muito[avaliação gratuita do Azure obter](https://azure.microsoft.com/pricing/free-trial/).</span><span class="sxs-lookup"><span data-stu-id="1c737-113">Go too[Get Azure free trial](https://azure.microsoft.com/pricing/free-trial/).</span></span>
* <span data-ttu-id="1c737-114">**Uma conta do repositório Azure Data Lake**.</span><span class="sxs-lookup"><span data-stu-id="1c737-114">**An Azure Data Lake Store account**.</span></span> <span data-ttu-id="1c737-115">Siga as instruções de saudação do [Introdução ao repositório Azure Data Lake usando o portal do Azure de saudação](data-lake-store-get-started-portal.md).</span><span class="sxs-lookup"><span data-stu-id="1c737-115">Follow hello instructions from [Get started with Azure Data Lake Store by using hello Azure portal](data-lake-store-get-started-portal.md).</span></span> <span data-ttu-id="1c737-116">Você também deve criar uma pasta raiz na conta de saudação.</span><span class="sxs-lookup"><span data-stu-id="1c737-116">You must also create a root folder on hello account.</span></span>  <span data-ttu-id="1c737-117">Neste tutorial, uma pasta raiz chamada __/clusters__ é usada.</span><span class="sxs-lookup"><span data-stu-id="1c737-117">In this tutorial, a root folder called __/clusters__ is used.</span></span>
* <span data-ttu-id="1c737-118">**Uma entidade de serviço do Azure Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="1c737-118">**An Azure Active Directory service principal**.</span></span> <span data-ttu-id="1c737-119">Este tutorial fornece instruções sobre como toocreate uma entidade de serviço no Azure Active Directory (AD do Azure).</span><span class="sxs-lookup"><span data-stu-id="1c737-119">This tutorial provides instructions on how toocreate a service principal in Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="1c737-120">No entanto, toocreate uma entidade de serviço, você deve ser um administrador do AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="1c737-120">However, toocreate a service principal, you must be an Azure AD administrator.</span></span> <span data-ttu-id="1c737-121">Se você for um administrador, você pode ignorar esse pré-requisito e continuar com o tutorial hello.</span><span class="sxs-lookup"><span data-stu-id="1c737-121">If you are an administrator, you can skip this prerequisite and proceed with hello tutorial.</span></span>

    >[!NOTE]
    ><span data-ttu-id="1c737-122">Você poderá criar uma entidade de serviço somente se for um administrador do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="1c737-122">You can create a service principal only if you are an Azure AD administrator.</span></span> <span data-ttu-id="1c737-123">O administrador do Azure AD deverá criar uma entidade de serviço antes que você possa criar um cluster HDInsight com o Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="1c737-123">Your Azure AD administrator must create a service principal before you can create an HDInsight cluster with Data Lake Store.</span></span> <span data-ttu-id="1c737-124">Além disso, entidade de serviço Olá deve ser criada com um certificado, conforme descrito em [criar uma entidade de serviço com certificado](../azure-resource-manager/resource-group-authenticate-service-principal.md#create-service-principal-with-self-signed-certificate).</span><span class="sxs-lookup"><span data-stu-id="1c737-124">Also, hello service principal must be created with a certificate, as described at [Create a service principal with certificate](../azure-resource-manager/resource-group-authenticate-service-principal.md#create-service-principal-with-self-signed-certificate).</span></span>
    >

## <a name="create-an-hdinsight-cluster"></a><span data-ttu-id="1c737-125">Crie um cluster HDInsight</span><span class="sxs-lookup"><span data-stu-id="1c737-125">Create an HDInsight cluster</span></span>

<span data-ttu-id="1c737-126">Nesta seção, você pode criar um cluster HDInsight com contas do repositório Data Lake como padrão de saudação ou armazenamento adicional da saudação.</span><span class="sxs-lookup"><span data-stu-id="1c737-126">In this section, you create a HDInsight cluster with Data Lake Store accounts as hello default or hello additional storage.</span></span> <span data-ttu-id="1c737-127">Este artigo se concentra somente a parte de saudação da configuração de contas do repositório Data Lake.</span><span class="sxs-lookup"><span data-stu-id="1c737-127">This article only focuses hello part of configuring Data Lake Store accounts.</span></span>  <span data-ttu-id="1c737-128">Para informações de criação de cluster geral hello e procedimentos, consulte [Hadoop criar clusters de HDInsight](../hdinsight/hdinsight-hadoop-provision-linux-clusters.md).</span><span class="sxs-lookup"><span data-stu-id="1c737-128">For hello general cluster creation information and procedures, see [Create Hadoop clusters in HDInsight](../hdinsight/hdinsight-hadoop-provision-linux-clusters.md).</span></span>

### <a name="create-a-cluster-with-data-lake-store-as-default-storage"></a><span data-ttu-id="1c737-129">Criar um cluster com o Data Lake Store como armazenamento padrão</span><span class="sxs-lookup"><span data-stu-id="1c737-129">Create a cluster with Data Lake Store as default storage</span></span>

<span data-ttu-id="1c737-130">**toocreate um HDInsight cluster com um repositório Data Lake como conta de armazenamento saudação padrão**</span><span class="sxs-lookup"><span data-stu-id="1c737-130">**toocreate a HDInsight cluster with a Data Lake Store as hello default storage account**</span></span>

1. <span data-ttu-id="1c737-131">Entrar toohello [portal do Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="1c737-131">Sign in toohello [Azure portal](https://portal.azure.com).</span></span>
2. <span data-ttu-id="1c737-132">Execute [criar clusters](../hdinsight/hdinsight-hadoop-create-linux-clusters-portal.md#create-clusters) para obter informações gerais sobre a criação de clusters HDInsight hello.</span><span class="sxs-lookup"><span data-stu-id="1c737-132">Follow [Create clusters](../hdinsight/hdinsight-hadoop-create-linux-clusters-portal.md#create-clusters) for hello general information on creating HDInsight clusters.</span></span>
3. <span data-ttu-id="1c737-133">Em Olá **armazenamento** folha, em **tipo de armazenamento primário**, selecione **repositório Data Lake**e, em seguida, digite Olá informações a seguir:</span><span class="sxs-lookup"><span data-stu-id="1c737-133">On hello **Storage** blade, under **Primary storage type**, select **Data Lake Store**, and then enter hello following information:</span></span>

    <span data-ttu-id="1c737-134">![Cluster de tooHDInsight principal de serviço Add](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.1.adls.storage.png "adicionar cluster de tooHDInsight principal de serviço")</span><span class="sxs-lookup"><span data-stu-id="1c737-134">![Add service principal tooHDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.1.adls.storage.png "Add service principal tooHDInsight cluster")</span></span>

    - <span data-ttu-id="1c737-135">**Selecionar conta do Data Lake Store**: selecione uma conta existente do Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="1c737-135">**Select Data Lake Store account**: Select an existing Data Lake Store account.</span></span> <span data-ttu-id="1c737-136">Uma conta existente do Data Lake Store é necessária.</span><span class="sxs-lookup"><span data-stu-id="1c737-136">An existing Data Lake Store account is required.</span></span>  <span data-ttu-id="1c737-137">Consulte [Pré-requisitos](#prereuisites).</span><span class="sxs-lookup"><span data-stu-id="1c737-137">See [Prerequisites](#prereuisites).</span></span>
    - <span data-ttu-id="1c737-138">**Caminho raiz**: insira um caminho onde os arquivos de cluster específicos de saudação estão toobe armazenado.</span><span class="sxs-lookup"><span data-stu-id="1c737-138">**Root path**: Enter a path where hello cluster-specific files are toobe stored.</span></span> <span data-ttu-id="1c737-139">Na captura de tela hello, é __/clusters myhdiadlcluster/__, no qual Olá __/clusters__ pasta deve existir e hello Portal cria *myhdicluster* pasta.</span><span class="sxs-lookup"><span data-stu-id="1c737-139">On hello screenshot, it is __/clusters/myhdiadlcluster/__, in which hello __/clusters__ folder must exist, and hello Portal creates *myhdicluster* folder.</span></span>  <span data-ttu-id="1c737-140">Olá *myhdicluster* é o nome do cluster hello.</span><span class="sxs-lookup"><span data-stu-id="1c737-140">hello *myhdicluster* is hello cluster name.</span></span>
    - <span data-ttu-id="1c737-141">**Acesso de repositório data Lake**: configurar o acesso entre a conta do repositório Data Lake hello e o cluster HDInsight.</span><span class="sxs-lookup"><span data-stu-id="1c737-141">**Data Lake Store access**: Configure access between hello Data Lake Store account and HDInsight cluster.</span></span> <span data-ttu-id="1c737-142">Para obter instruções, consulte [Configurar acesso ao Data Lake Store](#configure-data-lake-store-access).</span><span class="sxs-lookup"><span data-stu-id="1c737-142">For instructions, see [Configure Data Lake Store access](#configure-data-lake-store-access).</span></span>
    - <span data-ttu-id="1c737-143">**Contas de armazenamento adicionais**: contas de adicionar contas de armazenamento do Azure como armazenamento adicional para o cluster hello.</span><span class="sxs-lookup"><span data-stu-id="1c737-143">**Additional storage accounts**: Add Azure Storage Accounts as additional storage accounts for hello cluster.</span></span> <span data-ttu-id="1c737-144">tooadd adicionais Data Lake armazenamentos é feito dando permissões de cluster Olá nos dados mais contas do repositório Data Lake ao configurar uma conta do repositório Data Lake como tipo de armazenamento primário hello.</span><span class="sxs-lookup"><span data-stu-id="1c737-144">tooadd additional Data Lake Stores is done by giving hello cluster permissions on data in more Data Lake Store accounts while configuring a Data Lake Store account as hello primary storage type.</span></span> <span data-ttu-id="1c737-145">Consulte [Configurar acesso ao Data Lake Store](#configure-data-lake-store-access).</span><span class="sxs-lookup"><span data-stu-id="1c737-145">See [Configure Data Lake Store access](#configure-data-lake-store-access).</span></span>

4. <span data-ttu-id="1c737-146">Em Olá **acesso de repositório Data Lake**, clique em **selecione**e, em seguida, continue com a criação do cluster, conforme descrito em [Hadoop criar clusters de HDInsight](../hdinsight/hdinsight-hadoop-create-linux-clusters-portal.md).</span><span class="sxs-lookup"><span data-stu-id="1c737-146">On hello **Data Lake Store access**, click **Select**, and then continue with cluster creation as described in [Create Hadoop clusters in HDInsight](../hdinsight/hdinsight-hadoop-create-linux-clusters-portal.md).</span></span>


### <a name="create-a-cluster-with-data-lake-store-as-additional-storage"></a><span data-ttu-id="1c737-147">Criar um cluster com o Data Lake Store como armazenamento adicional</span><span class="sxs-lookup"><span data-stu-id="1c737-147">Create a cluster with Data Lake Store as additional storage</span></span>

<span data-ttu-id="1c737-148">Olá instruções a seguir cria um cluster HDInsight com uma conta de armazenamento do Azure como armazenamento de padrão de saudação e uma conta de repositório Data Lake como um armazenamento adicional.</span><span class="sxs-lookup"><span data-stu-id="1c737-148">hello following instructions create a HDInsight cluster with an Azure Storage account as hello default storage, and a Data Lake Store account as an additional storage.</span></span>
<span data-ttu-id="1c737-149">**toocreate um HDInsight cluster com um repositório Data Lake como conta de armazenamento saudação padrão**</span><span class="sxs-lookup"><span data-stu-id="1c737-149">**toocreate a HDInsight cluster with a Data Lake Store as hello default storage account**</span></span>

1. <span data-ttu-id="1c737-150">Entrar toohello [portal do Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="1c737-150">Sign in toohello [Azure portal](https://portal.azure.com).</span></span>
2. <span data-ttu-id="1c737-151">Execute [criar clusters](../hdinsight/hdinsight-hadoop-create-linux-clusters-portal.md#create-clusters) para obter informações gerais sobre a criação de clusters HDInsight hello.</span><span class="sxs-lookup"><span data-stu-id="1c737-151">Follow [Create clusters](../hdinsight/hdinsight-hadoop-create-linux-clusters-portal.md#create-clusters) for hello general information on creating HDInsight clusters.</span></span>
3. <span data-ttu-id="1c737-152">Em Olá **armazenamento** folha, em **tipo de armazenamento primário**, selecione **armazenamento do Azure**e, em seguida, digite Olá informações a seguir:</span><span class="sxs-lookup"><span data-stu-id="1c737-152">On hello **Storage** blade, under **Primary storage type**, select **Azure Storage**, and then enter hello following information:</span></span>

    <span data-ttu-id="1c737-153">![Cluster de tooHDInsight principal de serviço Add](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.1.png "adicionar cluster de tooHDInsight principal de serviço")</span><span class="sxs-lookup"><span data-stu-id="1c737-153">![Add service principal tooHDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.1.png "Add service principal tooHDInsight cluster")</span></span>

    - <span data-ttu-id="1c737-154">**Método de seleção**: use uma saudação as opções a seguir:</span><span class="sxs-lookup"><span data-stu-id="1c737-154">**Selection method**: use one of hello following options:</span></span>

        * <span data-ttu-id="1c737-155">toospecify uma conta de armazenamento que faz parte de sua assinatura do Azure, selecione **Minhas assinaturas**e, em seguida, selecione conta de armazenamento hello.</span><span class="sxs-lookup"><span data-stu-id="1c737-155">toospecify a storage account that is part of your Azure subscription, select **My subscriptions**, and then select hello storage account.</span></span>
        * <span data-ttu-id="1c737-156">toospecify uma conta de armazenamento que está fora de sua assinatura do Azure, selecione **chave de acesso**e, em seguida, fornecer informações Olá Olá fora da conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="1c737-156">toospecify a storage account that is outside your Azure subscription, select **Access key**, and then provide hello information for hello outside storage account.</span></span>

    - <span data-ttu-id="1c737-157">**Contêiner padrão**: Usar valor saudação padrão ou especificar seu próprio nome.</span><span class="sxs-lookup"><span data-stu-id="1c737-157">**Default container**: use either hello default value or specify your own name.</span></span>

    - <span data-ttu-id="1c737-158">Contas de armazenamento adicionais: adicionar mais contas de armazenamento do Azure como armazenamento adicional da saudação.</span><span class="sxs-lookup"><span data-stu-id="1c737-158">Additional Storage accounts: add more Azure Storage accounts as hello additional storage.</span></span>
    - <span data-ttu-id="1c737-159">Acesso de repositório data Lake: configurar o acesso entre a conta do repositório Data Lake hello e o cluster HDInsight.</span><span class="sxs-lookup"><span data-stu-id="1c737-159">Data Lake Store access: configure access between hello Data Lake Store account and HDInsight cluster.</span></span> <span data-ttu-id="1c737-160">Para obter instruções, consulte [Configurar acesso ao Data Lake Store](#configure-data-lake-store-access).</span><span class="sxs-lookup"><span data-stu-id="1c737-160">For instructions see [Configure Data Lake Store access](#configure-data-lake-store-access).</span></span>

## <a name="configure-data-lake-store-access"></a><span data-ttu-id="1c737-161">Configurar acesso ao Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="1c737-161">Configure Data Lake Store access</span></span> 

<span data-ttu-id="1c737-162">Nesta seção, você configura o acesso ao Data Lake Store de clusters do HDInsight usando uma entidade de serviço do Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="1c737-162">In this section, you configure Data Lake Store access from HDInsight clusters using an Azure Active Directory service principal.</span></span> 

### <a name="specify-a-service-principal"></a><span data-ttu-id="1c737-163">Especificar uma entidade de serviço</span><span class="sxs-lookup"><span data-stu-id="1c737-163">Specify a service principal</span></span>

<span data-ttu-id="1c737-164">De Olá portal do Azure, você pode usar uma entidade de serviço existente ou criar um novo.</span><span class="sxs-lookup"><span data-stu-id="1c737-164">From hello Azure portal, you can either use an existing service principal or create a new one.</span></span>

<span data-ttu-id="1c737-165">**toocreate uma entidade de serviço de saudação portal do Azure**</span><span class="sxs-lookup"><span data-stu-id="1c737-165">**toocreate a service principal from hello Azure portal**</span></span>

1. <span data-ttu-id="1c737-166">Clique em **acesso de repositório Data Lake** da folha de repositório de saudação.</span><span class="sxs-lookup"><span data-stu-id="1c737-166">Click **Data Lake Store access** from hello Store blade.</span></span>
2. <span data-ttu-id="1c737-167">Em Olá **acesso de repositório Data Lake** folha, clique em **criar novo**.</span><span class="sxs-lookup"><span data-stu-id="1c737-167">On hello **Data Lake Store access** blade, click **Create new**.</span></span>
3. <span data-ttu-id="1c737-168">Clique em **entidade de serviço**e siga as instruções de saudação toocreate uma entidade de serviço.</span><span class="sxs-lookup"><span data-stu-id="1c737-168">Click **Service Principal**, and then follow hello instructions toocreate a service principal.</span></span>
4. <span data-ttu-id="1c737-169">Baixar o certificado de saudação se você decidir toouse-lo novamente no futuro de saudação.</span><span class="sxs-lookup"><span data-stu-id="1c737-169">Download hello certificate if you decide toouse it again in hello future.</span></span> <span data-ttu-id="1c737-170">Baixando certificado de saudação é útil que se você quiser toouse Olá mesmo serviço principal, quando você criar clusters de HDInsight adicionais.</span><span class="sxs-lookup"><span data-stu-id="1c737-170">Downloading hello certificate is useful if you want toouse hello same service principal when you create additional HDInsight clusters.</span></span>

    <span data-ttu-id="1c737-171">![Cluster de tooHDInsight principal de serviço Add](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.2.png "adicionar cluster de tooHDInsight principal de serviço")</span><span class="sxs-lookup"><span data-stu-id="1c737-171">![Add service principal tooHDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.2.png "Add service principal tooHDInsight cluster")</span></span>

4. <span data-ttu-id="1c737-172">Clique em **acesso** tooconfigure acesso à pasta de saudação.</span><span class="sxs-lookup"><span data-stu-id="1c737-172">Click **Access** tooconfigure hello folder access.</span></span>  <span data-ttu-id="1c737-173">Consulte [Configurar permissões de arquivo](#configure-file-permissions).</span><span class="sxs-lookup"><span data-stu-id="1c737-173">See [Configure file permissions](#configure-file-permissions).</span></span>


<span data-ttu-id="1c737-174">**toouse uma entidade de saudação do Azure portal de serviço existente**</span><span class="sxs-lookup"><span data-stu-id="1c737-174">**toouse an existing service principal from hello Azure portal**</span></span>

1. <span data-ttu-id="1c737-175">Clique em **Acesso ao Data Lake Store**.</span><span class="sxs-lookup"><span data-stu-id="1c737-175">Click **Data Lake Store access**.</span></span>
1. <span data-ttu-id="1c737-176">Em Olá **acesso de repositório Data Lake** folha, clique em **usar existente**.</span><span class="sxs-lookup"><span data-stu-id="1c737-176">On hello **Data Lake Store access** blade, click **Use existing**.</span></span>
2. <span data-ttu-id="1c737-177">Clique em **Entidade de Serviço** e, em seguida, selecione uma entidade de serviço.</span><span class="sxs-lookup"><span data-stu-id="1c737-177">Click **Service Principal**, and then select a service principal.</span></span> 
3. <span data-ttu-id="1c737-178">Carregar certificado de hello (arquivo. pfx) que é associado com a entidade de serviço selecionado e, em seguida, digite a senha do certificado hello.</span><span class="sxs-lookup"><span data-stu-id="1c737-178">Upload hello certificate (.pfx file) that's associated with your selected service principal, and then enter hello certificate password.</span></span>

    <span data-ttu-id="1c737-179">![Cluster de tooHDInsight principal de serviço Add](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.5.png "adicionar cluster de tooHDInsight principal de serviço")</span><span class="sxs-lookup"><span data-stu-id="1c737-179">![Add service principal tooHDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.5.png "Add service principal tooHDInsight cluster")</span></span>

4. <span data-ttu-id="1c737-180">Clique em **acesso** tooconfigure acesso à pasta de saudação.</span><span class="sxs-lookup"><span data-stu-id="1c737-180">Click **Access** tooconfigure hello folder access.</span></span>  <span data-ttu-id="1c737-181">Consulte [Configurar permissões de arquivo](#configure-file-permissions).</span><span class="sxs-lookup"><span data-stu-id="1c737-181">See [Configure file permissions](#configure-file-permissions).</span></span>


### <span data-ttu-id="1c737-182"><a name="configure-file-permissions"></a>Configurar permissões de arquivo</span><span class="sxs-lookup"><span data-stu-id="1c737-182"><a name="configure-file-permissions"></a>Configure file permissions</span></span>

<span data-ttu-id="1c737-183">Olá configura são diferentes dependendo se a conta de saudação é usada como uma conta de armazenamento adicional ou de armazenamento padrão da saudação:</span><span class="sxs-lookup"><span data-stu-id="1c737-183">hello configures are different depending on whether hello account is used as hello default storage or an additional storage account:</span></span>

- <span data-ttu-id="1c737-184">Usado como o armazenamento padrão</span><span class="sxs-lookup"><span data-stu-id="1c737-184">Used as default storage</span></span>

    - <span data-ttu-id="1c737-185">permissão no nível de raiz de saudação do hello conta do repositório Data Lake</span><span class="sxs-lookup"><span data-stu-id="1c737-185">permission at hello root level of hello Data Lake Store account</span></span>
    - <span data-ttu-id="1c737-186">permissão no nível de raiz de saudação do hello armazenamento de cluster HDInsight.</span><span class="sxs-lookup"><span data-stu-id="1c737-186">permission at hello root level of hello HDInsight cluster storage.</span></span> <span data-ttu-id="1c737-187">Por exemplo, Olá __/clusters__ pasta usada anteriormente no tutorial de saudação.</span><span class="sxs-lookup"><span data-stu-id="1c737-187">For example, hello __/clusters__ folder used earlier in hello tutorial.</span></span>
- <span data-ttu-id="1c737-188">Usar como um armazenamento adicional</span><span class="sxs-lookup"><span data-stu-id="1c737-188">Use as an additional storage</span></span>

    - <span data-ttu-id="1c737-189">Permissão em pastas de saudação onde você acesso necessário ao arquivo.</span><span class="sxs-lookup"><span data-stu-id="1c737-189">Permission at hello folders where you need file access.</span></span>

<span data-ttu-id="1c737-190">**permissão de tooassign a saudação de nível de raiz de conta do repositório Data Lake**</span><span class="sxs-lookup"><span data-stu-id="1c737-190">**tooassign permission at hello Data Lake Store account root level**</span></span>

1. <span data-ttu-id="1c737-191">Em Olá **acesso de repositório Data Lake** folha, clique em **acesso**.</span><span class="sxs-lookup"><span data-stu-id="1c737-191">On hello **Data Lake Store access** blade, click **Access**.</span></span> <span data-ttu-id="1c737-192">Olá **selecionar permissões de arquivo** folha é aberta.</span><span class="sxs-lookup"><span data-stu-id="1c737-192">hello **Select file permissions** blade is opened.</span></span> <span data-ttu-id="1c737-193">Ele lista todas as contas do repositório Data Lake Olá em sua assinatura.</span><span class="sxs-lookup"><span data-stu-id="1c737-193">It lists all hello Data Lake Store accounts in your subscription.</span></span>
2. <span data-ttu-id="1c737-194">Passe o mouse (não clique) mouse Olá sobre nome de saudação do hello toomake Olá caixa de seleção visível, em seguida, selecione Olá a caixa de seleção de conta de repositório Data Lake.</span><span class="sxs-lookup"><span data-stu-id="1c737-194">Hover (do not click) hello mouse over hello name of hello Data Lake Store account toomake hello check box visible, then select hello check box.</span></span>

    <span data-ttu-id="1c737-195">![Cluster de tooHDInsight principal de serviço Add](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.3.png "adicionar cluster de tooHDInsight principal de serviço")</span><span class="sxs-lookup"><span data-stu-id="1c737-195">![Add service principal tooHDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.3.png "Add service principal tooHDInsight cluster")</span></span>

  <span data-ttu-id="1c737-196">Por padrão, as opções __LER__, __GRAVAR__ E __EXECUTAR__ estão selecionadas.</span><span class="sxs-lookup"><span data-stu-id="1c737-196">By default, __READ__, __WRITE__, AND __EXECUTE__ are all selected.</span></span>

3. <span data-ttu-id="1c737-197">Clique em **selecione** na parte inferior da saudação da página de saudação.</span><span class="sxs-lookup"><span data-stu-id="1c737-197">Click **Select** on hello bottom of hello page.</span></span>
4. <span data-ttu-id="1c737-198">Clique em **executar** tooassign permissão.</span><span class="sxs-lookup"><span data-stu-id="1c737-198">Click **Run** tooassign permission.</span></span>
5. <span data-ttu-id="1c737-199">Clique em **Concluído**.</span><span class="sxs-lookup"><span data-stu-id="1c737-199">Click **Done**.</span></span>

<span data-ttu-id="1c737-200">**permissão de tooassign a saudação de nível de raiz de cluster do HDInsight**</span><span class="sxs-lookup"><span data-stu-id="1c737-200">**tooassign permission at hello HDInsight cluster root level**</span></span>

1. <span data-ttu-id="1c737-201">Em Olá **acesso de repositório Data Lake** folha, clique em **acesso**.</span><span class="sxs-lookup"><span data-stu-id="1c737-201">On hello **Data Lake Store access** blade, click **Access**.</span></span> <span data-ttu-id="1c737-202">Olá **selecionar permissões de arquivo** folha é aberta.</span><span class="sxs-lookup"><span data-stu-id="1c737-202">hello **Select file permissions** blade is opened.</span></span> <span data-ttu-id="1c737-203">Ele lista todas as contas do repositório Data Lake Olá em sua assinatura.</span><span class="sxs-lookup"><span data-stu-id="1c737-203">It lists all hello Data Lake Store accounts in your subscription.</span></span>
1. <span data-ttu-id="1c737-204">De saudação **selecionar permissões de arquivo** folha, clique em tooshow de nome de repositório Data Lake Olá seu conteúdo.</span><span class="sxs-lookup"><span data-stu-id="1c737-204">From hello **Select file permissions** blade, click hello Data Lake Store name tooshow its content.</span></span>
2. <span data-ttu-id="1c737-205">Selecione raiz de armazenamento de cluster de HDInsight Olá de caixa de seleção Olá esquerda saudação da pasta hello.</span><span class="sxs-lookup"><span data-stu-id="1c737-205">Select hello HDInsight cluster storage root by selecting hello checkbox on hello left of hello folder.</span></span> <span data-ttu-id="1c737-206">De acordo com captura de tela de toohello anteriormente, é de raiz de armazenamento de cluster Olá __/clusters__ pasta que você especificou ao selecionar repositório Olá Data Lake como armazenamento padrão.</span><span class="sxs-lookup"><span data-stu-id="1c737-206">According toohello screenshot earlier, hello cluster storage root is __/clusters__ folder that you specified while selecting hello Data Lake Store as default storage.</span></span>
3. <span data-ttu-id="1c737-207">Definir permissões de saudação na pasta de saudação.</span><span class="sxs-lookup"><span data-stu-id="1c737-207">Set hello permissions on hello folder.</span></span>  <span data-ttu-id="1c737-208">Por padrão, as opções ler, gravar e executar estão selecionadas.</span><span class="sxs-lookup"><span data-stu-id="1c737-208">By default, read, write, and execute are all selected.</span></span>
4. <span data-ttu-id="1c737-209">Clique em **selecione** na parte inferior da saudação da página de saudação.</span><span class="sxs-lookup"><span data-stu-id="1c737-209">Click **Select** on hello bottom of hello page.</span></span>
5. <span data-ttu-id="1c737-210">Clique em **Executar**.</span><span class="sxs-lookup"><span data-stu-id="1c737-210">Click **Run**.</span></span>
6. <span data-ttu-id="1c737-211">Clique em **Concluído**.</span><span class="sxs-lookup"><span data-stu-id="1c737-211">Click **Done**.</span></span>

<span data-ttu-id="1c737-212">Se você estiver usando o repositório Data Lake como armazenamento adicional, você deve atribuir permissão somente para pastas de saudação que você deseja tooaccess do cluster do HDInsight hello.</span><span class="sxs-lookup"><span data-stu-id="1c737-212">If you are using Data Lake Store as additional storage, you must assign permission only for hello folders that you want tooaccess from hello HDInsight cluster.</span></span> <span data-ttu-id="1c737-213">Por exemplo, abaixo da captura de tela hello, você fornecer acesso apenas muito**hdiaddonstorage** pasta em uma conta do repositório Data Lake.</span><span class="sxs-lookup"><span data-stu-id="1c737-213">For example, in hello screenshot below, you provide access only too**hdiaddonstorage** folder in a Data Lake Store account.</span></span>

<span data-ttu-id="1c737-214">![Atribuir o cluster HDInsight do serviço principal permissões toohello](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.3-1.png "cluster de HDInsight atribuir serviço principal permissões toohello")</span><span class="sxs-lookup"><span data-stu-id="1c737-214">![Assign service principal permissions toohello HDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.3-1.png "Assign service principal permissions toohello HDInsight cluster")</span></span>


## <a name="verify-cluster-set-up"></a><span data-ttu-id="1c737-215">Verificar a configuração do cluster</span><span class="sxs-lookup"><span data-stu-id="1c737-215">Verify cluster set up</span></span>

<span data-ttu-id="1c737-216">Após a conclusão da instalação do cluster Olá, na folha de cluster Olá, verifique os resultados, fazendo uma ou ambas Olá etapas a seguir:</span><span class="sxs-lookup"><span data-stu-id="1c737-216">After hello cluster setup is complete, on hello cluster blade, verify your results by doing either or both of hello following steps:</span></span>

* <span data-ttu-id="1c737-217">tooverify Olá armazenamento associado para cluster Olá é a conta do repositório Data Lake Olá que você especificou, clique em **contas de armazenamento** no painel esquerdo da saudação.</span><span class="sxs-lookup"><span data-stu-id="1c737-217">tooverify that hello associated storage for hello cluster is hello Data Lake Store account that you specified, click **Storage accounts** in hello left pane.</span></span>

    <span data-ttu-id="1c737-218">![Cluster de tooHDInsight principal de serviço Add](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.6-1.png "adicionar cluster de tooHDInsight principal de serviço")</span><span class="sxs-lookup"><span data-stu-id="1c737-218">![Add service principal tooHDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.6-1.png "Add service principal tooHDInsight cluster")</span></span>

* <span data-ttu-id="1c737-219">tooverify que Olá entidade de serviço está corretamente associado ao cluster do HDInsight hello, clique em **acesso de repositório Data Lake** no painel esquerdo da saudação.</span><span class="sxs-lookup"><span data-stu-id="1c737-219">tooverify that hello service principal is correctly associated with hello HDInsight cluster, click **Data Lake Store access** in hello left pane.</span></span>

    <span data-ttu-id="1c737-220">![Cluster de tooHDInsight principal de serviço Add](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.6.png "adicionar cluster de tooHDInsight principal de serviço")</span><span class="sxs-lookup"><span data-stu-id="1c737-220">![Add service principal tooHDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.6.png "Add service principal tooHDInsight cluster")</span></span>


## <a name="examples"></a><span data-ttu-id="1c737-221">Exemplos</span><span class="sxs-lookup"><span data-stu-id="1c737-221">Examples</span></span>

<span data-ttu-id="1c737-222">Depois que você configurou o cluster Olá com repositório Data Lake como seu armazenamento, consulte exemplos toothese como toouse HDInsight cluster dados saudação tooanalyze que são armazenados no repositório Data Lake.</span><span class="sxs-lookup"><span data-stu-id="1c737-222">After you have set up hello cluster with Data Lake Store as your storage, refer toothese examples of how toouse HDInsight cluster tooanalyze hello data that's stored in Data Lake Store.</span></span>

### <a name="run-a-hive-query-against-data-in-a-data-lake-store-as-primary-storage"></a><span data-ttu-id="1c737-223">Executar uma consulta do Hive nos dados de um Data Lake Store (como armazenamento primário)</span><span class="sxs-lookup"><span data-stu-id="1c737-223">Run a Hive query against data in a Data Lake Store (as primary storage)</span></span>

<span data-ttu-id="1c737-224">toorun uma consulta de Hive, use a interface de modos de exibição de Hive de Olá no portal do Ambari hello.</span><span class="sxs-lookup"><span data-stu-id="1c737-224">toorun a Hive query, use hello Hive views interface in hello Ambari portal.</span></span> <span data-ttu-id="1c737-225">Para obter instruções sobre como toouse Ambari Hive exibições, consulte [Olá Use exibição de Hive com Hadoop no HDInsight](../hdinsight/hdinsight-hadoop-use-hive-ambari-view.md).</span><span class="sxs-lookup"><span data-stu-id="1c737-225">For instructions on how toouse Ambari Hive views, see [Use hello Hive View with Hadoop in HDInsight](../hdinsight/hdinsight-hadoop-use-hive-ambari-view.md).</span></span>

<span data-ttu-id="1c737-226">Quando você trabalha com dados em um repositório Data Lake, há alguns toochange de cadeias de caracteres.</span><span class="sxs-lookup"><span data-stu-id="1c737-226">When you work with data in a Data Lake Store, there are a few strings toochange.</span></span>

<span data-ttu-id="1c737-227">Se você usar, por exemplo, Olá cluster que você criou com o repositório Data Lake como armazenamento primário, dados de toohello saudação caminho serão: *publicitário: / / < data_lake_store_account_name > /azuredatalakestore.net/path/to/file*.</span><span class="sxs-lookup"><span data-stu-id="1c737-227">If you use, for example, hello cluster that you created with Data Lake Store as primary storage, hello path toohello data is: *adl://<data_lake_store_account_name>/azuredatalakestore.net/path/to/file*.</span></span> <span data-ttu-id="1c737-228">Um toocreate de consulta de Hive uma tabela de dados de exemplo que são armazenados na conta do repositório Data Lake do hello aparência Olá instrução a seguir:</span><span class="sxs-lookup"><span data-stu-id="1c737-228">A Hive query toocreate a table from sample data that's stored in hello Data Lake Store account looks like hello following statement:</span></span>

    CREATE EXTERNAL TABLE websitelog (str string) LOCATION 'adl://hdiadlsstorage.azuredatalakestore.net/clusters/myhdiadlcluster/HdiSamples/HdiSamples/WebsiteLogSampleData/SampleLog/'

<span data-ttu-id="1c737-229">Descrições:</span><span class="sxs-lookup"><span data-stu-id="1c737-229">Descriptions:</span></span>
* <span data-ttu-id="1c737-230">`adl://hdiadlstorage.azuredatalakestore.net/`é a raiz de saudação da saudação conta do repositório Data Lake.</span><span class="sxs-lookup"><span data-stu-id="1c737-230">`adl://hdiadlstorage.azuredatalakestore.net/` is hello root of hello Data Lake Store account.</span></span>
* <span data-ttu-id="1c737-231">`/clusters/myhdiadlcluster`é a raiz de saudação de dados de cluster Olá que você especificou ao criar o cluster de saudação.</span><span class="sxs-lookup"><span data-stu-id="1c737-231">`/clusters/myhdiadlcluster` is hello root of hello cluster data that you specified while creating hello cluster.</span></span>
* <span data-ttu-id="1c737-232">`/HdiSamples/HdiSamples/WebsiteLogSampleData/SampleLog/`é o local de saudação do arquivo de exemplo hello usado na consulta de saudação.</span><span class="sxs-lookup"><span data-stu-id="1c737-232">`/HdiSamples/HdiSamples/WebsiteLogSampleData/SampleLog/` is hello location of hello sample file that you used in hello query.</span></span>

### <a name="run-a-hive-query-against-data-in-a-data-lake-store-as-additional-storage"></a><span data-ttu-id="1c737-233">Executar uma consulta do Hive nos dados de um Data Lake Store (como armazenamento adicional)</span><span class="sxs-lookup"><span data-stu-id="1c737-233">Run a Hive query against data in a Data Lake Store (as additional storage)</span></span>

<span data-ttu-id="1c737-234">Se o cluster Olá que você criou usa o armazenamento de Blob como armazenamento padrão, os dados de exemplo hello não está no hello conta do repositório Azure Data Lake que é usada como armazenamento adicional.</span><span class="sxs-lookup"><span data-stu-id="1c737-234">If hello cluster that you created uses Blob storage as default storage, hello sample data is not contained in hello Azure Data Lake Store account that's used as additional storage.</span></span> <span data-ttu-id="1c737-235">Nesse caso, primeiro transferir dados de saudação do armazenamento de Blob toohello repositório Data Lake e, em seguida, execute consultas hello, conforme mostrado no hello anterior de exemplo.</span><span class="sxs-lookup"><span data-stu-id="1c737-235">In such a case, first transfer hello data from Blob storage toohello Data Lake Store, and then run hello queries as shown in hello preceding example.</span></span>

<span data-ttu-id="1c737-236">Para obter informações sobre como toocopy do armazenamento de Blob tooa Data Lake do repositório de dados, consulte Olá artigos a seguir:</span><span class="sxs-lookup"><span data-stu-id="1c737-236">For information on how toocopy data from Blob storage tooa Data Lake Store, see hello following articles:</span></span>

* [<span data-ttu-id="1c737-237">Usar dados de toocopy Distcp entre blobs de armazenamento do Azure e o repositório Data Lake</span><span class="sxs-lookup"><span data-stu-id="1c737-237">Use Distcp toocopy data between Azure Storage blobs and Data Lake Store</span></span>](data-lake-store-copy-data-wasb-distcp.md)
* [<span data-ttu-id="1c737-238">Usar AdlCopy toocopy dados de armazenamento do Azure tooData Lake armazenamento de blobs</span><span class="sxs-lookup"><span data-stu-id="1c737-238">Use AdlCopy toocopy data from Azure Storage blobs tooData Lake Store</span></span>](data-lake-store-copy-data-azure-storage-blob.md)

### <a name="use-data-lake-store-with-a-spark-cluster"></a><span data-ttu-id="1c737-239">Usar o Data Lake Store com o cluster Spark</span><span class="sxs-lookup"><span data-stu-id="1c737-239">Use Data Lake Store with a Spark cluster</span></span>
<span data-ttu-id="1c737-240">Você pode usar um trabalhos do Spark cluster toorun Spark nos dados armazenados em um repositório Data Lake.</span><span class="sxs-lookup"><span data-stu-id="1c737-240">You can use a Spark cluster toorun Spark jobs on data that is stored in a Data Lake Store.</span></span> <span data-ttu-id="1c737-241">Para obter mais informações, consulte [dados de tooanalyze cluster Use HDInsight Spark no repositório Data Lake](../hdinsight/hdinsight-apache-spark-use-with-data-lake-store.md).</span><span class="sxs-lookup"><span data-stu-id="1c737-241">For more information, see [Use HDInsight Spark cluster tooanalyze data in Data Lake Store](../hdinsight/hdinsight-apache-spark-use-with-data-lake-store.md).</span></span>


### <a name="use-data-lake-store-in-a-storm-topology"></a><span data-ttu-id="1c737-242">Usar o Repositório Data Lake em uma topologia do Storm</span><span class="sxs-lookup"><span data-stu-id="1c737-242">Use Data Lake Store in a Storm topology</span></span>
<span data-ttu-id="1c737-243">Você pode usar dados de toowrite do repositório Data Lake saudação de uma topologia Storm.</span><span class="sxs-lookup"><span data-stu-id="1c737-243">You can use hello Data Lake Store toowrite data from a Storm topology.</span></span> <span data-ttu-id="1c737-244">Para obter instruções sobre como tooachieve neste cenário, consulte [repositório Azure Data Lake Use com Apache Storm com HDInsight](../hdinsight/hdinsight-storm-write-data-lake-store.md).</span><span class="sxs-lookup"><span data-stu-id="1c737-244">For instructions on how tooachieve this scenario, see [Use Azure Data Lake Store with Apache Storm with HDInsight](../hdinsight/hdinsight-storm-write-data-lake-store.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="1c737-245">Consulte também</span><span class="sxs-lookup"><span data-stu-id="1c737-245">See also</span></span>
* [<span data-ttu-id="1c737-246">PowerShell: Criar um cluster de HDInsight toouse repositório Data Lake</span><span class="sxs-lookup"><span data-stu-id="1c737-246">PowerShell: Create an HDInsight cluster toouse Data Lake Store</span></span>](data-lake-store-hdinsight-hadoop-use-powershell.md)

[makecert]: https://msdn.microsoft.com/library/windows/desktop/ff548309(v=vs.85).aspx
[pvk2pfx]: https://msdn.microsoft.com/library/windows/desktop/ff550672(v=vs.85).aspx
