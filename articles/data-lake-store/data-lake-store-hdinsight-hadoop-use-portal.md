---
title: Usar o portal do Azure para criar clusters Azure HDInsight com o Data Lake Store | Microsoft Docs
description: Usar o portal do Azure para criar e usar clusters HDInsight com o Azure Data Lake Store
services: data-lake-store,hdinsight
documentationcenter: 
author: nitinme
manager: jhubbard
editor: cgronlun
ms.assetid: a8c45a83-a8e3-4227-8b02-1bc1e1de6767
ms.service: data-lake-store
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 08/14/2017
ms.author: nitinme
ms.openlocfilehash: 9dd56efb89e07ea61ae431d1ea2accd721cd6502
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/18/2017
---
# <a name="create-hdinsight-clusters-with-data-lake-store-by-using-the-azure-portal"></a><span data-ttu-id="57d35-103">Criar clusters HDInsight com o Data Lake Store usando o portal do Azure</span><span class="sxs-lookup"><span data-stu-id="57d35-103">Create HDInsight clusters with Data Lake Store by using the Azure portal</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="57d35-104">Usar o Portal do Azure</span><span class="sxs-lookup"><span data-stu-id="57d35-104">Use the Azure portal</span></span>](data-lake-store-hdinsight-hadoop-use-portal.md)
> * [<span data-ttu-id="57d35-105">Usar o PowerShell (para armazenamento padrão)</span><span class="sxs-lookup"><span data-stu-id="57d35-105">Use PowerShell (for default storage)</span></span>](data-lake-store-hdinsight-hadoop-use-powershell-for-default-storage.md)
> * [<span data-ttu-id="57d35-106">Usar o PowerShell (para armazenamento adicional)</span><span class="sxs-lookup"><span data-stu-id="57d35-106">Use PowerShell (for additional storage)</span></span>](data-lake-store-hdinsight-hadoop-use-powershell.md)
> * [<span data-ttu-id="57d35-107">Usar o Resource Manager</span><span class="sxs-lookup"><span data-stu-id="57d35-107">Use Resource Manager</span></span>](data-lake-store-hdinsight-hadoop-use-resource-manager-template.md)
>
>

<span data-ttu-id="57d35-108">Saiba como usar o portal do Azure para criar um cluster HDInsight com uma conta do Azure Data Lake Store como o armazenamento padrão ou um armazenamento adicional.</span><span class="sxs-lookup"><span data-stu-id="57d35-108">Learn how to use the Azure portal to create a HDInsight cluster with an Azure Data Lake Store account as the default storage or an additional storage.</span></span> <span data-ttu-id="57d35-109">Embora armazenamento adicional seja opcional para um cluster HDInsight, é recomendável armazenar seus dados comerciais em contas de armazenamento adicionais.</span><span class="sxs-lookup"><span data-stu-id="57d35-109">Even though additional storage is optional for a HDInsight cluster, it is recommended to store your business data in the additional storage accounts.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="57d35-110">Pré-requisitos</span><span class="sxs-lookup"><span data-stu-id="57d35-110">Prerequisites</span></span>
<span data-ttu-id="57d35-111">Antes de começar este tutorial, verifique se você atendeu aos seguintes requisitos:</span><span class="sxs-lookup"><span data-stu-id="57d35-111">Before you begin this tutorial, ensure that you've met the following requirements:</span></span>

* <span data-ttu-id="57d35-112">**Uma assinatura do Azure**.</span><span class="sxs-lookup"><span data-stu-id="57d35-112">**An Azure subscription**.</span></span> <span data-ttu-id="57d35-113">Acesse [Obter uma avaliação gratuita do Azure](https://azure.microsoft.com/pricing/free-trial/).</span><span class="sxs-lookup"><span data-stu-id="57d35-113">Go to [Get Azure free trial](https://azure.microsoft.com/pricing/free-trial/).</span></span>
* <span data-ttu-id="57d35-114">**Uma conta do repositório Azure Data Lake**.</span><span class="sxs-lookup"><span data-stu-id="57d35-114">**An Azure Data Lake Store account**.</span></span> <span data-ttu-id="57d35-115">Siga as instruções em [Introdução ao Azure Data Lake Store usando o portal do Azure](data-lake-store-get-started-portal.md).</span><span class="sxs-lookup"><span data-stu-id="57d35-115">Follow the instructions from [Get started with Azure Data Lake Store by using the Azure portal](data-lake-store-get-started-portal.md).</span></span> <span data-ttu-id="57d35-116">Você também deve criar uma pasta raiz na conta.</span><span class="sxs-lookup"><span data-stu-id="57d35-116">You must also create a root folder on the account.</span></span>  <span data-ttu-id="57d35-117">Neste tutorial, uma pasta raiz chamada __/clusters__ é usada.</span><span class="sxs-lookup"><span data-stu-id="57d35-117">In this tutorial, a root folder called __/clusters__ is used.</span></span>
* <span data-ttu-id="57d35-118">**Uma entidade de serviço do Azure Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="57d35-118">**An Azure Active Directory service principal**.</span></span> <span data-ttu-id="57d35-119">Este tutorial fornece instruções sobre como criar uma entidade de serviço no Azure AD (Azure Active Directory).</span><span class="sxs-lookup"><span data-stu-id="57d35-119">This tutorial provides instructions on how to create a service principal in Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="57d35-120">No entanto, para criar uma entidade de serviço, você deve ser um administrador do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="57d35-120">However, to create a service principal, you must be an Azure AD administrator.</span></span> <span data-ttu-id="57d35-121">Se você for um administrador, ignore esse pré-requisito e continue com o tutorial.</span><span class="sxs-lookup"><span data-stu-id="57d35-121">If you are an administrator, you can skip this prerequisite and proceed with the tutorial.</span></span>

    >[!NOTE]
    ><span data-ttu-id="57d35-122">Você poderá criar uma entidade de serviço somente se for um administrador do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="57d35-122">You can create a service principal only if you are an Azure AD administrator.</span></span> <span data-ttu-id="57d35-123">O administrador do Azure AD deverá criar uma entidade de serviço antes que você possa criar um cluster HDInsight com o Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="57d35-123">Your Azure AD administrator must create a service principal before you can create an HDInsight cluster with Data Lake Store.</span></span> <span data-ttu-id="57d35-124">Além disso, a entidade de serviço deve ser criada com um certificado, conforme descrito em [Criar uma entidade de serviço com certificado](../azure-resource-manager/resource-group-authenticate-service-principal.md#create-service-principal-with-self-signed-certificate).</span><span class="sxs-lookup"><span data-stu-id="57d35-124">Also, the service principal must be created with a certificate, as described at [Create a service principal with certificate](../azure-resource-manager/resource-group-authenticate-service-principal.md#create-service-principal-with-self-signed-certificate).</span></span>
    >

## <a name="create-an-hdinsight-cluster"></a><span data-ttu-id="57d35-125">Crie um cluster HDInsight</span><span class="sxs-lookup"><span data-stu-id="57d35-125">Create an HDInsight cluster</span></span>

<span data-ttu-id="57d35-126">Nesta seção, você cria um cluster HDInsight com contas do Data Lake Store como o padrão ou o armazenamento adicional.</span><span class="sxs-lookup"><span data-stu-id="57d35-126">In this section, you create a HDInsight cluster with Data Lake Store accounts as the default or the additional storage.</span></span> <span data-ttu-id="57d35-127">Este artigo concentra-se somente a parte da configuração de contas do Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="57d35-127">This article only focuses the part of configuring Data Lake Store accounts.</span></span>  <span data-ttu-id="57d35-128">Para obter informações gerais sobre a criação do cluster, consulte [Criar clusters do Hadoop no HDInsight](../hdinsight/hdinsight-hadoop-provision-linux-clusters.md).</span><span class="sxs-lookup"><span data-stu-id="57d35-128">For the general cluster creation information and procedures, see [Create Hadoop clusters in HDInsight](../hdinsight/hdinsight-hadoop-provision-linux-clusters.md).</span></span>

### <a name="create-a-cluster-with-data-lake-store-as-default-storage"></a><span data-ttu-id="57d35-129">Criar um cluster com o Data Lake Store como armazenamento padrão</span><span class="sxs-lookup"><span data-stu-id="57d35-129">Create a cluster with Data Lake Store as default storage</span></span>

<span data-ttu-id="57d35-130">**Para criar um cluster HDInsight com um Data Lake Store como a conta de armazenamento padrão**</span><span class="sxs-lookup"><span data-stu-id="57d35-130">**To create a HDInsight cluster with a Data Lake Store as the default storage account**</span></span>

1. <span data-ttu-id="57d35-131">Entre no [Portal do Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="57d35-131">Sign in to the [Azure portal](https://portal.azure.com).</span></span>
2. <span data-ttu-id="57d35-132">Siga [Criar clusters](../hdinsight/hdinsight-hadoop-create-linux-clusters-portal.md#create-clusters) para obter as informações gerais sobre a criação de clusters do HDInsight.</span><span class="sxs-lookup"><span data-stu-id="57d35-132">Follow [Create clusters](../hdinsight/hdinsight-hadoop-create-linux-clusters-portal.md#create-clusters) for the general information on creating HDInsight clusters.</span></span>
3. <span data-ttu-id="57d35-133">Na folha **Armazenamento**, em **Tipo de armazenamento primário**, selecione **Data Lake Store** e, em seguida, insira as seguintes informações:</span><span class="sxs-lookup"><span data-stu-id="57d35-133">On the **Storage** blade, under **Primary storage type**, select **Data Lake Store**, and then enter the following information:</span></span>

    <span data-ttu-id="57d35-134">![Adicionar entidade de serviço ao cluster do HDInsight](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.1.adls.storage.png "Adicionar entidade de serviço ao cluster do HDInsight")</span><span class="sxs-lookup"><span data-stu-id="57d35-134">![Add service principal to HDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.1.adls.storage.png "Add service principal to HDInsight cluster")</span></span>

    - <span data-ttu-id="57d35-135">**Selecionar conta do Data Lake Store**: selecione uma conta existente do Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="57d35-135">**Select Data Lake Store account**: Select an existing Data Lake Store account.</span></span> <span data-ttu-id="57d35-136">Uma conta existente do Data Lake Store é necessária.</span><span class="sxs-lookup"><span data-stu-id="57d35-136">An existing Data Lake Store account is required.</span></span>  <span data-ttu-id="57d35-137">Consulte [Pré-requisitos](#prereuisites).</span><span class="sxs-lookup"><span data-stu-id="57d35-137">See [Prerequisites](#prereuisites).</span></span>
    - <span data-ttu-id="57d35-138">**Caminho raiz**: insira um caminho em que os arquivos específicos de cluster deverão ser armazenados.</span><span class="sxs-lookup"><span data-stu-id="57d35-138">**Root path**: Enter a path where the cluster-specific files are to be stored.</span></span> <span data-ttu-id="57d35-139">Na captura de tela, é __/clusters/myhdiadlcluster/__, em que a pasta __/clusters__ deve existir e o Portal cria a pasta *myhdicluster*.</span><span class="sxs-lookup"><span data-stu-id="57d35-139">On the screenshot, it is __/clusters/myhdiadlcluster/__, in which the __/clusters__ folder must exist, and the Portal creates *myhdicluster* folder.</span></span>  <span data-ttu-id="57d35-140">O *myhdicluster* é o nome do cluster.</span><span class="sxs-lookup"><span data-stu-id="57d35-140">The *myhdicluster* is the cluster name.</span></span>
    - <span data-ttu-id="57d35-141">**Acesso ao Data Lake Store**: configure o acesso entre a conta do Data Lake Store e o cluster HDInsight.</span><span class="sxs-lookup"><span data-stu-id="57d35-141">**Data Lake Store access**: Configure access between the Data Lake Store account and HDInsight cluster.</span></span> <span data-ttu-id="57d35-142">Para obter instruções, consulte [Configurar acesso ao Data Lake Store](#configure-data-lake-store-access).</span><span class="sxs-lookup"><span data-stu-id="57d35-142">For instructions, see [Configure Data Lake Store access](#configure-data-lake-store-access).</span></span>
    - <span data-ttu-id="57d35-143">**Contas de armazenamento adicionais**: adicione Contas de Armazenamento do Azure como contas de armazenamento adicionais para o cluster.</span><span class="sxs-lookup"><span data-stu-id="57d35-143">**Additional storage accounts**: Add Azure Storage Accounts as additional storage accounts for the cluster.</span></span> <span data-ttu-id="57d35-144">Para adicionar mais Data Lake Stores, dê ao cluster permissões sobre os dados em mais contas do Data Lake Store enquanto configura uma conta do Data Lake Store como o tipo de armazenamento principal.</span><span class="sxs-lookup"><span data-stu-id="57d35-144">To add additional Data Lake Stores is done by giving the cluster permissions on data in more Data Lake Store accounts while configuring a Data Lake Store account as the primary storage type.</span></span> <span data-ttu-id="57d35-145">Consulte [Configurar acesso ao Data Lake Store](#configure-data-lake-store-access).</span><span class="sxs-lookup"><span data-stu-id="57d35-145">See [Configure Data Lake Store access](#configure-data-lake-store-access).</span></span>

4. <span data-ttu-id="57d35-146">Em **Acesso ao Data Lake Store**, clique em **Selecionar** e continue com a criação do cluster, conforme descrito em [Criar clusters Hadoop no HDInsight](../hdinsight/hdinsight-hadoop-create-linux-clusters-portal.md).</span><span class="sxs-lookup"><span data-stu-id="57d35-146">On the **Data Lake Store access**, click **Select**, and then continue with cluster creation as described in [Create Hadoop clusters in HDInsight](../hdinsight/hdinsight-hadoop-create-linux-clusters-portal.md).</span></span>


### <a name="create-a-cluster-with-data-lake-store-as-additional-storage"></a><span data-ttu-id="57d35-147">Criar um cluster com o Data Lake Store como armazenamento adicional</span><span class="sxs-lookup"><span data-stu-id="57d35-147">Create a cluster with Data Lake Store as additional storage</span></span>

<span data-ttu-id="57d35-148">As instruções a seguir criam um cluster HDInsight com uma conta de Armazenamento do Azure como o armazenamento padrão e uma conta do Data Lake Store como um armazenamento adicional.</span><span class="sxs-lookup"><span data-stu-id="57d35-148">The following instructions create a HDInsight cluster with an Azure Storage account as the default storage, and a Data Lake Store account as an additional storage.</span></span>
<span data-ttu-id="57d35-149">**Para criar um cluster HDInsight com um Data Lake Store como a conta de armazenamento padrão**</span><span class="sxs-lookup"><span data-stu-id="57d35-149">**To create a HDInsight cluster with a Data Lake Store as the default storage account**</span></span>

1. <span data-ttu-id="57d35-150">Entre no [Portal do Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="57d35-150">Sign in to the [Azure portal](https://portal.azure.com).</span></span>
2. <span data-ttu-id="57d35-151">Siga [Criar clusters](../hdinsight/hdinsight-hadoop-create-linux-clusters-portal.md#create-clusters) para obter as informações gerais sobre a criação de clusters do HDInsight.</span><span class="sxs-lookup"><span data-stu-id="57d35-151">Follow [Create clusters](../hdinsight/hdinsight-hadoop-create-linux-clusters-portal.md#create-clusters) for the general information on creating HDInsight clusters.</span></span>
3. <span data-ttu-id="57d35-152">Na folha **Armazenamento**, em **Tipo de armazenamento primário**, selecione **Armazenamento do Azure** e, em seguida, insira as seguintes informações:</span><span class="sxs-lookup"><span data-stu-id="57d35-152">On the **Storage** blade, under **Primary storage type**, select **Azure Storage**, and then enter the following information:</span></span>

    <span data-ttu-id="57d35-153">![Adicionar entidade de serviço ao cluster do HDInsight](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.1.png "Adicionar entidade de serviço ao cluster do HDInsight")</span><span class="sxs-lookup"><span data-stu-id="57d35-153">![Add service principal to HDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.1.png "Add service principal to HDInsight cluster")</span></span>

    - <span data-ttu-id="57d35-154">**Método de seleção**: use uma das seguintes opções:</span><span class="sxs-lookup"><span data-stu-id="57d35-154">**Selection method**: use one of the following options:</span></span>

        * <span data-ttu-id="57d35-155">Para especificar uma conta de armazenamento que faz parte de sua assinatura do Azure, selecione **Minhas assinaturas** e, em seguida, selecione a conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="57d35-155">To specify a storage account that is part of your Azure subscription, select **My subscriptions**, and then select the storage account.</span></span>
        * <span data-ttu-id="57d35-156">Para especificar uma conta de armazenamento que está fora de sua assinatura do Azure, selecione **Chave de acesso** e, em seguida, forneça as informações da conta de armazenamento externa.</span><span class="sxs-lookup"><span data-stu-id="57d35-156">To specify a storage account that is outside your Azure subscription, select **Access key**, and then provide the information for the outside storage account.</span></span>

    - <span data-ttu-id="57d35-157">**Contêiner padrão**: use o valor padrão ou especifique seu próprio nome.</span><span class="sxs-lookup"><span data-stu-id="57d35-157">**Default container**: use either the default value or specify your own name.</span></span>

    - <span data-ttu-id="57d35-158">Contas de Armazenamento adicionais: adicione mais contas de Armazenamento do Azure como armazenamento adicional.</span><span class="sxs-lookup"><span data-stu-id="57d35-158">Additional Storage accounts: add more Azure Storage accounts as the additional storage.</span></span>
    - <span data-ttu-id="57d35-159">Acesso ao Data Lake Store: configure o acesso entre a conta do Data Lake Store e o cluster HDInsight.</span><span class="sxs-lookup"><span data-stu-id="57d35-159">Data Lake Store access: configure access between the Data Lake Store account and HDInsight cluster.</span></span> <span data-ttu-id="57d35-160">Para obter instruções, consulte [Configurar acesso ao Data Lake Store](#configure-data-lake-store-access).</span><span class="sxs-lookup"><span data-stu-id="57d35-160">For instructions see [Configure Data Lake Store access](#configure-data-lake-store-access).</span></span>

## <a name="configure-data-lake-store-access"></a><span data-ttu-id="57d35-161">Configurar acesso ao Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="57d35-161">Configure Data Lake Store access</span></span> 

<span data-ttu-id="57d35-162">Nesta seção, você configura o acesso ao Data Lake Store de clusters do HDInsight usando uma entidade de serviço do Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="57d35-162">In this section, you configure Data Lake Store access from HDInsight clusters using an Azure Active Directory service principal.</span></span> 

### <a name="specify-a-service-principal"></a><span data-ttu-id="57d35-163">Especificar uma entidade de serviço</span><span class="sxs-lookup"><span data-stu-id="57d35-163">Specify a service principal</span></span>

<span data-ttu-id="57d35-164">No portal do Azure, você pode usar uma entidade de serviço existente ou criar uma nova.</span><span class="sxs-lookup"><span data-stu-id="57d35-164">From the Azure portal, you can either use an existing service principal or create a new one.</span></span>

<span data-ttu-id="57d35-165">**Para criar uma entidade de serviço do portal do Azure**</span><span class="sxs-lookup"><span data-stu-id="57d35-165">**To create a service principal from the Azure portal**</span></span>

1. <span data-ttu-id="57d35-166">Clique em **Acesso ao Data Lake Store** na folha Repositório.</span><span class="sxs-lookup"><span data-stu-id="57d35-166">Click **Data Lake Store access** from the Store blade.</span></span>
2. <span data-ttu-id="57d35-167">Na folha **Acesso ao Data Lake Store**, clique em **Criar novo**.</span><span class="sxs-lookup"><span data-stu-id="57d35-167">On the **Data Lake Store access** blade, click **Create new**.</span></span>
3. <span data-ttu-id="57d35-168">Clique em **Entidade de Serviço** e siga as instruções para criar uma entidade de serviço.</span><span class="sxs-lookup"><span data-stu-id="57d35-168">Click **Service Principal**, and then follow the instructions to create a service principal.</span></span>
4. <span data-ttu-id="57d35-169">Baixe o certificado se você optar por usá-lo novamente no futuro.</span><span class="sxs-lookup"><span data-stu-id="57d35-169">Download the certificate if you decide to use it again in the future.</span></span> <span data-ttu-id="57d35-170">É útil baixar o certificado se você desejar usar a mesma entidade de serviço ao criar clusters HDInsight adicionais.</span><span class="sxs-lookup"><span data-stu-id="57d35-170">Downloading the certificate is useful if you want to use the same service principal when you create additional HDInsight clusters.</span></span>

    <span data-ttu-id="57d35-171">![Adicionar entidade de serviço ao cluster do HDInsight](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.2.png "Adicionar entidade de serviço ao cluster do HDInsight")</span><span class="sxs-lookup"><span data-stu-id="57d35-171">![Add service principal to HDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.2.png "Add service principal to HDInsight cluster")</span></span>

4. <span data-ttu-id="57d35-172">Clique em **Acessar** para configurar o acesso à pasta.</span><span class="sxs-lookup"><span data-stu-id="57d35-172">Click **Access** to configure the folder access.</span></span>  <span data-ttu-id="57d35-173">Consulte [Configurar permissões de arquivo](#configure-file-permissions).</span><span class="sxs-lookup"><span data-stu-id="57d35-173">See [Configure file permissions](#configure-file-permissions).</span></span>


<span data-ttu-id="57d35-174">**Para usar uma entidade de serviço existente do portal do Azure**</span><span class="sxs-lookup"><span data-stu-id="57d35-174">**To use an existing service principal from the Azure portal**</span></span>

1. <span data-ttu-id="57d35-175">Clique em **Acesso ao Data Lake Store**.</span><span class="sxs-lookup"><span data-stu-id="57d35-175">Click **Data Lake Store access**.</span></span>
1. <span data-ttu-id="57d35-176">Na folha **Acesso ao Data Lake Store**, clique em **Usar existente**.</span><span class="sxs-lookup"><span data-stu-id="57d35-176">On the **Data Lake Store access** blade, click **Use existing**.</span></span>
2. <span data-ttu-id="57d35-177">Clique em **Entidade de Serviço** e, em seguida, selecione uma entidade de serviço.</span><span class="sxs-lookup"><span data-stu-id="57d35-177">Click **Service Principal**, and then select a service principal.</span></span> 
3. <span data-ttu-id="57d35-178">Carregue o certificado (arquivo .pfx) associado à entidade de serviço selecionada e insira a senha do certificado.</span><span class="sxs-lookup"><span data-stu-id="57d35-178">Upload the certificate (.pfx file) that's associated with your selected service principal, and then enter the certificate password.</span></span>

    <span data-ttu-id="57d35-179">![Adicionar entidade de serviço ao cluster do HDInsight](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.5.png "Adicionar entidade de serviço ao cluster do HDInsight")</span><span class="sxs-lookup"><span data-stu-id="57d35-179">![Add service principal to HDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.5.png "Add service principal to HDInsight cluster")</span></span>

4. <span data-ttu-id="57d35-180">Clique em **Acessar** para configurar o acesso à pasta.</span><span class="sxs-lookup"><span data-stu-id="57d35-180">Click **Access** to configure the folder access.</span></span>  <span data-ttu-id="57d35-181">Consulte [Configurar permissões de arquivo](#configure-file-permissions).</span><span class="sxs-lookup"><span data-stu-id="57d35-181">See [Configure file permissions](#configure-file-permissions).</span></span>


### <span data-ttu-id="57d35-182"><a name="configure-file-permissions"></a>Configurar permissões de arquivo</span><span class="sxs-lookup"><span data-stu-id="57d35-182"><a name="configure-file-permissions"></a>Configure file permissions</span></span>

<span data-ttu-id="57d35-183">As configurações são diferentes dependendo de se a conta é usada como o armazenamento padrão ou uma conta de armazenamento adicional:</span><span class="sxs-lookup"><span data-stu-id="57d35-183">The configures are different depending on whether the account is used as the default storage or an additional storage account:</span></span>

- <span data-ttu-id="57d35-184">Usado como o armazenamento padrão</span><span class="sxs-lookup"><span data-stu-id="57d35-184">Used as default storage</span></span>

    - <span data-ttu-id="57d35-185">permissão no nível raiz da conta do Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="57d35-185">permission at the root level of the Data Lake Store account</span></span>
    - <span data-ttu-id="57d35-186">permissão no nível raiz do armazenamento de cluster HDInsight.</span><span class="sxs-lookup"><span data-stu-id="57d35-186">permission at the root level of the HDInsight cluster storage.</span></span> <span data-ttu-id="57d35-187">Por exemplo, a pasta __/clusters__ usada anteriormente no tutorial.</span><span class="sxs-lookup"><span data-stu-id="57d35-187">For example, the __/clusters__ folder used earlier in the tutorial.</span></span>
- <span data-ttu-id="57d35-188">Usar como um armazenamento adicional</span><span class="sxs-lookup"><span data-stu-id="57d35-188">Use as an additional storage</span></span>

    - <span data-ttu-id="57d35-189">Permissões nas pastas em que você precisa de acesso ao arquivo.</span><span class="sxs-lookup"><span data-stu-id="57d35-189">Permission at the folders where you need file access.</span></span>

<span data-ttu-id="57d35-190">**Para atribuir a permissão no nível raiz da conta do Data Lake Store**</span><span class="sxs-lookup"><span data-stu-id="57d35-190">**To assign permission at the Data Lake Store account root level**</span></span>

1. <span data-ttu-id="57d35-191">Na folha **Acesso do Data Lake Store**, clique em **Acessar**.</span><span class="sxs-lookup"><span data-stu-id="57d35-191">On the **Data Lake Store access** blade, click **Access**.</span></span> <span data-ttu-id="57d35-192">A folha **Selecionar permissões de arquivo** é aberta.</span><span class="sxs-lookup"><span data-stu-id="57d35-192">The **Select file permissions** blade is opened.</span></span> <span data-ttu-id="57d35-193">Ela lista todas as contas do Data Lake Store na assinatura.</span><span class="sxs-lookup"><span data-stu-id="57d35-193">It lists all the Data Lake Store accounts in your subscription.</span></span>
2. <span data-ttu-id="57d35-194">Focalize o mouse (não clique) no nome da conta do Data Lake Store para tornar a caixa de seleção visível, então selecione-a.</span><span class="sxs-lookup"><span data-stu-id="57d35-194">Hover (do not click) the mouse over the name of the Data Lake Store account to make the check box visible, then select the check box.</span></span>

    <span data-ttu-id="57d35-195">![Adicionar entidade de serviço ao cluster do HDInsight](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.3.png "Adicionar entidade de serviço ao cluster do HDInsight")</span><span class="sxs-lookup"><span data-stu-id="57d35-195">![Add service principal to HDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.3.png "Add service principal to HDInsight cluster")</span></span>

  <span data-ttu-id="57d35-196">Por padrão, as opções __LER__, __GRAVAR__ E __EXECUTAR__ estão selecionadas.</span><span class="sxs-lookup"><span data-stu-id="57d35-196">By default, __READ__, __WRITE__, AND __EXECUTE__ are all selected.</span></span>

3. <span data-ttu-id="57d35-197">Clique em **Selecionar** na parte inferior da página.</span><span class="sxs-lookup"><span data-stu-id="57d35-197">Click **Select** on the bottom of the page.</span></span>
4. <span data-ttu-id="57d35-198">Clique em **Executar** para atribuir permissão.</span><span class="sxs-lookup"><span data-stu-id="57d35-198">Click **Run** to assign permission.</span></span>
5. <span data-ttu-id="57d35-199">Clique em **Concluído**.</span><span class="sxs-lookup"><span data-stu-id="57d35-199">Click **Done**.</span></span>

<span data-ttu-id="57d35-200">**Para atribuir a permissão no nível de raiz do cluster HDInsight**</span><span class="sxs-lookup"><span data-stu-id="57d35-200">**To assign permission at the HDInsight cluster root level**</span></span>

1. <span data-ttu-id="57d35-201">Na folha **Acesso do Data Lake Store**, clique em **Acessar**.</span><span class="sxs-lookup"><span data-stu-id="57d35-201">On the **Data Lake Store access** blade, click **Access**.</span></span> <span data-ttu-id="57d35-202">A folha **Selecionar permissões de arquivo** é aberta.</span><span class="sxs-lookup"><span data-stu-id="57d35-202">The **Select file permissions** blade is opened.</span></span> <span data-ttu-id="57d35-203">Ela lista todas as contas do Data Lake Store na assinatura.</span><span class="sxs-lookup"><span data-stu-id="57d35-203">It lists all the Data Lake Store accounts in your subscription.</span></span>
1. <span data-ttu-id="57d35-204">Na folha **Selecionar permissões de arquivo**, clique no nome do Data Lake Store para mostrar seu conteúdo.</span><span class="sxs-lookup"><span data-stu-id="57d35-204">From the **Select file permissions** blade, click the Data Lake Store name to show its content.</span></span>
2. <span data-ttu-id="57d35-205">Selecione a raiz de armazenamento de cluster HDInsight marcando a caixa de seleção à esquerda da pasta.</span><span class="sxs-lookup"><span data-stu-id="57d35-205">Select the HDInsight cluster storage root by selecting the checkbox on the left of the folder.</span></span> <span data-ttu-id="57d35-206">De acordo com a captura de tela anterior, a raiz de armazenamento de cluster é a pasta __/clusters__ especificada durante a seleção do Data Lake Store como armazenamento padrão.</span><span class="sxs-lookup"><span data-stu-id="57d35-206">According to the screenshot earlier, the cluster storage root is __/clusters__ folder that you specified while selecting the Data Lake Store as default storage.</span></span>
3. <span data-ttu-id="57d35-207">Defina as permissões na pasta.</span><span class="sxs-lookup"><span data-stu-id="57d35-207">Set the permissions on the folder.</span></span>  <span data-ttu-id="57d35-208">Por padrão, as opções ler, gravar e executar estão selecionadas.</span><span class="sxs-lookup"><span data-stu-id="57d35-208">By default, read, write, and execute are all selected.</span></span>
4. <span data-ttu-id="57d35-209">Clique em **Selecionar** na parte inferior da página.</span><span class="sxs-lookup"><span data-stu-id="57d35-209">Click **Select** on the bottom of the page.</span></span>
5. <span data-ttu-id="57d35-210">Clique em **Executar**.</span><span class="sxs-lookup"><span data-stu-id="57d35-210">Click **Run**.</span></span>
6. <span data-ttu-id="57d35-211">Clique em **Concluído**.</span><span class="sxs-lookup"><span data-stu-id="57d35-211">Click **Done**.</span></span>

<span data-ttu-id="57d35-212">Se você estiver usando o Data Lake Store como armazenamento adicional, deverá atribuir permissões somente para as pastas que você deseja acessar por meio do cluster HDInsight.</span><span class="sxs-lookup"><span data-stu-id="57d35-212">If you are using Data Lake Store as additional storage, you must assign permission only for the folders that you want to access from the HDInsight cluster.</span></span> <span data-ttu-id="57d35-213">Por exemplo, na captura de tela abaixo, você fornece acesso apenas à pasta **hdiaddonstorage** em uma conta do Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="57d35-213">For example, in the screenshot below, you provide access only to **hdiaddonstorage** folder in a Data Lake Store account.</span></span>

<span data-ttu-id="57d35-214">![Atribuir permissões da entidade de serviço ao cluster HDInsight](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.3-1.png "Atribuir permissões da entidade de serviço ao cluster HDInsight")</span><span class="sxs-lookup"><span data-stu-id="57d35-214">![Assign service principal permissions to the HDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.3-1.png "Assign service principal permissions to the HDInsight cluster")</span></span>


## <a name="verify-cluster-set-up"></a><span data-ttu-id="57d35-215">Verificar a configuração do cluster</span><span class="sxs-lookup"><span data-stu-id="57d35-215">Verify cluster set up</span></span>

<span data-ttu-id="57d35-216">Após a conclusão da configuração do cluster, na folha do cluster, verifique os resultados executando uma ou ambas as etapas a seguir:</span><span class="sxs-lookup"><span data-stu-id="57d35-216">After the cluster setup is complete, on the cluster blade, verify your results by doing either or both of the following steps:</span></span>

* <span data-ttu-id="57d35-217">Para verificar se o armazenamento associado do cluster é a conta do Data Lake Store especificada, clique em **Contas de armazenamento** no painel esquerdo.</span><span class="sxs-lookup"><span data-stu-id="57d35-217">To verify that the associated storage for the cluster is the Data Lake Store account that you specified, click **Storage accounts** in the left pane.</span></span>

    <span data-ttu-id="57d35-218">![Adicionar entidade de serviço ao cluster do HDInsight](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.6-1.png "Adicionar entidade de serviço ao cluster do HDInsight")</span><span class="sxs-lookup"><span data-stu-id="57d35-218">![Add service principal to HDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.6-1.png "Add service principal to HDInsight cluster")</span></span>

* <span data-ttu-id="57d35-219">Para verificar se a entidade de serviço está associada ao cluster HDInsight corretamente, clique em **Acesso ao Data Lake Store** no painel esquerdo.</span><span class="sxs-lookup"><span data-stu-id="57d35-219">To verify that the service principal is correctly associated with the HDInsight cluster, click **Data Lake Store access** in the left pane.</span></span>

    <span data-ttu-id="57d35-220">![Adicionar entidade de serviço ao cluster do HDInsight](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.6.png "Adicionar entidade de serviço ao cluster do HDInsight")</span><span class="sxs-lookup"><span data-stu-id="57d35-220">![Add service principal to HDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.6.png "Add service principal to HDInsight cluster")</span></span>


## <a name="examples"></a><span data-ttu-id="57d35-221">Exemplos</span><span class="sxs-lookup"><span data-stu-id="57d35-221">Examples</span></span>

<span data-ttu-id="57d35-222">Depois de configurar o cluster com o Data Lake Store como o armazenamento, consulte estes exemplos de como usar o cluster HDInsight para analisar os dados armazenados no Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="57d35-222">After you have set up the cluster with Data Lake Store as your storage, refer to these examples of how to use HDInsight cluster to analyze the data that's stored in Data Lake Store.</span></span>

### <a name="run-a-hive-query-against-data-in-a-data-lake-store-as-primary-storage"></a><span data-ttu-id="57d35-223">Executar uma consulta do Hive nos dados de um Data Lake Store (como armazenamento primário)</span><span class="sxs-lookup"><span data-stu-id="57d35-223">Run a Hive query against data in a Data Lake Store (as primary storage)</span></span>

<span data-ttu-id="57d35-224">Para executar uma consulta do Hive, use a interface de exibições do Hive no portal do Ambari.</span><span class="sxs-lookup"><span data-stu-id="57d35-224">To run a Hive query, use the Hive views interface in the Ambari portal.</span></span> <span data-ttu-id="57d35-225">Para obter instruções sobre como usar as exibições do Hive no Ambari, consulte [Usar a exibição do Hive com o Hadoop no HDInsight](../hdinsight/hdinsight-hadoop-use-hive-ambari-view.md).</span><span class="sxs-lookup"><span data-stu-id="57d35-225">For instructions on how to use Ambari Hive views, see [Use the Hive View with Hadoop in HDInsight](../hdinsight/hdinsight-hadoop-use-hive-ambari-view.md).</span></span>

<span data-ttu-id="57d35-226">Ao trabalhar com os dados em um Data Lake Store, há algumas cadeias de caracteres a serem alteradas.</span><span class="sxs-lookup"><span data-stu-id="57d35-226">When you work with data in a Data Lake Store, there are a few strings to change.</span></span>

<span data-ttu-id="57d35-227">Se você usar, por exemplo, o cluster criado com o Data Lake Store como armazenamento primário, o caminho para os dados será: *adl://<data_lake_store_account_name>/azuredatalakestore.net/path/to/file*.</span><span class="sxs-lookup"><span data-stu-id="57d35-227">If you use, for example, the cluster that you created with Data Lake Store as primary storage, the path to the data is: *adl://<data_lake_store_account_name>/azuredatalakestore.net/path/to/file*.</span></span> <span data-ttu-id="57d35-228">Uma consulta do Hive para criar uma tabela com base em dados de exemplo armazenados na conta do Data Lake Store é parecida com a seguinte instrução:</span><span class="sxs-lookup"><span data-stu-id="57d35-228">A Hive query to create a table from sample data that's stored in the Data Lake Store account looks like the following statement:</span></span>

    CREATE EXTERNAL TABLE websitelog (str string) LOCATION 'adl://hdiadlsstorage.azuredatalakestore.net/clusters/myhdiadlcluster/HdiSamples/HdiSamples/WebsiteLogSampleData/SampleLog/'

<span data-ttu-id="57d35-229">Descrições:</span><span class="sxs-lookup"><span data-stu-id="57d35-229">Descriptions:</span></span>
* <span data-ttu-id="57d35-230">`adl://hdiadlstorage.azuredatalakestore.net/` é a raiz da conta do Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="57d35-230">`adl://hdiadlstorage.azuredatalakestore.net/` is the root of the Data Lake Store account.</span></span>
* <span data-ttu-id="57d35-231">`/clusters/myhdiadlcluster` é a raiz dos dados do cluster especificada durante a criação do cluster.</span><span class="sxs-lookup"><span data-stu-id="57d35-231">`/clusters/myhdiadlcluster` is the root of the cluster data that you specified while creating the cluster.</span></span>
* <span data-ttu-id="57d35-232">`/HdiSamples/HdiSamples/WebsiteLogSampleData/SampleLog/` é a localização do arquivo de exemplo usado na consulta.</span><span class="sxs-lookup"><span data-stu-id="57d35-232">`/HdiSamples/HdiSamples/WebsiteLogSampleData/SampleLog/` is the location of the sample file that you used in the query.</span></span>

### <a name="run-a-hive-query-against-data-in-a-data-lake-store-as-additional-storage"></a><span data-ttu-id="57d35-233">Executar uma consulta do Hive nos dados de um Data Lake Store (como armazenamento adicional)</span><span class="sxs-lookup"><span data-stu-id="57d35-233">Run a Hive query against data in a Data Lake Store (as additional storage)</span></span>

<span data-ttu-id="57d35-234">Se o cluster criado usar o armazenamento de Blobs como armazenamento padrão, os dados de exemplo não estarão contidos na conta do Azure Data Lake Store usada como armazenamento adicional.</span><span class="sxs-lookup"><span data-stu-id="57d35-234">If the cluster that you created uses Blob storage as default storage, the sample data is not contained in the Azure Data Lake Store account that's used as additional storage.</span></span> <span data-ttu-id="57d35-235">Nesse caso, primeiro transfira os dados do armazenamento de Blobs para o Data Lake Store e, em seguida, execute as consultas, conforme mostrado no exemplo anterior.</span><span class="sxs-lookup"><span data-stu-id="57d35-235">In such a case, first transfer the data from Blob storage to the Data Lake Store, and then run the queries as shown in the preceding example.</span></span>

<span data-ttu-id="57d35-236">Para obter informações sobre como copiar dados do armazenamento de Blobs para um Data Lake Store, consulte os seguintes artigos:</span><span class="sxs-lookup"><span data-stu-id="57d35-236">For information on how to copy data from Blob storage to a Data Lake Store, see the following articles:</span></span>

* [<span data-ttu-id="57d35-237">Usar o Distcp para copiar dados entre os Azure Storage blobs e o Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="57d35-237">Use Distcp to copy data between Azure Storage blobs and Data Lake Store</span></span>](data-lake-store-copy-data-wasb-distcp.md)
* [<span data-ttu-id="57d35-238">Usar o AdlCopy para copiar dados de Azure Storage blobs para o Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="57d35-238">Use AdlCopy to copy data from Azure Storage blobs to Data Lake Store</span></span>](data-lake-store-copy-data-azure-storage-blob.md)

### <a name="use-data-lake-store-with-a-spark-cluster"></a><span data-ttu-id="57d35-239">Usar o Data Lake Store com o cluster Spark</span><span class="sxs-lookup"><span data-stu-id="57d35-239">Use Data Lake Store with a Spark cluster</span></span>
<span data-ttu-id="57d35-240">É possível usar um cluster Spark para executar trabalhos do Spark nos dados armazenados em um Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="57d35-240">You can use a Spark cluster to run Spark jobs on data that is stored in a Data Lake Store.</span></span> <span data-ttu-id="57d35-241">Para obter mais informações, consulte [Usar um cluster Spark HDInsight para analisar dados no Data Lake Store](../hdinsight/hdinsight-apache-spark-use-with-data-lake-store.md).</span><span class="sxs-lookup"><span data-stu-id="57d35-241">For more information, see [Use HDInsight Spark cluster to analyze data in Data Lake Store](../hdinsight/hdinsight-apache-spark-use-with-data-lake-store.md).</span></span>


### <a name="use-data-lake-store-in-a-storm-topology"></a><span data-ttu-id="57d35-242">Usar o Repositório Data Lake em uma topologia do Storm</span><span class="sxs-lookup"><span data-stu-id="57d35-242">Use Data Lake Store in a Storm topology</span></span>
<span data-ttu-id="57d35-243">Você pode usar o Repositório Data Lake para gravar os dados de uma topologia do Storm.</span><span class="sxs-lookup"><span data-stu-id="57d35-243">You can use the Data Lake Store to write data from a Storm topology.</span></span> <span data-ttu-id="57d35-244">Para obter instruções sobre como reproduzir esse cenário, confira [Usar o Azure Data Lake Store com o Apache Storm com HDInsight](../hdinsight/hdinsight-storm-write-data-lake-store.md).</span><span class="sxs-lookup"><span data-stu-id="57d35-244">For instructions on how to achieve this scenario, see [Use Azure Data Lake Store with Apache Storm with HDInsight](../hdinsight/hdinsight-storm-write-data-lake-store.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="57d35-245">Confira também</span><span class="sxs-lookup"><span data-stu-id="57d35-245">See also</span></span>
* [<span data-ttu-id="57d35-246">PowerShell: Criar um cluster HDInsight para usar o Repositório Data Lake</span><span class="sxs-lookup"><span data-stu-id="57d35-246">PowerShell: Create an HDInsight cluster to use Data Lake Store</span></span>](data-lake-store-hdinsight-hadoop-use-powershell.md)

[makecert]: https://msdn.microsoft.com/library/windows/desktop/ff548309(v=vs.85).aspx
[pvk2pfx]: https://msdn.microsoft.com/library/windows/desktop/ff550672(v=vs.85).aspx
