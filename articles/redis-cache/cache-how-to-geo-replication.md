---
title: "Como configurar a replicação geográfica para o Cache Redis do Azure | Microsoft Docs"
description: "Saiba como replicar suas instâncias de Cache Redis do Azure entre regiões geográficas."
services: redis-cache
documentationcenter: 
author: steved0x
manager: douge
editor: 
ms.assetid: 375643dc-dbac-4bab-8004-d9ae9570440d
ms.service: cache
ms.workload: tbd
ms.tgt_pltfrm: cache-redis
ms.devlang: na
ms.topic: article
ms.date: 07/06/2017
ms.author: sdanie
ms.openlocfilehash: 71b0d4add7e642487f6d67cda692c500ee78b0e6
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/11/2017
---
# <a name="how-to-configure-geo-replication-for-azure-redis-cache"></a><span data-ttu-id="201f2-103">Como configurar a replicação geográfica para o Cache Redis do Azure</span><span class="sxs-lookup"><span data-stu-id="201f2-103">How to configure Geo-replication for Azure Redis Cache</span></span>

<span data-ttu-id="201f2-104">A Replicação geográfica fornece um mecanismo para vincular duas instâncias de Cache Redis do Azure de camada Premium.</span><span class="sxs-lookup"><span data-stu-id="201f2-104">Geo-replication provides a mechanism for linking two Premium tier Azure Redis Cache instances.</span></span> <span data-ttu-id="201f2-105">Um cache é designado como o cache vinculado primário e o outro como o cache vinculado secundário.</span><span class="sxs-lookup"><span data-stu-id="201f2-105">One cache is designated as the primary linked cache, and the other as the secondary linked cache.</span></span> <span data-ttu-id="201f2-106">O cache vinculado secundário se torna somente leitura e os dados gravados no cache primário são replicados para o cache vinculado secundário.</span><span class="sxs-lookup"><span data-stu-id="201f2-106">The secondary linked cache becomes read-only, and data written to the primary cache is replicated to the secondary linked cache.</span></span> <span data-ttu-id="201f2-107">Essa funcionalidade pode ser usada para replicar um cache entre regiões do Azure.</span><span class="sxs-lookup"><span data-stu-id="201f2-107">This functionality can be used to replicate a cache across Azure regions.</span></span> <span data-ttu-id="201f2-108">Este artigo fornece um guia para configurar a replicação geográfica para suas instâncias de Cache Redis do Azure de camada Premium.</span><span class="sxs-lookup"><span data-stu-id="201f2-108">This article provides a guide to configuring Geo-replication for your Premium tier Azure Redis Cache instances.</span></span>

## <a name="geo-replication-prerequisites"></a><span data-ttu-id="201f2-109">Pré-requisitos de replicação geográfica</span><span class="sxs-lookup"><span data-stu-id="201f2-109">Geo-replication prerequisites</span></span>

<span data-ttu-id="201f2-110">Para configurar a replicação geográfica entre dois caches, os seguintes pré-requisitos devem ser atendidos:</span><span class="sxs-lookup"><span data-stu-id="201f2-110">To configure Geo-replication between two caches, the following prerequisites must be met:</span></span>

- <span data-ttu-id="201f2-111">Ambos os caches devem ser de [camada Premium](cache-premium-tier-intro.md).</span><span class="sxs-lookup"><span data-stu-id="201f2-111">Both caches must be [Premium tier](cache-premium-tier-intro.md) caches.</span></span>
- <span data-ttu-id="201f2-112">Ambos os caches devem estar na mesma assinatura do Azure.</span><span class="sxs-lookup"><span data-stu-id="201f2-112">Both caches must be in the same Azure subscription.</span></span>
- <span data-ttu-id="201f2-113">O cache vinculado secundário deve estar no mesmo tipo de preço ou em um tipo de preço maior do que o cache vinculado primário.</span><span class="sxs-lookup"><span data-stu-id="201f2-113">The secondary linked cache must be either the same pricing tier or a larger pricing tier than the primary linked cache.</span></span>
- <span data-ttu-id="201f2-114">Se o cache vinculado primário tiver clustering habilitado, o cache vinculado secundário deverá ter clustering habilitado com o mesmo número de fragmentos que o cache vinculado primário.</span><span class="sxs-lookup"><span data-stu-id="201f2-114">If the primary linked cache has clustering enabled, the secondary linked cache must have clustering enabled with the same number of shards as the primary linked cache.</span></span>
- <span data-ttu-id="201f2-115">Ambos os caches devem ser criados em um estado de execução.</span><span class="sxs-lookup"><span data-stu-id="201f2-115">Both caches must be created and in a running state.</span></span>
- <span data-ttu-id="201f2-116">A persistência não deve ser habilitada em nenhum dos caches.</span><span class="sxs-lookup"><span data-stu-id="201f2-116">Persistence must not be enabled on either cache.</span></span>
- <span data-ttu-id="201f2-117">Há suporte para a replicação geográfica entre caches na mesma VNET.</span><span class="sxs-lookup"><span data-stu-id="201f2-117">Geo-replication between caches in the same VNET is supported.</span></span> <span data-ttu-id="201f2-118">Também há suporte para replicação geográfica entre caches em VNETs diferentes, desde que as duas VNETs sejam configuradas de forma que recursos nas VNETs sejam capazes de alcançar uns aos outros por meio de conexões TCP.</span><span class="sxs-lookup"><span data-stu-id="201f2-118">Geo-replication between caches in different VNETs is also supported, as long as the two VNETs are configured in such a way that resources in the VNETs are able to reach each other via TCP connections.</span></span>

<span data-ttu-id="201f2-119">Depois de configurar a replicação geográfica, as seguintes restrições se aplicam para o par de caches vinculados:</span><span class="sxs-lookup"><span data-stu-id="201f2-119">After Geo-replication is configured, the following restrictions apply to your linked cache pair:</span></span>

- <span data-ttu-id="201f2-120">O cache vinculado secundário é somente leitura; você pode ler dele, mas não pode gravar dados nele.</span><span class="sxs-lookup"><span data-stu-id="201f2-120">The secondary linked cache is read-only; you can read from it, but you can't write any data to it.</span></span> 
- <span data-ttu-id="201f2-121">Todos os dados que estavam no cache vinculado secundário antes do link ser adicionado são removidos.</span><span class="sxs-lookup"><span data-stu-id="201f2-121">Any data that was in the secondary linked cache before the link was added is removed.</span></span> <span data-ttu-id="201f2-122">Se a replicação geográfica for subsequentemente removida, no entanto, os dados replicados permanecerão no cache vinculado secundário.</span><span class="sxs-lookup"><span data-stu-id="201f2-122">If the Geo-replication is subsequently removed however, the replicated data remains in the secondary linked cache.</span></span>
- <span data-ttu-id="201f2-123">Não é possível iniciar uma [operação de dimensionamento](cache-how-to-scale.md) em um cache nem [alterar o número de fragmentos](cache-how-to-premium-clustering.md) se o cache tem o clustering habilitado.</span><span class="sxs-lookup"><span data-stu-id="201f2-123">You can't initiate a [scaling operation](cache-how-to-scale.md) on either cache or [change the number of shards](cache-how-to-premium-clustering.md) if the cache has clustering enabled.</span></span>
- <span data-ttu-id="201f2-124">Você não pode habilitar a persistência em nenhum dos caches.</span><span class="sxs-lookup"><span data-stu-id="201f2-124">You can't enable persistence on either cache.</span></span>
- <span data-ttu-id="201f2-125">Você pode usar [Exportar](cache-how-to-import-export-data.md#export) com qualquer um dos caches, mas você só pode [Importar](cache-how-to-import-export-data.md#import) para o cache vinculado primário.</span><span class="sxs-lookup"><span data-stu-id="201f2-125">You can use [Export](cache-how-to-import-export-data.md#export) with either cache, but you can only [Import](cache-how-to-import-export-data.md#import) into the primary linked cache.</span></span>
- <span data-ttu-id="201f2-126">Até que você remova o link de replicação geográfica, você não pode excluir nenhum dos caches vinculados nem o grupo de recursos que os contém.</span><span class="sxs-lookup"><span data-stu-id="201f2-126">You can't delete either linked cache, or the resource group that contains them, until you remove the Geo-replication link.</span></span> <span data-ttu-id="201f2-127">Para obter mais informações, consulte [Por que a operação falhou quando tentei excluir meu cache vinculado?](#why-did-the-operation-fail-when-i-tried-to-delete-my-linked-cache)</span><span class="sxs-lookup"><span data-stu-id="201f2-127">For more information, see [Why did the operation fail when I tried to delete my linked cache?](#why-did-the-operation-fail-when-i-tried-to-delete-my-linked-cache)</span></span>
- <span data-ttu-id="201f2-128">Se dois caches estão em regiões diferentes, os custos de egresso de rede serão aplicados aos dados replicados entre as regiões para o cache vinculado secundário.</span><span class="sxs-lookup"><span data-stu-id="201f2-128">If the two caches are in different regions, network egress costs will apply to the data replicated across regions to the secondary linked cache.</span></span> <span data-ttu-id="201f2-129">Para obter mais informações, consulte [Quanto custa para replicar meus dados entre regiões do Azure?](#how-much-does-it-cost-to-replicate-my-data-across-azure-regions)</span><span class="sxs-lookup"><span data-stu-id="201f2-129">For more information, see [How much does it cost to replicate my data across Azure regions?](#how-much-does-it-cost-to-replicate-my-data-across-azure-regions)</span></span>
- <span data-ttu-id="201f2-130">Não há nenhum failover automático para o cache vinculado secundário se o cache primário (e sua réplica) ficam inativos.</span><span class="sxs-lookup"><span data-stu-id="201f2-130">There is no automatic failover to the secondary linked cache if the primary cache (and its replica) go down.</span></span> <span data-ttu-id="201f2-131">Em ordem para fazer failover de aplicativos cliente, você precisa remover manualmente o link de replicação geográfica e apontar os aplicativos cliente para o cache que anteriormente era o cache vinculado secundário.</span><span class="sxs-lookup"><span data-stu-id="201f2-131">In order to failover client applications, you would need to manually remove the Geo-replication link and point the client applications to the cache that was formerly the secondary linked cache.</span></span> <span data-ttu-id="201f2-132">Para obter mais informações, consulte [Como funciona o failover para o cache vinculado secundário?](#how-does-failing-over-to-the-secondary-linked-cache-work)</span><span class="sxs-lookup"><span data-stu-id="201f2-132">For more information, see [How does failing over to the secondary linked cache work?](#how-does-failing-over-to-the-secondary-linked-cache-work)</span></span>

## <a name="add-a-geo-replication-link"></a><span data-ttu-id="201f2-133">Adicionar um link de replicação geográfica</span><span class="sxs-lookup"><span data-stu-id="201f2-133">Add a Geo-replication link</span></span>

1. <span data-ttu-id="201f2-134">Para vincular dois caches Premium juntos para replicação geográfica, clique em **Replicação geográfica** no menu de Recursos do cache destinado a ser o cache vinculado primário e, em seguida, clique em **Adicionar link de replicação de cache** da folha **Replicação geográfica**.</span><span class="sxs-lookup"><span data-stu-id="201f2-134">To link two premium caches together for geo-replication, click **Geo-replication** from the Resource menu of the cache intended as the primary linked cache, and then click **Add cache replication link** from the **Geo-replication** blade.</span></span>

    ![Adicionar Link](./media/cache-how-to-geo-replication/cache-geo-location-menu.png)

2. <span data-ttu-id="201f2-136">Clique no nome do cache secundário desejado da lista **Caches compatíveis**.</span><span class="sxs-lookup"><span data-stu-id="201f2-136">Click the name of the desired secondary cache from the **Compatible caches** list.</span></span> <span data-ttu-id="201f2-137">Se o cache desejado não está exibido na lista, verifique se os [pré-requisitos de replicação geográfica](#geo-replication-prerequisites) para o cache secundário desejado estão atendidos.</span><span class="sxs-lookup"><span data-stu-id="201f2-137">If your desired cache isn't displayed in the list, verify that the [Geo-replication prerequisites](#geo-replication-prerequisites) for the desired secondary cache are met.</span></span> <span data-ttu-id="201f2-138">Para filtrar os caches por região, clique na região desejada no mapa para exibir apenas esses caches na lista **Caches compatíveis**.</span><span class="sxs-lookup"><span data-stu-id="201f2-138">To filter the caches by region, click the desired region in the map to display only those caches in the **Compatible caches** list.</span></span>

    ![Caches compatíveis de replicação geográfica](./media/cache-how-to-geo-replication/cache-geo-location-select-link.png)
    
    <span data-ttu-id="201f2-140">Você também pode iniciar o processo de vinculação ou exibir detalhes sobre o cache secundário por meio do menu de contexto.</span><span class="sxs-lookup"><span data-stu-id="201f2-140">You can also initiate the linking process or view details about the secondary cache by using the context menu.</span></span>

    ![Menu de contexto de replicação geográfica](./media/cache-how-to-geo-replication/cache-geo-location-select-link-context-menu.png)

3. <span data-ttu-id="201f2-142">Clique em **Vincular** para vincular dois caches e iniciar o processo de replicação.</span><span class="sxs-lookup"><span data-stu-id="201f2-142">Click **Link** to link the two caches together and begin the replication process.</span></span>

    ![Vincular caches](./media/cache-how-to-geo-replication/cache-geo-location-confirm-link.png)

4. <span data-ttu-id="201f2-144">Você pode exibir o andamento do processo de replicação na folha **Replicação geográfica**.</span><span class="sxs-lookup"><span data-stu-id="201f2-144">You can view the progress of the replication process on the **Geo-replication** blade.</span></span>

    ![Status da vinculação](./media/cache-how-to-geo-replication/cache-geo-location-linking.png)

    <span data-ttu-id="201f2-146">Você também pode exibir o status de vinculação na folha **Visão geral** para os caches primário e secundário.</span><span class="sxs-lookup"><span data-stu-id="201f2-146">You can also view the linking status on the **Overview** blade for both the primary and secondary caches.</span></span>

    ![Status do cache](./media/cache-how-to-geo-replication/cache-geo-location-link-status.png)

    <span data-ttu-id="201f2-148">Quando o processo de replicação é concluído, o **Status da vinculação** é alterado para **Êxito**.</span><span class="sxs-lookup"><span data-stu-id="201f2-148">Once the replication process is complete, the **Link status** changes to **Succeeded**.</span></span>

    ![Status do cache](./media/cache-how-to-geo-replication/cache-geo-location-link-successful.png)

    <span data-ttu-id="201f2-150">Durante o processo de vinculação, o cache vinculado primário permanece disponível para uso, mas o cache vinculado secundário não está disponível até a conclusão do processo de vinculação.</span><span class="sxs-lookup"><span data-stu-id="201f2-150">During the linking process, the primary linked cache remains available for use but the secondary linked cache is not available until the linking process completes.</span></span>

## <a name="remove-a-geo-replication-link"></a><span data-ttu-id="201f2-151">Remover um vínculo de replicação geográfica</span><span class="sxs-lookup"><span data-stu-id="201f2-151">Remove a Geo-replication link</span></span>

1. <span data-ttu-id="201f2-152">Para remover o vínculo entre dois caches e parar a replicação geográfica, clique em **Desvincular caches** na folha **Replicação geográfica**.</span><span class="sxs-lookup"><span data-stu-id="201f2-152">To remove the link between two caches and stop Geo-replication, click **Unlink caches** from the **Geo-replication** blade.</span></span>
    
    ![Desvincular caches](./media/cache-how-to-geo-replication/cache-geo-location-unlink.png)

    <span data-ttu-id="201f2-154">Quando o processo de desvinculação for concluído, o cache secundário estará disponível para leituras e gravações.</span><span class="sxs-lookup"><span data-stu-id="201f2-154">When the unlinking process completes, the secondary cache is available for both reads and writes.</span></span>

>[!NOTE]
><span data-ttu-id="201f2-155">Quando o vínculo de replicação geográfica for removido, os dados replicados do cache vinculado primário permanecerão no cache secundário.</span><span class="sxs-lookup"><span data-stu-id="201f2-155">When the Geo-replication link is removed, the replicated data from the primary linked cache remains in the secondary cache.</span></span>
>
>

## <a name="geo-replication-faq"></a><span data-ttu-id="201f2-156">Perguntas frequentes de replicação geográfica</span><span class="sxs-lookup"><span data-stu-id="201f2-156">Geo-replication FAQ</span></span>

- [<span data-ttu-id="201f2-157">Posso usar a replicação geográfica com um cache de camada Standard ou Basic?</span><span class="sxs-lookup"><span data-stu-id="201f2-157">Can I use Geo-replication with a Standard or Basic tier cache?</span></span>](#can-i-use-geo-replication-with-a-standard-or-basic-tier-cache)
- [<span data-ttu-id="201f2-158">O cache está disponível para uso durante o processo de vinculação ou desvinculação?</span><span class="sxs-lookup"><span data-stu-id="201f2-158">Is my cache available for use during the linking or unlinking process?</span></span>](#is-my-cache-available-for-use-during-the-linking-or-unlinking-process)
- [<span data-ttu-id="201f2-159">Posso vincular mais de dois caches juntos?</span><span class="sxs-lookup"><span data-stu-id="201f2-159">Can I link more than two caches together?</span></span>](#can-i-link-more-than-two-caches-together)
- [<span data-ttu-id="201f2-160">Posso vincular dois caches de assinaturas do Azure diferentes?</span><span class="sxs-lookup"><span data-stu-id="201f2-160">Can I link two caches from different Azure subscriptions?</span></span>](#can-i-link-two-caches-from-different-azure-subscriptions)
- [<span data-ttu-id="201f2-161">Posso vincular dois caches com tamanhos diferentes?</span><span class="sxs-lookup"><span data-stu-id="201f2-161">Can I link two caches with different sizes?</span></span>](#can-i-link-two-caches-with-different-sizes)
- [<span data-ttu-id="201f2-162">Posso usar a replicação geográfica com o clustering habilitado?</span><span class="sxs-lookup"><span data-stu-id="201f2-162">Can I use Geo-replication with clustering enabled?</span></span>](#can-i-use-geo-replication-with-clustering-enabled)
- [<span data-ttu-id="201f2-163">Posso usar a replicação geográfica com meus caches em uma VNET?</span><span class="sxs-lookup"><span data-stu-id="201f2-163">Can I use Geo-replication with my caches in a VNET?</span></span>](#can-i-use-geo-replication-with-my-caches-in-a-vnet)
- [<span data-ttu-id="201f2-164">Posso usar o PowerShell ou a CLI do Azure para gerenciar a replicação geográfica?</span><span class="sxs-lookup"><span data-stu-id="201f2-164">Can I use PowerShell or Azure CLI to manage Geo-replication?</span></span>](#can-i-use-powershell-or-azure-cli-to-manage-geo-replication)
- [<span data-ttu-id="201f2-165">Quanto custa para replicar meus dados entre regiões do Azure?</span><span class="sxs-lookup"><span data-stu-id="201f2-165">How much does it cost to replicate my data across Azure regions?</span></span>](#how-much-does-it-cost-to-replicate-my-data-across-azure-regions)
- [<span data-ttu-id="201f2-166">Por que a operação falhou quando tentei excluir meu cache vinculado?</span><span class="sxs-lookup"><span data-stu-id="201f2-166">Why did the operation fail when I tried to delete my linked cache?</span></span>](#why-did-the-operation-fail-when-i-tried-to-delete-my-linked-cache)
- [<span data-ttu-id="201f2-167">Qual região devo usar para meu cache vinculado secundário?</span><span class="sxs-lookup"><span data-stu-id="201f2-167">What region should I use for my secondary linked cache?</span></span>](#what-region-should-i-use-for-my-secondary-linked-cache)
- [<span data-ttu-id="201f2-168">Como funciona o failover para o cache vinculado secundário?</span><span class="sxs-lookup"><span data-stu-id="201f2-168">How does failing over to the secondary linked cache work?</span></span>](#how-does-failing-over-to-the-secondary-linked-cache-work)

### <a name="can-i-use-geo-replication-with-a-standard-or-basic-tier-cache"></a><span data-ttu-id="201f2-169">Posso usar a replicação geográfica com um cache de camada Standard ou Basic?</span><span class="sxs-lookup"><span data-stu-id="201f2-169">Can I use Geo-replication with a Standard or Basic tier cache?</span></span>

<span data-ttu-id="201f2-170">Não, a replicação geográfica está disponível somente para caches de camada Premium.</span><span class="sxs-lookup"><span data-stu-id="201f2-170">No, Geo-replication is only available for Premium tier caches.</span></span>

### <a name="is-my-cache-available-for-use-during-the-linking-or-unlinking-process"></a><span data-ttu-id="201f2-171">O cache está disponível para uso durante o processo de vinculação ou desvinculação?</span><span class="sxs-lookup"><span data-stu-id="201f2-171">Is my cache available for use during the linking or unlinking process?</span></span>

- <span data-ttu-id="201f2-172">Ao vincular dois caches para replicação geográfica, o cache vinculado primário permanece disponível para uso, mas o cache vinculado secundário não está disponível até a conclusão do processo de vinculação.</span><span class="sxs-lookup"><span data-stu-id="201f2-172">When linking two caches together for Geo-replication, the primary linked cache remains available for use but the secondary linked cache is not available until the linking process completes.</span></span>
- <span data-ttu-id="201f2-173">Ao remover o link de replicação geográfica entre dois caches, ambos os caches permanecem disponíveis para uso.</span><span class="sxs-lookup"><span data-stu-id="201f2-173">When removing the Geo-replication link between two caches, both caches remain available for use.</span></span>

### <a name="can-i-link-more-than-two-caches-together"></a><span data-ttu-id="201f2-174">Posso vincular mais de dois caches juntos?</span><span class="sxs-lookup"><span data-stu-id="201f2-174">Can I link more than two caches together?</span></span>

<span data-ttu-id="201f2-175">Não. Ao usar a replicação geográfica, só é possível vincular dois caches juntos.</span><span class="sxs-lookup"><span data-stu-id="201f2-175">No, when using Geo-replication you can only link two caches together.</span></span>

### <a name="can-i-link-two-caches-from-different-azure-subscriptions"></a><span data-ttu-id="201f2-176">Posso vincular dois caches de assinaturas do Azure diferentes?</span><span class="sxs-lookup"><span data-stu-id="201f2-176">Can I link two caches from different Azure subscriptions?</span></span>

<span data-ttu-id="201f2-177">Não, ambos os caches devem estar na mesma assinatura do Azure.</span><span class="sxs-lookup"><span data-stu-id="201f2-177">No, both caches must be in the same Azure subscription.</span></span>

### <a name="can-i-link-two-caches-with-different-sizes"></a><span data-ttu-id="201f2-178">Posso vincular dois caches com tamanhos diferentes?</span><span class="sxs-lookup"><span data-stu-id="201f2-178">Can I link two caches with different sizes?</span></span>

<span data-ttu-id="201f2-179">Sim, contanto que o cache vinculado secundário seja maior do que o cache vinculado primário.</span><span class="sxs-lookup"><span data-stu-id="201f2-179">Yes, as long as the secondary linked cache is larger than the primary linked cache.</span></span>

### <a name="can-i-use-geo-replication-with-clustering-enabled"></a><span data-ttu-id="201f2-180">Posso usar a replicação geográfica com o clustering habilitado?</span><span class="sxs-lookup"><span data-stu-id="201f2-180">Can I use Geo-replication with clustering enabled?</span></span>

<span data-ttu-id="201f2-181">Sim, desde que ambos os caches tenham o mesmo número de fragmentos.</span><span class="sxs-lookup"><span data-stu-id="201f2-181">Yes, as long as both caches have the same number of shards.</span></span>

### <a name="can-i-use-geo-replication-with-my-caches-in-a-vnet"></a><span data-ttu-id="201f2-182">Posso usar a replicação geográfica com meus caches em uma VNET?</span><span class="sxs-lookup"><span data-stu-id="201f2-182">Can I use Geo-replication with my caches in a VNET?</span></span>

<span data-ttu-id="201f2-183">Sim, há suporte para replicação geográfica de caches em redes virtuais.</span><span class="sxs-lookup"><span data-stu-id="201f2-183">Yes, Geo-replication of caches in VNETs are supported.</span></span> 

- <span data-ttu-id="201f2-184">Há suporte para a replicação geográfica entre caches na mesma VNET.</span><span class="sxs-lookup"><span data-stu-id="201f2-184">Geo-replication between caches in the same VNET is supported.</span></span>
- <span data-ttu-id="201f2-185">Também há suporte para replicação geográfica entre caches em VNETs diferentes, desde que as duas VNETs sejam configuradas de forma que recursos nas VNETs sejam capazes de alcançar uns aos outros por meio de conexões TCP.</span><span class="sxs-lookup"><span data-stu-id="201f2-185">Geo-replication between caches in different VNETs is also supported, as long as the two VNETs are configured in such a way that resources in the VNETs are able to reach each other via TCP connections.</span></span>

### <a name="can-i-use-powershell-or-azure-cli-to-manage-geo-replication"></a><span data-ttu-id="201f2-186">Posso usar o PowerShell ou a CLI do Azure para gerenciar a replicação geográfica?</span><span class="sxs-lookup"><span data-stu-id="201f2-186">Can I use PowerShell or Azure CLI to manage Geo-replication?</span></span>

<span data-ttu-id="201f2-187">Neste momento, você só pode gerenciar a replicação geográfica usando o portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="201f2-187">At this time you can only manage Geo-replication using the Azure portal.</span></span>

### <a name="how-much-does-it-cost-to-replicate-my-data-across-azure-regions"></a><span data-ttu-id="201f2-188">Quanto custa para replicar meus dados entre regiões do Azure?</span><span class="sxs-lookup"><span data-stu-id="201f2-188">How much does it cost to replicate my data across Azure regions?</span></span>

<span data-ttu-id="201f2-189">Ao usar a replicação geográfica, dados do cache vinculado primário são replicados para o cache vinculado secundário.</span><span class="sxs-lookup"><span data-stu-id="201f2-189">When using Geo-replication, data from the primary linked cache is replicated to the secondary linked cache.</span></span> <span data-ttu-id="201f2-190">Se os dois caches vinculados estão na mesma região do Azure, não há nenhum encargo para a transferência de dados.</span><span class="sxs-lookup"><span data-stu-id="201f2-190">If the two linked caches are in the same Azure region, there is no charge for the data transfer.</span></span> <span data-ttu-id="201f2-191">Se os dois caches vinculados estão em diferentes regiões do Azure, o encargo pela transferência de dados de replicação geográfica é o custo de largura de banda de replicação de dados para a outra região do Azure.</span><span class="sxs-lookup"><span data-stu-id="201f2-191">If the two linked caches are in different Azure regions, the Geo-Replication data transfer charge is the bandwidth cost of replicating that data to the other Azure region.</span></span> <span data-ttu-id="201f2-192">Para obter mais informações, consulte [Detalhes de preço de largura de banda](https://azure.microsoft.com/pricing/details/bandwidth/).</span><span class="sxs-lookup"><span data-stu-id="201f2-192">For more information, see [Bandwidth Pricing Details](https://azure.microsoft.com/pricing/details/bandwidth/).</span></span>

### <a name="why-did-the-operation-fail-when-i-tried-to-delete-my-linked-cache"></a><span data-ttu-id="201f2-193">Por que a operação falhou quando tentei excluir meu cache vinculado?</span><span class="sxs-lookup"><span data-stu-id="201f2-193">Why did the operation fail when I tried to delete my linked cache?</span></span>

<span data-ttu-id="201f2-194">Quando dois caches estão vinculados, você não pode excluir nenhum dos caches vinculados nem o grupo de recursos que os contém até que você remova o link de replicação geográfica.</span><span class="sxs-lookup"><span data-stu-id="201f2-194">When two caches are linked together, you can't delete either cache or the resource group that contains them until you remove the Geo-replication link.</span></span> <span data-ttu-id="201f2-195">Se você tentar excluir o grupo de recursos que contém um ou ambos os caches vinculados, outros recursos no grupo de recursos serão excluídos, mas o grupo de recursos permanecerá no estado `deleting` e quaisquer caches vinculados no grupo de recursos permanecerão no estado `running`.</span><span class="sxs-lookup"><span data-stu-id="201f2-195">If you attempt to delete the resource group that contains one or both of the linked caches, the other resources in the resource group are deleted, but the resource group stays in the `deleting` state and any linked caches in the resource group remain in the `running` state.</span></span> <span data-ttu-id="201f2-196">Para concluir a exclusão do grupo de recursos e os caches vinculados dentro dele, interrompa o vínculo de replicação geográfica conforme descrito em [Remover um link de replicação geográfica](#remove-a-geo-replication-link).</span><span class="sxs-lookup"><span data-stu-id="201f2-196">To complete the deletion of the resource group and the linked caches within it, break the Geo-replication link as described in [Remove a Geo-replication link](#remove-a-geo-replication-link).</span></span>

### <a name="what-region-should-i-use-for-my-secondary-linked-cache"></a><span data-ttu-id="201f2-197">Qual região devo usar para meu cache vinculado secundário?</span><span class="sxs-lookup"><span data-stu-id="201f2-197">What region should I use for my secondary linked cache?</span></span>

<span data-ttu-id="201f2-198">Em geral, é recomendável que o cache exista na mesma região do Azure que o aplicativo que o acessa.</span><span class="sxs-lookup"><span data-stu-id="201f2-198">In general, it is recommended for your cache to exist in the same Azure region as the application that accesses it.</span></span> <span data-ttu-id="201f2-199">Se seu aplicativo tiver uma região primária e uma de fallback, seus caches primário e secundário devem existir nessas mesmas regiões.</span><span class="sxs-lookup"><span data-stu-id="201f2-199">If your application has a primary and fallback region, then your primary and secondary caches should exist in those same regions.</span></span> <span data-ttu-id="201f2-200">Para obter mais informações sobre regiões emparelhadas, consulte [Melhores práticas – regiões emparelhadas do Azure](../best-practices-availability-paired-regions.md).</span><span class="sxs-lookup"><span data-stu-id="201f2-200">For more information about paired regions, see [Best Practices – Azure Paired regions](../best-practices-availability-paired-regions.md).</span></span>

### <a name="how-does-failing-over-to-the-secondary-linked-cache-work"></a><span data-ttu-id="201f2-201">Como funciona o failover para o cache vinculado secundário?</span><span class="sxs-lookup"><span data-stu-id="201f2-201">How does failing over to the secondary linked cache work?</span></span>

<span data-ttu-id="201f2-202">Na versão inicial da replicação geográfica, o Cache Redis do Azure não dá suporte a failover automático entre regiões do Azure.</span><span class="sxs-lookup"><span data-stu-id="201f2-202">In the initial release of Geo-replication, Azure Redis Cache does not support automatic failover across Azure regions.</span></span> <span data-ttu-id="201f2-203">A replicação geográfica é usada principalmente em um cenário de recuperação de desastre.</span><span class="sxs-lookup"><span data-stu-id="201f2-203">Geo-replication is used primarily in a disaster recovery scenario.</span></span> <span data-ttu-id="201f2-204">Em um cenário de recuperação de desastre, clientes devem criar toda a pilha de aplicativos em uma região de backup de uma maneira coordenada, em vez de permitir que os componentes de aplicativos individuais decidam por conta própria quando mudar para seus backups.</span><span class="sxs-lookup"><span data-stu-id="201f2-204">In a distater recovery scenario, customers should bring up the entire application stack in a backup region in a coordinated manner rather than letting individual application components decide when to switch to their backups on their own.</span></span> <span data-ttu-id="201f2-205">Isso é especialmente relevante para o Redis.</span><span class="sxs-lookup"><span data-stu-id="201f2-205">This is especially relevant to Redis.</span></span> <span data-ttu-id="201f2-206">Um dos principais benefícios do Redis é ser um repositório de muito baixa latência.</span><span class="sxs-lookup"><span data-stu-id="201f2-206">One of the key benefits of Redis is that it is a very low-latency store.</span></span> <span data-ttu-id="201f2-207">Se o Redis usado por um aplicativo faz failover para uma região do Azure diferente mas a camada de computação não faz, o tempo da viagem de ida e volta adicionado teria um impacto perceptível no desempenho.</span><span class="sxs-lookup"><span data-stu-id="201f2-207">If Redis used by an application fails over to a different Azure region but the compute tier does not, the added round trip time would have a noticeable impact on performance.</span></span> <span data-ttu-id="201f2-208">Por esse motivo, gostaríamos de evitar que o Redis faça failover automaticamente devido a problemas de disponibilidade transitórios.</span><span class="sxs-lookup"><span data-stu-id="201f2-208">For this reason, we would like to avoid Redis failing over automatically due to transient availability issues.</span></span>

<span data-ttu-id="201f2-209">No momento, para iniciar o failover, você precisa remover o link de replicação geográfica no portal do Azure e, em seguida, alterar o ponto de extremidade de conexão no cliente Redis do cache vinculado primário para o cache secundário (anteriormente vinculado).</span><span class="sxs-lookup"><span data-stu-id="201f2-209">Currently, to initiate the failover, you need to remove the Geo-replication link in the Azure portal, and then change the connection end-point in the Redis client from the primary linked cache to the (formerly linked) secondary cache.</span></span> <span data-ttu-id="201f2-210">Quando dois caches são desassociados, a réplica se torna um cache de leitura-gravação regular novamente e aceita as solicitações diretamente dos clientes Redis.</span><span class="sxs-lookup"><span data-stu-id="201f2-210">When the two caches are disassociated, the replica becomes a regular read-write cache again and accepts requests directly from Redis clients.</span></span>


## <a name="next-steps"></a><span data-ttu-id="201f2-211">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="201f2-211">Next steps</span></span>

<span data-ttu-id="201f2-212">Saiba mais sobre a [Camada Premium do Cache Redis do Azure](cache-premium-tier-intro.md).</span><span class="sxs-lookup"><span data-stu-id="201f2-212">Learn more about the [Azure Redis Cache Premium tier](cache-premium-tier-intro.md).</span></span>

