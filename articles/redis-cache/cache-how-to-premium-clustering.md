---
title: aaaHow tooconfigure Redis clustering para um Premium do Azure Redis Cache | Microsoft Docs
description: "Saiba como toocreate e gerenciar Redis clustering para da camada Premium instâncias de Cache Redis do Azure"
services: redis-cache
documentationcenter: 
author: steved0x
manager: douge
editor: 
ms.assetid: 62208eec-52ae-4713-b077-62659fd844ab
ms.service: cache
ms.workload: tbd
ms.tgt_pltfrm: cache-redis
ms.devlang: na
ms.topic: article
ms.date: 07/05/2017
ms.author: sdanie
ms.openlocfilehash: 44d520facb9d1af145b69f1b58f082aabb655d4a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="how-tooconfigure-redis-clustering-for-a-premium-azure-redis-cache"></a><span data-ttu-id="62946-103">Como tooconfigure Redis clustering para um Premium do Azure Redis Cache</span><span class="sxs-lookup"><span data-stu-id="62946-103">How tooconfigure Redis clustering for a Premium Azure Redis Cache</span></span>
<span data-ttu-id="62946-104">Cache Redis do Azure tem diferentes ofertas de cache, que fornecem flexibilidade na escolha de saudação do tamanho do cache e recursos, incluindo recursos de camada Premium, como clustering, persistência e suporte de rede virtual.</span><span class="sxs-lookup"><span data-stu-id="62946-104">Azure Redis Cache has different cache offerings, which provide flexibility in hello choice of cache size and features, including Premium tier features such as clustering, persistence, and virtual network support.</span></span> <span data-ttu-id="62946-105">Este artigo descreve como tooconfigure clustering em um premium do Azure Redis Cache de instância.</span><span class="sxs-lookup"><span data-stu-id="62946-105">This article describes how tooconfigure clustering in a premium Azure Redis Cache instance.</span></span>

<span data-ttu-id="62946-106">Para obter informações sobre outros recursos de cache premium, consulte [camada de Azure Redis Cache Premium Introdução toohello](cache-premium-tier-intro.md).</span><span class="sxs-lookup"><span data-stu-id="62946-106">For information on other premium cache features, see [Introduction toohello Azure Redis Cache Premium tier](cache-premium-tier-intro.md).</span></span>

## <a name="what-is-redis-cluster"></a><span data-ttu-id="62946-107">O que é o Cluster Redis?</span><span class="sxs-lookup"><span data-stu-id="62946-107">What is Redis Cluster?</span></span>
<span data-ttu-id="62946-108">O Cache Redis do Azure oferece o cluster Redis como [implementado no Redis](http://redis.io/topics/cluster-tutorial).</span><span class="sxs-lookup"><span data-stu-id="62946-108">Azure Redis Cache offers Redis cluster as [implemented in Redis](http://redis.io/topics/cluster-tutorial).</span></span> <span data-ttu-id="62946-109">Com o Cluster Redis, você obtém Olá benefícios a seguir:</span><span class="sxs-lookup"><span data-stu-id="62946-109">With Redis Cluster, you get hello following benefits:</span></span> 

* <span data-ttu-id="62946-110">Olá capacidade tooautomatically dividir seu conjunto de dados entre vários nós.</span><span class="sxs-lookup"><span data-stu-id="62946-110">hello ability tooautomatically split your dataset among multiple nodes.</span></span> 
* <span data-ttu-id="62946-111">Olá capacidade toocontinue operações quando um subconjunto de nós hello está apresentando falhas ou estão toocommunicate não é possível com o restante de saudação do cluster hello.</span><span class="sxs-lookup"><span data-stu-id="62946-111">hello ability toocontinue operations when a subset of hello nodes is experiencing failures or are unable toocommunicate with hello rest of hello cluster.</span></span> 
* <span data-ttu-id="62946-112">Taxa de transferência mais: taxa de transferência linearmente aumenta à medida que aumentar o número de saudação de fragmentos.</span><span class="sxs-lookup"><span data-stu-id="62946-112">More throughput: Throughput increases linearly as you increase hello number of shards.</span></span> 
* <span data-ttu-id="62946-113">Tamanho de memória mais: aumenta linearmente à medida que aumentar o número de saudação de fragmentos.</span><span class="sxs-lookup"><span data-stu-id="62946-113">More memory size: Increases linearly as you increase hello number of shards.</span></span>  

<span data-ttu-id="62946-114">Para obter mais informações sobre tamanho, taxa de transferência e largura de banda com caches premium, veja [Qual oferta e tamanho de Cache Redis devo usar?](cache-faq.md#what-redis-cache-offering-and-size-should-i-use)</span><span class="sxs-lookup"><span data-stu-id="62946-114">For more information about size, throughput, and bandwidth with premium caches, see [What Redis Cache offering and size should I use?](cache-faq.md#what-redis-cache-offering-and-size-should-i-use)</span></span>

<span data-ttu-id="62946-115">No Azure, o cluster Redis é oferecido como um modelo principal/réplica em que cada fragmento tem um par de principal/réplica com replicação em que a replicação Olá é gerenciada pelo serviço de Cache Redis do Azure.</span><span class="sxs-lookup"><span data-stu-id="62946-115">In Azure, Redis cluster is offered as a primary/replica model where each shard has a primary/replica pair with replication where hello replication is managed by Azure Redis Cache service.</span></span> 

## <a name="clustering"></a><span data-ttu-id="62946-116">Clustering</span><span class="sxs-lookup"><span data-stu-id="62946-116">Clustering</span></span>
<span data-ttu-id="62946-117">Clustering é ativado Olá **novo Cache Redis** folha durante a criação do cache.</span><span class="sxs-lookup"><span data-stu-id="62946-117">Clustering is enabled on hello **New Redis Cache** blade during cache creation.</span></span> 

[!INCLUDE [redis-cache-create](../../includes/redis-cache-premium-create.md)]

<span data-ttu-id="62946-118">Clustering é configurado no hello **Cluster Redis** folha.</span><span class="sxs-lookup"><span data-stu-id="62946-118">Clustering is configured on hello **Redis Cluster** blade.</span></span>

![Clustering][redis-cache-clustering]

<span data-ttu-id="62946-120">Você pode ter até too10 fragmentos no cluster hello.</span><span class="sxs-lookup"><span data-stu-id="62946-120">You can have up too10 shards in hello cluster.</span></span> <span data-ttu-id="62946-121">Clique em **habilitado** e deslize o controle deslizante de saudação ou digite um número entre 1 e 10 para **contagem de fragmento** e clique em **Okey**.</span><span class="sxs-lookup"><span data-stu-id="62946-121">Click **Enabled** and slide hello slider or type a number between 1 and 10 for **Shard count** and click **OK**.</span></span>

<span data-ttu-id="62946-122">Cada fragmento é um par de cache primário/réplica gerenciado pelo Azure e tamanho total de saudação do cache de saudação é calculado multiplicando o número Olá de fragmentos pelo tamanho do cache de saudação selecionado no hello preço.</span><span class="sxs-lookup"><span data-stu-id="62946-122">Each shard is a primary/replica cache pair managed by Azure, and hello total size of hello cache is calculated by multiplying hello number of shards by hello cache size selected in hello pricing tier.</span></span> 

![Clustering][redis-cache-clustering-selected]

<span data-ttu-id="62946-124">Após a criação do cache de saudação conectar tooit e use apenas como um cache não clusterizado e Redis distribui dados de saudação ao longo de fragmentos de Cache de saudação.</span><span class="sxs-lookup"><span data-stu-id="62946-124">Once hello cache is created you connect tooit and use it just like a non-clustered cache, and Redis distributes hello data throughout hello Cache shards.</span></span> <span data-ttu-id="62946-125">Se os diagnósticos são [habilitado](cache-how-to-monitor.md#enable-cache-diagnostics), métricas são capturadas separadamente para cada fragmento e pode ser [exibidas](cache-how-to-monitor.md) na folha de Cache Redis hello.</span><span class="sxs-lookup"><span data-stu-id="62946-125">If diagnostics is [enabled](cache-how-to-monitor.md#enable-cache-diagnostics), metrics are captured separately for each shard and can be [viewed](cache-how-to-monitor.md) in hello Redis Cache blade.</span></span> 

> [!NOTE]
> 
> <span data-ttu-id="62946-126">Há algumas pequenas diferenças necessárias em seu aplicativo cliente quando o cluster é configurado.</span><span class="sxs-lookup"><span data-stu-id="62946-126">There are some minor differences required in your client application when clustering is configured.</span></span> <span data-ttu-id="62946-127">Para obter mais informações, consulte [preciso toomake qualquer toouse de aplicativo alterações toomy cliente clustering?](#do-i-need-to-make-any-changes-to-my-client-application-to-use-clustering)</span><span class="sxs-lookup"><span data-stu-id="62946-127">For more information, see [Do I need toomake any changes toomy client application toouse clustering?](#do-i-need-to-make-any-changes-to-my-client-application-to-use-clustering)</span></span>
> 
> 

<span data-ttu-id="62946-128">Para o código de exemplo sobre como trabalhar com o cluster com o cliente de Stackexchange Olá, consulte Olá [clustering.cs](https://github.com/rustd/RedisSamples/blob/master/HelloWorld/Clustering.cs) parte da saudação [Hello World](https://github.com/rustd/RedisSamples/tree/master/HelloWorld) exemplo.</span><span class="sxs-lookup"><span data-stu-id="62946-128">For sample code on working with clustering with hello StackExchange.Redis client, see hello [clustering.cs](https://github.com/rustd/RedisSamples/blob/master/HelloWorld/Clustering.cs) portion of hello [Hello World](https://github.com/rustd/RedisSamples/tree/master/HelloWorld) sample.</span></span>

<a name="cluster-size"></a>

## <a name="change-hello-cluster-size-on-a-running-premium-cache"></a><span data-ttu-id="62946-129">Alterar tamanho do cluster de saudação em um execução cache premium</span><span class="sxs-lookup"><span data-stu-id="62946-129">Change hello cluster size on a running premium cache</span></span>
<span data-ttu-id="62946-130">tamanho do cluster de saudação toochange em um execução premium do cache com clustering clique habilitado, **tamanho do Cluster Redis** de saudação **menu recursos**.</span><span class="sxs-lookup"><span data-stu-id="62946-130">toochange hello cluster size on a running premium cache with clustering enabled, click **Redis Cluster Size** from hello **Resource menu**.</span></span>

> [!NOTE]
> <span data-ttu-id="62946-131">Enquanto hello Azure Redis Cache Premium camada foi liberado tooGeneral disponibilidade, recurso de tamanho de Cluster Redis hello está atualmente em visualização.</span><span class="sxs-lookup"><span data-stu-id="62946-131">While hello Azure Redis Cache Premium tier has been released tooGeneral Availability, hello Redis Cluster Size feature is currently in preview.</span></span>
> 
> 

![Tamanho do cluster Redis][redis-cache-redis-cluster-size]

<span data-ttu-id="62946-133">tamanho do cluster Olá toochange, use o controle deslizante de saudação ou digite um número entre 1 e 10 Olá **contagem de fragmento** caixa de texto e clique em **Okey** toosave.</span><span class="sxs-lookup"><span data-stu-id="62946-133">toochange hello cluster size, use hello slider or type a number between 1 and 10 in hello **Shard count** text box and click **OK** toosave.</span></span>

> [!NOTE]
> <span data-ttu-id="62946-134">Dimensionamento de um cluster executa Olá [migrar](https://redis.io/commands/migrate) comando, que é um comando caro, portanto para minimizar o impacto, considere executar esta operação durante o horário de pico.</span><span class="sxs-lookup"><span data-stu-id="62946-134">Scaling a cluster runs hello [MIGRATE](https://redis.io/commands/migrate) command, which is an expensive command, so for minimal impact, consider running this operation during non-peak hours.</span></span> <span data-ttu-id="62946-135">Durante o processo de migração hello, você verá um aumento na carga do servidor.</span><span class="sxs-lookup"><span data-stu-id="62946-135">During hello migration process, you will see a spike in server load.</span></span> <span data-ttu-id="62946-136">Dimensionamento de um cluster está executando de um longo processo e Olá período de tempo depende do número de saudação de chaves e tamanho Olá valores associados a essas chaves.</span><span class="sxs-lookup"><span data-stu-id="62946-136">Scaling a cluster is a long running process and hello amount of time taken depends on hello number of keys and size of hello values associated with those keys.</span></span>
> 
> 

## <a name="clustering-faq"></a><span data-ttu-id="62946-137">Perguntas frequentes sobre clustering</span><span class="sxs-lookup"><span data-stu-id="62946-137">Clustering FAQ</span></span>
<span data-ttu-id="62946-138">Olá lista a seguir contém as respostas toocommonly perguntas frequentes sobre o cluster de Cache Redis do Azure.</span><span class="sxs-lookup"><span data-stu-id="62946-138">hello following list contains answers toocommonly asked questions about Azure Redis Cache clustering.</span></span>

* [<span data-ttu-id="62946-139">É necessário toomake qualquer toouse de aplicativo alterações toomy cliente clustering?</span><span class="sxs-lookup"><span data-stu-id="62946-139">Do I need toomake any changes toomy client application toouse clustering?</span></span>](#do-i-need-to-make-any-changes-to-my-client-application-to-use-clustering)
* [<span data-ttu-id="62946-140">Como as chaves são distribuídas em um cluster?</span><span class="sxs-lookup"><span data-stu-id="62946-140">How are keys distributed in a cluster?</span></span>](#how-are-keys-distributed-in-a-cluster)
* [<span data-ttu-id="62946-141">Qual é o tamanho de cache maior Olá que posso criar?</span><span class="sxs-lookup"><span data-stu-id="62946-141">What is hello largest cache size I can create?</span></span>](#what-is-the-largest-cache-size-i-can-create)
* [<span data-ttu-id="62946-142">Todos os clientes do Redis dão suporte ao clustering?</span><span class="sxs-lookup"><span data-stu-id="62946-142">Do all Redis clients support clustering?</span></span>](#do-all-redis-clients-support-clustering)
* [<span data-ttu-id="62946-143">Como conectar toomy cache quando o cluster está habilitado?</span><span class="sxs-lookup"><span data-stu-id="62946-143">How do I connect toomy cache when clustering is enabled?</span></span>](#how-do-i-connect-to-my-cache-when-clustering-is-enabled)
* [<span data-ttu-id="62946-144">Posso conectar diretamente toohello de fragmentos individuais do meu cache?</span><span class="sxs-lookup"><span data-stu-id="62946-144">Can I directly connect toohello individual shards of my cache?</span></span>](#can-i-directly-connect-to-the-individual-shards-of-my-cache)
* [<span data-ttu-id="62946-145">Posso configurar o clustering para um cache criado anteriormente?</span><span class="sxs-lookup"><span data-stu-id="62946-145">Can I configure clustering for a previously created cache?</span></span>](#can-i-configure-clustering-for-a-previously-created-cache)
* [<span data-ttu-id="62946-146">Posso configurar o clustering para um cache básico ou standard?</span><span class="sxs-lookup"><span data-stu-id="62946-146">Can I configure clustering for a basic or standard cache?</span></span>](#can-i-configure-clustering-for-a-basic-or-standard-cache)
* [<span data-ttu-id="62946-147">Pode usar clustering com provedores de estado da sessão ASP.NET Redis e cache de saída Olá?</span><span class="sxs-lookup"><span data-stu-id="62946-147">Can I use clustering with hello Redis ASP.NET Session State and Output Caching providers?</span></span>](#can-i-use-clustering-with-the-redis-aspnet-session-state-and-output-caching-providers)
* [<span data-ttu-id="62946-148">Estou recebendo exceções MOVE ao usar StackExchange.Redis e clustering. O que devo fazer?</span><span class="sxs-lookup"><span data-stu-id="62946-148">I am getting MOVE exceptions when using StackExchange.Redis and clustering, what should I do?</span></span>](#i-am-getting-move-exceptions-when-using-stackexchangeredis-and-clustering-what-should-i-do)

### <a name="do-i-need-toomake-any-changes-toomy-client-application-toouse-clustering"></a><span data-ttu-id="62946-149">É necessário toomake qualquer toouse de aplicativo alterações toomy cliente clustering?</span><span class="sxs-lookup"><span data-stu-id="62946-149">Do I need toomake any changes toomy client application toouse clustering?</span></span>
* <span data-ttu-id="62946-150">Quando o clustering estiver habilitado, somente o banco de dados 0 estará disponível.</span><span class="sxs-lookup"><span data-stu-id="62946-150">When clustering is enabled, only database 0 is available.</span></span> <span data-ttu-id="62946-151">Se seu aplicativo cliente usa vários bancos de dados e ele tenta tooread gravação tooa banco de dados ou diferente de 0, hello seguinte exceção será lançada.</span><span class="sxs-lookup"><span data-stu-id="62946-151">If your client application uses multiple databases and it tries tooread or write tooa database other than 0, hello following exception is thrown.</span></span> <span data-ttu-id="62946-152">`Unhandled Exception: StackExchange.Redis.RedisConnectionException: ProtocolFailure on GET --->` `StackExchange.Redis.RedisCommandException: Multiple databases are not supported on this server; cannot switch toodatabase: 6`</span><span class="sxs-lookup"><span data-stu-id="62946-152">`Unhandled Exception: StackExchange.Redis.RedisConnectionException: ProtocolFailure on GET --->` `StackExchange.Redis.RedisCommandException: Multiple databases are not supported on this server; cannot switch toodatabase: 6`</span></span>
  
  <span data-ttu-id="62946-153">Para saber mais, confira [Redis Cluster Specification - Implemented subset (Especificação do cluster Redis — subconjunto implementado)](http://redis.io/topics/cluster-spec#implemented-subset).</span><span class="sxs-lookup"><span data-stu-id="62946-153">For more information, see [Redis Cluster Specification - Implemented subset](http://redis.io/topics/cluster-spec#implemented-subset).</span></span>
* <span data-ttu-id="62946-154">Se você estiver usando [StackExchange.Redis](https://www.nuget.org/packages/StackExchange.Redis/), use a versão 1.0.481 ou posterior.</span><span class="sxs-lookup"><span data-stu-id="62946-154">If you are using [StackExchange.Redis](https://www.nuget.org/packages/StackExchange.Redis/), you must use 1.0.481 or later.</span></span> <span data-ttu-id="62946-155">Conecte-se toohello cache usando Olá mesmo [pontos de extremidade, portas e chaves](cache-configure.md#properties) que você usa ao conectar-se o cache de tooa que não tenha habilitado de clustering.</span><span class="sxs-lookup"><span data-stu-id="62946-155">You connect toohello cache using hello same [endpoints, ports, and keys](cache-configure.md#properties) that you use when connecting tooa cache that does not have clustering enabled.</span></span> <span data-ttu-id="62946-156">Olá única diferença é que todas as leituras e gravações devem ser feitas toodatabase 0.</span><span class="sxs-lookup"><span data-stu-id="62946-156">hello only difference is that all reads and writes must be done toodatabase 0.</span></span>
  
  * <span data-ttu-id="62946-157">Outros clientes podem ter requisitos diferentes.</span><span class="sxs-lookup"><span data-stu-id="62946-157">Other clients may have different requirements.</span></span> <span data-ttu-id="62946-158">Veja [Todos os clientes do Redis dão suporte ao clustering?](#do-all-redis-clients-support-clustering)</span><span class="sxs-lookup"><span data-stu-id="62946-158">See [Do all Redis clients support clustering?](#do-all-redis-clients-support-clustering)</span></span>
* <span data-ttu-id="62946-159">Se seu aplicativo usa várias operações de chave em lote em um único comando, todas as chaves devem estar localizadas no hello mesmo fragmento.</span><span class="sxs-lookup"><span data-stu-id="62946-159">If your application uses multiple key operations batched into a single command, all keys must be located in hello same shard.</span></span> <span data-ttu-id="62946-160">chaves de toolocate no hello mesmo fragmento, consulte [como as chaves são distribuídas em um cluster?](#how-are-keys-distributed-in-a-cluster)</span><span class="sxs-lookup"><span data-stu-id="62946-160">toolocate keys in hello same shard, see [How are keys distributed in a cluster?](#how-are-keys-distributed-in-a-cluster)</span></span>
* <span data-ttu-id="62946-161">Se estiver usando o provedor de Estado de Sessão ASP.NET Redis, você deverá usar a versão 2.0.1 ou superior.</span><span class="sxs-lookup"><span data-stu-id="62946-161">If you are using Redis ASP.NET Session State provider you must use 2.0.1 or higher.</span></span> <span data-ttu-id="62946-162">Consulte [usar clustering com provedores de estado da sessão ASP.NET Redis e cache de saída Olá?](#can-i-use-clustering-with-the-redis-aspnet-session-state-and-output-caching-providers)</span><span class="sxs-lookup"><span data-stu-id="62946-162">See [Can I use clustering with hello Redis ASP.NET Session State and Output Caching providers?](#can-i-use-clustering-with-the-redis-aspnet-session-state-and-output-caching-providers)</span></span>

### <a name="how-are-keys-distributed-in-a-cluster"></a><span data-ttu-id="62946-163">Como as chaves são distribuídas em um cluster?</span><span class="sxs-lookup"><span data-stu-id="62946-163">How are keys distributed in a cluster?</span></span>
<span data-ttu-id="62946-164">Por Olá Redis [modelo de distribuição de chaves](http://redis.io/topics/cluster-spec#keys-distribution-model) documentação: espaço da chave Olá é dividido em 16384 slots.</span><span class="sxs-lookup"><span data-stu-id="62946-164">Per hello Redis [Keys distribution model](http://redis.io/topics/cluster-spec#keys-distribution-model) documentation: hello key space is split into 16384 slots.</span></span> <span data-ttu-id="62946-165">Cada chave é colocado em hash e atribuído tooone desses slots, que são distribuídos entre nós de saudação do cluster de saudação.</span><span class="sxs-lookup"><span data-stu-id="62946-165">Each key is hashed and assigned tooone of these slots, which are distributed across hello nodes of hello cluster.</span></span> <span data-ttu-id="62946-166">Você pode configurar qual parte da chave de saudação é hash tooensure localizados em várias chaves Olá mesmo fragmento usando marcas de hash.</span><span class="sxs-lookup"><span data-stu-id="62946-166">You can configure which part of hello key is hashed tooensure that multiple keys are located in hello same shard using hash tags.</span></span>

* <span data-ttu-id="62946-167">Chaves com uma marca de hash - se qualquer parte da chave de saudação estiver incluído em `{` e `}`, somente essa parte da chave de saudação é transformado em hash para fins de saudação da determinação do slot de hash de saudação de uma chave.</span><span class="sxs-lookup"><span data-stu-id="62946-167">Keys with a hash tag - if any part of hello key is enclosed in `{` and `}`, only that part of hello key is hashed for hello purposes of determining hello hash slot of a key.</span></span> <span data-ttu-id="62946-168">Por exemplo, Olá 3 chaves a seguir deve estar localizado no hello mesmo fragmento: `{key}1`, `{key}2`, e `{key}3` desde apenas Olá `key` parte do nome de saudação é transformado em hash.</span><span class="sxs-lookup"><span data-stu-id="62946-168">For example, hello following 3 keys would be located in hello same shard: `{key}1`, `{key}2`, and `{key}3` since only hello `key` part of hello name is hashed.</span></span> <span data-ttu-id="62946-169">Para obter uma lista completa das especificações da marca hash de chaves, confira [Keys hash tags](http://redis.io/topics/cluster-spec#keys-hash-tags).</span><span class="sxs-lookup"><span data-stu-id="62946-169">For a complete list of keys hash tag specifications, see [Keys hash tags](http://redis.io/topics/cluster-spec#keys-hash-tags).</span></span>
* <span data-ttu-id="62946-170">Chaves sem uma marca de hash - nome da chave inteira Olá é usada para hash.</span><span class="sxs-lookup"><span data-stu-id="62946-170">Keys without a hash tag - hello entire key name is used for hashing.</span></span> <span data-ttu-id="62946-171">Isso resulta em uma distribuição estatisticamente uniforme entre fragmentos de saudação do cache de saudação.</span><span class="sxs-lookup"><span data-stu-id="62946-171">This results in a statistically even distribution across hello shards of hello cache.</span></span>

<span data-ttu-id="62946-172">Para melhor desempenho e a taxa de transferência, recomendamos a distribuição de chaves Olá uniformemente.</span><span class="sxs-lookup"><span data-stu-id="62946-172">For best performance and throughput, we recommend distributing hello keys evenly.</span></span> <span data-ttu-id="62946-173">Se você estiver usando chaves com uma marca de hash é que as chaves de saudação de tooensure de responsabilidade do aplicativo hello são distribuídas uniformemente.</span><span class="sxs-lookup"><span data-stu-id="62946-173">If you are using keys with a hash tag it is hello application's responsibility tooensure hello keys are distributed evenly.</span></span>

<span data-ttu-id="62946-174">Para saber mais, confira [Keys distribution model](http://redis.io/topics/cluster-spec#keys-distribution-model), [Redis Cluster data sharding](http://redis.io/topics/cluster-tutorial#redis-cluster-data-sharding) e [Keys hash tags](http://redis.io/topics/cluster-spec#keys-hash-tags).</span><span class="sxs-lookup"><span data-stu-id="62946-174">For more information, see [Keys distribution model](http://redis.io/topics/cluster-spec#keys-distribution-model), [Redis Cluster data sharding](http://redis.io/topics/cluster-tutorial#redis-cluster-data-sharding), and [Keys hash tags](http://redis.io/topics/cluster-spec#keys-hash-tags).</span></span>

<span data-ttu-id="62946-175">Para o código de exemplo sobre como trabalhar com clustering e a localização de chaves em Olá fragmento mesmo com o cliente Stackexchange Olá, consulte Olá [clustering.cs](https://github.com/rustd/RedisSamples/blob/master/HelloWorld/Clustering.cs) parte da saudação [Hello World](https://github.com/rustd/RedisSamples/tree/master/HelloWorld) exemplo.</span><span class="sxs-lookup"><span data-stu-id="62946-175">For sample code on working with clustering and locating keys in hello same shard with hello StackExchange.Redis client, see hello [clustering.cs](https://github.com/rustd/RedisSamples/blob/master/HelloWorld/Clustering.cs) portion of hello [Hello World](https://github.com/rustd/RedisSamples/tree/master/HelloWorld) sample.</span></span>

### <a name="what-is-hello-largest-cache-size-i-can-create"></a><span data-ttu-id="62946-176">Qual é o tamanho de cache maior Olá que posso criar?</span><span class="sxs-lookup"><span data-stu-id="62946-176">What is hello largest cache size I can create?</span></span>
<span data-ttu-id="62946-177">maior tamanho de cache premium Olá é 53 GB.</span><span class="sxs-lookup"><span data-stu-id="62946-177">hello largest premium cache size is 53 GB.</span></span> <span data-ttu-id="62946-178">Você pode criar até too10 fragmentos fornecendo um tamanho máximo de 530 GB.</span><span class="sxs-lookup"><span data-stu-id="62946-178">You can create up too10 shards giving you a maximum size of 530 GB.</span></span> <span data-ttu-id="62946-179">Se precisar de um tamanho maior, você pode [solicitar mais](mailto:wapteams@microsoft.com?subject=Redis%20Cache%20quota%20increase).</span><span class="sxs-lookup"><span data-stu-id="62946-179">If you need a larger size you can [request more](mailto:wapteams@microsoft.com?subject=Redis%20Cache%20quota%20increase).</span></span> <span data-ttu-id="62946-180">Para saber mais, confira [Preço do Cache Redis do Azure](https://azure.microsoft.com/pricing/details/cache/).</span><span class="sxs-lookup"><span data-stu-id="62946-180">For more information, see [Azure Redis Cache Pricing](https://azure.microsoft.com/pricing/details/cache/).</span></span>

### <a name="do-all-redis-clients-support-clustering"></a><span data-ttu-id="62946-181">Todos os clientes do Redis dão suporte ao clustering?</span><span class="sxs-lookup"><span data-stu-id="62946-181">Do all Redis clients support clustering?</span></span>
<span data-ttu-id="62946-182">Em Olá nem todos os clientes oferecem suporte a hora atual Redis clustering.</span><span class="sxs-lookup"><span data-stu-id="62946-182">At hello present time not all clients support Redis clustering.</span></span> <span data-ttu-id="62946-183">StackExchange.Redis é o que dá suporte a ele.</span><span class="sxs-lookup"><span data-stu-id="62946-183">StackExchange.Redis is one that does support for it.</span></span> <span data-ttu-id="62946-184">Para obter mais informações sobre outros clientes, consulte Olá [brincando com cluster Olá](http://redis.io/topics/cluster-tutorial#playing-with-the-cluster) seção Olá [tutorial de cluster Redis](http://redis.io/topics/cluster-tutorial).</span><span class="sxs-lookup"><span data-stu-id="62946-184">For more information on other clients, see hello [Playing with hello cluster](http://redis.io/topics/cluster-tutorial#playing-with-the-cluster) section of hello [Redis cluster tutorial](http://redis.io/topics/cluster-tutorial).</span></span>

> [!NOTE]
> <span data-ttu-id="62946-185">Se você estiver usando stackexchange. Redis como cliente, verifique se você estiver usando a versão mais recente de saudação do [Stackexchange](https://www.nuget.org/packages/StackExchange.Redis/) 1.0.481 ou posterior para clustering toowork corretamente.</span><span class="sxs-lookup"><span data-stu-id="62946-185">If you are using StackExchange.Redis as your client, ensure you are using hello latest version of [StackExchange.Redis](https://www.nuget.org/packages/StackExchange.Redis/) 1.0.481 or later for clustering toowork correctly.</span></span> <span data-ttu-id="62946-186">Se você tiver problemas com as exceções de movimentação, confira [exceções move](#move-exceptions) para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="62946-186">If you have any issues with move exceptions, see [move exceptions](#move-exceptions) for more information.</span></span>
> 
> 

### <a name="how-do-i-connect-toomy-cache-when-clustering-is-enabled"></a><span data-ttu-id="62946-187">Como conectar toomy cache quando o cluster está habilitado?</span><span class="sxs-lookup"><span data-stu-id="62946-187">How do I connect toomy cache when clustering is enabled?</span></span>
<span data-ttu-id="62946-188">Você pode se conectar tooyour cache usando Olá mesmo [pontos de extremidade](cache-configure.md#properties), [portas](cache-configure.md#properties), e [chaves](cache-configure.md#access-keys) que você usa ao conectar-se o cache de tooa que não tenha habilitado de clustering.</span><span class="sxs-lookup"><span data-stu-id="62946-188">You can connect tooyour cache using hello same [endpoints](cache-configure.md#properties), [ports](cache-configure.md#properties), and [keys](cache-configure.md#access-keys) that you use when connecting tooa cache that does not have clustering enabled.</span></span> <span data-ttu-id="62946-189">Redis gerencia Olá clustering em Olá back-end para não ter toomanage-lo do seu cliente.</span><span class="sxs-lookup"><span data-stu-id="62946-189">Redis manages hello clustering on hello backend so you don't have toomanage it from your client.</span></span>

### <a name="can-i-directly-connect-toohello-individual-shards-of-my-cache"></a><span data-ttu-id="62946-190">Posso conectar diretamente toohello de fragmentos individuais do meu cache?</span><span class="sxs-lookup"><span data-stu-id="62946-190">Can I directly connect toohello individual shards of my cache?</span></span>
<span data-ttu-id="62946-191">Oficialmente, não há suporte para isso.</span><span class="sxs-lookup"><span data-stu-id="62946-191">This is not officially supported.</span></span> <span data-ttu-id="62946-192">Dito isso, cada fragmento consiste em um par de cache primário/de réplica que é conhecido coletivamente como uma instância de cache.</span><span class="sxs-lookup"><span data-stu-id="62946-192">With that said, each shard consists of a primary/replica cache pair, collectively known as a cache instance.</span></span> <span data-ttu-id="62946-193">Você pode se conectar a instâncias de cache toothese usando o utilitário de redis-cli Olá no hello [instável](http://redis.io/download) ramificação do repositório de Redis Olá no GitHub.</span><span class="sxs-lookup"><span data-stu-id="62946-193">You can connect toothese cache instances using hello redis-cli utility in hello [unstable](http://redis.io/download) branch of hello Redis repository at GitHub.</span></span> <span data-ttu-id="62946-194">Esta versão implementa suporte básico quando iniciado com hello `-c` alternar.</span><span class="sxs-lookup"><span data-stu-id="62946-194">This version implements basic support when started with hello `-c` switch.</span></span> <span data-ttu-id="62946-195">Para obter mais informações, consulte [brincando com cluster Olá](http://redis.io/topics/cluster-tutorial#playing-with-the-cluster) na [http://redis.io](http://redis.io) em Olá [tutorial de cluster Redis](http://redis.io/topics/cluster-tutorial).</span><span class="sxs-lookup"><span data-stu-id="62946-195">For more information see [Playing with hello cluster](http://redis.io/topics/cluster-tutorial#playing-with-the-cluster) on [http://redis.io](http://redis.io) in hello [Redis cluster tutorial](http://redis.io/topics/cluster-tutorial).</span></span>

<span data-ttu-id="62946-196">Para não ssl, use Olá comandos a seguir.</span><span class="sxs-lookup"><span data-stu-id="62946-196">For non-ssl, use hello following commands.</span></span>

    Redis-cli.exe –h <<cachename>> -p 13000 (tooconnect tooinstance 0)
    Redis-cli.exe –h <<cachename>> -p 13001 (tooconnect tooinstance 1)
    Redis-cli.exe –h <<cachename>> -p 13002 (tooconnect tooinstance 2)
    ...
    Redis-cli.exe –h <<cachename>> -p 1300N (tooconnect tooinstance N)

<span data-ttu-id="62946-197">Para SSL, substitua `1300N` por `1500N`.</span><span class="sxs-lookup"><span data-stu-id="62946-197">For ssl, replace `1300N` with `1500N`.</span></span>

### <a name="can-i-configure-clustering-for-a-previously-created-cache"></a><span data-ttu-id="62946-198">Posso configurar o clustering para um cache criado anteriormente?</span><span class="sxs-lookup"><span data-stu-id="62946-198">Can I configure clustering for a previously created cache?</span></span>
<span data-ttu-id="62946-199">Neste momento, você pode habilitar e configurar o clustering apenas durante a criação de um cache.</span><span class="sxs-lookup"><span data-stu-id="62946-199">Currently you can only enable clustering when you create a cache.</span></span> <span data-ttu-id="62946-200">Você pode alterar o tamanho do cluster Olá depois Olá cache é criado, mas você não pode adicionar o cache de premium tooa clustering ou remover o agrupamento de um cache premium depois Olá cache é criado.</span><span class="sxs-lookup"><span data-stu-id="62946-200">You can change hello cluster size after hello cache is created, but you can't add clustering tooa premium cache or remove clustering from a premium cache after hello cache is created.</span></span> <span data-ttu-id="62946-201">Um cache premium com clustering habilitado e somente um fragmento é diferente de um cache com premium Olá mesmo tamanho com nenhum agrupamento.</span><span class="sxs-lookup"><span data-stu-id="62946-201">A premium cache with clustering enabled and only one shard is different than a premium cache of hello same size with no clustering.</span></span>

### <a name="can-i-configure-clustering-for-a-basic-or-standard-cache"></a><span data-ttu-id="62946-202">Posso configurar o clustering para um cache básico ou standard?</span><span class="sxs-lookup"><span data-stu-id="62946-202">Can I configure clustering for a basic or standard cache?</span></span>
<span data-ttu-id="62946-203">O clustering está disponível apenas para os caches premium.</span><span class="sxs-lookup"><span data-stu-id="62946-203">Clustering is only available for premium caches.</span></span>

### <a name="can-i-use-clustering-with-hello-redis-aspnet-session-state-and-output-caching-providers"></a><span data-ttu-id="62946-204">Pode usar clustering com provedores de estado da sessão ASP.NET Redis e cache de saída Olá?</span><span class="sxs-lookup"><span data-stu-id="62946-204">Can I use clustering with hello Redis ASP.NET Session State and Output Caching providers?</span></span>
* <span data-ttu-id="62946-205">**Provedor de Cache de Saída Redis** : sem necessidade de alterações.</span><span class="sxs-lookup"><span data-stu-id="62946-205">**Redis Output Cache provider** - no changes required.</span></span>
* <span data-ttu-id="62946-206">**Provedor de estado de sessão do redis** -toouse clustering, você deve usar [RedisSessionStateProvider](https://www.nuget.org/packages/Microsoft.Web.RedisSessionStateProvider) 2.0.1 ou superior ou uma exceção será lançada.</span><span class="sxs-lookup"><span data-stu-id="62946-206">**Redis Session State provider** - toouse clustering, you must use [RedisSessionStateProvider](https://www.nuget.org/packages/Microsoft.Web.RedisSessionStateProvider) 2.0.1 or higher or an exception is thrown.</span></span> <span data-ttu-id="62946-207">Essa é uma alteração significativa; para saber mais, confira [v2.0.0 Breaking Change Details](https://github.com/Azure/aspnet-redis-providers/wiki/v2.0.0-Breaking-Change-Details).</span><span class="sxs-lookup"><span data-stu-id="62946-207">This is a breaking change; for more information see [v2.0.0 Breaking Change Details](https://github.com/Azure/aspnet-redis-providers/wiki/v2.0.0-Breaking-Change-Details).</span></span>

<a name="move-exceptions"></a>

### <a name="i-am-getting-move-exceptions-when-using-stackexchangeredis-and-clustering-what-should-i-do"></a><span data-ttu-id="62946-208">Estou recebendo exceções MOVE ao usar StackExchange.Redis e clustering. O que devo fazer?</span><span class="sxs-lookup"><span data-stu-id="62946-208">I am getting MOVE exceptions when using StackExchange.Redis and clustering, what should I do?</span></span>
<span data-ttu-id="62946-209">Se você estiver usando StackExchange.Redis e receber exceções `MOVE` ao usar clustering, verifique se está usando [StackExchange.Redis 1.1.603](https://www.nuget.org/packages/StackExchange.Redis/) ou posterior.</span><span class="sxs-lookup"><span data-stu-id="62946-209">If you are using StackExchange.Redis and receive `MOVE` exceptions when using clustering, ensure that you are using [StackExchange.Redis 1.1.603](https://www.nuget.org/packages/StackExchange.Redis/) or later.</span></span> <span data-ttu-id="62946-210">Para obter instruções sobre como configurar seu toouse de aplicativos .NET stackexchange. Redis, consulte [configurar clientes de cache Olá](cache-dotnet-how-to-use-azure-redis-cache.md#configure-the-cache-clients).</span><span class="sxs-lookup"><span data-stu-id="62946-210">For instructions on configuring your .NET applications toouse StackExchange.Redis, see [Configure hello cache clients](cache-dotnet-how-to-use-azure-redis-cache.md#configure-the-cache-clients).</span></span>

## <a name="next-steps"></a><span data-ttu-id="62946-211">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="62946-211">Next steps</span></span>
<span data-ttu-id="62946-212">Saiba como toouse premium mais recursos de cache.</span><span class="sxs-lookup"><span data-stu-id="62946-212">Learn how toouse more premium cache features.</span></span>

* [<span data-ttu-id="62946-213">Camada de Azure Redis Cache Premium toohello Introdução</span><span class="sxs-lookup"><span data-stu-id="62946-213">Introduction toohello Azure Redis Cache Premium tier</span></span>](cache-premium-tier-intro.md)

<!-- IMAGES -->

[redis-cache-clustering]: ./media/cache-how-to-premium-clustering/redis-cache-clustering.png

[redis-cache-clustering-selected]: ./media/cache-how-to-premium-clustering/redis-cache-clustering-selected.png

[redis-cache-redis-cluster-size]: ./media/cache-how-to-premium-clustering/redis-cache-redis-cluster-size.png







