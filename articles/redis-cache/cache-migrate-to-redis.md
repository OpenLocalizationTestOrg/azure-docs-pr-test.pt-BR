---
title: "aaaMigrate tooRedis de aplicativos do serviço de Cache gerenciado - Azure | Microsoft Docs"
description: "Saiba como toomigrate aplicativos de serviço de Cache gerenciado e o Cache na função tooAzure Cache Redis"
services: redis-cache
documentationcenter: na
author: steved0x
manager: douge
editor: tysonn
ms.assetid: 041f077b-8c8e-4d7c-a3fc-89d334ed70d6
ms.service: cache
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: cache-redis
ms.workload: tbd
ms.date: 05/30/2017
ms.author: sdanie
ms.openlocfilehash: bd81722820acf0d2637828fbb6100c723aafeba5
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="migrate-from-managed-cache-service-tooazure-redis-cache"></a><span data-ttu-id="81c37-103">Migrar do serviço de Cache gerenciado tooAzure Cache Redis</span><span class="sxs-lookup"><span data-stu-id="81c37-103">Migrate from Managed Cache Service tooAzure Redis Cache</span></span>
<span data-ttu-id="81c37-104">Migrar seus aplicativos que usam o serviço de Cache gerenciado do Azure tooAzure Redis Cache pode ser feito com o aplicativo de tooyour alterações mínimas, dependendo dos recursos do serviço de Cache gerenciado Olá usado pelo seu aplicativo em cache.</span><span class="sxs-lookup"><span data-stu-id="81c37-104">Migrating your applications that use Azure Managed Cache Service tooAzure Redis Cache can be accomplished with minimal changes tooyour application, depending on hello Managed Cache Service features used by your caching application.</span></span> <span data-ttu-id="81c37-105">Embora Olá APIs não são exatamente Olá mesmo que eles são semelhantes e grande parte do seu código existente que usa o serviço de Cache gerenciado tooaccess um cache pode ser reutilizado com poucas alterações.</span><span class="sxs-lookup"><span data-stu-id="81c37-105">While hello APIs are not exactly hello same they are similar, and much of your existing code that uses Managed Cache Service tooaccess a cache can be reused with minimal changes.</span></span> <span data-ttu-id="81c37-106">Este tópico mostra como configuração de aplicativo e toomake Olá necessárias alterações toomigrate seu aplicativos de serviço de Cache gerenciado toouse Cache Redis do Azure e mostra como alguns dos recursos de saudação do Cache Redis do Azure podem ser usado tooimplement Olá funcionalidade de um cache de serviço de Cache gerenciado.</span><span class="sxs-lookup"><span data-stu-id="81c37-106">This topic shows how toomake hello necessary configuration and application changes toomigrate your Managed Cache Service applications toouse Azure Redis Cache, and shows how some of hello features of Azure Redis Cache can be used tooimplement hello functionality of a Managed Cache Service cache.</span></span>

>[!NOTE]
><span data-ttu-id="81c37-107">Serviço de Cache Gerenciado e na Cache na Função foram [desativados](https://azure.microsoft.com/blog/azure-managed-cache-and-in-role-cache-services-to-be-retired-on-11-30-2016/) em 30 de novembro de 2016.</span><span class="sxs-lookup"><span data-stu-id="81c37-107">Managed Cache Service and In-Role Cache were [retired](https://azure.microsoft.com/blog/azure-managed-cache-and-in-role-cache-services-to-be-retired-on-11-30-2016/) November 30, 2016.</span></span> <span data-ttu-id="81c37-108">Se você tiver as implantações de Cache na função que você deseja toomigrate tooAzure Redis Cache, você pode seguir as etapas de saudação neste artigo.</span><span class="sxs-lookup"><span data-stu-id="81c37-108">If you have any In-Role Cache deployments that you want toomigrate tooAzure Redis Cache, you can follow hello steps in this article.</span></span>

## <a name="migration-steps"></a><span data-ttu-id="81c37-109">Etapas da migração</span><span class="sxs-lookup"><span data-stu-id="81c37-109">Migration Steps</span></span>
<span data-ttu-id="81c37-110">Olá etapas a seguir é necessária toomigrate um aplicativo de serviço de Cache gerenciado toouse Cache Redis do Azure.</span><span class="sxs-lookup"><span data-stu-id="81c37-110">hello following steps are required toomigrate a Managed Cache Service application toouse Azure Redis Cache.</span></span>

* <span data-ttu-id="81c37-111">Mapa de recursos de serviço de Cache gerenciado tooAzure Cache Redis</span><span class="sxs-lookup"><span data-stu-id="81c37-111">Map Managed Cache Service features tooAzure Redis Cache</span></span>
* <span data-ttu-id="81c37-112">Escolher uma oferta de Cache</span><span class="sxs-lookup"><span data-stu-id="81c37-112">Choose a Cache Offering</span></span>
* <span data-ttu-id="81c37-113">Criar um Cache</span><span class="sxs-lookup"><span data-stu-id="81c37-113">Create a Cache</span></span>
* <span data-ttu-id="81c37-114">Configurar clientes de Cache Olá</span><span class="sxs-lookup"><span data-stu-id="81c37-114">Configure hello Cache Clients</span></span>
  * <span data-ttu-id="81c37-115">Remover configuração de serviço de Cache gerenciado do hello</span><span class="sxs-lookup"><span data-stu-id="81c37-115">Remove hello Managed Cache Service Configuration</span></span>
  * <span data-ttu-id="81c37-116">Configurar um cliente de cache usando Olá pacote do NuGet stackexchange. Redis</span><span class="sxs-lookup"><span data-stu-id="81c37-116">Configure a cache client using hello StackExchange.Redis NuGet Package</span></span>
* <span data-ttu-id="81c37-117">Migrar o código do Serviço de Cache Gerenciado</span><span class="sxs-lookup"><span data-stu-id="81c37-117">Migrate Managed Cache Service code</span></span>
  * <span data-ttu-id="81c37-118">Conecte-se usando a classe ConnectionMultiplexer de saudação do cache de toohello</span><span class="sxs-lookup"><span data-stu-id="81c37-118">Connect toohello cache using hello ConnectionMultiplexer class</span></span>
  * <span data-ttu-id="81c37-119">Tipos de dados primitivos de acesso no cache de saudação</span><span class="sxs-lookup"><span data-stu-id="81c37-119">Access primitive data types in hello cache</span></span>
  * <span data-ttu-id="81c37-120">Trabalhar com objetos .NET no cache de saudação</span><span class="sxs-lookup"><span data-stu-id="81c37-120">Work with .NET objects in hello cache</span></span>
* <span data-ttu-id="81c37-121">Migrar o estado da sessão ASP.NET e cache tooAzure Redis Cache de saída</span><span class="sxs-lookup"><span data-stu-id="81c37-121">Migrate ASP.NET Session State and Output caching tooAzure Redis Cache</span></span> 

## <a name="map-managed-cache-service-features-tooazure-redis-cache"></a><span data-ttu-id="81c37-122">Mapa de recursos de serviço de Cache gerenciado tooAzure Cache Redis</span><span class="sxs-lookup"><span data-stu-id="81c37-122">Map Managed Cache Service features tooAzure Redis Cache</span></span>
<span data-ttu-id="81c37-123">Serviço de Cache Gerenciado do e Cache Redis do Azure são semelhantes, mas implementam alguns dos seus recursos de maneiras diferentes.</span><span class="sxs-lookup"><span data-stu-id="81c37-123">Azure Managed Cache Service and Azure Redis Cache are similar but implement some of their features in different ways.</span></span> <span data-ttu-id="81c37-124">Esta seção descreve algumas das diferenças de saudação e fornece orientação sobre como implementar recursos de saudação do serviço de Cache gerenciado no Cache Redis do Azure.</span><span class="sxs-lookup"><span data-stu-id="81c37-124">This section describes some of hello differences and provides guidance on implementing hello features of Managed Cache Service in Azure Redis Cache.</span></span>

| <span data-ttu-id="81c37-125">Recurso do Serviço de Cache Gerenciado</span><span class="sxs-lookup"><span data-stu-id="81c37-125">Managed Cache Service feature</span></span> | <span data-ttu-id="81c37-126">Suporte do Serviço de Cache Gerenciado</span><span class="sxs-lookup"><span data-stu-id="81c37-126">Managed Cache Service support</span></span> | <span data-ttu-id="81c37-127">Suporte do Cache Redis do Azure</span><span class="sxs-lookup"><span data-stu-id="81c37-127">Azure Redis Cache support</span></span> |
| --- | --- | --- |
| <span data-ttu-id="81c37-128">Caches nomeados</span><span class="sxs-lookup"><span data-stu-id="81c37-128">Named caches</span></span> |<span data-ttu-id="81c37-129">Um cache padrão está configurado e em Olá Standard e Premium ofertas de cache, o toonine adicional caches nomeadas podem ser configuradas se desejado.</span><span class="sxs-lookup"><span data-stu-id="81c37-129">A default cache is configured, and in hello Standard and Premium cache offerings, up toonine additional named caches can be configured if desired.</span></span> |<span data-ttu-id="81c37-130">Caches Redis do Azure tem um número configurável de bancos de dados (padrão de 16) que pode ser usado tooimplement armazena em cache uma toonamed funcionalidade semelhante.</span><span class="sxs-lookup"><span data-stu-id="81c37-130">Azure Redis caches have a configurable number of databases (default of 16) that can be used tooimplement a similar functionality toonamed caches.</span></span> <span data-ttu-id="81c37-131">Para saber mais, veja [O que são os bancos de dados do Redis?](cache-faq.md#what-are-redis-databases) e [Configuração padrão do servidor Redis](cache-configure.md#default-redis-server-configuration).</span><span class="sxs-lookup"><span data-stu-id="81c37-131">For more information, see [What are Redis databases?](cache-faq.md#what-are-redis-databases) and [Default Redis server configuration](cache-configure.md#default-redis-server-configuration).</span></span> |
| <span data-ttu-id="81c37-132">Alta disponibilidade</span><span class="sxs-lookup"><span data-stu-id="81c37-132">High Availability</span></span> |<span data-ttu-id="81c37-133">Fornece alta disponibilidade para itens no cache de saudação nas ofertas de cache Standard e Premium Olá.</span><span class="sxs-lookup"><span data-stu-id="81c37-133">Provides high availability for items in hello cache in hello Standard and Premium cache offerings.</span></span> <span data-ttu-id="81c37-134">Se os itens são perdidos devido a falha de tooa, cópias de backup de itens de saudação no cache de saudação ainda estão disponíveis.</span><span class="sxs-lookup"><span data-stu-id="81c37-134">If items are lost due tooa failure, backup copies of hello items in hello cache are still available.</span></span> <span data-ttu-id="81c37-135">Grava o cache secundário toohello são feitas de forma síncrona.</span><span class="sxs-lookup"><span data-stu-id="81c37-135">Writes toohello secondary cache are made synchronously.</span></span> |<span data-ttu-id="81c37-136">Alta disponibilidade está disponível no hello Standard e Premium ofertas de cache, que têm uma configuração principal/réplica de dois nós (cada fragmento em um cache Premium tem um par primário/réplica).</span><span class="sxs-lookup"><span data-stu-id="81c37-136">High availability is available in hello Standard and Premium cache offerings, which have a two node Primary/Replica configuration (each shard in a Premium cache has a primary/replica pair).</span></span> <span data-ttu-id="81c37-137">Gravações toohello réplica são feitas de forma assíncrona.</span><span class="sxs-lookup"><span data-stu-id="81c37-137">Writes toohello replica are made asynchronously.</span></span> <span data-ttu-id="81c37-138">Para obter mais informações, confira [Preço do Cache Redis do Azure](https://azure.microsoft.com/pricing/details/cache/).</span><span class="sxs-lookup"><span data-stu-id="81c37-138">For more information, see [Azure Redis Cache pricing](https://azure.microsoft.com/pricing/details/cache/).</span></span> |
| <span data-ttu-id="81c37-139">Notificações</span><span class="sxs-lookup"><span data-stu-id="81c37-139">Notifications</span></span> |<span data-ttu-id="81c37-140">Permite que os clientes tooreceive notificações assíncronas quando várias operações de cache ocorrem em um cache nomeado.</span><span class="sxs-lookup"><span data-stu-id="81c37-140">Allows clients tooreceive asynchronous notifications when a variety of cache operations occur on a named cache.</span></span> |<span data-ttu-id="81c37-141">Aplicativos cliente podem usar pub/sub Redis ou [notificações Keyspace](cache-configure.md#keyspace-notifications-advanced-settings) tooachieve um toonotifications funcionalidade semelhante.</span><span class="sxs-lookup"><span data-stu-id="81c37-141">Client applications can use Redis pub/sub or [Keyspace notifications](cache-configure.md#keyspace-notifications-advanced-settings) tooachieve a similar functionality toonotifications.</span></span> |
| <span data-ttu-id="81c37-142">Cache local</span><span class="sxs-lookup"><span data-stu-id="81c37-142">Local cache</span></span> |<span data-ttu-id="81c37-143">Armazena uma cópia dos objetos armazenados em cache localmente no cliente Olá para acesso extremamente rápido.</span><span class="sxs-lookup"><span data-stu-id="81c37-143">Stores a copy of cached objects locally on hello client for extra-fast access.</span></span> |<span data-ttu-id="81c37-144">Aplicativos cliente precisaria tooimplement essa funcionalidade usando um dicionário ou uma estrutura de dados semelhantes.</span><span class="sxs-lookup"><span data-stu-id="81c37-144">Client applications would need tooimplement this functionality using a dictionary or similar data structure.</span></span> |
| <span data-ttu-id="81c37-145">Política de remoção</span><span class="sxs-lookup"><span data-stu-id="81c37-145">Eviction Policy</span></span> |<span data-ttu-id="81c37-146">Nenhuma ou LRU.</span><span class="sxs-lookup"><span data-stu-id="81c37-146">None or LRU.</span></span> <span data-ttu-id="81c37-147">política do saudação padrão é LRU.</span><span class="sxs-lookup"><span data-stu-id="81c37-147">hello default policy is LRU.</span></span> |<span data-ttu-id="81c37-148">Cache Redis do Azure oferece suporte a saudação políticas de remoção a seguir: volatile-lru, allkeys-lru, ttl de volátil volátil aleatório, allkeys aleatório, noeviction.</span><span class="sxs-lookup"><span data-stu-id="81c37-148">Azure Redis Cache supports hello following eviction policies: volatile-lru, allkeys-lru, volatile-random, allkeys-random, volatile-ttl, noeviction.</span></span> <span data-ttu-id="81c37-149">política do saudação padrão é volatile-lru.</span><span class="sxs-lookup"><span data-stu-id="81c37-149">hello default policy is volatile-lru.</span></span> <span data-ttu-id="81c37-150">Para obter mais informações, confira [Configuração padrão do servidor Redis](cache-configure.md#default-redis-server-configuration).</span><span class="sxs-lookup"><span data-stu-id="81c37-150">For more information, see [Default Redis server configuration](cache-configure.md#default-redis-server-configuration).</span></span> |
| <span data-ttu-id="81c37-151">Política de expiração</span><span class="sxs-lookup"><span data-stu-id="81c37-151">Expiration Policy</span></span> |<span data-ttu-id="81c37-152">política de expiração saudação padrão é absoluta e o intervalo de expiração saudação padrão é de dez minutos.</span><span class="sxs-lookup"><span data-stu-id="81c37-152">hello default expiration policy is Absolute and hello default expiration interval is ten minutes.</span></span> <span data-ttu-id="81c37-153">As políticas Sliding e Never também estão disponíveis.</span><span class="sxs-lookup"><span data-stu-id="81c37-153">Sliding and Never policies are also available.</span></span> |<span data-ttu-id="81c37-154">Por padrão a itens no cache de saudação não expiram, mas uma expiração pode ser configurada em uma base por gravação usando sobrecargas de conjunto de cache.</span><span class="sxs-lookup"><span data-stu-id="81c37-154">By default items in hello cache do not expire, but an expiration can be configured on a per write basis using cache set overloads.</span></span> <span data-ttu-id="81c37-155">Para obter mais informações, consulte [adicionar e recuperar objetos do cache de saudação](cache-dotnet-how-to-use-azure-redis-cache.md#add-and-retrieve-objects-from-the-cache).</span><span class="sxs-lookup"><span data-stu-id="81c37-155">For more information, see [Add and retrieve objects from hello cache](cache-dotnet-how-to-use-azure-redis-cache.md#add-and-retrieve-objects-from-the-cache).</span></span> |
| <span data-ttu-id="81c37-156">Regiões e marcação</span><span class="sxs-lookup"><span data-stu-id="81c37-156">Regions and Tagging</span></span> |<span data-ttu-id="81c37-157">As regiões são subgrupos para itens em cache.</span><span class="sxs-lookup"><span data-stu-id="81c37-157">Regions are subgroups for cached items.</span></span> <span data-ttu-id="81c37-158">Regiões também oferecem suporte a anotação de saudação de itens em cache com adicionais cadeias de caracteres descritivas denominadas marcas.</span><span class="sxs-lookup"><span data-stu-id="81c37-158">Regions also support hello annotation of cached items with additional descriptive strings called tags.</span></span> <span data-ttu-id="81c37-159">Regiões oferecem suporte a operações de pesquisa de tooperform Olá capacidade em qualquer item marcado nessa região.</span><span class="sxs-lookup"><span data-stu-id="81c37-159">Regions support hello ability tooperform search operations on any tagged items in that region.</span></span> <span data-ttu-id="81c37-160">Todos os itens dentro de uma região são localizados em um único nó de cluster de cache de saudação.</span><span class="sxs-lookup"><span data-stu-id="81c37-160">All items within a region are located within a single node of hello cache cluster.</span></span> |<span data-ttu-id="81c37-161">Um cache Redis consiste em um único nó (a menos que o cluster Redis estiver habilitada) para que o conceito de saudação de regiões do serviço de Cache gerenciado não se aplica.</span><span class="sxs-lookup"><span data-stu-id="81c37-161">A Redis cache consists of a single node (unless Redis cluster is enabled) so hello concept of Managed Cache Service regions does not apply.</span></span> <span data-ttu-id="81c37-162">O redis oferece suporte à pesquisa e operações curingas ao recuperar chaves para que as marcas descritivas podem ser inseridas em nomes de chave hello e usado itens de saudação tooretrieve posteriormente.</span><span class="sxs-lookup"><span data-stu-id="81c37-162">Redis supports searching and wildcard operations when retrieving keys so descriptive tags can be embedded within hello key names and used tooretrieve hello items later.</span></span> <span data-ttu-id="81c37-163">Para obter um exemplo de implementação de uma solução de marcação usando Redis, consulte [Implementar marcação de cache com Redis](http://stackify.com/implementing-cache-tagging-redis/).</span><span class="sxs-lookup"><span data-stu-id="81c37-163">For an example of implementing a tagging solution using Redis, see [Implementing cache tagging with Redis](http://stackify.com/implementing-cache-tagging-redis/).</span></span> |
| <span data-ttu-id="81c37-164">Serialização</span><span class="sxs-lookup"><span data-stu-id="81c37-164">Serialization</span></span> |<span data-ttu-id="81c37-165">Cache gerenciado suporta NetDataContractSerializer, BinaryFormatter e uso de saudação de serializadores personalizados.</span><span class="sxs-lookup"><span data-stu-id="81c37-165">Managed Cache supports NetDataContractSerializer, BinaryFormatter, and hello use of custom serializers.</span></span> <span data-ttu-id="81c37-166">saudação padrão é NetDataContractSerializer.</span><span class="sxs-lookup"><span data-stu-id="81c37-166">hello default is NetDataContractSerializer.</span></span> |<span data-ttu-id="81c37-167">É responsabilidade de Olá Olá cliente tooserialize .NET de objetos do aplicativo antes de colocá-los no cache de hello, com a opção de saudação do serializador Olá o desenvolvedor do aplicativo cliente toohello.</span><span class="sxs-lookup"><span data-stu-id="81c37-167">It is hello responsibility of hello client application tooserialize .NET objects before placing them into hello cache, with hello choice of hello serializer up toohello client application developer.</span></span> <span data-ttu-id="81c37-168">Para obter mais informações e exemplo de código, consulte [trabalhar com objetos .NET no cache de saudação](cache-dotnet-how-to-use-azure-redis-cache.md#work-with-net-objects-in-the-cache).</span><span class="sxs-lookup"><span data-stu-id="81c37-168">For more information and sample code, see [Work with .NET objects in hello cache](cache-dotnet-how-to-use-azure-redis-cache.md#work-with-net-objects-in-the-cache).</span></span> |
| <span data-ttu-id="81c37-169">Emulador de cache</span><span class="sxs-lookup"><span data-stu-id="81c37-169">Cache emulator</span></span> |<span data-ttu-id="81c37-170">O Cache Gerenciado fornece um emulador de cache local.</span><span class="sxs-lookup"><span data-stu-id="81c37-170">Managed Cache provides a local cache emulator.</span></span> |<span data-ttu-id="81c37-171">Cache Redis do Azure não tem um emulador, mas você pode [executados localmente o build de MSOpenTech de saudação do redis server.exe](cache-faq.md#cache-emulator) tooprovide uma experiência de emulador.</span><span class="sxs-lookup"><span data-stu-id="81c37-171">Azure Redis Cache does not have an emulator, but you can [run hello MSOpenTech build of redis-server.exe locally](cache-faq.md#cache-emulator) tooprovide an emulator experience.</span></span> |

## <a name="choose-a-cache-offering"></a><span data-ttu-id="81c37-172">Escolher uma oferta de Cache</span><span class="sxs-lookup"><span data-stu-id="81c37-172">Choose a Cache Offering</span></span>
<span data-ttu-id="81c37-173">Cache Redis do Microsoft Azure está disponível em Olá níveis a seguir:</span><span class="sxs-lookup"><span data-stu-id="81c37-173">Microsoft Azure Redis Cache is available in hello following tiers:</span></span>

* <span data-ttu-id="81c37-174">**Básico** – um único nó.</span><span class="sxs-lookup"><span data-stu-id="81c37-174">**Basic** – Single node.</span></span> <span data-ttu-id="81c37-175">Vários tamanhos de backup too53 GB.</span><span class="sxs-lookup"><span data-stu-id="81c37-175">Multiple sizes up too53 GB.</span></span>
* <span data-ttu-id="81c37-176">**Standard** – principal/réplica com dois nós.</span><span class="sxs-lookup"><span data-stu-id="81c37-176">**Standard** – Two-node Primary/Replica.</span></span> <span data-ttu-id="81c37-177">Vários tamanhos de backup too53 GB.</span><span class="sxs-lookup"><span data-stu-id="81c37-177">Multiple sizes up too53 GB.</span></span> <span data-ttu-id="81c37-178">SLA de 99,9%.</span><span class="sxs-lookup"><span data-stu-id="81c37-178">99.9% SLA.</span></span>
* <span data-ttu-id="81c37-179">**Premium** – dois nós primário/réplica, com backup too10 fragmentos.</span><span class="sxs-lookup"><span data-stu-id="81c37-179">**Premium** – Two-node Primary/Replica with up too10 shards.</span></span> <span data-ttu-id="81c37-180">Vários tamanhos de 6 GB too530 GB.</span><span class="sxs-lookup"><span data-stu-id="81c37-180">Multiple sizes from 6 GB too530 GB.</span></span> <span data-ttu-id="81c37-181">Todos os recursos do tipo Standard e outros, incluindo suporte para [cluster Redis](cache-how-to-premium-clustering.md), [persistência Redis](cache-how-to-premium-persistence.md) e [Rede Virtual do Azure](cache-how-to-premium-vnet.md).</span><span class="sxs-lookup"><span data-stu-id="81c37-181">All Standard tier features and more including support for [Redis cluster](cache-how-to-premium-clustering.md), [Redis persistence](cache-how-to-premium-persistence.md), and [Azure Virtual Network](cache-how-to-premium-vnet.md).</span></span> <span data-ttu-id="81c37-182">SLA de 99,9%.</span><span class="sxs-lookup"><span data-stu-id="81c37-182">99.9% SLA.</span></span>

<span data-ttu-id="81c37-183">Cada camada é diferente em termos de recursos e preços.</span><span class="sxs-lookup"><span data-stu-id="81c37-183">Each tier differs in terms of features and pricing.</span></span> <span data-ttu-id="81c37-184">Olá recursos são abordados posteriormente neste guia e para obter mais informações sobre preços, consulte [detalhes de preços de Cache](https://azure.microsoft.com/pricing/details/cache/).</span><span class="sxs-lookup"><span data-stu-id="81c37-184">hello features are covered later in this guide, and for more information on pricing, see [Cache Pricing Details](https://azure.microsoft.com/pricing/details/cache/).</span></span>

<span data-ttu-id="81c37-185">Um ponto de partida para a migração é toopick Olá tamanho que coincida com tamanho de saudação do seu cache anterior do serviço de Cache gerenciado e, em seguida, expandir ou reduzir, dependendo dos requisitos de saudação do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="81c37-185">A starting point for migration is toopick hello size that matches hello size of your previous Managed Cache Service cache, and then scale up or down depending on hello requirements of your application.</span></span> <span data-ttu-id="81c37-186">Para obter instruções sobre como escolher a oferta certa de Cache Redis do Azure hello, consulte [qual oferta de Cache do Redis e tamanho devo usar?](cache-faq.md#what-redis-cache-offering-and-size-should-i-use).</span><span class="sxs-lookup"><span data-stu-id="81c37-186">For more guidance on choosing hello right Azure Redis Cache offering, see [What Redis Cache offering and size should I use?](cache-faq.md#what-redis-cache-offering-and-size-should-i-use).</span></span>

## <a name="create-a-cache"></a><span data-ttu-id="81c37-187">Criar um Cache</span><span class="sxs-lookup"><span data-stu-id="81c37-187">Create a Cache</span></span>
[!INCLUDE [redis-cache-create](../../includes/redis-cache-create.md)]

## <a name="configure-hello-cache-clients"></a><span data-ttu-id="81c37-188">Configurar clientes de Cache Olá</span><span class="sxs-lookup"><span data-stu-id="81c37-188">Configure hello Cache Clients</span></span>
<span data-ttu-id="81c37-189">Depois que o cache de saudação é criada e configurada, Olá próxima etapa é a configuração de serviço de Cache gerenciado do tooremove Olá e adicionar Olá Adicionar configuração de Cache Redis do Azure hello e referências para que os clientes de cache possam acessar o cache de saudação.</span><span class="sxs-lookup"><span data-stu-id="81c37-189">Once hello cache is created and configured, hello next step is tooremove hello Managed Cache Service configuration, and add hello add hello Azure Redis Cache configuration and references so that cache clients can access hello cache.</span></span>

* <span data-ttu-id="81c37-190">Remover configuração de serviço de Cache gerenciado do hello</span><span class="sxs-lookup"><span data-stu-id="81c37-190">Remove hello Managed Cache Service Configuration</span></span>
* <span data-ttu-id="81c37-191">Configurar um cliente de cache usando Olá pacote do NuGet stackexchange. Redis</span><span class="sxs-lookup"><span data-stu-id="81c37-191">Configure a cache client using hello StackExchange.Redis NuGet Package</span></span>

### <a name="remove-hello-managed-cache-service-configuration"></a><span data-ttu-id="81c37-192">Remover configuração de serviço de Cache gerenciado do hello</span><span class="sxs-lookup"><span data-stu-id="81c37-192">Remove hello Managed Cache Service Configuration</span></span>
<span data-ttu-id="81c37-193">Para Olá aplicativos cliente possam ser configurados para Cache Redis do Azure, configuração de serviço de Cache gerenciado existente hello e referências de assembly devem ser removidas Desinstalando o pacote do NuGet do serviço de Cache gerenciado hello.</span><span class="sxs-lookup"><span data-stu-id="81c37-193">Before hello client applications can be configured for Azure Redis Cache, hello existing Managed Cache Service configuration and assembly references must be removed by uninstalling hello Managed Cache Service NuGet package.</span></span>

<span data-ttu-id="81c37-194">Olá toouninstall pacote NuGet do serviço de Cache gerenciado, clique com botão direito Olá cliente em **Solution Explorer** e escolha **gerenciar pacotes NuGet**.</span><span class="sxs-lookup"><span data-stu-id="81c37-194">toouninstall hello Managed Cache Service NuGet package, right-click hello client project in **Solution Explorer** and choose **Manage NuGet Packages**.</span></span> <span data-ttu-id="81c37-195">Selecione Olá **pacotes instalados** nó e tipo W**indowsAzure.Caching** em Olá pesquisa instalado caixa pacotes.</span><span class="sxs-lookup"><span data-stu-id="81c37-195">Select hello **Installed packages** node, and type W**indowsAzure.Caching** into hello Search installed packages box.</span></span> <span data-ttu-id="81c37-196">Selecione **Windows** **Cache do Azure** (ou **Windows** **cache do Azure** dependendo da versão de saudação do pacote do NuGet Olá), clique em  **Desinstalar**e, em seguida, clique em **fechar**.</span><span class="sxs-lookup"><span data-stu-id="81c37-196">Select **Windows** **Azure Cache** (or **Windows** **Azure Caching** depending on hello version of hello NuGet package), click **Uninstall**, and then click **Close**.</span></span>

![Desinstalar o pacote NuGet do Serviço de Cache Gerenciado do Azure](./media/cache-migrate-to-redis/IC757666.jpg)

<span data-ttu-id="81c37-198">Desinstalar pacote de NuGet de serviço de Cache gerenciado Olá remove assemblies do serviço de Cache gerenciado hello e entradas do serviço de Cache gerenciado Olá Olá App. config ou Web. config do aplicativo de cliente hello.</span><span class="sxs-lookup"><span data-stu-id="81c37-198">Uninstalling hello Managed Cache Service NuGet package removes hello Managed Cache Service assemblies and hello Managed Cache Service entries in hello app.config or web.config of hello client application.</span></span> <span data-ttu-id="81c37-199">Como algumas configurações personalizadas não podem ser removidas quando você desinstala o pacote do NuGet hello, abra Web. config ou App. config e certifique-se de que Olá elementos a seguir foram completamente removidos.</span><span class="sxs-lookup"><span data-stu-id="81c37-199">Because some customized settings may not be removed when uninstalling hello NuGet package, open web.config or app.config and ensure that hello following elements are completely removed.</span></span>

<span data-ttu-id="81c37-200">Certifique-se de que Olá `dataCacheClients` entrada será removida da saudação `configSections` elemento.</span><span class="sxs-lookup"><span data-stu-id="81c37-200">Ensure that hello `dataCacheClients` entry is removed from hello `configSections` element.</span></span> <span data-ttu-id="81c37-201">Não remova todo Olá `configSections` elemento; basta remover Olá `dataCacheClients` entrada, se estiver presente.</span><span class="sxs-lookup"><span data-stu-id="81c37-201">Do not remove hello entire `configSections` element; just remove hello `dataCacheClients` entry, if it is present.</span></span>

```xml
<configSections>
  <!-- Existing sections omitted for clarity. -->
  <section name="dataCacheClients"type="Microsoft.ApplicationServer.Caching.DataCacheClientsSection, Microsoft.ApplicationServer.Caching.Core" allowLocation="true" allowDefinition="Everywhere"/>
</configSections>
```

<span data-ttu-id="81c37-202">Certifique-se de que Olá `dataCacheClients` seção é removida.</span><span class="sxs-lookup"><span data-stu-id="81c37-202">Ensure that hello `dataCacheClients` section is removed.</span></span> <span data-ttu-id="81c37-203">Olá `dataCacheClients` seção será semelhante toohello exemplo a seguir.</span><span class="sxs-lookup"><span data-stu-id="81c37-203">hello `dataCacheClients` section will be similar toohello following example.</span></span>

```xml
<dataCacheClients>
  <dataCacheClientname="default">
    <!--toouse hello in-role flavor of Azure Cache, set identifier toobe hello cache cluster role name -->
    <!--toouse hello Azure Managed Cache Service, set identifier toobe hello endpoint of hello cache cluster -->
    <autoDiscoverisEnabled="true"identifier="[Cache role name or Service Endpoint]"/>

    <!--<localCache isEnabled="true" sync="TimeoutBased" objectCount="100000" ttlValue="300" />-->
    <!--Use this section toospecify security settings for connecting tooyour cache. This section is not required if your cache is hosted on a role that is a part of your cloud service. -->
    <!--<securityProperties mode="Message" sslEnabled="true">
      <messageSecurity authorizationInfo="[Authentication Key]" />
    </securityProperties>-->
  </dataCacheClient>
</dataCacheClients>
```

<span data-ttu-id="81c37-204">Depois que a configuração do serviço de Cache gerenciado Olá for removida, você pode configurar o cliente de cache Olá conforme descrito em Olá seção a seguir.</span><span class="sxs-lookup"><span data-stu-id="81c37-204">Once hello Managed Cache Service configuration is removed, you can configure hello cache client as described in hello following section.</span></span>

### <a name="configure-a-cache-client-using-hello-stackexchangeredis-nuget-package"></a><span data-ttu-id="81c37-205">Configurar um cliente de cache usando Olá pacote do NuGet stackexchange. Redis</span><span class="sxs-lookup"><span data-stu-id="81c37-205">Configure a cache client using hello StackExchange.Redis NuGet Package</span></span>
[!INCLUDE [redis-cache-configure](../../includes/redis-cache-configure-stackexchange-redis-nuget.md)]

## <a name="migrate-managed-cache-service-code"></a><span data-ttu-id="81c37-206">Migrar o código do Serviço de Cache Gerenciado</span><span class="sxs-lookup"><span data-stu-id="81c37-206">Migrate Managed Cache Service code</span></span>
<span data-ttu-id="81c37-207">Olá API cliente de cache Stackexchange Olá é semelhante toohello serviço de Cache gerenciado.</span><span class="sxs-lookup"><span data-stu-id="81c37-207">hello API for hello StackExchange.Redis cache client is similar toohello Managed Cache Service.</span></span> <span data-ttu-id="81c37-208">Esta seção fornece uma visão geral das diferenças de saudação.</span><span class="sxs-lookup"><span data-stu-id="81c37-208">This section provides an overview of hello differences.</span></span>

### <a name="connect-toohello-cache-using-hello-connectionmultiplexer-class"></a><span data-ttu-id="81c37-209">Conecte-se usando a classe ConnectionMultiplexer de saudação do cache de toohello</span><span class="sxs-lookup"><span data-stu-id="81c37-209">Connect toohello cache using hello ConnectionMultiplexer class</span></span>
<span data-ttu-id="81c37-210">No serviço de Cache gerenciado, o cache de toohello conexões foram manipuladas pelo Olá `DataCacheFactory` e `DataCache` classes.</span><span class="sxs-lookup"><span data-stu-id="81c37-210">In Managed Cache Service, connections toohello cache were handled by hello `DataCacheFactory` and `DataCache` classes.</span></span> <span data-ttu-id="81c37-211">No Cache Redis do Azure, essas conexões são gerenciadas pelo Olá `ConnectionMultiplexer` classe.</span><span class="sxs-lookup"><span data-stu-id="81c37-211">In Azure Redis Cache, these connections are managed by hello `ConnectionMultiplexer` class.</span></span>

<span data-ttu-id="81c37-212">Adicione o seguinte Olá usando a instrução toohello superior de qualquer arquivo do qual você deseja tooaccess Olá cache.</span><span class="sxs-lookup"><span data-stu-id="81c37-212">Add hello following using statement toohello top of any file from which you want tooaccess hello cache.</span></span>

```c#
using StackExchange.Redis
```

<span data-ttu-id="81c37-213">Se esse namespace não for resolvido, certifique-se de que você adicionou Olá pacote NuGet Stackexchange conforme descrito em [configurar clientes de cache Olá](cache-dotnet-how-to-use-azure-redis-cache.md#configure-the-cache-clients).</span><span class="sxs-lookup"><span data-stu-id="81c37-213">If this namespace doesn’t resolve, be sure that you have added hello StackExchange.Redis NuGet package as described in [Configure hello cache clients](cache-dotnet-how-to-use-azure-redis-cache.md#configure-the-cache-clients).</span></span>

> [!NOTE]
> <span data-ttu-id="81c37-214">Observe que o cliente Stackexchange Olá requer o .NET Framework 4 ou superior.</span><span class="sxs-lookup"><span data-stu-id="81c37-214">Note that hello StackExchange.Redis client requires .NET Framework 4 or higher.</span></span>
> 
> 

<span data-ttu-id="81c37-215">instância de Cache Redis do Azure tooan tooconnect, chamada hello estático `ConnectionMultiplexer.Connect` método e passar no ponto de extremidade de saudação e a chave.</span><span class="sxs-lookup"><span data-stu-id="81c37-215">tooconnect tooan Azure Redis Cache instance, call hello static `ConnectionMultiplexer.Connect` method and pass in hello endpoint and key.</span></span> <span data-ttu-id="81c37-216">Uma abordagem toosharing um `ConnectionMultiplexer` instância em seu aplicativo é toohave uma propriedade estática que retorna uma instância conectada, semelhante toohello exemplo a seguir.</span><span class="sxs-lookup"><span data-stu-id="81c37-216">One approach toosharing a `ConnectionMultiplexer` instance in your application is toohave a static property that returns a connected instance, similar toohello following example.</span></span> <span data-ttu-id="81c37-217">Isso fornece uma forma thread-safe tooinitialize apenas um único conectado `ConnectionMultiplexer` instância.</span><span class="sxs-lookup"><span data-stu-id="81c37-217">This provides a thread-safe way tooinitialize only a single connected `ConnectionMultiplexer` instance.</span></span> <span data-ttu-id="81c37-218">Neste exemplo `abortConnect` é toofalse de conjunto, o que significa que a chamada de saudação será bem-sucedida mesmo se um cache de toohello de conexão não for estabelecido.</span><span class="sxs-lookup"><span data-stu-id="81c37-218">In this example `abortConnect` is set toofalse, which means that hello call will succeed even if a connection toohello cache is not established.</span></span> <span data-ttu-id="81c37-219">Um recurso importante do `ConnectionMultiplexer` é que ele automaticamente restaura a cache de toohello conectividade depois que o problema de rede hello ou outras causas são resolvidas.</span><span class="sxs-lookup"><span data-stu-id="81c37-219">One key feature of `ConnectionMultiplexer` is that it will automatically restore connectivity toohello cache once hello network issue or other causes are resolved.</span></span>

```c#
private static Lazy<ConnectionMultiplexer> lazyConnection = new Lazy<ConnectionMultiplexer>(() =>
{
    return ConnectionMultiplexer.Connect("contoso5.redis.cache.windows.net,abortConnect=false,ssl=true,password=...");
});

public static ConnectionMultiplexer Connection
{
    get
    {
        return lazyConnection.Value;
    }
}
```

<span data-ttu-id="81c37-220">Olá portas, chaves e ponto de extremidade do cache podem ser obtidas Olá **Redis Cache** folha para a instância de cache.</span><span class="sxs-lookup"><span data-stu-id="81c37-220">hello cache endpoint, keys, and ports can be obtained from hello **Redis Cache** blade for your cache instance.</span></span> <span data-ttu-id="81c37-221">Para obter mais informações, consulte as [Propriedades do Cache Redis](cache-configure.md#properties).</span><span class="sxs-lookup"><span data-stu-id="81c37-221">For more information, see [Redis Cache properties](cache-configure.md#properties).</span></span>

<span data-ttu-id="81c37-222">Após o estabelecimento de conexão hello, retornar um banco de dados referência toohello Redis cache por chamada hello `ConnectionMultiplexer.GetDatabase` método.</span><span class="sxs-lookup"><span data-stu-id="81c37-222">Once hello connection is established, return a reference toohello Redis cache database by calling hello `ConnectionMultiplexer.GetDatabase` method.</span></span> <span data-ttu-id="81c37-223">objeto Olá retornado de saudação `GetDatabase` método é um objeto de passagem leve e não precisa toobe armazenado.</span><span class="sxs-lookup"><span data-stu-id="81c37-223">hello object returned from hello `GetDatabase` method is a lightweight pass-through object and does not need toobe stored.</span></span>

```c#
IDatabase cache = Connection.GetDatabase();

// Perform cache operations using hello cache object...
// Simple put of integral data types into hello cache
cache.StringSet("key1", "value");
cache.StringSet("key2", 25);

// Simple get of data types from hello cache
string key1 = cache.StringGet("key1");
int key2 = (int)cache.StringGet("key2");
```

<span data-ttu-id="81c37-224">cliente de Stackexchange Olá usa Olá `RedisKey` e `RedisValue` tipos para acessar e armazenar itens no cache de saudação.</span><span class="sxs-lookup"><span data-stu-id="81c37-224">hello StackExchange.Redis client uses hello `RedisKey` and `RedisValue` types for accessing and storing items in hello cache.</span></span> <span data-ttu-id="81c37-225">Esses tipos mapeiam para tipos de linguagem mais primitivos, incluindo a cadeia de caracteres e geralmente não são usados diretamente.</span><span class="sxs-lookup"><span data-stu-id="81c37-225">These types map onto most primitive language types, including string, and often are not used directly.</span></span> <span data-ttu-id="81c37-226">Redis cadeias de caracteres são o tipo mais básico de saudação do valor do Redis e podem conter muitos tipos de dados, incluindo fluxos de binários serializados e enquanto você não pode usar o tipo de saudação diretamente, você usará métodos que contêm `String` em nome de saudação.</span><span class="sxs-lookup"><span data-stu-id="81c37-226">Redis Strings are hello most basic kind of Redis value, and can contain many types of data, including serialized binary streams, and while you may not use hello type directly, you will use methods that contain `String` in hello name.</span></span> <span data-ttu-id="81c37-227">Para tipos de dados primitivos mais você pode armazenar e recuperar itens do cache de saudação usando Olá `StringSet` e `StringGet` métodos, a menos que você está armazenando coleções ou outros tipos de dados Redis no cache de saudação.</span><span class="sxs-lookup"><span data-stu-id="81c37-227">For most primitive data types you store and retrieve items from hello cache using hello `StringSet` and `StringGet` methods, unless you are storing collections or other Redis data types in hello cache.</span></span> 

<span data-ttu-id="81c37-228">`StringSet`e `StringGet` são muito semelhante toohello serviço de Cache gerenciado `Put` e `Get` métodos, com uma grande diferença de que antes de definir e obter um objeto .NET no cache de saudação necessário serializá-lo primeiro.</span><span class="sxs-lookup"><span data-stu-id="81c37-228">`StringSet` and `StringGet` are very similar toohello Managed Cache Service `Put` and `Get` methods, with one major difference being that before you set and get a .NET object into hello cache you must serialize it first.</span></span> 

<span data-ttu-id="81c37-229">Ao chamar `StringGet`, se o objeto de saudação existir, ele é retornado e se não estiver, null será retornado.</span><span class="sxs-lookup"><span data-stu-id="81c37-229">When calling `StringGet`, if hello object exists, it is returned, and if it does not, null is returned.</span></span> <span data-ttu-id="81c37-230">Nesse caso, você pode recuperar o valor de Olá Olá desejado da fonte de dados e armazená-la no cache de saudação para uso posterior.</span><span class="sxs-lookup"><span data-stu-id="81c37-230">In this case you can retrieve hello value from hello desired data source and store it in hello cache for subsequent use.</span></span> <span data-ttu-id="81c37-231">Isso é conhecido como padrão de cache-aside hello.</span><span class="sxs-lookup"><span data-stu-id="81c37-231">This is known as hello cache-aside pattern.</span></span>

<span data-ttu-id="81c37-232">expiração de saudação toospecify de um item no cache de hello, use Olá `TimeSpan` parâmetro `StringSet`.</span><span class="sxs-lookup"><span data-stu-id="81c37-232">toospecify hello expiration of an item in hello cache, use hello `TimeSpan` parameter of `StringSet`.</span></span>

```c#
cache.StringSet("key1", "value1", TimeSpan.FromMinutes(90));
```

<span data-ttu-id="81c37-233">O Cache Redis do Azure pode trabalhar com objetos .NET, bem como tipos de dados primitivos, mas antes que um objeto .NET possa ser armazenado em cache, ele deve ser serializado.</span><span class="sxs-lookup"><span data-stu-id="81c37-233">Azure Redis Cache can work with .NET objects as well as primitive data types, but before a .NET object can be cached it must be serialized.</span></span> <span data-ttu-id="81c37-234">Isso é responsabilidade de saudação do desenvolvedor do aplicativo hello.</span><span class="sxs-lookup"><span data-stu-id="81c37-234">This is hello responsibility of hello application developer.</span></span> <span data-ttu-id="81c37-235">Isso fornece flexibilidade de desenvolvedor de saudação na escolha de saudação do serializador hello.</span><span class="sxs-lookup"><span data-stu-id="81c37-235">This gives hello developer flexibility in hello choice of hello serializer.</span></span> <span data-ttu-id="81c37-236">Para obter mais informações e exemplo de código, consulte [trabalhar com objetos .NET no cache de saudação](cache-dotnet-how-to-use-azure-redis-cache.md#work-with-net-objects-in-the-cache).</span><span class="sxs-lookup"><span data-stu-id="81c37-236">For more information and sample code, see [Work with .NET objects in hello cache](cache-dotnet-how-to-use-azure-redis-cache.md#work-with-net-objects-in-the-cache).</span></span>

## <a name="migrate-aspnet-session-state-and-output-caching-tooazure-redis-cache"></a><span data-ttu-id="81c37-237">Migrar o estado da sessão ASP.NET e cache tooAzure Redis Cache de saída</span><span class="sxs-lookup"><span data-stu-id="81c37-237">Migrate ASP.NET Session State and Output caching tooAzure Redis Cache</span></span>
<span data-ttu-id="81c37-238">O Cache Redis do Azure possui provedores de Estado da Sessão ASP.NET e o caching de Saída de Página.</span><span class="sxs-lookup"><span data-stu-id="81c37-238">Azure Redis Cache has providers for both ASP.NET Session State and Page Output caching.</span></span> <span data-ttu-id="81c37-239">toomigrate seu aplicativo que usa versões do serviço de Cache gerenciado Olá desses provedores, primeiro remova Olá seções existentes do Web. config e, em seguida, configurar versões do Cache Redis do Azure de saudação dos provedores de saudação.</span><span class="sxs-lookup"><span data-stu-id="81c37-239">toomigrate your application that uses hello Managed Cache Service versions of these providers, first remove hello existing sections from your web.config, and then configure hello Azure Redis Cache versions of hello providers.</span></span> <span data-ttu-id="81c37-240">Para obter instruções sobre como usar o hello provedores ASP.NET de Cache Redis do Azure, consulte [provedor de estado de sessão do ASP.NET para Cache Redis do Azure](cache-aspnet-session-state-provider.md) e [provedor de Cache de saída do ASP.NET para Cache Redis do Azure](cache-aspnet-output-cache-provider.md).</span><span class="sxs-lookup"><span data-stu-id="81c37-240">For instructions on using hello Azure Redis Cache ASP.NET providers, see [ASP.NET Session State Provider for Azure Redis Cache](cache-aspnet-session-state-provider.md) and [ASP.NET Output Cache Provider for Azure Redis Cache](cache-aspnet-output-cache-provider.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="81c37-241">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="81c37-241">Next steps</span></span>
<span data-ttu-id="81c37-242">Explorar Olá [documentação do Cache Redis do Azure](https://azure.microsoft.com/documentation/services/cache/) tutoriais, exemplos, vídeos e muito mais.</span><span class="sxs-lookup"><span data-stu-id="81c37-242">Explore hello [Azure Redis Cache documentation](https://azure.microsoft.com/documentation/services/cache/) for tutorials, samples, videos, and more.</span></span>

