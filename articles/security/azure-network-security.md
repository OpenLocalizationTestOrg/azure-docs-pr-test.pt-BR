---
title: "Segurança de Rede do Azure | Microsoft Docs"
description: "Aprenda sobre os serviços de computação baseados em nuvem que incluem uma ampla seleção de instâncias e serviços de computação, os quais podem ser escalados verticalmente de forma automática para atender às necessidades de seu aplicativo ou empresa."
services: security
documentationcenter: na
author: UnifyCloud
manager: swadhwa
editor: TomSh
ms.assetid: 
ms.service: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 05/24/2017
ms.author: TomSh
ms.openlocfilehash: 6ab59dd02391287a1effc0b51502bb7eb90db319
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/18/2017
---
# <a name="azure-network-security"></a><span data-ttu-id="f427e-103">Segurança de rede do Azure</span><span class="sxs-lookup"><span data-stu-id="f427e-103">Azure network security</span></span>

<span data-ttu-id="f427e-104">Sabemos que a segurança é o primeiro trabalho na nuvem e o quanto é importante que você encontre informações precisas e atualizadas sobre a segurança do Azure.</span><span class="sxs-lookup"><span data-stu-id="f427e-104">We know that security is job one in the cloud and how important it is that you find accurate and timely information about Azure security.</span></span> <span data-ttu-id="f427e-105">Uma das melhores razões para usar o Azure para seus aplicativos e serviços é aproveitar sua ampla matriz de ferramentas e recursos de segurança.</span><span class="sxs-lookup"><span data-stu-id="f427e-105">One of the best reasons to use Azure for your applications and services is to take advantage of Azure’s wide array of security tools and capabilities.</span></span> <span data-ttu-id="f427e-106">Essas ferramentas e recursos ajudam a tornar possível criar soluções seguras na plataforma do Azure.</span><span class="sxs-lookup"><span data-stu-id="f427e-106">These tools and capabilities help make it possible to create secure solutions on the Azure platform.</span></span>

<span data-ttu-id="f427e-107">O Microsoft Azure fornece confidencialidade, integridade e disponibilidade dos dados do cliente, ao mesmo tempo que também permite uma responsabilidade transparente.</span><span class="sxs-lookup"><span data-stu-id="f427e-107">Microsoft Azure provides confidentiality, integrity, and availability of customer data, while also enabling transparent accountability.</span></span> <span data-ttu-id="f427e-108">Para ajudar você a entender melhor a coleção de controles de segurança de rede implementada no Microsoft Azure da perspectiva do cliente, este artigo, "Segurança de Rede do Azure", foi escrito para fornecer uma visão abrangente dos controles de segurança de rede disponíveis com o Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="f427e-108">To help you better understand the collection of network security controls implemented within Microsoft Azure from the customer's perspective, this article, “Azure Network Security", is written to provide a comprehensive look at the network security controls available with Microsoft Azure.</span></span>

<span data-ttu-id="f427e-109">Este artigo é destinado a lhe informar sobre uma ampla variedade de controles de rede que você pode configurar para aumentar a segurança das soluções que você implanta no Azure.</span><span class="sxs-lookup"><span data-stu-id="f427e-109">This paper is intended to inform you about the wide range of network controls that you can configure to enhance the security of the solutions you deploy in Azure.</span></span> <span data-ttu-id="f427e-110">Se você estiver interessado em saber o que a Microsoft faz para proteger a malha de rede da plataforma Azure em si, consulte a seção segurança do Azure no [Microsoft Trust Center](https://www.microsoft.com/trustcenter/security/azure-security).</span><span class="sxs-lookup"><span data-stu-id="f427e-110">If you are interested in what Microsoft does to secure the network fabric of the Azure platform itself,  see the Azure security section in the [Microsoft Trust Center](https://www.microsoft.com/trustcenter/security/azure-security).</span></span>

## <a name="azure-platform"></a><span data-ttu-id="f427e-111">Plataforma do Azure</span><span class="sxs-lookup"><span data-stu-id="f427e-111">Azure platform</span></span>

<span data-ttu-id="f427e-112">O Azure é uma plataforma de serviço de nuvem pública que dá suporte a uma ampla seleção de sistemas operacionais, linguagens de programação, estruturas, ferramentas, bancos de dados e dispositivos.</span><span class="sxs-lookup"><span data-stu-id="f427e-112">Azure is a public cloud service platform that supports a broad selection of operating systems, programming languages, frameworks, tools, databases, and devices.</span></span>  <span data-ttu-id="f427e-113">Ele pode executar contêineres do Linux com a integração com o Docker, criar aplicativos com JavaScript, Python, .NET, PHP, Java e Node.js e criar back-ends para dispositivos iOS, Android e Windows.</span><span class="sxs-lookup"><span data-stu-id="f427e-113">It can run Linux containers with Docker integration; build apps with JavaScript, Python, .NET, PHP, Java, and Node.js; build back-ends for iOS, Android, and Windows devices.</span></span> <span data-ttu-id="f427e-114">Os serviços de nuvem do Azure dão suporte às mesmas tecnologias com as quais milhões de desenvolvedores e profissionais de TI já contam e nas quais confiam.</span><span class="sxs-lookup"><span data-stu-id="f427e-114">Azure cloud services support the same technologies millions of developers and IT professionals already rely on and trust.</span></span>

<span data-ttu-id="f427e-115">Ao se basear ou migrar ativos de TI para um provedor de serviços de nuvem pública, você está confiando na capacidade dessa organização de proteger seus aplicativos e dados com os serviços e os controles que ela oferece para gerenciar a segurança de seus ativos baseados em nuvem.</span><span class="sxs-lookup"><span data-stu-id="f427e-115">When you build on, or migrate IT assets to, a public cloud service provider, you are relying on that organization’s abilities to protect your applications and data with the services and the controls they provide to manage the security of your cloud-based assets.</span></span>

<span data-ttu-id="f427e-116">A infraestrutura do Azure foi projetada desde a instalação até os aplicativos para hospedar milhões de clientes simultaneamente e fornece uma base confiável com a qual as empresas podem atender aos seus requisitos de segurança.</span><span class="sxs-lookup"><span data-stu-id="f427e-116">Azure’s infrastructure is designed from the facility to applications for hosting millions of customers simultaneously, and it provides a trustworthy foundation upon which businesses can meet their security requirements.</span></span> <span data-ttu-id="f427e-117">Além disso, o Azure oferece uma extensa coleção de opções de segurança configuráveis e a capacidade de controlá-las, de forma que você possa personalizar a segurança para atender aos requisitos exclusivos das implantações de sua organização.</span><span class="sxs-lookup"><span data-stu-id="f427e-117">In addition, Azure provides you with an extensive collection of configurable security options and the ability to control them so that you can customize security to meet the unique requirements of your organization’s deployments.</span></span>

## <a name="abstract"></a><span data-ttu-id="f427e-118">Resumo</span><span class="sxs-lookup"><span data-stu-id="f427e-118">Abstract</span></span>

<span data-ttu-id="f427e-119">Os serviços de nuvem pública da Microsoft entregam serviços e estrutura em larga escala, recursos de nível empresarial e várias opções de conectividade híbrida.</span><span class="sxs-lookup"><span data-stu-id="f427e-119">Microsoft public cloud services deliver hyper-scale services and infrastructure, enterprise-grade capabilities, and many choices for hybrid connectivity.</span></span> <span data-ttu-id="f427e-120">Você pode optar por acessar esses serviços através da Internet ou com o Azure ExpressRoute, que fornece conectividade de rede privada.</span><span class="sxs-lookup"><span data-stu-id="f427e-120">You can choose to access these services either via the Internet or with Azure ExpressRoute, which provides private network connectivity.</span></span> <span data-ttu-id="f427e-121">A plataforma Microsoft Azure permite que você estenda facilmente sua infraestrutura para a nuvem e criem arquiteturas com várias camadas.</span><span class="sxs-lookup"><span data-stu-id="f427e-121">The Microsoft Azure platform allows you to seamlessly extend your infrastructure into the cloud and build multi-tier architectures.</span></span> <span data-ttu-id="f427e-122">Além disso, terceiros podem habilitar recursos avançados oferecendo serviços de segurança e soluções de virtualização.</span><span class="sxs-lookup"><span data-stu-id="f427e-122">Additionally, third parties can enable enhanced capabilities by offering security services and virtual appliances.</span></span>

<span data-ttu-id="f427e-123">Os serviços de rede do Azure maximizam a flexibilidade, disponibilidade, resiliência, segurança e integridade por design.</span><span class="sxs-lookup"><span data-stu-id="f427e-123">Azure’s network services maximize flexibility, availability, resiliency, security, and integrity by design.</span></span> <span data-ttu-id="f427e-124">Este white paper fornece detalhes sobre as funções de rede do Azure e informações sobre como os clientes podem usar recursos de segurança nativos do Azure para ajudar a proteger seus ativos de informações.</span><span class="sxs-lookup"><span data-stu-id="f427e-124">This white paper provides details on the networking functions of Azure and information on how customers can use Azure’s native security features to help protect their information assets.</span></span>

<span data-ttu-id="f427e-125">Os públicos-alvo deste white paper incluem:</span><span class="sxs-lookup"><span data-stu-id="f427e-125">The intended audiences for this whitepaper include:</span></span>

- <span data-ttu-id="f427e-126">Gerentes técnicos, administradores de rede e desenvolvedores que estão procurando soluções de segurança disponíveis e com suporte no Azure.</span><span class="sxs-lookup"><span data-stu-id="f427e-126">Technical managers, network administrators, and developers who are looking for security solutions available and supported in Azure.</span></span>

-   <span data-ttu-id="f427e-127">SMEs ou executivos de processo de negócios que desejam obter uma visão geral de tecnologias de rede do Azure e serviços que são relevantes em discussões sobre segurança de rede na nuvem pública do Azure.</span><span class="sxs-lookup"><span data-stu-id="f427e-127">SMEs or business process executives who want to get a high-level overview the Azure networking technologies and services that are relevant in discussions around network security in the Azure public cloud.</span></span>

## <a name="azure-networking-big-picture"></a><span data-ttu-id="f427e-128">Visão geral de rede do Azure</span><span class="sxs-lookup"><span data-stu-id="f427e-128">Azure networking big picture</span></span>
<span data-ttu-id="f427e-129">O Microsoft Azure inclui uma infraestrutura de rede robusta para dar suporte a seus requisitos de conectividade de aplicativo e de serviço.</span><span class="sxs-lookup"><span data-stu-id="f427e-129">Microsoft Azure includes a robust networking infrastructure to support your application and service connectivity requirements.</span></span> <span data-ttu-id="f427e-130">A conectividade de rede é possível entre os recursos localizados no Azure, entre os recursos locais e aqueles hospedados no Azure e de origem e destino à Internet e ao Azure.</span><span class="sxs-lookup"><span data-stu-id="f427e-130">Network connectivity is possible between resources located in Azure, between on-premises and Azure hosted resources, and to and from the Internet and Azure.</span></span>

![Visão Geral de Rede do Azure](media/azure-network-security/azure-network-security-fig-1.png)

<span data-ttu-id="f427e-132">A [infraestrutura de rede do Azure](https://docs.microsoft.com/azure/virtual-machines/windows/infrastructure-networking-guidelines) permite que você conecte com segurança os recursos do Azure uns com os outros usando redes virtuais (VNets).</span><span class="sxs-lookup"><span data-stu-id="f427e-132">The [Azure network infrastructure](https://docs.microsoft.com/azure/virtual-machines/windows/infrastructure-networking-guidelines) enables you to securely connect Azure resources to each other with virtual networks (VNets).</span></span> <span data-ttu-id="f427e-133">Uma VNet é uma representação da sua própria rede na nuvem.</span><span class="sxs-lookup"><span data-stu-id="f427e-133">A VNet is a representation of your own network in the cloud.</span></span> <span data-ttu-id="f427e-134">Uma VNet é um isolamento lógico da rede de nuvem do Azure dedicada à sua assinatura.</span><span class="sxs-lookup"><span data-stu-id="f427e-134">A VNet is a logical isolation of the Azure cloud network dedicated to your subscription.</span></span> <span data-ttu-id="f427e-135">Você pode conectar VNets às suas redes locais.</span><span class="sxs-lookup"><span data-stu-id="f427e-135">You can connect VNets to your on-premises networks.</span></span>

<span data-ttu-id="f427e-136">O Azure dá suporte a conectividade do link WAN dedicado para sua rede local e a uma Rede Virtual do Azure com o [ExpressRoute](https://docs.microsoft.com/azure/expressroute/expressroute-introduction).</span><span class="sxs-lookup"><span data-stu-id="f427e-136">Azure supports dedicated WAN link connectivity to your on-premises network and an Azure Virtual Network with [ExpressRoute](https://docs.microsoft.com/azure/expressroute/expressroute-introduction).</span></span> <span data-ttu-id="f427e-137">O link entre o Azure e seu site utiliza uma conexão dedicada que não passa pela Internet pública.</span><span class="sxs-lookup"><span data-stu-id="f427e-137">The link between Azure and your site uses a dedicated connection that does not go over the public Internet.</span></span> <span data-ttu-id="f427e-138">Se seu aplicativo Azure estiver sendo executado em vários datacenters, você poderá usar o [Gerenciador de Tráfego do Azure](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-overview) para rotear solicitações de usuários de maneira inteligente entre as instâncias do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="f427e-138">If your Azure application is running in multiple datacenters, you can use [Azure Traffic Manager](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-overview) to route requests from users intelligently across instances of the application.</span></span> <span data-ttu-id="f427e-139">Você também pode rotear o tráfego para serviços que não estejam sendo executados no Azure, desde que possam ser acessados pela Internet.</span><span class="sxs-lookup"><span data-stu-id="f427e-139">You can also route traffic to services not running in Azure if they are accessible from the Internet.</span></span>

## <a name="enterprise-view-of-azure-networking-components"></a><span data-ttu-id="f427e-140">Exibição para empresa de componentes de rede do Azure</span><span class="sxs-lookup"><span data-stu-id="f427e-140">Enterprise view of Azure networking components</span></span>
<span data-ttu-id="f427e-141">O Azure tem muitos componentes de rede que são relevantes para discussões sobre segurança de rede.</span><span class="sxs-lookup"><span data-stu-id="f427e-141">Azure has many networking components that are relevant to network security discussions.</span></span> <span data-ttu-id="f427e-142">Descrevemos esses componentes de rede e nos concentramos nos problemas de segurança relacionados a eles.</span><span class="sxs-lookup"><span data-stu-id="f427e-142">we describe these networking components and focus on the security issues related to them.</span></span>

> [!Note]
> <span data-ttu-id="f427e-143">Nem todos os aspectos de rede do Azure são descritos – abordamos apenas aqueles considerados essenciais para planejar e projetar uma infraestrutura de rede segura em torno dos serviços e aplicativos que você implanta no Azure.</span><span class="sxs-lookup"><span data-stu-id="f427e-143">Not all aspects of Azure networking are described – we discuss only those considered to be pivotal in planning and designing a secure network infrastructure around your services and applications you deploy in Azure.</span></span>

<span data-ttu-id="f427e-144">Neste documento, abordaremos os seguintes recursos corporativos de rede do Azure:</span><span class="sxs-lookup"><span data-stu-id="f427e-144">In this paper, will be cover the following Azure networking enterprise capabilities:</span></span>

-   <span data-ttu-id="f427e-145">Conectividade de rede básica</span><span class="sxs-lookup"><span data-stu-id="f427e-145">Basic network connectivity</span></span>

-   <span data-ttu-id="f427e-146">Conectividade Híbrida</span><span class="sxs-lookup"><span data-stu-id="f427e-146">Hybrid Connectivity</span></span>

-   <span data-ttu-id="f427e-147">Controles de Segurança</span><span class="sxs-lookup"><span data-stu-id="f427e-147">Security Controls</span></span>

-   <span data-ttu-id="f427e-148">Validação de rede</span><span class="sxs-lookup"><span data-stu-id="f427e-148">Network Validation</span></span>

### <a name="basic-network-connectivity"></a><span data-ttu-id="f427e-149">Conectividade de rede básica</span><span class="sxs-lookup"><span data-stu-id="f427e-149">Basic network connectivity</span></span>

<span data-ttu-id="f427e-150">O serviço de [Rede Virtual do Azure](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview) permite que você conecte com segurança os recursos do Azure usando redes virtuais (VNets).</span><span class="sxs-lookup"><span data-stu-id="f427e-150">The [Azure Virtual Network](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview)  service enables you to securely connect Azure resources to each other with virtual networks (VNet).</span></span> <span data-ttu-id="f427e-151">Uma VNet é uma representação da sua própria rede na nuvem.</span><span class="sxs-lookup"><span data-stu-id="f427e-151">A VNet is a representation of your own network in the cloud.</span></span> <span data-ttu-id="f427e-152">Uma VNet é um isolamento lógico da infraestrutura de rede do Azure dedicada à sua assinatura.</span><span class="sxs-lookup"><span data-stu-id="f427e-152">A VNet is a logical isolation of the Azure network infrastructure dedicated to your subscription.</span></span> <span data-ttu-id="f427e-153">Você também pode se conectar VNets entre si e às suas redes locais usando VPNs site a site e dedicado [links WAN](https://docs.microsoft.com/azure/expressroute/expressroute-introduction).</span><span class="sxs-lookup"><span data-stu-id="f427e-153">You can also connect VNets to each other and to your on-premises networks using site-to-site VPNs￼ and dedicated [WAN links](https://docs.microsoft.com/azure/expressroute/expressroute-introduction).</span></span>

![Conectividade de rede básica](media/azure-network-security/azure-network-security-fig-2.png)

<span data-ttu-id="f427e-155">Com o entendimento de que você usar máquinas virtuais para hospedar servidores no Azure, a pergunta é como as VMs se conectam a uma rede.</span><span class="sxs-lookup"><span data-stu-id="f427e-155">With the understanding that you use VMs to host servers in Azure, the question is how those VMs connect to a network.</span></span> <span data-ttu-id="f427e-156">A resposta é que as VMs se conectam a uma [Rede Virtual do Azure](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview).</span><span class="sxs-lookup"><span data-stu-id="f427e-156">The answer is that VMs connect to an [Azure Virtual Network](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview).</span></span>

<span data-ttu-id="f427e-157">Redes Virtuais do Azure são como redes virtuais que você usa localmente com suas próprias soluções de plataforma de virtualização, como o Microsoft Hyper-V ou VMware.</span><span class="sxs-lookup"><span data-stu-id="f427e-157">Azure Virtual Networks are like the virtual networks you use on-premises with your own virtualization platform solutions, such as Microsoft Hyper-V or VMware.</span></span>

#### <a name="intra-vnet-connectivity"></a><span data-ttu-id="f427e-158">Conectividade entre VNets</span><span class="sxs-lookup"><span data-stu-id="f427e-158">Intra-VNet connectivity</span></span>

<span data-ttu-id="f427e-159">Você pode conectar as VNets entre si, permitindo que os recursos conectados a qualquer VNet se comuniquem entre si através das VNets.</span><span class="sxs-lookup"><span data-stu-id="f427e-159">You can connect VNets to each other, enabling resources connected to either VNet to communicate with each other across VNets.</span></span> <span data-ttu-id="f427e-160">Use uma ou as duas opções a seguir para conectar VNets entre si:</span><span class="sxs-lookup"><span data-stu-id="f427e-160">You can use either or both of the following options to connect VNets to each other:</span></span>

- <span data-ttu-id="f427e-161">**Emparelhamento:** permite que os recursos conectados a diferentes VNets do Azure no mesmo local do Azure se comuniquem entre si.</span><span class="sxs-lookup"><span data-stu-id="f427e-161">**Peering:** Enables resources connected to different Azure VNets within the same Azure location to communicate with each other.</span></span> <span data-ttu-id="f427e-162">A largura de banda e a latência entre as VNets são as mesmas que se os recursos estivessem conectados à mesma VNet.</span><span class="sxs-lookup"><span data-stu-id="f427e-162">The bandwidth and latency across the VNet is the same as if the resources were connected to the same VNet.</span></span> <span data-ttu-id="f427e-163">Para saber mais sobre emparelhamento, leia [Emparelhamento de rede virtual](https://docs.microsoft.com/azure/virtual-network/virtual-network-peering-overview).</span><span class="sxs-lookup"><span data-stu-id="f427e-163">To learn more about peering, read [Virtual network peering](https://docs.microsoft.com/azure/virtual-network/virtual-network-peering-overview).</span></span>

 ![Emparelhamento](media/azure-network-security/azure-network-security-fig-3.png)

- <span data-ttu-id="f427e-165">**Conexão de VNet para VNet:** permite recursos conectados a uma VNet do Azure diferente dentro dos mesmos locais ou em locais diferentes do Azure.</span><span class="sxs-lookup"><span data-stu-id="f427e-165">**VNet-to-VNet connection:** Enables resources connected to different Azure VNet within the same, or different Azure locations.</span></span> <span data-ttu-id="f427e-166">Ao contrário do emparelhamento, a largura de banda é limitada entre as VNets, pois o tráfego deve fluir por um Gateway de VPN do Azure.</span><span class="sxs-lookup"><span data-stu-id="f427e-166">Unlike peering, bandwidth is limited between VNets because traffic must flow through an Azure VPN Gateway.</span></span>

![Conexão de VNet para VNet](media/azure-network-security/azure-network-security-fig-4.png)


<span data-ttu-id="f427e-168">Para saber mais sobre como conectar VNets com uma conexão VNet para VNet, leia o [artigo Configurar uma conexão de VNet para VNet](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-howto-vnet-vnet-resource-manager-portal?toc=%2fazure%2fvirtual-network%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="f427e-168">To learn more about connecting VNets with a VNet-to-VNet connection, read the [Configure a VNet-to-VNet connection article](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-howto-vnet-vnet-resource-manager-portal?toc=%2fazure%2fvirtual-network%2ftoc.json).</span></span>

#### <a name="azure-virtual-network-capabilities"></a><span data-ttu-id="f427e-169">Recursos de rede virtual do Azure:</span><span class="sxs-lookup"><span data-stu-id="f427e-169">Azure virtual network capabilities:</span></span>

<span data-ttu-id="f427e-170">Como você pode ver, uma rede Virtual do Azure fornece máquinas virtuais para se conectar à rede para que elas possam se conectar a outros recursos de rede de forma segura.</span><span class="sxs-lookup"><span data-stu-id="f427e-170">As you can see, an Azure Virtual Network provides virtual machines to connect to the network so that they can connect to other network resources in a secure fashion.</span></span> <span data-ttu-id="f427e-171">No entanto, a conectividade básica é apenas o começo.</span><span class="sxs-lookup"><span data-stu-id="f427e-171">However, basic connectivity is just the beginning.</span></span> <span data-ttu-id="f427e-172">Os recursos do serviço de Rede Virtual do Azure a seguir expõem as características de segurança da Rede Virtual do Azure:</span><span class="sxs-lookup"><span data-stu-id="f427e-172">The following capabilities of the Azure Virtual Network service expose security characteristics of the Azure Virtual Network:</span></span>

-   <span data-ttu-id="f427e-173">Isolamento</span><span class="sxs-lookup"><span data-stu-id="f427e-173">Isolation</span></span>

-   <span data-ttu-id="f427e-174">Conectividade com a Internet</span><span class="sxs-lookup"><span data-stu-id="f427e-174">Internet connectivity</span></span>

-   <span data-ttu-id="f427e-175">Conectividade de recursos do Azure</span><span class="sxs-lookup"><span data-stu-id="f427e-175">Azure resource connectivity</span></span>

-   <span data-ttu-id="f427e-176">Conectividade de VNet</span><span class="sxs-lookup"><span data-stu-id="f427e-176">VNet connectivity</span></span>

-   <span data-ttu-id="f427e-177">Conectividade local</span><span class="sxs-lookup"><span data-stu-id="f427e-177">On-premises connectivity</span></span>

-   <span data-ttu-id="f427e-178">Filtragem de tráfego</span><span class="sxs-lookup"><span data-stu-id="f427e-178">Traffic filtering</span></span>

-   <span data-ttu-id="f427e-179">Roteamento</span><span class="sxs-lookup"><span data-stu-id="f427e-179">Routing</span></span>

<span data-ttu-id="f427e-180">**Isolamento**</span><span class="sxs-lookup"><span data-stu-id="f427e-180">**Isolation**</span></span>

<span data-ttu-id="f427e-181">As VNets são [isoladas](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview) umas das outras.</span><span class="sxs-lookup"><span data-stu-id="f427e-181">VNets are [isolated](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview) from one another.</span></span> <span data-ttu-id="f427e-182">Crie VNets separadas para desenvolvimento, teste e produção que usem os mesmos blocos de endereços [CIDR](https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing).</span><span class="sxs-lookup"><span data-stu-id="f427e-182">You can create separate VNets for development, testing, and production that use the same [CIDR](https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing) address blocks.</span></span> <span data-ttu-id="f427e-183">Por outro lado, você pode criar várias VNets que usam blocos de endereço CIDR diferentes e conectam as redes.</span><span class="sxs-lookup"><span data-stu-id="f427e-183">Conversely, you can create multiple VNets that use different CIDR address blocks and connect networks together.</span></span> <span data-ttu-id="f427e-184">Você pode segmentar uma VNet em várias sub-redes.</span><span class="sxs-lookup"><span data-stu-id="f427e-184">You can segment a VNet into multiple subnets.</span></span>

<span data-ttu-id="f427e-185">O Azure fornece resolução de nome interna para instâncias de função de VMs e [Serviços de Nuvem](https://azure.microsoft.com/services/cloud-services/) conectadas a uma VNet.</span><span class="sxs-lookup"><span data-stu-id="f427e-185">Azure provides internal name resolution for VMs and [Cloud Services](https://azure.microsoft.com/services/cloud-services/) role instances connected to a VNet.</span></span> <span data-ttu-id="f427e-186">Opcionalmente, configure uma VNet para usar seus próprios servidores DNS, em vez de usar a resolução de nome interna do Azure.</span><span class="sxs-lookup"><span data-stu-id="f427e-186">You can optionally configure a VNet to use your own DNS servers, instead of using Azure internal name resolution.</span></span>

<span data-ttu-id="f427e-187">É possível implementar várias VNets dentro de cada [assinatura](https://docs.microsoft.com/azure/azure-glossary-cloud-terminology?toc=%2fazure%2fvirtual-network%2ftoc.json) e [região](https://docs.microsoft.com/azure/azure-glossary-cloud-terminology?toc=%2fazure%2fvirtual-network%2ftoc.json) do Azure.</span><span class="sxs-lookup"><span data-stu-id="f427e-187">You can implement multiple VNets within each Azure [subscription](https://docs.microsoft.com/azure/azure-glossary-cloud-terminology?toc=%2fazure%2fvirtual-network%2ftoc.json) and Azure [region](https://docs.microsoft.com/azure/azure-glossary-cloud-terminology?toc=%2fazure%2fvirtual-network%2ftoc.json).</span></span> <span data-ttu-id="f427e-188">Cada VNet é isolada de outras VNets.</span><span class="sxs-lookup"><span data-stu-id="f427e-188">Each VNet is isolated from other VNets.</span></span> <span data-ttu-id="f427e-189">Para cada VNet, você pode:</span><span class="sxs-lookup"><span data-stu-id="f427e-189">For each VNet you can:</span></span>

-   <span data-ttu-id="f427e-190">Especificar um espaço de endereço IP privado personalizado usando endereços públicos e privados (RFC 1918).</span><span class="sxs-lookup"><span data-stu-id="f427e-190">Specify a custom private IP address space using public and private (RFC 1918) addresses.</span></span> <span data-ttu-id="f427e-191">O Azure atribui aos recursos conectados à VNet um endereço IP privado do espaço de endereço que você atribuiu.</span><span class="sxs-lookup"><span data-stu-id="f427e-191">Azure assigns resources connected to the VNet a private IP address from the address space, you assign.</span></span>

-   <span data-ttu-id="f427e-192">Segmentar a VNet em uma ou mais sub-redes e alocar uma parte do espaço de endereço da VNet a cada sub-rede.</span><span class="sxs-lookup"><span data-stu-id="f427e-192">Segment the VNet into one or more subnets and allocate a portion of the VNet address space to each subnet.</span></span>

-   <span data-ttu-id="f427e-193">Usar a resolução de nomes fornecida pelo Azure ou especificar seu próprio servidor DNS que será usado pelos recursos conectados a uma VNet.</span><span class="sxs-lookup"><span data-stu-id="f427e-193">Use Azure-provided name resolution or specify your own DNS server for use by resources connected to a VNet.</span></span> <span data-ttu-id="f427e-194">Para saber mais sobre a resolução de nome em uma VNet, leia [Resolução de nomes para VMs e Serviços de Nuvem](https://docs.microsoft.com/azure/virtual-network/virtual-networks-name-resolution-for-vms-and-role-instances).</span><span class="sxs-lookup"><span data-stu-id="f427e-194">To learn more about name resolution in VNets, read the [Name resolution for VMs and Cloud Services](https://docs.microsoft.com/azure/virtual-network/virtual-networks-name-resolution-for-vms-and-role-instances).</span></span>

<span data-ttu-id="f427e-195">**Conectividade com a Internet**</span><span class="sxs-lookup"><span data-stu-id="f427e-195">**Internet connectivity**</span></span>

<span data-ttu-id="f427e-196">Por padrão, todas as instâncias de função de Serviços de Nuvem e [Máquinas Virtuais (VM) do Azure](https://docs.microsoft.com/azure/virtual-machines/windows/) são conectadas a uma VNet que tem acesso à Internet.</span><span class="sxs-lookup"><span data-stu-id="f427e-196">All [Azure Virtual Machines (VM)](https://docs.microsoft.com/azure/virtual-machines/windows/) and Cloud Services role instances connected to a VNet have access to the Internet, by default.</span></span> <span data-ttu-id="f427e-197">Você também pode habilitar o acesso de entrada para recursos específicos, conforme necessário. Máquinas virtuais (VMs) e instâncias de função de serviços de nuvem conectadas a uma rede virtual têm acesso à Internet, por padrão.</span><span class="sxs-lookup"><span data-stu-id="f427e-197">You can also enable inbound access to specific resources, as needed.(VM) and Cloud Services role instances connected to a VNet have access to the Internet,by default.</span></span> <span data-ttu-id="f427e-198">Você também pode habilitar o acesso de entrada a recursos específicos, conforme o necessário.</span><span class="sxs-lookup"><span data-stu-id="f427e-198">You can also enable inbound access to specific resources, as needed.</span></span>

<span data-ttu-id="f427e-199">Por padrão, todos os recursos conectados a uma VNet têm conectividade de saída para a Internet.</span><span class="sxs-lookup"><span data-stu-id="f427e-199">All resources connected to a VNet have outbound connectivity to the Internet by default.</span></span> <span data-ttu-id="f427e-200">O endereço IP privado do recurso passa por SNAT (conversão do endereço de rede de origem) para um endereço IP público pela infraestrutura do Azure.</span><span class="sxs-lookup"><span data-stu-id="f427e-200">The private IP address of the resource is source network address translated (SNAT) to a public IP address by the Azure infrastructure.</span></span> <span data-ttu-id="f427e-201">Altere a conectividade padrão implementando o roteamento e a filtragem de tráfego personalizado.</span><span class="sxs-lookup"><span data-stu-id="f427e-201">You can change the default connectivity by implementing custom routing and traffic filtering.</span></span> <span data-ttu-id="f427e-202">Para saber mais sobre conectividade de saída na Internet, leia [Noções básicas das conexões de saída no Azure](https://docs.microsoft.com/azure/load-balancer/load-balancer-outbound-connections?toc=%2fazure%2fvirtual-network%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="f427e-202">To learn more about outbound Internet connectivity, read the [Understanding outbound connections in Azure](https://docs.microsoft.com/azure/load-balancer/load-balancer-outbound-connections?toc=%2fazure%2fvirtual-network%2ftoc.json).</span></span>

<span data-ttu-id="f427e-203">Para comunicar-se internamente com os recursos do Azure da Internet, ou para comunicar-se externamente com a Internet sem SNAT, é necessário atribuir um endereço IP público ao recurso.</span><span class="sxs-lookup"><span data-stu-id="f427e-203">To communicate inbound to Azure resources from the Internet, or to communicate outbound to the Internet without SNAT, a resource must be assigned a public IP address.</span></span> <span data-ttu-id="f427e-204">Para saber mais sobre endereços IP públicos, leia [Endereços IP públicos](https://docs.microsoft.com/azure/virtual-network/virtual-network-public-ip-address).</span><span class="sxs-lookup"><span data-stu-id="f427e-204">To learn more about public IP addresses, read the [Public IP addresses](https://docs.microsoft.com/azure/virtual-network/virtual-network-public-ip-address).</span></span>

<span data-ttu-id="f427e-205">**Conectividade de recursos do Azure**</span><span class="sxs-lookup"><span data-stu-id="f427e-205">**Azure resource connectivity**</span></span>

<span data-ttu-id="f427e-206">[Recursos do Azure](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview) como Serviços de Nuvem e VMs podem ser conectados à mesma VNet.</span><span class="sxs-lookup"><span data-stu-id="f427e-206">[Azure resources](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview) such as Cloud Services and VMs can be connected to the same VNet.</span></span> <span data-ttu-id="f427e-207">Os recursos podem se conectar usando endereços IP privados, mesmo se estiverem em sub-redes diferentes.</span><span class="sxs-lookup"><span data-stu-id="f427e-207">The resources can connect to each other using private IP addresses, even if they are in different subnets.</span></span> <span data-ttu-id="f427e-208">O Azure fornece roteamento padrão entre sub-redes, VNets e redes locais, portanto você não precisa configurar e gerenciar rotas.</span><span class="sxs-lookup"><span data-stu-id="f427e-208">Azure provides default routing between subnets, VNets, and on-premises networks, so you don't have to configure and manage routes.</span></span>

<span data-ttu-id="f427e-209">Você pode conectar vários recursos do Azure a uma VNet, como VMs (máquinas virtuais), Serviços de Nuvem, Ambientes de Serviço de Aplicativo e Conjuntos de dimensionamento de máquinas virtuais.</span><span class="sxs-lookup"><span data-stu-id="f427e-209">You can connect several Azure resources to a VNet, such as Virtual Machines (VM), Cloud Services, App Service Environments, and Virtual Machine Scale Sets.</span></span> <span data-ttu-id="f427e-210">As VMs se conectam a uma sub-rede dentro de uma VNet por meio de uma NIC (interface de rede).</span><span class="sxs-lookup"><span data-stu-id="f427e-210">VMs connect to a subnet within a VNet through a network interface (NIC).</span></span> <span data-ttu-id="f427e-211">Para saber mais sobre adaptadores de rede, leia [Interfaces de rede](https://docs.microsoft.com/azure/virtual-network/virtual-network-network-interface).</span><span class="sxs-lookup"><span data-stu-id="f427e-211">To learn more about NICs, read the [Network interfaces](https://docs.microsoft.com/azure/virtual-network/virtual-network-network-interface).</span></span>

<span data-ttu-id="f427e-212">**Conectividade de VNet**</span><span class="sxs-lookup"><span data-stu-id="f427e-212">**VNet connectivity**</span></span>

<span data-ttu-id="f427e-213">As [VNets](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview) podem ser conectadas entre si, permitindo que os recursos conectados a qualquer VNet se comuniquem com recursos de outra VNet.</span><span class="sxs-lookup"><span data-stu-id="f427e-213">[VNets](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview) can be connected to each other, enabling resources connected to any VNet to communicate with any resource on any other VNet.</span></span>

<span data-ttu-id="f427e-214">Você pode conectar as VNets entre si, permitindo que os recursos conectados a qualquer VNet se comuniquem entre si através das VNets.</span><span class="sxs-lookup"><span data-stu-id="f427e-214">You can connect VNets to each other, enabling resources connected to either VNet to communicate with each other across VNets.</span></span> <span data-ttu-id="f427e-215">Use uma ou as duas opções a seguir para conectar VNets entre si:</span><span class="sxs-lookup"><span data-stu-id="f427e-215">You can use either or both of the following options to connect VNets to each other:</span></span>

- <span data-ttu-id="f427e-216">**Emparelhamento:** permite que os recursos conectados a diferentes VNets do Azure no mesmo local do Azure se comuniquem entre si.</span><span class="sxs-lookup"><span data-stu-id="f427e-216">**Peering:** Enables resources connected to different Azure VNets within the same Azure location to communicate with each other.</span></span> <span data-ttu-id="f427e-217">A largura de banda e a latência entre as VNets são as mesmas se os recursos estivessem conectados à mesma VNet. Para saber mais sobre emparelhamento, leia o [Emparelhamento de redes virtuais](https://docs.microsoft.com/azure/virtual-network/virtual-network-peering-overview).</span><span class="sxs-lookup"><span data-stu-id="f427e-217">The bandwidth and latency across the VNets is the same as if the resources were connected to the same VNet.To learn more about peering, read the [Virtual network peering](https://docs.microsoft.com/azure/virtual-network/virtual-network-peering-overview).</span></span>

- <span data-ttu-id="f427e-218">**Conexão de VNet para VNet:** permite recursos conectados a uma VNet do Azure diferente dentro dos mesmos locais ou em locais diferentes do Azure.</span><span class="sxs-lookup"><span data-stu-id="f427e-218">**VNet-to-VNet connection:** Enables resources connected to different Azure VNet within the same, or different Azure locations.</span></span> <span data-ttu-id="f427e-219">Ao contrário do emparelhamento, a largura de banda é limitada entre as VNets, pois o tráfego deve fluir por um Gateway de VPN do Azure.</span><span class="sxs-lookup"><span data-stu-id="f427e-219">Unlike peering, bandwidth is limited between VNets because traffic must flow through an Azure VPN Gateway.</span></span> <span data-ttu-id="f427e-220">Para saber mais sobre como conectar VNets com uma conexão VNet para VNet.</span><span class="sxs-lookup"><span data-stu-id="f427e-220">To learn more about connecting VNets with a VNet-to-VNet connection.</span></span> <span data-ttu-id="f427e-221">Para saber mais, leia [Configurar uma conexão VNet para VNet](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-howto-vnet-vnet-resource-manager-portal?toc=%2fazure%2fvirtual-network%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="f427e-221">To learn more, read the [Configure a VNet-to-VNet connection](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-howto-vnet-vnet-resource-manager-portal?toc=%2fazure%2fvirtual-network%2ftoc.json) .</span></span>

<span data-ttu-id="f427e-222">**Conectividade local**</span><span class="sxs-lookup"><span data-stu-id="f427e-222">**On-premises connectivity**</span></span>

<span data-ttu-id="f427e-223">As VNets podem ser conectadas a redes [locais](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview) por meio de conexões de rede privada entre a sua rede e o Azure ou por uma conexão de VPN site a site pela Internet.</span><span class="sxs-lookup"><span data-stu-id="f427e-223">VNets can be connected to [on-premises](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview) networks through private network connections between your network and Azure, or through a site-to-site VPN connection over the Internet.</span></span>

<span data-ttu-id="f427e-224">Você pode conectar sua rede local a uma VNet usando qualquer combinação das seguintes opções:</span><span class="sxs-lookup"><span data-stu-id="f427e-224">You can connect your on-premises network to a VNet using any combination of the following options:</span></span>

- <span data-ttu-id="f427e-225">**VPN (rede virtual privada) de ponto a site:** estabelecida entre um único PC conectado à sua rede e a VNet.</span><span class="sxs-lookup"><span data-stu-id="f427e-225">**Point-to-site virtual private network (VPN):** Established between a single PC connected to your network and the VNet.</span></span> <span data-ttu-id="f427e-226">Esse tipo de conexão é ótimo se você estiver começando a usar o Azure, ou para os desenvolvedores, pois exige pouca ou nenhuma alteração em sua rede existente.</span><span class="sxs-lookup"><span data-stu-id="f427e-226">This connection type is great if you're just getting started with Azure, or for developers, because it requires little or no changes to your existing network.</span></span> <span data-ttu-id="f427e-227">A conexão usa o protocolo SSTP para fornecer comunicação criptografada pela Internet entre o PC e a VNet.</span><span class="sxs-lookup"><span data-stu-id="f427e-227">The connection uses the SSTP protocol to provide encrypted communication over the Internet between the PC and the VNet.</span></span> <span data-ttu-id="f427e-228">A latência de uma VPN ponto a site é imprevisível, pois o tráfego atravessa a Internet.</span><span class="sxs-lookup"><span data-stu-id="f427e-228">The latency for a point-to-site VPN is unpredictable since the traffic traverses the Internet.</span></span>

- <span data-ttu-id="f427e-229">**VPN site a site:** estabelecida entre o dispositivo VPN e um Gateway de VPN do Azure.</span><span class="sxs-lookup"><span data-stu-id="f427e-229">**Site-to-site VPN:** Established between your VPN device and an Azure VPN Gateway.</span></span> <span data-ttu-id="f427e-230">Esse tipo de conexão permite que qualquer recurso local autorizado acesse uma VNet.</span><span class="sxs-lookup"><span data-stu-id="f427e-230">This connection type enables any on-premises resource you authorize to access a VNet.</span></span> <span data-ttu-id="f427e-231">A conexão é uma VPN IPsec/IKE que fornece comunicação criptografada pela Internet entre o dispositivo local e o Gateway de VPN do Azure.</span><span class="sxs-lookup"><span data-stu-id="f427e-231">The connection is an IPsec/IKE VPN that provides encrypted communication over the Internet between your on-premises device and the Azure VPN gateway.</span></span> <span data-ttu-id="f427e-232">A latência de uma conexão site a site é imprevisível, pois o tráfego atravessa a Internet.</span><span class="sxs-lookup"><span data-stu-id="f427e-232">The latency for a site-to-site connection is unpredictable since the traffic traverses the Internet.</span></span>

- <span data-ttu-id="f427e-233">**Azure ExpressRoute:** estabelecida entre sua rede e o Azure, por meio de um parceiro de ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="f427e-233">**Azure ExpressRoute:** Established between your network and Azure, through an ExpressRoute partner.</span></span> <span data-ttu-id="f427e-234">Essa conexão é privada.</span><span class="sxs-lookup"><span data-stu-id="f427e-234">This connection is private.</span></span> <span data-ttu-id="f427e-235">O tráfego não atravessa a Internet.</span><span class="sxs-lookup"><span data-stu-id="f427e-235">Traffic does not traverse the Internet.</span></span> <span data-ttu-id="f427e-236">A latência de uma conexão de ExpressRoute é previsível, pois o tráfego não atravessa a Internet.</span><span class="sxs-lookup"><span data-stu-id="f427e-236">The latency for an ExpressRoute connection is predictable since traffic doesn't traverse the Internet.</span></span> <span data-ttu-id="f427e-237">Para saber mais sobre todas as opções de conexão anteriores, leia [Diagramas de topologia de conexão](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-vpngateways?toc=%2fazure%2fvirtual-network%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="f427e-237">To learn more about all the previous connection options, read the [Connection topology diagrams](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-vpngateways?toc=%2fazure%2fvirtual-network%2ftoc.json).</span></span>

<span data-ttu-id="f427e-238">**Filtragem de tráfego**</span><span class="sxs-lookup"><span data-stu-id="f427e-238">**Traffic filtering**</span></span>

<span data-ttu-id="f427e-239">O [tráfego de rede](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview) de instâncias de função de VMs e do Serviços de Nuvem pode ser filtrado na entrada e na saída pelo endereço IP e porta de origem, endereço IP e porta de destino e protocolo.</span><span class="sxs-lookup"><span data-stu-id="f427e-239">VM and Cloud Services role instances [network traffic](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview) can be filtered inbound and outbound by source IP address and port, destination IP address and port, and protocol.</span></span>

<span data-ttu-id="f427e-240">Filtre o tráfego de rede entre sub-redes usando uma ou as duas opções a seguir:</span><span class="sxs-lookup"><span data-stu-id="f427e-240">You can filter network traffic between subnets using either or both of the following options:</span></span>

- <span data-ttu-id="f427e-241">**NSG (Grupos de segurança de rede):** cada NSG pode conter várias regras de segurança de entrada e saída que permitem a filtragem do tráfego por endereço IP de origem e de destino, porta e protocolo.</span><span class="sxs-lookup"><span data-stu-id="f427e-241">**Network security groups (NSG):** Each NSG can contain multiple inbound and outbound security rules that enable you to filter traffic by source and destination IP address, port, and protocol.</span></span> <span data-ttu-id="f427e-242">Aplique um NSG a cada NIC em uma VM.</span><span class="sxs-lookup"><span data-stu-id="f427e-242">You can apply an NSG to each NIC in a VM.</span></span> <span data-ttu-id="f427e-243">Você também pode aplicar um NSG à sub-rede a qual uma NIC, ou outros recursos do Azure, está conectada.</span><span class="sxs-lookup"><span data-stu-id="f427e-243">You can also apply an NSG to the subnet a NIC, or other Azure resource, is connected to.</span></span> <span data-ttu-id="f427e-244">Leia [Grupos de segurança de rede](https://docs.microsoft.com/azure/virtual-network/virtual-networks-nsg) para saber mais sobre NSGs.</span><span class="sxs-lookup"><span data-stu-id="f427e-244">To learn more about NSGs, read the [Network security groups](https://docs.microsoft.com/azure/virtual-network/virtual-networks-nsg).</span></span>

- <span data-ttu-id="f427e-245">**Dispositivos de rede virtual:** uma um dispositivo de rede virtual é uma VM que executa um software responsável por uma função de rede, como um firewall.</span><span class="sxs-lookup"><span data-stu-id="f427e-245">**Virtual Network Appliances:** A virtual network appliance is a VM running software that performs a network function, such as a firewall.</span></span> <span data-ttu-id="f427e-246">Exiba uma lista de NVAs disponíveis no Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="f427e-246">View a list of available NVAs in the Azure Marketplace.</span></span> <span data-ttu-id="f427e-247">Também há NVAs que fornecem otimização de WAN e outras funções de tráfego de rede.</span><span class="sxs-lookup"><span data-stu-id="f427e-247">NVAs are also available that provide WAN optimization and other network traffic functions.</span></span> <span data-ttu-id="f427e-248">As NVAs são usadas normalmente com rotas BGP ou definidas pelo usuário.</span><span class="sxs-lookup"><span data-stu-id="f427e-248">NVAs are typically used with user-defined or BGP routes.</span></span> <span data-ttu-id="f427e-249">Você também pode usar uma NVA para filtrar o tráfego entre VNets.</span><span class="sxs-lookup"><span data-stu-id="f427e-249">You can also use an NVA to filter traffic between VNets.</span></span>

<span data-ttu-id="f427e-250">**Roteamento**</span><span class="sxs-lookup"><span data-stu-id="f427e-250">**Routing**</span></span>

<span data-ttu-id="f427e-251">Opcionalmente, você pode substituir o roteamento padrão do Azure configurando suas próprias rotas ou usando rotas BGP por meio de um gateway de rede.</span><span class="sxs-lookup"><span data-stu-id="f427e-251">You can optionally override Azure's default routing by configuring your own routes, or using BGP routes through a network gateway.</span></span>

<span data-ttu-id="f427e-252">Por padrão, o Azure cria tabelas de rotas que permitem aos recursos conectados a qualquer sub-rede e em qualquer VNet a comunicação mútua.</span><span class="sxs-lookup"><span data-stu-id="f427e-252">Azure creates route tables that enable resources connected to any subnet in any VNet to communicate with each other, by default.</span></span> <span data-ttu-id="f427e-253">Você pode implementar uma ou as duas opções a seguir para substituir as rotas padrão criadas pelo Azure:</span><span class="sxs-lookup"><span data-stu-id="f427e-253">You can implement either or both of the following options to override the default routes Azure creates:</span></span>

- <span data-ttu-id="f427e-254">**Rotas definidas pelo usuário:** você pode criar tabelas de rotas personalizadas com rotas que controlam para onde o tráfego será roteado em cada sub-rede.</span><span class="sxs-lookup"><span data-stu-id="f427e-254">**User-defined routes:** You can create custom route tables with routes that control where traffic is routed to for each subnet.</span></span> <span data-ttu-id="f427e-255">Para saber mais sobre as rotas definidas pelo usuário, leia [Rotas definidas pelo usuário](https://docs.microsoft.com/azure/virtual-network/virtual-networks-udr-overview).</span><span class="sxs-lookup"><span data-stu-id="f427e-255">To learn more about user-defined routes, read the [User-defined routes](https://docs.microsoft.com/azure/virtual-network/virtual-networks-udr-overview).</span></span>

- <span data-ttu-id="f427e-256">**Rotas BGP:** se você conectar sua VNet à rede local usando um Gateway de VPN do Azure ou conexão de ExpressRoute, poderá propagar as rotas BGP às suas VNets.</span><span class="sxs-lookup"><span data-stu-id="f427e-256">**BGP routes:** If you connect your VNet to your on-premises network using an Azure VPN Gateway or ExpressRoute connection, you can propagate BGP routes to your VNets.</span></span>

### <a name="hybrid-internet-connectivity-connect-to-an-on-premises-network"></a><span data-ttu-id="f427e-257">Conectividade de Internet híbrida: conectar-se a uma rede local</span><span class="sxs-lookup"><span data-stu-id="f427e-257">Hybrid internet connectivity: Connect to an on-premises network</span></span>
<span data-ttu-id="f427e-258">Você pode conectar sua rede local a uma VNet usando qualquer combinação das seguintes opções:</span><span class="sxs-lookup"><span data-stu-id="f427e-258">You can connect your on-premises network to a VNet using any combination of the following options:</span></span>

-   <span data-ttu-id="f427e-259">Conectividade com a Internet</span><span class="sxs-lookup"><span data-stu-id="f427e-259">Internet connectivity</span></span>

-   <span data-ttu-id="f427e-260">VPN de ponto a site (VPN P2S)</span><span class="sxs-lookup"><span data-stu-id="f427e-260">Point-to-site VPN (P2S VPN)</span></span>

-   <span data-ttu-id="f427e-261">VPN de site a site (VPN S2S)</span><span class="sxs-lookup"><span data-stu-id="f427e-261">Site-to-Site VPN (S2S VPN)</span></span>

-   <span data-ttu-id="f427e-262">ExpressRoute</span><span class="sxs-lookup"><span data-stu-id="f427e-262">ExpressRoute</span></span>

#### <a name="internet-connectivity"></a><span data-ttu-id="f427e-263">Conectividade com a Internet</span><span class="sxs-lookup"><span data-stu-id="f427e-263">Internet Connectivity</span></span>

<span data-ttu-id="f427e-264">Assim como o nome sugere, a conectividade com a Internet torna suas cargas de trabalho acessíveis pela Internet, fazendo com que você exponha diferentes pontos de extremidade públicos a cargas de trabalho que residem dentro da rede virtual.</span><span class="sxs-lookup"><span data-stu-id="f427e-264">As its name suggests, Internet connectivity makes your workloads accessible from the Internet, by having you expose different public endpoints to workloads that live inside the virtual network.</span></span> <span data-ttu-id="f427e-265">Essas cargas de trabalho podem ser expostas usando um [Load Balancer voltado para a Internet](https://docs.microsoft.com/azure/load-balancer/load-balancer-internet-overview) ou simplesmente atribuindo um endereço IP público à VM.</span><span class="sxs-lookup"><span data-stu-id="f427e-265">These workloads could be exposed using [Internet-facing Load Balancer](https://docs.microsoft.com/azure/load-balancer/load-balancer-internet-overview) or simply assigning a public IP address to the  VM.</span></span> <span data-ttu-id="f427e-266">Dessa forma, é possível que qualquer coisa na Internet possa alcançar essa máquina virtual, desde que um firewall de host, [NSGs (grupos de segurança de rede)](https://docs.microsoft.com/azure/virtual-network/virtual-networks-nsg) e [rotas definidas pelo usuário](https://docs.microsoft.com/azure/virtual-network/virtual-networks-udr-overview) permitam que isso aconteça.</span><span class="sxs-lookup"><span data-stu-id="f427e-266">This way, it becomes possible for anything on the Internet to be able to reach that virtual machine, provided a host firewall, [network security groups (NSG)](https://docs.microsoft.com/azure/virtual-network/virtual-networks-nsg), and [User-Defined Routes](https://docs.microsoft.com/azure/virtual-network/virtual-networks-udr-overview) allow that to happen.</span></span>

<span data-ttu-id="f427e-267">Nesse cenário, você pode expor um aplicativo que precisa ser público à Internet e ser capaz de conectar-se a ele de qualquer lugar ou então de localizações específicas, dependendo da configuração de suas cargas de trabalho.</span><span class="sxs-lookup"><span data-stu-id="f427e-267">In this scenario, you could expose an application that needs to be public to the Internet and be able to connect to it from anywhere, or from specific locations depending on the configuration of your workloads.</span></span>

#### <a name="point-to-site-vpn-or-site-to-site-vpn"></a><span data-ttu-id="f427e-268">VPN de ponto a site ou VPN de site a site</span><span class="sxs-lookup"><span data-stu-id="f427e-268">Point-to-Site VPN or Site-to-Site VPN</span></span>
<span data-ttu-id="f427e-269">Esses dois se encaixam na mesma categoria.</span><span class="sxs-lookup"><span data-stu-id="f427e-269">These two falls into the same category.</span></span> <span data-ttu-id="f427e-270">Ambos precisam que sua VNet tenha um Gateway de VPN e você pode conectar-se a ele usando um cliente VPN para sua estação de trabalho como parte da [configuração de ponto a site](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-howto-point-to-site-resource-manager-portal) ou então você pode configurar seu [dispositivo VPN](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-vpn-devices) local para poder encerrar uma VPN de site a site.</span><span class="sxs-lookup"><span data-stu-id="f427e-270">They both need your VNet to have a VPN Gateway and you can connect to it using either a VPN Client for your workstation as part of the [Point-to-Site configuration](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-howto-point-to-site-resource-manager-portal) or you can configure your on-premises [VPN device](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-vpn-devices) to be able to terminate a site-to-site VPN.</span></span> <span data-ttu-id="f427e-271">Dessa forma, dispositivos locais podem se conectar a recursos na VNet.</span><span class="sxs-lookup"><span data-stu-id="f427e-271">This way, on-premises devices can connect to resources within the VNet.</span></span>

<span data-ttu-id="f427e-272">Uma configuração Ponto a Site (P2S) permite que você crie uma conexão segura de um computador cliente individual com uma rede virtual.</span><span class="sxs-lookup"><span data-stu-id="f427e-272">A Point-to-Site (P2S) configuration lets you create a secure connection from an individual client computer to a virtual network.</span></span> <span data-ttu-id="f427e-273">O P2S é uma conexão VPN sobre SSTP (Secure Socket Tunneling Protocol).</span><span class="sxs-lookup"><span data-stu-id="f427e-273">P2S is a VPN connection over SSTP (Secure Socket Tunneling Protocol).</span></span>

![VPN ponto a site](media/azure-network-security/azure-network-security-fig-5.png)

<span data-ttu-id="f427e-275">Conexões ponto a site são úteis quando você deseja se conectar à sua VNet de um local remoto, como de casa ou de um centro de conferências ou quando há apenas alguns clientes que precisam se conectar a uma rede virtual.</span><span class="sxs-lookup"><span data-stu-id="f427e-275">Point-to-Site connections are useful when you want to connect to your VNet from a remote location, such as from home or a conference center, or when you only have a few clients that need to connect to a virtual network.</span></span>

<span data-ttu-id="f427e-276">As conexões ponto a site não exigem um dispositivo VPN ou um endereço IP voltado para o público.</span><span class="sxs-lookup"><span data-stu-id="f427e-276">P2S connections do not require a VPN device or a public-facing IP address.</span></span> <span data-ttu-id="f427e-277">Estabeleça a conexão VPN no computador cliente.</span><span class="sxs-lookup"><span data-stu-id="f427e-277">You establish the VPN connection from the client computer.</span></span> <span data-ttu-id="f427e-278">Portanto, o P2S não é a maneira recomendável de se conectar ao Azure caso você precise de uma conexão persistente de vários computadores e dispositivos locais à sua rede do Azure.</span><span class="sxs-lookup"><span data-stu-id="f427e-278">Therefore, P2S is not recommended way to connect to Azure in case you need a persistent connection from many on-premises devices and computers to your Azure network.</span></span>

![VPN de site a site](media/azure-network-security/azure-network-security-fig-6.png)

> [!Note]
> <span data-ttu-id="f427e-280">Para saber mais sobre conexões de ponto a site, consulte as [Perguntas frequentes sobre ponto a site](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-howto-point-to-site-classic-azure-portal).</span><span class="sxs-lookup"><span data-stu-id="f427e-280">For more information about Point-to-Site connections, see the [Point-to-Site FA v Q](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-howto-point-to-site-classic-azure-portal).</span></span>

<span data-ttu-id="f427e-281">Uma conexão de gateway de VPN Site a Site é usada para conectar a rede local a uma rede virtual do Azure por um túnel VPN IPsec/IKE (IKEv1 ou IKEv2).</span><span class="sxs-lookup"><span data-stu-id="f427e-281">A Site-to-Site VPN gateway connection is used to connect your on-premises network to an Azure virtual network over an IPsec/IKE (IKEv1 or IKEv2) VPN tunnel.</span></span>

<span data-ttu-id="f427e-282">Esse tipo de conexão exige um dispositivo VPN localizado no local que tenha um endereço IP público voltado para o exterior atribuído a ele.</span><span class="sxs-lookup"><span data-stu-id="f427e-282">This type of connection requires a VPN device located on-premises that has an externally facing public IP address assigned to it.</span></span> <span data-ttu-id="f427e-283">Essa conexão ocorre pela Internet e permite que você envie suas informações por um "túnel" dentro de um link criptografado entre sua rede e o Azure.</span><span class="sxs-lookup"><span data-stu-id="f427e-283">This connection takes place over the Internet and allows you to “tunnel” information inside an encrypted link between your network and Azure.</span></span> <span data-ttu-id="f427e-284">A VPN site a site é uma tecnologia segura e madura implantada por empresas de todos os portes há décadas.</span><span class="sxs-lookup"><span data-stu-id="f427e-284">Site-to-site VPN is a secure, mature technology that has been deployed by enterprises of all sizes for decades.</span></span> <span data-ttu-id="f427e-285">A criptografia de túnel é realizada usando o [modo de túnel IPsec](https://technet.microsoft.com/library/cc786385.aspx).</span><span class="sxs-lookup"><span data-stu-id="f427e-285">Tunnel encryption is performed using [IPsec tunnel mode](https://technet.microsoft.com/library/cc786385.aspx).</span></span>

<span data-ttu-id="f427e-286">Embora a VPN site a site seja uma tecnologia confiável e estabelecida, o tráfego no túnel não atravessa a Internet.</span><span class="sxs-lookup"><span data-stu-id="f427e-286">While site-to-site VPN is a trusted, reliable, and established technology, traffic within the tunnel does traverse the Internet.</span></span> <span data-ttu-id="f427e-287">Além disso, a largura de banda é relativamente restrita a um máximo de aproximadamente 200 Mbps.</span><span class="sxs-lookup"><span data-stu-id="f427e-287">In addition, bandwidth is relatively constrained to a maximum of about 200 Mbps.</span></span>

<span data-ttu-id="f427e-288">Se você precisar de um nível excepcional de segurança ou de desempenho para as conexões entre locais, recomendamos que você use o Azure ExpressRoute para sua conectividade entre locais.</span><span class="sxs-lookup"><span data-stu-id="f427e-288">If you require an exceptional level of security or performance for your cross-premises connections, we recommend that you use Azure ExpressRoute for your cross-premises connectivity.</span></span> <span data-ttu-id="f427e-289">O ExpressRoute é um link WAN dedicado entre seu local ou um provedor de hospedagem do Exchange.</span><span class="sxs-lookup"><span data-stu-id="f427e-289">ExpressRoute is a dedicated WAN link between your on-premises location or an Exchange hosting provider.</span></span> <span data-ttu-id="f427e-290">Como essa é uma conexão de telecomunicações, seus dados não viajam pela Internet e, portanto, não são expostos aos potenciais riscos de comunicações pela Internet.</span><span class="sxs-lookup"><span data-stu-id="f427e-290">Because this is a telco connection, your data doesn’t travel over the Internet and therefore is not exposed to the potential risks inherent in Internet communications.</span></span>

> [!Note]
> <span data-ttu-id="f427e-291">Para obter mais informações sobre os gateways de VPN, veja [Sobre o gateway de VPN](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-vpngateways).</span><span class="sxs-lookup"><span data-stu-id="f427e-291">For more information about VPN gateways, see About [VPN gateway](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-vpngateways).</span></span>

#### <a name="dedicated-wan-link"></a><span data-ttu-id="f427e-292">Link WAN dedicado</span><span class="sxs-lookup"><span data-stu-id="f427e-292">Dedicated WAN link</span></span>
<span data-ttu-id="f427e-293">O Microsoft Azure ExpressRoute permite que você estenda suas redes locais para o Azure por meio de uma conexão privada dedicada, facilitada por um provedor de conectividade.</span><span class="sxs-lookup"><span data-stu-id="f427e-293">Microsoft Azure ExpressRoute lets you extend your on-premises networks into the Azure over a dedicated private connection facilitated by a connectivity provider.</span></span>

<span data-ttu-id="f427e-294">As conexões do ExpressRoute não passam pela Internet pública.</span><span class="sxs-lookup"><span data-stu-id="f427e-294">ExpressRoute connections do not go over the public Internet.</span></span> <span data-ttu-id="f427e-295">Isso permite que as conexões do ExpressRoute ofereçam mais confiabilidade, mais velocidade, latências menores e muito mais segurança do que as conexões típicas pela Internet.</span><span class="sxs-lookup"><span data-stu-id="f427e-295">This allows ExpressRoute connections to offer more reliability, faster speeds, lower latencies, and higher security than typical connections over the Internet.</span></span>

![ <span data-ttu-id="f427e-296">Link WAN Dedicado</span><span class="sxs-lookup"><span data-stu-id="f427e-296">Dedicated WAN Link</span></span>](media/azure-network-security/azure-network-security-fig-7.png)

> [!Note]
> <span data-ttu-id="f427e-297">Para saber mais sobre como conectar sua rede à Microsoft usando ExpressRoute, veja [Modelos de conectividade do ExpressRoute](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-vpngateways) e [Visão geral técnica do ExpressRoute](https://docs.microsoft.com/azure/expressroute/expressroute-introduction).</span><span class="sxs-lookup"><span data-stu-id="f427e-297">For information on how to connect your network to Microsoft using ExpressRoute, see [ExpressRoute connectivity models](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-vpngateways) and [ExpressRoute technical overview](https://docs.microsoft.com/azure/expressroute/expressroute-introduction).</span></span>

<span data-ttu-id="f427e-298">Assim como com as opções de VPN de site a site, o ExpressRoute também permite que você se conecte a recursos que não estão necessariamente em apenas uma VNet.</span><span class="sxs-lookup"><span data-stu-id="f427e-298">As with the site-to-site VPN options, ExpressRoute also allows you to connect to resources that are not necessarily in only one VNet.</span></span> <span data-ttu-id="f427e-299">Na verdade, dependendo do SKU, você pode se conectar a 10 VNets.</span><span class="sxs-lookup"><span data-stu-id="f427e-299">In fact, depending on the SKU, you can connect to 10 VNets.</span></span> <span data-ttu-id="f427e-300">Se você tiver o [complemento Premium](https://docs.microsoft.com/azure/expressroute/expressroute-faqs), conexões para até 100 VNets são possíveis, dependendo da largura de banda.</span><span class="sxs-lookup"><span data-stu-id="f427e-300">If you have the [premium add-on](https://docs.microsoft.com/azure/expressroute/expressroute-faqs), connections to up to 100 VNets are possible, depending on bandwidth.</span></span> <span data-ttu-id="f427e-301">Para saber mais sobre como é a aparência desses tipos de conexões, leia [Diagramas de topologia de conexão](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-vpngateways?toc=%2fazure%2fvirtual-network%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="f427e-301">To learn more about what these types of connections look like, read [Connection topology diagrams](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-vpngateways?toc=%2fazure%2fvirtual-network%2ftoc.json).</span></span>

### <a name="security-controls"></a><span data-ttu-id="f427e-302">Controles de segurança</span><span class="sxs-lookup"><span data-stu-id="f427e-302">Security controls</span></span>
<span data-ttu-id="f427e-303">Uma Rede Virtual do Azure fornece uma rede segura e lógica que é isolada de outras redes virtuais e dá suporte a vários controles de segurança que você pode usar em suas redes locais.</span><span class="sxs-lookup"><span data-stu-id="f427e-303">An Azure Virtual Network provides a secure, logical network that is isolated from other virtual networks and supports many security controls that you use on your on-premises networks.</span></span> <span data-ttu-id="f427e-304">Os clientes criam sua própria estrutura usando: sub-redes – eles usam o próprio intervalo de endereços IP privado, configuram tabelas de rotas, grupos de segurança de rede, ACLs (listas de controle de acesso), gateways e dispositivos virtuais para executar as cargas de trabalho deles na nuvem.</span><span class="sxs-lookup"><span data-stu-id="f427e-304">Customers create their own structure by using: subnets—they use their own private IP address range, configure route tables, network security groups, access control lists (ACLs), gateways, and virtual appliances to run their workloads in the cloud.</span></span>

<span data-ttu-id="f427e-305">A seguir, os controles de segurança que você pode usar em suas Redes Virtuais do Azure:</span><span class="sxs-lookup"><span data-stu-id="f427e-305">The following are security controls you can use on your Azure Virtual Networks:</span></span>

-   <span data-ttu-id="f427e-306">Controles de Acesso à Rede</span><span class="sxs-lookup"><span data-stu-id="f427e-306">Network Access Controls</span></span>

-   <span data-ttu-id="f427e-307">Rotas definidas pelo usuário</span><span class="sxs-lookup"><span data-stu-id="f427e-307">User-Defined Routes</span></span>

-   <span data-ttu-id="f427e-308">Solução de segurança de rede</span><span class="sxs-lookup"><span data-stu-id="f427e-308">Network Security Appliance</span></span>

-   <span data-ttu-id="f427e-309">Gateway de Aplicativo</span><span class="sxs-lookup"><span data-stu-id="f427e-309">Application Gateway</span></span>

-   <span data-ttu-id="f427e-310">Firewall do aplicativo Web do Azure</span><span class="sxs-lookup"><span data-stu-id="f427e-310">Azure Web Application Firewall</span></span>

-   <span data-ttu-id="f427e-311">Controle de disponibilidade de rede</span><span class="sxs-lookup"><span data-stu-id="f427e-311">Network Availability Control</span></span>

#### <a name="network-access-controls"></a><span data-ttu-id="f427e-312">Controles de acesso à rede</span><span class="sxs-lookup"><span data-stu-id="f427e-312">Network access controls</span></span>
<span data-ttu-id="f427e-313">Enquanto a VNet (rede virtual) do Azure é a base do modelo de rede do Azure e fornece isolamento e proteção, os [NSGs (grupos de segurança de rede)](https://blogs.msdn.microsoft.com/igorpag/2016/05/14/azure-network-security-groups-nsg-best-practices-and-lessons-learned/) são a principal ferramenta usada para impor e controlar as regras de tráfego de rede no nível da rede.</span><span class="sxs-lookup"><span data-stu-id="f427e-313">While the Azure Virtual Network (VNet) is the cornerstone of Azure networking model and provides isolation and protection, the [Network Security Groups (NSG)](https://blogs.msdn.microsoft.com/igorpag/2016/05/14/azure-network-security-groups-nsg-best-practices-and-lessons-learned/) are the main tool you use to enforce and control network traffic rules at the network level.</span></span>

![ <span data-ttu-id="f427e-314">Controles de Acesso à Rede</span><span class="sxs-lookup"><span data-stu-id="f427e-314">Network Access Controls</span></span>](media/azure-network-security/azure-network-security-fig-8.png)


<span data-ttu-id="f427e-315">Você pode controlar o acesso permitindo ou negando a comunicação entre as cargas de trabalho em uma rede virtual, de sistemas nas redes do cliente por meio de conectividade entre locais ou comunicação direta via Internet.</span><span class="sxs-lookup"><span data-stu-id="f427e-315">You can control access by permitting or denying communication between the workloads within a virtual network, from systems on customer’s networks via cross-premises connectivity, or direct Internet communication.</span></span>

<span data-ttu-id="f427e-316">No diagrama, tanto VNets e NSGs residem em uma camada específica na pilha de segurança geral do Azure, em que NSGs, UDR e soluções de virtualização de rede podem ser usados para criar limites de segurança para proteger as implantações de aplicativo na rede protegida.</span><span class="sxs-lookup"><span data-stu-id="f427e-316">In the diagram, both VNets and NSGs reside in a specific layer in the Azure overall security stack, where NSGs, UDR, and network virtual appliances can be used to create security boundaries to protect the application deployments in the protected network.</span></span>

<span data-ttu-id="f427e-317">Os NSGs usam cinco tuplas para avaliar o tráfego (e que são usadas nas regras que você configura para o NSG):</span><span class="sxs-lookup"><span data-stu-id="f427e-317">NSGs use a 5-tuple to evaluate traffic (and are used in the rules you configure for the NSG):</span></span>

-   [<span data-ttu-id="f427e-318">Endereço IP de origem e de destino</span><span class="sxs-lookup"><span data-stu-id="f427e-318">Source and destination IP address</span></span>](https://support.microsoft.com/help/969029/the-functionality-for-source-ip-address-selection-in-windows-server-2008-and-in-windows-vista-differs-from-the-corresponding-functionality-in-earlier-versions-of-windows)

-   [<span data-ttu-id="f427e-319">Porta de origem e de destino</span><span class="sxs-lookup"><span data-stu-id="f427e-319">Source and destination port</span></span>](https://technet.microsoft.com/library/dd197515)

-   <span data-ttu-id="f427e-320">Protocolo: [protocolo TCP](https://technet.microsoft.com/library/cc940037.aspx) ou [protocolo UDP](https://technet.microsoft.com/library/cc940034.aspx)</span><span class="sxs-lookup"><span data-stu-id="f427e-320">Protocol: [Transmission Control Protocol (TCP)](https://technet.microsoft.com/library/cc940037.aspx) or [User Datagram Protocol (UDP)](https://technet.microsoft.com/library/cc940034.aspx)</span></span>

<span data-ttu-id="f427e-321">Isso significa que você pode controlar o acesso entre uma VM individual e um grupo de VMs ou entre uma VM individual e outra VM individual ou ainda entre sub-redes inteiras.</span><span class="sxs-lookup"><span data-stu-id="f427e-321">This means you can control access between a single VM and a group of VMs, or a single VM to another single VM, or between entire subnets.</span></span> <span data-ttu-id="f427e-322">Novamente, tenha em mente que isso é simples uma filtragem de pacote com estado simples e não uma inspeção de pacote completa.</span><span class="sxs-lookup"><span data-stu-id="f427e-322">Again, keep in mind that this is simple stateful packet filtering, not full packet inspection.</span></span> <span data-ttu-id="f427e-323">Não há nenhuma capacidade IPS ou IDS de nível de rede ou de validação de protocolo em um Grupo de Segurança de Rede.</span><span class="sxs-lookup"><span data-stu-id="f427e-323">There is no protocol validation or network level IDS or IPS capability in a Network Security Group.</span></span>

<span data-ttu-id="f427e-324">Um NSG vem com algumas regras internas às quais você deve estar atento.</span><span class="sxs-lookup"><span data-stu-id="f427e-324">An NSG comes with some built-in rules that you should be aware of.</span></span> <span data-ttu-id="f427e-325">Estes são:</span><span class="sxs-lookup"><span data-stu-id="f427e-325">These are:</span></span>

-   <span data-ttu-id="f427e-326">**Permitir todo o tráfego em uma rede virtual específica:** todas as VMs na mesma Rede Virtual do Azure podem se comunicar umas com as outras.</span><span class="sxs-lookup"><span data-stu-id="f427e-326">**Allow all traffic within a specific virtual network:** All VMs on the same Azure Virtual Network can communicate with each other.</span></span>

-   <span data-ttu-id="f427e-327">**Permitir a entrada de balanceamento de carga do Azure:** essa regra permite tráfego de qualquer endereço de origem para qualquer endereço de destino para o Azure Load Balancer.</span><span class="sxs-lookup"><span data-stu-id="f427e-327">**Allow Azure load balancing to inbound:** This rule allows traffic from any source address to any destination address for the Azure load balancer.</span></span>

-   <span data-ttu-id="f427e-328">**Negar todas as entradas:** essa regra bloqueia todo o fornecimento de tráfego da Internet que você tenha permitido explicitamente.</span><span class="sxs-lookup"><span data-stu-id="f427e-328">**Deny all inbound:** This rule blocks all traffic sourcing from the Internet that you have explicitly allowed.</span></span>

-   <span data-ttu-id="f427e-329">**Permitir todo o tráfego de saída à Internet:** essa regra permite que VMs iniciem conexões com a Internet.</span><span class="sxs-lookup"><span data-stu-id="f427e-329">**Allow all traffic outbound to the Internet:** This rule allows VMs to initiate connections to the Internet.</span></span> <span data-ttu-id="f427e-330">Se você não quiser que essas conexões sejam iniciadas, você precisará criar uma regra para bloquear as conexões ou aplicar o túnel forçado.</span><span class="sxs-lookup"><span data-stu-id="f427e-330">If you do not want these connections initiated, you need to create a rule to block those connections or enforce forced tunneling.</span></span>

#### <a name="system-routes-and-user-defined-routes"></a><span data-ttu-id="f427e-331">Rotas de sistema e rotas definidas pelo usuário</span><span class="sxs-lookup"><span data-stu-id="f427e-331">System routes and user-defined routes</span></span>

<span data-ttu-id="f427e-332">Ao adicionar VMs (máquinas virtuais) a uma VNet (rede virtual) no Azure, você observará que as VMs podem se comunicar automaticamente com outras VMs na rede.</span><span class="sxs-lookup"><span data-stu-id="f427e-332">When you add virtual machines (VMs) to a virtual network (VNet) in Azure, you  notice that the VMs are able to communicate with each other over the network, automatically.</span></span> <span data-ttu-id="f427e-333">Não é necessário especificar um gateway, mesmo que as VMs estejam em sub-redes diferentes.</span><span class="sxs-lookup"><span data-stu-id="f427e-333">You do not need to specify a gateway, even though the VMs are in different subnets.</span></span>

<span data-ttu-id="f427e-334">O mesmo vale para a comunicação entre as VMs para a Internet pública e até mesmo em suas instalações de rede quando houver uma conexão híbrida do Azure para o seu próprio datacenter.</span><span class="sxs-lookup"><span data-stu-id="f427e-334">The same is true for communication from the VMs to the public Internet, and even to your on-premises network when a hybrid connection from Azure to your own datacenter is present.</span></span>

![Rotas do sistema](media/azure-network-security/azure-network-security-fig-9.png)

<span data-ttu-id="f427e-336">Esse fluxo de comunicação é possível porque o Azure usa uma série de rotas do sistema para definir como o tráfego IP flui.</span><span class="sxs-lookup"><span data-stu-id="f427e-336">This flow of communication is possible because Azure uses a series of system routes to define how IP traffic flows.</span></span> <span data-ttu-id="f427e-337">As rotas de sistema controlam o fluxo de comunicação nos seguintes cenários:</span><span class="sxs-lookup"><span data-stu-id="f427e-337">System routes control the flow of communication in the following scenarios:</span></span>

-   <span data-ttu-id="f427e-338">De dentro da mesma sub-rede.</span><span class="sxs-lookup"><span data-stu-id="f427e-338">From within the same subnet.</span></span>

-   <span data-ttu-id="f427e-339">De uma sub-rede para outra em uma VNet.</span><span class="sxs-lookup"><span data-stu-id="f427e-339">From a subnet to another within a VNet.</span></span>

-   <span data-ttu-id="f427e-340">De VMs com a Internet.</span><span class="sxs-lookup"><span data-stu-id="f427e-340">From VMs to the Internet.</span></span>

-   <span data-ttu-id="f427e-341">De uma VNet para outra VNet por meio de um gateway VPN.</span><span class="sxs-lookup"><span data-stu-id="f427e-341">From a VNet to another VNet through a VPN gateway.</span></span>

-   <span data-ttu-id="f427e-342">De uma VNet para outra VNet por meio de emparelhamento VNet ([encadeamento de serviços](https://docs.microsoft.com/azure/virtual-network/virtual-network-peering-overview)).</span><span class="sxs-lookup"><span data-stu-id="f427e-342">From a VNet to another VNet through VNet Peering ([Service Chaining](https://docs.microsoft.com/azure/virtual-network/virtual-network-peering-overview)).</span></span>

-   <span data-ttu-id="f427e-343">De uma VNet à sua rede local por meio de um gateway de VPN.</span><span class="sxs-lookup"><span data-stu-id="f427e-343">From a VNet to your on-premises network through a VPN gateway.</span></span>

<span data-ttu-id="f427e-344">Muitas empresas têm requisitos rigorosos de segurança de conformidade que exigem a inspeção local de todos os pacotes de rede, para impor políticas específicas.</span><span class="sxs-lookup"><span data-stu-id="f427e-344">Many enterprises have strict security and compliance requirements that require on-premises inspection of all network packets to enforce specific polices.</span></span> <span data-ttu-id="f427e-345">O Azure fornece um mecanismo chamado [túnel forçado](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-forced-tunneling) que direciona o tráfego de VMs para o local, por meio da criação de uma rota personalizada ou de anúncios [BGP (Border Gateway Protocol)](https://docs.microsoft.com/windows-server/remote/remote-access/bgp/border-gateway-protocol-bgp) por meio de ExpressRoute ou VPN.</span><span class="sxs-lookup"><span data-stu-id="f427e-345">Azure provides a mechanism called [forced tunneling](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-forced-tunneling) that routes traffic from the VMs to on-premises by creating a custom route or by [Border Gateway Protocol (BGP)](https://docs.microsoft.com/windows-server/remote/remote-access/bgp/border-gateway-protocol-bgp) advertisements through ExpressRoute or VPN.</span></span>

<span data-ttu-id="f427e-346">O túnel forçado no Azure é configurado por meio de UDR (rotas de definidas pelo usuário) de rede virtual.</span><span class="sxs-lookup"><span data-stu-id="f427e-346">Forced tunneling in Azure is configured via virtual network user-defined routes (UDR).</span></span> <span data-ttu-id="f427e-347">Redirecionar o tráfego para um site local é expressado como uma Rota Padrão para o gateway de VPN do Azure.</span><span class="sxs-lookup"><span data-stu-id="f427e-347">Redirecting traffic to an on-premises site is expressed as a Default Route to the Azure VPN gateway.</span></span>

<span data-ttu-id="f427e-348">A seção a seguir lista a limitação atual da tabela de roteamento e as rotas para uma Rede Virtual do Azure:</span><span class="sxs-lookup"><span data-stu-id="f427e-348">The following section lists the current limitation of the routing table and routes for an Azure Virtual Network:</span></span>

-   <span data-ttu-id="f427e-349">Cada sub-rede de rede virtual tem uma tabela de roteamento interna do sistema.</span><span class="sxs-lookup"><span data-stu-id="f427e-349">Each virtual network subnet has a built-in, system routing table.</span></span> <span data-ttu-id="f427e-350">A tabela de roteamento do sistema tem estes três grupos de rotas:</span><span class="sxs-lookup"><span data-stu-id="f427e-350">The system routing table has the following three groups of routes:</span></span>

 -  <span data-ttu-id="f427e-351">**Rotas locais de Rede Virtual:** diretamente para as VMs de destino na mesma rede virtual</span><span class="sxs-lookup"><span data-stu-id="f427e-351">**Local VNet routes:** Directly to the destination VMs in the same virtual network</span></span>

 - <span data-ttu-id="f427e-352">**Rotas locais:** gateway de VPN do Azure</span><span class="sxs-lookup"><span data-stu-id="f427e-352">**On premises routes:** To the Azure VPN gateway</span></span>

 -  <span data-ttu-id="f427e-353">**Rota padrão:** diretamente para a Internet.</span><span class="sxs-lookup"><span data-stu-id="f427e-353">**Default route:** Directly to the Internet.</span></span> <span data-ttu-id="f427e-354">Os pacotes destinados para os endereços IP privados não cobertos pelas duas rotas anteriores serão removidos.</span><span class="sxs-lookup"><span data-stu-id="f427e-354">Packets destined to the private IP addresses not covered by the previous two routes are dropped.</span></span>

-   <span data-ttu-id="f427e-355">Com a liberação de rotas definidas pelo usuário, você poderá criar uma tabela de roteamento para adicionar uma rota padrão e, em seguida, associar a tabela de roteamento às suas sub-redes de VNet para habilitar o túnel forçado nessas sub-redes.</span><span class="sxs-lookup"><span data-stu-id="f427e-355">With the release of user-defined routes, you can create a routing table to add a default route, and then associate the routing table to your VNet subnet to enable forced tunneling on those subnets.</span></span>

-   <span data-ttu-id="f427e-356">Você precisa definir um "site padrão" entre sites locais entre locais conectado à rede virtual.</span><span class="sxs-lookup"><span data-stu-id="f427e-356">You need to set a "default site" among the cross-premises local sites connected to the virtual network.</span></span>

-   <span data-ttu-id="f427e-357">O túnel forçado deve ser associado a uma Rede Virtual que tem um gateway de VPN de roteamento dinâmico (e não um gateway estático).</span><span class="sxs-lookup"><span data-stu-id="f427e-357">Forced tunneling must be associated with a VNet that has a dynamic routing VPN gateway (not a static gateway).</span></span>

- <span data-ttu-id="f427e-358">O túnel forçado do ExpressRoute não é configurado por meio deste mecanismo, mas é habilitado por meio do anúncio de uma rota padrão por meio de sessões de emparelhamento via protocolo BGP do ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="f427e-358">ExpressRoute forced tunneling is not configured via this mechanism, but instead, is enabled by advertising a default route via the ExpressRoute BGP peering sessions.</span></span>

> [!Note]
> <span data-ttu-id="f427e-359">Para obter mais informações, veja a [Documentação do ExpressRoute](https://azure.microsoft.com/documentation/services/expressroute/).</span><span class="sxs-lookup"><span data-stu-id="f427e-359">For more information, see the [ExpressRoute Documentation](https://azure.microsoft.com/documentation/services/expressroute/) for more information.</span></span>

#### <a name="network-security-appliances"></a><span data-ttu-id="f427e-360">Soluções de segurança de rede</span><span class="sxs-lookup"><span data-stu-id="f427e-360">Network security appliances</span></span>
<span data-ttu-id="f427e-361">Embora os Grupos de Segurança de Rede e as Rotas Definidas pelo Usuário possam fornecer uma determinada medida de segurança de rede nas camadas de rede e de transporte do [modelo OSI](https://en.wikipedia.org/wiki/OSI_model), haverá situações em que você desejará ou precisará habilitar a segurança em níveis mais altos da pilha de rede.</span><span class="sxs-lookup"><span data-stu-id="f427e-361">While Network Security Groups and User-Defined Routes can provide a certain measure of network security at the network and transport layers of the [OSI model](https://en.wikipedia.org/wiki/OSI_model), there are going to be situations where you want or need to enable security at higher levels of the networking stack.</span></span> <span data-ttu-id="f427e-362">Em tais situações, é recomendável que você implante dispositivos de segurança de rede virtual fornecidos por parceiros do Azure.</span><span class="sxs-lookup"><span data-stu-id="f427e-362">In such situations, we recommend that you deploy virtual network security appliances provided by Azure partners.</span></span>

![Soluções de segurança de rede](./media/azure-network-security/azure-network-security-fig-10.png)

<span data-ttu-id="f427e-364">Soluções de segurança de rede do Azure melhoram a segurança e as funções de rede da VNet e elas estão disponíveis por diversos fornecedores por meio do [Azure Marketplace](https://azuremarketplace.microsoft.com).</span><span class="sxs-lookup"><span data-stu-id="f427e-364">Azure network security appliances improve VNet security and network functions, and they’re available from numerous vendors via the [Azure Marketplace](https://azuremarketplace.microsoft.com).</span></span> <span data-ttu-id="f427e-365">Esses dispositivos de segurança virtual podem ser implantados para fornecer:</span><span class="sxs-lookup"><span data-stu-id="f427e-365">These virtual security appliances can be deployed to provide:</span></span>

-   <span data-ttu-id="f427e-366">Firewalls altamente disponíveis</span><span class="sxs-lookup"><span data-stu-id="f427e-366">Highly available firewalls</span></span>

-   <span data-ttu-id="f427e-367">Prevenção de intrusões</span><span class="sxs-lookup"><span data-stu-id="f427e-367">Intrusion prevention</span></span>

-   <span data-ttu-id="f427e-368">Detecção de intrusões</span><span class="sxs-lookup"><span data-stu-id="f427e-368">Intrusion detection</span></span>

-   <span data-ttu-id="f427e-369">WAFs (firewalls de aplicativo Web)</span><span class="sxs-lookup"><span data-stu-id="f427e-369">Web application firewalls (WAFs)</span></span>

-   <span data-ttu-id="f427e-370">Otimização WAN</span><span class="sxs-lookup"><span data-stu-id="f427e-370">WAN optimization</span></span>

-   <span data-ttu-id="f427e-371">Roteamento</span><span class="sxs-lookup"><span data-stu-id="f427e-371">Routing</span></span>

-   <span data-ttu-id="f427e-372">Balanceamento de carga</span><span class="sxs-lookup"><span data-stu-id="f427e-372">Load balancing</span></span>

-   <span data-ttu-id="f427e-373">VPN</span><span class="sxs-lookup"><span data-stu-id="f427e-373">VPN</span></span>

-   <span data-ttu-id="f427e-374">Gerenciamento de certificados</span><span class="sxs-lookup"><span data-stu-id="f427e-374">Certificate management</span></span>

-   <span data-ttu-id="f427e-375">Active Directory</span><span class="sxs-lookup"><span data-stu-id="f427e-375">Active Directory</span></span>

-   <span data-ttu-id="f427e-376">Autenticação multifator</span><span class="sxs-lookup"><span data-stu-id="f427e-376">Multifactor authentication</span></span>

#### <a name="application-gateway"></a><span data-ttu-id="f427e-377">Gateway de Aplicativo</span><span class="sxs-lookup"><span data-stu-id="f427e-377">Application gateway</span></span>

<span data-ttu-id="f427e-378">O [Gateway de Aplicativo do Microsoft Azure](https://docs.microsoft.com/azure/application-gateway/application-gateway-introduction) é uma solução de virtualização dedicada que fornece um ADC (controlador de entrega de aplicativos) como um serviço.</span><span class="sxs-lookup"><span data-stu-id="f427e-378">[Microsoft Azure Application Gateway](https://docs.microsoft.com/azure/application-gateway/application-gateway-introduction) is a dedicated virtual appliance that provides an application delivery controller (ADC) as a service.</span></span>

 ![Gateway de Aplicativo](./media/azure-network-security/azure-network-security-fig-11.png)

<span data-ttu-id="f427e-380">O Gateway de Aplicativo permite otimizar o desempenho e disponibilidade do Web farm descarregando a terminação SSL com uso intensivo de CPU para o Gateway de Aplicativo (descarregamento SSL).</span><span class="sxs-lookup"><span data-stu-id="f427e-380">Application Gateway enables you to optimize web farm performance and availability by offloading CPU intensive SSL termination to the application gateway (SSL-offloading).</span></span> <span data-ttu-id="f427e-381">Ele também fornece outros recursos de roteamento de camada 7, incluindo:</span><span class="sxs-lookup"><span data-stu-id="f427e-381">It also provides other layer 7 routing capabilities including:</span></span>

-   <span data-ttu-id="f427e-382">Distribuição round robin do tráfego de entrada</span><span class="sxs-lookup"><span data-stu-id="f427e-382">Round-robin distribution of incoming traffic</span></span>

-   <span data-ttu-id="f427e-383">Afinidade de sessão baseada em cookie</span><span class="sxs-lookup"><span data-stu-id="f427e-383">Cookie-based session affinity</span></span>

-   <span data-ttu-id="f427e-384">Visão geral do roteamento baseado em caminho de URL</span><span class="sxs-lookup"><span data-stu-id="f427e-384">URL path-based routing</span></span>

-   <span data-ttu-id="f427e-385">Capacidade de hospedar vários sites subjacentes a um único Gateway de Aplicativo</span><span class="sxs-lookup"><span data-stu-id="f427e-385">Ability to host multiple websites behind a single Application Gateway</span></span>


<span data-ttu-id="f427e-386">Um [WAF (firewall do aplicativo Web)](https://docs.microsoft.com/azure/application-gateway/application-gateway-web-application-firewall-overview) também é fornecido como parte do gateway de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="f427e-386">A [web application firewall (WAF)](https://docs.microsoft.com/azure/application-gateway/application-gateway-web-application-firewall-overview) is also provided as part of the application gateway.</span></span> <span data-ttu-id="f427e-387">Isso oferece proteção para aplicativos Web contra explorações e vulnerabilidades comuns da Web.</span><span class="sxs-lookup"><span data-stu-id="f427e-387">This provides protection to web applications from common web vulnerabilities and exploits.</span></span> <span data-ttu-id="f427e-388">O Gateway de Aplicativo pode ser configurado como um gateway voltado para a Internet, um gateway apenas interno ou uma combinação de ambos.</span><span class="sxs-lookup"><span data-stu-id="f427e-388">Application Gateway can be configured as an Internet facing gateway, internal only gateway, or a combination of both.</span></span>

<span data-ttu-id="f427e-389">O WAF do Gateway de Aplicativo pode ser executado no modo de detecção ou de prevenção.</span><span class="sxs-lookup"><span data-stu-id="f427e-389">Application Gateway WAF can be run in detection or prevention mode.</span></span> <span data-ttu-id="f427e-390">Um caso de uso comum é que administradores o executem no modo de detecção para observar o tráfego em busca de padrões mal-intencionados.</span><span class="sxs-lookup"><span data-stu-id="f427e-390">A common use case is for administrators to run in detection mode to observe traffic for malicious patterns.</span></span> <span data-ttu-id="f427e-391">Após a detecção de explorações potenciais, colocá-lo no modo de prevenção bloqueia o tráfego de entrada suspeito.</span><span class="sxs-lookup"><span data-stu-id="f427e-391">Once potential exploits are detected, turning to prevention mode blocks suspicious incoming traffic.</span></span>

 ![Gateway de Aplicativo](./media/azure-network-security/azure-network-security-fig-12.png)

<span data-ttu-id="f427e-393">Além disso, o WAF de Gateway de Aplicativo ajuda a monitorar os aplicativos Web contra ataques usando um log WAF em tempo real que é integrado com o [Azure Monitor](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-overview) e a [Central de Segurança do Azure](https://azure.microsoft.com/services/security-center/) para acompanhar alertas do WAF e monitorar as tendências com facilidade.</span><span class="sxs-lookup"><span data-stu-id="f427e-393">In addition, Application Gateway WAF helps you monitor web applications against attacks using a real-time WAF log that is integrated with [Azure Monitor](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-overview) and [Azure Security Center](https://azure.microsoft.com/services/security-center/) to track WAF alerts and easily monitor trends.</span></span>

<span data-ttu-id="f427e-394">O log em formato JSON vai diretamente para a conta de armazenamento do cliente.</span><span class="sxs-lookup"><span data-stu-id="f427e-394">The JSON formatted log goes directly to the customer’s storage account.</span></span> <span data-ttu-id="f427e-395">Você tem controle total sobre esses logs e pode aplicar suas próprias políticas de retenção.</span><span class="sxs-lookup"><span data-stu-id="f427e-395">You have full control over these logs and can apply your own retention policies.</span></span>

<span data-ttu-id="f427e-396">Você também pode ingerir esses logs em seu próprio sistema de análise usando a [Integração de Log do Azure](https://aka.ms/AzLog).</span><span class="sxs-lookup"><span data-stu-id="f427e-396">You can also ingest these logs into your own analytics system using [Azure Log Integration](https://aka.ms/AzLog).</span></span> <span data-ttu-id="f427e-397">Logs de WAF também são integrados com o [OMS (Operations Management Suite)](https://www.microsoft.com/cloud-platform/operations-management-suite) de modo que você pode usar o OMS Log Analytics para executar consultas refinadas sofisticadas.</span><span class="sxs-lookup"><span data-stu-id="f427e-397">WAF logs are also integrated with [Operations Management Suite (OMS)](https://www.microsoft.com/cloud-platform/operations-management-suite) so you can use OMS log analytics to execute sophisticated fine-grained queries.</span></span>

#### <a name="azure-web-application-firewall-waf"></a><span data-ttu-id="f427e-398">WAF (Firewall do aplicativo Web) do Azure</span><span class="sxs-lookup"><span data-stu-id="f427e-398">Azure web application firewall (WAF)</span></span>

<span data-ttu-id="f427e-399">Aplicativos Web são cada vez mais alvo de ataques mal-intencionados, que exploram vulnerabilidades conhecidas comuns como injeção SQL, ataques de script entre sites e outros ataques que aparecem nos [OWASP top 10](https://www.owasp.org/index.php/Category:OWASP_Top_Ten_Project).</span><span class="sxs-lookup"><span data-stu-id="f427e-399">Web applications are increasingly targets of malicious attacks that exploit common known vulnerabilities, such as SQL injection, cross site scripting attacks, and other attacks that appear in the [OWASP top 10](https://www.owasp.org/index.php/Category:OWASP_Top_Ten_Project).</span></span> <span data-ttu-id="f427e-400">Impedir essas explorações no aplicativo requer manutenção rigorosa, aplicação de patches e monitoramento em várias camadas da topologia do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="f427e-400">Preventing such exploits in the application requires rigorous maintenance, patching, and monitoring at multiple layers of the application topology.</span></span>

 ![WAF (Firewall do Aplicativo Web) do Azure](./media/azure-network-security/azure-network-security-fig-13.png)

<span data-ttu-id="f427e-402">Um [Firewall do aplicativo Web (WAF)](https://docs.microsoft.com/azure/application-gateway/application-gateway-web-application-firewall-overview) centralizado pode proteger contra ataques da Web e simplifica o gerenciamento de segurança sem exigir nenhuma alteração de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="f427e-402">A centralized [web application firewall (WAF)](https://docs.microsoft.com/azure/application-gateway/application-gateway-web-application-firewall-overview) can protect against web attacks and simplifies security management without requiring any application changes.</span></span>

<span data-ttu-id="f427e-403">Uma solução WAF também pode reagir a uma ameaça de segurança mais rapidamente ao aplicar um patch contra uma vulnerabilidade conhecida em um local central do que a proteção de cada um dos aplicativos Web individuais.</span><span class="sxs-lookup"><span data-stu-id="f427e-403">A WAF solution can also react to a security threat faster by patching a known vulnerability at a central location versus securing each of individual web applications.</span></span> <span data-ttu-id="f427e-404">Os gateways de aplicativos existentes podem ser facilmente convertidos em um gateway de aplicativo com firewall de aplicativo Web.</span><span class="sxs-lookup"><span data-stu-id="f427e-404">Existing application gateways can be converted to a web application firewall enabled application gateway easily.</span></span>

#### <a name="network-availability-controls"></a><span data-ttu-id="f427e-405">Controles de disponibilidade de rede</span><span class="sxs-lookup"><span data-stu-id="f427e-405">Network availability controls</span></span>

<span data-ttu-id="f427e-406">Há diferentes opções para distribuir o tráfego de rede usando o Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="f427e-406">There are different options to distribute network traffic using Microsoft Azure.</span></span> <span data-ttu-id="f427e-407">Essas opções funcionam de forma diferente uma da outra, com conjuntos diferentes de recursos e permitindo cenários diferentes.</span><span class="sxs-lookup"><span data-stu-id="f427e-407">These options work differently from each other, having a different feature set and support different scenarios.</span></span> <span data-ttu-id="f427e-408">Cada uma pode ser usada isoladamente ou em combinação.</span><span class="sxs-lookup"><span data-stu-id="f427e-408">They can each be used in isolation, or combining them.</span></span>

<span data-ttu-id="f427e-409">A seguir estão os controles de disponibilidade de rede:</span><span class="sxs-lookup"><span data-stu-id="f427e-409">Following are the Network availability controls:</span></span>

-   <span data-ttu-id="f427e-410">Azure Load Balancer</span><span class="sxs-lookup"><span data-stu-id="f427e-410">Azure Load Balancer</span></span>

-   <span data-ttu-id="f427e-411">Gateway de Aplicativo</span><span class="sxs-lookup"><span data-stu-id="f427e-411">Application Gateway</span></span>

-   <span data-ttu-id="f427e-412">Gerenciador de Tráfego</span><span class="sxs-lookup"><span data-stu-id="f427e-412">Traffic Manager</span></span>

<span data-ttu-id="f427e-413">**Azure Load Balancer**</span><span class="sxs-lookup"><span data-stu-id="f427e-413">**Azure Load balancer**</span></span>

<span data-ttu-id="f427e-414">Entrega alta disponibilidade e desempenho de rede a seus aplicativos.</span><span class="sxs-lookup"><span data-stu-id="f427e-414">Delivers high availability and network performance to your applications.</span></span> <span data-ttu-id="f427e-415">É um balanceador de carga do tipo Camada 4 (TCP, UDP) que distribui o tráfego de entrada entre as instâncias de serviço íntegras definidas em um conjunto de balanceadores de carga.</span><span class="sxs-lookup"><span data-stu-id="f427e-415">It is a Layer 4 (TCP, UDP) load balancer that distributes incoming traffic among healthy instances of services defined in a load-balanced set.</span></span>

 ![Azure Load Balancer](media/azure-network-security/azure-network-security-fig-14.png)


<span data-ttu-id="f427e-417">O Azure Load Balancer pode ser configurado para:</span><span class="sxs-lookup"><span data-stu-id="f427e-417">Azure Load Balancer can be configured to:</span></span>

-   <span data-ttu-id="f427e-418">Balancear carga de tráfego de entrada na Internet para máquinas virtuais.</span><span class="sxs-lookup"><span data-stu-id="f427e-418">Load balance incoming Internet traffic to virtual machines.</span></span> <span data-ttu-id="f427e-419">Essa configuração é conhecida como [balanceamento de carga voltada para a Internet](https://docs.microsoft.com/azure/load-balancer/load-balancer-internet-overview).</span><span class="sxs-lookup"><span data-stu-id="f427e-419">This configuration is known as [Internet-facing load balancing](https://docs.microsoft.com/azure/load-balancer/load-balancer-internet-overview).</span></span>

-   <span data-ttu-id="f427e-420">Balanceie o tráfego de carga entre as máquinas virtuais em uma rede virtual, entre as máquinas virtuais nos serviços de nuvem ou entre os computadores locais e as máquinas virtuais em uma rede virtual entre as instalações.</span><span class="sxs-lookup"><span data-stu-id="f427e-420">Load balance traffic between virtual machines in a virtual network, between virtual machines in cloud services, or between on-premises computers and virtual machines in a cross-premises virtual network.</span></span> <span data-ttu-id="f427e-421">Essa configuração é conhecida como [balanceamento de carga interno](https://docs.microsoft.com/azure/load-balancer/load-balancer-internal-overview).</span><span class="sxs-lookup"><span data-stu-id="f427e-421">This configuration is known as [internal load balancing](https://docs.microsoft.com/azure/load-balancer/load-balancer-internal-overview).</span></span>

-   <span data-ttu-id="f427e-422">Encaminhe o tráfego externo para uma máquina virtual específica.</span><span class="sxs-lookup"><span data-stu-id="f427e-422">Forward external traffic to a specific virtual machine.</span></span>

<span data-ttu-id="f427e-423">Todos os recursos na nuvem precisam de um endereço IP público para serem acessíveis pela Internet.</span><span class="sxs-lookup"><span data-stu-id="f427e-423">All resources in the cloud need a public IP address to be reachable from the Internet.</span></span> <span data-ttu-id="f427e-424">A infraestrutura de nuvem no Azure usa endereços IP não roteáveis para seus recursos.</span><span class="sxs-lookup"><span data-stu-id="f427e-424">The cloud infrastructure in Azure uses non-routable IP addresses for its resources.</span></span> <span data-ttu-id="f427e-425">O Azure usa a conversão de endereços de rede (NAT) com os endereços IP públicos para se comunicar com a Internet.</span><span class="sxs-lookup"><span data-stu-id="f427e-425">Azure uses network address translation (NAT) with public IP addresses to communicate to the Internet.</span></span>

 <span data-ttu-id="f427e-426">**Gateway de Aplicativo**</span><span class="sxs-lookup"><span data-stu-id="f427e-426">**Application gateway**</span></span>

 <span data-ttu-id="f427e-427">O Gateway de Aplicativo funciona na camada de aplicativo (Camada 7 na pilha de referência de rede OSI).</span><span class="sxs-lookup"><span data-stu-id="f427e-427">Application Gateway works at the application layer (Layer 7 in the OSI network reference stack).</span></span> <span data-ttu-id="f427e-428">Ele atua como um serviço de proxy inverso, encerrando a conexão do cliente e encaminhando solicitações aos pontos de extremidade de back-end.</span><span class="sxs-lookup"><span data-stu-id="f427e-428">It acts as a reverse-proxy service, terminating the client connection and forwarding requests to back-end endpoints.</span></span>

 <span data-ttu-id="f427e-429">**Gerenciador de tráfego**</span><span class="sxs-lookup"><span data-stu-id="f427e-429">**Traffic manager**</span></span>

<span data-ttu-id="f427e-430">O Gerenciador de Tráfego do Microsoft Azure permite controlar a distribuição do tráfego do usuário para pontos de extremidade do serviço em diferentes datacenters.</span><span class="sxs-lookup"><span data-stu-id="f427e-430">Microsoft Azure Traffic Manager allows you to control the distribution of user traffic for service endpoints in different datacenters.</span></span> <span data-ttu-id="f427e-431">Os pontos de extremidade de serviço com suporte no Gerenciador de Tráfego incluem VMs do Azure, Aplicativos Web e serviços de nuvem.</span><span class="sxs-lookup"><span data-stu-id="f427e-431">Service endpoints supported by Traffic Manager include Azure VMs, Web Apps, and cloud services.</span></span> <span data-ttu-id="f427e-432">Você também pode usar o Gerenciador de Tráfego com pontos de extremidade externos e não do Azure.</span><span class="sxs-lookup"><span data-stu-id="f427e-432">You can also use Traffic Manager with external, non-Azure endpoints.</span></span>

<span data-ttu-id="f427e-433">O Gerenciador de Tráfego usa o DNS (Sistema de Nome de Domínio) para direcionar solicitações de cliente para o ponto de extremidade mais apropriado com base em um [método de roteamento de tráfego](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-routing-methods) e a integridade dos pontos de extremidade.</span><span class="sxs-lookup"><span data-stu-id="f427e-433">Traffic Manager uses the Domain Name System (DNS) to direct client requests to the most appropriate endpoint based on a [traffic-routing method](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-routing-methods) and the health of the endpoints.</span></span> <span data-ttu-id="f427e-434">O Gerenciador de Tráfego oferece uma variedade de métodos de roteamento de tráfego para atender às necessidades de diferentes aplicativo, [monitoramento](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-monitoring) de integridade do ponto de extremidade e failover automático.</span><span class="sxs-lookup"><span data-stu-id="f427e-434">Traffic Manager provides a range of traffic-routing methods to suit different application needs, endpoint health [monitoring](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-monitoring), and automatic failover.</span></span> <span data-ttu-id="f427e-435">O Gerenciador de Tráfego é resistente a falhas, incluindo a falha de toda a região do Azure.</span><span class="sxs-lookup"><span data-stu-id="f427e-435">Traffic Manager is resilient to failure, including the failure of an entire Azure region.</span></span>

<span data-ttu-id="f427e-436">O Gerenciador de Tráfego do Azure permite que você controle a distribuição do tráfego entre os pontos de extremidade do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="f427e-436">Azure Traffic Manager enables you to control the distribution of traffic across your application endpoints.</span></span> <span data-ttu-id="f427e-437">Um ponto de extremidade é qualquer serviço para a Internet hospedado dentro ou fora do Azure.</span><span class="sxs-lookup"><span data-stu-id="f427e-437">An endpoint is any Internet-facing service hosted inside or outside of Azure.</span></span>

<span data-ttu-id="f427e-438">O Gerenciador de Tráfego oferece dois benefícios principais:</span><span class="sxs-lookup"><span data-stu-id="f427e-438">Traffic Manager provides two key benefits:</span></span>

-   <span data-ttu-id="f427e-439">Distribuição do tráfego de acordo com um dos vários [métodos de roteamento de tráfego](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-routing-methods).</span><span class="sxs-lookup"><span data-stu-id="f427e-439">Distribution of traffic according to one of several [traffic-routing methods](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-routing-methods).</span></span>

-   <span data-ttu-id="f427e-440">[Monitoramento contínuo de integridade do ponto de extremidade](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-monitoring) e failover automático quando os pontos de extremidade falharem.</span><span class="sxs-lookup"><span data-stu-id="f427e-440">[Continuous monitoring of endpoint health](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-monitoring) and automatic failover when endpoints fail.</span></span>

<span data-ttu-id="f427e-441">Quando um cliente tenta se conectar a um serviço, ele primeiro deve resolver o nome DNS do serviço para um endereço IP.</span><span class="sxs-lookup"><span data-stu-id="f427e-441">When a client attempts to connect to a service, it must first resolve the DNS name of the service to an IP address.</span></span> <span data-ttu-id="f427e-442">O cliente se conecta a esse endereço IP para acessar o serviço.</span><span class="sxs-lookup"><span data-stu-id="f427e-442">The client then connects to that IP address to access the service.</span></span> <span data-ttu-id="f427e-443">O Gerenciador de Tráfego usa o DNS para direcionar clientes para pontos de extremidade de serviço específicos com base nas regras do método de roteamento de tráfego.</span><span class="sxs-lookup"><span data-stu-id="f427e-443">Traffic Manager uses DNS to direct clients to specific service endpoints based on the rules of the traffic-routing method.</span></span> <span data-ttu-id="f427e-444">Os clientes se conectam diretamente ao ponto de extremidade selecionado.</span><span class="sxs-lookup"><span data-stu-id="f427e-444">Clients connect to the selected endpoint directly.</span></span> <span data-ttu-id="f427e-445">O Gerenciador de Tráfego não é um proxy nem um gateway.</span><span class="sxs-lookup"><span data-stu-id="f427e-445">Traffic Manager is not a proxy or a gateway.</span></span> <span data-ttu-id="f427e-446">O Gerenciador de Tráfego não vê o tráfego que passa entre o cliente e o serviço.</span><span class="sxs-lookup"><span data-stu-id="f427e-446">Traffic Manager does not see the traffic passing between the client and the service.</span></span>

### <a name="azure-network-validation"></a><span data-ttu-id="f427e-447">Validação de rede do Azure</span><span class="sxs-lookup"><span data-stu-id="f427e-447">Azure network validation</span></span>

<span data-ttu-id="f427e-448">A validação de rede do Azure é para assegurar que a rede do Azure esteja funcionando conforme ela é configurada; a validação pode ser feita usando os serviços e recursos disponíveis para monitorar a rede.</span><span class="sxs-lookup"><span data-stu-id="f427e-448">Azure network validation is to ensure that the Azure network is operating as it is configured and validation can be done using the services and features available to monitor the network.</span></span> <span data-ttu-id="f427e-449">Com o Observador de Rede do Azure, você pode acessar uma grande quantidade de recursos de registro em log e de diagnóstico que capacitam você com insights para entender a integridade e o desempenho da rede.</span><span class="sxs-lookup"><span data-stu-id="f427e-449">With Azure Network Watcher, you can access a plethora of logging and diagnostic capabilities that empower you with insights to understand your network performance and health.</span></span> <span data-ttu-id="f427e-450">Esses recursos são acessíveis por meio do Portal, do Power Shell, da CLI, da API Rest e do SDK.</span><span class="sxs-lookup"><span data-stu-id="f427e-450">These capabilities are accessible via Portal, Power Shell, CLI, Rest API and SDK.</span></span>

<span data-ttu-id="f427e-451">A Segurança Operacional do Azure refere-se a serviços, controles e recursos disponíveis aos usuários para proteger seus dados, aplicativos e outros recursos no Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="f427e-451">Azure Operational Security refers to the services, controls, and features available to users for protecting their data, applications, and other assets in Microsoft Azure.</span></span> <span data-ttu-id="f427e-452">A Segurança Operacional do Azure baseia-se em uma estrutura que incorpora o conhecimento adquirido por meio de várias funcionalidades que são exclusivas à Microsoft, incluindo o Microsoft Security Development Lifecycle (SDL), o programa Microsoft Security Response Center e uma conscientização profunda do cenário de ameaças à segurança cibernética.</span><span class="sxs-lookup"><span data-stu-id="f427e-452">Azure Operational Security is built on a framework that incorporates the knowledge gained through a various capabilities that are unique to Microsoft, including the Microsoft Security Development Lifecycle (SDL), the Microsoft Security Response Centre program, and deep awareness of the cyber security threat landscape.</span></span>

-   [<span data-ttu-id="f427e-453">Azure Operations Management Suite</span><span class="sxs-lookup"><span data-stu-id="f427e-453">Azure Operations Management Suite</span></span>](https://docs.microsoft.com/azure/operations-management-suite/operations-management-suite-overview)

-   [<span data-ttu-id="f427e-454">Central de Segurança do Azure</span><span class="sxs-lookup"><span data-stu-id="f427e-454">Azure Security Center</span></span>](https://docs.microsoft.com/azure/security-center/security-center-intro)

-   [<span data-ttu-id="f427e-455">Azure Monitor</span><span class="sxs-lookup"><span data-stu-id="f427e-455">Azure Monitor</span></span>](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-overview)

-   [<span data-ttu-id="f427e-456">Observador de Rede do Azure</span><span class="sxs-lookup"><span data-stu-id="f427e-456">Azure Network watcher</span></span>](https://docs.microsoft.com/azure/network-watcher/network-watcher-monitoring-overview)

-   [<span data-ttu-id="f427e-457">Azure Storage Analytics</span><span class="sxs-lookup"><span data-stu-id="f427e-457">Azure Storage analytics</span></span>](https://docs.microsoft.com/rest/api/storageservices/fileservices/storage-analytics)

-   <span data-ttu-id="f427e-458">Gerenciador de Recursos do Azure</span><span class="sxs-lookup"><span data-stu-id="f427e-458">Azure Resource Manager</span></span>

#### <a name="azure-resource-manager"></a><span data-ttu-id="f427e-459">Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="f427e-459">Azure resource manager</span></span>

<span data-ttu-id="f427e-460">As pessoas e processos que operam o Microsoft Azure são talvez o recurso de segurança mais importante da plataforma.</span><span class="sxs-lookup"><span data-stu-id="f427e-460">The people and processes that operate Microsoft Azure are perhaps the most important security feature of the platform.</span></span> <span data-ttu-id="f427e-461">Esta seção descreve recursos que ajudam a melhorar e manter a segurança, continuidade e privacidade da infraestrutura de datacenter global da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="f427e-461">This section describes features of Microsoft’s global datacenter infrastructure that help enhance and maintain security, continuity, and privacy.</span></span>

<span data-ttu-id="f427e-462">A infraestrutura do seu aplicativo geralmente é composta de vários componentes; talvez uma máquina virtual, uma conta de armazenamento e uma rede virtual ou aplicativo Web, banco de dados, servidor de banco de dados e serviços de terceiros.</span><span class="sxs-lookup"><span data-stu-id="f427e-462">The infrastructure for your application is typically made up of many components – maybe a virtual machine, storage account, and virtual network, or a web app, database, database server, and third-party services.</span></span> <span data-ttu-id="f427e-463">Tais componentes não são vistos como entidades separadas, em vez disso, eles são mostrados como partes relacionadas e interdependentes de uma única entidade.</span><span class="sxs-lookup"><span data-stu-id="f427e-463">You do not see these components as separate entities, instead you see them as related and interdependent parts of a single entity.</span></span> <span data-ttu-id="f427e-464">Você deseja implantar, gerenciar e monitorá-los como um grupo.</span><span class="sxs-lookup"><span data-stu-id="f427e-464">You want to deploy, manage, and monitor them as a group.</span></span> <span data-ttu-id="f427e-465">O Azure Resource Manager permite trabalhar com os recursos da sua solução como um grupo.</span><span class="sxs-lookup"><span data-stu-id="f427e-465">Azure Resource Manager enables you to work with the resources in your solution as a group.</span></span>

<span data-ttu-id="f427e-466">Você pode implantar, atualizar ou excluir todos os recursos da sua solução em uma única operação coordenada.</span><span class="sxs-lookup"><span data-stu-id="f427e-466">You can deploy, update, or delete all the resources for your solution in a single, coordinated operation.</span></span> <span data-ttu-id="f427e-467">Usar um modelo para a implantação e esse modelo pode ser útil para ambientes diferentes, como teste, preparação e produção.</span><span class="sxs-lookup"><span data-stu-id="f427e-467">You use a template for deployment and that template can work for different environments such as testing, staging, and production.</span></span> <span data-ttu-id="f427e-468">O Gerenciador de Recursos fornece recursos de segurança, auditoria e marcação para ajudá-lo a gerenciar seus recursos após a implantação.</span><span class="sxs-lookup"><span data-stu-id="f427e-468">Resource Manager provides security, auditing, and tagging features to help you manage your resources after deployment.</span></span>

<span data-ttu-id="f427e-469">**Os benefícios de usar o Resource Manager**</span><span class="sxs-lookup"><span data-stu-id="f427e-469">**The benefits of using Resource Manager**</span></span>

<span data-ttu-id="f427e-470">O Gerenciador de Recursos fornece vários benefícios:</span><span class="sxs-lookup"><span data-stu-id="f427e-470">Resource Manager provides several benefits:</span></span>

-   <span data-ttu-id="f427e-471">Você pode implantar, gerenciar e monitorar todos os recursos da sua solução como um grupo em vez de tratá-los individualmente.</span><span class="sxs-lookup"><span data-stu-id="f427e-471">You can deploy, manage, and monitor all the resources for your solution as a group, rather than handling these resources individually.</span></span>

-   <span data-ttu-id="f427e-472">Você pode implantar a solução repetidamente em todo seu ciclo de vida de desenvolvimento e com a confiança de que seus recursos serão implantados em um estado consistente.</span><span class="sxs-lookup"><span data-stu-id="f427e-472">You can repeatedly deploy your solution throughout the development lifecycle and have confidence your resources are deployed in a consistent state.</span></span>

-   <span data-ttu-id="f427e-473">Você pode gerenciar sua infraestrutura por meio de modelos declarativos em vez de scripts.</span><span class="sxs-lookup"><span data-stu-id="f427e-473">You can manage your infrastructure through declarative templates rather than scripts.</span></span>

-   <span data-ttu-id="f427e-474">Você pode definir as dependências entre os recursos para que eles sejam implantados na ordem correta.</span><span class="sxs-lookup"><span data-stu-id="f427e-474">You can define the dependencies between resources, so they are deployed in the correct order.</span></span>

-   <span data-ttu-id="f427e-475">Você pode aplicar o controle de acesso a todos os serviços no grupo de recursos, pois o RBAC (Controle de Acesso Baseado em Função) é integrado nativamente à plataforma de gerenciamento.</span><span class="sxs-lookup"><span data-stu-id="f427e-475">You can apply access control to all services in your resource group because Role-Based Access Control (RBAC) is natively integrated into the management platform.</span></span>

-   <span data-ttu-id="f427e-476">Você pode aplicar marcas aos recursos para organizar de modo lógico todos os recursos em sua assinatura.</span><span class="sxs-lookup"><span data-stu-id="f427e-476">You can apply tags to resources to logically organize all the resources in your subscription.</span></span>

-   <span data-ttu-id="f427e-477">Você pode esclarecer a cobrança da sua organização exibindo os custos para um grupo de recursos que compartilham a mesma marcação.</span><span class="sxs-lookup"><span data-stu-id="f427e-477">You can clarify your organization's billing by viewing costs for a group of resources sharing tag.</span></span>

> [!Note]
> <span data-ttu-id="f427e-478">O Gerenciador de Recursos fornece uma nova maneira de implantar e gerenciar suas soluções.</span><span class="sxs-lookup"><span data-stu-id="f427e-478">Resource Manager provides a new way to deploy and manage your solutions.</span></span> <span data-ttu-id="f427e-479">Se você usou o modelo de implantação anterior e quiser saber mais sobre as alterações, confira [Noções básicas sobre a implantação do Gerenciador de Recursos e a implantação clássica](https://docs.microsoft.com/azure/azure-resource-manager/resource-manager-deployment-model).</span><span class="sxs-lookup"><span data-stu-id="f427e-479">If you used the earlier deployment model and want to learn about the changes, see [Understanding Resource Manager deployment and classic deployment](https://docs.microsoft.com/azure/azure-resource-manager/resource-manager-deployment-model).</span></span>

## <a name="azure-network-logging-and-monitoring"></a><span data-ttu-id="f427e-480">Registro em log e monitoramento de rede do Azure</span><span class="sxs-lookup"><span data-stu-id="f427e-480">Azure network logging and monitoring</span></span>

<span data-ttu-id="f427e-481">O Azure oferece várias ferramentas para monitorar, prevenir, detectar e responder a eventos de segurança de rede.</span><span class="sxs-lookup"><span data-stu-id="f427e-481">Azure offers many tools to monitor, prevent, detect, and respond to network security events.</span></span> <span data-ttu-id="f427e-482">Algumas das ferramentas mais avançadas disponíveis nessa área incluem:</span><span class="sxs-lookup"><span data-stu-id="f427e-482">Some of the most powerful tools available to you in this area include:</span></span>

-   <span data-ttu-id="f427e-483">Observador de Rede</span><span class="sxs-lookup"><span data-stu-id="f427e-483">Network Watcher</span></span>

-   <span data-ttu-id="f427e-484">Monitoramento no nível do recurso de rede</span><span class="sxs-lookup"><span data-stu-id="f427e-484">Network Resource Level Monitoring</span></span>

-   <span data-ttu-id="f427e-485">Log Analytics</span><span class="sxs-lookup"><span data-stu-id="f427e-485">Log Analytics</span></span>

### <a name="network-watcher"></a><span data-ttu-id="f427e-486">Observador de Rede</span><span class="sxs-lookup"><span data-stu-id="f427e-486">Network watcher</span></span>

<span data-ttu-id="f427e-487">[Observador de Rede](https://docs.microsoft.com/azure/network-watcher/network-watcher-monitoring-overview) – o monitoramento baseado em cenários é fornecido com os recursos do Observador de Rede.</span><span class="sxs-lookup"><span data-stu-id="f427e-487">[Network Watcher](https://docs.microsoft.com/azure/network-watcher/network-watcher-monitoring-overview) - Scenario-based monitoring is provided with the features in Network Watcher.</span></span> <span data-ttu-id="f427e-488">Esse serviço inclui a captura de pacotes, próximo salto, verificação do fluxo de IP, exibição do grupo de segurança e logs de fluxo de NSG.</span><span class="sxs-lookup"><span data-stu-id="f427e-488">This service includes packet capture, next hop, IP flow verify, security group view, NSG flow logs.</span></span> <span data-ttu-id="f427e-489">O monitoramento no nível do cenário fornece uma exibição completa dos recursos de rede em contraste com o monitoramento de recursos de rede individual.</span><span class="sxs-lookup"><span data-stu-id="f427e-489">Scenario level monitoring provides an end to end view of network resources in contrast to individual network resource monitoring.</span></span>

 ![Observador de Rede](./media/azure-network-security/azure-network-security-fig-15.png)

<span data-ttu-id="f427e-491">O Observador de Rede é um serviço regional que permite monitorar e diagnosticar as condições em um nível do cenário da rede em, para e a partir do Azure.</span><span class="sxs-lookup"><span data-stu-id="f427e-491">Network Watcher is a regional service that enables you to monitor and diagnose conditions at a network scenario level in, to, and from Azure.</span></span> <span data-ttu-id="f427e-492">As ferramentas de diagnóstico e visualização da rede disponíveis com o Observador de Rede ajudam a entender, diagnosticar e ter informações para sua rede no Azure.</span><span class="sxs-lookup"><span data-stu-id="f427e-492">Network diagnostic and visualization tools available with Network Watcher help you understand, diagnose, and gain insights to your network in Azure.</span></span>

<span data-ttu-id="f427e-493">O Observador de Rede tem atualmente os seguintes recursos:</span><span class="sxs-lookup"><span data-stu-id="f427e-493">Network Watcher currently has the following capabilities:</span></span>

#### <a name="topology"></a><span data-ttu-id="f427e-494">Topologia</span><span class="sxs-lookup"><span data-stu-id="f427e-494">Topology</span></span>

<span data-ttu-id="f427e-495">A [topologia](https://docs.microsoft.com/azure/network-watcher/network-watcher-topology-overview) retorna um gráfico de recursos de rede em uma rede virtual.</span><span class="sxs-lookup"><span data-stu-id="f427e-495">[Topology](https://docs.microsoft.com/azure/network-watcher/network-watcher-topology-overview) returns a graph of network resources in a virtual network.</span></span> <span data-ttu-id="f427e-496">O gráfico mostra a interconexão entre os recursos para representar a conectividade de rede de ponta a ponta.</span><span class="sxs-lookup"><span data-stu-id="f427e-496">The graph depicts the interconnection between the resources to represent the end to end network connectivity.</span></span> <span data-ttu-id="f427e-497">No portal, a topologia retorna os objetos de recursos de acordo com a rede virtual.</span><span class="sxs-lookup"><span data-stu-id="f427e-497">In the portal, Topology returns the resource objects on as per virtual network basis.</span></span> <span data-ttu-id="f427e-498">As relações são representadas por linhas entre os recursos fora da região do Observador de Rede, mesmo se o grupo de recursos não for exibido.</span><span class="sxs-lookup"><span data-stu-id="f427e-498">The relationships are depicted by lines between the resources outside of the Network Watcher region, even if in the resource group will not be displayed.</span></span> <span data-ttu-id="f427e-499">Os recursos retornados na exibição do portal são um subconjunto dos componentes de rede mostrados.</span><span class="sxs-lookup"><span data-stu-id="f427e-499">The resources returned in the portal view are a subset of the networking components that are graphed.</span></span> <span data-ttu-id="f427e-500">Para ver a lista completa de recursos de rede, você pode usar o [PowerShell](https://docs.microsoft.com/azure/network-watcher/network-watcher-topology-powershell) ou o [REST](https://docs.microsoft.com/azure/network-watcher/network-watcher-topology-rest).</span><span class="sxs-lookup"><span data-stu-id="f427e-500">To see the full list of networking resources, you can use [PowerShell](https://docs.microsoft.com/azure/network-watcher/network-watcher-topology-powershell) or [REST](https://docs.microsoft.com/azure/network-watcher/network-watcher-topology-rest).</span></span>

<span data-ttu-id="f427e-501">Conforme os recursos retornam, a conexão entre eles é modelada segundo duas relações.</span><span class="sxs-lookup"><span data-stu-id="f427e-501">As resources are returned the connection between they are modeled under two relationships.</span></span>

- <span data-ttu-id="f427e-502">**Confinamento** – Exemplo: uma rede virtual contém uma sub-rede que contém um adaptador de rede.</span><span class="sxs-lookup"><span data-stu-id="f427e-502">**Containment** - Virtual Network contains a Subnet, which contains a NIC.</span></span>

- <span data-ttu-id="f427e-503">**Associados** – um adaptador de rede está associado a uma VM.</span><span class="sxs-lookup"><span data-stu-id="f427e-503">**Associated** - A NIC is associated with a VM.</span></span>

#### <a name="variable-packet-capture"></a><span data-ttu-id="f427e-504">Captura de pacote variável</span><span class="sxs-lookup"><span data-stu-id="f427e-504">Variable packet capture</span></span>

<span data-ttu-id="f427e-505">A [captura de pacote variável](https://docs.microsoft.com/azure/network-watcher/network-watcher-packet-capture-overview) do Observador de Rede permite que você crie sessões de captura de pacote para controlar o tráfego em uma máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="f427e-505">Network Watcher [variable packet capture](https://docs.microsoft.com/azure/network-watcher/network-watcher-packet-capture-overview) allows you to create packet capture sessions to track traffic to and from a virtual machine.</span></span> <span data-ttu-id="f427e-506">A captura de pacote ajuda a diagnosticar anomalias de rede reativas e proativas.</span><span class="sxs-lookup"><span data-stu-id="f427e-506">Packet capture helps to diagnose network anomalies both reactively and proactivity.</span></span> <span data-ttu-id="f427e-507">Outros usos incluem a coleta de estatísticas de rede, obter informações sobre as invasões de rede, para depurar comunicações cliente-servidor e muito mais.</span><span class="sxs-lookup"><span data-stu-id="f427e-507">Other uses include gathering network statistics, gaining information on network intrusions, to debug client-server communications and much more.</span></span>

<span data-ttu-id="f427e-508">A captura de pacote é uma extensão de máquina virtual iniciada remotamente por meio do Observador de Rede.</span><span class="sxs-lookup"><span data-stu-id="f427e-508">Packet capture is a virtual machine extension that is remotely started through Network Watcher.</span></span> <span data-ttu-id="f427e-509">Esse recurso alivia o transtorno que é executar manualmente uma captura de pacote na máquina virtual desejada, o que economiza um tempo precioso.</span><span class="sxs-lookup"><span data-stu-id="f427e-509">This capability eases the burden of running a packet capture manually on the desired virtual machine, which saves valuable time.</span></span> <span data-ttu-id="f427e-510">A captura de pacote pode ser disparada por meio do portal, do PowerShell, da CLI ou da API REST.</span><span class="sxs-lookup"><span data-stu-id="f427e-510">Packet capture can be triggered through the portal, PowerShell, CLI, or REST API.</span></span> <span data-ttu-id="f427e-511">Os alertas de Máquina Virtual são um exemplo de como a captura de pacote pode ser disparada.</span><span class="sxs-lookup"><span data-stu-id="f427e-511">One example of how packet capture can be triggered is with Virtual Machine alerts.</span></span>

#### <a name="ip-flow-verify"></a><span data-ttu-id="f427e-512">Verificação de fluxo de IP</span><span class="sxs-lookup"><span data-stu-id="f427e-512">IP flow verify</span></span>

<span data-ttu-id="f427e-513">A [verificação de fluxo de IP](https://docs.microsoft.com/azure/network-watcher/network-watcher-ip-flow-verify-overview) confere se um pacote é permitido ou negado para ou de uma máquina virtual com base nas informações de cinco tuplas.</span><span class="sxs-lookup"><span data-stu-id="f427e-513">[IP flows verify](https://docs.microsoft.com/azure/network-watcher/network-watcher-ip-flow-verify-overview) checks if a packet is allowed or denied to or from a virtual machine based on 5-tuple information.</span></span> <span data-ttu-id="f427e-514">Essas informações consistem em direção, protocolo, IP local, IP remoto, porta local e porta remota.</span><span class="sxs-lookup"><span data-stu-id="f427e-514">This information consists of direction, protocol, local IP, remote IP, local port, and remote port.</span></span> <span data-ttu-id="f427e-515">Se o pacote for negado por um grupo de segurança, o nome da regra que negou o pacote será retornado.</span><span class="sxs-lookup"><span data-stu-id="f427e-515">If the packet is denied by a security group, the name of the rule that denied the packet is returned.</span></span> <span data-ttu-id="f427e-516">Embora qualquer IP de origem ou destino possa ser escolhido, esse recurso ajuda os administradores a diagnosticarem rapidamente os problemas de conectividade a partir de ou com a Internet, e a partir de ou com o ambiente local.</span><span class="sxs-lookup"><span data-stu-id="f427e-516">While any source or destination IP can be chosen, this feature helps administrators quickly diagnose connectivity issues from or to the internet and from or to the on-premises environment.</span></span>

<span data-ttu-id="f427e-517">A verificação de fluxo de IP é direcionada a um adaptador de rede de uma máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="f427e-517">IP flows verify targets a network interface of a virtual machine.</span></span> <span data-ttu-id="f427e-518">O fluxo do tráfego é verificado com base nas configurações feitas para ou a partir dessa interface de rede.</span><span class="sxs-lookup"><span data-stu-id="f427e-518">Traffic flow is then verified based on the configured settings to or from that network interface.</span></span> <span data-ttu-id="f427e-519">Esse recurso é útil ao confirmar se uma regra em um Grupo de Segurança da Rede está bloqueando o tráfego de entrada ou saída para ou a partir de uma máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="f427e-519">This capability is useful in confirming if a rule in a Network Security Group is blocking ingress or egress traffic to or from a virtual machine.</span></span>

#### <a name="next-hop"></a><span data-ttu-id="f427e-520">Próximo salto</span><span class="sxs-lookup"><span data-stu-id="f427e-520">Next hop</span></span>

<span data-ttu-id="f427e-521">Determina o [próximo salto](https://docs.microsoft.com/azure/network-watcher/network-watcher-next-hop-overview) para os pacotes serem roteados na Malha de Rede do Azure, permitindo diagnosticar quaisquer rotas definidas pelo usuário mal configuradas.</span><span class="sxs-lookup"><span data-stu-id="f427e-521">Determines the [next hop](https://docs.microsoft.com/azure/network-watcher/network-watcher-next-hop-overview) for packets being routed in the Azure Network Fabric, enabling you to diagnose any misconfigured user-defined routes.</span></span> <span data-ttu-id="f427e-522">O tráfego de uma VM é enviado para um destino com base nas rotas efetivas associadas a uma NIC.</span><span class="sxs-lookup"><span data-stu-id="f427e-522">Traffic from a VM is sent to a destination based on the effective routes associated with a NIC.</span></span> <span data-ttu-id="f427e-523">O próximo salto obtém o tipo do próximo salto e o endereço IP de um pacote em uma máquina virtual específica e na NIC.</span><span class="sxs-lookup"><span data-stu-id="f427e-523">Next hop gets the next hop type and IP address of a packet from a specific virtual machine and NIC.</span></span> <span data-ttu-id="f427e-524">Isso ajuda a determinar se o pacote está sendo direcionado para o destino ou se o tráfego está tornando-se um buraco negro.</span><span class="sxs-lookup"><span data-stu-id="f427e-524">This helps to determine if the packet is being directed to the destination or is the traffic being black holed.</span></span>

<span data-ttu-id="f427e-525">O próximo salto também retorna a tabela de rotas associada ao próximo salto.</span><span class="sxs-lookup"><span data-stu-id="f427e-525">Next hop also returns the route table associated with the next hop.</span></span> <span data-ttu-id="f427e-526">Ao consultar um próximo salto, se a rota for especificada como sendo definida pelo usuário, ela será retornada.</span><span class="sxs-lookup"><span data-stu-id="f427e-526">When querying a next hop if the route is defined as a user-defined route, that route will be returned.</span></span> <span data-ttu-id="f427e-527">Caso contrário, o Próximo salto retornará a "Rota do Sistema".</span><span class="sxs-lookup"><span data-stu-id="f427e-527">Otherwise Next hop returns "System Route".</span></span>

#### <a name="security-group-view"></a><span data-ttu-id="f427e-528">Exibição de grupo de segurança</span><span class="sxs-lookup"><span data-stu-id="f427e-528">Security group view</span></span>

<span data-ttu-id="f427e-529">Obtém as regras de segurança efetivas e aplicadas que são usadas em uma VM.</span><span class="sxs-lookup"><span data-stu-id="f427e-529">Gets the effective and applied security rules that are applied on a VM.</span></span> <span data-ttu-id="f427e-530">Os grupos Segurança da Rede podem ser associados no nível da sub-rede ou no nível da NIC.</span><span class="sxs-lookup"><span data-stu-id="f427e-530">Network Security groups are associated at a subnet level or at a NIC level.</span></span> <span data-ttu-id="f427e-531">Quando associado no um nível da sub-rede, ele se aplica a todas as instâncias de VM na sub-rede.</span><span class="sxs-lookup"><span data-stu-id="f427e-531">When associated at a subnet level, it applies to all the VM instances in the subnet.</span></span> <span data-ttu-id="f427e-532">A [exibição do Grupo de Segurança](https://docs.microsoft.com/azure/network-watcher/network-watcher-security-group-view-overview) de Rede retorna todos os NSGs configurados e regras associadas no nível do adaptador de rede e da sub-rede para uma máquina virtual que fornece insights sobre a configuração.</span><span class="sxs-lookup"><span data-stu-id="f427e-532">Network [Security Group view](https://docs.microsoft.com/azure/network-watcher/network-watcher-security-group-view-overview) returns all the configured NSGs and rules that are associated at a NIC and subnet level for a virtual machine providing insight into the configuration.</span></span> <span data-ttu-id="f427e-533">Além disso, as regras de segurança efetivas são retornadas para cada NIC em uma VM.</span><span class="sxs-lookup"><span data-stu-id="f427e-533">In addition, the effective security rules are returned for each of the NICs in a VM.</span></span> <span data-ttu-id="f427e-534">Usando a exibição Grupo de Segurança da Rede, você pode avaliar uma VM quanto às vulnerabilidades da rede, como as portas abertas.</span><span class="sxs-lookup"><span data-stu-id="f427e-534">Using Network Security Group view, you can assess a VM for network vulnerabilities such as open ports.</span></span> <span data-ttu-id="f427e-535">Também é possível validar se o Grupo de Segurança da Rede está funcionando como o esperado com base em uma [comparação entre as regras de segurança configuradas e as efetivas](https://docs.microsoft.com/azure/network-watcher/network-watcher-nsg-auditing-powershell).</span><span class="sxs-lookup"><span data-stu-id="f427e-535">You can also validate if your Network Security Group is working as expected based on a [comparison between the configured and the effective security rules](https://docs.microsoft.com/azure/network-watcher/network-watcher-nsg-auditing-powershell).</span></span>

#### <a name="nsg-flow-logging"></a><span data-ttu-id="f427e-536">Registro em log do fluxo NSG</span><span class="sxs-lookup"><span data-stu-id="f427e-536">NSG Flow logging</span></span>

 <span data-ttu-id="f427e-537">Os logs de fluxo para os Grupos de Segurança da Rede permitem capturar os logs relacionados ao tráfego que são permitidos ou negados pelas regras de segurança no grupo.</span><span class="sxs-lookup"><span data-stu-id="f427e-537">Flow logs for Network Security Groups enable you to capture logs related to traffic that are allowed or denied by the security rules in the group.</span></span> <span data-ttu-id="f427e-538">O fluxo é definido por informações com cinco tuplas – IP de Origem, IP de Destino, Porta de Origem, Porta de Destino e Protocolo.</span><span class="sxs-lookup"><span data-stu-id="f427e-538">The flow is defined by a 5-tuple information – Source IP, Destination IP, Source Port, Destination Port, and Protocol.</span></span>

<span data-ttu-id="f427e-539">Os [logs de fluxo do Grupo de Segurança de Rede](https://docs.microsoft.com/azure/network-watcher/network-watcher-nsg-flow-logging-overview) são um recurso do Observador de Rede que permite exibir informações sobre o tráfego IP de entrada e saída por meio de um Grupo de Segurança de Rede.</span><span class="sxs-lookup"><span data-stu-id="f427e-539">[Network Security Group flow logs](https://docs.microsoft.com/azure/network-watcher/network-watcher-nsg-flow-logging-overview) are a feature of Network Watcher that allows you to view information about ingress and egress IP traffic through a Network Security Group.</span></span>

#### <a name="virtual-network-gateway-and-connection-troubleshooting"></a><span data-ttu-id="f427e-540">Solução de problemas de conexão e do gateway de rede virtual</span><span class="sxs-lookup"><span data-stu-id="f427e-540">Virtual network gateway and connection troubleshooting</span></span>

<span data-ttu-id="f427e-541">O observador de rede oferece muitos recursos que dizem respeito às noções básicas sobre os recursos de rede no Azure.</span><span class="sxs-lookup"><span data-stu-id="f427e-541">Network Watcher provides many capabilities as it relates to understanding your network resources in Azure.</span></span> <span data-ttu-id="f427e-542">Um desses recursos é a solução de problemas de recursos.</span><span class="sxs-lookup"><span data-stu-id="f427e-542">One of these capabilities is resource troubleshooting.</span></span> <span data-ttu-id="f427e-543">A [solução de problemas de recursos](https://docs.microsoft.com/azure/network-watcher/network-watcher-troubleshoot-manage-rest) pode ser chamada pelo PowerShell, pela CLI ou pela API REST.</span><span class="sxs-lookup"><span data-stu-id="f427e-543">[Resource troubleshooting](https://docs.microsoft.com/azure/network-watcher/network-watcher-troubleshoot-manage-rest) can be called by PowerShell, CLI, or REST API.</span></span> <span data-ttu-id="f427e-544">Quando chamado, o observador de rede inspeciona a integridade de uma conexão ou um gateway de rede virtual e faz um relatório sobre suas descobertas.</span><span class="sxs-lookup"><span data-stu-id="f427e-544">When called, Network Watcher inspects the health of a Virtual Network gateway or a Connection and returns its findings.</span></span>

<span data-ttu-id="f427e-545">Nesta seção, você conhecerá as diferentes tarefas de gerenciamento que estão disponíveis para a solução de problemas de recursos.</span><span class="sxs-lookup"><span data-stu-id="f427e-545">This section takes you through the different management tasks that are currently available for resource troubleshooting.</span></span>

-   [<span data-ttu-id="f427e-546">Solução de problemas de um gateway de rede virtual</span><span class="sxs-lookup"><span data-stu-id="f427e-546">Troubleshoot a Virtual Network gateway</span></span>](https://docs.microsoft.com/azure/network-watcher/network-watcher-troubleshoot-manage-rest)

-   [<span data-ttu-id="f427e-547">Como solucionar problemas de uma conexão</span><span class="sxs-lookup"><span data-stu-id="f427e-547">Troubleshoot a Connection</span></span>](https://docs.microsoft.com/azure/network-watcher/network-watcher-troubleshoot-manage-rest)

#### <a name="network-subscription-limits"></a><span data-ttu-id="f427e-548">Limites de assinatura da rede</span><span class="sxs-lookup"><span data-stu-id="f427e-548">Network subscription limits</span></span>

<span data-ttu-id="f427e-549">Os [limites de assinatura da rede](https://docs.microsoft.com/azure/network-watcher/network-watcher-monitoring-overview) fornecem a você os detalhes do uso de cada recurso de rede em uma assinatura em uma região em relação ao número máximo de recursos disponíveis.</span><span class="sxs-lookup"><span data-stu-id="f427e-549">[Network subscription limits](https://docs.microsoft.com/azure/network-watcher/network-watcher-monitoring-overview) provide you with details of the usage of each of the network resource in a subscription in a region against the maximum number of resources available.</span></span>

#### <a name="configuring-diagnostics-log"></a><span data-ttu-id="f427e-550">Configurar o log de diagnóstico</span><span class="sxs-lookup"><span data-stu-id="f427e-550">Configuring diagnostics Log</span></span>

<span data-ttu-id="f427e-551">O Observador de Rede fornece uma exibição dos [logs de diagnóstico](https://docs.microsoft.com/azure/network-watcher/network-watcher-monitoring-overview).</span><span class="sxs-lookup"><span data-stu-id="f427e-551">Network Watcher provides a [diagnostic logs](https://docs.microsoft.com/azure/network-watcher/network-watcher-monitoring-overview) view.</span></span> <span data-ttu-id="f427e-552">Essa exibição contém todos os recursos de rede que oferecem suporte ao log de diagnóstico.</span><span class="sxs-lookup"><span data-stu-id="f427e-552">This view contains all networking resources that support diagnostic logging.</span></span> <span data-ttu-id="f427e-553">Nessa exibição, você pode habilitar e desabilitar os recursos de rede de modo rápido e prático.</span><span class="sxs-lookup"><span data-stu-id="f427e-553">From this view, you can enable and disable networking resources conveniently and quickly.</span></span>

### <a name="network-resource-level-monitoring"></a><span data-ttu-id="f427e-554">Monitoramento no nível do recurso da rede</span><span class="sxs-lookup"><span data-stu-id="f427e-554">Network resource level monitoring</span></span>

<span data-ttu-id="f427e-555">Os seguintes recursos estão disponíveis para o monitoramento no nível do recurso:</span><span class="sxs-lookup"><span data-stu-id="f427e-555">The following features are available for resource level monitoring:</span></span>

#### <a name="audit-log"></a><span data-ttu-id="f427e-556">Log de auditoria</span><span class="sxs-lookup"><span data-stu-id="f427e-556">Audit log</span></span>

<span data-ttu-id="f427e-557">As operações executadas como parte da configuração das redes são registradas.</span><span class="sxs-lookup"><span data-stu-id="f427e-557">Operations performed as part of the configuration of networks are logged.</span></span> <span data-ttu-id="f427e-558">Esses logs de auditoria são essenciais para estabelecer diversas conformidades.</span><span class="sxs-lookup"><span data-stu-id="f427e-558">These audit logs are essential to establish various compliances.</span></span> <span data-ttu-id="f427e-559">Esses logs podem ser exibidos no portal do Azure ou recuperados usando as ferramentas da Microsoft, como o Power BI ou ferramentas de terceiros.</span><span class="sxs-lookup"><span data-stu-id="f427e-559">These logs can be viewed in the Azure portal or retrieved using Microsoft tools such as Power BI or third-party tools.</span></span> <span data-ttu-id="f427e-560">Os logs de auditoria estão disponíveis por meio do portal, PowerShell, CLI e API Rest.</span><span class="sxs-lookup"><span data-stu-id="f427e-560">Audit logs are available through the portal, PowerShell, CLI, and Rest API.</span></span>

> [!Note]
> <span data-ttu-id="f427e-561">Para obter mais informações sobre os Logs de auditoria, consulte [Operações de auditoria com o Resource Manager](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-audit).</span><span class="sxs-lookup"><span data-stu-id="f427e-561">For more information on Audit logs, see [Audit operations with Resource Manager](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-audit).</span></span>
<span data-ttu-id="f427e-562">Os logs de auditoria estão disponíveis para as operações realizadas em todos os recursos da rede.</span><span class="sxs-lookup"><span data-stu-id="f427e-562">Audit logs are available for operations done on all network resources.</span></span>


#### <a name="metrics"></a><span data-ttu-id="f427e-563">Métricas</span><span class="sxs-lookup"><span data-stu-id="f427e-563">Metrics</span></span>

<span data-ttu-id="f427e-564">As métricas são medidas de desempenho e contadores coletados em um período de tempo.</span><span class="sxs-lookup"><span data-stu-id="f427e-564">Metrics are performance measurements and counters collected over a period.</span></span> <span data-ttu-id="f427e-565">As métricas estão disponíveis atualmente para o Gateway de Aplicativo.</span><span class="sxs-lookup"><span data-stu-id="f427e-565">Metrics are currently available for Application Gateway.</span></span> <span data-ttu-id="f427e-566">As métricas podem ser usadas para disparar alertas com base no limite.</span><span class="sxs-lookup"><span data-stu-id="f427e-566">Metrics can be used to trigger alerts based on threshold.</span></span> <span data-ttu-id="f427e-567">Por padrão, o Gateway de Aplicativo do Azure monitora a integridade de todos os recursos em seu pool de back-end e remove automaticamente qualquer recurso do pool que não for considerado íntegro.</span><span class="sxs-lookup"><span data-stu-id="f427e-567">Azure Application Gateway by default monitors the health of all resources in its back-end pool and automatically removes any resource considered unhealthy from the pool.</span></span> <span data-ttu-id="f427e-568">O Gateway de Aplicativo continua monitorando as instâncias não íntegras e as adiciona de volta ao pool de back-end íntegro depois que elas se tornarem disponíveis e responderem a investigações de integridade.</span><span class="sxs-lookup"><span data-stu-id="f427e-568">Application Gateway continues to monitor the unhealthy instances and adds them back to the healthy back-end pool once they become available and respond to health probes.</span></span> <span data-ttu-id="f427e-569">O Gateway de Aplicativo envia as investigações de integridade na mesma porta que é definida nas configurações de HTTP do back-end.</span><span class="sxs-lookup"><span data-stu-id="f427e-569">Application gateway sends the health probes with the same port that is defined in the back-end HTTP settings.</span></span> <span data-ttu-id="f427e-570">A configuração assegura que a investigação teste a mesma porta que os clientes usariam para se conectar ao back-end.</span><span class="sxs-lookup"><span data-stu-id="f427e-570">This configuration ensures that the probe is testing the same port that customers would be using to connect to the backend.</span></span>

> [!Note]
> <span data-ttu-id="f427e-571">Consulte [Diagnóstico do Gateway de Aplicativo](https://docs.microsoft.com/azure/application-gateway/application-gateway-probe-overview) para ver como as métricas podem ser usadas para criar alertas.</span><span class="sxs-lookup"><span data-stu-id="f427e-571">See [Application Gateway Diagnostics](https://docs.microsoft.com/azure/application-gateway/application-gateway-probe-overview) to view how metrics can be used to create alerts.</span></span>

#### <a name="diagnostic-logs"></a><span data-ttu-id="f427e-572">Logs de diagnóstico</span><span class="sxs-lookup"><span data-stu-id="f427e-572">Diagnostic logs</span></span>

<span data-ttu-id="f427e-573">Os eventos periódicos e espontâneas são criados pelos recursos da rede e registrados nas contas de armazenamento, enviados para um Hub de Eventos ou Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="f427e-573">Periodic and spontaneous events are created by network resources and logged in storage accounts, sent to an Event Hub, or Log Analytics.</span></span> <span data-ttu-id="f427e-574">Esses logs fornecem informações sobre a integridade de um recurso.</span><span class="sxs-lookup"><span data-stu-id="f427e-574">These logs provide insights into the health of a resource.</span></span> <span data-ttu-id="f427e-575">Esses logs podem ser visualizados em ferramentas como o Power BI e o Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="f427e-575">These logs can be viewed in tools such as Power BI and Log Analytics.</span></span> <span data-ttu-id="f427e-576">Para saber como exibir os logs de diagnóstico, visite [Log Analytics](https://docs.microsoft.com/azure/log-analytics/log-analytics-azure-networking-analytics).</span><span class="sxs-lookup"><span data-stu-id="f427e-576">To learn how to view diagnostic logs, visit [Log Analytics](https://docs.microsoft.com/azure/log-analytics/log-analytics-azure-networking-analytics).</span></span>

<span data-ttu-id="f427e-577">Os logs de diagnóstico estão disponíveis para o [Balanceador de Carga](https://docs.microsoft.com/azure/load-balancer/load-balancer-monitor-log), [Grupos de Segurança da Rede](https://docs.microsoft.com/azure/virtual-network/virtual-network-nsg-manage-log), Rotas e [Gateway de Aplicativo](https://docs.microsoft.com/azure/application-gateway/application-gateway-diagnostics).</span><span class="sxs-lookup"><span data-stu-id="f427e-577">Diagnostic logs are available for [Load Balancer](https://docs.microsoft.com/azure/load-balancer/load-balancer-monitor-log), [Network Security Groups](https://docs.microsoft.com/azure/virtual-network/virtual-network-nsg-manage-log), Routes, and [Application Gateway](https://docs.microsoft.com/azure/application-gateway/application-gateway-diagnostics).</span></span>

<span data-ttu-id="f427e-578">O Observador de Rede fornece uma exibição dos logs de diagnóstico.</span><span class="sxs-lookup"><span data-stu-id="f427e-578">Network Watcher provides a diagnostic logs view.</span></span> <span data-ttu-id="f427e-579">Essa exibição contém todos os recursos de rede que oferecem suporte ao log de diagnóstico.</span><span class="sxs-lookup"><span data-stu-id="f427e-579">This view contains all networking resources that support diagnostic logging.</span></span> <span data-ttu-id="f427e-580">Nessa exibição, você pode habilitar e desabilitar os recursos de rede de modo rápido e prático.</span><span class="sxs-lookup"><span data-stu-id="f427e-580">From this view, you can enable and disable networking resources conveniently and quickly.</span></span>

### <a name="log-analytics"></a><span data-ttu-id="f427e-581">Log Analytics</span><span class="sxs-lookup"><span data-stu-id="f427e-581">Log analytics</span></span>

<span data-ttu-id="f427e-582">O [Log Analytics](https://docs.microsoft.com/azure/log-analytics/log-analytics-overview) é um serviço no [Operations Management Suite (OMS)](https://docs.microsoft.com/azure/operations-management-suite/operations-management-suite-overview) que monitora seus ambientes na nuvem e locais a fim de manter a disponibilidade e o desempenho.</span><span class="sxs-lookup"><span data-stu-id="f427e-582">[Log Analytics](https://docs.microsoft.com/azure/log-analytics/log-analytics-overview) is a service in [Operations Management Suite (OMS)](https://docs.microsoft.com/azure/operations-management-suite/operations-management-suite-overview) that monitors your cloud and on-premises environments to maintain their availability and performance.</span></span> <span data-ttu-id="f427e-583">Ele coleta dados gerados pelos recursos em seus ambientes de nuvem e locais e de outras ferramentas de monitoramento para fornecer análise de várias fontes.</span><span class="sxs-lookup"><span data-stu-id="f427e-583">It collects data generated by resources in your cloud and on-premises environments and from other monitoring tools to provide analysis across multiple sources.</span></span>

<span data-ttu-id="f427e-584">O Log Analytics oferece as seguintes soluções para monitorar suas redes:</span><span class="sxs-lookup"><span data-stu-id="f427e-584">Log Analytics offers the following solutions for monitoring your networks:</span></span>

-   <span data-ttu-id="f427e-585">Monitor de Desempenho de Rede (NPM)</span><span class="sxs-lookup"><span data-stu-id="f427e-585">Network Performance Monitor (NPM)</span></span>

-   <span data-ttu-id="f427e-586">Análise do Gateway de Aplicativo do Azure</span><span class="sxs-lookup"><span data-stu-id="f427e-586">Azure Application Gateway analytics</span></span>

-   <span data-ttu-id="f427e-587">Análise do Grupo de Segurança de Rede do Azure</span><span class="sxs-lookup"><span data-stu-id="f427e-587">Azure Network Security Group analytics</span></span>

#### <a name="network-performance-monitor-npm"></a><span data-ttu-id="f427e-588">NPM (Monitor de Desempenho de Rede)</span><span class="sxs-lookup"><span data-stu-id="f427e-588">Network performance monitor (NPM)</span></span>
<span data-ttu-id="f427e-589">A solução de gerenciamento do [Monitor de Desempenho de Rede](https://docs.microsoft.com/azure/log-analytics/log-analytics-network-performance-monitor) é uma solução de monitoramento de redes, que monitora a integridade, a disponibilidade e a acessibilidade das redes.</span><span class="sxs-lookup"><span data-stu-id="f427e-589">The [Network Performance Monitor](https://docs.microsoft.com/azure/log-analytics/log-analytics-network-performance-monitor) management solution is a network monitoring  solution that monitors the health, availability, and reachability of networks.</span></span>

<span data-ttu-id="f427e-590">Ela é usada para monitorar a conectividade entre:</span><span class="sxs-lookup"><span data-stu-id="f427e-590">It is used to monitor connectivity between:</span></span>

-   <span data-ttu-id="f427e-591">nuvem pública e local</span><span class="sxs-lookup"><span data-stu-id="f427e-591">public cloud and on-premises</span></span>

-   <span data-ttu-id="f427e-592">data centers e locais de usuário (filiais)</span><span class="sxs-lookup"><span data-stu-id="f427e-592">data centers and user locations (branch offices)</span></span>

-   <span data-ttu-id="f427e-593">sub-redes hospeda várias camadas de um aplicativo de várias camadas.</span><span class="sxs-lookup"><span data-stu-id="f427e-593">subnets hosting various tiers of a multi-tiered application.</span></span>


#### <a name="azure-application-gateway-analytics-in-log-analytics"></a><span data-ttu-id="f427e-594">Análise do Gateway de Aplicativo do Azure no Log Analytics</span><span class="sxs-lookup"><span data-stu-id="f427e-594">Azure application gateway analytics in log analytics</span></span>

<span data-ttu-id="f427e-595">Nos Gateways de Aplicativo, há suporte para os seguintes logs:</span><span class="sxs-lookup"><span data-stu-id="f427e-595">The following logs are supported for Application Gateways:</span></span>

-   <span data-ttu-id="f427e-596">ApplicationGatewayAccessLog</span><span class="sxs-lookup"><span data-stu-id="f427e-596">ApplicationGatewayAccessLog</span></span>

-   <span data-ttu-id="f427e-597">ApplicationGatewayPerformanceLog</span><span class="sxs-lookup"><span data-stu-id="f427e-597">ApplicationGatewayPerformanceLog</span></span>

-   <span data-ttu-id="f427e-598">ApplicationGatewayFirewallLog</span><span class="sxs-lookup"><span data-stu-id="f427e-598">ApplicationGatewayFirewallLog</span></span>

<span data-ttu-id="f427e-599">Há suporte para as seguintes métricas nos Gateways de Aplicativo:</span><span class="sxs-lookup"><span data-stu-id="f427e-599">The following metrics are supported for Application Gateways:</span></span>

-   <span data-ttu-id="f427e-600">Taxa de transferência de 5 minutos</span><span class="sxs-lookup"><span data-stu-id="f427e-600">5-minute throughput</span></span>

#### <a name="azure-network-security-group-analytics-in-log-analytics"></a><span data-ttu-id="f427e-601">Análise do Grupo de Segurança de Rede do Azure no Log Analytics</span><span class="sxs-lookup"><span data-stu-id="f427e-601">Azure network security group analytics in log analytics</span></span>

<span data-ttu-id="f427e-602">Nos [grupos de segurança de rede](https://docs.microsoft.com/azure/virtual-network/virtual-network-nsg-manage-log), há suporte para os seguintes logs:</span><span class="sxs-lookup"><span data-stu-id="f427e-602">The following logs are supported for [network security groups](https://docs.microsoft.com/azure/virtual-network/virtual-network-nsg-manage-log):</span></span>

- <span data-ttu-id="f427e-603">**NetworkSecurityGroupEvent:** contém entradas para as regras NSG que são aplicadas às VMs e funções de instância com base no endereço MAC.</span><span class="sxs-lookup"><span data-stu-id="f427e-603">**NetworkSecurityGroupEvent:** Contains entries for which NSG rules are applied to VMs and instance roles based on MAC address.</span></span> <span data-ttu-id="f427e-604">O status para essas regras é coletado a cada 60 segundos.</span><span class="sxs-lookup"><span data-stu-id="f427e-604">The status for these rules is collected every 60 seconds.</span></span>

- <span data-ttu-id="f427e-605">**NetworkSecurityGroupRuleCounter:** contém entradas de quantas vezes cada regra NSG é aplicada para negar ou permitir tráfego.</span><span class="sxs-lookup"><span data-stu-id="f427e-605">**NetworkSecurityGroupRuleCounter:** Contains entries for how many times each NSG rule is applied to deny or allow traffic.</span></span>

## <a name="next-steps"></a><span data-ttu-id="f427e-606">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="f427e-606">Next steps</span></span>
<span data-ttu-id="f427e-607">Saiba mais sobre a segurança lendo alguns dos tópicos detalhados sobre segurança:</span><span class="sxs-lookup"><span data-stu-id="f427e-607">Find out more about security by reading some of our in-depth security topics:</span></span>

-   [<span data-ttu-id="f427e-608">Análise de logs para NSGs (grupos de segurança de rede)</span><span class="sxs-lookup"><span data-stu-id="f427e-608">Log Analytics for Network Security Groups (NSGs)</span></span>](https://docs.microsoft.com/azure/virtual-network/virtual-network-nsg-manage-log)

-   [<span data-ttu-id="f427e-609">As inovações de rede que causam a interrupção da nuvem</span><span class="sxs-lookup"><span data-stu-id="f427e-609">Networking innovations that drive the cloud disruption</span></span>](https://azure.microsoft.com/blog/networking-innovations-that-drive-the-cloud-disruption/)

-   [<span data-ttu-id="f427e-610">SONiC: o software de comutador de rede que fortalece a nuvem Global da Microsoft</span><span class="sxs-lookup"><span data-stu-id="f427e-610">SONiC: The networking switch software that powers the Microsoft Global Cloud</span></span>](https://azure.microsoft.com/blog/sonic-the-networking-switch-software-that-powers-the-microsoft-global-cloud/)

-   [<span data-ttu-id="f427e-611">Como a Microsoft constrói a sua rede global rápida e confiável</span><span class="sxs-lookup"><span data-stu-id="f427e-611">How Microsoft builds its fast and reliable global network</span></span>](https://azure.microsoft.com/blog/how-microsoft-builds-its-fast-and-reliable-global-network/)

-   [<span data-ttu-id="f427e-612">Esclarecendo a inovação de rede</span><span class="sxs-lookup"><span data-stu-id="f427e-612">Lighting up network innovation</span></span>](https://azure.microsoft.com/blog/lighting-up-network-innovation/)
