---
title: "aaaAuthentication - ferramenta de modelagem de ameaça Microsoft - Azure | Microsoft Docs"
description: "reduções de ameaças expostas em Olá, ferramenta de modelagem de ameaça"
services: security
documentationcenter: na
author: RodSan
manager: RodSan
editor: RodSan
ms.assetid: na
ms.service: security
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/17/2017
ms.author: rodsan
ms.openlocfilehash: 06c1b1aebab25e6fb5b666d24ecd9d86085d656c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="security-frame-authentication--mitigations"></a><span data-ttu-id="57df8-103">Estrutura de segurança: autenticação | Atenuações</span><span class="sxs-lookup"><span data-stu-id="57df8-103">Security Frame: Authentication | Mitigations</span></span> 
| <span data-ttu-id="57df8-104">Produto/Serviço</span><span class="sxs-lookup"><span data-stu-id="57df8-104">Product/Service</span></span> | <span data-ttu-id="57df8-105">Artigo</span><span class="sxs-lookup"><span data-stu-id="57df8-105">Article</span></span> |
| --------------- | ------- |
| <span data-ttu-id="57df8-106">**Aplicativo Web**</span><span class="sxs-lookup"><span data-stu-id="57df8-106">**Web Application**</span></span>    | <ul><li>[<span data-ttu-id="57df8-107">Considere o uso de um tooWeb de tooauthenticate do mecanismo de autenticação padrão aplicativo</span><span class="sxs-lookup"><span data-stu-id="57df8-107">Consider using a standard authentication mechanism tooauthenticate tooWeb Application</span></span>](#standard-authn-web-app)</li><li>[<span data-ttu-id="57df8-108">Os aplicativos devem lidar com cenários de autenticação com falha com segurança</span><span class="sxs-lookup"><span data-stu-id="57df8-108">Applications must handle failed authentication scenarios securely</span></span>](#handle-failed-authn)</li><li>[<span data-ttu-id="57df8-109">Habilitar upgrade ou autenticação adaptável</span><span class="sxs-lookup"><span data-stu-id="57df8-109">Enable step up or adaptive authentication</span></span>](#step-up-adaptive-authn)</li><li>[<span data-ttu-id="57df8-110">Verifique se as interfaces administrativas estão adequadamente bloqueadas</span><span class="sxs-lookup"><span data-stu-id="57df8-110">Ensure that administrative interfaces are appropriately locked down</span></span>](#admin-interface-lockdown)</li><li>[<span data-ttu-id="57df8-111">Implemente funcionalidades de senha esquecida com segurança</span><span class="sxs-lookup"><span data-stu-id="57df8-111">Implement forgot password functionalities securely</span></span>](#forgot-pword-fxn)</li><li>[<span data-ttu-id="57df8-112">Verifique se as políticas de conta e senha são implementadas</span><span class="sxs-lookup"><span data-stu-id="57df8-112">Ensure that password and account policy are implemented</span></span>](#pword-account-policy)</li><li>[<span data-ttu-id="57df8-113">Implementar controles tooprevent username enumeração</span><span class="sxs-lookup"><span data-stu-id="57df8-113">Implement controls tooprevent username enumeration</span></span>](#controls-username-enum)</li></ul> |
| <span data-ttu-id="57df8-114">**Banco de dados**</span><span class="sxs-lookup"><span data-stu-id="57df8-114">**Database**</span></span> | <ul><li>[<span data-ttu-id="57df8-115">Quando possível, use a autenticação do Windows para conectar-se tooSQL Server</span><span class="sxs-lookup"><span data-stu-id="57df8-115">When possible, use Windows Authentication for connecting tooSQL Server</span></span>](#win-authn-sql)</li><li>[<span data-ttu-id="57df8-116">Quando possível, use autenticação do Active Directory do Azure para conectar-se tooSQL banco de dados</span><span class="sxs-lookup"><span data-stu-id="57df8-116">When possible use Azure Active Directory Authentication for Connecting tooSQL Database</span></span>](#aad-authn-sql)</li><li>[<span data-ttu-id="57df8-117">Quando o modo de autenticação do SQL for usado, verifique se as políticas de conta e senha são impostas no SQL server</span><span class="sxs-lookup"><span data-stu-id="57df8-117">When SQL authentication mode is used, ensure that account and password policy are enforced on SQL server</span></span>](#authn-account-pword)</li><li>[<span data-ttu-id="57df8-118">Não use a Autenticação do SQL em bancos de dados independentes</span><span class="sxs-lookup"><span data-stu-id="57df8-118">Do not use SQL Authentication in contained databases</span></span>](#autn-contained-db)</li></ul> |
| <span data-ttu-id="57df8-119">**Hub de Eventos do Azure**</span><span class="sxs-lookup"><span data-stu-id="57df8-119">**Azure Event Hub**</span></span> | <ul><li>[<span data-ttu-id="57df8-120">Use credenciais de autenticação por dispositivo usando tokens SaS</span><span class="sxs-lookup"><span data-stu-id="57df8-120">Use per device authentication credentials using SaS tokens</span></span>](#authn-sas-tokens)</li></ul> |
| <span data-ttu-id="57df8-121">**Limite de Confiança do Azure**</span><span class="sxs-lookup"><span data-stu-id="57df8-121">**Azure Trust Boundary**</span></span> | <ul><li>[<span data-ttu-id="57df8-122">Habilitar Autenticação Multifator do Azure para administradores do Azure</span><span class="sxs-lookup"><span data-stu-id="57df8-122">Enable Azure Multi-Factor Authentication for Azure Administrators</span></span>](#multi-factor-azure-admin)</li></ul> |
| <span data-ttu-id="57df8-123">**Limite de confiança do Service Fabric**</span><span class="sxs-lookup"><span data-stu-id="57df8-123">**Service Fabric Trust Boundary**</span></span> | <ul><li>[<span data-ttu-id="57df8-124">Restringir o acesso anônimo tooService Cluster de malha</span><span class="sxs-lookup"><span data-stu-id="57df8-124">Restrict anonymous access tooService Fabric Cluster</span></span>](#anon-access-cluster)</li><li>[<span data-ttu-id="57df8-125">Verifique se o certificado de cliente para o nó de Service Fabric serviço é diferente do certificado de nó para nó</span><span class="sxs-lookup"><span data-stu-id="57df8-125">Ensure that Service Fabric client-to-node certificate is different from node-to-node certificate</span></span>](#fabric-cn-nn)</li><li>[<span data-ttu-id="57df8-126">Use clusters de malha do AAD tooauthenticate clientes tooservice</span><span class="sxs-lookup"><span data-stu-id="57df8-126">Use AAD tooauthenticate clients tooservice fabric clusters</span></span>](#aad-client-fabric)</li><li>[<span data-ttu-id="57df8-127">Verifique se os certificados de service fabric são obtidos de uma CA (autoridade de certificação) aprovada</span><span class="sxs-lookup"><span data-stu-id="57df8-127">Ensure that service fabric certificates are obtained from an approved Certificate Authority (CA)</span></span>](#fabric-cert-ca)</li></ul> |
| <span data-ttu-id="57df8-128">**Identity Server**</span><span class="sxs-lookup"><span data-stu-id="57df8-128">**Identity Server**</span></span> | <ul><li>[<span data-ttu-id="57df8-129">Use cenários de autenticação padrão com suporte no Servidor de Identidade</span><span class="sxs-lookup"><span data-stu-id="57df8-129">Use standard authentication scenarios supported by Identity Server</span></span>](#standard-authn-id)</li><li>[<span data-ttu-id="57df8-130">Substituir saudação padrão Identity Server cache de token por uma alternativa escalonável</span><span class="sxs-lookup"><span data-stu-id="57df8-130">Override hello default Identity Server token cache with a scalable alternative</span></span>](#override-token)</li></ul> |
| <span data-ttu-id="57df8-131">**Limite de confiança de computador**</span><span class="sxs-lookup"><span data-stu-id="57df8-131">**Machine Trust Boundary**</span></span> | <ul><li>[<span data-ttu-id="57df8-132">Verifique se os binários do aplicativo implantado são assinados digitalmente</span><span class="sxs-lookup"><span data-stu-id="57df8-132">Ensure that deployed application's binaries are digitally signed</span></span>](#binaries-signed)</li></ul> |
| <span data-ttu-id="57df8-133">**WCF**</span><span class="sxs-lookup"><span data-stu-id="57df8-133">**WCF**</span></span> | <ul><li>[<span data-ttu-id="57df8-134">Habilitar a autenticação ao conectar-se tooMSMQ filas no WCF</span><span class="sxs-lookup"><span data-stu-id="57df8-134">Enable authentication when connecting tooMSMQ queues in WCF</span></span>](#msmq-queues)</li><li>[<span data-ttu-id="57df8-135">WCF-não não definir mensagem clientCredentialType toonone</span><span class="sxs-lookup"><span data-stu-id="57df8-135">WCF-Do not set Message clientCredentialType toonone</span></span>](#message-none)</li><li>[<span data-ttu-id="57df8-136">WCF-não não definido transporte clientCredentialType toonone</span><span class="sxs-lookup"><span data-stu-id="57df8-136">WCF-Do not set Transport clientCredentialType toonone</span></span>](#transport-none)</li></ul> |
| <span data-ttu-id="57df8-137">**API da Web**</span><span class="sxs-lookup"><span data-stu-id="57df8-137">**Web API**</span></span> | <ul><li>[<span data-ttu-id="57df8-138">Certifique-se de técnicas de autenticação padrão são usado toosecure APIs da Web</span><span class="sxs-lookup"><span data-stu-id="57df8-138">Ensure that standard authentication techniques are used toosecure Web APIs</span></span>](#authn-secure-api)</li></ul> |
| <span data-ttu-id="57df8-139">**Azure AD**</span><span class="sxs-lookup"><span data-stu-id="57df8-139">**Azure AD**</span></span> | <ul><li>[<span data-ttu-id="57df8-140">Use cenários de autenticação padrão com suporte no Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="57df8-140">Use standard authentication scenarios supported by Azure Active Directory</span></span>](#authn-aad)</li><li>[<span data-ttu-id="57df8-141">Substituir saudação padrão ADAL cache de token por uma alternativa escalonável</span><span class="sxs-lookup"><span data-stu-id="57df8-141">Override hello default ADAL token cache with a scalable alternative</span></span>](#adal-scalable)</li><li>[<span data-ttu-id="57df8-142">Certifique-se de que o TokenReplayCache é tooprevent usado reprodução de saudação de tokens de autenticação de ADAL</span><span class="sxs-lookup"><span data-stu-id="57df8-142">Ensure that TokenReplayCache is used tooprevent hello replay of ADAL authentication tokens</span></span>](#tokenreplaycache-adal)</li><li>[<span data-ttu-id="57df8-143">Use o token de bibliotecas ADAL toomanage solicitações de OAuth2 tooAAD de clientes (ou AD local)</span><span class="sxs-lookup"><span data-stu-id="57df8-143">Use ADAL libraries toomanage token requests from OAuth2 clients tooAAD (or on-premises AD)</span></span>](#adal-oauth2)</li></ul> |
| <span data-ttu-id="57df8-144">**Gateway de Campo de IoT**</span><span class="sxs-lookup"><span data-stu-id="57df8-144">**IoT Field Gateway**</span></span> | <ul><li>[<span data-ttu-id="57df8-145">Autenticar dispositivos conectados toohello Gateway de campo</span><span class="sxs-lookup"><span data-stu-id="57df8-145">Authenticate devices connecting toohello Field Gateway</span></span>](#authn-devices-field)</li></ul> |
| <span data-ttu-id="57df8-146">**Gateway de Nuvem IoT**</span><span class="sxs-lookup"><span data-stu-id="57df8-146">**IoT Cloud Gateway**</span></span> | <ul><li>[<span data-ttu-id="57df8-147">Certifique-se de que os dispositivos conectados tooCloud gateway são autenticados</span><span class="sxs-lookup"><span data-stu-id="57df8-147">Ensure that devices connecting tooCloud gateway are authenticated</span></span>](#authn-devices-cloud)</li><li>[<span data-ttu-id="57df8-148">Usar credenciais de autenticação por dispositivo</span><span class="sxs-lookup"><span data-stu-id="57df8-148">Use per-device authentication credentials</span></span>](#authn-cred)</li></ul> |
| <span data-ttu-id="57df8-149">**Armazenamento do Azure**</span><span class="sxs-lookup"><span data-stu-id="57df8-149">**Azure Storage**</span></span> | <ul><li>[<span data-ttu-id="57df8-150">Certifique-se de que somente Olá necessário contêineres e blobs recebem acesso de leitura anônimo</span><span class="sxs-lookup"><span data-stu-id="57df8-150">Ensure that only hello required containers and blobs are given anonymous read access</span></span>](#req-containers-anon)</li><li>[<span data-ttu-id="57df8-151">Conceder acesso limitado tooobjects no armazenamento do Azure usando SAS ou SAP</span><span class="sxs-lookup"><span data-stu-id="57df8-151">Grant limited access tooobjects in Azure storage using SAS or SAP</span></span>](#limited-access-sas)</li></ul> |

## <span data-ttu-id="57df8-152"><a id="standard-authn-web-app"></a>Considere o uso de um tooWeb de tooauthenticate do mecanismo de autenticação padrão aplicativo</span><span class="sxs-lookup"><span data-stu-id="57df8-152"><a id="standard-authn-web-app"></a>Consider using a standard authentication mechanism tooauthenticate tooWeb Application</span></span>

| <span data-ttu-id="57df8-153">Title</span><span class="sxs-lookup"><span data-stu-id="57df8-153">Title</span></span>                   | <span data-ttu-id="57df8-154">Detalhes</span><span class="sxs-lookup"><span data-stu-id="57df8-154">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="57df8-155">**Componente**</span><span class="sxs-lookup"><span data-stu-id="57df8-155">**Component**</span></span>               | <span data-ttu-id="57df8-156">Aplicativo Web</span><span class="sxs-lookup"><span data-stu-id="57df8-156">Web Application</span></span> | 
| <span data-ttu-id="57df8-157">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="57df8-157">**SDL Phase**</span></span>               | <span data-ttu-id="57df8-158">Compilação</span><span class="sxs-lookup"><span data-stu-id="57df8-158">Build</span></span> |  
| <span data-ttu-id="57df8-159">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="57df8-159">**Applicable Technologies**</span></span> | <span data-ttu-id="57df8-160">Genérico</span><span class="sxs-lookup"><span data-stu-id="57df8-160">Generic</span></span> |
| <span data-ttu-id="57df8-161">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="57df8-161">**Attributes**</span></span>              | <span data-ttu-id="57df8-162">N/D</span><span class="sxs-lookup"><span data-stu-id="57df8-162">N/A</span></span>  |
| <span data-ttu-id="57df8-163">**Referências**</span><span class="sxs-lookup"><span data-stu-id="57df8-163">**References**</span></span>              | <span data-ttu-id="57df8-164">N/D</span><span class="sxs-lookup"><span data-stu-id="57df8-164">N/A</span></span>  |
| <span data-ttu-id="57df8-165">Detalhes</span><span class="sxs-lookup"><span data-stu-id="57df8-165">Details</span></span> | <p><span data-ttu-id="57df8-166">A autenticação é o processo de saudação em que uma entidade comprova sua identidade, normalmente por meio de credenciais, como um nome de usuário e senha.</span><span class="sxs-lookup"><span data-stu-id="57df8-166">Authentication is hello process where an entity proves its identity, typically through credentials, such as a user name and password.</span></span> <span data-ttu-id="57df8-167">Há vários protocolos de autenticação disponíveis que podem ser considerados.</span><span class="sxs-lookup"><span data-stu-id="57df8-167">There are multiple authentication protocols available which may be considered.</span></span> <span data-ttu-id="57df8-168">Alguns deles são listados abaixo:</span><span class="sxs-lookup"><span data-stu-id="57df8-168">Some of them are listed below:</span></span></p><ul><li><span data-ttu-id="57df8-169">Certificados do cliente</span><span class="sxs-lookup"><span data-stu-id="57df8-169">Client certificates</span></span></li><li><span data-ttu-id="57df8-170">Baseado no Windows</span><span class="sxs-lookup"><span data-stu-id="57df8-170">Windows based</span></span></li><li><span data-ttu-id="57df8-171">Baseado em formulários</span><span class="sxs-lookup"><span data-stu-id="57df8-171">Forms based</span></span></li><li><span data-ttu-id="57df8-172">Federação - ADFS</span><span class="sxs-lookup"><span data-stu-id="57df8-172">Federation - ADFS</span></span></li><li><span data-ttu-id="57df8-173">Federação – Azure AD</span><span class="sxs-lookup"><span data-stu-id="57df8-173">Federation - Azure AD</span></span></li><li><span data-ttu-id="57df8-174">Federação - Servidor de Identidade</span><span class="sxs-lookup"><span data-stu-id="57df8-174">Federation - Identity Server</span></span></li></ul><p><span data-ttu-id="57df8-175">Considere o uso de um processo de origem do Olá de tooidentify do mecanismo de autenticação padrão</span><span class="sxs-lookup"><span data-stu-id="57df8-175">Consider using a standard authentication mechanism tooidentify hello source process</span></span></p>|

## <span data-ttu-id="57df8-176"><a id="handle-failed-authn"></a>Os aplicativos devem lidar com segurança com os cenários de autenticação com falha</span><span class="sxs-lookup"><span data-stu-id="57df8-176"><a id="handle-failed-authn"></a>Applications must handle failed authentication scenarios securely</span></span>

| <span data-ttu-id="57df8-177">Title</span><span class="sxs-lookup"><span data-stu-id="57df8-177">Title</span></span>                   | <span data-ttu-id="57df8-178">Detalhes</span><span class="sxs-lookup"><span data-stu-id="57df8-178">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="57df8-179">**Componente**</span><span class="sxs-lookup"><span data-stu-id="57df8-179">**Component**</span></span>               | <span data-ttu-id="57df8-180">Aplicativo Web</span><span class="sxs-lookup"><span data-stu-id="57df8-180">Web Application</span></span> | 
| <span data-ttu-id="57df8-181">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="57df8-181">**SDL Phase**</span></span>               | <span data-ttu-id="57df8-182">Compilação</span><span class="sxs-lookup"><span data-stu-id="57df8-182">Build</span></span> |  
| <span data-ttu-id="57df8-183">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="57df8-183">**Applicable Technologies**</span></span> | <span data-ttu-id="57df8-184">Genérico</span><span class="sxs-lookup"><span data-stu-id="57df8-184">Generic</span></span> |
| <span data-ttu-id="57df8-185">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="57df8-185">**Attributes**</span></span>              | <span data-ttu-id="57df8-186">N/D</span><span class="sxs-lookup"><span data-stu-id="57df8-186">N/A</span></span>  |
| <span data-ttu-id="57df8-187">**Referências**</span><span class="sxs-lookup"><span data-stu-id="57df8-187">**References**</span></span>              | <span data-ttu-id="57df8-188">N/D</span><span class="sxs-lookup"><span data-stu-id="57df8-188">N/A</span></span>  |
| <span data-ttu-id="57df8-189">Detalhes</span><span class="sxs-lookup"><span data-stu-id="57df8-189">Details</span></span> | <p><span data-ttu-id="57df8-190">Aplicativos que explicitamente autenticar usuários devem lidar com cenários de autenticação com falha deve securely.hello mecanismo de autenticação:</span><span class="sxs-lookup"><span data-stu-id="57df8-190">Applications that explicitly authenticate users must handle failed authentication scenarios securely.hello authentication mechanism must:</span></span></p><ul><li><span data-ttu-id="57df8-191">Negar acesso tooprivileged recursos quando a autenticação falhar</span><span class="sxs-lookup"><span data-stu-id="57df8-191">Deny access tooprivileged resources when authentication fails</span></span></li><li><span data-ttu-id="57df8-192">Exibir uma mensagem de erro genérica após falha na autenticação e acesso negado</span><span class="sxs-lookup"><span data-stu-id="57df8-192">Display a generic error message after failed authentication and access denied occurs</span></span></li></ul><p><span data-ttu-id="57df8-193">Teste de:</span><span class="sxs-lookup"><span data-stu-id="57df8-193">Test for:</span></span></p><ul><li><span data-ttu-id="57df8-194">Proteção de recursos privilegiados após logons com falha</span><span class="sxs-lookup"><span data-stu-id="57df8-194">Protection of privileged resources after failed logins</span></span></li><li><span data-ttu-id="57df8-195">Será exibida uma mensagem de erro genérica em evento(s) de autenticação com falha e acesso negado</span><span class="sxs-lookup"><span data-stu-id="57df8-195">A generic error message is displayed on failed authentication and access denied event(s)</span></span></li><li><span data-ttu-id="57df8-196">As contas são desabilitadas após um número excessivo de tentativas com falha</span><span class="sxs-lookup"><span data-stu-id="57df8-196">Accounts are disabled after an excessive number of failed attempts</span></span></li><ul>|

## <span data-ttu-id="57df8-197"><a id="step-up-adaptive-authn"></a>Habilitar upgrade ou autenticação adaptável</span><span class="sxs-lookup"><span data-stu-id="57df8-197"><a id="step-up-adaptive-authn"></a>Enable step up or adaptive authentication</span></span>

| <span data-ttu-id="57df8-198">Title</span><span class="sxs-lookup"><span data-stu-id="57df8-198">Title</span></span>                   | <span data-ttu-id="57df8-199">Detalhes</span><span class="sxs-lookup"><span data-stu-id="57df8-199">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="57df8-200">**Componente**</span><span class="sxs-lookup"><span data-stu-id="57df8-200">**Component**</span></span>               | <span data-ttu-id="57df8-201">Aplicativo Web</span><span class="sxs-lookup"><span data-stu-id="57df8-201">Web Application</span></span> | 
| <span data-ttu-id="57df8-202">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="57df8-202">**SDL Phase**</span></span>               | <span data-ttu-id="57df8-203">Compilação</span><span class="sxs-lookup"><span data-stu-id="57df8-203">Build</span></span> |  
| <span data-ttu-id="57df8-204">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="57df8-204">**Applicable Technologies**</span></span> | <span data-ttu-id="57df8-205">Genérico</span><span class="sxs-lookup"><span data-stu-id="57df8-205">Generic</span></span> |
| <span data-ttu-id="57df8-206">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="57df8-206">**Attributes**</span></span>              | <span data-ttu-id="57df8-207">N/D</span><span class="sxs-lookup"><span data-stu-id="57df8-207">N/A</span></span>  |
| <span data-ttu-id="57df8-208">**Referências**</span><span class="sxs-lookup"><span data-stu-id="57df8-208">**References**</span></span>              | <span data-ttu-id="57df8-209">N/D</span><span class="sxs-lookup"><span data-stu-id="57df8-209">N/A</span></span>  |
| <span data-ttu-id="57df8-210">Detalhes</span><span class="sxs-lookup"><span data-stu-id="57df8-210">Details</span></span> | <p><span data-ttu-id="57df8-211">Verifique se o aplicativo hello tem autorização adicional (como migrar ou autenticação adaptável, através da autenticação multifator como o envio de OTP no SMS, email etc. ou pedir reautenticação) para o usuário Olá enfrenta antes de obterem acesso informações de toosensitive.</span><span class="sxs-lookup"><span data-stu-id="57df8-211">Verify hello application has additional authorization (such as step up or adaptive authentication, via multi-factor authentication such as sending OTP in SMS, email etc. or prompting for re-authentication) so hello user is challenged before being granted access toosensitive information.</span></span> <span data-ttu-id="57df8-212">Esta regra também se aplica para tornar a conta de tooan alterações importantes ou ação</span><span class="sxs-lookup"><span data-stu-id="57df8-212">This rule also applies for making critical changes tooan account or action</span></span></p><p><span data-ttu-id="57df8-213">Isso também significa que adaptação Olá de autenticação tem toobe implementado de tal maneira que o aplicativo hello impõe corretamente autorização contextual assim como toonot permitir manipulação não autorizada por meio no exemplo, violação de parâmetro</span><span class="sxs-lookup"><span data-stu-id="57df8-213">This also means that hello adaptation of authentication has toobe implemented in such a manner that hello application correctly enforces context-sensitive authorization so as toonot allow unauthorized manipulation by means of in example, parameter tampering</span></span></p>|

## <span data-ttu-id="57df8-214"><a id="admin-interface-lockdown"></a>Verifique se as interfaces administrativas estão adequadamente bloqueadas</span><span class="sxs-lookup"><span data-stu-id="57df8-214"><a id="admin-interface-lockdown"></a>Ensure that administrative interfaces are appropriately locked down</span></span>

| <span data-ttu-id="57df8-215">Title</span><span class="sxs-lookup"><span data-stu-id="57df8-215">Title</span></span>                   | <span data-ttu-id="57df8-216">Detalhes</span><span class="sxs-lookup"><span data-stu-id="57df8-216">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="57df8-217">**Componente**</span><span class="sxs-lookup"><span data-stu-id="57df8-217">**Component**</span></span>               | <span data-ttu-id="57df8-218">Aplicativo Web</span><span class="sxs-lookup"><span data-stu-id="57df8-218">Web Application</span></span> | 
| <span data-ttu-id="57df8-219">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="57df8-219">**SDL Phase**</span></span>               | <span data-ttu-id="57df8-220">Compilação</span><span class="sxs-lookup"><span data-stu-id="57df8-220">Build</span></span> |  
| <span data-ttu-id="57df8-221">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="57df8-221">**Applicable Technologies**</span></span> | <span data-ttu-id="57df8-222">Genérico</span><span class="sxs-lookup"><span data-stu-id="57df8-222">Generic</span></span> |
| <span data-ttu-id="57df8-223">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="57df8-223">**Attributes**</span></span>              | <span data-ttu-id="57df8-224">N/D</span><span class="sxs-lookup"><span data-stu-id="57df8-224">N/A</span></span>  |
| <span data-ttu-id="57df8-225">**Referências**</span><span class="sxs-lookup"><span data-stu-id="57df8-225">**References**</span></span>              | <span data-ttu-id="57df8-226">N/D</span><span class="sxs-lookup"><span data-stu-id="57df8-226">N/A</span></span>  |
| <span data-ttu-id="57df8-227">Detalhes</span><span class="sxs-lookup"><span data-stu-id="57df8-227">Details</span></span> | <span data-ttu-id="57df8-228">Olá primeira solução é toogrant acesso somente a partir de um determinado origem IP intervalo toohello interface administrativa.</span><span class="sxs-lookup"><span data-stu-id="57df8-228">hello first solution is toogrant access only from a certain source IP range toohello administrative interface.</span></span> <span data-ttu-id="57df8-229">Se essa solução não seria possível que ele é sempre recomendável tooenforce uma autenticação Step-up ou adaptável para fazer logon na interface administrativa Olá</span><span class="sxs-lookup"><span data-stu-id="57df8-229">If that solution would not be possible than it is always recommended tooenforce a step-up or adaptive authentication for logging in into hello administrative interface</span></span> |

## <span data-ttu-id="57df8-230"><a id="forgot-pword-fxn"></a>Implemente funcionalidades de senha esquecida com segurança</span><span class="sxs-lookup"><span data-stu-id="57df8-230"><a id="forgot-pword-fxn"></a>Implement forgot password functionalities securely</span></span>

| <span data-ttu-id="57df8-231">Title</span><span class="sxs-lookup"><span data-stu-id="57df8-231">Title</span></span>                   | <span data-ttu-id="57df8-232">Detalhes</span><span class="sxs-lookup"><span data-stu-id="57df8-232">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="57df8-233">**Componente**</span><span class="sxs-lookup"><span data-stu-id="57df8-233">**Component**</span></span>               | <span data-ttu-id="57df8-234">Aplicativo Web</span><span class="sxs-lookup"><span data-stu-id="57df8-234">Web Application</span></span> | 
| <span data-ttu-id="57df8-235">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="57df8-235">**SDL Phase**</span></span>               | <span data-ttu-id="57df8-236">Compilação</span><span class="sxs-lookup"><span data-stu-id="57df8-236">Build</span></span> |  
| <span data-ttu-id="57df8-237">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="57df8-237">**Applicable Technologies**</span></span> | <span data-ttu-id="57df8-238">Genérico</span><span class="sxs-lookup"><span data-stu-id="57df8-238">Generic</span></span> |
| <span data-ttu-id="57df8-239">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="57df8-239">**Attributes**</span></span>              | <span data-ttu-id="57df8-240">N/D</span><span class="sxs-lookup"><span data-stu-id="57df8-240">N/A</span></span>  |
| <span data-ttu-id="57df8-241">**Referências**</span><span class="sxs-lookup"><span data-stu-id="57df8-241">**References**</span></span>              | <span data-ttu-id="57df8-242">N/D</span><span class="sxs-lookup"><span data-stu-id="57df8-242">N/A</span></span>  |
| <span data-ttu-id="57df8-243">Detalhes</span><span class="sxs-lookup"><span data-stu-id="57df8-243">Details</span></span> | <p><span data-ttu-id="57df8-244">Olá é primeiro tooverify que esqueceu a senha e outros caminhos de recuperação enviam um link, incluindo uma senha de token, em vez da saudação de ativação de tempo limite em si.</span><span class="sxs-lookup"><span data-stu-id="57df8-244">hello first thing is tooverify that forgot password and other recovery paths send a link including a time-limited activation token rather than hello password itself.</span></span> <span data-ttu-id="57df8-245">Autenticação adicional com base em tokens de software (por exemplo, SMS token móveis aplicativos nativos, etc.) pode ser necessária bem antes de link de saudação é enviado pela.</span><span class="sxs-lookup"><span data-stu-id="57df8-245">Additional authentication based on soft-tokens (e.g. SMS token, native mobile applications, etc.) can be required as well before hello link is sent over.</span></span> <span data-ttu-id="57df8-246">Em segundo lugar, você não deve bloquear as contas de usuários Olá durante o processo de saudação de obtenção de uma nova senha está em andamento.</span><span class="sxs-lookup"><span data-stu-id="57df8-246">Second, you should not lock out hello users account whilst hello process of getting a new password is in progress.</span></span></p><p><span data-ttu-id="57df8-247">Isso poderia gerar tooa negação de ataque de serviço sempre que um invasor decide bloqueio toointentionally usuários Olá com um ataque automatizado.</span><span class="sxs-lookup"><span data-stu-id="57df8-247">This could lead tooa Denial of service attack whenever an attacker decides toointentionally lock out hello users with an automated attack.</span></span> <span data-ttu-id="57df8-248">Em terceiro lugar, sempre que a nova solicitação de senha Olá foi definida em andamento, mensagem de saudação que é exibir deve ser generalizada na enumeração de nome de usuário de tooprevent de ordem.</span><span class="sxs-lookup"><span data-stu-id="57df8-248">Third, whenever hello new password request was set in progress, hello message you display should be generalized in order tooprevent username enumeration.</span></span> <span data-ttu-id="57df8-249">Quarto, sempre impedir Olá uso de senhas antigas e implemente uma política de senha forte.</span><span class="sxs-lookup"><span data-stu-id="57df8-249">Fourth, always disallow hello use of old passwords and implement a strong password policy.</span></span></p> |

## <span data-ttu-id="57df8-250"><a id="pword-account-policy"></a>Verifique se as políticas de conta e senha são implementadas</span><span class="sxs-lookup"><span data-stu-id="57df8-250"><a id="pword-account-policy"></a>Ensure that password and account policy are implemented</span></span>

| <span data-ttu-id="57df8-251">Title</span><span class="sxs-lookup"><span data-stu-id="57df8-251">Title</span></span>                   | <span data-ttu-id="57df8-252">Detalhes</span><span class="sxs-lookup"><span data-stu-id="57df8-252">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="57df8-253">**Componente**</span><span class="sxs-lookup"><span data-stu-id="57df8-253">**Component**</span></span>               | <span data-ttu-id="57df8-254">Aplicativo Web</span><span class="sxs-lookup"><span data-stu-id="57df8-254">Web Application</span></span> | 
| <span data-ttu-id="57df8-255">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="57df8-255">**SDL Phase**</span></span>               | <span data-ttu-id="57df8-256">Compilação</span><span class="sxs-lookup"><span data-stu-id="57df8-256">Build</span></span> |  
| <span data-ttu-id="57df8-257">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="57df8-257">**Applicable Technologies**</span></span> | <span data-ttu-id="57df8-258">Genérico</span><span class="sxs-lookup"><span data-stu-id="57df8-258">Generic</span></span> |
| <span data-ttu-id="57df8-259">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="57df8-259">**Attributes**</span></span>              | <span data-ttu-id="57df8-260">N/D</span><span class="sxs-lookup"><span data-stu-id="57df8-260">N/A</span></span>  |
| <span data-ttu-id="57df8-261">**Referências**</span><span class="sxs-lookup"><span data-stu-id="57df8-261">**References**</span></span>              | <span data-ttu-id="57df8-262">N/D</span><span class="sxs-lookup"><span data-stu-id="57df8-262">N/A</span></span>  |
| <span data-ttu-id="57df8-263">Detalhes</span><span class="sxs-lookup"><span data-stu-id="57df8-263">Details</span></span> | <p><span data-ttu-id="57df8-264">A política de conta e senha em conformidade com a política organizacional e as práticas recomendadas deve ser implementadas.</span><span class="sxs-lookup"><span data-stu-id="57df8-264">Password and account policy in compliance with organizational policy and best practices should be implemented.</span></span></p><p><span data-ttu-id="57df8-265">toodefend contra a força bruta e de dicionário com base em adivinhação: política de senha forte deve ser implementado tooensure aos usuários criarem uma senha complexa (por exemplo, comprimento mínimo de 12 caracteres, caracteres especiais e alfanuméricos).</span><span class="sxs-lookup"><span data-stu-id="57df8-265">toodefend against brute-force and dictionary based guessing: Strong password policy must be implemented tooensure that users create complex password (e.g., 12 characters minimum length, alphanumeric and special characters).</span></span></p><p><span data-ttu-id="57df8-266">Políticas de bloqueio de conta podem ser implementadas em Olá maneira a seguir:</span><span class="sxs-lookup"><span data-stu-id="57df8-266">Account lockout policies may be implemented in hello following manner:</span></span></p><ul><li><span data-ttu-id="57df8-267">**Limite de bloqueio flexível:** essa pode ser uma boa opção para proteger os usuários contra ataques de força bruta.</span><span class="sxs-lookup"><span data-stu-id="57df8-267">**Soft lock-out:** This can be a good option for protecting your users against brute force attacks.</span></span> <span data-ttu-id="57df8-268">Por exemplo, sempre que o usuário Olá insere uma senha incorreta aplicativo hello de três vezes pode bloquear conta Olá por um minuto em ordem tooslow processo Olá de aplicar a sua senha, tornando-o menos lucrativo para Olá invasor tooproceed de força bruta.</span><span class="sxs-lookup"><span data-stu-id="57df8-268">For example, whenever hello user enters a wrong password three times hello application could lock down hello account for a minute in order tooslow down hello process of brute forcing his password making it less profitable for hello attacker tooproceed.</span></span> <span data-ttu-id="57df8-269">Se você tooimplement rígido contramedidas de limite de bloqueio para este exemplo, você deve obter um "Dos" bloqueando permanentemente as contas.</span><span class="sxs-lookup"><span data-stu-id="57df8-269">If u were tooimplement hard lock-out countermeasures for this example you would achieve a "Dos" by permanently locking out accounts.</span></span> <span data-ttu-id="57df8-270">Como alternativa, o aplicativo pode gerar uma OTP (senha) e enviá-lo fora de banda (por email, sms etc.) toohello usuário.</span><span class="sxs-lookup"><span data-stu-id="57df8-270">Alternatively, application may generate an OTP (One Time Password) and send it out-of-band (through email, sms etc.) toohello user.</span></span> <span data-ttu-id="57df8-271">Outra abordagem possível tooimplement CAPTCHA depois que um número limite de tentativas for atingido.</span><span class="sxs-lookup"><span data-stu-id="57df8-271">Another approach may be tooimplement CAPTCHA after a threshold number of failed attempts is reached.</span></span></li><li><span data-ttu-id="57df8-272">**Limite de bloqueio rígido:** esse tipo de bloqueio deve ser aplicado sempre que você detecta um usuário atacar o seu aplicativo e contador-lo por meio de bloquear sua conta permanentemente até que uma equipe de resposta teve tempo toodo sua análise forense.</span><span class="sxs-lookup"><span data-stu-id="57df8-272">**Hard lock-out:** This type of lockout should be applied whenever you detect a user attacking your application and counter him by means of permanently locking out his account until a response team had time toodo their forensics.</span></span> <span data-ttu-id="57df8-273">Após esse processo, você pode decidir toogive Olá ao usuário sua conta ou tomar ações legais adicionais em relação a ele.</span><span class="sxs-lookup"><span data-stu-id="57df8-273">After this process you can decide toogive hello user back his account or take further legal actions against him.</span></span> <span data-ttu-id="57df8-274">Esse tipo de abordagem impede que o invasor Olá penetrem ainda mais sua infraestrutura e aplicativo.</span><span class="sxs-lookup"><span data-stu-id="57df8-274">This type of approach prevents hello attacker from further penetrating your application and infrastructure.</span></span></li></ul><p><span data-ttu-id="57df8-275">toodefend contra ataques em padrão e contas previsíveis, verifique se todas as chaves e senhas são substituíveis e são geradas ou substituídas após a instalação.</span><span class="sxs-lookup"><span data-stu-id="57df8-275">toodefend against attacks on default and predictable accounts, verify that all keys and passwords are replaceable, and are generated or replaced after installation time.</span></span></p><p><span data-ttu-id="57df8-276">Se o aplicativo hello tem tooauto-gerar senhas, verifique se senhas Olá gerado são aleatórias e tem alta entropia.</span><span class="sxs-lookup"><span data-stu-id="57df8-276">If hello application has tooauto-generate passwords, ensure that hello generated passwords are random and have high entropy.</span></span></p>|

## <span data-ttu-id="57df8-277"><a id="controls-username-enum"></a>Implementar controles tooprevent username enumeração</span><span class="sxs-lookup"><span data-stu-id="57df8-277"><a id="controls-username-enum"></a>Implement controls tooprevent username enumeration</span></span>

| <span data-ttu-id="57df8-278">Title</span><span class="sxs-lookup"><span data-stu-id="57df8-278">Title</span></span>                   | <span data-ttu-id="57df8-279">Detalhes</span><span class="sxs-lookup"><span data-stu-id="57df8-279">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="57df8-280">**Componente**</span><span class="sxs-lookup"><span data-stu-id="57df8-280">**Component**</span></span>               | <span data-ttu-id="57df8-281">Aplicativo Web</span><span class="sxs-lookup"><span data-stu-id="57df8-281">Web Application</span></span> | 
| <span data-ttu-id="57df8-282">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="57df8-282">**SDL Phase**</span></span>               | <span data-ttu-id="57df8-283">Compilação</span><span class="sxs-lookup"><span data-stu-id="57df8-283">Build</span></span> |  
| <span data-ttu-id="57df8-284">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="57df8-284">**Applicable Technologies**</span></span> | <span data-ttu-id="57df8-285">Genérico</span><span class="sxs-lookup"><span data-stu-id="57df8-285">Generic</span></span> |
| <span data-ttu-id="57df8-286">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="57df8-286">**Attributes**</span></span>              | <span data-ttu-id="57df8-287">N/D</span><span class="sxs-lookup"><span data-stu-id="57df8-287">N/A</span></span>  |
| <span data-ttu-id="57df8-288">**Referências**</span><span class="sxs-lookup"><span data-stu-id="57df8-288">**References**</span></span>              | <span data-ttu-id="57df8-289">N/D</span><span class="sxs-lookup"><span data-stu-id="57df8-289">N/A</span></span>  |
| <span data-ttu-id="57df8-290">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="57df8-290">**Steps**</span></span> | <span data-ttu-id="57df8-291">Todas as mensagens de erro devem ser generalizadas na enumeração de nome de usuário de tooprevent de ordem.</span><span class="sxs-lookup"><span data-stu-id="57df8-291">All error messages should be generalized in order tooprevent username enumeration.</span></span> <span data-ttu-id="57df8-292">Além disso, às vezes você não pode evitar o vazamento de recursos, como uma página de registro de informações.</span><span class="sxs-lookup"><span data-stu-id="57df8-292">Also sometimes you cannot avoid information leaking in functionalities such as a registration page.</span></span> <span data-ttu-id="57df8-293">Aqui você precisa de métodos de limitação de taxa de toouse como CAPTCHA tooprevent um ataque automatizado por um invasor.</span><span class="sxs-lookup"><span data-stu-id="57df8-293">Here you need toouse rate-limiting methods like CAPTCHA tooprevent an automated attack by an attacker.</span></span> |

## <span data-ttu-id="57df8-294"><a id="win-authn-sql"></a>Quando possível, use a autenticação do Windows para conectar-se tooSQL Server</span><span class="sxs-lookup"><span data-stu-id="57df8-294"><a id="win-authn-sql"></a>When possible, use Windows Authentication for connecting tooSQL Server</span></span>

| <span data-ttu-id="57df8-295">Title</span><span class="sxs-lookup"><span data-stu-id="57df8-295">Title</span></span>                   | <span data-ttu-id="57df8-296">Detalhes</span><span class="sxs-lookup"><span data-stu-id="57df8-296">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="57df8-297">**Componente**</span><span class="sxs-lookup"><span data-stu-id="57df8-297">**Component**</span></span>               | <span data-ttu-id="57df8-298">Banco de dados</span><span class="sxs-lookup"><span data-stu-id="57df8-298">Database</span></span> | 
| <span data-ttu-id="57df8-299">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="57df8-299">**SDL Phase**</span></span>               | <span data-ttu-id="57df8-300">Compilação</span><span class="sxs-lookup"><span data-stu-id="57df8-300">Build</span></span> |  
| <span data-ttu-id="57df8-301">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="57df8-301">**Applicable Technologies**</span></span> | <span data-ttu-id="57df8-302">OnPrem</span><span class="sxs-lookup"><span data-stu-id="57df8-302">OnPrem</span></span> |
| <span data-ttu-id="57df8-303">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="57df8-303">**Attributes**</span></span>              | <span data-ttu-id="57df8-304">Versão do SQL - Todas</span><span class="sxs-lookup"><span data-stu-id="57df8-304">SQL Version - All</span></span> |
| <span data-ttu-id="57df8-305">**Referências**</span><span class="sxs-lookup"><span data-stu-id="57df8-305">**References**</span></span>              | [<span data-ttu-id="57df8-306">SQL Server - escolher um modo de autenticação</span><span class="sxs-lookup"><span data-stu-id="57df8-306">SQL Server - Choose an Authentication Mode</span></span>](https://msdn.microsoft.com/library/ms144284.aspx) |
| <span data-ttu-id="57df8-307">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="57df8-307">**Steps**</span></span> | <span data-ttu-id="57df8-308">Autenticação do Windows usa o protocolo de segurança Kerberos, fornece imposição de política de senha com a validação de toocomplexity de relação para senhas fortes, fornece suporte para bloqueio de conta e dá suporte à expiração de senha.</span><span class="sxs-lookup"><span data-stu-id="57df8-308">Windows Authentication uses Kerberos security protocol, provides password policy enforcement with regard toocomplexity validation for strong passwords, provides support for account lockout, and supports password expiration.</span></span>|

## <span data-ttu-id="57df8-309"><a id="aad-authn-sql"></a>Quando possível, use autenticação do Active Directory do Azure para conectar-se tooSQL banco de dados</span><span class="sxs-lookup"><span data-stu-id="57df8-309"><a id="aad-authn-sql"></a>When possible use Azure Active Directory Authentication for Connecting tooSQL Database</span></span>

| <span data-ttu-id="57df8-310">Title</span><span class="sxs-lookup"><span data-stu-id="57df8-310">Title</span></span>                   | <span data-ttu-id="57df8-311">Detalhes</span><span class="sxs-lookup"><span data-stu-id="57df8-311">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="57df8-312">**Componente**</span><span class="sxs-lookup"><span data-stu-id="57df8-312">**Component**</span></span>               | <span data-ttu-id="57df8-313">Banco de dados</span><span class="sxs-lookup"><span data-stu-id="57df8-313">Database</span></span> | 
| <span data-ttu-id="57df8-314">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="57df8-314">**SDL Phase**</span></span>               | <span data-ttu-id="57df8-315">Compilação</span><span class="sxs-lookup"><span data-stu-id="57df8-315">Build</span></span> |  
| <span data-ttu-id="57df8-316">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="57df8-316">**Applicable Technologies**</span></span> | <span data-ttu-id="57df8-317">SQL Azure</span><span class="sxs-lookup"><span data-stu-id="57df8-317">SQL Azure</span></span> |
| <span data-ttu-id="57df8-318">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="57df8-318">**Attributes**</span></span>              | <span data-ttu-id="57df8-319">Versão do SQL - V12</span><span class="sxs-lookup"><span data-stu-id="57df8-319">SQL Version - V12</span></span> |
| <span data-ttu-id="57df8-320">**Referências**</span><span class="sxs-lookup"><span data-stu-id="57df8-320">**References**</span></span>              | [<span data-ttu-id="57df8-321">Conectando tooSQL banco de dados, usando o Azure Active Directory Authentication</span><span class="sxs-lookup"><span data-stu-id="57df8-321">Connecting tooSQL Database By Using Azure Active Directory Authentication</span></span>](https://azure.microsoft.com/documentation/articles/sql-database-aad-authentication/) |
| <span data-ttu-id="57df8-322">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="57df8-322">**Steps**</span></span> | <span data-ttu-id="57df8-323">**Versão mínima:** V12 de banco de dados do SQL Azure necessário toouse autenticação do AAD do Azure SQL Database tooallow contra Olá Directory do Microsoft</span><span class="sxs-lookup"><span data-stu-id="57df8-323">**Minimum version:** Azure SQL Database V12 required tooallow Azure SQL Database toouse AAD Authentication against hello Microsoft Directory</span></span> |

## <span data-ttu-id="57df8-324"><a id="authn-account-pword"></a>Quando o modo de autenticação do SQL for usado, verifique se as políticas de conta e senha são impostas no SQL server</span><span class="sxs-lookup"><span data-stu-id="57df8-324"><a id="authn-account-pword"></a>When SQL authentication mode is used, ensure that account and password policy are enforced on SQL server</span></span>

| <span data-ttu-id="57df8-325">Title</span><span class="sxs-lookup"><span data-stu-id="57df8-325">Title</span></span>                   | <span data-ttu-id="57df8-326">Detalhes</span><span class="sxs-lookup"><span data-stu-id="57df8-326">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="57df8-327">**Componente**</span><span class="sxs-lookup"><span data-stu-id="57df8-327">**Component**</span></span>               | <span data-ttu-id="57df8-328">Banco de dados</span><span class="sxs-lookup"><span data-stu-id="57df8-328">Database</span></span> | 
| <span data-ttu-id="57df8-329">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="57df8-329">**SDL Phase**</span></span>               | <span data-ttu-id="57df8-330">Compilação</span><span class="sxs-lookup"><span data-stu-id="57df8-330">Build</span></span> |  
| <span data-ttu-id="57df8-331">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="57df8-331">**Applicable Technologies**</span></span> | <span data-ttu-id="57df8-332">Genérico</span><span class="sxs-lookup"><span data-stu-id="57df8-332">Generic</span></span> |
| <span data-ttu-id="57df8-333">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="57df8-333">**Attributes**</span></span>              | <span data-ttu-id="57df8-334">N/D</span><span class="sxs-lookup"><span data-stu-id="57df8-334">N/A</span></span>  |
| <span data-ttu-id="57df8-335">**Referências**</span><span class="sxs-lookup"><span data-stu-id="57df8-335">**References**</span></span>              | <span data-ttu-id="57df8-336">[Política de senha do SQL Server](https://technet.microsoft.com/library/ms161959(v=sql.110).aspx)</span><span class="sxs-lookup"><span data-stu-id="57df8-336">[SQL Server password policy](https://technet.microsoft.com/library/ms161959(v=sql.110).aspx)</span></span> |
| <span data-ttu-id="57df8-337">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="57df8-337">**Steps**</span></span> | <span data-ttu-id="57df8-338">Ao usar a Autenticação do SQL Server, são criados logons no SQL Server que não se baseiam em contas de usuário do Windows.</span><span class="sxs-lookup"><span data-stu-id="57df8-338">When using SQL Server Authentication, logins are created in SQL Server that are not based on Windows user accounts.</span></span> <span data-ttu-id="57df8-339">Nome de usuário hello e senha Olá são criadas usando o SQL Server e armazenados no SQL Server.</span><span class="sxs-lookup"><span data-stu-id="57df8-339">Both hello user name and hello password are created by using SQL Server and stored in SQL Server.</span></span> <span data-ttu-id="57df8-340">O SQL Server pode usar mecanismos de política de senha do Windows.</span><span class="sxs-lookup"><span data-stu-id="57df8-340">SQL Server can use Windows password policy mechanisms.</span></span> <span data-ttu-id="57df8-341">Ele pode aplicar Olá mesmas políticas de complexidade e validade usadas no Windows toopasswords usado dentro do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="57df8-341">It can apply hello same complexity and expiration policies used in Windows toopasswords used inside SQL Server.</span></span> |

## <span data-ttu-id="57df8-342"><a id="autn-contained-db"></a>Não use a Autenticação do SQL em bancos de dados independentes</span><span class="sxs-lookup"><span data-stu-id="57df8-342"><a id="autn-contained-db"></a>Do not use SQL Authentication in contained databases</span></span>

| <span data-ttu-id="57df8-343">Title</span><span class="sxs-lookup"><span data-stu-id="57df8-343">Title</span></span>                   | <span data-ttu-id="57df8-344">Detalhes</span><span class="sxs-lookup"><span data-stu-id="57df8-344">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="57df8-345">**Componente**</span><span class="sxs-lookup"><span data-stu-id="57df8-345">**Component**</span></span>               | <span data-ttu-id="57df8-346">Banco de dados</span><span class="sxs-lookup"><span data-stu-id="57df8-346">Database</span></span> | 
| <span data-ttu-id="57df8-347">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="57df8-347">**SDL Phase**</span></span>               | <span data-ttu-id="57df8-348">Compilação</span><span class="sxs-lookup"><span data-stu-id="57df8-348">Build</span></span> |  
| <span data-ttu-id="57df8-349">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="57df8-349">**Applicable Technologies**</span></span> | <span data-ttu-id="57df8-350">OnPrem, SQL Azure</span><span class="sxs-lookup"><span data-stu-id="57df8-350">OnPrem, SQL Azure</span></span> |
| <span data-ttu-id="57df8-351">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="57df8-351">**Attributes**</span></span>              | <span data-ttu-id="57df8-352">Versão do SQL - MSSQL2012, Versão do SQL - V12</span><span class="sxs-lookup"><span data-stu-id="57df8-352">SQL Version - MSSQL2012, SQL Version - V12</span></span> |
| <span data-ttu-id="57df8-353">**Referências**</span><span class="sxs-lookup"><span data-stu-id="57df8-353">**References**</span></span>              | [<span data-ttu-id="57df8-354">Práticas recomendadas de segurança com bancos de dados contidos</span><span class="sxs-lookup"><span data-stu-id="57df8-354">Security Best Practices with Contained Databases</span></span>](http://msdn.microsoft.com/library/ff929055.aspx) |
| <span data-ttu-id="57df8-355">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="57df8-355">**Steps**</span></span> | <span data-ttu-id="57df8-356">ausência de saudação de uma política de senha aplicada pode aumentar a probabilidade de saudação de uma credencial fraca que está sendo estabelecida em um banco de dados independente.</span><span class="sxs-lookup"><span data-stu-id="57df8-356">hello absence of an enforced password policy may increase hello likelihood of a weak credential being established in a contained database.</span></span> <span data-ttu-id="57df8-357">Aproveite a Autenticação do Windows.</span><span class="sxs-lookup"><span data-stu-id="57df8-357">Leverage Windows Authentication.</span></span> |

## <span data-ttu-id="57df8-358"><a id="authn-sas-tokens"></a>Use credenciais de autenticação por dispositivo usando tokens SaS</span><span class="sxs-lookup"><span data-stu-id="57df8-358"><a id="authn-sas-tokens"></a>Use per device authentication credentials using SaS tokens</span></span>

| <span data-ttu-id="57df8-359">Title</span><span class="sxs-lookup"><span data-stu-id="57df8-359">Title</span></span>                   | <span data-ttu-id="57df8-360">Detalhes</span><span class="sxs-lookup"><span data-stu-id="57df8-360">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="57df8-361">**Componente**</span><span class="sxs-lookup"><span data-stu-id="57df8-361">**Component**</span></span>               | <span data-ttu-id="57df8-362">Hub de Eventos do Azure</span><span class="sxs-lookup"><span data-stu-id="57df8-362">Azure Event Hub</span></span> | 
| <span data-ttu-id="57df8-363">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="57df8-363">**SDL Phase**</span></span>               | <span data-ttu-id="57df8-364">Compilação</span><span class="sxs-lookup"><span data-stu-id="57df8-364">Build</span></span> |  
| <span data-ttu-id="57df8-365">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="57df8-365">**Applicable Technologies**</span></span> | <span data-ttu-id="57df8-366">Genérico</span><span class="sxs-lookup"><span data-stu-id="57df8-366">Generic</span></span> |
| <span data-ttu-id="57df8-367">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="57df8-367">**Attributes**</span></span>              | <span data-ttu-id="57df8-368">N/D</span><span class="sxs-lookup"><span data-stu-id="57df8-368">N/A</span></span>  |
| <span data-ttu-id="57df8-369">**Referências**</span><span class="sxs-lookup"><span data-stu-id="57df8-369">**References**</span></span>              | [<span data-ttu-id="57df8-370">Visão geral do modelo de autenticação e segurança dos Hubs de Eventos</span><span class="sxs-lookup"><span data-stu-id="57df8-370">Event Hubs authentication and security model overview</span></span>](https://azure.microsoft.com/documentation/articles/event-hubs-authentication-and-security-model-overview/) |
| <span data-ttu-id="57df8-371">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="57df8-371">**Steps**</span></span> | <p><span data-ttu-id="57df8-372">modelo de segurança de Hubs de eventos Olá baseia-se em uma combinação de tokens de assinatura de acesso compartilhado (SAS) e editores de eventos.</span><span class="sxs-lookup"><span data-stu-id="57df8-372">hello Event Hubs security model is based on a combination of Shared Access Signature (SAS) tokens and event publishers.</span></span> <span data-ttu-id="57df8-373">nome do publicador Olá representa Olá DeviceID que recebe o token de saudação.</span><span class="sxs-lookup"><span data-stu-id="57df8-373">hello publisher name represents hello DeviceID that receives hello token.</span></span> <span data-ttu-id="57df8-374">Isso ajuda a associar tokens Olá gerados com dispositivos respectivos hello.</span><span class="sxs-lookup"><span data-stu-id="57df8-374">This would help associate hello tokens generated with hello respective devices.</span></span></p><p><span data-ttu-id="57df8-375">Todas as mensagens são marcadas com o originador no lado do serviço, o que permite a detecção de tentativas de falsificação de origem na carga.</span><span class="sxs-lookup"><span data-stu-id="57df8-375">All messages are tagged with originator on service side allowing detection of in-payload origin spoofing attempts.</span></span> <span data-ttu-id="57df8-376">Na autenticação de dispositivos, gerar um por publicador exclusivo do dispositivo SaS token tooa no escopo.</span><span class="sxs-lookup"><span data-stu-id="57df8-376">When authenticating devices, generate a per device SaS token scoped tooa unique publisher.</span></span></p>|

## <span data-ttu-id="57df8-377"><a id="multi-factor-azure-admin"></a>Habilitar Autenticação Multifator do Azure para administradores do Azure</span><span class="sxs-lookup"><span data-stu-id="57df8-377"><a id="multi-factor-azure-admin"></a>Enable Azure Multi-Factor Authentication for Azure Administrators</span></span>

| <span data-ttu-id="57df8-378">Title</span><span class="sxs-lookup"><span data-stu-id="57df8-378">Title</span></span>                   | <span data-ttu-id="57df8-379">Detalhes</span><span class="sxs-lookup"><span data-stu-id="57df8-379">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="57df8-380">**Componente**</span><span class="sxs-lookup"><span data-stu-id="57df8-380">**Component**</span></span>               | <span data-ttu-id="57df8-381">Limite de Confiança do Azure</span><span class="sxs-lookup"><span data-stu-id="57df8-381">Azure Trust Boundary</span></span> | 
| <span data-ttu-id="57df8-382">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="57df8-382">**SDL Phase**</span></span>               | <span data-ttu-id="57df8-383">Implantação</span><span class="sxs-lookup"><span data-stu-id="57df8-383">Deployment</span></span> |  
| <span data-ttu-id="57df8-384">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="57df8-384">**Applicable Technologies**</span></span> | <span data-ttu-id="57df8-385">Genérico</span><span class="sxs-lookup"><span data-stu-id="57df8-385">Generic</span></span> |
| <span data-ttu-id="57df8-386">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="57df8-386">**Attributes**</span></span>              | <span data-ttu-id="57df8-387">N/D</span><span class="sxs-lookup"><span data-stu-id="57df8-387">N/A</span></span>  |
| <span data-ttu-id="57df8-388">**Referências**</span><span class="sxs-lookup"><span data-stu-id="57df8-388">**References**</span></span>              | [<span data-ttu-id="57df8-389">O que é a Autenticação Multifator do Azure?</span><span class="sxs-lookup"><span data-stu-id="57df8-389">What is Azure Multi-Factor Authentication?</span></span>](https://azure.microsoft.com/documentation/articles/multi-factor-authentication/) |
| <span data-ttu-id="57df8-390">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="57df8-390">**Steps**</span></span> | <p><span data-ttu-id="57df8-391">A autenticação multifator (MFA) é um método de autenticação que requer mais de um método de verificação e adiciona uma segunda camada crítica de segurança toouser entradas e transações.</span><span class="sxs-lookup"><span data-stu-id="57df8-391">Multi-factor authentication (MFA) is a method of authentication that requires more than one verification method and adds a critical second layer of security toouser sign-ins and transactions.</span></span> <span data-ttu-id="57df8-392">Ela funciona exigindo dois ou mais Olá métodos de verificação a seguir:</span><span class="sxs-lookup"><span data-stu-id="57df8-392">It works by requiring any two or more of hello following verification methods:</span></span></p><ul><li><span data-ttu-id="57df8-393">Algo que você sabe (normalmente, uma senha)</span><span class="sxs-lookup"><span data-stu-id="57df8-393">Something you know (typically a password)</span></span></li><li><span data-ttu-id="57df8-394">Algo que você tem (um dispositivo confiável que não pode ser facilmente clonado, como um telefone)</span><span class="sxs-lookup"><span data-stu-id="57df8-394">Something you have (a trusted device that is not easily duplicated, like a phone)</span></span></li><li><span data-ttu-id="57df8-395">Algo seu (biometria)</span><span class="sxs-lookup"><span data-stu-id="57df8-395">Something you are (biometrics)</span></span></li><ul>|

## <span data-ttu-id="57df8-396"><a id="anon-access-cluster"></a>Restringir o acesso anônimo tooService Cluster de malha</span><span class="sxs-lookup"><span data-stu-id="57df8-396"><a id="anon-access-cluster"></a>Restrict anonymous access tooService Fabric Cluster</span></span>

| <span data-ttu-id="57df8-397">Title</span><span class="sxs-lookup"><span data-stu-id="57df8-397">Title</span></span>                   | <span data-ttu-id="57df8-398">Detalhes</span><span class="sxs-lookup"><span data-stu-id="57df8-398">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="57df8-399">**Componente**</span><span class="sxs-lookup"><span data-stu-id="57df8-399">**Component**</span></span>               | <span data-ttu-id="57df8-400">Limite de confiança do Service Fabric</span><span class="sxs-lookup"><span data-stu-id="57df8-400">Service Fabric Trust Boundary</span></span> | 
| <span data-ttu-id="57df8-401">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="57df8-401">**SDL Phase**</span></span>               | <span data-ttu-id="57df8-402">Implantação</span><span class="sxs-lookup"><span data-stu-id="57df8-402">Deployment</span></span> |  
| <span data-ttu-id="57df8-403">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="57df8-403">**Applicable Technologies**</span></span> | <span data-ttu-id="57df8-404">Genérico</span><span class="sxs-lookup"><span data-stu-id="57df8-404">Generic</span></span> |
| <span data-ttu-id="57df8-405">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="57df8-405">**Attributes**</span></span>              | <span data-ttu-id="57df8-406">Ambiente - Azure</span><span class="sxs-lookup"><span data-stu-id="57df8-406">Environment - Azure</span></span>  |
| <span data-ttu-id="57df8-407">**Referências**</span><span class="sxs-lookup"><span data-stu-id="57df8-407">**References**</span></span>              | [<span data-ttu-id="57df8-408">Cenários de segurança do cluster do Service Fabric</span><span class="sxs-lookup"><span data-stu-id="57df8-408">Service Fabric cluster security scenarios</span></span>](https://azure.microsoft.com/documentation/articles/service-fabric-cluster-security) |
| <span data-ttu-id="57df8-409">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="57df8-409">**Steps**</span></span> | <p><span data-ttu-id="57df8-410">Clusters sempre devem ser protegido tooprevent não autorizado usuários conectem cluster tooyour, especialmente quando ele tiver cargas de trabalho de produção em execução.</span><span class="sxs-lookup"><span data-stu-id="57df8-410">Clusters should always be secured tooprevent unauthorized users from connecting tooyour cluster, especially when it has production workloads running on it.</span></span></p><p><span data-ttu-id="57df8-411">Ao criar um cluster do service fabric, certifique-se de que o modo de segurança hello está definido muito "seguro" e configure o certificado de servidor x. 509 Olá necessário.</span><span class="sxs-lookup"><span data-stu-id="57df8-411">While creating a service fabric cluster, ensure that hello security mode is set too"secure" and configure hello required X.509 server certificate.</span></span> <span data-ttu-id="57df8-412">Criar um cluster "inseguro" permitirá que qualquer tooit tooconnect de usuário anônimo se toohello de pontos de extremidade de gerenciamento, ele expõe Internet pública.</span><span class="sxs-lookup"><span data-stu-id="57df8-412">Creating an "insecure" cluster will allow any anonymous user tooconnect tooit if it exposes management endpoints toohello public Internet.</span></span></p>|

## <span data-ttu-id="57df8-413"><a id="fabric-cn-nn"></a>Verifique se o certificado de cliente para o nó de Service Fabric serviço é diferente do certificado de nó para nó</span><span class="sxs-lookup"><span data-stu-id="57df8-413"><a id="fabric-cn-nn"></a>Ensure that Service Fabric client-to-node certificate is different from node-to-node certificate</span></span>

| <span data-ttu-id="57df8-414">Title</span><span class="sxs-lookup"><span data-stu-id="57df8-414">Title</span></span>                   | <span data-ttu-id="57df8-415">Detalhes</span><span class="sxs-lookup"><span data-stu-id="57df8-415">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="57df8-416">**Componente**</span><span class="sxs-lookup"><span data-stu-id="57df8-416">**Component**</span></span>               | <span data-ttu-id="57df8-417">Limite de confiança do Service Fabric</span><span class="sxs-lookup"><span data-stu-id="57df8-417">Service Fabric Trust Boundary</span></span> | 
| <span data-ttu-id="57df8-418">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="57df8-418">**SDL Phase**</span></span>               | <span data-ttu-id="57df8-419">Implantação</span><span class="sxs-lookup"><span data-stu-id="57df8-419">Deployment</span></span> |  
| <span data-ttu-id="57df8-420">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="57df8-420">**Applicable Technologies**</span></span> | <span data-ttu-id="57df8-421">Genérico</span><span class="sxs-lookup"><span data-stu-id="57df8-421">Generic</span></span> |
| <span data-ttu-id="57df8-422">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="57df8-422">**Attributes**</span></span>              | <span data-ttu-id="57df8-423">Ambiente - Azure, ambiente - autônomo</span><span class="sxs-lookup"><span data-stu-id="57df8-423">Environment - Azure, Environment - Stand alone</span></span> |
| <span data-ttu-id="57df8-424">**Referências**</span><span class="sxs-lookup"><span data-stu-id="57df8-424">**References**</span></span>              | <span data-ttu-id="57df8-425">[Segurança de certificado de cliente para o nó do Service Fabric](https://azure.microsoft.com/documentation/articles/service-fabric-cluster-security/#_client-to-node-certificate-security), [conectar tooa cluster seguro usando o certificado de cliente](https://azure.microsoft.com/documentation/articles/service-fabric-connect-to-secure-cluster/)</span><span class="sxs-lookup"><span data-stu-id="57df8-425">[Service Fabric Client-to-node certificate security](https://azure.microsoft.com/documentation/articles/service-fabric-cluster-security/#_client-to-node-certificate-security), [Connect tooa secure cluster using client certificate](https://azure.microsoft.com/documentation/articles/service-fabric-connect-to-secure-cluster/)</span></span> |
| <span data-ttu-id="57df8-426">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="57df8-426">**Steps**</span></span> | <p><span data-ttu-id="57df8-427">Segurança de certificado de cliente para o nó é configurada durante a criação de cluster Olá por meio de saudação portal do Azure, modelos do Gerenciador de recursos ou um modelo JSON autônomo, especificando um certificado de cliente de administração e/ou um certificado de cliente do usuário.</span><span class="sxs-lookup"><span data-stu-id="57df8-427">Client-to-node certificate security is configured while creating hello cluster either through hello Azure portal, Resource Manager templates or a standalone JSON template by specifying an admin client certificate and/or a user client certificate.</span></span></p><p><span data-ttu-id="57df8-428">Olá administrador usuário cliente certificados de cliente e que você especificar devem ser diferentes de certificados primários e secundários Olá especificado para segurança de nó para nó.</span><span class="sxs-lookup"><span data-stu-id="57df8-428">hello admin client and user client certificates you specify should be different than hello primary and secondary certificates you specify for Node-to-node security.</span></span></p>|

## <span data-ttu-id="57df8-429"><a id="aad-client-fabric"></a>Use clusters de malha do AAD tooauthenticate clientes tooservice</span><span class="sxs-lookup"><span data-stu-id="57df8-429"><a id="aad-client-fabric"></a>Use AAD tooauthenticate clients tooservice fabric clusters</span></span>

| <span data-ttu-id="57df8-430">Title</span><span class="sxs-lookup"><span data-stu-id="57df8-430">Title</span></span>                   | <span data-ttu-id="57df8-431">Detalhes</span><span class="sxs-lookup"><span data-stu-id="57df8-431">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="57df8-432">**Componente**</span><span class="sxs-lookup"><span data-stu-id="57df8-432">**Component**</span></span>               | <span data-ttu-id="57df8-433">Limite de confiança do Service Fabric</span><span class="sxs-lookup"><span data-stu-id="57df8-433">Service Fabric Trust Boundary</span></span> | 
| <span data-ttu-id="57df8-434">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="57df8-434">**SDL Phase**</span></span>               | <span data-ttu-id="57df8-435">Implantação</span><span class="sxs-lookup"><span data-stu-id="57df8-435">Deployment</span></span> |  
| <span data-ttu-id="57df8-436">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="57df8-436">**Applicable Technologies**</span></span> | <span data-ttu-id="57df8-437">Genérico</span><span class="sxs-lookup"><span data-stu-id="57df8-437">Generic</span></span> |
| <span data-ttu-id="57df8-438">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="57df8-438">**Attributes**</span></span>              | <span data-ttu-id="57df8-439">Ambiente - Azure</span><span class="sxs-lookup"><span data-stu-id="57df8-439">Environment - Azure</span></span> |
| <span data-ttu-id="57df8-440">**Referências**</span><span class="sxs-lookup"><span data-stu-id="57df8-440">**References**</span></span>              | [<span data-ttu-id="57df8-441">Cenários de segurança - recomendações de segurança de cluster</span><span class="sxs-lookup"><span data-stu-id="57df8-441">Cluster security scenarios - Security Recommendations</span></span>](https://azure.microsoft.com/documentation/articles/service-fabric-cluster-security/#security-recommendations) |
| <span data-ttu-id="57df8-442">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="57df8-442">**Steps**</span></span> | <span data-ttu-id="57df8-443">Clusters em execução no Azure também podem proteger acesso a pontos de extremidade de gerenciamento toohello usando o Azure Active Directory (AAD), além de certificados de cliente.</span><span class="sxs-lookup"><span data-stu-id="57df8-443">Clusters running on Azure can also secure access toohello management endpoints using Azure Active Directory (AAD), apart from client certificates.</span></span> <span data-ttu-id="57df8-444">Para clusters do Azure, é recomendável que você use o AAD segurança tooauthenticate clientes e certificados para segurança de nó para nó.</span><span class="sxs-lookup"><span data-stu-id="57df8-444">For Azure clusters, it is recommended that you use AAD security tooauthenticate clients and certificates for node-to-node security.</span></span>|

## <span data-ttu-id="57df8-445"><a id="fabric-cert-ca"></a>Verifique se os certificados de service fabric são obtidos de uma CA (autoridade de certificação) aprovada</span><span class="sxs-lookup"><span data-stu-id="57df8-445"><a id="fabric-cert-ca"></a>Ensure that service fabric certificates are obtained from an approved Certificate Authority (CA)</span></span>

| <span data-ttu-id="57df8-446">Title</span><span class="sxs-lookup"><span data-stu-id="57df8-446">Title</span></span>                   | <span data-ttu-id="57df8-447">Detalhes</span><span class="sxs-lookup"><span data-stu-id="57df8-447">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="57df8-448">**Componente**</span><span class="sxs-lookup"><span data-stu-id="57df8-448">**Component**</span></span>               | <span data-ttu-id="57df8-449">Limite de confiança do Service Fabric</span><span class="sxs-lookup"><span data-stu-id="57df8-449">Service Fabric Trust Boundary</span></span> | 
| <span data-ttu-id="57df8-450">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="57df8-450">**SDL Phase**</span></span>               | <span data-ttu-id="57df8-451">Implantação</span><span class="sxs-lookup"><span data-stu-id="57df8-451">Deployment</span></span> |  
| <span data-ttu-id="57df8-452">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="57df8-452">**Applicable Technologies**</span></span> | <span data-ttu-id="57df8-453">Genérico</span><span class="sxs-lookup"><span data-stu-id="57df8-453">Generic</span></span> |
| <span data-ttu-id="57df8-454">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="57df8-454">**Attributes**</span></span>              | <span data-ttu-id="57df8-455">Ambiente - Azure</span><span class="sxs-lookup"><span data-stu-id="57df8-455">Environment - Azure</span></span> |
| <span data-ttu-id="57df8-456">**Referências**</span><span class="sxs-lookup"><span data-stu-id="57df8-456">**References**</span></span>              | [<span data-ttu-id="57df8-457">Certificados X.509 e Service Fabric</span><span class="sxs-lookup"><span data-stu-id="57df8-457">X.509 certificates and Service Fabric</span></span>](https://azure.microsoft.com/documentation/articles/service-fabric-cluster-security/#x509-certificates-and-service-fabric) |
| <span data-ttu-id="57df8-458">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="57df8-458">**Steps**</span></span> | <p><span data-ttu-id="57df8-459">O Service Fabric usa certificados de servidor X.509 para autenticar clientes e nós.</span><span class="sxs-lookup"><span data-stu-id="57df8-459">Service Fabric uses X.509 server certificates for authenticating nodes and clients.</span></span></p><p><span data-ttu-id="57df8-460">Tooconsider algumas coisas importantes durante o uso de certificados em malhas de serviço:</span><span class="sxs-lookup"><span data-stu-id="57df8-460">Some important things tooconsider while using certificates in service fabrics:</span></span></p><ul><li><span data-ttu-id="57df8-461">Os certificados usados em clusters que executam cargas de trabalho de produção devem ser criados por meio de um serviço de certificado do Windows Server configurado corretamente ou obtidos por meio de uma AC (Autoridade de Certificação) aprovada.</span><span class="sxs-lookup"><span data-stu-id="57df8-461">Certificates used in clusters running production workloads should be created by using a correctly configured Windows Server certificate service or obtained from an approved Certificate Authority (CA).</span></span> <span data-ttu-id="57df8-462">Olá autoridade de certificação pode ser uma CA externa aprovada ou uma adequadamente gerenciado interno chave pública infra-estrutura (PKI)</span><span class="sxs-lookup"><span data-stu-id="57df8-462">hello CA can be an approved external CA or a properly managed internal Public Key Infrastructure (PKI)</span></span></li><li><span data-ttu-id="57df8-463">Nunca use nenhum certificado temporário ou de teste em produção criado com ferramentas como MakeCert.exe</span><span class="sxs-lookup"><span data-stu-id="57df8-463">Never use any temporary or test certificates in production that are created with tools such as MakeCert.exe</span></span></li><li><span data-ttu-id="57df8-464">Você pode usar um certificado autoassinado, mas deve fazer isso somente para clusters de teste e não em produção</span><span class="sxs-lookup"><span data-stu-id="57df8-464">You can use a self-signed certificate, but should only do so for test clusters and not in production</span></span></li></ul>|

## <span data-ttu-id="57df8-465"><a id="standard-authn-id"></a>Use cenários de autenticação padrão com suporte no Servidor de Identidade</span><span class="sxs-lookup"><span data-stu-id="57df8-465"><a id="standard-authn-id"></a>Use standard authentication scenarios supported by Identity Server</span></span>

| <span data-ttu-id="57df8-466">Title</span><span class="sxs-lookup"><span data-stu-id="57df8-466">Title</span></span>                   | <span data-ttu-id="57df8-467">Detalhes</span><span class="sxs-lookup"><span data-stu-id="57df8-467">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="57df8-468">**Componente**</span><span class="sxs-lookup"><span data-stu-id="57df8-468">**Component**</span></span>               | <span data-ttu-id="57df8-469">Servidor de Identidade</span><span class="sxs-lookup"><span data-stu-id="57df8-469">Identity Server</span></span> | 
| <span data-ttu-id="57df8-470">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="57df8-470">**SDL Phase**</span></span>               | <span data-ttu-id="57df8-471">Compilação</span><span class="sxs-lookup"><span data-stu-id="57df8-471">Build</span></span> |  
| <span data-ttu-id="57df8-472">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="57df8-472">**Applicable Technologies**</span></span> | <span data-ttu-id="57df8-473">Genérico</span><span class="sxs-lookup"><span data-stu-id="57df8-473">Generic</span></span> |
| <span data-ttu-id="57df8-474">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="57df8-474">**Attributes**</span></span>              | <span data-ttu-id="57df8-475">N/D</span><span class="sxs-lookup"><span data-stu-id="57df8-475">N/A</span></span>  |
| <span data-ttu-id="57df8-476">**Referências**</span><span class="sxs-lookup"><span data-stu-id="57df8-476">**References**</span></span>              | [<span data-ttu-id="57df8-477">IdentityServer3 - Olá visão geral</span><span class="sxs-lookup"><span data-stu-id="57df8-477">IdentityServer3 - hello Big Picture</span></span>](https://identityserver.github.io/Documentation/docsv2/overview/bigPicture.html) |
| <span data-ttu-id="57df8-478">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="57df8-478">**Steps**</span></span> | <p><span data-ttu-id="57df8-479">Abaixo está Olá típicas interações com suporte pelo servidor de identidade:</span><span class="sxs-lookup"><span data-stu-id="57df8-479">Below are hello typical interactions supported by Identity Server:</span></span></p><ul><li><span data-ttu-id="57df8-480">Os navegadores se comunicam com aplicativos Web</span><span class="sxs-lookup"><span data-stu-id="57df8-480">Browsers communicate with web applications</span></span></li><li><span data-ttu-id="57df8-481">Os aplicativos Web se comunicam com APIs Web (às vezes, por conta própria e, às vezes, em nome do usuário)</span><span class="sxs-lookup"><span data-stu-id="57df8-481">Web applications communicate with web APIs (sometimes on their own, sometimes on behalf of a user)</span></span></li><li><span data-ttu-id="57df8-482">Aplicativos baseados em navegador se comunicam com APIs Web</span><span class="sxs-lookup"><span data-stu-id="57df8-482">Browser-based applications communicate with web APIs</span></span></li><li><span data-ttu-id="57df8-483">Aplicativos nativos se comunicam com APIs Web</span><span class="sxs-lookup"><span data-stu-id="57df8-483">Native applications communicate with web APIs</span></span></li><li><span data-ttu-id="57df8-484">Aplicativos baseados em servidor se comunicam com APIs Web</span><span class="sxs-lookup"><span data-stu-id="57df8-484">Server-based applications communicate with web APIs</span></span></li><li><span data-ttu-id="57df8-485">As APIs Web se comunicam com as APIs Web (às vezes, por conta própria e, às vezes, em nome do usuário)</span><span class="sxs-lookup"><span data-stu-id="57df8-485">Web APIs communicate with web APIs (sometimes on their own, sometimes on behalf of a user)</span></span></li></ul>|

## <span data-ttu-id="57df8-486"><a id="override-token"></a>Substituir saudação padrão Identity Server cache de token por uma alternativa escalonável</span><span class="sxs-lookup"><span data-stu-id="57df8-486"><a id="override-token"></a>Override hello default Identity Server token cache with a scalable alternative</span></span>

| <span data-ttu-id="57df8-487">Title</span><span class="sxs-lookup"><span data-stu-id="57df8-487">Title</span></span>                   | <span data-ttu-id="57df8-488">Detalhes</span><span class="sxs-lookup"><span data-stu-id="57df8-488">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="57df8-489">**Componente**</span><span class="sxs-lookup"><span data-stu-id="57df8-489">**Component**</span></span>               | <span data-ttu-id="57df8-490">Servidor de Identidade</span><span class="sxs-lookup"><span data-stu-id="57df8-490">Identity Server</span></span> | 
| <span data-ttu-id="57df8-491">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="57df8-491">**SDL Phase**</span></span>               | <span data-ttu-id="57df8-492">Implantação</span><span class="sxs-lookup"><span data-stu-id="57df8-492">Deployment</span></span> |  
| <span data-ttu-id="57df8-493">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="57df8-493">**Applicable Technologies**</span></span> | <span data-ttu-id="57df8-494">Genérico</span><span class="sxs-lookup"><span data-stu-id="57df8-494">Generic</span></span> |
| <span data-ttu-id="57df8-495">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="57df8-495">**Attributes**</span></span>              | <span data-ttu-id="57df8-496">N/D</span><span class="sxs-lookup"><span data-stu-id="57df8-496">N/A</span></span>  |
| <span data-ttu-id="57df8-497">**Referências**</span><span class="sxs-lookup"><span data-stu-id="57df8-497">**References**</span></span>              | [<span data-ttu-id="57df8-498">Implantação de Servidor de Identidade - cache</span><span class="sxs-lookup"><span data-stu-id="57df8-498">Identity Server Deployment - Caching</span></span>](https://identityserver.github.io/Documentation/docsv2/advanced/deployment.html) |
| <span data-ttu-id="57df8-499">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="57df8-499">**Steps**</span></span> | <p><span data-ttu-id="57df8-500">IdentityServer tem um cache na memória interno simples.</span><span class="sxs-lookup"><span data-stu-id="57df8-500">IdentityServer has a simple built-in in-memory cache.</span></span> <span data-ttu-id="57df8-501">Enquanto isso é bom para aplicativos nativos de pequena escala, ele não é dimensionado para aplicativos de camada e de back-end mid para Olá motivos a seguir:</span><span class="sxs-lookup"><span data-stu-id="57df8-501">While this is good for small scale native apps, it does not scale for mid tier and backend applications for hello following reasons:</span></span></p><ul><li><span data-ttu-id="57df8-502">Esses aplicativos são acessados por vários usuários simultaneamente.</span><span class="sxs-lookup"><span data-stu-id="57df8-502">These applications are accessed by many users at once.</span></span> <span data-ttu-id="57df8-503">Salvar todos os tokens de acesso no hello mesmo repositório cria problemas de isolamento e apresenta desafios ao operar em grande escala: muitos usuários, cada um com tantas tokens como recursos Olá Olá acessos de aplicativo em seu nome, pode significar grandes números e pesquisa muito cara operações</span><span class="sxs-lookup"><span data-stu-id="57df8-503">Saving all access tokens in hello same store creates isolation issues and presents challenges when operating at scale: many users, each with as many tokens as hello resources hello app accesses on their behalf, can mean huge numbers and very expensive lookup operations</span></span></li><li><span data-ttu-id="57df8-504">Normalmente, esses aplicativos são implantados em topologias distribuídas, em que vários nós devem ter acesso toohello mesmo cache</span><span class="sxs-lookup"><span data-stu-id="57df8-504">These applications are typically deployed on distributed topologies, where multiple nodes must have access toohello same cache</span></span></li><li><span data-ttu-id="57df8-505">Os tokens em cache devem sobreviver a desativações e reciclagem de processo</span><span class="sxs-lookup"><span data-stu-id="57df8-505">Cached tokens must survive process recycles and deactivations</span></span></li><li><span data-ttu-id="57df8-506">Para todos os Olá acima motivos, durante a implementação de aplicativos da web, é recomendável o cache de token do servidor de identidade padrão Olá toooverride uma alternativa dimensionável como o cache Redis do Azure</span><span class="sxs-lookup"><span data-stu-id="57df8-506">For all hello above reasons, while implementing web apps, it is recommended toooverride hello default Identity Server's token cache with a scalable alternative such as Azure Redis cache</span></span></li></ul>|

## <span data-ttu-id="57df8-507"><a id="binaries-signed"></a>Verifique se os binários do aplicativo implantado são assinados digitalmente</span><span class="sxs-lookup"><span data-stu-id="57df8-507"><a id="binaries-signed"></a>Ensure that deployed application's binaries are digitally signed</span></span>

| <span data-ttu-id="57df8-508">Title</span><span class="sxs-lookup"><span data-stu-id="57df8-508">Title</span></span>                   | <span data-ttu-id="57df8-509">Detalhes</span><span class="sxs-lookup"><span data-stu-id="57df8-509">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="57df8-510">**Componente**</span><span class="sxs-lookup"><span data-stu-id="57df8-510">**Component**</span></span>               | <span data-ttu-id="57df8-511">Limite de Confiança de Máquina</span><span class="sxs-lookup"><span data-stu-id="57df8-511">Machine Trust Boundary</span></span> | 
| <span data-ttu-id="57df8-512">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="57df8-512">**SDL Phase**</span></span>               | <span data-ttu-id="57df8-513">Implantação</span><span class="sxs-lookup"><span data-stu-id="57df8-513">Deployment</span></span> |  
| <span data-ttu-id="57df8-514">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="57df8-514">**Applicable Technologies**</span></span> | <span data-ttu-id="57df8-515">Genérico</span><span class="sxs-lookup"><span data-stu-id="57df8-515">Generic</span></span> |
| <span data-ttu-id="57df8-516">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="57df8-516">**Attributes**</span></span>              | <span data-ttu-id="57df8-517">N/D</span><span class="sxs-lookup"><span data-stu-id="57df8-517">N/A</span></span>  |
| <span data-ttu-id="57df8-518">**Referências**</span><span class="sxs-lookup"><span data-stu-id="57df8-518">**References**</span></span>              | <span data-ttu-id="57df8-519">N/D</span><span class="sxs-lookup"><span data-stu-id="57df8-519">N/A</span></span>  |
| <span data-ttu-id="57df8-520">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="57df8-520">**Steps**</span></span> | <span data-ttu-id="57df8-521">Certifique-se de que os binários do aplicativo implantado são assinados digitalmente para que possa ser verificada integridade Olá dos binários de saudação</span><span class="sxs-lookup"><span data-stu-id="57df8-521">Ensure that deployed application's binaries are digitally signed so that hello integrity of hello binaries can be verified</span></span>|

## <span data-ttu-id="57df8-522"><a id="msmq-queues"></a>Habilitar a autenticação ao conectar-se tooMSMQ filas no WCF</span><span class="sxs-lookup"><span data-stu-id="57df8-522"><a id="msmq-queues"></a>Enable authentication when connecting tooMSMQ queues in WCF</span></span>

| <span data-ttu-id="57df8-523">Title</span><span class="sxs-lookup"><span data-stu-id="57df8-523">Title</span></span>                   | <span data-ttu-id="57df8-524">Detalhes</span><span class="sxs-lookup"><span data-stu-id="57df8-524">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="57df8-525">**Componente**</span><span class="sxs-lookup"><span data-stu-id="57df8-525">**Component**</span></span>               | <span data-ttu-id="57df8-526">WCF</span><span class="sxs-lookup"><span data-stu-id="57df8-526">WCF</span></span> | 
| <span data-ttu-id="57df8-527">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="57df8-527">**SDL Phase**</span></span>               | <span data-ttu-id="57df8-528">Compilação</span><span class="sxs-lookup"><span data-stu-id="57df8-528">Build</span></span> |  
| <span data-ttu-id="57df8-529">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="57df8-529">**Applicable Technologies**</span></span> | <span data-ttu-id="57df8-530">Genérico, NET Framework 3</span><span class="sxs-lookup"><span data-stu-id="57df8-530">Generic, NET Framework 3</span></span> |
| <span data-ttu-id="57df8-531">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="57df8-531">**Attributes**</span></span>              | <span data-ttu-id="57df8-532">N/D</span><span class="sxs-lookup"><span data-stu-id="57df8-532">N/A</span></span> |
| <span data-ttu-id="57df8-533">**Referências**</span><span class="sxs-lookup"><span data-stu-id="57df8-533">**References**</span></span>              | [<span data-ttu-id="57df8-534">MSDN</span><span class="sxs-lookup"><span data-stu-id="57df8-534">MSDN</span></span>](https://msdn.microsoft.com/library/ff648500.aspx) |
| <span data-ttu-id="57df8-535">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="57df8-535">**Steps**</span></span> | <span data-ttu-id="57df8-536">Programa falhar na autenticação de tooenable ao conectar-se tooMSMQ filas, um invasor pode enviar anonimamente a fila de toohello mensagens para processamento.</span><span class="sxs-lookup"><span data-stu-id="57df8-536">Program fails tooenable authentication when connecting tooMSMQ queues, an attacker can anonymously submit messages toohello queue for processing.</span></span> <span data-ttu-id="57df8-537">Se a autenticação não for usado tooconnect tooan MSMQ fila usada toodeliver um programa de tooanother de mensagem, um invasor pode enviar uma mensagem anônima é mal-intencionado.</span><span class="sxs-lookup"><span data-stu-id="57df8-537">If authentication is not used tooconnect tooan MSMQ queue used toodeliver a message tooanother program, an attacker could submit an anonymous message that is malicious.</span></span>|

### <a name="example"></a><span data-ttu-id="57df8-538">Exemplo</span><span class="sxs-lookup"><span data-stu-id="57df8-538">Example</span></span>
<span data-ttu-id="57df8-539">Olá `<netMsmqBinding/>` elemento Olá WCF do arquivo de configuração abaixo instrui a autenticação do WCF toodisable ao conectar-se a fila do MSMQ tooan para entrega de mensagens.</span><span class="sxs-lookup"><span data-stu-id="57df8-539">hello `<netMsmqBinding/>` element of hello WCF configuration file below instructs WCF toodisable authentication when connecting tooan MSMQ queue for message delivery.</span></span>
```
<bindings>
    <netMsmqBinding>
        <binding>
            <security>
                <transport msmqAuthenticationMode=""None"" />
            </security>
        </binding>
    </netMsmqBinding>
</bindings>
```
<span data-ttu-id="57df8-540">Configure a autenticação de domínio do Windows ou o certificado de toorequire MSMQ em todos os momentos para as mensagens de entrada ou saídas.</span><span class="sxs-lookup"><span data-stu-id="57df8-540">Configure MSMQ toorequire Windows Domain or Certificate authentication at all times for any incoming or outgoing messages.</span></span>

### <a name="example"></a><span data-ttu-id="57df8-541">Exemplo</span><span class="sxs-lookup"><span data-stu-id="57df8-541">Example</span></span>
<span data-ttu-id="57df8-542">Olá `<netMsmqBinding/>` elemento Olá WCF do arquivo de configuração abaixo instrui a autenticação de certificado do WCF tooenable ao conectar-se a fila do MSMQ tooan.</span><span class="sxs-lookup"><span data-stu-id="57df8-542">hello `<netMsmqBinding/>` element of hello WCF configuration file below instructs WCF tooenable certificate authentication when connecting tooan MSMQ queue.</span></span> <span data-ttu-id="57df8-543">cliente de saudação é autenticado usando certificados x. 509.</span><span class="sxs-lookup"><span data-stu-id="57df8-543">hello client is authenticated using X.509 certificates.</span></span> <span data-ttu-id="57df8-544">certificado de cliente Olá deve estar presente no repositório de certificados de saudação do servidor de saudação.</span><span class="sxs-lookup"><span data-stu-id="57df8-544">hello client certificate must be present in hello certificate store of hello server.</span></span>
```
<bindings>
    <netMsmqBinding>
        <binding>
            <security>
                <transport msmqAuthenticationMode=""Certificate"" />
            </security>
        </binding>
    </netMsmqBinding>
</bindings>
```

## <span data-ttu-id="57df8-545"><a id="message-none"></a>WCF-não não definir mensagem clientCredentialType toonone</span><span class="sxs-lookup"><span data-stu-id="57df8-545"><a id="message-none"></a>WCF-Do not set Message clientCredentialType toonone</span></span>

| <span data-ttu-id="57df8-546">Title</span><span class="sxs-lookup"><span data-stu-id="57df8-546">Title</span></span>                   | <span data-ttu-id="57df8-547">Detalhes</span><span class="sxs-lookup"><span data-stu-id="57df8-547">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="57df8-548">**Componente**</span><span class="sxs-lookup"><span data-stu-id="57df8-548">**Component**</span></span>               | <span data-ttu-id="57df8-549">WCF</span><span class="sxs-lookup"><span data-stu-id="57df8-549">WCF</span></span> | 
| <span data-ttu-id="57df8-550">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="57df8-550">**SDL Phase**</span></span>               | <span data-ttu-id="57df8-551">Compilação</span><span class="sxs-lookup"><span data-stu-id="57df8-551">Build</span></span> |  
| <span data-ttu-id="57df8-552">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="57df8-552">**Applicable Technologies**</span></span> | <span data-ttu-id="57df8-553">.NET Framework 3</span><span class="sxs-lookup"><span data-stu-id="57df8-553">.NET Framework 3</span></span> |
| <span data-ttu-id="57df8-554">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="57df8-554">**Attributes**</span></span>              | <span data-ttu-id="57df8-555">Tipo de Credencial de Cliente - Nenhuma</span><span class="sxs-lookup"><span data-stu-id="57df8-555">Client Credential Type - None</span></span> |
| <span data-ttu-id="57df8-556">**Referências**</span><span class="sxs-lookup"><span data-stu-id="57df8-556">**References**</span></span>              | <span data-ttu-id="57df8-557">[MSDN](https://msdn.microsoft.com/library/ff648500.aspx), [Fortalecer](https://vulncat.fortify.com/en/vulncat/index.html)</span><span class="sxs-lookup"><span data-stu-id="57df8-557">[MSDN](https://msdn.microsoft.com/library/ff648500.aspx), [Fortify](https://vulncat.fortify.com/en/vulncat/index.html)</span></span> |
| <span data-ttu-id="57df8-558">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="57df8-558">**Steps**</span></span> | <span data-ttu-id="57df8-559">ausência de saudação de autenticação significa todos é capaz de tooaccess esse serviço.</span><span class="sxs-lookup"><span data-stu-id="57df8-559">hello absence of authentication means everyone is able tooaccess this service.</span></span> <span data-ttu-id="57df8-560">Um serviço que não autentica seus clientes permite acesso a usuários tooall.</span><span class="sxs-lookup"><span data-stu-id="57df8-560">A service that does not authenticate its clients allows access tooall users.</span></span> <span data-ttu-id="57df8-561">Configure Olá tooauthenticate de aplicativo em relação às credenciais de cliente.</span><span class="sxs-lookup"><span data-stu-id="57df8-561">Configure hello application tooauthenticate against client credentials.</span></span> <span data-ttu-id="57df8-562">Isso pode ser feito definindo Olá mensagem clientCredentialType tooWindows ou certificado.</span><span class="sxs-lookup"><span data-stu-id="57df8-562">This can be done by setting hello message clientCredentialType tooWindows or Certificate.</span></span> |

### <a name="example"></a><span data-ttu-id="57df8-563">Exemplo</span><span class="sxs-lookup"><span data-stu-id="57df8-563">Example</span></span>
```
<message clientCredentialType=""Certificate""/>
```

## <span data-ttu-id="57df8-564"><a id="transport-none"></a>WCF-não não definido transporte clientCredentialType toonone</span><span class="sxs-lookup"><span data-stu-id="57df8-564"><a id="transport-none"></a>WCF-Do not set Transport clientCredentialType toonone</span></span>

| <span data-ttu-id="57df8-565">Title</span><span class="sxs-lookup"><span data-stu-id="57df8-565">Title</span></span>                   | <span data-ttu-id="57df8-566">Detalhes</span><span class="sxs-lookup"><span data-stu-id="57df8-566">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="57df8-567">**Componente**</span><span class="sxs-lookup"><span data-stu-id="57df8-567">**Component**</span></span>               | <span data-ttu-id="57df8-568">WCF</span><span class="sxs-lookup"><span data-stu-id="57df8-568">WCF</span></span> | 
| <span data-ttu-id="57df8-569">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="57df8-569">**SDL Phase**</span></span>               | <span data-ttu-id="57df8-570">Compilação</span><span class="sxs-lookup"><span data-stu-id="57df8-570">Build</span></span> |  
| <span data-ttu-id="57df8-571">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="57df8-571">**Applicable Technologies**</span></span> | <span data-ttu-id="57df8-572">Genérico, .NET Framework 3</span><span class="sxs-lookup"><span data-stu-id="57df8-572">Generic, .NET Framework 3</span></span> |
| <span data-ttu-id="57df8-573">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="57df8-573">**Attributes**</span></span>              | <span data-ttu-id="57df8-574">Tipo de Credencial de Cliente - Nenhuma</span><span class="sxs-lookup"><span data-stu-id="57df8-574">Client Credential Type - None</span></span> |
| <span data-ttu-id="57df8-575">**Referências**</span><span class="sxs-lookup"><span data-stu-id="57df8-575">**References**</span></span>              | <span data-ttu-id="57df8-576">[MSDN](https://msdn.microsoft.com/library/ff648500.aspx), [Fortalecer](https://vulncat.fortify.com/en/vulncat/index.html)</span><span class="sxs-lookup"><span data-stu-id="57df8-576">[MSDN](https://msdn.microsoft.com/library/ff648500.aspx), [Fortify](https://vulncat.fortify.com/en/vulncat/index.html)</span></span> |
| <span data-ttu-id="57df8-577">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="57df8-577">**Steps**</span></span> | <span data-ttu-id="57df8-578">ausência de saudação de autenticação significa todos é capaz de tooaccess esse serviço.</span><span class="sxs-lookup"><span data-stu-id="57df8-578">hello absence of authentication means everyone is able tooaccess this service.</span></span> <span data-ttu-id="57df8-579">Um serviço que não autentica seus clientes permite tooaccess de todos os usuários de sua funcionalidade.</span><span class="sxs-lookup"><span data-stu-id="57df8-579">A service that does not authenticate its clients allows all users tooaccess its functionality.</span></span> <span data-ttu-id="57df8-580">Configure Olá tooauthenticate de aplicativo em relação às credenciais de cliente.</span><span class="sxs-lookup"><span data-stu-id="57df8-580">Configure hello application tooauthenticate against client credentials.</span></span> <span data-ttu-id="57df8-581">Isso pode ser feito definindo Olá transporte clientCredentialType tooWindows ou certificado.</span><span class="sxs-lookup"><span data-stu-id="57df8-581">This can be done by setting hello transport clientCredentialType tooWindows or Certificate.</span></span> |

### <a name="example"></a><span data-ttu-id="57df8-582">Exemplo</span><span class="sxs-lookup"><span data-stu-id="57df8-582">Example</span></span>
```
<transport clientCredentialType=""Certificate""/>
```

## <span data-ttu-id="57df8-583"><a id="authn-secure-api"></a>Certifique-se de técnicas de autenticação padrão são usado toosecure APIs da Web</span><span class="sxs-lookup"><span data-stu-id="57df8-583"><a id="authn-secure-api"></a>Ensure that standard authentication techniques are used toosecure Web APIs</span></span>

| <span data-ttu-id="57df8-584">Title</span><span class="sxs-lookup"><span data-stu-id="57df8-584">Title</span></span>                   | <span data-ttu-id="57df8-585">Detalhes</span><span class="sxs-lookup"><span data-stu-id="57df8-585">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="57df8-586">**Componente**</span><span class="sxs-lookup"><span data-stu-id="57df8-586">**Component**</span></span>               | <span data-ttu-id="57df8-587">API Web</span><span class="sxs-lookup"><span data-stu-id="57df8-587">Web API</span></span> | 
| <span data-ttu-id="57df8-588">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="57df8-588">**SDL Phase**</span></span>               | <span data-ttu-id="57df8-589">Compilação</span><span class="sxs-lookup"><span data-stu-id="57df8-589">Build</span></span> |  
| <span data-ttu-id="57df8-590">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="57df8-590">**Applicable Technologies**</span></span> | <span data-ttu-id="57df8-591">Genérico</span><span class="sxs-lookup"><span data-stu-id="57df8-591">Generic</span></span> |
| <span data-ttu-id="57df8-592">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="57df8-592">**Attributes**</span></span>              | <span data-ttu-id="57df8-593">N/D</span><span class="sxs-lookup"><span data-stu-id="57df8-593">N/A</span></span>  |
| <span data-ttu-id="57df8-594">**Referências**</span><span class="sxs-lookup"><span data-stu-id="57df8-594">**References**</span></span>              | <span data-ttu-id="57df8-595">[Autenticação e Autorização na API Web ASP.NET](http://www.asp.net/web-api/overview/security/authentication-and-authorization-in-aspnet-web-api), [Serviços de Autenticação Externa com a API Web do ASP.NET (C#)](http://www.asp.net/web-api/overview/security/external-authentication-services)</span><span class="sxs-lookup"><span data-stu-id="57df8-595">[Authentication and Authorization in ASP.NET Web API](http://www.asp.net/web-api/overview/security/authentication-and-authorization-in-aspnet-web-api), [External Authentication Services with ASP.NET Web API (C#)](http://www.asp.net/web-api/overview/security/external-authentication-services)</span></span> |
| <span data-ttu-id="57df8-596">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="57df8-596">**Steps**</span></span> | <p><span data-ttu-id="57df8-597">A autenticação é o processo de saudação em que uma entidade comprova sua identidade, normalmente por meio de credenciais, como um nome de usuário e senha.</span><span class="sxs-lookup"><span data-stu-id="57df8-597">Authentication is hello process where an entity proves its identity, typically through credentials, such as a user name and password.</span></span> <span data-ttu-id="57df8-598">Há vários protocolos de autenticação disponíveis que podem ser considerados.</span><span class="sxs-lookup"><span data-stu-id="57df8-598">There are multiple authentication protocols available which may be considered.</span></span> <span data-ttu-id="57df8-599">Alguns deles são listados abaixo:</span><span class="sxs-lookup"><span data-stu-id="57df8-599">Some of them are listed below:</span></span></p><ul><li><span data-ttu-id="57df8-600">Certificados do cliente</span><span class="sxs-lookup"><span data-stu-id="57df8-600">Client certificates</span></span></li><li><span data-ttu-id="57df8-601">Baseado no Windows</span><span class="sxs-lookup"><span data-stu-id="57df8-601">Windows based</span></span></li><li><span data-ttu-id="57df8-602">Baseado em formulários</span><span class="sxs-lookup"><span data-stu-id="57df8-602">Forms based</span></span></li><li><span data-ttu-id="57df8-603">Federação - ADFS</span><span class="sxs-lookup"><span data-stu-id="57df8-603">Federation - ADFS</span></span></li><li><span data-ttu-id="57df8-604">Federação – Azure AD</span><span class="sxs-lookup"><span data-stu-id="57df8-604">Federation - Azure AD</span></span></li><li><span data-ttu-id="57df8-605">Federação - Servidor de Identidade</span><span class="sxs-lookup"><span data-stu-id="57df8-605">Federation - Identity Server</span></span></li></ul><p><span data-ttu-id="57df8-606">Links na seção de referências de saudação fornecem detalhes de baixo nível sobre como cada um dos esquemas de autenticação Olá pode ser implementado toosecure uma API da Web.</span><span class="sxs-lookup"><span data-stu-id="57df8-606">Links in hello references section provide low-level details on how each of hello authentication schemes can be implemented toosecure a Web API.</span></span></p>|

## <span data-ttu-id="57df8-607"><a id="authn-aad"></a>Use cenários de autenticação padrão com suporte no Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="57df8-607"><a id="authn-aad"></a>Use standard authentication scenarios supported by Azure Active Directory</span></span>

| <span data-ttu-id="57df8-608">Title</span><span class="sxs-lookup"><span data-stu-id="57df8-608">Title</span></span>                   | <span data-ttu-id="57df8-609">Detalhes</span><span class="sxs-lookup"><span data-stu-id="57df8-609">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="57df8-610">**Componente**</span><span class="sxs-lookup"><span data-stu-id="57df8-610">**Component**</span></span>               | <span data-ttu-id="57df8-611">AD do Azure</span><span class="sxs-lookup"><span data-stu-id="57df8-611">Azure AD</span></span> | 
| <span data-ttu-id="57df8-612">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="57df8-612">**SDL Phase**</span></span>               | <span data-ttu-id="57df8-613">Compilação</span><span class="sxs-lookup"><span data-stu-id="57df8-613">Build</span></span> |  
| <span data-ttu-id="57df8-614">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="57df8-614">**Applicable Technologies**</span></span> | <span data-ttu-id="57df8-615">Genérico</span><span class="sxs-lookup"><span data-stu-id="57df8-615">Generic</span></span> |
| <span data-ttu-id="57df8-616">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="57df8-616">**Attributes**</span></span>              | <span data-ttu-id="57df8-617">N/D</span><span class="sxs-lookup"><span data-stu-id="57df8-617">N/A</span></span>  |
| <span data-ttu-id="57df8-618">**Referências**</span><span class="sxs-lookup"><span data-stu-id="57df8-618">**References**</span></span>              | <span data-ttu-id="57df8-619">[Cenários de Autenticação do Azure AD](https://azure.microsoft.com/documentation/articles/active-directory-authentication-scenarios/), [Exemplos de Código do Azure Active Directory](https://azure.microsoft.com/documentation/articles/active-directory-code-samples/), [Guia do Desenvolvedor do Azure Active Directory](https://azure.microsoft.com/documentation/articles/active-directory-developers-guide/)</span><span class="sxs-lookup"><span data-stu-id="57df8-619">[Authentication Scenarios for Azure AD](https://azure.microsoft.com/documentation/articles/active-directory-authentication-scenarios/), [Azure Active Directory Code Samples](https://azure.microsoft.com/documentation/articles/active-directory-code-samples/), [Azure Active Directory developer's guide](https://azure.microsoft.com/documentation/articles/active-directory-developers-guide/)</span></span> |
| <span data-ttu-id="57df8-620">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="57df8-620">**Steps**</span></span> | <p><span data-ttu-id="57df8-621">O Azure AD (Azure Active Directory) simplifica a autenticação para os desenvolvedores fornecendo identidade como um serviço, com suporte para protocolos padrão do setor, como OAuth 2.0 e OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="57df8-621">Azure Active Directory (Azure AD) simplifies authentication for developers by providing identity as a service, with support for industry-standard protocols such as OAuth 2.0 and OpenID Connect.</span></span> <span data-ttu-id="57df8-622">Abaixo está Olá cinco cenários de aplicativos principais com suporte pelo AD do Azure:</span><span class="sxs-lookup"><span data-stu-id="57df8-622">Below are hello five primary application scenarios supported by Azure AD:</span></span></p><ul><li><span data-ttu-id="57df8-623">Navegador tooWeb aplicativo de Web: um usuário precisa toosign no aplicativo web tooa que é protegido pelo AD do Azure</span><span class="sxs-lookup"><span data-stu-id="57df8-623">Web Browser tooWeb Application: A user needs toosign in tooa web application that is secured by Azure AD</span></span></li><li><span data-ttu-id="57df8-624">Aplicativo de página única (SPA): Um usuário precisa toosign no aplicativo de página única tooa que é protegido pelo AD do Azure</span><span class="sxs-lookup"><span data-stu-id="57df8-624">Single Page Application (SPA): A user needs toosign in tooa single page application that is secured by Azure AD</span></span></li><li><span data-ttu-id="57df8-625">TooWeb do aplicativo nativo API: um aplicativo nativo que é executado em um telefone, tablet ou PC necessidades tooauthenticate tooget um usuário recursos de uma API da web que é protegido pelo AD do Azure</span><span class="sxs-lookup"><span data-stu-id="57df8-625">Native Application tooWeb API: A native application that runs on a phone, tablet, or PC needs tooauthenticate a user tooget resources from a web API that is secured by Azure AD</span></span></li><li><span data-ttu-id="57df8-626">Web Application tooWeb API: um aplicativo web precisa tooget recursos de uma API da web protegida pelo AD do Azure</span><span class="sxs-lookup"><span data-stu-id="57df8-626">Web Application tooWeb API: A web application needs tooget resources from a web API secured by Azure AD</span></span></li><li><span data-ttu-id="57df8-627">TooWeb daemon ou aplicativo de servidor API: um aplicativo daemon ou um aplicativo de servidor sem interface de usuário da web precisa tooget recursos de uma API da web protegida pelo AD do Azure</span><span class="sxs-lookup"><span data-stu-id="57df8-627">Daemon or Server Application tooWeb API: A daemon application or a server application with no web user interface needs tooget resources from a web API secured by Azure AD</span></span></li></ul><p><span data-ttu-id="57df8-628">Consulte para obter detalhes de implementação de baixo nível toohello links na seção de referências de saudação</span><span class="sxs-lookup"><span data-stu-id="57df8-628">Please refer toohello links in hello references section for low-level implementation details</span></span></p>|

## <span data-ttu-id="57df8-629"><a id="adal-scalable"></a>Substituir saudação padrão ADAL cache de token por uma alternativa escalonável</span><span class="sxs-lookup"><span data-stu-id="57df8-629"><a id="adal-scalable"></a>Override hello default ADAL token cache with a scalable alternative</span></span>

| <span data-ttu-id="57df8-630">Title</span><span class="sxs-lookup"><span data-stu-id="57df8-630">Title</span></span>                   | <span data-ttu-id="57df8-631">Detalhes</span><span class="sxs-lookup"><span data-stu-id="57df8-631">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="57df8-632">**Componente**</span><span class="sxs-lookup"><span data-stu-id="57df8-632">**Component**</span></span>               | <span data-ttu-id="57df8-633">AD do Azure</span><span class="sxs-lookup"><span data-stu-id="57df8-633">Azure AD</span></span> | 
| <span data-ttu-id="57df8-634">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="57df8-634">**SDL Phase**</span></span>               | <span data-ttu-id="57df8-635">Compilação</span><span class="sxs-lookup"><span data-stu-id="57df8-635">Build</span></span> |  
| <span data-ttu-id="57df8-636">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="57df8-636">**Applicable Technologies**</span></span> | <span data-ttu-id="57df8-637">Genérico</span><span class="sxs-lookup"><span data-stu-id="57df8-637">Generic</span></span> |
| <span data-ttu-id="57df8-638">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="57df8-638">**Attributes**</span></span>              | <span data-ttu-id="57df8-639">N/D</span><span class="sxs-lookup"><span data-stu-id="57df8-639">N/A</span></span>  |
| <span data-ttu-id="57df8-640">**Referências**</span><span class="sxs-lookup"><span data-stu-id="57df8-640">**References**</span></span>              | <span data-ttu-id="57df8-641">[Autenticação Moderna com o Azure Active Directory para Aplicativos Web](https://blogs.msdn.microsoft.com/microsoft_press/2016/01/04/new-book-modern-authentication-with-azure-active-directory-for-web-applications/), [Usando o Redis como cache de token ADAL](https://blogs.msdn.microsoft.com/mrochon/2016/09/19/using-redis-as-adal-token-cache/)</span><span class="sxs-lookup"><span data-stu-id="57df8-641">[Modern Authentication with Azure Active Directory for Web Applications](https://blogs.msdn.microsoft.com/microsoft_press/2016/01/04/new-book-modern-authentication-with-azure-active-directory-for-web-applications/), [Using Redis as ADAL token cache](https://blogs.msdn.microsoft.com/mrochon/2016/09/19/using-redis-as-adal-token-cache/)</span></span>  |
| <span data-ttu-id="57df8-642">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="57df8-642">**Steps**</span></span> | <p><span data-ttu-id="57df8-643">cache de padrão de saudação usa ADAL (biblioteca de autenticação do Active Directory) é um cache na memória que se baseia em um armazenamento estático, todo o processo disponível.</span><span class="sxs-lookup"><span data-stu-id="57df8-643">hello default cache that ADAL (Active Directory Authentication Library) uses is an in-memory cache that relies on a static store, available process-wide.</span></span> <span data-ttu-id="57df8-644">Enquanto isso funciona para aplicativos nativos, ele não é dimensionado para aplicativos de camada e de back-end mid para Olá motivos a seguir:</span><span class="sxs-lookup"><span data-stu-id="57df8-644">While this works for native applications, it does not scale for mid tier and backend applications for hello following reasons:</span></span></p><ul><li><span data-ttu-id="57df8-645">Esses aplicativos são acessados por vários usuários simultaneamente.</span><span class="sxs-lookup"><span data-stu-id="57df8-645">These applications are accessed by many users at once.</span></span> <span data-ttu-id="57df8-646">Salvar todos os tokens de acesso no hello mesmo repositório cria problemas de isolamento e apresenta desafios ao operar em grande escala: muitos usuários, cada um com tantas tokens como recursos Olá Olá acessos de aplicativo em seu nome, pode significar grandes números e pesquisa muito cara operações</span><span class="sxs-lookup"><span data-stu-id="57df8-646">Saving all access tokens in hello same store creates isolation issues and presents challenges when operating at scale: many users, each with as many tokens as hello resources hello app accesses on their behalf, can mean huge numbers and very expensive lookup operations</span></span></li><li><span data-ttu-id="57df8-647">Normalmente, esses aplicativos são implantados em topologias distribuídas, em que vários nós devem ter acesso toohello mesmo cache</span><span class="sxs-lookup"><span data-stu-id="57df8-647">These applications are typically deployed on distributed topologies, where multiple nodes must have access toohello same cache</span></span></li><li><span data-ttu-id="57df8-648">Os tokens em cache devem sobreviver a desativações e reciclagem de processo</span><span class="sxs-lookup"><span data-stu-id="57df8-648">Cached tokens must survive process recycles and deactivations</span></span></li></ul><p><span data-ttu-id="57df8-649">Para todos os Olá acima motivos, durante a implementação de aplicativos da web, é recomendável toooverride saudação padrão ADAL cache de token por uma alternativa dimensionável como o cache Redis do Azure.</span><span class="sxs-lookup"><span data-stu-id="57df8-649">For all hello above reasons, while implementing web apps, it is recommended toooverride hello default ADAL token cache with a scalable alternative such as Azure Redis cache.</span></span></p>|

## <span data-ttu-id="57df8-650"><a id="tokenreplaycache-adal"></a>Certifique-se de que o TokenReplayCache é tooprevent usado reprodução de saudação de tokens de autenticação de ADAL</span><span class="sxs-lookup"><span data-stu-id="57df8-650"><a id="tokenreplaycache-adal"></a>Ensure that TokenReplayCache is used tooprevent hello replay of ADAL authentication tokens</span></span>

| <span data-ttu-id="57df8-651">Title</span><span class="sxs-lookup"><span data-stu-id="57df8-651">Title</span></span>                   | <span data-ttu-id="57df8-652">Detalhes</span><span class="sxs-lookup"><span data-stu-id="57df8-652">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="57df8-653">**Componente**</span><span class="sxs-lookup"><span data-stu-id="57df8-653">**Component**</span></span>               | <span data-ttu-id="57df8-654">AD do Azure</span><span class="sxs-lookup"><span data-stu-id="57df8-654">Azure AD</span></span> | 
| <span data-ttu-id="57df8-655">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="57df8-655">**SDL Phase**</span></span>               | <span data-ttu-id="57df8-656">Compilação</span><span class="sxs-lookup"><span data-stu-id="57df8-656">Build</span></span> |  
| <span data-ttu-id="57df8-657">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="57df8-657">**Applicable Technologies**</span></span> | <span data-ttu-id="57df8-658">Genérico</span><span class="sxs-lookup"><span data-stu-id="57df8-658">Generic</span></span> |
| <span data-ttu-id="57df8-659">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="57df8-659">**Attributes**</span></span>              | <span data-ttu-id="57df8-660">N/D</span><span class="sxs-lookup"><span data-stu-id="57df8-660">N/A</span></span>  |
| <span data-ttu-id="57df8-661">**Referências**</span><span class="sxs-lookup"><span data-stu-id="57df8-661">**References**</span></span>              | [<span data-ttu-id="57df8-662">Autenticação Moderna com o Azure Active Directory para Aplicativos Web</span><span class="sxs-lookup"><span data-stu-id="57df8-662">Modern Authentication with Azure Active Directory for Web Applications</span></span>](https://blogs.msdn.microsoft.com/microsoft_press/2016/01/04/new-book-modern-authentication-with-azure-active-directory-for-web-applications/) |
| <span data-ttu-id="57df8-663">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="57df8-663">**Steps**</span></span> | <p><span data-ttu-id="57df8-664">propriedade de TokenReplayCache Olá permite que os desenvolvedores toodefine um cache de reprodução de token, um repositório que pode ser usado para não salvar os tokens para finalidade de saudação de verificar se nenhum token pode ser usado mais de uma vez.</span><span class="sxs-lookup"><span data-stu-id="57df8-664">hello TokenReplayCache property allows developers toodefine a token replay cache, a store that can be used for saving tokens for hello purpose of verifying that no token can be used more than once.</span></span></p><p><span data-ttu-id="57df8-665">Esta é uma medida em relação a um ataque comum, hello adequadamente chamado ataques de reprodução de token: um invasor interceptando token Olá enviada na entrada tente toosend-toohello aplicativo novamente ("Repetir"-lo) para estabelecer uma nova sessão.</span><span class="sxs-lookup"><span data-stu-id="57df8-665">This is a measure against a common attack, hello aptly called token replay attack: an attacker intercepting hello token sent at sign-in might try toosend it toohello app again (“replay” it) for establishing a new session.</span></span> <span data-ttu-id="57df8-666">Por exemplo, no OIDC-concessão de código de fluxo, após a autenticação bem-sucedida do usuário, uma solicitação muito "/ signin oidc" ponto de extremidade da terceira parte confiável Olá é feito com "id_token", "código" e "estado" parâmetros.</span><span class="sxs-lookup"><span data-stu-id="57df8-666">E.g., In OIDC code-grant flow, after successful user authentication, a request too"/signin-oidc" endpoint of hello relying party is made with "id_token", "code" and "state" parameters.</span></span></p><p><span data-ttu-id="57df8-667">saudação de terceira parte confiável valida a solicitação e estabelece uma nova sessão.</span><span class="sxs-lookup"><span data-stu-id="57df8-667">hello relying party validates this request and establishes a new session.</span></span> <span data-ttu-id="57df8-668">Se um adversário captura essa solicitação e repete, ele pode estabelecer uma sessão bem-sucedida e o usuário de saudação falso.</span><span class="sxs-lookup"><span data-stu-id="57df8-668">If an adversary captures this request and replays it, he/she can establish a successful session and spoof hello user.</span></span> <span data-ttu-id="57df8-669">presença de saudação de nonce Olá no OpenID Connect pode limitar mas não totalmente eliminar circunstâncias Olá no qual ataque Olá pode ser aplicada com êxito.</span><span class="sxs-lookup"><span data-stu-id="57df8-669">hello presence of hello nonce in OpenID Connect can limit but not fully eliminate hello circumstances in which hello attack can be successfully enacted.</span></span> <span data-ttu-id="57df8-670">tooprotect seus aplicativos, os desenvolvedores podem fornecer uma implementação de ITokenReplayCache e atribuir um tooTokenReplayCache de instância.</span><span class="sxs-lookup"><span data-stu-id="57df8-670">tooprotect their applications, developers can provide an implementation of ITokenReplayCache and assign an instance tooTokenReplayCache.</span></span></p>|

### <a name="example"></a><span data-ttu-id="57df8-671">Exemplo</span><span class="sxs-lookup"><span data-stu-id="57df8-671">Example</span></span>
```C#
// ITokenReplayCache defined in ADAL
public interface ITokenReplayCache
{
bool TryAdd(string securityToken, DateTime expiresOn);
bool TryFind(string securityToken);
}
```

### <a name="example"></a><span data-ttu-id="57df8-672">Exemplo</span><span class="sxs-lookup"><span data-stu-id="57df8-672">Example</span></span>
<span data-ttu-id="57df8-673">Aqui está um exemplo da implementação da interface de ITokenReplayCache hello.</span><span class="sxs-lookup"><span data-stu-id="57df8-673">Here is a sample implementation of hello ITokenReplayCache interface.</span></span> <span data-ttu-id="57df8-674">(Personalize e implemente sua estrutura de cache específica do projeto)</span><span class="sxs-lookup"><span data-stu-id="57df8-674">(Please customize and implement your project-specific caching framework)</span></span>
```C#
public class TokenReplayCache : ITokenReplayCache
{
    private readonly ICacheProvider cache; // Your project-specific cache provider
    public TokenReplayCache(ICacheProvider cache)
    {
        this.cache = cache;
    }
    public bool TryAdd(string securityToken, DateTime expiresOn)
    {
        if (this.cache.Get<string>(securityToken) == null)
        {
            this.cache.Set(securityToken, securityToken);
            return true;
        }
        return false;
    }
    public bool TryFind(string securityToken)
    {
        return this.cache.Get<string>(securityToken) != null;
    }
}
```
<span data-ttu-id="57df8-675">cache de saudação implementada tem toobe referenciado nas opções de OIDC via hello "TokenValidationParameters" propriedade da seguinte maneira.</span><span class="sxs-lookup"><span data-stu-id="57df8-675">hello implemented cache has toobe referenced in OIDC options via hello "TokenValidationParameters" property as follows.</span></span>
```C#
OpenIdConnectOptions openIdConnectOptions = new OpenIdConnectOptions
{
    AutomaticAuthenticate = true,
    ... // other configuration properties follow..
    TokenValidationParameters = new TokenValidationParameters
    {
        TokenReplayCache = new TokenReplayCache(/*Inject your cache provider*/);
    }
}
```

<span data-ttu-id="57df8-676">Observe que eficácia de saudação tootest dessa configuração, fazer logon no seu aplicativo local protegido OIDC e capturar a solicitação de saudação muito`"/signin-oidc"` ponto de extremidade no fiddler.</span><span class="sxs-lookup"><span data-stu-id="57df8-676">Please note that tootest hello effectiveness of this configuration, login into your local OIDC-protected application and capture hello request too`"/signin-oidc"` endpoint in fiddler.</span></span> <span data-ttu-id="57df8-677">Quando a proteção de saudação não está em vigor, a repetição dessa solicitação no fiddler definirá um novo cookie de sessão.</span><span class="sxs-lookup"><span data-stu-id="57df8-677">When hello protection is not in place, replaying this request in fiddler will set a new session cookie.</span></span> <span data-ttu-id="57df8-678">Quando a solicitação de saudação é reproduzida depois Olá o TokenReplayCache proteção é adicionada, o aplicativo hello lançará uma exceção da seguinte maneira:`SecurityTokenReplayDetectedException: IDX10228: hello securityToken has previously been validated, securityToken: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik1uQ19WWmNBVGZNNXBPWWlKSE1iYTlnb0VLWSIsImtpZCI6Ik1uQ1......`</span><span class="sxs-lookup"><span data-stu-id="57df8-678">When hello request is replayed after hello TokenReplayCache protection is added, hello application will throw an exception as follows: `SecurityTokenReplayDetectedException: IDX10228: hello securityToken has previously been validated, securityToken: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik1uQ19WWmNBVGZNNXBPWWlKSE1iYTlnb0VLWSIsImtpZCI6Ik1uQ1......`</span></span>

## <span data-ttu-id="57df8-679"><a id="adal-oauth2"></a>Use o token de bibliotecas ADAL toomanage solicitações de OAuth2 tooAAD de clientes (ou AD local)</span><span class="sxs-lookup"><span data-stu-id="57df8-679"><a id="adal-oauth2"></a>Use ADAL libraries toomanage token requests from OAuth2 clients tooAAD (or on-premises AD)</span></span>

| <span data-ttu-id="57df8-680">Title</span><span class="sxs-lookup"><span data-stu-id="57df8-680">Title</span></span>                   | <span data-ttu-id="57df8-681">Detalhes</span><span class="sxs-lookup"><span data-stu-id="57df8-681">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="57df8-682">**Componente**</span><span class="sxs-lookup"><span data-stu-id="57df8-682">**Component**</span></span>               | <span data-ttu-id="57df8-683">AD do Azure</span><span class="sxs-lookup"><span data-stu-id="57df8-683">Azure AD</span></span> | 
| <span data-ttu-id="57df8-684">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="57df8-684">**SDL Phase**</span></span>               | <span data-ttu-id="57df8-685">Compilação</span><span class="sxs-lookup"><span data-stu-id="57df8-685">Build</span></span> |  
| <span data-ttu-id="57df8-686">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="57df8-686">**Applicable Technologies**</span></span> | <span data-ttu-id="57df8-687">Genérico</span><span class="sxs-lookup"><span data-stu-id="57df8-687">Generic</span></span> |
| <span data-ttu-id="57df8-688">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="57df8-688">**Attributes**</span></span>              | <span data-ttu-id="57df8-689">N/D</span><span class="sxs-lookup"><span data-stu-id="57df8-689">N/A</span></span>  |
| <span data-ttu-id="57df8-690">**Referências**</span><span class="sxs-lookup"><span data-stu-id="57df8-690">**References**</span></span>              | [<span data-ttu-id="57df8-691">ADAL</span><span class="sxs-lookup"><span data-stu-id="57df8-691">ADAL</span></span>](https://azure.microsoft.com/documentation/articles/active-directory-authentication-libraries/) |
| <span data-ttu-id="57df8-692">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="57df8-692">**Steps**</span></span> | <p><span data-ttu-id="57df8-693">saudação do Azure AD authentication Library (ADAL) permite que cliente aplicativo desenvolvedores tooeasily autenticar usuários toocloud ou Active Directory (AD) local e, em seguida, obter tokens de acesso para proteger chamadas de API.</span><span class="sxs-lookup"><span data-stu-id="57df8-693">hello Azure AD authentication Library (ADAL) enables client application developers tooeasily authenticate users toocloud or on-premises Active Directory (AD), and then obtain access tokens for securing API calls.</span></span></p><p><span data-ttu-id="57df8-694">A ADAL tem muitos recursos que tornam a autenticação mais fácil para os desenvolvedores, como o suporte assíncrono, um cache de token configurável que armazena os tokens de acesso e de atualização, atualização automática de token quando um token de acesso expira e um token de atualização está disponível, e muito mais.</span><span class="sxs-lookup"><span data-stu-id="57df8-694">ADAL has many features that make authentication easier for developers, such as asynchronous support, a configurable token cache that stores access tokens and refresh tokens, automatic token refresh when an access token expires and a refresh token is available, and more.</span></span></p><p><span data-ttu-id="57df8-695">Controlando a maioria da complexidade hello, ADAL pode ajudar o desenvolvedor se concentre na lógica de negócios em seus aplicativos e proteja facilmente os recursos sem ser um especialista em segurança.</span><span class="sxs-lookup"><span data-stu-id="57df8-695">By handling most of hello complexity, ADAL can help a developer focus on business logic in their application and easily secure resources without being an expert on security.</span></span> <span data-ttu-id="57df8-696">Bibliotecas separadas estão disponíveis para .NET, JavaScript (cliente e Node.js), iOS, Android e Java.</span><span class="sxs-lookup"><span data-stu-id="57df8-696">Separate libraries are available for .NET, JavaScript (client and Node.js), iOS, Android and Java.</span></span></p>|

## <span data-ttu-id="57df8-697"><a id="authn-devices-field"></a>Autenticar dispositivos conectados toohello Gateway de campo</span><span class="sxs-lookup"><span data-stu-id="57df8-697"><a id="authn-devices-field"></a>Authenticate devices connecting toohello Field Gateway</span></span>

| <span data-ttu-id="57df8-698">Title</span><span class="sxs-lookup"><span data-stu-id="57df8-698">Title</span></span>                   | <span data-ttu-id="57df8-699">Detalhes</span><span class="sxs-lookup"><span data-stu-id="57df8-699">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="57df8-700">**Componente**</span><span class="sxs-lookup"><span data-stu-id="57df8-700">**Component**</span></span>               | <span data-ttu-id="57df8-701">Gateway de Campo de IoT</span><span class="sxs-lookup"><span data-stu-id="57df8-701">IoT Field Gateway</span></span> | 
| <span data-ttu-id="57df8-702">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="57df8-702">**SDL Phase**</span></span>               | <span data-ttu-id="57df8-703">Compilação</span><span class="sxs-lookup"><span data-stu-id="57df8-703">Build</span></span> |  
| <span data-ttu-id="57df8-704">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="57df8-704">**Applicable Technologies**</span></span> | <span data-ttu-id="57df8-705">Genérico</span><span class="sxs-lookup"><span data-stu-id="57df8-705">Generic</span></span> |
| <span data-ttu-id="57df8-706">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="57df8-706">**Attributes**</span></span>              | <span data-ttu-id="57df8-707">N/D</span><span class="sxs-lookup"><span data-stu-id="57df8-707">N/A</span></span>  |
| <span data-ttu-id="57df8-708">**Referências**</span><span class="sxs-lookup"><span data-stu-id="57df8-708">**References**</span></span>              | <span data-ttu-id="57df8-709">N/D</span><span class="sxs-lookup"><span data-stu-id="57df8-709">N/A</span></span>  |
| <span data-ttu-id="57df8-710">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="57df8-710">**Steps**</span></span> | <span data-ttu-id="57df8-711">Certifique-se de que cada dispositivo é autenticado pelo campo Gateway de saudação antes de aceitar dados a partir deles e antes de facilitando upstream comunicações com hello Gateway de nuvem.</span><span class="sxs-lookup"><span data-stu-id="57df8-711">Ensure that each device is authenticated by hello Field Gateway before accepting data from them and before facilitating upstream communications with hello Cloud Gateway.</span></span> <span data-ttu-id="57df8-712">Além disso, verifique se os dispositivos se conectam com uma credencial por dispositivo, para que dispositivos individuais possam ser identificados exclusivamente.</span><span class="sxs-lookup"><span data-stu-id="57df8-712">Also, ensure that devices connect with a per device credential so that individual devices can be uniquely identified.</span></span>|

## <span data-ttu-id="57df8-713"><a id="authn-devices-cloud"></a>Certifique-se de que os dispositivos conectados tooCloud gateway são autenticados</span><span class="sxs-lookup"><span data-stu-id="57df8-713"><a id="authn-devices-cloud"></a>Ensure that devices connecting tooCloud gateway are authenticated</span></span>

| <span data-ttu-id="57df8-714">Title</span><span class="sxs-lookup"><span data-stu-id="57df8-714">Title</span></span>                   | <span data-ttu-id="57df8-715">Detalhes</span><span class="sxs-lookup"><span data-stu-id="57df8-715">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="57df8-716">**Componente**</span><span class="sxs-lookup"><span data-stu-id="57df8-716">**Component**</span></span>               | <span data-ttu-id="57df8-717">Gateway de Nuvem IoT</span><span class="sxs-lookup"><span data-stu-id="57df8-717">IoT Cloud Gateway</span></span> | 
| <span data-ttu-id="57df8-718">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="57df8-718">**SDL Phase**</span></span>               | <span data-ttu-id="57df8-719">Compilação</span><span class="sxs-lookup"><span data-stu-id="57df8-719">Build</span></span> |  
| <span data-ttu-id="57df8-720">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="57df8-720">**Applicable Technologies**</span></span> | <span data-ttu-id="57df8-721">Genérico, C#, Node.JS,</span><span class="sxs-lookup"><span data-stu-id="57df8-721">Generic, C#, Node.JS,</span></span>  |
| <span data-ttu-id="57df8-722">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="57df8-722">**Attributes**</span></span>              | <span data-ttu-id="57df8-723">N/A, Opção de gateway - Hub IoT do Azure</span><span class="sxs-lookup"><span data-stu-id="57df8-723">N/A, Gateway choice - Azure IoT Hub</span></span> |
| <span data-ttu-id="57df8-724">**Referências**</span><span class="sxs-lookup"><span data-stu-id="57df8-724">**References**</span></span>              | <span data-ttu-id="57df8-725">N/A, [Hub IoT do Azure com .NET](https://azure.microsoft.com/documentation/articles/iot-hub-csharp-csharp-getstarted/), [Introdução ao hub IoT e Nó JS](https://azure.microsoft.com/documentation/articles/iot-hub-node-node-getstarted), [Protegendo a IoT com SAS e certificados](https://azure.microsoft.com/documentation/articles/iot-hub-sas-tokens/), [Repositório Git](https://github.com/Azure/azure-iot-sdks/tree/master/node)</span><span class="sxs-lookup"><span data-stu-id="57df8-725">N/A, [Azure IoT hub with .NET](https://azure.microsoft.com/documentation/articles/iot-hub-csharp-csharp-getstarted/), [Getting Started wih IoT hub and Node JS](https://azure.microsoft.com/documentation/articles/iot-hub-node-node-getstarted), [Securing IoT with SAS and certificates](https://azure.microsoft.com/documentation/articles/iot-hub-sas-tokens/), [Git repository](https://github.com/Azure/azure-iot-sdks/tree/master/node)</span></span> |
| <span data-ttu-id="57df8-726">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="57df8-726">**Steps**</span></span> | <ul><li><span data-ttu-id="57df8-727">**Genérico:** dispositivo de saudação autenticar usando a segurança de camada de transporte (TLS) ou IPSec.</span><span class="sxs-lookup"><span data-stu-id="57df8-727">**Generic:** Authenticate hello device using Transport Layer Security (TLS) or IPSec.</span></span> <span data-ttu-id="57df8-728">A infraestrutura deve dar suporte ao uso da PSK (chave pré-compartilhada) nos dispositivos que não conseguem lidar com a criptografia assimétrica completa.</span><span class="sxs-lookup"><span data-stu-id="57df8-728">Infrastructure should support using pre-shared key (PSK) on those devices that cannot handle full asymmetric cryptography.</span></span> <span data-ttu-id="57df8-729">Aproveite o Azure AD e o OAuth.</span><span class="sxs-lookup"><span data-stu-id="57df8-729">Leverage Azure AD, Oauth.</span></span></li><li><span data-ttu-id="57df8-730">**C#:** ao criar uma instância de DeviceClient, por padrão, Olá criar método cria uma instância de DeviceClient que usa Olá AMQP protocolo toocommunicate com o IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="57df8-730">**C#:** When creating a DeviceClient instance, by default, hello Create method creates a DeviceClient instance that uses hello AMQP protocol toocommunicate with IoT Hub.</span></span> <span data-ttu-id="57df8-731">Olá toouse protocolo HTTPS, usar a substituição de saudação do método de criação de hello que permite que o protocolo de saudação toospecify.</span><span class="sxs-lookup"><span data-stu-id="57df8-731">toouse hello HTTPS protocol, use hello override of hello Create method that enables you toospecify hello protocol.</span></span> <span data-ttu-id="57df8-732">Se você usar o protocolo HTTPS de saudação, você também deve adicionar Olá `Microsoft.AspNet.WebApi.Client` saudação do NuGet pacote tooyour projeto tooinclude `System.Net.Http.Formatting` namespace.</span><span class="sxs-lookup"><span data-stu-id="57df8-732">If you use hello HTTPS protocol, you should also add hello `Microsoft.AspNet.WebApi.Client` NuGet package tooyour project tooinclude hello `System.Net.Http.Formatting` namespace.</span></span></li></ul>|

### <a name="example"></a><span data-ttu-id="57df8-733">Exemplo</span><span class="sxs-lookup"><span data-stu-id="57df8-733">Example</span></span>
```C#
static DeviceClient deviceClient;

static string deviceKey = "{device key}";
static string iotHubUri = "{iot hub hostname}";

var messageString = "{message in string format}";
var message = new Message(Encoding.ASCII.GetBytes(messageString));

deviceClient = DeviceClient.Create(iotHubUri, new DeviceAuthenticationWithRegistrySymmetricKey("myFirstDevice", deviceKey));

await deviceClient.SendEventAsync(message);
```

### <a name="example"></a><span data-ttu-id="57df8-734">Exemplo</span><span class="sxs-lookup"><span data-stu-id="57df8-734">Example</span></span>
<span data-ttu-id="57df8-735">**Node.JS: Autenticação**</span><span class="sxs-lookup"><span data-stu-id="57df8-735">**Node.JS: Authentication**</span></span>
#### <a name="symmetric-key"></a><span data-ttu-id="57df8-736">Chave simétrica</span><span class="sxs-lookup"><span data-stu-id="57df8-736">Symmetric key</span></span>
* <span data-ttu-id="57df8-737">Criar um hub IoT no azure</span><span class="sxs-lookup"><span data-stu-id="57df8-737">Create a IoT hub on azure</span></span>
* <span data-ttu-id="57df8-738">Crie uma entrada no registro de identidade de dispositivo Olá</span><span class="sxs-lookup"><span data-stu-id="57df8-738">Create an entry in hello device identity registry</span></span>
    ```javascript
    var device = new iothub.Device(null);
    device.deviceId = <DeviceId >
    registry.create(device, function(err, deviceInfo, res) {})
    ```
* <span data-ttu-id="57df8-739">Criar um dispositivo simulado</span><span class="sxs-lookup"><span data-stu-id="57df8-739">Create a simulated device</span></span>
    ```javascript
    var clientFromConnectionString = require('azure-iot-device-amqp').clientFromConnectionString;
    var Message = require('azure-iot-device').Message;
    var connectionString = 'HostName=<HostName>DeviceId=<DeviceId>SharedAccessKey=<SharedAccessKey>';
    var client = clientFromConnectionString(connectionString);
    ```
#### <a name="sas-token"></a><span data-ttu-id="57df8-740">Token SAS</span><span class="sxs-lookup"><span data-stu-id="57df8-740">SAS Token</span></span>
* <span data-ttu-id="57df8-741">É gerado internamente ao usar a chave simétrica, mas também pode gerá-la e usá-la explicitamente</span><span class="sxs-lookup"><span data-stu-id="57df8-741">Gets internally generated when using symmetric key but we can generate and use it explicitly as well</span></span>
* <span data-ttu-id="57df8-742">Defina um protocolo: `var Http = require('azure-iot-device-http').Http;`</span><span class="sxs-lookup"><span data-stu-id="57df8-742">Define a protocol : `var Http = require('azure-iot-device-http').Http;`</span></span>
* <span data-ttu-id="57df8-743">Crie um token sas:</span><span class="sxs-lookup"><span data-stu-id="57df8-743">Create a sas token :</span></span>
    ```javascript
    resourceUri = encodeURIComponent(resourceUri.toLowerCase()).toLowerCase();
    var deviceName = "<deviceName >";
    var expires = (Date.now() / 1000) + expiresInMins * 60;
    var toSign = resourceUri + '\n' + expires;
    // using crypto
    var decodedPassword = new Buffer(signingKey, 'base64').toString('binary');
    const hmac = crypto.createHmac('sha256', decodedPassword);
    hmac.update(toSign);
    var base64signature = hmac.digest('base64');
    var base64UriEncoded = encodeURIComponent(base64signature);
    // construct authorization string
    var token = "SharedAccessSignature sr=" + resourceUri + "%2fdevices%2f"+deviceName+"&sig="
    + base64UriEncoded + "&se=" + expires;
    if (policyName) token += "&skn="+policyName;
    return token;
    ```
* <span data-ttu-id="57df8-744">Conecte-se usando um token sas:</span><span class="sxs-lookup"><span data-stu-id="57df8-744">Connect using sas token:</span></span> 
    ```javascript
    Client.fromSharedAccessSignature(sas, Http); 
    ```
#### <a name="certificates"></a><span data-ttu-id="57df8-745">Certificados</span><span class="sxs-lookup"><span data-stu-id="57df8-745">Certificates</span></span>
* <span data-ttu-id="57df8-746">Gerar um X509 autoassinado certificado usando uma ferramenta como toogenerate OpenSSL uma. cert na chave e uma chave arquivos toostore Olá certificado e hello respectivamente</span><span class="sxs-lookup"><span data-stu-id="57df8-746">Generate a self signed X509 certificate using any tool such as OpenSSL toogenerate a .cert and .key files toostore hello certificate and hello key respectively</span></span>
* <span data-ttu-id="57df8-747">Provisione um dispositivo que aceite a conexão segura usando certificados.</span><span class="sxs-lookup"><span data-stu-id="57df8-747">Provision a device that accepts secured connection using certificates.</span></span>
    ```javascript
    var connectionString = '<connectionString>';
    var registry = iothub.Registry.fromConnectionString(connectionString);
    var deviceJSON = {deviceId:"<deviceId>",
    authentication: {
        x509Thumbprint: {
        primaryThumbprint: "<PrimaryThumbprint>",
        secondaryThumbprint: "<SecondaryThumbprint>"
        }
    }}
    var device = deviceJSON;
    registry.create(device, function (err) {});
    ```
* <span data-ttu-id="57df8-748">Conectar um dispositivo usando um certificado</span><span class="sxs-lookup"><span data-stu-id="57df8-748">Connect a device using a certificate</span></span>
    ```javascript
    var Protocol = require('azure-iot-device-http').Http;
    var Client = require('azure-iot-device').Client;
    var connectionString = 'HostName=<HostName>DeviceId=<DeviceId>x509=true';
    var client = Client.fromConnectionString(connectionString, Protocol);
    var options = {
        key: fs.readFileSync('./key.pem', 'utf8'),
        cert: fs.readFileSync('./server.crt', 'utf8')
    }; 
    // Calling setOptions with hello x509 certificate and key (and optionally, passphrase) will configure hello client //transport toouse x509 when connecting tooIoT Hub
    client.setOptions(options);
    //call fn tooexecute after hello connection is set up
    client.open(fn);
    ```

## <span data-ttu-id="57df8-749"><a id="authn-cred"></a>Usar credenciais de autenticação por dispositivo</span><span class="sxs-lookup"><span data-stu-id="57df8-749"><a id="authn-cred"></a>Use per-device authentication credentials</span></span>

| <span data-ttu-id="57df8-750">Title</span><span class="sxs-lookup"><span data-stu-id="57df8-750">Title</span></span>                   | <span data-ttu-id="57df8-751">Detalhes</span><span class="sxs-lookup"><span data-stu-id="57df8-751">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="57df8-752">**Componente**</span><span class="sxs-lookup"><span data-stu-id="57df8-752">**Component**</span></span>               | <span data-ttu-id="57df8-753">Gateway de Nuvem IoT</span><span class="sxs-lookup"><span data-stu-id="57df8-753">IoT Cloud Gateway</span></span>  | 
| <span data-ttu-id="57df8-754">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="57df8-754">**SDL Phase**</span></span>               | <span data-ttu-id="57df8-755">Compilação</span><span class="sxs-lookup"><span data-stu-id="57df8-755">Build</span></span> |  
| <span data-ttu-id="57df8-756">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="57df8-756">**Applicable Technologies**</span></span> | <span data-ttu-id="57df8-757">Genérico</span><span class="sxs-lookup"><span data-stu-id="57df8-757">Generic</span></span> |
| <span data-ttu-id="57df8-758">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="57df8-758">**Attributes**</span></span>              | <span data-ttu-id="57df8-759">Opção de gateway - Hub IoT do Azure</span><span class="sxs-lookup"><span data-stu-id="57df8-759">Gateway choice - Azure IoT Hub</span></span> |
| <span data-ttu-id="57df8-760">**Referências**</span><span class="sxs-lookup"><span data-stu-id="57df8-760">**References**</span></span>              | [<span data-ttu-id="57df8-761">Tokens de segurança do Hub IoT do Azure</span><span class="sxs-lookup"><span data-stu-id="57df8-761">Azure IoT Hub Security Tokens</span></span>](https://azure.microsoft.com/documentation/articles/iot-hub-sas-tokens/) |
| <span data-ttu-id="57df8-762">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="57df8-762">**Steps**</span></span> | <span data-ttu-id="57df8-763">Use credenciais de autenticação por dispositivo usando tokens SaS com base na chave do dispositivo ou no certificado de cliente, em vez de políticas de acesso compartilhado de nível de Hub IoT.</span><span class="sxs-lookup"><span data-stu-id="57df8-763">Use per device authentication credentials using SaS tokens based on Device key or Client Certificate, instead of IoT Hub-level shared access policies.</span></span> <span data-ttu-id="57df8-764">Isso evita a reutilização de saudação de tokens de autenticação de um gateway de dispositivo ou um campo por outro</span><span class="sxs-lookup"><span data-stu-id="57df8-764">This prevents hello reuse of authentication tokens of one device or field gateway by another</span></span> |

## <span data-ttu-id="57df8-765"><a id="req-containers-anon"></a>Certifique-se de que somente Olá necessário contêineres e blobs recebem acesso de leitura anônimo</span><span class="sxs-lookup"><span data-stu-id="57df8-765"><a id="req-containers-anon"></a>Ensure that only hello required containers and blobs are given anonymous read access</span></span>

| <span data-ttu-id="57df8-766">Title</span><span class="sxs-lookup"><span data-stu-id="57df8-766">Title</span></span>                   | <span data-ttu-id="57df8-767">Detalhes</span><span class="sxs-lookup"><span data-stu-id="57df8-767">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="57df8-768">**Componente**</span><span class="sxs-lookup"><span data-stu-id="57df8-768">**Component**</span></span>               | <span data-ttu-id="57df8-769">Armazenamento do Azure</span><span class="sxs-lookup"><span data-stu-id="57df8-769">Azure Storage</span></span> | 
| <span data-ttu-id="57df8-770">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="57df8-770">**SDL Phase**</span></span>               | <span data-ttu-id="57df8-771">Compilação</span><span class="sxs-lookup"><span data-stu-id="57df8-771">Build</span></span> |  
| <span data-ttu-id="57df8-772">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="57df8-772">**Applicable Technologies**</span></span> | <span data-ttu-id="57df8-773">Genérico</span><span class="sxs-lookup"><span data-stu-id="57df8-773">Generic</span></span> |
| <span data-ttu-id="57df8-774">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="57df8-774">**Attributes**</span></span>              | <span data-ttu-id="57df8-775">StorageType - Blob</span><span class="sxs-lookup"><span data-stu-id="57df8-775">StorageType - Blob</span></span> |
| <span data-ttu-id="57df8-776">**Referências**</span><span class="sxs-lookup"><span data-stu-id="57df8-776">**References**</span></span>              | <span data-ttu-id="57df8-777">[Gerenciar o acesso de leitura anônimo toocontainers e blobs](https://azure.microsoft.com/documentation/articles/storage-manage-access-to-resources/), [assinaturas de acesso compartilhado, parte 1: modelo SAS Olá Noções básicas sobre](https://azure.microsoft.com/documentation/articles/storage-dotnet-shared-access-signature-part-1/)</span><span class="sxs-lookup"><span data-stu-id="57df8-777">[Manage anonymous read access toocontainers and blobs](https://azure.microsoft.com/documentation/articles/storage-manage-access-to-resources/), [Shared Access Signatures, Part 1: Understanding hello SAS model](https://azure.microsoft.com/documentation/articles/storage-dotnet-shared-access-signature-part-1/)</span></span> |
| <span data-ttu-id="57df8-778">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="57df8-778">**Steps**</span></span> | <p><span data-ttu-id="57df8-779">Por padrão, um contêiner e todos os blobs dentro dele podem ser acessados somente pelo proprietário Olá Olá da conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="57df8-779">By default, a container and any blobs within it may be accessed only by hello owner of hello storage account.</span></span> <span data-ttu-id="57df8-780">contêiner de tooa toogive usuários anônimos permissões de leitura e seus blobs, um pode definir acesso público do hello contêiner permissões tooallow.</span><span class="sxs-lookup"><span data-stu-id="57df8-780">toogive anonymous users read permissions tooa container and its blobs, one can set hello container permissions tooallow public access.</span></span> <span data-ttu-id="57df8-781">Usuários anônimos podem ler blobs dentro de um contêiner publicamente acessível sem autenticar a solicitação de saudação.</span><span class="sxs-lookup"><span data-stu-id="57df8-781">Anonymous users can read blobs within a publicly accessible container without authenticating hello request.</span></span></p><p><span data-ttu-id="57df8-782">Os contêineres fornecem Olá opções para gerenciar o acesso do contêiner a seguir:</span><span class="sxs-lookup"><span data-stu-id="57df8-782">Containers provide hello following options for managing container access:</span></span></p><ul><li><span data-ttu-id="57df8-783">Acesso completo de leitura pública: os dados de contêiner e blob podem ser lidos por solicitação anônima.</span><span class="sxs-lookup"><span data-stu-id="57df8-783">Full public read access: Container and blob data can be read via anonymous request.</span></span> <span data-ttu-id="57df8-784">Os clientes podem enumerar blobs dentro do contêiner de saudação por solicitação anônima, mas não é possível enumerar os contêineres na conta de armazenamento hello.</span><span class="sxs-lookup"><span data-stu-id="57df8-784">Clients can enumerate blobs within hello container via anonymous request, but cannot enumerate containers within hello storage account.</span></span></li><li><span data-ttu-id="57df8-785">Acesso de leitura pública somente para blobs: os dados blob nesse contêiner podem ser lidos por solicitação anônima, mas os dados do contêiner não estão disponíveis.</span><span class="sxs-lookup"><span data-stu-id="57df8-785">Public read access for blobs only: Blob data within this container can be read via anonymous request, but container data is not available.</span></span> <span data-ttu-id="57df8-786">Os clientes não podem enumerar blobs no contêiner Olá por solicitação anônima</span><span class="sxs-lookup"><span data-stu-id="57df8-786">Clients cannot enumerate blobs within hello container via anonymous request</span></span></li><li><span data-ttu-id="57df8-787">Acesso de leitura não público: dados de contêiner e blob podem ser lidos pelo proprietário da conta Olá somente</span><span class="sxs-lookup"><span data-stu-id="57df8-787">No public read access: Container and blob data can be read by hello account owner only</span></span></li></ul><p><span data-ttu-id="57df8-788">O acesso anônimo é ideal para cenários em que determinados blobs sempre devem estar disponíveis para acesso de leitura anônimo.</span><span class="sxs-lookup"><span data-stu-id="57df8-788">Anonymous access is best for scenarios where certain blobs should always be available for anonymous read access.</span></span> <span data-ttu-id="57df8-789">Para um controle refinado, é possível criar uma assinatura de acesso compartilhado, que permite o acesso de toodelegate restringido usando permissões diferentes e em um intervalo de tempo especificado.</span><span class="sxs-lookup"><span data-stu-id="57df8-789">For finer-grained control, one can create a shared access signature, which enables toodelegate restricted access using different permissions and over a specified time interval.</span></span> <span data-ttu-id="57df8-790">Verifique se contêineres e blobs, que podem conter dados confidenciais, não recebem acesso anônimo acidentalmente</span><span class="sxs-lookup"><span data-stu-id="57df8-790">Ensure that containers and blobs, which may potentially contain sensitive data, are not given anonymous access accidentally</span></span></p>|

## <span data-ttu-id="57df8-791"><a id="limited-access-sas"></a>Conceder acesso limitado tooobjects no armazenamento do Azure usando SAS ou SAP</span><span class="sxs-lookup"><span data-stu-id="57df8-791"><a id="limited-access-sas"></a>Grant limited access tooobjects in Azure storage using SAS or SAP</span></span>

| <span data-ttu-id="57df8-792">Title</span><span class="sxs-lookup"><span data-stu-id="57df8-792">Title</span></span>                   | <span data-ttu-id="57df8-793">Detalhes</span><span class="sxs-lookup"><span data-stu-id="57df8-793">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="57df8-794">**Componente**</span><span class="sxs-lookup"><span data-stu-id="57df8-794">**Component**</span></span>               | <span data-ttu-id="57df8-795">Armazenamento do Azure</span><span class="sxs-lookup"><span data-stu-id="57df8-795">Azure Storage</span></span> | 
| <span data-ttu-id="57df8-796">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="57df8-796">**SDL Phase**</span></span>               | <span data-ttu-id="57df8-797">Compilação</span><span class="sxs-lookup"><span data-stu-id="57df8-797">Build</span></span> |  
| <span data-ttu-id="57df8-798">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="57df8-798">**Applicable Technologies**</span></span> | <span data-ttu-id="57df8-799">Genérico</span><span class="sxs-lookup"><span data-stu-id="57df8-799">Generic</span></span> |
| <span data-ttu-id="57df8-800">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="57df8-800">**Attributes**</span></span>              | <span data-ttu-id="57df8-801">N/D</span><span class="sxs-lookup"><span data-stu-id="57df8-801">N/A</span></span> |
| <span data-ttu-id="57df8-802">**Referências**</span><span class="sxs-lookup"><span data-stu-id="57df8-802">**References**</span></span>              | <span data-ttu-id="57df8-803">[Assinaturas de acesso compartilhado, parte 1: Modelo SAS Noções básicas sobre Olá](https://azure.microsoft.com/documentation/articles/storage-dotnet-shared-access-signature-part-1/), [assinaturas de acesso compartilhado, parte 2: criar e usar uma SAS com armazenamento de Blob](https://azure.microsoft.com/documentation/articles/storage-dotnet-shared-access-signature-part-2/), [como toodelegate acessar tooobjects usando sua conta Assinaturas de acesso compartilhado e políticas de acesso armazenada](https://azure.microsoft.com/documentation/articles/storage-security-guide/#_how-to-delegate-access-to-objects-in-your-account-using-shared-access-signatures-and-stored-access-policies)</span><span class="sxs-lookup"><span data-stu-id="57df8-803">[Shared Access Signatures, Part 1: Understanding hello SAS model](https://azure.microsoft.com/documentation/articles/storage-dotnet-shared-access-signature-part-1/), [Shared Access Signatures, Part 2: Create and use a SAS with Blob storage](https://azure.microsoft.com/documentation/articles/storage-dotnet-shared-access-signature-part-2/), [How toodelegate access tooobjects in your account using Shared Access Signatures and Stored Access Policies](https://azure.microsoft.com/documentation/articles/storage-security-guide/#_how-to-delegate-access-to-objects-in-your-account-using-shared-access-signatures-and-stored-access-policies)</span></span> |
| <span data-ttu-id="57df8-804">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="57df8-804">**Steps**</span></span> | <p><span data-ttu-id="57df8-805">Usar uma assinatura de acesso compartilhado (SAS) é um tooobjects de acesso de toogrant limitado de maneira eficiente em uma conta tooother os clientes de armazenamento, sem ter a chave de acesso de conta tooexpose.</span><span class="sxs-lookup"><span data-stu-id="57df8-805">Using a shared access signature (SAS) is a powerful way toogrant limited access tooobjects in a storage account tooother clients, without having tooexpose account access key.</span></span> <span data-ttu-id="57df8-806">Olá SAS é um URI que abrange a seus parâmetros de consulta todas as informações de saudação necessárias para autenticados para acessam o recurso de armazenamento de tooa.</span><span class="sxs-lookup"><span data-stu-id="57df8-806">hello SAS is a URI that encompasses in its query parameters all of hello information necessary for authenticated access tooa storage resource.</span></span> <span data-ttu-id="57df8-807">tooaccess recursos de armazenamento com hello SAS, Olá cliente precisa apenas de toopass no construtor apropriado do toohello Olá SAS ou método.</span><span class="sxs-lookup"><span data-stu-id="57df8-807">tooaccess storage resources with hello SAS, hello client only needs toopass in hello SAS toohello appropriate constructor or method.</span></span></p><p><span data-ttu-id="57df8-808">Você pode usar uma SAS quando desejar tooprovide acesso tooresources no seu cliente de tooa de conta de armazenamento que não pode ser confiável com a chave de conta hello.</span><span class="sxs-lookup"><span data-stu-id="57df8-808">You can use a SAS when you want tooprovide access tooresources in your storage account tooa client that can't be trusted with hello account key.</span></span> <span data-ttu-id="57df8-809">As chaves de conta de armazenamento incluem tanto uma chave primária e secundária, que concedem a conta de acesso administrativo a tooyour e todos os recursos de saudação nele.</span><span class="sxs-lookup"><span data-stu-id="57df8-809">Your storage account keys include both a primary and secondary key, both of which grant administrative access tooyour account and all of hello resources in it.</span></span> <span data-ttu-id="57df8-810">Exposição de qualquer uma de suas chaves de conta abre sua possibilidade de toohello de conta de uso mal-intencionado ou negligente.</span><span class="sxs-lookup"><span data-stu-id="57df8-810">Exposing either of your account keys opens your account toohello possibility of malicious or negligent use.</span></span> <span data-ttu-id="57df8-811">Assinaturas de acesso compartilhado fornecem uma alternativa segura que permite que outros clientes tooread, gravação e exclusão de dados em sua conta de armazenamento de acordo com as permissões do toohello que você concedeu e sem necessidade de chave de conta hello.</span><span class="sxs-lookup"><span data-stu-id="57df8-811">Shared access signatures provide a safe alternative that allows other clients tooread, write, and delete data in your storage account according toohello permissions you've granted, and without need for hello account key.</span></span></p><p><span data-ttu-id="57df8-812">Se você tiver um conjunto lógico de parâmetros que são sempre semelhantes, o uso de SAP (política de acesso armazenada) será uma ideia melhor.</span><span class="sxs-lookup"><span data-stu-id="57df8-812">If you have a logical set of parameters that are similar each time, using a Stored Access Policy (SAP) is a better idea.</span></span> <span data-ttu-id="57df8-813">Porque o uso de uma SAS derivada de uma política de acesso armazenado oferece Olá capacidade toorevoke que SAS imediatamente, é Olá recomendado tooalways de prática recomendada usar políticas de acesso armazenado quando possível.</span><span class="sxs-lookup"><span data-stu-id="57df8-813">Because using a SAS derived from a Stored Access Policy gives you hello ability toorevoke that SAS immediately, it is hello recommended best practice tooalways use Stored Access Policies when possible.</span></span></p>|
