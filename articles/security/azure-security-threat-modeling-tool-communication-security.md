---
title: "Segurança de comunicações - Microsoft Threat Modeling Tool - Azure | Microsoft Docs"
description: "atenuações de ameaças expostas na Ferramenta de Modelagem de Ameaças"
services: security
documentationcenter: na
author: RodSan
manager: RodSan
editor: RodSan
ms.assetid: na
ms.service: security
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/17/2017
ms.author: rodsan
ms.openlocfilehash: b85003a94df3b97f5c64eb3b7e62071f07674c5e
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/29/2017
---
# <a name="security-frame-communication-security--mitigations"></a><span data-ttu-id="6a6cd-103">Estrutura de segurança: Segurança de comunicações | Atenuações</span><span class="sxs-lookup"><span data-stu-id="6a6cd-103">Security Frame: Communication Security | Mitigations</span></span> 
| <span data-ttu-id="6a6cd-104">Produto/serviço</span><span class="sxs-lookup"><span data-stu-id="6a6cd-104">Product/Service</span></span> | <span data-ttu-id="6a6cd-105">Artigo</span><span class="sxs-lookup"><span data-stu-id="6a6cd-105">Article</span></span> |
| --------------- | ------- |
| <span data-ttu-id="6a6cd-106">**Hub de Eventos do Azure**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-106">**Azure Event Hub**</span></span> | <ul><li>[<span data-ttu-id="6a6cd-107">Proteger comunicações para o Hub de Eventos usando SSL/TLS</span><span class="sxs-lookup"><span data-stu-id="6a6cd-107">Secure communication to Event Hub using SSL/TLS</span></span>](#comm-ssltls)</li></ul> |
| <span data-ttu-id="6a6cd-108">**Dynamics CRM**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-108">**Dynamics CRM**</span></span> | <ul><li>[<span data-ttu-id="6a6cd-109">Verificar se os privilégios da conta do serviço e verificar se os serviços ou páginas ASP.NET personalizados respeitam a segurança do CRM</span><span class="sxs-lookup"><span data-stu-id="6a6cd-109">Check service account privileges and check that the custom Services or ASP.NET Pages respect CRM's security</span></span>](#priv-aspnet)</li></ul> |
| <span data-ttu-id="6a6cd-110">**Azure Data Factory**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-110">**Azure Data Factory**</span></span> | <ul><li>[<span data-ttu-id="6a6cd-111">Usar o Gateway de Gerenciamento de Dados durante a conexão local do SQL Server com o Azure Data Factory</span><span class="sxs-lookup"><span data-stu-id="6a6cd-111">Use Data management gateway while connecting On Prem SQL Server to Azure Data Factory</span></span>](#sqlserver-factory)</li></ul> |
| <span data-ttu-id="6a6cd-112">**Identity Server**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-112">**Identity Server**</span></span> | <ul><li>[<span data-ttu-id="6a6cd-113">Garantir que todo o tráfego para o servidor de identidade passe pela conexão HTTPS</span><span class="sxs-lookup"><span data-stu-id="6a6cd-113">Ensure that all traffic to Identity Server is over HTTPS connection</span></span>](#identity-https)</li></ul> |
| <span data-ttu-id="6a6cd-114">**Aplicativo Web**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-114">**Web Application**</span></span> | <ul><li>[<span data-ttu-id="6a6cd-115">Verificar os certificados x. 509 usados para autenticar conexões SSL, TLS e DTLS</span><span class="sxs-lookup"><span data-stu-id="6a6cd-115">Verify X.509 certificates used to authenticate SSL, TLS, and DTLS connections</span></span>](#x509-ssltls)</li><li>[<span data-ttu-id="6a6cd-116">Configurar um certificado SSL para um domínio personalizado no Serviço de Aplicativo do Azure</span><span class="sxs-lookup"><span data-stu-id="6a6cd-116">Configure SSL certificate for custom domain in Azure App Service</span></span>](#ssl-appservice)</li><li>[<span data-ttu-id="6a6cd-117">Forçar todo o tráfego para o Serviço de Aplicativo do Azure pela conexão HTTPS</span><span class="sxs-lookup"><span data-stu-id="6a6cd-117">Force all traffic to Azure App Service over HTTPS connection</span></span>](#appservice-https)</li><li>[<span data-ttu-id="6a6cd-118">Habilitar HSTS (Segurança de Transporte Estrito HTTP)</span><span class="sxs-lookup"><span data-stu-id="6a6cd-118">Enable HTTP Strict Transport Security (HSTS)</span></span>](#http-hsts)</li></ul> |
| <span data-ttu-id="6a6cd-119">**Banco de dados**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-119">**Database**</span></span> | <ul><li>[<span data-ttu-id="6a6cd-120">Garantir a validação de certificado e a criptografia da conexão do SQL Server</span><span class="sxs-lookup"><span data-stu-id="6a6cd-120">Ensure SQL server connection encryption and certificate validation</span></span>](#sqlserver-validation)</li><li>[<span data-ttu-id="6a6cd-121">Forçar a comunicação criptografada para o SQL Server</span><span class="sxs-lookup"><span data-stu-id="6a6cd-121">Force Encrypted communication to SQL server</span></span>](#encrypted-sqlserver)</li></ul> |
| <span data-ttu-id="6a6cd-122">**Armazenamento do Azure**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-122">**Azure Storage**</span></span> | <ul><li>[<span data-ttu-id="6a6cd-123">Garantir que as comunicações para o Armazenamento do Azure sejam feitas via HTTPS</span><span class="sxs-lookup"><span data-stu-id="6a6cd-123">Ensure that communication to Azure Storage is over HTTPS</span></span>](#comm-storage)</li><li>[<span data-ttu-id="6a6cd-124">Validar o hash MD5 depois de baixar o blob se o HTTPS não puder ser habilitado</span><span class="sxs-lookup"><span data-stu-id="6a6cd-124">Validate MD5 hash after downloading blob if HTTPS cannot be enabled</span></span>](#md5-https)</li><li>[<span data-ttu-id="6a6cd-125">Use um cliente em conformidade com SMB 3.0 para garantir a criptografia de dados em trânsito para os compartilhamentos de arquivos do Azure</span><span class="sxs-lookup"><span data-stu-id="6a6cd-125">Use SMB 3.0 compatible client to ensure in-transit data encryption to Azure File Shares</span></span>](#smb-shares)</li></ul> |
| <span data-ttu-id="6a6cd-126">**Cliente móvel**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-126">**Mobile Client**</span></span> | <ul><li>[<span data-ttu-id="6a6cd-127">Implementar a anexação de certificado</span><span class="sxs-lookup"><span data-stu-id="6a6cd-127">Implement Certificate Pinning</span></span>](#cert-pinning)</li></ul> |
| <span data-ttu-id="6a6cd-128">**WCF**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-128">**WCF**</span></span> | <ul><li>[<span data-ttu-id="6a6cd-129">Habilitar HTTPS - proteger o canal de transporte</span><span class="sxs-lookup"><span data-stu-id="6a6cd-129">Enable HTTPS - Secure Transport channel</span></span>](#https-transport)</li><li>[<span data-ttu-id="6a6cd-130">WCF: definir o nível de proteção da segurança de mensagens como EncryptAndSign</span><span class="sxs-lookup"><span data-stu-id="6a6cd-130">WCF: Set Message security Protection level to EncryptAndSign</span></span>](#message-protection)</li><li>[<span data-ttu-id="6a6cd-131">WCF: use uma conta com privilégios mínimos para executar o serviço WCF</span><span class="sxs-lookup"><span data-stu-id="6a6cd-131">WCF: Use a least-privileged account to run your WCF service</span></span>](#least-account-wcf)</li></ul> |
| <span data-ttu-id="6a6cd-132">**API da Web**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-132">**Web API**</span></span> | <ul><li>[<span data-ttu-id="6a6cd-133">Forçar todo o tráfego para APIs Web pela conexão HTTPS</span><span class="sxs-lookup"><span data-stu-id="6a6cd-133">Force all traffic to Web APIs over HTTPS connection</span></span>](#webapi-https)</li></ul> |
| <span data-ttu-id="6a6cd-134">**Cache Redis do Azure**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-134">**Azure Redis Cache**</span></span> | <ul><li>[<span data-ttu-id="6a6cd-135">Garantir que as comunicações para o Cache Redis do Azure sejam feitas via SSL</span><span class="sxs-lookup"><span data-stu-id="6a6cd-135">Ensure that communication to Azure Redis Cache is over SSL</span></span>](#redis-ssl)</li></ul> |
| <span data-ttu-id="6a6cd-136">**Gateway de Campo de IoT**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-136">**IoT Field Gateway**</span></span> | <ul><li>[<span data-ttu-id="6a6cd-137">Proteger dispositivo para comunicações do Gateway de Campo</span><span class="sxs-lookup"><span data-stu-id="6a6cd-137">Secure Device to Field Gateway communication</span></span>](#device-field)</li></ul> |
| <span data-ttu-id="6a6cd-138">**Gateway de Nuvem IoT**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-138">**IoT Cloud Gateway**</span></span> | <ul><li>[<span data-ttu-id="6a6cd-139">Proteger o dispositivo para comunicações do Gateway de Nuvem usando SSL/TLS</span><span class="sxs-lookup"><span data-stu-id="6a6cd-139">Secure Device to Cloud Gateway communication using SSL/TLS</span></span>](#device-cloud)</li></ul> |

## <span data-ttu-id="6a6cd-140"><a id="comm-ssltls"></a>Proteger comunicações para o Hub de Eventos usando SSL/TLS</span><span class="sxs-lookup"><span data-stu-id="6a6cd-140"><a id="comm-ssltls"></a>Secure communication to Event Hub using SSL/TLS</span></span>

| <span data-ttu-id="6a6cd-141">Title</span><span class="sxs-lookup"><span data-stu-id="6a6cd-141">Title</span></span>                   | <span data-ttu-id="6a6cd-142">Detalhes</span><span class="sxs-lookup"><span data-stu-id="6a6cd-142">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="6a6cd-143">**Componente**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-143">**Component**</span></span>               | <span data-ttu-id="6a6cd-144">Hub de Eventos do Azure</span><span class="sxs-lookup"><span data-stu-id="6a6cd-144">Azure Event Hub</span></span> | 
| <span data-ttu-id="6a6cd-145">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-145">**SDL Phase**</span></span>               | <span data-ttu-id="6a6cd-146">Compilação</span><span class="sxs-lookup"><span data-stu-id="6a6cd-146">Build</span></span> |  
| <span data-ttu-id="6a6cd-147">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-147">**Applicable Technologies**</span></span> | <span data-ttu-id="6a6cd-148">Genérico</span><span class="sxs-lookup"><span data-stu-id="6a6cd-148">Generic</span></span> |
| <span data-ttu-id="6a6cd-149">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-149">**Attributes**</span></span>              | <span data-ttu-id="6a6cd-150">N/D</span><span class="sxs-lookup"><span data-stu-id="6a6cd-150">N/A</span></span>  |
| <span data-ttu-id="6a6cd-151">**Referências**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-151">**References**</span></span>              | [<span data-ttu-id="6a6cd-152">Visão geral do modelo de autenticação e segurança dos Hubs de Eventos</span><span class="sxs-lookup"><span data-stu-id="6a6cd-152">Event Hubs authentication and security model overview</span></span>](https://azure.microsoft.com/documentation/articles/event-hubs-authentication-and-security-model-overview/) |
| <span data-ttu-id="6a6cd-153">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-153">**Steps**</span></span> | <span data-ttu-id="6a6cd-154">Proteja conexões AMQP ou HTTP com o Hub de Eventos usando SSL/TLS</span><span class="sxs-lookup"><span data-stu-id="6a6cd-154">Secure AMQP or HTTP connections to Event Hub using SSL/TLS</span></span> |

## <span data-ttu-id="6a6cd-155"><a id="priv-aspnet"></a>Verificar se os privilégios da conta do serviço e verificar se os serviços ou páginas ASP.NET personalizados respeitam a segurança do CRM</span><span class="sxs-lookup"><span data-stu-id="6a6cd-155"><a id="priv-aspnet"></a>Check service account privileges and check that the custom Services or ASP.NET Pages respect CRM's security</span></span>

| <span data-ttu-id="6a6cd-156">Title</span><span class="sxs-lookup"><span data-stu-id="6a6cd-156">Title</span></span>                   | <span data-ttu-id="6a6cd-157">Detalhes</span><span class="sxs-lookup"><span data-stu-id="6a6cd-157">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="6a6cd-158">**Componente**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-158">**Component**</span></span>               | <span data-ttu-id="6a6cd-159">Dynamics CRM</span><span class="sxs-lookup"><span data-stu-id="6a6cd-159">Dynamics CRM</span></span> | 
| <span data-ttu-id="6a6cd-160">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-160">**SDL Phase**</span></span>               | <span data-ttu-id="6a6cd-161">Compilação</span><span class="sxs-lookup"><span data-stu-id="6a6cd-161">Build</span></span> |  
| <span data-ttu-id="6a6cd-162">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-162">**Applicable Technologies**</span></span> | <span data-ttu-id="6a6cd-163">Genérico</span><span class="sxs-lookup"><span data-stu-id="6a6cd-163">Generic</span></span> |
| <span data-ttu-id="6a6cd-164">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-164">**Attributes**</span></span>              | <span data-ttu-id="6a6cd-165">N/D</span><span class="sxs-lookup"><span data-stu-id="6a6cd-165">N/A</span></span>  |
| <span data-ttu-id="6a6cd-166">**Referências**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-166">**References**</span></span>              | <span data-ttu-id="6a6cd-167">N/D</span><span class="sxs-lookup"><span data-stu-id="6a6cd-167">N/A</span></span>  |
| <span data-ttu-id="6a6cd-168">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-168">**Steps**</span></span> | <span data-ttu-id="6a6cd-169">Verifique se os privilégios da conta do serviço e verifique se os serviços ou páginas ASP.NET personalizados respeitam a segurança do CRM.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-169">Check service account privileges and check that the custom Services or ASP.NET Pages respect CRM's security</span></span> |

## <span data-ttu-id="6a6cd-170"><a id="sqlserver-factory"></a>Usar o Gateway de Gerenciamento de Dados durante a conexão local do SQL Server com o Azure Data Factory</span><span class="sxs-lookup"><span data-stu-id="6a6cd-170"><a id="sqlserver-factory"></a>Use Data management gateway while connecting On Prem SQL Server to Azure Data Factory</span></span>

| <span data-ttu-id="6a6cd-171">Title</span><span class="sxs-lookup"><span data-stu-id="6a6cd-171">Title</span></span>                   | <span data-ttu-id="6a6cd-172">Detalhes</span><span class="sxs-lookup"><span data-stu-id="6a6cd-172">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="6a6cd-173">**Componente**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-173">**Component**</span></span>               | <span data-ttu-id="6a6cd-174">Fábrica de dados do Azure</span><span class="sxs-lookup"><span data-stu-id="6a6cd-174">Azure Data Factory</span></span> | 
| <span data-ttu-id="6a6cd-175">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-175">**SDL Phase**</span></span>               | <span data-ttu-id="6a6cd-176">Implantação</span><span class="sxs-lookup"><span data-stu-id="6a6cd-176">Deployment</span></span> |  
| <span data-ttu-id="6a6cd-177">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-177">**Applicable Technologies**</span></span> | <span data-ttu-id="6a6cd-178">Genérico</span><span class="sxs-lookup"><span data-stu-id="6a6cd-178">Generic</span></span> |
| <span data-ttu-id="6a6cd-179">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-179">**Attributes**</span></span>              | <span data-ttu-id="6a6cd-180">Tipos de serviços vinculados - no Azure e localmente</span><span class="sxs-lookup"><span data-stu-id="6a6cd-180">Linked Service Types - Azure and On Prem</span></span> |
| <span data-ttu-id="6a6cd-181">**Referências**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-181">**References**</span></span>              |<span data-ttu-id="6a6cd-182">[Movendo dados entre o armazenamento local e o Azure Data Factory](https://azure.microsoft.com/documentation/articles/data-factory-move-data-between-onprem-and-cloud/#create-gateway), [Gateway de Gerenciamento de Dados](https://azure.microsoft.com/documentation/articles/data-factory-data-management-gateway/)</span><span class="sxs-lookup"><span data-stu-id="6a6cd-182">[ Moving data between On Prem and Azure Data Factory](https://azure.microsoft.com/documentation/articles/data-factory-move-data-between-onprem-and-cloud/#create-gateway), [Data management gateway](https://azure.microsoft.com/documentation/articles/data-factory-data-management-gateway/)</span></span> |
| <span data-ttu-id="6a6cd-183">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-183">**Steps**</span></span> | <p><span data-ttu-id="6a6cd-184">A ferramenta Gateway de Gerenciamento de Dados (DMG) é necessária para conectar fontes de dados protegidas por um firewall ou pela rede corporativa.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-184">The Data Management Gateway (DMG) tool is required to connect to data sources which are protected behind corpnet or a firewall.</span></span></p><ol><li><span data-ttu-id="6a6cd-185">Blindar a máquina isola a ferramenta DMG e evita que programas com defeito danifiquem ou espionem o computador da fonte de dados.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-185">Locking down the machine isolates the DMG tool and prevents malfunctioning programs from damaging or snooping on the data source machine.</span></span> <span data-ttu-id="6a6cd-186">Por exemplo,</span><span class="sxs-lookup"><span data-stu-id="6a6cd-186">(E.g.</span></span> <span data-ttu-id="6a6cd-187">instalando das atualizações mais recentes, habilitando o mínimo necessário de portas, provisionando contas controladas, habilitando a auditoria, habilitando a criptografia de disco, etc.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-187">latest updates must be installed, enable minimum required ports, controlled accounts provisioning, auditing enabled, disk encryption enabled etc.)</span></span></li><li><span data-ttu-id="6a6cd-188">A chave do Gateway de Dados precisa ser trocada em intervalos frequentes ou sempre que a senha da conta do serviço do DMG for renovada.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-188">Data Gateway key must be rotated at frequent intervals or whenever the DMG service account password renews</span></span></li><li><span data-ttu-id="6a6cd-189">O tráfego de dados pelo serviço de vinculação deve ser criptografado.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-189">Data transits through Link Service must be encrypted</span></span></li></ol> |

## <span data-ttu-id="6a6cd-190"><a id="identity-https"></a>Garantir que todo o tráfego para o servidor de identidade passe pela conexão HTTPS</span><span class="sxs-lookup"><span data-stu-id="6a6cd-190"><a id="identity-https"></a>Ensure that all traffic to Identity Server is over HTTPS connection</span></span>

| <span data-ttu-id="6a6cd-191">Title</span><span class="sxs-lookup"><span data-stu-id="6a6cd-191">Title</span></span>                   | <span data-ttu-id="6a6cd-192">Detalhes</span><span class="sxs-lookup"><span data-stu-id="6a6cd-192">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="6a6cd-193">**Componente**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-193">**Component**</span></span>               | <span data-ttu-id="6a6cd-194">Servidor de Identidade</span><span class="sxs-lookup"><span data-stu-id="6a6cd-194">Identity Server</span></span> | 
| <span data-ttu-id="6a6cd-195">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-195">**SDL Phase**</span></span>               | <span data-ttu-id="6a6cd-196">Implantação</span><span class="sxs-lookup"><span data-stu-id="6a6cd-196">Deployment</span></span> |  
| <span data-ttu-id="6a6cd-197">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-197">**Applicable Technologies**</span></span> | <span data-ttu-id="6a6cd-198">Genérico</span><span class="sxs-lookup"><span data-stu-id="6a6cd-198">Generic</span></span> |
| <span data-ttu-id="6a6cd-199">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-199">**Attributes**</span></span>              | <span data-ttu-id="6a6cd-200">N/D</span><span class="sxs-lookup"><span data-stu-id="6a6cd-200">N/A</span></span>  |
| <span data-ttu-id="6a6cd-201">**Referências**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-201">**References**</span></span>              | <span data-ttu-id="6a6cd-202">[IdentityServer3 - chaves, assinaturas e criptografia](https://identityserver.github.io/Documentation/docsv2/configuration/crypto.html), [IdentityServer3 - implantação](https://identityserver.github.io/Documentation/docsv2/advanced/deployment.html)</span><span class="sxs-lookup"><span data-stu-id="6a6cd-202">[IdentityServer3 - Keys, Signatures and Cryptography](https://identityserver.github.io/Documentation/docsv2/configuration/crypto.html), [IdentityServer3 - Deployment](https://identityserver.github.io/Documentation/docsv2/advanced/deployment.html)</span></span> |
| <span data-ttu-id="6a6cd-203">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-203">**Steps**</span></span> | <span data-ttu-id="6a6cd-204">Por padrão, o IdentityServer exige que todas as conexões de entrada sejam feitas via HTTPS.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-204">By default, IdentityServer requires all incoming connections to come over HTTPS.</span></span> <span data-ttu-id="6a6cd-205">É absolutamente obrigatório que a comunicação com IdentityServer seja feita apenas transportes protegidos.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-205">It is absolutely mandatory that communication with IdentityServer is done over secured transports only.</span></span> <span data-ttu-id="6a6cd-206">Em alguns cenários de implantação, como o de descarregamento de SSL, esse requisito pode ser relaxado.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-206">There are certain deployment scenarios like SSL offloading where this requirement can be relaxed.</span></span> <span data-ttu-id="6a6cd-207">Consulte a página de implantação do Servidor de identidade indicada nas referências para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-207">See the Identity Server deployment page in the references for more information.</span></span> |

## <span data-ttu-id="6a6cd-208"><a id="x509-ssltls"></a>Verificar os certificados x. 509 usados para autenticar conexões SSL, TLS e DTLS</span><span class="sxs-lookup"><span data-stu-id="6a6cd-208"><a id="x509-ssltls"></a>Verify X.509 certificates used to authenticate SSL, TLS, and DTLS connections</span></span>

| <span data-ttu-id="6a6cd-209">Title</span><span class="sxs-lookup"><span data-stu-id="6a6cd-209">Title</span></span>                   | <span data-ttu-id="6a6cd-210">Detalhes</span><span class="sxs-lookup"><span data-stu-id="6a6cd-210">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="6a6cd-211">**Componente**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-211">**Component**</span></span>               | <span data-ttu-id="6a6cd-212">Aplicativo Web</span><span class="sxs-lookup"><span data-stu-id="6a6cd-212">Web Application</span></span> | 
| <span data-ttu-id="6a6cd-213">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-213">**SDL Phase**</span></span>               | <span data-ttu-id="6a6cd-214">Compilação</span><span class="sxs-lookup"><span data-stu-id="6a6cd-214">Build</span></span> |  
| <span data-ttu-id="6a6cd-215">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-215">**Applicable Technologies**</span></span> | <span data-ttu-id="6a6cd-216">Genérico</span><span class="sxs-lookup"><span data-stu-id="6a6cd-216">Generic</span></span> |
| <span data-ttu-id="6a6cd-217">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-217">**Attributes**</span></span>              | <span data-ttu-id="6a6cd-218">N/D</span><span class="sxs-lookup"><span data-stu-id="6a6cd-218">N/A</span></span>  |
| <span data-ttu-id="6a6cd-219">**Referências**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-219">**References**</span></span>              | <span data-ttu-id="6a6cd-220">N/D</span><span class="sxs-lookup"><span data-stu-id="6a6cd-220">N/A</span></span>  |
| <span data-ttu-id="6a6cd-221">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-221">**Steps**</span></span> | <p><span data-ttu-id="6a6cd-222">Os aplicativos que usam SSL, TLS ou DTLS devem verificar os certificados X.509 das entidades a que se conectarem.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-222">Applications that use SSL, TLS, or DTLS must fully verify the X.509 certificates of the entities they connect to.</span></span> <span data-ttu-id="6a6cd-223">Isso inclui a verificação dos certificados para:</span><span class="sxs-lookup"><span data-stu-id="6a6cd-223">This includes verification of the certificates for:</span></span></p><ul><li><span data-ttu-id="6a6cd-224">Nome de domínio</span><span class="sxs-lookup"><span data-stu-id="6a6cd-224">Domain name</span></span></li><li><span data-ttu-id="6a6cd-225">Datas de validade (datas de início e vencimento)</span><span class="sxs-lookup"><span data-stu-id="6a6cd-225">Validity dates (both beginning and expiration dates)</span></span></li><li><span data-ttu-id="6a6cd-226">Status de revogação</span><span class="sxs-lookup"><span data-stu-id="6a6cd-226">Revocation status</span></span></li><li><span data-ttu-id="6a6cd-227">Uso (por exemplo, autenticação de servidor para servidores de autenticação de cliente para clientes)</span><span class="sxs-lookup"><span data-stu-id="6a6cd-227">Usage (for example, Server Authentication for servers, Client Authentication for clients)</span></span></li><li><span data-ttu-id="6a6cd-228">Cadeia de confiança</span><span class="sxs-lookup"><span data-stu-id="6a6cd-228">Trust chain.</span></span> <span data-ttu-id="6a6cd-229">(os certificados devem estar vinculados a uma autoridade de certificação (CA) raiz de confiança da plataforma ou serem configurados explicitamente pelo administrador)</span><span class="sxs-lookup"><span data-stu-id="6a6cd-229">Certificates must chain to a root certification authority (CA) that is trusted by the platform or explicitly configured by the administrator</span></span></li><li><span data-ttu-id="6a6cd-230">O comprimento da chave pública do certificado deve ser maior que 2.048 bits</span><span class="sxs-lookup"><span data-stu-id="6a6cd-230">Key length of certificate's public key must be >2048 bits</span></span></li><li><span data-ttu-id="6a6cd-231">Algoritmo de hash deve ser SHA256 e superior</span><span class="sxs-lookup"><span data-stu-id="6a6cd-231">Hashing algorithm must be SHA256 and above</span></span> |

## <span data-ttu-id="6a6cd-232"><a id="ssl-appservice"></a>Configurar um certificado SSL para um domínio personalizado no Serviço de Aplicativo do Azure</span><span class="sxs-lookup"><span data-stu-id="6a6cd-232"><a id="ssl-appservice"></a>Configure SSL certificate for custom domain in Azure App Service</span></span>

| <span data-ttu-id="6a6cd-233">Title</span><span class="sxs-lookup"><span data-stu-id="6a6cd-233">Title</span></span>                   | <span data-ttu-id="6a6cd-234">Detalhes</span><span class="sxs-lookup"><span data-stu-id="6a6cd-234">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="6a6cd-235">**Componente**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-235">**Component**</span></span>               | <span data-ttu-id="6a6cd-236">Aplicativo Web</span><span class="sxs-lookup"><span data-stu-id="6a6cd-236">Web Application</span></span> | 
| <span data-ttu-id="6a6cd-237">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-237">**SDL Phase**</span></span>               | <span data-ttu-id="6a6cd-238">Compilação</span><span class="sxs-lookup"><span data-stu-id="6a6cd-238">Build</span></span> |  
| <span data-ttu-id="6a6cd-239">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-239">**Applicable Technologies**</span></span> | <span data-ttu-id="6a6cd-240">Genérico</span><span class="sxs-lookup"><span data-stu-id="6a6cd-240">Generic</span></span> |
| <span data-ttu-id="6a6cd-241">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-241">**Attributes**</span></span>              | <span data-ttu-id="6a6cd-242">Tipo de ambiente - Azure</span><span class="sxs-lookup"><span data-stu-id="6a6cd-242">EnvironmentType - Azure</span></span> |
| <span data-ttu-id="6a6cd-243">**Referências**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-243">**References**</span></span>              | [<span data-ttu-id="6a6cd-244">Habilitar HTTPS para um aplicativo no Serviço de Aplicativo do Azure</span><span class="sxs-lookup"><span data-stu-id="6a6cd-244">Enable HTTPS for an app in Azure App Service</span></span>](https://azure.microsoft.com/documentation/articles/web-sites-configure-ssl-certificate/) |
| <span data-ttu-id="6a6cd-245">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-245">**Steps**</span></span> | <span data-ttu-id="6a6cd-246">Por padrão, o Azure já habilita o HTTPS para todos os aplicativos com um certificado curinga para o domínio *.azurewebsites.net.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-246">By default, Azure already enables HTTPS for every app with a wildcard certificate for the *.azurewebsites.net domain.</span></span> <span data-ttu-id="6a6cd-247">No entanto, assim como todos os domínios curinga, ele não é tão seguro quanto usar um domínio personalizado com seu próprio certificado. [Consulte este artigo](https://casecurity.org/2014/02/26/pros-and-cons-of-single-domain-multi-domain-and-wildcard-certificates/).</span><span class="sxs-lookup"><span data-stu-id="6a6cd-247">However, like all wildcard domains, it is not as secure as using a custom domain with own certificate [Refer](https://casecurity.org/2014/02/26/pros-and-cons-of-single-domain-multi-domain-and-wildcard-certificates/).</span></span> <span data-ttu-id="6a6cd-248">É recomendável habilitar o SSL para o domínio personalizado pelo qual o aplicativo implantado será acessado.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-248">It is recommended to enable SSL for the custom domain which the deployed app will be accessed through</span></span>|

## <span data-ttu-id="6a6cd-249"><a id="appservice-https"></a>Forçar todo o tráfego para o Serviço de Aplicativo do Azure pela conexão HTTPS</span><span class="sxs-lookup"><span data-stu-id="6a6cd-249"><a id="appservice-https"></a>Force all traffic to Azure App Service over HTTPS connection</span></span>

| <span data-ttu-id="6a6cd-250">Title</span><span class="sxs-lookup"><span data-stu-id="6a6cd-250">Title</span></span>                   | <span data-ttu-id="6a6cd-251">Detalhes</span><span class="sxs-lookup"><span data-stu-id="6a6cd-251">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="6a6cd-252">**Componente**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-252">**Component**</span></span>               | <span data-ttu-id="6a6cd-253">Aplicativo Web</span><span class="sxs-lookup"><span data-stu-id="6a6cd-253">Web Application</span></span> | 
| <span data-ttu-id="6a6cd-254">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-254">**SDL Phase**</span></span>               | <span data-ttu-id="6a6cd-255">Compilação</span><span class="sxs-lookup"><span data-stu-id="6a6cd-255">Build</span></span> |  
| <span data-ttu-id="6a6cd-256">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-256">**Applicable Technologies**</span></span> | <span data-ttu-id="6a6cd-257">Genérico</span><span class="sxs-lookup"><span data-stu-id="6a6cd-257">Generic</span></span> |
| <span data-ttu-id="6a6cd-258">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-258">**Attributes**</span></span>              | <span data-ttu-id="6a6cd-259">Tipo de ambiente - Azure</span><span class="sxs-lookup"><span data-stu-id="6a6cd-259">EnvironmentType - Azure</span></span> |
| <span data-ttu-id="6a6cd-260">**Referências**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-260">**References**</span></span>              | <span data-ttu-id="6a6cd-261">[Impor o HTTPS no Serviço de Aplicativo do Azure]https://azure.microsoft.com/documentation/articles/web-sites-configure-ssl-certificate/#4-enforce-https-on-your-app</span><span class="sxs-lookup"><span data-stu-id="6a6cd-261">[Enforce HTTPS on Azure App Service]https://azure.microsoft.com/documentation/articles/web-sites-configure-ssl-certificate/#4-enforce-https-on-your-app)</span></span> |
| <span data-ttu-id="6a6cd-262">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-262">**Steps**</span></span> | <p><span data-ttu-id="6a6cd-263">Embora os Serviços de Aplicativos do Azure já habilite o HTTPS com um certificado curinga para o domínio *.azurewebsites.net, ele não impõe o HTPPS.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-263">Though Azure already enables HTTPS for Azure app services with a wildcard certificate for the domain *.azurewebsites.net, it do not enforce HTTPS.</span></span> <span data-ttu-id="6a6cd-264">Os visitantes podem continuar acessando o aplicativo com o HTTP, possibilitando que a segurança do aplicativo seja comprometida, por isso o HTTPS deve ser explicitamente imposto.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-264">Visitors may still access the app using HTTP, which may compromise the app's security and hence HTTPS has to be enforced explicitly.</span></span> <span data-ttu-id="6a6cd-265">Os aplicativos do ASP.NET MVC devem usar o [filtro RequireHttps](http://msdn.microsoft.com/library/system.web.mvc.requirehttpsattribute.aspx) que obriga uma solicitação HTTP desprotegida a ser reenviada pelo HTTPS.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-265">ASP.NET MVC applications should use the [RequireHttps filter](http://msdn.microsoft.com/library/system.web.mvc.requirehttpsattribute.aspx) that forces an unsecured HTTP request to be re-sent over HTTPS.</span></span></p><p><span data-ttu-id="6a6cd-266">O módulo de Reescrita de URL, incluído no Serviço de Aplicativo do Azure, também pode ser usado para impor o HTTPS.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-266">Alternatively, the URL Rewrite module, which is included with Azure App Service can be used to enforce HTTPS.</span></span> <span data-ttu-id="6a6cd-267">Esse módulo permite que desenvolvedores definam as regras aplicadas às solicitações recebidas antes que elas cheguem ao aplicativo.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-267">URL Rewrite module enables developers to define rules that are applied to incoming requests before the requests are handed to your application.</span></span> <span data-ttu-id="6a6cd-268">As regras de Reescrita de URL são definidas em um arquivo web.config, que fica armazenado na raiz do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-268">URL Rewrite rules are defined in a web.config file stored in the root of the application</span></span></p>|

### <a name="example"></a><span data-ttu-id="6a6cd-269">Exemplo</span><span class="sxs-lookup"><span data-stu-id="6a6cd-269">Example</span></span>
<span data-ttu-id="6a6cd-270">O exemplo abaixo contém uma regra básica de Reescrita de URL que força todo o tráfego de entrada a usar o protocolo HTTPS.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-270">The following example contains a basic URL Rewrite rule that forces all incoming traffic to use HTTPS</span></span>
```XML
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <system.webServer>
    <rewrite>
      <rules>
        <rule name="Force HTTPS" enabled="true">
          <match url="(.*)" ignoreCase="false" />
          <conditions>
            <add input="{HTTPS}" pattern="off" />
          </conditions>
          <action type="Redirect" url="https://{HTTP_HOST}/{R:1}" appendQueryString="true" redirectType="Permanent" />
        </rule>
      </rules>
    </rewrite>
  </system.webServer>
</configuration>
```
<span data-ttu-id="6a6cd-271">Essa regra funciona retornando um código de status de protocolo HTTP 301 (redirecionamento permanente) quando o usuário solicita uma página usando o protocolo HTTP.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-271">This rule works by returning an HTTP status code of 301 (permanent redirect) when the user requests a page using HTTP.</span></span> <span data-ttu-id="6a6cd-272">O 301 redireciona a solicitação para a mesma URL solicitada pelo visitante, mas substitui a parte do protocolo HTTP da solicitação com o protocolo HTTPS.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-272">The 301 redirects the request to the same URL as the visitor requested, but replaces the HTTP portion of the request with HTTPS.</span></span> <span data-ttu-id="6a6cd-273">Por exemplo, HTTP://contoso.com seria redirecionado para HTTPS://contoso.com.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-273">For example, HTTP://contoso.com would be redirected to HTTPS://contoso.com.</span></span> 

## <span data-ttu-id="6a6cd-274"><a id="http-hsts"></a>Habilitar HSTS (Segurança de Transporte Estrito HTTP)</span><span class="sxs-lookup"><span data-stu-id="6a6cd-274"><a id="http-hsts"></a>Enable HTTP Strict Transport Security (HSTS)</span></span>

| <span data-ttu-id="6a6cd-275">Title</span><span class="sxs-lookup"><span data-stu-id="6a6cd-275">Title</span></span>                   | <span data-ttu-id="6a6cd-276">Detalhes</span><span class="sxs-lookup"><span data-stu-id="6a6cd-276">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="6a6cd-277">**Componente**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-277">**Component**</span></span>               | <span data-ttu-id="6a6cd-278">Aplicativo Web</span><span class="sxs-lookup"><span data-stu-id="6a6cd-278">Web Application</span></span> | 
| <span data-ttu-id="6a6cd-279">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-279">**SDL Phase**</span></span>               | <span data-ttu-id="6a6cd-280">Compilação</span><span class="sxs-lookup"><span data-stu-id="6a6cd-280">Build</span></span> |  
| <span data-ttu-id="6a6cd-281">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-281">**Applicable Technologies**</span></span> | <span data-ttu-id="6a6cd-282">Genérico</span><span class="sxs-lookup"><span data-stu-id="6a6cd-282">Generic</span></span> |
| <span data-ttu-id="6a6cd-283">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-283">**Attributes**</span></span>              | <span data-ttu-id="6a6cd-284">N/D</span><span class="sxs-lookup"><span data-stu-id="6a6cd-284">N/A</span></span>  |
| <span data-ttu-id="6a6cd-285">**Referências**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-285">**References**</span></span>              | [<span data-ttu-id="6a6cd-286">Folha de dados do OWASP sobre Segurança de Transporte Estrito HTTP</span><span class="sxs-lookup"><span data-stu-id="6a6cd-286">OWASP HTTP Strict Transport Security Cheat Sheet</span></span>](https://www.owasp.org/index.php/HTTP_Strict_Transport_Security_Cheat_Sheet) |
| <span data-ttu-id="6a6cd-287">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-287">**Steps**</span></span> | <p><span data-ttu-id="6a6cd-288">A Segurança de Transporte Estrito HTTP (HSTS) é um aperfeiçoamento de segurança opcional, que é especificado por um aplicativo Web por meio de um cabeçalho de resposta especial.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-288">HTTP Strict Transport Security (HSTS) is an opt-in security enhancement that is specified by a web application through the use of a special response header.</span></span> <span data-ttu-id="6a6cd-289">Depois que um navegador em conformidade recebe o cabeçalho, esse navegador impede que todas as comunicações sejam enviadas pelo HTTP para o domínio especificado e envia todas as comunicações pelo HTTPS.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-289">Once a supported browser receives this header that browser will prevent any communications from being sent over HTTP to the specified domain and will instead send all communications over HTTPS.</span></span> <span data-ttu-id="6a6cd-290">Ele também impede cliques via HTTPS em prompts de navegadores.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-290">It also prevents HTTPS click through prompts on browsers.</span></span></p><p><span data-ttu-id="6a6cd-291">Para implementar a HSTS, o seguinte cabeçalho de resposta precisa ser configurado globalmente para um site, por meio de um código ou de um arquivo de configuração. A HSTS Strict-Transport-Security: max-age=300; includeSubDomains impede as seguintes ameaças:</span><span class="sxs-lookup"><span data-stu-id="6a6cd-291">To implement HSTS, the following response header has to be configured for a website globally, either in code or in config. Strict-Transport-Security: max-age=300; includeSubDomains HSTS addresses the following threats:</span></span></p><ul><li><span data-ttu-id="6a6cd-292">O usuário marca ou digita http://example.com e fica sujeito a um ataque MITM (man-in-the-middle): a HSTS automaticamente redireciona as solicitações de HTTP para HTTPS para o domínio de destino.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-292">User bookmarks or manually types http://example.com and is subject to a man-in-the-middle attacker: HSTS automatically redirects HTTP requests to HTTPS for the target domain</span></span></li><li><span data-ttu-id="6a6cd-293">O aplicativo da Web que se destina a ser puramente HTTPS acaba contendo links HTTP ou envia pelo HTTP: a HSTS automaticamente redireciona as solicitações de HTTP para HTTPS para o domínio de destino.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-293">Web application that is intended to be purely HTTPS inadvertently contains HTTP links or serves content over HTTP: HSTS automatically redirects HTTP requests to HTTPS for the target domain</span></span></li><li><span data-ttu-id="6a6cd-294">Um ataque MITM tenta interceptar o tráfego de um usuário utilizando um certificado inválido e espera que o usuário aceite o certificado incorreto: a HSTS não permite que um usuário substitua a mensagem de certificado inválido.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-294">A man-in-the-middle attacker attempts to intercept traffic from a victim user using an invalid certificate and hopes the user will accept the bad certificate: HSTS does not allow a user to override the invalid certificate message</span></span></li></ul>|

## <span data-ttu-id="6a6cd-295"><a id="sqlserver-validation"></a>Garantir a validação de certificado e a criptografia da conexão do SQL Server</span><span class="sxs-lookup"><span data-stu-id="6a6cd-295"><a id="sqlserver-validation"></a>Ensure SQL server connection encryption and certificate validation</span></span>

| <span data-ttu-id="6a6cd-296">Title</span><span class="sxs-lookup"><span data-stu-id="6a6cd-296">Title</span></span>                   | <span data-ttu-id="6a6cd-297">Detalhes</span><span class="sxs-lookup"><span data-stu-id="6a6cd-297">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="6a6cd-298">**Componente**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-298">**Component**</span></span>               | <span data-ttu-id="6a6cd-299">Banco de dados</span><span class="sxs-lookup"><span data-stu-id="6a6cd-299">Database</span></span> | 
| <span data-ttu-id="6a6cd-300">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-300">**SDL Phase**</span></span>               | <span data-ttu-id="6a6cd-301">Compilação</span><span class="sxs-lookup"><span data-stu-id="6a6cd-301">Build</span></span> |  
| <span data-ttu-id="6a6cd-302">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-302">**Applicable Technologies**</span></span> | <span data-ttu-id="6a6cd-303">SQL Azure</span><span class="sxs-lookup"><span data-stu-id="6a6cd-303">SQL Azure</span></span>  |
| <span data-ttu-id="6a6cd-304">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-304">**Attributes**</span></span>              | <span data-ttu-id="6a6cd-305">Versão do SQL - V12</span><span class="sxs-lookup"><span data-stu-id="6a6cd-305">SQL Version - V12</span></span> |
| <span data-ttu-id="6a6cd-306">**Referências**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-306">**References**</span></span>              | [<span data-ttu-id="6a6cd-307">Práticas recomendadas para escrever cadeias de caracteres de conexão seguras para o banco de dados SQL</span><span class="sxs-lookup"><span data-stu-id="6a6cd-307">Best Practices on Writing Secure Connection Strings for SQL Database</span></span>](http://social.technet.microsoft.com/wiki/contents/articles/2951.windows-azure-sql-database-connection-security.aspx#best) |
| <span data-ttu-id="6a6cd-308">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-308">**Steps**</span></span> | <p><span data-ttu-id="6a6cd-309">Todas as comunicações entre o banco de dados SQL e um aplicativo cliente são criptografadas usando Secure Sockets Layer (SSL) o tempo todo.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-309">All communications between SQL Database and a client application are encrypted using Secure Sockets Layer (SSL) at all times.</span></span> <span data-ttu-id="6a6cd-310">O banco de dados SQL não oferece suporte a conexões não criptografadas.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-310">SQL Database doesn’t support unencrypted connections.</span></span> <span data-ttu-id="6a6cd-311">Para validar certificados com o código do aplicativo ou as ferramentas, solicite explicitamente uma conexão criptografada e não confie nos certificados do servidor.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-311">To validate certificates with application code or tools, explicitly request an encrypted connection and do not trust the server certificates.</span></span> <span data-ttu-id="6a6cd-312">Se o código ou as ferramentas do aplicativo não solicitam uma conexão criptografada, eles continuarão receberão conexões criptografadas.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-312">If your application code or tools do not request an encrypted connection, they will still receive encrypted connections</span></span></p><p><span data-ttu-id="6a6cd-313">No entanto, eles não podem validar certificados de servidor e, portanto, ficarão suscetíveis a ataques de "man in the middle".</span><span class="sxs-lookup"><span data-stu-id="6a6cd-313">However, they may not validate the server certificates and thus will be susceptible to "man in the middle" attacks.</span></span> <span data-ttu-id="6a6cd-314">Para validar certificados com o código de aplicativo ADO.NET, defina `Encrypt=True` e `TrustServerCertificate=False` na cadeia de conexão de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-314">To validate certificates with ADO.NET application code, set `Encrypt=True` and `TrustServerCertificate=False` in the database connection string.</span></span> <span data-ttu-id="6a6cd-315">Para validar certificados por meio do SQL Server Management Studio, abra a caixa de diálogo Conectar ao Servidor.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-315">To validate certificates via SQL Server Management Studio, open the Connect to Server dialog box.</span></span> <span data-ttu-id="6a6cd-316">Na guia Propriedades da Conexão, clique em Criptografar conexão.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-316">Click Encrypt connection on the Connection Properties tab</span></span></p>|

## <span data-ttu-id="6a6cd-317"><a id="encrypted-sqlserver"></a>Forçar a comunicação criptografada para o SQL Server</span><span class="sxs-lookup"><span data-stu-id="6a6cd-317"><a id="encrypted-sqlserver"></a>Force Encrypted communication to SQL server</span></span>

| <span data-ttu-id="6a6cd-318">Title</span><span class="sxs-lookup"><span data-stu-id="6a6cd-318">Title</span></span>                   | <span data-ttu-id="6a6cd-319">Detalhes</span><span class="sxs-lookup"><span data-stu-id="6a6cd-319">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="6a6cd-320">**Componente**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-320">**Component**</span></span>               | <span data-ttu-id="6a6cd-321">Banco de dados</span><span class="sxs-lookup"><span data-stu-id="6a6cd-321">Database</span></span> | 
| <span data-ttu-id="6a6cd-322">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-322">**SDL Phase**</span></span>               | <span data-ttu-id="6a6cd-323">Compilação</span><span class="sxs-lookup"><span data-stu-id="6a6cd-323">Build</span></span> |  
| <span data-ttu-id="6a6cd-324">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-324">**Applicable Technologies**</span></span> | <span data-ttu-id="6a6cd-325">OnPrem</span><span class="sxs-lookup"><span data-stu-id="6a6cd-325">OnPrem</span></span> |
| <span data-ttu-id="6a6cd-326">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-326">**Attributes**</span></span>              | <span data-ttu-id="6a6cd-327">Versão do SQL - MsSQL2016, Versão do SQL - MsSQL2012, Versão do SQL - MsSQL2014</span><span class="sxs-lookup"><span data-stu-id="6a6cd-327">SQL Version - MsSQL2016, SQL Version - MsSQL2012, SQL Version - MsSQL2014</span></span> |
| <span data-ttu-id="6a6cd-328">**Referências**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-328">**References**</span></span>              | [<span data-ttu-id="6a6cd-329">Habilitar conexões criptografadas para o mecanismo de banco de dados</span><span class="sxs-lookup"><span data-stu-id="6a6cd-329">Enable Encrypted Connections to the Database Engine</span></span>](https://msdn.microsoft.com/library/ms191192)  |
| <span data-ttu-id="6a6cd-330">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-330">**Steps**</span></span> | <span data-ttu-id="6a6cd-331">Habilitar a criptografia SSL aumenta a segurança dos dados transmitidos pelas redes entre instâncias do SQL Server e aplicativos.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-331">Enabling SSL encryption increases the security of data transmitted across networks between instances of SQL Server and applications.</span></span> |

## <span data-ttu-id="6a6cd-332"><a id="comm-storage"></a>Garantir que as comunicações para o Armazenamento do Azure sejam feitas via HTTPS</span><span class="sxs-lookup"><span data-stu-id="6a6cd-332"><a id="comm-storage"></a>Ensure that communication to Azure Storage is over HTTPS</span></span>

| <span data-ttu-id="6a6cd-333">Title</span><span class="sxs-lookup"><span data-stu-id="6a6cd-333">Title</span></span>                   | <span data-ttu-id="6a6cd-334">Detalhes</span><span class="sxs-lookup"><span data-stu-id="6a6cd-334">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="6a6cd-335">**Componente**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-335">**Component**</span></span>               | <span data-ttu-id="6a6cd-336">Armazenamento do Azure</span><span class="sxs-lookup"><span data-stu-id="6a6cd-336">Azure Storage</span></span> | 
| <span data-ttu-id="6a6cd-337">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-337">**SDL Phase**</span></span>               | <span data-ttu-id="6a6cd-338">Implantação</span><span class="sxs-lookup"><span data-stu-id="6a6cd-338">Deployment</span></span> |  
| <span data-ttu-id="6a6cd-339">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-339">**Applicable Technologies**</span></span> | <span data-ttu-id="6a6cd-340">Genérico</span><span class="sxs-lookup"><span data-stu-id="6a6cd-340">Generic</span></span> |
| <span data-ttu-id="6a6cd-341">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-341">**Attributes**</span></span>              | <span data-ttu-id="6a6cd-342">N/D</span><span class="sxs-lookup"><span data-stu-id="6a6cd-342">N/A</span></span>  |
| <span data-ttu-id="6a6cd-343">**Referências**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-343">**References**</span></span>              | [<span data-ttu-id="6a6cd-344">Criptografia no nível do transporte do Armazenamento do Azure – usando HTTPS</span><span class="sxs-lookup"><span data-stu-id="6a6cd-344">Azure Storage Transport-Level Encryption – Using HTTPS</span></span>](https://azure.microsoft.com/documentation/articles/storage-security-guide/#_encryption-in-transit) |
| <span data-ttu-id="6a6cd-345">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-345">**Steps**</span></span> | <span data-ttu-id="6a6cd-346">Para garantir a segurança dos dados do Armazenamento do Azure que estão em trânsito, use sempre o protocolo HTTPS ao chamar APIs REST ou acessar objetos no armazenamento.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-346">To ensure the security of Azure Storage data in-transit, always use the HTTPS protocol when calling the REST APIs or accessing objects in storage.</span></span> <span data-ttu-id="6a6cd-347">Além disso, as Assinaturas de Acesso Compartilhado, que podem ser usadas para delegar acesso a objetos do Armazenamento do Azure, incluem uma opção para especificar que apenas o protocolo HTTPS seja utilizado com as Assinaturas de Acesso Compartilhado, garantindo que qualquer pessoa que envie links com tokens SAS usará o protocolo adequado.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-347">Also, Shared Access Signatures, which can be used to delegate access to Azure Storage objects, include an option to specify that only the HTTPS protocol can be used when using Shared Access Signatures, ensuring that anybody sending out links with SAS tokens will use the proper protocol.</span></span>|

## <span data-ttu-id="6a6cd-348"><a id="md5-https"></a>Validar o hash MD5 depois de baixar o blob se o HTTPS não puder ser habilitado</span><span class="sxs-lookup"><span data-stu-id="6a6cd-348"><a id="md5-https"></a>Validate MD5 hash after downloading blob if HTTPS cannot be enabled</span></span>

| <span data-ttu-id="6a6cd-349">Title</span><span class="sxs-lookup"><span data-stu-id="6a6cd-349">Title</span></span>                   | <span data-ttu-id="6a6cd-350">Detalhes</span><span class="sxs-lookup"><span data-stu-id="6a6cd-350">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="6a6cd-351">**Componente**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-351">**Component**</span></span>               | <span data-ttu-id="6a6cd-352">Armazenamento do Azure</span><span class="sxs-lookup"><span data-stu-id="6a6cd-352">Azure Storage</span></span> | 
| <span data-ttu-id="6a6cd-353">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-353">**SDL Phase**</span></span>               | <span data-ttu-id="6a6cd-354">Compilação</span><span class="sxs-lookup"><span data-stu-id="6a6cd-354">Build</span></span> |  
| <span data-ttu-id="6a6cd-355">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-355">**Applicable Technologies**</span></span> | <span data-ttu-id="6a6cd-356">Genérico</span><span class="sxs-lookup"><span data-stu-id="6a6cd-356">Generic</span></span> |
| <span data-ttu-id="6a6cd-357">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-357">**Attributes**</span></span>              | <span data-ttu-id="6a6cd-358">StorageType - Blob</span><span class="sxs-lookup"><span data-stu-id="6a6cd-358">StorageType - Blob</span></span> |
| <span data-ttu-id="6a6cd-359">**Referências**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-359">**References**</span></span>              | [<span data-ttu-id="6a6cd-360">Visão geral da MD5 do Blob do Azure</span><span class="sxs-lookup"><span data-stu-id="6a6cd-360">Windows Azure Blob MD5 Overview</span></span>](https://blogs.msdn.microsoft.com/windowsazurestorage/2011/02/17/windows-azure-blob-md5-overview/) |
| <span data-ttu-id="6a6cd-361">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-361">**Steps**</span></span> | <p><span data-ttu-id="6a6cd-362">O serviço Blob do Microsoft Azure fornece mecanismos para garantir a integridade dos dados no aplicativo e nas camadas de transporte.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-362">Windows Azure Blob service provides mechanisms to ensure data integrity both at the application and transport layers.</span></span> <span data-ttu-id="6a6cd-363">Se, por algum motivo, você precisar usar o HTTP em vez do HTTPS e estiver trabalhando com blobs de bloco, você poderá usar a verificação MD5 para ajudar a verificar a integridade dos blobs que estão sendo transferidos.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-363">If for any reason you need to use HTTP instead of HTTPS and you are working with block blobs, you can use MD5 checking to help verify the integrity of the blobs being transferred</span></span></p><p><span data-ttu-id="6a6cd-364">Isso ajudará na proteção contra erros na camada de rede/transporte, mas não necessariamente contra ataques de intermediários.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-364">This will help with protection from network/transport layer errors, but not necessarily with intermediary attacks.</span></span> <span data-ttu-id="6a6cd-365">Se você puder usar HTTPS, que fornece segurança em nível de transporte, o uso da verificação MD5 será redundante e desnecessário.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-365">If you can use HTTPS, which provides transport level security, then using MD5 checking is redundant and unnecessary.</span></span></p>|

## <span data-ttu-id="6a6cd-366"><a id="smb-shares"></a>Usar um cliente compatível com SMB 3.0 para garantir a criptografia de dados em trânsito para os compartilhamentos de arquivos do Azure</span><span class="sxs-lookup"><span data-stu-id="6a6cd-366"><a id="smb-shares"></a>Use SMB 3.0 compatible client to ensure in-transit data encryption to Azure File shares</span></span>

| <span data-ttu-id="6a6cd-367">Title</span><span class="sxs-lookup"><span data-stu-id="6a6cd-367">Title</span></span>                   | <span data-ttu-id="6a6cd-368">Detalhes</span><span class="sxs-lookup"><span data-stu-id="6a6cd-368">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="6a6cd-369">**Componente**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-369">**Component**</span></span>               | <span data-ttu-id="6a6cd-370">Cliente móvel</span><span class="sxs-lookup"><span data-stu-id="6a6cd-370">Mobile Client</span></span> | 
| <span data-ttu-id="6a6cd-371">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-371">**SDL Phase**</span></span>               | <span data-ttu-id="6a6cd-372">Compilação</span><span class="sxs-lookup"><span data-stu-id="6a6cd-372">Build</span></span> |  
| <span data-ttu-id="6a6cd-373">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-373">**Applicable Technologies**</span></span> | <span data-ttu-id="6a6cd-374">Genérico</span><span class="sxs-lookup"><span data-stu-id="6a6cd-374">Generic</span></span> |
| <span data-ttu-id="6a6cd-375">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-375">**Attributes**</span></span>              | <span data-ttu-id="6a6cd-376">Tipo de armazenamento - Arquivo</span><span class="sxs-lookup"><span data-stu-id="6a6cd-376">StorageType - File</span></span> |
| <span data-ttu-id="6a6cd-377">**Referências**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-377">**References**</span></span>              | <span data-ttu-id="6a6cd-378">[Armazenamento de Arquivos do Azure](https://azure.microsoft.com/blog/azure-file-storage-now-generally-available/#comment-2529238931), [Suporte do Armazenamento de Arquivos do Azure para SMB em clientes Windows](https://azure.microsoft.com/documentation/articles/storage-dotnet-how-to-use-files/#_mount-the-file-share)</span><span class="sxs-lookup"><span data-stu-id="6a6cd-378">[Azure File Storage](https://azure.microsoft.com/blog/azure-file-storage-now-generally-available/#comment-2529238931), [Azure File Storage SMB Support for Windows Clients](https://azure.microsoft.com/documentation/articles/storage-dotnet-how-to-use-files/#_mount-the-file-share)</span></span> |
| <span data-ttu-id="6a6cd-379">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-379">**Steps**</span></span> | <span data-ttu-id="6a6cd-380">O Armazenamento de Arquivos do Azure é compatível com HTTPS quando se usa a API REST, mas é mais frequentemente usado como um compartilhamento de arquivos SMB conectado a uma VM.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-380">Azure File Storage supports HTTPS when using the REST API, but is more commonly used as an SMB file share attached to a VM.</span></span> <span data-ttu-id="6a6cd-381">O SMB 2.1 não é compatível com a criptografia, de modo que as conexões só são permitidas dentro da mesma região no Azure.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-381">SMB 2.1 does not support encryption, so connections are only allowed within the same region in Azure.</span></span> <span data-ttu-id="6a6cd-382">No entanto, o SMB 3.0 é compatível com a criptografia e pode ser usado com o Windows Server 2012 R2, o Windows 8, o Windows 8.1 e o Windows 10, permitindo o acesso entre regiões e até mesmo o acesso à área de trabalho.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-382">However, SMB 3.0 supports encryption, and can be used with Windows Server 2012 R2, Windows 8, Windows 8.1, and Windows 10, allowing cross-region access and even access on the desktop.</span></span> |

## <span data-ttu-id="6a6cd-383"><a id="cert-pinning"></a>Implementar a anexação de certificado</span><span class="sxs-lookup"><span data-stu-id="6a6cd-383"><a id="cert-pinning"></a>Implement Certificate Pinning</span></span>

| <span data-ttu-id="6a6cd-384">Title</span><span class="sxs-lookup"><span data-stu-id="6a6cd-384">Title</span></span>                   | <span data-ttu-id="6a6cd-385">Detalhes</span><span class="sxs-lookup"><span data-stu-id="6a6cd-385">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="6a6cd-386">**Componente**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-386">**Component**</span></span>               | <span data-ttu-id="6a6cd-387">Armazenamento do Azure</span><span class="sxs-lookup"><span data-stu-id="6a6cd-387">Azure Storage</span></span> | 
| <span data-ttu-id="6a6cd-388">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-388">**SDL Phase**</span></span>               | <span data-ttu-id="6a6cd-389">Compilação</span><span class="sxs-lookup"><span data-stu-id="6a6cd-389">Build</span></span> |  
| <span data-ttu-id="6a6cd-390">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-390">**Applicable Technologies**</span></span> | <span data-ttu-id="6a6cd-391">Genérico, Windows Phone</span><span class="sxs-lookup"><span data-stu-id="6a6cd-391">Generic, Windows Phone</span></span> |
| <span data-ttu-id="6a6cd-392">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-392">**Attributes**</span></span>              | <span data-ttu-id="6a6cd-393">N/D</span><span class="sxs-lookup"><span data-stu-id="6a6cd-393">N/A</span></span>  |
| <span data-ttu-id="6a6cd-394">**Referências**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-394">**References**</span></span>              | [<span data-ttu-id="6a6cd-395">Anexação de chave pública e certificado</span><span class="sxs-lookup"><span data-stu-id="6a6cd-395">Certificate and Public Key Pinning</span></span>](https://www.owasp.org/index.php/Certificate_and_Public_Key_Pinning#.Net) |
| <span data-ttu-id="6a6cd-396">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-396">**Steps**</span></span> | <p><span data-ttu-id="6a6cd-397">A anexação de certificado protege contra ataques MITM (Man-In-The-Middle).</span><span class="sxs-lookup"><span data-stu-id="6a6cd-397">Certificate pinning defends against Man-In-The-Middle (MITM) attacks.</span></span> <span data-ttu-id="6a6cd-398">A anexação é o processo de associar um host com sua chave pública ou seu certificado X509 esperado.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-398">Pinning is the process of associating a host with their expected X509 certificate or public key.</span></span> <span data-ttu-id="6a6cd-399">Depois que um certificado ou uma chave pública forem conhecidas ou vistos para um host, o certificado ou a chave pública serão associados ou “anexados” ao host.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-399">Once a certificate or public key is known or seen for a host, the certificate or public key is associated or 'pinned' to the host.</span></span> </p><p><span data-ttu-id="6a6cd-400">Assim, quando um invasor tentar promover um ataque MITM SSL, durante o handshake do SSL, a chave do servidor do invasor será diferente da chave do certificado anexado, e a solicitação será descartada, impedindo que o certificado de MITM seja anexado com a implementação do delegado `ServerCertificateValidationCallback` do ServicePointManager.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-400">Thus, when an adversary attempts to do SSL MITM attack, during SSL handshake the key from attacker's server will be different from the pinned certificate's key, and the request will be discarded, thus preventing MITM Certificate pinning can be achieved by implementing ServicePointManager's `ServerCertificateValidationCallback` delegate.</span></span></p>|

### <a name="example"></a><span data-ttu-id="6a6cd-401">Exemplo</span><span class="sxs-lookup"><span data-stu-id="6a6cd-401">Example</span></span>
```C#
using System;
using System.Net;
using System.Net.Security;
using System.Security.Cryptography;

namespace CertificatePinningExample
{
    class CertificatePinningExample
    {
        /* Note: In this example, we're hardcoding a the certificate's public key and algorithm for 
           demonstration purposes. In a real-world application, this should be stored in a secure
           configuration area that can be updated as needed. */

        private static readonly string PINNED_ALGORITHM = "RSA";

        private static readonly string PINNED_PUBLIC_KEY = "3082010A0282010100B0E75B7CBE56D31658EF79B3A1" +
            "294D506A88DFCDD603F6EF15E7F5BCBDF32291EC50B2B82BA158E905FE6A83EE044A48258B07FAC3D6356AF09B2" +
            "3EDAB15D00507B70DB08DB9A20C7D1201417B3071A346D663A241061C151B6EC5B5B4ECCCDCDBEA24F051962809" +
            "FEC499BF2D093C06E3BDA7D0BB83CDC1C2C6660B8ECB2EA30A685ADE2DC83C88314010FFC7F4F0F895EDDBE5C02" +
            "ABF78E50B708E0A0EB984A9AA536BCE61A0C31DB95425C6FEE5A564B158EE7C4F0693C439AE010EF83CA8155750" +
            "09B17537C29F86071E5DD8CA50EBD8A409494F479B07574D83EDCE6F68A8F7D40447471D05BC3F5EAD7862FA748" +
            "EA3C92A60A128344B1CEF7A0B0D94E50203010001";


        public static void Main(string[] args)
        {
            HttpWebRequest request = (HttpWebRequest)WebRequest.Create("https://azure.microsoft.com");
            request.ServerCertificateValidationCallback = (sender, certificate, chain, sslPolicyErrors) =>
            {
                if (certificate == null || sslPolicyErrors != SslPolicyErrors.None)
                {
                    // Error getting certificate or the certificate failed basic validation
                    return false;
                }

                var targetKeyAlgorithm = new Oid(certificate.GetKeyAlgorithm()).FriendlyName;
                var targetPublicKey = certificate.GetPublicKeyString();
                
                if (targetKeyAlgorithm == PINNED_ALGORITHM &&
                    targetPublicKey == PINNED_PUBLIC_KEY)
                {
                    // Success, the certificate matches the pinned value.
                    return true;
                }
                // Reject, either the key or the algorithm does not match the expected value.
                return false;
            };

            try
            {
                var response = (HttpWebResponse)request.GetResponse();
                Console.WriteLine($"Success, HTTP status code: {response.StatusCode}");
            }
            catch(Exception ex)
            {
                Console.WriteLine($"Failure, {ex.Message}");
            }
            Console.WriteLine("Press any key to end.");
            Console.ReadKey();
        }
    }
}
```

## <span data-ttu-id="6a6cd-402"><a id="https-transport"></a>Habilitar HTTPS - proteger o canal de transporte</span><span class="sxs-lookup"><span data-stu-id="6a6cd-402"><a id="https-transport"></a>Enable HTTPS - Secure Transport channel</span></span>

| <span data-ttu-id="6a6cd-403">Title</span><span class="sxs-lookup"><span data-stu-id="6a6cd-403">Title</span></span>                   | <span data-ttu-id="6a6cd-404">Detalhes</span><span class="sxs-lookup"><span data-stu-id="6a6cd-404">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="6a6cd-405">**Componente**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-405">**Component**</span></span>               | <span data-ttu-id="6a6cd-406">WCF</span><span class="sxs-lookup"><span data-stu-id="6a6cd-406">WCF</span></span> | 
| <span data-ttu-id="6a6cd-407">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-407">**SDL Phase**</span></span>               | <span data-ttu-id="6a6cd-408">Compilação</span><span class="sxs-lookup"><span data-stu-id="6a6cd-408">Build</span></span> |  
| <span data-ttu-id="6a6cd-409">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-409">**Applicable Technologies**</span></span> | <span data-ttu-id="6a6cd-410">NET Framework 3</span><span class="sxs-lookup"><span data-stu-id="6a6cd-410">NET Framework 3</span></span> |
| <span data-ttu-id="6a6cd-411">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-411">**Attributes**</span></span>              | <span data-ttu-id="6a6cd-412">N/D</span><span class="sxs-lookup"><span data-stu-id="6a6cd-412">N/A</span></span>  |
| <span data-ttu-id="6a6cd-413">**Referências**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-413">**References**</span></span>              | <span data-ttu-id="6a6cd-414">[MSDN](https://msdn.microsoft.com/library/ff648500.aspx), [Fortify Kingdom](https://vulncat.fortify.com/en/vulncat/index.html)</span><span class="sxs-lookup"><span data-stu-id="6a6cd-414">[MSDN](https://msdn.microsoft.com/library/ff648500.aspx), [Fortify Kingdom](https://vulncat.fortify.com/en/vulncat/index.html)</span></span> |
| <span data-ttu-id="6a6cd-415">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-415">**Steps**</span></span> | <span data-ttu-id="6a6cd-416">A configuração do aplicativo deve garantir que o HTTPS seja usado para todos os acessos a informações confidenciais.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-416">The application configuration should ensure that HTTPS is used for all access to sensitive information.</span></span><ul><li><span data-ttu-id="6a6cd-417">**EXPLICAÇÃO:** se um aplicativo contiver informações confidenciais e não usar a criptografia no nível da mensagem, ele só poderá se comunicar por meio de um canal de transporte criptografado.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-417">**EXPLANATION:** If an application handles sensitive information and does not use message-level encryption, then it should only be allowed to communicate over an encrypted transport channel.</span></span></li><li><span data-ttu-id="6a6cd-418">**RECOMENDAÇÕES:** verifique se o transporte HTTP está desabilitado e habilite o transporte HTTPS em vez disso.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-418">**RECOMMENDATIONS:** Ensure that HTTP transport is disabled and enable HTTPS transport instead.</span></span> <span data-ttu-id="6a6cd-419">Por exemplo, substitua `<httpTransport/>` pela marcação `<httpsTransport/>`.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-419">For example, replace the `<httpTransport/>` with `<httpsTransport/>` tag.</span></span> <span data-ttu-id="6a6cd-420">Não confie em uma configuração de rede (firewall) para garantir que o aplicativo seja acessado apenas por um canal seguro.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-420">Do not rely on a network configuration (firewall) to guarantee that the application can only be accessed over a secure channel.</span></span> <span data-ttu-id="6a6cd-421">Do ponto de vista filosófico, o aplicativo não deve depender da rede para garantir sua segurança.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-421">From a philosophical point of view, the application should not depend on the network for its security.</span></span></li></ul><p><span data-ttu-id="6a6cd-422">Do ponto de vista prático, as pessoas responsáveis pela segurança da rede nem sempre monitoram os requisitos de segurança do aplicativo à medida que eles evoluem.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-422">From a practical point of view, the people responsible for securing the network do not always track the security requirements of the application as they evolve.</span></span></p>|

## <span data-ttu-id="6a6cd-423"><a id="message-protection"></a>WCF: definir o nível de proteção da segurança de mensagens como EncryptAndSign</span><span class="sxs-lookup"><span data-stu-id="6a6cd-423"><a id="message-protection"></a>WCF: Set Message security Protection level to EncryptAndSign</span></span>

| <span data-ttu-id="6a6cd-424">Title</span><span class="sxs-lookup"><span data-stu-id="6a6cd-424">Title</span></span>                   | <span data-ttu-id="6a6cd-425">Detalhes</span><span class="sxs-lookup"><span data-stu-id="6a6cd-425">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="6a6cd-426">**Componente**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-426">**Component**</span></span>               | <span data-ttu-id="6a6cd-427">WCF</span><span class="sxs-lookup"><span data-stu-id="6a6cd-427">WCF</span></span> | 
| <span data-ttu-id="6a6cd-428">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-428">**SDL Phase**</span></span>               | <span data-ttu-id="6a6cd-429">Compilação</span><span class="sxs-lookup"><span data-stu-id="6a6cd-429">Build</span></span> |  
| <span data-ttu-id="6a6cd-430">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-430">**Applicable Technologies**</span></span> | <span data-ttu-id="6a6cd-431">.NET Framework 3</span><span class="sxs-lookup"><span data-stu-id="6a6cd-431">.NET Framework 3</span></span> |
| <span data-ttu-id="6a6cd-432">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-432">**Attributes**</span></span>              | <span data-ttu-id="6a6cd-433">N/D</span><span class="sxs-lookup"><span data-stu-id="6a6cd-433">N/A</span></span>  |
| <span data-ttu-id="6a6cd-434">**Referências**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-434">**References**</span></span>              | [<span data-ttu-id="6a6cd-435">MSDN</span><span class="sxs-lookup"><span data-stu-id="6a6cd-435">MSDN</span></span>](https://msdn.microsoft.com/library/ff650862.aspx) |
| <span data-ttu-id="6a6cd-436">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-436">**Steps**</span></span> | <ul><li><span data-ttu-id="6a6cd-437">**EXPLICAÇÃO:** quando o nível de proteção estiver definido como "none", a proteção de mensagem será desabilitada.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-437">**EXPLANATION:** When Protection level is set to "none" it will disable message protection.</span></span> <span data-ttu-id="6a6cd-438">A confidencialidade e a integridade dos dados só são conquistadas com o nível apropriado de configuração.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-438">Confidentiality and integrity is achieved with appropriate level of setting.</span></span></li><li><span data-ttu-id="6a6cd-439">**RECOMENDAÇÕES:**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-439">**RECOMMENDATIONS:**</span></span><ul><li><span data-ttu-id="6a6cd-440">`Mode=None` - desabilita a proteção de mensagem</span><span class="sxs-lookup"><span data-stu-id="6a6cd-440">when `Mode=None` - Disables message protection</span></span></li><li><span data-ttu-id="6a6cd-441">`Mode=Sign` - assina, mas não criptografa a mensagem (deve ser usada quando a integridade dos dados for importante)</span><span class="sxs-lookup"><span data-stu-id="6a6cd-441">when `Mode=Sign` - Signs but does not encrypt the message; should be used when data integrity is important</span></span></li><li><span data-ttu-id="6a6cd-442">`Mode=EncryptAndSign` - assina e criptografa a mensagem</span><span class="sxs-lookup"><span data-stu-id="6a6cd-442">when `Mode=EncryptAndSign` - Signs and encrypts the message</span></span></li></ul></li></ul><p><span data-ttu-id="6a6cd-443">Considere desativar a criptografia e apenas assinar uma mensagem quando você só precisar validar a integridade das informações sem se preocupar com sua confidencialidade.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-443">Consider turning off encryption and only signing your message when you just need to validate the integrity of the information without concerns of confidentiality.</span></span> <span data-ttu-id="6a6cd-444">Isso pode ser útil para operações ou contratos de serviço nos quais você precisa validar o remetente original, mas que não transmitem dados confidenciais.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-444">This may be useful for operations or service contracts in which you need to validate the original sender but no sensitive data is transmitted.</span></span> <span data-ttu-id="6a6cd-445">Quando você reduzir o nível de proteção, certifique-se de que a mensagem não contenha informações de identificação pessoal (PII).</span><span class="sxs-lookup"><span data-stu-id="6a6cd-445">When reducing the protection level, be careful that the message does not contain any personally identifiable information (PII).</span></span></p>|

### <a name="example"></a><span data-ttu-id="6a6cd-446">Exemplo</span><span class="sxs-lookup"><span data-stu-id="6a6cd-446">Example</span></span>
<span data-ttu-id="6a6cd-447">A configuração do serviço e a operação de apenas assinar a mensagem são mostradas nos exemplos aabaixo.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-447">Configuring the service and the operation to only sign the message is shown in the following examples.</span></span> <span data-ttu-id="6a6cd-448">Exemplo de contrato de serviço de `ProtectionLevel.Sign`: o exemplo abaixo mostra o uso de ProtectionLevel.Sign no nível do contrato de serviço.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-448">Service Contract Example of `ProtectionLevel.Sign`: The following is an example of using ProtectionLevel.Sign at the Service Contract level:</span></span> 
```
[ServiceContract(Protection Level=ProtectionLevel.Sign] 
public interface IService 
  { 
  string GetData(int value); 
  } 
```

### <a name="example"></a><span data-ttu-id="6a6cd-449">Exemplo</span><span class="sxs-lookup"><span data-stu-id="6a6cd-449">Example</span></span>
<span data-ttu-id="6a6cd-450">Exemplo de contrato de operação de `ProtectionLevel.Sign` (para um controle granular): veja abaixo um exemplo do uso de `ProtectionLevel.Sign` no nível do contrato de operação.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-450">Operation Contract Example of `ProtectionLevel.Sign` (for Granular Control): The following is an example of using `ProtectionLevel.Sign` at the OperationContract level:</span></span>

```
[OperationContract(ProtectionLevel=ProtectionLevel.Sign] 
string GetData(int value);
``` 

## <span data-ttu-id="6a6cd-451"><a id="least-account-wcf"></a>WCF: use uma conta com privilégios mínimos para executar o serviço WCF</span><span class="sxs-lookup"><span data-stu-id="6a6cd-451"><a id="least-account-wcf"></a>WCF: Use a least-privileged account to run your WCF service</span></span>

| <span data-ttu-id="6a6cd-452">Title</span><span class="sxs-lookup"><span data-stu-id="6a6cd-452">Title</span></span>                   | <span data-ttu-id="6a6cd-453">Detalhes</span><span class="sxs-lookup"><span data-stu-id="6a6cd-453">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="6a6cd-454">**Componente**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-454">**Component**</span></span>               | <span data-ttu-id="6a6cd-455">WCF</span><span class="sxs-lookup"><span data-stu-id="6a6cd-455">WCF</span></span> | 
| <span data-ttu-id="6a6cd-456">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-456">**SDL Phase**</span></span>               | <span data-ttu-id="6a6cd-457">Compilação</span><span class="sxs-lookup"><span data-stu-id="6a6cd-457">Build</span></span> |  
| <span data-ttu-id="6a6cd-458">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-458">**Applicable Technologies**</span></span> | <span data-ttu-id="6a6cd-459">.NET Framework 3</span><span class="sxs-lookup"><span data-stu-id="6a6cd-459">.NET Framework 3</span></span> |
| <span data-ttu-id="6a6cd-460">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-460">**Attributes**</span></span>              | <span data-ttu-id="6a6cd-461">N/D</span><span class="sxs-lookup"><span data-stu-id="6a6cd-461">N/A</span></span>  |
| <span data-ttu-id="6a6cd-462">**Referências**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-462">**References**</span></span>              | [<span data-ttu-id="6a6cd-463">MSDN</span><span class="sxs-lookup"><span data-stu-id="6a6cd-463">MSDN</span></span>](https://msdn.microsoft.com/library/ff648826.aspx ) |
| <span data-ttu-id="6a6cd-464">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-464">**Steps**</span></span> | <ul><li><span data-ttu-id="6a6cd-465">**EXPLICAÇÃO:** não execute serviços do WCF usando contas de administrador ou com privilégios altos.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-465">**EXPLANATION:** Do not run WCF services under admin or high privilege account.</span></span> <span data-ttu-id="6a6cd-466">Se os serviços forem comprometidos, isso pode ter um impacto alto.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-466">in case of services compromise it will result in high impact.</span></span></li><li><span data-ttu-id="6a6cd-467">**RECOMENDAÇÕES:** use uma conta com privilégios mínimos para hospedar o serviço WCF, porque isso reduz a superfície de ataque do aplicativo e os potenciais danos causados se houver um ataque.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-467">**RECOMMENDATIONS:** Use a least-privileged account to host your WCF service because it will reduce your application's attack surface and reduce the potential damage if you are attacked.</span></span> <span data-ttu-id="6a6cd-468">Se a conta do serviço exigir direitos de acesso adicionais nos recursos de infraestrutura, como MSMQ, o log de eventos, contadores de desempenho e o sistema de arquivos, as permissões apropriadas para esses recursos devem ser concedidas, para que o serviço WCF seja executado êxito.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-468">If the service account requires additional access rights on infrastructure resources such as MSMQ, the event log, performance counters, and the file system, appropriate permissions should be given to these resources so that the WCF service can run successfully.</span></span></li></ul><p><span data-ttu-id="6a6cd-469">Se o serviço precisar acessar recursos específicos em nome do chamador original, use a representação e a delegação, para que a identidade do chamador passe por uma verificação de autorização de downstream.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-469">If your service needs to access specific resources on behalf of the original caller, use impersonation and delegation to flow the caller's identity for a downstream authorization check.</span></span> <span data-ttu-id="6a6cd-470">Em um cenário de desenvolvimento, use a conta de serviço da rede local, que é uma conta interna especial com privilégios limitados.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-470">In a development scenario, use the local network service account, which is a special built-in account that has reduced privileges.</span></span> <span data-ttu-id="6a6cd-471">Em um cenário de produção, crie uma conta de serviço de domínio personalizada com privilégios mínimos.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-471">In a production scenario, create a least-privileged custom domain service account.</span></span></p>|

## <span data-ttu-id="6a6cd-472"><a id="webapi-https"></a>Forçar todo o tráfego para APIs Web pela conexão HTTPS</span><span class="sxs-lookup"><span data-stu-id="6a6cd-472"><a id="webapi-https"></a>Force all traffic to Web APIs over HTTPS connection</span></span>

| <span data-ttu-id="6a6cd-473">Title</span><span class="sxs-lookup"><span data-stu-id="6a6cd-473">Title</span></span>                   | <span data-ttu-id="6a6cd-474">Detalhes</span><span class="sxs-lookup"><span data-stu-id="6a6cd-474">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="6a6cd-475">**Componente**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-475">**Component**</span></span>               | <span data-ttu-id="6a6cd-476">API Web</span><span class="sxs-lookup"><span data-stu-id="6a6cd-476">Web API</span></span> | 
| <span data-ttu-id="6a6cd-477">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-477">**SDL Phase**</span></span>               | <span data-ttu-id="6a6cd-478">Compilação</span><span class="sxs-lookup"><span data-stu-id="6a6cd-478">Build</span></span> |  
| <span data-ttu-id="6a6cd-479">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-479">**Applicable Technologies**</span></span> | <span data-ttu-id="6a6cd-480">MVC5, MVC6</span><span class="sxs-lookup"><span data-stu-id="6a6cd-480">MVC5, MVC6</span></span> |
| <span data-ttu-id="6a6cd-481">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-481">**Attributes**</span></span>              | <span data-ttu-id="6a6cd-482">N/D</span><span class="sxs-lookup"><span data-stu-id="6a6cd-482">N/A</span></span>  |
| <span data-ttu-id="6a6cd-483">**Referências**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-483">**References**</span></span>              | [<span data-ttu-id="6a6cd-484">Impondo o SSL em um controlador de API da Web</span><span class="sxs-lookup"><span data-stu-id="6a6cd-484">Enforcing SSL in a Web API Controller</span></span>](http://www.asp.net/web-api/overview/security/working-with-ssl-in-web-api) |
| <span data-ttu-id="6a6cd-485">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-485">**Steps**</span></span> | <span data-ttu-id="6a6cd-486">Se um aplicativo tiver uma associação HTTPS e HTTP, os clientes poderão usar o HTTP para acessar o site.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-486">If an application has both an HTTPS and an HTTP binding, clients can still use HTTP to access the site.</span></span> <span data-ttu-id="6a6cd-487">Para impedir isso, use um filtro de ação para garantir que as solicitações para APIs protegidas serão sempre feitas via HTTPS.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-487">To prevent this, use an action filter to ensure that requests to protected APIs are always over HTTPS.</span></span>|

### <a name="example"></a><span data-ttu-id="6a6cd-488">Exemplo</span><span class="sxs-lookup"><span data-stu-id="6a6cd-488">Example</span></span> 
<span data-ttu-id="6a6cd-489">O código abaixo mostra um filtro de autenticação de API da Web que verifica o SSL:</span><span class="sxs-lookup"><span data-stu-id="6a6cd-489">The following code shows a Web API authentication filter that checks for SSL:</span></span> 
```C#
public class RequireHttpsAttribute : AuthorizationFilterAttribute
{
    public override void OnAuthorization(HttpActionContext actionContext)
    {
        if (actionContext.Request.RequestUri.Scheme != Uri.UriSchemeHttps)
        {
            actionContext.Response = new HttpResponseMessage(System.Net.HttpStatusCode.Forbidden)
            {
                ReasonPhrase = "HTTPS Required"
            };
        }
        else
        {
            base.OnAuthorization(actionContext);
        }
    }
}
```
<span data-ttu-id="6a6cd-490">Adicione esse filtro às ações de API da Web que exigem SSL:</span><span class="sxs-lookup"><span data-stu-id="6a6cd-490">Add this filter to any Web API actions that require SSL:</span></span> 
```C#
public class ValuesController : ApiController
{
    [RequireHttps]
    public HttpResponseMessage Get() { ... }
}
```
 
## <span data-ttu-id="6a6cd-491"><a id="redis-ssl"></a>Garantir que as comunicações para o Cache Redis do Azure sejam feitas via SSL</span><span class="sxs-lookup"><span data-stu-id="6a6cd-491"><a id="redis-ssl"></a>Ensure that communication to Azure Redis Cache is over SSL</span></span>

| <span data-ttu-id="6a6cd-492">Title</span><span class="sxs-lookup"><span data-stu-id="6a6cd-492">Title</span></span>                   | <span data-ttu-id="6a6cd-493">Detalhes</span><span class="sxs-lookup"><span data-stu-id="6a6cd-493">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="6a6cd-494">**Componente**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-494">**Component**</span></span>               | <span data-ttu-id="6a6cd-495">Cache Redis do Azure</span><span class="sxs-lookup"><span data-stu-id="6a6cd-495">Azure Redis Cache</span></span> | 
| <span data-ttu-id="6a6cd-496">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-496">**SDL Phase**</span></span>               | <span data-ttu-id="6a6cd-497">Compilação</span><span class="sxs-lookup"><span data-stu-id="6a6cd-497">Build</span></span> |  
| <span data-ttu-id="6a6cd-498">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-498">**Applicable Technologies**</span></span> | <span data-ttu-id="6a6cd-499">Genérico</span><span class="sxs-lookup"><span data-stu-id="6a6cd-499">Generic</span></span> |
| <span data-ttu-id="6a6cd-500">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-500">**Attributes**</span></span>              | <span data-ttu-id="6a6cd-501">N/D</span><span class="sxs-lookup"><span data-stu-id="6a6cd-501">N/A</span></span>  |
| <span data-ttu-id="6a6cd-502">**Referências**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-502">**References**</span></span>              | [<span data-ttu-id="6a6cd-503">Suporte a SSL do Redis do Azure</span><span class="sxs-lookup"><span data-stu-id="6a6cd-503">Azure Redis SSL support</span></span>](https://azure.microsoft.com/documentation/articles/cache-faq/#when-should-i-enable-the-non-ssl-port-for-connecting-to-redis) |
| <span data-ttu-id="6a6cd-504">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-504">**Steps**</span></span> | <span data-ttu-id="6a6cd-505">O servidor Redis não dá suporte ao SSL pronto para uso, enquanto o Cache Redis do Azure dá.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-505">Redis server does not support SSL out of the box, but Azure Redis Cache does.</span></span> <span data-ttu-id="6a6cd-506">Se você estiver conectando ao Cache Redis do Azure e o seu cliente dá suporte a SSL, como StackExchange.Redis, você deve usar SSL.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-506">If you are connecting to Azure Redis Cache and your client supports SSL, like StackExchange.Redis, then you should use SSL.</span></span> <span data-ttu-id="6a6cd-507">Por padrão, a porta não SSL está desabilitada para novas instâncias do Cache Redis do Azure.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-507">By default non-SSL port is disabled for new Azure Redis Cache instances.</span></span> <span data-ttu-id="6a6cd-508">Certifique-se de que os padrões de segurança não sejam alterados, a menos que haja uma dependência no suporte a SSL para clientes Redis.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-508">Ensure that the secure defaults are not changed unless there is a dependency on SSL support for redis clients.</span></span> |

<span data-ttu-id="6a6cd-509">Observe que o Redis foi projetado para ser acessado por clientes confiáveis em ambientes confiáveis.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-509">Please note that Redis is designed to be accessed by trusted clients inside trusted environments.</span></span> <span data-ttu-id="6a6cd-510">Isso significa que normalmente não é uma boa ideia expor a instância do Redis diretamente à Internet ou, de uma forma geral, a um ambiente onde clientes não confiáveis podem acessar diretamente o soquete UNIX ou a porta TCP do Redis.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-510">This means that usually it is not a good idea to expose the Redis instance directly to the internet or, in general, to an environment where untrusted clients can directly access the Redis TCP port or UNIX socket.</span></span> 

## <span data-ttu-id="6a6cd-511"><a id="device-field"></a>Proteger dispositivo para comunicações do Gateway de Campo</span><span class="sxs-lookup"><span data-stu-id="6a6cd-511"><a id="device-field"></a>Secure Device to Field Gateway communication</span></span>

| <span data-ttu-id="6a6cd-512">Title</span><span class="sxs-lookup"><span data-stu-id="6a6cd-512">Title</span></span>                   | <span data-ttu-id="6a6cd-513">Detalhes</span><span class="sxs-lookup"><span data-stu-id="6a6cd-513">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="6a6cd-514">**Componente**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-514">**Component**</span></span>               | <span data-ttu-id="6a6cd-515">Gateway de Campo de IoT</span><span class="sxs-lookup"><span data-stu-id="6a6cd-515">IoT Field Gateway</span></span> | 
| <span data-ttu-id="6a6cd-516">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-516">**SDL Phase**</span></span>               | <span data-ttu-id="6a6cd-517">Compilação</span><span class="sxs-lookup"><span data-stu-id="6a6cd-517">Build</span></span> |  
| <span data-ttu-id="6a6cd-518">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-518">**Applicable Technologies**</span></span> | <span data-ttu-id="6a6cd-519">Genérico</span><span class="sxs-lookup"><span data-stu-id="6a6cd-519">Generic</span></span> |
| <span data-ttu-id="6a6cd-520">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-520">**Attributes**</span></span>              | <span data-ttu-id="6a6cd-521">N/D</span><span class="sxs-lookup"><span data-stu-id="6a6cd-521">N/A</span></span>  |
| <span data-ttu-id="6a6cd-522">**Referências**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-522">**References**</span></span>              | <span data-ttu-id="6a6cd-523">N/D</span><span class="sxs-lookup"><span data-stu-id="6a6cd-523">N/A</span></span>  |
| <span data-ttu-id="6a6cd-524">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-524">**Steps**</span></span> | <span data-ttu-id="6a6cd-525">Para dispositivos baseados em IP, o protocolo de comunicação poderia ser encapsulado em um canal SSL/TLS para proteger os dados em trânsito.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-525">For IP based devices, the communication protocol could typically be encapsulated in a SSL/TLS channel to protect data in transit.</span></span> <span data-ttu-id="6a6cd-526">Para outros protocolos que não oferecem suporte a SSL/TLS, verifique se há versões protegidas do protocolo que fornecem segurança na camada de transporte ou de mensagens.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-526">For other protocols that do not support SSL/TLS investigate if there are secure versions of the protocol that provide security at transport or message layer.</span></span> |

## <span data-ttu-id="6a6cd-527"><a id="device-cloud"></a>Proteger o dispositivo para comunicações do Gateway de Nuvem usando SSL/TLS</span><span class="sxs-lookup"><span data-stu-id="6a6cd-527"><a id="device-cloud"></a>Secure Device to Cloud Gateway communication using SSL/TLS</span></span>

| <span data-ttu-id="6a6cd-528">Title</span><span class="sxs-lookup"><span data-stu-id="6a6cd-528">Title</span></span>                   | <span data-ttu-id="6a6cd-529">Detalhes</span><span class="sxs-lookup"><span data-stu-id="6a6cd-529">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="6a6cd-530">**Componente**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-530">**Component**</span></span>               | <span data-ttu-id="6a6cd-531">Gateway de Nuvem IoT</span><span class="sxs-lookup"><span data-stu-id="6a6cd-531">IoT Cloud Gateway</span></span> | 
| <span data-ttu-id="6a6cd-532">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-532">**SDL Phase**</span></span>               | <span data-ttu-id="6a6cd-533">Compilação</span><span class="sxs-lookup"><span data-stu-id="6a6cd-533">Build</span></span> |  
| <span data-ttu-id="6a6cd-534">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-534">**Applicable Technologies**</span></span> | <span data-ttu-id="6a6cd-535">Genérico</span><span class="sxs-lookup"><span data-stu-id="6a6cd-535">Generic</span></span> |
| <span data-ttu-id="6a6cd-536">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-536">**Attributes**</span></span>              | <span data-ttu-id="6a6cd-537">N/D</span><span class="sxs-lookup"><span data-stu-id="6a6cd-537">N/A</span></span>  |
| <span data-ttu-id="6a6cd-538">**Referências**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-538">**References**</span></span>              | [<span data-ttu-id="6a6cd-539">Escolha seu protocolo de comunicação</span><span class="sxs-lookup"><span data-stu-id="6a6cd-539">Choose your Communication Protocol</span></span>](https://azure.microsoft.com/documentation/articles/iot-hub-devguide/#messaging) |
| <span data-ttu-id="6a6cd-540">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="6a6cd-540">**Steps**</span></span> | <span data-ttu-id="6a6cd-541">Proteja os protocolos HTTP/AMQP ou MQTT usando SSL/TLS.</span><span class="sxs-lookup"><span data-stu-id="6a6cd-541">Secure HTTP/AMQP or MQTT protocols using SSL/TLS.</span></span> |
