---
title: "Gerenciamento de configurações - Microsoft Threat Modeling Tool - Azure | Microsoft Docs"
description: "atenuações de ameaças expostas na Ferramenta de Modelagem de Ameaças"
services: security
documentationcenter: na
author: RodSan
manager: RodSan
editor: RodSan
ms.assetid: na
ms.service: security
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/17/2017
ms.author: rodsan
ms.openlocfilehash: 114666d0c173786373e3bdd025027eb217922749
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/29/2017
---
# <a name="security-frame-configuration-management--mitigations"></a><span data-ttu-id="9b328-103">Estrutura de segurança: Gerenciamento de configurações | Atenuações</span><span class="sxs-lookup"><span data-stu-id="9b328-103">Security Frame: Configuration Management | Mitigations</span></span> 
| <span data-ttu-id="9b328-104">Produto/serviço</span><span class="sxs-lookup"><span data-stu-id="9b328-104">Product/Service</span></span> | <span data-ttu-id="9b328-105">Artigo</span><span class="sxs-lookup"><span data-stu-id="9b328-105">Article</span></span> |
| --------------- | ------- |
| <span data-ttu-id="9b328-106">**Aplicativo Web**</span><span class="sxs-lookup"><span data-stu-id="9b328-106">**Web Application**</span></span> | <ul><li>[<span data-ttu-id="9b328-107">Implementar a Política de Segurança de Conteúdo (CSP) e desabilitar o JavaScript embutido</span><span class="sxs-lookup"><span data-stu-id="9b328-107">Implement Content Security Policy (CSP), and disable inline javascript</span></span>](#csp-js)</li><li>[<span data-ttu-id="9b328-108">Habilitar o filtro XSS do navegador</span><span class="sxs-lookup"><span data-stu-id="9b328-108">Enable browser's XSS filter</span></span>](#xss-filter)</li><li>[<span data-ttu-id="9b328-109">Os aplicativos ASP.NET devem desabilitar o rastreamento e a depuração antes da implantação</span><span class="sxs-lookup"><span data-stu-id="9b328-109">ASP.NET applications must disable tracing and debugging prior to deployment</span></span>](#trace-deploy)</li><li>[<span data-ttu-id="9b328-110">Acessar JavaScripts de terceiros somente de fontes confiáveis</span><span class="sxs-lookup"><span data-stu-id="9b328-110">Access third-party javascripts from trusted sources only</span></span>](#js-trusted)</li><li>[<span data-ttu-id="9b328-111">Garantir que as páginas ASP.NET autenticadas incluam defesas contra adulterações de interface do usuário ou furto de clique</span><span class="sxs-lookup"><span data-stu-id="9b328-111">Ensure that authenticated ASP.NET pages incorporate UI Redressing or click-jacking defenses</span></span>](#ui-defenses)</li><li>[<span data-ttu-id="9b328-112">Garantir que apenas fontes confiáveis sejam permitidas se o CORS estiver habilitado em aplicativos Web do ASP.NET</span><span class="sxs-lookup"><span data-stu-id="9b328-112">Ensure that only trusted origins are allowed if CORS is enabled on ASP.NET Web Applications</span></span>](#cors-aspnet)</li><li>[<span data-ttu-id="9b328-113">Habilitar o atributo ValidateRequest em páginas ASP.NET</span><span class="sxs-lookup"><span data-stu-id="9b328-113">Enable ValidateRequest attribute on ASP.NET Pages</span></span>](#validate-aspnet)</li><li>[<span data-ttu-id="9b328-114">Usar as versões mais recentes de bibliotecas JavaScript hospedadas localmente</span><span class="sxs-lookup"><span data-stu-id="9b328-114">Use locally-hosted latest versions of JavaScript libraries</span></span>](#local-js)</li><li>[<span data-ttu-id="9b328-115">Desabilitar a detecção automática de MIME</span><span class="sxs-lookup"><span data-stu-id="9b328-115">Disable automatic MIME sniffing</span></span>](#mime-sniff)</li><li>[<span data-ttu-id="9b328-116">Remover cabeçalhos de servidor padrão nos sites do Microsoft Azure para evitar impressões digitais</span><span class="sxs-lookup"><span data-stu-id="9b328-116">Remove standard server headers on Windows Azure Web Sites to avoid fingerprinting</span></span>](#standard-finger)</li></ul> |
| <span data-ttu-id="9b328-117">**Banco de dados**</span><span class="sxs-lookup"><span data-stu-id="9b328-117">**Database**</span></span> | <ul><li>[<span data-ttu-id="9b328-118">Configurar um Firewall do Windows para acesso ao Mecanismo de Banco de Dados</span><span class="sxs-lookup"><span data-stu-id="9b328-118">Configure a Windows Firewall for Database Engine Access</span></span>](#firewall-db)</li></ul> |
| <span data-ttu-id="9b328-119">**API da Web**</span><span class="sxs-lookup"><span data-stu-id="9b328-119">**Web API**</span></span> | <ul><li>[<span data-ttu-id="9b328-120">Garantir que apenas fontes confiáveis sejam permitidas se o CORS estiver habilitado na API Web ASP.NET</span><span class="sxs-lookup"><span data-stu-id="9b328-120">Ensure that only trusted origins are allowed if CORS is enabled on ASP.NET Web API</span></span>](#cors-api)</li><li>[<span data-ttu-id="9b328-121">Criptografar as seções dos arquivos de configuração da API Web que contêm dados confidenciais</span><span class="sxs-lookup"><span data-stu-id="9b328-121">Encrypt sections of Web API's configuration files that contain sensitive data</span></span>](#config-sensitive)</li></ul> |
| <span data-ttu-id="9b328-122">**Dispositivo IoT**</span><span class="sxs-lookup"><span data-stu-id="9b328-122">**IoT Device**</span></span> | <ul><li>[<span data-ttu-id="9b328-123">Garantir que todas as interfaces de administrador sejam protegidas com credenciais fortes</span><span class="sxs-lookup"><span data-stu-id="9b328-123">Ensure that all admin interfaces are secured with strong credentials</span></span>](#admin-strong)</li><li>[<span data-ttu-id="9b328-124">Garantir que um código desconhecido não seja executado em dispositivos</span><span class="sxs-lookup"><span data-stu-id="9b328-124">Ensure that unknown code cannot execute on devices</span></span>](#unknown-exe)</li><li>[<span data-ttu-id="9b328-125">Criptografar o sistema operacional e partições adicionais do dispositivo IoT com o BitLocker</span><span class="sxs-lookup"><span data-stu-id="9b328-125">Encrypt OS and additional partitions of IoT Device with bit-locker</span></span>](#partition-iot)</li><li>[<span data-ttu-id="9b328-126">Garantir que apenas o mínimo de serviços/recursos estejam habilitados nos dispositivos</span><span class="sxs-lookup"><span data-stu-id="9b328-126">Ensure that only the minimum services/features are enabled on devices</span></span>](#min-enable)</li></ul> |
| <span data-ttu-id="9b328-127">**Gateway de Campo de IoT**</span><span class="sxs-lookup"><span data-stu-id="9b328-127">**IoT Field Gateway**</span></span> | <ul><li>[<span data-ttu-id="9b328-128">Criptografar o sistema operacional e partições adicionais do Gateway de Campo IoT com o BitLocker</span><span class="sxs-lookup"><span data-stu-id="9b328-128">Encrypt OS and additional partitions of IoT Field Gateway with bit-locker</span></span>](#field-bit-locker)</li><li>[<span data-ttu-id="9b328-129">Garantir que as credenciais de logon padrão do gateway de campo sejam alteradas durante a instalação</span><span class="sxs-lookup"><span data-stu-id="9b328-129">Ensure that the default login credentials of the field gateway are changed during installation</span></span>](#default-change)</li></ul> |
| <span data-ttu-id="9b328-130">**Gateway de Nuvem IoT**</span><span class="sxs-lookup"><span data-stu-id="9b328-130">**IoT Cloud Gateway**</span></span> | <ul><li>[<span data-ttu-id="9b328-131">Garantir que o Gateway de Nuvem implemente um processo para manter atualizado o firmware de dispositivos conectados</span><span class="sxs-lookup"><span data-stu-id="9b328-131">Ensure that the Cloud Gateway implements a process to keep the connected devices firmware up to date</span></span>](#cloud-firmware)</li></ul> |
| <span data-ttu-id="9b328-132">**Limite de confiança de computador**</span><span class="sxs-lookup"><span data-stu-id="9b328-132">**Machine Trust Boundary**</span></span> | <ul><li>[<span data-ttu-id="9b328-133">Garantir que os controles de segurança de ponto de extremidade estejam configurados nos dispositivos de acordo com as políticas organizacionais</span><span class="sxs-lookup"><span data-stu-id="9b328-133">Ensure that devices have end-point security controls configured as per organizational policies</span></span>](#controls-policies)</li></ul> |
| <span data-ttu-id="9b328-134">**Armazenamento do Azure**</span><span class="sxs-lookup"><span data-stu-id="9b328-134">**Azure Storage**</span></span> | <ul><li>[<span data-ttu-id="9b328-135">Garantir o gerenciamento seguro das chaves de acesso do Armazenamento do Azure</span><span class="sxs-lookup"><span data-stu-id="9b328-135">Ensure secure management of Azure storage access keys</span></span>](#secure-keys)</li><li>[<span data-ttu-id="9b328-136">Garantir que apenas fontes confiáveis sejam permitidas se o CORS estiver habilitado no Armazenamento do Azure</span><span class="sxs-lookup"><span data-stu-id="9b328-136">Ensure that only trusted origins are allowed if CORS is enabled on Azure storage</span></span>](#cors-storage)</li></ul> |
| <span data-ttu-id="9b328-137">**WCF**</span><span class="sxs-lookup"><span data-stu-id="9b328-137">**WCF**</span></span> | <ul><li>[<span data-ttu-id="9b328-138">Habilitar o recurso de limitação do serviço WCF</span><span class="sxs-lookup"><span data-stu-id="9b328-138">Enable WCF's service throttling feature</span></span>](#throttling)</li><li>[<span data-ttu-id="9b328-139">Divulgação de informações do WCF por meio de metadados</span><span class="sxs-lookup"><span data-stu-id="9b328-139">WCF-Information disclosure through metadata</span></span>](#info-metadata)</li></ul> | 

## <span data-ttu-id="9b328-140"><a id="csp-js"></a>Implementar a Política de Segurança de Conteúdo (CSP) e desabilitar o JavaScript embutido</span><span class="sxs-lookup"><span data-stu-id="9b328-140"><a id="csp-js"></a>Implement Content Security Policy (CSP), and disable inline javascript</span></span>

| <span data-ttu-id="9b328-141">Title</span><span class="sxs-lookup"><span data-stu-id="9b328-141">Title</span></span>                   | <span data-ttu-id="9b328-142">Detalhes</span><span class="sxs-lookup"><span data-stu-id="9b328-142">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="9b328-143">**Componente**</span><span class="sxs-lookup"><span data-stu-id="9b328-143">**Component**</span></span>               | <span data-ttu-id="9b328-144">Aplicativo Web</span><span class="sxs-lookup"><span data-stu-id="9b328-144">Web Application</span></span> | 
| <span data-ttu-id="9b328-145">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="9b328-145">**SDL Phase**</span></span>               | <span data-ttu-id="9b328-146">Compilação</span><span class="sxs-lookup"><span data-stu-id="9b328-146">Build</span></span> |  
| <span data-ttu-id="9b328-147">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="9b328-147">**Applicable Technologies**</span></span> | <span data-ttu-id="9b328-148">Genérico</span><span class="sxs-lookup"><span data-stu-id="9b328-148">Generic</span></span> |
| <span data-ttu-id="9b328-149">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="9b328-149">**Attributes**</span></span>              | <span data-ttu-id="9b328-150">N/D</span><span class="sxs-lookup"><span data-stu-id="9b328-150">N/A</span></span>  |
| <span data-ttu-id="9b328-151">**Referências**</span><span class="sxs-lookup"><span data-stu-id="9b328-151">**References**</span></span>              | <span data-ttu-id="9b328-152">[Uma introdução à Política de Segurança de Conteúdo](http://www.html5rocks.com/en/tutorials/security/content-security-policy/), [Referência da Política de Segurança de Conteúdo](http://content-security-policy.com/), [Recursos de segurança](https://developer.microsoft.com/microsoft-edge/platform/documentation/dev-guide/security/), [Introdução à Política de Segurança de Conteúdo](https://docs.webplatform.org/wiki/tutorials/content-security-policy), [Posso usar a CSP?](http://caniuse.com/#feat=contentsecuritypolicy)</span><span class="sxs-lookup"><span data-stu-id="9b328-152">[An Introduction to Content Security Policy](http://www.html5rocks.com/en/tutorials/security/content-security-policy/), [Content Security Policy Reference](http://content-security-policy.com/), [Security features](https://developer.microsoft.com/microsoft-edge/platform/documentation/dev-guide/security/), [Introduction to content security policy](https://docs.webplatform.org/wiki/tutorials/content-security-policy), [Can I use CSP?](http://caniuse.com/#feat=contentsecuritypolicy)</span></span> |
| <span data-ttu-id="9b328-153">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="9b328-153">**Steps**</span></span> | <p><span data-ttu-id="9b328-154">A CSP (Política de Segurança de Conteúdo) é um mecanismo de defesa aprofundado, um padrão de W3C, que permite aos proprietários do aplicativo Web ter controle sobre os conteúdos inseridos em seus sites.</span><span class="sxs-lookup"><span data-stu-id="9b328-154">Content Security Policy (CSP) is a defense-in-depth security mechanism, a W3C standard, that enables web application owners to have control on the content embedded in their site.</span></span> <span data-ttu-id="9b328-155">A CSP é adicionada como um cabeçalho de resposta HTTP no servidor Web e é aplicada pelos navegadores do cliente.</span><span class="sxs-lookup"><span data-stu-id="9b328-155">CSP is added as an HTTP response header on the web server and is enforced on the client side by browsers.</span></span> <span data-ttu-id="9b328-156">Ela é uma política baseada na lista de permissões; um site pode informar um conjunto de domínios confiáveis, dos quais conteúdos ativos, como JavaScript, podem ser carregados.</span><span class="sxs-lookup"><span data-stu-id="9b328-156">It is a whitelist-based policy - a website can declare a set of trusted domains from which active content such as JavaScript can be loaded.</span></span></p><p><span data-ttu-id="9b328-157">A CSP oferece os seguintes benefícios de segurança:</span><span class="sxs-lookup"><span data-stu-id="9b328-157">CSP provides the following security benefits:</span></span></p><ul><li><span data-ttu-id="9b328-158">**Proteção contra XSS:** se uma página for vulnerável a XSS, um invasor poderá explorá-la de duas maneiras:</span><span class="sxs-lookup"><span data-stu-id="9b328-158">**Protection against XSS:** If a page is vulnerable to XSS, an attacker can exploit it in 2 ways:</span></span><ul><li><span data-ttu-id="9b328-159">Injetar `<script>malicious code</script>`:</span><span class="sxs-lookup"><span data-stu-id="9b328-159">Inject `<script>malicious code</script>`.</span></span> <span data-ttu-id="9b328-160">essa exploração não funcionará devido à primeira restrição básica da CSP.</span><span class="sxs-lookup"><span data-stu-id="9b328-160">This exploit will not work due to CSP’s Base Restriction-1</span></span></li><li><span data-ttu-id="9b328-161">Injetar `<script src=”http://attacker.com/maliciousCode.js”/>`:</span><span class="sxs-lookup"><span data-stu-id="9b328-161">Inject `<script src=”http://attacker.com/maliciousCode.js”/>`.</span></span> <span data-ttu-id="9b328-162">essa exploração não funcionará, porque o domínio controlado pelo invasor não estará na lista de domínios permitidos da CSP.</span><span class="sxs-lookup"><span data-stu-id="9b328-162">This exploit will not work since the attacker controlled domain will not be in CSP’s whitelist of domains</span></span></li></ul></li><li><span data-ttu-id="9b328-163">**Controle sobre a pesquisa por dados:** se algum conteúdo mal-intencionado em uma página da Web tentar se conectar a um site externo e roubar dados, a conexão será anulada pelo CSP.</span><span class="sxs-lookup"><span data-stu-id="9b328-163">**Control over data exfiltration:** If any malicious content on a webpage attempts to connect to an external website and steal data, the connection will be aborted by CSP.</span></span> <span data-ttu-id="9b328-164">Isso acontece porque o domínio de destino não estará na lista de permissões da CSP.</span><span class="sxs-lookup"><span data-stu-id="9b328-164">This is because the target domain will not be in CSP’s whitelist</span></span></li><li><span data-ttu-id="9b328-165">**Defesa contra furto de clique:** o furto de clique é uma técnica de ataque na qual um invasor adultera um site genuíno e faz com que os usuários cliquem nos elementos de sua interface do usuário.</span><span class="sxs-lookup"><span data-stu-id="9b328-165">**Defense against click-jacking:** click-jacking is an attack technique using which an adversary can frame a genuine website and force users to click on UI elements.</span></span> <span data-ttu-id="9b328-166">Para se proteger contra o furto de clique atualmente, basta configurar um cabeçalho de resposta X-Frame-Options.</span><span class="sxs-lookup"><span data-stu-id="9b328-166">Currently defense against click-jacking is achieved by configuring a response header- X-Frame-Options.</span></span> <span data-ttu-id="9b328-167">Nem todos os navegadores respeitam esse cabeçalho, por isso a CSP será a melhor maneira de se defender contra o furto de clique</span><span class="sxs-lookup"><span data-stu-id="9b328-167">Not all browsers respect this header and going forward CSP will be a standard way to defend against click-jacking</span></span></li><li><span data-ttu-id="9b328-168">**Relatórios de ataque em tempo real:** se houver um ataque de injeção em um site com a CSP habilitada, os navegadores disparam automaticamente uma notificação para um ponto de extremidade configurado no servidor Web.</span><span class="sxs-lookup"><span data-stu-id="9b328-168">**Real-time attack reporting:** If there is an injection attack on a CSP-enabled website, browsers will automatically trigger a notification to an endpoint configured on the webserver.</span></span> <span data-ttu-id="9b328-169">Dessa forma, a CSP atua como um sistema de aviso em tempo real.</span><span class="sxs-lookup"><span data-stu-id="9b328-169">This way, CSP serves as a real-time warning system.</span></span></li></ul> |

### <a name="example"></a><span data-ttu-id="9b328-170">Exemplo</span><span class="sxs-lookup"><span data-stu-id="9b328-170">Example</span></span>
<span data-ttu-id="9b328-171">Política de exemplo:</span><span class="sxs-lookup"><span data-stu-id="9b328-171">Example policy:</span></span> 
```C#
Content-Security-Policy: default-src 'self'; script-src 'self' www.google-analytics.com 
```
<span data-ttu-id="9b328-172">Essa política permite que os scripts sejam carregados somente no servidor do aplicativo da web e no servidor do Google Analytics.</span><span class="sxs-lookup"><span data-stu-id="9b328-172">This policy allows scripts to load only from the web application’s server and google analytics server.</span></span> <span data-ttu-id="9b328-173">Os scripts carregados em qualquer outro site serão rejeitados.</span><span class="sxs-lookup"><span data-stu-id="9b328-173">Scripts loaded from any other site will be rejected.</span></span> <span data-ttu-id="9b328-174">Quando a CSP estiver habilitada em um site, os seguintes recursos serão desabilitados automaticamente para atenuar ataques de XSS.</span><span class="sxs-lookup"><span data-stu-id="9b328-174">When CSP is enabled on a website, the following features are automatically disabled to mitigate XSS attacks.</span></span> 

### <a name="example"></a><span data-ttu-id="9b328-175">Exemplo</span><span class="sxs-lookup"><span data-stu-id="9b328-175">Example</span></span>
<span data-ttu-id="9b328-176">Os scripts embutido não serão executados.</span><span class="sxs-lookup"><span data-stu-id="9b328-176">Inline scripts will not execute.</span></span> <span data-ttu-id="9b328-177">Veja abaixo exemplos de scripts embutidos:</span><span class="sxs-lookup"><span data-stu-id="9b328-177">Following are examples of inline scripts</span></span> 
```javascript
<script> some Javascript code </script>
Event handling attributes of HTML tags (e.g., <button onclick=”function(){}”>
javascript:alert(1);
```

### <a name="example"></a><span data-ttu-id="9b328-178">Exemplo</span><span class="sxs-lookup"><span data-stu-id="9b328-178">Example</span></span>
<span data-ttu-id="9b328-179">As cadeias de caracteres não serão avaliadas como código.</span><span class="sxs-lookup"><span data-stu-id="9b328-179">Strings will not be evaluated as code.</span></span> 
```javascript
Example: var str="alert(1)"; eval(str);
```

## <span data-ttu-id="9b328-180"><a id="xss-filter"></a>Habilitar o filtro XSS do navegador</span><span class="sxs-lookup"><span data-stu-id="9b328-180"><a id="xss-filter"></a>Enable browser's XSS filter</span></span>

| <span data-ttu-id="9b328-181">Title</span><span class="sxs-lookup"><span data-stu-id="9b328-181">Title</span></span>                   | <span data-ttu-id="9b328-182">Detalhes</span><span class="sxs-lookup"><span data-stu-id="9b328-182">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="9b328-183">**Componente**</span><span class="sxs-lookup"><span data-stu-id="9b328-183">**Component**</span></span>               | <span data-ttu-id="9b328-184">Aplicativo Web</span><span class="sxs-lookup"><span data-stu-id="9b328-184">Web Application</span></span> | 
| <span data-ttu-id="9b328-185">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="9b328-185">**SDL Phase**</span></span>               | <span data-ttu-id="9b328-186">Compilação</span><span class="sxs-lookup"><span data-stu-id="9b328-186">Build</span></span> |  
| <span data-ttu-id="9b328-187">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="9b328-187">**Applicable Technologies**</span></span> | <span data-ttu-id="9b328-188">Genérico</span><span class="sxs-lookup"><span data-stu-id="9b328-188">Generic</span></span> |
| <span data-ttu-id="9b328-189">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="9b328-189">**Attributes**</span></span>              | <span data-ttu-id="9b328-190">N/D</span><span class="sxs-lookup"><span data-stu-id="9b328-190">N/A</span></span>  |
| <span data-ttu-id="9b328-191">**Referências**</span><span class="sxs-lookup"><span data-stu-id="9b328-191">**References**</span></span>              | [<span data-ttu-id="9b328-192">Filtro de proteção contra XSS</span><span class="sxs-lookup"><span data-stu-id="9b328-192">XSS Protection Filter</span></span>](https://www.owasp.org/index.php/List_of_useful_HTTP_headers#X-XSS-Protection) |
| <span data-ttu-id="9b328-193">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="9b328-193">**Steps**</span></span> | <p><span data-ttu-id="9b328-194">A configuração do cabeçalho de resposta X-XSS-Protection controla o filtro de scripts entre sites do navegador.</span><span class="sxs-lookup"><span data-stu-id="9b328-194">X-XSS-Protection response header configuration controls the browser's cross site script filter.</span></span> <span data-ttu-id="9b328-195">Esse cabeçalho de resposta pode ter valores os seguintes valores:</span><span class="sxs-lookup"><span data-stu-id="9b328-195">This response header can have following values:</span></span></p><ul><li><span data-ttu-id="9b328-196">`0:` - esse valor desabilitará o filtro.</span><span class="sxs-lookup"><span data-stu-id="9b328-196">`0:` This will disable the filter</span></span></li><li><span data-ttu-id="9b328-197">`1: Filter enabled` - se for detectado um ataque de script entre sites, o navegador corrigirá a página para interromper o ataque.</span><span class="sxs-lookup"><span data-stu-id="9b328-197">`1: Filter enabled` If a cross-site scripting attack is detected, in order to stop the attack, the browser will sanitize the page</span></span></li><li><span data-ttu-id="9b328-198">`1: mode=block : Filter enabled`.</span><span class="sxs-lookup"><span data-stu-id="9b328-198">`1: mode=block : Filter enabled`.</span></span> <span data-ttu-id="9b328-199">em vez de corrigir a página, quando um ataque de XSS for detectado, o navegador impedirá a renderização da página.</span><span class="sxs-lookup"><span data-stu-id="9b328-199">Rather than sanitize the page, when a XSS attack is detected, the browser will prevent rendering of the page</span></span></li><li><span data-ttu-id="9b328-200">`1: report=http://[YOURDOMAIN]/your_report_URI : Filter enabled`.</span><span class="sxs-lookup"><span data-stu-id="9b328-200">`1: report=http://[YOURDOMAIN]/your_report_URI : Filter enabled`.</span></span> <span data-ttu-id="9b328-201">o navegador corrigirá a página e relatará a violação.</span><span class="sxs-lookup"><span data-stu-id="9b328-201">The browser will sanitize the page and report the violation.</span></span></li></ul><p><span data-ttu-id="9b328-202">Essa é uma função do Chromium que utiliza relatórios de violação da CSP para enviar detalhes para um URI de sua escolha.</span><span class="sxs-lookup"><span data-stu-id="9b328-202">This is a Chromium function utilizing CSP violation reports to send details to a URI of your choice.</span></span> <span data-ttu-id="9b328-203">As duas última opções são consideradas valores seguros.</span><span class="sxs-lookup"><span data-stu-id="9b328-203">The last 2 options are considered safe values.</span></span></p>|

## <span data-ttu-id="9b328-204"><a id="trace-deploy"></a>Os aplicativos ASP.NET devem desabilitar o rastreamento e a depuração antes da implantação</span><span class="sxs-lookup"><span data-stu-id="9b328-204"><a id="trace-deploy"></a>ASP.NET applications must disable tracing and debugging prior to deployment</span></span>

| <span data-ttu-id="9b328-205">Title</span><span class="sxs-lookup"><span data-stu-id="9b328-205">Title</span></span>                   | <span data-ttu-id="9b328-206">Detalhes</span><span class="sxs-lookup"><span data-stu-id="9b328-206">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="9b328-207">**Componente**</span><span class="sxs-lookup"><span data-stu-id="9b328-207">**Component**</span></span>               | <span data-ttu-id="9b328-208">Aplicativo Web</span><span class="sxs-lookup"><span data-stu-id="9b328-208">Web Application</span></span> | 
| <span data-ttu-id="9b328-209">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="9b328-209">**SDL Phase**</span></span>               | <span data-ttu-id="9b328-210">Compilação</span><span class="sxs-lookup"><span data-stu-id="9b328-210">Build</span></span> |  
| <span data-ttu-id="9b328-211">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="9b328-211">**Applicable Technologies**</span></span> | <span data-ttu-id="9b328-212">Genérico</span><span class="sxs-lookup"><span data-stu-id="9b328-212">Generic</span></span> |
| <span data-ttu-id="9b328-213">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="9b328-213">**Attributes**</span></span>              | <span data-ttu-id="9b328-214">N/D</span><span class="sxs-lookup"><span data-stu-id="9b328-214">N/A</span></span>  |
| <span data-ttu-id="9b328-215">**Referências**</span><span class="sxs-lookup"><span data-stu-id="9b328-215">**References**</span></span>              | <span data-ttu-id="9b328-216">[Visão geral da depuração do ASP.NET](http://msdn2.microsoft.com/library/ms227556.aspx), [Visão geral do rastreamento do ASP.NET](http://msdn2.microsoft.com/library/bb386420.aspx), [Como: ativar o rastreamento para um aplicativo do ASP.NET](http://msdn2.microsoft.com/library/0x5wc973.aspx), [Como: habilitar a depuração de aplicativos do ASP.NET](http://msdn2.microsoft.com/library/e8z01xdh(VS.80).aspx)</span><span class="sxs-lookup"><span data-stu-id="9b328-216">[ASP.NET Debugging Overview](http://msdn2.microsoft.com/library/ms227556.aspx), [ASP.NET Tracing Overview](http://msdn2.microsoft.com/library/bb386420.aspx), [How to: Enable Tracing for an ASP.NET Application](http://msdn2.microsoft.com/library/0x5wc973.aspx), [How to: Enable Debugging for ASP.NET Applications](http://msdn2.microsoft.com/library/e8z01xdh(VS.80).aspx)</span></span> |
| <span data-ttu-id="9b328-217">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="9b328-217">**Steps**</span></span> | <span data-ttu-id="9b328-218">Quando o rastreamento estiver habilitado para a página, todos os navegadores que a solicitarem também obterão as informações de rastreamento que contêm dados do fluxo de trabalho e do estado interno do servidor.</span><span class="sxs-lookup"><span data-stu-id="9b328-218">When tracing is enabled for the page, every browser requesting it also obtains the trace information that contains data about internal server state and workflow.</span></span> <span data-ttu-id="9b328-219">Elas podem ser informações confidenciais de segurança.</span><span class="sxs-lookup"><span data-stu-id="9b328-219">That information could be security sensitive.</span></span> <span data-ttu-id="9b328-220">Quando a depuração estiver habilitada para a página, os erros ocorridos no servidor serão apresentados ao navegador como uma pilha de dados de rastreamento.</span><span class="sxs-lookup"><span data-stu-id="9b328-220">When debugging is enabled for the page, errors happening on the server result in a full stack trace data presented to the browser.</span></span> <span data-ttu-id="9b328-221">Esses dados podem conter informações confidenciais de segurança sobre fluxo de trabalho do servidor.</span><span class="sxs-lookup"><span data-stu-id="9b328-221">That data may expose security-sensitive information about the server's workflow.</span></span> |

## <span data-ttu-id="9b328-222"><a id="js-trusted"></a>Acessar JavaScripts de terceiros somente de fontes confiáveis</span><span class="sxs-lookup"><span data-stu-id="9b328-222"><a id="js-trusted"></a>Access third-party javascripts from trusted sources only</span></span>

| <span data-ttu-id="9b328-223">Title</span><span class="sxs-lookup"><span data-stu-id="9b328-223">Title</span></span>                   | <span data-ttu-id="9b328-224">Detalhes</span><span class="sxs-lookup"><span data-stu-id="9b328-224">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="9b328-225">**Componente**</span><span class="sxs-lookup"><span data-stu-id="9b328-225">**Component**</span></span>               | <span data-ttu-id="9b328-226">Aplicativo Web</span><span class="sxs-lookup"><span data-stu-id="9b328-226">Web Application</span></span> | 
| <span data-ttu-id="9b328-227">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="9b328-227">**SDL Phase**</span></span>               | <span data-ttu-id="9b328-228">Compilação</span><span class="sxs-lookup"><span data-stu-id="9b328-228">Build</span></span> |  
| <span data-ttu-id="9b328-229">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="9b328-229">**Applicable Technologies**</span></span> | <span data-ttu-id="9b328-230">Genérico</span><span class="sxs-lookup"><span data-stu-id="9b328-230">Generic</span></span> |
| <span data-ttu-id="9b328-231">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="9b328-231">**Attributes**</span></span>              | <span data-ttu-id="9b328-232">N/D</span><span class="sxs-lookup"><span data-stu-id="9b328-232">N/A</span></span>  |
| <span data-ttu-id="9b328-233">**Referências**</span><span class="sxs-lookup"><span data-stu-id="9b328-233">**References**</span></span>              | <span data-ttu-id="9b328-234">N/D</span><span class="sxs-lookup"><span data-stu-id="9b328-234">N/A</span></span>  |
| <span data-ttu-id="9b328-235">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="9b328-235">**Steps**</span></span> | <span data-ttu-id="9b328-236">os JavaScripts de terceiros devem ser referenciados somente de fontes confiáveis.</span><span class="sxs-lookup"><span data-stu-id="9b328-236">third-party JavaScripts should be referenced only from trusted sources.</span></span> <span data-ttu-id="9b328-237">Os pontos de extremidade de referência devem estar sempre no SSL.</span><span class="sxs-lookup"><span data-stu-id="9b328-237">The reference endpoints should always be on SSL.</span></span> |

## <span data-ttu-id="9b328-238"><a id="ui-defenses"></a>Garantir que as páginas ASP.NET autenticadas incluam defesas contra adulterações de interface do usuário ou furto de clique</span><span class="sxs-lookup"><span data-stu-id="9b328-238"><a id="ui-defenses"></a>Ensure that authenticated ASP.NET pages incorporate UI Redressing or click-jacking defenses</span></span>

| <span data-ttu-id="9b328-239">Title</span><span class="sxs-lookup"><span data-stu-id="9b328-239">Title</span></span>                   | <span data-ttu-id="9b328-240">Detalhes</span><span class="sxs-lookup"><span data-stu-id="9b328-240">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="9b328-241">**Componente**</span><span class="sxs-lookup"><span data-stu-id="9b328-241">**Component**</span></span>               | <span data-ttu-id="9b328-242">Aplicativo Web</span><span class="sxs-lookup"><span data-stu-id="9b328-242">Web Application</span></span> | 
| <span data-ttu-id="9b328-243">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="9b328-243">**SDL Phase**</span></span>               | <span data-ttu-id="9b328-244">Compilação</span><span class="sxs-lookup"><span data-stu-id="9b328-244">Build</span></span> |  
| <span data-ttu-id="9b328-245">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="9b328-245">**Applicable Technologies**</span></span> | <span data-ttu-id="9b328-246">Genérico</span><span class="sxs-lookup"><span data-stu-id="9b328-246">Generic</span></span> |
| <span data-ttu-id="9b328-247">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="9b328-247">**Attributes**</span></span>              | <span data-ttu-id="9b328-248">N/D</span><span class="sxs-lookup"><span data-stu-id="9b328-248">N/A</span></span>  |
| <span data-ttu-id="9b328-249">**Referências**</span><span class="sxs-lookup"><span data-stu-id="9b328-249">**References**</span></span>              | <span data-ttu-id="9b328-250">[Folha de dados do OWASP sobre mecanismos de proteção contra furto de clique](https://www.owasp.org/index.php/Clickjacking_Defense_Cheat_Sheet), [Internals IE – Combatendo o furto de clique com X-Frame-Options](https://blogs.msdn.microsoft.com/ieinternals/2010/03/30/combating-click-jacking-with-x-frame-options/)</span><span class="sxs-lookup"><span data-stu-id="9b328-250">[OWASP click-jacking Defense Cheat Sheet](https://www.owasp.org/index.php/Clickjacking_Defense_Cheat_Sheet), [IE Internals - Combating click-jacking With X-Frame-Options](https://blogs.msdn.microsoft.com/ieinternals/2010/03/30/combating-click-jacking-with-x-frame-options/)</span></span> |
| <span data-ttu-id="9b328-251">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="9b328-251">**Steps**</span></span> | <p><span data-ttu-id="9b328-252">o furto de clique, também conhecido como "ataque de adulteração de interface do usuário", ocorre quando um invasor utiliza várias camadas transparentes ou opacas para fazer com que o usuário clique em um botão ou link de outra página enquanto, na verdade, ele pretendia clicar na página do nível superior.</span><span class="sxs-lookup"><span data-stu-id="9b328-252">click-jacking, also known as a "UI redress attack", is when an attacker uses multiple transparent or opaque layers to trick a user into clicking on a button or link on another page when they were intending to click on the top-level page.</span></span></p><p><span data-ttu-id="9b328-253">Para aplicar essas camadas, é preciso criar uma página mal-intencionada com um iframe para carregar a página da vítima.</span><span class="sxs-lookup"><span data-stu-id="9b328-253">This layering is achieved by crafting a malicious page with an iframe, which loads the victim's page.</span></span> <span data-ttu-id="9b328-254">Assim, o invasor é "sequestra" os cliques destinados a uma página e os encaminha para outra página, que provavelmente pertence a outro aplicativo, domínio ou ambos.</span><span class="sxs-lookup"><span data-stu-id="9b328-254">Thus, the attacker is "hijacking" clicks meant for their page and routing them to another page, most likely owned by another application, domain, or both.</span></span> <span data-ttu-id="9b328-255">Para evitar esse tipo de ataque, defina os cabeçalhos de resposta HTTP de X-Frame-Options adequados que instruem o navegador a não permitir enquadramentos de outros domínios</span><span class="sxs-lookup"><span data-stu-id="9b328-255">To prevent click-jacking attacks, set the proper X-Frame-Options HTTP response headers that instruct the browser to not allow framing from other domains</span></span></p>|

### <a name="example"></a><span data-ttu-id="9b328-256">Exemplo</span><span class="sxs-lookup"><span data-stu-id="9b328-256">Example</span></span>
<span data-ttu-id="9b328-257">O cabeçalho X-FRAME-OPTIONS pode ser definido com o arquivo web.config do IIS. O trecho de código do arquivo web.config para sites que nunca devem ser enquadrados:</span><span class="sxs-lookup"><span data-stu-id="9b328-257">The X-FRAME-OPTIONS header can be set via IIS web.config. Web.config code snippet for sites that should never be framed:</span></span> 
```C#
    <system.webServer>
        <httpProtocol>
            <customHeader>
                <add name="X-FRAME-OPTIONS" value="DENY"/>
            </customHeaders>
        </httpProtocol>
    </system.webServer>
```

### <a name="example"></a><span data-ttu-id="9b328-258">Exemplo</span><span class="sxs-lookup"><span data-stu-id="9b328-258">Example</span></span>
<span data-ttu-id="9b328-259">O código do arquivo web.config para sites que só devem ser enquadrados por páginas do mesmo domínio:</span><span class="sxs-lookup"><span data-stu-id="9b328-259">Web.config code for sites that should only be framed by pages in the same domain:</span></span> 
```C#
    <system.webServer>
        <httpProtocol>
            <customHeader>
                <add name="X-FRAME-OPTIONS" value="SAMEORIGIN"/>
            </customHeaders>
        </httpProtocol>
    </system.webServer>
```

## <span data-ttu-id="9b328-260"><a id="cors-aspnet"></a>Garantir que apenas fontes confiáveis sejam permitidas se o CORS estiver habilitado em aplicativos Web do ASP.NET</span><span class="sxs-lookup"><span data-stu-id="9b328-260"><a id="cors-aspnet"></a>Ensure that only trusted origins are allowed if CORS is enabled on ASP.NET Web Applications</span></span>

| <span data-ttu-id="9b328-261">Title</span><span class="sxs-lookup"><span data-stu-id="9b328-261">Title</span></span>                   | <span data-ttu-id="9b328-262">Detalhes</span><span class="sxs-lookup"><span data-stu-id="9b328-262">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="9b328-263">**Componente**</span><span class="sxs-lookup"><span data-stu-id="9b328-263">**Component**</span></span>               | <span data-ttu-id="9b328-264">Aplicativo Web</span><span class="sxs-lookup"><span data-stu-id="9b328-264">Web Application</span></span> | 
| <span data-ttu-id="9b328-265">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="9b328-265">**SDL Phase**</span></span>               | <span data-ttu-id="9b328-266">Compilação</span><span class="sxs-lookup"><span data-stu-id="9b328-266">Build</span></span> |  
| <span data-ttu-id="9b328-267">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="9b328-267">**Applicable Technologies**</span></span> | <span data-ttu-id="9b328-268">Web Forms, MVC5</span><span class="sxs-lookup"><span data-stu-id="9b328-268">Web Forms, MVC5</span></span> |
| <span data-ttu-id="9b328-269">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="9b328-269">**Attributes**</span></span>              | <span data-ttu-id="9b328-270">N/D</span><span class="sxs-lookup"><span data-stu-id="9b328-270">N/A</span></span>  |
| <span data-ttu-id="9b328-271">**Referências**</span><span class="sxs-lookup"><span data-stu-id="9b328-271">**References**</span></span>              | <span data-ttu-id="9b328-272">N/D</span><span class="sxs-lookup"><span data-stu-id="9b328-272">N/A</span></span>  |
| <span data-ttu-id="9b328-273">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="9b328-273">**Steps**</span></span> | <p><span data-ttu-id="9b328-274">A segurança do navegador impede que uma página da Web envie solicitações do AJAX para outro domínio.</span><span class="sxs-lookup"><span data-stu-id="9b328-274">Browser security prevents a web page from making AJAX requests to another domain.</span></span> <span data-ttu-id="9b328-275">Essa restrição se chama política da mesma origem e impede que um site mal-intencional leia dados confidenciais de outro site.</span><span class="sxs-lookup"><span data-stu-id="9b328-275">This restriction is called the same-origin policy, and prevents a malicious site from reading sensitive data from another site.</span></span> <span data-ttu-id="9b328-276">No entanto, às vezes pode ser necessário expor APIs de forma segura para que os outros sites possam utilizá-las.</span><span class="sxs-lookup"><span data-stu-id="9b328-276">However, sometimes it might be required to expose APIs securely which other sites can consume.</span></span> <span data-ttu-id="9b328-277">O CORS (Compartilhamento de Recursos entre Origens) é um padrão W3C que permite ao servidor relaxar a política de mesma origem.</span><span class="sxs-lookup"><span data-stu-id="9b328-277">Cross Origin Resource Sharing (CORS) is a W3C standard that allows a server to relax the same-origin policy.</span></span> <span data-ttu-id="9b328-278">Usando o CORS, um servidor pode explicitamente permitir algumas solicitações entre origens e rejeitar outras.</span><span class="sxs-lookup"><span data-stu-id="9b328-278">Using CORS, a server can explicitly allow some cross-origin requests while rejecting others.</span></span></p><p><span data-ttu-id="9b328-279">O CORS é mais seguro e flexível do que técnicas anteriores, como o JSONP.</span><span class="sxs-lookup"><span data-stu-id="9b328-279">CORS is safer and more flexible than earlier techniques such as JSONP.</span></span> <span data-ttu-id="9b328-280">Essencialmente, habilitar o CORS significa adicionar alguns cabeçalhos de resposta HTTP (Access - Control-*) ao aplicativo da Web. Isso pode ser feito de duas formas.</span><span class="sxs-lookup"><span data-stu-id="9b328-280">At its core, enabling CORS translates to adding a few HTTP response headers (Access-Control-*) to the web application and this can be done in a couple of ways.</span></span></p>|

### <a name="example"></a><span data-ttu-id="9b328-281">Exemplo</span><span class="sxs-lookup"><span data-stu-id="9b328-281">Example</span></span>
<span data-ttu-id="9b328-282">Se o acesso ao arquivo Web.config estiver disponível, o CORS poderá ser adicionado ao seguinte código:</span><span class="sxs-lookup"><span data-stu-id="9b328-282">If access to Web.config is available, then CORS can be added through the following code:</span></span> 
```XML
<system.webServer>
    <httpProtocol>
      <customHeaders>
        <clear />
        <add name="Access-Control-Allow-Origin" value="http://example.com" />
      </customHeaders>
    </httpProtocol>
```

### <a name="example"></a><span data-ttu-id="9b328-283">Exemplo</span><span class="sxs-lookup"><span data-stu-id="9b328-283">Example</span></span>
<span data-ttu-id="9b328-284">Se o acesso ao arquivo web.config não estiver disponível, o CORS pode ser adicionado no seguinte código CSharp:</span><span class="sxs-lookup"><span data-stu-id="9b328-284">If access to web.config is not available, then CORS can be configured by adding the following CSharp code:</span></span> 
```C#
HttpContext.Response.AppendHeader("Access-Control-Allow-Origin", "http://example.com")
```

<span data-ttu-id="9b328-285">Observe que é essencial garantir que a lista de origens no atributo "Access-Control-Allow-Origin" esteja definida como um conjunto finito e confiável de origens.</span><span class="sxs-lookup"><span data-stu-id="9b328-285">Please note that it is critical to ensure that the list of origins in "Access-Control-Allow-Origin" attribute is set to a finite and trusted set of origins.</span></span> <span data-ttu-id="9b328-286">Se isso não for configurado corretamente (por exemplo, definindo o valor como '*'), sites mal-intencionados poderão disparar solicitações entre origens para o aplicativo da Web sem restrições, tornando o aplicativo vulnerável a ataques de CSRF.</span><span class="sxs-lookup"><span data-stu-id="9b328-286">Failing to configure this inappropriately (e.g., setting the value as '*') will allow malicious sites to trigger cross origin requests to the web application >without any restrictions, thereby making the application vulnerable to CSRF attacks.</span></span> 

## <span data-ttu-id="9b328-287"><a id="validate-aspnet"></a>Habilitar o atributo ValidateRequest em páginas ASP.NET</span><span class="sxs-lookup"><span data-stu-id="9b328-287"><a id="validate-aspnet"></a>Enable ValidateRequest attribute on ASP.NET Pages</span></span>

| <span data-ttu-id="9b328-288">Title</span><span class="sxs-lookup"><span data-stu-id="9b328-288">Title</span></span>                   | <span data-ttu-id="9b328-289">Detalhes</span><span class="sxs-lookup"><span data-stu-id="9b328-289">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="9b328-290">**Componente**</span><span class="sxs-lookup"><span data-stu-id="9b328-290">**Component**</span></span>               | <span data-ttu-id="9b328-291">Aplicativo Web</span><span class="sxs-lookup"><span data-stu-id="9b328-291">Web Application</span></span> | 
| <span data-ttu-id="9b328-292">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="9b328-292">**SDL Phase**</span></span>               | <span data-ttu-id="9b328-293">Compilação</span><span class="sxs-lookup"><span data-stu-id="9b328-293">Build</span></span> |  
| <span data-ttu-id="9b328-294">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="9b328-294">**Applicable Technologies**</span></span> | <span data-ttu-id="9b328-295">Web Forms, MVC5</span><span class="sxs-lookup"><span data-stu-id="9b328-295">Web Forms, MVC5</span></span> |
| <span data-ttu-id="9b328-296">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="9b328-296">**Attributes**</span></span>              | <span data-ttu-id="9b328-297">N/D</span><span class="sxs-lookup"><span data-stu-id="9b328-297">N/A</span></span>  |
| <span data-ttu-id="9b328-298">**Referências**</span><span class="sxs-lookup"><span data-stu-id="9b328-298">**References**</span></span>              | [<span data-ttu-id="9b328-299">Solicitar validação - evitando ataques de script</span><span class="sxs-lookup"><span data-stu-id="9b328-299">Request Validation - Preventing Script Attacks</span></span>](http://www.asp.net/whitepapers/request-validation) |
| <span data-ttu-id="9b328-300">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="9b328-300">**Steps**</span></span> | <p><span data-ttu-id="9b328-301">A validação de solicitação, um recurso do ASP.NET oferecido desde a versão 1.1, impede que o servidor aceite conteúdo sem HTML codificado.</span><span class="sxs-lookup"><span data-stu-id="9b328-301">Request validation, a feature of ASP.NET since version 1.1, prevents the server from accepting content containing un-encoded HTML.</span></span> <span data-ttu-id="9b328-302">Esse recurso foi criado para evitar alguns ataques de injeção de script, em que o código de script ou HTML do cliente pode ser enviado inadvertidamente para um servidor, armazenado e, em seguida, apresentado a outros usuários.</span><span class="sxs-lookup"><span data-stu-id="9b328-302">This feature is designed to help prevent some script-injection attacks whereby client script code or HTML can be unknowingly submitted to a server, stored, and then presented to other users.</span></span> <span data-ttu-id="9b328-303">Ainda recomendamos que você valide todos os dados de entrada e os codifique com HTML quando for apropriado.</span><span class="sxs-lookup"><span data-stu-id="9b328-303">We still strongly recommend that you validate all input data and HTML encode it when appropriate.</span></span></p><p><span data-ttu-id="9b328-304">A validação de solicitação é executada pela comparação de todos os dados de entrada com uma lista de valores potencialmente perigosos.</span><span class="sxs-lookup"><span data-stu-id="9b328-304">Request validation is performed by comparing all input data to a list of potentially dangerous values.</span></span> <span data-ttu-id="9b328-305">Se uma correspondência for encontrada, o ASP.NET gera uma `HttpRequestValidationException`.</span><span class="sxs-lookup"><span data-stu-id="9b328-305">If a match occurs, ASP.NET raises an `HttpRequestValidationException`.</span></span> <span data-ttu-id="9b328-306">Por padrão, o recurso de validação de solicitação está habilitado.</span><span class="sxs-lookup"><span data-stu-id="9b328-306">By default, Request Validation feature is enabled.</span></span></p>|

### <a name="example"></a><span data-ttu-id="9b328-307">Exemplo</span><span class="sxs-lookup"><span data-stu-id="9b328-307">Example</span></span>
<span data-ttu-id="9b328-308">No entanto, esse recurso pode ser desabilitado no nível da página:</span><span class="sxs-lookup"><span data-stu-id="9b328-308">However, this feature can be disabled at page level:</span></span> 
```XML
<%@ Page validateRequest="false" %> 
```
<span data-ttu-id="9b328-309">ou no nível do aplicativo:</span><span class="sxs-lookup"><span data-stu-id="9b328-309">or, at application level</span></span> 
```XML
<configuration>
   <system.web>
      <pages validateRequest="false" />
   </system.web>
</configuration>
```
<span data-ttu-id="9b328-310">Observe que o recurso de validação de solicitação não tem suporte no pipeline do MVC6 nem faz parte dele.</span><span class="sxs-lookup"><span data-stu-id="9b328-310">Please note that Request Validation feature is not supported, and is not part of MVC6 pipeline.</span></span> 

## <span data-ttu-id="9b328-311"><a id="local-js"></a>Usar as versões mais recentes de bibliotecas JavaScript hospedadas localmente</span><span class="sxs-lookup"><span data-stu-id="9b328-311"><a id="local-js"></a>Use locally-hosted latest versions of JavaScript libraries</span></span>

| <span data-ttu-id="9b328-312">Title</span><span class="sxs-lookup"><span data-stu-id="9b328-312">Title</span></span>                   | <span data-ttu-id="9b328-313">Detalhes</span><span class="sxs-lookup"><span data-stu-id="9b328-313">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="9b328-314">**Componente**</span><span class="sxs-lookup"><span data-stu-id="9b328-314">**Component**</span></span>               | <span data-ttu-id="9b328-315">Aplicativo Web</span><span class="sxs-lookup"><span data-stu-id="9b328-315">Web Application</span></span> | 
| <span data-ttu-id="9b328-316">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="9b328-316">**SDL Phase**</span></span>               | <span data-ttu-id="9b328-317">Compilação</span><span class="sxs-lookup"><span data-stu-id="9b328-317">Build</span></span> |  
| <span data-ttu-id="9b328-318">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="9b328-318">**Applicable Technologies**</span></span> | <span data-ttu-id="9b328-319">Genérico</span><span class="sxs-lookup"><span data-stu-id="9b328-319">Generic</span></span> |
| <span data-ttu-id="9b328-320">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="9b328-320">**Attributes**</span></span>              | <span data-ttu-id="9b328-321">N/D</span><span class="sxs-lookup"><span data-stu-id="9b328-321">N/A</span></span>  |
| <span data-ttu-id="9b328-322">**Referências**</span><span class="sxs-lookup"><span data-stu-id="9b328-322">**References**</span></span>              | <span data-ttu-id="9b328-323">N/D</span><span class="sxs-lookup"><span data-stu-id="9b328-323">N/A</span></span>  |
| <span data-ttu-id="9b328-324">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="9b328-324">**Steps**</span></span> | <p><span data-ttu-id="9b328-325">Os desenvolvedores que usam bibliotecas JavaScript padrão, como a JQuery, devem usar as versões aprovadas das bibliotecas JavaScript comuns que não contêm falhas de segurança conhecidas.</span><span class="sxs-lookup"><span data-stu-id="9b328-325">Developers using standard JavaScript libraries like JQuery must use approved versions of common JavaScript libraries that do not contain known security flaws.</span></span> <span data-ttu-id="9b328-326">Uma boa prática é usar a versão mais recente das bibliotecas, porque elas contêm correções de segurança para vulnerabilidades conhecidas em suas versões anteriores.</span><span class="sxs-lookup"><span data-stu-id="9b328-326">A good practice is to use the most latest version of the libraries, since they contain security fixes for known vulnerabilities in their older versions.</span></span></p><p><span data-ttu-id="9b328-327">Se a versão mais recente não puder ser usada por motivos de compatibilidade, as versões mínimas abaixo devem ser usadas.</span><span class="sxs-lookup"><span data-stu-id="9b328-327">If the most recent release cannot be used due to compatibility reasons, the below minimum versions should be used.</span></span></p><p><span data-ttu-id="9b328-328">Versões mínimas aceitáveis:</span><span class="sxs-lookup"><span data-stu-id="9b328-328">Acceptable minimum versions:</span></span></p><ul><li><span data-ttu-id="9b328-329">**JQuery**</span><span class="sxs-lookup"><span data-stu-id="9b328-329">**JQuery**</span></span><ul><li><span data-ttu-id="9b328-330">JQuery 1.7.1</span><span class="sxs-lookup"><span data-stu-id="9b328-330">JQuery 1.7.1</span></span></li><li><span data-ttu-id="9b328-331">JQueryUI 1.10.0</span><span class="sxs-lookup"><span data-stu-id="9b328-331">JQueryUI 1.10.0</span></span></li><li><span data-ttu-id="9b328-332">JQuery Validate 1.9</span><span class="sxs-lookup"><span data-stu-id="9b328-332">JQuery Validate 1.9</span></span></li><li><span data-ttu-id="9b328-333">JQuery Mobile 1.0.1</span><span class="sxs-lookup"><span data-stu-id="9b328-333">JQuery Mobile 1.0.1</span></span></li><li><span data-ttu-id="9b328-334">JQuery Cycle 2.99</span><span class="sxs-lookup"><span data-stu-id="9b328-334">JQuery Cycle 2.99</span></span></li><li><span data-ttu-id="9b328-335">JQuery DataTables 1.9.0</span><span class="sxs-lookup"><span data-stu-id="9b328-335">JQuery DataTables 1.9.0</span></span></li></ul></li><li><span data-ttu-id="9b328-336">**Ajax Control Toolkit**</span><span class="sxs-lookup"><span data-stu-id="9b328-336">**Ajax Control Toolkit**</span></span><ul><li><span data-ttu-id="9b328-337">Ajax Control Toolkit 40412</span><span class="sxs-lookup"><span data-stu-id="9b328-337">Ajax Control Toolkit 40412</span></span></li></ul></li><li><span data-ttu-id="9b328-338">**ASP.NET Web Forms e Ajax**</span><span class="sxs-lookup"><span data-stu-id="9b328-338">**ASP.NET Web Forms and Ajax**</span></span><ul><li><span data-ttu-id="9b328-339">ASP.NET Web Forms e Ajax 4</span><span class="sxs-lookup"><span data-stu-id="9b328-339">ASP.NET Web Forms and Ajax 4</span></span></li><li><span data-ttu-id="9b328-340">ASP.NET Ajax 3.5</span><span class="sxs-lookup"><span data-stu-id="9b328-340">ASP.NET Ajax 3.5</span></span></li></ul></li><li><span data-ttu-id="9b328-341">**ASP.NET MVC**</span><span class="sxs-lookup"><span data-stu-id="9b328-341">**ASP.NET MVC**</span></span><ul><li><span data-ttu-id="9b328-342">ASP.NET MVC 3.0</span><span class="sxs-lookup"><span data-stu-id="9b328-342">ASP.NET MVC 3.0</span></span></li></ul></li></ul><p><span data-ttu-id="9b328-343">Nunca carregue quaisquer bibliotecas JavaScript de sites externos, como CDNs públicas.</span><span class="sxs-lookup"><span data-stu-id="9b328-343">Never load any JavaScript library from external sites such as public CDNs</span></span></p>|

## <span data-ttu-id="9b328-344"><a id="mime-sniff"></a>Desabilitar a detecção automática de MIME</span><span class="sxs-lookup"><span data-stu-id="9b328-344"><a id="mime-sniff"></a>Disable automatic MIME sniffing</span></span>

| <span data-ttu-id="9b328-345">Title</span><span class="sxs-lookup"><span data-stu-id="9b328-345">Title</span></span>                   | <span data-ttu-id="9b328-346">Detalhes</span><span class="sxs-lookup"><span data-stu-id="9b328-346">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="9b328-347">**Componente**</span><span class="sxs-lookup"><span data-stu-id="9b328-347">**Component**</span></span>               | <span data-ttu-id="9b328-348">Aplicativo Web</span><span class="sxs-lookup"><span data-stu-id="9b328-348">Web Application</span></span> | 
| <span data-ttu-id="9b328-349">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="9b328-349">**SDL Phase**</span></span>               | <span data-ttu-id="9b328-350">Compilação</span><span class="sxs-lookup"><span data-stu-id="9b328-350">Build</span></span> |  
| <span data-ttu-id="9b328-351">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="9b328-351">**Applicable Technologies**</span></span> | <span data-ttu-id="9b328-352">Genérico</span><span class="sxs-lookup"><span data-stu-id="9b328-352">Generic</span></span> |
| <span data-ttu-id="9b328-353">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="9b328-353">**Attributes**</span></span>              | <span data-ttu-id="9b328-354">N/D</span><span class="sxs-lookup"><span data-stu-id="9b328-354">N/A</span></span>  |
| <span data-ttu-id="9b328-355">**Referências**</span><span class="sxs-lookup"><span data-stu-id="9b328-355">**References**</span></span>              | <span data-ttu-id="9b328-356">[Segurança do IE8 parte V: proteção abrangente](http://blogs.msdn.com/ie/archive/2008/07/02/ie8-security-part-v-comprehensive-protection.aspx), [Tipo de MIME](http://en.wikipedia.org/wiki/Mime_type)</span><span class="sxs-lookup"><span data-stu-id="9b328-356">[IE8 Security Part V: Comprehensive Protection](http://blogs.msdn.com/ie/archive/2008/07/02/ie8-security-part-v-comprehensive-protection.aspx), [MIME type](http://en.wikipedia.org/wiki/Mime_type)</span></span> |
| <span data-ttu-id="9b328-357">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="9b328-357">**Steps**</span></span> | <span data-ttu-id="9b328-358">O cabeçalho X-Content-Type-Options é um cabeçalho HTTP que permite aos desenvolvedores especificar que seus conteúdos não devem ter o MIME detectado.</span><span class="sxs-lookup"><span data-stu-id="9b328-358">The X-Content-Type-Options header is an HTTP header that allows developers to specify that their content should not be MIME-sniffed.</span></span> <span data-ttu-id="9b328-359">Esse cabeçalho foi criado para reduzir os ataques de detecção de MIME.</span><span class="sxs-lookup"><span data-stu-id="9b328-359">This header is designed to mitigate MIME-Sniffing attacks.</span></span> <span data-ttu-id="9b328-360">Para cada página que pode incluir conteúdo controlável pelo usuário, você deve usar o cabeçalho HTTP X-Content-Type-Options:nosniff.</span><span class="sxs-lookup"><span data-stu-id="9b328-360">For each page that could contain user controllable content, you must use the HTTP Header X-Content-Type-Options:nosniff.</span></span> <span data-ttu-id="9b328-361">Para habilitar globalmente o cabeçalho necessário para todas as páginas do aplicativo, você tem as seguintes opções:</span><span class="sxs-lookup"><span data-stu-id="9b328-361">To enable the required header globally for all pages in the application, you can do one of the following</span></span>|

### <a name="example"></a><span data-ttu-id="9b328-362">Exemplo</span><span class="sxs-lookup"><span data-stu-id="9b328-362">Example</span></span>
<span data-ttu-id="9b328-363">Adicionar o cabeçalho no arquivo web.config se o aplicativo estiver hospedado no Internet Information Services (IIS) 7 ou posterior.</span><span class="sxs-lookup"><span data-stu-id="9b328-363">Add the header in the web.config file if the application is hosted by Internet Information Services (IIS) 7 onwards.</span></span> 
```XML
<system.webServer>
<httpProtocol>
<customHeaders>
<add name="X-Content-Type-Options" value="nosniff"/>
</customHeaders>
</httpProtocol>
</system.webServer>
```

### <a name="example"></a><span data-ttu-id="9b328-364">Exemplo</span><span class="sxs-lookup"><span data-stu-id="9b328-364">Example</span></span>
<span data-ttu-id="9b328-365">Adicionar o cabeçalho usando a Aplication\_BeginRequest global.</span><span class="sxs-lookup"><span data-stu-id="9b328-365">Add the header through the global Application\_BeginRequest</span></span> 
```C#
void Application_BeginRequest(object sender, EventArgs e)
{
this.Response.Headers["X-Content-Type-Options"] = "nosniff";
}
```

### <a name="example"></a><span data-ttu-id="9b328-366">Exemplo</span><span class="sxs-lookup"><span data-stu-id="9b328-366">Example</span></span>
<span data-ttu-id="9b328-367">Implementar o módulo HTTP personalizado.</span><span class="sxs-lookup"><span data-stu-id="9b328-367">Implement custom HTTP module</span></span> 
```C#
public class XContentTypeOptionsModule : IHttpModule
{
#region IHttpModule Members
public void Dispose()
{
}
public void Init(HttpApplication context)
{
context.PreSendRequestHeaders += newEventHandler(context_PreSendRequestHeaders);
}
#endregion
void context_PreSendRequestHeaders(object sender, EventArgs e)
{
HttpApplication application = sender as HttpApplication;
if (application == null)
  return;
if (application.Response.Headers["X-Content-Type-Options "] != null)
  return;
application.Response.Headers.Add("X-Content-Type-Options ", "nosniff");
}
}
```

### <a name="example"></a><span data-ttu-id="9b328-368">Exemplo</span><span class="sxs-lookup"><span data-stu-id="9b328-368">Example</span></span>
<span data-ttu-id="9b328-369">Você pode habilitar o cabeçalho necessário apenas para páginas específicas adicionando-o a respostas individuais.</span><span class="sxs-lookup"><span data-stu-id="9b328-369">You can enable the required header only for specific pages by adding it to individual responses:</span></span> 

```C#
this.Response.Headers["X-Content-Type-Options"] = "nosniff";
```

## <span data-ttu-id="9b328-370"><a id="standard-finger"></a>Remover cabeçalhos de servidor padrão nos sites do Microsoft Azure para evitar impressões digitais</span><span class="sxs-lookup"><span data-stu-id="9b328-370"><a id="standard-finger"></a>Remove standard server headers on Windows Azure Web Sites to avoid fingerprinting</span></span>

| <span data-ttu-id="9b328-371">Title</span><span class="sxs-lookup"><span data-stu-id="9b328-371">Title</span></span>                   | <span data-ttu-id="9b328-372">Detalhes</span><span class="sxs-lookup"><span data-stu-id="9b328-372">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="9b328-373">**Componente**</span><span class="sxs-lookup"><span data-stu-id="9b328-373">**Component**</span></span>               | <span data-ttu-id="9b328-374">Aplicativo Web</span><span class="sxs-lookup"><span data-stu-id="9b328-374">Web Application</span></span> | 
| <span data-ttu-id="9b328-375">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="9b328-375">**SDL Phase**</span></span>               | <span data-ttu-id="9b328-376">Compilação</span><span class="sxs-lookup"><span data-stu-id="9b328-376">Build</span></span> |  
| <span data-ttu-id="9b328-377">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="9b328-377">**Applicable Technologies**</span></span> | <span data-ttu-id="9b328-378">Genérico</span><span class="sxs-lookup"><span data-stu-id="9b328-378">Generic</span></span> |
| <span data-ttu-id="9b328-379">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="9b328-379">**Attributes**</span></span>              | <span data-ttu-id="9b328-380">Tipo de ambiente - Azure</span><span class="sxs-lookup"><span data-stu-id="9b328-380">EnvironmentType - Azure</span></span> |
| <span data-ttu-id="9b328-381">**Referências**</span><span class="sxs-lookup"><span data-stu-id="9b328-381">**References**</span></span>              | [<span data-ttu-id="9b328-382">Removendo cabeçalhos de servidor padrão nos sites do Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="9b328-382">Removing standard server headers on Windows Azure Web Sites</span></span>](https://azure.microsoft.com/blog/removing-standard-server-headers-on-windows-azure-web-sites/) |
| <span data-ttu-id="9b328-383">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="9b328-383">**Steps**</span></span> | <span data-ttu-id="9b328-384">Cabeçalhos como Server, X-Powered-By e X-AspNet-Version revelam informações sobre o servidor e as tecnologias subjacentes.</span><span class="sxs-lookup"><span data-stu-id="9b328-384">Headers such as Server, X-Powered-By, X-AspNet-Version reveal information about the server and the underlying technologies.</span></span> <span data-ttu-id="9b328-385">É recomendável suprimir esses cabeçalhos, impedindo, assim, a impressão digital do aplicativo</span><span class="sxs-lookup"><span data-stu-id="9b328-385">It is recommended to suppress these headers thereby preventing fingerprinting the application</span></span> |

## <span data-ttu-id="9b328-386"><a id="firewall-db"></a>Configurar um Firewall do Windows para acesso ao Mecanismo de Banco de Dados</span><span class="sxs-lookup"><span data-stu-id="9b328-386"><a id="firewall-db"></a>Configure a Windows Firewall for Database Engine Access</span></span>

| <span data-ttu-id="9b328-387">Title</span><span class="sxs-lookup"><span data-stu-id="9b328-387">Title</span></span>                   | <span data-ttu-id="9b328-388">Detalhes</span><span class="sxs-lookup"><span data-stu-id="9b328-388">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="9b328-389">**Componente**</span><span class="sxs-lookup"><span data-stu-id="9b328-389">**Component**</span></span>               | <span data-ttu-id="9b328-390">Banco de dados</span><span class="sxs-lookup"><span data-stu-id="9b328-390">Database</span></span> | 
| <span data-ttu-id="9b328-391">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="9b328-391">**SDL Phase**</span></span>               | <span data-ttu-id="9b328-392">Compilação</span><span class="sxs-lookup"><span data-stu-id="9b328-392">Build</span></span> |  
| <span data-ttu-id="9b328-393">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="9b328-393">**Applicable Technologies**</span></span> | <span data-ttu-id="9b328-394">SQL Azure, OnPrem</span><span class="sxs-lookup"><span data-stu-id="9b328-394">SQL Azure, OnPrem</span></span> |
| <span data-ttu-id="9b328-395">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="9b328-395">**Attributes**</span></span>              | <span data-ttu-id="9b328-396">N/D, Versão do SQL - V12</span><span class="sxs-lookup"><span data-stu-id="9b328-396">N/A, SQL Version - V12</span></span> |
| <span data-ttu-id="9b328-397">**Referências**</span><span class="sxs-lookup"><span data-stu-id="9b328-397">**References**</span></span>              | <span data-ttu-id="9b328-398">[Como configurar um firewall de banco de dados SQL do Azure](https://azure.microsoft.com/documentation/articles/sql-database-firewall-configure/), [Configurar um Firewall do Windows para conceder acesso ao mecanismo do banco de dados](https://msdn.microsoft.com/library/ms175043)</span><span class="sxs-lookup"><span data-stu-id="9b328-398">[How to configure an Azure SQL database firewall](https://azure.microsoft.com/documentation/articles/sql-database-firewall-configure/), [Configure a Windows Firewall for Database Engine Access](https://msdn.microsoft.com/library/ms175043)</span></span> |
| <span data-ttu-id="9b328-399">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="9b328-399">**Steps**</span></span> | <span data-ttu-id="9b328-400">Os sistemas de firewall ajudam a impedir o acesso não autorizado aos recursos do computador.</span><span class="sxs-lookup"><span data-stu-id="9b328-400">Firewall systems help prevent unauthorized access to computer resources.</span></span> <span data-ttu-id="9b328-401">Para acessar uma instância do mecanismo de banco de dados do SQL Server por meio de um firewall, você precisa configurar o firewall no computador que está executando o SQL Server para permitir o acesso.</span><span class="sxs-lookup"><span data-stu-id="9b328-401">To access an instance of the SQL Server Database Engine through a firewall, you must configure the firewall on the computer running SQL Server to allow access</span></span> |

## <span data-ttu-id="9b328-402"><a id="cors-api"></a>Garantir que apenas fontes confiáveis sejam permitidas se o CORS estiver habilitado na API Web ASP.NET</span><span class="sxs-lookup"><span data-stu-id="9b328-402"><a id="cors-api"></a>Ensure that only trusted origins are allowed if CORS is enabled on ASP.NET Web API</span></span>

| <span data-ttu-id="9b328-403">Title</span><span class="sxs-lookup"><span data-stu-id="9b328-403">Title</span></span>                   | <span data-ttu-id="9b328-404">Detalhes</span><span class="sxs-lookup"><span data-stu-id="9b328-404">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="9b328-405">**Componente**</span><span class="sxs-lookup"><span data-stu-id="9b328-405">**Component**</span></span>               | <span data-ttu-id="9b328-406">API Web</span><span class="sxs-lookup"><span data-stu-id="9b328-406">Web API</span></span> | 
| <span data-ttu-id="9b328-407">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="9b328-407">**SDL Phase**</span></span>               | <span data-ttu-id="9b328-408">Compilação</span><span class="sxs-lookup"><span data-stu-id="9b328-408">Build</span></span> |  
| <span data-ttu-id="9b328-409">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="9b328-409">**Applicable Technologies**</span></span> | <span data-ttu-id="9b328-410">MVC 5</span><span class="sxs-lookup"><span data-stu-id="9b328-410">MVC 5</span></span> |
| <span data-ttu-id="9b328-411">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="9b328-411">**Attributes**</span></span>              | <span data-ttu-id="9b328-412">N/D</span><span class="sxs-lookup"><span data-stu-id="9b328-412">N/A</span></span>  |
| <span data-ttu-id="9b328-413">**Referências**</span><span class="sxs-lookup"><span data-stu-id="9b328-413">**References**</span></span>              | <span data-ttu-id="9b328-414">[Permitindo solicitações entre origens na API Web ASP.NET 2](http://www.asp.net/web-api/overview/security/enabling-cross-origin-requests-in-web-api), [API Web ASP.NET - suporte ao CORS na API Web ASP.NET 2](https://msdn.microsoft.com/magazine/dn532203.aspx)</span><span class="sxs-lookup"><span data-stu-id="9b328-414">[Enabling Cross-Origin Requests in ASP.NET Web API 2](http://www.asp.net/web-api/overview/security/enabling-cross-origin-requests-in-web-api), [ASP.NET Web API - CORS Support in ASP.NET Web API 2](https://msdn.microsoft.com/magazine/dn532203.aspx)</span></span> |
| <span data-ttu-id="9b328-415">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="9b328-415">**Steps**</span></span> | <p><span data-ttu-id="9b328-416">A segurança do navegador impede que uma página da Web envie solicitações do AJAX para outro domínio.</span><span class="sxs-lookup"><span data-stu-id="9b328-416">Browser security prevents a web page from making AJAX requests to another domain.</span></span> <span data-ttu-id="9b328-417">Essa restrição se chama política da mesma origem e impede que um site mal-intencional leia dados confidenciais de outro site.</span><span class="sxs-lookup"><span data-stu-id="9b328-417">This restriction is called the same-origin policy, and prevents a malicious site from reading sensitive data from another site.</span></span> <span data-ttu-id="9b328-418">No entanto, às vezes pode ser necessário expor APIs de forma segura para que os outros sites possam utilizá-las.</span><span class="sxs-lookup"><span data-stu-id="9b328-418">However, sometimes it might be required to expose APIs securely which other sites can consume.</span></span> <span data-ttu-id="9b328-419">O CORS (Compartilhamento de Recursos entre Origens) é um padrão W3C que permite ao servidor relaxar a política de mesma origem.</span><span class="sxs-lookup"><span data-stu-id="9b328-419">Cross Origin Resource Sharing (CORS) is a W3C standard that allows a server to relax the same-origin policy.</span></span></p><p><span data-ttu-id="9b328-420">Usando o CORS, um servidor pode explicitamente permitir algumas solicitações entre origens e rejeitar outras.</span><span class="sxs-lookup"><span data-stu-id="9b328-420">Using CORS, a server can explicitly allow some cross-origin requests while rejecting others.</span></span> <span data-ttu-id="9b328-421">O CORS é mais seguro e flexível do que técnicas anteriores, como o JSONP.</span><span class="sxs-lookup"><span data-stu-id="9b328-421">CORS is safer and more flexible than earlier techniques such as JSONP.</span></span></p>|

### <a name="example"></a><span data-ttu-id="9b328-422">Exemplo</span><span class="sxs-lookup"><span data-stu-id="9b328-422">Example</span></span>
<span data-ttu-id="9b328-423">No arquivo App_Start/WebApiConfig.cs, adicione o seguinte código ao método WebApiConfig.Register.</span><span class="sxs-lookup"><span data-stu-id="9b328-423">In the App_Start/WebApiConfig.cs, add the following code to the WebApiConfig.Register method</span></span> 
```C#
using System.Web.Http;
namespace WebService
{
    public static class WebApiConfig
    {
        public static void Register(HttpConfiguration config)
        {
            // New code
            config.EnableCors();

            config.Routes.MapHttpRoute(
                name: "DefaultApi",
                routeTemplate: "api/{controller}/{id}",
                defaults: new { id = RouteParameter.Optional }
            );
        }
    }
}
```

### <a name="example"></a><span data-ttu-id="9b328-424">Exemplo</span><span class="sxs-lookup"><span data-stu-id="9b328-424">Example</span></span>
<span data-ttu-id="9b328-425">O atributo EnableCors pode ser aplicado aos métodos de ação em um controlador da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="9b328-425">EnableCors attribute can be applied to action methods in a controller as follows:</span></span> 

```C#
public class ResourcesController : ApiController
{
  [EnableCors("http://localhost:55912", // Origin
              null,                     // Request headers
              "GET",                    // HTTP methods
              "bar",                    // Response headers
              SupportsCredentials=true  // Allow credentials
  )]
  public HttpResponseMessage Get(int id)
  {
    var resp = Request.CreateResponse(HttpStatusCode.NoContent);
    resp.Headers.Add("bar", "a bar value");
    return resp;
  }
  [EnableCors("http://localhost:55912",       // Origin
              "Accept, Origin, Content-Type", // Request headers
              "PUT",                          // HTTP methods
              PreflightMaxAge=600             // Preflight cache duration
  )]
  public HttpResponseMessage Put(Resource data)
  {
    return Request.CreateResponse(HttpStatusCode.OK, data);
  }
  [EnableCors("http://localhost:55912",       // Origin
              "Accept, Origin, Content-Type", // Request headers
              "POST",                         // HTTP methods
              PreflightMaxAge=600             // Preflight cache duration
  )]
  public HttpResponseMessage Post(Resource data)
  {
    return Request.CreateResponse(HttpStatusCode.OK, data);
  }
}
```

<span data-ttu-id="9b328-426">Observe que é essencial garantir que a lista de origens no atributo EnableCors esteja definida como um conjunto finito e confiável de origens.</span><span class="sxs-lookup"><span data-stu-id="9b328-426">Please note that it is critical to ensure that the list of origins in EnableCors attribute is set to a finite and trusted set of origins.</span></span> <span data-ttu-id="9b328-427">Se isso não for configurado corretamente (por exemplo, definindo o valor como '*'), sites mal-intencionados poderão disparar solicitações entre origens para a API sem restrições, tornando a API vulnerável a ataques de CSRF.</span><span class="sxs-lookup"><span data-stu-id="9b328-427">Failing to configure this inappropriately (e.g., setting the value as '*') will allow malicious sites to trigger cross origin requests to the API without any restrictions, >thereby making the API vulnerable to CSRF attacks.</span></span> <span data-ttu-id="9b328-428">O atributo EnableCors pode ser decorado no nível do controlador.</span><span class="sxs-lookup"><span data-stu-id="9b328-428">EnableCors can be decorated at controller level.</span></span> 

### <a name="example"></a><span data-ttu-id="9b328-429">Exemplo</span><span class="sxs-lookup"><span data-stu-id="9b328-429">Example</span></span>
<span data-ttu-id="9b328-430">Para desabilitar o CORS em um determinado método de uma classe, use o atributo DisableCors conforme mostrado abaixo:</span><span class="sxs-lookup"><span data-stu-id="9b328-430">To disable CORS on a particular method in a class, the DisableCors attribute can be used as shown below:</span></span> 
```C#
[EnableCors("http://example.com", "Accept, Origin, Content-Type", "POST")]
public class ResourcesController : ApiController
{
  public HttpResponseMessage Put(Resource data)
  {
    return Request.CreateResponse(HttpStatusCode.OK, data);
  }
  public HttpResponseMessage Post(Resource data)
  {
    return Request.CreateResponse(HttpStatusCode.OK, data);
  }
  // CORS not allowed because of the [DisableCors] attribute
  [DisableCors]
  public HttpResponseMessage Delete(int id)
  {
    return Request.CreateResponse(HttpStatusCode.NoContent);
  }
}
```

| <span data-ttu-id="9b328-431">Title</span><span class="sxs-lookup"><span data-stu-id="9b328-431">Title</span></span>                   | <span data-ttu-id="9b328-432">Detalhes</span><span class="sxs-lookup"><span data-stu-id="9b328-432">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="9b328-433">**Componente**</span><span class="sxs-lookup"><span data-stu-id="9b328-433">**Component**</span></span>               | <span data-ttu-id="9b328-434">API Web</span><span class="sxs-lookup"><span data-stu-id="9b328-434">Web API</span></span> | 
| <span data-ttu-id="9b328-435">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="9b328-435">**SDL Phase**</span></span>               | <span data-ttu-id="9b328-436">Compilação</span><span class="sxs-lookup"><span data-stu-id="9b328-436">Build</span></span> |  
| <span data-ttu-id="9b328-437">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="9b328-437">**Applicable Technologies**</span></span> | <span data-ttu-id="9b328-438">MVC 6</span><span class="sxs-lookup"><span data-stu-id="9b328-438">MVC 6</span></span> |
| <span data-ttu-id="9b328-439">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="9b328-439">**Attributes**</span></span>              | <span data-ttu-id="9b328-440">N/D</span><span class="sxs-lookup"><span data-stu-id="9b328-440">N/A</span></span>  |
| <span data-ttu-id="9b328-441">**Referências**</span><span class="sxs-lookup"><span data-stu-id="9b328-441">**References**</span></span>              | [<span data-ttu-id="9b328-442">Permitindo solicitações entre origens (CORS) no ASP.NET Core 1.0</span><span class="sxs-lookup"><span data-stu-id="9b328-442">Enabling Cross-Origin Requests (CORS) in ASP.NET Core 1.0</span></span>](https://docs.asp.net/en/latest/security/cors.html) |
| <span data-ttu-id="9b328-443">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="9b328-443">**Steps**</span></span> | <p><span data-ttu-id="9b328-444">No ASP.NET 1.0, o CORS pode ser habilitado com o middleware ou o MVC.</span><span class="sxs-lookup"><span data-stu-id="9b328-444">In ASP.NET Core 1.0, CORS can be enabled either using middleware or using MVC.</span></span> <span data-ttu-id="9b328-445">Quando o MVC é usado para habilitar o CORS, os mesmos serviços do CORS são usados, mas o middleware CORS não.</span><span class="sxs-lookup"><span data-stu-id="9b328-445">When using MVC to enable CORS the same CORS services are used, but the CORS middleware is not.</span></span></p>|

<span data-ttu-id="9b328-446">**Abordagem 1** Habilitar o CORS com middleware: para habilitar o CORS para todo o aplicativo, adicione o middleware do CORS ao pipeline de solicitação usando o método da extensão UseCors.</span><span class="sxs-lookup"><span data-stu-id="9b328-446">**Approach-1** Enabling CORS with middleware: To enable CORS for the entire application add the CORS middleware to the request pipeline using the UseCors extension method.</span></span> <span data-ttu-id="9b328-447">Uma política entre origens pode ser especificada quando o middleware do CORS for adicionado usando a classe CorsPolicyBuilder.</span><span class="sxs-lookup"><span data-stu-id="9b328-447">A cross-origin policy can be specified when adding the CORS middleware using the CorsPolicyBuilder class.</span></span> <span data-ttu-id="9b328-448">Há duas maneiras de fazer isso:</span><span class="sxs-lookup"><span data-stu-id="9b328-448">There are two ways to do this:</span></span>

### <a name="example"></a><span data-ttu-id="9b328-449">Exemplo</span><span class="sxs-lookup"><span data-stu-id="9b328-449">Example</span></span>
<span data-ttu-id="9b328-450">A primeira é chamar UseCors com um lambda.</span><span class="sxs-lookup"><span data-stu-id="9b328-450">The first is to call UseCors with a lambda.</span></span> <span data-ttu-id="9b328-451">O lambda utiliza um objeto CorsPolicyBuilder:</span><span class="sxs-lookup"><span data-stu-id="9b328-451">The lambda takes a CorsPolicyBuilder object:</span></span> 
```C#
public void Configure(IApplicationBuilder app)
{
    app.UseCors(builder =>
        builder.WithOrigins("http://example.com")
        .WithMethods("GET", "POST", "HEAD")
        .WithHeaders("accept", "content-type", "origin", "x-custom-header"));
}
```

### <a name="example"></a><span data-ttu-id="9b328-452">Exemplo</span><span class="sxs-lookup"><span data-stu-id="9b328-452">Example</span></span>
<span data-ttu-id="9b328-453">A segunda é definir uma ou mais políticas CORS e, em seguida, selecionar a política pelo nome no tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="9b328-453">The second is to define one or more named CORS policies, and then select the policy by name at run time.</span></span> 
```C#
public void ConfigureServices(IServiceCollection services)
{
    services.AddCors(options =>
    {
        options.AddPolicy("AllowSpecificOrigin",
            builder => builder.WithOrigins("http://example.com"));
    });
}
public void Configure(IApplicationBuilder app)
{
    app.UseCors("AllowSpecificOrigin");
    app.Run(async (context) =>
    {
        await context.Response.WriteAsync("Hello World!");
    });
}
```

<span data-ttu-id="9b328-454">**Abordagem 2** Habilitar o CORS no MVC: os desenvolvedores podem usar o MVC como uma alternativa aplicar um CORS específico por ação, por controlador ou globalmente para todos os controladores.</span><span class="sxs-lookup"><span data-stu-id="9b328-454">**Approach-2** Enabling CORS in MVC: Developers can alternatively use MVC to apply specific CORS per action, per controller, or globally for all controllers.</span></span>

### <a name="example"></a><span data-ttu-id="9b328-455">Exemplo</span><span class="sxs-lookup"><span data-stu-id="9b328-455">Example</span></span>
<span data-ttu-id="9b328-456">Por ação: para especificar uma política de CORS para uma ação específica, adicione o atributo [EnableCors] à ação.</span><span class="sxs-lookup"><span data-stu-id="9b328-456">Per action: To specify a CORS policy for a specific action add the [EnableCors] attribute to the action.</span></span> <span data-ttu-id="9b328-457">Especifique o nome da política.</span><span class="sxs-lookup"><span data-stu-id="9b328-457">Specify the policy name.</span></span> 
```C#
public class HomeController : Controller
{
    [EnableCors("AllowSpecificOrigin")] 
    public IActionResult Index()
    {
        return View();
    }
```

### <a name="example"></a><span data-ttu-id="9b328-458">Exemplo</span><span class="sxs-lookup"><span data-stu-id="9b328-458">Example</span></span>
<span data-ttu-id="9b328-459">Por controlador:</span><span class="sxs-lookup"><span data-stu-id="9b328-459">Per controller:</span></span> 
```C#
[EnableCors("AllowSpecificOrigin")]
public class HomeController : Controller
{
```

### <a name="example"></a><span data-ttu-id="9b328-460">Exemplo</span><span class="sxs-lookup"><span data-stu-id="9b328-460">Example</span></span>
<span data-ttu-id="9b328-461">Globalmente:</span><span class="sxs-lookup"><span data-stu-id="9b328-461">Globally:</span></span> 
```C#
public void ConfigureServices(IServiceCollection services)
{
    services.AddMvc();
    services.Configure<MvcOptions>(options =>
    {
        options.Filters.Add(new CorsAuthorizationFilterFactory("AllowSpecificOrigin"));
    });
}
```
<span data-ttu-id="9b328-462">Observe que é essencial garantir que a lista de origens no atributo EnableCors esteja definida como um conjunto finito e confiável de origens.</span><span class="sxs-lookup"><span data-stu-id="9b328-462">Please note that it is critical to ensure that the list of origins in EnableCors attribute is set to a finite and trusted set of origins.</span></span> <span data-ttu-id="9b328-463">Se isso não for configurado corretamente (por exemplo, definindo o valor como '*'), sites mal-intencionados poderão disparar solicitações entre origens para a API sem restrições, tornando a API vulnerável a ataques de CSRF.</span><span class="sxs-lookup"><span data-stu-id="9b328-463">Failing to configure this inappropriately (e.g., setting the value as '*') will allow malicious sites to trigger cross origin requests to the API without any restrictions, >thereby making the API vulnerable to CSRF attacks.</span></span> 

### <a name="example"></a><span data-ttu-id="9b328-464">Exemplo</span><span class="sxs-lookup"><span data-stu-id="9b328-464">Example</span></span>
<span data-ttu-id="9b328-465">Para desabilitar o CORS para um controlador ou uma ação, use o atributo [DisableCors].</span><span class="sxs-lookup"><span data-stu-id="9b328-465">To disable CORS for a controller or action, use the [DisableCors] attribute.</span></span> 
```C#
[DisableCors]
    public IActionResult About()
    {
        return View();
    }
```

## <span data-ttu-id="9b328-466"><a id="config-sensitive"></a>Criptografar as seções dos arquivos de configuração da API Web que contêm dados confidenciais</span><span class="sxs-lookup"><span data-stu-id="9b328-466"><a id="config-sensitive"></a>Encrypt sections of Web API's configuration files that contain sensitive data</span></span>

| <span data-ttu-id="9b328-467">Title</span><span class="sxs-lookup"><span data-stu-id="9b328-467">Title</span></span>                   | <span data-ttu-id="9b328-468">Detalhes</span><span class="sxs-lookup"><span data-stu-id="9b328-468">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="9b328-469">**Componente**</span><span class="sxs-lookup"><span data-stu-id="9b328-469">**Component**</span></span>               | <span data-ttu-id="9b328-470">API Web</span><span class="sxs-lookup"><span data-stu-id="9b328-470">Web API</span></span> | 
| <span data-ttu-id="9b328-471">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="9b328-471">**SDL Phase**</span></span>               | <span data-ttu-id="9b328-472">Implantação</span><span class="sxs-lookup"><span data-stu-id="9b328-472">Deployment</span></span> |  
| <span data-ttu-id="9b328-473">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="9b328-473">**Applicable Technologies**</span></span> | <span data-ttu-id="9b328-474">Genérico</span><span class="sxs-lookup"><span data-stu-id="9b328-474">Generic</span></span> |
| <span data-ttu-id="9b328-475">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="9b328-475">**Attributes**</span></span>              | <span data-ttu-id="9b328-476">N/D</span><span class="sxs-lookup"><span data-stu-id="9b328-476">N/A</span></span>  |
| <span data-ttu-id="9b328-477">**Referências**</span><span class="sxs-lookup"><span data-stu-id="9b328-477">**References**</span></span>              | <span data-ttu-id="9b328-478">[Como: Criptografar seções de configuração no ASP.NET 2.0 usando DPAPI](https://msdn.microsoft.com/library/ff647398.aspx), [Especificando um provedor de configuração protegida](https://msdn.microsoft.com/library/68ze1hb2.aspx), [Usando o Azure Key Vault para proteger os segredos do aplicativo](https://azure.microsoft.com/documentation/articles/guidance-multitenant-identity-keyvault/)</span><span class="sxs-lookup"><span data-stu-id="9b328-478">[How To: Encrypt Configuration Sections in ASP.NET 2.0 Using DPAPI](https://msdn.microsoft.com/library/ff647398.aspx), [Specifying a Protected Configuration Provider](https://msdn.microsoft.com/library/68ze1hb2.aspx), [Using Azure Key Vault to protect application secrets](https://azure.microsoft.com/documentation/articles/guidance-multitenant-identity-keyvault/)</span></span> |
| <span data-ttu-id="9b328-479">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="9b328-479">**Steps**</span></span> | <span data-ttu-id="9b328-480">Arquivos de configuração, tais como Web. config e appsettings.json geralmente são usados para armazenar informações confidenciais, incluindo nomes de usuários, senhas, cadeias de conexão de banco de dados e chaves de criptografia.</span><span class="sxs-lookup"><span data-stu-id="9b328-480">Configuration files such as the Web.config, appsettings.json are often used to hold sensitive information, including user names, passwords, database connection strings, and encryption keys.</span></span> <span data-ttu-id="9b328-481">Se você não proteger essas informações, o aplicativo ficará vulnerável a usuários mal-intencionados, que podem obter informações sigilosas, como nomes usuários e senhas de contas, nomes de bancos de dados e nomes de servidores.</span><span class="sxs-lookup"><span data-stu-id="9b328-481">If you do not protect this information, your application is vulnerable to attackers or malicious users obtaining sensitive information such as account user names and passwords, database names and server names.</span></span> <span data-ttu-id="9b328-482">Com base no tipo de implantação (no Azure ou local), criptografe as seções confidenciais dos arquivos de configuração usando a DPAPI ou serviços, como o Azure Key Vault.</span><span class="sxs-lookup"><span data-stu-id="9b328-482">Based on the deployment type (azure/on-prem), encrypt the sensitive sections of config files using DPAPI or services like Azure Key Vault.</span></span> |

## <span data-ttu-id="9b328-483"><a id="admin-strong"></a>Garantir que todas as interfaces de administrador sejam protegidas com credenciais fortes</span><span class="sxs-lookup"><span data-stu-id="9b328-483"><a id="admin-strong"></a>Ensure that all admin interfaces are secured with strong credentials</span></span>

| <span data-ttu-id="9b328-484">Title</span><span class="sxs-lookup"><span data-stu-id="9b328-484">Title</span></span>                   | <span data-ttu-id="9b328-485">Detalhes</span><span class="sxs-lookup"><span data-stu-id="9b328-485">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="9b328-486">**Componente**</span><span class="sxs-lookup"><span data-stu-id="9b328-486">**Component**</span></span>               | <span data-ttu-id="9b328-487">Dispositivo IoT</span><span class="sxs-lookup"><span data-stu-id="9b328-487">IoT Device</span></span> | 
| <span data-ttu-id="9b328-488">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="9b328-488">**SDL Phase**</span></span>               | <span data-ttu-id="9b328-489">Implantação</span><span class="sxs-lookup"><span data-stu-id="9b328-489">Deployment</span></span> |  
| <span data-ttu-id="9b328-490">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="9b328-490">**Applicable Technologies**</span></span> | <span data-ttu-id="9b328-491">Genérico</span><span class="sxs-lookup"><span data-stu-id="9b328-491">Generic</span></span> |
| <span data-ttu-id="9b328-492">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="9b328-492">**Attributes**</span></span>              | <span data-ttu-id="9b328-493">N/D</span><span class="sxs-lookup"><span data-stu-id="9b328-493">N/A</span></span>  |
| <span data-ttu-id="9b328-494">**Referências**</span><span class="sxs-lookup"><span data-stu-id="9b328-494">**References**</span></span>              | <span data-ttu-id="9b328-495">N/D</span><span class="sxs-lookup"><span data-stu-id="9b328-495">N/A</span></span>  |
| <span data-ttu-id="9b328-496">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="9b328-496">**Steps**</span></span> | <span data-ttu-id="9b328-497">Quaisquer interfaces administrativas expostas pelo gateway de campo ou pelo dispositivo devem ser protegidas com credenciais fortes.</span><span class="sxs-lookup"><span data-stu-id="9b328-497">Any administrative interfaces that the device or field gateway exposes should be secured using strong credentials.</span></span> <span data-ttu-id="9b328-498">Outras interfaces expostas, como Wi-Fi, SSH, compartilhamentos de arquivos e FTP, também devem ser protegidas com credenciais fortes.</span><span class="sxs-lookup"><span data-stu-id="9b328-498">Also, any other exposed interfaces like WiFi, SSH, File shares, FTP should be secured with strong credentials.</span></span> <span data-ttu-id="9b328-499">Senhas fracas padrão não devem ser usadas.</span><span class="sxs-lookup"><span data-stu-id="9b328-499">Default weak passwords should not be used.</span></span> |

## <span data-ttu-id="9b328-500"><a id="unknown-exe"></a>Garantir que um código desconhecido não seja executado em dispositivos</span><span class="sxs-lookup"><span data-stu-id="9b328-500"><a id="unknown-exe"></a>Ensure that unknown code cannot execute on devices</span></span>

| <span data-ttu-id="9b328-501">Title</span><span class="sxs-lookup"><span data-stu-id="9b328-501">Title</span></span>                   | <span data-ttu-id="9b328-502">Detalhes</span><span class="sxs-lookup"><span data-stu-id="9b328-502">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="9b328-503">**Componente**</span><span class="sxs-lookup"><span data-stu-id="9b328-503">**Component**</span></span>               | <span data-ttu-id="9b328-504">Dispositivo IoT</span><span class="sxs-lookup"><span data-stu-id="9b328-504">IoT Device</span></span> | 
| <span data-ttu-id="9b328-505">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="9b328-505">**SDL Phase**</span></span>               | <span data-ttu-id="9b328-506">Compilação</span><span class="sxs-lookup"><span data-stu-id="9b328-506">Build</span></span> |  
| <span data-ttu-id="9b328-507">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="9b328-507">**Applicable Technologies**</span></span> | <span data-ttu-id="9b328-508">Genérico</span><span class="sxs-lookup"><span data-stu-id="9b328-508">Generic</span></span> |
| <span data-ttu-id="9b328-509">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="9b328-509">**Attributes**</span></span>              | <span data-ttu-id="9b328-510">N/D</span><span class="sxs-lookup"><span data-stu-id="9b328-510">N/A</span></span>  |
| <span data-ttu-id="9b328-511">**Referências**</span><span class="sxs-lookup"><span data-stu-id="9b328-511">**References**</span></span>              | [<span data-ttu-id="9b328-512">Habilitar a inicialização segura e a Criptografia do dispositivo do BitLocker no Windows 10 IoT Core</span><span class="sxs-lookup"><span data-stu-id="9b328-512">Enabling Secure Boot and bit-locker Device Encryption on Windows 10 IoT Core</span></span>](https://developer.microsoft.com/windows/iot/win10/sb_bl) |
| <span data-ttu-id="9b328-513">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="9b328-513">**Steps**</span></span> | <span data-ttu-id="9b328-514">A Inicialização Segura de UEFI restringe o sistema a permitir somente a execução dos binários assinados por uma autoridade especificada.</span><span class="sxs-lookup"><span data-stu-id="9b328-514">UEFI Secure Boot restricts the system to only allow execution of binaries signed by a specified authority.</span></span> <span data-ttu-id="9b328-515">Esse recurso impede que códigos desconhecidos sejam executados na plataforma e enfraqueçam sua postura de segurança.</span><span class="sxs-lookup"><span data-stu-id="9b328-515">This feature prevents unknown code from being executed on the platform and potentially weakening the security posture of it.</span></span> <span data-ttu-id="9b328-516">Habilite a Inicialização Segura de UEFI e restrinja a lista de autoridades de certificação confiáveis para assinatura de código.</span><span class="sxs-lookup"><span data-stu-id="9b328-516">Enable UEFI Secure Boot and restrict the list of certificate authorities that are trusted for signing code.</span></span> <span data-ttu-id="9b328-517">Assine todos os códigos implantados no dispositivo usando uma das autoridades confiáveis.</span><span class="sxs-lookup"><span data-stu-id="9b328-517">Sign all code that is deployed on the device using one of the trusted authorities.</span></span> |

## <span data-ttu-id="9b328-518"><a id="partition-iot"></a>Criptografar o sistema operacional e partições adicionais do dispositivo IoT com o BitLocker</span><span class="sxs-lookup"><span data-stu-id="9b328-518"><a id="partition-iot"></a>Encrypt OS and additional partitions of IoT Device with bit-locker</span></span>

| <span data-ttu-id="9b328-519">Title</span><span class="sxs-lookup"><span data-stu-id="9b328-519">Title</span></span>                   | <span data-ttu-id="9b328-520">Detalhes</span><span class="sxs-lookup"><span data-stu-id="9b328-520">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="9b328-521">**Componente**</span><span class="sxs-lookup"><span data-stu-id="9b328-521">**Component**</span></span>               | <span data-ttu-id="9b328-522">Dispositivo IoT</span><span class="sxs-lookup"><span data-stu-id="9b328-522">IoT Device</span></span> | 
| <span data-ttu-id="9b328-523">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="9b328-523">**SDL Phase**</span></span>               | <span data-ttu-id="9b328-524">Compilação</span><span class="sxs-lookup"><span data-stu-id="9b328-524">Build</span></span> |  
| <span data-ttu-id="9b328-525">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="9b328-525">**Applicable Technologies**</span></span> | <span data-ttu-id="9b328-526">Genérico</span><span class="sxs-lookup"><span data-stu-id="9b328-526">Generic</span></span> |
| <span data-ttu-id="9b328-527">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="9b328-527">**Attributes**</span></span>              | <span data-ttu-id="9b328-528">N/D</span><span class="sxs-lookup"><span data-stu-id="9b328-528">N/A</span></span>  |
| <span data-ttu-id="9b328-529">**Referências**</span><span class="sxs-lookup"><span data-stu-id="9b328-529">**References**</span></span>              | <span data-ttu-id="9b328-530">N/D</span><span class="sxs-lookup"><span data-stu-id="9b328-530">N/A</span></span>  |
| <span data-ttu-id="9b328-531">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="9b328-531">**Steps**</span></span> | <span data-ttu-id="9b328-532">O Windows 10 IoT Core implementa uma versão leve da Criptografia do dispositivo do BitLocker, que tem uma dependência forte na presença de um TPM na plataforma, incluindo o protocolo preOS necessário na UEFI que realiza as medições necessárias.</span><span class="sxs-lookup"><span data-stu-id="9b328-532">Windows 10 IoT Core implements a lightweight version of bit-locker Device Encryption, which has a strong dependency on the presence of a TPM on the platform, including the necessary preOS protocol in UEFI that conducts the necessary measurements.</span></span> <span data-ttu-id="9b328-533">Essas medições do preOS garantem que o sistema operacional posteriormente tenha um registro definitivo de como ele foi iniciado. Use o BitLocker para criptografar as partições do sistema operacional e outras partições também, caso elas armazenem dados confidenciais.</span><span class="sxs-lookup"><span data-stu-id="9b328-533">These preOS measurements ensure that the OS later has a definitive record of how the OS was launched.Encrypt OS partitions using bit-locker and any additional partitions also in case they store any sensitive data.</span></span> |

## <span data-ttu-id="9b328-534"><a id="min-enable"></a>Garantir que apenas o mínimo de serviços/recursos estejam habilitados nos dispositivos</span><span class="sxs-lookup"><span data-stu-id="9b328-534"><a id="min-enable"></a>Ensure that only the minimum services/features are enabled on devices</span></span>

| <span data-ttu-id="9b328-535">Title</span><span class="sxs-lookup"><span data-stu-id="9b328-535">Title</span></span>                   | <span data-ttu-id="9b328-536">Detalhes</span><span class="sxs-lookup"><span data-stu-id="9b328-536">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="9b328-537">**Componente**</span><span class="sxs-lookup"><span data-stu-id="9b328-537">**Component**</span></span>               | <span data-ttu-id="9b328-538">Dispositivo IoT</span><span class="sxs-lookup"><span data-stu-id="9b328-538">IoT Device</span></span> | 
| <span data-ttu-id="9b328-539">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="9b328-539">**SDL Phase**</span></span>               | <span data-ttu-id="9b328-540">Implantação</span><span class="sxs-lookup"><span data-stu-id="9b328-540">Deployment</span></span> |  
| <span data-ttu-id="9b328-541">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="9b328-541">**Applicable Technologies**</span></span> | <span data-ttu-id="9b328-542">Genérico</span><span class="sxs-lookup"><span data-stu-id="9b328-542">Generic</span></span> |
| <span data-ttu-id="9b328-543">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="9b328-543">**Attributes**</span></span>              | <span data-ttu-id="9b328-544">N/D</span><span class="sxs-lookup"><span data-stu-id="9b328-544">N/A</span></span>  |
| <span data-ttu-id="9b328-545">**Referências**</span><span class="sxs-lookup"><span data-stu-id="9b328-545">**References**</span></span>              | <span data-ttu-id="9b328-546">N/D</span><span class="sxs-lookup"><span data-stu-id="9b328-546">N/A</span></span>  |
| <span data-ttu-id="9b328-547">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="9b328-547">**Steps**</span></span> | <span data-ttu-id="9b328-548">Não habilite ou desabilite no sistema operacional recursos ou serviços que não sejam necessários ao funcionamento da solução.</span><span class="sxs-lookup"><span data-stu-id="9b328-548">Do not enable or turn off any features or services in the OS that is not required for the functioning of the solution.</span></span> <span data-ttu-id="9b328-549">Por exemplo, se o dispositivo não precisar de uma interface de usuário para ser implantado, instale o Windows IoT Core no modo sem periféricos.</span><span class="sxs-lookup"><span data-stu-id="9b328-549">For e.g. if the device does not require a UI to be deployed, install Windows IoT Core in headless mode.</span></span> |

## <span data-ttu-id="9b328-550"><a id="field-bit-locker"></a>Criptografar o sistema operacional e partições adicionais do Gateway de Campo IoT com o BitLocker</span><span class="sxs-lookup"><span data-stu-id="9b328-550"><a id="field-bit-locker"></a>Encrypt OS and additional partitions of IoT Field Gateway with bit-locker</span></span>

| <span data-ttu-id="9b328-551">Title</span><span class="sxs-lookup"><span data-stu-id="9b328-551">Title</span></span>                   | <span data-ttu-id="9b328-552">Detalhes</span><span class="sxs-lookup"><span data-stu-id="9b328-552">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="9b328-553">**Componente**</span><span class="sxs-lookup"><span data-stu-id="9b328-553">**Component**</span></span>               | <span data-ttu-id="9b328-554">Gateway de Campo de IoT</span><span class="sxs-lookup"><span data-stu-id="9b328-554">IoT Field Gateway</span></span> | 
| <span data-ttu-id="9b328-555">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="9b328-555">**SDL Phase**</span></span>               | <span data-ttu-id="9b328-556">Implantação</span><span class="sxs-lookup"><span data-stu-id="9b328-556">Deployment</span></span> |  
| <span data-ttu-id="9b328-557">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="9b328-557">**Applicable Technologies**</span></span> | <span data-ttu-id="9b328-558">Genérico</span><span class="sxs-lookup"><span data-stu-id="9b328-558">Generic</span></span> |
| <span data-ttu-id="9b328-559">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="9b328-559">**Attributes**</span></span>              | <span data-ttu-id="9b328-560">N/D</span><span class="sxs-lookup"><span data-stu-id="9b328-560">N/A</span></span>  |
| <span data-ttu-id="9b328-561">**Referências**</span><span class="sxs-lookup"><span data-stu-id="9b328-561">**References**</span></span>              | <span data-ttu-id="9b328-562">N/D</span><span class="sxs-lookup"><span data-stu-id="9b328-562">N/A</span></span>  |
| <span data-ttu-id="9b328-563">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="9b328-563">**Steps**</span></span> | <span data-ttu-id="9b328-564">O Windows 10 IoT Core implementa uma versão leve da Criptografia do dispositivo do BitLocker, que tem uma dependência forte na presença de um TPM na plataforma, incluindo o protocolo preOS necessário na UEFI que realiza as medições necessárias.</span><span class="sxs-lookup"><span data-stu-id="9b328-564">Windows 10 IoT Core implements a lightweight version of bit-locker Device Encryption, which has a strong dependency on the presence of a TPM on the platform, including the necessary preOS protocol in UEFI that conducts the necessary measurements.</span></span> <span data-ttu-id="9b328-565">Essas medições do preOS garantem que o sistema operacional posteriormente tenha um registro definitivo de como ele foi iniciado. Use o BitLocker para criptografar as partições do sistema operacional e outras partições também, caso elas armazenem dados confidenciais.</span><span class="sxs-lookup"><span data-stu-id="9b328-565">These preOS measurements ensure that the OS later has a definitive record of how the OS was launched.Encrypt OS partitions using bit-locker and any additional partitions also in case they store any sensitive data.</span></span> |

## <span data-ttu-id="9b328-566"><a id="default-change"></a>Garantir que as credenciais de logon padrão do gateway de campo sejam alteradas durante a instalação</span><span class="sxs-lookup"><span data-stu-id="9b328-566"><a id="default-change"></a>Ensure that the default login credentials of the field gateway are changed during installation</span></span>

| <span data-ttu-id="9b328-567">Title</span><span class="sxs-lookup"><span data-stu-id="9b328-567">Title</span></span>                   | <span data-ttu-id="9b328-568">Detalhes</span><span class="sxs-lookup"><span data-stu-id="9b328-568">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="9b328-569">**Componente**</span><span class="sxs-lookup"><span data-stu-id="9b328-569">**Component**</span></span>               | <span data-ttu-id="9b328-570">Gateway de Campo de IoT</span><span class="sxs-lookup"><span data-stu-id="9b328-570">IoT Field Gateway</span></span> | 
| <span data-ttu-id="9b328-571">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="9b328-571">**SDL Phase**</span></span>               | <span data-ttu-id="9b328-572">Implantação</span><span class="sxs-lookup"><span data-stu-id="9b328-572">Deployment</span></span> |  
| <span data-ttu-id="9b328-573">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="9b328-573">**Applicable Technologies**</span></span> | <span data-ttu-id="9b328-574">Genérico</span><span class="sxs-lookup"><span data-stu-id="9b328-574">Generic</span></span> |
| <span data-ttu-id="9b328-575">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="9b328-575">**Attributes**</span></span>              | <span data-ttu-id="9b328-576">N/D</span><span class="sxs-lookup"><span data-stu-id="9b328-576">N/A</span></span>  |
| <span data-ttu-id="9b328-577">**Referências**</span><span class="sxs-lookup"><span data-stu-id="9b328-577">**References**</span></span>              | <span data-ttu-id="9b328-578">N/D</span><span class="sxs-lookup"><span data-stu-id="9b328-578">N/A</span></span>  |
| <span data-ttu-id="9b328-579">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="9b328-579">**Steps**</span></span> | <span data-ttu-id="9b328-580">Garanta que as credenciais de logon padrão do gateway de campo sejam alteradas durante a instalação.</span><span class="sxs-lookup"><span data-stu-id="9b328-580">Ensure that the default login credentials of the field gateway are changed during installation</span></span> |

## <span data-ttu-id="9b328-581"><a id="cloud-firmware"></a>Garantir que o Gateway de Nuvem implemente um processo para manter atualizado o firmware de dispositivos conectados</span><span class="sxs-lookup"><span data-stu-id="9b328-581"><a id="cloud-firmware"></a>Ensure that the Cloud Gateway implements a process to keep the connected devices firmware up to date</span></span>

| <span data-ttu-id="9b328-582">Title</span><span class="sxs-lookup"><span data-stu-id="9b328-582">Title</span></span>                   | <span data-ttu-id="9b328-583">Detalhes</span><span class="sxs-lookup"><span data-stu-id="9b328-583">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="9b328-584">**Componente**</span><span class="sxs-lookup"><span data-stu-id="9b328-584">**Component**</span></span>               | <span data-ttu-id="9b328-585">Gateway de Nuvem IoT</span><span class="sxs-lookup"><span data-stu-id="9b328-585">IoT Cloud Gateway</span></span> | 
| <span data-ttu-id="9b328-586">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="9b328-586">**SDL Phase**</span></span>               | <span data-ttu-id="9b328-587">Compilação</span><span class="sxs-lookup"><span data-stu-id="9b328-587">Build</span></span> |  
| <span data-ttu-id="9b328-588">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="9b328-588">**Applicable Technologies**</span></span> | <span data-ttu-id="9b328-589">Genérico</span><span class="sxs-lookup"><span data-stu-id="9b328-589">Generic</span></span> |
| <span data-ttu-id="9b328-590">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="9b328-590">**Attributes**</span></span>              | <span data-ttu-id="9b328-591">Opção de gateway - Hub IoT do Azure</span><span class="sxs-lookup"><span data-stu-id="9b328-591">Gateway choice - Azure IoT Hub</span></span> |
| <span data-ttu-id="9b328-592">**Referências**</span><span class="sxs-lookup"><span data-stu-id="9b328-592">**References**</span></span>              | <span data-ttu-id="9b328-593">[Visão geral do gerenciamento de dispositivos do Hub IoT](https://azure.microsoft.com/documentation/articles/iot-hub-device-management-overview/), [Como atualizar o firmware do dispositivo](https://azure.microsoft.com/documentation/articles/iot-hub-device-management-device-jobs/)</span><span class="sxs-lookup"><span data-stu-id="9b328-593">[IoT Hub Device Management Overview](https://azure.microsoft.com/documentation/articles/iot-hub-device-management-overview/), [How to update Device Firmware](https://azure.microsoft.com/documentation/articles/iot-hub-device-management-device-jobs/)</span></span> |
| <span data-ttu-id="9b328-594">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="9b328-594">**Steps**</span></span> | <span data-ttu-id="9b328-595">O LWM2M é um protocolo da Open Mobile Alliance destinado ao gerenciamento de dispositivos IoT.</span><span class="sxs-lookup"><span data-stu-id="9b328-595">LWM2M is a protocol from the Open Mobile Alliance for IoT Device Management.</span></span> <span data-ttu-id="9b328-596">O gerenciamento de dispositivos IoT do Azure permite que você interaja com dispositivos físicos usando os trabalhos do dispositivo.</span><span class="sxs-lookup"><span data-stu-id="9b328-596">Azure IoT device management allows to interact with physical devices using device jobs.</span></span> <span data-ttu-id="9b328-597">Certifique-se de que o Gateway de Nuvem implemente um processo para manter constantemente atualizados o dispositivo e outros dados de configuração usando o gerenciamento de dispositivos do Hub IoT do Azure.</span><span class="sxs-lookup"><span data-stu-id="9b328-597">Ensure that the Cloud Gateway implements a process to routinely keep the device and other configuration data up to date using Azure IoT Hub Device Management.</span></span> |

## <span data-ttu-id="9b328-598"><a id="controls-policies"></a>Garantir que os controles de segurança de ponto de extremidade estejam configurados nos dispositivos de acordo com as políticas organizacionais</span><span class="sxs-lookup"><span data-stu-id="9b328-598"><a id="controls-policies"></a>Ensure that devices have end-point security controls configured as per organizational policies</span></span>

| <span data-ttu-id="9b328-599">Title</span><span class="sxs-lookup"><span data-stu-id="9b328-599">Title</span></span>                   | <span data-ttu-id="9b328-600">Detalhes</span><span class="sxs-lookup"><span data-stu-id="9b328-600">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="9b328-601">**Componente**</span><span class="sxs-lookup"><span data-stu-id="9b328-601">**Component**</span></span>               | <span data-ttu-id="9b328-602">Limite de Confiança de Máquina</span><span class="sxs-lookup"><span data-stu-id="9b328-602">Machine Trust Boundary</span></span> | 
| <span data-ttu-id="9b328-603">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="9b328-603">**SDL Phase**</span></span>               | <span data-ttu-id="9b328-604">Implantação</span><span class="sxs-lookup"><span data-stu-id="9b328-604">Deployment</span></span> |  
| <span data-ttu-id="9b328-605">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="9b328-605">**Applicable Technologies**</span></span> | <span data-ttu-id="9b328-606">Genérico</span><span class="sxs-lookup"><span data-stu-id="9b328-606">Generic</span></span> |
| <span data-ttu-id="9b328-607">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="9b328-607">**Attributes**</span></span>              | <span data-ttu-id="9b328-608">N/D</span><span class="sxs-lookup"><span data-stu-id="9b328-608">N/A</span></span>  |
| <span data-ttu-id="9b328-609">**Referências**</span><span class="sxs-lookup"><span data-stu-id="9b328-609">**References**</span></span>              | <span data-ttu-id="9b328-610">N/D</span><span class="sxs-lookup"><span data-stu-id="9b328-610">N/A</span></span>  |
| <span data-ttu-id="9b328-611">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="9b328-611">**Steps**</span></span> | <span data-ttu-id="9b328-612">Certifique-se de que os dispositivos tenham controles de segurança de ponto de extremidade, como o BitLocker, para criptografia no nível do disco, um antivírus com assinaturas atualizadas, um firewall baseado em host, atualizações de sistema operacional, políticas de grupo, etc., e que eles estejam configurados de acordo com as políticas de segurança organizacionais.</span><span class="sxs-lookup"><span data-stu-id="9b328-612">Ensure that devices have end-point security controls such as bit-locker for disk-level encryption, anti-virus with updated signatures, host based firewall, OS upgrades, group policies etc. are configured as per organizational security policies.</span></span> |

## <span data-ttu-id="9b328-613"><a id="secure-keys"></a>Garantir o gerenciamento seguro das chaves de acesso do Armazenamento do Azure</span><span class="sxs-lookup"><span data-stu-id="9b328-613"><a id="secure-keys"></a>Ensure secure management of Azure storage access keys</span></span>

| <span data-ttu-id="9b328-614">Title</span><span class="sxs-lookup"><span data-stu-id="9b328-614">Title</span></span>                   | <span data-ttu-id="9b328-615">Detalhes</span><span class="sxs-lookup"><span data-stu-id="9b328-615">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="9b328-616">**Componente**</span><span class="sxs-lookup"><span data-stu-id="9b328-616">**Component**</span></span>               | <span data-ttu-id="9b328-617">Armazenamento do Azure</span><span class="sxs-lookup"><span data-stu-id="9b328-617">Azure Storage</span></span> | 
| <span data-ttu-id="9b328-618">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="9b328-618">**SDL Phase**</span></span>               | <span data-ttu-id="9b328-619">Implantação</span><span class="sxs-lookup"><span data-stu-id="9b328-619">Deployment</span></span> |  
| <span data-ttu-id="9b328-620">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="9b328-620">**Applicable Technologies**</span></span> | <span data-ttu-id="9b328-621">Genérico</span><span class="sxs-lookup"><span data-stu-id="9b328-621">Generic</span></span> |
| <span data-ttu-id="9b328-622">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="9b328-622">**Attributes**</span></span>              | <span data-ttu-id="9b328-623">N/D</span><span class="sxs-lookup"><span data-stu-id="9b328-623">N/A</span></span>  |
| <span data-ttu-id="9b328-624">**Referências**</span><span class="sxs-lookup"><span data-stu-id="9b328-624">**References**</span></span>              | [<span data-ttu-id="9b328-625">Guia de segurança do Armazenamento do Azure - Gerenciando as chaves da conta de armazenamento</span><span class="sxs-lookup"><span data-stu-id="9b328-625">Azure Storage security guide - Managing Your Storage Account Keys</span></span>](https://azure.microsoft.com/documentation/articles/storage-security-guide/#_managing-your-storage-account-keys) |
| <span data-ttu-id="9b328-626">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="9b328-626">**Steps**</span></span> | <p><span data-ttu-id="9b328-627">É recomendável armazenar as chaves de acesso do Armazenamento do Azure como um segredo no Azure Key Vault e solicitar que os aplicativos recuperem a chave diretamente do cofre de chaves.</span><span class="sxs-lookup"><span data-stu-id="9b328-627">Key Storage: It is recommended to store the Azure Storage access keys in Azure Key Vault as a secret and have the applications retrieve the key from key vault.</span></span> <span data-ttu-id="9b328-628">Recomendamos que você faça isso pelos seguintes motivos:</span><span class="sxs-lookup"><span data-stu-id="9b328-628">This is recommended due to the following reasons:</span></span></p><ul><li><span data-ttu-id="9b328-629">O aplicativo nunca adicionará a chave de armazenamento ao código de um arquivo de configuração, o que remove a possibilidade de alguém obter acesso às chaves sem uma permissão específica.</span><span class="sxs-lookup"><span data-stu-id="9b328-629">The application will never have the storage key hardcoded in a configuration file, which removes that avenue of somebody getting access to the keys without specific permission</span></span></li><li><span data-ttu-id="9b328-630">O acesso às chaves pode ser controlado com o Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="9b328-630">Access to the keys can be controlled using Azure Active Directory.</span></span> <span data-ttu-id="9b328-631">Isso significa que um proprietário de conta pode conceder acesso a diversos aplicativos que precisam recuperar as chaves do Azure Key Vault.</span><span class="sxs-lookup"><span data-stu-id="9b328-631">This means an account owner can grant access to the handful of applications that need to retrieve the keys from Azure Key Vault.</span></span> <span data-ttu-id="9b328-632">Outros aplicativos não poderão acessar as chaves sem que recebam uma permissão específica para isso.</span><span class="sxs-lookup"><span data-stu-id="9b328-632">Other applications will not be able to access the keys without granting them permission specifically</span></span></li><li><span data-ttu-id="9b328-633">Por motivos de segurança, recomendamos que você implante um processo para regenerar chaves de acesso no Armazenamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="9b328-633">Key Regeneration: It is recommended to have a process in place to regenerate Azure storage access keys for security reasons.</span></span> <span data-ttu-id="9b328-634">Para obter informações detalhadas sobre por que e como planejar a regeneração de chaves, consulte o arquivo mencionado na seção Referência, incluído no Guia de segurança do Armazenamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="9b328-634">Details on why and how to plan for key regeneration are documented in the Azure Storage Security Guide reference article</span></span></li></ul>|

## <span data-ttu-id="9b328-635"><a id="cors-storage"></a>Garantir que apenas fontes confiáveis sejam permitidas se o CORS estiver habilitado no Armazenamento do Azure</span><span class="sxs-lookup"><span data-stu-id="9b328-635"><a id="cors-storage"></a>Ensure that only trusted origins are allowed if CORS is enabled on Azure storage</span></span>

| <span data-ttu-id="9b328-636">Title</span><span class="sxs-lookup"><span data-stu-id="9b328-636">Title</span></span>                   | <span data-ttu-id="9b328-637">Detalhes</span><span class="sxs-lookup"><span data-stu-id="9b328-637">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="9b328-638">**Componente**</span><span class="sxs-lookup"><span data-stu-id="9b328-638">**Component**</span></span>               | <span data-ttu-id="9b328-639">Armazenamento do Azure</span><span class="sxs-lookup"><span data-stu-id="9b328-639">Azure Storage</span></span> | 
| <span data-ttu-id="9b328-640">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="9b328-640">**SDL Phase**</span></span>               | <span data-ttu-id="9b328-641">Compilação</span><span class="sxs-lookup"><span data-stu-id="9b328-641">Build</span></span> |  
| <span data-ttu-id="9b328-642">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="9b328-642">**Applicable Technologies**</span></span> | <span data-ttu-id="9b328-643">Genérico</span><span class="sxs-lookup"><span data-stu-id="9b328-643">Generic</span></span> |
| <span data-ttu-id="9b328-644">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="9b328-644">**Attributes**</span></span>              | <span data-ttu-id="9b328-645">N/D</span><span class="sxs-lookup"><span data-stu-id="9b328-645">N/A</span></span>  |
| <span data-ttu-id="9b328-646">**Referências**</span><span class="sxs-lookup"><span data-stu-id="9b328-646">**References**</span></span>              | [<span data-ttu-id="9b328-647">Suporte ao CORS para os serviços de armazenamento do Azure</span><span class="sxs-lookup"><span data-stu-id="9b328-647">CORS Support for the Azure Storage Services</span></span>](https://msdn.microsoft.com/library/azure/dn535601.aspx) |
| <span data-ttu-id="9b328-648">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="9b328-648">**Steps**</span></span> | <span data-ttu-id="9b328-649">O Armazenamento do Azure permite habilitar o CORS – Compartilhamento de Recursos entre Origens.</span><span class="sxs-lookup"><span data-stu-id="9b328-649">Azure Storage allows you to enable CORS – Cross Origin Resource Sharing.</span></span> <span data-ttu-id="9b328-650">Para cada conta de armazenamento, é possível especificar os domínios que podem acessar os recursos na conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="9b328-650">For each storage account, you can specify domains that can access the resources in that storage account.</span></span> <span data-ttu-id="9b328-651">Por padrão, o CORS está desabilitado em todos os serviços</span><span class="sxs-lookup"><span data-stu-id="9b328-651">By default, CORS is disabled on all services.</span></span> <span data-ttu-id="9b328-652">Você pode habilitar o CORS usando a API REST ou a biblioteca de cliente de armazenamento para chamar um dos métodos e definir as políticas de serviço.</span><span class="sxs-lookup"><span data-stu-id="9b328-652">You can enable CORS by using the REST API or the storage client library to call one of the methods to set the service policies.</span></span> |

## <span data-ttu-id="9b328-653"><a id="throttling"></a>Habilitar o recurso de limitação do serviço WCF</span><span class="sxs-lookup"><span data-stu-id="9b328-653"><a id="throttling"></a>Enable WCF's service throttling feature</span></span>

| <span data-ttu-id="9b328-654">Title</span><span class="sxs-lookup"><span data-stu-id="9b328-654">Title</span></span>                   | <span data-ttu-id="9b328-655">Detalhes</span><span class="sxs-lookup"><span data-stu-id="9b328-655">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="9b328-656">**Componente**</span><span class="sxs-lookup"><span data-stu-id="9b328-656">**Component**</span></span>               | <span data-ttu-id="9b328-657">WCF</span><span class="sxs-lookup"><span data-stu-id="9b328-657">WCF</span></span> | 
| <span data-ttu-id="9b328-658">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="9b328-658">**SDL Phase**</span></span>               | <span data-ttu-id="9b328-659">Compilação</span><span class="sxs-lookup"><span data-stu-id="9b328-659">Build</span></span> |  
| <span data-ttu-id="9b328-660">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="9b328-660">**Applicable Technologies**</span></span> | <span data-ttu-id="9b328-661">.NET Framework 3</span><span class="sxs-lookup"><span data-stu-id="9b328-661">.NET Framework 3</span></span> |
| <span data-ttu-id="9b328-662">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="9b328-662">**Attributes**</span></span>              | <span data-ttu-id="9b328-663">N/D</span><span class="sxs-lookup"><span data-stu-id="9b328-663">N/A</span></span>  |
| <span data-ttu-id="9b328-664">**Referências**</span><span class="sxs-lookup"><span data-stu-id="9b328-664">**References**</span></span>              | <span data-ttu-id="9b328-665">[MSDN](https://msdn.microsoft.com/library/ff648500.aspx), [Fortify Kingdom](https://vulncat.fortify.com/en/vulncat/index.html)</span><span class="sxs-lookup"><span data-stu-id="9b328-665">[MSDN](https://msdn.microsoft.com/library/ff648500.aspx), [Fortify Kingdom](https://vulncat.fortify.com/en/vulncat/index.html)</span></span> |
| <span data-ttu-id="9b328-666">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="9b328-666">**Steps**</span></span> | <p><span data-ttu-id="9b328-667">Não definir um limite para o uso de recursos do sistema pode resultar no esgotamento de recursos e, por fim, em uma negação de serviço.</span><span class="sxs-lookup"><span data-stu-id="9b328-667">Not placing a limit on the use of system resources could result in resource exhaustion and ultimately a denial of service.</span></span></p><ul><li><span data-ttu-id="9b328-668">**EXPLICAÇÃO:** o Windows Communication Foundation (WCF) oferece a opção de restringir as solicitações de serviço.</span><span class="sxs-lookup"><span data-stu-id="9b328-668">**EXPLANATION:** Windows Communication Foundation (WCF) offers the ability to throttle service requests.</span></span> <span data-ttu-id="9b328-669">Permitir muitas solicitações de clientes pode sobrecarregar o sistema e esgotar seus recursos.</span><span class="sxs-lookup"><span data-stu-id="9b328-669">Allowing too many client requests can flood a system and exhaust its resources.</span></span> <span data-ttu-id="9b328-670">Por outro lado, permitir apenas um pequeno número de solicitações para um serviço pode impedir usuários legítimos de usar o serviço.</span><span class="sxs-lookup"><span data-stu-id="9b328-670">On the other hand, allowing only a small number of requests to a service can prevent legitimate users from using the service.</span></span> <span data-ttu-id="9b328-671">Cada serviço deve ser ajustado e configurado individualmente para permitir a quantidade apropriada de recursos.</span><span class="sxs-lookup"><span data-stu-id="9b328-671">Each service should be individually tuned to and configured to allow the appropriate amount of resources.</span></span></li><li><span data-ttu-id="9b328-672">**RECOMENDAÇÕES** Habilite o recurso de limitação de serviços do WCF e defina os limites apropriados para o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="9b328-672">**RECOMMENDATIONS** Enable WCF's service throttling feature and set limits appropriate for your application.</span></span></li></ul>|

### <a name="example"></a><span data-ttu-id="9b328-673">Exemplo</span><span class="sxs-lookup"><span data-stu-id="9b328-673">Example</span></span>
<span data-ttu-id="9b328-674">Veja abaixo um exemplo de configuração com a limitação habilitada:</span><span class="sxs-lookup"><span data-stu-id="9b328-674">The following is an example configuration with throttling enabled:</span></span>
```
<system.serviceModel> 
  <behaviors>
    <serviceBehaviors>
    <behavior name="Throttled">
    <serviceThrottling maxConcurrentCalls="[YOUR SERVICE VALUE]" maxConcurrentSessions="[YOUR SERVICE VALUE]" maxConcurrentInstances="[YOUR SERVICE VALUE]" /> 
  ...
</system.serviceModel> 
```

## <span data-ttu-id="9b328-675"><a id="info-metadata"></a>Divulgação de informações do WCF por meio de metadados</span><span class="sxs-lookup"><span data-stu-id="9b328-675"><a id="info-metadata"></a>WCF-Information disclosure through metadata</span></span>

| <span data-ttu-id="9b328-676">Title</span><span class="sxs-lookup"><span data-stu-id="9b328-676">Title</span></span>                   | <span data-ttu-id="9b328-677">Detalhes</span><span class="sxs-lookup"><span data-stu-id="9b328-677">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="9b328-678">**Componente**</span><span class="sxs-lookup"><span data-stu-id="9b328-678">**Component**</span></span>               | <span data-ttu-id="9b328-679">WCF</span><span class="sxs-lookup"><span data-stu-id="9b328-679">WCF</span></span> | 
| <span data-ttu-id="9b328-680">**Fase do SDL**</span><span class="sxs-lookup"><span data-stu-id="9b328-680">**SDL Phase**</span></span>               | <span data-ttu-id="9b328-681">Compilação</span><span class="sxs-lookup"><span data-stu-id="9b328-681">Build</span></span> |  
| <span data-ttu-id="9b328-682">**Tecnologias aplicáveis**</span><span class="sxs-lookup"><span data-stu-id="9b328-682">**Applicable Technologies**</span></span> | <span data-ttu-id="9b328-683">.NET Framework 3</span><span class="sxs-lookup"><span data-stu-id="9b328-683">.NET Framework 3</span></span> |
| <span data-ttu-id="9b328-684">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="9b328-684">**Attributes**</span></span>              | <span data-ttu-id="9b328-685">N/D</span><span class="sxs-lookup"><span data-stu-id="9b328-685">N/A</span></span>  |
| <span data-ttu-id="9b328-686">**Referências**</span><span class="sxs-lookup"><span data-stu-id="9b328-686">**References**</span></span>              | <span data-ttu-id="9b328-687">[MSDN](https://msdn.microsoft.com/library/ff648500.aspx), [Fortify Kingdom](https://vulncat.fortify.com/en/vulncat/index.html)</span><span class="sxs-lookup"><span data-stu-id="9b328-687">[MSDN](https://msdn.microsoft.com/library/ff648500.aspx), [Fortify Kingdom](https://vulncat.fortify.com/en/vulncat/index.html)</span></span> |
| <span data-ttu-id="9b328-688">**Etapas**</span><span class="sxs-lookup"><span data-stu-id="9b328-688">**Steps**</span></span> | <span data-ttu-id="9b328-689">Os metadados podem ajudar invasores a obter mais informações sobre o sistema e a planejar uma forma de ataque.</span><span class="sxs-lookup"><span data-stu-id="9b328-689">Metadata can help attackers learn about the system and plan a form of attack.</span></span> <span data-ttu-id="9b328-690">Os serviços do WCF podem ser configurados para expor os metadados,</span><span class="sxs-lookup"><span data-stu-id="9b328-690">WCF services can be configured to expose metadata.</span></span> <span data-ttu-id="9b328-691">que fornecem informações descritivas detalhadas do serviço e que não devem ser transmitidos em ambientes de produção.</span><span class="sxs-lookup"><span data-stu-id="9b328-691">Metadata gives detailed service description information and should not be broadcast in production environments.</span></span> <span data-ttu-id="9b328-692">As propriedades `HttpGetEnabled` / `HttpsGetEnabled` da classe ServiceMetaData definem se um serviço deve expor os metadados.</span><span class="sxs-lookup"><span data-stu-id="9b328-692">The `HttpGetEnabled` / `HttpsGetEnabled` properties of the ServiceMetaData class defines whether a service will expose the metadata</span></span> | 

### <a name="example"></a><span data-ttu-id="9b328-693">Exemplo</span><span class="sxs-lookup"><span data-stu-id="9b328-693">Example</span></span>
<span data-ttu-id="9b328-694">O código mostrado abaixo instrui o WCF a transmitir os metadados de um serviço.</span><span class="sxs-lookup"><span data-stu-id="9b328-694">The code below instructs WCF to broadcast a service's metadata</span></span>
```
ServiceMetadataBehavior smb = new ServiceMetadataBehavior();
smb.HttpGetEnabled = true; 
smb.HttpGetUrl = new Uri(EndPointAddress); 
Host.Description.Behaviors.Add(smb); 
```
<span data-ttu-id="9b328-695">Não transmita os metadados de um serviço em um ambiente de produção.</span><span class="sxs-lookup"><span data-stu-id="9b328-695">Do not broadcast service metadata in a production environment.</span></span> <span data-ttu-id="9b328-696">Defina as propriedades HttpGetEnabled / HttpsGetEnabled da classe ServiceMetaData classe como false.</span><span class="sxs-lookup"><span data-stu-id="9b328-696">Set the HttpGetEnabled / HttpsGetEnabled properties of the ServiceMetaData class to false.</span></span> 

### <a name="example"></a><span data-ttu-id="9b328-697">Exemplo</span><span class="sxs-lookup"><span data-stu-id="9b328-697">Example</span></span>
<span data-ttu-id="9b328-698">O código mostrado abaixo instrui o WCF a não transmitir os metadados de um serviço.</span><span class="sxs-lookup"><span data-stu-id="9b328-698">The code below instructs WCF to not broadcast a service's metadata.</span></span> 
```
ServiceMetadataBehavior smb = new ServiceMetadataBehavior(); 
smb.HttpGetEnabled = false; 
smb.HttpGetUrl = new Uri(EndPointAddress); 
Host.Description.Behaviors.Add(smb);
```
