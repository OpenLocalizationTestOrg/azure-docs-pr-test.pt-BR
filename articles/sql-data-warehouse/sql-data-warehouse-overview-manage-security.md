---
title: aaaSecure um banco de dados no Data Warehouse SQL | Microsoft Docs
description: "Dicas para proteger um banco de dados no SQL Data Warehouse do Azure para desenvolvimento de soluções."
services: sql-data-warehouse
documentationcenter: NA
author: ronortloff
manager: jhubbard
editor: 
ms.assetid: 8fa2f5ca-4cf5-4418-99a2-4dc745799850
ms.service: sql-data-warehouse
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: data-services
ms.custom: security
ms.date: 10/31/2016
ms.author: rortloff;barbkess
ms.openlocfilehash: 5ef4d760e00be46bfe7808bc95dbe1e4b3a51165
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="secure-a-database-in-sql-data-warehouse"></a><span data-ttu-id="b4965-103">Proteger um banco de dados no SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="b4965-103">Secure a database in SQL Data Warehouse</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="b4965-104">Visão Geral da Segurança</span><span class="sxs-lookup"><span data-stu-id="b4965-104">Security Overview</span></span>](sql-data-warehouse-overview-manage-security.md)
> * [<span data-ttu-id="b4965-105">Autenticação</span><span class="sxs-lookup"><span data-stu-id="b4965-105">Authentication</span></span>](sql-data-warehouse-authentication.md)
> * [<span data-ttu-id="b4965-106">Criptografia (Portal)</span><span class="sxs-lookup"><span data-stu-id="b4965-106">Encryption (Portal)</span></span>](sql-data-warehouse-encryption-tde.md)
> * [<span data-ttu-id="b4965-107">Criptografia (T-SQL)</span><span class="sxs-lookup"><span data-stu-id="b4965-107">Encryption (T-SQL)</span></span>](sql-data-warehouse-encryption-tde-tsql.md)
> 
> 

<span data-ttu-id="b4965-108">Este artigo explica os fundamentos de Olá de proteção de seu banco de dados do Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="b4965-108">This article walks through hello basics of securing your Azure SQL Data Warehouse database.</span></span> <span data-ttu-id="b4965-109">Especificamente, este artigo apresentará a você recursos para limitar acesso, proteger dados e monitorar atividades em um banco de dados.</span><span class="sxs-lookup"><span data-stu-id="b4965-109">In particular, this article will get you started with resources for limiting access, protecting data, and monitoring activities on a database.</span></span>

## <a name="connection-security"></a><span data-ttu-id="b4965-110">Segurança da conexão</span><span class="sxs-lookup"><span data-stu-id="b4965-110">Connection security</span></span>
<span data-ttu-id="b4965-111">Segurança de Conexão refere-se toohow restringir e proteger conexões tooyour banco de dados usando regras de firewall e de criptografia da conexão.</span><span class="sxs-lookup"><span data-stu-id="b4965-111">Connection Security refers toohow you restrict and secure connections tooyour database using firewall rules and connection encryption.</span></span>

<span data-ttu-id="b4965-112">Regras de firewall são usadas por ambos os Olá Olá e servidor de banco de dados tooreject conexão tentativas de endereços IP que não foram explicitamente na lista de permissões.</span><span class="sxs-lookup"><span data-stu-id="b4965-112">Firewall rules are used by both hello server and hello database tooreject connection attempts from IP addresses that have not been explicitly whitelisted.</span></span> <span data-ttu-id="b4965-113">conexões tooallow de seu aplicativo ou o endereço IP público do computador cliente, primeiro você deve criar uma regra de firewall de nível de servidor usando Olá Portal do Azure, a API REST ou o PowerShell.</span><span class="sxs-lookup"><span data-stu-id="b4965-113">tooallow connections from your application or client machine's public IP address, you must first create a server-level firewall rule using hello Azure Portal, REST API, or PowerShell.</span></span> <span data-ttu-id="b4965-114">Como prática recomendada, você deve restringir os intervalos de endereços IP de saudação permitidos através do firewall de servidor tanto quanto possíveis.</span><span class="sxs-lookup"><span data-stu-id="b4965-114">As a best practice, you should restrict hello IP address ranges allowed through your server firewall as much as possible.</span></span>  <span data-ttu-id="b4965-115">tooaccess Azure SQL Data Warehouse do computador local, certifique-se de firewall Olá na sua rede e o computador local permita a comunicação de saída na porta TCP 1433.</span><span class="sxs-lookup"><span data-stu-id="b4965-115">tooaccess Azure SQL Data Warehouse from your local computer, ensure hello firewall on your network and local computer allows outgoing communication on TCP port 1433.</span></span>  <span data-ttu-id="b4965-116">Para saber mais, confira [Firewall do Banco de Dados SQL do Azure][Azure SQL Database firewall], [sp_set_firewall_rule][sp_set_firewall_rule] e [sp_set_database_firewall_rule][sp_set_database_firewall_rule].</span><span class="sxs-lookup"><span data-stu-id="b4965-116">For more information, see [Azure SQL Database firewall][Azure SQL Database firewall], [sp_set_firewall_rule][sp_set_firewall_rule], and [sp_set_database_firewall_rule][sp_set_database_firewall_rule].</span></span>

<span data-ttu-id="b4965-117">Conexões tooyour SQL Data Warehouse são criptografados por padrão.</span><span class="sxs-lookup"><span data-stu-id="b4965-117">Connections tooyour SQL Data Warehouse are encrypted by default.</span></span>  <span data-ttu-id="b4965-118">Criptografia modificando toodisable de configurações de conexão são ignorados.</span><span class="sxs-lookup"><span data-stu-id="b4965-118">Modifying connection settings toodisable encryption are ignored.</span></span>

## <a name="authentication"></a><span data-ttu-id="b4965-119">Autenticação</span><span class="sxs-lookup"><span data-stu-id="b4965-119">Authentication</span></span>
<span data-ttu-id="b4965-120">Autenticação refere-se toohow provar sua identidade ao conectar-se o banco de dados toohello.</span><span class="sxs-lookup"><span data-stu-id="b4965-120">Authentication refers toohow you prove your identity when connecting toohello database.</span></span> <span data-ttu-id="b4965-121">Atualmente, o SQL Data Warehouse dá suporte à Autenticação do SQL Server com um nome de usuário e senha, bem como do Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="b4965-121">SQL Data Warehouse currently supports SQL Server Authentication with a username and password as well as a Azure Active Directory.</span></span> 

<span data-ttu-id="b4965-122">Quando você criou o servidor lógico Olá para seu banco de dados, você especificou um logon de "administrador do servidor" com um nome de usuário e senha.</span><span class="sxs-lookup"><span data-stu-id="b4965-122">When you created hello logical server for your database, you specified a "server admin" login with a username and password.</span></span> <span data-ttu-id="b4965-123">Usando essas credenciais, você pode autenticar tooany banco de dados no servidor como proprietário do banco de dados hello, ou "dbo" por meio da autenticação do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="b4965-123">Using these credentials, you can authenticate tooany database on that server as hello database owner, or "dbo" through SQL Server Authentication.</span></span>

<span data-ttu-id="b4965-124">No entanto, como uma prática recomendada, os usuários da sua organização devem usar tooauthenticate uma conta diferente.</span><span class="sxs-lookup"><span data-stu-id="b4965-124">However, as a best practice, your organization’s users should use a different account tooauthenticate.</span></span> <span data-ttu-id="b4965-125">Dessa forma, você pode limitar as permissões de saudação concedidas toohello aplicativo e reduzir os riscos de saudação de atividade mal-intencionada, caso o código do aplicativo é vulnerável tooa ataque de injeção de SQL.</span><span class="sxs-lookup"><span data-stu-id="b4965-125">This way you can limit hello permissions granted toohello application and reduce hello risks of malicious activity in case your application code is vulnerable tooa SQL injection attack.</span></span> 

<span data-ttu-id="b4965-126">toocreate um usuário autenticado do SQL Server, conecte-se toohello **mestre** criar um novo logon de servidor e banco de dados em seu servidor com seu logon de administrador do servidor.</span><span class="sxs-lookup"><span data-stu-id="b4965-126">toocreate a SQL Server Authenticated user, connect toohello **master** database on your server with your server admin login and create a new server login.</span></span>  <span data-ttu-id="b4965-127">Além disso, é uma boa ideia toocreate um usuário no banco de dados mestre para usuários do Azure SQL Data Warehouse hello.</span><span class="sxs-lookup"><span data-stu-id="b4965-127">Additionally, it is a good idea toocreate a user in hello master database for Azure SQL Data Warehouse users.</span></span> <span data-ttu-id="b4965-128">Criando um usuário em mestre permite que um toologin de usuário usando ferramentas como o SSMS sem especificar um nome de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="b4965-128">Creating a user in master allows a user toologin using tools like SSMS without specifying a database name.</span></span>  <span data-ttu-id="b4965-129">Ele também permite que toouse Olá objeto explorer tooview todos os bancos de dados em um SQL server.</span><span class="sxs-lookup"><span data-stu-id="b4965-129">It also allows them toouse hello object explorer tooview all databases on a SQL server.</span></span>

```sql
-- Connect toomaster database and create a login
CREATE LOGIN ApplicationLogin WITH PASSWORD = 'Str0ng_password';
CREATE USER ApplicationUser FOR LOGIN ApplicationLogin;
```

<span data-ttu-id="b4965-130">Em seguida, conecte-se tooyour **banco de dados do SQL Data Warehouse** com seu logon de administrador do servidor e criar um usuário de banco de dados com base no logon do servidor de saudação você acabou de criar.</span><span class="sxs-lookup"><span data-stu-id="b4965-130">Then, connect tooyour **SQL Data Warehouse database** with your server admin login and create a database user based on hello server login you just created.</span></span>

```sql
-- Connect tooSQL DW database and create a database user
CREATE USER ApplicationUser FOR LOGIN ApplicationLogin;
```

<span data-ttu-id="b4965-131">Se um usuário estiver realizando operações adicionais, como criar logons ou criar novos bancos de dados, eles precisarão também toobe atribuído toohello `Loginmanager` e `dbmanager` funções no banco de dados mestre hello.</span><span class="sxs-lookup"><span data-stu-id="b4965-131">If a user will be doing additional operations such as creating logins or creating new databases, they will also need toobe assigned toohello `Loginmanager` and `dbmanager` roles in hello master database.</span></span> <span data-ttu-id="b4965-132">Para obter mais informações sobre essas funções adicionais e autenticação tooa banco de dados SQL, consulte [Gerenciando bancos de dados e logons no banco de dados do SQL Azure][Managing databases and logins in Azure SQL Database].</span><span class="sxs-lookup"><span data-stu-id="b4965-132">For more information on these additonal roles and authenticating tooa SQL Database, see [Managing databases and logins in Azure SQL Database][Managing databases and logins in Azure SQL Database].</span></span>  <span data-ttu-id="b4965-133">Para obter mais detalhes sobre o AD do Azure SQL Data Warehouse, consulte [conexão tooSQL Data Warehouse por usando o Azure Active Directory Authentication][Connecting tooSQL Data Warehouse By Using Azure Active Directory Authentication].</span><span class="sxs-lookup"><span data-stu-id="b4965-133">For more details on Azure AD for SQL Data Warehouse, see [Connecting tooSQL Data Warehouse By Using Azure Active Directory Authentication][Connecting tooSQL Data Warehouse By Using Azure Active Directory Authentication].</span></span>

## <a name="authorization"></a><span data-ttu-id="b4965-134">Autorização</span><span class="sxs-lookup"><span data-stu-id="b4965-134">Authorization</span></span>
<span data-ttu-id="b4965-135">Autorização refere-se toowhat você pode fazer em um banco de dados do Azure SQL Data Warehouse, e isso é controlado por associações de função e permissões de sua conta de usuário.</span><span class="sxs-lookup"><span data-stu-id="b4965-135">Authorization refers toowhat you can do within an Azure SQL Data Warehouse database, and this is controlled by your user account's role memberships and permissions.</span></span> <span data-ttu-id="b4965-136">Como prática recomendada, você deve conceder Olá usuários privilégios mínimos necessários.</span><span class="sxs-lookup"><span data-stu-id="b4965-136">As a best practice, you should grant users hello least privileges necessary.</span></span> <span data-ttu-id="b4965-137">SQL Data Warehouse do Azure torna esse toomanage fácil com as funções em T-SQL:</span><span class="sxs-lookup"><span data-stu-id="b4965-137">Azure SQL Data Warehouse makes this easy toomanage with roles in T-SQL:</span></span>

```sql
EXEC sp_addrolemember 'db_datareader', 'ApplicationUser'; -- allows ApplicationUser tooread data
EXEC sp_addrolemember 'db_datawriter', 'ApplicationUser'; -- allows ApplicationUser toowrite data
```

<span data-ttu-id="b4965-138">conta de administrador de servidor Olá que você está se conectando é membro de db_owner, que tem autoridade toodo nada no banco de dados de saudação.</span><span class="sxs-lookup"><span data-stu-id="b4965-138">hello server admin account you are connecting with is a member of db_owner, which has authority toodo anything within hello database.</span></span> <span data-ttu-id="b4965-139">Salve essa conta para implantar atualizações de esquema e outras operações de gerenciamento.</span><span class="sxs-lookup"><span data-stu-id="b4965-139">Save this account for deploying schema upgrades and other management operations.</span></span> <span data-ttu-id="b4965-140">Usar conta de "ApplicationUser" hello com tooconnect mais limitado de permissões de banco de dados de toohello seu aplicativo com hello privilégios mínimos necessitados para seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="b4965-140">Use hello "ApplicationUser" account with more limited permissions tooconnect from your application toohello database with hello least privileges needed by your application.</span></span>

<span data-ttu-id="b4965-141">Há maneiras toofurther limite que um usuário pode fazer com o banco de dados do SQL Azure:</span><span class="sxs-lookup"><span data-stu-id="b4965-141">There are ways toofurther limit what a user can do with Azure SQL Database:</span></span>

* <span data-ttu-id="b4965-142">Granular [permissões] [ Permissions] permitem que você controle quais operações você pode em colunas individuais, tabelas, exibições, procedimentos e outros objetos no banco de dados de saudação.</span><span class="sxs-lookup"><span data-stu-id="b4965-142">Granular [Permissions][Permissions] let you control which operations you can do on individual columns, tables, views, procedures, and other objects in hello database.</span></span> <span data-ttu-id="b4965-143">Use permissões granulares toohave Olá maior controle e conceda Olá mínimo necessário de permissões.</span><span class="sxs-lookup"><span data-stu-id="b4965-143">Use granular permissions toohave hello most control and grant hello minimum permissions necessary.</span></span> <span data-ttu-id="b4965-144">sistema de permissão granular Olá é um pouco complexo e exige alguns toouse estudo efetivamente.</span><span class="sxs-lookup"><span data-stu-id="b4965-144">hello granular permission system is somewhat complicated and will require some study toouse effectively.</span></span>
* <span data-ttu-id="b4965-145">[Funções de banco de dados] [ Database roles] diferente de db_datareader e db_datawriter podem ser usado toocreate contas de usuário de aplicativo mais potentes ou contas menos avançadas de gerenciamento.</span><span class="sxs-lookup"><span data-stu-id="b4965-145">[Database roles][Database roles] other than db_datareader and db_datawriter can be used toocreate more powerful application user accounts or less powerful management accounts.</span></span> <span data-ttu-id="b4965-146">funções de banco de dados fixa interno Olá fornecem uma maneira fácil de permissões toogrant, mas podem resultar em conceder mais permissões que são necessárias.</span><span class="sxs-lookup"><span data-stu-id="b4965-146">hello built-in fixed database roles provide an easy way toogrant permissions, but can result in granting more permissions than are necessary.</span></span>
* <span data-ttu-id="b4965-147">[Procedimentos armazenados] [ Stored procedures] pode ser usado toolimit ações Olá que podem ser executadas no banco de dados de saudação.</span><span class="sxs-lookup"><span data-stu-id="b4965-147">[Stored procedures][Stored procedures] can be used toolimit hello actions that can be taken on hello database.</span></span>

<span data-ttu-id="b4965-148">Gerenciamento de bancos de dados e servidores lógicos da saudação Portal clássico do Azure ou usando Olá API do Gerenciador de recursos do Azure é controlado por atribuições de função da sua conta de usuário do portal.</span><span class="sxs-lookup"><span data-stu-id="b4965-148">Managing databases and logical servers from hello Azure Classic Portal or using hello Azure Resource Manager API is controlled by your portal user account's role assignments.</span></span> <span data-ttu-id="b4965-149">Para saber mais sobre esse tópico, confira [Controle de acesso baseado em função no Portal do Azure][Role-based access control in Azure Portal].</span><span class="sxs-lookup"><span data-stu-id="b4965-149">For more information on this topic, see [Role-based access control in Azure Portal][Role-based access control in Azure Portal].</span></span>

## <a name="encryption"></a><span data-ttu-id="b4965-150">Criptografia</span><span class="sxs-lookup"><span data-stu-id="b4965-150">Encryption</span></span>
<span data-ttu-id="b4965-151">Azure SQL Data Warehouse de dados TDE (criptografia transparente) ajuda a proteger contra a ameaça de saudação de atividades mal-intencionadas executando criptografia em tempo real e a descriptografia dos dados em repouso.</span><span class="sxs-lookup"><span data-stu-id="b4965-151">Azure SQL Data Warehouse Transparent Data Encryption (TDE) helps protect against hello threat of malicious activity by performing real-time encryption and decryption of your data at rest.</span></span>  <span data-ttu-id="b4965-152">Quando você criptografar o banco de dados, backups associados e arquivos de log de transações são criptografados sem a necessidade de qualquer aplicativo de tooyour alterações.</span><span class="sxs-lookup"><span data-stu-id="b4965-152">When you encrypt your database, associated backups and transaction log files are encrypted without requiring any changes tooyour applications.</span></span> <span data-ttu-id="b4965-153">Ela criptografa o armazenamento de saudação de um banco de dados inteiro usando uma chave de criptografia de banco de dados de saudação de chamada de chave simétrica.</span><span class="sxs-lookup"><span data-stu-id="b4965-153">TDE encrypts hello storage of an entire database by using a symmetric key called hello database encryption key.</span></span> <span data-ttu-id="b4965-154">No banco de dados SQL a chave de criptografia de banco de dados de saudação é protegido por um certificado de servidor interno.</span><span class="sxs-lookup"><span data-stu-id="b4965-154">In SQL Database hello database encryption key is protected by a built-in server certificate.</span></span> <span data-ttu-id="b4965-155">certificado de saudação do servidor interno é exclusivo para cada servidor de banco de dados SQL.</span><span class="sxs-lookup"><span data-stu-id="b4965-155">hello built-in server certificate is unique for each SQL Database server.</span></span> <span data-ttu-id="b4965-156">A Microsoft alterna automaticamente esses certificados pelo menos a cada 90 dias.</span><span class="sxs-lookup"><span data-stu-id="b4965-156">Microsoft automatically rotates these certificates at least every 90 days.</span></span> <span data-ttu-id="b4965-157">algoritmo de criptografia de saudação usado pelo SQL Data Warehouse é AES-256.</span><span class="sxs-lookup"><span data-stu-id="b4965-157">hello encryption algorithm used by SQL Data Warehouse is AES-256.</span></span> <span data-ttu-id="b4965-158">Para obter uma descrição geral da TDE, consulte [Transparent Data Encryption][Transparent Data Encryption].</span><span class="sxs-lookup"><span data-stu-id="b4965-158">For a general description of TDE, see [Transparent Data Encryption][Transparent Data Encryption].</span></span>

<span data-ttu-id="b4965-159">Você pode criptografar o banco de dados usando Olá [Portal do Azure] [ Encryption with Portal] ou [T-SQL][Encryption with TSQL].</span><span class="sxs-lookup"><span data-stu-id="b4965-159">You can encrypt your database using hello [Azure Portal][Encryption with Portal] or [T-SQL][Encryption with TSQL].</span></span>

## <a name="next-steps"></a><span data-ttu-id="b4965-160">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="b4965-160">Next steps</span></span>
<span data-ttu-id="b4965-161">Para obter detalhes e exemplos sobre como conectar tooyour SQL Data Warehouse com diferentes protocolos, consulte [conectar tooSQL Data Warehouse][Connect tooSQL Data Warehouse].</span><span class="sxs-lookup"><span data-stu-id="b4965-161">For details and examples on connecting tooyour SQL Data Warehouse with different protocols, see [Connect tooSQL Data Warehouse][Connect tooSQL Data Warehouse].</span></span>

<!--Image references-->

<!--Article references-->
[Connect tooSQL Data Warehouse]: ./sql-data-warehouse-connect-overview.md
[Encryption with Portal]: ./sql-data-warehouse-encryption-tde.md
[Encryption with TSQL]: ./sql-data-warehouse-encryption-tde-tsql.md
[Connecting tooSQL Data Warehouse By Using Azure Active Directory Authentication]: ./sql-data-warehouse-authentication.md

<!--MSDN references-->
[Azure SQL Database firewall]: https://msdn.microsoft.com/library/ee621782.aspx
[sp_set_firewall_rule]: https://msdn.microsoft.com/library/dn270017.aspx
[sp_set_database_firewall_rule]: https://msdn.microsoft.com/library/dn270010.aspx
[Database roles]: https://msdn.microsoft.com/library/ms189121.aspx
[Managing databases and logins in Azure SQL Database]: https://msdn.microsoft.com/library/ee336235.aspx
[Permissions]: https://msdn.microsoft.com/library/ms191291.aspx
[Stored procedures]: https://msdn.microsoft.com/library/ms190782.aspx
[Transparent Data Encryption]: https://msdn.microsoft.com/library/bb934049.aspx
[Azure portal]: https://portal.azure.com/

<!--Other Web references-->
[Role-based access control in Azure Portal]: https://azure.microsoft.com/documentation/articles/role-based-access-control-configure
