---
title: aaaIIS registra em Log Analytics | Microsoft Docs
description: "O IIS (Serviços de Informações da Internet) armazena a atividade do usuário em arquivos de log que podem ser coletados pelo Log Analytics.  Este artigo descreve como tooconfigure coleta de logs do IIS e os detalhes de registros de saudação criado no repositório do OMS hello."
services: log-analytics
documentationcenter: 
author: bwren
manager: jwhit
editor: tysonn
ms.assetid: cec5ff0a-01f5-4262-b2e8-e3db7b7467d2
ms.service: log-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/12/2017
ms.author: bwren
ms.openlocfilehash: c5575351090cdabaf651bcb49867794ee3a4b6e6
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="iis-logs-in-log-analytics"></a><span data-ttu-id="0837e-104">Logs do IIS no Log Analytics</span><span class="sxs-lookup"><span data-stu-id="0837e-104">IIS logs in Log Analytics</span></span>
<span data-ttu-id="0837e-105">O IIS (Serviços de Informações da Internet) armazena a atividade do usuário em arquivos de log que podem ser coletados pelo Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="0837e-105">Internet Information Services (IIS) stores user activity in log files that can be collected by Log Analytics.</span></span>  

![Logs IIS](media/log-analytics-data-sources-iis-logs/overview.png)

## <a name="configuring-iis-logs"></a><span data-ttu-id="0837e-107">Configurando logs do IIS</span><span class="sxs-lookup"><span data-stu-id="0837e-107">Configuring IIS logs</span></span>
<span data-ttu-id="0837e-108">O Log Analytics coleta entradas de arquivos de log criados pelo IIS, por isso você deve [configurar o IIS para o registro em log](https://technet.microsoft.com/library/hh831775.aspx).</span><span class="sxs-lookup"><span data-stu-id="0837e-108">Log Analytics collects entries from log files created by IIS, so you must [configure IIS for logging](https://technet.microsoft.com/library/hh831775.aspx).</span></span>

<span data-ttu-id="0837e-109">O Log Analytics só oferece suporte a arquivos de log do IIS armazenados em formato W3C e não oferece suporte a campos personalizados ou a registro em Log Avançado do IIS.</span><span class="sxs-lookup"><span data-stu-id="0837e-109">Log Analytics only supports IIS log files stored in W3C format and does not support custom fields or IIS Advanced Logging.</span></span>  
<span data-ttu-id="0837e-110">O Log Analytics não coleta logs no formato nativo IIS ou NCSA.</span><span class="sxs-lookup"><span data-stu-id="0837e-110">Log Analytics does not collect logs in NCSA or IIS native format.</span></span>

<span data-ttu-id="0837e-111">Configurar logs do IIS na análise de Log de saudação [menu dados nas configurações de análise de Log](log-analytics-data-sources.md#configuring-data-sources).</span><span class="sxs-lookup"><span data-stu-id="0837e-111">Configure IIS logs in Log Analytics from hello [Data menu in Log Analytics Settings](log-analytics-data-sources.md#configuring-data-sources).</span></span>  <span data-ttu-id="0837e-112">Não há nenhuma outra configuração necessária além da seleção de **Collect W3C format IIS log files**(Coletar arquivos de log do IIS no formato W3C).</span><span class="sxs-lookup"><span data-stu-id="0837e-112">There is no configuration required other than selecting **Collect W3C format IIS log files**.</span></span>

<span data-ttu-id="0837e-113">É recomendável que, quando você habilita a coleta de log do IIS, você deve configurar configuração de substituição de log do IIS Olá em cada servidor.</span><span class="sxs-lookup"><span data-stu-id="0837e-113">We recommend that when you enable IIS log collection, you should configure hello IIS log rollover setting on each server.</span></span>

## <a name="data-collection"></a><span data-ttu-id="0837e-114">Coleta de dados</span><span class="sxs-lookup"><span data-stu-id="0837e-114">Data collection</span></span>
<span data-ttu-id="0837e-115">O Log Analytics coleta as entradas de log do IIS de cada fonte conectada a cada 15 minutos, aproximadamente.</span><span class="sxs-lookup"><span data-stu-id="0837e-115">Log Analytics collects IIS log entries from each connected source approximately every 15 minutes.</span></span>  <span data-ttu-id="0837e-116">agente Olá registra seu lugar em cada log de eventos de coleta.</span><span class="sxs-lookup"><span data-stu-id="0837e-116">hello agent records its place in each event log that it collects from.</span></span>  <span data-ttu-id="0837e-117">Se agente Olá ficar offline, em seguida, análise de Log coleta eventos de onde parou, mesmo se os eventos foram criados durante a saudação agent estava offline.</span><span class="sxs-lookup"><span data-stu-id="0837e-117">If hello agent goes offline, then Log Analytics collects events from where it last left off, even if those events were created while hello agent was offline.</span></span>

## <a name="iis-log-record-properties"></a><span data-ttu-id="0837e-118">Propriedades de registro de log do IIS</span><span class="sxs-lookup"><span data-stu-id="0837e-118">IIS log record properties</span></span>
<span data-ttu-id="0837e-119">Registros de log do IIS têm um tipo de **W3CIISLog** e têm propriedades de saudação em Olá a tabela a seguir:</span><span class="sxs-lookup"><span data-stu-id="0837e-119">IIS log records have a type of **W3CIISLog** and have hello properties in hello following table:</span></span>

| <span data-ttu-id="0837e-120">Propriedade</span><span class="sxs-lookup"><span data-stu-id="0837e-120">Property</span></span> | <span data-ttu-id="0837e-121">Descrição</span><span class="sxs-lookup"><span data-stu-id="0837e-121">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="0837e-122">Computador</span><span class="sxs-lookup"><span data-stu-id="0837e-122">Computer</span></span> |<span data-ttu-id="0837e-123">Nome do computador Olá Olá evento foi coletado do.</span><span class="sxs-lookup"><span data-stu-id="0837e-123">Name of hello computer that hello event was collected from.</span></span> |
| <span data-ttu-id="0837e-124">cIP</span><span class="sxs-lookup"><span data-stu-id="0837e-124">cIP</span></span> |<span data-ttu-id="0837e-125">Endereço IP do cliente de saudação.</span><span class="sxs-lookup"><span data-stu-id="0837e-125">IP address of hello client.</span></span> |
| <span data-ttu-id="0837e-126">csMethod</span><span class="sxs-lookup"><span data-stu-id="0837e-126">csMethod</span></span> |<span data-ttu-id="0837e-127">Método de solicitação hello como GET ou POST.</span><span class="sxs-lookup"><span data-stu-id="0837e-127">Method of hello request such as GET or POST.</span></span> |
| <span data-ttu-id="0837e-128">csReferer</span><span class="sxs-lookup"><span data-stu-id="0837e-128">csReferer</span></span> |<span data-ttu-id="0837e-129">Site que Olá usuário seguiu um link de site atual toohello.</span><span class="sxs-lookup"><span data-stu-id="0837e-129">Site that hello user followed a link from toohello current site.</span></span> |
| <span data-ttu-id="0837e-130">csUserAgent</span><span class="sxs-lookup"><span data-stu-id="0837e-130">csUserAgent</span></span> |<span data-ttu-id="0837e-131">Tipo de navegador do cliente hello.</span><span class="sxs-lookup"><span data-stu-id="0837e-131">Browser type of hello client.</span></span> |
| <span data-ttu-id="0837e-132">csUserName</span><span class="sxs-lookup"><span data-stu-id="0837e-132">csUserName</span></span> |<span data-ttu-id="0837e-133">Nome da saudação autenticou o usuário que acessou o servidor de saudação.</span><span class="sxs-lookup"><span data-stu-id="0837e-133">Name of hello authenticated user that accessed hello server.</span></span> <span data-ttu-id="0837e-134">Os usuários anônimos são indicados por um hífen.</span><span class="sxs-lookup"><span data-stu-id="0837e-134">Anonymous users are indicated by a hyphen.</span></span> |
| <span data-ttu-id="0837e-135">csUriStem</span><span class="sxs-lookup"><span data-stu-id="0837e-135">csUriStem</span></span> |<span data-ttu-id="0837e-136">Destino da solicitação de saudação como uma página da web.</span><span class="sxs-lookup"><span data-stu-id="0837e-136">Target of hello request such as a web page.</span></span> |
| <span data-ttu-id="0837e-137">csUriQuery</span><span class="sxs-lookup"><span data-stu-id="0837e-137">csUriQuery</span></span> |<span data-ttu-id="0837e-138">Consulta, se houver, que o cliente Olá tentava tooperform.</span><span class="sxs-lookup"><span data-stu-id="0837e-138">Query, if any, that hello client was trying tooperform.</span></span> |
| <span data-ttu-id="0837e-139">ManagementGroupName</span><span class="sxs-lookup"><span data-stu-id="0837e-139">ManagementGroupName</span></span> |<span data-ttu-id="0837e-140">Nome do grupo de gerenciamento de saudação para agentes do Operations Manager.</span><span class="sxs-lookup"><span data-stu-id="0837e-140">Name of hello management group for Operations Manager agents.</span></span>  <span data-ttu-id="0837e-141">Para outros agentes, ele é AOI-\<ID do espaço de trabalho\></span><span class="sxs-lookup"><span data-stu-id="0837e-141">For other agents, this is AOI-\<workspace ID\></span></span> |
| <span data-ttu-id="0837e-142">RemoteIPCountry</span><span class="sxs-lookup"><span data-stu-id="0837e-142">RemoteIPCountry</span></span> |<span data-ttu-id="0837e-143">País do endereço IP de saudação do cliente hello.</span><span class="sxs-lookup"><span data-stu-id="0837e-143">Country of hello IP address of hello client.</span></span> |
| <span data-ttu-id="0837e-144">RemoteIPLatitude</span><span class="sxs-lookup"><span data-stu-id="0837e-144">RemoteIPLatitude</span></span> |<span data-ttu-id="0837e-145">Latitude do endereço IP do cliente hello.</span><span class="sxs-lookup"><span data-stu-id="0837e-145">Latitude of hello client IP address.</span></span> |
| <span data-ttu-id="0837e-146">RemoteIPLongitude</span><span class="sxs-lookup"><span data-stu-id="0837e-146">RemoteIPLongitude</span></span> |<span data-ttu-id="0837e-147">Longitude do endereço IP do cliente hello.</span><span class="sxs-lookup"><span data-stu-id="0837e-147">Longitude of hello client IP address.</span></span> |
| <span data-ttu-id="0837e-148">scStatus</span><span class="sxs-lookup"><span data-stu-id="0837e-148">scStatus</span></span> |<span data-ttu-id="0837e-149">Código de status HTTP.</span><span class="sxs-lookup"><span data-stu-id="0837e-149">HTTP status code.</span></span> |
| <span data-ttu-id="0837e-150">scSubStatus</span><span class="sxs-lookup"><span data-stu-id="0837e-150">scSubStatus</span></span> |<span data-ttu-id="0837e-151">Código de erro de substatus.</span><span class="sxs-lookup"><span data-stu-id="0837e-151">Substatus error code.</span></span> |
| <span data-ttu-id="0837e-152">scWin32Status</span><span class="sxs-lookup"><span data-stu-id="0837e-152">scWin32Status</span></span> |<span data-ttu-id="0837e-153">Código de status do Windows.</span><span class="sxs-lookup"><span data-stu-id="0837e-153">Windows status code.</span></span> |
| <span data-ttu-id="0837e-154">sIP</span><span class="sxs-lookup"><span data-stu-id="0837e-154">sIP</span></span> |<span data-ttu-id="0837e-155">Endereço IP do servidor de web hello.</span><span class="sxs-lookup"><span data-stu-id="0837e-155">IP address of hello web server.</span></span> |
| <span data-ttu-id="0837e-156">SourceSystem</span><span class="sxs-lookup"><span data-stu-id="0837e-156">SourceSystem</span></span> |<span data-ttu-id="0837e-157">OpsMgr</span><span class="sxs-lookup"><span data-stu-id="0837e-157">OpsMgr</span></span> |
| <span data-ttu-id="0837e-158">sPort</span><span class="sxs-lookup"><span data-stu-id="0837e-158">sPort</span></span> |<span data-ttu-id="0837e-159">No cliente de saudação do servidor de saudação conectada à.</span><span class="sxs-lookup"><span data-stu-id="0837e-159">Port on hello server hello client connected to.</span></span> |
| <span data-ttu-id="0837e-160">sSiteName</span><span class="sxs-lookup"><span data-stu-id="0837e-160">sSiteName</span></span> |<span data-ttu-id="0837e-161">Nome do site do IIS hello.</span><span class="sxs-lookup"><span data-stu-id="0837e-161">Name of hello IIS site.</span></span> |
| <span data-ttu-id="0837e-162">TimeGenerated</span><span class="sxs-lookup"><span data-stu-id="0837e-162">TimeGenerated</span></span> |<span data-ttu-id="0837e-163">Data e hora da entrada de saudação foi registrada.</span><span class="sxs-lookup"><span data-stu-id="0837e-163">Date and time hello entry was logged.</span></span> |
| <span data-ttu-id="0837e-164">TimeTaken</span><span class="sxs-lookup"><span data-stu-id="0837e-164">TimeTaken</span></span> |<span data-ttu-id="0837e-165">Solicitação do comprimento de saudação do tooprocess de tempo em milissegundos.</span><span class="sxs-lookup"><span data-stu-id="0837e-165">Length of time tooprocess hello request in milliseconds.</span></span> |

## <a name="log-searches-with-iis-logs"></a><span data-ttu-id="0837e-166">Pesquisas de log com logs do IIS</span><span class="sxs-lookup"><span data-stu-id="0837e-166">Log searches with IIS logs</span></span>
<span data-ttu-id="0837e-167">Olá, tabela a seguir fornece exemplos de diferentes de consultas de log que recuperam registros de log do IIS.</span><span class="sxs-lookup"><span data-stu-id="0837e-167">hello following table provides different examples of log queries that retrieve IIS log records.</span></span>

| <span data-ttu-id="0837e-168">Consultar</span><span class="sxs-lookup"><span data-stu-id="0837e-168">Query</span></span> | <span data-ttu-id="0837e-169">Descrição</span><span class="sxs-lookup"><span data-stu-id="0837e-169">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="0837e-170">Type=W3CIISLog</span><span class="sxs-lookup"><span data-stu-id="0837e-170">Type=W3CIISLog</span></span> |<span data-ttu-id="0837e-171">Todos os registros de log do IIS.</span><span class="sxs-lookup"><span data-stu-id="0837e-171">All IIS log records.</span></span> |
| <span data-ttu-id="0837e-172">Type=W3CIISLog scStatus=500</span><span class="sxs-lookup"><span data-stu-id="0837e-172">Type=W3CIISLog scStatus=500</span></span> |<span data-ttu-id="0837e-173">Todos os registros de log do IIS com um status de retorno de 500.</span><span class="sxs-lookup"><span data-stu-id="0837e-173">All IIS log records with a return status of 500.</span></span> |
| <span data-ttu-id="0837e-174">Type=W3CIISLog &#124; Measure count() by cIP</span><span class="sxs-lookup"><span data-stu-id="0837e-174">Type=W3CIISLog &#124; Measure count() by cIP</span></span> |<span data-ttu-id="0837e-175">Contagem das entradas do log do IIS por endereço IP do cliente.</span><span class="sxs-lookup"><span data-stu-id="0837e-175">Count of IIS log entries by client IP address.</span></span> |
| <span data-ttu-id="0837e-176">Type=W3CIISLog csHost="www.contoso.com" &#124; Measure count() by csUriStem</span><span class="sxs-lookup"><span data-stu-id="0837e-176">Type=W3CIISLog csHost="www.contoso.com" &#124; Measure count() by csUriStem</span></span> |<span data-ttu-id="0837e-177">Contagem de IIS entradas no log por URL de saudação host www.contoso.com.</span><span class="sxs-lookup"><span data-stu-id="0837e-177">Count of IIS log entries by URL for hello host www.contoso.com.</span></span> |
| <span data-ttu-id="0837e-178">Type=W3CIISLog &#124; Measure Sum(csBytes) by Computer &#124; top 500000</span><span class="sxs-lookup"><span data-stu-id="0837e-178">Type=W3CIISLog &#124; Measure Sum(csBytes) by Computer &#124; top 500000</span></span> |<span data-ttu-id="0837e-179">Total de bytes recebidos por cada computador com IIS.</span><span class="sxs-lookup"><span data-stu-id="0837e-179">Total bytes received by each IIS computer.</span></span> |

>[!NOTE]
> <span data-ttu-id="0837e-180">Se seu espaço de trabalho tiver sido atualizado toohello [linguagem de consulta de análise de Log novo](log-analytics-log-search-upgrade.md), e em seguida, Olá acima consultas alteraria toohello a seguir.</span><span class="sxs-lookup"><span data-stu-id="0837e-180">If your workspace has been upgraded toohello [new Log Analytics query language](log-analytics-log-search-upgrade.md), then hello above queries would change toohello following.</span></span>

> | <span data-ttu-id="0837e-181">Consultar</span><span class="sxs-lookup"><span data-stu-id="0837e-181">Query</span></span> | <span data-ttu-id="0837e-182">Descrição</span><span class="sxs-lookup"><span data-stu-id="0837e-182">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="0837e-183">W3CIISLog</span><span class="sxs-lookup"><span data-stu-id="0837e-183">W3CIISLog</span></span> |<span data-ttu-id="0837e-184">Todos os registros de log do IIS.</span><span class="sxs-lookup"><span data-stu-id="0837e-184">All IIS log records.</span></span> |
| <span data-ttu-id="0837e-185">W3CIISLog &#124; where scStatus==500</span><span class="sxs-lookup"><span data-stu-id="0837e-185">W3CIISLog &#124; where scStatus==500</span></span> |<span data-ttu-id="0837e-186">Todos os registros de log do IIS com um status de retorno de 500.</span><span class="sxs-lookup"><span data-stu-id="0837e-186">All IIS log records with a return status of 500.</span></span> |
| <span data-ttu-id="0837e-187">W3CIISLog &#124; summarize count() by cIP</span><span class="sxs-lookup"><span data-stu-id="0837e-187">W3CIISLog &#124; summarize count() by cIP</span></span> |<span data-ttu-id="0837e-188">Contagem das entradas do log do IIS por endereço IP do cliente.</span><span class="sxs-lookup"><span data-stu-id="0837e-188">Count of IIS log entries by client IP address.</span></span> |
| <span data-ttu-id="0837e-189">W3CIISLog &#124; where csHost=="www.contoso.com" &#124; summarize count() by csUriStem</span><span class="sxs-lookup"><span data-stu-id="0837e-189">W3CIISLog &#124; where csHost=="www.contoso.com" &#124; summarize count() by csUriStem</span></span> |<span data-ttu-id="0837e-190">Contagem de IIS entradas no log por URL de saudação host www.contoso.com.</span><span class="sxs-lookup"><span data-stu-id="0837e-190">Count of IIS log entries by URL for hello host www.contoso.com.</span></span> |
| <span data-ttu-id="0837e-191">W3CIISLog &#124; summarize sum(csBytes) by Computer &#124; take 500000</span><span class="sxs-lookup"><span data-stu-id="0837e-191">W3CIISLog &#124; summarize sum(csBytes) by Computer &#124; take 500000</span></span> |<span data-ttu-id="0837e-192">Total de bytes recebidos por cada computador com IIS.</span><span class="sxs-lookup"><span data-stu-id="0837e-192">Total bytes received by each IIS computer.</span></span> |

## <a name="next-steps"></a><span data-ttu-id="0837e-193">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="0837e-193">Next steps</span></span>
* <span data-ttu-id="0837e-194">Configurar análise de Log toocollect outros [fontes de dados](log-analytics-data-sources.md) para análise.</span><span class="sxs-lookup"><span data-stu-id="0837e-194">Configure Log Analytics toocollect other [data sources](log-analytics-data-sources.md) for analysis.</span></span>
* <span data-ttu-id="0837e-195">Saiba mais sobre [pesquisas de log](log-analytics-log-searches.md) dados de saudação tooanalyze coletados de fontes de dados e soluções.</span><span class="sxs-lookup"><span data-stu-id="0837e-195">Learn about [log searches](log-analytics-log-searches.md) tooanalyze hello data collected from data sources and solutions.</span></span>
* <span data-ttu-id="0837e-196">Configure alertas em análise de Log tooproactively notificá-lo de condições importantes encontradas nos logs do IIS.</span><span class="sxs-lookup"><span data-stu-id="0837e-196">Configure alerts in Log Analytics tooproactively notify you of important conditions found in IIS logs.</span></span>
