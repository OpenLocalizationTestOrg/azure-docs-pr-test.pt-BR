---
title: "Noções básicas sobre alertas no Azure Log Analytics | Microsoft Docs"
description: "Alertas no Log Analytics identificam informações importantes em seu repositório do OMS e podem notificar proativamente problemas ou invocar ações para tentar corrigi-los.  Este artigo descreve os diferentes tipos de regras de alerta e como elas são definidas."
services: log-analytics
documentationcenter: 
author: bwren
manager: jwhit
editor: tysonn
ms.assetid: 6cfd2a46-b6a2-4f79-a67b-08ce488f9a91
ms.service: log-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/26/2017
ms.author: bwren
ms.openlocfilehash: 951e76d3fb18d9e433b148e82d4d6cee9417ce6d
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/03/2017
---
# <a name="understanding-alerts-in-log-analytics"></a><span data-ttu-id="af2d0-104">Noções básicas sobre alertas no Log Analytics</span><span class="sxs-lookup"><span data-stu-id="af2d0-104">Understanding alerts in Log Analytics</span></span>

<span data-ttu-id="af2d0-105">Alertas no Log Analytics identificam informações importante no repositório de Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="af2d0-105">Alerts in Log Analytics identify important information in your Log Analytics repository.</span></span>  <span data-ttu-id="af2d0-106">Este artigo fornece detalhes de como regras de alerta no Log Analytics funcionam e descreve as diferenças entre diferentes tipos de regras de alerta.</span><span class="sxs-lookup"><span data-stu-id="af2d0-106">This article provides details of how alert rules in Log Analytics work and describes the differences between different types of alert rules.</span></span>

<span data-ttu-id="af2d0-107">Para o processo de criação de regras de alerta, consulte os artigos a seguir:</span><span class="sxs-lookup"><span data-stu-id="af2d0-107">For the process of creating alert rules, see the following articles:</span></span>

- <span data-ttu-id="af2d0-108">Criar regras de alerta usando o [Portal do Azure](log-analytics-alerts-creating.md)</span><span class="sxs-lookup"><span data-stu-id="af2d0-108">Create alert rules using [Azure portal](log-analytics-alerts-creating.md)</span></span>
- <span data-ttu-id="af2d0-109">Criar regras de alerta usando o [modelo do Resource Manager](../operations-management-suite/operations-management-suite-solutions-resources-searches-alerts.md)</span><span class="sxs-lookup"><span data-stu-id="af2d0-109">Create alert rules using [Resource Manager template](../operations-management-suite/operations-management-suite-solutions-resources-searches-alerts.md)</span></span>
- <span data-ttu-id="af2d0-110">Criar regras de alerta usando a [API REST](log-analytics-api-alerts.md)</span><span class="sxs-lookup"><span data-stu-id="af2d0-110">Create alert rules using [REST API](log-analytics-api-alerts.md)</span></span>


## <a name="alert-rules"></a><span data-ttu-id="af2d0-111">Regras de alerta</span><span class="sxs-lookup"><span data-stu-id="af2d0-111">Alert rules</span></span>

<span data-ttu-id="af2d0-112">Os alertas são criados por regras de alerta que executam pesquisas de log automaticamente em intervalos regulares.</span><span class="sxs-lookup"><span data-stu-id="af2d0-112">Alerts are created by alert rules that automatically run log searches at regular intervals.</span></span>  <span data-ttu-id="af2d0-113">Se os resultados da pesquisa de log corresponderem a critérios específicos, um registro de alerta será criado.</span><span class="sxs-lookup"><span data-stu-id="af2d0-113">If the results of the log search match particular criteria then an alert record is created.</span></span>  <span data-ttu-id="af2d0-114">A regra pode então executar automaticamente uma ou mais ações para notificar você proativamente do alerta ou invocar outro processo.</span><span class="sxs-lookup"><span data-stu-id="af2d0-114">The rule can then automatically run one or more actions to proactively notify you of the alert or invoke another process.</span></span>  <span data-ttu-id="af2d0-115">Diferentes tipos de regras de alerta usam lógicas diferentes para realizar essa análise.</span><span class="sxs-lookup"><span data-stu-id="af2d0-115">Different types of alert rules use different logic to perform this analysis.</span></span>

![Alertas do Log Analytics](media/log-analytics-alerts/overview.png)

<span data-ttu-id="af2d0-117">Regras de Alerta são definidas pelos detalhes a seguir:</span><span class="sxs-lookup"><span data-stu-id="af2d0-117">Alert Rules are defined by the following details:</span></span>

- <span data-ttu-id="af2d0-118">**Pesquisa de log**.</span><span class="sxs-lookup"><span data-stu-id="af2d0-118">**Log search**.</span></span>  <span data-ttu-id="af2d0-119">A consulta que é executada cada vez que a regra de alerta é acionada.</span><span class="sxs-lookup"><span data-stu-id="af2d0-119">The query that runs every time the alert rule fires.</span></span>  <span data-ttu-id="af2d0-120">Os registros retornados por essa consulta serão usados para determinar se um alerta é criado.</span><span class="sxs-lookup"><span data-stu-id="af2d0-120">The records returned by this query is used to determine whether an alert is created.</span></span>
- <span data-ttu-id="af2d0-121">**Janela de tempo**.</span><span class="sxs-lookup"><span data-stu-id="af2d0-121">**Time window**.</span></span>  <span data-ttu-id="af2d0-122">Especifica o intervalo de tempo para a consulta.</span><span class="sxs-lookup"><span data-stu-id="af2d0-122">Specifies the time range for the query.</span></span>  <span data-ttu-id="af2d0-123">A consulta retorna somente os registros que foram criados dentro desse intervalo de tempo atual.</span><span class="sxs-lookup"><span data-stu-id="af2d0-123">The query returns only records that were created within this range of the current time.</span></span>  <span data-ttu-id="af2d0-124">Este pode ser qualquer valor entre 5 minutos e 24 horas.</span><span class="sxs-lookup"><span data-stu-id="af2d0-124">This can be any value between 5 minutes and 24 hours.</span></span> <span data-ttu-id="af2d0-125">Por exemplo, se a janela de tempo está definida para 60 minutos e a consulta é executada às 13h15, somente os registros criados entre 12h15 e 13h15 são retornados.</span><span class="sxs-lookup"><span data-stu-id="af2d0-125">For example, If the time window is set to 60 minutes, and the query is run at 1:15 PM, only records created between 12:15 PM and 1:15 PM is returned.</span></span>
- <span data-ttu-id="af2d0-126">**Frequência**.</span><span class="sxs-lookup"><span data-stu-id="af2d0-126">**Frequency**.</span></span>  <span data-ttu-id="af2d0-127">Especifica a frequência com que a consulta deve ser executada.</span><span class="sxs-lookup"><span data-stu-id="af2d0-127">Specifies how often the query should be run.</span></span> <span data-ttu-id="af2d0-128">Pode ser qualquer valor entre 5 minutos e 24 horas.</span><span class="sxs-lookup"><span data-stu-id="af2d0-128">Can be any value between 5 minutes and 24 hours.</span></span> <span data-ttu-id="af2d0-129">Deve ser igual a ou menor que a janela de tempo.</span><span class="sxs-lookup"><span data-stu-id="af2d0-129">Should be equal to or less than the time window.</span></span>  <span data-ttu-id="af2d0-130">Se o valor for maior que a janela de tempo, haverá o risco de que registros sejam perdidos.</span><span class="sxs-lookup"><span data-stu-id="af2d0-130">If the value is greater than the time window, then you risk records being missed.</span></span><br><span data-ttu-id="af2d0-131">Por exemplo, considere uma janela de tempo de 30 minutos e uma frequência de 60 minutos.</span><span class="sxs-lookup"><span data-stu-id="af2d0-131">For example, consider a time window of 30 minutes and a frequency of 60 minutes.</span></span>  <span data-ttu-id="af2d0-132">Se a consulta for executada à 1:00, retornará registros entre 12:30 e 1:00.</span><span class="sxs-lookup"><span data-stu-id="af2d0-132">If the query is run at 1:00, it returns records between 12:30 and 1:00 PM.</span></span>  <span data-ttu-id="af2d0-133">A próxima vez em que a consulta será executada é às 2:00, quando ela retornará registros entre 1:30 e 2:00.</span><span class="sxs-lookup"><span data-stu-id="af2d0-133">The next time the query would run is 2:00 when it would return records between 1:30 and 2:00.</span></span>  <span data-ttu-id="af2d0-134">Todos os registros criados entre 1:00 e 1:30 nunca seriam avaliados.</span><span class="sxs-lookup"><span data-stu-id="af2d0-134">Any records created between 1:00 and 1:30 would never be evaluated.</span></span>
- <span data-ttu-id="af2d0-135">**Limite**.</span><span class="sxs-lookup"><span data-stu-id="af2d0-135">**Threshold**.</span></span>  <span data-ttu-id="af2d0-136">Os resultados da pesquisa de logs são avaliados para determinar se um alerta deve ser criado.</span><span class="sxs-lookup"><span data-stu-id="af2d0-136">The results of the log search are evaluated to determine whether an alert should be created.</span></span>  <span data-ttu-id="af2d0-137">O limite é diferente para os diferentes tipos de regras de alerta.</span><span class="sxs-lookup"><span data-stu-id="af2d0-137">The threshold is different for the different types of alert rules.</span></span>

<span data-ttu-id="af2d0-138">Cada regra de alerta no Log Analytics é de um entre dois tipos.</span><span class="sxs-lookup"><span data-stu-id="af2d0-138">Each alert rule in Log Analytics is one of two types.</span></span>  <span data-ttu-id="af2d0-139">Cada um desses tipos é descrito detalhadamente nas seções a seguir.</span><span class="sxs-lookup"><span data-stu-id="af2d0-139">Each of these types is described in detail in the sections that follow.</span></span>

- <span data-ttu-id="af2d0-140">**[Número de resultados](#number-of-results-alert-rules)**.</span><span class="sxs-lookup"><span data-stu-id="af2d0-140">**[Number of results](#number-of-results-alert-rules)**.</span></span> <span data-ttu-id="af2d0-141">Alerta único criado quando o número de registros retornados pela pesquisa de logs excedeu um número especificado.</span><span class="sxs-lookup"><span data-stu-id="af2d0-141">Single alert created when the number records returned by the log search exceed a specified number.</span></span>
- <span data-ttu-id="af2d0-142">**[Medida métrica](#metric-measurement-alert-rules)**.</span><span class="sxs-lookup"><span data-stu-id="af2d0-142">**[Metric measurement](#metric-measurement-alert-rules)**.</span></span>  <span data-ttu-id="af2d0-143">Alerta criado para cada objeto nos resultados da pesquisa de logs com valores que excedem o limite especificado.</span><span class="sxs-lookup"><span data-stu-id="af2d0-143">Alert created for each object in the results of the log search with values that exceed specified threshold.</span></span>

<span data-ttu-id="af2d0-144">As diferenças entre tipos de regra de alerta são conforme descrito a seguir.</span><span class="sxs-lookup"><span data-stu-id="af2d0-144">The differences between alert rule types are as follows.</span></span>

- <span data-ttu-id="af2d0-145">A regra de alerta **Número de resultados** sempre criará um único tempo de alerta, enquanto a regra de alerta **Medição métrica** criará um alerta para cada objeto que exceder o limite.</span><span class="sxs-lookup"><span data-stu-id="af2d0-145">**Number of results** alert rule will always create a single alert while **Metric measurement** alert rule creates an alert for each object that exceeds the threshold.</span></span>
- <span data-ttu-id="af2d0-146">Regras de alerta de **Número de resultados** criarão um alerta quando o limite for excedido uma única vez.</span><span class="sxs-lookup"><span data-stu-id="af2d0-146">**Number of results** alert rules create an alert when the threshold is exceeded a single time.</span></span> <span data-ttu-id="af2d0-147">Regras de alerta de **Medição métrica** podem criar um alerta quando o limite é excedido um determinado número de vezes em um intervalo de tempo específico.</span><span class="sxs-lookup"><span data-stu-id="af2d0-147">**Metric measurement** alert rules can create an alert when the threshold is exceeded a certain number of times over a particular time interval.</span></span>

## <a name="number-of-results-alert-rules"></a><span data-ttu-id="af2d0-148">Regras de alerta de Número de resultados</span><span class="sxs-lookup"><span data-stu-id="af2d0-148">Number of results alert rules</span></span>
<span data-ttu-id="af2d0-149">Regras de alerta de **Número de resultados** criam um único alerta quando o número de registros retornados pela consulta de pesquisa excede o limite especificado.</span><span class="sxs-lookup"><span data-stu-id="af2d0-149">**Number of results** alert rules create a single alert when the number of records returned by the search query exceed the specified threshold.</span></span>

### <a name="threshold"></a><span data-ttu-id="af2d0-150">Limite</span><span class="sxs-lookup"><span data-stu-id="af2d0-150">Threshold</span></span>
<span data-ttu-id="af2d0-151">O limite para uma regra de alerta de **Número de resultados** é simplesmente maior ou menor que um valor específico.</span><span class="sxs-lookup"><span data-stu-id="af2d0-151">The threshold for a **Number of results** alert rule is simply greater than or less than a particular value.</span></span>  <span data-ttu-id="af2d0-152">Se o número de registros retornados pela pesquisa de logs corresponderem a esses critérios, um alerta será criado.</span><span class="sxs-lookup"><span data-stu-id="af2d0-152">If the number of records returned by the log search match this criteria, then an alert is created.</span></span>

### <a name="scenarios"></a><span data-ttu-id="af2d0-153">Cenários</span><span class="sxs-lookup"><span data-stu-id="af2d0-153">Scenarios</span></span>

#### <a name="events"></a><span data-ttu-id="af2d0-154">Eventos</span><span class="sxs-lookup"><span data-stu-id="af2d0-154">Events</span></span>
<span data-ttu-id="af2d0-155">Esse tipo de regra de alerta é ideal para trabalhar com eventos como logs de eventos do Windows, Syslog e logs Personalizados.</span><span class="sxs-lookup"><span data-stu-id="af2d0-155">This type of alert rule is ideal for working with events such as Windows event logs, Syslog, and Custom logs.</span></span>  <span data-ttu-id="af2d0-156">Pode ser útil criar um alerta quando um evento de erro específico é criado ou quando vários eventos de erros são criados dentro de uma janela de tempo específica.</span><span class="sxs-lookup"><span data-stu-id="af2d0-156">You may want to create an alert when a particular error event gets created, or when multiple error events are created within a particular time window.</span></span>

<span data-ttu-id="af2d0-157">Para alertar quanto a um único evento, defina o número de resultados para maior que 0 e tanto a frequência quanto a janela de tempo para 5 minutos.</span><span class="sxs-lookup"><span data-stu-id="af2d0-157">To alert on a single event, set the number of results to greater than 0 and both the frequency and time window to 5 minutes.</span></span>  <span data-ttu-id="af2d0-158">Isso executa a consulta a cada 5 minutos e verifica a ocorrência de um único evento que foi criado desde a última vez em que a consulta foi executada.</span><span class="sxs-lookup"><span data-stu-id="af2d0-158">That runs the query every 5 minutes and check for the occurrence of a single event that was created since the last time the query was run.</span></span>  <span data-ttu-id="af2d0-159">Uma frequência maior pode atrasar o tempo entre o evento que está sendo coletado e o alerta criado.</span><span class="sxs-lookup"><span data-stu-id="af2d0-159">A longer frequency may delay the time between the event being collected and the alert being created.</span></span>

<span data-ttu-id="af2d0-160">Alguns aplicativos podem registrar um erro ocasional que não necessariamente gerará um alerta.</span><span class="sxs-lookup"><span data-stu-id="af2d0-160">Some applications may log an occasional error that shouldn't necessarily raise an alert.</span></span>  <span data-ttu-id="af2d0-161">Por exemplo, o aplicativo pode repetir o processo que criou o evento de erro e depois ter êxito na próxima vez.</span><span class="sxs-lookup"><span data-stu-id="af2d0-161">For example, the application may retry the process that created the error event and then succeed the next time.</span></span>  <span data-ttu-id="af2d0-162">Nesse caso, não convém criar o alerta, a menos que vários eventos sejam criados dentro de uma janela de tempo específica.</span><span class="sxs-lookup"><span data-stu-id="af2d0-162">In this case, you may not want to create the alert unless multiple events are created within a particular time window.</span></span>  

<span data-ttu-id="af2d0-163">Em alguns casos, pode ser útil criar um alerta na ausência de um evento.</span><span class="sxs-lookup"><span data-stu-id="af2d0-163">In some cases, you may want to create an alert in the absence of an event.</span></span>  <span data-ttu-id="af2d0-164">Por exemplo, um processo pode registrar eventos regulares para indicar que ele está funcionando corretamente.</span><span class="sxs-lookup"><span data-stu-id="af2d0-164">For example, a process may log regular events to indicate that it's working properly.</span></span>  <span data-ttu-id="af2d0-165">Se ele não registrar um desses eventos dentro de uma janela de tempo específica, um alerta deverá ser criado.</span><span class="sxs-lookup"><span data-stu-id="af2d0-165">If it doesn't log one of these events within a particular time window, then an alert should be created.</span></span>  <span data-ttu-id="af2d0-166">Nesse caso você definiria o limite como **menos de 1**.</span><span class="sxs-lookup"><span data-stu-id="af2d0-166">In this case you would set the threshold to **less than 1**.</span></span>

#### <a name="performance-alerts"></a><span data-ttu-id="af2d0-167">Alertas de desempenho</span><span class="sxs-lookup"><span data-stu-id="af2d0-167">Performance alerts</span></span>
<span data-ttu-id="af2d0-168">[Os dados de desempenho](log-analytics-data-sources-performance-counters.md) são armazenado como registros no repositório do OMS de forma semelhante aos eventos.</span><span class="sxs-lookup"><span data-stu-id="af2d0-168">[Performance data](log-analytics-data-sources-performance-counters.md) is stored as records in the OMS repository similar to events.</span></span>  <span data-ttu-id="af2d0-169">Se você deseja alertar quando um contador de desempenho exceder um limite específico, esse limite deve ser incluído na consulta.</span><span class="sxs-lookup"><span data-stu-id="af2d0-169">If you want to alert when a performance counter exceeds a particular threshold, then that threshold should be included in the query.</span></span>

<span data-ttu-id="af2d0-170">Por exemplo, se você quisesse alertar quando o processador ultrapassasse 90%, usaria uma consulta como a seguinte, com o limite para a regra de alerta **maior do que 0**.</span><span class="sxs-lookup"><span data-stu-id="af2d0-170">For example, if you wanted to alert when the processor runs over 90%, you would use a query like the following with the threshold for the alert rule **greater than 0**.</span></span>

    Type=Perf ObjectName=Processor CounterName="% Processor Time" CounterValue>90

<span data-ttu-id="af2d0-171">Se você quisesse alertar quando o processador ficasse acima de 90% durante um determinado período, usaria uma consulta com o [comando measure](log-analytics-search-reference.md#commands), como no seguinte, com o limite para a regra de alerta **maior do que 0**.</span><span class="sxs-lookup"><span data-stu-id="af2d0-171">If you wanted to alert when the processor averaged over 90% for a particular time window, you would use a query using the [measure command](log-analytics-search-reference.md#commands) like the following with the threshold for the alert rule **greater than 0**.</span></span>

    Type=Perf ObjectName=Processor CounterName="% Processor Time" | measure avg(CounterValue) by Computer | where AggregatedValue>90

>[!NOTE]
> <span data-ttu-id="af2d0-172">Se o seu espaço de trabalho fosse atualizado para a [nova linguagem de consulta do Log Analytics](log-analytics-log-search-upgrade.md), as consultas acima seriam alteradas para o demonstrado a seguir: `Perf | where ObjectName=="Processor" and CounterName=="% Processor Time" and CounterValue>90`
> `Perf | where ObjectName=="Processor" and CounterName=="% Processor Time" | summarize avg(CounterValue) by Computer | where CounterValue>90`</span><span class="sxs-lookup"><span data-stu-id="af2d0-172">If your workspace has been upgraded to the [new Log Analytics query language](log-analytics-log-search-upgrade.md), then the above queries would change to the following: `Perf | where ObjectName=="Processor" and CounterName=="% Processor Time" and CounterValue>90`
> `Perf | where ObjectName=="Processor" and CounterName=="% Processor Time" | summarize avg(CounterValue) by Computer | where CounterValue>90`</span></span>


## <a name="metric-measurement-alert-rules"></a><span data-ttu-id="af2d0-173">Regras de alerta com medição métrica</span><span class="sxs-lookup"><span data-stu-id="af2d0-173">Metric measurement alert rules</span></span>

>[!NOTE]
> <span data-ttu-id="af2d0-174">Regras de alerta de Medição métrica estão atualmente em visualização pública.</span><span class="sxs-lookup"><span data-stu-id="af2d0-174">Metric measurement alert rules are currently in public preview.</span></span>

<span data-ttu-id="af2d0-175">Regras de alerta de **Medição métrica** criam um alerta para cada objeto em uma consulta com um valor que excede um limite especificado.</span><span class="sxs-lookup"><span data-stu-id="af2d0-175">**Metric measurement** alert rules create an alert for each object in a query with a value that exceeds a specified threshold.</span></span>  <span data-ttu-id="af2d0-176">Eles têm as diferenças distintas a seguir em relação às regras de alerta de **Número de resultados**.</span><span class="sxs-lookup"><span data-stu-id="af2d0-176">They have the following distinct differences from **Number of results** alert rules.</span></span>

#### <a name="log-search"></a><span data-ttu-id="af2d0-177">Pesquisa de log</span><span class="sxs-lookup"><span data-stu-id="af2d0-177">Log search</span></span>
<span data-ttu-id="af2d0-178">Embora você possa usar qualquer consulta para uma regra de alerta de **Número de resultados**, há requisitos específicos para a consulta para uma regra de alerta de Medição métrica.</span><span class="sxs-lookup"><span data-stu-id="af2d0-178">While you can use any query for a **Number of results** alert rule, there are specific requirements the query for a metric measurement alert rule.</span></span>  <span data-ttu-id="af2d0-179">Ela deve incluir um [comando Measure](log-analytics-search-reference.md#commands) para agrupar os resultados em um determinado campo.</span><span class="sxs-lookup"><span data-stu-id="af2d0-179">It must include a [Measure command](log-analytics-search-reference.md#commands) to group the results on a particular field.</span></span> <span data-ttu-id="af2d0-180">Os cabeçalhos devem incluir os elementos a seguir.</span><span class="sxs-lookup"><span data-stu-id="af2d0-180">This command must include the following elements.</span></span>

- <span data-ttu-id="af2d0-181">**Função de agregação**.</span><span class="sxs-lookup"><span data-stu-id="af2d0-181">**Aggregate function**.</span></span>  <span data-ttu-id="af2d0-182">Determina o cálculo que será realizado e, potencialmente, um campo numérico a agregar.</span><span class="sxs-lookup"><span data-stu-id="af2d0-182">Determines the calculation that is performed and potentially a numeric field to aggregate.</span></span>  <span data-ttu-id="af2d0-183">Por exemplo, **count()** retornará o número de registros na consulta e **avg(CounterValue)** retornará a média do campo CounterValue durante o intervalo.</span><span class="sxs-lookup"><span data-stu-id="af2d0-183">For example, **count()** will return the number of records in the query, **avg(CounterValue)** will return the average of the CounterValue field over the interval.</span></span>
- <span data-ttu-id="af2d0-184">**Campo Grupo**.</span><span class="sxs-lookup"><span data-stu-id="af2d0-184">**Group Field**.</span></span>  <span data-ttu-id="af2d0-185">Um registro com um valor agregado será criado para cada instância do campo e um alerta pode ser gerado para cada um deles.</span><span class="sxs-lookup"><span data-stu-id="af2d0-185">A record with an aggregated value is created for each instance of this field, and an alert can be generated for each.</span></span>  <span data-ttu-id="af2d0-186">Por exemplo, se você quisesse gerar um alerta para cada computador, você usaria **by Computer**.</span><span class="sxs-lookup"><span data-stu-id="af2d0-186">For example, if you wanted to generate an alert for each computer, you would use **by Computer**.</span></span>   
- <span data-ttu-id="af2d0-187">**Intervalo**.</span><span class="sxs-lookup"><span data-stu-id="af2d0-187">**Interval**.</span></span>  <span data-ttu-id="af2d0-188">Define o intervalo de tempo durante o qual os dados são agregados.</span><span class="sxs-lookup"><span data-stu-id="af2d0-188">Defines the time interval over which the data is aggregated.</span></span>  <span data-ttu-id="af2d0-189">Por exemplo, se você especificasse **5 minutos**, um registro seria criado para cada instância do campo de grupo agregada em intervalos de 5 minutos durante a janela de tempo especificada para o alerta.</span><span class="sxs-lookup"><span data-stu-id="af2d0-189">For example, if you specified **5minutes**, a record would be created for each instance of the group field aggregated at 5 minute intervals over the time window specified for the alert.</span></span>

#### <a name="threshold"></a><span data-ttu-id="af2d0-190">Limite</span><span class="sxs-lookup"><span data-stu-id="af2d0-190">Threshold</span></span>
<span data-ttu-id="af2d0-191">O limite para regras de alerta de Medição métrica é definido por um valor de agregação e um número de violações.</span><span class="sxs-lookup"><span data-stu-id="af2d0-191">The threshold for Metric measurement alert rules is defined by an aggregate value and a number of breaches.</span></span>  <span data-ttu-id="af2d0-192">Se qualquer ponto de dados na pesquisa de logs exceder esse valor, ele será considerado uma violação.</span><span class="sxs-lookup"><span data-stu-id="af2d0-192">If any data point in the log search exceeds this value, it's considered a breach.</span></span>  <span data-ttu-id="af2d0-193">Se o número de violações de qualquer objeto nos resultados exceder o valor especificado, um alerta será criado para esse objeto.</span><span class="sxs-lookup"><span data-stu-id="af2d0-193">If the number of breaches in for any object in the results exceeds the specified value, then an alert is created for that object.</span></span>

#### <a name="example"></a><span data-ttu-id="af2d0-194">Exemplo</span><span class="sxs-lookup"><span data-stu-id="af2d0-194">Example</span></span>
<span data-ttu-id="af2d0-195">Considere um cenário em que você deseje um alerta se qualquer computador exceda 90% de utilização do processador por três vezes em 30 minutos.</span><span class="sxs-lookup"><span data-stu-id="af2d0-195">Consider a scenario where you wanted an alert if any computer exceeded processor utilization of 90% three times over 30 minutes.</span></span>  <span data-ttu-id="af2d0-196">Você criaria uma regra de alerta com os detalhes a seguir.</span><span class="sxs-lookup"><span data-stu-id="af2d0-196">You would create an alert rule with the following details.</span></span>  

<span data-ttu-id="af2d0-197">**Consulta:** Type=Perf ObjectName=Processor CounterName="% Processor Time" | measure avg(CounterValue) by Computer Interval 5minute</span><span class="sxs-lookup"><span data-stu-id="af2d0-197">**Query:** Type=Perf ObjectName=Processor CounterName="% Processor Time" | measure avg(CounterValue) by Computer Interval 5minute</span></span><br><span data-ttu-id="af2d0-198">
**Janela de tempo:** 30 minutos</span><span class="sxs-lookup"><span data-stu-id="af2d0-198">
**Time window:** 30 minutes</span></span><br><span data-ttu-id="af2d0-199">
**Frequência de alerta:** cinco minutos</span><span class="sxs-lookup"><span data-stu-id="af2d0-199">
**Alert frequency:** 5 minutes</span></span><br><span data-ttu-id="af2d0-200">
**Valor de agregação:** maior que 90</span><span class="sxs-lookup"><span data-stu-id="af2d0-200">
**Aggregate value:** Great than 90</span></span><br><span data-ttu-id="af2d0-201">
**Disparar alerta com base em:** total de violações maior que cinco</span><span class="sxs-lookup"><span data-stu-id="af2d0-201">
**Trigger alert based on:** Total breaches Greater than 5</span></span><br>

<span data-ttu-id="af2d0-202">A consulta criaria um valor médio para cada computador em intervalos de cinco minutos.</span><span class="sxs-lookup"><span data-stu-id="af2d0-202">The query would create an average value for each computer at 5 minute intervals.</span></span>  <span data-ttu-id="af2d0-203">Essa consulta seria executada cada cinco minutos para os dados coletados durante os 30 minutos anteriores.</span><span class="sxs-lookup"><span data-stu-id="af2d0-203">This query would be run every 5 minutes for data collected over the previous 30 minutes.</span></span>  <span data-ttu-id="af2d0-204">Abaixo, são mostrados dados de exemplo para três computadores.</span><span class="sxs-lookup"><span data-stu-id="af2d0-204">Sample data is shown below for three computers.</span></span>

![Resultados da consulta de exemplo](media/log-analytics-alerts/metrics-measurement-sample-graph.png)

<span data-ttu-id="af2d0-206">Neste exemplo, alertas separados seriam criados para srv02 e srv03, já que eles violaram o limite de 90% três vezes durante a janela de tempo.</span><span class="sxs-lookup"><span data-stu-id="af2d0-206">In this example, separate alerts would be created for srv02 and srv03 since they breached the 90% threshold 3 times over the time window.</span></span>  <span data-ttu-id="af2d0-207">Se **Disparar alerta com base em:** fosse alterado para **Consecutivas**, o único alerta criado seria para srv03, já que ele violou o limite em três amostras consecutivas.</span><span class="sxs-lookup"><span data-stu-id="af2d0-207">If the **Trigger alert based on:** were changed to **Consecutive** then an alert would be created only for srv03 since it breached the threshold for 3 consecutive samples.</span></span>

## <a name="alert-records"></a><span data-ttu-id="af2d0-208">Registros de alerta</span><span class="sxs-lookup"><span data-stu-id="af2d0-208">Alert records</span></span>
<span data-ttu-id="af2d0-209">Registros de alerta criados por regras de alerta no Log Analytics têm um **Type** que indica **Alert** e um **SourceSystem** que indica **OMS**.</span><span class="sxs-lookup"><span data-stu-id="af2d0-209">Alert records created by alert rules in Log Analytics have a **Type** of **Alert** and a **SourceSystem** of **OMS**.</span></span>  <span data-ttu-id="af2d0-210">Eles têm as propriedades indicadas na tabela a seguir.</span><span class="sxs-lookup"><span data-stu-id="af2d0-210">They have the properties in the following table.</span></span>

| <span data-ttu-id="af2d0-211">Propriedade</span><span class="sxs-lookup"><span data-stu-id="af2d0-211">Property</span></span> | <span data-ttu-id="af2d0-212">Descrição</span><span class="sxs-lookup"><span data-stu-id="af2d0-212">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="af2d0-213">Tipo</span><span class="sxs-lookup"><span data-stu-id="af2d0-213">Type</span></span> |<span data-ttu-id="af2d0-214">*Alerta*</span><span class="sxs-lookup"><span data-stu-id="af2d0-214">*Alert*</span></span> |
| <span data-ttu-id="af2d0-215">SourceSystem</span><span class="sxs-lookup"><span data-stu-id="af2d0-215">SourceSystem</span></span> |<span data-ttu-id="af2d0-216">*OMS*</span><span class="sxs-lookup"><span data-stu-id="af2d0-216">*OMS*</span></span> |
| <span data-ttu-id="af2d0-217">*Objeto*</span><span class="sxs-lookup"><span data-stu-id="af2d0-217">*Object*</span></span>  | <span data-ttu-id="af2d0-218">[Alertas de métrica de medição](#metric-measurement-alert-rules) terão uma propriedade para o campo de grupo.</span><span class="sxs-lookup"><span data-stu-id="af2d0-218">[Metric measurement alerts](#metric-measurement-alert-rules) will have a property for the group field.</span></span>  <span data-ttu-id="af2d0-219">Por exemplo, se a pesquisa de logs for agrupada em Computador, o registro de alerta terá um campo Computador com o nome do computador como o valor.</span><span class="sxs-lookup"><span data-stu-id="af2d0-219">For example, if the log search groups on Computer, the alert record with have a Computer field with the name of the computer as the value.</span></span>
| <span data-ttu-id="af2d0-220">AlertName</span><span class="sxs-lookup"><span data-stu-id="af2d0-220">AlertName</span></span> |<span data-ttu-id="af2d0-221">Nome do alerta.</span><span class="sxs-lookup"><span data-stu-id="af2d0-221">Name of the alert.</span></span> |
| <span data-ttu-id="af2d0-222">AlertSeverity</span><span class="sxs-lookup"><span data-stu-id="af2d0-222">AlertSeverity</span></span> |<span data-ttu-id="af2d0-223">Nível de severidade do alerta.</span><span class="sxs-lookup"><span data-stu-id="af2d0-223">Severity level of the alert.</span></span> |
| <span data-ttu-id="af2d0-224">LinkToSearchResults</span><span class="sxs-lookup"><span data-stu-id="af2d0-224">LinkToSearchResults</span></span> |<span data-ttu-id="af2d0-225">Vincular a pesquisa de log do Log Analytics que retorna os registros da consulta que criou o alerta.</span><span class="sxs-lookup"><span data-stu-id="af2d0-225">Link to Log Analytics log search that returns the records from the query that created the alert.</span></span> |
| <span data-ttu-id="af2d0-226">Consultar</span><span class="sxs-lookup"><span data-stu-id="af2d0-226">Query</span></span> |<span data-ttu-id="af2d0-227">Texto da consulta que foi executada.</span><span class="sxs-lookup"><span data-stu-id="af2d0-227">Text of the query that was run.</span></span> |
| <span data-ttu-id="af2d0-228">QueryExecutionEndTime</span><span class="sxs-lookup"><span data-stu-id="af2d0-228">QueryExecutionEndTime</span></span> |<span data-ttu-id="af2d0-229">Término do intervalo de tempo para a consulta.</span><span class="sxs-lookup"><span data-stu-id="af2d0-229">End of the time range for the query.</span></span> |
| <span data-ttu-id="af2d0-230">QueryExecutionStartTime</span><span class="sxs-lookup"><span data-stu-id="af2d0-230">QueryExecutionStartTime</span></span> |<span data-ttu-id="af2d0-231">Início do intervalo de tempo para a consulta.</span><span class="sxs-lookup"><span data-stu-id="af2d0-231">Start of the time range for the query.</span></span> |
| <span data-ttu-id="af2d0-232">ThresholdOperator</span><span class="sxs-lookup"><span data-stu-id="af2d0-232">ThresholdOperator</span></span> | <span data-ttu-id="af2d0-233">Operador que foi usado pela regra de alerta.</span><span class="sxs-lookup"><span data-stu-id="af2d0-233">Operator that was used by the alert rule.</span></span> |
| <span data-ttu-id="af2d0-234">ThresholdValue</span><span class="sxs-lookup"><span data-stu-id="af2d0-234">ThresholdValue</span></span> | <span data-ttu-id="af2d0-235">Valor que foi usado pela regra de alerta.</span><span class="sxs-lookup"><span data-stu-id="af2d0-235">Value that was used by the alert rule.</span></span> |
| <span data-ttu-id="af2d0-236">TimeGenerated</span><span class="sxs-lookup"><span data-stu-id="af2d0-236">TimeGenerated</span></span> |<span data-ttu-id="af2d0-237">Data e hora em que o alerta foi criado.</span><span class="sxs-lookup"><span data-stu-id="af2d0-237">Date and time the alert was created.</span></span> |

<span data-ttu-id="af2d0-238">Há outros tipos de registros de alerta criados pela [solução de Gerenciamento de Alertas](log-analytics-solution-alert-management.md) e por [exportações do Power BI](log-analytics-powerbi.md).</span><span class="sxs-lookup"><span data-stu-id="af2d0-238">There are other kinds of alert records created by the [Alert Management solution](log-analytics-solution-alert-management.md) and by [Power BI exports](log-analytics-powerbi.md).</span></span>  <span data-ttu-id="af2d0-239">Eles têm um **Type** que indica **Alert**, mas são diferenciados por seus **SourceSystem**.</span><span class="sxs-lookup"><span data-stu-id="af2d0-239">These all have a **Type** of **Alert** but are distinguished by their **SourceSystem**.</span></span>


## <a name="next-steps"></a><span data-ttu-id="af2d0-240">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="af2d0-240">Next steps</span></span>
* <span data-ttu-id="af2d0-241">Instale a [solução de Gerenciamento de Alertas](log-analytics-solution-alert-management.md) para analisar os alertas criados no Log Analytics junto com aqueles coletados do System Center Operations Manager.</span><span class="sxs-lookup"><span data-stu-id="af2d0-241">Install the [Alert Management solution](log-analytics-solution-alert-management.md) to analyze alerts created in Log Analytics along with alerts collected from System Center Operations Manager.</span></span>
* <span data-ttu-id="af2d0-242">Leia mais sobre [pesquisas de log](log-analytics-log-searches.md) que podem gerar alertas.</span><span class="sxs-lookup"><span data-stu-id="af2d0-242">Read more about [log searches](log-analytics-log-searches.md) that can generate alerts.</span></span>
* <span data-ttu-id="af2d0-243">Conclua um passo a passo para [configurar um webhook](log-analytics-alerts-webhooks.md) com uma regra de alerta.</span><span class="sxs-lookup"><span data-stu-id="af2d0-243">Complete a walkthrough for [configuring a webook](log-analytics-alerts-webhooks.md) with an alert rule.</span></span>  
* <span data-ttu-id="af2d0-244">Aprenda a criar [runbooks na Automação do Azure](https://azure.microsoft.com/documentation/services/automation) para corrigir os problemas identificados por alertas.</span><span class="sxs-lookup"><span data-stu-id="af2d0-244">Learn how to write [runbooks in Azure Automation](https://azure.microsoft.com/documentation/services/automation) to remediate problems identified by alerts.</span></span>
