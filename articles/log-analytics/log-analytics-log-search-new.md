---
title: "pesquisas de aaaLog na análise de Log do OMS | Microsoft Docs"
description: "Você requer uma tooretrieve de pesquisa de log todos os dados de análise de Log.  Este artigo descreve como o novo log pesquisas são usadas na análise de Log e apresenta os conceitos que você precisa toounderstand antes de criar um."
services: log-analytics
documentationcenter: 
author: bwren
manager: carmonm
editor: 
ms.service: log-analytics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/25/2017
ms.author: bwren
ms.openlocfilehash: 08fda1d9eb9e6ab824ffb9e12af09832c3e3fad2
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="understanding-log-searches-in-log-analytics"></a><span data-ttu-id="1ec89-104">Compreendendo as pesquisas de logs no Log Analytics</span><span class="sxs-lookup"><span data-stu-id="1ec89-104">Understanding log searches in Log Analytics</span></span>

> [!NOTE]
> <span data-ttu-id="1ec89-105">Este artigo descreve as pesquisas de log na análise de Log do Azure usando Olá nova linguagem de consulta.</span><span class="sxs-lookup"><span data-stu-id="1ec89-105">This article describes log searches in Azure Log Analytics using hello new query language.</span></span>  <span data-ttu-id="1ec89-106">Você pode saber mais sobre a nova linguagem de saudação e obter Olá procedimento tooupgrade seu espaço de trabalho em [atualizar sua pesquisa de log de toonew de espaço de trabalho do Azure Log Analytics](log-analytics-log-search-upgrade.md).</span><span class="sxs-lookup"><span data-stu-id="1ec89-106">You can learn more about hello new language and get hello procedure tooupgrade your workspace at [Upgrade your Azure Log Analytics workspace toonew log search](log-analytics-log-search-upgrade.md).</span></span>  
>
> <span data-ttu-id="1ec89-107">Se o espaço de trabalho não tiver sido atualizado toohello nova linguagem de consulta, você deve referir-se muito[localizar os dados usando pesquisas de log na análise de Log](log-analytics-log-searches.md).</span><span class="sxs-lookup"><span data-stu-id="1ec89-107">If your workspace hasn't been upgraded toohello new query language, you should refer too[Find data using log searches in Log Analytics](log-analytics-log-searches.md).</span></span>

<span data-ttu-id="1ec89-108">Você requer uma tooretrieve de pesquisa de log todos os dados de análise de Log.</span><span class="sxs-lookup"><span data-stu-id="1ec89-108">You require a log search tooretrieve any data from Log Analytics.</span></span>  <span data-ttu-id="1ec89-109">Se você estiver analisando dados no portal de hello, configurando uma regra de alerta toobe notificado de uma determinada condição ou recuperar dados usando Olá API de análise de Log, você usará um dados saudação do toospecify da pesquisa de log desejado.</span><span class="sxs-lookup"><span data-stu-id="1ec89-109">Whether you're analyzing data in hello portal, configuring an alert rule toobe notified of a particular condition, or retrieving data using hello Log Analytics API, you will use a log search toospecify hello data you want.</span></span>  <span data-ttu-id="1ec89-110">Este artigo descreve como novas pesquisas de logs são utilizadas no Log Analytics e fornece conceitos que deverão ser compreendidos antes de criar uma.</span><span class="sxs-lookup"><span data-stu-id="1ec89-110">This article describes how log searches are used in Log Analytics and provides concepts that should understand before creating one.</span></span> <span data-ttu-id="1ec89-111">Consulte Olá [próximas etapas](#next-steps) seção para obter detalhes sobre a criação e edição de pesquisas de log e de referências de linguagem de consulta de saudação.</span><span class="sxs-lookup"><span data-stu-id="1ec89-111">See hello [Next steps](#next-steps) section for details on creating and editing log searches and for references on hello query language.</span></span>

## <a name="where-log-searches-are-used"></a><span data-ttu-id="1ec89-112">Onde as pesquisas de logs são utilizadas</span><span class="sxs-lookup"><span data-stu-id="1ec89-112">Where log searches are used</span></span>

<span data-ttu-id="1ec89-113">Olá diferentes maneiras que você usará pesquisas de log na análise de Log incluem o seguinte hello:</span><span class="sxs-lookup"><span data-stu-id="1ec89-113">hello different ways that you will use log searches in Log Analytics include hello following:</span></span>

- <span data-ttu-id="1ec89-114">**Portais.**</span><span class="sxs-lookup"><span data-stu-id="1ec89-114">**Portals.**</span></span> <span data-ttu-id="1ec89-115">Você pode executar análises interativas de dados no repositório de Olá Olá [portal de pesquisa de Log](log-analytics-log-search-log-search-portal.md) ou hello [portal Advanced Analytics](https://go.microsoft.com/fwlink/?linkid=856587).</span><span class="sxs-lookup"><span data-stu-id="1ec89-115">You can perform interactive analysis of data in hello repository with hello [Log Search portal](log-analytics-log-search-log-search-portal.md) or hello [Advanced Analytics portal](https://go.microsoft.com/fwlink/?linkid=856587).</span></span>  <span data-ttu-id="1ec89-116">Isso permite tooedit sua consulta e analisar os resultados de saudação em uma variedade de formatos e visualizações.</span><span class="sxs-lookup"><span data-stu-id="1ec89-116">This allows you tooedit your query and analyze hello results in a variety of formats and visualizations.</span></span>  <span data-ttu-id="1ec89-117">A maioria das consultas que você criar será iniciado em um dos portais hello e, em seguida, copiados depois de verificar se ele funciona conforme esperado.</span><span class="sxs-lookup"><span data-stu-id="1ec89-117">Most queries that you create will start in one of hello portals and then copied once you verify that it works as expected.</span></span>
- <span data-ttu-id="1ec89-118">**Regras de alerta**</span><span class="sxs-lookup"><span data-stu-id="1ec89-118">**Alert rules.**</span></span> <span data-ttu-id="1ec89-119">As [Regras de alerta](log-analytics-alerts.md) identificam proativamente os problemas dos dados no espaço de trabalho.</span><span class="sxs-lookup"><span data-stu-id="1ec89-119">[Alert rules](log-analytics-alerts.md) proactively identify issues from data in your workspace.</span></span>  <span data-ttu-id="1ec89-120">Cada regra de alerta é baseada em uma pesquisa de logs que é executada automaticamente em intervalos regulares.</span><span class="sxs-lookup"><span data-stu-id="1ec89-120">Each alert rule is based on a log search that is automatically run at regular intervals.</span></span>  <span data-ttu-id="1ec89-121">resultados de saudação são inspecionado toodetermine se um alerta deve ser criado.</span><span class="sxs-lookup"><span data-stu-id="1ec89-121">hello results are inspected toodetermine if an alert should be created.</span></span>
- <span data-ttu-id="1ec89-122">**Exibições.**</span><span class="sxs-lookup"><span data-stu-id="1ec89-122">**Views.**</span></span>  <span data-ttu-id="1ec89-123">Você pode criar visualizações de dados toobe incluídas nos painéis de controle de usuário com [Designer de exibição](log-analytics-view-designer.md).</span><span class="sxs-lookup"><span data-stu-id="1ec89-123">You can create visualizations of data toobe included in user dashboards with [View Designer](log-analytics-view-designer.md).</span></span>  <span data-ttu-id="1ec89-124">Pesquisas de log fornecem dados Olá usados pelo [blocos](log-analytics-view-designer-tiles.md) e [partes visualização](log-analytics-view-designer-parts.md) em cada exibição.</span><span class="sxs-lookup"><span data-stu-id="1ec89-124">Log searches provide hello data used by [tiles](log-analytics-view-designer-tiles.md) and [visualization parts](log-analytics-view-designer-parts.md) in each view.</span></span>  <span data-ttu-id="1ec89-125">Você pode fazer drill down de partes de visualização em Olá pesquisa de Log tooperform portal análise detalhada dados saudação.</span><span class="sxs-lookup"><span data-stu-id="1ec89-125">You can drill down from visualization parts into hello Log Search portal tooperform further analysis on hello data.</span></span>
- <span data-ttu-id="1ec89-126">**Exportação.**</span><span class="sxs-lookup"><span data-stu-id="1ec89-126">**Export.**</span></span>  <span data-ttu-id="1ec89-127">Quando você exportar dados de saudação tooExcel de espaço de trabalho de análise de Log ou [Power BI](log-analytics-powerbi.md), você cria um log pesquisa toodefine Olá dados tooexport.</span><span class="sxs-lookup"><span data-stu-id="1ec89-127">When you export data from hello Log Analytics workspace tooExcel or [Power BI](log-analytics-powerbi.md), you create a log search toodefine hello data tooexport.</span></span>
- <span data-ttu-id="1ec89-128">**PowerShell.**</span><span class="sxs-lookup"><span data-stu-id="1ec89-128">**PowerShell.**</span></span> <span data-ttu-id="1ec89-129">Você pode executar um script do PowerShell de uma linha de comando ou um runbook de automação do Azure que usa [Get-AzureRmOperationalInsightsSearchResults](https://docs.microsoft.com/powershell/module/azurerm.operationalinsights/get-azurermoperationalinsightssearchresults?view=azurermps-4.0.0) tooretrieve dados de análise de Log.</span><span class="sxs-lookup"><span data-stu-id="1ec89-129">You can run a PowerShell script from a command line or an Azure Automation runbook that uses [Get-AzureRmOperationalInsightsSearchResults](https://docs.microsoft.com/powershell/module/azurerm.operationalinsights/get-azurermoperationalinsightssearchresults?view=azurermps-4.0.0) tooretrieve data from Log Analytics.</span></span>  <span data-ttu-id="1ec89-130">Esse cmdlet requer um tooretrieve de dados consulta toodetermine hello.</span><span class="sxs-lookup"><span data-stu-id="1ec89-130">This cmdlet requires a query toodetermine hello data tooretrieve.</span></span>
- <span data-ttu-id="1ec89-131">**API do Log Analytics.**</span><span class="sxs-lookup"><span data-stu-id="1ec89-131">**Log Analytics API.**</span></span>  <span data-ttu-id="1ec89-132">Olá [API de pesquisa de log de análise de Log](log-analytics-log-search-api.md) permite que qualquer cliente API REST tooretrieve dados de espaço de trabalho de saudação.</span><span class="sxs-lookup"><span data-stu-id="1ec89-132">hello [Log Analytics log search API](log-analytics-log-search-api.md) allows any REST API client tooretrieve data from hello workspace.</span></span>  <span data-ttu-id="1ec89-133">solicitação de API de saudação inclui uma consulta que é executada em análise de Log toodetermine Olá dados tooretrieve.</span><span class="sxs-lookup"><span data-stu-id="1ec89-133">hello API request includes a query that is run against Log Analytics toodetermine hello data tooretrieve.</span></span>

![Pesquisas de log](media/log-analytics-log-search-new/log-search-overview.png)

## <a name="how-log-analytics-data-is-organized"></a><span data-ttu-id="1ec89-135">Como os dados do Log Analytics são organizados</span><span class="sxs-lookup"><span data-stu-id="1ec89-135">How Log Analytics data is organized</span></span>
<span data-ttu-id="1ec89-136">Quando você cria uma consulta, iniciar, determinando quais tabelas têm dados Olá que você está procurando.</span><span class="sxs-lookup"><span data-stu-id="1ec89-136">When you build a query, you start by determining which tables have hello data that you're looking for.</span></span> <span data-ttu-id="1ec89-137">Cada [fonte de dados](log-analytics-data-sources.md) e [solução](../operations-management-suite/operations-management-suite-solutions.md) armazena seus dados em tabelas dedicadas no espaço de trabalho de análise de Log de saudação.</span><span class="sxs-lookup"><span data-stu-id="1ec89-137">Each [data source](log-analytics-data-sources.md) and [solution](../operations-management-suite/operations-management-suite-solutions.md) stores its data in dedicated tables in hello Log Analytics workspace.</span></span>  <span data-ttu-id="1ec89-138">Documentação para cada fonte de dados e a solução inclui nome Olá Olá do tipo de dados que ele cria e uma descrição de cada uma de suas propriedades.</span><span class="sxs-lookup"><span data-stu-id="1ec89-138">Documentation for each data source and solution includes hello name of hello data type that it creates and a description of each of its properties.</span></span>     <span data-ttu-id="1ec89-139">Muitas consultas exigirá apenas dados de um único tabelas, mas podem usar uma variedade de opções tooinclude dados de várias tabelas.</span><span class="sxs-lookup"><span data-stu-id="1ec89-139">Many queries will only require data from a single tables, but others may use a variety of options tooinclude data from multiple tables.</span></span>

![Tabelas](media/log-analytics-log-search-new/queries-tables.png)


## <a name="writing-a-query"></a><span data-ttu-id="1ec89-141">Escrevendo uma consulta</span><span class="sxs-lookup"><span data-stu-id="1ec89-141">Writing a query</span></span>
<span data-ttu-id="1ec89-142">Núcleo de saudação do log de pesquisas em análise de Log é [uma linguagem de consulta ampla](https://docs.loganalytics.io/) que permite recuperar e analisar dados do repositório de saudação em uma variedade de maneiras.</span><span class="sxs-lookup"><span data-stu-id="1ec89-142">At hello core of log searches in Log Analytics is [an extensive query language](https://docs.loganalytics.io/) that lets you retrieve and analyze data from hello repository in a variety of ways.</span></span>  <span data-ttu-id="1ec89-143">Este mesmo idioma de consulta é usado para [Application Insights](../application-insights/app-insights-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="1ec89-143">This same query language is used for [Application Insights](../application-insights/app-insights-analytics.md).</span></span>  <span data-ttu-id="1ec89-144">Aprender como toowrite uma consulta é crítica toocreating pesquisas de log na análise de Log.</span><span class="sxs-lookup"><span data-stu-id="1ec89-144">Learning how toowrite a query is critical toocreating log searches in Log Analytics.</span></span>  <span data-ttu-id="1ec89-145">Normalmente, você começará com consultas básicas e, em seguida, progresso toouse mais funções avançadas conforme seus requisitos se tornam mais complexos.</span><span class="sxs-lookup"><span data-stu-id="1ec89-145">You'll typically start with basic queries and then progress toouse more advanced functions as your requirements become more complex.</span></span>

<span data-ttu-id="1ec89-146">estrutura básica de saudação de uma consulta é uma tabela de origem seguida por uma série de operadores separados por um caractere de pipe `|`.</span><span class="sxs-lookup"><span data-stu-id="1ec89-146">hello basic structure of a query is a source table followed by a series of operators separated by a pipe character `|`.</span></span>  <span data-ttu-id="1ec89-147">Você pode encadear vários dados de saudação toorefine de operadores e executar funções avançadas.</span><span class="sxs-lookup"><span data-stu-id="1ec89-147">You can chain together multiple operators toorefine hello data and perform advanced functions.</span></span>

<span data-ttu-id="1ec89-148">Por exemplo, suponha que você desejasse toofind Olá superior dez computadores com hello a maioria dos eventos de erro sobre Olá dia anterior.</span><span class="sxs-lookup"><span data-stu-id="1ec89-148">For example, suppose you wanted toofind hello top ten computers with hello most error events over hello past day.</span></span>

    Event
    | where (EventLevelName == "Error")
    | where (TimeGenerated > ago(1days))
    | summarize ErrorCount = count() by Computer
    | top 10 by ErrorCount desc

<span data-ttu-id="1ec89-149">Ou talvez você queira toofind computadores que ainda não tinham uma pulsação no último dia de saudação.</span><span class="sxs-lookup"><span data-stu-id="1ec89-149">Or maybe you want toofind computers that haven't had a heartbeat in hello last day.</span></span>

    Heartbeat
    | where TimeGenerated > ago(7d)
    | summarize max(TimeGenerated) by Computer
    | where max_TimeGenerated < ago(1d)  

<span data-ttu-id="1ec89-150">E quanto um gráfico de linhas com a utilização do processador Olá para cada computador na semana passada?</span><span class="sxs-lookup"><span data-stu-id="1ec89-150">How about a line chart with hello processor utilization for each computer from last week?</span></span>

    Perf
    | where ObjectName == "Processor" and CounterName == "% Processor Time"
    | where TimeGenerated  between (startofweek(ago(7d)) .. endofweek(ago(7d)) )
    | summarize avg(CounterValue) by Computer, bin(TimeGenerated, 5min)
    | render timechart    

<span data-ttu-id="1ec89-151">Você pode ver esses exemplos rápida que, independentemente do tipo de saudação de dados que você está trabalhando, Olá estrutura de consulta de saudação é semelhante.</span><span class="sxs-lookup"><span data-stu-id="1ec89-151">You can see from these quick samples that regardless of hello kind of data that you're working with, hello structure of hello query is similar.</span></span>  <span data-ttu-id="1ec89-152">Você pode dividi-la em etapas distintas, onde os dados resultantes de saudação de um comando são enviados através do seguinte comando do hello pipeline toohello.</span><span class="sxs-lookup"><span data-stu-id="1ec89-152">You can break it down into distinct steps where hello resulting data from one command is sent through hello pipeline toohello next command.</span></span>

<span data-ttu-id="1ec89-153">Para a documentação completa sobre linguagem de consulta de análise de logs do Azure Olá incluindo tutoriais e referência de linguagem, consulte Olá [documentação da linguagem de consulta de análise de logs do Azure](https://docs.loganalytics.io/).</span><span class="sxs-lookup"><span data-stu-id="1ec89-153">For complete documentation on hello Azure Log Analytics query language including tutorials and language reference, see hello [Azure Log Analytics query language documentation](https://docs.loganalytics.io/).</span></span>

## <a name="next-steps"></a><span data-ttu-id="1ec89-154">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="1ec89-154">Next steps</span></span>

- <span data-ttu-id="1ec89-155">Saiba mais sobre Olá [portais que você use toocreate e editar pesquisas de log](log-analytics-log-search-portals.md).</span><span class="sxs-lookup"><span data-stu-id="1ec89-155">Learn about hello [portals that you use toocreate and edit log searches](log-analytics-log-search-portals.md).</span></span>
- <span data-ttu-id="1ec89-156">Check-out de um [tutorial sobre como escrever consultas](https://go.microsoft.com/fwlink/?linkid=856078) usando Olá nova linguagem de consulta.</span><span class="sxs-lookup"><span data-stu-id="1ec89-156">Check out a [tutorial on writing queries](https://go.microsoft.com/fwlink/?linkid=856078) using hello new query language.</span></span>
