---
title: "aaaAzure solução de Cofre de chaves em análise de Log | Microsoft Docs"
description: "Você pode usar a solução do Azure Key Vault Olá em tooreview de análise de logs, que logs do Azure Key Vault."
services: log-analytics
documentationcenter: 
author: richrundmsft
manager: jochan
editor: 
ms.assetid: 5e25e6d6-dd20-4528-9820-6e2958a40dae
ms.service: log-analytics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 02/09/2017
ms.author: richrund
ms.openlocfilehash: 1c6eae26ded7ad55b0159a3be09cdc9901596298
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/06/2017
---
# <a name="azure-key-vault-analytics-solution-in-log-analytics"></a><span data-ttu-id="59e02-103">Solução do Azure Key Vault Analytics no Log Analytics</span><span class="sxs-lookup"><span data-stu-id="59e02-103">Azure Key Vault Analytics solution in Log Analytics</span></span>

![Símbolo do Cofre de Chaves](./media/log-analytics-azure-keyvault/key-vault-analytics-symbol.png)

<span data-ttu-id="59e02-105">Você pode usar a solução de Cofre de chaves do Azure de saudação em tooreview de análise de logs do Azure Key Vault AuditEvent logs.</span><span class="sxs-lookup"><span data-stu-id="59e02-105">You can use hello Azure Key Vault solution in Log Analytics tooreview Azure Key Vault AuditEvent logs.</span></span>

<span data-ttu-id="59e02-106">solução de saudação toouse, você precisa tooenable log diagnóstico do Azure Key Vault e o espaço de trabalho do hello direto diagnóstico tooa análise de Log.</span><span class="sxs-lookup"><span data-stu-id="59e02-106">toouse hello solution, you need tooenable logging of Azure Key Vault diagnostics and direct hello diagnostics tooa Log Analytics workspace.</span></span> <span data-ttu-id="59e02-107">Não é necessário toowrite Olá logs tooAzure o armazenamento de Blob.</span><span class="sxs-lookup"><span data-stu-id="59e02-107">It is not necessary toowrite hello logs tooAzure Blob storage.</span></span>

> [!NOTE]
> <span data-ttu-id="59e02-108">Em janeiro de 2017, Olá suporte para a forma de envio de logs do Cofre de chaves tooLog alterada de análise.</span><span class="sxs-lookup"><span data-stu-id="59e02-108">In January 2017, hello supported way of sending logs from Key Vault tooLog Analytics changed.</span></span> <span data-ttu-id="59e02-109">Mostra se solução do hello Cofre de chaves que você estiver usando *(preterido)* no título hello, consulte muito[migrando de solução de Cofre de chaves antiga Olá](#migrating-from-the-old-key-vault-solution) para obter as etapas que você precisa toofollow.</span><span class="sxs-lookup"><span data-stu-id="59e02-109">If hello Key Vault solution you are using shows *(deprecated)* in hello title, refer too[migrating from hello old Key Vault solution](#migrating-from-the-old-key-vault-solution) for steps you need toofollow.</span></span>
>
>

## <a name="install-and-configure-hello-solution"></a><span data-ttu-id="59e02-110">Instalar e configurar a solução de saudação</span><span class="sxs-lookup"><span data-stu-id="59e02-110">Install and configure hello solution</span></span>
<span data-ttu-id="59e02-111">Use Olá tooinstall instruções a seguir e configurar a solução do Azure Key Vault hello:</span><span class="sxs-lookup"><span data-stu-id="59e02-111">Use hello following instructions tooinstall and configure hello Azure Key Vault solution:</span></span>

1. <span data-ttu-id="59e02-112">Habilitar a solução do Azure Key Vault saudação do [do Azure marketplace](https://azuremarketplace.microsoft.com/marketplace/apps/Microsoft.KeyVaultAnalyticsOMS?tab=Overview) ou usando o processo de saudação descrito em [soluções de análise de Log adicionar da Galeria de soluções de saudação](log-analytics-add-solutions.md).</span><span class="sxs-lookup"><span data-stu-id="59e02-112">Enable hello Azure Key Vault solution from [Azure marketplace](https://azuremarketplace.microsoft.com/marketplace/apps/Microsoft.KeyVaultAnalyticsOMS?tab=Overview) or by using hello process described in [Add Log Analytics solutions from hello Solutions Gallery](log-analytics-add-solutions.md).</span></span>
2. <span data-ttu-id="59e02-113">Habilitar o diagnóstico de registro em log para Olá toomonitor de recursos de Cofre de chaves, usando qualquer Olá [portal](#enable-key-vault-diagnostics-in-the-portal) ou [PowerShell](#enable-key-vault-diagnostics-using-powershell)</span><span class="sxs-lookup"><span data-stu-id="59e02-113">Enable diagnostics logging for hello Key Vault resources toomonitor, using either hello [portal](#enable-key-vault-diagnostics-in-the-portal) or [PowerShell](#enable-key-vault-diagnostics-using-powershell)</span></span>

### <a name="enable-key-vault-diagnostics-in-hello-portal"></a><span data-ttu-id="59e02-114">Habilitar o diagnóstico de Cofre de chaves no portal de saudação</span><span class="sxs-lookup"><span data-stu-id="59e02-114">Enable Key Vault diagnostics in hello portal</span></span>

1. <span data-ttu-id="59e02-115">No portal do Azure de Olá, navegar toohello toomonitor de recurso de Cofre de chaves</span><span class="sxs-lookup"><span data-stu-id="59e02-115">In hello Azure portal, navigate toohello Key Vault resource toomonitor</span></span>
2. <span data-ttu-id="59e02-116">Selecione *logs de diagnóstico* tooopen Olá página a seguir</span><span class="sxs-lookup"><span data-stu-id="59e02-116">Select *Diagnostics logs* tooopen hello following page</span></span>

   ![imagem do bloco Cofre de Chaves do Azure](./media/log-analytics-azure-keyvault/log-analytics-keyvault-enable-diagnostics01.png)
3. <span data-ttu-id="59e02-118">Clique em *Ativar diagnóstico* tooopen Olá página a seguir</span><span class="sxs-lookup"><span data-stu-id="59e02-118">Click *Turn on diagnostics* tooopen hello following page</span></span>

   ![imagem do bloco Cofre de Chaves do Azure](./media/log-analytics-azure-keyvault/log-analytics-keyvault-enable-diagnostics02.png)
4. <span data-ttu-id="59e02-120">tooturn em diagnóstico, clique em *na* em *Status*</span><span class="sxs-lookup"><span data-stu-id="59e02-120">tooturn on diagnostics, click *On* under *Status*</span></span>
5. <span data-ttu-id="59e02-121">Clique em Olá caixa de seleção *enviar tooLog análise*</span><span class="sxs-lookup"><span data-stu-id="59e02-121">Click hello checkbox for *Send tooLog Analytics*</span></span>
6. <span data-ttu-id="59e02-122">Selecione um espaço de trabalho existente do Log Analytics ou crie um espaço de trabalho</span><span class="sxs-lookup"><span data-stu-id="59e02-122">Select an existing Log Analytics workspace, or create a workspace</span></span>
7. <span data-ttu-id="59e02-123">tooenable *AuditEvent* logs, clique em caixa de seleção de saudação em Log</span><span class="sxs-lookup"><span data-stu-id="59e02-123">tooenable *AuditEvent* logs, click hello checkbox under Log</span></span>
8. <span data-ttu-id="59e02-124">Clique em *salvar* tooenable log de saudação do diagnóstico tooLog análise</span><span class="sxs-lookup"><span data-stu-id="59e02-124">Click *Save* tooenable hello logging of diagnostics tooLog Analytics</span></span>

### <a name="enable-key-vault-diagnostics-using-powershell"></a><span data-ttu-id="59e02-125">Habilitar o diagnóstico do Key Vault usando o PowerShell</span><span class="sxs-lookup"><span data-stu-id="59e02-125">Enable Key Vault diagnostics using PowerShell</span></span>
<span data-ttu-id="59e02-126">saudação de script do PowerShell a seguir fornece um exemplo de como toouse `Set-AzureRmDiagnosticSetting` tooenable log de diagnóstico para o Cofre de chaves:</span><span class="sxs-lookup"><span data-stu-id="59e02-126">hello following PowerShell script provides an example of how toouse `Set-AzureRmDiagnosticSetting` tooenable diagnostic logging for Key Vault:</span></span>
```
$workspaceId = "/subscriptions/d2e37fee-1234-40b2-5678-0b2199de3b50/resourcegroups/oi-default-east-us/providers/microsoft.operationalinsights/workspaces/rollingbaskets"

$kv = Get-AzureRmKeyVault -VaultName 'ContosoKeyVault'

Set-AzureRmDiagnosticSetting -ResourceId $kv.ResourceId  -WorkspaceId $workspaceId -Enabled $true
```



## <a name="review-azure-key-vault-data-collection-details"></a><span data-ttu-id="59e02-127">Veja os detalhes da coleta de dados do Cofre de Chaves do Azure</span><span class="sxs-lookup"><span data-stu-id="59e02-127">Review Azure Key Vault data collection details</span></span>
<span data-ttu-id="59e02-128">Solução de Cofre de chaves do Azure coleta logs de diagnóstico diretamente da saudação Cofre de chaves.</span><span class="sxs-lookup"><span data-stu-id="59e02-128">Azure Key Vault solution collects diagnostics logs directly from hello Key Vault.</span></span>
<span data-ttu-id="59e02-129">Não é necessário toowrite Olá logs tooAzure armazenamento de Blob e nenhum agente é necessária para a coleta de dados.</span><span class="sxs-lookup"><span data-stu-id="59e02-129">It is not necessary toowrite hello logs tooAzure Blob storage and no agent is required for data collection.</span></span>

<span data-ttu-id="59e02-130">Olá tabela a seguir mostra os métodos de coleta de dados e outros detalhes sobre como os dados são coletados para o Cofre de chaves do Azure.</span><span class="sxs-lookup"><span data-stu-id="59e02-130">hello following table shows data collection methods and other details about how data is collected for Azure Key Vault.</span></span>

| <span data-ttu-id="59e02-131">Plataforma</span><span class="sxs-lookup"><span data-stu-id="59e02-131">Platform</span></span> | <span data-ttu-id="59e02-132">Agente direto</span><span class="sxs-lookup"><span data-stu-id="59e02-132">Direct agent</span></span> | <span data-ttu-id="59e02-133">Agente do Systems Center Operations Manager</span><span class="sxs-lookup"><span data-stu-id="59e02-133">Systems Center Operations Manager agent</span></span> | <span data-ttu-id="59e02-134">As tabelas</span><span class="sxs-lookup"><span data-stu-id="59e02-134">Azure</span></span> | <span data-ttu-id="59e02-135">Operations Manager necessário?</span><span class="sxs-lookup"><span data-stu-id="59e02-135">Operations Manager required?</span></span> | <span data-ttu-id="59e02-136">Dados de agente do Operations Manager enviados por meio do grupo de gerenciamento</span><span class="sxs-lookup"><span data-stu-id="59e02-136">Operations Manager agent data sent via management group</span></span> | <span data-ttu-id="59e02-137">Frequência de coleta</span><span class="sxs-lookup"><span data-stu-id="59e02-137">Collection frequency</span></span> |
| --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="59e02-138">As tabelas</span><span class="sxs-lookup"><span data-stu-id="59e02-138">Azure</span></span> |  |  |<span data-ttu-id="59e02-139">&#8226;</span><span class="sxs-lookup"><span data-stu-id="59e02-139">&#8226;</span></span> |  |  | <span data-ttu-id="59e02-140">na chegada</span><span class="sxs-lookup"><span data-stu-id="59e02-140">on arrival</span></span> |

## <a name="use-azure-key-vault"></a><span data-ttu-id="59e02-141">Usar o Cofre de Chaves do Azure</span><span class="sxs-lookup"><span data-stu-id="59e02-141">Use Azure Key Vault</span></span>
<span data-ttu-id="59e02-142">Depois que você [instalar Olá solução](https://azuremarketplace.microsoft.com/marketplace/apps/Microsoft.KeyVaultAnalyticsOMS?tab=Overview), exibir dados de Cofre de chaves de saudação clicando Olá **Azure Key Vault** lado a lado de saudação **visão geral** página da análise de Log.</span><span class="sxs-lookup"><span data-stu-id="59e02-142">After you [install hello solution](https://azuremarketplace.microsoft.com/marketplace/apps/Microsoft.KeyVaultAnalyticsOMS?tab=Overview), view hello Key Vault data by clicking hello **Azure Key Vault** tile from hello **Overview** page of Log Analytics.</span></span>

![imagem do bloco Cofre de Chaves do Azure](./media/log-analytics-azure-keyvault/log-analytics-keyvault-tile.png)

<span data-ttu-id="59e02-144">Depois de clicar em Olá **visão geral** lado a lado, você pode exibir resumos dos seus logs e, em seguida, detalhada em toodetails para Olá categorias a seguir:</span><span class="sxs-lookup"><span data-stu-id="59e02-144">After you click hello **Overview** tile, you can view summaries of your logs and then drill in toodetails for hello following categories:</span></span>

* <span data-ttu-id="59e02-145">Volume de todas as operações do Cofre de Chaves ao longo do tempo</span><span class="sxs-lookup"><span data-stu-id="59e02-145">Volume of all key vault operations over time</span></span>
* <span data-ttu-id="59e02-146">Volumes de operação com falha ao longo do tempo</span><span class="sxs-lookup"><span data-stu-id="59e02-146">Failed operation volumes over time</span></span>
* <span data-ttu-id="59e02-147">Latência operacional média por operação</span><span class="sxs-lookup"><span data-stu-id="59e02-147">Average operational latency by operation</span></span>
* <span data-ttu-id="59e02-148">Qualidade de serviço para operações com o número de saudação de operações que levam mais de 1000 ms e uma lista de operações que levam mais de 1000 ms</span><span class="sxs-lookup"><span data-stu-id="59e02-148">Quality of service for operations with hello number of operations that take more than 1000 ms and a list of operations that take more than 1000 ms</span></span>

![imagem do painel Cofre de Chaves do Azure](./media/log-analytics-azure-keyvault/log-analytics-keyvault01.png)

![imagem do painel Cofre de Chaves do Azure](./media/log-analytics-azure-keyvault/log-analytics-keyvault02.png)

### <a name="tooview-details-for-any-operation"></a><span data-ttu-id="59e02-151">detalhes de tooview para qualquer operação</span><span class="sxs-lookup"><span data-stu-id="59e02-151">tooview details for any operation</span></span>
1. <span data-ttu-id="59e02-152">Em Olá **visão geral** , clique em Olá **Azure Key Vault** lado a lado.</span><span class="sxs-lookup"><span data-stu-id="59e02-152">On hello **Overview** page, click hello **Azure Key Vault** tile.</span></span>
2. <span data-ttu-id="59e02-153">Em Olá **Azure Key Vault** painel, examine as informações de resumo de saudação em uma das folhas de saudação e, em seguida, clique em uma tooview informações detalhadas sobre ele na página de pesquisa de log de saudação.</span><span class="sxs-lookup"><span data-stu-id="59e02-153">On hello **Azure Key Vault** dashboard, review hello summary information in one of hello blades, and then click one tooview detailed information about it in hello log search page.</span></span>

    <span data-ttu-id="59e02-154">Em qualquer uma das páginas de pesquisa de log hello, você pode exibir os resultados por tempo, resultados detalhados e o histórico de pesquisa de log.</span><span class="sxs-lookup"><span data-stu-id="59e02-154">On any of hello log search pages, you can view results by time, detailed results, and your log search history.</span></span> <span data-ttu-id="59e02-155">Você também pode filtrar pelos resultados de saudação toonarrow facetas.</span><span class="sxs-lookup"><span data-stu-id="59e02-155">You can also filter by facets toonarrow hello results.</span></span>

## <a name="log-analytics-records"></a><span data-ttu-id="59e02-156">Registros do Log Analytics</span><span class="sxs-lookup"><span data-stu-id="59e02-156">Log Analytics records</span></span>
<span data-ttu-id="59e02-157">Olá solução Cofre de chaves do Azure analisa os registros que têm um tipo de **KeyVaults** que são coletados de [AuditEvent logs](../key-vault/key-vault-logging.md) no diagnóstico do Azure.</span><span class="sxs-lookup"><span data-stu-id="59e02-157">hello Azure Key Vault solution analyzes records that have a type of **KeyVaults** that are collected from [AuditEvent logs](../key-vault/key-vault-logging.md) in Azure Diagnostics.</span></span>  <span data-ttu-id="59e02-158">Propriedades para esses registros são em Olá a tabela a seguir:</span><span class="sxs-lookup"><span data-stu-id="59e02-158">Properties for these records are in hello following table:</span></span>  

| <span data-ttu-id="59e02-159">Propriedade</span><span class="sxs-lookup"><span data-stu-id="59e02-159">Property</span></span> | <span data-ttu-id="59e02-160">Descrição</span><span class="sxs-lookup"><span data-stu-id="59e02-160">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="59e02-161">Tipo</span><span class="sxs-lookup"><span data-stu-id="59e02-161">Type</span></span> |<span data-ttu-id="59e02-162">*AzureDiagnostics*</span><span class="sxs-lookup"><span data-stu-id="59e02-162">*AzureDiagnostics*</span></span> |
| <span data-ttu-id="59e02-163">SourceSystem</span><span class="sxs-lookup"><span data-stu-id="59e02-163">SourceSystem</span></span> |<span data-ttu-id="59e02-164">*As tabelas*</span><span class="sxs-lookup"><span data-stu-id="59e02-164">*Azure*</span></span> |
| <span data-ttu-id="59e02-165">CallerIpAddress</span><span class="sxs-lookup"><span data-stu-id="59e02-165">CallerIpAddress</span></span> |<span data-ttu-id="59e02-166">Endereço IP do cliente de saudação que fez a solicitação de saudação</span><span class="sxs-lookup"><span data-stu-id="59e02-166">IP address of hello client who made hello request</span></span> |
| <span data-ttu-id="59e02-167">Categoria</span><span class="sxs-lookup"><span data-stu-id="59e02-167">Category</span></span> | <span data-ttu-id="59e02-168">*AuditEvent*</span><span class="sxs-lookup"><span data-stu-id="59e02-168">*AuditEvent*</span></span> |
| <span data-ttu-id="59e02-169">CorrelationId</span><span class="sxs-lookup"><span data-stu-id="59e02-169">CorrelationId</span></span> |<span data-ttu-id="59e02-170">Um GUID opcional que Olá cliente pode passar toocorrelate logs do lado do cliente com os logs do lado do serviço (Cofre de chaves).</span><span class="sxs-lookup"><span data-stu-id="59e02-170">An optional GUID that hello client can pass toocorrelate client-side logs with service-side (Key Vault) logs.</span></span> |
| <span data-ttu-id="59e02-171">DurationMs</span><span class="sxs-lookup"><span data-stu-id="59e02-171">DurationMs</span></span> |<span data-ttu-id="59e02-172">Tempo de solicitação de API REST do tooservice hello, em milissegundos.</span><span class="sxs-lookup"><span data-stu-id="59e02-172">Time it took tooservice hello REST API request, in milliseconds.</span></span> <span data-ttu-id="59e02-173">Neste momento não inclui a latência de rede, para que o tempo de saudação que medem no lado do cliente Olá pode não corresponder neste momento.</span><span class="sxs-lookup"><span data-stu-id="59e02-173">This time does not include network latency, so hello time that you measure on hello client side might not match this time.</span></span> |
| <span data-ttu-id="59e02-174">httpStatusCode_d</span><span class="sxs-lookup"><span data-stu-id="59e02-174">httpStatusCode_d</span></span> |<span data-ttu-id="59e02-175">Código de status HTTP retornado pela solicitação de saudação (por exemplo, *200*)</span><span class="sxs-lookup"><span data-stu-id="59e02-175">HTTP status code returned by hello request (for example, *200*)</span></span> |
| <span data-ttu-id="59e02-176">id_s</span><span class="sxs-lookup"><span data-stu-id="59e02-176">id_s</span></span> |<span data-ttu-id="59e02-177">ID exclusiva da solicitação de saudação</span><span class="sxs-lookup"><span data-stu-id="59e02-177">Unique ID of hello request</span></span> |
| <span data-ttu-id="59e02-178">identity_claim_appid_g</span><span class="sxs-lookup"><span data-stu-id="59e02-178">identity_claim_appid_g</span></span> | <span data-ttu-id="59e02-179">GUID para a id de aplicativo hello</span><span class="sxs-lookup"><span data-stu-id="59e02-179">GUID for hello application id</span></span> |
| <span data-ttu-id="59e02-180">OperationName</span><span class="sxs-lookup"><span data-stu-id="59e02-180">OperationName</span></span> |<span data-ttu-id="59e02-181">Nome da operação hello, conforme documentado no [log de Cofre de chave do Azure](../key-vault/key-vault-logging.md)</span><span class="sxs-lookup"><span data-stu-id="59e02-181">Name of hello operation, as documented in [Azure Key Vault Logging](../key-vault/key-vault-logging.md)</span></span> |
| <span data-ttu-id="59e02-182">OperationVersion</span><span class="sxs-lookup"><span data-stu-id="59e02-182">OperationVersion</span></span> |<span data-ttu-id="59e02-183">Versão da API REST solicitada pelo cliente hello (por exemplo *2015-06-01*)</span><span class="sxs-lookup"><span data-stu-id="59e02-183">REST API version requested by hello client (for example *2015-06-01*)</span></span> |
| <span data-ttu-id="59e02-184">requestUri_s</span><span class="sxs-lookup"><span data-stu-id="59e02-184">requestUri_s</span></span> |<span data-ttu-id="59e02-185">URI de solicitação de saudação</span><span class="sxs-lookup"><span data-stu-id="59e02-185">Uri of hello request</span></span> |
| <span data-ttu-id="59e02-186">Recurso</span><span class="sxs-lookup"><span data-stu-id="59e02-186">Resource</span></span> |<span data-ttu-id="59e02-187">Nome do Cofre de chaves Olá</span><span class="sxs-lookup"><span data-stu-id="59e02-187">Name of hello key vault</span></span> |
| <span data-ttu-id="59e02-188">ResourceGroup</span><span class="sxs-lookup"><span data-stu-id="59e02-188">ResourceGroup</span></span> |<span data-ttu-id="59e02-189">Grupo de recursos do Cofre de chaves Olá</span><span class="sxs-lookup"><span data-stu-id="59e02-189">Resource group of hello key vault</span></span> |
| <span data-ttu-id="59e02-190">ResourceId</span><span class="sxs-lookup"><span data-stu-id="59e02-190">ResourceId</span></span> |<span data-ttu-id="59e02-191">ID do Recurso do Gerenciador de Recursos do Azure.</span><span class="sxs-lookup"><span data-stu-id="59e02-191">Azure Resource Manager Resource ID.</span></span> <span data-ttu-id="59e02-192">Para logs de Cofre de chaves, esse é o ID de recurso de Cofre de chaves do hello.</span><span class="sxs-lookup"><span data-stu-id="59e02-192">For Key Vault logs, this is hello Key Vault resource ID.</span></span> |
| <span data-ttu-id="59e02-193">ResourceProvider</span><span class="sxs-lookup"><span data-stu-id="59e02-193">ResourceProvider</span></span> |<span data-ttu-id="59e02-194">*MICROSOFT.KEYVAULT*</span><span class="sxs-lookup"><span data-stu-id="59e02-194">*MICROSOFT.KEYVAULT*</span></span> |
| <span data-ttu-id="59e02-195">ResourceType</span><span class="sxs-lookup"><span data-stu-id="59e02-195">ResourceType</span></span> | <span data-ttu-id="59e02-196">*VAULTS*</span><span class="sxs-lookup"><span data-stu-id="59e02-196">*VAULTS*</span></span> |
| <span data-ttu-id="59e02-197">ResultSignature</span><span class="sxs-lookup"><span data-stu-id="59e02-197">ResultSignature</span></span> |<span data-ttu-id="59e02-198">Status do HTTP (por exemplo, *OK*)</span><span class="sxs-lookup"><span data-stu-id="59e02-198">HTTP status (for example, *OK*)</span></span> |
| <span data-ttu-id="59e02-199">ResultType</span><span class="sxs-lookup"><span data-stu-id="59e02-199">ResultType</span></span> |<span data-ttu-id="59e02-200">Resultado da solicitação da API REST (por exemplo, *Êxito*)</span><span class="sxs-lookup"><span data-stu-id="59e02-200">Result of REST API request (for example, *Success*)</span></span> |
| <span data-ttu-id="59e02-201">SubscriptionId</span><span class="sxs-lookup"><span data-stu-id="59e02-201">SubscriptionId</span></span> |<span data-ttu-id="59e02-202">ID de assinatura do Azure da assinatura de saudação contendo Olá Cofre de chaves</span><span class="sxs-lookup"><span data-stu-id="59e02-202">Azure subscription ID of hello subscription containing hello Key Vault</span></span> |

## <a name="migrating-from-hello-old-key-vault-solution"></a><span data-ttu-id="59e02-203">Migrando de solução de Cofre de chaves antiga Olá</span><span class="sxs-lookup"><span data-stu-id="59e02-203">Migrating from hello old Key Vault solution</span></span>
<span data-ttu-id="59e02-204">Em janeiro de 2017, Olá suporte para a forma de envio de logs do Cofre de chaves tooLog alterada de análise.</span><span class="sxs-lookup"><span data-stu-id="59e02-204">In January 2017, hello supported way of sending logs from Key Vault tooLog Analytics changed.</span></span> <span data-ttu-id="59e02-205">Essas alterações fornecem Olá vantagens a seguir:</span><span class="sxs-lookup"><span data-stu-id="59e02-205">These changes provide hello following advantages:</span></span>
+ <span data-ttu-id="59e02-206">Os logs são gravados diretamente tooLog análise sem Olá necessário toouse uma conta de armazenamento</span><span class="sxs-lookup"><span data-stu-id="59e02-206">Logs are written directly tooLog Analytics without hello need toouse a storage account</span></span>
+ <span data-ttu-id="59e02-207">Menor latência de tempo de saudação quando os logs são gerados toothem disponíveis na análise de Log</span><span class="sxs-lookup"><span data-stu-id="59e02-207">Less latency from hello time when logs are generated toothem being available in Log Analytics</span></span>
+ <span data-ttu-id="59e02-208">Menos etapas de configuração</span><span class="sxs-lookup"><span data-stu-id="59e02-208">Fewer configuration steps</span></span>
+ <span data-ttu-id="59e02-209">Um formato comum para todos os tipos de diagnóstico do Azure</span><span class="sxs-lookup"><span data-stu-id="59e02-209">A common format for all types of Azure diagnostics</span></span>

<span data-ttu-id="59e02-210">Olá toouse atualizado Solução:</span><span class="sxs-lookup"><span data-stu-id="59e02-210">toouse hello updated solution:</span></span>

1. [<span data-ttu-id="59e02-211">Configurar o diagnóstico toobe enviado diretamente tooLog análise do Cofre de chaves</span><span class="sxs-lookup"><span data-stu-id="59e02-211">Configure diagnostics toobe sent directly tooLog Analytics from Key Vault</span></span>](#enable-key-vault-diagnostics-in-the-portal)  
2. <span data-ttu-id="59e02-212">Habilitar a solução de Cofre de chaves do Azure hello usando Olá processo descrito em [soluções de análise de Log adicionar da saudação Galeria de soluções](log-analytics-add-solutions.md)</span><span class="sxs-lookup"><span data-stu-id="59e02-212">Enable hello Azure Key Vault solution by using hello process described in [Add Log Analytics solutions from hello Solutions Gallery](log-analytics-add-solutions.md)</span></span>
3. <span data-ttu-id="59e02-213">Atualizar todos os painéis, as consultas salvas ou alertas toouse Olá novo tipo de dados</span><span class="sxs-lookup"><span data-stu-id="59e02-213">Update any saved queries, dashboards, or alerts toouse hello new data type</span></span>
  + <span data-ttu-id="59e02-214">O tipo é a alteração do: KeyVaults tooAzureDiagnostics.</span><span class="sxs-lookup"><span data-stu-id="59e02-214">Type is change from: KeyVaults tooAzureDiagnostics.</span></span> <span data-ttu-id="59e02-215">Você pode usar o hello ResourceType toofilter tooKey Logs do cofre.</span><span class="sxs-lookup"><span data-stu-id="59e02-215">You can use hello ResourceType toofilter tooKey Vault Logs.</span></span>
  - <span data-ttu-id="59e02-216">Em vez de: `Type=KeyVaults`, use`Type=AzureDiagnostics ResourceType=VAULTS`</span><span class="sxs-lookup"><span data-stu-id="59e02-216">Instead of: `Type=KeyVaults`, use `Type=AzureDiagnostics ResourceType=VAULTS`</span></span>
  + <span data-ttu-id="59e02-217">Campos: (os nomes de campo diferenciam maiúsculas de minúsculas)</span><span class="sxs-lookup"><span data-stu-id="59e02-217">Fields: (Field names are case-sensitive)</span></span>
  - <span data-ttu-id="59e02-218">Para qualquer campo que tenha um sufixo de \_s, \_d, ou \_g em nome do hello, alteração Olá primeiro caractere toolower caso</span><span class="sxs-lookup"><span data-stu-id="59e02-218">For any field that has a suffix of \_s, \_d, or \_g in hello name, change hello first character toolower case</span></span>
  - <span data-ttu-id="59e02-219">Para qualquer campo que tenha um sufixo de \_o nome, dados de saudação é dividido em campos individuais com base nos nomes de campo Olá aninhado.</span><span class="sxs-lookup"><span data-stu-id="59e02-219">For any field that has a suffix of \_o in name, hello data is split into individual fields based on hello nested field names.</span></span> <span data-ttu-id="59e02-220">Por exemplo, Olá UPN do chamador Olá é armazenado em um campo`identity_claim_http_schemas_xmlsoap_org_ws_2005_05_identity_claims_upn_s`</span><span class="sxs-lookup"><span data-stu-id="59e02-220">For example, hello UPN of hello caller is stored in a field `identity_claim_http_schemas_xmlsoap_org_ws_2005_05_identity_claims_upn_s`</span></span>
   - <span data-ttu-id="59e02-221">TooCallerIPAddress CallerIpAddress de campo alterado</span><span class="sxs-lookup"><span data-stu-id="59e02-221">Field CallerIpAddress changed tooCallerIPAddress</span></span>
   - <span data-ttu-id="59e02-222">O campo RemoteIPCountry não está mais presente</span><span class="sxs-lookup"><span data-stu-id="59e02-222">Field RemoteIPCountry is no longer present</span></span>
4. <span data-ttu-id="59e02-223">Remover Olá *análise de Cofre de chave (preterido)* solução.</span><span class="sxs-lookup"><span data-stu-id="59e02-223">Remove hello *Key Vault Analytics (Deprecated)* solution.</span></span> <span data-ttu-id="59e02-224">Se você estiver usando o PowerShell, use `Set-AzureOperationalInsightsIntelligencePack -ResourceGroupName <resource group that hello workspace is in> -WorkspaceName <name of hello log analytics workspace> -IntelligencePackName "KeyVault" -Enabled $false`</span><span class="sxs-lookup"><span data-stu-id="59e02-224">If you are using PowerShell, use `Set-AzureOperationalInsightsIntelligencePack -ResourceGroupName <resource group that hello workspace is in> -WorkspaceName <name of hello log analytics workspace> -IntelligencePackName "KeyVault" -Enabled $false`</span></span>

<span data-ttu-id="59e02-225">Os dados coletados antes de alterar Olá não estiver visível na nova solução de saudação.</span><span class="sxs-lookup"><span data-stu-id="59e02-225">Data collected before hello change is not visible in hello new solution.</span></span> <span data-ttu-id="59e02-226">Você pode continuar tooquery para esse dados usando Olá tipo antigo e nomes de campo.</span><span class="sxs-lookup"><span data-stu-id="59e02-226">You can continue tooquery for this data using hello old Type and field names.</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="59e02-227">Solucionar problemas</span><span class="sxs-lookup"><span data-stu-id="59e02-227">Troubleshooting</span></span>
[!INCLUDE [log-analytics-troubleshoot-azure-diagnostics](../../includes/log-analytics-troubleshoot-azure-diagnostics.md)]

## <a name="next-steps"></a><span data-ttu-id="59e02-228">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="59e02-228">Next steps</span></span>
* <span data-ttu-id="59e02-229">Use [pesquisas de Log na análise de Log](log-analytics-log-searches.md) tooview informações detalhadas e o Cofre de chaves do Azure.</span><span class="sxs-lookup"><span data-stu-id="59e02-229">Use [Log searches in Log Analytics](log-analytics-log-searches.md) tooview detailed Azure Key Vault data.</span></span>
