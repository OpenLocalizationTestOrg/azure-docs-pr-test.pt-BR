# <a name="common-errors-during-classic-tooazure-resource-manager-migration"></a><span data-ttu-id="7fac9-101">Erros comuns durante clássico tooAzure migração do Gerenciador de recursos</span><span class="sxs-lookup"><span data-stu-id="7fac9-101">Common errors during Classic tooAzure Resource Manager migration</span></span>
<span data-ttu-id="7fac9-102">Catálogos neste artigo Olá erros mais comuns e atenuantes durante a migração de saudação de recursos de IaaS de pilha de Gerenciador de recursos do Azure de toohello de modelo de implantação clássico do Azure.</span><span class="sxs-lookup"><span data-stu-id="7fac9-102">This article catalogs hello most common errors and mitigations during hello migration of IaaS resources from Azure classic deployment model toohello Azure Resource Manager stack.</span></span>

## <a name="list-of-errors"></a><span data-ttu-id="7fac9-103">Lista de erros</span><span class="sxs-lookup"><span data-stu-id="7fac9-103">List of errors</span></span>
| <span data-ttu-id="7fac9-104">Cadeia de caracteres de erro</span><span class="sxs-lookup"><span data-stu-id="7fac9-104">Error string</span></span> | <span data-ttu-id="7fac9-105">Redução</span><span class="sxs-lookup"><span data-stu-id="7fac9-105">Mitigation</span></span> |
| --- | --- |
| <span data-ttu-id="7fac9-106">Erro interno do servidor</span><span class="sxs-lookup"><span data-stu-id="7fac9-106">Internal server error</span></span> |<span data-ttu-id="7fac9-107">Em alguns casos, isso é um erro transitório desaparece com uma nova tentativa.</span><span class="sxs-lookup"><span data-stu-id="7fac9-107">In some cases, this is a transient error that goes away with a retry.</span></span> <span data-ttu-id="7fac9-108">Se ele persistir toopersist, [entre em contato com o suporte do Azure](../articles/azure-supportability/how-to-create-azure-support-request.md) necessária investigação dos logs de plataforma.</span><span class="sxs-lookup"><span data-stu-id="7fac9-108">If it continues toopersist, [contact Azure support](../articles/azure-supportability/how-to-create-azure-support-request.md) as it needs investigation of platform logs.</span></span> <br><br> <span data-ttu-id="7fac9-109">**Observação:** depois que o incidente Olá é controlado pela equipe de suporte de hello, não tente qualquer redução automática como isso pode ter consequências não intencionais no seu ambiente.</span><span class="sxs-lookup"><span data-stu-id="7fac9-109">**NOTE:** Once hello incident is tracked by hello support team, please do not attempt any self-mitigation as this might have unintended consequences on your environment.</span></span> |
| <span data-ttu-id="7fac9-110">Não há suporte para migração para implantação {nome_da_implantação} em {nome_do_serviço_hospedado} HostedService porque é uma implantação de PaaS (Web/Trabalho).</span><span class="sxs-lookup"><span data-stu-id="7fac9-110">Migration is not supported for Deployment {deployment-name}  in HostedService {hosted-service-name} because it is a PaaS deployment (Web/Worker).</span></span> |<span data-ttu-id="7fac9-111">Isso ocorre quando uma implantação contém uma função de trabalho/Web.</span><span class="sxs-lookup"><span data-stu-id="7fac9-111">This happens when a deployment contains a web/worker role.</span></span> <span data-ttu-id="7fac9-112">Como só há suporte para máquinas virtuais para a migração, remova Olá web/função de trabalho de implantação de saudação e tente novamente a migração.</span><span class="sxs-lookup"><span data-stu-id="7fac9-112">Since migration is only supported for Virtual Machines, please remove hello web/worker role from hello deployment and try migration again.</span></span> |
| <span data-ttu-id="7fac9-113">Falha na implantação do modelo {nome_do_ modelo}.</span><span class="sxs-lookup"><span data-stu-id="7fac9-113">Template {template-name} deployment failed.</span></span> <span data-ttu-id="7fac9-114">CorrelationId={guid}</span><span class="sxs-lookup"><span data-stu-id="7fac9-114">CorrelationId={guid}</span></span> |<span data-ttu-id="7fac9-115">Olá back-end do serviço de migração, usamos recursos do Azure Resource Manager modelos toocreate na pilha do hello Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="7fac9-115">In hello backend of migration service, we use Azure Resource Manager templates toocreate resources in hello Azure Resource Manager stack.</span></span> <span data-ttu-id="7fac9-116">Como os modelos são idempotentes, geralmente você poderá repetir com segurança Olá tooget de operação de migração após esse erro.</span><span class="sxs-lookup"><span data-stu-id="7fac9-116">Since templates are idempotent, usually you can safely retry hello migration operation tooget past this error.</span></span> <span data-ttu-id="7fac9-117">Se o erro continuar toopersist, [entre em contato com o suporte do Azure](../articles/azure-supportability/how-to-create-azure-support-request.md) e conceder a eles Olá CorrelationId.</span><span class="sxs-lookup"><span data-stu-id="7fac9-117">If this error continues toopersist, please [contact Azure support](../articles/azure-supportability/how-to-create-azure-support-request.md) and give them hello CorrelationId.</span></span> <br><br> <span data-ttu-id="7fac9-118">**Observação:** depois que o incidente Olá é controlado pela equipe de suporte de hello, não tente qualquer redução automática como isso pode ter consequências não intencionais no seu ambiente.</span><span class="sxs-lookup"><span data-stu-id="7fac9-118">**NOTE:** Once hello incident is tracked by hello support team, please do not attempt any self-mitigation as this might have unintended consequences on your environment.</span></span> |
| <span data-ttu-id="7fac9-119">rede virtual de Olá {virtual-network-name} ' não existe.</span><span class="sxs-lookup"><span data-stu-id="7fac9-119">hello virtual network {virtual-network-name} does not exist.</span></span> |<span data-ttu-id="7fac9-120">Isso pode acontecer se você criou Olá rede Virtual no novo portal do Azure de saudação.</span><span class="sxs-lookup"><span data-stu-id="7fac9-120">This can happen if you created hello Virtual Network in hello new Azure portal.</span></span> <span data-ttu-id="7fac9-121">nome de rede Virtual real Olá segue o padrão de hello "grupo * <VNET name>"</span><span class="sxs-lookup"><span data-stu-id="7fac9-121">hello actual Virtual Network name follows hello pattern "Group * <VNET name>"</span></span> |
| <span data-ttu-id="7fac9-122">A VM {nome_da_VM} no HostedService {nome_do_serviço_hospedado} contém a Extensão {nome_da_extensão} para a qual não há suporte no Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="7fac9-122">VM {vm-name} in HostedService {hosted-service-name} contains Extension {extension-name} which is not supported in Azure Resource Manager.</span></span> <span data-ttu-id="7fac9-123">É recomendável toouninstall do hello VM antes de continuar com a migração.</span><span class="sxs-lookup"><span data-stu-id="7fac9-123">It is recommended toouninstall it from hello VM before continuing with migration.</span></span> |<span data-ttu-id="7fac9-124">Extensões XML como a BGInfo 1. * não têm suporte no Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="7fac9-124">XML extensions such as BGInfo 1.* are not supported in Azure Resource Manager.</span></span> <span data-ttu-id="7fac9-125">Portanto, essas extensões não podem ser migradas.</span><span class="sxs-lookup"><span data-stu-id="7fac9-125">Therefore, these extensions cannot be migrated.</span></span> <span data-ttu-id="7fac9-126">Se essas extensões são esquerdo Olá instalado na VM, eles são automaticamente desinstalados antes de concluir a migração de saudação.</span><span class="sxs-lookup"><span data-stu-id="7fac9-126">If these extensions are left installed on hello virtual machine, they are automatically uninstalled before completing hello migration.</span></span> |
| <span data-ttu-id="7fac9-127">A VM {nome_da_VM} no serviço hospedado {nome_do_serviço_hospedado} contém a Extensão VMSnapshot/VMSnapshotLinux, que atualmente não tem suporte para Migração.</span><span class="sxs-lookup"><span data-stu-id="7fac9-127">VM {vm-name} in HostedService {hosted-service-name} contains Extension VMSnapshot/VMSnapshotLinux, which is currently not supported for Migration.</span></span> <span data-ttu-id="7fac9-128">Desinstale-a da saudação VM e adicioná-lo novamente usando o Gerenciador de recursos do Azure depois Olá migração é concluída</span><span class="sxs-lookup"><span data-stu-id="7fac9-128">Uninstall it from hello VM and add it back using Azure Resource Manager after hello Migration is Complete</span></span> |<span data-ttu-id="7fac9-129">Esse é o cenário de saudação onde a máquina virtual de saudação está configurada para Backup do Azure.</span><span class="sxs-lookup"><span data-stu-id="7fac9-129">This is hello scenario where hello virtual machine is configured for Azure Backup.</span></span> <span data-ttu-id="7fac9-130">Como no momento, esse é um cenário sem suporte, siga solução Olá https://aka.ms/vmbackupmigration</span><span class="sxs-lookup"><span data-stu-id="7fac9-130">Since this is currently an unsupported scenario, please follow hello workaround at https://aka.ms/vmbackupmigration</span></span> |
| <span data-ttu-id="7fac9-131">VM {vm-name} no HostedService {hospedado-service-name} contém extensão {extensão-name} cujo Status não está sendo informado de saudação VM.</span><span class="sxs-lookup"><span data-stu-id="7fac9-131">VM {vm-name} in HostedService {hosted-service-name} contains Extension {extension-name} whose Status is not being reported from hello VM.</span></span> <span data-ttu-id="7fac9-132">Portanto, esta VM não pode ser migrada.</span><span class="sxs-lookup"><span data-stu-id="7fac9-132">Hence, this VM cannot be migrated.</span></span> <span data-ttu-id="7fac9-133">Certifique-se de que Olá status da extensão está sendo relatado ou desinstalar a extensão de saudação do hello VM e tente novamente a migração.</span><span class="sxs-lookup"><span data-stu-id="7fac9-133">Ensure that hello Extension status is being reported or uninstall hello extension from hello VM and retry migration.</span></span> <br><br> <span data-ttu-id="7fac9-134">A VM {nome_da_VM} no serviço hospedado {nome_do_serviço_hospedado} contém a Extensão {nome_da_extensão} relatando o status do manipulador: {status_do_manipulador}.</span><span class="sxs-lookup"><span data-stu-id="7fac9-134">VM {vm-name} in HostedService {hosted-service-name} contains Extension {extension-name} reporting Handler Status: {handler-status}.</span></span> <span data-ttu-id="7fac9-135">Portanto, a saudação VM não pode ser migrada.</span><span class="sxs-lookup"><span data-stu-id="7fac9-135">Hence, hello VM cannot be migrated.</span></span> <span data-ttu-id="7fac9-136">Verifique se o status de manipulador de extensão hello está sendo relatado é {status manipulador} ou desinstale-a da saudação VM e tente novamente a migração.</span><span class="sxs-lookup"><span data-stu-id="7fac9-136">Ensure that hello Extension handler status being reported is {handler-status} or uninstall it from hello VM and retry migration.</span></span> <br><br> <span data-ttu-id="7fac9-137">Agente de VM de VM {vm-name} no HostedService {hospedado-service-name} está relatando Olá status geral do agente como não estando pronta.</span><span class="sxs-lookup"><span data-stu-id="7fac9-137">VM Agent for VM {vm-name} in HostedService {hosted-service-name} is reporting hello overall agent status as Not Ready.</span></span> <span data-ttu-id="7fac9-138">Portanto, Olá VM pode não ser migrada, se ele tem uma extensão de migrada.</span><span class="sxs-lookup"><span data-stu-id="7fac9-138">Hence, hello VM may not be migrated, if it has a migratable extension.</span></span> <span data-ttu-id="7fac9-139">Certifique-se de que o agente de VM hello está relatando status geral do agente como pronto.</span><span class="sxs-lookup"><span data-stu-id="7fac9-139">Ensure that hello VM Agent is reporting overall agent status as Ready.</span></span> <span data-ttu-id="7fac9-140">Consulte toohttps://aka.ms/classiciaasmigrationfaqs.</span><span class="sxs-lookup"><span data-stu-id="7fac9-140">Refer toohttps://aka.ms/classiciaasmigrationfaqs.</span></span> |<span data-ttu-id="7fac9-141">O agente convidado do Azure e extensões de VM necessário saída internet acesso toohello VM armazenamento conta toopopulate seu status.</span><span class="sxs-lookup"><span data-stu-id="7fac9-141">Azure guest agent & VM Extensions need outbound internet access toohello VM storage account toopopulate their status.</span></span> <span data-ttu-id="7fac9-142">Causas comuns de falha de status incluem</span><span class="sxs-lookup"><span data-stu-id="7fac9-142">Common causes of status failure include</span></span> <li> <span data-ttu-id="7fac9-143">um grupo de segurança de rede que bloqueia o acesso de saída toohello internet</span><span class="sxs-lookup"><span data-stu-id="7fac9-143">a Network Security Group that blocks outbound access toohello internet</span></span> <li> <span data-ttu-id="7fac9-144">Se Olá VNET tem conectividade DNS e servidores DNS local será perdido</span><span class="sxs-lookup"><span data-stu-id="7fac9-144">If hello VNET has on-prem DNS servers and DNS connectivity is lost</span></span> <br><br> <span data-ttu-id="7fac9-145">Se você continuar toosee um status sem suporte, é possível desinstalar Olá extensões tooskip essa verificação e continuar com a migração.</span><span class="sxs-lookup"><span data-stu-id="7fac9-145">If you continue toosee an unsupported status, you can uninstall hello extensions tooskip this check and move forward with migration.</span></span> |
| <span data-ttu-id="7fac9-146">Não há suporte para migração para implantação {nome_da_implantação} no serviço hospedado {nome_do_serviço_hospedado} porque ele tem vários conjuntos de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="7fac9-146">Migration is not supported for Deployment {deployment-name} in HostedService {hosted-service-name} because it has multiple Availability Sets.</span></span> |<span data-ttu-id="7fac9-147">Atualmente, apenas os serviços hospedados com um ou nenhum conjunto de disponibilidade podem ser migrados.</span><span class="sxs-lookup"><span data-stu-id="7fac9-147">Currently, only hosted services that have 1 or less Availability sets can be migrated.</span></span> <span data-ttu-id="7fac9-148">toowork alternativa para esse problema, mova Olá adicional conjuntos de disponibilidade e serviço hospedado de máquinas virtuais nesses conjuntos de disponibilidade tooa diferentes.</span><span class="sxs-lookup"><span data-stu-id="7fac9-148">toowork around this problem, please move hello additional Availability sets and Virtual machines in those Availability sets tooa different hosted service.</span></span> |
| <span data-ttu-id="7fac9-149">Não há suporte para migração para implantação {deployment-name} no HostedService {hospedado--nome do serviço porque ela contém VMs que não fazem parte do conjunto de disponibilidade de saudação embora Olá HostedService contém um.</span><span class="sxs-lookup"><span data-stu-id="7fac9-149">Migration is not supported for Deployment {deployment-name} in HostedService {hosted-service-name because it has VMs that are not part of hello Availability Set even though hello HostedService contains one.</span></span> |<span data-ttu-id="7fac9-150">solução alternativa de saudação para este cenário é tooeither move todas as máquinas virtuais de saudação em uma único disponibilidade definir ou remover todas as máquinas virtuais de saudação que conjunto de disponibilidade no serviço hospedado de saudação.</span><span class="sxs-lookup"><span data-stu-id="7fac9-150">hello workaround for this scenario is tooeither move all hello virtual machines into a single Availability set or remove all Virtual machines from hello Availability set in hello hosted service.</span></span> |
| <span data-ttu-id="7fac9-151">Conta de armazenamento/HostedService/Virtual rede {virtual-network-name} está no processo de saudação do que está sendo migrado e, portanto, não pode ser alterada</span><span class="sxs-lookup"><span data-stu-id="7fac9-151">Storage account/HostedService/Virtual Network {virtual-network-name} is in hello process of being migrated and hence cannot be changed</span></span> |<span data-ttu-id="7fac9-152">Esse erro ocorre quando hello "Preparação" a operação de migração foi concluída no recurso hello e uma operação que criam um recurso de toohello de alteração é disparada.</span><span class="sxs-lookup"><span data-stu-id="7fac9-152">This error happens when hello "Prepare" migration operation has been completed on hello resource and an operation that would make a change toohello resource is triggered.</span></span> <span data-ttu-id="7fac9-153">Devido a bloqueio Olá no plano de gerenciamento de saudação após a operação de "Preparação", qualquer recurso de toohello alterações estão bloqueados.</span><span class="sxs-lookup"><span data-stu-id="7fac9-153">Because of hello lock on hello management plane after "Prepare" operation, any changes toohello resource are blocked.</span></span> <span data-ttu-id="7fac9-154">plano de gerenciamento de saudação toounlock, você pode executar hello "Confirmação" migração operação toocomplete migração ou hello "Cancelar" migração operação tooroll volta hello "Preparação" operação.</span><span class="sxs-lookup"><span data-stu-id="7fac9-154">toounlock hello management plane, you can run hello "Commit" migration operation toocomplete migration or hello "Abort" migration operation tooroll back hello "Prepare" operation.</span></span> |
| <span data-ttu-id="7fac9-155">A migração não é permitida para o serviço hospedado {nome_do_serviço_hospedado} porque ele tem a VM {nome_da_vm} no estado: RoleStateUnknown.</span><span class="sxs-lookup"><span data-stu-id="7fac9-155">Migration is not allowed for HostedService {hosted-service-name} because it has VM {vm-name} in State: RoleStateUnknown.</span></span> <span data-ttu-id="7fac9-156">A migração é permitida apenas quando Olá VM estiver em um dos seguintes Olá estados - em execução, parado, interrompido desalocado.</span><span class="sxs-lookup"><span data-stu-id="7fac9-156">Migration is allowed only when hello VM is in one of hello following states - Running, Stopped, Stopped Deallocated.</span></span> |<span data-ttu-id="7fac9-157">Olá VM pode estar sofrendo por meio de uma transição de estado, que geralmente acontece quando durante uma operação de atualização em Olá HostedService como uma reinicialização, a instalação da extensão etc. É recomendável para Olá toocomplete de operação de atualização em Olá HostedService antes de tentar a migração.</span><span class="sxs-lookup"><span data-stu-id="7fac9-157">hello VM might be undergoing through a state transition, which usually happens when during an update operation on hello HostedService such as a reboot, extension installation etc. It is recommended for hello update operation toocomplete on hello HostedService before trying migration.</span></span> |
| <span data-ttu-id="7fac9-158">Implantação {deployment-name} no HostedService {hospedado-service-name} contém uma VM {vm-name} com o disco de dados {dados-disco-name} cujo tamanho {size-of-the-vhd-blob-backing-the-data-disk} bytes de blob físico não coincide com Olá {de tamanho lógico de disco de dados da VM size-of-the-data-Disk-specified-in-the-VM-API} bytes.</span><span class="sxs-lookup"><span data-stu-id="7fac9-158">Deployment {deployment-name} in HostedService {hosted-service-name} contains a VM {vm-name} with Data Disk {data-disk-name} whose physical blob size {size-of-the-vhd-blob-backing-the-data-disk} bytes does not match hello VM Data Disk logical size {size-of-the-data-disk-specified-in-the-vm-api} bytes.</span></span> <span data-ttu-id="7fac9-159">Migração continuará sem especificar um tamanho de disco de dados Olá para Olá VM do Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="7fac9-159">Migration will proceed without specifying a size for hello data disk for hello Azure Resource Manager VM.</span></span> | <span data-ttu-id="7fac9-160">Esse erro ocorre se o tamanho do blob do VHD Olá sem atualizar o tamanho de saudação no modelo de VM API hello.</span><span class="sxs-lookup"><span data-stu-id="7fac9-160">This error happens if you've resized hello VHD blob without updating hello size in hello VM API model.</span></span> <span data-ttu-id="7fac9-161">As etapas de atenuação detalhadas estão descritas [abaixo](#vm-with-data-disk-whose-physical-blob-size-bytes-does-not-match-the-vm-data-disk-logical-size-bytes).</span><span class="sxs-lookup"><span data-stu-id="7fac9-161">Detailed mitigation steps are outlined [below](#vm-with-data-disk-whose-physical-blob-size-bytes-does-not-match-the-vm-data-disk-logical-size-bytes).</span></span>|
| <span data-ttu-id="7fac9-162">Ocorreu uma exceção de armazenamento ao validar o disco de dados {nome do disco de dados} com link de mídia {Uri do disco de dados} para VM {nome da VM} no Serviço de Nuvem {nome do Serviço de Nuvem}.</span><span class="sxs-lookup"><span data-stu-id="7fac9-162">A storage exception occurred while validating data disk {data disk name} with media link {data disk Uri} for VM {VM name} in Cloud Service {Cloud Service name}.</span></span> <span data-ttu-id="7fac9-163">Verifique se que esse link de mídia Olá VHD está acessível para esta máquina virtual</span><span class="sxs-lookup"><span data-stu-id="7fac9-163">Please ensure that hello VHD media link is accessible for this virtual machine</span></span> | <span data-ttu-id="7fac9-164">Esse erro pode ocorrer se discos Olá Olá VM tenha sido excluída ou não está acessível mais.</span><span class="sxs-lookup"><span data-stu-id="7fac9-164">This error can happen if hello disks of hello VM have been deleted or are not accessible anymore.</span></span> <span data-ttu-id="7fac9-165">Certifique-se de que discos Olá Olá VM existe.</span><span class="sxs-lookup"><span data-stu-id="7fac9-165">Please make sure hello disks for hello VM exist.</span></span>|
| <span data-ttu-id="7fac9-166">A VM {vm-name} em HostedService {cloud-service-name} contém o Disco com MediaLink {vhd-uri} que tem o nome do blob {vhd-blob-name}, que não é suportado no Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="7fac9-166">VM {vm-name} in HostedService {cloud-service-name} contains Disk with MediaLink {vhd-uri} which has blob name {vhd-blob-name}  that is not supported in Azure Resource Manager.</span></span> | <span data-ttu-id="7fac9-167">Esse erro ocorre quando o nome de saudação do blob Olá tem um "/" no, o que não tem suporte no provedor de recursos de computação no momento.</span><span class="sxs-lookup"><span data-stu-id="7fac9-167">This error occurs when hello name of hello blob has a "/" in it which is not supported in Compute Resource Provider currently.</span></span> |
| <span data-ttu-id="7fac9-168">Migração não é permitida para implantação no HostedService {cloud-service-name} de {deployment-name}, pois não está no escopo regional hello.</span><span class="sxs-lookup"><span data-stu-id="7fac9-168">Migration is not allowed for Deployment {deployment-name} in HostedService {cloud-service-name} as it is not in hello regional scope.</span></span> <span data-ttu-id="7fac9-169">Consulte toohttp://aka.ms/regionalscope para mover este escopo de tooregional de implantação.</span><span class="sxs-lookup"><span data-stu-id="7fac9-169">Please refer toohttp://aka.ms/regionalscope for moving this deployment tooregional scope.</span></span> | <span data-ttu-id="7fac9-170">Em 2014, o Azure anunciou que recursos de rede serão movidos de um escopo de tooregional de escopo de nível de cluster.</span><span class="sxs-lookup"><span data-stu-id="7fac9-170">In 2014, Azure announced that networking resources will move from a cluster level scope tooregional scope.</span></span> <span data-ttu-id="7fac9-171">Consulte [http://aka.ms/regionalscope] para obter mais detalhes (http://aka.ms/regionalscope).</span><span class="sxs-lookup"><span data-stu-id="7fac9-171">See [http://aka.ms/regionalscope] for more details (http://aka.ms/regionalscope).</span></span> <span data-ttu-id="7fac9-172">Esse erro ocorre quando a implantação de saudação que está sendo migrada não teve uma operação de atualização, que move automaticamente escopo regional tooa.</span><span class="sxs-lookup"><span data-stu-id="7fac9-172">This error happens when hello deployment being migrated has not had an update operation, which automatically moves it tooa regional scope.</span></span> <span data-ttu-id="7fac9-173">Solução alternativa recomendada é tooeither adicionar um ponto de extremidade tooa VM ou dados de um disco toohello VM e, em seguida, tente novamente a migração.</span><span class="sxs-lookup"><span data-stu-id="7fac9-173">Best workaround is tooeither add an endpoint tooa VM or a data disk toohello VM and then retry migration.</span></span> <br> <span data-ttu-id="7fac9-174">Consulte [como tooset pontos de extremidade em uma máquina virtual do Windows clássica no Azure](../articles/virtual-machines/windows/classic/setup-endpoints.md#create-an-endpoint) ou [anexar dados disco tooa máquina virtual do Windows criada com o modelo de implantação clássico Olá](../articles/virtual-machines/windows/classic/attach-disk.md)</span><span class="sxs-lookup"><span data-stu-id="7fac9-174">See [How tooset up endpoints on a classic Windows virtual machine in Azure](../articles/virtual-machines/windows/classic/setup-endpoints.md#create-an-endpoint) or [Attach a data disk tooa Windows virtual machine created with hello classic deployment model](../articles/virtual-machines/windows/classic/attach-disk.md)</span></span>|


## <a name="detailed-mitigations"></a><span data-ttu-id="7fac9-175">Atenuação detalhada</span><span class="sxs-lookup"><span data-stu-id="7fac9-175">Detailed mitigations</span></span>

### <a name="vm-with-data-disk-whose-physical-blob-size-bytes-does-not-match-hello-vm-data-disk-logical-size-bytes"></a><span data-ttu-id="7fac9-176">VM com o disco de dados cujo físico bytes de tamanho de blob não corresponde bytes de tamanho lógico de disco de dados da VM hello.</span><span class="sxs-lookup"><span data-stu-id="7fac9-176">VM with Data Disk whose physical blob size bytes does not match hello VM Data Disk logical size bytes.</span></span>

<span data-ttu-id="7fac9-177">Isso acontece quando hello tamanho lógico do disco de dados pode obter fora de sincronia com o tamanho de blob VHD real hello.</span><span class="sxs-lookup"><span data-stu-id="7fac9-177">This happens when hello Data disk logical size can get out of sync with hello actual VHD blob size.</span></span> <span data-ttu-id="7fac9-178">Isso pode ser facilmente verificado usando Olá comandos a seguir:</span><span class="sxs-lookup"><span data-stu-id="7fac9-178">This can be easily verified using hello following commands:</span></span>

#### <a name="verifying-hello-issue"></a><span data-ttu-id="7fac9-179">Verificando o problema de saudação</span><span class="sxs-lookup"><span data-stu-id="7fac9-179">Verifying hello issue</span></span>

```PowerShell
# Store hello VM details in hello VM object
$vm = Get-AzureVM -ServiceName $servicename -Name $vmname

# Display hello data disk properties
# NOTE hello data disk LogicalDiskSizeInGB below which is 11GB. Also note hello MediaLink Uri of hello VHD blob as we'll use this in hello next step
$vm.VM.DataVirtualHardDisks


HostCaching         : None
DiskLabel           : 
DiskName            : coreosvm-coreosvm-0-201611230636240687
Lun                 : 0
LogicalDiskSizeInGB : 11
MediaLink           : https://contosostorage.blob.core.windows.net/vhds/coreosvm-dd1.vhd
SourceMediaLink     : 
IOType              : Standard
ExtensionData       : 

# Now get hello properties of hello blob backing hello data disk above
# NOTE hello size of hello blob is about 15 GB which is different from LogicalDiskSizeInGB above
$blob = Get-AzureStorageblob -Blob "coreosvm-dd1.vhd" -Container vhds 

$blob

ICloudBlob        : Microsoft.WindowsAzure.Storage.Blob.CloudPageBlob
BlobType          : PageBlob
Length            : 16106127872
ContentType       : application/octet-stream
LastModified      : 11/23/2016 7:16:22 AM +00:00
SnapshotTime      : 
ContinuationToken : 
Context           : Microsoft.WindowsAzure.Commands.Common.Storage.AzureStorageContext
Name              : coreosvm-dd1.vhd
```

#### <a name="mitigating-hello-issue"></a><span data-ttu-id="7fac9-180">Reduzindo o problema de saudação</span><span class="sxs-lookup"><span data-stu-id="7fac9-180">Mitigating hello issue</span></span>

```PowerShell
# Convert hello blob size in bytes tooGB into a variable which we'll use later
$newSize = [int]($blob.Length / 1GB)

# See hello calculated size in GB
$newSize

15

# Store hello disk name of hello data disk as we'll use this tooidentify hello disk toobe updated
$diskName = $vm.VM.DataVirtualHardDisks[0].DiskName

# Identify hello LUN of hello data disk tooremove
$lunToRemove = $vm.VM.DataVirtualHardDisks[0].Lun

# Now remove hello data disk from hello VM so that hello disk isn't leased by hello VM and it's size can be updated
Remove-AzureDataDisk -LUN $lunToRemove -VM $vm | Update-AzureVm -Name $vmname -ServiceName $servicename

OperationDescription OperationId                          OperationStatus
-------------------- -----------                          ---------------
Update-AzureVM       213xx1-b44b-1v6n-23gg-591f2a13cd16   Succeeded  

# Verify we have hello right disk that's going toobe updated
Get-AzureDisk -DiskName $diskName

AffinityGroup        : 
AttachedTo           : 
IsCorrupted          : False
Label                : 
Location             : East US
DiskSizeInGB         : 11
MediaLink            : https://contosostorage.blob.core.windows.net/vhds/coreosvm-dd1.vhd
DiskName             : coreosvm-coreosvm-0-201611230636240687
SourceImageName      : 
OS                   : 
IOType               : Standard
OperationDescription : Get-AzureDisk
OperationId          : 0c56a2b7-a325-123b-7043-74c27d5a61fd
OperationStatus      : Succeeded

# Now update hello disk toohello new size
Update-AzureDisk -DiskName $diskName -ResizedSizeInGB $newSize -Label $diskName

OperationDescription OperationId                          OperationStatus
-------------------- -----------                          ---------------
Update-AzureDisk     cv134b65-1b6n-8908-abuo-ce9e395ac3e7 Succeeded 

# Now verify that hello "DiskSizeInGB" property of hello disk matches hello size of hello blob 
Get-AzureDisk -DiskName $diskName


AffinityGroup        : 
AttachedTo           : 
IsCorrupted          : False
Label                : coreosvm-coreosvm-0-201611230636240687
Location             : East US
DiskSizeInGB         : 15
MediaLink            : https://contosostorage.blob.core.windows.net/vhds/coreosvm-dd1.vhd
DiskName             : coreosvm-coreosvm-0-201611230636240687
SourceImageName      : 
OS                   : 
IOType               : Standard
OperationDescription : Get-AzureDisk
OperationId          : 1v53bde5-cv56-5621-9078-16b9c8a0bad2
OperationStatus      : Succeeded

# Now we'll add hello disk back toohello VM as a data disk. First we need tooget an updated VM object
$vm = Get-AzureVM -ServiceName $servicename -Name $vmname

Add-AzureDataDisk -Import -DiskName $diskName -LUN 0 -VM $vm -HostCaching ReadWrite | Update-AzureVm -Name $vmname -ServiceName $servicename

OperationDescription OperationId                          OperationStatus
-------------------- -----------                          ---------------
Update-AzureVM       b0ad3d4c-4v68-45vb-xxc1-134fd010d0f8 Succeeded      
```

### <a name="moving-a-vm-tooa-different-subscription-after-completing-migration"></a><span data-ttu-id="7fac9-181">Mover uma assinatura diferente do VM tooa após a conclusão da migração</span><span class="sxs-lookup"><span data-stu-id="7fac9-181">Moving a VM tooa different subscription after completing migration</span></span>

<span data-ttu-id="7fac9-182">Depois de concluir o processo de migração de saudação, talvez você queira assinatura de tooanother toomove Olá VM.</span><span class="sxs-lookup"><span data-stu-id="7fac9-182">After you complete hello migration process, you may want toomove hello VM tooanother subscription.</span></span> <span data-ttu-id="7fac9-183">No entanto, se você tiver um segredo/certificado em Olá Mover VM que faz referência a um recurso de Cofre de chaves, hello não é suportado atualmente.</span><span class="sxs-lookup"><span data-stu-id="7fac9-183">However, if you have a secret/certificate on hello VM that references a Key Vault resource, hello move is currently not supported.</span></span> <span data-ttu-id="7fac9-184">Olá instruções abaixo permitem tooworkaround problema de saudação.</span><span class="sxs-lookup"><span data-stu-id="7fac9-184">hello below instructions will allow you tooworkaround hello issue.</span></span> 

#### <a name="powershell"></a><span data-ttu-id="7fac9-185">PowerShell</span><span class="sxs-lookup"><span data-stu-id="7fac9-185">PowerShell</span></span>
```powershell
$vm = Get-AzureRmVM -ResourceGroupName "MyRG" -Name "MyVM"
Remove-AzureRmVMSecret -VM $vm
Update-AzureRmVM -ResourceGroupName "MyRG" -VM $vm
```
#### <a name="azure-cli-20"></a><span data-ttu-id="7fac9-186">CLI 2.0 do Azure</span><span class="sxs-lookup"><span data-stu-id="7fac9-186">Azure CLI 2.0</span></span>

```bash
az vm update -g "myrg" -n "myvm" --set osProfile.Secrets=[]
```
