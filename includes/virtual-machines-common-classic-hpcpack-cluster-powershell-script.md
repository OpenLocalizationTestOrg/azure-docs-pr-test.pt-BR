



<span data-ttu-id="97029-101">Dependendo de seu ambiente e opções, o script pode criar toda a infraestrutura de cluster, incluindo a rede virtual do Azure, as contas de armazenamento, os serviços de nuvem, o controlador de domínio, os bancos de dados SQL locais ou remotos, o nó principal e nós de cluster adicionais.</span><span class="sxs-lookup"><span data-stu-id="97029-101">Depending on your environment and choices, the script can create all the cluster infrastructure, including the Azure virtual network, storage accounts, cloud services, domain controller, remote or local SQL databases, head node, and additional cluster nodes.</span></span> <span data-ttu-id="97029-102">Como alternativa, o script pode usar a infraestrutura existente do Azure e criar somente os nós de cluster HPC.</span><span class="sxs-lookup"><span data-stu-id="97029-102">Alternatively, the script can use pre-existing Azure infrastructure and create only the HPC cluster nodes.</span></span>

<span data-ttu-id="97029-103">Para obter informações detalhadas sobre o planejamento de um cluster Pacote HPC, confira o conteúdo de [Avaliação e planejamento de produto](https://technet.microsoft.com/library/jj899596.aspx) e de [Introdução](https://technet.microsoft.com/library/jj899590.aspx) na biblioteca de Pacote HPC 2012 R2 do TechNet.</span><span class="sxs-lookup"><span data-stu-id="97029-103">For background information about planning an HPC Pack cluster, see the [Product Evaluation and Planning](https://technet.microsoft.com/library/jj899596.aspx) and [Getting Started](https://technet.microsoft.com/library/jj899590.aspx) content in the HPC Pack 2012 R2 TechNet Library.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="97029-104">Pré-requisitos</span><span class="sxs-lookup"><span data-stu-id="97029-104">Prerequisites</span></span>
* <span data-ttu-id="97029-105">**Assinatura do Azure**: você pode usar uma assinatura no serviço Azure Global ou no Azure China.</span><span class="sxs-lookup"><span data-stu-id="97029-105">**Azure subscription**: You can use a subscription in either the Azure Global or Azure China service.</span></span> <span data-ttu-id="97029-106">Seus limites de assinatura afetam o número e o tipo de nós de cluster que você pode implantar.</span><span class="sxs-lookup"><span data-stu-id="97029-106">Your subscription limits affect the number and type of cluster nodes you can deploy.</span></span> <span data-ttu-id="97029-107">Para obter informações, consulte [Limites, cotas e restrições de serviço e assinatura do Azure](../articles/azure-subscription-service-limits.md).</span><span class="sxs-lookup"><span data-stu-id="97029-107">For information, see [Azure subscription and service limits, quotas, and constraints](../articles/azure-subscription-service-limits.md).</span></span>
* <span data-ttu-id="97029-108">**Computador cliente do Windows com o Azure PowerShell 0.8.10 ou posterior instalado e configurado** – Confira [Introdução ao Azure PowerShell](/powershell/azureps-cmdlets-docs) para obter instruções de instalação e etapas para conectar-se à sua assinatura do Azure.</span><span class="sxs-lookup"><span data-stu-id="97029-108">**Windows client computer with Azure PowerShell 0.8.10 or later installed and configured**: See [Get started with Azure PowerShell](/powershell/azureps-cmdlets-docs) for installation instructions and steps to connect to your Azure subscription.</span></span>
* <span data-ttu-id="97029-109">**Script de implantação do Pacote HPC IaaS**: baixe e descompacte a versão mais recente do script no [Centro de Download da Microsoft](https://www.microsoft.com/download/details.aspx?id=44949).</span><span class="sxs-lookup"><span data-stu-id="97029-109">**HPC Pack IaaS deployment script**: Download and unpack the latest version of the script from the [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=44949).</span></span> <span data-ttu-id="97029-110">Verifique a versão do script executando `New-HPCIaaSCluster.ps1 –Version`.</span><span class="sxs-lookup"><span data-stu-id="97029-110">Check the version of the script by running `New-HPCIaaSCluster.ps1 –Version`.</span></span> <span data-ttu-id="97029-111">Este artigo se baseia na versão 4.5.2 do script.</span><span class="sxs-lookup"><span data-stu-id="97029-111">This article is based on version 4.5.2 of the script.</span></span>
* <span data-ttu-id="97029-112">**Arquivo de configuração do script**: crie um arquivo XML que o script usa para configurar o cluster HPC.</span><span class="sxs-lookup"><span data-stu-id="97029-112">**Script configuration file**: Create an XML file that the script uses to configure the HPC cluster.</span></span> <span data-ttu-id="97029-113">Para obter informações e exemplos, consulte as seções mais adiante neste artigo e o arquivo Manual.rtf que acompanha o script de implantação.</span><span class="sxs-lookup"><span data-stu-id="97029-113">For information and examples, see sections later in this article and the file Manual.rtf that accompanies the deployment script.</span></span>

## <a name="syntax"></a><span data-ttu-id="97029-114">Sintaxe</span><span class="sxs-lookup"><span data-stu-id="97029-114">Syntax</span></span>
```PowerShell
New-HPCIaaSCluster.ps1 [-ConfigFile] <String> [-AdminUserName]<String> [[-AdminPassword] <String>] [[-HPCImageName] <String>] [[-LogFile] <String>] [-Force] [-NoCleanOnFailure] [-PSSessionSkipCACheck] [<CommonParameters>]
```
> [!NOTE]
> <span data-ttu-id="97029-115">Execute o script como um administrador.</span><span class="sxs-lookup"><span data-stu-id="97029-115">Run the script as an administrator.</span></span>
> 
> 

### <a name="parameters"></a><span data-ttu-id="97029-116">parâmetros</span><span class="sxs-lookup"><span data-stu-id="97029-116">Parameters</span></span>
* <span data-ttu-id="97029-117">**ConfigFile**: especifica o caminho do arquivo de configuração para descrever o cluster HPC.</span><span class="sxs-lookup"><span data-stu-id="97029-117">**ConfigFile**: Specifies the file path of the configuration file to describe the HPC cluster.</span></span> <span data-ttu-id="97029-118">Confira mais sobre o arquivo de configuração neste tópico ou no arquivo Manual.rtf na pasta que contém o script.</span><span class="sxs-lookup"><span data-stu-id="97029-118">See more about the configuration file in this topic, or in the file Manual.rtf in the folder containing the script.</span></span>
* <span data-ttu-id="97029-119">**AdminUserName**: especifica o nome de usuário.</span><span class="sxs-lookup"><span data-stu-id="97029-119">**AdminUserName**: Specifies the user name.</span></span> <span data-ttu-id="97029-120">Se a floresta de domínio for criada pelo script, isso se tornará o nome de usuário de administrador local para todas as VMs e o nome do administrador do domínio.</span><span class="sxs-lookup"><span data-stu-id="97029-120">If the domain forest is created by the script, this becomes the local administrator user name for all VMs and the domain administrator name.</span></span> <span data-ttu-id="97029-121">Se já existir a floresta de domínio, o usuário de domínio é especificado como o nome de usuário de administrador local para instalar o Pacote HPC.</span><span class="sxs-lookup"><span data-stu-id="97029-121">If the domain forest already exists, this specifies the domain user as the local administrator user name to install HPC Pack.</span></span>
* <span data-ttu-id="97029-122">**AdminPassword**: especifica a senha do administrador.</span><span class="sxs-lookup"><span data-stu-id="97029-122">**AdminPassword**: Specifies the administrator’s password.</span></span> <span data-ttu-id="97029-123">Se não estiver especificado na linha de comando, o script solicitará que você digite a senha.</span><span class="sxs-lookup"><span data-stu-id="97029-123">If not specified in the command line, the script prompts you to input the password.</span></span>
* <span data-ttu-id="97029-124">**HPCImageName** (opcional): especifica o nome de imagem da VM do Pacote HPC usado para implantar o cluster HPC.</span><span class="sxs-lookup"><span data-stu-id="97029-124">**HPCImageName** (optional): Specifies the HPC Pack VM image name used to deploy the HPC cluster.</span></span> <span data-ttu-id="97029-125">Ele deve ser uma imagem de Pacote HPC fornecida pela Microsoft no Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="97029-125">It must be a Microsoft-provided HPC Pack image from the Azure Marketplace.</span></span> <span data-ttu-id="97029-126">Se não estiver especificado (recomendado na maioria dos casos), o script escolhe a [imagem de Pacote HPC 2012 R2](https://azure.microsoft.com/marketplace/partners/microsoft/hpcpack2012r2onwindowsserver2012r2/)publicada mais recentemente.</span><span class="sxs-lookup"><span data-stu-id="97029-126">If not specified (recommended usually), the script chooses the latest published [HPC Pack 2012 R2 image](https://azure.microsoft.com/marketplace/partners/microsoft/hpcpack2012r2onwindowsserver2012r2/).</span></span> <span data-ttu-id="97029-127">A imagem mais recente se baseia no Windows Server 2012 R2 Datacenter com Pacote HPC 2012 R2 Atualização 3 instalado.</span><span class="sxs-lookup"><span data-stu-id="97029-127">The latest image is based on Windows Server 2012 R2 Datacenter with HPC Pack 2012 R2 Update 3 installed.</span></span>
  
  > [!NOTE]
  > <span data-ttu-id="97029-128">A implantação falhará se você não especificar uma imagem válida do Pacote HPC.</span><span class="sxs-lookup"><span data-stu-id="97029-128">Deployment fails if you don't specify a valid HPC Pack image.</span></span>
  > 
  > 
* <span data-ttu-id="97029-129">**LogFile** (opcional): especifica o caminho de arquivo de log de implantação.</span><span class="sxs-lookup"><span data-stu-id="97029-129">**LogFile** (optional): Specifies the deployment log file path.</span></span> <span data-ttu-id="97029-130">Se não for especificado, o script cria um arquivo de log no diretório temporário do computador que executa o script.</span><span class="sxs-lookup"><span data-stu-id="97029-130">If not specified, the script creates a log file in the temp directory of the computer running the script.</span></span>
* <span data-ttu-id="97029-131">**Force** (opcional): suprime todas as solicitações de confirmação.</span><span class="sxs-lookup"><span data-stu-id="97029-131">**Force** (optional): Suppresses all the confirmation prompts.</span></span>
* <span data-ttu-id="97029-132">**NoCleanOnFailure** (opcional): especifica que as VMs do Azure que não forem implantadas com êxito não serão removidas.</span><span class="sxs-lookup"><span data-stu-id="97029-132">**NoCleanOnFailure** (optional): Specifies that the Azure VMs that are not successfully deployed are not removed.</span></span> <span data-ttu-id="97029-133">Remova essas VMs manualmente antes de executar novamente o script para continuar a implantação ou esta poderá falhar.</span><span class="sxs-lookup"><span data-stu-id="97029-133">Remove these VMs manually before rerunning the script to continue the deployment, or the deployment may fail.</span></span>
* <span data-ttu-id="97029-134">**PSSessionSkipCACheck** (opcional): para cada serviço de nuvem com VMs implantadas por esse script, um certificado autoassinado é automaticamente gerado pelo Azure e todas as VMs no serviço de nuvem usam esse certificado como o certificado do Windows Remote Management (WinRM) padrão.</span><span class="sxs-lookup"><span data-stu-id="97029-134">**PSSessionSkipCACheck** (optional): For every cloud service with VMs deployed by this script, a self-signed certificate is automatically generated by Azure, and all the VMs in the cloud service use this certificate as the default Windows Remote Management (WinRM) certificate.</span></span> <span data-ttu-id="97029-135">Para implantar os recursos de HPC nessas VMs do Azure, o script por padrão instala temporariamente esses certificados no repositório de Autoridades de Certificação Confiáveis no Computador local\\ do computador cliente para suprimir o erro de segurança “AC não confiável” durante a execução do script.</span><span class="sxs-lookup"><span data-stu-id="97029-135">To deploy HPC features in these Azure VMs, the script by default temporarily installs these certificates in the Local Computer\\Trusted Root Certification Authorities store of the client computer to suppress the “not trusted CA” security error during script execution.</span></span> <span data-ttu-id="97029-136">Os certificados são removidos quando o script termina.</span><span class="sxs-lookup"><span data-stu-id="97029-136">The certificates are removed when the script finishes.</span></span> <span data-ttu-id="97029-137">Se esse parâmetro for especificado, os certificados não serão instalados no computador cliente e o aviso de segurança será suprimido.</span><span class="sxs-lookup"><span data-stu-id="97029-137">If this parameter is specified, the certificates are not installed in the client computer, and the security warning is suppressed.</span></span>
  
  > [!IMPORTANT]
  > <span data-ttu-id="97029-138">Esse parâmetro não é recomendado para implantações de produção.</span><span class="sxs-lookup"><span data-stu-id="97029-138">This parameter is not recommended for production deployments.</span></span>
  > 
  > 

### <a name="example"></a><span data-ttu-id="97029-139">Exemplo</span><span class="sxs-lookup"><span data-stu-id="97029-139">Example</span></span>
<span data-ttu-id="97029-140">O exemplo a seguir cria um cluster Pacote HPC usando o arquivo de configuração *MyConfigFile.xml* e especifica as credenciais de administrador para instalar o cluster.</span><span class="sxs-lookup"><span data-stu-id="97029-140">The following example creates an HPC Pack cluster using the configuration file *MyConfigFile.xml*, and specifies administrator credentials for installing the cluster.</span></span>

```PowerShell
.\New-HPCIaaSCluster.ps1 –ConfigFile MyConfigFile.xml -AdminUserName <username> –AdminPassword <password>
```

### <a name="additional-considerations"></a><span data-ttu-id="97029-141">Considerações adicionais</span><span class="sxs-lookup"><span data-stu-id="97029-141">Additional considerations</span></span>
* <span data-ttu-id="97029-142">O script opcionalmente pode habilitar o envio de trabalho por meio do portal da Web Pacote HPC ou da API REST do Pacote HPC.</span><span class="sxs-lookup"><span data-stu-id="97029-142">The script can optionally enable job submission through the HPC Pack web portal or the HPC Pack REST API.</span></span>
* <span data-ttu-id="97029-143">O script pode opcionalmente executar scripts de pré e pós-configuração personalizados no nó principal se você quiser instalar o software adicional ou definir outras configurações.</span><span class="sxs-lookup"><span data-stu-id="97029-143">The script can optionally run custom pre- and post-configuration scripts on the head node if you want to install additional software or configure other settings.</span></span>

## <a name="configuration-file"></a><span data-ttu-id="97029-144">Arquivo de configuração</span><span class="sxs-lookup"><span data-stu-id="97029-144">Configuration file</span></span>
<span data-ttu-id="97029-145">O arquivo de configuração para o script de implantação é um arquivo XML.</span><span class="sxs-lookup"><span data-stu-id="97029-145">The configuration file for the deployment script is an XML file.</span></span> <span data-ttu-id="97029-146">O arquivo de esquema HPCIaaSClusterConfig.xsd está na pasta de script de implantação do Pacote HPC IaaS.</span><span class="sxs-lookup"><span data-stu-id="97029-146">The schema file HPCIaaSClusterConfig.xsd is in the HPC Pack IaaS deployment script folder.</span></span> <span data-ttu-id="97029-147">**IaaSClusterConfig** é o elemento raiz do arquivo de configuração, que contém os elementos filhos descritos em detalhes no arquivo Manual.rtf na pasta de script de implantação.</span><span class="sxs-lookup"><span data-stu-id="97029-147">**IaaSClusterConfig** is the root element of the configuration file, which contains the child elements described in detail in the file Manual.rtf in the deployment script folder.</span></span>

