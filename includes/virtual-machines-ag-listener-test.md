<span data-ttu-id="d8105-101">Nesta etapa, você deve testar o ouvinte do grupo de disponibilidade usando um aplicativo cliente em execução na mesma rede.</span><span class="sxs-lookup"><span data-stu-id="d8105-101">In this step, you test the availability group listener by using a client application that's running on the same network.</span></span>

<span data-ttu-id="d8105-102">Para a conectividade do cliente, observe os seguintes requisitos:</span><span class="sxs-lookup"><span data-stu-id="d8105-102">Client connectivity has the following requirements:</span></span>

* <span data-ttu-id="d8105-103">As conexões de cliente para o ouvinte devem vir de máquinas que residem em um serviço de nuvem diferente daquele que hospeda as réplicas de disponibilidade do AlwaysOn.</span><span class="sxs-lookup"><span data-stu-id="d8105-103">Client connections to the listener must come from machines that reside in a different cloud service than the one that hosts the Always On availability replicas.</span></span>
* <span data-ttu-id="d8105-104">Se as réplicas do AlwaysOn estiverem em sub-redes diferentes, os clientes deverão especificar *MultisubnetFailover=True* na cadeia de conexão.</span><span class="sxs-lookup"><span data-stu-id="d8105-104">If the Always On replicas are in different subnets, clients must specify *MultisubnetFailover=True* in the connection string.</span></span> <span data-ttu-id="d8105-105">Essa condição resulta em tentativas de conexão em paralelo para réplicas nas várias sub-redes.</span><span class="sxs-lookup"><span data-stu-id="d8105-105">This condition results in parallel connection attempts to replicas in the various subnets.</span></span> <span data-ttu-id="d8105-106">Observe que esse cenário inclui uma implantação de grupo de disponibilidade do AlwaysOn entre regiões.</span><span class="sxs-lookup"><span data-stu-id="d8105-106">This scenario includes a cross-region Always On availability group deployment.</span></span>

<span data-ttu-id="d8105-107">Um exemplo é conectar-se ao ouvinte de uma das VMs na mesma rede virtual do Azure (mas não uma que hospeda uma réplica).</span><span class="sxs-lookup"><span data-stu-id="d8105-107">One example is to connect to the listener from one of the VMs in the same Azure virtual network (but not one that hosts a replica).</span></span> <span data-ttu-id="d8105-108">Uma maneira fácil para concluir este teste é tentar conectar o SQL Server Management Studio ao ouvinte do grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="d8105-108">An easy way to complete this test is to try to connect SQL Server Management Studio to the availability group listener.</span></span> <span data-ttu-id="d8105-109">Outro método simples é executar [SQLCMD.exe](https://technet.microsoft.com/library/ms162773.aspx) da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="d8105-109">Another simple method is to run [SQLCMD.exe](https://technet.microsoft.com/library/ms162773.aspx), as follows:</span></span>

    sqlcmd -S "<ListenerName>,<EndpointPort>" -d "<DatabaseName>" -Q "select @@servername, db_name()" -l 15

> [!NOTE]
> <span data-ttu-id="d8105-110">Se o valor de EndpointPort é *1433*, não é necessário especificá-lo na chamada.</span><span class="sxs-lookup"><span data-stu-id="d8105-110">If the EndpointPort value is *1433*, you are not required to specify it in the call.</span></span> <span data-ttu-id="d8105-111">A chamada anterior também pressupõe que o computador do cliente está conectado ao mesmo domínio e que o chamador tem permissões no banco de dados usando a autenticação do Windows.</span><span class="sxs-lookup"><span data-stu-id="d8105-111">The previous call also assumes that the client machine is joined to the same domain and that the caller has been granted permissions on the database by using Windows authentication.</span></span>
> 
> 

<span data-ttu-id="d8105-112">Ao testar o ouvinte, certifique-se de realizar failover ao grupo de disponibilidade para garantir que os clientes possam se conectar ao ouvinte através de failovers.</span><span class="sxs-lookup"><span data-stu-id="d8105-112">When you test the listener, be sure to fail over the availability group to make sure that clients can connect to the listener across failovers.</span></span>

