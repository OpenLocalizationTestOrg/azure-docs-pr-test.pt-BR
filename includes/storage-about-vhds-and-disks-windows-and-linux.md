
## <a name="about-vhds"></a><span data-ttu-id="c4455-101">Sobre VHDs</span><span class="sxs-lookup"><span data-stu-id="c4455-101">About VHDs</span></span>

<span data-ttu-id="c4455-102">Os VHDs usados no Azure são arquivos .vhd armazenados como blobs de página em uma conta de armazenamento padrão ou premium no Azure.</span><span class="sxs-lookup"><span data-stu-id="c4455-102">The VHDs used in Azure are .vhd files stored as page blobs in a standard or premium storage account in Azure.</span></span> <span data-ttu-id="c4455-103">Para conhecer mais detalhes sobre os blobs, consulte [Noções Gerais sobre blobs de blocos e blobs de páginas](/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs/).</span><span class="sxs-lookup"><span data-stu-id="c4455-103">For details about page blobs, see [Understanding block blobs and page blobs](/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs/).</span></span> <span data-ttu-id="c4455-104">Para obter detalhes sobre o armazenamento premium, veja [Armazenamento premium de alto desempenho e máquinas virtuais do Azure](../articles/storage/common/storage-premium-storage.md).</span><span class="sxs-lookup"><span data-stu-id="c4455-104">For details about premium storage, see [High-performance premium storage and Azure VMs](../articles/storage/common/storage-premium-storage.md).</span></span>

<span data-ttu-id="c4455-105">O Azure dá suporte aos discos fixos no formato VHD.</span><span class="sxs-lookup"><span data-stu-id="c4455-105">Azure supports the fixed disk VHD format.</span></span> <span data-ttu-id="c4455-106">O formato fixo dispõe o disco lógico linearmente dentro do arquivo, de forma que o deslocamento X do disco é armazenado no deslocamento X do blob. Um pequeno rodapé ao final do blob descreve as propriedades do VHD.</span><span class="sxs-lookup"><span data-stu-id="c4455-106">The fixed format lays the logical disk out linearly within the file, so that disk offset X is stored at blob offset X. A small footer at the end of the blob describes the properties of the VHD.</span></span> <span data-ttu-id="c4455-107">Frequentemente, o formato fixo desperdiça espaço, porque muitos discos têm em si grandes intervalos não usados.</span><span class="sxs-lookup"><span data-stu-id="c4455-107">Often, the fixed format wastes space because most disks have large unused ranges in them.</span></span> <span data-ttu-id="c4455-108">No entanto, o Azure armazena arquivos .vhd em um formato livre, assim você obtém os benefícios de discos fixos e dinâmicos ao mesmo tempo.</span><span class="sxs-lookup"><span data-stu-id="c4455-108">However, Azure stores .vhd files in a sparse format, so you receive the benefits of both the fixed and dynamic disks at the same time.</span></span> <span data-ttu-id="c4455-109">Para obter mais detalhes, consulte [Introdução aos discos rígidos virtuais](https://technet.microsoft.com/library/dd979539.aspx).</span><span class="sxs-lookup"><span data-stu-id="c4455-109">For more details, see [Getting started with virtual hard disks](https://technet.microsoft.com/library/dd979539.aspx).</span></span>

<span data-ttu-id="c4455-110">Todos os arquivos .vhd no Azure que você deseja usar como fonte para criar discos ou imagens são somente leitura.</span><span class="sxs-lookup"><span data-stu-id="c4455-110">All .vhd files in Azure that you want to use as a source to create disks or images are read-only.</span></span> <span data-ttu-id="c4455-111">Quando você cria um disco ou uma imagem, o Azure faz cópias dos arquivos .vhd.</span><span class="sxs-lookup"><span data-stu-id="c4455-111">When you create a disk or image, Azure makes copies of the .vhd files.</span></span> <span data-ttu-id="c4455-112">Essas cópias podem ser somente leitura ou de leitura e gravação, dependendo de como você usar o VHD.</span><span class="sxs-lookup"><span data-stu-id="c4455-112">These copies can be read-only or read-and-write, depending on how you use the VHD.</span></span>

<span data-ttu-id="c4455-113">Quando você cria uma máquina virtual por meio de uma imagem, o Azure cria um disco para a máquina virtual que é uma cópia do arquivo .vhd de origem.</span><span class="sxs-lookup"><span data-stu-id="c4455-113">When you create a virtual machine from an image, Azure creates a disk for the virtual machine that is a copy of the source .vhd file.</span></span> <span data-ttu-id="c4455-114">Para proteger contra exclusão acidental, o Azure faz uma concessão de qualquer arquivo .vhd de origem que é usado para criar uma imagem, um disco de sistema operacional ou um disco de dados.</span><span class="sxs-lookup"><span data-stu-id="c4455-114">To protect against accidental deletion, Azure places a lease on any source .vhd file that’s used to create an image, an operating system disk, or a data disk.</span></span>

<span data-ttu-id="c4455-115">Antes de excluir um arquivo .vhd de origem, você precisará remover a concessão excluindo o disco ou a imagem.</span><span class="sxs-lookup"><span data-stu-id="c4455-115">Before you can delete a source .vhd file, you’ll need to remove the lease by deleting the disk or image.</span></span> <span data-ttu-id="c4455-116">Para excluir um arquivo .vhd que está sendo usado por uma máquina virtual como disco do sistema operacional, você pode excluir a máquina virtual, o disco do sistema operacional e o arquivo .vhd de origem de uma só vez excluindo a máquina virtual e todos os discos associados.</span><span class="sxs-lookup"><span data-stu-id="c4455-116">To delete a .vhd file that is being used by a virtual machine as an operating system disk, you can delete the virtual machine, the operating system disk, and the source .vhd file all at once by deleting the virtual machine and deleting all associated disks.</span></span> <span data-ttu-id="c4455-117">No entanto, a exclusão de um arquivo .vhd que é uma origem de um disco de dados requer várias etapas em uma ordem definida.</span><span class="sxs-lookup"><span data-stu-id="c4455-117">However, deleting a .vhd file that’s a source for a data disk requires several steps in a set order.</span></span> <span data-ttu-id="c4455-118">Primeiro, desanexar o disco da máquina virtual; em seguida, excluir o disco e, por fim, excluir o arquivo .vhd.</span><span class="sxs-lookup"><span data-stu-id="c4455-118">First you detach the disk from the virtual machine, then delete the disk, and then delete the .vhd file.</span></span>

> [!WARNING]
> <span data-ttu-id="c4455-119">Se você excluir um arquivo .vhd de origem do armazenamento ou excluir sua conta de armazenamento, a Microsoft não poderá recuperar esses dados para você.</span><span class="sxs-lookup"><span data-stu-id="c4455-119">If you delete a source .vhd file from storage, or delete your storage account, Microsoft can't recover that data for you.</span></span>
> 

## <a name="types-of-disks"></a><span data-ttu-id="c4455-120">Tipos de discos</span><span class="sxs-lookup"><span data-stu-id="c4455-120">Types of disks</span></span> 

<span data-ttu-id="c4455-121">Os Discos do Azure foram projetados para oferecer uma disponibilidade de 99,999%.</span><span class="sxs-lookup"><span data-stu-id="c4455-121">Azure Disks are designed for 99.999% availability.</span></span> <span data-ttu-id="c4455-122">Os Discos do Azure forneceram consistentemente a durabilidade no nível empresarial, com uma Taxa de Falha Anual de ZERO% líder do setor.</span><span class="sxs-lookup"><span data-stu-id="c4455-122">Azure Disks have consistently delivered enterprise-grade durability, with an industry-leading ZERO% Annualized Failure Rate.</span></span>

<span data-ttu-id="c4455-123">Há dois níveis de desempenho de armazenamento que você pode escolher ao criar seus discos – armazenamento Standard e Premium.</span><span class="sxs-lookup"><span data-stu-id="c4455-123">There are two performance tiers for storage that you can choose from when creating your disks -- Standard Storage and Premium Storage.</span></span> <span data-ttu-id="c4455-124">Além disso, há dois tipos de discos--não gerenciado e gerenciado – e podem residir em qualquer nível de desempenho.</span><span class="sxs-lookup"><span data-stu-id="c4455-124">Also, there are two types of disks -- unmanaged and managed -- and they can reside in either performance tier.</span></span>


### <a name="standard-storage"></a><span data-ttu-id="c4455-125">Armazenamento Standard</span><span class="sxs-lookup"><span data-stu-id="c4455-125">Standard storage</span></span> 

<span data-ttu-id="c4455-126">Armazenamento padrão é apoiado por HDDs e oferece armazenamento econômico e eficaz.</span><span class="sxs-lookup"><span data-stu-id="c4455-126">Standard Storage is backed by HDDs, and delivers cost-effective storage while still being performant.</span></span> <span data-ttu-id="c4455-127">Armazenamento padrão pode ser replicado localmente em um data center ou ser redundante geograficamente com centros de dados primários e secundários.</span><span class="sxs-lookup"><span data-stu-id="c4455-127">Standard storage can be replicated locally in one datacenter, or be geo-redundant with primary and secondary data centers.</span></span> <span data-ttu-id="c4455-128">Para saber mais sobre a replicação de armazenamento, veja [Replicação do Armazenamento do Azure](../articles/storage/common/storage-redundancy.md).</span><span class="sxs-lookup"><span data-stu-id="c4455-128">For more information about storage replication, please see [Azure Storage replication](../articles/storage/common/storage-redundancy.md).</span></span> 

<span data-ttu-id="c4455-129">Para saber mais sobre como usar o armazenamento Standard com discos de VM, veja [Armazenamento Standard e discos](../articles/storage/common/storage-standard-storage.md).</span><span class="sxs-lookup"><span data-stu-id="c4455-129">For more information about using Standard Storage with VM disks, please see [Standard Storage and Disks](../articles/storage/common/storage-standard-storage.md).</span></span>

### <a name="premium-storage"></a><span data-ttu-id="c4455-130">Armazenamento Premium</span><span class="sxs-lookup"><span data-stu-id="c4455-130">Premium storage</span></span> 

<span data-ttu-id="c4455-131">O Armazenamento Premium tem o suporte de SSDs e oferece suporte de disco de alto desempenho e baixa latência para VMs executando cargas de trabalho intensivas para entradas e saídas.</span><span class="sxs-lookup"><span data-stu-id="c4455-131">Premium Storage is backed by SSDs, and delivers high-performance, low-latency disk support for VMs running I/O-intensive workloads.</span></span> <span data-ttu-id="c4455-132">Você pode usar o Armazenamento Premium com DS, DSv2, GS, Ls ou FS as VMs do Azure da série.</span><span class="sxs-lookup"><span data-stu-id="c4455-132">You can use Premium Storage with DS, DSv2, GS, Ls, or FS series Azure VMs.</span></span> <span data-ttu-id="c4455-133">Para saber mais, veja [Armazenamento Premium](../articles/storage/common/storage-premium-storage.md).</span><span class="sxs-lookup"><span data-stu-id="c4455-133">For more information, please see [Premium Storage](../articles/storage/common/storage-premium-storage.md).</span></span>

### <a name="unmanaged-disks"></a><span data-ttu-id="c4455-134">Discos não gerenciados</span><span class="sxs-lookup"><span data-stu-id="c4455-134">Unmanaged disks</span></span>

<span data-ttu-id="c4455-135">Discos não gerenciados são do tipo tradicional de discos que foram usados por máquinas virtuais.</span><span class="sxs-lookup"><span data-stu-id="c4455-135">Unmanaged disks are the traditional type of disks that have been used by VMs.</span></span> <span data-ttu-id="c4455-136">Com isso, você cria sua própria conta de armazenamento e especifique a conta de armazenamento quando você criar o disco.</span><span class="sxs-lookup"><span data-stu-id="c4455-136">With these, you create your own storage account and specify that storage account when you create the disk.</span></span> <span data-ttu-id="c4455-137">Você precisa certificar-se de não colocar muitos discos na mesma conta de armazenamento, pois você pode exceder o [metas de escalabilidade](../articles/storage/common/storage-scalability-targets.md) da conta de armazenamento (20.000 IOPS, por exemplo), resultando em máquinas virtuais sendo limitadas.</span><span class="sxs-lookup"><span data-stu-id="c4455-137">You have to make sure you don't put too many disks in the same storage account, because you could exceed the [scalability targets](../articles/storage/common/storage-scalability-targets.md) of the storage account (20,000 IOPS, for example), resulting in the VMs being throttled.</span></span> <span data-ttu-id="c4455-138">Com discos não gerenciados, você precisa descobrir como maximizar o uso de uma ou mais contas de armazenamento para obter o melhor desempenho do suas VMs.</span><span class="sxs-lookup"><span data-stu-id="c4455-138">With unmanaged disks, you have to figure out how to maximize the use of one or more storage accounts to get the best performance out of your VMs.</span></span>

### <a name="managed-disks"></a><span data-ttu-id="c4455-139">Discos gerenciados</span><span class="sxs-lookup"><span data-stu-id="c4455-139">Managed disks</span></span> 

<span data-ttu-id="c4455-140">Gerenciado identificadores de discos de armazenamento de criação/gerenciamento em segundo plano de contas para você e garante que você não precisa se preocupar sobre os limites de escalabilidade da conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="c4455-140">Managed Disks handles the storage account creation/management in the background for you, and ensures that you do not have to worry about the scalability limits of the storage account.</span></span> <span data-ttu-id="c4455-141">Você simplesmente especifica o tamanho do disco e o nível de desempenho (Standard/Premium) e o Azure cria e gerencia o disco para você.</span><span class="sxs-lookup"><span data-stu-id="c4455-141">You simply specify the disk size and the performance tier (Standard/Premium), and Azure creates and manages the disk for you.</span></span> <span data-ttu-id="c4455-142">Mesmo que você adicione discos ou dimensionar a VM para cima e para baixo, você não precisa se preocupar sobre o armazenamento está sendo usado.</span><span class="sxs-lookup"><span data-stu-id="c4455-142">Even as you add disks or scale the VM up and down, you don't have to worry about the storage being used.</span></span> 

<span data-ttu-id="c4455-143">Você também pode gerenciar suas imagens personalizadas em uma conta de armazenamento por região do Azure e usá-las para criar centenas de VMs na mesma assinatura.</span><span class="sxs-lookup"><span data-stu-id="c4455-143">You can also manage your custom images in one storage account per Azure region, and use them to create hundreds of VMs in the same subscription.</span></span> <span data-ttu-id="c4455-144">Para saber mais sobre discos gerenciados, veja a [Visão geral de discos gerenciados](../articles/virtual-machines/windows/managed-disks-overview.md).</span><span class="sxs-lookup"><span data-stu-id="c4455-144">For more information about Managed Disks, please see the [Managed Disks Overview](../articles/virtual-machines/windows/managed-disks-overview.md).</span></span>

<span data-ttu-id="c4455-145">É recomendável que você use Azure Managed Disks para novas VMs e converta os discos não gerenciados anteriores para discos gerenciados, para tirar proveito dos muitos recursos disponíveis nos Managed Disks.</span><span class="sxs-lookup"><span data-stu-id="c4455-145">We recommend that you use Azure Managed Disks for new VMs, and that you convert your previous unmanaged disks to managed disks, to take advantage of the many features available in Managed Disks.</span></span>

### <a name="disk-comparison"></a><span data-ttu-id="c4455-146">Comparação de disco</span><span class="sxs-lookup"><span data-stu-id="c4455-146">Disk comparison</span></span>

<span data-ttu-id="c4455-147">A tabela a seguir fornece uma comparação do vs Premium padrão para discos gerenciados e não para ajudá-lo a decidir o que usar.</span><span class="sxs-lookup"><span data-stu-id="c4455-147">The following table provides a comparison of Premium vs Standard for both unmanaged and managed disks to help you decide what to use.</span></span>

|    | <span data-ttu-id="c4455-148">Disco Premium do Azure</span><span class="sxs-lookup"><span data-stu-id="c4455-148">Azure Premium Disk</span></span> | <span data-ttu-id="c4455-149">Disco padrão do Azure</span><span class="sxs-lookup"><span data-stu-id="c4455-149">Azure Standard Disk</span></span> |
|--- | ------------------ | ------------------- |
| <span data-ttu-id="c4455-150">Tipo de disco</span><span class="sxs-lookup"><span data-stu-id="c4455-150">Disk Type</span></span> | <span data-ttu-id="c4455-151">Unidades de Estado Sólido (SSD)</span><span class="sxs-lookup"><span data-stu-id="c4455-151">Solid State Drives (SSD)</span></span> | <span data-ttu-id="c4455-152">Unidades de Disco Rígido (HDD)</span><span class="sxs-lookup"><span data-stu-id="c4455-152">Hard Disk Drives (HDD)</span></span>  |
| <span data-ttu-id="c4455-153">Visão geral</span><span class="sxs-lookup"><span data-stu-id="c4455-153">Overview</span></span>  | <span data-ttu-id="c4455-154">Suporte a disco com base em SSD de alto desempenho e baixa latência, para máquinas virtuais executando cargas de trabalho com uso intensivo de E/S ou hospedando ambiente de produção de missão crítica</span><span class="sxs-lookup"><span data-stu-id="c4455-154">SSD-based high-performance, low-latency disk support for VMs running IO-intensive workloads or hosting mission critical production environment</span></span> | <span data-ttu-id="c4455-155">Suporte a disco econômico com base em HDD para cenários de VM de desenvolvimento/teste</span><span class="sxs-lookup"><span data-stu-id="c4455-155">HDD-based cost effective disk support for Dev/Test VM scenarios</span></span> |
| <span data-ttu-id="c4455-156">Cenário</span><span class="sxs-lookup"><span data-stu-id="c4455-156">Scenario</span></span>  | <span data-ttu-id="c4455-157">Cargas de trabalho confidenciais produção e desempenho</span><span class="sxs-lookup"><span data-stu-id="c4455-157">Production and performance sensitive workloads</span></span> | <span data-ttu-id="c4455-158">Desenvolvimento e teste, não-crítico,</span><span class="sxs-lookup"><span data-stu-id="c4455-158">Dev/Test, non-critical,</span></span> <br><span data-ttu-id="c4455-159">Acesso infrequente</span><span class="sxs-lookup"><span data-stu-id="c4455-159">Infrequent access</span></span> |
| <span data-ttu-id="c4455-160">Tamanho do disco</span><span class="sxs-lookup"><span data-stu-id="c4455-160">Disk Size</span></span> | <span data-ttu-id="c4455-161">P4: 32 GB (somente para discos gerenciados)</span><span class="sxs-lookup"><span data-stu-id="c4455-161">P4: 32 GB (Managed Disks only)</span></span><br><span data-ttu-id="c4455-162">P6: 64 GB (somente para discos gerenciados)</span><span class="sxs-lookup"><span data-stu-id="c4455-162">P6: 64 GB (Managed Disks only)</span></span><br><span data-ttu-id="c4455-163">P10: 128 GB</span><span class="sxs-lookup"><span data-stu-id="c4455-163">P10: 128 GB</span></span><br><span data-ttu-id="c4455-164">P20: 512 GB</span><span class="sxs-lookup"><span data-stu-id="c4455-164">P20: 512 GB</span></span><br><span data-ttu-id="c4455-165">P30: 1024 GB</span><span class="sxs-lookup"><span data-stu-id="c4455-165">P30: 1024 GB</span></span><br><span data-ttu-id="c4455-166">P40: 2048 GB</span><span class="sxs-lookup"><span data-stu-id="c4455-166">P40: 2048 GB</span></span><br><span data-ttu-id="c4455-167">P50: GB 4095</span><span class="sxs-lookup"><span data-stu-id="c4455-167">P50: 4095 GB</span></span> | <span data-ttu-id="c4455-168">Discos não Gerenciados: 1 GB a 4 TB (4095 GB)</span><span class="sxs-lookup"><span data-stu-id="c4455-168">Unmanaged Disks: 1 GB – 4 TB (4095 GB)</span></span> <br><br><span data-ttu-id="c4455-169">Managed Disks:</span><span class="sxs-lookup"><span data-stu-id="c4455-169">Managed Disks:</span></span><br> <span data-ttu-id="c4455-170">S4: 32 GB</span><span class="sxs-lookup"><span data-stu-id="c4455-170">S4: 32 GB</span></span> <br><span data-ttu-id="c4455-171">S6: 64 GB</span><span class="sxs-lookup"><span data-stu-id="c4455-171">S6: 64 GB</span></span> <br><span data-ttu-id="c4455-172">S10: 128 GB</span><span class="sxs-lookup"><span data-stu-id="c4455-172">S10: 128 GB</span></span> <br><span data-ttu-id="c4455-173">S20: 512 GB</span><span class="sxs-lookup"><span data-stu-id="c4455-173">S20: 512 GB</span></span> <br><span data-ttu-id="c4455-174">S30: 1024 GB</span><span class="sxs-lookup"><span data-stu-id="c4455-174">S30: 1024 GB</span></span> <br><span data-ttu-id="c4455-175">S40: 2048 GB</span><span class="sxs-lookup"><span data-stu-id="c4455-175">S40: 2048 GB</span></span><br><span data-ttu-id="c4455-176">S50: GB 4095</span><span class="sxs-lookup"><span data-stu-id="c4455-176">S50: 4095 GB</span></span>| 
| <span data-ttu-id="c4455-177">Taxa de Transferência Máxima por Disco</span><span class="sxs-lookup"><span data-stu-id="c4455-177">Max Throughput per Disk</span></span> | <span data-ttu-id="c4455-178">250 MB/s</span><span class="sxs-lookup"><span data-stu-id="c4455-178">250 MB/s</span></span> | <span data-ttu-id="c4455-179">60 MB/s</span><span class="sxs-lookup"><span data-stu-id="c4455-179">60 MB/s</span></span> | 
| <span data-ttu-id="c4455-180">IOPS Máxima por Disco</span><span class="sxs-lookup"><span data-stu-id="c4455-180">Max IOPS per Disk</span></span> | <span data-ttu-id="c4455-181">7500 IOPS</span><span class="sxs-lookup"><span data-stu-id="c4455-181">7500 IOPS</span></span> | <span data-ttu-id="c4455-182">500 IOPS</span><span class="sxs-lookup"><span data-stu-id="c4455-182">500 IOPS</span></span> | 

