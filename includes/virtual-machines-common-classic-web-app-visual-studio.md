

<span data-ttu-id="1e837-101">Ao criar um projeto de aplicativo Web para o Azure, você pode provisionar uma máquina virtual no Azure.</span><span class="sxs-lookup"><span data-stu-id="1e837-101">When you create a web application project for Azure, you can provision a virtual machine in Azure.</span></span> <span data-ttu-id="1e837-102">Em seguida, é possível configurar a máquina virtual com software adicional ou usar a máquina virtual para fins de diagnóstico ou depuração.</span><span class="sxs-lookup"><span data-stu-id="1e837-102">You can then configure the virtual machine with additional software, or use the virtual machine for diagnostic or debugging purposes.</span></span>

<span data-ttu-id="1e837-103">Para criar uma máquina virtual ao criar um aplicativo Web, execute estas etapas:</span><span class="sxs-lookup"><span data-stu-id="1e837-103">To create a virtual machine when you create a web application, follow these steps:</span></span>

1. <span data-ttu-id="1e837-104">No Visual Studio, clique em **Arquivo** >  **Novo** > **Projeto** > **Web** e, em seguida, escolha **Aplicativo Web ASP.NET** (sob os nós **Visual C#** ou **Visual Basic**).</span><span class="sxs-lookup"><span data-stu-id="1e837-104">In Visual Studio, click **File** > **New** > **Project** > **Web**, and then choose **ASP.NET Web Application** (under the **Visual C#** or **Visual Basic** nodes).</span></span>
2. <span data-ttu-id="1e837-105">Na caixa de diálogo **Novo Projeto do ASP.NET**, selecione o tipo de aplicativo Web desejado e, na seção Azure da caixa de diálogo (no canto inferior direito), não se esqueça de marcar a caixa de seleção **Hospedar na nuvem** (ela é rotulada como **Criar recursos remotos** em algumas instalações).</span><span class="sxs-lookup"><span data-stu-id="1e837-105">In the **New ASP.NET Project** dialog box, select the type of web application you want, and in the Azure section of the dialog box (in the lower-right corner), make sure that the **Host in the cloud** check box is selected (this check box is labeled **Create remote resources** in some installations).</span></span>
   
    ![][0]
3. <span data-ttu-id="1e837-106">Para este exemplo, na lista suspensa em Microsoft Azure, escolha **Máquina Virtual (v1)** e, em seguida, clique no botão **OK**.</span><span class="sxs-lookup"><span data-stu-id="1e837-106">For this example, in the drop-down list under Microsoft Azure, choose **Virtual Machine (v1)**, and then click the **OK** button.</span></span>
4. <span data-ttu-id="1e837-107">Conecte-se ao Azure, se for solicitado.</span><span class="sxs-lookup"><span data-stu-id="1e837-107">Sign in to Azure if you're prompted.</span></span> <span data-ttu-id="1e837-108">A caixa de diálogo **Criar Máquina Virtual** é exibida.</span><span class="sxs-lookup"><span data-stu-id="1e837-108">The **Create Virtual Machine** dialog box appears.</span></span>
   
    ![][2]
5. <span data-ttu-id="1e837-109">Na caixa **nome DNS** , insira um nome para a máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="1e837-109">In the **DNS name** box, enter a name for the virtual machine.</span></span> <span data-ttu-id="1e837-110">O nome DNS deve ser exclusivo no Azure.</span><span class="sxs-lookup"><span data-stu-id="1e837-110">The DNS name must be unique in Azure.</span></span> <span data-ttu-id="1e837-111">Se o nome inserido não estiver disponível, um ponto de exclamação vermelho será exibido.</span><span class="sxs-lookup"><span data-stu-id="1e837-111">If the name you entered isn't available, a red exclamation point appears.</span></span>
6. <span data-ttu-id="1e837-112">Na lista **Imagem** , escolha a imagem em que você deseja basear a máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="1e837-112">In the **Image** list, choose the image you want to base the virtual machine on.</span></span> <span data-ttu-id="1e837-113">É possível escolher qualquer uma das imagens padrão da máquina virtual do Azure ou a sua imagem carregada no Azure.</span><span class="sxs-lookup"><span data-stu-id="1e837-113">You can choose any of the standard Azure virtual machine images or your image that you've uploaded to Azure.</span></span>
7. <span data-ttu-id="1e837-114">Deixe a caixa de seleção **Habilitar IIS e Implantação da Web** marcada, a menos que você pretenda instalar um servidor Web diferente.</span><span class="sxs-lookup"><span data-stu-id="1e837-114">Leave the **Enable IIS and Web Deploy** check box selected unless you plan to install a different web server.</span></span> <span data-ttu-id="1e837-115">Você não poderá publicar usando o Visual Studio se desabilitar a Implantação da Web.</span><span class="sxs-lookup"><span data-stu-id="1e837-115">You won't be able to publish from Visual Studio if you disable Web Deploy.</span></span> <span data-ttu-id="1e837-116">É possível adicionar IIS e Implantação da Web a qualquer uma das imagens do Windows Server no pacote, inclusive as próprias imagens.</span><span class="sxs-lookup"><span data-stu-id="1e837-116">You can add IIS and Web Deploy to any of the packaged Windows Server images, including your own custom images.</span></span>
8. <span data-ttu-id="1e837-117">Na lista **Tamanho** , escolha o tamanho da máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="1e837-117">In the **Size** list, choose the size of the virtual machine.</span></span>
9. <span data-ttu-id="1e837-118">Especifique as credenciais para entrar nesta máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="1e837-118">Specify the sign-in credentials for this virtual machine.</span></span> <span data-ttu-id="1e837-119">Anote-as porque você precisará delas para acessar a máquina por meio da Área de Trabalho Remota.</span><span class="sxs-lookup"><span data-stu-id="1e837-119">Make a note of them, because you'll need them to access the machine through Remote Desktop.</span></span>
10. <span data-ttu-id="1e837-120">Na lista **Local** , escolha a região para hospedar a máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="1e837-120">In the **Location** list, choose the region to host the virtual machine.</span></span>
11. <span data-ttu-id="1e837-121">Clique no botão **OK** para começar a criar a máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="1e837-121">Click  the **OK** button to start creating the virtual machine.</span></span> <span data-ttu-id="1e837-122">Você pode acompanhar o progresso da operação na janela **Saída** .</span><span class="sxs-lookup"><span data-stu-id="1e837-122">You can follow the progress of the operation in the **Output** window.</span></span>
    
    ![][3]
12. <span data-ttu-id="1e837-123">Quando a máquina virtual está provisionada, os scripts publicados são criados em um nó **PublishScripts** da solução.</span><span class="sxs-lookup"><span data-stu-id="1e837-123">When the virtual machine is provisioned, published scripts are created in a **PublishScripts** node in your solution.</span></span> <span data-ttu-id="1e837-124">O script publicado é executado e provisiona uma máquina virtual no Azure.</span><span class="sxs-lookup"><span data-stu-id="1e837-124">The published script runs and provisions a virtual machine in Azure.</span></span> <span data-ttu-id="1e837-125">A janela **Saída** mostra o status.</span><span class="sxs-lookup"><span data-stu-id="1e837-125">The **Output** window shows the status.</span></span> <span data-ttu-id="1e837-126">O script realiza as seguintes ações para configurar a máquina virtual:</span><span class="sxs-lookup"><span data-stu-id="1e837-126">The script performs the following actions to set up the virtual machine:</span></span>
    
    * <span data-ttu-id="1e837-127">Cria a máquina virtual, caso ela ainda não exista.</span><span class="sxs-lookup"><span data-stu-id="1e837-127">Creates the virtual machine if it doesn't already exist.</span></span>
    * <span data-ttu-id="1e837-128">Cria uma conta de armazenamento com um nome começando por `devtest`, mas apenas se ainda não houver uma conta de armazenamento assim na região especificada.</span><span class="sxs-lookup"><span data-stu-id="1e837-128">Creates a storage account with a name that begins with `devtest`, but only if there isn't already such a storage account in the specified region.</span></span>
    * <span data-ttu-id="1e837-129">Cria um serviço de nuvem como um contêiner para a máquina virtual e cria uma função Web para o aplicativo Web.</span><span class="sxs-lookup"><span data-stu-id="1e837-129">Creates a cloud service as a container for the virtual machine, and creates a web role for the web application.</span></span>
    * <span data-ttu-id="1e837-130">Configura a Implantação da Web na máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="1e837-130">Configures Web Deploy on the virtual machine.</span></span>
    * <span data-ttu-id="1e837-131">Configura IIS e ASP.NET na máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="1e837-131">Configures IIS and ASP.NET on the virtual machine.</span></span>
    
    ![][4]
13. <span data-ttu-id="1e837-132">(Opcional) Você pode se conectar à nova máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="1e837-132">(Optional) You can connect to the new virtual machine.</span></span> <span data-ttu-id="1e837-133">Em **Gerenciador de Servidores**, expanda o nó **Máquinas Virtuais**, escolha o nó para a máquina virtual que você criou e, no menu de atalho, escolha **Conectar-se com a Área de Trabalho Remota**.</span><span class="sxs-lookup"><span data-stu-id="1e837-133">In **Server Explorer**, expand the **Virtual Machines** node, choose the node for the virtual machine you created, and on its shortcut menu, choose **Connect with Remote Desktop**.</span></span> <span data-ttu-id="1e837-134">Como alternativa, no **Gerenciador de Nuvem**, escolha **Abrir no Portal** no menu de atalho e conecte-se à máquina virtual nesse local.</span><span class="sxs-lookup"><span data-stu-id="1e837-134">Alternatively, in **Cloud Explorer** you can choose **Open in Portal** on the shortcut menu and connect to the virtual machine there.</span></span>
    
    ![][5]

## <a name="next-steps"></a><span data-ttu-id="1e837-135">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="1e837-135">Next steps</span></span>
<span data-ttu-id="1e837-136">Se você quiser personalizar os scripts publicados que criou, leia informações mais detalhadas em [Usando Scripts do Windows PowerShell para publicar para ambientes de teste e desenvolvimento](http://msdn.microsoft.com/library/dn642480.aspx).</span><span class="sxs-lookup"><span data-stu-id="1e837-136">If you want to customize the published scripts you created, read more in-depth information at [Using Windows PowerShell Scripts to Publish to Dev and Test Environments](http://msdn.microsoft.com/library/dn642480.aspx).</span></span>

[0]: ./media/virtual-machines-common-classic-web-app-visual-studio/CreateVM_NewProject.PNG
[1]: ./media/dotnet-visual-studio-create-virtual-machine/CreateVM_SignIn.PNG
[2]: ./media/virtual-machines-common-classic-web-app-visual-studio/CreateVM_CreateVM.PNG
[3]: ./media/virtual-machines-common-classic-web-app-visual-studio/CreateVM_Provisioning.png
[4]: ./media/virtual-machines-common-classic-web-app-visual-studio/CreateVM_SolutionExplorer.png
[5]: ./media/virtual-machines-common-classic-web-app-visual-studio/VS_Create_VM_Connect.png
