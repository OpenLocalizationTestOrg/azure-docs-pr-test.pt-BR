

<span data-ttu-id="e9534-101">Existem dois níveis de balanceamento de carga para serviços de infraestrutura do Azure:</span><span class="sxs-lookup"><span data-stu-id="e9534-101">There are two levels of load balancing available for Azure infrastructure services:</span></span>

* <span data-ttu-id="e9534-102">**Nível de DNS**: balanceamento de carga para serviços de nuvem do tráfego toodifferent localizados em diferentes dados centers, toodifferent sites do Azure localizados em data centers diferentes ou tooexternal pontos de extremidade.</span><span class="sxs-lookup"><span data-stu-id="e9534-102">**DNS Level**:  Load balancing for traffic toodifferent cloud services located in different data centers, toodifferent Azure websites located in different data centers, or tooexternal endpoints.</span></span> <span data-ttu-id="e9534-103">Isso é feito com o Azure Traffic Manager e o método de balanceamento de carga de saudação Round Robin.</span><span class="sxs-lookup"><span data-stu-id="e9534-103">This is done with Azure Traffic Manager and hello Round Robin load balancing method.</span></span>
* <span data-ttu-id="e9534-104">**Nível de rede**: de entrada da Internet tráfego toodifferent máquinas virtuais de um serviço de nuvem de balanceamento de carga ou o balanceamento do tráfego entre máquinas virtuais em um serviço de nuvem ou rede virtual de carga.</span><span class="sxs-lookup"><span data-stu-id="e9534-104">**Network Level**:  Load balancing of incoming Internet traffic toodifferent virtual machines of a cloud service, or load balancing of traffic between virtual machines in a cloud service or virtual network.</span></span> <span data-ttu-id="e9534-105">Isso é feito com o balanceador de carga do Azure hello.</span><span class="sxs-lookup"><span data-stu-id="e9534-105">This is done with hello Azure load balancer.</span></span>

## <a name="traffic-manager-load-balancing-for-cloud-services-and-websites"></a><span data-ttu-id="e9534-106">Balanceamento de carga do Gerenciador de Tráfego para serviços de nuvem e sites</span><span class="sxs-lookup"><span data-stu-id="e9534-106">Traffic Manager load balancing for cloud services and websites</span></span>
<span data-ttu-id="e9534-107">Traffic Manager permite distribuição Olá toocontrol tooendpoints de tráfego do usuário, que pode incluir serviços de nuvem, sites, sites externos e outros perfis do Gerenciador de tráfego.</span><span class="sxs-lookup"><span data-stu-id="e9534-107">Traffic Manager allows you toocontrol hello distribution of user traffic tooendpoints, which can include cloud services, websites, external sites, and other Traffic Manager profiles.</span></span> <span data-ttu-id="e9534-108">O Traffic Manager funciona aplicando um consultas do sistema de nomes (DNS) de tooDomain do mecanismo de política inteligente Olá nomes de domínio dos recursos de Internet.</span><span class="sxs-lookup"><span data-stu-id="e9534-108">Traffic Manager works by applying an intelligent policy engine tooDomain Name System (DNS) queries for hello domain names of your Internet resources.</span></span> <span data-ttu-id="e9534-109">Os serviços de nuvem ou sites podem ser executados em diferentes datacenters no Olá, mundo.</span><span class="sxs-lookup"><span data-stu-id="e9534-109">Your cloud services or websites can be running in different datacenters across hello world.</span></span>

<span data-ttu-id="e9534-110">Você deve usar REST ou o Windows PowerShell tooconfigure pontos de extremidade externos ou perfis do Gerenciador de tráfego como pontos de extremidade.</span><span class="sxs-lookup"><span data-stu-id="e9534-110">You must use either REST or Windows PowerShell tooconfigure external endpoints or Traffic Manager profiles as endpoints.</span></span>

<span data-ttu-id="e9534-111">O Traffic Manager usa três balanceamento de carga de tráfego de toodistribute métodos:</span><span class="sxs-lookup"><span data-stu-id="e9534-111">Traffic Manager uses three load-balancing methods toodistribute traffic:</span></span>

* <span data-ttu-id="e9534-112">**Failover**: Use este método quando você deseja toouse um ponto de extremidade primário para todo o tráfego, mas fornece backups caso Olá primário fica indisponível.</span><span class="sxs-lookup"><span data-stu-id="e9534-112">**Failover**:  Use this method when you want toouse a primary endpoint for all traffic, but provide backups in case hello primary becomes unavailable.</span></span>
* <span data-ttu-id="e9534-113">**Desempenho**: Use este método quando tiver pontos de extremidade em diferentes locais geográficos e desejar solicitar clientes toouse hello "mais próximo" ponto de extremidade em termos de latência mais baixa hello.</span><span class="sxs-lookup"><span data-stu-id="e9534-113">**Performance**:  Use this method when you have endpoints in different geographic locations and you want requesting clients toouse hello "closest" endpoint in terms of hello lowest latency.</span></span>
* <span data-ttu-id="e9534-114">**Round Robin:** usar esse método quando desejar que os serviços de carga toodistribute em um conjunto de nuvem no hello mesmo datacenter ou em serviços de nuvem ou sites em data centers diferentes.</span><span class="sxs-lookup"><span data-stu-id="e9534-114">**Round Robin:**  Use this method when you want toodistribute load across a set of cloud services in hello same datacenter or across cloud services or websites in different datacenters.</span></span>

<span data-ttu-id="e9534-115">Para obter mais informações, consulte [Sobre métodos de balanceamento de carga do Gerenciador de Tráfego](../articles/traffic-manager/traffic-manager-routing-methods.md).</span><span class="sxs-lookup"><span data-stu-id="e9534-115">For more information, see [About Traffic Manager Load Balancing Methods](../articles/traffic-manager/traffic-manager-routing-methods.md).</span></span>

<span data-ttu-id="e9534-116">Olá diagrama a seguir mostra um exemplo de hello método de balanceamento de carga Round Robin para distribuir tráfego entre os diferentes serviços de nuvem.</span><span class="sxs-lookup"><span data-stu-id="e9534-116">hello following diagram shows an example of hello Round Robin load balancing method for distributing traffic between different cloud services.</span></span>

![loadbalancing](./media/virtual-machines-common-load-balance/TMSummary.png)

<span data-ttu-id="e9534-118">processo básico de saudação é seguir hello:</span><span class="sxs-lookup"><span data-stu-id="e9534-118">hello basic process is hello following:</span></span>

1. <span data-ttu-id="e9534-119">Um cliente da Internet consulta um serviço de web domínio nome correspondente tooa.</span><span class="sxs-lookup"><span data-stu-id="e9534-119">An Internet client queries a domain name corresponding tooa web service.</span></span>
2. <span data-ttu-id="e9534-120">DNS encaminha Olá nome consulta solicitação tooTraffic Manager.</span><span class="sxs-lookup"><span data-stu-id="e9534-120">DNS forwards hello name query request tooTraffic Manager.</span></span>
3. <span data-ttu-id="e9534-121">Gerenciador de tráfego escolhe Olá próximo serviço de nuvem no hello lista Round Robin e envia de volta Olá nome DNS.</span><span class="sxs-lookup"><span data-stu-id="e9534-121">Traffic Manager chooses hello next cloud service in hello Round Robin list and sends back hello DNS name.</span></span> <span data-ttu-id="e9534-122">servidor DNS do cliente de Internet Olá resolve o endereço IP do hello nome tooan e envia toohello cliente da Internet.</span><span class="sxs-lookup"><span data-stu-id="e9534-122">hello Internet client's DNS server resolves hello name tooan IP address and sends it toohello Internet client.</span></span>
4. <span data-ttu-id="e9534-123">Olá Internet se conecta ao serviço de nuvem Olá escolhido pelo Gerenciador de tráfego.</span><span class="sxs-lookup"><span data-stu-id="e9534-123">hello Internet client connects with hello cloud service chosen by Traffic Manager.</span></span>

<span data-ttu-id="e9534-124">Para obter mais informações, consulte [Gerenciador de Tráfego](../articles/traffic-manager/traffic-manager-overview.md).</span><span class="sxs-lookup"><span data-stu-id="e9534-124">For more information, see [Traffic Manager](../articles/traffic-manager/traffic-manager-overview.md).</span></span>

## <a name="azure-load-balancing-for-virtual-machines"></a><span data-ttu-id="e9534-125">Balanceamento de carga do Azure para máquinas virtuais</span><span class="sxs-lookup"><span data-stu-id="e9534-125">Azure load balancing for virtual machines</span></span>
<span data-ttu-id="e9534-126">Olá de máquinas virtuais no mesmo serviço de nuvem ou rede virtual pode se comunicar entre si diretamente usando seus endereços IP privados.</span><span class="sxs-lookup"><span data-stu-id="e9534-126">Virtual machines in hello same cloud service or virtual network can communicate with each other directly using their private IP addresses.</span></span> <span data-ttu-id="e9534-127">Computadores e serviços fora Olá serviço de nuvem ou rede virtual só pode se comunicar com máquinas virtuais em um serviço de nuvem ou rede virtual com um ponto de extremidade configurado.</span><span class="sxs-lookup"><span data-stu-id="e9534-127">Computers and services outside hello cloud service or virtual network can only communicate with virtual machines in a cloud service or virtual network with a configured endpoint.</span></span> <span data-ttu-id="e9534-128">Um ponto de extremidade é um mapeamento de um endereço IP público e a porta toothat endereço IP e porta de uma máquina virtual ou a função da web em um serviço de nuvem do Azure.</span><span class="sxs-lookup"><span data-stu-id="e9534-128">An endpoint is a mapping of a public IP address and port toothat private IP address and port of a virtual machine or web role within an Azure cloud service.</span></span>

<span data-ttu-id="e9534-129">Olá balanceador de carga do Azure distribui aleatoriamente um tipo específico de tráfego de entrada em várias máquinas virtuais ou serviços em uma configuração conhecida como um conjunto com balanceamento de carga.</span><span class="sxs-lookup"><span data-stu-id="e9534-129">hello Azure Load Balancer randomly distributes a specific type of incoming traffic across multiple virtual machines or services in a configuration known as a load-balanced set.</span></span> <span data-ttu-id="e9534-130">Por exemplo, você pode distribuir a carga de saudação do tráfego de solicitação da web em vários servidores web ou funções da web.</span><span class="sxs-lookup"><span data-stu-id="e9534-130">For example, you can spread hello load of web request traffic across multiple web servers or web roles.</span></span>

<span data-ttu-id="e9534-131">Olá diagrama a seguir mostra um ponto de extremidade com balanceamento de carga para tráfego web (sem criptografia) padrão que é compartilhado entre três máquinas virtuais para Olá pública e privada a porta TCP 80.</span><span class="sxs-lookup"><span data-stu-id="e9534-131">hello following diagram shows a load-balanced endpoint for standard (unencrypted) web traffic that is shared among three virtual machines for hello public and private TCP port of 80.</span></span> <span data-ttu-id="e9534-132">Essas três máquinas virtuais estão em um conjunto de balanceamento de carga.</span><span class="sxs-lookup"><span data-stu-id="e9534-132">These three virtual machines are in a load-balanced set.</span></span>

![loadbalancing](./media/virtual-machines-common-load-balance/LoadBalancing.png)

<span data-ttu-id="e9534-134">Para obter mais informações, consulte [Balanceador de carga do Azure](../articles/load-balancer/load-balancer-overview.md).</span><span class="sxs-lookup"><span data-stu-id="e9534-134">For more information, see [Azure Load Balancer](../articles/load-balancer/load-balancer-overview.md).</span></span> <span data-ttu-id="e9534-135">Para as etapas de saudação toocreate um conjunto com balanceamento de carga, consulte [configurar um conjunto com balanceamento de carga](../articles/load-balancer/load-balancer-get-started-internet-arm-ps.md).</span><span class="sxs-lookup"><span data-stu-id="e9534-135">For hello steps toocreate a load-balanced set, see [Configure a load-balanced set](../articles/load-balancer/load-balancer-get-started-internet-arm-ps.md).</span></span>

<span data-ttu-id="e9534-136">O Azure também pode balancear a carga dentro de um serviço de nuvem ou rede virtual.</span><span class="sxs-lookup"><span data-stu-id="e9534-136">Azure can also load balance within a cloud service or virtual network.</span></span> <span data-ttu-id="e9534-137">Isso é conhecido como balanceamento de carga interno e pode ser usado em Olá maneiras a seguir:</span><span class="sxs-lookup"><span data-stu-id="e9534-137">This is known as internal load balancing and can be used in hello following ways:</span></span>

* <span data-ttu-id="e9534-138">Saldo de tooload entre servidores em diferentes camadas de um aplicativo de várias camada (por exemplo, entre as camadas web e o banco de dados).</span><span class="sxs-lookup"><span data-stu-id="e9534-138">tooload balance between servers in different tiers of a multi-tier application (for example, between web and database tiers).</span></span>
* <span data-ttu-id="e9534-139">tooload saldo linha de negócios (LOB) aplicativos hospedados no Azure sem a necessidade de software ou hardware de Balanceador de carga adicional.</span><span class="sxs-lookup"><span data-stu-id="e9534-139">tooload balance line-of-business (LOB) applications hosted in Azure without requiring additional load balancer hardware or software.</span></span>
* <span data-ttu-id="e9534-140">tooinclude servidores locais no conjunto de saudação de computadores cujo tráfego tem a carga balanceada.</span><span class="sxs-lookup"><span data-stu-id="e9534-140">tooinclude on-premises servers in hello set of computers whose traffic is load balanced.</span></span>

<span data-ttu-id="e9534-141">Semelhante tooAzure balanceamento de carga e balanceamento de carga interno é facilitada pela configuração de um conjunto de balanceamento de carga interno.</span><span class="sxs-lookup"><span data-stu-id="e9534-141">Similar tooAzure load balancing, internal load balancing is facilitated by configuring an internal load-balanced set.</span></span>

<span data-ttu-id="e9534-142">Olá diagrama a seguir mostra um exemplo de um ponto de extremidade com balanceamento de carga interno para um aplicativo de linha de negócios (LOB) que é compartilhado entre três máquinas virtuais em uma rede virtual entre locais.</span><span class="sxs-lookup"><span data-stu-id="e9534-142">hello following diagram shows an example of an internal load-balanced endpoint for a line of business (LOB) application that is shared among three virtual machines in a cross-premises virtual network.</span></span>

![loadbalancing](./media/virtual-machines-common-load-balance/LOBServers.png)

## <a name="load-balancer-considerations"></a><span data-ttu-id="e9534-144">Considerações do Balanceador de carga</span><span class="sxs-lookup"><span data-stu-id="e9534-144">Load balancer considerations</span></span>
<span data-ttu-id="e9534-145">Um balanceador de carga é configurado por padrão tootimeout uma sessão ociosa em 4 minutos.</span><span class="sxs-lookup"><span data-stu-id="e9534-145">A load balancer is configured by default tootimeout an idle session in 4 minutes.</span></span> <span data-ttu-id="e9534-146">Se seu aplicativo por trás de um balanceador de carga deixa uma conexão ociosa por mais de 4 minutos, e ele não tem uma configuração de Keep-Alive, conexão hello será removida.</span><span class="sxs-lookup"><span data-stu-id="e9534-146">If your application behind a load balancer leaves a connection idle for more than 4 minutes and it doesn't have a Keep-Alive configuration, hello connection will be dropped.</span></span> <span data-ttu-id="e9534-147">Você pode alterar tooallow de comportamento de Balanceador de carga Olá um [mais configuração de tempo limite para o balanceador de carga do Azure](../articles/load-balancer/load-balancer-tcp-idle-timeout.md).</span><span class="sxs-lookup"><span data-stu-id="e9534-147">You can change hello load balancer behavior tooallow a [longer timeout setting for Azure load balancer](../articles/load-balancer/load-balancer-tcp-idle-timeout.md).</span></span>

<span data-ttu-id="e9534-148">Outra consideração é o tipo de saudação do modo de distribuição com suporte pelo Balanceador de carga do Azure.</span><span class="sxs-lookup"><span data-stu-id="e9534-148">Other consideration is hello type of distribution mode supported by Azure Load Balancer.</span></span> <span data-ttu-id="e9534-149">Você pode configurar a afinidade de IP de origem (IP de origem, IP de destino) ou o protocolo de IP de origem (IP de origem, IP de destino e protocolo).</span><span class="sxs-lookup"><span data-stu-id="e9534-149">You can configure source IP affinity (source IP, destination IP) or source IP protocol (source IP , destination IP and protocol).</span></span> <span data-ttu-id="e9534-150">Confira [Azure Load Balancer distribution mode (source IP affinity)](../articles/load-balancer/load-balancer-distribution-mode.md) para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="e9534-150">Check out [Azure Load Balancer distribution mode (source IP affinity)](../articles/load-balancer/load-balancer-distribution-mode.md) for more information.</span></span>

## <a name="next-steps"></a><span data-ttu-id="e9534-151">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="e9534-151">Next steps</span></span>
<span data-ttu-id="e9534-152">Para as etapas de saudação toocreate um conjunto com balanceamento de carga, consulte [configurar um conjunto de balanceamento de carga interno](../articles/load-balancer/load-balancer-get-started-ilb-arm-ps.md).</span><span class="sxs-lookup"><span data-stu-id="e9534-152">For hello steps toocreate a load-balanced set, see [Configure an internal load-balanced set](../articles/load-balancer/load-balancer-get-started-ilb-arm-ps.md).</span></span>

<span data-ttu-id="e9534-153">Para obter mais informações sobre o balanceador de carga, confira [Balanceamento de carga interno](../articles/load-balancer/load-balancer-internal-overview.md).</span><span class="sxs-lookup"><span data-stu-id="e9534-153">For more information about load balancer, see [Internal load balancing](../articles/load-balancer/load-balancer-internal-overview.md).</span></span>

