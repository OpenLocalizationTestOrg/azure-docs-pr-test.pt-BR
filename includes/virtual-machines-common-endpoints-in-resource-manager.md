<span data-ttu-id="eeb97-101">pontos de extremidade do Hello abordagem tooAzure funciona um pouco diferente entre os modelos de implantação clássico e o Gerenciador de recursos de saudação.</span><span class="sxs-lookup"><span data-stu-id="eeb97-101">hello approach tooAzure endpoints works a little differently between hello Classic and Resource Manager deployment models.</span></span> <span data-ttu-id="eeb97-102">Modelo de implantação do Gerenciador de recursos de hello, agora você tem Olá flexibilidade toocreate filtros de rede que controlam o fluxo de saudação do tráfego dentro e fora de suas VMs.</span><span class="sxs-lookup"><span data-stu-id="eeb97-102">In hello Resource Manager deployment model, you now have hello flexibility toocreate network filters that control hello flow of traffic in and out of your VMs.</span></span> <span data-ttu-id="eeb97-103">Esses filtros permitem que você os ambientes de rede complexos toocreate além de um ponto de extremidade simple, como no modelo de implantação clássico hello.</span><span class="sxs-lookup"><span data-stu-id="eeb97-103">These filters allow you toocreate complex networking environments beyond a simple endpoint as in hello Classic deployment model.</span></span> <span data-ttu-id="eeb97-104">Este artigo fornece uma visão geral dos Grupos de Segurança de Rede e como eles são diferentes da utilização de pontos de extremidade Clássicos, criando regras de filtragem e exemplos de cenários de implantação.</span><span class="sxs-lookup"><span data-stu-id="eeb97-104">This article provides an overview of Network Security Groups and how they differ from using Classic endpoints, creating these filtering rules, and sample deployment scenarios.</span></span>

## <a name="overview-of-resource-manager-deployments"></a><span data-ttu-id="eeb97-105">Visão geral das implantações do Resource Manager</span><span class="sxs-lookup"><span data-stu-id="eeb97-105">Overview of Resource Manager deployments</span></span>
<span data-ttu-id="eeb97-106">Pontos de extremidade no modelo de implantação clássico Olá são substituídos por grupos de segurança de rede e regras ACL (lista) de controle de acesso.</span><span class="sxs-lookup"><span data-stu-id="eeb97-106">Endpoints in hello Classic deployment model are replaced by Network Security Groups and access control list (ACL) rules.</span></span> <span data-ttu-id="eeb97-107">As etapas rápidas para implementação de regras de ACL de Grupo de Segurança de Rede são:</span><span class="sxs-lookup"><span data-stu-id="eeb97-107">Quick steps for implementing Network Security Group ACL rules are:</span></span>

* <span data-ttu-id="eeb97-108">Criará um Grupo de Segurança de Rede.</span><span class="sxs-lookup"><span data-stu-id="eeb97-108">Create a Network Security Group.</span></span>
* <span data-ttu-id="eeb97-109">tooallow ou negar o tráfego, defina as regras de ACL de grupo de segurança de rede.</span><span class="sxs-lookup"><span data-stu-id="eeb97-109">tooallow or deny traffic, define your Network Security Group ACL rules.</span></span>
* <span data-ttu-id="eeb97-110">Atribua sua interface de rede de tooa do grupo de segurança de rede ou sub-rede da rede virtual.</span><span class="sxs-lookup"><span data-stu-id="eeb97-110">Assign your Network Security Group tooa network interface or virtual network subnet.</span></span>

<span data-ttu-id="eeb97-111">Se você está precisando tooalso executar encaminhamento de porta, você precisa tooplace um balanceador de carga na frente de sua VM e usa regras NAT.</span><span class="sxs-lookup"><span data-stu-id="eeb97-111">If you are wanting tooalso perform port-forwarding, you need tooplace a load balancer in front of your VM and use NAT rules.</span></span> <span data-ttu-id="eeb97-112">As etapas rápidas para implementar regras de NAT e um balanceador de carga seriam as seguintes:</span><span class="sxs-lookup"><span data-stu-id="eeb97-112">Quick steps for implementing a load balancer and NAT rules would be as follows:</span></span>

* <span data-ttu-id="eeb97-113">Criar um balanceador de carga.</span><span class="sxs-lookup"><span data-stu-id="eeb97-113">Create a load balancer.</span></span>
* <span data-ttu-id="eeb97-114">Criar um pool de back-end e adicione o pool de toohello de VMs.</span><span class="sxs-lookup"><span data-stu-id="eeb97-114">Create a backend pool and add your VMs toohello pool.</span></span>
* <span data-ttu-id="eeb97-115">Defina regras de NAT para encaminhamento de porta Olá necessário.</span><span class="sxs-lookup"><span data-stu-id="eeb97-115">Define your NAT rules for hello required port forwarding.</span></span>
* <span data-ttu-id="eeb97-116">Atribua regras NAT tooyour VMs.</span><span class="sxs-lookup"><span data-stu-id="eeb97-116">Assign your NAT rules tooyour VMs.</span></span>

## <a name="network-security-group-overview"></a><span data-ttu-id="eeb97-117">Visão geral do Grupo de Segurança de Rede</span><span class="sxs-lookup"><span data-stu-id="eeb97-117">Network Security Group overview</span></span>
<span data-ttu-id="eeb97-118">Grupos de segurança de rede fornecem uma camada de segurança para você portas específicas tooallow e sub-redes tooaccess suas VMs.</span><span class="sxs-lookup"><span data-stu-id="eeb97-118">Network Security Groups provide a layer of security for you tooallow specific ports and subnets tooaccess your VMs.</span></span> <span data-ttu-id="eeb97-119">Você normalmente sempre tem um grupo de segurança de rede fornecendo essa camada de segurança entre suas máquinas virtuais e Olá fora do mundo.</span><span class="sxs-lookup"><span data-stu-id="eeb97-119">You typically always have a Network Security Group providing this layer of security between your VMs and hello outside world.</span></span> <span data-ttu-id="eeb97-120">Grupos de segurança de rede podem ser aplicadas tooa sub-rede da rede virtual ou uma interface de rede específico para uma máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="eeb97-120">Network Security Groups can be applied tooa virtual network subnet or a specific network interface for a VM.</span></span> <span data-ttu-id="eeb97-121">Em vez de criar regras de ACL do ponto de extremidade, agora é possível criar regras de ACL de Grupo de Segurança de Rede.</span><span class="sxs-lookup"><span data-stu-id="eeb97-121">Rather than creating endpoint ACL rules, you now create Network Security Group ACL rules.</span></span> <span data-ttu-id="eeb97-122">Essas regras ACL fornecem muito controle maior do que simplesmente criar um ponto de extremidade tooforward uma determinada porta.</span><span class="sxs-lookup"><span data-stu-id="eeb97-122">These ACL rules provide much greater control than simply creating an endpoint tooforward a given port.</span></span> <span data-ttu-id="eeb97-123">Para obter mais informações, confira [O que é um Grupo de Segurança de Rede?](../articles/virtual-network/virtual-networks-nsg.md)</span><span class="sxs-lookup"><span data-stu-id="eeb97-123">For more information, see [What is a Network Security Group?](../articles/virtual-network/virtual-networks-nsg.md)</span></span>

> [!TIP]
> <span data-ttu-id="eeb97-124">Você pode atribuir sub-redes de toomultiple de grupos de segurança de rede ou interfaces de rede.</span><span class="sxs-lookup"><span data-stu-id="eeb97-124">You can assign Network Security Groups toomultiple subnets or network interfaces.</span></span> <span data-ttu-id="eeb97-125">Não há mapeamento 1:1.</span><span class="sxs-lookup"><span data-stu-id="eeb97-125">There is no 1:1 mapping.</span></span> <span data-ttu-id="eeb97-126">Você pode criar um grupo de segurança de rede com um conjunto comum de regras de ACL e aplique toomultiple sub-redes ou interfaces de rede.</span><span class="sxs-lookup"><span data-stu-id="eeb97-126">You can create a Network Security Group with a common set of ACL rules and apply toomultiple subnets or network interfaces.</span></span> <span data-ttu-id="eeb97-127">Além disso, o grupo de segurança de rede pode ser tooresources aplicados em sua assinatura (com base em [controles de acesso com base em função](../articles/active-directory/role-based-access-control-what-is.md).</span><span class="sxs-lookup"><span data-stu-id="eeb97-127">Further, Network Security Group can be applied tooresources across your subscription (based on [Role Based Access Controls](../articles/active-directory/role-based-access-control-what-is.md).</span></span>

## <a name="load-balancers-overview"></a><span data-ttu-id="eeb97-128">Visão geral do balanceador de carga</span><span class="sxs-lookup"><span data-stu-id="eeb97-128">Load Balancers overview</span></span>
<span data-ttu-id="eeb97-129">No modelo de implantação clássico hello, o Azure seria executar todos os Olá conversão de endereço de rede (NAT) e porta encaminhamento de um serviço de nuvem para você.</span><span class="sxs-lookup"><span data-stu-id="eeb97-129">In hello Classic deployment model, Azure would perform all hello Network Address Translation (NAT) and port forwarding on a Cloud Service for you.</span></span> <span data-ttu-id="eeb97-130">Ao criar um ponto de extremidade, você especificaria Olá porta externa tooexpose juntamente com hello porta interna toodirect tráfego.</span><span class="sxs-lookup"><span data-stu-id="eeb97-130">When creating an endpoint, you would specify hello external port tooexpose along with hello internal port toodirect traffic to.</span></span> <span data-ttu-id="eeb97-131">Os Grupos de Segurança de Rede por si só não executam essa mesma NAT e o encaminhamento de porta.</span><span class="sxs-lookup"><span data-stu-id="eeb97-131">Network Security Groups by themselves do not perform this same NAT and port forwarding.</span></span> 

<span data-ttu-id="eeb97-132">tooallow você toocreate as regras de NAT para essa porta de encaminhamento, crie um balanceador de carga do Azure no seu grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="eeb97-132">tooallow you toocreate NAT rules for such port forwarding, create an Azure load balancer in your resource group.</span></span> <span data-ttu-id="eeb97-133">Novamente, o balanceador de carga de saudação é granular suficiente tooonly aplicar toospecific VMs, se necessário.</span><span class="sxs-lookup"><span data-stu-id="eeb97-133">Again, hello load balancer is granular enough tooonly apply toospecific VMs if needed.</span></span> <span data-ttu-id="eeb97-134">Hello Azure carga de trabalho de regras NAT de Balanceador junto com tooprovide de regras de ACL de grupo de segurança de rede muito mais flexibilidade e controle que era possível usar pontos de extremidade de serviço de nuvem.</span><span class="sxs-lookup"><span data-stu-id="eeb97-134">hello Azure load balancer NAT rules work alongside Network Security Group ACL rules tooprovide much more flexibility and control than was achievable using Cloud Service endpoints.</span></span> <span data-ttu-id="eeb97-135">Para obter mais informações, consulte Olá [visão geral do balanceador de carga](../articles/load-balancer/load-balancer-overview.md).</span><span class="sxs-lookup"><span data-stu-id="eeb97-135">For more information, see hello [load balancer overview](../articles/load-balancer/load-balancer-overview.md).</span></span>

## <a name="network-security-group-acl-rules"></a><span data-ttu-id="eeb97-136">Regras de ACL de Grupo de Segurança de Rede</span><span class="sxs-lookup"><span data-stu-id="eeb97-136">Network Security Group ACL rules</span></span>
<span data-ttu-id="eeb97-137">As regras de ACL permitem que você defina o tráfego que pode fluir dentro e fora de sua VM com base em protocolos, intervalos de porta ou portas específicas.</span><span class="sxs-lookup"><span data-stu-id="eeb97-137">ACL rules let you define what traffic can flow in and out of your VM based on specific ports, port ranges, or protocols.</span></span> <span data-ttu-id="eeb97-138">As regras são atribuídas tooindividual VMs ou sub-rede tooa.</span><span class="sxs-lookup"><span data-stu-id="eeb97-138">Rules are assigned tooindividual VMs or tooa subnet.</span></span> <span data-ttu-id="eeb97-139">Olá captura de tela a seguir está um exemplo de regras ACL para um servidor da Web comuns:</span><span class="sxs-lookup"><span data-stu-id="eeb97-139">hello following screenshot is an example of ACL rules for a common webserver:</span></span>

![Lista de regras de ACL de Grupo de Segurança de Rede](./media/virtual-machines-common-endpoints-in-resource-manager/example-acl-rules.png)

<span data-ttu-id="eeb97-141">Regras de ACL são aplicadas com base em uma métrica de prioridade que você especificar - valor mais alto de Olá Olá, prioridade inferior a Olá Olá.</span><span class="sxs-lookup"><span data-stu-id="eeb97-141">ACL rules are applied based on a priority metric that you specify - hello higher hello value, hello lower hello priority.</span></span> <span data-ttu-id="eeb97-142">Cada grupo de segurança de rede tem três padrão as regras que são criadas toohandle fluxo de saudação do tráfego de rede do Azure, com uma explícita `DenyAllInbound` como regra final hello.</span><span class="sxs-lookup"><span data-stu-id="eeb97-142">Every Network Security Group has three default rules that are designed toohandle hello flow of Azure networking traffic, with an explicit `DenyAllInbound` as hello final rule.</span></span> <span data-ttu-id="eeb97-143">Regras ACL padrão são fornecido um toonot de baixa prioridade interferir com as regras que você criar.</span><span class="sxs-lookup"><span data-stu-id="eeb97-143">Default ACL rules are given a low priority toonot interfere with rules you create.</span></span>

## <a name="assigning-network-security-groups"></a><span data-ttu-id="eeb97-144">Atribuição dos Grupos de Segurança de Rede</span><span class="sxs-lookup"><span data-stu-id="eeb97-144">Assigning Network Security Groups</span></span>
<span data-ttu-id="eeb97-145">Você atribui uma sub-rede de tooa do grupo de segurança de rede ou uma interface de rede.</span><span class="sxs-lookup"><span data-stu-id="eeb97-145">You assign a Network Security Group tooa subnet or a network interface.</span></span> <span data-ttu-id="eeb97-146">Essa abordagem permite que você toobe como granular conforme necessário ao aplicar a ACL regras tooonly uma VM específica, ou certifique-se de um conjunto comum de ACL de regras são aplicada tooall VMs parte de uma sub-rede:</span><span class="sxs-lookup"><span data-stu-id="eeb97-146">This approach allows you toobe as granular as needed when applying your ACL rules tooonly a specific VM, or ensure a common set of ACL rules are applied tooall VMs part of a subnet:</span></span>

![Aplicar os NSGs toonetwork interfaces ou sub-redes](./media/virtual-machines-common-endpoints-in-resource-manager/apply-nsg-to-resources.png)

<span data-ttu-id="eeb97-148">comportamento de saudação do grupo de segurança de rede de saudação não mudar dependendo do que está sendo atribuído a uma interface de rede ou sub-rede tooa.</span><span class="sxs-lookup"><span data-stu-id="eeb97-148">hello behavior of hello Network Security Group doesn't change depending on being assigned tooa subnet or a network interface.</span></span> <span data-ttu-id="eeb97-149">Um cenário de implantação comum tem Olá que grupo de segurança de rede atribuído tooa conformidade de tooensure de sub-rede da sub-rede de toothat anexado todas as VMs.</span><span class="sxs-lookup"><span data-stu-id="eeb97-149">A common deployment scenario has hello Network Security Group assigned tooa subnet tooensure compliance of all VMs attached toothat subnet.</span></span> <span data-ttu-id="eeb97-150">Para obter mais informações, consulte [aplicar segurança de rede grupos tooresources](../articles/virtual-network/virtual-networks-nsg.md#associating-nsgs).</span><span class="sxs-lookup"><span data-stu-id="eeb97-150">For more information, see [applying Network Security groups tooresources](../articles/virtual-network/virtual-networks-nsg.md#associating-nsgs).</span></span>

## <a name="default-behavior-of-network-security-groups"></a><span data-ttu-id="eeb97-151">Comportamento padrão dos Grupos de Segurança de Rede</span><span class="sxs-lookup"><span data-stu-id="eeb97-151">Default behavior of Network Security Groups</span></span>
<span data-ttu-id="eeb97-152">Dependendo de como e quando você cria o grupo de segurança de rede, as regras padrão podem ser criadas para acesso RDP toopermit VMs do Windows na porta TCP 3389.</span><span class="sxs-lookup"><span data-stu-id="eeb97-152">Depending on how and when you create your Network Security Group, default rules may be created for Windows VMs toopermit RDP access on TCP port 3389.</span></span> <span data-ttu-id="eeb97-153">Regras padrão para as VMs do Linux permitem o acesso SSH na porta TCP 22.</span><span class="sxs-lookup"><span data-stu-id="eeb97-153">Default rules for Linux VMs permit SSH access on TCP port 22.</span></span> <span data-ttu-id="eeb97-154">Essas regras ACL automática são criadas em Olá condições a seguir:</span><span class="sxs-lookup"><span data-stu-id="eeb97-154">These automatic ACL rules are created under hello following conditions:</span></span>

* <span data-ttu-id="eeb97-155">Se você criar uma VM do Windows por meio do portal hello e aceita o saudação padrão ação toocreate um grupo de segurança de rede, uma ACL regra tooallow a porta TCP 3389 (RDP) é criada.</span><span class="sxs-lookup"><span data-stu-id="eeb97-155">If you create a Windows VM through hello portal and accept hello default action toocreate a Network Security Group, an ACL rule tooallow TCP port 3389 (RDP) is created.</span></span>
* <span data-ttu-id="eeb97-156">Se você criar uma VM do Linux por meio do portal hello e aceita o saudação padrão ação toocreate um grupo de segurança de rede, uma ACL regra tooallow a porta TCP 22 (SSH) é criada.</span><span class="sxs-lookup"><span data-stu-id="eeb97-156">If you create a Linux VM through hello portal and accept hello default action toocreate a Network Security Group, an ACL rule tooallow TCP port 22 (SSH) is created.</span></span>

<span data-ttu-id="eeb97-157">Em todas as outras condições, essas regras ACL padrão não são criadas.</span><span class="sxs-lookup"><span data-stu-id="eeb97-157">Under all other conditions, these default ACL rules are not created.</span></span> <span data-ttu-id="eeb97-158">Você não pode se conectar tooyour VM sem criar hello regras de ACL apropriadas.</span><span class="sxs-lookup"><span data-stu-id="eeb97-158">You cannot connect tooyour VM without creating hello appropriate ACL rules.</span></span> <span data-ttu-id="eeb97-159">Essas condições incluem hello ações comuns a seguir:</span><span class="sxs-lookup"><span data-stu-id="eeb97-159">These conditions include hello following common actions:</span></span>

* <span data-ttu-id="eeb97-160">Criando um grupo de segurança de rede por meio do portal hello como saudação de toocreating uma ação separada VM.</span><span class="sxs-lookup"><span data-stu-id="eeb97-160">Creating a Network Security Group through hello portal as a separate action toocreating hello VM.</span></span>
* <span data-ttu-id="eeb97-161">Criação de um Grupo de Segurança de Rede por meio de programação no PowerShell, na CLI do Azure, APIs Rest etc.</span><span class="sxs-lookup"><span data-stu-id="eeb97-161">Creating a Network Security Group programmatically through PowerShell, Azure CLI, Rest APIs, etc.</span></span>
* <span data-ttu-id="eeb97-162">Criar uma VM e atribuí-la tooan existentes do grupo de segurança de rede que ainda não tem regra ACL apropriada Olá definida.</span><span class="sxs-lookup"><span data-stu-id="eeb97-162">Creating a VM and assigning it tooan existing Network Security Group that does not already have hello appropriate ACL rule defined.</span></span>

<span data-ttu-id="eeb97-163">Olá todos os anteriores casos, é necessário toocreate regras de ACL para as conexões do VM tooallow Olá apropriada de gerenciamento remoto.</span><span class="sxs-lookup"><span data-stu-id="eeb97-163">In all hello preceding cases, you need toocreate ACL rules for your VM tooallow hello appropriate remote management connections.</span></span>

## <a name="default-behavior-of-a-vm-without-a-network-security-group"></a><span data-ttu-id="eeb97-164">Comportamento padrão de uma VM sem um Grupo de Segurança de Rede</span><span class="sxs-lookup"><span data-stu-id="eeb97-164">Default behavior of a VM without a Network Security Group</span></span>
<span data-ttu-id="eeb97-165">Você pode criar uma VM sem criar um Grupo de Segurança de Rede.</span><span class="sxs-lookup"><span data-stu-id="eeb97-165">You can create a VM without creating a Network Security Group.</span></span> <span data-ttu-id="eeb97-166">Nessas situações, você pode se conectar a tooyour VM usando o RDP ou SSH sem criar regras ACL.</span><span class="sxs-lookup"><span data-stu-id="eeb97-166">In these situations, you can connect tooyour VM using RDP or SSH without creating any ACL rules.</span></span> <span data-ttu-id="eeb97-167">Da mesma forma, se você instalou um serviço Web na porta 80, esse serviço pode ser acessado automaticamente remotamente.</span><span class="sxs-lookup"><span data-stu-id="eeb97-167">Similarly, if you installed a web service on port 80, that service is automatically accessible remotely.</span></span> <span data-ttu-id="eeb97-168">Olá VM tem todas as portas abertas.</span><span class="sxs-lookup"><span data-stu-id="eeb97-168">hello VM has all ports open.</span></span>

> [!NOTE]
> <span data-ttu-id="eeb97-169">Você ainda precisa toohave um público tooa de endereço atribuído de IP VM para que conexões remotas.</span><span class="sxs-lookup"><span data-stu-id="eeb97-169">You still need toohave a public IP address assigned tooa VM in order for any remote connections.</span></span> <span data-ttu-id="eeb97-170">Não tem um grupo de segurança de rede para interface de rede ou sub-rede Olá não expõe o tráfego Olá VM tooany externo.</span><span class="sxs-lookup"><span data-stu-id="eeb97-170">Not having a Network Security Group for hello subnet or network interface doesn't expose hello VM tooany external traffic.</span></span> <span data-ttu-id="eeb97-171">ação de padrão de saudação ao criar uma VM por meio do portal Olá é toocreate um novo IP público.</span><span class="sxs-lookup"><span data-stu-id="eeb97-171">hello default action when creating a VM through hello portal is toocreate a new public IP.</span></span> <span data-ttu-id="eeb97-172">Para todas as outras formas de criação de uma VM, como o PowerShell, CLI do Azure ou o modelo do Resource Manager, um IP público não será criado automaticamente se não tiver sido solicitado explicitamente.</span><span class="sxs-lookup"><span data-stu-id="eeb97-172">For all other forms of creating a VM such as PowerShell, Azure CLI, or Resource Manager template, a public IP is not automatically created unless explicitly requested.</span></span> <span data-ttu-id="eeb97-173">ação de padrão de saudação por meio do portal Olá também é toocreate um grupo de segurança de rede.</span><span class="sxs-lookup"><span data-stu-id="eeb97-173">hello default action through hello portal is also toocreate a Network Security Group.</span></span> <span data-ttu-id="eeb97-174">Essa ação padrão significa que você não deve terminar em uma situação com uma VM exposta sem uma rede de filtragem em vigor.</span><span class="sxs-lookup"><span data-stu-id="eeb97-174">This default action means you shouldn't end up in a situation with an exposed VM that has no network filtering in place.</span></span>

## <a name="understanding-load-balancers-and-nat-rules"></a><span data-ttu-id="eeb97-175">Noções básicas sobre regras de NAT e balanceadores de carga</span><span class="sxs-lookup"><span data-stu-id="eeb97-175">Understanding Load Balancers and NAT rules</span></span>
<span data-ttu-id="eeb97-176">No modelo de implantação clássico hello, você pode criar pontos de extremidade que também realizadas encaminhamento de porta.</span><span class="sxs-lookup"><span data-stu-id="eeb97-176">In hello Classic deployment model, you could create endpoints that also performed port forwarding.</span></span> <span data-ttu-id="eeb97-177">Quando você cria uma máquina virtual no modelo de implantação clássico hello, regras de ACL para RDP ou SSH seriam criadas automaticamente.</span><span class="sxs-lookup"><span data-stu-id="eeb97-177">When you create a VM in hello Classic deployment model, ACL rules for RDP or SSH would be automatically created.</span></span> <span data-ttu-id="eeb97-178">Essas regras não exporá a porta TCP 3389 ou a porta TCP 22 respectivamente toohello fora do mundo.</span><span class="sxs-lookup"><span data-stu-id="eeb97-178">These rules would not expose TCP port 3389 or TCP port 22 respectively toohello outside world.</span></span> <span data-ttu-id="eeb97-179">Em vez disso, uma porta TCP de grande valor estariam exposta que mapeia a porta interna apropriado de toohello.</span><span class="sxs-lookup"><span data-stu-id="eeb97-179">Instead, a high-value TCP port would be exposed that maps toohello appropriate internal port.</span></span> <span data-ttu-id="eeb97-180">Você também pode criar suas próprias regras ACL de maneira semelhante, como expor um servidor Web em TCP porta toohello 4280 fora do mundo.</span><span class="sxs-lookup"><span data-stu-id="eeb97-180">You could also create your own ACL rules in a similar manner, such as expose a webserver on TCP port 4280 toohello outside world.</span></span> <span data-ttu-id="eeb97-181">Você pode ver essas regras ACL e mapeamentos de porta no hello captura de tela a seguir no portal clássico de saudação:</span><span class="sxs-lookup"><span data-stu-id="eeb97-181">You can see these ACL rules and port mappings in hello following screenshot from hello Classic portal:</span></span>

![Encaminhamento de porta com pontos de extremidade Clássicos](./media/virtual-machines-common-endpoints-in-resource-manager/classic-endpoints-port-forwarding.png)

<span data-ttu-id="eeb97-183">Com os Grupos de Segurança de Rede, essa função de encaminhamento de porta é tratada por um balanceador de carga.</span><span class="sxs-lookup"><span data-stu-id="eeb97-183">With Network Security Groups, that port-forwarding function is handled by a load balancer.</span></span> <span data-ttu-id="eeb97-184">Para obter mais informações, confira [balanceadores de carga no Azure](../articles/load-balancer/load-balancer-overview.md).</span><span class="sxs-lookup"><span data-stu-id="eeb97-184">For more information, see [load balancers in Azure](../articles/load-balancer/load-balancer-overview.md).</span></span> <span data-ttu-id="eeb97-185">Olá exemplo a seguir mostra um balanceador de carga com um NAT regra tooperform encaminhamento de porta TCP porta 4222 toohello interno a porta TCP 22 uma VM:</span><span class="sxs-lookup"><span data-stu-id="eeb97-185">hello following example shows a load balancer with a NAT rule tooperform port-forwarding TCP port 4222 toohello internal TCP port 22 a VM:</span></span>

![Regras NAT do Balanceador de carga para encaminhamento de porta](./media/virtual-machines-common-endpoints-in-resource-manager/load-balancer-nat-rules.png)

> [!NOTE]
> <span data-ttu-id="eeb97-187">Quando você implementa um balanceador de carga, você normalmente não atribuir Olá própria máquina virtual um endereço IP público.</span><span class="sxs-lookup"><span data-stu-id="eeb97-187">When you implement a load balancer, you typically don't assign hello VM itself a public IP address.</span></span> <span data-ttu-id="eeb97-188">Em vez disso, o balanceador de carga Olá tem um tooit de endereço atribuído de IP público.</span><span class="sxs-lookup"><span data-stu-id="eeb97-188">Instead, hello load balancer has a public IP address assigned tooit.</span></span> <span data-ttu-id="eeb97-189">Você ainda precisa toocreate seu grupo de segurança de rede e ACL regras toodefine Olá o fluxo de tráfego dentro e fora de sua VM.</span><span class="sxs-lookup"><span data-stu-id="eeb97-189">You still need toocreate your Network Security Group and ACL rules toodefine hello flow of traffic in and out of your VM.</span></span> <span data-ttu-id="eeb97-190">Olá, regras de NAT de Balanceador de carga são simplesmente toodefine quais portas são permitidas por meio do balanceador de carga hello e como obter distribuídos entre VMs de back-end hello.</span><span class="sxs-lookup"><span data-stu-id="eeb97-190">hello load balancer NAT rules are simply toodefine what ports are allowed through hello load balancer and how they get distributed across hello backend VMs.</span></span> <span data-ttu-id="eeb97-191">Como tal, você precisa toocreate uma regra NAT para tráfego tooflow pelo Balanceador de carga de saudação.</span><span class="sxs-lookup"><span data-stu-id="eeb97-191">As such, you need toocreate a NAT rule for traffic tooflow through hello load balancer.</span></span> <span data-ttu-id="eeb97-192">saudação de tooreach de tráfego do tooallow Olá VM, criar uma regra de ACL de grupo de segurança de rede.</span><span class="sxs-lookup"><span data-stu-id="eeb97-192">tooallow hello traffic tooreach hello VM, create a Network Security Group ACL rule.</span></span>
