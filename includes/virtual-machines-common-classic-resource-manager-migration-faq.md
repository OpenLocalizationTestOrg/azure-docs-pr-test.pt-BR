# <a name="frequently-asked-questions-about-classic-to-azure-resource-manager-migration"></a><span data-ttu-id="5630e-101">Perguntas frequentes sobre a migração clássica para a migração do Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="5630e-101">Frequently asked questions about classic to Azure Resource Manager migration</span></span>

## <a name="does-this-migration-plan-affect-any-of-my-existing-services-or-applications-that-run-on-azure-virtual-machines"></a><span data-ttu-id="5630e-102">Este plano de migração afeta qualquer um de meus serviços existentes ou aplicativos executados em máquinas virtuais do Azure?</span><span class="sxs-lookup"><span data-stu-id="5630e-102">Does this migration plan affect any of my existing services or applications that run on Azure virtual machines?</span></span> 

<span data-ttu-id="5630e-103">Não.</span><span class="sxs-lookup"><span data-stu-id="5630e-103">No.</span></span> <span data-ttu-id="5630e-104">As VMs (clássicas) são serviços com suporte total na disponibilidade geral.</span><span class="sxs-lookup"><span data-stu-id="5630e-104">The VMs (classic) are fully supported services in general availability.</span></span> <span data-ttu-id="5630e-105">É possível continuar usando esses recursos para expandir seu volume no Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="5630e-105">You can continue to use these resources to expand your footprint on Microsoft Azure.</span></span>

## <a name="what-happens-to-my-vms-if-i-dont-plan-on-migrating-in-the-near-future"></a><span data-ttu-id="5630e-106">O que acontecerá com minhas VMs se eu não planejar a migração no futuro próximo?</span><span class="sxs-lookup"><span data-stu-id="5630e-106">What happens to my VMs if I don’t plan on migrating in the near future?</span></span> 

<span data-ttu-id="5630e-107">Não estamos preterindo as APIs clássicas e o modelo de recursos existentes.</span><span class="sxs-lookup"><span data-stu-id="5630e-107">We are not deprecating the existing classic APIs and resource model.</span></span> <span data-ttu-id="5630e-108">Queremos simplificar a migração, considerando os recursos avançados disponíveis no modelo de implantação do Gerenciador de Recursos.</span><span class="sxs-lookup"><span data-stu-id="5630e-108">We want to make migration easy, considering the advanced features that are available in the Resource Manager deployment model.</span></span> <span data-ttu-id="5630e-109">É altamente recomendável que você examine [alguns dos avanços feitos](../articles/azure-resource-manager/resource-manager-deployment-model.md) como parte do IaaS no Gerenciador de Recursos.</span><span class="sxs-lookup"><span data-stu-id="5630e-109">We highly recommend that you review [some of the advancements](../articles/azure-resource-manager/resource-manager-deployment-model.md) that are part of IaaS under Resource Manager.</span></span>

## <a name="what-does-this-migration-plan-mean-for-my-existing-tooling"></a><span data-ttu-id="5630e-110">O que este plano de migração significa para minhas ferramentas existentes?</span><span class="sxs-lookup"><span data-stu-id="5630e-110">What does this migration plan mean for my existing tooling?</span></span> 

<span data-ttu-id="5630e-111">Atualizar suas ferramentas para o modelo de implantação do Gerenciador de Recursos é uma das alterações mais importantes que você precisa considerar em seus planos de migração.</span><span class="sxs-lookup"><span data-stu-id="5630e-111">Updating your tooling to the Resource Manager deployment model is one of the most important changes that you have to account for in your migration plans.</span></span>

## <a name="how-long-will-the-management-plane-downtime-be"></a><span data-ttu-id="5630e-112">O tempo de inatividade do plano de gerenciamento será de quanto tempo?</span><span class="sxs-lookup"><span data-stu-id="5630e-112">How long will the management-plane downtime be?</span></span> 

<span data-ttu-id="5630e-113">Isso depende do número de recursos que estão sendo migrados.</span><span class="sxs-lookup"><span data-stu-id="5630e-113">It depends on the number of resources that are being migrated.</span></span> <span data-ttu-id="5630e-114">Para implantações menores (algumas dezenas de VMs), a migração inteira deverá levar menos de uma hora.</span><span class="sxs-lookup"><span data-stu-id="5630e-114">For smaller deployments (a few tens of VMs), the whole migration should take less than an hour.</span></span> <span data-ttu-id="5630e-115">Para implantações de larga escala (centenas de VMs), a migração poderá levar algumas horas.</span><span class="sxs-lookup"><span data-stu-id="5630e-115">For large-scale deployments (hundreds of VMs), the migration can take a few hours.</span></span>

## <a name="can-i-roll-back-after-my-migrating-resources-are-committed-in-resource-manager"></a><span data-ttu-id="5630e-116">Poderei reverter depois que meus recursos de migração forem confirmados no Gerenciador de Recursos?</span><span class="sxs-lookup"><span data-stu-id="5630e-116">Can I roll back after my migrating resources are committed in Resource Manager?</span></span> 

<span data-ttu-id="5630e-117">É possível anular a migração, desde que os recursos estejam no estado preparado.</span><span class="sxs-lookup"><span data-stu-id="5630e-117">You can abort your migration as long as the resources are in the prepared state.</span></span> <span data-ttu-id="5630e-118">Não há suporte para reversão depois que os recursos forem migrados com êxito por meio da operação de confirmação.</span><span class="sxs-lookup"><span data-stu-id="5630e-118">Rollback is not supported after the resources have been successfully migrated through the commit operation.</span></span>

## <a name="can-i-roll-back-my-migration-if-the-commit-operation-fails"></a><span data-ttu-id="5630e-119">Poderei reverter minha migração se a operação de confirmação falhar?</span><span class="sxs-lookup"><span data-stu-id="5630e-119">Can I roll back my migration if the commit operation fails?</span></span> 

<span data-ttu-id="5630e-120">Não será possível anular a migração se a operação de confirmação falhar.</span><span class="sxs-lookup"><span data-stu-id="5630e-120">You cannot abort migration if the commit operation fails.</span></span> <span data-ttu-id="5630e-121">Todas as operações de migração, incluindo a operação de confirmação, são idempotentes.</span><span class="sxs-lookup"><span data-stu-id="5630e-121">All migration operations, including the commit operation, are idempotent.</span></span> <span data-ttu-id="5630e-122">Portanto, recomendamos que você repita a operação após um curto período.</span><span class="sxs-lookup"><span data-stu-id="5630e-122">So we recommend that you retry the operation after a short time.</span></span> <span data-ttu-id="5630e-123">Se a falha ainda persistir, crie um tíquete de suporte ou uma postagem no fórum com a marcação ClassicIaaSMigration em nosso [fórum sobre VMs](https://social.msdn.microsoft.com/Forums/azure/home?forum=WAVirtualMachinesforWindows).</span><span class="sxs-lookup"><span data-stu-id="5630e-123">If you still face an error, create a support ticket or create a forum post with the ClassicIaaSMigration tag on our [VM forum](https://social.msdn.microsoft.com/Forums/azure/home?forum=WAVirtualMachinesforWindows).</span></span>

## <a name="do-i-have-to-buy-another-express-route-circuit-if-i-have-to-use-iaas-under-resource-manager"></a><span data-ttu-id="5630e-124">Será necessário comprar outro circuito de Rota Expressa se eu precisar aproveitar usar a IaaS no Gerenciador de Recursos?</span><span class="sxs-lookup"><span data-stu-id="5630e-124">Do I have to buy another express route circuit if I have to use IaaS under Resource Manager?</span></span> 

<span data-ttu-id="5630e-125">Não.</span><span class="sxs-lookup"><span data-stu-id="5630e-125">No.</span></span> <span data-ttu-id="5630e-126">Habilitamos recentemente [a movimentação dos circuitos da ExpressRoute do clássico para o modelo de implantação do Gerenciador de Recursos](../articles/expressroute/expressroute-move.md).</span><span class="sxs-lookup"><span data-stu-id="5630e-126">We recently enabled [moving ExpressRoute circuits from the classic to the Resource Manager deployment model](../articles/expressroute/expressroute-move.md).</span></span> <span data-ttu-id="5630e-127">Você não precisará comprar um novo circuito de Rota Expressa se já tiver um.</span><span class="sxs-lookup"><span data-stu-id="5630e-127">You don’t have to buy a new ExpressRoute circuit if you already have one.</span></span>

## <a name="what-if-i-had-configured-role-based-access-control-policies-for-my-classic-iaas-resources"></a><span data-ttu-id="5630e-128">E se eu tiver configurado políticas de Controle de Acesso Baseado em Função para meus recursos clássicos de IaaS?</span><span class="sxs-lookup"><span data-stu-id="5630e-128">What if I had configured Role-Based Access Control policies for my classic IaaS resources?</span></span> 

<span data-ttu-id="5630e-129">Durante a migração, os recursos se transformam do clássico para o Gerenciador de Recursos.</span><span class="sxs-lookup"><span data-stu-id="5630e-129">During migration, the resources transform from classic to Resource Manager.</span></span> <span data-ttu-id="5630e-130">Portanto, é recomendável planejar as atualizações da política de RBAC que precisam ocorrer após a migração.</span><span class="sxs-lookup"><span data-stu-id="5630e-130">So we recommend that you plan the RBAC policy updates that need to happen after migration.</span></span>

## <a name="i-backed-up-my-classic-vms-in-a-backup-vault-can-i-migrate-my-vms-from-classic-mode-to-resource-manager-mode-and-protect-them-in-a-recovery-services-vault"></a><span data-ttu-id="5630e-131">Fiz backup de minhas VMs clássicas em um cofre de Backup.</span><span class="sxs-lookup"><span data-stu-id="5630e-131">I backed up my classic VMs in a Backup vault.</span></span> <span data-ttu-id="5630e-132">Posso migrar minhas VMs de modo clássico para modo do Resource Manager e protegê-los em um cofre dos Serviços de Recuperação?</span><span class="sxs-lookup"><span data-stu-id="5630e-132">Can I migrate my VMs from classic mode to Resource Manager mode and protect them in a Recovery Services vault?</span></span> 

<span data-ttu-id="5630e-133">Os pontos de recuperação de VM em um cofre de backup não migrarão automaticamente para o cofre dos serviços de recuperação quando você migrar a VM do modo clássico para o modo do Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="5630e-133">Classic VM recovery points in a backup vault don't automatically migrate to a Recovery Services vault when you move the VM from classic to Resource Manager mode.</span></span> <span data-ttu-id="5630e-134">Siga estas etapas para transferir seus backups de VM:</span><span class="sxs-lookup"><span data-stu-id="5630e-134">Follow these steps to transfer your VM backups:</span></span>

1. <span data-ttu-id="5630e-135">No cofre de Backup, vá para a guia **Itens Protegidos** e selecione a VM.</span><span class="sxs-lookup"><span data-stu-id="5630e-135">In the Backup vault, go to the **Protected Items** tab and select the VM.</span></span> <span data-ttu-id="5630e-136">Clique em [Parar Proteção](../articles/backup/backup-azure-manage-vms-classic.md#stop-protecting-virtual-machines).</span><span class="sxs-lookup"><span data-stu-id="5630e-136">Click [Stop Protection](../articles/backup/backup-azure-manage-vms-classic.md#stop-protecting-virtual-machines).</span></span> <span data-ttu-id="5630e-137">Deixe a opção *Excluir dados de backup associados***desmarcada**.</span><span class="sxs-lookup"><span data-stu-id="5630e-137">Leave *Delete associated backup data* option **unchecked**.</span></span>
2. <span data-ttu-id="5630e-138">Exclua a extensão de backup/instantâneo da VM.</span><span class="sxs-lookup"><span data-stu-id="5630e-138">Delete the backup/snapshot extension from the VM.</span></span>
3. <span data-ttu-id="5630e-139">Migre a máquina virtual do modo clássico para o modo do Gerenciador de Recursos.</span><span class="sxs-lookup"><span data-stu-id="5630e-139">Migrate the virtual machine from classic mode to Resource Manager mode.</span></span> <span data-ttu-id="5630e-140">As informações de armazenamento e de rede correspondentes à máquina virtual também precisam ser migradas para o modo do Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="5630e-140">Make sure the storage and network information corresponding to the virtual machine is also migrated to Resource Manager mode.</span></span>
4. <span data-ttu-id="5630e-141">Criar um cofre dos Serviços de Recuperação e configure o backup na máquina virtual migrada usando a ação **Backup** na parte superior do painel do cofre.</span><span class="sxs-lookup"><span data-stu-id="5630e-141">Create a Recovery Services vault and configure backup on the migrated virtual machine using **Backup** action on top of vault dashboard.</span></span> <span data-ttu-id="5630e-142">Para obter informações detalhadas sobre como fazer backup de uma VM em um cofre dos Serviços de Recuperação, veja o artigo [Proteger VMs com um cofre dos Serviços de Recuperação](../articles/backup/backup-azure-vms-first-look-arm.md).</span><span class="sxs-lookup"><span data-stu-id="5630e-142">For detailed information on backing up a VM to a Recovery Services vault, see the article, [Protect Azure VMs with a Recovery Services vault](../articles/backup/backup-azure-vms-first-look-arm.md).</span></span>

## <a name="can-i-validate-my-subscription-or-resources-to-see-if-theyre-capable-of-migration"></a><span data-ttu-id="5630e-143">Posso validar minha assinatura ou meus recursos para ver se eles podem fazer a migração?</span><span class="sxs-lookup"><span data-stu-id="5630e-143">Can I validate my subscription or resources to see if they're capable of migration?</span></span> 

<span data-ttu-id="5630e-144">Sim.</span><span class="sxs-lookup"><span data-stu-id="5630e-144">Yes.</span></span> <span data-ttu-id="5630e-145">Na opção de migração com suporte de plataforma, a primeira etapa para preparar a migração é validar se os recursos podem fazer a migração.</span><span class="sxs-lookup"><span data-stu-id="5630e-145">In the platform-supported migration option, the first step in preparing for migration is to validate that the resources are capable of migration.</span></span> <span data-ttu-id="5630e-146">Caso a operação de validação falhe, você recebe todas as mensagens relativas a todos os motivos pelos quais a migração não pode ser concluída.</span><span class="sxs-lookup"><span data-stu-id="5630e-146">In case the validate operation fails, you receive messages for all the reasons the migration cannot be completed.</span></span>

## <a name="what-happens-if-i-run-into-a-quota-error-while-preparing-the-iaas-resources-for-migration"></a><span data-ttu-id="5630e-147">O que acontecerá se eu encontrar um erro de cota ao preparar os recursos de IaaS para migração?</span><span class="sxs-lookup"><span data-stu-id="5630e-147">What happens if I run into a quota error while preparing the IaaS resources for migration?</span></span> 

<span data-ttu-id="5630e-148">É recomendável anular a migração e, em seguida, registrar uma solicitação de suporte para aumentar as cotas na região onde você está migrando as VMs.</span><span class="sxs-lookup"><span data-stu-id="5630e-148">We recommend that you abort your migration and then log a support request to increase the quotas in the region where you are migrating the VMs.</span></span> <span data-ttu-id="5630e-149">Depois que a solicitação de cota for aprovada, você poderá iniciar a execução das etapas de migração novamente.</span><span class="sxs-lookup"><span data-stu-id="5630e-149">After the quota request is approved, you can start executing the migration steps again.</span></span>

## <a name="how-do-i-report-an-issue"></a><span data-ttu-id="5630e-150">Como faço para relatar um problema?</span><span class="sxs-lookup"><span data-stu-id="5630e-150">How do I report an issue?</span></span> 

<span data-ttu-id="5630e-151">Poste suas perguntas e dúvidas sobre migração em nosso [fórum sobre VMs](https://social.msdn.microsoft.com/Forums/azure/home?forum=WAVirtualMachinesforWindows), com a palavra-chave ClassicIaaSMigration.</span><span class="sxs-lookup"><span data-stu-id="5630e-151">Post your issues and questions about migration to our [VM forum](https://social.msdn.microsoft.com/Forums/azure/home?forum=WAVirtualMachinesforWindows), with the keyword ClassicIaaSMigration.</span></span> <span data-ttu-id="5630e-152">É recomendável postar todas as suas dúvidas neste fórum.</span><span class="sxs-lookup"><span data-stu-id="5630e-152">We recommend posting all your questions on this forum.</span></span> <span data-ttu-id="5630e-153">Caso você tenha um contrato de suporte, será possível registrar um tíquete de suporte.</span><span class="sxs-lookup"><span data-stu-id="5630e-153">If you have a support contract, you're welcome to log a support ticket as well.</span></span>

## <a name="what-if-i-dont-like-the-names-of-the-resources-that-the-platform-chose-during-migration"></a><span data-ttu-id="5630e-154">E se eu não gostar dos nomes dos recursos que a plataforma escolheu durante a migração?</span><span class="sxs-lookup"><span data-stu-id="5630e-154">What if I don't like the names of the resources that the platform chose during migration?</span></span> 

<span data-ttu-id="5630e-155">Todos os recursos para os quais você fornecer nomes explicitamente no modelo de implantação clássica são retidos durante a migração.</span><span class="sxs-lookup"><span data-stu-id="5630e-155">All the resources that you explicitly provide names for in the classic deployment model are retained during migration.</span></span> <span data-ttu-id="5630e-156">Em alguns casos, novos recursos são criados.</span><span class="sxs-lookup"><span data-stu-id="5630e-156">In some cases, new resources are created.</span></span> <span data-ttu-id="5630e-157">Por exemplo: uma interface de rede é criada para cada VM.</span><span class="sxs-lookup"><span data-stu-id="5630e-157">For example: a network interface is created for every VM.</span></span> <span data-ttu-id="5630e-158">No momento, não há suporte para a capacidade de controlar os nomes dos novos recursos criados durante a migração.</span><span class="sxs-lookup"><span data-stu-id="5630e-158">We currently don't support the ability to control the names of these new resources created during migration.</span></span> <span data-ttu-id="5630e-159">Registre seus votos para esse recurso no [fórum de comentários do Azure](http://feedback.azure.com).</span><span class="sxs-lookup"><span data-stu-id="5630e-159">Log your votes for this feature on the [Azure feedback forum](http://feedback.azure.com).</span></span>

## <a name="can-i-migrate-expressroute-circuits-used-across-subscriptions-with-authorization-links"></a><span data-ttu-id="5630e-160">Posso migrar circuitos de ExpressRoute usados em assinaturas com links de autorização?</span><span class="sxs-lookup"><span data-stu-id="5630e-160">Can I migrate ExpressRoute circuits used across subscriptions with authorization links?</span></span> 

<span data-ttu-id="5630e-161">Os circuitos de ExpressRoute que usam links de autorização entre assinaturas não podem ser migrados automaticamente sem tempo de inatividade.</span><span class="sxs-lookup"><span data-stu-id="5630e-161">ExpressRoute circuits which use cross-subscription authorization links cannot be migrated automatically without downtime.</span></span> <span data-ttu-id="5630e-162">Temos orientações sobre como eles podem ser migrados usando as etapas manuais.</span><span class="sxs-lookup"><span data-stu-id="5630e-162">We have guidance on how these can be migrated using manual steps.</span></span> <span data-ttu-id="5630e-163">Confira [Migrar circuitos de ExpressRoute e redes virtuais associadas do modelo de implantação clássico para o Resource Manager](../articles/expressroute/expressroute-migration-classic-resource-manager.md) para obter etapas e mais informações.</span><span class="sxs-lookup"><span data-stu-id="5630e-163">See [Migrate ExpressRoute circuits and associated virtual networks from the classic to the Resource Manager deployment model](../articles/expressroute/expressroute-migration-classic-resource-manager.md) for steps and more information.</span></span>

## <a name="i-got-a-message-vm-is-reporting-the-overall-agent-status-as-not-ready-hence-the-vm-cannot-be-migrated-ensure-that-the-vm-agent-is-reporting-overall-agent-status-as-ready-or-vm-contains-extension-whose-status-is-not-being-reported-from-the-vm-hence-this-vm-cannot-be-migrated-"></a><span data-ttu-id="5630e-164">Recebi uma mensagem *"A VM está informando o status geral do agente como Não Pronto. Portanto, a VM não pode ser migrada. Certifique-se de que o Agente da VM esteja informando o status geral do agente como Pronto"* ou *"A VM contém uma Extensão cujo Status não está sendo informado.</span><span class="sxs-lookup"><span data-stu-id="5630e-164">I got a message *"VM is reporting the overall agent status as Not Ready. Hence, the VM cannot be migrated. Ensure that the VM Agent is reporting overall agent status as Ready"* or *"VM contains Extension whose Status is not being reported from the VM.</span></span> <span data-ttu-id="5630e-165">Portanto, esta VM não pode ser migrada."</span><span class="sxs-lookup"><span data-stu-id="5630e-165">Hence, this VM cannot be migrated."</span></span> *

<span data-ttu-id="5630e-166">Essa mensagem é recebida quando a VM não tem conectividade de saída com a Internet.</span><span class="sxs-lookup"><span data-stu-id="5630e-166">This message is received when the VM does not have outbound connectivity to the internet.</span></span> <span data-ttu-id="5630e-167">O agente de VM utiliza conectividade de saída para acessar a conta de armazenamento do Azure para atualizar o status do agente a cada cinco minutos.</span><span class="sxs-lookup"><span data-stu-id="5630e-167">The VM agent uses outbound connectivity to reach the Azure storage account for updating the agent status every five minutes.</span></span>
